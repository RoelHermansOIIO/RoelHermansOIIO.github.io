/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 6);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return resolutions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return screenShareResolutions; });
/* unused harmony export isSafari */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return isCompatibleChrome; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return isFirefox; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Toast; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return validator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return serializeFormData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return addView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return removeView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return getDevices; });
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(materialize_css__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);
/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_2__);

console.log("AgoraRTC SDK VERSION: ", agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.VERSION);


var resolutions = [{
  name: 'default',
  value: 'default'
}, {
  name: '480p',
  value: '480p'
}, {
  name: '720p',
  value: '720p'
}, {
  name: '1080p',
  value: '1080p'
}];
var screenShareResolutions = [{
  name: 'default',
  value: 'default'
}, {
  name: '480p_1',
  value: '480p_1'
}, {
  name: '720p_1',
  value: '720p_1'
}, {
  name: '1080p_1',
  value: '1080p_1'
}];
var parser = new ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default.a();
var userAgentInfo = parser.getResult();
var isSafari = function isSafari() {
  return userAgentInfo.browser.name === 'Safari' || userAgentInfo.browser.name === 'Mobile Safari';
};
var isCompatibleChrome = function isCompatibleChrome() {
  if (userAgentInfo.browser.name === 'Chrome') {
    var major = +userAgentInfo.browser.major;
    if (major >= 72) return true;
  }

  return false;
};
var isFirefox = function isFirefox() {
  return userAgentInfo.browser.name === 'Firefox';
};

function Toastify(options) {
  materialize_css__WEBPACK_IMPORTED_MODULE_1__["toast"]({
    html: options.text,
    classes: options.classes
  });
}

var Toast = {
  info: function info(msg) {
    Toastify({
      text: msg,
      classes: "info-toast"
    });
  },
  notice: function notice(msg) {
    Toastify({
      text: msg,
      classes: "notice-toast"
    });
  },
  error: function error(msg) {
    Toastify({
      text: msg,
      classes: "error-toast"
    });
  }
};
function validator(formData, fields) {
  var keys = Object.keys(formData);

  for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {
    var key = _keys[_i];

    if (fields.indexOf(key) != -1) {
      if (!formData[key]) {
        Toast.error("Please Enter " + key);
        return false;
      }
    }
  }

  return true;
}
function serializeFormData() {
  var formData = $("#form").serializeArray();
  var obj = {};
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = formData[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var item = _step.value;
      var key = item.name;
      var val = item.value;
      obj[key] = val;
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator["return"] != null) {
        _iterator["return"]();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  if (obj.uid != undefined && !Number.isNaN(+obj.uid)) {
    obj.uid = +obj.uid;
  }

  return obj;
}
function addView(id, show) {
  if (!$("#" + id)[0]) {
    $("<div/>", {
      id: "remote_video_panel_" + id,
      "class": "video-view"
    }).appendTo("#video");
    $("<div/>", {
      id: "remote_video_" + id,
      "class": "video-placeholder"
    }).appendTo("#remote_video_panel_" + id);
    $("<div/>", {
      id: "remote_video_info_" + id,
      "class": "video-profile " + (show ? "" : "hide")
    }).appendTo("#remote_video_panel_" + id);
    $("<div/>", {
      id: "video_autoplay_" + id,
      "class": "autoplay-fallback hide"
    }).appendTo("#remote_video_panel_" + id);
  }
}
function removeView(id) {
  if ($("#remote_video_panel_" + id)[0]) {
    $("#remote_video_panel_" + id).remove();
  }
}
function getDevices(next) {
  agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.getDevices(function (items) {
    items.filter(function (item) {
      return ['audioinput', 'videoinput'].indexOf(item.kind) !== -1;
    }).map(function (item) {
      return {
        name: item.label,
        value: item.deviceId,
        kind: item.kind
      };
    });
    var videos = [];
    var audios = [];

    for (var i = 0; i < items.length; i++) {
      var item = items[i];

      if ('videoinput' == item.kind) {
        var name = item.label;
        var value = item.deviceId;

        if (!name) {
          name = "camera-" + videos.length;
        }

        videos.push({
          name: name,
          value: value,
          kind: item.kind
        });
      }

      if ('audioinput' == item.kind) {
        var name = item.label;
        var value = item.deviceId;

        if (!name) {
          name = "microphone-" + audios.length;
        }

        audios.push({
          name: name,
          value: value,
          kind: item.kind
        });
      }
    }

    next({
      videos: videos,
      audios: audios
    });
  });
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)))

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

/*! AgoraRTC|BUILD v3.0.0-0-g747f321 */
!function(e,t){ true?module.exports=t():undefined}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t,n){"use strict";n.r(t);var i=n(8),a=n.n(i),r=n(9),o=n(3),s=n(2),c=0,d="free",u=[],l=[],p=0;setInterval(function(){Object(o.getParameter)("UPLOAD_LOG")&&f.info("console log upload")},9e5);var f=function(){var e,t,n,i,f,m,g="https://".concat(Object(o.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v1"),v=["DEBUG","INFO","WARNING","ERROR","NONE"],h=0,S=function e(t){d="uploading",setTimeout(function(){!function(e,t,n){var i;Array.isArray(e)||(e=[e]),e=e.map(function(e){return{log_item_id:c++,log_level:e.log_level,payload_str:e.payload}}),i={sdk_version:o.VERSION,process_id:Object(s.a)(),payload:JSON.stringify(e)};try{Object(r.post)(g,i,function(e){"OK"===e?t&&t(e):n&&n(e)},function(e){n&&n(e)},{withCredentials:!0})}catch(e){n&&n(e)}}(t,function(){p=0,0!==u.length?(l=u.length<10?u.splice(0,u.length):u.splice(0,10),e(l)):d="free"},function(){setTimeout(function(){e(l)},p++<2?200:1e4)})},3e3)};t=function(){for(var t=[0],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},n=function(){for(var t=[1],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},i=function(){for(var t=[2],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},f=function(){for(var t=[3],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)};var _={};return m=function(e){_[e]||(i.apply(void 0,arguments),_[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,enableLogUpload:function(){Object(o.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(o.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){g=e?"https://".concat(e,"/ls/?h=").concat(Object(o.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Object(o.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v1")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),h=e},log:e=function(){var e,t=arguments[0],n=arguments;if(n[0]=(e=new Date).toTimeString().split(" ")[0]+":"+e.getMilliseconds()+" Agora-SDK ["+(v[t]||"DEFAULT")+"]:",function(e,t){if(Object(o.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var n="";t.forEach(function(e){"object"===a()(e)&&(e=JSON.stringify(e)),n=n+e+" "}),u.push({payload:n,log_level:e}),"free"===d&&(l=u.length<10?u.splice(0,u.length):u.splice(0,10),S(l))}catch(e){}}(t,n),!(t<h))switch(t){case 0:case 1:console.log.apply(console,n);break;case 2:console.warn.apply(console,n);break;case 3:console.error.apply(console,n);break;default:return void console.log.apply(console,n)}},debug:t,info:n,warning:i,deprecate:m,error:f}}();t.default=f},function(e,t,n){"use strict";n.r(t),n.d(t,"checkValidObject",function(){return o}),n.d(t,"checkValidString",function(){return s}),n.d(t,"checkValidNumber",function(){return c}),n.d(t,"checkValidFloatNumber",function(){return d}),n.d(t,"checkValidBoolean",function(){return u}),n.d(t,"checkValidEnum",function(){return r}),n.d(t,"isValidString",function(){return l}),n.d(t,"isValidNumber",function(){return p}),n.d(t,"isValidBoolean",function(){return m}),n.d(t,"isASCII",function(){return h}),n.d(t,"isInteger",function(){return S}),n.d(t,"isNumber",function(){return _}),n.d(t,"isString",function(){return E}),n.d(t,"isArray",function(){return I}),n.d(t,"isEmpty",function(){return y}),n.d(t,"isValidToken",function(){return g}),n.d(t,"isValidChannelName",function(){return v});var i=n(8),a=n.n(i),r=function(e,t,n){for(var i=0;i<n.length;i++)if(e===n[i])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(n)))},o=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==a()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},s=function(e,t,n,i,a){if(y(n)&&(n=1),i=i||255,y(a)&&(a=!0),y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!l(e,n,i,a))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(i,"].").concat(a?" ASCII characters only.":""))},c=function(e,t,n,i){if(y(n)&&(n=1),i=i||1e4,y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!p(e,n,i))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(i,"]. integer only"))},d=function(e,t,n,i){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(y(n)&&(n=0),i=i||1e4,y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!f(e,n,i))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(i,"]."))},u=function(e,t){if(y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!m(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},l=function(e,t,n,i){return t||(t=0),n||(n=Number.MAX_SAFE_INTEGER),y(i)&&(i=!0),E(e)&&(!i||h(e))&&e.length>=t&&e.length<=n},p=function(e,t,n){return S(e)&&e>=t&&e<=n},f=function(e,t,n){return _(e)&&e>=t&&e<=n},m=function(e){return"boolean"==typeof e},g=function(e){return l(e,1,2047)},v=function(e){return E(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},h=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}},S=function(e){return"number"==typeof e&&e%1==0},_=function(e){return"number"==typeof e},E=function(e){return"string"==typeof e},I=function(e){return e instanceof Array},y=function(e){return null==e}},function(e,t,n){"use strict";var i=n(13),a=n.n(i),r=n(5),o=n.n(r),s=n(3),c=n(0),d=n(9),u=n(15),l=n.n(u);n.d(t,"b",function(){return g}),n.d(t,"a",function(){return m});var p={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},f=null,m=function(){return f||(f="process-"+l()(),c.default.info("processId: "+f)),f},g=function(){var e={list:{}};e.url=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6080/events/message"),e.urlBackup=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6080/events/message"),e.setProxyServer=function(t){t?(e.url=Object(d.shouldUseHttps)()?"https://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"http://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6080&d=events/message"),e.urlBackup=Object(d.shouldUseHttps)()?"https://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"http://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6080&d=events/message"),c.default.debug("reportProxyServerURL: ".concat(e.url)),c.default.debug("reportProxyServerBackupURL: ".concat(e.urlBackup))):(e.url=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6080/events/message"),e.urlBackup=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6080/events/message"))},e.sessionInit=function(t,n){var i=o()({},p);i.startTime=+new Date,i.sid=t,i.cname=n.cname,e.list[t]=i;var a=o()({},{willUploadConsoleLog:Object(s.getParameter)("UPLOAD_LOG")},n.extend),r=o()({},i);r.eventType="session_init",r.appid=n.appid,r.browser=navigator.userAgent,r.build=s.BUILD,r.lts=+new Date,r.elapse=r.lts-r.startTime,r.extend=JSON.stringify(a),r.mode=n.mode,r.process=m(),r.success=n.succ,r.version=s.VERSION,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.Session",data:r}),e._flushInvokeReport(t)},e.joinChooseServer=function(t,n,i){if(e.list[t]){n.uid&&(e.list[t].uid=parseInt(n.uid)),n.cid&&(e.list[t].cid=parseInt(n.cid));var a=o()({},e.list[t]);a.eventType="join_choose_server";var r=n.lts;a.lts=Date.now(),a.eventElapse=a.lts-r,a.chooseServerAddr=n.csAddr,a.errorCode=n.ec,a.elapse=a.lts-a.startTime,a.success=n.succ,a.chooseServerAddrList=JSON.stringify(n.serverList),delete a.startTime,e.send({type:"io.agora.pb.Wrtc.JoinChooseServer",data:a})}},e.reqUserAccount=function(t,n){n.vid&&(e.list[t].vid=n.vid);var i=o()({},e.list[t]),a=n.lts;i.eventType="req_user_account",i.lts=Date.now(),i.success=n.success,i.serverAddress=n.serverAddress,i.stringUid=n.stringUid,i.uid=n.uid,i.errorCode=n.errorCode,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-a,i.extend="string"==typeof n.extend?n.extend:JSON.stringify(n.extend),delete i.startTime,e.send({type:"io.agora.pb.Wrtc.ReqUserAccount",data:i})},e.joinGateway=function(t,n){n.vid&&(e.list[t].vid=n.vid);var i=o()({},e.list[t]),a=n.lts;i.eventType="join_gateway",i.lts=Date.now(),i.gatewayAddr=n.addr,i.success=n.succ,i.errorCode=n.ec,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-a,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.JoinGateway",data:i})},e.publish=function(t,n){var i=o()({},e.list[t]);i.eventType="publish";var a=n.lts;i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.success=n.succ,i.errorCode=n.ec,n.videoName&&(i.videoName=n.videoName),n.audioName&&(i.audioName=n.audioName),n.screenName&&(i.screenName=n.screenName),delete i.startTime,e.send({type:"io.agora.pb.Wrtc.Publish",data:i}),e._flushInvokeReport(t)},e.subscribe=function(t,n){var i=o()({},e.list[t]);i.eventType="subscribe";var a=n.lts;i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.errorCode=n.ec,i.success=n.succ,isFinite(n.peerid)?i.peer=n.peerid:i.peerSuid=""+n.peerid,"boolean"==typeof n.video&&(i.video=n.video),"boolean"==typeof n.audio&&(i.audio=n.audio),delete i.startTime,e.send({type:"io.agora.pb.Wrtc.Subscribe",data:i}),e._flushInvokeReport(t)},e.firstRemoteFrame=function(t,n){var i=o()({},e.list[t]);i.eventType="first_remote_frame";var a=n.lts;i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.width=n.width,i.height=n.height,i.success=n.succ,i.errorCode=n.ec,isFinite(n.peerid)?i.peer=n.peerid:i.peerSuid=""+n.peerid,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.FirstFrame",data:i})},e.streamSwitch=function(t,n){var i=o()({},e.list[t]);i.eventType="stream_switch",i.lts=Date.now(),i.isDual=n.isdual,i.elapse=i.lts-i.startTime,i.success=i.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.StreamSwitch",data:i})},e.audioSendingStopped=function(t,n){var i=o()({},e.list[t]);i.eventType="audio_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reason=n.reason,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.AudioSendingStopped",data:i})},e.videoSendingStopped=function(t,n){var i=o()({},e.list[t]);i.eventType="video_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reson=n.reason,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.VideoSendingStopped",data:i})},e.requestProxyAppCenter=function(t,n){var i=o()({},e.list[t]),a=n.lts;i.eventType="request_proxy_appcenter",i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.extend=n.extend+"",i.APAddr=n.APAddr,i.workerManagerList=n.workerManagerList,i.response=n.response,i.errorCode=n.ec,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.RequestProxyAppCenter",data:i})},e.requestProxyWorkerManager=function(t,n){var i=o()({},e.list[t]),a=n.lts;i.eventType="request_proxy_worker_manager",i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.extend=n.extend,i.workerManagerAddr=n.workerManagerAddr,i.response=n.response,i.errorCode=n.ec,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.RequestProxyWorkerManager",data:i})};var t=0;return e.reportApiInvoke=function(e,n){var i=n.tag,r=n.name,o=n.getStates,d=n.options,u=n.timeout,l=void 0===u?6e4:u,p=n.callback,f=n.reportResult,m=void 0===f||f,v=Date.now(),h=0,S=t++,_=function(){return a()({tag:i,invokeId:S,sid:e,name:r,apiInvokeTime:v,options:d},o&&{states:(t=o(),Object.keys(t).reduce(function(e,n){var i=e;return null!=t[n]&&(i[n]=t[n]),i},{}))});var t},E=!!Object(s.getParameter)("SHOW_REPORT_INVOKER_LOG");E&&c.default.info("".concat(r," start"));var I=setTimeout(function(){g._sendApiInvoke(a()({},_(),{error:"API_INVOKE_TIMEOUT",success:!1}))},l);return function(e,t){if(clearTimeout(I),++h>1&&(e="EXECUTOR_INVOKE_".concat(h)),e)return g._sendApiInvoke(a()({},_(),{success:!1,error:e},o&&{states:o()})),E&&c.default.info("".concat(r," onFailure"),e),p&&p(e);g._sendApiInvoke(a()({},_(),{success:!0},m&&{result:t},o&&{states:o()})),E&&c.default.info("".concat(r," onSuccess")),p&&p(null,t)}},e._cachedItems=[],e._cacheInvokeReport=function(t){t.lts||(t.lts=Date.now()),e._cachedItems.push(t),e._cachedItems.length>50&&e._cachedItems.shift()},e._flushInvokeReport=function(t){if(e._cachedItems.length){var n=e._cachedItems;e._cachedItems=[],c.default.debug("Flush cached event reporting:",n.length),n.forEach(function(n,i){n.sid=t,setTimeout(function(){e._sendApiInvoke(n)},5e3+500*i)})}},e._sendApiInvoke=function(t){var n=t.tag,i=t.invokeId,r=t.sid,o=t.name,c=t.result,d=t.states,u=t.options,l=t.error,p=t.success,f=t.apiInvokeTime,m=t.lts,g=Object(s.getParameter)("NOT_REPORT_EVENT");if(!(n&&g instanceof Array&&-1!==g.indexOf(n)))if(e.list[r]){var v=e.list[r],h=v.startTime,S=v.cname,_=v.uid,E=v.cid,I=(m=m||Date.now())-h,y=m-f,T="";if(u)try{T=JSON.stringify(u)}catch(e){T=u.toString()}var b=a()({invokeId:i,sid:r,cname:S,cid:E,lts:m,uid:_,success:p,elapse:I,apiName:o,execElapse:y},void 0!==u&&{options:T},void 0!==d&&{execStates:JSON.stringify(d)},void 0!==l&&{errorCode:JSON.stringify(l)},void 0!==c&&{execResult:JSON.stringify(c)});e.send({type:"io.agora.pb.Wrtc.ApiInvoke",data:b})}else e._cacheInvokeReport(arguments[0])},e._send=function(t){try{var n=[];t&&t.data&&t.data.apiName?n.push(["apiName",""+t.data.apiName]):t&&t.data&&t.data.eventType&&n.push(["eventType",t.data.eventType]);var i=n.map(function(e){return"".concat(e[0],"=").concat(encodeURIComponent(e[1]))}).join("&"),a=-1===e.url.indexOf("?")?"".concat(e.url,"?").concat(i):e.url;Object(d.post)(a,t,null,function(n){var a=-1===e.urlBackup.indexOf("?")?"".concat(e.urlBackup,"?").concat(i):e.urlBackup;Object(d.post)(a,t,null,function(e){},{timeout:1e4})},{timeout:1e4})}catch(e){}},e.sendCache=[],e.sendTimer=null,e.send=function(t){if(e.sendCache.push(t),null===e.sendTimer){return function t(){e.sendTimer=setTimeout(function(){if(0!==e.sendCache.length)return e._send(e.sendCache.shift()),t();e.sendTimer=null},Object(s.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BUILD="v3.0.0-0-g747f321";t.VERSION="3.0.0";t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,20,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]};t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var i={WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-2.agoraio.cn","cds-ap-web-3.agora.io","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-2.agoraio.cn","sua-ap-web-3.agora.io","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"webcollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"webcollector-2.agoraio.cn",WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e4,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1};t.setParameter=function(e,t){return void 0!==i[e]&&(i[e]=t,!0)};t.getParameter=function(e){return void 0!==i[e]?i[e]:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"getBrowserInfo",function(){return S}),n.d(t,"getBrowserVersion",function(){return p}),n.d(t,"getBrowserOS",function(){return f}),n.d(t,"isChrome",function(){return i}),n.d(t,"isSafari",function(){return a}),n.d(t,"isFireFox",function(){return o}),n.d(t,"isOpera",function(){return s}),n.d(t,"isEdge",function(){return r}),n.d(t,"isQQBrowser",function(){return c}),n.d(t,"isWeChatBrowser",function(){return d}),n.d(t,"isLegacyChrome",function(){return g}),n.d(t,"isSupportedPC",function(){return u}),n.d(t,"isSupportedMobile",function(){return l}),n.d(t,"getChromeKernelVersion",function(){return h}),n.d(t,"isChromeKernel",function(){return m});var i=function(){var e=S();return e.name&&"Chrome"===e.name},a=function(){var e=S();return e.name&&"Safari"===e.name},r=function(){var e=S();return e.name&&"Edge"===e.name},o=function(){var e=S();return e.name&&"Firefox"===e.name},s=function(){var e=S();return e.name&&"OPR"===e.name},c=function(){var e=S();return e.name&&"QQBrowser"===e.name},d=function(){var e=S();return e.name&&"MicroMessenger"===e.name},u=function(){var e=f();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},l=function(){var e=f();return"Android"===e||"iOS"===e},p=function(){return S().version},f=function(){return S().os},m=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)};function g(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var v,h=function(){var e=navigator.userAgent.match(/chrome\/[\d]./i);return e&&e[0]&&e[0].split("/")[1]},S=(v=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===n[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(n=e),"Safari"===n[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(n[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(n=[null,"IE",e[1]]);var i=void 0,a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var r in a){var o=a[r];if(o.r.test(navigator.userAgent)){i=o.s;break}}return{name:n[1],version:n[2],os:i}}(),function(){return v})},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){e.exports=n(24)},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(30)),d=n(3),u=s(n(0)),l=n(9),p=n(1),f=n(10),m=function(e){function t(t,n){var i=e.call(this)||this;return i._state=_.RELAY_STATE_IDLE,i._onStatus=function(e){u.default.debug("["+i.clientId+"] ChannelMediaStatus: "+JSON.stringify(e)),e&&e.command&&("onAudioPacketReceived"===e.command&&i.emit("event",S.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&i.emit("event",S.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(i._state=_.RELAY_STATE_FAILURE,i.emit("state",_.RELAY_STATE_FAILURE,E.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(i._state=_.RELAY_STATE_FAILURE,i.emit("state",_.RELAY_STATE_FAILURE,E.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},i._onClose=function(){return r(i,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(u.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",S.NETWORK_DISCONNECTED),this.state=_.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return t.sent(),[3,4];case 3:return(e=t.sent())instanceof y&&(e.message===v.WS_ABORT||e.message===v.AP_REQUEST_ABORT)?[2]:(this.emit("state",_.RELAY_STATE_FAILURE,E.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}})})},i.token=t.appId,i.appId=t.appId,i.cname=t.cname,i.uid=t.uid,i.sid=t.sid,i.clientId=n,i}return a(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)},enumerable:!0,configurable:!0}),t.prototype.startChannelMediaRelay=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:if(this.state!==_.RELAY_STATE_IDLE)throw new y(v.BAD_STATE);return this.state=_.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return t.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(e)];case 2:return t.sent(),this._prevChannelMediaConfig=e,[2]}})})},t.prototype.updateChannelMediaRelay=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:if(this.state!==_.RELAY_STATE_RUNNING)throw new y(v.BAD_STATE);return[4,this._sendUpdateMessage(e)];case 1:return t.sent(),this._prevChannelMediaConfig=e,[2]}})})},t.prototype.stopChannelMediaRelay=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return e.sent(),u.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=_.RELAY_STATE_IDLE,this.dispose(),[2]}})})},t.prototype.dispose=function(){u.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=_.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},t.prototype._requestOneAP=function(e){var t=this;return new Promise(function(n,i){var a={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:d.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},r={service_name:"tele_channel",json_body:JSON.stringify(a)},o="https://"+e;l.post(o,r,function(e){var t=null,a=null;try{t=JSON.parse(e)}catch(e){i(new y(v.AP_JSON_PARSE_ERROR,e))}0!==t.code&&i(new y(v.AP_REQUEST_ERROR,t));try{a=JSON.parse(t.json_body)}catch(e){i(new y(v.AP_JSON_PARSE_ERROR,e))}200!==a.code&&i(new y(v.AP_REQUEST_ERROR,a)),a.servers?n(a.servers):i(new y(v.AP_JSON_PARSE_ERROR,a))},function(e){return i(e)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})})},t.prototype._requestAP=function(){var e=this,t=d.getParameter("UAP_AP");return new Promise(function(n,i){setTimeout(function(){i(new y(v.AP_REQUEST_TIMEOUT))},3e3),e.on("dispose",function(){i(new y(v.AP_REQUEST_ABORT))}),t.forEach(function(t){t+="/api/v1",e._requestOneAP(t).then(function(i){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" success: "+JSON.stringify(i));var a=i[0],r="wss://"+a.address.replace(/\./g,"-")+".edge.agora.io:"+a.wss;n(r)}).catch(function(n){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" failed: "+JSON.stringify(n))})})})},t.prototype._connectWebsocket=function(e){return this._signal=new I(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)},t.prototype._connect=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,this._requestAP()];case 1:return e=t.sent(),[4,this._connectWebsocket(e)];case 2:return t.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",S.NETWORK_CONNECTED),[2]}})})},t.prototype._sendStartRelayMessage=function(e){return r(this,void 0,void 0,function(){var t,n,i,a,r,s;return o(this,function(o){switch(o.label){case 0:return this._checkSignal(),t=this._genMessage(h.StopPacketTransfer),[4,this._signal.request(t)];case 1:return o.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),n=this._genMessage(h.SetSdkProfile,e),[4,this._signal.request(n)];case 3:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),i=this._genMessage(h.SetSourceChannel,e),[4,this._signal.request(i)];case 4:return o.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return o.sent(),this.emit("event",S.PACKET_JOINED_SRC_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),a=this._genMessage(h.SetSourceUserId,e),[4,this._signal.request(a)];case 6:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),r=this._genMessage(h.SetDestChannel,e),[4,this._signal.request(r)];case 7:return o.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return o.sent(),this.emit("event",S.PACKET_JOINED_DEST_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),s=this._genMessage(h.StartPacketTransfer,e),[4,this._signal.request(s)];case 9:return o.sent(),this.emit("event",S.PACKET_SENT_TO_DEST_CHANNEL),this.state=_.RELAY_STATE_RUNNING,u.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}})})},t.prototype._sendReconnectMessage=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(h.Reconnect,e),[4,this._signal.request(t)];case 1:return n.sent(),[2]}})})},t.prototype._sendUpdateMessage=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(h.UpdateDestChannel,e),[4,this._signal.request(t)];case 1:return n.sent(),this.emit("event",S.PACKET_UPDATE_DEST_CHANNEL),u.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}})})},t.prototype._sendStopRelayMessage=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return this._checkSignal(),e=this._genMessage(h.StopPacketTransfer),[4,this._signal.request(e)];case 1:return t.sent(),u.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}})})},t.prototype._genMessage=function(e,t){var n=this,i=[],a=[],r=[],o={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:d.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},s=null;switch(e){case h.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case h.SetSourceChannel:return s=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceChannel",uid:s.uid+"",channelName:s.channelName,token:s.token||this.appId},o;case h.SetSourceUserId:return s=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceUserId",uid:this.uid+""},o;case h.SetDestChannel:return t.getDestChannelMediaInfos().forEach(function(e){i.push(e.channelName),a.push(e.uid+""),r.push(e.token||n.appId)}),o.clientRequest={command:"SetDestChannel",channelName:i,uid:a,token:r},o;case h.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case h.Reconnect:return o.clientRequest={command:"Reconnect"},o;case h.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case h.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach(function(e){i.push(e.channelName),a.push(e.uid+""),r.push(e.token||n.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:i,uid:a,token:r},o}},t.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new y(v.WS_DISCONNECTED)},t}(c.default);t.default=m;var g=function(){function e(){this.destChannelMediaInfos=new Map}return e.prototype.setSrcChannelInfo=function(e){p.checkValidObject(e,"srcInfo");var t=e.uid,n=e.channelName,i=e.token;if(i&&!p.isValidToken(i))throw"Invalid token in SrcChannelInfo";if(!p.isValidChannelName(n))throw"Invalid channelName in SrcChannelInfo";if(!f.is32Uint(t))throw"Invalid uid in SrcChannelInfo";this.srcChannelMediaInfo=e},e.prototype.setDestChannelInfo=function(e,t){if(!p.isValidChannelName(e))throw"Invalid channelName in DestChannelInfo";p.checkValidObject(t,"destInfo");var n=t.uid,i=t.token,a=t.channelName;if(i&&!p.isValidToken(i))throw"Invalid token in DestChannelInfo";if(!p.isValidChannelName(a))throw"Invalid channelName in DestChannelInfo";if(!f.is32Uint(n))throw"Invalid uid in DestChannelInfo";this.destChannelMediaInfos.set(e,t)},e.prototype.removeDestChannelInfo=function(e){if(!p.isValidChannelName(e))throw"Invalid channelName when invoke removeDestChannelInfo";this.destChannelMediaInfos.delete(e)},e.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},e.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},e}();t.ChannelMediaRelayConfiguration=g;var v,h,S,_,E,I=function(e){function t(t,n,i,a){var r=e.call(this)||this;return r._onOpen=function(){r.emit("open")},r._onClose=function(e){r.emit("close"),r.dispose()},r._onMessage=function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(r.emit("status",t.serverStatus),void r.emit(t.serverStatus.command,t.serverStatus)):void 0;r.emit("req_"+t.requestId,t)},r._requestId=1,r.appId=t,r.cname=n,r.uid=i,r.sid=a,r}return a(t,e),t.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},t.prototype.sendMessage=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new y(v.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send(JSON.stringify(e)),t},t.prototype.waitStatus=function(e){var t=this;return new Promise(function(n,i){var a=window.setTimeout(function(){i(new y(v.WAIT_STATUS_TIMEOUT,e))},5e3);t.once(e,function(t){clearTimeout(a),t.state&&0!==t.state?i(new y(v.WAIT_STATUS_ERROR,e)):n()}),t.once("dispose",function(){clearTimeout(a),i(new y(v.WS_ABORT))})})},t.prototype.request=function(e){var t=this;return new Promise(function(n,i){var a=t.sendMessage(e),r=window.setTimeout(function(){t.removeAllListeners("req_"+a),i(new y(v.REQUEST_TIMEOUT))},3e3);t.once("req_"+a,function(e){clearTimeout(r),e&&200===e.code?n(e):i(new y(v.REQUEST_FAILED,e))}),t.once("dispose",function(){clearTimeout(r),i(new y(v.WS_ABORT))})})},t.prototype.connect=function(e){var t=this;return new Promise(function(n,i){t._ws=new WebSocket(e),t._ws.onopen=function(){t._onOpen(),t._prvUrl=e,t._ws.onmessage=t._onMessage,t._ws.onclose=t._onClose,t._startHeartBeatCheck(),n()},t._ws.onclose=function(e){t._ws=null,i(new y(v.CONNECT_FAILED,"websocket error code: "+e.code))},setTimeout(function(){t._ws&&t._ws.readyState!==WebSocket.OPEN&&(t._ws.onopen=null,t._ws.onclose=null,t._ws.close(),t._ws=null,i(new y(v.CONNECT_TIMEOUT)))},5e3),t.once("dispose",function(){i(new y(v.WS_ABORT))})})},t.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},t.prototype._sendPing=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new y(v.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send(JSON.stringify(e)),t},t.prototype._startHeartBeatCheck=function(){var e=this;this._heartBeatTimer=window.setInterval(function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})},3e3)},t.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},t}(c.default),y=function(){return function(e,t,n){void 0===e&&(e=""),this.code=n,this.data=t,this.message=e}}();t.ChannelMediaError=y,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(v=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(h||(h={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(S=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(_=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(E=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"post",function(){return u}),n.d(t,"shouldUseHttps",function(){return l}),n.d(t,"getHTTPSendBytes",function(){return s}),n.d(t,"getHTTPRecvBytes",function(){return c}),n.d(t,"resetHTTPByetsCount",function(){return d});var i=n(3),a=n(10),r=0,o=0,s=function(){return r},c=function(){return o},d=function(){r=0,o=0},u=function(e,t,n,s,c){var d=new XMLHttpRequest;if(d.timeout=t.timeout||Object(i.getParameter)("HTTP_CONNECT_TIMEOUT"),d.open("POST",e,!0),d.setRequestHeader("Content-type","application/json; charset=utf-8"),c)for(var u in c)"withCredentials"==u?d.withCredentials=!0:d.setRequestHeader(u,c[u]);d.onload=function(e){o+=Object(a.lengthInUtf8Bytes)(d.responseText),n&&n(d.responseText)},d.onerror=function(t){s&&s(t,e)},d.ontimeout=function(t){s&&s(t,e)};var l=JSON.stringify(t);r+=Object(a.lengthInUtf8Bytes)(l),d.send(l)},l=function(){return"https:"==document.location.protocol}},function(e,t,n){"use strict";n.r(t),n.d(t,"isLiveTranscodingValid",function(){return v}),n.d(t,"generateSessionId",function(){return f}),n.d(t,"audioLevelHelper",function(){return p}),n.d(t,"vsResHack",function(){return m}),n.d(t,"is32Uint",function(){return g}),n.d(t,"safeCall",function(){return l}),n.d(t,"random",function(){return S}),n.d(t,"popBanTip",function(){return E}),n.d(t,"lengthInUtf8Bytes",function(){return _});var i=n(8),a=n.n(i),r=n(4),o=n(0),s=n(15),c=n.n(s),d=n(14),u=n(12),l=function(){var e=arguments[0];if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t)}},p=function(e){return this.audioContext=Object(d.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return o.default.warning("can't find analyser in audioLevelHelper"),0},this};function f(){return c()().replace(/-/g,"").toUpperCase()}var m=function(e,t,n){try{o.default.debug("start vsResHack",e);var i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(i),i.addEventListener("playing",function(n){r.isFireFox()?i.videoWidth&&(o.default.debug("[vsResHack] get stream resolution: ","".concat(i.videoWidth," x ").concat(i.videoHeight),e),t(i.videoWidth,i.videoHeight),document.body.removeChild(i)):(o.default.debug("[vsResHack] get stream resolution: ","".concat(i.videoWidth," x ").concat(i.videoHeight),e),t(i.videoWidth,i.videoHeight),document.body.removeChild(i))}),Object(u.setSrcObject)(i,e)}catch(e){n(e)}},g=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},v=function(e){var t=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var n in e)if("lowLatency"===n&&"boolean"!=typeof e[n]||"userConfigExtraInfo"===n&&"object"!==a()(e[n])||"transcodingUsers"===n&&!h(e[n])||!~t.indexOf(n)&&"number"!=typeof e[n])throw new Error("Param ["+n+"] is inValid");return!0},h=function(e){for(var t=0;t<e.length;t++)for(var n in e[t])if("number"!=typeof e[t][n])throw new Error("Param user["+t+"] - ["+n+"] is inValid");return!0},S=function(e){isNaN(e)&&(e=1e3);var t=+new Date,n=(t=(9301*t+49297)%233280)/233280;return Math.ceil(n*e)},_=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},E=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var n=document.createElement("div");n.style="height: 76px; display: flex; justify-content: center; align-items: center;";var i=document.createElement("span");i.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",i.innerText="!";var a=document.createElement("span");a.innerText="This browser does not support webRTC",n.append(i),n.append(a);var r=document.createElement("div");r.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",r.innerText="OK",t.append(n),t.append(r),r.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function n(e,t,n,i,a,r,o){try{var s=e[r](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise(function(a,r){var o=e.apply(t,i);function s(e){n(o,a,r,s,c,"next",e)}function c(e){n(o,a,r,s,c,"throw",e)}s(void 0)})}}},function(e,t,n){"use strict";n.r(t),n.d(t,"RTCPeerConnection",function(){return T}),n.d(t,"getUserMedia",function(){return o}),n.d(t,"attachMediaStream",function(){return s}),n.d(t,"reattachMediaStream",function(){return c}),n.d(t,"setSrcObject",function(){return f}),n.d(t,"getSrcObject",function(){return m}),n.d(t,"webrtcDetectedBrowser",function(){return d}),n.d(t,"webrtcDetectedVersion",function(){return u}),n.d(t,"webrtcMinimumVersion",function(){return l}),n.d(t,"webrtcTesting",function(){return b}),n.d(t,"webrtcUtils",function(){return h});var i=n(8),a=n.n(i),r=n(4),o=null,s=null,c=null,d=null,u=null,l=null,p=null,f=null,m=null,g=null,v={addStream:null},h={log:function(){},extractVersion:function(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n])}};if("object"==("undefined"==typeof window?"undefined":a()(window))?(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype?(f=function(e,t){e.srcObject=t},m=function(e){return e.srcObject}):(f=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},m=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}),o=window.navigator&&window.navigator.getUserMedia):(f=function(e,t){e.srcObject=t},m=function(e){return e.srcObject}),s=function(e,t){f(e,t)},c=function(e,t){f(e,m(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var S in h.log("This appears to be Firefox"),d="firefox",u=h.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),l=31,g=mozRTCPeerConnection,v)v[S]=g.prototype[S];if(p=function(e,t){if(u<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];if(a.hasOwnProperty("urls"))for(var r=0;r<a.urls.length;r++){var o={url:a.urls[r]};0===a.urls[r].indexOf("turn")&&(o.username=a.username,o.credential=a.credential),n.push(o)}else n.push(e.iceServers[i])}e.iceServers=n}var s=new g(e,t);for(var c in v)s[c]=v[c];return s},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),o=function(e,t,n){var i=function(e){if("object"!==a()(e)||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===a()(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var r={};"number"==typeof i.ideal?r[n]={min:i.ideal,max:i.ideal}:r[n]=i.ideal,e.advanced.push(r),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return u<38&&(h.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=i(e.audio)),e.video&&(e.video=i(e.video)),h.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:y,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},u<41){var _=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return _().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var S in h.log("This appears to be Chrome"),d="chrome",u=h.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),l=38,g=webkitRTCPeerConnection,v)v[S]=g.prototype[S];p=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new g(e,t);for(var i in v)n[i]=v[i];var a=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=arguments;i.length>0&&"function"==typeof e&&(t?(n=t,t=e,i=[e=null,t,n]):(t=e,i=[e=null,t]));if(i.length>=2){return a.apply(this,[function(e){i[1](function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t}(e))},i[0]])}return a()},n},["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===a()(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,a){t.apply(e,[i,a,n])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise(function(i,a){t.apply(n,[e[0],function(){i(),e.length>=2&&e[1].apply(null,[])},function(t){a(t),e.length>=3&&e[2].apply(null,[t])}])})}});var E=function(e){if("object"!==a()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===a()(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var o={};"number"==typeof i.ideal?(o[r("min",n)]=i.ideal,t.optional.push(o),(o={})[r("max",n)]=i.ideal,t.optional.push(o)):(o[r("",n)]=i.ideal,t.optional.push(o))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(o=function(e,t,n){return e.audio&&(e.audio=E(e.audio)),e.video&&(e.video=E(e.video)),h.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:y,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){if(Number(Object(r.getBrowserVersion)().split(".")[0])<46){var I=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return h.log("spec:   "+JSON.stringify(e)),e.audio=E(e.audio),e.video=E(e.video),h.log("chrome: "+JSON.stringify(e)),I(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return y(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){h.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){h.log("Dummy mediaDevices.removeEventListener called.")}),s=function(e,t){u>=43?f(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:h.log("Error attaching stream to element.")},c=function(e,t){u>=43?f(e,m(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(h.log("This appears to be Edge"),d="edge",u=h.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),l=12):h.log("Browser does not appear to be WebRTC-capable");else h.log("This does not appear to be a browser"),d="not a browser";function y(e){return new Promise(function(t,n){o(e,t,n)})}var T,b={};try{Object.defineProperty(b,"version",{set:function(e){u=e}})}catch(e){}p?T=p:"undefined"!=typeof window&&(T=window.RTCPeerConnection)},function(e,t,n){var i=n(23);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){i(e,t,n[t])})}return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=window.AudioContext||window.webkitAudioContext,a=n(3),r=a.getParameter,o=a.setParameter,s=function(){return r("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),o("AUDIO_CONTEXT",function(){if(i)return new i;throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),r("AUDIO_CONTEXT")}},function(e,t,n){var i=n(21),a=n(22);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||a(o)}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,r=i(n(0)),o=n(12);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(a||(a={}));var s=function(){function e(e){this.candidate=null,this.state=a.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:"h264"===this.config.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var n=[];this.config.isSubscriber?(n.push(this.receiveVideoStats),n.push(this.receiveAudioStats)):(n.push(this.sendAudioStats),n.push(this.sendVideoStats)),n.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(n)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,n=[];this.peerConnection.getStats(null).then(function(i){t.lastTimeGetStats=Date.now(),Object.keys(i).map(function(e){var n=i[e];t.config.isSubscriber?n.type&&"inboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.receiveAudioStats.id=n.id+"recv",t.receiveAudioStats.type=n.type+"",t.receiveAudioStats.mediaType=n.mediaType+"",t.receiveAudioStats.packetsReceived=n.packetsReceived+"",t.receiveAudioStats.bytesReceived=n.bytesReceived+"",t.receiveAudioStats.packetsLost=n.packetsLost+"",t.receiveAudioStats.googJitterReceived=n.jitter+""):n.type&&"inboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.receiveVideoStats.id=n.id+"recv",t.receiveVideoStats.type=n.type+"",t.receiveVideoStats.mediaType=n.mediaType+"",t.receiveVideoStats.packetsReceived=n.packetsReceived+"",t.receiveVideoStats.bytesReceived=n.bytesReceived+"",t.receiveVideoStats.packetsLost=n.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=n.jitter+"",t.receiveVideoStats.googPlisSent=n.pliCount+"",t.receiveVideoStats.googFirsSent=n.firCount+"",t.receiveVideoStats.googNacksSent=n.nackCount+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=n.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=n.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=n.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=n.framesDecoded+"",t.receiveVideoStats.googFrameReceived=n.framesReceived+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=n.audioLevel+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.sendAudioStats.id=n.id+"send",t.sendAudioStats.type=n.type+"",t.sendAudioStats.mediaType=n.mediaType+"",t.sendAudioStats.packetsSent=n.packetsSent+"",t.sendAudioStats.bytesSent=n.bytesSent+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.sendVideoStats.id=n.id+"send",t.sendVideoStats.type=n.type+"",t.sendVideoStats.mediaType=n.mediaType+"",t.sendVideoStats.packetsSent=n.packetsSent+"",t.sendVideoStats.bytesSent=n.bytesSent+"",t.sendVideoStats.googRtt=n.roundTripTime+"",t.sendVideoStats.googPlisReceived=n.pliCount+"",t.sendVideoStats.googFirsReceived=n.firCount+"",t.sendVideoStats.googNacksReceived=n.nackCount+""):!n.remoteSource&&n.type&&"track"===n.type&&n.framesSent&&0!==n.framesSent&&(t.sendVideoStats.googFrameHeightSent=n.frameHeight+"",t.sendVideoStats.googFrameHeightInput=n.frameHeight+"",t.sendVideoStats.googFrameWidthSent=n.frameWidth+"",t.sendVideoStats.googFrameWidthInput=n.frameWidth+"",t.sendVideoStats.googFramesEncoded=n.framesSent+"",t.sendVideoStats.googFrameRateSent=n.framesPerSecond+"")}),t.config.isSubscriber?(n.push(t.receiveVideoStats),n.push(t.receiveAudioStats)):(n.push(t.sendAudioStats),n.push(t.sendVideoStats)),n.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(n)})},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,n=e.turnServer,i=e.iceServers;return this.pcConfig={iceServers:[{urls:"stun:webcs.agora.io:3478"}]},i instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map(function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})}):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),n&&(n instanceof Array?n.map(function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})}):"auto"!==n.mode&&"manual"!==n.mode||(n.udpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.udpport+"?transport=udp"}),"string"==typeof n.tcpport&&""!==n.tcpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.tcpport+"?transport=tcp"}),!0===n.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new o.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=a.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=a.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return e=(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,n,i=this.config,a=i.codec,o=i.minVideoBW,s=i.maxVideoBW,c=i.maxAudioBW,d=i.clientId;if((t=e.match(/m=video.*\r\n/))&&o&&s){n=t[0]+"b=AS:"+s+"\r\n";var u=0,l=0;"h264"===a?(u=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),l=e.search(/H264\/90000\r\n/)):"vp8"===a&&(u=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),l=e.search(/VP8\/90000\r\n/)),-1!==u&&-1!==l&&l-u>10&&(n=n+"a=fmtp:"+e.slice(u+9,l-1)+" x-google-min-bitrate="+o+"\r\n"),e=e.replace(t[0],n),r.default.debug("["+d+"]Set Video Bitrate - min:"+o+" max:"+s)}return(t=e.match(/m=audio.*\r\n/))&&c&&(n=t[0]+"b=AS:"+c+"\r\n",e=e.replace(t[0],n)),e},e.prototype.reviseOpus=function(e){return e=(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=a.OFFER_SENT},e}();t.default=s},function(e,t,n){var i=n(26),a=n(27),r=n(28);e.exports=function(e,t){return i(e)||a(e,t)||r()}},function(e,t,n){var i,a;a=this,void 0===(i=function(){return function(){"use strict";var e,t=this;function n(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function i(e,t,i,a){var r=a||n,o=e.createShader(i);e.shaderSource(o,t),e.compileShader(o);var s=e.getShaderParameter(o,e.COMPILE_STATUS);if(!s){var c=e.getShaderInfoLog(o);return r("*** Error compiling shader '"+o+"':"+c),e.deleteShader(o),null}return o}function a(e,t,i,a,r){var o=r||n,s=e.createProgram();t.forEach(function(t){e.attachShader(s,t)}),i&&i.forEach(function(t,n){e.bindAttribLocation(s,a?a[n]:n,t)}),e.linkProgram(s);var c=e.getProgramParameter(s,e.LINK_STATUS);if(!c){var d=e.getProgramInfoLog(s);return o("Error in program linking:"+d),e.deleteProgram(s),null}return s}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var r,o=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(r=HTMLCanvasElement.prototype.getContext,function(){var e=arguments,t=e[0];return"webgl"===t&&((e=[].slice.call(arguments))[0]="experimental-webgl"),r.apply(this,e)})),{createProgram:a,createProgramFromSources:function(e,t,n,r,s){for(var c=[],d=0;d<t.length;++d)c.push(i(e,t[d],e[o[d]],s));return a(e,c,n,r,s)}}}.call(a)}.apply(t,[]))||(e.exports=i)},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),c=n(4),d=r(n(0));t.getSupportedCodec=function(e){return i(o,void 0,void 0,function(){var t,n,i,r,o;return a(this,function(a){switch(a.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(d.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{n=s.createRTCPeerConnection({iceServers:[]})}catch(e){return d.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return n?[3,2]:(d.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(i={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},r=void 0,(c.isSafari()||c.isFireFox()||c.isWeChatBrowser())&&n.addTransceiver?(n.addTransceiver("audio"),n.addTransceiver("video"),[4,n.createOffer()]):[3,4]);case 3:return r=a.sent(),[3,6];case 4:return[4,new Promise(function(e,t){var a=setTimeout(function(){t("CREATEOFFER_TIMEOUT")},3e3);n.createOffer(function(t){clearTimeout(a),e(t)},function(e){clearTimeout(a),t(e)},i)})];case 5:r=a.sent(),a.label=6;case 6:return n.close(),o=r.sdp,[2,u(o)];case 7:return e.stream.getTracks&&n.addTrack?e.stream.getTracks().forEach(function(t){n.addTrack(t,e.stream)}):n.addStream(e.stream),r=void 0,c.isSafari()||c.isFireFox()?[4,n.createOffer()]:[3,9];case 8:return r=a.sent(),[3,11];case 9:return[4,new Promise(function(e,t){n.createOffer(e,t)})];case 10:r=a.sent(),a.label=11;case 11:return n.close(),o=r.sdp,[2,u(o)]}})})};var u=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,n){var i=n(31),a=n(32),r=n(33);e.exports=function(e){return i(e)||a(e)||r()}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,a=n;return[a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]]].join("")}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var i=function(){return this||"object"==typeof self&&self}()||Function("return this")(),a=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,r=a&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(25),a)i.regeneratorRuntime=r;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,i=Object.prototype,a=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag",d="object"==typeof e,u=t.regeneratorRuntime;if(u)d&&(e.exports=u);else{(u=t.regeneratorRuntime=d?e.exports:{}).wrap=E;var l="suspendedStart",p="suspendedYield",f="executing",m="completed",g={},v={};v[o]=function(){return this};var h=Object.getPrototypeOf,S=h&&h(h(k([])));S&&S!==i&&a.call(S,o)&&(v=S);var _=b.prototype=y.prototype=Object.create(v);T.prototype=_.constructor=b,b.constructor=T,b[c]=T.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(_),e},u.awrap=function(e){return{__await:e}},R(A.prototype),A.prototype[s]=function(){return this},u.AsyncIterator=A,u.async=function(e,t,n,i){var a=new A(E(e,t,n,i));return u.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},R(_),_[c]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=k,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,a){return s.type="throw",s.arg=e,t.next=i,a&&(t.method="next",t.arg=n),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),d=a.call(o,"finallyLoc");if(c&&d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;N(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:k(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),g}}}function E(e,t,n,i){var a=t&&t.prototype instanceof y?t:y,r=Object.create(a.prototype),o=new w(i||[]);return r._invoke=function(e,t,n){var i=l;return function(a,r){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw r;return D()}for(n.method=a,n.arg=r;;){var o=n.delegate;if(o){var s=O(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===l)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var c=I(e,t,n);if("normal"===c.type){if(i=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=m,n.method="throw",n.arg=c.arg)}}}(e,n,o),r}function I(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function y(){}function T(){}function b(){}function R(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function A(e){var t;this._invoke=function(n,i){function r(){return new Promise(function(t,r){!function t(n,i,r,o){var s=I(e[n],e,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?Promise.resolve(d.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):Promise.resolve(d).then(function(e){c.value=e,r(c)},function(e){return t("throw",e,r,o)})}o(s.arg)}(n,i,t,r)})}return t=t?t.then(r,r):r()}}function O(e,t){var i=e.iterator[t.method];if(i===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var a=I(i,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,g;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="object"==typeof window&&window.RTCPeerConnection,a="object"==typeof window&&window.webkitRTCPeerConnection,r="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=i||a||r;return t?new t(e):null}},function(e,t,n){var i;
/*!
 * EventEmitter v5.2.8 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */!function(t){"use strict";function a(){}var r=a.prototype,o=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}r.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},r.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),a="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===s(i[n],t)&&i[n].push(a?t:{listener:t,once:!1});return this},r.on=c("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=c("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,i,a=this.getListenersAsObject(e);for(i in a)a.hasOwnProperty(i)&&-1!==(n=s(a[i],t))&&a[i].splice(n,1);return this},r.off=c("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var i,a,r=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(a=t[i])&&("function"==typeof a?r.call(this,i,a):o.call(this,i,a));return this},r.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},r.removeAllListeners=c("removeEvent"),r.emitEvent=function(e,t){var n,i,a,r,o=this.getListenersAsObject(e);for(r in o)if(o.hasOwnProperty(r))for(n=o[r].slice(0),a=0;a<n.length;a++)!0===(i=n[a]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=c("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return t.EventEmitter=o,a},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,n,a){"use strict";a.r(n);var r=a(3),o=a(0),s=a(2),c=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,n){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(n)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,n){var i;-1!==(i=e.dispatcher.eventListeners[t].indexOf(n))&&e.dispatcher.eventListeners[t].splice(i,1)},e.dispatchEvent=function(t,n){var i;for(i in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(i)&&"function"==typeof e.dispatcher.eventListeners[t.type][i]&&(n?e.dispatcher.eventListeners[t.type][i](t):Promise.resolve(t).then(e.dispatcher.eventListeners[t.type][i]))},e.dispatchSocketEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n]&&e.dispatcher.eventListeners[t.type][n](t.msg)},e},d=function(e){var t={};return t.type=e.type,t},u=function(e){var t=d(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},l=function(e){var t=d(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},p=function(e){var t=d(e);return t.msg=e.msg,t},f=function(e){var t=d(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t},m=a(4),g=function(){};g.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var v=new function(){var e=c();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,n){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then(function(n){e.batteryManager=n,t&&setTimeout(function(){t()},0)}).catch(function(e){o.default.debug("navigator.getBattery is disabled",e),t&&t()}):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return e.batteryManager&&e.batteryManager.level?t.BatteryLevel=Math.floor(100*e.batteryManager.level):t.BatteryLevel="UNSUPPORTED",t},e.getStats=function(t,n){var i=new g,a=e._getBatteryStats();a&&a.BatteryLevel&&i.set("BatteryLevel",a.BatteryLevel),t&&t(i)},e._init(),e},h=a(5),S=a.n(h),_=function(e){var t=c(e);return t.url=".",t},E=a(12),I={101100:"NO_FLAG_SET",101101:"FLAG_SET_BUT_EMPTY",101102:"INVALID_FALG_SET",101203:"NO_SERVICE_AVIABLE",0:"OK_CODE",5:"INVALID_VENDOR_KEY",7:"INVALID_CHANNEL_NAME",8:"INTERNAL_ERROR",9:"NO_AUTHORIZED",10:"DYNAMIC_KEY_TIMEOUT",11:"NO_ACTIVE_STATUS",13:"DYNAMIC_KEY_EXPIRED",14:"STATIC_USE_DYANMIC_KEY",15:"DYNAMIC_USE_STATIC_KEY",1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",1010200:"NO_SERVICE_AVAILABLE",1010203:"NO_SERVICE_AVAILABLE_WEBRTC",1010205:"NO_SERVICE_AVAILABLE_DISPATCHER",1010208:"NO_SERVICE_AVAILABLE_APPCENTER",1010211:"NO_SERVICE_AVAILABLE_SUA",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY"},y={2000:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},T={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},b=["NO_FLAG_SET","NO_SERVICE_AVIABLE","FLAG_SET_BUT_EMPTY","EMPTY_ADDRESS_RESPONSE"],R=0,A=1,O=2,C=3,N=4,w=5,k=6,D=7,L=8,M=9,P=10,x={19:"ERR_ALREADY_IN_USE",10:"ERR_TIMEDOUT",3:"ERR_NOT_READY",9:"ERR_NO_PERMISSION",0:"UNKNOW_ERROR"},V={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"},U=0,j=function(e){var t=_({});t.id=e.id,t.playerId=U++,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.elementID=e.elementID,t.setAudioOutput=function(e,n,i){var a=t.video||t.audio;return a?a.setSinkId?void a.setSinkId(e).then(function(){return o.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),a==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()}).then(function(){return o.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),n&&n()}).catch(function(e){return o.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),i&&i(e)}):(o.default.error("["+t.id+"] ",V.WEB_API_NOT_SUPPORTED),i&&i(V.WEB_API_NOT_SUPPORTED)):(o.default.error("["+t.id+"] ",V.PLAYER_NOT_FOUND),i&&i(V.PLAYER_NOT_FOUND))},t.destroy=function(){o.default.debug("[".concat(t.id,"] destroy ").concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(E.setSrcObject)(t.video,null),Object(E.setSrcObject)(t.audio,null),t.video.pause(),delete t.resizer,clearInterval(t.mediaPlayerTimer),t.mediaPlayerTimer=null,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.parentNode.removeChild(t.div),["video","audio"].forEach(function(n){t[n];var i=a[n];clearTimeout(i.playDeferTimeout),i.formerMediaState=null;var r={playerId:t.playerId,stateId:i.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};a[n]=r;var c={type:"player-status-change",playerId:t.playerId,mediaType:n,status:r.status,reason:r.reason,isErrorState:!1,streamId:t.id};o.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),c),e.stream.dispatchEvent(c),s.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:c,tag:"tracer"})()})},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),e.stream.video?t.div.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"):t.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),e.stream.local&&!e.stream.screen?e.stream.mirror?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.video?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.screen?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var n={autoplay:!0,muted:!!e.stream.local||!(!m.isSafari()&&"iOS"!==m.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!(!m.isSafari()&&"iOS"!==m.getBrowserOS()||e.stream.local),volume:null},i=S()({},n,e.options);!0!==i.muted||i.volume||(i.volume=0),i.autoplay&&t.video.setAttribute("autoplay",""),!0!==i.muted&&"video_element_muted"!==i.muted||(t.video.setAttribute("muted",""),t.video.muted=!0),i.playsinline&&t.video.setAttribute("playsinline",""),i.controls&&t.video.setAttribute("controls",""),Number.isFinite(i.volume)&&(t.video.volume=i.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),i.autoplay&&t.audio.setAttribute("autoplay",""),!0===i.muted&&t.audio.setAttribute("muted",""),!0===i.muted&&(t.audio.muted=!0),i.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(i.volume)&&(t.audio.volume=i.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var a={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,n=0;n<Object(r.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;n++)t=t.parentNode;return!!t};var c=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},d=function(e,t,n){var i=c(e),a=!0;return"paused"===i?("audio"===t&&!0===n.muted&&(a=!1),n.autoplay||(a=!1)):"play"===i?"video"===t?a=!1:!0===n.muted?e.muted&&(a=!1):e.muted||(a=!1):"aborted"===i&&(a=!1),a},u=function(n){var u,l=this;if(l===t.video?u="video":l===t.audio&&(u="audio"),u){n.type||o.default.error("[".concat(t.id,"] Unexpected evt"),n);var p=c(l);clearTimeout(a[u].playDeferTimeout),a[u].playDeferTimeout=setTimeout(function(){a[u].playDeferTimeout=null;var r=a[u],f=c(l);if(p===f){var m={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:d(l,u,i),status:c(l),reason:n.type,updatedAt:Date.now()};if(r.status!==m.status){a[u]=m;var g={type:"player-status-change",playerId:t.playerId,mediaType:u,status:m.status,reason:m.reason,isErrorState:m.error,streamId:t.id};o.default.debug("[".concat(t.id,"] Media Player Status Change"),g),e.stream.dispatchEvent(g),s.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:g,tag:"tracer"})()}}else o.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(u," Status ").concat(p,"=>").concat(f))},Object(r.getParameter)("PLAYER_STATE_DEFER"))}else o.default.error("[".concat(t.id,"] Unknown media element"),l)};if(t.mediaPlayerTimer=setInterval(function(){["video","audio"].forEach(function(n){var r=t[n],u=a[n];if(!u.playDeferTimeout){var l={playerId:t.playerId,stateId:u.stateId+1,playDeferTimeout:null,error:d(r,n,i),status:c(r),reason:"timer",updatedAt:Date.now()};if(u.status!==l.status){o.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," ").concat(n," Status Changed Detected by Timer: ").concat(u.status,"=>").concat(l.status)),a[n]=l;var p={type:"player-status-change",playerId:t.playerId,mediaType:n,status:l.status,reason:l.reason,isErrorState:l.error,streamId:t.id};o.default.debug("[".concat(t.id,"] Media Player Status Change"),p),e.stream.dispatchEvent(p),s.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:p,tag:"tracer"})()}}})},Object(r.getParameter)("PLAYER_STATE_DEFER")),t.video.addEventListener("playing",function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?o.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()}),t.video.addEventListener("playing",u),t.video.addEventListener("canplay",u),t.video.addEventListener("abort",u),t.video.addEventListener("onerror",u),t.video.addEventListener("suspend",u),t.video.addEventListener("stalled",u),t.video.addEventListener("pause",u),t.audio.addEventListener("playing",u),t.audio.addEventListener("canplay",u),t.audio.addEventListener("abort",u),t.audio.addEventListener("onerror",u),t.audio.addEventListener("suspend",u),t.audio.addEventListener("stalled",u),t.audio.addEventListener("pause",u),e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),m.isEdge()?t.video.srcObject=e.stream.stream:(Object(E.attachMediaStream)(t.video,e.stream.stream),Object(E.attachMediaStream)(t.audio,e.stream.stream));else if(!1!==i.muted&&"video_element_muted"!==i.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.div.appendChild(t.video),window.MediaStream&&(m.isSafari()||"iOS"===m.getBrowserOS())){var l=new MediaStream(e.stream.stream.getAudioTracks());Object(E.setSrcObject)(t.video,l)}else Object(E.setSrcObject)(t.video,e.stream.stream);return t.setAudioVolume=function(e){var n=parseInt(e)/100;isFinite(n)&&(n<0?n=0:n>1&&(n=1),t.video&&(t.video.volume=n),t.audio&&(t.audio.volume=n))},t},F=function(e){var t={},n=E.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{url:"stun:webcs.agora.io:3478"}]};var i={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},a={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},s={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},c={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},d={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map(function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})}):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&(e.turnServer instanceof Array?e.turnServer.map(function(e){"string"==typeof e.url&&""!==e.url&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,url:e.url})}):"auto"!==e.turnServer.mode&&"manual"!==e.turnServer.mode||(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout(function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,i,a,r;i=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),a=n.match(/a=candidate:.+typ\shost.+\r\n/),r=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===i&&null===a&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+i+" relay candidate: "+r+" host candidate : "+a),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},o.default.debug("["+t.clientId+']Created webkitRTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".');var u=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},l=function(n){var i,a;if((i=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){a=i[0]+"b=AS:"+e.maxVideoBW+"\r\n";var r=0,s=0;"h264"===e.codec?(r=n.search(/a=rtpmap:(\d+) H264\/90000\r\n/),s=n.search(/H264\/90000\r\n/)):"vp8"===e.codec&&(r=n.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),s=n.search(/VP8\/90000\r\n/)),-1!==r&&-1!==s&&s-r>10&&(a=a+"a=fmtp:"+n.slice(r+9,s-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),n=n.replace(i[0],a),o.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(i=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(a=i[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(i[0],a)),n};t.processSignalingMessage=function(e){var n,i=JSON.parse(e);t.incomingMessage=i,"new"===t.state?"OFFER"===i.messageType?(n={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){}),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===i.messageType?((n={sdp:i.sdp,type:"answer"}).sdp=u(n.sdp),n.sdp=l(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){}),t.state="established"):"pr-answer"===i.messageType?(n={sdp:i.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){})):"offer"===i.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===i.messageType?(n={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){}),t.state="offer-received",t.markActionNeeded()):"ANSWER"===i.messageType?((n={sdp:i.sdp,type:"answer"}).sdp=u(n.sdp),n.sdp=l(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){})):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state))};var p=0,f=0;return t.getVideoRelatedStats=function(e){t.getStats(function(n){n.forEach(function(n){if(t.isSubscriber){if("video"===n.mediaType&&n.id&&~n.id.indexOf("recv")){if(m.isChromeKernel()&&+m.getBrowserVersion()>=76){var i=+n.googFramesReceived-p,a=+n.googFramesDecoded-f;t._setStat(c,"googFrameRateReceived",i),t._setStat(c,"googFrameRateDecoded",a),t._setStat(c,"googFrameRateOutput",a),p=+n.googFramesReceived,f=+n.googFramesDecoded}e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:n.googFrameRateReceived,frameRateDecoded:n.googFrameRateDecoded,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}}else"video"===n.mediaType&&n.id&&~n.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:n.googFrameRateInput,frameRateSent:n.googFrameRateSent,googRtt:n.googRtt})})})},t.getAudioRelatedStats=function(e){t.getStats(function(n){n.forEach(function(n){t.isSubscriber&&"audio"===n.mediaType&&n.id&&~n.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(n.googDecodingPLC)+parseInt(n.googDecodingPLCCNG)+"",frameReceived:n.googDecodingCTN,googJitterReceived:n.googJitterReceived,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})})})},t.getStatsRate=function(e){t.getStats(function(t){e(t)})},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):(t.lastTimeGetStats=Date.now(),this._getStats(function(n,i){t.filterStatsCache=n,t.originStatsCache=i,e&&e(n,i)}))},t._setStat=function(e,t,n){e.hasOwnProperty(t)&&(null!=n&&n!==1/0&&n==n||(n=0),e[t]=n+"")},t._processGetStatsAfterChrome76=function(e){var n=this;t.lastStats||(t.lastStats=new Map),t.peerConnection.getStats().then(function(r){var o=[],u=[],l=new Map,p=new Date,f=!0,m=!1,g=void 0;try{for(var v,h=r.values()[Symbol.iterator]();!(f=(v=h.next()).done);f=!0){var _=v.value;"codec"!=_.type?"candidate-pair"!=_.type?("inbound-rtp"===_.type&&"video"===_.mediaType&&l.set("inbound-video",_),"inbound-rtp"===_.type&&"audio"===_.mediaType&&l.set("inbound-audio",_),"outbound-rtp"===_.type&&"audio"===_.mediaType&&l.set("outbound-audio",_),"outbound-rtp"===_.type&&"video"===_.mediaType&&l.set("outbound-video",_),"track"===_.type&&"video"===_.kind&&_.remoteSource&&l.set("remote-video-track",_),"track"===_.type&&"audio"===_.kind&&_.remoteSource&&l.set("remote-audio-track",_),"remote-inbound-rtp"===_.type&&"video"===_.mediaType&&l.set("remote-inbound-video",_),"remote-inbound-rtp"===_.type&&"audio"===_.mediaType&&l.set("remote-inbound-audio",_),"track"!==_.type||"video"!==_.kind||_.remoteSource||l.set("local-video-track",_),"track"!==_.type||"audio"!==_.kind||_.remoteSource||l.set("local-audio-track",_),"media-source"===_.type&&"video"===_.kind&&l.set("media-source-video",_),"media-source"===_.type&&"audio"===_.kind&&l.set("media-source-audio",_)):u.push(_):o.push(_)}}catch(e){m=!0,g=e}finally{try{f||null==h.return||h.return()}finally{if(m)throw g}}l.set("codec",o),l.set("candidatePairs",u),l.set("timestamp",+p);var E=null,I=null;if(c.timestamp=p,s.timestamp=p,i.timestamp=p,i.timestamp=p,d.timestamp=p,n.isSubscriber)(E=l.get("inbound-video"))&&(t._setStat(c,"id","inbound_video_ssrc_recv"),t._setStat(c,"mediaType",E.mediaType),t._setStat(c,"packetsLost",E.packetsLost),t._setStat(c,"googDecodeMs",null),t._setStat(c,"googMaxDecodeMs",null),t._setStat(c,"googRenderDelayMs",null),t._setStat(c,"googMinPlayoutDelayMs",null),t._setStat(c,"googNacksSent",E.nackCount),t._setStat(c,"googPlisSent",E.pliCount),t._setStat(c,"googFirsSent",E.firCount),t._setStat(c,"bytesReceived",E.bytesReceived),t._setStat(c,"packetsReceived",E.packetsReceived)),(E=l.get("inbound-audio"))&&(t._setStat(s,"id","inbound_audio_ssrc_recv"),t._setStat(s,"mediaType",E.mediaType),t._setStat(s,"bytesReceived",E.bytesReceived),t._setStat(s,"packetsLost",E.packetsLost),t._setStat(s,"packetsReceived",E.packetsReceived),t._setStat(s,"googAccelerateRate",E.removedSamplesForAcceleration),t._setStat(s,"googCurrentDelayMs",E.jitterBufferDelay),t._setStat(s,"googDecodingCNG",null),t._setStat(s,"googDecodingCTN",null),t._setStat(s,"googDecodingCTSG",null),t._setStat(s,"googDecodingNormal",null),t._setStat(s,"googDecodingPLC",null),t._setStat(s,"googDecodingPLCCNG",null),t._setStat(s,"googJitterReceived",E.jitter),t._setStat(s,"googPreferredJitterBufferMs",null),t._setStat(s,"googSecondaryDecodedRate",null)),(E=l.get("remote-video-track"))&&(t._setStat(c,"googTargetDelayMs",E.jitterBufferDelay),t._setStat(c,"googFrameWidthReceived",E.frameWidth),t._setStat(c,"googFrameHeightReceived",E.frameHeight),t._setStat(c,"googJitterBufferMs",E.jitterBufferDelay/E.jitterBufferEmittedCount*1e3),t._setStat(c,"googCurrentDelayMs",E.jitterBufferDelay),t._setStat(c,"googFramesDecoded",E.framesDecoded),t._setStat(c,"googFramesReceived",E.framesReceived)),(E=l.get("remote-audio-track"))&&(t._setStat(s,"audioOutputLevel",32767*E.audioLevel),t._setStat(s,"googJitterBufferMs",E.jitterBufferDelay/E.jitterBufferEmittedCount*1e3),t._setStat(s,"googExpandRate",E.concealedSamples),t._setStat(s,"googPreemptiveExpandRate",E.insertedSamplesForDeceleration),t._setStat(s,"googSpeechExpandRate",E.silentConcealedSamples));else{var y=t.lastStats.get("timestamp"),T=t.lastStats.get("outbound-video");if((E=l.get("outbound-audio"))&&(t._setStat(i,"id","outbound_audio_ssrc_send"),t._setStat(i,"mediaType",E.mediaType),t._setStat(i,"aecDivergentFilterFraction",null),t._setStat(i,"bytesSent",E.bytesSent),t._setStat(i,"packetsSent",E.packetsSent),I=E.transportId),E=l.get("outbound-video")){if(t._setStat(a,"id","outbound_video_ssrc_send"),t._setStat(a,"mediaType",E.mediaType),t._setStat(a,"bytesSent",E.bytesSent),t._setStat(a,"packetsSent",E.packetsSent),t._setStat(a,"googAdaptationChanges",E.qualityLimitationDurations),t._setStat(a,"googAvgEncodeMs",null),t._setStat(a,"googEncodeUsagePercent",null),I=E.transportId,E.totalEncodedBytesTarget&&T&&T.totalEncodedBytesTarget){var b=(E.totalEncodedBytesTarget-T.totalEncodedBytesTarget)/(+new Date-y);t._setStat(d,"googTargetEncBitrate",Math.floor(8*b*1e3))}if(E.retransmittedBytesSent&&T&&T.retransmittedBytesSent){var R=(E.retransmittedBytesSent-T.retransmittedBytesSent)/(+new Date-y);t._setStat(d,"googRetransmitBitrate",Math.floor(8*R*1e3))}if(E.bytesSent&&T&&T.bytesSent){var A=(E.bytesSent-T.bytesSent)/(+new Date-y);t._setStat(d,"googTransmitBitrate",Math.floor(8*A*1e3)),t._setStat(d,"googActualEncBitrate",Math.floor(8*A*1e3))}if(E.totalPacketSendDelay&&T&&T.totalPacketSendDelay){var O=(E.totalPacketSendDelay-T.totalPacketSendDelay)/(+new Date-y);t._setStat(d,"googBucketDelay",Math.floor(1e3*O))}}if((E=l.get("remote-inbound-video"))&&(t._setStat(a,"packetsLost",E.packetsLost),t._setStat(a,"googRtt",E.roundTripTime)),(E=l.get("local-video-track"))&&(t._setStat(a,"googFrameHeightSent",E.frameHeight),t._setStat(a,"googFrameWidthSent",E.frameWidth),void 0!==E.framesPerSecond&&t._setStat(a,"googFrameRateSent",E.framesPerSecond)),(E=l.get("local-audio-track"))&&(t._setStat(i,"googEchoCancellationReturnLoss",E.echoReturnLoss),t._setStat(i,"googEchoCancellationReturnLossEnhancement",E.echoReturnLossEnhancement)),(E=l.get("media-source-video"))&&(t._setStat(a,"googFrameHeightInput",E.height),t._setStat(a,"googFrameWidthInput",E.width),t._setStat(a,"googFrameRateInput",E.framesPerSecond)),(E=l.get("media-source-audio"))&&t._setStat(i,"audioInputLevel",32767*E.totalAudioEnergy),(E=l.get("inbound-video"))&&(t._setStat(a,"googFirsReceived",E.firCount),t._setStat(a,"googNacksReceived",E.nackCount),t._setStat(a,"googPlisReceived",E.pliCount)),I)l.get("candidatePairs").map(function(e){I==e.transportId&&t._setStat(d,"googAvailableSendBandwidth",e.availableOutgoingBitrate)});else{var C=l.get("candidatePairs")[0];C&&t._setStat(d,"googAvailableSendBandwidth",C.availableOutgoingBitrate)}}t.lastStats=l;var N=[S()({},a),S()({},i),S()({},c),S()({},s),S()({},d)];N.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(N)})},t._processGetStatsBeforeChrome76=function(e){t.peerConnection.getStats(function(n){var r=[],o=[],u=null;Object.keys(n).forEach(function(e){var t=n[e];t&&(o.push(t),u=t.timestamp,"VideoBwe"===t.type?d=t:t.id.indexOf("_send")>-1&&"video"===t.mediaType?a=t:t.id.indexOf("_send")>-1&&"audio"===t.mediaType?i=t:t.id.indexOf("_recv")>-1&&"video"===t.mediaType?c=t:t.id.indexOf("_recv")>-1&&"audio"===t.mediaType&&(s=t))}),(r=[S()({},a),S()({},i),S()({},c),S()({},s),S()({},d)]).push({id:"time",startTime:t.connectedTime,timestamp:u||new Date}),e(r,o)})},t._getStats=function(e){Object(r.getParameter)("CHROME_NEW_STATS")&&m.isChromeKernel()&&+m.getBrowserVersion()>=76?t._processGetStatsAfterChrome76(e):t._processGetStatsBeforeChrome76(e)},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){t.peerConnection.removeTrack(t.peerConnection.getSenders().find(function(t){return t.track==e}))},t.addStream=function(e){t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater(function(){t.onstablestate()})},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var e;if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer(function(e){if(e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")},function(e){o.default.debug("["+t.clientId+"]peer connection create offer failed ",e)},t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer(function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}},function(e){o.default.debug("["+t.clientId+"]peer connection create answer failed ",e)},t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;e=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",e),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var i={};i.messageType=e,i.sdp=n,"OFFER"===e?(i.offererSessionId=t.sessionId,i.answererSessionId=t.otherSessionId,i.seq=t.sequenceNumber+=1,i.tiebreaker=Math.floor(429496723*Math.random()+1)):(i.offererSessionId=t.incomingMessage.offererSessionId,i.answererSessionId=t.sessionId,i.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(i))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find(function(t){return t.track.kind==e});if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,i){var a=t._getSender(e.kind);if(!a)return i("NO_SENDER_FOUND");try{a.replaceTrack(e)}catch(e){return i&&i(e)}setTimeout(function(){return n&&n()},50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then(function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=u(e.sdp),e.sdp=l(e.sdp),t.peerConnection.setLocalDescription(e)}).then(function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)}).catch(function(e){console.log("createOffer error: ",e)})},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t},B=function(e){var t={},n=E.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{urls:["stun:webcs.agora.io:3478","stun:stun.l.google.com:19302"]}],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map(function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})}):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&(e.turnServer instanceof Array?e.turnServer.map(function(e){"string"==typeof e.url&&""!==e.url&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,url:e.url})}):"auto"!==e.turnServer.mode&&"manual"!==e.turnServer.mode||(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:["turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"]}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:["turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"]}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}o.default.debug("["+t.clientId+']safari Created RTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".'),t.iceCandidateTimer=setTimeout(function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,i,a,r;i=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),a=n.match(/a=candidate:.+typ\shost.+\r\n/),r=n.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout(function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},1e3)),null===i&&null===a&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+i+" relay candidate: "+r+" host candidate : "+a),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var i=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},a=function(n){var i,a;return(i=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(a=i[0]+"b=AS:"+e.maxVideoBW+"\r\n",n=n.replace(i[0],a),o.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(i=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(a=i[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(i[0],a)),n};t.processSignalingMessage=function(e){var n,r=JSON.parse(e);t.incomingMessage=r,"new"===t.state?"OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),n.sdp=n.sdp.replace(/a=x-google-flag:conference\r\n/g,""),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="established"):"pr-answer"===r.messageType?(n={sdp:r.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n))):"offer"===r.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n))):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state))};var s={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},c={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},d={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},u={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},l={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},p=0,f=0,m=0;return t.getVideoRelatedStats=function(n){t.peerConnection.getStats().then(function(i){var a={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};i.forEach(function(i){if(t.isSubscriber){if("track"===i.type&&(~i.id.indexOf("video")||~i.trackIdentifier.indexOf("v"))){if(!t.lastReport)return void(t.lastReport=i);a.frameRateReceived=i.framesReceived-t.lastReport.framesReceived+"",a.frameRateDecoded=i.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=i}"inbound-rtp"===i.type&&~i.id.indexOf("Video")&&(a.bytesReceived=i.bytesReceived+"",a.packetsReceived=i.packetsReceived+"",a.packetsLost=i.packetsLost+"")}else if("outbound-rtp"===i.type&&~i.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=i);n&&n({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:i.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=i}}),n&&n(a)})},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then(function(n){n.forEach(function(n){t.isSubscriber&&"inbound-rtp"===n.type&&~n.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:n.packetsLost+"",frameReceived:n.packetsReceived+"",googJitterReceived:n.jitter+"",bytesReceived:n.bytesReceived+"",packetsReceived:n.packetsReceived+"",packetsLost:n.packetsLost+""})})})},t.getStatsRate=function(e){t.getStats(function(t){t.forEach(function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=((e.googFramesEncoded-p)/3).toString(),p=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=((e.googFrameReceived-m)/3).toString(),m=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-f)/3).toString(),f=e.googFramesDecoded))}),e(t)})},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats(function(n,i){t.filterStatsCache=n,t.originStatsCache=i,t.lastTimeGetStats=Date.now(),e&&e(n,i)})},t._getStats=function(e){var n=[];t.peerConnection.getStats().then(function(i){i.forEach(function(e){n.push(e),"outbound-rtp"===e.type&&"audio"===e.mediaType&&(s.id=e.id,s.type=e.type,s.mediaType=e.mediaType,s.bytesSent=e.bytesSent?e.bytesSent+"":"0",s.packetsSent=e.packetsSent?e.packetsSent+"":"0"),"outbound-rtp"===e.type&&"video"===e.mediaType&&(c.id=e.id,c.type=e.type,c.mediaType=e.mediaType,c.bytesSent=e.bytesSent?e.bytesSent+"":"0",c.packetsSent=e.packetsSent?e.packetsSent+"":"0",c.googPlisReceived=e.pliCount?e.pliCount+"":"0",c.googNacksReceived=e.nackCount?e.nackCount+"":"0",c.googFirsReceived=e.firCount?e.firCount+"":"0",c.googFramesEncoded=e.framesEncoded?e.framesEncoded+"":"0"),"inbound-rtp"===e.type&&-1!=e.id.indexOf("44444")&&(d.id=e.id,d.type=e.type,d.mediaType="audio",d.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",d.bytesReceived=e.bytesReceived?e.bytesReceived+"":"0",d.packetsLost=e.packetsLost?e.packetsLost+"":"0",d.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",d.googJitterReceived=e.jitter?e.jitter+"":"0"),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(u.id=e.id,u.type=e.type,u.mediaType="video",u.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",u.bytesReceived=e.bytesReceived?e.bytesReceived+"":"0",u.packetsLost=e.packetsLost?e.packetsLost+"":"0",u.googJitterBufferMs=e.jitter?e.jitter+"":"0",u.googNacksSent=e.nackCount?e.nackCount+"":"0",u.googPlisSent=e.pliCount?e.pliCount+"":"0",u.googFirsSent=e.firCount?e.firCount+"":"0"),"track"!==e.type||-1==e.id.indexOf("55543")&&!~e.trackIdentifier.indexOf("v")&&null!=e.audioLevel||(u.googFrameWidthReceived=e.frameWidth?e.frameWidth+"":"0",u.googFrameHeightReceived=e.frameHeight?e.frameHeight+"":"0",u.googFrameReceived=e.framesReceived?e.framesReceived+"":"0",u.googFramesDecoded=e.framesDecoded?e.framesDecoded+"":"0"),"track"!==e.type||-1==e.id.indexOf("44444")&&!~e.trackIdentifier.indexOf("a")&&void 0===e.audioLevel||(d.audioOutputLevel=e.audioLevel+"",s.audioInputLevel=e.audioLevel+""),"candidate-pair"===e.type&&(0==e.availableIncomingBitrate?l.googAvailableSendBandwidth=e.availableOutgoingBitrate+"":l.googAvailableReceiveBandwidth=e.availableIncomingBitrate+"")});var a=[l,s,c,d,u];a.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(a,n)}).catch(function(e){console.error(e)})},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){var i=t.peerConnection.getSenders().find(function(t){return t.track==e});i.replaceTrack(null),t.peerConnection.removeTrack(i)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach(function(n){return t.peerConnection.addTrack(n,e)}):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater(function(){t.onstablestate()})},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then(function(n){if(n.sdp=a(n.sdp),e.isSubscriber||(n.sdp=n.sdp.replace(/a=extmap:4 urn:3gpp:video-orientation\r\n/g,"")),n.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")}).catch(function(e){o.default.debug("["+t.clientId+"]peer connection create offer failed ",e)});else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer(function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}},function(e){o.default.debug("["+t.clientId+"]peer connection create answer failed ",e)},t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else t.error("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var i={};i.messageType=e,i.sdp=n,"OFFER"===e?(i.offererSessionId=t.sessionId,i.answererSessionId=t.otherSessionId,i.seq=t.sequenceNumber+=1,i.tiebreaker=Math.floor(429496723*Math.random()+1)):(i.offererSessionId=t.incomingMessage.offererSessionId,i.answererSessionId=t.sessionId,i.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(i))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find(function(t){return t.track.kind==e});if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,i){var a=t._getSender(e.kind);if(!a)return i("NO_SENDER_FOUND");try{a.replaceTrack(e)}catch(e){return i&&i(e)}setTimeout(function(){return n&&n()},50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){console.log("!!! ontrack, ",e.track.kind,e.track),t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then(function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=i(e.sdp),e.sdp=a(e.sdp),t.peerConnection.setLocalDescription(e)}).then(function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)}).catch(function(e){console.log("createOffer error: ",e)})},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t},H=function(e){var t={},n=(mozRTCPeerConnection,mozRTCSessionDescription),i=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map(function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})}):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map(function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})}):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&"string"==typeof e.turnServer.url&&""!==e.turnServer.url&&(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay"))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new E.RTCPeerConnection(t.pc_config),o.default.debug("["+t.clientId+']safari Created RTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".'),t.iceCandidateTimer=setTimeout(function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,i,a,r;i=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),a=n.match(/a=candidate:.+typ\shost.+\r\n/),r=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===i&&null===a&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+i+" relay candidate: "+r+" host candidate : "+a),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),n=t[1].split("m=video"),i="m=video"+n[1],a="m=audio"+n[0];return e=t[0]+i+a},t.processSignalingMessage=function(e){var i,a=JSON.parse(e);t.incomingMessage=a,"new"===t.state?"OFFER"===a.messageType?(a.sdp=l(a.sdp),i={sdp:a.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===a.messageType?(a.sdp=l(a.sdp),a.sdp=a.sdp.replace(/ generation 0/g,""),a.sdp=a.sdp.replace(/ udp /g," UDP "),-1!==a.sdp.indexOf("a=group:BUNDLE")?(a.sdp=a.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),a.sdp=a.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),a.sdp=a.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(a.sdp=a.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),a.sdp=a.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),i={sdp:a.sdp,type:"answer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)}),t.state="established"):"pr-answer"===a.messageType?(i={sdp:a.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})):"offer"===a.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===a.messageType?(i={sdp:a.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state))};var a={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},s={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},c={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},d={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},u=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then(function(n){var i=!0,a=!1,r=void 0;try{for(var o,s=n.values()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;if(t.isSubscriber){if(("inbound-rtp"===c.type||"inboundrtp"===c.type)&&"video"===c.mediaType){if(!t.lastReport)return void(t.lastReport=c);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:c.framerateMean+"",frameRateDecoded:c.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:c.bytesReceived+"",packetsReceived:c.packetsReceived+"",packetsLost:c.packetsLost+""}),t.lastReport=c}}else if(("outbound-rtp"===c.type||"outboundrtp"===c.type)&&"video"===c.mediaType){if(!t.lastReport)return void(t.lastReport=c);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:c.framerateMean+"",frameRateSent:c.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=c}}}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}})},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then(function(n){var i=!0,a=!1,r=void 0;try{for(var o,s=n.values()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;t.isSubscriber&&("inbound-rtp"!==c.type&&"inboundrtp"!==c.type||"audio"!==c.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:c.packetsLost+"",frameReceived:c.packetsReceived+"",googJitterReceived:c.jitter+"",bytesReceived:c.bytesReceived+"",packetsReceived:c.packetsReceived+"",packetsLost:c.packetsLost+""}))}}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}})},t.getStatsRate=function(e){t.getStats(function(t){t.forEach(function(e){"inbound-rtp"!==e.type&&"inboundrtp"!==e.type||"video"!==e.mediaType||e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-u)/3).toString(),u=e.googFramesDecoded)}),e(t)})},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats(function(n,i){t.filterStatsCache=n,t.originStatsCache=i,t.lastTimeGetStats=Date.now(),e&&e(n,i)})},t._getStats=function(e){t.peerConnection.getStats().then(function(n){var i=[],r=!0,o=!1,u=void 0;try{for(var l,p=n.values()[Symbol.iterator]();!(r=(l=p.next()).done);r=!0){var f=l.value;i.push(f),"outbound-rtp"!==f.type&&"outboundrtp"!==f.type||"video"!==f.mediaType||-1!==f.id.indexOf("rtcp")||(s.id=f.id,s.type=f.type,s.mediaType=f.mediaType,s.bytesSent=f.bytesSent?f.bytesSent+"":"0",s.packetsSent=f.packetsSent?f.packetsSent+"":"0",s.googPlisReceived=f.pliCount?f.pliCount+"":"0",s.googNacksReceived=f.nackCount?f.nackCount+"":"0",s.googFirsReceived=f.firCount?f.firCount+"":"0",s.googFrameRateSent=f.framerateMean?f.framerateMean+"":"0"),"outbound-rtp"!==f.type&&"outboundrtp"!==f.type||"audio"!==f.mediaType||-1!==f.id.indexOf("rtcp")||(a.id=f.id,a.type=f.type,a.mediaType=f.mediaType,a.bytesSent=f.bytesSent?f.bytesSent+"":"0",a.packetsSent=f.packetsSent?f.packetsSent+"":"0"),"inbound-rtp"!==f.type&&"inboundrtp"!==f.type||"audio"!==f.mediaType||f.isRemote||-1!==f.id.indexOf("rtcp")||(c.id=f.id,c.type=f.type,c.mediaType=f.mediaType,c.bytesReceived=f.bytesReceived?f.bytesReceived+"":"0",c.packetsLost=f.packetsLost?f.packetsLost+"":"0",c.packetsReceived=f.packetsReceived?f.packetsReceived+"":"0",c.googJitterReceived=f.jitter?f.jitter+"":"0"),"inbound-rtp"!==f.type&&"inboundrtp"!==f.type||"video"!==f.mediaType||f.isRemote||-1!==f.id.indexOf("rtcp")||(d.id=f.id,d.type=f.type,d.mediaType=f.mediaType,d.bytesReceived=f.bytesReceived?f.bytesReceived+"":"0",d.googFrameRateReceived=f.framerateMean?f.framerateMean+"":"0",d.googFramesDecoded=f.framesDecoded?f.framesDecoded+"":"0",d.packetsLost=f.packetsLost?f.packetsLost+"":"0",d.packetsReceived=f.packetsReceived?f.packetsReceived+"":"0",d.googJitterBufferMs=f.jitter?f.jitter+"":"0",d.googNacksSent=f.nackCount?f.nackCount+"":"0",d.googPlisSent=f.pliCount?f.pliCount+"":"0",d.googFirsSent=f.firCount?f.firCount+"":"0"),-1!==f.id.indexOf("outbound_rtcp_video")&&(s.packetsLost=f.packetsLost?f.packetsLost+"":"0")}}catch(e){o=!0,u=e}finally{try{r||null==p.return||p.return()}finally{if(o)throw u}}var m=[s,a,c,d];m.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(m,i)},function(e){o.default.error("["+t.clientId+"]"+e)})},t.addStream=function(e){i=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater(function(){t.onstablestate()})},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)i&&(t.mediaConstraints=void 0),t.peerConnection.createOffer(function(e){if(e.sdp=l(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")},function(e){o.default.debug("["+t.clientId+"]Ups! create offer failed ",e)},t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer(function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}},function(){o.default.debug("["+t.clientId+"]Ups! Something went wrong")});else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;var e=t.peerConnection.localDescription.sdp;t.sendMessage("ANSWER",e),t.state="established"}else t.error("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var i={};i.messageType=e,i.sdp=n,"OFFER"===e?(i.offererSessionId=t.sessionId,i.answererSessionId=t.otherSessionId,i.seq=t.sequenceNumber+=1,i.tiebreaker=Math.floor(429496723*Math.random()+1)):(i.offererSessionId=t.incomingMessage.offererSessionId,i.answererSessionId=t.sessionId,i.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(i))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find(function(t){return t.track.kind==e});if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,i){var a=t._getSender(e.kind);if(!a)return i("NO_SENDER_FOUND");try{a.replaceTrack(e)}catch(e){return i&&i(e)}setTimeout(function(){return n&&n()},50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var l=function(t){var n;if(e.video&&e.maxVideoBW&&(null==(n=t.match(/m=video.*\r\n/))&&(n=t.match(/m=video.*\n/)),n&&n.length>0)){var i=n[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(n[0],i)}return e.audio&&e.maxAudioBW&&(null==(n=t.match(/m=audio.*\r\n/))&&(n=t.match(/m=audio.*\n/)),n&&n.length>0)&&(i=n[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n",t=t.replace(n[0],i)),t};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t},W=a(16),G=a.n(W),q=null,Y=function(){try{q=window.require("electron")}catch(e){}return q},J=function(e){var t=s.b.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),n=Y();if(!n)return t&&t("electron is null");n.desktopCapturer.getSources({types:["window","screen"]},function(e,n){if(e)return t&&t(e);t&&t(null,n)})},K=function(e,t,n){var i=t.width;t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:i,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}};navigator.webkitGetUserMedia(t,function(e){n&&n(null,e)},function(e){n&&n(e)})},z=function(){return!!Y()},X=J,Q=K,$=function(e,t){J(function(n,i){if(n)return t&&t(n);!function(e,t){var n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var i=document.createElement("div");i.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var a=document.createElement("div");a.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",a.setAttribute("style","height: 12%;");var r=document.createElement("div");r.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var o=document.createElement("div");o.setAttribute("style","text-align: right; padding: 16px 0;");var s=document.createElement("button");s.innerHTML="cancel",s.setAttribute("style","width: 85px;"),s.onclick=function(){document.body.removeChild(c),t&&t("NotAllowedError")},o.appendChild(s),i.appendChild(a),i.appendChild(r),i.appendChild(o);var c=document.createElement("div");c.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),c.appendChild(n),c.appendChild(i),document.body.appendChild(c),e.map(function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;"),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+e.thumbnail.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name+"</span>",n.onclick=function(){document.body.removeChild(c),t&&t(null,e.id)},r.appendChild(n)}})}(i,function(n,i){if(n)return t&&t(n);K(i,e,t)})})},Z=103,ee=function(e){var t={};if(t.clientId=e.clientId,e.session_id=Z+=1,"undefined"==typeof window||!window.navigator)throw o.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=H(e)):"iOS"===m.getBrowserOS()||m.isSafari()?(o.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=B(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new G.a(e):(t=F(e)).browser="chrome-stable",t},te=function(e,t,n){var i={};i.config=e,i.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var a=0,r=1,s=!1,c=null,d=function(e){if(a++,c)if(c===e)o.default.debug("Using Video Source/ Audio Source");else{var n=c.getVideoTracks()[0],i=c.getAudioTracks()[0],d=e.getVideoTracks()[0],u=e.getAudioTracks()[0];d&&(n&&c.removeTrack(n),c.addTrack(d)),u&&(i&&c.removeTrack(i),c.addTrack(u))}else c=e;a!==r||s||(s=!0,setTimeout(function(){t(c)},0))},u=function(e){o.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),a++,s||(s=!0,setTimeout(function(){n&&n(e)},0))},l=function(){var t={video:e.video,audio:e.audio};if(o.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(d).catch(u);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,d,u);else{var a={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};o.default.error("["+i.streamId+"]"+a.message),n&&n(a)}};if((e.videoSource||e.audioSource)&&(c=new MediaStream,e.videoSource&&c.addTrack(e.videoSource),e.audioSource&&c.addTrack(e.audioSource)),e.video||e.audio||e.screen||e.screenAudio||d(c),!e.screen&&e.screenAudio)return n&&n({code:"Set screen to true before sharing the audio"});if(e.screen){if(z())return e.screen.sourceId?Q(e.screen.sourceId,e.screen,function(e,t){e?u(e):d(t)}):$(e.screen,function(e,t){e?u(e):d(t)});if(m.isFireFox()){o.default.debug("["+i.streamId+"]Screen access requested");if(!~["screen","window","application"].indexOf(e.screen.mediaSource))return n&&n({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},function(t){e.audio&&(r++,l()),d(t)},u)}else if(m.isChromeKernel()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void n({code:"This browser does not support screen sharing"});o.default.debug("["+i.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},function(t){if(void 0===t){o.default.error("["+i.streamId+"]No response from Chrome Plugin. Plugin not installed properly");u({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})}else e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},function(t){e.audio&&(r++,l()),d(t)},u)})}catch(e){o.default.debug("["+i.streamId+"]AgoraRTC screensharing plugin is not accessible");return void n({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var p={};return"number"==typeof e.screen.width&&"number"==typeof e.screen.height?p.video={width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:p.video={width:e.screen.width,height:e.screen.height},e.screen.frameRate&&e.screen.frameRate.min?p.video.frameRate={ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:p.video.frameRate=e.screen.frameRate,e.screenAudio&&(p.audio=e.screenAudio),o.default.debug("use getDisplayMedia, constraints:",p),window.navigator.mediaDevices.getDisplayMedia(p).then(function(t){!e.screenAudio&&e.audio&&(r++,l()),d(t)}).catch(u)}o.default.error("["+i.streamId+"]This browser does not support screenSharing"),n({code:"This browser does not support screen sharing"})}}else l()},ne=a(10),ie=function(e,t,n){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight"].indexOf(t)>-1&&("string"==typeof n||isFinite(n)))return e[t]=""+n},ae=new function(){var e=c();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,n){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo(function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()},function(t){o.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,n&&n(t)})},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return o.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then(function(t){e&&setTimeout(function(){e(t)},0)}).catch(function(e){t&&t(e)})},e._reloadDevicesInfo=function(t,n){var i=[];e._enumerateDevices(function(n){var a=Date.now();for(var r in n.forEach(function(t){var n=e.devicesHistory[t.deviceId];if((n?n.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var r=n||{initAt:a};r.device=t,r.state=e.deviceStates.ACTIVE,i.push(r),e.devicesHistory[t.deviceId]=r}e.devicesHistory[t.deviceId].lastReloadAt=a}),e.devicesHistory){var s=e.devicesHistory[r];s&&s.state==e.deviceStates.ACTIVE&&s.lastReloadAt!==a&&(s.state=e.deviceStates.INACTIVE,i.push(s)),s.lastReloadAt=a}e.state==e.states.INITED&&i.forEach(function(t){var n=S()({},t);switch(t.device.kind){case"audioinput":n.type="recordingDeviceChanged";break;case"audiooutput":n.type="playoutDeviceChanged";break;case"videoinput":n.type="cameraChanged";break;default:o.default.warning("Unknown device change",n),n.type="unknownDeviceChanged"}e.dispatchEvent(n)}),t&&t()},n)},e.getDeviceById=function(t,n,i){e.getDevices(function(e){for(var a=0;a<e.length;a++){var r=e[a];if(r&&r.deviceId===t)return n&&n(r)}return i&&i()})},e.searchDeviceNameById=function(t){var n=e.devicesHistory[t];return n?n.device.label||n.device.deviceId:null},e.getDevices=function(t,n){e._enumerateDevices(t,function(e){n&&n(e.name+": "+e.message)})},e.getVideoCameraIdByLabel=function(t,n,i){e.getCameras(function(e){var a=!0,r=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;if(d.label===t)return n&&n(d.deviceId)}}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return i&&i(V.NOT_FIND_DEVICE_BY_LABEL)},i)},e.getRecordingDevices=function(t,n){return e._enumerateDevices(function(e){var n=e.filter(function(e){return"audioinput"==e.kind});t&&t(n)},function(e){n&&n(e)})},e.getPlayoutDevices=function(t,n){return e._enumerateDevices(function(e){var n=e.filter(function(e){return"audiooutput"==e.kind});t&&t(n)},function(e){n&&n(e)})},e.getCameras=function(t,n){return e._enumerateDevices(function(e){var n=e.filter(function(e){return"videoinput"==e.kind});t&&t(n)},function(e){n&&n(e)})},e._init(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",function(){e._reloadDevicesInfo()}),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)}),e},re=a(1),oe=a(14);var se=a(6),ce=a.n(se),de=a(11),ue=a.n(de),le=a(17),pe=a.n(le),fe=a(18),me=a.n(fe),ge=5,ve=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function he(e){for(var t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length,i=e,a=i.length,r=new Uint8Array(a),o=new Uint8Array(256),s=0;s<256;s++)o[s]=s;for(var c=0,d=0;d<256;d++){var u=[o[c=(c+o[d]+t[d%n])%256],o[d]];o[d]=u[0],o[c]=u[1]}var l,p=0;c=0;for(var f=0;f<0+a;f++){var m=[o[c=(c+o[p=(p+1)%256])%256],o[p]];o[p]=m[0],o[c]=m[1],l=o[(o[p]+o[c])%256],f>=0&&(r[f-0]=i[f-0]^l)}var g=String.fromCharCode.apply(null,r);return Function("var winSize = "+ge+"; return `"+g+"`")()}function Se(e,t){var n=he(t),i=me.a.createProgramFromSources(e,[he(ve),n]),a=e.getAttribLocation(i,"a_position"),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(a);var o=2,s=e.FLOAT,c=!1,d=0,u=0;e.vertexAttribPointer(a,o,s,c,d,u);var l=e.getAttribLocation(i,"a_texCoord"),p=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,p),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(l);o=2,s=e.FLOAT,c=!1,d=0,u=0;return e.vertexAttribPointer(l,o,s,c,d,u),i}var _e=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function Ee(e,t,n){var i=e.gl;this.program=Se(i,_e),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY");i.uniform1f(e,1)}}var Ie=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function ye(e,t,n){var i=e.gl,a=1/t,r=1/n,o=5;this.program=Se(i,Ie),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY"),t=i.getUniformLocation(this.program,"u_singleStepOffset"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(t,a,r),i.uniform1f(n,o),i.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){a=1/e,r=1/t}}var Te=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function be(e,t,n){var i=e.gl,a=1/t,r=1/n,o=5;this.program=Se(i,Te),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY"),t=i.getUniformLocation(this.program,"u_singleStepOffset"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(t,a,r),i.uniform1f(n,o),i.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){a=1/e,r=1/t}}var Re=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function Ae(e,t,n){var i=e.gl,a=1/t,r=1/n,o=5;this.program=Se(i,Re),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY"),t=i.getUniformLocation(this.program,"u_singleStepOffset"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(t,a,r),i.uniform1f(n,o),i.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){a=1/e,r=1/t}}var Oe=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function Ce(e,t,n){var i=e.gl,a=5,r=.1,o=.5,s=175/180*3.141593,c=115/180*3.141593,d=173/180*3.141593,u=116/180*3.141593,l=2.04203545,p=0,f=0,m=0,g=[],v=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],S=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=Se(i,Oe),this.setUniforms=function(){var t=i.getUniformLocation(this.program,"u_flipY"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform1f(n,a),i.uniform1f(t,1);var v=i.getUniformLocation(this.program,"light");i.uniform1f(v,r);var h=i.getUniformLocation(this.program,"redness");i.uniform1f(h,o);var S=i.getUniformLocation(this.program,"skin_he_max"),_=i.getUniformLocation(this.program,"skin_he_min"),E=i.getUniformLocation(this.program,"skin_hc_max"),I=i.getUniformLocation(this.program,"skin_hc_min"),y=i.getUniformLocation(this.program,"skin_hc_axis"),T=i.getUniformLocation(this.program,"facts_rotate_c"),b=i.getUniformLocation(this.program,"facts_rotate_le"),R=i.getUniformLocation(this.program,"facts_rotate_ge");i.uniform1f(S,s),i.uniform1f(_,c),i.uniform1f(E,d),i.uniform1f(I,u),i.uniform1f(y,l),i.uniform1f(T,p),i.uniform1f(b,f),i.uniform1f(R,m);var A=i.getUniformLocation(this.program,"u_originImage");i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,e.inputTexture),i.uniform1i(A,2);for(var O=["lighten_lut"],C=[i.TEXTURE3],N=0;N<O.length;N++){var w=i.getUniformLocation(this.program,O[N]);i.activeTexture(C[N]),i.bindTexture(i.TEXTURE_2D,g[N]),i.uniform1i(w,N+3)}},this.setParameters=function(e){void 0!==e.denoiseLevel&&(a=e.denoiseLevel),void 0!==e.lightLevel&&(r=e.lightLevel),void 0!==e.rednessLevel&&(o=e.rednessLevel,this._updateRedness(o)),void 0!==e.lighteningContrastLevel&&this._updateLut(e.lighteningContrastLevel)},this._updateRedness=function(e){var t,n,i=3.141593,a=e,r=a;a>1&&(a=1),a<0&&(a=0),r>1&&(r=1),r<0&&(r=0),p=.8*a,r<.8&&(r=0),(l=(117-4*r)/180*i)<(u=(116-4*r)/180*i)&&(l=u),u<i/2&&(u=i/2),l<i/2&&(l=i/2),(c=(115-4*r)/180*i)<i/2&&(c=i/2),(d=173/180*i)>i&&(d=i),l>i&&(l=i),(s=175/180*i)>i&&(s=i),n=d-l,m=(t=s-d)>.01?p*n/t:p,n=l-u,f=(t=u-c)>.01?p*n/t:p},this._updateLut=function(e){var t=null;0==e&&(t=h),1==e&&(t=S),2==e&&(t=v);for(var n=[new Uint8Array(t)],a=[256],r=[1],o=0;o<n.length;o++)i.bindTexture(i.TEXTURE_2D,g[o]),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,a[o],r[o],0,i.LUMINANCE,i.UNSIGNED_BYTE,n[o])},this._init=function(){var e=null;e=h;for(var t=[new Uint8Array(e)],n=[256],a=[1],r=0;r<t.length;r++){var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,n[r],a[r],0,i.LUMINANCE,i.UNSIGNED_BYTE,t[r]),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),g.push(o)}},this._init()}var Ne=!1;function we(){this.programs=[];var e=this,t=null,n=null;e.gl=null,e.inputTexture=null;var i=[],a=[],r=0,o=0;e._initGl=function(n,s){e.inputTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);for(var c=0;c<4;c++){var d=t.createTexture();t.bindTexture(t.TEXTURE_2D,d),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),c<2?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,s,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,s,n,0,t.RGBA,t.UNSIGNED_BYTE,null);var u=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,u),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,d,0),i.push(d),a.push(u)}t.viewport(0,0,n,s),r=n,o=s},e.render=function(s){if(t){var c=0;o==s.videoWidth&&r===s.videoHeight&&(c=2),t.viewport(0,0,s.videoWidth,s.videoHeight),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s);for(var d=Ne?e.programs.length-1:0,u=0;u<=d;u++){var l=e.programs[u].program;t.useProgram(l);var p=t.getUniformLocation(l,"u_image");e.programs[u].setUniforms(),t.bindFramebuffer(t.FRAMEBUFFER,a[c+u%2]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i[c+u%2]),t.uniform1i(p,0)}t.useProgram(n);var f=t.getUniformLocation(n,"u_flipY");t.uniform1f(f,-1),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6)}},e.setEnableBeauty=function(e){Ne=e},e.init=function(i,a,r){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");t=r.getContext("webgl"),e.gl=t,e._initGl(i,a),e.programs.push(new Ee(this,i,a)),e.programs.push(new ye(this,i,a)),e.programs.push(new be(this,i,a)),e.programs.push(new Ae(this,i,a)),e.programs.push(new Ce(this,i,a)),n=e.programs[0].program},e.release=function(){e.gl=null,t=null,n=null,e.inputTexture=null,e.programs=[],i=[],a=[]},e.setDenoiseLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({denoiseLevel:t})})},e.setLightLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({lightLevel:t})})},e.setRednessLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({rednessLevel:t})})},e.setContrastLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({lighteningContrastLevel:t})})},e.setSize=function(t,n){e.programs.forEach(function(e){e.setSize&&e.setSize(t,n)})}}we._instance=null,we.getInstance=function(){return we._instance||(we._instance=new we),we._instance};var ke=30,De=null,Le=!1,Me=5,Pe=.35,xe=.5,Ve=1,Ue=null,je=null;var Fe={addVideoEffectCapability:function(e){e.videoEffect={videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},e._initVideoContext=function(){if(e.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!e.stream)throw new Error("Failed to init video context. Local Stream not initialized");e.videoEffect.originVideoTrack=e.stream.getVideoTracks()[0],e.attributes&&e.attributes.maxFrameRate&&(ke=e.attributes.maxFrameRate),e.videoEffect.videoContextInited=!0},e._renderWithWebGL=function(e){return new Promise(function(t){je||(je=document.createElement("canvas")),Ue||(Ue=document.createElement("video")),Ue.setAttribute("autoplay",""),Ue.setAttribute("muted",""),Ue.muted=!0,Ue.setAttribute("playsinline",""),Ue.setAttribute("style","display:none"),Ue.srcObject=e;var n=e.getVideoTracks()[0].getSettings(),i=n.width,a=n.height;console.log("Width: ".concat(i,", Height: ").concat(a)),je.setAttribute("width",i),je.setAttribute("height",a),Ue.setAttribute("width",i),Ue.setAttribute("height",a);var r=we.getInstance();r.init(Ue.width,Ue.height,je),r.setDenoiseLevel(Me),r.setLightLevel(Pe),r.setRednessLevel(xe),r.setContrastLevel(Ve),Ue.addEventListener("playing",function e(){var n=je.captureStream(ke);Ue.removeEventListener("playing",e,!0),t([n.getVideoTracks()[0],Ue])},!0),Ue.play()})},e._disableEffect=function(){e.videoEffect.videoContextInited||e._initVideoContext();var t=e.videoEffect.originVideoTrack;if(!t)return o.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find(function(e){return e&&e.track&&"video"==e.track.kind});if(n&&n.replaceTrack&&t)return n.replaceTrack(t)}return Promise.resolve()},e._releaseEffect=function(){var t;return t=Le?e._disableEffect():Promise.resolve(),we.getInstance().release(),e.videoEffect.videoContextInited=!1,e.videoEffect.canvasVideoTrack=null,t},e._enableEffect=function(){return e.videoEffect.videoContextInited||e._initVideoContext(),e.videoEffect.originVideoTrack?(e.videoEffect.canvasVideoTrack?(e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()):e._renderWithWebGL(e.stream).then(function(t){var n=pe()(t,2),i=n[0],a=n[1];e.videoEffect.canvasVideoTrack=i;var r=we.getInstance();requestAnimationFrame(function t(){Le&&r.render(a),e.videoEffect.videoContextInited&&requestAnimationFrame(t)}),m.isChrome()&&document.addEventListener("visibilitychange",function(){document.hidden,document.hidden?De=function(e,t){var n=t/1e3,i=new AudioContext,a=i.createGain();a.gain.value=0,a.connect(i.destination),function t(){var o=i.createOscillator();o.onended=t,o.connect(a),o.start(0),o.stop(i.currentTime+n),e(i.currentTime),r&&(o.onended=function(){i.close()})}();var r=!1;return function(){r=!0}}(function(){Le&&r.render(a)},ke):De&&(De(),De=null)},!1),e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()}),Promise.resolve()):(o.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},e._showEffectInLocalPlayer=function(){if(e.player){var t=e.player.div.children[0];if("none"!==t.style.display&&(e.player.div.appendChild(je),"video"===t.tagName.toLowerCase())){var n=t.getAttribute("style");je.setAttribute("style",n),"none"!==t.style.display&&(t.style.display="none")}}},e._removeEffectFromLocalPlayer=function(){if(e.player&&e.player.div&&Le&&je){e.player.div.removeChild(je);var t=e.player.div.children[0];"video"===t.tagName.toLowerCase()&&(je.style.display="none",t.style.display="block")}},e._replaceWithCanvasTrack=function(){var t=null;e.pc&&e.pc.peerConnection&&e.pc.peerConnection&&(t=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find(function(e){return e&&e.track&&"video"==e.track.kind})),t&&t.replaceTrack&&e.videoEffect.canvasVideoTrack&&t.replaceTrack(e.videoEffect.canvasVideoTrack)},e.setBeautyEffectOptions=(t=ue()(ce.a.mark(function t(n,i){var a;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(re.checkValidBoolean)(n,"enabled"),a=we.getInstance(),Le==n){t.next=13;break}if(a.setEnableBeauty(n),!n){t.next=9;break}return t.next=7,e._enableEffect();case 7:t.next=12;break;case 9:return e._removeEffectFromLocalPlayer(),t.next=12,e._releaseEffect();case 12:Le=n;case 13:if(n){t.next=15;break}return t.abrupt("return");case 15:if(!i){t.next=19;break}Object(re.checkValidObject)(i,"options"),t.next=20;break;case 19:return t.abrupt("return");case 20:if(void 0!==i.smoothnessLevel&&(Object(re.checkValidFloatNumber)(i.smoothnessLevel,"smoothnessLevel",0,1),(Me=10*i.smoothnessLevel)<.1&&(Me=.1),a.setDenoiseLevel(Me)),void 0!==i.lighteningLevel&&(Object(re.checkValidFloatNumber)(i.lighteningLevel,"lighteningLevel",0,1),(Pe=i.lighteningLevel/2)<.01&&(Pe=.01),a.setLightLevel(Pe)),void 0!==i.rednessLevel&&(Object(re.checkValidFloatNumber)(i.rednessLevel,"rednessLevel",0,1),(xe=i.rednessLevel)<.01&&(xe=.01),a.setRednessLevel(xe)),void 0===i.lighteningContrastLevel){t.next=28;break}if(0===i.lighteningContrastLevel||1===i.lighteningContrastLevel||2===i.lighteningContrastLevel){t.next=26;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 26:Ve=parseFloat(i.lighteningContrastLevel),a.setContrastLevel(Ve);case 28:case"end":return t.stop()}},t,this)})),function(e,n){return t.apply(this,arguments)});var t},restoreVideoEffect:function(e){return Le?e._enableEffect():Promise.resolve()},disableVideoEffect:function(e){return e._releaseEffect?e._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(e){Le&&je&&e._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(e){e._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(e){Le&&e._replaceWithCanvasTrack()},checkVideoEffectEnabled:function(e){if(Le&&e.videoEffect&&e.videoEffect.videoContextInited)return o.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED";return!1}},Be=a(8),He=a.n(Be),We=function(e){Object(re.checkValidString)(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),Object(re.checkValidEnum)(e,"profileName",Object.keys(r.SUPPORT_RESOLUTION_LIST));var t=r.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(r.getParameter)("DEFAULT_PROFILE"),t=r.SUPPORT_RESOLUTION_LIST[e]);var n={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&t[3]&&(n.video.frameRate={ideal:t[2],max:t[3]}),t[6]&&t[7]&&(n.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),n},Ge=function(e){return Object.keys(r.SUPPORT_RESOLUTION_LIST).filter(function(t){var n=r.SUPPORT_RESOLUTION_LIST[t],i=["width","height","frameRate"];for(var a in i){var o=i[a];if(e[o]&&n[a]){if("number"==typeof e[o].max&&e[o].max<n[a])return!1;if("number"==typeof e[o].min&&e[o].min>n[a])return!1}}return!0}).reverse()},qe=function(e){var t=r.AUDIO_PROFILE_SETTINGS[e]||r.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}};var Ye=function(e){var t=c();if(t.params=S()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAudio=!!e.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function n(){var e={};t.getVideoTrack()===this?(o.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(o.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):o.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,n){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:n,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,n,i){var a=s.b.reportApiInvoke(e.sid,{callback:i,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"url",1,1024,!1),Object(re.checkValidString)(t,"id",1,1024,!1);var r=function(t){o.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),a(V.LOAD_AUDIO_FAILED)},c=new XMLHttpRequest;c.open("GET",n,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>400)r("".concat(c.status," ").concat(c.statusText));else{var n=c.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(n,function(n){e.audioMixing.buffer[t]=n,a(null)},function(t){o.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),a(t)})}},c.onerror=function(){return r("load error")},c.ontimeout=function(){return r("timeout")},c.send()},e.createAudioBufferSource=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var i=e.audioMixing.buffer[t.id],a=e.audioMixing.ctx.createBufferSource();a.buffer=i;var r=e.audioMixing.ctx.createGain();if(a.connect(r),r.connect(e.audioMixing.mediaStreamDest),a.gainNode=r,t.loop)a.loop=!0,a.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(m.isChrome)()){a.loop=!0;var c=t.cycle*i.duration*1e3-(t.playTime||0);a.start(0,t.playTime/1e3,c/1e3)}else o.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),a.start(0,t.playTime/1e3);else a.start(0,t.playTime/1e3);var d=e.audioMixing.sounds[t.soundId];return d.source=a,e._flushAudioMixingMuteStatus(),a.addEventListener("ended",function(){a===d.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:a,sound:d})}),n(),a}return o.default.error("[".concat(e.streamId,"] "),"AUDIOBUFFER_NOT_FOUND",t.id),n(!1),!1},e.on("audioSourceEnded",function(t){var n=t.source,i=t.sound;i&&i.state===e.audioMixing.states.BUSY&&!i.pauseAt&&(i.state=e.audioMixing.states.IDLE,i.startAt=null,i.startOffset=null,i.resumeAt=null,i.resumeOffset=null,n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))}),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach(function(e){e.stop()})},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(o.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(oe.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find(function(e){return e&&e.track&&"audio"==e.track.kind}),i=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];n&&n.replaceTrack&&i&&n.replaceTrack(i)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var n=e.audioMixing.sounds[t];n.state!==e.audioMixing.states.BUSY&&n.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return o.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var n in e.audioMixing.sounds){var i=e.audioMixing.sounds[n];i&&i.source&&!i.source.connectedToDestination&&(i.source.gainNode.connect(e.audioMixing.ctx.destination),i.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach(function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)});case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var n={soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0},i=t.replace,a=e.createAudioBufferSource(n);return a.sound=e.audioMixing.sounds[t.soundId],a?(a.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),i&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),a):null},e._stopAudioMixingBufferSource=function(t){var n=e.audioMixing.sounds[t.soundId].source;return n?(n.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),n.stop(),n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,n):null},e._flushAudioMixingMuteStatus=function(t){for(var n in e.audioMixing.sounds){var i=e.audioMixing.sounds[n];i&&(void 0!==t&&(i.muted=!!t),i.source&&(i.muted?i.source.gainNode.gain.value=0:i.source.gainNode.gain.value=i.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,n,i){var a=e.audioMixing.sounds[n.soundId],r=-1===n.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";o.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(r,", state is ").concat(a.state)),i&&i(r)},e._handleAudioMixingNoSourceError=function(t,n,i){e.audioMixing.sounds[n.soundId].state=e.audioMixing.states.IDLE;var a=-1===n.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";o.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(a)),i&&i(a)},e._getOneEffectStates=function(t){var n=e.audioMixing.sounds[t.soundId];return function(){return n?{state:n.state,startAt:n.startAt,resumeAt:n.resumeAt,pauseOffset:n.pauseOffset,pauseAt:n.pauseAt,resumeOffset:n.resumeOffset,stopAt:n.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(o.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,n){Object(re.checkValidObject)(t,"options");var i=t.soundId,a=(t.filePath,t.cacheResource);if(t.cycle,t.loop,t.playTime,t.replace,Object(m.isSafari)()&&Object(m.getBrowserVersion)()<12){var r="BROWSER_NOT_SUPPORT";return o.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),r),n(r)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(i);var s=e.audioMixing.sounds[i];if(s.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return r="Invalid Parmeter cycle: "+t.cycle,o.default.error("[".concat(e.streamId,"] ").concat(i),r),n(r);if(Object(re.isEmpty)(a)&&(t.cacheResource=!0),s.state=e.audioMixing.states.STARTING,s.options=t,e.audioMixing.buffer[t.filePath]){var c=e._startAudioMixingBufferSource(t);if(c)return s.source=c,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);s.state=e.audioMixing.states.IDLE;var d="CREATE_BUFFERSOURCE_FAILED";if(n)return n(d);o.default.error("[".concat(e.streamId,"] "),d)}else e.loadAudioBuffer(t.filePath,t.filePath,function(i){if(i)s.state=e.audioMixing.states.IDLE,n?n(i):o.default.error("[".concat(e.streamId,"] "),i);else{var a=e._startAudioMixingBufferSource(t);if(a)return s.source=a,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);if(s.state=e.audioMixing.states.IDLE,i="CREATE_BUFFERSOURCE_FAILED",n)return n(i);o.default.error("[".concat(e.streamId,"] "),i)}})}else e._handleAudioMixingInvalidStateError("_playEffect",t,n)},e._stopOneEffect=function(t,n){var i=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?i.state===e.audioMixing.states.BUSY||i.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),i.stopAt=Date.now(),i.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[i.options.filePath]&&!i.options.cacheResource&&(o.default.debug("Recycled buffer ".concat(i.options.filePath)),delete e.audioMixing.buffer[i.options.filePath]),void(n&&n(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,n):n("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,n){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(i.pauseAt=Date.now(),i.state=e.audioMixing.states.PAUSED,i.resumeAt?i.pauseOffset=i.pauseAt-i.resumeAt+i.resumeOffset:i.pauseOffset=i.pauseAt-i.startAt+i.startOffset,n&&n(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,n);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,n)},e._resumeOneEffect=function(t,n){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.PAUSED){var a={soundId:t.soundId,filePath:i.options.filePath,cycle:i.options.cycle,loop:i.options.loop,playTime:i.pauseOffset,replace:i.options.replace},r=e._startAudioMixingBufferSource(a);if(!r){var s="CREATE_BUFFERSOURCE_FAILED";return n(s),void o.default.error("[".concat(e.streamId,"] "),s)}i.source=r,i.resumeAt=Date.now(),i.resumeOffset=i.pauseOffset,i.state=e.audioMixing.states.BUSY,i.pauseAt=null,i.pauseOffset=null,n(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,n)},e._getOneEffectDuration=function(t){var n=e.audioMixing.sounds[t.soundId];return n.options&&n.options.filePath&&e.audioMixing.buffer[n.options.filePath]?1e3*e.audioMixing.buffer[n.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,n){var i=e.audioMixing.sounds[t.soundId];return i.state===e.audioMixing.states.PAUSED?i.pauseOffset%e._getOneEffectDuration(t):i.state===e.audioMixing.states.BUSY?i.resumeAt?(Date.now()-i.resumeAt+i.resumeOffset)%e._getOneEffectDuration(t):(Date.now()-i.startAt+i.startOffset)%e._getOneEffectDuration(t):void(n&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,n,i){var a=e.audioMixing.sounds[t.soundId];if(a.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,i);var r={soundId:t.soundId,filePath:a.options.filePath,loop:a.options.loop,cycle:a.options.cycle,playTime:n},s=e._startAudioMixingBufferSource(r);if(!s){var c="CREATE_BUFFERSOURCE_FAILED";return i&&i(c),void o.default.error("[".concat(e.streamId,"] "),c)}a.source=s,a.startAt=Date.now(),a.startOffset=n,a.resumeAt=null,a.resumeOffset=null,a.pauseOffset=null,a.pauseAt=null}else{if(a.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,i);a.pauseOffset=n}i&&i(null)},e.startAudioMixing=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"audioMixingPlayed"}),n&&n(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});Object(re.checkValidObject)(t,"options");var a=t.filePath,o=t.cacheResource,c=t.cycle,d=t.loop,u=t.playTime,l=t.replace;Object(re.checkValidString)(a,"filePath",1,Object(r.getParameter)("FILEPATH_LENMAX"),!1),Object(re.checkValidNumber)(u,"playTime",0,1e8),!Object(re.isEmpty)(c)&&Object(re.checkValidNumber)(c,"cycle"),!Object(re.isEmpty)(d)&&Object(re.checkValidBoolean)(d,"loop"),!Object(re.isEmpty)(l)&&Object(re.checkValidBoolean)(l,"replace"),!Object(re.isEmpty)(o)&&Object(re.checkValidBoolean)(o,"cacheResource");var p=S()({soundId:-1},t);e._playOneEffect(p,i)},e.stopAudioMixing=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},n)},e.pauseAudioMixing=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},n)},e.resumeAudioMixing=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:function(n,i){if(n)return t&&t(n);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},n)},e.adjustAudioMixingVolume=function(t){var n=s.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(re.checkValidNumber)(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),n()},e.getAudioMixingDuration=function(){var t=s.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),n=e._getOneEffectDuration({soundId:-1});return t(null,n),n},e.getAudioMixingCurrentPosition=function(){var t=s.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),n=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,n),n},e.setAudioMixingPosition=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(re.checkValidNumber)(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,i)},e.playEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"effectPlayed"}),n&&n(null)},name:"Stream.playEffect",options:t});Object(re.checkValidObject)(t,"options");var a=t.soundId,o=t.filePath,c=t.cycle;Object(re.checkValidNumber)(a,"soundId",1,1e4),Object(re.checkValidString)(o,"filePath",0,Object(r.getParameter)("FILEPATH_LENMAX"),!1),!Object(re.isEmpty)(c)&&Object(re.checkValidNumber)(c,"cycle"),e._playOneEffect(t,i)},e.stopEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});Object(re.checkValidNumber)(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},i)},e.stopAllEffects=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),i=!1,a=0,r=0,o=function(e){i||(e?(n(e),i=!0):a+=1,a===r&&(n(null),i=!0))};for(var c in e.audioMixing.sounds){var d=e.audioMixing.sounds[c];-1!==d.soundId&&(d.state!==e.audioMixing.states.BUSY&&d.state!==e.audioMixing.states.PAUSED||(r++,e._stopOneEffect({soundId:c},o)))}r||n(null)},e.preloadEffect=function(t,n,i){var a=s.b.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(re.checkValidNumber)(t,"soundId",1,1e4),Object(re.checkValidString)(n,"filePath",1,Object(r.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,n),e.audioMixing.buffer[n]?a(null):e.loadAudioBuffer(n,n,a)},e.unloadEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(re.checkValidNumber)(t,"soundId",1,1e4);var a=e.audioMixing.sounds[t];if(!a){var r="SOUND_NOT_EXISTS";return o.default.error(r,t),void i(r)}var c=a.options?a.options.filePath:a.filePath;if(c)delete e.audioMixing.buffer[c],delete e.audioMixing.sounds[t],i(null);else{var d="SOUND_BUFFER_NOT_FOUND";o.default.error(d,t),i(d)}},e.pauseEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},i)},e.pauseAllEffects=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),i=!1,a=0,r=0,o=function(e){i||(e?(n(e),i=!0):a+=1,a===r&&(n(null),i=!0))};for(var c in e.audioMixing.sounds)"-1"!==c&&e.audioMixing.sounds[c].state===e.audioMixing.states.BUSY&&(r++,e._pauseOneEffect({soundId:c},o));r||n(null)},e.resumeEffect=function(t,n){Object(re.checkValidNumber)(t,"soundId",1,1e4);var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},i)},e.resumeAllEffects=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),i=!1,a=0,r=0,o=function(e){i||(e?(n(e),i=!0):a+=1,a===r&&(n(null),i=!0))};for(var c in e.audioMixing.sounds)"-1"!==c&&e.audioMixing.sounds[c].state===e.audioMixing.states.PAUSED&&(r++,e._resumeOneEffect({soundId:c},o));r||n(null)},e.getEffectsVolume=function(){var t=[];for(var n in e.audioMixing.sounds){var i=e.audioMixing.sounds[n];i&&"-1"!==n&&t.push({soundId:parseInt(n),volume:i.volume})}return t},e.setEffectsVolume=function(t,n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:n});for(var a in Object(re.checkValidNumber)(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var r=e.audioMixing.sounds[a];"-1"!==a&&(r.volume=t)}e._flushAudioMixingMuteStatus(),i(null)},e.setVolumeOfEffect=function(t,n,i){var a=s.b.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:i});Object(re.checkValidNumber)(t,"soundId",0,1e4),Object(re.checkValidNumber)(n,"volume",0,100),e._initSoundIfNotExists(t),e.audioMixing.sounds[t].volume=n,e._flushAudioMixingMuteStatus(),a(null)}}(t),Fe.addVideoEffectCapability(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(m.isLegacyChrome)()||(e.videoConstraint.frameRate={ideal:30,max:30}),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(m.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(m.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(m.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(m.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(m.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(m.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(n instanceof Array)){var a=We(n+="");return a&&a.video?(e.videoConstraint=S()(e.videoConstraint,{width:{ideal:a.video.width},height:{ideal:a.video.height}}),t.attributes.resolution=a.attributes.resolution,(r=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&r.applyConstraints?(o.default.debug("setVideoResolution applyConstraints",e.videoConstraint),r.applyConstraints(e.videoConstraint).then(i).catch(i)):i(),!0):(i("NO_PROFILE_".concat(n)),!1)}var r,c=n[0],d=n[1];e.videoConstraint=S()(e.videoConstraint,{width:{ideal:c},height:{ideal:d}}),t.attributes.resolution="".concat(c,"x").concat(d),(r=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&r.applyConstraints?(o.default.debug("setVideoResolution applyConstraints",e.videoConstraint),Fe.disableVideoEffect(e).then(function(){return r.applyConstraints(e.videoConstraint).then(i).catch(i)}).then(function(){return Fe.restoreVideoEffect(e)})):i()},e.setVideoFrameRate=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(m.isFireFox)())return i("FIREFOX_NOT_SUPPORTED"),!1;if("object"===He()(n)&&n instanceof Array&&n.length>1){e.videoConstraint=S()(e.videoConstraint,{frameRate:{ideal:n[0],max:n[1]}}),t.attributes.minFrameRate=n[0],t.attributes.maxFrameRate=n[1];var a=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return a&&a.applyConstraints?(o.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),a.applyConstraints(e.videoConstraint).then(i).catch(i)):i(),!0}return i("INVALID_PARAM_".concat(JSON.stringify(n))),!1},e.setVideoBitRate=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===He()(n)&&n instanceof Array&&n.length>1?(t.attributes.minVideoBW=n[0],t.attributes.maxVideoBW=n[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=n[0],e.connectionSpec.maxVideoBW=n[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),i(),!0):(i("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenBitRate=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===He()(n)&&n instanceof Array&&n.length>1?(t.screenAttributes.minVideoBW=n[0],t.screenAttributes.maxVideoBW=n[1],i(),!0):(i("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenProfile=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(re.checkValidEnum)(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var i=We(t);return i&&i.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=i.screen.width,e.screenConstraint.mandatory.maxHeight=i.screen.height,i.screen.frameRate&&i.screen.frameRate.min&&i.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=i.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=i.screen.frameRate.max)):e.screenConstraint=S()(e.screenConstraint,i.screen),e.screenAttributes.width=i.screen.width,e.screenAttributes.height=i.screen.height,e.screenAttributes.minFr=i.screen.frameRate.min,e.screenAttributes.maxFr=i.screen.frameRate.max,n(),!0):(n("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),n()},e.setVideoProfileCustomPlus=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.videoConstraint.width=n.width,e.videoConstraint.height=n.height,t.attributes.resolution="".concat(n.width,"x").concat(n.height),e.setVideoFrameRate([n.framerate,n.framerate]),e.setVideoBitRate([n.bitrate,n.bitrate]),i()},e.setVideoProfile=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),a=We(n);if(!a){var r="Invalid Profile ".concat(n);throw new Error(r)}if(e.profile=n,a&&a.video){e.profile=a.profileName,e.videoConstraint=S()(e.videoConstraint,a.video),e.connectionSpec&&a.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=a.attributes.minVideoBW,e.connectionSpec.maxVideoBW=a.attributes.maxVideoBW),Object(m.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(m.isFireFox)()&&(e.videoConstraint.frameRate={ideal:30,max:30}),t.attributes=S()(t.attributes,a.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var c=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return c&&c.applyConstraints?(o.default.debug("setVideoProfile applyConstraints",e.videoConstraint),Fe.disableVideoEffect(e).then(function(){return c.applyConstraints(e.videoConstraint)}).then(function(){return Fe.restoreVideoEffect(e)}).then(function(t){return new Promise(function(n,a){i(t),Object(ne.vsResHack)(e.stream,function(t,i){e.videoWidth=t,e.videoHeight=i,n()},function(t){o.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t),a()})})}).catch(i)):i(),!0}return i("INVALID_VIDEO_PROFILE_".concat(n)),!1},e.setAudioProfile=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(re.checkValidEnum)(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var i=qe(t);return e.highQuality=i.highQuality,e.stereo=i.stereo,e.speech=i.speech,e.lowQuality=i.lowQuality,e.stereo&&Object(m.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),n(),!0},e.setVideoEncoderConfiguration=function(t){Object(re.checkValidObject)(t,"config");var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(Object(re.checkValidNumber)(t.resolution.width,"config.resolution.width"),Object(re.checkValidNumber)(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(Object(re.checkValidNumber)(t.frameRate.min,"config.frameRate.min"),Object(re.checkValidNumber)(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(Object(re.checkValidNumber)(t.bitrate.min,"config.bitrate.min",1,1e7),Object(re.checkValidNumber)(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),n()},e.getSupportedProfile=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var i="ONLY_LOCAL_STREAM_SUPPORTED";return o.default.error(i),n(i)}if(!e.stream)return i="STREAM_NOT_INIT",o.default.error(i),n(i);if(!e.stream.getVideoTracks)return i="TRACK_NOT_SUPPORT",o.default.error(i),n(i);var a=e.stream.getVideoTracks()[0];if(!a)return i="NO_VIDEO_TRACK_FOUND",o.default.error(i),n(i);if(!a.getCapabilities)return i="GETCAPABILITY_NOT_SUPPORT",o.default.error(i),n(i);var r=a.getCapabilities();return n(null,Ge(r))}}(t,e),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){if(Object(r.getParameter)("DUALSTREAM_OPERATION_CHECK")&&t.isDualStream){return o.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED"}return!1},t.setUserId=function(e){var n=s.b.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&o.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,n()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return t.audio},t.hasVideo=function(){return t.video},t.hasScreen=function(){return t.screen},t.hasScreenAudio=function(){return t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(i,a){var r=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Stream.init",options:arguments,tag:"tracer"}),c=((new Date).getTime(),arguments[2]);if(void 0===c&&(c=2),!0===t.initialized)return r({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return r({type:"warning",msg:"STREAM_NOT_LOCAL"});var d=Math.random().toString().slice(3);t._streamInitID=d,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=ae.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=ae.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.screenAudio||e.videoSource||e.audioSource){o.default.debug("[".concat(t.streamId,"] Requested access to local media"));var u={streamId:t.streamId};e.videoSource?u.videoSource=e.videoSource:e.screen?u.screen=t.screenConstraint:e.video&&(u.video=t.videoConstraint),e.audioSource?u.audioSource=e.audioSource:e.screenAudio?u.screenAudio=e.screenAudio:e.audio&&(u.audio=t.audioConstraint),te(u,function(i){if(u.screenAudio&&!i.getAudioTracks()[0]&&o.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),u.screen&&o.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(u.video||u.audio)&&o.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){i.getTracks().forEach(function(e){e.stop()});var a={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return o.default.error(t.streamId,a.info),void r(a)}if(t._streamInitID!==d){i.getTracks().forEach(function(e){e.stop()});a={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"};return o.default.error(t.streamId,a.info),void r(a)}t.dispatchEvent({type:"accessAllowed"}),t.stream=i,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(ne.vsResHack)(i,function(e,n){t.videoWidth=e,t.videoHeight=n},function(e){o.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)}),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach(function(e){e&&!e.onended&&(e.onended=n)}),r()},function(e){var n={type:"error",info:null};switch(e&&(n.msg=e.name||e.code||e,e.message&&(n.info=e.message),e.code&&(n.info?n.info+=". "+e.code:n.info=" "+e.code),e.constraint&&(n.info?n.info+=". Constraint: "+e.constraint:n.info="constraint: "+e.constraint)),n.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),c>0)return void setTimeout(function(){t.init(function(e){return r(e)},r,c-1)},1);n.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":n.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":n.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":n.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":n.msg="CONSTRAINT_NOT_SATISFIED";break;default:n.msg||(n.msg="UNDEFINED")}var i="Media access ".concat(n.msg).concat(n.info?": "+n.info:"");o.default.error("[".concat(t.streamId,"] "),i),r(n)})}else r({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){o.default.error("[".concat(t.streamId,"] Stream init: "),e),r({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];n&&n.label&&(t.audioName=n.label)}}},t.close=function(){var e=s.b.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(o.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),void 0!==t.stream){var n=t.stream.getTracks();for(var i in n)n.hasOwnProperty(i)&&n[i].stop();!t.isLowStream&&t.local?Fe.disableVideoEffect(t).then(function(){t.stream=void 0}):t.stream=void 0}Object(m.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders&&t.pc.peerConnection.getSenders().forEach(function(e){e&&(o.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))});t.initialized=!1,t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),e()},t.enableAudio=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return o.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||o.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});o.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&o.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.enableVideo=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return o.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||o.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});o.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&o.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t.unmuteAudio=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||o.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&o.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.unmuteVideo=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||o.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&o.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t._unmuteAudio=function(){return o.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled)&&(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,!0)},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return o.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&s.b.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return o.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled)&&(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),!0)},t._muteVideo=function(){return o.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&s.b.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(i){var a=s.b.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"}),r=t.checkDualStreamEnabled();if(r)return a(r);if(t.pc&&t.pc.addTrack(i,t.stream),"audio"==i.kind){t._cleanupAudioMixing();var o=new MediaStream;t.userMuteAudio&&(i.enabled=!1),o.addTrack(i);var c=t.stream.getVideoTracks()[0];c&&(o.addTrack(c),t.audio=!0,e.audio=!0),t.stream=o,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(i.enabled=!1),t.stream.addTrack(i),t.video=!0,e.video=!0;i.onended||(i.onended=n),a()},t.removeTrack=function(n){var i=s.b.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"}),a=t.checkDualStreamEnabled(),r=Fe.checkVideoEffectEnabled(t);if(a||r)return i(a);t.pc&&t.pc.removeTrack(n,t.stream),t.stream.removeTrack(n),t._cleanupAudioMixing(),"audio"===n.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==n.readyState&&(n.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(n.kind," Stopped"))),i()},t.setAudioOutput=function(e,n,i){var a=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);n&&n(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(re.isValidString)(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,function(){return a()},a):a()):(o.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),a(V.INVALID_PARAMETER))},t.play=function(e,n,i){"function"==typeof n&&(i=n,n=null),o.default.debug("[".concat(t.streamId,"] play()."),e,n);var a=s.b.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:i});if(Object(re.checkValidString)(e,"elementID"),Object(re.isEmpty)(n)||(Object(re.isEmpty)(n.fit)||Object(re.checkValidEnum)(n.fit,"fit",["cover","contain"]),Object(re.isEmpty)(n.muted)||Object(re.checkValidBoolean)(n.muted,"muted")),t.player)o.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then(function(){a(null)}).catch(a);else{t.elementID=e,t.playOptions=n,!t.local||t.video||t.screen?(t.player=new j({id:t.getId(),stream:t,elementID:e,options:n}),t.local&&Fe.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new j({id:t.getId(),stream:t,elementID:e,options:n}));var r={audio:null,video:null};t.on("player-status-change",function e(n){if(r[n.mediaType]=n,r.audio&&r.video)if(t.removeEventListener("player-status-change",e),r.video.isErrorState||r.audio.isErrorState){var i=r.video.isErrorState?r.video:r.audio;a({isErrorState:!0,status:i.status,reason:i.reason,video:r.video,audio:r.audio})}else"aborted"===r.video.status&&"aborted"===r.audio.status?a({status:"aborted",reason:"stop",video:r.video,audio:r.audio}):a(null)}),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});o.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(Fe.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):o.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!!t.player&&(!!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video))||!!(t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,n;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(n=t.player.audio.play()),n=n||Promise.resolve(),Promise.all([e,n])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var n=t.stream.getVideoTracks()[0];if(n)return o.default.info("[".concat(t.streamId,"] getVideoTrack"),n),e(),n}o.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];if(n)return o.default.info("[".concat(t.streamId,"] getAudioTracks"),n),e(),n}o.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(e,n,i){if(t.stream){if("video"==e.kind){if(r=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(r),t.stream.addTrack(e),o.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==r.readyState&&(r.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(r.kind," Stopped"))),n&&n();var a="MEDIASTREAM_TRACK_NOT_FOUND";return o.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),i(a)}if("audio"==e.kind){var r;if(r=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var s=new MediaStream;s.addTrack(e);var c=t.stream&&t.stream.getVideoTracks()[0];return c&&s.addTrack(c),t.stream=s,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),o.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==r.readyState&&(r.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(r.kind," Stopped"))),n&&n()}a="MEDIASTREAM_TRACK_NOT_FOUND";return o.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),i(a)}a="INVALID_TRACK_TYPE";return o.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(a," ").concat(e.kind)),i&&i(a)}a="NO_STREAM_FOUND";return o.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(a)),i&&i(a)},t.replaceTrack=function(e,i,a){var r=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});if(!e||!e.kind)return r("INVALID_TRACK");var c=t.checkDualStreamEnabled();return c?r(c):(t._cleanupAudioMixing(),e.onended||(e.onended=n),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,function(){return o.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,function(e){return r(null,e)},r)},function(n){return o.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(n)),r(n)}):t._replaceMediaStreamTrack(e,function(e){return r(null,e)},r))},t.setAudioVolume=function(e){var n=s.b.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(re.checkValidNumber)(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),n()},t.getStats=function(e,n,i){var a=[];a.push(t._getPCStats(i)),a.push(new Promise(function(e){var n={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(ie(n,"videoReceiveResolutionHeight",t.videoHeight),ie(n,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(m.isSafari)()||Object(m.isFireFox)())&&(ie(n,"videoSendResolutionHeight",t.videoHeight),ie(n,"videoSendResolutionWidth",t.videoWidth)),(Object(m.isSafari)()||Object(m.isFireFox)())&&t.uplinkStats&&ie(n,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(n)})),a.push(new Promise(function(e){var n={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(ie(n,"accessDelay",t.traffic_stats.access_delay),ie(n,"endToEndDelay",t.traffic_stats.e2e_delay),ie(n,"videoReceiveDelay",t.traffic_stats.video_delay),ie(n,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&ie(n,"accessDelay",t.traffic_stats.access_delay),e(n)})),Promise.all(a).then(function(n){for(var i={},a=n.length-1;a>=0;a--){var r=n[a];S()(i,r)}e&&setTimeout(e.bind(t,i),0)}).catch(function(e){n&&setTimeout(n.bind(t,e),0)})},t._getPCStats=function(e){return new Promise(function(n,i){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats){return i("PEER_CONNECTION_NOT_ESTABLISHED")}t.pc.getStats(function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats){return i("PEER_CONNECTION_STATE_CHANGE")}var a=t.pc.isSubscriber?function(e){var t={};return e.forEach(function(e){e.id&&(-1===e.id.indexOf("recv")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(ie(t,"audioReceiveBytes",e.bytesReceived),ie(t,"audioReceivePackets",e.packetsReceived),ie(t,"audioReceivePacketsLost",e.packetsLost)):(ie(t,"videoReceiveBytes",e.bytesReceived),ie(t,"videoReceivePacketsLost",e.packetsLost),ie(t,"videoReceivePackets",e.packetsReceived),ie(t,"videoReceiveFrameRate",e.googFrameRateReceived),ie(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),ie(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),ie(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))}),t}(e):function(e){var t={};return e.forEach(function(e){e.id&&(-1===e.id.indexOf("send")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(ie(t,"audioSendBytes",e.bytesSent),ie(t,"audioSendPackets",e.packetsSent),ie(t,"audioSendPacketsLost",e.packetsLost)):(ie(t,"videoSendBytes",e.bytesSent),ie(t,"videoSendPackets",e.packetsSent),ie(t,"videoSendPacketsLost",e.packetsLost),ie(t,"videoSendFrameRate",e.googFrameRateSent),ie(t,"videoSendResolutionWidth",e.googFrameWidthSent),ie(t,"videoSendResolutionHeight",e.googFrameHeightSent))))}),t}(e);return n(a)},e)}).then(function(e){return t.pc.isSubscriber?(Object(m.isFireFox)()||Object(m.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(ie(e,"videoReceiveResolutionHeight",t.videoHeight),ie(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(m.isSafari)()||Object(m.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(ie(e,"videoSendResolutionHeight",t.videoHeight),ie(e,"videoSendResolutionWidth",t.videoWidth))),(Object(m.isSafari)()||Object(m.isFireFox)())&&t.uplinkStats&&ie(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)})},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new ne.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();o.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else o.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480P"),t._switchVideoDevice=function(e,n,i){if(e===t.cameraId)return n&&n();var a={video:S()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};o.default.debug("[".concat(t.streamId,"] ").concat(a)),te(a,function(a){try{var r=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),Fe.restoreVideoEffect(t),n&&n()};Fe.disableVideoEffect(t).then(function(){Object(m.isSafari)()?t.replaceTrack(a.getVideoTracks()[0],r,i):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(a.getVideoTracks()[0]),r())})}catch(e){return i&&i(e)}},function(e){return i&&i(e)})},t._switchAudioDevice=function(e,n,i){if(e===t.microphoneId)return n&&n();var a={video:!1,audio:S()({},t.audioConstraint,{deviceId:{exact:e}})};o.default.debug("[".concat(t.streamId,"] "),a),te(a,function(a){var r=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},n&&n()};try{Object(m.isSafari)()?t.replaceTrack(a.getAudioTracks()[0],r,i):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(a.getAudioTracks()[0]),r())}catch(e){return i&&i(e)}},function(e){return i&&i(e)})},t.switchDevice=function(e,n,i,a){var r=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"deviceId");var c=function(){return t.inSwitchDevice=!1,r()},d=function(e){t.inSwitchDevice=!1,o.default.error("[".concat(t.streamId,"] "),e),r(e)};if(t.inSwitchDevice)return r("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return d("Only the local stream can switch the device.");if(t.screen&&"video"===e)return d("The device cannot be switched during screen-sharing.");if(t.videoSource||t.audioSource)return d("The device cannot be switched when using videoSource or audioSource.");if(t.lowStream)return d("The device cannot be switched when using lowstream.");var u=!1;for(var l in t.audioMixing.sounds){if(t.audioMixing.sounds[l].state!==t.audioMixing.states.IDLE){u=!0;break}}if(t.audioMixing.audioContextInited&&u)return d("The device cannot be switched when using audio Mixing.");ae.getDeviceById(n,function(){if("video"===e)t._switchVideoDevice(n,c,d);else{if("audio"!==e)return d("Invalid type.");t._switchAudioDevice(n,c,d)}},function(){return d("The device does not exist.")})},t},Je=a(19),Ke=a(7),ze=a.n(Ke),Xe=["live","rtc","web","interop","h264_interop","web-only"],Qe=["vp8","h264"],$e=["aes-128-xts","aes-256-xts","aes-128-ecb"],Ze=a(20),et=a.n(Ze),tt=function(e){e&&e.apply(this,[].slice.call(arguments,1))},nt=a(9),it=function(e){var t=c(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,e.host instanceof Array?t.host=e.host:t.host=[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,o.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(p({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){if(t.needReconnect=!0,o.default.debug("["+t.clientId+"] start connect:"+t.host[t.hostIndex]),t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={},t.connection.url){var n=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/);if(n)t.turnConfig.url=n[1],Object(r.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(n[2])+30),Object(r.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(n[2])+30);else{var i=t.host[t.hostIndex].split(":");t.turnConfig.url=i[0],Object(r.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[1])+30),Object(r.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[1])+30)}}t.connection.onopen=function(e){o.default.debug("["+t.clientId+"] websockect opened: "+t.host[t.hostIndex]),t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(nt.resetHTTPByetsCount)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(p({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(ne.lengthInUtf8Bytes)(e.data);var n=JSON.parse(e.data);t.lastMsgTime=Date.now(),n.hasOwnProperty("_id")?t.dispatchEvent(p({type:n._id,msg:n})):n.hasOwnProperty("_type")&&t.dispatchSocketEvent(p({type:n._type,msg:n._message}))}},t.connection.onclose=function(n){t.needReconnect?t.isTimeout||t.isInit?(o.default.debug("["+t.clientId+"] websockect connect timeout"),s.b.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):t.dispatchEvent(p({type:"disconnect",event:n})):(o.default.debug("["+t.clientId+"] websockect closeed"),tt(e.onFailure,n),clearTimeout(t.timeoutCheck),t.dispatchEvent(p({type:"close",event:n})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout(function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())},5e3)},t.creatConnection(),t.sendMessage=function(e,n){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var i=JSON.stringify(e);t.sendbytes+=Object(ne.lengthInUtf8Bytes)(i),t.connection.send(i)}else n({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close()},t.sendSignalCommand=function(e,n){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,function(i){i.msg&&n&&n(i.msg._result,i.msg.message),delete t.dispatcher.eventListeners[e._id]}),t.sendMessage(e,function(e){e.reason="NOT_CONNECTED",n&&n(e.reason,e)})},t.requests=[];var n=function(e){var n=t.requests.findIndex(function(t){return t.id===e.type});if(n>=0)var i=t.requests.splice(n,1)[0];i&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&i.callback&&i.callback(e.msg._result,e.msg._message)):o.default.warning("Detached Response",e.type,e.msg)};return t.sendRequest=function(e,i){e=S()({_id:"_request_"+t.requestID},e),t.requestID+=1;var a={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:i};t.requests.push(a),t.addEventListener(e._id,n),t.sendMessage(e,function(e){var n=this,i=t.requests.findIndex(function(e){return e.id===n.id});i>=0&&(n=t.requests.splice(i,1)[0]),n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",n.callback&&n.callback(e.reason,e)):o.default.warning("handleSendError",n)}.bind(a))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(r.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(r.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),n=t.requests.length-1;n>=0;n--){var i=t.requests[n];i.timeoutCounter>=e?(t.requests.splice(n,1),o.default.error("Request Timeout",i.timeoutCounter,i.message),i.callback&&i.callback("TIMEOUT")):i.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(r.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,function(){})},t},at=function(e,t){var n={connect:function(){t.host=e,n.signal=it(t),n.on=n.signal.on,n.dispatchEvent=n.signal.dispatchEvent,n.signal.on("onopen",function(e){n.signal.onEvent=function(e){n.dispatchEvent(p({type:e.event,msg:e}))},n.dispatchEvent(p({type:"connect",msg:e}))}),n.signal.on("onError",function(e){var t=e.msg;onError(t.code,"error")})},getLastMsgTime:function(){return n.signal&&n.signal.lastMsgTime},getSendBytes:function(){return n.signal.getSendBytes()},getRecvBytes:function(){return n.signal.getRecvBytes()},getDuration:function(){return n.signal.getDuration()},disconnect:function(){n.signal.disconnect()},close:function(){n.signal.close()},getURL:function(){return n.signal.getURL()},reconnect:function(){n.signal.reconnect()},connectNext:function(){n.signal.connectNext()},replaceHost:function(e){n.signal.replaceHost(e)},emitSimpleMessage:function(e,t){n.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){n.signal.sendRequest(e,t)},emitReport:function(e){n.signal.sendReport(e)}};return n.connect(),n},rt=function(e,t){var n=!1,i=0,a={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:r.VERSION,seq:0,requestId:1};Object(r.getParameter)("PROXY_CS").map(function(c){var d=(new Date).getTime();ot("https://"+c+"/api/v1",a,function(a,u){if(a)return o.default.debug("["+e.clientId+"] Request proxy server failed: ",a),i++,s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!1,APAddr:c,workerManagerList:null,ec:JSON.stringify(a),response:JSON.stringify({err:a,res:u})}),void(i>=Object(r.getParameter)("PROXY_CS").length&&t&&t("Get proxy server failed: request all failed"));if(!n)if((u=JSON.parse(u)).json_body){var l=JSON.parse(u.json_body);if(o.default.debug("["+e.clientId+"] App return:",l.servers),200!==l.code){a="Get proxy server failed: response code ["+l.code+"], reason [ "+l.reason+"]";o.default.debug("["+e.clientId+"] "+a),s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!1,APAddr:c,workerManagerList:null,ec:a,response:JSON.stringify({err:a,res:u})})}else{n=!0;var p=ct(l.servers);s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!0,APAddr:c,workerManagerList:JSON.stringify(p),ec:null,response:JSON.stringify({res:u})}),t&&t(null,p)}}else o.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!1,APAddr:c,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:u})})})})},ot=function(e,t,n){var i={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(nt.post)(e,i,function(e){n&&n(null,e)},function(e){n&&n(e)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})},st=function(e,t,n){var i=!1,a=0,r={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map(function(c){var d=(new Date).getTime();!function(e,t,n){Object(nt.post)(e,t,function(e){n&&n(null,e)},function(e){n&&n(e)})}("https://"+c+":4000/v2/machine",r,function(r,u){if(r)return o.default.debug("["+e.clientId+"] Request worker manager failed: ",r),a++,s.b.requestProxyWorkerManager(e.sid,{lts:d,succ:!1,workerManagerAddr:c,ec:JSON.stringify(r),response:JSON.stringify({res:u})}),void(a>=t.length&&n&&n("requeet worker manager server failed: request failed"));if(!i){if(!(u=JSON.parse(u)).serverResponse)return n&&n("requeet worker manager server failed: serverResponse is undefined");i=!0,s.b.requestProxyWorkerManager(e.sid,{lts:d,succ:!0,workerManagerAddr:c,ec:JSON.stringify(r),response:JSON.stringify({res:u})}),n&&n(null,{address:c,serverResponse:u.serverResponse})}})})},ct=function(e){if(!e||[]instanceof Array==!1)return[];var t=[];return e.forEach(function(e){var n;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?n="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(o.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),n="".concat(e.address,":").concat(e.tcp)),t.push(n)):o.default.error("["+joinInfo.clientId+"] Invalid address format ",e)}),t},dt=function(e,t){var n=S()({},e),i=Object(r.getParameter)("CDS_AP"),a=[],o=!1;(i=i.map(function(e){return n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1"):"https://".concat(e,"/api/v1?action=config")})).map(function(e){!function(e,t,n){var i={flag:64,cipher_method:0,timeout:1e3,features:t};Object(nt.post)(e,i,function(e){try{var t=JSON.parse(e);n&&n(null,t)}catch(e){n&&n(e)}n&&n(null,e)},function(e){n&&n(e)},{"X-Packet-Service-Type":0,"X-Packet-URI":54})}(e,n,function(e,n){o||(e?(a.push(e),a.length>=i.length&&t&&t("ALL_REQUEST_FAILED")):(o=!0,t&&t(null,n)))})})},ut={},lt={},pt=function(e,t,n,i){var a=(new Date).getTime(),r=t,c="";t.multiIP&&t.multiIP.gateway_ip&&(c={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var d={opid:133,flag:4096,ts:+new Date,key:t.token,cname:t.cname,sid:t.sid,detail:{6:t.stringUid},uid:t.uid||0};c&&(d.detail[5]=JSON.stringify(c)),Object(nt.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=wrtc_gateway"),d,function(c){try{var d=JSON.parse(c);d.res&&(d=d.res);var u=d.code}catch(e){var l="requestChooseServer failed with unexpected body "+c;return o.default.error("["+r.clientId+"]",l),i(l)}if(u){var p=I[d.code]||u;return s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:p}),i("Get server node failed ["+p+"]",e,p)}var f=[],m=[".agora.io",".agoraio.cn"],g=0;if(e.indexOf(m[1])>-1&&(g=1),d.addresses.forEach(function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".edge").concat(m[g++%m.length],":").concat(e.port):(o.default.info("["+r.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),f.push(t)):o.default.error("["+r.clientId+"] Invalid address format ",e)}),!f.length){o.default.error("["+r.clientId+"] Empty Address response",d);p="EMPTY_ADDRESS_RESPONSE";return s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:p}),i("Get server node failed ["+p+"]",e,p)}var v={gateway_addr:f,uid:d.uid,cid:d.cid,vid:d.detail&&d.detail[8],res:d,uni_lbs_ip:d.detail};return n(v,e)},function(e,n){"timeout"===e.type?(s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:n,serverList:null,ec:"timeout"}),i("Connect choose server timeout",n)):s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:n,serverList:null,ec:"server_wrong"})},{"X-Packet-Service-Type":0,"X-Packet-URI":69})},ft=function(e,t,n){var i=!1,a=null,c=1,d=1,u=null,l=e.clientId,p=function t(d,p){if(!i){var f=!1,g=!1,v=[],h=m.getBrowserInfo()||{};dt({device:h.name,system:h.os,vendor:e.appId,version:r.VERSION,cname:e.cname,sid:e.sid,session_id:Object(s.a)(),detail:"",proxyServer:d},function(t,n){g=!0;try{var i=Object.keys(n.test_tags)[0],a=JSON.parse(n.test_tags[i]);u=a[1]}catch(e){u=null}s.b.reportApiInvoke(e.sid,{name:"_config-distribute-request",options:{err:t,res:n}})(),lt[l]!==Rt.DISCONNECTED&&lt[l]!==Rt.DISCONNECTING?f&&p&&p(v,u):o.default.debug("[".concat(e.clientId,"] Request config success when connection state is ").concat(lt[l]))}),function(e,t,n){for(var i=(new Date).getTime(),a=!1,c=!0,d=function(n,r){if(a)s.b.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null},!1);else{if(clearTimeout(g),a=!0,o.default.debug("["+e.clientId+"] Get gateway address:",n.gateway_addr),e.proxyServer){for(var c=n.gateway_addr,d=0;d<c.length;d++){var u=c[d].split(":");n.gateway_addr[d]=e.proxyServer+"/ws/?h="+u[0]+"&p="+u[1]}o.default.debug("["+e.clientId+"] Get gateway address:",n.gateway_addr)}t(n),s.b.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null},!0)}},u=function(t,i,a){c&&(o.default.error("["+e.clientId+"]",t,i,a),a&&-1===b.indexOf(a)&&(c=!1,n(a)))},l=Object(r.getParameter)("WEBCS_DOMAIN"),p=0;p<l.length;++p){var f;if("string"==typeof l[p]){var m=l[p];f=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(m+"/api/v1"):"https://".concat(m,"/api/v1"),o.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(f)),pt(f,e,d,u)}else o.default.error("["+e.clientId+"] Invalid Host",l[p])}var g=setTimeout(function(){if(!a)for(var t=Object(r.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),n=0;n<t.length;++n)if("string"==typeof t[n]){var i=t[n];f=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(i+"/api/v1"):"https://".concat(i,"/api/v1"),o.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(f)),pt(f,e,d,u)}else o.default.error("["+e.clientId+"] Invalid Host",t[n])},1e3);setTimeout(function(){!a&&c&&n()},Object(r.getParameter)("WEBCS_BACKUP_CONNECT_TIMEOUT"))}(e,function(t){i=!0,f=!0,v=t,clearTimeout(a),lt[l]!==Rt.DISCONNECTED&&lt[l]!==Rt.DISCONNECTING?g&&p&&p(v,u):o.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(lt[l]))},function(i){return i?(o.default.info("["+e.clientId+"] Join failed: "+i),void(n&&n(i))):lt[l]===Rt.DISCONNECTED||lt[l]===Rt.DISCONNECTING?(o.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(lt[l])),void(n&&n("OPERATION_ABORT"))):(o.default.debug("["+e.clientId+"] Request gateway list will be restart in "+c+"s"),a=setTimeout(function(){t(d,p)},1e3*c),ut[l]=a,void(c=c>=3600?3600:2*c))})}};e.useProxyServer?function n(){!function(e,t){rt(e,function(n,i){if(n)return t&&t(n);o.default.debug("["+e.clientId+"] getProxyServerList: ",i),st(e,i,t)})}(e,function(i,r){if(i)return o.default.debug("["+e.clientId+"]",i),o.default.debug("["+e.clientId+"] Request proxy will be restart in "+d+"s"),a=setTimeout(function(){n()},1e3*d),ut[l]=a,void(d=d>=3600?3600:2*d);clearTimeout(a);var c=r.address;e.proxyServer=c,e.turnServer={mode:"manual",url:r.address,tcpport:r.serverResponse.tcpport||"3433",udpport:r.serverResponse.udpport||"3478",username:r.serverResponse.username||"test",credential:r.serverResponse.password||"111111",forceturn:!0},e.turnServer.tcpport+="",e.turnServer.udpport+="",s.b.setProxyServer(c),o.default.setProxyServer(c),p(c,t)})}():p(null,t)},mt=function(e,t,n,i){var a=Date.now();i=i||t.stringUid;var r={sid:t.sid,opid:10,appid:t.appId,string_uid:i};return new Promise(function(c,d){Object(nt.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),r,function(u){try{var l=JSON.parse(u),p=l.code}catch(c){var f="requestUserAccount failed with unexpected body "+u;return o.default.error("["+t.clientId+"]",f),d({retryable:!0,info:f,url:e}),n&&n.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:e,stringUid:i,uid:null,extend:u,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(p){var m=T[l.code%1e4]||"REQ_ACCOUNT_ERR_".concat(p);return n&&n.dispatchEvent({type:"error",reason:m}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:e,stringUid:i,uid:null,errorCode:m,extend:r}),d({retryable:!1,info:f="Get String Uid Failed ["+m+"]",url:e,error:m})}var g=l.uid;if(!(g>0&&g<Math.pow(2,32))){o.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(i," => ").concat(g),l);m="INVALID_UINT_UID_".concat(g);return n&&n.dispatchEvent({type:"error",reason:m}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:e,stringUid:i,uid:null,errorCode:m,extend:r}),d({retryable:!0,error:m,info:"Get String Uid failed ["+m+"]",url:e})}c({uid:g,url:e}),s.b.reqUserAccount(r.sid,{lts:a,success:!0,serverAddress:e,stringUid:i,uid:g,errorCode:null,extend:r})},function(e,t){if("timeout"===e.type){var o="USER_ACCOUNT_TIMEOUT";n&&n.dispatchEvent({type:"error",reason:o}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:t,stringUid:i,uid:null,errorCode:o,extend:r}),d({retryable:!0,info:o,url:t})}else{var c="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);n&&n.dispatchEvent({type:"error",reason:c}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:t,stringUid:i,uid:null,errorCode:c,extend:r}),d({retryable:!0,info:c,url:t})}},{"X-Packet-Service-Type":0,"X-Packet-URI":72})})},gt=function(e,t,n){Date.now();var a,s=Object(r.getParameter)("ACCOUNT_REGISTER"),c=!1,d=Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),u=null,l=null,p=new Promise(function(){var p=ue()(ce.a.mark(function p(f,m){var g,v,h;return ce.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:u=f,l=m,a=0;case 3:if(!(a<Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){p.next=33;break}if(!c){p.next=6;break}return p.abrupt("return");case 6:return g=s[a%s.length],v=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(s[i]+"/api/v1"):"https://".concat(g,"/api/v1"),p.prev=8,p.delegateYield(ce.a.mark(function i(){var a;return ce.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,mt(v,e,t,n);case 2:if(a=i.sent,!c){i.next=5;break}return i.abrupt("return",{v:void 0});case 5:c=!0,setTimeout(function(){o.default.debug("Get UserAccount Successfully",a),u(a)},0);case 7:case"end":return i.stop()}},i,this)})(),"t0",10);case 10:if(h=p.t0,"object"!==He()(h)){p.next=13;break}return p.abrupt("return",h.v);case 13:p.next=30;break;case 15:if(p.prev=15,p.t1=p.catch(8),!c){p.next=19;break}return p.abrupt("return");case 19:if(!p.t1.retryable){p.next=27;break}return(d=Math.ceil(d*Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(d=Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),o.default.error("".concat(p.t1.info," ").concat(p.t1.url," Will Fetch User Account in ").concat(d/1e3," seconds")),p.next=25,new Promise(function(e){setTimeout(e,d)});case 25:p.next=30;break;case 27:o.default.error("Get UserAccount Error: ".concat(p.t1.info," ").concat(p.t1.url),p.t1.error),c=!0,l(p.t1);case 30:a++,p.next=3;break;case 33:case"end":return p.stop()}},p,this,[[8,15]])}));return function(e,t){return p.apply(this,arguments)}}());return p.cancel=function(){c||(c=!0,l({info:"Request Cancelled",retryable:!1}))},p.isFinished=function(){return c},p},vt={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"recover",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},ht={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb"},St={};for(var _t in ht){var Et=ht[_t];St[Et]&&console.error("Key Conflict: ".concat(Et,": ").concat(ht[Et],"| ").concat(_t)),St[Et]=_t}var It=function(e){return ht[e]||e},yt=function(e){return St[e]||e};var Tt=function t(n){var i=!1,a=function(e){return{_type:"control",_message:e}},d=function(e,t){var n={};return Object.keys(t).forEach(function(e){Object(r.getParameter)("STATS_FILTER")[e]||(n[It(e)]=t[e])}),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:n}}},g=function(e){return{_type:"publish",_message:e}},v=function(e,t){var n={};return Object.keys(t).forEach(function(e){Object(r.getParameter)("STATS_FILTER")[e]||(n[It(e)]=t[e])}),{_type:"subscribe_stats",_message:{stream_id:e,stats:n}}},h=t.DISCONNECTED,_=t.CONNECTING,E=t.CONNECTED,I=t.DISCONNECTING,T=h,b=c(n);Object.defineProperty(b,"state",{set:function(e){var n=T;T=e,function(e,t){lt[e]=t}(b.clientId,e),n!==e&&b.dispatchEvent({type:"connection-state-change",prevState:t.connetionStateMap[n],curState:t.connetionStateMap[e]})},get:function(){return T}}),b.socket=void 0,b.state=h,b.mode=n.mode,b.role=n.role,b.codec=n.codec,b.config={},b.timers={},b.timer_counter={},b.localStreams={},b.remoteStreams={},b.remoteMuteState={},b.attemps=1,b.p2p_attemps=1,b.audioLevel={},b.activeSpeaker=void 0,b.reconnectMode="retry",b.rejoinAttempt=0,b.hasChangeBGPAddress=!1,b.traffic_stats={},b.clientId=n.clientId,b.pingpongCounter=0,b.hasInvokeLeave=!1,b.p2ps=new Map,b.liveStreams=new Map,b.injectLiveStreams=new Map,b.remoteStreamsInChannel=new Set,function(e){var t=tt;e.makeRequest=function(n,i,a){if(void 0===e.socket)return o.default.debug("[".concat(e.clientId,"] No socket available")),void t(a,V.INVALID_OPERATION);try{e.socket.emitRequest(n,function(e,t){var n;"success"===e?"function"==typeof i&&i(t):"function"==typeof a&&(n=t&&t.error_code&&y[t.error_code]?y[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,a(n,t))})}catch(i){o.default.debug("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(n))),o.default.debug("[".concat(e.clientId,"] "),i),t(a,V.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&o.default.debug("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(n){o.default.debug("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(b),b.inChannelInfo={joinAt:null,duration:0},b._sendMessage=function(e,t){switch(e){case"SubscribeStats":sendMessage(v.apply(void 0,et()(t)))}};var R=tt;b.p2pCounter=Object(ne.random)(1e5),b.generateP2PId=function(){return++b.p2pCounter},b.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},b.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},b.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},b.configPublisher=function(e){b.config=e},b.getGatewayInfo=function(e,t){b.makeRequest({_type:"gateway_info"},e,t)},b.setClientRole=function(e,t){o.default.debug("[".concat(b.clientId,"] setClientRole to ").concat(e));var n=s.b.reportApiInvoke(b.joinInfo.sid,{name:"_setClientRole",callback:t});b.makeRequest({_type:"set_client_role",_message:{role:e}},function(){b.role=e,b.dispatchEvent({type:"client-role-changed",role:e}),n&&n(null,{role:e})},function(t,i){if(i&&i.code&&(t=x[i.code]||"UNKNOW_ERROR_"+i.code),"ERR_ALREADY_IN_USE"===t)return n&&n(null);o.default.error("set Client role error to "+e+": "+t),n&&n(t)})},b.join=function(e,t,i,a){e.useProxyServer&&(b.hasChangeBGPAddress=!0);var c=(new Date).getTime(),d=e.uid;if(b.inChannelInfo.joinAt&&(b.inChannelInfo.duration+=c-b.inChannelInfo.joinAt),b.inChannelInfo.joinAt=c,b.state!==_)return o.default.error("[".concat(b.clientId,"] GatewayClient.join Failed: state "),b.state),a&&a(V.INVALID_OPERATION),void s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:V.INVALID_OPERATION,addr:null});if(null!=d&&parseInt(d)!==d)return o.default.error("[".concat(b.clientId,"] Input uid is invalid")),b.state=h,a&&a(V.INVALID_PARAMETER),void s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:V.INVALID_PARAMETER,addr:null});var u=bt.register(b,{uid:d,cname:e&&e.cname});if(u)return b.state=h,a&&a(u),void s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:u,addr:null});b.joinInfo=S()({},e),b.uid=d,b.key=t,b.pingpongCounter=0,N(e,function(t){var d,u,l,f;b.state=E,o.default.debug("[".concat(b.clientId,"] Connected to gateway server")),clearInterval(b.pingTimer),b.pingTimer=setInterval(function(){var e=Object(r.getParameter)("PING_PONG_TIME_OUT");if(++b.pingpongCounter>=e){var t=Date.now();b.socket&&o.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-b.socket.getLastMsgTime(),"ms")),b.socket&&b.socket.getLastMsgTime()&&t-b.socket.getLastMsgTime()>Object(r.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(b.pingpongCounter=0,b.socket.close(),b.socket.dispatchEvent(p({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var n=Date.now();b.makeRequest({_type:"ping"},function(){b.pingpongCounter=0;var e=Date.now()-n;setTimeout(function(){Object(r.getParameter)("REPORT_STATS")&&b.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})},1e3)},function(e,t){"TIMEOUT"!==e&&(o.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&b.socket&&b.socket.signal&&b.socket.signal.connection&&b.socket.signal.connection.readyState===WebSocket.OPEN&&(o.default.info("Disconnecting websocket connection"),b.socket.signal.connection.close()))})},3e3),b.makeRequest((d={role:b.role},u=d.role,l=S()({},b.joinInfo.apResponse),f={session_id:b.joinInfo.sid,app_id:n.appId,channel_key:b.key,channel_name:b.joinInfo.cname,sdk_version:r.VERSION,browser:navigator.userAgent,process_id:Object(s.a)(),mode:b.mode,codec:b.codec,role:u,has_changed_gateway:Object(r.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||b.hasChangeBGPAddress,ap_response:l,extend:Object(r.getParameter)("JOIN_EXTEND"),details:{}},b.joinInfo.hasOwnProperty("stringUid")&&(f.string_uid=b.joinInfo.stringUid),b.joinInfo.aesmode&&b.joinInfo.aespassword&&(f.aes_mode=b.joinInfo.aesmode,f.aes_secret=b.joinInfo.aespassword),b.socket&&b.socket.signal&&b.socket.signal&&(l.addresses[b.socket.signal.hostIndex]&&(f.ap_response.ticket=l.addresses[b.socket.signal.hostIndex].ticket,delete l.addresses),b.joinInfo.turnServer&&"auto"===b.joinInfo.turnServer.mode&&b.socket.signal.turnConfig&&(b.joinInfo.turnServer.url=b.socket.signal.turnConfig.url,b.socket.signal.turnConfig.tcpport&&(b.joinInfo.turnServer.tcpport=""+b.socket.signal.turnConfig.tcpport),b.socket.signal.turnConfig.udpport&&(b.joinInfo.turnServer.udpport=""+b.socket.signal.turnConfig.udpport)),o.default.debug("Turn config",b.joinInfo.turnServer)),b.dispatchEvent({type:"join-message-hook",joinMessage:f},!0),{_type:"join",_message:f}),function(t){if(s.b.joinGateway(e.sid,{lts:c,succ:!0,ec:null,vid:e.vid,addr:b.socket.getURL()}),b.rejoinAttempt=0,i&&i(t.uid),b.dispatchEvent({type:"join"}),b.leaveOnConnected){o.default.info("[".concat(b.clientId,"] Calling Leave() once joined"));var n=b.leaveOnConnected;b.leaveOnConnected=null,b.leave(n.onSuccess,n.onFailure)}},function(t,n){if(o.default.error("[".concat(b.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t)return b.dispatchEvent({type:"onMultiIP",option:n.option});if(vt[t]&&b.rejoinAttempt<4){if(b._doWithAction(vt[t],i,a),b.leaveOnConnected){o.default.error("[".concat(b.clientId,"] Calling Leave() once joined: Join Failed"));var r=b.leaveOnConnected;b.leaveOnConnected=null,r.onFailure(V.JOIN_CHANNEL_FAILED)}}else a&&a(t);s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:t,addr:b.socket.getURL()})})},function(t){o.default.error("[".concat(b.clientId,"] User join failed [").concat(t,"]")),a&&a(t),s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:t,addr:b.socket.getURL()})}),clearInterval(b.timers.trafficStats),b.timers.trafficStats=setInterval(function(){b.makeRequest({_type:"traffic_stats"},function(e){var t={};for(var n in e)t[yt(n)]=e[n];if(t.peer_delay&&t.peer_delay.length){var i=[];t.peer_delay.forEach(function(e){var t={};for(var n in e)t[yt(n)]=e[n];i.push(t)}),t.peer_delay=i}b.traffic_stats=t;var a=b.joinInfo.stringUid,r=b.localStreams[d]||b.localStreams[a];r&&(r.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach(function(e){var n=b.remoteStreams[e.peer_uid];n&&(n.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})}),b.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})})},3e3),this.remoteMuteState={},b.resetAudioVolumeIndication()},b.leave=function(e,t){switch(b.state){case h:return o.default.debug("[".concat(b.clientId,"] Client Already in DISCONNECTED status")),void R(e);case I:return o.default.error("[".concat(b.clientId,"] Client Already in DISCONNECTING status")),void R(t,V.INVALID_OPERATION);case _:if(b.leaveOnConnected)return o.default.error("[".concat(b.clientId,"] Client.leave() already called")),void R(t,V.INVALID_OPERATION);if(1==b.reconnectingCS)return;return o.default.debug("[".concat(b.clientId,"] Client connecting. Waiting for Client Fully Connected(And leave)")),void(b.leaveOnConnected={onSuccess:e,onFailure:t})}var n=bt.unregister(b);if(n)o.default.error("[".concat(b.clientId,"] "),n);else{for(var i in b.state=I,b.channelMediaConfig&&(b.channelMediaRelayController&&b.channelMediaRelayController.dispose(),b.channelMediaConfig,b.channelMediaRelayController=null),clearInterval(b.pingTimer),b.timers)b.timers.hasOwnProperty(i)&&clearInterval(b.timers[i]);for(var i in b.inChannelInfo.joinAt&&(b.inChannelInfo.duration+=Date.now()-b.inChannelInfo.joinAt,b.inChannelInfo.joinAt=null),b.makeRequest({_type:"leave"},function(t){b.socket.close(),b.socket=void 0,o.default.info("[".concat(b.clientId,"] Leave channel success")),b.state=h,e&&e(t)},function(e){"TIMEOUT"!==e&&(o.default.error("[".concat(b.clientId,"] Leave Channel Failed"),e),b.state=E,t&&t(e))}),b.localStreams)if(b.localStreams.hasOwnProperty(i)){var a=b.localStreams[i];delete b.localStreams[i],void 0!==a.pc&&(a.pc.close(),a.pc=void 0)}D()}},b.publish=function(e,t,n,i){var c=(new Date).getTime(),d=!1;if(e.publishLTS=c,"object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid local stream")),i&&i(V.INVALID_LOCAL_STREAM),void s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return o.default.error("[".concat(b.clientId,"] Invalid local media stream")),i&&i(V.INVALID_LOCAL_STREAM),void s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.INVALID_LOCAL_STREAM});if(b.state!==E)return o.default.error("[".concat(b.clientId,"] User is not in the session")),i&&i(V.INVALID_OPERATION),void s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.INVALID_OPERATION});var u=e.getAttributes()||{};if(e.local&&void 0===b.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var p=b.generateP2PId();if(b.p2ps.set(p,e),e.p2pId=p,void 0!==e.url)w(g({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes()},e.url),function(t,n){"success"===t?(e.getUserId()!==n&&e.setUserId(n),b.localStreams[n]=e,e.onClose=function(){b.unpublish(e)}):o.default.error("[".concat(b.clientId,"] Publish local stream failed"),t)});else{b.localStreams[e.getId()]=e,e.connectionSpec={callback:function(u){o.default.debug("[".concat(b.clientId,"] SDP exchange in publish : send offer --  "),JSON.parse(u)),b.makeRequest(g({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:p,sdp:u,audio:e.audio||e.screenAudio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,codec:b.codec,extend:Object(r.getParameter)("PUB_EXTEND")}),function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),o.default.info("[".concat(b.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){b.unpublish(e)},e._onAudioUnmute=function(){b.makeReport(a({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){b.makeReport(a({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){b.makeReport(a({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){b.makeReport(a({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(o.default.debug("[".concat(b.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(o.default.debug("[".concat(b.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()]+"_RelatedStats")),o.default.error("[".concat(b.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(p)),b.p2ps.delete(p),o.default.debug("[".concat(b.clientId,"] publish p2p failed: "),b.p2ps),!d)return d=!0,s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.PEERCONNECTION_FAILED}),b.dispatchEvent(l({type:"pubP2PLost",stream:e})),i&&i(V.PEERCONNECTION_FAILED);b.dispatchEvent(l({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(o.default.debug("[".concat(b.clientId,"] publish p2p connected: "),b.p2ps),e._isAudioMuted()?b.makeReport(a({action:"mute_local_audio",stream_id:e.getId()})):b.makeReport(a({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?b.makeReport(a({action:"mute_local_video",stream_id:e.getId()})):b.makeReport(a({action:"unmute_local_video",stream_id:e.getId()})),!d))return d=!0,s.b.publish(b.joinInfo.sid,{lts:c,succ:!0,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null}),n&&n()},o.default.debug("[".concat(b.clientId,"] SDP exchange in publish : receive answer --  "),JSON.parse(t.sdp)),e.pc.processSignalingMessage(t.sdp)},function(t,n){o.default.error("Publish Failed: ".concat(t)),s.b.publish(b.joinInfo.sid,{lts:c,succ:!0,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t}),"TIMEOUT"!=t&&(b.processPublishFailure(e),i&&i(t))})},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),isSubscriber:!1,stunServerUrl:b.stunServerUrl,turnServer:b.joinInfo.turnServer,maxAudioBW:u.maxAudioBW,minVideoBW:u.minVideoBW,maxVideoBW:u.maxVideoBW,mode:b.mode,codec:b.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,clientId:b.clientId},e.pc=ee(e.connectionSpec),e.pc.addStream(e.stream),o.default.debug("[".concat(b.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(n){var i={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:p,sdp:n};b.makeRequest(g(i),function(t){o.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)},function(e,t){o.default.error("Negotiation failed ".concat(e),t,i)})},clearInterval(b.timers[e.getId()]),b.timers[e.getId()]=setInterval(function(){if(Object(r.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate(function(n){n.forEach(function(n){if(n&&n.id&&!/_recv$/.test(n.id)&&!/^time$/.test(n.id)&&e.getUserId())if(-1===n.id.indexOf("outbound_rtp")&&-1===n.id.indexOf("OutboundRTP")||"video"!==n.mediaType||(n.googFrameWidthSent=e.videoWidth+"",n.googFrameHeightSent=e.videoHeight+""),e.getId()==e.getUserId()){var i=200*t;t++,setTimeout(function(){var e=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):b.makeReport(function(e){var t={};return Object.keys(e).forEach(function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[It(n)]=e[n])}),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(n))},i)}else{i=200*t;t++,setTimeout(function(){var e=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):b.makeReport(function(e){var t={};return Object.keys(e).forEach(function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[It(n)]=e[n])}),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(n))},i)}})})}},3e3);var f=function(){Object(r.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats(function(t){var n,i,a=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();a>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(a)):e.getId()===e.getUserId()?b.makeReport((n=t,i={},Object.keys(n).forEach(function(e){Object(r.getParameter)("STATS_FILTER")[e]||(i[It(e)]=n[e])}),{_type:"publish_related_stats",_message:{stream_type:"high",stats:i}})):b.makeReport(function(e){var t={};return Object.keys(e).forEach(function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[It(n)]=e[n])}),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))})};f(),clearInterval(b.timers[e.getId()+"_RelatedStats"]),b.timers[e.getId()+"_RelatedStats"]=setInterval(f,1e3)}}},b.unpublish=function(e,t,n,i){if("object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid local stream")),void R(i,V.INVALID_LOCAL_STREAM);if(b.state!==E)return o.default.error("[".concat(b.clientId,"] User not in the session")),void R(i,V.INVALID_OPERATION);if(null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()+"_RelatedStats"])),void 0!==b.socket)if(e.local&&void 0!==b.localStreams[e.getId()]){delete b.localStreams[e.getId()];var a={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};b.makeRequest({_type:"unpublish",_message:a}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,b.p2ps.delete(e.p2pId),b.dispatchEvent({type:"stream-unpublished",stream:e,options:t}),n&&n()}else o.default.error("[".concat(b.clientId,"] Invalid local stream")),R(i,V.INVALID_LOCAL_STREAM);else o.default.error("[".concat(b.clientId,"] User not in the session")),R(i,V.INVALID_OPERATION)},b.subscribe=function(e,t,n){var i=(new Date).getTime();e.subscribeLTS=i;var c=!1;if(o.default.info("[".concat(b.clientId,"] Gatewayclient ").concat(b.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid remote stream")),n&&n(V.INVALID_REMOTE_STREAM),void s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.INVALID_REMOTE_STREAM});if(b.state!==E&&(o.default.error("[".concat(b.clientId,"] User is not in the session")),!c))return c=!0,s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.INVALID_OPERATION}),n&&n(V.INVALID_OPERATION);if(!e.local&&b.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var p=b.generateP2PId();b.p2ps.set(p,e),e.p2pId=p,e.pc=ee({callback:function(t){o.default.debug("[".concat(b.clientId,"] SDP exchange in subscribe : send offer --  "),JSON.parse(t));var a={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,codec:b.codec,p2p_id:p,sdp:t,tcc:Object(r.getParameter)("SUBSCRIBE_TCC"),extend:Object(r.getParameter)("SUB_EXTEND")};b.makeRequest({_type:"subscribe",_message:a},function(t){o.default.debug("[".concat(b.clientId,"] SDP exchange in subscribe : receive answer --  "),JSON.parse(t.sdp)),e.pc.processSignalingMessage(t.sdp)},function(t,a){o.default.error("[".concat(b.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),a),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=t&&(b.processSubscribeFailure(e),n&&n(t))})},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:b.stunServerUrl,turnServer:b.joinInfo.turnServer,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),clientId:b.clientId}),e.pc.onaddstream=function(t,n){if(e._onAudioUnmute=function(){b.makeReport(a({action:"unmute_remote_audio",stream_id:e.getId()}),function(){},function(){})},e._onAudioMute=function(){b.makeReport(a({action:"mute_remote_audio",stream_id:e.getId()}),function(){},function(){})},e._onVideoUnmute=function(){b.makeReport(a({action:"unmute_remote_video",stream_id:e.getId()}),function(){},function(){})},e._onVideoMute=function(){b.makeReport(a({action:"mute_remote_video",stream_id:e.getId()}),function(){},function(){})},"ontrack"===n&&"video"===t.track.kind||"onaddstream"===n){o.default.info("[".concat(b.clientId,"] Remote stream subscribed with uid "),e.getId());var i=b.remoteStreams[e.getId()];if(b.remoteStreams[e.getId()].stream="onaddstream"===n?t.stream:t.streams[0],b.remoteStreams[e.getId()].hasVideo()){if(Object(m.isFireFox)()||Object(m.isSafari)()){var r=b.remoteStreams[e.getId()].stream;Object(ne.vsResHack)(r,function(t,n){e.videoWidth=t,e.videoHeight=n},function(e){return o.default.warning("[".concat(b.clientId,"] vsResHack failed: ")+e)})}}else{var s=b.remoteStreams[e.getId()];s.peerMuteVideo=!0,b._adjustPCMuteStatus(s)}i&&i.isPlaying()&&i.elementID&&(o.default.debug("[".concat(b.clientId,"] Reload Player ").concat(i.elementID," StreamId ").concat(i.getId())),e.audioOutput=i.audioOutput,i.stop(),e.play(i.elementID,i.playOptions)),delete e.audioLevelHelper;var c=u({type:"stream-subscribed",stream:b.remoteStreams[e.getId()]});b.dispatchEvent(c)}},clearInterval(b.timers[e.getId()]),b.timers[e.getId()]=setInterval(function(){if(Object(r.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate(function(n){n.forEach(function(n){if(n&&n.id){if(/_send$/.test(n.id)||/^time$/.test(n.id)||/^bweforvideo$/.test(n.id))return;-1===n.id.indexOf("inbound_rtp")&&-1===n.id.indexOf("inbound-rtp")||"video"!==n.mediaType||(n.googFrameWidthReceived=e.videoWidth+"",n.googFrameHeightReceived=e.videoHeight+"");var i=200*t;t++;var a=e.getId();setTimeout(function(){var e=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):b.makeReport(v(a,n))},i)}else;})})}},3e3),clearInterval(b.timers[e.getId()+"_RelatedStats"]),b.timers[e.getId()+"_RelatedStats"]=setInterval(function(){if(Object(r.getParameter)("REPORT_STATS")&&e&&e.pc){var t=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();if(t>Object(r.getParameter)("REPORT_STATS_TIMEOUT"))return void o.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats(function(t){b.makeReport(d(e.getId(),t))}),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats(function(t){b.makeReport(d(e.getId(),t))})}},1e3),b.audioLevel[e.getId()]=0,clearInterval(b.timers[e.getId()+"audio"]),b.timers[e.getId()+"audio"]=setInterval(function(){b.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats(function(t){t.forEach(function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var n in b.audioLevel[e.getId()]<20&&(b.audioLevel[e.getId()]+=1),b.audioLevel)n!==""+e.getId()&&b.audioLevel[n]>0&&(b.audioLevel[n]-=1);var i=Object.keys(b.audioLevel).sort(function(e,t){return b.audioLevel[t]-b.audioLevel[e]});if(b.activeSpeaker!==i[0]){var a=l({type:"active-speaker",uid:i[0]});b.dispatchEvent(a),b.activeSpeaker=i[0],o.default.debug("[".concat(b.clientId,"] Update active speaker: ").concat(b.activeSpeaker))}}})},50)},50),e.pc.oniceconnectionstatechange=function(a){if("failed"===a)null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()]+"audio")),o.default.error("[".concat(b.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(p)),o.default.debug("[".concat(b.clientId,"] subscribe p2p failed: "),b.p2ps),c||(c=!0,n&&n(V.PEERCONNECTION_FAILED),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.PEERCONNECTION_FAILED})),b.remoteStreams[e.getId()]&&b.p2ps.has(p)&&(b.p2ps.delete(p),b.dispatchEvent(l({type:"subP2PLost",stream:e})));else if("connected"===a&&(o.default.debug("[".concat(b.clientId,"] subscribe p2p connected: "),b.p2ps),!c)){c=!0,s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null}),b._adjustPCMuteStatus(e);var r=!1,d=setInterval(function(){e.pc?e.pc.getStats(function(t){t.forEach(function(t){-1!==t.id.indexOf("recv")&&"audio"===t.mediaType&&(parseInt(t.googDecodingNormal)>0||parseInt(t.audioOutputLevel)>0)&&(r||(r=!0,b.dispatchEvent({type:"first-audio-frame-decode",stream:e}),clearInterval(d),s.b.reportApiInvoke(b.joinInfo.sid,{name:"firstAudioDecode"})(null,{elapse:Date.now()-e.subscribeLTS})))})},100):clearInterval(d)},100),u=!1,f=setInterval(function(){e.pc?e.pc.getStats(function(t){t.forEach(function(t){-1===t.id.indexOf("recv")&&-1===t.id.indexOf("inbound_rtp")&&-1===t.id.indexOf("inbound-rtp")&&-1===t.id.indexOf("InboundRTP")||"video"===t.mediaType&&(t.framesDecoded>0||t.googFramesDecoded>0)&&(u||(u=!0,b.dispatchEvent({type:"first-video-frame-decode",stream:e}),clearInterval(f),e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,s.b.firstRemoteFrame(b.joinInfo.sid,{lts:(new Date).getTime(),peerid:e.getId(),succ:!0,width:+t.googFrameWidthReceived,height:+t.googFrameHeightReceived})))})},100):clearInterval(f)},100);return e.sid=b.joinInfo.sid,t&&t()}}}else o.default.error("[".concat(b.clientId,"] Invalid remote stream")),c||(c=!0,n&&n(V.INVALID_REMOTE_STREAM),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.INVALID_REMOTE_STREAM}));else o.default.error("[".concat(b.clientId,"] No such remote stream")),c||(c=!0,n&&n(V.NO_SUCH_REMOTE_STREAM),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.NO_SUCH_REMOTE_STREAM}))},b.subscribeChange=function(e,t,n){var i=Date.now();o.default.info("[".concat(b.clientId,"] Gatewayclient ").concat(b.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),b._adjustPCMuteStatus(e);var a={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};b.makeRequest({_type:"subscribe_change",_message:a},function(n){var a=u({type:"stream-subscribe-changed",stream:b.remoteStreams[e.getId()]});s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null}),b.dispatchEvent(a),t&&t()},function(t,i){o.default.error("[".concat(b.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,i),n&&n(t,i)})},b.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&b.p2ps.get(e.p2pId)===e&&b.p2ps.delete(e.p2pId),b.localStreams[e.getUserId()]===e&&delete b.localStreams[e.getUserId()],b.localStreams[e.getId()]===e&&delete b.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},b.processSubscribeFailure=function(e){e.p2pId&&b.p2ps.get(e.p2pId)===e&&b.p2ps.delete(e.p2pId),b.remoteStreams[e.getId()]===e&&delete b.remoteStreams[e.getId()],b.remoteStreams[e.getId()]===e&&delete b.remoteStreams[e.getId()],e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},b._adjustPCMuteStatus=function(e){!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach(function(t){if(t&&t.track&&"audio"===t.track.kind){var n=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(n=!1),t.track.enabled=!!n}else if(t&&t.track&&"video"===t.track.kind){var i=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(i=!1),t.track.enabled=!!i}})},b.unsubscribe=function(e,t,n){if("object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid remote stream")),void R(n,V.INVALID_REMOTE_STREAM);if(b.state!==E)return o.default.error("[".concat(b.clientId,"] User is not in the session")),void R(n,V.INVALID_OPERATION);if(null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()]+"audio")),null!=b.audioLevel[e.getId()]&&delete b.audioLevel[e.getId()],null!=b.timer_counter[e.getId()]&&delete b.timer_counter[e.getId()],b.remoteStreams.hasOwnProperty(e.getId())){if(!b.socket)return o.default.error("[".concat(b.clientId,"] User is not in the session")),void R(n,V.INVALID_OPERATION);if(e.local)return o.default.error("[".concat(b.clientId,"] Invalid remote stream")),void R(n,V.INVALID_REMOTE_STREAM);e.close();var i={stream_id:e.getId()};b.makeRequest({_type:"unsubscribe",_message:i}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,b.p2ps.delete(e.p2pId),o.default.info("[".concat(b.clientId,"] Unsubscribe stream success")),t&&t()}else R(n,V.NO_SUCH_REMOTE_STREAM)},b.setRemoteVideoStreamType=function(e,t){if(o.default.debug("[".concat(b.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===He()(e)&&null!==e)if(b.state===E){if(!e.local){switch(t){case b.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case b.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case b.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var n={stream_id:e.getId(),stream_type:t};b.makeRequest({_type:"switch_video_stream",_message:n},function(){o.default.debug("SwitchVideoStream Success ".concat(n.stream_id," ").concat(n.stream_type))},function(e,t){o.default.error("SwitchVideoStream Error ".concat(e," ").concat(n.stream_id," ").concat(n.stream_type),t)})}}else o.default.error("[".concat(b.clientId,"] User is not in the session"));else o.default.error("[".concat(b.clientId,"] Invalid remote stream"))},b.renewToken=function(e,t,n){e?b.key?b.state!==E?(o.default.debug("[".concat(b.clientId,"] Client is not connected. Trying to rejoin")),b.key=e,b.rejoin(),t&&t()):(o.default.debug("[".concat(b.clientId,"] renewToken from ").concat(b.key," to ").concat(e)),b.makeRequest({_type:"renew_token",_message:{token:e}},t,n)):(o.default.error("[".concat(b.clientId,"] Client is previously joined without token")),n&&n(V.INVALID_PARAMETER)):(o.default.error("[".concat(b.clientId,"] Invalid Token ").concat(e)),n&&n(V.INVALID_PARAMETER))},b.setStreamFallbackOption=function(e,t){if(o.default.debug("[".concat(b.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===He()(e)&&null!==e)if(b.state===E){if(!e.local){switch(t){case b.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case b.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case b.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var n={stream_id:e.getId(),fallback_type:t};b.makeRequest({_type:"set_fallback_option",_message:n},function(){o.default.debug("SetStreamFallbackOption success ".concat(n.stream_id," ").concat(t))},function(e,i){o.default.error("Failed to SetStreamFallbackOption ".concat(n.stream_id," ").concat(t," ").concat(e),i)})}}else o.default.error("[".concat(b.clientId,"] User is not in the session"));else o.default.error("[".concat(b.clientId,"] Invalid remote stream"))},b.enableAudioVolumeIndicator=function(e,t){b.audioVolumeIndication.enabled=!0,b.audioVolumeIndication.interval=e,b.audioVolumeIndication.smooth=t,b.resetAudioVolumeIndication()},b.resetAudioVolumeIndication=function(){if(clearInterval(b.timers.audioVolumeIndication),clearInterval(b.timers.audioVolumeSampling),b.audioVolumeIndication.enabled&&b.audioVolumeIndication.interval){var e=Math.floor(1e3*b.audioVolumeIndication.smooth/100);clearInterval(b.timers.audioVolumeSampling),b.timers.audioVolumeSampling=setInterval(function(){b.audioVolumeSampling||(b.audioVolumeSampling={});var t={};for(var n in b.remoteStreams){var i=b.remoteStreams[n];if(i.stream&&i.hasAudio()){var a=i.getAudioLevel();a>0&&a<1&&(a*=100);var r=b.audioVolumeSampling[n]||[];for(r.push(a);r.length>e;)r.shift();t[n]=r}}b.audioVolumeSampling=t},100),clearInterval(b.timers.audioVolumeIndication),b.timers.audioVolumeIndication=setInterval(function(){if(b.socket&&b.socket.signal&&b.socket.signal.connection&&b.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in b.remoteStreams)if(b.audioVolumeSampling&&b.audioVolumeSampling[t]){var n=b.audioVolumeSampling[t],i=0;n.forEach(function(e){i+=e});var a={uid:t,level:Math.floor(i/n.length)};a.level&&e.push(a)}var r=e.sort(function(e,t){return e.level-t.level});o.default.debug("[".concat(b.clientId,"] volume-indicator "),JSON.stringify(r)),b.audioVolumeIndication.sortedAudioVolumes=r;var s=l({type:"volume-indicator",attr:r});b.dispatchEvent(s)}},b.audioVolumeIndication.interval)}},b.closeGateway=function(){o.default.debug("[".concat(b.clientId,"] close gateway")),b.state=h,b.socket.close(),O()},b.startChannelMediaRelay=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,r;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.channelMediaRelayController){e.next=2;break}throw new Ke.ChannelMediaError("RELAY_ALREADY_START","",Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return n=function(e){b.dispatchEvent({type:"channel-media-relay-event",code:e})},i=function(e,t,n){e===Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===Ke.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(b.channelMediaRelayController.dispose(),b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:e,code:t,data:n})},b.channelMediaRelayController=new ze.a(b.joinInfo,b.clientId),b.channelMediaRelayController.on("event",n),b.channelMediaRelayController.on("state",i),e.prev=7,e.next=10,b.channelMediaRelayController.startChannelMediaRelay(t);case 10:e.next=22;break;case 12:throw e.prev=12,e.t0=e.catch(7),o.default.debug("[".concat(b.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),a=Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,r="",r=e.t0 instanceof Ke.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===Ke.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",b.dispatchEvent({type:"channel-media-relay-state",state:a,code:Ke.CHANNEL_MEDIA_RELAY_ERROR[r]}),b.channelMediaRelayController&&(b.channelMediaRelayController.dispose(),b.channelMediaConfig=null,b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new Ke.ChannelMediaError(r,null,Ke.CHANNEL_MEDIA_RELAY_ERROR[r]);case 22:b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),b.channelMediaConfig=t;case 24:case"end":return e.stop()}},e,this,[[7,12]])}));return function(t){return e.apply(this,arguments)}}(),b.updateChannelMediaRelay=function(){var t=ue()(ce.a.mark(function t(n){var i,a;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b.channelMediaRelayController){t.next=2;break}throw new Ke.ChannelMediaError("RELAY_NOT_START",null,Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,b.channelMediaRelayController.updateChannelMediaRelay(n);case 5:t.next=18;break;case 7:throw t.prev=7,t.t0=t.catch(2),o.default.debug("[".concat(b.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),i=Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,a="",a=e instanceof Ke.ChannelMediaError?e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===Ke.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===Ke.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",b.dispatchEvent({type:"channel-media-relay-event",code:Ke.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),b.dispatchEvent({type:"channel-media-relay-state",state:i,code:Ke.CHANNEL_MEDIA_RELAY_ERROR[a]}),b.channelMediaRelayController&&(b.channelMediaRelayController.dispose(),b.channelMediaConfig=null,b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new Ke.ChannelMediaError(a,null,Ke.CHANNEL_MEDIA_RELAY_ERROR[a]);case 18:b.channelMediaConfig=n;case 19:case"end":return t.stop()}},t,this,[[2,7]])}));return function(e){return t.apply(this,arguments)}}(),b.stopChannelMediaRelay=ue()(ce.a.mark(function t(){var n,i;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b.channelMediaRelayController){t.next=2;break}throw new Ke.ChannelMediaError("RELAY_NOT_START",null,Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,b.channelMediaRelayController.stopChannelMediaRelay();case 5:t.next=17;break;case 7:throw t.prev=7,t.t0=t.catch(2),o.default.debug("[".concat(b.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),n=Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,i="",i=e instanceof Ke.ChannelMediaError?e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",b.dispatchEvent({type:"channel-media-relay-state",state:n,code:Ke.CHANNEL_MEDIA_RELAY_ERROR[i]}),b.channelMediaRelayController&&(b.channelMediaRelayController.dispose(),b.channelMediaConfig=null,b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new Ke.ChannelMediaError(i,null,Ke.CHANNEL_MEDIA_RELAY_ERROR[i]);case 17:b.channelMediaConfig=null,b.channelMediaRelayController=null;case 19:case"end":return t.stop()}},t,this,[[2,7]])}));var A=function(){o.default.debug("[".concat(b.clientId,"] Reconnect gateway")),b.state=h,b.socket.close(),O(),b.reconnectMode="recover",b.state=_,C()};b.recover=A;var O=function(){for(var e in b.dispatchEvent({type:"before-clear-connection"}),b.timers)b.timers.hasOwnProperty(e)&&clearInterval(b.timers[e]);for(var e in b.remoteStreams)if(b.remoteStreams.hasOwnProperty(e)){var t=b.remoteStreams[e],n=l({type:"stream-removed",uid:t.getId(),stream:t});b.dispatchEvent(n)}b.p2ps.clear(),D(),k(),clearInterval(b.pingTimer)};b.rejoin=function(){b.socket&&(clearInterval(b.pingTimer),b.socket.close(),b.socket=void 0),b.state=_,C()};var C=function(e,t){b.dispatchEvent(l({type:"rejoin-start"})),e=e||function(e){o.default.info("[".concat(b.clientId,"] User ").concat(e," is re-joined to ").concat(b.joinInfo.cname)),b.dispatchEvent(l({type:"rejoin"})),b.channelMediaConfig&&b.startChannelMediaRelay(b.channelMediaConfig).then(function(){o.default.debug("[".concat(b.clientId,"] restartChannelMediaRelay success"))}).catch(function(e){o.default.debug("[".concat(b.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(e)))}),b.liveStreams&&b.liveStreams.size&&b.liveStreams.forEach(function(e,t){e&&b.setLiveTranscoding(b.transcoding),b.startLiveStreaming(t,e)}),b.injectLiveStreams&&b.injectLiveStreams.size&&b.injectLiveStreams.forEach(function(e,t){b.addInjectStreamUrl(t,e)})},t=t||function(e){o.default.error("[".concat(b.clientId,"] Re-join to channel failed "),e),b.dispatchEvent(u({type:"error",reason:e}))},b.key?(++b.rejoinAttempt,b.join(b.joinInfo,b.key,e,t)):o.default.error("[".concat(b.clientId,"] Connection recover failed [Invalid channel key]"))},N=function(e,t,n){if(b.onConnect=t,b.socket){if(b.dispatchEvent({type:"reconnect"}),"retry"===b.reconnectMode)o.default.debug("[".concat(b.clientId,"] Retry current gateway")),b.socket.reconnect();else if("tryNext"===b.reconnectMode)o.default.debug("[".concat(b.clientId,"] Try next gateway")),b.socket.connectNext();else if("recover"===b.reconnectMode){o.default.debug("[".concat(b.clientId,"] Recover gateway")),o.default.debug("[".concat(b.clientId,"] Try to reconnect choose server and get gateway list again ")),b.reconnectingCS=!0;var a=b.joinInfo&&b.joinInfo.sid;ft(b.joinInfo,function(e){o.default.debug("[".concat(b.clientId,"] session:  ").concat(a," get gateway list success")),b.joinInfo.apResponse=e.res,b.reconnectingCS?b.socket.replaceHost(e.gateway_addr):o.default.debug("[".concat(b.clientId,"] session:  ").concat(a," already leave"))})}}else c=e.gatewayAddr,b.socket=at(c,{sid:b.joinInfo.sid,clientId:b.clientId}),b.socket.on("start-connection",function(e){b.ticket=e&&e.msg&&e.msg.ticket}),b.socket.on("on_uplink_stats",function(e){var t={};for(var n in e)t[yt(n)]=e[n];if(b.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,b.localStreams[b.uid]){var i=b.localStreams[b.uid].uplinkStats;i&&i.period_fir===t.period_fir||o.default.debug("[".concat(b.clientId,"]: Period fir change to: ").concat(t.period_fir)),b.localStreams[b.uid].uplinkStats=t}}),b.socket.on("connect",function(){b.dispatchEvent({type:"connected"}),b.attemps=1,b.onConnect()}),b.socket.on("recover",function(){b.state=_,o.default.debug("[".concat(b.clientId,"] Try to reconnect choose server and get gateway list again ")),b.reconnectingCS=!0,b.leaveOnConnected=null;var e=b.joinInfo&&b.joinInfo.sid;ft(b.joinInfo,function(t){o.default.debug("[".concat(b.clientId,"] session:  ").concat(e," get gateway list success")),b.reconnectingCS?b.socket.replaceHost(t.gateway_addr):o.default.debug("[".concat(b.clientId,"] session:  ").concat(e," already leave"))})}),b.socket.on("disconnect",function(e){if(o.default.debug("[".concat(b.clientId,"] Receive disconnect message")),b.state!==h){b.state=h;var t=u({type:"error",reason:V.SOCKET_DISCONNECTED});if(b.dispatchEvent(t),0===b.p2ps.size?b.reconnectMode="tryNext":b.reconnectMode="retry",O(),b.channelMediaRelayController&&b.channelMediaRelayController.dispose(),b.channelMediaRelayController=null,1!=i){var n,a=(n=b.attemps,1e3*Math.min(30,Math.pow(2,n)-1));if(o.default.error("[".concat(b.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(b.attemps,"] after ").concat(a/1e3," seconds")),b.hasInvokeLeave)return o.default.debug("[".concat(b.clientId,"] No reconnection becase client.leave has been invoked")),void(b.hasInvokeLeave=!1);setTimeout(function(){b.attemps++,b.state=_,b.inChannelInfo&&Date.now()-b.inChannelInfo.joinAt>Object(r.getParameter)("TICKET_RENEW_TIMEOUT")?(o.default.debug("Recovering to renew ticket"),A()):C()},a)}}}),b.socket.on("on_add_audio_stream",function(e){if(o.default.info("[".concat(b.clientId,"] Newly added audio stream with uid ").concat(e.uid)),b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),b.remoteStreamsInChannel.has(e.uid)||b.remoteStreamsInChannel.add(e.uid),void 0===b.remoteStreams[e.uid]){var t=Ye({streamID:e.uid,local:!1,audio:e.audio,video:e.video});t.peerMuteVideo=!0,b.remoteStreams[e.uid]=t;var n=u({type:"stream-added",stream:t});b.dispatchEvent(n);var i=b.remoteMuteState[e.uid];if(i&&i.audio){n=l({type:"mute-audio",uid:e.uid});b.dispatchEvent(n)}if(i&&i.video){n=l({type:"mute-video",uid:e.uid});b.dispatchEvent(n)}}}),b.socket.on("on_update_stream",function(e){var t=b.remoteStreams[e.uid];if(b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&b._adjustPCMuteStatus(t);var n=u({type:"stream-updated",stream:t});b.dispatchEvent(n)}else o.default.debug("[".concat(b.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid))}),b.socket.on("on_add_video_stream",function(e){if(o.default.info("[".concat(b.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),b.remoteStreamsInChannel.has(e.uid)||b.remoteStreamsInChannel.add(e.uid),void 0===b.remoteStreams[e.uid]){var t=Ye({streamID:e.uid,local:!1,audio:e.audio,video:e.video});b.remoteStreams[e.uid]=t;var n=u({type:"stream-added",stream:t});b.dispatchEvent(n);var i=b.remoteMuteState[e.uid];if(i&&i.audio){n=l({type:"mute-audio",uid:e.uid});b.dispatchEvent(n)}if(i&&i.video){n=l({type:"mute-video",uid:e.uid});b.dispatchEvent(n)}}else{var a=b.remoteStreams[e.uid];if(void 0!==a.stream){if((t=b.remoteStreams[e.uid]).video=!0,t.peerMuteVideo=!1,t.pc&&b._adjustPCMuteStatus(t),o.default.info("[".concat(b.clientId,"] Stream changed: enable video ").concat(e.uid)),t.isPlaying()){var r=t.player.elementID;t.stop(),t.play(r,t.playOptions)}}else if(a.p2pId)b.remoteStreams[e.uid].video=!0;else{t=Ye({streamID:e.uid,local:!1,audio:!0,video:!0});b.remoteStreams[e.uid]=t,o.default.info("[".concat(b.clientId,"] Stream changed: modify video ").concat(e.uid))}}}),b.socket.on("on_remove_stream",function(e){b.remoteStreamsInChannel.has(e.uid)&&b.remoteStreamsInChannel.delete(e.uid);var t=b.remoteStreams[e.uid];if(t){delete b.remoteStreams[e.uid],delete b.remoteMuteState[e.uid];var n=u({type:"stream-removed",stream:t});b.dispatchEvent(n),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,b.p2ps.delete(t.p2pId))}else o.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)}),b.socket.on("on_publish_stream",function(e){var t=b.localStreams[e.uid],n=u({type:"streamPublished",stream:t});b.dispatchEvent(n)}),b.socket.on("mute_audio",function(e){o.default.info("[".concat(b.clientId,"] rcv peer mute audio: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].audio=!0;var t=l({type:"mute-audio",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteAudio=!0,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("unmute_audio",function(e){o.default.info("[".concat(b.clientId,"] rcv peer unmute audio: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].audio=!1;var t=l({type:"unmute-audio",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteAudio=!1,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("mute_video",function(e){o.default.info("[".concat(b.clientId,"] rcv peer mute video: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].video=!0;var t=l({type:"mute-video",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteVideo=!0,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("unmute_video",function(e){o.default.info("[".concat(b.clientId,"] rcv peer unmute video: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].video=!1;var t=l({type:"unmute-video",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteVideo=!1,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("on_crypt_error",function(e){o.default.warning("[".concat(b.clientId,"] stream crypt error"));var t=l({type:"crypt-error",cryptType:e.crypt_type});b.dispatchEvent(t)}),b.socket.on("on_user_banned",function(e){o.default.info("[".concat(b.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=l({type:"client-banned",uid:e.uid,attr:e.error_code});b.dispatchEvent(t),i=!0}),b.socket.on("on_stream_fallback_update",function(e){o.default.info("[".concat(b.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=l({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});b.dispatchEvent(t)}),b.socket.on("stream_recover",function(e){o.default.info("[".concat(b.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=l({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});b.dispatchEvent(t)}),b.socket.on("on_p2p_lost",function(e){o.default.debug("[".concat(b.clientId,"] p2plost: "),e,"p2ps:",b.p2ps);var t,n="DTLS failed";(t=b.localStreams[e.uid]||b.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(n="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&s.b.publish(b.joinInfo.sid,{lts:t.publishLTS,succ:!1,audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:n}),"subscribe"===e.event&&s.b.subscribe(b.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:n})):o.default.warning("P2PLost Stream Not found",e),o.default.debug("[".concat(b.clientId,"] p2plost:"),e.p2pid),(t=b.p2ps.get(e.p2pid))&&(b.p2ps.delete(e.p2pid),t.local?b.dispatchEvent(l({type:"pubP2PLost",stream:t,attr:n})):b.remoteStreams[t.getId()]&&b.dispatchEvent(l({type:"subP2PLost",stream:t,attr:n})))}),b.socket.on("on_token_privilege_will_expire",function(e){o.default.debug("[".concat(b.clientId,"] Received Message onTokenPrivilegeWillExpire")),b.dispatchEvent(l({type:"onTokenPrivilegeWillExpire"}))}),b.socket.on("on_token_privilege_did_expire",function(){o.default.warning("[".concat(b.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),b.closeGateway(),b.dispatchEvent(l({type:"onTokenPrivilegeDidExpire"}))}),b.socket.on("enable_local_video",function(e){b.dispatchEvent(l({type:"enable-local-video",uid:e.uid}))}),b.socket.on("disable_local_video",function(e){b.dispatchEvent(l({type:"disable-local-video",uid:e.uid}))}),b._doWithAction=function(e,t,n){"tryNext"===e?function(e,t){o.default.debug("[".concat(b.clientId,"] Connect next gateway")),b.state=h,b.socket.close(),O(),b.reconnectMode="tryNext",C(e,t)}(t,n):"retry"===e?function(e,t){o.default.debug("[".concat(b.clientId,"] Reconnect gateway")),b.state=h,b.socket.close(),O(),b.reconnectMode="retry",C(e,t)}(t,n):"quit"===e?(o.default.debug("[".concat(b.clientId,"] quit gateway")),b.state=h,b.socket.close(),O()):"recover"===e&&A()},b.socket.on("on_notification",function(e){if(o.default.debug("[".concat(b.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===y[e.code])return b.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?b._doWithAction(vt[y[e.code]]):e.action&&b._doWithAction(e.action)}),b.socket.on("on_user_offline",function(e){var t=l({type:"peer-leave",uid:e.uid});if(b.remoteStreamsInChannel.has(e.uid)&&b.remoteStreamsInChannel.delete(e.uid),b.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=b.remoteStreams[e.uid]),t.reason=e.reason,b.dispatchEvent(t),b.remoteStreams.hasOwnProperty(e.uid)){o.default.info("[".concat(b.clientId,"] closing stream on peer leave"),e.uid);var n=b.remoteStreams[e.uid];n.close(),delete b.remoteStreams[e.uid],void 0!==n.pc&&(n.pc.close(),n.pc=void 0,b.p2ps.delete(n.p2pId))}b.timers.hasOwnProperty(e.uid)&&(clearInterval(b.timers[e.uid]),clearInterval(b.timers[e.uid]+"_RelatedStats"),delete b.timers[e.uid]),null!=b.audioLevel[e.uid]&&delete b.audioLevel[e.uid],null!=b.timer_counter[e.uid]&&delete b.timer_counter[e.uid]}),b.socket.on("onUplinkStats",function(e){}),b.socket.on("liveStreamingStarted",function(e){var t=f({type:"liveStreamingStarted",url:e.url});b.dispatchEvent(t)}),b.socket.on("liveStreamingFailed",function(e){var t=f({type:"liveStreamingFailed",url:e.url});b.dispatchEvent(t)}),b.socket.on("liveStreamingStopped",function(e){var t=f({type:"liveStreamingStopped",url:e.url});b.dispatchEvent(t)}),b.socket.on("liveTranscodingUpdated",function(e){var t=f({type:"liveTranscodingUpdated",reason:e.reason});b.dispatchEvent(t)}),b.socket.on("streamInjectedStatus",function(e){var t=f({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});b.dispatchEvent(t)}),b.socket.on("on_user_online",function(e){b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),b.dispatchEvent({type:"peer-online",uid:e.uid})});var c},w=function(e,t){if(void 0!==b.socket)try{b.socket.emitSimpleMessage(e,function(e,n){t&&t(e,n)})}catch(e){o.default.error("[".concat(b.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else o.default.error("[".concat(b.clientId,"] Error in sendSimpleSdp [socket not ready]"))},k=function(){for(var e in b.localStreams)if(void 0!==b.localStreams[e]){var t=b.localStreams[e];delete b.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},D=function(){for(var e in b.remoteStreamsInChannel.clear(),b.remoteStreams)if(b.remoteStreams.hasOwnProperty(e)){var t=b.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete b.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return b},bt={_gatewayClients:{},register:function(e,t){if(!t.uid){var n="NO_UID_PROVIDED";return o.default.error("[".concat(e.clientId,"] "),n,t),n}if(t.cname){if(this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e){n="UID_CONFLICT";return o.default.error("[".concat(e.clientId,"] "),n,t),n}return o.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null}var n="NO_CHANNEL_PROVIDED";return o.default.error("[".concat(e.clientId,"] "),n,t),n},unregister:function(e){var t=e&&e.uid,n=e.joinInfo&&e.joinInfo.cname;if(!t||!n){var i="INVALID_GATEWAYCLIENT";return o.default.error("[".concat(e.clientId,"] "),i),i}if(this._gatewayClients[n]&&this._gatewayClients[n][t]){if(this._gatewayClients[n][t]!==e){i="GATEWAYCLIENT_UID_CONFLICT";return o.default.error("[".concat(e.clientId,"] "),i),i}return o.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[n][t],null}var i="GATEWEAY_CLIENT_UNREGISTERED";o.default.error("[".concat(e.clientId,"] "),i)}};Tt.DISCONNECTED=0,Tt.CONNECTING=1,Tt.CONNECTED=2,Tt.DISCONNECTING=3,Tt.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"};var Rt=Tt,At=function(e){var t;switch(e){case"120p":case"120p_1":t=["120p_1","120p_1","120p_1"];break;case"120p_3":t=["120p_3","120p_3","120p_3"];break;case"180p":case"180p_1":t=["90p_1","90p_1","180p_1"];break;case"180p_3":t=["120p_3","120p_3","180p_3"];break;case"180p_4":t=["120p_1","120p_1","180p_4"];break;case"240p":case"240p_1":t=["120p_1","120p_1","240p_1"];break;case"240p_3":t=["120p_3","120p_3","240p_3"];break;case"240p_4":t=["120p_4","120p_4","240p_4"];break;case"360p":case"360p_1":case"360p_4":case"360p_9":case"360p_10":case"360p_11":t=["90p_1","90p_1","360p_1"];break;case"360p_3":case"360p_6":t=["120p_3","120p_3","360p_3"];break;case"360p_7":case"360p_8":t=["120p_1","120p_1","360p_7"];break;case"480p":case"480p_1":case"480p_2":case"480p_4":case"480p_10":t=["120p_1","120p_1","480p_1"];break;case"480p_3":case"480p_6":t=["120p_3","120p_3","480p_3"];break;case"480p_8":case"480p_9":t=["120p_4","120p_4","480p_8"];break;case"720p":case"720p_1":case"720p_2":case"720p_3":t=["90p_1","90p_1","720p_1"];break;case"720p_5":case"720p_6":t=["120p_1","120p_1","720p_5"];break;case"1080p":case"1080p_1":case"1080p_2":case"1080p_3":case"1080p_5":t=["90p_1","90p_1","1080p_1"];break;case"1440p":case"1440p_1":case"1440p_2":t=["90p_1","90p_1","1440p_1"];break;case"4k":case"4k_1":case"4k_3":t=["90p_1","90p_1","4k_1"];break;default:t=["120p_1","120p_1","360p_7"]}return Object(m.isOpera)()?[e,15,50]:Object(m.isFireFox)()?[t[1],15,100]:Object(m.isSafari)()?[t[2],15,50]:[t[0],15,50]},Ot={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},Ct={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},Nt=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var n=parseInt(t.attributes.maxFrameRate),i=parseInt(e.googFrameRateInput);return!n||!i||!(n>10&&i<5||n<10&&n>=5&&i<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,n,i,a,r){i[e]||(i[e]={isPrevNormal:!0,record:[]});var o=i[e],s=t["check"+e](n,r);if(o.record.push(s),o.record.length>=5){o.isCurNormal=-1!==o.record.indexOf(!0);var c=Ct[e];o.isPrevNormal&&!o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c,msg:Ot[c],uid:a}),!o.isPrevNormal&&o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c+2e3,msg:Ot[c+2e3],uid:a}),o.isPrevNormal=o.isCurNormal,o.record=[]}},t.setLocalStats=function(e){var n={};Object.keys(e).map(function(i){var a=e[i],r=t.gatewayClient.localStreams[parseInt(i)],o=t.localStreamStorage[i]||{};r&&r.hasVideo()&&(t.record("SendVideoBitrate",a.videoStats,o,i),t.record("FramerateInput",a.videoStats,o,i,r),t.record("FramerateSent",a.videoStats,o,i)),r&&r.hasAudio()&&(t.record("AudioIntputLevel",a.audioStats,o,i),t.record("SendAudioBitrate",a.audioStats,o,i)),n[i]=o}),t.localStreamStorage=n},t.setRemoteStats=function(n){var i={};Object.keys(n).map(function(a){var r=n[a],o=e.remoteStreams[a],s=t.remoteStreamStorage[a]||{};o&&o.hasVideo()&&o.isPlaying()&&t.record("VideoDecode",r.videoStats,s,a),o&&o.hasAudio()&&o.isPlaying()&&(t.record("AudioOutputLevel",r.audioStats,s,a),t.record("AudioDecode",r.audioStats,s,a)),i[a]=s}),t.remoteStreamStorage=i},t},wt=new function(){var e=c();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,n){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var i=e._getNetworkInfo();e.type=i&&i.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,n&&n("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),n=t&&t.type||"UNSUPPORTED",i=Date.now();if(n!==e.type){e.lastTypeChangedAt=i,"none"==n?e.lastDisconnectedAt=i:"none"==e.type&&(e.lastConnectedAt=i),e.type=n;var a={type:"networkTypeChanged",networkType:n};e.dispatchEvent(a)}},e.getStats=function(t,n){var i={},a=e._getNetworkInfo();a&&(i.NetworkType=a.type||"UNSUPPORTED"),setTimeout(function(){t(i)},0)},e._init(function(){navigator.connection.addEventListener("change",function(){e._reloadNetworkInfo()}),e.networkChangeTimer=setInterval(function(){e._reloadNetworkInfo()},5e3)},function(e){}),e},kt="DISCONNECTING",Dt="DISCONNECTED",Lt="CONNECTED",Mt="INIT",Pt=[],xt=(setInterval(function(){Date.now();Pt.forEach(function(e){for(var t=e.requests.length-1;t>=0;t--){var n=e.requests[t];n.timeoutCnt++,n.timeoutCnt>=15&&(e.requests.splice(t,1),n.promises.reject({reason:"TIMEOUT",code:499}))}})},1e3),1),Vt=1,Ut=1,jt=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,s,c,d,u;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,i=t.url,a=t.serviceName,s=t.sid,c=t.appId,d=t.cname,u=t.timeout,e.abrupt("return",new Promise(function(e,t){var l=!1,p=new XMLHttpRequest;p.open("POST",i,!0),p.setRequestHeader("Content-Type","application/json; charset=utf-8"),p.setRequestHeader("X-Packet-Service-Type","0"),p.setRequestHeader("X-Packet-URI","61"),p.onload=function(){if(!l){var n=null,i=null;try{n=JSON.parse(p.responseText)}catch(e){var a="Invalid text ".concat(p.responseText);return o.default.error(a),l=!0,t(a)}if(n.code){var r="AP_ERR_".concat(n.code);return o.default.error(r,n),l=!0,t(r)}try{i=JSON.parse(n.json_body||n.json)}catch(e){var s="Invalid json_body ".concat(p.responseText);return o.default.error(s),l=!0,t(s)}if(200!==i.code){var c="APPCENTER_CODE_".concat(i.code);return o.default.error(c,i),l=!0,t(c)}if(!(i.servers&&i.servers.length>0)){return o.default.error("APPCENTER_EMPTY_SERVER",i),l=!0,t("APPCENTER_EMPTY_SERVER")}return l=!0,e(i)}},p.onerror=function(e){var n="AP_REUEST_".concat(e.type);o.default.error(n,i,e),l||(l=!0,t(n))},p.ontimeout=function(e){o.default.error("AP_REUEST_TIMEOUT",i,e),l||(l=!0,t("AP_REUEST_TIMEOUT"))},u&&(p.timeout=u),p.send(JSON.stringify({service_name:a,json_body:JSON.stringify({command:"convergeAllocateEdge",sid:s,uid:n+"",appId:c,ts:Math.floor(Date.now()/1e3),seq:xt++,cname:d,version:r.VERSION,requestId:Vt++})}))}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,s,c,d,u,l,p,f,m,g;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.serviceName,i=t.sid,a=t.appId,s=t.cname,c=t.uid,d=null,e.t0=ce.a.keys(Object(r.getParameter)("UAP_AP"));case 3:if((e.t1=e.t0()).done){e.next=34;break}return u=e.t1.value,l="https://".concat(Object(r.getParameter)("UAP_AP")[u],"/api/v1?action=uap"),p=void 0,e.prev=7,e.next=10,jt({uid:c,url:l,appId:a,sid:i,serviceName:n,cname:s,timeout:Object(r.getParameter)("HTTP_CONNECT_TIMEOUT")});case 10:p=e.sent,e.next=18;break;case 13:return e.prev=13,e.t2=e.catch(7),o.default.error(e.t2),d=e.t2,e.abrupt("continue",3);case 18:f=ce.a.mark(function e(t){var i,a,r;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.servers[t],a="wss://".concat(i.address.replace(/\./g,"-"),".edge.").concat(t%2==0?"agora.io":"agoraio.cn",":").concat(i.wss,"?serviceName=").concat(encodeURIComponent(n)),i.wss){e.next=5;break}return o.default.error("Invalid server response",i),e.abrupt("return","continue");case 5:return e.prev=5,e.next=8,new Promise(function(e,t){var n=new WebSocket(a),i=!1;n.addEventListener("open",function(){i||(i=!0,e(n))}),n.addEventListener("error",function(e){i||(i=!0,t(e))})});case 8:return(r=e.sent).workerToken=p.workerToken,e.abrupt("return",{v:r});case 13:e.prev=13,e.t0=e.catch(5),o.default.error(e.t0),d=e.t0;case 17:case"end":return e.stop()}},e,this,[[5,13]])}),m=0;case 20:if(!(m<p.servers.length)){e.next=32;break}return e.delegateYield(f(m),"t3",22);case 22:g=e.t3,e.t4=g,e.next="continue"===e.t4?26:27;break;case 26:return e.abrupt("continue",29);case 27:if("object"!==He()(g)){e.next=29;break}return e.abrupt("return",g.v);case 29:m++,e.next=20;break;case 32:e.next=3;break;case 34:throw d;case 35:case"end":return e.stop()}},e,this,[[7,13]])}));return function(t){return e.apply(this,arguments)}}(),Bt={},Ht=function(e){return Bt[e]?(Bt[e]+=1,Bt[e]):(Bt[e]=1,Bt[e])},Wt={},Gt=function(e){return Wt[e]?(Wt[e]+=1,Wt[e]):(Wt[e]=1,Wt[e])},qt=function(e){var t=e.appId,n=e.cname,i=e.uid,a=e.sid,s=c();return s.status=Mt,s.pingpongTimer=null,s.connection=null,s.requests=[],s.appId=t,s.cname=n,s.uid=i,s.sid=a,s.connection=null,s.connectionId=Ut++,s.connect=function(){var e=ue()(ce.a.mark(function e(t){var n;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wsClient,s.status===Mt){e.next=4;break}return o.default.debug("Ignored UapConnection.connect: ".concat(s.status)),e.abrupt("return");case 4:s.connection=n,s.status=Lt,s._flush(),s.startPingpong(),n.addEventListener("close",function(e){if(console.log("Weboskcet closed",e),n===s.connection){var t={type:"close",evt:e};s.dispatchEvent(t)}}),n.addEventListener("message",function(e){if(e.data){var t=null;try{t=JSON.parse(e.data)}catch(e){return void o.default.error("Invalid data from worker manager",t)}if(t.requestId)for(var n=s.requests.length-1;n>=0;n--){var i=s.requests[n];if(i.reqData.requestId===t.requestId){s.requests.splice(n,1),t.code<400&&t.code>=200?i.promises.resolve(t):i.promises.reject(t);break}}else t.type="notification",s.dispatchEvent(t)}});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),s.disconnect=ue()(ce.a.mark(function e(){var t;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t in s.status=kt,clearInterval(s.pingpongTimer),s.pingpongTimer=null,s.requests)s.requests[t].promises.reject("DISCONNECTED");return s.requests=[],null,s.connection&&(s.connection.close(),s.connection=null),s.status=Dt,e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)})),s.request=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,c;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S()({command:"request",sdkVersion:r.VERSION,seq:Gt(s.sid),appId:s.appId,cname:s.cname,uid:""+s.uid,sid:s.sid,requestId:Ht(s.sid),ts:Math.floor(Date.now()/1e3)},t),"INIT"!==s.status){e.next=5;break}return e.abrupt("return",new Promise(function(e,t){var i={reqData:n,stalledTs:Date.now(),timeoutCnt:0,promises:{resolve:e,reject:t}};s.requests.push(i)}));case 5:if(s.connection){e.next=11;break}throw i="NO_WEBSOCKET_CONNECTION",o.default.error(i),new Error(i);case 11:if(s.status!==kt||t.clientRequest&&"DestroyWorker"===t.clientRequest.command){e.next=17;break}throw a="WEBSOCKET_DISCONNECTING",o.default.error(a),new Error(a);case 17:if("DISCONNECTED"!==s.status){e.next=23;break}throw c="WEBSOCKET_DISCONNECTED",o.default.error(c),new Error(c);case 23:return e.abrupt("return",new Promise(function(e,t){var i={reqData:n,stalledTs:Date.now(),timeoutCnt:0,promises:{resolve:e,reject:t}};s.requests.push(i),s._flush()}));case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),s._flush=function(){s.connection&&s.status===Lt&&s.requests.forEach(function(e){e.sentTs||(e.sentTs=Date.now(),e.reqData.clientRequest&&(e.reqData.clientRequest.workerToken=s.connection.workerToken),s.connection.send(JSON.stringify(e.reqData)))})},s.startPingpong=function(){clearInterval(s.pingpongTimer),s.pingpongTimer=setInterval(ue()(ce.a.mark(function e(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.status!==Lt||!s.connection||1!==s.connection.readyState){e.next=9;break}return e.prev=1,e.next=4,s.request({command:"ping"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("pingpong",e.t0);case 9:case"end":return e.stop()}},e,this,[[1,6]])})),6e3)},s._flush(),s.startPingpong(),Pt.push(s),s},Yt=function(e){e.disconnect();var t=Pt.find(function(t){return e.connectionId===t.connectionId});Pt.splice(t,1)},Jt=function(e){return"number"==typeof e&&0<=e&&e<=4294967295};var Kt=function(e){var t=e;if(Object(r.getParameter)("LIVESTREAMING_ALIGN"))switch(e){case 200:t=R;break;case 451:t=A;break;case 453:t=O;break;case 470:t=P;break;case 499:t=C;break;default:t=N}return t},zt=function(e){var t=e;if(Object(r.getParameter)("LIVESTREAMING_ALIGN"))switch(e){case 200:t=w;break;case 404:case 452:t=k;break;case 453:t=D;break;case 499:t=L;break;default:t=M}return t},Xt=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null};t.turnServer={mode:"auto",username:"test",credential:"111111",forceturn:Object(r.getParameter)("FORCE_TURN")},t.useProxyServer=!1,t.mode=e.mode,t.codec=e.codec,t.clientId=Object(ne.generateSessionId)().slice(0,5),t.uintUid=null;e=S()({},e);return t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.startChannelMediaRelay=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return i&&i(e);i&&i()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof Ke.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var r=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfos();if(Object(re.isEmpty)(r))throw"srcChannelMediaInfo should not be empty";if(Object(re.isEmpty)(o)||0===o.length)throw"destChannelMediaInfos should not be empty";if(!Object(ne.is32Uint)(r.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(re.isValidChannelName)(r.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(r.token&&!Object(re.isValidToken)(r.token))throw"Invalid token in srcChannelMediaInfo";if(o.forEach(function(e){if(!Object(ne.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(re.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(re.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"}),t.gatewayClient.state!==Rt.CONNECTED)throw"startChannelMediaRelay should be used after join";t.gatewayClient.startChannelMediaRelay(n).then(function(){a&&a()}).catch(function(e){a&&a(e)})},t.updateChannelMediaRelay=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return i&&i(e);i&&i()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof Ke.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var r=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfos();if(Object(re.isEmpty)(r))throw"srcChannelMediaInfo should not be empty";if(Object(re.isEmpty)(o)||0===o.length)throw"destChannelMediaInfos should not be empty";if(!Object(ne.is32Uint)(r.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(re.isValidChannelName)(r.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(r.token&&!Object(re.isValidToken)(r.token))throw"Invalid token in srcChannelMediaInfo";if(o.forEach(function(e){if(!Object(ne.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(re.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(re.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"}),t.gatewayClient.state!==Rt.CONNECTED)throw"updateChannelMediaRelay should be used after join";t.gatewayClient.updateChannelMediaRelay(n).then(function(){a&&a()}).catch(function(e){a&&a(e)})},t.stopChannelMediaRelay=function(n){var i=s.b.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});t.gatewayClient.stopChannelMediaRelay().then(function(){i&&i()}).catch(function(e){i&&i(e)})},t.getConnectionState=function(){var n=s.b.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),i=Rt.connetionStateMap[t.gatewayClient.state];return n(),i},t.setClientRole=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:i,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(re.checkValidEnum)(n,"setClientRole",["host","audience"]),"rtc"===t.mode){var r="RTC mode can not use setClientRole";return o.default.warning("[".concat(t.clientId,"] ").concat(r)),a&&a(r)}t.gatewayClient&&t.gatewayClient.state===Rt.CONNECTED?("audience"===n&&(0===this.highStreamState?this._unpublish(this.highStream,function(){a&&a(null,{role:n})},function(e){a&&a(e)}):t.gatewayClient.setClientRole("audience",a)),"host"===n&&t.gatewayClient.setClientRole("host",a)):(t.gatewayClient.role=n,a&&a(null,{role:n}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==Rt.CONNECTED){var n="Client is not in connected state";return o.default.error("[".concat(t.clientId,"] ").concat(n)),void e(n)}t.gatewayClient.getGatewayInfo(function(t){e(null,t)},e)},t.renewToken=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return o.default.error("Failed to renew token ".concat(e),t),a&&a(e);i&&i(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(re.isValidToken)(n))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=n,void t.gatewayClient.renewToken(n,function(e){return r(null,e)},r)):(o.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),r(V.INVALID_OPERATION)):(o.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),r(V.INVALID_OPERATION))},t.setLowStreamParameter=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(re.checkValidObject)(n,"param");var a=n.width,r=n.height,c=n.framerate,d=n.bitrate;Object(re.isEmpty)(a)||Object(re.checkValidNumber)(a,"width"),Object(re.isEmpty)(r)||Object(re.checkValidNumber)(r,"height"),Object(re.isEmpty)(c)||Object(re.checkValidNumber)(c,"framerate"),Object(re.isEmpty)(d)||Object(re.checkValidNumber)(d,"bitrate",1,1e7),(!a&&r||a&&!r)&&o.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=n,i()},t.init=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Client.init",options:arguments,tag:"tracer"});Object(re.checkValidString)(n),Object(m.isChromeKernel)()&&Object(m.getChromeKernelVersion)()<=48?a?r(V.BAD_ENVIRONMENT):Object(ne.popBanTip)():(o.default.info("[".concat(t.clientId,"] Initializing AgoraRTC client, appId: ").concat(n,".")),e.appId=n,e.sessionId=Object(ne.generateSessionId)(),r())},t.setTurnServer=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");Object(re.checkValidObject)(n,"turnServer");var a=n.turnServerURL,r=n.username,c=n.password,d=n.udpport,u=n.forceturn,l=n.tcpport;Object(re.checkValidString)(a,"turnServerURL"),Object(re.checkValidString)(r,"username"),Object(re.checkValidString)(c,"password"),Object(re.checkValidString)(d,"udpport"),Object(re.isEmpty)(u)||Object(re.checkValidBoolean)(u,"forceturn"),t.turnServer.mode="manual",t.turnServer.url=a,t.turnServer.udpport=d,t.turnServer.username=r,t.turnServer.credential=c,t.turnServer.forceturn=u||!1,Object(re.isEmpty)(l)||(Object(re.checkValidString)(l,"tcpport"),t.turnServer.tcpport=l,o.default.info("[".concat(t.clientId,"] Set turnserver tcpurl. ").concat(t.turnServer.url,":").concat(t.turnServer.tcpport))),o.default.info("[".concat(t.clientId,"] Set turnserver udpurl. ").concat(t.turnServer.url,":").concat(t.turnServer.udpport,",username: ").concat(t.turnServer.uername,",password: ").concat(t.turnServer.credential)),i()},t.setProxyServer=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!n)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");Object(re.checkValidString)(n,"proxyServer"),t.proxyServer=n,s.b.setProxyServer(n),o.default.setProxyServer(n),i()},t.startProxyServer=function(){var n=s.b.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer||t.turnServer.url)throw new Error("You have already set the proxy");t.useProxyServer=!0,n()},t.stopProxyServer=function(){var n=s.b.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Stop proxy server after leave channel");s.b.setProxyServer(),o.default.setProxyServer(),t.turnServer={},t.proxyServer=null,t.useProxyServer=!1,n()},t.setEncryptionSecret=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"password"),t.aespassword=n,i()},t.setEncryptionMode=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(re.checkValidString)(n,"encryptionMode"),-1===$e.indexOf(n))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb"');t.aesmode=n,i()},t.configPublisher=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(re.checkValidObject)(n,"config");var a=n.width,r=n.height,o=n.framerate,c=n.bitrate,d=n.publisherUrl;Object(re.checkValidNumber)(a,"width"),Object(re.checkValidNumber)(r,"height"),Object(re.checkValidNumber)(o,"framerate"),Object(re.checkValidNumber)(c,"bitrate",1,1e7),d&&Object(re.checkValidString)(d,"publisherUrl"),t.gatewayClient.configPublisher(n),i()},t.enableDualStream=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);n&&n(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(m.getBrowserOS)()?(s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),a(V.IOS_NOT_SUPPORT)):Object(m.isWeChatBrowser)()?(s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),a(V.WECHAT_NOT_SUPPORT)):(s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream(function(e){return a(null,e)},function(e){o.default.warning("[".concat(t.clientId,"]"),e),a(V.ENABLE_DUALSTREAM_FAILED)}):1===t.highStreamState?a(V.STILL_ON_PUBLISHING):a(null)))},t.disableDualStream=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);n&&n(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream(function(){t.highStream.lowStream=null,a()},function(e){o.default.warning("[".concat(t.clientId,"]"),e),a(V.DISABLE_DUALSTREAM_FAILED)}):1===t.highStreamState?a(V.STILL_ON_PUBLISHING):a()},t._createLowStream=function(e,n){if(t.highStream&&t.highStream.stream){var i=S()({},t.highStream.params);if(i.streamID+=1,i.audio=!1,i.video){var a=t.highStream.stream.getVideoTracks()[0];a?ae.getVideoCameraIdByLabel(a.label,function(a){i.cameraId=a;var s=new Ye(i);if(s.isLowStream=!0,s.streamId=t.highStream.getId()+1,t.lowStreamParameter){var c=S()({},t.lowStreamParameter);if(!c.width||!c.height){var d=At(t.highStream.profile),u=r.SUPPORT_RESOLUTION_LIST[d[0]];c.width=u[0],c.height=u[1]}if(c.framerate=c.framerate||5,c.bitrate=c.bitrate||50,Object(m.isSafari)()||Object(m.isOpera)()){o.default.debug("[".concat(t.clientId,"] Shimming lowStreamParameter"));u=r.SUPPORT_RESOLUTION_LIST[t.highStream.profile];c.width=u[0],c.height=u[1]}s.setVideoProfileCustomPlus(c)}else s.setVideoProfileCustom(At(t.highStream.profile));s.init(function(){t.highStream.lowStream=s,t.highStream.userMuteVideo&&s.muteVideo(),e&&e(s)},n)},n):n&&n(V.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(V.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(V.HIGH_STREAM_NOT_VIDEO_TRACE)},t._getLowStream=function(e,n){t.lowStream?e(t.lowStream):t._createLowStream(function(n){t.lowStream=n,e(t.lowStream)},n)},t._publishLowStream=function(e,n){return 2!==t.lowStreamState?n&&n(V.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?n&&n(V.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream(function(i){t.lowStreamState=1,t.gatewayClient.publish(i,{streamType:1},function(){t.lowStreamState=0,e&&e()},function(e){1===t.lowStreamState&&(t.lowStreamState=2),o.default.debug("[".concat(t.clientId,"] publish low stream failed")),n&&n(e)})},n)},t._unpublishLowStream=function(e,n){if(0!==t.lowStreamState)return n&&n(V.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},function(){},function(e){o.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),n&&n(e)}),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(n,i,a,r,c){var d=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return c&&c(e);r&&r(t)},name:"Client.join",options:arguments,tag:"tracer"});if(n&&!Object(re.isValidToken)(n))return o.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),d(V.INVALID_PARAMETER);if(!Object(re.isValidChannelName)(i))return o.default.error("Invalid Channel Name ".concat(i)),o.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),d(V.INVALID_PARAMETER);if("string"==typeof i&&""===i)return o.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),d(V.INVALID_PARAMETER);if(a&&!Object(ne.is32Uint)(a)&&!Object(re.isValidString)(a,1,255))return o.default.error("Invalid UID ".concat(a," ").concat(He()(a))),o.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")),d(V.INVALID_PARAMETER);if("string"==typeof a&&0==a.length)return o.default.warning("[".concat(t.clientId,"] String uid should not be empty")),d(V.INVALID_PARAMETER);if("string"==typeof a&&a.length>256)return o.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),d(V.INVALID_PARAMETER);t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var u={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:i,uid:a,turnServer:t.turnServer,proxyServer:t.proxyServer,token:n||e.appId,useProxyServer:t.useProxyServer};if("string"==typeof a&&(u.stringUid=a,t.uintUid?(u.uid=t.uintUid,delete t.uintUid):u.uid=0),t.aespassword&&"none"!==t.aesmode&&S()(u,{aespassword:t.aespassword,aesmode:t.aesmode}),s.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:i,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,d(null,e)},t.onFailure=function(e){return d(e)},t.channel=i,t.gatewayClient.state!==Rt.DISCONNECTED)return o.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),d(V.INVALID_OPERATION),void s.b.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:V.INVALID_OPERATION,addr:null});t.gatewayClient.state=Rt.CONNECTING;var l=function(a,r){o.default.info("[".concat(t.clientId,"] Joining channel: ").concat(i)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:r,joinInfo:u}),t.key=n||e.appId,u.cid=a.cid,u.uid||(u.uid=a.uid),u.vid=a.vid,u.clientId=t.clientId,u.apResponse=a.res,a.uni_lbs_ip&&a.uni_lbs_ip[1]&&(u.uni_lbs_ip=a.uni_lbs_ip[1]),u.gatewayAddr=a.gateway_addr,t.joinInfo=u,t.gatewayClient.join(u,t.key,function(e){o.default.info("[".concat(t.clientId,"] Join channel ").concat(i," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),d(null,e)},function(e){return d(e)})};u.stringUid&&!u.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=gt(u,t.gatewayClient),t.userAccountReq.then(function(e){o.default.debug("getUserAccount Success ".concat(e.url," ").concat(u.stringUid," => ").concat(e.uid)),u.uid=e.uid,ft(u,l,function(e){return d(e)})}).catch(function(e){o.default.error("getUserAccount rejected",e),d(e)})):ft(u,l,function(e){return d(e)})},t.renewChannelKey=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"key",1,2047),void 0===t.key?(o.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),r(V.INVALID_OPERATION)):(t.key=n,t.gatewayClient.joinInfo.token=n,t.gatewayClient.key=n,t.gatewayClient.recover(),r())},t.leave=function(n,i){t.gatewayClient.hasInvokeLeave=!0;var a=!1,c=s.b.reportApiInvoke(e.sessionId,{callback:function(e,a){if(e)return i&&i(e);var r;t.gatewayClient.reconnectingCS=!1,clearTimeout((r=t.clientId,ut[r])),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),n&&n(a)},name:"Client.leave",options:arguments,tag:"tracer"});o.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===Rt.CONNECTING&&(t.gatewayClient.state=Rt.DISCONNECTED)),t.gatewayClient.leave(function(e){a=!0,c(null,e)},c),setTimeout(function(){a||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=Rt.DISCONNECTED,c(null,"LEAVE_MSG_TIMEOUT"))},Object(r.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var n=Object(ne.generateSessionId)();if(o.default.debug("renewSession ".concat(e.sessionId," => ").concat(n)),e.sessionId=n,t.joinInfo&&(t.joinInfo.sid=n),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=n),t.gatewayClient.localStreams))for(var i in t.gatewayClient.localStreams){var a=t.gatewayClient.localStreams[i];a&&(a.sid=n)}},t._publish=function(n,i,a,s){if(2!==t.highStreamState)return o.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(n.getId())),a&&a(V.STREAM_ALREADY_PUBLISHED);if("auto"===t.turnServer.mode&&Object(r.getParameter)("FORCE_TURN")&&!Object(r.getParameter)("TURN_ENABLE_TCP")&&!Object(r.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");o.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(n.getId())),t.highStream=n,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var c=function(n,i,a){t.gatewayClient.publish(n,{streamType:0},function(){n.sid=e.sessionId,t.highStreamState=0,o.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(n.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream(function(){i&&i()},function(e){o.default.warning("[".concat(t.clientId,"] "),e),Fe.replaceWithCanvasTrack(n),i&&i()}):(Fe.replaceWithCanvasTrack(n),i&&i())},a)};"audience"!==t.gatewayClient.role||"live"!==t.mode||s?c(n,i,a):t.gatewayClient.setClientRole("host",function(e){if(e)return a&&a(e);c(n,i,a)})},t._unpublish=function(e,n,i,a){if(0!==t.highStreamState)return o.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),i&&i(V.STREAM_NOT_YET_PUBLISHED);o.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var r=function(e,n,i){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,i),t.gatewayClient.unpublish(e,{streamType:0},function(){t.highStreamState=2,o.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),n&&n()},function(n){o.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),i&&i(n)})};"host"!==t.gatewayClient.role||"live"!==t.mode||a?r(e,n,i):t.gatewayClient.setClientRole("audience",function(t){if(t)return i&&i(t);r(e,n,i)})},t.publish=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return 1===t.highStreamState&&(t.highStreamState=2),i&&i(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!i}});2===t.highStreamState?n._hasVideoTracks()||n._hasAudioTracks()?t._publish(n,function(e){return a(null,e)},function(e){return a(e)}):a(V.NO_TRACK_IN_STREAM):a(V.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);a&&a(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!i}});0===t.highStreamState?t._unpublish(n,function(e){return r(null,e)},function(e){return r(e)}):r(V.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:i,onFailure:!!a}});"function"==typeof i&&(a=i,i=null),Object(re.checkValidObject)(n,"stream"),Object(re.isEmpty)(i)||(Object(re.checkValidObject)(i,"options"),Object(re.isEmpty)(i.video)||Object(re.checkValidBoolean)(i.video,"options.video"),Object(re.isEmpty)(i.audio)||Object(re.checkValidBoolean)(i.audio,"options.audio"));var c={video:!0,audio:!0};if(!Object(re.isEmpty)(i)){if(Object(m.isSafari)()&&(!i.video||!i.audio)){var d="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return o.default.error("[".concat(t.clientId,"] "),d),void r(d)}if(!Object(re.isEmpty)(i.video)&&!Object(re.isValidBoolean)(i.video)||!Object(re.isEmpty)(i.audio)&&!Object(re.isValidBoolean)(i.audio)||!1===i.audio&&!1===i.video){d="INVALID_PARAMETER ".concat(JSON.stringify(i));return o.default.error("[".concat(t.clientId,"] "),d),void r(d)}}n.subscribeOptions?(S()(n.subscribeOptions,c,i),t.gatewayClient.subscribeChange(n,function(e){return r(null,e)},r)):(n.subscribeOptions=S()({},c,i),t.gatewayClient.subscribe(n,function(e){return r(null,e)},r))},t.unsubscribe=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!i}});o.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(n.getId())),t.gatewayClient.unsubscribe(n,function(e){return a(null,e)},a)},t.setRemoteVideoStreamType=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:i}});Object(re.checkValidEnum)(i,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(n,i),a()},t.setStreamFallbackOption=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:i}});Object(re.checkValidEnum)(i,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(n,i),a()},t.enableAudioVolumeIndicator=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});n=n||2e3,i=i||3,Object(re.checkValidNumber)(i,"smooth",1,100),Object(re.checkValidNumber)(n,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=n,t.audioVolumeIndication.smooth=i,t.audioVolumeIndication={interval:n,smooth:i},o.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(n," smooth ").concat(i)),t.gatewayClient.enableAudioVolumeIndicator(n,i),a()},t.getNetworkStats=function(e,n){return o.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),wt.getStats(e,n)},t.getSystemStats=function(e,t){return v.getStats(e,t)},t.getRecordingDevices=function(e,t){return ae.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return ae.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return ae.getCameras(e,t)},t.getRemoteAudioStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioStats(e,n)},t.getLocalAudioStats=function(e,n){return t.rtcStatsCollector.getLocalAudioStats(e,n)},t.getRemoteVideoStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoStats(e,n)},t.getLocalVideoStats=function(e,n){return t.rtcStatsCollector.getLocalVideoStats(e,n)},t._getRemoteVideoQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,n)},t._getRemoteAudioQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,n)},t.getTransportStats=function(e,n){return t.rtcStatsCollector.getTransportStats(function(t){return wt.getStats(function(n){var i=S()({},t,n);e&&e(i)},n)},n)},t.getSessionStats=function(e,n){return t.rtcStatsCollector.getSessionStats(e,n)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},e.clientId=t.clientId,t.gatewayClient=Rt(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,n){t.gatewayClient.on(e,n),t.listenerLoggerCache.push("".concat(e).concat(n.name?":"+n.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):o.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout(function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,o.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])},0)},t.off=function(e,n){o.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,n)},t.rtcStatsCollector=function(e){var t=c();return t.gatewayClient=e,t.exceptionMonitor=new Nt(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"End2EndDelay",r.peer_delay&&r.peer_delay.audio_delay),ie(a,"TransportDelay",r.peer_delay&&r.peer_delay.e2e_delay),ie(a,"PacketLossRate",r.peer_delay&&r.peer_delay.e2e_audio_lost_ratio_400ms),ie(a,"RecvLevel",r.audioStats&&r.audioStats.audioOutputLevel),ie(a,"RecvBitrate",r.audioRecvBitrate),ie(a,"CodecType",r.audioStats&&r.audioStats.googCodecName),ie(a,"MuteState",r.audioDisabled),ie(a,"TotalFreezeTime",r.audioStats&&r.audioStats.audioTotalFreezeTime),ie(a,"TotalPlayDuration",r.audioStats&&r.audioStats.audioTotalPlayDuration),n[i]=a}e&&e(n)},t.getLocalAudioStats=function(e){var n={};for(var i in t.localStats){var a={},r=t.localStats[i];ie(a,"RecordingLevel",r.audioStats&&r.audioStats.audioInputLevel),ie(a,"SendLevel",r.audioStats&&r.audioStats.totalAudioEnergy),ie(a,"SamplingRate",r.audioStats&&r.audioStats.totalSamplesDuration),ie(a,"SendBitrate",r.audioSendBitrate),ie(a,"CodecType",r.audioStats&&r.audioStats.googCodecName),ie(a,"MuteState",r.audioDisabled);var o=t.gatewayClient.localStreams[i];o&&o.isPlaying()&&ie(a,"MuteState",o.userMuteAudio?"1":"0"),n[i]=a}e&&e(n)},t.getRemoteVideoStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"End2EndDelay",r.peer_delay&&r.peer_delay.video_delay),ie(a,"TransportDelay",r.peer_delay&&r.peer_delay.e2e_delay),ie(a,"PacketLossRate",r.peer_delay&&r.peer_delay.e2e_video_lost_ratio_400ms),ie(a,"RecvBitrate",r.videoRecvBitrate),ie(a,"RecvResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthReceived),ie(a,"RecvResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightReceived),ie(a,"RenderResolutionWidth",r.videoStats&&r.videoStats.renderRemoteWidth),ie(a,"RenderResolutionHeight",r.videoStats&&r.videoStats.renderRemoteHeight),ie(a,"RenderFrameRate",r.videoStats&&r.videoStats.googFrameRateOutput),ie(a,"MuteState",r.videoDisabled),ie(a,"TotalFreezeTime",r.videoStats&&r.videoStats.videoTotalFreezeTime),ie(a,"TotalPlayDuration",r.videoStats&&r.videoStats.videoTotalPlayDuration),n[i]=a}e&&e(n)},t.getLocalVideoStats=function(e){var n={};for(var i in t.localStats){var a={},r=t.localStats[i];ie(a,"TargetSendBitrate",r.videoTargetSendBitrate),ie(a,"SendFrameRate",r.videoStats&&r.videoStats.googFrameRateSent),ie(a,"SendBitrate",r.videoSendBitrate),ie(a,"SendResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthSent),ie(a,"SendResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightSent),ie(a,"CaptureResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthInput),ie(a,"CaptureResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightInput),ie(a,"EncodeDelay",r.videoStats&&r.videoStats.googAvgEncodeMs),ie(a,"MuteState",r.videoDisabled),ie(a,"TotalFreezeTime",r.videoStats&&r.videoStats.videoTotalFreezeTime),ie(a,"TotalDuration",r.videoStats&&r.videoStats.videoTotalPlayDuration),ie(a,"CaptureFrameRate",r.videoStats&&r.videoStats.googFrameRateSent),r.videoStats&&!r.videoStats.googFrameWidthInput&&ie(a,"CaptureResolutionWidth",r.videoStats&&r.videoStats.renderLocalWidth),r.videoStats&&!r.videoStats.googFrameHeightInput&&ie(a,"CaptureResolutionHeight",r.videoStats&&r.videoStats.renderLocalHeight),n[i]=a,e&&e(n)}},t.getRemoteVideoQualityStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"videoReceiveDelay",r.videoStats&&r.videoStats.googCurrentDelayMs),ie(a,"VideoFreezeRate",r.videoStats&&r.videoStats.videoFreezeRate),ie(a,"FirstFrameTime",r.firstFrameTime),n[i]=a}e&&e(n)},t.getRemoteAudioQualityStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"audioReceiveDelay",r.audioStats&&r.audioStats.googCurrentDelayMs),ie(a,"AudioFreezeRate",r.videoStats&&r.videoStats.videoFreezeRate),n[i]=a}e&&e(n)},t.getTransportStats=function(e){var n={},i={},a=t.gatewayClient.traffic_stats,r=a.peer_delay;if(ie(n,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),ie(n,"RTT",a&&a.access_delay),r){var o=!0,s=!1,c=void 0;try{for(var d,u=r[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var l=d.value;l.downlink_estimate_bandwidth&&(i[l.peer_uid]=l.downlink_estimate_bandwidth/1e3+"")}}catch(e){s=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}}n.IncomingAvailableBandwidth=i,e&&e(n)},t.getSessionStats=function(e){var n={},i=t.gatewayClient.traffic_stats,a=t.gatewayClient.socket,r=0,o=0;for(var s in t.remoteStats)(c=t.remoteStats[s])&&c.videoStats&&c.videoStats.videoRecvBytesDelta&&(o+=parseInt(c.videoStats.videoRecvBytesDelta)),c&&c.audioStats&&c.audioStats.audioRecvBytesDelta&&(o+=parseInt(c.audioStats.audioRecvBytesDelta));for(var s in t.localStats){var c;(c=t.localStats[s])&&c.videoStats&&c.videoStats.videoSendBytesDelta&&(r+=parseInt(c.videoStats.videoSendBytesDelta)),c&&c.audioStats&&c.audioStats.audioSendBytesDelta&&(r+=parseInt(c.audioStats.audioSendBytesDelta))}var d=r+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,u=o+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,l=t.session.sendBytes+Object(nt.getHTTPSendBytes)(),p=t.session.recvBytes+Object(nt.getHTTPRecvBytes)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(l+=a.getSendBytes(),p+=a.getRecvBytes());var f=1;i.peer_delay&&(f=i.peer_delay.length,f+=1),ie(n,"Duration",a.getDuration()),ie(n,"UserCount",f),ie(n,"SendBytes",l),ie(n,"RecvBytes",p),ie(n,"SendBitrate",8*d/1e3),ie(n,"RecvBitrate",8*u/1e3),e&&e(n)},t.isLocalVideoFreeze=function(e,t){var n=0,i=0;if(!e||!t)return!1;if(Object(m.isChrome)()||Object(m.isOpera)())n=e.googFrameRateInput,i=e.googFrameRateSent;else if(Object(m.isSafari)())n=parseInt(e.framerateMean),i=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(m.isFireFox)())return!1;n=parseInt(e.framerateMean),i=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return n>5&&i<3},t.isRemoteVideoFreeze=function(e,t){var n=0,i=0;if(!e||!t)return!1;if(Object(m.isChrome)()||Object(m.isOpera)())n=e.googFrameRateReceived,i=e.googFrameRateDecoded;else if(Object(m.isSafari)())n=e.framerateMean,i=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(m.isFireFox)())return!1;n=parseInt(e.framesReceived)-parseInt(t.framesReceived),i=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return n>5&&n<10&&i<3||n>10&&n<20&&i<4||n>20&&i<5},t.isAudioFreeze=function(e){if(Object(m.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(m.isSafari)()||Object(m.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(m.isChrome)()||Object(m.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval(function(){if(t.gatewayClient.state!==Rt.CONNECTED)t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0});else{var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}},2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval(function(){var e=t.gatewayClient.traffic_stats,n=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var i={};Object.keys(t.gatewayClient.remoteStreams).forEach(function(a){var r=t.gatewayClient.remoteStreams[a],o=t.remoteStats[a],s={id:a,updatedAt:n};i[a]=s,s.firstFrameTime=r.firstFrameTime,o?(s.audioTotalPlayDuration=o.audioTotalPlayDuration+1,s.audioTotalFreezeTime=o.audioTotalFreezeTime,s.isAudioFreeze=!1,s.isAudioDecodeFailed=!1,s.videoTotalPlayDuration=o.videoTotalPlayDuration+1,s.videoTotalFreezeTime=o.videoTotalFreezeTime,s.isVideoFreeze=!1):(s.audioTotalPlayDuration=1,s.audioTotalFreezeTime=0,s.videoTotalPlayDuration=1,s.videoTotalFreezeTime=0);var c=e&&e.peer_delay&&e.peer_delay.find(function(e){return e.peer_uid==a});c&&(s.peer_delay=c),r&&(r.isPlaying()&&(s.audioDisabled=r.userMuteAudio||r.peerMuteAudio?"1":"0",s.videoDisabled=r.userMuteVideo||r.peerMuteVideo?"1":"0"),o&&o.peer_delay&&c&&o.peer_delay.stream_type!==c.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:a,streamType:c.stream_type}),r.pc&&"established"==r.pc.state&&r.pc.getStats(function(e){if(s.pcStats=e,s.audioStats=e.find(function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)}),s.videoStats=e.find(function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)}),o&&o.audioStats&&s.audioStats){var n=parseInt(s.audioStats.bytesReceived)-parseInt(o.audioStats.bytesReceived),i=parseInt(s.audioStats.googDecodingNormal)-parseInt(o.audioStats.googDecodingNormal);if(s.audioStats.audioRecvBytesDelta=n,s.audioStats.audioDecodingNormalDelta=i,t.session.recvBytes+=n,isFinite(n)&&s.audioStats.timestamp){var a=s.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();s.audioRecvBitrate=Math.floor(8*n/a)}t.isAudioFreeze(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.audioTotalFreezeTime++,s.isAudioFreeze=!0),t.isAudioDecodeFailed(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.isAudioDecodeFailed=!0),s.audioStats.audioTotalFreezeTime=s.audioTotalFreezeTime,s.audioStats.audioTotalPlayDuration=s.audioTotalPlayDuration,s.audioStats.audioFreezeRate=Math.ceil(100*s.audioTotalFreezeTime/s.audioTotalPlayDuration)}if(o&&o.videoStats&&s.videoStats){var c=parseInt(s.videoStats.bytesReceived)-parseInt(o.videoStats.bytesReceived);s.videoStats.videoRecvBytesDelta=c,t.session.recvBytes+=c,isFinite(c)&&s.videoStats.timestamp&&(a=s.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),s.videoRecvBitrate=Math.floor(8*c/a)),t.isRemoteVideoFreeze(s.videoStats,o.videoStats)&&(s.videoTotalFreezeTime++,s.isVideoFreeze=!0),s.videoStats.videoTotalFreezeTime=s.videoTotalFreezeTime,s.videoStats.videoTotalPlayDuration=s.videoTotalPlayDuration,s.videoStats.videoFreezeRate=Math.ceil(100*s.videoTotalFreezeTime/s.videoTotalPlayDuration),r.player&&r.player.video&&r.player.video.videoWidth&&r.player.video.videoHeight?(s.videoStats.renderRemoteWidth=r.player.video.videoWidth,s.videoStats.renderRemoteHeight=r.player.video.videoHeight):(s.videoStats.renderRemoteWidth=r.videoWidth||s.videoStats.googFrameWidthReceived,s.videoStats.renderRemoteHeight=r.videoHeight||s.videoStats.googFrameHeightReceived)}}))}),t.remoteStats=i;var a={};if(Object.keys(t.gatewayClient.localStreams).forEach(function(e){var i=t.gatewayClient.localStreams[e],r=t.localStats[e],o={id:e,updatedAt:n};a[e]=o,r?(o.videoTotalPlayDuration=r.videoTotalPlayDuration+1,o.videoTotalFreezeTime=r.videoTotalFreezeTime,o.isVideoFreeze=!1):(o.videoTotalPlayDuration=1,o.videoTotalFreezeTime=0),i&&(i.isPlaying()&&(o.audioDisabled=i.userMuteAudio?"1":"0",o.videoDisabled=i.userMuteVideo?"1":"0"),i.video&&i.attributes.maxVideoBW?o.videoTargetSendBitrate=i.attributes.maxVideoBW:i.video&&i.screenAttributes&&(o.videoTargetSendBitrate=i.screenAttributes.maxVideoBW),i.pc&&"established"==i.pc.state&&i.pc.getStats(function(e){if(o.pcStats=e.reverse(),o.audioStats=e.find(function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)}),o.videoStats=e.find(function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)}),o.audioStats&&r&&r.audioStats){var n=parseInt(o.audioStats.bytesSent)-parseInt(r.audioStats.bytesSent);if(o.audioStats.audioSendBytesDelta=n,t.session.sendBytes+=n,isFinite(n)&&o.audioStats.timestamp){var a=o.audioStats.timestamp.getTime()-r.audioStats.timestamp.getTime();o.audioSendBitrate=Math.floor(8*n/a)}}if(o.videoStats&&r&&r.videoStats){var s=parseInt(o.videoStats.bytesSent)-parseInt(r.videoStats.bytesSent);o.videoStats.videoSendBytesDelta=s,t.session.sendBytes+=s,isFinite(s)&&o.videoStats.timestamp&&(a=o.videoStats.timestamp.getTime()-r.videoStats.timestamp.getTime(),o.videoSendBitrate=Math.floor(8*s/a)),t.isLocalVideoFreeze(o.videoStats,r.videoStats)&&(o.videoTotalFreezeTime++,o.isVideoFreeze=!0),o.videoStats.videoTotalFreezeTime=o.videoTotalFreezeTime,o.videoStats.videoTotalPlayDuration=o.videoTotalPlayDuration,o.videoStats.videoFreezeRate=Math.ceil(100*o.videoTotalFreezeTime/o.videoTotalPlayDuration),o.videoStats.renderLocalWidth=i.videoWidth||o.videoStats.googFrameWidthSent,o.videoStats.renderLocalHeight=i.videoHeight||o.videoStats.googFrameHeightSent}}))}),t.localStats=a,t.session.HTTPSendBytesDelta=Object(nt.getHTTPSendBytes)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(nt.getHTTPSendBytes)(),t.session.HTTPRecvBytesDelta=Object(nt.getHTTPRecvBytes)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(nt.getHTTPRecvBytes)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var r=t.gatewayClient.socket;t.session.WSSendBytesDelta=r.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=r.getSendBytes(),t.session.WSRecvBytesDelta=r.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=r.getRecvBytes()}},1e3),t.gatewayClient.on("join",function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}}),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",function(n){var i=n.joinInfo,a=n.config;if(a){Object(re.isEmpty)(a.uploadLog)||(Object(r.setParameter)("UPLOAD_LOG",a.uploadLog),s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:a.uploadLog}})()),Object(re.isEmpty)(a.dualStream)||(e.isDualStream=a.dualStream,s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"dualStream",value:a.dualStream}})()),Object(re.isEmpty)(a.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",function(e){var n=e.stream;n?(t.client.gatewayClient.setStreamFallbackOption(n,a.streamFallbackOption),s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId()}})()):s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId(),err:"invalid stream"}})()});try{o.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(a))),Object.keys(a).map(function(e){return Object(r.setParameter)(e,a[e])})}catch(t){o.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(a)))}}}),t}(t),function(e,t){var n=arguments;e.liveStreaming=c(),e.liveStreaming.connections={inject_streaming:null,mix_streaming:null,raw_streaming:null},e.liveStreaming.connectionTypes={inject_streaming:"pull",mix_streaming:"push",raw_streaming:"push"},e.liveStreaming.pushStates={},e.liveStreaming.pullStates={},e.gatewayClient.addEventListener("join",function(t){e.liveStreaming.resumeStates("pull")}),e.gatewayClient.addEventListener("stream-unpublished",function(t){if(t.options&&0===t.options.streamType)for(var n in e.liveStreaming.pushStates){var i=e.liveStreaming.pushStates[n];i.url&&e._stopLiveStreaming(i.url,i.transcodingEnabled,!0)}}),e.gatewayClient.addEventListener("stream-published",function(t){e.liveStreaming.resumeStates("push")}),e.liveStreaming.connect=(m=ue()(ce.a.mark(function n(i){var a,r;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.joinInfo&&e.joinInfo.uid&&parseInt(e.joinInfo.vid,10)){n.next=3;break}throw new Error("CLIENT_NOT_JOINED");case 3:return a=new qt({appId:t.appId,cname:e.channel,sid:t.sessionId,uid:e.joinInfo.uid}),e.liveStreaming.connections[i]=a,n.next=7,Ft({appId:t.appId,cname:e.channel,serviceName:i,sid:t.sessionId,uid:e.joinInfo.uid});case 7:return r=n.sent,n.next=10,a.connect({wsClient:r});case 10:return a.on("notification",function(t){if(t.serviceName=i,e.liveStreaming.dispatchEvent(t),503===t.code);else switch(t.serviceName){case"inject_streaming":var n={reason:t&&t.reason,status:Kt(t&&t.code),type:"streamInjectedStatus",uid:t&&t.serverStatus&&t.serverStatus.inject_uid,url:t&&t.serverStatus&&t.serverStatus.url};e.gatewayClient.dispatchEvent(n);break;case"raw_streaming":case"mix_streaming":var a={reason:t&&t.reason,status:t&&t.code,type:t&&200===t.code?"liveStreamingStarted":"liveStreamingFailed",uid:t&&t.serverStatus&&t.uid,url:t&&t.serverStatus&&t.serverStatus.url};e.gatewayClient.dispatchEvent(a)}}),a.on("close",function(t){Yt(a),o.default.debug("Reconnect ".concat(i)),e.liveStreaming.connect(i).catch(function(t){e.liveStreaming.connections[i]=null,e.gatewayClient.dispatchEvent({type:"".concat(i.replace("_","-"),"-disconnected")})})}),o.default.debug("".concat(i," connected")),n.abrupt("return",a);case 14:case"end":return n.stop()}},n,this)})),function(e){return m.apply(this,arguments)}),e.liveStreaming.disconnect=(f=ue()(ce.a.mark(function t(n){var i,a;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=ce.a.keys(e.liveStreaming.connections);case 1:if((t.t1=t.t0()).done){t.next=13;break}if(i=t.t1.value,!e.liveStreaming.connections.hasOwnProperty(i)){t.next=11;break}if(!(a=e.liveStreaming.connections[i])||n&&n!==i){t.next=11;break}return o.default.info("Disconnecting liveStreaming ".concat(i)),t.next=9,a.disconnect();case 9:t.sent,e.liveStreaming.connections[i]=null;case 11:t.next=1;break;case 13:case"end":return t.stop()}},t,this)})),function(e){return f.apply(this,arguments)}),e.liveStreaming.resumeStates=(p=ue()(ce.a.mark(function t(n){var i,a,r,s,c,d,u,l;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=ce.a.keys(e.liveStreaming.connections);case 1:if((t.t1=t.t0()).done){t.next=8;break}if(i=t.t1.value,!n||e.liveStreaming.connectionTypes[i]===n){t.next=5;break}return t.abrupt("continue",1);case 5:e.liveStreaming.connections.hasOwnProperty(i)&&(a=e.liveStreaming.connections[i])&&(o.default.info("LiveStreaming closing connection ".concat(i)),a.disconnect(),e.liveStreaming.connections[i]=null),t.next=1;break;case 8:t.t2=ce.a.keys(e.liveStreaming.pushStates);case 9:if((t.t3=t.t2()).done){t.next=37;break}if(r=t.t3.value,!n||"push"===n){t.next=13;break}return t.abrupt("continue",9);case 13:if(!e.liveStreaming.pushStates.hasOwnProperty(r)){t.next=35;break}if(s=e.liveStreaming.pushStates[r],"audience"!==e.gatewayClient.role){t.next=19;break}o.default.warning("Cannot resume LiveStreaming in audience mode. ".concat(s.url),s),t.next=35;break;case 19:if(!s){t.next=35;break}return o.default.debug("Resuming LiveStreaming ".concat(s.url),s),t.prev=21,t.next=24,e._startLiveStreaming(s.url,s.transcodingEnabled);case 24:c=t.sent,o.default.debug("Resumed LiveStreaming ".concat(s.url,": ").concat(c.reason)),t.next=35;break;case 28:if(t.prev=28,t.t4=t.catch(21),454!==t.t4.code){t.next=34;break}o.default.debug("Resumed LiveStreaming ".concat(s.url,": ").concat(t.t4.reason)),t.next=35;break;case 34:throw t.t4;case 35:t.next=9;break;case 37:t.t5=ce.a.keys(e.liveStreaming.pullStates);case 38:if((t.t6=t.t5()).done){t.next=62;break}if(d=t.t6.value,!n||"pull"===n){t.next=42;break}return t.abrupt("continue",38);case 42:if(!e.liveStreaming.pullStates.hasOwnProperty(d)){t.next=60;break}if(u=e.liveStreaming.pullStates[d],"audience"!==e.gatewayClient.role){t.next=48;break}o.default.warning("Cannot resume addInjectStreamUrl in audience mode. ".concat(u.url),u),t.next=60;break;case 48:if(!u){t.next=60;break}return o.default.debug("Resuming LiveStreaming pullStream ".concat(u.url),u),t.prev=50,t.next=53,e._addInjectStreamUrl(u.url,u.transcodingConfig);case 53:l=t.sent,o.default.debug("Resumed LiveStreaming pullStream ".concat(u.url,": ").concat(l.reason)),t.next=60;break;case 57:t.prev=57,t.t7=t.catch(50),451===t.t7.code&&o.default.debug("Resumed LiveStreaming pullStream ".concat(u.url,": ").concat(t.t7.reason));case 60:t.next=38;break;case 62:case"end":return t.stop()}},t,this,[[21,28],[50,57]])})),function(e){return p.apply(this,arguments)}),e.liveStreaming.startOptions={autoDestroyTime:30},e.liveStreaming.transcodingConfig={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,images:[],lowLatency:!1,metadata:"",userConfigExtraInfo:"",userConfigs:[],videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640},e.startLiveStreaming=function(n,i){Object(re.isEmpty)(i)||Object(re.checkValidBoolean)(i,"transcodingEnabled"),Object(re.checkValidString)(n,"url",1,1024);var a=s.b.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var r={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw a(r),r}var o=e._startLiveStreaming(n,i);return o.then(function(e){a(null,e)}).catch(function(e){a(e)}),o},e._startLiveStreaming=(l=ue()(ce.a.mark(function n(i,a){var r,s,c,d;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=S()({allocate:!0,clientRequest:{command:"PublishStream"},command:"request"}),o.default.debug("startLiveStreaming ".concat(i,", ").concat(a)),S()(r.clientRequest,e.liveStreaming.startOptions,{ts:Date.now(),url:i,vid:parseInt(e.joinInfo.vid,10)}),s=null,a?(e.liveStreaming.connections.mix_streaming||e.liveStreaming.connect("mix_streaming"),r.clientRequest.transcodingConfig=JSON.parse(JSON.stringify(e.liveStreaming.transcodingConfig)),s=e.liveStreaming.connections.mix_streaming):("vp8"===t.codec&&o.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&o.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer"),e.liveStreaming.connections.raw_streaming||e.liveStreaming.connect("raw_streaming"),s=e.liveStreaming.connections.raw_streaming),c=null,d={},n.prev=7,n.next=10,s.request(r);case 10:c=n.sent,d.type="liveStreamingStarted",d.reason=c&&c.reason,d.status=c&&c.code,d.url=c&&c.serverResponse&&c.serverResponse.url,e.gatewayClient.dispatchEvent(d),n.next=26;break;case 18:throw n.prev=18,n.t0=n.catch(7),d.type="liveStreamingFailed",d.reason=n.t0&&n.t0.reason,d.status=n.t0&&n.t0.code,d.url=n.t0&&n.t0.serverResponse&&n.t0.serverResponse.url,e.gatewayClient.dispatchEvent(d),n.t0;case 26:return e.liveStreaming.pushStates[i]={transcodingEnabled:a,url:i},n.abrupt("return",c);case 28:case"end":return n.stop()}},n,this,[[7,18]])})),function(e,t){return l.apply(this,arguments)}),e.setLiveTranscoding=function(n,i){o.default.debug("setLiveTranscoding: ".concat(JSON.stringify(n))),Object(re.checkValidObject)(n,"transcoding");var a=n,r=a.width,c=a.height,d=a.videoBitrate,u=a.videoFramerate,l=a.lowLatency,p=a.audioSampleRate,f=a.audioBitrate,m=a.audioChannels,g=a.videoGop,v=a.images,h=a.videoCodecProfile,S=a.userCount,_=a.backgroundColor,E=a.transcodingUsers;if(E||(E=n.userConfigs),Object(re.isEmpty)(r)||Object(re.checkValidNumber)(r,"width"),Object(re.isEmpty)(c)||Object(re.checkValidNumber)(c,"height"),Object(re.isEmpty)(d)||Object(re.checkValidNumber)(d,"videoBitrate",1,1e6),Object(re.isEmpty)(u)||Object(re.checkValidNumber)(u,"videoFramerate"),Object(re.isEmpty)(l)||Object(re.checkValidBoolean)(l,"lowLatency"),Object(re.isEmpty)(p)||Object(re.checkValidEnum)(p,"audioSampleRate",[32e3,44100,48e3]),Object(re.isEmpty)(f)||Object(re.checkValidNumber)(f,"audioBitrate",1,128),Object(re.isEmpty)(m)||Object(re.checkValidEnum)(m,"audioChannels",[1,2,3,4,5]),Object(re.isEmpty)(g)||Object(re.checkValidNumber)(g,"videoGop"),Object(re.isEmpty)(h)||Object(re.checkValidEnum)(h,"videoCodecProfile",[66,77,100]),Object(re.isEmpty)(S)||Object(re.checkValidNumber)(S,"userCount",0,17),Object(re.isEmpty)(_)||Object(re.checkValidNumber)(_,"backgroundColor",0,16777215),!Object(re.isEmpty)(E)){if(!Object(re.isArray)(E))throw new Error("[transcodingUsers]: transcodingUsers should be Array");if(E.length>17)throw new Error("The length of transcodingUsers cannot greater than 17");E.map(function(e,t){if(!Object(re.isEmpty)(e.uid)&&!Jt(e.uid)&&!Object(re.isValidString)(e.uid,1,255))throw new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");if(Object(re.isEmpty)(e.x)||Object(re.checkValidNumber)(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Object(re.isEmpty)(e.y)||Object(re.checkValidNumber)(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Object(re.isEmpty)(e.width)||Object(re.checkValidNumber)(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Object(re.isEmpty)(e.height)||Object(re.checkValidNumber)(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Object(re.isEmpty)(e.zOrder)||Object(re.checkValidNumber)(e.zOrder,"transcodingUser[".concat(t,"].zOrder"),0,100),!(Object(re.isEmpty)(e.alpha)||Object(re.isNumber)(e.alpha)&&e.alpha<=1&&e.alpha>=0))throw new Error("transcodingUser[${index}].alpha: The value range is [0, 1]")})}if(!Object(re.isEmpty)(v)){if(!Object(re.isArray)(v))throw new Error("[images]: images should be Array");v.map(function(e,t){if(Object(re.checkValidString)(e.url,"images[".concat(t,"].url"),1,1024),Object(re.isEmpty)(e.x)?e.x=0:Object(re.checkValidNumber)(e.x,"images[".concat(t,"].x"),0,1e4),Object(re.isEmpty)(e.y)?e.y=0:Object(re.checkValidNumber)(e.y,"images[".concat(t,"].y"),0,1e4),Object(re.isEmpty)(e.width)?e.width=160:Object(re.checkValidNumber)(e.width,"images[".concat(t,"].width"),0,1e4),Object(re.isEmpty)(e.height)?e.height=160:Object(re.checkValidNumber)(e.height,"images[".concat(t,"].height"),0,1e4),Object(re.isEmpty)(e.zOrder)?e.zOrder=0:Object(re.checkValidNumber)(e.zOrder,"images[".concat(t,"].zOrder"),0,100),Object(re.isEmpty)(e.alpha))e.alpha=1;else if(!(Object(re.isNumber)(e.alpha)&&e.alpha<=1&&e.alpha>=0))throw new Error("image[${index}].alpha: The value range is [0, 1]")})}var I=s.b.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"});if((n=JSON.parse(JSON.stringify(n))).transcodingUsers&&(n.userConfigs=n.transcodingUsers,delete n.transcodingUsers),e.joinInfo.stringUid&&n.userConfigs&&n.userConfigs.length){var y=[];n.userConfigs.forEach(function(t){y.push(gt(e.joinInfo,e.gatewayClient,t.uid).then(function(e){t.uid=e.uid}))});var T=Promise.all(y).then(function(){return e._setLiveTranscoding(n,i)});return T.then(function(e){I(null,e)}).catch(function(e){I(e)}),T}var b=e._setLiveTranscoding(n,i);return b.then(function(e){I(null,e)}).catch(function(e){I(e)}),b},e._setLiveTranscoding=(u=ue()(ce.a.mark(function t(n,i){var a,r,o;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.liveStreaming.transcodingConfig=S()(e.liveStreaming.transcodingConfig,n),"boolean"!=typeof i&&(i=!!e.liveStreaming.connections.mix_streaming),a=JSON.parse(JSON.stringify({allocate:!1,clientRequest:{command:"UpdateTranscoding",transcodingConfig:e.liveStreaming.transcodingConfig},command:"request"})),r={},!i){t.next=16;break}return e.liveStreaming.connections.mix_streaming||e.liveStreaming.connect("mix_streaming"),t.next=8,e.liveStreaming.connections.mix_streaming.request(a);case 8:return o=t.sent,r.type="liveTranscodingUpdated",r.reason=o.reason,r.status=o.code,e.gatewayClient.dispatchEvent(r),t.abrupt("return",o);case 16:return t.abrupt("return",{code:200,reason:"success"});case 17:case"end":return t.stop()}},t,this)})),function(e,t){return u.apply(this,arguments)}),e.stopLiveStreaming=function(n,i){Object(re.checkValidString)(n,"url",1,1024);var a=s.b.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),r=e._stopLiveStreaming(n,i);return r.then(function(e){a(null,e)}).catch(function(e){a(e)}),r},e._stopLiveStreaming=(d=ue()(ce.a.mark(function t(n,i,a){var r,o,s,c,d,u;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,o=e.liveStreaming.pushStates[n],r=o?o.transcodingEnabled?"mix_streaming":"raw_streaming":i?"mix_streaming":"raw_streaming",s={allocate:!1,clientRequest:{command:"UnpublishStream",url:n},command:"request"},e.liveStreaming.connections[r]||e.liveStreaming.connect(r),c=null,t.prev=6,t.next=9,e.liveStreaming.connections[r].request(s);case 9:c=t.sent,(d={}).type="liveStreamingStopped",d.reason=c&&c.reason,d.status=c&&c.code,d.url=c&&c.serverResponse&&c.serverResponse.url,e.gatewayClient.dispatchEvent(d),t.next=27;break;case 18:throw t.prev=18,t.t0=t.catch(6),(u={}).type="liveStreamingStopped",u.reason=t.t0&&t.t0.reason,u.status=t.t0&&t.t0.code,u.url=t.t0&&t.t0.serverResponse&&t.t0.serverResponse.url,e.gatewayClient.dispatchEvent(u),t.t0;case 27:return a||delete e.liveStreaming.pushStates[n],t.abrupt("return",c);case 29:case"end":return t.stop()}},t,this,[[6,18]])})),function(e,t,n){return d.apply(this,arguments)}),e.liveStreaming.injectStreamTranscodingConfig={autoDestroyTime:30,audioBitrate:48,audioChannels:1,audioSampleRate:44100,height:0,videoBitrate:400,videoFramerate:15,videoGop:30,width:0},e.addInjectStreamUrl=function(i,a){Object(re.checkValidString)(i,"url",1,1024),Object(re.checkValidObject)(a,"config"),!Object(re.isEmpty)(a&&a.width)&&Object(re.checkValidNumber)(a.width,"config.width",0,1e4),!Object(re.isEmpty)(a&&a.height)&&Object(re.checkValidNumber)(a.height,"config.height",0,1e4),!Object(re.isEmpty)(a&&a.videoGop)&&Object(re.checkValidNumber)(a.videoGop,"config.videoGop",1,1e4),!Object(re.isEmpty)(a&&a.videoFramerate)&&Object(re.checkValidNumber)(a.videoFramerate,"config.videoFramerate",1,1e4),!Object(re.isEmpty)(a&&a.videoBitrate)&&Object(re.checkValidNumber)(a.videoBitrate,"config.videoBitrate",1,1e4),!Object(re.isEmpty)(a&&a.audioSampleRate)&&Object(re.checkValidEnum)(a.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),!Object(re.isEmpty)(a&&a.audioBitrate)&&Object(re.checkValidNumber)(a.audioBitrate,"config.audioBitrate",1,1e4),!Object(re.isEmpty)(a&&a.audioChannels)&&Object(re.checkValidNumber)(a.audioChannels,"config.audioChannels",1,2);var r=s.b.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:n,tag:"tracer"});if("audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw r(o),o}var c=e._addInjectStreamUrl(i,a);return c.then(function(e){r(null,e)}).catch(function(e){r(e)}),c},e._addInjectStreamUrl=(r=ue()(ce.a.mark(function n(i,a){var r,o,s,c,d;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=S()({},e.liveStreaming.injectStreamTranscodingConfig,a),o={allocate:!0,clientRequest:{cname:e.channel,command:"InjectStream",sid:t.sessionId,transcodingConfig:r,ts:Date.now(),url:i,vid:parseInt(e.joinInfo.vid,10)},command:"request"},e.liveStreaming.connections.inject_streaming||e.liveStreaming.connect("inject_streaming"),s=null,n.prev=4,n.next=7,e.liveStreaming.connections.inject_streaming.request(o);case 7:s=n.sent,c={reason:s&&s.reason,status:Kt(s&&s.code),type:"streamInjectedStatus",uid:s&&s.serverResponse&&s.serverResponse.inject_uid,url:s&&s.serverResponse&&s.serverResponse.url},e.gatewayClient.dispatchEvent(c),n.next=17;break;case 12:throw n.prev=12,n.t0=n.catch(4),d={reason:n.t0&&n.t0.reason,status:Kt(n.t0&&n.t0.code),type:"streamInjectedStatus",uid:n.t0&&n.t0.serverResponse&&n.t0.serverResponse.inject_uid,url:n.t0&&n.t0.serverResponse&&n.t0.serverResponse.url},e.gatewayClient.dispatchEvent(d),n.t0;case 17:return e.liveStreaming.pullStates[i]={transcodingConfig:r,url:i},n.abrupt("return",s);case 19:case"end":return n.stop()}},n,this,[[4,12]])})),function(e,t){return r.apply(this,arguments)}),e.removeInjectStreamUrl=(a=ue()(ce.a.mark(function n(i){var a,r,o=arguments;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Object(re.checkValidString)(i,"url",1,255),a=s.b.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:o,tag:"tracer"}),(r=e._removeInjectStreamUrl(i)).then(function(e){a(null,e)}).catch(function(e){a(e)}),n.abrupt("return",r);case 5:case"end":return n.stop()}},n,this)})),function(e){return a.apply(this,arguments)}),e._removeInjectStreamUrl=(i=ue()(ce.a.mark(function t(n){var i,a,r,o;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={allocate:!1,clientRequest:{command:"UninjectStream",url:n},command:"request"},e.liveStreaming.connections.inject_streaming||e.liveStreaming.connect("inject_streaming"),a=null,t.prev=3,t.next=6,e.liveStreaming.connections.inject_streaming.request(i);case 6:a=t.sent,r={reason:a&&a.reason,status:zt(a&&a.code),type:"streamInjectedStatus",uid:a&&a.serverResponse&&a.serverResponse.inject_uid,url:a&&a.serverResponse&&a.serverResponse.url},e.gatewayClient.dispatchEvent(r),t.next=16;break;case 11:throw t.prev=11,t.t0=t.catch(3),o={reason:t.t0&&t.t0.reason,status:zt(t.t0&&t.t0.code),type:"streamInjectedStatus",uid:t.t0&&t.t0.serverResponse&&t.t0.serverResponse.inject_uid,url:t.t0&&t.t0.serverResponse&&t.t0.serverResponse.url},e.gatewayClient.dispatchEvent(o),t.t0;case 16:return delete e.liveStreaming.pullStates[n],t.abrupt("return",a);case 18:case"end":return t.stop()}},t,this,[[3,11]])})),function(e){return i.apply(this,arguments)});var i;var a;var r;var d;var u;var l;var p;var f;var m}(t,e),Object(re.isEmpty)(e.turnServer)||t.setTurnServer(e.turnServer),Object(re.isEmpty)(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role="host"),t.gatewayClient.on("onMultiIP",function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=Rt.CONNECTING;var n=function(e){o.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,function(e){o.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(e)},t.onFailure):(t.gatewayClient.joinInfo=S()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=gt(joinInfo,t.gatewayClient),t.userAccountReq.then(function(e){o.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,ft(t.joinInfo,n,t.onFailure)}).catch(function(e){o.default.error("getUserAccount rejected",e),t.onFailure(e)})):ft(t.joinInfo,n,t.onFailure)}),t.gatewayClient.on("rejoin-start",function(){t._renewSession(),s.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})}),t.gatewayClient.on("recover",function(){t._renewSession(),console.log("recover",e.sessionId),s.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})}),t.gatewayClient.on("rejoin",function(){var e=t.highStreamState;if(o.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n()}!t.highStream||0!==e&&1!==e||(o.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,function(e){e&&o.default.info("[".concat(t.clientId,"] "),e)}))}),t.gatewayClient.on("streamPublished",function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent(u({type:"stream-published",stream:e.stream})))}),t.gatewayClient.on("pubP2PLost",function(e){o.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,function(){t._publish(t.highStream,function(){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})},function(e){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})},!0)},function(e){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})},!0)}),t.gatewayClient.on("subP2PLost",function(e){o.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var n=e.stream.subscribeOptions;console.log("Re-subscribe stream",n,e.stream),t.gatewayClient.unsubscribe(e.stream,function(){e.stream.subscribeOptions=n,t.gatewayClient.subscribe(e.stream,function(){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:""})},function(n){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})})},function(n){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})})}),wt.on("networkTypeChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(n)}),ae.on("recordingDeviceChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(n)}),ae.on("playoutDeviceChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(n)}),ae.on("cameraChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(n)}),t.gatewayClient.on("streamTypeChange",function(n){var i=S()({},n,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(i),s.b.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(n))}),t},Qt={width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},$t=ae.getDevices,Zt=X,en=JSON.parse(JSON.stringify(r.SUPPORT_RESOLUTION_LIST));n.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:Qt,createClient:function(e){var t=s.b.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=S()({},e||{})).codec||(e.codec=function(e){switch(e){case"h264_interop":return"h264";default:return"vp8"}}(e.mode));var n=function(e){return-1===Xe.indexOf(e.mode)?V.INVALID_CLIENT_MODE:-1===Qe.indexOf(e.codec)?V.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&V.CLIENT_MODE_CODEC_MISMATCH}(e);if(n)throw o.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(n)),t(n),new Error(n);return o.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}}(e),t(null,e),Xt(e)},createStream:function(e){var t=s.b.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer"});Object(re.checkValidObject)(e,"StreamSpec");var n=e.streamID,i=e.audio,a=e.video,r=e.screen,c=e.screenAudio,d=(e.audioSource,e.videoSource,e.cameraId),u=e.facingMode,l=e.microphoneId,p=e.mirror,f=e.extensionId,m=e.mediaSource,g=e.audioProcessing;if(!Object(re.isEmpty)(n)&&!Object(ne.is32Uint)(n)&&!Object(re.isValidString)(n,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(re.checkValidBoolean)(i,"audio"),Object(re.checkValidBoolean)(a,"video"),Object(re.isEmpty)(r)||Object(re.checkValidBoolean)(r,"screen"),Object(re.isEmpty)(c)||Object(re.checkValidBoolean)(c,"screenAudio"),Object(re.isEmpty)(d)||Object(re.checkValidString)(d,"cameraId",0,255,!1),Object(re.isEmpty)(u)||Object(re.checkValidEnum)(u,"facingMode",["user","environment","left","right"]),Object(re.isEmpty)(l)||Object(re.checkValidString)(l,"microphoneId",0,255,!1),Object(re.isEmpty)(f)||Object(re.checkValidString)(f,"extensionId"),Object(re.isEmpty)(m)||Object(re.checkValidEnum)(m,"mediaSource",["screen","application","window"]),Object(re.isEmpty)(p)||Object(re.checkValidBoolean)(p,"mirror"),!Object(re.isEmpty)(g)){var v=g.AGC,h=g.AEC,S=g.ANS;Object(re.isEmpty)(v)||Object(re.checkValidBoolean)(v,"AGC"),Object(re.isEmpty)(h)||Object(re.checkValidBoolean)(h,"AEC"),Object(re.isEmpty)(S)||Object(re.checkValidBoolean)(S,"ANS")}o.default.debug("Create stream"),!0===c&&!0===i&&o.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time");var _=Ye(e);return t(),_},Logger:o.default,report:s.b,getDevices:$t,getScreenSources:Zt,getParameter:r.getParameter,setParameter:r.setParameter,checkSystemRequirements:function(){var e=s.b.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket,a=!!t&&!!n&&!!i,r=!1;o.default.debug(m.getBrowserInfo(),"isAPISupport:"+a),m.isChrome()&&m.getBrowserVersion()>=58&&"iOS"!==m.getBrowserOS()&&(r=!0),m.isFireFox()&&m.getBrowserVersion()>=56&&(r=!0),m.isOpera()&&m.getBrowserVersion()>=45&&(r=!0),m.isSafari()&&m.getBrowserVersion()>=11&&(r=!0),m.isEdge()&&(r=!0),(m.isWeChatBrowser()||m.isQQBrowser())&&"iOS"!==m.getBrowserOS()&&(r=!0),m.isSupportedPC()||m.isSupportedMobile()||(r=!1);var c=a&&r;return e(null,c),c},getSupportedCodec:Je.getSupportedCodec,ChannelMediaRelayConfiguration:Ke.ChannelMediaRelayConfiguration,VERSION:r.VERSION,BUILD:r.BUILD,PROFILE_TABLE:en,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2}}]).default});

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
( function( global, factory ) {

	"use strict";

	if (  true && typeof module.exports === "object" ) {

		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
} )( typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1
// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode
// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common
// enough that all such attempts are guarded in a try block.
"use strict";

var arr = [];

var document = window.document;

var getProto = Object.getPrototypeOf;

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var fnToString = hasOwn.toString;

var ObjectFunctionString = fnToString.call( Object );

var support = {};

var isFunction = function isFunction( obj ) {

      // Support: Chrome <=57, Firefox <=52
      // In some browsers, typeof returns "function" for HTML <object> elements
      // (i.e., `typeof document.createElement( "object" ) === "function"`).
      // We don't want to classify *any* DOM node as a function.
      return typeof obj === "function" && typeof obj.nodeType !== "number";
  };


var isWindow = function isWindow( obj ) {
		return obj != null && obj === obj.window;
	};




	var preservedScriptAttributes = {
		type: true,
		src: true,
		nonce: true,
		noModule: true
	};

	function DOMEval( code, node, doc ) {
		doc = doc || document;

		var i, val,
			script = doc.createElement( "script" );

		script.text = code;
		if ( node ) {
			for ( i in preservedScriptAttributes ) {

				// Support: Firefox 64+, Edge 18+
				// Some browsers don't support the "nonce" property on scripts.
				// On the other hand, just using `getAttribute` is not enough as
				// the `nonce` attribute is reset to an empty string whenever it
				// becomes browsing-context connected.
				// See https://github.com/whatwg/html/issues/2369
				// See https://html.spec.whatwg.org/#nonce-attributes
				// The `node.getAttribute` check was added for the sake of
				// `jQuery.globalEval` so that it can fake a nonce-containing node
				// via an object.
				val = node[ i ] || node.getAttribute && node.getAttribute( i );
				if ( val ) {
					script.setAttribute( i, val );
				}
			}
		}
		doc.head.appendChild( script ).parentNode.removeChild( script );
	}


function toType( obj ) {
	if ( obj == null ) {
		return obj + "";
	}

	// Support: Android <=2.3 only (functionish RegExp)
	return typeof obj === "object" || typeof obj === "function" ?
		class2type[ toString.call( obj ) ] || "object" :
		typeof obj;
}
/* global Symbol */
// Defining this global in .eslintrc.json would create a danger of using the global
// unguarded in another place, it seems safer to define global only for this module



var
	version = "3.4.1",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {

		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android <=4.0 only
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

jQuery.fn = jQuery.prototype = {

	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {

		// Return all the elements in a clean array
		if ( num == null ) {
			return slice.call( this );
		}

		// Return just the one element from the set
		return num < 0 ? this[ num + this.length ] : this[ num ];
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	each: function( callback ) {
		return jQuery.each( this, callback );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map( this, function( elem, i ) {
			return callback.call( elem, i, elem );
		} ) );
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor();
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[ 0 ] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction( target ) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {

		// Only deal with non-null/undefined values
		if ( ( options = arguments[ i ] ) != null ) {

			// Extend the base object
			for ( name in options ) {
				copy = options[ name ];

				// Prevent Object.prototype pollution
				// Prevent never-ending loop
				if ( name === "__proto__" || target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject( copy ) ||
					( copyIsArray = Array.isArray( copy ) ) ) ) {
					src = target[ name ];

					// Ensure proper type for the source value
					if ( copyIsArray && !Array.isArray( src ) ) {
						clone = [];
					} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {
						clone = {};
					} else {
						clone = src;
					}
					copyIsArray = false;

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend( {

	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isPlainObject: function( obj ) {
		var proto, Ctor;

		// Detect obvious negatives
		// Use toString instead of jQuery.type to catch host objects
		if ( !obj || toString.call( obj ) !== "[object Object]" ) {
			return false;
		}

		proto = getProto( obj );

		// Objects with no prototype (e.g., `Object.create( null )`) are plain
		if ( !proto ) {
			return true;
		}

		// Objects with prototype are plain iff they were constructed by a global Object function
		Ctor = hasOwn.call( proto, "constructor" ) && proto.constructor;
		return typeof Ctor === "function" && fnToString.call( Ctor ) === ObjectFunctionString;
	},

	isEmptyObject: function( obj ) {
		var name;

		for ( name in obj ) {
			return false;
		}
		return true;
	},

	// Evaluates a script in a global context
	globalEval: function( code, options ) {
		DOMEval( code, { nonce: options && options.nonce } );
	},

	each: function( obj, callback ) {
		var length, i = 0;

		if ( isArrayLike( obj ) ) {
			length = obj.length;
			for ( ; i < length; i++ ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		} else {
			for ( i in obj ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		}

		return obj;
	},

	// Support: Android <=4.0 only
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArrayLike( Object( arr ) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	// Support: Android <=4.0 only, PhantomJS 1 only
	// push.apply(_, arraylike) throws on ancient WebKit
	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var length, value,
			i = 0,
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArrayLike( elems ) ) {
			length = elems.length;
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
} );

if ( typeof Symbol === "function" ) {
	jQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];
}

// Populate the class2type map
jQuery.each( "Boolean Number String Function Array Date RegExp Object Error Symbol".split( " " ),
function( i, name ) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
} );

function isArrayLike( obj ) {

	// Support: real iOS 8.2 only (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = !!obj && "length" in obj && obj.length,
		type = toType( obj );

	if ( isFunction( obj ) || isWindow( obj ) ) {
		return false;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	nonnativeSelectorCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// https://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",

	// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + identifier + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),
	rdescend = new RegExp( whitespace + "|>" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + identifier + ")" ),
		"CLASS": new RegExp( "^\\.(" + identifier + ")" ),
		"TAG": new RegExp( "^(" + identifier + "|[*])" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rhtml = /HTML$/i,
	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,

	// CSS escapes
	// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// CSS string/identifier serialization
	// https://drafts.csswg.org/cssom/#common-serializing-idioms
	rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
	fcssescape = function( ch, asCodePoint ) {
		if ( asCodePoint ) {

			// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
			if ( ch === "\0" ) {
				return "\uFFFD";
			}

			// Control characters and (dependent upon position) numbers get escaped as code points
			return ch.slice( 0, -1 ) + "\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + " ";
		}

		// Other potentially-special ASCII characters get backslash-escaped
		return "\\" + ch;
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	},

	inDisabledFieldset = addCombinator(
		function( elem ) {
			return elem.disabled === true && elem.nodeName.toLowerCase() === "fieldset";
		},
		{ dir: "parentNode", next: "legend" }
	);

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var m, i, elem, nid, match, groups, newSelector,
		newContext = context && context.ownerDocument,

		// nodeType defaults to 9, since context defaults to document
		nodeType = context ? context.nodeType : 9;

	results = results || [];

	// Return early from calls with invalid selector or context
	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	// Try to shortcut find operations (as opposed to filters) in HTML documents
	if ( !seed ) {

		if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
			setDocument( context );
		}
		context = context || document;

		if ( documentIsHTML ) {

			// If the selector is sufficiently simple, try using a "get*By*" DOM method
			// (excepting DocumentFragment context, where the methods don't exist)
			if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {

				// ID selector
				if ( (m = match[1]) ) {

					// Document context
					if ( nodeType === 9 ) {
						if ( (elem = context.getElementById( m )) ) {

							// Support: IE, Opera, Webkit
							// TODO: identify versions
							// getElementById can match elements by name instead of ID
							if ( elem.id === m ) {
								results.push( elem );
								return results;
							}
						} else {
							return results;
						}

					// Element context
					} else {

						// Support: IE, Opera, Webkit
						// TODO: identify versions
						// getElementById can match elements by name instead of ID
						if ( newContext && (elem = newContext.getElementById( m )) &&
							contains( context, elem ) &&
							elem.id === m ) {

							results.push( elem );
							return results;
						}
					}

				// Type selector
				} else if ( match[2] ) {
					push.apply( results, context.getElementsByTagName( selector ) );
					return results;

				// Class selector
				} else if ( (m = match[3]) && support.getElementsByClassName &&
					context.getElementsByClassName ) {

					push.apply( results, context.getElementsByClassName( m ) );
					return results;
				}
			}

			// Take advantage of querySelectorAll
			if ( support.qsa &&
				!nonnativeSelectorCache[ selector + " " ] &&
				(!rbuggyQSA || !rbuggyQSA.test( selector )) &&

				// Support: IE 8 only
				// Exclude object elements
				(nodeType !== 1 || context.nodeName.toLowerCase() !== "object") ) {

				newSelector = selector;
				newContext = context;

				// qSA considers elements outside a scoping root when evaluating child or
				// descendant combinators, which is not what we want.
				// In such cases, we work around the behavior by prefixing every selector in the
				// list with an ID selector referencing the scope context.
				// Thanks to Andrew Dupont for this technique.
				if ( nodeType === 1 && rdescend.test( selector ) ) {

					// Capture the context ID, setting it first if necessary
					if ( (nid = context.getAttribute( "id" )) ) {
						nid = nid.replace( rcssescape, fcssescape );
					} else {
						context.setAttribute( "id", (nid = expando) );
					}

					// Prefix every selector in the list
					groups = tokenize( selector );
					i = groups.length;
					while ( i-- ) {
						groups[i] = "#" + nid + " " + toSelector( groups[i] );
					}
					newSelector = groups.join( "," );

					// Expand context for sibling selectors
					newContext = rsibling.test( selector ) && testContext( context.parentNode ) ||
						context;
				}

				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch ( qsaError ) {
					nonnativeSelectorCache( selector, true );
				} finally {
					if ( nid === expando ) {
						context.removeAttribute( "id" );
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {function(string, object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created element and returns a boolean result
 */
function assert( fn ) {
	var el = document.createElement("fieldset");

	try {
		return !!fn( el );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( el.parentNode ) {
			el.parentNode.removeChild( el );
		}
		// release memory in IE
		el = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = arr.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			a.sourceIndex - b.sourceIndex;

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for :enabled/:disabled
 * @param {Boolean} disabled true for :disabled; false for :enabled
 */
function createDisabledPseudo( disabled ) {

	// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable
	return function( elem ) {

		// Only certain elements can match :enabled or :disabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled
		if ( "form" in elem ) {

			// Check for inherited disabledness on relevant non-disabled elements:
			// * listed form-associated elements in a disabled fieldset
			//   https://html.spec.whatwg.org/multipage/forms.html#category-listed
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled
			// * option elements in a disabled optgroup
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled
			// All such elements have a "form" property.
			if ( elem.parentNode && elem.disabled === false ) {

				// Option elements defer to a parent optgroup if present
				if ( "label" in elem ) {
					if ( "label" in elem.parentNode ) {
						return elem.parentNode.disabled === disabled;
					} else {
						return elem.disabled === disabled;
					}
				}

				// Support: IE 6 - 11
				// Use the isDisabled shortcut property to check for disabled fieldset ancestors
				return elem.isDisabled === disabled ||

					// Where there is no isDisabled, check manually
					/* jshint -W018 */
					elem.isDisabled !== !disabled &&
						inDisabledFieldset( elem ) === disabled;
			}

			return elem.disabled === disabled;

		// Try to winnow out elements that can't be disabled before trusting the disabled property.
		// Some victims get caught in our net (label, legend, menu, track), but it shouldn't
		// even exist on them, let alone have a boolean value.
		} else if ( "label" in elem ) {
			return elem.disabled === disabled;
		}

		// Remaining elements are neither :enabled nor :disabled
		return false;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	var namespace = elem.namespaceURI,
		docElem = (elem.ownerDocument || elem).documentElement;

	// Support: IE <=8
	// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes
	// https://bugs.jquery.com/ticket/4833
	return !rhtml.test( namespace || docElem && docElem.nodeName || "HTML" );
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, subWindow,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// Return early if doc is invalid or already selected
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Update global variables
	document = doc;
	docElem = document.documentElement;
	documentIsHTML = !isXML( document );

	// Support: IE 9-11, Edge
	// Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
	if ( preferredDoc !== document &&
		(subWindow = document.defaultView) && subWindow.top !== subWindow ) {

		// Support: IE 11, Edge
		if ( subWindow.addEventListener ) {
			subWindow.addEventListener( "unload", unloadHandler, false );

		// Support: IE 9 - 10 only
		} else if ( subWindow.attachEvent ) {
			subWindow.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( el ) {
		el.className = "i";
		return !el.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( el ) {
		el.appendChild( document.createComment("") );
		return !el.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( document.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programmatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( el ) {
		docElem.appendChild( el ).id = expando;
		return !document.getElementsByName || !document.getElementsByName( expando ).length;
	});

	// ID filter and find
	if ( support.getById ) {
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var elem = context.getElementById( id );
				return elem ? [ elem ] : [];
			}
		};
	} else {
		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" &&
					elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};

		// Support: IE 6 - 7 only
		// getElementById is not reliable as a find shortcut
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var node, i, elems,
					elem = context.getElementById( id );

				if ( elem ) {

					// Verify the id attribute
					node = elem.getAttributeNode("id");
					if ( node && node.value === id ) {
						return [ elem ];
					}

					// Fall back on getElementsByName
					elems = context.getElementsByName( id );
					i = 0;
					while ( (elem = elems[i++]) ) {
						node = elem.getAttributeNode("id");
						if ( node && node.value === id ) {
							return [ elem ];
						}
					}
				}

				return [];
			}
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== "undefined" && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See https://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( document.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( el ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// https://bugs.jquery.com/ticket/12359
			docElem.appendChild( el ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\r\\' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( el.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !el.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
			if ( !el.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !el.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibling-combinator selector` fails
			if ( !el.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( el ) {
			el.innerHTML = "<a href='' disabled='disabled'></a>" +
				"<select disabled='disabled'><option/></select>";

			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = document.createElement("input");
			input.setAttribute( "type", "hidden" );
			el.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( el.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( el.querySelectorAll(":enabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: IE9-11+
			// IE's :disabled selector does not pick up the children of disabled fieldsets
			docElem.appendChild( el ).disabled = true;
			if ( el.querySelectorAll(":disabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			el.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( el ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( el, "*" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( el, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully self-exclusive
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === document ? -1 :
				b === document ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	if ( support.matchesSelector && documentIsHTML &&
		!nonnativeSelectorCache[ expr + " " ] &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {
			nonnativeSelectorCache( expr, true );
		}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.escape = function( sel ) {
	return (sel + "").replace( rcssescape, fcssescape );
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, uniqueCache, outerCache, node, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType,
						diff = false;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) {

										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {

							// Seek `elem` from a previously-cached index

							// ...in a gzip-friendly way
							node = parent;
							outerCache = node[ expando ] || (node[ expando ] = {});

							// Support: IE <9 only
							// Defend against cloned attroperties (jQuery gh-1709)
							uniqueCache = outerCache[ node.uniqueID ] ||
								(outerCache[ node.uniqueID ] = {});

							cache = uniqueCache[ type ] || [];
							nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
							diff = nodeIndex && cache[ 2 ];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									uniqueCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else {
							// Use previously-cached element index if available
							if ( useCache ) {
								// ...in a gzip-friendly way
								node = elem;
								outerCache = node[ expando ] || (node[ expando ] = {});

								// Support: IE <9 only
								// Defend against cloned attroperties (jQuery gh-1709)
								uniqueCache = outerCache[ node.uniqueID ] ||
									(outerCache[ node.uniqueID ] = {});

								cache = uniqueCache[ type ] || [];
								nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
								diff = nodeIndex;
							}

							// xml :nth-child(...)
							// or :nth-last-child(...) or :nth(-last)?-of-type(...)
							if ( diff === false ) {
								// Use the same loop as above to seek `elem` from the start
								while ( (node = ++nodeIndex && node && node[ dir ] ||
									(diff = nodeIndex = 0) || start.pop()) ) {

									if ( ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) &&
										++diff ) {

										// Cache the index of each encountered element
										if ( useCache ) {
											outerCache = node[ expando ] || (node[ expando ] = {});

											// Support: IE <9 only
											// Defend against cloned attroperties (jQuery gh-1709)
											uniqueCache = outerCache[ node.uniqueID ] ||
												(outerCache[ node.uniqueID ] = {});

											uniqueCache[ type ] = [ dirruns, diff ];
										}

										if ( node === elem ) {
											break;
										}
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": createDisabledPseudo( false ),
		"disabled": createDisabledPseudo( true ),

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ?
				argument + length :
				argument > length ?
					length :
					argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		skip = combinator.next,
		key = skip || dir,
		checkNonElements = base && key === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
			return false;
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, uniqueCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});

						// Support: IE <9 only
						// Defend against cloned attroperties (jQuery gh-1709)
						uniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});

						if ( skip && skip === elem.nodeName.toLowerCase() ) {
							elem = elem[ dir ] || elem;
						} else if ( (oldCache = uniqueCache[ key ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							uniqueCache[ key ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
			return false;
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context === document || context || outermost;
			}

			// Add elements passing elementMatchers directly to results
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					if ( !context && elem.ownerDocument !== document ) {
						setDocument( elem );
						xml = !documentIsHTML;
					}
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context || document, xml) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// `i` is now the count of elements visited above, and adding it to `matchedCount`
			// makes the latter nonnegative.
			matchedCount += i;

			// Apply set filters to unmatched elements
			// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
			// equals `i`), unless we didn't visit _any_ elements in the above loop because we have
			// no element matchers and no seed.
			// Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
			// case, which will result in a "00" `matchedCount` that differs from `i` but is also
			// numerically zero.
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is only one selector in the list and no seed
	// (the latter of which guarantees us context)
	if ( match.length === 1 ) {

		// Reduce context if the leading compound selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				context.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		!context || rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( el ) {
	// Should return 1, but returns 4 (following)
	return el.compareDocumentPosition( document.createElement("fieldset") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( el ) {
	el.innerHTML = "<a href='#'></a>";
	return el.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( el ) {
	el.innerHTML = "<input/>";
	el.firstChild.setAttribute( "value", "" );
	return el.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( el ) {
	return el.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;

// Deprecated
jQuery.expr[ ":" ] = jQuery.expr.pseudos;
jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;
jQuery.escapeSelector = Sizzle.escape;




var dir = function( elem, dir, until ) {
	var matched = [],
		truncate = until !== undefined;

	while ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {
		if ( elem.nodeType === 1 ) {
			if ( truncate && jQuery( elem ).is( until ) ) {
				break;
			}
			matched.push( elem );
		}
	}
	return matched;
};


var siblings = function( n, elem ) {
	var matched = [];

	for ( ; n; n = n.nextSibling ) {
		if ( n.nodeType === 1 && n !== elem ) {
			matched.push( n );
		}
	}

	return matched;
};


var rneedsContext = jQuery.expr.match.needsContext;



function nodeName( elem, name ) {

  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();

};
var rsingleTag = ( /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i );



// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			return !!qualifier.call( elem, i, elem ) !== not;
		} );
	}

	// Single element
	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		} );
	}

	// Arraylike of elements (jQuery, arguments, Array)
	if ( typeof qualifier !== "string" ) {
		return jQuery.grep( elements, function( elem ) {
			return ( indexOf.call( qualifier, elem ) > -1 ) !== not;
		} );
	}

	// Filtered directly for both simple and complex selectors
	return jQuery.filter( qualifier, elements, not );
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	if ( elems.length === 1 && elem.nodeType === 1 ) {
		return jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];
	}

	return jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
		return elem.nodeType === 1;
	} ) );
};

jQuery.fn.extend( {
	find: function( selector ) {
		var i, ret,
			len = this.length,
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter( function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			} ) );
		}

		ret = this.pushStack( [] );

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		return len > 1 ? jQuery.uniqueSort( ret ) : ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow( this, selector || [], false ) );
	},
	not: function( selector ) {
		return this.pushStack( winnow( this, selector || [], true ) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
} );


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	// Shortcut simple #id case for speed
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,

	init = jQuery.fn.init = function( selector, context, root ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Method init() accepts an alternate rootjQuery
		// so migrate can support jQuery.sub (gh-2101)
		root = root || rootjQuery;

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[ 0 ] === "<" &&
				selector[ selector.length - 1 ] === ">" &&
				selector.length >= 3 ) {

				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && ( match[ 1 ] || !context ) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[ 1 ] ) {
					context = context instanceof jQuery ? context[ 0 ] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[ 1 ],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {

							// Properties of context are called as methods if possible
							if ( isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[ 2 ] );

					if ( elem ) {

						// Inject the element directly into the jQuery object
						this[ 0 ] = elem;
						this.length = 1;
					}
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || root ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this[ 0 ] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( isFunction( selector ) ) {
			return root.ready !== undefined ?
				root.ready( selector ) :

				// Execute immediately if ready is not present
				selector( jQuery );
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,

	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend( {
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter( function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[ i ] ) ) {
					return true;
				}
			}
		} );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			targets = typeof selectors !== "string" && jQuery( selectors );

		// Positional selectors never match, since there's no _selection_ context
		if ( !rneedsContext.test( selectors ) ) {
			for ( ; i < l; i++ ) {
				for ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {

					// Always skip document fragments
					if ( cur.nodeType < 11 && ( targets ?
						targets.index( cur ) > -1 :

						// Don't pass non-elements to Sizzle
						cur.nodeType === 1 &&
							jQuery.find.matchesSelector( cur, selectors ) ) ) {

						matched.push( cur );
						break;
					}
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.uniqueSort(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	}
} );

function sibling( cur, dir ) {
	while ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each( {
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return siblings( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return siblings( elem.firstChild );
	},
	contents: function( elem ) {
		if ( typeof elem.contentDocument !== "undefined" ) {
			return elem.contentDocument;
		}

		// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only
		// Treat the template element as a regular one in browsers that
		// don't support it.
		if ( nodeName( elem, "template" ) ) {
			elem = elem.content || elem;
		}

		return jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {

			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.uniqueSort( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
} );
var rnothtmlwhite = ( /[^\x20\t\r\n\f]+/g );



// Convert String-formatted options into Object-formatted ones
function createOptions( options ) {
	var object = {};
	jQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	} );
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		createOptions( options ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,

		// Last fire value for non-forgettable lists
		memory,

		// Flag to know if list was already fired
		fired,

		// Flag to prevent firing
		locked,

		// Actual callback list
		list = [],

		// Queue of execution data for repeatable lists
		queue = [],

		// Index of currently firing callback (modified by add/remove as needed)
		firingIndex = -1,

		// Fire callbacks
		fire = function() {

			// Enforce single-firing
			locked = locked || options.once;

			// Execute callbacks for all pending executions,
			// respecting firingIndex overrides and runtime changes
			fired = firing = true;
			for ( ; queue.length; firingIndex = -1 ) {
				memory = queue.shift();
				while ( ++firingIndex < list.length ) {

					// Run callback and check for early termination
					if ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&
						options.stopOnFalse ) {

						// Jump to end and forget the data so .add doesn't re-fire
						firingIndex = list.length;
						memory = false;
					}
				}
			}

			// Forget the data if we're done with it
			if ( !options.memory ) {
				memory = false;
			}

			firing = false;

			// Clean up if we're done firing for good
			if ( locked ) {

				// Keep an empty list if we have data for future add calls
				if ( memory ) {
					list = [];

				// Otherwise, this object is spent
				} else {
					list = "";
				}
			}
		},

		// Actual Callbacks object
		self = {

			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {

					// If we have memory from a past run, we should fire after adding
					if ( memory && !firing ) {
						firingIndex = list.length - 1;
						queue.push( memory );
					}

					( function add( args ) {
						jQuery.each( args, function( _, arg ) {
							if ( isFunction( arg ) ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && toType( arg ) !== "string" ) {

								// Inspect recursively
								add( arg );
							}
						} );
					} )( arguments );

					if ( memory && !firing ) {
						fire();
					}
				}
				return this;
			},

			// Remove a callback from the list
			remove: function() {
				jQuery.each( arguments, function( _, arg ) {
					var index;
					while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
						list.splice( index, 1 );

						// Handle firing indexes
						if ( index <= firingIndex ) {
							firingIndex--;
						}
					}
				} );
				return this;
			},

			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ?
					jQuery.inArray( fn, list ) > -1 :
					list.length > 0;
			},

			// Remove all callbacks from the list
			empty: function() {
				if ( list ) {
					list = [];
				}
				return this;
			},

			// Disable .fire and .add
			// Abort any current/pending executions
			// Clear all callbacks and values
			disable: function() {
				locked = queue = [];
				list = memory = "";
				return this;
			},
			disabled: function() {
				return !list;
			},

			// Disable .fire
			// Also disable .add unless we have memory (since it would have no effect)
			// Abort any pending executions
			lock: function() {
				locked = queue = [];
				if ( !memory && !firing ) {
					list = memory = "";
				}
				return this;
			},
			locked: function() {
				return !!locked;
			},

			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( !locked ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					queue.push( args );
					if ( !firing ) {
						fire();
					}
				}
				return this;
			},

			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},

			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


function Identity( v ) {
	return v;
}
function Thrower( ex ) {
	throw ex;
}

function adoptValue( value, resolve, reject, noValue ) {
	var method;

	try {

		// Check for promise aspect first to privilege synchronous behavior
		if ( value && isFunction( ( method = value.promise ) ) ) {
			method.call( value ).done( resolve ).fail( reject );

		// Other thenables
		} else if ( value && isFunction( ( method = value.then ) ) ) {
			method.call( value, resolve, reject );

		// Other non-thenables
		} else {

			// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:
			// * false: [ value ].slice( 0 ) => resolve( value )
			// * true: [ value ].slice( 1 ) => resolve()
			resolve.apply( undefined, [ value ].slice( noValue ) );
		}

	// For Promises/A+, convert exceptions into rejections
	// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in
	// Deferred#then to conditionally suppress rejection.
	} catch ( value ) {

		// Support: Android 4.0 only
		// Strict mode functions invoked without .call/.apply get global-object context
		reject.apply( undefined, [ value ] );
	}
}

jQuery.extend( {

	Deferred: function( func ) {
		var tuples = [

				// action, add listener, callbacks,
				// ... .then handlers, argument index, [final state]
				[ "notify", "progress", jQuery.Callbacks( "memory" ),
					jQuery.Callbacks( "memory" ), 2 ],
				[ "resolve", "done", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 0, "resolved" ],
				[ "reject", "fail", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 1, "rejected" ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				"catch": function( fn ) {
					return promise.then( null, fn );
				},

				// Keep pipe for back-compat
				pipe: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;

					return jQuery.Deferred( function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {

							// Map tuples (progress, done, fail) to arguments (done, fail, progress)
							var fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];

							// deferred.progress(function() { bind to newDefer or newDefer.notify })
							// deferred.done(function() { bind to newDefer or newDefer.resolve })
							// deferred.fail(function() { bind to newDefer or newDefer.reject })
							deferred[ tuple[ 1 ] ]( function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && isFunction( returned.promise ) ) {
									returned.promise()
										.progress( newDefer.notify )
										.done( newDefer.resolve )
										.fail( newDefer.reject );
								} else {
									newDefer[ tuple[ 0 ] + "With" ](
										this,
										fn ? [ returned ] : arguments
									);
								}
							} );
						} );
						fns = null;
					} ).promise();
				},
				then: function( onFulfilled, onRejected, onProgress ) {
					var maxDepth = 0;
					function resolve( depth, deferred, handler, special ) {
						return function() {
							var that = this,
								args = arguments,
								mightThrow = function() {
									var returned, then;

									// Support: Promises/A+ section 2.3.3.3.3
									// https://promisesaplus.com/#point-59
									// Ignore double-resolution attempts
									if ( depth < maxDepth ) {
										return;
									}

									returned = handler.apply( that, args );

									// Support: Promises/A+ section 2.3.1
									// https://promisesaplus.com/#point-48
									if ( returned === deferred.promise() ) {
										throw new TypeError( "Thenable self-resolution" );
									}

									// Support: Promises/A+ sections 2.3.3.1, 3.5
									// https://promisesaplus.com/#point-54
									// https://promisesaplus.com/#point-75
									// Retrieve `then` only once
									then = returned &&

										// Support: Promises/A+ section 2.3.4
										// https://promisesaplus.com/#point-64
										// Only check objects and functions for thenability
										( typeof returned === "object" ||
											typeof returned === "function" ) &&
										returned.then;

									// Handle a returned thenable
									if ( isFunction( then ) ) {

										// Special processors (notify) just wait for resolution
										if ( special ) {
											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special )
											);

										// Normal processors (resolve) also hook into progress
										} else {

											// ...and disregard older resolution values
											maxDepth++;

											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special ),
												resolve( maxDepth, deferred, Identity,
													deferred.notifyWith )
											);
										}

									// Handle all other returned values
									} else {

										// Only substitute handlers pass on context
										// and multiple values (non-spec behavior)
										if ( handler !== Identity ) {
											that = undefined;
											args = [ returned ];
										}

										// Process the value(s)
										// Default process is resolve
										( special || deferred.resolveWith )( that, args );
									}
								},

								// Only normal processors (resolve) catch and reject exceptions
								process = special ?
									mightThrow :
									function() {
										try {
											mightThrow();
										} catch ( e ) {

											if ( jQuery.Deferred.exceptionHook ) {
												jQuery.Deferred.exceptionHook( e,
													process.stackTrace );
											}

											// Support: Promises/A+ section 2.3.3.3.4.1
											// https://promisesaplus.com/#point-61
											// Ignore post-resolution exceptions
											if ( depth + 1 >= maxDepth ) {

												// Only substitute handlers pass on context
												// and multiple values (non-spec behavior)
												if ( handler !== Thrower ) {
													that = undefined;
													args = [ e ];
												}

												deferred.rejectWith( that, args );
											}
										}
									};

							// Support: Promises/A+ section 2.3.3.3.1
							// https://promisesaplus.com/#point-57
							// Re-resolve promises immediately to dodge false rejection from
							// subsequent errors
							if ( depth ) {
								process();
							} else {

								// Call an optional hook to record the stack, in case of exception
								// since it's otherwise lost when execution goes async
								if ( jQuery.Deferred.getStackHook ) {
									process.stackTrace = jQuery.Deferred.getStackHook();
								}
								window.setTimeout( process );
							}
						};
					}

					return jQuery.Deferred( function( newDefer ) {

						// progress_handlers.add( ... )
						tuples[ 0 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onProgress ) ?
									onProgress :
									Identity,
								newDefer.notifyWith
							)
						);

						// fulfilled_handlers.add( ... )
						tuples[ 1 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onFulfilled ) ?
									onFulfilled :
									Identity
							)
						);

						// rejected_handlers.add( ... )
						tuples[ 2 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onRejected ) ?
									onRejected :
									Thrower
							)
						);
					} ).promise();
				},

				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 5 ];

			// promise.progress = list.add
			// promise.done = list.add
			// promise.fail = list.add
			promise[ tuple[ 1 ] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(
					function() {

						// state = "resolved" (i.e., fulfilled)
						// state = "rejected"
						state = stateString;
					},

					// rejected_callbacks.disable
					// fulfilled_callbacks.disable
					tuples[ 3 - i ][ 2 ].disable,

					// rejected_handlers.disable
					// fulfilled_handlers.disable
					tuples[ 3 - i ][ 3 ].disable,

					// progress_callbacks.lock
					tuples[ 0 ][ 2 ].lock,

					// progress_handlers.lock
					tuples[ 0 ][ 3 ].lock
				);
			}

			// progress_handlers.fire
			// fulfilled_handlers.fire
			// rejected_handlers.fire
			list.add( tuple[ 3 ].fire );

			// deferred.notify = function() { deferred.notifyWith(...) }
			// deferred.resolve = function() { deferred.resolveWith(...) }
			// deferred.reject = function() { deferred.rejectWith(...) }
			deferred[ tuple[ 0 ] ] = function() {
				deferred[ tuple[ 0 ] + "With" ]( this === deferred ? undefined : this, arguments );
				return this;
			};

			// deferred.notifyWith = list.fireWith
			// deferred.resolveWith = list.fireWith
			// deferred.rejectWith = list.fireWith
			deferred[ tuple[ 0 ] + "With" ] = list.fireWith;
		} );

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( singleValue ) {
		var

			// count of uncompleted subordinates
			remaining = arguments.length,

			// count of unprocessed arguments
			i = remaining,

			// subordinate fulfillment data
			resolveContexts = Array( i ),
			resolveValues = slice.call( arguments ),

			// the master Deferred
			master = jQuery.Deferred(),

			// subordinate callback factory
			updateFunc = function( i ) {
				return function( value ) {
					resolveContexts[ i ] = this;
					resolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( !( --remaining ) ) {
						master.resolveWith( resolveContexts, resolveValues );
					}
				};
			};

		// Single- and empty arguments are adopted like Promise.resolve
		if ( remaining <= 1 ) {
			adoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,
				!remaining );

			// Use .then() to unwrap secondary thenables (cf. gh-3000)
			if ( master.state() === "pending" ||
				isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {

				return master.then();
			}
		}

		// Multiple arguments are aggregated like Promise.all array elements
		while ( i-- ) {
			adoptValue( resolveValues[ i ], updateFunc( i ), master.reject );
		}

		return master.promise();
	}
} );


// These usually indicate a programmer mistake during development,
// warn about them ASAP rather than swallowing them by default.
var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;

jQuery.Deferred.exceptionHook = function( error, stack ) {

	// Support: IE 8 - 9 only
	// Console exists when dev tools are open, which can happen at any time
	if ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {
		window.console.warn( "jQuery.Deferred exception: " + error.message, error.stack, stack );
	}
};




jQuery.readyException = function( error ) {
	window.setTimeout( function() {
		throw error;
	} );
};




// The deferred used on DOM ready
var readyList = jQuery.Deferred();

jQuery.fn.ready = function( fn ) {

	readyList
		.then( fn )

		// Wrap jQuery.readyException in a function so that the lookup
		// happens at the time of error handling instead of callback
		// registration.
		.catch( function( error ) {
			jQuery.readyException( error );
		} );

	return this;
};

jQuery.extend( {

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );
	}
} );

jQuery.ready.then = readyList.then;

// The ready event handler and self cleanup method
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed );
	window.removeEventListener( "load", completed );
	jQuery.ready();
}

// Catch cases where $(document).ready() is called
// after the browser event has already occurred.
// Support: IE <=9 - 10 only
// Older IE sometimes signals "interactive" too soon
if ( document.readyState === "complete" ||
	( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {

	// Handle it asynchronously to allow scripts the opportunity to delay ready
	window.setTimeout( jQuery.ready );

} else {

	// Use the handy event callback
	document.addEventListener( "DOMContentLoaded", completed );

	// A fallback to window.onload, that will always work
	window.addEventListener( "load", completed );
}




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( toType( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			access( elems, fn, i, key[ i ], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {

			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn(
					elems[ i ], key, raw ?
					value :
					value.call( elems[ i ], i, fn( elems[ i ], key ) )
				);
			}
		}
	}

	if ( chainable ) {
		return elems;
	}

	// Gets
	if ( bulk ) {
		return fn.call( elems );
	}

	return len ? fn( elems[ 0 ], key ) : emptyGet;
};


// Matches dashed string for camelizing
var rmsPrefix = /^-ms-/,
	rdashAlpha = /-([a-z])/g;

// Used by camelCase as callback to replace()
function fcamelCase( all, letter ) {
	return letter.toUpperCase();
}

// Convert dashed to camelCase; used by the css and data modules
// Support: IE <=9 - 11, Edge 12 - 15
// Microsoft forgot to hump their vendor prefix (#9572)
function camelCase( string ) {
	return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
}
var acceptData = function( owner ) {

	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};




function Data() {
	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;

Data.prototype = {

	cache: function( owner ) {

		// Check if the owner object already has a cache
		var value = owner[ this.expando ];

		// If not, create one
		if ( !value ) {
			value = {};

			// We can accept data for non-element nodes in modern browsers,
			// but we should not, see #8335.
			// Always return an empty object.
			if ( acceptData( owner ) ) {

				// If it is a node unlikely to be stringify-ed or looped over
				// use plain assignment
				if ( owner.nodeType ) {
					owner[ this.expando ] = value;

				// Otherwise secure it in a non-enumerable property
				// configurable must be true to allow the property to be
				// deleted when data is removed
				} else {
					Object.defineProperty( owner, this.expando, {
						value: value,
						configurable: true
					} );
				}
			}
		}

		return value;
	},
	set: function( owner, data, value ) {
		var prop,
			cache = this.cache( owner );

		// Handle: [ owner, key, value ] args
		// Always use camelCase key (gh-2257)
		if ( typeof data === "string" ) {
			cache[ camelCase( data ) ] = value;

		// Handle: [ owner, { properties } ] args
		} else {

			// Copy the properties one-by-one to the cache object
			for ( prop in data ) {
				cache[ camelCase( prop ) ] = data[ prop ];
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		return key === undefined ?
			this.cache( owner ) :

			// Always use camelCase key (gh-2257)
			owner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];
	},
	access: function( owner, key, value ) {

		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				( ( key && typeof key === "string" ) && value === undefined ) ) {

			return this.get( owner, key );
		}

		// When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i,
			cache = owner[ this.expando ];

		if ( cache === undefined ) {
			return;
		}

		if ( key !== undefined ) {

			// Support array or space separated string of keys
			if ( Array.isArray( key ) ) {

				// If key is an array of keys...
				// We always set camelCase keys, so remove that.
				key = key.map( camelCase );
			} else {
				key = camelCase( key );

				// If a key with the spaces exists, use it.
				// Otherwise, create an array by matching non-whitespace
				key = key in cache ?
					[ key ] :
					( key.match( rnothtmlwhite ) || [] );
			}

			i = key.length;

			while ( i-- ) {
				delete cache[ key[ i ] ];
			}
		}

		// Remove the expando if there's no more data
		if ( key === undefined || jQuery.isEmptyObject( cache ) ) {

			// Support: Chrome <=35 - 45
			// Webkit & Blink performance suffers when deleting properties
			// from DOM nodes, so set to undefined instead
			// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)
			if ( owner.nodeType ) {
				owner[ this.expando ] = undefined;
			} else {
				delete owner[ this.expando ];
			}
		}
	},
	hasData: function( owner ) {
		var cache = owner[ this.expando ];
		return cache !== undefined && !jQuery.isEmptyObject( cache );
	}
};
var dataPriv = new Data();

var dataUser = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /[A-Z]/g;

function getData( data ) {
	if ( data === "true" ) {
		return true;
	}

	if ( data === "false" ) {
		return false;
	}

	if ( data === "null" ) {
		return null;
	}

	// Only convert to a number if it doesn't change the string
	if ( data === +data + "" ) {
		return +data;
	}

	if ( rbrace.test( data ) ) {
		return JSON.parse( data );
	}

	return data;
}

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$&" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = getData( data );
			} catch ( e ) {}

			// Make sure we set the data so it isn't changed later
			dataUser.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend( {
	hasData: function( elem ) {
		return dataUser.hasData( elem ) || dataPriv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return dataUser.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		dataUser.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to dataPriv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return dataPriv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		dataPriv.remove( elem, name );
	}
} );

jQuery.fn.extend( {
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = dataUser.get( elem );

				if ( elem.nodeType === 1 && !dataPriv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE 11 only
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = camelCase( name.slice( 5 ) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					dataPriv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each( function() {
				dataUser.set( this, key );
			} );
		}

		return access( this, function( value ) {
			var data;

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {

				// Attempt to get data from the cache
				// The key will always be camelCased in Data
				data = dataUser.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each( function() {

				// We always store the camelCased key
				dataUser.set( this, key, value );
			} );
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each( function() {
			dataUser.remove( this, key );
		} );
	}
} );


jQuery.extend( {
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = dataPriv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || Array.isArray( data ) ) {
					queue = dataPriv.access( elem, type, jQuery.makeArray( data ) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return dataPriv.get( elem, key ) || dataPriv.access( elem, key, {
			empty: jQuery.Callbacks( "once memory" ).add( function() {
				dataPriv.remove( elem, [ type + "queue", key ] );
			} )
		} );
	}
} );

jQuery.fn.extend( {
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[ 0 ], type );
		}

		return data === undefined ?
			this :
			this.each( function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[ 0 ] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			} );
	},
	dequeue: function( type ) {
		return this.each( function() {
			jQuery.dequeue( this, type );
		} );
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},

	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = dataPriv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
} );
var pnum = ( /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/ ).source;

var rcssNum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" );


var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var documentElement = document.documentElement;



	var isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem );
		},
		composed = { composed: true };

	// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only
	// Check attachment across shadow DOM boundaries when possible (gh-3504)
	// Support: iOS 10.0-10.2 only
	// Early iOS 10 versions support `attachShadow` but not `getRootNode`,
	// leading to errors. We need to check for `getRootNode`.
	if ( documentElement.getRootNode ) {
		isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem ) ||
				elem.getRootNode( composed ) === elem.ownerDocument;
		};
	}
var isHiddenWithinTree = function( elem, el ) {

		// isHiddenWithinTree might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;

		// Inline style trumps all
		return elem.style.display === "none" ||
			elem.style.display === "" &&

			// Otherwise, check computed style
			// Support: Firefox <=43 - 45
			// Disconnected elements can have computed display: none, so first confirm that elem is
			// in the document.
			isAttached( elem ) &&

			jQuery.css( elem, "display" ) === "none";
	};

var swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};




function adjustCSS( elem, prop, valueParts, tween ) {
	var adjusted, scale,
		maxIterations = 20,
		currentValue = tween ?
			function() {
				return tween.cur();
			} :
			function() {
				return jQuery.css( elem, prop, "" );
			},
		initial = currentValue(),
		unit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

		// Starting value computation is required for potential unit mismatches
		initialInUnit = elem.nodeType &&
			( jQuery.cssNumber[ prop ] || unit !== "px" && +initial ) &&
			rcssNum.exec( jQuery.css( elem, prop ) );

	if ( initialInUnit && initialInUnit[ 3 ] !== unit ) {

		// Support: Firefox <=54
		// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)
		initial = initial / 2;

		// Trust units reported by jQuery.css
		unit = unit || initialInUnit[ 3 ];

		// Iteratively approximate from a nonzero starting point
		initialInUnit = +initial || 1;

		while ( maxIterations-- ) {

			// Evaluate and update our best guess (doubling guesses that zero out).
			// Finish if the scale equals or crosses 1 (making the old*new product non-positive).
			jQuery.style( elem, prop, initialInUnit + unit );
			if ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {
				maxIterations = 0;
			}
			initialInUnit = initialInUnit / scale;

		}

		initialInUnit = initialInUnit * 2;
		jQuery.style( elem, prop, initialInUnit + unit );

		// Make sure we update the tween properties later on
		valueParts = valueParts || [];
	}

	if ( valueParts ) {
		initialInUnit = +initialInUnit || +initial || 0;

		// Apply relative offset (+=/-=) if specified
		adjusted = valueParts[ 1 ] ?
			initialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :
			+valueParts[ 2 ];
		if ( tween ) {
			tween.unit = unit;
			tween.start = initialInUnit;
			tween.end = adjusted;
		}
	}
	return adjusted;
}


var defaultDisplayMap = {};

function getDefaultDisplay( elem ) {
	var temp,
		doc = elem.ownerDocument,
		nodeName = elem.nodeName,
		display = defaultDisplayMap[ nodeName ];

	if ( display ) {
		return display;
	}

	temp = doc.body.appendChild( doc.createElement( nodeName ) );
	display = jQuery.css( temp, "display" );

	temp.parentNode.removeChild( temp );

	if ( display === "none" ) {
		display = "block";
	}
	defaultDisplayMap[ nodeName ] = display;

	return display;
}

function showHide( elements, show ) {
	var display, elem,
		values = [],
		index = 0,
		length = elements.length;

	// Determine new display value for elements that need to change
	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		display = elem.style.display;
		if ( show ) {

			// Since we force visibility upon cascade-hidden elements, an immediate (and slow)
			// check is required in this first loop unless we have a nonempty display value (either
			// inline or about-to-be-restored)
			if ( display === "none" ) {
				values[ index ] = dataPriv.get( elem, "display" ) || null;
				if ( !values[ index ] ) {
					elem.style.display = "";
				}
			}
			if ( elem.style.display === "" && isHiddenWithinTree( elem ) ) {
				values[ index ] = getDefaultDisplay( elem );
			}
		} else {
			if ( display !== "none" ) {
				values[ index ] = "none";

				// Remember what we're overwriting
				dataPriv.set( elem, "display", display );
			}
		}
	}

	// Set the display of the elements in a second loop to avoid constant reflow
	for ( index = 0; index < length; index++ ) {
		if ( values[ index ] != null ) {
			elements[ index ].style.display = values[ index ];
		}
	}

	return elements;
}

jQuery.fn.extend( {
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each( function() {
			if ( isHiddenWithinTree( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		} );
	}
} );
var rcheckableType = ( /^(?:checkbox|radio)$/i );

var rtagName = ( /<([a-z][^\/\0>\x20\t\r\n\f]*)/i );

var rscriptType = ( /^$|^module$|\/(?:java|ecma)script/i );



// We have to close these tags to support XHTML (#13200)
var wrapMap = {

	// Support: IE <=9 only
	option: [ 1, "<select multiple='multiple'>", "</select>" ],

	// XHTML parsers do not magically insert elements in the
	// same way that tag soup parsers do. So we cannot shorten
	// this by omitting <tbody> or other required elements.
	thead: [ 1, "<table>", "</table>" ],
	col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
	tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

	_default: [ 0, "", "" ]
};

// Support: IE <=9 only
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;


function getAll( context, tag ) {

	// Support: IE <=9 - 11 only
	// Use typeof to avoid zero-argument method invocation on host objects (#15151)
	var ret;

	if ( typeof context.getElementsByTagName !== "undefined" ) {
		ret = context.getElementsByTagName( tag || "*" );

	} else if ( typeof context.querySelectorAll !== "undefined" ) {
		ret = context.querySelectorAll( tag || "*" );

	} else {
		ret = [];
	}

	if ( tag === undefined || tag && nodeName( context, tag ) ) {
		return jQuery.merge( [ context ], ret );
	}

	return ret;
}


// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		dataPriv.set(
			elems[ i ],
			"globalEval",
			!refElements || dataPriv.get( refElements[ i ], "globalEval" )
		);
	}
}


var rhtml = /<|&#?\w+;/;

function buildFragment( elems, context, scripts, selection, ignored ) {
	var elem, tmp, tag, wrap, attached, j,
		fragment = context.createDocumentFragment(),
		nodes = [],
		i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		elem = elems[ i ];

		if ( elem || elem === 0 ) {

			// Add nodes directly
			if ( toType( elem ) === "object" ) {

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

			// Convert non-html into a text node
			} else if ( !rhtml.test( elem ) ) {
				nodes.push( context.createTextNode( elem ) );

			// Convert html into DOM nodes
			} else {
				tmp = tmp || fragment.appendChild( context.createElement( "div" ) );

				// Deserialize a standard representation
				tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
				wrap = wrapMap[ tag ] || wrapMap._default;
				tmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];

				// Descend through wrappers to the right content
				j = wrap[ 0 ];
				while ( j-- ) {
					tmp = tmp.lastChild;
				}

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, tmp.childNodes );

				// Remember the top-level container
				tmp = fragment.firstChild;

				// Ensure the created nodes are orphaned (#12392)
				tmp.textContent = "";
			}
		}
	}

	// Remove wrapper from fragment
	fragment.textContent = "";

	i = 0;
	while ( ( elem = nodes[ i++ ] ) ) {

		// Skip elements already in the context collection (trac-4087)
		if ( selection && jQuery.inArray( elem, selection ) > -1 ) {
			if ( ignored ) {
				ignored.push( elem );
			}
			continue;
		}

		attached = isAttached( elem );

		// Append to fragment
		tmp = getAll( fragment.appendChild( elem ), "script" );

		// Preserve script evaluation history
		if ( attached ) {
			setGlobalEval( tmp );
		}

		// Capture executables
		if ( scripts ) {
			j = 0;
			while ( ( elem = tmp[ j++ ] ) ) {
				if ( rscriptType.test( elem.type || "" ) ) {
					scripts.push( elem );
				}
			}
		}
	}

	return fragment;
}


( function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Android 4.0 - 4.3 only
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Android <=4.1 only
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE <=11 only
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
} )();


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

// Support: IE <=9 - 11+
// focus() and blur() are asynchronous, except when they are no-op.
// So expect focus to be synchronous when the element is already active,
// and blur to be synchronous when the element is not already active.
// (focus and blur are always synchronous in other supported browsers,
// this just defines when we can count on it).
function expectSync( elem, type ) {
	return ( elem === safeActiveElement() ) === ( type === "focus" );
}

// Support: IE <=9 only
// Accessing document.activeElement can throw unexpectedly
// https://bugs.jquery.com/ticket/13393
function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

function on( elem, types, selector, data, fn, one ) {
	var origFn, type;

	// Types can be a map of types/handlers
	if ( typeof types === "object" ) {

		// ( types-Object, selector, data )
		if ( typeof selector !== "string" ) {

			// ( types-Object, data )
			data = data || selector;
			selector = undefined;
		}
		for ( type in types ) {
			on( elem, type, selector, data, types[ type ], one );
		}
		return elem;
	}

	if ( data == null && fn == null ) {

		// ( types, fn )
		fn = selector;
		data = selector = undefined;
	} else if ( fn == null ) {
		if ( typeof selector === "string" ) {

			// ( types, selector, fn )
			fn = data;
			data = undefined;
		} else {

			// ( types, data, fn )
			fn = data;
			data = selector;
			selector = undefined;
		}
	}
	if ( fn === false ) {
		fn = returnFalse;
	} else if ( !fn ) {
		return elem;
	}

	if ( one === 1 ) {
		origFn = fn;
		fn = function( event ) {

			// Can use an empty set, since event contains the info
			jQuery().off( event );
			return origFn.apply( this, arguments );
		};

		// Use same guid so caller can remove using origFn
		fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	}
	return elem.each( function() {
		jQuery.event.add( this, types, fn, data, selector );
	} );
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Ensure that invalid selectors throw exceptions at attach time
		// Evaluate against documentElement in case elem is a non-element node (e.g., document)
		if ( selector ) {
			jQuery.find.matchesSelector( documentElement, selector );
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !( events = elemData.events ) ) {
			events = elemData.events = {};
		}
		if ( !( eventHandle = elemData.handle ) ) {
			eventHandle = elemData.handle = function( e ) {

				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== "undefined" && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend( {
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join( "." )
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !( handlers = events[ type ] ) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup ||
					special.setup.call( elem, data, namespaces, eventHandle ) === false ) {

					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.hasData( elem ) && dataPriv.get( elem );

		if ( !elemData || !( events = elemData.events ) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[ 2 ] &&
				new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector ||
						selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown ||
					special.teardown.call( elem, namespaces, elemData.handle ) === false ) {

					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove data and the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			dataPriv.remove( elem, "handle events" );
		}
	},

	dispatch: function( nativeEvent ) {

		// Make a writable jQuery.Event from the native event object
		var event = jQuery.event.fix( nativeEvent );

		var i, j, ret, matched, handleObj, handlerQueue,
			args = new Array( arguments.length ),
			handlers = ( dataPriv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[ 0 ] = event;

		for ( i = 1; i < arguments.length; i++ ) {
			args[ i ] = arguments[ i ];
		}

		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( ( handleObj = matched.handlers[ j++ ] ) &&
				!event.isImmediatePropagationStopped() ) {

				// If the event is namespaced, then each handler is only invoked if it is
				// specially universal or its namespaces are a superset of the event's.
				if ( !event.rnamespace || handleObj.namespace === false ||
					event.rnamespace.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||
						handleObj.handler ).apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( ( event.result = ret ) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, handleObj, sel, matchedHandlers, matchedSelectors,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		if ( delegateCount &&

			// Support: IE <=9
			// Black-hole SVG <use> instance trees (trac-13180)
			cur.nodeType &&

			// Support: Firefox <=42
			// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)
			// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click
			// Support: IE 11 only
			// ...but not arrow key "clicks" of radio inputs, which can have `button` -1 (gh-2343)
			!( event.type === "click" && event.button >= 1 ) ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && !( event.type === "click" && cur.disabled === true ) ) {
					matchedHandlers = [];
					matchedSelectors = {};
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matchedSelectors[ sel ] === undefined ) {
							matchedSelectors[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) > -1 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matchedSelectors[ sel ] ) {
							matchedHandlers.push( handleObj );
						}
					}
					if ( matchedHandlers.length ) {
						handlerQueue.push( { elem: cur, handlers: matchedHandlers } );
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		cur = this;
		if ( delegateCount < handlers.length ) {
			handlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );
		}

		return handlerQueue;
	},

	addProp: function( name, hook ) {
		Object.defineProperty( jQuery.Event.prototype, name, {
			enumerable: true,
			configurable: true,

			get: isFunction( hook ) ?
				function() {
					if ( this.originalEvent ) {
							return hook( this.originalEvent );
					}
				} :
				function() {
					if ( this.originalEvent ) {
							return this.originalEvent[ name ];
					}
				},

			set: function( value ) {
				Object.defineProperty( this, name, {
					enumerable: true,
					configurable: true,
					writable: true,
					value: value
				} );
			}
		} );
	},

	fix: function( originalEvent ) {
		return originalEvent[ jQuery.expando ] ?
			originalEvent :
			new jQuery.Event( originalEvent );
	},

	special: {
		load: {

			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		click: {

			// Utilize native event to ensure correct state for checkable inputs
			setup: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Claim the first handler
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					// dataPriv.set( el, "click", ... )
					leverageNative( el, "click", returnTrue );
				}

				// Return false to allow normal processing in the caller
				return false;
			},
			trigger: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Force setup before triggering a click
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					leverageNative( el, "click" );
				}

				// Return non-false to allow normal event-path propagation
				return true;
			},

			// For cross-browser consistency, suppress native .click() on links
			// Also prevent it if we're currently inside a leveraged native-event stack
			_default: function( event ) {
				var target = event.target;
				return rcheckableType.test( target.type ) &&
					target.click && nodeName( target, "input" ) &&
					dataPriv.get( target, "click" ) ||
					nodeName( target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	}
};

// Ensure the presence of an event listener that handles manually-triggered
// synthetic events by interrupting progress until reinvoked in response to
// *native* events that it fires directly, ensuring that state changes have
// already occurred before other listeners are invoked.
function leverageNative( el, type, expectSync ) {

	// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add
	if ( !expectSync ) {
		if ( dataPriv.get( el, type ) === undefined ) {
			jQuery.event.add( el, type, returnTrue );
		}
		return;
	}

	// Register the controller as a special universal handler for all event namespaces
	dataPriv.set( el, type, false );
	jQuery.event.add( el, type, {
		namespace: false,
		handler: function( event ) {
			var notAsync, result,
				saved = dataPriv.get( this, type );

			if ( ( event.isTrigger & 1 ) && this[ type ] ) {

				// Interrupt processing of the outer synthetic .trigger()ed event
				// Saved data should be false in such cases, but might be a leftover capture object
				// from an async native handler (gh-4350)
				if ( !saved.length ) {

					// Store arguments for use when handling the inner native event
					// There will always be at least one argument (an event object), so this array
					// will not be confused with a leftover capture object.
					saved = slice.call( arguments );
					dataPriv.set( this, type, saved );

					// Trigger the native event and capture its result
					// Support: IE <=9 - 11+
					// focus() and blur() are asynchronous
					notAsync = expectSync( this, type );
					this[ type ]();
					result = dataPriv.get( this, type );
					if ( saved !== result || notAsync ) {
						dataPriv.set( this, type, false );
					} else {
						result = {};
					}
					if ( saved !== result ) {

						// Cancel the outer synthetic event
						event.stopImmediatePropagation();
						event.preventDefault();
						return result.value;
					}

				// If this is an inner synthetic event for an event with a bubbling surrogate
				// (focus or blur), assume that the surrogate already propagated from triggering the
				// native event and prevent that from happening again here.
				// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the
				// bubbling surrogate propagates *after* the non-bubbling base), but that seems
				// less bad than duplication.
				} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {
					event.stopPropagation();
				}

			// If this is a native event triggered above, everything is now in order
			// Fire an inner synthetic event with the original arguments
			} else if ( saved.length ) {

				// ...and capture the result
				dataPriv.set( this, type, {
					value: jQuery.event.trigger(

						// Support: IE <=9 - 11+
						// Extend with the prototype to reset the above stopImmediatePropagation()
						jQuery.extend( saved[ 0 ], jQuery.Event.prototype ),
						saved.slice( 1 ),
						this
					)
				} );

				// Abort handling of the native event
				event.stopImmediatePropagation();
			}
		}
	} );
}

jQuery.removeEvent = function( elem, type, handle ) {

	// This "if" is needed for plain objects
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle );
	}
};

jQuery.Event = function( src, props ) {

	// Allow instantiation without the 'new' keyword
	if ( !( this instanceof jQuery.Event ) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&

				// Support: Android <=2.3 only
				src.returnValue === false ?
			returnTrue :
			returnFalse;

		// Create target properties
		// Support: Safari <=6 - 7 only
		// Target should not be a text node (#504, #13143)
		this.target = ( src.target && src.target.nodeType === 3 ) ?
			src.target.parentNode :
			src.target;

		this.currentTarget = src.currentTarget;
		this.relatedTarget = src.relatedTarget;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || Date.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	constructor: jQuery.Event,
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,
	isSimulated: false,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && !this.isSimulated ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Includes all common event props including KeyEvent and MouseEvent specific props
jQuery.each( {
	altKey: true,
	bubbles: true,
	cancelable: true,
	changedTouches: true,
	ctrlKey: true,
	detail: true,
	eventPhase: true,
	metaKey: true,
	pageX: true,
	pageY: true,
	shiftKey: true,
	view: true,
	"char": true,
	code: true,
	charCode: true,
	key: true,
	keyCode: true,
	button: true,
	buttons: true,
	clientX: true,
	clientY: true,
	offsetX: true,
	offsetY: true,
	pointerId: true,
	pointerType: true,
	screenX: true,
	screenY: true,
	targetTouches: true,
	toElement: true,
	touches: true,

	which: function( event ) {
		var button = event.button;

		// Add which for key events
		if ( event.which == null && rkeyEvent.test( event.type ) ) {
			return event.charCode != null ? event.charCode : event.keyCode;
		}

		// Add which for click: 1 === left; 2 === middle; 3 === right
		if ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {
			if ( button & 1 ) {
				return 1;
			}

			if ( button & 2 ) {
				return 3;
			}

			if ( button & 4 ) {
				return 2;
			}

			return 0;
		}

		return event.which;
	}
}, jQuery.event.addProp );

jQuery.each( { focus: "focusin", blur: "focusout" }, function( type, delegateType ) {
	jQuery.event.special[ type ] = {

		// Utilize native event if possible so blur/focus sequence is correct
		setup: function() {

			// Claim the first handler
			// dataPriv.set( this, "focus", ... )
			// dataPriv.set( this, "blur", ... )
			leverageNative( this, type, expectSync );

			// Return false to allow normal processing in the caller
			return false;
		},
		trigger: function() {

			// Force setup before trigger
			leverageNative( this, type );

			// Return non-false to allow normal event-path propagation
			return true;
		},

		delegateType: delegateType
	};
} );

// Create mouseenter/leave events using mouseover/out and event-time checks
// so that event delegation works in jQuery.
// Do the same for pointerenter/pointerleave and pointerover/pointerout
//
// Support: Safari 7 only
// Safari sends mouseenter too often; see:
// https://bugs.chromium.org/p/chromium/issues/detail?id=470258
// for the description of the bug (it existed in older Chrome versions as well).
jQuery.each( {
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mouseenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
} );

jQuery.fn.extend( {

	on: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn );
	},
	one: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {

			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ?
					handleObj.origType + "." + handleObj.namespace :
					handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {

			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {

			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each( function() {
			jQuery.event.remove( this, types, fn, selector );
		} );
	}
} );


var

	/* eslint-disable max-len */

	// See https://github.com/eslint/eslint/issues/3229
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,

	/* eslint-enable */

	// Support: IE <=10 - 11, Edge 12 - 13 only
	// In IE/Edge using regex groups here causes severe slowdowns.
	// See https://connect.microsoft.com/IE/feedback/details/1736512/
	rnoInnerhtml = /<script|<style|<link/i,

	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

// Prefer a tbody over its parent table for containing new rows
function manipulationTarget( elem, content ) {
	if ( nodeName( elem, "table" ) &&
		nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ) {

		return jQuery( elem ).children( "tbody" )[ 0 ] || elem;
	}

	return elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = ( elem.getAttribute( "type" ) !== null ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	if ( ( elem.type || "" ).slice( 0, 5 ) === "true/" ) {
		elem.type = elem.type.slice( 5 );
	} else {
		elem.removeAttribute( "type" );
	}

	return elem;
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( dataPriv.hasData( src ) ) {
		pdataOld = dataPriv.access( src );
		pdataCur = dataPriv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( dataUser.hasData( src ) ) {
		udataOld = dataUser.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		dataUser.set( dest, udataCur );
	}
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

function domManip( collection, args, callback, ignored ) {

	// Flatten any nested arrays
	args = concat.apply( [], args );

	var fragment, first, scripts, hasScripts, node, doc,
		i = 0,
		l = collection.length,
		iNoClone = l - 1,
		value = args[ 0 ],
		valueIsFunction = isFunction( value );

	// We can't cloneNode fragments that contain checked, in WebKit
	if ( valueIsFunction ||
			( l > 1 && typeof value === "string" &&
				!support.checkClone && rchecked.test( value ) ) ) {
		return collection.each( function( index ) {
			var self = collection.eq( index );
			if ( valueIsFunction ) {
				args[ 0 ] = value.call( this, index, self.html() );
			}
			domManip( self, args, callback, ignored );
		} );
	}

	if ( l ) {
		fragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );
		first = fragment.firstChild;

		if ( fragment.childNodes.length === 1 ) {
			fragment = first;
		}

		// Require either new content or an interest in ignored elements to invoke the callback
		if ( first || ignored ) {
			scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
			hasScripts = scripts.length;

			// Use the original fragment for the last item
			// instead of the first because it can end up
			// being emptied incorrectly in certain situations (#8070).
			for ( ; i < l; i++ ) {
				node = fragment;

				if ( i !== iNoClone ) {
					node = jQuery.clone( node, true, true );

					// Keep references to cloned scripts for later restoration
					if ( hasScripts ) {

						// Support: Android <=4.0 only, PhantomJS 1 only
						// push.apply(_, arraylike) throws on ancient WebKit
						jQuery.merge( scripts, getAll( node, "script" ) );
					}
				}

				callback.call( collection[ i ], node, i );
			}

			if ( hasScripts ) {
				doc = scripts[ scripts.length - 1 ].ownerDocument;

				// Reenable scripts
				jQuery.map( scripts, restoreScript );

				// Evaluate executable scripts on first document insertion
				for ( i = 0; i < hasScripts; i++ ) {
					node = scripts[ i ];
					if ( rscriptType.test( node.type || "" ) &&
						!dataPriv.access( node, "globalEval" ) &&
						jQuery.contains( doc, node ) ) {

						if ( node.src && ( node.type || "" ).toLowerCase()  !== "module" ) {

							// Optional AJAX dependency, but won't run scripts if not present
							if ( jQuery._evalUrl && !node.noModule ) {
								jQuery._evalUrl( node.src, {
									nonce: node.nonce || node.getAttribute( "nonce" )
								} );
							}
						} else {
							DOMEval( node.textContent.replace( rcleanScript, "" ), node, doc );
						}
					}
				}
			}
		}
	}

	return collection;
}

function remove( elem, selector, keepData ) {
	var node,
		nodes = selector ? jQuery.filter( selector, elem ) : elem,
		i = 0;

	for ( ; ( node = nodes[ i ] ) != null; i++ ) {
		if ( !keepData && node.nodeType === 1 ) {
			jQuery.cleanData( getAll( node ) );
		}

		if ( node.parentNode ) {
			if ( keepData && isAttached( node ) ) {
				setGlobalEval( getAll( node, "script" ) );
			}
			node.parentNode.removeChild( node );
		}
	}

	return elem;
}

jQuery.extend( {
	htmlPrefilter: function( html ) {
		return html.replace( rxhtmlTag, "<$1></$2>" );
	},

	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = isAttached( elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	cleanData: function( elems ) {
		var data, elem, type,
			special = jQuery.event.special,
			i = 0;

		for ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {
			if ( acceptData( elem ) ) {
				if ( ( data = elem[ dataPriv.expando ] ) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataPriv.expando ] = undefined;
				}
				if ( elem[ dataUser.expando ] ) {

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataUser.expando ] = undefined;
				}
			}
		}
	}
} );

jQuery.fn.extend( {
	detach: function( selector ) {
		return remove( this, selector, true );
	},

	remove: function( selector ) {
		return remove( this, selector );
	},

	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each( function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				} );
		}, null, value, arguments.length );
	},

	append: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		} );
	},

	prepend: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		} );
	},

	before: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		} );
	},

	after: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		} );
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; ( elem = this[ i ] ) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		} );
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = jQuery.htmlPrefilter( value );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch ( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var ignored = [];

		// Make the changes, replacing each non-ignored context element with the new content
		return domManip( this, arguments, function( elem ) {
			var parent = this.parentNode;

			if ( jQuery.inArray( this, ignored ) < 0 ) {
				jQuery.cleanData( getAll( this ) );
				if ( parent ) {
					parent.replaceChild( elem, this );
				}
			}

		// Force callback invocation
		}, ignored );
	}
} );

jQuery.each( {
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: Android <=4.0 only, PhantomJS 1 only
			// .get() because push.apply(_, arraylike) throws on ancient WebKit
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
} );
var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {

		// Support: IE <=11 only, Firefox <=30 (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		var view = elem.ownerDocument.defaultView;

		if ( !view || !view.opener ) {
			view = window;
		}

		return view.getComputedStyle( elem );
	};

var rboxStyle = new RegExp( cssExpand.join( "|" ), "i" );



( function() {

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computeStyleTests() {

		// This is a singleton, we need to execute it only once
		if ( !div ) {
			return;
		}

		container.style.cssText = "position:absolute;left:-11111px;width:60px;" +
			"margin-top:1px;padding:0;border:0";
		div.style.cssText =
			"position:relative;display:block;box-sizing:border-box;overflow:scroll;" +
			"margin:auto;border:1px;padding:1px;" +
			"width:60%;top:1%";
		documentElement.appendChild( container ).appendChild( div );

		var divStyle = window.getComputedStyle( div );
		pixelPositionVal = divStyle.top !== "1%";

		// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44
		reliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;

		// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3
		// Some styles come back with percentage values, even though they shouldn't
		div.style.right = "60%";
		pixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;

		// Support: IE 9 - 11 only
		// Detect misreporting of content dimensions for box-sizing:border-box elements
		boxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;

		// Support: IE 9 only
		// Detect overflow:scroll screwiness (gh-3699)
		// Support: Chrome <=64
		// Don't get tricked when zoom affects offsetWidth (gh-4029)
		div.style.position = "absolute";
		scrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;

		documentElement.removeChild( container );

		// Nullify the div so it wouldn't be stored in the memory and
		// it will also be a sign that checks already performed
		div = null;
	}

	function roundPixelMeasures( measure ) {
		return Math.round( parseFloat( measure ) );
	}

	var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,
		reliableMarginLeftVal,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	// Finish early in limited (non-browser) environments
	if ( !div.style ) {
		return;
	}

	// Support: IE <=9 - 11 only
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	jQuery.extend( support, {
		boxSizingReliable: function() {
			computeStyleTests();
			return boxSizingReliableVal;
		},
		pixelBoxStyles: function() {
			computeStyleTests();
			return pixelBoxStylesVal;
		},
		pixelPosition: function() {
			computeStyleTests();
			return pixelPositionVal;
		},
		reliableMarginLeft: function() {
			computeStyleTests();
			return reliableMarginLeftVal;
		},
		scrollboxSize: function() {
			computeStyleTests();
			return scrollboxSizeVal;
		}
	} );
} )();


function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,

		// Support: Firefox 51+
		// Retrieving style before computed somehow
		// fixes an issue with getting wrong values
		// on detached elements
		style = elem.style;

	computed = computed || getStyles( elem );

	// getPropertyValue is needed for:
	//   .css('filter') (IE 9 only, #12537)
	//   .css('--customProperty) (#3144)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];

		if ( ret === "" && !isAttached( elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// A tribute to the "awesome hack by Dean Edwards"
		// Android Browser returns percentage for some values,
		// but width seems to be reliably pixels.
		// This is against the CSSOM draft spec:
		// https://drafts.csswg.org/cssom/#resolved-values
		if ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?

		// Support: IE <=9 - 11 only
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {

	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {

				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return ( this.get = hookFn ).apply( this, arguments );
		}
	};
}


var cssPrefixes = [ "Webkit", "Moz", "ms" ],
	emptyStyle = document.createElement( "div" ).style,
	vendorProps = {};

// Return a vendor-prefixed property or undefined
function vendorPropName( name ) {

	// Check for vendor prefixed names
	var capName = name[ 0 ].toUpperCase() + name.slice( 1 ),
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in emptyStyle ) {
			return name;
		}
	}
}

// Return a potentially-mapped jQuery.cssProps or vendor prefixed property
function finalPropName( name ) {
	var final = jQuery.cssProps[ name ] || vendorProps[ name ];

	if ( final ) {
		return final;
	}
	if ( name in emptyStyle ) {
		return name;
	}
	return vendorProps[ name ] = vendorPropName( name ) || name;
}


var

	// Swappable if display is none or starts with table
	// except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rcustomProp = /^--/,
	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	};

function setPositiveNumber( elem, value, subtract ) {

	// Any relative (+/-) values have already been
	// normalized at this point
	var matches = rcssNum.exec( value );
	return matches ?

		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || "px" ) :
		value;
}

function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {
	var i = dimension === "width" ? 1 : 0,
		extra = 0,
		delta = 0;

	// Adjustment may not be necessary
	if ( box === ( isBorderBox ? "border" : "content" ) ) {
		return 0;
	}

	for ( ; i < 4; i += 2 ) {

		// Both box models exclude margin
		if ( box === "margin" ) {
			delta += jQuery.css( elem, box + cssExpand[ i ], true, styles );
		}

		// If we get here with a content-box, we're seeking "padding" or "border" or "margin"
		if ( !isBorderBox ) {

			// Add padding
			delta += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// For "border" or "margin", add border
			if ( box !== "padding" ) {
				delta += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );

			// But still keep track of it otherwise
			} else {
				extra += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}

		// If we get here with a border-box (content + padding + border), we're seeking "content" or
		// "padding" or "margin"
		} else {

			// For "content", subtract padding
			if ( box === "content" ) {
				delta -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// For "content" or "padding", subtract border
			if ( box !== "margin" ) {
				delta -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	// Account for positive content-box scroll gutter when requested by providing computedVal
	if ( !isBorderBox && computedVal >= 0 ) {

		// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border
		// Assuming integer scroll gutter, subtract the rest and round down
		delta += Math.max( 0, Math.ceil(
			elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
			computedVal -
			delta -
			extra -
			0.5

		// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter
		// Use an explicit zero to avoid NaN (gh-3964)
		) ) || 0;
	}

	return delta;
}

function getWidthOrHeight( elem, dimension, extra ) {

	// Start with computed style
	var styles = getStyles( elem ),

		// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).
		// Fake content-box until we know it's needed to know the true value.
		boxSizingNeeded = !support.boxSizingReliable() || extra,
		isBorderBox = boxSizingNeeded &&
			jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
		valueIsBorderBox = isBorderBox,

		val = curCSS( elem, dimension, styles ),
		offsetProp = "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );

	// Support: Firefox <=54
	// Return a confounding non-pixel value or feign ignorance, as appropriate.
	if ( rnumnonpx.test( val ) ) {
		if ( !extra ) {
			return val;
		}
		val = "auto";
	}


	// Fall back to offsetWidth/offsetHeight when value is "auto"
	// This happens for inline elements with no explicit setting (gh-3571)
	// Support: Android <=4.1 - 4.3 only
	// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)
	// Support: IE 9-11 only
	// Also use offsetWidth/offsetHeight for when box sizing is unreliable
	// We use getClientRects() to check for hidden/disconnected.
	// In those cases, the computed value can be trusted to be border-box
	if ( ( !support.boxSizingReliable() && isBorderBox ||
		val === "auto" ||
		!parseFloat( val ) && jQuery.css( elem, "display", false, styles ) === "inline" ) &&
		elem.getClientRects().length ) {

		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

		// Where available, offsetWidth/offsetHeight approximate border box dimensions.
		// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the
		// retrieved value as a content box dimension.
		valueIsBorderBox = offsetProp in elem;
		if ( valueIsBorderBox ) {
			val = elem[ offsetProp ];
		}
	}

	// Normalize "" and auto
	val = parseFloat( val ) || 0;

	// Adjust for the element's box model
	return ( val +
		boxModelAdjustment(
			elem,
			dimension,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles,

			// Provide the current computed size to request scroll gutter calculation (gh-3589)
			val
		)
	) + "px";
}

jQuery.extend( {

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"animationIterationCount": true,
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"gridArea": true,
		"gridColumn": true,
		"gridColumnEnd": true,
		"gridColumnStart": true,
		"gridRow": true,
		"gridRowEnd": true,
		"gridRowStart": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name ),
			style = elem.style;

		// Make sure that we're working with the right name. We don't
		// want to query the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {
				value = adjustCSS( elem, name, ret );

				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number was passed in, add the unit (except for certain CSS properties)
			// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append
			// "px" to a few hardcoded values.
			if ( type === "number" && !isCustomProp ) {
				value += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? "" : "px" );
			}

			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !( "set" in hooks ) ||
				( value = hooks.set( elem, value, extra ) ) !== undefined ) {

				if ( isCustomProp ) {
					style.setProperty( name, value );
				} else {
					style[ name ] = value;
				}
			}

		} else {

			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks &&
				( ret = hooks.get( elem, false, extra ) ) !== undefined ) {

				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name );

		// Make sure that we're working with the right name. We don't
		// want to modify the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || isFinite( num ) ? num || 0 : val;
		}

		return val;
	}
} );

jQuery.each( [ "height", "width" ], function( i, dimension ) {
	jQuery.cssHooks[ dimension ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) &&

					// Support: Safari 8+
					// Table columns in Safari have non-zero offsetWidth & zero
					// getBoundingClientRect().width unless display is changed.
					// Support: IE <=11 only
					// Running getBoundingClientRect on a disconnected node
					// in IE throws an error.
					( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?
						swap( elem, cssShow, function() {
							return getWidthOrHeight( elem, dimension, extra );
						} ) :
						getWidthOrHeight( elem, dimension, extra );
			}
		},

		set: function( elem, value, extra ) {
			var matches,
				styles = getStyles( elem ),

				// Only read styles.position if the test has a chance to fail
				// to avoid forcing a reflow.
				scrollboxSizeBuggy = !support.scrollboxSize() &&
					styles.position === "absolute",

				// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)
				boxSizingNeeded = scrollboxSizeBuggy || extra,
				isBorderBox = boxSizingNeeded &&
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
				subtract = extra ?
					boxModelAdjustment(
						elem,
						dimension,
						extra,
						isBorderBox,
						styles
					) :
					0;

			// Account for unreliable border-box dimensions by comparing offset* to computed and
			// faking a content-box to get border and padding (gh-3699)
			if ( isBorderBox && scrollboxSizeBuggy ) {
				subtract -= Math.ceil(
					elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
					parseFloat( styles[ dimension ] ) -
					boxModelAdjustment( elem, dimension, "border", false, styles ) -
					0.5
				);
			}

			// Convert to pixels if value adjustment is needed
			if ( subtract && ( matches = rcssNum.exec( value ) ) &&
				( matches[ 3 ] || "px" ) !== "px" ) {

				elem.style[ dimension ] = value;
				value = jQuery.css( elem, dimension );
			}

			return setPositiveNumber( elem, value, subtract );
		}
	};
} );

jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,
	function( elem, computed ) {
		if ( computed ) {
			return ( parseFloat( curCSS( elem, "marginLeft" ) ) ||
				elem.getBoundingClientRect().left -
					swap( elem, { marginLeft: 0 }, function() {
						return elem.getBoundingClientRect().left;
					} )
				) + "px";
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each( {
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split( " " ) : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( prefix !== "margin" ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
} );

jQuery.fn.extend( {
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( Array.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	}
} );


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || jQuery.easing._default;
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			// Use a property on the element directly when it is not a DOM element,
			// or when there is no matching style property that exists.
			if ( tween.elem.nodeType !== 1 ||
				tween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );

			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {

			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.nodeType === 1 && (
					jQuery.cssHooks[ tween.prop ] ||
					tween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9 only
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	},
	_default: "swing"
};

jQuery.fx = Tween.prototype.init;

// Back compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, inProgress,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rrun = /queueHooks$/;

function schedule() {
	if ( inProgress ) {
		if ( document.hidden === false && window.requestAnimationFrame ) {
			window.requestAnimationFrame( schedule );
		} else {
			window.setTimeout( schedule, jQuery.fx.interval );
		}

		jQuery.fx.tick();
	}
}

// Animations created synchronously will run synchronously
function createFxNow() {
	window.setTimeout( function() {
		fxNow = undefined;
	} );
	return ( fxNow = Date.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,
		isBox = "width" in props || "height" in props,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHiddenWithinTree( elem ),
		dataShow = dataPriv.get( elem, "fxshow" );

	// Queue-skipping animations hijack the fx hooks
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always( function() {

			// Ensure the complete handler is called before this completes
			anim.always( function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			} );
		} );
	}

	// Detect show/hide animations
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.test( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// Pretend to be hidden if this is a "show" and
				// there is still data from a stopped show/hide
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;

				// Ignore all other no-op show/hide data
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
		}
	}

	// Bail out if this is a no-op like .hide().hide()
	propTween = !jQuery.isEmptyObject( props );
	if ( !propTween && jQuery.isEmptyObject( orig ) ) {
		return;
	}

	// Restrict "overflow" and "display" styles during box animations
	if ( isBox && elem.nodeType === 1 ) {

		// Support: IE <=9 - 11, Edge 12 - 15
		// Record all 3 overflow attributes because IE does not infer the shorthand
		// from identically-valued overflowX and overflowY and Edge just mirrors
		// the overflowX value there.
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Identify a display type, preferring old show/hide data over the CSS cascade
		restoreDisplay = dataShow && dataShow.display;
		if ( restoreDisplay == null ) {
			restoreDisplay = dataPriv.get( elem, "display" );
		}
		display = jQuery.css( elem, "display" );
		if ( display === "none" ) {
			if ( restoreDisplay ) {
				display = restoreDisplay;
			} else {

				// Get nonempty value(s) by temporarily forcing visibility
				showHide( [ elem ], true );
				restoreDisplay = elem.style.display || restoreDisplay;
				display = jQuery.css( elem, "display" );
				showHide( [ elem ] );
			}
		}

		// Animate inline elements as inline-block
		if ( display === "inline" || display === "inline-block" && restoreDisplay != null ) {
			if ( jQuery.css( elem, "float" ) === "none" ) {

				// Restore the original display value at the end of pure show/hide animations
				if ( !propTween ) {
					anim.done( function() {
						style.display = restoreDisplay;
					} );
					if ( restoreDisplay == null ) {
						display = style.display;
						restoreDisplay = display === "none" ? "" : display;
					}
				}
				style.display = "inline-block";
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always( function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		} );
	}

	// Implement show/hide animations
	propTween = false;
	for ( prop in orig ) {

		// General show/hide setup for this element animation
		if ( !propTween ) {
			if ( dataShow ) {
				if ( "hidden" in dataShow ) {
					hidden = dataShow.hidden;
				}
			} else {
				dataShow = dataPriv.access( elem, "fxshow", { display: restoreDisplay } );
			}

			// Store hidden/visible for toggle so `.stop().toggle()` "reverses"
			if ( toggle ) {
				dataShow.hidden = !hidden;
			}

			// Show elements before animating them
			if ( hidden ) {
				showHide( [ elem ], true );
			}

			/* eslint-disable no-loop-func */

			anim.done( function() {

			/* eslint-enable no-loop-func */

				// The final step of a "hide" animation is actually hiding the element
				if ( !hidden ) {
					showHide( [ elem ] );
				}
				dataPriv.remove( elem, "fxshow" );
				for ( prop in orig ) {
					jQuery.style( elem, prop, orig[ prop ] );
				}
			} );
		}

		// Per-property setup
		propTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
		if ( !( prop in dataShow ) ) {
			dataShow[ prop ] = propTween.start;
			if ( hidden ) {
				propTween.end = propTween.start;
				propTween.start = 0;
			}
		}
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( Array.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = Animation.prefilters.length,
		deferred = jQuery.Deferred().always( function() {

			// Don't match elem in the :animated selector
			delete tick.elem;
		} ),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),

				// Support: Android 2.3 only
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ] );

			// If there's more to do, yield
			if ( percent < 1 && length ) {
				return remaining;
			}

			// If this was an empty animation, synthesize a final progress notification
			if ( !length ) {
				deferred.notifyWith( elem, [ animation, 1, 0 ] );
			}

			// Resolve the animation and report its conclusion
			deferred.resolveWith( elem, [ animation ] );
			return false;
		},
		animation = deferred.promise( {
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, {
				specialEasing: {},
				easing: jQuery.easing._default
			}, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,

					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.notifyWith( elem, [ animation, 1, 0 ] );
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		} ),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length; index++ ) {
		result = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			if ( isFunction( result.stop ) ) {
				jQuery._queueHooks( animation.elem, animation.opts.queue ).stop =
					result.stop.bind( result );
			}
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	// Attach callbacks from options
	animation
		.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		} )
	);

	return animation;
}

jQuery.Animation = jQuery.extend( Animation, {

	tweeners: {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value );
			adjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );
			return tween;
		} ]
	},

	tweener: function( props, callback ) {
		if ( isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.match( rnothtmlwhite );
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length; index++ ) {
			prop = props[ index ];
			Animation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];
			Animation.tweeners[ prop ].unshift( callback );
		}
	},

	prefilters: [ defaultPrefilter ],

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			Animation.prefilters.unshift( callback );
		} else {
			Animation.prefilters.push( callback );
		}
	}
} );

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !isFunction( easing ) && easing
	};

	// Go to the end state if fx are off
	if ( jQuery.fx.off ) {
		opt.duration = 0;

	} else {
		if ( typeof opt.duration !== "number" ) {
			if ( opt.duration in jQuery.fx.speeds ) {
				opt.duration = jQuery.fx.speeds[ opt.duration ];

			} else {
				opt.duration = jQuery.fx.speeds._default;
			}
		}
	}

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend( {
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHiddenWithinTree ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate( { opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {

				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || dataPriv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each( function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = dataPriv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this &&
					( type == null || timers[ index ].queue === type ) ) {

					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		} );
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each( function() {
			var index,
				data = dataPriv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		} );
	}
} );

jQuery.each( [ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
} );

// Generate shortcuts for custom animations
jQuery.each( {
	slideDown: genFx( "show" ),
	slideUp: genFx( "hide" ),
	slideToggle: genFx( "toggle" ),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
} );

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = Date.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];

		// Run the timer and safely remove it when done (allowing for external removal)
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	jQuery.fx.start();
};

jQuery.fx.interval = 13;
jQuery.fx.start = function() {
	if ( inProgress ) {
		return;
	}

	inProgress = true;
	schedule();
};

jQuery.fx.stop = function() {
	inProgress = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,

	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = window.setTimeout( next, time );
		hooks.stop = function() {
			window.clearTimeout( timeout );
		};
	} );
};


( function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: Android <=4.3 only
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE <=11 only
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: IE <=11 only
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
} )();


var boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend( {
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each( function() {
			jQuery.removeAttr( this, name );
		} );
	}
} );

jQuery.extend( {
	attr: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set attributes on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === "undefined" ) {
			return jQuery.prop( elem, name, value );
		}

		// Attribute hooks are determined by the lowercase version
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			hooks = jQuery.attrHooks[ name.toLowerCase() ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );
		}

		if ( value !== undefined ) {
			if ( value === null ) {
				jQuery.removeAttr( elem, name );
				return;
			}

			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			elem.setAttribute( name, value + "" );
			return value;
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		ret = jQuery.find.attr( elem, name );

		// Non-existent attributes return null, we normalize to undefined
		return ret == null ? undefined : ret;
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	removeAttr: function( elem, value ) {
		var name,
			i = 0,

			// Attribute names can contain non-HTML whitespace characters
			// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
			attrNames = value && value.match( rnothtmlwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( ( name = attrNames[ i++ ] ) ) {
				elem.removeAttribute( name );
			}
		}
	}
} );

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {

			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};

jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle,
			lowercaseName = name.toLowerCase();

		if ( !isXML ) {

			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ lowercaseName ];
			attrHandle[ lowercaseName ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				lowercaseName :
				null;
			attrHandle[ lowercaseName ] = handle;
		}
		return ret;
	};
} );




var rfocusable = /^(?:input|select|textarea|button)$/i,
	rclickable = /^(?:a|area)$/i;

jQuery.fn.extend( {
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each( function() {
			delete this[ jQuery.propFix[ name ] || name ];
		} );
	}
} );

jQuery.extend( {
	prop: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {

			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			return ( elem[ name ] = value );
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		return elem[ name ];
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {

				// Support: IE <=9 - 11 only
				// elem.tabIndex doesn't always return the
				// correct value when it hasn't been explicitly set
				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				if ( tabindex ) {
					return parseInt( tabindex, 10 );
				}

				if (
					rfocusable.test( elem.nodeName ) ||
					rclickable.test( elem.nodeName ) &&
					elem.href
				) {
					return 0;
				}

				return -1;
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	}
} );

// Support: IE <=11 only
// Accessing the selectedIndex property
// forces the browser to respect setting selected
// on the option
// The getter ensures a default option is selected
// when in an optgroup
// eslint rule "no-unused-expressions" is disabled for this code
// since it considers such accessions noop
if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		},
		set: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent ) {
				parent.selectedIndex;

				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
		}
	};
}

jQuery.each( [
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
} );




	// Strip and collapse whitespace according to HTML spec
	// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace
	function stripAndCollapse( value ) {
		var tokens = value.match( rnothtmlwhite ) || [];
		return tokens.join( " " );
	}


function getClass( elem ) {
	return elem.getAttribute && elem.getAttribute( "class" ) || "";
}

function classesToArray( value ) {
	if ( Array.isArray( value ) ) {
		return value;
	}
	if ( typeof value === "string" ) {
		return value.match( rnothtmlwhite ) || [];
	}
	return [];
}

jQuery.fn.extend( {
	addClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).addClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( !arguments.length ) {
			return this.attr( "class", "" );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );

				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {

						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) > -1 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isValidValue = type === "string" || Array.isArray( value );

		if ( typeof stateVal === "boolean" && isValidValue ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( isFunction( value ) ) {
			return this.each( function( i ) {
				jQuery( this ).toggleClass(
					value.call( this, i, getClass( this ), stateVal ),
					stateVal
				);
			} );
		}

		return this.each( function() {
			var className, i, self, classNames;

			if ( isValidValue ) {

				// Toggle individual class names
				i = 0;
				self = jQuery( this );
				classNames = classesToArray( value );

				while ( ( className = classNames[ i++ ] ) ) {

					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( value === undefined || type === "boolean" ) {
				className = getClass( this );
				if ( className ) {

					// Store className if set
					dataPriv.set( this, "__className__", className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				if ( this.setAttribute ) {
					this.setAttribute( "class",
						className || value === false ?
						"" :
						dataPriv.get( this, "__className__" ) || ""
					);
				}
			}
		} );
	},

	hasClass: function( selector ) {
		var className, elem,
			i = 0;

		className = " " + selector + " ";
		while ( ( elem = this[ i++ ] ) ) {
			if ( elem.nodeType === 1 &&
				( " " + stripAndCollapse( getClass( elem ) ) + " " ).indexOf( className ) > -1 ) {
					return true;
			}
		}

		return false;
	}
} );




var rreturn = /\r/g;

jQuery.fn.extend( {
	val: function( value ) {
		var hooks, ret, valueIsFunction,
			elem = this[ 0 ];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] ||
					jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks &&
					"get" in hooks &&
					( ret = hooks.get( elem, "value" ) ) !== undefined
				) {
					return ret;
				}

				ret = elem.value;

				// Handle most common string cases
				if ( typeof ret === "string" ) {
					return ret.replace( rreturn, "" );
				}

				// Handle cases where value is null/undef or number
				return ret == null ? "" : ret;
			}

			return;
		}

		valueIsFunction = isFunction( value );

		return this.each( function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( valueIsFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( Array.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				} );
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !( "set" in hooks ) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		} );
	}
} );

jQuery.extend( {
	valHooks: {
		option: {
			get: function( elem ) {

				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :

					// Support: IE <=10 - 11 only
					// option.text throws exceptions (#14686, #14858)
					// Strip and collapse whitespace
					// https://html.spec.whatwg.org/#strip-and-collapse-whitespace
					stripAndCollapse( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option, i,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one",
					values = one ? null : [],
					max = one ? index + 1 : options.length;

				if ( index < 0 ) {
					i = max;

				} else {
					i = one ? index : 0;
				}

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// Support: IE <=9 only
					// IE8-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&

							// Don't return options that are disabled or in a disabled optgroup
							!option.disabled &&
							( !option.parentNode.disabled ||
								!nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];

					/* eslint-disable no-cond-assign */

					if ( option.selected =
						jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1
					) {
						optionSet = true;
					}

					/* eslint-enable no-cond-assign */
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
} );

// Radios and checkboxes getter/setter
jQuery.each( [ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( Array.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute( "value" ) === null ? "on" : elem.value;
		};
	}
} );




// Return jQuery for attributes-only inclusion


support.focusin = "onfocusin" in window;


var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	stopPropagationCallback = function( e ) {
		e.stopPropagation();
	};

jQuery.extend( jQuery.event, {

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special, lastElement,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split( "." ) : [];

		cur = lastElement = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf( "." ) > -1 ) {

			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split( "." );
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf( ":" ) < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join( "." );
		event.rnamespace = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === ( elem.ownerDocument || document ) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {
			lastElement = cur;
			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( dataPriv.get( cur, "events" ) || {} )[ event.type ] &&
				dataPriv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( ( !special._default ||
				special._default.apply( eventPath.pop(), data ) === false ) &&
				acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;

					if ( event.isPropagationStopped() ) {
						lastElement.addEventListener( type, stopPropagationCallback );
					}

					elem[ type ]();

					if ( event.isPropagationStopped() ) {
						lastElement.removeEventListener( type, stopPropagationCallback );
					}

					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	// Piggyback on a donor event to simulate a different one
	// Used only for `focus(in | out)` events
	simulate: function( type, elem, event ) {
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true
			}
		);

		jQuery.event.trigger( e, null, elem );
	}

} );

jQuery.fn.extend( {

	trigger: function( type, data ) {
		return this.each( function() {
			jQuery.event.trigger( type, data, this );
		} );
	},
	triggerHandler: function( type, data ) {
		var elem = this[ 0 ];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
} );


// Support: Firefox <=44
// Firefox doesn't have focus(in | out) events
// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
//
// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1
// focus(in | out) events fire after focus & blur events,
// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857
if ( !support.focusin ) {
	jQuery.each( { focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
			jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );
		};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				dataPriv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					dataPriv.remove( doc, fix );

				} else {
					dataPriv.access( doc, fix, attaches );
				}
			}
		};
	} );
}
var location = window.location;

var nonce = Date.now();

var rquery = ( /\?/ );



// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE 9 - 11 only
	// IE throws on parseFromString with invalid input.
	try {
		xml = ( new window.DOMParser() ).parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( Array.isArray( obj ) ) {

		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {

				// Treat each array item as a scalar.
				add( prefix, v );

			} else {

				// Item is non-scalar (array or object), encode its numeric index.
				buildParams(
					prefix + "[" + ( typeof v === "object" && v != null ? i : "" ) + "]",
					v,
					traditional,
					add
				);
			}
		} );

	} else if ( !traditional && toType( obj ) === "object" ) {

		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {

		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, valueOrFunction ) {

			// If value is a function, invoke it and use its return value
			var value = isFunction( valueOrFunction ) ?
				valueOrFunction() :
				valueOrFunction;

			s[ s.length ] = encodeURIComponent( key ) + "=" +
				encodeURIComponent( value == null ? "" : value );
		};

	if ( a == null ) {
		return "";
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {

		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		} );

	} else {

		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" );
};

jQuery.fn.extend( {
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map( function() {

			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		} )
		.filter( function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		} )
		.map( function( i, elem ) {
			var val = jQuery( this ).val();

			if ( val == null ) {
				return null;
			}

			if ( Array.isArray( val ) ) {
				return jQuery.map( val, function( val ) {
					return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
				} );
			}

			return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		} ).get();
	}
} );


var
	r20 = /%20/g,
	rhash = /#.*$/,
	rantiCache = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,

	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Anchor tag for parsing the document origin
	originAnchor = document.createElement( "a" );
	originAnchor.href = location.href;

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];

		if ( isFunction( func ) ) {

			// For each dataType in the dataTypeExpression
			while ( ( dataType = dataTypes[ i++ ] ) ) {

				// Prepend if requested
				if ( dataType[ 0 ] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );

				// Otherwise append
				} else {
					( structure[ dataType ] = structure[ dataType ] || [] ).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" &&
				!seekingTransport && !inspected[ dataTypeOrTransport ] ) {

				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		} );
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader( "Content-Type" );
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {

		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[ 0 ] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}

		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},

		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {

								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s.throws ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return {
								state: "parsererror",
								error: conv ? e : "No conversion from " + prev + " to " + current
							};
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend( {

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: location.href,
		type: "GET",
		isLocal: rlocalProtocol.test( location.protocol ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",

		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /\bxml\b/,
			html: /\bhtml/,
			json: /\bjson\b/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": JSON.parse,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,

			// URL without anti-cache param
			cacheURL,

			// Response headers
			responseHeadersString,
			responseHeaders,

			// timeout handle
			timeoutTimer,

			// Url cleanup var
			urlAnchor,

			// Request state (becomes false upon send and true upon completion)
			completed,

			// To know if global events are to be dispatched
			fireGlobals,

			// Loop variable
			i,

			// uncached part of the url
			uncached,

			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),

			// Callbacks context
			callbackContext = s.context || s,

			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context &&
				( callbackContext.nodeType || callbackContext.jquery ) ?
					jQuery( callbackContext ) :
					jQuery.event,

			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks( "once memory" ),

			// Status-dependent callbacks
			statusCode = s.statusCode || {},

			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},

			// Default abort message
			strAbort = "canceled",

			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( completed ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( ( match = rheaders.exec( responseHeadersString ) ) ) {
								responseHeaders[ match[ 1 ].toLowerCase() + " " ] =
									( responseHeaders[ match[ 1 ].toLowerCase() + " " ] || [] )
										.concat( match[ 2 ] );
							}
						}
						match = responseHeaders[ key.toLowerCase() + " " ];
					}
					return match == null ? null : match.join( ", " );
				},

				// Raw string
				getAllResponseHeaders: function() {
					return completed ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					if ( completed == null ) {
						name = requestHeadersNames[ name.toLowerCase() ] =
							requestHeadersNames[ name.toLowerCase() ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( completed == null ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( completed ) {

							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						} else {

							// Lazy-add the new callbacks in a way that preserves old ones
							for ( code in map ) {
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR );

		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || location.href ) + "" )
			.replace( rprotocol, location.protocol + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = ( s.dataType || "*" ).toLowerCase().match( rnothtmlwhite ) || [ "" ];

		// A cross-domain request is in order when the origin doesn't match the current origin.
		if ( s.crossDomain == null ) {
			urlAnchor = document.createElement( "a" );

			// Support: IE <=8 - 11, Edge 12 - 15
			// IE throws exception on accessing the href property if url is malformed,
			// e.g. http://example.com:80x/
			try {
				urlAnchor.href = s.url;

				// Support: IE <=8 - 11 only
				// Anchor's host property isn't correctly set when s.url is relative
				urlAnchor.href = urlAnchor.href;
				s.crossDomain = originAnchor.protocol + "//" + originAnchor.host !==
					urlAnchor.protocol + "//" + urlAnchor.host;
			} catch ( e ) {

				// If there is an error parsing the URL, assume it is crossDomain,
				// it can be rejected by the transport if it is invalid
				s.crossDomain = true;
			}
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( completed ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger( "ajaxStart" );
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		// Remove hash to simplify url manipulation
		cacheURL = s.url.replace( rhash, "" );

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// Remember the hash so we can put it back
			uncached = s.url.slice( cacheURL.length );

			// If data is available and should be processed, append data to url
			if ( s.data && ( s.processData || typeof s.data === "string" ) ) {
				cacheURL += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data;

				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add or update anti-cache param if needed
			if ( s.cache === false ) {
				cacheURL = cacheURL.replace( rantiCache, "$1" );
				uncached = ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ( nonce++ ) + uncached;
			}

			// Put hash and anti-cache on the URL that will be requested (gh-1732)
			s.url = cacheURL + uncached;

		// Change '%20' to '+' if this is encoded form body content (gh-2658)
		} else if ( s.data && s.processData &&
			( s.contentType || "" ).indexOf( "application/x-www-form-urlencoded" ) === 0 ) {
			s.data = s.data.replace( r20, "+" );
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?
				s.accepts[ s.dataTypes[ 0 ] ] +
					( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend &&
			( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {

			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		completeDeferred.add( s.complete );
		jqXHR.done( s.success );
		jqXHR.fail( s.error );

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}

			// If request was aborted inside ajaxSend, stop there
			if ( completed ) {
				return jqXHR;
			}

			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = window.setTimeout( function() {
					jqXHR.abort( "timeout" );
				}, s.timeout );
			}

			try {
				completed = false;
				transport.send( requestHeaders, done );
			} catch ( e ) {

				// Rethrow post-completion exceptions
				if ( completed ) {
					throw e;
				}

				// Propagate others as results
				done( -1, e );
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Ignore repeat invocations
			if ( completed ) {
				return;
			}

			completed = true;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				window.clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader( "Last-Modified" );
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader( "etag" );
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {

				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );

				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger( "ajaxStop" );
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
} );

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {

		// Shift arguments if data argument was omitted
		if ( isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		// The url can be an options object (which then must have .url)
		return jQuery.ajax( jQuery.extend( {
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		}, jQuery.isPlainObject( url ) && url ) );
	};
} );


jQuery._evalUrl = function( url, options ) {
	return jQuery.ajax( {
		url: url,

		// Make this explicit, since user can override this through ajaxSetup (#11264)
		type: "GET",
		dataType: "script",
		cache: true,
		async: false,
		global: false,

		// Only evaluate the response if it is successful (gh-4126)
		// dataFilter is not invoked for failure responses, so using it instead
		// of the default converter is kludgy but it works.
		converters: {
			"text script": function() {}
		},
		dataFilter: function( response ) {
			jQuery.globalEval( response, options );
		}
	} );
};


jQuery.fn.extend( {
	wrapAll: function( html ) {
		var wrap;

		if ( this[ 0 ] ) {
			if ( isFunction( html ) ) {
				html = html.call( this[ 0 ] );
			}

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map( function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			} ).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapInner( html.call( this, i ) );
			} );
		}

		return this.each( function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		} );
	},

	wrap: function( html ) {
		var htmlIsFunction = isFunction( html );

		return this.each( function( i ) {
			jQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );
		} );
	},

	unwrap: function( selector ) {
		this.parent( selector ).not( "body" ).each( function() {
			jQuery( this ).replaceWith( this.childNodes );
		} );
		return this;
	}
} );


jQuery.expr.pseudos.hidden = function( elem ) {
	return !jQuery.expr.pseudos.visible( elem );
};
jQuery.expr.pseudos.visible = function( elem ) {
	return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );
};




jQuery.ajaxSettings.xhr = function() {
	try {
		return new window.XMLHttpRequest();
	} catch ( e ) {}
};

var xhrSuccessStatus = {

		// File protocol always yields status code 0, assume 200
		0: 200,

		// Support: IE <=9 only
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport( function( options ) {
	var callback, errorCallback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr();

				xhr.open(
					options.type,
					options.url,
					options.async,
					options.username,
					options.password
				);

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers[ "X-Requested-With" ] ) {
					headers[ "X-Requested-With" ] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							callback = errorCallback = xhr.onload =
								xhr.onerror = xhr.onabort = xhr.ontimeout =
									xhr.onreadystatechange = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {

								// Support: IE <=9 only
								// On a manual native abort, IE9 throws
								// errors on any property access that is not readyState
								if ( typeof xhr.status !== "number" ) {
									complete( 0, "error" );
								} else {
									complete(

										// File: protocol always yields status 0; see #8605, #14207
										xhr.status,
										xhr.statusText
									);
								}
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,

									// Support: IE <=9 only
									// IE9 has no XHR2 but throws on binary (trac-11426)
									// For XHR2 non-text, let the caller handle it (gh-2498)
									( xhr.responseType || "text" ) !== "text"  ||
									typeof xhr.responseText !== "string" ?
										{ binary: xhr.response } :
										{ text: xhr.responseText },
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				errorCallback = xhr.onerror = xhr.ontimeout = callback( "error" );

				// Support: IE 9 only
				// Use onreadystatechange to replace onabort
				// to handle uncaught aborts
				if ( xhr.onabort !== undefined ) {
					xhr.onabort = errorCallback;
				} else {
					xhr.onreadystatechange = function() {

						// Check readyState before timeout as it changes
						if ( xhr.readyState === 4 ) {

							// Allow onerror to be called first,
							// but that will not handle a native abort
							// Also, save errorCallback to a variable
							// as xhr.onerror cannot be accessed
							window.setTimeout( function() {
								if ( callback ) {
									errorCallback();
								}
							} );
						}
					};
				}

				// Create the abort callback
				callback = callback( "abort" );

				try {

					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {

					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)
jQuery.ajaxPrefilter( function( s ) {
	if ( s.crossDomain ) {
		s.contents.script = false;
	}
} );

// Install script dataType
jQuery.ajaxSetup( {
	accepts: {
		script: "text/javascript, application/javascript, " +
			"application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /\b(?:java|ecma)script\b/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
} );

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
} );

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {

	// This transport only deals with cross domain or forced-by-attrs requests
	if ( s.crossDomain || s.scriptAttrs ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery( "<script>" )
					.attr( s.scriptAttrs || {} )
					.prop( { charset: s.scriptCharset, src: s.url } )
					.on( "load error", callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					} );

				// Use native DOM manipulation to avoid our domManip AJAX trickery
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup( {
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
} );

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" &&
				( s.contentType || "" )
					.indexOf( "application/x-www-form-urlencoded" ) === 0 &&
				rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters[ "script json" ] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// Force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always( function() {

			// If previous value didn't exist - remove it
			if ( overwritten === undefined ) {
				jQuery( window ).removeProp( callbackName );

			// Otherwise restore preexisting value
			} else {
				window[ callbackName ] = overwritten;
			}

			// Save back as free
			if ( s[ callbackName ] ) {

				// Make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// Save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		} );

		// Delegate to script
		return "script";
	}
} );




// Support: Safari 8 only
// In Safari 8 documents created via document.implementation.createHTMLDocument
// collapse sibling forms: the second one becomes a child of the first one.
// Because of that, this security measure has to be disabled in Safari 8.
// https://bugs.webkit.org/show_bug.cgi?id=137337
support.createHTMLDocument = ( function() {
	var body = document.implementation.createHTMLDocument( "" ).body;
	body.innerHTML = "<form></form><form></form>";
	return body.childNodes.length === 2;
} )();


// Argument "data" should be string of html
// context (optional): If specified, the fragment will be created in this context,
// defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( typeof data !== "string" ) {
		return [];
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}

	var base, parsed, scripts;

	if ( !context ) {

		// Stop scripts or inline event handlers from being executed immediately
		// by using document.implementation
		if ( support.createHTMLDocument ) {
			context = document.implementation.createHTMLDocument( "" );

			// Set the base href for the created document
			// so any parsed elements with URLs
			// are based on the document's URL (gh-2965)
			base = context.createElement( "base" );
			base.href = document.location.href;
			context.head.appendChild( base );
		} else {
			context = document;
		}
	}

	parsed = rsingleTag.exec( data );
	scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[ 1 ] ) ];
	}

	parsed = buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	var selector, type, response,
		self = this,
		off = url.indexOf( " " );

	if ( off > -1 ) {
		selector = stripAndCollapse( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax( {
			url: url,

			// If "type" variable is undefined, then "GET" method will be used.
			// Make value of this field explicit since
			// user can override it through ajaxSetup method
			type: type || "GET",
			dataType: "html",
			data: params
		} ).done( function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery( "<div>" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		// If the request succeeds, this function gets "data", "status", "jqXHR"
		// but they are ignored because response was set above.
		// If it fails, this function gets "jqXHR", "status", "error"
		} ).always( callback && function( jqXHR, status ) {
			self.each( function() {
				callback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );
			} );
		} );
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [
	"ajaxStart",
	"ajaxStop",
	"ajaxComplete",
	"ajaxError",
	"ajaxSuccess",
	"ajaxSend"
], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
} );




jQuery.expr.pseudos.animated = function( elem ) {
	return jQuery.grep( jQuery.timers, function( fn ) {
		return elem === fn.elem;
	} ).length;
};




jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf( "auto" ) > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( isFunction( options ) ) {

			// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
			options = options.call( elem, i, jQuery.extend( {}, curOffset ) );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend( {

	// offset() relates an element's border box to the document origin
	offset: function( options ) {

		// Preserve chaining for setter
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each( function( i ) {
					jQuery.offset.setOffset( this, options, i );
				} );
		}

		var rect, win,
			elem = this[ 0 ];

		if ( !elem ) {
			return;
		}

		// Return zeros for disconnected and hidden (display: none) elements (gh-2310)
		// Support: IE <=11 only
		// Running getBoundingClientRect on a
		// disconnected node in IE throws an error
		if ( !elem.getClientRects().length ) {
			return { top: 0, left: 0 };
		}

		// Get document-relative position by adding viewport scroll to viewport-relative gBCR
		rect = elem.getBoundingClientRect();
		win = elem.ownerDocument.defaultView;
		return {
			top: rect.top + win.pageYOffset,
			left: rect.left + win.pageXOffset
		};
	},

	// position() relates an element's margin box to its offset parent's padding box
	// This corresponds to the behavior of CSS absolute positioning
	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset, doc,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// position:fixed elements are offset from the viewport, which itself always has zero offset
		if ( jQuery.css( elem, "position" ) === "fixed" ) {

			// Assume position:fixed implies availability of getBoundingClientRect
			offset = elem.getBoundingClientRect();

		} else {
			offset = this.offset();

			// Account for the *real* offset parent, which can be the document or its root element
			// when a statically positioned element is identified
			doc = elem.ownerDocument;
			offsetParent = elem.offsetParent || doc.documentElement;
			while ( offsetParent &&
				( offsetParent === doc.body || offsetParent === doc.documentElement ) &&
				jQuery.css( offsetParent, "position" ) === "static" ) {

				offsetParent = offsetParent.parentNode;
			}
			if ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {

				// Incorporate borders into its offset, since they are outside its content origin
				parentOffset = jQuery( offsetParent ).offset();
				parentOffset.top += jQuery.css( offsetParent, "borderTopWidth", true );
				parentOffset.left += jQuery.css( offsetParent, "borderLeftWidth", true );
			}
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	// This method will return documentElement in the following cases:
	// 1) For the element inside the iframe without offsetParent, this method will return
	//    documentElement of the parent window
	// 2) For the hidden or detached element
	// 3) For body or html element, i.e. in case of the html node - it will return itself
	//
	// but those exceptions were never presented as a real life use-cases
	// and might be considered as more preferable results.
	//
	// This logic, however, is not guaranteed and can change at any point in the future
	offsetParent: function() {
		return this.map( function() {
			var offsetParent = this.offsetParent;

			while ( offsetParent && jQuery.css( offsetParent, "position" ) === "static" ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || documentElement;
		} );
	}
} );

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {

			// Coalesce documents and windows
			var win;
			if ( isWindow( elem ) ) {
				win = elem;
			} else if ( elem.nodeType === 9 ) {
				win = elem.defaultView;
			}

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : win.pageXOffset,
					top ? val : win.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length );
	};
} );

// Support: Safari <=7 - 9.1, Chrome <=37 - 49
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );

				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
} );


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name },
		function( defaultExtra, funcName ) {

		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( isWindow( elem ) ) {

					// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)
					return funcName.indexOf( "outer" ) === 0 ?
						elem[ "inner" + name ] :
						elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?

					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable );
		};
	} );
} );


jQuery.each( ( "blur focus focusin focusout resize scroll click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup contextmenu" ).split( " " ),
	function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
} );

jQuery.fn.extend( {
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	}
} );




jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {

		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	}
} );

// Bind a function to a context, optionally partially applying any
// arguments.
// jQuery.proxy is deprecated to promote standards (specifically Function#bind)
// However, it is not slated for removal any time soon
jQuery.proxy = function( fn, context ) {
	var tmp, args, proxy;

	if ( typeof context === "string" ) {
		tmp = fn[ context ];
		context = fn;
		fn = tmp;
	}

	// Quick check to determine if target is callable, in the spec
	// this throws a TypeError, but we will just return undefined.
	if ( !isFunction( fn ) ) {
		return undefined;
	}

	// Simulated bind
	args = slice.call( arguments, 2 );
	proxy = function() {
		return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
	};

	// Set the guid of unique handler to the same of original handler, so it can be removed
	proxy.guid = fn.guid = fn.guid || jQuery.guid++;

	return proxy;
};

jQuery.holdReady = function( hold ) {
	if ( hold ) {
		jQuery.readyWait++;
	} else {
		jQuery.ready( true );
	}
};
jQuery.isArray = Array.isArray;
jQuery.parseJSON = JSON.parse;
jQuery.nodeName = nodeName;
jQuery.isFunction = isFunction;
jQuery.isWindow = isWindow;
jQuery.camelCase = camelCase;
jQuery.type = toType;

jQuery.now = Date.now;

jQuery.isNumeric = function( obj ) {

	// As of jQuery 3.0, isNumeric is limited to
	// strings and numbers (primitives or objects)
	// that can be coerced to finite numbers (gh-2662)
	var type = jQuery.type( obj );
	return ( type === "number" || type === "string" ) &&

		// parseFloat NaNs numeric-cast false positives ("")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		!isNaN( obj - parseFloat( obj ) );
};




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( true ) {
	!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
		return jQuery;
	}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
}




var

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( !noGlobal ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;
} );


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery, $, global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */
var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */
(function (factory) {
  window.cash = factory();
})(function () {
  var doc = document,
      win = window,
      ArrayProto = Array.prototype,
      slice = ArrayProto.slice,
      filter = ArrayProto.filter,
      push = ArrayProto.push;

  var noop = function () {},
      isFunction = function (item) {
    // @see https://crbug.com/568448
    return typeof item === typeof noop && item.call;
  },
      isString = function (item) {
    return typeof item === typeof "";
  };

  var idMatch = /^#[\w-]*$/,
      classMatch = /^\.[\w-]*$/,
      htmlMatch = /<.+>/,
      singlet = /^\w+$/;

  function find(selector, context) {
    context = context || doc;
    var elems = classMatch.test(selector) ? context.getElementsByClassName(selector.slice(1)) : singlet.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector);
    return elems;
  }

  var frag;
  function parseHTML(str) {
    if (!frag) {
      frag = doc.implementation.createHTMLDocument(null);
      var base = frag.createElement("base");
      base.href = doc.location.href;
      frag.head.appendChild(base);
    }

    frag.body.innerHTML = str;

    return frag.body.childNodes;
  }

  function onReady(fn) {
    if (doc.readyState !== "loading") {
      fn();
    } else {
      doc.addEventListener("DOMContentLoaded", fn);
    }
  }

  function Init(selector, context) {
    if (!selector) {
      return this;
    }

    // If already a cash collection, don't do any further processing
    if (selector.cash && selector !== win) {
      return selector;
    }

    var elems = selector,
        i = 0,
        length;

    if (isString(selector)) {
      elems = idMatch.test(selector) ?
      // If an ID use the faster getElementById check
      doc.getElementById(selector.slice(1)) : htmlMatch.test(selector) ?
      // If HTML, parse it into real elements
      parseHTML(selector) :
      // else use `find`
      find(selector, context);

      // If function, use as shortcut for DOM ready
    } else if (isFunction(selector)) {
      onReady(selector);return this;
    }

    if (!elems) {
      return this;
    }

    // If a single DOM element is passed in or received via ID, return the single element
    if (elems.nodeType || elems === win) {
      this[0] = elems;
      this.length = 1;
    } else {
      // Treat like an array and loop through each item.
      length = this.length = elems.length;
      for (; i < length; i++) {
        this[i] = elems[i];
      }
    }

    return this;
  }

  function cash(selector, context) {
    return new Init(selector, context);
  }

  var fn = cash.fn = cash.prototype = Init.prototype = { // jshint ignore:line
    cash: true,
    length: 0,
    push: push,
    splice: ArrayProto.splice,
    map: ArrayProto.map,
    init: Init
  };

  Object.defineProperty(fn, "constructor", { value: cash });

  cash.parseHTML = parseHTML;
  cash.noop = noop;
  cash.isFunction = isFunction;
  cash.isString = isString;

  cash.extend = fn.extend = function (target) {
    target = target || {};

    var args = slice.call(arguments),
        length = args.length,
        i = 1;

    if (args.length === 1) {
      target = this;
      i = 0;
    }

    for (; i < length; i++) {
      if (!args[i]) {
        continue;
      }
      for (var key in args[i]) {
        if (args[i].hasOwnProperty(key)) {
          target[key] = args[i][key];
        }
      }
    }

    return target;
  };

  function each(collection, callback) {
    var l = collection.length,
        i = 0;

    for (; i < l; i++) {
      if (callback.call(collection[i], collection[i], i, collection) === false) {
        break;
      }
    }
  }

  function matches(el, selector) {
    var m = el && (el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector || el.oMatchesSelector);
    return !!m && m.call(el, selector);
  }

  function getCompareFunction(selector) {
    return (
      /* Use browser's `matches` function if string */
      isString(selector) ? matches :
      /* Match a cash element */
      selector.cash ? function (el) {
        return selector.is(el);
      } :
      /* Direct comparison */
      function (el, selector) {
        return el === selector;
      }
    );
  }

  function unique(collection) {
    return cash(slice.call(collection).filter(function (item, index, self) {
      return self.indexOf(item) === index;
    }));
  }

  cash.extend({
    merge: function (first, second) {
      var len = +second.length,
          i = first.length,
          j = 0;

      for (; j < len; i++, j++) {
        first[i] = second[j];
      }

      first.length = i;
      return first;
    },

    each: each,
    matches: matches,
    unique: unique,
    isArray: Array.isArray,
    isNumeric: function (n) {
      return !isNaN(parseFloat(n)) && isFinite(n);
    }

  });

  var uid = cash.uid = "_cash" + Date.now();

  function getDataCache(node) {
    return node[uid] = node[uid] || {};
  }

  function setData(node, key, value) {
    return getDataCache(node)[key] = value;
  }

  function getData(node, key) {
    var c = getDataCache(node);
    if (c[key] === undefined) {
      c[key] = node.dataset ? node.dataset[key] : cash(node).attr("data-" + key);
    }
    return c[key];
  }

  function removeData(node, key) {
    var c = getDataCache(node);
    if (c) {
      delete c[key];
    } else if (node.dataset) {
      delete node.dataset[key];
    } else {
      cash(node).removeAttr("data-" + name);
    }
  }

  fn.extend({
    data: function (name, value) {
      if (isString(name)) {
        return value === undefined ? getData(this[0], name) : this.each(function (v) {
          return setData(v, name, value);
        });
      }

      for (var key in name) {
        this.data(key, name[key]);
      }

      return this;
    },

    removeData: function (key) {
      return this.each(function (v) {
        return removeData(v, key);
      });
    }

  });

  var notWhiteMatch = /\S+/g;

  function getClasses(c) {
    return isString(c) && c.match(notWhiteMatch);
  }

  function hasClass(v, c) {
    return v.classList ? v.classList.contains(c) : new RegExp("(^| )" + c + "( |$)", "gi").test(v.className);
  }

  function addClass(v, c, spacedName) {
    if (v.classList) {
      v.classList.add(c);
    } else if (spacedName.indexOf(" " + c + " ")) {
      v.className += " " + c;
    }
  }

  function removeClass(v, c) {
    if (v.classList) {
      v.classList.remove(c);
    } else {
      v.className = v.className.replace(c, "");
    }
  }

  fn.extend({
    addClass: function (c) {
      var classes = getClasses(c);

      return classes ? this.each(function (v) {
        var spacedName = " " + v.className + " ";
        each(classes, function (c) {
          addClass(v, c, spacedName);
        });
      }) : this;
    },

    attr: function (name, value) {
      if (!name) {
        return undefined;
      }

      if (isString(name)) {
        if (value === undefined) {
          return this[0] ? this[0].getAttribute ? this[0].getAttribute(name) : this[0][name] : undefined;
        }

        return this.each(function (v) {
          if (v.setAttribute) {
            v.setAttribute(name, value);
          } else {
            v[name] = value;
          }
        });
      }

      for (var key in name) {
        this.attr(key, name[key]);
      }

      return this;
    },

    hasClass: function (c) {
      var check = false,
          classes = getClasses(c);
      if (classes && classes.length) {
        this.each(function (v) {
          check = hasClass(v, classes[0]);
          return !check;
        });
      }
      return check;
    },

    prop: function (name, value) {
      if (isString(name)) {
        return value === undefined ? this[0][name] : this.each(function (v) {
          v[name] = value;
        });
      }

      for (var key in name) {
        this.prop(key, name[key]);
      }

      return this;
    },

    removeAttr: function (name) {
      return this.each(function (v) {
        if (v.removeAttribute) {
          v.removeAttribute(name);
        } else {
          delete v[name];
        }
      });
    },

    removeClass: function (c) {
      if (!arguments.length) {
        return this.attr("class", "");
      }
      var classes = getClasses(c);
      return classes ? this.each(function (v) {
        each(classes, function (c) {
          removeClass(v, c);
        });
      }) : this;
    },

    removeProp: function (name) {
      return this.each(function (v) {
        delete v[name];
      });
    },

    toggleClass: function (c, state) {
      if (state !== undefined) {
        return this[state ? "addClass" : "removeClass"](c);
      }
      var classes = getClasses(c);
      return classes ? this.each(function (v) {
        var spacedName = " " + v.className + " ";
        each(classes, function (c) {
          if (hasClass(v, c)) {
            removeClass(v, c);
          } else {
            addClass(v, c, spacedName);
          }
        });
      }) : this;
    } });

  fn.extend({
    add: function (selector, context) {
      return unique(cash.merge(this, cash(selector, context)));
    },

    each: function (callback) {
      each(this, callback);
      return this;
    },

    eq: function (index) {
      return cash(this.get(index));
    },

    filter: function (selector) {
      if (!selector) {
        return this;
      }

      var comparator = isFunction(selector) ? selector : getCompareFunction(selector);

      return cash(filter.call(this, function (e) {
        return comparator(e, selector);
      }));
    },

    first: function () {
      return this.eq(0);
    },

    get: function (index) {
      if (index === undefined) {
        return slice.call(this);
      }
      return index < 0 ? this[index + this.length] : this[index];
    },

    index: function (elem) {
      var child = elem ? cash(elem)[0] : this[0],
          collection = elem ? this : cash(child).parent().children();
      return slice.call(collection).indexOf(child);
    },

    last: function () {
      return this.eq(-1);
    }

  });

  var camelCase = function () {
    var camelRegex = /(?:^\w|[A-Z]|\b\w)/g,
        whiteSpace = /[\s-_]+/g;
    return function (str) {
      return str.replace(camelRegex, function (letter, index) {
        return letter[index === 0 ? "toLowerCase" : "toUpperCase"]();
      }).replace(whiteSpace, "");
    };
  }();

  var getPrefixedProp = function () {
    var cache = {},
        doc = document,
        div = doc.createElement("div"),
        style = div.style;

    return function (prop) {
      prop = camelCase(prop);
      if (cache[prop]) {
        return cache[prop];
      }

      var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),
          prefixes = ["webkit", "moz", "ms", "o"],
          props = (prop + " " + prefixes.join(ucProp + " ") + ucProp).split(" ");

      each(props, function (p) {
        if (p in style) {
          cache[p] = prop = cache[prop] = p;
          return false;
        }
      });

      return cache[prop];
    };
  }();

  cash.prefixedProp = getPrefixedProp;
  cash.camelCase = camelCase;

  fn.extend({
    css: function (prop, value) {
      if (isString(prop)) {
        prop = getPrefixedProp(prop);
        return arguments.length > 1 ? this.each(function (v) {
          return v.style[prop] = value;
        }) : win.getComputedStyle(this[0])[prop];
      }

      for (var key in prop) {
        this.css(key, prop[key]);
      }

      return this;
    }

  });

  function compute(el, prop) {
    return parseInt(win.getComputedStyle(el[0], null)[prop], 10) || 0;
  }

  each(["Width", "Height"], function (v) {
    var lower = v.toLowerCase();

    fn[lower] = function () {
      return this[0].getBoundingClientRect()[lower];
    };

    fn["inner" + v] = function () {
      return this[0]["client" + v];
    };

    fn["outer" + v] = function (margins) {
      return this[0]["offset" + v] + (margins ? compute(this, "margin" + (v === "Width" ? "Left" : "Top")) + compute(this, "margin" + (v === "Width" ? "Right" : "Bottom")) : 0);
    };
  });

  function registerEvent(node, eventName, callback) {
    var eventCache = getData(node, "_cashEvents") || setData(node, "_cashEvents", {});
    eventCache[eventName] = eventCache[eventName] || [];
    eventCache[eventName].push(callback);
    node.addEventListener(eventName, callback);
  }

  function removeEvent(node, eventName, callback) {
    var events = getData(node, "_cashEvents"),
        eventCache = events && events[eventName],
        index;

    if (!eventCache) {
      return;
    }

    if (callback) {
      node.removeEventListener(eventName, callback);
      index = eventCache.indexOf(callback);
      if (index >= 0) {
        eventCache.splice(index, 1);
      }
    } else {
      each(eventCache, function (event) {
        node.removeEventListener(eventName, event);
      });
      eventCache = [];
    }
  }

  fn.extend({
    off: function (eventName, callback) {
      return this.each(function (v) {
        return removeEvent(v, eventName, callback);
      });
    },

    on: function (eventName, delegate, callback, runOnce) {
      // jshint ignore:line
      var originalCallback;
      if (!isString(eventName)) {
        for (var key in eventName) {
          this.on(key, delegate, eventName[key]);
        }
        return this;
      }

      if (isFunction(delegate)) {
        callback = delegate;
        delegate = null;
      }

      if (eventName === "ready") {
        onReady(callback);
        return this;
      }

      if (delegate) {
        originalCallback = callback;
        callback = function (e) {
          var t = e.target;
          while (!matches(t, delegate)) {
            if (t === this || t === null) {
              return t = false;
            }

            t = t.parentNode;
          }

          if (t) {
            originalCallback.call(t, e);
          }
        };
      }

      return this.each(function (v) {
        var finalCallback = callback;
        if (runOnce) {
          finalCallback = function () {
            callback.apply(this, arguments);
            removeEvent(v, eventName, finalCallback);
          };
        }
        registerEvent(v, eventName, finalCallback);
      });
    },

    one: function (eventName, delegate, callback) {
      return this.on(eventName, delegate, callback, true);
    },

    ready: onReady,

    /**
     * Modified
     * Triggers browser event
     * @param String eventName
     * @param Object data - Add properties to event object
     */
    trigger: function (eventName, data) {
      if (document.createEvent) {
        var evt = document.createEvent('HTMLEvents');
        evt.initEvent(eventName, true, false);
        evt = this.extend(evt, data);
        return this.each(function (v) {
          return v.dispatchEvent(evt);
        });
      }
    }

  });

  function encode(name, value) {
    return "&" + encodeURIComponent(name) + "=" + encodeURIComponent(value).replace(/%20/g, "+");
  }

  function getSelectMultiple_(el) {
    var values = [];
    each(el.options, function (o) {
      if (o.selected) {
        values.push(o.value);
      }
    });
    return values.length ? values : null;
  }

  function getSelectSingle_(el) {
    var selectedIndex = el.selectedIndex;
    return selectedIndex >= 0 ? el.options[selectedIndex].value : null;
  }

  function getValue(el) {
    var type = el.type;
    if (!type) {
      return null;
    }
    switch (type.toLowerCase()) {
      case "select-one":
        return getSelectSingle_(el);
      case "select-multiple":
        return getSelectMultiple_(el);
      case "radio":
        return el.checked ? el.value : null;
      case "checkbox":
        return el.checked ? el.value : null;
      default:
        return el.value ? el.value : null;
    }
  }

  fn.extend({
    serialize: function () {
      var query = "";

      each(this[0].elements || this, function (el) {
        if (el.disabled || el.tagName === "FIELDSET") {
          return;
        }
        var name = el.name;
        switch (el.type.toLowerCase()) {
          case "file":
          case "reset":
          case "submit":
          case "button":
            break;
          case "select-multiple":
            var values = getValue(el);
            if (values !== null) {
              each(values, function (value) {
                query += encode(name, value);
              });
            }
            break;
          default:
            var value = getValue(el);
            if (value !== null) {
              query += encode(name, value);
            }
        }
      });

      return query.substr(1);
    },

    val: function (value) {
      if (value === undefined) {
        return getValue(this[0]);
      }

      return this.each(function (v) {
        return v.value = value;
      });
    }

  });

  function insertElement(el, child, prepend) {
    if (prepend) {
      var first = el.childNodes[0];
      el.insertBefore(child, first);
    } else {
      el.appendChild(child);
    }
  }

  function insertContent(parent, child, prepend) {
    var str = isString(child);

    if (!str && child.length) {
      each(child, function (v) {
        return insertContent(parent, v, prepend);
      });
      return;
    }

    each(parent, str ? function (v) {
      return v.insertAdjacentHTML(prepend ? "afterbegin" : "beforeend", child);
    } : function (v, i) {
      return insertElement(v, i === 0 ? child : child.cloneNode(true), prepend);
    });
  }

  fn.extend({
    after: function (selector) {
      cash(selector).insertAfter(this);
      return this;
    },

    append: function (content) {
      insertContent(this, content);
      return this;
    },

    appendTo: function (parent) {
      insertContent(cash(parent), this);
      return this;
    },

    before: function (selector) {
      cash(selector).insertBefore(this);
      return this;
    },

    clone: function () {
      return cash(this.map(function (v) {
        return v.cloneNode(true);
      }));
    },

    empty: function () {
      this.html("");
      return this;
    },

    html: function (content) {
      if (content === undefined) {
        return this[0].innerHTML;
      }
      var source = content.nodeType ? content[0].outerHTML : content;
      return this.each(function (v) {
        return v.innerHTML = source;
      });
    },

    insertAfter: function (selector) {
      var _this = this;

      cash(selector).each(function (el, i) {
        var parent = el.parentNode,
            sibling = el.nextSibling;
        _this.each(function (v) {
          parent.insertBefore(i === 0 ? v : v.cloneNode(true), sibling);
        });
      });

      return this;
    },

    insertBefore: function (selector) {
      var _this2 = this;
      cash(selector).each(function (el, i) {
        var parent = el.parentNode;
        _this2.each(function (v) {
          parent.insertBefore(i === 0 ? v : v.cloneNode(true), el);
        });
      });
      return this;
    },

    prepend: function (content) {
      insertContent(this, content, true);
      return this;
    },

    prependTo: function (parent) {
      insertContent(cash(parent), this, true);
      return this;
    },

    remove: function () {
      return this.each(function (v) {
        if (!!v.parentNode) {
          return v.parentNode.removeChild(v);
        }
      });
    },

    text: function (content) {
      if (content === undefined) {
        return this[0].textContent;
      }
      return this.each(function (v) {
        return v.textContent = content;
      });
    }

  });

  var docEl = doc.documentElement;

  fn.extend({
    position: function () {
      var el = this[0];
      return {
        left: el.offsetLeft,
        top: el.offsetTop
      };
    },

    offset: function () {
      var rect = this[0].getBoundingClientRect();
      return {
        top: rect.top + win.pageYOffset - docEl.clientTop,
        left: rect.left + win.pageXOffset - docEl.clientLeft
      };
    },

    offsetParent: function () {
      return cash(this[0].offsetParent);
    }

  });

  fn.extend({
    children: function (selector) {
      var elems = [];
      this.each(function (el) {
        push.apply(elems, el.children);
      });
      elems = unique(elems);

      return !selector ? elems : elems.filter(function (v) {
        return matches(v, selector);
      });
    },

    closest: function (selector) {
      if (!selector || this.length < 1) {
        return cash();
      }
      if (this.is(selector)) {
        return this.filter(selector);
      }
      return this.parent().closest(selector);
    },

    is: function (selector) {
      if (!selector) {
        return false;
      }

      var match = false,
          comparator = getCompareFunction(selector);

      this.each(function (el) {
        match = comparator(el, selector);
        return !match;
      });

      return match;
    },

    find: function (selector) {
      if (!selector || selector.nodeType) {
        return cash(selector && this.has(selector).length ? selector : null);
      }

      var elems = [];
      this.each(function (el) {
        push.apply(elems, find(selector, el));
      });

      return unique(elems);
    },

    has: function (selector) {
      var comparator = isString(selector) ? function (el) {
        return find(selector, el).length !== 0;
      } : function (el) {
        return el.contains(selector);
      };

      return this.filter(comparator);
    },

    next: function () {
      return cash(this[0].nextElementSibling);
    },

    not: function (selector) {
      if (!selector) {
        return this;
      }

      var comparator = getCompareFunction(selector);

      return this.filter(function (el) {
        return !comparator(el, selector);
      });
    },

    parent: function () {
      var result = [];

      this.each(function (item) {
        if (item && item.parentNode) {
          result.push(item.parentNode);
        }
      });

      return unique(result);
    },

    parents: function (selector) {
      var last,
          result = [];

      this.each(function (item) {
        last = item;

        while (last && last.parentNode && last !== doc.body.parentNode) {
          last = last.parentNode;

          if (!selector || selector && matches(last, selector)) {
            result.push(last);
          }
        }
      });

      return unique(result);
    },

    prev: function () {
      return cash(this[0].previousElementSibling);
    },

    siblings: function (selector) {
      var collection = this.parent().children(selector),
          el = this[0];

      return collection.filter(function (i) {
        return i !== el;
      });
    }

  });

  return cash;
});
;
var Component = function () {
  /**
   * Generic constructor for all components
   * @constructor
   * @param {Element} el
   * @param {Object} options
   */
  function Component(classDef, el, options) {
    _classCallCheck(this, Component);

    // Display error if el is valid HTML Element
    if (!(el instanceof Element)) {
      console.error(Error(el + ' is not an HTML Element'));
    }

    // If exists, destroy and reinitialize in child
    var ins = classDef.getInstance(el);
    if (!!ins) {
      ins.destroy();
    }

    this.el = el;
    this.$el = cash(el);
  }

  /**
   * Initializes components
   * @param {class} classDef
   * @param {Element | NodeList | jQuery} els
   * @param {Object} options
   */


  _createClass(Component, null, [{
    key: "init",
    value: function init(classDef, els, options) {
      var instances = null;
      if (els instanceof Element) {
        instances = new classDef(els, options);
      } else if (!!els && (els.jquery || els.cash || els instanceof NodeList)) {
        var instancesArr = [];
        for (var i = 0; i < els.length; i++) {
          instancesArr.push(new classDef(els[i], options));
        }
        instances = instancesArr;
      }

      return instances;
    }
  }]);

  return Component;
}();

; // Required for Meteor package, the use of window prevents export by Meteor
(function (window) {
  if (window.Package) {
    M = {};
  } else {
    window.M = {};
  }

  // Check for jQuery
  M.jQueryLoaded = !!window.jQuery;
})(window);

// AMD
if (true) {
  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
    return M;
  }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

  // Common JS
} else {}

M.version = '1.0.0';

M.keys = {
  TAB: 9,
  ENTER: 13,
  ESC: 27,
  ARROW_UP: 38,
  ARROW_DOWN: 40
};

/**
 * TabPress Keydown handler
 */
M.tabPressed = false;
M.keyDown = false;
var docHandleKeydown = function (e) {
  M.keyDown = true;
  if (e.which === M.keys.TAB || e.which === M.keys.ARROW_DOWN || e.which === M.keys.ARROW_UP) {
    M.tabPressed = true;
  }
};
var docHandleKeyup = function (e) {
  M.keyDown = false;
  if (e.which === M.keys.TAB || e.which === M.keys.ARROW_DOWN || e.which === M.keys.ARROW_UP) {
    M.tabPressed = false;
  }
};
var docHandleFocus = function (e) {
  if (M.keyDown) {
    document.body.classList.add('keyboard-focused');
  }
};
var docHandleBlur = function (e) {
  document.body.classList.remove('keyboard-focused');
};
document.addEventListener('keydown', docHandleKeydown, true);
document.addEventListener('keyup', docHandleKeyup, true);
document.addEventListener('focus', docHandleFocus, true);
document.addEventListener('blur', docHandleBlur, true);

/**
 * Initialize jQuery wrapper for plugin
 * @param {Class} plugin  javascript class
 * @param {string} pluginName  jQuery plugin name
 * @param {string} classRef  Class reference name
 */
M.initializeJqueryWrapper = function (plugin, pluginName, classRef) {
  jQuery.fn[pluginName] = function (methodOrOptions) {
    // Call plugin method if valid method name is passed in
    if (plugin.prototype[methodOrOptions]) {
      var params = Array.prototype.slice.call(arguments, 1);

      // Getter methods
      if (methodOrOptions.slice(0, 3) === 'get') {
        var instance = this.first()[0][classRef];
        return instance[methodOrOptions].apply(instance, params);
      }

      // Void methods
      return this.each(function () {
        var instance = this[classRef];
        instance[methodOrOptions].apply(instance, params);
      });

      // Initialize plugin if options or no argument is passed in
    } else if (typeof methodOrOptions === 'object' || !methodOrOptions) {
      plugin.init(this, arguments[0]);
      return this;
    }

    // Return error if an unrecognized  method name is passed in
    jQuery.error("Method " + methodOrOptions + " does not exist on jQuery." + pluginName);
  };
};

/**
 * Automatically initialize components
 * @param {Element} context  DOM Element to search within for components
 */
M.AutoInit = function (context) {
  // Use document.body if no context is given
  var root = !!context ? context : document.body;

  var registry = {
    Autocomplete: root.querySelectorAll('.autocomplete:not(.no-autoinit)'),
    Carousel: root.querySelectorAll('.carousel:not(.no-autoinit)'),
    Chips: root.querySelectorAll('.chips:not(.no-autoinit)'),
    Collapsible: root.querySelectorAll('.collapsible:not(.no-autoinit)'),
    Datepicker: root.querySelectorAll('.datepicker:not(.no-autoinit)'),
    Dropdown: root.querySelectorAll('.dropdown-trigger:not(.no-autoinit)'),
    Materialbox: root.querySelectorAll('.materialboxed:not(.no-autoinit)'),
    Modal: root.querySelectorAll('.modal:not(.no-autoinit)'),
    Parallax: root.querySelectorAll('.parallax:not(.no-autoinit)'),
    Pushpin: root.querySelectorAll('.pushpin:not(.no-autoinit)'),
    ScrollSpy: root.querySelectorAll('.scrollspy:not(.no-autoinit)'),
    FormSelect: root.querySelectorAll('select:not(.no-autoinit)'),
    Sidenav: root.querySelectorAll('.sidenav:not(.no-autoinit)'),
    Tabs: root.querySelectorAll('.tabs:not(.no-autoinit)'),
    TapTarget: root.querySelectorAll('.tap-target:not(.no-autoinit)'),
    Timepicker: root.querySelectorAll('.timepicker:not(.no-autoinit)'),
    Tooltip: root.querySelectorAll('.tooltipped:not(.no-autoinit)'),
    FloatingActionButton: root.querySelectorAll('.fixed-action-btn:not(.no-autoinit)')
  };

  for (var pluginName in registry) {
    var plugin = M[pluginName];
    plugin.init(registry[pluginName]);
  }
};

/**
 * Generate approximated selector string for a jQuery object
 * @param {jQuery} obj  jQuery object to be parsed
 * @returns {string}
 */
M.objectSelectorString = function (obj) {
  var tagStr = obj.prop('tagName') || '';
  var idStr = obj.attr('id') || '';
  var classStr = obj.attr('class') || '';
  return (tagStr + idStr + classStr).replace(/\s/g, '');
};

// Unique Random ID
M.guid = function () {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
  }
  return function () {
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
  };
}();

/**
 * Escapes hash from special characters
 * @param {string} hash  String returned from this.hash
 * @returns {string}
 */
M.escapeHash = function (hash) {
  return hash.replace(/(:|\.|\[|\]|,|=|\/)/g, '\\$1');
};

M.elementOrParentIsFixed = function (element) {
  var $element = $(element);
  var $checkElements = $element.add($element.parents());
  var isFixed = false;
  $checkElements.each(function () {
    if ($(this).css('position') === 'fixed') {
      isFixed = true;
      return false;
    }
  });
  return isFixed;
};

/**
 * @typedef {Object} Edges
 * @property {Boolean} top  If the top edge was exceeded
 * @property {Boolean} right  If the right edge was exceeded
 * @property {Boolean} bottom  If the bottom edge was exceeded
 * @property {Boolean} left  If the left edge was exceeded
 */

/**
 * @typedef {Object} Bounding
 * @property {Number} left  left offset coordinate
 * @property {Number} top  top offset coordinate
 * @property {Number} width
 * @property {Number} height
 */

/**
 * Escapes hash from special characters
 * @param {Element} container  Container element that acts as the boundary
 * @param {Bounding} bounding  element bounding that is being checked
 * @param {Number} offset  offset from edge that counts as exceeding
 * @returns {Edges}
 */
M.checkWithinContainer = function (container, bounding, offset) {
  var edges = {
    top: false,
    right: false,
    bottom: false,
    left: false
  };

  var containerRect = container.getBoundingClientRect();
  // If body element is smaller than viewport, use viewport height instead.
  var containerBottom = container === document.body ? Math.max(containerRect.bottom, window.innerHeight) : containerRect.bottom;

  var scrollLeft = container.scrollLeft;
  var scrollTop = container.scrollTop;

  var scrolledX = bounding.left - scrollLeft;
  var scrolledY = bounding.top - scrollTop;

  // Check for container and viewport for each edge
  if (scrolledX < containerRect.left + offset || scrolledX < offset) {
    edges.left = true;
  }

  if (scrolledX + bounding.width > containerRect.right - offset || scrolledX + bounding.width > window.innerWidth - offset) {
    edges.right = true;
  }

  if (scrolledY < containerRect.top + offset || scrolledY < offset) {
    edges.top = true;
  }

  if (scrolledY + bounding.height > containerBottom - offset || scrolledY + bounding.height > window.innerHeight - offset) {
    edges.bottom = true;
  }

  return edges;
};

M.checkPossibleAlignments = function (el, container, bounding, offset) {
  var canAlign = {
    top: true,
    right: true,
    bottom: true,
    left: true,
    spaceOnTop: null,
    spaceOnRight: null,
    spaceOnBottom: null,
    spaceOnLeft: null
  };

  var containerAllowsOverflow = getComputedStyle(container).overflow === 'visible';
  var containerRect = container.getBoundingClientRect();
  var containerHeight = Math.min(containerRect.height, window.innerHeight);
  var containerWidth = Math.min(containerRect.width, window.innerWidth);
  var elOffsetRect = el.getBoundingClientRect();

  var scrollLeft = container.scrollLeft;
  var scrollTop = container.scrollTop;

  var scrolledX = bounding.left - scrollLeft;
  var scrolledYTopEdge = bounding.top - scrollTop;
  var scrolledYBottomEdge = bounding.top + elOffsetRect.height - scrollTop;

  // Check for container and viewport for left
  canAlign.spaceOnRight = !containerAllowsOverflow ? containerWidth - (scrolledX + bounding.width) : window.innerWidth - (elOffsetRect.left + bounding.width);
  if (canAlign.spaceOnRight < 0) {
    canAlign.left = false;
  }

  // Check for container and viewport for Right
  canAlign.spaceOnLeft = !containerAllowsOverflow ? scrolledX - bounding.width + elOffsetRect.width : elOffsetRect.right - bounding.width;
  if (canAlign.spaceOnLeft < 0) {
    canAlign.right = false;
  }

  // Check for container and viewport for Top
  canAlign.spaceOnBottom = !containerAllowsOverflow ? containerHeight - (scrolledYTopEdge + bounding.height + offset) : window.innerHeight - (elOffsetRect.top + bounding.height + offset);
  if (canAlign.spaceOnBottom < 0) {
    canAlign.top = false;
  }

  // Check for container and viewport for Bottom
  canAlign.spaceOnTop = !containerAllowsOverflow ? scrolledYBottomEdge - (bounding.height - offset) : elOffsetRect.bottom - (bounding.height + offset);
  if (canAlign.spaceOnTop < 0) {
    canAlign.bottom = false;
  }

  return canAlign;
};

M.getOverflowParent = function (element) {
  if (element == null) {
    return null;
  }

  if (element === document.body || getComputedStyle(element).overflow !== 'visible') {
    return element;
  }

  return M.getOverflowParent(element.parentElement);
};

/**
 * Gets id of component from a trigger
 * @param {Element} trigger  trigger
 * @returns {string}
 */
M.getIdFromTrigger = function (trigger) {
  var id = trigger.getAttribute('data-target');
  if (!id) {
    id = trigger.getAttribute('href');
    if (id) {
      id = id.slice(1);
    } else {
      id = '';
    }
  }
  return id;
};

/**
 * Multi browser support for document scroll top
 * @returns {Number}
 */
M.getDocumentScrollTop = function () {
  return window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
};

/**
 * Multi browser support for document scroll left
 * @returns {Number}
 */
M.getDocumentScrollLeft = function () {
  return window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
};

/**
 * @typedef {Object} Edges
 * @property {Boolean} top  If the top edge was exceeded
 * @property {Boolean} right  If the right edge was exceeded
 * @property {Boolean} bottom  If the bottom edge was exceeded
 * @property {Boolean} left  If the left edge was exceeded
 */

/**
 * @typedef {Object} Bounding
 * @property {Number} left  left offset coordinate
 * @property {Number} top  top offset coordinate
 * @property {Number} width
 * @property {Number} height
 */

/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */
var getTime = Date.now || function () {
  return new Date().getTime();
};

/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */
M.throttle = function (func, wait, options) {
  var context = void 0,
      args = void 0,
      result = void 0;
  var timeout = null;
  var previous = 0;
  options || (options = {});
  var later = function () {
    previous = options.leading === false ? 0 : getTime();
    timeout = null;
    result = func.apply(context, args);
    context = args = null;
  };
  return function () {
    var now = getTime();
    if (!previous && options.leading === false) previous = now;
    var remaining = wait - (now - previous);
    context = this;
    args = arguments;
    if (remaining <= 0) {
      clearTimeout(timeout);
      timeout = null;
      previous = now;
      result = func.apply(context, args);
      context = args = null;
    } else if (!timeout && options.trailing !== false) {
      timeout = setTimeout(later, remaining);
    }
    return result;
  };
};
; /*
  v2.2.0
  2017 Julian Garnier
  Released under the MIT license
  */
var $jscomp = { scope: {} };$jscomp.defineProperty = "function" == typeof Object.defineProperties ? Object.defineProperty : function (e, r, p) {
  if (p.get || p.set) throw new TypeError("ES3 does not support getters and setters.");e != Array.prototype && e != Object.prototype && (e[r] = p.value);
};$jscomp.getGlobal = function (e) {
  return "undefined" != typeof window && window === e ? e : "undefined" != typeof global && null != global ? global : e;
};$jscomp.global = $jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
  $jscomp.initSymbol = function () {};$jscomp.global.Symbol || ($jscomp.global.Symbol = $jscomp.Symbol);
};$jscomp.symbolCounter_ = 0;$jscomp.Symbol = function (e) {
  return $jscomp.SYMBOL_PREFIX + (e || "") + $jscomp.symbolCounter_++;
};
$jscomp.initSymbolIterator = function () {
  $jscomp.initSymbol();var e = $jscomp.global.Symbol.iterator;e || (e = $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("iterator"));"function" != typeof Array.prototype[e] && $jscomp.defineProperty(Array.prototype, e, { configurable: !0, writable: !0, value: function () {
      return $jscomp.arrayIterator(this);
    } });$jscomp.initSymbolIterator = function () {};
};$jscomp.arrayIterator = function (e) {
  var r = 0;return $jscomp.iteratorPrototype(function () {
    return r < e.length ? { done: !1, value: e[r++] } : { done: !0 };
  });
};
$jscomp.iteratorPrototype = function (e) {
  $jscomp.initSymbolIterator();e = { next: e };e[$jscomp.global.Symbol.iterator] = function () {
    return this;
  };return e;
};$jscomp.array = $jscomp.array || {};$jscomp.iteratorFromArray = function (e, r) {
  $jscomp.initSymbolIterator();e instanceof String && (e += "");var p = 0,
      m = { next: function () {
      if (p < e.length) {
        var u = p++;return { value: r(u, e[u]), done: !1 };
      }m.next = function () {
        return { done: !0, value: void 0 };
      };return m.next();
    } };m[Symbol.iterator] = function () {
    return m;
  };return m;
};
$jscomp.polyfill = function (e, r, p, m) {
  if (r) {
    p = $jscomp.global;e = e.split(".");for (m = 0; m < e.length - 1; m++) {
      var u = e[m];u in p || (p[u] = {});p = p[u];
    }e = e[e.length - 1];m = p[e];r = r(m);r != m && null != r && $jscomp.defineProperty(p, e, { configurable: !0, writable: !0, value: r });
  }
};$jscomp.polyfill("Array.prototype.keys", function (e) {
  return e ? e : function () {
    return $jscomp.iteratorFromArray(this, function (e) {
      return e;
    });
  };
}, "es6-impl", "es3");var $jscomp$this = this;
(function (r) {
  M.anime = r();
})(function () {
  function e(a) {
    if (!h.col(a)) try {
      return document.querySelectorAll(a);
    } catch (c) {}
  }function r(a, c) {
    for (var d = a.length, b = 2 <= arguments.length ? arguments[1] : void 0, f = [], n = 0; n < d; n++) {
      if (n in a) {
        var k = a[n];c.call(b, k, n, a) && f.push(k);
      }
    }return f;
  }function p(a) {
    return a.reduce(function (a, d) {
      return a.concat(h.arr(d) ? p(d) : d);
    }, []);
  }function m(a) {
    if (h.arr(a)) return a;
    h.str(a) && (a = e(a) || a);return a instanceof NodeList || a instanceof HTMLCollection ? [].slice.call(a) : [a];
  }function u(a, c) {
    return a.some(function (a) {
      return a === c;
    });
  }function C(a) {
    var c = {},
        d;for (d in a) {
      c[d] = a[d];
    }return c;
  }function D(a, c) {
    var d = C(a),
        b;for (b in a) {
      d[b] = c.hasOwnProperty(b) ? c[b] : a[b];
    }return d;
  }function z(a, c) {
    var d = C(a),
        b;for (b in c) {
      d[b] = h.und(a[b]) ? c[b] : a[b];
    }return d;
  }function T(a) {
    a = a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, function (a, c, d, k) {
      return c + c + d + d + k + k;
    });var c = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
    a = parseInt(c[1], 16);var d = parseInt(c[2], 16),
        c = parseInt(c[3], 16);return "rgba(" + a + "," + d + "," + c + ",1)";
  }function U(a) {
    function c(a, c, b) {
      0 > b && (b += 1);1 < b && --b;return b < 1 / 6 ? a + 6 * (c - a) * b : .5 > b ? c : b < 2 / 3 ? a + (c - a) * (2 / 3 - b) * 6 : a;
    }var d = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a) || /hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(a);a = parseInt(d[1]) / 360;var b = parseInt(d[2]) / 100,
        f = parseInt(d[3]) / 100,
        d = d[4] || 1;if (0 == b) f = b = a = f;else {
      var n = .5 > f ? f * (1 + b) : f + b - f * b,
          k = 2 * f - n,
          f = c(k, n, a + 1 / 3),
          b = c(k, n, a);a = c(k, n, a - 1 / 3);
    }return "rgba(" + 255 * f + "," + 255 * b + "," + 255 * a + "," + d + ")";
  }function y(a) {
    if (a = /([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(a)) return a[2];
  }function V(a) {
    if (-1 < a.indexOf("translate") || "perspective" === a) return "px";if (-1 < a.indexOf("rotate") || -1 < a.indexOf("skew")) return "deg";
  }function I(a, c) {
    return h.fnc(a) ? a(c.target, c.id, c.total) : a;
  }function E(a, c) {
    if (c in a.style) return getComputedStyle(a).getPropertyValue(c.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase()) || "0";
  }function J(a, c) {
    if (h.dom(a) && u(W, c)) return "transform";if (h.dom(a) && (a.getAttribute(c) || h.svg(a) && a[c])) return "attribute";if (h.dom(a) && "transform" !== c && E(a, c)) return "css";if (null != a[c]) return "object";
  }function X(a, c) {
    var d = V(c),
        d = -1 < c.indexOf("scale") ? 1 : 0 + d;a = a.style.transform;if (!a) return d;for (var b = [], f = [], n = [], k = /(\w+)\((.+?)\)/g; b = k.exec(a);) {
      f.push(b[1]), n.push(b[2]);
    }a = r(n, function (a, b) {
      return f[b] === c;
    });return a.length ? a[0] : d;
  }function K(a, c) {
    switch (J(a, c)) {case "transform":
        return X(a, c);case "css":
        return E(a, c);case "attribute":
        return a.getAttribute(c);}return a[c] || 0;
  }function L(a, c) {
    var d = /^(\*=|\+=|-=)/.exec(a);if (!d) return a;var b = y(a) || 0;c = parseFloat(c);a = parseFloat(a.replace(d[0], ""));switch (d[0][0]) {case "+":
        return c + a + b;case "-":
        return c - a + b;case "*":
        return c * a + b;}
  }function F(a, c) {
    return Math.sqrt(Math.pow(c.x - a.x, 2) + Math.pow(c.y - a.y, 2));
  }function M(a) {
    a = a.points;for (var c = 0, d, b = 0; b < a.numberOfItems; b++) {
      var f = a.getItem(b);0 < b && (c += F(d, f));d = f;
    }return c;
  }function N(a) {
    if (a.getTotalLength) return a.getTotalLength();switch (a.tagName.toLowerCase()) {case "circle":
        return 2 * Math.PI * a.getAttribute("r");case "rect":
        return 2 * a.getAttribute("width") + 2 * a.getAttribute("height");case "line":
        return F({ x: a.getAttribute("x1"), y: a.getAttribute("y1") }, { x: a.getAttribute("x2"), y: a.getAttribute("y2") });case "polyline":
        return M(a);case "polygon":
        var c = a.points;return M(a) + F(c.getItem(c.numberOfItems - 1), c.getItem(0));}
  }function Y(a, c) {
    function d(b) {
      b = void 0 === b ? 0 : b;return a.el.getPointAtLength(1 <= c + b ? c + b : 0);
    }var b = d(),
        f = d(-1),
        n = d(1);switch (a.property) {case "x":
        return b.x;case "y":
        return b.y;
      case "angle":
        return 180 * Math.atan2(n.y - f.y, n.x - f.x) / Math.PI;}
  }function O(a, c) {
    var d = /-?\d*\.?\d+/g,
        b;b = h.pth(a) ? a.totalLength : a;if (h.col(b)) {
      if (h.rgb(b)) {
        var f = /rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(b);b = f ? "rgba(" + f[1] + ",1)" : b;
      } else b = h.hex(b) ? T(b) : h.hsl(b) ? U(b) : void 0;
    } else f = (f = y(b)) ? b.substr(0, b.length - f.length) : b, b = c && !/\s/g.test(b) ? f + c : f;b += "";return { original: b, numbers: b.match(d) ? b.match(d).map(Number) : [0], strings: h.str(a) || c ? b.split(d) : [] };
  }function P(a) {
    a = a ? p(h.arr(a) ? a.map(m) : m(a)) : [];return r(a, function (a, d, b) {
      return b.indexOf(a) === d;
    });
  }function Z(a) {
    var c = P(a);return c.map(function (a, b) {
      return { target: a, id: b, total: c.length };
    });
  }function aa(a, c) {
    var d = C(c);if (h.arr(a)) {
      var b = a.length;2 !== b || h.obj(a[0]) ? h.fnc(c.duration) || (d.duration = c.duration / b) : a = { value: a };
    }return m(a).map(function (a, b) {
      b = b ? 0 : c.delay;a = h.obj(a) && !h.pth(a) ? a : { value: a };h.und(a.delay) && (a.delay = b);return a;
    }).map(function (a) {
      return z(a, d);
    });
  }function ba(a, c) {
    var d = {},
        b;for (b in a) {
      var f = I(a[b], c);h.arr(f) && (f = f.map(function (a) {
        return I(a, c);
      }), 1 === f.length && (f = f[0]));d[b] = f;
    }d.duration = parseFloat(d.duration);d.delay = parseFloat(d.delay);return d;
  }function ca(a) {
    return h.arr(a) ? A.apply(this, a) : Q[a];
  }function da(a, c) {
    var d;return a.tweens.map(function (b) {
      b = ba(b, c);var f = b.value,
          e = K(c.target, a.name),
          k = d ? d.to.original : e,
          k = h.arr(f) ? f[0] : k,
          w = L(h.arr(f) ? f[1] : f, k),
          e = y(w) || y(k) || y(e);b.from = O(k, e);b.to = O(w, e);b.start = d ? d.end : a.offset;b.end = b.start + b.delay + b.duration;b.easing = ca(b.easing);b.elasticity = (1E3 - Math.min(Math.max(b.elasticity, 1), 999)) / 1E3;b.isPath = h.pth(f);b.isColor = h.col(b.from.original);b.isColor && (b.round = 1);return d = b;
    });
  }function ea(a, c) {
    return r(p(a.map(function (a) {
      return c.map(function (b) {
        var c = J(a.target, b.name);if (c) {
          var d = da(b, a);b = { type: c, property: b.name, animatable: a, tweens: d, duration: d[d.length - 1].end, delay: d[0].delay };
        } else b = void 0;return b;
      });
    })), function (a) {
      return !h.und(a);
    });
  }function R(a, c, d, b) {
    var f = "delay" === a;return c.length ? (f ? Math.min : Math.max).apply(Math, c.map(function (b) {
      return b[a];
    })) : f ? b.delay : d.offset + b.delay + b.duration;
  }function fa(a) {
    var c = D(ga, a),
        d = D(S, a),
        b = Z(a.targets),
        f = [],
        e = z(c, d),
        k;for (k in a) {
      e.hasOwnProperty(k) || "targets" === k || f.push({ name: k, offset: e.offset, tweens: aa(a[k], d) });
    }a = ea(b, f);return z(c, { children: [], animatables: b, animations: a, duration: R("duration", a, c, d), delay: R("delay", a, c, d) });
  }function q(a) {
    function c() {
      return window.Promise && new Promise(function (a) {
        return p = a;
      });
    }function d(a) {
      return g.reversed ? g.duration - a : a;
    }function b(a) {
      for (var b = 0, c = {}, d = g.animations, f = d.length; b < f;) {
        var e = d[b],
            k = e.animatable,
            h = e.tweens,
            n = h.length - 1,
            l = h[n];n && (l = r(h, function (b) {
          return a < b.end;
        })[0] || l);for (var h = Math.min(Math.max(a - l.start - l.delay, 0), l.duration) / l.duration, w = isNaN(h) ? 1 : l.easing(h, l.elasticity), h = l.to.strings, p = l.round, n = [], m = void 0, m = l.to.numbers.length, t = 0; t < m; t++) {
          var x = void 0,
              x = l.to.numbers[t],
              q = l.from.numbers[t],
              x = l.isPath ? Y(l.value, w * x) : q + w * (x - q);p && (l.isColor && 2 < t || (x = Math.round(x * p) / p));n.push(x);
        }if (l = h.length) for (m = h[0], w = 0; w < l; w++) {
          p = h[w + 1], t = n[w], isNaN(t) || (m = p ? m + (t + p) : m + (t + " "));
        } else m = n[0];ha[e.type](k.target, e.property, m, c, k.id);e.currentValue = m;b++;
      }if (b = Object.keys(c).length) for (d = 0; d < b; d++) {
        H || (H = E(document.body, "transform") ? "transform" : "-webkit-transform"), g.animatables[d].target.style[H] = c[d].join(" ");
      }g.currentTime = a;g.progress = a / g.duration * 100;
    }function f(a) {
      if (g[a]) g[a](g);
    }function e() {
      g.remaining && !0 !== g.remaining && g.remaining--;
    }function k(a) {
      var k = g.duration,
          n = g.offset,
          w = n + g.delay,
          r = g.currentTime,
          x = g.reversed,
          q = d(a);if (g.children.length) {
        var u = g.children,
            v = u.length;
        if (q >= g.currentTime) for (var G = 0; G < v; G++) {
          u[G].seek(q);
        } else for (; v--;) {
          u[v].seek(q);
        }
      }if (q >= w || !k) g.began || (g.began = !0, f("begin")), f("run");if (q > n && q < k) b(q);else if (q <= n && 0 !== r && (b(0), x && e()), q >= k && r !== k || !k) b(k), x || e();f("update");a >= k && (g.remaining ? (t = h, "alternate" === g.direction && (g.reversed = !g.reversed)) : (g.pause(), g.completed || (g.completed = !0, f("complete"), "Promise" in window && (p(), m = c()))), l = 0);
    }a = void 0 === a ? {} : a;var h,
        t,
        l = 0,
        p = null,
        m = c(),
        g = fa(a);g.reset = function () {
      var a = g.direction,
          c = g.loop;g.currentTime = 0;g.progress = 0;g.paused = !0;g.began = !1;g.completed = !1;g.reversed = "reverse" === a;g.remaining = "alternate" === a && 1 === c ? 2 : c;b(0);for (a = g.children.length; a--;) {
        g.children[a].reset();
      }
    };g.tick = function (a) {
      h = a;t || (t = h);k((l + h - t) * q.speed);
    };g.seek = function (a) {
      k(d(a));
    };g.pause = function () {
      var a = v.indexOf(g);-1 < a && v.splice(a, 1);g.paused = !0;
    };g.play = function () {
      g.paused && (g.paused = !1, t = 0, l = d(g.currentTime), v.push(g), B || ia());
    };g.reverse = function () {
      g.reversed = !g.reversed;t = 0;l = d(g.currentTime);
    };g.restart = function () {
      g.pause();
      g.reset();g.play();
    };g.finished = m;g.reset();g.autoplay && g.play();return g;
  }var ga = { update: void 0, begin: void 0, run: void 0, complete: void 0, loop: 1, direction: "normal", autoplay: !0, offset: 0 },
      S = { duration: 1E3, delay: 0, easing: "easeOutElastic", elasticity: 500, round: 0 },
      W = "translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),
      H,
      h = { arr: function (a) {
      return Array.isArray(a);
    }, obj: function (a) {
      return -1 < Object.prototype.toString.call(a).indexOf("Object");
    },
    pth: function (a) {
      return h.obj(a) && a.hasOwnProperty("totalLength");
    }, svg: function (a) {
      return a instanceof SVGElement;
    }, dom: function (a) {
      return a.nodeType || h.svg(a);
    }, str: function (a) {
      return "string" === typeof a;
    }, fnc: function (a) {
      return "function" === typeof a;
    }, und: function (a) {
      return "undefined" === typeof a;
    }, hex: function (a) {
      return (/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)
      );
    }, rgb: function (a) {
      return (/^rgb/.test(a)
      );
    }, hsl: function (a) {
      return (/^hsl/.test(a)
      );
    }, col: function (a) {
      return h.hex(a) || h.rgb(a) || h.hsl(a);
    } },
      A = function () {
    function a(a, d, b) {
      return (((1 - 3 * b + 3 * d) * a + (3 * b - 6 * d)) * a + 3 * d) * a;
    }return function (c, d, b, f) {
      if (0 <= c && 1 >= c && 0 <= b && 1 >= b) {
        var e = new Float32Array(11);if (c !== d || b !== f) for (var k = 0; 11 > k; ++k) {
          e[k] = a(.1 * k, c, b);
        }return function (k) {
          if (c === d && b === f) return k;if (0 === k) return 0;if (1 === k) return 1;for (var h = 0, l = 1; 10 !== l && e[l] <= k; ++l) {
            h += .1;
          }--l;var l = h + (k - e[l]) / (e[l + 1] - e[l]) * .1,
              n = 3 * (1 - 3 * b + 3 * c) * l * l + 2 * (3 * b - 6 * c) * l + 3 * c;if (.001 <= n) {
            for (h = 0; 4 > h; ++h) {
              n = 3 * (1 - 3 * b + 3 * c) * l * l + 2 * (3 * b - 6 * c) * l + 3 * c;if (0 === n) break;var m = a(l, c, b) - k,
                  l = l - m / n;
            }k = l;
          } else if (0 === n) k = l;else {
            var l = h,
                h = h + .1,
                g = 0;do {
              m = l + (h - l) / 2, n = a(m, c, b) - k, 0 < n ? h = m : l = m;
            } while (1e-7 < Math.abs(n) && 10 > ++g);k = m;
          }return a(k, d, f);
        };
      }
    };
  }(),
      Q = function () {
    function a(a, b) {
      return 0 === a || 1 === a ? a : -Math.pow(2, 10 * (a - 1)) * Math.sin(2 * (a - 1 - b / (2 * Math.PI) * Math.asin(1)) * Math.PI / b);
    }var c = "Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),
        d = { In: [[.55, .085, .68, .53], [.55, .055, .675, .19], [.895, .03, .685, .22], [.755, .05, .855, .06], [.47, 0, .745, .715], [.95, .05, .795, .035], [.6, .04, .98, .335], [.6, -.28, .735, .045], a], Out: [[.25, .46, .45, .94], [.215, .61, .355, 1], [.165, .84, .44, 1], [.23, 1, .32, 1], [.39, .575, .565, 1], [.19, 1, .22, 1], [.075, .82, .165, 1], [.175, .885, .32, 1.275], function (b, c) {
        return 1 - a(1 - b, c);
      }], InOut: [[.455, .03, .515, .955], [.645, .045, .355, 1], [.77, 0, .175, 1], [.86, 0, .07, 1], [.445, .05, .55, .95], [1, 0, 0, 1], [.785, .135, .15, .86], [.68, -.55, .265, 1.55], function (b, c) {
        return .5 > b ? a(2 * b, c) / 2 : 1 - a(-2 * b + 2, c) / 2;
      }] },
        b = { linear: A(.25, .25, .75, .75) },
        f = {},
        e;for (e in d) {
      f.type = e, d[f.type].forEach(function (a) {
        return function (d, f) {
          b["ease" + a.type + c[f]] = h.fnc(d) ? d : A.apply($jscomp$this, d);
        };
      }(f)), f = { type: f.type };
    }return b;
  }(),
      ha = { css: function (a, c, d) {
      return a.style[c] = d;
    }, attribute: function (a, c, d) {
      return a.setAttribute(c, d);
    }, object: function (a, c, d) {
      return a[c] = d;
    }, transform: function (a, c, d, b, f) {
      b[f] || (b[f] = []);b[f].push(c + "(" + d + ")");
    } },
      v = [],
      B = 0,
      ia = function () {
    function a() {
      B = requestAnimationFrame(c);
    }function c(c) {
      var b = v.length;if (b) {
        for (var d = 0; d < b;) {
          v[d] && v[d].tick(c), d++;
        }a();
      } else cancelAnimationFrame(B), B = 0;
    }return a;
  }();q.version = "2.2.0";q.speed = 1;q.running = v;q.remove = function (a) {
    a = P(a);for (var c = v.length; c--;) {
      for (var d = v[c], b = d.animations, f = b.length; f--;) {
        u(a, b[f].animatable.target) && (b.splice(f, 1), b.length || d.pause());
      }
    }
  };q.getValue = K;q.path = function (a, c) {
    var d = h.str(a) ? e(a)[0] : a,
        b = c || 100;return function (a) {
      return { el: d, property: a, totalLength: N(d) * (b / 100) };
    };
  };q.setDashoffset = function (a) {
    var c = N(a);a.setAttribute("stroke-dasharray", c);return c;
  };q.bezier = A;q.easings = Q;q.timeline = function (a) {
    var c = q(a);c.pause();c.duration = 0;c.add = function (d) {
      c.children.forEach(function (a) {
        a.began = !0;a.completed = !0;
      });m(d).forEach(function (b) {
        var d = z(b, D(S, a || {}));d.targets = d.targets || a.targets;b = c.duration;var e = d.offset;d.autoplay = !1;d.direction = c.direction;d.offset = h.und(e) ? b : L(e, b);c.began = !0;c.completed = !0;c.seek(d.offset);d = q(d);d.began = !0;d.completed = !0;d.duration > b && (c.duration = d.duration);c.children.push(d);
      });c.seek(0);c.reset();c.autoplay && c.restart();return c;
    };return c;
  };q.random = function (a, c) {
    return Math.floor(Math.random() * (c - a + 1)) + a;
  };return q;
});
;(function ($, anim) {
  'use strict';

  var _defaults = {
    accordion: true,
    onOpenStart: undefined,
    onOpenEnd: undefined,
    onCloseStart: undefined,
    onCloseEnd: undefined,
    inDuration: 300,
    outDuration: 300
  };

  /**
   * @class
   *
   */

  var Collapsible = function (_Component) {
    _inherits(Collapsible, _Component);

    /**
     * Construct Collapsible instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Collapsible(el, options) {
      _classCallCheck(this, Collapsible);

      var _this3 = _possibleConstructorReturn(this, (Collapsible.__proto__ || Object.getPrototypeOf(Collapsible)).call(this, Collapsible, el, options));

      _this3.el.M_Collapsible = _this3;

      /**
       * Options for the collapsible
       * @member Collapsible#options
       * @prop {Boolean} [accordion=false] - Type of the collapsible
       * @prop {Function} onOpenStart - Callback function called before collapsible is opened
       * @prop {Function} onOpenEnd - Callback function called after collapsible is opened
       * @prop {Function} onCloseStart - Callback function called before collapsible is closed
       * @prop {Function} onCloseEnd - Callback function called after collapsible is closed
       * @prop {Number} inDuration - Transition in duration in milliseconds.
       * @prop {Number} outDuration - Transition duration in milliseconds.
       */
      _this3.options = $.extend({}, Collapsible.defaults, options);

      // Setup tab indices
      _this3.$headers = _this3.$el.children('li').children('.collapsible-header');
      _this3.$headers.attr('tabindex', 0);

      _this3._setupEventHandlers();

      // Open first active
      var $activeBodies = _this3.$el.children('li.active').children('.collapsible-body');
      if (_this3.options.accordion) {
        // Handle Accordion
        $activeBodies.first().css('display', 'block');
      } else {
        // Handle Expandables
        $activeBodies.css('display', 'block');
      }
      return _this3;
    }

    _createClass(Collapsible, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_Collapsible = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this4 = this;

        this._handleCollapsibleClickBound = this._handleCollapsibleClick.bind(this);
        this._handleCollapsibleKeydownBound = this._handleCollapsibleKeydown.bind(this);
        this.el.addEventListener('click', this._handleCollapsibleClickBound);
        this.$headers.each(function (header) {
          header.addEventListener('keydown', _this4._handleCollapsibleKeydownBound);
        });
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this5 = this;

        this.el.removeEventListener('click', this._handleCollapsibleClickBound);
        this.$headers.each(function (header) {
          header.removeEventListener('keydown', _this5._handleCollapsibleKeydownBound);
        });
      }

      /**
       * Handle Collapsible Click
       * @param {Event} e
       */

    }, {
      key: "_handleCollapsibleClick",
      value: function _handleCollapsibleClick(e) {
        var $header = $(e.target).closest('.collapsible-header');
        if (e.target && $header.length) {
          var $collapsible = $header.closest('.collapsible');
          if ($collapsible[0] === this.el) {
            var $collapsibleLi = $header.closest('li');
            var $collapsibleLis = $collapsible.children('li');
            var isActive = $collapsibleLi[0].classList.contains('active');
            var index = $collapsibleLis.index($collapsibleLi);

            if (isActive) {
              this.close(index);
            } else {
              this.open(index);
            }
          }
        }
      }

      /**
       * Handle Collapsible Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleCollapsibleKeydown",
      value: function _handleCollapsibleKeydown(e) {
        if (e.keyCode === 13) {
          this._handleCollapsibleClickBound(e);
        }
      }

      /**
       * Animate in collapsible slide
       * @param {Number} index - 0th index of slide
       */

    }, {
      key: "_animateIn",
      value: function _animateIn(index) {
        var _this6 = this;

        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length) {
          var $body = $collapsibleLi.children('.collapsible-body');

          anim.remove($body[0]);
          $body.css({
            display: 'block',
            overflow: 'hidden',
            height: 0,
            paddingTop: '',
            paddingBottom: ''
          });

          var pTop = $body.css('padding-top');
          var pBottom = $body.css('padding-bottom');
          var finalHeight = $body[0].scrollHeight;
          $body.css({
            paddingTop: 0,
            paddingBottom: 0
          });

          anim({
            targets: $body[0],
            height: finalHeight,
            paddingTop: pTop,
            paddingBottom: pBottom,
            duration: this.options.inDuration,
            easing: 'easeInOutCubic',
            complete: function (anim) {
              $body.css({
                overflow: '',
                paddingTop: '',
                paddingBottom: '',
                height: ''
              });

              // onOpenEnd callback
              if (typeof _this6.options.onOpenEnd === 'function') {
                _this6.options.onOpenEnd.call(_this6, $collapsibleLi[0]);
              }
            }
          });
        }
      }

      /**
       * Animate out collapsible slide
       * @param {Number} index - 0th index of slide to open
       */

    }, {
      key: "_animateOut",
      value: function _animateOut(index) {
        var _this7 = this;

        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length) {
          var $body = $collapsibleLi.children('.collapsible-body');
          anim.remove($body[0]);
          $body.css('overflow', 'hidden');
          anim({
            targets: $body[0],
            height: 0,
            paddingTop: 0,
            paddingBottom: 0,
            duration: this.options.outDuration,
            easing: 'easeInOutCubic',
            complete: function () {
              $body.css({
                height: '',
                overflow: '',
                padding: '',
                display: ''
              });

              // onCloseEnd callback
              if (typeof _this7.options.onCloseEnd === 'function') {
                _this7.options.onCloseEnd.call(_this7, $collapsibleLi[0]);
              }
            }
          });
        }
      }

      /**
       * Open Collapsible
       * @param {Number} index - 0th index of slide
       */

    }, {
      key: "open",
      value: function open(index) {
        var _this8 = this;

        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length && !$collapsibleLi[0].classList.contains('active')) {
          // onOpenStart callback
          if (typeof this.options.onOpenStart === 'function') {
            this.options.onOpenStart.call(this, $collapsibleLi[0]);
          }

          // Handle accordion behavior
          if (this.options.accordion) {
            var $collapsibleLis = this.$el.children('li');
            var $activeLis = this.$el.children('li.active');
            $activeLis.each(function (el) {
              var index = $collapsibleLis.index($(el));
              _this8.close(index);
            });
          }

          // Animate in
          $collapsibleLi[0].classList.add('active');
          this._animateIn(index);
        }
      }

      /**
       * Close Collapsible
       * @param {Number} index - 0th index of slide
       */

    }, {
      key: "close",
      value: function close(index) {
        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length && $collapsibleLi[0].classList.contains('active')) {
          // onCloseStart callback
          if (typeof this.options.onCloseStart === 'function') {
            this.options.onCloseStart.call(this, $collapsibleLi[0]);
          }

          // Animate out
          $collapsibleLi[0].classList.remove('active');
          this._animateOut(index);
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Collapsible.__proto__ || Object.getPrototypeOf(Collapsible), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Collapsible;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Collapsible;
  }(Component);

  M.Collapsible = Collapsible;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Collapsible, 'collapsible', 'M_Collapsible');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    alignment: 'left',
    autoFocus: true,
    constrainWidth: true,
    container: null,
    coverTrigger: true,
    closeOnClick: true,
    hover: false,
    inDuration: 150,
    outDuration: 250,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    onItemClick: null
  };

  /**
   * @class
   */

  var Dropdown = function (_Component2) {
    _inherits(Dropdown, _Component2);

    function Dropdown(el, options) {
      _classCallCheck(this, Dropdown);

      var _this9 = _possibleConstructorReturn(this, (Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call(this, Dropdown, el, options));

      _this9.el.M_Dropdown = _this9;
      Dropdown._dropdowns.push(_this9);

      _this9.id = M.getIdFromTrigger(el);
      _this9.dropdownEl = document.getElementById(_this9.id);
      _this9.$dropdownEl = $(_this9.dropdownEl);

      /**
       * Options for the dropdown
       * @member Dropdown#options
       * @prop {String} [alignment='left'] - Edge which the dropdown is aligned to
       * @prop {Boolean} [autoFocus=true] - Automatically focus dropdown el for keyboard
       * @prop {Boolean} [constrainWidth=true] - Constrain width to width of the button
       * @prop {Element} container - Container element to attach dropdown to (optional)
       * @prop {Boolean} [coverTrigger=true] - Place dropdown over trigger
       * @prop {Boolean} [closeOnClick=true] - Close on click of dropdown item
       * @prop {Boolean} [hover=false] - Open dropdown on hover
       * @prop {Number} [inDuration=150] - Duration of open animation in ms
       * @prop {Number} [outDuration=250] - Duration of close animation in ms
       * @prop {Function} onOpenStart - Function called when dropdown starts opening
       * @prop {Function} onOpenEnd - Function called when dropdown finishes opening
       * @prop {Function} onCloseStart - Function called when dropdown starts closing
       * @prop {Function} onCloseEnd - Function called when dropdown finishes closing
       */
      _this9.options = $.extend({}, Dropdown.defaults, options);

      /**
       * Describes open/close state of dropdown
       * @type {Boolean}
       */
      _this9.isOpen = false;

      /**
       * Describes if dropdown content is scrollable
       * @type {Boolean}
       */
      _this9.isScrollable = false;

      /**
       * Describes if touch moving on dropdown content
       * @type {Boolean}
       */
      _this9.isTouchMoving = false;

      _this9.focusedIndex = -1;
      _this9.filterQuery = [];

      // Move dropdown-content after dropdown-trigger
      if (!!_this9.options.container) {
        $(_this9.options.container).append(_this9.dropdownEl);
      } else {
        _this9.$el.after(_this9.dropdownEl);
      }

      _this9._makeDropdownFocusable();
      _this9._resetFilterQueryBound = _this9._resetFilterQuery.bind(_this9);
      _this9._handleDocumentClickBound = _this9._handleDocumentClick.bind(_this9);
      _this9._handleDocumentTouchmoveBound = _this9._handleDocumentTouchmove.bind(_this9);
      _this9._handleDropdownClickBound = _this9._handleDropdownClick.bind(_this9);
      _this9._handleDropdownKeydownBound = _this9._handleDropdownKeydown.bind(_this9);
      _this9._handleTriggerKeydownBound = _this9._handleTriggerKeydown.bind(_this9);
      _this9._setupEventHandlers();
      return _this9;
    }

    _createClass(Dropdown, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._resetDropdownStyles();
        this._removeEventHandlers();
        Dropdown._dropdowns.splice(Dropdown._dropdowns.indexOf(this), 1);
        this.el.M_Dropdown = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        // Trigger keydown handler
        this.el.addEventListener('keydown', this._handleTriggerKeydownBound);

        // Item click handler
        this.dropdownEl.addEventListener('click', this._handleDropdownClickBound);

        // Hover event handlers
        if (this.options.hover) {
          this._handleMouseEnterBound = this._handleMouseEnter.bind(this);
          this.el.addEventListener('mouseenter', this._handleMouseEnterBound);
          this._handleMouseLeaveBound = this._handleMouseLeave.bind(this);
          this.el.addEventListener('mouseleave', this._handleMouseLeaveBound);
          this.dropdownEl.addEventListener('mouseleave', this._handleMouseLeaveBound);

          // Click event handlers
        } else {
          this._handleClickBound = this._handleClick.bind(this);
          this.el.addEventListener('click', this._handleClickBound);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('keydown', this._handleTriggerKeydownBound);
        this.dropdownEl.removeEventListener('click', this._handleDropdownClickBound);

        if (this.options.hover) {
          this.el.removeEventListener('mouseenter', this._handleMouseEnterBound);
          this.el.removeEventListener('mouseleave', this._handleMouseLeaveBound);
          this.dropdownEl.removeEventListener('mouseleave', this._handleMouseLeaveBound);
        } else {
          this.el.removeEventListener('click', this._handleClickBound);
        }
      }
    }, {
      key: "_setupTemporaryEventHandlers",
      value: function _setupTemporaryEventHandlers() {
        // Use capture phase event handler to prevent click
        document.body.addEventListener('click', this._handleDocumentClickBound, true);
        document.body.addEventListener('touchend', this._handleDocumentClickBound);
        document.body.addEventListener('touchmove', this._handleDocumentTouchmoveBound);
        this.dropdownEl.addEventListener('keydown', this._handleDropdownKeydownBound);
      }
    }, {
      key: "_removeTemporaryEventHandlers",
      value: function _removeTemporaryEventHandlers() {
        // Use capture phase event handler to prevent click
        document.body.removeEventListener('click', this._handleDocumentClickBound, true);
        document.body.removeEventListener('touchend', this._handleDocumentClickBound);
        document.body.removeEventListener('touchmove', this._handleDocumentTouchmoveBound);
        this.dropdownEl.removeEventListener('keydown', this._handleDropdownKeydownBound);
      }
    }, {
      key: "_handleClick",
      value: function _handleClick(e) {
        e.preventDefault();
        this.open();
      }
    }, {
      key: "_handleMouseEnter",
      value: function _handleMouseEnter() {
        this.open();
      }
    }, {
      key: "_handleMouseLeave",
      value: function _handleMouseLeave(e) {
        var toEl = e.toElement || e.relatedTarget;
        var leaveToDropdownContent = !!$(toEl).closest('.dropdown-content').length;
        var leaveToActiveDropdownTrigger = false;

        var $closestTrigger = $(toEl).closest('.dropdown-trigger');
        if ($closestTrigger.length && !!$closestTrigger[0].M_Dropdown && $closestTrigger[0].M_Dropdown.isOpen) {
          leaveToActiveDropdownTrigger = true;
        }

        // Close hover dropdown if mouse did not leave to either active dropdown-trigger or dropdown-content
        if (!leaveToActiveDropdownTrigger && !leaveToDropdownContent) {
          this.close();
        }
      }
    }, {
      key: "_handleDocumentClick",
      value: function _handleDocumentClick(e) {
        var _this10 = this;

        var $target = $(e.target);
        if (this.options.closeOnClick && $target.closest('.dropdown-content').length && !this.isTouchMoving) {
          // isTouchMoving to check if scrolling on mobile.
          setTimeout(function () {
            _this10.close();
          }, 0);
        } else if ($target.closest('.dropdown-trigger').length || !$target.closest('.dropdown-content').length) {
          setTimeout(function () {
            _this10.close();
          }, 0);
        }
        this.isTouchMoving = false;
      }
    }, {
      key: "_handleTriggerKeydown",
      value: function _handleTriggerKeydown(e) {
        // ARROW DOWN OR ENTER WHEN SELECT IS CLOSED - open Dropdown
        if ((e.which === M.keys.ARROW_DOWN || e.which === M.keys.ENTER) && !this.isOpen) {
          e.preventDefault();
          this.open();
        }
      }

      /**
       * Handle Document Touchmove
       * @param {Event} e
       */

    }, {
      key: "_handleDocumentTouchmove",
      value: function _handleDocumentTouchmove(e) {
        var $target = $(e.target);
        if ($target.closest('.dropdown-content').length) {
          this.isTouchMoving = true;
        }
      }

      /**
       * Handle Dropdown Click
       * @param {Event} e
       */

    }, {
      key: "_handleDropdownClick",
      value: function _handleDropdownClick(e) {
        // onItemClick callback
        if (typeof this.options.onItemClick === 'function') {
          var itemEl = $(e.target).closest('li')[0];
          this.options.onItemClick.call(this, itemEl);
        }
      }

      /**
       * Handle Dropdown Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleDropdownKeydown",
      value: function _handleDropdownKeydown(e) {
        if (e.which === M.keys.TAB) {
          e.preventDefault();
          this.close();

          // Navigate down dropdown list
        } else if ((e.which === M.keys.ARROW_DOWN || e.which === M.keys.ARROW_UP) && this.isOpen) {
          e.preventDefault();
          var direction = e.which === M.keys.ARROW_DOWN ? 1 : -1;
          var newFocusedIndex = this.focusedIndex;
          var foundNewIndex = false;
          do {
            newFocusedIndex = newFocusedIndex + direction;

            if (!!this.dropdownEl.children[newFocusedIndex] && this.dropdownEl.children[newFocusedIndex].tabIndex !== -1) {
              foundNewIndex = true;
              break;
            }
          } while (newFocusedIndex < this.dropdownEl.children.length && newFocusedIndex >= 0);

          if (foundNewIndex) {
            this.focusedIndex = newFocusedIndex;
            this._focusFocusedItem();
          }

          // ENTER selects choice on focused item
        } else if (e.which === M.keys.ENTER && this.isOpen) {
          // Search for <a> and <button>
          var focusedElement = this.dropdownEl.children[this.focusedIndex];
          var $activatableElement = $(focusedElement).find('a, button').first();

          // Click a or button tag if exists, otherwise click li tag
          if (!!$activatableElement.length) {
            $activatableElement[0].click();
          } else if (!!focusedElement) {
            focusedElement.click();
          }

          // Close dropdown on ESC
        } else if (e.which === M.keys.ESC && this.isOpen) {
          e.preventDefault();
          this.close();
        }

        // CASE WHEN USER TYPE LETTERS
        var letter = String.fromCharCode(e.which).toLowerCase(),
            nonLetters = [9, 13, 27, 38, 40];
        if (letter && nonLetters.indexOf(e.which) === -1) {
          this.filterQuery.push(letter);

          var string = this.filterQuery.join(''),
              newOptionEl = $(this.dropdownEl).find('li').filter(function (el) {
            return $(el).text().toLowerCase().indexOf(string) === 0;
          })[0];

          if (newOptionEl) {
            this.focusedIndex = $(newOptionEl).index();
            this._focusFocusedItem();
          }
        }

        this.filterTimeout = setTimeout(this._resetFilterQueryBound, 1000);
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_resetFilterQuery",
      value: function _resetFilterQuery() {
        this.filterQuery = [];
      }
    }, {
      key: "_resetDropdownStyles",
      value: function _resetDropdownStyles() {
        this.$dropdownEl.css({
          display: '',
          width: '',
          height: '',
          left: '',
          top: '',
          'transform-origin': '',
          transform: '',
          opacity: ''
        });
      }
    }, {
      key: "_makeDropdownFocusable",
      value: function _makeDropdownFocusable() {
        // Needed for arrow key navigation
        this.dropdownEl.tabIndex = 0;

        // Only set tabindex if it hasn't been set by user
        $(this.dropdownEl).children().each(function (el) {
          if (!el.getAttribute('tabindex')) {
            el.setAttribute('tabindex', 0);
          }
        });
      }
    }, {
      key: "_focusFocusedItem",
      value: function _focusFocusedItem() {
        if (this.focusedIndex >= 0 && this.focusedIndex < this.dropdownEl.children.length && this.options.autoFocus) {
          this.dropdownEl.children[this.focusedIndex].focus();
        }
      }
    }, {
      key: "_getDropdownPosition",
      value: function _getDropdownPosition() {
        var offsetParentBRect = this.el.offsetParent.getBoundingClientRect();
        var triggerBRect = this.el.getBoundingClientRect();
        var dropdownBRect = this.dropdownEl.getBoundingClientRect();

        var idealHeight = dropdownBRect.height;
        var idealWidth = dropdownBRect.width;
        var idealXPos = triggerBRect.left - dropdownBRect.left;
        var idealYPos = triggerBRect.top - dropdownBRect.top;

        var dropdownBounds = {
          left: idealXPos,
          top: idealYPos,
          height: idealHeight,
          width: idealWidth
        };

        // Countainer here will be closest ancestor with overflow: hidden
        var closestOverflowParent = !!this.dropdownEl.offsetParent ? this.dropdownEl.offsetParent : this.dropdownEl.parentNode;

        var alignments = M.checkPossibleAlignments(this.el, closestOverflowParent, dropdownBounds, this.options.coverTrigger ? 0 : triggerBRect.height);

        var verticalAlignment = 'top';
        var horizontalAlignment = this.options.alignment;
        idealYPos += this.options.coverTrigger ? 0 : triggerBRect.height;

        // Reset isScrollable
        this.isScrollable = false;

        if (!alignments.top) {
          if (alignments.bottom) {
            verticalAlignment = 'bottom';
          } else {
            this.isScrollable = true;

            // Determine which side has most space and cutoff at correct height
            if (alignments.spaceOnTop > alignments.spaceOnBottom) {
              verticalAlignment = 'bottom';
              idealHeight += alignments.spaceOnTop;
              idealYPos -= alignments.spaceOnTop;
            } else {
              idealHeight += alignments.spaceOnBottom;
            }
          }
        }

        // If preferred horizontal alignment is possible
        if (!alignments[horizontalAlignment]) {
          var oppositeAlignment = horizontalAlignment === 'left' ? 'right' : 'left';
          if (alignments[oppositeAlignment]) {
            horizontalAlignment = oppositeAlignment;
          } else {
            // Determine which side has most space and cutoff at correct height
            if (alignments.spaceOnLeft > alignments.spaceOnRight) {
              horizontalAlignment = 'right';
              idealWidth += alignments.spaceOnLeft;
              idealXPos -= alignments.spaceOnLeft;
            } else {
              horizontalAlignment = 'left';
              idealWidth += alignments.spaceOnRight;
            }
          }
        }

        if (verticalAlignment === 'bottom') {
          idealYPos = idealYPos - dropdownBRect.height + (this.options.coverTrigger ? triggerBRect.height : 0);
        }
        if (horizontalAlignment === 'right') {
          idealXPos = idealXPos - dropdownBRect.width + triggerBRect.width;
        }
        return {
          x: idealXPos,
          y: idealYPos,
          verticalAlignment: verticalAlignment,
          horizontalAlignment: horizontalAlignment,
          height: idealHeight,
          width: idealWidth
        };
      }

      /**
       * Animate in dropdown
       */

    }, {
      key: "_animateIn",
      value: function _animateIn() {
        var _this11 = this;

        anim.remove(this.dropdownEl);
        anim({
          targets: this.dropdownEl,
          opacity: {
            value: [0, 1],
            easing: 'easeOutQuad'
          },
          scaleX: [0.3, 1],
          scaleY: [0.3, 1],
          duration: this.options.inDuration,
          easing: 'easeOutQuint',
          complete: function (anim) {
            if (_this11.options.autoFocus) {
              _this11.dropdownEl.focus();
            }

            // onOpenEnd callback
            if (typeof _this11.options.onOpenEnd === 'function') {
              _this11.options.onOpenEnd.call(_this11, _this11.el);
            }
          }
        });
      }

      /**
       * Animate out dropdown
       */

    }, {
      key: "_animateOut",
      value: function _animateOut() {
        var _this12 = this;

        anim.remove(this.dropdownEl);
        anim({
          targets: this.dropdownEl,
          opacity: {
            value: 0,
            easing: 'easeOutQuint'
          },
          scaleX: 0.3,
          scaleY: 0.3,
          duration: this.options.outDuration,
          easing: 'easeOutQuint',
          complete: function (anim) {
            _this12._resetDropdownStyles();

            // onCloseEnd callback
            if (typeof _this12.options.onCloseEnd === 'function') {
              _this12.options.onCloseEnd.call(_this12, _this12.el);
            }
          }
        });
      }

      /**
       * Place dropdown
       */

    }, {
      key: "_placeDropdown",
      value: function _placeDropdown() {
        // Set width before calculating positionInfo
        var idealWidth = this.options.constrainWidth ? this.el.getBoundingClientRect().width : this.dropdownEl.getBoundingClientRect().width;
        this.dropdownEl.style.width = idealWidth + 'px';

        var positionInfo = this._getDropdownPosition();
        this.dropdownEl.style.left = positionInfo.x + 'px';
        this.dropdownEl.style.top = positionInfo.y + 'px';
        this.dropdownEl.style.height = positionInfo.height + 'px';
        this.dropdownEl.style.width = positionInfo.width + 'px';
        this.dropdownEl.style.transformOrigin = (positionInfo.horizontalAlignment === 'left' ? '0' : '100%') + " " + (positionInfo.verticalAlignment === 'top' ? '0' : '100%');
      }

      /**
       * Open Dropdown
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }
        this.isOpen = true;

        // onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el);
        }

        // Reset styles
        this._resetDropdownStyles();
        this.dropdownEl.style.display = 'block';

        this._placeDropdown();
        this._animateIn();
        this._setupTemporaryEventHandlers();
      }

      /**
       * Close Dropdown
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }
        this.isOpen = false;
        this.focusedIndex = -1;

        // onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        this._animateOut();
        this._removeTemporaryEventHandlers();

        if (this.options.autoFocus) {
          this.el.focus();
        }
      }

      /**
       * Recalculate dimensions
       */

    }, {
      key: "recalculateDimensions",
      value: function recalculateDimensions() {
        if (this.isOpen) {
          this.$dropdownEl.css({
            width: '',
            height: '',
            left: '',
            top: '',
            'transform-origin': ''
          });
          this._placeDropdown();
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Dropdown.__proto__ || Object.getPrototypeOf(Dropdown), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Dropdown;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Dropdown;
  }(Component);

  /**
   * @static
   * @memberof Dropdown
   */


  Dropdown._dropdowns = [];

  M.Dropdown = Dropdown;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Dropdown, 'dropdown', 'M_Dropdown');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    opacity: 0.5,
    inDuration: 250,
    outDuration: 250,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    preventScrolling: true,
    dismissible: true,
    startingTop: '4%',
    endingTop: '10%'
  };

  /**
   * @class
   *
   */

  var Modal = function (_Component3) {
    _inherits(Modal, _Component3);

    /**
     * Construct Modal instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Modal(el, options) {
      _classCallCheck(this, Modal);

      var _this13 = _possibleConstructorReturn(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).call(this, Modal, el, options));

      _this13.el.M_Modal = _this13;

      /**
       * Options for the modal
       * @member Modal#options
       * @prop {Number} [opacity=0.5] - Opacity of the modal overlay
       * @prop {Number} [inDuration=250] - Length in ms of enter transition
       * @prop {Number} [outDuration=250] - Length in ms of exit transition
       * @prop {Function} onOpenStart - Callback function called before modal is opened
       * @prop {Function} onOpenEnd - Callback function called after modal is opened
       * @prop {Function} onCloseStart - Callback function called before modal is closed
       * @prop {Function} onCloseEnd - Callback function called after modal is closed
       * @prop {Boolean} [dismissible=true] - Allow modal to be dismissed by keyboard or overlay click
       * @prop {String} [startingTop='4%'] - startingTop
       * @prop {String} [endingTop='10%'] - endingTop
       */
      _this13.options = $.extend({}, Modal.defaults, options);

      /**
       * Describes open/close state of modal
       * @type {Boolean}
       */
      _this13.isOpen = false;

      _this13.id = _this13.$el.attr('id');
      _this13._openingTrigger = undefined;
      _this13.$overlay = $('<div class="modal-overlay"></div>');
      _this13.el.tabIndex = 0;
      _this13._nthModalOpened = 0;

      Modal._count++;
      _this13._setupEventHandlers();
      return _this13;
    }

    _createClass(Modal, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        Modal._count--;
        this._removeEventHandlers();
        this.el.removeAttribute('style');
        this.$overlay.remove();
        this.el.M_Modal = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleOverlayClickBound = this._handleOverlayClick.bind(this);
        this._handleModalCloseClickBound = this._handleModalCloseClick.bind(this);

        if (Modal._count === 1) {
          document.body.addEventListener('click', this._handleTriggerClick);
        }
        this.$overlay[0].addEventListener('click', this._handleOverlayClickBound);
        this.el.addEventListener('click', this._handleModalCloseClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (Modal._count === 0) {
          document.body.removeEventListener('click', this._handleTriggerClick);
        }
        this.$overlay[0].removeEventListener('click', this._handleOverlayClickBound);
        this.el.removeEventListener('click', this._handleModalCloseClickBound);
      }

      /**
       * Handle Trigger Click
       * @param {Event} e
       */

    }, {
      key: "_handleTriggerClick",
      value: function _handleTriggerClick(e) {
        var $trigger = $(e.target).closest('.modal-trigger');
        if ($trigger.length) {
          var modalId = M.getIdFromTrigger($trigger[0]);
          var modalInstance = document.getElementById(modalId).M_Modal;
          if (modalInstance) {
            modalInstance.open($trigger);
          }
          e.preventDefault();
        }
      }

      /**
       * Handle Overlay Click
       */

    }, {
      key: "_handleOverlayClick",
      value: function _handleOverlayClick() {
        if (this.options.dismissible) {
          this.close();
        }
      }

      /**
       * Handle Modal Close Click
       * @param {Event} e
       */

    }, {
      key: "_handleModalCloseClick",
      value: function _handleModalCloseClick(e) {
        var $closeTrigger = $(e.target).closest('.modal-close');
        if ($closeTrigger.length) {
          this.close();
        }
      }

      /**
       * Handle Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleKeydown",
      value: function _handleKeydown(e) {
        // ESC key
        if (e.keyCode === 27 && this.options.dismissible) {
          this.close();
        }
      }

      /**
       * Handle Focus
       * @param {Event} e
       */

    }, {
      key: "_handleFocus",
      value: function _handleFocus(e) {
        // Only trap focus if this modal is the last model opened (prevents loops in nested modals).
        if (!this.el.contains(e.target) && this._nthModalOpened === Modal._modalsOpen) {
          this.el.focus();
        }
      }

      /**
       * Animate in modal
       */

    }, {
      key: "_animateIn",
      value: function _animateIn() {
        var _this14 = this;

        // Set initial styles
        $.extend(this.el.style, {
          display: 'block',
          opacity: 0
        });
        $.extend(this.$overlay[0].style, {
          display: 'block',
          opacity: 0
        });

        // Animate overlay
        anim({
          targets: this.$overlay[0],
          opacity: this.options.opacity,
          duration: this.options.inDuration,
          easing: 'easeOutQuad'
        });

        // Define modal animation options
        var enterAnimOptions = {
          targets: this.el,
          duration: this.options.inDuration,
          easing: 'easeOutCubic',
          // Handle modal onOpenEnd callback
          complete: function () {
            if (typeof _this14.options.onOpenEnd === 'function') {
              _this14.options.onOpenEnd.call(_this14, _this14.el, _this14._openingTrigger);
            }
          }
        };

        // Bottom sheet animation
        if (this.el.classList.contains('bottom-sheet')) {
          $.extend(enterAnimOptions, {
            bottom: 0,
            opacity: 1
          });
          anim(enterAnimOptions);

          // Normal modal animation
        } else {
          $.extend(enterAnimOptions, {
            top: [this.options.startingTop, this.options.endingTop],
            opacity: 1,
            scaleX: [0.8, 1],
            scaleY: [0.8, 1]
          });
          anim(enterAnimOptions);
        }
      }

      /**
       * Animate out modal
       */

    }, {
      key: "_animateOut",
      value: function _animateOut() {
        var _this15 = this;

        // Animate overlay
        anim({
          targets: this.$overlay[0],
          opacity: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuart'
        });

        // Define modal animation options
        var exitAnimOptions = {
          targets: this.el,
          duration: this.options.outDuration,
          easing: 'easeOutCubic',
          // Handle modal ready callback
          complete: function () {
            _this15.el.style.display = 'none';
            _this15.$overlay.remove();

            // Call onCloseEnd callback
            if (typeof _this15.options.onCloseEnd === 'function') {
              _this15.options.onCloseEnd.call(_this15, _this15.el);
            }
          }
        };

        // Bottom sheet animation
        if (this.el.classList.contains('bottom-sheet')) {
          $.extend(exitAnimOptions, {
            bottom: '-100%',
            opacity: 0
          });
          anim(exitAnimOptions);

          // Normal modal animation
        } else {
          $.extend(exitAnimOptions, {
            top: [this.options.endingTop, this.options.startingTop],
            opacity: 0,
            scaleX: 0.8,
            scaleY: 0.8
          });
          anim(exitAnimOptions);
        }
      }

      /**
       * Open Modal
       * @param {cash} [$trigger]
       */

    }, {
      key: "open",
      value: function open($trigger) {
        if (this.isOpen) {
          return;
        }

        this.isOpen = true;
        Modal._modalsOpen++;
        this._nthModalOpened = Modal._modalsOpen;

        // Set Z-Index based on number of currently open modals
        this.$overlay[0].style.zIndex = 1000 + Modal._modalsOpen * 2;
        this.el.style.zIndex = 1000 + Modal._modalsOpen * 2 + 1;

        // Set opening trigger, undefined indicates modal was opened by javascript
        this._openingTrigger = !!$trigger ? $trigger[0] : undefined;

        // onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el, this._openingTrigger);
        }

        if (this.options.preventScrolling) {
          document.body.style.overflow = 'hidden';
        }

        this.el.classList.add('open');
        this.el.insertAdjacentElement('afterend', this.$overlay[0]);

        if (this.options.dismissible) {
          this._handleKeydownBound = this._handleKeydown.bind(this);
          this._handleFocusBound = this._handleFocus.bind(this);
          document.addEventListener('keydown', this._handleKeydownBound);
          document.addEventListener('focus', this._handleFocusBound, true);
        }

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);
        this._animateIn();

        // Focus modal
        this.el.focus();

        return this;
      }

      /**
       * Close Modal
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isOpen = false;
        Modal._modalsOpen--;
        this._nthModalOpened = 0;

        // Call onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        this.el.classList.remove('open');

        // Enable body scrolling only if there are no more modals open.
        if (Modal._modalsOpen === 0) {
          document.body.style.overflow = '';
        }

        if (this.options.dismissible) {
          document.removeEventListener('keydown', this._handleKeydownBound);
          document.removeEventListener('focus', this._handleFocusBound, true);
        }

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);
        this._animateOut();
        return this;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Modal.__proto__ || Object.getPrototypeOf(Modal), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Modal;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Modal;
  }(Component);

  /**
   * @static
   * @memberof Modal
   */


  Modal._modalsOpen = 0;

  /**
   * @static
   * @memberof Modal
   */
  Modal._count = 0;

  M.Modal = Modal;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Modal, 'modal', 'M_Modal');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    inDuration: 275,
    outDuration: 200,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null
  };

  /**
   * @class
   *
   */

  var Materialbox = function (_Component4) {
    _inherits(Materialbox, _Component4);

    /**
     * Construct Materialbox instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Materialbox(el, options) {
      _classCallCheck(this, Materialbox);

      var _this16 = _possibleConstructorReturn(this, (Materialbox.__proto__ || Object.getPrototypeOf(Materialbox)).call(this, Materialbox, el, options));

      _this16.el.M_Materialbox = _this16;

      /**
       * Options for the modal
       * @member Materialbox#options
       * @prop {Number} [inDuration=275] - Length in ms of enter transition
       * @prop {Number} [outDuration=200] - Length in ms of exit transition
       * @prop {Function} onOpenStart - Callback function called before materialbox is opened
       * @prop {Function} onOpenEnd - Callback function called after materialbox is opened
       * @prop {Function} onCloseStart - Callback function called before materialbox is closed
       * @prop {Function} onCloseEnd - Callback function called after materialbox is closed
       */
      _this16.options = $.extend({}, Materialbox.defaults, options);

      _this16.overlayActive = false;
      _this16.doneAnimating = true;
      _this16.placeholder = $('<div></div>').addClass('material-placeholder');
      _this16.originalWidth = 0;
      _this16.originalHeight = 0;
      _this16.originInlineStyles = _this16.$el.attr('style');
      _this16.caption = _this16.el.getAttribute('data-caption') || '';

      // Wrap
      _this16.$el.before(_this16.placeholder);
      _this16.placeholder.append(_this16.$el);

      _this16._setupEventHandlers();
      return _this16;
    }

    _createClass(Materialbox, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_Materialbox = undefined;

        // Unwrap image
        $(this.placeholder).after(this.el).remove();

        this.$el.removeAttr('style');
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleMaterialboxClickBound = this._handleMaterialboxClick.bind(this);
        this.el.addEventListener('click', this._handleMaterialboxClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleMaterialboxClickBound);
      }

      /**
       * Handle Materialbox Click
       * @param {Event} e
       */

    }, {
      key: "_handleMaterialboxClick",
      value: function _handleMaterialboxClick(e) {
        // If already modal, return to original
        if (this.doneAnimating === false || this.overlayActive && this.doneAnimating) {
          this.close();
        } else {
          this.open();
        }
      }

      /**
       * Handle Window Scroll
       */

    }, {
      key: "_handleWindowScroll",
      value: function _handleWindowScroll() {
        if (this.overlayActive) {
          this.close();
        }
      }

      /**
       * Handle Window Resize
       */

    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        if (this.overlayActive) {
          this.close();
        }
      }

      /**
       * Handle Window Resize
       * @param {Event} e
       */

    }, {
      key: "_handleWindowEscape",
      value: function _handleWindowEscape(e) {
        // ESC key
        if (e.keyCode === 27 && this.doneAnimating && this.overlayActive) {
          this.close();
        }
      }

      /**
       * Find ancestors with overflow: hidden; and make visible
       */

    }, {
      key: "_makeAncestorsOverflowVisible",
      value: function _makeAncestorsOverflowVisible() {
        this.ancestorsChanged = $();
        var ancestor = this.placeholder[0].parentNode;
        while (ancestor !== null && !$(ancestor).is(document)) {
          var curr = $(ancestor);
          if (curr.css('overflow') !== 'visible') {
            curr.css('overflow', 'visible');
            if (this.ancestorsChanged === undefined) {
              this.ancestorsChanged = curr;
            } else {
              this.ancestorsChanged = this.ancestorsChanged.add(curr);
            }
          }
          ancestor = ancestor.parentNode;
        }
      }

      /**
       * Animate image in
       */

    }, {
      key: "_animateImageIn",
      value: function _animateImageIn() {
        var _this17 = this;

        var animOptions = {
          targets: this.el,
          height: [this.originalHeight, this.newHeight],
          width: [this.originalWidth, this.newWidth],
          left: M.getDocumentScrollLeft() + this.windowWidth / 2 - this.placeholder.offset().left - this.newWidth / 2,
          top: M.getDocumentScrollTop() + this.windowHeight / 2 - this.placeholder.offset().top - this.newHeight / 2,
          duration: this.options.inDuration,
          easing: 'easeOutQuad',
          complete: function () {
            _this17.doneAnimating = true;

            // onOpenEnd callback
            if (typeof _this17.options.onOpenEnd === 'function') {
              _this17.options.onOpenEnd.call(_this17, _this17.el);
            }
          }
        };

        // Override max-width or max-height if needed
        this.maxWidth = this.$el.css('max-width');
        this.maxHeight = this.$el.css('max-height');
        if (this.maxWidth !== 'none') {
          animOptions.maxWidth = this.newWidth;
        }
        if (this.maxHeight !== 'none') {
          animOptions.maxHeight = this.newHeight;
        }

        anim(animOptions);
      }

      /**
       * Animate image out
       */

    }, {
      key: "_animateImageOut",
      value: function _animateImageOut() {
        var _this18 = this;

        var animOptions = {
          targets: this.el,
          width: this.originalWidth,
          height: this.originalHeight,
          left: 0,
          top: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            _this18.placeholder.css({
              height: '',
              width: '',
              position: '',
              top: '',
              left: ''
            });

            // Revert to width or height attribute
            if (_this18.attrWidth) {
              _this18.$el.attr('width', _this18.attrWidth);
            }
            if (_this18.attrHeight) {
              _this18.$el.attr('height', _this18.attrHeight);
            }

            _this18.$el.removeAttr('style');
            _this18.originInlineStyles && _this18.$el.attr('style', _this18.originInlineStyles);

            // Remove class
            _this18.$el.removeClass('active');
            _this18.doneAnimating = true;

            // Remove overflow overrides on ancestors
            if (_this18.ancestorsChanged.length) {
              _this18.ancestorsChanged.css('overflow', '');
            }

            // onCloseEnd callback
            if (typeof _this18.options.onCloseEnd === 'function') {
              _this18.options.onCloseEnd.call(_this18, _this18.el);
            }
          }
        };

        anim(animOptions);
      }

      /**
       * Update open and close vars
       */

    }, {
      key: "_updateVars",
      value: function _updateVars() {
        this.windowWidth = window.innerWidth;
        this.windowHeight = window.innerHeight;
        this.caption = this.el.getAttribute('data-caption') || '';
      }

      /**
       * Open Materialbox
       */

    }, {
      key: "open",
      value: function open() {
        var _this19 = this;

        this._updateVars();
        this.originalWidth = this.el.getBoundingClientRect().width;
        this.originalHeight = this.el.getBoundingClientRect().height;

        // Set states
        this.doneAnimating = false;
        this.$el.addClass('active');
        this.overlayActive = true;

        // onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el);
        }

        // Set positioning for placeholder
        this.placeholder.css({
          width: this.placeholder[0].getBoundingClientRect().width + 'px',
          height: this.placeholder[0].getBoundingClientRect().height + 'px',
          position: 'relative',
          top: 0,
          left: 0
        });

        this._makeAncestorsOverflowVisible();

        // Set css on origin
        this.$el.css({
          position: 'absolute',
          'z-index': 1000,
          'will-change': 'left, top, width, height'
        });

        // Change from width or height attribute to css
        this.attrWidth = this.$el.attr('width');
        this.attrHeight = this.$el.attr('height');
        if (this.attrWidth) {
          this.$el.css('width', this.attrWidth + 'px');
          this.$el.removeAttr('width');
        }
        if (this.attrHeight) {
          this.$el.css('width', this.attrHeight + 'px');
          this.$el.removeAttr('height');
        }

        // Add overlay
        this.$overlay = $('<div id="materialbox-overlay"></div>').css({
          opacity: 0
        }).one('click', function () {
          if (_this19.doneAnimating) {
            _this19.close();
          }
        });

        // Put before in origin image to preserve z-index layering.
        this.$el.before(this.$overlay);

        // Set dimensions if needed
        var overlayOffset = this.$overlay[0].getBoundingClientRect();
        this.$overlay.css({
          width: this.windowWidth + 'px',
          height: this.windowHeight + 'px',
          left: -1 * overlayOffset.left + 'px',
          top: -1 * overlayOffset.top + 'px'
        });

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);

        // Animate Overlay
        anim({
          targets: this.$overlay[0],
          opacity: 1,
          duration: this.options.inDuration,
          easing: 'easeOutQuad'
        });

        // Add and animate caption if it exists
        if (this.caption !== '') {
          if (this.$photocaption) {
            anim.remove(this.$photoCaption[0]);
          }
          this.$photoCaption = $('<div class="materialbox-caption"></div>');
          this.$photoCaption.text(this.caption);
          $('body').append(this.$photoCaption);
          this.$photoCaption.css({ display: 'inline' });

          anim({
            targets: this.$photoCaption[0],
            opacity: 1,
            duration: this.options.inDuration,
            easing: 'easeOutQuad'
          });
        }

        // Resize Image
        var ratio = 0;
        var widthPercent = this.originalWidth / this.windowWidth;
        var heightPercent = this.originalHeight / this.windowHeight;
        this.newWidth = 0;
        this.newHeight = 0;

        if (widthPercent > heightPercent) {
          ratio = this.originalHeight / this.originalWidth;
          this.newWidth = this.windowWidth * 0.9;
          this.newHeight = this.windowWidth * 0.9 * ratio;
        } else {
          ratio = this.originalWidth / this.originalHeight;
          this.newWidth = this.windowHeight * 0.9 * ratio;
          this.newHeight = this.windowHeight * 0.9;
        }

        this._animateImageIn();

        // Handle Exit triggers
        this._handleWindowScrollBound = this._handleWindowScroll.bind(this);
        this._handleWindowResizeBound = this._handleWindowResize.bind(this);
        this._handleWindowEscapeBound = this._handleWindowEscape.bind(this);

        window.addEventListener('scroll', this._handleWindowScrollBound);
        window.addEventListener('resize', this._handleWindowResizeBound);
        window.addEventListener('keyup', this._handleWindowEscapeBound);
      }

      /**
       * Close Materialbox
       */

    }, {
      key: "close",
      value: function close() {
        var _this20 = this;

        this._updateVars();
        this.doneAnimating = false;

        // onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);

        if (this.caption !== '') {
          anim.remove(this.$photoCaption[0]);
        }

        // disable exit handlers
        window.removeEventListener('scroll', this._handleWindowScrollBound);
        window.removeEventListener('resize', this._handleWindowResizeBound);
        window.removeEventListener('keyup', this._handleWindowEscapeBound);

        anim({
          targets: this.$overlay[0],
          opacity: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            _this20.overlayActive = false;
            _this20.$overlay.remove();
          }
        });

        this._animateImageOut();

        // Remove Caption + reset css settings on image
        if (this.caption !== '') {
          anim({
            targets: this.$photoCaption[0],
            opacity: 0,
            duration: this.options.outDuration,
            easing: 'easeOutQuad',
            complete: function () {
              _this20.$photoCaption.remove();
            }
          });
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Materialbox.__proto__ || Object.getPrototypeOf(Materialbox), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Materialbox;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Materialbox;
  }(Component);

  M.Materialbox = Materialbox;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Materialbox, 'materialbox', 'M_Materialbox');
  }
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    responsiveThreshold: 0 // breakpoint for swipeable
  };

  var Parallax = function (_Component5) {
    _inherits(Parallax, _Component5);

    function Parallax(el, options) {
      _classCallCheck(this, Parallax);

      var _this21 = _possibleConstructorReturn(this, (Parallax.__proto__ || Object.getPrototypeOf(Parallax)).call(this, Parallax, el, options));

      _this21.el.M_Parallax = _this21;

      /**
       * Options for the Parallax
       * @member Parallax#options
       * @prop {Number} responsiveThreshold
       */
      _this21.options = $.extend({}, Parallax.defaults, options);
      _this21._enabled = window.innerWidth > _this21.options.responsiveThreshold;

      _this21.$img = _this21.$el.find('img').first();
      _this21.$img.each(function () {
        var el = this;
        if (el.complete) $(el).trigger('load');
      });

      _this21._updateParallax();
      _this21._setupEventHandlers();
      _this21._setupStyles();

      Parallax._parallaxes.push(_this21);
      return _this21;
    }

    _createClass(Parallax, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        Parallax._parallaxes.splice(Parallax._parallaxes.indexOf(this), 1);
        this.$img[0].style.transform = '';
        this._removeEventHandlers();

        this.$el[0].M_Parallax = undefined;
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleImageLoadBound = this._handleImageLoad.bind(this);
        this.$img[0].addEventListener('load', this._handleImageLoadBound);

        if (Parallax._parallaxes.length === 0) {
          Parallax._handleScrollThrottled = M.throttle(Parallax._handleScroll, 5);
          window.addEventListener('scroll', Parallax._handleScrollThrottled);

          Parallax._handleWindowResizeThrottled = M.throttle(Parallax._handleWindowResize, 5);
          window.addEventListener('resize', Parallax._handleWindowResizeThrottled);
        }
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.$img[0].removeEventListener('load', this._handleImageLoadBound);

        if (Parallax._parallaxes.length === 0) {
          window.removeEventListener('scroll', Parallax._handleScrollThrottled);
          window.removeEventListener('resize', Parallax._handleWindowResizeThrottled);
        }
      }
    }, {
      key: "_setupStyles",
      value: function _setupStyles() {
        this.$img[0].style.opacity = 1;
      }
    }, {
      key: "_handleImageLoad",
      value: function _handleImageLoad() {
        this._updateParallax();
      }
    }, {
      key: "_updateParallax",
      value: function _updateParallax() {
        var containerHeight = this.$el.height() > 0 ? this.el.parentNode.offsetHeight : 500;
        var imgHeight = this.$img[0].offsetHeight;
        var parallaxDist = imgHeight - containerHeight;
        var bottom = this.$el.offset().top + containerHeight;
        var top = this.$el.offset().top;
        var scrollTop = M.getDocumentScrollTop();
        var windowHeight = window.innerHeight;
        var windowBottom = scrollTop + windowHeight;
        var percentScrolled = (windowBottom - top) / (containerHeight + windowHeight);
        var parallax = parallaxDist * percentScrolled;

        if (!this._enabled) {
          this.$img[0].style.transform = '';
        } else if (bottom > scrollTop && top < scrollTop + windowHeight) {
          this.$img[0].style.transform = "translate3D(-50%, " + parallax + "px, 0)";
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Parallax.__proto__ || Object.getPrototypeOf(Parallax), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Parallax;
      }
    }, {
      key: "_handleScroll",
      value: function _handleScroll() {
        for (var i = 0; i < Parallax._parallaxes.length; i++) {
          var parallaxInstance = Parallax._parallaxes[i];
          parallaxInstance._updateParallax.call(parallaxInstance);
        }
      }
    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        for (var i = 0; i < Parallax._parallaxes.length; i++) {
          var parallaxInstance = Parallax._parallaxes[i];
          parallaxInstance._enabled = window.innerWidth > parallaxInstance.options.responsiveThreshold;
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Parallax;
  }(Component);

  /**
   * @static
   * @memberof Parallax
   */


  Parallax._parallaxes = [];

  M.Parallax = Parallax;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Parallax, 'parallax', 'M_Parallax');
  }
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    duration: 300,
    onShow: null,
    swipeable: false,
    responsiveThreshold: Infinity // breakpoint for swipeable
  };

  /**
   * @class
   *
   */

  var Tabs = function (_Component6) {
    _inherits(Tabs, _Component6);

    /**
     * Construct Tabs instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Tabs(el, options) {
      _classCallCheck(this, Tabs);

      var _this22 = _possibleConstructorReturn(this, (Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call(this, Tabs, el, options));

      _this22.el.M_Tabs = _this22;

      /**
       * Options for the Tabs
       * @member Tabs#options
       * @prop {Number} duration
       * @prop {Function} onShow
       * @prop {Boolean} swipeable
       * @prop {Number} responsiveThreshold
       */
      _this22.options = $.extend({}, Tabs.defaults, options);

      // Setup
      _this22.$tabLinks = _this22.$el.children('li.tab').children('a');
      _this22.index = 0;
      _this22._setupActiveTabLink();

      // Setup tabs content
      if (_this22.options.swipeable) {
        _this22._setupSwipeableTabs();
      } else {
        _this22._setupNormalTabs();
      }

      // Setup tabs indicator after content to ensure accurate widths
      _this22._setTabsAndTabWidth();
      _this22._createIndicator();

      _this22._setupEventHandlers();
      return _this22;
    }

    _createClass(Tabs, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._indicator.parentNode.removeChild(this._indicator);

        if (this.options.swipeable) {
          this._teardownSwipeableTabs();
        } else {
          this._teardownNormalTabs();
        }

        this.$el[0].M_Tabs = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleWindowResizeBound = this._handleWindowResize.bind(this);
        window.addEventListener('resize', this._handleWindowResizeBound);

        this._handleTabClickBound = this._handleTabClick.bind(this);
        this.el.addEventListener('click', this._handleTabClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        window.removeEventListener('resize', this._handleWindowResizeBound);
        this.el.removeEventListener('click', this._handleTabClickBound);
      }

      /**
       * Handle window Resize
       */

    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        this._setTabsAndTabWidth();

        if (this.tabWidth !== 0 && this.tabsWidth !== 0) {
          this._indicator.style.left = this._calcLeftPos(this.$activeTabLink) + 'px';
          this._indicator.style.right = this._calcRightPos(this.$activeTabLink) + 'px';
        }
      }

      /**
       * Handle tab click
       * @param {Event} e
       */

    }, {
      key: "_handleTabClick",
      value: function _handleTabClick(e) {
        var _this23 = this;

        var tab = $(e.target).closest('li.tab');
        var tabLink = $(e.target).closest('a');

        // Handle click on tab link only
        if (!tabLink.length || !tabLink.parent().hasClass('tab')) {
          return;
        }

        if (tab.hasClass('disabled')) {
          e.preventDefault();
          return;
        }

        // Act as regular link if target attribute is specified.
        if (!!tabLink.attr('target')) {
          return;
        }

        // Make the old tab inactive.
        this.$activeTabLink.removeClass('active');
        var $oldContent = this.$content;

        // Update the variables with the new link and content
        this.$activeTabLink = tabLink;
        this.$content = $(M.escapeHash(tabLink[0].hash));
        this.$tabLinks = this.$el.children('li.tab').children('a');

        // Make the tab active.
        this.$activeTabLink.addClass('active');
        var prevIndex = this.index;
        this.index = Math.max(this.$tabLinks.index(tabLink), 0);

        // Swap content
        if (this.options.swipeable) {
          if (this._tabsCarousel) {
            this._tabsCarousel.set(this.index, function () {
              if (typeof _this23.options.onShow === 'function') {
                _this23.options.onShow.call(_this23, _this23.$content[0]);
              }
            });
          }
        } else {
          if (this.$content.length) {
            this.$content[0].style.display = 'block';
            this.$content.addClass('active');
            if (typeof this.options.onShow === 'function') {
              this.options.onShow.call(this, this.$content[0]);
            }

            if ($oldContent.length && !$oldContent.is(this.$content)) {
              $oldContent[0].style.display = 'none';
              $oldContent.removeClass('active');
            }
          }
        }

        // Update widths after content is swapped (scrollbar bugfix)
        this._setTabsAndTabWidth();

        // Update indicator
        this._animateIndicator(prevIndex);

        // Prevent the anchor's default click action
        e.preventDefault();
      }

      /**
       * Generate elements for tab indicator.
       */

    }, {
      key: "_createIndicator",
      value: function _createIndicator() {
        var _this24 = this;

        var indicator = document.createElement('li');
        indicator.classList.add('indicator');

        this.el.appendChild(indicator);
        this._indicator = indicator;

        setTimeout(function () {
          _this24._indicator.style.left = _this24._calcLeftPos(_this24.$activeTabLink) + 'px';
          _this24._indicator.style.right = _this24._calcRightPos(_this24.$activeTabLink) + 'px';
        }, 0);
      }

      /**
       * Setup first active tab link.
       */

    }, {
      key: "_setupActiveTabLink",
      value: function _setupActiveTabLink() {
        // If the location.hash matches one of the links, use that as the active tab.
        this.$activeTabLink = $(this.$tabLinks.filter('[href="' + location.hash + '"]'));

        // If no match is found, use the first link or any with class 'active' as the initial active tab.
        if (this.$activeTabLink.length === 0) {
          this.$activeTabLink = this.$el.children('li.tab').children('a.active').first();
        }
        if (this.$activeTabLink.length === 0) {
          this.$activeTabLink = this.$el.children('li.tab').children('a').first();
        }

        this.$tabLinks.removeClass('active');
        this.$activeTabLink[0].classList.add('active');

        this.index = Math.max(this.$tabLinks.index(this.$activeTabLink), 0);

        if (this.$activeTabLink.length) {
          this.$content = $(M.escapeHash(this.$activeTabLink[0].hash));
          this.$content.addClass('active');
        }
      }

      /**
       * Setup swipeable tabs
       */

    }, {
      key: "_setupSwipeableTabs",
      value: function _setupSwipeableTabs() {
        var _this25 = this;

        // Change swipeable according to responsive threshold
        if (window.innerWidth > this.options.responsiveThreshold) {
          this.options.swipeable = false;
        }

        var $tabsContent = $();
        this.$tabLinks.each(function (link) {
          var $currContent = $(M.escapeHash(link.hash));
          $currContent.addClass('carousel-item');
          $tabsContent = $tabsContent.add($currContent);
        });

        var $tabsWrapper = $('<div class="tabs-content carousel carousel-slider"></div>');
        $tabsContent.first().before($tabsWrapper);
        $tabsWrapper.append($tabsContent);
        $tabsContent[0].style.display = '';

        // Keep active tab index to set initial carousel slide
        var activeTabIndex = this.$activeTabLink.closest('.tab').index();

        this._tabsCarousel = M.Carousel.init($tabsWrapper[0], {
          fullWidth: true,
          noWrap: true,
          onCycleTo: function (item) {
            var prevIndex = _this25.index;
            _this25.index = $(item).index();
            _this25.$activeTabLink.removeClass('active');
            _this25.$activeTabLink = _this25.$tabLinks.eq(_this25.index);
            _this25.$activeTabLink.addClass('active');
            _this25._animateIndicator(prevIndex);
            if (typeof _this25.options.onShow === 'function') {
              _this25.options.onShow.call(_this25, _this25.$content[0]);
            }
          }
        });

        // Set initial carousel slide to active tab
        this._tabsCarousel.set(activeTabIndex);
      }

      /**
       * Teardown normal tabs.
       */

    }, {
      key: "_teardownSwipeableTabs",
      value: function _teardownSwipeableTabs() {
        var $tabsWrapper = this._tabsCarousel.$el;
        this._tabsCarousel.destroy();

        // Unwrap
        $tabsWrapper.after($tabsWrapper.children());
        $tabsWrapper.remove();
      }

      /**
       * Setup normal tabs.
       */

    }, {
      key: "_setupNormalTabs",
      value: function _setupNormalTabs() {
        // Hide Tabs Content
        this.$tabLinks.not(this.$activeTabLink).each(function (link) {
          if (!!link.hash) {
            var $currContent = $(M.escapeHash(link.hash));
            if ($currContent.length) {
              $currContent[0].style.display = 'none';
            }
          }
        });
      }

      /**
       * Teardown normal tabs.
       */

    }, {
      key: "_teardownNormalTabs",
      value: function _teardownNormalTabs() {
        // show Tabs Content
        this.$tabLinks.each(function (link) {
          if (!!link.hash) {
            var $currContent = $(M.escapeHash(link.hash));
            if ($currContent.length) {
              $currContent[0].style.display = '';
            }
          }
        });
      }

      /**
       * set tabs and tab width
       */

    }, {
      key: "_setTabsAndTabWidth",
      value: function _setTabsAndTabWidth() {
        this.tabsWidth = this.$el.width();
        this.tabWidth = Math.max(this.tabsWidth, this.el.scrollWidth) / this.$tabLinks.length;
      }

      /**
       * Finds right attribute for indicator based on active tab.
       * @param {cash} el
       */

    }, {
      key: "_calcRightPos",
      value: function _calcRightPos(el) {
        return Math.ceil(this.tabsWidth - el.position().left - el[0].getBoundingClientRect().width);
      }

      /**
       * Finds left attribute for indicator based on active tab.
       * @param {cash} el
       */

    }, {
      key: "_calcLeftPos",
      value: function _calcLeftPos(el) {
        return Math.floor(el.position().left);
      }
    }, {
      key: "updateTabIndicator",
      value: function updateTabIndicator() {
        this._setTabsAndTabWidth();
        this._animateIndicator(this.index);
      }

      /**
       * Animates Indicator to active tab.
       * @param {Number} prevIndex
       */

    }, {
      key: "_animateIndicator",
      value: function _animateIndicator(prevIndex) {
        var leftDelay = 0,
            rightDelay = 0;

        if (this.index - prevIndex >= 0) {
          leftDelay = 90;
        } else {
          rightDelay = 90;
        }

        // Animate
        var animOptions = {
          targets: this._indicator,
          left: {
            value: this._calcLeftPos(this.$activeTabLink),
            delay: leftDelay
          },
          right: {
            value: this._calcRightPos(this.$activeTabLink),
            delay: rightDelay
          },
          duration: this.options.duration,
          easing: 'easeOutQuad'
        };
        anim.remove(this._indicator);
        anim(animOptions);
      }

      /**
       * Select tab.
       * @param {String} tabId
       */

    }, {
      key: "select",
      value: function select(tabId) {
        var tab = this.$tabLinks.filter('[href="#' + tabId + '"]');
        if (tab.length) {
          tab.trigger('click');
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Tabs.__proto__ || Object.getPrototypeOf(Tabs), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Tabs;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Tabs;
  }(Component);

  M.Tabs = Tabs;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Tabs, 'tabs', 'M_Tabs');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    exitDelay: 200,
    enterDelay: 0,
    html: null,
    margin: 5,
    inDuration: 250,
    outDuration: 200,
    position: 'bottom',
    transitionMovement: 10
  };

  /**
   * @class
   *
   */

  var Tooltip = function (_Component7) {
    _inherits(Tooltip, _Component7);

    /**
     * Construct Tooltip instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Tooltip(el, options) {
      _classCallCheck(this, Tooltip);

      var _this26 = _possibleConstructorReturn(this, (Tooltip.__proto__ || Object.getPrototypeOf(Tooltip)).call(this, Tooltip, el, options));

      _this26.el.M_Tooltip = _this26;
      _this26.options = $.extend({}, Tooltip.defaults, options);

      _this26.isOpen = false;
      _this26.isHovered = false;
      _this26.isFocused = false;
      _this26._appendTooltipEl();
      _this26._setupEventHandlers();
      return _this26;
    }

    _createClass(Tooltip, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        $(this.tooltipEl).remove();
        this._removeEventHandlers();
        this.el.M_Tooltip = undefined;
      }
    }, {
      key: "_appendTooltipEl",
      value: function _appendTooltipEl() {
        var tooltipEl = document.createElement('div');
        tooltipEl.classList.add('material-tooltip');
        this.tooltipEl = tooltipEl;

        var tooltipContentEl = document.createElement('div');
        tooltipContentEl.classList.add('tooltip-content');
        tooltipContentEl.innerHTML = this.options.html;
        tooltipEl.appendChild(tooltipContentEl);
        document.body.appendChild(tooltipEl);
      }
    }, {
      key: "_updateTooltipContent",
      value: function _updateTooltipContent() {
        this.tooltipEl.querySelector('.tooltip-content').innerHTML = this.options.html;
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleMouseEnterBound = this._handleMouseEnter.bind(this);
        this._handleMouseLeaveBound = this._handleMouseLeave.bind(this);
        this._handleFocusBound = this._handleFocus.bind(this);
        this._handleBlurBound = this._handleBlur.bind(this);
        this.el.addEventListener('mouseenter', this._handleMouseEnterBound);
        this.el.addEventListener('mouseleave', this._handleMouseLeaveBound);
        this.el.addEventListener('focus', this._handleFocusBound, true);
        this.el.addEventListener('blur', this._handleBlurBound, true);
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('mouseenter', this._handleMouseEnterBound);
        this.el.removeEventListener('mouseleave', this._handleMouseLeaveBound);
        this.el.removeEventListener('focus', this._handleFocusBound, true);
        this.el.removeEventListener('blur', this._handleBlurBound, true);
      }
    }, {
      key: "open",
      value: function open(isManual) {
        if (this.isOpen) {
          return;
        }
        isManual = isManual === undefined ? true : undefined; // Default value true
        this.isOpen = true;
        // Update tooltip content with HTML attribute options
        this.options = $.extend({}, this.options, this._getAttributeOptions());
        this._updateTooltipContent();
        this._setEnterDelayTimeout(isManual);
      }
    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isHovered = false;
        this.isFocused = false;
        this.isOpen = false;
        this._setExitDelayTimeout();
      }

      /**
       * Create timeout which delays when the tooltip closes
       */

    }, {
      key: "_setExitDelayTimeout",
      value: function _setExitDelayTimeout() {
        var _this27 = this;

        clearTimeout(this._exitDelayTimeout);

        this._exitDelayTimeout = setTimeout(function () {
          if (_this27.isHovered || _this27.isFocused) {
            return;
          }

          _this27._animateOut();
        }, this.options.exitDelay);
      }

      /**
       * Create timeout which delays when the toast closes
       */

    }, {
      key: "_setEnterDelayTimeout",
      value: function _setEnterDelayTimeout(isManual) {
        var _this28 = this;

        clearTimeout(this._enterDelayTimeout);

        this._enterDelayTimeout = setTimeout(function () {
          if (!_this28.isHovered && !_this28.isFocused && !isManual) {
            return;
          }

          _this28._animateIn();
        }, this.options.enterDelay);
      }
    }, {
      key: "_positionTooltip",
      value: function _positionTooltip() {
        var origin = this.el,
            tooltip = this.tooltipEl,
            originHeight = origin.offsetHeight,
            originWidth = origin.offsetWidth,
            tooltipHeight = tooltip.offsetHeight,
            tooltipWidth = tooltip.offsetWidth,
            newCoordinates = void 0,
            margin = this.options.margin,
            targetTop = void 0,
            targetLeft = void 0;

        this.xMovement = 0, this.yMovement = 0;

        targetTop = origin.getBoundingClientRect().top + M.getDocumentScrollTop();
        targetLeft = origin.getBoundingClientRect().left + M.getDocumentScrollLeft();

        if (this.options.position === 'top') {
          targetTop += -tooltipHeight - margin;
          targetLeft += originWidth / 2 - tooltipWidth / 2;
          this.yMovement = -this.options.transitionMovement;
        } else if (this.options.position === 'right') {
          targetTop += originHeight / 2 - tooltipHeight / 2;
          targetLeft += originWidth + margin;
          this.xMovement = this.options.transitionMovement;
        } else if (this.options.position === 'left') {
          targetTop += originHeight / 2 - tooltipHeight / 2;
          targetLeft += -tooltipWidth - margin;
          this.xMovement = -this.options.transitionMovement;
        } else {
          targetTop += originHeight + margin;
          targetLeft += originWidth / 2 - tooltipWidth / 2;
          this.yMovement = this.options.transitionMovement;
        }

        newCoordinates = this._repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);
        $(tooltip).css({
          top: newCoordinates.y + 'px',
          left: newCoordinates.x + 'px'
        });
      }
    }, {
      key: "_repositionWithinScreen",
      value: function _repositionWithinScreen(x, y, width, height) {
        var scrollLeft = M.getDocumentScrollLeft();
        var scrollTop = M.getDocumentScrollTop();
        var newX = x - scrollLeft;
        var newY = y - scrollTop;

        var bounding = {
          left: newX,
          top: newY,
          width: width,
          height: height
        };

        var offset = this.options.margin + this.options.transitionMovement;
        var edges = M.checkWithinContainer(document.body, bounding, offset);

        if (edges.left) {
          newX = offset;
        } else if (edges.right) {
          newX -= newX + width - window.innerWidth;
        }

        if (edges.top) {
          newY = offset;
        } else if (edges.bottom) {
          newY -= newY + height - window.innerHeight;
        }

        return {
          x: newX + scrollLeft,
          y: newY + scrollTop
        };
      }
    }, {
      key: "_animateIn",
      value: function _animateIn() {
        this._positionTooltip();
        this.tooltipEl.style.visibility = 'visible';
        anim.remove(this.tooltipEl);
        anim({
          targets: this.tooltipEl,
          opacity: 1,
          translateX: this.xMovement,
          translateY: this.yMovement,
          duration: this.options.inDuration,
          easing: 'easeOutCubic'
        });
      }
    }, {
      key: "_animateOut",
      value: function _animateOut() {
        anim.remove(this.tooltipEl);
        anim({
          targets: this.tooltipEl,
          opacity: 0,
          translateX: 0,
          translateY: 0,
          duration: this.options.outDuration,
          easing: 'easeOutCubic'
        });
      }
    }, {
      key: "_handleMouseEnter",
      value: function _handleMouseEnter() {
        this.isHovered = true;
        this.isFocused = false; // Allows close of tooltip when opened by focus.
        this.open(false);
      }
    }, {
      key: "_handleMouseLeave",
      value: function _handleMouseLeave() {
        this.isHovered = false;
        this.isFocused = false; // Allows close of tooltip when opened by focus.
        this.close();
      }
    }, {
      key: "_handleFocus",
      value: function _handleFocus() {
        if (M.tabPressed) {
          this.isFocused = true;
          this.open(false);
        }
      }
    }, {
      key: "_handleBlur",
      value: function _handleBlur() {
        this.isFocused = false;
        this.close();
      }
    }, {
      key: "_getAttributeOptions",
      value: function _getAttributeOptions() {
        var attributeOptions = {};
        var tooltipTextOption = this.el.getAttribute('data-tooltip');
        var positionOption = this.el.getAttribute('data-position');

        if (tooltipTextOption) {
          attributeOptions.html = tooltipTextOption;
        }

        if (positionOption) {
          attributeOptions.position = positionOption;
        }
        return attributeOptions;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Tooltip.__proto__ || Object.getPrototypeOf(Tooltip), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Tooltip;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Tooltip;
  }(Component);

  M.Tooltip = Tooltip;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Tooltip, 'tooltip', 'M_Tooltip');
  }
})(cash, M.anime);
; /*!
  * Waves v0.6.4
  * http://fian.my.id/Waves
  *
  * Copyright 2014 Alfiana E. Sibuea and other contributors
  * Released under the MIT license
  * https://github.com/fians/Waves/blob/master/LICENSE
  */

;(function (window) {
  'use strict';

  var Waves = Waves || {};
  var $$ = document.querySelectorAll.bind(document);

  // Find exact position of element
  function isWindow(obj) {
    return obj !== null && obj === obj.window;
  }

  function getWindow(elem) {
    return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;
  }

  function offset(elem) {
    var docElem,
        win,
        box = { top: 0, left: 0 },
        doc = elem && elem.ownerDocument;

    docElem = doc.documentElement;

    if (typeof elem.getBoundingClientRect !== typeof undefined) {
      box = elem.getBoundingClientRect();
    }
    win = getWindow(doc);
    return {
      top: box.top + win.pageYOffset - docElem.clientTop,
      left: box.left + win.pageXOffset - docElem.clientLeft
    };
  }

  function convertStyle(obj) {
    var style = '';

    for (var a in obj) {
      if (obj.hasOwnProperty(a)) {
        style += a + ':' + obj[a] + ';';
      }
    }

    return style;
  }

  var Effect = {

    // Effect delay
    duration: 750,

    show: function (e, element) {

      // Disable right click
      if (e.button === 2) {
        return false;
      }

      var el = element || this;

      // Create ripple
      var ripple = document.createElement('div');
      ripple.className = 'waves-ripple';
      el.appendChild(ripple);

      // Get click coordinate and element witdh
      var pos = offset(el);
      var relativeY = e.pageY - pos.top;
      var relativeX = e.pageX - pos.left;
      var scale = 'scale(' + el.clientWidth / 100 * 10 + ')';

      // Support for touch devices
      if ('touches' in e) {
        relativeY = e.touches[0].pageY - pos.top;
        relativeX = e.touches[0].pageX - pos.left;
      }

      // Attach data to element
      ripple.setAttribute('data-hold', Date.now());
      ripple.setAttribute('data-scale', scale);
      ripple.setAttribute('data-x', relativeX);
      ripple.setAttribute('data-y', relativeY);

      // Set ripple position
      var rippleStyle = {
        'top': relativeY + 'px',
        'left': relativeX + 'px'
      };

      ripple.className = ripple.className + ' waves-notransition';
      ripple.setAttribute('style', convertStyle(rippleStyle));
      ripple.className = ripple.className.replace('waves-notransition', '');

      // Scale the ripple
      rippleStyle['-webkit-transform'] = scale;
      rippleStyle['-moz-transform'] = scale;
      rippleStyle['-ms-transform'] = scale;
      rippleStyle['-o-transform'] = scale;
      rippleStyle.transform = scale;
      rippleStyle.opacity = '1';

      rippleStyle['-webkit-transition-duration'] = Effect.duration + 'ms';
      rippleStyle['-moz-transition-duration'] = Effect.duration + 'ms';
      rippleStyle['-o-transition-duration'] = Effect.duration + 'ms';
      rippleStyle['transition-duration'] = Effect.duration + 'ms';

      rippleStyle['-webkit-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
      rippleStyle['-moz-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
      rippleStyle['-o-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
      rippleStyle['transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';

      ripple.setAttribute('style', convertStyle(rippleStyle));
    },

    hide: function (e) {
      TouchHandler.touchup(e);

      var el = this;
      var width = el.clientWidth * 1.4;

      // Get first ripple
      var ripple = null;
      var ripples = el.getElementsByClassName('waves-ripple');
      if (ripples.length > 0) {
        ripple = ripples[ripples.length - 1];
      } else {
        return false;
      }

      var relativeX = ripple.getAttribute('data-x');
      var relativeY = ripple.getAttribute('data-y');
      var scale = ripple.getAttribute('data-scale');

      // Get delay beetween mousedown and mouse leave
      var diff = Date.now() - Number(ripple.getAttribute('data-hold'));
      var delay = 350 - diff;

      if (delay < 0) {
        delay = 0;
      }

      // Fade out ripple after delay
      setTimeout(function () {
        var style = {
          'top': relativeY + 'px',
          'left': relativeX + 'px',
          'opacity': '0',

          // Duration
          '-webkit-transition-duration': Effect.duration + 'ms',
          '-moz-transition-duration': Effect.duration + 'ms',
          '-o-transition-duration': Effect.duration + 'ms',
          'transition-duration': Effect.duration + 'ms',
          '-webkit-transform': scale,
          '-moz-transform': scale,
          '-ms-transform': scale,
          '-o-transform': scale,
          'transform': scale
        };

        ripple.setAttribute('style', convertStyle(style));

        setTimeout(function () {
          try {
            el.removeChild(ripple);
          } catch (e) {
            return false;
          }
        }, Effect.duration);
      }, delay);
    },

    // Little hack to make <input> can perform waves effect
    wrapInput: function (elements) {
      for (var a = 0; a < elements.length; a++) {
        var el = elements[a];

        if (el.tagName.toLowerCase() === 'input') {
          var parent = el.parentNode;

          // If input already have parent just pass through
          if (parent.tagName.toLowerCase() === 'i' && parent.className.indexOf('waves-effect') !== -1) {
            continue;
          }

          // Put element class and style to the specified parent
          var wrapper = document.createElement('i');
          wrapper.className = el.className + ' waves-input-wrapper';

          var elementStyle = el.getAttribute('style');

          if (!elementStyle) {
            elementStyle = '';
          }

          wrapper.setAttribute('style', elementStyle);

          el.className = 'waves-button-input';
          el.removeAttribute('style');

          // Put element as child
          parent.replaceChild(wrapper, el);
          wrapper.appendChild(el);
        }
      }
    }
  };

  /**
   * Disable mousedown event for 500ms during and after touch
   */
  var TouchHandler = {
    /* uses an integer rather than bool so there's no issues with
     * needing to clear timeouts if another touch event occurred
     * within the 500ms. Cannot mouseup between touchstart and
     * touchend, nor in the 500ms after touchend. */
    touches: 0,
    allowEvent: function (e) {
      var allow = true;

      if (e.type === 'touchstart') {
        TouchHandler.touches += 1; //push
      } else if (e.type === 'touchend' || e.type === 'touchcancel') {
        setTimeout(function () {
          if (TouchHandler.touches > 0) {
            TouchHandler.touches -= 1; //pop after 500ms
          }
        }, 500);
      } else if (e.type === 'mousedown' && TouchHandler.touches > 0) {
        allow = false;
      }

      return allow;
    },
    touchup: function (e) {
      TouchHandler.allowEvent(e);
    }
  };

  /**
   * Delegated click handler for .waves-effect element.
   * returns null when .waves-effect element not in "click tree"
   */
  function getWavesEffectElement(e) {
    if (TouchHandler.allowEvent(e) === false) {
      return null;
    }

    var element = null;
    var target = e.target || e.srcElement;

    while (target.parentNode !== null) {
      if (!(target instanceof SVGElement) && target.className.indexOf('waves-effect') !== -1) {
        element = target;
        break;
      }
      target = target.parentNode;
    }
    return element;
  }

  /**
   * Bubble the click and show effect if .waves-effect elem was found
   */
  function showEffect(e) {
    var element = getWavesEffectElement(e);

    if (element !== null) {
      Effect.show(e, element);

      if ('ontouchstart' in window) {
        element.addEventListener('touchend', Effect.hide, false);
        element.addEventListener('touchcancel', Effect.hide, false);
      }

      element.addEventListener('mouseup', Effect.hide, false);
      element.addEventListener('mouseleave', Effect.hide, false);
      element.addEventListener('dragend', Effect.hide, false);
    }
  }

  Waves.displayEffect = function (options) {
    options = options || {};

    if ('duration' in options) {
      Effect.duration = options.duration;
    }

    //Wrap input inside <i> tag
    Effect.wrapInput($$('.waves-effect'));

    if ('ontouchstart' in window) {
      document.body.addEventListener('touchstart', showEffect, false);
    }

    document.body.addEventListener('mousedown', showEffect, false);
  };

  /**
   * Attach Waves to an input element (or any element which doesn't
   * bubble mouseup/mousedown events).
   *   Intended to be used with dynamically loaded forms/inputs, or
   * where the user doesn't want a delegated click handler.
   */
  Waves.attach = function (element) {
    //FUTURE: automatically add waves classes and allow users
    // to specify them with an options param? Eg. light/classic/button
    if (element.tagName.toLowerCase() === 'input') {
      Effect.wrapInput([element]);
      element = element.parentNode;
    }

    if ('ontouchstart' in window) {
      element.addEventListener('touchstart', showEffect, false);
    }

    element.addEventListener('mousedown', showEffect, false);
  };

  window.Waves = Waves;

  document.addEventListener('DOMContentLoaded', function () {
    Waves.displayEffect();
  }, false);
})(window);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    html: '',
    displayLength: 4000,
    inDuration: 300,
    outDuration: 375,
    classes: '',
    completeCallback: null,
    activationPercent: 0.8
  };

  var Toast = function () {
    function Toast(options) {
      _classCallCheck(this, Toast);

      /**
       * Options for the toast
       * @member Toast#options
       */
      this.options = $.extend({}, Toast.defaults, options);
      this.message = this.options.html;

      /**
       * Describes current pan state toast
       * @type {Boolean}
       */
      this.panning = false;

      /**
       * Time remaining until toast is removed
       */
      this.timeRemaining = this.options.displayLength;

      if (Toast._toasts.length === 0) {
        Toast._createContainer();
      }

      // Create new toast
      Toast._toasts.push(this);
      var toastElement = this._createToast();
      toastElement.M_Toast = this;
      this.el = toastElement;
      this.$el = $(toastElement);
      this._animateIn();
      this._setTimer();
    }

    _createClass(Toast, [{
      key: "_createToast",


      /**
       * Create toast and append it to toast container
       */
      value: function _createToast() {
        var toast = document.createElement('div');
        toast.classList.add('toast');

        // Add custom classes onto toast
        if (!!this.options.classes.length) {
          $(toast).addClass(this.options.classes);
        }

        // Set content
        if (typeof HTMLElement === 'object' ? this.message instanceof HTMLElement : this.message && typeof this.message === 'object' && this.message !== null && this.message.nodeType === 1 && typeof this.message.nodeName === 'string') {
          toast.appendChild(this.message);

          // Check if it is jQuery object
        } else if (!!this.message.jquery) {
          $(toast).append(this.message[0]);

          // Insert as html;
        } else {
          toast.innerHTML = this.message;
        }

        // Append toasft
        Toast._container.appendChild(toast);
        return toast;
      }

      /**
       * Animate in toast
       */

    }, {
      key: "_animateIn",
      value: function _animateIn() {
        // Animate toast in
        anim({
          targets: this.el,
          top: 0,
          opacity: 1,
          duration: this.options.inDuration,
          easing: 'easeOutCubic'
        });
      }

      /**
       * Create setInterval which automatically removes toast when timeRemaining >= 0
       * has been reached
       */

    }, {
      key: "_setTimer",
      value: function _setTimer() {
        var _this29 = this;

        if (this.timeRemaining !== Infinity) {
          this.counterInterval = setInterval(function () {
            // If toast is not being dragged, decrease its time remaining
            if (!_this29.panning) {
              _this29.timeRemaining -= 20;
            }

            // Animate toast out
            if (_this29.timeRemaining <= 0) {
              _this29.dismiss();
            }
          }, 20);
        }
      }

      /**
       * Dismiss toast with animation
       */

    }, {
      key: "dismiss",
      value: function dismiss() {
        var _this30 = this;

        window.clearInterval(this.counterInterval);
        var activationDistance = this.el.offsetWidth * this.options.activationPercent;

        if (this.wasSwiped) {
          this.el.style.transition = 'transform .05s, opacity .05s';
          this.el.style.transform = "translateX(" + activationDistance + "px)";
          this.el.style.opacity = 0;
        }

        anim({
          targets: this.el,
          opacity: 0,
          marginTop: -40,
          duration: this.options.outDuration,
          easing: 'easeOutExpo',
          complete: function () {
            // Call the optional callback
            if (typeof _this30.options.completeCallback === 'function') {
              _this30.options.completeCallback();
            }
            // Remove toast from DOM
            _this30.$el.remove();
            Toast._toasts.splice(Toast._toasts.indexOf(_this30), 1);
            if (Toast._toasts.length === 0) {
              Toast._removeContainer();
            }
          }
        });
      }
    }], [{
      key: "getInstance",


      /**
       * Get Instance
       */
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Toast;
      }

      /**
       * Append toast container and add event handlers
       */

    }, {
      key: "_createContainer",
      value: function _createContainer() {
        var container = document.createElement('div');
        container.setAttribute('id', 'toast-container');

        // Add event handler
        container.addEventListener('touchstart', Toast._onDragStart);
        container.addEventListener('touchmove', Toast._onDragMove);
        container.addEventListener('touchend', Toast._onDragEnd);

        container.addEventListener('mousedown', Toast._onDragStart);
        document.addEventListener('mousemove', Toast._onDragMove);
        document.addEventListener('mouseup', Toast._onDragEnd);

        document.body.appendChild(container);
        Toast._container = container;
      }

      /**
       * Remove toast container and event handlers
       */

    }, {
      key: "_removeContainer",
      value: function _removeContainer() {
        // Add event handler
        document.removeEventListener('mousemove', Toast._onDragMove);
        document.removeEventListener('mouseup', Toast._onDragEnd);

        $(Toast._container).remove();
        Toast._container = null;
      }

      /**
       * Begin drag handler
       * @param {Event} e
       */

    }, {
      key: "_onDragStart",
      value: function _onDragStart(e) {
        if (e.target && $(e.target).closest('.toast').length) {
          var $toast = $(e.target).closest('.toast');
          var toast = $toast[0].M_Toast;
          toast.panning = true;
          Toast._draggedToast = toast;
          toast.el.classList.add('panning');
          toast.el.style.transition = '';
          toast.startingXPos = Toast._xPos(e);
          toast.time = Date.now();
          toast.xPos = Toast._xPos(e);
        }
      }

      /**
       * Drag move handler
       * @param {Event} e
       */

    }, {
      key: "_onDragMove",
      value: function _onDragMove(e) {
        if (!!Toast._draggedToast) {
          e.preventDefault();
          var toast = Toast._draggedToast;
          toast.deltaX = Math.abs(toast.xPos - Toast._xPos(e));
          toast.xPos = Toast._xPos(e);
          toast.velocityX = toast.deltaX / (Date.now() - toast.time);
          toast.time = Date.now();

          var totalDeltaX = toast.xPos - toast.startingXPos;
          var activationDistance = toast.el.offsetWidth * toast.options.activationPercent;
          toast.el.style.transform = "translateX(" + totalDeltaX + "px)";
          toast.el.style.opacity = 1 - Math.abs(totalDeltaX / activationDistance);
        }
      }

      /**
       * End drag handler
       */

    }, {
      key: "_onDragEnd",
      value: function _onDragEnd() {
        if (!!Toast._draggedToast) {
          var toast = Toast._draggedToast;
          toast.panning = false;
          toast.el.classList.remove('panning');

          var totalDeltaX = toast.xPos - toast.startingXPos;
          var activationDistance = toast.el.offsetWidth * toast.options.activationPercent;
          var shouldBeDismissed = Math.abs(totalDeltaX) > activationDistance || toast.velocityX > 1;

          // Remove toast
          if (shouldBeDismissed) {
            toast.wasSwiped = true;
            toast.dismiss();

            // Animate toast back to original position
          } else {
            toast.el.style.transition = 'transform .2s, opacity .2s';
            toast.el.style.transform = '';
            toast.el.style.opacity = '';
          }
          Toast._draggedToast = null;
        }
      }

      /**
       * Get x position of mouse or touch event
       * @param {Event} e
       */

    }, {
      key: "_xPos",
      value: function _xPos(e) {
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return e.targetTouches[0].clientX;
        }
        // mouse event
        return e.clientX;
      }

      /**
       * Remove all toasts
       */

    }, {
      key: "dismissAll",
      value: function dismissAll() {
        for (var toastIndex in Toast._toasts) {
          Toast._toasts[toastIndex].dismiss();
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Toast;
  }();

  /**
   * @static
   * @memberof Toast
   * @type {Array.<Toast>}
   */


  Toast._toasts = [];

  /**
   * @static
   * @memberof Toast
   */
  Toast._container = null;

  /**
   * @static
   * @memberof Toast
   * @type {Toast}
   */
  Toast._draggedToast = null;

  M.Toast = Toast;
  M.toast = function (options) {
    return new Toast(options);
  };
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    edge: 'left',
    draggable: true,
    inDuration: 250,
    outDuration: 200,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    preventScrolling: true
  };

  /**
   * @class
   */

  var Sidenav = function (_Component8) {
    _inherits(Sidenav, _Component8);

    /**
     * Construct Sidenav instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Sidenav(el, options) {
      _classCallCheck(this, Sidenav);

      var _this31 = _possibleConstructorReturn(this, (Sidenav.__proto__ || Object.getPrototypeOf(Sidenav)).call(this, Sidenav, el, options));

      _this31.el.M_Sidenav = _this31;
      _this31.id = _this31.$el.attr('id');

      /**
       * Options for the Sidenav
       * @member Sidenav#options
       * @prop {String} [edge='left'] - Side of screen on which Sidenav appears
       * @prop {Boolean} [draggable=true] - Allow swipe gestures to open/close Sidenav
       * @prop {Number} [inDuration=250] - Length in ms of enter transition
       * @prop {Number} [outDuration=200] - Length in ms of exit transition
       * @prop {Function} onOpenStart - Function called when sidenav starts entering
       * @prop {Function} onOpenEnd - Function called when sidenav finishes entering
       * @prop {Function} onCloseStart - Function called when sidenav starts exiting
       * @prop {Function} onCloseEnd - Function called when sidenav finishes exiting
       */
      _this31.options = $.extend({}, Sidenav.defaults, options);

      /**
       * Describes open/close state of Sidenav
       * @type {Boolean}
       */
      _this31.isOpen = false;

      /**
       * Describes if Sidenav is fixed
       * @type {Boolean}
       */
      _this31.isFixed = _this31.el.classList.contains('sidenav-fixed');

      /**
       * Describes if Sidenav is being draggeed
       * @type {Boolean}
       */
      _this31.isDragged = false;

      // Window size variables for window resize checks
      _this31.lastWindowWidth = window.innerWidth;
      _this31.lastWindowHeight = window.innerHeight;

      _this31._createOverlay();
      _this31._createDragTarget();
      _this31._setupEventHandlers();
      _this31._setupClasses();
      _this31._setupFixed();

      Sidenav._sidenavs.push(_this31);
      return _this31;
    }

    _createClass(Sidenav, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._enableBodyScrolling();
        this._overlay.parentNode.removeChild(this._overlay);
        this.dragTarget.parentNode.removeChild(this.dragTarget);
        this.el.M_Sidenav = undefined;
        this.el.style.transform = '';

        var index = Sidenav._sidenavs.indexOf(this);
        if (index >= 0) {
          Sidenav._sidenavs.splice(index, 1);
        }
      }
    }, {
      key: "_createOverlay",
      value: function _createOverlay() {
        var overlay = document.createElement('div');
        this._closeBound = this.close.bind(this);
        overlay.classList.add('sidenav-overlay');

        overlay.addEventListener('click', this._closeBound);

        document.body.appendChild(overlay);
        this._overlay = overlay;
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        if (Sidenav._sidenavs.length === 0) {
          document.body.addEventListener('click', this._handleTriggerClick);
        }

        this._handleDragTargetDragBound = this._handleDragTargetDrag.bind(this);
        this._handleDragTargetReleaseBound = this._handleDragTargetRelease.bind(this);
        this._handleCloseDragBound = this._handleCloseDrag.bind(this);
        this._handleCloseReleaseBound = this._handleCloseRelease.bind(this);
        this._handleCloseTriggerClickBound = this._handleCloseTriggerClick.bind(this);

        this.dragTarget.addEventListener('touchmove', this._handleDragTargetDragBound);
        this.dragTarget.addEventListener('touchend', this._handleDragTargetReleaseBound);
        this._overlay.addEventListener('touchmove', this._handleCloseDragBound);
        this._overlay.addEventListener('touchend', this._handleCloseReleaseBound);
        this.el.addEventListener('touchmove', this._handleCloseDragBound);
        this.el.addEventListener('touchend', this._handleCloseReleaseBound);
        this.el.addEventListener('click', this._handleCloseTriggerClickBound);

        // Add resize for side nav fixed
        if (this.isFixed) {
          this._handleWindowResizeBound = this._handleWindowResize.bind(this);
          window.addEventListener('resize', this._handleWindowResizeBound);
        }
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (Sidenav._sidenavs.length === 1) {
          document.body.removeEventListener('click', this._handleTriggerClick);
        }

        this.dragTarget.removeEventListener('touchmove', this._handleDragTargetDragBound);
        this.dragTarget.removeEventListener('touchend', this._handleDragTargetReleaseBound);
        this._overlay.removeEventListener('touchmove', this._handleCloseDragBound);
        this._overlay.removeEventListener('touchend', this._handleCloseReleaseBound);
        this.el.removeEventListener('touchmove', this._handleCloseDragBound);
        this.el.removeEventListener('touchend', this._handleCloseReleaseBound);
        this.el.removeEventListener('click', this._handleCloseTriggerClickBound);

        // Remove resize for side nav fixed
        if (this.isFixed) {
          window.removeEventListener('resize', this._handleWindowResizeBound);
        }
      }

      /**
       * Handle Trigger Click
       * @param {Event} e
       */

    }, {
      key: "_handleTriggerClick",
      value: function _handleTriggerClick(e) {
        var $trigger = $(e.target).closest('.sidenav-trigger');
        if (e.target && $trigger.length) {
          var sidenavId = M.getIdFromTrigger($trigger[0]);

          var sidenavInstance = document.getElementById(sidenavId).M_Sidenav;
          if (sidenavInstance) {
            sidenavInstance.open($trigger);
          }
          e.preventDefault();
        }
      }

      /**
       * Set variables needed at the beggining of drag
       * and stop any current transition.
       * @param {Event} e
       */

    }, {
      key: "_startDrag",
      value: function _startDrag(e) {
        var clientX = e.targetTouches[0].clientX;
        this.isDragged = true;
        this._startingXpos = clientX;
        this._xPos = this._startingXpos;
        this._time = Date.now();
        this._width = this.el.getBoundingClientRect().width;
        this._overlay.style.display = 'block';
        this._initialScrollTop = this.isOpen ? this.el.scrollTop : M.getDocumentScrollTop();
        this._verticallyScrolling = false;
        anim.remove(this.el);
        anim.remove(this._overlay);
      }

      /**
       * Set variables needed at each drag move update tick
       * @param {Event} e
       */

    }, {
      key: "_dragMoveUpdate",
      value: function _dragMoveUpdate(e) {
        var clientX = e.targetTouches[0].clientX;
        var currentScrollTop = this.isOpen ? this.el.scrollTop : M.getDocumentScrollTop();
        this.deltaX = Math.abs(this._xPos - clientX);
        this._xPos = clientX;
        this.velocityX = this.deltaX / (Date.now() - this._time);
        this._time = Date.now();
        if (this._initialScrollTop !== currentScrollTop) {
          this._verticallyScrolling = true;
        }
      }

      /**
       * Handles Dragging of Sidenav
       * @param {Event} e
       */

    }, {
      key: "_handleDragTargetDrag",
      value: function _handleDragTargetDrag(e) {
        // Check if draggable
        if (!this.options.draggable || this._isCurrentlyFixed() || this._verticallyScrolling) {
          return;
        }

        // If not being dragged, set initial drag start variables
        if (!this.isDragged) {
          this._startDrag(e);
        }

        // Run touchmove updates
        this._dragMoveUpdate(e);

        // Calculate raw deltaX
        var totalDeltaX = this._xPos - this._startingXpos;

        // dragDirection is the attempted user drag direction
        var dragDirection = totalDeltaX > 0 ? 'right' : 'left';

        // Don't allow totalDeltaX to exceed Sidenav width or be dragged in the opposite direction
        totalDeltaX = Math.min(this._width, Math.abs(totalDeltaX));
        if (this.options.edge === dragDirection) {
          totalDeltaX = 0;
        }

        /**
         * transformX is the drag displacement
         * transformPrefix is the initial transform placement
         * Invert values if Sidenav is right edge
         */
        var transformX = totalDeltaX;
        var transformPrefix = 'translateX(-100%)';
        if (this.options.edge === 'right') {
          transformPrefix = 'translateX(100%)';
          transformX = -transformX;
        }

        // Calculate open/close percentage of sidenav, with open = 1 and close = 0
        this.percentOpen = Math.min(1, totalDeltaX / this._width);

        // Set transform and opacity styles
        this.el.style.transform = transformPrefix + " translateX(" + transformX + "px)";
        this._overlay.style.opacity = this.percentOpen;
      }

      /**
       * Handle Drag Target Release
       */

    }, {
      key: "_handleDragTargetRelease",
      value: function _handleDragTargetRelease() {
        if (this.isDragged) {
          if (this.percentOpen > 0.2) {
            this.open();
          } else {
            this._animateOut();
          }

          this.isDragged = false;
          this._verticallyScrolling = false;
        }
      }

      /**
       * Handle Close Drag
       * @param {Event} e
       */

    }, {
      key: "_handleCloseDrag",
      value: function _handleCloseDrag(e) {
        if (this.isOpen) {
          // Check if draggable
          if (!this.options.draggable || this._isCurrentlyFixed() || this._verticallyScrolling) {
            return;
          }

          // If not being dragged, set initial drag start variables
          if (!this.isDragged) {
            this._startDrag(e);
          }

          // Run touchmove updates
          this._dragMoveUpdate(e);

          // Calculate raw deltaX
          var totalDeltaX = this._xPos - this._startingXpos;

          // dragDirection is the attempted user drag direction
          var dragDirection = totalDeltaX > 0 ? 'right' : 'left';

          // Don't allow totalDeltaX to exceed Sidenav width or be dragged in the opposite direction
          totalDeltaX = Math.min(this._width, Math.abs(totalDeltaX));
          if (this.options.edge !== dragDirection) {
            totalDeltaX = 0;
          }

          var transformX = -totalDeltaX;
          if (this.options.edge === 'right') {
            transformX = -transformX;
          }

          // Calculate open/close percentage of sidenav, with open = 1 and close = 0
          this.percentOpen = Math.min(1, 1 - totalDeltaX / this._width);

          // Set transform and opacity styles
          this.el.style.transform = "translateX(" + transformX + "px)";
          this._overlay.style.opacity = this.percentOpen;
        }
      }

      /**
       * Handle Close Release
       */

    }, {
      key: "_handleCloseRelease",
      value: function _handleCloseRelease() {
        if (this.isOpen && this.isDragged) {
          if (this.percentOpen > 0.8) {
            this._animateIn();
          } else {
            this.close();
          }

          this.isDragged = false;
          this._verticallyScrolling = false;
        }
      }

      /**
       * Handles closing of Sidenav when element with class .sidenav-close
       */

    }, {
      key: "_handleCloseTriggerClick",
      value: function _handleCloseTriggerClick(e) {
        var $closeTrigger = $(e.target).closest('.sidenav-close');
        if ($closeTrigger.length && !this._isCurrentlyFixed()) {
          this.close();
        }
      }

      /**
       * Handle Window Resize
       */

    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        // Only handle horizontal resizes
        if (this.lastWindowWidth !== window.innerWidth) {
          if (window.innerWidth > 992) {
            this.open();
          } else {
            this.close();
          }
        }

        this.lastWindowWidth = window.innerWidth;
        this.lastWindowHeight = window.innerHeight;
      }
    }, {
      key: "_setupClasses",
      value: function _setupClasses() {
        if (this.options.edge === 'right') {
          this.el.classList.add('right-aligned');
          this.dragTarget.classList.add('right-aligned');
        }
      }
    }, {
      key: "_removeClasses",
      value: function _removeClasses() {
        this.el.classList.remove('right-aligned');
        this.dragTarget.classList.remove('right-aligned');
      }
    }, {
      key: "_setupFixed",
      value: function _setupFixed() {
        if (this._isCurrentlyFixed()) {
          this.open();
        }
      }
    }, {
      key: "_isCurrentlyFixed",
      value: function _isCurrentlyFixed() {
        return this.isFixed && window.innerWidth > 992;
      }
    }, {
      key: "_createDragTarget",
      value: function _createDragTarget() {
        var dragTarget = document.createElement('div');
        dragTarget.classList.add('drag-target');
        document.body.appendChild(dragTarget);
        this.dragTarget = dragTarget;
      }
    }, {
      key: "_preventBodyScrolling",
      value: function _preventBodyScrolling() {
        var body = document.body;
        body.style.overflow = 'hidden';
      }
    }, {
      key: "_enableBodyScrolling",
      value: function _enableBodyScrolling() {
        var body = document.body;
        body.style.overflow = '';
      }
    }, {
      key: "open",
      value: function open() {
        if (this.isOpen === true) {
          return;
        }

        this.isOpen = true;

        // Run onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el);
        }

        // Handle fixed Sidenav
        if (this._isCurrentlyFixed()) {
          anim.remove(this.el);
          anim({
            targets: this.el,
            translateX: 0,
            duration: 0,
            easing: 'easeOutQuad'
          });
          this._enableBodyScrolling();
          this._overlay.style.display = 'none';

          // Handle non-fixed Sidenav
        } else {
          if (this.options.preventScrolling) {
            this._preventBodyScrolling();
          }

          if (!this.isDragged || this.percentOpen != 1) {
            this._animateIn();
          }
        }
      }
    }, {
      key: "close",
      value: function close() {
        if (this.isOpen === false) {
          return;
        }

        this.isOpen = false;

        // Run onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        // Handle fixed Sidenav
        if (this._isCurrentlyFixed()) {
          var transformX = this.options.edge === 'left' ? '-105%' : '105%';
          this.el.style.transform = "translateX(" + transformX + ")";

          // Handle non-fixed Sidenav
        } else {
          this._enableBodyScrolling();

          if (!this.isDragged || this.percentOpen != 0) {
            this._animateOut();
          } else {
            this._overlay.style.display = 'none';
          }
        }
      }
    }, {
      key: "_animateIn",
      value: function _animateIn() {
        this._animateSidenavIn();
        this._animateOverlayIn();
      }
    }, {
      key: "_animateSidenavIn",
      value: function _animateSidenavIn() {
        var _this32 = this;

        var slideOutPercent = this.options.edge === 'left' ? -1 : 1;
        if (this.isDragged) {
          slideOutPercent = this.options.edge === 'left' ? slideOutPercent + this.percentOpen : slideOutPercent - this.percentOpen;
        }

        anim.remove(this.el);
        anim({
          targets: this.el,
          translateX: [slideOutPercent * 100 + "%", 0],
          duration: this.options.inDuration,
          easing: 'easeOutQuad',
          complete: function () {
            // Run onOpenEnd callback
            if (typeof _this32.options.onOpenEnd === 'function') {
              _this32.options.onOpenEnd.call(_this32, _this32.el);
            }
          }
        });
      }
    }, {
      key: "_animateOverlayIn",
      value: function _animateOverlayIn() {
        var start = 0;
        if (this.isDragged) {
          start = this.percentOpen;
        } else {
          $(this._overlay).css({
            display: 'block'
          });
        }

        anim.remove(this._overlay);
        anim({
          targets: this._overlay,
          opacity: [start, 1],
          duration: this.options.inDuration,
          easing: 'easeOutQuad'
        });
      }
    }, {
      key: "_animateOut",
      value: function _animateOut() {
        this._animateSidenavOut();
        this._animateOverlayOut();
      }
    }, {
      key: "_animateSidenavOut",
      value: function _animateSidenavOut() {
        var _this33 = this;

        var endPercent = this.options.edge === 'left' ? -1 : 1;
        var slideOutPercent = 0;
        if (this.isDragged) {
          slideOutPercent = this.options.edge === 'left' ? endPercent + this.percentOpen : endPercent - this.percentOpen;
        }

        anim.remove(this.el);
        anim({
          targets: this.el,
          translateX: [slideOutPercent * 100 + "%", endPercent * 105 + "%"],
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            // Run onOpenEnd callback
            if (typeof _this33.options.onCloseEnd === 'function') {
              _this33.options.onCloseEnd.call(_this33, _this33.el);
            }
          }
        });
      }
    }, {
      key: "_animateOverlayOut",
      value: function _animateOverlayOut() {
        var _this34 = this;

        anim.remove(this._overlay);
        anim({
          targets: this._overlay,
          opacity: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            $(_this34._overlay).css('display', 'none');
          }
        });
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Sidenav.__proto__ || Object.getPrototypeOf(Sidenav), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Sidenav;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Sidenav;
  }(Component);

  /**
   * @static
   * @memberof Sidenav
   * @type {Array.<Sidenav>}
   */


  Sidenav._sidenavs = [];

  M.Sidenav = Sidenav;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Sidenav, 'sidenav', 'M_Sidenav');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    throttle: 100,
    scrollOffset: 200, // offset - 200 allows elements near bottom of page to scroll
    activeClass: 'active',
    getActiveElement: function (id) {
      return 'a[href="#' + id + '"]';
    }
  };

  /**
   * @class
   *
   */

  var ScrollSpy = function (_Component9) {
    _inherits(ScrollSpy, _Component9);

    /**
     * Construct ScrollSpy instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function ScrollSpy(el, options) {
      _classCallCheck(this, ScrollSpy);

      var _this35 = _possibleConstructorReturn(this, (ScrollSpy.__proto__ || Object.getPrototypeOf(ScrollSpy)).call(this, ScrollSpy, el, options));

      _this35.el.M_ScrollSpy = _this35;

      /**
       * Options for the modal
       * @member Modal#options
       * @prop {Number} [throttle=100] - Throttle of scroll handler
       * @prop {Number} [scrollOffset=200] - Offset for centering element when scrolled to
       * @prop {String} [activeClass='active'] - Class applied to active elements
       * @prop {Function} [getActiveElement] - Used to find active element
       */
      _this35.options = $.extend({}, ScrollSpy.defaults, options);

      // setup
      ScrollSpy._elements.push(_this35);
      ScrollSpy._count++;
      ScrollSpy._increment++;
      _this35.tickId = -1;
      _this35.id = ScrollSpy._increment;
      _this35._setupEventHandlers();
      _this35._handleWindowScroll();
      return _this35;
    }

    _createClass(ScrollSpy, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        ScrollSpy._elements.splice(ScrollSpy._elements.indexOf(this), 1);
        ScrollSpy._elementsInView.splice(ScrollSpy._elementsInView.indexOf(this), 1);
        ScrollSpy._visibleElements.splice(ScrollSpy._visibleElements.indexOf(this.$el), 1);
        ScrollSpy._count--;
        this._removeEventHandlers();
        $(this.options.getActiveElement(this.$el.attr('id'))).removeClass(this.options.activeClass);
        this.el.M_ScrollSpy = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var throttledResize = M.throttle(this._handleWindowScroll, 200);
        this._handleThrottledResizeBound = throttledResize.bind(this);
        this._handleWindowScrollBound = this._handleWindowScroll.bind(this);
        if (ScrollSpy._count === 1) {
          window.addEventListener('scroll', this._handleWindowScrollBound);
          window.addEventListener('resize', this._handleThrottledResizeBound);
          document.body.addEventListener('click', this._handleTriggerClick);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (ScrollSpy._count === 0) {
          window.removeEventListener('scroll', this._handleWindowScrollBound);
          window.removeEventListener('resize', this._handleThrottledResizeBound);
          document.body.removeEventListener('click', this._handleTriggerClick);
        }
      }

      /**
       * Handle Trigger Click
       * @param {Event} e
       */

    }, {
      key: "_handleTriggerClick",
      value: function _handleTriggerClick(e) {
        var $trigger = $(e.target);
        for (var i = ScrollSpy._elements.length - 1; i >= 0; i--) {
          var scrollspy = ScrollSpy._elements[i];
          if ($trigger.is('a[href="#' + scrollspy.$el.attr('id') + '"]')) {
            e.preventDefault();
            var offset = scrollspy.$el.offset().top + 1;

            anim({
              targets: [document.documentElement, document.body],
              scrollTop: offset - scrollspy.options.scrollOffset,
              duration: 400,
              easing: 'easeOutCubic'
            });
            break;
          }
        }
      }

      /**
       * Handle Window Scroll
       */

    }, {
      key: "_handleWindowScroll",
      value: function _handleWindowScroll() {
        // unique tick id
        ScrollSpy._ticks++;

        // viewport rectangle
        var top = M.getDocumentScrollTop(),
            left = M.getDocumentScrollLeft(),
            right = left + window.innerWidth,
            bottom = top + window.innerHeight;

        // determine which elements are in view
        var intersections = ScrollSpy._findElements(top, right, bottom, left);
        for (var i = 0; i < intersections.length; i++) {
          var scrollspy = intersections[i];
          var lastTick = scrollspy.tickId;
          if (lastTick < 0) {
            // entered into view
            scrollspy._enter();
          }

          // update tick id
          scrollspy.tickId = ScrollSpy._ticks;
        }

        for (var _i = 0; _i < ScrollSpy._elementsInView.length; _i++) {
          var _scrollspy = ScrollSpy._elementsInView[_i];
          var _lastTick = _scrollspy.tickId;
          if (_lastTick >= 0 && _lastTick !== ScrollSpy._ticks) {
            // exited from view
            _scrollspy._exit();
            _scrollspy.tickId = -1;
          }
        }

        // remember elements in view for next tick
        ScrollSpy._elementsInView = intersections;
      }

      /**
       * Find elements that are within the boundary
       * @param {number} top
       * @param {number} right
       * @param {number} bottom
       * @param {number} left
       * @return {Array.<ScrollSpy>}   A collection of elements
       */

    }, {
      key: "_enter",
      value: function _enter() {
        ScrollSpy._visibleElements = ScrollSpy._visibleElements.filter(function (value) {
          return value.height() != 0;
        });

        if (ScrollSpy._visibleElements[0]) {
          $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).removeClass(this.options.activeClass);
          if (ScrollSpy._visibleElements[0][0].M_ScrollSpy && this.id < ScrollSpy._visibleElements[0][0].M_ScrollSpy.id) {
            ScrollSpy._visibleElements.unshift(this.$el);
          } else {
            ScrollSpy._visibleElements.push(this.$el);
          }
        } else {
          ScrollSpy._visibleElements.push(this.$el);
        }

        $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).addClass(this.options.activeClass);
      }
    }, {
      key: "_exit",
      value: function _exit() {
        var _this36 = this;

        ScrollSpy._visibleElements = ScrollSpy._visibleElements.filter(function (value) {
          return value.height() != 0;
        });

        if (ScrollSpy._visibleElements[0]) {
          $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).removeClass(this.options.activeClass);

          ScrollSpy._visibleElements = ScrollSpy._visibleElements.filter(function (el) {
            return el.attr('id') != _this36.$el.attr('id');
          });
          if (ScrollSpy._visibleElements[0]) {
            // Check if empty
            $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).addClass(this.options.activeClass);
          }
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(ScrollSpy.__proto__ || Object.getPrototypeOf(ScrollSpy), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_ScrollSpy;
      }
    }, {
      key: "_findElements",
      value: function _findElements(top, right, bottom, left) {
        var hits = [];
        for (var i = 0; i < ScrollSpy._elements.length; i++) {
          var scrollspy = ScrollSpy._elements[i];
          var currTop = top + scrollspy.options.scrollOffset || 200;

          if (scrollspy.$el.height() > 0) {
            var elTop = scrollspy.$el.offset().top,
                elLeft = scrollspy.$el.offset().left,
                elRight = elLeft + scrollspy.$el.width(),
                elBottom = elTop + scrollspy.$el.height();

            var isIntersect = !(elLeft > right || elRight < left || elTop > bottom || elBottom < currTop);

            if (isIntersect) {
              hits.push(scrollspy);
            }
          }
        }
        return hits;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return ScrollSpy;
  }(Component);

  /**
   * @static
   * @memberof ScrollSpy
   * @type {Array.<ScrollSpy>}
   */


  ScrollSpy._elements = [];

  /**
   * @static
   * @memberof ScrollSpy
   * @type {Array.<ScrollSpy>}
   */
  ScrollSpy._elementsInView = [];

  /**
   * @static
   * @memberof ScrollSpy
   * @type {Array.<cash>}
   */
  ScrollSpy._visibleElements = [];

  /**
   * @static
   * @memberof ScrollSpy
   */
  ScrollSpy._count = 0;

  /**
   * @static
   * @memberof ScrollSpy
   */
  ScrollSpy._increment = 0;

  /**
   * @static
   * @memberof ScrollSpy
   */
  ScrollSpy._ticks = 0;

  M.ScrollSpy = ScrollSpy;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(ScrollSpy, 'scrollSpy', 'M_ScrollSpy');
  }
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    data: {}, // Autocomplete data set
    limit: Infinity, // Limit of results the autocomplete shows
    onAutocomplete: null, // Callback for when autocompleted
    minLength: 1, // Min characters before autocomplete starts
    sortFunction: function (a, b, inputString) {
      // Sort function for sorting autocomplete results
      return a.indexOf(inputString) - b.indexOf(inputString);
    }
  };

  /**
   * @class
   *
   */

  var Autocomplete = function (_Component10) {
    _inherits(Autocomplete, _Component10);

    /**
     * Construct Autocomplete instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Autocomplete(el, options) {
      _classCallCheck(this, Autocomplete);

      var _this37 = _possibleConstructorReturn(this, (Autocomplete.__proto__ || Object.getPrototypeOf(Autocomplete)).call(this, Autocomplete, el, options));

      _this37.el.M_Autocomplete = _this37;

      /**
       * Options for the autocomplete
       * @member Autocomplete#options
       * @prop {Number} duration
       * @prop {Number} dist
       * @prop {number} shift
       * @prop {number} padding
       * @prop {Boolean} fullWidth
       * @prop {Boolean} indicators
       * @prop {Boolean} noWrap
       * @prop {Function} onCycleTo
       */
      _this37.options = $.extend({}, Autocomplete.defaults, options);

      // Setup
      _this37.isOpen = false;
      _this37.count = 0;
      _this37.activeIndex = -1;
      _this37.oldVal;
      _this37.$inputField = _this37.$el.closest('.input-field');
      _this37.$active = $();
      _this37._mousedown = false;
      _this37._setupDropdown();

      _this37._setupEventHandlers();
      return _this37;
    }

    _createClass(Autocomplete, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._removeDropdown();
        this.el.M_Autocomplete = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleInputBlurBound = this._handleInputBlur.bind(this);
        this._handleInputKeyupAndFocusBound = this._handleInputKeyupAndFocus.bind(this);
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);
        this._handleContainerMousedownAndTouchstartBound = this._handleContainerMousedownAndTouchstart.bind(this);
        this._handleContainerMouseupAndTouchendBound = this._handleContainerMouseupAndTouchend.bind(this);

        this.el.addEventListener('blur', this._handleInputBlurBound);
        this.el.addEventListener('keyup', this._handleInputKeyupAndFocusBound);
        this.el.addEventListener('focus', this._handleInputKeyupAndFocusBound);
        this.el.addEventListener('keydown', this._handleInputKeydownBound);
        this.el.addEventListener('click', this._handleInputClickBound);
        this.container.addEventListener('mousedown', this._handleContainerMousedownAndTouchstartBound);
        this.container.addEventListener('mouseup', this._handleContainerMouseupAndTouchendBound);

        if (typeof window.ontouchstart !== 'undefined') {
          this.container.addEventListener('touchstart', this._handleContainerMousedownAndTouchstartBound);
          this.container.addEventListener('touchend', this._handleContainerMouseupAndTouchendBound);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('blur', this._handleInputBlurBound);
        this.el.removeEventListener('keyup', this._handleInputKeyupAndFocusBound);
        this.el.removeEventListener('focus', this._handleInputKeyupAndFocusBound);
        this.el.removeEventListener('keydown', this._handleInputKeydownBound);
        this.el.removeEventListener('click', this._handleInputClickBound);
        this.container.removeEventListener('mousedown', this._handleContainerMousedownAndTouchstartBound);
        this.container.removeEventListener('mouseup', this._handleContainerMouseupAndTouchendBound);

        if (typeof window.ontouchstart !== 'undefined') {
          this.container.removeEventListener('touchstart', this._handleContainerMousedownAndTouchstartBound);
          this.container.removeEventListener('touchend', this._handleContainerMouseupAndTouchendBound);
        }
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_setupDropdown",
      value: function _setupDropdown() {
        var _this38 = this;

        this.container = document.createElement('ul');
        this.container.id = "autocomplete-options-" + M.guid();
        $(this.container).addClass('autocomplete-content dropdown-content');
        this.$inputField.append(this.container);
        this.el.setAttribute('data-target', this.container.id);

        this.dropdown = M.Dropdown.init(this.el, {
          autoFocus: false,
          closeOnClick: false,
          coverTrigger: false,
          onItemClick: function (itemEl) {
            _this38.selectOption($(itemEl));
          }
        });

        // Sketchy removal of dropdown click handler
        this.el.removeEventListener('click', this.dropdown._handleClickBound);
      }

      /**
       * Remove dropdown
       */

    }, {
      key: "_removeDropdown",
      value: function _removeDropdown() {
        this.container.parentNode.removeChild(this.container);
      }

      /**
       * Handle Input Blur
       */

    }, {
      key: "_handleInputBlur",
      value: function _handleInputBlur() {
        if (!this._mousedown) {
          this.close();
          this._resetAutocomplete();
        }
      }

      /**
       * Handle Input Keyup and Focus
       * @param {Event} e
       */

    }, {
      key: "_handleInputKeyupAndFocus",
      value: function _handleInputKeyupAndFocus(e) {
        if (e.type === 'keyup') {
          Autocomplete._keydown = false;
        }

        this.count = 0;
        var val = this.el.value.toLowerCase();

        // Don't capture enter or arrow key usage.
        if (e.keyCode === 13 || e.keyCode === 38 || e.keyCode === 40) {
          return;
        }

        // Check if the input isn't empty
        // Check if focus triggered by tab
        if (this.oldVal !== val && (M.tabPressed || e.type !== 'focus')) {
          this.open();
        }

        // Update oldVal
        this.oldVal = val;
      }

      /**
       * Handle Input Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        Autocomplete._keydown = true;

        // Arrow keys and enter key usage
        var keyCode = e.keyCode,
            liElement = void 0,
            numItems = $(this.container).children('li').length;

        // select element on Enter
        if (keyCode === M.keys.ENTER && this.activeIndex >= 0) {
          liElement = $(this.container).children('li').eq(this.activeIndex);
          if (liElement.length) {
            this.selectOption(liElement);
            e.preventDefault();
          }
          return;
        }

        // Capture up and down key
        if (keyCode === M.keys.ARROW_UP || keyCode === M.keys.ARROW_DOWN) {
          e.preventDefault();

          if (keyCode === M.keys.ARROW_UP && this.activeIndex > 0) {
            this.activeIndex--;
          }

          if (keyCode === M.keys.ARROW_DOWN && this.activeIndex < numItems - 1) {
            this.activeIndex++;
          }

          this.$active.removeClass('active');
          if (this.activeIndex >= 0) {
            this.$active = $(this.container).children('li').eq(this.activeIndex);
            this.$active.addClass('active');
          }
        }
      }

      /**
       * Handle Input Click
       * @param {Event} e
       */

    }, {
      key: "_handleInputClick",
      value: function _handleInputClick(e) {
        this.open();
      }

      /**
       * Handle Container Mousedown and Touchstart
       * @param {Event} e
       */

    }, {
      key: "_handleContainerMousedownAndTouchstart",
      value: function _handleContainerMousedownAndTouchstart(e) {
        this._mousedown = true;
      }

      /**
       * Handle Container Mouseup and Touchend
       * @param {Event} e
       */

    }, {
      key: "_handleContainerMouseupAndTouchend",
      value: function _handleContainerMouseupAndTouchend(e) {
        this._mousedown = false;
      }

      /**
       * Highlight partial match
       */

    }, {
      key: "_highlight",
      value: function _highlight(string, $el) {
        var img = $el.find('img');
        var matchStart = $el.text().toLowerCase().indexOf('' + string.toLowerCase() + ''),
            matchEnd = matchStart + string.length - 1,
            beforeMatch = $el.text().slice(0, matchStart),
            matchText = $el.text().slice(matchStart, matchEnd + 1),
            afterMatch = $el.text().slice(matchEnd + 1);
        $el.html("<span>" + beforeMatch + "<span class='highlight'>" + matchText + "</span>" + afterMatch + "</span>");
        if (img.length) {
          $el.prepend(img);
        }
      }

      /**
       * Reset current element position
       */

    }, {
      key: "_resetCurrentElement",
      value: function _resetCurrentElement() {
        this.activeIndex = -1;
        this.$active.removeClass('active');
      }

      /**
       * Reset autocomplete elements
       */

    }, {
      key: "_resetAutocomplete",
      value: function _resetAutocomplete() {
        $(this.container).empty();
        this._resetCurrentElement();
        this.oldVal = null;
        this.isOpen = false;
        this._mousedown = false;
      }

      /**
       * Select autocomplete option
       * @param {Element} el  Autocomplete option list item element
       */

    }, {
      key: "selectOption",
      value: function selectOption(el) {
        var text = el.text().trim();
        this.el.value = text;
        this.$el.trigger('change');
        this._resetAutocomplete();
        this.close();

        // Handle onAutocomplete callback.
        if (typeof this.options.onAutocomplete === 'function') {
          this.options.onAutocomplete.call(this, text);
        }
      }

      /**
       * Render dropdown content
       * @param {Object} data  data set
       * @param {String} val  current input value
       */

    }, {
      key: "_renderDropdown",
      value: function _renderDropdown(data, val) {
        var _this39 = this;

        this._resetAutocomplete();

        var matchingData = [];

        // Gather all matching data
        for (var key in data) {
          if (data.hasOwnProperty(key) && key.toLowerCase().indexOf(val) !== -1) {
            // Break if past limit
            if (this.count >= this.options.limit) {
              break;
            }

            var entry = {
              data: data[key],
              key: key
            };
            matchingData.push(entry);

            this.count++;
          }
        }

        // Sort
        if (this.options.sortFunction) {
          var sortFunctionBound = function (a, b) {
            return _this39.options.sortFunction(a.key.toLowerCase(), b.key.toLowerCase(), val.toLowerCase());
          };
          matchingData.sort(sortFunctionBound);
        }

        // Render
        for (var i = 0; i < matchingData.length; i++) {
          var _entry = matchingData[i];
          var $autocompleteOption = $('<li></li>');
          if (!!_entry.data) {
            $autocompleteOption.append("<img src=\"" + _entry.data + "\" class=\"right circle\"><span>" + _entry.key + "</span>");
          } else {
            $autocompleteOption.append('<span>' + _entry.key + '</span>');
          }

          $(this.container).append($autocompleteOption);
          this._highlight(val, $autocompleteOption);
        }
      }

      /**
       * Open Autocomplete Dropdown
       */

    }, {
      key: "open",
      value: function open() {
        var val = this.el.value.toLowerCase();

        this._resetAutocomplete();

        if (val.length >= this.options.minLength) {
          this.isOpen = true;
          this._renderDropdown(this.options.data, val);
        }

        // Open dropdown
        if (!this.dropdown.isOpen) {
          this.dropdown.open();
        } else {
          // Recalculate dropdown when its already open
          this.dropdown.recalculateDimensions();
        }
      }

      /**
       * Close Autocomplete Dropdown
       */

    }, {
      key: "close",
      value: function close() {
        this.dropdown.close();
      }

      /**
       * Update Data
       * @param {Object} data
       */

    }, {
      key: "updateData",
      value: function updateData(data) {
        var val = this.el.value.toLowerCase();
        this.options.data = data;

        if (this.isOpen) {
          this._renderDropdown(data, val);
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Autocomplete.__proto__ || Object.getPrototypeOf(Autocomplete), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Autocomplete;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Autocomplete;
  }(Component);

  /**
   * @static
   * @memberof Autocomplete
   */


  Autocomplete._keydown = false;

  M.Autocomplete = Autocomplete;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Autocomplete, 'autocomplete', 'M_Autocomplete');
  }
})(cash);
;(function ($) {
  // Function to update labels of text fields
  M.updateTextFields = function () {
    var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea';
    $(input_selector).each(function (element, index) {
      var $this = $(this);
      if (element.value.length > 0 || $(element).is(':focus') || element.autofocus || $this.attr('placeholder') !== null) {
        $this.siblings('label').addClass('active');
      } else if (element.validity) {
        $this.siblings('label').toggleClass('active', element.validity.badInput === true);
      } else {
        $this.siblings('label').removeClass('active');
      }
    });
  };

  M.validate_field = function (object) {
    var hasLength = object.attr('data-length') !== null;
    var lenAttr = parseInt(object.attr('data-length'));
    var len = object[0].value.length;

    if (len === 0 && object[0].validity.badInput === false && !object.is(':required')) {
      if (object.hasClass('validate')) {
        object.removeClass('valid');
        object.removeClass('invalid');
      }
    } else {
      if (object.hasClass('validate')) {
        // Check for character counter attributes
        if (object.is(':valid') && hasLength && len <= lenAttr || object.is(':valid') && !hasLength) {
          object.removeClass('invalid');
          object.addClass('valid');
        } else {
          object.removeClass('valid');
          object.addClass('invalid');
        }
      }
    }
  };

  M.textareaAutoResize = function ($textarea) {
    // Wrap if native element
    if ($textarea instanceof Element) {
      $textarea = $($textarea);
    }

    if (!$textarea.length) {
      console.error('No textarea element found');
      return;
    }

    // Textarea Auto Resize
    var hiddenDiv = $('.hiddendiv').first();
    if (!hiddenDiv.length) {
      hiddenDiv = $('<div class="hiddendiv common"></div>');
      $('body').append(hiddenDiv);
    }

    // Set font properties of hiddenDiv
    var fontFamily = $textarea.css('font-family');
    var fontSize = $textarea.css('font-size');
    var lineHeight = $textarea.css('line-height');

    // Firefox can't handle padding shorthand.
    var paddingTop = $textarea.css('padding-top');
    var paddingRight = $textarea.css('padding-right');
    var paddingBottom = $textarea.css('padding-bottom');
    var paddingLeft = $textarea.css('padding-left');

    if (fontSize) {
      hiddenDiv.css('font-size', fontSize);
    }
    if (fontFamily) {
      hiddenDiv.css('font-family', fontFamily);
    }
    if (lineHeight) {
      hiddenDiv.css('line-height', lineHeight);
    }
    if (paddingTop) {
      hiddenDiv.css('padding-top', paddingTop);
    }
    if (paddingRight) {
      hiddenDiv.css('padding-right', paddingRight);
    }
    if (paddingBottom) {
      hiddenDiv.css('padding-bottom', paddingBottom);
    }
    if (paddingLeft) {
      hiddenDiv.css('padding-left', paddingLeft);
    }

    // Set original-height, if none
    if (!$textarea.data('original-height')) {
      $textarea.data('original-height', $textarea.height());
    }

    if ($textarea.attr('wrap') === 'off') {
      hiddenDiv.css('overflow-wrap', 'normal').css('white-space', 'pre');
    }

    hiddenDiv.text($textarea[0].value + '\n');
    var content = hiddenDiv.html().replace(/\n/g, '<br>');
    hiddenDiv.html(content);

    // When textarea is hidden, width goes crazy.
    // Approximate with half of window size

    if ($textarea[0].offsetWidth > 0 && $textarea[0].offsetHeight > 0) {
      hiddenDiv.css('width', $textarea.width() + 'px');
    } else {
      hiddenDiv.css('width', window.innerWidth / 2 + 'px');
    }

    /**
     * Resize if the new height is greater than the
     * original height of the textarea
     */
    if ($textarea.data('original-height') <= hiddenDiv.innerHeight()) {
      $textarea.css('height', hiddenDiv.innerHeight() + 'px');
    } else if ($textarea[0].value.length < $textarea.data('previous-length')) {
      /**
       * In case the new height is less than original height, it
       * means the textarea has less text than before
       * So we set the height to the original one
       */
      $textarea.css('height', $textarea.data('original-height') + 'px');
    }
    $textarea.data('previous-length', $textarea[0].value.length);
  };

  $(document).ready(function () {
    // Text based inputs
    var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea';

    // Add active if form auto complete
    $(document).on('change', input_selector, function () {
      if (this.value.length !== 0 || $(this).attr('placeholder') !== null) {
        $(this).siblings('label').addClass('active');
      }
      M.validate_field($(this));
    });

    // Add active if input element has been pre-populated on document ready
    $(document).ready(function () {
      M.updateTextFields();
    });

    // HTML DOM FORM RESET handling
    $(document).on('reset', function (e) {
      var formReset = $(e.target);
      if (formReset.is('form')) {
        formReset.find(input_selector).removeClass('valid').removeClass('invalid');
        formReset.find(input_selector).each(function (e) {
          if (this.value.length) {
            $(this).siblings('label').removeClass('active');
          }
        });

        // Reset select (after native reset)
        setTimeout(function () {
          formReset.find('select').each(function () {
            // check if initialized
            if (this.M_FormSelect) {
              $(this).trigger('change');
            }
          });
        }, 0);
      }
    });

    /**
     * Add active when element has focus
     * @param {Event} e
     */
    document.addEventListener('focus', function (e) {
      if ($(e.target).is(input_selector)) {
        $(e.target).siblings('label, .prefix').addClass('active');
      }
    }, true);

    /**
     * Remove active when element is blurred
     * @param {Event} e
     */
    document.addEventListener('blur', function (e) {
      var $inputElement = $(e.target);
      if ($inputElement.is(input_selector)) {
        var selector = '.prefix';

        if ($inputElement[0].value.length === 0 && $inputElement[0].validity.badInput !== true && $inputElement.attr('placeholder') === null) {
          selector += ', label';
        }
        $inputElement.siblings(selector).removeClass('active');
        M.validate_field($inputElement);
      }
    }, true);

    // Radio and Checkbox focus class
    var radio_checkbox = 'input[type=radio], input[type=checkbox]';
    $(document).on('keyup', radio_checkbox, function (e) {
      // TAB, check if tabbing to radio or checkbox.
      if (e.which === M.keys.TAB) {
        $(this).addClass('tabbed');
        var $this = $(this);
        $this.one('blur', function (e) {
          $(this).removeClass('tabbed');
        });
        return;
      }
    });

    var text_area_selector = '.materialize-textarea';
    $(text_area_selector).each(function () {
      var $textarea = $(this);
      /**
       * Resize textarea on document load after storing
       * the original height and the original length
       */
      $textarea.data('original-height', $textarea.height());
      $textarea.data('previous-length', this.value.length);
      M.textareaAutoResize($textarea);
    });

    $(document).on('keyup', text_area_selector, function () {
      M.textareaAutoResize($(this));
    });
    $(document).on('keydown', text_area_selector, function () {
      M.textareaAutoResize($(this));
    });

    // File Input Path
    $(document).on('change', '.file-field input[type="file"]', function () {
      var file_field = $(this).closest('.file-field');
      var path_input = file_field.find('input.file-path');
      var files = $(this)[0].files;
      var file_names = [];
      for (var i = 0; i < files.length; i++) {
        file_names.push(files[i].name);
      }
      path_input[0].value = file_names.join(', ');
      path_input.trigger('change');
    });
  }); // End of $(document).ready
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    indicators: true,
    height: 400,
    duration: 500,
    interval: 6000
  };

  /**
   * @class
   *
   */

  var Slider = function (_Component11) {
    _inherits(Slider, _Component11);

    /**
     * Construct Slider instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Slider(el, options) {
      _classCallCheck(this, Slider);

      var _this40 = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this, Slider, el, options));

      _this40.el.M_Slider = _this40;

      /**
       * Options for the modal
       * @member Slider#options
       * @prop {Boolean} [indicators=true] - Show indicators
       * @prop {Number} [height=400] - height of slider
       * @prop {Number} [duration=500] - Length in ms of slide transition
       * @prop {Number} [interval=6000] - Length in ms of slide interval
       */
      _this40.options = $.extend({}, Slider.defaults, options);

      // setup
      _this40.$slider = _this40.$el.find('.slides');
      _this40.$slides = _this40.$slider.children('li');
      _this40.activeIndex = _this40.$slides.filter(function (item) {
        return $(item).hasClass('active');
      }).first().index();
      if (_this40.activeIndex != -1) {
        _this40.$active = _this40.$slides.eq(_this40.activeIndex);
      }

      _this40._setSliderHeight();

      // Set initial positions of captions
      _this40.$slides.find('.caption').each(function (el) {
        _this40._animateCaptionIn(el, 0);
      });

      // Move img src into background-image
      _this40.$slides.find('img').each(function (el) {
        var placeholderBase64 = 'data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
        if ($(el).attr('src') !== placeholderBase64) {
          $(el).css('background-image', 'url("' + $(el).attr('src') + '")');
          $(el).attr('src', placeholderBase64);
        }
      });

      _this40._setupIndicators();

      // Show active slide
      if (_this40.$active) {
        _this40.$active.css('display', 'block');
      } else {
        _this40.$slides.first().addClass('active');
        anim({
          targets: _this40.$slides.first()[0],
          opacity: 1,
          duration: _this40.options.duration,
          easing: 'easeOutQuad'
        });

        _this40.activeIndex = 0;
        _this40.$active = _this40.$slides.eq(_this40.activeIndex);

        // Update indicators
        if (_this40.options.indicators) {
          _this40.$indicators.eq(_this40.activeIndex).addClass('active');
        }
      }

      // Adjust height to current slide
      _this40.$active.find('img').each(function (el) {
        anim({
          targets: _this40.$active.find('.caption')[0],
          opacity: 1,
          translateX: 0,
          translateY: 0,
          duration: _this40.options.duration,
          easing: 'easeOutQuad'
        });
      });

      _this40._setupEventHandlers();

      // auto scroll
      _this40.start();
      return _this40;
    }

    _createClass(Slider, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this.pause();
        this._removeIndicators();
        this._removeEventHandlers();
        this.el.M_Slider = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this41 = this;

        this._handleIntervalBound = this._handleInterval.bind(this);
        this._handleIndicatorClickBound = this._handleIndicatorClick.bind(this);

        if (this.options.indicators) {
          this.$indicators.each(function (el) {
            el.addEventListener('click', _this41._handleIndicatorClickBound);
          });
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this42 = this;

        if (this.options.indicators) {
          this.$indicators.each(function (el) {
            el.removeEventListener('click', _this42._handleIndicatorClickBound);
          });
        }
      }

      /**
       * Handle indicator click
       * @param {Event} e
       */

    }, {
      key: "_handleIndicatorClick",
      value: function _handleIndicatorClick(e) {
        var currIndex = $(e.target).index();
        this.set(currIndex);
      }

      /**
       * Handle Interval
       */

    }, {
      key: "_handleInterval",
      value: function _handleInterval() {
        var newActiveIndex = this.$slider.find('.active').index();
        if (this.$slides.length === newActiveIndex + 1) newActiveIndex = 0;
        // loop to start
        else newActiveIndex += 1;

        this.set(newActiveIndex);
      }

      /**
       * Animate in caption
       * @param {Element} caption
       * @param {Number} duration
       */

    }, {
      key: "_animateCaptionIn",
      value: function _animateCaptionIn(caption, duration) {
        var animOptions = {
          targets: caption,
          opacity: 0,
          duration: duration,
          easing: 'easeOutQuad'
        };

        if ($(caption).hasClass('center-align')) {
          animOptions.translateY = -100;
        } else if ($(caption).hasClass('right-align')) {
          animOptions.translateX = 100;
        } else if ($(caption).hasClass('left-align')) {
          animOptions.translateX = -100;
        }

        anim(animOptions);
      }

      /**
       * Set height of slider
       */

    }, {
      key: "_setSliderHeight",
      value: function _setSliderHeight() {
        // If fullscreen, do nothing
        if (!this.$el.hasClass('fullscreen')) {
          if (this.options.indicators) {
            // Add height if indicators are present
            this.$el.css('height', this.options.height + 40 + 'px');
          } else {
            this.$el.css('height', this.options.height + 'px');
          }
          this.$slider.css('height', this.options.height + 'px');
        }
      }

      /**
       * Setup indicators
       */

    }, {
      key: "_setupIndicators",
      value: function _setupIndicators() {
        var _this43 = this;

        if (this.options.indicators) {
          this.$indicators = $('<ul class="indicators"></ul>');
          this.$slides.each(function (el, index) {
            var $indicator = $('<li class="indicator-item"></li>');
            _this43.$indicators.append($indicator[0]);
          });
          this.$el.append(this.$indicators[0]);
          this.$indicators = this.$indicators.children('li.indicator-item');
        }
      }

      /**
       * Remove indicators
       */

    }, {
      key: "_removeIndicators",
      value: function _removeIndicators() {
        this.$el.find('ul.indicators').remove();
      }

      /**
       * Cycle to nth item
       * @param {Number} index
       */

    }, {
      key: "set",
      value: function set(index) {
        var _this44 = this;

        // Wrap around indices.
        if (index >= this.$slides.length) index = 0;else if (index < 0) index = this.$slides.length - 1;

        // Only do if index changes
        if (this.activeIndex != index) {
          this.$active = this.$slides.eq(this.activeIndex);
          var $caption = this.$active.find('.caption');
          this.$active.removeClass('active');

          anim({
            targets: this.$active[0],
            opacity: 0,
            duration: this.options.duration,
            easing: 'easeOutQuad',
            complete: function () {
              _this44.$slides.not('.active').each(function (el) {
                anim({
                  targets: el,
                  opacity: 0,
                  translateX: 0,
                  translateY: 0,
                  duration: 0,
                  easing: 'easeOutQuad'
                });
              });
            }
          });

          this._animateCaptionIn($caption[0], this.options.duration);

          // Update indicators
          if (this.options.indicators) {
            this.$indicators.eq(this.activeIndex).removeClass('active');
            this.$indicators.eq(index).addClass('active');
          }

          anim({
            targets: this.$slides.eq(index)[0],
            opacity: 1,
            duration: this.options.duration,
            easing: 'easeOutQuad'
          });

          anim({
            targets: this.$slides.eq(index).find('.caption')[0],
            opacity: 1,
            translateX: 0,
            translateY: 0,
            duration: this.options.duration,
            delay: this.options.duration,
            easing: 'easeOutQuad'
          });

          this.$slides.eq(index).addClass('active');
          this.activeIndex = index;

          // Reset interval
          this.start();
        }
      }

      /**
       * Pause slider interval
       */

    }, {
      key: "pause",
      value: function pause() {
        clearInterval(this.interval);
      }

      /**
       * Start slider interval
       */

    }, {
      key: "start",
      value: function start() {
        clearInterval(this.interval);
        this.interval = setInterval(this._handleIntervalBound, this.options.duration + this.options.interval);
      }

      /**
       * Move to next slide
       */

    }, {
      key: "next",
      value: function next() {
        var newIndex = this.activeIndex + 1;

        // Wrap around indices.
        if (newIndex >= this.$slides.length) newIndex = 0;else if (newIndex < 0) newIndex = this.$slides.length - 1;

        this.set(newIndex);
      }

      /**
       * Move to previous slide
       */

    }, {
      key: "prev",
      value: function prev() {
        var newIndex = this.activeIndex - 1;

        // Wrap around indices.
        if (newIndex >= this.$slides.length) newIndex = 0;else if (newIndex < 0) newIndex = this.$slides.length - 1;

        this.set(newIndex);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Slider.__proto__ || Object.getPrototypeOf(Slider), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Slider;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Slider;
  }(Component);

  M.Slider = Slider;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Slider, 'slider', 'M_Slider');
  }
})(cash, M.anime);
;(function ($, anim) {
  $(document).on('click', '.card', function (e) {
    if ($(this).children('.card-reveal').length) {
      var $card = $(e.target).closest('.card');
      if ($card.data('initialOverflow') === undefined) {
        $card.data('initialOverflow', $card.css('overflow') === undefined ? '' : $card.css('overflow'));
      }
      var $cardReveal = $(this).find('.card-reveal');
      if ($(e.target).is($('.card-reveal .card-title')) || $(e.target).is($('.card-reveal .card-title i'))) {
        // Make Reveal animate down and display none
        anim({
          targets: $cardReveal[0],
          translateY: 0,
          duration: 225,
          easing: 'easeInOutQuad',
          complete: function (anim) {
            var el = anim.animatables[0].target;
            $(el).css({ display: 'none' });
            $card.css('overflow', $card.data('initialOverflow'));
          }
        });
      } else if ($(e.target).is($('.card .activator')) || $(e.target).is($('.card .activator i'))) {
        $card.css('overflow', 'hidden');
        $cardReveal.css({ display: 'block' });
        anim({
          targets: $cardReveal[0],
          translateY: '-100%',
          duration: 300,
          easing: 'easeInOutQuad'
        });
      }
    }
  });
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    data: [],
    placeholder: '',
    secondaryPlaceholder: '',
    autocompleteOptions: {},
    limit: Infinity,
    onChipAdd: null,
    onChipSelect: null,
    onChipDelete: null
  };

  /**
   * @typedef {Object} chip
   * @property {String} tag  chip tag string
   * @property {String} [image]  chip avatar image string
   */

  /**
   * @class
   *
   */

  var Chips = function (_Component12) {
    _inherits(Chips, _Component12);

    /**
     * Construct Chips instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Chips(el, options) {
      _classCallCheck(this, Chips);

      var _this45 = _possibleConstructorReturn(this, (Chips.__proto__ || Object.getPrototypeOf(Chips)).call(this, Chips, el, options));

      _this45.el.M_Chips = _this45;

      /**
       * Options for the modal
       * @member Chips#options
       * @prop {Array} data
       * @prop {String} placeholder
       * @prop {String} secondaryPlaceholder
       * @prop {Object} autocompleteOptions
       */
      _this45.options = $.extend({}, Chips.defaults, options);

      _this45.$el.addClass('chips input-field');
      _this45.chipsData = [];
      _this45.$chips = $();
      _this45._setupInput();
      _this45.hasAutocomplete = Object.keys(_this45.options.autocompleteOptions).length > 0;

      // Set input id
      if (!_this45.$input.attr('id')) {
        _this45.$input.attr('id', M.guid());
      }

      // Render initial chips
      if (_this45.options.data.length) {
        _this45.chipsData = _this45.options.data;
        _this45._renderChips(_this45.chipsData);
      }

      // Setup autocomplete if needed
      if (_this45.hasAutocomplete) {
        _this45._setupAutocomplete();
      }

      _this45._setPlaceholder();
      _this45._setupLabel();
      _this45._setupEventHandlers();
      return _this45;
    }

    _createClass(Chips, [{
      key: "getData",


      /**
       * Get Chips Data
       */
      value: function getData() {
        return this.chipsData;
      }

      /**
       * Teardown component
       */

    }, {
      key: "destroy",
      value: function destroy() {
        this._removeEventHandlers();
        this.$chips.remove();
        this.el.M_Chips = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleChipClickBound = this._handleChipClick.bind(this);
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputFocusBound = this._handleInputFocus.bind(this);
        this._handleInputBlurBound = this._handleInputBlur.bind(this);

        this.el.addEventListener('click', this._handleChipClickBound);
        document.addEventListener('keydown', Chips._handleChipsKeydown);
        document.addEventListener('keyup', Chips._handleChipsKeyup);
        this.el.addEventListener('blur', Chips._handleChipsBlur, true);
        this.$input[0].addEventListener('focus', this._handleInputFocusBound);
        this.$input[0].addEventListener('blur', this._handleInputBlurBound);
        this.$input[0].addEventListener('keydown', this._handleInputKeydownBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleChipClickBound);
        document.removeEventListener('keydown', Chips._handleChipsKeydown);
        document.removeEventListener('keyup', Chips._handleChipsKeyup);
        this.el.removeEventListener('blur', Chips._handleChipsBlur, true);
        this.$input[0].removeEventListener('focus', this._handleInputFocusBound);
        this.$input[0].removeEventListener('blur', this._handleInputBlurBound);
        this.$input[0].removeEventListener('keydown', this._handleInputKeydownBound);
      }

      /**
       * Handle Chip Click
       * @param {Event} e
       */

    }, {
      key: "_handleChipClick",
      value: function _handleChipClick(e) {
        var $chip = $(e.target).closest('.chip');
        var clickedClose = $(e.target).is('.close');
        if ($chip.length) {
          var index = $chip.index();
          if (clickedClose) {
            // delete chip
            this.deleteChip(index);
            this.$input[0].focus();
          } else {
            // select chip
            this.selectChip(index);
          }

          // Default handle click to focus on input
        } else {
          this.$input[0].focus();
        }
      }

      /**
       * Handle Chips Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleInputFocus",


      /**
       * Handle Input Focus
       */
      value: function _handleInputFocus() {
        this.$el.addClass('focus');
      }

      /**
       * Handle Input Blur
       */

    }, {
      key: "_handleInputBlur",
      value: function _handleInputBlur() {
        this.$el.removeClass('focus');
      }

      /**
       * Handle Input Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        Chips._keydown = true;

        // enter
        if (e.keyCode === 13) {
          // Override enter if autocompleting.
          if (this.hasAutocomplete && this.autocomplete && this.autocomplete.isOpen) {
            return;
          }

          e.preventDefault();
          this.addChip({
            tag: this.$input[0].value
          });
          this.$input[0].value = '';

          // delete or left
        } else if ((e.keyCode === 8 || e.keyCode === 37) && this.$input[0].value === '' && this.chipsData.length) {
          e.preventDefault();
          this.selectChip(this.chipsData.length - 1);
        }
      }

      /**
       * Render Chip
       * @param {chip} chip
       * @return {Element}
       */

    }, {
      key: "_renderChip",
      value: function _renderChip(chip) {
        if (!chip.tag) {
          return;
        }

        var renderedChip = document.createElement('div');
        var closeIcon = document.createElement('i');
        renderedChip.classList.add('chip');
        renderedChip.textContent = chip.tag;
        renderedChip.setAttribute('tabindex', 0);
        $(closeIcon).addClass('material-icons close');
        closeIcon.textContent = 'close';

        // attach image if needed
        if (chip.image) {
          var img = document.createElement('img');
          img.setAttribute('src', chip.image);
          renderedChip.insertBefore(img, renderedChip.firstChild);
        }

        renderedChip.appendChild(closeIcon);
        return renderedChip;
      }

      /**
       * Render Chips
       */

    }, {
      key: "_renderChips",
      value: function _renderChips() {
        this.$chips.remove();
        for (var i = 0; i < this.chipsData.length; i++) {
          var chipEl = this._renderChip(this.chipsData[i]);
          this.$el.append(chipEl);
          this.$chips.add(chipEl);
        }

        // move input to end
        this.$el.append(this.$input[0]);
      }

      /**
       * Setup Autocomplete
       */

    }, {
      key: "_setupAutocomplete",
      value: function _setupAutocomplete() {
        var _this46 = this;

        this.options.autocompleteOptions.onAutocomplete = function (val) {
          _this46.addChip({
            tag: val
          });
          _this46.$input[0].value = '';
          _this46.$input[0].focus();
        };

        this.autocomplete = M.Autocomplete.init(this.$input[0], this.options.autocompleteOptions);
      }

      /**
       * Setup Input
       */

    }, {
      key: "_setupInput",
      value: function _setupInput() {
        this.$input = this.$el.find('input');
        if (!this.$input.length) {
          this.$input = $('<input></input>');
          this.$el.append(this.$input);
        }

        this.$input.addClass('input');
      }

      /**
       * Setup Label
       */

    }, {
      key: "_setupLabel",
      value: function _setupLabel() {
        this.$label = this.$el.find('label');
        if (this.$label.length) {
          this.$label.setAttribute('for', this.$input.attr('id'));
        }
      }

      /**
       * Set placeholder
       */

    }, {
      key: "_setPlaceholder",
      value: function _setPlaceholder() {
        if (this.chipsData !== undefined && !this.chipsData.length && this.options.placeholder) {
          $(this.$input).prop('placeholder', this.options.placeholder);
        } else if ((this.chipsData === undefined || !!this.chipsData.length) && this.options.secondaryPlaceholder) {
          $(this.$input).prop('placeholder', this.options.secondaryPlaceholder);
        }
      }

      /**
       * Check if chip is valid
       * @param {chip} chip
       */

    }, {
      key: "_isValid",
      value: function _isValid(chip) {
        if (chip.hasOwnProperty('tag') && chip.tag !== '') {
          var exists = false;
          for (var i = 0; i < this.chipsData.length; i++) {
            if (this.chipsData[i].tag === chip.tag) {
              exists = true;
              break;
            }
          }
          return !exists;
        }

        return false;
      }

      /**
       * Add chip
       * @param {chip} chip
       */

    }, {
      key: "addChip",
      value: function addChip(chip) {
        if (!this._isValid(chip) || this.chipsData.length >= this.options.limit) {
          return;
        }

        var renderedChip = this._renderChip(chip);
        this.$chips.add(renderedChip);
        this.chipsData.push(chip);
        $(this.$input).before(renderedChip);
        this._setPlaceholder();

        // fire chipAdd callback
        if (typeof this.options.onChipAdd === 'function') {
          this.options.onChipAdd.call(this, this.$el, renderedChip);
        }
      }

      /**
       * Delete chip
       * @param {Number} chip
       */

    }, {
      key: "deleteChip",
      value: function deleteChip(chipIndex) {
        var $chip = this.$chips.eq(chipIndex);
        this.$chips.eq(chipIndex).remove();
        this.$chips = this.$chips.filter(function (el) {
          return $(el).index() >= 0;
        });
        this.chipsData.splice(chipIndex, 1);
        this._setPlaceholder();

        // fire chipDelete callback
        if (typeof this.options.onChipDelete === 'function') {
          this.options.onChipDelete.call(this, this.$el, $chip[0]);
        }
      }

      /**
       * Select chip
       * @param {Number} chip
       */

    }, {
      key: "selectChip",
      value: function selectChip(chipIndex) {
        var $chip = this.$chips.eq(chipIndex);
        this._selectedChip = $chip;
        $chip[0].focus();

        // fire chipSelect callback
        if (typeof this.options.onChipSelect === 'function') {
          this.options.onChipSelect.call(this, this.$el, $chip[0]);
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Chips.__proto__ || Object.getPrototypeOf(Chips), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Chips;
      }
    }, {
      key: "_handleChipsKeydown",
      value: function _handleChipsKeydown(e) {
        Chips._keydown = true;

        var $chips = $(e.target).closest('.chips');
        var chipsKeydown = e.target && $chips.length;

        // Don't handle keydown inputs on input and textarea
        if ($(e.target).is('input, textarea') || !chipsKeydown) {
          return;
        }

        var currChips = $chips[0].M_Chips;

        // backspace and delete
        if (e.keyCode === 8 || e.keyCode === 46) {
          e.preventDefault();

          var selectIndex = currChips.chipsData.length;
          if (currChips._selectedChip) {
            var index = currChips._selectedChip.index();
            currChips.deleteChip(index);
            currChips._selectedChip = null;

            // Make sure selectIndex doesn't go negative
            selectIndex = Math.max(index - 1, 0);
          }

          if (currChips.chipsData.length) {
            currChips.selectChip(selectIndex);
          }

          // left arrow key
        } else if (e.keyCode === 37) {
          if (currChips._selectedChip) {
            var _selectIndex = currChips._selectedChip.index() - 1;
            if (_selectIndex < 0) {
              return;
            }
            currChips.selectChip(_selectIndex);
          }

          // right arrow key
        } else if (e.keyCode === 39) {
          if (currChips._selectedChip) {
            var _selectIndex2 = currChips._selectedChip.index() + 1;

            if (_selectIndex2 >= currChips.chipsData.length) {
              currChips.$input[0].focus();
            } else {
              currChips.selectChip(_selectIndex2);
            }
          }
        }
      }

      /**
       * Handle Chips Keyup
       * @param {Event} e
       */

    }, {
      key: "_handleChipsKeyup",
      value: function _handleChipsKeyup(e) {
        Chips._keydown = false;
      }

      /**
       * Handle Chips Blur
       * @param {Event} e
       */

    }, {
      key: "_handleChipsBlur",
      value: function _handleChipsBlur(e) {
        if (!Chips._keydown) {
          var $chips = $(e.target).closest('.chips');
          var currChips = $chips[0].M_Chips;

          currChips._selectedChip = null;
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Chips;
  }(Component);

  /**
   * @static
   * @memberof Chips
   */


  Chips._keydown = false;

  M.Chips = Chips;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Chips, 'chips', 'M_Chips');
  }

  $(document).ready(function () {
    // Handle removal of static chips.
    $(document.body).on('click', '.chip .close', function () {
      var $chips = $(this).closest('.chips');
      if ($chips.length && $chips[0].M_Chips) {
        return;
      }
      $(this).closest('.chip').remove();
    });
  });
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    top: 0,
    bottom: Infinity,
    offset: 0,
    onPositionChange: null
  };

  /**
   * @class
   *
   */

  var Pushpin = function (_Component13) {
    _inherits(Pushpin, _Component13);

    /**
     * Construct Pushpin instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Pushpin(el, options) {
      _classCallCheck(this, Pushpin);

      var _this47 = _possibleConstructorReturn(this, (Pushpin.__proto__ || Object.getPrototypeOf(Pushpin)).call(this, Pushpin, el, options));

      _this47.el.M_Pushpin = _this47;

      /**
       * Options for the modal
       * @member Pushpin#options
       */
      _this47.options = $.extend({}, Pushpin.defaults, options);

      _this47.originalOffset = _this47.el.offsetTop;
      Pushpin._pushpins.push(_this47);
      _this47._setupEventHandlers();
      _this47._updatePosition();
      return _this47;
    }

    _createClass(Pushpin, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this.el.style.top = null;
        this._removePinClasses();
        this._removeEventHandlers();

        // Remove pushpin Inst
        var index = Pushpin._pushpins.indexOf(this);
        Pushpin._pushpins.splice(index, 1);
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        document.addEventListener('scroll', Pushpin._updateElements);
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        document.removeEventListener('scroll', Pushpin._updateElements);
      }
    }, {
      key: "_updatePosition",
      value: function _updatePosition() {
        var scrolled = M.getDocumentScrollTop() + this.options.offset;

        if (this.options.top <= scrolled && this.options.bottom >= scrolled && !this.el.classList.contains('pinned')) {
          this._removePinClasses();
          this.el.style.top = this.options.offset + "px";
          this.el.classList.add('pinned');

          // onPositionChange callback
          if (typeof this.options.onPositionChange === 'function') {
            this.options.onPositionChange.call(this, 'pinned');
          }
        }

        // Add pin-top (when scrolled position is above top)
        if (scrolled < this.options.top && !this.el.classList.contains('pin-top')) {
          this._removePinClasses();
          this.el.style.top = 0;
          this.el.classList.add('pin-top');

          // onPositionChange callback
          if (typeof this.options.onPositionChange === 'function') {
            this.options.onPositionChange.call(this, 'pin-top');
          }
        }

        // Add pin-bottom (when scrolled position is below bottom)
        if (scrolled > this.options.bottom && !this.el.classList.contains('pin-bottom')) {
          this._removePinClasses();
          this.el.classList.add('pin-bottom');
          this.el.style.top = this.options.bottom - this.originalOffset + "px";

          // onPositionChange callback
          if (typeof this.options.onPositionChange === 'function') {
            this.options.onPositionChange.call(this, 'pin-bottom');
          }
        }
      }
    }, {
      key: "_removePinClasses",
      value: function _removePinClasses() {
        // IE 11 bug (can't remove multiple classes in one line)
        this.el.classList.remove('pin-top');
        this.el.classList.remove('pinned');
        this.el.classList.remove('pin-bottom');
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Pushpin.__proto__ || Object.getPrototypeOf(Pushpin), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Pushpin;
      }
    }, {
      key: "_updateElements",
      value: function _updateElements() {
        for (var elIndex in Pushpin._pushpins) {
          var pInstance = Pushpin._pushpins[elIndex];
          pInstance._updatePosition();
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Pushpin;
  }(Component);

  /**
   * @static
   * @memberof Pushpin
   */


  Pushpin._pushpins = [];

  M.Pushpin = Pushpin;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Pushpin, 'pushpin', 'M_Pushpin');
  }
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    direction: 'top',
    hoverEnabled: true,
    toolbarEnabled: false
  };

  $.fn.reverse = [].reverse;

  /**
   * @class
   *
   */

  var FloatingActionButton = function (_Component14) {
    _inherits(FloatingActionButton, _Component14);

    /**
     * Construct FloatingActionButton instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function FloatingActionButton(el, options) {
      _classCallCheck(this, FloatingActionButton);

      var _this48 = _possibleConstructorReturn(this, (FloatingActionButton.__proto__ || Object.getPrototypeOf(FloatingActionButton)).call(this, FloatingActionButton, el, options));

      _this48.el.M_FloatingActionButton = _this48;

      /**
       * Options for the fab
       * @member FloatingActionButton#options
       * @prop {Boolean} [direction] - Direction fab menu opens
       * @prop {Boolean} [hoverEnabled=true] - Enable hover vs click
       * @prop {Boolean} [toolbarEnabled=false] - Enable toolbar transition
       */
      _this48.options = $.extend({}, FloatingActionButton.defaults, options);

      _this48.isOpen = false;
      _this48.$anchor = _this48.$el.children('a').first();
      _this48.$menu = _this48.$el.children('ul').first();
      _this48.$floatingBtns = _this48.$el.find('ul .btn-floating');
      _this48.$floatingBtnsReverse = _this48.$el.find('ul .btn-floating').reverse();
      _this48.offsetY = 0;
      _this48.offsetX = 0;

      _this48.$el.addClass("direction-" + _this48.options.direction);
      if (_this48.options.direction === 'top') {
        _this48.offsetY = 40;
      } else if (_this48.options.direction === 'right') {
        _this48.offsetX = -40;
      } else if (_this48.options.direction === 'bottom') {
        _this48.offsetY = -40;
      } else {
        _this48.offsetX = 40;
      }
      _this48._setupEventHandlers();
      return _this48;
    }

    _createClass(FloatingActionButton, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_FloatingActionButton = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleFABClickBound = this._handleFABClick.bind(this);
        this._handleOpenBound = this.open.bind(this);
        this._handleCloseBound = this.close.bind(this);

        if (this.options.hoverEnabled && !this.options.toolbarEnabled) {
          this.el.addEventListener('mouseenter', this._handleOpenBound);
          this.el.addEventListener('mouseleave', this._handleCloseBound);
        } else {
          this.el.addEventListener('click', this._handleFABClickBound);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (this.options.hoverEnabled && !this.options.toolbarEnabled) {
          this.el.removeEventListener('mouseenter', this._handleOpenBound);
          this.el.removeEventListener('mouseleave', this._handleCloseBound);
        } else {
          this.el.removeEventListener('click', this._handleFABClickBound);
        }
      }

      /**
       * Handle FAB Click
       */

    }, {
      key: "_handleFABClick",
      value: function _handleFABClick() {
        if (this.isOpen) {
          this.close();
        } else {
          this.open();
        }
      }

      /**
       * Handle Document Click
       * @param {Event} e
       */

    }, {
      key: "_handleDocumentClick",
      value: function _handleDocumentClick(e) {
        if (!$(e.target).closest(this.$menu).length) {
          this.close();
        }
      }

      /**
       * Open FAB
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        if (this.options.toolbarEnabled) {
          this._animateInToolbar();
        } else {
          this._animateInFAB();
        }
        this.isOpen = true;
      }

      /**
       * Close FAB
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        if (this.options.toolbarEnabled) {
          window.removeEventListener('scroll', this._handleCloseBound, true);
          document.body.removeEventListener('click', this._handleDocumentClickBound, true);
          this._animateOutToolbar();
        } else {
          this._animateOutFAB();
        }
        this.isOpen = false;
      }

      /**
       * Classic FAB Menu open
       */

    }, {
      key: "_animateInFAB",
      value: function _animateInFAB() {
        var _this49 = this;

        this.$el.addClass('active');

        var time = 0;
        this.$floatingBtnsReverse.each(function (el) {
          anim({
            targets: el,
            opacity: 1,
            scale: [0.4, 1],
            translateY: [_this49.offsetY, 0],
            translateX: [_this49.offsetX, 0],
            duration: 275,
            delay: time,
            easing: 'easeInOutQuad'
          });
          time += 40;
        });
      }

      /**
       * Classic FAB Menu close
       */

    }, {
      key: "_animateOutFAB",
      value: function _animateOutFAB() {
        var _this50 = this;

        this.$floatingBtnsReverse.each(function (el) {
          anim.remove(el);
          anim({
            targets: el,
            opacity: 0,
            scale: 0.4,
            translateY: _this50.offsetY,
            translateX: _this50.offsetX,
            duration: 175,
            easing: 'easeOutQuad',
            complete: function () {
              _this50.$el.removeClass('active');
            }
          });
        });
      }

      /**
       * Toolbar transition Menu open
       */

    }, {
      key: "_animateInToolbar",
      value: function _animateInToolbar() {
        var _this51 = this;

        var scaleFactor = void 0;
        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var btnRect = this.el.getBoundingClientRect();
        var backdrop = $('<div class="fab-backdrop"></div>');
        var fabColor = this.$anchor.css('background-color');
        this.$anchor.append(backdrop);

        this.offsetX = btnRect.left - windowWidth / 2 + btnRect.width / 2;
        this.offsetY = windowHeight - btnRect.bottom;
        scaleFactor = windowWidth / backdrop[0].clientWidth;
        this.btnBottom = btnRect.bottom;
        this.btnLeft = btnRect.left;
        this.btnWidth = btnRect.width;

        // Set initial state
        this.$el.addClass('active');
        this.$el.css({
          'text-align': 'center',
          width: '100%',
          bottom: 0,
          left: 0,
          transform: 'translateX(' + this.offsetX + 'px)',
          transition: 'none'
        });
        this.$anchor.css({
          transform: 'translateY(' + -this.offsetY + 'px)',
          transition: 'none'
        });
        backdrop.css({
          'background-color': fabColor
        });

        setTimeout(function () {
          _this51.$el.css({
            transform: '',
            transition: 'transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s'
          });
          _this51.$anchor.css({
            overflow: 'visible',
            transform: '',
            transition: 'transform .2s'
          });

          setTimeout(function () {
            _this51.$el.css({
              overflow: 'hidden',
              'background-color': fabColor
            });
            backdrop.css({
              transform: 'scale(' + scaleFactor + ')',
              transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
            });
            _this51.$menu.children('li').children('a').css({
              opacity: 1
            });

            // Scroll to close.
            _this51._handleDocumentClickBound = _this51._handleDocumentClick.bind(_this51);
            window.addEventListener('scroll', _this51._handleCloseBound, true);
            document.body.addEventListener('click', _this51._handleDocumentClickBound, true);
          }, 100);
        }, 0);
      }

      /**
       * Toolbar transition Menu close
       */

    }, {
      key: "_animateOutToolbar",
      value: function _animateOutToolbar() {
        var _this52 = this;

        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var backdrop = this.$el.find('.fab-backdrop');
        var fabColor = this.$anchor.css('background-color');

        this.offsetX = this.btnLeft - windowWidth / 2 + this.btnWidth / 2;
        this.offsetY = windowHeight - this.btnBottom;

        // Hide backdrop
        this.$el.removeClass('active');
        this.$el.css({
          'background-color': 'transparent',
          transition: 'none'
        });
        this.$anchor.css({
          transition: 'none'
        });
        backdrop.css({
          transform: 'scale(0)',
          'background-color': fabColor
        });
        this.$menu.children('li').children('a').css({
          opacity: ''
        });

        setTimeout(function () {
          backdrop.remove();

          // Set initial state.
          _this52.$el.css({
            'text-align': '',
            width: '',
            bottom: '',
            left: '',
            overflow: '',
            'background-color': '',
            transform: 'translate3d(' + -_this52.offsetX + 'px,0,0)'
          });
          _this52.$anchor.css({
            overflow: '',
            transform: 'translate3d(0,' + _this52.offsetY + 'px,0)'
          });

          setTimeout(function () {
            _this52.$el.css({
              transform: 'translate3d(0,0,0)',
              transition: 'transform .2s'
            });
            _this52.$anchor.css({
              transform: 'translate3d(0,0,0)',
              transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
            });
          }, 20);
        }, 200);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(FloatingActionButton.__proto__ || Object.getPrototypeOf(FloatingActionButton), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_FloatingActionButton;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return FloatingActionButton;
  }(Component);

  M.FloatingActionButton = FloatingActionButton;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(FloatingActionButton, 'floatingActionButton', 'M_FloatingActionButton');
  }
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    // Close when date is selected
    autoClose: false,

    // the default output format for the input field value
    format: 'mmm dd, yyyy',

    // Used to create date object from current input string
    parse: null,

    // The initial date to view when first opened
    defaultDate: null,

    // Make the `defaultDate` the initial selected value
    setDefaultDate: false,

    disableWeekends: false,

    disableDayFn: null,

    // First day of week (0: Sunday, 1: Monday etc)
    firstDay: 0,

    // The earliest date that can be selected
    minDate: null,
    // Thelatest date that can be selected
    maxDate: null,

    // Number of years either side, or array of upper/lower range
    yearRange: 10,

    // used internally (don't config outside)
    minYear: 0,
    maxYear: 9999,
    minMonth: undefined,
    maxMonth: undefined,

    startRange: null,
    endRange: null,

    isRTL: false,

    // Render the month after year in the calendar title
    showMonthAfterYear: false,

    // Render days of the calendar grid that fall in the next or previous month
    showDaysInNextAndPreviousMonths: false,

    // Specify a DOM element to render the calendar in
    container: null,

    // Show clear button
    showClearBtn: false,

    // internationalization
    i18n: {
      cancel: 'Cancel',
      clear: 'Clear',
      done: 'Ok',
      previousMonth: '‹',
      nextMonth: '›',
      months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
      monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
      weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
      weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
      weekdaysAbbrev: ['S', 'M', 'T', 'W', 'T', 'F', 'S']
    },

    // events array
    events: [],

    // callback function
    onSelect: null,
    onOpen: null,
    onClose: null,
    onDraw: null
  };

  /**
   * @class
   *
   */

  var Datepicker = function (_Component15) {
    _inherits(Datepicker, _Component15);

    /**
     * Construct Datepicker instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Datepicker(el, options) {
      _classCallCheck(this, Datepicker);

      var _this53 = _possibleConstructorReturn(this, (Datepicker.__proto__ || Object.getPrototypeOf(Datepicker)).call(this, Datepicker, el, options));

      _this53.el.M_Datepicker = _this53;

      _this53.options = $.extend({}, Datepicker.defaults, options);

      // make sure i18n defaults are not lost when only few i18n option properties are passed
      if (!!options && options.hasOwnProperty('i18n') && typeof options.i18n === 'object') {
        _this53.options.i18n = $.extend({}, Datepicker.defaults.i18n, options.i18n);
      }

      // Remove time component from minDate and maxDate options
      if (_this53.options.minDate) _this53.options.minDate.setHours(0, 0, 0, 0);
      if (_this53.options.maxDate) _this53.options.maxDate.setHours(0, 0, 0, 0);

      _this53.id = M.guid();

      _this53._setupVariables();
      _this53._insertHTMLIntoDOM();
      _this53._setupModal();

      _this53._setupEventHandlers();

      if (!_this53.options.defaultDate) {
        _this53.options.defaultDate = new Date(Date.parse(_this53.el.value));
      }

      var defDate = _this53.options.defaultDate;
      if (Datepicker._isDate(defDate)) {
        if (_this53.options.setDefaultDate) {
          _this53.setDate(defDate, true);
          _this53.setInputValue();
        } else {
          _this53.gotoDate(defDate);
        }
      } else {
        _this53.gotoDate(new Date());
      }

      /**
       * Describes open/close state of datepicker
       * @type {Boolean}
       */
      _this53.isOpen = false;
      return _this53;
    }

    _createClass(Datepicker, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.modal.destroy();
        $(this.modalEl).remove();
        this.destroySelects();
        this.el.M_Datepicker = undefined;
      }
    }, {
      key: "destroySelects",
      value: function destroySelects() {
        var oldYearSelect = this.calendarEl.querySelector('.orig-select-year');
        if (oldYearSelect) {
          M.FormSelect.getInstance(oldYearSelect).destroy();
        }
        var oldMonthSelect = this.calendarEl.querySelector('.orig-select-month');
        if (oldMonthSelect) {
          M.FormSelect.getInstance(oldMonthSelect).destroy();
        }
      }
    }, {
      key: "_insertHTMLIntoDOM",
      value: function _insertHTMLIntoDOM() {
        if (this.options.showClearBtn) {
          $(this.clearBtn).css({ visibility: '' });
          this.clearBtn.innerHTML = this.options.i18n.clear;
        }

        this.doneBtn.innerHTML = this.options.i18n.done;
        this.cancelBtn.innerHTML = this.options.i18n.cancel;

        if (this.options.container) {
          this.$modalEl.appendTo(this.options.container);
        } else {
          this.$modalEl.insertBefore(this.el);
        }
      }
    }, {
      key: "_setupModal",
      value: function _setupModal() {
        var _this54 = this;

        this.modalEl.id = 'modal-' + this.id;
        this.modal = M.Modal.init(this.modalEl, {
          onCloseEnd: function () {
            _this54.isOpen = false;
          }
        });
      }
    }, {
      key: "toString",
      value: function toString(format) {
        var _this55 = this;

        format = format || this.options.format;
        if (!Datepicker._isDate(this.date)) {
          return '';
        }

        var formatArray = format.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g);
        var formattedDate = formatArray.map(function (label) {
          if (_this55.formats[label]) {
            return _this55.formats[label]();
          }

          return label;
        }).join('');
        return formattedDate;
      }
    }, {
      key: "setDate",
      value: function setDate(date, preventOnSelect) {
        if (!date) {
          this.date = null;
          this._renderDateDisplay();
          return this.draw();
        }
        if (typeof date === 'string') {
          date = new Date(Date.parse(date));
        }
        if (!Datepicker._isDate(date)) {
          return;
        }

        var min = this.options.minDate,
            max = this.options.maxDate;

        if (Datepicker._isDate(min) && date < min) {
          date = min;
        } else if (Datepicker._isDate(max) && date > max) {
          date = max;
        }

        this.date = new Date(date.getTime());

        this._renderDateDisplay();

        Datepicker._setToStartOfDay(this.date);
        this.gotoDate(this.date);

        if (!preventOnSelect && typeof this.options.onSelect === 'function') {
          this.options.onSelect.call(this, this.date);
        }
      }
    }, {
      key: "setInputValue",
      value: function setInputValue() {
        this.el.value = this.toString();
        this.$el.trigger('change', { firedBy: this });
      }
    }, {
      key: "_renderDateDisplay",
      value: function _renderDateDisplay() {
        var displayDate = Datepicker._isDate(this.date) ? this.date : new Date();
        var i18n = this.options.i18n;
        var day = i18n.weekdaysShort[displayDate.getDay()];
        var month = i18n.monthsShort[displayDate.getMonth()];
        var date = displayDate.getDate();
        this.yearTextEl.innerHTML = displayDate.getFullYear();
        this.dateTextEl.innerHTML = day + ", " + month + " " + date;
      }

      /**
       * change view to a specific date
       */

    }, {
      key: "gotoDate",
      value: function gotoDate(date) {
        var newCalendar = true;

        if (!Datepicker._isDate(date)) {
          return;
        }

        if (this.calendars) {
          var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),
              lastVisibleDate = new Date(this.calendars[this.calendars.length - 1].year, this.calendars[this.calendars.length - 1].month, 1),
              visibleDate = date.getTime();
          // get the end of the month
          lastVisibleDate.setMonth(lastVisibleDate.getMonth() + 1);
          lastVisibleDate.setDate(lastVisibleDate.getDate() - 1);
          newCalendar = visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate;
        }

        if (newCalendar) {
          this.calendars = [{
            month: date.getMonth(),
            year: date.getFullYear()
          }];
        }

        this.adjustCalendars();
      }
    }, {
      key: "adjustCalendars",
      value: function adjustCalendars() {
        this.calendars[0] = this.adjustCalendar(this.calendars[0]);
        this.draw();
      }
    }, {
      key: "adjustCalendar",
      value: function adjustCalendar(calendar) {
        if (calendar.month < 0) {
          calendar.year -= Math.ceil(Math.abs(calendar.month) / 12);
          calendar.month += 12;
        }
        if (calendar.month > 11) {
          calendar.year += Math.floor(Math.abs(calendar.month) / 12);
          calendar.month -= 12;
        }
        return calendar;
      }
    }, {
      key: "nextMonth",
      value: function nextMonth() {
        this.calendars[0].month++;
        this.adjustCalendars();
      }
    }, {
      key: "prevMonth",
      value: function prevMonth() {
        this.calendars[0].month--;
        this.adjustCalendars();
      }
    }, {
      key: "render",
      value: function render(year, month, randId) {
        var opts = this.options,
            now = new Date(),
            days = Datepicker._getDaysInMonth(year, month),
            before = new Date(year, month, 1).getDay(),
            data = [],
            row = [];
        Datepicker._setToStartOfDay(now);
        if (opts.firstDay > 0) {
          before -= opts.firstDay;
          if (before < 0) {
            before += 7;
          }
        }
        var previousMonth = month === 0 ? 11 : month - 1,
            nextMonth = month === 11 ? 0 : month + 1,
            yearOfPreviousMonth = month === 0 ? year - 1 : year,
            yearOfNextMonth = month === 11 ? year + 1 : year,
            daysInPreviousMonth = Datepicker._getDaysInMonth(yearOfPreviousMonth, previousMonth);
        var cells = days + before,
            after = cells;
        while (after > 7) {
          after -= 7;
        }
        cells += 7 - after;
        var isWeekSelected = false;
        for (var i = 0, r = 0; i < cells; i++) {
          var day = new Date(year, month, 1 + (i - before)),
              isSelected = Datepicker._isDate(this.date) ? Datepicker._compareDates(day, this.date) : false,
              isToday = Datepicker._compareDates(day, now),
              hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,
              isEmpty = i < before || i >= days + before,
              dayNumber = 1 + (i - before),
              monthNumber = month,
              yearNumber = year,
              isStartRange = opts.startRange && Datepicker._compareDates(opts.startRange, day),
              isEndRange = opts.endRange && Datepicker._compareDates(opts.endRange, day),
              isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,
              isDisabled = opts.minDate && day < opts.minDate || opts.maxDate && day > opts.maxDate || opts.disableWeekends && Datepicker._isWeekend(day) || opts.disableDayFn && opts.disableDayFn(day);

          if (isEmpty) {
            if (i < before) {
              dayNumber = daysInPreviousMonth + dayNumber;
              monthNumber = previousMonth;
              yearNumber = yearOfPreviousMonth;
            } else {
              dayNumber = dayNumber - days;
              monthNumber = nextMonth;
              yearNumber = yearOfNextMonth;
            }
          }

          var dayConfig = {
            day: dayNumber,
            month: monthNumber,
            year: yearNumber,
            hasEvent: hasEvent,
            isSelected: isSelected,
            isToday: isToday,
            isDisabled: isDisabled,
            isEmpty: isEmpty,
            isStartRange: isStartRange,
            isEndRange: isEndRange,
            isInRange: isInRange,
            showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths
          };

          row.push(this.renderDay(dayConfig));

          if (++r === 7) {
            data.push(this.renderRow(row, opts.isRTL, isWeekSelected));
            row = [];
            r = 0;
            isWeekSelected = false;
          }
        }
        return this.renderTable(opts, data, randId);
      }
    }, {
      key: "renderDay",
      value: function renderDay(opts) {
        var arr = [];
        var ariaSelected = 'false';
        if (opts.isEmpty) {
          if (opts.showDaysInNextAndPreviousMonths) {
            arr.push('is-outside-current-month');
            arr.push('is-selection-disabled');
          } else {
            return '<td class="is-empty"></td>';
          }
        }
        if (opts.isDisabled) {
          arr.push('is-disabled');
        }

        if (opts.isToday) {
          arr.push('is-today');
        }
        if (opts.isSelected) {
          arr.push('is-selected');
          ariaSelected = 'true';
        }
        if (opts.hasEvent) {
          arr.push('has-event');
        }
        if (opts.isInRange) {
          arr.push('is-inrange');
        }
        if (opts.isStartRange) {
          arr.push('is-startrange');
        }
        if (opts.isEndRange) {
          arr.push('is-endrange');
        }
        return "<td data-day=\"" + opts.day + "\" class=\"" + arr.join(' ') + "\" aria-selected=\"" + ariaSelected + "\">" + ("<button class=\"datepicker-day-button\" type=\"button\" data-year=\"" + opts.year + "\" data-month=\"" + opts.month + "\" data-day=\"" + opts.day + "\">" + opts.day + "</button>") + '</td>';
      }
    }, {
      key: "renderRow",
      value: function renderRow(days, isRTL, isRowSelected) {
        return '<tr class="datepicker-row' + (isRowSelected ? ' is-selected' : '') + '">' + (isRTL ? days.reverse() : days).join('') + '</tr>';
      }
    }, {
      key: "renderTable",
      value: function renderTable(opts, data, randId) {
        return '<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="' + randId + '">' + this.renderHead(opts) + this.renderBody(data) + '</table></div>';
      }
    }, {
      key: "renderHead",
      value: function renderHead(opts) {
        var i = void 0,
            arr = [];
        for (i = 0; i < 7; i++) {
          arr.push("<th scope=\"col\"><abbr title=\"" + this.renderDayName(opts, i) + "\">" + this.renderDayName(opts, i, true) + "</abbr></th>");
        }
        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';
      }
    }, {
      key: "renderBody",
      value: function renderBody(rows) {
        return '<tbody>' + rows.join('') + '</tbody>';
      }
    }, {
      key: "renderTitle",
      value: function renderTitle(instance, c, year, month, refYear, randId) {
        var i = void 0,
            j = void 0,
            arr = void 0,
            opts = this.options,
            isMinYear = year === opts.minYear,
            isMaxYear = year === opts.maxYear,
            html = '<div id="' + randId + '" class="datepicker-controls" role="heading" aria-live="assertive">',
            monthHtml = void 0,
            yearHtml = void 0,
            prev = true,
            next = true;

        for (arr = [], i = 0; i < 12; i++) {
          arr.push('<option value="' + (year === refYear ? i - c : 12 + i - c) + '"' + (i === month ? ' selected="selected"' : '') + (isMinYear && i < opts.minMonth || isMaxYear && i > opts.maxMonth ? 'disabled="disabled"' : '') + '>' + opts.i18n.months[i] + '</option>');
        }

        monthHtml = '<select class="datepicker-select orig-select-month" tabindex="-1">' + arr.join('') + '</select>';

        if ($.isArray(opts.yearRange)) {
          i = opts.yearRange[0];
          j = opts.yearRange[1] + 1;
        } else {
          i = year - opts.yearRange;
          j = 1 + year + opts.yearRange;
        }

        for (arr = []; i < j && i <= opts.maxYear; i++) {
          if (i >= opts.minYear) {
            arr.push("<option value=\"" + i + "\" " + (i === year ? 'selected="selected"' : '') + ">" + i + "</option>");
          }
        }

        yearHtml = "<select class=\"datepicker-select orig-select-year\" tabindex=\"-1\">" + arr.join('') + "</select>";

        var leftArrow = '<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg>';
        html += "<button class=\"month-prev" + (prev ? '' : ' is-disabled') + "\" type=\"button\">" + leftArrow + "</button>";

        html += '<div class="selects-container">';
        if (opts.showMonthAfterYear) {
          html += yearHtml + monthHtml;
        } else {
          html += monthHtml + yearHtml;
        }
        html += '</div>';

        if (isMinYear && (month === 0 || opts.minMonth >= month)) {
          prev = false;
        }

        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {
          next = false;
        }

        var rightArrow = '<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg>';
        html += "<button class=\"month-next" + (next ? '' : ' is-disabled') + "\" type=\"button\">" + rightArrow + "</button>";

        return html += '</div>';
      }

      /**
       * refresh the HTML
       */

    }, {
      key: "draw",
      value: function draw(force) {
        if (!this.isOpen && !force) {
          return;
        }
        var opts = this.options,
            minYear = opts.minYear,
            maxYear = opts.maxYear,
            minMonth = opts.minMonth,
            maxMonth = opts.maxMonth,
            html = '',
            randId = void 0;

        if (this._y <= minYear) {
          this._y = minYear;
          if (!isNaN(minMonth) && this._m < minMonth) {
            this._m = minMonth;
          }
        }
        if (this._y >= maxYear) {
          this._y = maxYear;
          if (!isNaN(maxMonth) && this._m > maxMonth) {
            this._m = maxMonth;
          }
        }

        randId = 'datepicker-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);

        for (var c = 0; c < 1; c++) {
          this._renderDateDisplay();
          html += this.renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId);
        }

        this.destroySelects();

        this.calendarEl.innerHTML = html;

        // Init Materialize Select
        var yearSelect = this.calendarEl.querySelector('.orig-select-year');
        var monthSelect = this.calendarEl.querySelector('.orig-select-month');
        M.FormSelect.init(yearSelect, {
          classes: 'select-year',
          dropdownOptions: { container: document.body, constrainWidth: false }
        });
        M.FormSelect.init(monthSelect, {
          classes: 'select-month',
          dropdownOptions: { container: document.body, constrainWidth: false }
        });

        // Add change handlers for select
        yearSelect.addEventListener('change', this._handleYearChange.bind(this));
        monthSelect.addEventListener('change', this._handleMonthChange.bind(this));

        if (typeof this.options.onDraw === 'function') {
          this.options.onDraw(this);
        }
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);
        this._handleInputChangeBound = this._handleInputChange.bind(this);
        this._handleCalendarClickBound = this._handleCalendarClick.bind(this);
        this._finishSelectionBound = this._finishSelection.bind(this);
        this._handleMonthChange = this._handleMonthChange.bind(this);
        this._closeBound = this.close.bind(this);

        this.el.addEventListener('click', this._handleInputClickBound);
        this.el.addEventListener('keydown', this._handleInputKeydownBound);
        this.el.addEventListener('change', this._handleInputChangeBound);
        this.calendarEl.addEventListener('click', this._handleCalendarClickBound);
        this.doneBtn.addEventListener('click', this._finishSelectionBound);
        this.cancelBtn.addEventListener('click', this._closeBound);

        if (this.options.showClearBtn) {
          this._handleClearClickBound = this._handleClearClick.bind(this);
          this.clearBtn.addEventListener('click', this._handleClearClickBound);
        }
      }
    }, {
      key: "_setupVariables",
      value: function _setupVariables() {
        var _this56 = this;

        this.$modalEl = $(Datepicker._template);
        this.modalEl = this.$modalEl[0];

        this.calendarEl = this.modalEl.querySelector('.datepicker-calendar');

        this.yearTextEl = this.modalEl.querySelector('.year-text');
        this.dateTextEl = this.modalEl.querySelector('.date-text');
        if (this.options.showClearBtn) {
          this.clearBtn = this.modalEl.querySelector('.datepicker-clear');
        }
        this.doneBtn = this.modalEl.querySelector('.datepicker-done');
        this.cancelBtn = this.modalEl.querySelector('.datepicker-cancel');

        this.formats = {
          d: function () {
            return _this56.date.getDate();
          },
          dd: function () {
            var d = _this56.date.getDate();
            return (d < 10 ? '0' : '') + d;
          },
          ddd: function () {
            return _this56.options.i18n.weekdaysShort[_this56.date.getDay()];
          },
          dddd: function () {
            return _this56.options.i18n.weekdays[_this56.date.getDay()];
          },
          m: function () {
            return _this56.date.getMonth() + 1;
          },
          mm: function () {
            var m = _this56.date.getMonth() + 1;
            return (m < 10 ? '0' : '') + m;
          },
          mmm: function () {
            return _this56.options.i18n.monthsShort[_this56.date.getMonth()];
          },
          mmmm: function () {
            return _this56.options.i18n.months[_this56.date.getMonth()];
          },
          yy: function () {
            return ('' + _this56.date.getFullYear()).slice(2);
          },
          yyyy: function () {
            return _this56.date.getFullYear();
          }
        };
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleInputClickBound);
        this.el.removeEventListener('keydown', this._handleInputKeydownBound);
        this.el.removeEventListener('change', this._handleInputChangeBound);
        this.calendarEl.removeEventListener('click', this._handleCalendarClickBound);
      }
    }, {
      key: "_handleInputClick",
      value: function _handleInputClick() {
        this.open();
      }
    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        if (e.which === M.keys.ENTER) {
          e.preventDefault();
          this.open();
        }
      }
    }, {
      key: "_handleCalendarClick",
      value: function _handleCalendarClick(e) {
        if (!this.isOpen) {
          return;
        }

        var $target = $(e.target);
        if (!$target.hasClass('is-disabled')) {
          if ($target.hasClass('datepicker-day-button') && !$target.hasClass('is-empty') && !$target.parent().hasClass('is-disabled')) {
            this.setDate(new Date(e.target.getAttribute('data-year'), e.target.getAttribute('data-month'), e.target.getAttribute('data-day')));
            if (this.options.autoClose) {
              this._finishSelection();
            }
          } else if ($target.closest('.month-prev').length) {
            this.prevMonth();
          } else if ($target.closest('.month-next').length) {
            this.nextMonth();
          }
        }
      }
    }, {
      key: "_handleClearClick",
      value: function _handleClearClick() {
        this.date = null;
        this.setInputValue();
        this.close();
      }
    }, {
      key: "_handleMonthChange",
      value: function _handleMonthChange(e) {
        this.gotoMonth(e.target.value);
      }
    }, {
      key: "_handleYearChange",
      value: function _handleYearChange(e) {
        this.gotoYear(e.target.value);
      }

      /**
       * change view to a specific month (zero-index, e.g. 0: January)
       */

    }, {
      key: "gotoMonth",
      value: function gotoMonth(month) {
        if (!isNaN(month)) {
          this.calendars[0].month = parseInt(month, 10);
          this.adjustCalendars();
        }
      }

      /**
       * change view to a specific full year (e.g. "2012")
       */

    }, {
      key: "gotoYear",
      value: function gotoYear(year) {
        if (!isNaN(year)) {
          this.calendars[0].year = parseInt(year, 10);
          this.adjustCalendars();
        }
      }
    }, {
      key: "_handleInputChange",
      value: function _handleInputChange(e) {
        var date = void 0;

        // Prevent change event from being fired when triggered by the plugin
        if (e.firedBy === this) {
          return;
        }
        if (this.options.parse) {
          date = this.options.parse(this.el.value, this.options.format);
        } else {
          date = new Date(Date.parse(this.el.value));
        }

        if (Datepicker._isDate(date)) {
          this.setDate(date);
        }
      }
    }, {
      key: "renderDayName",
      value: function renderDayName(opts, day, abbr) {
        day += opts.firstDay;
        while (day >= 7) {
          day -= 7;
        }
        return abbr ? opts.i18n.weekdaysAbbrev[day] : opts.i18n.weekdays[day];
      }

      /**
       * Set input value to the selected date and close Datepicker
       */

    }, {
      key: "_finishSelection",
      value: function _finishSelection() {
        this.setInputValue();
        this.close();
      }

      /**
       * Open Datepicker
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        this.isOpen = true;
        if (typeof this.options.onOpen === 'function') {
          this.options.onOpen.call(this);
        }
        this.draw();
        this.modal.open();
        return this;
      }

      /**
       * Close Datepicker
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isOpen = false;
        if (typeof this.options.onClose === 'function') {
          this.options.onClose.call(this);
        }
        this.modal.close();
        return this;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Datepicker.__proto__ || Object.getPrototypeOf(Datepicker), "init", this).call(this, this, els, options);
      }
    }, {
      key: "_isDate",
      value: function _isDate(obj) {
        return (/Date/.test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime())
        );
      }
    }, {
      key: "_isWeekend",
      value: function _isWeekend(date) {
        var day = date.getDay();
        return day === 0 || day === 6;
      }
    }, {
      key: "_setToStartOfDay",
      value: function _setToStartOfDay(date) {
        if (Datepicker._isDate(date)) date.setHours(0, 0, 0, 0);
      }
    }, {
      key: "_getDaysInMonth",
      value: function _getDaysInMonth(year, month) {
        return [31, Datepicker._isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
      }
    }, {
      key: "_isLeapYear",
      value: function _isLeapYear(year) {
        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951
        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
      }
    }, {
      key: "_compareDates",
      value: function _compareDates(a, b) {
        // weak date comparison (use setToStartOfDay(date) to ensure correct result)
        return a.getTime() === b.getTime();
      }
    }, {
      key: "_setToStartOfDay",
      value: function _setToStartOfDay(date) {
        if (Datepicker._isDate(date)) date.setHours(0, 0, 0, 0);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Datepicker;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Datepicker;
  }(Component);

  Datepicker._template = ['<div class= "modal datepicker-modal">', '<div class="modal-content datepicker-container">', '<div class="datepicker-date-display">', '<span class="year-text"></span>', '<span class="date-text"></span>', '</div>', '<div class="datepicker-calendar-container">', '<div class="datepicker-calendar"></div>', '<div class="datepicker-footer">', '<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>', '<div class="confirmation-btns">', '<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>', '<button class="btn-flat datepicker-done waves-effect" type="button"></button>', '</div>', '</div>', '</div>', '</div>', '</div>'].join('');

  M.Datepicker = Datepicker;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Datepicker, 'datepicker', 'M_Datepicker');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    dialRadius: 135,
    outerRadius: 105,
    innerRadius: 70,
    tickRadius: 20,
    duration: 350,
    container: null,
    defaultTime: 'now', // default time, 'now' or '13:14' e.g.
    fromNow: 0, // Millisecond offset from the defaultTime
    showClearBtn: false,

    // internationalization
    i18n: {
      cancel: 'Cancel',
      clear: 'Clear',
      done: 'Ok'
    },

    autoClose: false, // auto close when minute is selected
    twelveHour: true, // change to 12 hour AM/PM clock from 24 hour
    vibrate: true, // vibrate the device when dragging clock hand

    // Callbacks
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    onSelect: null
  };

  /**
   * @class
   *
   */

  var Timepicker = function (_Component16) {
    _inherits(Timepicker, _Component16);

    function Timepicker(el, options) {
      _classCallCheck(this, Timepicker);

      var _this57 = _possibleConstructorReturn(this, (Timepicker.__proto__ || Object.getPrototypeOf(Timepicker)).call(this, Timepicker, el, options));

      _this57.el.M_Timepicker = _this57;

      _this57.options = $.extend({}, Timepicker.defaults, options);

      _this57.id = M.guid();
      _this57._insertHTMLIntoDOM();
      _this57._setupModal();
      _this57._setupVariables();
      _this57._setupEventHandlers();

      _this57._clockSetup();
      _this57._pickerSetup();
      return _this57;
    }

    _createClass(Timepicker, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.modal.destroy();
        $(this.modalEl).remove();
        this.el.M_Timepicker = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);
        this._handleClockClickStartBound = this._handleClockClickStart.bind(this);
        this._handleDocumentClickMoveBound = this._handleDocumentClickMove.bind(this);
        this._handleDocumentClickEndBound = this._handleDocumentClickEnd.bind(this);

        this.el.addEventListener('click', this._handleInputClickBound);
        this.el.addEventListener('keydown', this._handleInputKeydownBound);
        this.plate.addEventListener('mousedown', this._handleClockClickStartBound);
        this.plate.addEventListener('touchstart', this._handleClockClickStartBound);

        $(this.spanHours).on('click', this.showView.bind(this, 'hours'));
        $(this.spanMinutes).on('click', this.showView.bind(this, 'minutes'));
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleInputClickBound);
        this.el.removeEventListener('keydown', this._handleInputKeydownBound);
      }
    }, {
      key: "_handleInputClick",
      value: function _handleInputClick() {
        this.open();
      }
    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        if (e.which === M.keys.ENTER) {
          e.preventDefault();
          this.open();
        }
      }
    }, {
      key: "_handleClockClickStart",
      value: function _handleClockClickStart(e) {
        e.preventDefault();
        var clockPlateBR = this.plate.getBoundingClientRect();
        var offset = { x: clockPlateBR.left, y: clockPlateBR.top };

        this.x0 = offset.x + this.options.dialRadius;
        this.y0 = offset.y + this.options.dialRadius;
        this.moved = false;
        var clickPos = Timepicker._Pos(e);
        this.dx = clickPos.x - this.x0;
        this.dy = clickPos.y - this.y0;

        // Set clock hands
        this.setHand(this.dx, this.dy, false);

        // Mousemove on document
        document.addEventListener('mousemove', this._handleDocumentClickMoveBound);
        document.addEventListener('touchmove', this._handleDocumentClickMoveBound);

        // Mouseup on document
        document.addEventListener('mouseup', this._handleDocumentClickEndBound);
        document.addEventListener('touchend', this._handleDocumentClickEndBound);
      }
    }, {
      key: "_handleDocumentClickMove",
      value: function _handleDocumentClickMove(e) {
        e.preventDefault();
        var clickPos = Timepicker._Pos(e);
        var x = clickPos.x - this.x0;
        var y = clickPos.y - this.y0;
        this.moved = true;
        this.setHand(x, y, false, true);
      }
    }, {
      key: "_handleDocumentClickEnd",
      value: function _handleDocumentClickEnd(e) {
        var _this58 = this;

        e.preventDefault();
        document.removeEventListener('mouseup', this._handleDocumentClickEndBound);
        document.removeEventListener('touchend', this._handleDocumentClickEndBound);
        var clickPos = Timepicker._Pos(e);
        var x = clickPos.x - this.x0;
        var y = clickPos.y - this.y0;
        if (this.moved && x === this.dx && y === this.dy) {
          this.setHand(x, y);
        }

        if (this.currentView === 'hours') {
          this.showView('minutes', this.options.duration / 2);
        } else if (this.options.autoClose) {
          $(this.minutesView).addClass('timepicker-dial-out');
          setTimeout(function () {
            _this58.done();
          }, this.options.duration / 2);
        }

        if (typeof this.options.onSelect === 'function') {
          this.options.onSelect.call(this, this.hours, this.minutes);
        }

        // Unbind mousemove event
        document.removeEventListener('mousemove', this._handleDocumentClickMoveBound);
        document.removeEventListener('touchmove', this._handleDocumentClickMoveBound);
      }
    }, {
      key: "_insertHTMLIntoDOM",
      value: function _insertHTMLIntoDOM() {
        this.$modalEl = $(Timepicker._template);
        this.modalEl = this.$modalEl[0];
        this.modalEl.id = 'modal-' + this.id;

        // Append popover to input by default
        var containerEl = document.querySelector(this.options.container);
        if (this.options.container && !!containerEl) {
          this.$modalEl.appendTo(containerEl);
        } else {
          this.$modalEl.insertBefore(this.el);
        }
      }
    }, {
      key: "_setupModal",
      value: function _setupModal() {
        var _this59 = this;

        this.modal = M.Modal.init(this.modalEl, {
          onOpenStart: this.options.onOpenStart,
          onOpenEnd: this.options.onOpenEnd,
          onCloseStart: this.options.onCloseStart,
          onCloseEnd: function () {
            if (typeof _this59.options.onCloseEnd === 'function') {
              _this59.options.onCloseEnd.call(_this59);
            }
            _this59.isOpen = false;
          }
        });
      }
    }, {
      key: "_setupVariables",
      value: function _setupVariables() {
        this.currentView = 'hours';
        this.vibrate = navigator.vibrate ? 'vibrate' : navigator.webkitVibrate ? 'webkitVibrate' : null;

        this._canvas = this.modalEl.querySelector('.timepicker-canvas');
        this.plate = this.modalEl.querySelector('.timepicker-plate');

        this.hoursView = this.modalEl.querySelector('.timepicker-hours');
        this.minutesView = this.modalEl.querySelector('.timepicker-minutes');
        this.spanHours = this.modalEl.querySelector('.timepicker-span-hours');
        this.spanMinutes = this.modalEl.querySelector('.timepicker-span-minutes');
        this.spanAmPm = this.modalEl.querySelector('.timepicker-span-am-pm');
        this.footer = this.modalEl.querySelector('.timepicker-footer');
        this.amOrPm = 'PM';
      }
    }, {
      key: "_pickerSetup",
      value: function _pickerSetup() {
        var $clearBtn = $("<button class=\"btn-flat timepicker-clear waves-effect\" style=\"visibility: hidden;\" type=\"button\" tabindex=\"" + (this.options.twelveHour ? '3' : '1') + "\">" + this.options.i18n.clear + "</button>").appendTo(this.footer).on('click', this.clear.bind(this));
        if (this.options.showClearBtn) {
          $clearBtn.css({ visibility: '' });
        }

        var confirmationBtnsContainer = $('<div class="confirmation-btns"></div>');
        $('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="' + (this.options.twelveHour ? '3' : '1') + '">' + this.options.i18n.cancel + '</button>').appendTo(confirmationBtnsContainer).on('click', this.close.bind(this));
        $('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="' + (this.options.twelveHour ? '3' : '1') + '">' + this.options.i18n.done + '</button>').appendTo(confirmationBtnsContainer).on('click', this.done.bind(this));
        confirmationBtnsContainer.appendTo(this.footer);
      }
    }, {
      key: "_clockSetup",
      value: function _clockSetup() {
        if (this.options.twelveHour) {
          this.$amBtn = $('<div class="am-btn">AM</div>');
          this.$pmBtn = $('<div class="pm-btn">PM</div>');
          this.$amBtn.on('click', this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm);
          this.$pmBtn.on('click', this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm);
        }

        this._buildHoursView();
        this._buildMinutesView();
        this._buildSVGClock();
      }
    }, {
      key: "_buildSVGClock",
      value: function _buildSVGClock() {
        // Draw clock hands and others
        var dialRadius = this.options.dialRadius;
        var tickRadius = this.options.tickRadius;
        var diameter = dialRadius * 2;

        var svg = Timepicker._createSVGEl('svg');
        svg.setAttribute('class', 'timepicker-svg');
        svg.setAttribute('width', diameter);
        svg.setAttribute('height', diameter);
        var g = Timepicker._createSVGEl('g');
        g.setAttribute('transform', 'translate(' + dialRadius + ',' + dialRadius + ')');
        var bearing = Timepicker._createSVGEl('circle');
        bearing.setAttribute('class', 'timepicker-canvas-bearing');
        bearing.setAttribute('cx', 0);
        bearing.setAttribute('cy', 0);
        bearing.setAttribute('r', 4);
        var hand = Timepicker._createSVGEl('line');
        hand.setAttribute('x1', 0);
        hand.setAttribute('y1', 0);
        var bg = Timepicker._createSVGEl('circle');
        bg.setAttribute('class', 'timepicker-canvas-bg');
        bg.setAttribute('r', tickRadius);
        g.appendChild(hand);
        g.appendChild(bg);
        g.appendChild(bearing);
        svg.appendChild(g);
        this._canvas.appendChild(svg);

        this.hand = hand;
        this.bg = bg;
        this.bearing = bearing;
        this.g = g;
      }
    }, {
      key: "_buildHoursView",
      value: function _buildHoursView() {
        var $tick = $('<div class="timepicker-tick"></div>');
        // Hours view
        if (this.options.twelveHour) {
          for (var i = 1; i < 13; i += 1) {
            var tick = $tick.clone();
            var radian = i / 6 * Math.PI;
            var radius = this.options.outerRadius;
            tick.css({
              left: this.options.dialRadius + Math.sin(radian) * radius - this.options.tickRadius + 'px',
              top: this.options.dialRadius - Math.cos(radian) * radius - this.options.tickRadius + 'px'
            });
            tick.html(i === 0 ? '00' : i);
            this.hoursView.appendChild(tick[0]);
            // tick.on(mousedownEvent, mousedown);
          }
        } else {
          for (var _i2 = 0; _i2 < 24; _i2 += 1) {
            var _tick = $tick.clone();
            var _radian = _i2 / 6 * Math.PI;
            var inner = _i2 > 0 && _i2 < 13;
            var _radius = inner ? this.options.innerRadius : this.options.outerRadius;
            _tick.css({
              left: this.options.dialRadius + Math.sin(_radian) * _radius - this.options.tickRadius + 'px',
              top: this.options.dialRadius - Math.cos(_radian) * _radius - this.options.tickRadius + 'px'
            });
            _tick.html(_i2 === 0 ? '00' : _i2);
            this.hoursView.appendChild(_tick[0]);
            // tick.on(mousedownEvent, mousedown);
          }
        }
      }
    }, {
      key: "_buildMinutesView",
      value: function _buildMinutesView() {
        var $tick = $('<div class="timepicker-tick"></div>');
        // Minutes view
        for (var i = 0; i < 60; i += 5) {
          var tick = $tick.clone();
          var radian = i / 30 * Math.PI;
          tick.css({
            left: this.options.dialRadius + Math.sin(radian) * this.options.outerRadius - this.options.tickRadius + 'px',
            top: this.options.dialRadius - Math.cos(radian) * this.options.outerRadius - this.options.tickRadius + 'px'
          });
          tick.html(Timepicker._addLeadingZero(i));
          this.minutesView.appendChild(tick[0]);
        }
      }
    }, {
      key: "_handleAmPmClick",
      value: function _handleAmPmClick(e) {
        var $btnClicked = $(e.target);
        this.amOrPm = $btnClicked.hasClass('am-btn') ? 'AM' : 'PM';
        this._updateAmPmView();
      }
    }, {
      key: "_updateAmPmView",
      value: function _updateAmPmView() {
        if (this.options.twelveHour) {
          this.$amBtn.toggleClass('text-primary', this.amOrPm === 'AM');
          this.$pmBtn.toggleClass('text-primary', this.amOrPm === 'PM');
        }
      }
    }, {
      key: "_updateTimeFromInput",
      value: function _updateTimeFromInput() {
        // Get the time
        var value = ((this.el.value || this.options.defaultTime || '') + '').split(':');
        if (this.options.twelveHour && !(typeof value[1] === 'undefined')) {
          if (value[1].toUpperCase().indexOf('AM') > 0) {
            this.amOrPm = 'AM';
          } else {
            this.amOrPm = 'PM';
          }
          value[1] = value[1].replace('AM', '').replace('PM', '');
        }
        if (value[0] === 'now') {
          var now = new Date(+new Date() + this.options.fromNow);
          value = [now.getHours(), now.getMinutes()];
          if (this.options.twelveHour) {
            this.amOrPm = value[0] >= 12 && value[0] < 24 ? 'PM' : 'AM';
          }
        }
        this.hours = +value[0] || 0;
        this.minutes = +value[1] || 0;
        this.spanHours.innerHTML = this.hours;
        this.spanMinutes.innerHTML = Timepicker._addLeadingZero(this.minutes);

        this._updateAmPmView();
      }
    }, {
      key: "showView",
      value: function showView(view, delay) {
        if (view === 'minutes' && $(this.hoursView).css('visibility') === 'visible') {
          // raiseCallback(this.options.beforeHourSelect);
        }
        var isHours = view === 'hours',
            nextView = isHours ? this.hoursView : this.minutesView,
            hideView = isHours ? this.minutesView : this.hoursView;
        this.currentView = view;

        $(this.spanHours).toggleClass('text-primary', isHours);
        $(this.spanMinutes).toggleClass('text-primary', !isHours);

        // Transition view
        hideView.classList.add('timepicker-dial-out');
        $(nextView).css('visibility', 'visible').removeClass('timepicker-dial-out');

        // Reset clock hand
        this.resetClock(delay);

        // After transitions ended
        clearTimeout(this.toggleViewTimer);
        this.toggleViewTimer = setTimeout(function () {
          $(hideView).css('visibility', 'hidden');
        }, this.options.duration);
      }
    }, {
      key: "resetClock",
      value: function resetClock(delay) {
        var view = this.currentView,
            value = this[view],
            isHours = view === 'hours',
            unit = Math.PI / (isHours ? 6 : 30),
            radian = value * unit,
            radius = isHours && value > 0 && value < 13 ? this.options.innerRadius : this.options.outerRadius,
            x = Math.sin(radian) * radius,
            y = -Math.cos(radian) * radius,
            self = this;

        if (delay) {
          $(this.canvas).addClass('timepicker-canvas-out');
          setTimeout(function () {
            $(self.canvas).removeClass('timepicker-canvas-out');
            self.setHand(x, y);
          }, delay);
        } else {
          this.setHand(x, y);
        }
      }
    }, {
      key: "setHand",
      value: function setHand(x, y, roundBy5) {
        var _this60 = this;

        var radian = Math.atan2(x, -y),
            isHours = this.currentView === 'hours',
            unit = Math.PI / (isHours || roundBy5 ? 6 : 30),
            z = Math.sqrt(x * x + y * y),
            inner = isHours && z < (this.options.outerRadius + this.options.innerRadius) / 2,
            radius = inner ? this.options.innerRadius : this.options.outerRadius;

        if (this.options.twelveHour) {
          radius = this.options.outerRadius;
        }

        // Radian should in range [0, 2PI]
        if (radian < 0) {
          radian = Math.PI * 2 + radian;
        }

        // Get the round value
        var value = Math.round(radian / unit);

        // Get the round radian
        radian = value * unit;

        // Correct the hours or minutes
        if (this.options.twelveHour) {
          if (isHours) {
            if (value === 0) value = 12;
          } else {
            if (roundBy5) value *= 5;
            if (value === 60) value = 0;
          }
        } else {
          if (isHours) {
            if (value === 12) {
              value = 0;
            }
            value = inner ? value === 0 ? 12 : value : value === 0 ? 0 : value + 12;
          } else {
            if (roundBy5) {
              value *= 5;
            }
            if (value === 60) {
              value = 0;
            }
          }
        }

        // Once hours or minutes changed, vibrate the device
        if (this[this.currentView] !== value) {
          if (this.vibrate && this.options.vibrate) {
            // Do not vibrate too frequently
            if (!this.vibrateTimer) {
              navigator[this.vibrate](10);
              this.vibrateTimer = setTimeout(function () {
                _this60.vibrateTimer = null;
              }, 100);
            }
          }
        }

        this[this.currentView] = value;
        if (isHours) {
          this['spanHours'].innerHTML = value;
        } else {
          this['spanMinutes'].innerHTML = Timepicker._addLeadingZero(value);
        }

        // Set clock hand and others' position
        var cx1 = Math.sin(radian) * (radius - this.options.tickRadius),
            cy1 = -Math.cos(radian) * (radius - this.options.tickRadius),
            cx2 = Math.sin(radian) * radius,
            cy2 = -Math.cos(radian) * radius;
        this.hand.setAttribute('x2', cx1);
        this.hand.setAttribute('y2', cy1);
        this.bg.setAttribute('cx', cx2);
        this.bg.setAttribute('cy', cy2);
      }
    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        this.isOpen = true;
        this._updateTimeFromInput();
        this.showView('hours');

        this.modal.open();
      }
    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isOpen = false;
        this.modal.close();
      }

      /**
       * Finish timepicker selection.
       */

    }, {
      key: "done",
      value: function done(e, clearValue) {
        // Set input value
        var last = this.el.value;
        var value = clearValue ? '' : Timepicker._addLeadingZero(this.hours) + ':' + Timepicker._addLeadingZero(this.minutes);
        this.time = value;
        if (!clearValue && this.options.twelveHour) {
          value = value + " " + this.amOrPm;
        }
        this.el.value = value;

        // Trigger change event
        if (value !== last) {
          this.$el.trigger('change');
        }

        this.close();
        this.el.focus();
      }
    }, {
      key: "clear",
      value: function clear() {
        this.done(null, true);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Timepicker.__proto__ || Object.getPrototypeOf(Timepicker), "init", this).call(this, this, els, options);
      }
    }, {
      key: "_addLeadingZero",
      value: function _addLeadingZero(num) {
        return (num < 10 ? '0' : '') + num;
      }
    }, {
      key: "_createSVGEl",
      value: function _createSVGEl(name) {
        var svgNS = 'http://www.w3.org/2000/svg';
        return document.createElementNS(svgNS, name);
      }

      /**
       * @typedef {Object} Point
       * @property {number} x The X Coordinate
       * @property {number} y The Y Coordinate
       */

      /**
       * Get x position of mouse or touch event
       * @param {Event} e
       * @return {Point} x and y location
       */

    }, {
      key: "_Pos",
      value: function _Pos(e) {
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return { x: e.targetTouches[0].clientX, y: e.targetTouches[0].clientY };
        }
        // mouse event
        return { x: e.clientX, y: e.clientY };
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Timepicker;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Timepicker;
  }(Component);

  Timepicker._template = ['<div class= "modal timepicker-modal">', '<div class="modal-content timepicker-container">', '<div class="timepicker-digital-display">', '<div class="timepicker-text-container">', '<div class="timepicker-display-column">', '<span class="timepicker-span-hours text-primary"></span>', ':', '<span class="timepicker-span-minutes"></span>', '</div>', '<div class="timepicker-display-column timepicker-display-am-pm">', '<div class="timepicker-span-am-pm"></div>', '</div>', '</div>', '</div>', '<div class="timepicker-analog-display">', '<div class="timepicker-plate">', '<div class="timepicker-canvas"></div>', '<div class="timepicker-dial timepicker-hours"></div>', '<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>', '</div>', '<div class="timepicker-footer"></div>', '</div>', '</div>', '</div>'].join('');

  M.Timepicker = Timepicker;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Timepicker, 'timepicker', 'M_Timepicker');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {};

  /**
   * @class
   *
   */

  var CharacterCounter = function (_Component17) {
    _inherits(CharacterCounter, _Component17);

    /**
     * Construct CharacterCounter instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function CharacterCounter(el, options) {
      _classCallCheck(this, CharacterCounter);

      var _this61 = _possibleConstructorReturn(this, (CharacterCounter.__proto__ || Object.getPrototypeOf(CharacterCounter)).call(this, CharacterCounter, el, options));

      _this61.el.M_CharacterCounter = _this61;

      /**
       * Options for the character counter
       */
      _this61.options = $.extend({}, CharacterCounter.defaults, options);

      _this61.isInvalid = false;
      _this61.isValidLength = false;
      _this61._setupCounter();
      _this61._setupEventHandlers();
      return _this61;
    }

    _createClass(CharacterCounter, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.CharacterCounter = undefined;
        this._removeCounter();
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleUpdateCounterBound = this.updateCounter.bind(this);

        this.el.addEventListener('focus', this._handleUpdateCounterBound, true);
        this.el.addEventListener('input', this._handleUpdateCounterBound, true);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('focus', this._handleUpdateCounterBound, true);
        this.el.removeEventListener('input', this._handleUpdateCounterBound, true);
      }

      /**
       * Setup counter element
       */

    }, {
      key: "_setupCounter",
      value: function _setupCounter() {
        this.counterEl = document.createElement('span');
        $(this.counterEl).addClass('character-counter').css({
          float: 'right',
          'font-size': '12px',
          height: 1
        });

        this.$el.parent().append(this.counterEl);
      }

      /**
       * Remove counter element
       */

    }, {
      key: "_removeCounter",
      value: function _removeCounter() {
        $(this.counterEl).remove();
      }

      /**
       * Update counter
       */

    }, {
      key: "updateCounter",
      value: function updateCounter() {
        var maxLength = +this.$el.attr('data-length'),
            actualLength = this.el.value.length;
        this.isValidLength = actualLength <= maxLength;
        var counterString = actualLength;

        if (maxLength) {
          counterString += '/' + maxLength;
          this._validateInput();
        }

        $(this.counterEl).html(counterString);
      }

      /**
       * Add validation classes
       */

    }, {
      key: "_validateInput",
      value: function _validateInput() {
        if (this.isValidLength && this.isInvalid) {
          this.isInvalid = false;
          this.$el.removeClass('invalid');
        } else if (!this.isValidLength && !this.isInvalid) {
          this.isInvalid = true;
          this.$el.removeClass('valid');
          this.$el.addClass('invalid');
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(CharacterCounter.__proto__ || Object.getPrototypeOf(CharacterCounter), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_CharacterCounter;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return CharacterCounter;
  }(Component);

  M.CharacterCounter = CharacterCounter;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(CharacterCounter, 'characterCounter', 'M_CharacterCounter');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    duration: 200, // ms
    dist: -100, // zoom scale TODO: make this more intuitive as an option
    shift: 0, // spacing for center image
    padding: 0, // Padding between non center items
    numVisible: 5, // Number of visible items in carousel
    fullWidth: false, // Change to full width styles
    indicators: false, // Toggle indicators
    noWrap: false, // Don't wrap around and cycle through items.
    onCycleTo: null // Callback for when a new slide is cycled to.
  };

  /**
   * @class
   *
   */

  var Carousel = function (_Component18) {
    _inherits(Carousel, _Component18);

    /**
     * Construct Carousel instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Carousel(el, options) {
      _classCallCheck(this, Carousel);

      var _this62 = _possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, Carousel, el, options));

      _this62.el.M_Carousel = _this62;

      /**
       * Options for the carousel
       * @member Carousel#options
       * @prop {Number} duration
       * @prop {Number} dist
       * @prop {Number} shift
       * @prop {Number} padding
       * @prop {Number} numVisible
       * @prop {Boolean} fullWidth
       * @prop {Boolean} indicators
       * @prop {Boolean} noWrap
       * @prop {Function} onCycleTo
       */
      _this62.options = $.extend({}, Carousel.defaults, options);

      // Setup
      _this62.hasMultipleSlides = _this62.$el.find('.carousel-item').length > 1;
      _this62.showIndicators = _this62.options.indicators && _this62.hasMultipleSlides;
      _this62.noWrap = _this62.options.noWrap || !_this62.hasMultipleSlides;
      _this62.pressed = false;
      _this62.dragged = false;
      _this62.offset = _this62.target = 0;
      _this62.images = [];
      _this62.itemWidth = _this62.$el.find('.carousel-item').first().innerWidth();
      _this62.itemHeight = _this62.$el.find('.carousel-item').first().innerHeight();
      _this62.dim = _this62.itemWidth * 2 + _this62.options.padding || 1; // Make sure dim is non zero for divisions.
      _this62._autoScrollBound = _this62._autoScroll.bind(_this62);
      _this62._trackBound = _this62._track.bind(_this62);

      // Full Width carousel setup
      if (_this62.options.fullWidth) {
        _this62.options.dist = 0;
        _this62._setCarouselHeight();

        // Offset fixed items when indicators.
        if (_this62.showIndicators) {
          _this62.$el.find('.carousel-fixed-item').addClass('with-indicators');
        }
      }

      // Iterate through slides
      _this62.$indicators = $('<ul class="indicators"></ul>');
      _this62.$el.find('.carousel-item').each(function (el, i) {
        _this62.images.push(el);
        if (_this62.showIndicators) {
          var $indicator = $('<li class="indicator-item"></li>');

          // Add active to first by default.
          if (i === 0) {
            $indicator[0].classList.add('active');
          }

          _this62.$indicators.append($indicator);
        }
      });
      if (_this62.showIndicators) {
        _this62.$el.append(_this62.$indicators);
      }
      _this62.count = _this62.images.length;

      // Cap numVisible at count
      _this62.options.numVisible = Math.min(_this62.count, _this62.options.numVisible);

      // Setup cross browser string
      _this62.xform = 'transform';
      ['webkit', 'Moz', 'O', 'ms'].every(function (prefix) {
        var e = prefix + 'Transform';
        if (typeof document.body.style[e] !== 'undefined') {
          _this62.xform = e;
          return false;
        }
        return true;
      });

      _this62._setupEventHandlers();
      _this62._scroll(_this62.offset);
      return _this62;
    }

    _createClass(Carousel, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_Carousel = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this63 = this;

        this._handleCarouselTapBound = this._handleCarouselTap.bind(this);
        this._handleCarouselDragBound = this._handleCarouselDrag.bind(this);
        this._handleCarouselReleaseBound = this._handleCarouselRelease.bind(this);
        this._handleCarouselClickBound = this._handleCarouselClick.bind(this);

        if (typeof window.ontouchstart !== 'undefined') {
          this.el.addEventListener('touchstart', this._handleCarouselTapBound);
          this.el.addEventListener('touchmove', this._handleCarouselDragBound);
          this.el.addEventListener('touchend', this._handleCarouselReleaseBound);
        }

        this.el.addEventListener('mousedown', this._handleCarouselTapBound);
        this.el.addEventListener('mousemove', this._handleCarouselDragBound);
        this.el.addEventListener('mouseup', this._handleCarouselReleaseBound);
        this.el.addEventListener('mouseleave', this._handleCarouselReleaseBound);
        this.el.addEventListener('click', this._handleCarouselClickBound);

        if (this.showIndicators && this.$indicators) {
          this._handleIndicatorClickBound = this._handleIndicatorClick.bind(this);
          this.$indicators.find('.indicator-item').each(function (el, i) {
            el.addEventListener('click', _this63._handleIndicatorClickBound);
          });
        }

        // Resize
        var throttledResize = M.throttle(this._handleResize, 200);
        this._handleThrottledResizeBound = throttledResize.bind(this);

        window.addEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this64 = this;

        if (typeof window.ontouchstart !== 'undefined') {
          this.el.removeEventListener('touchstart', this._handleCarouselTapBound);
          this.el.removeEventListener('touchmove', this._handleCarouselDragBound);
          this.el.removeEventListener('touchend', this._handleCarouselReleaseBound);
        }
        this.el.removeEventListener('mousedown', this._handleCarouselTapBound);
        this.el.removeEventListener('mousemove', this._handleCarouselDragBound);
        this.el.removeEventListener('mouseup', this._handleCarouselReleaseBound);
        this.el.removeEventListener('mouseleave', this._handleCarouselReleaseBound);
        this.el.removeEventListener('click', this._handleCarouselClickBound);

        if (this.showIndicators && this.$indicators) {
          this.$indicators.find('.indicator-item').each(function (el, i) {
            el.removeEventListener('click', _this64._handleIndicatorClickBound);
          });
        }

        window.removeEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Handle Carousel Tap
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselTap",
      value: function _handleCarouselTap(e) {
        // Fixes firefox draggable image bug
        if (e.type === 'mousedown' && $(e.target).is('img')) {
          e.preventDefault();
        }
        this.pressed = true;
        this.dragged = false;
        this.verticalDragged = false;
        this.reference = this._xpos(e);
        this.referenceY = this._ypos(e);

        this.velocity = this.amplitude = 0;
        this.frame = this.offset;
        this.timestamp = Date.now();
        clearInterval(this.ticker);
        this.ticker = setInterval(this._trackBound, 100);
      }

      /**
       * Handle Carousel Drag
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselDrag",
      value: function _handleCarouselDrag(e) {
        var x = void 0,
            y = void 0,
            delta = void 0,
            deltaY = void 0;
        if (this.pressed) {
          x = this._xpos(e);
          y = this._ypos(e);
          delta = this.reference - x;
          deltaY = Math.abs(this.referenceY - y);
          if (deltaY < 30 && !this.verticalDragged) {
            // If vertical scrolling don't allow dragging.
            if (delta > 2 || delta < -2) {
              this.dragged = true;
              this.reference = x;
              this._scroll(this.offset + delta);
            }
          } else if (this.dragged) {
            // If dragging don't allow vertical scroll.
            e.preventDefault();
            e.stopPropagation();
            return false;
          } else {
            // Vertical scrolling.
            this.verticalDragged = true;
          }
        }

        if (this.dragged) {
          // If dragging don't allow vertical scroll.
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
      }

      /**
       * Handle Carousel Release
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselRelease",
      value: function _handleCarouselRelease(e) {
        if (this.pressed) {
          this.pressed = false;
        } else {
          return;
        }

        clearInterval(this.ticker);
        this.target = this.offset;
        if (this.velocity > 10 || this.velocity < -10) {
          this.amplitude = 0.9 * this.velocity;
          this.target = this.offset + this.amplitude;
        }
        this.target = Math.round(this.target / this.dim) * this.dim;

        // No wrap of items.
        if (this.noWrap) {
          if (this.target >= this.dim * (this.count - 1)) {
            this.target = this.dim * (this.count - 1);
          } else if (this.target < 0) {
            this.target = 0;
          }
        }
        this.amplitude = this.target - this.offset;
        this.timestamp = Date.now();
        requestAnimationFrame(this._autoScrollBound);

        if (this.dragged) {
          e.preventDefault();
          e.stopPropagation();
        }
        return false;
      }

      /**
       * Handle Carousel CLick
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselClick",
      value: function _handleCarouselClick(e) {
        // Disable clicks if carousel was dragged.
        if (this.dragged) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        } else if (!this.options.fullWidth) {
          var clickedIndex = $(e.target).closest('.carousel-item').index();
          var diff = this._wrap(this.center) - clickedIndex;

          // Disable clicks if carousel was shifted by click
          if (diff !== 0) {
            e.preventDefault();
            e.stopPropagation();
          }
          this._cycleTo(clickedIndex);
        }
      }

      /**
       * Handle Indicator CLick
       * @param {Event} e
       */

    }, {
      key: "_handleIndicatorClick",
      value: function _handleIndicatorClick(e) {
        e.stopPropagation();

        var indicator = $(e.target).closest('.indicator-item');
        if (indicator.length) {
          this._cycleTo(indicator.index());
        }
      }

      /**
       * Handle Throttle Resize
       * @param {Event} e
       */

    }, {
      key: "_handleResize",
      value: function _handleResize(e) {
        if (this.options.fullWidth) {
          this.itemWidth = this.$el.find('.carousel-item').first().innerWidth();
          this.imageHeight = this.$el.find('.carousel-item.active').height();
          this.dim = this.itemWidth * 2 + this.options.padding;
          this.offset = this.center * 2 * this.itemWidth;
          this.target = this.offset;
          this._setCarouselHeight(true);
        } else {
          this._scroll();
        }
      }

      /**
       * Set carousel height based on first slide
       * @param {Booleam} imageOnly - true for image slides
       */

    }, {
      key: "_setCarouselHeight",
      value: function _setCarouselHeight(imageOnly) {
        var _this65 = this;

        var firstSlide = this.$el.find('.carousel-item.active').length ? this.$el.find('.carousel-item.active').first() : this.$el.find('.carousel-item').first();
        var firstImage = firstSlide.find('img').first();
        if (firstImage.length) {
          if (firstImage[0].complete) {
            // If image won't trigger the load event
            var imageHeight = firstImage.height();
            if (imageHeight > 0) {
              this.$el.css('height', imageHeight + 'px');
            } else {
              // If image still has no height, use the natural dimensions to calculate
              var naturalWidth = firstImage[0].naturalWidth;
              var naturalHeight = firstImage[0].naturalHeight;
              var adjustedHeight = this.$el.width() / naturalWidth * naturalHeight;
              this.$el.css('height', adjustedHeight + 'px');
            }
          } else {
            // Get height when image is loaded normally
            firstImage.one('load', function (el, i) {
              _this65.$el.css('height', el.offsetHeight + 'px');
            });
          }
        } else if (!imageOnly) {
          var slideHeight = firstSlide.height();
          this.$el.css('height', slideHeight + 'px');
        }
      }

      /**
       * Get x position from event
       * @param {Event} e
       */

    }, {
      key: "_xpos",
      value: function _xpos(e) {
        // touch event
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return e.targetTouches[0].clientX;
        }

        // mouse event
        return e.clientX;
      }

      /**
       * Get y position from event
       * @param {Event} e
       */

    }, {
      key: "_ypos",
      value: function _ypos(e) {
        // touch event
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return e.targetTouches[0].clientY;
        }

        // mouse event
        return e.clientY;
      }

      /**
       * Wrap index
       * @param {Number} x
       */

    }, {
      key: "_wrap",
      value: function _wrap(x) {
        return x >= this.count ? x % this.count : x < 0 ? this._wrap(this.count + x % this.count) : x;
      }

      /**
       * Tracks scrolling information
       */

    }, {
      key: "_track",
      value: function _track() {
        var now = void 0,
            elapsed = void 0,
            delta = void 0,
            v = void 0;

        now = Date.now();
        elapsed = now - this.timestamp;
        this.timestamp = now;
        delta = this.offset - this.frame;
        this.frame = this.offset;

        v = 1000 * delta / (1 + elapsed);
        this.velocity = 0.8 * v + 0.2 * this.velocity;
      }

      /**
       * Auto scrolls to nearest carousel item.
       */

    }, {
      key: "_autoScroll",
      value: function _autoScroll() {
        var elapsed = void 0,
            delta = void 0;

        if (this.amplitude) {
          elapsed = Date.now() - this.timestamp;
          delta = this.amplitude * Math.exp(-elapsed / this.options.duration);
          if (delta > 2 || delta < -2) {
            this._scroll(this.target - delta);
            requestAnimationFrame(this._autoScrollBound);
          } else {
            this._scroll(this.target);
          }
        }
      }

      /**
       * Scroll to target
       * @param {Number} x
       */

    }, {
      key: "_scroll",
      value: function _scroll(x) {
        var _this66 = this;

        // Track scrolling state
        if (!this.$el.hasClass('scrolling')) {
          this.el.classList.add('scrolling');
        }
        if (this.scrollingTimeout != null) {
          window.clearTimeout(this.scrollingTimeout);
        }
        this.scrollingTimeout = window.setTimeout(function () {
          _this66.$el.removeClass('scrolling');
        }, this.options.duration);

        // Start actual scroll
        var i = void 0,
            half = void 0,
            delta = void 0,
            dir = void 0,
            tween = void 0,
            el = void 0,
            alignment = void 0,
            zTranslation = void 0,
            tweenedOpacity = void 0,
            centerTweenedOpacity = void 0;
        var lastCenter = this.center;
        var numVisibleOffset = 1 / this.options.numVisible;

        this.offset = typeof x === 'number' ? x : this.offset;
        this.center = Math.floor((this.offset + this.dim / 2) / this.dim);
        delta = this.offset - this.center * this.dim;
        dir = delta < 0 ? 1 : -1;
        tween = -dir * delta * 2 / this.dim;
        half = this.count >> 1;

        if (this.options.fullWidth) {
          alignment = 'translateX(0)';
          centerTweenedOpacity = 1;
        } else {
          alignment = 'translateX(' + (this.el.clientWidth - this.itemWidth) / 2 + 'px) ';
          alignment += 'translateY(' + (this.el.clientHeight - this.itemHeight) / 2 + 'px)';
          centerTweenedOpacity = 1 - numVisibleOffset * tween;
        }

        // Set indicator active
        if (this.showIndicators) {
          var diff = this.center % this.count;
          var activeIndicator = this.$indicators.find('.indicator-item.active');
          if (activeIndicator.index() !== diff) {
            activeIndicator.removeClass('active');
            this.$indicators.find('.indicator-item').eq(diff)[0].classList.add('active');
          }
        }

        // center
        // Don't show wrapped items.
        if (!this.noWrap || this.center >= 0 && this.center < this.count) {
          el = this.images[this._wrap(this.center)];

          // Add active class to center item.
          if (!$(el).hasClass('active')) {
            this.$el.find('.carousel-item').removeClass('active');
            el.classList.add('active');
          }
          var transformString = alignment + " translateX(" + -delta / 2 + "px) translateX(" + dir * this.options.shift * tween * i + "px) translateZ(" + this.options.dist * tween + "px)";
          this._updateItemStyle(el, centerTweenedOpacity, 0, transformString);
        }

        for (i = 1; i <= half; ++i) {
          // right side
          if (this.options.fullWidth) {
            zTranslation = this.options.dist;
            tweenedOpacity = i === half && delta < 0 ? 1 - tween : 1;
          } else {
            zTranslation = this.options.dist * (i * 2 + tween * dir);
            tweenedOpacity = 1 - numVisibleOffset * (i * 2 + tween * dir);
          }
          // Don't show wrapped items.
          if (!this.noWrap || this.center + i < this.count) {
            el = this.images[this._wrap(this.center + i)];
            var _transformString = alignment + " translateX(" + (this.options.shift + (this.dim * i - delta) / 2) + "px) translateZ(" + zTranslation + "px)";
            this._updateItemStyle(el, tweenedOpacity, -i, _transformString);
          }

          // left side
          if (this.options.fullWidth) {
            zTranslation = this.options.dist;
            tweenedOpacity = i === half && delta > 0 ? 1 - tween : 1;
          } else {
            zTranslation = this.options.dist * (i * 2 - tween * dir);
            tweenedOpacity = 1 - numVisibleOffset * (i * 2 - tween * dir);
          }
          // Don't show wrapped items.
          if (!this.noWrap || this.center - i >= 0) {
            el = this.images[this._wrap(this.center - i)];
            var _transformString2 = alignment + " translateX(" + (-this.options.shift + (-this.dim * i - delta) / 2) + "px) translateZ(" + zTranslation + "px)";
            this._updateItemStyle(el, tweenedOpacity, -i, _transformString2);
          }
        }

        // center
        // Don't show wrapped items.
        if (!this.noWrap || this.center >= 0 && this.center < this.count) {
          el = this.images[this._wrap(this.center)];
          var _transformString3 = alignment + " translateX(" + -delta / 2 + "px) translateX(" + dir * this.options.shift * tween + "px) translateZ(" + this.options.dist * tween + "px)";
          this._updateItemStyle(el, centerTweenedOpacity, 0, _transformString3);
        }

        // onCycleTo callback
        var $currItem = this.$el.find('.carousel-item').eq(this._wrap(this.center));
        if (lastCenter !== this.center && typeof this.options.onCycleTo === 'function') {
          this.options.onCycleTo.call(this, $currItem[0], this.dragged);
        }

        // One time callback
        if (typeof this.oneTimeCallback === 'function') {
          this.oneTimeCallback.call(this, $currItem[0], this.dragged);
          this.oneTimeCallback = null;
        }
      }

      /**
       * Cycle to target
       * @param {Element} el
       * @param {Number} opacity
       * @param {Number} zIndex
       * @param {String} transform
       */

    }, {
      key: "_updateItemStyle",
      value: function _updateItemStyle(el, opacity, zIndex, transform) {
        el.style[this.xform] = transform;
        el.style.zIndex = zIndex;
        el.style.opacity = opacity;
        el.style.visibility = 'visible';
      }

      /**
       * Cycle to target
       * @param {Number} n
       * @param {Function} callback
       */

    }, {
      key: "_cycleTo",
      value: function _cycleTo(n, callback) {
        var diff = this.center % this.count - n;

        // Account for wraparound.
        if (!this.noWrap) {
          if (diff < 0) {
            if (Math.abs(diff + this.count) < Math.abs(diff)) {
              diff += this.count;
            }
          } else if (diff > 0) {
            if (Math.abs(diff - this.count) < diff) {
              diff -= this.count;
            }
          }
        }

        this.target = this.dim * Math.round(this.offset / this.dim);
        // Next
        if (diff < 0) {
          this.target += this.dim * Math.abs(diff);

          // Prev
        } else if (diff > 0) {
          this.target -= this.dim * diff;
        }

        // Set one time callback
        if (typeof callback === 'function') {
          this.oneTimeCallback = callback;
        }

        // Scroll
        if (this.offset !== this.target) {
          this.amplitude = this.target - this.offset;
          this.timestamp = Date.now();
          requestAnimationFrame(this._autoScrollBound);
        }
      }

      /**
       * Cycle to next item
       * @param {Number} [n]
       */

    }, {
      key: "next",
      value: function next(n) {
        if (n === undefined || isNaN(n)) {
          n = 1;
        }

        var index = this.center + n;
        if (index >= this.count || index < 0) {
          if (this.noWrap) {
            return;
          }

          index = this._wrap(index);
        }
        this._cycleTo(index);
      }

      /**
       * Cycle to previous item
       * @param {Number} [n]
       */

    }, {
      key: "prev",
      value: function prev(n) {
        if (n === undefined || isNaN(n)) {
          n = 1;
        }

        var index = this.center - n;
        if (index >= this.count || index < 0) {
          if (this.noWrap) {
            return;
          }

          index = this._wrap(index);
        }

        this._cycleTo(index);
      }

      /**
       * Cycle to nth item
       * @param {Number} [n]
       * @param {Function} callback
       */

    }, {
      key: "set",
      value: function set(n, callback) {
        if (n === undefined || isNaN(n)) {
          n = 0;
        }

        if (n > this.count || n < 0) {
          if (this.noWrap) {
            return;
          }

          n = this._wrap(n);
        }

        this._cycleTo(n, callback);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Carousel.__proto__ || Object.getPrototypeOf(Carousel), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Carousel;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Carousel;
  }(Component);

  M.Carousel = Carousel;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Carousel, 'carousel', 'M_Carousel');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    onOpen: undefined,
    onClose: undefined
  };

  /**
   * @class
   *
   */

  var TapTarget = function (_Component19) {
    _inherits(TapTarget, _Component19);

    /**
     * Construct TapTarget instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function TapTarget(el, options) {
      _classCallCheck(this, TapTarget);

      var _this67 = _possibleConstructorReturn(this, (TapTarget.__proto__ || Object.getPrototypeOf(TapTarget)).call(this, TapTarget, el, options));

      _this67.el.M_TapTarget = _this67;

      /**
       * Options for the select
       * @member TapTarget#options
       * @prop {Function} onOpen - Callback function called when feature discovery is opened
       * @prop {Function} onClose - Callback function called when feature discovery is closed
       */
      _this67.options = $.extend({}, TapTarget.defaults, options);

      _this67.isOpen = false;

      // setup
      _this67.$origin = $('#' + _this67.$el.attr('data-target'));
      _this67._setup();

      _this67._calculatePositioning();
      _this67._setupEventHandlers();
      return _this67;
    }

    _createClass(TapTarget, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.TapTarget = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleDocumentClickBound = this._handleDocumentClick.bind(this);
        this._handleTargetClickBound = this._handleTargetClick.bind(this);
        this._handleOriginClickBound = this._handleOriginClick.bind(this);

        this.el.addEventListener('click', this._handleTargetClickBound);
        this.originEl.addEventListener('click', this._handleOriginClickBound);

        // Resize
        var throttledResize = M.throttle(this._handleResize, 200);
        this._handleThrottledResizeBound = throttledResize.bind(this);

        window.addEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleTargetClickBound);
        this.originEl.removeEventListener('click', this._handleOriginClickBound);
        window.removeEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Handle Target Click
       * @param {Event} e
       */

    }, {
      key: "_handleTargetClick",
      value: function _handleTargetClick(e) {
        this.open();
      }

      /**
       * Handle Origin Click
       * @param {Event} e
       */

    }, {
      key: "_handleOriginClick",
      value: function _handleOriginClick(e) {
        this.close();
      }

      /**
       * Handle Resize
       * @param {Event} e
       */

    }, {
      key: "_handleResize",
      value: function _handleResize(e) {
        this._calculatePositioning();
      }

      /**
       * Handle Resize
       * @param {Event} e
       */

    }, {
      key: "_handleDocumentClick",
      value: function _handleDocumentClick(e) {
        if (!$(e.target).closest('.tap-target-wrapper').length) {
          this.close();
          e.preventDefault();
          e.stopPropagation();
        }
      }

      /**
       * Setup Tap Target
       */

    }, {
      key: "_setup",
      value: function _setup() {
        // Creating tap target
        this.wrapper = this.$el.parent()[0];
        this.waveEl = $(this.wrapper).find('.tap-target-wave')[0];
        this.originEl = $(this.wrapper).find('.tap-target-origin')[0];
        this.contentEl = this.$el.find('.tap-target-content')[0];

        // Creating wrapper
        if (!$(this.wrapper).hasClass('.tap-target-wrapper')) {
          this.wrapper = document.createElement('div');
          this.wrapper.classList.add('tap-target-wrapper');
          this.$el.before($(this.wrapper));
          this.wrapper.append(this.el);
        }

        // Creating content
        if (!this.contentEl) {
          this.contentEl = document.createElement('div');
          this.contentEl.classList.add('tap-target-content');
          this.$el.append(this.contentEl);
        }

        // Creating foreground wave
        if (!this.waveEl) {
          this.waveEl = document.createElement('div');
          this.waveEl.classList.add('tap-target-wave');

          // Creating origin
          if (!this.originEl) {
            this.originEl = this.$origin.clone(true, true);
            this.originEl.addClass('tap-target-origin');
            this.originEl.removeAttr('id');
            this.originEl.removeAttr('style');
            this.originEl = this.originEl[0];
            this.waveEl.append(this.originEl);
          }

          this.wrapper.append(this.waveEl);
        }
      }

      /**
       * Calculate positioning
       */

    }, {
      key: "_calculatePositioning",
      value: function _calculatePositioning() {
        // Element or parent is fixed position?
        var isFixed = this.$origin.css('position') === 'fixed';
        if (!isFixed) {
          var parents = this.$origin.parents();
          for (var i = 0; i < parents.length; i++) {
            isFixed = $(parents[i]).css('position') == 'fixed';
            if (isFixed) {
              break;
            }
          }
        }

        // Calculating origin
        var originWidth = this.$origin.outerWidth();
        var originHeight = this.$origin.outerHeight();
        var originTop = isFixed ? this.$origin.offset().top - M.getDocumentScrollTop() : this.$origin.offset().top;
        var originLeft = isFixed ? this.$origin.offset().left - M.getDocumentScrollLeft() : this.$origin.offset().left;

        // Calculating screen
        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var centerX = windowWidth / 2;
        var centerY = windowHeight / 2;
        var isLeft = originLeft <= centerX;
        var isRight = originLeft > centerX;
        var isTop = originTop <= centerY;
        var isBottom = originTop > centerY;
        var isCenterX = originLeft >= windowWidth * 0.25 && originLeft <= windowWidth * 0.75;

        // Calculating tap target
        var tapTargetWidth = this.$el.outerWidth();
        var tapTargetHeight = this.$el.outerHeight();
        var tapTargetTop = originTop + originHeight / 2 - tapTargetHeight / 2;
        var tapTargetLeft = originLeft + originWidth / 2 - tapTargetWidth / 2;
        var tapTargetPosition = isFixed ? 'fixed' : 'absolute';

        // Calculating content
        var tapTargetTextWidth = isCenterX ? tapTargetWidth : tapTargetWidth / 2 + originWidth;
        var tapTargetTextHeight = tapTargetHeight / 2;
        var tapTargetTextTop = isTop ? tapTargetHeight / 2 : 0;
        var tapTargetTextBottom = 0;
        var tapTargetTextLeft = isLeft && !isCenterX ? tapTargetWidth / 2 - originWidth : 0;
        var tapTargetTextRight = 0;
        var tapTargetTextPadding = originWidth;
        var tapTargetTextAlign = isBottom ? 'bottom' : 'top';

        // Calculating wave
        var tapTargetWaveWidth = originWidth > originHeight ? originWidth * 2 : originWidth * 2;
        var tapTargetWaveHeight = tapTargetWaveWidth;
        var tapTargetWaveTop = tapTargetHeight / 2 - tapTargetWaveHeight / 2;
        var tapTargetWaveLeft = tapTargetWidth / 2 - tapTargetWaveWidth / 2;

        // Setting tap target
        var tapTargetWrapperCssObj = {};
        tapTargetWrapperCssObj.top = isTop ? tapTargetTop + 'px' : '';
        tapTargetWrapperCssObj.right = isRight ? windowWidth - tapTargetLeft - tapTargetWidth + 'px' : '';
        tapTargetWrapperCssObj.bottom = isBottom ? windowHeight - tapTargetTop - tapTargetHeight + 'px' : '';
        tapTargetWrapperCssObj.left = isLeft ? tapTargetLeft + 'px' : '';
        tapTargetWrapperCssObj.position = tapTargetPosition;
        $(this.wrapper).css(tapTargetWrapperCssObj);

        // Setting content
        $(this.contentEl).css({
          width: tapTargetTextWidth + 'px',
          height: tapTargetTextHeight + 'px',
          top: tapTargetTextTop + 'px',
          right: tapTargetTextRight + 'px',
          bottom: tapTargetTextBottom + 'px',
          left: tapTargetTextLeft + 'px',
          padding: tapTargetTextPadding + 'px',
          verticalAlign: tapTargetTextAlign
        });

        // Setting wave
        $(this.waveEl).css({
          top: tapTargetWaveTop + 'px',
          left: tapTargetWaveLeft + 'px',
          width: tapTargetWaveWidth + 'px',
          height: tapTargetWaveHeight + 'px'
        });
      }

      /**
       * Open TapTarget
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        // onOpen callback
        if (typeof this.options.onOpen === 'function') {
          this.options.onOpen.call(this, this.$origin[0]);
        }

        this.isOpen = true;
        this.wrapper.classList.add('open');

        document.body.addEventListener('click', this._handleDocumentClickBound, true);
        document.body.addEventListener('touchend', this._handleDocumentClickBound);
      }

      /**
       * Close Tap Target
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        // onClose callback
        if (typeof this.options.onClose === 'function') {
          this.options.onClose.call(this, this.$origin[0]);
        }

        this.isOpen = false;
        this.wrapper.classList.remove('open');

        document.body.removeEventListener('click', this._handleDocumentClickBound, true);
        document.body.removeEventListener('touchend', this._handleDocumentClickBound);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(TapTarget.__proto__ || Object.getPrototypeOf(TapTarget), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_TapTarget;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return TapTarget;
  }(Component);

  M.TapTarget = TapTarget;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(TapTarget, 'tapTarget', 'M_TapTarget');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    classes: '',
    dropdownOptions: {}
  };

  /**
   * @class
   *
   */

  var FormSelect = function (_Component20) {
    _inherits(FormSelect, _Component20);

    /**
     * Construct FormSelect instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function FormSelect(el, options) {
      _classCallCheck(this, FormSelect);

      // Don't init if browser default version
      var _this68 = _possibleConstructorReturn(this, (FormSelect.__proto__ || Object.getPrototypeOf(FormSelect)).call(this, FormSelect, el, options));

      if (_this68.$el.hasClass('browser-default')) {
        return _possibleConstructorReturn(_this68);
      }

      _this68.el.M_FormSelect = _this68;

      /**
       * Options for the select
       * @member FormSelect#options
       */
      _this68.options = $.extend({}, FormSelect.defaults, options);

      _this68.isMultiple = _this68.$el.prop('multiple');

      // Setup
      _this68.el.tabIndex = -1;
      _this68._keysSelected = {};
      _this68._valueDict = {}; // Maps key to original and generated option element.
      _this68._setupDropdown();

      _this68._setupEventHandlers();
      return _this68;
    }

    _createClass(FormSelect, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._removeDropdown();
        this.el.M_FormSelect = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this69 = this;

        this._handleSelectChangeBound = this._handleSelectChange.bind(this);
        this._handleOptionClickBound = this._handleOptionClick.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);

        $(this.dropdownOptions).find('li:not(.optgroup)').each(function (el) {
          el.addEventListener('click', _this69._handleOptionClickBound);
        });
        this.el.addEventListener('change', this._handleSelectChangeBound);
        this.input.addEventListener('click', this._handleInputClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this70 = this;

        $(this.dropdownOptions).find('li:not(.optgroup)').each(function (el) {
          el.removeEventListener('click', _this70._handleOptionClickBound);
        });
        this.el.removeEventListener('change', this._handleSelectChangeBound);
        this.input.removeEventListener('click', this._handleInputClickBound);
      }

      /**
       * Handle Select Change
       * @param {Event} e
       */

    }, {
      key: "_handleSelectChange",
      value: function _handleSelectChange(e) {
        this._setValueToInput();
      }

      /**
       * Handle Option Click
       * @param {Event} e
       */

    }, {
      key: "_handleOptionClick",
      value: function _handleOptionClick(e) {
        e.preventDefault();
        var option = $(e.target).closest('li')[0];
        var key = option.id;
        if (!$(option).hasClass('disabled') && !$(option).hasClass('optgroup') && key.length) {
          var selected = true;

          if (this.isMultiple) {
            // Deselect placeholder option if still selected.
            var placeholderOption = $(this.dropdownOptions).find('li.disabled.selected');
            if (placeholderOption.length) {
              placeholderOption.removeClass('selected');
              placeholderOption.find('input[type="checkbox"]').prop('checked', false);
              this._toggleEntryFromArray(placeholderOption[0].id);
            }
            selected = this._toggleEntryFromArray(key);
          } else {
            $(this.dropdownOptions).find('li').removeClass('selected');
            $(option).toggleClass('selected', selected);
          }

          // Set selected on original select option
          // Only trigger if selected state changed
          var prevSelected = $(this._valueDict[key].el).prop('selected');
          if (prevSelected !== selected) {
            $(this._valueDict[key].el).prop('selected', selected);
            this.$el.trigger('change');
          }
        }

        e.stopPropagation();
      }

      /**
       * Handle Input Click
       */

    }, {
      key: "_handleInputClick",
      value: function _handleInputClick() {
        if (this.dropdown && this.dropdown.isOpen) {
          this._setValueToInput();
          this._setSelectedStates();
        }
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_setupDropdown",
      value: function _setupDropdown() {
        var _this71 = this;

        this.wrapper = document.createElement('div');
        $(this.wrapper).addClass('select-wrapper ' + this.options.classes);
        this.$el.before($(this.wrapper));
        this.wrapper.appendChild(this.el);

        if (this.el.disabled) {
          this.wrapper.classList.add('disabled');
        }

        // Create dropdown
        this.$selectOptions = this.$el.children('option, optgroup');
        this.dropdownOptions = document.createElement('ul');
        this.dropdownOptions.id = "select-options-" + M.guid();
        $(this.dropdownOptions).addClass('dropdown-content select-dropdown ' + (this.isMultiple ? 'multiple-select-dropdown' : ''));

        // Create dropdown structure.
        if (this.$selectOptions.length) {
          this.$selectOptions.each(function (el) {
            if ($(el).is('option')) {
              // Direct descendant option.
              var optionEl = void 0;
              if (_this71.isMultiple) {
                optionEl = _this71._appendOptionWithIcon(_this71.$el, el, 'multiple');
              } else {
                optionEl = _this71._appendOptionWithIcon(_this71.$el, el);
              }

              _this71._addOptionToValueDict(el, optionEl);
            } else if ($(el).is('optgroup')) {
              // Optgroup.
              var selectOptions = $(el).children('option');
              $(_this71.dropdownOptions).append($('<li class="optgroup"><span>' + el.getAttribute('label') + '</span></li>')[0]);

              selectOptions.each(function (el) {
                var optionEl = _this71._appendOptionWithIcon(_this71.$el, el, 'optgroup-option');
                _this71._addOptionToValueDict(el, optionEl);
              });
            }
          });
        }

        this.$el.after(this.dropdownOptions);

        // Add input dropdown
        this.input = document.createElement('input');
        $(this.input).addClass('select-dropdown dropdown-trigger');
        this.input.setAttribute('type', 'text');
        this.input.setAttribute('readonly', 'true');
        this.input.setAttribute('data-target', this.dropdownOptions.id);
        if (this.el.disabled) {
          $(this.input).prop('disabled', 'true');
        }

        this.$el.before(this.input);
        this._setValueToInput();

        // Add caret
        var dropdownIcon = $('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
        this.$el.before(dropdownIcon[0]);

        // Initialize dropdown
        if (!this.el.disabled) {
          var dropdownOptions = $.extend({}, this.options.dropdownOptions);

          // Add callback for centering selected option when dropdown content is scrollable
          dropdownOptions.onOpenEnd = function (el) {
            var selectedOption = $(_this71.dropdownOptions).find('.selected').first();

            if (selectedOption.length) {
              // Focus selected option in dropdown
              M.keyDown = true;
              _this71.dropdown.focusedIndex = selectedOption.index();
              _this71.dropdown._focusFocusedItem();
              M.keyDown = false;

              // Handle scrolling to selected option
              if (_this71.dropdown.isScrollable) {
                var scrollOffset = selectedOption[0].getBoundingClientRect().top - _this71.dropdownOptions.getBoundingClientRect().top; // scroll to selected option
                scrollOffset -= _this71.dropdownOptions.clientHeight / 2; // center in dropdown
                _this71.dropdownOptions.scrollTop = scrollOffset;
              }
            }
          };

          if (this.isMultiple) {
            dropdownOptions.closeOnClick = false;
          }
          this.dropdown = M.Dropdown.init(this.input, dropdownOptions);
        }

        // Add initial selections
        this._setSelectedStates();
      }

      /**
       * Add option to value dict
       * @param {Element} el  original option element
       * @param {Element} optionEl  generated option element
       */

    }, {
      key: "_addOptionToValueDict",
      value: function _addOptionToValueDict(el, optionEl) {
        var index = Object.keys(this._valueDict).length;
        var key = this.dropdownOptions.id + index;
        var obj = {};
        optionEl.id = key;

        obj.el = el;
        obj.optionEl = optionEl;
        this._valueDict[key] = obj;
      }

      /**
       * Remove dropdown
       */

    }, {
      key: "_removeDropdown",
      value: function _removeDropdown() {
        $(this.wrapper).find('.caret').remove();
        $(this.input).remove();
        $(this.dropdownOptions).remove();
        $(this.wrapper).before(this.$el);
        $(this.wrapper).remove();
      }

      /**
       * Setup dropdown
       * @param {Element} select  select element
       * @param {Element} option  option element from select
       * @param {String} type
       * @return {Element}  option element added
       */

    }, {
      key: "_appendOptionWithIcon",
      value: function _appendOptionWithIcon(select, option, type) {
        // Add disabled attr if disabled
        var disabledClass = option.disabled ? 'disabled ' : '';
        var optgroupClass = type === 'optgroup-option' ? 'optgroup-option ' : '';
        var multipleCheckbox = this.isMultiple ? "<label><input type=\"checkbox\"" + disabledClass + "\"/><span>" + option.innerHTML + "</span></label>" : option.innerHTML;
        var liEl = $('<li></li>');
        var spanEl = $('<span></span>');
        spanEl.html(multipleCheckbox);
        liEl.addClass(disabledClass + " " + optgroupClass);
        liEl.append(spanEl);

        // add icons
        var iconUrl = option.getAttribute('data-icon');
        if (!!iconUrl) {
          var imgEl = $("<img alt=\"\" src=\"" + iconUrl + "\">");
          liEl.prepend(imgEl);
        }

        // Check for multiple type.
        $(this.dropdownOptions).append(liEl[0]);
        return liEl[0];
      }

      /**
       * Toggle entry from option
       * @param {String} key  Option key
       * @return {Boolean}  if entry was added or removed
       */

    }, {
      key: "_toggleEntryFromArray",
      value: function _toggleEntryFromArray(key) {
        var notAdded = !this._keysSelected.hasOwnProperty(key);
        var $optionLi = $(this._valueDict[key].optionEl);

        if (notAdded) {
          this._keysSelected[key] = true;
        } else {
          delete this._keysSelected[key];
        }

        $optionLi.toggleClass('selected', notAdded);

        // Set checkbox checked value
        $optionLi.find('input[type="checkbox"]').prop('checked', notAdded);

        // use notAdded instead of true (to detect if the option is selected or not)
        $optionLi.prop('selected', notAdded);

        return notAdded;
      }

      /**
       * Set text value to input
       */

    }, {
      key: "_setValueToInput",
      value: function _setValueToInput() {
        var values = [];
        var options = this.$el.find('option');

        options.each(function (el) {
          if ($(el).prop('selected')) {
            var text = $(el).text();
            values.push(text);
          }
        });

        if (!values.length) {
          var firstDisabled = this.$el.find('option:disabled').eq(0);
          if (firstDisabled.length && firstDisabled[0].value === '') {
            values.push(firstDisabled.text());
          }
        }

        this.input.value = values.join(', ');
      }

      /**
       * Set selected state of dropdown to match actual select element
       */

    }, {
      key: "_setSelectedStates",
      value: function _setSelectedStates() {
        this._keysSelected = {};

        for (var key in this._valueDict) {
          var option = this._valueDict[key];
          var optionIsSelected = $(option.el).prop('selected');
          $(option.optionEl).find('input[type="checkbox"]').prop('checked', optionIsSelected);
          if (optionIsSelected) {
            this._activateOption($(this.dropdownOptions), $(option.optionEl));
            this._keysSelected[key] = true;
          } else {
            $(option.optionEl).removeClass('selected');
          }
        }
      }

      /**
       * Make option as selected and scroll to selected position
       * @param {jQuery} collection  Select options jQuery element
       * @param {Element} newOption  element of the new option
       */

    }, {
      key: "_activateOption",
      value: function _activateOption(collection, newOption) {
        if (newOption) {
          if (!this.isMultiple) {
            collection.find('li.selected').removeClass('selected');
          }
          var option = $(newOption);
          option.addClass('selected');
        }
      }

      /**
       * Get Selected Values
       * @return {Array}  Array of selected values
       */

    }, {
      key: "getSelectedValues",
      value: function getSelectedValues() {
        var selectedValues = [];
        for (var key in this._keysSelected) {
          selectedValues.push(this._valueDict[key].el.value);
        }
        return selectedValues;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(FormSelect.__proto__ || Object.getPrototypeOf(FormSelect), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_FormSelect;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return FormSelect;
  }(Component);

  M.FormSelect = FormSelect;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(FormSelect, 'formSelect', 'M_FormSelect');
  }
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {};

  /**
   * @class
   *
   */

  var Range = function (_Component21) {
    _inherits(Range, _Component21);

    /**
     * Construct Range instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Range(el, options) {
      _classCallCheck(this, Range);

      var _this72 = _possibleConstructorReturn(this, (Range.__proto__ || Object.getPrototypeOf(Range)).call(this, Range, el, options));

      _this72.el.M_Range = _this72;

      /**
       * Options for the range
       * @member Range#options
       */
      _this72.options = $.extend({}, Range.defaults, options);

      _this72._mousedown = false;

      // Setup
      _this72._setupThumb();

      _this72._setupEventHandlers();
      return _this72;
    }

    _createClass(Range, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._removeThumb();
        this.el.M_Range = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleRangeChangeBound = this._handleRangeChange.bind(this);
        this._handleRangeMousedownTouchstartBound = this._handleRangeMousedownTouchstart.bind(this);
        this._handleRangeInputMousemoveTouchmoveBound = this._handleRangeInputMousemoveTouchmove.bind(this);
        this._handleRangeMouseupTouchendBound = this._handleRangeMouseupTouchend.bind(this);
        this._handleRangeBlurMouseoutTouchleaveBound = this._handleRangeBlurMouseoutTouchleave.bind(this);

        this.el.addEventListener('change', this._handleRangeChangeBound);

        this.el.addEventListener('mousedown', this._handleRangeMousedownTouchstartBound);
        this.el.addEventListener('touchstart', this._handleRangeMousedownTouchstartBound);

        this.el.addEventListener('input', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.addEventListener('mousemove', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.addEventListener('touchmove', this._handleRangeInputMousemoveTouchmoveBound);

        this.el.addEventListener('mouseup', this._handleRangeMouseupTouchendBound);
        this.el.addEventListener('touchend', this._handleRangeMouseupTouchendBound);

        this.el.addEventListener('blur', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.addEventListener('mouseout', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.addEventListener('touchleave', this._handleRangeBlurMouseoutTouchleaveBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('change', this._handleRangeChangeBound);

        this.el.removeEventListener('mousedown', this._handleRangeMousedownTouchstartBound);
        this.el.removeEventListener('touchstart', this._handleRangeMousedownTouchstartBound);

        this.el.removeEventListener('input', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.removeEventListener('mousemove', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.removeEventListener('touchmove', this._handleRangeInputMousemoveTouchmoveBound);

        this.el.removeEventListener('mouseup', this._handleRangeMouseupTouchendBound);
        this.el.removeEventListener('touchend', this._handleRangeMouseupTouchendBound);

        this.el.removeEventListener('blur', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.removeEventListener('mouseout', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.removeEventListener('touchleave', this._handleRangeBlurMouseoutTouchleaveBound);
      }

      /**
       * Handle Range Change
       * @param {Event} e
       */

    }, {
      key: "_handleRangeChange",
      value: function _handleRangeChange() {
        $(this.value).html(this.$el.val());

        if (!$(this.thumb).hasClass('active')) {
          this._showRangeBubble();
        }

        var offsetLeft = this._calcRangeOffset();
        $(this.thumb).addClass('active').css('left', offsetLeft + 'px');
      }

      /**
       * Handle Range Mousedown and Touchstart
       * @param {Event} e
       */

    }, {
      key: "_handleRangeMousedownTouchstart",
      value: function _handleRangeMousedownTouchstart(e) {
        // Set indicator value
        $(this.value).html(this.$el.val());

        this._mousedown = true;
        this.$el.addClass('active');

        if (!$(this.thumb).hasClass('active')) {
          this._showRangeBubble();
        }

        if (e.type !== 'input') {
          var offsetLeft = this._calcRangeOffset();
          $(this.thumb).addClass('active').css('left', offsetLeft + 'px');
        }
      }

      /**
       * Handle Range Input, Mousemove and Touchmove
       */

    }, {
      key: "_handleRangeInputMousemoveTouchmove",
      value: function _handleRangeInputMousemoveTouchmove() {
        if (this._mousedown) {
          if (!$(this.thumb).hasClass('active')) {
            this._showRangeBubble();
          }

          var offsetLeft = this._calcRangeOffset();
          $(this.thumb).addClass('active').css('left', offsetLeft + 'px');
          $(this.value).html(this.$el.val());
        }
      }

      /**
       * Handle Range Mouseup and Touchend
       */

    }, {
      key: "_handleRangeMouseupTouchend",
      value: function _handleRangeMouseupTouchend() {
        this._mousedown = false;
        this.$el.removeClass('active');
      }

      /**
       * Handle Range Blur, Mouseout and Touchleave
       */

    }, {
      key: "_handleRangeBlurMouseoutTouchleave",
      value: function _handleRangeBlurMouseoutTouchleave() {
        if (!this._mousedown) {
          var paddingLeft = parseInt(this.$el.css('padding-left'));
          var marginLeft = 7 + paddingLeft + 'px';

          if ($(this.thumb).hasClass('active')) {
            anim.remove(this.thumb);
            anim({
              targets: this.thumb,
              height: 0,
              width: 0,
              top: 10,
              easing: 'easeOutQuad',
              marginLeft: marginLeft,
              duration: 100
            });
          }
          $(this.thumb).removeClass('active');
        }
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_setupThumb",
      value: function _setupThumb() {
        this.thumb = document.createElement('span');
        this.value = document.createElement('span');
        $(this.thumb).addClass('thumb');
        $(this.value).addClass('value');
        $(this.thumb).append(this.value);
        this.$el.after(this.thumb);
      }

      /**
       * Remove dropdown
       */

    }, {
      key: "_removeThumb",
      value: function _removeThumb() {
        $(this.thumb).remove();
      }

      /**
       * morph thumb into bubble
       */

    }, {
      key: "_showRangeBubble",
      value: function _showRangeBubble() {
        var paddingLeft = parseInt($(this.thumb).parent().css('padding-left'));
        var marginLeft = -7 + paddingLeft + 'px'; // TODO: fix magic number?
        anim.remove(this.thumb);
        anim({
          targets: this.thumb,
          height: 30,
          width: 30,
          top: -30,
          marginLeft: marginLeft,
          duration: 300,
          easing: 'easeOutQuint'
        });
      }

      /**
       * Calculate the offset of the thumb
       * @return {Number}  offset in pixels
       */

    }, {
      key: "_calcRangeOffset",
      value: function _calcRangeOffset() {
        var width = this.$el.width() - 15;
        var max = parseFloat(this.$el.attr('max')) || 100; // Range default max
        var min = parseFloat(this.$el.attr('min')) || 0; // Range default min
        var percent = (parseFloat(this.$el.val()) - min) / (max - min);
        return percent * width;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Range.__proto__ || Object.getPrototypeOf(Range), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Range;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Range;
  }(Component);

  M.Range = Range;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Range, 'range', 'M_Range');
  }

  Range.init($('input[type=range]'));
})(cash, M.anime);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2), __webpack_require__(2), __webpack_require__(7)))

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RTCClient; });
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



console.log("agora sdk version: " + agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.VERSION + " compatible: " + agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.checkSystemRequirements());

var RTCClient =
/*#__PURE__*/
function () {
  function RTCClient() {
    _classCallCheck(this, RTCClient);

    this._client = null;
    this._joined = false;
    this._published = false;
    this._localStream = null;
    this._remoteStreams = [];
    this._params = {};
    this._showProfile = false;
  }

  _createClass(RTCClient, [{
    key: "handleEvents",
    value: function handleEvents() {
      var _this = this;

      this._client.on("error", function (err) {
        console.log(err);
      }); // Occurs when the peer user leaves the channel; for example, the peer user calls Client.leave.


      this._client.on("peer-leave", function (evt) {
        var id = evt.uid;

        if (id != _this._params.uid) {
          Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* removeView */ "f"])(id);
        }

        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("peer leave");
        console.log('peer-leave', id);
      }); // Occurs when the local stream is _published.


      this._client.on("stream-published", function (evt) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("stream published success");
        console.log("stream-published");
      }); // Occurs when the remote stream is added.


      this._client.on("stream-added", function (evt) {
        var remoteStream = evt.stream;
        var id = remoteStream.getId();
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("stream-added uid: " + id);

        if (id !== _this._params.uid) {
          _this._client.subscribe(remoteStream, function (err) {
            console.log("stream subscribe failed", err);
          });
        }

        console.log('stream-added remote-uid: ', id);
      }); // Occurs when a user subscribes to a remote stream.


      this._client.on("stream-subscribed", function (evt) {
        var remoteStream = evt.stream;
        var id = remoteStream.getId();

        _this._remoteStreams.push(remoteStream);

        Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* addView */ "b"])(id, _this._showProfile);
        remoteStream.play("remote_video_" + id, {
          fit: "cover"
        });
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info('stream-subscribed remote-uid: ' + id);
        console.log('stream-subscribed remote-uid: ', id);
      }); // Occurs when the remote stream is removed; for example, a peer user calls Client.unpublish.


      this._client.on("stream-removed", function (evt) {
        var remoteStream = evt.stream;
        var id = remoteStream.getId();
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("stream-removed uid: " + id);
        remoteStream.stop();
        _this._remoteStreams = _this._remoteStreams.filter(function (stream) {
          return stream.getId() !== id;
        });
        Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* removeView */ "f"])(id);
        console.log('stream-removed remote-uid: ', id);
      });

      this._client.on("onTokenPrivilegeWillExpire", function () {
        // After requesting a new token
        // this._client.renewToken(token);
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("onTokenPrivilegeWillExpire");
        console.log("onTokenPrivilegeWillExpire");
      });

      this._client.on("onTokenPrivilegeDidExpire", function () {
        // After requesting a new token
        // client.renewToken(token);
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("onTokenPrivilegeDidExpire");
        console.log("onTokenPrivilegeDidExpire");
      });
    }
  }, {
    key: "join",
    value: function join(data) {
      var _this2 = this;

      return new Promise(function (resolve, reject) {
        if (_this2._joined) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your already joined");
          return;
        }
        /**
         * A class defining the properties of the config parameter in the createClient method.
         * Note:
         *    Ensure that you do not leave mode and codec as empty.
         *    Ensure that you set these properties before calling Client.join.
         *  You could find more detail here. https://docs.agora.io/en/Video/API%20Reference/web/interfaces/agorartc.clientconfig.html
        **/


        _this2._client = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createClient({
          mode: data.mode,
          codec: data.codec
        });
        _this2._params = data; // handle AgoraRTC client event

        _this2.handleEvents(); // init client


        _this2._client.init(data.appID, function () {
          console.log("init success");
          /**
           * Joins an AgoraRTC Channel
           * This method joins an AgoraRTC channel.
           * Parameters
           * tokenOrKey: string | null
           *    Low security requirements: Pass null as the parameter value.
           *    High security requirements: Pass the string of the Token or Channel Key as the parameter value. See Use Security Keys for details.
           *  channel: string
           *    A string that provides a unique channel name for the Agora session. The length must be within 64 bytes. Supported character scopes:
           *    26 lowercase English letters a-z
           *    26 uppercase English letters A-Z
           *    10 numbers 0-9
           *    Space
           *    "!", "#", "$", "%", "&", "(", ")", "+", "-", ":", ";", "<", "=", ".", ">", "?", "@", "[", "]", "^", "_", "{", "}", "|", "~", ","
           *  uid: number | null
           *    The user ID, an integer. Ensure this ID is unique. If you set the uid to null, the server assigns one and returns it in the onSuccess callback.
           *   Note:
           *      All users in the same channel should have the same type (number) of uid.
           *      If you use a number as the user ID, it should be a 32-bit unsigned integer with a value ranging from 0 to (232-1).
          **/

          _this2._client.join(data.token ? data.token : null, data.channel, data.uid ? +data.uid : null, function (uid) {
            _this2._params.uid = uid;
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("join channel: " + data.channel + " success, uid: " + uid);
            console.log("join channel: " + data.channel + " success, uid: " + uid);
            _this2._joined = true; // start stream interval stats
            // if you don't need show stream profile you can comment this

            if (!_this2._interval) {
              _this2._interval = setInterval(function () {
                _this2._updateVideoInfo();
              }, 0);
            } // create local stream


            var streamSpec = {
              streamID: _this2._params.uid,
              audio: true,
              video: true,
              screen: false,
              microphoneId: data.microphoneId,
              cameraId: data.cameraId,
              mirror: false
            }; // create local stream

            _this2._localStream = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createStream(streamSpec);

            _this2._localStream.on("player-status-change", function (evt) {
              console.log("player status change", evt);
            });

            if (data.cameraResolution) {
              // set local video resolution
              if (data.cameraResolution == 'default') {
                _this2._localStream.setVideoProfile("4K_1");
              } else {
                _this2._localStream.setVideoProfile(data.cameraResolution);
              }
            } // init local stream


            _this2._localStream.init(function () {
              console.log("init local stream success"); // play stream with html element id "local_stream"

              _this2._localStream.play("local_stream", {
                fit: "cover"
              }); // run callback


              resolve();
            }, function (err) {
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("stream init failed, please open console see more detail");
              console.error("init local stream failed ", err);
            });
          }, function (err) {
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client join failed, please open console see more detail");
            console.error("client join failed", err);
          });
        }, function (err) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client init failed, please open console see more detail");
          console.error(err);
        });
      });
    }
  }, {
    key: "joinScreenSharing",
    value: function joinScreenSharing(data) {
      var _this3 = this;

      return new Promise(function (resolve, reject) {
        if (_this3._joined) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your already joined");
          return;
        }
        /**
         * A class defining the properties of the config parameter in the createClient method.
         * Note:
         *    Ensure that you do not leave mode and codec as empty.
         *    Ensure that you set these properties before calling Client.join.
         *  You could find more detail here. https://docs.agora.io/en/Video/API%20Reference/web/interfaces/agorartc.clientconfig.html
        **/


        _this3._client = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createClient({
          mode: data.mode,
          codec: data.codec
        });
        _this3._params = data; // handle AgoraRTC client event

        _this3.handleEvents(); // init client


        _this3._client.init(data.appID, function () {
          console.log("init success");
          /**
           * Joins an AgoraRTC Channel
           * This method joins an AgoraRTC channel.
           * Parameters
           * tokenOrKey: string | null
           *    Low security requirements: Pass null as the parameter value.
           *    High security requirements: Pass the string of the Token or Channel Key as the parameter value. See Use Security Keys for details.
           *  channel: string
           *    A string that provides a unique channel name for the Agora session. The length must be within 64 bytes. Supported character scopes:
           *    26 lowercase English letters a-z
           *    26 uppercase English letters A-Z
           *    10 numbers 0-9
           *    Space
           *    "!", "#", "$", "%", "&", "(", ")", "+", "-", ":", ";", "<", "=", ".", ">", "?", "@", "[", "]", "^", "_", "{", "}", "|", "~", ","
           *  uid: number | null
           *    The user ID, an integer. Ensure this ID is unique. If you set the uid to null, the server assigns one and returns it in the onSuccess callback.
           *   Note:
           *      All users in the same channel should have the same type (number) of uid.
           *      If you use a number as the user ID, it should be a 32-bit unsigned integer with a value ranging from 0 to (232-1).
          **/

          _this3._client.join(data.token ? data.token : null, data.channel, data.uid ? +data.uid : null, function (uid) {
            _this3._params.uid = uid;
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("join channel while screensharing: " + data.channel + " success, uid: " + uid);
            console.log("join channel while screensharing: " + data.channel + " success, uid: " + uid);
            _this3._joined = true; // start stream interval stats
            // if you don't need show stream profile you can comment this

            if (!_this3._interval) {
              _this3._interval = setInterval(function () {
                _this3._updateVideoInfo();
              }, 0);
            } // create local stream


            var streamSpec = {
              streamID: _this3._params.uid,
              audio: false,
              video: false,
              screen: true,
              microphoneId: data.microphoneId,
              cameraId: data.cameraId,
              screenAudio: data.screenAudio
            }; // Your firefox need use support mediaSource at least

            if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isFirefox */ "e"])()) {
              streamSpec.mediaSource = 'window';
            } else if (!Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isCompatibleChrome */ "d"])()) {
              // before chrome 72 need install chrome extensions
              // You can download screen share plugin here https://chrome.google.com/webstore/detail/agora-web-screensharing/minllpmhdgpndnkomcoccfekfegnlikg
              streamSpec.extensionId = 'minllpmhdgpndnkomcoccfekfegnlikg';
            }

            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("test");
            _this3._localStream = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createStream(streamSpec); // Toast.notice("_localStream");
            // Toast.notice(_localStream);
            // set screen sharing video resolution

            if (data.screenShareResolution != 'default') {
              _this3._localStream.setScreenProfile(data.screenShareResolution);

              console.log("set screen profile", data.screenShareResolution);
            } // Occurs when sdk emit error 


            _this3._localStream.on("error", function (evt) {
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("error", JSON.stringify([evt]));
            }); // Occurs when a you stop screen sharing


            _this3._localStream.on("stopScreenSharing", function (evt) {
              _this3._localStream.stop();

              _this3._showProfile = false;
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("stop screen sharing");
            }); // init local stream


            _this3._localStream.init(function () {
              console.log("init local stream success"); // play stream with html element id "local_stream"

              _this3._localStream.play("local_stream", {
                fit: "cover"
              }); // run callback


              resolve();
            }, function (err) {
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("stream init failed, please open console see more detail");
              console.error("init local stream failed ", err);

              if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isFirefox */ "e"])()) {
                console.error('Failed to start screen sharing, maybe firefox not support mediaSource, please upgrade your firefox to latest version');
                return;
              }

              if (!Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isCompatibleChrome */ "d"])()) {
                console.error('Failed to start screen sharing, maybe chrome extension was not installed properly, you can get it from https://chrome.google.com/webstore/detail/minllpmhdgpndnkomcoccfekfegnlikg');
                return;
              }
            });
          }, function (err) {
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client join failed, please open console see more detail");
            console.error("client join failed", err);
          });
        }, function (err) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client init failed, please open console see more detail");
          console.error(err);
        });
      });
    }
  }, {
    key: "publish",
    value: function publish() {
      var _this4 = this;

      if (!this._client) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Please Join First");
        return;
      }

      if (this._published) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your already published");
        return;
      }

      var oldState = this._published; // publish localStream

      this._client.publish(this._localStream, function (err) {
        _this4._published = oldState;
        console.log("publish failed");
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("publish failed");
        console.error(err);
      });

      _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("publish");
      this._published = true;
    }
  }, {
    key: "unpublish",
    value: function unpublish() {
      var _this5 = this;

      if (!this._client) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Please Join First");
        return;
      }

      if (!this._published) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your didn't publish");
        return;
      }

      var oldState = this._published;

      this._client.unpublish(this._localStream, function (err) {
        _this5._published = oldState;
        console.log("unpublish failed");
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("unpublish failed");
        console.error(err);
      });

      _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("unpublish");
      this._published = false;
    }
  }, {
    key: "leave",
    value: function leave() {
      var _this6 = this;

      if (!this._client) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Please Join First!");
        return;
      }

      if (!this._joined) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("You are not in channel");
        return;
      } // leave channel


      this._client.leave(function () {
        // close stream
        _this6._localStream.close();

        $("#local_video_info").addClass("hide"); // stop stream

        _this6._localStream.stop();

        while (_this6._remoteStreams.length > 0) {
          var stream = _this6._remoteStreams.shift();

          var id = stream.getId();
          stream.stop();
          Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* removeView */ "f"])(id);
        }

        _this6._localStream = null;
        _this6._remoteStreams = [];
        _this6._client = null;
        console.log("client leaves channel success");
        _this6._published = false;
        _this6._joined = false;
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("leave success");
      }, function (err) {
        console.log("channel leave failed");
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("leave success");
        console.error(err);
      });
    }
  }, {
    key: "_getLostRate",
    value: function _getLostRate(lostPackets, arrivedPackets) {
      var lost = lostPackets ? +lostPackets : 0;
      var arrived = arrivedPackets ? +arrivedPackets : 0;
      if (arrived == 0) return 0;
      var result = (lost / (lost + arrived)).toFixed(2) * 100;
      return result;
    }
  }, {
    key: "_updateVideoInfo",
    value: function _updateVideoInfo() {
      var _this7 = this;

      this._localStream && this._localStream.getStats(function (stats) {
        var localStreamProfile = [['Uid: ', _this7._localStream.getId()].join(''), ['SDN access delay: ', stats.accessDelay, 'ms'].join(''), ['Video send: ', stats.videoSendFrameRate, 'fps ', stats.videoSendResolutionWidth + 'x' + stats.videoSendResolutionHeight].join('')].join('<br/>');
        $("#local_video_info")[0].innerHTML = localStreamProfile;
      });

      if (this._remoteStreams.length > 0) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          var _loop = function _loop() {
            var remoteStream = _step.value;
            remoteStream.getStats(function (stats) {
              var remoteStreamProfile = [['Uid: ', remoteStream.getId()].join(''), ['SDN access delay: ', stats.accessDelay, 'ms'].join(''), ['End to end delay: ', stats.endToEndDelay, 'ms'].join(''), ['Video recv: ', stats.videoReceiveFrameRate, 'fps ', stats.videoReceiveResolutionWidth + 'x' + stats.videoReceiveResolutionHeight].join('')].join('<br/>');

              if ($("#remote_video_info_" + remoteStream.getId())[0]) {
                $("#remote_video_info_" + remoteStream.getId())[0].innerHTML = remoteStreamProfile;
              }
            });
          };

          for (var _iterator = this._remoteStreams[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            _loop();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"] != null) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      }
    }
  }, {
    key: "setNetworkQualityAndStreamStats",
    value: function setNetworkQualityAndStreamStats(enable) {
      this._showProfile = enable;
      this._showProfile ? $(".video-profile").removeClass("hide") : $(".video-profile").addClass("hide");
    }
  }]);

  return RTCClient;
}();


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)))

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * UAParser.js v0.7.20
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright © 2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */

(function (window, undefined) {

    'use strict';

    //////////////
    // Constants
    /////////////


    var LIBVERSION  = '0.7.20',
        EMPTY       = '',
        UNKNOWN     = '?',
        FUNC_TYPE   = 'function',
        UNDEF_TYPE  = 'undefined',
        OBJ_TYPE    = 'object',
        STR_TYPE    = 'string',
        MAJOR       = 'major', // deprecated
        MODEL       = 'model',
        NAME        = 'name',
        TYPE        = 'type',
        VENDOR      = 'vendor',
        VERSION     = 'version',
        ARCHITECTURE= 'architecture',
        CONSOLE     = 'console',
        MOBILE      = 'mobile',
        TABLET      = 'tablet',
        SMARTTV     = 'smarttv',
        WEARABLE    = 'wearable',
        EMBEDDED    = 'embedded';


    ///////////
    // Helper
    //////////


    var util = {
        extend : function (regexes, extensions) {
            var mergedRegexes = {};
            for (var i in regexes) {
                if (extensions[i] && extensions[i].length % 2 === 0) {
                    mergedRegexes[i] = extensions[i].concat(regexes[i]);
                } else {
                    mergedRegexes[i] = regexes[i];
                }
            }
            return mergedRegexes;
        },
        has : function (str1, str2) {
          if (typeof str1 === "string") {
            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;
          } else {
            return false;
          }
        },
        lowerize : function (str) {
            return str.toLowerCase();
        },
        major : function (version) {
            return typeof(version) === STR_TYPE ? version.replace(/[^\d\.]/g,'').split(".")[0] : undefined;
        },
        trim : function (str) {
          return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, '');
        }
    };


    ///////////////
    // Map helper
    //////////////


    var mapper = {

        rgx : function (ua, arrays) {

            var i = 0, j, k, p, q, matches, match;

            // loop through all regexes maps
            while (i < arrays.length && !matches) {

                var regex = arrays[i],       // even sequence (0,2,4,..)
                    props = arrays[i + 1];   // odd sequence (1,3,5,..)
                j = k = 0;

                // try matching uastring with regexes
                while (j < regex.length && !matches) {

                    matches = regex[j++].exec(ua);

                    if (!!matches) {
                        for (p = 0; p < props.length; p++) {
                            match = matches[++k];
                            q = props[p];
                            // check if given property is actually array
                            if (typeof q === OBJ_TYPE && q.length > 0) {
                                if (q.length == 2) {
                                    if (typeof q[1] == FUNC_TYPE) {
                                        // assign modified match
                                        this[q[0]] = q[1].call(this, match);
                                    } else {
                                        // assign given value, ignore regex match
                                        this[q[0]] = q[1];
                                    }
                                } else if (q.length == 3) {
                                    // check whether function or regex
                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {
                                        // call function (usually string mapper)
                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;
                                    } else {
                                        // sanitize match using given regex
                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;
                                    }
                                } else if (q.length == 4) {
                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;
                                }
                            } else {
                                this[q] = match ? match : undefined;
                            }
                        }
                    }
                }
                i += 2;
            }
        },

        str : function (str, map) {

            for (var i in map) {
                // check if array
                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {
                    for (var j = 0; j < map[i].length; j++) {
                        if (util.has(map[i][j], str)) {
                            return (i === UNKNOWN) ? undefined : i;
                        }
                    }
                } else if (util.has(map[i], str)) {
                    return (i === UNKNOWN) ? undefined : i;
                }
            }
            return str;
        }
    };


    ///////////////
    // String map
    //////////////


    var maps = {

        browser : {
            oldsafari : {
                version : {
                    '1.0'   : '/8',
                    '1.2'   : '/1',
                    '1.3'   : '/3',
                    '2.0'   : '/412',
                    '2.0.2' : '/416',
                    '2.0.3' : '/417',
                    '2.0.4' : '/419',
                    '?'     : '/'
                }
            }
        },

        device : {
            amazon : {
                model : {
                    'Fire Phone' : ['SD', 'KF']
                }
            },
            sprint : {
                model : {
                    'Evo Shift 4G' : '7373KT'
                },
                vendor : {
                    'HTC'       : 'APA',
                    'Sprint'    : 'Sprint'
                }
            }
        },

        os : {
            windows : {
                version : {
                    'ME'        : '4.90',
                    'NT 3.11'   : 'NT3.51',
                    'NT 4.0'    : 'NT4.0',
                    '2000'      : 'NT 5.0',
                    'XP'        : ['NT 5.1', 'NT 5.2'],
                    'Vista'     : 'NT 6.0',
                    '7'         : 'NT 6.1',
                    '8'         : 'NT 6.2',
                    '8.1'       : 'NT 6.3',
                    '10'        : ['NT 6.4', 'NT 10.0'],
                    'RT'        : 'ARM'
                }
            }
        }
    };


    //////////////
    // Regex map
    /////////////


    var regexes = {

        browser : [[

            // Presto based
            /(opera\smini)\/([\w\.-]+)/i,                                       // Opera Mini
            /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,                      // Opera Mobi/Tablet
            /(opera).+version\/([\w\.]+)/i,                                     // Opera > 9.80
            /(opera)[\/\s]+([\w\.]+)/i                                          // Opera < 9.80
            ], [NAME, VERSION], [

            /(opios)[\/\s]+([\w\.]+)/i                                          // Opera mini on iphone >= 8.0
            ], [[NAME, 'Opera Mini'], VERSION], [

            /\s(opr)\/([\w\.]+)/i                                               // Opera Webkit
            ], [[NAME, 'Opera'], VERSION], [

            // Mixed
            /(kindle)\/([\w\.]+)/i,                                             // Kindle
            /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,
                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer

            // Trident based
            /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,
                                                                                // Avant/IEMobile/SlimBrowser/Baidu
            /(?:ms|\()(ie)\s([\w\.]+)/i,                                        // Internet Explorer

            // Webkit/KHTML based
            /(rekonq)\/([\w\.]*)/i,                                             // Rekonq
            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i
                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon
            ], [NAME, VERSION], [

            /(konqueror)\/([\w\.]+)/i                                           // Konqueror
            ], [[NAME, 'Konqueror'], VERSION], [

            /(trident).+rv[:\s]([\w\.]+).+like\sgecko/i                         // IE11
            ], [[NAME, 'IE'], VERSION], [

            /(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i                          // Microsoft Edge
            ], [[NAME, 'Edge'], VERSION], [

            /(yabrowser)\/([\w\.]+)/i                                           // Yandex
            ], [[NAME, 'Yandex'], VERSION], [

            /(puffin)\/([\w\.]+)/i                                              // Puffin
            ], [[NAME, 'Puffin'], VERSION], [

            /(focus)\/([\w\.]+)/i                                               // Firefox Focus
            ], [[NAME, 'Firefox Focus'], VERSION], [

            /(opt)\/([\w\.]+)/i                                                 // Opera Touch
            ], [[NAME, 'Opera Touch'], VERSION], [

            /((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i         // UCBrowser
            ], [[NAME, 'UCBrowser'], VERSION], [

            /(comodo_dragon)\/([\w\.]+)/i                                       // Comodo Dragon
            ], [[NAME, /_/g, ' '], VERSION], [

            /(windowswechat qbcore)\/([\w\.]+)/i                                // WeChat Desktop for Windows Built-in Browser
            ], [[NAME, 'WeChat(Win) Desktop'], VERSION], [

            /(micromessenger)\/([\w\.]+)/i                                      // WeChat
            ], [[NAME, 'WeChat'], VERSION], [

            /(brave)\/([\w\.]+)/i                                              // Brave browser
            ], [[NAME, 'Brave'], VERSION], [

            /(qqbrowserlite)\/([\w\.]+)/i                                       // QQBrowserLite
            ], [NAME, VERSION], [

            /(QQ)\/([\d\.]+)/i                                                  // QQ, aka ShouQ
            ], [NAME, VERSION], [

            /m?(qqbrowser)[\/\s]?([\w\.]+)/i                                    // QQBrowser
            ], [NAME, VERSION], [

            /(BIDUBrowser)[\/\s]?([\w\.]+)/i                                    // Baidu Browser
            ], [NAME, VERSION], [

            /(2345Explorer)[\/\s]?([\w\.]+)/i                                   // 2345 Browser
            ], [NAME, VERSION], [

            /(MetaSr)[\/\s]?([\w\.]+)/i                                         // SouGouBrowser
            ], [NAME], [

            /(LBBROWSER)/i                                      // LieBao Browser
            ], [NAME], [

            /xiaomi\/miuibrowser\/([\w\.]+)/i                                   // MIUI Browser
            ], [VERSION, [NAME, 'MIUI Browser']], [

            /;fbav\/([\w\.]+);/i                                                // Facebook App for iOS & Android
            ], [VERSION, [NAME, 'Facebook']], [

            /safari\s(line)\/([\w\.]+)/i,                                       // Line App for iOS
            /android.+(line)\/([\w\.]+)\/iab/i                                  // Line App for Android
            ], [NAME, VERSION], [

            /headlesschrome(?:\/([\w\.]+)|\s)/i                                 // Chrome Headless
            ], [VERSION, [NAME, 'Chrome Headless']], [

            /\swv\).+(chrome)\/([\w\.]+)/i                                      // Chrome WebView
            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [

            /((?:oculus|samsung)browser)\/([\w\.]+)/i
            ], [[NAME, /(.+(?:g|us))(.+)/, '$1 $2'], VERSION], [                // Oculus / Samsung Browser

            /android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i        // Android Browser
            ], [VERSION, [NAME, 'Android Browser']], [

            /(sailfishbrowser)\/([\w\.]+)/i                                     // Sailfish Browser
            ], [[NAME, 'Sailfish Browser'], VERSION], [

            /(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i
                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia
            ], [NAME, VERSION], [

            /(dolfin)\/([\w\.]+)/i                                              // Dolphin
            ], [[NAME, 'Dolphin'], VERSION], [

            /((?:android.+)crmo|crios)\/([\w\.]+)/i                             // Chrome for Android/iOS
            ], [[NAME, 'Chrome'], VERSION], [

            /(coast)\/([\w\.]+)/i                                               // Opera Coast
            ], [[NAME, 'Opera Coast'], VERSION], [

            /fxios\/([\w\.-]+)/i                                                // Firefox for iOS
            ], [VERSION, [NAME, 'Firefox']], [

            /version\/([\w\.]+).+?mobile\/\w+\s(safari)/i                       // Mobile Safari
            ], [VERSION, [NAME, 'Mobile Safari']], [

            /version\/([\w\.]+).+?(mobile\s?safari|safari)/i                    // Safari & Safari Mobile
            ], [VERSION, NAME], [

            /webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i  // Google Search Appliance on iOS
            ], [[NAME, 'GSA'], VERSION], [

            /webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i                     // Safari < 3.0
            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [

            /(webkit|khtml)\/([\w\.]+)/i
            ], [NAME, VERSION], [

            // Gecko based
            /(navigator|netscape)\/([\w\.-]+)/i                                 // Netscape
            ], [[NAME, 'Netscape'], VERSION], [
            /(swiftfox)/i,                                                      // Swiftfox
            /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror
            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,

                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix
            /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,                          // Mozilla

            // Other
            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,
                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir
            /(links)\s\(([\w\.]+)/i,                                            // Links
            /(gobrowser)\/?([\w\.]*)/i,                                         // GoBrowser
            /(ice\s?browser)\/v?([\w\._]+)/i,                                   // ICE Browser
            /(mosaic)[\/\s]([\w\.]+)/i                                          // Mosaic
            ], [NAME, VERSION]
        ],

        cpu : [[

            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i                     // AMD64
            ], [[ARCHITECTURE, 'amd64']], [

            /(ia32(?=;))/i                                                      // IA32 (quicktime)
            ], [[ARCHITECTURE, util.lowerize]], [

            /((?:i[346]|x)86)[;\)]/i                                            // IA32
            ], [[ARCHITECTURE, 'ia32']], [

            // PocketPC mistakenly identified as PowerPC
            /windows\s(ce|mobile);\sppc;/i
            ], [[ARCHITECTURE, 'arm']], [

            /((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i                           // PowerPC
            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [

            /(sun4\w)[;\)]/i                                                    // SPARC
            ], [[ARCHITECTURE, 'sparc']], [

            /((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i
                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC
            ], [[ARCHITECTURE, util.lowerize]]
        ],

        device : [[

            /\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i                        // iPad/PlayBook
            ], [MODEL, VENDOR, [TYPE, TABLET]], [

            /applecoremedia\/[\w\.]+ \((ipad)/                                  // iPad
            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [

            /(apple\s{0,1}tv)/i                                                 // Apple TV
            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [

            /(archos)\s(gamepad2?)/i,                                           // Archos
            /(hp).+(touchpad)/i,                                                // HP TouchPad
            /(hp).+(tablet)/i,                                                  // HP Tablet
            /(kindle)\/([\w\.]+)/i,                                             // Kindle
            /\s(nook)[\w\s]+build\/(\w+)/i,                                     // Nook
            /(dell)\s(strea[kpr\s\d]*[\dko])/i                                  // Dell Streak
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /(kf[A-z]+)\sbuild\/.+silk\//i                                      // Kindle Fire HD
            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [
            /(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i                         // Fire Phone
            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [
            /android.+aft([bms])\sbuild/i                                       // Fire TV
            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, SMARTTV]], [

            /\((ip[honed|\s\w*]+);.+(apple)/i                                   // iPod/iPhone
            ], [MODEL, VENDOR, [TYPE, MOBILE]], [
            /\((ip[honed|\s\w*]+);/i                                            // iPod/iPhone
            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [

            /(blackberry)[\s-]?(\w+)/i,                                         // BlackBerry
            /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,
                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron
            /(hp)\s([\w\s]+\w)/i,                                               // HP iPAQ
            /(asus)-?(\w+)/i                                                    // Asus
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [
            /\(bb10;\s(\w+)/i                                                   // BlackBerry 10
            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [
                                                                                // Asus Tablets
            /android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i
            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [

            /(sony)\s(tablet\s[ps])\sbuild\//i,                                  // Sony
            /(sony)?(?:sgp.+)\sbuild\//i
            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [
            /android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i
            ], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [

            /\s(ouya)\s/i,                                                      // Ouya
            /(nintendo)\s([wids3u]+)/i                                          // Nintendo
            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [

            /android.+;\s(shield)\sbuild/i                                      // Nvidia
            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [

            /(playstation\s[34portablevi]+)/i                                   // Playstation
            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [

            /(sprint\s(\w+))/i                                                  // Sprint Phones
            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [

            /(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,                        // HTC
            /(zte)-(\w*)/i,                                                     // ZTE
            /(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i
                                                                                // Alcatel/GeeksPhone/Nexian/Panasonic/Sony
            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [

            /(nexus\s9)/i                                                       // HTC Nexus 9
            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [

            /d\/huawei([\w\s-]+)[;\)]/i,
            /(nexus\s6p)/i                                                      // Huawei
            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [

            /(microsoft);\s(lumia[\s\w]+)/i                                     // Microsoft Lumia
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /[\s\(;](xbox(?:\sone)?)[\s\);]/i                                   // Microsoft Xbox
            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [
            /(kin\.[onetw]{3})/i                                                // Microsoft Kin
            ], [[MODEL, /\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [

                                                                                // Motorola
            /\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,
            /mot[\s-]?(\w*)/i,
            /(XT\d{3,4}) build\//i,
            /(nexus\s6)/i
            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [
            /android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i
            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [

            /hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i            // HbbTV devices
            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [

            /hbbtv.+maple;(\d+)/i
            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [

            /\(dtv[\);].+(aquos)/i                                              // Sharp
            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [

            /android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,
            /((SM-T\w+))/i
            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung
            /smart-tv.+(samsung)/i
            ], [VENDOR, [TYPE, SMARTTV], MODEL], [
            /((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,
            /(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,
            /sec-((sgh\w+))/i
            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [

            /sie-(\w*)/i                                                        // Siemens
            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [

            /(maemo|nokia).*(n900|lumia\s\d+)/i,                                // Nokia
            /(nokia)[\s_-]?([\w-]*)/i
            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [

            /android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i                   // Acer
            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [

            /android.+([vl]k\-?\d{3})\s+build/i                                 // LG Tablet
            ], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [
            /android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet
            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [
            /(lg) netcast\.tv/i                                                 // LG SmartTV
            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [
            /(nexus\s[45])/i,                                                   // LG
            /lg[e;\s\/-]+(\w*)/i,
            /android.+lg(\-?[\d\w]+)\s+build/i
            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [

            /(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i             // Lenovo tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [
            /android.+(ideatab[a-z0-9\-\s]+)/i                                  // Lenovo
            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [
            /(lenovo)[_\s-]?([\w-]+)/i
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /linux;.+((jolla));/i                                               // Jolla
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /((pebble))app\/[\d\.]+\s/i                                         // Pebble
            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [

            /android.+;\s(oppo)\s?([\w\s]+)\sbuild/i                            // OPPO
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /crkey/i                                                            // Google Chromecast
            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [

            /android.+;\s(glass)\s\d/i                                          // Google Glass
            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [

            /android.+;\s(pixel c)[\s)]/i                                       // Google Pixel C
            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [

            /android.+;\s(pixel( [23])?( xl)?)[\s)]/i                              // Google Pixel
            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [

            /android.+;\s(\w+)\s+build\/hm\1/i,                                 // Xiaomi Hongmi 'numeric' models
            /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,               // Xiaomi Hongmi
            /android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,    
                                                                                // Xiaomi Mi
            /android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i       // Redmi Phones
            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [
            /android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i            // Mi Pad tablets
            ],[[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [
            /android.+;\s(m[1-5]\snote)\sbuild/i                                // Meizu
            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [
            /(mz)-([\w-]{2,})/i
            ], [[VENDOR, 'Meizu'], MODEL, [TYPE, MOBILE]], [

            /android.+a000(1)\s+build/i,                                        // OnePlus
            /android.+oneplus\s(a\d{4})\s+build/i
            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [

            /android.+[;\/]\s*(RCT[\d\w]+)\s+build/i                            // RCA Tablets
            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [

            /android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i                      // Dell Venue Tablets
            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i                         // Verizon Tablet
            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [

            /android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i     // Barnes & Noble Tablet
            ], [[VENDOR, 'Barnes & Noble'], MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i                           // Barnes & Noble Tablet
            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [

            /android.+;\s(k88)\sbuild/i                                         // ZTE K Series Tablet
            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(gen\d{3})\s+build.*49h/i                         // Swiss GEN Mobile
            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [

            /android.+[;\/]\s*(zur\d{3})\s+build/i                              // Swiss ZUR Tablet
            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [

            /android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i                         // Zeki Tablets
            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [

            /(android).+[;\/]\s+([YR]\d{2})\s+build/i,
            /android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i        // Dragon Touch Tablet
            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i                            // Insignia Tablets
            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [

            /android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i                    // NextBook Tablets
            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i
            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [                    // Voice Xtreme Phones

            /android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i                     // LvTel Phones
            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [

            /android.+;\s(PH-1)\s/i
            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [                // Essential PH-1

            /android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i          // Envizen Tablets
            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i          // Le Pan Tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i                         // MachSpeed Tablets
            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i                // Trinity Tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s*TU_(1491)\s+build/i                               // Rotor Tablets
            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [

            /android.+(KS(.+))\s+build/i                                        // Amazon Kindle Tablets
            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [

            /android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i                      // Gigaset Tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /\s(tablet|tab)[;\/]/i,                                             // Unidentifiable Tablet
            /\s(mobile)(?:[;\/]|\ssafari)/i                                     // Unidentifiable Mobile
            ], [[TYPE, util.lowerize], VENDOR, MODEL], [

            /[\s\/\(](smart-?tv)[;\)]/i                                         // SmartTV
            ], [[TYPE, SMARTTV]], [

            /(android[\w\.\s\-]{0,9});.+build/i                                 // Generic Android Device
            ], [MODEL, [VENDOR, 'Generic']]
        ],

        engine : [[

            /windows.+\sedge\/([\w\.]+)/i                                       // EdgeHTML
            ], [VERSION, [NAME, 'EdgeHTML']], [

            /webkit\/537\.36.+chrome\/(?!27)/i                                  // Blink
            ], [[NAME, 'Blink']], [

            /(presto)\/([\w\.]+)/i,                                             // Presto
            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,     
                                                                                // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna
            /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,                          // KHTML/Tasman/Links
            /(icab)[\/\s]([23]\.[\d\.]+)/i                                      // iCab
            ], [NAME, VERSION], [

            /rv\:([\w\.]{1,9}).+(gecko)/i                                       // Gecko
            ], [VERSION, NAME]
        ],

        os : [[

            // Windows based
            /microsoft\s(windows)\s(vista|xp)/i                                 // Windows (iTunes)
            ], [NAME, VERSION], [
            /(windows)\snt\s6\.2;\s(arm)/i,                                     // Windows RT
            /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,                   // Windows Phone
            /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i
            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [
            /(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i
            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [

            // Mobile/Embedded OS
            /\((bb)(10);/i                                                      // BlackBerry 10
            ], [[NAME, 'BlackBerry'], VERSION], [
            /(blackberry)\w*\/?([\w\.]*)/i,                                     // Blackberry
            /(tizen)[\/\s]([\w\.]+)/i,                                          // Tizen
            /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i
                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki/Sailfish OS
            ], [NAME, VERSION], [
            /(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i                  // Symbian
            ], [[NAME, 'Symbian'], VERSION], [
            /\((series40);/i                                                    // Series 40
            ], [NAME], [
            /mozilla.+\(mobile;.+gecko.+firefox/i                               // Firefox OS
            ], [[NAME, 'Firefox OS'], VERSION], [

            // Console
            /(nintendo|playstation)\s([wids34portablevu]+)/i,                   // Nintendo/Playstation

            // GNU/Linux based
            /(mint)[\/\s\(]?(\w*)/i,                                            // Mint
            /(mageia|vectorlinux)[;\s]/i,                                       // Mageia/VectorLinux
            /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,
                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware
                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus
            /(hurd|linux)\s?([\w\.]*)/i,                                        // Hurd/Linux
            /(gnu)\s?([\w\.]*)/i                                                // GNU
            ], [NAME, VERSION], [

            /(cros)\s[\w]+\s([\w\.]+\w)/i                                       // Chromium OS
            ], [[NAME, 'Chromium OS'], VERSION],[

            // Solaris
            /(sunos)\s?([\w\.\d]*)/i                                            // Solaris
            ], [[NAME, 'Solaris'], VERSION], [

            // BSD based
            /\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i                    // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly
            ], [NAME, VERSION],[

            /(haiku)\s(\w+)/i                                                   // Haiku
            ], [NAME, VERSION],[

            /cfnetwork\/.+darwin/i,
            /ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i             // iOS
            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [

            /(mac\sos\sx)\s?([\w\s\.]*)/i,
            /(macintosh|mac(?=_powerpc)\s)/i                                    // Mac OS
            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [

            // Other
            /((?:open)?solaris)[\/\s-]?([\w\.]*)/i,                             // Solaris
            /(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,                                // AIX
            /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,
                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS/Fuchsia
            /(unix)\s?([\w\.]*)/i                                               // UNIX
            ], [NAME, VERSION]
        ]
    };


    /////////////////
    // Constructor
    ////////////////
    var UAParser = function (uastring, extensions) {

        if (typeof uastring === 'object') {
            extensions = uastring;
            uastring = undefined;
        }

        if (!(this instanceof UAParser)) {
            return new UAParser(uastring, extensions).getResult();
        }

        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);
        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;

        this.getBrowser = function () {
            var browser = { name: undefined, version: undefined };
            mapper.rgx.call(browser, ua, rgxmap.browser);
            browser.major = util.major(browser.version); // deprecated
            return browser;
        };
        this.getCPU = function () {
            var cpu = { architecture: undefined };
            mapper.rgx.call(cpu, ua, rgxmap.cpu);
            return cpu;
        };
        this.getDevice = function () {
            var device = { vendor: undefined, model: undefined, type: undefined };
            mapper.rgx.call(device, ua, rgxmap.device);
            return device;
        };
        this.getEngine = function () {
            var engine = { name: undefined, version: undefined };
            mapper.rgx.call(engine, ua, rgxmap.engine);
            return engine;
        };
        this.getOS = function () {
            var os = { name: undefined, version: undefined };
            mapper.rgx.call(os, ua, rgxmap.os);
            return os;
        };
        this.getResult = function () {
            return {
                ua      : this.getUA(),
                browser : this.getBrowser(),
                engine  : this.getEngine(),
                os      : this.getOS(),
                device  : this.getDevice(),
                cpu     : this.getCPU()
            };
        };
        this.getUA = function () {
            return ua;
        };
        this.setUA = function (uastring) {
            ua = uastring;
            return this;
        };
        return this;
    };

    UAParser.VERSION = LIBVERSION;
    UAParser.BROWSER = {
        NAME    : NAME,
        MAJOR   : MAJOR, // deprecated
        VERSION : VERSION
    };
    UAParser.CPU = {
        ARCHITECTURE : ARCHITECTURE
    };
    UAParser.DEVICE = {
        MODEL   : MODEL,
        VENDOR  : VENDOR,
        TYPE    : TYPE,
        CONSOLE : CONSOLE,
        MOBILE  : MOBILE,
        SMARTTV : SMARTTV,
        TABLET  : TABLET,
        WEARABLE: WEARABLE,
        EMBEDDED: EMBEDDED
    };
    UAParser.ENGINE = {
        NAME    : NAME,
        VERSION : VERSION
    };
    UAParser.OS = {
        NAME    : NAME,
        VERSION : VERSION
    };

    ///////////
    // Export
    //////////


    // check js environment
    if (typeof(exports) !== UNDEF_TYPE) {
        // nodejs env
        if (typeof module !== UNDEF_TYPE && module.exports) {
            exports = module.exports = UAParser;
        }
        exports.UAParser = UAParser;
    } else {
        // requirejs env (optional)
        if (true) {
            !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {
                return UAParser;
            }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
        } else {}
    }

    // jQuery/Zepto specific (optional)
    // Note:
    //   In AMD env the global scope should be kept clean, but jQuery is an exception.
    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,
    //   and we should catch that.
    var $ = window && (window.jQuery || window.Zepto);
    if (typeof $ !== UNDEF_TYPE && !$.ua) {
        var parser = new UAParser();
        $.ua = parser.getResult();
        $.ua.get = function () {
            return parser.getUA();
        };
        $.ua.set = function (uastring) {
            parser.setUA(uastring);
            var result = parser.getResult();
            for (var prop in result) {
                $.ua[prop] = result[prop];
            }
        };
    }

})(typeof window === 'object' ? window : this);


/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var _rtc_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var _assets_style_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);
/* harmony import */ var _assets_style_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_assets_style_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(materialize_css__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _searchParam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






var screenAudio = true;
$(function () {
  Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* getDevices */ "c"])(function (devices) {
    devices.audios.forEach(function (audio) {
      $('<option/>', {
        value: audio.value,
        text: audio.name
      }).appendTo("#microphoneId");
    });
    devices.videos.forEach(function (video) {
      $('<option/>', {
        value: video.value,
        text: video.name
      }).appendTo("#cameraId");
    });
    _common__WEBPACK_IMPORTED_MODULE_1__[/* screenShareResolutions */ "h"].forEach(function (resolution) {
      $('<option/>', {
        value: resolution.value,
        text: resolution.name
      }).appendTo("#screenShareResolution");
    });
    _common__WEBPACK_IMPORTED_MODULE_1__[/* resolutions */ "g"].forEach(function (resolution) {
      $('<option/>', {
        value: resolution.value,
        text: resolution.name
      }).appendTo("#cameraResolution");
    });
    materialize_css__WEBPACK_IMPORTED_MODULE_3__["AutoInit"]();
  });
  var fields = ['appID', 'channel'];
  var rtc = new _rtc_client__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"]();
  $(".autoplay-fallback").on("click", function (e) {
    e.preventDefault();
    var id = e.target.getAttribute("id").split("video_autoplay_")[1];
    console.log("autoplay fallback");

    if (id === 'local') {
      rtc._localStream.resume().then(function () {
        Toast.notice("local resume");
        $(e.target).addClass("hide");
      })["catch"](function (err) {
        Toast.error("resume failed, please open console see more details");
        console.error(err);
      });

      return;
    }

    var remoteStream = rtc._remoteStreams.find(function (item) {
      return "".concat(item.getId()) == id;
    });

    if (remoteStream) {
      remoteStream.resume().then(function () {
        Toast.notice("remote resume");
        $(e.target).addClass("hide");
      })["catch"](function (err) {
        Toast.error("resume failed, please open console see more details");
        console.error(err);
      });
    }
  });
  $("#show_profile").on("change", function (e) {
    e.preventDefault();
    rtc.setNetworkQualityAndStreamStats(this.checked);
  });
  $("#join").on("click", function (e) {
    e.preventDefault();
    console.log("join clicked");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.join(params).then(function () {
        rtc.publish();
      });
    }
  });
  $("#enable_audio").on("change", function (e) {
    e.preventDefault();
    screenAudio = this.checked;
  });
  $("#joinScreenShare").on("click", function (e) {
    e.preventDefault();
    console.log("joinScreenShare clicked");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.joinScreenSharing(_objectSpread({}, params, {
        screenAudio: screenAudio
      })).then(function () {
        rtc.publish();
      });
    }
  });
  $("#publish").on("click", function (e) {
    e.preventDefault();
    console.log("startLiveStreaming");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.publish();
    }
  });
  $("#unpublish").on("click", function (e) {
    e.preventDefault();
    console.log("stopLiveStreaming");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.unpublish();
    }
  });
  $("#leave").on("click", function (e) {
    e.preventDefault();
    console.log("leave");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.leave();
    }
  });
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)))

/***/ }),
/* 7 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export parseFromSearch */
/* unused harmony export stringify */
/* unused harmony export setFormData */
/* unused harmony export replaceSearchString */
var parseFromSearch = function parseFromSearch() {
  var searchStr = window.location.search;
  var param = new URLSearchParams(searchStr);
  var map = {};
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = param.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var key = _step.value;
      map[key] = param.get(key);
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator["return"] != null) {
        _iterator["return"]();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  return map;
};
var stringify = function stringify(obj) {
  var str = Object.entries(obj).reduce(function (pre, cur) {
    return pre + "".concat(cur[0], "=").concat(cur[1], "&");
  }, '?');
  return str.slice(0, -1);
};
var setFormData = function setFormData(obj) {
  Object.keys(obj).map(function (key) {
    var targetDom = document.querySelector("[name=".concat(key, "]"));

    if (targetDom) {
      targetDom.value = obj[key];
    }
  });
};
var replaceSearchString = function replaceSearchString(searchStr) {
  if (window.history.pushState) {
    var newURL = new URL(window.location.href);
    newURL.search = searchStr;
    window.history.pushState({
      path: newURL.href
    }, "", newURL.href);
  } else {
    console.warn('`history.pushState` is not supported');
  }
};

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYWdvcmEtcnRjLXNkay9BZ29yYVJUQ1NESy5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2pxdWVyeS9kaXN0L2pxdWVyeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWF0ZXJpYWxpemUtY3NzL2Rpc3QvanMvbWF0ZXJpYWxpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3J0Yy1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VhLXBhcnNlci1qcy9zcmMvdWEtcGFyc2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy9hc3NldHMvc3R5bGUuc2Nzcz9jNzZiIiwid2VicGFjazovLy8uL3NyYy9zZWFyY2hQYXJhbS5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiQWdvcmFSVEMiLCJWRVJTSU9OIiwicmVzb2x1dGlvbnMiLCJuYW1lIiwidmFsdWUiLCJzY3JlZW5TaGFyZVJlc29sdXRpb25zIiwicGFyc2VyIiwiVUFQYXJzZXIiLCJ1c2VyQWdlbnRJbmZvIiwiZ2V0UmVzdWx0IiwiaXNTYWZhcmkiLCJicm93c2VyIiwiaXNDb21wYXRpYmxlQ2hyb21lIiwibWFqb3IiLCJpc0ZpcmVmb3giLCJUb2FzdGlmeSIsIm9wdGlvbnMiLCJNIiwiaHRtbCIsInRleHQiLCJjbGFzc2VzIiwiVG9hc3QiLCJpbmZvIiwibXNnIiwibm90aWNlIiwiZXJyb3IiLCJ2YWxpZGF0b3IiLCJmb3JtRGF0YSIsImZpZWxkcyIsImtleXMiLCJPYmplY3QiLCJrZXkiLCJpbmRleE9mIiwic2VyaWFsaXplRm9ybURhdGEiLCIkIiwic2VyaWFsaXplQXJyYXkiLCJvYmoiLCJpdGVtIiwidmFsIiwidWlkIiwidW5kZWZpbmVkIiwiTnVtYmVyIiwiaXNOYU4iLCJhZGRWaWV3IiwiaWQiLCJzaG93IiwiYXBwZW5kVG8iLCJyZW1vdmVWaWV3IiwicmVtb3ZlIiwiZ2V0RGV2aWNlcyIsIm5leHQiLCJpdGVtcyIsImZpbHRlciIsImtpbmQiLCJtYXAiLCJsYWJlbCIsImRldmljZUlkIiwidmlkZW9zIiwiYXVkaW9zIiwiaSIsImxlbmd0aCIsInB1c2giLCJjaGVja1N5c3RlbVJlcXVpcmVtZW50cyIsIlJUQ0NsaWVudCIsIl9jbGllbnQiLCJfam9pbmVkIiwiX3B1Ymxpc2hlZCIsIl9sb2NhbFN0cmVhbSIsIl9yZW1vdGVTdHJlYW1zIiwiX3BhcmFtcyIsIl9zaG93UHJvZmlsZSIsIm9uIiwiZXJyIiwiZXZ0IiwicmVtb3RlU3RyZWFtIiwic3RyZWFtIiwiZ2V0SWQiLCJzdWJzY3JpYmUiLCJwbGF5IiwiZml0Iiwic3RvcCIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNyZWF0ZUNsaWVudCIsIm1vZGUiLCJjb2RlYyIsImhhbmRsZUV2ZW50cyIsImluaXQiLCJhcHBJRCIsImpvaW4iLCJ0b2tlbiIsImNoYW5uZWwiLCJfaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIl91cGRhdGVWaWRlb0luZm8iLCJzdHJlYW1TcGVjIiwic3RyZWFtSUQiLCJhdWRpbyIsInZpZGVvIiwic2NyZWVuIiwibWljcm9waG9uZUlkIiwiY2FtZXJhSWQiLCJtaXJyb3IiLCJjcmVhdGVTdHJlYW0iLCJjYW1lcmFSZXNvbHV0aW9uIiwic2V0VmlkZW9Qcm9maWxlIiwic2NyZWVuQXVkaW8iLCJtZWRpYVNvdXJjZSIsImV4dGVuc2lvbklkIiwic2NyZWVuU2hhcmVSZXNvbHV0aW9uIiwic2V0U2NyZWVuUHJvZmlsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvbGRTdGF0ZSIsInB1Ymxpc2giLCJ1bnB1Ymxpc2giLCJsZWF2ZSIsImNsb3NlIiwiYWRkQ2xhc3MiLCJzaGlmdCIsImxvc3RQYWNrZXRzIiwiYXJyaXZlZFBhY2tldHMiLCJsb3N0IiwiYXJyaXZlZCIsInJlc3VsdCIsInRvRml4ZWQiLCJnZXRTdGF0cyIsInN0YXRzIiwibG9jYWxTdHJlYW1Qcm9maWxlIiwiYWNjZXNzRGVsYXkiLCJ2aWRlb1NlbmRGcmFtZVJhdGUiLCJ2aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGgiLCJ2aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0IiwiaW5uZXJIVE1MIiwicmVtb3RlU3RyZWFtUHJvZmlsZSIsImVuZFRvRW5kRGVsYXkiLCJ2aWRlb1JlY2VpdmVGcmFtZVJhdGUiLCJ2aWRlb1JlY2VpdmVSZXNvbHV0aW9uV2lkdGgiLCJ2aWRlb1JlY2VpdmVSZXNvbHV0aW9uSGVpZ2h0IiwiZW5hYmxlIiwicmVtb3ZlQ2xhc3MiLCJkZXZpY2VzIiwiZm9yRWFjaCIsInJlc29sdXRpb24iLCJydGMiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpdCIsInJlc3VtZSIsInRoZW4iLCJmaW5kIiwic2V0TmV0d29ya1F1YWxpdHlBbmRTdHJlYW1TdGF0cyIsImNoZWNrZWQiLCJwYXJhbXMiLCJqb2luU2NyZWVuU2hhcmluZyIsInBhcnNlRnJvbVNlYXJjaCIsInNlYXJjaFN0ciIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwicGFyYW0iLCJVUkxTZWFyY2hQYXJhbXMiLCJnZXQiLCJzdHIiLCJlbnRyaWVzIiwicmVkdWNlIiwicHJlIiwiY3VyIiwic2xpY2UiLCJzZXRGb3JtRGF0YSIsInRhcmdldERvbSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlcGxhY2VTZWFyY2hTdHJpbmciLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwibmV3VVJMIiwiVVJMIiwiaHJlZiIsInBhdGgiLCJ3YXJuIl0sIm1hcHBpbmdzIjoiO1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztR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Q0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxZQUFZOztBQUVwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUYsb0JBQW9COztBQUVwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0Esa0JBQWtCLGtDQUFrQztBQUNwRCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsWUFBWTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxTQUFTO0FBQ2xCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUyxZQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVSxZQUFZO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsU0FBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0IsSUFBSTs7QUFFcEI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUSw2QkFBNkI7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixhQUFhLHVCQUF1QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxVQUFVO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxjQUFjO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxnQ0FBZ0MsTUFBTTtBQUN0QztBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxlQUFlOztBQUVmLFNBQVM7O0FBRVQ7QUFDQSxRQUFRLGlDQUFpQztBQUN6QyxRQUFRLG9CQUFvQjtBQUM1QixRQUFRLHNDQUFzQztBQUM5QyxRQUFRO0FBQ1IsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLGFBQWEsRUFBRTtBQUMvQjtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsNERBQTREOztBQUU1RDtBQUNBO0FBQ0E7QUFDQSx5Q0FBeUM7O0FBRXpDO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0EsMENBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdFQUFnRTs7QUFFaEU7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDOztBQUU3QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVI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QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsTUFBTTtBQUNqQixXQUFXLE1BQU07QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7O0FBRUEsQ0FBQzs7OztBQUlEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBLFFBQVEsR0FBRztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBOzs7O0FBSUE7O0FBRUE7O0FBRUE7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBOztBQUVBLGNBQWMsU0FBUztBQUN2QjtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsT0FBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCLDBCQUEwQix3QkFBd0I7O0FBRWxEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLDBDQUEwQztBQUMxQyxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7O0FBRW5CO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsY0FBYztBQUN4QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdDQUF3QyxzQ0FBc0M7QUFDOUUsb0NBQW9DLHVDQUF1QztBQUMzRSxvQ0FBb0Msc0NBQXNDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVU7O0FBRVY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0M7QUFDcEMscUNBQXFDO0FBQ3JDLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7OztBQUtBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLGFBQWE7QUFDcEMsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsU0FBUztBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7O0FBR0E7O0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0EsR0FBRztBQUNILGNBQWM7O0FBRWQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVEsZ0JBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7OztBQUlBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsRUFBRTtBQUNGOztBQUVBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLE9BQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0Esc0JBQXNCOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxPQUFPO0FBQ2Y7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsZ0JBQWdCO0FBQ2xCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXOztBQUVYOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDs7QUFFQTtBQUNBOztBQUVBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLCtEQUErRDtBQUMvRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVUsY0FBYzs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix1Q0FBdUM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVEQUF1RDtBQUM5RTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSywrQ0FBK0M7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELGNBQWMscUNBQXFDO0FBQ25EOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7OztBQUdEOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCOztBQUU5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSwrQkFBK0I7QUFDdkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDQUF3QyxPQUFPO0FBQy9DO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxxQ0FBcUM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLDhCQUE4QjtBQUN2Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsWUFBWSxPQUFPO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxXQUFXO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7OztBQUlBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQ0FBK0MsY0FBYyxXQUFXO0FBQ3hFLG1CQUFtQixVQUFVO0FBQzdCO0FBQ0Esc0JBQXNCLGNBQWMsc0JBQXNCLGdCQUFnQjtBQUMxRSxnQkFBZ0IsV0FBVyxZQUFZO0FBQ3ZDLGNBQWM7QUFDZDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOzs7QUFHRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0RBQStEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFFBQVEsT0FBTzs7QUFFZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixpREFBaUQsMEJBQTBCO0FBQzNFOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVyxnQkFBZ0I7QUFDM0I7QUFDQTs7QUFFQSw2Q0FBNkM7QUFDN0M7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBOztBQUVBLFFBQVEsZ0JBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxnQkFBZ0I7QUFDekI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0EsaUVBQWlFO0FBQ2pFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUEsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxvQkFBb0IsY0FBYztBQUNsQyxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxpREFBaUQ7O0FBRWpEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCLFNBQVM7QUFDeEM7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0JBQStCLFNBQVM7QUFDeEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLG1CQUFtQixnQkFBZ0I7QUFDbkM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGtCQUFrQjtBQUM1QixXQUFXLGtCQUFrQjtBQUM3QixjQUFjO0FBQ2QsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxRQUFRLG1CQUFtQjtBQUMzQjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7QUFLRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBLGlDQUFpQztBQUNqQztBQUNBOztBQUVBLElBQUk7QUFDSjs7QUFFQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLFNBQVM7QUFDcEI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7O0FBS0Q7OztBQUdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBOztBQUVBOztBQUVBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQztBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsS0FBSztBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUNBQXFDOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBOztBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYixLQUFLO0FBQ0w7O0FBRUEsV0FBVztBQUNYLEdBQUc7QUFDSDtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCOztBQUVoQixnREFBZ0Q7QUFDaEQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxtQkFBbUI7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQixTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQjs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQzs7QUFFbEM7QUFDQSxzQkFBc0I7QUFDdEIsMkJBQTJCOztBQUUzQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVCQUF1QjtBQUNsQyxXQUFXLHlCQUF5QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7QUFLRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQixhQUFhLHVDQUF1QztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7QUFLRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHFEQUFxRDtBQUNyRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FB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OztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVLFlBQVk7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFVBQVUsT0FBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLFNBQVM7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUssRUFBRTs7QUFFUDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLG9GQUFvRjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSxNQUFNO0FBQ25CLGFBQWEsNEJBQTRCO0FBQ3pDLGFBQWEsT0FBTztBQUNwQjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0EsdUJBQXVCLGdCQUFnQjtBQUN2QztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLENBQUM7O0FBRUQsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0EsSUFBSSxJQUEwQztBQUM5QyxFQUFFLGlDQUFZLEVBQUUsbUNBQUU7QUFDbEI7QUFDQSxHQUFHO0FBQUEsb0dBQUM7O0FBRUo7QUFDQSxDQUFDLE1BQU0sRUFLTjs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE1BQU07QUFDakIsV0FBVyxPQUFPO0FBQ2xCLFdBQVcsT0FBTztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0Qjs7QUFFQTtBQUNBLGFBQWEsT0FBTztBQUNwQixjQUFjLE9BQU87QUFDckIsY0FBYyxPQUFPO0FBQ3JCLGNBQWMsT0FBTztBQUNyQixjQUFjLE9BQU87QUFDckI7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUTtBQUNuQixXQUFXLFNBQVM7QUFDcEIsV0FBVyxPQUFPO0FBQ2xCLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsYUFBYSxPQUFPO0FBQ3BCLGNBQWMsUUFBUTtBQUN0QixjQUFjLFFBQVE7QUFDdEIsY0FBYyxRQUFRO0FBQ3RCLGNBQWMsUUFBUTtBQUN0Qjs7QUFFQTtBQUNBLGFBQWEsT0FBTztBQUNwQixjQUFjLE9BQU87QUFDckIsY0FBYyxPQUFPO0FBQ3JCLGNBQWMsT0FBTztBQUNyQixjQUFjLE9BQU87QUFDckI7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVTtBQUNWLFlBQVk7QUFDWjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSyxlQUFlO0FBQ3BCO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCLFdBQVcsT0FBTztBQUNsQixXQUFXLFFBQVE7QUFDbkIsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxVQUFVLEdBQUc7QUFDNUIsdUZBQXVGO0FBQ3ZGLEVBQUU7QUFDRjtBQUNBLEVBQUUseUNBQXlDO0FBQzNDO0FBQ0Esc0NBQXNDO0FBQ3RDLEVBQUUsMkJBQTJCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLHVCQUF1Qix1Q0FBdUMsOEVBQThFLHVGQUF1RjtBQUNuTztBQUNBLEtBQUssRUFBRSxFQUFFO0FBQ1QsRUFBRTtBQUNGLFlBQVk7QUFDWiwyQkFBMkIsMEJBQTBCLElBQUk7QUFDekQsR0FBRztBQUNIO0FBQ0E7QUFDQSwrQkFBK0IsS0FBSyxXQUFXO0FBQy9DO0FBQ0EsSUFBSTtBQUNKLEVBQUUsb0NBQW9DO0FBQ3RDLCtCQUErQixpQ0FBaUM7QUFDaEUsV0FBVztBQUNYO0FBQ0Esb0JBQW9CLFFBQVE7QUFDNUIsT0FBTztBQUNQLGdCQUFnQjtBQUNoQixRQUFRO0FBQ1IsS0FBSyxHQUFHO0FBQ1I7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLGlCQUFpQixXQUFXLGtCQUFrQjtBQUNyRSxtQkFBbUIsb0JBQW9CLEVBQUU7QUFDekMsS0FBSyxvQkFBb0IsU0FBUyxTQUFTLHFEQUFxRCwyQ0FBMkM7QUFDM0k7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsQ0FBQyxxQkFBcUI7QUFDdEI7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILDRGQUE0RixPQUFPO0FBQ25HO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBLGdDQUFnQztBQUNoQyxHQUFHO0FBQ0g7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsY0FBYztBQUNkLFVBQVU7QUFDVjtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQSxVQUFVO0FBQ1Y7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsVUFBVTtBQUNWO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSDtBQUNBO0FBQ0EsS0FBSyxFQUFFLHFCQUFxQixFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUU7QUFDdEQsMkJBQTJCO0FBQzNCLCtCQUErQjtBQUMvQixHQUFHO0FBQ0g7QUFDQSx3QkFBd0IsYUFBYTtBQUNyQyxLQUFLLDRIQUE0SCx5QkFBeUI7QUFDMUo7QUFDQSxzQkFBc0IsMEJBQTBCO0FBQ2hEO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QjtBQUN6QixLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILHdFQUF3RTtBQUN4RSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0g7QUFDQSxHQUFHO0FBQ0gsZ0RBQWdELDRFQUE0RSwyREFBMkQ7QUFDdkwsR0FBRztBQUNIO0FBQ0EsZ0RBQWdELHNCQUFzQixpQkFBaUIsdURBQXVELGVBQWU7QUFDN0o7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLLEVBQUU7QUFDUCxHQUFHO0FBQ0gsc0JBQXNCO0FBQ3RCLHVCQUF1QjtBQUN2Qix1QkFBdUI7QUFDdkIsa0NBQWtDO0FBQ2xDLEdBQUc7QUFDSCxvQ0FBb0MsaUJBQWlCLGtCQUFrQixrQkFBa0Isb0NBQW9DLGtCQUFrQjtBQUMvSSx5QkFBeUI7QUFDekIseUJBQXlCO0FBQ3pCO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILGlCQUFpQix5QkFBeUIscUJBQXFCO0FBQy9ELDJCQUEyQix3QkFBd0I7QUFDbkQsS0FBSztBQUNMLEdBQUc7QUFDSCxvREFBb0Qsa0NBQWtDO0FBQ3RGLGlEQUFpRDtBQUNqRCwwRUFBMEU7QUFDMUUsa0JBQWtCLG1EQUFtRCxHQUFHLG1EQUFtRCxFQUFFO0FBQzdILG9CQUFvQjtBQUNwQix5QkFBeUI7QUFDekIsR0FBRztBQUNIO0FBQ0EsK0JBQStCO0FBQy9CLEtBQUs7QUFDTDtBQUNBLGlCQUFpQixxQkFBcUI7QUFDdEMsbUJBQW1CO0FBQ25CO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLFVBQVUsaUNBQWlDO0FBQzNDO0FBQ0EsMERBQTBEO0FBQzFELE9BQU87QUFDUCxLQUFLLGlHQUFpRyxRQUFRLFFBQVE7QUFDdEgsR0FBRztBQUNILCtDQUErQztBQUMvQztBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsaUJBQWlCO0FBQ2pCLGNBQWM7QUFDZCxLQUFLO0FBQ0wsR0FBRztBQUNILGlCQUFpQjtBQUNqQix1QkFBdUIsbUZBQW1GO0FBQzFHLEtBQUs7QUFDTCwwQkFBMEIsaUNBQWlDLFlBQVksZ0NBQWdDO0FBQ3ZHLEtBQUs7QUFDTDtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsY0FBYztBQUNkLFVBQVU7QUFDVix5QkFBeUI7QUFDekI7QUFDQSxPQUFPLGlDQUFpQztBQUN4QyxLQUFLLG9DQUFvQyw4QkFBOEI7QUFDdkUsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNILFVBQVU7QUFDVixtQkFBbUI7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUMsaUJBQWlCLGVBQWUsK0JBQStCLHVDQUF1Qyx3QkFBd0Isc0VBQXNFLG9CQUFvQixtQ0FBbUMsMkJBQTJCO0FBQ3pULEtBQUs7QUFDTCxHQUFHO0FBQ0g7QUFDQTtBQUNBLG9DQUFvQztBQUNwQywyQkFBMkIsS0FBSztBQUNoQyxTQUFTLGlCQUFpQjtBQUMxQixPQUFPO0FBQ1AsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCwwQkFBMEI7QUFDMUI7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Ysd0RBQXdELGlEQUFpRDtBQUN6RyxLQUFLLGFBQWEsYUFBYSw0R0FBNEc7QUFDM0ksR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsNEJBQTRCLGlDQUFpQyxPQUFPO0FBQ3BFO0FBQ0E7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0EsU0FBUyxXQUFXLG9OQUFvTixPQUFPO0FBQy9PO0FBQ0E7QUFDQTtBQUNBLGlFQUFpRSx5REFBeUQ7QUFDMUgsU0FBUyx1Q0FBdUMsT0FBTztBQUN2RDtBQUNBLFNBQVMsZUFBZSw2Q0FBNkMsbUJBQW1CO0FBQ3hGLE9BQU8sMENBQTBDLE9BQU87QUFDeEQ7QUFDQSxPQUFPLGtCQUFrQjtBQUN6QixLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1CQUFtQjtBQUNuQjtBQUNBO0FBQ0EsK0NBQStDLE9BQU87QUFDdEQ7QUFDQSxTQUFTLFlBQVksS0FBSztBQUMxQjtBQUNBO0FBQ0EsT0FBTyxrRUFBa0UseUJBQXlCLHdGQUF3RixZQUFZO0FBQ3RNLEtBQUsscUJBQXFCLEtBQUs7QUFDL0I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQSxxQkFBcUIsa0JBQWtCLGVBQWUsY0FBYyxhQUFhLGlCQUFpQiw2QkFBNkIsbURBQW1ELEtBQUssMkJBQTJCLEtBQUs7QUFDdk47QUFDQTtBQUNBLE1BQU07QUFDTixZQUFZLGFBQWE7QUFDekIsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOLDJCQUEyQix5QkFBeUI7QUFDcEQsTUFBTTtBQUNOO0FBQ0EsTUFBTTtBQUNOLCtCQUErQixNQUFNO0FBQ3JDLE1BQU07QUFDTjtBQUNBLGdCQUFnQjtBQUNoQixNQUFNLGVBQWUsVUFBVSx1QkFBdUI7QUFDdEQsR0FBRyxVQUFVLHNIQUFzSDtBQUNuSSxXQUFXLCtFQUErRTtBQUMxRjtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsMkJBQTJCLEVBQUUsZUFBZSxFQUFFO0FBQzlDO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLEtBQUssRUFBRTtBQUNQO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBLHFDQUFxQyx1Q0FBdUMsUUFBUTtBQUNwRjtBQUNBLFNBQVM7QUFDVCwyQ0FBMkMsc0JBQXNCLHNCQUFzQixzQkFBc0IsdUJBQXVCO0FBQ3BJO0FBQ0EsV0FBVyxJQUFJO0FBQ2Ysb0ZBQW9GO0FBQ3BGLHVCQUF1QixPQUFPO0FBQzlCLG9GQUFvRixtQkFBbUI7QUFDdkc7QUFDQSxhQUFhO0FBQ2IsV0FBVyx5QkFBeUI7QUFDcEM7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBLGFBQWEsd0NBQXdDO0FBQ3JELFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLGFBQWE7QUFDYjtBQUNBLE9BQU87QUFDUDtBQUNBLE9BQU8sR0FBRztBQUNWLGFBQWEsZ0NBQWdDO0FBQzdDLGNBQWM7QUFDZCxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPLFdBQVc7QUFDbEIsS0FBSztBQUNMLEdBQUc7QUFDSCxZQUFZO0FBQ1o7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0wsMEJBQTBCO0FBQzFCLEtBQUssRUFBRTtBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsdUJBQXVCO0FBQ3ZCLHVCQUF1QixPQUFPO0FBQzlCO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLO0FBQ0wsR0FBRyxHQUFHLG9CQUFvQixZQUFZLGNBQWM7QUFDcEQsYUFBYSxzQkFBc0IsS0FBSztBQUN4Qyx3REFBd0QsS0FBSztBQUM3RDtBQUNBO0FBQ0E7QUFDQSxJQUFJLGVBQWU7QUFDbkI7QUFDQSxxQkFBcUI7QUFDckIsY0FBYztBQUNkO0FBQ0EsSUFBSTtBQUNKLGlCQUFpQixzQ0FBc0M7QUFDdkQsSUFBSSxhQUFhLGNBQWM7QUFDL0IsaUJBQWlCLFVBQVUsZUFBZTtBQUMxQztBQUNBLHFCQUFxQjtBQUNyQixPQUFPLEVBQUU7QUFDVCxpQ0FBaUMsR0FBRyxtQ0FBbUMsZUFBZSxpQkFBaUIsZ0JBQWdCLDBCQUEwQixrQ0FBa0MsYUFBYSxpQkFBaUIsaUJBQWlCLFNBQVMsYUFBYSxpQkFBaUIsNENBQTRDO0FBQ3JULE9BQU8sRUFBRSxVQUFVLFVBQVUsMEJBQTBCO0FBQ3ZELE1BQU07QUFDTixJQUFJO0FBQ0o7QUFDQSxJQUFJO0FBQ0osQ0FBQztBQUNELENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QjtBQUNBLGtDQUFrQzs7QUFFbEM7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlOztBQUVmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlOztBQUVmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QjtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QjtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0I7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FB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O0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSztBQUN0Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQztBQUNEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBLHFCQUFxQixxQkFBcUI7QUFDMUM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQztBQUNsQyxPQUFPO0FBQ1A7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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QUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4QixpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLHlCQUF5QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsZUFBZSxNQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxlQUFlLE1BQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUcsRUFBRTtBQUNMLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPOztBQUVQOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QixpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0RBQW9EOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsZUFBZTtBQUNmO0FBQ0EsV0FBVzs7QUFFWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFD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O0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLGdCQUFnQixRQUFRO0FBQ3hCLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0EsbUNBQW1DOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsbUNBQW1DOztBQUVuQztBQUNBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaUJBQWlCO0FBQ2pEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdCQUFnQjtBQUNwRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixXQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLHNCQUFzQiw0QkFBNEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSx1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixTQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSCwrYkFBK2I7O0FBRS9iOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsK0dBQStHO0FBQy9HO0FBQ0EseUJBQXlCLGlCQUFpQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFD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Z0JBQWdCO0FBQ2hCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQzs7QUFFbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQsd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7O0FB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RyxDQUFDSyxLQUFKLENBQVUsQ0FBVixFQUFhLENBQUMsQ0FBZCxDQUFQO0FBQ0QsQ0FMTTtBQU9BLElBQU1DLFdBQVcsR0FBRyxTQUFkQSxXQUFjLENBQUN6SSxHQUFELEVBQVM7QUFDbENOLFFBQU0sQ0FBQ0QsSUFBUCxDQUFZTyxHQUFaLEVBQWlCa0IsR0FBakIsQ0FBcUIsVUFBQXZCLEdBQUcsRUFBSTtBQUMxQixRQUFNK0ksU0FBUyxHQUFHQyxRQUFRLENBQUNDLGFBQVQsaUJBQWdDakosR0FBaEMsT0FBbEI7O0FBQ0EsUUFBSStJLFNBQUosRUFBZTtBQUNiQSxlQUFTLENBQUMxSyxLQUFWLEdBQWtCZ0MsR0FBRyxDQUFDTCxHQUFELENBQXJCO0FBQ0Q7QUFDRixHQUxEO0FBTUQsQ0FQTTtBQVNBLElBQU1rSixtQkFBbUIsR0FBRyxTQUF0QkEsbUJBQXNCLENBQUNqQixTQUFELEVBQWU7QUFDaEQsTUFBSUMsTUFBTSxDQUFDaUIsT0FBUCxDQUFlQyxTQUFuQixFQUE4QjtBQUM1QixRQUFNQyxNQUFNLEdBQUcsSUFBSUMsR0FBSixDQUFRcEIsTUFBTSxDQUFDQyxRQUFQLENBQWdCb0IsSUFBeEIsQ0FBZjtBQUNBRixVQUFNLENBQUNqQixNQUFQLEdBQWdCSCxTQUFoQjtBQUNBQyxVQUFNLENBQUNpQixPQUFQLENBQWVDLFNBQWYsQ0FBeUI7QUFBRUksVUFBSSxFQUFFSCxNQUFNLENBQUNFO0FBQWYsS0FBekIsRUFBZ0QsRUFBaEQsRUFBb0RGLE1BQU0sQ0FBQ0UsSUFBM0Q7QUFDRCxHQUpELE1BSU87QUFDTHhMLFdBQU8sQ0FBQzBMLElBQVIsQ0FBYSxzQ0FBYjtBQUNEO0FBQ0YsQ0FSTSxDIiwiZmlsZSI6ImluZGV4LjZmZGNlZjFiNmU2NmFkMmZmZDVhLmpzIiwic291cmNlc0NvbnRlbnQiOlsiIFx0Ly8gVGhlIG1vZHVsZSBjYWNoZVxuIFx0dmFyIGluc3RhbGxlZE1vZHVsZXMgPSB7fTtcblxuIFx0Ly8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbiBcdGZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblxuIFx0XHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcbiBcdFx0aWYoaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0pIHtcbiBcdFx0XHRyZXR1cm4gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0uZXhwb3J0cztcbiBcdFx0fVxuIFx0XHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuIFx0XHR2YXIgbW9kdWxlID0gaW5zdGFsbGVkTW9kdWxlc1ttb2R1bGVJZF0gPSB7XG4gXHRcdFx0aTogbW9kdWxlSWQsXG4gXHRcdFx0bDogZmFsc2UsXG4gXHRcdFx0ZXhwb3J0czoge31cbiBcdFx0fTtcblxuIFx0XHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cbiBcdFx0bW9kdWxlc1ttb2R1bGVJZF0uY2FsbChtb2R1bGUuZXhwb3J0cywgbW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cbiBcdFx0Ly8gRmxhZyB0aGUgbW9kdWxlIGFzIGxvYWRlZFxuIFx0XHRtb2R1bGUubCA9IHRydWU7XG5cbiBcdFx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcbiBcdFx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xuIFx0fVxuXG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlcyBvYmplY3QgKF9fd2VicGFja19tb2R1bGVzX18pXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm0gPSBtb2R1bGVzO1xuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZSBjYWNoZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5jID0gaW5zdGFsbGVkTW9kdWxlcztcblxuIFx0Ly8gZGVmaW5lIGdldHRlciBmdW5jdGlvbiBmb3IgaGFybW9ueSBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQgPSBmdW5jdGlvbihleHBvcnRzLCBuYW1lLCBnZXR0ZXIpIHtcbiBcdFx0aWYoIV9fd2VicGFja19yZXF1aXJlX18ubyhleHBvcnRzLCBuYW1lKSkge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBuYW1lLCB7IGVudW1lcmFibGU6IHRydWUsIGdldDogZ2V0dGVyIH0pO1xuIFx0XHR9XG4gXHR9O1xuXG4gXHQvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSBmdW5jdGlvbihleHBvcnRzKSB7XG4gXHRcdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuIFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuIFx0XHR9XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG4gXHR9O1xuXG4gXHQvLyBjcmVhdGUgYSBmYWtlIG5hbWVzcGFjZSBvYmplY3RcbiBcdC8vIG1vZGUgJiAxOiB2YWx1ZSBpcyBhIG1vZHVsZSBpZCwgcmVxdWlyZSBpdFxuIFx0Ly8gbW9kZSAmIDI6IG1lcmdlIGFsbCBwcm9wZXJ0aWVzIG9mIHZhbHVlIGludG8gdGhlIG5zXG4gXHQvLyBtb2RlICYgNDogcmV0dXJuIHZhbHVlIHdoZW4gYWxyZWFkeSBucyBvYmplY3RcbiBcdC8vIG1vZGUgJiA4fDE6IGJlaGF2ZSBsaWtlIHJlcXVpcmVcbiBcdF9fd2VicGFja19yZXF1aXJlX18udCA9IGZ1bmN0aW9uKHZhbHVlLCBtb2RlKSB7XG4gXHRcdGlmKG1vZGUgJiAxKSB2YWx1ZSA9IF9fd2VicGFja19yZXF1aXJlX18odmFsdWUpO1xuIFx0XHRpZihtb2RlICYgOCkgcmV0dXJuIHZhbHVlO1xuIFx0XHRpZigobW9kZSAmIDQpICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdmFsdWUgJiYgdmFsdWUuX19lc01vZHVsZSkgcmV0dXJuIHZhbHVlO1xuIFx0XHR2YXIgbnMgPSBPYmplY3QuY3JlYXRlKG51bGwpO1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLnIobnMpO1xuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkobnMsICdkZWZhdWx0JywgeyBlbnVtZXJhYmxlOiB0cnVlLCB2YWx1ZTogdmFsdWUgfSk7XG4gXHRcdGlmKG1vZGUgJiAyICYmIHR5cGVvZiB2YWx1ZSAhPSAnc3RyaW5nJykgZm9yKHZhciBrZXkgaW4gdmFsdWUpIF9fd2VicGFja19yZXF1aXJlX18uZChucywga2V5LCBmdW5jdGlvbihrZXkpIHsgcmV0dXJuIHZhbHVlW2tleV07IH0uYmluZChudWxsLCBrZXkpKTtcbiBcdFx0cmV0dXJuIG5zO1xuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCJcIjtcblxuXG4gXHQvLyBMb2FkIGVudHJ5IG1vZHVsZSBhbmQgcmV0dXJuIGV4cG9ydHNcbiBcdHJldHVybiBfX3dlYnBhY2tfcmVxdWlyZV9fKF9fd2VicGFja19yZXF1aXJlX18ucyA9IDYpO1xuIiwiaW1wb3J0IEFnb3JhUlRDIGZyb20gJ2Fnb3JhLXJ0Yy1zZGsnO1xyXG5jb25zb2xlLmxvZyhcIkFnb3JhUlRDIFNESyBWRVJTSU9OOiBcIiwgQWdvcmFSVEMuVkVSU0lPTik7XHJcbmltcG9ydCAqIGFzIE0gZnJvbSAnbWF0ZXJpYWxpemUtY3NzJztcclxuaW1wb3J0IFVBUGFyc2VyIGZyb20gJ3VhLXBhcnNlci1qcyc7XHJcblxyXG5leHBvcnQgY29uc3QgcmVzb2x1dGlvbnMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ2RlZmF1bHQnLFxyXG4gICAgdmFsdWU6ICdkZWZhdWx0JyxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICc0ODBwJyxcclxuICAgIHZhbHVlOiAnNDgwcCcsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnNzIwcCcsXHJcbiAgICB2YWx1ZTogJzcyMHAnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJzEwODBwJyxcclxuICAgIHZhbHVlOiAnMTA4MHAnXHJcbiAgfVxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IHNjcmVlblNoYXJlUmVzb2x1dGlvbnMgPSBbXHJcbiAge1xyXG4gICAgbmFtZTogJ2RlZmF1bHQnLFxyXG4gICAgdmFsdWU6ICdkZWZhdWx0JyxcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICc0ODBwXzEnLFxyXG4gICAgdmFsdWU6ICc0ODBwXzEnLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJzcyMHBfMScsXHJcbiAgICB2YWx1ZTogJzcyMHBfMScsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiAnMTA4MHBfMScsXHJcbiAgICB2YWx1ZTogJzEwODBwXzEnXHJcbiAgfVxyXG5dO1xyXG5cclxuY29uc3QgcGFyc2VyID0gbmV3IFVBUGFyc2VyKCk7XHJcblxyXG5jb25zdCB1c2VyQWdlbnRJbmZvID0gcGFyc2VyLmdldFJlc3VsdCgpO1xyXG5cclxuZXhwb3J0IGNvbnN0IGlzU2FmYXJpID0gKCkgPT4ge1xyXG4gIHJldHVybiAoXHJcbiAgICB1c2VyQWdlbnRJbmZvLmJyb3dzZXIubmFtZSA9PT0gJ1NhZmFyaScgfHxcclxuICAgIHVzZXJBZ2VudEluZm8uYnJvd3Nlci5uYW1lID09PSAnTW9iaWxlIFNhZmFyaSdcclxuICApO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGlzQ29tcGF0aWJsZUNocm9tZSA9ICgpID0+IHtcclxuICBpZiAodXNlckFnZW50SW5mby5icm93c2VyLm5hbWUgPT09ICdDaHJvbWUnKSB7XHJcbiAgICBjb25zdCBtYWpvciA9ICt1c2VyQWdlbnRJbmZvLmJyb3dzZXIubWFqb3I7XHJcbiAgICBpZiAobWFqb3IgPj0gNzIpIHJldHVybiB0cnVlO1xyXG4gIH1cclxuICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaXNGaXJlZm94ID0gKCkgPT4ge1xyXG4gIHJldHVybiB1c2VyQWdlbnRJbmZvLmJyb3dzZXIubmFtZSA9PT0gJ0ZpcmVmb3gnO1xyXG59O1xyXG5cclxuZnVuY3Rpb24gVG9hc3RpZnkgKG9wdGlvbnMpIHtcclxuICBNLnRvYXN0KHtodG1sOiBvcHRpb25zLnRleHQsIGNsYXNzZXM6IG9wdGlvbnMuY2xhc3Nlc30pO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgVG9hc3QgPSB7XHJcbiAgaW5mbzogKG1zZykgPT4ge1xyXG4gICAgVG9hc3RpZnkoe1xyXG4gICAgICB0ZXh0OiBtc2csXHJcbiAgICAgIGNsYXNzZXM6IFwiaW5mby10b2FzdFwiXHJcbiAgICB9KVxyXG4gIH0sXHJcbiAgbm90aWNlOiAobXNnKSA9PiB7XHJcbiAgICBUb2FzdGlmeSh7XHJcbiAgICAgIHRleHQ6IG1zZyxcclxuICAgICAgY2xhc3NlczogXCJub3RpY2UtdG9hc3RcIlxyXG4gICAgfSlcclxuICB9LFxyXG4gIGVycm9yOiAobXNnKSA9PiB7XHJcbiAgICBUb2FzdGlmeSh7XHJcbiAgICAgIHRleHQ6IG1zZyxcclxuICAgICAgY2xhc3NlczogXCJlcnJvci10b2FzdFwiXHJcbiAgICB9KVxyXG4gIH1cclxufTtcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0b3IoZm9ybURhdGEsIGZpZWxkcykge1xyXG4gIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmb3JtRGF0YSk7XHJcbiAgZm9yIChsZXQga2V5IG9mIGtleXMpIHtcclxuICAgIGlmIChmaWVsZHMuaW5kZXhPZihrZXkpICE9IC0xKSB7XHJcbiAgICAgIGlmICghZm9ybURhdGFba2V5XSkge1xyXG4gICAgICAgIFRvYXN0LmVycm9yKFwiUGxlYXNlIEVudGVyIFwiICsga2V5KTtcclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9XHJcbiAgcmV0dXJuIHRydWU7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBzZXJpYWxpemVGb3JtRGF0YSgpIHtcclxuICBjb25zdCBmb3JtRGF0YSA9ICQoXCIjZm9ybVwiKS5zZXJpYWxpemVBcnJheSgpO1xyXG4gIGNvbnN0IG9iaiA9IHt9XHJcbiAgZm9yICh2YXIgaXRlbSBvZiBmb3JtRGF0YSkge1xyXG4gICAgdmFyIGtleSA9IGl0ZW0ubmFtZTtcclxuICAgIHZhciB2YWwgPSBpdGVtLnZhbHVlO1xyXG4gICAgb2JqW2tleV0gPSB2YWw7XHJcbiAgfVxyXG4gIGlmIChvYmoudWlkICE9IHVuZGVmaW5lZFxyXG4gICAgJiYgIU51bWJlci5pc05hTigrb2JqLnVpZCkpIHtcclxuICAgIG9iai51aWQgPSArb2JqLnVpZFxyXG4gIH1cclxuICByZXR1cm4gb2JqO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYWRkVmlldyAoaWQsIHNob3cpIHtcclxuICBpZiAoISQoXCIjXCIgKyBpZClbMF0pIHtcclxuICAgICQoXCI8ZGl2Lz5cIiwge1xyXG4gICAgICBpZDogXCJyZW1vdGVfdmlkZW9fcGFuZWxfXCIgKyBpZCxcclxuICAgICAgY2xhc3M6IFwidmlkZW8tdmlld1wiLFxyXG4gICAgfSkuYXBwZW5kVG8oXCIjdmlkZW9cIik7XHJcblxyXG4gICAgJChcIjxkaXYvPlwiLCB7XHJcbiAgICAgIGlkOiBcInJlbW90ZV92aWRlb19cIiArIGlkLFxyXG4gICAgICBjbGFzczogXCJ2aWRlby1wbGFjZWhvbGRlclwiLFxyXG4gICAgfSkuYXBwZW5kVG8oXCIjcmVtb3RlX3ZpZGVvX3BhbmVsX1wiICsgaWQpO1xyXG5cclxuICAgICQoXCI8ZGl2Lz5cIiwge1xyXG4gICAgICBpZDogXCJyZW1vdGVfdmlkZW9faW5mb19cIiArIGlkLFxyXG4gICAgICBjbGFzczogXCJ2aWRlby1wcm9maWxlIFwiICsgKHNob3cgPyBcIlwiIDogIFwiaGlkZVwiKSxcclxuICAgIH0pLmFwcGVuZFRvKFwiI3JlbW90ZV92aWRlb19wYW5lbF9cIiArIGlkKTtcclxuXHJcbiAgICAkKFwiPGRpdi8+XCIsIHtcclxuICAgICAgaWQ6IFwidmlkZW9fYXV0b3BsYXlfXCIrIGlkLFxyXG4gICAgICBjbGFzczogXCJhdXRvcGxheS1mYWxsYmFjayBoaWRlXCIsXHJcbiAgICB9KS5hcHBlbmRUbyhcIiNyZW1vdGVfdmlkZW9fcGFuZWxfXCIgKyBpZCk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gcmVtb3ZlVmlldyAoaWQpIHtcclxuICBpZiAoJChcIiNyZW1vdGVfdmlkZW9fcGFuZWxfXCIgKyBpZClbMF0pIHtcclxuICAgICQoXCIjcmVtb3RlX3ZpZGVvX3BhbmVsX1wiK2lkKS5yZW1vdmUoKTtcclxuICB9XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXREZXZpY2VzIChuZXh0KSB7XHJcbiAgQWdvcmFSVEMuZ2V0RGV2aWNlcyhmdW5jdGlvbiAoaXRlbXMpIHtcclxuICAgIGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4gWydhdWRpb2lucHV0JywgJ3ZpZGVvaW5wdXQnXS5pbmRleE9mKGl0ZW0ua2luZCkgIT09IC0xXHJcbiAgICB9KVxyXG4gICAgLm1hcChmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiBpdGVtLmxhYmVsLFxyXG4gICAgICB2YWx1ZTogaXRlbS5kZXZpY2VJZCxcclxuICAgICAga2luZDogaXRlbS5raW5kLFxyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICAgIHZhciB2aWRlb3MgPSBbXTtcclxuICAgIHZhciBhdWRpb3MgPSBbXTtcclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdmFyIGl0ZW0gPSBpdGVtc1tpXTtcclxuICAgICAgaWYgKCd2aWRlb2lucHV0JyA9PSBpdGVtLmtpbmQpIHtcclxuICAgICAgICB2YXIgbmFtZSA9IGl0ZW0ubGFiZWw7XHJcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbS5kZXZpY2VJZDtcclxuICAgICAgICBpZiAoIW5hbWUpIHtcclxuICAgICAgICAgIG5hbWUgPSBcImNhbWVyYS1cIiArIHZpZGVvcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZpZGVvcy5wdXNoKHtcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICBraW5kOiBpdGVtLmtpbmRcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgICBpZiAoJ2F1ZGlvaW5wdXQnID09IGl0ZW0ua2luZCkge1xyXG4gICAgICAgIHZhciBuYW1lID0gaXRlbS5sYWJlbDtcclxuICAgICAgICB2YXIgdmFsdWUgPSBpdGVtLmRldmljZUlkO1xyXG4gICAgICAgIGlmICghbmFtZSkge1xyXG4gICAgICAgICAgbmFtZSA9IFwibWljcm9waG9uZS1cIiArIGF1ZGlvcy5sZW5ndGg7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGF1ZGlvcy5wdXNoKHtcclxuICAgICAgICAgIG5hbWU6IG5hbWUsXHJcbiAgICAgICAgICB2YWx1ZTogdmFsdWUsXHJcbiAgICAgICAgICBraW5kOiBpdGVtLmtpbmRcclxuICAgICAgICB9KTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgbmV4dCh7dmlkZW9zOiB2aWRlb3MsIGF1ZGlvczogYXVkaW9zfSk7XHJcbiAgfSk7XHJcbn0iLCIvKiEgQWdvcmFSVEN8QlVJTEQgdjMuMC4wLTAtZzc0N2YzMjEgKi9cbiFmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzJiZcIm9iamVjdFwiPT10eXBlb2YgbW9kdWxlP21vZHVsZS5leHBvcnRzPXQoKTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBkZWZpbmUmJmRlZmluZS5hbWQ/ZGVmaW5lKFwiQWdvcmFSVENcIixbXSx0KTpcIm9iamVjdFwiPT10eXBlb2YgZXhwb3J0cz9leHBvcnRzLkFnb3JhUlRDPXQoKTplLkFnb3JhUlRDPXQoKX0od2luZG93LGZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Z1bmN0aW9uIG4oaSl7aWYodFtpXSlyZXR1cm4gdFtpXS5leHBvcnRzO3ZhciBhPXRbaV09e2k6aSxsOiExLGV4cG9ydHM6e319O3JldHVybiBlW2ldLmNhbGwoYS5leHBvcnRzLGEsYS5leHBvcnRzLG4pLGEubD0hMCxhLmV4cG9ydHN9cmV0dXJuIG4ubT1lLG4uYz10LG4uZD1mdW5jdGlvbihlLHQsaSl7bi5vKGUsdCl8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse2VudW1lcmFibGU6ITAsZ2V0Oml9KX0sbi5yPWZ1bmN0aW9uKGUpe1widW5kZWZpbmVkXCIhPXR5cGVvZiBTeW1ib2wmJlN5bWJvbC50b1N0cmluZ1RhZyYmT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsU3ltYm9sLnRvU3RyaW5nVGFnLHt2YWx1ZTpcIk1vZHVsZVwifSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSl9LG4udD1mdW5jdGlvbihlLHQpe2lmKDEmdCYmKGU9bihlKSksOCZ0KXJldHVybiBlO2lmKDQmdCYmXCJvYmplY3RcIj09dHlwZW9mIGUmJmUmJmUuX19lc01vZHVsZSlyZXR1cm4gZTt2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpO2lmKG4ucihpKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoaSxcImRlZmF1bHRcIix7ZW51bWVyYWJsZTohMCx2YWx1ZTplfSksMiZ0JiZcInN0cmluZ1wiIT10eXBlb2YgZSlmb3IodmFyIGEgaW4gZSluLmQoaSxhLGZ1bmN0aW9uKHQpe3JldHVybiBlW3RdfS5iaW5kKG51bGwsYSkpO3JldHVybiBpfSxuLm49ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS5fX2VzTW9kdWxlP2Z1bmN0aW9uKCl7cmV0dXJuIGUuZGVmYXVsdH06ZnVuY3Rpb24oKXtyZXR1cm4gZX07cmV0dXJuIG4uZCh0LFwiYVwiLHQpLHR9LG4ubz1mdW5jdGlvbihlLHQpe3JldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoZSx0KX0sbi5wPVwiXCIsbihuLnM9MzQpfShbZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KTt2YXIgaT1uKDgpLGE9bi5uKGkpLHI9big5KSxvPW4oMykscz1uKDIpLGM9MCxkPVwiZnJlZVwiLHU9W10sbD1bXSxwPTA7c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtPYmplY3Qoby5nZXRQYXJhbWV0ZXIpKFwiVVBMT0FEX0xPR1wiKSYmZi5pbmZvKFwiY29uc29sZSBsb2cgdXBsb2FkXCIpfSw5ZTUpO3ZhciBmPWZ1bmN0aW9uKCl7dmFyIGUsdCxuLGksZixtLGc9XCJodHRwczovL1wiLmNvbmNhdChPYmplY3Qoby5nZXRQYXJhbWV0ZXIpKFwiTE9HX1VQTE9BRF9TRVJWRVJcIiksXCIvdXBsb2FkL3YxXCIpLHY9W1wiREVCVUdcIixcIklORk9cIixcIldBUk5JTkdcIixcIkVSUk9SXCIsXCJOT05FXCJdLGg9MCxTPWZ1bmN0aW9uIGUodCl7ZD1cInVwbG9hZGluZ1wiLHNldFRpbWVvdXQoZnVuY3Rpb24oKXshZnVuY3Rpb24oZSx0LG4pe3ZhciBpO0FycmF5LmlzQXJyYXkoZSl8fChlPVtlXSksZT1lLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bG9nX2l0ZW1faWQ6YysrLGxvZ19sZXZlbDplLmxvZ19sZXZlbCxwYXlsb2FkX3N0cjplLnBheWxvYWR9fSksaT17c2RrX3ZlcnNpb246by5WRVJTSU9OLHByb2Nlc3NfaWQ6T2JqZWN0KHMuYSkoKSxwYXlsb2FkOkpTT04uc3RyaW5naWZ5KGUpfTt0cnl7T2JqZWN0KHIucG9zdCkoZyxpLGZ1bmN0aW9uKGUpe1wiT0tcIj09PWU/dCYmdChlKTpuJiZuKGUpfSxmdW5jdGlvbihlKXtuJiZuKGUpfSx7d2l0aENyZWRlbnRpYWxzOiEwfSl9Y2F0Y2goZSl7biYmbihlKX19KHQsZnVuY3Rpb24oKXtwPTAsMCE9PXUubGVuZ3RoPyhsPXUubGVuZ3RoPDEwP3Uuc3BsaWNlKDAsdS5sZW5ndGgpOnUuc3BsaWNlKDAsMTApLGUobCkpOmQ9XCJmcmVlXCJ9LGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe2UobCl9LHArKzwyPzIwMDoxZTQpfSl9LDNlMyl9O3Q9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9WzBdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXQucHVzaChhcmd1bWVudHNbbl0pO2UuYXBwbHkodGhpcyx0KX0sbj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bMV0sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKGFyZ3VtZW50c1tuXSk7ZS5hcHBseSh0aGlzLHQpfSxpPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVsyXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0LnB1c2goYXJndW1lbnRzW25dKTtlLmFwcGx5KHRoaXMsdCl9LGY9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9WzNdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXQucHVzaChhcmd1bWVudHNbbl0pO2UuYXBwbHkodGhpcyx0KX07dmFyIF89e307cmV0dXJuIG09ZnVuY3Rpb24oZSl7X1tlXXx8KGkuYXBwbHkodm9pZCAwLGFyZ3VtZW50cyksX1tlXT0hMCl9LHtERUJVRzowLElORk86MSxXQVJOSU5HOjIsRVJST1I6MyxOT05FOjQsZW5hYmxlTG9nVXBsb2FkOmZ1bmN0aW9uKCl7T2JqZWN0KG8uc2V0UGFyYW1ldGVyKShcIlVQTE9BRF9MT0dcIiwhMCl9LGRpc2FibGVMb2dVcGxvYWQ6ZnVuY3Rpb24oKXtPYmplY3Qoby5zZXRQYXJhbWV0ZXIpKFwiVVBMT0FEX0xPR1wiLCExKX0sc2V0UHJveHlTZXJ2ZXI6ZnVuY3Rpb24oZSl7Zz1lP1wiaHR0cHM6Ly9cIi5jb25jYXQoZSxcIi9scy8/aD1cIikuY29uY2F0KE9iamVjdChvLmdldFBhcmFtZXRlcikoXCJMT0dfVVBMT0FEX1NFUlZFUlwiKSxcIiZwPTQ0MyZkPXVwbG9hZC92MVwiKTpcImh0dHBzOi8vXCIuY29uY2F0KE9iamVjdChvLmdldFBhcmFtZXRlcikoXCJMT0dfVVBMT0FEX1NFUlZFUlwiKSxcIi91cGxvYWQvdjFcIil9LHNldExvZ0xldmVsOmZ1bmN0aW9uKGUpe2U+ND9lPTQ6ZTwwJiYoZT0wKSxoPWV9LGxvZzplPWZ1bmN0aW9uKCl7dmFyIGUsdD1hcmd1bWVudHNbMF0sbj1hcmd1bWVudHM7aWYoblswXT0oZT1uZXcgRGF0ZSkudG9UaW1lU3RyaW5nKCkuc3BsaXQoXCIgXCIpWzBdK1wiOlwiK2UuZ2V0TWlsbGlzZWNvbmRzKCkrXCIgQWdvcmEtU0RLIFtcIisodlt0XXx8XCJERUZBVUxUXCIpK1wiXTpcIixmdW5jdGlvbihlLHQpe2lmKE9iamVjdChvLmdldFBhcmFtZXRlcikoXCJVUExPQURfTE9HXCIpKXRyeXt0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKHQpO3ZhciBuPVwiXCI7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wib2JqZWN0XCI9PT1hKCkoZSkmJihlPUpTT04uc3RyaW5naWZ5KGUpKSxuPW4rZStcIiBcIn0pLHUucHVzaCh7cGF5bG9hZDpuLGxvZ19sZXZlbDplfSksXCJmcmVlXCI9PT1kJiYobD11Lmxlbmd0aDwxMD91LnNwbGljZSgwLHUubGVuZ3RoKTp1LnNwbGljZSgwLDEwKSxTKGwpKX1jYXRjaChlKXt9fSh0LG4pLCEodDxoKSlzd2l0Y2godCl7Y2FzZSAwOmNhc2UgMTpjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLG4pO2JyZWFrO2Nhc2UgMjpjb25zb2xlLndhcm4uYXBwbHkoY29uc29sZSxuKTticmVhaztjYXNlIDM6Y29uc29sZS5lcnJvci5hcHBseShjb25zb2xlLG4pO2JyZWFrO2RlZmF1bHQ6cmV0dXJuIHZvaWQgY29uc29sZS5sb2cuYXBwbHkoY29uc29sZSxuKX19LGRlYnVnOnQsaW5mbzpuLHdhcm5pbmc6aSxkZXByZWNhdGU6bSxlcnJvcjpmfX0oKTt0LmRlZmF1bHQ9Zn0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KSxuLmQodCxcImNoZWNrVmFsaWRPYmplY3RcIixmdW5jdGlvbigpe3JldHVybiBvfSksbi5kKHQsXCJjaGVja1ZhbGlkU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gc30pLG4uZCh0LFwiY2hlY2tWYWxpZE51bWJlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGN9KSxuLmQodCxcImNoZWNrVmFsaWRGbG9hdE51bWJlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSxuLmQodCxcImNoZWNrVmFsaWRCb29sZWFuXCIsZnVuY3Rpb24oKXtyZXR1cm4gdX0pLG4uZCh0LFwiY2hlY2tWYWxpZEVudW1cIixmdW5jdGlvbigpe3JldHVybiByfSksbi5kKHQsXCJpc1ZhbGlkU3RyaW5nXCIsZnVuY3Rpb24oKXtyZXR1cm4gbH0pLG4uZCh0LFwiaXNWYWxpZE51bWJlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHB9KSxuLmQodCxcImlzVmFsaWRCb29sZWFuXCIsZnVuY3Rpb24oKXtyZXR1cm4gbX0pLG4uZCh0LFwiaXNBU0NJSVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGh9KSxuLmQodCxcImlzSW50ZWdlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSxuLmQodCxcImlzTnVtYmVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gX30pLG4uZCh0LFwiaXNTdHJpbmdcIixmdW5jdGlvbigpe3JldHVybiBFfSksbi5kKHQsXCJpc0FycmF5XCIsZnVuY3Rpb24oKXtyZXR1cm4gSX0pLG4uZCh0LFwiaXNFbXB0eVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHl9KSxuLmQodCxcImlzVmFsaWRUb2tlblwiLGZ1bmN0aW9uKCl7cmV0dXJuIGd9KSxuLmQodCxcImlzVmFsaWRDaGFubmVsTmFtZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHZ9KTt2YXIgaT1uKDgpLGE9bi5uKGkpLHI9ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaT0wO2k8bi5sZW5ndGg7aSsrKWlmKGU9PT1uW2ldKXJldHVybiEwO3Rocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdCh0LFwiIGNhbiBvbmx5IGJlIHNldCBhcyBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG4pKSl9LG89ZnVuY3Rpb24oZSx0KXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHBhcmFtOiBcIi5jb25jYXQodHx8XCJwYXJhbVwiLFwiIGNhbm5vdCBiZSBlbXB0eVwiKSk7aWYoXCJvYmplY3RcIiE9PWEoKShlKSl0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQodHx8XCJUaGlzIHBhcmFtdGVyXCIsXCIgaXMgb2YgdGhlIG9iamVjdCB0eXBlXCIpKTtyZXR1cm4hMH0scz1mdW5jdGlvbihlLHQsbixpLGEpe2lmKHkobikmJihuPTEpLGk9aXx8MjU1LHkoYSkmJihhPSEwKSx5KGUpKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdCh0fHxcInBhcmFtXCIsXCIgY2Fubm90IGJlIGVtcHR5XCIpKTtpZighbChlLG4saSxhKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFwiLmNvbmNhdCh0fHxcInN0cmluZyBwYXJhbVwiLFwiOiBMZW5ndGggb2YgdGhlIHN0cmluZzogW1wiKS5jb25jYXQobixcIixcIikuY29uY2F0KGksXCJdLlwiKS5jb25jYXQoYT9cIiBBU0NJSSBjaGFyYWN0ZXJzIG9ubHkuXCI6XCJcIikpfSxjPWZ1bmN0aW9uKGUsdCxuLGkpe2lmKHkobikmJihuPTEpLGk9aXx8MWU0LHkoZSkpdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHR8fFwicGFyYW1cIixcIiBjYW5ub3QgYmUgZW1wdHlcIikpO2lmKCFwKGUsbixpKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIFwiLmNvbmNhdCh0fHxcIm51bWJlciBwYXJhbVwiLFwiOiBUaGUgdmFsdWUgcmFuZ2UgaXMgW1wiKS5jb25jYXQobixcIixcIikuY29uY2F0KGksXCJdLiBpbnRlZ2VyIG9ubHlcIikpfSxkPWZ1bmN0aW9uKGUsdCxuLGkpe2lmKG51bGw9PWUpdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHR8fFwicGFyYW1cIixcIiBjYW5ub3QgYmUgbnVsbFwiKSk7aWYoeShuKSYmKG49MCksaT1pfHwxZTQseShlKSl0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQodHx8XCJwYXJhbVwiLFwiIGNhbm5vdCBiZSBlbXB0eVwiKSk7aWYoIWYoZSxuLGkpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgXCIuY29uY2F0KHR8fFwibnVtYmVyIHBhcmFtXCIsXCI6IFRoZSB2YWx1ZSByYW5nZSBpcyBbXCIpLmNvbmNhdChuLFwiLFwiKS5jb25jYXQoaSxcIl0uXCIpKX0sdT1mdW5jdGlvbihlLHQpe2lmKHkoZSkpdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHR8fFwicGFyYW1cIixcIiBjYW5ub3QgYmUgZW1wdHlcIikpO2lmKCFtKGUpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgXCIuY29uY2F0KHR8fFwiYm9vbGVhbiBwYXJhbVwiLFwiOiBUaGUgdmFsdWUgaXMgb2YgdGhlIGJvb2xlYW4gdHlwZS5cIikpfSxsPWZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiB0fHwodD0wKSxufHwobj1OdW1iZXIuTUFYX1NBRkVfSU5URUdFUikseShpKSYmKGk9ITApLEUoZSkmJighaXx8aChlKSkmJmUubGVuZ3RoPj10JiZlLmxlbmd0aDw9bn0scD1mdW5jdGlvbihlLHQsbil7cmV0dXJuIFMoZSkmJmU+PXQmJmU8PW59LGY9ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBfKGUpJiZlPj10JiZlPD1ufSxtPWZ1bmN0aW9uKGUpe3JldHVyblwiYm9vbGVhblwiPT10eXBlb2YgZX0sZz1mdW5jdGlvbihlKXtyZXR1cm4gbChlLDEsMjA0Nyl9LHY9ZnVuY3Rpb24oZSl7cmV0dXJuIEUoZSkmJi9eW2EtekEtWjAtOSBcXCFcXCNcXCRcXCVcXCZcXChcXClcXCtcXC1cXDpcXDtcXDxcXD1cXC5cXD5cXD9cXEBcXFtcXF1cXF5cXF9cXHtcXH1cXHxcXH5cXCxdezEsNjR9JC8udGVzdChlKX0saD1mdW5jdGlvbihlKXtpZihcInN0cmluZ1wiPT10eXBlb2YgZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciBuPWUuY2hhckNvZGVBdCh0KTtpZihuPDB8fG4+MjU1KXJldHVybiExfXJldHVybiEwfX0sUz1mdW5jdGlvbihlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmZSUxPT0wfSxfPWZ1bmN0aW9uKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlfSxFPWZ1bmN0aW9uKGUpe3JldHVyblwic3RyaW5nXCI9PXR5cGVvZiBlfSxJPWZ1bmN0aW9uKGUpe3JldHVybiBlIGluc3RhbmNlb2YgQXJyYXl9LHk9ZnVuY3Rpb24oZSl7cmV0dXJuIG51bGw9PWV9fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9bigxMyksYT1uLm4oaSkscj1uKDUpLG89bi5uKHIpLHM9bigzKSxjPW4oMCksZD1uKDkpLHU9bigxNSksbD1uLm4odSk7bi5kKHQsXCJiXCIsZnVuY3Rpb24oKXtyZXR1cm4gZ30pLG4uZCh0LFwiYVwiLGZ1bmN0aW9uKCl7cmV0dXJuIG19KTt2YXIgcD17ZXZlbnRUeXBlOm51bGwsc2lkOm51bGwsbHRzOm51bGwsc3VjY2VzczpudWxsLGNuYW1lOm51bGwsdWlkOm51bGwscGVlcjpudWxsLGNpZDpudWxsLGVsYXBzZTpudWxsLGV4dGVuZDpudWxsLHZpZDowfSxmPW51bGwsbT1mdW5jdGlvbigpe3JldHVybiBmfHwoZj1cInByb2Nlc3MtXCIrbCgpKCksYy5kZWZhdWx0LmluZm8oXCJwcm9jZXNzSWQ6IFwiK2YpKSxmfSxnPWZ1bmN0aW9uKCl7dmFyIGU9e2xpc3Q6e319O2UudXJsPU9iamVjdChkLnNob3VsZFVzZUh0dHBzKSgpP1wiaHR0cHM6Ly9cIi5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9ET01BSU5cIiksXCI6NjQ0My9ldmVudHMvbWVzc2FnZVwiKTpcImh0dHA6Ly9cIi5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9ET01BSU5cIiksXCI6NjA4MC9ldmVudHMvbWVzc2FnZVwiKSxlLnVybEJhY2t1cD1PYmplY3QoZC5zaG91bGRVc2VIdHRwcykoKT9cImh0dHBzOi8vXCIuY29uY2F0KE9iamVjdChzLmdldFBhcmFtZXRlcikoXCJFVkVOVF9SRVBPUlRfQkFDS1VQX0RPTUFJTlwiKSxcIjo2NDQzL2V2ZW50cy9tZXNzYWdlXCIpOlwiaHR0cDovL1wiLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0JBQ0tVUF9ET01BSU5cIiksXCI6NjA4MC9ldmVudHMvbWVzc2FnZVwiKSxlLnNldFByb3h5U2VydmVyPWZ1bmN0aW9uKHQpe3Q/KGUudXJsPU9iamVjdChkLnNob3VsZFVzZUh0dHBzKSgpP1wiaHR0cHM6Ly9cIi5jb25jYXQodCxcIi9ycy8/aD1cIikuY29uY2F0KE9iamVjdChzLmdldFBhcmFtZXRlcikoXCJFVkVOVF9SRVBPUlRfRE9NQUlOXCIpLFwiJnA9NjQ0MyZkPWV2ZW50cy9tZXNzYWdlXCIpOlwiaHR0cDovL1wiLmNvbmNhdCh0LFwiL3JzLz9oPVwiKS5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9ET01BSU5cIiksXCImcD02MDgwJmQ9ZXZlbnRzL21lc3NhZ2VcIiksZS51cmxCYWNrdXA9T2JqZWN0KGQuc2hvdWxkVXNlSHR0cHMpKCk/XCJodHRwczovL1wiLmNvbmNhdCh0LFwiL3JzLz9oPVwiKS5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9CQUNLVVBfRE9NQUlOXCIpLFwiJnA9NjQ0MyZkPWV2ZW50cy9tZXNzYWdlXCIpOlwiaHR0cDovL1wiLmNvbmNhdCh0LFwiL3JzLz9oPVwiKS5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9CQUNLVVBfRE9NQUlOXCIpLFwiJnA9NjA4MCZkPWV2ZW50cy9tZXNzYWdlXCIpLGMuZGVmYXVsdC5kZWJ1ZyhcInJlcG9ydFByb3h5U2VydmVyVVJMOiBcIi5jb25jYXQoZS51cmwpKSxjLmRlZmF1bHQuZGVidWcoXCJyZXBvcnRQcm94eVNlcnZlckJhY2t1cFVSTDogXCIuY29uY2F0KGUudXJsQmFja3VwKSkpOihlLnVybD1PYmplY3QoZC5zaG91bGRVc2VIdHRwcykoKT9cImh0dHBzOi8vXCIuY29uY2F0KE9iamVjdChzLmdldFBhcmFtZXRlcikoXCJFVkVOVF9SRVBPUlRfRE9NQUlOXCIpLFwiOjY0NDMvZXZlbnRzL21lc3NhZ2VcIik6XCJodHRwOi8vXCIuY29uY2F0KE9iamVjdChzLmdldFBhcmFtZXRlcikoXCJFVkVOVF9SRVBPUlRfRE9NQUlOXCIpLFwiOjYwODAvZXZlbnRzL21lc3NhZ2VcIiksZS51cmxCYWNrdXA9T2JqZWN0KGQuc2hvdWxkVXNlSHR0cHMpKCk/XCJodHRwczovL1wiLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0JBQ0tVUF9ET01BSU5cIiksXCI6NjQ0My9ldmVudHMvbWVzc2FnZVwiKTpcImh0dHA6Ly9cIi5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9CQUNLVVBfRE9NQUlOXCIpLFwiOjYwODAvZXZlbnRzL21lc3NhZ2VcIikpfSxlLnNlc3Npb25Jbml0PWZ1bmN0aW9uKHQsbil7dmFyIGk9bygpKHt9LHApO2kuc3RhcnRUaW1lPStuZXcgRGF0ZSxpLnNpZD10LGkuY25hbWU9bi5jbmFtZSxlLmxpc3RbdF09aTt2YXIgYT1vKCkoe30se3dpbGxVcGxvYWRDb25zb2xlTG9nOk9iamVjdChzLmdldFBhcmFtZXRlcikoXCJVUExPQURfTE9HXCIpfSxuLmV4dGVuZCkscj1vKCkoe30saSk7ci5ldmVudFR5cGU9XCJzZXNzaW9uX2luaXRcIixyLmFwcGlkPW4uYXBwaWQsci5icm93c2VyPW5hdmlnYXRvci51c2VyQWdlbnQsci5idWlsZD1zLkJVSUxELHIubHRzPStuZXcgRGF0ZSxyLmVsYXBzZT1yLmx0cy1yLnN0YXJ0VGltZSxyLmV4dGVuZD1KU09OLnN0cmluZ2lmeShhKSxyLm1vZGU9bi5tb2RlLHIucHJvY2Vzcz1tKCksci5zdWNjZXNzPW4uc3VjYyxyLnZlcnNpb249cy5WRVJTSU9OLGRlbGV0ZSByLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlNlc3Npb25cIixkYXRhOnJ9KSxlLl9mbHVzaEludm9rZVJlcG9ydCh0KX0sZS5qb2luQ2hvb3NlU2VydmVyPWZ1bmN0aW9uKHQsbixpKXtpZihlLmxpc3RbdF0pe24udWlkJiYoZS5saXN0W3RdLnVpZD1wYXJzZUludChuLnVpZCkpLG4uY2lkJiYoZS5saXN0W3RdLmNpZD1wYXJzZUludChuLmNpZCkpO3ZhciBhPW8oKSh7fSxlLmxpc3RbdF0pO2EuZXZlbnRUeXBlPVwiam9pbl9jaG9vc2Vfc2VydmVyXCI7dmFyIHI9bi5sdHM7YS5sdHM9RGF0ZS5ub3coKSxhLmV2ZW50RWxhcHNlPWEubHRzLXIsYS5jaG9vc2VTZXJ2ZXJBZGRyPW4uY3NBZGRyLGEuZXJyb3JDb2RlPW4uZWMsYS5lbGFwc2U9YS5sdHMtYS5zdGFydFRpbWUsYS5zdWNjZXNzPW4uc3VjYyxhLmNob29zZVNlcnZlckFkZHJMaXN0PUpTT04uc3RyaW5naWZ5KG4uc2VydmVyTGlzdCksZGVsZXRlIGEuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuSm9pbkNob29zZVNlcnZlclwiLGRhdGE6YX0pfX0sZS5yZXFVc2VyQWNjb3VudD1mdW5jdGlvbih0LG4pe24udmlkJiYoZS5saXN0W3RdLnZpZD1uLnZpZCk7dmFyIGk9bygpKHt9LGUubGlzdFt0XSksYT1uLmx0cztpLmV2ZW50VHlwZT1cInJlcV91c2VyX2FjY291bnRcIixpLmx0cz1EYXRlLm5vdygpLGkuc3VjY2Vzcz1uLnN1Y2Nlc3MsaS5zZXJ2ZXJBZGRyZXNzPW4uc2VydmVyQWRkcmVzcyxpLnN0cmluZ1VpZD1uLnN0cmluZ1VpZCxpLnVpZD1uLnVpZCxpLmVycm9yQ29kZT1uLmVycm9yQ29kZSxpLmVsYXBzZT1pLmx0cy1pLnN0YXJ0VGltZSxpLmV2ZW50RWxhcHNlPWkubHRzLWEsaS5leHRlbmQ9XCJzdHJpbmdcIj09dHlwZW9mIG4uZXh0ZW5kP24uZXh0ZW5kOkpTT04uc3RyaW5naWZ5KG4uZXh0ZW5kKSxkZWxldGUgaS5zdGFydFRpbWUsZS5zZW5kKHt0eXBlOlwiaW8uYWdvcmEucGIuV3J0Yy5SZXFVc2VyQWNjb3VudFwiLGRhdGE6aX0pfSxlLmpvaW5HYXRld2F5PWZ1bmN0aW9uKHQsbil7bi52aWQmJihlLmxpc3RbdF0udmlkPW4udmlkKTt2YXIgaT1vKCkoe30sZS5saXN0W3RdKSxhPW4ubHRzO2kuZXZlbnRUeXBlPVwiam9pbl9nYXRld2F5XCIsaS5sdHM9RGF0ZS5ub3coKSxpLmdhdGV3YXlBZGRyPW4uYWRkcixpLnN1Y2Nlc3M9bi5zdWNjLGkuZXJyb3JDb2RlPW4uZWMsaS5lbGFwc2U9aS5sdHMtaS5zdGFydFRpbWUsaS5ldmVudEVsYXBzZT1pLmx0cy1hLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLkpvaW5HYXRld2F5XCIsZGF0YTppfSl9LGUucHVibGlzaD1mdW5jdGlvbih0LG4pe3ZhciBpPW8oKSh7fSxlLmxpc3RbdF0pO2kuZXZlbnRUeXBlPVwicHVibGlzaFwiO3ZhciBhPW4ubHRzO2kubHRzPURhdGUubm93KCksaS5ldmVudEVsYXBzZT1pLmx0cy1hLGkuZWxhcHNlPWkubHRzLWkuc3RhcnRUaW1lLGkuc3VjY2Vzcz1uLnN1Y2MsaS5lcnJvckNvZGU9bi5lYyxuLnZpZGVvTmFtZSYmKGkudmlkZW9OYW1lPW4udmlkZW9OYW1lKSxuLmF1ZGlvTmFtZSYmKGkuYXVkaW9OYW1lPW4uYXVkaW9OYW1lKSxuLnNjcmVlbk5hbWUmJihpLnNjcmVlbk5hbWU9bi5zY3JlZW5OYW1lKSxkZWxldGUgaS5zdGFydFRpbWUsZS5zZW5kKHt0eXBlOlwiaW8uYWdvcmEucGIuV3J0Yy5QdWJsaXNoXCIsZGF0YTppfSksZS5fZmx1c2hJbnZva2VSZXBvcnQodCl9LGUuc3Vic2NyaWJlPWZ1bmN0aW9uKHQsbil7dmFyIGk9bygpKHt9LGUubGlzdFt0XSk7aS5ldmVudFR5cGU9XCJzdWJzY3JpYmVcIjt2YXIgYT1uLmx0cztpLmx0cz1EYXRlLm5vdygpLGkuZXZlbnRFbGFwc2U9aS5sdHMtYSxpLmVsYXBzZT1pLmx0cy1pLnN0YXJ0VGltZSxpLmVycm9yQ29kZT1uLmVjLGkuc3VjY2Vzcz1uLnN1Y2MsaXNGaW5pdGUobi5wZWVyaWQpP2kucGVlcj1uLnBlZXJpZDppLnBlZXJTdWlkPVwiXCIrbi5wZWVyaWQsXCJib29sZWFuXCI9PXR5cGVvZiBuLnZpZGVvJiYoaS52aWRlbz1uLnZpZGVvKSxcImJvb2xlYW5cIj09dHlwZW9mIG4uYXVkaW8mJihpLmF1ZGlvPW4uYXVkaW8pLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlN1YnNjcmliZVwiLGRhdGE6aX0pLGUuX2ZsdXNoSW52b2tlUmVwb3J0KHQpfSxlLmZpcnN0UmVtb3RlRnJhbWU9ZnVuY3Rpb24odCxuKXt2YXIgaT1vKCkoe30sZS5saXN0W3RdKTtpLmV2ZW50VHlwZT1cImZpcnN0X3JlbW90ZV9mcmFtZVwiO3ZhciBhPW4ubHRzO2kubHRzPURhdGUubm93KCksaS5ldmVudEVsYXBzZT1pLmx0cy1hLGkuZWxhcHNlPWkubHRzLWkuc3RhcnRUaW1lLGkud2lkdGg9bi53aWR0aCxpLmhlaWdodD1uLmhlaWdodCxpLnN1Y2Nlc3M9bi5zdWNjLGkuZXJyb3JDb2RlPW4uZWMsaXNGaW5pdGUobi5wZWVyaWQpP2kucGVlcj1uLnBlZXJpZDppLnBlZXJTdWlkPVwiXCIrbi5wZWVyaWQsZGVsZXRlIGkuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuRmlyc3RGcmFtZVwiLGRhdGE6aX0pfSxlLnN0cmVhbVN3aXRjaD1mdW5jdGlvbih0LG4pe3ZhciBpPW8oKSh7fSxlLmxpc3RbdF0pO2kuZXZlbnRUeXBlPVwic3RyZWFtX3N3aXRjaFwiLGkubHRzPURhdGUubm93KCksaS5pc0R1YWw9bi5pc2R1YWwsaS5lbGFwc2U9aS5sdHMtaS5zdGFydFRpbWUsaS5zdWNjZXNzPWkuc3VjYyxkZWxldGUgaS5zdGFydFRpbWUsZS5zZW5kKHt0eXBlOlwiaW8uYWdvcmEucGIuV3J0Yy5TdHJlYW1Td2l0Y2hcIixkYXRhOml9KX0sZS5hdWRpb1NlbmRpbmdTdG9wcGVkPWZ1bmN0aW9uKHQsbil7dmFyIGk9bygpKHt9LGUubGlzdFt0XSk7aS5ldmVudFR5cGU9XCJhdWRpb19zZW5kaW5nX3N0b3BwZWRcIixpLmx0cz1EYXRlLm5vdygpLGkuZWxhcHNlPWkubHRzLWkuc3RhcnRUaW1lLGkucmVhc29uPW4ucmVhc29uLGkuc3VjY2Vzcz1uLnN1Y2MsZGVsZXRlIGkuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuQXVkaW9TZW5kaW5nU3RvcHBlZFwiLGRhdGE6aX0pfSxlLnZpZGVvU2VuZGluZ1N0b3BwZWQ9ZnVuY3Rpb24odCxuKXt2YXIgaT1vKCkoe30sZS5saXN0W3RdKTtpLmV2ZW50VHlwZT1cInZpZGVvX3NlbmRpbmdfc3RvcHBlZFwiLGkubHRzPURhdGUubm93KCksaS5lbGFwc2U9aS5sdHMtaS5zdGFydFRpbWUsaS5yZXNvbj1uLnJlYXNvbixpLnN1Y2Nlc3M9bi5zdWNjLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlZpZGVvU2VuZGluZ1N0b3BwZWRcIixkYXRhOml9KX0sZS5yZXF1ZXN0UHJveHlBcHBDZW50ZXI9ZnVuY3Rpb24odCxuKXt2YXIgaT1vKCkoe30sZS5saXN0W3RdKSxhPW4ubHRzO2kuZXZlbnRUeXBlPVwicmVxdWVzdF9wcm94eV9hcHBjZW50ZXJcIixpLmx0cz1EYXRlLm5vdygpLGkuZXZlbnRFbGFwc2U9aS5sdHMtYSxpLmVsYXBzZT1pLmx0cy1pLnN0YXJ0VGltZSxpLmV4dGVuZD1uLmV4dGVuZCtcIlwiLGkuQVBBZGRyPW4uQVBBZGRyLGkud29ya2VyTWFuYWdlckxpc3Q9bi53b3JrZXJNYW5hZ2VyTGlzdCxpLnJlc3BvbnNlPW4ucmVzcG9uc2UsaS5lcnJvckNvZGU9bi5lYyxpLnN1Y2Nlc3M9bi5zdWNjLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlJlcXVlc3RQcm94eUFwcENlbnRlclwiLGRhdGE6aX0pfSxlLnJlcXVlc3RQcm94eVdvcmtlck1hbmFnZXI9ZnVuY3Rpb24odCxuKXt2YXIgaT1vKCkoe30sZS5saXN0W3RdKSxhPW4ubHRzO2kuZXZlbnRUeXBlPVwicmVxdWVzdF9wcm94eV93b3JrZXJfbWFuYWdlclwiLGkubHRzPURhdGUubm93KCksaS5ldmVudEVsYXBzZT1pLmx0cy1hLGkuZWxhcHNlPWkubHRzLWkuc3RhcnRUaW1lLGkuZXh0ZW5kPW4uZXh0ZW5kLGkud29ya2VyTWFuYWdlckFkZHI9bi53b3JrZXJNYW5hZ2VyQWRkcixpLnJlc3BvbnNlPW4ucmVzcG9uc2UsaS5lcnJvckNvZGU9bi5lYyxpLnN1Y2Nlc3M9bi5zdWNjLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlJlcXVlc3RQcm94eVdvcmtlck1hbmFnZXJcIixkYXRhOml9KX07dmFyIHQ9MDtyZXR1cm4gZS5yZXBvcnRBcGlJbnZva2U9ZnVuY3Rpb24oZSxuKXt2YXIgaT1uLnRhZyxyPW4ubmFtZSxvPW4uZ2V0U3RhdGVzLGQ9bi5vcHRpb25zLHU9bi50aW1lb3V0LGw9dm9pZCAwPT09dT82ZTQ6dSxwPW4uY2FsbGJhY2ssZj1uLnJlcG9ydFJlc3VsdCxtPXZvaWQgMD09PWZ8fGYsdj1EYXRlLm5vdygpLGg9MCxTPXQrKyxfPWZ1bmN0aW9uKCl7cmV0dXJuIGEoKSh7dGFnOmksaW52b2tlSWQ6UyxzaWQ6ZSxuYW1lOnIsYXBpSW52b2tlVGltZTp2LG9wdGlvbnM6ZH0sbyYme3N0YXRlczoodD1vKCksT2JqZWN0LmtleXModCkucmVkdWNlKGZ1bmN0aW9uKGUsbil7dmFyIGk9ZTtyZXR1cm4gbnVsbCE9dFtuXSYmKGlbbl09dFtuXSksaX0se30pKX0pO3ZhciB0fSxFPSEhT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIlNIT1dfUkVQT1JUX0lOVk9LRVJfTE9HXCIpO0UmJmMuZGVmYXVsdC5pbmZvKFwiXCIuY29uY2F0KHIsXCIgc3RhcnRcIikpO3ZhciBJPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtnLl9zZW5kQXBpSW52b2tlKGEoKSh7fSxfKCkse2Vycm9yOlwiQVBJX0lOVk9LRV9USU1FT1VUXCIsc3VjY2VzczohMX0pKX0sbCk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7aWYoY2xlYXJUaW1lb3V0KEkpLCsraD4xJiYoZT1cIkVYRUNVVE9SX0lOVk9LRV9cIi5jb25jYXQoaCkpLGUpcmV0dXJuIGcuX3NlbmRBcGlJbnZva2UoYSgpKHt9LF8oKSx7c3VjY2VzczohMSxlcnJvcjplfSxvJiZ7c3RhdGVzOm8oKX0pKSxFJiZjLmRlZmF1bHQuaW5mbyhcIlwiLmNvbmNhdChyLFwiIG9uRmFpbHVyZVwiKSxlKSxwJiZwKGUpO2cuX3NlbmRBcGlJbnZva2UoYSgpKHt9LF8oKSx7c3VjY2VzczohMH0sbSYme3Jlc3VsdDp0fSxvJiZ7c3RhdGVzOm8oKX0pKSxFJiZjLmRlZmF1bHQuaW5mbyhcIlwiLmNvbmNhdChyLFwiIG9uU3VjY2Vzc1wiKSkscCYmcChudWxsLHQpfX0sZS5fY2FjaGVkSXRlbXM9W10sZS5fY2FjaGVJbnZva2VSZXBvcnQ9ZnVuY3Rpb24odCl7dC5sdHN8fCh0Lmx0cz1EYXRlLm5vdygpKSxlLl9jYWNoZWRJdGVtcy5wdXNoKHQpLGUuX2NhY2hlZEl0ZW1zLmxlbmd0aD41MCYmZS5fY2FjaGVkSXRlbXMuc2hpZnQoKX0sZS5fZmx1c2hJbnZva2VSZXBvcnQ9ZnVuY3Rpb24odCl7aWYoZS5fY2FjaGVkSXRlbXMubGVuZ3RoKXt2YXIgbj1lLl9jYWNoZWRJdGVtcztlLl9jYWNoZWRJdGVtcz1bXSxjLmRlZmF1bHQuZGVidWcoXCJGbHVzaCBjYWNoZWQgZXZlbnQgcmVwb3J0aW5nOlwiLG4ubGVuZ3RoKSxuLmZvckVhY2goZnVuY3Rpb24obixpKXtuLnNpZD10LHNldFRpbWVvdXQoZnVuY3Rpb24oKXtlLl9zZW5kQXBpSW52b2tlKG4pfSw1ZTMrNTAwKmkpfSl9fSxlLl9zZW5kQXBpSW52b2tlPWZ1bmN0aW9uKHQpe3ZhciBuPXQudGFnLGk9dC5pbnZva2VJZCxyPXQuc2lkLG89dC5uYW1lLGM9dC5yZXN1bHQsZD10LnN0YXRlcyx1PXQub3B0aW9ucyxsPXQuZXJyb3IscD10LnN1Y2Nlc3MsZj10LmFwaUludm9rZVRpbWUsbT10Lmx0cyxnPU9iamVjdChzLmdldFBhcmFtZXRlcikoXCJOT1RfUkVQT1JUX0VWRU5UXCIpO2lmKCEobiYmZyBpbnN0YW5jZW9mIEFycmF5JiYtMSE9PWcuaW5kZXhPZihuKSkpaWYoZS5saXN0W3JdKXt2YXIgdj1lLmxpc3Rbcl0saD12LnN0YXJ0VGltZSxTPXYuY25hbWUsXz12LnVpZCxFPXYuY2lkLEk9KG09bXx8RGF0ZS5ub3coKSktaCx5PW0tZixUPVwiXCI7aWYodSl0cnl7VD1KU09OLnN0cmluZ2lmeSh1KX1jYXRjaChlKXtUPXUudG9TdHJpbmcoKX12YXIgYj1hKCkoe2ludm9rZUlkOmksc2lkOnIsY25hbWU6UyxjaWQ6RSxsdHM6bSx1aWQ6XyxzdWNjZXNzOnAsZWxhcHNlOkksYXBpTmFtZTpvLGV4ZWNFbGFwc2U6eX0sdm9pZCAwIT09dSYme29wdGlvbnM6VH0sdm9pZCAwIT09ZCYme2V4ZWNTdGF0ZXM6SlNPTi5zdHJpbmdpZnkoZCl9LHZvaWQgMCE9PWwmJntlcnJvckNvZGU6SlNPTi5zdHJpbmdpZnkobCl9LHZvaWQgMCE9PWMmJntleGVjUmVzdWx0OkpTT04uc3RyaW5naWZ5KGMpfSk7ZS5zZW5kKHt0eXBlOlwiaW8uYWdvcmEucGIuV3J0Yy5BcGlJbnZva2VcIixkYXRhOmJ9KX1lbHNlIGUuX2NhY2hlSW52b2tlUmVwb3J0KGFyZ3VtZW50c1swXSl9LGUuX3NlbmQ9ZnVuY3Rpb24odCl7dHJ5e3ZhciBuPVtdO3QmJnQuZGF0YSYmdC5kYXRhLmFwaU5hbWU/bi5wdXNoKFtcImFwaU5hbWVcIixcIlwiK3QuZGF0YS5hcGlOYW1lXSk6dCYmdC5kYXRhJiZ0LmRhdGEuZXZlbnRUeXBlJiZuLnB1c2goW1wiZXZlbnRUeXBlXCIsdC5kYXRhLmV2ZW50VHlwZV0pO3ZhciBpPW4ubWFwKGZ1bmN0aW9uKGUpe3JldHVyblwiXCIuY29uY2F0KGVbMF0sXCI9XCIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQoZVsxXSkpfSkuam9pbihcIiZcIiksYT0tMT09PWUudXJsLmluZGV4T2YoXCI/XCIpP1wiXCIuY29uY2F0KGUudXJsLFwiP1wiKS5jb25jYXQoaSk6ZS51cmw7T2JqZWN0KGQucG9zdCkoYSx0LG51bGwsZnVuY3Rpb24obil7dmFyIGE9LTE9PT1lLnVybEJhY2t1cC5pbmRleE9mKFwiP1wiKT9cIlwiLmNvbmNhdChlLnVybEJhY2t1cCxcIj9cIikuY29uY2F0KGkpOmUudXJsQmFja3VwO09iamVjdChkLnBvc3QpKGEsdCxudWxsLGZ1bmN0aW9uKGUpe30se3RpbWVvdXQ6MWU0fSl9LHt0aW1lb3V0OjFlNH0pfWNhdGNoKGUpe319LGUuc2VuZENhY2hlPVtdLGUuc2VuZFRpbWVyPW51bGwsZS5zZW5kPWZ1bmN0aW9uKHQpe2lmKGUuc2VuZENhY2hlLnB1c2godCksbnVsbD09PWUuc2VuZFRpbWVyKXtyZXR1cm4gZnVuY3Rpb24gdCgpe2Uuc2VuZFRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtpZigwIT09ZS5zZW5kQ2FjaGUubGVuZ3RoKXJldHVybiBlLl9zZW5kKGUuc2VuZENhY2hlLnNoaWZ0KCkpLHQoKTtlLnNlbmRUaW1lcj1udWxsfSxPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX1NFTkRfSU5URVJWQUxcIikpfSgpfX0sZX0oKX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3QuQlVJTEQ9XCJ2My4wLjAtMC1nNzQ3ZjMyMVwiO3QuVkVSU0lPTj1cIjMuMC4wXCI7dC5TVVBQT1JUX1JFU09MVVRJT05fTElTVD17XCI5MHBfMVwiOlsxNjAsOTAsbnVsbCxudWxsLG51bGwsbnVsbF0sXCIxMjBwXzFcIjpbMTYwLDEyMCwxNSwxNSwzMCw2NV0sXCIxMjBwXzNcIjpbMTIwLDEyMCwxNSwxNSwzMCw1MF0sXCIxMjBwXzRcIjpbMjEyLDEyMCxudWxsLG51bGwsbnVsbCxudWxsXSxcIjE4MHBfMVwiOlszMjAsMTgwLDE1LDE1LDMwLDE0MF0sXCIxODBwXzNcIjpbMTgwLDE4MCwxNSwxNSwzMCwxMDBdLFwiMTgwcF80XCI6WzI0MCwxODAsMTUsMTUsMzAsMTIwXSxcIjI0MHBfMVwiOlszMjAsMjQwLDE1LDE1LDQwLDIwMF0sXCIyNDBwXzNcIjpbMjQwLDI0MCwxNSwxNSw0MCwxNDBdLFwiMjQwcF80XCI6WzQyNCwyNDAsMTUsMTUsNDAsMjIwXSxcIjM2MHBfMVwiOls2NDAsMzYwLDE1LDE1LDgwLDQwMF0sXCIzNjBwXzNcIjpbMzYwLDM2MCwxNSwxNSw4MCwyNjBdLFwiMzYwcF80XCI6WzY0MCwzNjAsMzAsMzAsODAsNjAwXSxcIjM2MHBfNlwiOlszNjAsMzYwLDMwLDMwLDgwLDQwMF0sXCIzNjBwXzdcIjpbNDgwLDM2MCwxNSwxNSw4MCwzMjBdLFwiMzYwcF84XCI6WzQ4MCwzNjAsMzAsMzAsODAsNDkwXSxcIjM2MHBfOVwiOls2NDAsMzYwLDE1LDE1LDgwLDgwMF0sXCIzNjBwXzEwXCI6WzY0MCwzNjAsMjQsMjQsODAsODAwXSxcIjM2MHBfMTFcIjpbNjQwLDM2MCwyNCwyNCw4MCwxZTNdLFwiNDgwcF8xXCI6WzY0MCw0ODAsMTUsMTUsMjAsNTAwLDEsNV0sXCI0ODBwXzJcIjpbNjQwLDQ4MCwzMCwzMCwxMDAsMWUzLDI1LDMwXSxcIjQ4MHBfM1wiOls0ODAsNDgwLDE1LDE1LDEwMCw0MDBdLFwiNDgwcF80XCI6WzY0MCw0ODAsMzAsMzAsMTAwLDc1MF0sXCI0ODBwXzZcIjpbNDgwLDQ4MCwzMCwzMCwxMDAsNjAwXSxcIjQ4MHBfOFwiOls4NDgsNDgwLDE1LDE1LDEwMCw2MTBdLFwiNDgwcF85XCI6Wzg0OCw0ODAsMzAsMzAsMTAwLDkzMF0sXCI0ODBwXzEwXCI6WzY0MCw0ODAsMTAsMTAsMTAwLDQwMF0sXCI3MjBwXzFcIjpbMTI4MCw3MjAsMTUsMTUsMTIwLDExMzAsMSw1XSxcIjcyMHBfMlwiOlsxMjgwLDcyMCwzMCwzMCwxMjAsMmUzLDI1LDMwXSxcIjcyMHBfM1wiOlsxMjgwLDcyMCwzMCwzMCwxMjAsMTcxMF0sXCI3MjBwXzVcIjpbOTYwLDcyMCwxNSwxNSwxMjAsOTEwXSxcIjcyMHBfNlwiOls5NjAsNzIwLDMwLDMwLDEyMCwxMzgwXSxcIjEwODBwXzFcIjpbMTkyMCwxMDgwLDE1LDE1LDEyMCwyMDgwLDEsNV0sXCIxMDgwcF8yXCI6WzE5MjAsMTA4MCwzMCwzMCwxMjAsM2UzLDI1LDMwXSxcIjEwODBwXzNcIjpbMTkyMCwxMDgwLDMwLDMwLDEyMCwzMTUwXSxcIjEwODBwXzVcIjpbMTkyMCwxMDgwLDYwLDYwLDEyMCw0NzgwXSxcIjE0NDBwXzFcIjpbMjU2MCwxNDQwLDMwLDMwLDEyMCw0ODUwXSxcIjE0NDBwXzJcIjpbMjU2MCwxNDQwLDYwLDYwLDEyMCw3MzUwXSxcIjRrXzFcIjpbMzg0MCwyMTYwLDMwLDMwLDEyMCw4OTEwXSxcIjRrXzNcIjpbMzg0MCwyMTYwLDYwLDYwLDEyMCwxMzUwMF19O3QuQVVESU9fUFJPRklMRV9TRVRUSU5HUz17c3BlZWNoX2xvd19xdWFsaXR5OlshMSwhMSwhMCwhMF0sc3BlZWNoX3N0YW5kYXJkOlshMSwhMSwhMCwhMV0sbXVzaWNfc3RhbmRhcmQ6WyExLCExLCExLCExXSxzdGFuZGFyZF9zdGVyZW86WyExLCEwLCExLCExXSxoaWdoX3F1YWxpdHk6WyEwLCExLCExLCExXSxoaWdoX3F1YWxpdHlfc3RlcmVvOlshMCwhMCwhMSwhMV0sZGVmYXVsdDpbITEsITEsITEsITFdfTt2YXIgaT17V0VCQ1NfRE9NQUlOOltcIndlYnJ0YzItYXAtd2ViLTEuYWdvcmEuaW9cIixcIndlYnJ0YzItYXAtd2ViLTIuYWdvcmFpby5jblwiXSxXRUJDU19ET01BSU5fQkFDS1VQX0xJU1Q6W1wid2VicnRjMi1hcC13ZWItMy5hZ29yYS5pb1wiLFwid2VicnRjMi1hcC13ZWItNC5hZ29yYWlvLmNuXCJdLFBST1hZX0NTOltcImFwLXByb3h5LTEuYWdvcmEuaW9cIixcImFwLXByb3h5LTIuYWdvcmEuaW9cIl0sQ0RTX0FQOltcImNkcy1hcC13ZWItMS5hZ29yYS5pb1wiLFwiY2RzLWFwLXdlYi0yLmFnb3JhaW8uY25cIixcImNkcy1hcC13ZWItMy5hZ29yYS5pb1wiLFwiY2RzLWFwLXdlYi00LmFnb3JhaW8uY25cIl0sQUNDT1VOVF9SRUdJU1RFUjpbXCJzdWEtYXAtd2ViLTEuYWdvcmEuaW9cIixcInN1YS1hcC13ZWItMi5hZ29yYWlvLmNuXCIsXCJzdWEtYXAtd2ViLTMuYWdvcmEuaW9cIixcInN1YS1hcC13ZWItNC5hZ29yYWlvLmNuXCJdLFVBUF9BUDpbXCJ1YXAtYXAtd2ViLTEuYWdvcmEuaW9cIixcInVhcC1hcC13ZWItMi5hZ29yYWlvLmNuXCIsXCJ1YXAtYXAtd2ViLTMuYWdvcmEuaW9cIixcInVhcC1hcC13ZWItNC5hZ29yYWlvLmNuXCJdLEFDQ09VTlRfUkVHSVNURVJfUkVUUllfVElNRU9VVDoxLEFDQ09VTlRfUkVHSVNURVJfUkVUUllfUkFUSU86MixBQ0NPVU5UX1JFR0lTVEVSX1JFVFJZX1RJTUVPVVRfTUFYOjZlNCxBQ0NPVU5UX1JFR0lTVEVSX1JFVFJZX0NPVU5UX01BWDoxZTUsQVVESU9fQ09OVEVYVDpudWxsLExPR19VUExPQURfU0VSVkVSOlwibG9nc2VydmljZS5hZ29yYS5pb1wiLEVWRU5UX1JFUE9SVF9ET01BSU46XCJ3ZWJjb2xsZWN0b3ItMS5hZ29yYS5pb1wiLEVWRU5UX1JFUE9SVF9CQUNLVVBfRE9NQUlOOlwid2ViY29sbGVjdG9yLTIuYWdvcmFpby5jblwiLFdFQkNTX0JBQ0tVUF9DT05ORUNUX1RJTUVPVVQ6NmUzLExJVkVTVFJFQU1JTkdfQUxJR046ITAsSFRUUF9DT05ORUNUX1RJTUVPVVQ6NWUzLFBMQVlFUl9TVEFURV9ERUZFUjoyZTMsU0lHTkFMX1JFUVVFU1RfVElNRU9VVDoxZTQsU0lHTkFMX1JFUVVFU1RfV0FUQ0hfSU5URVJWQUw6MWUzLFJFUE9SVF9TVEFUUzohMCxSRVBPUlRfU1RBVFNfVElNRU9VVDozZTMsVVBMT0FEX0xPRzohMSxOT1RfUkVQT1JUX0VWRU5UOltdLEZJTEVQQVRIX0xFTk1BWDoyNTUsU1VCU0NSSUJFX1RDQzohMSxQSU5HX1BPTkdfVElNRV9PVVQ6MTAsRFVBTFNUUkVBTV9PUEVSQVRJT05fQ0hFQ0s6ITAsV0VCU09DS0VUX1RJTUVPVVRfTUlOOjFlNCxFVkVOVF9SRVBPUlRfU0VORF9JTlRFUlZBTDoxZTMsTUVESUFfRUxFTUVOVF9FWElTVFNfREVQVEg6MyxDQU5ESURBVEVfVElNRU9VVDoyZTMsU0hJTV9DQU5ESURBVEU6ITEsTEVBVkVfTVNHX1RJTUVPVVQ6MmUzLFRJQ0tFVF9SRU5FV19USU1FT1VUOjgyOGU1LFNIT1dfUkVQT1JUX0lOVk9LRVJfTE9HOiExLFNUQVRTX0ZJTFRFUjp7dHJhbnNwb3J0SWQ6ITAsZ29vZ1RyYWNrSWQ6ITB9LEZPUkNFX1RVUk46ITEsVFVSTl9FTkFCTEVfVENQOiEwLFRVUk5fRU5BQkxFX1VEUDohMCxGT1JDRV9DSEFOR0VEX0dBVEVXQVlfRkxBRzohMSxKT0lOX0VYVEVORDpcIlwiLFBVQl9FWFRFTkQ6XCJcIixTVUJfRVhURU5EOlwiXCIsQ0hST01FX05FV19TVEFUUzohMX07dC5zZXRQYXJhbWV0ZXI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdm9pZCAwIT09aVtlXSYmKGlbZV09dCwhMCl9O3QuZ2V0UGFyYW1ldGVyPWZ1bmN0aW9uKGUpe3JldHVybiB2b2lkIDAhPT1pW2VdP2lbZV06bnVsbH19LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtuLnIodCksbi5kKHQsXCJnZXRCcm93c2VySW5mb1wiLGZ1bmN0aW9uKCl7cmV0dXJuIFN9KSxuLmQodCxcImdldEJyb3dzZXJWZXJzaW9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gcH0pLG4uZCh0LFwiZ2V0QnJvd3Nlck9TXCIsZnVuY3Rpb24oKXtyZXR1cm4gZn0pLG4uZCh0LFwiaXNDaHJvbWVcIixmdW5jdGlvbigpe3JldHVybiBpfSksbi5kKHQsXCJpc1NhZmFyaVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGF9KSxuLmQodCxcImlzRmlyZUZveFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG99KSxuLmQodCxcImlzT3BlcmFcIixmdW5jdGlvbigpe3JldHVybiBzfSksbi5kKHQsXCJpc0VkZ2VcIixmdW5jdGlvbigpe3JldHVybiByfSksbi5kKHQsXCJpc1FRQnJvd3NlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGN9KSxuLmQodCxcImlzV2VDaGF0QnJvd3NlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSxuLmQodCxcImlzTGVnYWN5Q2hyb21lXCIsZnVuY3Rpb24oKXtyZXR1cm4gZ30pLG4uZCh0LFwiaXNTdXBwb3J0ZWRQQ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHV9KSxuLmQodCxcImlzU3VwcG9ydGVkTW9iaWxlXCIsZnVuY3Rpb24oKXtyZXR1cm4gbH0pLG4uZCh0LFwiZ2V0Q2hyb21lS2VybmVsVmVyc2lvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIGh9KSxuLmQodCxcImlzQ2hyb21lS2VybmVsXCIsZnVuY3Rpb24oKXtyZXR1cm4gbX0pO3ZhciBpPWZ1bmN0aW9uKCl7dmFyIGU9UygpO3JldHVybiBlLm5hbWUmJlwiQ2hyb21lXCI9PT1lLm5hbWV9LGE9ZnVuY3Rpb24oKXt2YXIgZT1TKCk7cmV0dXJuIGUubmFtZSYmXCJTYWZhcmlcIj09PWUubmFtZX0scj1mdW5jdGlvbigpe3ZhciBlPVMoKTtyZXR1cm4gZS5uYW1lJiZcIkVkZ2VcIj09PWUubmFtZX0sbz1mdW5jdGlvbigpe3ZhciBlPVMoKTtyZXR1cm4gZS5uYW1lJiZcIkZpcmVmb3hcIj09PWUubmFtZX0scz1mdW5jdGlvbigpe3ZhciBlPVMoKTtyZXR1cm4gZS5uYW1lJiZcIk9QUlwiPT09ZS5uYW1lfSxjPWZ1bmN0aW9uKCl7dmFyIGU9UygpO3JldHVybiBlLm5hbWUmJlwiUVFCcm93c2VyXCI9PT1lLm5hbWV9LGQ9ZnVuY3Rpb24oKXt2YXIgZT1TKCk7cmV0dXJuIGUubmFtZSYmXCJNaWNyb01lc3NlbmdlclwiPT09ZS5uYW1lfSx1PWZ1bmN0aW9uKCl7dmFyIGU9ZigpO3JldHVyblwiTGludXhcIj09PWV8fFwiTWFjIE9TIFhcIj09PWV8fFwiTWFjIE9TXCI9PT1lfHwtMSE9PWUuaW5kZXhPZihcIldpbmRvd3NcIil9LGw9ZnVuY3Rpb24oKXt2YXIgZT1mKCk7cmV0dXJuXCJBbmRyb2lkXCI9PT1lfHxcImlPU1wiPT09ZX0scD1mdW5jdGlvbigpe3JldHVybiBTKCkudmVyc2lvbn0sZj1mdW5jdGlvbigpe3JldHVybiBTKCkub3N9LG09ZnVuY3Rpb24oKXtyZXR1cm4hIW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL2Nocm9tZVxcL1tcXGRdLi9pKX07ZnVuY3Rpb24gZygpe3JldHVybiB3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24mJm51bGwhPT13aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0Nocm9tZVxcLyhbXFx3XFxXXSo/KVxcLi8pJiZ3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0Nocm9tZVxcLyhbXFx3XFxXXSo/KVxcLi8pWzFdPD0zNX12YXIgdixoPWZ1bmN0aW9uKCl7dmFyIGU9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvY2hyb21lXFwvW1xcZF0uL2kpO3JldHVybiBlJiZlWzBdJiZlWzBdLnNwbGl0KFwiL1wiKVsxXX0sUz0odj1mdW5jdGlvbigpe3ZhciBlLHQ9bmF2aWdhdG9yLnVzZXJBZ2VudCxuPXQubWF0Y2goLyhvcGVyYXxjaHJvbWV8c2FmYXJpfGZpcmVmb3h8bXNpZXx0cmlkZW50KD89XFwvKSlcXC8/XFxzKihcXGQrKS9pKXx8W107XCJDaHJvbWVcIj09PW5bMV0mJm51bGwhPShlPXQubWF0Y2goLyhPUFIoPz1cXC8pKVxcLz8oXFxkKykvaSkpJiYobj1lKSxcIlNhZmFyaVwiPT09blsxXSYmbnVsbCE9KGU9dC5tYXRjaCgvdmVyc2lvblxcLyhcXGQrKS9pKSkmJihuWzJdPWVbMV0pLH50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInFxYnJvd3NlclwiKSYmbnVsbCE9KGU9dC5tYXRjaCgvKHFxYnJvd3Nlcig/PVxcLykpXFwvPyhcXGQrKS9pKSkmJihuPWUpLH50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcIm1pY3JvbWVzc2VuZ2VyXCIpJiZudWxsIT0oZT10Lm1hdGNoKC8obWljcm9tZXNzZW5nZXIoPz1cXC8pKVxcLz8oXFxkKykvaSkpJiYobj1lKSx+dC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJlZGdlXCIpJiZudWxsIT0oZT10Lm1hdGNoKC8oZWRnZSg/PVxcLykpXFwvPyhcXGQrKS9pKSkmJihuPWUpLH50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcInRyaWRlbnRcIikmJm51bGwhPShlPS9cXGJydlsgOl0rKFxcZCspL2cuZXhlYyh0KXx8W10pJiYobj1bbnVsbCxcIklFXCIsZVsxXV0pO3ZhciBpPXZvaWQgMCxhPVt7czpcIldpbmRvd3MgMTBcIixyOi8oV2luZG93cyAxMC4wfFdpbmRvd3MgTlQgMTAuMCkvfSx7czpcIldpbmRvd3MgOC4xXCIscjovKFdpbmRvd3MgOC4xfFdpbmRvd3MgTlQgNi4zKS99LHtzOlwiV2luZG93cyA4XCIscjovKFdpbmRvd3MgOHxXaW5kb3dzIE5UIDYuMikvfSx7czpcIldpbmRvd3MgN1wiLHI6LyhXaW5kb3dzIDd8V2luZG93cyBOVCA2LjEpL30se3M6XCJXaW5kb3dzIFZpc3RhXCIscjovV2luZG93cyBOVCA2LjAvfSx7czpcIldpbmRvd3MgU2VydmVyIDIwMDNcIixyOi9XaW5kb3dzIE5UIDUuMi99LHtzOlwiV2luZG93cyBYUFwiLHI6LyhXaW5kb3dzIE5UIDUuMXxXaW5kb3dzIFhQKS99LHtzOlwiV2luZG93cyAyMDAwXCIscjovKFdpbmRvd3MgTlQgNS4wfFdpbmRvd3MgMjAwMCkvfSx7czpcIldpbmRvd3MgTUVcIixyOi8oV2luIDl4IDQuOTB8V2luZG93cyBNRSkvfSx7czpcIldpbmRvd3MgOThcIixyOi8oV2luZG93cyA5OHxXaW45OCkvfSx7czpcIldpbmRvd3MgOTVcIixyOi8oV2luZG93cyA5NXxXaW45NXxXaW5kb3dzXzk1KS99LHtzOlwiV2luZG93cyBOVCA0LjBcIixyOi8oV2luZG93cyBOVCA0LjB8V2luTlQ0LjB8V2luTlR8V2luZG93cyBOVCkvfSx7czpcIldpbmRvd3MgQ0VcIixyOi9XaW5kb3dzIENFL30se3M6XCJXaW5kb3dzIDMuMTFcIixyOi9XaW4xNi99LHtzOlwiQW5kcm9pZFwiLHI6L0FuZHJvaWQvfSx7czpcIk9wZW4gQlNEXCIscjovT3BlbkJTRC99LHtzOlwiU3VuIE9TXCIscjovU3VuT1MvfSx7czpcIkxpbnV4XCIscjovKExpbnV4fFgxMSkvfSx7czpcImlPU1wiLHI6LyhpUGhvbmV8aVBhZHxpUG9kKS99LHtzOlwiTWFjIE9TIFhcIixyOi9NYWMgT1MgWC99LHtzOlwiTWFjIE9TXCIscjovKE1hY1BQQ3xNYWNJbnRlbHxNYWNfUG93ZXJQQ3xNYWNpbnRvc2gpL30se3M6XCJRTlhcIixyOi9RTlgvfSx7czpcIlVOSVhcIixyOi9VTklYL30se3M6XCJCZU9TXCIscjovQmVPUy99LHtzOlwiT1MvMlwiLHI6L09TXFwvMi99LHtzOlwiU2VhcmNoIEJvdFwiLHI6LyhudWhrfEdvb2dsZWJvdHxZYW1teWJvdHxPcGVuYm90fFNsdXJwfE1TTkJvdHxBc2sgSmVldmVzXFwvVGVvbWF8aWFfYXJjaGl2ZXIpL31dO2Zvcih2YXIgciBpbiBhKXt2YXIgbz1hW3JdO2lmKG8uci50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKXtpPW8uczticmVha319cmV0dXJue25hbWU6blsxXSx2ZXJzaW9uOm5bMl0sb3M6aX19KCksZnVuY3Rpb24oKXtyZXR1cm4gdn0pfSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXtyZXR1cm4gZS5leHBvcnRzPW49T2JqZWN0LmFzc2lnbnx8ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49YXJndW1lbnRzW3RdO2Zvcih2YXIgaSBpbiBuKU9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChuLGkpJiYoZVtpXT1uW2ldKX1yZXR1cm4gZX0sbi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9ZS5leHBvcnRzPW59LGZ1bmN0aW9uKGUsdCxuKXtlLmV4cG9ydHM9bigyNCl9LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaSxhPXRoaXMmJnRoaXMuX19leHRlbmRzfHwoaT1mdW5jdGlvbihlLHQpe3JldHVybihpPU9iamVjdC5zZXRQcm90b3R5cGVPZnx8e19fcHJvdG9fXzpbXX1pbnN0YW5jZW9mIEFycmF5JiZmdW5jdGlvbihlLHQpe2UuX19wcm90b19fPXR9fHxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbiBpbiB0KXQuaGFzT3duUHJvcGVydHkobikmJihlW25dPXRbbl0pfSkoZSx0KX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKCl7dGhpcy5jb25zdHJ1Y3Rvcj1lfWkoZSx0KSxlLnByb3RvdHlwZT1udWxsPT09dD9PYmplY3QuY3JlYXRlKHQpOihuLnByb3RvdHlwZT10LnByb3RvdHlwZSxuZXcgbil9KSxyPXRoaXMmJnRoaXMuX19hd2FpdGVyfHxmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihhLHIpe2Z1bmN0aW9uIG8oZSl7dHJ5e2MoaS5uZXh0KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtjKGkudGhyb3coZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIGMoZSl7ZS5kb25lP2EoZS52YWx1ZSk6bmV3IG4oZnVuY3Rpb24odCl7dChlLnZhbHVlKX0pLnRoZW4obyxzKX1jKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX0sbz10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLHQpe3ZhciBuLGksYSxyLG89e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmYVswXSl0aHJvdyBhWzFdO3JldHVybiBhWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHI9e25leHQ6cygwKSx0aHJvdzpzKDEpLHJldHVybjpzKDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihyW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHI7ZnVuY3Rpb24gcyhyKXtyZXR1cm4gZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtvOyl0cnl7aWYobj0xLGkmJihhPTImclswXT9pLnJldHVybjpyWzBdP2kudGhyb3d8fCgoYT1pLnJldHVybikmJmEuY2FsbChpKSwwKTppLm5leHQpJiYhKGE9YS5jYWxsKGksclsxXSkpLmRvbmUpcmV0dXJuIGE7c3dpdGNoKGk9MCxhJiYocj1bMiZyWzBdLGEudmFsdWVdKSxyWzBdKXtjYXNlIDA6Y2FzZSAxOmE9cjticmVhaztjYXNlIDQ6cmV0dXJuIG8ubGFiZWwrKyx7dmFsdWU6clsxXSxkb25lOiExfTtjYXNlIDU6by5sYWJlbCsrLGk9clsxXSxyPVswXTtjb250aW51ZTtjYXNlIDc6cj1vLm9wcy5wb3AoKSxvLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGE9KGE9by50cnlzKS5sZW5ndGg+MCYmYVthLmxlbmd0aC0xXSkmJig2PT09clswXXx8Mj09PXJbMF0pKXtvPTA7Y29udGludWV9aWYoMz09PXJbMF0mJighYXx8clsxXT5hWzBdJiZyWzFdPGFbM10pKXtvLmxhYmVsPXJbMV07YnJlYWt9aWYoNj09PXJbMF0mJm8ubGFiZWw8YVsxXSl7by5sYWJlbD1hWzFdLGE9cjticmVha31pZihhJiZvLmxhYmVsPGFbMl0pe28ubGFiZWw9YVsyXSxvLm9wcy5wdXNoKHIpO2JyZWFrfWFbMl0mJm8ub3BzLnBvcCgpLG8udHJ5cy5wb3AoKTtjb250aW51ZX1yPXQuY2FsbChlLG8pfWNhdGNoKGUpe3I9WzYsZV0saT0wfWZpbmFsbHl7bj1hPTB9aWYoNSZyWzBdKXRocm93IHJbMV07cmV0dXJue3ZhbHVlOnJbMF0/clsxXTp2b2lkIDAsZG9uZTohMH19KFtyLHNdKX19fSxzPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBjPXMobigzMCkpLGQ9bigzKSx1PXMobigwKSksbD1uKDkpLHA9bigxKSxmPW4oMTApLG09ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4pe3ZhciBpPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gaS5fc3RhdGU9Xy5SRUxBWV9TVEFURV9JRExFLGkuX29uU3RhdHVzPWZ1bmN0aW9uKGUpe3UuZGVmYXVsdC5kZWJ1ZyhcIltcIitpLmNsaWVudElkK1wiXSBDaGFubmVsTWVkaWFTdGF0dXM6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxlJiZlLmNvbW1hbmQmJihcIm9uQXVkaW9QYWNrZXRSZWNlaXZlZFwiPT09ZS5jb21tYW5kJiZpLmVtaXQoXCJldmVudFwiLFMuUEFDS0VUX1JFQ0VJVkVEX0FVRElPX0ZST01fU1JDKSxcIm9uVmlkZW9QYWNrZXRSZWNlaXZlZFwiPT09ZS5jb21tYW5kJiZpLmVtaXQoXCJldmVudFwiLFMuUEFDS0VUX1JFQ0VJVkVEX1ZJREVPX0ZST01fU1JDKSxcIm9uU3JjVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmVcIj09PWUuY29tbWFuZCYmKGkuX3N0YXRlPV8uUkVMQVlfU1RBVEVfRkFJTFVSRSxpLmVtaXQoXCJzdGF0ZVwiLF8uUkVMQVlfU1RBVEVfRkFJTFVSRSxFLlNSQ19UT0tFTl9FWFBJUkVEKSksXCJvbkRlc3RUb2tlblByaXZpbGVnZURpZEV4cGlyZVwiPT09ZS5jb21tYW5kJiYoaS5fc3RhdGU9Xy5SRUxBWV9TVEFURV9GQUlMVVJFLGkuZW1pdChcInN0YXRlXCIsXy5SRUxBWV9TVEFURV9GQUlMVVJFLEUuREVTVF9UT0tFTl9FWFBJUkVELGUuY2hhbm5lbE5hbWU/e2NhbWU6ZS5jaGFubmVsTmFtZX06bnVsbCkpKX0saS5fb25DbG9zZT1mdW5jdGlvbigpe3JldHVybiByKGksdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBvKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZih1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gQ2hhbm5lbE1lZGlhU29ja2V0IG9uQ2xvc2VcIiksdGhpcy5lbWl0KFwiZXZlbnRcIixTLk5FVFdPUktfRElTQ09OTkVDVEVEKSx0aGlzLnN0YXRlPV8uUkVMQVlfU1RBVEVfSURMRSwhdGhpcy5fcHJldkNoYW5uZWxNZWRpYUNvbmZpZylyZXR1cm5bMyw0XTt0LmxhYmVsPTE7Y2FzZSAxOnJldHVybiB0LnRyeXMucHVzaChbMSwzLCw0XSksWzQsdGhpcy5zdGFydENoYW5uZWxNZWRpYVJlbGF5KHRoaXMuX3ByZXZDaGFubmVsTWVkaWFDb25maWcpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLFszLDRdO2Nhc2UgMzpyZXR1cm4oZT10LnNlbnQoKSlpbnN0YW5jZW9mIHkmJihlLm1lc3NhZ2U9PT12LldTX0FCT1JUfHxlLm1lc3NhZ2U9PT12LkFQX1JFUVVFU1RfQUJPUlQpP1syXToodGhpcy5lbWl0KFwic3RhdGVcIixfLlJFTEFZX1NUQVRFX0ZBSUxVUkUsRS5TRVJWRVJfQ09OTkVDVElPTl9MT1NUKSxbMyw0XSk7Y2FzZSA0OnJldHVyblsyXX19KX0pfSxpLnRva2VuPXQuYXBwSWQsaS5hcHBJZD10LmFwcElkLGkuY25hbWU9dC5jbmFtZSxpLnVpZD10LnVpZCxpLnNpZD10LnNpZCxpLmNsaWVudElkPW4saX1yZXR1cm4gYSh0LGUpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LnByb3RvdHlwZSxcInN0YXRlXCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9zdGF0ZX0sc2V0OmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMuX3N0YXRlO3RoaXMuX3N0YXRlPWUsdCE9PWUmJnRoaXMuZW1pdChcInN0YXRlXCIsZSl9LGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwfSksdC5wcm90b3R5cGUuc3RhcnRDaGFubmVsTWVkaWFSZWxheT1mdW5jdGlvbihlKXtyZXR1cm4gcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6aWYodGhpcy5zdGF0ZSE9PV8uUkVMQVlfU1RBVEVfSURMRSl0aHJvdyBuZXcgeSh2LkJBRF9TVEFURSk7cmV0dXJuIHRoaXMuc3RhdGU9Xy5SRUxBWV9TVEFURV9DT05ORUNUSU5HLFs0LHRoaXMuX2Nvbm5lY3QoKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSx1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheTogY29ubmVjdCBzdWNjZXNzXCIpLFs0LHRoaXMuX3NlbmRTdGFydFJlbGF5TWVzc2FnZShlKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSx0aGlzLl9wcmV2Q2hhbm5lbE1lZGlhQ29uZmlnPWUsWzJdfX0pfSl9LHQucHJvdG90eXBlLnVwZGF0ZUNoYW5uZWxNZWRpYVJlbGF5PWZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBvKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZih0aGlzLnN0YXRlIT09Xy5SRUxBWV9TVEFURV9SVU5OSU5HKXRocm93IG5ldyB5KHYuQkFEX1NUQVRFKTtyZXR1cm5bNCx0aGlzLl9zZW5kVXBkYXRlTWVzc2FnZShlKV07Y2FzZSAxOnJldHVybiB0LnNlbnQoKSx0aGlzLl9wcmV2Q2hhbm5lbE1lZGlhQ29uZmlnPWUsWzJdfX0pfSl9LHQucHJvdG90eXBlLnN0b3BDaGFubmVsTWVkaWFSZWxheT1mdW5jdGlvbigpe3JldHVybiByKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBvKHRoaXMsZnVuY3Rpb24oZSl7c3dpdGNoKGUubGFiZWwpe2Nhc2UgMDpyZXR1cm5bNCx0aGlzLl9zZW5kU3RvcFJlbGF5TWVzc2FnZSgpXTtjYXNlIDE6cmV0dXJuIGUuc2VudCgpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzdG9wQ2hhbm5lbE1lZGlhUmVsYXk6IHNlbmQgc3RvcCBtZXNzYWdlIHN1Y2Nlc3NcIiksdGhpcy5zdGF0ZT1fLlJFTEFZX1NUQVRFX0lETEUsdGhpcy5kaXNwb3NlKCksWzJdfX0pfSl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gZGlzcG9zZUNoYW5uZWxNZWRpYVJlbGF5XCIpLHRoaXMuc3RhdGU9Xy5SRUxBWV9TVEFURV9JRExFLHRoaXMuZW1pdChcImRpc3Bvc2VcIiksdGhpcy5fc2lnbmFsJiZ0aGlzLl9zaWduYWwuZGlzcG9zZSgpLHRoaXMuX3ByZXZDaGFubmVsTWVkaWFDb25maWc9bnVsbCx0aGlzLnJlbW92ZUV2ZW50KCl9LHQucHJvdG90eXBlLl9yZXF1ZXN0T25lQVA9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixpKXt2YXIgYT17Y29tbWFuZDpcImNvbnZlcmdlQWxsb2NhdGVFZGdlXCIsc2lkOnQuc2lkLGFwcElkOnQuYXBwSWQsdG9rZW46XCJcIix0czorbmV3IERhdGUsdmVyc2lvbjpkLlZFUlNJT04sY25hbWU6dC5jbmFtZSx1aWQ6dC51aWQrXCJcIixzZXE6MSxyZXF1ZXN0SWQ6MX0scj17c2VydmljZV9uYW1lOlwidGVsZV9jaGFubmVsXCIsanNvbl9ib2R5OkpTT04uc3RyaW5naWZ5KGEpfSxvPVwiaHR0cHM6Ly9cIitlO2wucG9zdChvLHIsZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbCxhPW51bGw7dHJ5e3Q9SlNPTi5wYXJzZShlKX1jYXRjaChlKXtpKG5ldyB5KHYuQVBfSlNPTl9QQVJTRV9FUlJPUixlKSl9MCE9PXQuY29kZSYmaShuZXcgeSh2LkFQX1JFUVVFU1RfRVJST1IsdCkpO3RyeXthPUpTT04ucGFyc2UodC5qc29uX2JvZHkpfWNhdGNoKGUpe2kobmV3IHkodi5BUF9KU09OX1BBUlNFX0VSUk9SLGUpKX0yMDAhPT1hLmNvZGUmJmkobmV3IHkodi5BUF9SRVFVRVNUX0VSUk9SLGEpKSxhLnNlcnZlcnM/bihhLnNlcnZlcnMpOmkobmV3IHkodi5BUF9KU09OX1BBUlNFX0VSUk9SLGEpKX0sZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl9LHtcIlgtUGFja2V0LVNlcnZpY2UtVHlwZVwiOjAsXCJYLVBhY2tldC1VUklcIjo2MX0pfSl9LHQucHJvdG90eXBlLl9yZXF1ZXN0QVA9ZnVuY3Rpb24oKXt2YXIgZT10aGlzLHQ9ZC5nZXRQYXJhbWV0ZXIoXCJVQVBfQVBcIik7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4saSl7c2V0VGltZW91dChmdW5jdGlvbigpe2kobmV3IHkodi5BUF9SRVFVRVNUX1RJTUVPVVQpKX0sM2UzKSxlLm9uKFwiZGlzcG9zZVwiLGZ1bmN0aW9uKCl7aShuZXcgeSh2LkFQX1JFUVVFU1RfQUJPUlQpKX0pLHQuZm9yRWFjaChmdW5jdGlvbih0KXt0Kz1cIi9hcGkvdjFcIixlLl9yZXF1ZXN0T25lQVAodCkudGhlbihmdW5jdGlvbihpKXt1LmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheSByZXF1ZXN0IEFQIFwiK3QrXCIgc3VjY2VzczogXCIrSlNPTi5zdHJpbmdpZnkoaSkpO3ZhciBhPWlbMF0scj1cIndzczovL1wiK2EuYWRkcmVzcy5yZXBsYWNlKC9cXC4vZyxcIi1cIikrXCIuZWRnZS5hZ29yYS5pbzpcIithLndzcztuKHIpfSkuY2F0Y2goZnVuY3Rpb24obil7dS5kZWZhdWx0LmRlYnVnKFwiW1wiK2UuY2xpZW50SWQrXCJdIHN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXkgcmVxdWVzdCBBUCBcIit0K1wiIGZhaWxlZDogXCIrSlNPTi5zdHJpbmdpZnkobikpfSl9KX0pfSx0LnByb3RvdHlwZS5fY29ubmVjdFdlYnNvY2tldD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5fc2lnbmFsPW5ldyBJKHRoaXMuYXBwSWQsdGhpcy5jbmFtZSx0aGlzLnVpZCx0aGlzLnNpZCksdGhpcy5fc2lnbmFsLmNvbm5lY3QoZSl9LHQucHJvdG90eXBlLl9jb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG8odGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuX3JlcXVlc3RBUCgpXTtjYXNlIDE6cmV0dXJuIGU9dC5zZW50KCksWzQsdGhpcy5fY29ubmVjdFdlYnNvY2tldChlKV07Y2FzZSAyOnJldHVybiB0LnNlbnQoKSx0aGlzLl9zaWduYWwub24oXCJjbG9zZVwiLHRoaXMuX29uQ2xvc2UuYmluZCh0aGlzKSksdGhpcy5fc2lnbmFsLm9uKFwic3RhdHVzXCIsdGhpcy5fb25TdGF0dXMuYmluZCh0aGlzKSksdGhpcy5lbWl0KFwiZXZlbnRcIixTLk5FVFdPUktfQ09OTkVDVEVEKSxbMl19fSl9KX0sdC5wcm90b3R5cGUuX3NlbmRTdGFydFJlbGF5TWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgdCxuLGksYSxyLHM7cmV0dXJuIG8odGhpcyxmdW5jdGlvbihvKXtzd2l0Y2goby5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGVja1NpZ25hbCgpLHQ9dGhpcy5fZ2VuTWVzc2FnZShoLlN0b3BQYWNrZXRUcmFuc2ZlciksWzQsdGhpcy5fc2lnbmFsLnJlcXVlc3QodCldO2Nhc2UgMTpyZXR1cm4gby5zZW50KCksWzQsdGhpcy5fc2lnbmFsLndhaXRTdGF0dXMoXCJOb3JtYWwgUXVpdFwiKV07Y2FzZSAyOnJldHVybiBvLnNlbnQoKSx1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheTogU3RvcFBhY2tldFRyYW5zZmVyIHN1Y2Nlc3NcIiksbj10aGlzLl9nZW5NZXNzYWdlKGguU2V0U2RrUHJvZmlsZSxlKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdChuKV07Y2FzZSAzOnJldHVybiBvLnNlbnQoKSx1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheTogU2V0U2RrUHJvZmlsZSBzdWNjZXNzXCIpLGk9dGhpcy5fZ2VuTWVzc2FnZShoLlNldFNvdXJjZUNoYW5uZWwsZSksWzQsdGhpcy5fc2lnbmFsLnJlcXVlc3QoaSldO2Nhc2UgNDpyZXR1cm4gby5zZW50KCksWzQsdGhpcy5fc2lnbmFsLndhaXRTdGF0dXMoXCJTZXRTb3VyY2VDaGFubmVsU3RhdHVzXCIpXTtjYXNlIDU6cmV0dXJuIG8uc2VudCgpLHRoaXMuZW1pdChcImV2ZW50XCIsUy5QQUNLRVRfSk9JTkVEX1NSQ19DSEFOTkVMKSx1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheTogU2V0U291cmNlQ2hhbm5lbCBzdWNjZXNzXCIpLGE9dGhpcy5fZ2VuTWVzc2FnZShoLlNldFNvdXJjZVVzZXJJZCxlKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdChhKV07Y2FzZSA2OnJldHVybiBvLnNlbnQoKSx1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheTogU2V0U291cmNlVXNlcklkIHN1Y2Nlc3NcIikscj10aGlzLl9nZW5NZXNzYWdlKGguU2V0RGVzdENoYW5uZWwsZSksWzQsdGhpcy5fc2lnbmFsLnJlcXVlc3QocildO2Nhc2UgNzpyZXR1cm4gby5zZW50KCksWzQsdGhpcy5fc2lnbmFsLndhaXRTdGF0dXMoXCJTZXREZXN0Q2hhbm5lbFN0YXR1c1wiKV07Y2FzZSA4OnJldHVybiBvLnNlbnQoKSx0aGlzLmVtaXQoXCJldmVudFwiLFMuUEFDS0VUX0pPSU5FRF9ERVNUX0NIQU5ORUwpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5OiBTZXREZXN0Q2hhbm5lbCBzdWNjZXNzXCIpLHM9dGhpcy5fZ2VuTWVzc2FnZShoLlN0YXJ0UGFja2V0VHJhbnNmZXIsZSksWzQsdGhpcy5fc2lnbmFsLnJlcXVlc3QocyldO2Nhc2UgOTpyZXR1cm4gby5zZW50KCksdGhpcy5lbWl0KFwiZXZlbnRcIixTLlBBQ0tFVF9TRU5UX1RPX0RFU1RfQ0hBTk5FTCksdGhpcy5zdGF0ZT1fLlJFTEFZX1NUQVRFX1JVTk5JTkcsdS5kZWZhdWx0LmRlYnVnKFwiW1wiK3RoaXMuY2xpZW50SWQrXCJdIHN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXk6IFN0YXJ0UGFja2V0VHJhbnNmZXIgc3VjY2Vzc1wiKSxbMl19fSl9KX0sdC5wcm90b3R5cGUuX3NlbmRSZWNvbm5lY3RNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciB0O3JldHVybiBvKHRoaXMsZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hlY2tTaWduYWwoKSx0PXRoaXMuX2dlbk1lc3NhZ2UoaC5SZWNvbm5lY3QsZSksWzQsdGhpcy5fc2lnbmFsLnJlcXVlc3QodCldO2Nhc2UgMTpyZXR1cm4gbi5zZW50KCksWzJdfX0pfSl9LHQucHJvdG90eXBlLl9zZW5kVXBkYXRlTWVzc2FnZT1mdW5jdGlvbihlKXtyZXR1cm4gcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gbyh0aGlzLGZ1bmN0aW9uKG4pe3N3aXRjaChuLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoZWNrU2lnbmFsKCksdD10aGlzLl9nZW5NZXNzYWdlKGguVXBkYXRlRGVzdENoYW5uZWwsZSksWzQsdGhpcy5fc2lnbmFsLnJlcXVlc3QodCldO2Nhc2UgMTpyZXR1cm4gbi5zZW50KCksdGhpcy5lbWl0KFwiZXZlbnRcIixTLlBBQ0tFVF9VUERBVEVfREVTVF9DSEFOTkVMKSx1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gc2VuZFVwZGF0ZU1lc3NhZ2U6IFVwZGF0ZURlc3RDaGFubmVsIHN1Y2Nlc3NcIiksWzJdfX0pfSl9LHQucHJvdG90eXBlLl9zZW5kU3RvcFJlbGF5TWVzc2FnZT1mdW5jdGlvbigpe3JldHVybiByKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciBlO3JldHVybiBvKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hlY2tTaWduYWwoKSxlPXRoaXMuX2dlbk1lc3NhZ2UoaC5TdG9wUGFja2V0VHJhbnNmZXIpLFs0LHRoaXMuX3NpZ25hbC5yZXF1ZXN0KGUpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzZW5kU3RvcFJlbGF5TWVzc2FnZTogU3RvcFBhY2tldFRyYW5zZmVyIHN1Y2Nlc3NcIiksWzJdfX0pfSl9LHQucHJvdG90eXBlLl9nZW5NZXNzYWdlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcyxpPVtdLGE9W10scj1bXSxvPXthcHBJZDp0aGlzLmFwcElkLGNuYW1lOnRoaXMuY25hbWUsdWlkOnRoaXMudWlkK1wiXCIsc2RrVmVyc2lvbjpkLlZFUlNJT04sc2lkOnRoaXMuc2lkLHRzOituZXcgRGF0ZSxyZXF1ZXN0SWQ6MCxzZXE6MCxhbGxvY2F0ZTohMCxjbGllbnRSZXF1ZXN0Ont9fSxzPW51bGw7c3dpdGNoKGUpe2Nhc2UgaC5TZXRTZGtQcm9maWxlOnJldHVybiBvLmNsaWVudFJlcXVlc3Q9e2NvbW1hbmQ6XCJTZXRTZGtQcm9maWxlXCIsdHlwZTpcIm11bHRpX2NoYW5uZWxcIn0sbztjYXNlIGguU2V0U291cmNlQ2hhbm5lbDpyZXR1cm4gcz10LmdldFNyY0NoYW5uZWxNZWRpYUluZm8oKSxvLmNsaWVudFJlcXVlc3Q9e2NvbW1hbmQ6XCJTZXRTb3VyY2VDaGFubmVsXCIsdWlkOnMudWlkK1wiXCIsY2hhbm5lbE5hbWU6cy5jaGFubmVsTmFtZSx0b2tlbjpzLnRva2VufHx0aGlzLmFwcElkfSxvO2Nhc2UgaC5TZXRTb3VyY2VVc2VySWQ6cmV0dXJuIHM9dC5nZXRTcmNDaGFubmVsTWVkaWFJbmZvKCksby5jbGllbnRSZXF1ZXN0PXtjb21tYW5kOlwiU2V0U291cmNlVXNlcklkXCIsdWlkOnRoaXMudWlkK1wiXCJ9LG87Y2FzZSBoLlNldERlc3RDaGFubmVsOnJldHVybiB0LmdldERlc3RDaGFubmVsTWVkaWFJbmZvcygpLmZvckVhY2goZnVuY3Rpb24oZSl7aS5wdXNoKGUuY2hhbm5lbE5hbWUpLGEucHVzaChlLnVpZCtcIlwiKSxyLnB1c2goZS50b2tlbnx8bi5hcHBJZCl9KSxvLmNsaWVudFJlcXVlc3Q9e2NvbW1hbmQ6XCJTZXREZXN0Q2hhbm5lbFwiLGNoYW5uZWxOYW1lOmksdWlkOmEsdG9rZW46cn0sbztjYXNlIGguU3RhcnRQYWNrZXRUcmFuc2ZlcjpyZXR1cm4gby5jbGllbnRSZXF1ZXN0PXtjb21tYW5kOlwiU3RhcnRQYWNrZXRUcmFuc2ZlclwifSxvO2Nhc2UgaC5SZWNvbm5lY3Q6cmV0dXJuIG8uY2xpZW50UmVxdWVzdD17Y29tbWFuZDpcIlJlY29ubmVjdFwifSxvO2Nhc2UgaC5TdG9wUGFja2V0VHJhbnNmZXI6cmV0dXJuIG8uY2xpZW50UmVxdWVzdD17Y29tbWFuZDpcIlN0b3BQYWNrZXRUcmFuc2ZlclwifSxvO2Nhc2UgaC5VcGRhdGVEZXN0Q2hhbm5lbDpyZXR1cm4gdC5nZXREZXN0Q2hhbm5lbE1lZGlhSW5mb3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2kucHVzaChlLmNoYW5uZWxOYW1lKSxhLnB1c2goZS51aWQrXCJcIiksci5wdXNoKGUudG9rZW58fG4uYXBwSWQpfSksby5jbGllbnRSZXF1ZXN0PXtjb21tYW5kOlwiVXBkYXRlRGVzdENoYW5uZWxcIixjaGFubmVsTmFtZTppLHVpZDphLHRva2VuOnJ9LG99fSx0LnByb3RvdHlwZS5fY2hlY2tTaWduYWw9ZnVuY3Rpb24oKXtpZighdGhpcy5fc2lnbmFsfHwhdGhpcy5fc2lnbmFsLmlzQ29ubmVjdCgpKXRocm93IG5ldyB5KHYuV1NfRElTQ09OTkVDVEVEKX0sdH0oYy5kZWZhdWx0KTt0LmRlZmF1bHQ9bTt2YXIgZz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoKXt0aGlzLmRlc3RDaGFubmVsTWVkaWFJbmZvcz1uZXcgTWFwfXJldHVybiBlLnByb3RvdHlwZS5zZXRTcmNDaGFubmVsSW5mbz1mdW5jdGlvbihlKXtwLmNoZWNrVmFsaWRPYmplY3QoZSxcInNyY0luZm9cIik7dmFyIHQ9ZS51aWQsbj1lLmNoYW5uZWxOYW1lLGk9ZS50b2tlbjtpZihpJiYhcC5pc1ZhbGlkVG9rZW4oaSkpdGhyb3dcIkludmFsaWQgdG9rZW4gaW4gU3JjQ2hhbm5lbEluZm9cIjtpZighcC5pc1ZhbGlkQ2hhbm5lbE5hbWUobikpdGhyb3dcIkludmFsaWQgY2hhbm5lbE5hbWUgaW4gU3JjQ2hhbm5lbEluZm9cIjtpZighZi5pczMyVWludCh0KSl0aHJvd1wiSW52YWxpZCB1aWQgaW4gU3JjQ2hhbm5lbEluZm9cIjt0aGlzLnNyY0NoYW5uZWxNZWRpYUluZm89ZX0sZS5wcm90b3R5cGUuc2V0RGVzdENoYW5uZWxJbmZvPWZ1bmN0aW9uKGUsdCl7aWYoIXAuaXNWYWxpZENoYW5uZWxOYW1lKGUpKXRocm93XCJJbnZhbGlkIGNoYW5uZWxOYW1lIGluIERlc3RDaGFubmVsSW5mb1wiO3AuY2hlY2tWYWxpZE9iamVjdCh0LFwiZGVzdEluZm9cIik7dmFyIG49dC51aWQsaT10LnRva2VuLGE9dC5jaGFubmVsTmFtZTtpZihpJiYhcC5pc1ZhbGlkVG9rZW4oaSkpdGhyb3dcIkludmFsaWQgdG9rZW4gaW4gRGVzdENoYW5uZWxJbmZvXCI7aWYoIXAuaXNWYWxpZENoYW5uZWxOYW1lKGEpKXRocm93XCJJbnZhbGlkIGNoYW5uZWxOYW1lIGluIERlc3RDaGFubmVsSW5mb1wiO2lmKCFmLmlzMzJVaW50KG4pKXRocm93XCJJbnZhbGlkIHVpZCBpbiBEZXN0Q2hhbm5lbEluZm9cIjt0aGlzLmRlc3RDaGFubmVsTWVkaWFJbmZvcy5zZXQoZSx0KX0sZS5wcm90b3R5cGUucmVtb3ZlRGVzdENoYW5uZWxJbmZvPWZ1bmN0aW9uKGUpe2lmKCFwLmlzVmFsaWRDaGFubmVsTmFtZShlKSl0aHJvd1wiSW52YWxpZCBjaGFubmVsTmFtZSB3aGVuIGludm9rZSByZW1vdmVEZXN0Q2hhbm5lbEluZm9cIjt0aGlzLmRlc3RDaGFubmVsTWVkaWFJbmZvcy5kZWxldGUoZSl9LGUucHJvdG90eXBlLmdldFNyY0NoYW5uZWxNZWRpYUluZm89ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zcmNDaGFubmVsTWVkaWFJbmZvfSxlLnByb3RvdHlwZS5nZXREZXN0Q2hhbm5lbE1lZGlhSW5mb3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5kZXN0Q2hhbm5lbE1lZGlhSW5mb3N9LGV9KCk7dC5DaGFubmVsTWVkaWFSZWxheUNvbmZpZ3VyYXRpb249Zzt2YXIgdixoLFMsXyxFLEk9ZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCh0LG4saSxhKXt2YXIgcj1lLmNhbGwodGhpcyl8fHRoaXM7cmV0dXJuIHIuX29uT3Blbj1mdW5jdGlvbigpe3IuZW1pdChcIm9wZW5cIil9LHIuX29uQ2xvc2U9ZnVuY3Rpb24oZSl7ci5lbWl0KFwiY2xvc2VcIiksci5kaXNwb3NlKCl9LHIuX29uTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgdD1KU09OLnBhcnNlKGUuZGF0YSk7aWYoIXR8fFwic2VydmVyUmVzcG9uc2VcIiE9PXQuY29tbWFuZHx8IXQucmVxdWVzdElkKXJldHVybiB0JiZcInNlcnZlclN0YXR1c1wiPT09dC5jb21tYW5kJiZ0LnNlcnZlclN0YXR1cyYmdC5zZXJ2ZXJTdGF0dXMuY29tbWFuZD8oci5lbWl0KFwic3RhdHVzXCIsdC5zZXJ2ZXJTdGF0dXMpLHZvaWQgci5lbWl0KHQuc2VydmVyU3RhdHVzLmNvbW1hbmQsdC5zZXJ2ZXJTdGF0dXMpKTp2b2lkIDA7ci5lbWl0KFwicmVxX1wiK3QucmVxdWVzdElkLHQpfSxyLl9yZXF1ZXN0SWQ9MSxyLmFwcElkPXQsci5jbmFtZT1uLHIudWlkPWksci5zaWQ9YSxyfXJldHVybiBhKHQsZSksdC5wcm90b3R5cGUuaXNDb25uZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3dzJiZ0aGlzLl93cy5yZWFkeVN0YXRlPT09V2ViU29ja2V0Lk9QRU59LHQucHJvdG90eXBlLnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl93c3x8dGhpcy5fd3MucmVhZHlTdGF0ZSE9PVdlYlNvY2tldC5PUEVOKXRocm93IG5ldyB5KHYuV1NfRElTQ09OTkVDVEVEKTt2YXIgdD10aGlzLl9yZXF1ZXN0SWQrKztyZXR1cm4gZS5yZXF1ZXN0SWQ9dCxlLnNlcT10LHRoaXMuX3dzLnNlbmQoSlNPTi5zdHJpbmdpZnkoZSkpLHR9LHQucHJvdG90eXBlLndhaXRTdGF0dXM9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixpKXt2YXIgYT13aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbigpe2kobmV3IHkodi5XQUlUX1NUQVRVU19USU1FT1VULGUpKX0sNWUzKTt0Lm9uY2UoZSxmdW5jdGlvbih0KXtjbGVhclRpbWVvdXQoYSksdC5zdGF0ZSYmMCE9PXQuc3RhdGU/aShuZXcgeSh2LldBSVRfU1RBVFVTX0VSUk9SLGUpKTpuKCl9KSx0Lm9uY2UoXCJkaXNwb3NlXCIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQoYSksaShuZXcgeSh2LldTX0FCT1JUKSl9KX0pfSx0LnByb3RvdHlwZS5yZXF1ZXN0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4saSl7dmFyIGE9dC5zZW5kTWVzc2FnZShlKSxyPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5yZW1vdmVBbGxMaXN0ZW5lcnMoXCJyZXFfXCIrYSksaShuZXcgeSh2LlJFUVVFU1RfVElNRU9VVCkpfSwzZTMpO3Qub25jZShcInJlcV9cIithLGZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChyKSxlJiYyMDA9PT1lLmNvZGU/bihlKTppKG5ldyB5KHYuUkVRVUVTVF9GQUlMRUQsZSkpfSksdC5vbmNlKFwiZGlzcG9zZVwiLGZ1bmN0aW9uKCl7Y2xlYXJUaW1lb3V0KHIpLGkobmV3IHkodi5XU19BQk9SVCkpfSl9KX0sdC5wcm90b3R5cGUuY29ubmVjdD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe3QuX3dzPW5ldyBXZWJTb2NrZXQoZSksdC5fd3Mub25vcGVuPWZ1bmN0aW9uKCl7dC5fb25PcGVuKCksdC5fcHJ2VXJsPWUsdC5fd3Mub25tZXNzYWdlPXQuX29uTWVzc2FnZSx0Ll93cy5vbmNsb3NlPXQuX29uQ2xvc2UsdC5fc3RhcnRIZWFydEJlYXRDaGVjaygpLG4oKX0sdC5fd3Mub25jbG9zZT1mdW5jdGlvbihlKXt0Ll93cz1udWxsLGkobmV3IHkodi5DT05ORUNUX0ZBSUxFRCxcIndlYnNvY2tldCBlcnJvciBjb2RlOiBcIitlLmNvZGUpKX0sc2V0VGltZW91dChmdW5jdGlvbigpe3QuX3dzJiZ0Ll93cy5yZWFkeVN0YXRlIT09V2ViU29ja2V0Lk9QRU4mJih0Ll93cy5vbm9wZW49bnVsbCx0Ll93cy5vbmNsb3NlPW51bGwsdC5fd3MuY2xvc2UoKSx0Ll93cz1udWxsLGkobmV3IHkodi5DT05ORUNUX1RJTUVPVVQpKSl9LDVlMyksdC5vbmNlKFwiZGlzcG9zZVwiLGZ1bmN0aW9uKCl7aShuZXcgeSh2LldTX0FCT1JUKSl9KX0pfSx0LnByb3RvdHlwZS5kaXNwb3NlPWZ1bmN0aW9uKCl7dGhpcy5fY2xlYXJIZWFydEJlYXRDaGVjaygpLHRoaXMuZW1pdChcImRpc3Bvc2VcIiksdGhpcy5yZW1vdmVFdmVudCgpLHRoaXMuX3dzJiYodGhpcy5fd3Mub25vcGVuPW51bGwsdGhpcy5fd3Mub25jbG9zZT1udWxsLHRoaXMuX3dzLm9ubWVzc2FnZT1udWxsLHRoaXMuX3dzLmNsb3NlKCkpLHRoaXMuX3dzPW51bGx9LHQucHJvdG90eXBlLl9zZW5kUGluZz1mdW5jdGlvbihlKXtpZighdGhpcy5fd3N8fHRoaXMuX3dzLnJlYWR5U3RhdGUhPT1XZWJTb2NrZXQuT1BFTil0aHJvdyBuZXcgeSh2LldTX0RJU0NPTk5FQ1RFRCk7dmFyIHQ9dGhpcy5fcmVxdWVzdElkKys7cmV0dXJuIGUucmVxdWVzdElkPXQsdGhpcy5fd3Muc2VuZChKU09OLnN0cmluZ2lmeShlKSksdH0sdC5wcm90b3R5cGUuX3N0YXJ0SGVhcnRCZWF0Q2hlY2s9ZnVuY3Rpb24oKXt2YXIgZT10aGlzO3RoaXMuX2hlYXJ0QmVhdFRpbWVyPXdpbmRvdy5zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UuX3NlbmRQaW5nKHtjb21tYW5kOlwicGluZ1wiLGFwcElkOmUuYXBwSWQsY25hbWU6ZS5jbmFtZSx1aWQ6ZS51aWQrXCJcIixzaWQ6ZS5zaWQsdHM6K25ldyBEYXRlLHJlcXVlc3RJZDowfSl9LDNlMyl9LHQucHJvdG90eXBlLl9jbGVhckhlYXJ0QmVhdENoZWNrPWZ1bmN0aW9uKCl7d2luZG93LmNsZWFySW50ZXJ2YWwodGhpcy5faGVhcnRCZWF0VGltZXIpfSx0fShjLmRlZmF1bHQpLHk9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSx0LG4pe3ZvaWQgMD09PWUmJihlPVwiXCIpLHRoaXMuY29kZT1uLHRoaXMuZGF0YT10LHRoaXMubWVzc2FnZT1lfX0oKTt0LkNoYW5uZWxNZWRpYUVycm9yPXksZnVuY3Rpb24oZSl7ZS5DT05ORUNUX0ZBSUxFRD1cImNvbm5lY3QgZmFpbGVkXCIsZS5DT05ORUNUX1RJTUVPVVQ9XCJjb25uZWN0IHRpbWVvdXRcIixlLldTX0RJU0NPTk5FQ1RFRD1cIndlYnNvY2tldCBkaXNjb25uZWN0ZWRcIixlLlJFUVVFU1RfVElNRU9VVD1cInJlcXVlc3QgdGltZW91dFwiLGUuUkVRVUVTVF9GQUlMRUQ9XCJyZXF1ZXN0IGZhaWxlZFwiLGUuV0FJVF9TVEFUVVNfVElNRU9VVD1cIndhaXQgc3RhdHVzIHRpbWVvdXRcIixlLldBSVRfU1RBVFVTX0VSUk9SPVwid2FpdCBzdGF0dXMgZXJyb3JcIixlLkJBRF9TVEFURT1cImJhZCBzdGF0ZVwiLGUuV1NfQUJPUlQ9XCJ3cyBhYm9ydFwiLGUuQVBfUkVRVUVTVF9USU1FT1VUPVwiQVAgcmVxdWVzdCB0aW1lb3V0XCIsZS5BUF9KU09OX1BBUlNFX0VSUk9SPVwiQVAganNvbiBwYXJzZSBlcnJvclwiLGUuQVBfUkVRVUVTVF9FUlJPUj1cIkFQIHJlcXVlc3QgZXJyb3JcIixlLkFQX1JFUVVFU1RfQUJPUlQ9XCJBUCByZXF1ZXN0IGFib3J0XCJ9KHY9dC5DSEFOTkVMX01FRElBX0VSUk9SfHwodC5DSEFOTkVMX01FRElBX0VSUk9SPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlNldFNka1Byb2ZpbGU9MF09XCJTZXRTZGtQcm9maWxlXCIsZVtlLlNldFNvdXJjZUNoYW5uZWw9MV09XCJTZXRTb3VyY2VDaGFubmVsXCIsZVtlLlNldFNvdXJjZVVzZXJJZD0yXT1cIlNldFNvdXJjZVVzZXJJZFwiLGVbZS5TZXREZXN0Q2hhbm5lbD0zXT1cIlNldERlc3RDaGFubmVsXCIsZVtlLlN0YXJ0UGFja2V0VHJhbnNmZXI9NF09XCJTdGFydFBhY2tldFRyYW5zZmVyXCIsZVtlLlN0b3BQYWNrZXRUcmFuc2Zlcj01XT1cIlN0b3BQYWNrZXRUcmFuc2ZlclwiLGVbZS5VcGRhdGVEZXN0Q2hhbm5lbD02XT1cIlVwZGF0ZURlc3RDaGFubmVsXCIsZVtlLlJlY29ubmVjdD03XT1cIlJlY29ubmVjdFwiLGVbZS5TZXRWaWRlb1Byb2ZpbGU9OF09XCJTZXRWaWRlb1Byb2ZpbGVcIn0oaHx8KGg9e30pKSxmdW5jdGlvbihlKXtlW2UuTkVUV09SS19ESVNDT05ORUNURUQ9MF09XCJORVRXT1JLX0RJU0NPTk5FQ1RFRFwiLGVbZS5ORVRXT1JLX0NPTk5FQ1RFRD0xXT1cIk5FVFdPUktfQ09OTkVDVEVEXCIsZVtlLlBBQ0tFVF9KT0lORURfU1JDX0NIQU5ORUw9Ml09XCJQQUNLRVRfSk9JTkVEX1NSQ19DSEFOTkVMXCIsZVtlLlBBQ0tFVF9KT0lORURfREVTVF9DSEFOTkVMPTNdPVwiUEFDS0VUX0pPSU5FRF9ERVNUX0NIQU5ORUxcIixlW2UuUEFDS0VUX1NFTlRfVE9fREVTVF9DSEFOTkVMPTRdPVwiUEFDS0VUX1NFTlRfVE9fREVTVF9DSEFOTkVMXCIsZVtlLlBBQ0tFVF9SRUNFSVZFRF9WSURFT19GUk9NX1NSQz01XT1cIlBBQ0tFVF9SRUNFSVZFRF9WSURFT19GUk9NX1NSQ1wiLGVbZS5QQUNLRVRfUkVDRUlWRURfQVVESU9fRlJPTV9TUkM9Nl09XCJQQUNLRVRfUkVDRUlWRURfQVVESU9fRlJPTV9TUkNcIixlW2UuUEFDS0VUX1VQREFURV9ERVNUX0NIQU5ORUw9N109XCJQQUNLRVRfVVBEQVRFX0RFU1RfQ0hBTk5FTFwiLGVbZS5QQUNLRVRfVVBEQVRFX0RFU1RfQ0hBTk5FTF9SRUZVU0VEPThdPVwiUEFDS0VUX1VQREFURV9ERVNUX0NIQU5ORUxfUkVGVVNFRFwiLGVbZS5QQUNLRVRfVVBEQVRFX0RFU1RfQ0hBTk5FTF9OT1RfQ0hBTkdFPTldPVwiUEFDS0VUX1VQREFURV9ERVNUX0NIQU5ORUxfTk9UX0NIQU5HRVwifShTPXQuQ0hBTk5FTF9NRURJQV9SRUxBWV9FVkVOVHx8KHQuQ0hBTk5FTF9NRURJQV9SRUxBWV9FVkVOVD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5SRUxBWV9TVEFURV9JRExFPTBdPVwiUkVMQVlfU1RBVEVfSURMRVwiLGVbZS5SRUxBWV9TVEFURV9DT05ORUNUSU5HPTFdPVwiUkVMQVlfU1RBVEVfQ09OTkVDVElOR1wiLGVbZS5SRUxBWV9TVEFURV9SVU5OSU5HPTJdPVwiUkVMQVlfU1RBVEVfUlVOTklOR1wiLGVbZS5SRUxBWV9TVEFURV9GQUlMVVJFPTNdPVwiUkVMQVlfU1RBVEVfRkFJTFVSRVwifShfPXQuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURXx8KHQuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURT17fSkpLGZ1bmN0aW9uKGUpe2VbZS5SRUxBWV9PSz0wXT1cIlJFTEFZX09LXCIsZVtlLlNFUlZFUl9FUlJPUl9SRVNQT05TRT0xXT1cIlNFUlZFUl9FUlJPUl9SRVNQT05TRVwiLGVbZS5TRVJWRVJfTk9fUkVTUE9OU0U9Ml09XCJTRVJWRVJfTk9fUkVTUE9OU0VcIixlW2UuTk9fUkVTT1VSQ0VfQVZBSUxBQkxFPTNdPVwiTk9fUkVTT1VSQ0VfQVZBSUxBQkxFXCIsZVtlLkZBSUxFRF9KT0lOX1NSQz00XT1cIkZBSUxFRF9KT0lOX1NSQ1wiLGVbZS5GQUlMRURfSk9JTl9ERVNUPTVdPVwiRkFJTEVEX0pPSU5fREVTVFwiLGVbZS5GQUlMRURfUEFDS0VUX1JFQ0VJVkVEX0ZST01fU1JDPTZdPVwiRkFJTEVEX1BBQ0tFVF9SRUNFSVZFRF9GUk9NX1NSQ1wiLGVbZS5GQUlMRURfUEFDS0VUX1NFTlRfVE9fREVTVD03XT1cIkZBSUxFRF9QQUNLRVRfU0VOVF9UT19ERVNUXCIsZVtlLlNFUlZFUl9DT05ORUNUSU9OX0xPU1Q9OF09XCJTRVJWRVJfQ09OTkVDVElPTl9MT1NUXCIsZVtlLklOVEVSTkFMX0VSUk9SPTldPVwiSU5URVJOQUxfRVJST1JcIixlW2UuU1JDX1RPS0VOX0VYUElSRUQ9MTBdPVwiU1JDX1RPS0VOX0VYUElSRURcIixlW2UuREVTVF9UT0tFTl9FWFBJUkVEPTExXT1cIkRFU1RfVE9LRU5fRVhQSVJFRFwiLGVbZS5SRUxBWV9BTFJFQURZX1NUQVJUPTEyXT1cIlJFTEFZX0FMUkVBRFlfU1RBUlRcIixlW2UuUkVMQVlfTk9UX1NUQVJUPTEzXT1cIlJFTEFZX05PVF9TVEFSVFwiLGVbZS5PUEVSQVRJT05fQUJPUlQ9MTRdPVwiT1BFUkFUSU9OX0FCT1JUXCJ9KEU9dC5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SfHwodC5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SPXt9KSl9LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlKXtyZXR1cm4obj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PXR5cGVvZiBTeW1ib2wuaXRlcmF0b3I/ZnVuY3Rpb24oZSl7cmV0dXJuIHR5cGVvZiBlfTpmdW5jdGlvbihlKXtyZXR1cm4gZSYmXCJmdW5jdGlvblwiPT10eXBlb2YgU3ltYm9sJiZlLmNvbnN0cnVjdG9yPT09U3ltYm9sJiZlIT09U3ltYm9sLnByb3RvdHlwZT9cInN5bWJvbFwiOnR5cGVvZiBlfSkoZSl9ZnVuY3Rpb24gaSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJlwic3ltYm9sXCI9PT1uKFN5bWJvbC5pdGVyYXRvcik/ZS5leHBvcnRzPWk9ZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSl9OmUuZXhwb3J0cz1pPWZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6bihlKX0saSh0KX1lLmV4cG9ydHM9aX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KSxuLmQodCxcInBvc3RcIixmdW5jdGlvbigpe3JldHVybiB1fSksbi5kKHQsXCJzaG91bGRVc2VIdHRwc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGx9KSxuLmQodCxcImdldEhUVFBTZW5kQnl0ZXNcIixmdW5jdGlvbigpe3JldHVybiBzfSksbi5kKHQsXCJnZXRIVFRQUmVjdkJ5dGVzXCIsZnVuY3Rpb24oKXtyZXR1cm4gY30pLG4uZCh0LFwicmVzZXRIVFRQQnlldHNDb3VudFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGR9KTt2YXIgaT1uKDMpLGE9bigxMCkscj0wLG89MCxzPWZ1bmN0aW9uKCl7cmV0dXJuIHJ9LGM9ZnVuY3Rpb24oKXtyZXR1cm4gb30sZD1mdW5jdGlvbigpe3I9MCxvPTB9LHU9ZnVuY3Rpb24oZSx0LG4scyxjKXt2YXIgZD1uZXcgWE1MSHR0cFJlcXVlc3Q7aWYoZC50aW1lb3V0PXQudGltZW91dHx8T2JqZWN0KGkuZ2V0UGFyYW1ldGVyKShcIkhUVFBfQ09OTkVDVF9USU1FT1VUXCIpLGQub3BlbihcIlBPU1RcIixlLCEwKSxkLnNldFJlcXVlc3RIZWFkZXIoXCJDb250ZW50LXR5cGVcIixcImFwcGxpY2F0aW9uL2pzb247IGNoYXJzZXQ9dXRmLThcIiksYylmb3IodmFyIHUgaW4gYylcIndpdGhDcmVkZW50aWFsc1wiPT11P2Qud2l0aENyZWRlbnRpYWxzPSEwOmQuc2V0UmVxdWVzdEhlYWRlcih1LGNbdV0pO2Qub25sb2FkPWZ1bmN0aW9uKGUpe28rPU9iamVjdChhLmxlbmd0aEluVXRmOEJ5dGVzKShkLnJlc3BvbnNlVGV4dCksbiYmbihkLnJlc3BvbnNlVGV4dCl9LGQub25lcnJvcj1mdW5jdGlvbih0KXtzJiZzKHQsZSl9LGQub250aW1lb3V0PWZ1bmN0aW9uKHQpe3MmJnModCxlKX07dmFyIGw9SlNPTi5zdHJpbmdpZnkodCk7cis9T2JqZWN0KGEubGVuZ3RoSW5VdGY4Qnl0ZXMpKGwpLGQuc2VuZChsKX0sbD1mdW5jdGlvbigpe3JldHVyblwiaHR0cHM6XCI9PWRvY3VtZW50LmxvY2F0aW9uLnByb3RvY29sfX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KSxuLmQodCxcImlzTGl2ZVRyYW5zY29kaW5nVmFsaWRcIixmdW5jdGlvbigpe3JldHVybiB2fSksbi5kKHQsXCJnZW5lcmF0ZVNlc3Npb25JZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KSxuLmQodCxcImF1ZGlvTGV2ZWxIZWxwZXJcIixmdW5jdGlvbigpe3JldHVybiBwfSksbi5kKHQsXCJ2c1Jlc0hhY2tcIixmdW5jdGlvbigpe3JldHVybiBtfSksbi5kKHQsXCJpczMyVWludFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGd9KSxuLmQodCxcInNhZmVDYWxsXCIsZnVuY3Rpb24oKXtyZXR1cm4gbH0pLG4uZCh0LFwicmFuZG9tXCIsZnVuY3Rpb24oKXtyZXR1cm4gU30pLG4uZCh0LFwicG9wQmFuVGlwXCIsZnVuY3Rpb24oKXtyZXR1cm4gRX0pLG4uZCh0LFwibGVuZ3RoSW5VdGY4Qnl0ZXNcIixmdW5jdGlvbigpe3JldHVybiBffSk7dmFyIGk9big4KSxhPW4ubihpKSxyPW4oNCksbz1uKDApLHM9bigxNSksYz1uLm4ocyksZD1uKDE0KSx1PW4oMTIpLGw9ZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHNbMF07aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZSl7dmFyIHQ9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO2UuYXBwbHkobnVsbCx0KX19LHA9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYXVkaW9Db250ZXh0PU9iamVjdChkLmEpKCksdGhpcy5zb3VyY2VOb2RlPWUub3RXZWJraXRBdWRpb1NvdXJjZXx8dGhpcy5hdWRpb0NvbnRleHQuY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UoZSksdGhpcy5hbmFseXNlcj10aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVBbmFseXNlcigpLHRoaXMudGltZURvbWFpbkRhdGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5hbmFseXNlci5mcmVxdWVuY3lCaW5Db3VudCksdGhpcy5zb3VyY2VOb2RlLmNvbm5lY3QodGhpcy5hbmFseXNlciksdGhpcy5nZXRBdWRpb0xldmVsPWZ1bmN0aW9uKCl7aWYodGhpcy5hbmFseXNlcil7dGhpcy5hbmFseXNlci5nZXRCeXRlVGltZURvbWFpbkRhdGEodGhpcy50aW1lRG9tYWluRGF0YSk7Zm9yKHZhciBlPTAsdD0wO3Q8dGhpcy50aW1lRG9tYWluRGF0YS5sZW5ndGg7dCsrKWU9TWF0aC5tYXgoZSxNYXRoLmFicyh0aGlzLnRpbWVEb21haW5EYXRhW3RdLTEyOCkpO3JldHVybiBlLzEyOH1yZXR1cm4gby5kZWZhdWx0Lndhcm5pbmcoXCJjYW4ndCBmaW5kIGFuYWx5c2VyIGluIGF1ZGlvTGV2ZWxIZWxwZXJcIiksMH0sdGhpc307ZnVuY3Rpb24gZigpe3JldHVybiBjKCkoKS5yZXBsYWNlKC8tL2csXCJcIikudG9VcHBlckNhc2UoKX12YXIgbT1mdW5jdGlvbihlLHQsbil7dHJ5e28uZGVmYXVsdC5kZWJ1ZyhcInN0YXJ0IHZzUmVzSGFja1wiLGUpO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKTtpLnNldEF0dHJpYnV0ZShcImF1dG9wbGF5XCIsXCJcIiksaS5zZXRBdHRyaWJ1dGUoXCJtdXRlZFwiLFwiXCIpLGkubXV0ZWQ9ITAsaS5zZXRBdHRyaWJ1dGUoXCJwbGF5c2lubGluZVwiLFwiXCIpLGkuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcInBvc2l0aW9uOiBhYnNvbHV0ZTsgdG9wOiAwOyBsZWZ0OiAwOyB3aWR0aDoxcHg7IGhpZ2g6MXB4O1wiKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGkpLGkuYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIixmdW5jdGlvbihuKXtyLmlzRmlyZUZveCgpP2kudmlkZW9XaWR0aCYmKG8uZGVmYXVsdC5kZWJ1ZyhcIlt2c1Jlc0hhY2tdIGdldCBzdHJlYW0gcmVzb2x1dGlvbjogXCIsXCJcIi5jb25jYXQoaS52aWRlb1dpZHRoLFwiIHggXCIpLmNvbmNhdChpLnZpZGVvSGVpZ2h0KSxlKSx0KGkudmlkZW9XaWR0aCxpLnZpZGVvSGVpZ2h0KSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGkpKTooby5kZWZhdWx0LmRlYnVnKFwiW3ZzUmVzSGFja10gZ2V0IHN0cmVhbSByZXNvbHV0aW9uOiBcIixcIlwiLmNvbmNhdChpLnZpZGVvV2lkdGgsXCIgeCBcIikuY29uY2F0KGkudmlkZW9IZWlnaHQpLGUpLHQoaS52aWRlb1dpZHRoLGkudmlkZW9IZWlnaHQpLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaSkpfSksT2JqZWN0KHUuc2V0U3JjT2JqZWN0KShpLGUpfWNhdGNoKGUpe24oZSl9fSxnPWZ1bmN0aW9uKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlJiYwPD1lJiZlPD00Mjk0OTY3Mjk1fSx2PWZ1bmN0aW9uKGUpe3ZhciB0PVtcImxvd0xhdGVuY3lcIixcInVzZXJDb25maWdFeHRyYUluZm9cIixcInRyYW5zY29kaW5nVXNlcnNcIl07Zm9yKHZhciBuIGluIGUpaWYoXCJsb3dMYXRlbmN5XCI9PT1uJiZcImJvb2xlYW5cIiE9dHlwZW9mIGVbbl18fFwidXNlckNvbmZpZ0V4dHJhSW5mb1wiPT09biYmXCJvYmplY3RcIiE9PWEoKShlW25dKXx8XCJ0cmFuc2NvZGluZ1VzZXJzXCI9PT1uJiYhaChlW25dKXx8IX50LmluZGV4T2YobikmJlwibnVtYmVyXCIhPXR5cGVvZiBlW25dKXRocm93IG5ldyBFcnJvcihcIlBhcmFtIFtcIituK1wiXSBpcyBpblZhbGlkXCIpO3JldHVybiEwfSxoPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKWZvcih2YXIgbiBpbiBlW3RdKWlmKFwibnVtYmVyXCIhPXR5cGVvZiBlW3RdW25dKXRocm93IG5ldyBFcnJvcihcIlBhcmFtIHVzZXJbXCIrdCtcIl0gLSBbXCIrbitcIl0gaXMgaW5WYWxpZFwiKTtyZXR1cm4hMH0sUz1mdW5jdGlvbihlKXtpc05hTihlKSYmKGU9MWUzKTt2YXIgdD0rbmV3IERhdGUsbj0odD0oOTMwMSp0KzQ5Mjk3KSUyMzMyODApLzIzMzI4MDtyZXR1cm4gTWF0aC5jZWlsKG4qZSl9LF89ZnVuY3Rpb24oZSl7dmFyIHQ9ZW5jb2RlVVJJQ29tcG9uZW50KGUpLm1hdGNoKC8lWzg5QUJhYl0vZyk7cmV0dXJuIGUubGVuZ3RoKyh0P3QubGVuZ3RoOjApfSxFPWZ1bmN0aW9uKCl7aWYoIWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWdvcmEtYmFuLXRpcFwiKSl7dmFyIGU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtlLmlkPVwiYWdvcmEtYmFuLXRpcFwiLGUuc3R5bGU9XCJwb3NpdGlvbjogYWJzb2x1dGU7IHdpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IGRpc3BsYXk6IGZsZXg7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyOyBjb2xvcjogI2ZmZjtcIixkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYm9keVwiKS5wcmVwZW5kKGUpO3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7dC5zdHlsZT1cImJhY2tncm91bmQ6ICMwMDA7IHdpZHRoOiAzNDZweDsgaGVpZ2h0OiAxMTZweDsgei1pbmRleDogMTAwMDAwOyBvcGFjaXR5OiAwLjY7IGJvcmRlci1yYWRpdXM6IDEwcHg7IGJveC1zaGFkb3c6IDAgMnB4IDRweCAjMDAwO1wiLGUuYXBwZW5kKHQpO3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5zdHlsZT1cImhlaWdodDogNzZweDsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCI7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNwYW5cIik7aS5zdHlsZT1cImhlaWdodDogMjhweDsgd2lkdGg6IDI4cHg7IGNvbG9yOiAjMDAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7IGxpbmUtaGVpZ2h0OiAzMHB4OyBiYWNrZ3JvdW5kOiAjZmZmOyBib3JkZXItcmFkaXVzOiA1MCU7IGZvbnQtd2VpZ2h0OiA2MDA7IGZvbnQtc2l6ZTogMjBweDttYXJnaW4tcmlnaHQ6IDVweDtcIixpLmlubmVyVGV4dD1cIiFcIjt2YXIgYT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTthLmlubmVyVGV4dD1cIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHdlYlJUQ1wiLG4uYXBwZW5kKGkpLG4uYXBwZW5kKGEpO3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7ci5zdHlsZT1cImhlaWdodDogMzhweDsgZGlzcGxheTogZmxleDsgYm9yZGVyLXRvcDogI2ZmZiAxcHggc29saWQ7IGp1c3RpZnktY29udGVudDogY2VudGVyOyBhbGlnbi1pdGVtczogY2VudGVyO1wiLHIuaW5uZXJUZXh0PVwiT0tcIix0LmFwcGVuZChuKSx0LmFwcGVuZChyKSxyLm9uY2xpY2s9ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImFnb3JhLWJhbi10aXBcIik7ZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpfX19fSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oZSx0LG4saSxhLHIsbyl7dHJ5e3ZhciBzPWVbcl0obyksYz1zLnZhbHVlfWNhdGNoKGUpe3JldHVybiB2b2lkIG4oZSl9cy5kb25lP3QoYyk6UHJvbWlzZS5yZXNvbHZlKGMpLnRoZW4oaSxhKX1lLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGhpcyxpPWFyZ3VtZW50cztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYSxyKXt2YXIgbz1lLmFwcGx5KHQsaSk7ZnVuY3Rpb24gcyhlKXtuKG8sYSxyLHMsYyxcIm5leHRcIixlKX1mdW5jdGlvbiBjKGUpe24obyxhLHIscyxjLFwidGhyb3dcIixlKX1zKHZvaWQgMCl9KX19fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpLG4uZCh0LFwiUlRDUGVlckNvbm5lY3Rpb25cIixmdW5jdGlvbigpe3JldHVybiBUfSksbi5kKHQsXCJnZXRVc2VyTWVkaWFcIixmdW5jdGlvbigpe3JldHVybiBvfSksbi5kKHQsXCJhdHRhY2hNZWRpYVN0cmVhbVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSxuLmQodCxcInJlYXR0YWNoTWVkaWFTdHJlYW1cIixmdW5jdGlvbigpe3JldHVybiBjfSksbi5kKHQsXCJzZXRTcmNPYmplY3RcIixmdW5jdGlvbigpe3JldHVybiBmfSksbi5kKHQsXCJnZXRTcmNPYmplY3RcIixmdW5jdGlvbigpe3JldHVybiBtfSksbi5kKHQsXCJ3ZWJydGNEZXRlY3RlZEJyb3dzZXJcIixmdW5jdGlvbigpe3JldHVybiBkfSksbi5kKHQsXCJ3ZWJydGNEZXRlY3RlZFZlcnNpb25cIixmdW5jdGlvbigpe3JldHVybiB1fSksbi5kKHQsXCJ3ZWJydGNNaW5pbXVtVmVyc2lvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIGx9KSxuLmQodCxcIndlYnJ0Y1Rlc3RpbmdcIixmdW5jdGlvbigpe3JldHVybiBifSksbi5kKHQsXCJ3ZWJydGNVdGlsc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGh9KTt2YXIgaT1uKDgpLGE9bi5uKGkpLHI9big0KSxvPW51bGwscz1udWxsLGM9bnVsbCxkPW51bGwsdT1udWxsLGw9bnVsbCxwPW51bGwsZj1udWxsLG09bnVsbCxnPW51bGwsdj17YWRkU3RyZWFtOm51bGx9LGg9e2xvZzpmdW5jdGlvbigpe30sZXh0cmFjdFZlcnNpb246ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWUubWF0Y2godCk7cmV0dXJuIGkmJmkubGVuZ3RoPj1uJiZwYXJzZUludChpW25dKX19O2lmKFwib2JqZWN0XCI9PShcInVuZGVmaW5lZFwiPT10eXBlb2Ygd2luZG93P1widW5kZWZpbmVkXCI6YSgpKHdpbmRvdykpPyghd2luZG93LkhUTUxNZWRpYUVsZW1lbnR8fFwic3JjT2JqZWN0XCJpbiB3aW5kb3cuSFRNTE1lZGlhRWxlbWVudC5wcm90b3R5cGU/KGY9ZnVuY3Rpb24oZSx0KXtlLnNyY09iamVjdD10fSxtPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNyY09iamVjdH0pOihmPWZ1bmN0aW9uKGUsdCl7XCJtb3pTcmNPYmplY3RcImluIGU/ZS5tb3pTcmNPYmplY3Q9dDooZS5fc3JjT2JqZWN0PXQsZS5zcmM9dD9VUkwuY3JlYXRlT2JqZWN0VVJMKHQpOm51bGwpfSxtPWZ1bmN0aW9uKGUpe3JldHVyblwibW96U3JjT2JqZWN0XCJpbiBlP2UubW96U3JjT2JqZWN0OmUuX3NyY09iamVjdH0pLG89d2luZG93Lm5hdmlnYXRvciYmd2luZG93Lm5hdmlnYXRvci5nZXRVc2VyTWVkaWEpOihmPWZ1bmN0aW9uKGUsdCl7ZS5zcmNPYmplY3Q9dH0sbT1mdW5jdGlvbihlKXtyZXR1cm4gZS5zcmNPYmplY3R9KSxzPWZ1bmN0aW9uKGUsdCl7ZihlLHQpfSxjPWZ1bmN0aW9uKGUsdCl7ZihlLG0odCkpfSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubmF2aWdhdG9yKWlmKG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEmJndpbmRvdy5tb3pSVENQZWVyQ29ubmVjdGlvbil7Zm9yKHZhciBTIGluIGgubG9nKFwiVGhpcyBhcHBlYXJzIHRvIGJlIEZpcmVmb3hcIiksZD1cImZpcmVmb3hcIix1PWguZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwvRmlyZWZveFxcLyhbMC05XSspXFwuLywxKSxsPTMxLGc9bW96UlRDUGVlckNvbm5lY3Rpb24sdil2W1NdPWcucHJvdG90eXBlW1NdO2lmKHA9ZnVuY3Rpb24oZSx0KXtpZih1PDM4JiZlJiZlLmljZVNlcnZlcnMpe2Zvcih2YXIgbj1bXSxpPTA7aTxlLmljZVNlcnZlcnMubGVuZ3RoO2krKyl7dmFyIGE9ZS5pY2VTZXJ2ZXJzW2ldO2lmKGEuaGFzT3duUHJvcGVydHkoXCJ1cmxzXCIpKWZvcih2YXIgcj0wO3I8YS51cmxzLmxlbmd0aDtyKyspe3ZhciBvPXt1cmw6YS51cmxzW3JdfTswPT09YS51cmxzW3JdLmluZGV4T2YoXCJ0dXJuXCIpJiYoby51c2VybmFtZT1hLnVzZXJuYW1lLG8uY3JlZGVudGlhbD1hLmNyZWRlbnRpYWwpLG4ucHVzaChvKX1lbHNlIG4ucHVzaChlLmljZVNlcnZlcnNbaV0pfWUuaWNlU2VydmVycz1ufXZhciBzPW5ldyBnKGUsdCk7Zm9yKHZhciBjIGluIHYpc1tjXT12W2NdO3JldHVybiBzfSx3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9ufHwod2luZG93LlJUQ1Nlc3Npb25EZXNjcmlwdGlvbj1tb3pSVENTZXNzaW9uRGVzY3JpcHRpb24pLHdpbmRvdy5SVENJY2VDYW5kaWRhdGV8fCh3aW5kb3cuUlRDSWNlQ2FuZGlkYXRlPW1velJUQ0ljZUNhbmRpZGF0ZSksbz1mdW5jdGlvbihlLHQsbil7dmFyIGk9ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIiE9PWEoKShlKXx8ZS5yZXF1aXJlKXJldHVybiBlO3ZhciB0PVtdO3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKFwicmVxdWlyZVwiIT09biYmXCJhZHZhbmNlZFwiIT09biYmXCJtZWRpYVNvdXJjZVwiIT09bil7dmFyIGk9ZVtuXT1cIm9iamVjdFwiPT09YSgpKGVbbl0pP2Vbbl06e2lkZWFsOmVbbl19O2lmKHZvaWQgMD09PWkubWluJiZ2b2lkIDA9PT1pLm1heCYmdm9pZCAwPT09aS5leGFjdHx8dC5wdXNoKG4pLHZvaWQgMCE9PWkuZXhhY3QmJihcIm51bWJlclwiPT10eXBlb2YgaS5leGFjdD9pLm1pbj1pLm1heD1pLmV4YWN0OmVbbl09aS5leGFjdCxkZWxldGUgaS5leGFjdCksdm9pZCAwIT09aS5pZGVhbCl7ZS5hZHZhbmNlZD1lLmFkdmFuY2VkfHxbXTt2YXIgcj17fTtcIm51bWJlclwiPT10eXBlb2YgaS5pZGVhbD9yW25dPXttaW46aS5pZGVhbCxtYXg6aS5pZGVhbH06cltuXT1pLmlkZWFsLGUuYWR2YW5jZWQucHVzaChyKSxkZWxldGUgaS5pZGVhbCxPYmplY3Qua2V5cyhpKS5sZW5ndGh8fGRlbGV0ZSBlW25dfX19KSx0Lmxlbmd0aCYmKGUucmVxdWlyZT10KSxlfTtyZXR1cm4gdTwzOCYmKGgubG9nKFwic3BlYzogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGUuYXVkaW8mJihlLmF1ZGlvPWkoZS5hdWRpbykpLGUudmlkZW8mJihlLnZpZGVvPWkoZS52aWRlbykpLGgubG9nKFwiZmYzNzogXCIrSlNPTi5zdHJpbmdpZnkoZSkpKSxuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhKGUsdCxuKX0sbmF2aWdhdG9yLmdldFVzZXJNZWRpYT1vLG5hdmlnYXRvci5tZWRpYURldmljZXN8fChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzPXtnZXRVc2VyTWVkaWE6eSxhZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKCl7fX0pLG5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcz1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXN8fGZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe2UoW3traW5kOlwiYXVkaW9pbnB1dFwiLGRldmljZUlkOlwiZGVmYXVsdFwiLGxhYmVsOlwiXCIsZ3JvdXBJZDpcIlwifSx7a2luZDpcInZpZGVvaW5wdXRcIixkZXZpY2VJZDpcImRlZmF1bHRcIixsYWJlbDpcIlwiLGdyb3VwSWQ6XCJcIn1dKX0pfSx1PDQxKXt2YXIgXz1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXMuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmVudW1lcmF0ZURldmljZXM9ZnVuY3Rpb24oKXtyZXR1cm4gXygpLnRoZW4odm9pZCAwLGZ1bmN0aW9uKGUpe2lmKFwiTm90Rm91bmRFcnJvclwiPT09ZS5uYW1lKXJldHVybltdO3Rocm93IGV9KX19fWVsc2UgaWYobmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSYmd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uKXtmb3IodmFyIFMgaW4gaC5sb2coXCJUaGlzIGFwcGVhcnMgdG8gYmUgQ2hyb21lXCIpLGQ9XCJjaHJvbWVcIix1PWguZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwvQ2hyb20oZXxpdW0pXFwvKFswLTldKylcXC4vLDIpLGw9MzgsZz13ZWJraXRSVENQZWVyQ29ubmVjdGlvbix2KXZbU109Zy5wcm90b3R5cGVbU107cD1mdW5jdGlvbihlLHQpe2UmJmUuaWNlVHJhbnNwb3J0UG9saWN5JiYoZS5pY2VUcmFuc3BvcnRzPWUuaWNlVHJhbnNwb3J0UG9saWN5KTt2YXIgbj1uZXcgZyhlLHQpO2Zvcih2YXIgaSBpbiB2KW5baV09dltpXTt2YXIgYT1uLmdldFN0YXRzLmJpbmQobik7cmV0dXJuIG4uZ2V0U3RhdHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWFyZ3VtZW50cztpLmxlbmd0aD4wJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiYodD8obj10LHQ9ZSxpPVtlPW51bGwsdCxuXSk6KHQ9ZSxpPVtlPW51bGwsdF0pKTtpZihpLmxlbmd0aD49Mil7cmV0dXJuIGEuYXBwbHkodGhpcyxbZnVuY3Rpb24oZSl7aVsxXShmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gZS5yZXN1bHQoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPXtpZDplLmlkLHRpbWVzdGFtcDplLnRpbWVzdGFtcCx0eXBlOmUudHlwZX07ZS5uYW1lcygpLmZvckVhY2goZnVuY3Rpb24odCl7blt0XT1lLnN0YXQodCl9KSx0W24uaWRdPW59KSx0fShlKSl9LGlbMF1dKX1yZXR1cm4gYSgpfSxufSxbXCJjcmVhdGVPZmZlclwiLFwiY3JlYXRlQW5zd2VyXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9d2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdO3dlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPXRoaXM7aWYoYXJndW1lbnRzLmxlbmd0aDwxfHwxPT09YXJndW1lbnRzLmxlbmd0aCYmXCJvYmplY3RcIj09PWEoKShhcmd1bWVudHNbMF0pKXt2YXIgbj0xPT09YXJndW1lbnRzLmxlbmd0aD9hcmd1bWVudHNbMF06dm9pZCAwO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihpLGEpe3QuYXBwbHkoZSxbaSxhLG5dKX0pfXJldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KSxbXCJzZXRMb2NhbERlc2NyaXB0aW9uXCIsXCJzZXRSZW1vdGVEZXNjcmlwdGlvblwiLFwiYWRkSWNlQ2FuZGlkYXRlXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9d2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdO3dlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50cyxuPXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGksYSl7dC5hcHBseShuLFtlWzBdLGZ1bmN0aW9uKCl7aSgpLGUubGVuZ3RoPj0yJiZlWzFdLmFwcGx5KG51bGwsW10pfSxmdW5jdGlvbih0KXthKHQpLGUubGVuZ3RoPj0zJiZlWzJdLmFwcGx5KG51bGwsW3RdKX1dKX0pfX0pO3ZhciBFPWZ1bmN0aW9uKGUpe2lmKFwib2JqZWN0XCIhPT1hKCkoZSl8fGUubWFuZGF0b3J5fHxlLm9wdGlvbmFsKXJldHVybiBlO3ZhciB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKFwicmVxdWlyZVwiIT09biYmXCJhZHZhbmNlZFwiIT09biYmXCJtZWRpYVNvdXJjZVwiIT09bil7dmFyIGk9XCJvYmplY3RcIj09PWEoKShlW25dKT9lW25dOntpZGVhbDplW25dfTt2b2lkIDAhPT1pLmV4YWN0JiZcIm51bWJlclwiPT10eXBlb2YgaS5leGFjdCYmKGkubWluPWkubWF4PWkuZXhhY3QpO3ZhciByPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/ZSt0LmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpK3Quc2xpY2UoMSk6XCJkZXZpY2VJZFwiPT09dD9cInNvdXJjZUlkXCI6dH07aWYodm9pZCAwIT09aS5pZGVhbCl7dC5vcHRpb25hbD10Lm9wdGlvbmFsfHxbXTt2YXIgbz17fTtcIm51bWJlclwiPT10eXBlb2YgaS5pZGVhbD8ob1tyKFwibWluXCIsbildPWkuaWRlYWwsdC5vcHRpb25hbC5wdXNoKG8pLChvPXt9KVtyKFwibWF4XCIsbildPWkuaWRlYWwsdC5vcHRpb25hbC5wdXNoKG8pKToob1tyKFwiXCIsbildPWkuaWRlYWwsdC5vcHRpb25hbC5wdXNoKG8pKX12b2lkIDAhPT1pLmV4YWN0JiZcIm51bWJlclwiIT10eXBlb2YgaS5leGFjdD8odC5tYW5kYXRvcnk9dC5tYW5kYXRvcnl8fHt9LHQubWFuZGF0b3J5W3IoXCJcIixuKV09aS5leGFjdCk6W1wibWluXCIsXCJtYXhcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2b2lkIDAhPT1pW2VdJiYodC5tYW5kYXRvcnk9dC5tYW5kYXRvcnl8fHt9LHQubWFuZGF0b3J5W3IoZSxuKV09aVtlXSl9KX19KSxlLmFkdmFuY2VkJiYodC5vcHRpb25hbD0odC5vcHRpb25hbHx8W10pLmNvbmNhdChlLmFkdmFuY2VkKSksdH07aWYobz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIGUuYXVkaW8mJihlLmF1ZGlvPUUoZS5hdWRpbykpLGUudmlkZW8mJihlLnZpZGVvPUUoZS52aWRlbykpLGgubG9nKFwiY2hyb21lOiBcIitKU09OLnN0cmluZ2lmeShlKSksbmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYShlLHQsbil9LG5hdmlnYXRvci5nZXRVc2VyTWVkaWE9byxuYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHwobmF2aWdhdG9yLm1lZGlhRGV2aWNlcz17Z2V0VXNlck1lZGlhOnksZW51bWVyYXRlRGV2aWNlczpmdW5jdGlvbigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt2YXIgdD17YXVkaW86XCJhdWRpb2lucHV0XCIsdmlkZW86XCJ2aWRlb2lucHV0XCJ9O3JldHVybiBNZWRpYVN0cmVhbVRyYWNrLmdldFNvdXJjZXMoZnVuY3Rpb24obil7ZShuLm1hcChmdW5jdGlvbihlKXtyZXR1cm57bGFiZWw6ZS5sYWJlbCxraW5kOnRbZS5raW5kXSxkZXZpY2VJZDplLmlkLGdyb3VwSWQ6XCJcIn19KSl9KX0pfX0pLG5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhKXtpZihOdW1iZXIoT2JqZWN0KHIuZ2V0QnJvd3NlclZlcnNpb24pKCkuc3BsaXQoXCIuXCIpWzBdKTw0Nil7dmFyIEk9bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEuYmluZChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzKTtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4gaC5sb2coXCJzcGVjOiAgIFwiK0pTT04uc3RyaW5naWZ5KGUpKSxlLmF1ZGlvPUUoZS5hdWRpbyksZS52aWRlbz1FKGUudmlkZW8pLGgubG9nKFwiY2hyb21lOiBcIitKU09OLnN0cmluZ2lmeShlKSksSShlKX19fWVsc2UgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWE9ZnVuY3Rpb24oZSl7cmV0dXJuIHkoZSl9O3ZvaWQgMD09PW5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciYmKG5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbigpe2gubG9nKFwiRHVtbXkgbWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIgY2FsbGVkLlwiKX0pLHZvaWQgMD09PW5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciYmKG5hdmlnYXRvci5tZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbigpe2gubG9nKFwiRHVtbXkgbWVkaWFEZXZpY2VzLnJlbW92ZUV2ZW50TGlzdGVuZXIgY2FsbGVkLlwiKX0pLHM9ZnVuY3Rpb24oZSx0KXt1Pj00Mz9mKGUsdCk6dm9pZCAwIT09ZS5zcmM/ZS5zcmM9dD9VUkwuY3JlYXRlT2JqZWN0VVJMKHQpOm51bGw6aC5sb2coXCJFcnJvciBhdHRhY2hpbmcgc3RyZWFtIHRvIGVsZW1lbnQuXCIpfSxjPWZ1bmN0aW9uKGUsdCl7dT49NDM/ZihlLG0odCkpOmUuc3JjPXQuc3JjfX1lbHNlIG5hdmlnYXRvci5tZWRpYURldmljZXMmJm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8pPyhoLmxvZyhcIlRoaXMgYXBwZWFycyB0byBiZSBFZGdlXCIpLGQ9XCJlZGdlXCIsdT1oLmV4dHJhY3RWZXJzaW9uKG5hdmlnYXRvci51c2VyQWdlbnQsL0VkZ2VcXC8oXFxkKykuKFxcZCspJC8sMiksbD0xMik6aC5sb2coXCJCcm93c2VyIGRvZXMgbm90IGFwcGVhciB0byBiZSBXZWJSVEMtY2FwYWJsZVwiKTtlbHNlIGgubG9nKFwiVGhpcyBkb2VzIG5vdCBhcHBlYXIgdG8gYmUgYSBicm93c2VyXCIpLGQ9XCJub3QgYSBicm93c2VyXCI7ZnVuY3Rpb24geShlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCxuKXtvKGUsdCxuKX0pfXZhciBULGI9e307dHJ5e09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLFwidmVyc2lvblwiLHtzZXQ6ZnVuY3Rpb24oZSl7dT1lfX0pfWNhdGNoKGUpe31wP1Q9cDpcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93JiYoVD13aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24pfSxmdW5jdGlvbihlLHQsbil7dmFyIGk9bigyMyk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0xO3Q8YXJndW1lbnRzLmxlbmd0aDt0Kyspe3ZhciBuPW51bGwhPWFyZ3VtZW50c1t0XT9hcmd1bWVudHNbdF06e30sYT1PYmplY3Qua2V5cyhuKTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzJiYoYT1hLmNvbmNhdChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKG4pLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihuLGUpLmVudW1lcmFibGV9KSkpLGEuZm9yRWFjaChmdW5jdGlvbih0KXtpKGUsdCxuW3RdKX0pfXJldHVybiBlfX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24uZCh0LFwiYVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHN9KTt2YXIgaT13aW5kb3cuQXVkaW9Db250ZXh0fHx3aW5kb3cud2Via2l0QXVkaW9Db250ZXh0LGE9bigzKSxyPWEuZ2V0UGFyYW1ldGVyLG89YS5zZXRQYXJhbWV0ZXIscz1mdW5jdGlvbigpe3JldHVybiByKFwiQVVESU9fQ09OVEVYVFwiKXx8KGNvbnNvbGUubG9nKFwiQ3JlYXRpbmcgQXVkaW8gQ29udGV4dFwiKSxvKFwiQVVESU9fQ09OVEVYVFwiLGZ1bmN0aW9uKCl7aWYoaSlyZXR1cm4gbmV3IGk7dGhyb3cgbmV3IEVycm9yKFwiQVVESU9fQ09OVEVYVF9OT1RfU1VQUE9SVEVEXCIpfSgpKSkscihcIkFVRElPX0NPTlRFWFRcIil9fSxmdW5jdGlvbihlLHQsbil7dmFyIGk9bigyMSksYT1uKDIyKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXQmJm58fDA7XCJzdHJpbmdcIj09dHlwZW9mIGUmJih0PVwiYmluYXJ5XCI9PT1lP25ldyBBcnJheSgxNik6bnVsbCxlPW51bGwpO3ZhciBvPShlPWV8fHt9KS5yYW5kb218fChlLnJuZ3x8aSkoKTtpZihvWzZdPTE1Jm9bNl18NjQsb1s4XT02MyZvWzhdfDEyOCx0KWZvcih2YXIgcz0wO3M8MTY7KytzKXRbcitzXT1vW3NdO3JldHVybiB0fHxhKG8pfX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19O09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBhLHI9aShuKDApKSxvPW4oMTIpOyFmdW5jdGlvbihlKXtlLk5FVz1cIm5ld1wiLGUuUFJFUEFSSU5HX09GRkVSPVwicHJlcGFyaW5nLW9mZmVyXCIsZS5PRkZFUl9TRU5UPVwib2ZmZXItc2VudFwiLGUuRVNUQUJMSVNIRUQ9XCJlc3RhYmxpc2hlZFwiLGUuQ0xPU0VEPVwiY2xvc2VkXCJ9KGF8fChhPXt9KSk7dmFyIHM9ZnVuY3Rpb24oKXtmdW5jdGlvbiBlKGUpe3RoaXMuY2FuZGlkYXRlPW51bGwsdGhpcy5zdGF0ZT1hLk5FVyx0aGlzLmNvbmZpZz1lLHRoaXMuaXNTdWJzY3JpYmVyPXRoaXMuY29uZmlnLmlzU3Vic2NyaWJlcix0aGlzLnBlZXJDb25uZWN0aW9uPXRoaXMuaW5pdFBlZWNDb25uZWN0aW9uKGUpLHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGU9dGhpcy5fb25pY2VjYW5kaWRhdGUuYmluZCh0aGlzKSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPXRoaXMuX29uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlLmJpbmQodGhpcyksdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmFkZHN0cmVhbT10aGlzLl9vbmFkZHN0cmVhbS5iaW5kKHRoaXMpLHRoaXMucGVlckNvbm5lY3Rpb24ub250cmFjaz10aGlzLl9vbnRyYWNrLmJpbmQodGhpcyksdGhpcy5wcm9jZXNzU2lnbmFsaW5nTWVzc2FnZT10aGlzLnNldEFuc3dlci5iaW5kKHRoaXMpLHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoe29mZmVyVG9SZWNlaXZlQXVkaW86ITAsb2ZmZXJUb1JlY2VpdmVWaWRlbzohMH0pLnRoZW4odGhpcy5zZXRMb2NhbFNEUC5iaW5kKHRoaXMpKSx0aGlzLnNlbmRWaWRlb1N0YXRzPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixnb29nQ29kZWNOYW1lOlwiaDI2NFwiPT09dGhpcy5jb25maWcuY29kZWM/XCJIMjY0XCI6XCJWUDhcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0FkYXB0YXRpb25DaGFuZ2VzOlwiMFwiLGdvb2dBdmdFbmNvZGVNczpcIjBcIixnb29nRW5jb2RlVXNhZ2VQZXJjZW50OlwiMFwiLGdvb2dGaXJzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lSGVpZ2h0U2VudDpcIjBcIixnb29nRnJhbWVIZWlnaHRJbnB1dDpcIjBcIixnb29nRnJhbWVSYXRlSW5wdXQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZVNlbnQ6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhTZW50OlwiMFwiLGdvb2dGcmFtZVdpZHRoSW5wdXQ6XCIwXCIsZ29vZ05hY2tzUmVjZWl2ZWQ6XCIwXCIsZ29vZ1BsaXNSZWNlaXZlZDpcIjBcIixnb29nUnR0OlwiMFwiLGdvb2dGcmFtZXNFbmNvZGVkOlwiMFwifSx0aGlzLnNlbmRBdWRpb1N0YXRzPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixnb29nQ29kZWNOYW1lOlwib3B1c1wiLGFlY0RpdmVyZ2VudEZpbHRlckZyYWN0aW9uOlwiMFwiLGF1ZGlvSW5wdXRMZXZlbDpcIjBcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0VjaG9DYW5jZWxsYXRpb25SZXR1cm5Mb3NzOlwiMFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zc0VuaGFuY2VtZW50OlwiMFwifSx0aGlzLnJlY2VpdmVBdWRpb1N0YXRzPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixhdWRpb091dHB1dExldmVsOlwiMFwiLGJ5dGVzUmVjZWl2ZWQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1JlY2VpdmVkOlwiMFwiLGdvb2dBY2NlbGVyYXRlUmF0ZTpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ0RlY29kaW5nQ05HOlwiMFwiLGdvb2dEZWNvZGluZ0NUTjpcIjBcIixnb29nRGVjb2RpbmdDVFNHOlwiMFwiLGdvb2dEZWNvZGluZ05vcm1hbDpcIjBcIixnb29nRGVjb2RpbmdQTEM6XCIwXCIsZ29vZ0RlY29kaW5nUExDQ05HOlwiMFwiLGdvb2dFeHBhbmRSYXRlOlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nSml0dGVyUmVjZWl2ZWQ6XCIwXCIsZ29vZ1ByZWVtcHRpdmVFeHBhbmRSYXRlOlwiMFwiLGdvb2dQcmVmZXJyZWRKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nU2Vjb25kYXJ5RGVjb2RlZFJhdGU6XCIwXCIsZ29vZ1NwZWVjaEV4cGFuZFJhdGU6XCIwXCJ9LHRoaXMucmVjZWl2ZVZpZGVvU3RhdHM9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGdvb2dUYXJnZXREZWxheU1zOlwiMFwiLHBhY2tldHNMb3N0OlwiMFwiLGdvb2dEZWNvZGVNczpcIjBcIixnb29nTWF4RGVjb2RlTXM6XCIwXCIsZ29vZ1JlbmRlckRlbGF5TXM6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVIZWlnaHRSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZURlY29kZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZU91dHB1dDpcIjBcIixnb29nRnJhbWVzRGVjb2RlZDpcIjBcIixnb29nRnJhbWVSZWNlaXZlZDpcIjBcIixnb29nSml0dGVyQnVmZmVyTXM6XCIwXCIsZ29vZ0N1cnJlbnREZWxheU1zOlwiMFwiLGdvb2dNaW5QbGF5b3V0RGVsYXlNczpcIjBcIixnb29nTmFja3NTZW50OlwiMFwiLGdvb2dQbGlzU2VudDpcIjBcIixnb29nRmlyc1NlbnQ6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCJ9fXJldHVybiBlLnByb3RvdHlwZS5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5wZWVyQ29ubmVjdGlvbi5hZGRTdHJlYW0oZSl9LGUucHJvdG90eXBlLnNldEFuc3dlcj1mdW5jdGlvbihlKXt2YXIgdD1KU09OLnBhcnNlKGUpO3RoaXMucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7c2RwOnQuc2RwLHR5cGU6XCJhbnN3ZXJcIn0pKSx0aGlzLm9uc2lnbmFsaW5nbWVzc2FnZSYmdGhpcy5vbnNpZ25hbGluZ21lc3NhZ2UoXCJcIil9LGUucHJvdG90eXBlLmNsb3NlPWZ1bmN0aW9uKCl7dGhpcy5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpfSxlLnByb3RvdHlwZS5nZXRTdGF0cz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMD09PXQmJih0PTUwMCksdD10PjUwMD81MDA6dCxEYXRlLm5vdygpLXRoaXMubGFzdFRpbWVHZXRTdGF0czx0KXt2YXIgbj1bXTt0aGlzLmNvbmZpZy5pc1N1YnNjcmliZXI/KG4ucHVzaCh0aGlzLnJlY2VpdmVWaWRlb1N0YXRzKSxuLnB1c2godGhpcy5yZWNlaXZlQXVkaW9TdGF0cykpOihuLnB1c2godGhpcy5zZW5kQXVkaW9TdGF0cyksbi5wdXNoKHRoaXMuc2VuZFZpZGVvU3RhdHMpKSxuLnB1c2goe2lkOlwidGltZVwiLHN0YXJ0VGltZTp0aGlzLmNvbm5lY3RlZFRpbWUsdGltZXN0YW1wOkRhdGUubm93KCl9KSxlJiZlKG4pfWVsc2UgdGhpcy5fZ2V0U3RhdHMoZSl9LGUucHJvdG90eXBlLl9nZXRTdGF0cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49W107dGhpcy5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cyhudWxsKS50aGVuKGZ1bmN0aW9uKGkpe3QubGFzdFRpbWVHZXRTdGF0cz1EYXRlLm5vdygpLE9iamVjdC5rZXlzKGkpLm1hcChmdW5jdGlvbihlKXt2YXIgbj1pW2VdO3QuY29uZmlnLmlzU3Vic2NyaWJlcj9uLnR5cGUmJlwiaW5ib3VuZHJ0cFwiPT09bi50eXBlJiZuLm1lZGlhVHlwZSYmXCJhdWRpb1wiPT09bi5tZWRpYVR5cGU/KHQucmVjZWl2ZUF1ZGlvU3RhdHMuaWQ9bi5pZCtcInJlY3ZcIix0LnJlY2VpdmVBdWRpb1N0YXRzLnR5cGU9bi50eXBlK1wiXCIsdC5yZWNlaXZlQXVkaW9TdGF0cy5tZWRpYVR5cGU9bi5tZWRpYVR5cGUrXCJcIix0LnJlY2VpdmVBdWRpb1N0YXRzLnBhY2tldHNSZWNlaXZlZD1uLnBhY2tldHNSZWNlaXZlZCtcIlwiLHQucmVjZWl2ZUF1ZGlvU3RhdHMuYnl0ZXNSZWNlaXZlZD1uLmJ5dGVzUmVjZWl2ZWQrXCJcIix0LnJlY2VpdmVBdWRpb1N0YXRzLnBhY2tldHNMb3N0PW4ucGFja2V0c0xvc3QrXCJcIix0LnJlY2VpdmVBdWRpb1N0YXRzLmdvb2dKaXR0ZXJSZWNlaXZlZD1uLmppdHRlcitcIlwiKTpuLnR5cGUmJlwiaW5ib3VuZHJ0cFwiPT09bi50eXBlJiZuLm1lZGlhVHlwZSYmXCJ2aWRlb1wiPT09bi5tZWRpYVR5cGU/KHQucmVjZWl2ZVZpZGVvU3RhdHMuaWQ9bi5pZCtcInJlY3ZcIix0LnJlY2VpdmVWaWRlb1N0YXRzLnR5cGU9bi50eXBlK1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5tZWRpYVR5cGU9bi5tZWRpYVR5cGUrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLnBhY2tldHNSZWNlaXZlZD1uLnBhY2tldHNSZWNlaXZlZCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZD1uLmJ5dGVzUmVjZWl2ZWQrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLnBhY2tldHNMb3N0PW4ucGFja2V0c0xvc3QrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLmdvb2dKaXR0ZXJCdWZmZXJNcz1uLmppdHRlcitcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ1BsaXNTZW50PW4ucGxpQ291bnQrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLmdvb2dGaXJzU2VudD1uLmZpckNvdW50K1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5nb29nTmFja3NTZW50PW4ubmFja0NvdW50K1wiXCIpOm4ucmVtb3RlU291cmNlJiZuLnR5cGUmJlwidHJhY2tcIj09PW4udHlwZSYmbi50cmFja0lkZW50aWZpZXImJi0xIT09bi50cmFja0lkZW50aWZpZXIuaW5kZXhPZihcInZcIik/KHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ0ZyYW1lSGVpZ2h0UmVjZWl2ZWQ9bi5mcmFtZUhlaWdodCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZD1uLmZyYW1lV2lkdGgrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLmdvb2dGcmFtZVJhdGVEZWNvZGVkPW4uZnJhbWVzUGVyU2Vjb25kK1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5nb29nRnJhbWVSYXRlT3V0cHV0PW4uZnJhbWVzUGVyU2Vjb25kK1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5nb29nRnJhbWVSYXRlUmVjZWl2ZWQ9bi5mcmFtZXNQZXJTZWNvbmQrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLmdvb2dGcmFtZXNEZWNvZGVkPW4uZnJhbWVzRGVjb2RlZCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ0ZyYW1lUmVjZWl2ZWQ9bi5mcmFtZXNSZWNlaXZlZCtcIlwiKTpuLnJlbW90ZVNvdXJjZSYmbi50eXBlJiZcInRyYWNrXCI9PT1uLnR5cGUmJm4udHJhY2tJZGVudGlmaWVyJiYtMSE9PW4udHJhY2tJZGVudGlmaWVyLmluZGV4T2YoXCJhXCIpJiYodC5yZWNlaXZlQXVkaW9TdGF0cy5hdWRpb091dHB1dExldmVsPW4uYXVkaW9MZXZlbCtcIlwiKTohbi5pc1JlbW90ZSYmbi50eXBlJiZcIm91dGJvdW5kcnRwXCI9PT1uLnR5cGUmJm4ubWVkaWFUeXBlJiZcImF1ZGlvXCI9PT1uLm1lZGlhVHlwZT8odC5zZW5kQXVkaW9TdGF0cy5pZD1uLmlkK1wic2VuZFwiLHQuc2VuZEF1ZGlvU3RhdHMudHlwZT1uLnR5cGUrXCJcIix0LnNlbmRBdWRpb1N0YXRzLm1lZGlhVHlwZT1uLm1lZGlhVHlwZStcIlwiLHQuc2VuZEF1ZGlvU3RhdHMucGFja2V0c1NlbnQ9bi5wYWNrZXRzU2VudCtcIlwiLHQuc2VuZEF1ZGlvU3RhdHMuYnl0ZXNTZW50PW4uYnl0ZXNTZW50K1wiXCIpOiFuLmlzUmVtb3RlJiZuLnR5cGUmJlwib3V0Ym91bmRydHBcIj09PW4udHlwZSYmbi5tZWRpYVR5cGUmJlwidmlkZW9cIj09PW4ubWVkaWFUeXBlPyh0LnNlbmRWaWRlb1N0YXRzLmlkPW4uaWQrXCJzZW5kXCIsdC5zZW5kVmlkZW9TdGF0cy50eXBlPW4udHlwZStcIlwiLHQuc2VuZFZpZGVvU3RhdHMubWVkaWFUeXBlPW4ubWVkaWFUeXBlK1wiXCIsdC5zZW5kVmlkZW9TdGF0cy5wYWNrZXRzU2VudD1uLnBhY2tldHNTZW50K1wiXCIsdC5zZW5kVmlkZW9TdGF0cy5ieXRlc1NlbnQ9bi5ieXRlc1NlbnQrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dSdHQ9bi5yb3VuZFRyaXBUaW1lK1wiXCIsdC5zZW5kVmlkZW9TdGF0cy5nb29nUGxpc1JlY2VpdmVkPW4ucGxpQ291bnQrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dGaXJzUmVjZWl2ZWQ9bi5maXJDb3VudCtcIlwiLHQuc2VuZFZpZGVvU3RhdHMuZ29vZ05hY2tzUmVjZWl2ZWQ9bi5uYWNrQ291bnQrXCJcIik6IW4ucmVtb3RlU291cmNlJiZuLnR5cGUmJlwidHJhY2tcIj09PW4udHlwZSYmbi5mcmFtZXNTZW50JiYwIT09bi5mcmFtZXNTZW50JiYodC5zZW5kVmlkZW9TdGF0cy5nb29nRnJhbWVIZWlnaHRTZW50PW4uZnJhbWVIZWlnaHQrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dGcmFtZUhlaWdodElucHV0PW4uZnJhbWVIZWlnaHQrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dGcmFtZVdpZHRoU2VudD1uLmZyYW1lV2lkdGgrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dGcmFtZVdpZHRoSW5wdXQ9bi5mcmFtZVdpZHRoK1wiXCIsdC5zZW5kVmlkZW9TdGF0cy5nb29nRnJhbWVzRW5jb2RlZD1uLmZyYW1lc1NlbnQrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dGcmFtZVJhdGVTZW50PW4uZnJhbWVzUGVyU2Vjb25kK1wiXCIpfSksdC5jb25maWcuaXNTdWJzY3JpYmVyPyhuLnB1c2godC5yZWNlaXZlVmlkZW9TdGF0cyksbi5wdXNoKHQucmVjZWl2ZUF1ZGlvU3RhdHMpKToobi5wdXNoKHQuc2VuZEF1ZGlvU3RhdHMpLG4ucHVzaCh0LnNlbmRWaWRlb1N0YXRzKSksbi5wdXNoKHtpZDpcInRpbWVcIixzdGFydFRpbWU6dC5jb25uZWN0ZWRUaW1lLHRpbWVzdGFtcDpEYXRlLm5vdygpfSksZSYmZShuKX0pfSxlLnByb3RvdHlwZS5nZXRTdGF0c1JhdGU9ZnVuY3Rpb24oZSl7dGhpcy5nZXRTdGF0cyhlKX0sZS5wcm90b3R5cGUuaW5pdFBlZWNDb25uZWN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PWUuc3R1blNlcnZlclVybCxuPWUudHVyblNlcnZlcixpPWUuaWNlU2VydmVycztyZXR1cm4gdGhpcy5wY0NvbmZpZz17aWNlU2VydmVyczpbe3VybHM6XCJzdHVuOndlYmNzLmFnb3JhLmlvOjM0NzhcIn1dfSxpIGluc3RhbmNlb2YgQXJyYXk/dGhpcy5wY0NvbmZpZy5pY2VTZXJ2ZXJzPWUuaWNlU2VydmVyczp0JiYodCBpbnN0YW5jZW9mIEFycmF5P3QubWFwKGZ1bmN0aW9uKGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlJiZcIlwiIT09ZSYmdGhpcy5wY0NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VybHM6ZX0pfSk6XCJzdHJpbmdcIj09dHlwZW9mIHQmJlwiXCIhPT10JiZ0aGlzLnBjQ29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXJsczp0fSkpLG4mJihuIGluc3RhbmNlb2YgQXJyYXk/bi5tYXAoZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUudXJsJiZcIlwiIT09ZS51cmwmJnRoaXMucGNDb25maWcuaWNlU2VydmVycy5wdXNoKHt1c2VybmFtZTplLnVzZXJuYW1lLGNyZWRlbnRpYWw6ZS5jcmVkZW50aWFsLHVybDplLnVybH0pfSk6XCJhdXRvXCIhPT1uLm1vZGUmJlwibWFudWFsXCIhPT1uLm1vZGV8fChuLnVkcHBvcnQmJnRoaXMucGNDb25maWcuaWNlU2VydmVycy5wdXNoKHt1c2VybmFtZTpuLnVzZXJuYW1lLGNyZWRlbnRpYWw6bi5jcmVkZW50aWFsLGNyZWRlbnRpYWxUeXBlOlwicGFzc3dvcmRcIix1cmxzOlwidHVybjpcIituLnVybCtcIjpcIituLnVkcHBvcnQrXCI/dHJhbnNwb3J0PXVkcFwifSksXCJzdHJpbmdcIj09dHlwZW9mIG4udGNwcG9ydCYmXCJcIiE9PW4udGNwcG9ydCYmdGhpcy5wY0NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOm4udXNlcm5hbWUsY3JlZGVudGlhbDpuLmNyZWRlbnRpYWwsY3JlZGVudGlhbFR5cGU6XCJwYXNzd29yZFwiLHVybHM6XCJ0dXJuOlwiK24udXJsK1wiOlwiK24udGNwcG9ydCtcIj90cmFuc3BvcnQ9dGNwXCJ9KSwhMD09PW4uZm9yY2V0dXJuJiYodGhpcy5wY0NvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3k9XCJyZWxheVwiKSkpLG5ldyBvLlJUQ1BlZXJDb25uZWN0aW9uKHRoaXMucGNDb25maWcpfSxlLnByb3RvdHlwZS5fb250cmFjaz1mdW5jdGlvbihlKXt0aGlzLm9uYWRkc3RyZWFtJiZ0aGlzLm9uYWRkc3RyZWFtKGUsXCJvbnRyYWNrXCIpfSxlLnByb3RvdHlwZS5fb25hZGRzdHJlYW09ZnVuY3Rpb24oZSl7dGhpcy5vbmFkZHN0cmVhbSYmdGhpcy5vbmFkZHN0cmVhbShlLFwib25hZGRzdHJlYW1cIil9LGUucHJvdG90eXBlLl9vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbihlKXtcImNvbm5lY3RlZFwiPT09ZS5jdXJyZW50VGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZSYmKHRoaXMuc3RhdGU9YS5FU1RBQkxJU0hFRCx0aGlzLmNvbm5lY3RlZFRpbWU9RGF0ZS5ub3coKSksdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmdGhpcy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZShlLmN1cnJlbnRUYXJnZXQuaWNlQ29ubmVjdGlvblN0YXRlKX0sZS5wcm90b3R5cGUuX29uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKGUpeyF0aGlzLmNhbmRpZGF0ZSYmZSYmKHRoaXMuY2FuZGlkYXRlPWUuY2FuZGlkYXRlLHRoaXMucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoe29mZmVyVG9SZWNlaXZlQXVkaW86ITAsb2ZmZXJUb1JlY2VpdmVWaWRlbzohMH0pLnRoZW4odGhpcy5lZGl0TG9jYWxTRFAuYmluZCh0aGlzKSkudGhlbih0aGlzLnNldExvY2FsU0RQLmJpbmQodGhpcykpLnRoZW4odGhpcy5zZW5kT2ZmZXIuYmluZCh0aGlzKSkuY2F0Y2goKSl9LGUucHJvdG90eXBlLnNldExvY2FsU0RQPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbih7c2RwOmUuc2RwLHR5cGU6XCJvZmZlclwifSkpLHRoaXMuc3RhdGU9YS5QUkVQQVJJTkdfT0ZGRVIsZX0sZS5wcm90b3R5cGUuZWRpdExvY2FsU0RQPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNkcD10aGlzLnNldEJhbmRXaWR0aChlLnNkcCksZS5zZHA9dGhpcy5yZXZpc2VPcHVzKGUuc2RwKSxlLnNkcD10aGlzLmFkZENhbmRpZGF0ZShlLnNkcCksZX0sZS5wcm90b3R5cGUuc2V0U2VuZFJlY3Y9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9KGU9KGU9ZS5yZXBsYWNlKC9hPXJlY3Zvbmx5XFxyXFxuL2csXCJhPXNlbmRyZWN2XFxyXFxuXCIpKS5yZXBsYWNlKC9hPXNlbmRvbmx5XFxyXFxuL2csXCJhPXNlbmRyZWN2XFxyXFxuXCIpKS5yZXBsYWNlKC9hPWluYWN0aXZlXFxyXFxuL2csXCJhPXNlbmRyZWN2XFxyXFxuXCIpfSxlLnByb3RvdHlwZS5zZXRCYW5kV2lkdGg9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuY29uZmlnLGE9aS5jb2RlYyxvPWkubWluVmlkZW9CVyxzPWkubWF4VmlkZW9CVyxjPWkubWF4QXVkaW9CVyxkPWkuY2xpZW50SWQ7aWYoKHQ9ZS5tYXRjaCgvbT12aWRlby4qXFxyXFxuLykpJiZvJiZzKXtuPXRbMF0rXCJiPUFTOlwiK3MrXCJcXHJcXG5cIjt2YXIgdT0wLGw9MDtcImgyNjRcIj09PWE/KHU9ZS5zZWFyY2goL2E9cnRwbWFwOihcXGQrKSBIMjY0XFwvOTAwMDBcXHJcXG4vKSxsPWUuc2VhcmNoKC9IMjY0XFwvOTAwMDBcXHJcXG4vKSk6XCJ2cDhcIj09PWEmJih1PWUuc2VhcmNoKC9hPXJ0cG1hcDooXFxkKykgVlA4XFwvOTAwMDBcXHJcXG4vKSxsPWUuc2VhcmNoKC9WUDhcXC85MDAwMFxcclxcbi8pKSwtMSE9PXUmJi0xIT09bCYmbC11PjEwJiYobj1uK1wiYT1mbXRwOlwiK2Uuc2xpY2UodSs5LGwtMSkrXCIgeC1nb29nbGUtbWluLWJpdHJhdGU9XCIrbytcIlxcclxcblwiKSxlPWUucmVwbGFjZSh0WzBdLG4pLHIuZGVmYXVsdC5kZWJ1ZyhcIltcIitkK1wiXVNldCBWaWRlbyBCaXRyYXRlIC0gbWluOlwiK28rXCIgbWF4OlwiK3MpfXJldHVybih0PWUubWF0Y2goL209YXVkaW8uKlxcclxcbi8pKSYmYyYmKG49dFswXStcImI9QVM6XCIrYytcIlxcclxcblwiLGU9ZS5yZXBsYWNlKHRbMF0sbikpLGV9LGUucHJvdG90eXBlLnJldmlzZU9wdXM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU9KGU9ZS5yZXBsYWNlKC9hPXJ0cG1hcDoxMDIgb3B1c1xcLzQ4MDAwXFwvMi9nLFwiYT1ydHBtYXA6MTExIG9wdXMvNDgwMDAvMlwiKSkucmVwbGFjZSgvbT1hdWRpbyA5IFVEUFxcL1RMU1xcL1JUUFxcL1NBVlBGIDEwMiAwIDggOTcgMTMgMTE4IDEwMS9nLFwibT1hdWRpbyA5IFVEUC9UTFMvUlRQL1NBVlBGIDExMSAwIDggOTcgMTMgMTE4IDEwMVwiKX0sZS5wcm90b3R5cGUuYWRkQ2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3JldHVybiBlKz1cImE9Y2FuZGlkYXRlOjIyNDMyNTU0MzUgMSB1ZHAgMjEyMjE5NDY4NyAxOTIuMTY4LjAuMSAzMDAwMCB0eXAgaG9zdCBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAxXFxyXFxuXCJ9LGUucHJvdG90eXBlLnNlbmRPZmZlcj1mdW5jdGlvbihlKXt0aGlzLmNvbmZpZy5jYWxsYmFjayhKU09OLnN0cmluZ2lmeSh7c2RwOmUuc2RwLG1lc3NhZ2VUeXBlOlwiT0ZGRVJcIix0aWVicmVha2VyOk1hdGguZmxvb3IoNDI5NDk2NzIzKk1hdGgucmFuZG9tKCkrMSl9KSksdGhpcy5zdGF0ZT1hLk9GRkVSX1NFTlR9LGV9KCk7dC5kZWZhdWx0PXN9LGZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uKDI2KSxhPW4oMjcpLHI9bigyOCk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGkoZSl8fGEoZSx0KXx8cigpfX0sZnVuY3Rpb24oZSx0LG4pe3ZhciBpLGE7YT10aGlzLHZvaWQgMD09PShpPWZ1bmN0aW9uKCl7cmV0dXJuIGZ1bmN0aW9uKCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIGUsdD10aGlzO2Z1bmN0aW9uIG4oZSl7dC5jb25zb2xlJiYodC5jb25zb2xlLmVycm9yP3QuY29uc29sZS5lcnJvcihlKTp0LmNvbnNvbGUubG9nJiZ0LmNvbnNvbGUubG9nKGUpKX1mdW5jdGlvbiBpKGUsdCxpLGEpe3ZhciByPWF8fG4sbz1lLmNyZWF0ZVNoYWRlcihpKTtlLnNoYWRlclNvdXJjZShvLHQpLGUuY29tcGlsZVNoYWRlcihvKTt2YXIgcz1lLmdldFNoYWRlclBhcmFtZXRlcihvLGUuQ09NUElMRV9TVEFUVVMpO2lmKCFzKXt2YXIgYz1lLmdldFNoYWRlckluZm9Mb2cobyk7cmV0dXJuIHIoXCIqKiogRXJyb3IgY29tcGlsaW5nIHNoYWRlciAnXCIrbytcIic6XCIrYyksZS5kZWxldGVTaGFkZXIobyksbnVsbH1yZXR1cm4gb31mdW5jdGlvbiBhKGUsdCxpLGEscil7dmFyIG89cnx8bixzPWUuY3JlYXRlUHJvZ3JhbSgpO3QuZm9yRWFjaChmdW5jdGlvbih0KXtlLmF0dGFjaFNoYWRlcihzLHQpfSksaSYmaS5mb3JFYWNoKGZ1bmN0aW9uKHQsbil7ZS5iaW5kQXR0cmliTG9jYXRpb24ocyxhP2Fbbl06bix0KX0pLGUubGlua1Byb2dyYW0ocyk7dmFyIGM9ZS5nZXRQcm9ncmFtUGFyYW1ldGVyKHMsZS5MSU5LX1NUQVRVUyk7aWYoIWMpe3ZhciBkPWUuZ2V0UHJvZ3JhbUluZm9Mb2cocyk7cmV0dXJuIG8oXCJFcnJvciBpbiBwcm9ncmFtIGxpbmtpbmc6XCIrZCksZS5kZWxldGVQcm9ncmFtKHMpLG51bGx9cmV0dXJuIHN9KGU9ZXx8dCk9PT1lLnRvcCYmKGNvbnNvbGUubG9nKFwiJWMlc1wiLFwiY29sb3I6Ymx1ZTtmb250LXdlaWdodDpib2xkO1wiLFwiZm9yIG1vcmUgYWJvdXQgd2ViZ2wtdXRpbHMuanMgc2VlOlwiKSxjb25zb2xlLmxvZyhcIiVjJXNcIixcImNvbG9yOmJsdWU7Zm9udC13ZWlnaHQ6Ym9sZDtcIixcImh0dHA6Ly93ZWJnbGZ1bmRhbWVudGFscy5vcmcvd2ViZ2wvbGVzc29ucy93ZWJnbC1ib2lsZXJwbGF0ZS5odG1sXCIpKTt2YXIgcixvPVtcIlZFUlRFWF9TSEFERVJcIixcIkZSQUdNRU5UX1NIQURFUlwiXTtyZXR1cm4hZG9jdW1lbnQuZG9jdW1lbnRNb2RlJiZ3aW5kb3cuU3R5bGVNZWRpYSYmKEhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS5nZXRDb250ZXh0PShyPUhUTUxDYW52YXNFbGVtZW50LnByb3RvdHlwZS5nZXRDb250ZXh0LGZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLHQ9ZVswXTtyZXR1cm5cIndlYmdsXCI9PT10JiYoKGU9W10uc2xpY2UuY2FsbChhcmd1bWVudHMpKVswXT1cImV4cGVyaW1lbnRhbC13ZWJnbFwiKSxyLmFwcGx5KHRoaXMsZSl9KSkse2NyZWF0ZVByb2dyYW06YSxjcmVhdGVQcm9ncmFtRnJvbVNvdXJjZXM6ZnVuY3Rpb24oZSx0LG4scixzKXtmb3IodmFyIGM9W10sZD0wO2Q8dC5sZW5ndGg7KytkKWMucHVzaChpKGUsdFtkXSxlW29bZF1dLHMpKTtyZXR1cm4gYShlLGMsbixyLHMpfX19LmNhbGwoYSl9LmFwcGx5KHQsW10pKXx8KGUuZXhwb3J0cz1pKX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciBpPXRoaXMmJnRoaXMuX19hd2FpdGVyfHxmdW5jdGlvbihlLHQsbixpKXtyZXR1cm4gbmV3KG58fChuPVByb21pc2UpKShmdW5jdGlvbihhLHIpe2Z1bmN0aW9uIG8oZSl7dHJ5e2MoaS5uZXh0KGUpKX1jYXRjaChlKXtyKGUpfX1mdW5jdGlvbiBzKGUpe3RyeXtjKGkudGhyb3coZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIGMoZSl7ZS5kb25lP2EoZS52YWx1ZSk6bmV3IG4oZnVuY3Rpb24odCl7dChlLnZhbHVlKX0pLnRoZW4obyxzKX1jKChpPWkuYXBwbHkoZSx0fHxbXSkpLm5leHQoKSl9KX0sYT10aGlzJiZ0aGlzLl9fZ2VuZXJhdG9yfHxmdW5jdGlvbihlLHQpe3ZhciBuLGksYSxyLG89e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmYVswXSl0aHJvdyBhWzFdO3JldHVybiBhWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIHI9e25leHQ6cygwKSx0aHJvdzpzKDEpLHJldHVybjpzKDIpfSxcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJihyW1N5bWJvbC5pdGVyYXRvcl09ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30pLHI7ZnVuY3Rpb24gcyhyKXtyZXR1cm4gZnVuY3Rpb24ocyl7cmV0dXJuIGZ1bmN0aW9uKHIpe2lmKG4pdGhyb3cgbmV3IFR5cGVFcnJvcihcIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy5cIik7Zm9yKDtvOyl0cnl7aWYobj0xLGkmJihhPTImclswXT9pLnJldHVybjpyWzBdP2kudGhyb3d8fCgoYT1pLnJldHVybikmJmEuY2FsbChpKSwwKTppLm5leHQpJiYhKGE9YS5jYWxsKGksclsxXSkpLmRvbmUpcmV0dXJuIGE7c3dpdGNoKGk9MCxhJiYocj1bMiZyWzBdLGEudmFsdWVdKSxyWzBdKXtjYXNlIDA6Y2FzZSAxOmE9cjticmVhaztjYXNlIDQ6cmV0dXJuIG8ubGFiZWwrKyx7dmFsdWU6clsxXSxkb25lOiExfTtjYXNlIDU6by5sYWJlbCsrLGk9clsxXSxyPVswXTtjb250aW51ZTtjYXNlIDc6cj1vLm9wcy5wb3AoKSxvLnRyeXMucG9wKCk7Y29udGludWU7ZGVmYXVsdDppZighKGE9KGE9by50cnlzKS5sZW5ndGg+MCYmYVthLmxlbmd0aC0xXSkmJig2PT09clswXXx8Mj09PXJbMF0pKXtvPTA7Y29udGludWV9aWYoMz09PXJbMF0mJighYXx8clsxXT5hWzBdJiZyWzFdPGFbM10pKXtvLmxhYmVsPXJbMV07YnJlYWt9aWYoNj09PXJbMF0mJm8ubGFiZWw8YVsxXSl7by5sYWJlbD1hWzFdLGE9cjticmVha31pZihhJiZvLmxhYmVsPGFbMl0pe28ubGFiZWw9YVsyXSxvLm9wcy5wdXNoKHIpO2JyZWFrfWFbMl0mJm8ub3BzLnBvcCgpLG8udHJ5cy5wb3AoKTtjb250aW51ZX1yPXQuY2FsbChlLG8pfWNhdGNoKGUpe3I9WzYsZV0saT0wfWZpbmFsbHl7bj1hPTB9aWYoNSZyWzBdKXRocm93IHJbMV07cmV0dXJue3ZhbHVlOnJbMF0/clsxXTp2b2lkIDAsZG9uZTohMH19KFtyLHNdKX19fSxyPXRoaXMmJnRoaXMuX19pbXBvcnREZWZhdWx0fHxmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS5fX2VzTW9kdWxlP2U6e2RlZmF1bHQ6ZX19LG89dGhpcztPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgcz1uKDI5KSxjPW4oNCksZD1yKG4oMCkpO3QuZ2V0U3VwcG9ydGVkQ29kZWM9ZnVuY3Rpb24oZSl7cmV0dXJuIGkobyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIHQsbixpLHIsbztyZXR1cm4gYSh0aGlzLGZ1bmN0aW9uKGEpe3N3aXRjaChhLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHQ9e3ZpZGVvOltdLGF1ZGlvOltdfSxcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P1szLDFdOihkLmRlZmF1bHQuZXJyb3IoXCJnZXRTdXBwb3J0ZWRDb2RlYzogTk9UX0JST1dTRVJfRU5WXCIpLFsyLFByb21pc2UucmVqZWN0KFwiTk9UX0JST1dTRVJfRU5WXCIpXSk7Y2FzZSAxOnRyeXtuPXMuY3JlYXRlUlRDUGVlckNvbm5lY3Rpb24oe2ljZVNlcnZlcnM6W119KX1jYXRjaChlKXtyZXR1cm4gZC5kZWZhdWx0LmVycm9yKFwiRmFpbGVkIHRvIGluaXQgUlRDUGVlckNvbm5lY3Rpb25cIixlKSxbMixQcm9taXNlLnJlamVjdChlKV19cmV0dXJuIG4/WzMsMl06KGQuZGVmYXVsdC53YXJuaW5nKFwiZ2V0U3VwcG9ydGVkQ29kZWM6IG5vIFJUQ1BlZXJDb25uZWN0aW9uIGNvbnN0cnVjdG9yIGlzIGRldGVjdGVkXCIpLFsyLFByb21pc2UucmVzb2x2ZSh0KV0pO2Nhc2UgMjpyZXR1cm4gZSYmZS5zdHJlYW0/WzMsN106KGk9e21hbmRhdG9yeTp7T2ZmZXJUb1JlY2VpdmVBdWRpbzohMCxPZmZlclRvUmVjZWl2ZVZpZGVvOiEwfX0scj12b2lkIDAsKGMuaXNTYWZhcmkoKXx8Yy5pc0ZpcmVGb3goKXx8Yy5pc1dlQ2hhdEJyb3dzZXIoKSkmJm4uYWRkVHJhbnNjZWl2ZXI/KG4uYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiKSxuLmFkZFRyYW5zY2VpdmVyKFwidmlkZW9cIiksWzQsbi5jcmVhdGVPZmZlcigpXSk6WzMsNF0pO2Nhc2UgMzpyZXR1cm4gcj1hLnNlbnQoKSxbMyw2XTtjYXNlIDQ6cmV0dXJuWzQsbmV3IFByb21pc2UoZnVuY3Rpb24oZSx0KXt2YXIgYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChcIkNSRUFURU9GRkVSX1RJTUVPVVRcIil9LDNlMyk7bi5jcmVhdGVPZmZlcihmdW5jdGlvbih0KXtjbGVhclRpbWVvdXQoYSksZSh0KX0sZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KGEpLHQoZSl9LGkpfSldO2Nhc2UgNTpyPWEuc2VudCgpLGEubGFiZWw9NjtjYXNlIDY6cmV0dXJuIG4uY2xvc2UoKSxvPXIuc2RwLFsyLHUobyldO2Nhc2UgNzpyZXR1cm4gZS5zdHJlYW0uZ2V0VHJhY2tzJiZuLmFkZFRyYWNrP2Uuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24odCl7bi5hZGRUcmFjayh0LGUuc3RyZWFtKX0pOm4uYWRkU3RyZWFtKGUuc3RyZWFtKSxyPXZvaWQgMCxjLmlzU2FmYXJpKCl8fGMuaXNGaXJlRm94KCk/WzQsbi5jcmVhdGVPZmZlcigpXTpbMyw5XTtjYXNlIDg6cmV0dXJuIHI9YS5zZW50KCksWzMsMTFdO2Nhc2UgOTpyZXR1cm5bNCxuZXcgUHJvbWlzZShmdW5jdGlvbihlLHQpe24uY3JlYXRlT2ZmZXIoZSx0KX0pXTtjYXNlIDEwOnI9YS5zZW50KCksYS5sYWJlbD0xMTtjYXNlIDExOnJldHVybiBuLmNsb3NlKCksbz1yLnNkcCxbMix1KG8pXX19KX0pfTt2YXIgdT1mdW5jdGlvbihlKXt2YXIgdD17dmlkZW86W10sYXVkaW86W119O3JldHVybiBlLm1hdGNoKC8gVlA4L2kpJiZ0LnZpZGVvLnB1c2goXCJWUDhcIiksZS5tYXRjaCgvIEgyNjQvaSkmJnQudmlkZW8ucHVzaChcIkgyNjRcIiksZS5tYXRjaCgvIG9wdXMvaSkmJnQuYXVkaW8ucHVzaChcIk9QVVNcIiksUHJvbWlzZS5yZXNvbHZlKHQpfX0sZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4oMzEpLGE9bigzMikscj1uKDMzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7cmV0dXJuIGkoZSl8fGEoZSl8fHIoKX19LGZ1bmN0aW9uKGUsdCl7dmFyIG49XCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNyeXB0byYmY3J5cHRvLmdldFJhbmRvbVZhbHVlcyYmY3J5cHRvLmdldFJhbmRvbVZhbHVlcy5iaW5kKGNyeXB0byl8fFwidW5kZWZpbmVkXCIhPXR5cGVvZiBtc0NyeXB0byYmXCJmdW5jdGlvblwiPT10eXBlb2Ygd2luZG93Lm1zQ3J5cHRvLmdldFJhbmRvbVZhbHVlcyYmbXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQobXNDcnlwdG8pO2lmKG4pe3ZhciBpPW5ldyBVaW50OEFycmF5KDE2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtyZXR1cm4gbihpKSxpfX1lbHNle3ZhciBhPW5ldyBBcnJheSgxNik7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7Zm9yKHZhciBlLHQ9MDt0PDE2O3QrKykwPT0oMyZ0KSYmKGU9NDI5NDk2NzI5NipNYXRoLnJhbmRvbSgpKSxhW3RdPWU+Pj4oKDMmdCk8PDMpJjI1NTtyZXR1cm4gYX19fSxmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj1bXSxpPTA7aTwyNTY7KytpKW5baV09KGkrMjU2KS50b1N0cmluZygxNikuc3Vic3RyKDEpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciBpPXR8fDAsYT1uO3JldHVyblthW2VbaSsrXV0sYVtlW2krK11dLGFbZVtpKytdXSxhW2VbaSsrXV0sXCItXCIsYVtlW2krK11dLGFbZVtpKytdXSxcIi1cIixhW2VbaSsrXV0sYVtlW2krK11dLFwiLVwiLGFbZVtpKytdXSxhW2VbaSsrXV0sXCItXCIsYVtlW2krK11dLGFbZVtpKytdXSxhW2VbaSsrXV0sYVtlW2krK11dLGFbZVtpKytdXSxhW2VbaSsrXV1dLmpvaW4oXCJcIil9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQsbil7cmV0dXJuIHQgaW4gZT9PYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHt2YWx1ZTpuLGVudW1lcmFibGU6ITAsY29uZmlndXJhYmxlOiEwLHdyaXRhYmxlOiEwfSk6ZVt0XT1uLGV9fSxmdW5jdGlvbihlLHQsbil7dmFyIGk9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc3x8XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGZ9KCl8fEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSxhPWkucmVnZW5lcmF0b3JSdW50aW1lJiZPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhpKS5pbmRleE9mKFwicmVnZW5lcmF0b3JSdW50aW1lXCIpPj0wLHI9YSYmaS5yZWdlbmVyYXRvclJ1bnRpbWU7aWYoaS5yZWdlbmVyYXRvclJ1bnRpbWU9dm9pZCAwLGUuZXhwb3J0cz1uKDI1KSxhKWkucmVnZW5lcmF0b3JSdW50aW1lPXI7ZWxzZSB0cnl7ZGVsZXRlIGkucmVnZW5lcmF0b3JSdW50aW1lfWNhdGNoKGUpe2kucmVnZW5lcmF0b3JSdW50aW1lPXZvaWQgMH19LGZ1bmN0aW9uKGUsdCl7IWZ1bmN0aW9uKHQpe1widXNlIHN0cmljdFwiO3ZhciBuLGk9T2JqZWN0LnByb3RvdHlwZSxhPWkuaGFzT3duUHJvcGVydHkscj1cImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2w/U3ltYm9sOnt9LG89ci5pdGVyYXRvcnx8XCJAQGl0ZXJhdG9yXCIscz1yLmFzeW5jSXRlcmF0b3J8fFwiQEBhc3luY0l0ZXJhdG9yXCIsYz1yLnRvU3RyaW5nVGFnfHxcIkBAdG9TdHJpbmdUYWdcIixkPVwib2JqZWN0XCI9PXR5cGVvZiBlLHU9dC5yZWdlbmVyYXRvclJ1bnRpbWU7aWYodSlkJiYoZS5leHBvcnRzPXUpO2Vsc2V7KHU9dC5yZWdlbmVyYXRvclJ1bnRpbWU9ZD9lLmV4cG9ydHM6e30pLndyYXA9RTt2YXIgbD1cInN1c3BlbmRlZFN0YXJ0XCIscD1cInN1c3BlbmRlZFlpZWxkXCIsZj1cImV4ZWN1dGluZ1wiLG09XCJjb21wbGV0ZWRcIixnPXt9LHY9e307dltvXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfTt2YXIgaD1PYmplY3QuZ2V0UHJvdG90eXBlT2YsUz1oJiZoKGgoayhbXSkpKTtTJiZTIT09aSYmYS5jYWxsKFMsbykmJih2PVMpO3ZhciBfPWIucHJvdG90eXBlPXkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUodik7VC5wcm90b3R5cGU9Xy5jb25zdHJ1Y3Rvcj1iLGIuY29uc3RydWN0b3I9VCxiW2NdPVQuZGlzcGxheU5hbWU9XCJHZW5lcmF0b3JGdW5jdGlvblwiLHUuaXNHZW5lcmF0b3JGdW5jdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1cImZ1bmN0aW9uXCI9PXR5cGVvZiBlJiZlLmNvbnN0cnVjdG9yO3JldHVybiEhdCYmKHQ9PT1UfHxcIkdlbmVyYXRvckZ1bmN0aW9uXCI9PT0odC5kaXNwbGF5TmFtZXx8dC5uYW1lKSl9LHUubWFyaz1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LnNldFByb3RvdHlwZU9mP09iamVjdC5zZXRQcm90b3R5cGVPZihlLGIpOihlLl9fcHJvdG9fXz1iLGMgaW4gZXx8KGVbY109XCJHZW5lcmF0b3JGdW5jdGlvblwiKSksZS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShfKSxlfSx1LmF3cmFwPWZ1bmN0aW9uKGUpe3JldHVybntfX2F3YWl0OmV9fSxSKEEucHJvdG90eXBlKSxBLnByb3RvdHlwZVtzXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSx1LkFzeW5jSXRlcmF0b3I9QSx1LmFzeW5jPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBhPW5ldyBBKEUoZSx0LG4saSkpO3JldHVybiB1LmlzR2VuZXJhdG9yRnVuY3Rpb24odCk/YTphLm5leHQoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLmRvbmU/ZS52YWx1ZTphLm5leHQoKX0pfSxSKF8pLF9bY109XCJHZW5lcmF0b3JcIixfW29dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LF8udG9TdHJpbmc9ZnVuY3Rpb24oKXtyZXR1cm5cIltvYmplY3QgR2VuZXJhdG9yXVwifSx1LmtleXM9ZnVuY3Rpb24oZSl7dmFyIHQ9W107Zm9yKHZhciBuIGluIGUpdC5wdXNoKG4pO3JldHVybiB0LnJldmVyc2UoKSxmdW5jdGlvbiBuKCl7Zm9yKDt0Lmxlbmd0aDspe3ZhciBpPXQucG9wKCk7aWYoaSBpbiBlKXJldHVybiBuLnZhbHVlPWksbi5kb25lPSExLG59cmV0dXJuIG4uZG9uZT0hMCxufX0sdS52YWx1ZXM9ayx3LnByb3RvdHlwZT17Y29uc3RydWN0b3I6dyxyZXNldDpmdW5jdGlvbihlKXtpZih0aGlzLnByZXY9MCx0aGlzLm5leHQ9MCx0aGlzLnNlbnQ9dGhpcy5fc2VudD1uLHRoaXMuZG9uZT0hMSx0aGlzLmRlbGVnYXRlPW51bGwsdGhpcy5tZXRob2Q9XCJuZXh0XCIsdGhpcy5hcmc9bix0aGlzLnRyeUVudHJpZXMuZm9yRWFjaChOKSwhZSlmb3IodmFyIHQgaW4gdGhpcylcInRcIj09PXQuY2hhckF0KDApJiZhLmNhbGwodGhpcyx0KSYmIWlzTmFOKCt0LnNsaWNlKDEpKSYmKHRoaXNbdF09bil9LHN0b3A6ZnVuY3Rpb24oKXt0aGlzLmRvbmU9ITA7dmFyIGU9dGhpcy50cnlFbnRyaWVzWzBdLmNvbXBsZXRpb247aWYoXCJ0aHJvd1wiPT09ZS50eXBlKXRocm93IGUuYXJnO3JldHVybiB0aGlzLnJ2YWx9LGRpc3BhdGNoRXhjZXB0aW9uOmZ1bmN0aW9uKGUpe2lmKHRoaXMuZG9uZSl0aHJvdyBlO3ZhciB0PXRoaXM7ZnVuY3Rpb24gaShpLGEpe3JldHVybiBzLnR5cGU9XCJ0aHJvd1wiLHMuYXJnPWUsdC5uZXh0PWksYSYmKHQubWV0aG9kPVwibmV4dFwiLHQuYXJnPW4pLCEhYX1mb3IodmFyIHI9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3I+PTA7LS1yKXt2YXIgbz10aGlzLnRyeUVudHJpZXNbcl0scz1vLmNvbXBsZXRpb247aWYoXCJyb290XCI9PT1vLnRyeUxvYylyZXR1cm4gaShcImVuZFwiKTtpZihvLnRyeUxvYzw9dGhpcy5wcmV2KXt2YXIgYz1hLmNhbGwobyxcImNhdGNoTG9jXCIpLGQ9YS5jYWxsKG8sXCJmaW5hbGx5TG9jXCIpO2lmKGMmJmQpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBpKG8uY2F0Y2hMb2MsITApO2lmKHRoaXMucHJldjxvLmZpbmFsbHlMb2MpcmV0dXJuIGkoby5maW5hbGx5TG9jKX1lbHNlIGlmKGMpe2lmKHRoaXMucHJldjxvLmNhdGNoTG9jKXJldHVybiBpKG8uY2F0Y2hMb2MsITApfWVsc2V7aWYoIWQpdGhyb3cgbmV3IEVycm9yKFwidHJ5IHN0YXRlbWVudCB3aXRob3V0IGNhdGNoIG9yIGZpbmFsbHlcIik7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaShvLmZpbmFsbHlMb2MpfX19fSxhYnJ1cHQ6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG49dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO24+PTA7LS1uKXt2YXIgaT10aGlzLnRyeUVudHJpZXNbbl07aWYoaS50cnlMb2M8PXRoaXMucHJldiYmYS5jYWxsKGksXCJmaW5hbGx5TG9jXCIpJiZ0aGlzLnByZXY8aS5maW5hbGx5TG9jKXt2YXIgcj1pO2JyZWFrfX1yJiYoXCJicmVha1wiPT09ZXx8XCJjb250aW51ZVwiPT09ZSkmJnIudHJ5TG9jPD10JiZ0PD1yLmZpbmFsbHlMb2MmJihyPW51bGwpO3ZhciBvPXI/ci5jb21wbGV0aW9uOnt9O3JldHVybiBvLnR5cGU9ZSxvLmFyZz10LHI/KHRoaXMubWV0aG9kPVwibmV4dFwiLHRoaXMubmV4dD1yLmZpbmFsbHlMb2MsZyk6dGhpcy5jb21wbGV0ZShvKX0sY29tcGxldGU6ZnVuY3Rpb24oZSx0KXtpZihcInRocm93XCI9PT1lLnR5cGUpdGhyb3cgZS5hcmc7cmV0dXJuXCJicmVha1wiPT09ZS50eXBlfHxcImNvbnRpbnVlXCI9PT1lLnR5cGU/dGhpcy5uZXh0PWUuYXJnOlwicmV0dXJuXCI9PT1lLnR5cGU/KHRoaXMucnZhbD10aGlzLmFyZz1lLmFyZyx0aGlzLm1ldGhvZD1cInJldHVyblwiLHRoaXMubmV4dD1cImVuZFwiKTpcIm5vcm1hbFwiPT09ZS50eXBlJiZ0JiYodGhpcy5uZXh0PXQpLGd9LGZpbmlzaDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgbj10aGlzLnRyeUVudHJpZXNbdF07aWYobi5maW5hbGx5TG9jPT09ZSlyZXR1cm4gdGhpcy5jb21wbGV0ZShuLmNvbXBsZXRpb24sbi5hZnRlckxvYyksTihuKSxnfX0sY2F0Y2g6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PXRoaXMudHJ5RW50cmllcy5sZW5ndGgtMTt0Pj0wOy0tdCl7dmFyIG49dGhpcy50cnlFbnRyaWVzW3RdO2lmKG4udHJ5TG9jPT09ZSl7dmFyIGk9bi5jb21wbGV0aW9uO2lmKFwidGhyb3dcIj09PWkudHlwZSl7dmFyIGE9aS5hcmc7TihuKX1yZXR1cm4gYX19dGhyb3cgbmV3IEVycm9yKFwiaWxsZWdhbCBjYXRjaCBhdHRlbXB0XCIpfSxkZWxlZ2F0ZVlpZWxkOmZ1bmN0aW9uKGUsdCxpKXtyZXR1cm4gdGhpcy5kZWxlZ2F0ZT17aXRlcmF0b3I6ayhlKSxyZXN1bHROYW1lOnQsbmV4dExvYzppfSxcIm5leHRcIj09PXRoaXMubWV0aG9kJiYodGhpcy5hcmc9biksZ319fWZ1bmN0aW9uIEUoZSx0LG4saSl7dmFyIGE9dCYmdC5wcm90b3R5cGUgaW5zdGFuY2VvZiB5P3Q6eSxyPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLG89bmV3IHcoaXx8W10pO3JldHVybiByLl9pbnZva2U9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWw7cmV0dXJuIGZ1bmN0aW9uKGEscil7aWYoaT09PWYpdGhyb3cgbmV3IEVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgcnVubmluZ1wiKTtpZihpPT09bSl7aWYoXCJ0aHJvd1wiPT09YSl0aHJvdyByO3JldHVybiBEKCl9Zm9yKG4ubWV0aG9kPWEsbi5hcmc9cjs7KXt2YXIgbz1uLmRlbGVnYXRlO2lmKG8pe3ZhciBzPU8obyxuKTtpZihzKXtpZihzPT09Zyljb250aW51ZTtyZXR1cm4gc319aWYoXCJuZXh0XCI9PT1uLm1ldGhvZCluLnNlbnQ9bi5fc2VudD1uLmFyZztlbHNlIGlmKFwidGhyb3dcIj09PW4ubWV0aG9kKXtpZihpPT09bCl0aHJvdyBpPW0sbi5hcmc7bi5kaXNwYXRjaEV4Y2VwdGlvbihuLmFyZyl9ZWxzZVwicmV0dXJuXCI9PT1uLm1ldGhvZCYmbi5hYnJ1cHQoXCJyZXR1cm5cIixuLmFyZyk7aT1mO3ZhciBjPUkoZSx0LG4pO2lmKFwibm9ybWFsXCI9PT1jLnR5cGUpe2lmKGk9bi5kb25lP206cCxjLmFyZz09PWcpY29udGludWU7cmV0dXJue3ZhbHVlOmMuYXJnLGRvbmU6bi5kb25lfX1cInRocm93XCI9PT1jLnR5cGUmJihpPW0sbi5tZXRob2Q9XCJ0aHJvd1wiLG4uYXJnPWMuYXJnKX19fShlLG4sbykscn1mdW5jdGlvbiBJKGUsdCxuKXt0cnl7cmV0dXJue3R5cGU6XCJub3JtYWxcIixhcmc6ZS5jYWxsKHQsbil9fWNhdGNoKGUpe3JldHVybnt0eXBlOlwidGhyb3dcIixhcmc6ZX19fWZ1bmN0aW9uIHkoKXt9ZnVuY3Rpb24gVCgpe31mdW5jdGlvbiBiKCl7fWZ1bmN0aW9uIFIoZSl7W1wibmV4dFwiLFwidGhyb3dcIixcInJldHVyblwiXS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2VbdF09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX2ludm9rZSh0LGUpfX0pfWZ1bmN0aW9uIEEoZSl7dmFyIHQ7dGhpcy5faW52b2tlPWZ1bmN0aW9uKG4saSl7ZnVuY3Rpb24gcigpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LHIpeyFmdW5jdGlvbiB0KG4saSxyLG8pe3ZhciBzPUkoZVtuXSxlLGkpO2lmKFwidGhyb3dcIiE9PXMudHlwZSl7dmFyIGM9cy5hcmcsZD1jLnZhbHVlO3JldHVybiBkJiZcIm9iamVjdFwiPT10eXBlb2YgZCYmYS5jYWxsKGQsXCJfX2F3YWl0XCIpP1Byb21pc2UucmVzb2x2ZShkLl9fYXdhaXQpLnRoZW4oZnVuY3Rpb24oZSl7dChcIm5leHRcIixlLHIsbyl9LGZ1bmN0aW9uKGUpe3QoXCJ0aHJvd1wiLGUscixvKX0pOlByb21pc2UucmVzb2x2ZShkKS50aGVuKGZ1bmN0aW9uKGUpe2MudmFsdWU9ZSxyKGMpfSxmdW5jdGlvbihlKXtyZXR1cm4gdChcInRocm93XCIsZSxyLG8pfSl9byhzLmFyZyl9KG4saSx0LHIpfSl9cmV0dXJuIHQ9dD90LnRoZW4ocixyKTpyKCl9fWZ1bmN0aW9uIE8oZSx0KXt2YXIgaT1lLml0ZXJhdG9yW3QubWV0aG9kXTtpZihpPT09bil7aWYodC5kZWxlZ2F0ZT1udWxsLFwidGhyb3dcIj09PXQubWV0aG9kKXtpZihlLml0ZXJhdG9yLnJldHVybiYmKHQubWV0aG9kPVwicmV0dXJuXCIsdC5hcmc9bixPKGUsdCksXCJ0aHJvd1wiPT09dC5tZXRob2QpKXJldHVybiBnO3QubWV0aG9kPVwidGhyb3dcIix0LmFyZz1uZXcgVHlwZUVycm9yKFwiVGhlIGl0ZXJhdG9yIGRvZXMgbm90IHByb3ZpZGUgYSAndGhyb3cnIG1ldGhvZFwiKX1yZXR1cm4gZ312YXIgYT1JKGksZS5pdGVyYXRvcix0LmFyZyk7aWYoXCJ0aHJvd1wiPT09YS50eXBlKXJldHVybiB0Lm1ldGhvZD1cInRocm93XCIsdC5hcmc9YS5hcmcsdC5kZWxlZ2F0ZT1udWxsLGc7dmFyIHI9YS5hcmc7cmV0dXJuIHI/ci5kb25lPyh0W2UucmVzdWx0TmFtZV09ci52YWx1ZSx0Lm5leHQ9ZS5uZXh0TG9jLFwicmV0dXJuXCIhPT10Lm1ldGhvZCYmKHQubWV0aG9kPVwibmV4dFwiLHQuYXJnPW4pLHQuZGVsZWdhdGU9bnVsbCxnKTpyOih0Lm1ldGhvZD1cInRocm93XCIsdC5hcmc9bmV3IFR5cGVFcnJvcihcIml0ZXJhdG9yIHJlc3VsdCBpcyBub3QgYW4gb2JqZWN0XCIpLHQuZGVsZWdhdGU9bnVsbCxnKX1mdW5jdGlvbiBDKGUpe3ZhciB0PXt0cnlMb2M6ZVswXX07MSBpbiBlJiYodC5jYXRjaExvYz1lWzFdKSwyIGluIGUmJih0LmZpbmFsbHlMb2M9ZVsyXSx0LmFmdGVyTG9jPWVbM10pLHRoaXMudHJ5RW50cmllcy5wdXNoKHQpfWZ1bmN0aW9uIE4oZSl7dmFyIHQ9ZS5jb21wbGV0aW9ufHx7fTt0LnR5cGU9XCJub3JtYWxcIixkZWxldGUgdC5hcmcsZS5jb21wbGV0aW9uPXR9ZnVuY3Rpb24gdyhlKXt0aGlzLnRyeUVudHJpZXM9W3t0cnlMb2M6XCJyb290XCJ9XSxlLmZvckVhY2goQyx0aGlzKSx0aGlzLnJlc2V0KCEwKX1mdW5jdGlvbiBrKGUpe2lmKGUpe3ZhciB0PWVbb107aWYodClyZXR1cm4gdC5jYWxsKGUpO2lmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGUubmV4dClyZXR1cm4gZTtpZighaXNOYU4oZS5sZW5ndGgpKXt2YXIgaT0tMSxyPWZ1bmN0aW9uIHQoKXtmb3IoOysraTxlLmxlbmd0aDspaWYoYS5jYWxsKGUsaSkpcmV0dXJuIHQudmFsdWU9ZVtpXSx0LmRvbmU9ITEsdDtyZXR1cm4gdC52YWx1ZT1uLHQuZG9uZT0hMCx0fTtyZXR1cm4gci5uZXh0PXJ9fXJldHVybntuZXh0OkR9fWZ1bmN0aW9uIEQoKXtyZXR1cm57dmFsdWU6bixkb25lOiEwfX19KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN8fFwib2JqZWN0XCI9PXR5cGVvZiBzZWxmJiZzZWxmfSgpfHxGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCkpfSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZihBcnJheS5pc0FycmF5KGUpKXJldHVybiBlfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXt2YXIgbj1bXSxpPSEwLGE9ITEscj12b2lkIDA7dHJ5e2Zvcih2YXIgbyxzPWVbU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0obz1zLm5leHQoKSkuZG9uZSkmJihuLnB1c2goby52YWx1ZSksIXR8fG4ubGVuZ3RoIT09dCk7aT0hMCk7fWNhdGNoKGUpe2E9ITAscj1lfWZpbmFsbHl7dHJ5e2l8fG51bGw9PXMucmV0dXJufHxzLnJldHVybigpfWZpbmFsbHl7aWYoYSl0aHJvdyByfX1yZXR1cm4gbn19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBkZXN0cnVjdHVyZSBub24taXRlcmFibGUgaW5zdGFuY2VcIil9fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGk9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93LlJUQ1BlZXJDb25uZWN0aW9uLGE9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93LndlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLHI9XCJvYmplY3RcIj09dHlwZW9mIHdpbmRvdyYmd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uO3QuY3JlYXRlUlRDUGVlckNvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9aXx8YXx8cjtyZXR1cm4gdD9uZXcgdChlKTpudWxsfX0sZnVuY3Rpb24oZSx0LG4pe3ZhciBpO1xuLyohXG4gKiBFdmVudEVtaXR0ZXIgdjUuMi44IC0gZ2l0LmlvL2VlXG4gKiBVbmxpY2Vuc2UgLSBodHRwOi8vdW5saWNlbnNlLm9yZy9cbiAqIE9saXZlciBDYWxkd2VsbCAtIGh0dHBzOi8vb2xpLm1lLnVrL1xuICogQHByZXNlcnZlXG4gKi8hZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gYSgpe312YXIgcj1hLnByb3RvdHlwZSxvPXQuRXZlbnRFbWl0dGVyO2Z1bmN0aW9uIHMoZSx0KXtmb3IodmFyIG49ZS5sZW5ndGg7bi0tOylpZihlW25dLmxpc3RlbmVyPT09dClyZXR1cm4gbjtyZXR1cm4tMX1mdW5jdGlvbiBjKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiB0aGlzW2VdLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19ci5nZXRMaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPXRoaXMuX2dldEV2ZW50cygpO2lmKGUgaW5zdGFuY2VvZiBSZWdFeHApZm9yKG4gaW4gdD17fSxpKWkuaGFzT3duUHJvcGVydHkobikmJmUudGVzdChuKSYmKHRbbl09aVtuXSk7ZWxzZSB0PWlbZV18fChpW2VdPVtdKTtyZXR1cm4gdH0sci5mbGF0dGVuTGlzdGVuZXJzPWZ1bmN0aW9uKGUpe3ZhciB0LG49W107Zm9yKHQ9MDt0PGUubGVuZ3RoO3QrPTEpbi5wdXNoKGVbdF0ubGlzdGVuZXIpO3JldHVybiBufSxyLmdldExpc3RlbmVyc0FzT2JqZWN0PWZ1bmN0aW9uKGUpe3ZhciB0LG49dGhpcy5nZXRMaXN0ZW5lcnMoZSk7cmV0dXJuIG4gaW5zdGFuY2VvZiBBcnJheSYmKCh0PXt9KVtlXT1uKSx0fHxufSxyLmFkZExpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7aWYoIWZ1bmN0aW9uIGUodCl7cmV0dXJuXCJmdW5jdGlvblwiPT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFJlZ0V4cHx8ISghdHx8XCJvYmplY3RcIiE9dHlwZW9mIHQpJiZlKHQubGlzdGVuZXIpfSh0KSl0aHJvdyBuZXcgVHlwZUVycm9yKFwibGlzdGVuZXIgbXVzdCBiZSBhIGZ1bmN0aW9uXCIpO3ZhciBuLGk9dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChlKSxhPVwib2JqZWN0XCI9PXR5cGVvZiB0O2ZvcihuIGluIGkpaS5oYXNPd25Qcm9wZXJ0eShuKSYmLTE9PT1zKGlbbl0sdCkmJmlbbl0ucHVzaChhP3Q6e2xpc3RlbmVyOnQsb25jZTohMX0pO3JldHVybiB0aGlzfSxyLm9uPWMoXCJhZGRMaXN0ZW5lclwiKSxyLmFkZE9uY2VMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLmFkZExpc3RlbmVyKGUse2xpc3RlbmVyOnQsb25jZTohMH0pfSxyLm9uY2U9YyhcImFkZE9uY2VMaXN0ZW5lclwiKSxyLmRlZmluZUV2ZW50PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmdldExpc3RlbmVycyhlKSx0aGlzfSxyLmRlZmluZUV2ZW50cz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrPTEpdGhpcy5kZWZpbmVFdmVudChlW3RdKTtyZXR1cm4gdGhpc30sci5yZW1vdmVMaXN0ZW5lcj1mdW5jdGlvbihlLHQpe3ZhciBuLGksYT10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpO2ZvcihpIGluIGEpYS5oYXNPd25Qcm9wZXJ0eShpKSYmLTEhPT0obj1zKGFbaV0sdCkpJiZhW2ldLnNwbGljZShuLDEpO3JldHVybiB0aGlzfSxyLm9mZj1jKFwicmVtb3ZlTGlzdGVuZXJcIiksci5hZGRMaXN0ZW5lcnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCExLGUsdCl9LHIucmVtb3ZlTGlzdGVuZXJzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMubWFuaXB1bGF0ZUxpc3RlbmVycyghMCxlLHQpfSxyLm1hbmlwdWxhdGVMaXN0ZW5lcnM9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpLGEscj1lP3RoaXMucmVtb3ZlTGlzdGVuZXI6dGhpcy5hZGRMaXN0ZW5lcixvPWU/dGhpcy5yZW1vdmVMaXN0ZW5lcnM6dGhpcy5hZGRMaXN0ZW5lcnM7aWYoXCJvYmplY3RcIiE9dHlwZW9mIHR8fHQgaW5zdGFuY2VvZiBSZWdFeHApZm9yKGk9bi5sZW5ndGg7aS0tOylyLmNhbGwodGhpcyx0LG5baV0pO2Vsc2UgZm9yKGkgaW4gdCl0Lmhhc093blByb3BlcnR5KGkpJiYoYT10W2ldKSYmKFwiZnVuY3Rpb25cIj09dHlwZW9mIGE/ci5jYWxsKHRoaXMsaSxhKTpvLmNhbGwodGhpcyxpLGEpKTtyZXR1cm4gdGhpc30sci5yZW1vdmVFdmVudD1mdW5jdGlvbihlKXt2YXIgdCxuPXR5cGVvZiBlLGk9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoXCJzdHJpbmdcIj09PW4pZGVsZXRlIGlbZV07ZWxzZSBpZihlIGluc3RhbmNlb2YgUmVnRXhwKWZvcih0IGluIGkpaS5oYXNPd25Qcm9wZXJ0eSh0KSYmZS50ZXN0KHQpJiZkZWxldGUgaVt0XTtlbHNlIGRlbGV0ZSB0aGlzLl9ldmVudHM7cmV0dXJuIHRoaXN9LHIucmVtb3ZlQWxsTGlzdGVuZXJzPWMoXCJyZW1vdmVFdmVudFwiKSxyLmVtaXRFdmVudD1mdW5jdGlvbihlLHQpe3ZhciBuLGksYSxyLG89dGhpcy5nZXRMaXN0ZW5lcnNBc09iamVjdChlKTtmb3IociBpbiBvKWlmKG8uaGFzT3duUHJvcGVydHkocikpZm9yKG49b1tyXS5zbGljZSgwKSxhPTA7YTxuLmxlbmd0aDthKyspITA9PT0oaT1uW2FdKS5vbmNlJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsaS5saXN0ZW5lciksaS5saXN0ZW5lci5hcHBseSh0aGlzLHR8fFtdKT09PXRoaXMuX2dldE9uY2VSZXR1cm5WYWx1ZSgpJiZ0aGlzLnJlbW92ZUxpc3RlbmVyKGUsaS5saXN0ZW5lcik7cmV0dXJuIHRoaXN9LHIudHJpZ2dlcj1jKFwiZW1pdEV2ZW50XCIpLHIuZW1pdD1mdW5jdGlvbihlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7cmV0dXJuIHRoaXMuZW1pdEV2ZW50KGUsdCl9LHIuc2V0T25jZVJldHVyblZhbHVlPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9vbmNlUmV0dXJuVmFsdWU9ZSx0aGlzfSxyLl9nZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5oYXNPd25Qcm9wZXJ0eShcIl9vbmNlUmV0dXJuVmFsdWVcIil8fHRoaXMuX29uY2VSZXR1cm5WYWx1ZX0sci5fZ2V0RXZlbnRzPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2V2ZW50c3x8KHRoaXMuX2V2ZW50cz17fSl9LGEubm9Db25mbGljdD1mdW5jdGlvbigpe3JldHVybiB0LkV2ZW50RW1pdHRlcj1vLGF9LHZvaWQgMD09PShpPWZ1bmN0aW9uKCl7cmV0dXJuIGF9LmNhbGwodCxuLHQsZSkpfHwoZS5leHBvcnRzPWkpfShcInVuZGVmaW5lZFwiIT10eXBlb2Ygd2luZG93P3dpbmRvdzp0aGlzfHx7fSl9LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpe2Zvcih2YXIgdD0wLG49bmV3IEFycmF5KGUubGVuZ3RoKTt0PGUubGVuZ3RoO3QrKyluW3RdPWVbdF07cmV0dXJuIG59fX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoU3ltYm9sLml0ZXJhdG9yIGluIE9iamVjdChlKXx8XCJbb2JqZWN0IEFyZ3VtZW50c11cIj09PU9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChlKSlyZXR1cm4gQXJyYXkuZnJvbShlKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKCl7dGhyb3cgbmV3IFR5cGVFcnJvcihcIkludmFsaWQgYXR0ZW1wdCB0byBzcHJlYWQgbm9uLWl0ZXJhYmxlIGluc3RhbmNlXCIpfX0sZnVuY3Rpb24odCxuLGEpe1widXNlIHN0cmljdFwiO2EucihuKTt2YXIgcj1hKDMpLG89YSgwKSxzPWEoMiksYz1mdW5jdGlvbigpe3ZhciBlPXtkaXNwYXRjaGVyOnt9fTtyZXR1cm4gZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzPXt9LGUuYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LG4pe3ZvaWQgMD09PWUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0XSYmKGUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0XT1bXSksZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3RdLnB1c2gobil9LGUuaGFzTGlzdGVuZXJzPWZ1bmN0aW9uKHQpe3JldHVybiEoIWUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0XXx8IWUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0XS5sZW5ndGgpfSxlLm9uPWUuYWRkRXZlbnRMaXN0ZW5lcixlLnJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odCxuKXt2YXIgaTstMSE9PShpPWUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0XS5pbmRleE9mKG4pKSYmZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3RdLnNwbGljZShpLDEpfSxlLmRpc3BhdGNoRXZlbnQ9ZnVuY3Rpb24odCxuKXt2YXIgaTtmb3IoaSBpbiBlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXSllLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXSYmZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3QudHlwZV0uaGFzT3duUHJvcGVydHkoaSkmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0LnR5cGVdW2ldJiYobj9lLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXVtpXSh0KTpQcm9taXNlLnJlc29sdmUodCkudGhlbihlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXVtpXSkpfSxlLmRpc3BhdGNoU29ja2V0RXZlbnQ9ZnVuY3Rpb24odCl7dmFyIG47Zm9yKG4gaW4gZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3QudHlwZV0pZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3QudHlwZV0mJmUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0LnR5cGVdLmhhc093blByb3BlcnR5KG4pJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXVtuXSYmZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3QudHlwZV1bbl0odC5tc2cpfSxlfSxkPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiB0LnR5cGU9ZS50eXBlLHR9LHU9ZnVuY3Rpb24oZSl7dmFyIHQ9ZChlKTtyZXR1cm4gdC5zdHJlYW09ZS5zdHJlYW0sdC5yZWFzb249ZS5yZWFzb24sdC5tc2c9ZS5tc2csdH0sbD1mdW5jdGlvbihlKXt2YXIgdD1kKGUpO3JldHVybiB0LnVpZD1lLnVpZCx0LmF0dHI9ZS5hdHRyLHQuc3RyZWFtPWUuc3RyZWFtLHR9LHA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZChlKTtyZXR1cm4gdC5tc2c9ZS5tc2csdH0sZj1mdW5jdGlvbihlKXt2YXIgdD1kKGUpO3JldHVybiB0LnVybD1lLnVybCx0LnVpZD1lLnVpZCx0LnN0YXR1cz1lLnN0YXR1cyx0LnJlYXNvbj1lLnJlYXNvbix0fSxtPWEoNCksZz1mdW5jdGlvbigpe307Zy5wcm90b3R5cGUuc2V0PWZ1bmN0aW9uKGUsdCl7W1wiQmF0dGVyeUxldmVsXCJdLmluZGV4T2YoZSk+LTEmJih0aGlzW2VdPXQpfTt2YXIgdj1uZXcgZnVuY3Rpb24oKXt2YXIgZT1jKCk7cmV0dXJuIGUuc3RhdGVzPXtVTklOSVQ6XCJVTklOSVRcIixJTklUSU5HOlwiSU5JVElOR1wiLElOSVRFRDpcIklOSVRFRFwifSxlLnN0YXRlPWUuc3RhdGVzLlVOSU5JVCxlLmJhdHRlcnlNYW5hZ2VyPW51bGwsZS5faW5pdD1mdW5jdGlvbih0LG4pe2Uuc3RhdGU9ZS5zdGF0ZXMuSU5JVElORyxuYXZpZ2F0b3IuZ2V0QmF0dGVyeT9uYXZpZ2F0b3IuZ2V0QmF0dGVyeSgpLnRoZW4oZnVuY3Rpb24obil7ZS5iYXR0ZXJ5TWFuYWdlcj1uLHQmJnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KCl9LDApfSkuY2F0Y2goZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwibmF2aWdhdG9yLmdldEJhdHRlcnkgaXMgZGlzYWJsZWRcIixlKSx0JiZ0KCl9KTooZS5zdGF0ZT1lLnN0YXRlcy5JTklURUQsdCYmdCgpKX0sZS5fZ2V0QmF0dGVyeVN0YXRzPWZ1bmN0aW9uKCl7dmFyIHQ9e307cmV0dXJuIGUuYmF0dGVyeU1hbmFnZXImJmUuYmF0dGVyeU1hbmFnZXIubGV2ZWw/dC5CYXR0ZXJ5TGV2ZWw9TWF0aC5mbG9vcigxMDAqZS5iYXR0ZXJ5TWFuYWdlci5sZXZlbCk6dC5CYXR0ZXJ5TGV2ZWw9XCJVTlNVUFBPUlRFRFwiLHR9LGUuZ2V0U3RhdHM9ZnVuY3Rpb24odCxuKXt2YXIgaT1uZXcgZyxhPWUuX2dldEJhdHRlcnlTdGF0cygpO2EmJmEuQmF0dGVyeUxldmVsJiZpLnNldChcIkJhdHRlcnlMZXZlbFwiLGEuQmF0dGVyeUxldmVsKSx0JiZ0KGkpfSxlLl9pbml0KCksZX0saD1hKDUpLFM9YS5uKGgpLF89ZnVuY3Rpb24oZSl7dmFyIHQ9YyhlKTtyZXR1cm4gdC51cmw9XCIuXCIsdH0sRT1hKDEyKSxJPXsxMDExMDA6XCJOT19GTEFHX1NFVFwiLDEwMTEwMTpcIkZMQUdfU0VUX0JVVF9FTVBUWVwiLDEwMTEwMjpcIklOVkFMSURfRkFMR19TRVRcIiwxMDEyMDM6XCJOT19TRVJWSUNFX0FWSUFCTEVcIiwwOlwiT0tfQ09ERVwiLDU6XCJJTlZBTElEX1ZFTkRPUl9LRVlcIiw3OlwiSU5WQUxJRF9DSEFOTkVMX05BTUVcIiw4OlwiSU5URVJOQUxfRVJST1JcIiw5OlwiTk9fQVVUSE9SSVpFRFwiLDEwOlwiRFlOQU1JQ19LRVlfVElNRU9VVFwiLDExOlwiTk9fQUNUSVZFX1NUQVRVU1wiLDEzOlwiRFlOQU1JQ19LRVlfRVhQSVJFRFwiLDE0OlwiU1RBVElDX1VTRV9EWUFOTUlDX0tFWVwiLDE1OlwiRFlOQU1JQ19VU0VfU1RBVElDX0tFWVwiLDEwMTAxMDA6XCJOT19GTEFHX1NFVFwiLDEwMTAxMDE6XCJGTEFHX1NFVF9CVVRfRU1QVFlcIiwxMDEwMTAyOlwiSU5WQUxJRF9GQUxHX1NFVFwiLDEwMTAyMDA6XCJOT19TRVJWSUNFX0FWQUlMQUJMRVwiLDEwMTAyMDM6XCJOT19TRVJWSUNFX0FWQUlMQUJMRV9XRUJSVENcIiwxMDEwMjA1OlwiTk9fU0VSVklDRV9BVkFJTEFCTEVfRElTUEFUQ0hFUlwiLDEwMTAyMDg6XCJOT19TRVJWSUNFX0FWQUlMQUJMRV9BUFBDRU5URVJcIiwxMDEwMjExOlwiTk9fU0VSVklDRV9BVkFJTEFCTEVfU1VBXCIsMjAxMDAwNTpcIklOVkFMSURfVkVORE9SX0tFWVwiLDIwMTAwMDc6XCJJTlZBTElEX0NIQU5ORUxfTkFNRVwiLDIwMTAwMDg6XCJJTlRFUk5BTF9FUlJPUlwiLDIwMTAwMDk6XCJOT19BVVRIT1JJWkVEXCIsMjAxMDAxMDpcIkRZTkFNSUNfS0VZX1RJTUVPVVRcIiwyMDEwMDExOlwiTk9fQUNUSVZFX1NUQVRVU1wiLDIwMTAwMTM6XCJEWU5BTUlDX0tFWV9FWFBJUkVEXCIsMjAxMDAxNDpcIlNUQVRJQ19VU0VfRFlBTk1JQ19LRVlcIiwyMDEwMDE1OlwiRFlOQU1JQ19VU0VfU1RBVElDX0tFWVwifSx5PXsyMDAwOlwiRVJSX05PX1ZPQ1NfQVZBSUxBQkxFXCIsMjAwMTpcIkVSUl9OT19WT1NfQVZBSUxBQkxFXCIsMjAwMjpcIkVSUl9KT0lOX0NIQU5ORUxfVElNRU9VVFwiLDIwMDM6XCJXQVJOX1JFUEVBVF9KT0lOXCIsMjAwNDpcIkVSUl9KT0lOX0JZX01VTFRJX0lQXCIsMjAxMTpcIkVSUl9OT1RfSk9JTkVEXCIsMjAxMjpcIldBUk5fUkVQRUFUX0pPSU5cIiwyMDEzOlwiRVJSX0lOVkFMSURfVkVORE9SX0tFWVwiLDIwMTQ6XCJFUlJfSU5WQUxJRF9DSEFOTkVMX05BTUVcIiwyMDE1OlwiRVJSX0lOVkFMSURfU1RSSU5HVUlEXCIsMjAxNjpcIkVSUl9UT09fTUFOWV9VU0VSU1wiLDIwMTc6XCJFUlJfU0VUX0NMSUVOVF9ST0xFX1RJTUVPVVRcIiwyMDE4OlwiRVJSX1NFVF9DTElFTlRfUk9MRV9OT19QRVJNSVNTSU9OXCIsMjAxOTpcIkVSUl9TRVRfQ0xJRU5UX1JPTEVfQUxSRUFEWV9JTl9VU0VcIiwyMDIwOlwiRVJSX1BVQkxJU0hfUkVRVUVTVF9JTlZBTElEXCIsMjAyMTpcIkVSUl9TVUJTQ1JJQkVfUkVRVUVTVF9JTlZBTElEXCIsMjAyMjpcIkVSUl9OT1RfU1VQUE9SVEVEX01FU1NBR0VcIiwyMDIzOlwiRVJSX0lMTEVBR0FMX1BMVUdJTlwiLDEwMTpcIkVSUl9JTlZBTElEX1ZFTkRPUl9LRVlcIiwxMDI6XCJFUlJfSU5WQUxJRF9DSEFOTkVMX05BTUVcIiwxMDM6XCJXQVJOX05PX0FWQUlMQUJMRV9DSEFOTkVMXCIsMTA0OlwiV0FSTl9MT09LVVBfQ0hBTk5FTF9USU1FT1VUXCIsMTA1OlwiV0FSTl9MT09LVVBfQ0hBTk5FTF9SRUpFQ1RFRFwiLDEwNjpcIldBUk5fT1BFTl9DSEFOTkVMX1RJTUVPVVRcIiwxMDc6XCJXQVJOX09QRU5fQ0hBTk5FTF9SRUpFQ1RFRFwiLDEwODpcIldBUk5fUkVRVUVTVF9ERUZFUlJFRFwiLDEwOTpcIkVSUl9EWU5BTUlDX0tFWV9USU1FT1VUXCIsMTEwOlwiRVJSX05PX0FVVEhPUklaRURcIiwxMTE6XCJFUlJfVk9NX1NFUlZJQ0VfVU5BVkFJTEFCTEVcIiwxMTI6XCJFUlJfTk9fQ0hBTk5FTF9BVkFJTEFCTEVfQ09ERVwiLDExMzpcIkVSUl9UT09fTUFOWV9VU0VSU1wiLDExNDpcIkVSUl9NQVNURVJfVk9DU19VTkFWQUlMQUJMRVwiLDExNTpcIkVSUl9JTlRFUk5BTF9FUlJPUlwiLDExNjpcIkVSUl9OT19BQ1RJVkVfU1RBVFVTXCIsMTE3OlwiRVJSX0lOVkFMSURfVUlEXCIsMTE4OlwiRVJSX0RZTkFNSUNfS0VZX0VYUElSRURcIiwxMTk6XCJFUlJfU1RBVElDX1VTRV9EWUFOTUlDX0tFXCIsMTIwOlwiRVJSX0RZTkFNSUNfVVNFX1NUQVRJQ19LRVwiLDI6XCJLX1RJTUVTVEFNUF9FWFBJUkVEXCIsMzpcIktfQ0hBTk5FTF9QRVJNSVNTSU9OX0lOVkFMSURcIiw0OlwiS19DRVJUSUZJQ0FURV9JTlZBTElEXCIsNTpcIktfQ0hBTk5FTF9OQU1FX0VNUFRZXCIsNjpcIktfQ0hBTk5FTF9OT1RfRk9VTkRcIiw3OlwiS19USUNLRVRfSU5WQUxJRFwiLDg6XCJLX0NIQU5ORUxfQ09ORkxJQ1RFRFwiLDk6XCJLX1NFUlZJQ0VfTk9UX1JFQURZXCIsMTA6XCJLX1NFUlZJQ0VfVE9PX0hFQVZZXCIsMTQ6XCJLX1VJRF9CQU5ORURcIiwxNTpcIktfSVBfQkFOTkVEXCIsMTY6XCJLX0NIQU5ORUxfQkFOTkVEXCJ9LFQ9ezE6XCJFUlJPUl9JTExFQUdBTF9BUFBJRFwiLDI6XCJFUlJPUl9JTExFQUdBTF9VSURcIiwzOlwiSU5URVJOQUxfU0VSVkVSX0VSUk9SXCJ9LGI9W1wiTk9fRkxBR19TRVRcIixcIk5PX1NFUlZJQ0VfQVZJQUJMRVwiLFwiRkxBR19TRVRfQlVUX0VNUFRZXCIsXCJFTVBUWV9BRERSRVNTX1JFU1BPTlNFXCJdLFI9MCxBPTEsTz0yLEM9MyxOPTQsdz01LGs9NixEPTcsTD04LE09OSxQPTEwLHg9ezE5OlwiRVJSX0FMUkVBRFlfSU5fVVNFXCIsMTA6XCJFUlJfVElNRURPVVRcIiwzOlwiRVJSX05PVF9SRUFEWVwiLDk6XCJFUlJfTk9fUEVSTUlTU0lPTlwiLDA6XCJVTktOT1dfRVJST1JcIn0sVj17RkFJTEVEOlwiRkFJTEVEXCIsSU5WQUxJRF9LRVk6XCJJTlZBTElEX0tFWVwiLElOVkFMSURfQ0xJRU5UX01PREU6XCJJTlZBTElEX0NMSUVOVF9NT0RFXCIsSU5WQUxJRF9DTElFTlRfQ09ERUM6XCJJTlZBTElEX0NMSUVOVF9DT0RFQ1wiLENMSUVOVF9NT0RFX0NPREVDX01JU01BVENIOlwiQ0xJRU5UX01PREVfQ09ERUNfTUlTTUFUQ0hcIixXRUJfQVBJX05PVF9TVVBQT1JURUQ6XCJXRUJfQVBJX05PVF9TVVBQT1JURURcIixJTlZBTElEX1BBUkFNRVRFUjpcIklOVkFMSURfUEFSQU1FVEVSXCIsTk9fVFJBQ0tfSU5fU1RSRUFNOlwiTk9fVFJBQ0tfSU5fU1RSRUFNXCIsSU5WQUxJRF9PUEVSQVRJT046XCJJTlZBTElEX09QRVJBVElPTlwiLElOVkFMSURfTE9DQUxfU1RSRUFNOlwiSU5WQUxJRF9MT0NBTF9TVFJFQU1cIixJTlZBTElEX1JFTU9URV9TVFJFQU06XCJJTlZBTElEX1JFTU9URV9TVFJFQU1cIixJTlZBTElEX0RZTkFNSUNfS0VZOlwiSU5WQUxJRF9EWU5BTUlDX0tFWVwiLERZTkFNSUNfS0VZX1RJTUVPVVQ6XCJEWU5BTUlDX0tFWV9USU1FT1VUXCIsTk9fVk9DU19BVkFJTEFCTEU6XCJOT19WT0NTX0FWQUlMQUJMRVwiLE5PX1ZPU19BVkFJTEFCTEU6XCJFUlJfTk9fVk9TX0FWQUlMQUJMRVwiLEpPSU5fQ0hBTk5FTF9USU1FT1VUOlwiRVJSX0pPSU5fQ0hBTk5FTF9USU1FT1VUXCIsTk9fQVZBSUxBQkxFX0NIQU5ORUw6XCJOT19BVkFJTEFCTEVfQ0hBTk5FTFwiLExPT0tVUF9DSEFOTkVMX1RJTUVPVVQ6XCJMT09LVVBfQ0hBTk5FTF9USU1FT1VUXCIsTE9PS1VQX0NIQU5ORUxfUkVKRUNURUQ6XCJMT09LVVBfQ0hBTk5FTF9SRUpFQ1RFRFwiLE9QRU5fQ0hBTk5FTF9USU1FT1VUOlwiT1BFTl9DSEFOTkVMX1RJTUVPVVRcIixPUEVOX0NIQU5ORUxfUkVKRUNURUQ6XCJPUEVOX0NIQU5ORUxfUkVKRUNURURcIixSRVFVRVNUX0RFRkVSUkVEOlwiUkVRVUVTVF9ERUZFUlJFRFwiLFNUUkVBTV9BTFJFQURZX1BVQkxJU0hFRDpcIlNUUkVBTV9BTFJFQURZX1BVQkxJU0hFRFwiLFNUUkVBTV9OT1RfWUVUX1BVQkxJU0hFRDpcIlNUUkVBTV9OT1RfWUVUX1BVQkxJU0hFRFwiLEpPSU5fVE9PX0ZSRVFVRU5UOlwiSk9JTl9UT09fRlJFUVVFTlRcIixTT0NLRVRfRVJST1I6XCJTT0NLRVRfRVJST1JcIixTT0NLRVRfRElTQ09OTkVDVEVEOlwiU09DS0VUX0RJU0NPTk5FQ1RFRFwiLFBFRVJDT05ORUNUSU9OX0ZBSUxFRDpcIlBFRVJDT05ORUNUSU9OX0ZBSUxFRFwiLENPTk5FQ1RfR0FURVdBWV9FUlJPUjpcIkNPTk5FQ1RfR0FURVdBWV9FUlJPUlwiLFNFUlZJQ0VfTk9UX0FWQUlMQUJMRTpcIlNFUlZJQ0VfTk9UX0FWQUlMQUJMRVwiLEpPSU5fQ0hBTk5FTF9GQUlMRUQ6XCJKT0lOX0NIQU5ORUxfRkFJTEVEXCIsUFVCTElTSF9TVFJFQU1fRkFJTEVEOlwiUFVCTElTSF9TVFJFQU1fRkFJTEVEXCIsVU5QVUJMSVNIX1NUUkVBTV9GQUlMRUQ6XCJVTlBVQkxJU0hfU1RSRUFNX0ZBSUxFRFwiLFNVQlNDUklCRV9TVFJFQU1fRkFJTEVEOlwiU1VCU0NSSUJFX1NUUkVBTV9GQUlMRURcIixVTlNVQlNDUklCRV9TVFJFQU1fRkFJTEVEOlwiVU5TVUJTQ1JJQkVfU1RSRUFNX0ZBSUxFRFwiLE5PX1NVQ0hfUkVNT1RFX1NUUkVBTTpcIk5PX1NVQ0hfUkVNT1RFX1NUUkVBTVwiLEVSUl9GQUlMRUQ6XCIxXCIsRVJSX0lOVkFMSURfVkVORE9SX0tFWTpcIjEwMVwiLEVSUl9JTlZBTElEX0NIQU5ORUxfTkFNRTpcIjEwMlwiLFdBUk5fTk9fQVZBSUxBQkxFX0NIQU5ORUw6XCIxMDNcIixXQVJOX0xPT0tVUF9DSEFOTkVMX1RJTUVPVVQ6XCIxMDRcIixXQVJOX0xPT0tVUF9DSEFOTkVMX1JFSkVDVEVEOlwiMTA1XCIsV0FSTl9PUEVOX0NIQU5ORUxfVElNRU9VVDpcIjEwNlwiLFdBUk5fT1BFTl9DSEFOTkVMX1JFSkVDVEVEOlwiMTA3XCIsV0FSTl9SRVFVRVNUX0RFRkVSUkVEOlwiMTA4XCIsRVJSX0RZTkFNSUNfS0VZX1RJTUVPVVQ6XCIxMDlcIixFUlJfSU5WQUxJRF9EWU5BTUlDX0tFWTpcIjExMFwiLEVSUl9OT19WT0NTX0FWQUlMQUJMRTpcIjIwMDBcIixFUlJfTk9fVk9TX0FWQUlMQUJMRTpcIjIwMDFcIixFUlJfSk9JTl9DSEFOTkVMX1RJTUVPVVQ6XCIyMDAyXCIsSU9TX05PVF9TVVBQT1JUOlwiSU9TX05PVF9TVVBQT1JUXCIsV0VDSEFUX05PVF9TVVBQT1JUOlwiV0VDSEFUX05PVF9TVVBQT1JUXCIsU0hBUklOR19TQ1JFRU5fTk9UX1NVUFBPUlQ6XCJTSEFSSU5HX1NDUkVFTl9OT1RfU1VQUE9SVFwiLFNUSUxMX09OX1BVQkxJU0hJTkc6XCJTVElMTF9PTl9QVUJMSVNISU5HXCIsTE9XX1NUUkVBTV9BTFJFQURZX1BVQkxJU0hFRDpcIkxPV19TVFJFQU1fQUxSRUFEWV9QVUJMSVNIRURcIixMT1dfU1RSRUFNX05PVF9ZRVRfUFVCTElTSEVEOlwiTE9XX1NUUkVBTV9BTFJFQURZX1BVQkxJU0hFRFwiLEhJR0hfU1RSRUFNX05PVF9WSURFT19UUkFDRTpcIkhJR0hfU1RSRUFNX05PVF9WSURFT19UUkFDRVwiLE5PVF9GSU5EX0RFVklDRV9CWV9MQUJFTDpcIk5PVF9GSU5EX0RFVklDRV9CWV9MQUJFTFwiLEVOQUJMRV9EVUFMU1RSRUFNX0ZBSUxFRDpcIkVOQUJMRV9EVUFMU1RSRUFNX0ZBSUxFRFwiLERJU0FCTEVfRFVBTFNUUkVBTV9GQUlMRUQ6XCJESVNBQkxFX0RVQUxTVFJFQU1fRkFJTEVEXCIsUExBWUVSX05PVF9GT1VORDpcIlBMQVlFUl9OT1RfRk9VTkRcIixFTEVDVFJPTl9OT1RfU1VQUE9SVF9TSEFSSU5HX1NDUkVFTjpcIkVMRUNUUk9OX05PVF9TVVBQT1JUX1NIQVJJTkdfU0NSRUVOXCIsQkFEX0VOVklST05NRU5UOlwiQkFEX0VOVklST05NRU5UXCIsTE9BRF9BVURJT19GQUlMRUQ6XCJMT0FEX0FVRElPX0ZBSUxFRFwifSxVPTAsaj1mdW5jdGlvbihlKXt2YXIgdD1fKHt9KTt0LmlkPWUuaWQsdC5wbGF5ZXJJZD1VKyssdC5maXQ9ZS5vcHRpb25zJiZlLm9wdGlvbnMuZml0LFwiY29udGFpblwiIT09dC5maXQmJlwiY292ZXJcIiE9PXQuZml0JiYodC5maXQ9bnVsbCksdC51cmw9ZS51cmwsdC5zdHJlYW09ZS5zdHJlYW0uc3RyZWFtLHQuZWxlbWVudElEPWUuZWxlbWVudElELHQuc2V0QXVkaW9PdXRwdXQ9ZnVuY3Rpb24oZSxuLGkpe3ZhciBhPXQudmlkZW98fHQuYXVkaW87cmV0dXJuIGE/YS5zZXRTaW5rSWQ/dm9pZCBhLnNldFNpbmtJZChlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmlkK1wiXSBcIitcInZpZGVvIFwiLmNvbmNhdCh0LmlkLFwiIHNldEF1ZGlvT3V0cHV0IFwiKS5jb25jYXQoZSxcIiBTVUNDRVNTXCIpKSxhPT10LnZpZGVvJiZ0LmF1ZGlvP3QuYXVkaW8uc2V0U2lua0lkKGUpOlByb21pc2UucmVzb2x2ZSgpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5pZCtcIl0gXCIrXCJhdWRpbyBcIi5jb25jYXQodC5pZCxcIiBzZXRBdWRpb091dHB1dCBcIikuY29uY2F0KGUsXCIgU1VDQ0VTU1wiKSksbiYmbigpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIit0LmlkK1wiXSBWaWRlb1BsYXllci5zZXRBdWRpb091dHB1dFwiLGUpLGkmJmkoZSl9KTooby5kZWZhdWx0LmVycm9yKFwiW1wiK3QuaWQrXCJdIFwiLFYuV0VCX0FQSV9OT1RfU1VQUE9SVEVEKSxpJiZpKFYuV0VCX0FQSV9OT1RfU1VQUE9SVEVEKSk6KG8uZGVmYXVsdC5lcnJvcihcIltcIit0LmlkK1wiXSBcIixWLlBMQVlFUl9OT1RfRk9VTkQpLGkmJmkoVi5QTEFZRVJfTk9UX0ZPVU5EKSl9LHQuZGVzdHJveT1mdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5pZCxcIl0gZGVzdHJveSBcIikuY29uY2F0KGUuc3RyZWFtLmxvY2FsP1wibG9jYWxcIjpcInJlbW90ZVwiLFwiIFBsYXllciBcIikuY29uY2F0KHQuaWQpKSxPYmplY3QoRS5zZXRTcmNPYmplY3QpKHQudmlkZW8sbnVsbCksT2JqZWN0KEUuc2V0U3JjT2JqZWN0KSh0LmF1ZGlvLG51bGwpLHQudmlkZW8ucGF1c2UoKSxkZWxldGUgdC5yZXNpemVyLGNsZWFySW50ZXJ2YWwodC5tZWRpYVBsYXllclRpbWVyKSx0Lm1lZGlhUGxheWVyVGltZXI9bnVsbCxkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmRpdi5pZCkmJnQucGFyZW50Tm9kZS5jb250YWlucyh0LmRpdikmJnQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0LmRpdiksW1widmlkZW9cIixcImF1ZGlvXCJdLmZvckVhY2goZnVuY3Rpb24obil7dFtuXTt2YXIgaT1hW25dO2NsZWFyVGltZW91dChpLnBsYXlEZWZlclRpbWVvdXQpLGkuZm9ybWVyTWVkaWFTdGF0ZT1udWxsO3ZhciByPXtwbGF5ZXJJZDp0LnBsYXllcklkLHN0YXRlSWQ6aS5zdGF0ZUlkKzEscGxheURlZmVyVGltZW91dDpudWxsLGVycm9yOiExLHN0YXR1czpcImFib3J0ZWRcIixyZWFzb246XCJzdG9wXCIsdXBkYXRlZEF0OkRhdGUubm93KCl9O2Fbbl09cjt2YXIgYz17dHlwZTpcInBsYXllci1zdGF0dXMtY2hhbmdlXCIscGxheWVySWQ6dC5wbGF5ZXJJZCxtZWRpYVR5cGU6bixzdGF0dXM6ci5zdGF0dXMscmVhc29uOnIucmVhc29uLGlzRXJyb3JTdGF0ZTohMSxzdHJlYW1JZDp0LmlkfTtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuaWQsXCJdIE1lZGlhIFBsYXllciBTdGF0dXMgQ2hhbmdlIFRyaWdnZXJlZCBieSBkZXN0cm95KClcIiksYyksZS5zdHJlYW0uZGlzcGF0Y2hFdmVudChjKSxzLmIucmVwb3J0QXBpSW52b2tlKGUuc3RyZWFtLnNpZCx7bmFtZTpcIlN0cmVhbS5wbGF5ZXJTdGF0dXNDaGFuZ2VcIixvcHRpb25zOmMsdGFnOlwidHJhY2VyXCJ9KSgpfSl9LHQuZGl2PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIiksdC5kaXYuc2V0QXR0cmlidXRlKFwiaWRcIixcInBsYXllcl9cIit0LmlkKSxlLnN0cmVhbS52aWRlbz90LmRpdi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgcG9zaXRpb246IHJlbGF0aXZlOyBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsgb3ZlcmZsb3c6IGhpZGRlbjtcIik6dC5kaXYuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiByZWxhdGl2ZTsgb3ZlcmZsb3c6IGhpZGRlbjtcIiksdC52aWRlbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIiksdC52aWRlby5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwidmlkZW9cIit0LmlkKSxlLnN0cmVhbS5sb2NhbCYmIWUuc3RyZWFtLnNjcmVlbj9lLnN0cmVhbS5taXJyb3I/dC52aWRlby5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgcG9zaXRpb246IGFic29sdXRlOyB0cmFuc2Zvcm06IHJvdGF0ZVkoMTgwZGVnKTsgb2JqZWN0LWZpdDogXCIuY29uY2F0KHQuZml0fHxcImNvdmVyXCIsXCI7XCIpKTp0LnZpZGVvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IG9iamVjdC1maXQ6IFwiLmNvbmNhdCh0LmZpdHx8XCJjb3ZlclwiLFwiO1wiKSk6ZS5zdHJlYW0udmlkZW8/dC52aWRlby5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgcG9zaXRpb246IGFic29sdXRlOyBvYmplY3QtZml0OiBcIi5jb25jYXQodC5maXR8fFwiY292ZXJcIixcIjtcIikpOmUuc3RyZWFtLnNjcmVlbj90LnZpZGVvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IG9iamVjdC1maXQ6IFwiLmNvbmNhdCh0LmZpdHx8XCJjb250YWluXCIpKTp0LnZpZGVvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IGRpc3BsYXk6IG5vbmU7IG9iamVjdC1maXQ6IFwiLmNvbmNhdCh0LmZpdHx8XCJjb3ZlclwiKSk7dmFyIG49e2F1dG9wbGF5OiEwLG11dGVkOiEhZS5zdHJlYW0ubG9jYWx8fCEoIW0uaXNTYWZhcmkoKSYmXCJpT1NcIiE9PW0uZ2V0QnJvd3Nlck9TKCkpJiZcInZpZGVvX2VsZW1lbnRfbXV0ZWRcIixwbGF5c2lubGluZTohMCxjb250cm9sczohKCFtLmlzU2FmYXJpKCkmJlwiaU9TXCIhPT1tLmdldEJyb3dzZXJPUygpfHxlLnN0cmVhbS5sb2NhbCksdm9sdW1lOm51bGx9LGk9UygpKHt9LG4sZS5vcHRpb25zKTshMCE9PWkubXV0ZWR8fGkudm9sdW1lfHwoaS52b2x1bWU9MCksaS5hdXRvcGxheSYmdC52aWRlby5zZXRBdHRyaWJ1dGUoXCJhdXRvcGxheVwiLFwiXCIpLCEwIT09aS5tdXRlZCYmXCJ2aWRlb19lbGVtZW50X211dGVkXCIhPT1pLm11dGVkfHwodC52aWRlby5zZXRBdHRyaWJ1dGUoXCJtdXRlZFwiLFwiXCIpLHQudmlkZW8ubXV0ZWQ9ITApLGkucGxheXNpbmxpbmUmJnQudmlkZW8uc2V0QXR0cmlidXRlKFwicGxheXNpbmxpbmVcIixcIlwiKSxpLmNvbnRyb2xzJiZ0LnZpZGVvLnNldEF0dHJpYnV0ZShcImNvbnRyb2xzXCIsXCJcIiksTnVtYmVyLmlzRmluaXRlKGkudm9sdW1lKSYmKHQudmlkZW8udm9sdW1lPWkudm9sdW1lKSx0LmF1ZGlvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKSx0LmF1ZGlvLnNldEF0dHJpYnV0ZShcImlkXCIsXCJhdWRpb1wiK3QuaWQpLGkuYXV0b3BsYXkmJnQuYXVkaW8uc2V0QXR0cmlidXRlKFwiYXV0b3BsYXlcIixcIlwiKSwhMD09PWkubXV0ZWQmJnQuYXVkaW8uc2V0QXR0cmlidXRlKFwibXV0ZWRcIixcIlwiKSwhMD09PWkubXV0ZWQmJih0LmF1ZGlvLm11dGVkPSEwKSxpLnBsYXlzaW5saW5lJiZ0LmF1ZGlvLnNldEF0dHJpYnV0ZShcInBsYXlzaW5saW5lXCIsXCJcIiksTnVtYmVyLmlzRmluaXRlKGkudm9sdW1lKSYmKHQuYXVkaW8udm9sdW1lPWkudm9sdW1lKSx2b2lkIDAhPT10LmVsZW1lbnRJRD8oZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodC5lbGVtZW50SUQpLmFwcGVuZENoaWxkKHQuZGl2KSx0LmNvbnRhaW5lcj1kb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmVsZW1lbnRJRCkpOihkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHQuZGl2KSx0LmNvbnRhaW5lcj1kb2N1bWVudC5ib2R5KSx0LnBhcmVudE5vZGU9dC5kaXYucGFyZW50Tm9kZTt2YXIgYT17dmlkZW86e3BsYXllcklkOnQucGxheWVySWQsc3RhdGVJZDowLHBsYXlEZWZlclRpbWVvdXQ6bnVsbCxlcnJvcjohMSxzdGF0dXM6XCJpbml0XCIscmVhc29uOm51bGwsdXBkYXRlZEF0OkRhdGUubm93KCl9LGF1ZGlvOntwbGF5ZXJJZDp0LnBsYXllcklkLHN0YXRlSWQ6MCxwbGF5RGVmZXJUaW1lb3V0Om51bGwsZXJyb3I6ITEsc3RhdHVzOlwiaW5pdFwiLHJlYXNvbjpudWxsLHVwZGF0ZWRBdDpEYXRlLm5vdygpfX07dC5tZWRpYUVsZW1FeGlzdHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUsbj0wO248T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIk1FRElBX0VMRU1FTlRfRVhJU1RTX0RFUFRIXCIpJiZ0O24rKyl0PXQucGFyZW50Tm9kZTtyZXR1cm4hIXR9O3ZhciBjPWZ1bmN0aW9uKGUpe3JldHVybiB0Lm1lZGlhRWxlbUV4aXN0cyhlKT9lLnBhdXNlZD9cInBhdXNlZFwiOlwicGxheVwiOlwiYWJvcnRlZFwifSxkPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1jKGUpLGE9ITA7cmV0dXJuXCJwYXVzZWRcIj09PWk/KFwiYXVkaW9cIj09PXQmJiEwPT09bi5tdXRlZCYmKGE9ITEpLG4uYXV0b3BsYXl8fChhPSExKSk6XCJwbGF5XCI9PT1pP1widmlkZW9cIj09PXQ/YT0hMTohMD09PW4ubXV0ZWQ/ZS5tdXRlZCYmKGE9ITEpOmUubXV0ZWR8fChhPSExKTpcImFib3J0ZWRcIj09PWkmJihhPSExKSxhfSx1PWZ1bmN0aW9uKG4pe3ZhciB1LGw9dGhpcztpZihsPT09dC52aWRlbz91PVwidmlkZW9cIjpsPT09dC5hdWRpbyYmKHU9XCJhdWRpb1wiKSx1KXtuLnR5cGV8fG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5pZCxcIl0gVW5leHBlY3RlZCBldnRcIiksbik7dmFyIHA9YyhsKTtjbGVhclRpbWVvdXQoYVt1XS5wbGF5RGVmZXJUaW1lb3V0KSxhW3VdLnBsYXlEZWZlclRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe2FbdV0ucGxheURlZmVyVGltZW91dD1udWxsO3ZhciByPWFbdV0sZj1jKGwpO2lmKHA9PT1mKXt2YXIgbT17cGxheWVySWQ6dC5wbGF5ZXJJZCxzdGF0ZUlkOnIuc3RhdGVJZCsxLHBsYXlEZWZlclRpbWVvdXQ6bnVsbCxlcnJvcjpkKGwsdSxpKSxzdGF0dXM6YyhsKSxyZWFzb246bi50eXBlLHVwZGF0ZWRBdDpEYXRlLm5vdygpfTtpZihyLnN0YXR1cyE9PW0uc3RhdHVzKXthW3VdPW07dmFyIGc9e3R5cGU6XCJwbGF5ZXItc3RhdHVzLWNoYW5nZVwiLHBsYXllcklkOnQucGxheWVySWQsbWVkaWFUeXBlOnUsc3RhdHVzOm0uc3RhdHVzLHJlYXNvbjptLnJlYXNvbixpc0Vycm9yU3RhdGU6bS5lcnJvcixzdHJlYW1JZDp0LmlkfTtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuaWQsXCJdIE1lZGlhIFBsYXllciBTdGF0dXMgQ2hhbmdlXCIpLGcpLGUuc3RyZWFtLmRpc3BhdGNoRXZlbnQoZykscy5iLnJlcG9ydEFwaUludm9rZShlLnN0cmVhbS5zaWQse25hbWU6XCJTdHJlYW0ucGxheWVyU3RhdHVzQ2hhbmdlXCIsb3B0aW9uczpnLHRhZzpcInRyYWNlclwifSkoKX19ZWxzZSBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuaWQsXCJdIFN0YXR1cyBDaGFuZ2UgYWZ0ZXIgZXZlbnQgVHJpZ2dlcmVkLlwiKStcIlN0cmVhbSBcIi5jb25jYXQodC5pZCxcIiBQbGF5ZXJJZCBcIikuY29uY2F0KHQucGxheWVySWQsXCIgbWVkaWFUeXBlIFwiKS5jb25jYXQodSxcIiBTdGF0dXMgXCIpLmNvbmNhdChwLFwiPT5cIikuY29uY2F0KGYpKX0sT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlBMQVlFUl9TVEFURV9ERUZFUlwiKSl9ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuaWQsXCJdIFVua25vd24gbWVkaWEgZWxlbWVudFwiKSxsKX07aWYodC5tZWRpYVBsYXllclRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7W1widmlkZW9cIixcImF1ZGlvXCJdLmZvckVhY2goZnVuY3Rpb24obil7dmFyIHI9dFtuXSx1PWFbbl07aWYoIXUucGxheURlZmVyVGltZW91dCl7dmFyIGw9e3BsYXllcklkOnQucGxheWVySWQsc3RhdGVJZDp1LnN0YXRlSWQrMSxwbGF5RGVmZXJUaW1lb3V0Om51bGwsZXJyb3I6ZChyLG4saSksc3RhdHVzOmMocikscmVhc29uOlwidGltZXJcIix1cGRhdGVkQXQ6RGF0ZS5ub3coKX07aWYodS5zdGF0dXMhPT1sLnN0YXR1cyl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmlkLFwiXSBQbGF5ZXIgXCIpLmNvbmNhdCh0LnBsYXllcklkLFwiIFwiKS5jb25jYXQobixcIiBTdGF0dXMgQ2hhbmdlZCBEZXRlY3RlZCBieSBUaW1lcjogXCIpLmNvbmNhdCh1LnN0YXR1cyxcIj0+XCIpLmNvbmNhdChsLnN0YXR1cykpLGFbbl09bDt2YXIgcD17dHlwZTpcInBsYXllci1zdGF0dXMtY2hhbmdlXCIscGxheWVySWQ6dC5wbGF5ZXJJZCxtZWRpYVR5cGU6bixzdGF0dXM6bC5zdGF0dXMscmVhc29uOmwucmVhc29uLGlzRXJyb3JTdGF0ZTpsLmVycm9yLHN0cmVhbUlkOnQuaWR9O28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5pZCxcIl0gTWVkaWEgUGxheWVyIFN0YXR1cyBDaGFuZ2VcIikscCksZS5zdHJlYW0uZGlzcGF0Y2hFdmVudChwKSxzLmIucmVwb3J0QXBpSW52b2tlKGUuc3RyZWFtLnNpZCx7bmFtZTpcIlN0cmVhbS5wbGF5ZXJTdGF0dXNDaGFuZ2VcIixvcHRpb25zOnAsdGFnOlwidHJhY2VyXCJ9KSgpfX19KX0sT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlBMQVlFUl9TVEFURV9ERUZFUlwiKSksdC52aWRlby5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLGZ1bmN0aW9uKGUpeyFmdW5jdGlvbiBlKCl7dC52aWRlby52aWRlb1dpZHRoKnQudmlkZW8udmlkZW9IZWlnaHQ+ND9vLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5pZCtcIl0gdmlkZW8gZGltZW5zaW9uczpcIix0LnZpZGVvLnZpZGVvV2lkdGgsdC52aWRlby52aWRlb0hlaWdodCk6c2V0VGltZW91dChlLDUwKX0oKX0pLHQudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIix1KSx0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsdSksdC52aWRlby5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIix1KSx0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJvbmVycm9yXCIsdSksdC52aWRlby5hZGRFdmVudExpc3RlbmVyKFwic3VzcGVuZFwiLHUpLHQudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInN0YWxsZWRcIix1KSx0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJwYXVzZVwiLHUpLHQuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIix1KSx0LmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJjYW5wbGF5XCIsdSksdC5hdWRpby5hZGRFdmVudExpc3RlbmVyKFwiYWJvcnRcIix1KSx0LmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJvbmVycm9yXCIsdSksdC5hdWRpby5hZGRFdmVudExpc3RlbmVyKFwic3VzcGVuZFwiLHUpLHQuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcInN0YWxsZWRcIix1KSx0LmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJwYXVzZVwiLHUpLGUuc3RyZWFtLmhhc1ZpZGVvKCl8fGUuc3RyZWFtLmhhc1NjcmVlbigpKXQuZGl2LmFwcGVuZENoaWxkKHQudmlkZW8pLHQuZGl2LmFwcGVuZENoaWxkKHQuYXVkaW8pLG0uaXNFZGdlKCk/dC52aWRlby5zcmNPYmplY3Q9ZS5zdHJlYW0uc3RyZWFtOihPYmplY3QoRS5hdHRhY2hNZWRpYVN0cmVhbSkodC52aWRlbyxlLnN0cmVhbS5zdHJlYW0pLE9iamVjdChFLmF0dGFjaE1lZGlhU3RyZWFtKSh0LmF1ZGlvLGUuc3RyZWFtLnN0cmVhbSkpO2Vsc2UgaWYoITEhPT1pLm11dGVkJiZcInZpZGVvX2VsZW1lbnRfbXV0ZWRcIiE9PWkubXV0ZWR8fCh0LnZpZGVvLnJlbW92ZUF0dHJpYnV0ZShcIm11dGVkXCIpLHQudmlkZW8ubXV0ZWQ9ITEpLHQuZGl2LmFwcGVuZENoaWxkKHQudmlkZW8pLHdpbmRvdy5NZWRpYVN0cmVhbSYmKG0uaXNTYWZhcmkoKXx8XCJpT1NcIj09PW0uZ2V0QnJvd3Nlck9TKCkpKXt2YXIgbD1uZXcgTWVkaWFTdHJlYW0oZS5zdHJlYW0uc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCkpO09iamVjdChFLnNldFNyY09iamVjdCkodC52aWRlbyxsKX1lbHNlIE9iamVjdChFLnNldFNyY09iamVjdCkodC52aWRlbyxlLnN0cmVhbS5zdHJlYW0pO3JldHVybiB0LnNldEF1ZGlvVm9sdW1lPWZ1bmN0aW9uKGUpe3ZhciBuPXBhcnNlSW50KGUpLzEwMDtpc0Zpbml0ZShuKSYmKG48MD9uPTA6bj4xJiYobj0xKSx0LnZpZGVvJiYodC52aWRlby52b2x1bWU9biksdC5hdWRpbyYmKHQuYXVkaW8udm9sdW1lPW4pKX0sdH0sRj1mdW5jdGlvbihlKXt2YXIgdD17fSxuPUUuUlRDUGVlckNvbm5lY3Rpb247dC51aWQ9ZS51aWQsdC5pc1ZpZGVvTXV0ZT1lLmlzVmlkZW9NdXRlLHQuaXNBdWRpb011dGU9ZS5pc0F1ZGlvTXV0ZSx0LmlzU3Vic2NyaWJlcj1lLmlzU3Vic2NyaWJlcix0LmNsaWVudElkPWUuY2xpZW50SWQsdC5maWx0ZXJTdGF0c0NhY2hlPVtdLHQub3JpZ2luU3RhdHNDYWNoZT1bXSx0Lmxhc3RUaW1lR2V0U3RhdHM9bnVsbCx0LnBjX2NvbmZpZz17aWNlU2VydmVyczpbe3VybDpcInN0dW46d2ViY3MuYWdvcmEuaW86MzQ3OFwifV19O3ZhciBpPXtpZDpcIm91dGJvdW5kX2F1ZGlvX3NzcmNfc2VuZFwiLHR5cGU6XCJzc3JjXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ0NvZGVjTmFtZTpcIm9wdXNcIixhZWNEaXZlcmdlbnRGaWx0ZXJGcmFjdGlvbjpcIjBcIixhdWRpb0lucHV0TGV2ZWw6XCIwXCIsYnl0ZXNTZW50OlwiMFwiLHBhY2tldHNTZW50OlwiMFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zczpcIjBcIixnb29nRWNob0NhbmNlbGxhdGlvblJldHVybkxvc3NFbmhhbmNlbWVudDpcIjBcIn0sYT17aWQ6XCJvdXRib3VuZF92aWRlb19zc3JjX3NlbmRcIix0eXBlOlwic3NyY1wiLG1lZGlhVHlwZTpcIlwiLGdvb2dDb2RlY05hbWU6XCJoMjY0XCI9PT1lLmNvZGVjP1wiSDI2NFwiOlwiVlA4XCIsYnl0ZXNTZW50OlwiMFwiLHBhY2tldHNMb3N0OlwiMFwiLHBhY2tldHNTZW50OlwiMFwiLGdvb2dBZGFwdGF0aW9uQ2hhbmdlczpcIjBcIixnb29nQXZnRW5jb2RlTXM6XCIwXCIsZ29vZ0VuY29kZVVzYWdlUGVyY2VudDpcIjBcIixnb29nRmlyc1JlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZUhlaWdodFNlbnQ6XCIwXCIsZ29vZ0ZyYW1lSGVpZ2h0SW5wdXQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZUlucHV0OlwiMFwiLGdvb2dGcmFtZVJhdGVTZW50OlwiMFwiLGdvb2dGcmFtZVdpZHRoU2VudDpcIjBcIixnb29nRnJhbWVXaWR0aElucHV0OlwiMFwiLGdvb2dOYWNrc1JlY2VpdmVkOlwiMFwiLGdvb2dQbGlzUmVjZWl2ZWQ6XCIwXCIsZ29vZ1J0dDpcIjBcIn0scz17aWQ6XCJpbmJvdW5kX2F1ZGlvX3NzcmNfcmVjdlwiLHR5cGU6XCJzc3JjXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ0NvZGVjTmFtZTpcIm9wdXNcIixhdWRpb091dHB1dExldmVsOlwiMFwiLGJ5dGVzUmVjZWl2ZWQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1JlY2VpdmVkOlwiMFwiLGdvb2dBY2NlbGVyYXRlUmF0ZTpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ0RlY29kaW5nQ05HOlwiMFwiLGdvb2dEZWNvZGluZ0NUTjpcIjBcIixnb29nRGVjb2RpbmdDVFNHOlwiMFwiLGdvb2dEZWNvZGluZ05vcm1hbDpcIjBcIixnb29nRGVjb2RpbmdQTEM6XCIwXCIsZ29vZ0RlY29kaW5nUExDQ05HOlwiMFwiLGdvb2dFeHBhbmRSYXRlOlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nSml0dGVyUmVjZWl2ZWQ6XCIwXCIsZ29vZ1ByZWVtcHRpdmVFeHBhbmRSYXRlOlwiMFwiLGdvb2dQcmVmZXJyZWRKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nU2Vjb25kYXJ5RGVjb2RlZFJhdGU6XCIwXCIsZ29vZ1NwZWVjaEV4cGFuZFJhdGU6XCIwXCJ9LGM9e2lkOlwiaW5ib3VuZF92aWRlb19zc3JjX3JlY3ZcIix0eXBlOlwic3NyY1wiLG1lZGlhVHlwZTpcIlwiLGdvb2dUYXJnZXREZWxheU1zOlwiMFwiLHBhY2tldHNMb3N0OlwiMFwiLGdvb2dEZWNvZGVNczpcIjBcIixnb29nTWF4RGVjb2RlTXM6XCIwXCIsZ29vZ1JlbmRlckRlbGF5TXM6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVIZWlnaHRSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZURlY29kZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZU91dHB1dDpcIjBcIixnb29nSml0dGVyQnVmZmVyTXM6XCIwXCIsZ29vZ0N1cnJlbnREZWxheU1zOlwiMFwiLGdvb2dNaW5QbGF5b3V0RGVsYXlNczpcIjBcIixnb29nTmFja3NTZW50OlwiMFwiLGdvb2dQbGlzU2VudDpcIjBcIixnb29nRmlyc1NlbnQ6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lc1JlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZXNEZWNvZGVkOlwiMFwifSxkPXtpZDpcImJ3ZWZvcnZpZGVvXCIsdHlwZTpcIlZpZGVvQndlXCIsZ29vZ0F2YWlsYWJsZVNlbmRCYW5kd2lkdGg6XCIwXCIsZ29vZ0F2YWlsYWJsZVJlY2VpdmVCYW5kd2lkdGg6XCIwXCIsZ29vZ0FjdHVhbEVuY0JpdHJhdGU6XCIwXCIsZ29vZ1JldHJhbnNtaXRCaXRyYXRlOlwiMFwiLGdvb2dUYXJnZXRFbmNCaXRyYXRlOlwiMFwiLGdvb2dCdWNrZXREZWxheTpcIjBcIixnb29nVHJhbnNtaXRCaXRyYXRlOlwiMFwifTt0LmNvbj17b3B0aW9uYWw6W3tEdGxzU3J0cEtleUFncmVlbWVudDohMH1dfSxlLmljZVNlcnZlcnMgaW5zdGFuY2VvZiBBcnJheT90LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzPWUuaWNlU2VydmVyczooZS5zdHVuU2VydmVyVXJsJiYoZS5zdHVuU2VydmVyVXJsIGluc3RhbmNlb2YgQXJyYXk/ZS5zdHVuU2VydmVyVXJsLm1hcChmdW5jdGlvbihlKXtcInN0cmluZ1wiPT10eXBlb2YgZSYmXCJcIiE9PWUmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXJsOmV9KX0pOlwic3RyaW5nXCI9PXR5cGVvZiBlLnN0dW5TZXJ2ZXJVcmwmJlwiXCIhPT1lLnN0dW5TZXJ2ZXJVcmwmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXJsOmUuc3R1blNlcnZlclVybH0pKSxlLnR1cm5TZXJ2ZXImJihlLnR1cm5TZXJ2ZXIgaW5zdGFuY2VvZiBBcnJheT9lLnR1cm5TZXJ2ZXIubWFwKGZ1bmN0aW9uKGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlLnVybCYmXCJcIiE9PWUudXJsJiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOmUudXNlcm5hbWUsY3JlZGVudGlhbDplLmNyZWRlbnRpYWwsdXJsOmUudXJsfSl9KTpcImF1dG9cIiE9PWUudHVyblNlcnZlci5tb2RlJiZcIm1hbnVhbFwiIT09ZS50dXJuU2VydmVyLm1vZGV8fChlLnR1cm5TZXJ2ZXIudWRwcG9ydCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1c2VybmFtZTplLnR1cm5TZXJ2ZXIudXNlcm5hbWUsY3JlZGVudGlhbDplLnR1cm5TZXJ2ZXIuY3JlZGVudGlhbCxjcmVkZW50aWFsVHlwZTpcInBhc3N3b3JkXCIsdXJsczpcInR1cm46XCIrZS50dXJuU2VydmVyLnVybCtcIjpcIitlLnR1cm5TZXJ2ZXIudWRwcG9ydCtcIj90cmFuc3BvcnQ9dWRwXCJ9KSxcInN0cmluZ1wiPT10eXBlb2YgZS50dXJuU2VydmVyLnRjcHBvcnQmJlwiXCIhPT1lLnR1cm5TZXJ2ZXIudGNwcG9ydCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1c2VybmFtZTplLnR1cm5TZXJ2ZXIudXNlcm5hbWUsY3JlZGVudGlhbDplLnR1cm5TZXJ2ZXIuY3JlZGVudGlhbCxjcmVkZW50aWFsVHlwZTpcInBhc3N3b3JkXCIsdXJsczpcInR1cm46XCIrZS50dXJuU2VydmVyLnVybCtcIjpcIitlLnR1cm5TZXJ2ZXIudGNwcG9ydCtcIj90cmFuc3BvcnQ9dGNwXCJ9KSwhMD09PWUudHVyblNlcnZlci5mb3JjZXR1cm4mJih0LnBjX2NvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3k9XCJyZWxheVwiKSkpKSx2b2lkIDA9PT1lLmF1ZGlvJiYoZS5hdWRpbz0hMCksdm9pZCAwPT09ZS52aWRlbyYmKGUudmlkZW89ITApLHQubWVkaWFDb25zdHJhaW50cz17bWFuZGF0b3J5OntPZmZlclRvUmVjZWl2ZVZpZGVvOmUudmlkZW8sT2ZmZXJUb1JlY2VpdmVBdWRpbzplLmF1ZGlvfX0sdC5yb2FwU2Vzc2lvbklkPTEwMzt0cnl7dC5wY19jb25maWcuc2RwU2VtYW50aWNzPVwicGxhbi1iXCIsdC5wZWVyQ29ubmVjdGlvbj1uZXcgbih0LnBjX2NvbmZpZyx0LmNvbil9Y2F0Y2goZSl7ZGVsZXRlIHQucGNfY29uZmlnLnNkcFNlbWFudGljcyx0LnBlZXJDb25uZWN0aW9uPW5ldyBuKHQucGNfY29uZmlnLHQuY29uKX10LmljZUNhbmRpZGF0ZVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmljZUNhbmRpZGF0ZVRpbWVyPW51bGwsby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXUNhbmRpZGF0ZXMgY29sbGVjdGVkOiBcIikuY29uY2F0KHQuaWNlQ2FuZGlkYXRlQ291bnQpKSx0Lm1vcmVJY2VDb21pbmcmJih0Lm1vcmVJY2VDb21pbmc9ITEsdC5tYXJrQWN0aW9uTmVlZGVkKCkpfSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQ0FORElEQVRFX1RJTUVPVVRcIikpLHQucGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7dmFyIG4saSxhLHI7aT0obj10LnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24uc2RwKS5tYXRjaCgvYT1jYW5kaWRhdGU6Lit0eXBcXHNzcmZseC4rXFxyXFxuLyksYT1uLm1hdGNoKC9hPWNhbmRpZGF0ZTouK3R5cFxcc2hvc3QuK1xcclxcbi8pLHI9bi5tYXRjaCgvYT1jYW5kaWRhdGU6Lit0eXBcXHNyZWxheS4rXFxyXFxuLyksbnVsbD09PWkmJm51bGw9PT1hJiZudWxsPT09cnx8dm9pZCAwIT09dC5pY2V8fCF0LmljZUNhbmRpZGF0ZVRpbWVyfHwoby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdc3JmbHggY2FuZGlkYXRlIDogXCIraStcIiByZWxheSBjYW5kaWRhdGU6IFwiK3IrXCIgaG9zdCBjYW5kaWRhdGUgOiBcIithKSxjbGVhclRpbWVvdXQodC5pY2VDYW5kaWRhdGVUaW1lciksdC5pY2VDYW5kaWRhdGVUaW1lcj1udWxsLHQuaWNlPTAsdC5tb3JlSWNlQ29taW5nPSExLHQubWFya0FjdGlvbk5lZWRlZCgpKSx0LmljZUNhbmRpZGF0ZUNvdW50PXQuaWNlQ2FuZGlkYXRlQ291bnQrMX0sby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrJ11DcmVhdGVkIHdlYmtpdFJUQ1BlZXJDb25ubmVjdGlvbiB3aXRoIGNvbmZpZyBcIicrSlNPTi5zdHJpbmdpZnkodC5wY19jb25maWcpKydcIi4nKTt2YXIgdT1mdW5jdGlvbih0KXtyZXR1cm4gZS5zY3JlZW4mJih0PXQucmVwbGFjZShcImE9eC1nb29nbGUtZmxhZzpjb25mZXJlbmNlXFxyXFxuXCIsXCJcIikpLHR9LGw9ZnVuY3Rpb24obil7dmFyIGksYTtpZigoaT1uLm1hdGNoKC9tPXZpZGVvLipcXHJcXG4vKSkmJmUubWluVmlkZW9CVyYmZS5tYXhWaWRlb0JXKXthPWlbMF0rXCJiPUFTOlwiK2UubWF4VmlkZW9CVytcIlxcclxcblwiO3ZhciByPTAscz0wO1wiaDI2NFwiPT09ZS5jb2RlYz8ocj1uLnNlYXJjaCgvYT1ydHBtYXA6KFxcZCspIEgyNjRcXC85MDAwMFxcclxcbi8pLHM9bi5zZWFyY2goL0gyNjRcXC85MDAwMFxcclxcbi8pKTpcInZwOFwiPT09ZS5jb2RlYyYmKHI9bi5zZWFyY2goL2E9cnRwbWFwOihcXGQrKSBWUDhcXC85MDAwMFxcclxcbi8pLHM9bi5zZWFyY2goL1ZQOFxcLzkwMDAwXFxyXFxuLykpLC0xIT09ciYmLTEhPT1zJiZzLXI+MTAmJihhPWErXCJhPWZtdHA6XCIrbi5zbGljZShyKzkscy0xKStcIiB4LWdvb2dsZS1taW4tYml0cmF0ZT1cIitlLm1pblZpZGVvQlcrXCJcXHJcXG5cIiksbj1uLnJlcGxhY2UoaVswXSxhKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1TZXQgVmlkZW8gQml0cmF0ZSAtIG1pbjpcIitlLm1pblZpZGVvQlcrXCIgbWF4OlwiK2UubWF4VmlkZW9CVyl9cmV0dXJuKGk9bi5tYXRjaCgvbT1hdWRpby4qXFxyXFxuLykpJiZlLm1heEF1ZGlvQlcmJihhPWlbMF0rXCJiPUFTOlwiK2UubWF4QXVkaW9CVytcIlxcclxcblwiLG49bi5yZXBsYWNlKGlbMF0sYSkpLG59O3QucHJvY2Vzc1NpZ25hbGluZ01lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIG4saT1KU09OLnBhcnNlKGUpO3QuaW5jb21pbmdNZXNzYWdlPWksXCJuZXdcIj09PXQuc3RhdGU/XCJPRkZFUlwiPT09aS5tZXNzYWdlVHlwZT8obj17c2RwOmkuc2RwLHR5cGU6XCJvZmZlclwifSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obikpLmNhdGNoKGZ1bmN0aW9uKGUpe30pLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZFwiLHQubWFya0FjdGlvbk5lZWRlZCgpKTp0LmVycm9yKFwiSWxsZWdhbCBtZXNzYWdlIGZvciB0aGlzIHN0YXRlOiBcIitpLm1lc3NhZ2VUeXBlK1wiIGluIHN0YXRlIFwiK3Quc3RhdGUpOlwib2ZmZXItc2VudFwiPT09dC5zdGF0ZT9cIkFOU1dFUlwiPT09aS5tZXNzYWdlVHlwZT8oKG49e3NkcDppLnNkcCx0eXBlOlwiYW5zd2VyXCJ9KS5zZHA9dShuLnNkcCksbi5zZHA9bChuLnNkcCksdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG4pKS5jYXRjaChmdW5jdGlvbihlKXt9KSx0LnN0YXRlPVwiZXN0YWJsaXNoZWRcIik6XCJwci1hbnN3ZXJcIj09PWkubWVzc2FnZVR5cGU/KG49e3NkcDppLnNkcCx0eXBlOlwicHItYW5zd2VyXCJ9LHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihuKSkuY2F0Y2goZnVuY3Rpb24oZSl7fSkpOlwib2ZmZXJcIj09PWkubWVzc2FnZVR5cGU/dC5lcnJvcihcIk5vdCB3cml0dGVuIHlldFwiKTp0LmVycm9yKFwiSWxsZWdhbCBtZXNzYWdlIGZvciB0aGlzIHN0YXRlOiBcIitpLm1lc3NhZ2VUeXBlK1wiIGluIHN0YXRlIFwiK3Quc3RhdGUpOlwiZXN0YWJsaXNoZWRcIj09PXQuc3RhdGUmJihcIk9GRkVSXCI9PT1pLm1lc3NhZ2VUeXBlPyhuPXtzZHA6aS5zZHAsdHlwZTpcIm9mZmVyXCJ9LHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihuKSkuY2F0Y2goZnVuY3Rpb24oZSl7fSksdC5zdGF0ZT1cIm9mZmVyLXJlY2VpdmVkXCIsdC5tYXJrQWN0aW9uTmVlZGVkKCkpOlwiQU5TV0VSXCI9PT1pLm1lc3NhZ2VUeXBlPygobj17c2RwOmkuc2RwLHR5cGU6XCJhbnN3ZXJcIn0pLnNkcD11KG4uc2RwKSxuLnNkcD1sKG4uc2RwKSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obikpLmNhdGNoKGZ1bmN0aW9uKGUpe30pKTp0LmVycm9yKFwiSWxsZWdhbCBtZXNzYWdlIGZvciB0aGlzIHN0YXRlOiBcIitpLm1lc3NhZ2VUeXBlK1wiIGluIHN0YXRlIFwiK3Quc3RhdGUpKX07dmFyIHA9MCxmPTA7cmV0dXJuIHQuZ2V0VmlkZW9SZWxhdGVkU3RhdHM9ZnVuY3Rpb24oZSl7dC5nZXRTdGF0cyhmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7aWYodC5pc1N1YnNjcmliZXIpe2lmKFwidmlkZW9cIj09PW4ubWVkaWFUeXBlJiZuLmlkJiZ+bi5pZC5pbmRleE9mKFwicmVjdlwiKSl7aWYobS5pc0Nocm9tZUtlcm5lbCgpJiYrbS5nZXRCcm93c2VyVmVyc2lvbigpPj03Nil7dmFyIGk9K24uZ29vZ0ZyYW1lc1JlY2VpdmVkLXAsYT0rbi5nb29nRnJhbWVzRGVjb2RlZC1mO3QuX3NldFN0YXQoYyxcImdvb2dGcmFtZVJhdGVSZWNlaXZlZFwiLGkpLHQuX3NldFN0YXQoYyxcImdvb2dGcmFtZVJhdGVEZWNvZGVkXCIsYSksdC5fc2V0U3RhdChjLFwiZ29vZ0ZyYW1lUmF0ZU91dHB1dFwiLGEpLHA9K24uZ29vZ0ZyYW1lc1JlY2VpdmVkLGY9K24uZ29vZ0ZyYW1lc0RlY29kZWR9ZSYmZSh7bWVkaWFUeXBlOlwidmlkZW9cIixwZWVySWQ6dC51aWQsaXNWaWRlb011dGU6dC5pc1ZpZGVvTXV0ZSxmcmFtZVJhdGVSZWNlaXZlZDpuLmdvb2dGcmFtZVJhdGVSZWNlaXZlZCxmcmFtZVJhdGVEZWNvZGVkOm4uZ29vZ0ZyYW1lUmF0ZURlY29kZWQsYnl0ZXNSZWNlaXZlZDpuLmJ5dGVzUmVjZWl2ZWQscGFja2V0c1JlY2VpdmVkOm4ucGFja2V0c1JlY2VpdmVkLHBhY2tldHNMb3N0Om4ucGFja2V0c0xvc3R9KX19ZWxzZVwidmlkZW9cIj09PW4ubWVkaWFUeXBlJiZuLmlkJiZ+bi5pZC5pbmRleE9mKFwic2VuZFwiKSYmZSYmZSh7bWVkaWFUeXBlOlwidmlkZW9cIixpc1ZpZGVvTXV0ZTp0LmlzVmlkZW9NdXRlLGZyYW1lUmF0ZUlucHV0Om4uZ29vZ0ZyYW1lUmF0ZUlucHV0LGZyYW1lUmF0ZVNlbnQ6bi5nb29nRnJhbWVSYXRlU2VudCxnb29nUnR0Om4uZ29vZ1J0dH0pfSl9KX0sdC5nZXRBdWRpb1JlbGF0ZWRTdGF0cz1mdW5jdGlvbihlKXt0LmdldFN0YXRzKGZ1bmN0aW9uKG4pe24uZm9yRWFjaChmdW5jdGlvbihuKXt0LmlzU3Vic2NyaWJlciYmXCJhdWRpb1wiPT09bi5tZWRpYVR5cGUmJm4uaWQmJn5uLmlkLmluZGV4T2YoXCJyZWN2XCIpJiZlJiZlKHttZWRpYVR5cGU6XCJhdWRpb1wiLHBlZXJJZDp0LnVpZCxpc0F1ZGlvTXV0ZTp0LmlzQXVkaW9NdXRlLGZyYW1lRHJvcHBlZDpwYXJzZUludChuLmdvb2dEZWNvZGluZ1BMQykrcGFyc2VJbnQobi5nb29nRGVjb2RpbmdQTENDTkcpK1wiXCIsZnJhbWVSZWNlaXZlZDpuLmdvb2dEZWNvZGluZ0NUTixnb29nSml0dGVyUmVjZWl2ZWQ6bi5nb29nSml0dGVyUmVjZWl2ZWQsYnl0ZXNSZWNlaXZlZDpuLmJ5dGVzUmVjZWl2ZWQscGFja2V0c1JlY2VpdmVkOm4ucGFja2V0c1JlY2VpdmVkLHBhY2tldHNMb3N0Om4ucGFja2V0c0xvc3R9KX0pfSl9LHQuZ2V0U3RhdHNSYXRlPWZ1bmN0aW9uKGUpe3QuZ2V0U3RhdHMoZnVuY3Rpb24odCl7ZSh0KX0pfSx0LmdldFN0YXRzPWZ1bmN0aW9uKGUsbil7bj0obj1ufHw1MDApPjUwMD81MDA6bix0Lmxhc3RUaW1lR2V0U3RhdHMmJkRhdGUubm93KCktdC5sYXN0VGltZUdldFN0YXRzPG4/ZSYmZSh0LmZpbHRlclN0YXRzQ2FjaGUsdC5vcmlnaW5TdGF0c0NhY2hlKToodC5sYXN0VGltZUdldFN0YXRzPURhdGUubm93KCksdGhpcy5fZ2V0U3RhdHMoZnVuY3Rpb24obixpKXt0LmZpbHRlclN0YXRzQ2FjaGU9bix0Lm9yaWdpblN0YXRzQ2FjaGU9aSxlJiZlKG4saSl9KSl9LHQuX3NldFN0YXQ9ZnVuY3Rpb24oZSx0LG4pe2UuaGFzT3duUHJvcGVydHkodCkmJihudWxsIT1uJiZuIT09MS8wJiZuPT1ufHwobj0wKSxlW3RdPW4rXCJcIil9LHQuX3Byb2Nlc3NHZXRTdGF0c0FmdGVyQ2hyb21lNzY9ZnVuY3Rpb24oZSl7dmFyIG49dGhpczt0Lmxhc3RTdGF0c3x8KHQubGFzdFN0YXRzPW5ldyBNYXApLHQucGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uKHIpe3ZhciBvPVtdLHU9W10sbD1uZXcgTWFwLHA9bmV3IERhdGUsZj0hMCxtPSExLGc9dm9pZCAwO3RyeXtmb3IodmFyIHYsaD1yLnZhbHVlcygpW1N5bWJvbC5pdGVyYXRvcl0oKTshKGY9KHY9aC5uZXh0KCkpLmRvbmUpO2Y9ITApe3ZhciBfPXYudmFsdWU7XCJjb2RlY1wiIT1fLnR5cGU/XCJjYW5kaWRhdGUtcGFpclwiIT1fLnR5cGU/KFwiaW5ib3VuZC1ydHBcIj09PV8udHlwZSYmXCJ2aWRlb1wiPT09Xy5tZWRpYVR5cGUmJmwuc2V0KFwiaW5ib3VuZC12aWRlb1wiLF8pLFwiaW5ib3VuZC1ydHBcIj09PV8udHlwZSYmXCJhdWRpb1wiPT09Xy5tZWRpYVR5cGUmJmwuc2V0KFwiaW5ib3VuZC1hdWRpb1wiLF8pLFwib3V0Ym91bmQtcnRwXCI9PT1fLnR5cGUmJlwiYXVkaW9cIj09PV8ubWVkaWFUeXBlJiZsLnNldChcIm91dGJvdW5kLWF1ZGlvXCIsXyksXCJvdXRib3VuZC1ydHBcIj09PV8udHlwZSYmXCJ2aWRlb1wiPT09Xy5tZWRpYVR5cGUmJmwuc2V0KFwib3V0Ym91bmQtdmlkZW9cIixfKSxcInRyYWNrXCI9PT1fLnR5cGUmJlwidmlkZW9cIj09PV8ua2luZCYmXy5yZW1vdGVTb3VyY2UmJmwuc2V0KFwicmVtb3RlLXZpZGVvLXRyYWNrXCIsXyksXCJ0cmFja1wiPT09Xy50eXBlJiZcImF1ZGlvXCI9PT1fLmtpbmQmJl8ucmVtb3RlU291cmNlJiZsLnNldChcInJlbW90ZS1hdWRpby10cmFja1wiLF8pLFwicmVtb3RlLWluYm91bmQtcnRwXCI9PT1fLnR5cGUmJlwidmlkZW9cIj09PV8ubWVkaWFUeXBlJiZsLnNldChcInJlbW90ZS1pbmJvdW5kLXZpZGVvXCIsXyksXCJyZW1vdGUtaW5ib3VuZC1ydHBcIj09PV8udHlwZSYmXCJhdWRpb1wiPT09Xy5tZWRpYVR5cGUmJmwuc2V0KFwicmVtb3RlLWluYm91bmQtYXVkaW9cIixfKSxcInRyYWNrXCIhPT1fLnR5cGV8fFwidmlkZW9cIiE9PV8ua2luZHx8Xy5yZW1vdGVTb3VyY2V8fGwuc2V0KFwibG9jYWwtdmlkZW8tdHJhY2tcIixfKSxcInRyYWNrXCIhPT1fLnR5cGV8fFwiYXVkaW9cIiE9PV8ua2luZHx8Xy5yZW1vdGVTb3VyY2V8fGwuc2V0KFwibG9jYWwtYXVkaW8tdHJhY2tcIixfKSxcIm1lZGlhLXNvdXJjZVwiPT09Xy50eXBlJiZcInZpZGVvXCI9PT1fLmtpbmQmJmwuc2V0KFwibWVkaWEtc291cmNlLXZpZGVvXCIsXyksXCJtZWRpYS1zb3VyY2VcIj09PV8udHlwZSYmXCJhdWRpb1wiPT09Xy5raW5kJiZsLnNldChcIm1lZGlhLXNvdXJjZS1hdWRpb1wiLF8pKTp1LnB1c2goXyk6by5wdXNoKF8pfX1jYXRjaChlKXttPSEwLGc9ZX1maW5hbGx5e3RyeXtmfHxudWxsPT1oLnJldHVybnx8aC5yZXR1cm4oKX1maW5hbGx5e2lmKG0pdGhyb3cgZ319bC5zZXQoXCJjb2RlY1wiLG8pLGwuc2V0KFwiY2FuZGlkYXRlUGFpcnNcIix1KSxsLnNldChcInRpbWVzdGFtcFwiLCtwKTt2YXIgRT1udWxsLEk9bnVsbDtpZihjLnRpbWVzdGFtcD1wLHMudGltZXN0YW1wPXAsaS50aW1lc3RhbXA9cCxpLnRpbWVzdGFtcD1wLGQudGltZXN0YW1wPXAsbi5pc1N1YnNjcmliZXIpKEU9bC5nZXQoXCJpbmJvdW5kLXZpZGVvXCIpKSYmKHQuX3NldFN0YXQoYyxcImlkXCIsXCJpbmJvdW5kX3ZpZGVvX3NzcmNfcmVjdlwiKSx0Ll9zZXRTdGF0KGMsXCJtZWRpYVR5cGVcIixFLm1lZGlhVHlwZSksdC5fc2V0U3RhdChjLFwicGFja2V0c0xvc3RcIixFLnBhY2tldHNMb3N0KSx0Ll9zZXRTdGF0KGMsXCJnb29nRGVjb2RlTXNcIixudWxsKSx0Ll9zZXRTdGF0KGMsXCJnb29nTWF4RGVjb2RlTXNcIixudWxsKSx0Ll9zZXRTdGF0KGMsXCJnb29nUmVuZGVyRGVsYXlNc1wiLG51bGwpLHQuX3NldFN0YXQoYyxcImdvb2dNaW5QbGF5b3V0RGVsYXlNc1wiLG51bGwpLHQuX3NldFN0YXQoYyxcImdvb2dOYWNrc1NlbnRcIixFLm5hY2tDb3VudCksdC5fc2V0U3RhdChjLFwiZ29vZ1BsaXNTZW50XCIsRS5wbGlDb3VudCksdC5fc2V0U3RhdChjLFwiZ29vZ0ZpcnNTZW50XCIsRS5maXJDb3VudCksdC5fc2V0U3RhdChjLFwiYnl0ZXNSZWNlaXZlZFwiLEUuYnl0ZXNSZWNlaXZlZCksdC5fc2V0U3RhdChjLFwicGFja2V0c1JlY2VpdmVkXCIsRS5wYWNrZXRzUmVjZWl2ZWQpKSwoRT1sLmdldChcImluYm91bmQtYXVkaW9cIikpJiYodC5fc2V0U3RhdChzLFwiaWRcIixcImluYm91bmRfYXVkaW9fc3NyY19yZWN2XCIpLHQuX3NldFN0YXQocyxcIm1lZGlhVHlwZVwiLEUubWVkaWFUeXBlKSx0Ll9zZXRTdGF0KHMsXCJieXRlc1JlY2VpdmVkXCIsRS5ieXRlc1JlY2VpdmVkKSx0Ll9zZXRTdGF0KHMsXCJwYWNrZXRzTG9zdFwiLEUucGFja2V0c0xvc3QpLHQuX3NldFN0YXQocyxcInBhY2tldHNSZWNlaXZlZFwiLEUucGFja2V0c1JlY2VpdmVkKSx0Ll9zZXRTdGF0KHMsXCJnb29nQWNjZWxlcmF0ZVJhdGVcIixFLnJlbW92ZWRTYW1wbGVzRm9yQWNjZWxlcmF0aW9uKSx0Ll9zZXRTdGF0KHMsXCJnb29nQ3VycmVudERlbGF5TXNcIixFLmppdHRlckJ1ZmZlckRlbGF5KSx0Ll9zZXRTdGF0KHMsXCJnb29nRGVjb2RpbmdDTkdcIixudWxsKSx0Ll9zZXRTdGF0KHMsXCJnb29nRGVjb2RpbmdDVE5cIixudWxsKSx0Ll9zZXRTdGF0KHMsXCJnb29nRGVjb2RpbmdDVFNHXCIsbnVsbCksdC5fc2V0U3RhdChzLFwiZ29vZ0RlY29kaW5nTm9ybWFsXCIsbnVsbCksdC5fc2V0U3RhdChzLFwiZ29vZ0RlY29kaW5nUExDXCIsbnVsbCksdC5fc2V0U3RhdChzLFwiZ29vZ0RlY29kaW5nUExDQ05HXCIsbnVsbCksdC5fc2V0U3RhdChzLFwiZ29vZ0ppdHRlclJlY2VpdmVkXCIsRS5qaXR0ZXIpLHQuX3NldFN0YXQocyxcImdvb2dQcmVmZXJyZWRKaXR0ZXJCdWZmZXJNc1wiLG51bGwpLHQuX3NldFN0YXQocyxcImdvb2dTZWNvbmRhcnlEZWNvZGVkUmF0ZVwiLG51bGwpKSwoRT1sLmdldChcInJlbW90ZS12aWRlby10cmFja1wiKSkmJih0Ll9zZXRTdGF0KGMsXCJnb29nVGFyZ2V0RGVsYXlNc1wiLEUuaml0dGVyQnVmZmVyRGVsYXkpLHQuX3NldFN0YXQoYyxcImdvb2dGcmFtZVdpZHRoUmVjZWl2ZWRcIixFLmZyYW1lV2lkdGgpLHQuX3NldFN0YXQoYyxcImdvb2dGcmFtZUhlaWdodFJlY2VpdmVkXCIsRS5mcmFtZUhlaWdodCksdC5fc2V0U3RhdChjLFwiZ29vZ0ppdHRlckJ1ZmZlck1zXCIsRS5qaXR0ZXJCdWZmZXJEZWxheS9FLmppdHRlckJ1ZmZlckVtaXR0ZWRDb3VudCoxZTMpLHQuX3NldFN0YXQoYyxcImdvb2dDdXJyZW50RGVsYXlNc1wiLEUuaml0dGVyQnVmZmVyRGVsYXkpLHQuX3NldFN0YXQoYyxcImdvb2dGcmFtZXNEZWNvZGVkXCIsRS5mcmFtZXNEZWNvZGVkKSx0Ll9zZXRTdGF0KGMsXCJnb29nRnJhbWVzUmVjZWl2ZWRcIixFLmZyYW1lc1JlY2VpdmVkKSksKEU9bC5nZXQoXCJyZW1vdGUtYXVkaW8tdHJhY2tcIikpJiYodC5fc2V0U3RhdChzLFwiYXVkaW9PdXRwdXRMZXZlbFwiLDMyNzY3KkUuYXVkaW9MZXZlbCksdC5fc2V0U3RhdChzLFwiZ29vZ0ppdHRlckJ1ZmZlck1zXCIsRS5qaXR0ZXJCdWZmZXJEZWxheS9FLmppdHRlckJ1ZmZlckVtaXR0ZWRDb3VudCoxZTMpLHQuX3NldFN0YXQocyxcImdvb2dFeHBhbmRSYXRlXCIsRS5jb25jZWFsZWRTYW1wbGVzKSx0Ll9zZXRTdGF0KHMsXCJnb29nUHJlZW1wdGl2ZUV4cGFuZFJhdGVcIixFLmluc2VydGVkU2FtcGxlc0ZvckRlY2VsZXJhdGlvbiksdC5fc2V0U3RhdChzLFwiZ29vZ1NwZWVjaEV4cGFuZFJhdGVcIixFLnNpbGVudENvbmNlYWxlZFNhbXBsZXMpKTtlbHNle3ZhciB5PXQubGFzdFN0YXRzLmdldChcInRpbWVzdGFtcFwiKSxUPXQubGFzdFN0YXRzLmdldChcIm91dGJvdW5kLXZpZGVvXCIpO2lmKChFPWwuZ2V0KFwib3V0Ym91bmQtYXVkaW9cIikpJiYodC5fc2V0U3RhdChpLFwiaWRcIixcIm91dGJvdW5kX2F1ZGlvX3NzcmNfc2VuZFwiKSx0Ll9zZXRTdGF0KGksXCJtZWRpYVR5cGVcIixFLm1lZGlhVHlwZSksdC5fc2V0U3RhdChpLFwiYWVjRGl2ZXJnZW50RmlsdGVyRnJhY3Rpb25cIixudWxsKSx0Ll9zZXRTdGF0KGksXCJieXRlc1NlbnRcIixFLmJ5dGVzU2VudCksdC5fc2V0U3RhdChpLFwicGFja2V0c1NlbnRcIixFLnBhY2tldHNTZW50KSxJPUUudHJhbnNwb3J0SWQpLEU9bC5nZXQoXCJvdXRib3VuZC12aWRlb1wiKSl7aWYodC5fc2V0U3RhdChhLFwiaWRcIixcIm91dGJvdW5kX3ZpZGVvX3NzcmNfc2VuZFwiKSx0Ll9zZXRTdGF0KGEsXCJtZWRpYVR5cGVcIixFLm1lZGlhVHlwZSksdC5fc2V0U3RhdChhLFwiYnl0ZXNTZW50XCIsRS5ieXRlc1NlbnQpLHQuX3NldFN0YXQoYSxcInBhY2tldHNTZW50XCIsRS5wYWNrZXRzU2VudCksdC5fc2V0U3RhdChhLFwiZ29vZ0FkYXB0YXRpb25DaGFuZ2VzXCIsRS5xdWFsaXR5TGltaXRhdGlvbkR1cmF0aW9ucyksdC5fc2V0U3RhdChhLFwiZ29vZ0F2Z0VuY29kZU1zXCIsbnVsbCksdC5fc2V0U3RhdChhLFwiZ29vZ0VuY29kZVVzYWdlUGVyY2VudFwiLG51bGwpLEk9RS50cmFuc3BvcnRJZCxFLnRvdGFsRW5jb2RlZEJ5dGVzVGFyZ2V0JiZUJiZULnRvdGFsRW5jb2RlZEJ5dGVzVGFyZ2V0KXt2YXIgYj0oRS50b3RhbEVuY29kZWRCeXRlc1RhcmdldC1ULnRvdGFsRW5jb2RlZEJ5dGVzVGFyZ2V0KS8oK25ldyBEYXRlLXkpO3QuX3NldFN0YXQoZCxcImdvb2dUYXJnZXRFbmNCaXRyYXRlXCIsTWF0aC5mbG9vcig4KmIqMWUzKSl9aWYoRS5yZXRyYW5zbWl0dGVkQnl0ZXNTZW50JiZUJiZULnJldHJhbnNtaXR0ZWRCeXRlc1NlbnQpe3ZhciBSPShFLnJldHJhbnNtaXR0ZWRCeXRlc1NlbnQtVC5yZXRyYW5zbWl0dGVkQnl0ZXNTZW50KS8oK25ldyBEYXRlLXkpO3QuX3NldFN0YXQoZCxcImdvb2dSZXRyYW5zbWl0Qml0cmF0ZVwiLE1hdGguZmxvb3IoOCpSKjFlMykpfWlmKEUuYnl0ZXNTZW50JiZUJiZULmJ5dGVzU2VudCl7dmFyIEE9KEUuYnl0ZXNTZW50LVQuYnl0ZXNTZW50KS8oK25ldyBEYXRlLXkpO3QuX3NldFN0YXQoZCxcImdvb2dUcmFuc21pdEJpdHJhdGVcIixNYXRoLmZsb29yKDgqQSoxZTMpKSx0Ll9zZXRTdGF0KGQsXCJnb29nQWN0dWFsRW5jQml0cmF0ZVwiLE1hdGguZmxvb3IoOCpBKjFlMykpfWlmKEUudG90YWxQYWNrZXRTZW5kRGVsYXkmJlQmJlQudG90YWxQYWNrZXRTZW5kRGVsYXkpe3ZhciBPPShFLnRvdGFsUGFja2V0U2VuZERlbGF5LVQudG90YWxQYWNrZXRTZW5kRGVsYXkpLygrbmV3IERhdGUteSk7dC5fc2V0U3RhdChkLFwiZ29vZ0J1Y2tldERlbGF5XCIsTWF0aC5mbG9vcigxZTMqTykpfX1pZigoRT1sLmdldChcInJlbW90ZS1pbmJvdW5kLXZpZGVvXCIpKSYmKHQuX3NldFN0YXQoYSxcInBhY2tldHNMb3N0XCIsRS5wYWNrZXRzTG9zdCksdC5fc2V0U3RhdChhLFwiZ29vZ1J0dFwiLEUucm91bmRUcmlwVGltZSkpLChFPWwuZ2V0KFwibG9jYWwtdmlkZW8tdHJhY2tcIikpJiYodC5fc2V0U3RhdChhLFwiZ29vZ0ZyYW1lSGVpZ2h0U2VudFwiLEUuZnJhbWVIZWlnaHQpLHQuX3NldFN0YXQoYSxcImdvb2dGcmFtZVdpZHRoU2VudFwiLEUuZnJhbWVXaWR0aCksdm9pZCAwIT09RS5mcmFtZXNQZXJTZWNvbmQmJnQuX3NldFN0YXQoYSxcImdvb2dGcmFtZVJhdGVTZW50XCIsRS5mcmFtZXNQZXJTZWNvbmQpKSwoRT1sLmdldChcImxvY2FsLWF1ZGlvLXRyYWNrXCIpKSYmKHQuX3NldFN0YXQoaSxcImdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zc1wiLEUuZWNob1JldHVybkxvc3MpLHQuX3NldFN0YXQoaSxcImdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zc0VuaGFuY2VtZW50XCIsRS5lY2hvUmV0dXJuTG9zc0VuaGFuY2VtZW50KSksKEU9bC5nZXQoXCJtZWRpYS1zb3VyY2UtdmlkZW9cIikpJiYodC5fc2V0U3RhdChhLFwiZ29vZ0ZyYW1lSGVpZ2h0SW5wdXRcIixFLmhlaWdodCksdC5fc2V0U3RhdChhLFwiZ29vZ0ZyYW1lV2lkdGhJbnB1dFwiLEUud2lkdGgpLHQuX3NldFN0YXQoYSxcImdvb2dGcmFtZVJhdGVJbnB1dFwiLEUuZnJhbWVzUGVyU2Vjb25kKSksKEU9bC5nZXQoXCJtZWRpYS1zb3VyY2UtYXVkaW9cIikpJiZ0Ll9zZXRTdGF0KGksXCJhdWRpb0lucHV0TGV2ZWxcIiwzMjc2NypFLnRvdGFsQXVkaW9FbmVyZ3kpLChFPWwuZ2V0KFwiaW5ib3VuZC12aWRlb1wiKSkmJih0Ll9zZXRTdGF0KGEsXCJnb29nRmlyc1JlY2VpdmVkXCIsRS5maXJDb3VudCksdC5fc2V0U3RhdChhLFwiZ29vZ05hY2tzUmVjZWl2ZWRcIixFLm5hY2tDb3VudCksdC5fc2V0U3RhdChhLFwiZ29vZ1BsaXNSZWNlaXZlZFwiLEUucGxpQ291bnQpKSxJKWwuZ2V0KFwiY2FuZGlkYXRlUGFpcnNcIikubWFwKGZ1bmN0aW9uKGUpe0k9PWUudHJhbnNwb3J0SWQmJnQuX3NldFN0YXQoZCxcImdvb2dBdmFpbGFibGVTZW5kQmFuZHdpZHRoXCIsZS5hdmFpbGFibGVPdXRnb2luZ0JpdHJhdGUpfSk7ZWxzZXt2YXIgQz1sLmdldChcImNhbmRpZGF0ZVBhaXJzXCIpWzBdO0MmJnQuX3NldFN0YXQoZCxcImdvb2dBdmFpbGFibGVTZW5kQmFuZHdpZHRoXCIsQy5hdmFpbGFibGVPdXRnb2luZ0JpdHJhdGUpfX10Lmxhc3RTdGF0cz1sO3ZhciBOPVtTKCkoe30sYSksUygpKHt9LGkpLFMoKSh7fSxjKSxTKCkoe30scyksUygpKHt9LGQpXTtOLnB1c2goe2lkOlwidGltZVwiLHN0YXJ0VGltZTp0LmNvbm5lY3RlZFRpbWUsdGltZXN0YW1wOm5ldyBEYXRlfSksZShOKX0pfSx0Ll9wcm9jZXNzR2V0U3RhdHNCZWZvcmVDaHJvbWU3Nj1mdW5jdGlvbihlKXt0LnBlZXJDb25uZWN0aW9uLmdldFN0YXRzKGZ1bmN0aW9uKG4pe3ZhciByPVtdLG89W10sdT1udWxsO09iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bltlXTt0JiYoby5wdXNoKHQpLHU9dC50aW1lc3RhbXAsXCJWaWRlb0J3ZVwiPT09dC50eXBlP2Q9dDp0LmlkLmluZGV4T2YoXCJfc2VuZFwiKT4tMSYmXCJ2aWRlb1wiPT09dC5tZWRpYVR5cGU/YT10OnQuaWQuaW5kZXhPZihcIl9zZW5kXCIpPi0xJiZcImF1ZGlvXCI9PT10Lm1lZGlhVHlwZT9pPXQ6dC5pZC5pbmRleE9mKFwiX3JlY3ZcIik+LTEmJlwidmlkZW9cIj09PXQubWVkaWFUeXBlP2M9dDp0LmlkLmluZGV4T2YoXCJfcmVjdlwiKT4tMSYmXCJhdWRpb1wiPT09dC5tZWRpYVR5cGUmJihzPXQpKX0pLChyPVtTKCkoe30sYSksUygpKHt9LGkpLFMoKSh7fSxjKSxTKCkoe30scyksUygpKHt9LGQpXSkucHVzaCh7aWQ6XCJ0aW1lXCIsc3RhcnRUaW1lOnQuY29ubmVjdGVkVGltZSx0aW1lc3RhbXA6dXx8bmV3IERhdGV9KSxlKHIsbyl9KX0sdC5fZ2V0U3RhdHM9ZnVuY3Rpb24oZSl7T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkNIUk9NRV9ORVdfU1RBVFNcIikmJm0uaXNDaHJvbWVLZXJuZWwoKSYmK20uZ2V0QnJvd3NlclZlcnNpb24oKT49NzY/dC5fcHJvY2Vzc0dldFN0YXRzQWZ0ZXJDaHJvbWU3NihlKTp0Ll9wcm9jZXNzR2V0U3RhdHNCZWZvcmVDaHJvbWU3NihlKX0sdC5hZGRUcmFjaz1mdW5jdGlvbihlLG4pe3QucGVlckNvbm5lY3Rpb24uYWRkVHJhY2soZSxuKX0sdC5yZW1vdmVUcmFjaz1mdW5jdGlvbihlLG4pe3QucGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2sodC5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjaz09ZX0pKX0sdC5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7dC5wZWVyQ29ubmVjdGlvbi5hZGRTdHJlYW0oZSksdC5tYXJrQWN0aW9uTmVlZGVkKCl9LHQucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKCl7dC5tYXJrQWN0aW9uTmVlZGVkKCl9LHQuY2xvc2U9ZnVuY3Rpb24oKXt0LnN0YXRlPVwiY2xvc2VkXCIsdC5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpfSx0Lm1hcmtBY3Rpb25OZWVkZWQ9ZnVuY3Rpb24oKXt0LmFjdGlvbk5lZWRlZD0hMCx0LmRvTGF0ZXIoZnVuY3Rpb24oKXt0Lm9uc3RhYmxlc3RhdGUoKX0pfSx0LmRvTGF0ZXI9ZnVuY3Rpb24oZSl7d2luZG93LnNldFRpbWVvdXQoZSwxKX0sdC5vbnN0YWJsZXN0YXRlPWZ1bmN0aW9uKCl7dmFyIGU7aWYodC5hY3Rpb25OZWVkZWQpe2lmKFwibmV3XCI9PT10LnN0YXRlfHxcImVzdGFibGlzaGVkXCI9PT10LnN0YXRlKXQucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoZnVuY3Rpb24oZSl7aWYoZS5zZHAhPT10LnByZXZPZmZlcilyZXR1cm4gdC5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGUpLHQuc3RhdGU9XCJwcmVwYXJpbmctb2ZmZXJcIix2b2lkIHQubWFya0FjdGlvbk5lZWRlZCgpO28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXU5vdCBzZW5kaW5nIGEgbmV3IG9mZmVyXCIpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1wZWVyIGNvbm5lY3Rpb24gY3JlYXRlIG9mZmVyIGZhaWxlZCBcIixlKX0sdC5tZWRpYUNvbnN0cmFpbnRzKTtlbHNlIGlmKFwicHJlcGFyaW5nLW9mZmVyXCI9PT10LnN0YXRlKXtpZih0Lm1vcmVJY2VDb21pbmcpcmV0dXJuO3QucHJldk9mZmVyPXQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHAsdC5vZmZlckNhbmRpZGF0ZXM9dC5wcmV2T2ZmZXIubWF0Y2goL2E9Y2FuZGlkYXRlLitcXHJcXG4vZyl8fFtdLHQub2ZmZXJDYW5kaWRhdGVzLmxlbmd0aHx8KG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXU5vIEljZSBDYW5kaWRhdGUgZ2VuZXJhdGVkXCIpKSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU0hJTV9DQU5ESURBVEVcIik/KG8uZGVmYXVsdC5kZWJ1ZyhcIlNoaW1taW5nIGZha2UgY2FuZGlkYXRlXCIpLHQucHJldk9mZmVyKz1cImE9Y2FuZGlkYXRlOjIyNDMyNTU0MzUgMSB1ZHAgMjEyMjE5NDY4NyAxOTIuMTY4LjAuMSAzMDAwMCB0eXAgaG9zdCBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAxXFxyXFxuXCIpOm8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl1Ob25lIEljZSBDYW5kaWRhdGUgbm90IGFsbG93ZWRcIikpKSx0LnByZXZPZmZlcj10LnByZXZPZmZlci5yZXBsYWNlKC9hPWNhbmRpZGF0ZTouK3R5cFxcc2hvc3QuK1xcclxcbi9nLFwiYT1jYW5kaWRhdGU6MjI0MzI1NTQzNSAxIHVkcCAyMTIyMTk0Njg3IDE5Mi4xNjguMC4xIDMwMDAwIHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDFcXHJcXG5cIiksdC5zZW5kTWVzc2FnZShcIk9GRkVSXCIsdC5wcmV2T2ZmZXIpLHQuc3RhdGU9XCJvZmZlci1zZW50XCJ9ZWxzZSBpZihcIm9mZmVyLXJlY2VpdmVkXCI9PT10LnN0YXRlKXQucGVlckNvbm5lY3Rpb24uY3JlYXRlQW5zd2VyKGZ1bmN0aW9uKGUpe2lmKHQucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihlKSx0LnN0YXRlPVwib2ZmZXItcmVjZWl2ZWQtcHJlcGFyaW5nLWFuc3dlclwiLHQuaWNlU3RhcnRlZCl0Lm1hcmtBY3Rpb25OZWVkZWQoKTtlbHNle3ZhciBuPW5ldyBEYXRlO28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXVwiK24uZ2V0VGltZSgpK1wiOiBTdGFydGluZyBJQ0UgaW4gcmVzcG9uZGVyXCIpLHQuaWNlU3RhcnRlZD0hMH19LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXBlZXIgY29ubmVjdGlvbiBjcmVhdGUgYW5zd2VyIGZhaWxlZCBcIixlKX0sdC5tZWRpYUNvbnN0cmFpbnRzKTtlbHNlIGlmKFwib2ZmZXItcmVjZWl2ZWQtcHJlcGFyaW5nLWFuc3dlclwiPT09dC5zdGF0ZSl7aWYodC5tb3JlSWNlQ29taW5nKXJldHVybjtlPXQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHAsdC5zZW5kTWVzc2FnZShcIkFOU1dFUlwiLGUpLHQuc3RhdGU9XCJlc3RhYmxpc2hlZFwifWVsc2UgdC5kZWJ1ZyhcIkRhemVkIGFuZCBjb25mdXNlZCBpbiBzdGF0ZSBcIit0LnN0YXRlK1wiLCBzdG9wcGluZyBoZXJlXCIpO3QuYWN0aW9uTmVlZGVkPSExfX0sdC5zZW5kTWVzc2FnZT1mdW5jdGlvbihlLG4pe3ZhciBpPXt9O2kubWVzc2FnZVR5cGU9ZSxpLnNkcD1uLFwiT0ZGRVJcIj09PWU/KGkub2ZmZXJlclNlc3Npb25JZD10LnNlc3Npb25JZCxpLmFuc3dlcmVyU2Vzc2lvbklkPXQub3RoZXJTZXNzaW9uSWQsaS5zZXE9dC5zZXF1ZW5jZU51bWJlcis9MSxpLnRpZWJyZWFrZXI9TWF0aC5mbG9vcig0Mjk0OTY3MjMqTWF0aC5yYW5kb20oKSsxKSk6KGkub2ZmZXJlclNlc3Npb25JZD10LmluY29taW5nTWVzc2FnZS5vZmZlcmVyU2Vzc2lvbklkLGkuYW5zd2VyZXJTZXNzaW9uSWQ9dC5zZXNzaW9uSWQsaS5zZXE9dC5pbmNvbWluZ01lc3NhZ2Uuc2VxKSx0Lm9uc2lnbmFsaW5nbWVzc2FnZShKU09OLnN0cmluZ2lmeShpKSl9LHQuX2dldFNlbmRlcj1mdW5jdGlvbihlKXtpZih0LnBlZXJDb25uZWN0aW9uJiZ0LnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMpe3ZhciBuPXQucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2sua2luZD09ZX0pO2lmKG4pcmV0dXJuIG59cmV0dXJuIG51bGx9LHQuaGFzU2VuZGVyPWZ1bmN0aW9uKGUpe3JldHVybiEhdC5fZ2V0U2VuZGVyKGUpfSx0LnJlcGxhY2VUcmFjaz1mdW5jdGlvbihlLG4saSl7dmFyIGE9dC5fZ2V0U2VuZGVyKGUua2luZCk7aWYoIWEpcmV0dXJuIGkoXCJOT19TRU5ERVJfRk9VTkRcIik7dHJ5e2EucmVwbGFjZVRyYWNrKGUpfWNhdGNoKGUpe3JldHVybiBpJiZpKGUpfXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gbiYmbigpfSw1MCl9LHQuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3dcIkVycm9yIGluIFJvYXBPbkpzZXA6IFwiK2V9LHQuc2Vzc2lvbklkPXQucm9hcFNlc3Npb25JZCs9MSx0LnNlcXVlbmNlTnVtYmVyPTAsdC5hY3Rpb25OZWVkZWQ9ITEsdC5pY2VTdGFydGVkPSExLHQubW9yZUljZUNvbWluZz0hMCx0LmljZUNhbmRpZGF0ZUNvdW50PTAsdC5vbnNpZ25hbGluZ21lc3NhZ2U9ZS5jYWxsYmFjayx0LnBlZXJDb25uZWN0aW9uLm9udHJhY2s9ZnVuY3Rpb24oZSl7dC5vbmFkZHN0cmVhbSYmKHQub25hZGRzdHJlYW0oZSxcIm9udHJhY2tcIiksdC5wZWVyQ29ubmVjdGlvbi5vbmFkZHN0cmVhbT1udWxsKX0sdC5wZWVyQ29ubmVjdGlvbi5vbmFkZHN0cmVhbT1mdW5jdGlvbihlKXt0Lm9uYWRkc3RyZWFtJiYodC5vbmFkZHN0cmVhbShlLFwib25hZGRzdHJlYW1cIiksdC5wZWVyQ29ubmVjdGlvbi5vbnRyYWNrPW51bGwpfSx0LnBlZXJDb25uZWN0aW9uLm9ucmVtb3Zlc3RyZWFtPWZ1bmN0aW9uKGUpe3Qub25yZW1vdmVzdHJlYW0mJnQub25yZW1vdmVzdHJlYW0oZSl9LHQucGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSl7XCJjb25uZWN0ZWRcIj09PWUuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUmJih0LmNvbm5lY3RlZFRpbWU9bmV3IERhdGUpLHQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UmJnQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoZS5jdXJyZW50VGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZSl9LHQucmVuZWdvdGlhdGU9ZnVuY3Rpb24oKXt2b2lkIDAhPT10LnByZXZPZmZlciYmdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2RwPWUuc2RwLnJlcGxhY2UoL2E9cmVjdm9ubHlcXHJcXG4vZyxcImE9aW5hY3RpdmVcXHJcXG5cIiksZS5zZHA9dShlLnNkcCksZS5zZHA9bChlLnNkcCksdC5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGUpfSkudGhlbihmdW5jdGlvbigpe3Qub25uZWdvdGlhdGlvbm5lZWRlZCYmdC5vbm5lZ290aWF0aW9ubmVlZGVkKHQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHApfSkuY2F0Y2goZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCJjcmVhdGVPZmZlciBlcnJvcjogXCIsZSl9KX0sdC5wZWVyQ29ubmVjdGlvbi5vbm5lZ290aWF0aW9ubmVlZGVkPXQucmVuZWdvdGlhdGUsdC5vbmFkZHN0cmVhbT1udWxsLHQub25yZW1vdmVzdHJlYW09bnVsbCx0Lm9ubmVnb3RpYXRpb25uZWVkZWQ9bnVsbCx0LnN0YXRlPVwibmV3XCIsdC5tYXJrQWN0aW9uTmVlZGVkKCksdH0sQj1mdW5jdGlvbihlKXt2YXIgdD17fSxuPUUuUlRDUGVlckNvbm5lY3Rpb247dC51aWQ9ZS51aWQsdC5pc1ZpZGVvTXV0ZT1lLmlzVmlkZW9NdXRlLHQuaXNBdWRpb011dGU9ZS5pc0F1ZGlvTXV0ZSx0LmlzU3Vic2NyaWJlcj1lLmlzU3Vic2NyaWJlcix0LmNsaWVudElkPWUuY2xpZW50SWQsdC5maWx0ZXJTdGF0c0NhY2hlPVtdLHQub3JpZ2luU3RhdHNDYWNoZT1bXSx0Lmxhc3RUaW1lR2V0U3RhdHM9bnVsbCx0LnBjX2NvbmZpZz17aWNlU2VydmVyczpbe3VybHM6W1wic3R1bjp3ZWJjcy5hZ29yYS5pbzozNDc4XCIsXCJzdHVuOnN0dW4ubC5nb29nbGUuY29tOjE5MzAyXCJdfV0sYnVuZGxlUG9saWN5OlwibWF4LWJ1bmRsZVwifSx0LmNvbj17b3B0aW9uYWw6W3tEdGxzU3J0cEtleUFncmVlbWVudDohMH1dfSxlLmljZVNlcnZlcnMgaW5zdGFuY2VvZiBBcnJheT90LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzPWUuaWNlU2VydmVyczooZS5zdHVuU2VydmVyVXJsJiYoZS5zdHVuU2VydmVyVXJsIGluc3RhbmNlb2YgQXJyYXk/ZS5zdHVuU2VydmVyVXJsLm1hcChmdW5jdGlvbihlKXtcInN0cmluZ1wiPT10eXBlb2YgZSYmXCJcIiE9PWUmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXJsOmV9KX0pOlwic3RyaW5nXCI9PXR5cGVvZiBlLnN0dW5TZXJ2ZXJVcmwmJlwiXCIhPT1lLnN0dW5TZXJ2ZXJVcmwmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXJsOmUuc3R1blNlcnZlclVybH0pKSxlLnR1cm5TZXJ2ZXImJihlLnR1cm5TZXJ2ZXIgaW5zdGFuY2VvZiBBcnJheT9lLnR1cm5TZXJ2ZXIubWFwKGZ1bmN0aW9uKGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlLnVybCYmXCJcIiE9PWUudXJsJiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOmUudXNlcm5hbWUsY3JlZGVudGlhbDplLmNyZWRlbnRpYWwsdXJsOmUudXJsfSl9KTpcImF1dG9cIiE9PWUudHVyblNlcnZlci5tb2RlJiZcIm1hbnVhbFwiIT09ZS50dXJuU2VydmVyLm1vZGV8fChlLnR1cm5TZXJ2ZXIudWRwcG9ydCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1c2VybmFtZTplLnR1cm5TZXJ2ZXIudXNlcm5hbWUsY3JlZGVudGlhbDplLnR1cm5TZXJ2ZXIuY3JlZGVudGlhbCxjcmVkZW50aWFsVHlwZTpcInBhc3N3b3JkXCIsdXJsczpbXCJ0dXJuOlwiK2UudHVyblNlcnZlci51cmwrXCI6XCIrZS50dXJuU2VydmVyLnVkcHBvcnQrXCI/dHJhbnNwb3J0PXVkcFwiXX0pLFwic3RyaW5nXCI9PXR5cGVvZiBlLnR1cm5TZXJ2ZXIudGNwcG9ydCYmXCJcIiE9PWUudHVyblNlcnZlci50Y3Bwb3J0JiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOmUudHVyblNlcnZlci51c2VybmFtZSxjcmVkZW50aWFsOmUudHVyblNlcnZlci5jcmVkZW50aWFsLGNyZWRlbnRpYWxUeXBlOlwicGFzc3dvcmRcIix1cmxzOltcInR1cm46XCIrZS50dXJuU2VydmVyLnVybCtcIjpcIitlLnR1cm5TZXJ2ZXIudGNwcG9ydCtcIj90cmFuc3BvcnQ9dGNwXCJdfSksITA9PT1lLnR1cm5TZXJ2ZXIuZm9yY2V0dXJuJiYodC5wY19jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5PVwicmVsYXlcIikpKSksdm9pZCAwPT09ZS5hdWRpbyYmKGUuYXVkaW89ITApLHZvaWQgMD09PWUudmlkZW8mJihlLnZpZGVvPSEwKSx0Lm1lZGlhQ29uc3RyYWludHM9e21hbmRhdG9yeTp7T2ZmZXJUb1JlY2VpdmVWaWRlbzplLnZpZGVvLE9mZmVyVG9SZWNlaXZlQXVkaW86ZS5hdWRpb319LHQucm9hcFNlc3Npb25JZD0xMDM7dHJ5e3QucGNfY29uZmlnLnNkcFNlbWFudGljcz1cInBsYW4tYlwiLHQucGVlckNvbm5lY3Rpb249bmV3IG4odC5wY19jb25maWcsdC5jb24pfWNhdGNoKGUpe2RlbGV0ZSB0LnBjX2NvbmZpZy5zZHBTZW1hbnRpY3MsdC5wZWVyQ29ubmVjdGlvbj1uZXcgbih0LnBjX2NvbmZpZyx0LmNvbil9by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrJ11zYWZhcmkgQ3JlYXRlZCBSVENQZWVyQ29ubm5lY3Rpb24gd2l0aCBjb25maWcgXCInK0pTT04uc3RyaW5naWZ5KHQucGNfY29uZmlnKSsnXCIuJyksdC5pY2VDYW5kaWRhdGVUaW1lcj1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5pY2VDYW5kaWRhdGVUaW1lcj1udWxsLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl1DYW5kaWRhdGVzIGNvbGxlY3RlZDogXCIpLmNvbmNhdCh0LmljZUNhbmRpZGF0ZUNvdW50KSksdC5tb3JlSWNlQ29taW5nJiYodC5tb3JlSWNlQ29taW5nPSExLHQubWFya0FjdGlvbk5lZWRlZCgpKX0sT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkNBTkRJREFURV9USU1FT1VUXCIpKSx0LnBlZXJDb25uZWN0aW9uLm9uaWNlY2FuZGlkYXRlPWZ1bmN0aW9uKGUpe3ZhciBuLGksYSxyO2k9KG49dC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCkubWF0Y2goL2E9Y2FuZGlkYXRlOi4rdHlwXFxzc3JmbHguK1xcclxcbi8pLGE9bi5tYXRjaCgvYT1jYW5kaWRhdGU6Lit0eXBcXHNob3N0LitcXHJcXG4vKSxyPW4ubWF0Y2goL2E9Y2FuZGlkYXRlOi4rdHlwXFxzcmVsYXkuK1xcclxcbi8pLDA9PT10LmljZUNhbmRpZGF0ZUNvdW50JiYodC50aW1lb3V0PXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Lm1vcmVJY2VDb21pbmcmJih0Lm1vcmVJY2VDb21pbmc9ITEsdC5tYXJrQWN0aW9uTmVlZGVkKCkpfSwxZTMpKSxudWxsPT09aSYmbnVsbD09PWEmJm51bGw9PT1yfHx2b2lkIDAhPT10LmljZXx8IXQuaWNlQ2FuZGlkYXRlVGltZXJ8fChvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1zcmZseCBjYW5kaWRhdGUgOiBcIitpK1wiIHJlbGF5IGNhbmRpZGF0ZTogXCIrcitcIiBob3N0IGNhbmRpZGF0ZSA6IFwiK2EpLGNsZWFyVGltZW91dCh0LmljZUNhbmRpZGF0ZVRpbWVyKSx0LmljZUNhbmRpZGF0ZVRpbWVyPW51bGwsdC5pY2U9MCx0Lm1vcmVJY2VDb21pbmc9ITEsdC5tYXJrQWN0aW9uTmVlZGVkKCkpLHQuaWNlQ2FuZGlkYXRlQ291bnQ9dC5pY2VDYW5kaWRhdGVDb3VudCsxfTt2YXIgaT1mdW5jdGlvbih0KXtyZXR1cm4gZS5zY3JlZW4mJih0PXQucmVwbGFjZShcImE9eC1nb29nbGUtZmxhZzpjb25mZXJlbmNlXFxyXFxuXCIsXCJcIikpLHR9LGE9ZnVuY3Rpb24obil7dmFyIGksYTtyZXR1cm4oaT1uLm1hdGNoKC9tPXZpZGVvLipcXHJcXG4vKSkmJmUubWluVmlkZW9CVyYmZS5tYXhWaWRlb0JXJiYoYT1pWzBdK1wiYj1BUzpcIitlLm1heFZpZGVvQlcrXCJcXHJcXG5cIixuPW4ucmVwbGFjZShpWzBdLGEpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXVNldCBWaWRlbyBCaXRyYXRlIC0gbWluOlwiK2UubWluVmlkZW9CVytcIiBtYXg6XCIrZS5tYXhWaWRlb0JXKSksKGk9bi5tYXRjaCgvbT1hdWRpby4qXFxyXFxuLykpJiZlLm1heEF1ZGlvQlcmJihhPWlbMF0rXCJiPUFTOlwiK2UubWF4QXVkaW9CVytcIlxcclxcblwiLG49bi5yZXBsYWNlKGlbMF0sYSkpLG59O3QucHJvY2Vzc1NpZ25hbGluZ01lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIG4scj1KU09OLnBhcnNlKGUpO3QuaW5jb21pbmdNZXNzYWdlPXIsXCJuZXdcIj09PXQuc3RhdGU/XCJPRkZFUlwiPT09ci5tZXNzYWdlVHlwZT8obj17c2RwOnIuc2RwLHR5cGU6XCJvZmZlclwifSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obikpLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZFwiLHQubWFya0FjdGlvbk5lZWRlZCgpKTp0LmVycm9yKFwiSWxsZWdhbCBtZXNzYWdlIGZvciB0aGlzIHN0YXRlOiBcIityLm1lc3NhZ2VUeXBlK1wiIGluIHN0YXRlIFwiK3Quc3RhdGUpOlwib2ZmZXItc2VudFwiPT09dC5zdGF0ZT9cIkFOU1dFUlwiPT09ci5tZXNzYWdlVHlwZT8oKG49e3NkcDpyLnNkcCx0eXBlOlwiYW5zd2VyXCJ9KS5zZHA9aShuLnNkcCksbi5zZHA9YShuLnNkcCksbi5zZHA9bi5zZHAucmVwbGFjZSgvYT14LWdvb2dsZS1mbGFnOmNvbmZlcmVuY2VcXHJcXG4vZyxcIlwiKSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obikpLHQuc3RhdGU9XCJlc3RhYmxpc2hlZFwiKTpcInByLWFuc3dlclwiPT09ci5tZXNzYWdlVHlwZT8obj17c2RwOnIuc2RwLHR5cGU6XCJwci1hbnN3ZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG4pKSk6XCJvZmZlclwiPT09ci5tZXNzYWdlVHlwZT90LmVycm9yKFwiTm90IHdyaXR0ZW4geWV0XCIpOnQuZXJyb3IoXCJJbGxlZ2FsIG1lc3NhZ2UgZm9yIHRoaXMgc3RhdGU6IFwiK3IubWVzc2FnZVR5cGUrXCIgaW4gc3RhdGUgXCIrdC5zdGF0ZSk6XCJlc3RhYmxpc2hlZFwiPT09dC5zdGF0ZSYmKFwiT0ZGRVJcIj09PXIubWVzc2FnZVR5cGU/KG49e3NkcDpyLnNkcCx0eXBlOlwib2ZmZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG4pKSx0LnN0YXRlPVwib2ZmZXItcmVjZWl2ZWRcIix0Lm1hcmtBY3Rpb25OZWVkZWQoKSk6XCJBTlNXRVJcIj09PXIubWVzc2FnZVR5cGU/KChuPXtzZHA6ci5zZHAsdHlwZTpcImFuc3dlclwifSkuc2RwPWkobi5zZHApLG4uc2RwPWEobi5zZHApLHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihuKSkpOnQuZXJyb3IoXCJJbGxlZ2FsIG1lc3NhZ2UgZm9yIHRoaXMgc3RhdGU6IFwiK3IubWVzc2FnZVR5cGUrXCIgaW4gc3RhdGUgXCIrdC5zdGF0ZSkpfTt2YXIgcz17aWQ6XCJcIix0eXBlOlwiXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ0NvZGVjTmFtZTpcIm9wdXNcIixhZWNEaXZlcmdlbnRGaWx0ZXJGcmFjdGlvbjpcIjBcIixhdWRpb0lucHV0TGV2ZWw6XCIwXCIsYnl0ZXNTZW50OlwiMFwiLHBhY2tldHNTZW50OlwiMFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zczpcIjBcIixnb29nRWNob0NhbmNlbGxhdGlvblJldHVybkxvc3NFbmhhbmNlbWVudDpcIjBcIn0sYz17aWQ6XCJcIix0eXBlOlwiXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ0NvZGVjTmFtZTpcImgyNjRcIj09PWUuY29kZWM/XCJIMjY0XCI6XCJWUDhcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0FkYXB0YXRpb25DaGFuZ2VzOlwiMFwiLGdvb2dBdmdFbmNvZGVNczpcIjBcIixnb29nRW5jb2RlVXNhZ2VQZXJjZW50OlwiMFwiLGdvb2dGaXJzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lSGVpZ2h0U2VudDpcIjBcIixnb29nRnJhbWVIZWlnaHRJbnB1dDpcIjBcIixnb29nRnJhbWVSYXRlSW5wdXQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZVNlbnQ6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhTZW50OlwiMFwiLGdvb2dGcmFtZVdpZHRoSW5wdXQ6XCIwXCIsZ29vZ05hY2tzUmVjZWl2ZWQ6XCIwXCIsZ29vZ1BsaXNSZWNlaXZlZDpcIjBcIixnb29nUnR0OlwiMFwiLGdvb2dGcmFtZXNFbmNvZGVkOlwiMFwifSxkPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixhdWRpb091dHB1dExldmVsOlwiMFwiLGJ5dGVzUmVjZWl2ZWQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1JlY2VpdmVkOlwiMFwiLGdvb2dBY2NlbGVyYXRlUmF0ZTpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ0RlY29kaW5nQ05HOlwiMFwiLGdvb2dEZWNvZGluZ0NUTjpcIjBcIixnb29nRGVjb2RpbmdDVFNHOlwiMFwiLGdvb2dEZWNvZGluZ05vcm1hbDpcIjBcIixnb29nRGVjb2RpbmdQTEM6XCIwXCIsZ29vZ0RlY29kaW5nUExDQ05HOlwiMFwiLGdvb2dFeHBhbmRSYXRlOlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nSml0dGVyUmVjZWl2ZWQ6XCIwXCIsZ29vZ1ByZWVtcHRpdmVFeHBhbmRSYXRlOlwiMFwiLGdvb2dQcmVmZXJyZWRKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nU2Vjb25kYXJ5RGVjb2RlZFJhdGU6XCIwXCIsZ29vZ1NwZWVjaEV4cGFuZFJhdGU6XCIwXCJ9LHU9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGdvb2dUYXJnZXREZWxheU1zOlwiMFwiLHBhY2tldHNMb3N0OlwiMFwiLGdvb2dEZWNvZGVNczpcIjBcIixnb29nTWF4RGVjb2RlTXM6XCIwXCIsZ29vZ1JlbmRlckRlbGF5TXM6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVIZWlnaHRSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZURlY29kZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZU91dHB1dDpcIjBcIixnb29nRnJhbWVzRGVjb2RlZDpcIjBcIixnb29nRnJhbWVSZWNlaXZlZDpcIjBcIixnb29nSml0dGVyQnVmZmVyTXM6XCIwXCIsZ29vZ0N1cnJlbnREZWxheU1zOlwiMFwiLGdvb2dNaW5QbGF5b3V0RGVsYXlNczpcIjBcIixnb29nTmFja3NTZW50OlwiMFwiLGdvb2dQbGlzU2VudDpcIjBcIixnb29nRmlyc1NlbnQ6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCJ9LGw9e2lkOlwiYndlZm9ydmlkZW9cIix0eXBlOlwiVmlkZW9Cd2VcIixnb29nQXZhaWxhYmxlU2VuZEJhbmR3aWR0aDpcIjBcIixnb29nQXZhaWxhYmxlUmVjZWl2ZUJhbmR3aWR0aDpcIjBcIixnb29nQWN0dWFsRW5jQml0cmF0ZTpcIjBcIixnb29nUmV0cmFuc21pdEJpdHJhdGU6XCIwXCIsZ29vZ1RhcmdldEVuY0JpdHJhdGU6XCIwXCIsZ29vZ0J1Y2tldERlbGF5OlwiMFwiLGdvb2dUcmFuc21pdEJpdHJhdGU6XCIwXCJ9LHA9MCxmPTAsbT0wO3JldHVybiB0LmdldFZpZGVvUmVsYXRlZFN0YXRzPWZ1bmN0aW9uKG4pe3QucGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uKGkpe3ZhciBhPXtwZWVySWQ6dC51aWQsbWVkaWFUeXBlOlwidmlkZW9cIixpc1ZpZGVvTXV0ZTp0LmlzVmlkZW9NdXRlfTtpLmZvckVhY2goZnVuY3Rpb24oaSl7aWYodC5pc1N1YnNjcmliZXIpe2lmKFwidHJhY2tcIj09PWkudHlwZSYmKH5pLmlkLmluZGV4T2YoXCJ2aWRlb1wiKXx8fmkudHJhY2tJZGVudGlmaWVyLmluZGV4T2YoXCJ2XCIpKSl7aWYoIXQubGFzdFJlcG9ydClyZXR1cm4gdm9pZCh0Lmxhc3RSZXBvcnQ9aSk7YS5mcmFtZVJhdGVSZWNlaXZlZD1pLmZyYW1lc1JlY2VpdmVkLXQubGFzdFJlcG9ydC5mcmFtZXNSZWNlaXZlZCtcIlwiLGEuZnJhbWVSYXRlRGVjb2RlZD1pLmZyYW1lc0RlY29kZWQtdC5sYXN0UmVwb3J0LmZyYW1lc0RlY29kZWQrXCJcIix0Lmxhc3RSZXBvcnQ9aX1cImluYm91bmQtcnRwXCI9PT1pLnR5cGUmJn5pLmlkLmluZGV4T2YoXCJWaWRlb1wiKSYmKGEuYnl0ZXNSZWNlaXZlZD1pLmJ5dGVzUmVjZWl2ZWQrXCJcIixhLnBhY2tldHNSZWNlaXZlZD1pLnBhY2tldHNSZWNlaXZlZCtcIlwiLGEucGFja2V0c0xvc3Q9aS5wYWNrZXRzTG9zdCtcIlwiKX1lbHNlIGlmKFwib3V0Ym91bmQtcnRwXCI9PT1pLnR5cGUmJn5pLmlkLmluZGV4T2YoXCJWaWRlb1wiKSl7aWYoIXQubGFzdFJlcG9ydClyZXR1cm4gdm9pZCh0Lmxhc3RSZXBvcnQ9aSk7biYmbih7bWVkaWFUeXBlOlwidmlkZW9cIixpc1ZpZGVvTXV0ZTp0LmlzVmlkZW9NdXRlLGZyYW1lUmF0ZUlucHV0OmUubWF4RnJhbWVSYXRlK1wiXCIsZnJhbWVSYXRlU2VudDppLmZyYW1lc0VuY29kZWQtdC5sYXN0UmVwb3J0LmZyYW1lc0VuY29kZWQrXCJcIn0pLHQubGFzdFJlcG9ydD1pfX0pLG4mJm4oYSl9KX0sdC5nZXRBdWRpb1JlbGF0ZWRTdGF0cz1mdW5jdGlvbihlKXt0LnBlZXJDb25uZWN0aW9uLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7dC5pc1N1YnNjcmliZXImJlwiaW5ib3VuZC1ydHBcIj09PW4udHlwZSYmfm4uaWQuaW5kZXhPZihcIkF1ZGlvXCIpJiZlJiZlKHtwZWVySWQ6dC51aWQsbWVkaWFUeXBlOlwiYXVkaW9cIixpc0F1ZGlvTXV0ZTp0LmlzQXVkaW9NdXRlLGZyYW1lRHJvcHBlZDpuLnBhY2tldHNMb3N0K1wiXCIsZnJhbWVSZWNlaXZlZDpuLnBhY2tldHNSZWNlaXZlZCtcIlwiLGdvb2dKaXR0ZXJSZWNlaXZlZDpuLmppdHRlcitcIlwiLGJ5dGVzUmVjZWl2ZWQ6bi5ieXRlc1JlY2VpdmVkK1wiXCIscGFja2V0c1JlY2VpdmVkOm4ucGFja2V0c1JlY2VpdmVkK1wiXCIscGFja2V0c0xvc3Q6bi5wYWNrZXRzTG9zdCtcIlwifSl9KX0pfSx0LmdldFN0YXRzUmF0ZT1mdW5jdGlvbihlKXt0LmdldFN0YXRzKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbihlKXtcIm91dGJvdW5kLXJ0cFwiPT09ZS50eXBlJiZcInZpZGVvXCI9PT1lLm1lZGlhVHlwZSYmZS5nb29nRnJhbWVzRW5jb2RlZCYmKGUuZ29vZ0ZyYW1lUmF0ZVNlbnQ9KChlLmdvb2dGcmFtZXNFbmNvZGVkLXApLzMpLnRvU3RyaW5nKCkscD1lLmdvb2dGcmFtZXNFbmNvZGVkKSxcImluYm91bmQtcnRwXCI9PT1lLnR5cGUmJi0xIT1lLmlkLmluZGV4T2YoXCI1NTU0M1wiKSYmKGUuZ29vZ0ZyYW1lUmF0ZVJlY2VpdmVkJiYoZS5nb29nRnJhbWVSYXRlUmVjZWl2ZWQ9KChlLmdvb2dGcmFtZVJlY2VpdmVkLW0pLzMpLnRvU3RyaW5nKCksbT1lLmdvb2dGcmFtZVJlY2VpdmVkKSxlLmdvb2dGcmFtZVJhdGVEZWNvZGVkJiYoZS5nb29nRnJhbWVSYXRlRGVjb2RlZD0oKGUuZ29vZ0ZyYW1lc0RlY29kZWQtZikvMykudG9TdHJpbmcoKSxmPWUuZ29vZ0ZyYW1lc0RlY29kZWQpKX0pLGUodCl9KX0sdC5nZXRTdGF0cz1mdW5jdGlvbihlLG4pe249KG49bnx8NTAwKT41MDA/NTAwOm4sdC5sYXN0VGltZUdldFN0YXRzJiZEYXRlLm5vdygpLXQubGFzdFRpbWVHZXRTdGF0czxuP2UmJmUodC5maWx0ZXJTdGF0c0NhY2hlLHQub3JpZ2luU3RhdHNDYWNoZSk6dGhpcy5fZ2V0U3RhdHMoZnVuY3Rpb24obixpKXt0LmZpbHRlclN0YXRzQ2FjaGU9bix0Lm9yaWdpblN0YXRzQ2FjaGU9aSx0Lmxhc3RUaW1lR2V0U3RhdHM9RGF0ZS5ub3coKSxlJiZlKG4saSl9KX0sdC5fZ2V0U3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49W107dC5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24oaSl7aS5mb3JFYWNoKGZ1bmN0aW9uKGUpe24ucHVzaChlKSxcIm91dGJvdW5kLXJ0cFwiPT09ZS50eXBlJiZcImF1ZGlvXCI9PT1lLm1lZGlhVHlwZSYmKHMuaWQ9ZS5pZCxzLnR5cGU9ZS50eXBlLHMubWVkaWFUeXBlPWUubWVkaWFUeXBlLHMuYnl0ZXNTZW50PWUuYnl0ZXNTZW50P2UuYnl0ZXNTZW50K1wiXCI6XCIwXCIscy5wYWNrZXRzU2VudD1lLnBhY2tldHNTZW50P2UucGFja2V0c1NlbnQrXCJcIjpcIjBcIiksXCJvdXRib3VuZC1ydHBcIj09PWUudHlwZSYmXCJ2aWRlb1wiPT09ZS5tZWRpYVR5cGUmJihjLmlkPWUuaWQsYy50eXBlPWUudHlwZSxjLm1lZGlhVHlwZT1lLm1lZGlhVHlwZSxjLmJ5dGVzU2VudD1lLmJ5dGVzU2VudD9lLmJ5dGVzU2VudCtcIlwiOlwiMFwiLGMucGFja2V0c1NlbnQ9ZS5wYWNrZXRzU2VudD9lLnBhY2tldHNTZW50K1wiXCI6XCIwXCIsYy5nb29nUGxpc1JlY2VpdmVkPWUucGxpQ291bnQ/ZS5wbGlDb3VudCtcIlwiOlwiMFwiLGMuZ29vZ05hY2tzUmVjZWl2ZWQ9ZS5uYWNrQ291bnQ/ZS5uYWNrQ291bnQrXCJcIjpcIjBcIixjLmdvb2dGaXJzUmVjZWl2ZWQ9ZS5maXJDb3VudD9lLmZpckNvdW50K1wiXCI6XCIwXCIsYy5nb29nRnJhbWVzRW5jb2RlZD1lLmZyYW1lc0VuY29kZWQ/ZS5mcmFtZXNFbmNvZGVkK1wiXCI6XCIwXCIpLFwiaW5ib3VuZC1ydHBcIj09PWUudHlwZSYmLTEhPWUuaWQuaW5kZXhPZihcIjQ0NDQ0XCIpJiYoZC5pZD1lLmlkLGQudHlwZT1lLnR5cGUsZC5tZWRpYVR5cGU9XCJhdWRpb1wiLGQucGFja2V0c1JlY2VpdmVkPWUucGFja2V0c1JlY2VpdmVkP2UucGFja2V0c1JlY2VpdmVkK1wiXCI6XCIwXCIsZC5ieXRlc1JlY2VpdmVkPWUuYnl0ZXNSZWNlaXZlZD9lLmJ5dGVzUmVjZWl2ZWQrXCJcIjpcIjBcIixkLnBhY2tldHNMb3N0PWUucGFja2V0c0xvc3Q/ZS5wYWNrZXRzTG9zdCtcIlwiOlwiMFwiLGQucGFja2V0c1JlY2VpdmVkPWUucGFja2V0c1JlY2VpdmVkP2UucGFja2V0c1JlY2VpdmVkK1wiXCI6XCIwXCIsZC5nb29nSml0dGVyUmVjZWl2ZWQ9ZS5qaXR0ZXI/ZS5qaXR0ZXIrXCJcIjpcIjBcIiksXCJpbmJvdW5kLXJ0cFwiPT09ZS50eXBlJiYtMSE9ZS5pZC5pbmRleE9mKFwiNTU1NDNcIikmJih1LmlkPWUuaWQsdS50eXBlPWUudHlwZSx1Lm1lZGlhVHlwZT1cInZpZGVvXCIsdS5wYWNrZXRzUmVjZWl2ZWQ9ZS5wYWNrZXRzUmVjZWl2ZWQ/ZS5wYWNrZXRzUmVjZWl2ZWQrXCJcIjpcIjBcIix1LmJ5dGVzUmVjZWl2ZWQ9ZS5ieXRlc1JlY2VpdmVkP2UuYnl0ZXNSZWNlaXZlZCtcIlwiOlwiMFwiLHUucGFja2V0c0xvc3Q9ZS5wYWNrZXRzTG9zdD9lLnBhY2tldHNMb3N0K1wiXCI6XCIwXCIsdS5nb29nSml0dGVyQnVmZmVyTXM9ZS5qaXR0ZXI/ZS5qaXR0ZXIrXCJcIjpcIjBcIix1Lmdvb2dOYWNrc1NlbnQ9ZS5uYWNrQ291bnQ/ZS5uYWNrQ291bnQrXCJcIjpcIjBcIix1Lmdvb2dQbGlzU2VudD1lLnBsaUNvdW50P2UucGxpQ291bnQrXCJcIjpcIjBcIix1Lmdvb2dGaXJzU2VudD1lLmZpckNvdW50P2UuZmlyQ291bnQrXCJcIjpcIjBcIiksXCJ0cmFja1wiIT09ZS50eXBlfHwtMT09ZS5pZC5pbmRleE9mKFwiNTU1NDNcIikmJiF+ZS50cmFja0lkZW50aWZpZXIuaW5kZXhPZihcInZcIikmJm51bGwhPWUuYXVkaW9MZXZlbHx8KHUuZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZD1lLmZyYW1lV2lkdGg/ZS5mcmFtZVdpZHRoK1wiXCI6XCIwXCIsdS5nb29nRnJhbWVIZWlnaHRSZWNlaXZlZD1lLmZyYW1lSGVpZ2h0P2UuZnJhbWVIZWlnaHQrXCJcIjpcIjBcIix1Lmdvb2dGcmFtZVJlY2VpdmVkPWUuZnJhbWVzUmVjZWl2ZWQ/ZS5mcmFtZXNSZWNlaXZlZCtcIlwiOlwiMFwiLHUuZ29vZ0ZyYW1lc0RlY29kZWQ9ZS5mcmFtZXNEZWNvZGVkP2UuZnJhbWVzRGVjb2RlZCtcIlwiOlwiMFwiKSxcInRyYWNrXCIhPT1lLnR5cGV8fC0xPT1lLmlkLmluZGV4T2YoXCI0NDQ0NFwiKSYmIX5lLnRyYWNrSWRlbnRpZmllci5pbmRleE9mKFwiYVwiKSYmdm9pZCAwPT09ZS5hdWRpb0xldmVsfHwoZC5hdWRpb091dHB1dExldmVsPWUuYXVkaW9MZXZlbCtcIlwiLHMuYXVkaW9JbnB1dExldmVsPWUuYXVkaW9MZXZlbCtcIlwiKSxcImNhbmRpZGF0ZS1wYWlyXCI9PT1lLnR5cGUmJigwPT1lLmF2YWlsYWJsZUluY29taW5nQml0cmF0ZT9sLmdvb2dBdmFpbGFibGVTZW5kQmFuZHdpZHRoPWUuYXZhaWxhYmxlT3V0Z29pbmdCaXRyYXRlK1wiXCI6bC5nb29nQXZhaWxhYmxlUmVjZWl2ZUJhbmR3aWR0aD1lLmF2YWlsYWJsZUluY29taW5nQml0cmF0ZStcIlwiKX0pO3ZhciBhPVtsLHMsYyxkLHVdO2EucHVzaCh7aWQ6XCJ0aW1lXCIsc3RhcnRUaW1lOnQuY29ubmVjdGVkVGltZSx0aW1lc3RhbXA6bmV3IERhdGV9KSxlKGEsbil9KS5jYXRjaChmdW5jdGlvbihlKXtjb25zb2xlLmVycm9yKGUpfSl9LHQuYWRkVHJhY2s9ZnVuY3Rpb24oZSxuKXt0LnBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKGUsbil9LHQucmVtb3ZlVHJhY2s9ZnVuY3Rpb24oZSxuKXt2YXIgaT10LnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT1lfSk7aS5yZXBsYWNlVHJhY2sobnVsbCksdC5wZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayhpKX0sdC5hZGRTdHJlYW09ZnVuY3Rpb24oZSl7d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIlNhZmFyaVwiKT4tMSYmLTE9PT1uYXZpZ2F0b3IudXNlckFnZW50LmluZGV4T2YoXCJDaHJvbWVcIik/ZS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe3JldHVybiB0LnBlZXJDb25uZWN0aW9uLmFkZFRyYWNrKG4sZSl9KTp0LnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShlKSx0Lm1hcmtBY3Rpb25OZWVkZWQoKX0sdC5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oKXt0Lm1hcmtBY3Rpb25OZWVkZWQoKX0sdC5jbG9zZT1mdW5jdGlvbigpe3Quc3RhdGU9XCJjbG9zZWRcIix0LnBlZXJDb25uZWN0aW9uLmNsb3NlKCl9LHQubWFya0FjdGlvbk5lZWRlZD1mdW5jdGlvbigpe3QuYWN0aW9uTmVlZGVkPSEwLHQuZG9MYXRlcihmdW5jdGlvbigpe3Qub25zdGFibGVzdGF0ZSgpfSl9LHQuZG9MYXRlcj1mdW5jdGlvbihlKXt3aW5kb3cuc2V0VGltZW91dChlLDEpfSx0Lm9uc3RhYmxlc3RhdGU9ZnVuY3Rpb24oKXt2YXIgbjtpZih0LmFjdGlvbk5lZWRlZCl7aWYoXCJuZXdcIj09PXQuc3RhdGV8fFwiZXN0YWJsaXNoZWRcIj09PXQuc3RhdGUpZS5pc1N1YnNjcmliZXImJih0LnBlZXJDb25uZWN0aW9uLmFkZFRyYW5zY2VpdmVyKFwiYXVkaW9cIix7ZGlyZWN0aW9uOlwicmVjdm9ubHlcIn0pLHQucGVlckNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiLHtkaXJlY3Rpb246XCJyZWN2b25seVwifSkpLHQucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIodC5tZWRpYUNvbnN0cmFpbnRzKS50aGVuKGZ1bmN0aW9uKG4pe2lmKG4uc2RwPWEobi5zZHApLGUuaXNTdWJzY3JpYmVyfHwobi5zZHA9bi5zZHAucmVwbGFjZSgvYT1leHRtYXA6NCB1cm46M2dwcDp2aWRlby1vcmllbnRhdGlvblxcclxcbi9nLFwiXCIpKSxuLnNkcCE9PXQucHJldk9mZmVyKXJldHVybiB0LnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24obiksdC5zdGF0ZT1cInByZXBhcmluZy1vZmZlclwiLHZvaWQgdC5tYXJrQWN0aW9uTmVlZGVkKCk7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdTm90IHNlbmRpbmcgYSBuZXcgb2ZmZXJcIil9KS5jYXRjaChmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1wZWVyIGNvbm5lY3Rpb24gY3JlYXRlIG9mZmVyIGZhaWxlZCBcIixlKX0pO2Vsc2UgaWYoXCJwcmVwYXJpbmctb2ZmZXJcIj09PXQuc3RhdGUpe2lmKHQubW9yZUljZUNvbWluZylyZXR1cm47dC5wcmV2T2ZmZXI9dC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCx0Lm9mZmVyQ2FuZGlkYXRlcz10LnByZXZPZmZlci5tYXRjaCgvYT1jYW5kaWRhdGUuK1xcclxcbi9nKXx8W10sdC5vZmZlckNhbmRpZGF0ZXMubGVuZ3RofHwoby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdTm8gSWNlIENhbmRpZGF0ZSBnZW5lcmF0ZWRcIikpLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJTSElNX0NBTkRJREFURVwiKT8oby5kZWZhdWx0LmRlYnVnKFwiU2hpbW1pbmcgZmFrZSBjYW5kaWRhdGVcIiksdC5wcmV2T2ZmZXIrPVwiYT1jYW5kaWRhdGU6MjI0MzI1NTQzNSAxIHVkcCAyMTIyMTk0Njg3IDE5Mi4xNjguMC4xIDMwMDAwIHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDFcXHJcXG5cIik6by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXU5vbmUgSWNlIENhbmRpZGF0ZSBub3QgYWxsb3dlZFwiKSkpLHQucHJldk9mZmVyPXQucHJldk9mZmVyLnJlcGxhY2UoL2E9Y2FuZGlkYXRlOi4rdHlwXFxzaG9zdC4rXFxyXFxuL2csXCJhPWNhbmRpZGF0ZToyMjQzMjU1NDM1IDEgdWRwIDIxMjIxOTQ2ODcgMTkyLjE2OC4wLjEgMzAwMDAgdHlwIGhvc3QgZ2VuZXJhdGlvbiAwIG5ldHdvcmstaWQgMVxcclxcblwiKSx0LnNlbmRNZXNzYWdlKFwiT0ZGRVJcIix0LnByZXZPZmZlciksdC5zdGF0ZT1cIm9mZmVyLXNlbnRcIn1lbHNlIGlmKFwib2ZmZXItcmVjZWl2ZWRcIj09PXQuc3RhdGUpdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoZnVuY3Rpb24oZSl7aWYodC5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGUpLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZC1wcmVwYXJpbmctYW5zd2VyXCIsdC5pY2VTdGFydGVkKXQubWFya0FjdGlvbk5lZWRlZCgpO2Vsc2V7dmFyIG49bmV3IERhdGU7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdXCIrbi5nZXRUaW1lKCkrXCI6IFN0YXJ0aW5nIElDRSBpbiByZXNwb25kZXJcIiksdC5pY2VTdGFydGVkPSEwfX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdcGVlciBjb25uZWN0aW9uIGNyZWF0ZSBhbnN3ZXIgZmFpbGVkIFwiLGUpfSx0Lm1lZGlhQ29uc3RyYWludHMpO2Vsc2UgaWYoXCJvZmZlci1yZWNlaXZlZC1wcmVwYXJpbmctYW5zd2VyXCI9PT10LnN0YXRlKXtpZih0Lm1vcmVJY2VDb21pbmcpcmV0dXJuO249dC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCx0LnNlbmRNZXNzYWdlKFwiQU5TV0VSXCIsbiksdC5zdGF0ZT1cImVzdGFibGlzaGVkXCJ9ZWxzZSB0LmVycm9yKFwiRGF6ZWQgYW5kIGNvbmZ1c2VkIGluIHN0YXRlIFwiK3Quc3RhdGUrXCIsIHN0b3BwaW5nIGhlcmVcIik7dC5hY3Rpb25OZWVkZWQ9ITF9fSx0LnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUsbil7dmFyIGk9e307aS5tZXNzYWdlVHlwZT1lLGkuc2RwPW4sXCJPRkZFUlwiPT09ZT8oaS5vZmZlcmVyU2Vzc2lvbklkPXQuc2Vzc2lvbklkLGkuYW5zd2VyZXJTZXNzaW9uSWQ9dC5vdGhlclNlc3Npb25JZCxpLnNlcT10LnNlcXVlbmNlTnVtYmVyKz0xLGkudGllYnJlYWtlcj1NYXRoLmZsb29yKDQyOTQ5NjcyMypNYXRoLnJhbmRvbSgpKzEpKTooaS5vZmZlcmVyU2Vzc2lvbklkPXQuaW5jb21pbmdNZXNzYWdlLm9mZmVyZXJTZXNzaW9uSWQsaS5hbnN3ZXJlclNlc3Npb25JZD10LnNlc3Npb25JZCxpLnNlcT10LmluY29taW5nTWVzc2FnZS5zZXEpLHQub25zaWduYWxpbmdtZXNzYWdlKEpTT04uc3RyaW5naWZ5KGkpKX0sdC5fZ2V0U2VuZGVyPWZ1bmN0aW9uKGUpe2lmKHQucGVlckNvbm5lY3Rpb24mJnQucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycyl7dmFyIG49dC5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjay5raW5kPT1lfSk7aWYobilyZXR1cm4gbn1yZXR1cm4gbnVsbH0sdC5oYXNTZW5kZXI9ZnVuY3Rpb24oZSl7cmV0dXJuISF0Ll9nZXRTZW5kZXIoZSl9LHQucmVwbGFjZVRyYWNrPWZ1bmN0aW9uKGUsbixpKXt2YXIgYT10Ll9nZXRTZW5kZXIoZS5raW5kKTtpZighYSlyZXR1cm4gaShcIk5PX1NFTkRFUl9GT1VORFwiKTt0cnl7YS5yZXBsYWNlVHJhY2soZSl9Y2F0Y2goZSl7cmV0dXJuIGkmJmkoZSl9c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBuJiZuKCl9LDUwKX0sdC5lcnJvcj1mdW5jdGlvbihlKXt0aHJvd1wiRXJyb3IgaW4gUm9hcE9uSnNlcDogXCIrZX0sdC5zZXNzaW9uSWQ9dC5yb2FwU2Vzc2lvbklkKz0xLHQuc2VxdWVuY2VOdW1iZXI9MCx0LmFjdGlvbk5lZWRlZD0hMSx0LmljZVN0YXJ0ZWQ9ITEsdC5tb3JlSWNlQ29taW5nPSEwLHQuaWNlQ2FuZGlkYXRlQ291bnQ9MCx0Lm9uc2lnbmFsaW5nbWVzc2FnZT1lLmNhbGxiYWNrLHQucGVlckNvbm5lY3Rpb24ub250cmFjaz1mdW5jdGlvbihlKXtjb25zb2xlLmxvZyhcIiEhISBvbnRyYWNrLCBcIixlLnRyYWNrLmtpbmQsZS50cmFjayksdC5vbmFkZHN0cmVhbSYmdC5vbmFkZHN0cmVhbShlLFwib250cmFja1wiKX0sdC5wZWVyQ29ubmVjdGlvbi5vbnJlbW92ZXN0cmVhbT1mdW5jdGlvbihlKXt0Lm9ucmVtb3Zlc3RyZWFtJiZ0Lm9ucmVtb3Zlc3RyZWFtKGUpfSx0LnBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUpe1wiY29ubmVjdGVkXCI9PT1lLmN1cnJlbnRUYXJnZXQuaWNlQ29ubmVjdGlvblN0YXRlJiYodC5jb25uZWN0ZWRUaW1lPW5ldyBEYXRlKSx0Lm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJiZ0Lm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKGUuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUpfSx0LnJlbmVnb3RpYXRlPWZ1bmN0aW9uKCl7dm9pZCAwIT09dC5wcmV2T2ZmZXImJnQucGVlckNvbm5lY3Rpb24uY3JlYXRlT2ZmZXIoKS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiBlLnNkcD1lLnNkcC5yZXBsYWNlKC9hPXJlY3Zvbmx5XFxyXFxuL2csXCJhPWluYWN0aXZlXFxyXFxuXCIpLGUuc2RwPWkoZS5zZHApLGUuc2RwPWEoZS5zZHApLHQucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihlKX0pLnRoZW4oZnVuY3Rpb24oKXt0Lm9ubmVnb3RpYXRpb25uZWVkZWQmJnQub25uZWdvdGlhdGlvbm5lZWRlZCh0LnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24uc2RwKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwiY3JlYXRlT2ZmZXIgZXJyb3I6IFwiLGUpfSl9LHQucGVlckNvbm5lY3Rpb24ub25uZWdvdGlhdGlvbm5lZWRlZD10LnJlbmVnb3RpYXRlLHQub25hZGRzdHJlYW09bnVsbCx0Lm9ucmVtb3Zlc3RyZWFtPW51bGwsdC5zdGF0ZT1cIm5ld1wiLHQubWFya0FjdGlvbk5lZWRlZCgpLHR9LEg9ZnVuY3Rpb24oZSl7dmFyIHQ9e30sbj0obW96UlRDUGVlckNvbm5lY3Rpb24sbW96UlRDU2Vzc2lvbkRlc2NyaXB0aW9uKSxpPSExO3QudWlkPWUudWlkLHQuaXNWaWRlb011dGU9ZS5pc1ZpZGVvTXV0ZSx0LmlzQXVkaW9NdXRlPWUuaXNBdWRpb011dGUsdC5pc1N1YnNjcmliZXI9ZS5pc1N1YnNjcmliZXIsdC5jbGllbnRJZD1lLmNsaWVudElkLHQuZmlsdGVyU3RhdHNDYWNoZT1bXSx0Lm9yaWdpblN0YXRzQ2FjaGU9W10sdC5sYXN0VGltZUdldFN0YXRzPW51bGwsdC5wY19jb25maWc9e2ljZVNlcnZlcnM6W119LGUuaWNlU2VydmVycyBpbnN0YW5jZW9mIEFycmF5P2UuaWNlU2VydmVycy5tYXAoZnVuY3Rpb24oZSl7MD09PWUudXJsLmluZGV4T2YoXCJzdHVuOlwiKSYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmw6ZS51cmx9KX0pOihlLnN0dW5TZXJ2ZXJVcmwmJihlLnN0dW5TZXJ2ZXJVcmwgaW5zdGFuY2VvZiBBcnJheT9lLnN0dW5TZXJ2ZXJVcmwubWFwKGZ1bmN0aW9uKGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlJiZcIlwiIT09ZSYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmw6ZX0pfSk6XCJzdHJpbmdcIj09dHlwZW9mIGUuc3R1blNlcnZlclVybCYmXCJcIiE9PWUuc3R1blNlcnZlclVybCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmw6ZS5zdHVuU2VydmVyVXJsfSkpLGUudHVyblNlcnZlciYmXCJzdHJpbmdcIj09dHlwZW9mIGUudHVyblNlcnZlci51cmwmJlwiXCIhPT1lLnR1cm5TZXJ2ZXIudXJsJiYoZS50dXJuU2VydmVyLnVkcHBvcnQmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXNlcm5hbWU6ZS50dXJuU2VydmVyLnVzZXJuYW1lLGNyZWRlbnRpYWw6ZS50dXJuU2VydmVyLmNyZWRlbnRpYWwsY3JlZGVudGlhbFR5cGU6XCJwYXNzd29yZFwiLHVybHM6XCJ0dXJuOlwiK2UudHVyblNlcnZlci51cmwrXCI6XCIrZS50dXJuU2VydmVyLnVkcHBvcnQrXCI/dHJhbnNwb3J0PXVkcFwifSksXCJzdHJpbmdcIj09dHlwZW9mIGUudHVyblNlcnZlci50Y3Bwb3J0JiZcIlwiIT09ZS50dXJuU2VydmVyLnRjcHBvcnQmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXNlcm5hbWU6ZS50dXJuU2VydmVyLnVzZXJuYW1lLGNyZWRlbnRpYWw6ZS50dXJuU2VydmVyLmNyZWRlbnRpYWwsY3JlZGVudGlhbFR5cGU6XCJwYXNzd29yZFwiLHVybHM6XCJ0dXJuOlwiK2UudHVyblNlcnZlci51cmwrXCI6XCIrZS50dXJuU2VydmVyLnRjcHBvcnQrXCI/dHJhbnNwb3J0PXRjcFwifSksITA9PT1lLnR1cm5TZXJ2ZXIuZm9yY2V0dXJuJiYodC5wY19jb25maWcuaWNlVHJhbnNwb3J0UG9saWN5PVwicmVsYXlcIikpKSx2b2lkIDA9PT1lLmF1ZGlvJiYoZS5hdWRpbz0hMCksdm9pZCAwPT09ZS52aWRlbyYmKGUudmlkZW89ITApLHQubWVkaWFDb25zdHJhaW50cz17b2ZmZXJUb1JlY2VpdmVBdWRpbzplLmF1ZGlvLG9mZmVyVG9SZWNlaXZlVmlkZW86ZS52aWRlbyxtb3pEb250T2ZmZXJEYXRhQ2hhbm5lbDohMH0sdC5yb2FwU2Vzc2lvbklkPTEwMyx0LnBlZXJDb25uZWN0aW9uPW5ldyBFLlJUQ1BlZXJDb25uZWN0aW9uKHQucGNfY29uZmlnKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCsnXXNhZmFyaSBDcmVhdGVkIFJUQ1BlZXJDb25ubmVjdGlvbiB3aXRoIGNvbmZpZyBcIicrSlNPTi5zdHJpbmdpZnkodC5wY19jb25maWcpKydcIi4nKSx0LmljZUNhbmRpZGF0ZVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmljZUNhbmRpZGF0ZVRpbWVyPW51bGwsby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXUNhbmRpZGF0ZXMgY29sbGVjdGVkOiBcIikuY29uY2F0KHQuaWNlQ2FuZGlkYXRlQ291bnQpKSx0Lm1vcmVJY2VDb21pbmcmJih0Lm1vcmVJY2VDb21pbmc9ITEsdC5tYXJrQWN0aW9uTmVlZGVkKCkpfSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQ0FORElEQVRFX1RJTUVPVVRcIikpLHQucGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7dmFyIG4saSxhLHI7aT0obj10LnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24uc2RwKS5tYXRjaCgvYT1jYW5kaWRhdGU6Lit0eXBcXHNzcmZseC4rXFxyXFxuLyksYT1uLm1hdGNoKC9hPWNhbmRpZGF0ZTouK3R5cFxcc2hvc3QuK1xcclxcbi8pLHI9bi5tYXRjaCgvYT1jYW5kaWRhdGU6Lit0eXBcXHNyZWxheS4rXFxyXFxuLyksbnVsbD09PWkmJm51bGw9PT1hJiZudWxsPT09cnx8dm9pZCAwIT09dC5pY2V8fCF0LmljZUNhbmRpZGF0ZVRpbWVyfHwoby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdc3JmbHggY2FuZGlkYXRlIDogXCIraStcIiByZWxheSBjYW5kaWRhdGU6IFwiK3IrXCIgaG9zdCBjYW5kaWRhdGUgOiBcIithKSxjbGVhclRpbWVvdXQodC5pY2VDYW5kaWRhdGVUaW1lciksdC5pY2VDYW5kaWRhdGVUaW1lcj1udWxsLHQuaWNlPTAsdC5tb3JlSWNlQ29taW5nPSExLHQubWFya0FjdGlvbk5lZWRlZCgpKSx0LmljZUNhbmRpZGF0ZUNvdW50PXQuaWNlQ2FuZGlkYXRlQ291bnQrMX0sdC5jaGVja01MaW5lUmV2ZXJzZUluU0RQPWZ1bmN0aW9uKGUpe3JldHVybiEoIX5lLmluZGV4T2YoXCJtPWF1ZGlvXCIpfHwhfmUuaW5kZXhPZihcIm09dmlkZW9cIikpJiZlLmluZGV4T2YoXCJtPWF1ZGlvXCIpPmUuaW5kZXhPZihcIm09dmlkZW9cIil9LHQucmV2ZXJzZU1MaW5lSW5TRFA9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcGxpdChcIm09YXVkaW9cIiksbj10WzFdLnNwbGl0KFwibT12aWRlb1wiKSxpPVwibT12aWRlb1wiK25bMV0sYT1cIm09YXVkaW9cIituWzBdO3JldHVybiBlPXRbMF0raSthfSx0LnByb2Nlc3NTaWduYWxpbmdNZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciBpLGE9SlNPTi5wYXJzZShlKTt0LmluY29taW5nTWVzc2FnZT1hLFwibmV3XCI9PT10LnN0YXRlP1wiT0ZGRVJcIj09PWEubWVzc2FnZVR5cGU/KGEuc2RwPWwoYS5zZHApLGk9e3NkcDphLnNkcCx0eXBlOlwib2ZmZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgbihpKSxmdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXNldFJlbW90ZURlc2NyaXB0aW9uIHN1Y2NlZWRlZFwiKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIrdC5jbGllbnRJZCtcIl1zZXRSZW1vdGVEZXNjcmlwdGlvbiBmYWlsZWQ6IFwiK2UubmFtZSl9KSx0LnN0YXRlPVwib2ZmZXItcmVjZWl2ZWRcIix0Lm1hcmtBY3Rpb25OZWVkZWQoKSk6dC5lcnJvcihcIklsbGVnYWwgbWVzc2FnZSBmb3IgdGhpcyBzdGF0ZTogXCIrYS5tZXNzYWdlVHlwZStcIiBpbiBzdGF0ZSBcIit0LnN0YXRlKTpcIm9mZmVyLXNlbnRcIj09PXQuc3RhdGU/XCJBTlNXRVJcIj09PWEubWVzc2FnZVR5cGU/KGEuc2RwPWwoYS5zZHApLGEuc2RwPWEuc2RwLnJlcGxhY2UoLyBnZW5lcmF0aW9uIDAvZyxcIlwiKSxhLnNkcD1hLnNkcC5yZXBsYWNlKC8gdWRwIC9nLFwiIFVEUCBcIiksLTEhPT1hLnNkcC5pbmRleE9mKFwiYT1ncm91cDpCVU5ETEVcIik/KGEuc2RwPWEuc2RwLnJlcGxhY2UoL2E9Z3JvdXA6QlVORExFIGF1ZGlvIHZpZGVvLyxcImE9Z3JvdXA6QlVORExFIHNkcGFydGFfMCBzZHBhcnRhXzFcIiksYS5zZHA9YS5zZHAucmVwbGFjZSgvYT1taWQ6YXVkaW8vLFwiYT1taWQ6c2RwYXJ0YV8wXCIpLGEuc2RwPWEuc2RwLnJlcGxhY2UoL2E9bWlkOnZpZGVvLyxcImE9bWlkOnNkcGFydGFfMVwiKSk6KGEuc2RwPWEuc2RwLnJlcGxhY2UoL2E9bWlkOmF1ZGlvLyxcImE9bWlkOnNkcGFydGFfMFwiKSxhLnNkcD1hLnNkcC5yZXBsYWNlKC9hPW1pZDp2aWRlby8sXCJhPW1pZDpzZHBhcnRhXzBcIikpLGk9e3NkcDphLnNkcCx0eXBlOlwiYW5zd2VyXCJ9LHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IG4oaSksZnVuY3Rpb24oKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1zZXRSZW1vdGVEZXNjcmlwdGlvbiBzdWNjZWVkZWRcIil9LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiK3QuY2xpZW50SWQrXCJdc2V0UmVtb3RlRGVzY3JpcHRpb24gZmFpbGVkOiBcIitlKX0pLHQuc3RhdGU9XCJlc3RhYmxpc2hlZFwiKTpcInByLWFuc3dlclwiPT09YS5tZXNzYWdlVHlwZT8oaT17c2RwOmEuc2RwLHR5cGU6XCJwci1hbnN3ZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgbihpKSxmdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXNldFJlbW90ZURlc2NyaXB0aW9uIHN1Y2NlZWRlZFwiKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIrdC5jbGllbnRJZCtcIl1zZXRSZW1vdGVEZXNjcmlwdGlvbiBmYWlsZWQ6IFwiK2UubmFtZSl9KSk6XCJvZmZlclwiPT09YS5tZXNzYWdlVHlwZT90LmVycm9yKFwiTm90IHdyaXR0ZW4geWV0XCIpOnQuZXJyb3IoXCJJbGxlZ2FsIG1lc3NhZ2UgZm9yIHRoaXMgc3RhdGU6IFwiK2EubWVzc2FnZVR5cGUrXCIgaW4gc3RhdGUgXCIrdC5zdGF0ZSk6XCJlc3RhYmxpc2hlZFwiPT09dC5zdGF0ZSYmKFwiT0ZGRVJcIj09PWEubWVzc2FnZVR5cGU/KGk9e3NkcDphLnNkcCx0eXBlOlwib2ZmZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgbihpKSxmdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXNldFJlbW90ZURlc2NyaXB0aW9uIHN1Y2NlZWRlZFwiKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIrdC5jbGllbnRJZCtcIl1zZXRSZW1vdGVEZXNjcmlwdGlvbiBmYWlsZWQ6IFwiK2UubmFtZSl9KSx0LnN0YXRlPVwib2ZmZXItcmVjZWl2ZWRcIix0Lm1hcmtBY3Rpb25OZWVkZWQoKSk6dC5lcnJvcihcIklsbGVnYWwgbWVzc2FnZSBmb3IgdGhpcyBzdGF0ZTogXCIrYS5tZXNzYWdlVHlwZStcIiBpbiBzdGF0ZSBcIit0LnN0YXRlKSl9O3ZhciBhPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJvcHVzXCIsZ29vZ0NvZGVjTmFtZTpcIm9wdXNcIixhZWNEaXZlcmdlbnRGaWx0ZXJGcmFjdGlvbjpcIjBcIixhdWRpb0lucHV0TGV2ZWw6XCIwXCIsYnl0ZXNTZW50OlwiMFwiLHBhY2tldHNTZW50OlwiMFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zczpcIjBcIixnb29nRWNob0NhbmNlbGxhdGlvblJldHVybkxvc3NFbmhhbmNlbWVudDpcIjBcIn0scz17aWQ6XCJcIix0eXBlOlwiXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ0NvZGVjTmFtZTpcImgyNjRcIj09PWUuY29kZWM/XCJIMjY0XCI6XCJWUDhcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0FkYXB0YXRpb25DaGFuZ2VzOlwiMFwiLGdvb2dBdmdFbmNvZGVNczpcIjBcIixnb29nRW5jb2RlVXNhZ2VQZXJjZW50OlwiMFwiLGdvb2dGaXJzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lSGVpZ2h0U2VudDpcIjBcIixnb29nRnJhbWVIZWlnaHRJbnB1dDpcIjBcIixnb29nRnJhbWVSYXRlSW5wdXQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZVNlbnQ6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhTZW50OlwiMFwiLGdvb2dGcmFtZVdpZHRoSW5wdXQ6XCIwXCIsZ29vZ05hY2tzUmVjZWl2ZWQ6XCIwXCIsZ29vZ1BsaXNSZWNlaXZlZDpcIjBcIixnb29nUnR0OlwiMFwifSxjPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixhdWRpb091dHB1dExldmVsOlwiMFwiLGJ5dGVzUmVjZWl2ZWQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1JlY2VpdmVkOlwiMFwiLGdvb2dBY2NlbGVyYXRlUmF0ZTpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ0RlY29kaW5nQ05HOlwiMFwiLGdvb2dEZWNvZGluZ0NUTjpcIjBcIixnb29nRGVjb2RpbmdDVFNHOlwiMFwiLGdvb2dEZWNvZGluZ05vcm1hbDpcIjBcIixnb29nRGVjb2RpbmdQTEM6XCIwXCIsZ29vZ0RlY29kaW5nUExDQ05HOlwiMFwiLGdvb2dFeHBhbmRSYXRlOlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nSml0dGVyUmVjZWl2ZWQ6XCIwXCIsZ29vZ1ByZWVtcHRpdmVFeHBhbmRSYXRlOlwiMFwiLGdvb2dQcmVmZXJyZWRKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nU2Vjb25kYXJ5RGVjb2RlZFJhdGU6XCIwXCIsZ29vZ1NwZWVjaEV4cGFuZFJhdGU6XCIwXCJ9LGQ9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGdvb2dUYXJnZXREZWxheU1zOlwiMFwiLHBhY2tldHNMb3N0OlwiMFwiLGdvb2dEZWNvZGVNczpcIjBcIixnb29nTWF4RGVjb2RlTXM6XCIwXCIsZ29vZ1JlbmRlckRlbGF5TXM6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVIZWlnaHRSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZURlY29kZWQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZU91dHB1dDpcIjBcIixnb29nSml0dGVyQnVmZmVyTXM6XCIwXCIsZ29vZ0N1cnJlbnREZWxheU1zOlwiMFwiLGdvb2dNaW5QbGF5b3V0RGVsYXlNczpcIjBcIixnb29nTmFja3NTZW50OlwiMFwiLGdvb2dQbGlzU2VudDpcIjBcIixnb29nRmlyc1NlbnQ6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lc0RlY29kZWQ6XCIwXCJ9LHU9MDt0LmdldFZpZGVvUmVsYXRlZFN0YXRzPWZ1bmN0aW9uKGUpe3QucGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uKG4pe3ZhciBpPSEwLGE9ITEscj12b2lkIDA7dHJ5e2Zvcih2YXIgbyxzPW4udmFsdWVzKClbU3ltYm9sLml0ZXJhdG9yXSgpOyEoaT0obz1zLm5leHQoKSkuZG9uZSk7aT0hMCl7dmFyIGM9by52YWx1ZTtpZih0LmlzU3Vic2NyaWJlcil7aWYoKFwiaW5ib3VuZC1ydHBcIj09PWMudHlwZXx8XCJpbmJvdW5kcnRwXCI9PT1jLnR5cGUpJiZcInZpZGVvXCI9PT1jLm1lZGlhVHlwZSl7aWYoIXQubGFzdFJlcG9ydClyZXR1cm4gdm9pZCh0Lmxhc3RSZXBvcnQ9Yyk7ZSYmZSh7YnJvd3NlcjpcImZpcmVmb3hcIixtZWRpYVR5cGU6XCJ2aWRlb1wiLHBlZXJJZDp0LnVpZCxpc1ZpZGVvTXV0ZTp0LmlzVmlkZW9NdXRlLGZyYW1lUmF0ZVJlY2VpdmVkOmMuZnJhbWVyYXRlTWVhbitcIlwiLGZyYW1lUmF0ZURlY29kZWQ6Yy5mcmFtZXNEZWNvZGVkLXQubGFzdFJlcG9ydC5mcmFtZXNEZWNvZGVkK1wiXCIsYnl0ZXNSZWNlaXZlZDpjLmJ5dGVzUmVjZWl2ZWQrXCJcIixwYWNrZXRzUmVjZWl2ZWQ6Yy5wYWNrZXRzUmVjZWl2ZWQrXCJcIixwYWNrZXRzTG9zdDpjLnBhY2tldHNMb3N0K1wiXCJ9KSx0Lmxhc3RSZXBvcnQ9Y319ZWxzZSBpZigoXCJvdXRib3VuZC1ydHBcIj09PWMudHlwZXx8XCJvdXRib3VuZHJ0cFwiPT09Yy50eXBlKSYmXCJ2aWRlb1wiPT09Yy5tZWRpYVR5cGUpe2lmKCF0Lmxhc3RSZXBvcnQpcmV0dXJuIHZvaWQodC5sYXN0UmVwb3J0PWMpO2UmJmUoe21lZGlhVHlwZTpcInZpZGVvXCIsaXNWaWRlb011dGU6dC5pc1ZpZGVvTXV0ZSxmcmFtZVJhdGVJbnB1dDpjLmZyYW1lcmF0ZU1lYW4rXCJcIixmcmFtZVJhdGVTZW50OmMuZnJhbWVzRW5jb2RlZC10Lmxhc3RSZXBvcnQuZnJhbWVzRW5jb2RlZCtcIlwifSksdC5sYXN0UmVwb3J0PWN9fX1jYXRjaChlKXthPSEwLHI9ZX1maW5hbGx5e3RyeXtpfHxudWxsPT1zLnJldHVybnx8cy5yZXR1cm4oKX1maW5hbGx5e2lmKGEpdGhyb3cgcn19fSl9LHQuZ2V0QXVkaW9SZWxhdGVkU3RhdHM9ZnVuY3Rpb24oZSl7dC5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24obil7dmFyIGk9ITAsYT0hMSxyPXZvaWQgMDt0cnl7Zm9yKHZhciBvLHM9bi52YWx1ZXMoKVtTeW1ib2wuaXRlcmF0b3JdKCk7IShpPShvPXMubmV4dCgpKS5kb25lKTtpPSEwKXt2YXIgYz1vLnZhbHVlO3QuaXNTdWJzY3JpYmVyJiYoXCJpbmJvdW5kLXJ0cFwiIT09Yy50eXBlJiZcImluYm91bmRydHBcIiE9PWMudHlwZXx8XCJhdWRpb1wiIT09Yy5tZWRpYVR5cGV8fGUmJmUoe2Jyb3dzZXI6XCJmaXJlZm94XCIsbWVkaWFUeXBlOlwiYXVkaW9cIixwZWVySWQ6dC51aWQsaXNBdWRpb011dGU6dC5pc0F1ZGlvTXV0ZSxmcmFtZURyb3BwZWQ6Yy5wYWNrZXRzTG9zdCtcIlwiLGZyYW1lUmVjZWl2ZWQ6Yy5wYWNrZXRzUmVjZWl2ZWQrXCJcIixnb29nSml0dGVyUmVjZWl2ZWQ6Yy5qaXR0ZXIrXCJcIixieXRlc1JlY2VpdmVkOmMuYnl0ZXNSZWNlaXZlZCtcIlwiLHBhY2tldHNSZWNlaXZlZDpjLnBhY2tldHNSZWNlaXZlZCtcIlwiLHBhY2tldHNMb3N0OmMucGFja2V0c0xvc3QrXCJcIn0pKX19Y2F0Y2goZSl7YT0hMCxyPWV9ZmluYWxseXt0cnl7aXx8bnVsbD09cy5yZXR1cm58fHMucmV0dXJuKCl9ZmluYWxseXtpZihhKXRocm93IHJ9fX0pfSx0LmdldFN0YXRzUmF0ZT1mdW5jdGlvbihlKXt0LmdldFN0YXRzKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbihlKXtcImluYm91bmQtcnRwXCIhPT1lLnR5cGUmJlwiaW5ib3VuZHJ0cFwiIT09ZS50eXBlfHxcInZpZGVvXCIhPT1lLm1lZGlhVHlwZXx8ZS5nb29nRnJhbWVSYXRlRGVjb2RlZCYmKGUuZ29vZ0ZyYW1lUmF0ZURlY29kZWQ9KChlLmdvb2dGcmFtZXNEZWNvZGVkLXUpLzMpLnRvU3RyaW5nKCksdT1lLmdvb2dGcmFtZXNEZWNvZGVkKX0pLGUodCl9KX0sdC5nZXRTdGF0cz1mdW5jdGlvbihlLG4pe249KG49bnx8NTAwKT41MDA/NTAwOm4sdC5sYXN0VGltZUdldFN0YXRzJiZEYXRlLm5vdygpLXQubGFzdFRpbWVHZXRTdGF0czxuP2UmJmUodC5maWx0ZXJTdGF0c0NhY2hlLHQub3JpZ2luU3RhdHNDYWNoZSk6dGhpcy5fZ2V0U3RhdHMoZnVuY3Rpb24obixpKXt0LmZpbHRlclN0YXRzQ2FjaGU9bix0Lm9yaWdpblN0YXRzQ2FjaGU9aSx0Lmxhc3RUaW1lR2V0U3RhdHM9RGF0ZS5ub3coKSxlJiZlKG4saSl9KX0sdC5fZ2V0U3RhdHM9ZnVuY3Rpb24oZSl7dC5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24obil7dmFyIGk9W10scj0hMCxvPSExLHU9dm9pZCAwO3RyeXtmb3IodmFyIGwscD1uLnZhbHVlcygpW1N5bWJvbC5pdGVyYXRvcl0oKTshKHI9KGw9cC5uZXh0KCkpLmRvbmUpO3I9ITApe3ZhciBmPWwudmFsdWU7aS5wdXNoKGYpLFwib3V0Ym91bmQtcnRwXCIhPT1mLnR5cGUmJlwib3V0Ym91bmRydHBcIiE9PWYudHlwZXx8XCJ2aWRlb1wiIT09Zi5tZWRpYVR5cGV8fC0xIT09Zi5pZC5pbmRleE9mKFwicnRjcFwiKXx8KHMuaWQ9Zi5pZCxzLnR5cGU9Zi50eXBlLHMubWVkaWFUeXBlPWYubWVkaWFUeXBlLHMuYnl0ZXNTZW50PWYuYnl0ZXNTZW50P2YuYnl0ZXNTZW50K1wiXCI6XCIwXCIscy5wYWNrZXRzU2VudD1mLnBhY2tldHNTZW50P2YucGFja2V0c1NlbnQrXCJcIjpcIjBcIixzLmdvb2dQbGlzUmVjZWl2ZWQ9Zi5wbGlDb3VudD9mLnBsaUNvdW50K1wiXCI6XCIwXCIscy5nb29nTmFja3NSZWNlaXZlZD1mLm5hY2tDb3VudD9mLm5hY2tDb3VudCtcIlwiOlwiMFwiLHMuZ29vZ0ZpcnNSZWNlaXZlZD1mLmZpckNvdW50P2YuZmlyQ291bnQrXCJcIjpcIjBcIixzLmdvb2dGcmFtZVJhdGVTZW50PWYuZnJhbWVyYXRlTWVhbj9mLmZyYW1lcmF0ZU1lYW4rXCJcIjpcIjBcIiksXCJvdXRib3VuZC1ydHBcIiE9PWYudHlwZSYmXCJvdXRib3VuZHJ0cFwiIT09Zi50eXBlfHxcImF1ZGlvXCIhPT1mLm1lZGlhVHlwZXx8LTEhPT1mLmlkLmluZGV4T2YoXCJydGNwXCIpfHwoYS5pZD1mLmlkLGEudHlwZT1mLnR5cGUsYS5tZWRpYVR5cGU9Zi5tZWRpYVR5cGUsYS5ieXRlc1NlbnQ9Zi5ieXRlc1NlbnQ/Zi5ieXRlc1NlbnQrXCJcIjpcIjBcIixhLnBhY2tldHNTZW50PWYucGFja2V0c1NlbnQ/Zi5wYWNrZXRzU2VudCtcIlwiOlwiMFwiKSxcImluYm91bmQtcnRwXCIhPT1mLnR5cGUmJlwiaW5ib3VuZHJ0cFwiIT09Zi50eXBlfHxcImF1ZGlvXCIhPT1mLm1lZGlhVHlwZXx8Zi5pc1JlbW90ZXx8LTEhPT1mLmlkLmluZGV4T2YoXCJydGNwXCIpfHwoYy5pZD1mLmlkLGMudHlwZT1mLnR5cGUsYy5tZWRpYVR5cGU9Zi5tZWRpYVR5cGUsYy5ieXRlc1JlY2VpdmVkPWYuYnl0ZXNSZWNlaXZlZD9mLmJ5dGVzUmVjZWl2ZWQrXCJcIjpcIjBcIixjLnBhY2tldHNMb3N0PWYucGFja2V0c0xvc3Q/Zi5wYWNrZXRzTG9zdCtcIlwiOlwiMFwiLGMucGFja2V0c1JlY2VpdmVkPWYucGFja2V0c1JlY2VpdmVkP2YucGFja2V0c1JlY2VpdmVkK1wiXCI6XCIwXCIsYy5nb29nSml0dGVyUmVjZWl2ZWQ9Zi5qaXR0ZXI/Zi5qaXR0ZXIrXCJcIjpcIjBcIiksXCJpbmJvdW5kLXJ0cFwiIT09Zi50eXBlJiZcImluYm91bmRydHBcIiE9PWYudHlwZXx8XCJ2aWRlb1wiIT09Zi5tZWRpYVR5cGV8fGYuaXNSZW1vdGV8fC0xIT09Zi5pZC5pbmRleE9mKFwicnRjcFwiKXx8KGQuaWQ9Zi5pZCxkLnR5cGU9Zi50eXBlLGQubWVkaWFUeXBlPWYubWVkaWFUeXBlLGQuYnl0ZXNSZWNlaXZlZD1mLmJ5dGVzUmVjZWl2ZWQ/Zi5ieXRlc1JlY2VpdmVkK1wiXCI6XCIwXCIsZC5nb29nRnJhbWVSYXRlUmVjZWl2ZWQ9Zi5mcmFtZXJhdGVNZWFuP2YuZnJhbWVyYXRlTWVhbitcIlwiOlwiMFwiLGQuZ29vZ0ZyYW1lc0RlY29kZWQ9Zi5mcmFtZXNEZWNvZGVkP2YuZnJhbWVzRGVjb2RlZCtcIlwiOlwiMFwiLGQucGFja2V0c0xvc3Q9Zi5wYWNrZXRzTG9zdD9mLnBhY2tldHNMb3N0K1wiXCI6XCIwXCIsZC5wYWNrZXRzUmVjZWl2ZWQ9Zi5wYWNrZXRzUmVjZWl2ZWQ/Zi5wYWNrZXRzUmVjZWl2ZWQrXCJcIjpcIjBcIixkLmdvb2dKaXR0ZXJCdWZmZXJNcz1mLmppdHRlcj9mLmppdHRlcitcIlwiOlwiMFwiLGQuZ29vZ05hY2tzU2VudD1mLm5hY2tDb3VudD9mLm5hY2tDb3VudCtcIlwiOlwiMFwiLGQuZ29vZ1BsaXNTZW50PWYucGxpQ291bnQ/Zi5wbGlDb3VudCtcIlwiOlwiMFwiLGQuZ29vZ0ZpcnNTZW50PWYuZmlyQ291bnQ/Zi5maXJDb3VudCtcIlwiOlwiMFwiKSwtMSE9PWYuaWQuaW5kZXhPZihcIm91dGJvdW5kX3J0Y3BfdmlkZW9cIikmJihzLnBhY2tldHNMb3N0PWYucGFja2V0c0xvc3Q/Zi5wYWNrZXRzTG9zdCtcIlwiOlwiMFwiKX19Y2F0Y2goZSl7bz0hMCx1PWV9ZmluYWxseXt0cnl7cnx8bnVsbD09cC5yZXR1cm58fHAucmV0dXJuKCl9ZmluYWxseXtpZihvKXRocm93IHV9fXZhciBtPVtzLGEsYyxkXTttLnB1c2goe2lkOlwidGltZVwiLHN0YXJ0VGltZTp0LmNvbm5lY3RlZFRpbWUsdGltZXN0YW1wOm5ldyBEYXRlfSksZShtLGkpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuZXJyb3IoXCJbXCIrdC5jbGllbnRJZCtcIl1cIitlKX0pfSx0LmFkZFN0cmVhbT1mdW5jdGlvbihlKXtpPSEwLHQucGVlckNvbm5lY3Rpb24uYWRkU3RyZWFtKGUpLHQubWFya0FjdGlvbk5lZWRlZCgpfSx0LnJlbW92ZVN0cmVhbT1mdW5jdGlvbigpe3QubWFya0FjdGlvbk5lZWRlZCgpfSx0LmNsb3NlPWZ1bmN0aW9uKCl7dC5zdGF0ZT1cImNsb3NlZFwiLHQucGVlckNvbm5lY3Rpb24uY2xvc2UoKX0sdC5tYXJrQWN0aW9uTmVlZGVkPWZ1bmN0aW9uKCl7dC5hY3Rpb25OZWVkZWQ9ITAsdC5kb0xhdGVyKGZ1bmN0aW9uKCl7dC5vbnN0YWJsZXN0YXRlKCl9KX0sdC5kb0xhdGVyPWZ1bmN0aW9uKGUpe3dpbmRvdy5zZXRUaW1lb3V0KGUsMSl9LHQub25zdGFibGVzdGF0ZT1mdW5jdGlvbigpe2lmKHQuYWN0aW9uTmVlZGVkKXtpZihcIm5ld1wiPT09dC5zdGF0ZXx8XCJlc3RhYmxpc2hlZFwiPT09dC5zdGF0ZSlpJiYodC5tZWRpYUNvbnN0cmFpbnRzPXZvaWQgMCksdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihmdW5jdGlvbihlKXtpZihlLnNkcD1sKGUuc2RwKSxlLnNkcD1lLnNkcC5yZXBsYWNlKC9hPWV4dG1hcDoxIGh0dHA6XFwvXFwvd3d3LndlYnJ0Yy5vcmdcXC9leHBlcmltZW50c1xcL3J0cC1oZHJleHRcXC9hYnMtc2VuZC10aW1lLyxcImE9ZXh0bWFwOjMgaHR0cDovL3d3dy53ZWJydGMub3JnL2V4cGVyaW1lbnRzL3J0cC1oZHJleHQvYWJzLXNlbmQtdGltZVwiKSxlLnNkcCE9PXQucHJldk9mZmVyKXJldHVybiB0LnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZSksdC5zdGF0ZT1cInByZXBhcmluZy1vZmZlclwiLHZvaWQgdC5tYXJrQWN0aW9uTmVlZGVkKCk7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdTm90IHNlbmRpbmcgYSBuZXcgb2ZmZXJcIil9LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXVVwcyEgY3JlYXRlIG9mZmVyIGZhaWxlZCBcIixlKX0sdC5tZWRpYUNvbnN0cmFpbnRzKTtlbHNlIGlmKFwicHJlcGFyaW5nLW9mZmVyXCI9PT10LnN0YXRlKXtpZih0Lm1vcmVJY2VDb21pbmcpcmV0dXJuO3QucHJldk9mZmVyPXQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHAsdC5vZmZlckNhbmRpZGF0ZXM9dC5wcmV2T2ZmZXIubWF0Y2goL2E9Y2FuZGlkYXRlLitcXHJcXG4vZyl8fFtdLHQub2ZmZXJDYW5kaWRhdGVzLmxlbmd0aHx8KG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXU5vIEljZSBDYW5kaWRhdGUgZ2VuZXJhdGVkXCIpKSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU0hJTV9DQU5ESURBVEVcIik/KG8uZGVmYXVsdC5kZWJ1ZyhcIlNoaW1taW5nIGZha2UgY2FuZGlkYXRlXCIpLHQucHJldk9mZmVyKz1cImE9Y2FuZGlkYXRlOjIyNDMyNTU0MzUgMSB1ZHAgMjEyMjE5NDY4NyAxOTIuMTY4LjAuMSAzMDAwMCB0eXAgaG9zdCBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAxXFxyXFxuXCIpOm8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl1Ob25lIEljZSBDYW5kaWRhdGUgbm90IGFsbG93ZWRcIikpKSx0LnByZXZPZmZlcj10LnByZXZPZmZlci5yZXBsYWNlKC9hPWNhbmRpZGF0ZTouK3R5cFxcc2hvc3QuK1xcclxcbi9nLFwiYT1jYW5kaWRhdGU6MjI0MzI1NTQzNSAxIHVkcCAyMTIyMTk0Njg3IDE5Mi4xNjguMC4xIDMwMDAwIHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDFcXHJcXG5cIiksdC5zZW5kTWVzc2FnZShcIk9GRkVSXCIsdC5wcmV2T2ZmZXIpLHQuc3RhdGU9XCJvZmZlci1zZW50XCJ9ZWxzZSBpZihcIm9mZmVyLXJlY2VpdmVkXCI9PT10LnN0YXRlKXQucGVlckNvbm5lY3Rpb24uY3JlYXRlQW5zd2VyKGZ1bmN0aW9uKGUpe2lmKHQucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihlKSx0LnN0YXRlPVwib2ZmZXItcmVjZWl2ZWQtcHJlcGFyaW5nLWFuc3dlclwiLHQuaWNlU3RhcnRlZCl0Lm1hcmtBY3Rpb25OZWVkZWQoKTtlbHNle3ZhciBuPW5ldyBEYXRlO28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXVwiK24uZ2V0VGltZSgpK1wiOiBTdGFydGluZyBJQ0UgaW4gcmVzcG9uZGVyXCIpLHQuaWNlU3RhcnRlZD0hMH19LGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdVXBzISBTb21ldGhpbmcgd2VudCB3cm9uZ1wiKX0pO2Vsc2UgaWYoXCJvZmZlci1yZWNlaXZlZC1wcmVwYXJpbmctYW5zd2VyXCI9PT10LnN0YXRlKXtpZih0Lm1vcmVJY2VDb21pbmcpcmV0dXJuO3ZhciBlPXQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHA7dC5zZW5kTWVzc2FnZShcIkFOU1dFUlwiLGUpLHQuc3RhdGU9XCJlc3RhYmxpc2hlZFwifWVsc2UgdC5lcnJvcihcIkRhemVkIGFuZCBjb25mdXNlZCBpbiBzdGF0ZSBcIit0LnN0YXRlK1wiLCBzdG9wcGluZyBoZXJlXCIpO3QuYWN0aW9uTmVlZGVkPSExfX0sdC5zZW5kTWVzc2FnZT1mdW5jdGlvbihlLG4pe3ZhciBpPXt9O2kubWVzc2FnZVR5cGU9ZSxpLnNkcD1uLFwiT0ZGRVJcIj09PWU/KGkub2ZmZXJlclNlc3Npb25JZD10LnNlc3Npb25JZCxpLmFuc3dlcmVyU2Vzc2lvbklkPXQub3RoZXJTZXNzaW9uSWQsaS5zZXE9dC5zZXF1ZW5jZU51bWJlcis9MSxpLnRpZWJyZWFrZXI9TWF0aC5mbG9vcig0Mjk0OTY3MjMqTWF0aC5yYW5kb20oKSsxKSk6KGkub2ZmZXJlclNlc3Npb25JZD10LmluY29taW5nTWVzc2FnZS5vZmZlcmVyU2Vzc2lvbklkLGkuYW5zd2VyZXJTZXNzaW9uSWQ9dC5zZXNzaW9uSWQsaS5zZXE9dC5pbmNvbWluZ01lc3NhZ2Uuc2VxKSx0Lm9uc2lnbmFsaW5nbWVzc2FnZShKU09OLnN0cmluZ2lmeShpKSl9LHQuX2dldFNlbmRlcj1mdW5jdGlvbihlKXtpZih0LnBlZXJDb25uZWN0aW9uJiZ0LnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMpe3ZhciBuPXQucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2sua2luZD09ZX0pO2lmKG4pcmV0dXJuIG59cmV0dXJuIG51bGx9LHQuaGFzU2VuZGVyPWZ1bmN0aW9uKGUpe3JldHVybiEhdC5fZ2V0U2VuZGVyKGUpfSx0LnJlcGxhY2VUcmFjaz1mdW5jdGlvbihlLG4saSl7dmFyIGE9dC5fZ2V0U2VuZGVyKGUua2luZCk7aWYoIWEpcmV0dXJuIGkoXCJOT19TRU5ERVJfRk9VTkRcIik7dHJ5e2EucmVwbGFjZVRyYWNrKGUpfWNhdGNoKGUpe3JldHVybiBpJiZpKGUpfXNldFRpbWVvdXQoZnVuY3Rpb24oKXtyZXR1cm4gbiYmbigpfSw1MCl9LHQuZXJyb3I9ZnVuY3Rpb24oZSl7dGhyb3dcIkVycm9yIGluIFJvYXBPbkpzZXA6IFwiK2V9LHQuc2Vzc2lvbklkPXQucm9hcFNlc3Npb25JZCs9MSx0LnNlcXVlbmNlTnVtYmVyPTAsdC5hY3Rpb25OZWVkZWQ9ITEsdC5pY2VTdGFydGVkPSExLHQubW9yZUljZUNvbWluZz0hMCx0LmljZUNhbmRpZGF0ZUNvdW50PTAsdC5vbnNpZ25hbGluZ21lc3NhZ2U9ZS5jYWxsYmFjayx0LnBlZXJDb25uZWN0aW9uLm9udHJhY2s9ZnVuY3Rpb24oZSl7dC5vbmFkZHN0cmVhbSYmdC5vbmFkZHN0cmVhbShlLFwib250cmFja1wiKX0sdC5wZWVyQ29ubmVjdGlvbi5vbnJlbW92ZXN0cmVhbT1mdW5jdGlvbihlKXt0Lm9ucmVtb3Zlc3RyZWFtJiZ0Lm9ucmVtb3Zlc3RyZWFtKGUpfSx0LnBlZXJDb25uZWN0aW9uLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUpe1wiY29ubmVjdGVkXCI9PT1lLmN1cnJlbnRUYXJnZXQuaWNlQ29ubmVjdGlvblN0YXRlJiYodC5jb25uZWN0ZWRUaW1lPW5ldyBEYXRlKSx0Lm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJiZ0Lm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKGUuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUpfTt2YXIgbD1mdW5jdGlvbih0KXt2YXIgbjtpZihlLnZpZGVvJiZlLm1heFZpZGVvQlcmJihudWxsPT0obj10Lm1hdGNoKC9tPXZpZGVvLipcXHJcXG4vKSkmJihuPXQubWF0Y2goL209dmlkZW8uKlxcbi8pKSxuJiZuLmxlbmd0aD4wKSl7dmFyIGk9blswXStcImI9VElBUzpcIisxZTMqZS5tYXhWaWRlb0JXK1wiXFxyXFxuXCI7dD10LnJlcGxhY2UoblswXSxpKX1yZXR1cm4gZS5hdWRpbyYmZS5tYXhBdWRpb0JXJiYobnVsbD09KG49dC5tYXRjaCgvbT1hdWRpby4qXFxyXFxuLykpJiYobj10Lm1hdGNoKC9tPWF1ZGlvLipcXG4vKSksbiYmbi5sZW5ndGg+MCkmJihpPW5bMF0rXCJiPVRJQVM6XCIrMWUzKmUubWF4QXVkaW9CVytcIlxcclxcblwiLHQ9dC5yZXBsYWNlKG5bMF0saSkpLHR9O3JldHVybiB0Lm9uYWRkc3RyZWFtPW51bGwsdC5vbnJlbW92ZXN0cmVhbT1udWxsLHQuc3RhdGU9XCJuZXdcIix0Lm1hcmtBY3Rpb25OZWVkZWQoKSx0fSxXPWEoMTYpLEc9YS5uKFcpLHE9bnVsbCxZPWZ1bmN0aW9uKCl7dHJ5e3E9d2luZG93LnJlcXVpcmUoXCJlbGVjdHJvblwiKX1jYXRjaChlKXt9cmV0dXJuIHF9LEo9ZnVuY3Rpb24oZSl7dmFyIHQ9cy5iLnJlcG9ydEFwaUludm9rZShudWxsLHtjYWxsYmFjazplLG5hbWU6XCJnZXRTY3JlZW5Tb3VyY2VzXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSxuPVkoKTtpZighbilyZXR1cm4gdCYmdChcImVsZWN0cm9uIGlzIG51bGxcIik7bi5kZXNrdG9wQ2FwdHVyZXIuZ2V0U291cmNlcyh7dHlwZXM6W1wid2luZG93XCIsXCJzY3JlZW5cIl19LGZ1bmN0aW9uKGUsbil7aWYoZSlyZXR1cm4gdCYmdChlKTt0JiZ0KG51bGwsbil9KX0sSz1mdW5jdGlvbihlLHQsbil7dmFyIGk9dC53aWR0aDt0PXthdWRpbzohMSx2aWRlbzp7bWFuZGF0b3J5OntjaHJvbWVNZWRpYVNvdXJjZTpcImRlc2t0b3BcIixjaHJvbWVNZWRpYVNvdXJjZUlkOmUsbWF4SGVpZ2h0OnQuaGVpZ2h0LG1heFdpZHRoOmksbWF4RnJhbWVSYXRlOnQuZnJhbWVSYXRlJiZ0LmZyYW1lUmF0ZS5tYXgsbWluRnJhbWVSYXRlOnQuZnJhbWVSYXRlJiZ0LmZyYW1lUmF0ZS5taW59fX07bmF2aWdhdG9yLndlYmtpdEdldFVzZXJNZWRpYSh0LGZ1bmN0aW9uKGUpe24mJm4obnVsbCxlKX0sZnVuY3Rpb24oZSl7biYmbihlKX0pfSx6PWZ1bmN0aW9uKCl7cmV0dXJuISFZKCl9LFg9SixRPUssJD1mdW5jdGlvbihlLHQpe0ooZnVuY3Rpb24obixpKXtpZihuKXJldHVybiB0JiZ0KG4pOyFmdW5jdGlvbihlLHQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5pbm5lclRleHQ9XCJzaGFyZSBzY3JlZW5cIixuLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ0ZXh0LWFsaWduOiBjZW50ZXI7IGhlaWdodDogMjVweDsgbGluZS1oZWlnaHQ6IDI1cHg7IGJvcmRlci1yYWRpdXM6IDRweCA0cHggMCAwOyBiYWNrZ3JvdW5kOiAjRDREMkQ0OyBib3JkZXItYm90dG9tOiAgc29saWQgMXB4ICNCOUI4Qjk7XCIpO3ZhciBpPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7aS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDEwMCU7IGhlaWdodDogNTAwcHg7IHBhZGRpbmc6IDE1cHggMjVweCA7IGJveC1zaXppbmc6IGJvcmRlci1ib3g7XCIpO3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7YS5pbm5lclRleHQ9XCJBZ29yYSBXZWIgU2NyZWVuc2hhcmluZyB3YW50cyB0byBzaGFyZSB0aGUgY29udGVudHMgb2YgeW91ciBzY3JlZW4gd2l0aCB3ZWJkZW1vLmFnb3JhYmVja29uLmNvbS4gQ2hvb3NlIHdoYXQgeW91J2QgbGlrZSB0byBzaGFyZS5cIixhLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJoZWlnaHQ6IDEyJTtcIik7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiA4MCU7IGJhY2tncm91bmQ6ICNGRkY7IGJvcmRlcjogIHNvbGlkIDFweCAjQ0JDQkNCOyBkaXNwbGF5OiBmbGV4OyBmbGV4LXdyYXA6IHdyYXA7IGp1c3RpZnktY29udGVudDogc3BhY2UtYXJvdW5kOyBvdmVyZmxvdy15OiBzY3JvbGw7IHBhZGRpbmc6IDAgMTVweDsgYm94LXNpemluZzogYm9yZGVyLWJveDtcIik7dmFyIG89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ0ZXh0LWFsaWduOiByaWdodDsgcGFkZGluZzogMTZweCAwO1wiKTt2YXIgcz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYnV0dG9uXCIpO3MuaW5uZXJIVE1MPVwiY2FuY2VsXCIscy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDg1cHg7XCIpLHMub25jbGljaz1mdW5jdGlvbigpe2RvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoYyksdCYmdChcIk5vdEFsbG93ZWRFcnJvclwiKX0sby5hcHBlbmRDaGlsZChzKSxpLmFwcGVuZENoaWxkKGEpLGkuYXBwZW5kQ2hpbGQociksaS5hcHBlbmRDaGlsZChvKTt2YXIgYz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2Muc2V0QXR0cmlidXRlKFwic3R5bGVcIixcInBvc2l0aW9uOiBhYnNvbHV0ZTsgei1pbmRleDogOTk5OTk5OTk7IHRvcDogNTAlOyBsZWZ0OiA1MCU7IHdpZHRoOiA2MjBweDsgaGVpZ2h0OiA1MjVweDsgYmFja2dyb3VuZDogI0VDRUNFQzsgYm9yZGVyLXJhZGl1czogNHB4OyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7IHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsLTUwJSk7XCIpLGMuYXBwZW5kQ2hpbGQobiksYy5hcHBlbmRDaGlsZChpKSxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGMpLGUubWFwKGZ1bmN0aW9uKGUpe2lmKGUuaWQpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7bi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDMwJTsgaGVpZ2h0OiAxNjBweDsgcGFkZGluZzogMjBweCAwOyB0ZXh0LWFsaWduOiBjZW50ZXI7Ym94LXNpemluZzogY29udGVudC1ib3g7XCIpLG4uaW5uZXJIVE1MPSc8ZGl2IHN0eWxlPVwiaGVpZ2h0OiAxMjBweDsgZGlzcGxheTogdGFibGUtY2VsbDsgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcIj48aW1nIHN0eWxlPVwid2lkdGg6IDEwMCU7IGJhY2tncm91bmQ6ICMzMzMzMzM7IGJveC1zaGFkb3c6IDFweCAxcHggMXB4IDFweCByZ2JhKDAsIDAsIDAsIDAuMik7XCIgc3JjPScrZS50aHVtYm5haWwudG9EYXRhVVJMKCkrJyAvPjwvZGl2PjxzcGFuIHN0eWxlPVwiXFx0aGVpZ2h0OiA0MHB4OyBsaW5lLWhlaWdodDogNDBweDsgZGlzcGxheTogaW5saW5lLWJsb2NrOyB3aWR0aDogNzAlOyB3b3JkLWJyZWFrOiBrZWVwLWFsbDsgd2hpdGUtc3BhY2U6IG5vd3JhcDsgb3ZlcmZsb3c6IGhpZGRlbjsgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7XCI+JytlLm5hbWUrXCI8L3NwYW4+XCIsbi5vbmNsaWNrPWZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjKSx0JiZ0KG51bGwsZS5pZCl9LHIuYXBwZW5kQ2hpbGQobil9fSl9KGksZnVuY3Rpb24obixpKXtpZihuKXJldHVybiB0JiZ0KG4pO0soaSxlLHQpfSl9KX0sWj0xMDMsZWU9ZnVuY3Rpb24oZSl7dmFyIHQ9e307aWYodC5jbGllbnRJZD1lLmNsaWVudElkLGUuc2Vzc2lvbl9pZD1aKz0xLFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3d8fCF3aW5kb3cubmF2aWdhdG9yKXRocm93IG8uZGVmYXVsdC5lcnJvcihcIltcIit0LnN0cmVhbUlkK1wiXVtcIit0LmNsaWVudElkK1wiXVB1Ymxpc2gvc3Vic2NyaWJlIHZpZGVvL2F1ZGlvIHN0cmVhbXMgbm90IHN1cHBvcnRlZCB5ZXRcIiksbmV3IEVycm9yKFwiTk9OX0JST1dTRVJfRU5WX0RFVEVDVEVEXCIpO3JldHVybiBudWxsIT09d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goXCJGaXJlZm94XCIpPyh0LmJyb3dzZXI9XCJtb3ppbGxhXCIsdD1IKGUpKTpcImlPU1wiPT09bS5nZXRCcm93c2VyT1MoKXx8bS5pc1NhZmFyaSgpPyhvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5zdHJlYW1JZCtcIl1bXCIrdC5jbGllbnRJZCtcIl1TYWZhcmlcIiksKHQ9QihlKSkuYnJvd3Nlcj1cInNhZmFyaVwiKTp+d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkVkZ2VcIik/dD1uZXcgRy5hKGUpOih0PUYoZSkpLmJyb3dzZXI9XCJjaHJvbWUtc3RhYmxlXCIsdH0sdGU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXt9O2kuY29uZmlnPWUsaS5zdHJlYW1JZD1lLnN0cmVhbUlkLGRlbGV0ZSBlLnN0cmVhbUlkLG5hdmlnYXRvci5nZXRNZWRpYT1uYXZpZ2F0b3IuZ2V0VXNlck1lZGlhfHxuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhfHxuYXZpZ2F0b3IubW96R2V0VXNlck1lZGlhfHxuYXZpZ2F0b3IubXNHZXRVc2VyTWVkaWE7dmFyIGE9MCxyPTEscz0hMSxjPW51bGwsZD1mdW5jdGlvbihlKXtpZihhKyssYylpZihjPT09ZSlvLmRlZmF1bHQuZGVidWcoXCJVc2luZyBWaWRlbyBTb3VyY2UvIEF1ZGlvIFNvdXJjZVwiKTtlbHNle3ZhciBuPWMuZ2V0VmlkZW9UcmFja3MoKVswXSxpPWMuZ2V0QXVkaW9UcmFja3MoKVswXSxkPWUuZ2V0VmlkZW9UcmFja3MoKVswXSx1PWUuZ2V0QXVkaW9UcmFja3MoKVswXTtkJiYobiYmYy5yZW1vdmVUcmFjayhuKSxjLmFkZFRyYWNrKGQpKSx1JiYoaSYmYy5yZW1vdmVUcmFjayhpKSxjLmFkZFRyYWNrKHUpKX1lbHNlIGM9ZTthIT09cnx8c3x8KHM9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe3QoYyl9LDApKX0sdT1mdW5jdGlvbihlKXtvLmRlZmF1bHQuZXJyb3IoXCJGYWlsZWQgdG8gR2V0VXNlck1lZGlhXCIsZS5uYW1lLGUuY29kZSxlLm1lc3NhZ2UsZSksYSsrLHN8fChzPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtuJiZuKGUpfSwwKSl9LGw9ZnVuY3Rpb24oKXt2YXIgdD17dmlkZW86ZS52aWRlbyxhdWRpbzplLmF1ZGlvfTtpZihvLmRlZmF1bHQuZGVidWcoXCJHZXRVc2VyTWVkaWFcIixKU09OLnN0cmluZ2lmeSh0KSksbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEodCkudGhlbihkKS5jYXRjaCh1KTtlbHNlIGlmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBuYXZpZ2F0b3ImJm5hdmlnYXRvci5nZXRNZWRpYSluYXZpZ2F0b3IuZ2V0TWVkaWEoZSxkLHUpO2Vsc2V7dmFyIGE9e25hbWU6XCJNRURJQV9OT1RfU1VQUE9SVFwiLG1lc3NhZ2U6XCJWaWRlby9hdWRpbyBzdHJlYW1zIG5vdCBzdXBwb3J0ZWQgeWV0XCJ9O28uZGVmYXVsdC5lcnJvcihcIltcIitpLnN0cmVhbUlkK1wiXVwiK2EubWVzc2FnZSksbiYmbihhKX19O2lmKChlLnZpZGVvU291cmNlfHxlLmF1ZGlvU291cmNlKSYmKGM9bmV3IE1lZGlhU3RyZWFtLGUudmlkZW9Tb3VyY2UmJmMuYWRkVHJhY2soZS52aWRlb1NvdXJjZSksZS5hdWRpb1NvdXJjZSYmYy5hZGRUcmFjayhlLmF1ZGlvU291cmNlKSksZS52aWRlb3x8ZS5hdWRpb3x8ZS5zY3JlZW58fGUuc2NyZWVuQXVkaW98fGQoYyksIWUuc2NyZWVuJiZlLnNjcmVlbkF1ZGlvKXJldHVybiBuJiZuKHtjb2RlOlwiU2V0IHNjcmVlbiB0byB0cnVlIGJlZm9yZSBzaGFyaW5nIHRoZSBhdWRpb1wifSk7aWYoZS5zY3JlZW4pe2lmKHooKSlyZXR1cm4gZS5zY3JlZW4uc291cmNlSWQ/UShlLnNjcmVlbi5zb3VyY2VJZCxlLnNjcmVlbixmdW5jdGlvbihlLHQpe2U/dShlKTpkKHQpfSk6JChlLnNjcmVlbixmdW5jdGlvbihlLHQpe2U/dShlKTpkKHQpfSk7aWYobS5pc0ZpcmVGb3goKSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK2kuc3RyZWFtSWQrXCJdU2NyZWVuIGFjY2VzcyByZXF1ZXN0ZWRcIik7aWYoIX5bXCJzY3JlZW5cIixcIndpbmRvd1wiLFwiYXBwbGljYXRpb25cIl0uaW5kZXhPZihlLnNjcmVlbi5tZWRpYVNvdXJjZSkpcmV0dXJuIG4mJm4oe2NvZGU6XCJJbnZhbGlkIG1lZGlhU291cmNlLCBtZWRpYVNvdXJjZSBzaG91bGQgYmUgb25lIG9mIFtzY3JlZW4sIHdpbmRvdywgYXBwbGljYXRpb25dXCJ9KTtuYXZpZ2F0b3IuZ2V0TWVkaWEoe3ZpZGVvOmUuc2NyZWVufSxmdW5jdGlvbih0KXtlLmF1ZGlvJiYocisrLGwoKSksZCh0KX0sdSl9ZWxzZSBpZihtLmlzQ2hyb21lS2VybmVsKCkmJmUuc2NyZWVuLmV4dGVuc2lvbklkKXtpZih3aW5kb3cubmF2aWdhdG9yLmFwcFZlcnNpb24ubWF0Y2goL0Nocm9tZVxcLyhbXFx3XFxXXSo/KVxcLi8pWzFdPDM0KXJldHVybiB2b2lkIG4oe2NvZGU6XCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBzY3JlZW4gc2hhcmluZ1wifSk7by5kZWZhdWx0LmRlYnVnKFwiW1wiK2kuc3RyZWFtSWQrXCJdU2NyZWVuIGFjY2VzcyBvbiBjaHJvbWUgc3RhYmxlLCBsb29raW5nIGZvciBleHRlbnNpb25cIik7dHJ5e2Nocm9tZS5ydW50aW1lLnNlbmRNZXNzYWdlKGUuc2NyZWVuLmV4dGVuc2lvbklkLHtnZXRTdHJlYW06ITB9LGZ1bmN0aW9uKHQpe2lmKHZvaWQgMD09PXQpe28uZGVmYXVsdC5lcnJvcihcIltcIitpLnN0cmVhbUlkK1wiXU5vIHJlc3BvbnNlIGZyb20gQ2hyb21lIFBsdWdpbi4gUGx1Z2luIG5vdCBpbnN0YWxsZWQgcHJvcGVybHlcIik7dSh7bmFtZTpcIlBsdWdpbk5vdEluc3RhbGxlZFByb3Blcmx5XCIsbWVzc2FnZTpcIk5vIHJlc3BvbnNlIGZyb20gQ2hyb21lIFBsdWdpbi4gUGx1Z2luIG5vdCBpbnN0YWxsZWQgcHJvcGVybHkuXCJ9KX1lbHNlIGUuc2NyZWVuLm1hbmRhdG9yeS5jaHJvbWVNZWRpYVNvdXJjZUlkPXQuc3RyZWFtSWQsbmF2aWdhdG9yLmdldE1lZGlhKHt2aWRlbzplLnNjcmVlbn0sZnVuY3Rpb24odCl7ZS5hdWRpbyYmKHIrKyxsKCkpLGQodCl9LHUpfSl9Y2F0Y2goZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK2kuc3RyZWFtSWQrXCJdQWdvcmFSVEMgc2NyZWVuc2hhcmluZyBwbHVnaW4gaXMgbm90IGFjY2Vzc2libGVcIik7cmV0dXJuIHZvaWQgbih7Y29kZTpcIm5vX3BsdWdpbl9wcmVzZW50XCJ9KX19ZWxzZXtpZih3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEpe3ZhciBwPXt9O3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlLnNjcmVlbi53aWR0aCYmXCJudW1iZXJcIj09dHlwZW9mIGUuc2NyZWVuLmhlaWdodD9wLnZpZGVvPXt3aWR0aDp7aWRlYWw6ZS5zY3JlZW4ud2lkdGh9LGhlaWdodDp7aWRlYWw6ZS5zY3JlZW4uaGVpZ2h0fX06cC52aWRlbz17d2lkdGg6ZS5zY3JlZW4ud2lkdGgsaGVpZ2h0OmUuc2NyZWVuLmhlaWdodH0sZS5zY3JlZW4uZnJhbWVSYXRlJiZlLnNjcmVlbi5mcmFtZVJhdGUubWluP3AudmlkZW8uZnJhbWVSYXRlPXtpZGVhbDplLnNjcmVlbi5mcmFtZVJhdGUubWF4LG1heDplLnNjcmVlbi5mcmFtZVJhdGUubWF4fTpwLnZpZGVvLmZyYW1lUmF0ZT1lLnNjcmVlbi5mcmFtZVJhdGUsZS5zY3JlZW5BdWRpbyYmKHAuYXVkaW89ZS5zY3JlZW5BdWRpbyksby5kZWZhdWx0LmRlYnVnKFwidXNlIGdldERpc3BsYXlNZWRpYSwgY29uc3RyYWludHM6XCIscCksd2luZG93Lm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0RGlzcGxheU1lZGlhKHApLnRoZW4oZnVuY3Rpb24odCl7IWUuc2NyZWVuQXVkaW8mJmUuYXVkaW8mJihyKyssbCgpKSxkKHQpfSkuY2F0Y2godSl9by5kZWZhdWx0LmVycm9yKFwiW1wiK2kuc3RyZWFtSWQrXCJdVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgc2NyZWVuU2hhcmluZ1wiKSxuKHtjb2RlOlwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgc2NyZWVuIHNoYXJpbmdcIn0pfX1lbHNlIGwoKX0sbmU9YSgxMCksaWU9ZnVuY3Rpb24oZSx0LG4pe2lmKFtcIkVuZDJFbmREZWxheVwiLFwiVHJhbnNwb3J0RGVsYXlcIixcIlBhY2tldExvc3NSYXRlXCIsXCJSZWN2TGV2ZWxcIixcIlJlY3ZCaXRyYXRlXCIsXCJDb2RlY1R5cGVcIixcIk11dGVTdGF0ZVwiLFwiVG90YWxGcmVlemVUaW1lXCIsXCJUb3RhbFBsYXlEdXJhdGlvblwiLFwiUmVjb3JkaW5nTGV2ZWxcIixcIlNlbmRMZXZlbFwiLFwiU2FtcGxpbmdSYXRlXCIsXCJTZW5kQml0cmF0ZVwiLFwiQ29kZWNUeXBlXCIsXCJNdXRlU3RhdGVcIixcIkVuZDJFbmREZWxheVwiLFwiVHJhbnNwb3J0RGVsYXlcIixcIlBhY2tldExvc3NSYXRlXCIsXCJSZWN2Qml0cmF0ZVwiLFwiUmVjdlJlc29sdXRpb25XaWR0aFwiLFwiUmVjdlJlc29sdXRpb25IZWlnaHRcIixcIlJlbmRlclJlc29sdXRpb25IZWlnaHRcIixcIlJlbmRlclJlc29sdXRpb25XaWR0aFwiLFwiUmVuZGVyRnJhbWVSYXRlXCIsXCJUb3RhbEZyZWV6ZVRpbWVcIixcIlRvdGFsUGxheUR1cmF0aW9uXCIsXCJUYXJnZXRTZW5kQml0cmF0ZVwiLFwiU2VuZEZyYW1lUmF0ZVwiLFwiU2VuZEZyYW1lUmF0ZVwiLFwiU2VuZEJpdHJhdGVcIixcIlNlbmRSZXNvbHV0aW9uV2lkdGhcIixcIlNlbmRSZXNvbHV0aW9uSGVpZ2h0XCIsXCJDYXB0dXJlUmVzb2x1dGlvbkhlaWdodFwiLFwiQ2FwdHVyZVJlc29sdXRpb25XaWR0aFwiLFwiRW5jb2RlRGVsYXlcIixcIk11dGVTdGF0ZVwiLFwiVG90YWxGcmVlemVUaW1lXCIsXCJUb3RhbER1cmF0aW9uXCIsXCJDYXB0dXJlRnJhbWVSYXRlXCIsXCJSVFRcIixcIk91dGdvaW5nQXZhaWxhYmxlQmFuZHdpZHRoXCIsXCJEdXJhdGlvblwiLFwiVXNlckNvdW50XCIsXCJTZW5kQnl0ZXNcIixcIlJlY3ZCeXRlc1wiLFwiU2VuZEJpdHJhdGVcIixcIlJlY3ZCaXRyYXRlXCIsXCJhY2Nlc3NEZWxheVwiLFwiYXVkaW9TZW5kQnl0ZXNcIixcImF1ZGlvU2VuZFBhY2tldHNcIixcInZpZGVvU2VuZEJ5dGVzXCIsXCJ2aWRlb1NlbmRQYWNrZXRzXCIsXCJ2aWRlb1NlbmRQYWNrZXRzTG9zdFwiLFwidmlkZW9TZW5kRnJhbWVSYXRlXCIsXCJhdWRpb1NlbmRQYWNrZXRzTG9zdFwiLFwidmlkZW9TZW5kUmVzb2x1dGlvbldpZHRoXCIsXCJ2aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0XCIsXCJhY2Nlc3NEZWxheVwiLFwiYXVkaW9SZWNlaXZlQnl0ZXNcIixcImF1ZGlvUmVjZWl2ZVBhY2tldHNcIixcImF1ZGlvUmVjZWl2ZVBhY2tldHNMb3N0XCIsXCJ2aWRlb1JlY2VpdmVCeXRlc1wiLFwidmlkZW9SZWNlaXZlUGFja2V0c1wiLFwidmlkZW9SZWNlaXZlUGFja2V0c0xvc3RcIixcInZpZGVvUmVjZWl2ZUZyYW1lUmF0ZVwiLFwidmlkZW9SZWNlaXZlRGVjb2RlRnJhbWVSYXRlXCIsXCJ2aWRlb1JlY2VpdmVSZXNvbHV0aW9uV2lkdGhcIixcInZpZGVvUmVjZWl2ZVJlc29sdXRpb25IZWlnaHRcIixcImVuZFRvRW5kRGVsYXlcIixcInZpZGVvUmVjZWl2ZURlbGF5XCIsXCJhdWRpb1JlY2VpdmVEZWxheVwiLFwiRmlyc3RGcmFtZVRpbWVcIixcIlZpZGVvRnJlZXplUmF0ZVwiLFwiQXVkaW9GcmVlemVSYXRlXCIsXCJSZW5kZXJSZXNvbHV0aW9uV2lkdGhcIixcIlJlbmRlclJlc29sdXRpb25IZWlnaHRcIl0uaW5kZXhPZih0KT4tMSYmKFwic3RyaW5nXCI9PXR5cGVvZiBufHxpc0Zpbml0ZShuKSkpcmV0dXJuIGVbdF09XCJcIitufSxhZT1uZXcgZnVuY3Rpb24oKXt2YXIgZT1jKCk7cmV0dXJuIGUuZGV2aWNlc0hpc3Rvcnk9e30sZS5zdGF0ZXM9e1VOSU5JVDpcIlVOSU5JVFwiLElOSVRJTkc6XCJJTklUSU5HXCIsSU5JVEVEOlwiSU5JVEVEXCJ9LGUuc3RhdGU9ZS5zdGF0ZXMuVU5JTklULGUuZGV2aWNlU3RhdGVzPXtBQ1RJVkU6XCJBQ1RJVkVcIixJTkFDVElWRTpcIklOQUNUSVZFXCJ9LGUuZGV2aWNlUmVsb2FkVGltZXI9bnVsbCxlLl9pbml0PWZ1bmN0aW9uKHQsbil7ZS5zdGF0ZT1lLnN0YXRlcy5JTklUSU5HLGUuZGV2aWNlc0hpc3Rvcnk9e30sZS5fcmVsb2FkRGV2aWNlc0luZm8oZnVuY3Rpb24oKXtlLnN0YXRlPWUuc3RhdGVzLklOSVRFRCxlLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJpbml0ZWRcIn0pLHQmJnQoKX0sZnVuY3Rpb24odCl7by5kZWZhdWx0Lndhcm5pbmcoXCJEZXZpY2UgRGV0ZWN0aW9uIGZ1bmN0aW9uYWxpdHkgY2Fubm90IHN0YXJ0IHByb3Blcmx5LlwiKSxlLnN0YXRlPWUuc3RhdGVzLlVOSU5JVCxuJiZuKHQpfSl9LGUuX2VudW1lcmF0ZURldmljZXM9ZnVuY3Rpb24oZSx0KXtpZighbmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8IW5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcylyZXR1cm4gby5kZWZhdWx0Lndhcm5pbmcoXCJlbnVtZXJhdGVEZXZpY2VzKCkgbm90IHN1cHBvcnRlZC5cIiksdCYmdChcImVudW1lcmF0ZURldmljZXMoKSBub3Qgc3VwcG9ydGVkXCIpO25hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcygpLnRoZW4oZnVuY3Rpb24odCl7ZSYmc2V0VGltZW91dChmdW5jdGlvbigpe2UodCl9LDApfSkuY2F0Y2goZnVuY3Rpb24oZSl7dCYmdChlKX0pfSxlLl9yZWxvYWREZXZpY2VzSW5mbz1mdW5jdGlvbih0LG4pe3ZhciBpPVtdO2UuX2VudW1lcmF0ZURldmljZXMoZnVuY3Rpb24obil7dmFyIGE9RGF0ZS5ub3coKTtmb3IodmFyIHIgaW4gbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPWUuZGV2aWNlc0hpc3RvcnlbdC5kZXZpY2VJZF07aWYoKG4/bi5zdGF0ZTplLmRldmljZVN0YXRlcy5JTkFDVElWRSkhPWUuZGV2aWNlU3RhdGVzLkFDVElWRSl7dmFyIHI9bnx8e2luaXRBdDphfTtyLmRldmljZT10LHIuc3RhdGU9ZS5kZXZpY2VTdGF0ZXMuQUNUSVZFLGkucHVzaChyKSxlLmRldmljZXNIaXN0b3J5W3QuZGV2aWNlSWRdPXJ9ZS5kZXZpY2VzSGlzdG9yeVt0LmRldmljZUlkXS5sYXN0UmVsb2FkQXQ9YX0pLGUuZGV2aWNlc0hpc3Rvcnkpe3ZhciBzPWUuZGV2aWNlc0hpc3Rvcnlbcl07cyYmcy5zdGF0ZT09ZS5kZXZpY2VTdGF0ZXMuQUNUSVZFJiZzLmxhc3RSZWxvYWRBdCE9PWEmJihzLnN0YXRlPWUuZGV2aWNlU3RhdGVzLklOQUNUSVZFLGkucHVzaChzKSkscy5sYXN0UmVsb2FkQXQ9YX1lLnN0YXRlPT1lLnN0YXRlcy5JTklURUQmJmkuZm9yRWFjaChmdW5jdGlvbih0KXt2YXIgbj1TKCkoe30sdCk7c3dpdGNoKHQuZGV2aWNlLmtpbmQpe2Nhc2VcImF1ZGlvaW5wdXRcIjpuLnR5cGU9XCJyZWNvcmRpbmdEZXZpY2VDaGFuZ2VkXCI7YnJlYWs7Y2FzZVwiYXVkaW9vdXRwdXRcIjpuLnR5cGU9XCJwbGF5b3V0RGV2aWNlQ2hhbmdlZFwiO2JyZWFrO2Nhc2VcInZpZGVvaW5wdXRcIjpuLnR5cGU9XCJjYW1lcmFDaGFuZ2VkXCI7YnJlYWs7ZGVmYXVsdDpvLmRlZmF1bHQud2FybmluZyhcIlVua25vd24gZGV2aWNlIGNoYW5nZVwiLG4pLG4udHlwZT1cInVua25vd25EZXZpY2VDaGFuZ2VkXCJ9ZS5kaXNwYXRjaEV2ZW50KG4pfSksdCYmdCgpfSxuKX0sZS5nZXREZXZpY2VCeUlkPWZ1bmN0aW9uKHQsbixpKXtlLmdldERldmljZXMoZnVuY3Rpb24oZSl7Zm9yKHZhciBhPTA7YTxlLmxlbmd0aDthKyspe3ZhciByPWVbYV07aWYociYmci5kZXZpY2VJZD09PXQpcmV0dXJuIG4mJm4ocil9cmV0dXJuIGkmJmkoKX0pfSxlLnNlYXJjaERldmljZU5hbWVCeUlkPWZ1bmN0aW9uKHQpe3ZhciBuPWUuZGV2aWNlc0hpc3RvcnlbdF07cmV0dXJuIG4/bi5kZXZpY2UubGFiZWx8fG4uZGV2aWNlLmRldmljZUlkOm51bGx9LGUuZ2V0RGV2aWNlcz1mdW5jdGlvbih0LG4pe2UuX2VudW1lcmF0ZURldmljZXModCxmdW5jdGlvbihlKXtuJiZuKGUubmFtZStcIjogXCIrZS5tZXNzYWdlKX0pfSxlLmdldFZpZGVvQ2FtZXJhSWRCeUxhYmVsPWZ1bmN0aW9uKHQsbixpKXtlLmdldENhbWVyYXMoZnVuY3Rpb24oZSl7dmFyIGE9ITAscj0hMSxvPXZvaWQgMDt0cnl7Zm9yKHZhciBzLGM9ZVtTeW1ib2wuaXRlcmF0b3JdKCk7IShhPShzPWMubmV4dCgpKS5kb25lKTthPSEwKXt2YXIgZD1zLnZhbHVlO2lmKGQubGFiZWw9PT10KXJldHVybiBuJiZuKGQuZGV2aWNlSWQpfX1jYXRjaChlKXtyPSEwLG89ZX1maW5hbGx5e3RyeXthfHxudWxsPT1jLnJldHVybnx8Yy5yZXR1cm4oKX1maW5hbGx5e2lmKHIpdGhyb3cgb319cmV0dXJuIGkmJmkoVi5OT1RfRklORF9ERVZJQ0VfQllfTEFCRUwpfSxpKX0sZS5nZXRSZWNvcmRpbmdEZXZpY2VzPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuX2VudW1lcmF0ZURldmljZXMoZnVuY3Rpb24oZSl7dmFyIG49ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb2lucHV0XCI9PWUua2luZH0pO3QmJnQobil9LGZ1bmN0aW9uKGUpe24mJm4oZSl9KX0sZS5nZXRQbGF5b3V0RGV2aWNlcz1mdW5jdGlvbih0LG4pe3JldHVybiBlLl9lbnVtZXJhdGVEZXZpY2VzKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9vdXRwdXRcIj09ZS5raW5kfSk7dCYmdChuKX0sZnVuY3Rpb24oZSl7biYmbihlKX0pfSxlLmdldENhbWVyYXM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5fZW51bWVyYXRlRGV2aWNlcyhmdW5jdGlvbihlKXt2YXIgbj1lLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvaW5wdXRcIj09ZS5raW5kfSk7dCYmdChuKX0sZnVuY3Rpb24oZSl7biYmbihlKX0pfSxlLl9pbml0KGZ1bmN0aW9uKCl7bmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyJiZuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXIoXCJkZXZpY2VjaGFuZ2VcIixmdW5jdGlvbigpe2UuX3JlbG9hZERldmljZXNJbmZvKCl9KSxlLmRldmljZVJlbG9hZFRpbWVyPXNldEludGVydmFsKGUuX3JlbG9hZERldmljZXNJbmZvLDVlMyl9KSxlfSxyZT1hKDEpLG9lPWEoMTQpO3ZhciBzZT1hKDYpLGNlPWEubihzZSksZGU9YSgxMSksdWU9YS5uKGRlKSxsZT1hKDE3KSxwZT1hLm4obGUpLGZlPWEoMTgpLG1lPWEubihmZSksZ2U9NSx2ZT1bMzEsMjIyLDIzOSwxNTksMTkyLDIzNiwxNjQsODEsNTQsMjI3LDE3NiwxNDksMiwyNDcsNzUsMTQxLDE4Myw1NCwyMTMsMjE2LDE1OCw5MiwxMTEsNDksMjI4LDExMSwxNTAsNiwxMzUsNzksMzUsMjEyLDQsMTU1LDIwMCwxNjgsMzcsMTA3LDI0MywxMTAsMTQ0LDE3OSw1MSw4MSw1NSw3OCwyMjMsMjQyLDE5MSwyMTEsNzQsMTE5LDIwMywxNTEsMTQyLDYyLDMxLDQxLDEzMiwyMiwzNSwxNTUsODcsMTIzLDExOSwxMTcsMjE2LDU3LDIwMSw1MywyMjgsNjcsMjAxLDQwLDEwNiwyNCw4MCwxNzYsMTg3LDI1Myw2MCw2MywxMzYsMTAwLDIwLDEyLDE3Nyw5OSw2NCwzOCwxMDEsMTQzLDExMSwxNzYsMjUxLDIxMSwxNDUsMTM2LDM0LDIzLDc5LDEzNiwyMDIsOTUsMTA1LDE5OSwxMjUsNjcsMTgwLDQ0LDIxMCwxNzksMjI4LDQsODUsMTYwLDE4OCw2NCwyNiw0Niw2LDYxLDIwMSwxMDMsMjQ4LDE4LDk3LDI1NCwxNDAsMzYsMTE1LDEwNiw0OCwxMjQsMTAyLDIxNiwxNTUsMTIwLDM2LDIyNywxNjUsMjE3LDcsMjI3LDE5MSwxMjgsMjEyLDE1Nyw4MCwzNywxMTcsMTc1LDI0LDIxNCw0NywyMjEsMTgzLDIxMSw1MSwxNzQsMjUxLDIyMywxNTksMTY3LDE1Miw1MywzNiwxMDcsMTk5LDIyMyw5MSw2Miw0NiwxOTQsMTEsODAsMTIxLDE4OCwyMTksMiw5OSw5OSwyMzIsMjI5LDE3MywyMzQsMjEsMzAsMjM2LDE3NywyNDMsMTQyLDk3LDQ4LDEwOCw1Niw2MiwxNzIsNTYsMjE2LDMsNDIsNzksMTM4LDIzLDg4LDE4MiwzOSw1LDExOCw2OCwxMzUsMTc4LDU2LDksOTQsMTg5LDQ0LDEwNCw5LDIzOCwyMzEsMTc0LDEyMiw4NSwyNDcsMjMxLDg2LDc0LDgsMTg5LDE0NywyMTgsMTgwLDU4LDc2LDIyNywxNyw0Niw5MCwxOTQsMTAwLDUxLDE3OCw3MiwxNjMsMTUxLDI0MywxNjYsMTMwLDg1LDEsMjIzLDEzMCwxNTIsMjQyLDg1LDI1NSwyOCwxNzMsOTcsMjUyLDExOSwyMTUsMTc3LDExOSw4NiwxMDQsMTM2LDgyLDQwLDcyLDUzLDExLDE4LDI2LDI0MCwxODgsNzYsMTEwLDM5LDMxLDE4OV07ZnVuY3Rpb24gaGUoZSl7Zm9yKHZhciB0PW5ldyBVaW50OEFycmF5KFs5OSwxMTQsMTIxLDExMiwxMTYsMTA1LDEwNV0pLG49dC5sZW5ndGgsaT1lLGE9aS5sZW5ndGgscj1uZXcgVWludDhBcnJheShhKSxvPW5ldyBVaW50OEFycmF5KDI1Nikscz0wO3M8MjU2O3MrKylvW3NdPXM7Zm9yKHZhciBjPTAsZD0wO2Q8MjU2O2QrKyl7dmFyIHU9W29bYz0oYytvW2RdK3RbZCVuXSklMjU2XSxvW2RdXTtvW2RdPXVbMF0sb1tjXT11WzFdfXZhciBsLHA9MDtjPTA7Zm9yKHZhciBmPTA7ZjwwK2E7ZisrKXt2YXIgbT1bb1tjPShjK29bcD0ocCsxKSUyNTZdKSUyNTZdLG9bcF1dO29bcF09bVswXSxvW2NdPW1bMV0sbD1vWyhvW3BdK29bY10pJTI1Nl0sZj49MCYmKHJbZi0wXT1pW2YtMF1ebCl9dmFyIGc9U3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHIpO3JldHVybiBGdW5jdGlvbihcInZhciB3aW5TaXplID0gXCIrZ2UrXCI7IHJldHVybiBgXCIrZytcImBcIikoKX1mdW5jdGlvbiBTZShlLHQpe3ZhciBuPWhlKHQpLGk9bWUuYS5jcmVhdGVQcm9ncmFtRnJvbVNvdXJjZXMoZSxbaGUodmUpLG5dKSxhPWUuZ2V0QXR0cmliTG9jYXRpb24oaSxcImFfcG9zaXRpb25cIikscj1lLmNyZWF0ZUJ1ZmZlcigpO2UuYmluZEJ1ZmZlcihlLkFSUkFZX0JVRkZFUixyKSxlLmJ1ZmZlckRhdGEoZS5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLDEsMCwwLDEsMCwxLDEsMCwxLDFdKSxlLlNUQVRJQ19EUkFXKSxlLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGEpO3ZhciBvPTIscz1lLkZMT0FULGM9ITEsZD0wLHU9MDtlLnZlcnRleEF0dHJpYlBvaW50ZXIoYSxvLHMsYyxkLHUpO3ZhciBsPWUuZ2V0QXR0cmliTG9jYXRpb24oaSxcImFfdGV4Q29vcmRcIikscD1lLmNyZWF0ZUJ1ZmZlcigpO2UuYmluZEJ1ZmZlcihlLkFSUkFZX0JVRkZFUixwKSxlLmJ1ZmZlckRhdGEoZS5BUlJBWV9CVUZGRVIsbmV3IEZsb2F0MzJBcnJheShbMCwwLDEsMCwwLDEsMCwxLDEsMCwxLDFdKSxlLlNUQVRJQ19EUkFXKSxlLmVuYWJsZVZlcnRleEF0dHJpYkFycmF5KGwpO289MixzPWUuRkxPQVQsYz0hMSxkPTAsdT0wO3JldHVybiBlLnZlcnRleEF0dHJpYlBvaW50ZXIobCxvLHMsYyxkLHUpLGl9dmFyIF9lPVsxMSwxOTYsMjQyLDEzOSwxOTgsMjUyLDE4OCw1LDU5LDE3MCwxNjEsMTUyLDE3LDIyOSwyNCwxNDEsMTMzLDU0LDIxNCwyMDYsMTMzLDI2LDY2LDEyNiwyNTUsMTEsMjQ1LDEwLDE0Niw5Miw1MiwxMzQsMTA4LDE1MiwyMjEsMTkxLDEyNCwxMTYsMjQ4LDEwNiwxMzAsMjUxLDU5LDEwNSw0Myw5MSwxMzUsMTk5LDE4MSwyMjMsMTAsNTEsMTM0LDE5NCwyNDAsNDYsOSwzLDE0MSwyMiwzNSwxNDYsNzYsMjMsMTA5LDExNywyMDgsNDEsMjAxLDQ1LDIxOCw3NiwyMDMsMTA1LDUxLDU4LDk3LDE1NCwxNDUsMjM2LDQ5LDE4LDE4MywxMjcsMjcsMTIsMjEwLDEyMiw3Myw0MiwzNywxNDMsMzYsMjA3LDI1MSwyMTEsMTQ1LDE5MSw1NiwxMCw4OCwyMjIsMTgxLDEyNSwyMiwyMzgsMTIzLDcxLDE3NywxMDcsMjE4LDI1NCwxNzMsMjgsMzQsMjUzLDI0OSw2Nyw4Myw5Nyw3MywxMTEsMjE5LDQzLDE4MSw4MiwzOCwyMzAsMTM2LDEwOSwyMiw2N107ZnVuY3Rpb24gRWUoZSx0LG4pe3ZhciBpPWUuZ2w7dGhpcy5wcm9ncmFtPVNlKGksX2UpLHRoaXMuc2V0VW5pZm9ybXM9ZnVuY3Rpb24oKXtpLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2ltYWdlXCIpO3ZhciBlPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfZmxpcFlcIik7aS51bmlmb3JtMWYoZSwxKX19dmFyIEllPVsxMSwxOTYsMjQyLDEzOSwxOTgsMjUyLDE4OCw1LDU5LDE3MCwxNjEsMTUyLDE3LDIyOSwyNCwxNDEsMTMzLDU0LDIxNCwyMDYsMTMzLDI2LDY2LDEyNiwyNTUsMTEsMjQ1LDEwLDE0Niw5Miw1MiwxMzQsMTA4LDE1NSwyMTAsMTY0LDk5LDExNCwyMjgsOTYsMTMwLDI1MSw1OSwxMDUsNDMsOTEsMTM1LDE5OSwxODEsMjIzLDEwLDUxLDEzMywxOTQsMjQ3LDM0LDMxLDM5LDE0MiwyOCwyLDEzMCwxOCwxMDksODQsMTI0LDIyMyw2MiwxNDAsNTIsMTI4LDQ3LDIwOCw0NywxMTUsMzksNCwyMDAsMjIwLDE3MSw1MywzNiwxNTAsMTAxLDEwLDc1LDI0NywxMjEsNzQsMzYsMzUsMTQzLDEwOCwxNzYsMjM1LDIxMSwxMzUsMTY0LDM2LDExLDg4LDE2MCwxNDgsMzUsNiwyMjEsNDEsMzIsMTY2LDEwOSwyMDUsMTcxLDIyOCw0LDI2LDE2OSwyNDQsODIsMTE5LDEwMiw4Niw2MSwyMDEsMTAzLDI0OCwxOCw5NywyNDIsMTgyLDM0LDEyMSw3MCwyOCw3MSwxMjYsMTk3LDIyMywxMjYsMTQsMjQ0LDE0OSwxOTIsMTIsMTc2LDE4NywxNDksMjEyLDE1NiwyMiw0NCwzNiwxMzMsMTAsMjE2LDYzLDE5OCwyMTMsMTU0LDExNiwyMzAsMjUzLDE1NCwxNTQsMjQ5LDIxNSw1NSw2MCwzNCwxOTYsMjI5LDc2LDUwLDQ0LDEzNSwyMiw3NywxMTMsMjQ3LDE0Miw5NCw2MCwyMywxNzIsMTQ1LDE3NSwyMTgsODEsODYsMTYyLDIzOSwxODAsMjA1LDYzLDExOCwzLDExMCwxMjMsMjI0LDEyNywxNTgsMTI0LDE1LDEyNywxNTcsMjcsNjYsMTc2LDMzLDI0LDUxLDUzLDE5NCwxNzgsNTYsNiw3NCwxOTEsMTExLDUxLDc4LDE3NCwxNTcsMjI5LDE3LDIyLDE3OCwyMzEsOTIsMjUsMjMsMTkxLDE1NywxMzcsMTg4LDU0LDY0LDE3NiwxMywyMiw4MSwyMDcsNDUsMTA4LDIwMyw4MywxODYsMTMwLDIzNywxODYsMTUzLDExMCw4LDE5NiwxNjgsMTUyLDE2MSwyOCwyMzgsNDYsMTg0LDM2LDE4NSwyMCwyMDMsMTgzLDk4LDk1LDQxLDE0OSw5MywxMDUsMzcsMTE2LDkxLDY4LDEwNSwxNjQsMjE3LDMwLDQyLDYwLDUzLDE3MywyMTMsMTc3LDIxNiwxOTUsNTMsMjA0LDE3MywxMjgsMjQzLDQyLDEyMiwyMDUsNjUsOTcsMTI5LDE5NCw2OCwyMTgsOTEsMTQxLDExLDIyNCwxMjQsMTMyLDEzOCwxMTksMzYsMjIwLDE2MSwzOSwyMTQsMTQ2LDE4MywxOTMsMjI1LDIzLDE3NywyMDEsMjQzLDEyOCwxNjAsMzMsNzUsODYsMTI2LDEzOSwyNTQsMjMyLDE0LDEzLDg1LDIsMTEyLDE3LDE1MCwzNiwxODAsODYsMjI2LDIyNSwxMjYsMTk3LDE3LDIyOCwyMjUsMTQyLDI0NSwzNywxNzAsMzksOTYsMTg3LDE5MCwyLDM1LDg1LDIzNywxMSwxODksMSw3OSwyMzcsMiwxLDExNCwyNDYsMTA5LDE5MCw2Niw1NCwxNTMsNDMsMjE4LDIwNCw3MCw2LDIwNCwxNjIsMjQ3LDE4LDEzMCwxMjMsMzAsNjAsMTY1LDEzMCwxNDIsMjEwLDEzMyw5MSwxMjcsMTE3LDcxLDM4LDE0NSwxNzIsNyw1LDE2LDIyMCwyMjIsMTExLDk4LDE0MSwyMzksMjA4LDEyNSwyNiwyMzgsMjgsMCwyMTYsODksMTMsNywxMTksMTM0LDE5NCw3NSw0MSw2NywxNzQsMSwyMTcsODAsMTAxLDQwLDI2LDU5LDI4LDU5LDQ2LDEwOCwxMzgsMzgsMTU3LDE2NywyOCwyMzQsNzMsMTc3LDQyLDQyLDEwMiwxMDgsMjYsMTgxLDI3LDE3OCw0Miw0Myw1MiwyOCwxMTAsMTE3LDE5OCwxNzMsMTc2LDE3OCwxMDEsMjI1LDE1MCwzNiwxMzksMTA4LDEwNSwxMCwyMzcsMjIyLDMsMTQzLDEyNiwxOCwxNDQsMTE1LDc0LDU2LDExNCwxMzQsMjMxLDE1OSwyMTIsNjIsMTI2LDgwLDE3MywyMTYsMTY3LDQsODEsMTgsNTIsMTcsMTQ0LDIxOCwzMiwxMzksMjA3LDEwNCwxMjgsMjI5LDk5LDg0LDEyMCwzMSw4NywyMjcsMTU0LDkxLDE5Niw2MywxMjMsMTExLDEyNSwzNiw1Miw1NywxNjgsMTEzLDE1MCwxODksMjA0LDI0LDEwNCwxOTYsMjM3LDg2LDE2Myw2OCwxOTcsMjAyLDE3MCwyMTIsMTkxLDgxLDE5MywxMTEsMjU1LDE2MiwxODEsMjAyLDE1NiwxNDYsMTk2LDk2LDE2LDExOCwxMTcsNTUsNzEsMTU2LDMxLDE2MywyNDIsMjA0LDIzOSwxMSwxNTAsMjcsMTI2LDExNSwxNTQsMTA3LDI0NywxMzQsMTU4LDEyNSwyNTUsMTQ2LDM1LDE4MywyMDksMzYsMTE2LDg3LDIxNSwxNzIsNSwyNTEsMTMzLDExNCwyNTQsMTQxLDE5NSw2LDE0NSw0LDExMSwxODIsMTY3LDc0LDE1NCwxNTIsNjgsMTgsMTQ2LDg4LDEwNiwyMDAsMTU0LDE1LDE3Niw5NCw4Niw2NiwxNzgsMTAxLDIxOSwzNSwxODgsMTI5LDY2LDI4LDQxLDExMCwxNzQsNTMsODgsMTc0LDY0LDE5MSwyMDYsMTI3LDQ4LDEyNiwyMTQsMjE2LDkzLDExOSwyLDE2Niw5OSwxODEsMjIyLDI5LDIxOCwyOCwxOTUsMjE5LDEyNSw0NCw1MCwxNiw5OSwxNzQsMjI1LDUxLDEzMywxMjAsMTg0LDE1OSwxNjgsNzUsMjQyLDE2MiwxMjQsMjU1LDgxLDI1LDE1MywxMDksNjksMjIwLDE3Niw0LDIzNywxOTYsMjMzLDE5LDgsMjQwLDE2MCwzOSwxMjIsODEsMjksMTg4LDE0NCwyNDksMTcwLDE3NCwxMzcsMzAsMTAsOTMsMTMzLDE1MSwxOTksMjQ4LDE3NSwzOCw0MSwxNDQsMjI5LDI0NSwxNDksMjUsMjQwLDEzOCwxNzksMTE0LDE4Miw4NCw1MCwxMDMsOTUsMzEsMTk5LDMxLDg3LDIwOCwyMDMsMTk5LDEzNSw0OSwyMTEsNDMsNTIsMzYsNzQsNTksMzcsMjIsMTM2LDE3MSwyNDQsMTI2LDE4LDI1MSwzOSwxNTksMjQxLDY2LDIwNiwxMjcsMTQ5LDE1OSwxODIsMTQzLDIzMiwxOTksMTM2LDQ2LDE1MCwzMiw1MSwyMjEsNzQsMjIsMTAyLDkzLDIyLDQ0LDEzMiwxNDAsMTk5LDQzLDY5LDI0OSw3Nyw3NSwxNDAsNzAsNCwyNTIsOTgsMjM1LDc3LDE5MCwxMjUsMTgsNTYsMjEsMTAsMjQ0LDQyLDIsMjQ2LDYyLDEyNywyNDEsMTIzLDEzNywyMiwyNDcsMjE5LDE3NywxNjAsODQsMTgsMTAsODQsOTcsMjUxLDEyNywxMDIsMTYsMjA5LDE4MSwxMDAsOTQsNTYsMjM4LDIwOSwyMDcsNzYsMTg5LDk1LDE1LDE2NSwxMzksMTQzLDE4OSw5NiwyMjUsNTUsMTEyLDE3OCwyNywyMTgsMTk4LDIyMywyNTEsNTIsMTIzLDk0LDEzMCwyMjAsMTQyLDIxNiwxMTYsMjM3LDE4LDI1NCw0OSw1OSwxMjgsNDEsMjksMTUsMTc5LDE2NCw4NSw3NiwxNjcsMTY2LDE1MSwzOSwyMjEsMiwxOTAsNjgsMTY3LDI2LDE3NywxMTQsMTQxLDQsNjcsMjUsNjksMTgyLDM4LDE2NiwxNjAsMjcsMTUxLDE0OCwxMDgsNDgsMjI3LDYwLDExMiw0OCwyMiwxNTksNzYsMTI3LDI1MSw2MywyNTQsMTc3LDExMywyMTcsMTk3LDk1LDE3OSwxMDksMTI4LDEzOCw5OSwyNywyNDksMTAsMTc0LDE1NSwxMjksODAsMzksMTY1LDI1Miw4NSw2MCwxMzEsMTgzLDk4LDEwNyw2OCwyMDcsMTksMjMzLDIzMSw1NSwyMjUsMTI2LDc3LDQ5LDUzLDE0NSwyMDMsMTEzLDI5LDIwOCw2NCwyMzcsMTgyLDIyOSwxNjUsNywxMSwxNjksMTA2LDI1MywxMTYsMTQxLDIwMCw2MiwxNiwzOCwxMjEsNTUsMTQ4LDkxLDgzLDE2MCwxNDAsMTI2LDEyMSwxMiw3OSwxODksNzIsMTcyLDMxLDI0MywyNDAsMjA5LDIyOSwzMiwyMjAsOTEsMjI5LDgxLDk0LDI0NywxMjEsMTUzLDE1MSwyMzIsMTgyLDE3MSwxOTgsNTAsMzEsMTUyLDI0NSwxNzIsMTUxLDEzMCw1NSw2MiwxMjUsMzgsMTU1LDIyOSw3OCwyMDcsMTQ4LDIwMSwyLDc4LDYzLDExOSwxMDcsMTY4LDc4LDEzOSwxNDEsMTYzLDE3NywxOTEsMjM5LDE0MSwzOSwxODIsMTc0LDQwLDc2LDIyNiw2MiwxMjUsMjA5LDYsNiwzNCwzNywxNDcsODUsMjA0LDEwMyw1MSwxOTEsMzYsMjQ4LDE3LDE3NSwyMCwxLDUzLDE2LDM1LDE0MywyMzcsMTc3LDEyNSw4NiwyOSwyMTksMjM1LDIwLDEyMSwyMDUsNTksNSwyNTAsMTA3LDEwOSwzMiwyMjQsMzAsMTUyLDE0MywxMTMsMTUxLDk1LDg1LDE5LDI1NCwxNjQsMTM1LDEyNCw2OCwxMzYsMTk5LDI5LDMxLDI0NCw5MSwxMCw4NCwxMjcsMTAxLDIxMCw3MCwyMjYsMTk1LDE0MCw3MCwxNjYsNTQsMjE3LDE2NSw4NCw0MiwxNjUsMTc1LDEwMCwyMzQsMTI0LDEyMSwxMDUsNTMsMTAxLDExOCwxNzQsMTAxLDIyMCwxNDcsNjgsMTYxLDM3LDAsMTgyLDIyMCwxNDIsMjIxLDE1NSwyMzAsMTE1LDE2NCwxMCwyMTQsMjA4LDEyMCw5MSwxNTIsNjYsMjcsODEsMTg0LDQ4LDg0LDcwLDcsMTI4LDE1MywyMTcsMjE4LDI0OSwyMjYsNzAsMTMwLDIwMCwxNTYsNjEsMjI3LDIxLDE2NCwxMzcsMTkzLDIyMSwxMTksMTAsMTM0LDIwNCwyMywyMCwxNyw5MCw5NCwxMDUsMjA0LDM5LDk5LDEsNjQsMTUzLDQ1LDIxMywxOSwyNDcsOTcsMTk0LDQ5LDM1LDEyNSwyNTUsMTk1LDEzOSw2MywyMDksMTc1LDIwOCwxNDcsMTg5LDI0NCwyMDQsMjQsMjExLDk5LDE0MiwxOCw5MiwxMzAsMjU0LDE4MiwyMzEsMjM1LDkzLDEwLDEyNywxNzUsODcsMzUsNjIsMTEwLDEzNywxODQsMzksMTE0LDIwMCwxNTAsMTEsMTkwLDQwLDE2MiwxNjgsMjIzLDIwMywxMTAsMjQyLDE5MiwyMzQsMjYsMTEsNTQsMTU1LDM4LDQ4LDc5LDEwOSwxMDEsMTE5LDE2NSwxODcsMjIzLDUsMjAsMTY4LDE3MSwyNDEsMjAsMjQzLDEwOCwxOTksMywxNTUsNjksMjQ0LDE0OSwwLDE4NywxMTAsMTIsMjMzLDQyLDE1MSwxODksMTM5LDEzMywxMDQsMywzMCwxNiwyMDAsNjksNCwxMjMsMTAzLDE0NCwxMiwxMDYsMTgyLDEsMTI3LDkxLDEyNSwxNTgsMTIsMTQ0LDIzOCwyMzIsMjA5LDEwMSwxNTksNTYsMTYzLDI0MCwxNzksNTAsMTY5LDEyMCwyMTksMTc2LDg3LDc3LDQ1LDI0NywxNTMsMTkwLDgyLDEzMiw1MCwxMzcsMjA5LDk3LDE5LDM1LDI0NywxNjEsNjIsNzcsMTYsNzEsMTUyLDcyLDYxLDUwLDk5LDE1NywxNTQsNTYsNTgsMTc1LDI3LDczLDEyMSwyMjksMTk1LDIyOCwxMzIsNjksMjMzLDE2OSwxMDAsMjEsMTIzLDE3LDMsMTY0LDYsMTQ2LDEwNiwxOTYsMjksMywyNTAsMjE3LDE2NCwyMywxNzEsMjAzLDE0LDI0MiwyMzksMjQ5LDE2OSwxMTYsMTM4LDIwOSw5OCwxMTMsMTgxLDEyMiwzNSwxNjIsMjE2LDQ2LDIzMCw0LDE1NSwxNDIsMTE4LDIxNiwyMzIsMjI5LDI4LDEyLDE1OCwxNTMsMTI2LDE0OSwxNzEsMTcyLDIzMSw5OSwyMTEsNTcsMTE0LDEzNiwxODMsMTE0LDc0LDM1LDIzMywxMTUsMTI3LDI1MywxNTcsMzgsNDksMTM2LDE0MSwyNSwxNjEsMjU1LDIzMiwxMTAsMTAxLDIwOCwxNjYsMTg2LDIyNiwxMiwxODUsMTksMTU1LDUzLDkzLDE1NSwzOSwxNjEsNywxMjQsMjEzLDUyLDIyMywxMjUsMjExLDI0MiwyNTMsMjIsMTMsMTMxLDExNSwxNjcsMTk4LDE4OCw5MCwyMDksNjMsMjI0LDkyLDExMiwxMTgsMjIwLDE2NSwzMSwxNjQsNDMsNTgsMTk3LDc3LDE3LDI0Nyw3NywxNjQsNzQsNzcsMjE4LDE4LDE4Nyw0MSw3NiwxODksMTI3LDk4LDE4LDIyNiwyMzEsNzEsMTE1LDIzNiw2OCwxODMsMTExLDUwLDE2OCw4OCwyNDcsOSwxMjMsNjUsMTgwLDg4LDc0LDQ0LDEwMSwxMDEsMTczLDExXTtmdW5jdGlvbiB5ZShlLHQsbil7dmFyIGk9ZS5nbCxhPTEvdCxyPTEvbixvPTU7dGhpcy5wcm9ncmFtPVNlKGksSWUpLHRoaXMuc2V0VW5pZm9ybXM9ZnVuY3Rpb24oKXtpLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2ltYWdlXCIpO3ZhciBlPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfZmxpcFlcIiksdD1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X3NpbmdsZVN0ZXBPZmZzZXRcIiksbj1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2Rlbm9pc2VMZXZlbFwiKTtpLnVuaWZvcm0yZih0LGEsciksaS51bmlmb3JtMWYobixvKSxpLnVuaWZvcm0xZihlLDEpfSx0aGlzLnNldFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5kZW5vaXNlTGV2ZWwmJihvPWUuZGVub2lzZUxldmVsKX0sdGhpcy5zZXRTaXplPWZ1bmN0aW9uKGUsdCl7YT0xL2Uscj0xL3R9fXZhciBUZT1bMTEsMTk2LDI0MiwxMzksMTk4LDI1MiwxODgsNSwzMiwxNjIsMTcxLDEyOCwxMywxNjAsMjUsMjIyLDE3MiwxMDIsMjA3LDI0NCwxNTgsNjksMTAzLDU3LDIzOSwxMTEsMTUwLDE4LDE1Nyw4Miw1NSwyMTAsMjAsMTMxLDE1NiwxNjUsMTA4LDEyMiwyNTQsMTI1LDEzMCwyMjksNTUsMTA5LDExMywxMSwyMTAsMjM4LDE2MywyMTMsODYsMTE2LDE1NiwyNDgsMjE1LDYzLDIwLDQ4LDE3MywzMSw1NSwxMzMsMTgsMTA1LDMyLDE2LDIwNCwzNSwxMjgsMzgsMjEyLDg3LDIwMCw5NywxMTQsNDAsMTIsMjEwLDE5MywxNzEsNTksMzMsMTU4LDEwOCwxNCw3NSwyMjgsNzQsNjUsMzIsNTcsMTkyLDExMiwxNTYsMjM0LDI1MCwxNDAsMTg5LDQwLDIwLDYsMjMwLDEzNSw1MiwxNywyMDAsMTIzLDY4LDE4Myw0NCwyMTUsMTg3LDIzNCwyLDEzLDE2OSwyMzQsOTQsMTE1LDYwLDYsMTA3LDIyNCwxMTgsMjU0LDg4LDIsMjM1LDEzNCwzNiwxMjAsNSw4NSw5NCwxMjYsMjIyLDIyMywxMDEsMTA1LDIyNywxNDcsMTk5LDY0LDE4NSwyNDYsMTQzLDE4MywyMTAsMzAsMzcsMTI3LDIyNiw3OSwxNTYsMTE4LDE0NywyMDgsMTMxLDUxLDI0OCwyMzIsMjE3LDIwNiwxODEsMjE4LDU4LDYxLDExMiwyNDQsMjI3LDY4LDQ1LDQxLDIwNiw2OSwxMiw0NSwxNjMsMjA1LDc1LDYsMjMsMTY3LDE0NSwyNTAsMjM3LDkyLDg0LDE2NCwyNDAsMjUzLDIxNiw1NCw4NSw3LDEwOCw2MiwyNTUsNDIsMjE3LDMsMjcsMCwxOTYsOTQsMjgsMjQxLDEyMCw4MCw5Miw4OSwxMzUsMjI4LDEyNSwyLDMsMjQyLDM5LDExNiw2NCwyNDgsMjE2LDE3NywxMjIsNjYsMTc4LDE4MCw5LDcsMzMsMTg2LDIwOCwyMTMsMTg4LDU5LDc4LDI0Myw5NSwxMjMsMjgsMTQyLDQ1LDk5LDEzMCw3LDE2NywxOTQsMTU2LDIzOCwxOTksMTAsNzEsMTQxLDI1MSwyMjEsMTU4LDE2LDI1NSwzOCwxODEsMzYsMTg0LDIwLDEzNiwyNDAsNTUsMjcsNTEsMTkxLDgyLDEwNSw1NSw5Nyw3OCw3NCwxMjEsMTkxLDE2MSw5MSwxMjYsMTA1LDEwMywxNzQsMTM5LDIyMywxNDUsMTUwLDEyMCwxNTYsMjQwLDI1MiwxODIsMTA1LDEwNCwyMDUsNjUsOTcsMTI5LDE5NCw2OCwyMTgsOTEsMTQxLDExLDIyNCwxMjQsMTMyLDEzOCwxMTksMzYsMjAxLDIxMSwzOSwyMDMsMTQ2LDIyNSwyNDYsMjUyLDIxLDE2MSwyNTAsMTg4LDEzNywxOTAsNDIsNCw5MCwxMjYsMjExLDE3MSwyNDAsMTEzLDY3LDI4LDkyLDU3LDc3LDIwMCwxMjUsMjI0LDE5LDE3OCwxNDIsMTEyLDIwMiw1LDIzMywyMjksMTI4LDIzNSwxMDUsMjM5LDEwMiw1MiwxNzksMjI0LDg3LDQ1LDY4LDIxMSwxMCwxODcsOSwzOCwxOTAsODYsMjUsNDMsMTc1LDU2LDIzMSwxMSwxMDgsMjIwLDM2LDEyOSwxMzEsMTksOTMsMTYzLDIzOSwxNjksMTE4LDIwNSw1MCw3NywxMjEsMTM5LDEzOSwxNDEsMTk3LDE3MCwyMCw0NCwzOSwxOSw5NywyMDUsMjI4LDgsMTA2LDY3LDIxMCwxMzUsMTExLDEyNywxNDEsMTg1LDE3NSwxMjMsMjYsMjI2LDQyLDI5LDIxNywxNiw5OSw5LDQ2LDE1NywyMzIsMjIsMywxMDUsMTc0LDczLDE0NCwyMywxMTAsNTUsODQsNDYsNCwxMTYsMzksMTEzLDIwNSw1OCwxNTgsMjQyLDcsMjA4LDc1LDE2Miw1NSwxMTUsMzUsNTIsMTI0LDIzNSwxMTQsMTc4LDU1LDQzLDk4LDE3LDEwMCwzMywxMzQsMjM3LDE5MCwyMzAsNjAsMTg0LDE5MiwxMDQsMTQ2LDUyLDU4LDc5LDE3NCwxODAsODEsMTU1LDExNCwwLDE1MywxMTMsOTAsNTEsODYsMTUwLDI1NCwxMzYsMjA1LDEwNCwzOSwxMSwxOTAsMTg3LDIzMyw4MCw4MSw4MSw1NiwxOCwyMjIsMTQ4LDExNiwxNTUsMTU2LDMzLDEzMiwyMjYsMTI3LDg0LDM0LDgzLDI4LDI0OSwxNTMsMTgsMTk3LDEwLDExNiwxMDIsMTI1LDQ1LDQ3LDM2LDIzNSw0NiwyMTIsMTY2LDIwOSwzLDEyNSwxMzIsMjM3LDEyNCwxNjMsNjgsMTk3LDIwMiwyMzIsMTUyLDIzNCw3NSwyMzUsMTAzLDI0OCwxNjAsMjQxLDIxMywxNTEsMTQ0LDEzMCwzNywyMyw1MSw0OCw1NSwxMiwyMjcsMzEsMTYzLDI0MiwyNTEsMjQ1LDIyLDEyOSw3NywyMCwzNSwxNTAsMjAsMTgxLDIwMywxMzgsNjksMjMzLDIxNSwxMDksMTc4LDIwOSw1Miw4NSw5NiwyMjEsMTc5LDU2LDI0OSwxMzgsMTExLDI1MCwxNDEsMTM0LDk1LDE1Miw5MiwxMDksMTgzLDE3NCwxMDQsMTUxLDE1NiwzMSw2NiwyMTEsMTAsNTcsMTQxLDE2NywxOCwxNzcsMjcsMTI2LDc0LDI1MiwyOSwxNDMsMTIxLDE3MywyMDMsOCwyNyw0NCwxMjMsMTQ4LDU3LDg4LDE2Myw2OCwyMjgsMTU4LDYyLDk4LDEyMSwxOTIsMjI4LDk0LDkyLDcyLDI0MSwzMywyMzAsMTczLDAsMTk3LDEsMTk0LDE0NCwxMTEsOTEsNjAsMCwxMDYsMTgxLDIwMyw1MSwxMzMsMTIwLDI1MCwxNTgsMTg0LDkzLDIxNiwxODQsMTI2LDI1MywyMSwyMiwxNTUsOTksODAsMjA1LDIyNyw2OSwyMzEsMTQxLDE2NSw3MSw3MCwyNTIsMjIzLDEwNSw1MSw5MywyMiwxNjUsMTM1LDIzMywxNzcsMTY0LDEzOSw1Myw1LDg1LDE1MSwxMzQsMjE0LDE2NSwyNDksMTAwLDI0LDE4NiwyMDcsMjQ1LDE0OSw2OCwyMTgsMjA0LDI1MiwzMiwxOTAsOTAsNDgsNzYsNTcsMzEsMjAxLDE1LDUyLDEzMCwxMzUsMTUyLDIwNiw2MywxOTgsMTAwLDEyNiwzNiwyLDEwNCwxMTYsMCwxNjAsMTYzLDE4NiwyLDkxLDE2NSw1NywxNDksMTYzLDEyLDIzOSwxMjEsMTUyLDIwOSwyMjQsMTM2LDI0OCwxMzUsMTM2LDQ2LDE1MCwzMiw1MSwxNTQsNiwxMDUsMCw3MSwzMCw0NCwxNzUsMTQ3LDEzOSwzNCw5MSwxODQsNzgsMzEsMTQ1LDE4LDMsMjUwLDEyMiwxNjYsNDcsMjUyLDEwOSwxOSw0MCwxMCwxMjMsMTYzLDk5LDc2LDEzMywxMTksMzcsMTgwLDM4LDIwNyw3OSwxNzEsMTg1LDE4OF07ZnVuY3Rpb24gYmUoZSx0LG4pe3ZhciBpPWUuZ2wsYT0xL3Qscj0xL24sbz01O3RoaXMucHJvZ3JhbT1TZShpLFRlKSx0aGlzLnNldFVuaWZvcm1zPWZ1bmN0aW9uKCl7aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9pbWFnZVwiKTt2YXIgZT1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2ZsaXBZXCIpLHQ9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9zaW5nbGVTdGVwT2Zmc2V0XCIpLG49aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9kZW5vaXNlTGV2ZWxcIik7aS51bmlmb3JtMmYodCxhLHIpLGkudW5pZm9ybTFmKG4sbyksaS51bmlmb3JtMWYoZSwxKX0sdGhpcy5zZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUuZGVub2lzZUxldmVsJiYobz1lLmRlbm9pc2VMZXZlbCl9LHRoaXMuc2V0U2l6ZT1mdW5jdGlvbihlLHQpe2E9MS9lLHI9MS90fX12YXIgUmU9WzExLDE5NiwyNDIsMTM5LDE5OCwyNTIsMTg4LDUsMzIsMTYyLDE3MSwxMjgsMTMsMTYwLDI1LDIyMiwxNzIsMTAyLDIwNywyNDQsMTU4LDY5LDEwMyw1NywyMzksMTExLDE1MCwxOCwxNTcsODIsNTUsMjEwLDIwLDEzMSwxNTYsMTYwLDk2LDEyMSwyNTUsMTIwLDIwNywyMjcsMTE0LDEyMCwzOCw3MiwxNDksMTQ1LDE2NSwyMjcsNzUsMTIyLDE1OCwyNTAsMjMyLDQ2LDM0LDUyLDEzNSw5LDMwLDE0NCwxNywxMTAsMTI2LDExMCwxMzAsNzEsMTU2LDQ2LDIxMCw2NywyMDIsNTEsMTE5LDk3LDMsMjExLDIxNCwyMjcsNDUsMTA5LDE1MSw5NywyMSwxMCwyMjksNTMsODAsMjYsNTEsMjAyLDExOSwxMjgsMjMwLDE5NywxNDAsMTM1LDQwLDE0LDg4LDEyOCwyMDIsOTUsMjEsMjA4LDk2LDgzLDE4NSw5OCwyMTYsMjQyLDIyNCwxNSwyNSwyMjQsMjMzLDg2LDk2LDQ2LDgwLDEyMCwyMjAsNDgsMTg3LDg2LDMwLDI0MCwxNDAsNDYsOTUsODEsNDgsOTAsMTE3LDE0MCwxNzcsNTEsMTA3LDIzNSwxNTgsMTM3LDUsMjQxLDE5MSwxNTQsMTQ5LDIxOSwzMCwxMjYsODUsMTc1LDEwLDIxNiw2MywxMzksMjE2LDE1MSwxMjIsMjUxLDIyNCwyMDIsMjIwLDIyNywyMjEsNTMsMTIyLDM0LDIxMywyMjQsOTQsNDUsMTQsMjAwLDY4LDMxLDYxLDE3NSwyMDgsMTcsMTIwLDgyLDI0NCwxMzgsMjA4LDE2NSwyMSwxOSwyMzYsMjMyLDE4MCwyMTcsNTAsNzQsNzAsMTI2LDExNCwyMjcsNjIsMTkyLDEyNCw5LDg1LDE0OCwzMyw3NywyNTUsMTE3LDc1LDEwMiw4NywxNTEsMjU1LDg3LDc0LDc0LDE4MSwxMTEsMTA4LDksMjQ5LDIyMCwxNzQsNTksODAsMjU0LDE2OCwyOSwzMCw5NCwxNzEsMTMzLDEzMywxOTUsMTA1LDY0LDI1NCw2OCw2NSwxOCwxNTgsNTQsNzMsMjAzLDY1LDE3NSwxNTEsMTcwLDIzNiwxMzgsMTcsMTE5LDEyOCwyMzcsMjE0LDE4OSwyOCwyNTAsMzgsMTQ5LDk3LDI0Miw4MSwyMTIsMjU0LDU3LDE4LDEyMCwxNTUsNjQsOTYsMTA4LDc1LDc4LDc0LDEyMSwxOTEsMjQzLDMwLDQyLDYwLDEwMywxNjUsMTk2LDE2MCwxOTUsMjE2LDk5LDE4MiwxNzMsMjE0LDE4MiwxMDUsNTMsMjMxLDMsNDUsMjEyLDE0NCwxMDEsMjE3LDY1LDE0MSw0NCwyMzAsMTI1LDE1MSwxNTQsMTIzLDU3LDEzNCwyMjMsOTgsMTMzLDE1NiwyMzgsMTM3LDE4MSw4MCwxNzUsMjMwLDE2NywxMzEsMTgwLDEzLDY5LDc3LDQ0LDE1NiwxNjUsMjUyLDE0LDI3LDg1LDcxLDEsODIsMTk2LDY0LDI0MywyNiwxNjcsMTQ2LDk4LDIwMSw2LDE5NSwyNDcsMjAwLDIyNCw0NCwxNzcsMTA0LDEwOSwxODcsMjMxLDgzLDExOCwyOCwxNTksOTIsMTc5LDI4LDE0LDE2Miw4MSw4NCwyMSwxNjgsMzQsMTU2LDIxLDEyNywyMTUsODgsMjE4LDIwOCwxMSw5MiwxNjEsMjM5LDIzOSw4MiwyMjEsNTksODYsODMsMjAxLDE5OSwyMTYsMTUxLDEzOSwyMyw1NCwzOSw1MiwxMDMsMjA0LDI0NywyNCwxMDIsOTQsMTU3LDEzOCw0Miw0OSwxMzEsMTgzLDIwOCw1MCw5NSwyMzYsNTQsNiwyMTEsMjYsNjgsNzIsNTYsMjEyLDEzNCwyNCw5MSwxMTQsMTMyLDEsMjE3LDgwLDM4LDQ3LDI5LDQ3LDAsMTA3LDEwMiw5OSwxMjksMzMsMTQwLDI0Myw3NCwyNTEsODksMjQ3LDEwMywxMiwxMTQsNTgsMTEzLDI0MCw3MiwxODgsMzksNDgsNzIsODksNDUsMTAyLDIwNiwyNDUsMjQ3LDIzMSw1NiwxNjcsMTI5LDEyMiwyMjIsNDcsNDAsNzgsMjI3LDE1OSw2NCwyMDYsMzQsMTI3LDIwMywxMjcsODcsNDAsMTA4LDE1MiwyMzgsMTQ3LDIzMSw0NiwxMDQsODksMTgyLDE4MCwyMzIsODYsODksOTEsNTcsMTAsMjIyLDIwMiw1OSwxOTksMTM1LDYwLDE5OSwxODksNDAsODQsMTI1LDI4LDg0LDE2MiwyMTAsOTEsMTQzLDM0LDEwNiwxMTcsMTE4LDMsMTI1LDEyNiwyMzcsNjAsMTMxLDE3MywxNTMsNjksNDksMjEyLDIwNCwxMTcsMTYzLDMxLDIzOSwyMDIsMjMyLDE1MiwyMzQsMywxNjIsMzIsMTc2LDE4NCwxODQsMTk2LDE1NCwxMzEsMTQ0LDExNSw2LDUzLDEyMiw1NSw2OSwxNjYsMTksMjMwLDE4MywxNzUsMjQ0LDEsMTU2LDExLDM3LDEyMSwxMzQsMTIxLDE1MiwxNDIsMTU4LDEyNSwyMjksMTUwLDQ0LDE4MywyMTYsMTA5LDcsNjUsMjIyLDE2OSw1NiwyMjIsMTQwLDExMCwyMzMsMTU3LDEzOCw2NiwyMDgsNiwxMTEsMTY2LDE4OCw3NiwyMDgsMjIyLDQsMTA0LDIxMSwxMCw1NywxNDEsMjQzLDY1LDIyOCw4Niw4NSw4OCwxNjksOTEsMjM3LDU2LDI0OSwxMzMsNzcsMjEsMzIsMzcsMjMwLDU1LDAsMTg0LDExMCwyMjgsMTU4LDYyLDk4LDQ1LDE0NywxNzcsMTksMTE5LDg5LDE2NCwxMDMsMTMyLDIzOSw4NCwxMzksNjgsMjA0LDE1Nyw0OSw0MSw1MCw4OSwxMTMsMTU5LDIwMyw1MSwxMzMsMTIwLDE4NCwyMTAsMjM3LDE1LDI0OSwxODcsMTAwLDI1Myw1MCwxNiwxNTQsMTEyLDY0LDE5MywyNTQsMTAsMjM1LDIwMCwyNTMsODQsMzEsMTY5LDE3MSwzOSwxMjIsNzAsNDYsMTg2LDEzOSwyMTIsMTYyLDE3MywxNTgsNDEsMjMsODYsMTQ4LDE3MiwxOTYsMjM3LDI0Miw1OCwxMDIsMTgwLDE1MCwyMzgsMTkxLDI1LDI0MCwyMDQsMjUyLDEyNSwxNDgsMjksMTI0LDUxLDk1LDEwLDE5Niw1NSw0OSwxNTksMTM4LDE0NCwyNTUsMTI2LDIwNSw0Myw0OSw0MiwxNyw1OSw2MCw3NywxMzksMTc3LDIzOSw2NCwzNiwyMjQsOTgsMjA1LDIzNCw3MCwxOTksMTAzLDEzOSwyMTgsMjA2LDIwNywxNzgsMjE3LDI1NSwzMiwxMzQsNTksMjUsMjIxLDc0LDIyLDEwMiw4MiwxOSwyMCwxNzAsMTQyLDEzNCw0MiwxMDYsMjQ5LDY0LDgwLDIyMiwyOCwyMSwxNjksNTAsMjM1LDQsMjM3LDU2LDgxLDg3LDc2LDMyLDI1MSw0Miw2LDE3MywxMDUsNTQsMTkxLDgsMTM2LDUsMjQ1LDIwNiwyMzksMTc2LDksMTE2LDI0XTtmdW5jdGlvbiBBZShlLHQsbil7dmFyIGk9ZS5nbCxhPTEvdCxyPTEvbixvPTU7dGhpcy5wcm9ncmFtPVNlKGksUmUpLHRoaXMuc2V0VW5pZm9ybXM9ZnVuY3Rpb24oKXtpLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2ltYWdlXCIpO3ZhciBlPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfZmxpcFlcIiksdD1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X3NpbmdsZVN0ZXBPZmZzZXRcIiksbj1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2Rlbm9pc2VMZXZlbFwiKTtpLnVuaWZvcm0yZih0LGEsciksaS51bmlmb3JtMWYobixvKSxpLnVuaWZvcm0xZihlLDEpfSx0aGlzLnNldFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5kZW5vaXNlTGV2ZWwmJihvPWUuZGVub2lzZUxldmVsKX0sdGhpcy5zZXRTaXplPWZ1bmN0aW9uKGUsdCl7YT0xL2Uscj0xL3R9fXZhciBPZT1bMTEsMTk2LDI0MiwxMzksMTk4LDI1MiwxODgsNSwzMiwxNjIsMTcxLDEyOCwxMywxNjAsMjUsMjIyLDE3MiwxMDIsMjA3LDI0NCwxNTgsNjksMTAzLDU3LDIzOSwxMTEsMTUwLDE4LDE1Nyw4Miw1NSwyMTAsMjAsMTMxLDE1NiwxOTAsMTAwLDExMiwyMzAsOTcsMTk5LDIyNSw5Niw3NCw5OSw5NCwyNDgsMjIyLDE2MiwyMTMsOTUsMTIyLDE1OCwyMTIsMjMzLDQyLDIyLDM3LDIxNywxMTUsMzYsMTUyLDMwLDEyMywxMTYsMTA0LDIxMiwxMDksMTI5LDQxLDIyMCw3NywyMTMsOTcsMTI0LDQ1LDQsMjE5LDE5NywxNzEsNDAsMTgsMTQ5LDEwNCwyMCw0LDI0OCwxMDIsNjQsOSw1MCwyMTcsMTI0LDEzMSwxODAsMTg4LDE1OSwxNzAsNjMsMSw4NCwxMzAsMTUwLDExNywxNCwyMTIsMTE4LDY3LDE2NSw5NywyMDcsMjQyLDI1MSwxNSwzMCwxODcsMTg4LDc3LDc5LDEyMiw2NywxMDEsMjUyLDEwOSwyNDQsODIsMzcsMTkxLDIyNywzNSwxMTQsODcsNTcsNzEsOTksMjE4LDE1NSw1NCwxMDEsMjM5LDEzOCwxOTcsMTMsMjI2LDIyOCwxNzYsMTU3LDE1OCw4Nyw5OCw1NSwyNTEsNzksMTUwLDY0LDEzOCwyMDAsMTM1LDQwLDEzMiwxMzUsMjA3LDE0NiwyNTIsMjIyLDU3LDU4LDExMSwxNTEsMjI1LDc4LDU5LDM2LDIxMCw3MCwyOSwxMjEsMTYwLDIxMCwzMSwxMDksNjcsMTY3LDE5NCwxNzcsMjM2LDkxLDEwOCwxNjQsMjI5LDEzMCwyMTEsNTksNjYsOTMsMTgsMTA3LDIyNiw1NCwyMTAsNTEsOCw3NywyMTcsMTksNzMsMTg3LDMzLDMwLDU5LDksMTM1LDE2Miw0OSw1LDExLDIyNSwxMTEsMTE5LDExLDI0NywyMTgsMTI5LDExNSw4MywyMDUsMTcwLDIxLDQsNjksMjEwLDEzMywxMzQsMjQ1LDEwOSwxNSwxNzcsOSw4MSw4MSwyMDMsMTA1LDQyLDE1OCwxMiwyNTUsMTUxLDE2NSwyMzAsMjA1LDUsOTIsMTk2LDI1MSwyMTEsMTg3LDI3LDIxNCw0MywxODYsOTEsMjMzLDg1LDE5MiwyMjksMTUsNzEsMzgsMjIwLDIwLDM4LDEwMSw0NCw3OCw3LDYwLDI1MSwxODYsNzUsMTAzLDEwOCw1MywxNjYsMjIwLDE4NiwyMDgsMTk0LDEyMCwyMDcsMjMwLDE1OSwyNDgsMjIsMzIsMTQyLDEyNCw5NiwxNTcsMjIyLDYwLDE5MSw2NSwxNDUsNiwyMzksMTI1LDE1MSwxNDcsNTAsNTgsMTMwLDIwNywxMTAsMTMxLDIyMywyMzEsMTM3LDIzOCwyOCwxODIsMjE2LDE2NywxOTgsMTkxLDM3LDY3LDc2LDEsMTQ0LDIzMiwyMTgsNzksNzIsMjgsNjUsMTAxLDQzLDIxNiw2NCwyNTMsMTYsMTczLDE3OSwxMjMsMTQwLDI3LDIzMywyNDUsMTk5LDIzMCwzNiwxODEsMTAyLDExNCwyNDcsMTYyLDE4LDM0LDIwLDIxMiwyNSwxNzEsMjQsMjgsMTQzLDgwLDk0LDQwLDE2NywzNCwyMDksNjEsMTE3LDEzMCwxLDE5OCwxOTYsNywyMSwyNTIsMTgwLDI1NSw5MiwxMjgsMTE5LDksNDgsMTU2LDEzOCwxMzYsMTUxLDE0MywyMyw0NCw1MiwzLDQwLDE5NywyMjgsMzEsMTIzLDY3LDE2MywxNDAsMzIsNTQsMjA0LDE4NywxNDksODAsMTksMjU1LDgyLDEyMCwxOTUsMTIsMTEwLDY1LDU2LDIxMiwxNDMsMjIsNzgsNDQsMjM0LDcyLDE0MCwyOSwxMTgsMTAzLDE4LDM2LDcsMTIyLDUwLDM3LDEzOSw0NywxNDIsMjQzLDI1LDIwOCw4OCwyMzcsMTI2LDUwLDEwMywxMjcsMTksMTgzLDI5LDE2OSwyOSwxLDU1LDIzLDEwMCwzMiwxMjksMjM5LDI0MywxNjAsNjEsMTc4LDE5NywxMTcsMTk5LDQ1LDU3LDI2LDE2NSwxMzUsOTIsMjE4LDU5LDAsMTk3LDU0LDEzLDk2LDQwLDE0MSwyMTIsMjIxLDEzMSwxMDMsNDYsMjIsMjI4LDE5MSwxNjcsNzMsMjAsODYsNjIsMTEsMTQ3LDIxNywxMTYsMjA1LDIwMywxMTAsMTM0LDI0OSw1MSw2LDEyMywyMyw4NiwyMzEsMTU3LDgsMTQ0LDgzLDEyNiwxMTUsMTE4LDM1LDk2LDM2LDIyOSwzNiwyMjAsMjI4LDE0Myw3MSw0NSwyMjMsMTI5LDQ4LDIzNiw1LDE0NSwyMDIsMTg4LDIwOCwxODQsNzAsMjQxLDEwNCwyNTUsMTg4LDE4MSwxNDYsMjEwLDIwNiwxNDQsNTMsNzcsMTAxLDEyMCwzOCw4LDI0NSw4MCwyMzAsMTY1LDE2MCwxODMsODMsMjAyLDc5LDEyNyw1NywyMTQsMTI2LDI0MiwxNTAsMjA4LDQwLDIzOSwxNDgsMzUsMTYzLDIwMSw5Nyw3NCw3MCwyMTQsMTgxLDYzLDI0MCwxNDcsMzMsMjUzLDE0OSwxNDAsNzcsMTk3LDgyLDEyNiwxODksMjMxLDcsMTk2LDIxMiw4MCwxNCwxNTEsMjQsNTcsMTQ0LDI0Myw4MSwyMzQsNjYsMjQsMTksMjM2LDIsMTM3LDEyMSwyNDYsMTI5LDY1LDcsOTksMTEwLDE3NCw1NCw3NCwxODIsODEsMjM0LDE0MiwzNyw3MiwxMTAsMjIwLDI1NSw2NCwxMTksMTAsMTg4LDExMSwxOTEsMjI4LDEsMjA1LDksMjA0LDE0Myw1Niw2MiwxMjUsODQsMTA2LDIyNSwxMzEsOTcsMTkyLDQzLDI0MCwxNTcsMTYxLDc1LDE2OCwyNDcsNDQsMTc1LDY1LDgxLDE5Miw0OCwyMSwxNTcsMTY3LDgwLDE5MSwxMzAsMTYxLDc1LDg1LDE4NiwxNzQsNDIsMTE3LDEsNjgsMjUyLDIwNCwxMzgsMjU0LDIwMywxNTIsMjEsMTMsNjQsMTQ0LDE5NSwyMDcsMjM4LDIyOSw1NCwxMDMsMjQ3LDE1OSwyNDUsMjExLDg1LDE5MSwxNDEsMTY4LDMyLDIzNCw4NSw0NiwxMTgsMTIsNSwxOTksNCwxOSwyMTcsMjAzLDIwMiwxNTYsMzMsMTQzLDExNCwxMTYsNjAsNjYsNDAsNTgsNzcsMjA4LDIzNywxNzEsMjYsNzIsMTc1LDExNCwyMDUsMjQ4LDg3LDEzNyw2MiwyMTAsMTQzLDE1MSwxOTcsMTY3LDIxMCwyNDEsMTIyLDE1MCwxMDQsMTIyLDE1NCwyLDcwLDEwMiw4MywxOSwzNiwxNDEsMTM2LDE5OSw0Miw3OSwyMjksNzEsODYsMTk0LDEwOSwzMSwyMzYsODAsMTY2LDE3LDIzMCwxMDksMSw0MCwyOCw0NiwyMjQsNTYsMjAsMjMwLDQ3LDEwMCwyNTQsMTE2LDIwOCw3NiwxNjksMTU3LDI0MSwxNzUsMyw3MCw4NSwzMSwzOCwyNDUsNTgsMzMsODAsMTQ1LDIzNyw4LDIyLDcxLDIyNCwxNTgsMTU2LDMxLDI0OSw4MSw4NywyNDcsMjMwLDE5OSwyMzcsOTYsMTY3LDEyMyw2MywyNDMsNzksMTU2LDIwNiwyMDMsMTYwLDU0LDEyNCw2OCwyNTMsMjE1LDEzMiwyMzUsNTcsMTg1LDkyLDIzOCw1NSw1OSwyMTAsMTA0LDcxLDI2LDE4MywxODAsNzEsMTIsMjU1LDIyNCwxOTIsNjUsMTU0LDcyLDI0NCw4LDE2NCwxMCwyNDgsNDYsMjA3LDMwLDkyLDEsODAsMjQ0LDMxLDE4OSwxMzgsODgsMjE2LDIxOCw2MywxMDAsMjI3LDExNiw1NywxMTksOTQsMTM1LDUsMTI2LDI1NSwzMiwxOTEsMTYzLDYxLDIwOSwxOTQsODgsMjQ4LDExMiwxMzksMTczLDQzLDY5LDEzNCwzLDE2MCwxNTEsMTM3LDI1LDk4LDIzOSwxNjYsMTksMTIzLDIwOCwxODAsMzEsMTIwLDMwLDE5MSw3NSwxODMsMTc5LDEyNiwxODAsMTI1LDkyLDEwNywxMDUsMjA2LDEzOCwyOCw2NywxMzksMywxODgsMjMwLDE4NCwyNTUsMTIxLDEzLDE4MSw0NSwxNjAsMTE0LDIwMiwxOTQsMTIzLDg3LDU1LDEyNCw5NywxNjQsODIsOTUsMjMyLDIxNiwxMTcsNjIsNSw5MCwxNzYsODIsMTY3LDUyLDE2MCwxNTMsMTc0LDE2OCwxMDUsMTQ2LDkxLDI0OCw4MSw3OSwyNDksOTcsMTM4LDEzMywxNzAsMjQ1LDIyOSwxMzIsNjEsNSwxNDksMjI0LDI0NiwxOTQsMjEzLDYxLDEyLDEwOSw0NCwxMzYsMjM1LDk1LDIxOSwxMzMsMjIwLDI3LDkzLDM2LDkzLDEyNCwxODAsODEsMTQxLDE1MiwyMjAsMTcwLDE2MywyMjksMTk3LDEyNCwxNzEsMjMyLDQ4LDcwLDI1MSwxMDYsMTE5LDE1MCwyMCwxNiw0OSwxMTksMjQ3LDQyLDEzMiwzNiw3NiwyNTQsMTI0LDE3Nyw2NiwxNzUsOSwxLDM5LDkyLDEyNywxOTUsMTcxLDE5OCwzNCwyLDY0LDE0NCwxNzksNzIsNDAsMTUxLDExMCw4OSwyMjksNDIsMTI1LDMzLDIzOCwxNiwyMjAsMjI4LDUxLDIwMyw4LDEsNjgsMTQ1LDI1MywxMzMsMTE4LDkzLDE2MywxMjksMjIsMTMsMjQ4LDY1LDEyLDQsNjMsMTAxLDIxMCw3MCwxNzAsMTM4LDIwMywxNCwyNDYsNTQsMTk0LDE5NSwyNywxMDcsMjQxLDE3NSwzNSwxNzEsNDksNTIsMTA2LDEyMSw0NSwzNiwxNTIsODUsMjE1LDEzMiw3OCwxNjcsMzQsMTgsMTY3LDI0NSwxNTIsMTMzLDEzNCwxNzAsMTIwLDE4MiwxMCwxNDYsMTkxLDM3LDIsMjA1LDQ3LDEyNSwyMCwyMDMsNDQsODgsODEsMzIsMTUwLDIyMywyMjAsMjE4LDIzOCwyNTQsMzAsMjEyLDE2NywyMjEsMTE1LDE1Niw4MiwyMjYsMTM3LDIyMCwyMjEsOTcsMywxMzksMjAyLDMzLDksMjcsMjYsMTI2LDQwLDIxNSwyNSwxMjYsOSw4MiwyMDgsNDksMjE3LDE0LDE2MSw4MSwxOTYsNjEsNjAsODcsMjU0LDIxMywxOTQsODEsMjE2LDE2MSwxNTEsMjA5LDE2NiwyMjIsMjMwLDI0LDEyOCwxMTcsMTQwLDkyLDQsMjAzLDI1NCwxNzAsMjUzLDI0OSw4OCw5MCwxMTIsMjI2LDE4LDQ0LDEyMiwzOSwxNTgsMTU4LDU2LDY5LDIwNCwxNTksNSwxNzksNTEsMTk3LDIzMywxMzksMjE2LDEwMiwyMjYsMjA2LDI0OCwxNSw3OCwxMTIsMjE0LDEyNiw2NywyOCw0MCwzOCw5OCwxOTAsMTc4LDIwNiw2Nyw5NCwyNDUsMjU0LDE2MCwxMDEsMTc2LDMyLDE1NywyNiwxMzIsODMsMjUyLDIyOCw4NywyNDIsMzIsMTI3LDE2MCwxMTIsMjEwLDIyNCwxMzMsMTQ5LDExNSw0MSwzMCwxNiwyMDAsNjksODksODEsNzcsMTQ0LDEyLDEwNiwxODIsNzMsNTQsMjgsNTMsMTk1LDI4LDIxNiwxNzksMTc5LDEzNiwzNSwxNDEsMTAyLDIzNCwxNzcsMjQwLDM0LDE4NiwxMDYsMTQ1LDI0NSwzLDg0LDQ4LDI1MSwxNTcsMjQ1LDExLDIxNywxMTEsMjI3LDEzOCw0Miw2NywxMTQsMjExLDE3NywzNywxMDMsMTYsNzEsMTUyLDcyLDExNywxMjMsMzYsMjEzLDIwMiw1NiwxMjQsMjI3LDg0LDgsNDUsMjI5LDE0OSwxNjUsMjE0LDY5LDI0NCwxNjksNTUsNjgsNjIsOTQsMTA0LDIyOCw3NCwyMDUsMTIzLDIyMiwxNyw3LDE3MiwxNTgsMjI3LDc0LDIwNiwxNDksNjcsMTc1LDE3MSwyNTEsMTg1LDEyMSwxNTEsMjIzLDYzLDM1LDIyOSwzMiw0OSwxOTAsMjA5LDEyMCwxMzcsNjksMjEzLDIxNCwxOSwxNTAsMTg3LDE3NywyOCwxMiwxNTgsMTUzLDEyNiwxNDksMTcxLDE2NywyMzQsMTIwLDEyOSwxMDksMzIsMTU3LDE4MCw3NSw2Niw1NiwyMzMsMTE1LDEyNywyMzAsMTU3LDMyLDM0LDE0MywxNTYsMzEsMjMwLDE2OCwxNzQsMTI1LDExOCwxOTUsMjQ5LDI0MywxNjUsODEsMjQ2LDEwLDE0NCwxNSwxMDMsMTM5LDU1LDE3Myw3LDU5LDEzNiw2OSwxNzIsNTQsMTMyLDE2NSwxNDAsNzgsNzcsMjMwLDMzLDE2OSwxMjksMTg4LDcxLDIwOSwxMDksMTYxLDgsNTcsNTcsMTk5LDE0MywzMSwxNjQsNDMsNTgsMTMwLDEsMTEwLDE0NSwzMSwyMjksMTMsNDYsMTQ5LDk0LDI0NCwxMDYsNzYsMjM4LDEwNSwxMDcsMSwxODMsMTc3LDEwLDYxLDIyNSw5NCwxODUsMTE2LDU4LDE4Myw5NSwyMjUsMjIsMTE5LDE5LDI0OCwyOCwxMywxMjMsMTI1LDEwOCwxNTgsNjQsMTg0LDc3LDI0NSwxNTMsMTYyLDIxNywyMjcsMjA4LDQxLDE4NSwyMTEsMjM1LDQxLDE1MywxODEsNTQsMTY2LDE2NSwxMSwxNTQsNTUsMjEsMTg0LDIwOSwxOTIsMjQ5LDQ0LDE2NCwxNjAsMjksMjI5LDE1OSw4MiwxNTYsMTk4LDI0MSwxODMsMTE0LDgzLDEzNywxODYsMTUxLDE0OCwzMSwyMSwxOTcsMjE2LDE0NSwzMiwxMyw1MCwyMiwyNDEsMTM3LDM5LDcxLDI4LDE0MiwxNjAsMjE1LDEwNywyMjEsNDUsMjAyLDEwNCwyMjcsMTEwLDE4NiwxMiwxNTAsMTQ1LDI0MCw1MSw0OSw0NCwxOTYsMTE1LDIyNCwyMzgsMTQ5LDE4OSwxMzQsOTksNjcsMjQxLDYyLDE1NywyNDAsMTE0LDI0NywxOTUsMjYsMjAwLDE0MSw5NywxNDcsMjQ5LDIzLDE1MCwxNzQsMTAsMTMsMjE5LDgxLDczLDU4LDI0Miw5NiwyNTAsMjQzLDE1LDQ5LDIxOCw1OCwyMzAsMTA0LDI1MiwxNzUsMTUwLDEyMyw4NiwxODUsODQsOTAsMTk4LDYsMzYsMCw5OSw3MiwyOCwxNjYsMjM4LDExNSwyMzEsMTcxLDI0OSwxNzksNzEsMTc0LDY4LDE1NiwyMjcsMTcsMTk4LDc5LDczLDE0Miw5OSwxNDQsMjAsODAsNjIsODAsMTkxLDE0Miw0Niw3MSw5LDI0Myw2LDgsMjE0LDExNiw3MiwxOTAsMTA2LDE2MSwxOSwxODUsMTAwLDksMTg3LDY0LDk0LDg2LDIwMywxNzQsMTU2LDI0NSwyMjIsOTUsNTQsMzAsMTQ4LDE5LDExLDUwLDExMiw5Niw2MSwyMzcsMTU5LDE3Myw3LDE1NCwxMjcsMTc1LDc5LDQ4LDk3LDg5LDc4LDEyNiw2NiwxNzEsMjA0LDE1OCwxOTUsMjcsMjI2LDIwNSwyMjIsMTU3LDg5LDI1MSw5MCwxMjUsMzcsMjEyLDI3LDk3LDMsMTQxLDI0NywxNzUsNTAsMTIxLDcsMTg3LDY4LDE5NiwxODEsMjAyLDE2NywxODksNTcsODQsODEsMjIyLDIzLDI3LDg0LDEzMCwxNzYsOTgsNjYsMjQwLDIwNywxOCwyMywyOCwxNjMsMTYzLDE5NCw0NSwzNywxMjksMjAyLDE3MCw5NywxODksMCw4MSwyMzgsMCwzOSwxOTksMTYzLDM1LDIxMSwyMDYsMjQ3LDY1LDI5LDExNiwyNDIsNjcsMTAyLDIzNSwxMywxMzYsMjMyLDIzMCwxMTQsMTQ2LDE4Nyw3LDI1NCwxNDIsMjYsMTIxLDE2LDIzNyw1LDE2MCwyMDEsMTE0LDk0LDE3OCwxOTksOTUsMjEyLDI0MSw0NSwxMTIsMTgwLDE4OCw3Miw4NiwxMTQsMTg5LDE1NSwxNDksMTQ5LDE2MywyMTAsMTEyLDEwMSwxMiw2OSwyMjUsNzUsMjAyLDIyMywyOCwyNDIsOTAsMjE1LDE1NiwxNjksMjI0LDI0NSwxMzUsMTI4LDkyLDE0OCwyMTcsMTMxLDIwOCwyNTUsMjUsMTM1LDExNywxMzYsNSwxMDQsMTg1LDI0OSwxNjEsMjI4LDIxNCwxNiwxMDUsMjA0LDksMTgyLDEzNSwxNTMsMjIwLDEwMSwyNDQsMTYwLDIwNyw1OCwxODIsMTE4LDE4NSwyNDAsNTcsMjQ1LDEyMywxMywxMTIsMTgyLDEwNiwyMjksMjIwLDkwLDI5LDg2LDIxNSw5NiwxNDcsMjMyLDIsNTUsMTMxLDIyNSwxMzcsNjgsMjQ1LDg5LDE0MSwyNTIsOTcsMywxMjksMTU1LDIxNiwyMjMsOTgsMTE2LDQ1LDc4LDg1LDE0MSwxNjEsNzQsMjE1LDcsMTUwLDE3MSwyMjUsNTksNzgsMjIxLDE1MiwyMzYsMTQsMTE3LDEwMCwyMDgsMTU4LDg2LDEzLDE4NSwxMjQsODcsMTU3LDExMSw0MCwxODcsMTgyLDEyNCwxNzMsNzEsMTczLDIzLDE5OSw1MiwxNTUsMTkwLDEzNCwxMSwyMyw2NCwyNSwyMTUsMzksMTE1LDIzMSwxNzMsNzcsNzIsMTE0LDU0LDI1MiwxMTYsMTc4LDU5LDIyMSwxMDYsMjQxLDExOSwyNTQsMzAsMjI2LDI0MSwyMDQsMjMzLDExMywxOTcsOTYsMTQ2LDAsNDEsNjcsMywyMzEsMTI2LDEyLDIxOCwyMDIsMjIsMTcxLDExNCwyNDksMTc2LDEzNCwxNjAsMTksMjE2LDMxLDIyOSwxMTgsMjI2LDYyLDI0MiwxMjYsMTI2LDQyLDEyNywxMzAsNjgsMjE4LDIxOCw4MSwyMDIsMTA2LDIxNywxOTEsMjUsMTc3LDgyLDk3LDgxLDM2LDIzMiwxMzcsNTgsOTAsMjE2LDE5MCwxMTcsMjM1LDIwLDE5NCwxNDQsNzYsMTc4LDI3LDIxMywxMywyMDgsMTgsMjksMTE4LDEyNiw0OSw5OCwyMDMsMTc5LDEyOCwyMzcsMTAwLDMyLDI0MiwxODksMjEyLDYsMjEwLDIxMCwxODgsMTYxLDIwNSwxMywxMjQsMTE5LDEzLDIxNSwxMTIsNDEsMTgzLDE3NiwyMTUsMTY4LDIxMCwxODIsMTExLDEsMTE1LDIsMjM5LDE0MSw4LDE3NywxMjQsMTEyLDQ4LDE5NywyLDIzOSwxMSw5OSw0LDM2LDc3LDY5LDQ3LDI0NCwxOSwxNTMsNjEsMTksMiw5NiwxNzYsNywxMTIsMTIyLDEzMSwxNjksMjUsMTg5LDExNiwxNzEsNDksMTIsMTIxLDE2Miw3OSwxNTQsNzQsMjUxLDUwLDIzMywxODIsNjMsMTgwLDIyNCwxMTgsNDksMjUzLDIxLDIwLDE2LDMxLDE0NCwxODQsOTMsMTc0LDIzMSwyNDQsMTgzLDEzLDQ5LDIyNSwxODksMjExLDczLDE4NSw0OSwxMTAsMTQyLDI1LDIyNiw0NSwxNzYsMjMzLDIwNCw3NCwzMywxNiwyMDUsODgsMTMxLDkyLDE1NywxNzAsMTc1LDY4LDE3MCw2MSw1MywxMTYsMTY1LDE2LDI3LDE4MiwxNjAsMTgxLDg3LDI0MSwxNSwxNTEsODUsMTA3LDc2LDE2NywxMjksMjUsMTcyLDEyNywxODQsMTM4LDE1MywyMjIsMjI4LDEyNSw2NCw0NCw0NSwzMiwxMiwyMjcsMTQ4LDEwNiwxNTIsODMsMjQwLDE2Niw1NCwyMzUsMzIsMTkwLDEyLDI0MiwxNjQsMTIzLDE4OSw1MywxOTQsMTQxLDEwNCw0MywyMDIsMTEwLDQsMTY4LDExOSwyNDUsMjMyLDE3OSwxNzgsMTk4LDEsMjI0LDg3LDg2LDE2MCwzMSwxOSwxNDAsMjMzLDEwMiwxOTEsMjA0LDQsOTgsMTM4LDE2MywxOTEsMTA2LDI0LDIxMyw0NywyMDgsODIsMTM3LDEzMiwxMzEsMTYsMjUzLDg0LDI1LDE0NCw5MCwxNTksMTQ4LDE2LDE5Niw4NCwxNjYsNjEsMTYwLDEwMSwyMjksMjI3LDkzLDExOCw1OSw4Nyw2NiwxNiwxMjgsNTksOTYsMTMxLDI1MCwyMCwxODQsMTUwLDIwNSw5MSwyMjcsMjAxLDYyLDM1LDc5LDE4MCwxNzIsMTczLDg1LDE5NywxMDYsMTUzLDIzOCwyMjksNjAsMjA0LDY1LDE5MywyMzAsOTQsMTAxLDE3NywxMzQsNiwxNjUsNTMsMTcxLDE0MiwyMDgsMTU1LDIsMTEsNCwyMDIsMTI3LDU0LDE3LDE0MiwxMTcsMjI3LDEyMSwxMjgsMjA0LDE5MiwxNDcsMTQ3LDkyLDE4OSw1LDIyNCwxNDgsNzIsMTgsODMsMTAxLDEyNiwxMjQsMjI4LDE1MywyNDIsMTIzLDIyOSwyNDcsOTIsMjIxLDYsNzMsMjI3LDI1MCw4NywxNjcsMTk0LDEyOSwxODcsNzMsMzgsMTg1LDEwOSwyMTcsMjQwLDE5Myw4OCw1MCwxNzgsMTgwLDE1MSw1NCwxOTcsMTg3LDEzNywxOTAsMTY2LDIzMywxLDEwMywyMDQsODgsMzEsMTI3LDE4NSwyOSw2NSwxLDI5LDI1NCwyMjMsMTQsODMsMTY3LDIxNSwxMTQsMjQ4LDMwLDE3Myw4OSwxNzMsMTg3LDY5LDUsMTA1LDExNywxNSwxMDYsOTQsMTczLDYzLDIyNywyNSwyMzAsMTkwLDEzNiwxNjgsMTc3LDE3NSwxMDcsOTEsMTI2LDI1NCwzNCwxODgsMjUsMTE4LDQ4LDEyLDIyNiwxMzAsMTUzLDE2Miw1Nyw0NywxODEsMjEyLDc5LDE2MCw5Nyw2NCwxNTcsMjQ2LDkwLDUzLDQzLDE0OSw3NiwxMDIsMTUsMTk1LDEwNyw1OCwyNDIsODQsMTcyLDI5LDgxLDE5OCwxMTMsODEsMjUxLDEzOCwxODIsMTU0LDExMSwzMCwxNzEsMTI5LDU2LDE3LDQ1LDIxNCwxNTMsMTEyLDExNywyMDMsMTc0LDQwLDM4LDIzNCwyMzYsMzIsNCwxMTIsMjI1LDI2LDE4NywxOTUsMjQ2LDI1Miw5LDIxOCw2OSwxNjAsMjIzLDE3OCw1NCwxNDgsODEsOCwxMzQsMTUxLDc1LDI0OCw2MywyMjQsMjQwLDQ4LDc1LDI1MCwyMjEsODUsNDYsMTAwLDUwLDMsNzAsNjQsMTAyLDExMSwxNjAsMTU1LDIzMyw1OSwxNDcsMTg0LDU3LDYxLDYsMTI2LDc5LDE3NiwxNiwxODUsOTQsMTY2LDMzLDEzNSw3OCw0Miw3NSwxNDAsMjA4LDE0MCw0NCwxNTMsMTg3LDY0LDEwMywxMTksMTYwLDIzNiwxNiwyMzksNzQsMjE4LDIxOSwyMTIsMjA3LDExMCw1MywzMCw3NiwyNDgsNDAsMTExLDk4LDQ0LDIwLDExMywyMDQsMjMzLDEwOSwxMzUsOTYsMTA3LDM5LDE2MywyMDMsMTI1LDQ1LDE1NywxNTIsNzEsMjM5LDE3NSwxNzQsMTU5LDE0Nyw4MCwxMTEsOTMsMzgsMjUzLDIyOCwxNTQsMjI1LDE4MSwxMDEsMTIsMjQxLDEyNyw2NSw0OSwxODksNSw4NSwxNTEsMjM3LDIxMywxNDMsMTQsMTA0LDEzOCw1NCw1MiwyNyw0LDEzMiw2NywzNSwxNTYsODYsMTU3LDczLDE2LDIyOSwyMjIsMjQ1LDExMCw3OSwxNjUsMTc5LDU2LDE3OSw1MywyMTgsMjI5LDEwMCw1OCw4NywxNDksNDgsMjMxLDY0LDYzLDExNSw2NywzLDE3Miw2LDE4NiwxMTUsMTU0LDYwLDUzLDIxNCwxNTIsMTQ5LDg5LDIzNCwzNywxNDMsODIsMjU1LDY0LDI4LDE4Myw5MywxMTIsMzksNzAsMTg1LDU3LDAsMTk5LDksNjEsMTc1LDIxOSw0MSw3NiwzNywxNzYsODIsMTI1LDY1LDUzLDE2MCwyMTQsMTA1LDYyLDE1MywyNDQsMjIyLDk2LDIwNSw2LDE3OCw4NSw0MSwyNDAsMTEzLDAsOTYsMTQ5LDM4LDMsMTk1LDE4LDE1Miw0MSwyNDYsMywxMDMsMjksMTEwLDEzNCwzMCwxMDEsNzUsNDYsMTAzLDE5OSwxODQsMjAsMjMwLDgsNTUsMTIwLDQsMjI5LDE2OCwzNSw0Myw3LDI4LDE2MSwxNDMsODcsMjcsODcsNzksMjU1LDE4Niw0NCwxOTUsMTU4LDE1NSwxODEsMTE5LDgxLDE3MiwyMTcsMTA3LDk1LDk4LDU1LDI0MywxODYsNjYsMTA1LDQ4LDIyNCwxMjMsMjMyLDg0LDE1NiwyMCwxMCwxNTYsMjA4LDIwNCw1MiwzNCwyMjgsMTM2LDk3LDI0MiwyMDAsMjQ2LDIxMSw2NywyMDIsNDAsMjQxLDkxLDkyLDI1Myw5LDU0LDcyLDEzMSwyMjEsMTA2LDE3OCwzMiw0NCwxODIsNCwyMjUsMTkzLDM3LDIwLDI0OSwyNDksMjMxLDEwLDIwNiwxOCw3MSwyNTQsMjIxLDE4NywxNzIsODgsMjA0LDYsMTI3LDEzOCwxMDIsNywyMDgsNzUsMTQ3LDIxOSwxOTksMTc3LDc5LDM2LDE3MCwxMDEsMjA3LDE3NywxMDksOTUsMTQzLDIxNyw0MSwxOTksODAsMTgzLDIwMSwyLDI1NCwxMiw1NSwyMywxOTgsMTQsMjU1LDY5LDI0NSwxMzgsMTU1LDEyOSwyMjcsMTY3LDE2OCwxMzAsMTU2LDEzNSwxNCw5Niw5Myw0OCw5OSwxNDMsMTA3LDEyNiw5MiwxMTcsMTQzLDExMiwxMDgsMTkzLDIyOCw4NCwxMyw0MSwxODYsMjcsMTcyLDkyLDIwMSwxNDksMTE2LDE5LDExMiwxOTcsMTE2LDIwOSwxMjgsMTAyLDEsNTUsMTUyLDE3NywyOCwzNywzNCw1MCw4Myw0MSwxOTksNzQsMTc4LDU5LDExMSw2NywxMTgsMzUsMjUyLDM2LDMzLDg3LDI4LDE3MCwxNywyMTUsNDcsOTAsMTU0LDEyNCwxMzcsMTUsMTQsMjExLDU5LDc1LDU5LDMwLDc3LDAsNDksMzcsMjI1LDE5MSw4NywxMDEsMTI3LDIxNCwyMjcsMTYwLDk5LDE3NCwyMzQsODIsMTQ4LDIzNSwxNiwyNDEsMjE5LDE0NywxNzAsMTI3LDIyMSwyNTAsMTE2LDM5LDIxOCwxNTYsNzIsMjI3LDE3Miw1NSwwLDc5LDE4OCw3Niw1MSwyMjIsMjMyLDI0LDM2LDYyLDk0LDE1NCwzLDYxLDIzMCwxNDYsMTE0LDI1MywwLDEyOCw1OCwyNTMsOTAsNzIsMjExLDI0MiwzOCwzOSwxMzMsMTUzLDE2MSwxMTksMTA1LDE5NSwxNTIsMjI1LDIwOCwxMDUsMTQwLDgwLDIxNywxODYsMTk2LDE1NywyMSwxMTYsMjMwLDExNiwxMzksMjUsMTU5LDE0MywxMTgsMTI4LDc3LDIwMSwyMzgsMjQ3LDIyOCwxNSwxNjgsNCwxMzMsMTQ4LDIxLDE0OCwxMiw0NCwyNDEsNywxMTUsMTcsMTI5LDE3NiwyMDIsNDYsMTMwLDEyMiwxMjksMjM1LDE0MSwyMjMsODUsMjEsMTk5LDY1LDE4MSwxNjksNTIsMTc0LDE2MSwxNTMsNjIsMjUsMTY0LDExNSwyMTMsODksMTM4LDE5OSwxMDMsNzksMjAwLDE2NSwxMzUsMjQ5LDI0NCwyNywyMDksMTc4LDI0MCwxMjksMjExLDYxLDksMTExLDE1NywxNDcsMTE5LDM2LDExOSwyNTUsMTEwLDEzMCw4NCw0OSwyMTAsMjI1LDI0NywxMDAsMjYsMTIxLDEyNywxNjMsMTYwLDI2LDc5LDk5LDI0LDc3LDY1LDMyLDE3OCwxMDksMzYsMjcsMjUzLDE3MywxMTAsMTgzLDExLDE0LDIxMSw1NywxMzAsMjU0LDEyNCwxMDQsMTY1LDIxOSwzMSw3MCw5NywxNCwxOTQsMzksNjEsMjYsMTQxLDEyNSwyMjgsMTI2LDE5NCwxODQsMTAxLDE2MCwyMDQsMTA2LDEyOCwxNDQsMTA2LDEwMywxNzEsMTgsMjQ2LDEyOSwyMjAsODUsMTcyLDE1MSwxMjMsNSw3MywxNTUsMTkyLDE3NSw5MSwxNTcsMjM5LDYxLDIzNywxMTYsMTcwLDY1LDIzMyw1NiwxOSw0OSwxMTQsMTY4LDE5MCwzLDIxNCw1MywyNTAsOTAsMjEzLDI0NCw4OCwxMDEsMzAsMjI5LDI0OCwxMjQsMTUsNzEsMTQxLDI3LDE3MiwyMzUsMjEsMTI5LDIxMSw3Miw2MSwxNzIsMTEyLDE3MCwxMjgsMTM1LDk2LDE5NiwyMjEsMjU1LDI3LDE3NiwxMDUsMTg4LDE4MywxMjEsMzMsMzcsMTQ5LDUzLDEzMSwyMjYsMjMzLDI5LDE2NywyMzQsMjE4LDEwOSw1MywxODUsMTUyLDM2LDI0OCw1Myw2MSwyMzUsNzgsMjEsMjAxLDIxNCwyMTAsMTYzLDEyLDI1MSwxODcsNDUsMTg4LDEzNywxMjYsMTI3LDIzNyw5MiwyMzQsOTEsMjQwLDIyNSwzOCwxOTQsNTcsMjEzLDI1MSwyMzcsMTcxLDMwLDk5LDUyLDE0LDQ5LDg0LDEwMSwyNTIsMjM3LDcsMTY2LDEyMiwxMTQsMzIsMTA3LDMyLDIwNywyMzksMTM2LDE2OCwxNzgsMTIsMTEsMjQxLDIzMywyMzAsMTQ2LDEzMiwxOCw4MywyMzMsNDEsMTcyLDE3LDYsMTYxLDQyLDExMyw4Nyw0MCwyNTUsMTg1LDEsMTQ2LDEyOCw1LDI0MCwxMjYsMTMxLDcxLDQyLDU0LDEyNCwyMDUsMiwxMjIsNzEsMzAsMjIyLDIyOSw0MCwxMzQsMTQyLDEwMiw5NywyMzksMTUxLDE3NywxLDIzMCwyMzEsNDksMTIzLDIxOSwyOCwxMjksOTEsMTUyLDExMiwxMywxNTQsODEsMTk3LDIyNiwyNTUsMTEyLDE1OCwxNzgsMTc3LDU1LDE4MSwxMDgsMTM4LDE4NSwyNDUsMjksMTg2LDIxLDczLDE4OCwyMDksMTU0LDIwMCw4OSwxMTYsMjM1LDE5OCwxNDQsMzYsODcsMjQ4LDIyLDcsMjAwLDEyMiw3LDE0OCw0NCw0Miw4NywxNDAsMjM4LDIwNCw5NSwyMzEsMjUyLDAsMTM2LDAsMjIsMzksNzAsMTIzLDEyNSwxNjUsMTEzLDIyNywxNzIsMTQ2LDE2MywxMjgsMTU4LDM2LDUyLDkxLDE5LDM2LDI0NSwyNywxNTAsMTM4LDE0MSwxMSw2NywyMzksMjI0LDY1LDI0LDExNiwxMDEsNywzOSw0NiwxNDIsMTcyLDE2NCwyNDMsMTQ4LDAsMzMsMjI2LDU5LDQ3LDIwMywxMzcsMTU2LDI0MSw2NiwyNTAsMTU3LDMwLDIwNCwxMDEsMTQzLDEzNCw5OCwyMzgsMTU1LDIyNiwyNSwxODQsMTM2LDIxOSw4OSwxMDAsMTkzLDExLDE0Myw3MSwxMzksMjQzLDIzMCwxNTEsMCwyNDksMSw3OCwyNiwzMiw5MywxMDQsMTU3LDY3LDk3LDE2NCwyNDgsODYsMTI0LDE0Niw5Myw3NCwyMjIsMjI4LDE2Nyw1NSw1MywxMDAsMTM1LDIxNiwxMDksMTMsNjQsMzcsMTA2LDE3NywyMDAsMjAwLDE4Miw5MiwyNTEsNjksMzEsMjQzLDg5LDgwLDE5OCwxNCwxMzIsMjAzLDcyLDEwMywyOCwxMDQsMjE3LDI0LDk3LDIyMywxMTMsMTEsMjksMTc4LDE5MSwyMTAsNDYsMTYyLDI1NSw2OCw5OSw4LDIzNywyMTMsMTYyLDE1MiwxOTMsMTgzLDEyMSwyMDMsMTksMTA4LDE4MiwyOSw4NiwyNiwxOTIsMTAzLDIyMCwxMDMsMjA1LDE1NCwxNzksMTk3LDksMjIsNzMsMTI3LDE3NSwxNDYsMzgsMTE5LDIxMCwwLDI0LDE4MCwyMSwyNDUsMjE1LDIwNCw5MSwxODYsMTE5LDEzOCwxODMsMjM5LDE1LDE1NSwyMzEsMjQ4LDEzMywzOSwyNCwxMDEsMTQ0LDIzNiwxMCwyMzAsNTQsMTc0LDIyNyw3MywyMSwxMTAsMTAsMTYwLDI0MSwyMzIsMTMxLDE0LDIxMiwxMjcsMjMyLDU5LDEyMiw2NSwxNDYsNTQsMTYzLDksMTg5LDE5MCwxMjEsODgsMTcwLDYyLDE5NCwxNCwyMDQsMTUyLDI0NSwzOCwxMzEsMzcsOTEsODEsNzIsMTE0LDI5LDExNSwyMzksMTgyLDU2LDQ0LDE1NiwxNTksMTc3LDE4MCw4MiwxNjAsOTMsOTcsODYsMTgzLDIzNiw1MCw5NSw4NSwzOSw3MSwxODEsMjI1LDE1MiwxNDMsNjMsMTIzLDExNywzNCw0NCwxMDksMTYwLDE2NiwyMjksMjQwLDkxLDEzOCwxMDIsNTQsMTgwLDE3Myw0NCw1MCw4MCw0MiwxMjQsNyw1MCwxMjQsMjExLDIzOSwyMSw5NCwxOTcsMTg1LDIzOSwyMTMsMTA3LDE0Miw2NCw5NSwxMjQsMTI1LDE3LDE4MCw5NywxODksMTAxLDUyLDQ4LDE5LDExMiwxMiw3MCw5LDIxMiwxNzcsNTQsMTE4LDY2LDg0LDE0NywyMzYsMjQ4LDI2LDEyNCw5NSwxMDMsMTM1LDI1NCwxMjQsNDksMTEyLDE4Niw5OSwxMjAsOTAsOCwxOTQsMTkxLDg4LDU3LDI0Miw2NSw2MSwxMCwxMDQsMjQ2LDE5NywyNTIsMTksMTU5LDU4LDE5NCw3NSwxNzMsMjQyLDEwMyw4LDExNSw4NCw2OSwyMzgsMTQ5LDI2LDE1LDE1OSwxODIsMTQxLDEzMiwxMTksNzAsMjksNTMsMjAsMTQzLDQ2LDE2MywyMDQsNiwyMzYsNTksNDUsMTg1LDE3Miw4OSwxMTksODMsMzgsMTQ0LDM2LDIyMiw5NiwxNTEsMjYsOTksMTk1LDE2MywxNzAsMTMzLDkyLDE1OSwyMTQsNTMsMTUwLDExNiw5MCwxNzYsNjksMTQ1LDEzMCwxNSwxNzIsMTQwLDIxNywyMTUsMTAxLDE2MywxMTUsMTYxLDY1LDEwMSw4LDcsMTgzLDExMywyMTMsMTM0LDU4LDE3NSwxMzAsMjUxLDE0MywxNzMsMjQ4LDE2OCwxMzUsNjAsMTU5LDMwLDE5NCw2OCwyMDgsMTE5LDEyMCwyLDQwLDE3OCwyMjcsMjQ3LDE2MSw3Nyw0NywxMzYsNDYsMjQ0LDE2Myw3Miw2NSwxNTgsMjUsMjI1LDE5NSw2MSwxMzIsMTgyLDIwNCwxNzcsMTg2LDIwMCw4MSwyLDY1LDEwNSwyMTIsNzIsOTQsMjAzLDIzMiwyMTcsMTgyLDEyMywyNTEsMjI4LDE2MCwxLDE2MSwyMDQsMTIzLDIwLDM3LDEsNzcsMjA4LDE3OSw0NSwxNDksMTgxLDEyMiwxMDIsMTkwLDEyMywyMTMsMTY0LDIzMSw0MSwyMTYsMTMwLDIzNCwyNDgsMjA4LDI1MSwyNTIsMjIwLDg0LDIwOSw2Nyw0Nyw2MSwyMjAsNSwxNDIsMTYyLDI2LDIzNiwxMjEsMTQyLDI0OCwxMzIsMjU1LDY1LDEyMiwyMDMsMTk2LDEwMiwxOTEsMTg3LDIsMTk1LDEyNywyNTUsMTkzLDkyLDQ5LDkxLDE4NiwxNTQsMzksMTU2LDI5LDIxMSwxNzIsNDksMTA0LDI0NSwxMTQsMTUzLDIyMywyMTEsMTk5LDI0OSwzNSwxMzAsMTYwLDEyOCwwLDE1MiwxNzYsMTgzLDIwLDIzNiwxMTMsMTkzLDEwOCwyNiwyNTUsMTEsMjM3LDEwMiwxMzMsMjQ1LDk0LDExNSwxMTQsMTAsODksMjI5LDIxNCwyMjEsOTksMTQ5LDMwLDk5LDM3LDI0NiwxMCwyNiwyNiwzOSw5MiwxMjMsMTcwLDczLDIxMSwxMjcsMjI3LDU0LDMwLDg2LDEzMywxNTksMTEyLDIyNSw5MSwxNDgsMTAwLDE3NCwxNDksNzUsMTQzLDE0LDE0MCwyMCw0NCw2NCwyMTIsNSwyNDMsOCwxMTYsNjMsMzAsOTcsNDIsMTIzLDIwLDczLDIxMiw4NSwyMDcsODMsMTIyLDI3LDI1MSwyMzMsODQsMTAsMTcsMjM2LDIzMiw4MywyMDAsMTI3LDExOSwxNDMsMTYzLDIwNCwyMjAsMTY3LDU5LDIzMSwyMCwxMDYsMTg2LDIyMiwxOTEsOCw0MCwyMzQsMjEsMjUsMTgwLDEzLDExNiwyNTAsMTUyLDIyNCwxNzQsNzUsMywyMDUsMzgsMTczLDIxNSwyMzYsMTUxLDE4NSwxMjEsMjU0LDI0NCwxNTQsMjM5LDE3LDUzLDEwNiwxNjQsNjEsNDksMTE2LDIxNiwxMTgsOTQsMTUwLDM1LDE4MSwyNiwyMzgsNjYsNDksMjExLDIyMSwxMzIsMTQ2LDE2NiwxMTUsMzksMTM2LDM2LDIwNSwyMzAsMTc5LDMxLDE5Nyw1MSwxNDgsMTY1LDEwOSwzOCw3MCwzNywxNDgsNTIsNDQsMjA5LDI1MCw5OCw1OCwyNDYsMjI1LDEwMywxOTgsMTAxLDI2LDI1LDE5NiwyMDcsOCwxNjYsMjEsODgsMjUyLDE3NSwyNTMsMTAsODgsMTA3LDE1NywxOSwyMjUsNjEsMTIsMjQ2LDIyMSwzNywyMzksMTg2LDE2NywxMzcsMTQyLDEzNSwyMjIsMTI4LDE3NCw2Miw5NSwyMTYsMzgsMTQxLDE1Nyw0NSwyMzIsOTcsMjE3LDE3MywyMDMsMjM0LDExNiwxMjksNjksMjA2LDE4OSw5NCwyMjEsMTIsNTQsMTM5LDE4NiwyNDcsMTg0LDE2LDIwMCwxMjEsMjQ0LDEwNCw4LDcsMzUsMTExLDQ3LDE4OCwxMCwxNDAsOTIsNzMsMTQzLDIwNiwyMDMsNzIsMTIyLDE4NCwyMCwxMDIsMTk3LDEzMCw2NCwxNTAsNjMsOTYsMjM5LDgsMTMyLDExMSwyMTcsODQsOTEsMTk4LDMyLDQzLDEwMCwxMzgsMjQxLDE1LDE2MCw0MiwxOTAsMjUzLDE5MywxODQsMTY0LDEyNCwyOSwyMTAsOTYsNjcsMjI0LDIyMSwxODIsMjksMjE4LDEyOSwxNDksMjksMTI4LDE3NCw5OCw4OCw4OCwxMjUsNTYsNDAsMjU1LDEyMCw1LDAsODcsMTc0LDQyLDE1MCw5MCwxMTIsMjAxLDE4MywxNjksMTksNTcsMTk1LDE5MSwxMiw1OCwyNDQsMjM1LDEzMiwyNSwxNDUsNzIsMTQ2LDIxNCw4LDEyNSwxMDAsMTM1LDEyLDUsMTAyLDk3LDI0OCwxNzQsMjQsMTU5LDkwLDMzLDQzLDE4Nyw2LDYxLDIxMiwyNDEsMjI1LDE5MCwyMTksMjUyLDE5NywxMjMsMTI5LDE2NCwxMDgsMTIzLDU1LDIzMCw0LDE1MywxNjYsMTA1LDIzNCwxNSw4NSwyMTYsMjMsNTYsMzIsMyw0MSwxMTAsNjgsMTQ2LDE3MiwxMzMsMjAyLDk4LDQxLDcsNDcsMTUyLDM1LDI1NSwxNjgsMTA2LDI0MSwyMjYsMjIyLDc3LDI0NCw1MiwxODUsNjUsMjUyLDIyNywzMiw2NiwzOCwxMSwxNzIsNjAsMjgsMjgsMTAzLDg0LDEsMSwyMDUsMTgyLDE5MCwyOCwxODksMTAyLDI1Myw0MywxLDE5MSwxNDgsMTE2LDEwLDIyNywxOCw4MSw5Myw4MCwyMzksMTU3LDIzMiwyMTUsMTgwLDE2MywxNjUsMTYxLDEwOSwxNzcsNzEsMTUwLDI0NCwxNDQsMjA4LDE2MCwxMTAsMjIsMTc0LDYwLDIwNiw0MywxMDMsMTIxLDU1LDEwMywxMTQsMTE1LDE3MywyMzgsMTMsMTAsMjI3LDI1MSw0MSwxNzYsMjE2LDE1OCwyMjksMjE2LDU1LDIzNCwxMjgsMTI4LDIwLDE2NywxMDYsMTgxLDg2LDE2MywxMzAsMjE1LDExMCwxNDksMTkxLDEwLDIyNywyMTUsOCwyMTQsMTU0LDE3OCwxODEsMTUsMTksMCwyNDcsMjUwLDk3LDc0LDQzLDE1Nyw1NSw5NCwxNzQsNDEsNDEsOSwxOTksOTcsMjAsOTEsMzIsMTgsMTAsNDMsOTgsMjQwLDI0NywyMDMsMjAsMjUwLDExNywxNjAsNDQsMjI5LDIwMiwxODcsNjQsNTQsMTI0LDE1LDE4NCwxNjksMTI5LDI3LDE2MCwyNDAsMjYsNjEsMjU1LDYwLDE2Niw2MCwxNDQsMjA5LDg0LDU1LDE4NywxODYsMTY4LDEzLDEyNCwxMjUsMjksMTcsMTAwLDI0OSwyMjcsNjIsMjA1LDc4LDE3OSwxNjMsMTY4LDEzOSwxNjgsMjEsMzgsODMsMjM5LDE1MSw3NCw0Myw2NiwyLDkyLDcyLDcxLDk0LDIxNiwxMzQsMjM4LDIwLDQ1LDE1OCwyMTMsMTY0LDczLDU3LDgwLDQ3LDE5OCwxODQsMTMwLDIyMywyMjcsNzEsMTMyLDEzMywyMzUsMTc3LDg1LDE3NCwxNDIsMTI0LDE3MiwyMDAsNTQsMjI5LDQwLDEyNiw2MCw3Niw5MiwyMTYsMTUzLDU2LDI0MSwxNzQsNjYsMTQxLDkwLDIyNiwzLDMwLDY4LDIzNCw3MSwxODcsMTYzLDExMiwxNDYsMjU1LDIyLDE0MywxNzAsMjA0LDMsMTI3LDE3OSw4MSwxMzksMTYwLDM3LDc3LDI0NiwxMjgsMjIwLDE5NiwxNTgsMTUzLDczLDE3Nyw2NSwxOTksMTE5LDI5LDE5NywxNDQsMTMwLDI0OCwyMDYsMTU1LDI1MywxMDgsMjEzLDEyNCw3LDIyMywyMjEsMTYyLDE0NiwxMzQsMjQyLDY1LDk5LDE2MiwxMDcsMTIwLDI0NywyMTQsMjA3LDk2LDE1MCwxNjksMTMxLDIwOCwyMTgsMjIxLDI4LDI0LDExMiwyMDgsMjMsMSwxMzAsMTQyLDIzMiw1NiwxMDQsNDUsMzMsMTU4LDk1LDI1NSwxMjMsMzEsNzQsNzYsMTIwLDE3OCwxNTUsMjEzLDYsMTk1LDE2NCw4LDgsNjksMjQxLDE5NywxMjcsODMsMTY5LDIxLDE2NywxOSw5NCwxNDMsMjUyLDMzLDE1OSwyNDgsMjQxLDE3MCwxNTMsMTQ3LDEsMTQ5LDE5OSwyMDEsMTMxLDE3MCw3OSwyMzYsMjEyLDIwOSwxNDMsMTA3LDk4LDI0LDEyMyw1NiwzMywxOTMsODUsMjQ3LDY0LDIyNSwxMzUsMjEwLDc4LDE0NSw1NywxNiwxNDUsNzEsMTcwLDIwLDEzMyw4NywyMzUsNCwxNjYsMjM5LDEwMCw4MiwyMzUsODEsNTAsMjIzLDksMTkzLDUyLDQ5LDg2LDEyOSwxOTAsMTk2LDgyLDE2NSwxMDcsNjMsMTE1LDE2MSw5OCwzMywyMCwxOTMsMjksNDIsMTUxLDIwNSwyNTIsMTI0LDcyLDI0NSw0OCwxODEsNjcsNywxMywyMSwxMjcsNTksMjI2LDE4OCwxNDQsMTI5LDExMiwyNDQsMTkyLDEyMSwyMTMsODAsNDIsMTk2LDEsMTMsMTA3LDEwOCw3OCwwLDQwLDEyMSwyMjUsMTQ4LDIzNywyMzQsMjA5LDIxNiwyMzgsOSwxNDcsMjI2LDI1NCw5Niw4OSwyMTIsNzIsMTkzLDEwNiw3NSwxMzUsNzQsMjI3LDY3LDI1NSw5MiwxOTEsODEsMTg4LDEyNCwyMjYsMTQ5LDE1MiwxNDIsMTUsMTU5LDE5NSwyMzgsMTE0LDU1LDI1NSwxNjYsMTU3LDIzMCw1OSwxNDgsMTcwLDE2NiwxNTEsNjUsMjEzLDEwNCwyNTMsMjUzLDExMiwxNTAsODIsMTQ3LDEzNywyNywyMTQsMTAwLDI0Nyw2NSw4MSw5Miw0Nyw4NiwyMTcsNyw0NSwxMjAsODEsMTMwLDMxLDIzNiwyNDMsNzYsNzgsMyw0NSwxMDUsMTcyLDIyMCw3MSw0OCwyMjAsOTQsMTk2LDI0OSwxNjMsMTkzLDEzMyw1MCwyMzYsMjA1LDIwLDU1LDIsNjMsMTQsMTI3LDY5LDExMywyMTIsMjA0LDEyLDU4LDc5LDg5LDg2LDI5LDYxLDE5OSwyMDEsNjQsMTQ5LDYsMTQ0LDE4MiwxNTAsMTI5LDMxLDE4LDE2NywxMjAsMjQ4LDgyLDEwNywyNSwxNDMsMTI4LDI3LDE2MSwyOCwyNSwxNTMsMTgzLDIxNywyMzgsNzgsMTg2LDEwNiw5MiwyNywyMDIsMjE5LDE2NSw5NiwwLDIxNiwyMzQsMTY5LDczLDEwMSwzOSwxODIsMTEzLDIxNywyNDAsMTcwLDExNiwxNzIsMjIxLDI1MCwyMzMsNDgsNDksMjQyLDgzLDIyNyw5MiwxODEsMTg0LDcyLDIzMCwxODAsMjEsMTUsMTA4LDEzNSwyNSwzOCwxNTMsMjUsMTI0LDIyNywyNiwxNDksNzMsMjM2LDM5LDIxMSwyNDQsMTQ5LDU4LDE4MywxMzIsMjYsMjIzLDIxOSwxNzQsMTQ0LDExNywyMzMsMjE5LDE2NSwyMDUsMTU3LDE1OSwyMjIsMTg0LDUyLDQ3LDI0MSwyMDEsMTIzLDY1LDI0LDQ0LDU1LDIxNSwxNzcsMTY4LDI1MCwxNzksMTE1LDE5MCwyMjcsMTIzLDE1OCwxNjMsMTc5LDIyNCw2OSwxOTYsNjYsMjA3LDI1NCwyNDMsMTAxLDIyMSwxOTMsMTQwLDI1MCw0LDI4LDIyMiw1Miw5NiwxMzgsMTYwLDMzLDIxOCw2NCwxMTgsMjE0LDIzNCwyMDEsMTUyLDE0OCw5MSwxNzgsMTExLDEwNywxNDQsMTQyLDYsMTgyLDEwMiw3MiwxODgsMzQsMjEzLDE4MSwyNiwyMjMsNTgsMjU1LDEwMyw4MSwxNyw0NywxNjksMTEsMjQ1LDIyNCwxMjMsMTQ4LDIxNSwyMzcsMTg2LDEwNyw3NSwxNTIsOTAsMjAyLDE2NiwyMiwxNDksMTk3LDUsMjQ2LDIzOCw3OCw3NiwyMjksMTA2LDE5OSw5NCwxMjcsMTk1LDAsNDUsODIsNiwxNTksMTAzLDk2LDEzOCwyMzEsNzEsNDYsMTA3LDU5LDIxNiwzOSw0MywxMiwyMjEsMjcsMjE0LDU2LDE1NSwxNDUsNjYsMTg3LDE2OSwyNTAsMjM1LDc4LDIxMSwxNzksMjM5LDE4MywxOTgsMTYzLDkzLDUsMTk2LDI0LDE3NCwxNDMsMjI1LDEwNiwxMzksODksOTgsMTMsMTI3LDIwNywxODQsMTk0LDMwLDEsMTY1LDE5OCwxNjksOCwxOTcsMTE4LDg2LDE2MywyMjEsMTM4LDIzLDIwOSw2MSwxMTYsNzksOTksMjMzLDQzLDEzMCw2MCwyNDQsODUsMjI5LDI0MywxNzIsMTIzLDE0OCwyMDAsMTIwLDE5MiwxMjcsMjExLDUyLDExLDE1OSw0MSw5NSwyMTIsMjMwLDE4OCwxNjksMTU2LDEzNywyOSwyMTIsMTIsMTQ4LDE2OCwxNDgsMTMzLDI0Myw0NCwyNDEsMTM5LDEyNywyNCwyNDYsMjIwLDIyNywxMjUsMjA5LDk3LDYwLDUyLDE2MiwxOTIsMTQ2LDQ5LDE2MSw5MiwxMzgsMTEyLDE4OSwxMjgsNTksMTI2LDEyNSw0NiwyMDcsNjAsNzksMjMxLDE3NCwxNTIsMjA5LDY4LDIyMywyMDUsMiwzOCwxNCw5MSwxMTYsMTU5LDI1NSwyOCwyNywxNzgsMjQ4LDE2NCwxMDQsMTU4LDc5LDY5LDIxNCwyMzQsMTU3LDEyLDc1LDE2Myw4MywyNTMsMjQ1LDIwMiw2MSwyMTMsMTc2LDYsMTk3LDIzMCwyOSwyMDgsMTY2LDI1MywxOTQsMjU0LDIzNSwyOSwxNDEsMjQxLDcwLDI0OSwxNSw2MiwwLDE0OCwxNjMsMTM1LDUyLDEyMiw0MCw5Niw4NywzMSwxNzksMTUyLDUxLDIxNiwxMzMsMTg0LDEyMiwxOTgsMjAzLDYwLDExNSwyMTgsMTkxLDE5MywxNiwxNzgsMjUsMTQ4LDI1MiwxMTIsMTA0LDEwMywyNTIsMzYsOTIsMjIxLDI4LDE3OSw0MywxOTksMTk4LDE1MSwxMjgsMTAwLDI1MiwyMTcsMTYxLDI0OSwzNCwyMDEsMTcyLDExOCw1MiwxODAsMjUyLDEwNCw3LDIyMyw0NCwxMTYsMTAyLDIxMiwyMSw0MCwyMjQsMTg0LDU1LDE2MywyMTAsMjEsMjA3LDE2MSwyMzksNTEsNTQsMTU1LDQxLDEzMywxOCw2Nyw0OCwzLDE2NSwxMzAsMjUxLDQsNzksMjE0LDU3LDcyLDEzMCwxNTcsMjEyLDE0NF07ZnVuY3Rpb24gQ2UoZSx0LG4pe3ZhciBpPWUuZ2wsYT01LHI9LjEsbz0uNSxzPTE3NS8xODAqMy4xNDE1OTMsYz0xMTUvMTgwKjMuMTQxNTkzLGQ9MTczLzE4MCozLjE0MTU5Myx1PTExNi8xODAqMy4xNDE1OTMsbD0yLjA0MjAzNTQ1LHA9MCxmPTAsbT0wLGc9W10sdj1bMCwxLDMsNCw2LDcsOSwxMCwxMiwxMywxNSwxNiwxOCwxOSwyMSwyMiwyNCwyNiwyOSwzMSwzNCwzNiwzOSw0MSw0NCw0Niw0OSw1MSw1NCw1Niw1OSw2MSw2NCw2NSw2Niw2Nyw2OCw2OSw3MCw3Miw3Myw3NCw3NSw3Niw3Nyw3OSw4MCw4MSw4Miw4Myw4NCw4NSw4Nyw4OCw4OSw5MCw5MSw5Miw5NCw5NSw5Niw5Nyw5OCw5OSwxMDEsMTAyLDEwMywxMDQsMTA1LDEwNiwxMDcsMTA5LDExMCwxMTEsMTEyLDExMywxMTQsMTE2LDExNywxMTgsMTE5LDEyMCwxMjEsMTIzLDEyNCwxMjUsMTI2LDEyNywxMjgsMTI5LDEzMSwxMzIsMTMzLDEzNCwxMzUsMTM2LDEzOCwxMzksMTQwLDE0MSwxNDIsMTQzLDE0NSwxNDYsMTQ3LDE0OCwxNDksMTUwLDE1MSwxNTMsMTU0LDE1NSwxNTYsMTU3LDE1OCwxNjAsMTYxLDE2MiwxNjMsMTY0LDE2NSwxNjYsMTY4LDE2OSwxNzAsMTcxLDE3MiwxNzMsMTc1LDE3NiwxNzcsMTc4LDE3OSwxODAsMTgyLDE4MywxODQsMTg1LDE4NiwxODcsMTg4LDE5MCwxOTEsMTkyLDE5MywxOTQsMTk1LDE5NywxOTgsMTk5LDIwMCwyMDEsMjAyLDIwNCwyMDUsMjA2LDIwNywyMDgsMjA5LDIxMCwyMTIsMjEzLDIxNCwyMTUsMjE2LDIxNywyMTksMjIwLDIyMSwyMjIsMjIzLDIyNCwyMjYsMjI2LDIyNiwyMjcsMjI3LDIyNywyMjgsMjI4LDIyOCwyMjksMjI5LDIyOSwyMzAsMjMwLDIzMSwyMzEsMjMxLDIzMiwyMzIsMjMyLDIzMywyMzMsMjMzLDIzNCwyMzQsMjM1LDIzNSwyMzUsMjM2LDIzNiwyMzYsMjM3LDIzNywyMzcsMjM4LDIzOCwyMzksMjM5LDIzOSwyNDAsMjQwLDI0MCwyNDEsMjQxLDI0MSwyNDIsMjQyLDI0MywyNDMsMjQzLDI0NCwyNDQsMjQ0LDI0NSwyNDUsMjQ1LDI0NiwyNDYsMjQ2LDI0NywyNDcsMjQ3LDI0OCwyNDgsMjQ4LDI0OSwyNDksMjQ5LDI1MCwyNTAsMjUwLDI1MSwyNTEsMjUxLDI1MiwyNTIsMjUyLDI1MywyNTMsMjUzLDI1NCwyNTQsMjU0LDI1NV0saD1bMCwxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxNywxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMiwzMywzNSwzNiwzNywzOSw0MCw0Miw0Myw0NCw0Niw0Nyw0OSw1MCw1MSw1Myw1NCw1Niw1Nyw1OCw1OSw2MSw2Miw2Myw2NCw2Niw2Nyw2OCw2OSw3MSw3Miw3Myw3NCw3Niw3Nyw3OCw3OSw4MSw4Miw4Myw4NCw4Niw4Nyw4OCw5MCw5MSw5Miw5Myw5NSw5Niw5Nyw5OCwxMDAsMTAxLDEwMiwxMDMsMTA1LDEwNiwxMDcsMTA4LDExMCwxMTEsMTEyLDExMywxMTUsMTE2LDExNywxMTgsMTIwLDEyMSwxMjIsMTI0LDEyNSwxMjYsMTI3LDEyOSwxMzAsMTMxLDEzMiwxMzQsMTM1LDEzNiwxMzcsMTM5LDE0MCwxNDEsMTQyLDE0NCwxNDUsMTQ2LDE0NywxNDksMTUwLDE1MSwxNTIsMTU0LDE1NSwxNTYsMTU4LDE1OSwxNjAsMTYxLDE2MywxNjQsMTY1LDE2NiwxNjgsMTY5LDE3MCwxNzEsMTczLDE3NCwxNzUsMTc2LDE3OCwxNzksMTgwLDE4MSwxODMsMTg0LDE4NSwxODYsMTg4LDE4OSwxOTAsMTkyLDE5MywxOTQsMTk1LDE5NywxOTgsMTk5LDIwMCwyMDIsMjAzLDIwNCwyMDUsMjA3LDIwOCwyMDksMjEwLDIxMiwyMTMsMjE0LDIxNSwyMTcsMjE4LDIxOSwyMjAsMjIyLDIyMywyMjQsMjI2LDIyNiwyMjYsMjI3LDIyNywyMjgsMjI4LDIyOSwyMjksMjMwLDIzMCwyMzEsMjMxLDIzMiwyMzIsMjMzLDIzMywyMzQsMjM0LDIzNCwyMzUsMjM1LDIzNiwyMzYsMjM3LDIzNywyMzgsMjM4LDIzOSwyMzksMjQwLDI0MCwyNDEsMjQxLDI0MiwyNDIsMjQzLDI0MywyNDMsMjQ0LDI0NCwyNDQsMjQ1LDI0NSwyNDUsMjQ2LDI0NiwyNDYsMjQ3LDI0NywyNDcsMjQ4LDI0OCwyNDgsMjQ5LDI0OSwyNDksMjUwLDI1MCwyNTAsMjUxLDI1MSwyNTEsMjUyLDI1MiwyNTIsMjUzLDI1MywyNTMsMjU0LDI1NCwyNTQsMjU1XSxTPVsxLDIsMyw0LDUsNiw3LDgsOSwxMCwxMSwxMiwxMywxNCwxNSwxNiwxOCwxOSwyMCwyMSwyMiwyMywyNCwyNSwyNiwyNywyOCwyOSwzMCwzMSwzMiwzMywzNSwzNiwzNywzOCwzOSw0MCw0MSw0Myw0NCw0NSw0Niw0Nyw0OCw1MCw1MSw1Miw1Myw1NCw1NSw1Niw1OCw1OSw2MCw2MSw2Miw2Myw2NSw2Niw2Nyw2OCw2OSw3MCw3Miw3Myw3NCw3Niw3Nyw3OCw4MCw4MSw4Myw4NCw4NSw4Nyw4OCw4OSw5MSw5Miw5NCw5NSw5Niw5OCw5OSwxMDAsMTAyLDEwMywxMDUsMTA2LDEwNywxMDksMTEwLDExMSwxMTMsMTE0LDExNiwxMTcsMTE4LDEyMCwxMjEsMTIyLDEyNCwxMjUsMTI3LDEyOCwxMjksMTMxLDEzMiwxMzMsMTM1LDEzNiwxMzgsMTM5LDE0MCwxNDIsMTQzLDE0NCwxNDYsMTQ3LDE0OSwxNTAsMTUxLDE1MywxNTQsMTU1LDE1NywxNTgsMTYwLDE2MSwxNjIsMTYzLDE2NCwxNjUsMTY2LDE2NywxNjgsMTY5LDE3MCwxNzEsMTcyLDE3MywxNzQsMTc1LDE3NiwxNzcsMTc4LDE3OSwxODAsMTgxLDE4MiwxODMsMTg0LDE4NSwxODYsMTg3LDE4OCwxODksMTkwLDE5MSwxOTIsMTkyLDE5MywxOTMsMTk0LDE5NSwxOTUsMTk2LDE5NywxOTcsMTk4LDE5OSwxOTksMjAwLDIwMSwyMDEsMjAyLDIwMywyMDMsMjA0LDIwNSwyMDUsMjA2LDIwNywyMDcsMjA4LDIwOSwyMDksMjEwLDIxMSwyMTEsMjEyLDIxMywyMTMsMjE0LDIxNSwyMTUsMjE2LDIxNywyMTcsMjE4LDIxOSwyMTksMjIwLDIyMSwyMjEsMjIyLDIyMywyMjMsMjI0LDIyNSwyMjUsMjI2LDIyNywyMjcsMjI4LDIyOSwyMjksMjMwLDIzMSwyMzEsMjMyLDIzMywyMzMsMjM0LDIzNSwyMzUsMjM2LDIzNywyMzcsMjM4LDIzOSwyMzksMjQwLDI0MSwyNDEsMjQyLDI0MywyNDMsMjQ0LDI0NSwyNDUsMjQ2LDI0NywyNDcsMjQ4LDI0OSwyNDksMjUwLDI1MSwyNTEsMjUyLDI1MywyNTMsMjU0LDI1NV07dGhpcy5wcm9ncmFtPVNlKGksT2UpLHRoaXMuc2V0VW5pZm9ybXM9ZnVuY3Rpb24oKXt2YXIgdD1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2ZsaXBZXCIpLG49aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9kZW5vaXNlTGV2ZWxcIik7aS51bmlmb3JtMWYobixhKSxpLnVuaWZvcm0xZih0LDEpO3ZhciB2PWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcImxpZ2h0XCIpO2kudW5pZm9ybTFmKHYscik7dmFyIGg9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwicmVkbmVzc1wiKTtpLnVuaWZvcm0xZihoLG8pO3ZhciBTPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInNraW5faGVfbWF4XCIpLF89aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwic2tpbl9oZV9taW5cIiksRT1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJza2luX2hjX21heFwiKSxJPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInNraW5faGNfbWluXCIpLHk9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwic2tpbl9oY19heGlzXCIpLFQ9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwiZmFjdHNfcm90YXRlX2NcIiksYj1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJmYWN0c19yb3RhdGVfbGVcIiksUj1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJmYWN0c19yb3RhdGVfZ2VcIik7aS51bmlmb3JtMWYoUyxzKSxpLnVuaWZvcm0xZihfLGMpLGkudW5pZm9ybTFmKEUsZCksaS51bmlmb3JtMWYoSSx1KSxpLnVuaWZvcm0xZih5LGwpLGkudW5pZm9ybTFmKFQscCksaS51bmlmb3JtMWYoYixmKSxpLnVuaWZvcm0xZihSLG0pO3ZhciBBPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfb3JpZ2luSW1hZ2VcIik7aS5hY3RpdmVUZXh0dXJlKGkuVEVYVFVSRTIpLGkuYmluZFRleHR1cmUoaS5URVhUVVJFXzJELGUuaW5wdXRUZXh0dXJlKSxpLnVuaWZvcm0xaShBLDIpO2Zvcih2YXIgTz1bXCJsaWdodGVuX2x1dFwiXSxDPVtpLlRFWFRVUkUzXSxOPTA7TjxPLmxlbmd0aDtOKyspe3ZhciB3PWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxPW05dKTtpLmFjdGl2ZVRleHR1cmUoQ1tOXSksaS5iaW5kVGV4dHVyZShpLlRFWFRVUkVfMkQsZ1tOXSksaS51bmlmb3JtMWkodyxOKzMpfX0sdGhpcy5zZXRQYXJhbWV0ZXJzPWZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWUuZGVub2lzZUxldmVsJiYoYT1lLmRlbm9pc2VMZXZlbCksdm9pZCAwIT09ZS5saWdodExldmVsJiYocj1lLmxpZ2h0TGV2ZWwpLHZvaWQgMCE9PWUucmVkbmVzc0xldmVsJiYobz1lLnJlZG5lc3NMZXZlbCx0aGlzLl91cGRhdGVSZWRuZXNzKG8pKSx2b2lkIDAhPT1lLmxpZ2h0ZW5pbmdDb250cmFzdExldmVsJiZ0aGlzLl91cGRhdGVMdXQoZS5saWdodGVuaW5nQ29udHJhc3RMZXZlbCl9LHRoaXMuX3VwZGF0ZVJlZG5lc3M9ZnVuY3Rpb24oZSl7dmFyIHQsbixpPTMuMTQxNTkzLGE9ZSxyPWE7YT4xJiYoYT0xKSxhPDAmJihhPTApLHI+MSYmKHI9MSkscjwwJiYocj0wKSxwPS44KmEscjwuOCYmKHI9MCksKGw9KDExNy00KnIpLzE4MCppKTwodT0oMTE2LTQqcikvMTgwKmkpJiYobD11KSx1PGkvMiYmKHU9aS8yKSxsPGkvMiYmKGw9aS8yKSwoYz0oMTE1LTQqcikvMTgwKmkpPGkvMiYmKGM9aS8yKSwoZD0xNzMvMTgwKmkpPmkmJihkPWkpLGw+aSYmKGw9aSksKHM9MTc1LzE4MCppKT5pJiYocz1pKSxuPWQtbCxtPSh0PXMtZCk+LjAxP3Aqbi90OnAsbj1sLXUsZj0odD11LWMpPi4wMT9wKm4vdDpwfSx0aGlzLl91cGRhdGVMdXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbDswPT1lJiYodD1oKSwxPT1lJiYodD1TKSwyPT1lJiYodD12KTtmb3IodmFyIG49W25ldyBVaW50OEFycmF5KHQpXSxhPVsyNTZdLHI9WzFdLG89MDtvPG4ubGVuZ3RoO28rKylpLmJpbmRUZXh0dXJlKGkuVEVYVFVSRV8yRCxnW29dKSxpLnRleEltYWdlMkQoaS5URVhUVVJFXzJELDAsaS5MVU1JTkFOQ0UsYVtvXSxyW29dLDAsaS5MVU1JTkFOQ0UsaS5VTlNJR05FRF9CWVRFLG5bb10pfSx0aGlzLl9pbml0PWZ1bmN0aW9uKCl7dmFyIGU9bnVsbDtlPWg7Zm9yKHZhciB0PVtuZXcgVWludDhBcnJheShlKV0sbj1bMjU2XSxhPVsxXSxyPTA7cjx0Lmxlbmd0aDtyKyspe3ZhciBvPWkuY3JlYXRlVGV4dHVyZSgpO2kuYmluZFRleHR1cmUoaS5URVhUVVJFXzJELG8pLGkudGV4SW1hZ2UyRChpLlRFWFRVUkVfMkQsMCxpLkxVTUlOQU5DRSxuW3JdLGFbcl0sMCxpLkxVTUlOQU5DRSxpLlVOU0lHTkVEX0JZVEUsdFtyXSksaS50ZXhQYXJhbWV0ZXJpKGkuVEVYVFVSRV8yRCxpLlRFWFRVUkVfV1JBUF9TLGkuQ0xBTVBfVE9fRURHRSksaS50ZXhQYXJhbWV0ZXJpKGkuVEVYVFVSRV8yRCxpLlRFWFRVUkVfV1JBUF9ULGkuQ0xBTVBfVE9fRURHRSksaS50ZXhQYXJhbWV0ZXJpKGkuVEVYVFVSRV8yRCxpLlRFWFRVUkVfTUlOX0ZJTFRFUixpLkxJTkVBUiksaS50ZXhQYXJhbWV0ZXJpKGkuVEVYVFVSRV8yRCxpLlRFWFRVUkVfTUFHX0ZJTFRFUixpLkxJTkVBUiksZy5wdXNoKG8pfX0sdGhpcy5faW5pdCgpfXZhciBOZT0hMTtmdW5jdGlvbiB3ZSgpe3RoaXMucHJvZ3JhbXM9W107dmFyIGU9dGhpcyx0PW51bGwsbj1udWxsO2UuZ2w9bnVsbCxlLmlucHV0VGV4dHVyZT1udWxsO3ZhciBpPVtdLGE9W10scj0wLG89MDtlLl9pbml0R2w9ZnVuY3Rpb24obixzKXtlLmlucHV0VGV4dHVyZT10LmNyZWF0ZVRleHR1cmUoKSx0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxlLmlucHV0VGV4dHVyZSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9TLHQuQ0xBTVBfVE9fRURHRSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9ULHQuQ0xBTVBfVE9fRURHRSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfTUlOX0ZJTFRFUix0LkxJTkVBUiksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfTUFHX0ZJTFRFUix0LkxJTkVBUik7Zm9yKHZhciBjPTA7Yzw0O2MrKyl7dmFyIGQ9dC5jcmVhdGVUZXh0dXJlKCk7dC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsZCksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9TLHQuQ0xBTVBfVE9fRURHRSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfV1JBUF9ULHQuQ0xBTVBfVE9fRURHRSksdC50ZXhQYXJhbWV0ZXJpKHQuVEVYVFVSRV8yRCx0LlRFWFRVUkVfTUlOX0ZJTFRFUix0LkxJTkVBUiksYzwyP3QudGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQsMCx0LlJHQkEsbixzLDAsdC5SR0JBLHQuVU5TSUdORURfQllURSxudWxsKTp0LnRleEltYWdlMkQodC5URVhUVVJFXzJELDAsdC5SR0JBLHMsbiwwLHQuUkdCQSx0LlVOU0lHTkVEX0JZVEUsbnVsbCk7dmFyIHU9dC5jcmVhdGVGcmFtZWJ1ZmZlcigpO3QuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsdSksdC5mcmFtZWJ1ZmZlclRleHR1cmUyRCh0LkZSQU1FQlVGRkVSLHQuQ09MT1JfQVRUQUNITUVOVDAsdC5URVhUVVJFXzJELGQsMCksaS5wdXNoKGQpLGEucHVzaCh1KX10LnZpZXdwb3J0KDAsMCxuLHMpLHI9bixvPXN9LGUucmVuZGVyPWZ1bmN0aW9uKHMpe2lmKHQpe3ZhciBjPTA7bz09cy52aWRlb1dpZHRoJiZyPT09cy52aWRlb0hlaWdodCYmKGM9MiksdC52aWV3cG9ydCgwLDAscy52aWRlb1dpZHRoLHMudmlkZW9IZWlnaHQpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELGUuaW5wdXRUZXh0dXJlKSx0LnRleEltYWdlMkQodC5URVhUVVJFXzJELDAsdC5SR0JBLHQuUkdCQSx0LlVOU0lHTkVEX0JZVEUscyk7Zm9yKHZhciBkPU5lP2UucHJvZ3JhbXMubGVuZ3RoLTE6MCx1PTA7dTw9ZDt1Kyspe3ZhciBsPWUucHJvZ3JhbXNbdV0ucHJvZ3JhbTt0LnVzZVByb2dyYW0obCk7dmFyIHA9dC5nZXRVbmlmb3JtTG9jYXRpb24obCxcInVfaW1hZ2VcIik7ZS5wcm9ncmFtc1t1XS5zZXRVbmlmb3JtcygpLHQuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsYVtjK3UlMl0pLHQuY2xlYXJDb2xvcigwLDAsMCwxKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVCksdC5kcmF3QXJyYXlzKHQuVFJJQU5HTEVTLDAsNiksdC5hY3RpdmVUZXh0dXJlKHQuVEVYVFVSRTApLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELGlbYyt1JTJdKSx0LnVuaWZvcm0xaShwLDApfXQudXNlUHJvZ3JhbShuKTt2YXIgZj10LmdldFVuaWZvcm1Mb2NhdGlvbihuLFwidV9mbGlwWVwiKTt0LnVuaWZvcm0xZihmLC0xKSx0LmJpbmRGcmFtZWJ1ZmZlcih0LkZSQU1FQlVGRkVSLG51bGwpLHQuY2xlYXJDb2xvcigwLDAsMCwxKSx0LmNsZWFyKHQuQ09MT1JfQlVGRkVSX0JJVCksdC5kcmF3QXJyYXlzKHQuVFJJQU5HTEVTLDAsNil9fSxlLnNldEVuYWJsZUJlYXV0eT1mdW5jdGlvbihlKXtOZT1lfSxlLmluaXQ9ZnVuY3Rpb24oaSxhLHIpe2lmKFwidW5kZWZpbmVkXCI9PXR5cGVvZiBXZWJHTFJlbmRlcmluZ0NvbnRleHQpdGhyb3cgbmV3IEVycm9yKFwiTk9UX1NVUFBPUlRcIik7dD1yLmdldENvbnRleHQoXCJ3ZWJnbFwiKSxlLmdsPXQsZS5faW5pdEdsKGksYSksZS5wcm9ncmFtcy5wdXNoKG5ldyBFZSh0aGlzLGksYSkpLGUucHJvZ3JhbXMucHVzaChuZXcgeWUodGhpcyxpLGEpKSxlLnByb2dyYW1zLnB1c2gobmV3IGJlKHRoaXMsaSxhKSksZS5wcm9ncmFtcy5wdXNoKG5ldyBBZSh0aGlzLGksYSkpLGUucHJvZ3JhbXMucHVzaChuZXcgQ2UodGhpcyxpLGEpKSxuPWUucHJvZ3JhbXNbMF0ucHJvZ3JhbX0sZS5yZWxlYXNlPWZ1bmN0aW9uKCl7ZS5nbD1udWxsLHQ9bnVsbCxuPW51bGwsZS5pbnB1dFRleHR1cmU9bnVsbCxlLnByb2dyYW1zPVtdLGk9W10sYT1bXX0sZS5zZXREZW5vaXNlTGV2ZWw9ZnVuY3Rpb24odCl7ZS5wcm9ncmFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc2V0UGFyYW1ldGVycyYmZS5zZXRQYXJhbWV0ZXJzKHtkZW5vaXNlTGV2ZWw6dH0pfSl9LGUuc2V0TGlnaHRMZXZlbD1mdW5jdGlvbih0KXtlLnByb2dyYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zZXRQYXJhbWV0ZXJzJiZlLnNldFBhcmFtZXRlcnMoe2xpZ2h0TGV2ZWw6dH0pfSl9LGUuc2V0UmVkbmVzc0xldmVsPWZ1bmN0aW9uKHQpe2UucHJvZ3JhbXMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNldFBhcmFtZXRlcnMmJmUuc2V0UGFyYW1ldGVycyh7cmVkbmVzc0xldmVsOnR9KX0pfSxlLnNldENvbnRyYXN0TGV2ZWw9ZnVuY3Rpb24odCl7ZS5wcm9ncmFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc2V0UGFyYW1ldGVycyYmZS5zZXRQYXJhbWV0ZXJzKHtsaWdodGVuaW5nQ29udHJhc3RMZXZlbDp0fSl9KX0sZS5zZXRTaXplPWZ1bmN0aW9uKHQsbil7ZS5wcm9ncmFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc2V0U2l6ZSYmZS5zZXRTaXplKHQsbil9KX19d2UuX2luc3RhbmNlPW51bGwsd2UuZ2V0SW5zdGFuY2U9ZnVuY3Rpb24oKXtyZXR1cm4gd2UuX2luc3RhbmNlfHwod2UuX2luc3RhbmNlPW5ldyB3ZSksd2UuX2luc3RhbmNlfTt2YXIga2U9MzAsRGU9bnVsbCxMZT0hMSxNZT01LFBlPS4zNSx4ZT0uNSxWZT0xLFVlPW51bGwsamU9bnVsbDt2YXIgRmU9e2FkZFZpZGVvRWZmZWN0Q2FwYWJpbGl0eTpmdW5jdGlvbihlKXtlLnZpZGVvRWZmZWN0PXt2aWRlb0NvbnRleHRJbml0ZWQ6ITEsb3JpZ2luVmlkZW9UcmFjazpudWxsLGNhbnZhc1ZpZGVvVHJhY2s6bnVsbCxjdHg6bnVsbH0sZS5faW5pdFZpZGVvQ29udGV4dD1mdW5jdGlvbigpe2lmKGUudmlkZW9FZmZlY3QudmlkZW9Db250ZXh0SW5pdGVkKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBpbml0IHZpZGVvIGNvbnRleHQuIEFscmVhZHkgaW5pdGVkXCIpO2lmKCFlLnN0cmVhbSl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5pdCB2aWRlbyBjb250ZXh0LiBMb2NhbCBTdHJlYW0gbm90IGluaXRpYWxpemVkXCIpO2UudmlkZW9FZmZlY3Qub3JpZ2luVmlkZW9UcmFjaz1lLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLGUuYXR0cmlidXRlcyYmZS5hdHRyaWJ1dGVzLm1heEZyYW1lUmF0ZSYmKGtlPWUuYXR0cmlidXRlcy5tYXhGcmFtZVJhdGUpLGUudmlkZW9FZmZlY3QudmlkZW9Db250ZXh0SW5pdGVkPSEwfSxlLl9yZW5kZXJXaXRoV2ViR0w9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQpe2plfHwoamU9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImNhbnZhc1wiKSksVWV8fChVZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidmlkZW9cIikpLFVlLnNldEF0dHJpYnV0ZShcImF1dG9wbGF5XCIsXCJcIiksVWUuc2V0QXR0cmlidXRlKFwibXV0ZWRcIixcIlwiKSxVZS5tdXRlZD0hMCxVZS5zZXRBdHRyaWJ1dGUoXCJwbGF5c2lubGluZVwiLFwiXCIpLFVlLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJkaXNwbGF5Om5vbmVcIiksVWUuc3JjT2JqZWN0PWU7dmFyIG49ZS5nZXRWaWRlb1RyYWNrcygpWzBdLmdldFNldHRpbmdzKCksaT1uLndpZHRoLGE9bi5oZWlnaHQ7Y29uc29sZS5sb2coXCJXaWR0aDogXCIuY29uY2F0KGksXCIsIEhlaWdodDogXCIpLmNvbmNhdChhKSksamUuc2V0QXR0cmlidXRlKFwid2lkdGhcIixpKSxqZS5zZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIixhKSxVZS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGkpLFVlLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGEpO3ZhciByPXdlLmdldEluc3RhbmNlKCk7ci5pbml0KFVlLndpZHRoLFVlLmhlaWdodCxqZSksci5zZXREZW5vaXNlTGV2ZWwoTWUpLHIuc2V0TGlnaHRMZXZlbChQZSksci5zZXRSZWRuZXNzTGV2ZWwoeGUpLHIuc2V0Q29udHJhc3RMZXZlbChWZSksVWUuYWRkRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIixmdW5jdGlvbiBlKCl7dmFyIG49amUuY2FwdHVyZVN0cmVhbShrZSk7VWUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBsYXlpbmdcIixlLCEwKSx0KFtuLmdldFZpZGVvVHJhY2tzKClbMF0sVWVdKX0sITApLFVlLnBsYXkoKX0pfSxlLl9kaXNhYmxlRWZmZWN0PWZ1bmN0aW9uKCl7ZS52aWRlb0VmZmVjdC52aWRlb0NvbnRleHRJbml0ZWR8fGUuX2luaXRWaWRlb0NvbnRleHQoKTt2YXIgdD1lLnZpZGVvRWZmZWN0Lm9yaWdpblZpZGVvVHJhY2s7aWYoIXQpcmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiVmlkZW8gdHJhY2sgaXMgbnVsbCwgZmFpbCB0byBkaXNhYmxlIHZpZGVvIGVmZmVjdCFcIiksUHJvbWlzZS5yZXNvbHZlKCk7aWYoZS5wYyYmZS5wYy5wZWVyQ29ubmVjdGlvbiYmZS5wYy5wZWVyQ29ubmVjdGlvbil7dmFyIG49KGUucGMucGVlckNvbm5lY3Rpb24mJmUucGMucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLnRyYWNrJiZcInZpZGVvXCI9PWUudHJhY2sua2luZH0pO2lmKG4mJm4ucmVwbGFjZVRyYWNrJiZ0KXJldHVybiBuLnJlcGxhY2VUcmFjayh0KX1yZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCl9LGUuX3JlbGVhc2VFZmZlY3Q9ZnVuY3Rpb24oKXt2YXIgdDtyZXR1cm4gdD1MZT9lLl9kaXNhYmxlRWZmZWN0KCk6UHJvbWlzZS5yZXNvbHZlKCksd2UuZ2V0SW5zdGFuY2UoKS5yZWxlYXNlKCksZS52aWRlb0VmZmVjdC52aWRlb0NvbnRleHRJbml0ZWQ9ITEsZS52aWRlb0VmZmVjdC5jYW52YXNWaWRlb1RyYWNrPW51bGwsdH0sZS5fZW5hYmxlRWZmZWN0PWZ1bmN0aW9uKCl7cmV0dXJuIGUudmlkZW9FZmZlY3QudmlkZW9Db250ZXh0SW5pdGVkfHxlLl9pbml0VmlkZW9Db250ZXh0KCksZS52aWRlb0VmZmVjdC5vcmlnaW5WaWRlb1RyYWNrPyhlLnZpZGVvRWZmZWN0LmNhbnZhc1ZpZGVvVHJhY2s/KGUuX3Nob3dFZmZlY3RJbkxvY2FsUGxheWVyKCksZS5fcmVwbGFjZVdpdGhDYW52YXNUcmFjaygpKTplLl9yZW5kZXJXaXRoV2ViR0woZS5zdHJlYW0pLnRoZW4oZnVuY3Rpb24odCl7dmFyIG49cGUoKSh0LDIpLGk9blswXSxhPW5bMV07ZS52aWRlb0VmZmVjdC5jYW52YXNWaWRlb1RyYWNrPWk7dmFyIHI9d2UuZ2V0SW5zdGFuY2UoKTtyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoZnVuY3Rpb24gdCgpe0xlJiZyLnJlbmRlcihhKSxlLnZpZGVvRWZmZWN0LnZpZGVvQ29udGV4dEluaXRlZCYmcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHQpfSksbS5pc0Nocm9tZSgpJiZkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwidmlzaWJpbGl0eWNoYW5nZVwiLGZ1bmN0aW9uKCl7ZG9jdW1lbnQuaGlkZGVuLGRvY3VtZW50LmhpZGRlbj9EZT1mdW5jdGlvbihlLHQpe3ZhciBuPXQvMWUzLGk9bmV3IEF1ZGlvQ29udGV4dCxhPWkuY3JlYXRlR2FpbigpO2EuZ2Fpbi52YWx1ZT0wLGEuY29ubmVjdChpLmRlc3RpbmF0aW9uKSxmdW5jdGlvbiB0KCl7dmFyIG89aS5jcmVhdGVPc2NpbGxhdG9yKCk7by5vbmVuZGVkPXQsby5jb25uZWN0KGEpLG8uc3RhcnQoMCksby5zdG9wKGkuY3VycmVudFRpbWUrbiksZShpLmN1cnJlbnRUaW1lKSxyJiYoby5vbmVuZGVkPWZ1bmN0aW9uKCl7aS5jbG9zZSgpfSl9KCk7dmFyIHI9ITE7cmV0dXJuIGZ1bmN0aW9uKCl7cj0hMH19KGZ1bmN0aW9uKCl7TGUmJnIucmVuZGVyKGEpfSxrZSk6RGUmJihEZSgpLERlPW51bGwpfSwhMSksZS5fc2hvd0VmZmVjdEluTG9jYWxQbGF5ZXIoKSxlLl9yZXBsYWNlV2l0aENhbnZhc1RyYWNrKCl9KSxQcm9taXNlLnJlc29sdmUoKSk6KG8uZGVmYXVsdC53YXJuaW5nKFwiVmlkZW8gdHJhY2sgaXMgbnVsbCwgZmFpbCB0byBlbmFibGUgdmlkZW8gZWZmZWN0IVwiKSxQcm9taXNlLnJlc29sdmUoKSl9LGUuX3Nob3dFZmZlY3RJbkxvY2FsUGxheWVyPWZ1bmN0aW9uKCl7aWYoZS5wbGF5ZXIpe3ZhciB0PWUucGxheWVyLmRpdi5jaGlsZHJlblswXTtpZihcIm5vbmVcIiE9PXQuc3R5bGUuZGlzcGxheSYmKGUucGxheWVyLmRpdi5hcHBlbmRDaGlsZChqZSksXCJ2aWRlb1wiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkpKXt2YXIgbj10LmdldEF0dHJpYnV0ZShcInN0eWxlXCIpO2plLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsbiksXCJub25lXCIhPT10LnN0eWxlLmRpc3BsYXkmJih0LnN0eWxlLmRpc3BsYXk9XCJub25lXCIpfX19LGUuX3JlbW92ZUVmZmVjdEZyb21Mb2NhbFBsYXllcj1mdW5jdGlvbigpe2lmKGUucGxheWVyJiZlLnBsYXllci5kaXYmJkxlJiZqZSl7ZS5wbGF5ZXIuZGl2LnJlbW92ZUNoaWxkKGplKTt2YXIgdD1lLnBsYXllci5kaXYuY2hpbGRyZW5bMF07XCJ2aWRlb1wiPT09dC50YWdOYW1lLnRvTG93ZXJDYXNlKCkmJihqZS5zdHlsZS5kaXNwbGF5PVwibm9uZVwiLHQuc3R5bGUuZGlzcGxheT1cImJsb2NrXCIpfX0sZS5fcmVwbGFjZVdpdGhDYW52YXNUcmFjaz1mdW5jdGlvbigpe3ZhciB0PW51bGw7ZS5wYyYmZS5wYy5wZWVyQ29ubmVjdGlvbiYmZS5wYy5wZWVyQ29ubmVjdGlvbiYmKHQ9KGUucGMucGVlckNvbm5lY3Rpb24mJmUucGMucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpKS5maW5kKGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLnRyYWNrJiZcInZpZGVvXCI9PWUudHJhY2sua2luZH0pKSx0JiZ0LnJlcGxhY2VUcmFjayYmZS52aWRlb0VmZmVjdC5jYW52YXNWaWRlb1RyYWNrJiZ0LnJlcGxhY2VUcmFjayhlLnZpZGVvRWZmZWN0LmNhbnZhc1ZpZGVvVHJhY2spfSxlLnNldEJlYXV0eUVmZmVjdE9wdGlvbnM9KHQ9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gdChuLGkpe3ZhciBhO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6aWYoT2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShuLFwiZW5hYmxlZFwiKSxhPXdlLmdldEluc3RhbmNlKCksTGU9PW4pe3QubmV4dD0xMzticmVha31pZihhLnNldEVuYWJsZUJlYXV0eShuKSwhbil7dC5uZXh0PTk7YnJlYWt9cmV0dXJuIHQubmV4dD03LGUuX2VuYWJsZUVmZmVjdCgpO2Nhc2UgNzp0Lm5leHQ9MTI7YnJlYWs7Y2FzZSA5OnJldHVybiBlLl9yZW1vdmVFZmZlY3RGcm9tTG9jYWxQbGF5ZXIoKSx0Lm5leHQ9MTIsZS5fcmVsZWFzZUVmZmVjdCgpO2Nhc2UgMTI6TGU9bjtjYXNlIDEzOmlmKG4pe3QubmV4dD0xNTticmVha31yZXR1cm4gdC5hYnJ1cHQoXCJyZXR1cm5cIik7Y2FzZSAxNTppZighaSl7dC5uZXh0PTE5O2JyZWFrfU9iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KShpLFwib3B0aW9uc1wiKSx0Lm5leHQ9MjA7YnJlYWs7Y2FzZSAxOTpyZXR1cm4gdC5hYnJ1cHQoXCJyZXR1cm5cIik7Y2FzZSAyMDppZih2b2lkIDAhPT1pLnNtb290aG5lc3NMZXZlbCYmKE9iamVjdChyZS5jaGVja1ZhbGlkRmxvYXROdW1iZXIpKGkuc21vb3RobmVzc0xldmVsLFwic21vb3RobmVzc0xldmVsXCIsMCwxKSwoTWU9MTAqaS5zbW9vdGhuZXNzTGV2ZWwpPC4xJiYoTWU9LjEpLGEuc2V0RGVub2lzZUxldmVsKE1lKSksdm9pZCAwIT09aS5saWdodGVuaW5nTGV2ZWwmJihPYmplY3QocmUuY2hlY2tWYWxpZEZsb2F0TnVtYmVyKShpLmxpZ2h0ZW5pbmdMZXZlbCxcImxpZ2h0ZW5pbmdMZXZlbFwiLDAsMSksKFBlPWkubGlnaHRlbmluZ0xldmVsLzIpPC4wMSYmKFBlPS4wMSksYS5zZXRMaWdodExldmVsKFBlKSksdm9pZCAwIT09aS5yZWRuZXNzTGV2ZWwmJihPYmplY3QocmUuY2hlY2tWYWxpZEZsb2F0TnVtYmVyKShpLnJlZG5lc3NMZXZlbCxcInJlZG5lc3NMZXZlbFwiLDAsMSksKHhlPWkucmVkbmVzc0xldmVsKTwuMDEmJih4ZT0uMDEpLGEuc2V0UmVkbmVzc0xldmVsKHhlKSksdm9pZCAwPT09aS5saWdodGVuaW5nQ29udHJhc3RMZXZlbCl7dC5uZXh0PTI4O2JyZWFrfWlmKDA9PT1pLmxpZ2h0ZW5pbmdDb250cmFzdExldmVsfHwxPT09aS5saWdodGVuaW5nQ29udHJhc3RMZXZlbHx8Mj09PWkubGlnaHRlbmluZ0NvbnRyYXN0TGV2ZWwpe3QubmV4dD0yNjticmVha310aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIGxpZ2h0ZW5pbmdDb250cmFzdExldmVsOiBUaGUgdmFsdWUgc2hvdWxkIGJlIDAsIDEgb3IgMi5cIik7Y2FzZSAyNjpWZT1wYXJzZUZsb2F0KGkubGlnaHRlbmluZ0NvbnRyYXN0TGV2ZWwpLGEuc2V0Q29udHJhc3RMZXZlbChWZSk7Y2FzZSAyODpjYXNlXCJlbmRcIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMpfSkpLGZ1bmN0aW9uKGUsbil7cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSk7dmFyIHR9LHJlc3RvcmVWaWRlb0VmZmVjdDpmdW5jdGlvbihlKXtyZXR1cm4gTGU/ZS5fZW5hYmxlRWZmZWN0KCk6UHJvbWlzZS5yZXNvbHZlKCl9LGRpc2FibGVWaWRlb0VmZmVjdDpmdW5jdGlvbihlKXtyZXR1cm4gZS5fcmVsZWFzZUVmZmVjdD9lLl9yZWxlYXNlRWZmZWN0KCk6UHJvbWlzZS5yZXNvbHZlKCl9LGFwcGx5RWZmZWN0SW5QbGF5ZXI6ZnVuY3Rpb24oZSl7TGUmJmplJiZlLl9zaG93RWZmZWN0SW5Mb2NhbFBsYXllcigpfSxyZW1vdmVFZmZlY3RGcm9tTG9jYWxQbGF5ZXI6ZnVuY3Rpb24oZSl7ZS5fcmVtb3ZlRWZmZWN0RnJvbUxvY2FsUGxheWVyKCl9LHJlcGxhY2VXaXRoQ2FudmFzVHJhY2s6ZnVuY3Rpb24oZSl7TGUmJmUuX3JlcGxhY2VXaXRoQ2FudmFzVHJhY2soKX0sY2hlY2tWaWRlb0VmZmVjdEVuYWJsZWQ6ZnVuY3Rpb24oZSl7aWYoTGUmJmUudmlkZW9FZmZlY3QmJmUudmlkZW9FZmZlY3QudmlkZW9Db250ZXh0SW5pdGVkKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJPcGVyYXRpb24gbm90IHBlcm1pdHRlZDogXCIuY29uY2F0KFwiVklERU9fRUZGRUNUX0VOQUJMRURcIikpLFwiVklERU9fRUZGRUNUX0VOQUJMRURcIjtyZXR1cm4hMX19LEJlPWEoOCksSGU9YS5uKEJlKSxXZT1mdW5jdGlvbihlKXtPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykoZSxcInByb2ZpbGVOYW1lXCIpLC0xPT09KGU9ZS50b0xvd2VyQ2FzZSgpKS5pbmRleE9mKFwiX1wiKSYmKGUrPVwiXzFcIiksT2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShlLFwicHJvZmlsZU5hbWVcIixPYmplY3Qua2V5cyhyLlNVUFBPUlRfUkVTT0xVVElPTl9MSVNUKSk7dmFyIHQ9ci5TVVBQT1JUX1JFU09MVVRJT05fTElTVFtlXTt0fHwoZT1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiREVGQVVMVF9QUk9GSUxFXCIpLHQ9ci5TVVBQT1JUX1JFU09MVVRJT05fTElTVFtlXSk7dmFyIG49e3Byb2ZpbGVOYW1lOmUsdmlkZW86e3dpZHRoOnRbMF0saGVpZ2h0OnRbMV19LGF0dHJpYnV0ZXM6e3Jlc29sdXRpb246XCJcIi5jb25jYXQodFswXSxcInhcIikuY29uY2F0KHRbMV0pLG1pbkZyYW1lUmF0ZTp0WzJdLG1heEZyYW1lUmF0ZTp0WzNdLG1pblZpZGVvQlc6dFs0XSxtYXhWaWRlb0JXOnRbNV19fTtyZXR1cm4gdFsyXSYmdFszXSYmKG4udmlkZW8uZnJhbWVSYXRlPXtpZGVhbDp0WzJdLG1heDp0WzNdfSksdFs2XSYmdFs3XSYmKG4uc2NyZWVuPXt3aWR0aDp0WzBdLGhlaWdodDp0WzFdLGZyYW1lUmF0ZTp7bWluOnRbNl0sbWF4OnRbN119fSksbn0sR2U9ZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdC5rZXlzKHIuU1VQUE9SVF9SRVNPTFVUSU9OX0xJU1QpLmZpbHRlcihmdW5jdGlvbih0KXt2YXIgbj1yLlNVUFBPUlRfUkVTT0xVVElPTl9MSVNUW3RdLGk9W1wid2lkdGhcIixcImhlaWdodFwiLFwiZnJhbWVSYXRlXCJdO2Zvcih2YXIgYSBpbiBpKXt2YXIgbz1pW2FdO2lmKGVbb10mJm5bYV0pe2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlW29dLm1heCYmZVtvXS5tYXg8blthXSlyZXR1cm4hMTtpZihcIm51bWJlclwiPT10eXBlb2YgZVtvXS5taW4mJmVbb10ubWluPm5bYV0pcmV0dXJuITF9fXJldHVybiEwfSkucmV2ZXJzZSgpfSxxZT1mdW5jdGlvbihlKXt2YXIgdD1yLkFVRElPX1BST0ZJTEVfU0VUVElOR1NbZV18fHIuQVVESU9fUFJPRklMRV9TRVRUSU5HUy5kZWZhdWx0O3JldHVybntoaWdoUXVhbGl0eTp0WzBdLHN0ZXJlbzp0WzFdLHNwZWVjaDp0WzJdLGxvd1F1YWxpdHk6dFszXX19O3ZhciBZZT1mdW5jdGlvbihlKXt2YXIgdD1jKCk7aWYodC5wYXJhbXM9UygpKHt9LGUpLHQuc3RyZWFtPWUuc3RyZWFtLHQudXJsPWUudXJsLHQub25DbG9zZT12b2lkIDAsdC5sb2NhbD0hMSx0LnZpZGVvU291cmNlPWUudmlkZW9Tb3VyY2UsdC5hdWRpb1NvdXJjZT1lLmF1ZGlvU291cmNlLGUudmlkZW89ISghZS52aWRlb1NvdXJjZSYmIWUudmlkZW8pLHQudmlkZW89ZS52aWRlbyxlLmF1ZGlvPSEoIWUuYXVkaW9Tb3VyY2UmJiFlLmF1ZGlvKSx0LmF1ZGlvPWUuYXVkaW8sdC5zY3JlZW49ISFlLnNjcmVlbix0LnNjcmVlbkF1ZGlvPSEhZS5zY3JlZW5BdWRpbyx0LnNjcmVlbkF0dHJpYnV0ZXM9e3dpZHRoOjE5MjAsaGVpZ2h0OjEwODAsbWF4RnI6NSxtaW5GcjoxfSx0LnZpZGVvU2l6ZT1lLnZpZGVvU2l6ZSx0LnBsYXllcj12b2lkIDAsdC5hdWRpb0xldmVsSGVscGVyPW51bGwsZS5hdHRyaWJ1dGVzPWUuYXR0cmlidXRlc3x8e30sdC5hdHRyaWJ1dGVzPWUuYXR0cmlidXRlcyx0Lm1pY3JvcGhvbmVJZD1lLm1pY3JvcGhvbmVJZCx0LmNhbWVyYUlkPWUuY2FtZXJhSWQsdC5mYWNpbmdNb2RlPWUuZmFjaW5nTW9kZSx0LmluU3dpdGNoRGV2aWNlPSExLHQudXNlck11dGVWaWRlbz0hMSx0LnVzZXJNdXRlQXVkaW89ITEsdC5wZWVyTXV0ZVZpZGVvPSExLHQucGVlck11dGVBdWRpbz0hMSx0Lmxvd1N0cmVhbT1udWxsLHQudmlkZW9XaWR0aD0wLHQudmlkZW9IZWlnaHQ9MCx0LnN0cmVhbUlkPWUuc3RyZWFtSUQsdC51c2VySWQ9bnVsbCx0Lm1pcnJvcj0hMSE9PWUubWlycm9yLHQuRFRYPWUuYXVkaW9Qcm9jZXNzaW5nJiZlLmF1ZGlvUHJvY2Vzc2luZy5EVFgsdC5hdWRpb1Byb2Nlc3Npbmc9ZS5hdWRpb1Byb2Nlc3NpbmcsdC5oaWdoUXVhbGl0eT0hMSx0LnN0ZXJlbz0hMSx0LnNwZWVjaD0hMSx0LnNjcmVlbnx8ZGVsZXRlIHQuc2NyZWVuLCEodm9pZCAwPT09dC52aWRlb1NpemV8fHQudmlkZW9TaXplIGluc3RhbmNlb2YgQXJyYXkmJjQ9PT10LnZpZGVvU2l6ZS5sZW5ndGgpKXRocm93IEVycm9yKFwiSW52YWxpZCBWaWRlbyBTaXplXCIpO2Z1bmN0aW9uIG4oKXt2YXIgZT17fTt0LmdldFZpZGVvVHJhY2soKT09PXRoaXM/KG8uZGVmYXVsdC5kZWJ1ZyhcIlZpZGVvIFRyYWNrIEVuZGVkXCIpLGUudHlwZT1cInZpZGVvVHJhY2tFbmRlZFwiLGUudHJhY2s9dGhpcyk6dC5nZXRBdWRpb1RyYWNrKCk9PT10aGlzPyhvLmRlZmF1bHQuZGVidWcoXCJBdWRpbyBUcmFjayBFbmRlZFwiKSxlLnR5cGU9XCJhdWRpb1RyYWNrRW5kZWRcIixlLnRyYWNrPXRoaXMpOm8uZGVmYXVsdC5kZWJ1ZyhcIkRldGFjaGVkIFRyYWNrIGVuZGVkXCIsdGhpcy5raW5kLHRoaXMubGFiZWwsdGhpcyksZS50eXBlJiZ0LmRpc3BhdGNoRXZlbnQoZSl9cmV0dXJuIHQudmlkZW9TaXplPVs2NDAsNDgwLDY0MCw0ODBdLHZvaWQgMCE9PWUubG9jYWwmJiEwIT09ZS5sb2NhbHx8KHQubG9jYWw9ITApLHQuaW5pdGlhbGl6ZWQ9IXQubG9jYWwsdC5fc3RyZWFtSW5pdElEPW51bGwsZnVuY3Rpb24oZSl7ZS5hdWRpb01peGluZz17YXVkaW9Db250ZXh0SW5pdGVkOiExLGRlZmF1bHRWb2x1bWU6MTAwLGluRWFyTW9uaXRvcmluZzpcIkZJTEVcIixzb3VuZHM6e30sc3RhdGVzOntJRExFOlwiSURMRVwiLFNUQVJUSU5HOlwiU1RBUlRJTkdcIixCVVNZOlwiQlVTWVwiLFBBVVNFRDpcIlBBVVNFRFwifSxpbkVhck1vbml0b3JpbmdNb2Rlczp7Tk9ORTpcIk5PTkVcIixGSUxFOlwiRklMRVwiLE1JQ1JPUEhPTkU6XCJNT0NST1BIT05FXCIsQUxMOlwiQUxMXCJ9LGN0eDpudWxsLG1lZGlhU3RyZWFtU291cmNlOm51bGwsbWVkaWFTdHJlYW1EZXN0Om51bGwsYnVmZmVyOnt9fSxlLl9pbml0U291bmRJZk5vdEV4aXN0cz1mdW5jdGlvbih0LG4pe2UuYXVkaW9NaXhpbmcuc291bmRzW3RdfHwoZS5hdWRpb01peGluZy5zb3VuZHNbdF09e3NvdW5kSWQ6dCxzdGF0ZTpcIklETEVcIixtdXRlZDplLnVzZXJNdXRlQXVkaW8sZmlsZVBhdGg6bix2b2x1bWU6ZS5hdWRpb01peGluZy5kZWZhdWx0Vm9sdW1lLHN0YXJ0QXQ6bnVsbCxzdGFydE9mZnNldDpudWxsLHBhdXNlQXQ6bnVsbCxwYXVzZU9mZnNldDpudWxsLHJlc3VtZUF0Om51bGwscmVzdW1lT2Zmc2V0Om51bGwsc3RvcEF0Om51bGwsb3B0aW9uczpudWxsLHNvdXJjZTpudWxsfSl9LGUuX2luaXRTb3VuZElmTm90RXhpc3RzKC0xKSxlLmxvYWRBdWRpb0J1ZmZlcj1mdW5jdGlvbih0LG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6aSxuYW1lOlwiU3RyZWFtLmxvYWRBdWRpb0J1ZmZlclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJ1cmxcIiwxLDEwMjQsITEpLE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKSh0LFwiaWRcIiwxLDEwMjQsITEpO3ZhciByPWZ1bmN0aW9uKHQpe28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gbG9hZEF1ZGlvQnVmZmVyIEZhaWxlZDogXCIpK3QpLGEoVi5MT0FEX0FVRElPX0ZBSUxFRCl9LGM9bmV3IFhNTEh0dHBSZXF1ZXN0O2Mub3BlbihcIkdFVFwiLG4sITApLGMucmVzcG9uc2VUeXBlPVwiYXJyYXlidWZmZXJcIixjLm9ubG9hZD1mdW5jdGlvbigpe2lmKGMuc3RhdHVzPjQwMClyKFwiXCIuY29uY2F0KGMuc3RhdHVzLFwiIFwiKS5jb25jYXQoYy5zdGF0dXNUZXh0KSk7ZWxzZXt2YXIgbj1jLnJlc3BvbnNlO2UuYXVkaW9NaXhpbmcuYXVkaW9Db250ZXh0SW5pdGVkfHxlLl9pbml0QXVkaW9Db250ZXh0KCksZS5hdWRpb01peGluZy5jdHguZGVjb2RlQXVkaW9EYXRhKG4sZnVuY3Rpb24obil7ZS5hdWRpb01peGluZy5idWZmZXJbdF09bixhKG51bGwpfSxmdW5jdGlvbih0KXtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIGRlY29kZUF1ZGlvRGF0YSBGYWlsZWQ6IFwiKSx0KSxhKHQpfSl9fSxjLm9uZXJyb3I9ZnVuY3Rpb24oKXtyZXR1cm4gcihcImxvYWQgZXJyb3JcIil9LGMub250aW1lb3V0PWZ1bmN0aW9uKCl7cmV0dXJuIHIoXCJ0aW1lb3V0XCIpfSxjLnNlbmQoKX0sZS5jcmVhdGVBdWRpb0J1ZmZlclNvdXJjZT1mdW5jdGlvbih0KXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLmNyZWF0ZUF1ZGlvQnVmZmVyU291cmNlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZihlLmF1ZGlvTWl4aW5nLmJ1ZmZlclt0LmlkXSl7dmFyIGk9ZS5hdWRpb01peGluZy5idWZmZXJbdC5pZF0sYT1lLmF1ZGlvTWl4aW5nLmN0eC5jcmVhdGVCdWZmZXJTb3VyY2UoKTthLmJ1ZmZlcj1pO3ZhciByPWUuYXVkaW9NaXhpbmcuY3R4LmNyZWF0ZUdhaW4oKTtpZihhLmNvbm5lY3Qociksci5jb25uZWN0KGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0KSxhLmdhaW5Ob2RlPXIsdC5sb29wKWEubG9vcD0hMCxhLnN0YXJ0KDAsdC5wbGF5VGltZS8xZTMpO2Vsc2UgaWYodC5jeWNsZT4xKWlmKE9iamVjdChtLmlzQ2hyb21lKSgpKXthLmxvb3A9ITA7dmFyIGM9dC5jeWNsZSppLmR1cmF0aW9uKjFlMy0odC5wbGF5VGltZXx8MCk7YS5zdGFydCgwLHQucGxheVRpbWUvMWUzLGMvMWUzKX1lbHNlIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBDeWNsZSBQYXJhbSBpcyBpZ25vcmVkIGJ5IGN1cnJlbnQgYnJvd3NlclwiKSksYS5zdGFydCgwLHQucGxheVRpbWUvMWUzKTtlbHNlIGEuc3RhcnQoMCx0LnBsYXlUaW1lLzFlMyk7dmFyIGQ9ZS5hdWRpb01peGluZy5zb3VuZHNbdC5zb3VuZElkXTtyZXR1cm4gZC5zb3VyY2U9YSxlLl9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cygpLGEuYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsZnVuY3Rpb24oKXthPT09ZC5zb3VyY2UmJmUuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImF1ZGlvU291cmNlRW5kZWRcIixzb3VuZElkOnQuc291bmRJZCxzb3VyY2U6YSxzb3VuZDpkfSl9KSxuKCksYX1yZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBcIiksXCJBVURJT0JVRkZFUl9OT1RfRk9VTkRcIix0LmlkKSxuKCExKSwhMX0sZS5vbihcImF1ZGlvU291cmNlRW5kZWRcIixmdW5jdGlvbih0KXt2YXIgbj10LnNvdXJjZSxpPXQuc291bmQ7aSYmaS5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLkJVU1kmJiFpLnBhdXNlQXQmJihpLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLklETEUsaS5zdGFydEF0PW51bGwsaS5zdGFydE9mZnNldD1udWxsLGkucmVzdW1lQXQ9bnVsbCxpLnJlc3VtZU9mZnNldD1udWxsLG4uZ2Fpbk5vZGUmJm4uZ2Fpbk5vZGUuZGlzY29ubmVjdCYmbi5nYWluTm9kZS5kaXNjb25uZWN0KCksbi5idWZmZXI9bnVsbCxlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtU291cmNlLmNvbm5lY3QoZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbURlc3QpKX0pLGUuY2xlYXJBdWRpb0J1ZmZlclNvdXJjZT1mdW5jdGlvbigpe2UuYXVkaW9CdWZmZXJTb3VyY2UuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AoKX0pfSxlLl9pc1NvdW5kRXhpc3RzPWZ1bmN0aW9uKHQpe3JldHVybiEhZS5hdWRpb01peGluZy5zb3VuZHNbdC5zb3VuZElkXXx8KG8uZGVmYXVsdC5lcnJvcihcIlNvdW5kSWQgbm90IGV4aXN0cy4gI1wiLmNvbmNhdCh0LnNvdW5kSWQpKSwhMSl9LGUuX2luaXRBdWRpb0NvbnRleHQ9ZnVuY3Rpb24oKXtpZihlLmF1ZGlvTWl4aW5nLmF1ZGlvQ29udGV4dEluaXRlZCl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5pdCBhdWRpbyBjb250ZXh0LiBBbHJlYWR5IGluaXRlZFwiKTtpZighZS5zdHJlYW0pdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluaXQgYXVkaW8gY29udGV4dC4gTG9jYWwgU3RyZWFtIG5vdCBpbml0aWFsaXplZFwiKTtlLmF1ZGlvTWl4aW5nLmN0eD1PYmplY3Qob2UuYSkoKSxlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtU291cmNlPWUuYXVkaW9NaXhpbmcuY3R4LmNyZWF0ZU1lZGlhU3RyZWFtU291cmNlKGUuc3RyZWFtKSxlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtRGVzdD1lLmF1ZGlvTWl4aW5nLmN0eC5jcmVhdGVNZWRpYVN0cmVhbURlc3RpbmF0aW9uKCksZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0KGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0KTt2YXIgdD1lLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO2lmKHQmJmUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0LnN0cmVhbS5hZGRUcmFjayh0KSxlLl9pc0F1ZGlvTXV0ZWQoKT8oZS5fdW5tdXRlQXVkaW8oKSxlLnN0cmVhbT1lLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtRGVzdC5zdHJlYW0sZS5fbXV0ZUF1ZGlvKCkpOmUuc3RyZWFtPWUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0LnN0cmVhbSxlLmF1ZGlvTGV2ZWxIZWxwZXI9bnVsbCxlLnBjJiZlLnBjLnBlZXJDb25uZWN0aW9uJiZlLnBjLnBlZXJDb25uZWN0aW9uKXt2YXIgbj0oZS5wYy5wZWVyQ29ubmVjdGlvbiYmZS5wYy5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUudHJhY2smJlwiYXVkaW9cIj09ZS50cmFjay5raW5kfSksaT1lLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtRGVzdC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtuJiZuLnJlcGxhY2VUcmFjayYmaSYmbi5yZXBsYWNlVHJhY2soaSl9ZS5hdWRpb01peGluZy5hdWRpb0NvbnRleHRJbml0ZWQ9ITB9LGUuX2NsZWFudXBBdWRpb01peGluZz1mdW5jdGlvbigpe2lmKGUuYXVkaW9NaXhpbmcuYXVkaW9Db250ZXh0SW5pdGVkKXtmb3IodmFyIHQgaW4gZS5hdWRpb01peGluZy5zb3VuZHMpe3ZhciBuPWUuYXVkaW9NaXhpbmcuc291bmRzW3RdO24uc3RhdGUhPT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZJiZuLnN0YXRlIT09ZS5hdWRpb01peGluZy5zdGF0ZXMuUEFVU0VEfHxlLl9zdG9wT25lRWZmZWN0KHtzb3VuZElkOnR9KX1lLmF1ZGlvTGV2ZWxIZWxwZXI9bnVsbCxlLmF1ZGlvTWl4aW5nLmF1ZGlvQ29udGV4dEluaXRlZD0hMX19LGUuX3JlbG9hZEluRWFyTW9uaXRvcmluZ01vZGU9ZnVuY3Rpb24odCl7aWYodCl7aWYoIWUuYXVkaW9NaXhpbmcuaW5FYXJNb25pdG9yaW5nTW9kZXNbdF0pcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gSW52YWxpZCBJbkVhck1vbml0b3JpbmdNb2RlIFwiKS5jb25jYXQodCkpO2UuYXVkaW9NaXhpbmcuaW5FYXJNb25pdG9yaW5nPXR9c3dpdGNoKGUuYXVkaW9NaXhpbmcuYXVkaW9Db250ZXh0SW5pdGVkfHxlLl9pbml0QXVkaW9Db250ZXh0KCksZS5hdWRpb01peGluZy5pbkVhck1vbml0b3Jpbmcpe2Nhc2UgZS5hdWRpb01peGluZy5pbkVhck1vbml0b3JpbmdNb2Rlcy5GSUxFOmUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1Tb3VyY2UuY29ubmVjdGVkVG9EZXN0aW5hdGlvbiYmKGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1Tb3VyY2UuZGlzY29ubmVjdChlLmF1ZGlvTWl4aW5nLmN0eC5kZXN0aW5hdGlvbiksZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0ZWRUb0Rlc3RpbmF0aW9uPSExKTtjYXNlIGUuYXVkaW9NaXhpbmcuaW5FYXJNb25pdG9yaW5nTW9kZXMuQUxMOmZvcih2YXIgbiBpbiBlLmF1ZGlvTWl4aW5nLnNvdW5kcyl7dmFyIGk9ZS5hdWRpb01peGluZy5zb3VuZHNbbl07aSYmaS5zb3VyY2UmJiFpLnNvdXJjZS5jb25uZWN0ZWRUb0Rlc3RpbmF0aW9uJiYoaS5zb3VyY2UuZ2Fpbk5vZGUuY29ubmVjdChlLmF1ZGlvTWl4aW5nLmN0eC5kZXN0aW5hdGlvbiksaS5zb3VyY2UuY29ubmVjdGVkVG9EZXN0aW5hdGlvbj0hMCl9fXN3aXRjaChlLmF1ZGlvTWl4aW5nLmluRWFyTW9uaXRvcmluZyl7Y2FzZSBlLmF1ZGlvTWl4aW5nLmluRWFyTW9uaXRvcmluZ01vZGVzLk1JQ1JPUEhPTkU6ZS5hdWRpb01peGluZy5zb3VyY2UuZm9yRWFjaChmdW5jdGlvbih0KXt0LmNvbm5lY3RlZFRvRGVzdGluYXRpb24mJih0LmdhaW5Ob2RlLmRpc2Nvbm5lY3QoZS5hdWRpb01peGluZy5jdHguZGVzdGluYXRpb24pLHQuY29ubmVjdGVkVG9EZXN0aW5hdGlvbj0hMSl9KTtjYXNlIGUuYXVkaW9NaXhpbmcuaW5FYXJNb25pdG9yaW5nTW9kZXMuQUxMOmUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1Tb3VyY2UuY29ubmVjdGVkVG9EZXN0aW5hdGlvbnx8KGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1Tb3VyY2UuY29ubmVjdChlLmF1ZGlvTWl4aW5nLmN0eC5kZXN0aW5hdGlvbiksZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0ZWRUb0Rlc3RpbmF0aW9uPSEwKX19LGUuX3N0YXJ0QXVkaW9NaXhpbmdCdWZmZXJTb3VyY2U9ZnVuY3Rpb24odCl7ZS5hdWRpb01peGluZy5hdWRpb0NvbnRleHRJbml0ZWR8fGUuX2luaXRBdWRpb0NvbnRleHQoKTt2YXIgbj17c291bmRJZDp0LnNvdW5kSWQsaWQ6dC5maWxlUGF0aCxsb29wOnQubG9vcCxjeWNsZTp0LmN5Y2xlLHBsYXlUaW1lOnQucGxheVRpbWV8fDB9LGk9dC5yZXBsYWNlLGE9ZS5jcmVhdGVBdWRpb0J1ZmZlclNvdXJjZShuKTtyZXR1cm4gYS5zb3VuZD1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdLGE/KGEuYWRkRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsZS5fYXVkaW9NaXhpbmdGaW5pc2hlZExpc3RlbmVyLHtvbmNlOiEwfSksZS5fcmVsb2FkSW5FYXJNb25pdG9yaW5nTW9kZSgpLGkmJmUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1Tb3VyY2UuZGlzY29ubmVjdChlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtRGVzdCksYSk6bnVsbH0sZS5fc3RvcEF1ZGlvTWl4aW5nQnVmZmVyU291cmNlPWZ1bmN0aW9uKHQpe3ZhciBuPWUuYXVkaW9NaXhpbmcuc291bmRzW3Quc291bmRJZF0uc291cmNlO3JldHVybiBuPyhuLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJlbmRlZFwiLGUuX2F1ZGlvTWl4aW5nRmluaXNoZWRMaXN0ZW5lciksZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0KGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0KSxuLnN0b3AoKSxuLmdhaW5Ob2RlJiZuLmdhaW5Ob2RlLmRpc2Nvbm5lY3QmJm4uZ2Fpbk5vZGUuZGlzY29ubmVjdCgpLG4uYnVmZmVyPW51bGwsbik6bnVsbH0sZS5fZmx1c2hBdWRpb01peGluZ011dGVTdGF0dXM9ZnVuY3Rpb24odCl7Zm9yKHZhciBuIGluIGUuYXVkaW9NaXhpbmcuc291bmRzKXt2YXIgaT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1tuXTtpJiYodm9pZCAwIT09dCYmKGkubXV0ZWQ9ISF0KSxpLnNvdXJjZSYmKGkubXV0ZWQ/aS5zb3VyY2UuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZT0wOmkuc291cmNlLmdhaW5Ob2RlLmdhaW4udmFsdWU9aS52b2x1bWUvMTAwKSl9fSxlLl9oYW5kbGVBdWRpb01peGluZ0ludmFsaWRTdGF0ZUVycm9yPWZ1bmN0aW9uKHQsbixpKXt2YXIgYT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1tuLnNvdW5kSWRdLHI9LTE9PT1uLnNvdW5kSWQ/XCJJTlZBTElEX0FVRElPX01JWElOR19TVEFURVwiOlwiSU5WQUxJRF9QTEFZX0VGRkVDVF9TVEFURVwiO28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gQ2Fubm90IFwiKS5jb25jYXQodCxcIjogXCIpLmNvbmNhdChyLFwiLCBzdGF0ZSBpcyBcIikuY29uY2F0KGEuc3RhdGUpKSxpJiZpKHIpfSxlLl9oYW5kbGVBdWRpb01peGluZ05vU291cmNlRXJyb3I9ZnVuY3Rpb24odCxuLGkpe2UuYXVkaW9NaXhpbmcuc291bmRzW24uc291bmRJZF0uc3RhdGU9ZS5hdWRpb01peGluZy5zdGF0ZXMuSURMRTt2YXIgYT0tMT09PW4uc291bmRJZD9cIk5PX0FVRElPX01JWElOR19TT1VSQ0VcIjpcIk5PX0VGRkVDVF9TT1VSQ0VcIjtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIENhbm5vdCBcIikuY29uY2F0KHQsXCI6IFwiKS5jb25jYXQoYSkpLGkmJmkoYSl9LGUuX2dldE9uZUVmZmVjdFN0YXRlcz1mdW5jdGlvbih0KXt2YXIgbj1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdO3JldHVybiBmdW5jdGlvbigpe3JldHVybiBuP3tzdGF0ZTpuLnN0YXRlLHN0YXJ0QXQ6bi5zdGFydEF0LHJlc3VtZUF0Om4ucmVzdW1lQXQscGF1c2VPZmZzZXQ6bi5wYXVzZU9mZnNldCxwYXVzZUF0Om4ucGF1c2VBdCxyZXN1bWVPZmZzZXQ6bi5yZXN1bWVPZmZzZXQsc3RvcEF0Om4uc3RvcEF0LGR1cmF0aW9uOmUuX2dldE9uZUVmZmVjdER1cmF0aW9uKHQpLHBvc2l0aW9uOmUuX2dldE9uZUVmZmVjdEN1cnJlbnRQb3NpdGlvbih0KX06e319fSxlLl9hdWRpb01peGluZ0ZpbmlzaGVkTGlzdGVuZXI9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLnNvdW5kO3Quc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5JRExFJiZlLmF1ZGlvTWl4aW5nLmJ1ZmZlclt0Lm9wdGlvbnMuZmlsZVBhdGhdJiYhdC5vcHRpb25zLmNhY2hlUmVzb3VyY2UmJihvLmRlZmF1bHQuZGVidWcoXCJSZWN5Y2xlZCBidWZmZXIgXCIuY29uY2F0KHQub3B0aW9ucy5maWxlUGF0aCkpLGRlbGV0ZSBlLmF1ZGlvTWl4aW5nLmJ1ZmZlclt0Lm9wdGlvbnMuZmlsZVBhdGhdKSwtMT09PXQuc291bmRJZCYmZS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYXVkaW9NaXhpbmdGaW5pc2hlZFwifSl9LGUuX3BsYXlPbmVFZmZlY3Q9ZnVuY3Rpb24odCxuKXtPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkodCxcIm9wdGlvbnNcIik7dmFyIGk9dC5zb3VuZElkLGE9KHQuZmlsZVBhdGgsdC5jYWNoZVJlc291cmNlKTtpZih0LmN5Y2xlLHQubG9vcCx0LnBsYXlUaW1lLHQucmVwbGFjZSxPYmplY3QobS5pc1NhZmFyaSkoKSYmT2JqZWN0KG0uZ2V0QnJvd3NlclZlcnNpb24pKCk8MTIpe3ZhciByPVwiQlJPV1NFUl9OT1RfU1VQUE9SVFwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIENhbm5vdCBfcGxheU9uZUVmZmVjdDogXCIpLHIpLG4ocil9ZS5hdWRpb01peGluZy5hdWRpb0NvbnRleHRJbml0ZWR8fGUuX2luaXRBdWRpb0NvbnRleHQoKSxlLl9pbml0U291bmRJZk5vdEV4aXN0cyhpKTt2YXIgcz1lLmF1ZGlvTWl4aW5nLnNvdW5kc1tpXTtpZihzLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuSURMRSl7aWYodm9pZCAwIT09dC5jeWNsZSYmIXQuY3ljbGU+MClyZXR1cm4gcj1cIkludmFsaWQgUGFybWV0ZXIgY3ljbGU6IFwiK3QuY3ljbGUsby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBcIikuY29uY2F0KGkpLHIpLG4ocik7aWYoT2JqZWN0KHJlLmlzRW1wdHkpKGEpJiYodC5jYWNoZVJlc291cmNlPSEwKSxzLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLlNUQVJUSU5HLHMub3B0aW9ucz10LGUuYXVkaW9NaXhpbmcuYnVmZmVyW3QuZmlsZVBhdGhdKXt2YXIgYz1lLl9zdGFydEF1ZGlvTWl4aW5nQnVmZmVyU291cmNlKHQpO2lmKGMpcmV0dXJuIHMuc291cmNlPWMscy5zdGFydEF0PURhdGUubm93KCkscy5yZXN1bWVBdD1udWxsLHMucGF1c2VPZmZzZXQ9bnVsbCxzLnBhdXNlQXQ9bnVsbCxzLnJlc3VtZU9mZnNldD1udWxsLHMuc3RvcEF0PW51bGwscy5zdGFydE9mZnNldD10LnBsYXlUaW1lfHwwLHMuc3RhdGU9ZS5hdWRpb01peGluZy5zdGF0ZXMuQlVTWSxlLl9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cygpLG4obnVsbCk7cy5zdGF0ZT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5JRExFO3ZhciBkPVwiQ1JFQVRFX0JVRkZFUlNPVVJDRV9GQUlMRURcIjtpZihuKXJldHVybiBuKGQpO28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gXCIpLGQpfWVsc2UgZS5sb2FkQXVkaW9CdWZmZXIodC5maWxlUGF0aCx0LmZpbGVQYXRoLGZ1bmN0aW9uKGkpe2lmKGkpcy5zdGF0ZT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5JRExFLG4/bihpKTpvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIFwiKSxpKTtlbHNle3ZhciBhPWUuX3N0YXJ0QXVkaW9NaXhpbmdCdWZmZXJTb3VyY2UodCk7aWYoYSlyZXR1cm4gcy5zb3VyY2U9YSxzLnN0YXJ0QXQ9RGF0ZS5ub3coKSxzLnJlc3VtZUF0PW51bGwscy5wYXVzZU9mZnNldD1udWxsLHMucGF1c2VBdD1udWxsLHMucmVzdW1lT2Zmc2V0PW51bGwscy5zdG9wQXQ9bnVsbCxzLnN0YXJ0T2Zmc2V0PXQucGxheVRpbWV8fDAscy5zdGF0ZT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZLGUuX2ZsdXNoQXVkaW9NaXhpbmdNdXRlU3RhdHVzKCksbihudWxsKTtpZihzLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLklETEUsaT1cIkNSRUFURV9CVUZGRVJTT1VSQ0VfRkFJTEVEXCIsbilyZXR1cm4gbihpKTtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIFwiKSxpKX19KX1lbHNlIGUuX2hhbmRsZUF1ZGlvTWl4aW5nSW52YWxpZFN0YXRlRXJyb3IoXCJfcGxheUVmZmVjdFwiLHQsbil9LGUuX3N0b3BPbmVFZmZlY3Q9ZnVuY3Rpb24odCxuKXt2YXIgaT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdO3JldHVybiBlLl9pc1NvdW5kRXhpc3RzKHQpP2kuc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZfHxpLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuUEFVU0VEPyhlLl9zdG9wQXVkaW9NaXhpbmdCdWZmZXJTb3VyY2UodCksaS5zdG9wQXQ9RGF0ZS5ub3coKSxpLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLklETEUsZS5hdWRpb01peGluZy5idWZmZXJbaS5vcHRpb25zLmZpbGVQYXRoXSYmIWkub3B0aW9ucy5jYWNoZVJlc291cmNlJiYoby5kZWZhdWx0LmRlYnVnKFwiUmVjeWNsZWQgYnVmZmVyIFwiLmNvbmNhdChpLm9wdGlvbnMuZmlsZVBhdGgpKSxkZWxldGUgZS5hdWRpb01peGluZy5idWZmZXJbaS5vcHRpb25zLmZpbGVQYXRoXSksdm9pZChuJiZuKG51bGwpKSk6dm9pZCBlLl9oYW5kbGVBdWRpb01peGluZ0ludmFsaWRTdGF0ZUVycm9yKFwiX3N0b3BPbmVFZmZlY3RcIix0LG4pOm4oXCJTT1VORF9OT1RfRVhJU1RTXCIpfSxlLl9wYXVzZU9uZUVmZmVjdD1mdW5jdGlvbih0LG4pe3ZhciBpPWUuYXVkaW9NaXhpbmcuc291bmRzW3Quc291bmRJZF07aWYoaS5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLkJVU1kpcmV0dXJuIGUuX3N0b3BBdWRpb01peGluZ0J1ZmZlclNvdXJjZSh0KT8oaS5wYXVzZUF0PURhdGUubm93KCksaS5zdGF0ZT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5QQVVTRUQsaS5yZXN1bWVBdD9pLnBhdXNlT2Zmc2V0PWkucGF1c2VBdC1pLnJlc3VtZUF0K2kucmVzdW1lT2Zmc2V0OmkucGF1c2VPZmZzZXQ9aS5wYXVzZUF0LWkuc3RhcnRBdCtpLnN0YXJ0T2Zmc2V0LG4mJm4obnVsbCkpOnZvaWQgZS5faGFuZGxlQXVkaW9NaXhpbmdOb1NvdXJjZUVycm9yKFwiX3BhdXNlT25lRWZmZWN0XCIsdCxuKTtlLl9oYW5kbGVBdWRpb01peGluZ0ludmFsaWRTdGF0ZUVycm9yKFwiX3BhdXNlT25lRWZmZWN0XCIsdCxuKX0sZS5fcmVzdW1lT25lRWZmZWN0PWZ1bmN0aW9uKHQsbil7dmFyIGk9ZS5hdWRpb01peGluZy5zb3VuZHNbdC5zb3VuZElkXTtpZihpLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuUEFVU0VEKXt2YXIgYT17c291bmRJZDp0LnNvdW5kSWQsZmlsZVBhdGg6aS5vcHRpb25zLmZpbGVQYXRoLGN5Y2xlOmkub3B0aW9ucy5jeWNsZSxsb29wOmkub3B0aW9ucy5sb29wLHBsYXlUaW1lOmkucGF1c2VPZmZzZXQscmVwbGFjZTppLm9wdGlvbnMucmVwbGFjZX0scj1lLl9zdGFydEF1ZGlvTWl4aW5nQnVmZmVyU291cmNlKGEpO2lmKCFyKXt2YXIgcz1cIkNSRUFURV9CVUZGRVJTT1VSQ0VfRkFJTEVEXCI7cmV0dXJuIG4ocyksdm9pZCBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIFwiKSxzKX1pLnNvdXJjZT1yLGkucmVzdW1lQXQ9RGF0ZS5ub3coKSxpLnJlc3VtZU9mZnNldD1pLnBhdXNlT2Zmc2V0LGkuc3RhdGU9ZS5hdWRpb01peGluZy5zdGF0ZXMuQlVTWSxpLnBhdXNlQXQ9bnVsbCxpLnBhdXNlT2Zmc2V0PW51bGwsbihudWxsKX1lbHNlIGUuX2hhbmRsZUF1ZGlvTWl4aW5nSW52YWxpZFN0YXRlRXJyb3IoXCJfcmVzdW1lT25lRWZmZWN0XCIsdCxuKX0sZS5fZ2V0T25lRWZmZWN0RHVyYXRpb249ZnVuY3Rpb24odCl7dmFyIG49ZS5hdWRpb01peGluZy5zb3VuZHNbdC5zb3VuZElkXTtyZXR1cm4gbi5vcHRpb25zJiZuLm9wdGlvbnMuZmlsZVBhdGgmJmUuYXVkaW9NaXhpbmcuYnVmZmVyW24ub3B0aW9ucy5maWxlUGF0aF0/MWUzKmUuYXVkaW9NaXhpbmcuYnVmZmVyW24ub3B0aW9ucy5maWxlUGF0aF0uZHVyYXRpb246bnVsbH0sZS5fZ2V0T25lRWZmZWN0Q3VycmVudFBvc2l0aW9uPWZ1bmN0aW9uKHQsbil7dmFyIGk9ZS5hdWRpb01peGluZy5zb3VuZHNbdC5zb3VuZElkXTtyZXR1cm4gaS5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLlBBVVNFRD9pLnBhdXNlT2Zmc2V0JWUuX2dldE9uZUVmZmVjdER1cmF0aW9uKHQpOmkuc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZP2kucmVzdW1lQXQ/KERhdGUubm93KCktaS5yZXN1bWVBdCtpLnJlc3VtZU9mZnNldCklZS5fZ2V0T25lRWZmZWN0RHVyYXRpb24odCk6KERhdGUubm93KCktaS5zdGFydEF0K2kuc3RhcnRPZmZzZXQpJWUuX2dldE9uZUVmZmVjdER1cmF0aW9uKHQpOnZvaWQobiYmZS5faGFuZGxlQXVkaW9NaXhpbmdJbnZhbGlkU3RhdGVFcnJvcihcIl9nZXRPbmVFZmZlY3RDdXJyZW50UG9zaXRpb25cIix0KSl9LGUuX3NldE9uZUVmZmVjdFBvc2l0aW9uPWZ1bmN0aW9uKHQsbixpKXt2YXIgYT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdO2lmKGEuc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZKXtpZighZS5fc3RvcEF1ZGlvTWl4aW5nQnVmZmVyU291cmNlKHQpKXJldHVybiB2b2lkIGUuX2hhbmRsZUF1ZGlvTWl4aW5nTm9Tb3VyY2VFcnJvcihcIl9zZXRPbmVFZmZlY3RQb3NpdGlvblwiLHQsaSk7dmFyIHI9e3NvdW5kSWQ6dC5zb3VuZElkLGZpbGVQYXRoOmEub3B0aW9ucy5maWxlUGF0aCxsb29wOmEub3B0aW9ucy5sb29wLGN5Y2xlOmEub3B0aW9ucy5jeWNsZSxwbGF5VGltZTpufSxzPWUuX3N0YXJ0QXVkaW9NaXhpbmdCdWZmZXJTb3VyY2Uocik7aWYoIXMpe3ZhciBjPVwiQ1JFQVRFX0JVRkZFUlNPVVJDRV9GQUlMRURcIjtyZXR1cm4gaSYmaShjKSx2b2lkIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gXCIpLGMpfWEuc291cmNlPXMsYS5zdGFydEF0PURhdGUubm93KCksYS5zdGFydE9mZnNldD1uLGEucmVzdW1lQXQ9bnVsbCxhLnJlc3VtZU9mZnNldD1udWxsLGEucGF1c2VPZmZzZXQ9bnVsbCxhLnBhdXNlQXQ9bnVsbH1lbHNle2lmKGEuc3RhdGUhPT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5QQVVTRUQpcmV0dXJuIHZvaWQgZS5faGFuZGxlQXVkaW9NaXhpbmdJbnZhbGlkU3RhdGVFcnJvcihcIl9zZXRPbmVFZmZlY3RQb3NpdGlvblwiLHQsaSk7YS5wYXVzZU9mZnNldD1ufWkmJmkobnVsbCl9LGUuc3RhcnRBdWRpb01peGluZz1mdW5jdGlvbih0LG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2NhbGxiYWNrOmZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuIG4mJm4odCk7ZS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYXVkaW9NaXhpbmdQbGF5ZWRcIn0pLG4mJm4obnVsbCl9LGdldFN0YXRlczplLl9nZXRPbmVFZmZlY3RTdGF0ZXMoe3NvdW5kSWQ6LTF9KSxuYW1lOlwiU3RyZWFtLnN0YXJ0QXVkaW9NaXhpbmdcIixvcHRpb25zOnR9KTtPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkodCxcIm9wdGlvbnNcIik7dmFyIGE9dC5maWxlUGF0aCxvPXQuY2FjaGVSZXNvdXJjZSxjPXQuY3ljbGUsZD10Lmxvb3AsdT10LnBsYXlUaW1lLGw9dC5yZXBsYWNlO09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShhLFwiZmlsZVBhdGhcIiwxLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJGSUxFUEFUSF9MRU5NQVhcIiksITEpLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh1LFwicGxheVRpbWVcIiwwLDFlOCksIU9iamVjdChyZS5pc0VtcHR5KShjKSYmT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGMsXCJjeWNsZVwiKSwhT2JqZWN0KHJlLmlzRW1wdHkpKGQpJiZPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKGQsXCJsb29wXCIpLCFPYmplY3QocmUuaXNFbXB0eSkobCkmJk9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikobCxcInJlcGxhY2VcIiksIU9iamVjdChyZS5pc0VtcHR5KShvKSYmT2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShvLFwiY2FjaGVSZXNvdXJjZVwiKTt2YXIgcD1TKCkoe3NvdW5kSWQ6LTF9LHQpO2UuX3BsYXlPbmVFZmZlY3QocCxpKX0sZS5zdG9wQXVkaW9NaXhpbmc9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6dCxnZXRTdGF0ZXM6ZS5fZ2V0T25lRWZmZWN0U3RhdGVzKHtzb3VuZElkOi0xfSksbmFtZTpcIlN0cmVhbS5zdG9wQXVkaW9NaXhpbmdcIn0pO2UuX3N0b3BPbmVFZmZlY3Qoe3NvdW5kSWQ6LTF9LG4pfSxlLnBhdXNlQXVkaW9NaXhpbmc9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6dCxnZXRTdGF0ZXM6ZS5fZ2V0T25lRWZmZWN0U3RhdGVzKHtzb3VuZElkOi0xfSksbmFtZTpcIlN0cmVhbS5wYXVzZUF1ZGlvTWl4aW5nXCJ9KTtyZXR1cm4gZS5fcGF1c2VPbmVFZmZlY3Qoe3NvdW5kSWQ6LTF9LG4pfSxlLnJlc3VtZUF1ZGlvTWl4aW5nPWZ1bmN0aW9uKHQpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2NhbGxiYWNrOmZ1bmN0aW9uKG4saSl7aWYobilyZXR1cm4gdCYmdChuKTtlLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJhdWRpb01peGluZ1BsYXllZFwifSksdCYmdChudWxsKX0sZ2V0U3RhdGVzOmUuX2dldE9uZUVmZmVjdFN0YXRlcyh7c291bmRJZDotMX0pLG5hbWU6XCJTdHJlYW0ucmVzdW1lQXVkaW9NaXhpbmdcIn0pO2UuX3Jlc3VtZU9uZUVmZmVjdCh7c291bmRJZDotMX0sbil9LGUuYWRqdXN0QXVkaW9NaXhpbmdWb2x1bWU9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Z2V0U3RhdGVzOmUuX2dldE9uZUVmZmVjdFN0YXRlcyh7c291bmRJZDotMX0pLG5hbWU6XCJTdHJlYW0uYWRqdXN0QXVkaW9NaXhpbmdWb2x1bWVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LFwidm9sdW1lXCIsMCwxMDApLGUuYXVkaW9NaXhpbmcuc291bmRzWy0xXS52b2x1bWU9dCxlLl9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cygpLG4oKX0sZS5nZXRBdWRpb01peGluZ0R1cmF0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Z2V0U3RhdGVzOmUuX2dldE9uZUVmZmVjdFN0YXRlcyh7c291bmRJZDotMX0pLG5hbWU6XCJTdHJlYW0uZ2V0QXVkaW9NaXhpbmdEdXJhdGlvblwifSksbj1lLl9nZXRPbmVFZmZlY3REdXJhdGlvbih7c291bmRJZDotMX0pO3JldHVybiB0KG51bGwsbiksbn0sZS5nZXRBdWRpb01peGluZ0N1cnJlbnRQb3NpdGlvbj1mdW5jdGlvbigpe3ZhciB0PXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2dldFN0YXRlczplLl9nZXRPbmVFZmZlY3RTdGF0ZXMoe3NvdW5kSWQ6LTF9KSxuYW1lOlwiU3RyZWFtLmdldEF1ZGlvTWl4aW5nQ3VycmVudFBvc2l0aW9uXCJ9KSxuPWUuX2dldE9uZUVmZmVjdEN1cnJlbnRQb3NpdGlvbih7c291bmRJZDotMX0sITApO3JldHVybiB0KG51bGwsbiksbn0sZS5zZXRBdWRpb01peGluZ1Bvc2l0aW9uPWZ1bmN0aW9uKHQsbil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6bixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixnZXRTdGF0ZXM6ZS5fZ2V0T25lRWZmZWN0U3RhdGVzKHtzb3VuZElkOi0xfSksbmFtZTpcIlN0cmVhbS5zZXRBdWRpb01peGluZ1Bvc2l0aW9uXCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikodCxcInBvc2l0aW9uXCIsMCwxZTgpLGUuX3NldE9uZUVmZmVjdFBvc2l0aW9uKHtzb3VuZElkOi0xfSx0LGkpfSxlLnBsYXlFZmZlY3Q9ZnVuY3Rpb24odCxuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazpmdW5jdGlvbih0KXtpZih0KXJldHVybiBuJiZuKHQpO2UuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImVmZmVjdFBsYXllZFwifSksbiYmbihudWxsKX0sbmFtZTpcIlN0cmVhbS5wbGF5RWZmZWN0XCIsb3B0aW9uczp0fSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKHQsXCJvcHRpb25zXCIpO3ZhciBhPXQuc291bmRJZCxvPXQuZmlsZVBhdGgsYz10LmN5Y2xlO09iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShhLFwic291bmRJZFwiLDEsMWU0KSxPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobyxcImZpbGVQYXRoXCIsMCxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiRklMRVBBVEhfTEVOTUFYXCIpLCExKSwhT2JqZWN0KHJlLmlzRW1wdHkpKGMpJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYyxcImN5Y2xlXCIpLGUuX3BsYXlPbmVFZmZlY3QodCxpKX0sZS5zdG9wRWZmZWN0PWZ1bmN0aW9uKHQsbil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6bixnZXRTdGF0ZXM6ZS5fZ2V0T25lRWZmZWN0U3RhdGVzKHtzb3VuZElkOnR9KSxuYW1lOlwiU3RyZWFtLnN0b3BFZmZlY3RcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LFwic291bmRJZFwiLDEsMWU0KSxlLl9zdG9wT25lRWZmZWN0KHtzb3VuZElkOnR9LGkpfSxlLnN0b3BBbGxFZmZlY3RzPWZ1bmN0aW9uKHQpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2NhbGxiYWNrOnQsbmFtZTpcIlN0cmVhbS5zdG9wQWxsRWZmZWN0XCJ9KSxpPSExLGE9MCxyPTAsbz1mdW5jdGlvbihlKXtpfHwoZT8obihlKSxpPSEwKTphKz0xLGE9PT1yJiYobihudWxsKSxpPSEwKSl9O2Zvcih2YXIgYyBpbiBlLmF1ZGlvTWl4aW5nLnNvdW5kcyl7dmFyIGQ9ZS5hdWRpb01peGluZy5zb3VuZHNbY107LTEhPT1kLnNvdW5kSWQmJihkLnN0YXRlIT09ZS5hdWRpb01peGluZy5zdGF0ZXMuQlVTWSYmZC5zdGF0ZSE9PWUuYXVkaW9NaXhpbmcuc3RhdGVzLlBBVVNFRHx8KHIrKyxlLl9zdG9wT25lRWZmZWN0KHtzb3VuZElkOmN9LG8pKSl9cnx8bihudWxsKX0sZS5wcmVsb2FkRWZmZWN0PWZ1bmN0aW9uKHQsbixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazppLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwiLG5hbWU6XCJTdHJlYW0ucHJlbG9hZEVmZmVjdFwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQsXCJzb3VuZElkXCIsMSwxZTQpLE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShuLFwiZmlsZVBhdGhcIiwxLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJGSUxFUEFUSF9MRU5NQVhcIiksITEpLGUuX2luaXRTb3VuZElmTm90RXhpc3RzKHQsbiksZS5hdWRpb01peGluZy5idWZmZXJbbl0/YShudWxsKTplLmxvYWRBdWRpb0J1ZmZlcihuLG4sYSl9LGUudW5sb2FkRWZmZWN0PWZ1bmN0aW9uKHQsbil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6bixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixuYW1lOlwiU3RyZWFtLnVubG9hZEVmZmVjdFwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQsXCJzb3VuZElkXCIsMSwxZTQpO3ZhciBhPWUuYXVkaW9NaXhpbmcuc291bmRzW3RdO2lmKCFhKXt2YXIgcj1cIlNPVU5EX05PVF9FWElTVFNcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKHIsdCksdm9pZCBpKHIpfXZhciBjPWEub3B0aW9ucz9hLm9wdGlvbnMuZmlsZVBhdGg6YS5maWxlUGF0aDtpZihjKWRlbGV0ZSBlLmF1ZGlvTWl4aW5nLmJ1ZmZlcltjXSxkZWxldGUgZS5hdWRpb01peGluZy5zb3VuZHNbdF0saShudWxsKTtlbHNle3ZhciBkPVwiU09VTkRfQlVGRkVSX05PVF9GT1VORFwiO28uZGVmYXVsdC5lcnJvcihkLHQpLGkoZCl9fSxlLnBhdXNlRWZmZWN0PWZ1bmN0aW9uKHQsbil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6bixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixuYW1lOlwiU3RyZWFtLnBhdXNlRWZmZWN0XCJ9KTtyZXR1cm4gZS5fcGF1c2VPbmVFZmZlY3Qoe3NvdW5kSWQ6dH0saSl9LGUucGF1c2VBbGxFZmZlY3RzPWZ1bmN0aW9uKHQpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2NhbGxiYWNrOnQsbmFtZTpcIlN0cmVhbS5wYXVzZUFsbEVmZmVjdHNcIn0pLGk9ITEsYT0wLHI9MCxvPWZ1bmN0aW9uKGUpe2l8fChlPyhuKGUpLGk9ITApOmErPTEsYT09PXImJihuKG51bGwpLGk9ITApKX07Zm9yKHZhciBjIGluIGUuYXVkaW9NaXhpbmcuc291bmRzKVwiLTFcIiE9PWMmJmUuYXVkaW9NaXhpbmcuc291bmRzW2NdLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuQlVTWSYmKHIrKyxlLl9wYXVzZU9uZUVmZmVjdCh7c291bmRJZDpjfSxvKSk7cnx8bihudWxsKX0sZS5yZXN1bWVFZmZlY3Q9ZnVuY3Rpb24odCxuKXtPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikodCxcInNvdW5kSWRcIiwxLDFlNCk7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6bixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixuYW1lOlwiU3RyZWFtLnJlc3VtZUVmZmVjdFwifSk7cmV0dXJuIGUuX3Jlc3VtZU9uZUVmZmVjdCh7c291bmRJZDp0fSxpKX0sZS5yZXN1bWVBbGxFZmZlY3RzPWZ1bmN0aW9uKHQpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2NhbGxiYWNrOnQsbmFtZTpcIlN0cmVhbS5yZXN1bWVBbGxFZmZlY3RzXCJ9KSxpPSExLGE9MCxyPTAsbz1mdW5jdGlvbihlKXtpfHwoZT8obihlKSxpPSEwKTphKz0xLGE9PT1yJiYobihudWxsKSxpPSEwKSl9O2Zvcih2YXIgYyBpbiBlLmF1ZGlvTWl4aW5nLnNvdW5kcylcIi0xXCIhPT1jJiZlLmF1ZGlvTWl4aW5nLnNvdW5kc1tjXS5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLlBBVVNFRCYmKHIrKyxlLl9yZXN1bWVPbmVFZmZlY3Qoe3NvdW5kSWQ6Y30sbykpO3J8fG4obnVsbCl9LGUuZ2V0RWZmZWN0c1ZvbHVtZT1mdW5jdGlvbigpe3ZhciB0PVtdO2Zvcih2YXIgbiBpbiBlLmF1ZGlvTWl4aW5nLnNvdW5kcyl7dmFyIGk9ZS5hdWRpb01peGluZy5zb3VuZHNbbl07aSYmXCItMVwiIT09biYmdC5wdXNoKHtzb3VuZElkOnBhcnNlSW50KG4pLHZvbHVtZTppLnZvbHVtZX0pfXJldHVybiB0fSxlLnNldEVmZmVjdHNWb2x1bWU9ZnVuY3Rpb24odCxuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldEVmZmVjdHNWb2x1bWVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixjYWxsYmFjazpufSk7Zm9yKHZhciBhIGluIE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LFwidm9sdW1lXCIsMCwxMDApLGUuYXVkaW9NaXhpbmcuZGVmYXVsdFZvbHVtZT10LGUuYXVkaW9NaXhpbmcuc291bmRzKXt2YXIgcj1lLmF1ZGlvTWl4aW5nLnNvdW5kc1thXTtcIi0xXCIhPT1hJiYoci52b2x1bWU9dCl9ZS5fZmx1c2hBdWRpb01peGluZ011dGVTdGF0dXMoKSxpKG51bGwpfSxlLnNldFZvbHVtZU9mRWZmZWN0PWZ1bmN0aW9uKHQsbixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFZvbHVtZU9mRWZmZWN0XCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCIsY2FsbGJhY2s6aX0pO09iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LFwic291bmRJZFwiLDAsMWU0KSxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikobixcInZvbHVtZVwiLDAsMTAwKSxlLl9pbml0U291bmRJZk5vdEV4aXN0cyh0KSxlLmF1ZGlvTWl4aW5nLnNvdW5kc1t0XS52b2x1bWU9bixlLl9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cygpLGEobnVsbCl9fSh0KSxGZS5hZGRWaWRlb0VmZmVjdENhcGFiaWxpdHkodCksZnVuY3Rpb24oZSx0KXtlLnZpZGVvQ29uc3RyYWludD17fSx0LmNhbWVyYUlkJiYoZS52aWRlb0NvbnN0cmFpbnQuZGV2aWNlSWQ9e2V4YWN0OnQuY2FtZXJhSWR9KSx0LmZhY2luZ01vZGUmJihlLnZpZGVvQ29uc3RyYWludC5mYWNpbmdNb2RlPXQuZmFjaW5nTW9kZSksZS52aWRlb1NpemUmJihlLnZpZGVvQ29uc3RyYWludC53aWR0aD1lLnZpZGVvU2l6ZVswXSxlLnZpZGVvQ29uc3RyYWludC5oZWlnaHQ9ZS52aWRlb1NpemVbMV0pLE9iamVjdChtLmlzTGVnYWN5Q2hyb21lKSgpfHwoZS52aWRlb0NvbnN0cmFpbnQuZnJhbWVSYXRlPXtpZGVhbDozMCxtYXg6MzB9KSxlLmF1ZGlvQ29uc3RyYWludD17fSx0Lm1pY3JvcGhvbmVJZCYmKGUuYXVkaW9Db25zdHJhaW50LmRldmljZUlkPXtleGFjdDp0Lm1pY3JvcGhvbmVJZH0pLE9iamVjdChtLmlzTGVnYWN5Q2hyb21lKSgpfHxlLmF1ZGlvUHJvY2Vzc2luZyYmKHZvaWQgMCE9PWUuYXVkaW9Qcm9jZXNzaW5nLkFHQyYmKE9iamVjdChtLmlzRmlyZUZveCkoKT9lLmF1ZGlvQ29uc3RyYWludC5hdXRvR2FpbkNvbnRyb2w9ZS5hdWRpb1Byb2Nlc3NpbmcuQUdDOk9iamVjdChtLmlzQ2hyb21lKSgpJiYoZS5hdWRpb0NvbnN0cmFpbnQuZ29vZ0F1dG9HYWluQ29udHJvbD1lLmF1ZGlvUHJvY2Vzc2luZy5BR0MsZS5hdWRpb0NvbnN0cmFpbnQuZ29vZ0F1dG9HYWluQ29udHJvbDI9ZS5hdWRpb1Byb2Nlc3NpbmcuQUdDKSksdm9pZCAwIT09ZS5hdWRpb1Byb2Nlc3NpbmcuQUVDJiYoZS5hdWRpb0NvbnN0cmFpbnQuZWNob0NhbmNlbGxhdGlvbj1lLmF1ZGlvUHJvY2Vzc2luZy5BRUMpLHZvaWQgMCE9PWUuYXVkaW9Qcm9jZXNzaW5nLkFOUyYmKE9iamVjdChtLmlzRmlyZUZveCkoKT9lLmF1ZGlvQ29uc3RyYWludC5ub2lzZVN1cHByZXNzaW9uPWUuYXVkaW9Qcm9jZXNzaW5nLkFOUzpPYmplY3QobS5pc0Nocm9tZSkoKSYmKGUuYXVkaW9Db25zdHJhaW50Lmdvb2dOb2lzZVN1cHByZXNzaW9uPWUuYXVkaW9Qcm9jZXNzaW5nLkFOUykpKSxlLnNjcmVlbkNvbnN0cmFpbnQ9e30sdC5zb3VyY2VJZCYmKGUuc2NyZWVuQ29uc3RyYWludC5zb3VyY2VJZD10LnNvdXJjZUlkKSx0LmV4dGVuc2lvbklkJiZPYmplY3QobS5pc0Nocm9tZSkoKT8oZS5zY3JlZW5Db25zdHJhaW50LmV4dGVuc2lvbklkPXQuZXh0ZW5zaW9uSWQsZS5zY3JlZW5Db25zdHJhaW50Lm1hbmRhdG9yeT17Y2hyb21lTWVkaWFTb3VyY2U6XCJkZXNrdG9wXCIsbWF4V2lkdGg6ZS5zY3JlZW5BdHRyaWJ1dGVzLndpZHRoLG1heEhlaWdodDplLnNjcmVlbkF0dHJpYnV0ZXMuaGVpZ2h0LG1heEZyYW1lUmF0ZTplLnNjcmVlbkF0dHJpYnV0ZXMubWF4RnIsbWluRnJhbWVSYXRlOmUuc2NyZWVuQXR0cmlidXRlcy5taW5Gcn0pOihlLnNjcmVlbkNvbnN0cmFpbnQubWVkaWFTb3VyY2U9XCJzY3JlZW5cIixlLnNjcmVlbkNvbnN0cmFpbnQud2lkdGg9ZS5zY3JlZW5BdHRyaWJ1dGVzLndpZHRoLGUuc2NyZWVuQ29uc3RyYWludC5oZWlnaHQ9ZS5zY3JlZW5BdHRyaWJ1dGVzLmhlaWdodCxlLnNjcmVlbkNvbnN0cmFpbnQuZnJhbWVSYXRlPXtpZGVhbDplLnNjcmVlbkF0dHJpYnV0ZXMubWF4RnIsbWF4OmUuc2NyZWVuQXR0cmlidXRlcy5tYXhGcn0pLHQubWVkaWFTb3VyY2UmJihlLnNjcmVlbkNvbnN0cmFpbnQubWVkaWFTb3VyY2U9dC5tZWRpYVNvdXJjZSksZS5zZXRWaWRlb1Jlc29sdXRpb249ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7bmFtZTpcIlN0cmVhbS5zZXRWaWRlb1Jlc29sdXRpb25cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKCEobiBpbnN0YW5jZW9mIEFycmF5KSl7dmFyIGE9V2Uobis9XCJcIik7cmV0dXJuIGEmJmEudmlkZW8/KGUudmlkZW9Db25zdHJhaW50PVMoKShlLnZpZGVvQ29uc3RyYWludCx7d2lkdGg6e2lkZWFsOmEudmlkZW8ud2lkdGh9LGhlaWdodDp7aWRlYWw6YS52aWRlby5oZWlnaHR9fSksdC5hdHRyaWJ1dGVzLnJlc29sdXRpb249YS5hdHRyaWJ1dGVzLnJlc29sdXRpb24sKHI9ZS5zdHJlYW0mJmUuc3RyZWFtLmdldFZpZGVvVHJhY2tzJiZlLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKSYmci5hcHBseUNvbnN0cmFpbnRzPyhvLmRlZmF1bHQuZGVidWcoXCJzZXRWaWRlb1Jlc29sdXRpb24gYXBwbHlDb25zdHJhaW50c1wiLGUudmlkZW9Db25zdHJhaW50KSxyLmFwcGx5Q29uc3RyYWludHMoZS52aWRlb0NvbnN0cmFpbnQpLnRoZW4oaSkuY2F0Y2goaSkpOmkoKSwhMCk6KGkoXCJOT19QUk9GSUxFX1wiLmNvbmNhdChuKSksITEpfXZhciByLGM9blswXSxkPW5bMV07ZS52aWRlb0NvbnN0cmFpbnQ9UygpKGUudmlkZW9Db25zdHJhaW50LHt3aWR0aDp7aWRlYWw6Y30saGVpZ2h0OntpZGVhbDpkfX0pLHQuYXR0cmlidXRlcy5yZXNvbHV0aW9uPVwiXCIuY29uY2F0KGMsXCJ4XCIpLmNvbmNhdChkKSwocj1lLnN0cmVhbSYmZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MmJmUuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pJiZyLmFwcGx5Q29uc3RyYWludHM/KG8uZGVmYXVsdC5kZWJ1ZyhcInNldFZpZGVvUmVzb2x1dGlvbiBhcHBseUNvbnN0cmFpbnRzXCIsZS52aWRlb0NvbnN0cmFpbnQpLEZlLmRpc2FibGVWaWRlb0VmZmVjdChlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIHIuYXBwbHlDb25zdHJhaW50cyhlLnZpZGVvQ29uc3RyYWludCkudGhlbihpKS5jYXRjaChpKX0pLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gRmUucmVzdG9yZVZpZGVvRWZmZWN0KGUpfSkpOmkoKX0sZS5zZXRWaWRlb0ZyYW1lUmF0ZT1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFZpZGVvRnJhbWVSYXRlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZihPYmplY3QobS5pc0ZpcmVGb3gpKCkpcmV0dXJuIGkoXCJGSVJFRk9YX05PVF9TVVBQT1JURURcIiksITE7aWYoXCJvYmplY3RcIj09PUhlKCkobikmJm4gaW5zdGFuY2VvZiBBcnJheSYmbi5sZW5ndGg+MSl7ZS52aWRlb0NvbnN0cmFpbnQ9UygpKGUudmlkZW9Db25zdHJhaW50LHtmcmFtZVJhdGU6e2lkZWFsOm5bMF0sbWF4Om5bMV19fSksdC5hdHRyaWJ1dGVzLm1pbkZyYW1lUmF0ZT1uWzBdLHQuYXR0cmlidXRlcy5tYXhGcmFtZVJhdGU9blsxXTt2YXIgYT1lLnN0cmVhbSYmZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MmJmUuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07cmV0dXJuIGEmJmEuYXBwbHlDb25zdHJhaW50cz8oby5kZWZhdWx0LmRlYnVnKFwic2V0VmlkZW9GcmFtZVJhdGUgYXBwbHlDb25zdHJhaW50c1wiLGUudmlkZW9Db25zdHJhaW50KSxhLmFwcGx5Q29uc3RyYWludHMoZS52aWRlb0NvbnN0cmFpbnQpLnRoZW4oaSkuY2F0Y2goaSkpOmkoKSwhMH1yZXR1cm4gaShcIklOVkFMSURfUEFSQU1fXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KG4pKSksITF9LGUuc2V0VmlkZW9CaXRSYXRlPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0VmlkZW9CaXRSYXRlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtyZXR1cm5cIm9iamVjdFwiPT09SGUoKShuKSYmbiBpbnN0YW5jZW9mIEFycmF5JiZuLmxlbmd0aD4xPyh0LmF0dHJpYnV0ZXMubWluVmlkZW9CVz1uWzBdLHQuYXR0cmlidXRlcy5tYXhWaWRlb0JXPW5bMV0sZS5jb25uZWN0aW9uU3BlYyYmKGUuY29ubmVjdGlvblNwZWMubWluVmlkZW9CVz1uWzBdLGUuY29ubmVjdGlvblNwZWMubWF4VmlkZW9CVz1uWzFdKSxlLnBjJiZlLnBjLnJlbmVnb3RpYXRlJiZlLnBjLnJlbmVnb3RpYXRlKCksaSgpLCEwKTooaShcIklOVkFMSURfUEFSQU1fXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KG4pKSksITEpfSxlLnNldFNjcmVlbkJpdFJhdGU9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7bmFtZTpcIlN0cmVhbS5zZXRTY3JlZW5CaXRSYXRlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtyZXR1cm5cIm9iamVjdFwiPT09SGUoKShuKSYmbiBpbnN0YW5jZW9mIEFycmF5JiZuLmxlbmd0aD4xPyh0LnNjcmVlbkF0dHJpYnV0ZXMubWluVmlkZW9CVz1uWzBdLHQuc2NyZWVuQXR0cmlidXRlcy5tYXhWaWRlb0JXPW5bMV0saSgpLCEwKTooaShcIklOVkFMSURfUEFSQU1fXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KG4pKSksITEpfSxlLnNldFNjcmVlblByb2ZpbGU9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7bmFtZTpcIlN0cmVhbS5zZXRTY3JlZW5Qcm9maWxlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKHQsXCJwcm9maWxlXCIsW1wiNDgwcF8xXCIsXCI0ODBwXzJcIixcIjcyMHBfMVwiLFwiNzIwcF8yXCIsXCIxMDgwcF8xXCIsXCIxMDgwcF8yXCJdKTt2YXIgaT1XZSh0KTtyZXR1cm4gaSYmaS5zY3JlZW4/KGUuc2NyZWVuQ29uc3RyYWludC5tYW5kYXRvcnk/KGUuc2NyZWVuQ29uc3RyYWludC5tYW5kYXRvcnkubWF4V2lkdGg9aS5zY3JlZW4ud2lkdGgsZS5zY3JlZW5Db25zdHJhaW50Lm1hbmRhdG9yeS5tYXhIZWlnaHQ9aS5zY3JlZW4uaGVpZ2h0LGkuc2NyZWVuLmZyYW1lUmF0ZSYmaS5zY3JlZW4uZnJhbWVSYXRlLm1pbiYmaS5zY3JlZW4uZnJhbWVSYXRlLm1heCYmKGUuc2NyZWVuQ29uc3RyYWludC5tYW5kYXRvcnkubWluRnJhbWVSYXRlPWkuc2NyZWVuLmZyYW1lUmF0ZS5taW4sZS5zY3JlZW5Db25zdHJhaW50Lm1hbmRhdG9yeS5tYXhGcmFtZVJhdGU9aS5zY3JlZW4uZnJhbWVSYXRlLm1heCkpOmUuc2NyZWVuQ29uc3RyYWludD1TKCkoZS5zY3JlZW5Db25zdHJhaW50LGkuc2NyZWVuKSxlLnNjcmVlbkF0dHJpYnV0ZXMud2lkdGg9aS5zY3JlZW4ud2lkdGgsZS5zY3JlZW5BdHRyaWJ1dGVzLmhlaWdodD1pLnNjcmVlbi5oZWlnaHQsZS5zY3JlZW5BdHRyaWJ1dGVzLm1pbkZyPWkuc2NyZWVuLmZyYW1lUmF0ZS5taW4sZS5zY3JlZW5BdHRyaWJ1dGVzLm1heEZyPWkuc2NyZWVuLmZyYW1lUmF0ZS5tYXgsbigpLCEwKToobihcIk5PX1NDUkVFTl9QUk9GSUxFX1wiLmNvbmNhdChKU09OLnN0cmluZ2lmeSh0KSkpLCExKX0sZS5zZXRWaWRlb1Byb2ZpbGVDdXN0b209ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7bmFtZTpcIlN0cmVhbS5zZXRWaWRlb1Byb2ZpbGVDdXN0b21cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2Uuc2V0VmlkZW9SZXNvbHV0aW9uKHRbMF0pLGUuc2V0VmlkZW9GcmFtZVJhdGUoW3RbMV0sdFsxXV0pLGUuc2V0VmlkZW9CaXRSYXRlKFt0WzJdLHRbMl1dKSxuKCl9LGUuc2V0VmlkZW9Qcm9maWxlQ3VzdG9tUGx1cz1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFZpZGVvUHJvZmlsZUN1c3RvbVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7ZS52aWRlb0NvbnN0cmFpbnQud2lkdGg9bi53aWR0aCxlLnZpZGVvQ29uc3RyYWludC5oZWlnaHQ9bi5oZWlnaHQsdC5hdHRyaWJ1dGVzLnJlc29sdXRpb249XCJcIi5jb25jYXQobi53aWR0aCxcInhcIikuY29uY2F0KG4uaGVpZ2h0KSxlLnNldFZpZGVvRnJhbWVSYXRlKFtuLmZyYW1lcmF0ZSxuLmZyYW1lcmF0ZV0pLGUuc2V0VmlkZW9CaXRSYXRlKFtuLmJpdHJhdGUsbi5iaXRyYXRlXSksaSgpfSxlLnNldFZpZGVvUHJvZmlsZT1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFZpZGVvUHJvZmlsZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSksYT1XZShuKTtpZighYSl7dmFyIHI9XCJJbnZhbGlkIFByb2ZpbGUgXCIuY29uY2F0KG4pO3Rocm93IG5ldyBFcnJvcihyKX1pZihlLnByb2ZpbGU9bixhJiZhLnZpZGVvKXtlLnByb2ZpbGU9YS5wcm9maWxlTmFtZSxlLnZpZGVvQ29uc3RyYWludD1TKCkoZS52aWRlb0NvbnN0cmFpbnQsYS52aWRlbyksZS5jb25uZWN0aW9uU3BlYyYmYS5hdHRyaWJ1dGVzLm1heFZpZGVvQlcmJihlLmNvbm5lY3Rpb25TcGVjLm1pblZpZGVvQlc9YS5hdHRyaWJ1dGVzLm1pblZpZGVvQlcsZS5jb25uZWN0aW9uU3BlYy5tYXhWaWRlb0JXPWEuYXR0cmlidXRlcy5tYXhWaWRlb0JXKSxPYmplY3QobS5pc0VkZ2UpKCkmJihlLnZpZGVvQ29uc3RyYWludC5mcmFtZVJhdGUubWF4PTYwKSxPYmplY3QobS5pc0ZpcmVGb3gpKCkmJihlLnZpZGVvQ29uc3RyYWludC5mcmFtZVJhdGU9e2lkZWFsOjMwLG1heDozMH0pLHQuYXR0cmlidXRlcz1TKCkodC5hdHRyaWJ1dGVzLGEuYXR0cmlidXRlcyksZS5wYyYmZS5wYy5yZW5lZ290aWF0ZSYmZS5wYy5yZW5lZ290aWF0ZSgpO3ZhciBjPWUuc3RyZWFtJiZlLnN0cmVhbS5nZXRWaWRlb1RyYWNrcyYmZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtyZXR1cm4gYyYmYy5hcHBseUNvbnN0cmFpbnRzPyhvLmRlZmF1bHQuZGVidWcoXCJzZXRWaWRlb1Byb2ZpbGUgYXBwbHlDb25zdHJhaW50c1wiLGUudmlkZW9Db25zdHJhaW50KSxGZS5kaXNhYmxlVmlkZW9FZmZlY3QoZSkudGhlbihmdW5jdGlvbigpe3JldHVybiBjLmFwcGx5Q29uc3RyYWludHMoZS52aWRlb0NvbnN0cmFpbnQpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBGZS5yZXN0b3JlVmlkZW9FZmZlY3QoZSl9KS50aGVuKGZ1bmN0aW9uKHQpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGEpe2kodCksT2JqZWN0KG5lLnZzUmVzSGFjaykoZS5zdHJlYW0sZnVuY3Rpb24odCxpKXtlLnZpZGVvV2lkdGg9dCxlLnZpZGVvSGVpZ2h0PWksbigpfSxmdW5jdGlvbih0KXtvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gdnNSZXNIYWNrIGZhaWxlZDogXCIpLHQpLGEoKX0pfSl9KS5jYXRjaChpKSk6aSgpLCEwfXJldHVybiBpKFwiSU5WQUxJRF9WSURFT19QUk9GSUxFX1wiLmNvbmNhdChuKSksITF9LGUuc2V0QXVkaW9Qcm9maWxlPWZ1bmN0aW9uKHQpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0QXVkaW9Qcm9maWxlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKHQsXCJwcm9maWxlXCIsW1wic3BlZWNoX2xvd19xdWFsaXR5XCIsXCJzcGVlY2hfc3RhbmRhcmRcIixcIm11c2ljX3N0YW5kYXJkXCIsXCJzdGFuZGFyZF9zdGVyZW9cIixcImhpZ2hfcXVhbGl0eVwiLFwiaGlnaF9xdWFsaXR5X3N0ZXJlb1wiXSksZS5hdWRpb1Byb2ZpbGU9dDt2YXIgaT1xZSh0KTtyZXR1cm4gZS5oaWdoUXVhbGl0eT1pLmhpZ2hRdWFsaXR5LGUuc3RlcmVvPWkuc3RlcmVvLGUuc3BlZWNoPWkuc3BlZWNoLGUubG93UXVhbGl0eT1pLmxvd1F1YWxpdHksZS5zdGVyZW8mJk9iamVjdChtLmlzQ2hyb21lKSgpJiYoZS5hdWRpb0NvbnN0cmFpbnQuZ29vZ0F1dG9HYWluQ29udHJvbD0hMSxlLmF1ZGlvQ29uc3RyYWludC5nb29nQXV0b0dhaW5Db250cm9sMj0hMSxlLmF1ZGlvQ29uc3RyYWludC5lY2hvQ2FuY2VsbGF0aW9uPSExLGUuYXVkaW9Db25zdHJhaW50Lmdvb2dOb2lzZVN1cHByZXNzaW9uPSExKSxuKCksITB9LGUuc2V0VmlkZW9FbmNvZGVyQ29uZmlndXJhdGlvbj1mdW5jdGlvbih0KXtPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkodCxcImNvbmZpZ1wiKTt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFZpZGVvRW5jb2RlckNvbmZpZ3VyYXRpb25cIixvcHRpb25zOnQsdGFnOlwidHJhY2VyXCJ9KTt0LnJlc29sdXRpb24mJihPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikodC5yZXNvbHV0aW9uLndpZHRoLFwiY29uZmlnLnJlc29sdXRpb24ud2lkdGhcIiksT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQucmVzb2x1dGlvbi5oZWlnaHQsXCJjb25maWcucmVzb2x1dGlvbi5oZWlnaHRcIiksZS5zZXRWaWRlb1Jlc29sdXRpb24oW3QucmVzb2x1dGlvbi53aWR0aCx0LnJlc29sdXRpb24uaGVpZ2h0XSkpLHQuZnJhbWVSYXRlJiYoT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQuZnJhbWVSYXRlLm1pbixcImNvbmZpZy5mcmFtZVJhdGUubWluXCIpLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LmZyYW1lUmF0ZS5tYXgsXCJjb25maWcuZnJhbWVSYXRlLm1heFwiKSxlLnNldFZpZGVvRnJhbWVSYXRlKFt0LmZyYW1lUmF0ZS5taW4sdC5mcmFtZVJhdGUubWF4XSkpLHQuYml0cmF0ZSYmKE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LmJpdHJhdGUubWluLFwiY29uZmlnLmJpdHJhdGUubWluXCIsMSwxZTcpLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LmJpdHJhdGUubWF4LFwiY29uZmlnLmJpdHJhdGUubWF4XCIsMSwxZTcpLGUuc2V0VmlkZW9CaXRSYXRlKFt0LmJpdHJhdGUubWluLHQuYml0cmF0ZS5tYXhdKSksbigpfSxlLmdldFN1cHBvcnRlZFByb2ZpbGU9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7bmFtZTpcIlN0cmVhbS5nZXRTdXBwb3J0ZWRQcm9maWxlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCIsY2FsbGJhY2s6dH0pO2lmKCFlLmxvY2FsKXt2YXIgaT1cIk9OTFlfTE9DQUxfU1RSRUFNX1NVUFBPUlRFRFwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoaSksbihpKX1pZighZS5zdHJlYW0pcmV0dXJuIGk9XCJTVFJFQU1fTk9UX0lOSVRcIixvLmRlZmF1bHQuZXJyb3IoaSksbihpKTtpZighZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MpcmV0dXJuIGk9XCJUUkFDS19OT1RfU1VQUE9SVFwiLG8uZGVmYXVsdC5lcnJvcihpKSxuKGkpO3ZhciBhPWUuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07aWYoIWEpcmV0dXJuIGk9XCJOT19WSURFT19UUkFDS19GT1VORFwiLG8uZGVmYXVsdC5lcnJvcihpKSxuKGkpO2lmKCFhLmdldENhcGFiaWxpdGllcylyZXR1cm4gaT1cIkdFVENBUEFCSUxJVFlfTk9UX1NVUFBPUlRcIixvLmRlZmF1bHQuZXJyb3IoaSksbihpKTt2YXIgcj1hLmdldENhcGFiaWxpdGllcygpO3JldHVybiBuKG51bGwsR2UocikpfX0odCxlKSx0LmdldElkPWZ1bmN0aW9uKCl7cmV0dXJuIHQuc3RyZWFtSWR9LHQuZ2V0VXNlcklkPWZ1bmN0aW9uKCl7cmV0dXJuIHQudXNlcklkfSx0LmNoZWNrRHVhbFN0cmVhbUVuYWJsZWQ9ZnVuY3Rpb24oKXtpZihPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiRFVBTFNUUkVBTV9PUEVSQVRJT05fQ0hFQ0tcIikmJnQuaXNEdWFsU3RyZWFtKXtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiT3BlcmF0aW9uIG5vdCBwZXJtaXR0ZWQ6IFwiLmNvbmNhdChcIkRVQUxfU1RSRUFNX0VOQUJMRURcIikpLFwiRFVBTF9TVFJFQU1fRU5BQkxFRFwifXJldHVybiExfSx0LnNldFVzZXJJZD1mdW5jdGlvbihlKXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFVzZXJJZFwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7dC51c2VySWQmJm8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBTdHJlYW0udXNlcklkIFwiKS5jb25jYXQodC51c2VySWQsXCIgPT4gXCIpLmNvbmNhdChlKSksdC51c2VySWQ9ZSxuKCl9LHQuZ2V0QXR0cmlidXRlcz1mdW5jdGlvbigpe3JldHVybiBlLnNjcmVlbj90LnNjcmVlbkF0dHJpYnV0ZXM6ZS5hdHRyaWJ1dGVzfSx0Lmhhc0F1ZGlvPWZ1bmN0aW9uKCl7cmV0dXJuIHQuYXVkaW99LHQuaGFzVmlkZW89ZnVuY3Rpb24oKXtyZXR1cm4gdC52aWRlb30sdC5oYXNTY3JlZW49ZnVuY3Rpb24oKXtyZXR1cm4gdC5zY3JlZW59LHQuaGFzU2NyZWVuQXVkaW89ZnVuY3Rpb24oKXtyZXR1cm4gdC5zY3JlZW5BdWRpb30sdC5pc1ZpZGVvT249ZnVuY3Rpb24oKXtyZXR1cm4odC5oYXNWaWRlbygpfHx0Lmhhc1NjcmVlbigpKSYmIXQudXNlck11dGVWaWRlb30sdC5pc0F1ZGlvT249ZnVuY3Rpb24oKXtyZXR1cm4gdC5oYXNBdWRpbygpJiYhdC51c2VyTXV0ZUF1ZGlvfSx0LmluaXQ9ZnVuY3Rpb24oaSxhKXt2YXIgcj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGEmJmEoZSk7aSYmaSh0KX0sbmFtZTpcIlN0cmVhbS5pbml0XCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSxjPSgobmV3IERhdGUpLmdldFRpbWUoKSxhcmd1bWVudHNbMl0pO2lmKHZvaWQgMD09PWMmJihjPTIpLCEwPT09dC5pbml0aWFsaXplZClyZXR1cm4gcih7dHlwZTpcIndhcm5pbmdcIixtc2c6XCJTVFJFQU1fQUxSRUFEWV9JTklUSUFMSVpFRFwifSk7aWYoITAhPT10LmxvY2FsKXJldHVybiByKHt0eXBlOlwid2FybmluZ1wiLG1zZzpcIlNUUkVBTV9OT1RfTE9DQUxcIn0pO3ZhciBkPU1hdGgucmFuZG9tKCkudG9TdHJpbmcoKS5zbGljZSgzKTt0Ll9zdHJlYW1Jbml0SUQ9ZCx0LnZpZGVvU291cmNlP3QudmlkZW9OYW1lPVwidmlkZW9Tb3VyY2VcIjp0LnZpZGVvJiYodC52aWRlb05hbWU9YWUuc2VhcmNoRGV2aWNlTmFtZUJ5SWQoZS5jYW1lcmFJZCl8fFwiZGVmYXVsdFwiKSx0LmF1ZGlvU291cmNlP3QuYXVkaW9OYW1lPVwiYXVkaW9Tb3VyY2VcIjp0LmF1ZGlvJiYodC5hdWRpb05hbWU9YWUuc2VhcmNoRGV2aWNlTmFtZUJ5SWQoZS5taWNyb3Bob25lSWQpfHxcImRlZmF1bHRcIiksdC5zY3JlZW4mJih0LnNjcmVlbk5hbWU9ZS5leHRlbnNpb25JZHx8XCJkZWZhdWx0XCIpO3RyeXtpZihlLmF1ZGlvfHxlLnZpZGVvfHxlLnNjcmVlbnx8ZS5zY3JlZW5BdWRpb3x8ZS52aWRlb1NvdXJjZXx8ZS5hdWRpb1NvdXJjZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBSZXF1ZXN0ZWQgYWNjZXNzIHRvIGxvY2FsIG1lZGlhXCIpKTt2YXIgdT17c3RyZWFtSWQ6dC5zdHJlYW1JZH07ZS52aWRlb1NvdXJjZT91LnZpZGVvU291cmNlPWUudmlkZW9Tb3VyY2U6ZS5zY3JlZW4/dS5zY3JlZW49dC5zY3JlZW5Db25zdHJhaW50OmUudmlkZW8mJih1LnZpZGVvPXQudmlkZW9Db25zdHJhaW50KSxlLmF1ZGlvU291cmNlP3UuYXVkaW9Tb3VyY2U9ZS5hdWRpb1NvdXJjZTplLnNjcmVlbkF1ZGlvP3Uuc2NyZWVuQXVkaW89ZS5zY3JlZW5BdWRpbzplLmF1ZGlvJiYodS5hdWRpbz10LmF1ZGlvQ29uc3RyYWludCksdGUodSxmdW5jdGlvbihpKXtpZih1LnNjcmVlbkF1ZGlvJiYhaS5nZXRBdWRpb1RyYWNrcygpWzBdJiZvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gQXVkaW8gc2hhcmluZyBpcyBub3Qgc2VsZWN0ZWRcIikpLHUuc2NyZWVuJiZvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFVzZXIgaGFzIGdyYW50ZWQgYWNjZXNzIHRvIHNjcmVlbiBzaGFyaW5nXCIpKSwodS52aWRlb3x8dS5hdWRpbykmJm8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBoYXMgZ3JhbnRlZCBhY2Nlc3MgdG8gbG9jYWwgbWVkaWFcIikpLG51bGw9PT10Ll9zdHJlYW1Jbml0SUQpe2kuZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlLnN0b3AoKX0pO3ZhciBhPXt0eXBlOlwiZXJyb3JcIixtc2c6XCJTVFJFQU1fSVNfQ0xPU0VEXCIsaW5mbzpcInN0cmVhbSBpcyBjbG9zZWQgYW5kIGNhbm5vdCBiZSBpbml0aWFsaXplZFwifTtyZXR1cm4gby5kZWZhdWx0LmVycm9yKHQuc3RyZWFtSWQsYS5pbmZvKSx2b2lkIHIoYSl9aWYodC5fc3RyZWFtSW5pdElEIT09ZCl7aS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RvcCgpfSk7YT17dHlwZTpcImVycm9yXCIsbXNnOlwiQUJPUlRfT1RIRVJfSU5JVFwiLGluZm86XCJzdHJlYW0gaW5pdGlhbGl6YXRpb24gaXMgYWJvcnRlZCBiZWNhdXNlIG9mIGFub3RoZXIgc3RyZWFtLmluaXRcIn07cmV0dXJuIG8uZGVmYXVsdC5lcnJvcih0LnN0cmVhbUlkLGEuaW5mbyksdm9pZCByKGEpfXQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImFjY2Vzc0FsbG93ZWRcIn0pLHQuc3RyZWFtPWksdC5pbml0aWFsaXplZD0hMCx0LnJlbG9hZERldmljZU5hbWUoKSx0Lmhhc1ZpZGVvKCkmJk9iamVjdChuZS52c1Jlc0hhY2spKGksZnVuY3Rpb24oZSxuKXt0LnZpZGVvV2lkdGg9ZSx0LnZpZGVvSGVpZ2h0PW59LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSB2c1Jlc0hhY2sgZmFpbGVkOiBcIiksZSl9KSxlLnNjcmVlbiYmdC5zdHJlYW0mJnQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0mJih0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLm9uZW5kZWQ9ZnVuY3Rpb24oKXt0LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdG9wU2NyZWVuU2hhcmluZ1wifSl9KSx0LnN0cmVhbSYmdC5zdHJlYW0uZ2V0VHJhY2tzJiZ0LnN0cmVhbS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UmJiFlLm9uZW5kZWQmJihlLm9uZW5kZWQ9bil9KSxyKCl9LGZ1bmN0aW9uKGUpe3ZhciBuPXt0eXBlOlwiZXJyb3JcIixpbmZvOm51bGx9O3N3aXRjaChlJiYobi5tc2c9ZS5uYW1lfHxlLmNvZGV8fGUsZS5tZXNzYWdlJiYobi5pbmZvPWUubWVzc2FnZSksZS5jb2RlJiYobi5pbmZvP24uaW5mbys9XCIuIFwiK2UuY29kZTpuLmluZm89XCIgXCIrZS5jb2RlKSxlLmNvbnN0cmFpbnQmJihuLmluZm8/bi5pbmZvKz1cIi4gQ29uc3RyYWludDogXCIrZS5jb25zdHJhaW50Om4uaW5mbz1cImNvbnN0cmFpbnQ6IFwiK2UuY29uc3RyYWludCkpLG4ubXNnKXtjYXNlXCJTdGFydGluZyB2aWRlbyBmYWlsZWRcIjpjYXNlXCJUcmFja1N0YXJ0RXJyb3JcIjppZih0LnZpZGVvQ29uc3RyYWludCYmKGRlbGV0ZSB0LnZpZGVvQ29uc3RyYWludC53aWR0aCxkZWxldGUgdC52aWRlb0NvbnN0cmFpbnQuaGVpZ2h0KSxjPjApcmV0dXJuIHZvaWQgc2V0VGltZW91dChmdW5jdGlvbigpe3QuaW5pdChmdW5jdGlvbihlKXtyZXR1cm4gcihlKX0scixjLTEpfSwxKTtuLm1zZz1cIk1FRElBX09QVElPTl9JTlZBTElEXCI7YnJlYWs7Y2FzZVwiRGV2aWNlc05vdEZvdW5kRXJyb3JcIjpuLm1zZz1cIkRFVklDRVNfTk9UX0ZPVU5EXCI7YnJlYWs7Y2FzZVwiTm90U3VwcG9ydGVkRXJyb3JcIjpuLm1zZz1cIk5PVF9TVVBQT1JURURcIjticmVhaztjYXNlXCJQZXJtaXNzaW9uRGVuaWVkRXJyb3JcIjpjYXNlXCJJbnZhbGlkU3RhdGVFcnJvclwiOm4ubXNnPVwiUEVSTUlTU0lPTl9ERU5JRURcIix0LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJhY2Nlc3NEZW5pZWRcIn0pO2JyZWFrO2Nhc2VcIlBFUk1JU1NJT05fREVOSUVEXCI6Y2FzZVwiTm90QWxsb3dlZEVycm9yXCI6dC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYWNjZXNzRGVuaWVkXCJ9KTticmVhaztjYXNlXCJDb25zdHJhaW50Tm90U2F0aXNmaWVkRXJyb3JcIjpuLm1zZz1cIkNPTlNUUkFJTlRfTk9UX1NBVElTRklFRFwiO2JyZWFrO2RlZmF1bHQ6bi5tc2d8fChuLm1zZz1cIlVOREVGSU5FRFwiKX12YXIgaT1cIk1lZGlhIGFjY2VzcyBcIi5jb25jYXQobi5tc2cpLmNvbmNhdChuLmluZm8/XCI6IFwiK24uaW5mbzpcIlwiKTtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFwiKSxpKSxyKG4pfSl9ZWxzZSByKHt0eXBlOlwid2FybmluZ1wiLG1zZzpcIlNUUkVBTV9IQVNfTk9fTUVESUFfQVRUUklCVVRFU1wifSl9Y2F0Y2goZSl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBTdHJlYW0gaW5pdDogXCIpLGUpLHIoe3R5cGU6XCJlcnJvclwiLG1zZzplLm1lc3NhZ2V8fGV9KX19LHQucmVsb2FkRGV2aWNlTmFtZT1mdW5jdGlvbigpe2lmKHQuc3RyZWFtKXtpZih0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcyl7dmFyIGU9dC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtlJiZlLmxhYmVsJiYodC52aWRlb05hbWU9ZS5sYWJlbCl9aWYodC5zdHJlYW0uZ2V0QXVkaW9UcmFja3Mpe3ZhciBuPXQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF07biYmbi5sYWJlbCYmKHQuYXVkaW9OYW1lPW4ubGFiZWwpfX19LHQuY2xvc2U9ZnVuY3Rpb24oKXt2YXIgZT1zLmIucmVwb3J0QXBpSW52b2tlKG51bGwse25hbWU6XCJTdHJlYW0uY2xvc2VcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gQ2xvc2Ugc3RyZWFtIHdpdGggaWRcIiksdC5zdHJlYW1JZCksdm9pZCAwIT09dC5zdHJlYW0pe3ZhciBuPXQuc3RyZWFtLmdldFRyYWNrcygpO2Zvcih2YXIgaSBpbiBuKW4uaGFzT3duUHJvcGVydHkoaSkmJm5baV0uc3RvcCgpOyF0LmlzTG93U3RyZWFtJiZ0LmxvY2FsP0ZlLmRpc2FibGVWaWRlb0VmZmVjdCh0KS50aGVuKGZ1bmN0aW9uKCl7dC5zdHJlYW09dm9pZCAwfSk6dC5zdHJlYW09dm9pZCAwfU9iamVjdChtLmlzU2FmYXJpKSgpJiZ0LnBjJiZ0LnBjLnBlZXJDb25uZWN0aW9uJiZ0LnBjLnBlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrJiZ0LnBjLnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMmJnQucGMucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZSYmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gUmVtb3ZlIFRyYWNrXCIpLGUpLHQucGMucGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2soZSkpfSk7dC5pbml0aWFsaXplZD0hMSx0Ll9zdHJlYW1Jbml0SUQ9bnVsbCx0Ll9vbkF1ZGlvTXV0ZT12b2lkIDAsdC5fb25BdWRpb1VubXV0ZT12b2lkIDAsdC5fb25WaWRlb011dGU9dm9pZCAwLHQuX29uVmlkZW9Vbm11dGU9dm9pZCAwLHQubG93U3RyZWFtJiZ0Lmxvd1N0cmVhbS5jbG9zZSgpLGUoKX0sdC5lbmFibGVBdWRpbz1mdW5jdGlvbigpe3ZhciBlLG49cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS5lbmFibGVBdWRpb1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7cmV0dXJuIG8uZGVmYXVsdC5kZXByZWNhdGUoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFN0cmVhbS5lbmFibGVBdWRpbyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gVXNlIFN0cmVhbS51bm11dGVBdWRpbyBpbnN0ZWFkXCIpKSx0LnVzZXJNdXRlQXVkaW98fG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVc2VyIGFscmVhZHkgZW5hYmxlQXVkaW9cIikpLHQudXNlck11dGVBdWRpbz0hMSxuKG51bGwsZT0hdC5wZWVyTXV0ZUF1ZGlvJiZ0Ll91bm11dGVBdWRpbygpKSxlfSx0LmRpc2FibGVBdWRpbz1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uZGlzYWJsZUF1ZGlvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtvLmRlZmF1bHQuZGVwcmVjYXRlKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBTdHJlYW0uZGlzYWJsZUF1ZGlvIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLiBVc2UgU3RyZWFtLm11dGVBdWRpbyBpbnN0ZWFkXCIpKSx0LnVzZXJNdXRlQXVkaW8mJm8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVc2VyIGFscmVhZHkgZGlzYWJsZUF1ZGlvXCIpKSx0LnVzZXJNdXRlQXVkaW89ITA7dmFyIG49dC5fbXV0ZUF1ZGlvKCk7cmV0dXJuIGUobnVsbCxuKSxufSx0LmVuYWJsZVZpZGVvPWZ1bmN0aW9uKCl7dmFyIGUsbj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLmVuYWJsZVZpZGVvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtyZXR1cm4gby5kZWZhdWx0LmRlcHJlY2F0ZShcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gU3RyZWFtLmVuYWJsZVZpZGVvIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLiBVc2UgU3RyZWFtLnVubXV0ZVZpZGVvIGluc3RlYWRcIikpLHQudXNlck11dGVWaWRlb3x8by5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFVzZXIgYWxyZWFkeSBlbmFibGVWaWRlb1wiKSksdC51c2VyTXV0ZVZpZGVvPSExLHQubG93U3RyZWFtJiYodC5sb3dTdHJlYW0udXNlck11dGVWaWRlbz0hMSksbihudWxsLGU9IXQucGVlck11dGVWaWRlbyYmdC5fdW5tdXRlVmlkZW8oKSksZX0sdC5kaXNhYmxlVmlkZW89ZnVuY3Rpb24oKXt2YXIgZT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLmRpc2FibGVWaWRlb1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7by5kZWZhdWx0LmRlcHJlY2F0ZShcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gU3RyZWFtLmRpc2FibGVWaWRlbyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIGJlIHJlbW92ZWQgaW4gdGhlIGZ1dHVyZS4gVXNlIFN0cmVhbS5tdXRlVmlkZW8gaW5zdGVhZFwiKSksdC51c2VyTXV0ZVZpZGVvJiZvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBhbHJlYWR5IGRpc2FibGVWaWRlb1wiKSksdC51c2VyTXV0ZVZpZGVvPSEwLHQubG93U3RyZWFtJiYodC5sb3dTdHJlYW0udXNlck11dGVWaWRlbz0hMCk7dmFyIG49dC5fbXV0ZVZpZGVvKCk7cmV0dXJuIGUobnVsbCxuKSxufSx0LnVubXV0ZUF1ZGlvPWZ1bmN0aW9uKCl7dmFyIGUsbj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLnVubXV0ZUF1ZGlvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtyZXR1cm4gdC51c2VyTXV0ZUF1ZGlvfHxvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBhbHJlYWR5IHVubXV0ZUF1ZGlvXCIpKSx0LnVzZXJNdXRlQXVkaW89ITEsbihudWxsLGU9IXQucGVlck11dGVBdWRpbyYmdC5fdW5tdXRlQXVkaW8oKSksZX0sdC5tdXRlQXVkaW89ZnVuY3Rpb24oKXt2YXIgZT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLm11dGVBdWRpb1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7dC51c2VyTXV0ZUF1ZGlvJiZvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBhbHJlYWR5IG11dGVBdWRpb1wiKSksdC51c2VyTXV0ZUF1ZGlvPSEwO3ZhciBuPXQuX211dGVBdWRpbygpO3JldHVybiBlKG51bGwsbiksbn0sdC51bm11dGVWaWRlbz1mdW5jdGlvbigpe3ZhciBlLG49cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS51bm11dGVWaWRlb1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7cmV0dXJuIHQudXNlck11dGVWaWRlb3x8by5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFVzZXIgYWxyZWFkeSB1bm11dGVWaWRlb1wiKSksdC51c2VyTXV0ZVZpZGVvPSExLHQubG93U3RyZWFtJiYodC5sb3dTdHJlYW0udXNlck11dGVWaWRlbz0hMSksbihudWxsLGU9IXQucGVlck11dGVWaWRlbyYmdC5fdW5tdXRlVmlkZW8oKSksZX0sdC5tdXRlVmlkZW89ZnVuY3Rpb24oKXt2YXIgZT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLm11dGVWaWRlb1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7dC51c2VyTXV0ZVZpZGVvJiZvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBhbHJlYWR5IG11dGVWaWRlb1wiKSksdC51c2VyTXV0ZVZpZGVvPSEwLHQubG93U3RyZWFtJiYodC5sb3dTdHJlYW0udXNlck11dGVWaWRlbz0hMCk7dmFyIG49dC5fbXV0ZVZpZGVvKCk7cmV0dXJuIGUobnVsbCxuKSxufSx0Ll91bm11dGVBdWRpbz1mdW5jdGlvbigpe3JldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFVubXV0ZWQgYXVkaW8gc3RyZWFtIHdpdGggaWQgXCIpLHQuc3RyZWFtSWQpLHQuX2ZsdXNoQXVkaW9NaXhpbmdNdXRlU3RhdHVzKCExKSwhKCF0Lmhhc0F1ZGlvKCl8fCF0LmluaXRpYWxpemVkfHx2b2lkIDA9PT10LnN0cmVhbXx8ITA9PT10LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQpJiYodC5fb25BdWRpb1VubXV0ZSYmdC5fb25BdWRpb1VubXV0ZSgpLHQucGMmJih0LnBjLmlzQXVkaW9NdXRlPSExKSx0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQ9ITAsITApfSx0Ll9pc0F1ZGlvTXV0ZWQ9ZnVuY3Rpb24oKXtpZih0LnN0cmVhbSYmdC5oYXNBdWRpbygpKXt2YXIgZT10LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpO3JldHVybiBlLmxlbmd0aD4wJiYhZVswXS5lbmFibGVkfXJldHVybiExfSx0Ll9pc1ZpZGVvTXV0ZWQ9ZnVuY3Rpb24oKXtpZih0LnN0cmVhbSYmdC5oYXNWaWRlbygpKXt2YXIgZT10LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpO3JldHVybiBlLmxlbmd0aD4wJiYhZVswXS5lbmFibGVkfXJldHVybiExfSx0Ll9tdXRlQXVkaW89ZnVuY3Rpb24oKXtyZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBNdXRlZCBhdWRpbyBzdHJlYW0gd2l0aCBpZCBcIiksdC5zdHJlYW1JZCksdC5fZmx1c2hBdWRpb01peGluZ011dGVTdGF0dXMoITApLCEhKHQuaGFzQXVkaW8oKSYmdC5pbml0aWFsaXplZCYmdm9pZCAwIT09dC5zdHJlYW0mJnQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCkmJih0Ll9vbkF1ZGlvTXV0ZSYmdC5fb25BdWRpb011dGUoKSx0LnBjJiYodC5wYy5pc0F1ZGlvTXV0ZT0hMCksdC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkPSExLHQuc2lkJiZzLmIuYXVkaW9TZW5kaW5nU3RvcHBlZCh0LnNpZCx7c3VjYzohMCxyZWFzb246XCJtdXRlQXVkaW9cIn0pLCEwKX0sdC5fdW5tdXRlVmlkZW89ZnVuY3Rpb24oKXtyZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVbm11dGVkIHZpZGVvIHN0cmVhbSB3aXRoIGlkXCIpLHQuc3RyZWFtSWQpLCEoIXQuaW5pdGlhbGl6ZWR8fHZvaWQgMD09PXQuc3RyZWFtfHwhdC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKS5sZW5ndGh8fCEwPT09dC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkKSYmKHQuX29uVmlkZW9Vbm11dGUmJnQuX29uVmlkZW9Vbm11dGUoKSx0LnBjJiYodC5wYy5pc1ZpZGVvTXV0ZT0hMSksdC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkPSEwLHQubG93U3RyZWFtJiZ0Lmxvd1N0cmVhbS5fdW5tdXRlVmlkZW8oKSwhMCl9LHQuX211dGVWaWRlbz1mdW5jdGlvbigpe3JldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIE11dGVkIHZpZGVvIHN0cmVhbSB3aXRoIGlkXCIpLHQuc3RyZWFtSWQpLCEhKHQuaW5pdGlhbGl6ZWQmJnZvaWQgMCE9PXQuc3RyZWFtJiZ0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aCYmdC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkKSYmKHQuX29uVmlkZW9NdXRlJiZ0Ll9vblZpZGVvTXV0ZSgpLHQucGMmJih0LnBjLmlzVmlkZW9NdXRlPSEwKSx0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQ9ITEsdC5sb3dTdHJlYW0mJnQubG93U3RyZWFtLl9tdXRlVmlkZW8oKSx0LnNpZCYmcy5iLnZpZGVvU2VuZGluZ1N0b3BwZWQodC5zaWQse3N1Y2M6ITAscmVhc29uOlwibXV0ZVZpZGVvXCJ9KSwhMCl9LHQuYWRkVHJhY2s9ZnVuY3Rpb24oaSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS5hZGRUcmFja1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSkscj10LmNoZWNrRHVhbFN0cmVhbUVuYWJsZWQoKTtpZihyKXJldHVybiBhKHIpO2lmKHQucGMmJnQucGMuYWRkVHJhY2soaSx0LnN0cmVhbSksXCJhdWRpb1wiPT1pLmtpbmQpe3QuX2NsZWFudXBBdWRpb01peGluZygpO3ZhciBvPW5ldyBNZWRpYVN0cmVhbTt0LnVzZXJNdXRlQXVkaW8mJihpLmVuYWJsZWQ9ITEpLG8uYWRkVHJhY2soaSk7dmFyIGM9dC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtjJiYoby5hZGRUcmFjayhjKSx0LmF1ZGlvPSEwLGUuYXVkaW89ITApLHQuc3RyZWFtPW8sdC5hdWRpb0xldmVsSGVscGVyPW51bGwsdC5wbGF5ZXImJnQucGxheWVyLnZpZGVvJiYodC5wbGF5ZXIudmlkZW8uc3JjT2JqZWN0PXQuc3RyZWFtKX1lbHNlIHQudXNlck11dGVWaWRlbyYmKGkuZW5hYmxlZD0hMSksdC5zdHJlYW0uYWRkVHJhY2soaSksdC52aWRlbz0hMCxlLnZpZGVvPSEwO2kub25lbmRlZHx8KGkub25lbmRlZD1uKSxhKCl9LHQucmVtb3ZlVHJhY2s9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS5yZW1vdmVUcmFja1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSksYT10LmNoZWNrRHVhbFN0cmVhbUVuYWJsZWQoKSxyPUZlLmNoZWNrVmlkZW9FZmZlY3RFbmFibGVkKHQpO2lmKGF8fHIpcmV0dXJuIGkoYSk7dC5wYyYmdC5wYy5yZW1vdmVUcmFjayhuLHQuc3RyZWFtKSx0LnN0cmVhbS5yZW1vdmVUcmFjayhuKSx0Ll9jbGVhbnVwQXVkaW9NaXhpbmcoKSxcImF1ZGlvXCI9PT1uLmtpbmQ/KHQuYXVkaW89ITEsZS5hdWRpbz0hMSk6KHQudmlkZW89ITEsZS52aWRlbz0hMSksdC5hdWRpb0xldmVsSGVscGVyPW51bGwsXCJsaXZlXCI9PW4ucmVhZHlTdGF0ZSYmKG4uc3RvcCgpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVHJhY2sgXCIpLmNvbmNhdChuLmtpbmQsXCIgU3RvcHBlZFwiKSkpLGkoKX0sdC5zZXRBdWRpb091dHB1dD1mdW5jdGlvbihlLG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBpJiZpKGUpO24mJm4odCl9LG5hbWU6XCJTdHJlYW0uc2V0QXVkaW9PdXRwdXRcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3JldHVybiBPYmplY3QocmUuaXNWYWxpZFN0cmluZykoZSwxLDI1NSk/KHQuYXVkaW9PdXRwdXQ9ZSx0LnBsYXllcj92b2lkIHQucGxheWVyLnNldEF1ZGlvT3V0cHV0KGUsZnVuY3Rpb24oKXtyZXR1cm4gYSgpfSxhKTphKCkpOihvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIHNldEF1ZGlvT3V0cHV0IEludmFsaWQgUGFyYW1ldGVyXCIpLGUpLGEoVi5JTlZBTElEX1BBUkFNRVRFUikpfSx0LnBsYXk9ZnVuY3Rpb24oZSxuLGkpe1wiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihpPW4sbj1udWxsKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIHBsYXkoKS5cIiksZSxuKTt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLnBsYXlcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixjYWxsYmFjazppfSk7aWYoT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGUsXCJlbGVtZW50SURcIiksT2JqZWN0KHJlLmlzRW1wdHkpKG4pfHwoT2JqZWN0KHJlLmlzRW1wdHkpKG4uZml0KXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShuLmZpdCxcImZpdFwiLFtcImNvdmVyXCIsXCJjb250YWluXCJdKSxPYmplY3QocmUuaXNFbXB0eSkobi5tdXRlZCl8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikobi5tdXRlZCxcIm11dGVkXCIpKSx0LnBsYXllcilvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gU3RyZWFtLnBsYXkoKTogU3RyZWFtIGlzIGFscmVhZHkgcGxheWluZy4gRmFsbGJhY2sgdG8gcmVzdW1lIHN0cmVhbVwiKSksdC5yZXN1bWUoKS50aGVuKGZ1bmN0aW9uKCl7YShudWxsKX0pLmNhdGNoKGEpO2Vsc2V7dC5lbGVtZW50SUQ9ZSx0LnBsYXlPcHRpb25zPW4sIXQubG9jYWx8fHQudmlkZW98fHQuc2NyZWVuPyh0LnBsYXllcj1uZXcgaih7aWQ6dC5nZXRJZCgpLHN0cmVhbTp0LGVsZW1lbnRJRDplLG9wdGlvbnM6bn0pLHQubG9jYWwmJkZlLmFwcGx5RWZmZWN0SW5QbGF5ZXIodCkpOnQuaGFzQXVkaW8oKSYmKHQucGxheWVyPW5ldyBqKHtpZDp0LmdldElkKCksc3RyZWFtOnQsZWxlbWVudElEOmUsb3B0aW9uczpufSkpO3ZhciByPXthdWRpbzpudWxsLHZpZGVvOm51bGx9O3Qub24oXCJwbGF5ZXItc3RhdHVzLWNoYW5nZVwiLGZ1bmN0aW9uIGUobil7aWYocltuLm1lZGlhVHlwZV09bixyLmF1ZGlvJiZyLnZpZGVvKWlmKHQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInBsYXllci1zdGF0dXMtY2hhbmdlXCIsZSksci52aWRlby5pc0Vycm9yU3RhdGV8fHIuYXVkaW8uaXNFcnJvclN0YXRlKXt2YXIgaT1yLnZpZGVvLmlzRXJyb3JTdGF0ZT9yLnZpZGVvOnIuYXVkaW87YSh7aXNFcnJvclN0YXRlOiEwLHN0YXR1czppLnN0YXR1cyxyZWFzb246aS5yZWFzb24sdmlkZW86ci52aWRlbyxhdWRpbzpyLmF1ZGlvfSl9ZWxzZVwiYWJvcnRlZFwiPT09ci52aWRlby5zdGF0dXMmJlwiYWJvcnRlZFwiPT09ci5hdWRpby5zdGF0dXM/YSh7c3RhdHVzOlwiYWJvcnRlZFwiLHJlYXNvbjpcInN0b3BcIix2aWRlbzpyLnZpZGVvLGF1ZGlvOnIuYXVkaW99KTphKG51bGwpfSksdC5hdWRpb091dHB1dCYmdC5wbGF5ZXIuc2V0QXVkaW9PdXRwdXQodC5hdWRpb091dHB1dCksdm9pZCAwIT09dC5hdWRpb0xldmVsJiZ0LnBsYXllci5zZXRBdWRpb1ZvbHVtZSh0LmF1ZGlvTGV2ZWwpLHQuX2ZsdXNoQXVkaW9NaXhpbmdNdXRlU3RhdHVzKCExKX19LHQuc3RvcD1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uc3RvcFwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBTdG9wIHN0cmVhbSBwbGF5ZXIgd2l0aCBpZCBcIiksdC5zdHJlYW1JZCksdC5wbGF5ZXI/KEZlLnJlbW92ZUVmZmVjdEZyb21Mb2NhbFBsYXllcih0KSx0LnBsYXllci5kZXN0cm95KCksZGVsZXRlIHQucGxheWVyKTpvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFN0cmVhbS5zdG9wKCk6IFN0cmVhbSBpcyBub3QgcGxheWluZ1wiKSksdC5fZmx1c2hBdWRpb01peGluZ011dGVTdGF0dXMoITApLGUoKX0sdC5pc1BsYXlpbmc9ZnVuY3Rpb24oKXtyZXR1cm4hIXQucGxheWVyfSx0LmlzUGF1c2VkPWZ1bmN0aW9uKCl7cmV0dXJuISF0LnBsYXllciYmKCEhKHQucGxheWVyLnZpZGVvJiZ0LnBsYXllci52aWRlby5wYXVzZWQmJnQucGxheWVyLm1lZGlhRWxlbUV4aXN0cyh0LnBsYXllci52aWRlbykpfHwhISh0LnBsYXllci5hdWRpbyYmdC5wbGF5ZXIuYXVkaW8ucGF1c2VkJiZ0LnBsYXllci5tZWRpYUVsZW1FeGlzdHModC5wbGF5ZXIuYXVkaW8pKSl9LHQucmVzdW1lPWZ1bmN0aW9uKCl7dmFyIGUsbjtyZXR1cm4gdC5wbGF5ZXI/KHQucGxheWVyLnZpZGVvJiZ0LnBsYXllci52aWRlby5wbGF5JiYoZT10LnBsYXllci52aWRlby5wbGF5KCkpLGU9ZXx8UHJvbWlzZS5yZXNvbHZlKCksdC5wbGF5ZXIuYXVkaW8mJnQucGxheWVyLmF1ZGlvLnBsYXkmJihuPXQucGxheWVyLmF1ZGlvLnBsYXkoKSksbj1ufHxQcm9taXNlLnJlc29sdmUoKSxQcm9taXNlLmFsbChbZSxuXSkpOlByb21pc2UucmVqZWN0KFwiTk9fUExBWUVSX0ZPVU5EXCIpfSx0LmdldFZpZGVvVHJhY2s9ZnVuY3Rpb24oKXt2YXIgZT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLmdldFZpZGVvVHJhY2tcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKHQuc3RyZWFtJiZ0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcyl7dmFyIG49dC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtpZihuKXJldHVybiBvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gZ2V0VmlkZW9UcmFja1wiKSxuKSxlKCksbn1vLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gZ2V0VmlkZW9UcmFjayBOb25lXCIpKSxlKG51bGwsXCJnZXRWaWRlb1RyYWNrIE5vbmVcIil9LHQuZ2V0QXVkaW9UcmFjaz1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uZ2V0QXVkaW9UcmFja1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYodC5zdHJlYW0mJnQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKXt2YXIgbj10LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdO2lmKG4pcmV0dXJuIG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBnZXRBdWRpb1RyYWNrc1wiKSxuKSxlKCksbn1vLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gZ2V0QXVkaW9UcmFja3MgTm9uZVwiKSksZShudWxsLFwiZ2V0QXVkaW9UcmFja3MgTm9uZVwiKX0sdC5faGFzVmlkZW9UcmFja3M9ZnVuY3Rpb24oKXtyZXR1cm4hISh0LnN0cmVhbSYmdC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MmJnQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pfSx0Ll9oYXNBdWRpb1RyYWNrcz1mdW5jdGlvbigpe3JldHVybiEhKHQuc3RyZWFtJiZ0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcyYmdC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSl9LHQuX3JlcGxhY2VNZWRpYVN0cmVhbVRyYWNrPWZ1bmN0aW9uKGUsbixpKXtpZih0LnN0cmVhbSl7aWYoXCJ2aWRlb1wiPT1lLmtpbmQpe2lmKHI9dC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSlyZXR1cm4gdC51c2VyTXV0ZVZpZGVvJiYoZS5lbmFibGVkPSExKSx0LnN0cmVhbS5yZW1vdmVUcmFjayhyKSx0LnN0cmVhbS5hZGRUcmFjayhlKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIF9yZXBsYWNlTWVkaWFTdHJlYW1UcmFjayBcIikuY29uY2F0KGUua2luZCxcIiBTVUNDRVNTXCIpKSxcImxpdmVcIj09ci5yZWFkeVN0YXRlJiYoci5zdG9wKCksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBUcmFjayBcIikuY29uY2F0KHIua2luZCxcIiBTdG9wcGVkXCIpKSksbiYmbigpO3ZhciBhPVwiTUVESUFTVFJFQU1fVFJBQ0tfTk9UX0ZPVU5EXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gTUVESUFTVFJFQU1fVFJBQ0tfTk9UX0ZPVU5EIFwiKS5jb25jYXQoZS5raW5kKSksaShhKX1pZihcImF1ZGlvXCI9PWUua2luZCl7dmFyIHI7aWYocj10LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKXt0LnVzZXJNdXRlQXVkaW8mJihlLmVuYWJsZWQ9ITEpO3ZhciBzPW5ldyBNZWRpYVN0cmVhbTtzLmFkZFRyYWNrKGUpO3ZhciBjPXQuc3RyZWFtJiZ0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO3JldHVybiBjJiZzLmFkZFRyYWNrKGMpLHQuc3RyZWFtPXMsdC5hdWRpb0xldmVsSGVscGVyPW51bGwsdC5wbGF5ZXImJnQucGxheWVyLnZpZGVvJiYodC5wbGF5ZXIudmlkZW8uc3JjT2JqZWN0PXQuc3RyZWFtKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIF9yZXBsYWNlTWVkaWFTdHJlYW1UcmFjayBTVUNDRVNTXCIpKSxcImxpdmVcIj09ci5yZWFkeVN0YXRlJiYoci5zdG9wKCksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBUcmFjayBcIikuY29uY2F0KHIua2luZCxcIiBTdG9wcGVkXCIpKSksbiYmbigpfWE9XCJNRURJQVNUUkVBTV9UUkFDS19OT1RfRk9VTkRcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBNRURJQVNUUkVBTV9UUkFDS19OT1RfRk9VTkQgXCIpLmNvbmNhdChlLmtpbmQpKSxpKGEpfWE9XCJJTlZBTElEX1RSQUNLX1RZUEVcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBfcmVwbGFjZU1lZGlhU3RyZWFtVHJhY2sgXCIpLmNvbmNhdChhLFwiIFwiKS5jb25jYXQoZS5raW5kKSksaSYmaShhKX1hPVwiTk9fU1RSRUFNX0ZPVU5EXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gX3JlcGxhY2VNZWRpYVN0cmVhbVRyYWNrIFwiKS5jb25jYXQoYSkpLGkmJmkoYSl9LHQucmVwbGFjZVRyYWNrPWZ1bmN0aW9uKGUsaSxhKXt2YXIgcj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGEmJmEoZSk7aSYmaSh0KX0sbmFtZTpcIlN0cmVhbS5yZXBsYWNlVHJhY2tcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKCFlfHwhZS5raW5kKXJldHVybiByKFwiSU5WQUxJRF9UUkFDS1wiKTt2YXIgYz10LmNoZWNrRHVhbFN0cmVhbUVuYWJsZWQoKTtyZXR1cm4gYz9yKGMpOih0Ll9jbGVhbnVwQXVkaW9NaXhpbmcoKSxlLm9uZW5kZWR8fChlLm9uZW5kZWQ9biksdC5wYyYmdC5wYy5oYXNTZW5kZXImJnQucGMuaGFzU2VuZGVyKGUua2luZCk/dm9pZCB0LnBjLnJlcGxhY2VUcmFjayhlLGZ1bmN0aW9uKCl7cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gUGVlckNvbm5lY3Rpb24ucmVwbGFjZVRyYWNrIFwiKS5jb25jYXQoZS5raW5kLFwiIFNVQ0NFU1NcIikpLHQuX3JlcGxhY2VNZWRpYVN0cmVhbVRyYWNrKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHIobnVsbCxlKX0scil9LGZ1bmN0aW9uKG4pe3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFBlZXJDb25uZWN0aW9uLnJlcGxhY2VUcmFjayBcIikuY29uY2F0KGUua2luZCxcIiBGYWlsZWQgXCIpLmNvbmNhdChuKSkscihuKX0pOnQuX3JlcGxhY2VNZWRpYVN0cmVhbVRyYWNrKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHIobnVsbCxlKX0scikpfSx0LnNldEF1ZGlvVm9sdW1lPWZ1bmN0aW9uKGUpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uc2V0QXVkaW9Wb2x1bWVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShlLFwibGV2ZWxcIiwwLDEwMCksdC5hdWRpb0xldmVsPWUsdC5wbGF5ZXImJnQucGxheWVyLnNldEF1ZGlvVm9sdW1lKGUpLG4oKX0sdC5nZXRTdGF0cz1mdW5jdGlvbihlLG4saSl7dmFyIGE9W107YS5wdXNoKHQuX2dldFBDU3RhdHMoaSkpLGEucHVzaChuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt2YXIgbj17fTt0LnBjJiZ0LnBjLmlzU3Vic2NyaWJlcj9udWxsIT09d2luZG93Lm5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goXCJGaXJlZm94XCIpJiYoaWUobixcInZpZGVvUmVjZWl2ZVJlc29sdXRpb25IZWlnaHRcIix0LnZpZGVvSGVpZ2h0KSxpZShuLFwidmlkZW9SZWNlaXZlUmVzb2x1dGlvbldpZHRoXCIsdC52aWRlb1dpZHRoKSk6dC5wYyYmIXQucGMuaXNTdWJzY3JpYmVyJiYoKE9iamVjdChtLmlzU2FmYXJpKSgpfHxPYmplY3QobS5pc0ZpcmVGb3gpKCkpJiYoaWUobixcInZpZGVvU2VuZFJlc29sdXRpb25IZWlnaHRcIix0LnZpZGVvSGVpZ2h0KSxpZShuLFwidmlkZW9TZW5kUmVzb2x1dGlvbldpZHRoXCIsdC52aWRlb1dpZHRoKSksKE9iamVjdChtLmlzU2FmYXJpKSgpfHxPYmplY3QobS5pc0ZpcmVGb3gpKCkpJiZ0LnVwbGlua1N0YXRzJiZpZShuLFwidmlkZW9TZW5kUGFja2V0c0xvc3RcIix0LnVwbGlua1N0YXRzLnVwbGlua19jdW11bGF0aXZlX2xvc3QpKSxlKG4pfSkpLGEucHVzaChuZXcgUHJvbWlzZShmdW5jdGlvbihlKXt2YXIgbj17fTtyZXR1cm4gdC50cmFmZmljX3N0YXRzJiZ0LnBjJiZ0LnBjLmlzU3Vic2NyaWJlcj8oaWUobixcImFjY2Vzc0RlbGF5XCIsdC50cmFmZmljX3N0YXRzLmFjY2Vzc19kZWxheSksaWUobixcImVuZFRvRW5kRGVsYXlcIix0LnRyYWZmaWNfc3RhdHMuZTJlX2RlbGF5KSxpZShuLFwidmlkZW9SZWNlaXZlRGVsYXlcIix0LnRyYWZmaWNfc3RhdHMudmlkZW9fZGVsYXkpLGllKG4sXCJhdWRpb1JlY2VpdmVEZWxheVwiLHQudHJhZmZpY19zdGF0cy5hdWRpb19kZWxheSkpOnQudHJhZmZpY19zdGF0cyYmdC5wYyYmIXQucGMuaXNTdWJzY3JpYmVyJiZpZShuLFwiYWNjZXNzRGVsYXlcIix0LnRyYWZmaWNfc3RhdHMuYWNjZXNzX2RlbGF5KSxlKG4pfSkpLFByb21pc2UuYWxsKGEpLnRoZW4oZnVuY3Rpb24obil7Zm9yKHZhciBpPXt9LGE9bi5sZW5ndGgtMTthPj0wO2EtLSl7dmFyIHI9blthXTtTKCkoaSxyKX1lJiZzZXRUaW1lb3V0KGUuYmluZCh0LGkpLDApfSkuY2F0Y2goZnVuY3Rpb24oZSl7biYmc2V0VGltZW91dChuLmJpbmQodCxlKSwwKX0pfSx0Ll9nZXRQQ1N0YXRzPWZ1bmN0aW9uKGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe2lmKCF0LnBjfHxcImVzdGFibGlzaGVkXCIhPT10LnBjLnN0YXRlfHwhdC5wYy5nZXRTdGF0cyl7cmV0dXJuIGkoXCJQRUVSX0NPTk5FQ1RJT05fTk9UX0VTVEFCTElTSEVEXCIpfXQucGMuZ2V0U3RhdHMoZnVuY3Rpb24oZSl7aWYoIXQucGN8fFwiZXN0YWJsaXNoZWRcIiE9PXQucGMuc3RhdGV8fCF0LnBjLmdldFN0YXRzKXtyZXR1cm4gaShcIlBFRVJfQ09OTkVDVElPTl9TVEFURV9DSEFOR0VcIil9dmFyIGE9dC5wYy5pc1N1YnNjcmliZXI/ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtlLmlkJiYoLTE9PT1lLmlkLmluZGV4T2YoXCJyZWN2XCIpJiYtMT09PWUuaWQuaW5kZXhPZihcImluYm91bmRfcnRwXCIpJiYtMT09PWUuaWQuaW5kZXhPZihcImluYm91bmQtcnRwXCIpJiYtMT09PWUuaWQuaW5kZXhPZihcIkluYm91bmRSVFBcIil8fChcImF1ZGlvXCI9PT1lLm1lZGlhVHlwZT8oaWUodCxcImF1ZGlvUmVjZWl2ZUJ5dGVzXCIsZS5ieXRlc1JlY2VpdmVkKSxpZSh0LFwiYXVkaW9SZWNlaXZlUGFja2V0c1wiLGUucGFja2V0c1JlY2VpdmVkKSxpZSh0LFwiYXVkaW9SZWNlaXZlUGFja2V0c0xvc3RcIixlLnBhY2tldHNMb3N0KSk6KGllKHQsXCJ2aWRlb1JlY2VpdmVCeXRlc1wiLGUuYnl0ZXNSZWNlaXZlZCksaWUodCxcInZpZGVvUmVjZWl2ZVBhY2tldHNMb3N0XCIsZS5wYWNrZXRzTG9zdCksaWUodCxcInZpZGVvUmVjZWl2ZVBhY2tldHNcIixlLnBhY2tldHNSZWNlaXZlZCksaWUodCxcInZpZGVvUmVjZWl2ZUZyYW1lUmF0ZVwiLGUuZ29vZ0ZyYW1lUmF0ZVJlY2VpdmVkKSxpZSh0LFwidmlkZW9SZWNlaXZlRGVjb2RlRnJhbWVSYXRlXCIsZS5nb29nRnJhbWVSYXRlRGVjb2RlZCksaWUodCxcInZpZGVvUmVjZWl2ZVJlc29sdXRpb25XaWR0aFwiLGUuZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZCksaWUodCxcInZpZGVvUmVjZWl2ZVJlc29sdXRpb25IZWlnaHRcIixlLmdvb2dGcmFtZUhlaWdodFJlY2VpdmVkKSkpKX0pLHR9KGUpOmZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBlLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5pZCYmKC0xPT09ZS5pZC5pbmRleE9mKFwic2VuZFwiKSYmLTE9PT1lLmlkLmluZGV4T2YoXCJvdXRib3VuZF9ydHBcIikmJi0xPT09ZS5pZC5pbmRleE9mKFwiT3V0Ym91bmRSVFBcIil8fChcImF1ZGlvXCI9PT1lLm1lZGlhVHlwZT8oaWUodCxcImF1ZGlvU2VuZEJ5dGVzXCIsZS5ieXRlc1NlbnQpLGllKHQsXCJhdWRpb1NlbmRQYWNrZXRzXCIsZS5wYWNrZXRzU2VudCksaWUodCxcImF1ZGlvU2VuZFBhY2tldHNMb3N0XCIsZS5wYWNrZXRzTG9zdCkpOihpZSh0LFwidmlkZW9TZW5kQnl0ZXNcIixlLmJ5dGVzU2VudCksaWUodCxcInZpZGVvU2VuZFBhY2tldHNcIixlLnBhY2tldHNTZW50KSxpZSh0LFwidmlkZW9TZW5kUGFja2V0c0xvc3RcIixlLnBhY2tldHNMb3N0KSxpZSh0LFwidmlkZW9TZW5kRnJhbWVSYXRlXCIsZS5nb29nRnJhbWVSYXRlU2VudCksaWUodCxcInZpZGVvU2VuZFJlc29sdXRpb25XaWR0aFwiLGUuZ29vZ0ZyYW1lV2lkdGhTZW50KSxpZSh0LFwidmlkZW9TZW5kUmVzb2x1dGlvbkhlaWdodFwiLGUuZ29vZ0ZyYW1lSGVpZ2h0U2VudCkpKSl9KSx0fShlKTtyZXR1cm4gbihhKX0sZSl9KS50aGVuKGZ1bmN0aW9uKGUpe3JldHVybiB0LnBjLmlzU3Vic2NyaWJlcj8oT2JqZWN0KG0uaXNGaXJlRm94KSgpfHxPYmplY3QobS5pc1NhZmFyaSkoKSkmJihlLnZpZGVvUmVjZWl2ZVJlc29sdXRpb25IZWlnaHQmJlwiMFwiIT09ZS52aWRlb1JlY2VpdmVSZXNvbHV0aW9uSGVpZ2h0fHxlLnZpZGVvUmVjZWl2ZVJlc29sdXRpb25XaWR0aCYmXCIwXCIhPT1lLnZpZGVvUmVjZWl2ZVJlc29sdXRpb25XaWR0aHx8KGllKGUsXCJ2aWRlb1JlY2VpdmVSZXNvbHV0aW9uSGVpZ2h0XCIsdC52aWRlb0hlaWdodCksaWUoZSxcInZpZGVvUmVjZWl2ZVJlc29sdXRpb25XaWR0aFwiLHQudmlkZW9XaWR0aCkpKTooKE9iamVjdChtLmlzU2FmYXJpKSgpfHxPYmplY3QobS5pc0ZpcmVGb3gpKCkpJiYoZS52aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0JiZcIjBcIiE9PWUudmlkZW9TZW5kUmVzb2x1dGlvbkhlaWdodHx8ZS52aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGgmJlwiMFwiIT09ZS52aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGh8fChpZShlLFwidmlkZW9TZW5kUmVzb2x1dGlvbkhlaWdodFwiLHQudmlkZW9IZWlnaHQpLGllKGUsXCJ2aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGhcIix0LnZpZGVvV2lkdGgpKSksKE9iamVjdChtLmlzU2FmYXJpKSgpfHxPYmplY3QobS5pc0ZpcmVGb3gpKCkpJiZ0LnVwbGlua1N0YXRzJiZpZShlLFwidmlkZW9TZW5kUGFja2V0c0xvc3RcIix0LnVwbGlua1N0YXRzLnVwbGlua19jdW11bGF0aXZlX2xvc3QpKSxQcm9taXNlLnJlc29sdmUoZSl9KX0sdC5nZXRBdWRpb0xldmVsPWZ1bmN0aW9uKCl7aWYodC5hdWRpb0xldmVsSGVscGVyKXJldHVybiB0LmF1ZGlvTGV2ZWxIZWxwZXIuZ2V0QXVkaW9MZXZlbCgpO2lmKHQuc3RyZWFtKXtpZigwIT09dC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKS5sZW5ndGgpcmV0dXJuIHQuYXVkaW9MZXZlbEhlbHBlcj1uZXcgbmUuYXVkaW9MZXZlbEhlbHBlcih0LnN0cmVhbSksdC5hdWRpb0xldmVsSGVscGVyLmdldEF1ZGlvTGV2ZWwoKTtvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gY2FuJ3QgZ2V0IGF1ZGlvTGV2ZWwgYmVhY3VzZSBubyBhdWRpbyB0cmFjZSBpbiBzdHJlYW1cIikpfWVsc2Ugby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIGNhbid0IGdldCBhdWRpb0xldmVsIGJlYWN1c2Ugbm8gc3RyZWFtIGV4aXN0XCIpKX0sdC5zZXRWaWRlb1Byb2ZpbGUoXCI0ODBQXCIpLHQuX3N3aXRjaFZpZGVvRGV2aWNlPWZ1bmN0aW9uKGUsbixpKXtpZihlPT09dC5jYW1lcmFJZClyZXR1cm4gbiYmbigpO3ZhciBhPXt2aWRlbzpTKCkoe30sdC52aWRlb0NvbnN0cmFpbnQse2RldmljZUlkOntleGFjdDplfX0pLGF1ZGlvOiExfTtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFwiKS5jb25jYXQoYSkpLHRlKGEsZnVuY3Rpb24oYSl7dHJ5e3ZhciByPWZ1bmN0aW9uKCl7dC5pc1BsYXlpbmcoKSYmKHQuc3RvcCgpLHQuZWxlbWVudElEJiZ0LnBsYXkodC5lbGVtZW50SUQsdC5wbGF5T3B0aW9ucykpLHQuY2FtZXJhSWQ9ZSx0LnZpZGVvQ29uc3RyYWludC5kZXZpY2VJZD17ZXhhY3Q6ZX0sdC51c2VyTXV0ZVZpZGVvJiYodC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXS5lbmFibGVkPSExKSxGZS5yZXN0b3JlVmlkZW9FZmZlY3QodCksbiYmbigpfTtGZS5kaXNhYmxlVmlkZW9FZmZlY3QodCkudGhlbihmdW5jdGlvbigpe09iamVjdChtLmlzU2FmYXJpKSgpP3QucmVwbGFjZVRyYWNrKGEuZ2V0VmlkZW9UcmFja3MoKVswXSxyLGkpOih0LnJlbW92ZVRyYWNrKHQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pLHQuYWRkVHJhY2soYS5nZXRWaWRlb1RyYWNrcygpWzBdKSxyKCkpfSl9Y2F0Y2goZSl7cmV0dXJuIGkmJmkoZSl9fSxmdW5jdGlvbihlKXtyZXR1cm4gaSYmaShlKX0pfSx0Ll9zd2l0Y2hBdWRpb0RldmljZT1mdW5jdGlvbihlLG4saSl7aWYoZT09PXQubWljcm9waG9uZUlkKXJldHVybiBuJiZuKCk7dmFyIGE9e3ZpZGVvOiExLGF1ZGlvOlMoKSh7fSx0LmF1ZGlvQ29uc3RyYWludCx7ZGV2aWNlSWQ6e2V4YWN0OmV9fSl9O28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gXCIpLGEpLHRlKGEsZnVuY3Rpb24oYSl7dmFyIHI9ZnVuY3Rpb24oKXt0Ll9jbGVhbnVwQXVkaW9NaXhpbmcoKSx0LnVzZXJNdXRlQXVkaW8mJih0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQ9ITEpLHQuaXNQbGF5aW5nKCkmJih0LnN0b3AoKSx0LmVsZW1lbnRJRCYmdC5wbGF5KHQuZWxlbWVudElEKSksdC5taWNyb3Bob25lSWQ9ZSx0LmF1ZGlvQ29uc3RyYWludC5kZXZpY2VJZD17ZXhhY3Q6ZX0sbiYmbigpfTt0cnl7T2JqZWN0KG0uaXNTYWZhcmkpKCk/dC5yZXBsYWNlVHJhY2soYS5nZXRBdWRpb1RyYWNrcygpWzBdLHIsaSk6KHQucmVtb3ZlVHJhY2sodC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXSksdC5hZGRUcmFjayhhLmdldEF1ZGlvVHJhY2tzKClbMF0pLHIoKSl9Y2F0Y2goZSl7cmV0dXJuIGkmJmkoZSl9fSxmdW5jdGlvbihlKXtyZXR1cm4gaSYmaShlKX0pfSx0LnN3aXRjaERldmljZT1mdW5jdGlvbihlLG4saSxhKXt2YXIgcj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGEmJmEoZSk7aSYmaSh0KX0sbmFtZTpcIlN0cmVhbS5zd2l0Y2hEZXZpY2VcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShuLFwiZGV2aWNlSWRcIik7dmFyIGM9ZnVuY3Rpb24oKXtyZXR1cm4gdC5pblN3aXRjaERldmljZT0hMSxyKCl9LGQ9ZnVuY3Rpb24oZSl7dC5pblN3aXRjaERldmljZT0hMSxvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFwiKSxlKSxyKGUpfTtpZih0LmluU3dpdGNoRGV2aWNlKXJldHVybiByKFwiRGV2aWNlIHN3aXRjaCBpcyBpbiBwcm9jZXNzLlwiKTtpZih0LmluU3dpdGNoRGV2aWNlPSEwLCF0LmxvY2FsKXJldHVybiBkKFwiT25seSB0aGUgbG9jYWwgc3RyZWFtIGNhbiBzd2l0Y2ggdGhlIGRldmljZS5cIik7aWYodC5zY3JlZW4mJlwidmlkZW9cIj09PWUpcmV0dXJuIGQoXCJUaGUgZGV2aWNlIGNhbm5vdCBiZSBzd2l0Y2hlZCBkdXJpbmcgc2NyZWVuLXNoYXJpbmcuXCIpO2lmKHQudmlkZW9Tb3VyY2V8fHQuYXVkaW9Tb3VyY2UpcmV0dXJuIGQoXCJUaGUgZGV2aWNlIGNhbm5vdCBiZSBzd2l0Y2hlZCB3aGVuIHVzaW5nIHZpZGVvU291cmNlIG9yIGF1ZGlvU291cmNlLlwiKTtpZih0Lmxvd1N0cmVhbSlyZXR1cm4gZChcIlRoZSBkZXZpY2UgY2Fubm90IGJlIHN3aXRjaGVkIHdoZW4gdXNpbmcgbG93c3RyZWFtLlwiKTt2YXIgdT0hMTtmb3IodmFyIGwgaW4gdC5hdWRpb01peGluZy5zb3VuZHMpe2lmKHQuYXVkaW9NaXhpbmcuc291bmRzW2xdLnN0YXRlIT09dC5hdWRpb01peGluZy5zdGF0ZXMuSURMRSl7dT0hMDticmVha319aWYodC5hdWRpb01peGluZy5hdWRpb0NvbnRleHRJbml0ZWQmJnUpcmV0dXJuIGQoXCJUaGUgZGV2aWNlIGNhbm5vdCBiZSBzd2l0Y2hlZCB3aGVuIHVzaW5nIGF1ZGlvIE1peGluZy5cIik7YWUuZ2V0RGV2aWNlQnlJZChuLGZ1bmN0aW9uKCl7aWYoXCJ2aWRlb1wiPT09ZSl0Ll9zd2l0Y2hWaWRlb0RldmljZShuLGMsZCk7ZWxzZXtpZihcImF1ZGlvXCIhPT1lKXJldHVybiBkKFwiSW52YWxpZCB0eXBlLlwiKTt0Ll9zd2l0Y2hBdWRpb0RldmljZShuLGMsZCl9fSxmdW5jdGlvbigpe3JldHVybiBkKFwiVGhlIGRldmljZSBkb2VzIG5vdCBleGlzdC5cIil9KX0sdH0sSmU9YSgxOSksS2U9YSg3KSx6ZT1hLm4oS2UpLFhlPVtcImxpdmVcIixcInJ0Y1wiLFwid2ViXCIsXCJpbnRlcm9wXCIsXCJoMjY0X2ludGVyb3BcIixcIndlYi1vbmx5XCJdLFFlPVtcInZwOFwiLFwiaDI2NFwiXSwkZT1bXCJhZXMtMTI4LXh0c1wiLFwiYWVzLTI1Ni14dHNcIixcImFlcy0xMjgtZWNiXCJdLFplPWEoMjApLGV0PWEubihaZSksdHQ9ZnVuY3Rpb24oZSl7ZSYmZS5hcHBseSh0aGlzLFtdLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpKX0sbnQ9YSg5KSxpdD1mdW5jdGlvbihlKXt2YXIgdD1jKGUpO3QubmVlZFJlY29ubmVjdD0hMCx0LmlzVGltZW91dD0hMSx0LmlzSW5pdD0hMCx0LnNlbmRieXRlcz0wLHQucmVjdmJ5dGVzPTAsdC5zdGFydFRpbWU9RGF0ZS5ub3coKSx0Lmxhc3RNc2dUaW1lPW51bGwsdC5jbGllbnRJZD1lLmNsaWVudElkLHQuaG9zdEluZGV4PTAsdC5yZXF1ZXN0SUQ9MCxlLmhvc3QgaW5zdGFuY2VvZiBBcnJheT90Lmhvc3Q9ZS5ob3N0OnQuaG9zdD1bZS5ob3N0XSx0LmdldFNlbmRCeXRlcz1mdW5jdGlvbigpe3JldHVybiB0LnNlbmRieXRlc30sdC5nZXRSZWN2Qnl0ZXM9ZnVuY3Rpb24oKXtyZXR1cm4gdC5yZWN2Ynl0ZXN9LHQuZ2V0RHVyYXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gTWF0aC5jZWlsKChEYXRlLm5vdygpLXQuc3RhcnRUaW1lKS8xZTMpfSx0LmdldFVSTD1mdW5jdGlvbigpe3JldHVybiB0LmNvbm5lY3Rpb24udXJsfSx0LnJlY29ubmVjdD1mdW5jdGlvbigpe3QuaXNJbml0PSEwLHQuY3JlYXRDb25uZWN0aW9uKCl9LHQuY29ubmVjdE5leHQ9ZnVuY3Rpb24oKXt0LmlzSW5pdD0hMCwrK3QuaG9zdEluZGV4LG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXSBHYXRld2F5IGxlbmd0aDpcIit0Lmhvc3QubGVuZ3RoK1wiIGN1cnJlbnQgaW5kZXg6XCIrdC5ob3N0SW5kZXgpLHQuaG9zdEluZGV4Pj10Lmhvc3QubGVuZ3RoP3QuZGlzcGF0Y2hFdmVudChwKHt0eXBlOlwicmVjb3ZlclwifSkpOnQuY3JlYXRDb25uZWN0aW9uKCl9LHQucmVwbGFjZUhvc3Q9ZnVuY3Rpb24oZSl7dC5ob3N0PWV8fHQuaG9zdCx0Lmhvc3RJbmRleD0wLHQuY3JlYXRDb25uZWN0aW9uKCl9LHQuY3JlYXRDb25uZWN0aW9uPWZ1bmN0aW9uKCl7aWYodC5uZWVkUmVjb25uZWN0PSEwLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXSBzdGFydCBjb25uZWN0OlwiK3QuaG9zdFt0Lmhvc3RJbmRleF0pLHQubHRzPShuZXcgRGF0ZSkuZ2V0VGltZSgpLHQuY29ubmVjdGlvbj1uZXcgV2ViU29ja2V0KFwid3NzOi8vXCIrdC5ob3N0W3QuaG9zdEluZGV4XSksdC5jb25uZWN0aW9uLmJpbmFyeVR5cGU9XCJhcnJheWJ1ZmZlclwiLHQudHVybkNvbmZpZz17fSx0LmNvbm5lY3Rpb24udXJsKXt2YXIgbj10LmNvbm5lY3Rpb24udXJsLm1hdGNoKC93c3NcXDpcXC9cXC8oW146XSspOihcXGQrKS8pO2lmKG4pdC50dXJuQ29uZmlnLnVybD1uWzFdLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJUVVJOX0VOQUJMRV9UQ1BcIikmJih0LnR1cm5Db25maWcudGNwcG9ydD1wYXJzZUludChuWzJdKSszMCksT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlRVUk5fRU5BQkxFX1VEUFwiKSYmKHQudHVybkNvbmZpZy51ZHBwb3J0PXBhcnNlSW50KG5bMl0pKzMwKTtlbHNle3ZhciBpPXQuaG9zdFt0Lmhvc3RJbmRleF0uc3BsaXQoXCI6XCIpO3QudHVybkNvbmZpZy51cmw9aVswXSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiVFVSTl9FTkFCTEVfVENQXCIpJiYodC50dXJuQ29uZmlnLnRjcHBvcnQ9cGFyc2VJbnQoaVsxXSkrMzApLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJUVVJOX0VOQUJMRV9VRFBcIikmJih0LnR1cm5Db25maWcudWRwcG9ydD1wYXJzZUludChpWzFdKSszMCl9fXQuY29ubmVjdGlvbi5vbm9wZW49ZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdIHdlYnNvY2tlY3Qgb3BlbmVkOiBcIit0Lmhvc3RbdC5ob3N0SW5kZXhdKSx0Lm5lZWRSZWNvbm5lY3Q9ITAsdC5pc1RpbWVvdXQ9ITEsdC5pc0luaXQ9ITEsdC5zZW5kYnl0ZXM9MCx0LnJlY3ZieXRlcz0wLHQuc3RhcnRUaW1lPURhdGUubm93KCksT2JqZWN0KG50LnJlc2V0SFRUUEJ5ZXRzQ291bnQpKCksY2xlYXJUaW1lb3V0KHQudGltZW91dENoZWNrKSx0LmRpc3BhdGNoRXZlbnQocCh7dHlwZTpcIm9ub3BlblwiLGV2ZW50OmUsc29ja2V0OnR9KSl9LHQuY29ubmVjdGlvbi5vbm1lc3NhZ2U9ZnVuY3Rpb24oZSl7aWYoZS5kYXRhIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpdC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwib25CaW5hcnlEYXRhXCIsZGF0YTplLmRhdGF9KTtlbHNle3QucmVjdmJ5dGVzKz1PYmplY3QobmUubGVuZ3RoSW5VdGY4Qnl0ZXMpKGUuZGF0YSk7dmFyIG49SlNPTi5wYXJzZShlLmRhdGEpO3QubGFzdE1zZ1RpbWU9RGF0ZS5ub3coKSxuLmhhc093blByb3BlcnR5KFwiX2lkXCIpP3QuZGlzcGF0Y2hFdmVudChwKHt0eXBlOm4uX2lkLG1zZzpufSkpOm4uaGFzT3duUHJvcGVydHkoXCJfdHlwZVwiKSYmdC5kaXNwYXRjaFNvY2tldEV2ZW50KHAoe3R5cGU6bi5fdHlwZSxtc2c6bi5fbWVzc2FnZX0pKX19LHQuY29ubmVjdGlvbi5vbmNsb3NlPWZ1bmN0aW9uKG4pe3QubmVlZFJlY29ubmVjdD90LmlzVGltZW91dHx8dC5pc0luaXQ/KG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXSB3ZWJzb2NrZWN0IGNvbm5lY3QgdGltZW91dFwiKSxzLmIuam9pbkdhdGV3YXkoZS5zaWQse2x0czp0Lmx0cyxzdWNjOiExLGVjOlwidGltZW91dFwiLGFkZHI6dC5jb25uZWN0aW9uLnVybH0pLHQuY29ubmVjdE5leHQoKSk6dC5kaXNwYXRjaEV2ZW50KHAoe3R5cGU6XCJkaXNjb25uZWN0XCIsZXZlbnQ6bn0pKTooby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdIHdlYnNvY2tlY3QgY2xvc2VlZFwiKSx0dChlLm9uRmFpbHVyZSxuKSxjbGVhclRpbWVvdXQodC50aW1lb3V0Q2hlY2spLHQuZGlzcGF0Y2hFdmVudChwKHt0eXBlOlwiY2xvc2VcIixldmVudDpufSkpLHQuY29ubmVjdGlvbi5vbm9wZW49dm9pZCAwLHQuY29ubmVjdGlvbi5vbmNsb3NlPXZvaWQgMCx0LmNvbm5lY3Rpb24ub25lcnJvcj12b2lkIDAsdC5jb25uZWN0aW9uLm9ubWVzc2FnZT12b2lkIDAsdC5jb25uZWN0aW9uPXZvaWQgMCl9LHQuY29ubmVjdGlvbi5vbmVycm9yPWZ1bmN0aW9uKGUpe30sc2V0VGltZW91dChmdW5jdGlvbigpe3QuY29ubmVjdGlvbiYmdC5jb25uZWN0aW9uLnJlYWR5U3RhdGUhPVdlYlNvY2tldC5PUEVOJiYodC5pc1RpbWVvdXQ9ITAsdC5jb25uZWN0aW9uLmNsb3NlKCkpfSw1ZTMpfSx0LmNyZWF0Q29ubmVjdGlvbigpLHQuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSxuKXtpZih0LmNvbm5lY3Rpb24mJnQuY29ubmVjdGlvbi5yZWFkeVN0YXRlPT1XZWJTb2NrZXQuT1BFTil7dmFyIGk9SlNPTi5zdHJpbmdpZnkoZSk7dC5zZW5kYnl0ZXMrPU9iamVjdChuZS5sZW5ndGhJblV0ZjhCeXRlcykoaSksdC5jb25uZWN0aW9uLnNlbmQoaSl9ZWxzZSBuKHtlcnJvcjpcIkdhdGV3YXkgbm90IGNvbm5lY3RlZFwifSl9LHQuZGlzY29ubmVjdD1mdW5jdGlvbigpe3QubmVlZFJlY29ubmVjdD0hMCx0LmNvbm5lY3Rpb24uY2xvc2UoKX0sdC5jbG9zZT1mdW5jdGlvbigpe3QubmVlZFJlY29ubmVjdD0hMSx0LmNvbm5lY3Rpb24ub25jbG9zZT12b2lkIDAsdC5jb25uZWN0aW9uLmNsb3NlKCl9LHQuc2VuZFNpZ25hbENvbW1hbmQ9ZnVuY3Rpb24oZSxuKXtlLl9pZD1cIl9yZXF1ZXN0X1wiK3QucmVxdWVzdElELHQucmVxdWVzdElEKz0xLFwicHVibGlzaF9zdGF0c1wiIT09ZS5fdHlwZSYmXCJzdWJzY3JpYmVfc3RhdHNcIiE9PWUuX3R5cGUmJlwicHVibGlzaF9zdGF0c19sb3dcIiE9PWUuX3R5cGUmJnQub24oZS5faWQsZnVuY3Rpb24oaSl7aS5tc2cmJm4mJm4oaS5tc2cuX3Jlc3VsdCxpLm1zZy5tZXNzYWdlKSxkZWxldGUgdC5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW2UuX2lkXX0pLHQuc2VuZE1lc3NhZ2UoZSxmdW5jdGlvbihlKXtlLnJlYXNvbj1cIk5PVF9DT05ORUNURURcIixuJiZuKGUucmVhc29uLGUpfSl9LHQucmVxdWVzdHM9W107dmFyIG49ZnVuY3Rpb24oZSl7dmFyIG49dC5yZXF1ZXN0cy5maW5kSW5kZXgoZnVuY3Rpb24odCl7cmV0dXJuIHQuaWQ9PT1lLnR5cGV9KTtpZihuPj0wKXZhciBpPXQucmVxdWVzdHMuc3BsaWNlKG4sMSlbMF07aSYmdC5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW2UudHlwZV0/KGRlbGV0ZSB0LmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbZS50eXBlXSxlLm1zZyYmaS5jYWxsYmFjayYmaS5jYWxsYmFjayhlLm1zZy5fcmVzdWx0LGUubXNnLl9tZXNzYWdlKSk6by5kZWZhdWx0Lndhcm5pbmcoXCJEZXRhY2hlZCBSZXNwb25zZVwiLGUudHlwZSxlLm1zZyl9O3JldHVybiB0LnNlbmRSZXF1ZXN0PWZ1bmN0aW9uKGUsaSl7ZT1TKCkoe19pZDpcIl9yZXF1ZXN0X1wiK3QucmVxdWVzdElEfSxlKSx0LnJlcXVlc3RJRCs9MTt2YXIgYT17aWQ6ZS5faWQsdGltZW91dENvdW50ZXI6MCxzdGFsbGVkQXQ6RGF0ZS5ub3coKSxtZXNzYWdlOmUsY2FsbGJhY2s6aX07dC5yZXF1ZXN0cy5wdXNoKGEpLHQuYWRkRXZlbnRMaXN0ZW5lcihlLl9pZCxuKSx0LnNlbmRNZXNzYWdlKGUsZnVuY3Rpb24oZSl7dmFyIG49dGhpcyxpPXQucmVxdWVzdHMuZmluZEluZGV4KGZ1bmN0aW9uKGUpe3JldHVybiBlLmlkPT09bi5pZH0pO2k+PTAmJihuPXQucmVxdWVzdHMuc3BsaWNlKGksMSlbMF0pLG4mJnQuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1tlLnR5cGVdPyhkZWxldGUgdC5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW2UudHlwZV0sZS5yZWFzb249XCJOT1RfQ09OTkVDVEVEXCIsbi5jYWxsYmFjayYmbi5jYWxsYmFjayhlLnJlYXNvbixlKSk6by5kZWZhdWx0Lndhcm5pbmcoXCJoYW5kbGVTZW5kRXJyb3JcIixuKX0uYmluZChhKSl9LHQuY2hlY2tSZXF1ZXN0VGltZW91dD1mdW5jdGlvbigpe2Zvcih2YXIgZT1NYXRoLmNlaWwoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlNJR05BTF9SRVFVRVNUX1RJTUVPVVRcIikvT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlNJR05BTF9SRVFVRVNUX1dBVENIX0lOVEVSVkFMXCIpKSxuPXQucmVxdWVzdHMubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciBpPXQucmVxdWVzdHNbbl07aS50aW1lb3V0Q291bnRlcj49ZT8odC5yZXF1ZXN0cy5zcGxpY2UobiwxKSxvLmRlZmF1bHQuZXJyb3IoXCJSZXF1ZXN0IFRpbWVvdXRcIixpLnRpbWVvdXRDb3VudGVyLGkubWVzc2FnZSksaS5jYWxsYmFjayYmaS5jYWxsYmFjayhcIlRJTUVPVVRcIikpOmkudGltZW91dENvdW50ZXIrK319LGNsZWFySW50ZXJ2YWwodC5yZXF1ZXN0VGltZXIpLHQucmVxdWVzdFRpbWVyPXNldEludGVydmFsKHQuY2hlY2tSZXF1ZXN0VGltZW91dCxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU0lHTkFMX1JFUVVFU1RfV0FUQ0hfSU5URVJWQUxcIikpLHQuc2VuZFJlcG9ydD1mdW5jdGlvbihlKXt0LnNlbmRNZXNzYWdlKGUsZnVuY3Rpb24oKXt9KX0sdH0sYXQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj17Y29ubmVjdDpmdW5jdGlvbigpe3QuaG9zdD1lLG4uc2lnbmFsPWl0KHQpLG4ub249bi5zaWduYWwub24sbi5kaXNwYXRjaEV2ZW50PW4uc2lnbmFsLmRpc3BhdGNoRXZlbnQsbi5zaWduYWwub24oXCJvbm9wZW5cIixmdW5jdGlvbihlKXtuLnNpZ25hbC5vbkV2ZW50PWZ1bmN0aW9uKGUpe24uZGlzcGF0Y2hFdmVudChwKHt0eXBlOmUuZXZlbnQsbXNnOmV9KSl9LG4uZGlzcGF0Y2hFdmVudChwKHt0eXBlOlwiY29ubmVjdFwiLG1zZzplfSkpfSksbi5zaWduYWwub24oXCJvbkVycm9yXCIsZnVuY3Rpb24oZSl7dmFyIHQ9ZS5tc2c7b25FcnJvcih0LmNvZGUsXCJlcnJvclwiKX0pfSxnZXRMYXN0TXNnVGltZTpmdW5jdGlvbigpe3JldHVybiBuLnNpZ25hbCYmbi5zaWduYWwubGFzdE1zZ1RpbWV9LGdldFNlbmRCeXRlczpmdW5jdGlvbigpe3JldHVybiBuLnNpZ25hbC5nZXRTZW5kQnl0ZXMoKX0sZ2V0UmVjdkJ5dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uc2lnbmFsLmdldFJlY3ZCeXRlcygpfSxnZXREdXJhdGlvbjpmdW5jdGlvbigpe3JldHVybiBuLnNpZ25hbC5nZXREdXJhdGlvbigpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7bi5zaWduYWwuZGlzY29ubmVjdCgpfSxjbG9zZTpmdW5jdGlvbigpe24uc2lnbmFsLmNsb3NlKCl9LGdldFVSTDpmdW5jdGlvbigpe3JldHVybiBuLnNpZ25hbC5nZXRVUkwoKX0scmVjb25uZWN0OmZ1bmN0aW9uKCl7bi5zaWduYWwucmVjb25uZWN0KCl9LGNvbm5lY3ROZXh0OmZ1bmN0aW9uKCl7bi5zaWduYWwuY29ubmVjdE5leHQoKX0scmVwbGFjZUhvc3Q6ZnVuY3Rpb24oZSl7bi5zaWduYWwucmVwbGFjZUhvc3QoZSl9LGVtaXRTaW1wbGVNZXNzYWdlOmZ1bmN0aW9uKGUsdCl7bi5zaWduYWwuc2VuZFNpZ25hbENvbW1hbmQoZSx0KX0sZW1pdFJlcXVlc3Q6ZnVuY3Rpb24oZSx0KXtuLnNpZ25hbC5zZW5kUmVxdWVzdChlLHQpfSxlbWl0UmVwb3J0OmZ1bmN0aW9uKGUpe24uc2lnbmFsLnNlbmRSZXBvcnQoZSl9fTtyZXR1cm4gbi5jb25uZWN0KCksbn0scnQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj0hMSxpPTAsYT17Y29tbWFuZDpcImNvbnZlcmdlQWxsb2NhdGVFZGdlXCIsc2lkOmUuc2lkLGFwcElkOmUuYXBwSWQsdG9rZW46ZS50b2tlbix1aWQ6ZS51aWQsY25hbWU6ZS5jbmFtZSx0czpNYXRoLmZsb29yKERhdGUubm93KCkvMWUzKSx2ZXJzaW9uOnIuVkVSU0lPTixzZXE6MCxyZXF1ZXN0SWQ6MX07T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlBST1hZX0NTXCIpLm1hcChmdW5jdGlvbihjKXt2YXIgZD0obmV3IERhdGUpLmdldFRpbWUoKTtvdChcImh0dHBzOi8vXCIrYytcIi9hcGkvdjFcIixhLGZ1bmN0aW9uKGEsdSl7aWYoYSlyZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiK2UuY2xpZW50SWQrXCJdIFJlcXVlc3QgcHJveHkgc2VydmVyIGZhaWxlZDogXCIsYSksaSsrLHMuYi5yZXF1ZXN0UHJveHlBcHBDZW50ZXIoZS5zaWQse2x0czpkLHN1Y2M6ITEsQVBBZGRyOmMsd29ya2VyTWFuYWdlckxpc3Q6bnVsbCxlYzpKU09OLnN0cmluZ2lmeShhKSxyZXNwb25zZTpKU09OLnN0cmluZ2lmeSh7ZXJyOmEscmVzOnV9KX0pLHZvaWQoaT49T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlBST1hZX0NTXCIpLmxlbmd0aCYmdCYmdChcIkdldCBwcm94eSBzZXJ2ZXIgZmFpbGVkOiByZXF1ZXN0IGFsbCBmYWlsZWRcIikpO2lmKCFuKWlmKCh1PUpTT04ucGFyc2UodSkpLmpzb25fYm9keSl7dmFyIGw9SlNPTi5wYXJzZSh1Lmpzb25fYm9keSk7aWYoby5kZWZhdWx0LmRlYnVnKFwiW1wiK2UuY2xpZW50SWQrXCJdIEFwcCByZXR1cm46XCIsbC5zZXJ2ZXJzKSwyMDAhPT1sLmNvZGUpe2E9XCJHZXQgcHJveHkgc2VydmVyIGZhaWxlZDogcmVzcG9uc2UgY29kZSBbXCIrbC5jb2RlK1wiXSwgcmVhc29uIFsgXCIrbC5yZWFzb24rXCJdXCI7by5kZWZhdWx0LmRlYnVnKFwiW1wiK2UuY2xpZW50SWQrXCJdIFwiK2EpLHMuYi5yZXF1ZXN0UHJveHlBcHBDZW50ZXIoZS5zaWQse2x0czpkLHN1Y2M6ITEsQVBBZGRyOmMsd29ya2VyTWFuYWdlckxpc3Q6bnVsbCxlYzphLHJlc3BvbnNlOkpTT04uc3RyaW5naWZ5KHtlcnI6YSxyZXM6dX0pfSl9ZWxzZXtuPSEwO3ZhciBwPWN0KGwuc2VydmVycyk7cy5iLnJlcXVlc3RQcm94eUFwcENlbnRlcihlLnNpZCx7bHRzOmQsc3VjYzohMCxBUEFkZHI6Yyx3b3JrZXJNYW5hZ2VyTGlzdDpKU09OLnN0cmluZ2lmeShwKSxlYzpudWxsLHJlc3BvbnNlOkpTT04uc3RyaW5naWZ5KHtyZXM6dX0pfSksdCYmdChudWxsLHApfX1lbHNlIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBHZXQgcHJveHkgc2VydmVyIGZhaWxlZDogbm8ganNvbl9ib2R5XCIpLHMuYi5yZXF1ZXN0UHJveHlBcHBDZW50ZXIoZS5zaWQse2x0czpkLHN1Y2M6ITEsQVBBZGRyOmMsd29ya2VyTWFuYWdlckxpc3Q6bnVsbCxlYzpcIkdldCBwcm94eSBzZXJ2ZXIgZmFpbGVkOiBubyBqc29uX2JvZHlcIixyZXNwb25zZTpKU09OLnN0cmluZ2lmeSh7cmVzOnV9KX0pfSl9KX0sb3Q9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPXtzZXJ2aWNlX25hbWU6XCJ3ZWJydGNfcHJveHlcIixqc29uX2JvZHk6SlNPTi5zdHJpbmdpZnkodCl9O09iamVjdChudC5wb3N0KShlLGksZnVuY3Rpb24oZSl7biYmbihudWxsLGUpfSxmdW5jdGlvbihlKXtuJiZuKGUpfSx7XCJYLVBhY2tldC1TZXJ2aWNlLVR5cGVcIjowLFwiWC1QYWNrZXQtVVJJXCI6NjF9KX0sc3Q9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPSExLGE9MCxyPXtjb21tYW5kOlwicmVxdWVzdFwiLGdhdGV3YXlUeXBlOlwiaHR0cFwiLGFwcElkOmUuYXBwSWQsY25hbWU6ZS5jbmFtZSx1aWQ6ZS51aWQrXCJcIixzZGtWZXJzaW9uOlwiMi4zLjFcIixzaWQ6ZS5zaWQsc2VxOjEsdHM6K25ldyBEYXRlLHJlcXVlc3RJZDozLGNsaWVudFJlcXVlc3Q6e2FwcElkOmUuYXBwSWQsY25hbWU6ZS5jbmFtZSx1aWQ6ZS51aWQrXCJcIixzaWQ6ZS5zaWR9fTt0Lm1hcChmdW5jdGlvbihjKXt2YXIgZD0obmV3IERhdGUpLmdldFRpbWUoKTshZnVuY3Rpb24oZSx0LG4pe09iamVjdChudC5wb3N0KShlLHQsZnVuY3Rpb24oZSl7biYmbihudWxsLGUpfSxmdW5jdGlvbihlKXtuJiZuKGUpfSl9KFwiaHR0cHM6Ly9cIitjK1wiOjQwMDAvdjIvbWFjaGluZVwiLHIsZnVuY3Rpb24ocix1KXtpZihyKXJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gUmVxdWVzdCB3b3JrZXIgbWFuYWdlciBmYWlsZWQ6IFwiLHIpLGErKyxzLmIucmVxdWVzdFByb3h5V29ya2VyTWFuYWdlcihlLnNpZCx7bHRzOmQsc3VjYzohMSx3b3JrZXJNYW5hZ2VyQWRkcjpjLGVjOkpTT04uc3RyaW5naWZ5KHIpLHJlc3BvbnNlOkpTT04uc3RyaW5naWZ5KHtyZXM6dX0pfSksdm9pZChhPj10Lmxlbmd0aCYmbiYmbihcInJlcXVlZXQgd29ya2VyIG1hbmFnZXIgc2VydmVyIGZhaWxlZDogcmVxdWVzdCBmYWlsZWRcIikpO2lmKCFpKXtpZighKHU9SlNPTi5wYXJzZSh1KSkuc2VydmVyUmVzcG9uc2UpcmV0dXJuIG4mJm4oXCJyZXF1ZWV0IHdvcmtlciBtYW5hZ2VyIHNlcnZlciBmYWlsZWQ6IHNlcnZlclJlc3BvbnNlIGlzIHVuZGVmaW5lZFwiKTtpPSEwLHMuYi5yZXF1ZXN0UHJveHlXb3JrZXJNYW5hZ2VyKGUuc2lkLHtsdHM6ZCxzdWNjOiEwLHdvcmtlck1hbmFnZXJBZGRyOmMsZWM6SlNPTi5zdHJpbmdpZnkocikscmVzcG9uc2U6SlNPTi5zdHJpbmdpZnkoe3Jlczp1fSl9KSxuJiZuKG51bGwse2FkZHJlc3M6YyxzZXJ2ZXJSZXNwb25zZTp1LnNlcnZlclJlc3BvbnNlfSl9fSl9KX0sY3Q9ZnVuY3Rpb24oZSl7aWYoIWV8fFtdaW5zdGFuY2VvZiBBcnJheT09ITEpcmV0dXJuW107dmFyIHQ9W107cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbjtlLmFkZHJlc3MmJmUudGNwPyhlLmFkZHJlc3MubWF0Y2goL15bXFwuXFw6XFxkXSskLyk/bj1cIlwiLmNvbmNhdChlLmFkZHJlc3MucmVwbGFjZSgvW15cXGRdL2csXCItXCIpLFwiLmVkZ2UuYWdvcmEuaW9cIik6KG8uZGVmYXVsdC5pbmZvKFwiW1wiK2pvaW5JbmZvLmNsaWVudElkK1wiXSBcIitcIkNhbm5vdCByZWNvZ25pemVkIGFzIElQIGFkZHJlc3MgXCIuY29uY2F0KGUuYWRkcmVzcyxcIi4gVXNlZCBBcyBIb3N0IGluc3RlYWRcIikpLG49XCJcIi5jb25jYXQoZS5hZGRyZXNzLFwiOlwiKS5jb25jYXQoZS50Y3ApKSx0LnB1c2gobikpOm8uZGVmYXVsdC5lcnJvcihcIltcIitqb2luSW5mby5jbGllbnRJZCtcIl0gSW52YWxpZCBhZGRyZXNzIGZvcm1hdCBcIixlKX0pLHR9LGR0PWZ1bmN0aW9uKGUsdCl7dmFyIG49UygpKHt9LGUpLGk9T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkNEU19BUFwiKSxhPVtdLG89ITE7KGk9aS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIG4ucHJveHlTZXJ2ZXI/XCJodHRwczovL1wiLmNvbmNhdChuLnByb3h5U2VydmVyLFwiL2FwLz91cmw9XCIpLmNvbmNhdChlK1wiL2FwaS92MVwiKTpcImh0dHBzOi8vXCIuY29uY2F0KGUsXCIvYXBpL3YxP2FjdGlvbj1jb25maWdcIil9KSkubWFwKGZ1bmN0aW9uKGUpeyFmdW5jdGlvbihlLHQsbil7dmFyIGk9e2ZsYWc6NjQsY2lwaGVyX21ldGhvZDowLHRpbWVvdXQ6MWUzLGZlYXR1cmVzOnR9O09iamVjdChudC5wb3N0KShlLGksZnVuY3Rpb24oZSl7dHJ5e3ZhciB0PUpTT04ucGFyc2UoZSk7biYmbihudWxsLHQpfWNhdGNoKGUpe24mJm4oZSl9biYmbihudWxsLGUpfSxmdW5jdGlvbihlKXtuJiZuKGUpfSx7XCJYLVBhY2tldC1TZXJ2aWNlLVR5cGVcIjowLFwiWC1QYWNrZXQtVVJJXCI6NTR9KX0oZSxuLGZ1bmN0aW9uKGUsbil7b3x8KGU/KGEucHVzaChlKSxhLmxlbmd0aD49aS5sZW5ndGgmJnQmJnQoXCJBTExfUkVRVUVTVF9GQUlMRURcIikpOihvPSEwLHQmJnQobnVsbCxuKSkpfSl9KX0sdXQ9e30sbHQ9e30scHQ9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIGE9KG5ldyBEYXRlKS5nZXRUaW1lKCkscj10LGM9XCJcIjt0Lm11bHRpSVAmJnQubXVsdGlJUC5nYXRld2F5X2lwJiYoYz17dm9jc19pcDpbdC5tdWx0aUlQLnVuaV9sYnNfaXBdLHZvc19pcDpbdC5tdWx0aUlQLmdhdGV3YXlfaXBdfSk7dmFyIGQ9e29waWQ6MTMzLGZsYWc6NDA5Nix0czorbmV3IERhdGUsa2V5OnQudG9rZW4sY25hbWU6dC5jbmFtZSxzaWQ6dC5zaWQsZGV0YWlsOns2OnQuc3RyaW5nVWlkfSx1aWQ6dC51aWR8fDB9O2MmJihkLmRldGFpbFs1XT1KU09OLnN0cmluZ2lmeShjKSksT2JqZWN0KG50LnBvc3QpKGUrXCJcIi5jb25jYXQoLTE9PT1lLmluZGV4T2YoXCI/XCIpP1wiP1wiOlwiJlwiLFwiYWN0aW9uPXdydGNfZ2F0ZXdheVwiKSxkLGZ1bmN0aW9uKGMpe3RyeXt2YXIgZD1KU09OLnBhcnNlKGMpO2QucmVzJiYoZD1kLnJlcyk7dmFyIHU9ZC5jb2RlfWNhdGNoKGUpe3ZhciBsPVwicmVxdWVzdENob29zZVNlcnZlciBmYWlsZWQgd2l0aCB1bmV4cGVjdGVkIGJvZHkgXCIrYztyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiK3IuY2xpZW50SWQrXCJdXCIsbCksaShsKX1pZih1KXt2YXIgcD1JW2QuY29kZV18fHU7cmV0dXJuIHMuYi5qb2luQ2hvb3NlU2VydmVyKHQuc2lkLHtsdHM6YSxzdWNjOiExLGNzQWRkcjplLHNlcnZlckxpc3Q6bnVsbCxlYzpwfSksaShcIkdldCBzZXJ2ZXIgbm9kZSBmYWlsZWQgW1wiK3ArXCJdXCIsZSxwKX12YXIgZj1bXSxtPVtcIi5hZ29yYS5pb1wiLFwiLmFnb3JhaW8uY25cIl0sZz0wO2lmKGUuaW5kZXhPZihtWzFdKT4tMSYmKGc9MSksZC5hZGRyZXNzZXMuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdDtlLmlwJiZlLnBvcnQ/KGUuaXAubWF0Y2goL15bXFwuXFw6XFxkXSskLyk/dD1cIlwiLmNvbmNhdChlLmlwLnJlcGxhY2UoL1teXFxkXS9nLFwiLVwiKSxcIi5lZGdlXCIpLmNvbmNhdChtW2crKyVtLmxlbmd0aF0sXCI6XCIpLmNvbmNhdChlLnBvcnQpOihvLmRlZmF1bHQuaW5mbyhcIltcIityLmNsaWVudElkK1wiXSBcIitcIkNhbm5vdCByZWNvZ25pemVkIGFzIElQIGFkZHJlc3MgXCIuY29uY2F0KGUuaXAsXCIuIFVzZWQgQXMgSG9zdCBpbnN0ZWFkXCIpKSx0PVwiXCIuY29uY2F0KGUuaXAsXCI6XCIpLmNvbmNhdChlLnBvcnQpKSxmLnB1c2godCkpOm8uZGVmYXVsdC5lcnJvcihcIltcIityLmNsaWVudElkK1wiXSBJbnZhbGlkIGFkZHJlc3MgZm9ybWF0IFwiLGUpfSksIWYubGVuZ3RoKXtvLmRlZmF1bHQuZXJyb3IoXCJbXCIrci5jbGllbnRJZCtcIl0gRW1wdHkgQWRkcmVzcyByZXNwb25zZVwiLGQpO3A9XCJFTVBUWV9BRERSRVNTX1JFU1BPTlNFXCI7cmV0dXJuIHMuYi5qb2luQ2hvb3NlU2VydmVyKHQuc2lkLHtsdHM6YSxzdWNjOiExLGNzQWRkcjplLHNlcnZlckxpc3Q6bnVsbCxlYzpwfSksaShcIkdldCBzZXJ2ZXIgbm9kZSBmYWlsZWQgW1wiK3ArXCJdXCIsZSxwKX12YXIgdj17Z2F0ZXdheV9hZGRyOmYsdWlkOmQudWlkLGNpZDpkLmNpZCx2aWQ6ZC5kZXRhaWwmJmQuZGV0YWlsWzhdLHJlczpkLHVuaV9sYnNfaXA6ZC5kZXRhaWx9O3JldHVybiBuKHYsZSl9LGZ1bmN0aW9uKGUsbil7XCJ0aW1lb3V0XCI9PT1lLnR5cGU/KHMuYi5qb2luQ2hvb3NlU2VydmVyKHQuc2lkLHtsdHM6YSxzdWNjOiExLGNzQWRkcjpuLHNlcnZlckxpc3Q6bnVsbCxlYzpcInRpbWVvdXRcIn0pLGkoXCJDb25uZWN0IGNob29zZSBzZXJ2ZXIgdGltZW91dFwiLG4pKTpzLmIuam9pbkNob29zZVNlcnZlcih0LnNpZCx7bHRzOmEsc3VjYzohMSxjc0FkZHI6bixzZXJ2ZXJMaXN0Om51bGwsZWM6XCJzZXJ2ZXJfd3JvbmdcIn0pfSx7XCJYLVBhY2tldC1TZXJ2aWNlLVR5cGVcIjowLFwiWC1QYWNrZXQtVVJJXCI6Njl9KX0sZnQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPSExLGE9bnVsbCxjPTEsZD0xLHU9bnVsbCxsPWUuY2xpZW50SWQscD1mdW5jdGlvbiB0KGQscCl7aWYoIWkpe3ZhciBmPSExLGc9ITEsdj1bXSxoPW0uZ2V0QnJvd3NlckluZm8oKXx8e307ZHQoe2RldmljZTpoLm5hbWUsc3lzdGVtOmgub3MsdmVuZG9yOmUuYXBwSWQsdmVyc2lvbjpyLlZFUlNJT04sY25hbWU6ZS5jbmFtZSxzaWQ6ZS5zaWQsc2Vzc2lvbl9pZDpPYmplY3Qocy5hKSgpLGRldGFpbDpcIlwiLHByb3h5U2VydmVyOmR9LGZ1bmN0aW9uKHQsbil7Zz0hMDt0cnl7dmFyIGk9T2JqZWN0LmtleXMobi50ZXN0X3RhZ3MpWzBdLGE9SlNPTi5wYXJzZShuLnRlc3RfdGFnc1tpXSk7dT1hWzFdfWNhdGNoKGUpe3U9bnVsbH1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiX2NvbmZpZy1kaXN0cmlidXRlLXJlcXVlc3RcIixvcHRpb25zOntlcnI6dCxyZXM6bn19KSgpLGx0W2xdIT09UnQuRElTQ09OTkVDVEVEJiZsdFtsXSE9PVJ0LkRJU0NPTk5FQ1RJTkc/ZiYmcCYmcCh2LHUpOm8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gUmVxdWVzdCBjb25maWcgc3VjY2VzcyB3aGVuIGNvbm5lY3Rpb24gc3RhdGUgaXMgXCIpLmNvbmNhdChsdFtsXSkpfSksZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgaT0obmV3IERhdGUpLmdldFRpbWUoKSxhPSExLGM9ITAsZD1mdW5jdGlvbihuLHIpe2lmKGEpcy5iLmpvaW5DaG9vc2VTZXJ2ZXIoZS5zaWQse2x0czppLHN1Y2M6ITAsY3NBZGRyOnIsc2VydmVyTGlzdDpuLmdhdGV3YXlfYWRkcixjaWQ6bi5jaWQrXCJcIix1aWQ6bi51aWQrXCJcIixlYzpudWxsfSwhMSk7ZWxzZXtpZihjbGVhclRpbWVvdXQoZyksYT0hMCxvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gR2V0IGdhdGV3YXkgYWRkcmVzczpcIixuLmdhdGV3YXlfYWRkciksZS5wcm94eVNlcnZlcil7Zm9yKHZhciBjPW4uZ2F0ZXdheV9hZGRyLGQ9MDtkPGMubGVuZ3RoO2QrKyl7dmFyIHU9Y1tkXS5zcGxpdChcIjpcIik7bi5nYXRld2F5X2FkZHJbZF09ZS5wcm94eVNlcnZlcitcIi93cy8/aD1cIit1WzBdK1wiJnA9XCIrdVsxXX1vLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gR2V0IGdhdGV3YXkgYWRkcmVzczpcIixuLmdhdGV3YXlfYWRkcil9dChuKSxzLmIuam9pbkNob29zZVNlcnZlcihlLnNpZCx7bHRzOmksc3VjYzohMCxjc0FkZHI6cixzZXJ2ZXJMaXN0Om4uZ2F0ZXdheV9hZGRyLGNpZDpuLmNpZCtcIlwiLHVpZDpuLnVpZCtcIlwiLGVjOm51bGx9LCEwKX19LHU9ZnVuY3Rpb24odCxpLGEpe2MmJihvLmRlZmF1bHQuZXJyb3IoXCJbXCIrZS5jbGllbnRJZCtcIl1cIix0LGksYSksYSYmLTE9PT1iLmluZGV4T2YoYSkmJihjPSExLG4oYSkpKX0sbD1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiV0VCQ1NfRE9NQUlOXCIpLHA9MDtwPGwubGVuZ3RoOysrcCl7dmFyIGY7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGxbcF0pe3ZhciBtPWxbcF07Zj1lLnByb3h5U2VydmVyP1wiaHR0cHM6Ly9cIi5jb25jYXQoZS5wcm94eVNlcnZlcixcIi9hcC8/dXJsPVwiKS5jb25jYXQobStcIi9hcGkvdjFcIik6XCJodHRwczovL1wiLmNvbmNhdChtLFwiL2FwaS92MVwiKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gXCIrXCJDb25uZWN0IHRvIGNob29zZV9zZXJ2ZXI6IFwiLmNvbmNhdChmKSkscHQoZixlLGQsdSl9ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIrZS5jbGllbnRJZCtcIl0gSW52YWxpZCBIb3N0XCIsbFtwXSl9dmFyIGc9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKCFhKWZvcih2YXIgdD1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiV0VCQ1NfRE9NQUlOX0JBQ0tVUF9MSVNUXCIpLG49MDtuPHQubGVuZ3RoOysrbilpZihcInN0cmluZ1wiPT10eXBlb2YgdFtuXSl7dmFyIGk9dFtuXTtmPWUucHJveHlTZXJ2ZXI/XCJodHRwczovL1wiLmNvbmNhdChlLnByb3h5U2VydmVyLFwiL2FwLz91cmw9XCIpLmNvbmNhdChpK1wiL2FwaS92MVwiKTpcImh0dHBzOi8vXCIuY29uY2F0KGksXCIvYXBpL3YxXCIpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBcIitcIkNvbm5lY3QgdG8gYmFja3VwX2Nob29zZV9zZXJ2ZXI6IFwiLmNvbmNhdChmKSkscHQoZixlLGQsdSl9ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIrZS5jbGllbnRJZCtcIl0gSW52YWxpZCBIb3N0XCIsdFtuXSl9LDFlMyk7c2V0VGltZW91dChmdW5jdGlvbigpeyFhJiZjJiZuKCl9LE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJXRUJDU19CQUNLVVBfQ09OTkVDVF9USU1FT1VUXCIpKX0oZSxmdW5jdGlvbih0KXtpPSEwLGY9ITAsdj10LGNsZWFyVGltZW91dChhKSxsdFtsXSE9PVJ0LkRJU0NPTk5FQ1RFRCYmbHRbbF0hPT1SdC5ESVNDT05ORUNUSU5HP2cmJnAmJnAodix1KTpvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFJlcXVlc3QgZ2F0ZXdheSBsaXN0IHN1Y2Nlc3Mgd2hlbiBjb25uZWN0aW9uIHN0YXRlIGlzIFwiKS5jb25jYXQobHRbbF0pKX0sZnVuY3Rpb24oaSl7cmV0dXJuIGk/KG8uZGVmYXVsdC5pbmZvKFwiW1wiK2UuY2xpZW50SWQrXCJdIEpvaW4gZmFpbGVkOiBcIitpKSx2b2lkKG4mJm4oaSkpKTpsdFtsXT09PVJ0LkRJU0NPTk5FQ1RFRHx8bHRbbF09PT1SdC5ESVNDT05ORUNUSU5HPyhvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFJlcXVlc3QgZ2F0ZXdheSBsaXN0IGZhbGllZCB3aGVuIGNvbm5lY3Rpb24gc3RhdGUgaXMgXCIpLmNvbmNhdChsdFtsXSkpLHZvaWQobiYmbihcIk9QRVJBVElPTl9BQk9SVFwiKSkpOihvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gUmVxdWVzdCBnYXRld2F5IGxpc3Qgd2lsbCBiZSByZXN0YXJ0IGluIFwiK2MrXCJzXCIpLGE9c2V0VGltZW91dChmdW5jdGlvbigpe3QoZCxwKX0sMWUzKmMpLHV0W2xdPWEsdm9pZChjPWM+PTM2MDA/MzYwMDoyKmMpKX0pfX07ZS51c2VQcm94eVNlcnZlcj9mdW5jdGlvbiBuKCl7IWZ1bmN0aW9uKGUsdCl7cnQoZSxmdW5jdGlvbihuLGkpe2lmKG4pcmV0dXJuIHQmJnQobik7by5kZWZhdWx0LmRlYnVnKFwiW1wiK2UuY2xpZW50SWQrXCJdIGdldFByb3h5U2VydmVyTGlzdDogXCIsaSksc3QoZSxpLHQpfSl9KGUsZnVuY3Rpb24oaSxyKXtpZihpKXJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl1cIixpKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gUmVxdWVzdCBwcm94eSB3aWxsIGJlIHJlc3RhcnQgaW4gXCIrZCtcInNcIiksYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7bigpfSwxZTMqZCksdXRbbF09YSx2b2lkKGQ9ZD49MzYwMD8zNjAwOjIqZCk7Y2xlYXJUaW1lb3V0KGEpO3ZhciBjPXIuYWRkcmVzcztlLnByb3h5U2VydmVyPWMsZS50dXJuU2VydmVyPXttb2RlOlwibWFudWFsXCIsdXJsOnIuYWRkcmVzcyx0Y3Bwb3J0OnIuc2VydmVyUmVzcG9uc2UudGNwcG9ydHx8XCIzNDMzXCIsdWRwcG9ydDpyLnNlcnZlclJlc3BvbnNlLnVkcHBvcnR8fFwiMzQ3OFwiLHVzZXJuYW1lOnIuc2VydmVyUmVzcG9uc2UudXNlcm5hbWV8fFwidGVzdFwiLGNyZWRlbnRpYWw6ci5zZXJ2ZXJSZXNwb25zZS5wYXNzd29yZHx8XCIxMTExMTFcIixmb3JjZXR1cm46ITB9LGUudHVyblNlcnZlci50Y3Bwb3J0Kz1cIlwiLGUudHVyblNlcnZlci51ZHBwb3J0Kz1cIlwiLHMuYi5zZXRQcm94eVNlcnZlcihjKSxvLmRlZmF1bHQuc2V0UHJveHlTZXJ2ZXIoYykscChjLHQpfSl9KCk6cChudWxsLHQpfSxtdD1mdW5jdGlvbihlLHQsbixpKXt2YXIgYT1EYXRlLm5vdygpO2k9aXx8dC5zdHJpbmdVaWQ7dmFyIHI9e3NpZDp0LnNpZCxvcGlkOjEwLGFwcGlkOnQuYXBwSWQsc3RyaW5nX3VpZDppfTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oYyxkKXtPYmplY3QobnQucG9zdCkoZStcIlwiLmNvbmNhdCgtMT09PWUuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIsXCJhY3Rpb249c3RyaW5ndWlkXCIpLHIsZnVuY3Rpb24odSl7dHJ5e3ZhciBsPUpTT04ucGFyc2UodSkscD1sLmNvZGV9Y2F0Y2goYyl7dmFyIGY9XCJyZXF1ZXN0VXNlckFjY291bnQgZmFpbGVkIHdpdGggdW5leHBlY3RlZCBib2R5IFwiK3U7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIit0LmNsaWVudElkK1wiXVwiLGYpLGQoe3JldHJ5YWJsZTohMCxpbmZvOmYsdXJsOmV9KSxuJiZuLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJlcnJvclwiLHJlYXNvbjpcIlVTRVJfQUNDT1VOVF9CT0RZX05PVF9KU09OXCJ9KSx2b2lkIHMuYi5yZXFVc2VyQWNjb3VudChyLnNpZCx7bHRzOmEsc3VjY2VzczohMSxzZXJ2ZXJBZGRyZXNzOmUsc3RyaW5nVWlkOmksdWlkOm51bGwsZXh0ZW5kOnUsZXJyb3JDb2RlOlwiVVNFUl9BQ0NPVU5UX0JPRFlfTk9UX0pTT05cIn0pfWlmKHApe3ZhciBtPVRbbC5jb2RlJTFlNF18fFwiUkVRX0FDQ09VTlRfRVJSX1wiLmNvbmNhdChwKTtyZXR1cm4gbiYmbi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZXJyb3JcIixyZWFzb246bX0pLHMuYi5yZXFVc2VyQWNjb3VudChyLnNpZCx7bHRzOmEsc3VjY2VzczohMSxzZXJ2ZXJBZGRyZXNzOmUsc3RyaW5nVWlkOmksdWlkOm51bGwsZXJyb3JDb2RlOm0sZXh0ZW5kOnJ9KSxkKHtyZXRyeWFibGU6ITEsaW5mbzpmPVwiR2V0IFN0cmluZyBVaWQgRmFpbGVkIFtcIittK1wiXVwiLHVybDplLGVycm9yOm19KX12YXIgZz1sLnVpZDtpZighKGc+MCYmZzxNYXRoLnBvdygyLDMyKSkpe28uZGVmYXVsdC5lcnJvcihcIltcIit0LmNsaWVudElkK1wiXSBcIitcIkludmFsaWQgVWludCBVaWQgXCIuY29uY2F0KGksXCIgPT4gXCIpLmNvbmNhdChnKSxsKTttPVwiSU5WQUxJRF9VSU5UX1VJRF9cIi5jb25jYXQoZyk7cmV0dXJuIG4mJm4uZGlzcGF0Y2hFdmVudCh7dHlwZTpcImVycm9yXCIscmVhc29uOm19KSxzLmIucmVxVXNlckFjY291bnQoci5zaWQse2x0czphLHN1Y2Nlc3M6ITEsc2VydmVyQWRkcmVzczplLHN0cmluZ1VpZDppLHVpZDpudWxsLGVycm9yQ29kZTptLGV4dGVuZDpyfSksZCh7cmV0cnlhYmxlOiEwLGVycm9yOm0saW5mbzpcIkdldCBTdHJpbmcgVWlkIGZhaWxlZCBbXCIrbStcIl1cIix1cmw6ZX0pfWMoe3VpZDpnLHVybDplfSkscy5iLnJlcVVzZXJBY2NvdW50KHIuc2lkLHtsdHM6YSxzdWNjZXNzOiEwLHNlcnZlckFkZHJlc3M6ZSxzdHJpbmdVaWQ6aSx1aWQ6ZyxlcnJvckNvZGU6bnVsbCxleHRlbmQ6cn0pfSxmdW5jdGlvbihlLHQpe2lmKFwidGltZW91dFwiPT09ZS50eXBlKXt2YXIgbz1cIlVTRVJfQUNDT1VOVF9USU1FT1VUXCI7biYmbi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZXJyb3JcIixyZWFzb246b30pLHMuYi5yZXFVc2VyQWNjb3VudChyLnNpZCx7bHRzOmEsc3VjY2VzczohMSxzZXJ2ZXJBZGRyZXNzOnQsc3RyaW5nVWlkOmksdWlkOm51bGwsZXJyb3JDb2RlOm8sZXh0ZW5kOnJ9KSxkKHtyZXRyeWFibGU6ITAsaW5mbzpvLHVybDp0fSl9ZWxzZXt2YXIgYz1cIlVTRVJfQUNDT1VOVF9TRVJWRVJfV1JPTkdfXCIuY29uY2F0KGUudHlwZSk7biYmbi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZXJyb3JcIixyZWFzb246Y30pLHMuYi5yZXFVc2VyQWNjb3VudChyLnNpZCx7bHRzOmEsc3VjY2VzczohMSxzZXJ2ZXJBZGRyZXNzOnQsc3RyaW5nVWlkOmksdWlkOm51bGwsZXJyb3JDb2RlOmMsZXh0ZW5kOnJ9KSxkKHtyZXRyeWFibGU6ITAsaW5mbzpjLHVybDp0fSl9fSx7XCJYLVBhY2tldC1TZXJ2aWNlLVR5cGVcIjowLFwiWC1QYWNrZXQtVVJJXCI6NzJ9KX0pfSxndD1mdW5jdGlvbihlLHQsbil7RGF0ZS5ub3coKTt2YXIgYSxzPU9iamVjdChyLmdldFBhcmFtZXRlcikoXCJBQ0NPVU5UX1JFR0lTVEVSXCIpLGM9ITEsZD1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQUNDT1VOVF9SRUdJU1RFUl9SRVRSWV9USU1FT1VUXCIpLHU9bnVsbCxsPW51bGwscD1uZXcgUHJvbWlzZShmdW5jdGlvbigpe3ZhciBwPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHAoZixtKXt2YXIgZyx2LGg7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihwKXtmb3IoOzspc3dpdGNoKHAucHJldj1wLm5leHQpe2Nhc2UgMDp1PWYsbD1tLGE9MDtjYXNlIDM6aWYoIShhPE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJBQ0NPVU5UX1JFR0lTVEVSX1JFVFJZX0NPVU5UX01BWFwiKSkpe3AubmV4dD0zMzticmVha31pZighYyl7cC5uZXh0PTY7YnJlYWt9cmV0dXJuIHAuYWJydXB0KFwicmV0dXJuXCIpO2Nhc2UgNjpyZXR1cm4gZz1zW2Elcy5sZW5ndGhdLHY9ZS5wcm94eVNlcnZlcj9cImh0dHBzOi8vXCIuY29uY2F0KGUucHJveHlTZXJ2ZXIsXCIvYXAvP3VybD1cIikuY29uY2F0KHNbaV0rXCIvYXBpL3YxXCIpOlwiaHR0cHM6Ly9cIi5jb25jYXQoZyxcIi9hcGkvdjFcIikscC5wcmV2PTgscC5kZWxlZ2F0ZVlpZWxkKGNlLmEubWFyayhmdW5jdGlvbiBpKCl7dmFyIGE7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihpKXtmb3IoOzspc3dpdGNoKGkucHJldj1pLm5leHQpe2Nhc2UgMDpyZXR1cm4gaS5uZXh0PTIsbXQodixlLHQsbik7Y2FzZSAyOmlmKGE9aS5zZW50LCFjKXtpLm5leHQ9NTticmVha31yZXR1cm4gaS5hYnJ1cHQoXCJyZXR1cm5cIix7djp2b2lkIDB9KTtjYXNlIDU6Yz0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiR2V0IFVzZXJBY2NvdW50IFN1Y2Nlc3NmdWxseVwiLGEpLHUoYSl9LDApO2Nhc2UgNzpjYXNlXCJlbmRcIjpyZXR1cm4gaS5zdG9wKCl9fSxpLHRoaXMpfSkoKSxcInQwXCIsMTApO2Nhc2UgMTA6aWYoaD1wLnQwLFwib2JqZWN0XCIhPT1IZSgpKGgpKXtwLm5leHQ9MTM7YnJlYWt9cmV0dXJuIHAuYWJydXB0KFwicmV0dXJuXCIsaC52KTtjYXNlIDEzOnAubmV4dD0zMDticmVhaztjYXNlIDE1OmlmKHAucHJldj0xNSxwLnQxPXAuY2F0Y2goOCksIWMpe3AubmV4dD0xOTticmVha31yZXR1cm4gcC5hYnJ1cHQoXCJyZXR1cm5cIik7Y2FzZSAxOTppZighcC50MS5yZXRyeWFibGUpe3AubmV4dD0yNzticmVha31yZXR1cm4oZD1NYXRoLmNlaWwoZCpPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQUNDT1VOVF9SRUdJU1RFUl9SRVRSWV9SQVRJT1wiKSkpPk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJBQ0NPVU5UX1JFR0lTVEVSX1JFVFJZX1RJTUVPVVRfTUFYXCIpJiYoZD1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQUNDT1VOVF9SRUdJU1RFUl9SRVRSWV9USU1FT1VUX01BWFwiKSksby5kZWZhdWx0LmVycm9yKFwiXCIuY29uY2F0KHAudDEuaW5mbyxcIiBcIikuY29uY2F0KHAudDEudXJsLFwiIFdpbGwgRmV0Y2ggVXNlciBBY2NvdW50IGluIFwiKS5jb25jYXQoZC8xZTMsXCIgc2Vjb25kc1wiKSkscC5uZXh0PTI1LG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3NldFRpbWVvdXQoZSxkKX0pO2Nhc2UgMjU6cC5uZXh0PTMwO2JyZWFrO2Nhc2UgMjc6by5kZWZhdWx0LmVycm9yKFwiR2V0IFVzZXJBY2NvdW50IEVycm9yOiBcIi5jb25jYXQocC50MS5pbmZvLFwiIFwiKS5jb25jYXQocC50MS51cmwpLHAudDEuZXJyb3IpLGM9ITAsbChwLnQxKTtjYXNlIDMwOmErKyxwLm5leHQ9MzticmVhaztjYXNlIDMzOmNhc2VcImVuZFwiOnJldHVybiBwLnN0b3AoKX19LHAsdGhpcyxbWzgsMTVdXSl9KSk7cmV0dXJuIGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHAuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSk7cmV0dXJuIHAuY2FuY2VsPWZ1bmN0aW9uKCl7Y3x8KGM9ITAsbCh7aW5mbzpcIlJlcXVlc3QgQ2FuY2VsbGVkXCIscmV0cnlhYmxlOiExfSkpfSxwLmlzRmluaXNoZWQ9ZnVuY3Rpb24oKXtyZXR1cm4gY30scH0sdnQ9e0VSUl9OT19WT0NTX0FWQUlMQUJMRTpcInRyeU5leHRcIixFUlJfTk9fVk9TX0FWQUlMQUJMRTpcInRyeU5leHRcIixFUlJfSk9JTl9DSEFOTkVMX1RJTUVPVVQ6XCJ0cnlOZXh0XCIsV0FSTl9SRVBFQVRfSk9JTjpcInF1aXRcIixFUlJfSk9JTl9CWV9NVUxUSV9JUDpcInJlY292ZXJcIixXQVJOX0xPT0tVUF9DSEFOTkVMX1RJTUVPVVQ6XCJ0cnlOZXh0XCIsV0FSTl9PUEVOX0NIQU5ORUxfVElNRU9VVDpcInRyeU5leHRcIixFUlJfVk9NX1NFUlZJQ0VfVU5BVkFJTEFCTEU6XCJ0cnlOZXh0XCIsRVJSX1RPT19NQU5ZX1VTRVJTOlwidHJ5TmV4dFwiLEVSUl9NQVNURVJfVk9DU19VTkFWQUlMQUJMRTpcInRyeU5leHRcIixFUlJfSU5URVJOQUxfRVJST1I6XCJ0cnlOZXh0XCIsS19TRVJWSUNFX05PVF9SRUFEWTpcInJlY292ZXJcIixub3RpZmljYXRpb25fdGVzdF9yZWNvdmVyOlwicmVjb3ZlclwiLG5vdGlmaWNhdGlvbl90ZXN0X3RyeU5leHQ6XCJ0cnlOZXh0XCIsbm90aWZpY2F0aW9uX3Rlc3RfcmV0cnk6XCJyZXRyeVwifSxodD17Z29vZ0FjdHVhbEVuY0JpdHJhdGU6XCJBX2FlYlwiLGdvb2dBdmFpbGFibGVTZW5kQmFuZHdpZHRoOlwiQV9hc2JcIixnb29nUmV0cmFuc21pdEJpdHJhdGU6XCJBX3JiXCIsZ29vZ0F2YWlsYWJsZVJlY2VpdmVCYW5kd2lkdGg6XCJBX2FyYlwiLGdvb2dUYXJnZXRFbmNCaXRyYXRlOlwiQV90ZWJcIixnb29nQnVja2V0RGVsYXk6XCJBX2JkXCIsZ29vZ1RyYW5zbWl0Qml0cmF0ZTpcIkFfdGJcIixnb29nQ29kZWNOYW1lOlwiQV9jblwiLGJ5dGVzU2VudDpcImJ5dGVzU2VudFwiLHBhY2tldHNMb3N0OlwicGFja2V0c0xvc3RcIixwYWNrZXRzU2VudDpcInBhY2tldHNTZW50XCIsZ29vZ0FkYXB0YXRpb25DaGFuZ2VzOlwiQV9hY1wiLGdvb2dBdmdFbmNvZGVNczpcIkFfYWVtXCIsZ29vZ0VuY29kZVVzYWdlUGVyY2VudDpcIkFfZXVwXCIsZ29vZ0ZpcnNSZWNlaXZlZDpcIkFfZnJcIixnb29nRnJhbWVIZWlnaHRJbnB1dDpcIkFfZmhpXCIsZ29vZ0ZyYW1lSGVpZ2h0U2VudDpcIkFfZmhzXCIsZ29vZ0ZyYW1lUmF0ZUlucHV0OlwiQV9mcmlcIixnb29nRnJhbWVSYXRlU2VudDpcIkFfZnJzXCIsZ29vZ0ZyYW1lV2lkdGhJbnB1dDpcIkFfZndpXCIsZ29vZ0ZyYW1lV2lkdGhTZW50OlwiQV9md3NcIixnb29nTmFja3NSZWNlaXZlZDpcIkFfbnJcIixnb29nUGxpc1JlY2VpdmVkOlwiQV9wclwiLGdvb2dSdHQ6XCJBX3J0dFwiLGFlY0RpdmVyZ2VudEZpbHRlckZyYWN0aW9uOlwiQV9hZGZmXCIsYXVkaW9JbnB1dExldmVsOlwiQV9haWxcIixnb29nRWNob0NhbmNlbGxhdGlvblJldHVybkxvc3M6XCJBX2VjcmxcIixnb29nRWNob0NhbmNlbGxhdGlvblJldHVybkxvc3NFbmhhbmNlbWVudDpcIkFfZWNybGVcIixnb29nUmVzaWR1YWxFY2hvTGlrZWxpaG9vZDpcIkFfcmVsXCIsZ29vZ1Jlc2lkdWFsRWNob0xpa2VsaWhvb2RSZWNlbnRNYXg6XCJBX3JlbHJtXCIsZ29vZ1RhcmdldERlbGF5TXM6XCJBX3RkbVwiLGJ5dGVzUmVjZWl2ZWQ6XCJieXRlc1JlY2VpdmVkXCIscGFja2V0c1JlY2VpdmVkOlwicGFja2V0c1JlY2VpdmVkXCIsZ29vZ0RlY29kZU1zOlwiQV9kbVwiLGdvb2dNYXhEZWNvZGVNczpcIkFfbWRtXCIsZ29vZ1JlbmRlckRlbGF5TXM6XCJBX3JkbVwiLGdvb2dGcmFtZVdpZHRoUmVjZWl2ZWQ6XCJBX2Z3clwiLGdvb2dGcmFtZUhlaWdodFJlY2VpdmVkOlwiQV9maHJcIixnb29nRnJhbWVSYXRlUmVjZWl2ZWQ6XCJBX2ZyclwiLGdvb2dGcmFtZVJhdGVEZWNvZGVkOlwiQV9mcmRcIixnb29nRnJhbWVSYXRlT3V0cHV0OlwiQV9mcm9cIixnb29nSml0dGVyQnVmZmVyTXM6XCJBX2pibVwiLGdvb2dDdXJyZW50RGVsYXlNczpcIkFfY2RtXCIsZ29vZ01pblBsYXlvdXREZWxheU1zOlwiQV9tcGRtXCIsZ29vZ05hY2tzU2VudDpcIkFfbnNcIixnb29nUGxpc1NlbnQ6XCJBX3BzXCIsZ29vZ0ZpcnNTZW50OlwiQV9mc1wiLGF1ZGlvT3V0cHV0TGV2ZWw6XCJBX2FvbFwiLGdvb2dBY2NlbGVyYXRlUmF0ZTpcIkFfYXJcIixnb29nRGVjb2RpbmdDTkc6XCJBX2RjbmdcIixnb29nRGVjb2RpbmdDVE46XCJBX2RjdG5cIixnb29nRGVjb2RpbmdDVFNHOlwiQV9kY3RzZ1wiLGdvb2dEZWNvZGluZ05vcm1hbDpcIkFfZG5cIixnb29nRGVjb2RpbmdQTEM6XCJBX2RwbGNcIixnb29nRGVjb2RpbmdQTENDTkc6XCJBX2RwbGNjbmdcIixnb29nRXhwYW5kUmF0ZTpcIkFfZXJcIixnb29nSml0dGVyUmVjZWl2ZWQ6XCJBX2pyXCIsZ29vZ1ByZWVtcHRpdmVFeHBhbmRSYXRlOlwiQV9wZXJcIixnb29nUHJlZmVycmVkSml0dGVyQnVmZmVyTXM6XCJBX3BqYm1cIixnb29nU2Vjb25kYXJ5RGVjb2RlZFJhdGU6XCJBX3NkclwiLGdvb2dTcGVlY2hFeHBhbmRSYXRlOlwiQV9zZXJcIix1cGxpbmtfZnJhY3Rpb25fbG9zdDpcIkJfdWZsXCIsdXBsaW5rX2N1bXVsYXRpdmVfbG9zdDpcIkJfdWNsXCIsdXBsaW5rX2F2YWlsYWJsZV9iYW5kd2lkdGg6XCJCX3VhYlwiLHBlcmlvZF9maXI6XCJCX2ZpclwiLGFjY2Vzc19kZWxheTpcIkJfYWNkXCIsdXBsaW5rX25ldHdvcmtfcXVhbGl0eTpcIkJfdW5xXCIsZG93bmxpbmtfbmV0d29ya19xdWFsaXR5OlwiQl9kbnFcIixwdWJfYXVkaW9fbG9zdF9yYXRpb180MDBtczpcIkJfcGFscjRcIixwdWJfdmlkZW9fbG9zdF9yYXRpb180MDBtczpcIkJfcHZscjRcIixlMmVfZGVsYXk6XCJCX2VkXCIsYXVkaW9fZGVsYXk6XCJCX2FkXCIsdmlkZW9fZGVsYXk6XCJCX3ZkXCIsc3RyZWFtX3R5cGU6XCJCX3N0XCIsZTJlX2F1ZGlvX2xvc3RfcmF0aW9fNDAwbXM6XCJCX2VhbHI0XCIsZTJlX3ZpZGVvX2xvc3RfcmF0aW9fNDAwbXM6XCJCX2V2bHI0XCIsZG93bmxpbmtfZXN0aW1hdGVfYmFuZHdpZHRoOlwiQl9kZWJcIn0sU3Q9e307Zm9yKHZhciBfdCBpbiBodCl7dmFyIEV0PWh0W190XTtTdFtFdF0mJmNvbnNvbGUuZXJyb3IoXCJLZXkgQ29uZmxpY3Q6IFwiLmNvbmNhdChFdCxcIjogXCIpLmNvbmNhdChodFtFdF0sXCJ8IFwiKS5jb25jYXQoX3QpKSxTdFtFdF09X3R9dmFyIEl0PWZ1bmN0aW9uKGUpe3JldHVybiBodFtlXXx8ZX0seXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIFN0W2VdfHxlfTt2YXIgVHQ9ZnVuY3Rpb24gdChuKXt2YXIgaT0hMSxhPWZ1bmN0aW9uKGUpe3JldHVybntfdHlwZTpcImNvbnRyb2xcIixfbWVzc2FnZTplfX0sZD1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O3JldHVybiBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09iamVjdChyLmdldFBhcmFtZXRlcikoXCJTVEFUU19GSUxURVJcIilbZV18fChuW0l0KGUpXT10W2VdKX0pLHtfdHlwZTpcInN1YnNjcmliZV9yZWxhdGVkX3N0YXRzXCIsX21lc3NhZ2U6e3N0cmVhbV90eXBlOlwiaGlnaFwiLHN0cmVhbV9pZDplLHN0YXRzOm59fX0sZz1mdW5jdGlvbihlKXtyZXR1cm57X3R5cGU6XCJwdWJsaXNoXCIsX21lc3NhZ2U6ZX19LHY9ZnVuY3Rpb24oZSx0KXt2YXIgbj17fTtyZXR1cm4gT2JqZWN0LmtleXModCkuZm9yRWFjaChmdW5jdGlvbihlKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU1RBVFNfRklMVEVSXCIpW2VdfHwobltJdChlKV09dFtlXSl9KSx7X3R5cGU6XCJzdWJzY3JpYmVfc3RhdHNcIixfbWVzc2FnZTp7c3RyZWFtX2lkOmUsc3RhdHM6bn19fSxoPXQuRElTQ09OTkVDVEVELF89dC5DT05ORUNUSU5HLEU9dC5DT05ORUNURUQsST10LkRJU0NPTk5FQ1RJTkcsVD1oLGI9YyhuKTtPYmplY3QuZGVmaW5lUHJvcGVydHkoYixcInN0YXRlXCIse3NldDpmdW5jdGlvbihlKXt2YXIgbj1UO1Q9ZSxmdW5jdGlvbihlLHQpe2x0W2VdPXR9KGIuY2xpZW50SWQsZSksbiE9PWUmJmIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNvbm5lY3Rpb24tc3RhdGUtY2hhbmdlXCIscHJldlN0YXRlOnQuY29ubmV0aW9uU3RhdGVNYXBbbl0sY3VyU3RhdGU6dC5jb25uZXRpb25TdGF0ZU1hcFtlXX0pfSxnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gVH19KSxiLnNvY2tldD12b2lkIDAsYi5zdGF0ZT1oLGIubW9kZT1uLm1vZGUsYi5yb2xlPW4ucm9sZSxiLmNvZGVjPW4uY29kZWMsYi5jb25maWc9e30sYi50aW1lcnM9e30sYi50aW1lcl9jb3VudGVyPXt9LGIubG9jYWxTdHJlYW1zPXt9LGIucmVtb3RlU3RyZWFtcz17fSxiLnJlbW90ZU11dGVTdGF0ZT17fSxiLmF0dGVtcHM9MSxiLnAycF9hdHRlbXBzPTEsYi5hdWRpb0xldmVsPXt9LGIuYWN0aXZlU3BlYWtlcj12b2lkIDAsYi5yZWNvbm5lY3RNb2RlPVwicmV0cnlcIixiLnJlam9pbkF0dGVtcHQ9MCxiLmhhc0NoYW5nZUJHUEFkZHJlc3M9ITEsYi50cmFmZmljX3N0YXRzPXt9LGIuY2xpZW50SWQ9bi5jbGllbnRJZCxiLnBpbmdwb25nQ291bnRlcj0wLGIuaGFzSW52b2tlTGVhdmU9ITEsYi5wMnBzPW5ldyBNYXAsYi5saXZlU3RyZWFtcz1uZXcgTWFwLGIuaW5qZWN0TGl2ZVN0cmVhbXM9bmV3IE1hcCxiLnJlbW90ZVN0cmVhbXNJbkNoYW5uZWw9bmV3IFNldCxmdW5jdGlvbihlKXt2YXIgdD10dDtlLm1ha2VSZXF1ZXN0PWZ1bmN0aW9uKG4saSxhKXtpZih2b2lkIDA9PT1lLnNvY2tldClyZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBObyBzb2NrZXQgYXZhaWxhYmxlXCIpKSx2b2lkIHQoYSxWLklOVkFMSURfT1BFUkFUSU9OKTt0cnl7ZS5zb2NrZXQuZW1pdFJlcXVlc3QobixmdW5jdGlvbihlLHQpe3ZhciBuO1wic3VjY2Vzc1wiPT09ZT9cImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiZpKHQpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGEmJihuPXQmJnQuZXJyb3JfY29kZSYmeVt0LmVycm9yX2NvZGVdP3lbdC5lcnJvcl9jb2RlXTp0JiZ0LmVycm9yX3N0cj90LmVycm9yX3N0cjp0JiZ0LmVycm9yX2NvZGU/XCJVTktOT1dfRVJST1JfXCIuY29uY2F0KHQuZXJyb3JfY29kZSk6ZSxhKG4sdCkpfSl9Y2F0Y2goaSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBTb2NrZXQgZW1pdCBtZXNzYWdlIGZhaWxlZCBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KG4pKSksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBcIiksaSksdChhLFYuU09DS0VUX0VSUk9SKX19LGUubWFrZVJlcG9ydD1mdW5jdGlvbih0KXt2b2lkIDA9PT1lLnNvY2tldCYmby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBObyBzb2NrZXQgYXZhaWxhYmxlXCIpKTt0cnl7ZS5zb2NrZXQuZW1pdFJlcG9ydCh0KX1jYXRjaChuKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFNvY2tldCBlbWl0IHJlcG9ydCBmYWlsZWQgXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeSh0KSkpfX19KGIpLGIuaW5DaGFubmVsSW5mbz17am9pbkF0Om51bGwsZHVyYXRpb246MH0sYi5fc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXtzd2l0Y2goZSl7Y2FzZVwiU3Vic2NyaWJlU3RhdHNcIjpzZW5kTWVzc2FnZSh2LmFwcGx5KHZvaWQgMCxldCgpKHQpKSl9fTt2YXIgUj10dDtiLnAycENvdW50ZXI9T2JqZWN0KG5lLnJhbmRvbSkoMWU1KSxiLmdlbmVyYXRlUDJQSWQ9ZnVuY3Rpb24oKXtyZXR1cm4rK2IucDJwQ291bnRlcn0sYi5hdWRpb1ZvbHVtZUluZGljYXRpb249e2VuYWJsZWQ6ITEsc29ydGVkQXVkaW9Wb2x1bWVzOltdLHNtb290aDozLGludGVydmFsOjJlM30sYi5yZW1vdGVWaWRlb1N0cmVhbVR5cGVzPXtSRU1PVEVfVklERU9fU1RSRUFNX0hJR0g6MCxSRU1PVEVfVklERU9fU1RSRUFNX0xPVzoxLFJFTU9URV9WSURFT19TVFJFQU1fTUVESVVNOjJ9LGIuc3RyZWFtRmFsbGJhY2tUeXBlcz17U1RSRUFNX0ZBTExCQUNLX09QVElPTl9ESVNBQkxFRDowLFNUUkVBTV9GQUxMQkFDS19PUFRJT05fVklERU9fU1RSRUFNX0xPVzoxLFNUUkVBTV9GQUxMQkFDS19PUFRJT05fQVVESU9fT05MWToyfSxiLmNvbmZpZ1B1Ymxpc2hlcj1mdW5jdGlvbihlKXtiLmNvbmZpZz1lfSxiLmdldEdhdGV3YXlJbmZvPWZ1bmN0aW9uKGUsdCl7Yi5tYWtlUmVxdWVzdCh7X3R5cGU6XCJnYXRld2F5X2luZm9cIn0sZSx0KX0sYi5zZXRDbGllbnRSb2xlPWZ1bmN0aW9uKGUsdCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzZXRDbGllbnRSb2xlIHRvIFwiKS5jb25jYXQoZSkpO3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoYi5qb2luSW5mby5zaWQse25hbWU6XCJfc2V0Q2xpZW50Um9sZVwiLGNhbGxiYWNrOnR9KTtiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcInNldF9jbGllbnRfcm9sZVwiLF9tZXNzYWdlOntyb2xlOmV9fSxmdW5jdGlvbigpe2Iucm9sZT1lLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNsaWVudC1yb2xlLWNoYW5nZWRcIixyb2xlOmV9KSxuJiZuKG51bGwse3JvbGU6ZX0pfSxmdW5jdGlvbih0LGkpe2lmKGkmJmkuY29kZSYmKHQ9eFtpLmNvZGVdfHxcIlVOS05PV19FUlJPUl9cIitpLmNvZGUpLFwiRVJSX0FMUkVBRFlfSU5fVVNFXCI9PT10KXJldHVybiBuJiZuKG51bGwpO28uZGVmYXVsdC5lcnJvcihcInNldCBDbGllbnQgcm9sZSBlcnJvciB0byBcIitlK1wiOiBcIit0KSxuJiZuKHQpfSl9LGIuam9pbj1mdW5jdGlvbihlLHQsaSxhKXtlLnVzZVByb3h5U2VydmVyJiYoYi5oYXNDaGFuZ2VCR1BBZGRyZXNzPSEwKTt2YXIgYz0obmV3IERhdGUpLmdldFRpbWUoKSxkPWUudWlkO2lmKGIuaW5DaGFubmVsSW5mby5qb2luQXQmJihiLmluQ2hhbm5lbEluZm8uZHVyYXRpb24rPWMtYi5pbkNoYW5uZWxJbmZvLmpvaW5BdCksYi5pbkNoYW5uZWxJbmZvLmpvaW5BdD1jLGIuc3RhdGUhPT1fKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEdhdGV3YXlDbGllbnQuam9pbiBGYWlsZWQ6IHN0YXRlIFwiKSxiLnN0YXRlKSxhJiZhKFYuSU5WQUxJRF9PUEVSQVRJT04pLHZvaWQgcy5iLmpvaW5HYXRld2F5KGUuc2lkLHtsdHM6YyxzdWNjOiExLGVjOlYuSU5WQUxJRF9PUEVSQVRJT04sYWRkcjpudWxsfSk7aWYobnVsbCE9ZCYmcGFyc2VJbnQoZCkhPT1kKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIElucHV0IHVpZCBpcyBpbnZhbGlkXCIpKSxiLnN0YXRlPWgsYSYmYShWLklOVkFMSURfUEFSQU1FVEVSKSx2b2lkIHMuYi5qb2luR2F0ZXdheShlLnNpZCx7bHRzOmMsc3VjYzohMSxlYzpWLklOVkFMSURfUEFSQU1FVEVSLGFkZHI6bnVsbH0pO3ZhciB1PWJ0LnJlZ2lzdGVyKGIse3VpZDpkLGNuYW1lOmUmJmUuY25hbWV9KTtpZih1KXJldHVybiBiLnN0YXRlPWgsYSYmYSh1KSx2b2lkIHMuYi5qb2luR2F0ZXdheShlLnNpZCx7bHRzOmMsc3VjYzohMSxlYzp1LGFkZHI6bnVsbH0pO2Iuam9pbkluZm89UygpKHt9LGUpLGIudWlkPWQsYi5rZXk9dCxiLnBpbmdwb25nQ291bnRlcj0wLE4oZSxmdW5jdGlvbih0KXt2YXIgZCx1LGwsZjtiLnN0YXRlPUUsby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDb25uZWN0ZWQgdG8gZ2F0ZXdheSBzZXJ2ZXJcIikpLGNsZWFySW50ZXJ2YWwoYi5waW5nVGltZXIpLGIucGluZ1RpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlBJTkdfUE9OR19USU1FX09VVFwiKTtpZigrK2IucGluZ3BvbmdDb3VudGVyPj1lKXt2YXIgdD1EYXRlLm5vdygpO2Iuc29ja2V0JiZvLmRlZmF1bHQud2FybmluZyhcIlBJTkdQT05HIFRpbWVvdXQuIExhc3QgU29ja2V0IE1lc3NhZ2U6IFwiLmNvbmNhdCh0LWIuc29ja2V0LmdldExhc3RNc2dUaW1lKCksXCJtc1wiKSksYi5zb2NrZXQmJmIuc29ja2V0LmdldExhc3RNc2dUaW1lKCkmJnQtYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKT5PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiV0VCU09DS0VUX1RJTUVPVVRfTUlOXCIpJiYoYi5waW5ncG9uZ0NvdW50ZXI9MCxiLnNvY2tldC5jbG9zZSgpLGIuc29ja2V0LmRpc3BhdGNoRXZlbnQocCh7dHlwZTpcImRpc2Nvbm5lY3RcIixldmVudDp7bXNnOlwiUElOR19QT05HX1RJTUVfT1VUXCJ9fSkpKX12YXIgbj1EYXRlLm5vdygpO2IubWFrZVJlcXVlc3Qoe190eXBlOlwicGluZ1wifSxmdW5jdGlvbigpe2IucGluZ3BvbmdDb3VudGVyPTA7dmFyIGU9RGF0ZS5ub3coKS1uO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUkVQT1JUX1NUQVRTXCIpJiZiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcInBpbmdfYmFja1wiLF9tZXNzYWdlOntwaW5ncG9uZ0VsYXBzZTplfX0pfSwxZTMpfSxmdW5jdGlvbihlLHQpe1wiVElNRU9VVFwiIT09ZSYmKG8uZGVmYXVsdC5lcnJvcihcIlBpbmcgRXJyb3IgXCIuY29uY2F0KGUsXCIgXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeSh0KSkpLHQmJnQuZXJyb3JfY29kZSYmYi5zb2NrZXQmJmIuc29ja2V0LnNpZ25hbCYmYi5zb2NrZXQuc2lnbmFsLmNvbm5lY3Rpb24mJmIuc29ja2V0LnNpZ25hbC5jb25uZWN0aW9uLnJlYWR5U3RhdGU9PT1XZWJTb2NrZXQuT1BFTiYmKG8uZGVmYXVsdC5pbmZvKFwiRGlzY29ubmVjdGluZyB3ZWJzb2NrZXQgY29ubmVjdGlvblwiKSxiLnNvY2tldC5zaWduYWwuY29ubmVjdGlvbi5jbG9zZSgpKSl9KX0sM2UzKSxiLm1ha2VSZXF1ZXN0KChkPXtyb2xlOmIucm9sZX0sdT1kLnJvbGUsbD1TKCkoe30sYi5qb2luSW5mby5hcFJlc3BvbnNlKSxmPXtzZXNzaW9uX2lkOmIuam9pbkluZm8uc2lkLGFwcF9pZDpuLmFwcElkLGNoYW5uZWxfa2V5OmIua2V5LGNoYW5uZWxfbmFtZTpiLmpvaW5JbmZvLmNuYW1lLHNka192ZXJzaW9uOnIuVkVSU0lPTixicm93c2VyOm5hdmlnYXRvci51c2VyQWdlbnQscHJvY2Vzc19pZDpPYmplY3Qocy5hKSgpLG1vZGU6Yi5tb2RlLGNvZGVjOmIuY29kZWMscm9sZTp1LGhhc19jaGFuZ2VkX2dhdGV3YXk6T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkZPUkNFX0NIQU5HRURfR0FURVdBWV9GTEFHXCIpfHxiLmhhc0NoYW5nZUJHUEFkZHJlc3MsYXBfcmVzcG9uc2U6bCxleHRlbmQ6T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkpPSU5fRVhURU5EXCIpLGRldGFpbHM6e319LGIuam9pbkluZm8uaGFzT3duUHJvcGVydHkoXCJzdHJpbmdVaWRcIikmJihmLnN0cmluZ191aWQ9Yi5qb2luSW5mby5zdHJpbmdVaWQpLGIuam9pbkluZm8uYWVzbW9kZSYmYi5qb2luSW5mby5hZXNwYXNzd29yZCYmKGYuYWVzX21vZGU9Yi5qb2luSW5mby5hZXNtb2RlLGYuYWVzX3NlY3JldD1iLmpvaW5JbmZvLmFlc3Bhc3N3b3JkKSxiLnNvY2tldCYmYi5zb2NrZXQuc2lnbmFsJiZiLnNvY2tldC5zaWduYWwmJihsLmFkZHJlc3Nlc1tiLnNvY2tldC5zaWduYWwuaG9zdEluZGV4XSYmKGYuYXBfcmVzcG9uc2UudGlja2V0PWwuYWRkcmVzc2VzW2Iuc29ja2V0LnNpZ25hbC5ob3N0SW5kZXhdLnRpY2tldCxkZWxldGUgbC5hZGRyZXNzZXMpLGIuam9pbkluZm8udHVyblNlcnZlciYmXCJhdXRvXCI9PT1iLmpvaW5JbmZvLnR1cm5TZXJ2ZXIubW9kZSYmYi5zb2NrZXQuc2lnbmFsLnR1cm5Db25maWcmJihiLmpvaW5JbmZvLnR1cm5TZXJ2ZXIudXJsPWIuc29ja2V0LnNpZ25hbC50dXJuQ29uZmlnLnVybCxiLnNvY2tldC5zaWduYWwudHVybkNvbmZpZy50Y3Bwb3J0JiYoYi5qb2luSW5mby50dXJuU2VydmVyLnRjcHBvcnQ9XCJcIitiLnNvY2tldC5zaWduYWwudHVybkNvbmZpZy50Y3Bwb3J0KSxiLnNvY2tldC5zaWduYWwudHVybkNvbmZpZy51ZHBwb3J0JiYoYi5qb2luSW5mby50dXJuU2VydmVyLnVkcHBvcnQ9XCJcIitiLnNvY2tldC5zaWduYWwudHVybkNvbmZpZy51ZHBwb3J0KSksby5kZWZhdWx0LmRlYnVnKFwiVHVybiBjb25maWdcIixiLmpvaW5JbmZvLnR1cm5TZXJ2ZXIpKSxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJqb2luLW1lc3NhZ2UtaG9va1wiLGpvaW5NZXNzYWdlOmZ9LCEwKSx7X3R5cGU6XCJqb2luXCIsX21lc3NhZ2U6Zn0pLGZ1bmN0aW9uKHQpe2lmKHMuYi5qb2luR2F0ZXdheShlLnNpZCx7bHRzOmMsc3VjYzohMCxlYzpudWxsLHZpZDplLnZpZCxhZGRyOmIuc29ja2V0LmdldFVSTCgpfSksYi5yZWpvaW5BdHRlbXB0PTAsaSYmaSh0LnVpZCksYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiam9pblwifSksYi5sZWF2ZU9uQ29ubmVjdGVkKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ2FsbGluZyBMZWF2ZSgpIG9uY2Ugam9pbmVkXCIpKTt2YXIgbj1iLmxlYXZlT25Db25uZWN0ZWQ7Yi5sZWF2ZU9uQ29ubmVjdGVkPW51bGwsYi5sZWF2ZShuLm9uU3VjY2VzcyxuLm9uRmFpbHVyZSl9fSxmdW5jdGlvbih0LG4pe2lmKG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVXNlciBqb2luIGZhaWxlZCBbXCIpLmNvbmNhdCh0LFwiXVwiKSksXCJFUlJfSk9JTl9CWV9NVUxUSV9JUFwiPT09dClyZXR1cm4gYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwib25NdWx0aUlQXCIsb3B0aW9uOm4ub3B0aW9ufSk7aWYodnRbdF0mJmIucmVqb2luQXR0ZW1wdDw0KXtpZihiLl9kb1dpdGhBY3Rpb24odnRbdF0saSxhKSxiLmxlYXZlT25Db25uZWN0ZWQpe28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ2FsbGluZyBMZWF2ZSgpIG9uY2Ugam9pbmVkOiBKb2luIEZhaWxlZFwiKSk7dmFyIHI9Yi5sZWF2ZU9uQ29ubmVjdGVkO2IubGVhdmVPbkNvbm5lY3RlZD1udWxsLHIub25GYWlsdXJlKFYuSk9JTl9DSEFOTkVMX0ZBSUxFRCl9fWVsc2UgYSYmYSh0KTtzLmIuam9pbkdhdGV3YXkoZS5zaWQse2x0czpjLHN1Y2M6ITEsZWM6dCxhZGRyOmIuc29ja2V0LmdldFVSTCgpfSl9KX0sZnVuY3Rpb24odCl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVc2VyIGpvaW4gZmFpbGVkIFtcIikuY29uY2F0KHQsXCJdXCIpKSxhJiZhKHQpLHMuYi5qb2luR2F0ZXdheShlLnNpZCx7bHRzOmMsc3VjYzohMSxlYzp0LGFkZHI6Yi5zb2NrZXQuZ2V0VVJMKCl9KX0pLGNsZWFySW50ZXJ2YWwoYi50aW1lcnMudHJhZmZpY1N0YXRzKSxiLnRpbWVycy50cmFmZmljU3RhdHM9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcInRyYWZmaWNfc3RhdHNcIn0sZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciBuIGluIGUpdFt5dChuKV09ZVtuXTtpZih0LnBlZXJfZGVsYXkmJnQucGVlcl9kZWxheS5sZW5ndGgpe3ZhciBpPVtdO3QucGVlcl9kZWxheS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Zvcih2YXIgbiBpbiBlKXRbeXQobildPWVbbl07aS5wdXNoKHQpfSksdC5wZWVyX2RlbGF5PWl9Yi50cmFmZmljX3N0YXRzPXQ7dmFyIGE9Yi5qb2luSW5mby5zdHJpbmdVaWQscj1iLmxvY2FsU3RyZWFtc1tkXXx8Yi5sb2NhbFN0cmVhbXNbYV07ciYmKHIudHJhZmZpY19zdGF0cz17YWNjZXNzX2RlbGF5OnQuYWNjZXNzX2RlbGF5fSksdC5wZWVyX2RlbGF5JiZ0LnBlZXJfZGVsYXkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1iLnJlbW90ZVN0cmVhbXNbZS5wZWVyX3VpZF07biYmKG4udHJhZmZpY19zdGF0cz17YWNjZXNzX2RlbGF5OnQuYWNjZXNzX2RlbGF5LGUyZV9kZWxheTplLmUyZV9kZWxheSxhdWRpb19kZWxheTplLmF1ZGlvX2RlbGF5LHZpZGVvX2RlbGF5OmUudmlkZW9fZGVsYXl9KX0pLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImFmdGVyLWdldFRyYWZmaWNTdGF0c1wiLHRyYWZmaWNTdGF0czp0fSl9KX0sM2UzKSx0aGlzLnJlbW90ZU11dGVTdGF0ZT17fSxiLnJlc2V0QXVkaW9Wb2x1bWVJbmRpY2F0aW9uKCl9LGIubGVhdmU9ZnVuY3Rpb24oZSx0KXtzd2l0Y2goYi5zdGF0ZSl7Y2FzZSBoOnJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIENsaWVudCBBbHJlYWR5IGluIERJU0NPTk5FQ1RFRCBzdGF0dXNcIikpLHZvaWQgUihlKTtjYXNlIEk6cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ2xpZW50IEFscmVhZHkgaW4gRElTQ09OTkVDVElORyBzdGF0dXNcIikpLHZvaWQgUih0LFYuSU5WQUxJRF9PUEVSQVRJT04pO2Nhc2UgXzppZihiLmxlYXZlT25Db25uZWN0ZWQpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ2xpZW50LmxlYXZlKCkgYWxyZWFkeSBjYWxsZWRcIikpLHZvaWQgUih0LFYuSU5WQUxJRF9PUEVSQVRJT04pO2lmKDE9PWIucmVjb25uZWN0aW5nQ1MpcmV0dXJuO3JldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIENsaWVudCBjb25uZWN0aW5nLiBXYWl0aW5nIGZvciBDbGllbnQgRnVsbHkgQ29ubmVjdGVkKEFuZCBsZWF2ZSlcIikpLHZvaWQoYi5sZWF2ZU9uQ29ubmVjdGVkPXtvblN1Y2Nlc3M6ZSxvbkZhaWx1cmU6dH0pfXZhciBuPWJ0LnVucmVnaXN0ZXIoYik7aWYobilvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFwiKSxuKTtlbHNle2Zvcih2YXIgaSBpbiBiLnN0YXRlPUksYi5jaGFubmVsTWVkaWFDb25maWcmJihiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlciYmYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIuZGlzcG9zZSgpLGIuY2hhbm5lbE1lZGlhQ29uZmlnLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyPW51bGwpLGNsZWFySW50ZXJ2YWwoYi5waW5nVGltZXIpLGIudGltZXJzKWIudGltZXJzLmhhc093blByb3BlcnR5KGkpJiZjbGVhckludGVydmFsKGIudGltZXJzW2ldKTtmb3IodmFyIGkgaW4gYi5pbkNoYW5uZWxJbmZvLmpvaW5BdCYmKGIuaW5DaGFubmVsSW5mby5kdXJhdGlvbis9RGF0ZS5ub3coKS1iLmluQ2hhbm5lbEluZm8uam9pbkF0LGIuaW5DaGFubmVsSW5mby5qb2luQXQ9bnVsbCksYi5tYWtlUmVxdWVzdCh7X3R5cGU6XCJsZWF2ZVwifSxmdW5jdGlvbih0KXtiLnNvY2tldC5jbG9zZSgpLGIuc29ja2V0PXZvaWQgMCxvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gTGVhdmUgY2hhbm5lbCBzdWNjZXNzXCIpKSxiLnN0YXRlPWgsZSYmZSh0KX0sZnVuY3Rpb24oZSl7XCJUSU1FT1VUXCIhPT1lJiYoby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBMZWF2ZSBDaGFubmVsIEZhaWxlZFwiKSxlKSxiLnN0YXRlPUUsdCYmdChlKSl9KSxiLmxvY2FsU3RyZWFtcylpZihiLmxvY2FsU3RyZWFtcy5oYXNPd25Qcm9wZXJ0eShpKSl7dmFyIGE9Yi5sb2NhbFN0cmVhbXNbaV07ZGVsZXRlIGIubG9jYWxTdHJlYW1zW2ldLHZvaWQgMCE9PWEucGMmJihhLnBjLmNsb3NlKCksYS5wYz12b2lkIDApfUQoKX19LGIucHVibGlzaD1mdW5jdGlvbihlLHQsbixpKXt2YXIgYz0obmV3IERhdGUpLmdldFRpbWUoKSxkPSExO2lmKGUucHVibGlzaExUUz1jLFwib2JqZWN0XCIhPT1IZSgpKGUpfHxudWxsPT09ZSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIGxvY2FsIHN0cmVhbVwiKSksaSYmaShWLklOVkFMSURfTE9DQUxfU1RSRUFNKSx2b2lkIHMuYi5wdWJsaXNoKGIuam9pbkluZm8uc2lkLHtsdHM6YyxzdWNjOiExLGF1ZGlvTmFtZTplLmhhc0F1ZGlvKCkmJmUuYXVkaW9OYW1lLHZpZGVvTmFtZTplLmhhc1ZpZGVvKCkmJmUudmlkZW9OYW1lLHNjcmVlbk5hbWU6ZS5oYXNTY3JlZW4oKSYmZS5zY3JlZW5OYW1lLGVjOlYuSU5WQUxJRF9MT0NBTF9TVFJFQU19KTtpZighZS5zdHJlYW0mJnZvaWQgMD09PWUudXJsKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEludmFsaWQgbG9jYWwgbWVkaWEgc3RyZWFtXCIpKSxpJiZpKFYuSU5WQUxJRF9MT0NBTF9TVFJFQU0pLHZvaWQgcy5iLnB1Ymxpc2goYi5qb2luSW5mby5zaWQse2x0czpjLHN1Y2M6ITEsYXVkaW9OYW1lOmUuaGFzQXVkaW8oKSYmZS5hdWRpb05hbWUsdmlkZW9OYW1lOmUuaGFzVmlkZW8oKSYmZS52aWRlb05hbWUsc2NyZWVuTmFtZTplLmhhc1NjcmVlbigpJiZlLnNjcmVlbk5hbWUsZWM6Vi5JTlZBTElEX0xPQ0FMX1NUUkVBTX0pO2lmKGIuc3RhdGUhPT1FKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgaXMgbm90IGluIHRoZSBzZXNzaW9uXCIpKSxpJiZpKFYuSU5WQUxJRF9PUEVSQVRJT04pLHZvaWQgcy5iLnB1Ymxpc2goYi5qb2luSW5mby5zaWQse2x0czpjLHN1Y2M6ITEsYXVkaW9OYW1lOmUuaGFzQXVkaW8oKSYmZS5hdWRpb05hbWUsdmlkZW9OYW1lOmUuaGFzVmlkZW8oKSYmZS52aWRlb05hbWUsc2NyZWVuTmFtZTplLmhhc1NjcmVlbigpJiZlLnNjcmVlbk5hbWUsZWM6Vi5JTlZBTElEX09QRVJBVElPTn0pO3ZhciB1PWUuZ2V0QXR0cmlidXRlcygpfHx7fTtpZihlLmxvY2FsJiZ2b2lkIDA9PT1iLmxvY2FsU3RyZWFtc1tlLmdldElkKCldJiYoZS5oYXNBdWRpbygpfHxlLmhhc1ZpZGVvKCl8fGUuaGFzU2NyZWVuKCkpKXt2YXIgcD1iLmdlbmVyYXRlUDJQSWQoKTtpZihiLnAycHMuc2V0KHAsZSksZS5wMnBJZD1wLHZvaWQgMCE9PWUudXJsKXcoZyh7c3RhdGU6XCJ1cmxcIixhdWRpbzplLmhhc0F1ZGlvKCksdmlkZW86ZS5oYXNWaWRlbygpLGF0dHJpYnV0ZXM6ZS5nZXRBdHRyaWJ1dGVzKCl9LGUudXJsKSxmdW5jdGlvbih0LG4pe1wic3VjY2Vzc1wiPT09dD8oZS5nZXRVc2VySWQoKSE9PW4mJmUuc2V0VXNlcklkKG4pLGIubG9jYWxTdHJlYW1zW25dPWUsZS5vbkNsb3NlPWZ1bmN0aW9uKCl7Yi51bnB1Ymxpc2goZSl9KTpvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFB1Ymxpc2ggbG9jYWwgc3RyZWFtIGZhaWxlZFwiKSx0KX0pO2Vsc2V7Yi5sb2NhbFN0cmVhbXNbZS5nZXRJZCgpXT1lLGUuY29ubmVjdGlvblNwZWM9e2NhbGxiYWNrOmZ1bmN0aW9uKHUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU0RQIGV4Y2hhbmdlIGluIHB1Ymxpc2ggOiBzZW5kIG9mZmVyIC0tICBcIiksSlNPTi5wYXJzZSh1KSksYi5tYWtlUmVxdWVzdChnKHtzdGF0ZTpcIm9mZmVyXCIsc3RyZWFtX3R5cGU6MT09dC5zdHJlYW1UeXBlP1wibG93XCI6XCJoaWdoXCIscDJwX2lkOnAsc2RwOnUsYXVkaW86ZS5hdWRpb3x8ZS5zY3JlZW5BdWRpbyx2aWRlbzplLnNjcmVlbnx8ZS52aWRlbyxzY3JlZW46ZS5zY3JlZW4sYXR0cmlidXRlczplLmdldEF0dHJpYnV0ZXMoKSxkdHg6ZS5EVFgsaHE6ZS5oaWdoUXVhbGl0eSxscTplLmxvd1F1YWxpdHksc3RlcmVvOmUuc3RlcmVvLHNwZWVjaDplLnNwZWVjaCxjb2RlYzpiLmNvZGVjLGV4dGVuZDpPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUFVCX0VYVEVORFwiKX0pLGZ1bmN0aW9uKHQpe2UuZ2V0VXNlcklkKCkhPT10LnVpZCYmZS5zZXRVc2VySWQodC51aWQpLG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBMb2NhbCBzdHJlYW0gcHVibGlzaGVkIHdpdGggdWlkXCIpLHQudWlkKSxlLm9uQ2xvc2U9ZnVuY3Rpb24oKXtiLnVucHVibGlzaChlKX0sZS5fb25BdWRpb1VubXV0ZT1mdW5jdGlvbigpe2IubWFrZVJlcG9ydChhKHthY3Rpb246XCJ1bm11dGVfbG9jYWxfYXVkaW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSkpfSxlLl9vblZpZGVvVW5tdXRlPWZ1bmN0aW9uKCl7Yi5tYWtlUmVwb3J0KGEoe2FjdGlvbjpcInVubXV0ZV9sb2NhbF92aWRlb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSl9LGUuX29uQXVkaW9NdXRlPWZ1bmN0aW9uKCl7Yi5tYWtlUmVwb3J0KGEoe2FjdGlvbjpcIm11dGVfbG9jYWxfYXVkaW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSkpfSxlLl9vblZpZGVvTXV0ZT1mdW5jdGlvbigpe2IubWFrZVJlcG9ydChhKHthY3Rpb246XCJtdXRlX2xvY2FsX3ZpZGVvXCIsc3RyZWFtX2lkOmUuZ2V0SWQoKX0pKX0sZS5nZXRJZCgpPT09ZS5nZXRVc2VySWQoKSYmKGUuaXNBdWRpb09uKCl8fGUuaGFzQXVkaW8oKSYmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gbG9jYWwgc3RyZWFtIGF1ZGlvIG11dGVcIikpLGUuX29uQXVkaW9NdXRlKCkpLGUuaXNWaWRlb09uKCl8fChlLmhhc1ZpZGVvKCl8fGUuaGFzU2NyZWVuKCkpJiYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBsb2NhbCBzdHJlYW0gdmlkZW8gbXV0ZVwiKSksZS5fb25WaWRlb011dGUoKSkpLGUucGMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24odCl7aWYoXCJmYWlsZWRcIj09PXQpe2lmKG51bGwhPWIudGltZXJzW2UuZ2V0SWQoKV0mJihjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKV0pLGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpXStcIl9SZWxhdGVkU3RhdHNcIikpLG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUHVibGlzaGVyIGNvbm5lY3Rpb24gaXMgbG9zdCAtLSBzdHJlYW1JZDogXCIpLmNvbmNhdChlLmdldElkKCksXCIsIHAycElkOiBcIikuY29uY2F0KHApKSxiLnAycHMuZGVsZXRlKHApLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcHVibGlzaCBwMnAgZmFpbGVkOiBcIiksYi5wMnBzKSwhZClyZXR1cm4gZD0hMCxzLmIucHVibGlzaChiLmpvaW5JbmZvLnNpZCx7bHRzOmMsc3VjYzohMSxhdWRpb05hbWU6ZS5oYXNBdWRpbygpJiZlLmF1ZGlvTmFtZSx2aWRlb05hbWU6ZS5oYXNWaWRlbygpJiZlLnZpZGVvTmFtZSxzY3JlZW5OYW1lOmUuaGFzU2NyZWVuKCkmJmUuc2NyZWVuTmFtZSxlYzpWLlBFRVJDT05ORUNUSU9OX0ZBSUxFRH0pLGIuZGlzcGF0Y2hFdmVudChsKHt0eXBlOlwicHViUDJQTG9zdFwiLHN0cmVhbTplfSkpLGkmJmkoVi5QRUVSQ09OTkVDVElPTl9GQUlMRUQpO2IuZGlzcGF0Y2hFdmVudChsKHt0eXBlOlwicHViUDJQTG9zdFwiLHN0cmVhbTplfSkpfWVsc2UgaWYoXCJjb25uZWN0ZWRcIj09PXQmJihvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHB1Ymxpc2ggcDJwIGNvbm5lY3RlZDogXCIpLGIucDJwcyksZS5faXNBdWRpb011dGVkKCk/Yi5tYWtlUmVwb3J0KGEoe2FjdGlvbjpcIm11dGVfbG9jYWxfYXVkaW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSkpOmIubWFrZVJlcG9ydChhKHthY3Rpb246XCJ1bm11dGVfbG9jYWxfYXVkaW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSkpLGUuX2lzVmlkZW9NdXRlZCgpP2IubWFrZVJlcG9ydChhKHthY3Rpb246XCJtdXRlX2xvY2FsX3ZpZGVvXCIsc3RyZWFtX2lkOmUuZ2V0SWQoKX0pKTpiLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwidW5tdXRlX2xvY2FsX3ZpZGVvXCIsc3RyZWFtX2lkOmUuZ2V0SWQoKX0pKSwhZCkpcmV0dXJuIGQ9ITAscy5iLnB1Ymxpc2goYi5qb2luSW5mby5zaWQse2x0czpjLHN1Y2M6ITAsYXVkaW9OYW1lOmUuaGFzQXVkaW8oKSYmZS5hdWRpb05hbWUsdmlkZW9OYW1lOmUuaGFzVmlkZW8oKSYmZS52aWRlb05hbWUsc2NyZWVuTmFtZTplLmhhc1NjcmVlbigpJiZlLnNjcmVlbk5hbWUsZWM6bnVsbH0pLG4mJm4oKX0sby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTRFAgZXhjaGFuZ2UgaW4gcHVibGlzaCA6IHJlY2VpdmUgYW5zd2VyIC0tICBcIiksSlNPTi5wYXJzZSh0LnNkcCkpLGUucGMucHJvY2Vzc1NpZ25hbGluZ01lc3NhZ2UodC5zZHApfSxmdW5jdGlvbih0LG4pe28uZGVmYXVsdC5lcnJvcihcIlB1Ymxpc2ggRmFpbGVkOiBcIi5jb25jYXQodCkpLHMuYi5wdWJsaXNoKGIuam9pbkluZm8uc2lkLHtsdHM6YyxzdWNjOiEwLGF1ZGlvTmFtZTplLmhhc0F1ZGlvKCkmJmUuYXVkaW9OYW1lLHZpZGVvTmFtZTplLmhhc1ZpZGVvKCkmJmUudmlkZW9OYW1lLHNjcmVlbk5hbWU6ZS5oYXNTY3JlZW4oKSYmZS5zY3JlZW5OYW1lLGVjOnR9KSxcIlRJTUVPVVRcIiE9dCYmKGIucHJvY2Vzc1B1Ymxpc2hGYWlsdXJlKGUpLGkmJmkodCkpfSl9LGF1ZGlvOmUuaGFzQXVkaW8oKSx2aWRlbzplLmhhc1ZpZGVvKCksc2NyZWVuOmUuaGFzU2NyZWVuKCksaXNTdWJzY3JpYmVyOiExLHN0dW5TZXJ2ZXJVcmw6Yi5zdHVuU2VydmVyVXJsLHR1cm5TZXJ2ZXI6Yi5qb2luSW5mby50dXJuU2VydmVyLG1heEF1ZGlvQlc6dS5tYXhBdWRpb0JXLG1pblZpZGVvQlc6dS5taW5WaWRlb0JXLG1heFZpZGVvQlc6dS5tYXhWaWRlb0JXLG1vZGU6Yi5tb2RlLGNvZGVjOmIuY29kZWMsaXNWaWRlb011dGU6ZS51c2VyTXV0ZVZpZGVvfHxlLnBlZXJNdXRlVmlkZW8saXNBdWRpb011dGU6ZS51c2VyTXV0ZUF1ZGlvfHxlLnBlZXJNdXRlQXVkaW8sbWF4RnJhbWVSYXRlOmUuYXR0cmlidXRlcy5tYXhGcmFtZVJhdGUsY2xpZW50SWQ6Yi5jbGllbnRJZH0sZS5wYz1lZShlLmNvbm5lY3Rpb25TcGVjKSxlLnBjLmFkZFN0cmVhbShlLnN0cmVhbSksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBQZWVyQ29ubmVjdGlvbiBhZGQgc3RyZWFtIDpcIiksZS5zdHJlYW0pLGUucGMub25uZWdvdGlhdGlvbm5lZWRlZD1mdW5jdGlvbihuKXt2YXIgaT17c3RhdGU6XCJuZWdvdGlhdGlvblwiLHN0cmVhbV90eXBlOjE9PT10LnN0cmVhbVR5cGU/XCJsb3dcIjpcImhpZ2hcIixwMnBfaWQ6cCxzZHA6bn07Yi5tYWtlUmVxdWVzdChnKGkpLGZ1bmN0aW9uKHQpe28uZGVmYXVsdC5kZWJ1ZyhcIk5lZ290YXRpbmcgU3RyZWFtIFwiLmNvbmNhdChlLmdldElkKCkpKSxlLnBjLnByb2Nlc3NTaWduYWxpbmdNZXNzYWdlKHQuc2RwKX0sZnVuY3Rpb24oZSx0KXtvLmRlZmF1bHQuZXJyb3IoXCJOZWdvdGlhdGlvbiBmYWlsZWQgXCIuY29uY2F0KGUpLHQsaSl9KX0sY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCldKSxiLnRpbWVyc1tlLmdldElkKCldPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU1wiKSl7dmFyIHQ9MDtlJiZlLnBjJiZlLnBjLmdldFN0YXRzJiZlLnBjLmdldFN0YXRzUmF0ZShmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7aWYobiYmbi5pZCYmIS9fcmVjdiQvLnRlc3Qobi5pZCkmJiEvXnRpbWUkLy50ZXN0KG4uaWQpJiZlLmdldFVzZXJJZCgpKWlmKC0xPT09bi5pZC5pbmRleE9mKFwib3V0Ym91bmRfcnRwXCIpJiYtMT09PW4uaWQuaW5kZXhPZihcIk91dGJvdW5kUlRQXCIpfHxcInZpZGVvXCIhPT1uLm1lZGlhVHlwZXx8KG4uZ29vZ0ZyYW1lV2lkdGhTZW50PWUudmlkZW9XaWR0aCtcIlwiLG4uZ29vZ0ZyYW1lSGVpZ2h0U2VudD1lLnZpZGVvSGVpZ2h0K1wiXCIpLGUuZ2V0SWQoKT09ZS5nZXRVc2VySWQoKSl7dmFyIGk9MjAwKnQ7dCsrLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1iLnNvY2tldCYmYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKSYmRGF0ZS5ub3coKS1iLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpO2U+T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU19USU1FT1VUXCIpP28uZGVmYXVsdC5kZWJ1ZyhcIlB1Ymxpc2hTdGF0cyByZXBvcnQgYmxvY2tlZCBieSBSRVBPUlRfU1RBVFNfVElNRU9VVCBcIi5jb25jYXQoZSkpOmIubWFrZVJlcG9ydChmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU1RBVFNfRklMVEVSXCIpW25dfHwodFtJdChuKV09ZVtuXSl9KSx7X3R5cGU6XCJwdWJsaXNoX3N0YXRzXCIsX21lc3NhZ2U6e3N0cmVhbV90eXBlOlwiaGlnaFwiLHN0YXRzOnR9fX0obikpfSxpKX1lbHNle2k9MjAwKnQ7dCsrLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1iLnNvY2tldCYmYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKSYmRGF0ZS5ub3coKS1iLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpO2U+T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU19USU1FT1VUXCIpP28uZGVmYXVsdC5kZWJ1ZyhcIlB1Ymxpc2hTdGF0c0xvdyByZXBvcnQgYmxvY2tlZCBieSBSRVBPUlRfU1RBVFNfVElNRU9VVCBcIi5jb25jYXQoZSkpOmIubWFrZVJlcG9ydChmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU1RBVFNfRklMVEVSXCIpW25dfHwodFtJdChuKV09ZVtuXSl9KSx7X3R5cGU6XCJwdWJsaXNoX3N0YXRzXCIsX21lc3NhZ2U6e3N0cmVhbV90eXBlOlwibG93XCIsc3RhdHM6dH19fShuKSl9LGkpfX0pfSl9fSwzZTMpO3ZhciBmPWZ1bmN0aW9uKCl7T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU1wiKSYmZSYmZS5wYyYmZS5wYy5nZXRWaWRlb1JlbGF0ZWRTdGF0cyYmZS5wYy5nZXRWaWRlb1JlbGF0ZWRTdGF0cyhmdW5jdGlvbih0KXt2YXIgbixpLGE9Yi5zb2NrZXQmJmIuc29ja2V0LmdldExhc3RNc2dUaW1lKCkmJkRhdGUubm93KCktYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKTthPk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJSRVBPUlRfU1RBVFNfVElNRU9VVFwiKT9vLmRlZmF1bHQuZGVidWcoXCJQdWJsaXNoUmVsYXRlZFN0YXRzIHJlcG9ydCBibG9ja2VkIGJ5IFJFUE9SVF9TVEFUU19USU1FT1VUIFwiLmNvbmNhdChhKSk6ZS5nZXRJZCgpPT09ZS5nZXRVc2VySWQoKT9iLm1ha2VSZXBvcnQoKG49dCxpPXt9LE9iamVjdC5rZXlzKG4pLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlNUQVRTX0ZJTFRFUlwiKVtlXXx8KGlbSXQoZSldPW5bZV0pfSkse190eXBlOlwicHVibGlzaF9yZWxhdGVkX3N0YXRzXCIsX21lc3NhZ2U6e3N0cmVhbV90eXBlOlwiaGlnaFwiLHN0YXRzOml9fSkpOmIubWFrZVJlcG9ydChmdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gT2JqZWN0LmtleXMoZSkuZm9yRWFjaChmdW5jdGlvbihuKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU1RBVFNfRklMVEVSXCIpW25dfHwodFtJdChuKV09ZVtuXSl9KSx7X3R5cGU6XCJwdWJsaXNoX3JlbGF0ZWRfc3RhdHNcIixfbWVzc2FnZTp7c3RyZWFtX3R5cGU6XCJsb3dcIixzdGF0czp0fX19KHQpKX0pfTtmKCksY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCkrXCJfUmVsYXRlZFN0YXRzXCJdKSxiLnRpbWVyc1tlLmdldElkKCkrXCJfUmVsYXRlZFN0YXRzXCJdPXNldEludGVydmFsKGYsMWUzKX19fSxiLnVucHVibGlzaD1mdW5jdGlvbihlLHQsbixpKXtpZihcIm9iamVjdFwiIT09SGUoKShlKXx8bnVsbD09PWUpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCBsb2NhbCBzdHJlYW1cIikpLHZvaWQgUihpLFYuSU5WQUxJRF9MT0NBTF9TVFJFQU0pO2lmKGIuc3RhdGUhPT1FKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgbm90IGluIHRoZSBzZXNzaW9uXCIpKSx2b2lkIFIoaSxWLklOVkFMSURfT1BFUkFUSU9OKTtpZihudWxsIT1iLnRpbWVyc1tlLmdldElkKCldJiYoY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCldKSxjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKStcIl9SZWxhdGVkU3RhdHNcIl0pKSx2b2lkIDAhPT1iLnNvY2tldClpZihlLmxvY2FsJiZ2b2lkIDAhPT1iLmxvY2FsU3RyZWFtc1tlLmdldElkKCldKXtkZWxldGUgYi5sb2NhbFN0cmVhbXNbZS5nZXRJZCgpXTt2YXIgYT17c3RyZWFtX2lkOmUuZ2V0VXNlcklkKCksc3RyZWFtX3R5cGU6MT09PXQuc3RyZWFtVHlwZT9cImxvd1wiOlwiaGlnaFwifTtiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcInVucHVibGlzaFwiLF9tZXNzYWdlOmF9KSwoZS5oYXNBdWRpbygpfHxlLmhhc1ZpZGVvKCl8fGUuaGFzU2NyZWVuKCkpJiZ2b2lkIDA9PT1lLnVybCYmdm9pZCAwIT09ZS5wYyYmKGUucGMuY2xvc2UoKSxlLnBjPXZvaWQgMCksZS5vbkNsb3NlPXZvaWQgMCxlLl9vbkF1ZGlvTXV0ZT12b2lkIDAsZS5fb25BdWRpb1VudXRlPXZvaWQgMCxlLl9vblZpZGVvTXV0ZT12b2lkIDAsZS5fb25WaWRlb1VubXV0ZT12b2lkIDAsYi5wMnBzLmRlbGV0ZShlLnAycElkKSxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdHJlYW0tdW5wdWJsaXNoZWRcIixzdHJlYW06ZSxvcHRpb25zOnR9KSxuJiZuKCl9ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEludmFsaWQgbG9jYWwgc3RyZWFtXCIpKSxSKGksVi5JTlZBTElEX0xPQ0FMX1NUUkVBTSk7ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgbm90IGluIHRoZSBzZXNzaW9uXCIpKSxSKGksVi5JTlZBTElEX09QRVJBVElPTil9LGIuc3Vic2NyaWJlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT0obmV3IERhdGUpLmdldFRpbWUoKTtlLnN1YnNjcmliZUxUUz1pO3ZhciBjPSExO2lmKG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBHYXRld2F5Y2xpZW50IFwiKS5jb25jYXQoYi51aWQsXCIgU3Vic2NyaWJlIFwiKS5jb25jYXQoZS5nZXRJZCgpLFwiOiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGUuc3Vic2NyaWJlT3B0aW9ucykpKSxcIm9iamVjdFwiIT09SGUoKShlKXx8bnVsbD09PWUpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCByZW1vdGUgc3RyZWFtXCIpKSxuJiZuKFYuSU5WQUxJRF9SRU1PVEVfU1RSRUFNKSx2b2lkIHMuYi5zdWJzY3JpYmUoYi5qb2luSW5mby5zaWQse2x0czppLHN1Y2M6ITEsdmlkZW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMudmlkZW8sYXVkaW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMuYXVkaW8scGVlcmlkOmUuZ2V0SWQoKSxlYzpWLklOVkFMSURfUkVNT1RFX1NUUkVBTX0pO2lmKGIuc3RhdGUhPT1FJiYoby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVc2VyIGlzIG5vdCBpbiB0aGUgc2Vzc2lvblwiKSksIWMpKXJldHVybiBjPSEwLHMuYi5zdWJzY3JpYmUoYi5qb2luSW5mby5zaWQse2x0czppLHN1Y2M6ITEsdmlkZW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMudmlkZW8sYXVkaW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMuYXVkaW8scGVlcmlkOmUuZ2V0SWQoKSxlYzpWLklOVkFMSURfT1BFUkFUSU9OfSksbiYmbihWLklOVkFMSURfT1BFUkFUSU9OKTtpZighZS5sb2NhbCYmYi5yZW1vdGVTdHJlYW1zLmhhc093blByb3BlcnR5KGUuZ2V0SWQoKSkpaWYoZS5oYXNBdWRpbygpfHxlLmhhc1ZpZGVvKCl8fGUuaGFzU2NyZWVuKCkpe3ZhciBwPWIuZ2VuZXJhdGVQMlBJZCgpO2IucDJwcy5zZXQocCxlKSxlLnAycElkPXAsZS5wYz1lZSh7Y2FsbGJhY2s6ZnVuY3Rpb24odCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTRFAgZXhjaGFuZ2UgaW4gc3Vic2NyaWJlIDogc2VuZCBvZmZlciAtLSAgXCIpLEpTT04ucGFyc2UodCkpO3ZhciBhPXtzdHJlYW1faWQ6ZS5nZXRJZCgpLGF1ZGlvOiFlLnN1YnNjcmliZU9wdGlvbnN8fGUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyx2aWRlbzohZS5zdWJzY3JpYmVPcHRpb25zfHxlLnN1YnNjcmliZU9wdGlvbnMudmlkZW8sY29kZWM6Yi5jb2RlYyxwMnBfaWQ6cCxzZHA6dCx0Y2M6T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlNVQlNDUklCRV9UQ0NcIiksZXh0ZW5kOk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJTVUJfRVhURU5EXCIpfTtiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcInN1YnNjcmliZVwiLF9tZXNzYWdlOmF9LGZ1bmN0aW9uKHQpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU0RQIGV4Y2hhbmdlIGluIHN1YnNjcmliZSA6IHJlY2VpdmUgYW5zd2VyIC0tICBcIiksSlNPTi5wYXJzZSh0LnNkcCkpLGUucGMucHJvY2Vzc1NpZ25hbGluZ01lc3NhZ2UodC5zZHApfSxmdW5jdGlvbih0LGEpe28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU3Vic2NyaWJlIHJlbW90ZSBzdHJlYW0gRmFpbGVkOiBcIikuY29uY2F0KHQsXCIsIGNsb3Npbmcgc3RyZWFtIFwiKSxlLmdldElkKCksYSkscy5iLnN1YnNjcmliZShiLmpvaW5JbmZvLnNpZCx7bHRzOmksc3VjYzohMSx2aWRlbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyxhdWRpbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyxwZWVyaWQ6ZS5nZXRJZCgpLGVjOnR9KSxcIlRJTUVPVVRcIiE9dCYmKGIucHJvY2Vzc1N1YnNjcmliZUZhaWx1cmUoZSksbiYmbih0KSl9KX0sbm9wMnA6ITAsYXVkaW86ITAsdmlkZW86ITAsc2NyZWVuOmUuaGFzU2NyZWVuKCksaXNTdWJzY3JpYmVyOiEwLHN0dW5TZXJ2ZXJVcmw6Yi5zdHVuU2VydmVyVXJsLHR1cm5TZXJ2ZXI6Yi5qb2luSW5mby50dXJuU2VydmVyLGlzVmlkZW9NdXRlOmUudXNlck11dGVWaWRlbyxpc0F1ZGlvTXV0ZTplLnVzZXJNdXRlQXVkaW8sdWlkOmUuZ2V0SWQoKSxjbGllbnRJZDpiLmNsaWVudElkfSksZS5wYy5vbmFkZHN0cmVhbT1mdW5jdGlvbih0LG4pe2lmKGUuX29uQXVkaW9Vbm11dGU9ZnVuY3Rpb24oKXtiLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwidW5tdXRlX3JlbW90ZV9hdWRpb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KX0sZS5fb25BdWRpb011dGU9ZnVuY3Rpb24oKXtiLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwibXV0ZV9yZW1vdGVfYXVkaW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSksZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSl9LGUuX29uVmlkZW9Vbm11dGU9ZnVuY3Rpb24oKXtiLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwidW5tdXRlX3JlbW90ZV92aWRlb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KX0sZS5fb25WaWRlb011dGU9ZnVuY3Rpb24oKXtiLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwibXV0ZV9yZW1vdGVfdmlkZW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSksZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKCl7fSl9LFwib250cmFja1wiPT09biYmXCJ2aWRlb1wiPT09dC50cmFjay5raW5kfHxcIm9uYWRkc3RyZWFtXCI9PT1uKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmVtb3RlIHN0cmVhbSBzdWJzY3JpYmVkIHdpdGggdWlkIFwiKSxlLmdldElkKCkpO3ZhciBpPWIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldO2lmKGIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldLnN0cmVhbT1cIm9uYWRkc3RyZWFtXCI9PT1uP3Quc3RyZWFtOnQuc3RyZWFtc1swXSxiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXS5oYXNWaWRlbygpKXtpZihPYmplY3QobS5pc0ZpcmVGb3gpKCl8fE9iamVjdChtLmlzU2FmYXJpKSgpKXt2YXIgcj1iLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXS5zdHJlYW07T2JqZWN0KG5lLnZzUmVzSGFjaykocixmdW5jdGlvbih0LG4pe2UudmlkZW9XaWR0aD10LGUudmlkZW9IZWlnaHQ9bn0sZnVuY3Rpb24oZSl7cmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSB2c1Jlc0hhY2sgZmFpbGVkOiBcIikrZSl9KX19ZWxzZXt2YXIgcz1iLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXTtzLnBlZXJNdXRlVmlkZW89ITAsYi5fYWRqdXN0UENNdXRlU3RhdHVzKHMpfWkmJmkuaXNQbGF5aW5nKCkmJmkuZWxlbWVudElEJiYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZWxvYWQgUGxheWVyIFwiKS5jb25jYXQoaS5lbGVtZW50SUQsXCIgU3RyZWFtSWQgXCIpLmNvbmNhdChpLmdldElkKCkpKSxlLmF1ZGlvT3V0cHV0PWkuYXVkaW9PdXRwdXQsaS5zdG9wKCksZS5wbGF5KGkuZWxlbWVudElELGkucGxheU9wdGlvbnMpKSxkZWxldGUgZS5hdWRpb0xldmVsSGVscGVyO3ZhciBjPXUoe3R5cGU6XCJzdHJlYW0tc3Vic2NyaWJlZFwiLHN0cmVhbTpiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXX0pO2IuZGlzcGF0Y2hFdmVudChjKX19LGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpXSksYi50aW1lcnNbZS5nZXRJZCgpXT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJSRVBPUlRfU1RBVFNcIikpe3ZhciB0PTA7ZSYmZS5wYyYmZS5wYy5nZXRTdGF0cyYmZS5wYy5nZXRTdGF0c1JhdGUoZnVuY3Rpb24obil7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe2lmKG4mJm4uaWQpe2lmKC9fc2VuZCQvLnRlc3Qobi5pZCl8fC9edGltZSQvLnRlc3Qobi5pZCl8fC9eYndlZm9ydmlkZW8kLy50ZXN0KG4uaWQpKXJldHVybjstMT09PW4uaWQuaW5kZXhPZihcImluYm91bmRfcnRwXCIpJiYtMT09PW4uaWQuaW5kZXhPZihcImluYm91bmQtcnRwXCIpfHxcInZpZGVvXCIhPT1uLm1lZGlhVHlwZXx8KG4uZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZD1lLnZpZGVvV2lkdGgrXCJcIixuLmdvb2dGcmFtZUhlaWdodFJlY2VpdmVkPWUudmlkZW9IZWlnaHQrXCJcIik7dmFyIGk9MjAwKnQ7dCsrO3ZhciBhPWUuZ2V0SWQoKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dmFyIGU9Yi5zb2NrZXQmJmIuc29ja2V0LmdldExhc3RNc2dUaW1lKCkmJkRhdGUubm93KCktYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKTtlPk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJSRVBPUlRfU1RBVFNfVElNRU9VVFwiKT9vLmRlZmF1bHQuZGVidWcoXCJTdWJzY3JpYmVTdGF0cyByZXBvcnQgYmxvY2tlZCBieSBSRVBPUlRfU1RBVFNfVElNRU9VVCBcIi5jb25jYXQoZSkpOmIubWFrZVJlcG9ydCh2KGEsbikpfSxpKX1lbHNlO30pfSl9fSwzZTMpLGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpK1wiX1JlbGF0ZWRTdGF0c1wiXSksYi50aW1lcnNbZS5nZXRJZCgpK1wiX1JlbGF0ZWRTdGF0c1wiXT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJSRVBPUlRfU1RBVFNcIikmJmUmJmUucGMpe3ZhciB0PWIuc29ja2V0JiZiLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpJiZEYXRlLm5vdygpLWIuc29ja2V0LmdldExhc3RNc2dUaW1lKCk7aWYodD5PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUkVQT1JUX1NUQVRTX1RJTUVPVVRcIikpcmV0dXJuIHZvaWQgby5kZWZhdWx0LmRlYnVnKFwiU3Vic2NyaWJlUmVsYXRlZFN0YXRzIHJlcG9ydCBibG9ja2VkIGJ5IFJFUE9SVF9TVEFUU19USU1FT1VUIFwiLmNvbmNhdCh0KSk7ZS5wYy5nZXRWaWRlb1JlbGF0ZWRTdGF0cyYmZS5wYy5nZXRWaWRlb1JlbGF0ZWRTdGF0cyhmdW5jdGlvbih0KXtiLm1ha2VSZXBvcnQoZChlLmdldElkKCksdCkpfSksZS5wYy5nZXRBdWRpb1JlbGF0ZWRTdGF0cyYmZS5wYy5nZXRBdWRpb1JlbGF0ZWRTdGF0cyhmdW5jdGlvbih0KXtiLm1ha2VSZXBvcnQoZChlLmdldElkKCksdCkpfSl9fSwxZTMpLGIuYXVkaW9MZXZlbFtlLmdldElkKCldPTAsY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCkrXCJhdWRpb1wiXSksYi50aW1lcnNbZS5nZXRJZCgpK1wiYXVkaW9cIl09c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtiLmhhc0xpc3RlbmVycyhcImFjdGl2ZS1zcGVha2VyXCIpJiZlJiZlLnBjJiZcImVzdGFibGlzaGVkXCI9PT1lLnBjLnN0YXRlJiZlLnBjLmdldFN0YXRzJiZlLnBjLmdldFN0YXRzKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbih0KXtpZihcImF1ZGlvXCI9PT10Lm1lZGlhVHlwZSl7aWYodC5hdWRpb091dHB1dExldmVsPjVlMylmb3IodmFyIG4gaW4gYi5hdWRpb0xldmVsW2UuZ2V0SWQoKV08MjAmJihiLmF1ZGlvTGV2ZWxbZS5nZXRJZCgpXSs9MSksYi5hdWRpb0xldmVsKW4hPT1cIlwiK2UuZ2V0SWQoKSYmYi5hdWRpb0xldmVsW25dPjAmJihiLmF1ZGlvTGV2ZWxbbl0tPTEpO3ZhciBpPU9iamVjdC5rZXlzKGIuYXVkaW9MZXZlbCkuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBiLmF1ZGlvTGV2ZWxbdF0tYi5hdWRpb0xldmVsW2VdfSk7aWYoYi5hY3RpdmVTcGVha2VyIT09aVswXSl7dmFyIGE9bCh7dHlwZTpcImFjdGl2ZS1zcGVha2VyXCIsdWlkOmlbMF19KTtiLmRpc3BhdGNoRXZlbnQoYSksYi5hY3RpdmVTcGVha2VyPWlbMF0sby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVcGRhdGUgYWN0aXZlIHNwZWFrZXI6IFwiKS5jb25jYXQoYi5hY3RpdmVTcGVha2VyKSl9fX0pfSw1MCl9LDUwKSxlLnBjLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKGEpe2lmKFwiZmFpbGVkXCI9PT1hKW51bGwhPWIudGltZXJzW2UuZ2V0SWQoKV0mJihjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKV0pLGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpXStcImF1ZGlvXCIpKSxvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFN1YnNjcmliZXIgY29ubmVjdGlvbiBpcyBsb3N0IC0tIHN0cmVhbUlkOiBcIikuY29uY2F0KGUuZ2V0SWQoKSxcIiwgcDJwSWQ6IFwiKS5jb25jYXQocCkpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc3Vic2NyaWJlIHAycCBmYWlsZWQ6IFwiKSxiLnAycHMpLGN8fChjPSEwLG4mJm4oVi5QRUVSQ09OTkVDVElPTl9GQUlMRUQpLHMuYi5zdWJzY3JpYmUoYi5qb2luSW5mby5zaWQse2x0czppLHN1Y2M6ITEsdmlkZW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMudmlkZW8sYXVkaW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMuYXVkaW8scGVlcmlkOmUuZ2V0SWQoKSxlYzpWLlBFRVJDT05ORUNUSU9OX0ZBSUxFRH0pKSxiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXSYmYi5wMnBzLmhhcyhwKSYmKGIucDJwcy5kZWxldGUocCksYi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJzdWJQMlBMb3N0XCIsc3RyZWFtOmV9KSkpO2Vsc2UgaWYoXCJjb25uZWN0ZWRcIj09PWEmJihvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHN1YnNjcmliZSBwMnAgY29ubmVjdGVkOiBcIiksYi5wMnBzKSwhYykpe2M9ITAscy5iLnN1YnNjcmliZShiLmpvaW5JbmZvLnNpZCx7bHRzOmksc3VjYzohMCx2aWRlbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyxhdWRpbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyxwZWVyaWQ6ZS5nZXRJZCgpLGVjOm51bGx9KSxiLl9hZGp1c3RQQ011dGVTdGF0dXMoZSk7dmFyIHI9ITEsZD1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UucGM/ZS5wYy5nZXRTdGF0cyhmdW5jdGlvbih0KXt0LmZvckVhY2goZnVuY3Rpb24odCl7LTEhPT10LmlkLmluZGV4T2YoXCJyZWN2XCIpJiZcImF1ZGlvXCI9PT10Lm1lZGlhVHlwZSYmKHBhcnNlSW50KHQuZ29vZ0RlY29kaW5nTm9ybWFsKT4wfHxwYXJzZUludCh0LmF1ZGlvT3V0cHV0TGV2ZWwpPjApJiYocnx8KHI9ITAsYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZmlyc3QtYXVkaW8tZnJhbWUtZGVjb2RlXCIsc3RyZWFtOmV9KSxjbGVhckludGVydmFsKGQpLHMuYi5yZXBvcnRBcGlJbnZva2UoYi5qb2luSW5mby5zaWQse25hbWU6XCJmaXJzdEF1ZGlvRGVjb2RlXCJ9KShudWxsLHtlbGFwc2U6RGF0ZS5ub3coKS1lLnN1YnNjcmliZUxUU30pKSl9KX0sMTAwKTpjbGVhckludGVydmFsKGQpfSwxMDApLHU9ITEsZj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UucGM/ZS5wYy5nZXRTdGF0cyhmdW5jdGlvbih0KXt0LmZvckVhY2goZnVuY3Rpb24odCl7LTE9PT10LmlkLmluZGV4T2YoXCJyZWN2XCIpJiYtMT09PXQuaWQuaW5kZXhPZihcImluYm91bmRfcnRwXCIpJiYtMT09PXQuaWQuaW5kZXhPZihcImluYm91bmQtcnRwXCIpJiYtMT09PXQuaWQuaW5kZXhPZihcIkluYm91bmRSVFBcIil8fFwidmlkZW9cIj09PXQubWVkaWFUeXBlJiYodC5mcmFtZXNEZWNvZGVkPjB8fHQuZ29vZ0ZyYW1lc0RlY29kZWQ+MCkmJih1fHwodT0hMCxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaXJzdC12aWRlby1mcmFtZS1kZWNvZGVcIixzdHJlYW06ZX0pLGNsZWFySW50ZXJ2YWwoZiksZS5maXJzdEZyYW1lVGltZT0obmV3IERhdGUpLmdldFRpbWUoKS1lLnN1YnNjcmliZUxUUyxzLmIuZmlyc3RSZW1vdGVGcmFtZShiLmpvaW5JbmZvLnNpZCx7bHRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLHBlZXJpZDplLmdldElkKCksc3VjYzohMCx3aWR0aDordC5nb29nRnJhbWVXaWR0aFJlY2VpdmVkLGhlaWdodDordC5nb29nRnJhbWVIZWlnaHRSZWNlaXZlZH0pKSl9KX0sMTAwKTpjbGVhckludGVydmFsKGYpfSwxMDApO3JldHVybiBlLnNpZD1iLmpvaW5JbmZvLnNpZCx0JiZ0KCl9fX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCByZW1vdGUgc3RyZWFtXCIpKSxjfHwoYz0hMCxuJiZuKFYuSU5WQUxJRF9SRU1PVEVfU1RSRUFNKSxzLmIuc3Vic2NyaWJlKGIuam9pbkluZm8uc2lkLHtsdHM6aSxzdWNjOiExLHZpZGVvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLnZpZGVvLGF1ZGlvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHBlZXJpZDplLmdldElkKCksZWM6Vi5JTlZBTElEX1JFTU9URV9TVFJFQU19KSk7ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIE5vIHN1Y2ggcmVtb3RlIHN0cmVhbVwiKSksY3x8KGM9ITAsbiYmbihWLk5PX1NVQ0hfUkVNT1RFX1NUUkVBTSkscy5iLnN1YnNjcmliZShiLmpvaW5JbmZvLnNpZCx7bHRzOmksc3VjYzohMSx2aWRlbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyxhdWRpbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyxwZWVyaWQ6ZS5nZXRJZCgpLGVjOlYuTk9fU1VDSF9SRU1PVEVfU1RSRUFNfSkpfSxiLnN1YnNjcmliZUNoYW5nZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9RGF0ZS5ub3coKTtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gR2F0ZXdheWNsaWVudCBcIikuY29uY2F0KGIudWlkLFwiIFN1YnNjcmliZUNoYW5nZSBcIikuY29uY2F0KGUuZ2V0SWQoKSxcIjogXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlLnN1YnNjcmliZU9wdGlvbnMpKSksYi5fYWRqdXN0UENNdXRlU3RhdHVzKGUpO3ZhciBhPXtzdHJlYW1faWQ6ZS5nZXRJZCgpLGF1ZGlvOmUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyx2aWRlbzplLnN1YnNjcmliZU9wdGlvbnMudmlkZW99O2IubWFrZVJlcXVlc3Qoe190eXBlOlwic3Vic2NyaWJlX2NoYW5nZVwiLF9tZXNzYWdlOmF9LGZ1bmN0aW9uKG4pe3ZhciBhPXUoe3R5cGU6XCJzdHJlYW0tc3Vic2NyaWJlLWNoYW5nZWRcIixzdHJlYW06Yi5yZW1vdGVTdHJlYW1zW2UuZ2V0SWQoKV19KTtzLmIuc3Vic2NyaWJlKGIuam9pbkluZm8uc2lkLHtsdHM6aSxzdWNjOiEwLHZpZGVvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLnZpZGVvLGF1ZGlvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHBlZXJpZDplLmdldElkKCksZWM6bnVsbH0pLGIuZGlzcGF0Y2hFdmVudChhKSx0JiZ0KCl9LGZ1bmN0aW9uKHQsaSl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTdWJzY3JpYmUgQ2hhbmdlIEZhaWxlZCBcIikuY29uY2F0KGUuZ2V0SWQoKSksdCxpKSxuJiZuKHQsaSl9KX0sYi5wcm9jZXNzUHVibGlzaEZhaWx1cmU9ZnVuY3Rpb24oZSl7ZS5wdWJsaXNoTFRTPW51bGwsZS5wMnBJZCYmYi5wMnBzLmdldChlLnAycElkKT09PWUmJmIucDJwcy5kZWxldGUoZS5wMnBJZCksYi5sb2NhbFN0cmVhbXNbZS5nZXRVc2VySWQoKV09PT1lJiZkZWxldGUgYi5sb2NhbFN0cmVhbXNbZS5nZXRVc2VySWQoKV0sYi5sb2NhbFN0cmVhbXNbZS5nZXRJZCgpXT09PWUmJmRlbGV0ZSBiLmxvY2FsU3RyZWFtc1tlLmdldElkKCldLGUucGMmJihlLnBjLnByb2Nlc3NTaWduYWxpbmdNZXNzYWdlPWZ1bmN0aW9uKCl7fSxlLnBjLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7fSxlLnBjLmNsb3NlKCksZGVsZXRlIGUucGMpLGRlbGV0ZSBlLm9uQ2xvc2UsZGVsZXRlIGUuX29uQXVkaW9Vbm11dGUsZGVsZXRlIGUuX29uVmlkZW9Vbm11dGUsZGVsZXRlIGUuX29uQXVkaW9NdXRlLGRlbGV0ZSBlLl9vblZpZGVvTXV0ZSxkZWxldGUgZS5fb25BdWRpb1VubXV0ZX0sYi5wcm9jZXNzU3Vic2NyaWJlRmFpbHVyZT1mdW5jdGlvbihlKXtlLnAycElkJiZiLnAycHMuZ2V0KGUucDJwSWQpPT09ZSYmYi5wMnBzLmRlbGV0ZShlLnAycElkKSxiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXT09PWUmJmRlbGV0ZSBiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXSxiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXT09PWUmJmRlbGV0ZSBiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXSxlLnBjJiYoZS5wYy5vbmFkZHN0cmVhbT1mdW5jdGlvbigpe30sZS5wYy5wcm9jZXNzU2lnbmFsaW5nTWVzc2FnZT1mdW5jdGlvbigpe30sZS5wYy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbigpe30sZS5wYy5jbG9zZSgpLGRlbGV0ZSBlLnBjKSxkZWxldGUgZS5vbkNsb3NlLGRlbGV0ZSBlLl9vbkF1ZGlvVW5tdXRlLGRlbGV0ZSBlLl9vblZpZGVvVW5tdXRlLGRlbGV0ZSBlLl9vbkF1ZGlvTXV0ZSxkZWxldGUgZS5fb25WaWRlb011dGUsZGVsZXRlIGUuX29uQXVkaW9Vbm11dGV9LGIuX2FkanVzdFBDTXV0ZVN0YXR1cz1mdW5jdGlvbihlKXshZS5sb2NhbCYmZS5wYyYmZS5wYy5wZWVyQ29ubmVjdGlvbi5nZXRSZWNlaXZlcnMmJmUucGMucGVlckNvbm5lY3Rpb24uZ2V0UmVjZWl2ZXJzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtpZih0JiZ0LnRyYWNrJiZcImF1ZGlvXCI9PT10LnRyYWNrLmtpbmQpe3ZhciBuPSFlLnVzZXJNdXRlQXVkaW8mJiFlLnBlZXJNdXRlQXVkaW87ZS5zdWJzY3JpYmVPcHRpb25zJiYhZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvJiYobj0hMSksdC50cmFjay5lbmFibGVkPSEhbn1lbHNlIGlmKHQmJnQudHJhY2smJlwidmlkZW9cIj09PXQudHJhY2sua2luZCl7dmFyIGk9IWUudXNlck11dGVWaWRlbyYmIWUucGVlck11dGVWaWRlbztlLnN1YnNjcmliZU9wdGlvbnMmJiFlLnN1YnNjcmliZU9wdGlvbnMudmlkZW8mJihpPSExKSx0LnRyYWNrLmVuYWJsZWQ9ISFpfX0pfSxiLnVuc3Vic2NyaWJlPWZ1bmN0aW9uKGUsdCxuKXtpZihcIm9iamVjdFwiIT09SGUoKShlKXx8bnVsbD09PWUpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCByZW1vdGUgc3RyZWFtXCIpKSx2b2lkIFIobixWLklOVkFMSURfUkVNT1RFX1NUUkVBTSk7aWYoYi5zdGF0ZSE9PUUpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVXNlciBpcyBub3QgaW4gdGhlIHNlc3Npb25cIikpLHZvaWQgUihuLFYuSU5WQUxJRF9PUEVSQVRJT04pO2lmKG51bGwhPWIudGltZXJzW2UuZ2V0SWQoKV0mJihjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKV0pLGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpXStcImF1ZGlvXCIpKSxudWxsIT1iLmF1ZGlvTGV2ZWxbZS5nZXRJZCgpXSYmZGVsZXRlIGIuYXVkaW9MZXZlbFtlLmdldElkKCldLG51bGwhPWIudGltZXJfY291bnRlcltlLmdldElkKCldJiZkZWxldGUgYi50aW1lcl9jb3VudGVyW2UuZ2V0SWQoKV0sYi5yZW1vdGVTdHJlYW1zLmhhc093blByb3BlcnR5KGUuZ2V0SWQoKSkpe2lmKCFiLnNvY2tldClyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVc2VyIGlzIG5vdCBpbiB0aGUgc2Vzc2lvblwiKSksdm9pZCBSKG4sVi5JTlZBTElEX09QRVJBVElPTik7aWYoZS5sb2NhbClyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIHJlbW90ZSBzdHJlYW1cIikpLHZvaWQgUihuLFYuSU5WQUxJRF9SRU1PVEVfU1RSRUFNKTtlLmNsb3NlKCk7dmFyIGk9e3N0cmVhbV9pZDplLmdldElkKCl9O2IubWFrZVJlcXVlc3Qoe190eXBlOlwidW5zdWJzY3JpYmVcIixfbWVzc2FnZTppfSksdm9pZCAwIT09ZS5wYyYmKGUucGMuY2xvc2UoKSxlLnBjPXZvaWQgMCksZS5vbkNsb3NlPXZvaWQgMCxlLl9vbkF1ZGlvTXV0ZT12b2lkIDAsZS5fb25BdWRpb1VudXRlPXZvaWQgMCxlLl9vblZpZGVvTXV0ZT12b2lkIDAsZS5fb25WaWRlb1VubXV0ZT12b2lkIDAsZGVsZXRlIGUuc3Vic2NyaWJlT3B0aW9ucyxiLnAycHMuZGVsZXRlKGUucDJwSWQpLG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVbnN1YnNjcmliZSBzdHJlYW0gc3VjY2Vzc1wiKSksdCYmdCgpfWVsc2UgUihuLFYuTk9fU1VDSF9SRU1PVEVfU1RSRUFNKX0sYi5zZXRSZW1vdGVWaWRlb1N0cmVhbVR5cGU9ZnVuY3Rpb24oZSx0KXtpZihvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFN3aXRjaGluZyByZW1vdGUgdmlkZW8gc3RyZWFtIFwiKS5jb25jYXQoZS5nZXRJZCgpLFwiIHRvIFwiKS5jb25jYXQodCkpLFwib2JqZWN0XCI9PT1IZSgpKGUpJiZudWxsIT09ZSlpZihiLnN0YXRlPT09RSl7aWYoIWUubG9jYWwpe3N3aXRjaCh0KXtjYXNlIGIucmVtb3RlVmlkZW9TdHJlYW1UeXBlcy5SRU1PVEVfVklERU9fU1RSRUFNX0hJR0g6Y2FzZSBiLnJlbW90ZVZpZGVvU3RyZWFtVHlwZXMuUkVNT1RFX1ZJREVPX1NUUkVBTV9MT1c6Y2FzZSBiLnJlbW90ZVZpZGVvU3RyZWFtVHlwZXMuUkVNT1RFX1ZJREVPX1NUUkVBTV9NRURJVU06YnJlYWs7ZGVmYXVsdDpyZXR1cm59dmFyIG49e3N0cmVhbV9pZDplLmdldElkKCksc3RyZWFtX3R5cGU6dH07Yi5tYWtlUmVxdWVzdCh7X3R5cGU6XCJzd2l0Y2hfdmlkZW9fc3RyZWFtXCIsX21lc3NhZ2U6bn0sZnVuY3Rpb24oKXtvLmRlZmF1bHQuZGVidWcoXCJTd2l0Y2hWaWRlb1N0cmVhbSBTdWNjZXNzIFwiLmNvbmNhdChuLnN0cmVhbV9pZCxcIiBcIikuY29uY2F0KG4uc3RyZWFtX3R5cGUpKX0sZnVuY3Rpb24oZSx0KXtvLmRlZmF1bHQuZXJyb3IoXCJTd2l0Y2hWaWRlb1N0cmVhbSBFcnJvciBcIi5jb25jYXQoZSxcIiBcIikuY29uY2F0KG4uc3RyZWFtX2lkLFwiIFwiKS5jb25jYXQobi5zdHJlYW1fdHlwZSksdCl9KX19ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgaXMgbm90IGluIHRoZSBzZXNzaW9uXCIpKTtlbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCByZW1vdGUgc3RyZWFtXCIpKX0sYi5yZW5ld1Rva2VuPWZ1bmN0aW9uKGUsdCxuKXtlP2Iua2V5P2Iuc3RhdGUhPT1FPyhvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIENsaWVudCBpcyBub3QgY29ubmVjdGVkLiBUcnlpbmcgdG8gcmVqb2luXCIpKSxiLmtleT1lLGIucmVqb2luKCksdCYmdCgpKTooby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSByZW5ld1Rva2VuIGZyb20gXCIpLmNvbmNhdChiLmtleSxcIiB0byBcIikuY29uY2F0KGUpKSxiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcInJlbmV3X3Rva2VuXCIsX21lc3NhZ2U6e3Rva2VuOmV9fSx0LG4pKTooby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDbGllbnQgaXMgcHJldmlvdXNseSBqb2luZWQgd2l0aG91dCB0b2tlblwiKSksbiYmbihWLklOVkFMSURfUEFSQU1FVEVSKSk6KG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCBUb2tlbiBcIikuY29uY2F0KGUpKSxuJiZuKFYuSU5WQUxJRF9QQVJBTUVURVIpKX0sYi5zZXRTdHJlYW1GYWxsYmFja09wdGlvbj1mdW5jdGlvbihlLHQpe2lmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU2V0IHN0cmVhbSBmYWxsYmFjayBvcHRpb24gXCIpLmNvbmNhdChlLmdldElkKCksXCIgdG8gXCIpLmNvbmNhdCh0KSksXCJvYmplY3RcIj09PUhlKCkoZSkmJm51bGwhPT1lKWlmKGIuc3RhdGU9PT1FKXtpZighZS5sb2NhbCl7c3dpdGNoKHQpe2Nhc2UgYi5zdHJlYW1GYWxsYmFja1R5cGVzLlNUUkVBTV9GQUxMQkFDS19PUFRJT05fRElTQUJMRUQ6Y2FzZSBiLnN0cmVhbUZhbGxiYWNrVHlwZXMuU1RSRUFNX0ZBTExCQUNLX09QVElPTl9WSURFT19TVFJFQU1fTE9XOmNhc2UgYi5zdHJlYW1GYWxsYmFja1R5cGVzLlNUUkVBTV9GQUxMQkFDS19PUFRJT05fQVVESU9fT05MWTpicmVhaztkZWZhdWx0OnJldHVybn12YXIgbj17c3RyZWFtX2lkOmUuZ2V0SWQoKSxmYWxsYmFja190eXBlOnR9O2IubWFrZVJlcXVlc3Qoe190eXBlOlwic2V0X2ZhbGxiYWNrX29wdGlvblwiLF9tZXNzYWdlOm59LGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiU2V0U3RyZWFtRmFsbGJhY2tPcHRpb24gc3VjY2VzcyBcIi5jb25jYXQobi5zdHJlYW1faWQsXCIgXCIpLmNvbmNhdCh0KSl9LGZ1bmN0aW9uKGUsaSl7by5kZWZhdWx0LmVycm9yKFwiRmFpbGVkIHRvIFNldFN0cmVhbUZhbGxiYWNrT3B0aW9uIFwiLmNvbmNhdChuLnN0cmVhbV9pZCxcIiBcIikuY29uY2F0KHQsXCIgXCIpLmNvbmNhdChlKSxpKX0pfX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVXNlciBpcyBub3QgaW4gdGhlIHNlc3Npb25cIikpO2Vsc2Ugby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIHJlbW90ZSBzdHJlYW1cIikpfSxiLmVuYWJsZUF1ZGlvVm9sdW1lSW5kaWNhdG9yPWZ1bmN0aW9uKGUsdCl7Yi5hdWRpb1ZvbHVtZUluZGljYXRpb24uZW5hYmxlZD0hMCxiLmF1ZGlvVm9sdW1lSW5kaWNhdGlvbi5pbnRlcnZhbD1lLGIuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uLnNtb290aD10LGIucmVzZXRBdWRpb1ZvbHVtZUluZGljYXRpb24oKX0sYi5yZXNldEF1ZGlvVm9sdW1lSW5kaWNhdGlvbj1mdW5jdGlvbigpe2lmKGNsZWFySW50ZXJ2YWwoYi50aW1lcnMuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uKSxjbGVhckludGVydmFsKGIudGltZXJzLmF1ZGlvVm9sdW1lU2FtcGxpbmcpLGIuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uLmVuYWJsZWQmJmIuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uLmludGVydmFsKXt2YXIgZT1NYXRoLmZsb29yKDFlMypiLmF1ZGlvVm9sdW1lSW5kaWNhdGlvbi5zbW9vdGgvMTAwKTtjbGVhckludGVydmFsKGIudGltZXJzLmF1ZGlvVm9sdW1lU2FtcGxpbmcpLGIudGltZXJzLmF1ZGlvVm9sdW1lU2FtcGxpbmc9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtiLmF1ZGlvVm9sdW1lU2FtcGxpbmd8fChiLmF1ZGlvVm9sdW1lU2FtcGxpbmc9e30pO3ZhciB0PXt9O2Zvcih2YXIgbiBpbiBiLnJlbW90ZVN0cmVhbXMpe3ZhciBpPWIucmVtb3RlU3RyZWFtc1tuXTtpZihpLnN0cmVhbSYmaS5oYXNBdWRpbygpKXt2YXIgYT1pLmdldEF1ZGlvTGV2ZWwoKTthPjAmJmE8MSYmKGEqPTEwMCk7dmFyIHI9Yi5hdWRpb1ZvbHVtZVNhbXBsaW5nW25dfHxbXTtmb3Ioci5wdXNoKGEpO3IubGVuZ3RoPmU7KXIuc2hpZnQoKTt0W25dPXJ9fWIuYXVkaW9Wb2x1bWVTYW1wbGluZz10fSwxMDApLGNsZWFySW50ZXJ2YWwoYi50aW1lcnMuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uKSxiLnRpbWVycy5hdWRpb1ZvbHVtZUluZGljYXRpb249c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihiLnNvY2tldCYmYi5zb2NrZXQuc2lnbmFsJiZiLnNvY2tldC5zaWduYWwuY29ubmVjdGlvbiYmYi5zb2NrZXQuc2lnbmFsLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZT09PVdlYlNvY2tldC5PUEVOKXt2YXIgZT1bXTtmb3IodmFyIHQgaW4gYi5yZW1vdGVTdHJlYW1zKWlmKGIuYXVkaW9Wb2x1bWVTYW1wbGluZyYmYi5hdWRpb1ZvbHVtZVNhbXBsaW5nW3RdKXt2YXIgbj1iLmF1ZGlvVm9sdW1lU2FtcGxpbmdbdF0saT0wO24uZm9yRWFjaChmdW5jdGlvbihlKXtpKz1lfSk7dmFyIGE9e3VpZDp0LGxldmVsOk1hdGguZmxvb3IoaS9uLmxlbmd0aCl9O2EubGV2ZWwmJmUucHVzaChhKX12YXIgcj1lLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS5sZXZlbC10LmxldmVsfSk7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSB2b2x1bWUtaW5kaWNhdG9yIFwiKSxKU09OLnN0cmluZ2lmeShyKSksYi5hdWRpb1ZvbHVtZUluZGljYXRpb24uc29ydGVkQXVkaW9Wb2x1bWVzPXI7dmFyIHM9bCh7dHlwZTpcInZvbHVtZS1pbmRpY2F0b3JcIixhdHRyOnJ9KTtiLmRpc3BhdGNoRXZlbnQocyl9fSxiLmF1ZGlvVm9sdW1lSW5kaWNhdGlvbi5pbnRlcnZhbCl9fSxiLmNsb3NlR2F0ZXdheT1mdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gY2xvc2UgZ2F0ZXdheVwiKSksYi5zdGF0ZT1oLGIuc29ja2V0LmNsb3NlKCksTygpfSxiLnN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXk9ZnVuY3Rpb24oKXt2YXIgZT11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiBlKHQpe3ZhciBuLGksYSxyO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6aWYoIWIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyKXtlLm5leHQ9MjticmVha310aHJvdyBuZXcgS2UuQ2hhbm5lbE1lZGlhRXJyb3IoXCJSRUxBWV9BTFJFQURZX1NUQVJUXCIsXCJcIixLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SLlJFTEFZX0FMUkVBRFlfU1RBUlQpO2Nhc2UgMjpyZXR1cm4gbj1mdW5jdGlvbihlKXtiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjaGFubmVsLW1lZGlhLXJlbGF5LWV2ZW50XCIsY29kZTplfSl9LGk9ZnVuY3Rpb24oZSx0LG4pe2U9PT1LZS5DSEFOTkVMX01FRElBX1JFTEFZX1NUQVRFLlJFTEFZX1NUQVRFX0ZBSUxVUkUmJnQ9PT1LZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SLlNFUlZFUl9DT05ORUNUSU9OX0xPU1QmJihiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5kaXNwb3NlKCksYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXI9bnVsbCksYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2hhbm5lbC1tZWRpYS1yZWxheS1zdGF0ZVwiLHN0YXRlOmUsY29kZTp0LGRhdGE6bn0pfSxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcj1uZXcgemUuYShiLmpvaW5JbmZvLGIuY2xpZW50SWQpLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyLm9uKFwiZXZlbnRcIixuKSxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5vbihcInN0YXRlXCIsaSksZS5wcmV2PTcsZS5uZXh0PTEwLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyLnN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXkodCk7Y2FzZSAxMDplLm5leHQ9MjI7YnJlYWs7Y2FzZSAxMjp0aHJvdyBlLnByZXY9MTIsZS50MD1lLmNhdGNoKDcpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheSBleGNlcHRpb246IFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZS50MCkpKSxhPUtlLkNIQU5ORUxfTUVESUFfUkVMQVlfU1RBVEUuUkVMQVlfU1RBVEVfRkFJTFVSRSxyPVwiXCIscj1lLnQwIGluc3RhbmNlb2YgS2UuQ2hhbm5lbE1lZGlhRXJyb3I/XCJTZXRTb3VyY2VDaGFubmVsU3RhdHVzXCI9PT1lLnQwLmRhdGF8fGUudDAuZGF0YSYmZS50MC5kYXRhLnNlcnZlclJlc3BvbnNlJiZcIlNldFNvdXJjZUNoYW5uZWxcIj09PWUudDAuZGF0YS5zZXJ2ZXJSZXNwb25zZS5jb21tYW5kP1wiRkFJTEVEX0pPSU5fU1JDXCI6XCJTZXREZXN0Q2hhbm5lbFN0YXR1c1wiPT09ZS50MC5kYXRhfHxlLnQwLmRhdGEmJmUudDAuZGF0YS5zZXJ2ZXJSZXNwb25zZSYmXCJTZXREZXN0Q2hhbm5lbFwiPT09ZS50MC5kYXRhLnNlcnZlclJlc3BvbnNlLmNvbW1hbmQ/XCJGQUlMRURfSk9JTl9ERVNUXCI6ZS50MC5kYXRhJiZlLnQwLmRhdGEuc2VydmVyUmVzcG9uc2UmJlwiU3RhcnRQYWNrZXRUcmFuc2ZlclwiPT09ZS50MC5kYXRhLnNlcnZlclJlc3BvbnNlLmNvbW1hbmQ/XCJGQUlMRURfUEFDS0VUX1NFTlRfVE9fREVTVFwiOmUudDAubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuUkVRVUVTVF9USU1FT1VUfHxlLnQwLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLldBSVRfU1RBVFVTX1RJTUVPVVQ/XCJTRVJWRVJfTk9fUkVTUE9OU0VcIjplLnQwLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLlJFUVVFU1RfRkFJTEVEfHxlLnQwLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLldBSVRfU1RBVFVTX0VSUk9SP1wiU0VSVkVSX0VSUk9SX1JFU1BPTlNFXCI6ZS50MC5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5BUF9SRVFVRVNUX1RJTUVPVVQ/XCJOT19SRVNPVVJDRV9BVkFJTEFCTEVcIjplLnQwLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLldTX0FCT1JUfHxlLnQwLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLkFQX1JFUVVFU1RfQUJPUlQ/XCJPUEVSQVRJT05fQUJPUlRcIjpcIklOVEVSTkFMX0VSUk9SXCI6XCJJTlRFUk5BTF9FUlJPUlwiLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNoYW5uZWwtbWVkaWEtcmVsYXktc3RhdGVcIixzdGF0ZTphLGNvZGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9FUlJPUltyXX0pLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyJiYoYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIuZGlzcG9zZSgpLGIuY2hhbm5lbE1lZGlhQ29uZmlnPW51bGwsYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXI9bnVsbCksYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2hhbm5lbC1tZWRpYS1yZWxheS1zdGF0ZVwiLHN0YXRlOktlLkNIQU5ORUxfTUVESUFfUkVMQVlfU1RBVEUuUkVMQVlfU1RBVEVfSURMRX0pLG5ldyBLZS5DaGFubmVsTWVkaWFFcnJvcihyLG51bGwsS2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9FUlJPUltyXSk7Y2FzZSAyMjpiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjaGFubmVsLW1lZGlhLXJlbGF5LXN0YXRlXCIsc3RhdGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURS5SRUxBWV9TVEFURV9SVU5OSU5HLGNvZGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9FUlJPUi5SRUxBWV9PS30pLGIuY2hhbm5lbE1lZGlhQ29uZmlnPXQ7Y2FzZSAyNDpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLHRoaXMsW1s3LDEyXV0pfSkpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLGIudXBkYXRlQ2hhbm5lbE1lZGlhUmVsYXk9ZnVuY3Rpb24oKXt2YXIgdD11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiB0KG4pe3ZhciBpLGE7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDppZihiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcil7dC5uZXh0PTI7YnJlYWt9dGhyb3cgbmV3IEtlLkNoYW5uZWxNZWRpYUVycm9yKFwiUkVMQVlfTk9UX1NUQVJUXCIsbnVsbCxLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SLlJFTEFZX05PVF9TVEFSVCk7Y2FzZSAyOnJldHVybiB0LnByZXY9Mix0Lm5leHQ9NSxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci51cGRhdGVDaGFubmVsTWVkaWFSZWxheShuKTtjYXNlIDU6dC5uZXh0PTE4O2JyZWFrO2Nhc2UgNzp0aHJvdyB0LnByZXY9Nyx0LnQwPXQuY2F0Y2goMiksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSB1cGRhdGVDaGFubmVsTWVkaWFSZWxheSBleGNlcHRpb246IFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSkpKSxpPUtlLkNIQU5ORUxfTUVESUFfUkVMQVlfU1RBVEUuUkVMQVlfU1RBVEVfRkFJTFVSRSxhPVwiXCIsYT1lIGluc3RhbmNlb2YgS2UuQ2hhbm5lbE1lZGlhRXJyb3I/ZS5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5SRVFVRVNUX1RJTUVPVVR8fGUubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuV0FJVF9TVEFUVVNfVElNRU9VVD9cIlNFUlZFUl9OT19SRVNQT05TRVwiOmUubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuUkVRVUVTVF9GQUlMRUR8fGUubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuV0FJVF9TVEFUVVNfRVJST1I/XCJTRVJWRVJfRVJST1JfUkVTUE9OU0VcIjplLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLldTX0FCT1JUfHxlLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLkFQX1JFUVVFU1RfQUJPUlQ/XCJPUEVSQVRJT05fQUJPUlRcIjpcIklOVEVSTkFMX0VSUk9SXCI6XCJJTlRFUk5BTF9FUlJPUlwiLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNoYW5uZWwtbWVkaWEtcmVsYXktZXZlbnRcIixjb2RlOktlLkNIQU5ORUxfTUVESUFfUkVMQVlfRVZFTlQuUEFDS0VUX1VQREFURV9ERVNUX0NIQU5ORUxfUkVGVVNFRH0pLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNoYW5uZWwtbWVkaWEtcmVsYXktc3RhdGVcIixzdGF0ZTppLGNvZGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9FUlJPUlthXX0pLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyJiYoYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIuZGlzcG9zZSgpLGIuY2hhbm5lbE1lZGlhQ29uZmlnPW51bGwsYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXI9bnVsbCksYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2hhbm5lbC1tZWRpYS1yZWxheS1zdGF0ZVwiLHN0YXRlOktlLkNIQU5ORUxfTUVESUFfUkVMQVlfU1RBVEUuUkVMQVlfU1RBVEVfSURMRX0pLG5ldyBLZS5DaGFubmVsTWVkaWFFcnJvcihhLG51bGwsS2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9FUlJPUlthXSk7Y2FzZSAxODpiLmNoYW5uZWxNZWRpYUNvbmZpZz1uO2Nhc2UgMTk6Y2FzZVwiZW5kXCI6cmV0dXJuIHQuc3RvcCgpfX0sdCx0aGlzLFtbMiw3XV0pfSkpO3JldHVybiBmdW5jdGlvbihlKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLGIuc3RvcENoYW5uZWxNZWRpYVJlbGF5PXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHQoKXt2YXIgbixpO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6aWYoYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIpe3QubmV4dD0yO2JyZWFrfXRocm93IG5ldyBLZS5DaGFubmVsTWVkaWFFcnJvcihcIlJFTEFZX05PVF9TVEFSVFwiLG51bGwsS2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9FUlJPUi5SRUxBWV9OT1RfU1RBUlQpO2Nhc2UgMjpyZXR1cm4gdC5wcmV2PTIsdC5uZXh0PTUsYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIuc3RvcENoYW5uZWxNZWRpYVJlbGF5KCk7Y2FzZSA1OnQubmV4dD0xNzticmVhaztjYXNlIDc6dGhyb3cgdC5wcmV2PTcsdC50MD10LmNhdGNoKDIpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc3RvcENoYW5uZWxNZWRpYVJlbGF5IGV4Y2VwdGlvbjogXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlKSkpLG49S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURS5SRUxBWV9TVEFURV9GQUlMVVJFLGk9XCJcIixpPWUgaW5zdGFuY2VvZiBLZS5DaGFubmVsTWVkaWFFcnJvcj9lLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLlJFUVVFU1RfVElNRU9VVHx8ZS5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5XQUlUX1NUQVRVU19USU1FT1VUP1wiU0VSVkVSX05PX1JFU1BPTlNFXCI6ZS5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5SRVFVRVNUX0ZBSUxFRHx8ZS5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5XQUlUX1NUQVRVU19FUlJPUj9cIlNFUlZFUl9FUlJPUl9SRVNQT05TRVwiOlwiSU5URVJOQUxfRVJST1JcIjpcIklOVEVSTkFMX0VSUk9SXCIsYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2hhbm5lbC1tZWRpYS1yZWxheS1zdGF0ZVwiLHN0YXRlOm4sY29kZTpLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SW2ldfSksYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXImJihiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5kaXNwb3NlKCksYi5jaGFubmVsTWVkaWFDb25maWc9bnVsbCxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcj1udWxsKSxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjaGFubmVsLW1lZGlhLXJlbGF5LXN0YXRlXCIsc3RhdGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURS5SRUxBWV9TVEFURV9JRExFfSksbmV3IEtlLkNoYW5uZWxNZWRpYUVycm9yKGksbnVsbCxLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SW2ldKTtjYXNlIDE3OmIuY2hhbm5lbE1lZGlhQ29uZmlnPW51bGwsYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXI9bnVsbDtjYXNlIDE5OmNhc2VcImVuZFwiOnJldHVybiB0LnN0b3AoKX19LHQsdGhpcyxbWzIsN11dKX0pKTt2YXIgQT1mdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmVjb25uZWN0IGdhdGV3YXlcIikpLGIuc3RhdGU9aCxiLnNvY2tldC5jbG9zZSgpLE8oKSxiLnJlY29ubmVjdE1vZGU9XCJyZWNvdmVyXCIsYi5zdGF0ZT1fLEMoKX07Yi5yZWNvdmVyPUE7dmFyIE89ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYmVmb3JlLWNsZWFyLWNvbm5lY3Rpb25cIn0pLGIudGltZXJzKWIudGltZXJzLmhhc093blByb3BlcnR5KGUpJiZjbGVhckludGVydmFsKGIudGltZXJzW2VdKTtmb3IodmFyIGUgaW4gYi5yZW1vdGVTdHJlYW1zKWlmKGIucmVtb3RlU3RyZWFtcy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Yi5yZW1vdGVTdHJlYW1zW2VdLG49bCh7dHlwZTpcInN0cmVhbS1yZW1vdmVkXCIsdWlkOnQuZ2V0SWQoKSxzdHJlYW06dH0pO2IuZGlzcGF0Y2hFdmVudChuKX1iLnAycHMuY2xlYXIoKSxEKCksaygpLGNsZWFySW50ZXJ2YWwoYi5waW5nVGltZXIpfTtiLnJlam9pbj1mdW5jdGlvbigpe2Iuc29ja2V0JiYoY2xlYXJJbnRlcnZhbChiLnBpbmdUaW1lciksYi5zb2NrZXQuY2xvc2UoKSxiLnNvY2tldD12b2lkIDApLGIuc3RhdGU9XyxDKCl9O3ZhciBDPWZ1bmN0aW9uKGUsdCl7Yi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJyZWpvaW4tc3RhcnRcIn0pKSxlPWV8fGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVc2VyIFwiKS5jb25jYXQoZSxcIiBpcyByZS1qb2luZWQgdG8gXCIpLmNvbmNhdChiLmpvaW5JbmZvLmNuYW1lKSksYi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJyZWpvaW5cIn0pKSxiLmNoYW5uZWxNZWRpYUNvbmZpZyYmYi5zdGFydENoYW5uZWxNZWRpYVJlbGF5KGIuY2hhbm5lbE1lZGlhQ29uZmlnKS50aGVuKGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSByZXN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXkgc3VjY2Vzc1wiKSl9KS5jYXRjaChmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHJlc3RhcnRDaGFubmVsTWVkaWFSZWxheSBmYWlsZWQ6IFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSkpKX0pLGIubGl2ZVN0cmVhbXMmJmIubGl2ZVN0cmVhbXMuc2l6ZSYmYi5saXZlU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7ZSYmYi5zZXRMaXZlVHJhbnNjb2RpbmcoYi50cmFuc2NvZGluZyksYi5zdGFydExpdmVTdHJlYW1pbmcodCxlKX0pLGIuaW5qZWN0TGl2ZVN0cmVhbXMmJmIuaW5qZWN0TGl2ZVN0cmVhbXMuc2l6ZSYmYi5pbmplY3RMaXZlU3RyZWFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUsdCl7Yi5hZGRJbmplY3RTdHJlYW1VcmwodCxlKX0pfSx0PXR8fGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmUtam9pbiB0byBjaGFubmVsIGZhaWxlZCBcIiksZSksYi5kaXNwYXRjaEV2ZW50KHUoe3R5cGU6XCJlcnJvclwiLHJlYXNvbjplfSkpfSxiLmtleT8oKytiLnJlam9pbkF0dGVtcHQsYi5qb2luKGIuam9pbkluZm8sYi5rZXksZSx0KSk6by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDb25uZWN0aW9uIHJlY292ZXIgZmFpbGVkIFtJbnZhbGlkIGNoYW5uZWwga2V5XVwiKSl9LE49ZnVuY3Rpb24oZSx0LG4pe2lmKGIub25Db25uZWN0PXQsYi5zb2NrZXQpe2lmKGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInJlY29ubmVjdFwifSksXCJyZXRyeVwiPT09Yi5yZWNvbm5lY3RNb2RlKW8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmV0cnkgY3VycmVudCBnYXRld2F5XCIpKSxiLnNvY2tldC5yZWNvbm5lY3QoKTtlbHNlIGlmKFwidHJ5TmV4dFwiPT09Yi5yZWNvbm5lY3RNb2RlKW8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVHJ5IG5leHQgZ2F0ZXdheVwiKSksYi5zb2NrZXQuY29ubmVjdE5leHQoKTtlbHNlIGlmKFwicmVjb3ZlclwiPT09Yi5yZWNvbm5lY3RNb2RlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFJlY292ZXIgZ2F0ZXdheVwiKSksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBUcnkgdG8gcmVjb25uZWN0IGNob29zZSBzZXJ2ZXIgYW5kIGdldCBnYXRld2F5IGxpc3QgYWdhaW4gXCIpKSxiLnJlY29ubmVjdGluZ0NTPSEwO3ZhciBhPWIuam9pbkluZm8mJmIuam9pbkluZm8uc2lkO2Z0KGIuam9pbkluZm8sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzZXNzaW9uOiAgXCIpLmNvbmNhdChhLFwiIGdldCBnYXRld2F5IGxpc3Qgc3VjY2Vzc1wiKSksYi5qb2luSW5mby5hcFJlc3BvbnNlPWUucmVzLGIucmVjb25uZWN0aW5nQ1M/Yi5zb2NrZXQucmVwbGFjZUhvc3QoZS5nYXRld2F5X2FkZHIpOm8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc2Vzc2lvbjogIFwiKS5jb25jYXQoYSxcIiBhbHJlYWR5IGxlYXZlXCIpKX0pfX1lbHNlIGM9ZS5nYXRld2F5QWRkcixiLnNvY2tldD1hdChjLHtzaWQ6Yi5qb2luSW5mby5zaWQsY2xpZW50SWQ6Yi5jbGllbnRJZH0pLGIuc29ja2V0Lm9uKFwic3RhcnQtY29ubmVjdGlvblwiLGZ1bmN0aW9uKGUpe2IudGlja2V0PWUmJmUubXNnJiZlLm1zZy50aWNrZXR9KSxiLnNvY2tldC5vbihcIm9uX3VwbGlua19zdGF0c1wiLGZ1bmN0aW9uKGUpe3ZhciB0PXt9O2Zvcih2YXIgbiBpbiBlKXRbeXQobildPWVbbl07aWYoYi5PdXRnb2luZ0F2YWlsYWJsZUJhbmR3aWR0aD10LnVwbGlua19hdmFpbGFibGVfYmFuZHdpZHRoLGIubG9jYWxTdHJlYW1zW2IudWlkXSl7dmFyIGk9Yi5sb2NhbFN0cmVhbXNbYi51aWRdLnVwbGlua1N0YXRzO2kmJmkucGVyaW9kX2Zpcj09PXQucGVyaW9kX2Zpcnx8by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXTogUGVyaW9kIGZpciBjaGFuZ2UgdG86IFwiKS5jb25jYXQodC5wZXJpb2RfZmlyKSksYi5sb2NhbFN0cmVhbXNbYi51aWRdLnVwbGlua1N0YXRzPXR9fSksYi5zb2NrZXQub24oXCJjb25uZWN0XCIsZnVuY3Rpb24oKXtiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjb25uZWN0ZWRcIn0pLGIuYXR0ZW1wcz0xLGIub25Db25uZWN0KCl9KSxiLnNvY2tldC5vbihcInJlY292ZXJcIixmdW5jdGlvbigpe2Iuc3RhdGU9XyxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFRyeSB0byByZWNvbm5lY3QgY2hvb3NlIHNlcnZlciBhbmQgZ2V0IGdhdGV3YXkgbGlzdCBhZ2FpbiBcIikpLGIucmVjb25uZWN0aW5nQ1M9ITAsYi5sZWF2ZU9uQ29ubmVjdGVkPW51bGw7dmFyIGU9Yi5qb2luSW5mbyYmYi5qb2luSW5mby5zaWQ7ZnQoYi5qb2luSW5mbyxmdW5jdGlvbih0KXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHNlc3Npb246ICBcIikuY29uY2F0KGUsXCIgZ2V0IGdhdGV3YXkgbGlzdCBzdWNjZXNzXCIpKSxiLnJlY29ubmVjdGluZ0NTP2Iuc29ja2V0LnJlcGxhY2VIb3N0KHQuZ2F0ZXdheV9hZGRyKTpvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHNlc3Npb246ICBcIikuY29uY2F0KGUsXCIgYWxyZWFkeSBsZWF2ZVwiKSl9KX0pLGIuc29ja2V0Lm9uKFwiZGlzY29ubmVjdFwiLGZ1bmN0aW9uKGUpe2lmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmVjZWl2ZSBkaXNjb25uZWN0IG1lc3NhZ2VcIikpLGIuc3RhdGUhPT1oKXtiLnN0YXRlPWg7dmFyIHQ9dSh7dHlwZTpcImVycm9yXCIscmVhc29uOlYuU09DS0VUX0RJU0NPTk5FQ1RFRH0pO2lmKGIuZGlzcGF0Y2hFdmVudCh0KSwwPT09Yi5wMnBzLnNpemU/Yi5yZWNvbm5lY3RNb2RlPVwidHJ5TmV4dFwiOmIucmVjb25uZWN0TW9kZT1cInJldHJ5XCIsTygpLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyJiZiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5kaXNwb3NlKCksYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXI9bnVsbCwxIT1pKXt2YXIgbixhPShuPWIuYXR0ZW1wcywxZTMqTWF0aC5taW4oMzAsTWF0aC5wb3coMixuKS0xKSk7aWYoby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBEaXNjb25uZWN0IGZyb20gc2VydmVyIFtcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGUpLFwiXSwgYXR0ZW1wdCB0byByZWNvdmVyIFsjXCIpLmNvbmNhdChiLmF0dGVtcHMsXCJdIGFmdGVyIFwiKS5jb25jYXQoYS8xZTMsXCIgc2Vjb25kc1wiKSksYi5oYXNJbnZva2VMZWF2ZSlyZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBObyByZWNvbm5lY3Rpb24gYmVjYXNlIGNsaWVudC5sZWF2ZSBoYXMgYmVlbiBpbnZva2VkXCIpKSx2b2lkKGIuaGFzSW52b2tlTGVhdmU9ITEpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXtiLmF0dGVtcHMrKyxiLnN0YXRlPV8sYi5pbkNoYW5uZWxJbmZvJiZEYXRlLm5vdygpLWIuaW5DaGFubmVsSW5mby5qb2luQXQ+T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlRJQ0tFVF9SRU5FV19USU1FT1VUXCIpPyhvLmRlZmF1bHQuZGVidWcoXCJSZWNvdmVyaW5nIHRvIHJlbmV3IHRpY2tldFwiKSxBKCkpOkMoKX0sYSl9fX0pLGIuc29ja2V0Lm9uKFwib25fYWRkX2F1ZGlvX3N0cmVhbVwiLGZ1bmN0aW9uKGUpe2lmKG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBOZXdseSBhZGRlZCBhdWRpbyBzdHJlYW0gd2l0aCB1aWQgXCIpLmNvbmNhdChlLnVpZCkpLGIuam9pbkluZm8uc3RyaW5nVWlkJiZcInN0cmluZ1wiIT10eXBlb2YgZS51aWQmJm8uZGVmYXVsdC5lcnJvcihcIlN0cmluZ1VJRCBpcyBNaXhlZCB3aXRoIFVpbnRVSURcIiksYi5yZW1vdGVTdHJlYW1zSW5DaGFubmVsLmhhcyhlLnVpZCl8fGIucmVtb3RlU3RyZWFtc0luQ2hhbm5lbC5hZGQoZS51aWQpLHZvaWQgMD09PWIucmVtb3RlU3RyZWFtc1tlLnVpZF0pe3ZhciB0PVllKHtzdHJlYW1JRDplLnVpZCxsb2NhbDohMSxhdWRpbzplLmF1ZGlvLHZpZGVvOmUudmlkZW99KTt0LnBlZXJNdXRlVmlkZW89ITAsYi5yZW1vdGVTdHJlYW1zW2UudWlkXT10O3ZhciBuPXUoe3R5cGU6XCJzdHJlYW0tYWRkZWRcIixzdHJlYW06dH0pO2IuZGlzcGF0Y2hFdmVudChuKTt2YXIgaT1iLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF07aWYoaSYmaS5hdWRpbyl7bj1sKHt0eXBlOlwibXV0ZS1hdWRpb1wiLHVpZDplLnVpZH0pO2IuZGlzcGF0Y2hFdmVudChuKX1pZihpJiZpLnZpZGVvKXtuPWwoe3R5cGU6XCJtdXRlLXZpZGVvXCIsdWlkOmUudWlkfSk7Yi5kaXNwYXRjaEV2ZW50KG4pfX19KSxiLnNvY2tldC5vbihcIm9uX3VwZGF0ZV9zdHJlYW1cIixmdW5jdGlvbihlKXt2YXIgdD1iLnJlbW90ZVN0cmVhbXNbZS51aWRdO2lmKGIuam9pbkluZm8uc3RyaW5nVWlkJiZcInN0cmluZ1wiIT10eXBlb2YgZS51aWQmJm8uZGVmYXVsdC5lcnJvcihcIlN0cmluZ1VJRCBpcyBNaXhlZCB3aXRoIFVpbnRVSURcIiksdCl7dC5hdWRpbz1lLmF1ZGlvLHQudmlkZW89ZS52aWRlbyx0LnNjcmVlbj1lLnNjcmVlbix0LnBjJiZiLl9hZGp1c3RQQ011dGVTdGF0dXModCk7dmFyIG49dSh7dHlwZTpcInN0cmVhbS11cGRhdGVkXCIsc3RyZWFtOnR9KTtiLmRpc3BhdGNoRXZlbnQobil9ZWxzZSBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIElnbm9yaW5nIG9uVXBkYXRlU3RyZWFtIGV2ZW50IGJlZm9yZSBvbkFkZFN0cmVhbSBmb3IgdWlkIFwiKS5jb25jYXQoZS51aWQpKX0pLGIuc29ja2V0Lm9uKFwib25fYWRkX3ZpZGVvX3N0cmVhbVwiLGZ1bmN0aW9uKGUpe2lmKG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBOZXdseSBhZGRlZCByZW1vdGUgc3RyZWFtIHdpdGggdWlkIFwiKS5jb25jYXQoZS51aWQsXCIuXCIpKSxiLmpvaW5JbmZvLnN0cmluZ1VpZCYmXCJzdHJpbmdcIiE9dHlwZW9mIGUudWlkJiZvLmRlZmF1bHQuZXJyb3IoXCJTdHJpbmdVSUQgaXMgTWl4ZWQgd2l0aCBVaW50VUlEXCIpLGIucmVtb3RlU3RyZWFtc0luQ2hhbm5lbC5oYXMoZS51aWQpfHxiLnJlbW90ZVN0cmVhbXNJbkNoYW5uZWwuYWRkKGUudWlkKSx2b2lkIDA9PT1iLnJlbW90ZVN0cmVhbXNbZS51aWRdKXt2YXIgdD1ZZSh7c3RyZWFtSUQ6ZS51aWQsbG9jYWw6ITEsYXVkaW86ZS5hdWRpbyx2aWRlbzplLnZpZGVvfSk7Yi5yZW1vdGVTdHJlYW1zW2UudWlkXT10O3ZhciBuPXUoe3R5cGU6XCJzdHJlYW0tYWRkZWRcIixzdHJlYW06dH0pO2IuZGlzcGF0Y2hFdmVudChuKTt2YXIgaT1iLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF07aWYoaSYmaS5hdWRpbyl7bj1sKHt0eXBlOlwibXV0ZS1hdWRpb1wiLHVpZDplLnVpZH0pO2IuZGlzcGF0Y2hFdmVudChuKX1pZihpJiZpLnZpZGVvKXtuPWwoe3R5cGU6XCJtdXRlLXZpZGVvXCIsdWlkOmUudWlkfSk7Yi5kaXNwYXRjaEV2ZW50KG4pfX1lbHNle3ZhciBhPWIucmVtb3RlU3RyZWFtc1tlLnVpZF07aWYodm9pZCAwIT09YS5zdHJlYW0pe2lmKCh0PWIucmVtb3RlU3RyZWFtc1tlLnVpZF0pLnZpZGVvPSEwLHQucGVlck11dGVWaWRlbz0hMSx0LnBjJiZiLl9hZGp1c3RQQ011dGVTdGF0dXModCksby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFN0cmVhbSBjaGFuZ2VkOiBlbmFibGUgdmlkZW8gXCIpLmNvbmNhdChlLnVpZCkpLHQuaXNQbGF5aW5nKCkpe3ZhciByPXQucGxheWVyLmVsZW1lbnRJRDt0LnN0b3AoKSx0LnBsYXkocix0LnBsYXlPcHRpb25zKX19ZWxzZSBpZihhLnAycElkKWIucmVtb3RlU3RyZWFtc1tlLnVpZF0udmlkZW89ITA7ZWxzZXt0PVllKHtzdHJlYW1JRDplLnVpZCxsb2NhbDohMSxhdWRpbzohMCx2aWRlbzohMH0pO2IucmVtb3RlU3RyZWFtc1tlLnVpZF09dCxvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU3RyZWFtIGNoYW5nZWQ6IG1vZGlmeSB2aWRlbyBcIikuY29uY2F0KGUudWlkKSl9fX0pLGIuc29ja2V0Lm9uKFwib25fcmVtb3ZlX3N0cmVhbVwiLGZ1bmN0aW9uKGUpe2IucmVtb3RlU3RyZWFtc0luQ2hhbm5lbC5oYXMoZS51aWQpJiZiLnJlbW90ZVN0cmVhbXNJbkNoYW5uZWwuZGVsZXRlKGUudWlkKTt2YXIgdD1iLnJlbW90ZVN0cmVhbXNbZS51aWRdO2lmKHQpe2RlbGV0ZSBiLnJlbW90ZVN0cmVhbXNbZS51aWRdLGRlbGV0ZSBiLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF07dmFyIG49dSh7dHlwZTpcInN0cmVhbS1yZW1vdmVkXCIsc3RyZWFtOnR9KTtiLmRpc3BhdGNoRXZlbnQobiksdC5jbG9zZSgpLHZvaWQgMCE9PXQucGMmJih0LnBjLmNsb3NlKCksdC5wYz12b2lkIDAsYi5wMnBzLmRlbGV0ZSh0LnAycElkKSl9ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJFUlJPUiBzdHJlYW0gXCIsZS51aWQsXCIgbm90IGZvdW5kIG9uUmVtb3ZlU3RyZWFtIFwiLGUpfSksYi5zb2NrZXQub24oXCJvbl9wdWJsaXNoX3N0cmVhbVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWIubG9jYWxTdHJlYW1zW2UudWlkXSxuPXUoe3R5cGU6XCJzdHJlYW1QdWJsaXNoZWRcIixzdHJlYW06dH0pO2IuZGlzcGF0Y2hFdmVudChuKX0pLGIuc29ja2V0Lm9uKFwibXV0ZV9hdWRpb1wiLGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSByY3YgcGVlciBtdXRlIGF1ZGlvOiBcIikuY29uY2F0KGUudWlkKSksYi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdPWIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXXx8e2F1ZGlvOiExLHZpZGVvOiExfSxiLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF0uYXVkaW89ITA7dmFyIHQ9bCh7dHlwZTpcIm11dGUtYXVkaW9cIix1aWQ6ZS51aWR9KSxuPWIucmVtb3RlU3RyZWFtc1tlLnVpZF07bj8obi5wZWVyTXV0ZUF1ZGlvPSEwLG4ucGMmJmIuX2FkanVzdFBDTXV0ZVN0YXR1cyhuKSxiLmRpc3BhdGNoRXZlbnQodCkpOm8uZGVmYXVsdC5kZWJ1ZyhcIklnbm9yaW5nIGV2ZW50IFwiLmNvbmNhdChlLnR5cGUpLGUpfSksYi5zb2NrZXQub24oXCJ1bm11dGVfYXVkaW9cIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcmN2IHBlZXIgdW5tdXRlIGF1ZGlvOiBcIikuY29uY2F0KGUudWlkKSksYi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdPWIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXXx8e2F1ZGlvOiExLHZpZGVvOiExfSxiLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF0uYXVkaW89ITE7dmFyIHQ9bCh7dHlwZTpcInVubXV0ZS1hdWRpb1wiLHVpZDplLnVpZH0pLG49Yi5yZW1vdGVTdHJlYW1zW2UudWlkXTtuPyhuLnBlZXJNdXRlQXVkaW89ITEsbi5wYyYmYi5fYWRqdXN0UENNdXRlU3RhdHVzKG4pLGIuZGlzcGF0Y2hFdmVudCh0KSk6by5kZWZhdWx0LmRlYnVnKFwiSWdub3JpbmcgZXZlbnQgXCIuY29uY2F0KGUudHlwZSksZSl9KSxiLnNvY2tldC5vbihcIm11dGVfdmlkZW9cIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcmN2IHBlZXIgbXV0ZSB2aWRlbzogXCIpLmNvbmNhdChlLnVpZCkpLGIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXT1iLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF18fHthdWRpbzohMSx2aWRlbzohMX0sYi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdLnZpZGVvPSEwO3ZhciB0PWwoe3R5cGU6XCJtdXRlLXZpZGVvXCIsdWlkOmUudWlkfSksbj1iLnJlbW90ZVN0cmVhbXNbZS51aWRdO24/KG4ucGVlck11dGVWaWRlbz0hMCxuLnBjJiZiLl9hZGp1c3RQQ011dGVTdGF0dXMobiksYi5kaXNwYXRjaEV2ZW50KHQpKTpvLmRlZmF1bHQuZGVidWcoXCJJZ25vcmluZyBldmVudCBcIi5jb25jYXQoZS50eXBlKSxlKX0pLGIuc29ja2V0Lm9uKFwidW5tdXRlX3ZpZGVvXCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHJjdiBwZWVyIHVubXV0ZSB2aWRlbzogXCIpLmNvbmNhdChlLnVpZCkpLGIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXT1iLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF18fHthdWRpbzohMSx2aWRlbzohMX0sYi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdLnZpZGVvPSExO3ZhciB0PWwoe3R5cGU6XCJ1bm11dGUtdmlkZW9cIix1aWQ6ZS51aWR9KSxuPWIucmVtb3RlU3RyZWFtc1tlLnVpZF07bj8obi5wZWVyTXV0ZVZpZGVvPSExLG4ucGMmJmIuX2FkanVzdFBDTXV0ZVN0YXR1cyhuKSxiLmRpc3BhdGNoRXZlbnQodCkpOm8uZGVmYXVsdC5kZWJ1ZyhcIklnbm9yaW5nIGV2ZW50IFwiLmNvbmNhdChlLnR5cGUpLGUpfSksYi5zb2NrZXQub24oXCJvbl9jcnlwdF9lcnJvclwiLGZ1bmN0aW9uKGUpe28uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzdHJlYW0gY3J5cHQgZXJyb3JcIikpO3ZhciB0PWwoe3R5cGU6XCJjcnlwdC1lcnJvclwiLGNyeXB0VHlwZTplLmNyeXB0X3R5cGV9KTtiLmRpc3BhdGNoRXZlbnQodCl9KSxiLnNvY2tldC5vbihcIm9uX3VzZXJfYmFubmVkXCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHVzZXIgYmFubmVkIHVpZDogXCIpLmNvbmNhdChlLnVpZCxcIiBlcnJvcjogXCIpLmNvbmNhdChlLmVycm9yX2NvZGUpKTt2YXIgdD1sKHt0eXBlOlwiY2xpZW50LWJhbm5lZFwiLHVpZDplLnVpZCxhdHRyOmUuZXJyb3JfY29kZX0pO2IuZGlzcGF0Y2hFdmVudCh0KSxpPSEwfSksYi5zb2NrZXQub24oXCJvbl9zdHJlYW1fZmFsbGJhY2tfdXBkYXRlXCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHN0cmVhbSBmYWxsYmFjayBwZWVySWQ6IFwiKS5jb25jYXQoZS5zdHJlYW1faWQsXCIgdHlwZTogXCIpLmNvbmNhdChlLnN0cmVhbV90eXBlKSk7dmFyIHQ9bCh7dHlwZTpcInN0cmVhbS1mYWxsYmFja1wiLHVpZDplLnN0cmVhbV9pZCxzdHJlYW06ZS5zdHJlYW1faWQsYXR0cjplLnN0cmVhbV90eXBlfSk7Yi5kaXNwYXRjaEV2ZW50KHQpfSksYi5zb2NrZXQub24oXCJzdHJlYW1fcmVjb3ZlclwiLGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzdHJlYW0gcmVjb3ZlciB1aWQ6IFwiKS5jb25jYXQoZS5pZCxcIiBwZWVySWQ6IFwiKS5jb25jYXQoZS5wZWVyaWQsXCIgdHlwZTogXCIpLmNvbmNhdChlLnR5cGUpKTt2YXIgdD1sKHt0eXBlOlwic3RyZWFtLXJlY292ZXJcIix1aWQ6ZS5pZCxzdHJlYW06ZS5wZWVyaWQsYXR0cjplLnR5cGV9KTtiLmRpc3BhdGNoRXZlbnQodCl9KSxiLnNvY2tldC5vbihcIm9uX3AycF9sb3N0XCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBwMnBsb3N0OiBcIiksZSxcInAycHM6XCIsYi5wMnBzKTt2YXIgdCxuPVwiRFRMUyBmYWlsZWRcIjsodD1iLmxvY2FsU3RyZWFtc1tlLnVpZF18fGIucmVtb3RlU3RyZWFtc1tlLnVpZF0pPyh0LnBjJiZ0LnBjLm9mZmVyQ2FuZGlkYXRlcyYmMD09PXQucGMub2ZmZXJDYW5kaWRhdGVzLmxlbmd0aCYmKG49XCJOT19DQU5ESURBVEVTX0lOX09GRkVSXCIpLFwicHVibGlzaFwiPT09ZS5ldmVudCYmcy5iLnB1Ymxpc2goYi5qb2luSW5mby5zaWQse2x0czp0LnB1Ymxpc2hMVFMsc3VjYzohMSxhdWRpb05hbWU6dC5oYXNBdWRpbygpJiZ0LmF1ZGlvTmFtZSx2aWRlb05hbWU6dC5oYXNWaWRlbygpJiZ0LnZpZGVvTmFtZSxzY3JlZW5OYW1lOnQuaGFzU2NyZWVuKCkmJnQuc2NyZWVuTmFtZSxlYzpufSksXCJzdWJzY3JpYmVcIj09PWUuZXZlbnQmJnMuYi5zdWJzY3JpYmUoYi5qb2luSW5mby5zaWQse2x0czp0LnN1YnNjcmliZUxUUyxzdWNjOiExLHZpZGVvOnQuc3Vic2NyaWJlT3B0aW9ucyYmdC5zdWJzY3JpYmVPcHRpb25zLnZpZGVvLGF1ZGlvOnQuc3Vic2NyaWJlT3B0aW9ucyYmdC5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHBlZXJpZDplLnVpZCtcIlwiLGVjOm59KSk6by5kZWZhdWx0Lndhcm5pbmcoXCJQMlBMb3N0IFN0cmVhbSBOb3QgZm91bmRcIixlKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHAycGxvc3Q6XCIpLGUucDJwaWQpLCh0PWIucDJwcy5nZXQoZS5wMnBpZCkpJiYoYi5wMnBzLmRlbGV0ZShlLnAycGlkKSx0LmxvY2FsP2IuZGlzcGF0Y2hFdmVudChsKHt0eXBlOlwicHViUDJQTG9zdFwiLHN0cmVhbTp0LGF0dHI6bn0pKTpiLnJlbW90ZVN0cmVhbXNbdC5nZXRJZCgpXSYmYi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJzdWJQMlBMb3N0XCIsc3RyZWFtOnQsYXR0cjpufSkpKX0pLGIuc29ja2V0Lm9uKFwib25fdG9rZW5fcHJpdmlsZWdlX3dpbGxfZXhwaXJlXCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZWNlaXZlZCBNZXNzYWdlIG9uVG9rZW5Qcml2aWxlZ2VXaWxsRXhwaXJlXCIpKSxiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcIm9uVG9rZW5Qcml2aWxlZ2VXaWxsRXhwaXJlXCJ9KSl9KSxiLnNvY2tldC5vbihcIm9uX3Rva2VuX3ByaXZpbGVnZV9kaWRfZXhwaXJlXCIsZnVuY3Rpb24oKXtvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmVjZWl2ZWQgTWVzc2FnZSBvblRva2VuUHJpdmlsZWdlRGlkRXhwaXJlLCBwbGVhc2UgZ2V0IG5ldyB0b2tlbiBhbmQgam9pbiBhZ2FpblwiKSksYi5jbG9zZUdhdGV3YXkoKSxiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcIm9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmVcIn0pKX0pLGIuc29ja2V0Lm9uKFwiZW5hYmxlX2xvY2FsX3ZpZGVvXCIsZnVuY3Rpb24oZSl7Yi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJlbmFibGUtbG9jYWwtdmlkZW9cIix1aWQ6ZS51aWR9KSl9KSxiLnNvY2tldC5vbihcImRpc2FibGVfbG9jYWxfdmlkZW9cIixmdW5jdGlvbihlKXtiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcImRpc2FibGUtbG9jYWwtdmlkZW9cIix1aWQ6ZS51aWR9KSl9KSxiLl9kb1dpdGhBY3Rpb249ZnVuY3Rpb24oZSx0LG4pe1widHJ5TmV4dFwiPT09ZT9mdW5jdGlvbihlLHQpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ29ubmVjdCBuZXh0IGdhdGV3YXlcIikpLGIuc3RhdGU9aCxiLnNvY2tldC5jbG9zZSgpLE8oKSxiLnJlY29ubmVjdE1vZGU9XCJ0cnlOZXh0XCIsQyhlLHQpfSh0LG4pOlwicmV0cnlcIj09PWU/ZnVuY3Rpb24oZSx0KXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFJlY29ubmVjdCBnYXRld2F5XCIpKSxiLnN0YXRlPWgsYi5zb2NrZXQuY2xvc2UoKSxPKCksYi5yZWNvbm5lY3RNb2RlPVwicmV0cnlcIixDKGUsdCl9KHQsbik6XCJxdWl0XCI9PT1lPyhvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHF1aXQgZ2F0ZXdheVwiKSksYi5zdGF0ZT1oLGIuc29ja2V0LmNsb3NlKCksTygpKTpcInJlY292ZXJcIj09PWUmJkEoKX0sYi5zb2NrZXQub24oXCJvbl9ub3RpZmljYXRpb25cIixmdW5jdGlvbihlKXtpZihvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFJlY2VpdmUgbm90aWZpY2F0aW9uOiBcIiksZSksXCJFUlJfSk9JTl9CWV9NVUxUSV9JUFwiPT09eVtlLmNvZGVdKXJldHVybiBiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJvbk11bHRpSVBcIixvcHRpb246ZS5vcHRpb259KTtlLmRldGFpbD9iLl9kb1dpdGhBY3Rpb24odnRbeVtlLmNvZGVdXSk6ZS5hY3Rpb24mJmIuX2RvV2l0aEFjdGlvbihlLmFjdGlvbil9KSxiLnNvY2tldC5vbihcIm9uX3VzZXJfb2ZmbGluZVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWwoe3R5cGU6XCJwZWVyLWxlYXZlXCIsdWlkOmUudWlkfSk7aWYoYi5yZW1vdGVTdHJlYW1zSW5DaGFubmVsLmhhcyhlLnVpZCkmJmIucmVtb3RlU3RyZWFtc0luQ2hhbm5lbC5kZWxldGUoZS51aWQpLGIucmVtb3RlU3RyZWFtcy5oYXNPd25Qcm9wZXJ0eShlLnVpZCkmJih0LnN0cmVhbT1iLnJlbW90ZVN0cmVhbXNbZS51aWRdKSx0LnJlYXNvbj1lLnJlYXNvbixiLmRpc3BhdGNoRXZlbnQodCksYi5yZW1vdGVTdHJlYW1zLmhhc093blByb3BlcnR5KGUudWlkKSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIGNsb3Npbmcgc3RyZWFtIG9uIHBlZXIgbGVhdmVcIiksZS51aWQpO3ZhciBuPWIucmVtb3RlU3RyZWFtc1tlLnVpZF07bi5jbG9zZSgpLGRlbGV0ZSBiLnJlbW90ZVN0cmVhbXNbZS51aWRdLHZvaWQgMCE9PW4ucGMmJihuLnBjLmNsb3NlKCksbi5wYz12b2lkIDAsYi5wMnBzLmRlbGV0ZShuLnAycElkKSl9Yi50aW1lcnMuaGFzT3duUHJvcGVydHkoZS51aWQpJiYoY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLnVpZF0pLGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS51aWRdK1wiX1JlbGF0ZWRTdGF0c1wiKSxkZWxldGUgYi50aW1lcnNbZS51aWRdKSxudWxsIT1iLmF1ZGlvTGV2ZWxbZS51aWRdJiZkZWxldGUgYi5hdWRpb0xldmVsW2UudWlkXSxudWxsIT1iLnRpbWVyX2NvdW50ZXJbZS51aWRdJiZkZWxldGUgYi50aW1lcl9jb3VudGVyW2UudWlkXX0pLGIuc29ja2V0Lm9uKFwib25VcGxpbmtTdGF0c1wiLGZ1bmN0aW9uKGUpe30pLGIuc29ja2V0Lm9uKFwibGl2ZVN0cmVhbWluZ1N0YXJ0ZWRcIixmdW5jdGlvbihlKXt2YXIgdD1mKHt0eXBlOlwibGl2ZVN0cmVhbWluZ1N0YXJ0ZWRcIix1cmw6ZS51cmx9KTtiLmRpc3BhdGNoRXZlbnQodCl9KSxiLnNvY2tldC5vbihcImxpdmVTdHJlYW1pbmdGYWlsZWRcIixmdW5jdGlvbihlKXt2YXIgdD1mKHt0eXBlOlwibGl2ZVN0cmVhbWluZ0ZhaWxlZFwiLHVybDplLnVybH0pO2IuZGlzcGF0Y2hFdmVudCh0KX0pLGIuc29ja2V0Lm9uKFwibGl2ZVN0cmVhbWluZ1N0b3BwZWRcIixmdW5jdGlvbihlKXt2YXIgdD1mKHt0eXBlOlwibGl2ZVN0cmVhbWluZ1N0b3BwZWRcIix1cmw6ZS51cmx9KTtiLmRpc3BhdGNoRXZlbnQodCl9KSxiLnNvY2tldC5vbihcImxpdmVUcmFuc2NvZGluZ1VwZGF0ZWRcIixmdW5jdGlvbihlKXt2YXIgdD1mKHt0eXBlOlwibGl2ZVRyYW5zY29kaW5nVXBkYXRlZFwiLHJlYXNvbjplLnJlYXNvbn0pO2IuZGlzcGF0Y2hFdmVudCh0KX0pLGIuc29ja2V0Lm9uKFwic3RyZWFtSW5qZWN0ZWRTdGF0dXNcIixmdW5jdGlvbihlKXt2YXIgdD1mKHt0eXBlOlwic3RyZWFtSW5qZWN0ZWRTdGF0dXNcIix1cmw6ZS51cmwsdWlkOmUudWlkLHN0YXR1czplLnN0YXR1c30pO2IuZGlzcGF0Y2hFdmVudCh0KX0pLGIuc29ja2V0Lm9uKFwib25fdXNlcl9vbmxpbmVcIixmdW5jdGlvbihlKXtiLmpvaW5JbmZvLnN0cmluZ1VpZCYmXCJzdHJpbmdcIiE9dHlwZW9mIGUudWlkJiZvLmRlZmF1bHQuZXJyb3IoXCJTdHJpbmdVSUQgaXMgTWl4ZWQgd2l0aCBVaW50VUlEXCIpLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInBlZXItb25saW5lXCIsdWlkOmUudWlkfSl9KTt2YXIgY30sdz1mdW5jdGlvbihlLHQpe2lmKHZvaWQgMCE9PWIuc29ja2V0KXRyeXtiLnNvY2tldC5lbWl0U2ltcGxlTWVzc2FnZShlLGZ1bmN0aW9uKGUsbil7dCYmdChlLG4pfSl9Y2F0Y2goZSl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBFcnJvciBpbiBzZW5kU2ltcGxlU2RwIFtcIikuY29uY2F0KGUsXCJdXCIpKX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gRXJyb3IgaW4gc2VuZFNpbXBsZVNkcCBbc29ja2V0IG5vdCByZWFkeV1cIikpfSxrPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGIubG9jYWxTdHJlYW1zKWlmKHZvaWQgMCE9PWIubG9jYWxTdHJlYW1zW2VdKXt2YXIgdD1iLmxvY2FsU3RyZWFtc1tlXTtkZWxldGUgYi5sb2NhbFN0cmVhbXNbZV0sdm9pZCAwIT09dC5wYyYmKHQucGMuY2xvc2UoKSx0LnBjPXZvaWQgMCl9fSxEPWZ1bmN0aW9uKCl7Zm9yKHZhciBlIGluIGIucmVtb3RlU3RyZWFtc0luQ2hhbm5lbC5jbGVhcigpLGIucmVtb3RlU3RyZWFtcylpZihiLnJlbW90ZVN0cmVhbXMuaGFzT3duUHJvcGVydHkoZSkpe3ZhciB0PWIucmVtb3RlU3RyZWFtc1tlXTt0LmlzUGxheWluZygpJiZ0LnN0b3AoKSx0LmNsb3NlKCksZGVsZXRlIGIucmVtb3RlU3RyZWFtc1tlXSx2b2lkIDAhPT10LnBjJiYodC5wYy5jbG9zZSgpLHQucGM9dm9pZCAwKX19O3JldHVybiBifSxidD17X2dhdGV3YXlDbGllbnRzOnt9LHJlZ2lzdGVyOmZ1bmN0aW9uKGUsdCl7aWYoIXQudWlkKXt2YXIgbj1cIk5PX1VJRF9QUk9WSURFRFwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFwiKSxuLHQpLG59aWYodC5jbmFtZSl7aWYodGhpcy5fZ2F0ZXdheUNsaWVudHNbdC5jbmFtZV0mJnRoaXMuX2dhdGV3YXlDbGllbnRzW3QuY25hbWVdW3QudWlkXSYmdGhpcy5fZ2F0ZXdheUNsaWVudHNbdC5jbmFtZV1bdC51aWRdIT09ZSl7bj1cIlVJRF9DT05GTElDVFwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFwiKSxuLHQpLG59cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gcmVnaXN0ZXIgY2xpZW50IENoYW5uZWxcIiksdC5jbmFtZSxcIlVpZFwiLHQudWlkKSx0aGlzLl9nYXRld2F5Q2xpZW50c1t0LmNuYW1lXXx8KHRoaXMuX2dhdGV3YXlDbGllbnRzW3QuY25hbWVdPXt9KSx0aGlzLl9nYXRld2F5Q2xpZW50c1t0LmNuYW1lXVt0LnVpZF09ZSxudWxsfXZhciBuPVwiTk9fQ0hBTk5FTF9QUk9WSURFRFwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFwiKSxuLHQpLG59LHVucmVnaXN0ZXI6ZnVuY3Rpb24oZSl7dmFyIHQ9ZSYmZS51aWQsbj1lLmpvaW5JbmZvJiZlLmpvaW5JbmZvLmNuYW1lO2lmKCF0fHwhbil7dmFyIGk9XCJJTlZBTElEX0dBVEVXQVlDTElFTlRcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBcIiksaSksaX1pZih0aGlzLl9nYXRld2F5Q2xpZW50c1tuXSYmdGhpcy5fZ2F0ZXdheUNsaWVudHNbbl1bdF0pe2lmKHRoaXMuX2dhdGV3YXlDbGllbnRzW25dW3RdIT09ZSl7aT1cIkdBVEVXQVlDTElFTlRfVUlEX0NPTkZMSUNUXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gXCIpLGkpLGl9cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gdW5yZWdpc3RlciBjbGllbnQgXCIpLGUudWlkKSxkZWxldGUgdGhpcy5fZ2F0ZXdheUNsaWVudHNbbl1bdF0sbnVsbH12YXIgaT1cIkdBVEVXRUFZX0NMSUVOVF9VTlJFR0lTVEVSRURcIjtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFwiKSxpKX19O1R0LkRJU0NPTk5FQ1RFRD0wLFR0LkNPTk5FQ1RJTkc9MSxUdC5DT05ORUNURUQ9MixUdC5ESVNDT05ORUNUSU5HPTMsVHQuY29ubmV0aW9uU3RhdGVNYXA9ezA6XCJESVNDT05ORUNURURcIiwxOlwiQ09OTkVDVElOR1wiLDI6XCJDT05ORUNURURcIiwzOlwiRElTQ09OTkVDVElOR1wifTt2YXIgUnQ9VHQsQXQ9ZnVuY3Rpb24oZSl7dmFyIHQ7c3dpdGNoKGUpe2Nhc2VcIjEyMHBcIjpjYXNlXCIxMjBwXzFcIjp0PVtcIjEyMHBfMVwiLFwiMTIwcF8xXCIsXCIxMjBwXzFcIl07YnJlYWs7Y2FzZVwiMTIwcF8zXCI6dD1bXCIxMjBwXzNcIixcIjEyMHBfM1wiLFwiMTIwcF8zXCJdO2JyZWFrO2Nhc2VcIjE4MHBcIjpjYXNlXCIxODBwXzFcIjp0PVtcIjkwcF8xXCIsXCI5MHBfMVwiLFwiMTgwcF8xXCJdO2JyZWFrO2Nhc2VcIjE4MHBfM1wiOnQ9W1wiMTIwcF8zXCIsXCIxMjBwXzNcIixcIjE4MHBfM1wiXTticmVhaztjYXNlXCIxODBwXzRcIjp0PVtcIjEyMHBfMVwiLFwiMTIwcF8xXCIsXCIxODBwXzRcIl07YnJlYWs7Y2FzZVwiMjQwcFwiOmNhc2VcIjI0MHBfMVwiOnQ9W1wiMTIwcF8xXCIsXCIxMjBwXzFcIixcIjI0MHBfMVwiXTticmVhaztjYXNlXCIyNDBwXzNcIjp0PVtcIjEyMHBfM1wiLFwiMTIwcF8zXCIsXCIyNDBwXzNcIl07YnJlYWs7Y2FzZVwiMjQwcF80XCI6dD1bXCIxMjBwXzRcIixcIjEyMHBfNFwiLFwiMjQwcF80XCJdO2JyZWFrO2Nhc2VcIjM2MHBcIjpjYXNlXCIzNjBwXzFcIjpjYXNlXCIzNjBwXzRcIjpjYXNlXCIzNjBwXzlcIjpjYXNlXCIzNjBwXzEwXCI6Y2FzZVwiMzYwcF8xMVwiOnQ9W1wiOTBwXzFcIixcIjkwcF8xXCIsXCIzNjBwXzFcIl07YnJlYWs7Y2FzZVwiMzYwcF8zXCI6Y2FzZVwiMzYwcF82XCI6dD1bXCIxMjBwXzNcIixcIjEyMHBfM1wiLFwiMzYwcF8zXCJdO2JyZWFrO2Nhc2VcIjM2MHBfN1wiOmNhc2VcIjM2MHBfOFwiOnQ9W1wiMTIwcF8xXCIsXCIxMjBwXzFcIixcIjM2MHBfN1wiXTticmVhaztjYXNlXCI0ODBwXCI6Y2FzZVwiNDgwcF8xXCI6Y2FzZVwiNDgwcF8yXCI6Y2FzZVwiNDgwcF80XCI6Y2FzZVwiNDgwcF8xMFwiOnQ9W1wiMTIwcF8xXCIsXCIxMjBwXzFcIixcIjQ4MHBfMVwiXTticmVhaztjYXNlXCI0ODBwXzNcIjpjYXNlXCI0ODBwXzZcIjp0PVtcIjEyMHBfM1wiLFwiMTIwcF8zXCIsXCI0ODBwXzNcIl07YnJlYWs7Y2FzZVwiNDgwcF84XCI6Y2FzZVwiNDgwcF85XCI6dD1bXCIxMjBwXzRcIixcIjEyMHBfNFwiLFwiNDgwcF84XCJdO2JyZWFrO2Nhc2VcIjcyMHBcIjpjYXNlXCI3MjBwXzFcIjpjYXNlXCI3MjBwXzJcIjpjYXNlXCI3MjBwXzNcIjp0PVtcIjkwcF8xXCIsXCI5MHBfMVwiLFwiNzIwcF8xXCJdO2JyZWFrO2Nhc2VcIjcyMHBfNVwiOmNhc2VcIjcyMHBfNlwiOnQ9W1wiMTIwcF8xXCIsXCIxMjBwXzFcIixcIjcyMHBfNVwiXTticmVhaztjYXNlXCIxMDgwcFwiOmNhc2VcIjEwODBwXzFcIjpjYXNlXCIxMDgwcF8yXCI6Y2FzZVwiMTA4MHBfM1wiOmNhc2VcIjEwODBwXzVcIjp0PVtcIjkwcF8xXCIsXCI5MHBfMVwiLFwiMTA4MHBfMVwiXTticmVhaztjYXNlXCIxNDQwcFwiOmNhc2VcIjE0NDBwXzFcIjpjYXNlXCIxNDQwcF8yXCI6dD1bXCI5MHBfMVwiLFwiOTBwXzFcIixcIjE0NDBwXzFcIl07YnJlYWs7Y2FzZVwiNGtcIjpjYXNlXCI0a18xXCI6Y2FzZVwiNGtfM1wiOnQ9W1wiOTBwXzFcIixcIjkwcF8xXCIsXCI0a18xXCJdO2JyZWFrO2RlZmF1bHQ6dD1bXCIxMjBwXzFcIixcIjEyMHBfMVwiLFwiMzYwcF83XCJdfXJldHVybiBPYmplY3QobS5pc09wZXJhKSgpP1tlLDE1LDUwXTpPYmplY3QobS5pc0ZpcmVGb3gpKCk/W3RbMV0sMTUsMTAwXTpPYmplY3QobS5pc1NhZmFyaSkoKT9bdFsyXSwxNSw1MF06W3RbMF0sMTUsNTBdfSxPdD17MTAwMTpcIkZSQU1FUkFURV9JTlBVVF9UT09fTE9XXCIsMTAwMjpcIkZSQU1FUkFURV9TRU5UX1RPT19MT1dcIiwxMDAzOlwiU0VORF9WSURFT19CSVRSQVRFX1RPT19MT1dcIiwxMDA1OlwiUkVDVl9WSURFT19ERUNPREVfRkFJTEVEXCIsMjAwMTpcIkFVRElPX0lOUFVUX0xFVkVMX1RPT19MT1dcIiwyMDAyOlwiQVVESU9fT1VUUFVUX0xFVkVMX1RPT19MT1dcIiwyMDAzOlwiU0VORF9BVURJT19CSVRSQVRFX1RPT19MT1dcIiwyMDA1OlwiUkVDVl9BVURJT19ERUNPREVfRkFJTEVEXCIsMzAwMTpcIkZSQU1FUkFURV9JTlBVVF9UT09fTE9XX1JFQ09WRVJcIiwzMDAyOlwiRlJBTUVSQVRFX1NFTlRfVE9PX0xPV19SRUNPVkVSXCIsMzAwMzpcIlNFTkRfVklERU9fQklUUkFURV9UT09fTE9XX1JFQ09WRVJcIiwzMDA1OlwiUkVDVl9WSURFT19ERUNPREVfRkFJTEVEX1JFQ09WRVJcIiw0MDAxOlwiQVVESU9fSU5QVVRfTEVWRUxfVE9PX0xPV19SRUNPVkVSXCIsNDAwMjpcIkFVRElPX09VVFBVVF9MRVZFTF9UT09fTE9XX1JFQ09WRVJcIiw0MDAzOlwiU0VORF9BVURJT19CSVRSQVRFX1RPT19MT1dfUkVDT1ZFUlwiLDQwMDU6XCJSRUNWX0FVRElPX0RFQ09ERV9GQUlMRURfUkVDT1ZFUlwifSxDdD17RnJhbWVyYXRlSW5wdXQ6MTAwMSxGcmFtZXJhdGVTZW50OjEwMDIsU2VuZFZpZGVvQml0cmF0ZToxMDAzLFZpZGVvRGVjb2RlOjEwMDUsQXVkaW9JbnRwdXRMZXZlbDoyMDAxLEF1ZGlvT3V0cHV0TGV2ZWw6MjAwMixTZW5kQXVkaW9CaXRyYXRlOjIwMDMsQXVkaW9EZWNvZGU6MjAwNX0sTnQ9ZnVuY3Rpb24oZSl7dmFyIHQ9e3JlbW90ZVN0cmVhbVN0b3JhZ2U6e30sbG9jYWxTdHJlYW1TdG9yYWdlOnt9fTtyZXR1cm4gdC5nYXRld2F5Q2xpZW50PWUsdC5jaGVja0F1ZGlvT3V0cHV0TGV2ZWw9ZnVuY3Rpb24oZSl7cmV0dXJuIShlJiZwYXJzZUludChlLmF1ZGlvUmVjdkJ5dGVzRGVsdGEpPjAmJnBhcnNlSW50KGUuYXVkaW9EZWNvZGluZ05vcm1hbERlbHRhKT4wJiYwPT09cGFyc2VJbnQoZS5hdWRpb091dHB1dExldmVsKSl9LHQuY2hlY2tBdWRpb0ludHB1dExldmVsPWZ1bmN0aW9uKGUpe3JldHVybiFlfHwwIT09cGFyc2VJbnQoZS5hdWRpb0lucHV0TGV2ZWwpfSx0LmNoZWNrRnJhbWVyYXRlSW5wdXQ9ZnVuY3Rpb24oZSx0KXtpZighZXx8IXQuYXR0cmlidXRlcylyZXR1cm4hMDt2YXIgbj1wYXJzZUludCh0LmF0dHJpYnV0ZXMubWF4RnJhbWVSYXRlKSxpPXBhcnNlSW50KGUuZ29vZ0ZyYW1lUmF0ZUlucHV0KTtyZXR1cm4hbnx8IWl8fCEobj4xMCYmaTw1fHxuPDEwJiZuPj01JiZpPD0xKX0sdC5jaGVja0ZyYW1lcmF0ZVNlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIShlJiZwYXJzZUludChlLmdvb2dGcmFtZVJhdGVJbnB1dCk+NSYmcGFyc2VJbnQoZS5nb29nRnJhbWVSYXRlU2VudCk8PTEpfSx0LmNoZWNrU2VuZFZpZGVvQml0cmF0ZT1mdW5jdGlvbihlKXtyZXR1cm4hZXx8MCE9PXBhcnNlSW50KGUudmlkZW9TZW5kQnl0ZXNEZWx0YSl9LHQuY2hlY2tTZW5kQXVkaW9CaXRyYXRlPWZ1bmN0aW9uKGUpe3JldHVybiFlfHwwIT09cGFyc2VJbnQoZS5hdWRpb1NlbmRCeXRlc0RlbHRhKX0sdC5jaGVja1ZpZGVvRGVjb2RlPWZ1bmN0aW9uKGUpe3JldHVybiFlfHwwPT09cGFyc2VJbnQoZS52aWRlb1JlY3ZCeXRlc0RlbHRhKXx8MCE9PXBhcnNlSW50KGUuZ29vZ0ZyYW1lUmF0ZURlY29kZWQpfSx0LmNoZWNrQXVkaW9EZWNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIWV8fDA9PT1wYXJzZUludChlLmF1ZGlvUmVjdkJ5dGVzRGVsdGEpfHwwIT09cGFyc2VJbnQoZS5hdWRpb0RlY29kaW5nTm9ybWFsRGVsdGEpfSx0LnJlY29yZD1mdW5jdGlvbihlLG4saSxhLHIpe2lbZV18fChpW2VdPXtpc1ByZXZOb3JtYWw6ITAscmVjb3JkOltdfSk7dmFyIG89aVtlXSxzPXRbXCJjaGVja1wiK2VdKG4scik7aWYoby5yZWNvcmQucHVzaChzKSxvLnJlY29yZC5sZW5ndGg+PTUpe28uaXNDdXJOb3JtYWw9LTEhPT1vLnJlY29yZC5pbmRleE9mKCEwKTt2YXIgYz1DdFtlXTtvLmlzUHJldk5vcm1hbCYmIW8uaXNDdXJOb3JtYWwmJnQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZXhjZXB0aW9uXCIsY29kZTpjLG1zZzpPdFtjXSx1aWQ6YX0pLCFvLmlzUHJldk5vcm1hbCYmby5pc0N1ck5vcm1hbCYmdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJleGNlcHRpb25cIixjb2RlOmMrMmUzLG1zZzpPdFtjKzJlM10sdWlkOmF9KSxvLmlzUHJldk5vcm1hbD1vLmlzQ3VyTm9ybWFsLG8ucmVjb3JkPVtdfX0sdC5zZXRMb2NhbFN0YXRzPWZ1bmN0aW9uKGUpe3ZhciBuPXt9O09iamVjdC5rZXlzKGUpLm1hcChmdW5jdGlvbihpKXt2YXIgYT1lW2ldLHI9dC5nYXRld2F5Q2xpZW50LmxvY2FsU3RyZWFtc1twYXJzZUludChpKV0sbz10LmxvY2FsU3RyZWFtU3RvcmFnZVtpXXx8e307ciYmci5oYXNWaWRlbygpJiYodC5yZWNvcmQoXCJTZW5kVmlkZW9CaXRyYXRlXCIsYS52aWRlb1N0YXRzLG8saSksdC5yZWNvcmQoXCJGcmFtZXJhdGVJbnB1dFwiLGEudmlkZW9TdGF0cyxvLGksciksdC5yZWNvcmQoXCJGcmFtZXJhdGVTZW50XCIsYS52aWRlb1N0YXRzLG8saSkpLHImJnIuaGFzQXVkaW8oKSYmKHQucmVjb3JkKFwiQXVkaW9JbnRwdXRMZXZlbFwiLGEuYXVkaW9TdGF0cyxvLGkpLHQucmVjb3JkKFwiU2VuZEF1ZGlvQml0cmF0ZVwiLGEuYXVkaW9TdGF0cyxvLGkpKSxuW2ldPW99KSx0LmxvY2FsU3RyZWFtU3RvcmFnZT1ufSx0LnNldFJlbW90ZVN0YXRzPWZ1bmN0aW9uKG4pe3ZhciBpPXt9O09iamVjdC5rZXlzKG4pLm1hcChmdW5jdGlvbihhKXt2YXIgcj1uW2FdLG89ZS5yZW1vdGVTdHJlYW1zW2FdLHM9dC5yZW1vdGVTdHJlYW1TdG9yYWdlW2FdfHx7fTtvJiZvLmhhc1ZpZGVvKCkmJm8uaXNQbGF5aW5nKCkmJnQucmVjb3JkKFwiVmlkZW9EZWNvZGVcIixyLnZpZGVvU3RhdHMscyxhKSxvJiZvLmhhc0F1ZGlvKCkmJm8uaXNQbGF5aW5nKCkmJih0LnJlY29yZChcIkF1ZGlvT3V0cHV0TGV2ZWxcIixyLmF1ZGlvU3RhdHMscyxhKSx0LnJlY29yZChcIkF1ZGlvRGVjb2RlXCIsci5hdWRpb1N0YXRzLHMsYSkpLGlbYV09c30pLHQucmVtb3RlU3RyZWFtU3RvcmFnZT1pfSx0fSx3dD1uZXcgZnVuY3Rpb24oKXt2YXIgZT1jKCk7cmV0dXJuIGUuc3RhdGVzPXtVTklOSVQ6XCJVTklOSVRcIixJTklUSU5HOlwiSU5JVElOR1wiLElOSVRFRDpcIklOSVRFRFwifSxlLnN0YXRlPWUuc3RhdGVzLlVOSU5JVCxlLnR5cGU9bnVsbCxlLmxhc3RDb25uZWN0ZWRBdD1udWxsLGUubGFzdERpc2Nvbm5lY3RlZEF0PW51bGwsZS5sYXN0VHlwZUNoYW5nZWRBdD1udWxsLGUubmV0d29ya0NoYW5nZVRpbWVyPW51bGwsZS5faW5pdD1mdW5jdGlvbih0LG4pe2lmKGUuc3RhdGU9ZS5zdGF0ZXMuSU5JVElORyxuYXZpZ2F0b3IuY29ubmVjdGlvbiYmbmF2aWdhdG9yLmNvbm5lY3Rpb24uYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGk9ZS5fZ2V0TmV0d29ya0luZm8oKTtlLnR5cGU9aSYmaS50eXBlLGUuc3RhdGU9ZS5zdGF0ZXMuSU5JVEVELHQmJnQoKX1lbHNlIGUuc3RhdGU9ZS5zdGF0ZXMuVU5JTklULG4mJm4oXCJET19OT1RfU1VQUE9SVFwiKX0sZS5fZ2V0TmV0d29ya0luZm89ZnVuY3Rpb24oKXtyZXR1cm4gbmF2aWdhdG9yLmNvbm5lY3Rpb259LGUuX3JlbG9hZE5ldHdvcmtJbmZvPWZ1bmN0aW9uKCl7dmFyIHQ9ZS5fZ2V0TmV0d29ya0luZm8oKSxuPXQmJnQudHlwZXx8XCJVTlNVUFBPUlRFRFwiLGk9RGF0ZS5ub3coKTtpZihuIT09ZS50eXBlKXtlLmxhc3RUeXBlQ2hhbmdlZEF0PWksXCJub25lXCI9PW4/ZS5sYXN0RGlzY29ubmVjdGVkQXQ9aTpcIm5vbmVcIj09ZS50eXBlJiYoZS5sYXN0Q29ubmVjdGVkQXQ9aSksZS50eXBlPW47dmFyIGE9e3R5cGU6XCJuZXR3b3JrVHlwZUNoYW5nZWRcIixuZXR3b3JrVHlwZTpufTtlLmRpc3BhdGNoRXZlbnQoYSl9fSxlLmdldFN0YXRzPWZ1bmN0aW9uKHQsbil7dmFyIGk9e30sYT1lLl9nZXROZXR3b3JrSW5mbygpO2EmJihpLk5ldHdvcmtUeXBlPWEudHlwZXx8XCJVTlNVUFBPUlRFRFwiKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChpKX0sMCl9LGUuX2luaXQoZnVuY3Rpb24oKXtuYXZpZ2F0b3IuY29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKFwiY2hhbmdlXCIsZnVuY3Rpb24oKXtlLl9yZWxvYWROZXR3b3JrSW5mbygpfSksZS5uZXR3b3JrQ2hhbmdlVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtlLl9yZWxvYWROZXR3b3JrSW5mbygpfSw1ZTMpfSxmdW5jdGlvbihlKXt9KSxlfSxrdD1cIkRJU0NPTk5FQ1RJTkdcIixEdD1cIkRJU0NPTk5FQ1RFRFwiLEx0PVwiQ09OTkVDVEVEXCIsTXQ9XCJJTklUXCIsUHQ9W10seHQ9KHNldEludGVydmFsKGZ1bmN0aW9uKCl7RGF0ZS5ub3coKTtQdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLnJlcXVlc3RzLmxlbmd0aC0xO3Q+PTA7dC0tKXt2YXIgbj1lLnJlcXVlc3RzW3RdO24udGltZW91dENudCsrLG4udGltZW91dENudD49MTUmJihlLnJlcXVlc3RzLnNwbGljZSh0LDEpLG4ucHJvbWlzZXMucmVqZWN0KHtyZWFzb246XCJUSU1FT1VUXCIsY29kZTo0OTl9KSl9fSl9LDFlMyksMSksVnQ9MSxVdD0xLGp0PWZ1bmN0aW9uKCl7dmFyIGU9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gZSh0KXt2YXIgbixpLGEscyxjLGQsdTtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOnJldHVybiBuPXQudWlkLGk9dC51cmwsYT10LnNlcnZpY2VOYW1lLHM9dC5zaWQsYz10LmFwcElkLGQ9dC5jbmFtZSx1PXQudGltZW91dCxlLmFicnVwdChcInJldHVyblwiLG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsdCl7dmFyIGw9ITEscD1uZXcgWE1MSHR0cFJlcXVlc3Q7cC5vcGVuKFwiUE9TVFwiLGksITApLHAuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtVHlwZVwiLFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiKSxwLnNldFJlcXVlc3RIZWFkZXIoXCJYLVBhY2tldC1TZXJ2aWNlLVR5cGVcIixcIjBcIikscC5zZXRSZXF1ZXN0SGVhZGVyKFwiWC1QYWNrZXQtVVJJXCIsXCI2MVwiKSxwLm9ubG9hZD1mdW5jdGlvbigpe2lmKCFsKXt2YXIgbj1udWxsLGk9bnVsbDt0cnl7bj1KU09OLnBhcnNlKHAucmVzcG9uc2VUZXh0KX1jYXRjaChlKXt2YXIgYT1cIkludmFsaWQgdGV4dCBcIi5jb25jYXQocC5yZXNwb25zZVRleHQpO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoYSksbD0hMCx0KGEpfWlmKG4uY29kZSl7dmFyIHI9XCJBUF9FUlJfXCIuY29uY2F0KG4uY29kZSk7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihyLG4pLGw9ITAsdChyKX10cnl7aT1KU09OLnBhcnNlKG4uanNvbl9ib2R5fHxuLmpzb24pfWNhdGNoKGUpe3ZhciBzPVwiSW52YWxpZCBqc29uX2JvZHkgXCIuY29uY2F0KHAucmVzcG9uc2VUZXh0KTtyZXR1cm4gby5kZWZhdWx0LmVycm9yKHMpLGw9ITAsdChzKX1pZigyMDAhPT1pLmNvZGUpe3ZhciBjPVwiQVBQQ0VOVEVSX0NPREVfXCIuY29uY2F0KGkuY29kZSk7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihjLGkpLGw9ITAsdChjKX1pZighKGkuc2VydmVycyYmaS5zZXJ2ZXJzLmxlbmd0aD4wKSl7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIkFQUENFTlRFUl9FTVBUWV9TRVJWRVJcIixpKSxsPSEwLHQoXCJBUFBDRU5URVJfRU1QVFlfU0VSVkVSXCIpfXJldHVybiBsPSEwLGUoaSl9fSxwLm9uZXJyb3I9ZnVuY3Rpb24oZSl7dmFyIG49XCJBUF9SRVVFU1RfXCIuY29uY2F0KGUudHlwZSk7by5kZWZhdWx0LmVycm9yKG4saSxlKSxsfHwobD0hMCx0KG4pKX0scC5vbnRpbWVvdXQ9ZnVuY3Rpb24oZSl7by5kZWZhdWx0LmVycm9yKFwiQVBfUkVVRVNUX1RJTUVPVVRcIixpLGUpLGx8fChsPSEwLHQoXCJBUF9SRVVFU1RfVElNRU9VVFwiKSl9LHUmJihwLnRpbWVvdXQ9dSkscC5zZW5kKEpTT04uc3RyaW5naWZ5KHtzZXJ2aWNlX25hbWU6YSxqc29uX2JvZHk6SlNPTi5zdHJpbmdpZnkoe2NvbW1hbmQ6XCJjb252ZXJnZUFsbG9jYXRlRWRnZVwiLHNpZDpzLHVpZDpuK1wiXCIsYXBwSWQ6Yyx0czpNYXRoLmZsb29yKERhdGUubm93KCkvMWUzKSxzZXE6eHQrKyxjbmFtZTpkLHZlcnNpb246ci5WRVJTSU9OLHJlcXVlc3RJZDpWdCsrfSl9KSl9KSk7Y2FzZSAyOmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUsdGhpcyl9KSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCksRnQ9ZnVuY3Rpb24oKXt2YXIgZT11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiBlKHQpe3ZhciBuLGksYSxzLGMsZCx1LGwscCxmLG0sZztyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOm49dC5zZXJ2aWNlTmFtZSxpPXQuc2lkLGE9dC5hcHBJZCxzPXQuY25hbWUsYz10LnVpZCxkPW51bGwsZS50MD1jZS5hLmtleXMoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlVBUF9BUFwiKSk7Y2FzZSAzOmlmKChlLnQxPWUudDAoKSkuZG9uZSl7ZS5uZXh0PTM0O2JyZWFrfXJldHVybiB1PWUudDEudmFsdWUsbD1cImh0dHBzOi8vXCIuY29uY2F0KE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJVQVBfQVBcIilbdV0sXCIvYXBpL3YxP2FjdGlvbj11YXBcIikscD12b2lkIDAsZS5wcmV2PTcsZS5uZXh0PTEwLGp0KHt1aWQ6Yyx1cmw6bCxhcHBJZDphLHNpZDppLHNlcnZpY2VOYW1lOm4sY25hbWU6cyx0aW1lb3V0Ok9iamVjdChyLmdldFBhcmFtZXRlcikoXCJIVFRQX0NPTk5FQ1RfVElNRU9VVFwiKX0pO2Nhc2UgMTA6cD1lLnNlbnQsZS5uZXh0PTE4O2JyZWFrO2Nhc2UgMTM6cmV0dXJuIGUucHJldj0xMyxlLnQyPWUuY2F0Y2goNyksby5kZWZhdWx0LmVycm9yKGUudDIpLGQ9ZS50MixlLmFicnVwdChcImNvbnRpbnVlXCIsMyk7Y2FzZSAxODpmPWNlLmEubWFyayhmdW5jdGlvbiBlKHQpe3ZhciBpLGEscjtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKGk9cC5zZXJ2ZXJzW3RdLGE9XCJ3c3M6Ly9cIi5jb25jYXQoaS5hZGRyZXNzLnJlcGxhY2UoL1xcLi9nLFwiLVwiKSxcIi5lZGdlLlwiKS5jb25jYXQodCUyPT0wP1wiYWdvcmEuaW9cIjpcImFnb3JhaW8uY25cIixcIjpcIikuY29uY2F0KGkud3NzLFwiP3NlcnZpY2VOYW1lPVwiKS5jb25jYXQoZW5jb2RlVVJJQ29tcG9uZW50KG4pKSxpLndzcyl7ZS5uZXh0PTU7YnJlYWt9cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIkludmFsaWQgc2VydmVyIHJlc3BvbnNlXCIsaSksZS5hYnJ1cHQoXCJyZXR1cm5cIixcImNvbnRpbnVlXCIpO2Nhc2UgNTpyZXR1cm4gZS5wcmV2PTUsZS5uZXh0PTgsbmV3IFByb21pc2UoZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgV2ViU29ja2V0KGEpLGk9ITE7bi5hZGRFdmVudExpc3RlbmVyKFwib3BlblwiLGZ1bmN0aW9uKCl7aXx8KGk9ITAsZShuKSl9KSxuLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGZ1bmN0aW9uKGUpe2l8fChpPSEwLHQoZSkpfSl9KTtjYXNlIDg6cmV0dXJuKHI9ZS5zZW50KS53b3JrZXJUb2tlbj1wLndvcmtlclRva2VuLGUuYWJydXB0KFwicmV0dXJuXCIse3Y6cn0pO2Nhc2UgMTM6ZS5wcmV2PTEzLGUudDA9ZS5jYXRjaCg1KSxvLmRlZmF1bHQuZXJyb3IoZS50MCksZD1lLnQwO2Nhc2UgMTc6Y2FzZVwiZW5kXCI6cmV0dXJuIGUuc3RvcCgpfX0sZSx0aGlzLFtbNSwxM11dKX0pLG09MDtjYXNlIDIwOmlmKCEobTxwLnNlcnZlcnMubGVuZ3RoKSl7ZS5uZXh0PTMyO2JyZWFrfXJldHVybiBlLmRlbGVnYXRlWWllbGQoZihtKSxcInQzXCIsMjIpO2Nhc2UgMjI6Zz1lLnQzLGUudDQ9ZyxlLm5leHQ9XCJjb250aW51ZVwiPT09ZS50ND8yNjoyNzticmVhaztjYXNlIDI2OnJldHVybiBlLmFicnVwdChcImNvbnRpbnVlXCIsMjkpO2Nhc2UgMjc6aWYoXCJvYmplY3RcIiE9PUhlKCkoZykpe2UubmV4dD0yOTticmVha31yZXR1cm4gZS5hYnJ1cHQoXCJyZXR1cm5cIixnLnYpO2Nhc2UgMjk6bSsrLGUubmV4dD0yMDticmVhaztjYXNlIDMyOmUubmV4dD0zO2JyZWFrO2Nhc2UgMzQ6dGhyb3cgZDtjYXNlIDM1OmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUsdGhpcyxbWzcsMTNdXSl9KSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCksQnQ9e30sSHQ9ZnVuY3Rpb24oZSl7cmV0dXJuIEJ0W2VdPyhCdFtlXSs9MSxCdFtlXSk6KEJ0W2VdPTEsQnRbZV0pfSxXdD17fSxHdD1mdW5jdGlvbihlKXtyZXR1cm4gV3RbZV0/KFd0W2VdKz0xLFd0W2VdKTooV3RbZV09MSxXdFtlXSl9LHF0PWZ1bmN0aW9uKGUpe3ZhciB0PWUuYXBwSWQsbj1lLmNuYW1lLGk9ZS51aWQsYT1lLnNpZCxzPWMoKTtyZXR1cm4gcy5zdGF0dXM9TXQscy5waW5ncG9uZ1RpbWVyPW51bGwscy5jb25uZWN0aW9uPW51bGwscy5yZXF1ZXN0cz1bXSxzLmFwcElkPXQscy5jbmFtZT1uLHMudWlkPWkscy5zaWQ9YSxzLmNvbm5lY3Rpb249bnVsbCxzLmNvbm5lY3Rpb25JZD1VdCsrLHMuY29ubmVjdD1mdW5jdGlvbigpe3ZhciBlPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIGUodCl7dmFyIG47cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZihuPXQud3NDbGllbnQscy5zdGF0dXM9PT1NdCl7ZS5uZXh0PTQ7YnJlYWt9cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIklnbm9yZWQgVWFwQ29ubmVjdGlvbi5jb25uZWN0OiBcIi5jb25jYXQocy5zdGF0dXMpKSxlLmFicnVwdChcInJldHVyblwiKTtjYXNlIDQ6cy5jb25uZWN0aW9uPW4scy5zdGF0dXM9THQscy5fZmx1c2goKSxzLnN0YXJ0UGluZ3BvbmcoKSxuLmFkZEV2ZW50TGlzdGVuZXIoXCJjbG9zZVwiLGZ1bmN0aW9uKGUpe2lmKGNvbnNvbGUubG9nKFwiV2Vib3NrY2V0IGNsb3NlZFwiLGUpLG49PT1zLmNvbm5lY3Rpb24pe3ZhciB0PXt0eXBlOlwiY2xvc2VcIixldnQ6ZX07cy5kaXNwYXRjaEV2ZW50KHQpfX0pLG4uYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbihlKXtpZihlLmRhdGEpe3ZhciB0PW51bGw7dHJ5e3Q9SlNPTi5wYXJzZShlLmRhdGEpfWNhdGNoKGUpe3JldHVybiB2b2lkIG8uZGVmYXVsdC5lcnJvcihcIkludmFsaWQgZGF0YSBmcm9tIHdvcmtlciBtYW5hZ2VyXCIsdCl9aWYodC5yZXF1ZXN0SWQpZm9yKHZhciBuPXMucmVxdWVzdHMubGVuZ3RoLTE7bj49MDtuLS0pe3ZhciBpPXMucmVxdWVzdHNbbl07aWYoaS5yZXFEYXRhLnJlcXVlc3RJZD09PXQucmVxdWVzdElkKXtzLnJlcXVlc3RzLnNwbGljZShuLDEpLHQuY29kZTw0MDAmJnQuY29kZT49MjAwP2kucHJvbWlzZXMucmVzb2x2ZSh0KTppLnByb21pc2VzLnJlamVjdCh0KTticmVha319ZWxzZSB0LnR5cGU9XCJub3RpZmljYXRpb25cIixzLmRpc3BhdGNoRXZlbnQodCl9fSk7Y2FzZSAxMDpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLHRoaXMpfSkpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLHMuZGlzY29ubmVjdD11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiBlKCl7dmFyIHQ7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDpmb3IodCBpbiBzLnN0YXR1cz1rdCxjbGVhckludGVydmFsKHMucGluZ3BvbmdUaW1lcikscy5waW5ncG9uZ1RpbWVyPW51bGwscy5yZXF1ZXN0cylzLnJlcXVlc3RzW3RdLnByb21pc2VzLnJlamVjdChcIkRJU0NPTk5FQ1RFRFwiKTtyZXR1cm4gcy5yZXF1ZXN0cz1bXSxudWxsLHMuY29ubmVjdGlvbiYmKHMuY29ubmVjdGlvbi5jbG9zZSgpLHMuY29ubmVjdGlvbj1udWxsKSxzLnN0YXR1cz1EdCxlLmFicnVwdChcInJldHVyblwiLG51bGwpO2Nhc2UgOTpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLHRoaXMpfSkpLHMucmVxdWVzdD1mdW5jdGlvbigpe3ZhciBlPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIGUodCl7dmFyIG4saSxhLGM7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZihuPVMoKSh7Y29tbWFuZDpcInJlcXVlc3RcIixzZGtWZXJzaW9uOnIuVkVSU0lPTixzZXE6R3Qocy5zaWQpLGFwcElkOnMuYXBwSWQsY25hbWU6cy5jbmFtZSx1aWQ6XCJcIitzLnVpZCxzaWQ6cy5zaWQscmVxdWVzdElkOkh0KHMuc2lkKSx0czpNYXRoLmZsb29yKERhdGUubm93KCkvMWUzKX0sdCksXCJJTklUXCIhPT1zLnN0YXR1cyl7ZS5uZXh0PTU7YnJlYWt9cmV0dXJuIGUuYWJydXB0KFwicmV0dXJuXCIsbmV3IFByb21pc2UoZnVuY3Rpb24oZSx0KXt2YXIgaT17cmVxRGF0YTpuLHN0YWxsZWRUczpEYXRlLm5vdygpLHRpbWVvdXRDbnQ6MCxwcm9taXNlczp7cmVzb2x2ZTplLHJlamVjdDp0fX07cy5yZXF1ZXN0cy5wdXNoKGkpfSkpO2Nhc2UgNTppZihzLmNvbm5lY3Rpb24pe2UubmV4dD0xMTticmVha310aHJvdyBpPVwiTk9fV0VCU09DS0VUX0NPTk5FQ1RJT05cIixvLmRlZmF1bHQuZXJyb3IoaSksbmV3IEVycm9yKGkpO2Nhc2UgMTE6aWYocy5zdGF0dXMhPT1rdHx8dC5jbGllbnRSZXF1ZXN0JiZcIkRlc3Ryb3lXb3JrZXJcIj09PXQuY2xpZW50UmVxdWVzdC5jb21tYW5kKXtlLm5leHQ9MTc7YnJlYWt9dGhyb3cgYT1cIldFQlNPQ0tFVF9ESVNDT05ORUNUSU5HXCIsby5kZWZhdWx0LmVycm9yKGEpLG5ldyBFcnJvcihhKTtjYXNlIDE3OmlmKFwiRElTQ09OTkVDVEVEXCIhPT1zLnN0YXR1cyl7ZS5uZXh0PTIzO2JyZWFrfXRocm93IGM9XCJXRUJTT0NLRVRfRElTQ09OTkVDVEVEXCIsby5kZWZhdWx0LmVycm9yKGMpLG5ldyBFcnJvcihjKTtjYXNlIDIzOnJldHVybiBlLmFicnVwdChcInJldHVyblwiLG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsdCl7dmFyIGk9e3JlcURhdGE6bixzdGFsbGVkVHM6RGF0ZS5ub3coKSx0aW1lb3V0Q250OjAscHJvbWlzZXM6e3Jlc29sdmU6ZSxyZWplY3Q6dH19O3MucmVxdWVzdHMucHVzaChpKSxzLl9mbHVzaCgpfSkpO2Nhc2UgMjQ6Y2FzZVwiZW5kXCI6cmV0dXJuIGUuc3RvcCgpfX0sZSx0aGlzKX0pKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSxzLl9mbHVzaD1mdW5jdGlvbigpe3MuY29ubmVjdGlvbiYmcy5zdGF0dXM9PT1MdCYmcy5yZXF1ZXN0cy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc2VudFRzfHwoZS5zZW50VHM9RGF0ZS5ub3coKSxlLnJlcURhdGEuY2xpZW50UmVxdWVzdCYmKGUucmVxRGF0YS5jbGllbnRSZXF1ZXN0LndvcmtlclRva2VuPXMuY29ubmVjdGlvbi53b3JrZXJUb2tlbikscy5jb25uZWN0aW9uLnNlbmQoSlNPTi5zdHJpbmdpZnkoZS5yZXFEYXRhKSkpfSl9LHMuc3RhcnRQaW5ncG9uZz1mdW5jdGlvbigpe2NsZWFySW50ZXJ2YWwocy5waW5ncG9uZ1RpbWVyKSxzLnBpbmdwb25nVGltZXI9c2V0SW50ZXJ2YWwodWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gZSgpe3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6aWYocy5zdGF0dXMhPT1MdHx8IXMuY29ubmVjdGlvbnx8MSE9PXMuY29ubmVjdGlvbi5yZWFkeVN0YXRlKXtlLm5leHQ9OTticmVha31yZXR1cm4gZS5wcmV2PTEsZS5uZXh0PTQscy5yZXF1ZXN0KHtjb21tYW5kOlwicGluZ1wifSk7Y2FzZSA0OmUubmV4dD05O2JyZWFrO2Nhc2UgNjplLnByZXY9NixlLnQwPWUuY2F0Y2goMSksY29uc29sZS5lcnJvcihcInBpbmdwb25nXCIsZS50MCk7Y2FzZSA5OmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUsdGhpcyxbWzEsNl1dKX0pKSw2ZTMpfSxzLl9mbHVzaCgpLHMuc3RhcnRQaW5ncG9uZygpLFB0LnB1c2gocyksc30sWXQ9ZnVuY3Rpb24oZSl7ZS5kaXNjb25uZWN0KCk7dmFyIHQ9UHQuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gZS5jb25uZWN0aW9uSWQ9PT10LmNvbm5lY3Rpb25JZH0pO1B0LnNwbGljZSh0LDEpfSxKdD1mdW5jdGlvbihlKXtyZXR1cm5cIm51bWJlclwiPT10eXBlb2YgZSYmMDw9ZSYmZTw9NDI5NDk2NzI5NX07dmFyIEt0PWZ1bmN0aW9uKGUpe3ZhciB0PWU7aWYoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkxJVkVTVFJFQU1JTkdfQUxJR05cIikpc3dpdGNoKGUpe2Nhc2UgMjAwOnQ9UjticmVhaztjYXNlIDQ1MTp0PUE7YnJlYWs7Y2FzZSA0NTM6dD1PO2JyZWFrO2Nhc2UgNDcwOnQ9UDticmVhaztjYXNlIDQ5OTp0PUM7YnJlYWs7ZGVmYXVsdDp0PU59cmV0dXJuIHR9LHp0PWZ1bmN0aW9uKGUpe3ZhciB0PWU7aWYoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkxJVkVTVFJFQU1JTkdfQUxJR05cIikpc3dpdGNoKGUpe2Nhc2UgMjAwOnQ9dzticmVhaztjYXNlIDQwNDpjYXNlIDQ1Mjp0PWs7YnJlYWs7Y2FzZSA0NTM6dD1EO2JyZWFrO2Nhc2UgNDk5OnQ9TDticmVhaztkZWZhdWx0OnQ9TX1yZXR1cm4gdH0sWHQ9ZnVuY3Rpb24oZSl7dmFyIHQ9e2tleTp2b2lkIDAsaGlnaFN0cmVhbTpudWxsLGxvd1N0cmVhbTpudWxsLGxvd1N0cmVhbVBhcmFtZXRlcjpudWxsLGlzRHVhbFN0cmVhbTohMSxoaWdoU3RyZWFtU3RhdGU6Mixsb3dTdHJlYW1TdGF0ZToyLHByb3h5U2VydmVyOm51bGx9O3QudHVyblNlcnZlcj17bW9kZTpcImF1dG9cIix1c2VybmFtZTpcInRlc3RcIixjcmVkZW50aWFsOlwiMTExMTExXCIsZm9yY2V0dXJuOk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJGT1JDRV9UVVJOXCIpfSx0LnVzZVByb3h5U2VydmVyPSExLHQubW9kZT1lLm1vZGUsdC5jb2RlYz1lLmNvZGVjLHQuY2xpZW50SWQ9T2JqZWN0KG5lLmdlbmVyYXRlU2Vzc2lvbklkKSgpLnNsaWNlKDAsNSksdC51aW50VWlkPW51bGw7ZT1TKCkoe30sZSk7cmV0dXJuIHQuYWVzcGFzc3dvcmQ9bnVsbCx0LmFlc21vZGU9XCJub25lXCIsdC5oYXNQdWJsaXNoZWQ9ITEsdC5nZXRTZXNzaW9uSWQ9ZnVuY3Rpb24oKXtyZXR1cm4gZS5zZXNzaW9uSWR9LHQuc3RhcnRDaGFubmVsTWVkaWFSZWxheT1mdW5jdGlvbihuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUpe2lmKGUpcmV0dXJuIGkmJmkoZSk7aSYmaSgpfSxuYW1lOlwiQ2xpZW50LnN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXlcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKCEobiBpbnN0YW5jZW9mIEtlLkNoYW5uZWxNZWRpYVJlbGF5Q29uZmlndXJhdGlvbikpdGhyb3dcIkNvbmZpZ3JhdGlvbiBzaG91bGQgYmUgaW5zdGFuY2Ugb2YgW0NoYW5uZWxNZWRpYVJlbGF5Q29uZmlndXJhdGlvbl1cIjt2YXIgcj1uLmdldFNyY0NoYW5uZWxNZWRpYUluZm8oKSxvPW4uZ2V0RGVzdENoYW5uZWxNZWRpYUluZm9zKCk7aWYoT2JqZWN0KHJlLmlzRW1wdHkpKHIpKXRocm93XCJzcmNDaGFubmVsTWVkaWFJbmZvIHNob3VsZCBub3QgYmUgZW1wdHlcIjtpZihPYmplY3QocmUuaXNFbXB0eSkobyl8fDA9PT1vLmxlbmd0aCl0aHJvd1wiZGVzdENoYW5uZWxNZWRpYUluZm9zIHNob3VsZCBub3QgYmUgZW1wdHlcIjtpZighT2JqZWN0KG5lLmlzMzJVaW50KShyLnVpZCkpdGhyb3dcIkludmFsaWQgdWlkIGluIHNyY0NoYW5uZWxNZWRpYUluZm9cIjtpZighT2JqZWN0KHJlLmlzVmFsaWRDaGFubmVsTmFtZSkoci5jaGFubmVsTmFtZSkpdGhyb3dcIkludmFsaWQgY2hhbm5lbE5hbWUgaW4gc3JjQ2hhbm5lbE1lZGlhSW5mb1wiO2lmKHIudG9rZW4mJiFPYmplY3QocmUuaXNWYWxpZFRva2VuKShyLnRva2VuKSl0aHJvd1wiSW52YWxpZCB0b2tlbiBpbiBzcmNDaGFubmVsTWVkaWFJbmZvXCI7aWYoby5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKCFPYmplY3QobmUuaXMzMlVpbnQpKGUudWlkKSl0aHJvd1wiSW52YWxpZCB1aWQgaW4gZGVzdENoYW5uZWxNZWRpYUluZm9cIjtpZighT2JqZWN0KHJlLmlzVmFsaWRDaGFubmVsTmFtZSkoZS5jaGFubmVsTmFtZSkpdGhyb3dcIkludmFsaWQgY2hhbm5lbE5hbWUgaW4gZGVzdENoYW5uZWxNZWRpYUluZm9cIjtpZihlLnRva2VuJiYhT2JqZWN0KHJlLmlzVmFsaWRUb2tlbikoZS50b2tlbikpdGhyb3dcIkludmFsaWQgdG9rZW4gaW4gZGVzdENoYW5uZWxNZWRpYUluZm9cIn0pLHQuZ2F0ZXdheUNsaWVudC5zdGF0ZSE9PVJ0LkNPTk5FQ1RFRCl0aHJvd1wic3RhcnRDaGFubmVsTWVkaWFSZWxheSBzaG91bGQgYmUgdXNlZCBhZnRlciBqb2luXCI7dC5nYXRld2F5Q2xpZW50LnN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXkobikudGhlbihmdW5jdGlvbigpe2EmJmEoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EmJmEoZSl9KX0sdC51cGRhdGVDaGFubmVsTWVkaWFSZWxheT1mdW5jdGlvbihuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUpe2lmKGUpcmV0dXJuIGkmJmkoZSk7aSYmaSgpfSxuYW1lOlwiQ2xpZW50LnVwZGF0ZUNoYW5uZWxNZWRpYVJlbGF5XCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZighKG4gaW5zdGFuY2VvZiBLZS5DaGFubmVsTWVkaWFSZWxheUNvbmZpZ3VyYXRpb24pKXRocm93XCJDb25maWdyYXRpb24gc2hvdWxkIGJlIGluc3RhbmNlIG9mIFtDaGFubmVsTWVkaWFSZWxheUNvbmZpZ3VyYXRpb25dXCI7dmFyIHI9bi5nZXRTcmNDaGFubmVsTWVkaWFJbmZvKCksbz1uLmdldERlc3RDaGFubmVsTWVkaWFJbmZvcygpO2lmKE9iamVjdChyZS5pc0VtcHR5KShyKSl0aHJvd1wic3JjQ2hhbm5lbE1lZGlhSW5mbyBzaG91bGQgbm90IGJlIGVtcHR5XCI7aWYoT2JqZWN0KHJlLmlzRW1wdHkpKG8pfHwwPT09by5sZW5ndGgpdGhyb3dcImRlc3RDaGFubmVsTWVkaWFJbmZvcyBzaG91bGQgbm90IGJlIGVtcHR5XCI7aWYoIU9iamVjdChuZS5pczMyVWludCkoci51aWQpKXRocm93XCJJbnZhbGlkIHVpZCBpbiBzcmNDaGFubmVsTWVkaWFJbmZvXCI7aWYoIU9iamVjdChyZS5pc1ZhbGlkQ2hhbm5lbE5hbWUpKHIuY2hhbm5lbE5hbWUpKXRocm93XCJJbnZhbGlkIGNoYW5uZWxOYW1lIGluIHNyY0NoYW5uZWxNZWRpYUluZm9cIjtpZihyLnRva2VuJiYhT2JqZWN0KHJlLmlzVmFsaWRUb2tlbikoci50b2tlbikpdGhyb3dcIkludmFsaWQgdG9rZW4gaW4gc3JjQ2hhbm5lbE1lZGlhSW5mb1wiO2lmKG8uZm9yRWFjaChmdW5jdGlvbihlKXtpZighT2JqZWN0KG5lLmlzMzJVaW50KShlLnVpZCkpdGhyb3dcIkludmFsaWQgdWlkIGluIGRlc3RDaGFubmVsTWVkaWFJbmZvXCI7aWYoIU9iamVjdChyZS5pc1ZhbGlkQ2hhbm5lbE5hbWUpKGUuY2hhbm5lbE5hbWUpKXRocm93XCJJbnZhbGlkIGNoYW5uZWxOYW1lIGluIGRlc3RDaGFubmVsTWVkaWFJbmZvXCI7aWYoZS50b2tlbiYmIU9iamVjdChyZS5pc1ZhbGlkVG9rZW4pKGUudG9rZW4pKXRocm93XCJJbnZhbGlkIHRva2VuIGluIGRlc3RDaGFubmVsTWVkaWFJbmZvXCJ9KSx0LmdhdGV3YXlDbGllbnQuc3RhdGUhPT1SdC5DT05ORUNURUQpdGhyb3dcInVwZGF0ZUNoYW5uZWxNZWRpYVJlbGF5IHNob3VsZCBiZSB1c2VkIGFmdGVyIGpvaW5cIjt0LmdhdGV3YXlDbGllbnQudXBkYXRlQ2hhbm5lbE1lZGlhUmVsYXkobikudGhlbihmdW5jdGlvbigpe2EmJmEoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EmJmEoZSl9KX0sdC5zdG9wQ2hhbm5lbE1lZGlhUmVsYXk9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm4gbiYmbihlKTtuJiZuKCl9LG5hbWU6XCJDbGllbnQuc3RvcENoYW5uZWxNZWRpYVJlbGF5XCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTt0LmdhdGV3YXlDbGllbnQuc3RvcENoYW5uZWxNZWRpYVJlbGF5KCkudGhlbihmdW5jdGlvbigpe2kmJmkoKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2kmJmkoZSl9KX0sdC5nZXRDb25uZWN0aW9uU3RhdGU9ZnVuY3Rpb24oKXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LmdldENvbm5lY3Rpb25TdGF0ZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSksaT1SdC5jb25uZXRpb25TdGF0ZU1hcFt0LmdhdGV3YXlDbGllbnQuc3RhdGVdO3JldHVybiBuKCksaX0sdC5zZXRDbGllbnRSb2xlPWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6aSxuYW1lOlwiQ2xpZW50LnNldENsaWVudFJvbGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKE9iamVjdChyZS5jaGVja1ZhbGlkRW51bSkobixcInNldENsaWVudFJvbGVcIixbXCJob3N0XCIsXCJhdWRpZW5jZVwiXSksXCJydGNcIj09PXQubW9kZSl7dmFyIHI9XCJSVEMgbW9kZSBjYW4gbm90IHVzZSBzZXRDbGllbnRSb2xlXCI7cmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBcIikuY29uY2F0KHIpKSxhJiZhKHIpfXQuZ2F0ZXdheUNsaWVudCYmdC5nYXRld2F5Q2xpZW50LnN0YXRlPT09UnQuQ09OTkVDVEVEPyhcImF1ZGllbmNlXCI9PT1uJiYoMD09PXRoaXMuaGlnaFN0cmVhbVN0YXRlP3RoaXMuX3VucHVibGlzaCh0aGlzLmhpZ2hTdHJlYW0sZnVuY3Rpb24oKXthJiZhKG51bGwse3JvbGU6bn0pfSxmdW5jdGlvbihlKXthJiZhKGUpfSk6dC5nYXRld2F5Q2xpZW50LnNldENsaWVudFJvbGUoXCJhdWRpZW5jZVwiLGEpKSxcImhvc3RcIj09PW4mJnQuZ2F0ZXdheUNsaWVudC5zZXRDbGllbnRSb2xlKFwiaG9zdFwiLGEpKToodC5nYXRld2F5Q2xpZW50LnJvbGU9bixhJiZhKG51bGwse3JvbGU6bn0pKX0sdC5nZXRHYXRld2F5SW5mbz1mdW5jdGlvbihlKXtpZih0LmdhdGV3YXlDbGllbnQuc3RhdGUhPT1SdC5DT05ORUNURUQpe3ZhciBuPVwiQ2xpZW50IGlzIG5vdCBpbiBjb25uZWN0ZWQgc3RhdGVcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBcIikuY29uY2F0KG4pKSx2b2lkIGUobil9dC5nYXRld2F5Q2xpZW50LmdldEdhdGV3YXlJbmZvKGZ1bmN0aW9uKHQpe2UobnVsbCx0KX0sZSl9LHQucmVuZXdUb2tlbj1mdW5jdGlvbihuLGksYSl7dmFyIHI9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJGYWlsZWQgdG8gcmVuZXcgdG9rZW4gXCIuY29uY2F0KGUpLHQpLGEmJmEoZSk7aSYmaSh0KX0sbmFtZTpcIkNsaWVudC5yZW5ld1Rva2VuXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZighT2JqZWN0KHJlLmlzVmFsaWRUb2tlbikobikpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCB0b2tlbjogVG9rZW4gaXMgb2YgdGhlIHN0cmluZyB0eXBlIC5MZW5ndGggb2YgdGhlIHN0cmluZzogWzEsMjU1XS4gQVNDSUkgY2hhcmFjdGVycyBvbmx5LlwiKTtyZXR1cm4gdC5nYXRld2F5Q2xpZW50P3Qua2V5Pyh0LmtleT1uLHZvaWQgdC5nYXRld2F5Q2xpZW50LnJlbmV3VG9rZW4obixmdW5jdGlvbihlKXtyZXR1cm4gcihudWxsLGUpfSxyKSk6KG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gcmVuZXdUb2tlbiBzaG91bGQgbm90IGJlIGNhbGxlZCBiZWZvcmUgdXNlciBqb2luXCIpKSxyKFYuSU5WQUxJRF9PUEVSQVRJT04pKTooby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSByZW5ld1Rva2VuIEZhaWxlZC4gR2F0ZXdheUNsaWVudCBub3QgRXhpc3RcIikpLHIoVi5JTlZBTElEX09QRVJBVElPTikpfSx0LnNldExvd1N0cmVhbVBhcmFtZXRlcj1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LnNldExvd1N0cmVhbVBhcmFtZXRlclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKG4sXCJwYXJhbVwiKTt2YXIgYT1uLndpZHRoLHI9bi5oZWlnaHQsYz1uLmZyYW1lcmF0ZSxkPW4uYml0cmF0ZTtPYmplY3QocmUuaXNFbXB0eSkoYSl8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShhLFwid2lkdGhcIiksT2JqZWN0KHJlLmlzRW1wdHkpKHIpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikocixcImhlaWdodFwiKSxPYmplY3QocmUuaXNFbXB0eSkoYyl8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShjLFwiZnJhbWVyYXRlXCIpLE9iamVjdChyZS5pc0VtcHR5KShkKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGQsXCJiaXRyYXRlXCIsMSwxZTcpLCghYSYmcnx8YSYmIXIpJiZvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gVGhlIHdpZHRoIGFuZCBoZWlnaHQgcGFyYW1ldGVycyB0YWtlIGVmZmVjdCBvbmx5IHdoZW4gYm90aCBhcmUgc2V0XCIpKSx0Lmxvd1N0cmVhbVBhcmFtZXRlcj1uLGkoKX0sdC5pbml0PWZ1bmN0aW9uKG4saSxhKXt2YXIgcj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGEmJmEoZSk7aSYmaSh0KX0sbmFtZTpcIkNsaWVudC5pbml0XCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobiksT2JqZWN0KG0uaXNDaHJvbWVLZXJuZWwpKCkmJk9iamVjdChtLmdldENocm9tZUtlcm5lbFZlcnNpb24pKCk8PTQ4P2E/cihWLkJBRF9FTlZJUk9OTUVOVCk6T2JqZWN0KG5lLnBvcEJhblRpcCkoKTooby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIEluaXRpYWxpemluZyBBZ29yYVJUQyBjbGllbnQsIGFwcElkOiBcIikuY29uY2F0KG4sXCIuXCIpKSxlLmFwcElkPW4sZS5zZXNzaW9uSWQ9T2JqZWN0KG5lLmdlbmVyYXRlU2Vzc2lvbklkKSgpLHIoKSl9LHQuc2V0VHVyblNlcnZlcj1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LnNldFR1cm5TZXJ2ZXJcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKHQuZ2F0ZXdheUNsaWVudCYmdC5nYXRld2F5Q2xpZW50LnN0YXRlIT09UnQuRElTQ09OTkVDVEVEKXRocm93IG5ldyBFcnJvcihcIlNldCB0dXJuIHNlcnZlciBiZWZvcmUgam9pbiBjaGFubmVsXCIpO2lmKHQudXNlUHJveHlTZXJ2ZXIpdGhyb3cgbmV3IEVycm9yKFwiWW91IGhhdmUgYWxyZWFkeSBzZXQgdGhlIHByb3h5XCIpO09iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KShuLFwidHVyblNlcnZlclwiKTt2YXIgYT1uLnR1cm5TZXJ2ZXJVUkwscj1uLnVzZXJuYW1lLGM9bi5wYXNzd29yZCxkPW4udWRwcG9ydCx1PW4uZm9yY2V0dXJuLGw9bi50Y3Bwb3J0O09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShhLFwidHVyblNlcnZlclVSTFwiKSxPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykocixcInVzZXJuYW1lXCIpLE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShjLFwicGFzc3dvcmRcIiksT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGQsXCJ1ZHBwb3J0XCIpLE9iamVjdChyZS5pc0VtcHR5KSh1KXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKSh1LFwiZm9yY2V0dXJuXCIpLHQudHVyblNlcnZlci5tb2RlPVwibWFudWFsXCIsdC50dXJuU2VydmVyLnVybD1hLHQudHVyblNlcnZlci51ZHBwb3J0PWQsdC50dXJuU2VydmVyLnVzZXJuYW1lPXIsdC50dXJuU2VydmVyLmNyZWRlbnRpYWw9Yyx0LnR1cm5TZXJ2ZXIuZm9yY2V0dXJuPXV8fCExLE9iamVjdChyZS5pc0VtcHR5KShsKXx8KE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShsLFwidGNwcG9ydFwiKSx0LnR1cm5TZXJ2ZXIudGNwcG9ydD1sLG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBTZXQgdHVybnNlcnZlciB0Y3B1cmwuIFwiKS5jb25jYXQodC50dXJuU2VydmVyLnVybCxcIjpcIikuY29uY2F0KHQudHVyblNlcnZlci50Y3Bwb3J0KSkpLG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBTZXQgdHVybnNlcnZlciB1ZHB1cmwuIFwiKS5jb25jYXQodC50dXJuU2VydmVyLnVybCxcIjpcIikuY29uY2F0KHQudHVyblNlcnZlci51ZHBwb3J0LFwiLHVzZXJuYW1lOiBcIikuY29uY2F0KHQudHVyblNlcnZlci51ZXJuYW1lLFwiLHBhc3N3b3JkOiBcIikuY29uY2F0KHQudHVyblNlcnZlci5jcmVkZW50aWFsKSksaSgpfSx0LnNldFByb3h5U2VydmVyPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc2V0UHJveHlTZXJ2ZXJcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKHQuZ2F0ZXdheUNsaWVudCYmdC5nYXRld2F5Q2xpZW50LnN0YXRlIT09UnQuRElTQ09OTkVDVEVEKXRocm93IG5ldyBFcnJvcihcIlNldCBwcm94eSBzZXJ2ZXIgYmVmb3JlIGpvaW4gY2hhbm5lbFwiKTtpZighbil0aHJvdyBuZXcgRXJyb3IoXCJEbyBub3Qgc2V0IHRoZSBwcm94eVNlcnZlciBwYXJhbWV0ZXIgYXMgZW1wdHlcIik7aWYodC51c2VQcm94eVNlcnZlcil0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCB0aGUgcHJveHlcIik7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJwcm94eVNlcnZlclwiKSx0LnByb3h5U2VydmVyPW4scy5iLnNldFByb3h5U2VydmVyKG4pLG8uZGVmYXVsdC5zZXRQcm94eVNlcnZlcihuKSxpKCl9LHQuc3RhcnRQcm94eVNlcnZlcj1mdW5jdGlvbigpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc3RhcnRQcm94eVNlcnZlclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYodC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuc3RhdGUhPT1SdC5ESVNDT05ORUNURUQpdGhyb3cgbmV3IEVycm9yKFwiU3RhcnQgcHJveHkgc2VydmVyIGJlZm9yZSBqb2luIGNoYW5uZWxcIik7aWYodC5wcm94eVNlcnZlcnx8dC50dXJuU2VydmVyLnVybCl0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCB0aGUgcHJveHlcIik7dC51c2VQcm94eVNlcnZlcj0hMCxuKCl9LHQuc3RvcFByb3h5U2VydmVyPWZ1bmN0aW9uKCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zdG9wUHJveHlTZXJ2ZXJcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKHQuZ2F0ZXdheUNsaWVudCYmdC5nYXRld2F5Q2xpZW50LnN0YXRlIT09UnQuRElTQ09OTkVDVEVEKXRocm93IG5ldyBFcnJvcihcIlN0b3AgcHJveHkgc2VydmVyIGFmdGVyIGxlYXZlIGNoYW5uZWxcIik7cy5iLnNldFByb3h5U2VydmVyKCksby5kZWZhdWx0LnNldFByb3h5U2VydmVyKCksdC50dXJuU2VydmVyPXt9LHQucHJveHlTZXJ2ZXI9bnVsbCx0LnVzZVByb3h5U2VydmVyPSExLG4oKX0sdC5zZXRFbmNyeXB0aW9uU2VjcmV0PWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc2V0RW5jcnlwdGlvblNlY3JldFwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJwYXNzd29yZFwiKSx0LmFlc3Bhc3N3b3JkPW4saSgpfSx0LnNldEVuY3J5cHRpb25Nb2RlPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc2V0RW5jcnlwdGlvbk1vZGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShuLFwiZW5jcnlwdGlvbk1vZGVcIiksLTE9PT0kZS5pbmRleE9mKG4pKXRocm93IG5ldyBFcnJvcignSW52YWxpZCBlbmNyeXB0aW9uTW9kZTogZW5jcnlwdGlvbk1vZGUgc2hvdWxkIGJlIFwiYWVzLTEyOC14dHNcIiB8IFwiYWVzLTI1Ni14dHNcIiB8IFwiYWVzLTEyOC1lY2JcIicpO3QuYWVzbW9kZT1uLGkoKX0sdC5jb25maWdQdWJsaXNoZXI9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5jb25maWdQdWJsaXNoZXJcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KShuLFwiY29uZmlnXCIpO3ZhciBhPW4ud2lkdGgscj1uLmhlaWdodCxvPW4uZnJhbWVyYXRlLGM9bi5iaXRyYXRlLGQ9bi5wdWJsaXNoZXJVcmw7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGEsXCJ3aWR0aFwiKSxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikocixcImhlaWdodFwiKSxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikobyxcImZyYW1lcmF0ZVwiKSxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYyxcImJpdHJhdGVcIiwxLDFlNyksZCYmT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGQsXCJwdWJsaXNoZXJVcmxcIiksdC5nYXRld2F5Q2xpZW50LmNvbmZpZ1B1Ymxpc2hlcihuKSxpKCl9LHQuZW5hYmxlRHVhbFN0cmVhbT1mdW5jdGlvbihuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gaSYmaShlKTtuJiZuKHQpfSxuYW1lOlwiQ2xpZW50LmVuYWJsZUR1YWxTdHJlYW1cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3JldHVyblwiaU9TXCI9PT1PYmplY3QobS5nZXRCcm93c2VyT1MpKCk/KHMuYi5zdHJlYW1Td2l0Y2goZS5zZXNzaW9uSWQse2x0czoobmV3IERhdGUpLmdldFRpbWUoKSxpc2R1YWw6ITAsc3VjYzohMX0pLGEoVi5JT1NfTk9UX1NVUFBPUlQpKTpPYmplY3QobS5pc1dlQ2hhdEJyb3dzZXIpKCk/KHMuYi5zdHJlYW1Td2l0Y2goZS5zZXNzaW9uSWQse2x0czoobmV3IERhdGUpLmdldFRpbWUoKSxpc2R1YWw6ITAsc3VjYzohMX0pLGEoVi5XRUNIQVRfTk9UX1NVUFBPUlQpKToocy5iLnN0cmVhbVN3aXRjaChlLnNlc3Npb25JZCx7bHRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGlzZHVhbDohMCxzdWNjOiEwfSksdC5pc0R1YWxTdHJlYW09ITAsdC5oaWdoU3RyZWFtJiYodC5oaWdoU3RyZWFtLmlzRHVhbFN0cmVhbT0hMCksdm9pZCgwPT09dC5oaWdoU3RyZWFtU3RhdGU/dC5fcHVibGlzaExvd1N0cmVhbShmdW5jdGlvbihlKXtyZXR1cm4gYShudWxsLGUpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl1cIiksZSksYShWLkVOQUJMRV9EVUFMU1RSRUFNX0ZBSUxFRCl9KToxPT09dC5oaWdoU3RyZWFtU3RhdGU/YShWLlNUSUxMX09OX1BVQkxJU0hJTkcpOmEobnVsbCkpKX0sdC5kaXNhYmxlRHVhbFN0cmVhbT1mdW5jdGlvbihuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gaSYmaShlKTtuJiZuKHQpfSxuYW1lOlwiQ2xpZW50LmRpc2FibGVEdWFsU3RyZWFtXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtzLmIuc3RyZWFtU3dpdGNoKGUuc2Vzc2lvbklkLHtsdHM6KG5ldyBEYXRlKS5nZXRUaW1lKCksaXNkdWFsOiExLHN1Y2M6ITB9KSx0LmlzRHVhbFN0cmVhbT0hMSx0LmhpZ2hTdHJlYW0mJih0LmhpZ2hTdHJlYW0uaXNEdWFsU3RyZWFtPSExKSwwPT09dC5oaWdoU3RyZWFtU3RhdGU/dC5fdW5wdWJsaXNoTG93U3RyZWFtKGZ1bmN0aW9uKCl7dC5oaWdoU3RyZWFtLmxvd1N0cmVhbT1udWxsLGEoKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdXCIpLGUpLGEoVi5ESVNBQkxFX0RVQUxTVFJFQU1fRkFJTEVEKX0pOjE9PT10LmhpZ2hTdHJlYW1TdGF0ZT9hKFYuU1RJTExfT05fUFVCTElTSElORyk6YSgpfSx0Ll9jcmVhdGVMb3dTdHJlYW09ZnVuY3Rpb24oZSxuKXtpZih0LmhpZ2hTdHJlYW0mJnQuaGlnaFN0cmVhbS5zdHJlYW0pe3ZhciBpPVMoKSh7fSx0LmhpZ2hTdHJlYW0ucGFyYW1zKTtpZihpLnN0cmVhbUlEKz0xLGkuYXVkaW89ITEsaS52aWRlbyl7dmFyIGE9dC5oaWdoU3RyZWFtLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO2E/YWUuZ2V0VmlkZW9DYW1lcmFJZEJ5TGFiZWwoYS5sYWJlbCxmdW5jdGlvbihhKXtpLmNhbWVyYUlkPWE7dmFyIHM9bmV3IFllKGkpO2lmKHMuaXNMb3dTdHJlYW09ITAscy5zdHJlYW1JZD10LmhpZ2hTdHJlYW0uZ2V0SWQoKSsxLHQubG93U3RyZWFtUGFyYW1ldGVyKXt2YXIgYz1TKCkoe30sdC5sb3dTdHJlYW1QYXJhbWV0ZXIpO2lmKCFjLndpZHRofHwhYy5oZWlnaHQpe3ZhciBkPUF0KHQuaGlnaFN0cmVhbS5wcm9maWxlKSx1PXIuU1VQUE9SVF9SRVNPTFVUSU9OX0xJU1RbZFswXV07Yy53aWR0aD11WzBdLGMuaGVpZ2h0PXVbMV19aWYoYy5mcmFtZXJhdGU9Yy5mcmFtZXJhdGV8fDUsYy5iaXRyYXRlPWMuYml0cmF0ZXx8NTAsT2JqZWN0KG0uaXNTYWZhcmkpKCl8fE9iamVjdChtLmlzT3BlcmEpKCkpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gU2hpbW1pbmcgbG93U3RyZWFtUGFyYW1ldGVyXCIpKTt1PXIuU1VQUE9SVF9SRVNPTFVUSU9OX0xJU1RbdC5oaWdoU3RyZWFtLnByb2ZpbGVdO2Mud2lkdGg9dVswXSxjLmhlaWdodD11WzFdfXMuc2V0VmlkZW9Qcm9maWxlQ3VzdG9tUGx1cyhjKX1lbHNlIHMuc2V0VmlkZW9Qcm9maWxlQ3VzdG9tKEF0KHQuaGlnaFN0cmVhbS5wcm9maWxlKSk7cy5pbml0KGZ1bmN0aW9uKCl7dC5oaWdoU3RyZWFtLmxvd1N0cmVhbT1zLHQuaGlnaFN0cmVhbS51c2VyTXV0ZVZpZGVvJiZzLm11dGVWaWRlbygpLGUmJmUocyl9LG4pfSxuKTpuJiZuKFYuSElHSF9TVFJFQU1fTk9UX1ZJREVPX1RSQUNFKX1lbHNlIG4mJm4oVi5ISUdIX1NUUkVBTV9OT1RfVklERU9fVFJBQ0UpfWVsc2UgbiYmbihWLkhJR0hfU1RSRUFNX05PVF9WSURFT19UUkFDRSl9LHQuX2dldExvd1N0cmVhbT1mdW5jdGlvbihlLG4pe3QubG93U3RyZWFtP2UodC5sb3dTdHJlYW0pOnQuX2NyZWF0ZUxvd1N0cmVhbShmdW5jdGlvbihuKXt0Lmxvd1N0cmVhbT1uLGUodC5sb3dTdHJlYW0pfSxuKX0sdC5fcHVibGlzaExvd1N0cmVhbT1mdW5jdGlvbihlLG4pe3JldHVybiAyIT09dC5sb3dTdHJlYW1TdGF0ZT9uJiZuKFYuTE9XX1NUUkVBTV9BTFJFQURZX1BVQkxJU0hFRCk6dC5oaWdoU3RyZWFtJiZ0LmhpZ2hTdHJlYW0uaGFzU2NyZWVuKCk/biYmbihWLlNIQVJJTkdfU0NSRUVOX05PVF9TVVBQT1JUKTp2b2lkIHQuX2dldExvd1N0cmVhbShmdW5jdGlvbihpKXt0Lmxvd1N0cmVhbVN0YXRlPTEsdC5nYXRld2F5Q2xpZW50LnB1Ymxpc2goaSx7c3RyZWFtVHlwZToxfSxmdW5jdGlvbigpe3QubG93U3RyZWFtU3RhdGU9MCxlJiZlKCl9LGZ1bmN0aW9uKGUpezE9PT10Lmxvd1N0cmVhbVN0YXRlJiYodC5sb3dTdHJlYW1TdGF0ZT0yKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIHB1Ymxpc2ggbG93IHN0cmVhbSBmYWlsZWRcIikpLG4mJm4oZSl9KX0sbil9LHQuX3VucHVibGlzaExvd1N0cmVhbT1mdW5jdGlvbihlLG4pe2lmKDAhPT10Lmxvd1N0cmVhbVN0YXRlKXJldHVybiBuJiZuKFYuTE9XX1NUUkVBTV9OT1RfWUVUX1BVQkxJU0hFRCk7dC5sb3dTdHJlYW0mJih0LmdhdGV3YXlDbGllbnQudW5wdWJsaXNoKHQubG93U3RyZWFtLHtzdHJlYW1UeXBlOjF9LGZ1bmN0aW9uKCl7fSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIHVucHVibGlzaCBsb3cgc3RyZWFtIGZhaWxlZFwiKSksbiYmbihlKX0pLHQubG93U3RyZWFtLmNsb3NlKCksdC5sb3dTdHJlYW09bnVsbCx0Lmxvd1N0cmVhbVN0YXRlPTIsZSYmZSgpKX0sdC5qb2luPWZ1bmN0aW9uKG4saSxhLHIsYyl7dmFyIGQ9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBjJiZjKGUpO3ImJnIodCl9LG5hbWU6XCJDbGllbnQuam9pblwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYobiYmIU9iamVjdChyZS5pc1ZhbGlkVG9rZW4pKG4pKXJldHVybiBvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gUGFyYW0gY2hhbm5lbEtleSBzaG91bGQgYmUgc3RyaW5nXCIpKSxkKFYuSU5WQUxJRF9QQVJBTUVURVIpO2lmKCFPYmplY3QocmUuaXNWYWxpZENoYW5uZWxOYW1lKShpKSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiSW52YWxpZCBDaGFubmVsIE5hbWUgXCIuY29uY2F0KGkpKSxvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gVGhlIGxlbmd0aCBtdXN0IGJlIHdpdGhpbiA2NCBieXRlcy4gVGhlIHN1cHBvcnRlZCBjaGFyYWN0ZXJzOiBhLXosQS1aLDAtOSxzcGFjZSwhLCAjLCAkLCAlLCAmLCAoLCApLCArLCAtLCA6LCA7LCA8LCA9LCAuLCA+LCA/LCBALCBbLCBdLCBeLCBfLCAgeywgfSwgfCwgfiwgLFwiKSksZChWLklOVkFMSURfUEFSQU1FVEVSKTtpZihcInN0cmluZ1wiPT10eXBlb2YgaSYmXCJcIj09PWkpcmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBQYXJhbSBjaGFubmVsIHNob3VsZCBub3QgYmUgZW1wdHlcIikpLGQoVi5JTlZBTElEX1BBUkFNRVRFUik7aWYoYSYmIU9iamVjdChuZS5pczMyVWludCkoYSkmJiFPYmplY3QocmUuaXNWYWxpZFN0cmluZykoYSwxLDI1NSkpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIkludmFsaWQgVUlEIFwiLmNvbmNhdChhLFwiIFwiKS5jb25jYXQoSGUoKShhKSkpLG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBbU3RyaW5nIHVpZF0gTGVuZ3RoIG9mIHRoZSBzdHJpbmc6IFsxLDI1NV0uIEFTQ0lJIGNoYXJhY3RlcnMgb25seS4gW051bWJlciB1aWRdIFRoZSB2YWx1ZSByYW5nZSBpcyBbMCwxMDAwMF1cIikpLGQoVi5JTlZBTElEX1BBUkFNRVRFUik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJjA9PWEubGVuZ3RoKXJldHVybiBvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gU3RyaW5nIHVpZCBzaG91bGQgbm90IGJlIGVtcHR5XCIpKSxkKFYuSU5WQUxJRF9QQVJBTUVURVIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBhJiZhLmxlbmd0aD4yNTYpcmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBMZW5ndGggb2Ygc3RyaW5nIHVpZCBzaG91bGQgYmUgbGVzcyB0aGFuIDI1NVwiKSksZChWLklOVkFMSURfUEFSQU1FVEVSKTt0LmhpZ2hTdHJlYW09bnVsbCx0Lmxvd1N0cmVhbT1udWxsLHQubG93U3RyZWFtUGFyYW1ldGVyPW51bGwsdC5pc0R1YWxTdHJlYW09ITEsdC5oaWdoU3RyZWFtU3RhdGU9Mix0Lmxvd1N0cmVhbVN0YXRlPTI7dmFyIHU9e2NsaWVudElkOnQuY2xpZW50SWQsYXBwSWQ6ZS5hcHBJZCxzaWQ6ZS5zZXNzaW9uSWQsY25hbWU6aSx1aWQ6YSx0dXJuU2VydmVyOnQudHVyblNlcnZlcixwcm94eVNlcnZlcjp0LnByb3h5U2VydmVyLHRva2VuOm58fGUuYXBwSWQsdXNlUHJveHlTZXJ2ZXI6dC51c2VQcm94eVNlcnZlcn07aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJih1LnN0cmluZ1VpZD1hLHQudWludFVpZD8odS51aWQ9dC51aW50VWlkLGRlbGV0ZSB0LnVpbnRVaWQpOnUudWlkPTApLHQuYWVzcGFzc3dvcmQmJlwibm9uZVwiIT09dC5hZXNtb2RlJiZTKCkodSx7YWVzcGFzc3dvcmQ6dC5hZXNwYXNzd29yZCxhZXNtb2RlOnQuYWVzbW9kZX0pLHMuYi5zZXNzaW9uSW5pdChlLnNlc3Npb25JZCx7bHRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGNuYW1lOmksYXBwaWQ6ZS5hcHBJZCxtb2RlOmUubW9kZSxzdWNjOiEwfSksdC5vblN1Y2Nlc3M9ZnVuY3Rpb24oZSl7dC5ydGNTdGF0c0NvbGxlY3Rvci5zdGFydE5ldHdvcmtRdWFsaXR5VGltZXIoKSx0Lm9uU3VjY2Vzcz1udWxsLGQobnVsbCxlKX0sdC5vbkZhaWx1cmU9ZnVuY3Rpb24oZSl7cmV0dXJuIGQoZSl9LHQuY2hhbm5lbD1pLHQuZ2F0ZXdheUNsaWVudC5zdGF0ZSE9PVJ0LkRJU0NPTk5FQ1RFRClyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBDbGllbnQgYWxyZWFkeSBpbiBjb25uZWN0aW5nL2Nvbm5lY3RlZCBzdGF0ZVwiKSksZChWLklOVkFMSURfT1BFUkFUSU9OKSx2b2lkIHMuYi5qb2luR2F0ZXdheShlLnNlc3Npb25JZCx7bHRzOkRhdGUubm93KCksc3VjYzohMSxlYzpWLklOVkFMSURfT1BFUkFUSU9OLGFkZHI6bnVsbH0pO3QuZ2F0ZXdheUNsaWVudC5zdGF0ZT1SdC5DT05ORUNUSU5HO3ZhciBsPWZ1bmN0aW9uKGEscil7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIEpvaW5pbmcgY2hhbm5lbDogXCIpLmNvbmNhdChpKSksdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjb25maWctZGlzdHJpYnV0ZVwiLGNvbmZpZzpyLGpvaW5JbmZvOnV9KSx0LmtleT1ufHxlLmFwcElkLHUuY2lkPWEuY2lkLHUudWlkfHwodS51aWQ9YS51aWQpLHUudmlkPWEudmlkLHUuY2xpZW50SWQ9dC5jbGllbnRJZCx1LmFwUmVzcG9uc2U9YS5yZXMsYS51bmlfbGJzX2lwJiZhLnVuaV9sYnNfaXBbMV0mJih1LnVuaV9sYnNfaXA9YS51bmlfbGJzX2lwWzFdKSx1LmdhdGV3YXlBZGRyPWEuZ2F0ZXdheV9hZGRyLHQuam9pbkluZm89dSx0LmdhdGV3YXlDbGllbnQuam9pbih1LHQua2V5LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBKb2luIGNoYW5uZWwgXCIpLmNvbmNhdChpLFwiIHN1Y2Nlc3MsIGpvaW4gd2l0aCB1aWQ6IFwiKS5jb25jYXQoZSxcIi5cIikpLHQub25TdWNjZXNzPW51bGwsdC5ydGNTdGF0c0NvbGxlY3Rvci5zdGFydE5ldHdvcmtRdWFsaXR5VGltZXIoKSxkKG51bGwsZSl9LGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpfSl9O3Uuc3RyaW5nVWlkJiYhdS51aWQ/KHQudXNlckFjY291bnRSZXEmJiF0LnVzZXJBY2NvdW50UmVxLmlzRmluaXNoZWQoKSYmdC51c2VyQWNjb3VudFJlcS5jYW5jZWwoKSx0LnVzZXJBY2NvdW50UmVxPWd0KHUsdC5nYXRld2F5Q2xpZW50KSx0LnVzZXJBY2NvdW50UmVxLnRoZW4oZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiZ2V0VXNlckFjY291bnQgU3VjY2VzcyBcIi5jb25jYXQoZS51cmwsXCIgXCIpLmNvbmNhdCh1LnN0cmluZ1VpZCxcIiA9PiBcIikuY29uY2F0KGUudWlkKSksdS51aWQ9ZS51aWQsZnQodSxsLGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpfSl9KS5jYXRjaChmdW5jdGlvbihlKXtvLmRlZmF1bHQuZXJyb3IoXCJnZXRVc2VyQWNjb3VudCByZWplY3RlZFwiLGUpLGQoZSl9KSk6ZnQodSxsLGZ1bmN0aW9uKGUpe3JldHVybiBkKGUpfSl9LHQucmVuZXdDaGFubmVsS2V5PWZ1bmN0aW9uKG4saSxhKXt2YXIgcj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGEmJmEoZSk7aSYmaSh0KX0sbmFtZTpcIkNsaWVudC5yZW5ld0NoYW5uZWxLZXlcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShuLFwia2V5XCIsMSwyMDQ3KSx2b2lkIDA9PT10LmtleT8oby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSByZW5ld0NoYW5uZWxLZXkgc2hvdWxkIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHVzZXIgam9pblwiKSkscihWLklOVkFMSURfT1BFUkFUSU9OKSk6KHQua2V5PW4sdC5nYXRld2F5Q2xpZW50LmpvaW5JbmZvLnRva2VuPW4sdC5nYXRld2F5Q2xpZW50LmtleT1uLHQuZ2F0ZXdheUNsaWVudC5yZWNvdmVyKCkscigpKX0sdC5sZWF2ZT1mdW5jdGlvbihuLGkpe3QuZ2F0ZXdheUNsaWVudC5oYXNJbnZva2VMZWF2ZT0hMDt2YXIgYT0hMSxjPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsYSl7aWYoZSlyZXR1cm4gaSYmaShlKTt2YXIgcjt0LmdhdGV3YXlDbGllbnQucmVjb25uZWN0aW5nQ1M9ITEsY2xlYXJUaW1lb3V0KChyPXQuY2xpZW50SWQsdXRbcl0pKSx0Ll9yZW5ld1Nlc3Npb24oKSx0LnJ0Y1N0YXRzQ29sbGVjdG9yLmNsZWFyTmV0d29ya1F1YWxpdHlUaW1lcigpLG4mJm4oYSl9LG5hbWU6XCJDbGllbnQubGVhdmVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBMZWF2aW5nIGNoYW5uZWxcIikpLHQudXNlckFjY291bnRSZXEmJiF0LnVzZXJBY2NvdW50UmVxLmlzRmluaXNoZWQoKSYmKHQudXNlckFjY291bnRSZXEuY2FuY2VsKCksdC5nYXRld2F5Q2xpZW50LnN0YXRlPT09UnQuQ09OTkVDVElORyYmKHQuZ2F0ZXdheUNsaWVudC5zdGF0ZT1SdC5ESVNDT05ORUNURUQpKSx0LmdhdGV3YXlDbGllbnQubGVhdmUoZnVuY3Rpb24oZSl7YT0hMCxjKG51bGwsZSl9LGMpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXthfHwodC5nYXRld2F5Q2xpZW50LnNvY2tldCYmKHQuZ2F0ZXdheUNsaWVudC5zb2NrZXQuY2xvc2UoKSx0LmdhdGV3YXlDbGllbnQuc29ja2V0PW51bGwpLHQuZ2F0ZXdheUNsaWVudC5zdGF0ZT1SdC5ESVNDT05ORUNURUQsYyhudWxsLFwiTEVBVkVfTVNHX1RJTUVPVVRcIikpfSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiTEVBVkVfTVNHX1RJTUVPVVRcIikpfSx0Ll9yZW5ld1Nlc3Npb249ZnVuY3Rpb24oKXt2YXIgbj1PYmplY3QobmUuZ2VuZXJhdGVTZXNzaW9uSWQpKCk7aWYoby5kZWZhdWx0LmRlYnVnKFwicmVuZXdTZXNzaW9uIFwiLmNvbmNhdChlLnNlc3Npb25JZCxcIiA9PiBcIikuY29uY2F0KG4pKSxlLnNlc3Npb25JZD1uLHQuam9pbkluZm8mJih0LmpvaW5JbmZvLnNpZD1uKSx0LmdhdGV3YXlDbGllbnQmJih0LmdhdGV3YXlDbGllbnQuam9pbkluZm8mJih0LmdhdGV3YXlDbGllbnQuam9pbkluZm8uc2lkPW4pLHQuZ2F0ZXdheUNsaWVudC5sb2NhbFN0cmVhbXMpKWZvcih2YXIgaSBpbiB0LmdhdGV3YXlDbGllbnQubG9jYWxTdHJlYW1zKXt2YXIgYT10LmdhdGV3YXlDbGllbnQubG9jYWxTdHJlYW1zW2ldO2EmJihhLnNpZD1uKX19LHQuX3B1Ymxpc2g9ZnVuY3Rpb24obixpLGEscyl7aWYoMiE9PXQuaGlnaFN0cmVhbVN0YXRlKXJldHVybiBvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gQ2FuJ3QgcHVibGlzaCBzdHJlYW0gd2hlbiBzdHJlYW0gYWxyZWFkeSBwdWJsaXNoIFwiKS5jb25jYXQobi5nZXRJZCgpKSksYSYmYShWLlNUUkVBTV9BTFJFQURZX1BVQkxJU0hFRCk7aWYoXCJhdXRvXCI9PT10LnR1cm5TZXJ2ZXIubW9kZSYmT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkZPUkNFX1RVUk5cIikmJiFPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiVFVSTl9FTkFCTEVfVENQXCIpJiYhT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlRVUk5fRU5BQkxFX1VEUFwiKSl0aHJvdyBuZXcgRXJyb3IoXCJmb3JjZSBUVVJOIFdpdGggTm8gVFVSTiBDb25maWd1cmF0aW9uXCIpO28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBQdWJsaXNoaW5nIHN0cmVhbSwgdWlkIFwiKS5jb25jYXQobi5nZXRJZCgpKSksdC5oaWdoU3RyZWFtPW4sdC5oaWdoU3RyZWFtU3RhdGU9MSx0LmhpZ2hTdHJlYW0uc3RyZWFtSWQ9dC5qb2luSW5mby5zdHJpbmdVaWR8fHQuam9pbkluZm8udWlkLHQuaGFzUHVibGlzaGVkPSExO3ZhciBjPWZ1bmN0aW9uKG4saSxhKXt0LmdhdGV3YXlDbGllbnQucHVibGlzaChuLHtzdHJlYW1UeXBlOjB9LGZ1bmN0aW9uKCl7bi5zaWQ9ZS5zZXNzaW9uSWQsdC5oaWdoU3RyZWFtU3RhdGU9MCxvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gUHVibGlzaCBzdWNjZXNzLCB1aWQ6IFwiKS5jb25jYXQobi5nZXRJZCgpKSksdC5oaWdoU3RyZWFtJiYodC5oaWdoU3RyZWFtLmlzRHVhbFN0cmVhbT10LmlzRHVhbFN0cmVhbSksdC5pc0R1YWxTdHJlYW0/dC5fcHVibGlzaExvd1N0cmVhbShmdW5jdGlvbigpe2kmJmkoKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFwiKSxlKSxGZS5yZXBsYWNlV2l0aENhbnZhc1RyYWNrKG4pLGkmJmkoKX0pOihGZS5yZXBsYWNlV2l0aENhbnZhc1RyYWNrKG4pLGkmJmkoKSl9LGEpfTtcImF1ZGllbmNlXCIhPT10LmdhdGV3YXlDbGllbnQucm9sZXx8XCJsaXZlXCIhPT10Lm1vZGV8fHM/YyhuLGksYSk6dC5nYXRld2F5Q2xpZW50LnNldENsaWVudFJvbGUoXCJob3N0XCIsZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm4gYSYmYShlKTtjKG4saSxhKX0pfSx0Ll91bnB1Ymxpc2g9ZnVuY3Rpb24oZSxuLGksYSl7aWYoMCE9PXQuaGlnaFN0cmVhbVN0YXRlKXJldHVybiBvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gQ2FuJ3QgdW5wdWJsaXNoIHN0cmVhbSB3aGVuIHN0cmVhbSBub3QgcHVibGlzaFwiKSksaSYmaShWLlNUUkVBTV9OT1RfWUVUX1BVQkxJU0hFRCk7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFVucHVibGlzaCBzdHJlYW0sIHVpZCBcIikuY29uY2F0KGUuZ2V0SWQoKSkpO3ZhciByPWZ1bmN0aW9uKGUsbixpKXt0LmlzRHVhbFN0cmVhbSYmdC5sb3dTdHJlYW0mJnQuX3VucHVibGlzaExvd1N0cmVhbShudWxsLGkpLHQuZ2F0ZXdheUNsaWVudC51bnB1Ymxpc2goZSx7c3RyZWFtVHlwZTowfSxmdW5jdGlvbigpe3QuaGlnaFN0cmVhbVN0YXRlPTIsby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFVucHVibGlzaCBzdHJlYW0gc3VjY2VzcywgdWlkOiBcIikuY29uY2F0KGUuZ2V0SWQoKSkpLG4mJm4oKX0sZnVuY3Rpb24obil7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFVucHVibGlzaCBzdHJlYW0gZmFpbCwgdWlkOiBcIikuY29uY2F0KGUuZ2V0SWQoKSkpLGkmJmkobil9KX07XCJob3N0XCIhPT10LmdhdGV3YXlDbGllbnQucm9sZXx8XCJsaXZlXCIhPT10Lm1vZGV8fGE/cihlLG4saSk6dC5nYXRld2F5Q2xpZW50LnNldENsaWVudFJvbGUoXCJhdWRpZW5jZVwiLGZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuIGkmJmkodCk7cihlLG4saSl9KX0sdC5wdWJsaXNoPWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSxuKXtpZihlKXJldHVybiAxPT09dC5oaWdoU3RyZWFtU3RhdGUmJih0LmhpZ2hTdHJlYW1TdGF0ZT0yKSxpJiZpKGUpfSxuYW1lOlwiQ2xpZW50LnB1Ymxpc2hcIix0YWc6XCJ0cmFjZXJcIixvcHRpb25zOntzdHJlYW06XCJ0b28gbG9uZyB0byBzaG93XCIsb25GYWlsdXJlOiEhaX19KTsyPT09dC5oaWdoU3RyZWFtU3RhdGU/bi5faGFzVmlkZW9UcmFja3MoKXx8bi5faGFzQXVkaW9UcmFja3MoKT90Ll9wdWJsaXNoKG4sZnVuY3Rpb24oZSl7cmV0dXJuIGEobnVsbCxlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIGEoZSl9KTphKFYuTk9fVFJBQ0tfSU5fU1RSRUFNKTphKFYuU1RSRUFNX0FMUkVBRFlfUFVCTElTSEVEKX0sdC51bnB1Ymxpc2g9ZnVuY3Rpb24obixpLGEpe3ZhciByPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gaSYmaShlKTthJiZhKHQpfSxuYW1lOlwiQ2xpZW50LnVucHVibGlzaFwiLHRhZzpcInRyYWNlclwiLG9wdGlvbnM6e3N0cmVhbTpcInRvbyBsb25nIHRvIHNob3dcIixvbkZhaWx1cmU6ISFpfX0pOzA9PT10LmhpZ2hTdHJlYW1TdGF0ZT90Ll91bnB1Ymxpc2gobixmdW5jdGlvbihlKXtyZXR1cm4gcihudWxsLGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gcihlKX0pOnIoVi5TVFJFQU1fTk9UX1lFVF9QVUJMSVNIRUQpfSx0LnN1YnNjcmliZT1mdW5jdGlvbihuLGksYSl7dmFyIHI9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBhJiZhKGUpfSxuYW1lOlwiQ2xpZW50LnN1YnNjcmliZVwiLHRhZzpcInRyYWNlclwiLG9wdGlvbnM6e3N0cmVhbTpcInRvbyBsb25nIHRvIHNob3dcIixvcHRpb25zOmksb25GYWlsdXJlOiEhYX19KTtcImZ1bmN0aW9uXCI9PXR5cGVvZiBpJiYoYT1pLGk9bnVsbCksT2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKG4sXCJzdHJlYW1cIiksT2JqZWN0KHJlLmlzRW1wdHkpKGkpfHwoT2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKGksXCJvcHRpb25zXCIpLE9iamVjdChyZS5pc0VtcHR5KShpLnZpZGVvKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShpLnZpZGVvLFwib3B0aW9ucy52aWRlb1wiKSxPYmplY3QocmUuaXNFbXB0eSkoaS5hdWRpbyl8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoaS5hdWRpbyxcIm9wdGlvbnMuYXVkaW9cIikpO3ZhciBjPXt2aWRlbzohMCxhdWRpbzohMH07aWYoIU9iamVjdChyZS5pc0VtcHR5KShpKSl7aWYoT2JqZWN0KG0uaXNTYWZhcmkpKCkmJighaS52aWRlb3x8IWkuYXVkaW8pKXt2YXIgZD1cIlNBRkFSSV9OT1RfU1VQUE9SVEVEX0ZPUl9UUkFDS19TVUJTQ1JJUFRJT05cIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBcIiksZCksdm9pZCByKGQpfWlmKCFPYmplY3QocmUuaXNFbXB0eSkoaS52aWRlbykmJiFPYmplY3QocmUuaXNWYWxpZEJvb2xlYW4pKGkudmlkZW8pfHwhT2JqZWN0KHJlLmlzRW1wdHkpKGkuYXVkaW8pJiYhT2JqZWN0KHJlLmlzVmFsaWRCb29sZWFuKShpLmF1ZGlvKXx8ITE9PT1pLmF1ZGlvJiYhMT09PWkudmlkZW8pe2Q9XCJJTlZBTElEX1BBUkFNRVRFUiBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkoaSkpO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFwiKSxkKSx2b2lkIHIoZCl9fW4uc3Vic2NyaWJlT3B0aW9ucz8oUygpKG4uc3Vic2NyaWJlT3B0aW9ucyxjLGkpLHQuZ2F0ZXdheUNsaWVudC5zdWJzY3JpYmVDaGFuZ2UobixmdW5jdGlvbihlKXtyZXR1cm4gcihudWxsLGUpfSxyKSk6KG4uc3Vic2NyaWJlT3B0aW9ucz1TKCkoe30sYyxpKSx0LmdhdGV3YXlDbGllbnQuc3Vic2NyaWJlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIHIobnVsbCxlKX0scikpfSx0LnVuc3Vic2NyaWJlPWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBpJiZpKGUpfSxuYW1lOlwiQ2xpZW50LnVuc3Vic2NyaWJlXCIsdGFnOlwidHJhY2VyXCIsb3B0aW9uczp7c3RyZWFtOlwidG9vIGxvbmcgdG8gc2hvd1wiLG9uRmFpbHVyZTohIWl9fSk7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFVuc3Vic2NyaWJlIHN0cmVhbSwgdWlkOiBcIikuY29uY2F0KG4uZ2V0SWQoKSkpLHQuZ2F0ZXdheUNsaWVudC51bnN1YnNjcmliZShuLGZ1bmN0aW9uKGUpe3JldHVybiBhKG51bGwsZSl9LGEpfSx0LnNldFJlbW90ZVZpZGVvU3RyZWFtVHlwZT1mdW5jdGlvbihuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc2V0UmVtb3RlVmlkZW9TdHJlYW1UeXBlXCIsdGFnOlwidHJhY2VyXCIsb3B0aW9uczp7c3RyZWFtOlwidG9vIGxvbmcgdG8gc2hvd1wiLHN0cmVhbVR5cGU6aX19KTtPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKGksXCJzdHJlYW1UeXBlXCIsWzAsMV0pLHQuZ2F0ZXdheUNsaWVudC5zZXRSZW1vdGVWaWRlb1N0cmVhbVR5cGUobixpKSxhKCl9LHQuc2V0U3RyZWFtRmFsbGJhY2tPcHRpb249ZnVuY3Rpb24obixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LnNldFN0cmVhbUZhbGxiYWNrT3B0aW9uXCIsdGFnOlwidHJhY2VyXCIsb3B0aW9uczp7c3RyZWFtOlwidG9vIGxvbmcgdG8gc2hvd1wiLGZhbGxiYWNrVHlwZTppfX0pO09iamVjdChyZS5jaGVja1ZhbGlkRW51bSkoaSxcImZhbGxiYWNrVHlwZVwiLFswLDEsMl0pLHQuZ2F0ZXdheUNsaWVudC5zZXRTdHJlYW1GYWxsYmFja09wdGlvbihuLGkpLGEoKX0sdC5lbmFibGVBdWRpb1ZvbHVtZUluZGljYXRvcj1mdW5jdGlvbihuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuZW5hYmxlQXVkaW9Wb2x1bWVJbmRpY2F0b3JcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO249bnx8MmUzLGk9aXx8MyxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoaSxcInNtb290aFwiLDEsMTAwKSxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikobixcImludGVydmFsXCIsNTAsMWU1KSx0LmF1ZGlvVm9sdW1lSW5kaWNhdGlvbj10LmF1ZGlvVm9sdW1lSW5kaWNhdGlvbnx8e2VuYWJsZWQ6ITB9LHQuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uLmludGVydmFsPW4sdC5hdWRpb1ZvbHVtZUluZGljYXRpb24uc21vb3RoPWksdC5hdWRpb1ZvbHVtZUluZGljYXRpb249e2ludGVydmFsOm4sc21vb3RoOml9LG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBlbmFibGVBdWRpb1ZvbHVtZUluZGljYXRvciBpbnRlcnZhbCBcIikuY29uY2F0KG4sXCIgc21vb3RoIFwiKS5jb25jYXQoaSkpLHQuZ2F0ZXdheUNsaWVudC5lbmFibGVBdWRpb1ZvbHVtZUluZGljYXRvcihuLGkpLGEoKX0sdC5nZXROZXR3b3JrU3RhdHM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gby5kZWZhdWx0LmRlcHJlY2F0ZShcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gY2xpZW50LmdldE5ldHdvcmtTdGF0cyBpcyBkZXByZWNhdGVkLiBVc2UgY2xpZW50LmdldFRyYW5zcG9ydFN0YXRzIGluc3RlYWQuXCIpKSx3dC5nZXRTdGF0cyhlLG4pfSx0LmdldFN5c3RlbVN0YXRzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHYuZ2V0U3RhdHMoZSx0KX0sdC5nZXRSZWNvcmRpbmdEZXZpY2VzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFlLmdldFJlY29yZGluZ0RldmljZXMoZSx0KX0sdC5nZXRQbGF5b3V0RGV2aWNlcz1mdW5jdGlvbihlLHQpe3JldHVybiBhZS5nZXRQbGF5b3V0RGV2aWNlcyhlLHQpfSx0LmdldENhbWVyYXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYWUuZ2V0Q2FtZXJhcyhlLHQpfSx0LmdldFJlbW90ZUF1ZGlvU3RhdHM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5ydGNTdGF0c0NvbGxlY3Rvci5nZXRSZW1vdGVBdWRpb1N0YXRzKGUsbil9LHQuZ2V0TG9jYWxBdWRpb1N0YXRzPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucnRjU3RhdHNDb2xsZWN0b3IuZ2V0TG9jYWxBdWRpb1N0YXRzKGUsbil9LHQuZ2V0UmVtb3RlVmlkZW9TdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLmdldFJlbW90ZVZpZGVvU3RhdHMoZSxuKX0sdC5nZXRMb2NhbFZpZGVvU3RhdHM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5ydGNTdGF0c0NvbGxlY3Rvci5nZXRMb2NhbFZpZGVvU3RhdHMoZSxuKX0sdC5fZ2V0UmVtb3RlVmlkZW9RdWFsaXR5U3RhdHM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5ydGNTdGF0c0NvbGxlY3Rvci5nZXRSZW1vdGVWaWRlb1F1YWxpdHlTdGF0cyhlLG4pfSx0Ll9nZXRSZW1vdGVBdWRpb1F1YWxpdHlTdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLmdldFJlbW90ZUF1ZGlvUXVhbGl0eVN0YXRzKGUsbil9LHQuZ2V0VHJhbnNwb3J0U3RhdHM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5ydGNTdGF0c0NvbGxlY3Rvci5nZXRUcmFuc3BvcnRTdGF0cyhmdW5jdGlvbih0KXtyZXR1cm4gd3QuZ2V0U3RhdHMoZnVuY3Rpb24obil7dmFyIGk9UygpKHt9LHQsbik7ZSYmZShpKX0sbil9LG4pfSx0LmdldFNlc3Npb25TdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLmdldFNlc3Npb25TdGF0cyhlLG4pfSx0Lm9uTmV0d29ya1F1YWxpdHk9ZnVuY3Rpb24oKXtyZXR1cm4gdC5ydGNTdGF0c0NvbGxlY3Rvci5vbk5ldHdvcmtRdWFsaXR5KG9uU3VjY2VzcyxvbkZhaWx1cmUpfSxlLmNsaWVudElkPXQuY2xpZW50SWQsdC5nYXRld2F5Q2xpZW50PVJ0KGUpLHQubGlzdGVuZXJMb2dnZXJUaW1lcj1udWxsLHQubGlzdGVuZXJMb2dnZXJDYWNoZT1bXSx0Lm9uPWZ1bmN0aW9uKGUsbil7dC5nYXRld2F5Q2xpZW50Lm9uKGUsbiksdC5saXN0ZW5lckxvZ2dlckNhY2hlLnB1c2goXCJcIi5jb25jYXQoZSkuY29uY2F0KG4ubmFtZT9cIjpcIituLm5hbWU6XCJcIikpLHQubGlzdGVuZXJMb2dnZXJUaW1lcj9jbGVhclRpbWVvdXQodC5saXN0ZW5lckxvZ2dlclRpbWVyKTpvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gQWRkaW5nIGV2ZW50IGhhbmRsZXIgb24gXCIpLmNvbmNhdChlKSksdC5saXN0ZW5lckxvZ2dlclRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0Lmxpc3RlbmVyTG9nZ2VyQ2FjaGUubGVuZ3RoJiYodC5saXN0ZW5lckxvZ2dlclRpbWVyPW51bGwsby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIEFkZGVkIGV2ZW50IGhhbmRsZXIgb24gXCIpLmNvbmNhdCh0Lmxpc3RlbmVyTG9nZ2VyQ2FjaGUuam9pbihcIiwgXCIpKSksdC5saXN0ZW5lckxvZ2dlckNhY2hlPVtdKX0sMCl9LHQub2ZmPWZ1bmN0aW9uKGUsbil7by5kZWZhdWx0LmluZm8oXCJyZW1vdmUgZXZlbnQgaGFuZGxlciBmcm9tIFtcIi5jb25jYXQoZSxcIl1cIikpLHQuZ2F0ZXdheUNsaWVudC5yZW1vdmVFdmVudExpc3RlbmVyKGUsbil9LHQucnRjU3RhdHNDb2xsZWN0b3I9ZnVuY3Rpb24oZSl7dmFyIHQ9YygpO3JldHVybiB0LmdhdGV3YXlDbGllbnQ9ZSx0LmV4Y2VwdGlvbk1vbml0b3I9bmV3IE50KGUpLHQubG9jYWxTdGF0cz17fSx0LnJlbW90ZVN0YXRzPXt9LHQuc2Vzc2lvbj17c2VuZEJ5dGVzOjAscmVjdkJ5dGVzOjAsV1NTZW5kQnl0ZXM6MCxXU1NlbmRCeXRlc0RlbHRhOjAsV1NSZWN2Qnl0ZXM6MCxXU1JlY3ZCeXRlc0RlbHRhOjAsSFRUUFNlbmRCeXRlczowLEhUVFBTZW5kQnl0ZXNEZWx0YTowLEhUVFBSZWN2Qnl0ZXM6MCxIVFRQUmVjdkJ5dGVzRGVsdGE6MH0sdC5nZXRSZW1vdGVBdWRpb1N0YXRzPWZ1bmN0aW9uKGUpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiB0LnJlbW90ZVN0YXRzKXt2YXIgYT17fSxyPXQucmVtb3RlU3RhdHNbaV07aWUoYSxcIkVuZDJFbmREZWxheVwiLHIucGVlcl9kZWxheSYmci5wZWVyX2RlbGF5LmF1ZGlvX2RlbGF5KSxpZShhLFwiVHJhbnNwb3J0RGVsYXlcIixyLnBlZXJfZGVsYXkmJnIucGVlcl9kZWxheS5lMmVfZGVsYXkpLGllKGEsXCJQYWNrZXRMb3NzUmF0ZVwiLHIucGVlcl9kZWxheSYmci5wZWVyX2RlbGF5LmUyZV9hdWRpb19sb3N0X3JhdGlvXzQwMG1zKSxpZShhLFwiUmVjdkxldmVsXCIsci5hdWRpb1N0YXRzJiZyLmF1ZGlvU3RhdHMuYXVkaW9PdXRwdXRMZXZlbCksaWUoYSxcIlJlY3ZCaXRyYXRlXCIsci5hdWRpb1JlY3ZCaXRyYXRlKSxpZShhLFwiQ29kZWNUeXBlXCIsci5hdWRpb1N0YXRzJiZyLmF1ZGlvU3RhdHMuZ29vZ0NvZGVjTmFtZSksaWUoYSxcIk11dGVTdGF0ZVwiLHIuYXVkaW9EaXNhYmxlZCksaWUoYSxcIlRvdGFsRnJlZXplVGltZVwiLHIuYXVkaW9TdGF0cyYmci5hdWRpb1N0YXRzLmF1ZGlvVG90YWxGcmVlemVUaW1lKSxpZShhLFwiVG90YWxQbGF5RHVyYXRpb25cIixyLmF1ZGlvU3RhdHMmJnIuYXVkaW9TdGF0cy5hdWRpb1RvdGFsUGxheUR1cmF0aW9uKSxuW2ldPWF9ZSYmZShuKX0sdC5nZXRMb2NhbEF1ZGlvU3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQubG9jYWxTdGF0cyl7dmFyIGE9e30scj10LmxvY2FsU3RhdHNbaV07aWUoYSxcIlJlY29yZGluZ0xldmVsXCIsci5hdWRpb1N0YXRzJiZyLmF1ZGlvU3RhdHMuYXVkaW9JbnB1dExldmVsKSxpZShhLFwiU2VuZExldmVsXCIsci5hdWRpb1N0YXRzJiZyLmF1ZGlvU3RhdHMudG90YWxBdWRpb0VuZXJneSksaWUoYSxcIlNhbXBsaW5nUmF0ZVwiLHIuYXVkaW9TdGF0cyYmci5hdWRpb1N0YXRzLnRvdGFsU2FtcGxlc0R1cmF0aW9uKSxpZShhLFwiU2VuZEJpdHJhdGVcIixyLmF1ZGlvU2VuZEJpdHJhdGUpLGllKGEsXCJDb2RlY1R5cGVcIixyLmF1ZGlvU3RhdHMmJnIuYXVkaW9TdGF0cy5nb29nQ29kZWNOYW1lKSxpZShhLFwiTXV0ZVN0YXRlXCIsci5hdWRpb0Rpc2FibGVkKTt2YXIgbz10LmdhdGV3YXlDbGllbnQubG9jYWxTdHJlYW1zW2ldO28mJm8uaXNQbGF5aW5nKCkmJmllKGEsXCJNdXRlU3RhdGVcIixvLnVzZXJNdXRlQXVkaW8/XCIxXCI6XCIwXCIpLG5baV09YX1lJiZlKG4pfSx0LmdldFJlbW90ZVZpZGVvU3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQucmVtb3RlU3RhdHMpe3ZhciBhPXt9LHI9dC5yZW1vdGVTdGF0c1tpXTtpZShhLFwiRW5kMkVuZERlbGF5XCIsci5wZWVyX2RlbGF5JiZyLnBlZXJfZGVsYXkudmlkZW9fZGVsYXkpLGllKGEsXCJUcmFuc3BvcnREZWxheVwiLHIucGVlcl9kZWxheSYmci5wZWVyX2RlbGF5LmUyZV9kZWxheSksaWUoYSxcIlBhY2tldExvc3NSYXRlXCIsci5wZWVyX2RlbGF5JiZyLnBlZXJfZGVsYXkuZTJlX3ZpZGVvX2xvc3RfcmF0aW9fNDAwbXMpLGllKGEsXCJSZWN2Qml0cmF0ZVwiLHIudmlkZW9SZWN2Qml0cmF0ZSksaWUoYSxcIlJlY3ZSZXNvbHV0aW9uV2lkdGhcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nRnJhbWVXaWR0aFJlY2VpdmVkKSxpZShhLFwiUmVjdlJlc29sdXRpb25IZWlnaHRcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nRnJhbWVIZWlnaHRSZWNlaXZlZCksaWUoYSxcIlJlbmRlclJlc29sdXRpb25XaWR0aFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLnJlbmRlclJlbW90ZVdpZHRoKSxpZShhLFwiUmVuZGVyUmVzb2x1dGlvbkhlaWdodFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLnJlbmRlclJlbW90ZUhlaWdodCksaWUoYSxcIlJlbmRlckZyYW1lUmF0ZVwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZVJhdGVPdXRwdXQpLGllKGEsXCJNdXRlU3RhdGVcIixyLnZpZGVvRGlzYWJsZWQpLGllKGEsXCJUb3RhbEZyZWV6ZVRpbWVcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy52aWRlb1RvdGFsRnJlZXplVGltZSksaWUoYSxcIlRvdGFsUGxheUR1cmF0aW9uXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMudmlkZW9Ub3RhbFBsYXlEdXJhdGlvbiksbltpXT1hfWUmJmUobil9LHQuZ2V0TG9jYWxWaWRlb1N0YXRzPWZ1bmN0aW9uKGUpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiB0LmxvY2FsU3RhdHMpe3ZhciBhPXt9LHI9dC5sb2NhbFN0YXRzW2ldO2llKGEsXCJUYXJnZXRTZW5kQml0cmF0ZVwiLHIudmlkZW9UYXJnZXRTZW5kQml0cmF0ZSksaWUoYSxcIlNlbmRGcmFtZVJhdGVcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nRnJhbWVSYXRlU2VudCksaWUoYSxcIlNlbmRCaXRyYXRlXCIsci52aWRlb1NlbmRCaXRyYXRlKSxpZShhLFwiU2VuZFJlc29sdXRpb25XaWR0aFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZVdpZHRoU2VudCksaWUoYSxcIlNlbmRSZXNvbHV0aW9uSGVpZ2h0XCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lSGVpZ2h0U2VudCksaWUoYSxcIkNhcHR1cmVSZXNvbHV0aW9uV2lkdGhcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nRnJhbWVXaWR0aElucHV0KSxpZShhLFwiQ2FwdHVyZVJlc29sdXRpb25IZWlnaHRcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nRnJhbWVIZWlnaHRJbnB1dCksaWUoYSxcIkVuY29kZURlbGF5XCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMuZ29vZ0F2Z0VuY29kZU1zKSxpZShhLFwiTXV0ZVN0YXRlXCIsci52aWRlb0Rpc2FibGVkKSxpZShhLFwiVG90YWxGcmVlemVUaW1lXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMudmlkZW9Ub3RhbEZyZWV6ZVRpbWUpLGllKGEsXCJUb3RhbER1cmF0aW9uXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMudmlkZW9Ub3RhbFBsYXlEdXJhdGlvbiksaWUoYSxcIkNhcHR1cmVGcmFtZVJhdGVcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nRnJhbWVSYXRlU2VudCksci52aWRlb1N0YXRzJiYhci52aWRlb1N0YXRzLmdvb2dGcmFtZVdpZHRoSW5wdXQmJmllKGEsXCJDYXB0dXJlUmVzb2x1dGlvbldpZHRoXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMucmVuZGVyTG9jYWxXaWR0aCksci52aWRlb1N0YXRzJiYhci52aWRlb1N0YXRzLmdvb2dGcmFtZUhlaWdodElucHV0JiZpZShhLFwiQ2FwdHVyZVJlc29sdXRpb25IZWlnaHRcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5yZW5kZXJMb2NhbEhlaWdodCksbltpXT1hLGUmJmUobil9fSx0LmdldFJlbW90ZVZpZGVvUXVhbGl0eVN0YXRzPWZ1bmN0aW9uKGUpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiB0LnJlbW90ZVN0YXRzKXt2YXIgYT17fSxyPXQucmVtb3RlU3RhdHNbaV07aWUoYSxcInZpZGVvUmVjZWl2ZURlbGF5XCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMuZ29vZ0N1cnJlbnREZWxheU1zKSxpZShhLFwiVmlkZW9GcmVlemVSYXRlXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMudmlkZW9GcmVlemVSYXRlKSxpZShhLFwiRmlyc3RGcmFtZVRpbWVcIixyLmZpcnN0RnJhbWVUaW1lKSxuW2ldPWF9ZSYmZShuKX0sdC5nZXRSZW1vdGVBdWRpb1F1YWxpdHlTdGF0cz1mdW5jdGlvbihlKXt2YXIgbj17fTtmb3IodmFyIGkgaW4gdC5yZW1vdGVTdGF0cyl7dmFyIGE9e30scj10LnJlbW90ZVN0YXRzW2ldO2llKGEsXCJhdWRpb1JlY2VpdmVEZWxheVwiLHIuYXVkaW9TdGF0cyYmci5hdWRpb1N0YXRzLmdvb2dDdXJyZW50RGVsYXlNcyksaWUoYSxcIkF1ZGlvRnJlZXplUmF0ZVwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLnZpZGVvRnJlZXplUmF0ZSksbltpXT1hfWUmJmUobil9LHQuZ2V0VHJhbnNwb3J0U3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e30saT17fSxhPXQuZ2F0ZXdheUNsaWVudC50cmFmZmljX3N0YXRzLHI9YS5wZWVyX2RlbGF5O2lmKGllKG4sXCJPdXRnb2luZ0F2YWlsYWJsZUJhbmR3aWR0aFwiLHQuZ2F0ZXdheUNsaWVudC5PdXRnb2luZ0F2YWlsYWJsZUJhbmR3aWR0aC8xZTMpLGllKG4sXCJSVFRcIixhJiZhLmFjY2Vzc19kZWxheSkscil7dmFyIG89ITAscz0hMSxjPXZvaWQgMDt0cnl7Zm9yKHZhciBkLHU9cltTeW1ib2wuaXRlcmF0b3JdKCk7IShvPShkPXUubmV4dCgpKS5kb25lKTtvPSEwKXt2YXIgbD1kLnZhbHVlO2wuZG93bmxpbmtfZXN0aW1hdGVfYmFuZHdpZHRoJiYoaVtsLnBlZXJfdWlkXT1sLmRvd25saW5rX2VzdGltYXRlX2JhbmR3aWR0aC8xZTMrXCJcIil9fWNhdGNoKGUpe3M9ITAsYz1lfWZpbmFsbHl7dHJ5e298fG51bGw9PXUucmV0dXJufHx1LnJldHVybigpfWZpbmFsbHl7aWYocyl0aHJvdyBjfX19bi5JbmNvbWluZ0F2YWlsYWJsZUJhbmR3aWR0aD1pLGUmJmUobil9LHQuZ2V0U2Vzc2lvblN0YXRzPWZ1bmN0aW9uKGUpe3ZhciBuPXt9LGk9dC5nYXRld2F5Q2xpZW50LnRyYWZmaWNfc3RhdHMsYT10LmdhdGV3YXlDbGllbnQuc29ja2V0LHI9MCxvPTA7Zm9yKHZhciBzIGluIHQucmVtb3RlU3RhdHMpKGM9dC5yZW1vdGVTdGF0c1tzXSkmJmMudmlkZW9TdGF0cyYmYy52aWRlb1N0YXRzLnZpZGVvUmVjdkJ5dGVzRGVsdGEmJihvKz1wYXJzZUludChjLnZpZGVvU3RhdHMudmlkZW9SZWN2Qnl0ZXNEZWx0YSkpLGMmJmMuYXVkaW9TdGF0cyYmYy5hdWRpb1N0YXRzLmF1ZGlvUmVjdkJ5dGVzRGVsdGEmJihvKz1wYXJzZUludChjLmF1ZGlvU3RhdHMuYXVkaW9SZWN2Qnl0ZXNEZWx0YSkpO2Zvcih2YXIgcyBpbiB0LmxvY2FsU3RhdHMpe3ZhciBjOyhjPXQubG9jYWxTdGF0c1tzXSkmJmMudmlkZW9TdGF0cyYmYy52aWRlb1N0YXRzLnZpZGVvU2VuZEJ5dGVzRGVsdGEmJihyKz1wYXJzZUludChjLnZpZGVvU3RhdHMudmlkZW9TZW5kQnl0ZXNEZWx0YSkpLGMmJmMuYXVkaW9TdGF0cyYmYy5hdWRpb1N0YXRzLmF1ZGlvU2VuZEJ5dGVzRGVsdGEmJihyKz1wYXJzZUludChjLmF1ZGlvU3RhdHMuYXVkaW9TZW5kQnl0ZXNEZWx0YSkpfXZhciBkPXIrdC5zZXNzaW9uLldTU2VuZEJ5dGVzRGVsdGErdC5zZXNzaW9uLkhUVFBTZW5kQnl0ZXNEZWx0YSx1PW8rdC5zZXNzaW9uLldTUmVjdkJ5dGVzRGVsdGErdC5zZXNzaW9uLkhUVFBSZWN2Qnl0ZXNEZWx0YSxsPXQuc2Vzc2lvbi5zZW5kQnl0ZXMrT2JqZWN0KG50LmdldEhUVFBTZW5kQnl0ZXMpKCkscD10LnNlc3Npb24ucmVjdkJ5dGVzK09iamVjdChudC5nZXRIVFRQUmVjdkJ5dGVzKSgpO3QuZ2F0ZXdheUNsaWVudC5zb2NrZXQmJnQuZ2F0ZXdheUNsaWVudC5zb2NrZXQuc3RhdGU9PT10LmdhdGV3YXlDbGllbnQuQ09OTkVDVEVEJiYobCs9YS5nZXRTZW5kQnl0ZXMoKSxwKz1hLmdldFJlY3ZCeXRlcygpKTt2YXIgZj0xO2kucGVlcl9kZWxheSYmKGY9aS5wZWVyX2RlbGF5Lmxlbmd0aCxmKz0xKSxpZShuLFwiRHVyYXRpb25cIixhLmdldER1cmF0aW9uKCkpLGllKG4sXCJVc2VyQ291bnRcIixmKSxpZShuLFwiU2VuZEJ5dGVzXCIsbCksaWUobixcIlJlY3ZCeXRlc1wiLHApLGllKG4sXCJTZW5kQml0cmF0ZVwiLDgqZC8xZTMpLGllKG4sXCJSZWN2Qml0cmF0ZVwiLDgqdS8xZTMpLGUmJmUobil9LHQuaXNMb2NhbFZpZGVvRnJlZXplPWZ1bmN0aW9uKGUsdCl7dmFyIG49MCxpPTA7aWYoIWV8fCF0KXJldHVybiExO2lmKE9iamVjdChtLmlzQ2hyb21lKSgpfHxPYmplY3QobS5pc09wZXJhKSgpKW49ZS5nb29nRnJhbWVSYXRlSW5wdXQsaT1lLmdvb2dGcmFtZVJhdGVTZW50O2Vsc2UgaWYoT2JqZWN0KG0uaXNTYWZhcmkpKCkpbj1wYXJzZUludChlLmZyYW1lcmF0ZU1lYW4pLGk9cGFyc2VJbnQoZS5mcmFtZXNFbmNvZGVkKS1wYXJzZUludCh0LmZyYW1lc0VuY29kZWQpO2Vsc2V7aWYoIU9iamVjdChtLmlzRmlyZUZveCkoKSlyZXR1cm4hMTtuPXBhcnNlSW50KGUuZnJhbWVyYXRlTWVhbiksaT1wYXJzZUludChlLmZyYW1lc0VuY29kZWQpLXBhcnNlSW50KHQuZnJhbWVzRW5jb2RlZCl9cmV0dXJuIG4+NSYmaTwzfSx0LmlzUmVtb3RlVmlkZW9GcmVlemU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0wLGk9MDtpZighZXx8IXQpcmV0dXJuITE7aWYoT2JqZWN0KG0uaXNDaHJvbWUpKCl8fE9iamVjdChtLmlzT3BlcmEpKCkpbj1lLmdvb2dGcmFtZVJhdGVSZWNlaXZlZCxpPWUuZ29vZ0ZyYW1lUmF0ZURlY29kZWQ7ZWxzZSBpZihPYmplY3QobS5pc1NhZmFyaSkoKSluPWUuZnJhbWVyYXRlTWVhbixpPXBhcnNlSW50KGUuZnJhbWVzRGVjb2RlZCktcGFyc2VJbnQodC5mcmFtZXNEZWNvZGVkKTtlbHNle2lmKCFPYmplY3QobS5pc0ZpcmVGb3gpKCkpcmV0dXJuITE7bj1wYXJzZUludChlLmZyYW1lc1JlY2VpdmVkKS1wYXJzZUludCh0LmZyYW1lc1JlY2VpdmVkKSxpPXBhcnNlSW50KGUuZnJhbWVzRGVjb2RlZCktcGFyc2VJbnQodC5mcmFtZXNEZWNvZGVkKX1yZXR1cm4gbj41JiZuPDEwJiZpPDN8fG4+MTAmJm48MjAmJmk8NHx8bj4yMCYmaTw1fSx0LmlzQXVkaW9GcmVlemU9ZnVuY3Rpb24oZSl7aWYoT2JqZWN0KG0uaXNDaHJvbWUpKCkmJmUpe2lmKGUuZ29vZ0RlY29kaW5nUExDJiZlLmdvb2dEZWNvZGluZ1BMQ0NORyYmZS5nb29nRGVjb2RpbmdDVE4pcmV0dXJuKHBhcnNlSW50KGUuZ29vZ0RlY29kaW5nUExDKStwYXJzZUludChlLmdvb2dEZWNvZGluZ1BMQ0NORykpL3BhcnNlSW50KGUuZ29vZ0RlY29kaW5nQ1ROKT4uMn1lbHNlIGlmKChPYmplY3QobS5pc1NhZmFyaSkoKXx8T2JqZWN0KG0uaXNGaXJlRm94KSgpKSYmZS5wYWNrZXRzTG9zdCYmZS5wYWNrZXRzUmVjZWl2ZWQpcmV0dXJuIHBhcnNlSW50KGUucGFja2V0c0xvc3QpLyhwYXJzZUludChlLnBhY2tldHNMb3N0KStwYXJzZUludChlLnBhY2tldHNSZWNlaXZlZCkpPi4yO3JldHVybiExfSx0LmlzQXVkaW9EZWNvZGVGYWlsZWQ9ZnVuY3Rpb24oZSl7cmV0dXJuISEoKE9iamVjdChtLmlzQ2hyb21lKSgpfHxPYmplY3QobS5pc09wZXJhKSgpKSYmZSYmcGFyc2VJbnQoZS5ieXRlc1JlY2VpdmVkKT4wJiYwPT09cGFyc2VJbnQoZS5nb29nRGVjb2RpbmdOb3JtYWwpKX0sdC5zdGFydE5ldHdvcmtRdWFsaXR5VGltZXI9ZnVuY3Rpb24oKXt0LmNsZWFyTmV0d29ya1F1YWxpdHlUaW1lcigpLHQubmV0d29ya1F1YWxpdHlUaW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKHQuZ2F0ZXdheUNsaWVudC5zdGF0ZSE9PVJ0LkNPTk5FQ1RFRCl0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcIm5ldHdvcmstcXVhbGl0eVwiLHVwbGlua05ldHdvcmtRdWFsaXR5OjAsZG93bmxpbmtOZXR3b3JrUXVhbGl0eTowfSk7ZWxzZXt2YXIgZT10LmdhdGV3YXlDbGllbnQudHJhZmZpY19zdGF0czt0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcIm5ldHdvcmstcXVhbGl0eVwiLHVwbGlua05ldHdvcmtRdWFsaXR5OnQubmV0d29ya1F1YWxpdHlUcmFucyhlLnVwbGlua19uZXR3b3JrX3F1YWxpdHkpLGRvd25saW5rTmV0d29ya1F1YWxpdHk6dC5uZXR3b3JrUXVhbGl0eVRyYW5zKGUuZG93bmxpbmtfbmV0d29ya19xdWFsaXR5KX0pfX0sMmUzKX0sdC5jbGVhck5ldHdvcmtRdWFsaXR5VGltZXI9ZnVuY3Rpb24oKXt0Lm5ldHdvcmtRdWFsaXR5VGltZXImJmNsZWFySW50ZXJ2YWwodC5uZXR3b3JrUXVhbGl0eVRpbWVyKX0sdC5uZXR3b3JrUXVhbGl0eVRyYW5zPWZ1bmN0aW9uKGUpe3JldHVybiBlPj0wJiZlPC4xNz8xOmU+PS4xNyYmZTwuMzY/MjplPj0uMzYmJmU8LjU5PzM6ZT49LjU5JiZlPD0xPzQ6ZT4xPzU6MH0sdC5nZXRTdGF0c1RpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7dmFyIGU9dC5nYXRld2F5Q2xpZW50LnRyYWZmaWNfc3RhdHMsbj1EYXRlLm5vdygpO3QuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiX3Rlc3RFeGNlcHRpb25cIn0pLE9iamVjdC5rZXlzKHQubG9jYWxTdGF0cykubGVuZ3RoJiZ0LmV4Y2VwdGlvbk1vbml0b3Iuc2V0TG9jYWxTdGF0cyh0LmxvY2FsU3RhdHMpLE9iamVjdC5rZXlzKHQucmVtb3RlU3RhdHMpLmxlbmd0aCYmdC5leGNlcHRpb25Nb25pdG9yLnNldFJlbW90ZVN0YXRzKHQucmVtb3RlU3RhdHMpO3ZhciBpPXt9O09iamVjdC5rZXlzKHQuZ2F0ZXdheUNsaWVudC5yZW1vdGVTdHJlYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKGEpe3ZhciByPXQuZ2F0ZXdheUNsaWVudC5yZW1vdGVTdHJlYW1zW2FdLG89dC5yZW1vdGVTdGF0c1thXSxzPXtpZDphLHVwZGF0ZWRBdDpufTtpW2FdPXMscy5maXJzdEZyYW1lVGltZT1yLmZpcnN0RnJhbWVUaW1lLG8/KHMuYXVkaW9Ub3RhbFBsYXlEdXJhdGlvbj1vLmF1ZGlvVG90YWxQbGF5RHVyYXRpb24rMSxzLmF1ZGlvVG90YWxGcmVlemVUaW1lPW8uYXVkaW9Ub3RhbEZyZWV6ZVRpbWUscy5pc0F1ZGlvRnJlZXplPSExLHMuaXNBdWRpb0RlY29kZUZhaWxlZD0hMSxzLnZpZGVvVG90YWxQbGF5RHVyYXRpb249by52aWRlb1RvdGFsUGxheUR1cmF0aW9uKzEscy52aWRlb1RvdGFsRnJlZXplVGltZT1vLnZpZGVvVG90YWxGcmVlemVUaW1lLHMuaXNWaWRlb0ZyZWV6ZT0hMSk6KHMuYXVkaW9Ub3RhbFBsYXlEdXJhdGlvbj0xLHMuYXVkaW9Ub3RhbEZyZWV6ZVRpbWU9MCxzLnZpZGVvVG90YWxQbGF5RHVyYXRpb249MSxzLnZpZGVvVG90YWxGcmVlemVUaW1lPTApO3ZhciBjPWUmJmUucGVlcl9kZWxheSYmZS5wZWVyX2RlbGF5LmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUucGVlcl91aWQ9PWF9KTtjJiYocy5wZWVyX2RlbGF5PWMpLHImJihyLmlzUGxheWluZygpJiYocy5hdWRpb0Rpc2FibGVkPXIudXNlck11dGVBdWRpb3x8ci5wZWVyTXV0ZUF1ZGlvP1wiMVwiOlwiMFwiLHMudmlkZW9EaXNhYmxlZD1yLnVzZXJNdXRlVmlkZW98fHIucGVlck11dGVWaWRlbz9cIjFcIjpcIjBcIiksbyYmby5wZWVyX2RlbGF5JiZjJiZvLnBlZXJfZGVsYXkuc3RyZWFtX3R5cGUhPT1jLnN0cmVhbV90eXBlJiZ0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbVR5cGVDaGFuZ2VcIix1aWQ6YSxzdHJlYW1UeXBlOmMuc3RyZWFtX3R5cGV9KSxyLnBjJiZcImVzdGFibGlzaGVkXCI9PXIucGMuc3RhdGUmJnIucGMuZ2V0U3RhdHMoZnVuY3Rpb24oZSl7aWYocy5wY1N0YXRzPWUscy5hdWRpb1N0YXRzPWUuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvXCI9PWUubWVkaWFUeXBlJiYoZS5pZC5pbmRleE9mKFwiX3JlY3ZcIik+LTF8fGUuaWQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwiaW5ib3VuZFwiKT4tMSl9KSxzLnZpZGVvU3RhdHM9ZS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9cIj09ZS5tZWRpYVR5cGUmJihlLmlkLmluZGV4T2YoXCJfcmVjdlwiKT4tMXx8ZS5pZC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJpbmJvdW5kXCIpPi0xKX0pLG8mJm8uYXVkaW9TdGF0cyYmcy5hdWRpb1N0YXRzKXt2YXIgbj1wYXJzZUludChzLmF1ZGlvU3RhdHMuYnl0ZXNSZWNlaXZlZCktcGFyc2VJbnQoby5hdWRpb1N0YXRzLmJ5dGVzUmVjZWl2ZWQpLGk9cGFyc2VJbnQocy5hdWRpb1N0YXRzLmdvb2dEZWNvZGluZ05vcm1hbCktcGFyc2VJbnQoby5hdWRpb1N0YXRzLmdvb2dEZWNvZGluZ05vcm1hbCk7aWYocy5hdWRpb1N0YXRzLmF1ZGlvUmVjdkJ5dGVzRGVsdGE9bixzLmF1ZGlvU3RhdHMuYXVkaW9EZWNvZGluZ05vcm1hbERlbHRhPWksdC5zZXNzaW9uLnJlY3ZCeXRlcys9bixpc0Zpbml0ZShuKSYmcy5hdWRpb1N0YXRzLnRpbWVzdGFtcCl7dmFyIGE9cy5hdWRpb1N0YXRzLnRpbWVzdGFtcC5nZXRUaW1lKCktby5hdWRpb1N0YXRzLnRpbWVzdGFtcC5nZXRUaW1lKCk7cy5hdWRpb1JlY3ZCaXRyYXRlPU1hdGguZmxvb3IoOCpuL2EpfXQuaXNBdWRpb0ZyZWV6ZShzLmF1ZGlvU3RhdHMpJiZzLmF1ZGlvVG90YWxQbGF5RHVyYXRpb24+MTAmJihzLmF1ZGlvVG90YWxGcmVlemVUaW1lKysscy5pc0F1ZGlvRnJlZXplPSEwKSx0LmlzQXVkaW9EZWNvZGVGYWlsZWQocy5hdWRpb1N0YXRzKSYmcy5hdWRpb1RvdGFsUGxheUR1cmF0aW9uPjEwJiYocy5pc0F1ZGlvRGVjb2RlRmFpbGVkPSEwKSxzLmF1ZGlvU3RhdHMuYXVkaW9Ub3RhbEZyZWV6ZVRpbWU9cy5hdWRpb1RvdGFsRnJlZXplVGltZSxzLmF1ZGlvU3RhdHMuYXVkaW9Ub3RhbFBsYXlEdXJhdGlvbj1zLmF1ZGlvVG90YWxQbGF5RHVyYXRpb24scy5hdWRpb1N0YXRzLmF1ZGlvRnJlZXplUmF0ZT1NYXRoLmNlaWwoMTAwKnMuYXVkaW9Ub3RhbEZyZWV6ZVRpbWUvcy5hdWRpb1RvdGFsUGxheUR1cmF0aW9uKX1pZihvJiZvLnZpZGVvU3RhdHMmJnMudmlkZW9TdGF0cyl7dmFyIGM9cGFyc2VJbnQocy52aWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWQpLXBhcnNlSW50KG8udmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkKTtzLnZpZGVvU3RhdHMudmlkZW9SZWN2Qnl0ZXNEZWx0YT1jLHQuc2Vzc2lvbi5yZWN2Qnl0ZXMrPWMsaXNGaW5pdGUoYykmJnMudmlkZW9TdGF0cy50aW1lc3RhbXAmJihhPXMudmlkZW9TdGF0cy50aW1lc3RhbXAuZ2V0VGltZSgpLW8udmlkZW9TdGF0cy50aW1lc3RhbXAuZ2V0VGltZSgpLHMudmlkZW9SZWN2Qml0cmF0ZT1NYXRoLmZsb29yKDgqYy9hKSksdC5pc1JlbW90ZVZpZGVvRnJlZXplKHMudmlkZW9TdGF0cyxvLnZpZGVvU3RhdHMpJiYocy52aWRlb1RvdGFsRnJlZXplVGltZSsrLHMuaXNWaWRlb0ZyZWV6ZT0hMCkscy52aWRlb1N0YXRzLnZpZGVvVG90YWxGcmVlemVUaW1lPXMudmlkZW9Ub3RhbEZyZWV6ZVRpbWUscy52aWRlb1N0YXRzLnZpZGVvVG90YWxQbGF5RHVyYXRpb249cy52aWRlb1RvdGFsUGxheUR1cmF0aW9uLHMudmlkZW9TdGF0cy52aWRlb0ZyZWV6ZVJhdGU9TWF0aC5jZWlsKDEwMCpzLnZpZGVvVG90YWxGcmVlemVUaW1lL3MudmlkZW9Ub3RhbFBsYXlEdXJhdGlvbiksci5wbGF5ZXImJnIucGxheWVyLnZpZGVvJiZyLnBsYXllci52aWRlby52aWRlb1dpZHRoJiZyLnBsYXllci52aWRlby52aWRlb0hlaWdodD8ocy52aWRlb1N0YXRzLnJlbmRlclJlbW90ZVdpZHRoPXIucGxheWVyLnZpZGVvLnZpZGVvV2lkdGgscy52aWRlb1N0YXRzLnJlbmRlclJlbW90ZUhlaWdodD1yLnBsYXllci52aWRlby52aWRlb0hlaWdodCk6KHMudmlkZW9TdGF0cy5yZW5kZXJSZW1vdGVXaWR0aD1yLnZpZGVvV2lkdGh8fHMudmlkZW9TdGF0cy5nb29nRnJhbWVXaWR0aFJlY2VpdmVkLHMudmlkZW9TdGF0cy5yZW5kZXJSZW1vdGVIZWlnaHQ9ci52aWRlb0hlaWdodHx8cy52aWRlb1N0YXRzLmdvb2dGcmFtZUhlaWdodFJlY2VpdmVkKX19KSl9KSx0LnJlbW90ZVN0YXRzPWk7dmFyIGE9e307aWYoT2JqZWN0LmtleXModC5nYXRld2F5Q2xpZW50LmxvY2FsU3RyZWFtcykuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgaT10LmdhdGV3YXlDbGllbnQubG9jYWxTdHJlYW1zW2VdLHI9dC5sb2NhbFN0YXRzW2VdLG89e2lkOmUsdXBkYXRlZEF0Om59O2FbZV09byxyPyhvLnZpZGVvVG90YWxQbGF5RHVyYXRpb249ci52aWRlb1RvdGFsUGxheUR1cmF0aW9uKzEsby52aWRlb1RvdGFsRnJlZXplVGltZT1yLnZpZGVvVG90YWxGcmVlemVUaW1lLG8uaXNWaWRlb0ZyZWV6ZT0hMSk6KG8udmlkZW9Ub3RhbFBsYXlEdXJhdGlvbj0xLG8udmlkZW9Ub3RhbEZyZWV6ZVRpbWU9MCksaSYmKGkuaXNQbGF5aW5nKCkmJihvLmF1ZGlvRGlzYWJsZWQ9aS51c2VyTXV0ZUF1ZGlvP1wiMVwiOlwiMFwiLG8udmlkZW9EaXNhYmxlZD1pLnVzZXJNdXRlVmlkZW8/XCIxXCI6XCIwXCIpLGkudmlkZW8mJmkuYXR0cmlidXRlcy5tYXhWaWRlb0JXP28udmlkZW9UYXJnZXRTZW5kQml0cmF0ZT1pLmF0dHJpYnV0ZXMubWF4VmlkZW9CVzppLnZpZGVvJiZpLnNjcmVlbkF0dHJpYnV0ZXMmJihvLnZpZGVvVGFyZ2V0U2VuZEJpdHJhdGU9aS5zY3JlZW5BdHRyaWJ1dGVzLm1heFZpZGVvQlcpLGkucGMmJlwiZXN0YWJsaXNoZWRcIj09aS5wYy5zdGF0ZSYmaS5wYy5nZXRTdGF0cyhmdW5jdGlvbihlKXtpZihvLnBjU3RhdHM9ZS5yZXZlcnNlKCksby5hdWRpb1N0YXRzPWUuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvXCI9PWUubWVkaWFUeXBlJiYoZS5pZC5pbmRleE9mKFwiX3NlbmRcIik+LTF8fGUuaWQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwib3V0Ym91bmRcIik+LTEpfSksby52aWRlb1N0YXRzPWUuZmluZChmdW5jdGlvbihlKXtyZXR1cm5cInZpZGVvXCI9PWUubWVkaWFUeXBlJiYoZS5pZC5pbmRleE9mKFwiX3NlbmRcIik+LTF8fGUuaWQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwib3V0Ym91bmRcIik+LTEpfSksby5hdWRpb1N0YXRzJiZyJiZyLmF1ZGlvU3RhdHMpe3ZhciBuPXBhcnNlSW50KG8uYXVkaW9TdGF0cy5ieXRlc1NlbnQpLXBhcnNlSW50KHIuYXVkaW9TdGF0cy5ieXRlc1NlbnQpO2lmKG8uYXVkaW9TdGF0cy5hdWRpb1NlbmRCeXRlc0RlbHRhPW4sdC5zZXNzaW9uLnNlbmRCeXRlcys9bixpc0Zpbml0ZShuKSYmby5hdWRpb1N0YXRzLnRpbWVzdGFtcCl7dmFyIGE9by5hdWRpb1N0YXRzLnRpbWVzdGFtcC5nZXRUaW1lKCktci5hdWRpb1N0YXRzLnRpbWVzdGFtcC5nZXRUaW1lKCk7by5hdWRpb1NlbmRCaXRyYXRlPU1hdGguZmxvb3IoOCpuL2EpfX1pZihvLnZpZGVvU3RhdHMmJnImJnIudmlkZW9TdGF0cyl7dmFyIHM9cGFyc2VJbnQoby52aWRlb1N0YXRzLmJ5dGVzU2VudCktcGFyc2VJbnQoci52aWRlb1N0YXRzLmJ5dGVzU2VudCk7by52aWRlb1N0YXRzLnZpZGVvU2VuZEJ5dGVzRGVsdGE9cyx0LnNlc3Npb24uc2VuZEJ5dGVzKz1zLGlzRmluaXRlKHMpJiZvLnZpZGVvU3RhdHMudGltZXN0YW1wJiYoYT1vLnZpZGVvU3RhdHMudGltZXN0YW1wLmdldFRpbWUoKS1yLnZpZGVvU3RhdHMudGltZXN0YW1wLmdldFRpbWUoKSxvLnZpZGVvU2VuZEJpdHJhdGU9TWF0aC5mbG9vcig4KnMvYSkpLHQuaXNMb2NhbFZpZGVvRnJlZXplKG8udmlkZW9TdGF0cyxyLnZpZGVvU3RhdHMpJiYoby52aWRlb1RvdGFsRnJlZXplVGltZSsrLG8uaXNWaWRlb0ZyZWV6ZT0hMCksby52aWRlb1N0YXRzLnZpZGVvVG90YWxGcmVlemVUaW1lPW8udmlkZW9Ub3RhbEZyZWV6ZVRpbWUsby52aWRlb1N0YXRzLnZpZGVvVG90YWxQbGF5RHVyYXRpb249by52aWRlb1RvdGFsUGxheUR1cmF0aW9uLG8udmlkZW9TdGF0cy52aWRlb0ZyZWV6ZVJhdGU9TWF0aC5jZWlsKDEwMCpvLnZpZGVvVG90YWxGcmVlemVUaW1lL28udmlkZW9Ub3RhbFBsYXlEdXJhdGlvbiksby52aWRlb1N0YXRzLnJlbmRlckxvY2FsV2lkdGg9aS52aWRlb1dpZHRofHxvLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lV2lkdGhTZW50LG8udmlkZW9TdGF0cy5yZW5kZXJMb2NhbEhlaWdodD1pLnZpZGVvSGVpZ2h0fHxvLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lSGVpZ2h0U2VudH19KSl9KSx0LmxvY2FsU3RhdHM9YSx0LnNlc3Npb24uSFRUUFNlbmRCeXRlc0RlbHRhPU9iamVjdChudC5nZXRIVFRQU2VuZEJ5dGVzKSgpLXQuc2Vzc2lvbi5IVFRQU2VuZEJ5dGVzLHQuc2Vzc2lvbi5IVFRQU2VuZEJ5dGVzPU9iamVjdChudC5nZXRIVFRQU2VuZEJ5dGVzKSgpLHQuc2Vzc2lvbi5IVFRQUmVjdkJ5dGVzRGVsdGE9T2JqZWN0KG50LmdldEhUVFBSZWN2Qnl0ZXMpKCktdC5zZXNzaW9uLkhUVFBSZWN2Qnl0ZXMsdC5zZXNzaW9uLkhUVFBSZWN2Qnl0ZXM9T2JqZWN0KG50LmdldEhUVFBSZWN2Qnl0ZXMpKCksdC5nYXRld2F5Q2xpZW50LnNvY2tldCYmdC5nYXRld2F5Q2xpZW50LnNvY2tldC5zdGF0ZT09PXQuZ2F0ZXdheUNsaWVudC5DT05ORUNURUQpe3ZhciByPXQuZ2F0ZXdheUNsaWVudC5zb2NrZXQ7dC5zZXNzaW9uLldTU2VuZEJ5dGVzRGVsdGE9ci5nZXRTZW5kQnl0ZXMoKS10LnNlc3Npb24uV1NTZW5kQnl0ZXMsdC5zZXNzaW9uLldTU2VuZEJ5dGVzPXIuZ2V0U2VuZEJ5dGVzKCksdC5zZXNzaW9uLldTUmVjdkJ5dGVzRGVsdGE9ci5nZXRSZWN2Qnl0ZXMoKS10LnNlc3Npb24uV1NSZWN2Qnl0ZXMsdC5zZXNzaW9uLldTUmVjdkJ5dGVzPXIuZ2V0UmVjdkJ5dGVzKCl9fSwxZTMpLHQuZ2F0ZXdheUNsaWVudC5vbihcImpvaW5cIixmdW5jdGlvbigpe3Quc2Vzc2lvbj17c2VuZEJ5dGVzOjAscmVjdkJ5dGVzOjAsV1NTZW5kQnl0ZXM6MCxXU1NlbmRCeXRlc0RlbHRhOjAsV1NSZWN2Qnl0ZXM6MCxXU1JlY3ZCeXRlc0RlbHRhOjAsSFRUUFNlbmRCeXRlczowLEhUVFBTZW5kQnl0ZXNEZWx0YTowLEhUVFBSZWN2Qnl0ZXM6MCxIVFRQUmVjdkJ5dGVzRGVsdGE6MH19KSx0fSh0LmdhdGV3YXlDbGllbnQpLHQuY29uZmlnRGlzdHJpYnV0TWFuYWdlcj1mdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gdC5jbGllbnQ9ZSx0LmNsaWVudC5nYXRld2F5Q2xpZW50JiZ0LmNsaWVudC5nYXRld2F5Q2xpZW50Lm9uKFwiY29uZmlnLWRpc3RyaWJ1dGVcIixmdW5jdGlvbihuKXt2YXIgaT1uLmpvaW5JbmZvLGE9bi5jb25maWc7aWYoYSl7T2JqZWN0KHJlLmlzRW1wdHkpKGEudXBsb2FkTG9nKXx8KE9iamVjdChyLnNldFBhcmFtZXRlcikoXCJVUExPQURfTE9HXCIsYS51cGxvYWRMb2cpLHMuYi5yZXBvcnRBcGlJbnZva2UoaS5zaWQse25hbWU6XCJfY29uZmlnRGlzdHJpYnV0ZVwiLG9wdGlvbnM6e2ZlYXR1cmU6XCJ1cGxvYWRMb2dcIix2YWx1ZTphLnVwbG9hZExvZ319KSgpKSxPYmplY3QocmUuaXNFbXB0eSkoYS5kdWFsU3RyZWFtKXx8KGUuaXNEdWFsU3RyZWFtPWEuZHVhbFN0cmVhbSxzLmIucmVwb3J0QXBpSW52b2tlKGkuc2lkLHtuYW1lOlwiX2NvbmZpZ0Rpc3RyaWJ1dGVcIixvcHRpb25zOntmZWF0dXJlOlwiZHVhbFN0cmVhbVwiLHZhbHVlOmEuZHVhbFN0cmVhbX19KSgpKSxPYmplY3QocmUuaXNFbXB0eSkoYS5zdHJlYW1GYWxsYmFja09wdGlvbil8fHQuY2xpZW50LmdhdGV3YXlDbGllbnQmJnQuY2xpZW50LmdhdGV3YXlDbGllbnQub24oXCJzdHJlYW0tc3Vic2NyaWJlZFwiLGZ1bmN0aW9uKGUpe3ZhciBuPWUuc3RyZWFtO24/KHQuY2xpZW50LmdhdGV3YXlDbGllbnQuc2V0U3RyZWFtRmFsbGJhY2tPcHRpb24obixhLnN0cmVhbUZhbGxiYWNrT3B0aW9uKSxzLmIucmVwb3J0QXBpSW52b2tlKGkuc2lkLHtuYW1lOlwiX2NvbmZpZ0Rpc3RyaWJ1dGVcIixvcHRpb25zOntmZWF0dXJlOlwic3RyZWFtRmFsbGJhY2tPcHRpb25cIix2YWx1ZTphLnN0cmVhbUZhbGxiYWNrT3B0aW9uLHN0cmVhbUlkOm4uZ2V0SWQoKX19KSgpKTpzLmIucmVwb3J0QXBpSW52b2tlKGkuc2lkLHtuYW1lOlwiX2NvbmZpZ0Rpc3RyaWJ1dGVcIixvcHRpb25zOntmZWF0dXJlOlwic3RyZWFtRmFsbGJhY2tPcHRpb25cIix2YWx1ZTphLnN0cmVhbUZhbGxiYWNrT3B0aW9uLHN0cmVhbUlkOm4uZ2V0SWQoKSxlcnI6XCJpbnZhbGlkIHN0cmVhbVwifX0pKCl9KTt0cnl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBzZXRQYXJhbWV0ZXIgaW4gZGlzdHJpYnV0aW9uOiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGEpKSksT2JqZWN0LmtleXMoYSkubWFwKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Qoci5zZXRQYXJhbWV0ZXIpKGUsYVtlXSl9KX1jYXRjaCh0KXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIHNldFBhcmFtZXRlciBpbiBkaXN0cmlidXRpb24gZmFpbGVkOiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGEpKSl9fX0pLHR9KHQpLGZ1bmN0aW9uKGUsdCl7dmFyIG49YXJndW1lbnRzO2UubGl2ZVN0cmVhbWluZz1jKCksZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zPXtpbmplY3Rfc3RyZWFtaW5nOm51bGwsbWl4X3N0cmVhbWluZzpudWxsLHJhd19zdHJlYW1pbmc6bnVsbH0sZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25UeXBlcz17aW5qZWN0X3N0cmVhbWluZzpcInB1bGxcIixtaXhfc3RyZWFtaW5nOlwicHVzaFwiLHJhd19zdHJlYW1pbmc6XCJwdXNoXCJ9LGUubGl2ZVN0cmVhbWluZy5wdXNoU3RhdGVzPXt9LGUubGl2ZVN0cmVhbWluZy5wdWxsU3RhdGVzPXt9LGUuZ2F0ZXdheUNsaWVudC5hZGRFdmVudExpc3RlbmVyKFwiam9pblwiLGZ1bmN0aW9uKHQpe2UubGl2ZVN0cmVhbWluZy5yZXN1bWVTdGF0ZXMoXCJwdWxsXCIpfSksZS5nYXRld2F5Q2xpZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdHJlYW0tdW5wdWJsaXNoZWRcIixmdW5jdGlvbih0KXtpZih0Lm9wdGlvbnMmJjA9PT10Lm9wdGlvbnMuc3RyZWFtVHlwZSlmb3IodmFyIG4gaW4gZS5saXZlU3RyZWFtaW5nLnB1c2hTdGF0ZXMpe3ZhciBpPWUubGl2ZVN0cmVhbWluZy5wdXNoU3RhdGVzW25dO2kudXJsJiZlLl9zdG9wTGl2ZVN0cmVhbWluZyhpLnVybCxpLnRyYW5zY29kaW5nRW5hYmxlZCwhMCl9fSksZS5nYXRld2F5Q2xpZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJzdHJlYW0tcHVibGlzaGVkXCIsZnVuY3Rpb24odCl7ZS5saXZlU3RyZWFtaW5nLnJlc3VtZVN0YXRlcyhcInB1c2hcIil9KSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdD0obT11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiBuKGkpe3ZhciBhLHI7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihuKXtmb3IoOzspc3dpdGNoKG4ucHJldj1uLm5leHQpe2Nhc2UgMDppZihlLmpvaW5JbmZvJiZlLmpvaW5JbmZvLnVpZCYmcGFyc2VJbnQoZS5qb2luSW5mby52aWQsMTApKXtuLm5leHQ9MzticmVha310aHJvdyBuZXcgRXJyb3IoXCJDTElFTlRfTk9UX0pPSU5FRFwiKTtjYXNlIDM6cmV0dXJuIGE9bmV3IHF0KHthcHBJZDp0LmFwcElkLGNuYW1lOmUuY2hhbm5lbCxzaWQ6dC5zZXNzaW9uSWQsdWlkOmUuam9pbkluZm8udWlkfSksZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zW2ldPWEsbi5uZXh0PTcsRnQoe2FwcElkOnQuYXBwSWQsY25hbWU6ZS5jaGFubmVsLHNlcnZpY2VOYW1lOmksc2lkOnQuc2Vzc2lvbklkLHVpZDplLmpvaW5JbmZvLnVpZH0pO2Nhc2UgNzpyZXR1cm4gcj1uLnNlbnQsbi5uZXh0PTEwLGEuY29ubmVjdCh7d3NDbGllbnQ6cn0pO2Nhc2UgMTA6cmV0dXJuIGEub24oXCJub3RpZmljYXRpb25cIixmdW5jdGlvbih0KXtpZih0LnNlcnZpY2VOYW1lPWksZS5saXZlU3RyZWFtaW5nLmRpc3BhdGNoRXZlbnQodCksNTAzPT09dC5jb2RlKTtlbHNlIHN3aXRjaCh0LnNlcnZpY2VOYW1lKXtjYXNlXCJpbmplY3Rfc3RyZWFtaW5nXCI6dmFyIG49e3JlYXNvbjp0JiZ0LnJlYXNvbixzdGF0dXM6S3QodCYmdC5jb2RlKSx0eXBlOlwic3RyZWFtSW5qZWN0ZWRTdGF0dXNcIix1aWQ6dCYmdC5zZXJ2ZXJTdGF0dXMmJnQuc2VydmVyU3RhdHVzLmluamVjdF91aWQsdXJsOnQmJnQuc2VydmVyU3RhdHVzJiZ0LnNlcnZlclN0YXR1cy51cmx9O2UuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KG4pO2JyZWFrO2Nhc2VcInJhd19zdHJlYW1pbmdcIjpjYXNlXCJtaXhfc3RyZWFtaW5nXCI6dmFyIGE9e3JlYXNvbjp0JiZ0LnJlYXNvbixzdGF0dXM6dCYmdC5jb2RlLHR5cGU6dCYmMjAwPT09dC5jb2RlP1wibGl2ZVN0cmVhbWluZ1N0YXJ0ZWRcIjpcImxpdmVTdHJlYW1pbmdGYWlsZWRcIix1aWQ6dCYmdC5zZXJ2ZXJTdGF0dXMmJnQudWlkLHVybDp0JiZ0LnNlcnZlclN0YXR1cyYmdC5zZXJ2ZXJTdGF0dXMudXJsfTtlLmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChhKX19KSxhLm9uKFwiY2xvc2VcIixmdW5jdGlvbih0KXtZdChhKSxvLmRlZmF1bHQuZGVidWcoXCJSZWNvbm5lY3QgXCIuY29uY2F0KGkpKSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdChpKS5jYXRjaChmdW5jdGlvbih0KXtlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnNbaV09bnVsbCxlLmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcIlwiLmNvbmNhdChpLnJlcGxhY2UoXCJfXCIsXCItXCIpLFwiLWRpc2Nvbm5lY3RlZFwiKX0pfSl9KSxvLmRlZmF1bHQuZGVidWcoXCJcIi5jb25jYXQoaSxcIiBjb25uZWN0ZWRcIikpLG4uYWJydXB0KFwicmV0dXJuXCIsYSk7Y2FzZSAxNDpjYXNlXCJlbmRcIjpyZXR1cm4gbi5zdG9wKCl9fSxuLHRoaXMpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBtLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUubGl2ZVN0cmVhbWluZy5kaXNjb25uZWN0PShmPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHQobil7dmFyIGksYTtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnQudDA9Y2UuYS5rZXlzKGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucyk7Y2FzZSAxOmlmKCh0LnQxPXQudDAoKSkuZG9uZSl7dC5uZXh0PTEzO2JyZWFrfWlmKGk9dC50MS52YWx1ZSwhZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLmhhc093blByb3BlcnR5KGkpKXt0Lm5leHQ9MTE7YnJlYWt9aWYoIShhPWUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uc1tpXSl8fG4mJm4hPT1pKXt0Lm5leHQ9MTE7YnJlYWt9cmV0dXJuIG8uZGVmYXVsdC5pbmZvKFwiRGlzY29ubmVjdGluZyBsaXZlU3RyZWFtaW5nIFwiLmNvbmNhdChpKSksdC5uZXh0PTksYS5kaXNjb25uZWN0KCk7Y2FzZSA5OnQuc2VudCxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnNbaV09bnVsbDtjYXNlIDExOnQubmV4dD0xO2JyZWFrO2Nhc2UgMTM6Y2FzZVwiZW5kXCI6cmV0dXJuIHQuc3RvcCgpfX0sdCx0aGlzKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gZi5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxlLmxpdmVTdHJlYW1pbmcucmVzdW1lU3RhdGVzPShwPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHQobil7dmFyIGksYSxyLHMsYyxkLHUsbDtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnQudDA9Y2UuYS5rZXlzKGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucyk7Y2FzZSAxOmlmKCh0LnQxPXQudDAoKSkuZG9uZSl7dC5uZXh0PTg7YnJlYWt9aWYoaT10LnQxLnZhbHVlLCFufHxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvblR5cGVzW2ldPT09bil7dC5uZXh0PTU7YnJlYWt9cmV0dXJuIHQuYWJydXB0KFwiY29udGludWVcIiwxKTtjYXNlIDU6ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLmhhc093blByb3BlcnR5KGkpJiYoYT1lLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnNbaV0pJiYoby5kZWZhdWx0LmluZm8oXCJMaXZlU3RyZWFtaW5nIGNsb3NpbmcgY29ubmVjdGlvbiBcIi5jb25jYXQoaSkpLGEuZGlzY29ubmVjdCgpLGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uc1tpXT1udWxsKSx0Lm5leHQ9MTticmVhaztjYXNlIDg6dC50Mj1jZS5hLmtleXMoZS5saXZlU3RyZWFtaW5nLnB1c2hTdGF0ZXMpO2Nhc2UgOTppZigodC50Mz10LnQyKCkpLmRvbmUpe3QubmV4dD0zNzticmVha31pZihyPXQudDMudmFsdWUsIW58fFwicHVzaFwiPT09bil7dC5uZXh0PTEzO2JyZWFrfXJldHVybiB0LmFicnVwdChcImNvbnRpbnVlXCIsOSk7Y2FzZSAxMzppZighZS5saXZlU3RyZWFtaW5nLnB1c2hTdGF0ZXMuaGFzT3duUHJvcGVydHkocikpe3QubmV4dD0zNTticmVha31pZihzPWUubGl2ZVN0cmVhbWluZy5wdXNoU3RhdGVzW3JdLFwiYXVkaWVuY2VcIiE9PWUuZ2F0ZXdheUNsaWVudC5yb2xlKXt0Lm5leHQ9MTk7YnJlYWt9by5kZWZhdWx0Lndhcm5pbmcoXCJDYW5ub3QgcmVzdW1lIExpdmVTdHJlYW1pbmcgaW4gYXVkaWVuY2UgbW9kZS4gXCIuY29uY2F0KHMudXJsKSxzKSx0Lm5leHQ9MzU7YnJlYWs7Y2FzZSAxOTppZighcyl7dC5uZXh0PTM1O2JyZWFrfXJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJSZXN1bWluZyBMaXZlU3RyZWFtaW5nIFwiLmNvbmNhdChzLnVybCkscyksdC5wcmV2PTIxLHQubmV4dD0yNCxlLl9zdGFydExpdmVTdHJlYW1pbmcocy51cmwscy50cmFuc2NvZGluZ0VuYWJsZWQpO2Nhc2UgMjQ6Yz10LnNlbnQsby5kZWZhdWx0LmRlYnVnKFwiUmVzdW1lZCBMaXZlU3RyZWFtaW5nIFwiLmNvbmNhdChzLnVybCxcIjogXCIpLmNvbmNhdChjLnJlYXNvbikpLHQubmV4dD0zNTticmVhaztjYXNlIDI4OmlmKHQucHJldj0yOCx0LnQ0PXQuY2F0Y2goMjEpLDQ1NCE9PXQudDQuY29kZSl7dC5uZXh0PTM0O2JyZWFrfW8uZGVmYXVsdC5kZWJ1ZyhcIlJlc3VtZWQgTGl2ZVN0cmVhbWluZyBcIi5jb25jYXQocy51cmwsXCI6IFwiKS5jb25jYXQodC50NC5yZWFzb24pKSx0Lm5leHQ9MzU7YnJlYWs7Y2FzZSAzNDp0aHJvdyB0LnQ0O2Nhc2UgMzU6dC5uZXh0PTk7YnJlYWs7Y2FzZSAzNzp0LnQ1PWNlLmEua2V5cyhlLmxpdmVTdHJlYW1pbmcucHVsbFN0YXRlcyk7Y2FzZSAzODppZigodC50Nj10LnQ1KCkpLmRvbmUpe3QubmV4dD02MjticmVha31pZihkPXQudDYudmFsdWUsIW58fFwicHVsbFwiPT09bil7dC5uZXh0PTQyO2JyZWFrfXJldHVybiB0LmFicnVwdChcImNvbnRpbnVlXCIsMzgpO2Nhc2UgNDI6aWYoIWUubGl2ZVN0cmVhbWluZy5wdWxsU3RhdGVzLmhhc093blByb3BlcnR5KGQpKXt0Lm5leHQ9NjA7YnJlYWt9aWYodT1lLmxpdmVTdHJlYW1pbmcucHVsbFN0YXRlc1tkXSxcImF1ZGllbmNlXCIhPT1lLmdhdGV3YXlDbGllbnQucm9sZSl7dC5uZXh0PTQ4O2JyZWFrfW8uZGVmYXVsdC53YXJuaW5nKFwiQ2Fubm90IHJlc3VtZSBhZGRJbmplY3RTdHJlYW1VcmwgaW4gYXVkaWVuY2UgbW9kZS4gXCIuY29uY2F0KHUudXJsKSx1KSx0Lm5leHQ9NjA7YnJlYWs7Y2FzZSA0ODppZighdSl7dC5uZXh0PTYwO2JyZWFrfXJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJSZXN1bWluZyBMaXZlU3RyZWFtaW5nIHB1bGxTdHJlYW0gXCIuY29uY2F0KHUudXJsKSx1KSx0LnByZXY9NTAsdC5uZXh0PTUzLGUuX2FkZEluamVjdFN0cmVhbVVybCh1LnVybCx1LnRyYW5zY29kaW5nQ29uZmlnKTtjYXNlIDUzOmw9dC5zZW50LG8uZGVmYXVsdC5kZWJ1ZyhcIlJlc3VtZWQgTGl2ZVN0cmVhbWluZyBwdWxsU3RyZWFtIFwiLmNvbmNhdCh1LnVybCxcIjogXCIpLmNvbmNhdChsLnJlYXNvbikpLHQubmV4dD02MDticmVhaztjYXNlIDU3OnQucHJldj01Nyx0LnQ3PXQuY2F0Y2goNTApLDQ1MT09PXQudDcuY29kZSYmby5kZWZhdWx0LmRlYnVnKFwiUmVzdW1lZCBMaXZlU3RyZWFtaW5nIHB1bGxTdHJlYW0gXCIuY29uY2F0KHUudXJsLFwiOiBcIikuY29uY2F0KHQudDcucmVhc29uKSk7Y2FzZSA2MDp0Lm5leHQ9Mzg7YnJlYWs7Y2FzZSA2MjpjYXNlXCJlbmRcIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMsW1syMSwyOF0sWzUwLDU3XV0pfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBwLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUubGl2ZVN0cmVhbWluZy5zdGFydE9wdGlvbnM9e2F1dG9EZXN0cm95VGltZTozMH0sZS5saXZlU3RyZWFtaW5nLnRyYW5zY29kaW5nQ29uZmlnPXthdWRpb0JpdHJhdGU6NDgsYXVkaW9DaGFubmVsczoxLGF1ZGlvU2FtcGxlUmF0ZTo0OGUzLGJhY2tncm91bmRDb2xvcjowLGhlaWdodDozNjAsaW1hZ2VzOltdLGxvd0xhdGVuY3k6ITEsbWV0YWRhdGE6XCJcIix1c2VyQ29uZmlnRXh0cmFJbmZvOlwiXCIsdXNlckNvbmZpZ3M6W10sdmlkZW9CaXRyYXRlOjQwMCx2aWRlb0NvZGVjUHJvZmlsZToxMDAsdmlkZW9Db2RlY1R5cGU6MSx2aWRlb0ZyYW1lcmF0ZToxNSx2aWRlb0dvcDozMCx3aWR0aDo2NDB9LGUuc3RhcnRMaXZlU3RyZWFtaW5nPWZ1bmN0aW9uKG4saSl7T2JqZWN0KHJlLmlzRW1wdHkpKGkpfHxPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKGksXCJ0cmFuc2NvZGluZ0VuYWJsZWRcIiksT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJ1cmxcIiwxLDEwMjQpO3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc3RhcnRMaXZlU3RyZWFtaW5nXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZihlLmdhdGV3YXlDbGllbnQmJlwiYXVkaWVuY2VcIj09PWUuZ2F0ZXdheUNsaWVudC5yb2xlKXt2YXIgcj17Y29kZTo0MDMscmVhc29uOlwiQVVESUVOQ0VfU1RSRUFNSU5HX0ZPUkJJRERFTlwifTt0aHJvdyBhKHIpLHJ9dmFyIG89ZS5fc3RhcnRMaXZlU3RyZWFtaW5nKG4saSk7cmV0dXJuIG8udGhlbihmdW5jdGlvbihlKXthKG51bGwsZSl9KS5jYXRjaChmdW5jdGlvbihlKXthKGUpfSksb30sZS5fc3RhcnRMaXZlU3RyZWFtaW5nPShsPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIG4oaSxhKXt2YXIgcixzLGMsZDtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKG4pe2Zvcig7Oylzd2l0Y2gobi5wcmV2PW4ubmV4dCl7Y2FzZSAwOnJldHVybiByPVMoKSh7YWxsb2NhdGU6ITAsY2xpZW50UmVxdWVzdDp7Y29tbWFuZDpcIlB1Ymxpc2hTdHJlYW1cIn0sY29tbWFuZDpcInJlcXVlc3RcIn0pLG8uZGVmYXVsdC5kZWJ1ZyhcInN0YXJ0TGl2ZVN0cmVhbWluZyBcIi5jb25jYXQoaSxcIiwgXCIpLmNvbmNhdChhKSksUygpKHIuY2xpZW50UmVxdWVzdCxlLmxpdmVTdHJlYW1pbmcuc3RhcnRPcHRpb25zLHt0czpEYXRlLm5vdygpLHVybDppLHZpZDpwYXJzZUludChlLmpvaW5JbmZvLnZpZCwxMCl9KSxzPW51bGwsYT8oZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLm1peF9zdHJlYW1pbmd8fGUubGl2ZVN0cmVhbWluZy5jb25uZWN0KFwibWl4X3N0cmVhbWluZ1wiKSxyLmNsaWVudFJlcXVlc3QudHJhbnNjb2RpbmdDb25maWc9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShlLmxpdmVTdHJlYW1pbmcudHJhbnNjb2RpbmdDb25maWcpKSxzPWUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucy5taXhfc3RyZWFtaW5nKTooXCJ2cDhcIj09PXQuY29kZWMmJm8uZGVmYXVsdC53YXJuaW5nKFwiVlA4IGlzIG5vdCBzdXBwb3J0ZWQgYnkgcmF3X3N0cmVhbWluZy4gU3Vic2NyaWJlciBzaWRlIHdpbGwgc3VmZmVyXCIpLFwicnRjXCI9PT10Lm1vZGUmJm8uZGVmYXVsdC53YXJuaW5nKFwiUlRDIG1vZGUgaXMgbm90IHN1cHBvcnRlZCBieSByYXdfc3RyZWFtaW5nLiBTdWJzY3JpYmVyIHNpZGUgd2lsbCBzdWZmZXJcIiksZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLnJhd19zdHJlYW1pbmd8fGUubGl2ZVN0cmVhbWluZy5jb25uZWN0KFwicmF3X3N0cmVhbWluZ1wiKSxzPWUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucy5yYXdfc3RyZWFtaW5nKSxjPW51bGwsZD17fSxuLnByZXY9NyxuLm5leHQ9MTAscy5yZXF1ZXN0KHIpO2Nhc2UgMTA6Yz1uLnNlbnQsZC50eXBlPVwibGl2ZVN0cmVhbWluZ1N0YXJ0ZWRcIixkLnJlYXNvbj1jJiZjLnJlYXNvbixkLnN0YXR1cz1jJiZjLmNvZGUsZC51cmw9YyYmYy5zZXJ2ZXJSZXNwb25zZSYmYy5zZXJ2ZXJSZXNwb25zZS51cmwsZS5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoZCksbi5uZXh0PTI2O2JyZWFrO2Nhc2UgMTg6dGhyb3cgbi5wcmV2PTE4LG4udDA9bi5jYXRjaCg3KSxkLnR5cGU9XCJsaXZlU3RyZWFtaW5nRmFpbGVkXCIsZC5yZWFzb249bi50MCYmbi50MC5yZWFzb24sZC5zdGF0dXM9bi50MCYmbi50MC5jb2RlLGQudXJsPW4udDAmJm4udDAuc2VydmVyUmVzcG9uc2UmJm4udDAuc2VydmVyUmVzcG9uc2UudXJsLGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGQpLG4udDA7Y2FzZSAyNjpyZXR1cm4gZS5saXZlU3RyZWFtaW5nLnB1c2hTdGF0ZXNbaV09e3RyYW5zY29kaW5nRW5hYmxlZDphLHVybDppfSxuLmFicnVwdChcInJldHVyblwiLGMpO2Nhc2UgMjg6Y2FzZVwiZW5kXCI6cmV0dXJuIG4uc3RvcCgpfX0sbix0aGlzLFtbNywxOF1dKX0pKSxmdW5jdGlvbihlLHQpe3JldHVybiBsLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuc2V0TGl2ZVRyYW5zY29kaW5nPWZ1bmN0aW9uKG4saSl7by5kZWZhdWx0LmRlYnVnKFwic2V0TGl2ZVRyYW5zY29kaW5nOiBcIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkobikpKSxPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkobixcInRyYW5zY29kaW5nXCIpO3ZhciBhPW4scj1hLndpZHRoLGM9YS5oZWlnaHQsZD1hLnZpZGVvQml0cmF0ZSx1PWEudmlkZW9GcmFtZXJhdGUsbD1hLmxvd0xhdGVuY3kscD1hLmF1ZGlvU2FtcGxlUmF0ZSxmPWEuYXVkaW9CaXRyYXRlLG09YS5hdWRpb0NoYW5uZWxzLGc9YS52aWRlb0dvcCx2PWEuaW1hZ2VzLGg9YS52aWRlb0NvZGVjUHJvZmlsZSxTPWEudXNlckNvdW50LF89YS5iYWNrZ3JvdW5kQ29sb3IsRT1hLnRyYW5zY29kaW5nVXNlcnM7aWYoRXx8KEU9bi51c2VyQ29uZmlncyksT2JqZWN0KHJlLmlzRW1wdHkpKHIpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikocixcIndpZHRoXCIpLE9iamVjdChyZS5pc0VtcHR5KShjKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGMsXCJoZWlnaHRcIiksT2JqZWN0KHJlLmlzRW1wdHkpKGQpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZCxcInZpZGVvQml0cmF0ZVwiLDEsMWU2KSxPYmplY3QocmUuaXNFbXB0eSkodSl8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh1LFwidmlkZW9GcmFtZXJhdGVcIiksT2JqZWN0KHJlLmlzRW1wdHkpKGwpfHxPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKGwsXCJsb3dMYXRlbmN5XCIpLE9iamVjdChyZS5pc0VtcHR5KShwKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShwLFwiYXVkaW9TYW1wbGVSYXRlXCIsWzMyZTMsNDQxMDAsNDhlM10pLE9iamVjdChyZS5pc0VtcHR5KShmKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGYsXCJhdWRpb0JpdHJhdGVcIiwxLDEyOCksT2JqZWN0KHJlLmlzRW1wdHkpKG0pfHxPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKG0sXCJhdWRpb0NoYW5uZWxzXCIsWzEsMiwzLDQsNV0pLE9iamVjdChyZS5pc0VtcHR5KShnKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGcsXCJ2aWRlb0dvcFwiKSxPYmplY3QocmUuaXNFbXB0eSkoaCl8fE9iamVjdChyZS5jaGVja1ZhbGlkRW51bSkoaCxcInZpZGVvQ29kZWNQcm9maWxlXCIsWzY2LDc3LDEwMF0pLE9iamVjdChyZS5pc0VtcHR5KShTKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKFMsXCJ1c2VyQ291bnRcIiwwLDE3KSxPYmplY3QocmUuaXNFbXB0eSkoXyl8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShfLFwiYmFja2dyb3VuZENvbG9yXCIsMCwxNjc3NzIxNSksIU9iamVjdChyZS5pc0VtcHR5KShFKSl7aWYoIU9iamVjdChyZS5pc0FycmF5KShFKSl0aHJvdyBuZXcgRXJyb3IoXCJbdHJhbnNjb2RpbmdVc2Vyc106IHRyYW5zY29kaW5nVXNlcnMgc2hvdWxkIGJlIEFycmF5XCIpO2lmKEUubGVuZ3RoPjE3KXRocm93IG5ldyBFcnJvcihcIlRoZSBsZW5ndGggb2YgdHJhbnNjb2RpbmdVc2VycyBjYW5ub3QgZ3JlYXRlciB0aGFuIDE3XCIpO0UubWFwKGZ1bmN0aW9uKGUsdCl7aWYoIU9iamVjdChyZS5pc0VtcHR5KShlLnVpZCkmJiFKdChlLnVpZCkmJiFPYmplY3QocmUuaXNWYWxpZFN0cmluZykoZS51aWQsMSwyNTUpKXRocm93IG5ldyBFcnJvcihcIltTdHJpbmcgdWlkXSBMZW5ndGggb2YgdGhlIHN0cmluZzogWzEsMjU1XS4gQVNDSUkgY2hhcmFjdGVycyBvbmx5LiBbTnVtYmVyIHVpZF0gVGhlIHZhbHVlIHJhbmdlIGlzIFswLDEwMDAwXVwiKTtpZihPYmplY3QocmUuaXNFbXB0eSkoZS54KXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUueCxcInRyYW5zY29kaW5nVXNlcltcIi5jb25jYXQodCxcIl0ueFwiKSwwLDFlNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUueSl8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShlLnksXCJ0cmFuc2NvZGluZ1VzZXJbXCIuY29uY2F0KHQsXCJdLnlcIiksMCwxZTQpLE9iamVjdChyZS5pc0VtcHR5KShlLndpZHRoKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUud2lkdGgsXCJ0cmFuc2NvZGluZ1VzZXJbXCIuY29uY2F0KHQsXCJdLndpZHRoXCIpLDAsMWU0KSxPYmplY3QocmUuaXNFbXB0eSkoZS5oZWlnaHQpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS5oZWlnaHQsXCJ0cmFuc2NvZGluZ1VzZXJbXCIuY29uY2F0KHQsXCJdLmhlaWdodFwiKSwwLDFlNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUuek9yZGVyKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUuek9yZGVyLFwidHJhbnNjb2RpbmdVc2VyW1wiLmNvbmNhdCh0LFwiXS56T3JkZXJcIiksMCwxMDApLCEoT2JqZWN0KHJlLmlzRW1wdHkpKGUuYWxwaGEpfHxPYmplY3QocmUuaXNOdW1iZXIpKGUuYWxwaGEpJiZlLmFscGhhPD0xJiZlLmFscGhhPj0wKSl0aHJvdyBuZXcgRXJyb3IoXCJ0cmFuc2NvZGluZ1VzZXJbJHtpbmRleH1dLmFscGhhOiBUaGUgdmFsdWUgcmFuZ2UgaXMgWzAsIDFdXCIpfSl9aWYoIU9iamVjdChyZS5pc0VtcHR5KSh2KSl7aWYoIU9iamVjdChyZS5pc0FycmF5KSh2KSl0aHJvdyBuZXcgRXJyb3IoXCJbaW1hZ2VzXTogaW1hZ2VzIHNob3VsZCBiZSBBcnJheVwiKTt2Lm1hcChmdW5jdGlvbihlLHQpe2lmKE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShlLnVybCxcImltYWdlc1tcIi5jb25jYXQodCxcIl0udXJsXCIpLDEsMTAyNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUueCk/ZS54PTA6T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUueCxcImltYWdlc1tcIi5jb25jYXQodCxcIl0ueFwiKSwwLDFlNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUueSk/ZS55PTA6T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUueSxcImltYWdlc1tcIi5jb25jYXQodCxcIl0ueVwiKSwwLDFlNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUud2lkdGgpP2Uud2lkdGg9MTYwOk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShlLndpZHRoLFwiaW1hZ2VzW1wiLmNvbmNhdCh0LFwiXS53aWR0aFwiKSwwLDFlNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUuaGVpZ2h0KT9lLmhlaWdodD0xNjA6T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUuaGVpZ2h0LFwiaW1hZ2VzW1wiLmNvbmNhdCh0LFwiXS5oZWlnaHRcIiksMCwxZTQpLE9iamVjdChyZS5pc0VtcHR5KShlLnpPcmRlcik/ZS56T3JkZXI9MDpPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS56T3JkZXIsXCJpbWFnZXNbXCIuY29uY2F0KHQsXCJdLnpPcmRlclwiKSwwLDEwMCksT2JqZWN0KHJlLmlzRW1wdHkpKGUuYWxwaGEpKWUuYWxwaGE9MTtlbHNlIGlmKCEoT2JqZWN0KHJlLmlzTnVtYmVyKShlLmFscGhhKSYmZS5hbHBoYTw9MSYmZS5hbHBoYT49MCkpdGhyb3cgbmV3IEVycm9yKFwiaW1hZ2VbJHtpbmRleH1dLmFscGhhOiBUaGUgdmFsdWUgcmFuZ2UgaXMgWzAsIDFdXCIpfSl9dmFyIEk9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zZXRMaXZlVHJhbnNjb2RpbmdcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKChuPUpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkobikpKS50cmFuc2NvZGluZ1VzZXJzJiYobi51c2VyQ29uZmlncz1uLnRyYW5zY29kaW5nVXNlcnMsZGVsZXRlIG4udHJhbnNjb2RpbmdVc2VycyksZS5qb2luSW5mby5zdHJpbmdVaWQmJm4udXNlckNvbmZpZ3MmJm4udXNlckNvbmZpZ3MubGVuZ3RoKXt2YXIgeT1bXTtuLnVzZXJDb25maWdzLmZvckVhY2goZnVuY3Rpb24odCl7eS5wdXNoKGd0KGUuam9pbkluZm8sZS5nYXRld2F5Q2xpZW50LHQudWlkKS50aGVuKGZ1bmN0aW9uKGUpe3QudWlkPWUudWlkfSkpfSk7dmFyIFQ9UHJvbWlzZS5hbGwoeSkudGhlbihmdW5jdGlvbigpe3JldHVybiBlLl9zZXRMaXZlVHJhbnNjb2RpbmcobixpKX0pO3JldHVybiBULnRoZW4oZnVuY3Rpb24oZSl7SShudWxsLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7SShlKX0pLFR9dmFyIGI9ZS5fc2V0TGl2ZVRyYW5zY29kaW5nKG4saSk7cmV0dXJuIGIudGhlbihmdW5jdGlvbihlKXtJKG51bGwsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtJKGUpfSksYn0sZS5fc2V0TGl2ZVRyYW5zY29kaW5nPSh1PXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHQobixpKXt2YXIgYSxyLG87cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDppZihlLmxpdmVTdHJlYW1pbmcudHJhbnNjb2RpbmdDb25maWc9UygpKGUubGl2ZVN0cmVhbWluZy50cmFuc2NvZGluZ0NvbmZpZyxuKSxcImJvb2xlYW5cIiE9dHlwZW9mIGkmJihpPSEhZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLm1peF9zdHJlYW1pbmcpLGE9SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7YWxsb2NhdGU6ITEsY2xpZW50UmVxdWVzdDp7Y29tbWFuZDpcIlVwZGF0ZVRyYW5zY29kaW5nXCIsdHJhbnNjb2RpbmdDb25maWc6ZS5saXZlU3RyZWFtaW5nLnRyYW5zY29kaW5nQ29uZmlnfSxjb21tYW5kOlwicmVxdWVzdFwifSkpLHI9e30sIWkpe3QubmV4dD0xNjticmVha31yZXR1cm4gZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLm1peF9zdHJlYW1pbmd8fGUubGl2ZVN0cmVhbWluZy5jb25uZWN0KFwibWl4X3N0cmVhbWluZ1wiKSx0Lm5leHQ9OCxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMubWl4X3N0cmVhbWluZy5yZXF1ZXN0KGEpO2Nhc2UgODpyZXR1cm4gbz10LnNlbnQsci50eXBlPVwibGl2ZVRyYW5zY29kaW5nVXBkYXRlZFwiLHIucmVhc29uPW8ucmVhc29uLHIuc3RhdHVzPW8uY29kZSxlLmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChyKSx0LmFicnVwdChcInJldHVyblwiLG8pO2Nhc2UgMTY6cmV0dXJuIHQuYWJydXB0KFwicmV0dXJuXCIse2NvZGU6MjAwLHJlYXNvbjpcInN1Y2Nlc3NcIn0pO2Nhc2UgMTc6Y2FzZVwiZW5kXCI6cmV0dXJuIHQuc3RvcCgpfX0sdCx0aGlzKX0pKSxmdW5jdGlvbihlLHQpe3JldHVybiB1LmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuc3RvcExpdmVTdHJlYW1pbmc9ZnVuY3Rpb24obixpKXtPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobixcInVybFwiLDEsMTAyNCk7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zdG9wTGl2ZVN0cmVhbWluZ1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSkscj1lLl9zdG9wTGl2ZVN0cmVhbWluZyhuLGkpO3JldHVybiByLnRoZW4oZnVuY3Rpb24oZSl7YShudWxsLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YShlKX0pLHJ9LGUuX3N0b3BMaXZlU3RyZWFtaW5nPShkPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHQobixpLGEpe3ZhciByLG8scyxjLGQsdTtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOnJldHVybiByPW51bGwsbz1lLmxpdmVTdHJlYW1pbmcucHVzaFN0YXRlc1tuXSxyPW8/by50cmFuc2NvZGluZ0VuYWJsZWQ/XCJtaXhfc3RyZWFtaW5nXCI6XCJyYXdfc3RyZWFtaW5nXCI6aT9cIm1peF9zdHJlYW1pbmdcIjpcInJhd19zdHJlYW1pbmdcIixzPXthbGxvY2F0ZTohMSxjbGllbnRSZXF1ZXN0Ontjb21tYW5kOlwiVW5wdWJsaXNoU3RyZWFtXCIsdXJsOm59LGNvbW1hbmQ6XCJyZXF1ZXN0XCJ9LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uc1tyXXx8ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3QociksYz1udWxsLHQucHJldj02LHQubmV4dD05LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uc1tyXS5yZXF1ZXN0KHMpO2Nhc2UgOTpjPXQuc2VudCwoZD17fSkudHlwZT1cImxpdmVTdHJlYW1pbmdTdG9wcGVkXCIsZC5yZWFzb249YyYmYy5yZWFzb24sZC5zdGF0dXM9YyYmYy5jb2RlLGQudXJsPWMmJmMuc2VydmVyUmVzcG9uc2UmJmMuc2VydmVyUmVzcG9uc2UudXJsLGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGQpLHQubmV4dD0yNzticmVhaztjYXNlIDE4OnRocm93IHQucHJldj0xOCx0LnQwPXQuY2F0Y2goNiksKHU9e30pLnR5cGU9XCJsaXZlU3RyZWFtaW5nU3RvcHBlZFwiLHUucmVhc29uPXQudDAmJnQudDAucmVhc29uLHUuc3RhdHVzPXQudDAmJnQudDAuY29kZSx1LnVybD10LnQwJiZ0LnQwLnNlcnZlclJlc3BvbnNlJiZ0LnQwLnNlcnZlclJlc3BvbnNlLnVybCxlLmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh1KSx0LnQwO2Nhc2UgMjc6cmV0dXJuIGF8fGRlbGV0ZSBlLmxpdmVTdHJlYW1pbmcucHVzaFN0YXRlc1tuXSx0LmFicnVwdChcInJldHVyblwiLGMpO2Nhc2UgMjk6Y2FzZVwiZW5kXCI6cmV0dXJuIHQuc3RvcCgpfX0sdCx0aGlzLFtbNiwxOF1dKX0pKSxmdW5jdGlvbihlLHQsbil7cmV0dXJuIGQuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5saXZlU3RyZWFtaW5nLmluamVjdFN0cmVhbVRyYW5zY29kaW5nQ29uZmlnPXthdXRvRGVzdHJveVRpbWU6MzAsYXVkaW9CaXRyYXRlOjQ4LGF1ZGlvQ2hhbm5lbHM6MSxhdWRpb1NhbXBsZVJhdGU6NDQxMDAsaGVpZ2h0OjAsdmlkZW9CaXRyYXRlOjQwMCx2aWRlb0ZyYW1lcmF0ZToxNSx2aWRlb0dvcDozMCx3aWR0aDowfSxlLmFkZEluamVjdFN0cmVhbVVybD1mdW5jdGlvbihpLGEpe09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShpLFwidXJsXCIsMSwxMDI0KSxPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkoYSxcImNvbmZpZ1wiKSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEud2lkdGgpJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYS53aWR0aCxcImNvbmZpZy53aWR0aFwiLDAsMWU0KSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEuaGVpZ2h0KSYmT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGEuaGVpZ2h0LFwiY29uZmlnLmhlaWdodFwiLDAsMWU0KSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEudmlkZW9Hb3ApJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYS52aWRlb0dvcCxcImNvbmZpZy52aWRlb0dvcFwiLDEsMWU0KSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEudmlkZW9GcmFtZXJhdGUpJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYS52aWRlb0ZyYW1lcmF0ZSxcImNvbmZpZy52aWRlb0ZyYW1lcmF0ZVwiLDEsMWU0KSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEudmlkZW9CaXRyYXRlKSYmT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGEudmlkZW9CaXRyYXRlLFwiY29uZmlnLnZpZGVvQml0cmF0ZVwiLDEsMWU0KSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEuYXVkaW9TYW1wbGVSYXRlKSYmT2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShhLmF1ZGlvU2FtcGxlUmF0ZSxcImNvbmZpZy5hdWRpb1NhbXBsZVJhdGVcIixbMzJlMyw0NDEwMCw0OGUzXSksIU9iamVjdChyZS5pc0VtcHR5KShhJiZhLmF1ZGlvQml0cmF0ZSkmJk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShhLmF1ZGlvQml0cmF0ZSxcImNvbmZpZy5hdWRpb0JpdHJhdGVcIiwxLDFlNCksIU9iamVjdChyZS5pc0VtcHR5KShhJiZhLmF1ZGlvQ2hhbm5lbHMpJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYS5hdWRpb0NoYW5uZWxzLFwiY29uZmlnLmF1ZGlvQ2hhbm5lbHNcIiwxLDIpO3ZhciByPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuYWRkSW5qZWN0U3RyZWFtVXJsXCIsb3B0aW9uczpuLHRhZzpcInRyYWNlclwifSk7aWYoXCJhdWRpZW5jZVwiPT09ZS5nYXRld2F5Q2xpZW50LnJvbGUpe3ZhciBvPXtjb2RlOjQwMyxyZWFzb246XCJBVURJRU5DRV9JTkpFQ1RJTkdfRk9SQklEREVOXCJ9O3Rocm93IHIobyksb312YXIgYz1lLl9hZGRJbmplY3RTdHJlYW1VcmwoaSxhKTtyZXR1cm4gYy50aGVuKGZ1bmN0aW9uKGUpe3IobnVsbCxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe3IoZSl9KSxjfSxlLl9hZGRJbmplY3RTdHJlYW1Vcmw9KHI9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gbihpLGEpe3ZhciByLG8scyxjLGQ7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihuKXtmb3IoOzspc3dpdGNoKG4ucHJldj1uLm5leHQpe2Nhc2UgMDpyZXR1cm4gcj1TKCkoe30sZS5saXZlU3RyZWFtaW5nLmluamVjdFN0cmVhbVRyYW5zY29kaW5nQ29uZmlnLGEpLG89e2FsbG9jYXRlOiEwLGNsaWVudFJlcXVlc3Q6e2NuYW1lOmUuY2hhbm5lbCxjb21tYW5kOlwiSW5qZWN0U3RyZWFtXCIsc2lkOnQuc2Vzc2lvbklkLHRyYW5zY29kaW5nQ29uZmlnOnIsdHM6RGF0ZS5ub3coKSx1cmw6aSx2aWQ6cGFyc2VJbnQoZS5qb2luSW5mby52aWQsMTApfSxjb21tYW5kOlwicmVxdWVzdFwifSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMuaW5qZWN0X3N0cmVhbWluZ3x8ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3QoXCJpbmplY3Rfc3RyZWFtaW5nXCIpLHM9bnVsbCxuLnByZXY9NCxuLm5leHQ9NyxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMuaW5qZWN0X3N0cmVhbWluZy5yZXF1ZXN0KG8pO2Nhc2UgNzpzPW4uc2VudCxjPXtyZWFzb246cyYmcy5yZWFzb24sc3RhdHVzOkt0KHMmJnMuY29kZSksdHlwZTpcInN0cmVhbUluamVjdGVkU3RhdHVzXCIsdWlkOnMmJnMuc2VydmVyUmVzcG9uc2UmJnMuc2VydmVyUmVzcG9uc2UuaW5qZWN0X3VpZCx1cmw6cyYmcy5zZXJ2ZXJSZXNwb25zZSYmcy5zZXJ2ZXJSZXNwb25zZS51cmx9LGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGMpLG4ubmV4dD0xNzticmVhaztjYXNlIDEyOnRocm93IG4ucHJldj0xMixuLnQwPW4uY2F0Y2goNCksZD17cmVhc29uOm4udDAmJm4udDAucmVhc29uLHN0YXR1czpLdChuLnQwJiZuLnQwLmNvZGUpLHR5cGU6XCJzdHJlYW1JbmplY3RlZFN0YXR1c1wiLHVpZDpuLnQwJiZuLnQwLnNlcnZlclJlc3BvbnNlJiZuLnQwLnNlcnZlclJlc3BvbnNlLmluamVjdF91aWQsdXJsOm4udDAmJm4udDAuc2VydmVyUmVzcG9uc2UmJm4udDAuc2VydmVyUmVzcG9uc2UudXJsfSxlLmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChkKSxuLnQwO2Nhc2UgMTc6cmV0dXJuIGUubGl2ZVN0cmVhbWluZy5wdWxsU3RhdGVzW2ldPXt0cmFuc2NvZGluZ0NvbmZpZzpyLHVybDppfSxuLmFicnVwdChcInJldHVyblwiLHMpO2Nhc2UgMTk6Y2FzZVwiZW5kXCI6cmV0dXJuIG4uc3RvcCgpfX0sbix0aGlzLFtbNCwxMl1dKX0pKSxmdW5jdGlvbihlLHQpe3JldHVybiByLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUucmVtb3ZlSW5qZWN0U3RyZWFtVXJsPShhPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIG4oaSl7dmFyIGEscixvPWFyZ3VtZW50cztyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKG4pe2Zvcig7Oylzd2l0Y2gobi5wcmV2PW4ubmV4dCl7Y2FzZSAwOnJldHVybiBPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykoaSxcInVybFwiLDEsMjU1KSxhPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQucmVtb3ZlSW5qZWN0U3RyZWFtVXJsXCIsb3B0aW9uczpvLHRhZzpcInRyYWNlclwifSksKHI9ZS5fcmVtb3ZlSW5qZWN0U3RyZWFtVXJsKGkpKS50aGVuKGZ1bmN0aW9uKGUpe2EobnVsbCxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EoZSl9KSxuLmFicnVwdChcInJldHVyblwiLHIpO2Nhc2UgNTpjYXNlXCJlbmRcIjpyZXR1cm4gbi5zdG9wKCl9fSxuLHRoaXMpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBhLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUuX3JlbW92ZUluamVjdFN0cmVhbVVybD0oaT11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiB0KG4pe3ZhciBpLGEscixvO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIGk9e2FsbG9jYXRlOiExLGNsaWVudFJlcXVlc3Q6e2NvbW1hbmQ6XCJVbmluamVjdFN0cmVhbVwiLHVybDpufSxjb21tYW5kOlwicmVxdWVzdFwifSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMuaW5qZWN0X3N0cmVhbWluZ3x8ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3QoXCJpbmplY3Rfc3RyZWFtaW5nXCIpLGE9bnVsbCx0LnByZXY9Myx0Lm5leHQ9NixlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMuaW5qZWN0X3N0cmVhbWluZy5yZXF1ZXN0KGkpO2Nhc2UgNjphPXQuc2VudCxyPXtyZWFzb246YSYmYS5yZWFzb24sc3RhdHVzOnp0KGEmJmEuY29kZSksdHlwZTpcInN0cmVhbUluamVjdGVkU3RhdHVzXCIsdWlkOmEmJmEuc2VydmVyUmVzcG9uc2UmJmEuc2VydmVyUmVzcG9uc2UuaW5qZWN0X3VpZCx1cmw6YSYmYS5zZXJ2ZXJSZXNwb25zZSYmYS5zZXJ2ZXJSZXNwb25zZS51cmx9LGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHIpLHQubmV4dD0xNjticmVhaztjYXNlIDExOnRocm93IHQucHJldj0xMSx0LnQwPXQuY2F0Y2goMyksbz17cmVhc29uOnQudDAmJnQudDAucmVhc29uLHN0YXR1czp6dCh0LnQwJiZ0LnQwLmNvZGUpLHR5cGU6XCJzdHJlYW1JbmplY3RlZFN0YXR1c1wiLHVpZDp0LnQwJiZ0LnQwLnNlcnZlclJlc3BvbnNlJiZ0LnQwLnNlcnZlclJlc3BvbnNlLmluamVjdF91aWQsdXJsOnQudDAmJnQudDAuc2VydmVyUmVzcG9uc2UmJnQudDAuc2VydmVyUmVzcG9uc2UudXJsfSxlLmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChvKSx0LnQwO2Nhc2UgMTY6cmV0dXJuIGRlbGV0ZSBlLmxpdmVTdHJlYW1pbmcucHVsbFN0YXRlc1tuXSx0LmFicnVwdChcInJldHVyblwiLGEpO2Nhc2UgMTg6Y2FzZVwiZW5kXCI6cmV0dXJuIHQuc3RvcCgpfX0sdCx0aGlzLFtbMywxMV1dKX0pKSxmdW5jdGlvbihlKXtyZXR1cm4gaS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTt2YXIgaTt2YXIgYTt2YXIgcjt2YXIgZDt2YXIgdTt2YXIgbDt2YXIgcDt2YXIgZjt2YXIgbX0odCxlKSxPYmplY3QocmUuaXNFbXB0eSkoZS50dXJuU2VydmVyKXx8dC5zZXRUdXJuU2VydmVyKGUudHVyblNlcnZlciksT2JqZWN0KHJlLmlzRW1wdHkpKGUucHJveHlTZXJ2ZXIpfHx0LnNldFByb3h5U2VydmVyKGUucHJveHlTZXJ2ZXIpLFwibGl2ZVwiPT09dC5tb2RlJiYodC5nYXRld2F5Q2xpZW50LnJvbGU9XCJhdWRpZW5jZVwiKSxcInJ0Y1wiPT09dC5tb2RlJiYodC5nYXRld2F5Q2xpZW50LnJvbGU9XCJob3N0XCIpLHQuZ2F0ZXdheUNsaWVudC5vbihcIm9uTXVsdGlJUFwiLGZ1bmN0aW9uKGUpe3QuZ2F0ZXdheUNsaWVudC5jbG9zZUdhdGV3YXkoKSx0LmdhdGV3YXlDbGllbnQuc29ja2V0PXZvaWQgMCx0LmdhdGV3YXlDbGllbnQuaGFzQ2hhbmdlQkdQQWRkcmVzcz0hMCx0LmpvaW5JbmZvLm11bHRpSVA9ZS5vcHRpb24sdC5nYXRld2F5Q2xpZW50LnN0YXRlPVJ0LkNPTk5FQ1RJTkc7dmFyIG49ZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIEpvaW5pbmcgY2hhbm5lbDogXCIpLmNvbmNhdCh0LmNoYW5uZWwpKSx0LmpvaW5JbmZvLmNpZD1lLmNpZCx0LmpvaW5JbmZvLnVpZHx8KHQuam9pbkluZm8udWlkPWUudWlkKSx0LmpvaW5JbmZvLnVuaV9sYnNfaXA9ZS51bmlfbGJzX2lwLHQuam9pbkluZm8uZ2F0ZXdheUFkZHI9ZS5nYXRld2F5X2FkZHIsdC5vblN1Y2Nlc3M/dC5nYXRld2F5Q2xpZW50LmpvaW4odC5qb2luSW5mbyx0LmtleSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gSm9pbiBjaGFubmVsIFwiKS5jb25jYXQodC5jaGFubmVsLFwiIHN1Y2Nlc3NcIikpO3ZhciBuPXQub25TdWNjZXNzO3Qub25TdWNjZXNzPW51bGwsdC5vbkZhaWx1cmU9bnVsbCxuKGUpfSx0Lm9uRmFpbHVyZSk6KHQuZ2F0ZXdheUNsaWVudC5qb2luSW5mbz1TKCkoe30sdC5qb2luSW5mbyksdC5nYXRld2F5Q2xpZW50LnJlam9pbigpKX07dC5qb2luSW5mby5zdHJpbmdVaWQmJiF0LmpvaW5JbmZvLnVpZD8odC51c2VyQWNjb3VudFJlcSYmIXQudXNlckFjY291bnRSZXEuaXNGaW5pc2hlZCgpJiZ0LnVzZXJBY2NvdW50UmVxLmNhbmNlbCgpLHQudXNlckFjY291bnRSZXE9Z3Qoam9pbkluZm8sdC5nYXRld2F5Q2xpZW50KSx0LnVzZXJBY2NvdW50UmVxLnRoZW4oZnVuY3Rpb24oZSl7by5kZWZhdWx0LmVycm9yKFwiZ2V0VXNlckFjY291bnQgU3VjY2VzcyBcIi5jb25jYXQoZS51cmwsXCIgXCIpLmNvbmNhdChqb2luSW5mby5zdHJpbmdVaWQsXCIgPT4gXCIpLmNvbmNhdChlLnVpZCkpLHQuam9pbkluZm8udWlkPWUudWlkLGZ0KHQuam9pbkluZm8sbix0Lm9uRmFpbHVyZSl9KS5jYXRjaChmdW5jdGlvbihlKXtvLmRlZmF1bHQuZXJyb3IoXCJnZXRVc2VyQWNjb3VudCByZWplY3RlZFwiLGUpLHQub25GYWlsdXJlKGUpfSkpOmZ0KHQuam9pbkluZm8sbix0Lm9uRmFpbHVyZSl9KSx0LmdhdGV3YXlDbGllbnQub24oXCJyZWpvaW4tc3RhcnRcIixmdW5jdGlvbigpe3QuX3JlbmV3U2Vzc2lvbigpLHMuYi5zZXNzaW9uSW5pdChlLnNlc3Npb25JZCx7bHRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGV4dGVuZDp7cmVqb2luOiEwfSxjbmFtZTp0LmNoYW5uZWwsYXBwaWQ6ZS5hcHBJZCxtb2RlOmUubW9kZSxzdWNjOiEwfSl9KSx0LmdhdGV3YXlDbGllbnQub24oXCJyZWNvdmVyXCIsZnVuY3Rpb24oKXt0Ll9yZW5ld1Nlc3Npb24oKSxjb25zb2xlLmxvZyhcInJlY292ZXJcIixlLnNlc3Npb25JZCkscy5iLnNlc3Npb25Jbml0KGUuc2Vzc2lvbklkLHtsdHM6KG5ldyBEYXRlKS5nZXRUaW1lKCksZXh0ZW5kOntyZWNvdmVyOiEwfSxjbmFtZTp0LmNoYW5uZWwsYXBwaWQ6ZS5hcHBJZCxtb2RlOmUubW9kZSxzdWNjOiEwfSl9KSx0LmdhdGV3YXlDbGllbnQub24oXCJyZWpvaW5cIixmdW5jdGlvbigpe3ZhciBlPXQuaGlnaFN0cmVhbVN0YXRlO2lmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gQ2xpZW50IGxvY2FsIHN0cmVhbSBwcmVTdGF0ZTogXCIpLmNvbmNhdChlKSksdC5vblN1Y2Nlc3Mpe3ZhciBuPXQub25TdWNjZXNzO3Qub25TdWNjZXNzPW51bGwsdC5vbkZhaWx1cmU9bnVsbCxuKCl9IXQuaGlnaFN0cmVhbXx8MCE9PWUmJjEhPT1lfHwoby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIHB1Ymxpc2ggYWZ0ZXIgcmVqb2luXCIpKSx0LmhpZ2hTdHJlYW1TdGF0ZT0yLHQubG93U3RyZWFtU3RhdGU9Mix0LnB1Ymxpc2godC5oaWdoU3RyZWFtLGZ1bmN0aW9uKGUpe2UmJm8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBcIiksZSl9KSl9KSx0LmdhdGV3YXlDbGllbnQub24oXCJzdHJlYW1QdWJsaXNoZWRcIixmdW5jdGlvbihlKXt0Lmhhc1B1Ymxpc2hlZHx8KHQuaGFzUHVibGlzaGVkPSEwLHQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHUoe3R5cGU6XCJzdHJlYW0tcHVibGlzaGVkXCIsc3RyZWFtOmUuc3RyZWFtfSkpKX0pLHQuZ2F0ZXdheUNsaWVudC5vbihcInB1YlAyUExvc3RcIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFN0YXJ0IHJlY29ubmVjdCBsb2NhbCBwZWVyQ29ubmVjdGlvbjogXCIpLmNvbmNhdCh0LmhpZ2hTdHJlYW0uZ2V0SWQoKSkpLHQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwic3RyZWFtLXJlY29ubmVjdC1zdGFydFwiLHVpZDp0LmhpZ2hTdHJlYW0uZ2V0SWQoKX0pLDE9PT10LmhpZ2hTdHJlYW1TdGF0ZSYmKHQuaGlnaFN0cmVhbVN0YXRlPTAsdC5sb3dTdHJlYW1TdGF0ZT0wKSx0Ll91bnB1Ymxpc2godC5oaWdoU3RyZWFtLGZ1bmN0aW9uKCl7dC5fcHVibGlzaCh0LmhpZ2hTdHJlYW0sZnVuY3Rpb24oKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFJlY29ubmVjdCBsb2NhbCBwZWVyQ29ubmVjdGlvbiBzdWNjZXNzOiBcIikuY29uY2F0KHQuaGlnaFN0cmVhbS5nZXRJZCgpKSksdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdHJlYW0tcmVjb25uZWN0LWVuZFwiLHVpZDp0LmhpZ2hTdHJlYW0uZ2V0SWQoKSxzdWNjZXNzOiEwLHJlYXNvbjpcIlwifSl9LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gUmVjb25uZWN0IGxvY2FsIHBlZXJDb25uZWN0aW9uIGZhaWxlZDogXCIpLmNvbmNhdChlKSksdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdHJlYW0tcmVjb25uZWN0LWVuZFwiLHVpZDp0LmhpZ2hTdHJlYW0uZ2V0SWQoKSxzdWNjZXNzOiExLHJlYXNvbjplfSl9LCEwKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBSZWNvbm5lY3QgbG9jYWwgcGVlckNvbm5lY3Rpb24gZmFpbGVkOiBcIikuY29uY2F0KGUpKSx0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbS1yZWNvbm5lY3QtZW5kXCIsdWlkOnQuaGlnaFN0cmVhbS5nZXRJZCgpLHN1Y2Nlc3M6ITEscmVhc29uOmV9KX0sITApfSksdC5nYXRld2F5Q2xpZW50Lm9uKFwic3ViUDJQTG9zdFwiLGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gU3RhcnQgcmVjb25uZWN0IHJlbW90ZSBwZWVyQ29ubmVjdGlvbjogXCIpLmNvbmNhdChlLnN0cmVhbS5nZXRJZCgpLFwiIFwiKS5jb25jYXQoZS5zdHJlYW0uc3Vic2NyaWJlT3B0aW9ucykpLHQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwic3RyZWFtLXJlY29ubmVjdC1zdGFydFwiLHVpZDplLnN0cmVhbS5nZXRJZCgpfSk7dmFyIG49ZS5zdHJlYW0uc3Vic2NyaWJlT3B0aW9ucztjb25zb2xlLmxvZyhcIlJlLXN1YnNjcmliZSBzdHJlYW1cIixuLGUuc3RyZWFtKSx0LmdhdGV3YXlDbGllbnQudW5zdWJzY3JpYmUoZS5zdHJlYW0sZnVuY3Rpb24oKXtlLnN0cmVhbS5zdWJzY3JpYmVPcHRpb25zPW4sdC5nYXRld2F5Q2xpZW50LnN1YnNjcmliZShlLnN0cmVhbSxmdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gUmVjb25uZWN0IHJlbW90ZSBwZWVyQ29ubmVjdGlvbiBzdWNjZXNzOiBcIikuY29uY2F0KGUuc3RyZWFtLmdldElkKCkpKSx0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbS1yZWNvbm5lY3QtZW5kXCIsdWlkOmUuc3RyZWFtLmdldElkKCksc3VjY2VzczohMSxyZWFzb246XCJcIn0pfSxmdW5jdGlvbihuKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFJlY29ubmVjdCByZW1vdGUgcGVlckNvbm5lY3Rpb24gZmFpbGVkOiBcIiksbiksdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdHJlYW0tcmVjb25uZWN0LWVuZFwiLHVpZDplLnN0cmVhbS5nZXRJZCgpLHN1Y2Nlc3M6ITEscmVhc29uOm59KX0pfSxmdW5jdGlvbihuKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFJlY29ubmVjdCByZW1vdGUgcGVlckNvbm5lY3Rpb24gZmFpbGVkOiBcIiksbiksdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdHJlYW0tcmVjb25uZWN0LWVuZFwiLHVpZDplLnN0cmVhbS5nZXRJZCgpLHN1Y2Nlc3M6ITEscmVhc29uOm59KX0pfSksd3Qub24oXCJuZXR3b3JrVHlwZUNoYW5nZWRcIixmdW5jdGlvbihlKXt0LmdhdGV3YXlDbGllbnQmJnQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGUpO3ZhciBuPVMoKSh7fSxlLHt0eXBlOlwibmV0d29yay10eXBlLWNoYW5nZWRcIn0pO3QuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KG4pfSksYWUub24oXCJyZWNvcmRpbmdEZXZpY2VDaGFuZ2VkXCIsZnVuY3Rpb24oZSl7dC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChlKTt2YXIgbj1TKCkoe30sZSx7dHlwZTpcInJlY29yZGluZy1kZXZpY2UtY2hhbmdlZFwifSk7dC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQobil9KSxhZS5vbihcInBsYXlvdXREZXZpY2VDaGFuZ2VkXCIsZnVuY3Rpb24oZSl7dC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChlKTt2YXIgbj1TKCkoe30sZSx7dHlwZTpcInBsYXlvdXQtZGV2aWNlLWNoYW5nZWRcIn0pO3QuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KG4pfSksYWUub24oXCJjYW1lcmFDaGFuZ2VkXCIsZnVuY3Rpb24oZSl7dC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChlKTt2YXIgbj1TKCkoe30sZSx7dHlwZTpcImNhbWVyYS1jaGFuZ2VkXCJ9KTt0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChuKX0pLHQuZ2F0ZXdheUNsaWVudC5vbihcInN0cmVhbVR5cGVDaGFuZ2VcIixmdW5jdGlvbihuKXt2YXIgaT1TKCkoe30sbix7dHlwZTpcInN0cmVhbS10eXBlLWNoYW5nZWRcIn0pO3QuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGkpLHMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJzdHJlYW1UeXBlQ2hhbmdlXCJ9KShudWxsLEpTT04uc3RyaW5naWZ5KG4pKX0pLHR9LFF0PXt3aWR0aDo2NDAsaGVpZ2h0OjM2MCx2aWRlb0JpdHJhdGU6NDAwLHZpZGVvRnJhbWVyYXRlOjE1LGxvd0xhdGVuY3k6ITEsYXVkaW9TYW1wbGVSYXRlOjQ4ZTMsYXVkaW9CaXRyYXRlOjQ4LGF1ZGlvQ2hhbm5lbHM6MSx2aWRlb0dvcDozMCx2aWRlb0NvZGVjUHJvZmlsZToxMDAsdXNlckNvdW50OjAsdXNlckNvbmZpZ0V4dHJhSW5mbzp7fSxiYWNrZ3JvdW5kQ29sb3I6MCx0cmFuc2NvZGluZ1VzZXJzOltdfSwkdD1hZS5nZXREZXZpY2VzLFp0PVgsZW49SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShyLlNVUFBPUlRfUkVTT0xVVElPTl9MSVNUKSk7bi5kZWZhdWx0PXtUcmFuc2NvZGluZ1VzZXI6e3VpZDowLHg6MCx5OjAsd2lkdGg6MCxoZWlnaHQ6MCx6T3JkZXI6MCxhbHBoYToxfSxMaXZlVHJhbnNjb2Rpbmc6UXQsY3JlYXRlQ2xpZW50OmZ1bmN0aW9uKGUpe3ZhciB0PXMuYi5yZXBvcnRBcGlJbnZva2UobnVsbCx7bmFtZTpcImNyZWF0ZUNsaWVudFwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7KGU9UygpKHt9LGV8fHt9KSkuY29kZWN8fChlLmNvZGVjPWZ1bmN0aW9uKGUpe3N3aXRjaChlKXtjYXNlXCJoMjY0X2ludGVyb3BcIjpyZXR1cm5cImgyNjRcIjtkZWZhdWx0OnJldHVyblwidnA4XCJ9fShlLm1vZGUpKTt2YXIgbj1mdW5jdGlvbihlKXtyZXR1cm4tMT09PVhlLmluZGV4T2YoZS5tb2RlKT9WLklOVkFMSURfQ0xJRU5UX01PREU6LTE9PT1RZS5pbmRleE9mKGUuY29kZWMpP1YuSU5WQUxJRF9DTElFTlRfQ09ERUM6XCJoMjY0X2ludGVyb3BcIj09ZS5tb2RlJiZcImgyNjRcIiE9PWUuY29kZWMmJlYuQ0xJRU5UX01PREVfQ09ERUNfTUlTTUFUQ0h9KGUpO2lmKG4pdGhyb3cgby5kZWZhdWx0LmVycm9yKFwiSW52YWxpZCBwYXJhbWV0ZXIgc2V0dGluZyBNT0RFOiBcIi5jb25jYXQoZS5tb2RlLFwiIENPREVDOiBcIikuY29uY2F0KGUuY29kZWMsXCIgRVJST1IgXCIpLmNvbmNhdChuKSksdChuKSxuZXcgRXJyb3Iobik7cmV0dXJuIG8uZGVmYXVsdC5pbmZvKFwiQ3JlYXRpbmcgY2xpZW50LCBNT0RFOiBcIi5jb25jYXQoZS5tb2RlLFwiIENPREVDOiBcIikuY29uY2F0KGUuY29kZWMpKSxmdW5jdGlvbihlKXtzd2l0Y2goZS5tb2RlKXtjYXNlXCJpbnRlcm9wXCI6Y2FzZVwiaDI2NF9pbnRlcm9wXCI6ZS5tb2RlPVwibGl2ZVwiO2JyZWFrO2Nhc2VcIndlYi1vbmx5XCI6ZS5tb2RlPVwicnRjXCJ9fShlKSx0KG51bGwsZSksWHQoZSl9LGNyZWF0ZVN0cmVhbTpmdW5jdGlvbihlKXt2YXIgdD1zLmIucmVwb3J0QXBpSW52b2tlKG51bGwse25hbWU6XCJjcmVhdGVTdHJlYW1cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KShlLFwiU3RyZWFtU3BlY1wiKTt2YXIgbj1lLnN0cmVhbUlELGk9ZS5hdWRpbyxhPWUudmlkZW8scj1lLnNjcmVlbixjPWUuc2NyZWVuQXVkaW8sZD0oZS5hdWRpb1NvdXJjZSxlLnZpZGVvU291cmNlLGUuY2FtZXJhSWQpLHU9ZS5mYWNpbmdNb2RlLGw9ZS5taWNyb3Bob25lSWQscD1lLm1pcnJvcixmPWUuZXh0ZW5zaW9uSWQsbT1lLm1lZGlhU291cmNlLGc9ZS5hdWRpb1Byb2Nlc3Npbmc7aWYoIU9iamVjdChyZS5pc0VtcHR5KShuKSYmIU9iamVjdChuZS5pczMyVWludCkobikmJiFPYmplY3QocmUuaXNWYWxpZFN0cmluZykobiwxLDI1NSkpdGhyb3cgbmV3IEVycm9yKFwiW1N0cmluZyBzdHJlYW1JRF0gTGVuZ3RoIG9mIHRoZSBzdHJpbmc6IFsxLDI1NV0uIEFTQ0lJIGNoYXJhY3RlcnMgb25seS4gW051bWJlciBzdHJlYW1JRF0gVGhlIHZhbHVlIHJhbmdlIGlzIFVpbnQzMlwiKTtpZihPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKGksXCJhdWRpb1wiKSxPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKGEsXCJ2aWRlb1wiKSxPYmplY3QocmUuaXNFbXB0eSkocil8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikocixcInNjcmVlblwiKSxPYmplY3QocmUuaXNFbXB0eSkoYyl8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoYyxcInNjcmVlbkF1ZGlvXCIpLE9iamVjdChyZS5pc0VtcHR5KShkKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGQsXCJjYW1lcmFJZFwiLDAsMjU1LCExKSxPYmplY3QocmUuaXNFbXB0eSkodSl8fE9iamVjdChyZS5jaGVja1ZhbGlkRW51bSkodSxcImZhY2luZ01vZGVcIixbXCJ1c2VyXCIsXCJlbnZpcm9ubWVudFwiLFwibGVmdFwiLFwicmlnaHRcIl0pLE9iamVjdChyZS5pc0VtcHR5KShsKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGwsXCJtaWNyb3Bob25lSWRcIiwwLDI1NSwhMSksT2JqZWN0KHJlLmlzRW1wdHkpKGYpfHxPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykoZixcImV4dGVuc2lvbklkXCIpLE9iamVjdChyZS5pc0VtcHR5KShtKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShtLFwibWVkaWFTb3VyY2VcIixbXCJzY3JlZW5cIixcImFwcGxpY2F0aW9uXCIsXCJ3aW5kb3dcIl0pLE9iamVjdChyZS5pc0VtcHR5KShwKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShwLFwibWlycm9yXCIpLCFPYmplY3QocmUuaXNFbXB0eSkoZykpe3ZhciB2PWcuQUdDLGg9Zy5BRUMsUz1nLkFOUztPYmplY3QocmUuaXNFbXB0eSkodil8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikodixcIkFHQ1wiKSxPYmplY3QocmUuaXNFbXB0eSkoaCl8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoaCxcIkFFQ1wiKSxPYmplY3QocmUuaXNFbXB0eSkoUyl8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoUyxcIkFOU1wiKX1vLmRlZmF1bHQuZGVidWcoXCJDcmVhdGUgc3RyZWFtXCIpLCEwPT09YyYmITA9PT1pJiZvLmRlZmF1bHQud2FybmluZyhcIkRvIG5vdCBzZXQgYm90aCAnc2NyZWVuQXVkaW8nIGFuZCAnYXVkaW8nIHRvIHRydWUgYXQgdGhlIHNhbWUgdGltZVwiKTt2YXIgXz1ZZShlKTtyZXR1cm4gdCgpLF99LExvZ2dlcjpvLmRlZmF1bHQscmVwb3J0OnMuYixnZXREZXZpY2VzOiR0LGdldFNjcmVlblNvdXJjZXM6WnQsZ2V0UGFyYW1ldGVyOnIuZ2V0UGFyYW1ldGVyLHNldFBhcmFtZXRlcjpyLnNldFBhcmFtZXRlcixjaGVja1N5c3RlbVJlcXVpcmVtZW50czpmdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UobnVsbCx7bmFtZTpcImNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSx0PXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbnx8d2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9ufHx3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24sbj1uYXZpZ2F0b3IuZ2V0VXNlck1lZGlhfHxuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhfHxuYXZpZ2F0b3IubXNHZXRVc2VyTWVkaWF8fG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWF8fG5hdmlnYXRvci5tZWRpYURldmljZXMmJm5hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhLGk9d2luZG93LldlYlNvY2tldCxhPSEhdCYmISFuJiYhIWkscj0hMTtvLmRlZmF1bHQuZGVidWcobS5nZXRCcm93c2VySW5mbygpLFwiaXNBUElTdXBwb3J0OlwiK2EpLG0uaXNDaHJvbWUoKSYmbS5nZXRCcm93c2VyVmVyc2lvbigpPj01OCYmXCJpT1NcIiE9PW0uZ2V0QnJvd3Nlck9TKCkmJihyPSEwKSxtLmlzRmlyZUZveCgpJiZtLmdldEJyb3dzZXJWZXJzaW9uKCk+PTU2JiYocj0hMCksbS5pc09wZXJhKCkmJm0uZ2V0QnJvd3NlclZlcnNpb24oKT49NDUmJihyPSEwKSxtLmlzU2FmYXJpKCkmJm0uZ2V0QnJvd3NlclZlcnNpb24oKT49MTEmJihyPSEwKSxtLmlzRWRnZSgpJiYocj0hMCksKG0uaXNXZUNoYXRCcm93c2VyKCl8fG0uaXNRUUJyb3dzZXIoKSkmJlwiaU9TXCIhPT1tLmdldEJyb3dzZXJPUygpJiYocj0hMCksbS5pc1N1cHBvcnRlZFBDKCl8fG0uaXNTdXBwb3J0ZWRNb2JpbGUoKXx8KHI9ITEpO3ZhciBjPWEmJnI7cmV0dXJuIGUobnVsbCxjKSxjfSxnZXRTdXBwb3J0ZWRDb2RlYzpKZS5nZXRTdXBwb3J0ZWRDb2RlYyxDaGFubmVsTWVkaWFSZWxheUNvbmZpZ3VyYXRpb246S2UuQ2hhbm5lbE1lZGlhUmVsYXlDb25maWd1cmF0aW9uLFZFUlNJT046ci5WRVJTSU9OLEJVSUxEOnIuQlVJTEQsUFJPRklMRV9UQUJMRTplbixBVURJT19TQU1QTEVfUkFURV8zMjAwMDozMmUzLEFVRElPX1NBTVBMRV9SQVRFXzQ0MTAwOjQ0MTAwLEFVRElPX1NBTVBMRV9SQVRFXzQ4MDAwOjQ4ZTMsVklERU9fQ09ERUNfUFJPRklMRV9CQVNFTElORTo2NixWSURFT19DT0RFQ19QUk9GSUxFX01BSU46NzcsVklERU9fQ09ERUNfUFJPRklMRV9ISUdIOjEwMCxSRU1PVEVfVklERU9fU1RSRUFNX0hJR0g6MCxSRU1PVEVfVklERU9fU1RSRUFNX0xPVzoxLFJFTU9URV9WSURFT19TVFJFQU1fTUVESVVNOjJ9fV0pLmRlZmF1bHR9KTsiLCIvKiFcbiAqIGpRdWVyeSBKYXZhU2NyaXB0IExpYnJhcnkgdjMuNC4xXG4gKiBodHRwczovL2pxdWVyeS5jb20vXG4gKlxuICogSW5jbHVkZXMgU2l6emxlLmpzXG4gKiBodHRwczovL3NpenpsZWpzLmNvbS9cbiAqXG4gKiBDb3B5cmlnaHQgSlMgRm91bmRhdGlvbiBhbmQgb3RoZXIgY29udHJpYnV0b3JzXG4gKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqIGh0dHBzOi8vanF1ZXJ5Lm9yZy9saWNlbnNlXG4gKlxuICogRGF0ZTogMjAxOS0wNS0wMVQyMTowNFpcbiAqL1xuKCBmdW5jdGlvbiggZ2xvYmFsLCBmYWN0b3J5ICkge1xuXG5cdFwidXNlIHN0cmljdFwiO1xuXG5cdGlmICggdHlwZW9mIG1vZHVsZSA9PT0gXCJvYmplY3RcIiAmJiB0eXBlb2YgbW9kdWxlLmV4cG9ydHMgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHQvLyBGb3IgQ29tbW9uSlMgYW5kIENvbW1vbkpTLWxpa2UgZW52aXJvbm1lbnRzIHdoZXJlIGEgcHJvcGVyIGB3aW5kb3dgXG5cdFx0Ly8gaXMgcHJlc2VudCwgZXhlY3V0ZSB0aGUgZmFjdG9yeSBhbmQgZ2V0IGpRdWVyeS5cblx0XHQvLyBGb3IgZW52aXJvbm1lbnRzIHRoYXQgZG8gbm90IGhhdmUgYSBgd2luZG93YCB3aXRoIGEgYGRvY3VtZW50YFxuXHRcdC8vIChzdWNoIGFzIE5vZGUuanMpLCBleHBvc2UgYSBmYWN0b3J5IGFzIG1vZHVsZS5leHBvcnRzLlxuXHRcdC8vIFRoaXMgYWNjZW50dWF0ZXMgdGhlIG5lZWQgZm9yIHRoZSBjcmVhdGlvbiBvZiBhIHJlYWwgYHdpbmRvd2AuXG5cdFx0Ly8gZS5nLiB2YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKSh3aW5kb3cpO1xuXHRcdC8vIFNlZSB0aWNrZXQgIzE0NTQ5IGZvciBtb3JlIGluZm8uXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBnbG9iYWwuZG9jdW1lbnQgP1xuXHRcdFx0ZmFjdG9yeSggZ2xvYmFsLCB0cnVlICkgOlxuXHRcdFx0ZnVuY3Rpb24oIHcgKSB7XG5cdFx0XHRcdGlmICggIXcuZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0dGhyb3cgbmV3IEVycm9yKCBcImpRdWVyeSByZXF1aXJlcyBhIHdpbmRvdyB3aXRoIGEgZG9jdW1lbnRcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBmYWN0b3J5KCB3ICk7XG5cdFx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdGZhY3RvcnkoIGdsb2JhbCApO1xuXHR9XG5cbi8vIFBhc3MgdGhpcyBpZiB3aW5kb3cgaXMgbm90IGRlZmluZWQgeWV0XG59ICkoIHR5cGVvZiB3aW5kb3cgIT09IFwidW5kZWZpbmVkXCIgPyB3aW5kb3cgOiB0aGlzLCBmdW5jdGlvbiggd2luZG93LCBub0dsb2JhbCApIHtcblxuLy8gRWRnZSA8PSAxMiAtIDEzKywgRmlyZWZveCA8PTE4IC0gNDUrLCBJRSAxMCAtIDExLCBTYWZhcmkgNS4xIC0gOSssIGlPUyA2IC0gOS4xXG4vLyB0aHJvdyBleGNlcHRpb25zIHdoZW4gbm9uLXN0cmljdCBjb2RlIChlLmcuLCBBU1AuTkVUIDQuNSkgYWNjZXNzZXMgc3RyaWN0IG1vZGVcbi8vIGFyZ3VtZW50cy5jYWxsZWUuY2FsbGVyICh0cmFjLTEzMzM1KS4gQnV0IGFzIG9mIGpRdWVyeSAzLjAgKDIwMTYpLCBzdHJpY3QgbW9kZSBzaG91bGQgYmUgY29tbW9uXG4vLyBlbm91Z2ggdGhhdCBhbGwgc3VjaCBhdHRlbXB0cyBhcmUgZ3VhcmRlZCBpbiBhIHRyeSBibG9jay5cblwidXNlIHN0cmljdFwiO1xuXG52YXIgYXJyID0gW107XG5cbnZhciBkb2N1bWVudCA9IHdpbmRvdy5kb2N1bWVudDtcblxudmFyIGdldFByb3RvID0gT2JqZWN0LmdldFByb3RvdHlwZU9mO1xuXG52YXIgc2xpY2UgPSBhcnIuc2xpY2U7XG5cbnZhciBjb25jYXQgPSBhcnIuY29uY2F0O1xuXG52YXIgcHVzaCA9IGFyci5wdXNoO1xuXG52YXIgaW5kZXhPZiA9IGFyci5pbmRleE9mO1xuXG52YXIgY2xhc3MydHlwZSA9IHt9O1xuXG52YXIgdG9TdHJpbmcgPSBjbGFzczJ0eXBlLnRvU3RyaW5nO1xuXG52YXIgaGFzT3duID0gY2xhc3MydHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxudmFyIGZuVG9TdHJpbmcgPSBoYXNPd24udG9TdHJpbmc7XG5cbnZhciBPYmplY3RGdW5jdGlvblN0cmluZyA9IGZuVG9TdHJpbmcuY2FsbCggT2JqZWN0ICk7XG5cbnZhciBzdXBwb3J0ID0ge307XG5cbnZhciBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gaXNGdW5jdGlvbiggb2JqICkge1xuXG4gICAgICAvLyBTdXBwb3J0OiBDaHJvbWUgPD01NywgRmlyZWZveCA8PTUyXG4gICAgICAvLyBJbiBzb21lIGJyb3dzZXJzLCB0eXBlb2YgcmV0dXJucyBcImZ1bmN0aW9uXCIgZm9yIEhUTUwgPG9iamVjdD4gZWxlbWVudHNcbiAgICAgIC8vIChpLmUuLCBgdHlwZW9mIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwib2JqZWN0XCIgKSA9PT0gXCJmdW5jdGlvblwiYCkuXG4gICAgICAvLyBXZSBkb24ndCB3YW50IHRvIGNsYXNzaWZ5ICphbnkqIERPTSBub2RlIGFzIGEgZnVuY3Rpb24uXG4gICAgICByZXR1cm4gdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiICYmIHR5cGVvZiBvYmoubm9kZVR5cGUgIT09IFwibnVtYmVyXCI7XG4gIH07XG5cblxudmFyIGlzV2luZG93ID0gZnVuY3Rpb24gaXNXaW5kb3coIG9iaiApIHtcblx0XHRyZXR1cm4gb2JqICE9IG51bGwgJiYgb2JqID09PSBvYmoud2luZG93O1xuXHR9O1xuXG5cblxuXG5cdHZhciBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzID0ge1xuXHRcdHR5cGU6IHRydWUsXG5cdFx0c3JjOiB0cnVlLFxuXHRcdG5vbmNlOiB0cnVlLFxuXHRcdG5vTW9kdWxlOiB0cnVlXG5cdH07XG5cblx0ZnVuY3Rpb24gRE9NRXZhbCggY29kZSwgbm9kZSwgZG9jICkge1xuXHRcdGRvYyA9IGRvYyB8fCBkb2N1bWVudDtcblxuXHRcdHZhciBpLCB2YWwsXG5cdFx0XHRzY3JpcHQgPSBkb2MuY3JlYXRlRWxlbWVudCggXCJzY3JpcHRcIiApO1xuXG5cdFx0c2NyaXB0LnRleHQgPSBjb2RlO1xuXHRcdGlmICggbm9kZSApIHtcblx0XHRcdGZvciAoIGkgaW4gcHJlc2VydmVkU2NyaXB0QXR0cmlidXRlcyApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDY0KywgRWRnZSAxOCtcblx0XHRcdFx0Ly8gU29tZSBicm93c2VycyBkb24ndCBzdXBwb3J0IHRoZSBcIm5vbmNlXCIgcHJvcGVydHkgb24gc2NyaXB0cy5cblx0XHRcdFx0Ly8gT24gdGhlIG90aGVyIGhhbmQsIGp1c3QgdXNpbmcgYGdldEF0dHJpYnV0ZWAgaXMgbm90IGVub3VnaCBhc1xuXHRcdFx0XHQvLyB0aGUgYG5vbmNlYCBhdHRyaWJ1dGUgaXMgcmVzZXQgdG8gYW4gZW1wdHkgc3RyaW5nIHdoZW5ldmVyIGl0XG5cdFx0XHRcdC8vIGJlY29tZXMgYnJvd3NpbmctY29udGV4dCBjb25uZWN0ZWQuXG5cdFx0XHRcdC8vIFNlZSBodHRwczovL2dpdGh1Yi5jb20vd2hhdHdnL2h0bWwvaXNzdWVzLzIzNjlcblx0XHRcdFx0Ly8gU2VlIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI25vbmNlLWF0dHJpYnV0ZXNcblx0XHRcdFx0Ly8gVGhlIGBub2RlLmdldEF0dHJpYnV0ZWAgY2hlY2sgd2FzIGFkZGVkIGZvciB0aGUgc2FrZSBvZlxuXHRcdFx0XHQvLyBgalF1ZXJ5Lmdsb2JhbEV2YWxgIHNvIHRoYXQgaXQgY2FuIGZha2UgYSBub25jZS1jb250YWluaW5nIG5vZGVcblx0XHRcdFx0Ly8gdmlhIGFuIG9iamVjdC5cblx0XHRcdFx0dmFsID0gbm9kZVsgaSBdIHx8IG5vZGUuZ2V0QXR0cmlidXRlICYmIG5vZGUuZ2V0QXR0cmlidXRlKCBpICk7XG5cdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdHNjcmlwdC5zZXRBdHRyaWJ1dGUoIGksIHZhbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGRvYy5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHQgKS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBzY3JpcHQgKTtcblx0fVxuXG5cbmZ1bmN0aW9uIHRvVHlwZSggb2JqICkge1xuXHRpZiAoIG9iaiA9PSBudWxsICkge1xuXHRcdHJldHVybiBvYmogKyBcIlwiO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTIuMyBvbmx5IChmdW5jdGlvbmlzaCBSZWdFeHApXG5cdHJldHVybiB0eXBlb2Ygb2JqID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBvYmogPT09IFwiZnVuY3Rpb25cIiA/XG5cdFx0Y2xhc3MydHlwZVsgdG9TdHJpbmcuY2FsbCggb2JqICkgXSB8fCBcIm9iamVjdFwiIDpcblx0XHR0eXBlb2Ygb2JqO1xufVxuLyogZ2xvYmFsIFN5bWJvbCAqL1xuLy8gRGVmaW5pbmcgdGhpcyBnbG9iYWwgaW4gLmVzbGludHJjLmpzb24gd291bGQgY3JlYXRlIGEgZGFuZ2VyIG9mIHVzaW5nIHRoZSBnbG9iYWxcbi8vIHVuZ3VhcmRlZCBpbiBhbm90aGVyIHBsYWNlLCBpdCBzZWVtcyBzYWZlciB0byBkZWZpbmUgZ2xvYmFsIG9ubHkgZm9yIHRoaXMgbW9kdWxlXG5cblxuXG52YXJcblx0dmVyc2lvbiA9IFwiMy40LjFcIixcblxuXHQvLyBEZWZpbmUgYSBsb2NhbCBjb3B5IG9mIGpRdWVyeVxuXHRqUXVlcnkgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQgKSB7XG5cblx0XHQvLyBUaGUgalF1ZXJ5IG9iamVjdCBpcyBhY3R1YWxseSBqdXN0IHRoZSBpbml0IGNvbnN0cnVjdG9yICdlbmhhbmNlZCdcblx0XHQvLyBOZWVkIGluaXQgaWYgalF1ZXJ5IGlzIGNhbGxlZCAoanVzdCBhbGxvdyBlcnJvciB0byBiZSB0aHJvd24gaWYgbm90IGluY2x1ZGVkKVxuXHRcdHJldHVybiBuZXcgalF1ZXJ5LmZuLmluaXQoIHNlbGVjdG9yLCBjb250ZXh0ICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5XG5cdC8vIE1ha2Ugc3VyZSB3ZSB0cmltIEJPTSBhbmQgTkJTUFxuXHRydHJpbSA9IC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZztcblxualF1ZXJ5LmZuID0galF1ZXJ5LnByb3RvdHlwZSA9IHtcblxuXHQvLyBUaGUgY3VycmVudCB2ZXJzaW9uIG9mIGpRdWVyeSBiZWluZyB1c2VkXG5cdGpxdWVyeTogdmVyc2lvbixcblxuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LFxuXG5cdC8vIFRoZSBkZWZhdWx0IGxlbmd0aCBvZiBhIGpRdWVyeSBvYmplY3QgaXMgMFxuXHRsZW5ndGg6IDAsXG5cblx0dG9BcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0fSxcblxuXHQvLyBHZXQgdGhlIE50aCBlbGVtZW50IGluIHRoZSBtYXRjaGVkIGVsZW1lbnQgc2V0IE9SXG5cdC8vIEdldCB0aGUgd2hvbGUgbWF0Y2hlZCBlbGVtZW50IHNldCBhcyBhIGNsZWFuIGFycmF5XG5cdGdldDogZnVuY3Rpb24oIG51bSApIHtcblxuXHRcdC8vIFJldHVybiBhbGwgdGhlIGVsZW1lbnRzIGluIGEgY2xlYW4gYXJyYXlcblx0XHRpZiAoIG51bSA9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIHNsaWNlLmNhbGwoIHRoaXMgKTtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4ganVzdCB0aGUgb25lIGVsZW1lbnQgZnJvbSB0aGUgc2V0XG5cdFx0cmV0dXJuIG51bSA8IDAgPyB0aGlzWyBudW0gKyB0aGlzLmxlbmd0aCBdIDogdGhpc1sgbnVtIF07XG5cdH0sXG5cblx0Ly8gVGFrZSBhbiBhcnJheSBvZiBlbGVtZW50cyBhbmQgcHVzaCBpdCBvbnRvIHRoZSBzdGFja1xuXHQvLyAocmV0dXJuaW5nIHRoZSBuZXcgbWF0Y2hlZCBlbGVtZW50IHNldClcblx0cHVzaFN0YWNrOiBmdW5jdGlvbiggZWxlbXMgKSB7XG5cblx0XHQvLyBCdWlsZCBhIG5ldyBqUXVlcnkgbWF0Y2hlZCBlbGVtZW50IHNldFxuXHRcdHZhciByZXQgPSBqUXVlcnkubWVyZ2UoIHRoaXMuY29uc3RydWN0b3IoKSwgZWxlbXMgKTtcblxuXHRcdC8vIEFkZCB0aGUgb2xkIG9iamVjdCBvbnRvIHRoZSBzdGFjayAoYXMgYSByZWZlcmVuY2UpXG5cdFx0cmV0LnByZXZPYmplY3QgPSB0aGlzO1xuXG5cdFx0Ly8gUmV0dXJuIHRoZSBuZXdseS1mb3JtZWQgZWxlbWVudCBzZXRcblx0XHRyZXR1cm4gcmV0O1xuXHR9LFxuXG5cdC8vIEV4ZWN1dGUgYSBjYWxsYmFjayBmb3IgZXZlcnkgZWxlbWVudCBpbiB0aGUgbWF0Y2hlZCBzZXQuXG5cdGVhY2g6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmVhY2goIHRoaXMsIGNhbGxiYWNrICk7XG5cdH0sXG5cblx0bWFwOiBmdW5jdGlvbiggY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkubWFwKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiBjYWxsYmFjay5jYWxsKCBlbGVtLCBpLCBlbGVtICk7XG5cdFx0fSApICk7XG5cdH0sXG5cblx0c2xpY2U6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggc2xpY2UuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApICk7XG5cdH0sXG5cblx0Zmlyc3Q6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLmVxKCAwICk7XG5cdH0sXG5cblx0bGFzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIC0xICk7XG5cdH0sXG5cblx0ZXE6IGZ1bmN0aW9uKCBpICkge1xuXHRcdHZhciBsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdGogPSAraSArICggaSA8IDAgPyBsZW4gOiAwICk7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqID49IDAgJiYgaiA8IGxlbiA/IFsgdGhpc1sgaiBdIF0gOiBbXSApO1xuXHR9LFxuXG5cdGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHJldk9iamVjdCB8fCB0aGlzLmNvbnN0cnVjdG9yKCk7XG5cdH0sXG5cblx0Ly8gRm9yIGludGVybmFsIHVzZSBvbmx5LlxuXHQvLyBCZWhhdmVzIGxpa2UgYW4gQXJyYXkncyBtZXRob2QsIG5vdCBsaWtlIGEgalF1ZXJ5IG1ldGhvZC5cblx0cHVzaDogcHVzaCxcblx0c29ydDogYXJyLnNvcnQsXG5cdHNwbGljZTogYXJyLnNwbGljZVxufTtcblxualF1ZXJ5LmV4dGVuZCA9IGpRdWVyeS5mbi5leHRlbmQgPSBmdW5jdGlvbigpIHtcblx0dmFyIG9wdGlvbnMsIG5hbWUsIHNyYywgY29weSwgY29weUlzQXJyYXksIGNsb25lLFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1sgMCBdIHx8IHt9LFxuXHRcdGkgPSAxLFxuXHRcdGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cdFx0ZGVlcCA9IGZhbHNlO1xuXG5cdC8vIEhhbmRsZSBhIGRlZXAgY29weSBzaXR1YXRpb25cblx0aWYgKCB0eXBlb2YgdGFyZ2V0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRkZWVwID0gdGFyZ2V0O1xuXG5cdFx0Ly8gU2tpcCB0aGUgYm9vbGVhbiBhbmQgdGhlIHRhcmdldFxuXHRcdHRhcmdldCA9IGFyZ3VtZW50c1sgaSBdIHx8IHt9O1xuXHRcdGkrKztcblx0fVxuXG5cdC8vIEhhbmRsZSBjYXNlIHdoZW4gdGFyZ2V0IGlzIGEgc3RyaW5nIG9yIHNvbWV0aGluZyAocG9zc2libGUgaW4gZGVlcCBjb3B5KVxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgIT09IFwib2JqZWN0XCIgJiYgIWlzRnVuY3Rpb24oIHRhcmdldCApICkge1xuXHRcdHRhcmdldCA9IHt9O1xuXHR9XG5cblx0Ly8gRXh0ZW5kIGpRdWVyeSBpdHNlbGYgaWYgb25seSBvbmUgYXJndW1lbnQgaXMgcGFzc2VkXG5cdGlmICggaSA9PT0gbGVuZ3RoICkge1xuXHRcdHRhcmdldCA9IHRoaXM7XG5cdFx0aS0tO1xuXHR9XG5cblx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cblx0XHQvLyBPbmx5IGRlYWwgd2l0aCBub24tbnVsbC91bmRlZmluZWQgdmFsdWVzXG5cdFx0aWYgKCAoIG9wdGlvbnMgPSBhcmd1bWVudHNbIGkgXSApICE9IG51bGwgKSB7XG5cblx0XHRcdC8vIEV4dGVuZCB0aGUgYmFzZSBvYmplY3Rcblx0XHRcdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRcdFx0Y29weSA9IG9wdGlvbnNbIG5hbWUgXTtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IE9iamVjdC5wcm90b3R5cGUgcG9sbHV0aW9uXG5cdFx0XHRcdC8vIFByZXZlbnQgbmV2ZXItZW5kaW5nIGxvb3Bcblx0XHRcdFx0aWYgKCBuYW1lID09PSBcIl9fcHJvdG9fX1wiIHx8IHRhcmdldCA9PT0gY29weSApIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJlY3Vyc2UgaWYgd2UncmUgbWVyZ2luZyBwbGFpbiBvYmplY3RzIG9yIGFycmF5c1xuXHRcdFx0XHRpZiAoIGRlZXAgJiYgY29weSAmJiAoIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb3B5ICkgfHxcblx0XHRcdFx0XHQoIGNvcHlJc0FycmF5ID0gQXJyYXkuaXNBcnJheSggY29weSApICkgKSApIHtcblx0XHRcdFx0XHRzcmMgPSB0YXJnZXRbIG5hbWUgXTtcblxuXHRcdFx0XHRcdC8vIEVuc3VyZSBwcm9wZXIgdHlwZSBmb3IgdGhlIHNvdXJjZSB2YWx1ZVxuXHRcdFx0XHRcdGlmICggY29weUlzQXJyYXkgJiYgIUFycmF5LmlzQXJyYXkoIHNyYyApICkge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBbXTtcblx0XHRcdFx0XHR9IGVsc2UgaWYgKCAhY29weUlzQXJyYXkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBzcmMgKSApIHtcblx0XHRcdFx0XHRcdGNsb25lID0ge307XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNsb25lID0gc3JjO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRjb3B5SXNBcnJheSA9IGZhbHNlO1xuXG5cdFx0XHRcdFx0Ly8gTmV2ZXIgbW92ZSBvcmlnaW5hbCBvYmplY3RzLCBjbG9uZSB0aGVtXG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBqUXVlcnkuZXh0ZW5kKCBkZWVwLCBjbG9uZSwgY29weSApO1xuXG5cdFx0XHRcdC8vIERvbid0IGJyaW5nIGluIHVuZGVmaW5lZCB2YWx1ZXNcblx0XHRcdFx0fSBlbHNlIGlmICggY29weSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHRhcmdldFsgbmFtZSBdID0gY29weTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJldHVybiB0aGUgbW9kaWZpZWQgb2JqZWN0XG5cdHJldHVybiB0YXJnZXQ7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gVW5pcXVlIGZvciBlYWNoIGNvcHkgb2YgalF1ZXJ5IG9uIHRoZSBwYWdlXG5cdGV4cGFuZG86IFwialF1ZXJ5XCIgKyAoIHZlcnNpb24gKyBNYXRoLnJhbmRvbSgpICkucmVwbGFjZSggL1xcRC9nLCBcIlwiICksXG5cblx0Ly8gQXNzdW1lIGpRdWVyeSBpcyByZWFkeSB3aXRob3V0IHRoZSByZWFkeSBtb2R1bGVcblx0aXNSZWFkeTogdHJ1ZSxcblxuXHRlcnJvcjogZnVuY3Rpb24oIG1zZyApIHtcblx0XHR0aHJvdyBuZXcgRXJyb3IoIG1zZyApO1xuXHR9LFxuXG5cdG5vb3A6IGZ1bmN0aW9uKCkge30sXG5cblx0aXNQbGFpbk9iamVjdDogZnVuY3Rpb24oIG9iaiApIHtcblx0XHR2YXIgcHJvdG8sIEN0b3I7XG5cblx0XHQvLyBEZXRlY3Qgb2J2aW91cyBuZWdhdGl2ZXNcblx0XHQvLyBVc2UgdG9TdHJpbmcgaW5zdGVhZCBvZiBqUXVlcnkudHlwZSB0byBjYXRjaCBob3N0IG9iamVjdHNcblx0XHRpZiAoICFvYmogfHwgdG9TdHJpbmcuY2FsbCggb2JqICkgIT09IFwiW29iamVjdCBPYmplY3RdXCIgKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0cHJvdG8gPSBnZXRQcm90byggb2JqICk7XG5cblx0XHQvLyBPYmplY3RzIHdpdGggbm8gcHJvdG90eXBlIChlLmcuLCBgT2JqZWN0LmNyZWF0ZSggbnVsbCApYCkgYXJlIHBsYWluXG5cdFx0aWYgKCAhcHJvdG8gKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBPYmplY3RzIHdpdGggcHJvdG90eXBlIGFyZSBwbGFpbiBpZmYgdGhleSB3ZXJlIGNvbnN0cnVjdGVkIGJ5IGEgZ2xvYmFsIE9iamVjdCBmdW5jdGlvblxuXHRcdEN0b3IgPSBoYXNPd24uY2FsbCggcHJvdG8sIFwiY29uc3RydWN0b3JcIiApICYmIHByb3RvLmNvbnN0cnVjdG9yO1xuXHRcdHJldHVybiB0eXBlb2YgQ3RvciA9PT0gXCJmdW5jdGlvblwiICYmIGZuVG9TdHJpbmcuY2FsbCggQ3RvciApID09PSBPYmplY3RGdW5jdGlvblN0cmluZztcblx0fSxcblxuXHRpc0VtcHR5T2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHZhciBuYW1lO1xuXG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0cnVlO1xuXHR9LFxuXG5cdC8vIEV2YWx1YXRlcyBhIHNjcmlwdCBpbiBhIGdsb2JhbCBjb250ZXh0XG5cdGdsb2JhbEV2YWw6IGZ1bmN0aW9uKCBjb2RlLCBvcHRpb25zICkge1xuXHRcdERPTUV2YWwoIGNvZGUsIHsgbm9uY2U6IG9wdGlvbnMgJiYgb3B0aW9ucy5ub25jZSB9ICk7XG5cdH0sXG5cblx0ZWFjaDogZnVuY3Rpb24oIG9iaiwgY2FsbGJhY2sgKSB7XG5cdFx0dmFyIGxlbmd0aCwgaSA9IDA7XG5cblx0XHRpZiAoIGlzQXJyYXlMaWtlKCBvYmogKSApIHtcblx0XHRcdGxlbmd0aCA9IG9iai5sZW5ndGg7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBvYmogKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2suY2FsbCggb2JqWyBpIF0sIGksIG9ialsgaSBdICkgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG9iajtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHlcblx0dHJpbTogZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0cmV0dXJuIHRleHQgPT0gbnVsbCA/XG5cdFx0XHRcIlwiIDpcblx0XHRcdCggdGV4dCArIFwiXCIgKS5yZXBsYWNlKCBydHJpbSwgXCJcIiApO1xuXHR9LFxuXG5cdC8vIHJlc3VsdHMgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFrZUFycmF5OiBmdW5jdGlvbiggYXJyLCByZXN1bHRzICkge1xuXHRcdHZhciByZXQgPSByZXN1bHRzIHx8IFtdO1xuXG5cdFx0aWYgKCBhcnIgIT0gbnVsbCApIHtcblx0XHRcdGlmICggaXNBcnJheUxpa2UoIE9iamVjdCggYXJyICkgKSApIHtcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCByZXQsXG5cdFx0XHRcdFx0dHlwZW9mIGFyciA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0WyBhcnIgXSA6IGFyclxuXHRcdFx0XHQpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5jYWxsKCByZXQsIGFyciApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0aW5BcnJheTogZnVuY3Rpb24oIGVsZW0sIGFyciwgaSApIHtcblx0XHRyZXR1cm4gYXJyID09IG51bGwgPyAtMSA6IGluZGV4T2YuY2FsbCggYXJyLCBlbGVtLCBpICk7XG5cdH0sXG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0bWVyZ2U6IGZ1bmN0aW9uKCBmaXJzdCwgc2Vjb25kICkge1xuXHRcdHZhciBsZW4gPSArc2Vjb25kLmxlbmd0aCxcblx0XHRcdGogPSAwLFxuXHRcdFx0aSA9IGZpcnN0Lmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0Zmlyc3RbIGkrKyBdID0gc2Vjb25kWyBqIF07XG5cdFx0fVxuXG5cdFx0Zmlyc3QubGVuZ3RoID0gaTtcblxuXHRcdHJldHVybiBmaXJzdDtcblx0fSxcblxuXHRncmVwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBpbnZlcnQgKSB7XG5cdFx0dmFyIGNhbGxiYWNrSW52ZXJzZSxcblx0XHRcdG1hdGNoZXMgPSBbXSxcblx0XHRcdGkgPSAwLFxuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoLFxuXHRcdFx0Y2FsbGJhY2tFeHBlY3QgPSAhaW52ZXJ0O1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIG9ubHkgc2F2aW5nIHRoZSBpdGVtc1xuXHRcdC8vIHRoYXQgcGFzcyB0aGUgdmFsaWRhdG9yIGZ1bmN0aW9uXG5cdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRjYWxsYmFja0ludmVyc2UgPSAhY2FsbGJhY2soIGVsZW1zWyBpIF0sIGkgKTtcblx0XHRcdGlmICggY2FsbGJhY2tJbnZlcnNlICE9PSBjYWxsYmFja0V4cGVjdCApIHtcblx0XHRcdFx0bWF0Y2hlcy5wdXNoKCBlbGVtc1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hdGNoZXM7XG5cdH0sXG5cblx0Ly8gYXJnIGlzIGZvciBpbnRlcm5hbCB1c2FnZSBvbmx5XG5cdG1hcDogZnVuY3Rpb24oIGVsZW1zLCBjYWxsYmFjaywgYXJnICkge1xuXHRcdHZhciBsZW5ndGgsIHZhbHVlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRyZXQgPSBbXTtcblxuXHRcdC8vIEdvIHRocm91Z2ggdGhlIGFycmF5LCB0cmFuc2xhdGluZyBlYWNoIG9mIHRoZSBpdGVtcyB0byB0aGVpciBuZXcgdmFsdWVzXG5cdFx0aWYgKCBpc0FycmF5TGlrZSggZWxlbXMgKSApIHtcblx0XHRcdGxlbmd0aCA9IGVsZW1zLmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHR2YWx1ZSA9IGNhbGxiYWNrKCBlbGVtc1sgaSBdLCBpLCBhcmcgKTtcblxuXHRcdFx0XHRpZiAoIHZhbHVlICE9IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0LnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEdvIHRocm91Z2ggZXZlcnkga2V5IG9uIHRoZSBvYmplY3QsXG5cdFx0fSBlbHNlIHtcblx0XHRcdGZvciAoIGkgaW4gZWxlbXMgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZsYXR0ZW4gYW55IG5lc3RlZCBhcnJheXNcblx0XHRyZXR1cm4gY29uY2F0LmFwcGx5KCBbXSwgcmV0ICk7XG5cdH0sXG5cblx0Ly8gQSBnbG9iYWwgR1VJRCBjb3VudGVyIGZvciBvYmplY3RzXG5cdGd1aWQ6IDEsXG5cblx0Ly8galF1ZXJ5LnN1cHBvcnQgaXMgbm90IHVzZWQgaW4gQ29yZSBidXQgb3RoZXIgcHJvamVjdHMgYXR0YWNoIHRoZWlyXG5cdC8vIHByb3BlcnRpZXMgdG8gaXQgc28gaXQgbmVlZHMgdG8gZXhpc3QuXG5cdHN1cHBvcnQ6IHN1cHBvcnRcbn0gKTtcblxuaWYgKCB0eXBlb2YgU3ltYm9sID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cdGpRdWVyeS5mblsgU3ltYm9sLml0ZXJhdG9yIF0gPSBhcnJbIFN5bWJvbC5pdGVyYXRvciBdO1xufVxuXG4vLyBQb3B1bGF0ZSB0aGUgY2xhc3MydHlwZSBtYXBcbmpRdWVyeS5lYWNoKCBcIkJvb2xlYW4gTnVtYmVyIFN0cmluZyBGdW5jdGlvbiBBcnJheSBEYXRlIFJlZ0V4cCBPYmplY3QgRXJyb3IgU3ltYm9sXCIuc3BsaXQoIFwiIFwiICksXG5mdW5jdGlvbiggaSwgbmFtZSApIHtcblx0Y2xhc3MydHlwZVsgXCJbb2JqZWN0IFwiICsgbmFtZSArIFwiXVwiIF0gPSBuYW1lLnRvTG93ZXJDYXNlKCk7XG59ICk7XG5cbmZ1bmN0aW9uIGlzQXJyYXlMaWtlKCBvYmogKSB7XG5cblx0Ly8gU3VwcG9ydDogcmVhbCBpT1MgOC4yIG9ubHkgKG5vdCByZXByb2R1Y2libGUgaW4gc2ltdWxhdG9yKVxuXHQvLyBgaW5gIGNoZWNrIHVzZWQgdG8gcHJldmVudCBKSVQgZXJyb3IgKGdoLTIxNDUpXG5cdC8vIGhhc093biBpc24ndCB1c2VkIGhlcmUgZHVlIHRvIGZhbHNlIG5lZ2F0aXZlc1xuXHQvLyByZWdhcmRpbmcgTm9kZWxpc3QgbGVuZ3RoIGluIElFXG5cdHZhciBsZW5ndGggPSAhIW9iaiAmJiBcImxlbmd0aFwiIGluIG9iaiAmJiBvYmoubGVuZ3RoLFxuXHRcdHR5cGUgPSB0b1R5cGUoIG9iaiApO1xuXG5cdGlmICggaXNGdW5jdGlvbiggb2JqICkgfHwgaXNXaW5kb3coIG9iaiApICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdHJldHVybiB0eXBlID09PSBcImFycmF5XCIgfHwgbGVuZ3RoID09PSAwIHx8XG5cdFx0dHlwZW9mIGxlbmd0aCA9PT0gXCJudW1iZXJcIiAmJiBsZW5ndGggPiAwICYmICggbGVuZ3RoIC0gMSApIGluIG9iajtcbn1cbnZhciBTaXp6bGUgPVxuLyohXG4gKiBTaXp6bGUgQ1NTIFNlbGVjdG9yIEVuZ2luZSB2Mi4zLjRcbiAqIGh0dHBzOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9qcy5mb3VuZGF0aW9uL1xuICpcbiAqIERhdGU6IDIwMTktMDQtMDhcbiAqL1xuKGZ1bmN0aW9uKCB3aW5kb3cgKSB7XG5cbnZhciBpLFxuXHRzdXBwb3J0LFxuXHRFeHByLFxuXHRnZXRUZXh0LFxuXHRpc1hNTCxcblx0dG9rZW5pemUsXG5cdGNvbXBpbGUsXG5cdHNlbGVjdCxcblx0b3V0ZXJtb3N0Q29udGV4dCxcblx0c29ydElucHV0LFxuXHRoYXNEdXBsaWNhdGUsXG5cblx0Ly8gTG9jYWwgZG9jdW1lbnQgdmFyc1xuXHRzZXREb2N1bWVudCxcblx0ZG9jdW1lbnQsXG5cdGRvY0VsZW0sXG5cdGRvY3VtZW50SXNIVE1MLFxuXHRyYnVnZ3lRU0EsXG5cdHJidWdneU1hdGNoZXMsXG5cdG1hdGNoZXMsXG5cdGNvbnRhaW5zLFxuXG5cdC8vIEluc3RhbmNlLXNwZWNpZmljIGRhdGFcblx0ZXhwYW5kbyA9IFwic2l6emxlXCIgKyAxICogbmV3IERhdGUoKSxcblx0cHJlZmVycmVkRG9jID0gd2luZG93LmRvY3VtZW50LFxuXHRkaXJydW5zID0gMCxcblx0ZG9uZSA9IDAsXG5cdGNsYXNzQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHR0b2tlbkNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0Y29tcGlsZXJDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdG5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRzb3J0T3JkZXIgPSBmdW5jdGlvbiggYSwgYiApIHtcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdH1cblx0XHRyZXR1cm4gMDtcblx0fSxcblxuXHQvLyBJbnN0YW5jZSBtZXRob2RzXG5cdGhhc093biA9ICh7fSkuaGFzT3duUHJvcGVydHksXG5cdGFyciA9IFtdLFxuXHRwb3AgPSBhcnIucG9wLFxuXHRwdXNoX25hdGl2ZSA9IGFyci5wdXNoLFxuXHRwdXNoID0gYXJyLnB1c2gsXG5cdHNsaWNlID0gYXJyLnNsaWNlLFxuXHQvLyBVc2UgYSBzdHJpcHBlZC1kb3duIGluZGV4T2YgYXMgaXQncyBmYXN0ZXIgdGhhbiBuYXRpdmVcblx0Ly8gaHR0cHM6Ly9qc3BlcmYuY29tL3Rob3ItaW5kZXhvZi12cy1mb3IvNVxuXHRpbmRleE9mID0gZnVuY3Rpb24oIGxpc3QsIGVsZW0gKSB7XG5cdFx0dmFyIGkgPSAwLFxuXHRcdFx0bGVuID0gbGlzdC5sZW5ndGg7XG5cdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRpZiAoIGxpc3RbaV0gPT09IGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBpO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gLTE7XG5cdH0sXG5cblx0Ym9vbGVhbnMgPSBcImNoZWNrZWR8c2VsZWN0ZWR8YXN5bmN8YXV0b2ZvY3VzfGF1dG9wbGF5fGNvbnRyb2xzfGRlZmVyfGRpc2FibGVkfGhpZGRlbnxpc21hcHxsb29wfG11bHRpcGxlfG9wZW58cmVhZG9ubHl8cmVxdWlyZWR8c2NvcGVkXCIsXG5cblx0Ly8gUmVndWxhciBleHByZXNzaW9uc1xuXG5cdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL2NzczMtc2VsZWN0b3JzLyN3aGl0ZXNwYWNlXG5cdHdoaXRlc3BhY2UgPSBcIltcXFxceDIwXFxcXHRcXFxcclxcXFxuXFxcXGZdXCIsXG5cblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI3ZhbHVlLWRlZi1pZGVudGlmaWVyXG5cdGlkZW50aWZpZXIgPSBcIig/OlxcXFxcXFxcLnxbXFxcXHctXXxbXlxcMC1cXFxceGEwXSkrXCIsXG5cblx0Ly8gQXR0cmlidXRlIHNlbGVjdG9yczogaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNhdHRyaWJ1dGUtc2VsZWN0b3JzXG5cdGF0dHJpYnV0ZXMgPSBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFwiICsgaWRlbnRpZmllciArIFwiKSg/OlwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gT3BlcmF0b3IgKGNhcHR1cmUgMilcblx0XHRcIiooWypeJHwhfl0/PSlcIiArIHdoaXRlc3BhY2UgK1xuXHRcdC8vIFwiQXR0cmlidXRlIHZhbHVlcyBtdXN0IGJlIENTUyBpZGVudGlmaWVycyBbY2FwdHVyZSA1XSBvciBzdHJpbmdzIFtjYXB0dXJlIDMgb3IgY2FwdHVyZSA0XVwiXG5cdFx0XCIqKD86JygoPzpcXFxcXFxcXC58W15cXFxcXFxcXCddKSopJ3xcXFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcXFxcIl0pKilcXFwifChcIiArIGlkZW50aWZpZXIgKyBcIikpfClcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFwiKlxcXFxdXCIsXG5cblx0cHNldWRvcyA9IFwiOihcIiArIGlkZW50aWZpZXIgKyBcIikoPzpcXFxcKChcIiArXG5cdFx0Ly8gVG8gcmVkdWNlIHRoZSBudW1iZXIgb2Ygc2VsZWN0b3JzIG5lZWRpbmcgdG9rZW5pemUgaW4gdGhlIHByZUZpbHRlciwgcHJlZmVyIGFyZ3VtZW50czpcblx0XHQvLyAxLiBxdW90ZWQgKGNhcHR1cmUgMzsgY2FwdHVyZSA0IG9yIGNhcHR1cmUgNSlcblx0XHRcIignKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCIpfFwiICtcblx0XHQvLyAyLiBzaW1wbGUgKGNhcHR1cmUgNilcblx0XHRcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXCgpW1xcXFxdXXxcIiArIGF0dHJpYnV0ZXMgKyBcIikqKXxcIiArXG5cdFx0Ly8gMy4gYW55dGhpbmcgZWxzZSAoY2FwdHVyZSAyKVxuXHRcdFwiLipcIiArXG5cdFx0XCIpXFxcXCl8KVwiLFxuXG5cdC8vIExlYWRpbmcgYW5kIG5vbi1lc2NhcGVkIHRyYWlsaW5nIHdoaXRlc3BhY2UsIGNhcHR1cmluZyBzb21lIG5vbi13aGl0ZXNwYWNlIGNoYXJhY3RlcnMgcHJlY2VkaW5nIHRoZSBsYXR0ZXJcblx0cndoaXRlc3BhY2UgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCIrXCIsIFwiZ1wiICksXG5cdHJ0cmltID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIrfCgoPzpefFteXFxcXFxcXFxdKSg/OlxcXFxcXFxcLikqKVwiICsgd2hpdGVzcGFjZSArIFwiKyRcIiwgXCJnXCIgKSxcblxuXHRyY29tbWEgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiosXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0cmNvbWJpbmF0b3JzID0gbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqKFs+K35dfFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgd2hpdGVzcGFjZSArIFwiKlwiICksXG5cdHJkZXNjZW5kID0gbmV3IFJlZ0V4cCggd2hpdGVzcGFjZSArIFwifD5cIiApLFxuXG5cdHJwc2V1ZG8gPSBuZXcgUmVnRXhwKCBwc2V1ZG9zICksXG5cdHJpZGVudGlmaWVyID0gbmV3IFJlZ0V4cCggXCJeXCIgKyBpZGVudGlmaWVyICsgXCIkXCIgKSxcblxuXHRtYXRjaEV4cHIgPSB7XG5cdFx0XCJJRFwiOiBuZXcgUmVnRXhwKCBcIl4jKFwiICsgaWRlbnRpZmllciArIFwiKVwiICksXG5cdFx0XCJDTEFTU1wiOiBuZXcgUmVnRXhwKCBcIl5cXFxcLihcIiArIGlkZW50aWZpZXIgKyBcIilcIiApLFxuXHRcdFwiVEFHXCI6IG5ldyBSZWdFeHAoIFwiXihcIiArIGlkZW50aWZpZXIgKyBcInxbKl0pXCIgKSxcblx0XHRcIkFUVFJcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBhdHRyaWJ1dGVzICksXG5cdFx0XCJQU0VVRE9cIjogbmV3IFJlZ0V4cCggXCJeXCIgKyBwc2V1ZG9zICksXG5cdFx0XCJDSElMRFwiOiBuZXcgUmVnRXhwKCBcIl46KG9ubHl8Zmlyc3R8bGFzdHxudGh8bnRoLWxhc3QpLShjaGlsZHxvZi10eXBlKSg/OlxcXFwoXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihldmVufG9kZHwoKFsrLV18KShcXFxcZCopbnwpXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86KFsrLV18KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XHRcIiooXFxcXGQrKXwpKVwiICsgd2hpdGVzcGFjZSArIFwiKlxcXFwpfClcIiwgXCJpXCIgKSxcblx0XHRcImJvb2xcIjogbmV3IFJlZ0V4cCggXCJeKD86XCIgKyBib29sZWFucyArIFwiKSRcIiwgXCJpXCIgKSxcblx0XHQvLyBGb3IgdXNlIGluIGxpYnJhcmllcyBpbXBsZW1lbnRpbmcgLmlzKClcblx0XHQvLyBXZSB1c2UgdGhpcyBmb3IgUE9TIG1hdGNoaW5nIGluIGBzZWxlY3RgXG5cdFx0XCJuZWVkc0NvbnRleHRcIjogbmV3IFJlZ0V4cCggXCJeXCIgKyB3aGl0ZXNwYWNlICsgXCIqWz4rfl18OihldmVufG9kZHxlcXxndHxsdHxudGh8Zmlyc3R8bGFzdCkoPzpcXFxcKFwiICtcblx0XHRcdHdoaXRlc3BhY2UgKyBcIiooKD86LVxcXFxkKT9cXFxcZCopXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KSg/PVteLV18JClcIiwgXCJpXCIgKVxuXHR9LFxuXG5cdHJodG1sID0gL0hUTUwkL2ksXG5cdHJpbnB1dHMgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxidXR0b24pJC9pLFxuXHRyaGVhZGVyID0gL15oXFxkJC9pLFxuXG5cdHJuYXRpdmUgPSAvXltee10rXFx7XFxzKlxcW25hdGl2ZSBcXHcvLFxuXG5cdC8vIEVhc2lseS1wYXJzZWFibGUvcmV0cmlldmFibGUgSUQgb3IgVEFHIG9yIENMQVNTIHNlbGVjdG9yc1xuXHRycXVpY2tFeHByID0gL14oPzojKFtcXHctXSspfChcXHcrKXxcXC4oW1xcdy1dKykpJC8sXG5cblx0cnNpYmxpbmcgPSAvWyt+XS8sXG5cblx0Ly8gQ1NTIGVzY2FwZXNcblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvQ1NTMjEvc3luZGF0YS5odG1sI2VzY2FwZWQtY2hhcmFjdGVyc1xuXHRydW5lc2NhcGUgPSBuZXcgUmVnRXhwKCBcIlxcXFxcXFxcKFtcXFxcZGEtZl17MSw2fVwiICsgd2hpdGVzcGFjZSArIFwiP3woXCIgKyB3aGl0ZXNwYWNlICsgXCIpfC4pXCIsIFwiaWdcIiApLFxuXHRmdW5lc2NhcGUgPSBmdW5jdGlvbiggXywgZXNjYXBlZCwgZXNjYXBlZFdoaXRlc3BhY2UgKSB7XG5cdFx0dmFyIGhpZ2ggPSBcIjB4XCIgKyBlc2NhcGVkIC0gMHgxMDAwMDtcblx0XHQvLyBOYU4gbWVhbnMgbm9uLWNvZGVwb2ludFxuXHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3g8MjRcblx0XHQvLyBXb3JrYXJvdW5kIGVycm9uZW91cyBudW1lcmljIGludGVycHJldGF0aW9uIG9mICtcIjB4XCJcblx0XHRyZXR1cm4gaGlnaCAhPT0gaGlnaCB8fCBlc2NhcGVkV2hpdGVzcGFjZSA/XG5cdFx0XHRlc2NhcGVkIDpcblx0XHRcdGhpZ2ggPCAwID9cblx0XHRcdFx0Ly8gQk1QIGNvZGVwb2ludFxuXHRcdFx0XHRTdHJpbmcuZnJvbUNoYXJDb2RlKCBoaWdoICsgMHgxMDAwMCApIDpcblx0XHRcdFx0Ly8gU3VwcGxlbWVudGFsIFBsYW5lIGNvZGVwb2ludCAoc3Vycm9nYXRlIHBhaXIpXG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggPj4gMTAgfCAweEQ4MDAsIGhpZ2ggJiAweDNGRiB8IDB4REMwMCApO1xuXHR9LFxuXG5cdC8vIENTUyBzdHJpbmcvaWRlbnRpZmllciBzZXJpYWxpemF0aW9uXG5cdC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jY29tbW9uLXNlcmlhbGl6aW5nLWlkaW9tc1xuXHRyY3NzZXNjYXBlID0gLyhbXFwwLVxceDFmXFx4N2ZdfF4tP1xcZCl8Xi0kfFteXFwwLVxceDFmXFx4N2YtXFx1RkZGRlxcdy1dL2csXG5cdGZjc3Nlc2NhcGUgPSBmdW5jdGlvbiggY2gsIGFzQ29kZVBvaW50ICkge1xuXHRcdGlmICggYXNDb2RlUG9pbnQgKSB7XG5cblx0XHRcdC8vIFUrMDAwMCBOVUxMIGJlY29tZXMgVStGRkZEIFJFUExBQ0VNRU5UIENIQVJBQ1RFUlxuXHRcdFx0aWYgKCBjaCA9PT0gXCJcXDBcIiApIHtcblx0XHRcdFx0cmV0dXJuIFwiXFx1RkZGRFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb250cm9sIGNoYXJhY3RlcnMgYW5kIChkZXBlbmRlbnQgdXBvbiBwb3NpdGlvbikgbnVtYmVycyBnZXQgZXNjYXBlZCBhcyBjb2RlIHBvaW50c1xuXHRcdFx0cmV0dXJuIGNoLnNsaWNlKCAwLCAtMSApICsgXCJcXFxcXCIgKyBjaC5jaGFyQ29kZUF0KCBjaC5sZW5ndGggLSAxICkudG9TdHJpbmcoIDE2ICkgKyBcIiBcIjtcblx0XHR9XG5cblx0XHQvLyBPdGhlciBwb3RlbnRpYWxseS1zcGVjaWFsIEFTQ0lJIGNoYXJhY3RlcnMgZ2V0IGJhY2tzbGFzaC1lc2NhcGVkXG5cdFx0cmV0dXJuIFwiXFxcXFwiICsgY2g7XG5cdH0sXG5cblx0Ly8gVXNlZCBmb3IgaWZyYW1lc1xuXHQvLyBTZWUgc2V0RG9jdW1lbnQoKVxuXHQvLyBSZW1vdmluZyB0aGUgZnVuY3Rpb24gd3JhcHBlciBjYXVzZXMgYSBcIlBlcm1pc3Npb24gRGVuaWVkXCJcblx0Ly8gZXJyb3IgaW4gSUVcblx0dW5sb2FkSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xuXHRcdHNldERvY3VtZW50KCk7XG5cdH0sXG5cblx0aW5EaXNhYmxlZEZpZWxkc2V0ID0gYWRkQ29tYmluYXRvcihcblx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSB0cnVlICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJmaWVsZHNldFwiO1xuXHRcdH0sXG5cdFx0eyBkaXI6IFwicGFyZW50Tm9kZVwiLCBuZXh0OiBcImxlZ2VuZFwiIH1cblx0KTtcblxuLy8gT3B0aW1pemUgZm9yIHB1c2guYXBwbHkoIF8sIE5vZGVMaXN0IClcbnRyeSB7XG5cdHB1c2guYXBwbHkoXG5cdFx0KGFyciA9IHNsaWNlLmNhbGwoIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzICkpLFxuXHRcdHByZWZlcnJlZERvYy5jaGlsZE5vZGVzXG5cdCk7XG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQ8NC4wXG5cdC8vIERldGVjdCBzaWxlbnRseSBmYWlsaW5nIHB1c2guYXBwbHlcblx0YXJyWyBwcmVmZXJyZWREb2MuY2hpbGROb2Rlcy5sZW5ndGggXS5ub2RlVHlwZTtcbn0gY2F0Y2ggKCBlICkge1xuXHRwdXNoID0geyBhcHBseTogYXJyLmxlbmd0aCA/XG5cblx0XHQvLyBMZXZlcmFnZSBzbGljZSBpZiBwb3NzaWJsZVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHB1c2hfbmF0aXZlLmFwcGx5KCB0YXJnZXQsIHNsaWNlLmNhbGwoZWxzKSApO1xuXHRcdH0gOlxuXG5cdFx0Ly8gU3VwcG9ydDogSUU8OVxuXHRcdC8vIE90aGVyd2lzZSBhcHBlbmQgZGlyZWN0bHlcblx0XHRmdW5jdGlvbiggdGFyZ2V0LCBlbHMgKSB7XG5cdFx0XHR2YXIgaiA9IHRhcmdldC5sZW5ndGgsXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0Ly8gQ2FuJ3QgdHJ1c3QgTm9kZUxpc3QubGVuZ3RoXG5cdFx0XHR3aGlsZSAoICh0YXJnZXRbaisrXSA9IGVsc1tpKytdKSApIHt9XG5cdFx0XHR0YXJnZXQubGVuZ3RoID0gaiAtIDE7XG5cdFx0fVxuXHR9O1xufVxuXG5mdW5jdGlvbiBTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICkge1xuXHR2YXIgbSwgaSwgZWxlbSwgbmlkLCBtYXRjaCwgZ3JvdXBzLCBuZXdTZWxlY3Rvcixcblx0XHRuZXdDb250ZXh0ID0gY29udGV4dCAmJiBjb250ZXh0Lm93bmVyRG9jdW1lbnQsXG5cblx0XHQvLyBub2RlVHlwZSBkZWZhdWx0cyB0byA5LCBzaW5jZSBjb250ZXh0IGRlZmF1bHRzIHRvIGRvY3VtZW50XG5cdFx0bm9kZVR5cGUgPSBjb250ZXh0ID8gY29udGV4dC5ub2RlVHlwZSA6IDk7XG5cblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Ly8gUmV0dXJuIGVhcmx5IGZyb20gY2FsbHMgd2l0aCBpbnZhbGlkIHNlbGVjdG9yIG9yIGNvbnRleHRcblx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgfHwgIXNlbGVjdG9yIHx8XG5cdFx0bm9kZVR5cGUgIT09IDEgJiYgbm9kZVR5cGUgIT09IDkgJiYgbm9kZVR5cGUgIT09IDExICkge1xuXG5cdFx0cmV0dXJuIHJlc3VsdHM7XG5cdH1cblxuXHQvLyBUcnkgdG8gc2hvcnRjdXQgZmluZCBvcGVyYXRpb25zIChhcyBvcHBvc2VkIHRvIGZpbHRlcnMpIGluIEhUTUwgZG9jdW1lbnRzXG5cdGlmICggIXNlZWQgKSB7XG5cblx0XHRpZiAoICggY29udGV4dCA/IGNvbnRleHQub3duZXJEb2N1bWVudCB8fCBjb250ZXh0IDogcHJlZmVycmVkRG9jICkgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0XHR9XG5cdFx0Y29udGV4dCA9IGNvbnRleHQgfHwgZG9jdW1lbnQ7XG5cblx0XHRpZiAoIGRvY3VtZW50SXNIVE1MICkge1xuXG5cdFx0XHQvLyBJZiB0aGUgc2VsZWN0b3IgaXMgc3VmZmljaWVudGx5IHNpbXBsZSwgdHJ5IHVzaW5nIGEgXCJnZXQqQnkqXCIgRE9NIG1ldGhvZFxuXHRcdFx0Ly8gKGV4Y2VwdGluZyBEb2N1bWVudEZyYWdtZW50IGNvbnRleHQsIHdoZXJlIHRoZSBtZXRob2RzIGRvbid0IGV4aXN0KVxuXHRcdFx0aWYgKCBub2RlVHlwZSAhPT0gMTEgJiYgKG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApKSApIHtcblxuXHRcdFx0XHQvLyBJRCBzZWxlY3RvclxuXHRcdFx0XHRpZiAoIChtID0gbWF0Y2hbMV0pICkge1xuXG5cdFx0XHRcdFx0Ly8gRG9jdW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIChlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdFxuXHRcdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0XHQvLyBnZXRFbGVtZW50QnlJZCBjYW4gbWF0Y2ggZWxlbWVudHMgYnkgbmFtZSBpbnN0ZWFkIG9mIElEXG5cdFx0XHRcdFx0XHRcdGlmICggZWxlbS5pZCA9PT0gbSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBFbGVtZW50IGNvbnRleHRcblx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSwgT3BlcmEsIFdlYmtpdFxuXHRcdFx0XHRcdFx0Ly8gVE9ETzogaWRlbnRpZnkgdmVyc2lvbnNcblx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdGlmICggbmV3Q29udGV4dCAmJiAoZWxlbSA9IG5ld0NvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIG0gKSkgJiZcblx0XHRcdFx0XHRcdFx0Y29udGFpbnMoIGNvbnRleHQsIGVsZW0gKSAmJlxuXHRcdFx0XHRcdFx0XHRlbGVtLmlkID09PSBtICkge1xuXG5cdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHlwZSBzZWxlY3RvclxuXHRcdFx0XHR9IGVsc2UgaWYgKCBtYXRjaFsyXSApIHtcblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCBzZWxlY3RvciApICk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cblx0XHRcdFx0Ly8gQ2xhc3Mgc2VsZWN0b3Jcblx0XHRcdFx0fSBlbHNlIGlmICggKG0gPSBtYXRjaFszXSkgJiYgc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmXG5cdFx0XHRcdFx0Y29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICkge1xuXG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCBtICkgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBUYWtlIGFkdmFudGFnZSBvZiBxdWVyeVNlbGVjdG9yQWxsXG5cdFx0XHRpZiAoIHN1cHBvcnQucXNhICYmXG5cdFx0XHRcdCFub25uYXRpdmVTZWxlY3RvckNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF0gJiZcblx0XHRcdFx0KCFyYnVnZ3lRU0EgfHwgIXJidWdneVFTQS50ZXN0KCBzZWxlY3RvciApKSAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDggb25seVxuXHRcdFx0XHQvLyBFeGNsdWRlIG9iamVjdCBlbGVtZW50c1xuXHRcdFx0XHQobm9kZVR5cGUgIT09IDEgfHwgY29udGV4dC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpICE9PSBcIm9iamVjdFwiKSApIHtcblxuXHRcdFx0XHRuZXdTZWxlY3RvciA9IHNlbGVjdG9yO1xuXHRcdFx0XHRuZXdDb250ZXh0ID0gY29udGV4dDtcblxuXHRcdFx0XHQvLyBxU0EgY29uc2lkZXJzIGVsZW1lbnRzIG91dHNpZGUgYSBzY29waW5nIHJvb3Qgd2hlbiBldmFsdWF0aW5nIGNoaWxkIG9yXG5cdFx0XHRcdC8vIGRlc2NlbmRhbnQgY29tYmluYXRvcnMsIHdoaWNoIGlzIG5vdCB3aGF0IHdlIHdhbnQuXG5cdFx0XHRcdC8vIEluIHN1Y2ggY2FzZXMsIHdlIHdvcmsgYXJvdW5kIHRoZSBiZWhhdmlvciBieSBwcmVmaXhpbmcgZXZlcnkgc2VsZWN0b3IgaW4gdGhlXG5cdFx0XHRcdC8vIGxpc3Qgd2l0aCBhbiBJRCBzZWxlY3RvciByZWZlcmVuY2luZyB0aGUgc2NvcGUgY29udGV4dC5cblx0XHRcdFx0Ly8gVGhhbmtzIHRvIEFuZHJldyBEdXBvbnQgZm9yIHRoaXMgdGVjaG5pcXVlLlxuXHRcdFx0XHRpZiAoIG5vZGVUeXBlID09PSAxICYmIHJkZXNjZW5kLnRlc3QoIHNlbGVjdG9yICkgKSB7XG5cblx0XHRcdFx0XHQvLyBDYXB0dXJlIHRoZSBjb250ZXh0IElELCBzZXR0aW5nIGl0IGZpcnN0IGlmIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdGlmICggKG5pZCA9IGNvbnRleHQuZ2V0QXR0cmlidXRlKCBcImlkXCIgKSkgKSB7XG5cdFx0XHRcdFx0XHRuaWQgPSBuaWQucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRjb250ZXh0LnNldEF0dHJpYnV0ZSggXCJpZFwiLCAobmlkID0gZXhwYW5kbykgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBQcmVmaXggZXZlcnkgc2VsZWN0b3IgaW4gdGhlIGxpc3Rcblx0XHRcdFx0XHRncm91cHMgPSB0b2tlbml6ZSggc2VsZWN0b3IgKTtcblx0XHRcdFx0XHRpID0gZ3JvdXBzLmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGdyb3Vwc1tpXSA9IFwiI1wiICsgbmlkICsgXCIgXCIgKyB0b1NlbGVjdG9yKCBncm91cHNbaV0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bmV3U2VsZWN0b3IgPSBncm91cHMuam9pbiggXCIsXCIgKTtcblxuXHRcdFx0XHRcdC8vIEV4cGFuZCBjb250ZXh0IGZvciBzaWJsaW5nIHNlbGVjdG9yc1xuXHRcdFx0XHRcdG5ld0NvbnRleHQgPSByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fFxuXHRcdFx0XHRcdFx0Y29udGV4dDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cyxcblx0XHRcdFx0XHRcdG5ld0NvbnRleHQucXVlcnlTZWxlY3RvckFsbCggbmV3U2VsZWN0b3IgKVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdH0gY2F0Y2ggKCBxc2FFcnJvciApIHtcblx0XHRcdFx0XHRub25uYXRpdmVTZWxlY3RvckNhY2hlKCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdFx0XHR9IGZpbmFsbHkge1xuXHRcdFx0XHRcdGlmICggbmlkID09PSBleHBhbmRvICkge1xuXHRcdFx0XHRcdFx0Y29udGV4dC5yZW1vdmVBdHRyaWJ1dGUoIFwiaWRcIiApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEFsbCBvdGhlcnNcblx0cmV0dXJuIHNlbGVjdCggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApLCBjb250ZXh0LCByZXN1bHRzLCBzZWVkICk7XG59XG5cbi8qKlxuICogQ3JlYXRlIGtleS12YWx1ZSBjYWNoZXMgb2YgbGltaXRlZCBzaXplXG4gKiBAcmV0dXJucyB7ZnVuY3Rpb24oc3RyaW5nLCBvYmplY3QpfSBSZXR1cm5zIHRoZSBPYmplY3QgZGF0YSBhZnRlciBzdG9yaW5nIGl0IG9uIGl0c2VsZiB3aXRoXG4gKlx0cHJvcGVydHkgbmFtZSB0aGUgKHNwYWNlLXN1ZmZpeGVkKSBzdHJpbmcgYW5kIChpZiB0aGUgY2FjaGUgaXMgbGFyZ2VyIHRoYW4gRXhwci5jYWNoZUxlbmd0aClcbiAqXHRkZWxldGluZyB0aGUgb2xkZXN0IGVudHJ5XG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUNhY2hlKCkge1xuXHR2YXIga2V5cyA9IFtdO1xuXG5cdGZ1bmN0aW9uIGNhY2hlKCBrZXksIHZhbHVlICkge1xuXHRcdC8vIFVzZSAoa2V5ICsgXCIgXCIpIHRvIGF2b2lkIGNvbGxpc2lvbiB3aXRoIG5hdGl2ZSBwcm90b3R5cGUgcHJvcGVydGllcyAoc2VlIElzc3VlICMxNTcpXG5cdFx0aWYgKCBrZXlzLnB1c2goIGtleSArIFwiIFwiICkgPiBFeHByLmNhY2hlTGVuZ3RoICkge1xuXHRcdFx0Ly8gT25seSBrZWVwIHRoZSBtb3N0IHJlY2VudCBlbnRyaWVzXG5cdFx0XHRkZWxldGUgY2FjaGVbIGtleXMuc2hpZnQoKSBdO1xuXHRcdH1cblx0XHRyZXR1cm4gKGNhY2hlWyBrZXkgKyBcIiBcIiBdID0gdmFsdWUpO1xuXHR9XG5cdHJldHVybiBjYWNoZTtcbn1cblxuLyoqXG4gKiBNYXJrIGEgZnVuY3Rpb24gZm9yIHNwZWNpYWwgdXNlIGJ5IFNpenpsZVxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gVGhlIGZ1bmN0aW9uIHRvIG1hcmtcbiAqL1xuZnVuY3Rpb24gbWFya0Z1bmN0aW9uKCBmbiApIHtcblx0Zm5bIGV4cGFuZG8gXSA9IHRydWU7XG5cdHJldHVybiBmbjtcbn1cblxuLyoqXG4gKiBTdXBwb3J0IHRlc3RpbmcgdXNpbmcgYW4gZWxlbWVudFxuICogQHBhcmFtIHtGdW5jdGlvbn0gZm4gUGFzc2VkIHRoZSBjcmVhdGVkIGVsZW1lbnQgYW5kIHJldHVybnMgYSBib29sZWFuIHJlc3VsdFxuICovXG5mdW5jdGlvbiBhc3NlcnQoIGZuICkge1xuXHR2YXIgZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIik7XG5cblx0dHJ5IHtcblx0XHRyZXR1cm4gISFmbiggZWwgKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fSBmaW5hbGx5IHtcblx0XHQvLyBSZW1vdmUgZnJvbSBpdHMgcGFyZW50IGJ5IGRlZmF1bHRcblx0XHRpZiAoIGVsLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRlbC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBlbCApO1xuXHRcdH1cblx0XHQvLyByZWxlYXNlIG1lbW9yeSBpbiBJRVxuXHRcdGVsID0gbnVsbDtcblx0fVxufVxuXG4vKipcbiAqIEFkZHMgdGhlIHNhbWUgaGFuZGxlciBmb3IgYWxsIG9mIHRoZSBzcGVjaWZpZWQgYXR0cnNcbiAqIEBwYXJhbSB7U3RyaW5nfSBhdHRycyBQaXBlLXNlcGFyYXRlZCBsaXN0IG9mIGF0dHJpYnV0ZXNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGhhbmRsZXIgVGhlIG1ldGhvZCB0aGF0IHdpbGwgYmUgYXBwbGllZFxuICovXG5mdW5jdGlvbiBhZGRIYW5kbGUoIGF0dHJzLCBoYW5kbGVyICkge1xuXHR2YXIgYXJyID0gYXR0cnMuc3BsaXQoXCJ8XCIpLFxuXHRcdGkgPSBhcnIubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdEV4cHIuYXR0ckhhbmRsZVsgYXJyW2ldIF0gPSBoYW5kbGVyO1xuXHR9XG59XG5cbi8qKlxuICogQ2hlY2tzIGRvY3VtZW50IG9yZGVyIG9mIHR3byBzaWJsaW5nc1xuICogQHBhcmFtIHtFbGVtZW50fSBhXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGJcbiAqIEByZXR1cm5zIHtOdW1iZXJ9IFJldHVybnMgbGVzcyB0aGFuIDAgaWYgYSBwcmVjZWRlcyBiLCBncmVhdGVyIHRoYW4gMCBpZiBhIGZvbGxvd3MgYlxuICovXG5mdW5jdGlvbiBzaWJsaW5nQ2hlY2soIGEsIGIgKSB7XG5cdHZhciBjdXIgPSBiICYmIGEsXG5cdFx0ZGlmZiA9IGN1ciAmJiBhLm5vZGVUeXBlID09PSAxICYmIGIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdGEuc291cmNlSW5kZXggLSBiLnNvdXJjZUluZGV4O1xuXG5cdC8vIFVzZSBJRSBzb3VyY2VJbmRleCBpZiBhdmFpbGFibGUgb24gYm90aCBub2Rlc1xuXHRpZiAoIGRpZmYgKSB7XG5cdFx0cmV0dXJuIGRpZmY7XG5cdH1cblxuXHQvLyBDaGVjayBpZiBiIGZvbGxvd3MgYVxuXHRpZiAoIGN1ciApIHtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIubmV4dFNpYmxpbmcpICkge1xuXHRcdFx0aWYgKCBjdXIgPT09IGIgKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gYSA/IDEgOiAtMTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIGlucHV0IHR5cGVzXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVJbnB1dFBzZXVkbyggdHlwZSApIHtcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdHJldHVybiBuYW1lID09PSBcImlucHV0XCIgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgYnV0dG9uc1xuICogQHBhcmFtIHtTdHJpbmd9IHR5cGVcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQnV0dG9uUHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIChuYW1lID09PSBcImlucHV0XCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIikgJiYgZWxlbS50eXBlID09PSB0eXBlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgOmVuYWJsZWQvOmRpc2FibGVkXG4gKiBAcGFyYW0ge0Jvb2xlYW59IGRpc2FibGVkIHRydWUgZm9yIDpkaXNhYmxlZDsgZmFsc2UgZm9yIDplbmFibGVkXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZURpc2FibGVkUHNldWRvKCBkaXNhYmxlZCApIHtcblxuXHQvLyBLbm93biA6ZGlzYWJsZWQgZmFsc2UgcG9zaXRpdmVzOiBmaWVsZHNldFtkaXNhYmxlZF0gPiBsZWdlbmQ6bnRoLW9mLXR5cGUobisyKSA6Y2FuLWRpc2FibGVcblx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gT25seSBjZXJ0YWluIGVsZW1lbnRzIGNhbiBtYXRjaCA6ZW5hYmxlZCBvciA6ZGlzYWJsZWRcblx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zY3JpcHRpbmcuaHRtbCNzZWxlY3Rvci1lbmFibGVkXG5cdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc2NyaXB0aW5nLmh0bWwjc2VsZWN0b3ItZGlzYWJsZWRcblx0XHRpZiAoIFwiZm9ybVwiIGluIGVsZW0gKSB7XG5cblx0XHRcdC8vIENoZWNrIGZvciBpbmhlcml0ZWQgZGlzYWJsZWRuZXNzIG9uIHJlbGV2YW50IG5vbi1kaXNhYmxlZCBlbGVtZW50czpcblx0XHRcdC8vICogbGlzdGVkIGZvcm0tYXNzb2NpYXRlZCBlbGVtZW50cyBpbiBhIGRpc2FibGVkIGZpZWxkc2V0XG5cdFx0XHQvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY2F0ZWdvcnktbGlzdGVkXG5cdFx0XHQvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY29uY2VwdC1mZS1kaXNhYmxlZFxuXHRcdFx0Ly8gKiBvcHRpb24gZWxlbWVudHMgaW4gYSBkaXNhYmxlZCBvcHRncm91cFxuXHRcdFx0Ly8gICBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9mb3Jtcy5odG1sI2NvbmNlcHQtb3B0aW9uLWRpc2FibGVkXG5cdFx0XHQvLyBBbGwgc3VjaCBlbGVtZW50cyBoYXZlIGEgXCJmb3JtXCIgcHJvcGVydHkuXG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSAmJiBlbGVtLmRpc2FibGVkID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHQvLyBPcHRpb24gZWxlbWVudHMgZGVmZXIgdG8gYSBwYXJlbnQgb3B0Z3JvdXAgaWYgcHJlc2VudFxuXHRcdFx0XHRpZiAoIFwibGFiZWxcIiBpbiBlbGVtICkge1xuXHRcdFx0XHRcdGlmICggXCJsYWJlbFwiIGluIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLnBhcmVudE5vZGUuZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgNiAtIDExXG5cdFx0XHRcdC8vIFVzZSB0aGUgaXNEaXNhYmxlZCBzaG9ydGN1dCBwcm9wZXJ0eSB0byBjaGVjayBmb3IgZGlzYWJsZWQgZmllbGRzZXQgYW5jZXN0b3JzXG5cdFx0XHRcdHJldHVybiBlbGVtLmlzRGlzYWJsZWQgPT09IGRpc2FibGVkIHx8XG5cblx0XHRcdFx0XHQvLyBXaGVyZSB0aGVyZSBpcyBubyBpc0Rpc2FibGVkLCBjaGVjayBtYW51YWxseVxuXHRcdFx0XHRcdC8qIGpzaGludCAtVzAxOCAqL1xuXHRcdFx0XHRcdGVsZW0uaXNEaXNhYmxlZCAhPT0gIWRpc2FibGVkICYmXG5cdFx0XHRcdFx0XHRpbkRpc2FibGVkRmllbGRzZXQoIGVsZW0gKSA9PT0gZGlzYWJsZWQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblxuXHRcdC8vIFRyeSB0byB3aW5ub3cgb3V0IGVsZW1lbnRzIHRoYXQgY2FuJ3QgYmUgZGlzYWJsZWQgYmVmb3JlIHRydXN0aW5nIHRoZSBkaXNhYmxlZCBwcm9wZXJ0eS5cblx0XHQvLyBTb21lIHZpY3RpbXMgZ2V0IGNhdWdodCBpbiBvdXIgbmV0IChsYWJlbCwgbGVnZW5kLCBtZW51LCB0cmFjayksIGJ1dCBpdCBzaG91bGRuJ3Rcblx0XHQvLyBldmVuIGV4aXN0IG9uIHRoZW0sIGxldCBhbG9uZSBoYXZlIGEgYm9vbGVhbiB2YWx1ZS5cblx0XHR9IGVsc2UgaWYgKCBcImxhYmVsXCIgaW4gZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHR9XG5cblx0XHQvLyBSZW1haW5pbmcgZWxlbWVudHMgYXJlIG5laXRoZXIgOmVuYWJsZWQgbm9yIDpkaXNhYmxlZFxuXHRcdHJldHVybiBmYWxzZTtcblx0fTtcbn1cblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24gdG8gdXNlIGluIHBzZXVkb3MgZm9yIHBvc2l0aW9uYWxzXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmblxuICovXG5mdW5jdGlvbiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKCBmbiApIHtcblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggYXJndW1lbnQgKSB7XG5cdFx0YXJndW1lbnQgPSArYXJndW1lbnQ7XG5cdFx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdHZhciBqLFxuXHRcdFx0XHRtYXRjaEluZGV4ZXMgPSBmbiggW10sIHNlZWQubGVuZ3RoLCBhcmd1bWVudCApLFxuXHRcdFx0XHRpID0gbWF0Y2hJbmRleGVzLmxlbmd0aDtcblxuXHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgZm91bmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleGVzXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCBzZWVkWyAoaiA9IG1hdGNoSW5kZXhlc1tpXSkgXSApIHtcblx0XHRcdFx0XHRzZWVkW2pdID0gIShtYXRjaGVzW2pdID0gc2VlZFtqXSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblx0fSk7XG59XG5cbi8qKlxuICogQ2hlY2tzIGEgbm9kZSBmb3IgdmFsaWRpdHkgYXMgYSBTaXp6bGUgY29udGV4dFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdD19IGNvbnRleHRcbiAqIEByZXR1cm5zIHtFbGVtZW50fE9iamVjdHxCb29sZWFufSBUaGUgaW5wdXQgbm9kZSBpZiBhY2NlcHRhYmxlLCBvdGhlcndpc2UgYSBmYWxzeSB2YWx1ZVxuICovXG5mdW5jdGlvbiB0ZXN0Q29udGV4dCggY29udGV4dCApIHtcblx0cmV0dXJuIGNvbnRleHQgJiYgdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgJiYgY29udGV4dDtcbn1cblxuLy8gRXhwb3NlIHN1cHBvcnQgdmFycyBmb3IgY29udmVuaWVuY2VcbnN1cHBvcnQgPSBTaXp6bGUuc3VwcG9ydCA9IHt9O1xuXG4vKipcbiAqIERldGVjdHMgWE1MIG5vZGVzXG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0fSBlbGVtIEFuIGVsZW1lbnQgb3IgYSBkb2N1bWVudFxuICogQHJldHVybnMge0Jvb2xlYW59IFRydWUgaWZmIGVsZW0gaXMgYSBub24tSFRNTCBYTUwgbm9kZVxuICovXG5pc1hNTCA9IFNpenpsZS5pc1hNTCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHR2YXIgbmFtZXNwYWNlID0gZWxlbS5uYW1lc3BhY2VVUkksXG5cdFx0ZG9jRWxlbSA9IChlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSkuZG9jdW1lbnRFbGVtZW50O1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OFxuXHQvLyBBc3N1bWUgSFRNTCB3aGVuIGRvY3VtZW50RWxlbWVudCBkb2Vzbid0IHlldCBleGlzdCwgc3VjaCBhcyBpbnNpZGUgbG9hZGluZyBpZnJhbWVzXG5cdC8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC80ODMzXG5cdHJldHVybiAhcmh0bWwudGVzdCggbmFtZXNwYWNlIHx8IGRvY0VsZW0gJiYgZG9jRWxlbS5ub2RlTmFtZSB8fCBcIkhUTUxcIiApO1xufTtcblxuLyoqXG4gKiBTZXRzIGRvY3VtZW50LXJlbGF0ZWQgdmFyaWFibGVzIG9uY2UgYmFzZWQgb24gdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IFtkb2NdIEFuIGVsZW1lbnQgb3IgZG9jdW1lbnQgb2JqZWN0IHRvIHVzZSB0byBzZXQgdGhlIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7T2JqZWN0fSBSZXR1cm5zIHRoZSBjdXJyZW50IGRvY3VtZW50XG4gKi9cbnNldERvY3VtZW50ID0gU2l6emxlLnNldERvY3VtZW50ID0gZnVuY3Rpb24oIG5vZGUgKSB7XG5cdHZhciBoYXNDb21wYXJlLCBzdWJXaW5kb3csXG5cdFx0ZG9jID0gbm9kZSA/IG5vZGUub3duZXJEb2N1bWVudCB8fCBub2RlIDogcHJlZmVycmVkRG9jO1xuXG5cdC8vIFJldHVybiBlYXJseSBpZiBkb2MgaXMgaW52YWxpZCBvciBhbHJlYWR5IHNlbGVjdGVkXG5cdGlmICggZG9jID09PSBkb2N1bWVudCB8fCBkb2Mubm9kZVR5cGUgIT09IDkgfHwgIWRvYy5kb2N1bWVudEVsZW1lbnQgKSB7XG5cdFx0cmV0dXJuIGRvY3VtZW50O1xuXHR9XG5cblx0Ly8gVXBkYXRlIGdsb2JhbCB2YXJpYWJsZXNcblx0ZG9jdW1lbnQgPSBkb2M7XG5cdGRvY0VsZW0gPSBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XG5cdGRvY3VtZW50SXNIVE1MID0gIWlzWE1MKCBkb2N1bWVudCApO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDktMTEsIEVkZ2Vcblx0Ly8gQWNjZXNzaW5nIGlmcmFtZSBkb2N1bWVudHMgYWZ0ZXIgdW5sb2FkIHRocm93cyBcInBlcm1pc3Npb24gZGVuaWVkXCIgZXJyb3JzIChqUXVlcnkgIzEzOTM2KVxuXHRpZiAoIHByZWZlcnJlZERvYyAhPT0gZG9jdW1lbnQgJiZcblx0XHQoc3ViV2luZG93ID0gZG9jdW1lbnQuZGVmYXVsdFZpZXcpICYmIHN1YldpbmRvdy50b3AgIT09IHN1YldpbmRvdyApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDExLCBFZGdlXG5cdFx0aWYgKCBzdWJXaW5kb3cuYWRkRXZlbnRMaXN0ZW5lciApIHtcblx0XHRcdHN1YldpbmRvdy5hZGRFdmVudExpc3RlbmVyKCBcInVubG9hZFwiLCB1bmxvYWRIYW5kbGVyLCBmYWxzZSApO1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDEwIG9ubHlcblx0XHR9IGVsc2UgaWYgKCBzdWJXaW5kb3cuYXR0YWNoRXZlbnQgKSB7XG5cdFx0XHRzdWJXaW5kb3cuYXR0YWNoRXZlbnQoIFwib251bmxvYWRcIiwgdW5sb2FkSGFuZGxlciApO1xuXHRcdH1cblx0fVxuXG5cdC8qIEF0dHJpYnV0ZXNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFN1cHBvcnQ6IElFPDhcblx0Ly8gVmVyaWZ5IHRoYXQgZ2V0QXR0cmlidXRlIHJlYWxseSByZXR1cm5zIGF0dHJpYnV0ZXMgYW5kIG5vdCBwcm9wZXJ0aWVzXG5cdC8vIChleGNlcHRpbmcgSUU4IGJvb2xlYW5zKVxuXHRzdXBwb3J0LmF0dHJpYnV0ZXMgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmNsYXNzTmFtZSA9IFwiaVwiO1xuXHRcdHJldHVybiAhZWwuZ2V0QXR0cmlidXRlKFwiY2xhc3NOYW1lXCIpO1xuXHR9KTtcblxuXHQvKiBnZXRFbGVtZW50KHMpQnkqXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBDaGVjayBpZiBnZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikgcmV0dXJucyBvbmx5IGVsZW1lbnRzXG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdGVsLmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpICk7XG5cdFx0cmV0dXJuICFlbC5nZXRFbGVtZW50c0J5VGFnTmFtZShcIipcIikubGVuZ3RoO1xuXHR9KTtcblxuXHQvLyBTdXBwb3J0OiBJRTw5XG5cdHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSApO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDEwXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRCeUlkIHJldHVybnMgZWxlbWVudHMgYnkgbmFtZVxuXHQvLyBUaGUgYnJva2VuIGdldEVsZW1lbnRCeUlkIG1ldGhvZHMgZG9uJ3QgcGljayB1cCBwcm9ncmFtbWF0aWNhbGx5LXNldCBuYW1lcyxcblx0Ly8gc28gdXNlIGEgcm91bmRhYm91dCBnZXRFbGVtZW50c0J5TmFtZSB0ZXN0XG5cdHN1cHBvcnQuZ2V0QnlJZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pZCA9IGV4cGFuZG87XG5cdFx0cmV0dXJuICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSB8fCAhZG9jdW1lbnQuZ2V0RWxlbWVudHNCeU5hbWUoIGV4cGFuZG8gKS5sZW5ndGg7XG5cdH0pO1xuXG5cdC8vIElEIGZpbHRlciBhbmQgZmluZFxuXHRpZiAoIHN1cHBvcnQuZ2V0QnlJZCApIHtcblx0XHRFeHByLmZpbHRlcltcIklEXCJdID0gZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZShcImlkXCIpID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cdFx0XHRcdHJldHVybiBlbGVtID8gWyBlbGVtIF0gOiBbXTtcblx0XHRcdH1cblx0XHR9O1xuXHR9IGVsc2Uge1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSAgZnVuY3Rpb24oIGlkICkge1xuXHRcdFx0dmFyIGF0dHJJZCA9IGlkLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciBub2RlID0gdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlTm9kZSAhPT0gXCJ1bmRlZmluZWRcIiAmJlxuXHRcdFx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRyZXR1cm4gbm9kZSAmJiBub2RlLnZhbHVlID09PSBhdHRySWQ7XG5cdFx0XHR9O1xuXHRcdH07XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA2IC0gNyBvbmx5XG5cdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgaXMgbm90IHJlbGlhYmxlIGFzIGEgZmluZCBzaG9ydGN1dFxuXHRcdEV4cHIuZmluZFtcIklEXCJdID0gZnVuY3Rpb24oIGlkLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50QnlJZCAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdFx0dmFyIG5vZGUsIGksIGVsZW1zLFxuXHRcdFx0XHRcdGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBpZCApO1xuXG5cdFx0XHRcdGlmICggZWxlbSApIHtcblxuXHRcdFx0XHRcdC8vIFZlcmlmeSB0aGUgaWQgYXR0cmlidXRlXG5cdFx0XHRcdFx0bm9kZSA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRcdGlmICggbm9kZSAmJiBub2RlLnZhbHVlID09PSBpZCApIHtcblx0XHRcdFx0XHRcdHJldHVybiBbIGVsZW0gXTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBGYWxsIGJhY2sgb24gZ2V0RWxlbWVudHNCeU5hbWVcblx0XHRcdFx0XHRlbGVtcyA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeU5hbWUoIGlkICk7XG5cdFx0XHRcdFx0aSA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1zW2krK10pICkge1xuXHRcdFx0XHRcdFx0bm9kZSA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShcImlkXCIpO1xuXHRcdFx0XHRcdFx0aWYgKCBub2RlICYmIG5vZGUudmFsdWUgPT09IGlkICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gWyBlbGVtIF07XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIFtdO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHQvLyBUYWdcblx0RXhwci5maW5kW1wiVEFHXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA/XG5cdFx0ZnVuY3Rpb24oIHRhZywgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRG9jdW1lbnRGcmFnbWVudCBub2RlcyBkb24ndCBoYXZlIGdFQlROXG5cdFx0XHR9IGVsc2UgaWYgKCBzdXBwb3J0LnFzYSApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCggdGFnICk7XG5cdFx0XHR9XG5cdFx0fSA6XG5cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0dmFyIGVsZW0sXG5cdFx0XHRcdHRtcCA9IFtdLFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0Ly8gQnkgaGFwcHkgY29pbmNpZGVuY2UsIGEgKGJyb2tlbikgZ0VCVE4gYXBwZWFycyBvbiBEb2N1bWVudEZyYWdtZW50IG5vZGVzIHRvb1xuXHRcdFx0XHRyZXN1bHRzID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnICk7XG5cblx0XHRcdC8vIEZpbHRlciBvdXQgcG9zc2libGUgY29tbWVudHNcblx0XHRcdGlmICggdGFnID09PSBcIipcIiApIHtcblx0XHRcdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0XHRcdFx0dG1wLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdG1wO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0fTtcblxuXHQvLyBDbGFzc1xuXHRFeHByLmZpbmRbXCJDTEFTU1wiXSA9IHN1cHBvcnQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAmJiBmdW5jdGlvbiggY2xhc3NOYW1lLCBjb250ZXh0ICkge1xuXHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBkb2N1bWVudElzSFRNTCApIHtcblx0XHRcdHJldHVybiBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIGNsYXNzTmFtZSApO1xuXHRcdH1cblx0fTtcblxuXHQvKiBRU0EvbWF0Y2hlc1NlbGVjdG9yXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBRU0EgYW5kIG1hdGNoZXNTZWxlY3RvciBzdXBwb3J0XG5cblx0Ly8gbWF0Y2hlc1NlbGVjdG9yKDphY3RpdmUpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChJRTkvT3BlcmEgMTEuNSlcblx0cmJ1Z2d5TWF0Y2hlcyA9IFtdO1xuXG5cdC8vIHFTYSg6Zm9jdXMpIHJlcG9ydHMgZmFsc2Ugd2hlbiB0cnVlIChDaHJvbWUgMjEpXG5cdC8vIFdlIGFsbG93IHRoaXMgYmVjYXVzZSBvZiBhIGJ1ZyBpbiBJRTgvOSB0aGF0IHRocm93cyBhbiBlcnJvclxuXHQvLyB3aGVuZXZlciBgZG9jdW1lbnQuYWN0aXZlRWxlbWVudGAgaXMgYWNjZXNzZWQgb24gYW4gaWZyYW1lXG5cdC8vIFNvLCB3ZSBhbGxvdyA6Zm9jdXMgdG8gcGFzcyB0aHJvdWdoIFFTQSBhbGwgdGhlIHRpbWUgdG8gYXZvaWQgdGhlIElFIGVycm9yXG5cdC8vIFNlZSBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzNzhcblx0cmJ1Z2d5UVNBID0gW107XG5cblx0aWYgKCAoc3VwcG9ydC5xc2EgPSBybmF0aXZlLnRlc3QoIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwgKSkgKSB7XG5cdFx0Ly8gQnVpbGQgUVNBIHJlZ2V4XG5cdFx0Ly8gUmVnZXggc3RyYXRlZ3kgYWRvcHRlZCBmcm9tIERpZWdvIFBlcmluaVxuXHRcdGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHQvLyBTZWxlY3QgaXMgc2V0IHRvIGVtcHR5IHN0cmluZyBvbiBwdXJwb3NlXG5cdFx0XHQvLyBUaGlzIGlzIHRvIHRlc3QgSUUncyB0cmVhdG1lbnQgb2Ygbm90IGV4cGxpY2l0bHlcblx0XHRcdC8vIHNldHRpbmcgYSBib29sZWFuIGNvbnRlbnQgYXR0cmlidXRlLFxuXHRcdFx0Ly8gc2luY2UgaXRzIHByZXNlbmNlIHNob3VsZCBiZSBlbm91Z2hcblx0XHRcdC8vIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMjM1OVxuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5pbm5lckhUTUwgPSBcIjxhIGlkPSdcIiArIGV4cGFuZG8gKyBcIic+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGlkPSdcIiArIGV4cGFuZG8gKyBcIi1cXHJcXFxcJyBtc2FsbG93Y2FwdHVyZT0nJz5cIiArXG5cdFx0XHRcdFwiPG9wdGlvbiBzZWxlY3RlZD0nJz48L29wdGlvbj48L3NlbGVjdD5cIjtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4LCBPcGVyYSAxMS0xMi4xNlxuXHRcdFx0Ly8gTm90aGluZyBzaG91bGQgYmUgc2VsZWN0ZWQgd2hlbiBlbXB0eSBzdHJpbmdzIGZvbGxvdyBePSBvciAkPSBvciAqPVxuXHRcdFx0Ly8gVGhlIHRlc3QgYXR0cmlidXRlIG11c3QgYmUgdW5rbm93biBpbiBPcGVyYSBidXQgXCJzYWZlXCIgZm9yIFdpblJUXG5cdFx0XHQvLyBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2llL2hoNDY1Mzg4LmFzcHgjYXR0cmlidXRlX3NlY3Rpb25cblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIlttc2FsbG93Y2FwdHVyZV49JyddXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiWypeJF09XCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86Jyd8XFxcIlxcXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU4XG5cdFx0XHQvLyBCb29sZWFuIGF0dHJpYnV0ZXMgYW5kIFwidmFsdWVcIiBhcmUgbm90IHRyZWF0ZWQgY29ycmVjdGx5XG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW3NlbGVjdGVkXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIlxcXFxbXCIgKyB3aGl0ZXNwYWNlICsgXCIqKD86dmFsdWV8XCIgKyBib29sZWFucyArIFwiKVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZTwyOSwgQW5kcm9pZDw0LjQsIFNhZmFyaTw3LjArLCBpT1M8Ny4wKywgUGhhbnRvbUpTPDEuOS44K1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCggXCJbaWR+PVwiICsgZXhwYW5kbyArIFwiLV1cIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCJ+PVwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gV2Via2l0L09wZXJhIC0gOmNoZWNrZWQgc2hvdWxkIHJldHVybiBzZWxlY3RlZCBvcHRpb24gZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbChcIjpjaGVja2VkXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCI6Y2hlY2tlZFwiKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDgrLCBpT1MgOCtcblx0XHRcdC8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzY4NTFcblx0XHRcdC8vIEluLXBhZ2UgYHNlbGVjdG9yI2lkIHNpYmxpbmctY29tYmluYXRvciBzZWxlY3RvcmAgZmFpbHNcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoIFwiYSNcIiArIGV4cGFuZG8gKyBcIisqXCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKFwiLiMuK1srfl1cIik7XG5cdFx0XHR9XG5cdFx0fSk7XG5cblx0XHRhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRcdFx0ZWwuaW5uZXJIVE1MID0gXCI8YSBocmVmPScnIGRpc2FibGVkPSdkaXNhYmxlZCc+PC9hPlwiICtcblx0XHRcdFx0XCI8c2VsZWN0IGRpc2FibGVkPSdkaXNhYmxlZCc+PG9wdGlvbi8+PC9zZWxlY3Q+XCI7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IFdpbmRvd3MgOCBOYXRpdmUgQXBwc1xuXHRcdFx0Ly8gVGhlIHR5cGUgYW5kIG5hbWUgYXR0cmlidXRlcyBhcmUgcmVzdHJpY3RlZCBkdXJpbmcgLmlubmVySFRNTCBhc3NpZ25tZW50XG5cdFx0XHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW5wdXRcIik7XG5cdFx0XHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcImhpZGRlblwiICk7XG5cdFx0XHRlbC5hcHBlbmRDaGlsZCggaW5wdXQgKS5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcIkRcIiApO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEVuZm9yY2UgY2FzZS1zZW5zaXRpdml0eSBvZiBuYW1lIGF0dHJpYnV0ZVxuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW25hbWU9ZF1cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJuYW1lXCIgKyB3aGl0ZXNwYWNlICsgXCIqWypeJHwhfl0/PVwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEZGIDMuNSAtIDplbmFibGVkLzpkaXNhYmxlZCBhbmQgaGlkZGVuIGVsZW1lbnRzIChoaWRkZW4gZWxlbWVudHMgYXJlIHN0aWxsIGVuYWJsZWQpXG5cdFx0XHQvLyBJRTggdGhyb3dzIGVycm9yIGhlcmUgYW5kIHdpbGwgbm90IHNlZSBsYXRlciB0ZXN0c1xuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiOmVuYWJsZWRcIikubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOS0xMStcblx0XHRcdC8vIElFJ3MgOmRpc2FibGVkIHNlbGVjdG9yIGRvZXMgbm90IHBpY2sgdXAgdGhlIGNoaWxkcmVuIG9mIGRpc2FibGVkIGZpZWxkc2V0c1xuXHRcdFx0ZG9jRWxlbS5hcHBlbmRDaGlsZCggZWwgKS5kaXNhYmxlZCA9IHRydWU7XG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZGlzYWJsZWRcIikubGVuZ3RoICE9PSAyICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCI6ZW5hYmxlZFwiLCBcIjpkaXNhYmxlZFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9wZXJhIDEwLTExIGRvZXMgbm90IHRocm93IG9uIHBvc3QtY29tbWEgaW52YWxpZCBwc2V1ZG9zXG5cdFx0XHRlbC5xdWVyeVNlbGVjdG9yQWxsKFwiKiw6eFwiKTtcblx0XHRcdHJidWdneVFTQS5wdXNoKFwiLC4qOlwiKTtcblx0XHR9KTtcblx0fVxuXG5cdGlmICggKHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yID0gcm5hdGl2ZS50ZXN0KCAobWF0Y2hlcyA9IGRvY0VsZW0ubWF0Y2hlcyB8fFxuXHRcdGRvY0VsZW0ud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8XG5cdFx0ZG9jRWxlbS5tb3pNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm9NYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1zTWF0Y2hlc1NlbGVjdG9yKSApKSApIHtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHQvLyBDaGVjayB0byBzZWUgaWYgaXQncyBwb3NzaWJsZSB0byBkbyBtYXRjaGVzU2VsZWN0b3Jcblx0XHRcdC8vIG9uIGEgZGlzY29ubmVjdGVkIG5vZGUgKElFIDkpXG5cdFx0XHRzdXBwb3J0LmRpc2Nvbm5lY3RlZE1hdGNoID0gbWF0Y2hlcy5jYWxsKCBlbCwgXCIqXCIgKTtcblxuXHRcdFx0Ly8gVGhpcyBzaG91bGQgZmFpbCB3aXRoIGFuIGV4Y2VwdGlvblxuXHRcdFx0Ly8gR2Vja28gZG9lcyBub3QgZXJyb3IsIHJldHVybnMgZmFsc2UgaW5zdGVhZFxuXHRcdFx0bWF0Y2hlcy5jYWxsKCBlbCwgXCJbcyE9JyddOnhcIiApO1xuXHRcdFx0cmJ1Z2d5TWF0Y2hlcy5wdXNoKCBcIiE9XCIsIHBzZXVkb3MgKTtcblx0XHR9KTtcblx0fVxuXG5cdHJidWdneVFTQSA9IHJidWdneVFTQS5sZW5ndGggJiYgbmV3IFJlZ0V4cCggcmJ1Z2d5UVNBLmpvaW4oXCJ8XCIpICk7XG5cdHJidWdneU1hdGNoZXMgPSByYnVnZ3lNYXRjaGVzLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lNYXRjaGVzLmpvaW4oXCJ8XCIpICk7XG5cblx0LyogQ29udGFpbnNcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXHRoYXNDb21wYXJlID0gcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICk7XG5cblx0Ly8gRWxlbWVudCBjb250YWlucyBhbm90aGVyXG5cdC8vIFB1cnBvc2VmdWxseSBzZWxmLWV4Y2x1c2l2ZVxuXHQvLyBBcyBpbiwgYW4gZWxlbWVudCBkb2VzIG5vdCBjb250YWluIGl0c2VsZlxuXHRjb250YWlucyA9IGhhc0NvbXBhcmUgfHwgcm5hdGl2ZS50ZXN0KCBkb2NFbGVtLmNvbnRhaW5zICkgP1xuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0dmFyIGFkb3duID0gYS5ub2RlVHlwZSA9PT0gOSA/IGEuZG9jdW1lbnRFbGVtZW50IDogYSxcblx0XHRcdFx0YnVwID0gYiAmJiBiLnBhcmVudE5vZGU7XG5cdFx0XHRyZXR1cm4gYSA9PT0gYnVwIHx8ICEhKCBidXAgJiYgYnVwLm5vZGVUeXBlID09PSAxICYmIChcblx0XHRcdFx0YWRvd24uY29udGFpbnMgP1xuXHRcdFx0XHRcdGFkb3duLmNvbnRhaW5zKCBidXAgKSA6XG5cdFx0XHRcdFx0YS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiAmJiBhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBidXAgKSAmIDE2XG5cdFx0XHQpKTtcblx0XHR9IDpcblx0XHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHRcdGlmICggYiApIHtcblx0XHRcdFx0d2hpbGUgKCAoYiA9IGIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBiID09PSBhICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcblxuXHQvKiBTb3J0aW5nXG5cdC0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0gKi9cblxuXHQvLyBEb2N1bWVudCBvcmRlciBzb3J0aW5nXG5cdHNvcnRPcmRlciA9IGhhc0NvbXBhcmUgP1xuXHRmdW5jdGlvbiggYSwgYiApIHtcblxuXHRcdC8vIEZsYWcgZm9yIGR1cGxpY2F0ZSByZW1vdmFsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdC8vIFNvcnQgb24gbWV0aG9kIGV4aXN0ZW5jZSBpZiBvbmx5IG9uZSBpbnB1dCBoYXMgY29tcGFyZURvY3VtZW50UG9zaXRpb25cblx0XHR2YXIgY29tcGFyZSA9ICFhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uIC0gIWIuY29tcGFyZURvY3VtZW50UG9zaXRpb247XG5cdFx0aWYgKCBjb21wYXJlICkge1xuXHRcdFx0cmV0dXJuIGNvbXBhcmU7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsY3VsYXRlIHBvc2l0aW9uIGlmIGJvdGggaW5wdXRzIGJlbG9uZyB0byB0aGUgc2FtZSBkb2N1bWVudFxuXHRcdGNvbXBhcmUgPSAoIGEub3duZXJEb2N1bWVudCB8fCBhICkgPT09ICggYi5vd25lckRvY3VtZW50IHx8IGIgKSA/XG5cdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBiICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugd2Uga25vdyB0aGV5IGFyZSBkaXNjb25uZWN0ZWRcblx0XHRcdDE7XG5cblx0XHQvLyBEaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRpZiAoIGNvbXBhcmUgJiAxIHx8XG5cdFx0XHQoIXN1cHBvcnQuc29ydERldGFjaGVkICYmIGIuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGEgKSA9PT0gY29tcGFyZSkgKSB7XG5cblx0XHRcdC8vIENob29zZSB0aGUgZmlyc3QgZWxlbWVudCB0aGF0IGlzIHJlbGF0ZWQgdG8gb3VyIHByZWZlcnJlZCBkb2N1bWVudFxuXHRcdFx0aWYgKCBhID09PSBkb2N1bWVudCB8fCBhLm93bmVyRG9jdW1lbnQgPT09IHByZWZlcnJlZERvYyAmJiBjb250YWlucyhwcmVmZXJyZWREb2MsIGEpICkge1xuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGIgPT09IGRvY3VtZW50IHx8IGIub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYikgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWludGFpbiBvcmlnaW5hbCBvcmRlclxuXHRcdFx0cmV0dXJuIHNvcnRJbnB1dCA/XG5cdFx0XHRcdCggaW5kZXhPZiggc29ydElucHV0LCBhICkgLSBpbmRleE9mKCBzb3J0SW5wdXQsIGIgKSApIDpcblx0XHRcdFx0MDtcblx0XHR9XG5cblx0XHRyZXR1cm4gY29tcGFyZSAmIDQgPyAtMSA6IDE7XG5cdH0gOlxuXHRmdW5jdGlvbiggYSwgYiApIHtcblx0XHQvLyBFeGl0IGVhcmx5IGlmIHRoZSBub2RlcyBhcmUgaWRlbnRpY2FsXG5cdFx0aWYgKCBhID09PSBiICkge1xuXHRcdFx0aGFzRHVwbGljYXRlID0gdHJ1ZTtcblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHZhciBjdXIsXG5cdFx0XHRpID0gMCxcblx0XHRcdGF1cCA9IGEucGFyZW50Tm9kZSxcblx0XHRcdGJ1cCA9IGIucGFyZW50Tm9kZSxcblx0XHRcdGFwID0gWyBhIF0sXG5cdFx0XHRicCA9IFsgYiBdO1xuXG5cdFx0Ly8gUGFyZW50bGVzcyBub2RlcyBhcmUgZWl0aGVyIGRvY3VtZW50cyBvciBkaXNjb25uZWN0ZWRcblx0XHRpZiAoICFhdXAgfHwgIWJ1cCApIHtcblx0XHRcdHJldHVybiBhID09PSBkb2N1bWVudCA/IC0xIDpcblx0XHRcdFx0YiA9PT0gZG9jdW1lbnQgPyAxIDpcblx0XHRcdFx0YXVwID8gLTEgOlxuXHRcdFx0XHRidXAgPyAxIDpcblx0XHRcdFx0c29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXG5cdFx0Ly8gSWYgdGhlIG5vZGVzIGFyZSBzaWJsaW5ncywgd2UgY2FuIGRvIGEgcXVpY2sgY2hlY2tcblx0XHR9IGVsc2UgaWYgKCBhdXAgPT09IGJ1cCApIHtcblx0XHRcdHJldHVybiBzaWJsaW5nQ2hlY2soIGEsIGIgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2Ugd2UgbmVlZCBmdWxsIGxpc3RzIG9mIHRoZWlyIGFuY2VzdG9ycyBmb3IgY29tcGFyaXNvblxuXHRcdGN1ciA9IGE7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YXAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXHRcdGN1ciA9IGI7XG5cdFx0d2hpbGUgKCAoY3VyID0gY3VyLnBhcmVudE5vZGUpICkge1xuXHRcdFx0YnAudW5zaGlmdCggY3VyICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2FsayBkb3duIHRoZSB0cmVlIGxvb2tpbmcgZm9yIGEgZGlzY3JlcGFuY3lcblx0XHR3aGlsZSAoIGFwW2ldID09PSBicFtpXSApIHtcblx0XHRcdGkrKztcblx0XHR9XG5cblx0XHRyZXR1cm4gaSA/XG5cdFx0XHQvLyBEbyBhIHNpYmxpbmcgY2hlY2sgaWYgdGhlIG5vZGVzIGhhdmUgYSBjb21tb24gYW5jZXN0b3Jcblx0XHRcdHNpYmxpbmdDaGVjayggYXBbaV0sIGJwW2ldICkgOlxuXG5cdFx0XHQvLyBPdGhlcndpc2Ugbm9kZXMgaW4gb3VyIGRvY3VtZW50IHNvcnQgZmlyc3Rcblx0XHRcdGFwW2ldID09PSBwcmVmZXJyZWREb2MgPyAtMSA6XG5cdFx0XHRicFtpXSA9PT0gcHJlZmVycmVkRG9jID8gMSA6XG5cdFx0XHQwO1xuXHR9O1xuXG5cdHJldHVybiBkb2N1bWVudDtcbn07XG5cblNpenpsZS5tYXRjaGVzID0gZnVuY3Rpb24oIGV4cHIsIGVsZW1lbnRzICkge1xuXHRyZXR1cm4gU2l6emxlKCBleHByLCBudWxsLCBudWxsLCBlbGVtZW50cyApO1xufTtcblxuU2l6emxlLm1hdGNoZXNTZWxlY3RvciA9IGZ1bmN0aW9uKCBlbGVtLCBleHByICkge1xuXHQvLyBTZXQgZG9jdW1lbnQgdmFycyBpZiBuZWVkZWRcblx0aWYgKCAoIGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtICkgIT09IGRvY3VtZW50ICkge1xuXHRcdHNldERvY3VtZW50KCBlbGVtICk7XG5cdH1cblxuXHRpZiAoIHN1cHBvcnQubWF0Y2hlc1NlbGVjdG9yICYmIGRvY3VtZW50SXNIVE1MICYmXG5cdFx0IW5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGVbIGV4cHIgKyBcIiBcIiBdICYmXG5cdFx0KCAhcmJ1Z2d5TWF0Y2hlcyB8fCAhcmJ1Z2d5TWF0Y2hlcy50ZXN0KCBleHByICkgKSAmJlxuXHRcdCggIXJidWdneVFTQSAgICAgfHwgIXJidWdneVFTQS50ZXN0KCBleHByICkgKSApIHtcblxuXHRcdHRyeSB7XG5cdFx0XHR2YXIgcmV0ID0gbWF0Y2hlcy5jYWxsKCBlbGVtLCBleHByICk7XG5cblx0XHRcdC8vIElFIDkncyBtYXRjaGVzU2VsZWN0b3IgcmV0dXJucyBmYWxzZSBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblx0XHRcdGlmICggcmV0IHx8IHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggfHxcblx0XHRcdFx0XHQvLyBBcyB3ZWxsLCBkaXNjb25uZWN0ZWQgbm9kZXMgYXJlIHNhaWQgdG8gYmUgaW4gYSBkb2N1bWVudFxuXHRcdFx0XHRcdC8vIGZyYWdtZW50IGluIElFIDlcblx0XHRcdFx0XHRlbGVtLmRvY3VtZW50ICYmIGVsZW0uZG9jdW1lbnQubm9kZVR5cGUgIT09IDExICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXHRcdH0gY2F0Y2ggKGUpIHtcblx0XHRcdG5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUoIGV4cHIsIHRydWUgKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gU2l6emxlKCBleHByLCBkb2N1bWVudCwgbnVsbCwgWyBlbGVtIF0gKS5sZW5ndGggPiAwO1xufTtcblxuU2l6emxlLmNvbnRhaW5zID0gZnVuY3Rpb24oIGNvbnRleHQsIGVsZW0gKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGNvbnRleHQgKTtcblx0fVxuXHRyZXR1cm4gY29udGFpbnMoIGNvbnRleHQsIGVsZW0gKTtcbn07XG5cblNpenpsZS5hdHRyID0gZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdHZhciBmbiA9IEV4cHIuYXR0ckhhbmRsZVsgbmFtZS50b0xvd2VyQ2FzZSgpIF0sXG5cdFx0Ly8gRG9uJ3QgZ2V0IGZvb2xlZCBieSBPYmplY3QucHJvdG90eXBlIHByb3BlcnRpZXMgKGpRdWVyeSAjMTM4MDcpXG5cdFx0dmFsID0gZm4gJiYgaGFzT3duLmNhbGwoIEV4cHIuYXR0ckhhbmRsZSwgbmFtZS50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0Zm4oIGVsZW0sIG5hbWUsICFkb2N1bWVudElzSFRNTCApIDpcblx0XHRcdHVuZGVmaW5lZDtcblxuXHRyZXR1cm4gdmFsICE9PSB1bmRlZmluZWQgP1xuXHRcdHZhbCA6XG5cdFx0c3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSApIDpcblx0XHRcdCh2YWwgPSBlbGVtLmdldEF0dHJpYnV0ZU5vZGUobmFtZSkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xufTtcblxuU2l6emxlLmVzY2FwZSA9IGZ1bmN0aW9uKCBzZWwgKSB7XG5cdHJldHVybiAoc2VsICsgXCJcIikucmVwbGFjZSggcmNzc2VzY2FwZSwgZmNzc2VzY2FwZSApO1xufTtcblxuU2l6emxlLmVycm9yID0gZnVuY3Rpb24oIG1zZyApIHtcblx0dGhyb3cgbmV3IEVycm9yKCBcIlN5bnRheCBlcnJvciwgdW5yZWNvZ25pemVkIGV4cHJlc3Npb246IFwiICsgbXNnICk7XG59O1xuXG4vKipcbiAqIERvY3VtZW50IHNvcnRpbmcgYW5kIHJlbW92aW5nIGR1cGxpY2F0ZXNcbiAqIEBwYXJhbSB7QXJyYXlMaWtlfSByZXN1bHRzXG4gKi9cblNpenpsZS51bmlxdWVTb3J0ID0gZnVuY3Rpb24oIHJlc3VsdHMgKSB7XG5cdHZhciBlbGVtLFxuXHRcdGR1cGxpY2F0ZXMgPSBbXSxcblx0XHRqID0gMCxcblx0XHRpID0gMDtcblxuXHQvLyBVbmxlc3Mgd2UgKmtub3cqIHdlIGNhbiBkZXRlY3QgZHVwbGljYXRlcywgYXNzdW1lIHRoZWlyIHByZXNlbmNlXG5cdGhhc0R1cGxpY2F0ZSA9ICFzdXBwb3J0LmRldGVjdER1cGxpY2F0ZXM7XG5cdHNvcnRJbnB1dCA9ICFzdXBwb3J0LnNvcnRTdGFibGUgJiYgcmVzdWx0cy5zbGljZSggMCApO1xuXHRyZXN1bHRzLnNvcnQoIHNvcnRPcmRlciApO1xuXG5cdGlmICggaGFzRHVwbGljYXRlICkge1xuXHRcdHdoaWxlICggKGVsZW0gPSByZXN1bHRzW2krK10pICkge1xuXHRcdFx0aWYgKCBlbGVtID09PSByZXN1bHRzWyBpIF0gKSB7XG5cdFx0XHRcdGogPSBkdXBsaWNhdGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0d2hpbGUgKCBqLS0gKSB7XG5cdFx0XHRyZXN1bHRzLnNwbGljZSggZHVwbGljYXRlc1sgaiBdLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2xlYXIgaW5wdXQgYWZ0ZXIgc29ydGluZyB0byByZWxlYXNlIG9iamVjdHNcblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvc2l6emxlL3B1bGwvMjI1XG5cdHNvcnRJbnB1dCA9IG51bGw7XG5cblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vKipcbiAqIFV0aWxpdHkgZnVuY3Rpb24gZm9yIHJldHJpZXZpbmcgdGhlIHRleHQgdmFsdWUgb2YgYW4gYXJyYXkgb2YgRE9NIG5vZGVzXG4gKiBAcGFyYW0ge0FycmF5fEVsZW1lbnR9IGVsZW1cbiAqL1xuZ2V0VGV4dCA9IFNpenpsZS5nZXRUZXh0ID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBub2RlLFxuXHRcdHJldCA9IFwiXCIsXG5cdFx0aSA9IDAsXG5cdFx0bm9kZVR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdGlmICggIW5vZGVUeXBlICkge1xuXHRcdC8vIElmIG5vIG5vZGVUeXBlLCB0aGlzIGlzIGV4cGVjdGVkIHRvIGJlIGFuIGFycmF5XG5cdFx0d2hpbGUgKCAobm9kZSA9IGVsZW1baSsrXSkgKSB7XG5cdFx0XHQvLyBEbyBub3QgdHJhdmVyc2UgY29tbWVudCBub2Rlc1xuXHRcdFx0cmV0ICs9IGdldFRleHQoIG5vZGUgKTtcblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAxIHx8IG5vZGVUeXBlID09PSA5IHx8IG5vZGVUeXBlID09PSAxMSApIHtcblx0XHQvLyBVc2UgdGV4dENvbnRlbnQgZm9yIGVsZW1lbnRzXG5cdFx0Ly8gaW5uZXJUZXh0IHVzYWdlIHJlbW92ZWQgZm9yIGNvbnNpc3RlbmN5IG9mIG5ldyBsaW5lcyAoalF1ZXJ5ICMxMTE1Mylcblx0XHRpZiAoIHR5cGVvZiBlbGVtLnRleHRDb250ZW50ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0udGV4dENvbnRlbnQ7XG5cdFx0fSBlbHNlIHtcblx0XHRcdC8vIFRyYXZlcnNlIGl0cyBjaGlsZHJlblxuXHRcdFx0Zm9yICggZWxlbSA9IGVsZW0uZmlyc3RDaGlsZDsgZWxlbTsgZWxlbSA9IGVsZW0ubmV4dFNpYmxpbmcgKSB7XG5cdFx0XHRcdHJldCArPSBnZXRUZXh0KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9IGVsc2UgaWYgKCBub2RlVHlwZSA9PT0gMyB8fCBub2RlVHlwZSA9PT0gNCApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVmFsdWU7XG5cdH1cblx0Ly8gRG8gbm90IGluY2x1ZGUgY29tbWVudCBvciBwcm9jZXNzaW5nIGluc3RydWN0aW9uIG5vZGVzXG5cblx0cmV0dXJuIHJldDtcbn07XG5cbkV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzID0ge1xuXG5cdC8vIENhbiBiZSBhZGp1c3RlZCBieSB0aGUgdXNlclxuXHRjYWNoZUxlbmd0aDogNTAsXG5cblx0Y3JlYXRlUHNldWRvOiBtYXJrRnVuY3Rpb24sXG5cblx0bWF0Y2g6IG1hdGNoRXhwcixcblxuXHRhdHRySGFuZGxlOiB7fSxcblxuXHRmaW5kOiB7fSxcblxuXHRyZWxhdGl2ZToge1xuXHRcdFwiPlwiOiB7IGRpcjogXCJwYXJlbnROb2RlXCIsIGZpcnN0OiB0cnVlIH0sXG5cdFx0XCIgXCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiB9LFxuXHRcdFwiK1wiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIn5cIjogeyBkaXI6IFwicHJldmlvdXNTaWJsaW5nXCIgfVxuXHR9LFxuXG5cdHByZUZpbHRlcjoge1xuXHRcdFwiQVRUUlwiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdC8vIE1vdmUgdGhlIGdpdmVuIHZhbHVlIHRvIG1hdGNoWzNdIHdoZXRoZXIgcXVvdGVkIG9yIHVucXVvdGVkXG5cdFx0XHRtYXRjaFszXSA9ICggbWF0Y2hbM10gfHwgbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIiApLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cblx0XHRcdGlmICggbWF0Y2hbMl0gPT09IFwifj1cIiApIHtcblx0XHRcdFx0bWF0Y2hbM10gPSBcIiBcIiArIG1hdGNoWzNdICsgXCIgXCI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgNCApO1xuXHRcdH0sXG5cblx0XHRcIkNISUxEXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdC8qIG1hdGNoZXMgZnJvbSBtYXRjaEV4cHJbXCJDSElMRFwiXVxuXHRcdFx0XHQxIHR5cGUgKG9ubHl8bnRofC4uLilcblx0XHRcdFx0MiB3aGF0IChjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHQzIGFyZ3VtZW50IChldmVufG9kZHxcXGQqfFxcZCpuKFsrLV1cXGQrKT98Li4uKVxuXHRcdFx0XHQ0IHhuLWNvbXBvbmVudCBvZiB4bit5IGFyZ3VtZW50IChbKy1dP1xcZCpufClcblx0XHRcdFx0NSBzaWduIG9mIHhuLWNvbXBvbmVudFxuXHRcdFx0XHQ2IHggb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDcgc2lnbiBvZiB5LWNvbXBvbmVudFxuXHRcdFx0XHQ4IHkgb2YgeS1jb21wb25lbnRcblx0XHRcdCovXG5cdFx0XHRtYXRjaFsxXSA9IG1hdGNoWzFdLnRvTG93ZXJDYXNlKCk7XG5cblx0XHRcdGlmICggbWF0Y2hbMV0uc2xpY2UoIDAsIDMgKSA9PT0gXCJudGhcIiApIHtcblx0XHRcdFx0Ly8gbnRoLSogcmVxdWlyZXMgYXJndW1lbnRcblx0XHRcdFx0aWYgKCAhbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBtYXRjaFswXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gbnVtZXJpYyB4IGFuZCB5IHBhcmFtZXRlcnMgZm9yIEV4cHIuZmlsdGVyLkNISUxEXG5cdFx0XHRcdC8vIHJlbWVtYmVyIHRoYXQgZmFsc2UvdHJ1ZSBjYXN0IHJlc3BlY3RpdmVseSB0byAwLzFcblx0XHRcdFx0bWF0Y2hbNF0gPSArKCBtYXRjaFs0XSA/IG1hdGNoWzVdICsgKG1hdGNoWzZdIHx8IDEpIDogMiAqICggbWF0Y2hbM10gPT09IFwiZXZlblwiIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICkgKTtcblx0XHRcdFx0bWF0Y2hbNV0gPSArKCAoIG1hdGNoWzddICsgbWF0Y2hbOF0gKSB8fCBtYXRjaFszXSA9PT0gXCJvZGRcIiApO1xuXG5cdFx0XHQvLyBvdGhlciB0eXBlcyBwcm9oaWJpdCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBtYXRjaDtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0dmFyIGV4Y2Vzcyxcblx0XHRcdFx0dW5xdW90ZWQgPSAhbWF0Y2hbNl0gJiYgbWF0Y2hbMl07XG5cblx0XHRcdGlmICggbWF0Y2hFeHByW1wiQ0hJTERcIl0udGVzdCggbWF0Y2hbMF0gKSApIHtcblx0XHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEFjY2VwdCBxdW90ZWQgYXJndW1lbnRzIGFzLWlzXG5cdFx0XHRpZiAoIG1hdGNoWzNdICkge1xuXHRcdFx0XHRtYXRjaFsyXSA9IG1hdGNoWzRdIHx8IG1hdGNoWzVdIHx8IFwiXCI7XG5cblx0XHRcdC8vIFN0cmlwIGV4Y2VzcyBjaGFyYWN0ZXJzIGZyb20gdW5xdW90ZWQgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCB1bnF1b3RlZCAmJiBycHNldWRvLnRlc3QoIHVucXVvdGVkICkgJiZcblx0XHRcdFx0Ly8gR2V0IGV4Y2VzcyBmcm9tIHRva2VuaXplIChyZWN1cnNpdmVseSlcblx0XHRcdFx0KGV4Y2VzcyA9IHRva2VuaXplKCB1bnF1b3RlZCwgdHJ1ZSApKSAmJlxuXHRcdFx0XHQvLyBhZHZhbmNlIHRvIHRoZSBuZXh0IGNsb3NpbmcgcGFyZW50aGVzaXNcblx0XHRcdFx0KGV4Y2VzcyA9IHVucXVvdGVkLmluZGV4T2YoIFwiKVwiLCB1bnF1b3RlZC5sZW5ndGggLSBleGNlc3MgKSAtIHVucXVvdGVkLmxlbmd0aCkgKSB7XG5cblx0XHRcdFx0Ly8gZXhjZXNzIGlzIGEgbmVnYXRpdmUgaW5kZXhcblx0XHRcdFx0bWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHRcdG1hdGNoWzJdID0gdW5xdW90ZWQuc2xpY2UoIDAsIGV4Y2VzcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXR1cm4gb25seSBjYXB0dXJlcyBuZWVkZWQgYnkgdGhlIHBzZXVkbyBmaWx0ZXIgbWV0aG9kICh0eXBlIGFuZCBhcmd1bWVudClcblx0XHRcdHJldHVybiBtYXRjaC5zbGljZSggMCwgMyApO1xuXHRcdH1cblx0fSxcblxuXHRmaWx0ZXI6IHtcblxuXHRcdFwiVEFHXCI6IGZ1bmN0aW9uKCBub2RlTmFtZVNlbGVjdG9yICkge1xuXHRcdFx0dmFyIG5vZGVOYW1lID0gbm9kZU5hbWVTZWxlY3Rvci5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbm9kZU5hbWVTZWxlY3RvciA9PT0gXCIqXCIgP1xuXHRcdFx0XHRmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0gOlxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5vZGVOYW1lO1xuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIkNMQVNTXCI6IGZ1bmN0aW9uKCBjbGFzc05hbWUgKSB7XG5cdFx0XHR2YXIgcGF0dGVybiA9IGNsYXNzQ2FjaGVbIGNsYXNzTmFtZSArIFwiIFwiIF07XG5cblx0XHRcdHJldHVybiBwYXR0ZXJuIHx8XG5cdFx0XHRcdChwYXR0ZXJuID0gbmV3IFJlZ0V4cCggXCIoXnxcIiArIHdoaXRlc3BhY2UgKyBcIilcIiArIGNsYXNzTmFtZSArIFwiKFwiICsgd2hpdGVzcGFjZSArIFwifCQpXCIgKSkgJiZcblx0XHRcdFx0Y2xhc3NDYWNoZSggY2xhc3NOYW1lLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGF0dGVybi50ZXN0KCB0eXBlb2YgZWxlbS5jbGFzc05hbWUgPT09IFwic3RyaW5nXCIgJiYgZWxlbS5jbGFzc05hbWUgfHwgdHlwZW9mIGVsZW0uZ2V0QXR0cmlidXRlICE9PSBcInVuZGVmaW5lZFwiICYmIGVsZW0uZ2V0QXR0cmlidXRlKFwiY2xhc3NcIikgfHwgXCJcIiApO1xuXHRcdFx0XHR9KTtcblx0XHR9LFxuXG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBuYW1lLCBvcGVyYXRvciwgY2hlY2sgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHZhciByZXN1bHQgPSBTaXp6bGUuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0XHRcdGlmICggcmVzdWx0ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG9wZXJhdG9yID09PSBcIiE9XCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCAhb3BlcmF0b3IgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXN1bHQgKz0gXCJcIjtcblxuXHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiPVwiID8gcmVzdWx0ID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiIT1cIiA/IHJlc3VsdCAhPT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIl49XCIgPyBjaGVjayAmJiByZXN1bHQuaW5kZXhPZiggY2hlY2sgKSA9PT0gMCA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiKj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIiQ9XCIgPyBjaGVjayAmJiByZXN1bHQuc2xpY2UoIC1jaGVjay5sZW5ndGggKSA9PT0gY2hlY2sgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcIn49XCIgPyAoIFwiIFwiICsgcmVzdWx0LnJlcGxhY2UoIHJ3aGl0ZXNwYWNlLCBcIiBcIiApICsgXCIgXCIgKS5pbmRleE9mKCBjaGVjayApID4gLTEgOlxuXHRcdFx0XHRcdG9wZXJhdG9yID09PSBcInw9XCIgPyByZXN1bHQgPT09IGNoZWNrIHx8IHJlc3VsdC5zbGljZSggMCwgY2hlY2subGVuZ3RoICsgMSApID09PSBjaGVjayArIFwiLVwiIDpcblx0XHRcdFx0XHRmYWxzZTtcblx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIHR5cGUsIHdoYXQsIGFyZ3VtZW50LCBmaXJzdCwgbGFzdCApIHtcblx0XHRcdHZhciBzaW1wbGUgPSB0eXBlLnNsaWNlKCAwLCAzICkgIT09IFwibnRoXCIsXG5cdFx0XHRcdGZvcndhcmQgPSB0eXBlLnNsaWNlKCAtNCApICE9PSBcImxhc3RcIixcblx0XHRcdFx0b2ZUeXBlID0gd2hhdCA9PT0gXCJvZi10eXBlXCI7XG5cblx0XHRcdHJldHVybiBmaXJzdCA9PT0gMSAmJiBsYXN0ID09PSAwID9cblxuXHRcdFx0XHQvLyBTaG9ydGN1dCBmb3IgOm50aC0qKG4pXG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiAhIWVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdFx0fSA6XG5cblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgY2FjaGUsIHVuaXF1ZUNhY2hlLCBvdXRlckNhY2hlLCBub2RlLCBub2RlSW5kZXgsIHN0YXJ0LFxuXHRcdFx0XHRcdFx0ZGlyID0gc2ltcGxlICE9PSBmb3J3YXJkID8gXCJuZXh0U2libGluZ1wiIDogXCJwcmV2aW91c1NpYmxpbmdcIixcblx0XHRcdFx0XHRcdHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZSxcblx0XHRcdFx0XHRcdG5hbWUgPSBvZlR5cGUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpLFxuXHRcdFx0XHRcdFx0dXNlQ2FjaGUgPSAheG1sICYmICFvZlR5cGUsXG5cdFx0XHRcdFx0XHRkaWZmID0gZmFsc2U7XG5cblx0XHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblxuXHRcdFx0XHRcdFx0Ly8gOihmaXJzdHxsYXN0fG9ubHkpLShjaGlsZHxvZi10eXBlKVxuXHRcdFx0XHRcdFx0aWYgKCBzaW1wbGUgKSB7XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggZGlyICkge1xuXHRcdFx0XHRcdFx0XHRcdG5vZGUgPSBlbGVtO1xuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSBub2RlWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQvLyBSZXZlcnNlIGRpcmVjdGlvbiBmb3IgOm9ubHktKiAoaWYgd2UgaGF2ZW4ndCB5ZXQgZG9uZSBzbylcblx0XHRcdFx0XHRcdFx0XHRzdGFydCA9IGRpciA9IHR5cGUgPT09IFwib25seVwiICYmICFzdGFydCAmJiBcIm5leHRTaWJsaW5nXCI7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHN0YXJ0ID0gWyBmb3J3YXJkID8gcGFyZW50LmZpcnN0Q2hpbGQgOiBwYXJlbnQubGFzdENoaWxkIF07XG5cblx0XHRcdFx0XHRcdC8vIG5vbi14bWwgOm50aC1jaGlsZCguLi4pIHN0b3JlcyBjYWNoZSBkYXRhIG9uIGBwYXJlbnRgXG5cdFx0XHRcdFx0XHRpZiAoIGZvcndhcmQgJiYgdXNlQ2FjaGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU2VlayBgZWxlbWAgZnJvbSBhIHByZXZpb3VzbHktY2FjaGVkIGluZGV4XG5cblx0XHRcdFx0XHRcdFx0Ly8gLi4uaW4gYSBnemlwLWZyaWVuZGx5IHdheVxuXHRcdFx0XHRcdFx0XHRub2RlID0gcGFyZW50O1xuXHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdGNhY2hlID0gdW5pcXVlQ2FjaGVbIHR5cGUgXSB8fCBbXTtcblx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4ICYmIGNhY2hlWyAyIF07XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBub2RlSW5kZXggJiYgcGFyZW50LmNoaWxkTm9kZXNbIG5vZGVJbmRleCBdO1xuXG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBGYWxsYmFjayB0byBzZWVraW5nIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdChkaWZmID0gbm9kZUluZGV4ID0gMCkgfHwgc3RhcnQucG9wKCkpICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gV2hlbiBmb3VuZCwgY2FjaGUgaW5kZXhlcyBvbiBgcGFyZW50YCBhbmQgYnJlYWtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUubm9kZVR5cGUgPT09IDEgJiYgKytkaWZmICYmIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBub2RlSW5kZXgsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBVc2UgcHJldmlvdXNseS1jYWNoZWQgZWxlbWVudCBpbmRleCBpZiBhdmFpbGFibGVcblx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IG5vZGVbIGV4cGFuZG8gXSB8fCAobm9kZVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPDkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQob3V0ZXJDYWNoZVsgbm9kZS51bmlxdWVJRCBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRcdG5vZGVJbmRleCA9IGNhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgY2FjaGVbIDEgXTtcblx0XHRcdFx0XHRcdFx0XHRkaWZmID0gbm9kZUluZGV4O1xuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0Ly8geG1sIDpudGgtY2hpbGQoLi4uKVxuXHRcdFx0XHRcdFx0XHQvLyBvciA6bnRoLWxhc3QtY2hpbGQoLi4uKSBvciA6bnRoKC1sYXN0KT8tb2YtdHlwZSguLi4pXG5cdFx0XHRcdFx0XHRcdGlmICggZGlmZiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gVXNlIHRoZSBzYW1lIGxvb3AgYXMgYWJvdmUgdG8gc2VlayBgZWxlbWAgZnJvbSB0aGUgc3RhcnRcblx0XHRcdFx0XHRcdFx0XHR3aGlsZSAoIChub2RlID0gKytub2RlSW5kZXggJiYgbm9kZSAmJiBub2RlWyBkaXIgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdGlmICggKCBvZlR5cGUgP1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUgOlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRub2RlLm5vZGVUeXBlID09PSAxICkgJiZcblx0XHRcdFx0XHRcdFx0XHRcdFx0KytkaWZmICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIENhY2hlIHRoZSBpbmRleCBvZiBlYWNoIGVuY291bnRlcmVkIGVsZW1lbnRcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCB1c2VDYWNoZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsgdHlwZSBdID0gWyBkaXJydW5zLCBkaWZmIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIG5vZGUgPT09IGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0Ly8gSW5jb3Jwb3JhdGUgdGhlIG9mZnNldCwgdGhlbiBjaGVjayBhZ2FpbnN0IGN5Y2xlIHNpemVcblx0XHRcdFx0XHRcdGRpZmYgLT0gbGFzdDtcblx0XHRcdFx0XHRcdHJldHVybiBkaWZmID09PSBmaXJzdCB8fCAoIGRpZmYgJSBmaXJzdCA9PT0gMCAmJiBkaWZmIC8gZmlyc3QgPj0gMCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJQU0VVRE9cIjogZnVuY3Rpb24oIHBzZXVkbywgYXJndW1lbnQgKSB7XG5cdFx0XHQvLyBwc2V1ZG8tY2xhc3MgbmFtZXMgYXJlIGNhc2UtaW5zZW5zaXRpdmVcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jcHNldWRvLWNsYXNzZXNcblx0XHRcdC8vIFByaW9yaXRpemUgYnkgY2FzZSBzZW5zaXRpdml0eSBpbiBjYXNlIGN1c3RvbSBwc2V1ZG9zIGFyZSBhZGRlZCB3aXRoIHVwcGVyY2FzZSBsZXR0ZXJzXG5cdFx0XHQvLyBSZW1lbWJlciB0aGF0IHNldEZpbHRlcnMgaW5oZXJpdHMgZnJvbSBwc2V1ZG9zXG5cdFx0XHR2YXIgYXJncyxcblx0XHRcdFx0Zm4gPSBFeHByLnBzZXVkb3NbIHBzZXVkbyBdIHx8IEV4cHIuc2V0RmlsdGVyc1sgcHNldWRvLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBwc2V1ZG86IFwiICsgcHNldWRvICk7XG5cblx0XHRcdC8vIFRoZSB1c2VyIG1heSB1c2UgY3JlYXRlUHNldWRvIHRvIGluZGljYXRlIHRoYXRcblx0XHRcdC8vIGFyZ3VtZW50cyBhcmUgbmVlZGVkIHRvIGNyZWF0ZSB0aGUgZmlsdGVyIGZ1bmN0aW9uXG5cdFx0XHQvLyBqdXN0IGFzIFNpenpsZSBkb2VzXG5cdFx0XHRpZiAoIGZuWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHJldHVybiBmbiggYXJndW1lbnQgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQnV0IG1haW50YWluIHN1cHBvcnQgZm9yIG9sZCBzaWduYXR1cmVzXG5cdFx0XHRpZiAoIGZuLmxlbmd0aCA+IDEgKSB7XG5cdFx0XHRcdGFyZ3MgPSBbIHBzZXVkbywgcHNldWRvLCBcIlwiLCBhcmd1bWVudCBdO1xuXHRcdFx0XHRyZXR1cm4gRXhwci5zZXRGaWx0ZXJzLmhhc093blByb3BlcnR5KCBwc2V1ZG8udG9Mb3dlckNhc2UoKSApID9cblx0XHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMgKSB7XG5cdFx0XHRcdFx0XHR2YXIgaWR4LFxuXHRcdFx0XHRcdFx0XHRtYXRjaGVkID0gZm4oIHNlZWQsIGFyZ3VtZW50ICksXG5cdFx0XHRcdFx0XHRcdGkgPSBtYXRjaGVkLmxlbmd0aDtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZHggPSBpbmRleE9mKCBzZWVkLCBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHRcdHNlZWRbIGlkeCBdID0gISggbWF0Y2hlc1sgaWR4IF0gPSBtYXRjaGVkW2ldICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSkgOlxuXHRcdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZuKCBlbGVtLCAwLCBhcmdzICk7XG5cdFx0XHRcdFx0fTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGZuO1xuXHRcdH1cblx0fSxcblxuXHRwc2V1ZG9zOiB7XG5cdFx0Ly8gUG90ZW50aWFsbHkgY29tcGxleCBwc2V1ZG9zXG5cdFx0XCJub3RcIjogbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRcdC8vIFRyaW0gdGhlIHNlbGVjdG9yIHBhc3NlZCB0byBjb21waWxlXG5cdFx0XHQvLyB0byBhdm9pZCB0cmVhdGluZyBsZWFkaW5nIGFuZCB0cmFpbGluZ1xuXHRcdFx0Ly8gc3BhY2VzIGFzIGNvbWJpbmF0b3JzXG5cdFx0XHR2YXIgaW5wdXQgPSBbXSxcblx0XHRcdFx0cmVzdWx0cyA9IFtdLFxuXHRcdFx0XHRtYXRjaGVyID0gY29tcGlsZSggc2VsZWN0b3IucmVwbGFjZSggcnRyaW0sIFwiJDFcIiApICk7XG5cblx0XHRcdHJldHVybiBtYXRjaGVyWyBleHBhbmRvIF0gP1xuXHRcdFx0XHRtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIG1hdGNoZXMsIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0XHRcdHVubWF0Y2hlZCA9IG1hdGNoZXIoIHNlZWQsIG51bGwsIHhtbCwgW10gKSxcblx0XHRcdFx0XHRcdGkgPSBzZWVkLmxlbmd0aDtcblxuXHRcdFx0XHRcdC8vIE1hdGNoIGVsZW1lbnRzIHVubWF0Y2hlZCBieSBgbWF0Y2hlcmBcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRzZWVkW2ldID0gIShtYXRjaGVzW2ldID0gZWxlbSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBlbGVtO1xuXHRcdFx0XHRcdG1hdGNoZXIoIGlucHV0LCBudWxsLCB4bWwsIHJlc3VsdHMgKTtcblx0XHRcdFx0XHQvLyBEb24ndCBrZWVwIHRoZSBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0XHRcdGlucHV0WzBdID0gbnVsbDtcblx0XHRcdFx0XHRyZXR1cm4gIXJlc3VsdHMucG9wKCk7XG5cdFx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImhhc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gU2l6emxlKCBzZWxlY3RvciwgZWxlbSApLmxlbmd0aCA+IDA7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0XCJjb250YWluc1wiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHRleHQgKSB7XG5cdFx0XHR0ZXh0ID0gdGV4dC5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLnRleHRDb250ZW50IHx8IGdldFRleHQoIGVsZW0gKSApLmluZGV4T2YoIHRleHQgKSA+IC0xO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIFwiV2hldGhlciBhbiBlbGVtZW50IGlzIHJlcHJlc2VudGVkIGJ5IGEgOmxhbmcoKSBzZWxlY3RvclxuXHRcdC8vIGlzIGJhc2VkIHNvbGVseSBvbiB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlXG5cdFx0Ly8gYmVpbmcgZXF1YWwgdG8gdGhlIGlkZW50aWZpZXIgQyxcblx0XHQvLyBvciBiZWdpbm5pbmcgd2l0aCB0aGUgaWRlbnRpZmllciBDIGltbWVkaWF0ZWx5IGZvbGxvd2VkIGJ5IFwiLVwiLlxuXHRcdC8vIFRoZSBtYXRjaGluZyBvZiBDIGFnYWluc3QgdGhlIGVsZW1lbnQncyBsYW5ndWFnZSB2YWx1ZSBpcyBwZXJmb3JtZWQgY2FzZS1pbnNlbnNpdGl2ZWx5LlxuXHRcdC8vIFRoZSBpZGVudGlmaWVyIEMgZG9lcyBub3QgaGF2ZSB0byBiZSBhIHZhbGlkIGxhbmd1YWdlIG5hbWUuXCJcblx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2xhbmctcHNldWRvXG5cdFx0XCJsYW5nXCI6IG1hcmtGdW5jdGlvbiggZnVuY3Rpb24oIGxhbmcgKSB7XG5cdFx0XHQvLyBsYW5nIHZhbHVlIG11c3QgYmUgYSB2YWxpZCBpZGVudGlmaWVyXG5cdFx0XHRpZiAoICFyaWRlbnRpZmllci50ZXN0KGxhbmcgfHwgXCJcIikgKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggXCJ1bnN1cHBvcnRlZCBsYW5nOiBcIiArIGxhbmcgKTtcblx0XHRcdH1cblx0XHRcdGxhbmcgPSBsYW5nLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIGVsZW1MYW5nO1xuXHRcdFx0XHRkbyB7XG5cdFx0XHRcdFx0aWYgKCAoZWxlbUxhbmcgPSBkb2N1bWVudElzSFRNTCA/XG5cdFx0XHRcdFx0XHRlbGVtLmxhbmcgOlxuXHRcdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGUoXCJ4bWw6bGFuZ1wiKSB8fCBlbGVtLmdldEF0dHJpYnV0ZShcImxhbmdcIikpICkge1xuXG5cdFx0XHRcdFx0XHRlbGVtTGFuZyA9IGVsZW1MYW5nLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbUxhbmcgPT09IGxhbmcgfHwgZWxlbUxhbmcuaW5kZXhPZiggbGFuZyArIFwiLVwiICkgPT09IDA7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IHdoaWxlICggKGVsZW0gPSBlbGVtLnBhcmVudE5vZGUpICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdC8vIE1pc2NlbGxhbmVvdXNcblx0XHRcInRhcmdldFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBoYXNoID0gd2luZG93LmxvY2F0aW9uICYmIHdpbmRvdy5sb2NhdGlvbi5oYXNoO1xuXHRcdFx0cmV0dXJuIGhhc2ggJiYgaGFzaC5zbGljZSggMSApID09PSBlbGVtLmlkO1xuXHRcdH0sXG5cblx0XHRcInJvb3RcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gZG9jRWxlbTtcblx0XHR9LFxuXG5cdFx0XCJmb2N1c1wiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2N1bWVudC5hY3RpdmVFbGVtZW50ICYmICghZG9jdW1lbnQuaGFzRm9jdXMgfHwgZG9jdW1lbnQuaGFzRm9jdXMoKSkgJiYgISEoZWxlbS50eXBlIHx8IGVsZW0uaHJlZiB8fCB+ZWxlbS50YWJJbmRleCk7XG5cdFx0fSxcblxuXHRcdC8vIEJvb2xlYW4gcHJvcGVydGllc1xuXHRcdFwiZW5hYmxlZFwiOiBjcmVhdGVEaXNhYmxlZFBzZXVkbyggZmFsc2UgKSxcblx0XHRcImRpc2FibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCB0cnVlICksXG5cblx0XHRcImNoZWNrZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBJbiBDU1MzLCA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIGJvdGggY2hlY2tlZCBhbmQgc2VsZWN0ZWQgZWxlbWVudHNcblx0XHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSLzIwMTEvUkVDLWNzczMtc2VsZWN0b3JzLTIwMTEwOTI5LyNjaGVja2VkXG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gKG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgISFlbGVtLmNoZWNrZWQpIHx8IChub2RlTmFtZSA9PT0gXCJvcHRpb25cIiAmJiAhIWVsZW0uc2VsZWN0ZWQpO1xuXHRcdH0sXG5cblx0XHRcInNlbGVjdGVkXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gQWNjZXNzaW5nIHRoaXMgcHJvcGVydHkgbWFrZXMgc2VsZWN0ZWQtYnktZGVmYXVsdFxuXHRcdFx0Ly8gb3B0aW9ucyBpbiBTYWZhcmkgd29yayBwcm9wZXJseVxuXHRcdFx0aWYgKCBlbGVtLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdGVsZW0ucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZWxlbS5zZWxlY3RlZCA9PT0gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0Ly8gQ29udGVudHNcblx0XHRcImVtcHR5XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNlbXB0eS1wc2V1ZG9cblx0XHRcdC8vIDplbXB0eSBpcyBuZWdhdGVkIGJ5IGVsZW1lbnQgKDEpIG9yIGNvbnRlbnQgbm9kZXMgKHRleHQ6IDM7IGNkYXRhOiA0OyBlbnRpdHkgcmVmOiA1KSxcblx0XHRcdC8vICAgYnV0IG5vdCBieSBvdGhlcnMgKGNvbW1lbnQ6IDg7IHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb246IDc7IGV0Yy4pXG5cdFx0XHQvLyBub2RlVHlwZSA8IDYgd29ya3MgYmVjYXVzZSBhdHRyaWJ1dGVzICgyKSBkbyBub3QgYXBwZWFyIGFzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlIDwgNiApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRcInBhcmVudFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAhRXhwci5wc2V1ZG9zW1wiZW1wdHlcIl0oIGVsZW0gKTtcblx0XHR9LFxuXG5cdFx0Ly8gRWxlbWVudC9pbnB1dCB0eXBlc1xuXHRcdFwiaGVhZGVyXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJoZWFkZXIudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImlucHV0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIHJpbnB1dHMudGVzdCggZWxlbS5ub2RlTmFtZSApO1xuXHRcdH0sXG5cblx0XHRcImJ1dHRvblwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHZhciBuYW1lID0gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IFwiYnV0dG9uXCIgfHwgbmFtZSA9PT0gXCJidXR0b25cIjtcblx0XHR9LFxuXG5cdFx0XCJ0ZXh0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGF0dHI7XG5cdFx0XHRyZXR1cm4gZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgJiZcblx0XHRcdFx0ZWxlbS50eXBlID09PSBcInRleHRcIiAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFPDhcblx0XHRcdFx0Ly8gTmV3IEhUTUw1IGF0dHJpYnV0ZSB2YWx1ZXMgKGUuZy4sIFwic2VhcmNoXCIpIGFwcGVhciB3aXRoIGVsZW0udHlwZSA9PT0gXCJ0ZXh0XCJcblx0XHRcdFx0KCAoYXR0ciA9IGVsZW0uZ2V0QXR0cmlidXRlKFwidHlwZVwiKSkgPT0gbnVsbCB8fCBhdHRyLnRvTG93ZXJDYXNlKCkgPT09IFwidGV4dFwiICk7XG5cdFx0fSxcblxuXHRcdC8vIFBvc2l0aW9uLWluLWNvbGxlY3Rpb25cblx0XHRcImZpcnN0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXR1cm4gWyAwIF07XG5cdFx0fSksXG5cblx0XHRcImxhc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gWyBsZW5ndGggLSAxIF07XG5cdFx0fSksXG5cblx0XHRcImVxXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHJldHVybiBbIGFyZ3VtZW50IDwgMCA/IGFyZ3VtZW50ICsgbGVuZ3RoIDogYXJndW1lbnQgXTtcblx0XHR9KSxcblxuXHRcdFwiZXZlblwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSArPSAyICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwib2RkXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAxO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJsdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCwgYXJndW1lbnQgKSB7XG5cdFx0XHR2YXIgaSA9IGFyZ3VtZW50IDwgMCA/XG5cdFx0XHRcdGFyZ3VtZW50ICsgbGVuZ3RoIDpcblx0XHRcdFx0YXJndW1lbnQgPiBsZW5ndGggP1xuXHRcdFx0XHRcdGxlbmd0aCA6XG5cdFx0XHRcdFx0YXJndW1lbnQ7XG5cdFx0XHRmb3IgKCA7IC0taSA+PSAwOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImd0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgKytpIDwgbGVuZ3RoOyApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSlcblx0fVxufTtcblxuRXhwci5wc2V1ZG9zW1wibnRoXCJdID0gRXhwci5wc2V1ZG9zW1wiZXFcIl07XG5cbi8vIEFkZCBidXR0b24vaW5wdXQgdHlwZSBwc2V1ZG9zXG5mb3IgKCBpIGluIHsgcmFkaW86IHRydWUsIGNoZWNrYm94OiB0cnVlLCBmaWxlOiB0cnVlLCBwYXNzd29yZDogdHJ1ZSwgaW1hZ2U6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVJbnB1dFBzZXVkbyggaSApO1xufVxuZm9yICggaSBpbiB7IHN1Ym1pdDogdHJ1ZSwgcmVzZXQ6IHRydWUgfSApIHtcblx0RXhwci5wc2V1ZG9zWyBpIF0gPSBjcmVhdGVCdXR0b25Qc2V1ZG8oIGkgKTtcbn1cblxuLy8gRWFzeSBBUEkgZm9yIGNyZWF0aW5nIG5ldyBzZXRGaWx0ZXJzXG5mdW5jdGlvbiBzZXRGaWx0ZXJzKCkge31cbnNldEZpbHRlcnMucHJvdG90eXBlID0gRXhwci5maWx0ZXJzID0gRXhwci5wc2V1ZG9zO1xuRXhwci5zZXRGaWx0ZXJzID0gbmV3IHNldEZpbHRlcnMoKTtcblxudG9rZW5pemUgPSBTaXp6bGUudG9rZW5pemUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIHBhcnNlT25seSApIHtcblx0dmFyIG1hdGNoZWQsIG1hdGNoLCB0b2tlbnMsIHR5cGUsXG5cdFx0c29GYXIsIGdyb3VwcywgcHJlRmlsdGVycyxcblx0XHRjYWNoZWQgPSB0b2tlbkNhY2hlWyBzZWxlY3RvciArIFwiIFwiIF07XG5cblx0aWYgKCBjYWNoZWQgKSB7XG5cdFx0cmV0dXJuIHBhcnNlT25seSA/IDAgOiBjYWNoZWQuc2xpY2UoIDAgKTtcblx0fVxuXG5cdHNvRmFyID0gc2VsZWN0b3I7XG5cdGdyb3VwcyA9IFtdO1xuXHRwcmVGaWx0ZXJzID0gRXhwci5wcmVGaWx0ZXI7XG5cblx0d2hpbGUgKCBzb0ZhciApIHtcblxuXHRcdC8vIENvbW1hIGFuZCBmaXJzdCBydW5cblx0XHRpZiAoICFtYXRjaGVkIHx8IChtYXRjaCA9IHJjb21tYS5leGVjKCBzb0ZhciApKSApIHtcblx0XHRcdGlmICggbWF0Y2ggKSB7XG5cdFx0XHRcdC8vIERvbid0IGNvbnN1bWUgdHJhaWxpbmcgY29tbWFzIGFzIHZhbGlkXG5cdFx0XHRcdHNvRmFyID0gc29GYXIuc2xpY2UoIG1hdGNoWzBdLmxlbmd0aCApIHx8IHNvRmFyO1xuXHRcdFx0fVxuXHRcdFx0Z3JvdXBzLnB1c2goICh0b2tlbnMgPSBbXSkgKTtcblx0XHR9XG5cblx0XHRtYXRjaGVkID0gZmFsc2U7XG5cblx0XHQvLyBDb21iaW5hdG9yc1xuXHRcdGlmICggKG1hdGNoID0gcmNvbWJpbmF0b3JzLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdHZhbHVlOiBtYXRjaGVkLFxuXHRcdFx0XHQvLyBDYXN0IGRlc2NlbmRhbnQgY29tYmluYXRvcnMgdG8gc3BhY2Vcblx0XHRcdFx0dHlwZTogbWF0Y2hbMF0ucmVwbGFjZSggcnRyaW0sIFwiIFwiIClcblx0XHRcdH0pO1xuXHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHR9XG5cblx0XHQvLyBGaWx0ZXJzXG5cdFx0Zm9yICggdHlwZSBpbiBFeHByLmZpbHRlciApIHtcblx0XHRcdGlmICggKG1hdGNoID0gbWF0Y2hFeHByWyB0eXBlIF0uZXhlYyggc29GYXIgKSkgJiYgKCFwcmVGaWx0ZXJzWyB0eXBlIF0gfHxcblx0XHRcdFx0KG1hdGNoID0gcHJlRmlsdGVyc1sgdHlwZSBdKCBtYXRjaCApKSkgKSB7XG5cdFx0XHRcdG1hdGNoZWQgPSBtYXRjaC5zaGlmdCgpO1xuXHRcdFx0XHR0b2tlbnMucHVzaCh7XG5cdFx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdFx0dHlwZTogdHlwZSxcblx0XHRcdFx0XHRtYXRjaGVzOiBtYXRjaFxuXHRcdFx0XHR9KTtcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hlZC5sZW5ndGggKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoICFtYXRjaGVkICkge1xuXHRcdFx0YnJlYWs7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBsZW5ndGggb2YgdGhlIGludmFsaWQgZXhjZXNzXG5cdC8vIGlmIHdlJ3JlIGp1c3QgcGFyc2luZ1xuXHQvLyBPdGhlcndpc2UsIHRocm93IGFuIGVycm9yIG9yIHJldHVybiB0b2tlbnNcblx0cmV0dXJuIHBhcnNlT25seSA/XG5cdFx0c29GYXIubGVuZ3RoIDpcblx0XHRzb0ZhciA/XG5cdFx0XHRTaXp6bGUuZXJyb3IoIHNlbGVjdG9yICkgOlxuXHRcdFx0Ly8gQ2FjaGUgdGhlIHRva2Vuc1xuXHRcdFx0dG9rZW5DYWNoZSggc2VsZWN0b3IsIGdyb3VwcyApLnNsaWNlKCAwICk7XG59O1xuXG5mdW5jdGlvbiB0b1NlbGVjdG9yKCB0b2tlbnMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSB0b2tlbnMubGVuZ3RoLFxuXHRcdHNlbGVjdG9yID0gXCJcIjtcblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0c2VsZWN0b3IgKz0gdG9rZW5zW2ldLnZhbHVlO1xuXHR9XG5cdHJldHVybiBzZWxlY3Rvcjtcbn1cblxuZnVuY3Rpb24gYWRkQ29tYmluYXRvciggbWF0Y2hlciwgY29tYmluYXRvciwgYmFzZSApIHtcblx0dmFyIGRpciA9IGNvbWJpbmF0b3IuZGlyLFxuXHRcdHNraXAgPSBjb21iaW5hdG9yLm5leHQsXG5cdFx0a2V5ID0gc2tpcCB8fCBkaXIsXG5cdFx0Y2hlY2tOb25FbGVtZW50cyA9IGJhc2UgJiYga2V5ID09PSBcInBhcmVudE5vZGVcIixcblx0XHRkb25lTmFtZSA9IGRvbmUrKztcblxuXHRyZXR1cm4gY29tYmluYXRvci5maXJzdCA/XG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBjbG9zZXN0IGFuY2VzdG9yL3ByZWNlZGluZyBlbGVtZW50XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdHJldHVybiBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0gOlxuXG5cdFx0Ly8gQ2hlY2sgYWdhaW5zdCBhbGwgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRzXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBvbGRDYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsXG5cdFx0XHRcdG5ld0NhY2hlID0gWyBkaXJydW5zLCBkb25lTmFtZSBdO1xuXG5cdFx0XHQvLyBXZSBjYW4ndCBzZXQgYXJiaXRyYXJ5IGRhdGEgb24gWE1MIG5vZGVzLCBzbyB0aGV5IGRvbid0IGJlbmVmaXQgZnJvbSBjb21iaW5hdG9yIGNhY2hpbmdcblx0XHRcdGlmICggeG1sICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbVsgZGlyIF0pICkge1xuXHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBjaGVja05vbkVsZW1lbnRzICkge1xuXHRcdFx0XHRcdFx0b3V0ZXJDYWNoZSA9IGVsZW1bIGV4cGFuZG8gXSB8fCAoZWxlbVsgZXhwYW5kbyBdID0ge30pO1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlID0gb3V0ZXJDYWNoZVsgZWxlbS51bmlxdWVJRCBdIHx8IChvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdGlmICggc2tpcCAmJiBza2lwID09PSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgKSB7XG5cdFx0XHRcdFx0XHRcdGVsZW0gPSBlbGVtWyBkaXIgXSB8fCBlbGVtO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmICggKG9sZENhY2hlID0gdW5pcXVlQ2FjaGVbIGtleSBdKSAmJlxuXHRcdFx0XHRcdFx0XHRvbGRDYWNoZVsgMCBdID09PSBkaXJydW5zICYmIG9sZENhY2hlWyAxIF0gPT09IGRvbmVOYW1lICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFzc2lnbiB0byBuZXdDYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHJldHVybiAobmV3Q2FjaGVbIDIgXSA9IG9sZENhY2hlWyAyIF0pO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmV1c2UgbmV3Y2FjaGUgc28gcmVzdWx0cyBiYWNrLXByb3BhZ2F0ZSB0byBwcmV2aW91cyBlbGVtZW50c1xuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZVsga2V5IF0gPSBuZXdDYWNoZTtcblxuXHRcdFx0XHRcdFx0XHQvLyBBIG1hdGNoIG1lYW5zIHdlJ3JlIGRvbmU7IGEgZmFpbCBtZWFucyB3ZSBoYXZlIHRvIGtlZXAgY2hlY2tpbmdcblx0XHRcdFx0XHRcdFx0aWYgKCAobmV3Q2FjaGVbIDIgXSA9IG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApKSApIHtcblx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH07XG59XG5cbmZ1bmN0aW9uIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApIHtcblx0cmV0dXJuIG1hdGNoZXJzLmxlbmd0aCA+IDEgP1xuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb250ZXh0LCB4bWwgKSB7XG5cdFx0XHR2YXIgaSA9IG1hdGNoZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoICFtYXRjaGVyc1tpXSggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9IDpcblx0XHRtYXRjaGVyc1swXTtcbn1cblxuZnVuY3Rpb24gbXVsdGlwbGVDb250ZXh0cyggc2VsZWN0b3IsIGNvbnRleHRzLCByZXN1bHRzICkge1xuXHR2YXIgaSA9IDAsXG5cdFx0bGVuID0gY29udGV4dHMubGVuZ3RoO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRTaXp6bGUoIHNlbGVjdG9yLCBjb250ZXh0c1tpXSwgcmVzdWx0cyApO1xuXHR9XG5cdHJldHVybiByZXN1bHRzO1xufVxuXG5mdW5jdGlvbiBjb25kZW5zZSggdW5tYXRjaGVkLCBtYXAsIGZpbHRlciwgY29udGV4dCwgeG1sICkge1xuXHR2YXIgZWxlbSxcblx0XHRuZXdVbm1hdGNoZWQgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsZW4gPSB1bm1hdGNoZWQubGVuZ3RoLFxuXHRcdG1hcHBlZCA9IG1hcCAhPSBudWxsO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKGVsZW0gPSB1bm1hdGNoZWRbaV0pICkge1xuXHRcdFx0aWYgKCAhZmlsdGVyIHx8IGZpbHRlciggZWxlbSwgY29udGV4dCwgeG1sICkgKSB7XG5cdFx0XHRcdG5ld1VubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdGlmICggbWFwcGVkICkge1xuXHRcdFx0XHRcdG1hcC5wdXNoKCBpICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbmV3VW5tYXRjaGVkO1xufVxuXG5mdW5jdGlvbiBzZXRNYXRjaGVyKCBwcmVGaWx0ZXIsIHNlbGVjdG9yLCBtYXRjaGVyLCBwb3N0RmlsdGVyLCBwb3N0RmluZGVyLCBwb3N0U2VsZWN0b3IgKSB7XG5cdGlmICggcG9zdEZpbHRlciAmJiAhcG9zdEZpbHRlclsgZXhwYW5kbyBdICkge1xuXHRcdHBvc3RGaWx0ZXIgPSBzZXRNYXRjaGVyKCBwb3N0RmlsdGVyICk7XG5cdH1cblx0aWYgKCBwb3N0RmluZGVyICYmICFwb3N0RmluZGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbmRlciA9IHNldE1hdGNoZXIoIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApO1xuXHR9XG5cdHJldHVybiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlZWQsIHJlc3VsdHMsIGNvbnRleHQsIHhtbCApIHtcblx0XHR2YXIgdGVtcCwgaSwgZWxlbSxcblx0XHRcdHByZU1hcCA9IFtdLFxuXHRcdFx0cG9zdE1hcCA9IFtdLFxuXHRcdFx0cHJlZXhpc3RpbmcgPSByZXN1bHRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gR2V0IGluaXRpYWwgZWxlbWVudHMgZnJvbSBzZWVkIG9yIGNvbnRleHRcblx0XHRcdGVsZW1zID0gc2VlZCB8fCBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciB8fCBcIipcIiwgY29udGV4dC5ub2RlVHlwZSA/IFsgY29udGV4dCBdIDogY29udGV4dCwgW10gKSxcblxuXHRcdFx0Ly8gUHJlZmlsdGVyIHRvIGdldCBtYXRjaGVyIGlucHV0LCBwcmVzZXJ2aW5nIGEgbWFwIGZvciBzZWVkLXJlc3VsdHMgc3luY2hyb25pemF0aW9uXG5cdFx0XHRtYXRjaGVySW4gPSBwcmVGaWx0ZXIgJiYgKCBzZWVkIHx8ICFzZWxlY3RvciApID9cblx0XHRcdFx0Y29uZGVuc2UoIGVsZW1zLCBwcmVNYXAsIHByZUZpbHRlciwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRlbGVtcyxcblxuXHRcdFx0bWF0Y2hlck91dCA9IG1hdGNoZXIgP1xuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGEgcG9zdEZpbmRlciwgb3IgZmlsdGVyZWQgc2VlZCwgb3Igbm9uLXNlZWQgcG9zdEZpbHRlciBvciBwcmVleGlzdGluZyByZXN1bHRzLFxuXHRcdFx0XHRwb3N0RmluZGVyIHx8ICggc2VlZCA/IHByZUZpbHRlciA6IHByZWV4aXN0aW5nIHx8IHBvc3RGaWx0ZXIgKSA/XG5cblx0XHRcdFx0XHQvLyAuLi5pbnRlcm1lZGlhdGUgcHJvY2Vzc2luZyBpcyBuZWNlc3Nhcnlcblx0XHRcdFx0XHRbXSA6XG5cblx0XHRcdFx0XHQvLyAuLi5vdGhlcndpc2UgdXNlIHJlc3VsdHMgZGlyZWN0bHlcblx0XHRcdFx0XHRyZXN1bHRzIDpcblx0XHRcdFx0bWF0Y2hlckluO1xuXG5cdFx0Ly8gRmluZCBwcmltYXJ5IG1hdGNoZXNcblx0XHRpZiAoIG1hdGNoZXIgKSB7XG5cdFx0XHRtYXRjaGVyKCBtYXRjaGVySW4sIG1hdGNoZXJPdXQsIGNvbnRleHQsIHhtbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHBvc3RGaWx0ZXJcblx0XHRpZiAoIHBvc3RGaWx0ZXIgKSB7XG5cdFx0XHR0ZW1wID0gY29uZGVuc2UoIG1hdGNoZXJPdXQsIHBvc3RNYXAgKTtcblx0XHRcdHBvc3RGaWx0ZXIoIHRlbXAsIFtdLCBjb250ZXh0LCB4bWwgKTtcblxuXHRcdFx0Ly8gVW4tbWF0Y2ggZmFpbGluZyBlbGVtZW50cyBieSBtb3ZpbmcgdGhlbSBiYWNrIHRvIG1hdGNoZXJJblxuXHRcdFx0aSA9IHRlbXAubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggKGVsZW0gPSB0ZW1wW2ldKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyT3V0WyBwb3N0TWFwW2ldIF0gPSAhKG1hdGNoZXJJblsgcG9zdE1hcFtpXSBdID0gZWxlbSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgfHwgcHJlRmlsdGVyICkge1xuXHRcdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdFx0Ly8gR2V0IHRoZSBmaW5hbCBtYXRjaGVyT3V0IGJ5IGNvbmRlbnNpbmcgdGhpcyBpbnRlcm1lZGlhdGUgaW50byBwb3N0RmluZGVyIGNvbnRleHRzXG5cdFx0XHRcdFx0dGVtcCA9IFtdO1xuXHRcdFx0XHRcdGkgPSBtYXRjaGVyT3V0Lmxlbmd0aDtcblx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSApIHtcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBtYXRjaGVySW4gc2luY2UgZWxlbSBpcyBub3QgeWV0IGEgZmluYWwgbWF0Y2hcblx0XHRcdFx0XHRcdFx0dGVtcC5wdXNoKCAobWF0Y2hlckluW2ldID0gZWxlbSkgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cG9zdEZpbmRlciggbnVsbCwgKG1hdGNoZXJPdXQgPSBbXSksIHRlbXAsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTW92ZSBtYXRjaGVkIGVsZW1lbnRzIGZyb20gc2VlZCB0byByZXN1bHRzIHRvIGtlZXAgdGhlbSBzeW5jaHJvbml6ZWRcblx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gbWF0Y2hlck91dFtpXSkgJiZcblx0XHRcdFx0XHRcdCh0ZW1wID0gcG9zdEZpbmRlciA/IGluZGV4T2YoIHNlZWQsIGVsZW0gKSA6IHByZU1hcFtpXSkgPiAtMSApIHtcblxuXHRcdFx0XHRcdFx0c2VlZFt0ZW1wXSA9ICEocmVzdWx0c1t0ZW1wXSA9IGVsZW0pO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gQWRkIGVsZW1lbnRzIHRvIHJlc3VsdHMsIHRocm91Z2ggcG9zdEZpbmRlciBpZiBkZWZpbmVkXG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXJPdXQgPSBjb25kZW5zZShcblx0XHRcdFx0bWF0Y2hlck91dCA9PT0gcmVzdWx0cyA/XG5cdFx0XHRcdFx0bWF0Y2hlck91dC5zcGxpY2UoIHByZWV4aXN0aW5nLCBtYXRjaGVyT3V0Lmxlbmd0aCApIDpcblx0XHRcdFx0XHRtYXRjaGVyT3V0XG5cdFx0XHQpO1xuXHRcdFx0aWYgKCBwb3N0RmluZGVyICkge1xuXHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCByZXN1bHRzLCBtYXRjaGVyT3V0LCB4bWwgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIG1hdGNoZXJPdXQgKTtcblx0XHRcdH1cblx0XHR9XG5cdH0pO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zICkge1xuXHR2YXIgY2hlY2tDb250ZXh0LCBtYXRjaGVyLCBqLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0bGVhZGluZ1JlbGF0aXZlID0gRXhwci5yZWxhdGl2ZVsgdG9rZW5zWzBdLnR5cGUgXSxcblx0XHRpbXBsaWNpdFJlbGF0aXZlID0gbGVhZGluZ1JlbGF0aXZlIHx8IEV4cHIucmVsYXRpdmVbXCIgXCJdLFxuXHRcdGkgPSBsZWFkaW5nUmVsYXRpdmUgPyAxIDogMCxcblxuXHRcdC8vIFRoZSBmb3VuZGF0aW9uYWwgbWF0Y2hlciBlbnN1cmVzIHRoYXQgZWxlbWVudHMgYXJlIHJlYWNoYWJsZSBmcm9tIHRvcC1sZXZlbCBjb250ZXh0KHMpXG5cdFx0bWF0Y2hDb250ZXh0ID0gYWRkQ29tYmluYXRvciggZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gZWxlbSA9PT0gY2hlY2tDb250ZXh0O1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaEFueUNvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBpbmRleE9mKCBjaGVja0NvbnRleHQsIGVsZW0gKSA+IC0xO1xuXHRcdH0sIGltcGxpY2l0UmVsYXRpdmUsIHRydWUgKSxcblx0XHRtYXRjaGVycyA9IFsgZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciByZXQgPSAoICFsZWFkaW5nUmVsYXRpdmUgJiYgKCB4bWwgfHwgY29udGV4dCAhPT0gb3V0ZXJtb3N0Q29udGV4dCApICkgfHwgKFxuXHRcdFx0XHQoY2hlY2tDb250ZXh0ID0gY29udGV4dCkubm9kZVR5cGUgP1xuXHRcdFx0XHRcdG1hdGNoQ29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgOlxuXHRcdFx0XHRcdG1hdGNoQW55Q29udGV4dCggZWxlbSwgY29udGV4dCwgeG1sICkgKTtcblx0XHRcdC8vIEF2b2lkIGhhbmdpbmcgb250byBlbGVtZW50IChpc3N1ZSAjMjk5KVxuXHRcdFx0Y2hlY2tDb250ZXh0ID0gbnVsbDtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fSBdO1xuXG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdGlmICggKG1hdGNoZXIgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbaV0udHlwZSBdKSApIHtcblx0XHRcdG1hdGNoZXJzID0gWyBhZGRDb21iaW5hdG9yKGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLCBtYXRjaGVyKSBdO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRtYXRjaGVyID0gRXhwci5maWx0ZXJbIHRva2Vuc1tpXS50eXBlIF0uYXBwbHkoIG51bGwsIHRva2Vuc1tpXS5tYXRjaGVzICk7XG5cblx0XHRcdC8vIFJldHVybiBzcGVjaWFsIHVwb24gc2VlaW5nIGEgcG9zaXRpb25hbCBtYXRjaGVyXG5cdFx0XHRpZiAoIG1hdGNoZXJbIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0Ly8gRmluZCB0aGUgbmV4dCByZWxhdGl2ZSBvcGVyYXRvciAoaWYgYW55KSBmb3IgcHJvcGVyIGhhbmRsaW5nXG5cdFx0XHRcdGogPSArK2k7XG5cdFx0XHRcdGZvciAoIDsgaiA8IGxlbjsgaisrICkge1xuXHRcdFx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgdG9rZW5zW2pdLnR5cGUgXSApIHtcblx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gc2V0TWF0Y2hlcihcblx0XHRcdFx0XHRpID4gMSAmJiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKSxcblx0XHRcdFx0XHRpID4gMSAmJiB0b1NlbGVjdG9yKFxuXHRcdFx0XHRcdFx0Ly8gSWYgdGhlIHByZWNlZGluZyB0b2tlbiB3YXMgYSBkZXNjZW5kYW50IGNvbWJpbmF0b3IsIGluc2VydCBhbiBpbXBsaWNpdCBhbnktZWxlbWVudCBgKmBcblx0XHRcdFx0XHRcdHRva2Vucy5zbGljZSggMCwgaSAtIDEgKS5jb25jYXQoeyB2YWx1ZTogdG9rZW5zWyBpIC0gMiBdLnR5cGUgPT09IFwiIFwiID8gXCIqXCIgOiBcIlwiIH0pXG5cdFx0XHRcdFx0KS5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksXG5cdFx0XHRcdFx0bWF0Y2hlcixcblx0XHRcdFx0XHRpIDwgaiAmJiBtYXRjaGVyRnJvbVRva2VucyggdG9rZW5zLnNsaWNlKCBpLCBqICkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIG1hdGNoZXJGcm9tVG9rZW5zKCAodG9rZW5zID0gdG9rZW5zLnNsaWNlKCBqICkpICksXG5cdFx0XHRcdFx0aiA8IGxlbiAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlcnMucHVzaCggbWF0Y2hlciApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50TWF0Y2hlciggbWF0Y2hlcnMgKTtcbn1cblxuZnVuY3Rpb24gbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkge1xuXHR2YXIgYnlTZXQgPSBzZXRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdGJ5RWxlbWVudCA9IGVsZW1lbnRNYXRjaGVycy5sZW5ndGggPiAwLFxuXHRcdHN1cGVyTWF0Y2hlciA9IGZ1bmN0aW9uKCBzZWVkLCBjb250ZXh0LCB4bWwsIHJlc3VsdHMsIG91dGVybW9zdCApIHtcblx0XHRcdHZhciBlbGVtLCBqLCBtYXRjaGVyLFxuXHRcdFx0XHRtYXRjaGVkQ291bnQgPSAwLFxuXHRcdFx0XHRpID0gXCIwXCIsXG5cdFx0XHRcdHVubWF0Y2hlZCA9IHNlZWQgJiYgW10sXG5cdFx0XHRcdHNldE1hdGNoZWQgPSBbXSxcblx0XHRcdFx0Y29udGV4dEJhY2t1cCA9IG91dGVybW9zdENvbnRleHQsXG5cdFx0XHRcdC8vIFdlIG11c3QgYWx3YXlzIGhhdmUgZWl0aGVyIHNlZWQgZWxlbWVudHMgb3Igb3V0ZXJtb3N0IGNvbnRleHRcblx0XHRcdFx0ZWxlbXMgPSBzZWVkIHx8IGJ5RWxlbWVudCAmJiBFeHByLmZpbmRbXCJUQUdcIl0oIFwiKlwiLCBvdXRlcm1vc3QgKSxcblx0XHRcdFx0Ly8gVXNlIGludGVnZXIgZGlycnVucyBpZmYgdGhpcyBpcyB0aGUgb3V0ZXJtb3N0IG1hdGNoZXJcblx0XHRcdFx0ZGlycnVuc1VuaXF1ZSA9IChkaXJydW5zICs9IGNvbnRleHRCYWNrdXAgPT0gbnVsbCA/IDEgOiBNYXRoLnJhbmRvbSgpIHx8IDAuMSksXG5cdFx0XHRcdGxlbiA9IGVsZW1zLmxlbmd0aDtcblxuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0ID09PSBkb2N1bWVudCB8fCBjb250ZXh0IHx8IG91dGVybW9zdDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIGVsZW1lbnRzIHBhc3NpbmcgZWxlbWVudE1hdGNoZXJzIGRpcmVjdGx5IHRvIHJlc3VsdHNcblx0XHRcdC8vIFN1cHBvcnQ6IElFPDksIFNhZmFyaVxuXHRcdFx0Ly8gVG9sZXJhdGUgTm9kZUxpc3QgcHJvcGVydGllcyAoSUU6IFwibGVuZ3RoXCI7IFNhZmFyaTogPG51bWJlcj4pIG1hdGNoaW5nIGVsZW1lbnRzIGJ5IGlkXG5cdFx0XHRmb3IgKCA7IGkgIT09IGxlbiAmJiAoZWxlbSA9IGVsZW1zW2ldKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0XHRcdGlmICggYnlFbGVtZW50ICYmIGVsZW0gKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0aWYgKCAhY29udGV4dCAmJiBlbGVtLm93bmVyRG9jdW1lbnQgIT09IGRvY3VtZW50ICkge1xuXHRcdFx0XHRcdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0XHRcdFx0XHRcdHhtbCA9ICFkb2N1bWVudElzSFRNTDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IGVsZW1lbnRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlciggZWxlbSwgY29udGV4dCB8fCBkb2N1bWVudCwgeG1sKSApIHtcblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFRyYWNrIHVubWF0Y2hlZCBlbGVtZW50cyBmb3Igc2V0IGZpbHRlcnNcblx0XHRcdFx0aWYgKCBieVNldCApIHtcblx0XHRcdFx0XHQvLyBUaGV5IHdpbGwgaGF2ZSBnb25lIHRocm91Z2ggYWxsIHBvc3NpYmxlIG1hdGNoZXJzXG5cdFx0XHRcdFx0aWYgKCAoZWxlbSA9ICFtYXRjaGVyICYmIGVsZW0pICkge1xuXHRcdFx0XHRcdFx0bWF0Y2hlZENvdW50LS07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gTGVuZ3RoZW4gdGhlIGFycmF5IGZvciBldmVyeSBlbGVtZW50LCBtYXRjaGVkIG9yIG5vdFxuXHRcdFx0XHRcdGlmICggc2VlZCApIHtcblx0XHRcdFx0XHRcdHVubWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIGBpYCBpcyBub3cgdGhlIGNvdW50IG9mIGVsZW1lbnRzIHZpc2l0ZWQgYWJvdmUsIGFuZCBhZGRpbmcgaXQgdG8gYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIG1ha2VzIHRoZSBsYXR0ZXIgbm9ubmVnYXRpdmUuXG5cdFx0XHRtYXRjaGVkQ291bnQgKz0gaTtcblxuXHRcdFx0Ly8gQXBwbHkgc2V0IGZpbHRlcnMgdG8gdW5tYXRjaGVkIGVsZW1lbnRzXG5cdFx0XHQvLyBOT1RFOiBUaGlzIGNhbiBiZSBza2lwcGVkIGlmIHRoZXJlIGFyZSBubyB1bm1hdGNoZWQgZWxlbWVudHMgKGkuZS4sIGBtYXRjaGVkQ291bnRgXG5cdFx0XHQvLyBlcXVhbHMgYGlgKSwgdW5sZXNzIHdlIGRpZG4ndCB2aXNpdCBfYW55XyBlbGVtZW50cyBpbiB0aGUgYWJvdmUgbG9vcCBiZWNhdXNlIHdlIGhhdmVcblx0XHRcdC8vIG5vIGVsZW1lbnQgbWF0Y2hlcnMgYW5kIG5vIHNlZWQuXG5cdFx0XHQvLyBJbmNyZW1lbnRpbmcgYW4gaW5pdGlhbGx5LXN0cmluZyBcIjBcIiBgaWAgYWxsb3dzIGBpYCB0byByZW1haW4gYSBzdHJpbmcgb25seSBpbiB0aGF0XG5cdFx0XHQvLyBjYXNlLCB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIFwiMDBcIiBgbWF0Y2hlZENvdW50YCB0aGF0IGRpZmZlcnMgZnJvbSBgaWAgYnV0IGlzIGFsc29cblx0XHRcdC8vIG51bWVyaWNhbGx5IHplcm8uXG5cdFx0XHRpZiAoIGJ5U2V0ICYmIGkgIT09IG1hdGNoZWRDb3VudCApIHtcblx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdHdoaWxlICggKG1hdGNoZXIgPSBzZXRNYXRjaGVyc1tqKytdKSApIHtcblx0XHRcdFx0XHRtYXRjaGVyKCB1bm1hdGNoZWQsIHNldE1hdGNoZWQsIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdC8vIFJlaW50ZWdyYXRlIGVsZW1lbnQgbWF0Y2hlcyB0byBlbGltaW5hdGUgdGhlIG5lZWQgZm9yIHNvcnRpbmdcblx0XHRcdFx0XHRpZiAoIG1hdGNoZWRDb3VudCA+IDAgKSB7XG5cdFx0XHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCAhKHVubWF0Y2hlZFtpXSB8fCBzZXRNYXRjaGVkW2ldKSApIHtcblx0XHRcdFx0XHRcdFx0XHRzZXRNYXRjaGVkW2ldID0gcG9wLmNhbGwoIHJlc3VsdHMgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIERpc2NhcmQgaW5kZXggcGxhY2Vob2xkZXIgdmFsdWVzIHRvIGdldCBvbmx5IGFjdHVhbCBtYXRjaGVzXG5cdFx0XHRcdFx0c2V0TWF0Y2hlZCA9IGNvbmRlbnNlKCBzZXRNYXRjaGVkICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBZGQgbWF0Y2hlcyB0byByZXN1bHRzXG5cdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNldE1hdGNoZWQgKTtcblxuXHRcdFx0XHQvLyBTZWVkbGVzcyBzZXQgbWF0Y2hlcyBzdWNjZWVkaW5nIG11bHRpcGxlIHN1Y2Nlc3NmdWwgbWF0Y2hlcnMgc3RpcHVsYXRlIHNvcnRpbmdcblx0XHRcdFx0aWYgKCBvdXRlcm1vc3QgJiYgIXNlZWQgJiYgc2V0TWF0Y2hlZC5sZW5ndGggPiAwICYmXG5cdFx0XHRcdFx0KCBtYXRjaGVkQ291bnQgKyBzZXRNYXRjaGVycy5sZW5ndGggKSA+IDEgKSB7XG5cblx0XHRcdFx0XHRTaXp6bGUudW5pcXVlU29ydCggcmVzdWx0cyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIE92ZXJyaWRlIG1hbmlwdWxhdGlvbiBvZiBnbG9iYWxzIGJ5IG5lc3RlZCBtYXRjaGVyc1xuXHRcdFx0aWYgKCBvdXRlcm1vc3QgKSB7XG5cdFx0XHRcdGRpcnJ1bnMgPSBkaXJydW5zVW5pcXVlO1xuXHRcdFx0XHRvdXRlcm1vc3RDb250ZXh0ID0gY29udGV4dEJhY2t1cDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHVubWF0Y2hlZDtcblx0XHR9O1xuXG5cdHJldHVybiBieVNldCA/XG5cdFx0bWFya0Z1bmN0aW9uKCBzdXBlck1hdGNoZXIgKSA6XG5cdFx0c3VwZXJNYXRjaGVyO1xufVxuXG5jb21waWxlID0gU2l6emxlLmNvbXBpbGUgPSBmdW5jdGlvbiggc2VsZWN0b3IsIG1hdGNoIC8qIEludGVybmFsIFVzZSBPbmx5ICovICkge1xuXHR2YXIgaSxcblx0XHRzZXRNYXRjaGVycyA9IFtdLFxuXHRcdGVsZW1lbnRNYXRjaGVycyA9IFtdLFxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoICFjYWNoZWQgKSB7XG5cdFx0Ly8gR2VuZXJhdGUgYSBmdW5jdGlvbiBvZiByZWN1cnNpdmUgZnVuY3Rpb25zIHRoYXQgY2FuIGJlIHVzZWQgdG8gY2hlY2sgZWFjaCBlbGVtZW50XG5cdFx0aWYgKCAhbWF0Y2ggKSB7XG5cdFx0XHRtYXRjaCA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdH1cblx0XHRpID0gbWF0Y2gubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0Y2FjaGVkID0gbWF0Y2hlckZyb21Ub2tlbnMoIG1hdGNoW2ldICk7XG5cdFx0XHRpZiAoIGNhY2hlZFsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHRzZXRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1lbnRNYXRjaGVycy5wdXNoKCBjYWNoZWQgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWNoZSB0aGUgY29tcGlsZWQgZnVuY3Rpb25cblx0XHRjYWNoZWQgPSBjb21waWxlckNhY2hlKCBzZWxlY3RvciwgbWF0Y2hlckZyb21Hcm91cE1hdGNoZXJzKCBlbGVtZW50TWF0Y2hlcnMsIHNldE1hdGNoZXJzICkgKTtcblxuXHRcdC8vIFNhdmUgc2VsZWN0b3IgYW5kIHRva2VuaXphdGlvblxuXHRcdGNhY2hlZC5zZWxlY3RvciA9IHNlbGVjdG9yO1xuXHR9XG5cdHJldHVybiBjYWNoZWQ7XG59O1xuXG4vKipcbiAqIEEgbG93LWxldmVsIHNlbGVjdGlvbiBmdW5jdGlvbiB0aGF0IHdvcmtzIHdpdGggU2l6emxlJ3MgY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbnNcbiAqIEBwYXJhbSB7U3RyaW5nfEZ1bmN0aW9ufSBzZWxlY3RvciBBIHNlbGVjdG9yIG9yIGEgcHJlLWNvbXBpbGVkXG4gKiAgc2VsZWN0b3IgZnVuY3Rpb24gYnVpbHQgd2l0aCBTaXp6bGUuY29tcGlsZVxuICogQHBhcmFtIHtFbGVtZW50fSBjb250ZXh0XG4gKiBAcGFyYW0ge0FycmF5fSBbcmVzdWx0c11cbiAqIEBwYXJhbSB7QXJyYXl9IFtzZWVkXSBBIHNldCBvZiBlbGVtZW50cyB0byBtYXRjaCBhZ2FpbnN0XG4gKi9cbnNlbGVjdCA9IFNpenpsZS5zZWxlY3QgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBpLCB0b2tlbnMsIHRva2VuLCB0eXBlLCBmaW5kLFxuXHRcdGNvbXBpbGVkID0gdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgc2VsZWN0b3IsXG5cdFx0bWF0Y2ggPSAhc2VlZCAmJiB0b2tlbml6ZSggKHNlbGVjdG9yID0gY29tcGlsZWQuc2VsZWN0b3IgfHwgc2VsZWN0b3IpICk7XG5cblx0cmVzdWx0cyA9IHJlc3VsdHMgfHwgW107XG5cblx0Ly8gVHJ5IHRvIG1pbmltaXplIG9wZXJhdGlvbnMgaWYgdGhlcmUgaXMgb25seSBvbmUgc2VsZWN0b3IgaW4gdGhlIGxpc3QgYW5kIG5vIHNlZWRcblx0Ly8gKHRoZSBsYXR0ZXIgb2Ygd2hpY2ggZ3VhcmFudGVlcyB1cyBjb250ZXh0KVxuXHRpZiAoIG1hdGNoLmxlbmd0aCA9PT0gMSApIHtcblxuXHRcdC8vIFJlZHVjZSBjb250ZXh0IGlmIHRoZSBsZWFkaW5nIGNvbXBvdW5kIHNlbGVjdG9yIGlzIGFuIElEXG5cdFx0dG9rZW5zID0gbWF0Y2hbMF0gPSBtYXRjaFswXS5zbGljZSggMCApO1xuXHRcdGlmICggdG9rZW5zLmxlbmd0aCA+IDIgJiYgKHRva2VuID0gdG9rZW5zWzBdKS50eXBlID09PSBcIklEXCIgJiZcblx0XHRcdFx0Y29udGV4dC5ub2RlVHlwZSA9PT0gOSAmJiBkb2N1bWVudElzSFRNTCAmJiBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMV0udHlwZSBdICkge1xuXG5cdFx0XHRjb250ZXh0ID0gKCBFeHByLmZpbmRbXCJJRFwiXSggdG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKHJ1bmVzY2FwZSwgZnVuZXNjYXBlKSwgY29udGV4dCApIHx8IFtdIClbMF07XG5cdFx0XHRpZiAoICFjb250ZXh0ICkge1xuXHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0Ly8gUHJlY29tcGlsZWQgbWF0Y2hlcnMgd2lsbCBzdGlsbCB2ZXJpZnkgYW5jZXN0cnksIHNvIHN0ZXAgdXAgYSBsZXZlbFxuXHRcdFx0fSBlbHNlIGlmICggY29tcGlsZWQgKSB7XG5cdFx0XHRcdGNvbnRleHQgPSBjb250ZXh0LnBhcmVudE5vZGU7XG5cdFx0XHR9XG5cblx0XHRcdHNlbGVjdG9yID0gc2VsZWN0b3Iuc2xpY2UoIHRva2Vucy5zaGlmdCgpLnZhbHVlLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZldGNoIGEgc2VlZCBzZXQgZm9yIHJpZ2h0LXRvLWxlZnQgbWF0Y2hpbmdcblx0XHRpID0gbWF0Y2hFeHByW1wibmVlZHNDb250ZXh0XCJdLnRlc3QoIHNlbGVjdG9yICkgPyAwIDogdG9rZW5zLmxlbmd0aDtcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRva2VuID0gdG9rZW5zW2ldO1xuXG5cdFx0XHQvLyBBYm9ydCBpZiB3ZSBoaXQgYSBjb21iaW5hdG9yXG5cdFx0XHRpZiAoIEV4cHIucmVsYXRpdmVbICh0eXBlID0gdG9rZW4udHlwZSkgXSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRpZiAoIChmaW5kID0gRXhwci5maW5kWyB0eXBlIF0pICkge1xuXHRcdFx0XHQvLyBTZWFyY2gsIGV4cGFuZGluZyBjb250ZXh0IGZvciBsZWFkaW5nIHNpYmxpbmcgY29tYmluYXRvcnNcblx0XHRcdFx0aWYgKCAoc2VlZCA9IGZpbmQoXG5cdFx0XHRcdFx0dG9rZW4ubWF0Y2hlc1swXS5yZXBsYWNlKCBydW5lc2NhcGUsIGZ1bmVzY2FwZSApLFxuXHRcdFx0XHRcdHJzaWJsaW5nLnRlc3QoIHRva2Vuc1swXS50eXBlICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0XHRcdFx0KSkgKSB7XG5cblx0XHRcdFx0XHQvLyBJZiBzZWVkIGlzIGVtcHR5IG9yIG5vIHRva2VucyByZW1haW4sIHdlIGNhbiByZXR1cm4gZWFybHlcblx0XHRcdFx0XHR0b2tlbnMuc3BsaWNlKCBpLCAxICk7XG5cdFx0XHRcdFx0c2VsZWN0b3IgPSBzZWVkLmxlbmd0aCAmJiB0b1NlbGVjdG9yKCB0b2tlbnMgKTtcblx0XHRcdFx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIHNlZWQgKTtcblx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ29tcGlsZSBhbmQgZXhlY3V0ZSBhIGZpbHRlcmluZyBmdW5jdGlvbiBpZiBvbmUgaXMgbm90IHByb3ZpZGVkXG5cdC8vIFByb3ZpZGUgYG1hdGNoYCB0byBhdm9pZCByZXRva2VuaXphdGlvbiBpZiB3ZSBtb2RpZmllZCB0aGUgc2VsZWN0b3IgYWJvdmVcblx0KCBjb21waWxlZCB8fCBjb21waWxlKCBzZWxlY3RvciwgbWF0Y2ggKSApKFxuXHRcdHNlZWQsXG5cdFx0Y29udGV4dCxcblx0XHQhZG9jdW1lbnRJc0hUTUwsXG5cdFx0cmVzdWx0cyxcblx0XHQhY29udGV4dCB8fCByc2libGluZy50ZXN0KCBzZWxlY3RvciApICYmIHRlc3RDb250ZXh0KCBjb250ZXh0LnBhcmVudE5vZGUgKSB8fCBjb250ZXh0XG5cdCk7XG5cdHJldHVybiByZXN1bHRzO1xufTtcblxuLy8gT25lLXRpbWUgYXNzaWdubWVudHNcblxuLy8gU29ydCBzdGFiaWxpdHlcbnN1cHBvcnQuc29ydFN0YWJsZSA9IGV4cGFuZG8uc3BsaXQoXCJcIikuc29ydCggc29ydE9yZGVyICkuam9pbihcIlwiKSA9PT0gZXhwYW5kbztcblxuLy8gU3VwcG9ydDogQ2hyb21lIDE0LTM1K1xuLy8gQWx3YXlzIGFzc3VtZSBkdXBsaWNhdGVzIGlmIHRoZXkgYXJlbid0IHBhc3NlZCB0byB0aGUgY29tcGFyaXNvbiBmdW5jdGlvblxuc3VwcG9ydC5kZXRlY3REdXBsaWNhdGVzID0gISFoYXNEdXBsaWNhdGU7XG5cbi8vIEluaXRpYWxpemUgYWdhaW5zdCB0aGUgZGVmYXVsdCBkb2N1bWVudFxuc2V0RG9jdW1lbnQoKTtcblxuLy8gU3VwcG9ydDogV2Via2l0PDUzNy4zMiAtIFNhZmFyaSA2LjAuMy9DaHJvbWUgMjUgKGZpeGVkIGluIENocm9tZSAyNylcbi8vIERldGFjaGVkIG5vZGVzIGNvbmZvdW5kaW5nbHkgZm9sbG93ICplYWNoIG90aGVyKlxuc3VwcG9ydC5zb3J0RGV0YWNoZWQgPSBhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHQvLyBTaG91bGQgcmV0dXJuIDEsIGJ1dCByZXR1cm5zIDQgKGZvbGxvd2luZylcblx0cmV0dXJuIGVsLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZmllbGRzZXRcIikgKSAmIDE7XG59KTtcblxuLy8gU3VwcG9ydDogSUU8OFxuLy8gUHJldmVudCBhdHRyaWJ1dGUvcHJvcGVydHkgXCJpbnRlcnBvbGF0aW9uXCJcbi8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvbXM1MzY0MjklMjhWUy44NSUyOS5hc3B4XG5pZiAoICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JyMnPjwvYT5cIjtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKSA9PT0gXCIjXCIgO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ0eXBlfGhyZWZ8aGVpZ2h0fHdpZHRoXCIsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHRpZiAoICFpc1hNTCApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggbmFtZSwgbmFtZS50b0xvd2VyQ2FzZSgpID09PSBcInR5cGVcIiA/IDEgOiAyICk7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGRlZmF1bHRWYWx1ZSBpbiBwbGFjZSBvZiBnZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiKVxuaWYgKCAhc3VwcG9ydC5hdHRyaWJ1dGVzIHx8ICFhc3NlcnQoZnVuY3Rpb24oIGVsICkge1xuXHRlbC5pbm5lckhUTUwgPSBcIjxpbnB1dC8+XCI7XG5cdGVsLmZpcnN0Q2hpbGQuc2V0QXR0cmlidXRlKCBcInZhbHVlXCIsIFwiXCIgKTtcblx0cmV0dXJuIGVsLmZpcnN0Q2hpbGQuZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gXCJcIjtcbn0pICkge1xuXHRhZGRIYW5kbGUoIFwidmFsdWVcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gXCJpbnB1dFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGVmYXVsdFZhbHVlO1xuXHRcdH1cblx0fSk7XG59XG5cbi8vIFN1cHBvcnQ6IElFPDlcbi8vIFVzZSBnZXRBdHRyaWJ1dGVOb2RlIHRvIGZldGNoIGJvb2xlYW5zIHdoZW4gZ2V0QXR0cmlidXRlIGxpZXNcbmlmICggIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdHJldHVybiBlbC5nZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiKSA9PSBudWxsO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggYm9vbGVhbnMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgdmFsO1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW1bIG5hbWUgXSA9PT0gdHJ1ZSA/IG5hbWUudG9Mb3dlckNhc2UoKSA6XG5cdFx0XHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZSggbmFtZSApKSAmJiB2YWwuc3BlY2lmaWVkID9cblx0XHRcdFx0XHR2YWwudmFsdWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdH1cblx0fSk7XG59XG5cbnJldHVybiBTaXp6bGU7XG5cbn0pKCB3aW5kb3cgKTtcblxuXG5cbmpRdWVyeS5maW5kID0gU2l6emxlO1xualF1ZXJ5LmV4cHIgPSBTaXp6bGUuc2VsZWN0b3JzO1xuXG4vLyBEZXByZWNhdGVkXG5qUXVlcnkuZXhwclsgXCI6XCIgXSA9IGpRdWVyeS5leHByLnBzZXVkb3M7XG5qUXVlcnkudW5pcXVlU29ydCA9IGpRdWVyeS51bmlxdWUgPSBTaXp6bGUudW5pcXVlU29ydDtcbmpRdWVyeS50ZXh0ID0gU2l6emxlLmdldFRleHQ7XG5qUXVlcnkuaXNYTUxEb2MgPSBTaXp6bGUuaXNYTUw7XG5qUXVlcnkuY29udGFpbnMgPSBTaXp6bGUuY29udGFpbnM7XG5qUXVlcnkuZXNjYXBlU2VsZWN0b3IgPSBTaXp6bGUuZXNjYXBlO1xuXG5cblxuXG52YXIgZGlyID0gZnVuY3Rpb24oIGVsZW0sIGRpciwgdW50aWwgKSB7XG5cdHZhciBtYXRjaGVkID0gW10sXG5cdFx0dHJ1bmNhdGUgPSB1bnRpbCAhPT0gdW5kZWZpbmVkO1xuXG5cdHdoaWxlICggKCBlbGVtID0gZWxlbVsgZGlyIF0gKSAmJiBlbGVtLm5vZGVUeXBlICE9PSA5ICkge1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGlmICggdHJ1bmNhdGUgJiYgalF1ZXJ5KCBlbGVtICkuaXMoIHVudGlsICkgKSB7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0bWF0Y2hlZC5wdXNoKCBlbGVtICk7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBtYXRjaGVkO1xufTtcblxuXG52YXIgc2libGluZ3MgPSBmdW5jdGlvbiggbiwgZWxlbSApIHtcblx0dmFyIG1hdGNoZWQgPSBbXTtcblxuXHRmb3IgKCA7IG47IG4gPSBuLm5leHRTaWJsaW5nICkge1xuXHRcdGlmICggbi5ub2RlVHlwZSA9PT0gMSAmJiBuICE9PSBlbGVtICkge1xuXHRcdFx0bWF0Y2hlZC5wdXNoKCBuICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBybmVlZHNDb250ZXh0ID0galF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0O1xuXG5cblxuZnVuY3Rpb24gbm9kZU5hbWUoIGVsZW0sIG5hbWUgKSB7XG5cbiAgcmV0dXJuIGVsZW0ubm9kZU5hbWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lLnRvTG93ZXJDYXNlKCk7XG5cbn07XG52YXIgcnNpbmdsZVRhZyA9ICggL148KFthLXpdW15cXC9cXDA+OlxceDIwXFx0XFxyXFxuXFxmXSopW1xceDIwXFx0XFxyXFxuXFxmXSpcXC8/Pig/OjxcXC9cXDE+fCkkL2kgKTtcblxuXG5cbi8vIEltcGxlbWVudCB0aGUgaWRlbnRpY2FsIGZ1bmN0aW9uYWxpdHkgZm9yIGZpbHRlciBhbmQgbm90XG5mdW5jdGlvbiB3aW5ub3coIGVsZW1lbnRzLCBxdWFsaWZpZXIsIG5vdCApIHtcblx0aWYgKCBpc0Z1bmN0aW9uKCBxdWFsaWZpZXIgKSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSwgaSApIHtcblx0XHRcdHJldHVybiAhIXF1YWxpZmllci5jYWxsKCBlbGVtLCBpLCBlbGVtICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBTaW5nbGUgZWxlbWVudFxuXHRpZiAoIHF1YWxpZmllci5ub2RlVHlwZSApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGVsZW0gPT09IHF1YWxpZmllciApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gQXJyYXlsaWtlIG9mIGVsZW1lbnRzIChqUXVlcnksIGFyZ3VtZW50cywgQXJyYXkpXG5cdGlmICggdHlwZW9mIHF1YWxpZmllciAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdyZXAoIGVsZW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiAoIGluZGV4T2YuY2FsbCggcXVhbGlmaWVyLCBlbGVtICkgPiAtMSApICE9PSBub3Q7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gRmlsdGVyZWQgZGlyZWN0bHkgZm9yIGJvdGggc2ltcGxlIGFuZCBjb21wbGV4IHNlbGVjdG9yc1xuXHRyZXR1cm4galF1ZXJ5LmZpbHRlciggcXVhbGlmaWVyLCBlbGVtZW50cywgbm90ICk7XG59XG5cbmpRdWVyeS5maWx0ZXIgPSBmdW5jdGlvbiggZXhwciwgZWxlbXMsIG5vdCApIHtcblx0dmFyIGVsZW0gPSBlbGVtc1sgMCBdO1xuXG5cdGlmICggbm90ICkge1xuXHRcdGV4cHIgPSBcIjpub3QoXCIgKyBleHByICsgXCIpXCI7XG5cdH1cblxuXHRpZiAoIGVsZW1zLmxlbmd0aCA9PT0gMSAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdHJldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGVsZW0sIGV4cHIgKSA/IFsgZWxlbSBdIDogW107XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5LmZpbmQubWF0Y2hlcyggZXhwciwgalF1ZXJ5LmdyZXAoIGVsZW1zLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZWxlbS5ub2RlVHlwZSA9PT0gMTtcblx0fSApICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGZpbmQ6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgaSwgcmV0LFxuXHRcdFx0bGVuID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRzZWxmID0gdGhpcztcblxuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBqUXVlcnkoIHNlbGVjdG9yICkuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggc2VsZlsgaSBdLCB0aGlzICkgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gKSApO1xuXHRcdH1cblxuXHRcdHJldCA9IHRoaXMucHVzaFN0YWNrKCBbXSApO1xuXG5cdFx0Zm9yICggaSA9IDA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGpRdWVyeS5maW5kKCBzZWxlY3Rvciwgc2VsZlsgaSBdLCByZXQgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbGVuID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCByZXQgKSA6IHJldDtcblx0fSxcblx0ZmlsdGVyOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCBmYWxzZSApICk7XG5cdH0sXG5cdG5vdDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggd2lubm93KCB0aGlzLCBzZWxlY3RvciB8fCBbXSwgdHJ1ZSApICk7XG5cdH0sXG5cdGlzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuICEhd2lubm93KFxuXHRcdFx0dGhpcyxcblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIHBvc2l0aW9uYWwvcmVsYXRpdmUgc2VsZWN0b3IsIGNoZWNrIG1lbWJlcnNoaXAgaW4gdGhlIHJldHVybmVkIHNldFxuXHRcdFx0Ly8gc28gJChcInA6Zmlyc3RcIikuaXMoXCJwOmxhc3RcIikgd29uJ3QgcmV0dXJuIHRydWUgZm9yIGEgZG9jIHdpdGggdHdvIFwicFwiLlxuXHRcdFx0dHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICYmIHJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3IgKSA/XG5cdFx0XHRcdGpRdWVyeSggc2VsZWN0b3IgKSA6XG5cdFx0XHRcdHNlbGVjdG9yIHx8IFtdLFxuXHRcdFx0ZmFsc2Vcblx0XHQpLmxlbmd0aDtcblx0fVxufSApO1xuXG5cbi8vIEluaXRpYWxpemUgYSBqUXVlcnkgb2JqZWN0XG5cblxuLy8gQSBjZW50cmFsIHJlZmVyZW5jZSB0byB0aGUgcm9vdCBqUXVlcnkoZG9jdW1lbnQpXG52YXIgcm9vdGpRdWVyeSxcblxuXHQvLyBBIHNpbXBsZSB3YXkgdG8gY2hlY2sgZm9yIEhUTUwgc3RyaW5nc1xuXHQvLyBQcmlvcml0aXplICNpZCBvdmVyIDx0YWc+IHRvIGF2b2lkIFhTUyB2aWEgbG9jYXRpb24uaGFzaCAoIzk1MjEpXG5cdC8vIFN0cmljdCBIVE1MIHJlY29nbml0aW9uICgjMTEyOTA6IG11c3Qgc3RhcnQgd2l0aCA8KVxuXHQvLyBTaG9ydGN1dCBzaW1wbGUgI2lkIGNhc2UgZm9yIHNwZWVkXG5cdHJxdWlja0V4cHIgPSAvXig/OlxccyooPFtcXHdcXFddKz4pW14+XSp8IyhbXFx3LV0rKSkkLyxcblxuXHRpbml0ID0galF1ZXJ5LmZuLmluaXQgPSBmdW5jdGlvbiggc2VsZWN0b3IsIGNvbnRleHQsIHJvb3QgKSB7XG5cdFx0dmFyIG1hdGNoLCBlbGVtO1xuXG5cdFx0Ly8gSEFORExFOiAkKFwiXCIpLCAkKG51bGwpLCAkKHVuZGVmaW5lZCksICQoZmFsc2UpXG5cdFx0aWYgKCAhc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cblx0XHQvLyBNZXRob2QgaW5pdCgpIGFjY2VwdHMgYW4gYWx0ZXJuYXRlIHJvb3RqUXVlcnlcblx0XHQvLyBzbyBtaWdyYXRlIGNhbiBzdXBwb3J0IGpRdWVyeS5zdWIgKGdoLTIxMDEpXG5cdFx0cm9vdCA9IHJvb3QgfHwgcm9vdGpRdWVyeTtcblxuXHRcdC8vIEhhbmRsZSBIVE1MIHN0cmluZ3Ncblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGlmICggc2VsZWN0b3JbIDAgXSA9PT0gXCI8XCIgJiZcblx0XHRcdFx0c2VsZWN0b3JbIHNlbGVjdG9yLmxlbmd0aCAtIDEgXSA9PT0gXCI+XCIgJiZcblx0XHRcdFx0c2VsZWN0b3IubGVuZ3RoID49IDMgKSB7XG5cblx0XHRcdFx0Ly8gQXNzdW1lIHRoYXQgc3RyaW5ncyB0aGF0IHN0YXJ0IGFuZCBlbmQgd2l0aCA8PiBhcmUgSFRNTCBhbmQgc2tpcCB0aGUgcmVnZXggY2hlY2tcblx0XHRcdFx0bWF0Y2ggPSBbIG51bGwsIHNlbGVjdG9yLCBudWxsIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG1hdGNoID0gcnF1aWNrRXhwci5leGVjKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYXRjaCBodG1sIG9yIG1ha2Ugc3VyZSBubyBjb250ZXh0IGlzIHNwZWNpZmllZCBmb3IgI2lkXG5cdFx0XHRpZiAoIG1hdGNoICYmICggbWF0Y2hbIDEgXSB8fCAhY29udGV4dCApICkge1xuXG5cdFx0XHRcdC8vIEhBTkRMRTogJChodG1sKSAtPiAkKGFycmF5KVxuXHRcdFx0XHRpZiAoIG1hdGNoWyAxIF0gKSB7XG5cdFx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQgaW5zdGFuY2VvZiBqUXVlcnkgPyBjb250ZXh0WyAwIF0gOiBjb250ZXh0O1xuXG5cdFx0XHRcdFx0Ly8gT3B0aW9uIHRvIHJ1biBzY3JpcHRzIGlzIHRydWUgZm9yIGJhY2stY29tcGF0XG5cdFx0XHRcdFx0Ly8gSW50ZW50aW9uYWxseSBsZXQgdGhlIGVycm9yIGJlIHRocm93biBpZiBwYXJzZUhUTUwgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMsIGpRdWVyeS5wYXJzZUhUTUwoXG5cdFx0XHRcdFx0XHRtYXRjaFsgMSBdLFxuXHRcdFx0XHRcdFx0Y29udGV4dCAmJiBjb250ZXh0Lm5vZGVUeXBlID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBkb2N1bWVudCxcblx0XHRcdFx0XHRcdHRydWVcblx0XHRcdFx0XHQpICk7XG5cblx0XHRcdFx0XHQvLyBIQU5ETEU6ICQoaHRtbCwgcHJvcHMpXG5cdFx0XHRcdFx0aWYgKCByc2luZ2xlVGFnLnRlc3QoIG1hdGNoWyAxIF0gKSAmJiBqUXVlcnkuaXNQbGFpbk9iamVjdCggY29udGV4dCApICkge1xuXHRcdFx0XHRcdFx0Zm9yICggbWF0Y2ggaW4gY29udGV4dCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBQcm9wZXJ0aWVzIG9mIGNvbnRleHQgYXJlIGNhbGxlZCBhcyBtZXRob2RzIGlmIHBvc3NpYmxlXG5cdFx0XHRcdFx0XHRcdGlmICggaXNGdW5jdGlvbiggdGhpc1sgbWF0Y2ggXSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXNbIG1hdGNoIF0oIGNvbnRleHRbIG1hdGNoIF0gKTtcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgb3RoZXJ3aXNlIHNldCBhcyBhdHRyaWJ1dGVzXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5hdHRyKCBtYXRjaCwgY29udGV4dFsgbWF0Y2ggXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKCNpZClcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRlbGVtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoIG1hdGNoWyAyIF0gKTtcblxuXHRcdFx0XHRcdGlmICggZWxlbSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSW5qZWN0IHRoZSBlbGVtZW50IGRpcmVjdGx5IGludG8gdGhlIGpRdWVyeSBvYmplY3Rcblx0XHRcdFx0XHRcdHRoaXNbIDAgXSA9IGVsZW07XG5cdFx0XHRcdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIEhBTkRMRTogJChleHByLCAkKC4uLikpXG5cdFx0XHR9IGVsc2UgaWYgKCAhY29udGV4dCB8fCBjb250ZXh0LmpxdWVyeSApIHtcblx0XHRcdFx0cmV0dXJuICggY29udGV4dCB8fCByb290ICkuZmluZCggc2VsZWN0b3IgKTtcblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsIGNvbnRleHQpXG5cdFx0XHQvLyAod2hpY2ggaXMganVzdCBlcXVpdmFsZW50IHRvOiAkKGNvbnRleHQpLmZpbmQoZXhwcilcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiB0aGlzLmNvbnN0cnVjdG9yKCBjb250ZXh0ICkuZmluZCggc2VsZWN0b3IgKTtcblx0XHRcdH1cblxuXHRcdC8vIEhBTkRMRTogJChET01FbGVtZW50KVxuXHRcdH0gZWxzZSBpZiAoIHNlbGVjdG9yLm5vZGVUeXBlICkge1xuXHRcdFx0dGhpc1sgMCBdID0gc2VsZWN0b3I7XG5cdFx0XHR0aGlzLmxlbmd0aCA9IDE7XG5cdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdC8vIEhBTkRMRTogJChmdW5jdGlvbilcblx0XHQvLyBTaG9ydGN1dCBmb3IgZG9jdW1lbnQgcmVhZHlcblx0XHR9IGVsc2UgaWYgKCBpc0Z1bmN0aW9uKCBzZWxlY3RvciApICkge1xuXHRcdFx0cmV0dXJuIHJvb3QucmVhZHkgIT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdHJvb3QucmVhZHkoIHNlbGVjdG9yICkgOlxuXG5cdFx0XHRcdC8vIEV4ZWN1dGUgaW1tZWRpYXRlbHkgaWYgcmVhZHkgaXMgbm90IHByZXNlbnRcblx0XHRcdFx0c2VsZWN0b3IoIGpRdWVyeSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWFrZUFycmF5KCBzZWxlY3RvciwgdGhpcyApO1xuXHR9O1xuXG4vLyBHaXZlIHRoZSBpbml0IGZ1bmN0aW9uIHRoZSBqUXVlcnkgcHJvdG90eXBlIGZvciBsYXRlciBpbnN0YW50aWF0aW9uXG5pbml0LnByb3RvdHlwZSA9IGpRdWVyeS5mbjtcblxuLy8gSW5pdGlhbGl6ZSBjZW50cmFsIHJlZmVyZW5jZVxucm9vdGpRdWVyeSA9IGpRdWVyeSggZG9jdW1lbnQgKTtcblxuXG52YXIgcnBhcmVudHNwcmV2ID0gL14oPzpwYXJlbnRzfHByZXYoPzpVbnRpbHxBbGwpKS8sXG5cblx0Ly8gTWV0aG9kcyBndWFyYW50ZWVkIHRvIHByb2R1Y2UgYSB1bmlxdWUgc2V0IHdoZW4gc3RhcnRpbmcgZnJvbSBhIHVuaXF1ZSBzZXRcblx0Z3VhcmFudGVlZFVuaXF1ZSA9IHtcblx0XHRjaGlsZHJlbjogdHJ1ZSxcblx0XHRjb250ZW50czogdHJ1ZSxcblx0XHRuZXh0OiB0cnVlLFxuXHRcdHByZXY6IHRydWVcblx0fTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRoYXM6IGZ1bmN0aW9uKCB0YXJnZXQgKSB7XG5cdFx0dmFyIHRhcmdldHMgPSBqUXVlcnkoIHRhcmdldCwgdGhpcyApLFxuXHRcdFx0bCA9IHRhcmdldHMubGVuZ3RoO1xuXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpID0gMDtcblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBqUXVlcnkuY29udGFpbnMoIHRoaXMsIHRhcmdldHNbIGkgXSApICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGNsb3Nlc3Q6IGZ1bmN0aW9uKCBzZWxlY3RvcnMsIGNvbnRleHQgKSB7XG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0bCA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0bWF0Y2hlZCA9IFtdLFxuXHRcdFx0dGFyZ2V0cyA9IHR5cGVvZiBzZWxlY3RvcnMgIT09IFwic3RyaW5nXCIgJiYgalF1ZXJ5KCBzZWxlY3RvcnMgKTtcblxuXHRcdC8vIFBvc2l0aW9uYWwgc2VsZWN0b3JzIG5ldmVyIG1hdGNoLCBzaW5jZSB0aGVyZSdzIG5vIF9zZWxlY3Rpb25fIGNvbnRleHRcblx0XHRpZiAoICFybmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9ycyApICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmb3IgKCBjdXIgPSB0aGlzWyBpIF07IGN1ciAmJiBjdXIgIT09IGNvbnRleHQ7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXG5cdFx0XHRcdFx0Ly8gQWx3YXlzIHNraXAgZG9jdW1lbnQgZnJhZ21lbnRzXG5cdFx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPCAxMSAmJiAoIHRhcmdldHMgP1xuXHRcdFx0XHRcdFx0dGFyZ2V0cy5pbmRleCggY3VyICkgPiAtMSA6XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IHBhc3Mgbm9uLWVsZW1lbnRzIHRvIFNpenpsZVxuXHRcdFx0XHRcdFx0Y3VyLm5vZGVUeXBlID09PSAxICYmXG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggY3VyLCBzZWxlY3RvcnMgKSApICkge1xuXG5cdFx0XHRcdFx0XHRtYXRjaGVkLnB1c2goIGN1ciApO1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBtYXRjaGVkLmxlbmd0aCA+IDEgPyBqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApIDogbWF0Y2hlZCApO1xuXHR9LFxuXG5cdC8vIERldGVybWluZSB0aGUgcG9zaXRpb24gb2YgYW4gZWxlbWVudCB3aXRoaW4gdGhlIHNldFxuXHRpbmRleDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBObyBhcmd1bWVudCwgcmV0dXJuIGluZGV4IGluIHBhcmVudFxuXHRcdGlmICggIWVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gKCB0aGlzWyAwIF0gJiYgdGhpc1sgMCBdLnBhcmVudE5vZGUgKSA/IHRoaXMuZmlyc3QoKS5wcmV2QWxsKCkubGVuZ3RoIDogLTE7XG5cdFx0fVxuXG5cdFx0Ly8gSW5kZXggaW4gc2VsZWN0b3Jcblx0XHRpZiAoIHR5cGVvZiBlbGVtID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggalF1ZXJ5KCBlbGVtICksIHRoaXNbIDAgXSApO1xuXHRcdH1cblxuXHRcdC8vIExvY2F0ZSB0aGUgcG9zaXRpb24gb2YgdGhlIGRlc2lyZWQgZWxlbWVudFxuXHRcdHJldHVybiBpbmRleE9mLmNhbGwoIHRoaXMsXG5cblx0XHRcdC8vIElmIGl0IHJlY2VpdmVzIGEgalF1ZXJ5IG9iamVjdCwgdGhlIGZpcnN0IGVsZW1lbnQgaXMgdXNlZFxuXHRcdFx0ZWxlbS5qcXVlcnkgPyBlbGVtWyAwIF0gOiBlbGVtXG5cdFx0KTtcblx0fSxcblxuXHRhZGQ6IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soXG5cdFx0XHRqUXVlcnkudW5pcXVlU29ydChcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCB0aGlzLmdldCgpLCBqUXVlcnkoIHNlbGVjdG9yLCBjb250ZXh0ICkgKVxuXHRcdFx0KVxuXHRcdCk7XG5cdH0sXG5cblx0YWRkQmFjazogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiB0aGlzLmFkZCggc2VsZWN0b3IgPT0gbnVsbCA/XG5cdFx0XHR0aGlzLnByZXZPYmplY3QgOiB0aGlzLnByZXZPYmplY3QuZmlsdGVyKCBzZWxlY3RvciApXG5cdFx0KTtcblx0fVxufSApO1xuXG5mdW5jdGlvbiBzaWJsaW5nKCBjdXIsIGRpciApIHtcblx0d2hpbGUgKCAoIGN1ciA9IGN1clsgZGlyIF0gKSAmJiBjdXIubm9kZVR5cGUgIT09IDEgKSB7fVxuXHRyZXR1cm4gY3VyO1xufVxuXG5qUXVlcnkuZWFjaCgge1xuXHRwYXJlbnQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0cmV0dXJuIHBhcmVudCAmJiBwYXJlbnQubm9kZVR5cGUgIT09IDExID8gcGFyZW50IDogbnVsbDtcblx0fSxcblx0cGFyZW50czogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIgKTtcblx0fSxcblx0cGFyZW50c1VudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwYXJlbnROb2RlXCIsIHVudGlsICk7XG5cdH0sXG5cdG5leHQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5nKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dEFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiICk7XG5cdH0sXG5cdHByZXZBbGw6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIgKTtcblx0fSxcblx0bmV4dFVudGlsOiBmdW5jdGlvbiggZWxlbSwgaSwgdW50aWwgKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJuZXh0U2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRwcmV2VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInByZXZpb3VzU2libGluZ1wiLCB1bnRpbCApO1xuXHR9LFxuXHRzaWJsaW5nczogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCAoIGVsZW0ucGFyZW50Tm9kZSB8fCB7fSApLmZpcnN0Q2hpbGQsIGVsZW0gKTtcblx0fSxcblx0Y2hpbGRyZW46IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBzaWJsaW5ncyggZWxlbS5maXJzdENoaWxkICk7XG5cdH0sXG5cdGNvbnRlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmNvbnRlbnREb2N1bWVudCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdHJldHVybiBlbGVtLmNvbnRlbnREb2N1bWVudDtcblx0XHR9XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA5IC0gMTEgb25seSwgaU9TIDcgb25seSwgQW5kcm9pZCBCcm93c2VyIDw9NC4zIG9ubHlcblx0XHQvLyBUcmVhdCB0aGUgdGVtcGxhdGUgZWxlbWVudCBhcyBhIHJlZ3VsYXIgb25lIGluIGJyb3dzZXJzIHRoYXRcblx0XHQvLyBkb24ndCBzdXBwb3J0IGl0LlxuXHRcdGlmICggbm9kZU5hbWUoIGVsZW0sIFwidGVtcGxhdGVcIiApICkge1xuXHRcdFx0ZWxlbSA9IGVsZW0uY29udGVudCB8fCBlbGVtO1xuXHRcdH1cblxuXHRcdHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBlbGVtLmNoaWxkTm9kZXMgKTtcblx0fVxufSwgZnVuY3Rpb24oIG5hbWUsIGZuICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCB1bnRpbCwgc2VsZWN0b3IgKSB7XG5cdFx0dmFyIG1hdGNoZWQgPSBqUXVlcnkubWFwKCB0aGlzLCBmbiwgdW50aWwgKTtcblxuXHRcdGlmICggbmFtZS5zbGljZSggLTUgKSAhPT0gXCJVbnRpbFwiICkge1xuXHRcdFx0c2VsZWN0b3IgPSB1bnRpbDtcblx0XHR9XG5cblx0XHRpZiAoIHNlbGVjdG9yICYmIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG1hdGNoZWQgPSBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgbWF0Y2hlZCApO1xuXHRcdH1cblxuXHRcdGlmICggdGhpcy5sZW5ndGggPiAxICkge1xuXG5cdFx0XHQvLyBSZW1vdmUgZHVwbGljYXRlc1xuXHRcdFx0aWYgKCAhZ3VhcmFudGVlZFVuaXF1ZVsgbmFtZSBdICkge1xuXHRcdFx0XHRqUXVlcnkudW5pcXVlU29ydCggbWF0Y2hlZCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBSZXZlcnNlIG9yZGVyIGZvciBwYXJlbnRzKiBhbmQgcHJldi1kZXJpdmF0aXZlc1xuXHRcdFx0aWYgKCBycGFyZW50c3ByZXYudGVzdCggbmFtZSApICkge1xuXHRcdFx0XHRtYXRjaGVkLnJldmVyc2UoKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQgKTtcblx0fTtcbn0gKTtcbnZhciBybm90aHRtbHdoaXRlID0gKCAvW15cXHgyMFxcdFxcclxcblxcZl0rL2cgKTtcblxuXG5cbi8vIENvbnZlcnQgU3RyaW5nLWZvcm1hdHRlZCBvcHRpb25zIGludG8gT2JqZWN0LWZvcm1hdHRlZCBvbmVzXG5mdW5jdGlvbiBjcmVhdGVPcHRpb25zKCBvcHRpb25zICkge1xuXHR2YXIgb2JqZWN0ID0ge307XG5cdGpRdWVyeS5lYWNoKCBvcHRpb25zLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW10sIGZ1bmN0aW9uKCBfLCBmbGFnICkge1xuXHRcdG9iamVjdFsgZmxhZyBdID0gdHJ1ZTtcblx0fSApO1xuXHRyZXR1cm4gb2JqZWN0O1xufVxuXG4vKlxuICogQ3JlYXRlIGEgY2FsbGJhY2sgbGlzdCB1c2luZyB0aGUgZm9sbG93aW5nIHBhcmFtZXRlcnM6XG4gKlxuICpcdG9wdGlvbnM6IGFuIG9wdGlvbmFsIGxpc3Qgb2Ygc3BhY2Utc2VwYXJhdGVkIG9wdGlvbnMgdGhhdCB3aWxsIGNoYW5nZSBob3dcbiAqXHRcdFx0dGhlIGNhbGxiYWNrIGxpc3QgYmVoYXZlcyBvciBhIG1vcmUgdHJhZGl0aW9uYWwgb3B0aW9uIG9iamVjdFxuICpcbiAqIEJ5IGRlZmF1bHQgYSBjYWxsYmFjayBsaXN0IHdpbGwgYWN0IGxpa2UgYW4gZXZlbnQgY2FsbGJhY2sgbGlzdCBhbmQgY2FuIGJlXG4gKiBcImZpcmVkXCIgbXVsdGlwbGUgdGltZXMuXG4gKlxuICogUG9zc2libGUgb3B0aW9uczpcbiAqXG4gKlx0b25jZTpcdFx0XHR3aWxsIGVuc3VyZSB0aGUgY2FsbGJhY2sgbGlzdCBjYW4gb25seSBiZSBmaXJlZCBvbmNlIChsaWtlIGEgRGVmZXJyZWQpXG4gKlxuICpcdG1lbW9yeTpcdFx0XHR3aWxsIGtlZXAgdHJhY2sgb2YgcHJldmlvdXMgdmFsdWVzIGFuZCB3aWxsIGNhbGwgYW55IGNhbGxiYWNrIGFkZGVkXG4gKlx0XHRcdFx0XHRhZnRlciB0aGUgbGlzdCBoYXMgYmVlbiBmaXJlZCByaWdodCBhd2F5IHdpdGggdGhlIGxhdGVzdCBcIm1lbW9yaXplZFwiXG4gKlx0XHRcdFx0XHR2YWx1ZXMgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0dW5pcXVlOlx0XHRcdHdpbGwgZW5zdXJlIGEgY2FsbGJhY2sgY2FuIG9ubHkgYmUgYWRkZWQgb25jZSAobm8gZHVwbGljYXRlIGluIHRoZSBsaXN0KVxuICpcbiAqXHRzdG9wT25GYWxzZTpcdGludGVycnVwdCBjYWxsaW5ncyB3aGVuIGEgY2FsbGJhY2sgcmV0dXJucyBmYWxzZVxuICpcbiAqL1xualF1ZXJ5LkNhbGxiYWNrcyA9IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdC8vIENvbnZlcnQgb3B0aW9ucyBmcm9tIFN0cmluZy1mb3JtYXR0ZWQgdG8gT2JqZWN0LWZvcm1hdHRlZCBpZiBuZWVkZWRcblx0Ly8gKHdlIGNoZWNrIGluIGNhY2hlIGZpcnN0KVxuXHRvcHRpb25zID0gdHlwZW9mIG9wdGlvbnMgPT09IFwic3RyaW5nXCIgP1xuXHRcdGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSA6XG5cdFx0alF1ZXJ5LmV4dGVuZCgge30sIG9wdGlvbnMgKTtcblxuXHR2YXIgLy8gRmxhZyB0byBrbm93IGlmIGxpc3QgaXMgY3VycmVudGx5IGZpcmluZ1xuXHRcdGZpcmluZyxcblxuXHRcdC8vIExhc3QgZmlyZSB2YWx1ZSBmb3Igbm9uLWZvcmdldHRhYmxlIGxpc3RzXG5cdFx0bWVtb3J5LFxuXG5cdFx0Ly8gRmxhZyB0byBrbm93IGlmIGxpc3Qgd2FzIGFscmVhZHkgZmlyZWRcblx0XHRmaXJlZCxcblxuXHRcdC8vIEZsYWcgdG8gcHJldmVudCBmaXJpbmdcblx0XHRsb2NrZWQsXG5cblx0XHQvLyBBY3R1YWwgY2FsbGJhY2sgbGlzdFxuXHRcdGxpc3QgPSBbXSxcblxuXHRcdC8vIFF1ZXVlIG9mIGV4ZWN1dGlvbiBkYXRhIGZvciByZXBlYXRhYmxlIGxpc3RzXG5cdFx0cXVldWUgPSBbXSxcblxuXHRcdC8vIEluZGV4IG9mIGN1cnJlbnRseSBmaXJpbmcgY2FsbGJhY2sgKG1vZGlmaWVkIGJ5IGFkZC9yZW1vdmUgYXMgbmVlZGVkKVxuXHRcdGZpcmluZ0luZGV4ID0gLTEsXG5cblx0XHQvLyBGaXJlIGNhbGxiYWNrc1xuXHRcdGZpcmUgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5mb3JjZSBzaW5nbGUtZmlyaW5nXG5cdFx0XHRsb2NrZWQgPSBsb2NrZWQgfHwgb3B0aW9ucy5vbmNlO1xuXG5cdFx0XHQvLyBFeGVjdXRlIGNhbGxiYWNrcyBmb3IgYWxsIHBlbmRpbmcgZXhlY3V0aW9ucyxcblx0XHRcdC8vIHJlc3BlY3RpbmcgZmlyaW5nSW5kZXggb3ZlcnJpZGVzIGFuZCBydW50aW1lIGNoYW5nZXNcblx0XHRcdGZpcmVkID0gZmlyaW5nID0gdHJ1ZTtcblx0XHRcdGZvciAoIDsgcXVldWUubGVuZ3RoOyBmaXJpbmdJbmRleCA9IC0xICkge1xuXHRcdFx0XHRtZW1vcnkgPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0XHR3aGlsZSAoICsrZmlyaW5nSW5kZXggPCBsaXN0Lmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIFJ1biBjYWxsYmFjayBhbmQgY2hlY2sgZm9yIGVhcmx5IHRlcm1pbmF0aW9uXG5cdFx0XHRcdFx0aWYgKCBsaXN0WyBmaXJpbmdJbmRleCBdLmFwcGx5KCBtZW1vcnlbIDAgXSwgbWVtb3J5WyAxIF0gKSA9PT0gZmFsc2UgJiZcblx0XHRcdFx0XHRcdG9wdGlvbnMuc3RvcE9uRmFsc2UgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEp1bXAgdG8gZW5kIGFuZCBmb3JnZXQgdGhlIGRhdGEgc28gLmFkZCBkb2Vzbid0IHJlLWZpcmVcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGg7XG5cdFx0XHRcdFx0XHRtZW1vcnkgPSBmYWxzZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yZ2V0IHRoZSBkYXRhIGlmIHdlJ3JlIGRvbmUgd2l0aCBpdFxuXHRcdFx0aWYgKCAhb3B0aW9ucy5tZW1vcnkgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0fVxuXG5cdFx0XHRmaXJpbmcgPSBmYWxzZTtcblxuXHRcdFx0Ly8gQ2xlYW4gdXAgaWYgd2UncmUgZG9uZSBmaXJpbmcgZm9yIGdvb2Rcblx0XHRcdGlmICggbG9ja2VkICkge1xuXG5cdFx0XHRcdC8vIEtlZXAgYW4gZW1wdHkgbGlzdCBpZiB3ZSBoYXZlIGRhdGEgZm9yIGZ1dHVyZSBhZGQgY2FsbHNcblx0XHRcdFx0aWYgKCBtZW1vcnkgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IFtdO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgdGhpcyBvYmplY3QgaXMgc3BlbnRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRsaXN0ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0sXG5cblx0XHQvLyBBY3R1YWwgQ2FsbGJhY2tzIG9iamVjdFxuXHRcdHNlbGYgPSB7XG5cblx0XHRcdC8vIEFkZCBhIGNhbGxiYWNrIG9yIGEgY29sbGVjdGlvbiBvZiBjYWxsYmFja3MgdG8gdGhlIGxpc3Rcblx0XHRcdGFkZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblxuXHRcdFx0XHRcdC8vIElmIHdlIGhhdmUgbWVtb3J5IGZyb20gYSBwYXN0IHJ1biwgd2Ugc2hvdWxkIGZpcmUgYWZ0ZXIgYWRkaW5nXG5cdFx0XHRcdFx0aWYgKCBtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRcdGZpcmluZ0luZGV4ID0gbGlzdC5sZW5ndGggLSAxO1xuXHRcdFx0XHRcdFx0cXVldWUucHVzaCggbWVtb3J5ICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0KCBmdW5jdGlvbiBhZGQoIGFyZ3MgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggYXJncywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCBhcmcgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoICFvcHRpb25zLnVuaXF1ZSB8fCAhc2VsZi5oYXMoIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bGlzdC5wdXNoKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGFyZyAmJiBhcmcubGVuZ3RoICYmIHRvVHlwZSggYXJnICkgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBJbnNwZWN0IHJlY3Vyc2l2ZWx5XG5cdFx0XHRcdFx0XHRcdFx0YWRkKCBhcmcgKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdH0gKSggYXJndW1lbnRzICk7XG5cblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhIGNhbGxiYWNrIGZyb20gdGhlIGxpc3Rcblx0XHRcdHJlbW92ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBfLCBhcmcgKSB7XG5cdFx0XHRcdFx0dmFyIGluZGV4O1xuXHRcdFx0XHRcdHdoaWxlICggKCBpbmRleCA9IGpRdWVyeS5pbkFycmF5KCBhcmcsIGxpc3QsIGluZGV4ICkgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0bGlzdC5zcGxpY2UoIGluZGV4LCAxICk7XG5cblx0XHRcdFx0XHRcdC8vIEhhbmRsZSBmaXJpbmcgaW5kZXhlc1xuXHRcdFx0XHRcdFx0aWYgKCBpbmRleCA8PSBmaXJpbmdJbmRleCApIHtcblx0XHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXgtLTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDaGVjayBpZiBhIGdpdmVuIGNhbGxiYWNrIGlzIGluIHRoZSBsaXN0LlxuXHRcdFx0Ly8gSWYgbm8gYXJndW1lbnQgaXMgZ2l2ZW4sIHJldHVybiB3aGV0aGVyIG9yIG5vdCBsaXN0IGhhcyBjYWxsYmFja3MgYXR0YWNoZWQuXG5cdFx0XHRoYXM6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0cmV0dXJuIGZuID9cblx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggZm4sIGxpc3QgKSA+IC0xIDpcblx0XHRcdFx0XHRsaXN0Lmxlbmd0aCA+IDA7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBSZW1vdmUgYWxsIGNhbGxiYWNrcyBmcm9tIHRoZSBsaXN0XG5cdFx0XHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggbGlzdCApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBEaXNhYmxlIC5maXJlIGFuZCAuYWRkXG5cdFx0XHQvLyBBYm9ydCBhbnkgY3VycmVudC9wZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdC8vIENsZWFyIGFsbCBjYWxsYmFja3MgYW5kIHZhbHVlc1xuXHRcdFx0ZGlzYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGxvY2tlZCA9IHF1ZXVlID0gW107XG5cdFx0XHRcdGxpc3QgPSBtZW1vcnkgPSBcIlwiO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRkaXNhYmxlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhbGlzdDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmVcblx0XHRcdC8vIEFsc28gZGlzYWJsZSAuYWRkIHVubGVzcyB3ZSBoYXZlIG1lbW9yeSAoc2luY2UgaXQgd291bGQgaGF2ZSBubyBlZmZlY3QpXG5cdFx0XHQvLyBBYm9ydCBhbnkgcGVuZGluZyBleGVjdXRpb25zXG5cdFx0XHRsb2NrOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0aWYgKCAhbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXHRcdFx0bG9ja2VkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhbG9ja2VkO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgY2FsbGJhY2tzIHdpdGggdGhlIGdpdmVuIGNvbnRleHQgYW5kIGFyZ3VtZW50c1xuXHRcdFx0ZmlyZVdpdGg6IGZ1bmN0aW9uKCBjb250ZXh0LCBhcmdzICkge1xuXHRcdFx0XHRpZiAoICFsb2NrZWQgKSB7XG5cdFx0XHRcdFx0YXJncyA9IGFyZ3MgfHwgW107XG5cdFx0XHRcdFx0YXJncyA9IFsgY29udGV4dCwgYXJncy5zbGljZSA/IGFyZ3Muc2xpY2UoKSA6IGFyZ3MgXTtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBhcmdzICk7XG5cdFx0XHRcdFx0aWYgKCAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENhbGwgYWxsIHRoZSBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gYXJndW1lbnRzXG5cdFx0XHRmaXJlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0c2VsZi5maXJlV2l0aCggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gVG8ga25vdyBpZiB0aGUgY2FsbGJhY2tzIGhhdmUgYWxyZWFkeSBiZWVuIGNhbGxlZCBhdCBsZWFzdCBvbmNlXG5cdFx0XHRmaXJlZDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiAhIWZpcmVkO1xuXHRcdFx0fVxuXHRcdH07XG5cblx0cmV0dXJuIHNlbGY7XG59O1xuXG5cbmZ1bmN0aW9uIElkZW50aXR5KCB2ICkge1xuXHRyZXR1cm4gdjtcbn1cbmZ1bmN0aW9uIFRocm93ZXIoIGV4ICkge1xuXHR0aHJvdyBleDtcbn1cblxuZnVuY3Rpb24gYWRvcHRWYWx1ZSggdmFsdWUsIHJlc29sdmUsIHJlamVjdCwgbm9WYWx1ZSApIHtcblx0dmFyIG1ldGhvZDtcblxuXHR0cnkge1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIHByb21pc2UgYXNwZWN0IGZpcnN0IHRvIHByaXZpbGVnZSBzeW5jaHJvbm91cyBiZWhhdmlvclxuXHRcdGlmICggdmFsdWUgJiYgaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS5wcm9taXNlICkgKSApIHtcblx0XHRcdG1ldGhvZC5jYWxsKCB2YWx1ZSApLmRvbmUoIHJlc29sdmUgKS5mYWlsKCByZWplY3QgKTtcblxuXHRcdC8vIE90aGVyIHRoZW5hYmxlc1xuXHRcdH0gZWxzZSBpZiAoIHZhbHVlICYmIGlzRnVuY3Rpb24oICggbWV0aG9kID0gdmFsdWUudGhlbiApICkgKSB7XG5cdFx0XHRtZXRob2QuY2FsbCggdmFsdWUsIHJlc29sdmUsIHJlamVjdCApO1xuXG5cdFx0Ly8gT3RoZXIgbm9uLXRoZW5hYmxlc1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIENvbnRyb2wgYHJlc29sdmVgIGFyZ3VtZW50cyBieSBsZXR0aW5nIEFycmF5I3NsaWNlIGNhc3QgYm9vbGVhbiBgbm9WYWx1ZWAgdG8gaW50ZWdlcjpcblx0XHRcdC8vICogZmFsc2U6IFsgdmFsdWUgXS5zbGljZSggMCApID0+IHJlc29sdmUoIHZhbHVlIClcblx0XHRcdC8vICogdHJ1ZTogWyB2YWx1ZSBdLnNsaWNlKCAxICkgPT4gcmVzb2x2ZSgpXG5cdFx0XHRyZXNvbHZlLmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXS5zbGljZSggbm9WYWx1ZSApICk7XG5cdFx0fVxuXG5cdC8vIEZvciBQcm9taXNlcy9BKywgY29udmVydCBleGNlcHRpb25zIGludG8gcmVqZWN0aW9uc1xuXHQvLyBTaW5jZSBqUXVlcnkud2hlbiBkb2Vzbid0IHVud3JhcCB0aGVuYWJsZXMsIHdlIGNhbiBza2lwIHRoZSBleHRyYSBjaGVja3MgYXBwZWFyaW5nIGluXG5cdC8vIERlZmVycmVkI3RoZW4gdG8gY29uZGl0aW9uYWxseSBzdXBwcmVzcyByZWplY3Rpb24uXG5cdH0gY2F0Y2ggKCB2YWx1ZSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIG9ubHlcblx0XHQvLyBTdHJpY3QgbW9kZSBmdW5jdGlvbnMgaW52b2tlZCB3aXRob3V0IC5jYWxsLy5hcHBseSBnZXQgZ2xvYmFsLW9iamVjdCBjb250ZXh0XG5cdFx0cmVqZWN0LmFwcGx5KCB1bmRlZmluZWQsIFsgdmFsdWUgXSApO1xuXHR9XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHREZWZlcnJlZDogZnVuY3Rpb24oIGZ1bmMgKSB7XG5cdFx0dmFyIHR1cGxlcyA9IFtcblxuXHRcdFx0XHQvLyBhY3Rpb24sIGFkZCBsaXN0ZW5lciwgY2FsbGJhY2tzLFxuXHRcdFx0XHQvLyAuLi4gLnRoZW4gaGFuZGxlcnMsIGFyZ3VtZW50IGluZGV4LCBbZmluYWwgc3RhdGVdXG5cdFx0XHRcdFsgXCJub3RpZnlcIiwgXCJwcm9ncmVzc1wiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJtZW1vcnlcIiApLCAyIF0sXG5cdFx0XHRcdFsgXCJyZXNvbHZlXCIsIFwiZG9uZVwiLCBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSwgMCwgXCJyZXNvbHZlZFwiIF0sXG5cdFx0XHRcdFsgXCJyZWplY3RcIiwgXCJmYWlsXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAxLCBcInJlamVjdGVkXCIgXVxuXHRcdFx0XSxcblx0XHRcdHN0YXRlID0gXCJwZW5kaW5nXCIsXG5cdFx0XHRwcm9taXNlID0ge1xuXHRcdFx0XHRzdGF0ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHN0YXRlO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRhbHdheXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGRlZmVycmVkLmRvbmUoIGFyZ3VtZW50cyApLmZhaWwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHRcImNhdGNoXCI6IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcHJvbWlzZS50aGVuKCBudWxsLCBmbiApO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEtlZXAgcGlwZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0cGlwZTogZnVuY3Rpb24oIC8qIGZuRG9uZSwgZm5GYWlsLCBmblByb2dyZXNzICovICkge1xuXHRcdFx0XHRcdHZhciBmbnMgPSBhcmd1bWVudHM7XG5cblx0XHRcdFx0XHRyZXR1cm4galF1ZXJ5LkRlZmVycmVkKCBmdW5jdGlvbiggbmV3RGVmZXIgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZWFjaCggdHVwbGVzLCBmdW5jdGlvbiggaSwgdHVwbGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gTWFwIHR1cGxlcyAocHJvZ3Jlc3MsIGRvbmUsIGZhaWwpIHRvIGFyZ3VtZW50cyAoZG9uZSwgZmFpbCwgcHJvZ3Jlc3MpXG5cdFx0XHRcdFx0XHRcdHZhciBmbiA9IGlzRnVuY3Rpb24oIGZuc1sgdHVwbGVbIDQgXSBdICkgJiYgZm5zWyB0dXBsZVsgNCBdIF07XG5cblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQucHJvZ3Jlc3MoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIubm90aWZ5IH0pXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLmRvbmUoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVzb2x2ZSB9KVxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5mYWlsKGZ1bmN0aW9uKCkgeyBiaW5kIHRvIG5ld0RlZmVyIG9yIG5ld0RlZmVyLnJlamVjdCB9KVxuXHRcdFx0XHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDEgXSBdKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQgPSBmbiAmJiBmbi5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKCByZXR1cm5lZCAmJiBpc0Z1bmN0aW9uKCByZXR1cm5lZC5wcm9taXNlICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC5wcm9taXNlKClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LnByb2dyZXNzKCBuZXdEZWZlci5ub3RpZnkgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQuZG9uZSggbmV3RGVmZXIucmVzb2x2ZSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5mYWlsKCBuZXdEZWZlci5yZWplY3QgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXJbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRmbiA/IFsgcmV0dXJuZWQgXSA6IGFyZ3VtZW50c1xuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRcdGZucyA9IG51bGw7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblx0XHRcdFx0dGhlbjogZnVuY3Rpb24oIG9uRnVsZmlsbGVkLCBvblJlamVjdGVkLCBvblByb2dyZXNzICkge1xuXHRcdFx0XHRcdHZhciBtYXhEZXB0aCA9IDA7XG5cdFx0XHRcdFx0ZnVuY3Rpb24gcmVzb2x2ZSggZGVwdGgsIGRlZmVycmVkLCBoYW5kbGVyLCBzcGVjaWFsICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0YXJncyA9IGFyZ3VtZW50cyxcblx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR2YXIgcmV0dXJuZWQsIHRoZW47XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4zXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01OVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSWdub3JlIGRvdWJsZS1yZXNvbHV0aW9uIGF0dGVtcHRzXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoIDwgbWF4RGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQgPSBoYW5kbGVyLmFwcGx5KCB0aGF0LCBhcmdzICk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjFcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTQ4XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkID09PSBkZWZlcnJlZC5wcm9taXNlKCkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRocm93IG5ldyBUeXBlRXJyb3IoIFwiVGhlbmFibGUgc2VsZi1yZXNvbHV0aW9uXCIgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbnMgMi4zLjMuMSwgMy41XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01NFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNzVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFJldHJpZXZlIGB0aGVuYCBvbmx5IG9uY2Vcblx0XHRcdFx0XHRcdFx0XHRcdHRoZW4gPSByZXR1cm5lZCAmJlxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBjaGVjayBvYmplY3RzIGFuZCBmdW5jdGlvbnMgZm9yIHRoZW5hYmlsaXR5XG5cdFx0XHRcdFx0XHRcdFx0XHRcdCggdHlwZW9mIHJldHVybmVkID09PSBcIm9iamVjdFwiIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dHlwZW9mIHJldHVybmVkID09PSBcImZ1bmN0aW9uXCIgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZC50aGVuO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBIYW5kbGUgYSByZXR1cm5lZCB0aGVuYWJsZVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCB0aGVuICkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3BlY2lhbCBwcm9jZXNzb3JzIChub3RpZnkpIGp1c3Qgd2FpdCBmb3IgcmVzb2x1dGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gTm9ybWFsIHByb2Nlc3NvcnMgKHJlc29sdmUpIGFsc28gaG9vayBpbnRvIHByb2dyZXNzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyAuLi5hbmQgZGlzcmVnYXJkIG9sZGVyIHJlc29sdXRpb24gdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0bWF4RGVwdGgrKztcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoZW4uY2FsbChcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBJZGVudGl0eSwgc3BlY2lhbCApLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmVzb2x2ZSggbWF4RGVwdGgsIGRlZmVycmVkLCBUaHJvd2VyLCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhbGwgb3RoZXIgcmV0dXJuZWQgdmFsdWVzXG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC8vIE9ubHkgc3Vic3RpdHV0ZSBoYW5kbGVycyBwYXNzIG9uIGNvbnRleHRcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gSWRlbnRpdHkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhhdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhcmdzID0gWyByZXR1cm5lZCBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gUHJvY2VzcyB0aGUgdmFsdWUocylcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRGVmYXVsdCBwcm9jZXNzIGlzIHJlc29sdmVcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCBzcGVjaWFsIHx8IGRlZmVycmVkLnJlc29sdmVXaXRoICkoIHRoYXQsIGFyZ3MgKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBub3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgY2F0Y2ggYW5kIHJlamVjdCBleGNlcHRpb25zXG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcyA9IHNwZWNpYWwgP1xuXHRcdFx0XHRcdFx0XHRcdFx0bWlnaHRUaHJvdyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93KCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZXhjZXB0aW9uSG9vayApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rKCBlLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuNC4xXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNjFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgcG9zdC1yZXNvbHV0aW9uIGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGRlcHRoICsgMSA+PSBtYXhEZXB0aCApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gYW5kIG11bHRpcGxlIHZhbHVlcyAobm9uLXNwZWMgYmVoYXZpb3IpXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGhhbmRsZXIgIT09IFRocm93ZXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRoYXQgPSB1bmRlZmluZWQ7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIGUgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9uIDIuMy4zLjMuMVxuXHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC01N1xuXHRcdFx0XHRcdFx0XHQvLyBSZS1yZXNvbHZlIHByb21pc2VzIGltbWVkaWF0ZWx5IHRvIGRvZGdlIGZhbHNlIHJlamVjdGlvbiBmcm9tXG5cdFx0XHRcdFx0XHRcdC8vIHN1YnNlcXVlbnQgZXJyb3JzXG5cdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKSB7XG5cdFx0XHRcdFx0XHRcdFx0cHJvY2VzcygpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ2FsbCBhbiBvcHRpb25hbCBob29rIHRvIHJlY29yZCB0aGUgc3RhY2ssIGluIGNhc2Ugb2YgZXhjZXB0aW9uXG5cdFx0XHRcdFx0XHRcdFx0Ly8gc2luY2UgaXQncyBvdGhlcndpc2UgbG9zdCB3aGVuIGV4ZWN1dGlvbiBnb2VzIGFzeW5jXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cHJvY2Vzcy5zdGFja1RyYWNlID0galF1ZXJ5LkRlZmVycmVkLmdldFN0YWNrSG9vaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR3aW5kb3cuc2V0VGltZW91dCggcHJvY2VzcyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblxuXHRcdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRpc0Z1bmN0aW9uKCBvblByb2dyZXNzICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25Qcm9ncmVzcyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRJZGVudGl0eSxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlci5ub3RpZnlXaXRoXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cblx0XHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDEgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uRnVsZmlsbGVkICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25GdWxmaWxsZWQgOlxuXHRcdFx0XHRcdFx0XHRcdFx0SWRlbnRpdHlcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuYWRkKCAuLi4gKVxuXHRcdFx0XHRcdFx0dHVwbGVzWyAyIF1bIDMgXS5hZGQoXG5cdFx0XHRcdFx0XHRcdHJlc29sdmUoXG5cdFx0XHRcdFx0XHRcdFx0MCxcblx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlcixcblx0XHRcdFx0XHRcdFx0XHRpc0Z1bmN0aW9uKCBvblJlamVjdGVkICkgP1xuXHRcdFx0XHRcdFx0XHRcdFx0b25SZWplY3RlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRUaHJvd2VyXG5cdFx0XHRcdFx0XHRcdClcblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0fSApLnByb21pc2UoKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBHZXQgYSBwcm9taXNlIGZvciB0aGlzIGRlZmVycmVkXG5cdFx0XHRcdC8vIElmIG9iaiBpcyBwcm92aWRlZCwgdGhlIHByb21pc2UgYXNwZWN0IGlzIGFkZGVkIHRvIHRoZSBvYmplY3Rcblx0XHRcdFx0cHJvbWlzZTogZnVuY3Rpb24oIG9iaiApIHtcblx0XHRcdFx0XHRyZXR1cm4gb2JqICE9IG51bGwgPyBqUXVlcnkuZXh0ZW5kKCBvYmosIHByb21pc2UgKSA6IHByb21pc2U7XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cdFx0XHRkZWZlcnJlZCA9IHt9O1xuXG5cdFx0Ly8gQWRkIGxpc3Qtc3BlY2lmaWMgbWV0aG9kc1xuXHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblx0XHRcdHZhciBsaXN0ID0gdHVwbGVbIDIgXSxcblx0XHRcdFx0c3RhdGVTdHJpbmcgPSB0dXBsZVsgNSBdO1xuXG5cdFx0XHQvLyBwcm9taXNlLnByb2dyZXNzID0gbGlzdC5hZGRcblx0XHRcdC8vIHByb21pc2UuZG9uZSA9IGxpc3QuYWRkXG5cdFx0XHQvLyBwcm9taXNlLmZhaWwgPSBsaXN0LmFkZFxuXHRcdFx0cHJvbWlzZVsgdHVwbGVbIDEgXSBdID0gbGlzdC5hZGQ7XG5cblx0XHRcdC8vIEhhbmRsZSBzdGF0ZVxuXHRcdFx0aWYgKCBzdGF0ZVN0cmluZyApIHtcblx0XHRcdFx0bGlzdC5hZGQoXG5cdFx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZXNvbHZlZFwiIChpLmUuLCBmdWxmaWxsZWQpXG5cdFx0XHRcdFx0XHQvLyBzdGF0ZSA9IFwicmVqZWN0ZWRcIlxuXHRcdFx0XHRcdFx0c3RhdGUgPSBzdGF0ZVN0cmluZztcblx0XHRcdFx0XHR9LFxuXG5cdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHQvLyBmdWxmaWxsZWRfY2FsbGJhY2tzLmRpc2FibGVcblx0XHRcdFx0XHR0dXBsZXNbIDMgLSBpIF1bIDIgXS5kaXNhYmxlLFxuXG5cdFx0XHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuZGlzYWJsZVxuXHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5kaXNhYmxlXG5cdFx0XHRcdFx0dHVwbGVzWyAzIC0gaSBdWyAzIF0uZGlzYWJsZSxcblxuXHRcdFx0XHRcdC8vIHByb2dyZXNzX2NhbGxiYWNrcy5sb2NrXG5cdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDIgXS5sb2NrLFxuXG5cdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfaGFuZGxlcnMubG9ja1xuXHRcdFx0XHRcdHR1cGxlc1sgMCBdWyAzIF0ubG9ja1xuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5maXJlXG5cdFx0XHQvLyBmdWxmaWxsZWRfaGFuZGxlcnMuZmlyZVxuXHRcdFx0Ly8gcmVqZWN0ZWRfaGFuZGxlcnMuZmlyZVxuXHRcdFx0bGlzdC5hZGQoIHR1cGxlWyAzIF0uZmlyZSApO1xuXG5cdFx0XHQvLyBkZWZlcnJlZC5ub3RpZnkgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQubm90aWZ5V2l0aCguLi4pIH1cblx0XHRcdC8vIGRlZmVycmVkLnJlc29sdmUgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQucmVzb2x2ZVdpdGgoLi4uKSB9XG5cdFx0XHQvLyBkZWZlcnJlZC5yZWplY3QgPSBmdW5jdGlvbigpIHsgZGVmZXJyZWQucmVqZWN0V2l0aCguLi4pIH1cblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gKyBcIldpdGhcIiBdKCB0aGlzID09PSBkZWZlcnJlZCA/IHVuZGVmaW5lZCA6IHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH07XG5cblx0XHRcdC8vIGRlZmVycmVkLm5vdGlmeVdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHQvLyBkZWZlcnJlZC5yZXNvbHZlV2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdC8vIGRlZmVycmVkLnJlamVjdFdpdGggPSBsaXN0LmZpcmVXaXRoXG5cdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0gPSBsaXN0LmZpcmVXaXRoO1xuXHRcdH0gKTtcblxuXHRcdC8vIE1ha2UgdGhlIGRlZmVycmVkIGEgcHJvbWlzZVxuXHRcdHByb21pc2UucHJvbWlzZSggZGVmZXJyZWQgKTtcblxuXHRcdC8vIENhbGwgZ2l2ZW4gZnVuYyBpZiBhbnlcblx0XHRpZiAoIGZ1bmMgKSB7XG5cdFx0XHRmdW5jLmNhbGwoIGRlZmVycmVkLCBkZWZlcnJlZCApO1xuXHRcdH1cblxuXHRcdC8vIEFsbCBkb25lIVxuXHRcdHJldHVybiBkZWZlcnJlZDtcblx0fSxcblxuXHQvLyBEZWZlcnJlZCBoZWxwZXJcblx0d2hlbjogZnVuY3Rpb24oIHNpbmdsZVZhbHVlICkge1xuXHRcdHZhclxuXG5cdFx0XHQvLyBjb3VudCBvZiB1bmNvbXBsZXRlZCBzdWJvcmRpbmF0ZXNcblx0XHRcdHJlbWFpbmluZyA9IGFyZ3VtZW50cy5sZW5ndGgsXG5cblx0XHRcdC8vIGNvdW50IG9mIHVucHJvY2Vzc2VkIGFyZ3VtZW50c1xuXHRcdFx0aSA9IHJlbWFpbmluZyxcblxuXHRcdFx0Ly8gc3Vib3JkaW5hdGUgZnVsZmlsbG1lbnQgZGF0YVxuXHRcdFx0cmVzb2x2ZUNvbnRleHRzID0gQXJyYXkoIGkgKSxcblx0XHRcdHJlc29sdmVWYWx1ZXMgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSxcblxuXHRcdFx0Ly8gdGhlIG1hc3RlciBEZWZlcnJlZFxuXHRcdFx0bWFzdGVyID0galF1ZXJ5LkRlZmVycmVkKCksXG5cblx0XHRcdC8vIHN1Ym9yZGluYXRlIGNhbGxiYWNrIGZhY3Rvcnlcblx0XHRcdHVwZGF0ZUZ1bmMgPSBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXNvbHZlQ29udGV4dHNbIGkgXSA9IHRoaXM7XG5cdFx0XHRcdFx0cmVzb2x2ZVZhbHVlc1sgaSBdID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgPyBzbGljZS5jYWxsKCBhcmd1bWVudHMgKSA6IHZhbHVlO1xuXHRcdFx0XHRcdGlmICggISggLS1yZW1haW5pbmcgKSApIHtcblx0XHRcdFx0XHRcdG1hc3Rlci5yZXNvbHZlV2l0aCggcmVzb2x2ZUNvbnRleHRzLCByZXNvbHZlVmFsdWVzICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdFx0fTtcblxuXHRcdC8vIFNpbmdsZS0gYW5kIGVtcHR5IGFyZ3VtZW50cyBhcmUgYWRvcHRlZCBsaWtlIFByb21pc2UucmVzb2x2ZVxuXHRcdGlmICggcmVtYWluaW5nIDw9IDEgKSB7XG5cdFx0XHRhZG9wdFZhbHVlKCBzaW5nbGVWYWx1ZSwgbWFzdGVyLmRvbmUoIHVwZGF0ZUZ1bmMoIGkgKSApLnJlc29sdmUsIG1hc3Rlci5yZWplY3QsXG5cdFx0XHRcdCFyZW1haW5pbmcgKTtcblxuXHRcdFx0Ly8gVXNlIC50aGVuKCkgdG8gdW53cmFwIHNlY29uZGFyeSB0aGVuYWJsZXMgKGNmLiBnaC0zMDAwKVxuXHRcdFx0aWYgKCBtYXN0ZXIuc3RhdGUoKSA9PT0gXCJwZW5kaW5nXCIgfHxcblx0XHRcdFx0aXNGdW5jdGlvbiggcmVzb2x2ZVZhbHVlc1sgaSBdICYmIHJlc29sdmVWYWx1ZXNbIGkgXS50aGVuICkgKSB7XG5cblx0XHRcdFx0cmV0dXJuIG1hc3Rlci50aGVuKCk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gTXVsdGlwbGUgYXJndW1lbnRzIGFyZSBhZ2dyZWdhdGVkIGxpa2UgUHJvbWlzZS5hbGwgYXJyYXkgZWxlbWVudHNcblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdGFkb3B0VmFsdWUoIHJlc29sdmVWYWx1ZXNbIGkgXSwgdXBkYXRlRnVuYyggaSApLCBtYXN0ZXIucmVqZWN0ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIG1hc3Rlci5wcm9taXNlKCk7XG5cdH1cbn0gKTtcblxuXG4vLyBUaGVzZSB1c3VhbGx5IGluZGljYXRlIGEgcHJvZ3JhbW1lciBtaXN0YWtlIGR1cmluZyBkZXZlbG9wbWVudCxcbi8vIHdhcm4gYWJvdXQgdGhlbSBBU0FQIHJhdGhlciB0aGFuIHN3YWxsb3dpbmcgdGhlbSBieSBkZWZhdWx0LlxudmFyIHJlcnJvck5hbWVzID0gL14oRXZhbHxJbnRlcm5hbHxSYW5nZXxSZWZlcmVuY2V8U3ludGF4fFR5cGV8VVJJKUVycm9yJC87XG5cbmpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rID0gZnVuY3Rpb24oIGVycm9yLCBzdGFjayApIHtcblxuXHQvLyBTdXBwb3J0OiBJRSA4IC0gOSBvbmx5XG5cdC8vIENvbnNvbGUgZXhpc3RzIHdoZW4gZGV2IHRvb2xzIGFyZSBvcGVuLCB3aGljaCBjYW4gaGFwcGVuIGF0IGFueSB0aW1lXG5cdGlmICggd2luZG93LmNvbnNvbGUgJiYgd2luZG93LmNvbnNvbGUud2FybiAmJiBlcnJvciAmJiByZXJyb3JOYW1lcy50ZXN0KCBlcnJvci5uYW1lICkgKSB7XG5cdFx0d2luZG93LmNvbnNvbGUud2FybiggXCJqUXVlcnkuRGVmZXJyZWQgZXhjZXB0aW9uOiBcIiArIGVycm9yLm1lc3NhZ2UsIGVycm9yLnN0YWNrLCBzdGFjayApO1xuXHR9XG59O1xuXG5cblxuXG5qUXVlcnkucmVhZHlFeGNlcHRpb24gPSBmdW5jdGlvbiggZXJyb3IgKSB7XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHR0aHJvdyBlcnJvcjtcblx0fSApO1xufTtcblxuXG5cblxuLy8gVGhlIGRlZmVycmVkIHVzZWQgb24gRE9NIHJlYWR5XG52YXIgcmVhZHlMaXN0ID0galF1ZXJ5LkRlZmVycmVkKCk7XG5cbmpRdWVyeS5mbi5yZWFkeSA9IGZ1bmN0aW9uKCBmbiApIHtcblxuXHRyZWFkeUxpc3Rcblx0XHQudGhlbiggZm4gKVxuXG5cdFx0Ly8gV3JhcCBqUXVlcnkucmVhZHlFeGNlcHRpb24gaW4gYSBmdW5jdGlvbiBzbyB0aGF0IHRoZSBsb29rdXBcblx0XHQvLyBoYXBwZW5zIGF0IHRoZSB0aW1lIG9mIGVycm9yIGhhbmRsaW5nIGluc3RlYWQgb2YgY2FsbGJhY2tcblx0XHQvLyByZWdpc3RyYXRpb24uXG5cdFx0LmNhdGNoKCBmdW5jdGlvbiggZXJyb3IgKSB7XG5cdFx0XHRqUXVlcnkucmVhZHlFeGNlcHRpb24oIGVycm9yICk7XG5cdFx0fSApO1xuXG5cdHJldHVybiB0aGlzO1xufTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIElzIHRoZSBET00gcmVhZHkgdG8gYmUgdXNlZD8gU2V0IHRvIHRydWUgb25jZSBpdCBvY2N1cnMuXG5cdGlzUmVhZHk6IGZhbHNlLFxuXG5cdC8vIEEgY291bnRlciB0byB0cmFjayBob3cgbWFueSBpdGVtcyB0byB3YWl0IGZvciBiZWZvcmVcblx0Ly8gdGhlIHJlYWR5IGV2ZW50IGZpcmVzLiBTZWUgIzY3ODFcblx0cmVhZHlXYWl0OiAxLFxuXG5cdC8vIEhhbmRsZSB3aGVuIHRoZSBET00gaXMgcmVhZHlcblx0cmVhZHk6IGZ1bmN0aW9uKCB3YWl0ICkge1xuXG5cdFx0Ly8gQWJvcnQgaWYgdGhlcmUgYXJlIHBlbmRpbmcgaG9sZHMgb3Igd2UncmUgYWxyZWFkeSByZWFkeVxuXHRcdGlmICggd2FpdCA9PT0gdHJ1ZSA/IC0talF1ZXJ5LnJlYWR5V2FpdCA6IGpRdWVyeS5pc1JlYWR5ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJlbWVtYmVyIHRoYXQgdGhlIERPTSBpcyByZWFkeVxuXHRcdGpRdWVyeS5pc1JlYWR5ID0gdHJ1ZTtcblxuXHRcdC8vIElmIGEgbm9ybWFsIERPTSBSZWFkeSBldmVudCBmaXJlZCwgZGVjcmVtZW50LCBhbmQgd2FpdCBpZiBuZWVkIGJlXG5cdFx0aWYgKCB3YWl0ICE9PSB0cnVlICYmIC0talF1ZXJ5LnJlYWR5V2FpdCA+IDAgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gSWYgdGhlcmUgYXJlIGZ1bmN0aW9ucyBib3VuZCwgdG8gZXhlY3V0ZVxuXHRcdHJlYWR5TGlzdC5yZXNvbHZlV2l0aCggZG9jdW1lbnQsIFsgalF1ZXJ5IF0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkucmVhZHkudGhlbiA9IHJlYWR5TGlzdC50aGVuO1xuXG4vLyBUaGUgcmVhZHkgZXZlbnQgaGFuZGxlciBhbmQgc2VsZiBjbGVhbnVwIG1ldGhvZFxuZnVuY3Rpb24gY29tcGxldGVkKCkge1xuXHRkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCBcImxvYWRcIiwgY29tcGxldGVkICk7XG5cdGpRdWVyeS5yZWFkeSgpO1xufVxuXG4vLyBDYXRjaCBjYXNlcyB3aGVyZSAkKGRvY3VtZW50KS5yZWFkeSgpIGlzIGNhbGxlZFxuLy8gYWZ0ZXIgdGhlIGJyb3dzZXIgZXZlbnQgaGFzIGFscmVhZHkgb2NjdXJyZWQuXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMCBvbmx5XG4vLyBPbGRlciBJRSBzb21ldGltZXMgc2lnbmFscyBcImludGVyYWN0aXZlXCIgdG9vIHNvb25cbmlmICggZG9jdW1lbnQucmVhZHlTdGF0ZSA9PT0gXCJjb21wbGV0ZVwiIHx8XG5cdCggZG9jdW1lbnQucmVhZHlTdGF0ZSAhPT0gXCJsb2FkaW5nXCIgJiYgIWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5kb1Njcm9sbCApICkge1xuXG5cdC8vIEhhbmRsZSBpdCBhc3luY2hyb25vdXNseSB0byBhbGxvdyBzY3JpcHRzIHRoZSBvcHBvcnR1bml0eSB0byBkZWxheSByZWFkeVxuXHR3aW5kb3cuc2V0VGltZW91dCggalF1ZXJ5LnJlYWR5ICk7XG5cbn0gZWxzZSB7XG5cblx0Ly8gVXNlIHRoZSBoYW5keSBldmVudCBjYWxsYmFja1xuXHRkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCBcIkRPTUNvbnRlbnRMb2FkZWRcIiwgY29tcGxldGVkICk7XG5cblx0Ly8gQSBmYWxsYmFjayB0byB3aW5kb3cub25sb2FkLCB0aGF0IHdpbGwgYWx3YXlzIHdvcmtcblx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcbn1cblxuXG5cblxuLy8gTXVsdGlmdW5jdGlvbmFsIG1ldGhvZCB0byBnZXQgYW5kIHNldCB2YWx1ZXMgb2YgYSBjb2xsZWN0aW9uXG4vLyBUaGUgdmFsdWUvcyBjYW4gb3B0aW9uYWxseSBiZSBleGVjdXRlZCBpZiBpdCdzIGEgZnVuY3Rpb25cbnZhciBhY2Nlc3MgPSBmdW5jdGlvbiggZWxlbXMsIGZuLCBrZXksIHZhbHVlLCBjaGFpbmFibGUsIGVtcHR5R2V0LCByYXcgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBlbGVtcy5sZW5ndGgsXG5cdFx0YnVsayA9IGtleSA9PSBudWxsO1xuXG5cdC8vIFNldHMgbWFueSB2YWx1ZXNcblx0aWYgKCB0b1R5cGUoIGtleSApID09PSBcIm9iamVjdFwiICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cdFx0Zm9yICggaSBpbiBrZXkgKSB7XG5cdFx0XHRhY2Nlc3MoIGVsZW1zLCBmbiwgaSwga2V5WyBpIF0sIHRydWUsIGVtcHR5R2V0LCByYXcgKTtcblx0XHR9XG5cblx0Ly8gU2V0cyBvbmUgdmFsdWVcblx0fSBlbHNlIGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRjaGFpbmFibGUgPSB0cnVlO1xuXG5cdFx0aWYgKCAhaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJhdyA9IHRydWU7XG5cdFx0fVxuXG5cdFx0aWYgKCBidWxrICkge1xuXG5cdFx0XHQvLyBCdWxrIG9wZXJhdGlvbnMgcnVuIGFnYWluc3QgdGhlIGVudGlyZSBzZXRcblx0XHRcdGlmICggcmF3ICkge1xuXHRcdFx0XHRmbi5jYWxsKCBlbGVtcywgdmFsdWUgKTtcblx0XHRcdFx0Zm4gPSBudWxsO1xuXG5cdFx0XHQvLyAuLi5leGNlcHQgd2hlbiBleGVjdXRpbmcgZnVuY3Rpb24gdmFsdWVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRidWxrID0gZm47XG5cdFx0XHRcdGZuID0gZnVuY3Rpb24oIGVsZW0sIGtleSwgdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGJ1bGsuY2FsbCggalF1ZXJ5KCBlbGVtICksIHZhbHVlICk7XG5cdFx0XHRcdH07XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRmbihcblx0XHRcdFx0XHRlbGVtc1sgaSBdLCBrZXksIHJhdyA/XG5cdFx0XHRcdFx0dmFsdWUgOlxuXHRcdFx0XHRcdHZhbHVlLmNhbGwoIGVsZW1zWyBpIF0sIGksIGZuKCBlbGVtc1sgaSBdLCBrZXkgKSApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBjaGFpbmFibGUgKSB7XG5cdFx0cmV0dXJuIGVsZW1zO1xuXHR9XG5cblx0Ly8gR2V0c1xuXHRpZiAoIGJ1bGsgKSB7XG5cdFx0cmV0dXJuIGZuLmNhbGwoIGVsZW1zICk7XG5cdH1cblxuXHRyZXR1cm4gbGVuID8gZm4oIGVsZW1zWyAwIF0sIGtleSApIDogZW1wdHlHZXQ7XG59O1xuXG5cbi8vIE1hdGNoZXMgZGFzaGVkIHN0cmluZyBmb3IgY2FtZWxpemluZ1xudmFyIHJtc1ByZWZpeCA9IC9eLW1zLS8sXG5cdHJkYXNoQWxwaGEgPSAvLShbYS16XSkvZztcblxuLy8gVXNlZCBieSBjYW1lbENhc2UgYXMgY2FsbGJhY2sgdG8gcmVwbGFjZSgpXG5mdW5jdGlvbiBmY2FtZWxDYXNlKCBhbGwsIGxldHRlciApIHtcblx0cmV0dXJuIGxldHRlci50b1VwcGVyQ2FzZSgpO1xufVxuXG4vLyBDb252ZXJ0IGRhc2hlZCB0byBjYW1lbENhc2U7IHVzZWQgYnkgdGhlIGNzcyBhbmQgZGF0YSBtb2R1bGVzXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDE1XG4vLyBNaWNyb3NvZnQgZm9yZ290IHRvIGh1bXAgdGhlaXIgdmVuZG9yIHByZWZpeCAoIzk1NzIpXG5mdW5jdGlvbiBjYW1lbENhc2UoIHN0cmluZyApIHtcblx0cmV0dXJuIHN0cmluZy5yZXBsYWNlKCBybXNQcmVmaXgsIFwibXMtXCIgKS5yZXBsYWNlKCByZGFzaEFscGhhLCBmY2FtZWxDYXNlICk7XG59XG52YXIgYWNjZXB0RGF0YSA9IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHQvLyBBY2NlcHRzIG9ubHk6XG5cdC8vICAtIE5vZGVcblx0Ly8gICAgLSBOb2RlLkVMRU1FTlRfTk9ERVxuXHQvLyAgICAtIE5vZGUuRE9DVU1FTlRfTk9ERVxuXHQvLyAgLSBPYmplY3Rcblx0Ly8gICAgLSBBbnlcblx0cmV0dXJuIG93bmVyLm5vZGVUeXBlID09PSAxIHx8IG93bmVyLm5vZGVUeXBlID09PSA5IHx8ICEoICtvd25lci5ub2RlVHlwZSApO1xufTtcblxuXG5cblxuZnVuY3Rpb24gRGF0YSgpIHtcblx0dGhpcy5leHBhbmRvID0galF1ZXJ5LmV4cGFuZG8gKyBEYXRhLnVpZCsrO1xufVxuXG5EYXRhLnVpZCA9IDE7XG5cbkRhdGEucHJvdG90eXBlID0ge1xuXG5cdGNhY2hlOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cblx0XHQvLyBDaGVjayBpZiB0aGUgb3duZXIgb2JqZWN0IGFscmVhZHkgaGFzIGEgY2FjaGVcblx0XHR2YXIgdmFsdWUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHQvLyBJZiBub3QsIGNyZWF0ZSBvbmVcblx0XHRpZiAoICF2YWx1ZSApIHtcblx0XHRcdHZhbHVlID0ge307XG5cblx0XHRcdC8vIFdlIGNhbiBhY2NlcHQgZGF0YSBmb3Igbm9uLWVsZW1lbnQgbm9kZXMgaW4gbW9kZXJuIGJyb3dzZXJzLFxuXHRcdFx0Ly8gYnV0IHdlIHNob3VsZCBub3QsIHNlZSAjODMzNS5cblx0XHRcdC8vIEFsd2F5cyByZXR1cm4gYW4gZW1wdHkgb2JqZWN0LlxuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBvd25lciApICkge1xuXG5cdFx0XHRcdC8vIElmIGl0IGlzIGEgbm9kZSB1bmxpa2VseSB0byBiZSBzdHJpbmdpZnktZWQgb3IgbG9vcGVkIG92ZXJcblx0XHRcdFx0Ly8gdXNlIHBsYWluIGFzc2lnbm1lbnRcblx0XHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gPSB2YWx1ZTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2Ugc2VjdXJlIGl0IGluIGEgbm9uLWVudW1lcmFibGUgcHJvcGVydHlcblx0XHRcdFx0Ly8gY29uZmlndXJhYmxlIG11c3QgYmUgdHJ1ZSB0byBhbGxvdyB0aGUgcHJvcGVydHkgdG8gYmVcblx0XHRcdFx0Ly8gZGVsZXRlZCB3aGVuIGRhdGEgaXMgcmVtb3ZlZFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggb3duZXIsIHRoaXMuZXhwYW5kbywge1xuXHRcdFx0XHRcdFx0dmFsdWU6IHZhbHVlLFxuXHRcdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlXG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9LFxuXHRzZXQ6IGZ1bmN0aW9uKCBvd25lciwgZGF0YSwgdmFsdWUgKSB7XG5cdFx0dmFyIHByb3AsXG5cdFx0XHRjYWNoZSA9IHRoaXMuY2FjaGUoIG93bmVyICk7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIGtleSwgdmFsdWUgXSBhcmdzXG5cdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBkYXRhICkgXSA9IHZhbHVlO1xuXG5cdFx0Ly8gSGFuZGxlOiBbIG93bmVyLCB7IHByb3BlcnRpZXMgfSBdIGFyZ3Ncblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBDb3B5IHRoZSBwcm9wZXJ0aWVzIG9uZS1ieS1vbmUgdG8gdGhlIGNhY2hlIG9iamVjdFxuXHRcdFx0Zm9yICggcHJvcCBpbiBkYXRhICkge1xuXHRcdFx0XHRjYWNoZVsgY2FtZWxDYXNlKCBwcm9wICkgXSA9IGRhdGFbIHByb3AgXTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGNhY2hlO1xuXHR9LFxuXHRnZXQ6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHJldHVybiBrZXkgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHR0aGlzLmNhY2hlKCBvd25lciApIDpcblxuXHRcdFx0Ly8gQWx3YXlzIHVzZSBjYW1lbENhc2Uga2V5IChnaC0yMjU3KVxuXHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdICYmIG93bmVyWyB0aGlzLmV4cGFuZG8gXVsgY2FtZWxDYXNlKCBrZXkgKSBdO1xuXHR9LFxuXHRhY2Nlc3M6IGZ1bmN0aW9uKCBvd25lciwga2V5LCB2YWx1ZSApIHtcblxuXHRcdC8vIEluIGNhc2VzIHdoZXJlIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gTm8ga2V5IHdhcyBzcGVjaWZpZWRcblx0XHQvLyAgIDIuIEEgc3RyaW5nIGtleSB3YXMgc3BlY2lmaWVkLCBidXQgbm8gdmFsdWUgcHJvdmlkZWRcblx0XHQvL1xuXHRcdC8vIFRha2UgdGhlIFwicmVhZFwiIHBhdGggYW5kIGFsbG93IHRoZSBnZXQgbWV0aG9kIHRvIGRldGVybWluZVxuXHRcdC8vIHdoaWNoIHZhbHVlIHRvIHJldHVybiwgcmVzcGVjdGl2ZWx5IGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gVGhlIGVudGlyZSBjYWNoZSBvYmplY3Rcblx0XHQvLyAgIDIuIFRoZSBkYXRhIHN0b3JlZCBhdCB0aGUga2V5XG5cdFx0Ly9cblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8XG5cdFx0XHRcdCggKCBrZXkgJiYgdHlwZW9mIGtleSA9PT0gXCJzdHJpbmdcIiApICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSApIHtcblxuXHRcdFx0cmV0dXJuIHRoaXMuZ2V0KCBvd25lciwga2V5ICk7XG5cdFx0fVxuXG5cdFx0Ly8gV2hlbiB0aGUga2V5IGlzIG5vdCBhIHN0cmluZywgb3IgYm90aCBhIGtleSBhbmQgdmFsdWVcblx0XHQvLyBhcmUgc3BlY2lmaWVkLCBzZXQgb3IgZXh0ZW5kIChleGlzdGluZyBvYmplY3RzKSB3aXRoIGVpdGhlcjpcblx0XHQvL1xuXHRcdC8vICAgMS4gQW4gb2JqZWN0IG9mIHByb3BlcnRpZXNcblx0XHQvLyAgIDIuIEEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vXG5cdFx0dGhpcy5zZXQoIG93bmVyLCBrZXksIHZhbHVlICk7XG5cblx0XHQvLyBTaW5jZSB0aGUgXCJzZXRcIiBwYXRoIGNhbiBoYXZlIHR3byBwb3NzaWJsZSBlbnRyeSBwb2ludHNcblx0XHQvLyByZXR1cm4gdGhlIGV4cGVjdGVkIGRhdGEgYmFzZWQgb24gd2hpY2ggcGF0aCB3YXMgdGFrZW5bKl1cblx0XHRyZXR1cm4gdmFsdWUgIT09IHVuZGVmaW5lZCA/IHZhbHVlIDoga2V5O1xuXHR9LFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBvd25lciwga2V5ICkge1xuXHRcdHZhciBpLFxuXHRcdFx0Y2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cblx0XHRpZiAoIGNhY2hlID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCBrZXkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0Ly8gU3VwcG9ydCBhcnJheSBvciBzcGFjZSBzZXBhcmF0ZWQgc3RyaW5nIG9mIGtleXNcblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSgga2V5ICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYga2V5IGlzIGFuIGFycmF5IG9mIGtleXMuLi5cblx0XHRcdFx0Ly8gV2UgYWx3YXlzIHNldCBjYW1lbENhc2Uga2V5cywgc28gcmVtb3ZlIHRoYXQuXG5cdFx0XHRcdGtleSA9IGtleS5tYXAoIGNhbWVsQ2FzZSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0a2V5ID0gY2FtZWxDYXNlKCBrZXkgKTtcblxuXHRcdFx0XHQvLyBJZiBhIGtleSB3aXRoIHRoZSBzcGFjZXMgZXhpc3RzLCB1c2UgaXQuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSwgY3JlYXRlIGFuIGFycmF5IGJ5IG1hdGNoaW5nIG5vbi13aGl0ZXNwYWNlXG5cdFx0XHRcdGtleSA9IGtleSBpbiBjYWNoZSA/XG5cdFx0XHRcdFx0WyBrZXkgXSA6XG5cdFx0XHRcdFx0KCBrZXkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpID0ga2V5Lmxlbmd0aDtcblxuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5WyBpIF0gXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgdGhlIGV4cGFuZG8gaWYgdGhlcmUncyBubyBtb3JlIGRhdGFcblx0XHRpZiAoIGtleSA9PT0gdW5kZWZpbmVkIHx8IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1XG5cdFx0XHQvLyBXZWJraXQgJiBCbGluayBwZXJmb3JtYW5jZSBzdWZmZXJzIHdoZW4gZGVsZXRpbmcgcHJvcGVydGllc1xuXHRcdFx0Ly8gZnJvbSBET00gbm9kZXMsIHNvIHNldCB0byB1bmRlZmluZWQgaW5zdGVhZFxuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9Mzc4NjA3IChidWcgcmVzdHJpY3RlZClcblx0XHRcdGlmICggb3duZXIubm9kZVR5cGUgKSB7XG5cdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGRlbGV0ZSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXHRoYXNEYXRhOiBmdW5jdGlvbiggb3duZXIgKSB7XG5cdFx0dmFyIGNhY2hlID0gb3duZXJbIHRoaXMuZXhwYW5kbyBdO1xuXHRcdHJldHVybiBjYWNoZSAhPT0gdW5kZWZpbmVkICYmICFqUXVlcnkuaXNFbXB0eU9iamVjdCggY2FjaGUgKTtcblx0fVxufTtcbnZhciBkYXRhUHJpdiA9IG5ldyBEYXRhKCk7XG5cbnZhciBkYXRhVXNlciA9IG5ldyBEYXRhKCk7XG5cblxuXG4vL1x0SW1wbGVtZW50YXRpb24gU3VtbWFyeVxuLy9cbi8vXHQxLiBFbmZvcmNlIEFQSSBzdXJmYWNlIGFuZCBzZW1hbnRpYyBjb21wYXRpYmlsaXR5IHdpdGggMS45LnggYnJhbmNoXG4vL1x0Mi4gSW1wcm92ZSB0aGUgbW9kdWxlJ3MgbWFpbnRhaW5hYmlsaXR5IGJ5IHJlZHVjaW5nIHRoZSBzdG9yYWdlXG4vL1x0XHRwYXRocyB0byBhIHNpbmdsZSBtZWNoYW5pc20uXG4vL1x0My4gVXNlIHRoZSBzYW1lIHNpbmdsZSBtZWNoYW5pc20gdG8gc3VwcG9ydCBcInByaXZhdGVcIiBhbmQgXCJ1c2VyXCIgZGF0YS5cbi8vXHQ0LiBfTmV2ZXJfIGV4cG9zZSBcInByaXZhdGVcIiBkYXRhIHRvIHVzZXIgY29kZSAoVE9ETzogRHJvcCBfZGF0YSwgX3JlbW92ZURhdGEpXG4vL1x0NS4gQXZvaWQgZXhwb3NpbmcgaW1wbGVtZW50YXRpb24gZGV0YWlscyBvbiB1c2VyIG9iamVjdHMgKGVnLiBleHBhbmRvIHByb3BlcnRpZXMpXG4vL1x0Ni4gUHJvdmlkZSBhIGNsZWFyIHBhdGggZm9yIGltcGxlbWVudGF0aW9uIHVwZ3JhZGUgdG8gV2Vha01hcCBpbiAyMDE0XG5cbnZhciByYnJhY2UgPSAvXig/Olxce1tcXHdcXFddKlxcfXxcXFtbXFx3XFxXXSpcXF0pJC8sXG5cdHJtdWx0aURhc2ggPSAvW0EtWl0vZztcblxuZnVuY3Rpb24gZ2V0RGF0YSggZGF0YSApIHtcblx0aWYgKCBkYXRhID09PSBcInRydWVcIiApIHtcblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJmYWxzZVwiICkge1xuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdGlmICggZGF0YSA9PT0gXCJudWxsXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBPbmx5IGNvbnZlcnQgdG8gYSBudW1iZXIgaWYgaXQgZG9lc24ndCBjaGFuZ2UgdGhlIHN0cmluZ1xuXHRpZiAoIGRhdGEgPT09ICtkYXRhICsgXCJcIiApIHtcblx0XHRyZXR1cm4gK2RhdGE7XG5cdH1cblxuXHRpZiAoIHJicmFjZS50ZXN0KCBkYXRhICkgKSB7XG5cdFx0cmV0dXJuIEpTT04ucGFyc2UoIGRhdGEgKTtcblx0fVxuXG5cdHJldHVybiBkYXRhO1xufVxuXG5mdW5jdGlvbiBkYXRhQXR0ciggZWxlbSwga2V5LCBkYXRhICkge1xuXHR2YXIgbmFtZTtcblxuXHQvLyBJZiBub3RoaW5nIHdhcyBmb3VuZCBpbnRlcm5hbGx5LCB0cnkgdG8gZmV0Y2ggYW55XG5cdC8vIGRhdGEgZnJvbSB0aGUgSFRNTDUgZGF0YS0qIGF0dHJpYnV0ZVxuXHRpZiAoIGRhdGEgPT09IHVuZGVmaW5lZCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdG5hbWUgPSBcImRhdGEtXCIgKyBrZXkucmVwbGFjZSggcm11bHRpRGFzaCwgXCItJCZcIiApLnRvTG93ZXJDYXNlKCk7XG5cdFx0ZGF0YSA9IGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICk7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0dHJ5IHtcblx0XHRcdFx0ZGF0YSA9IGdldERhdGEoIGRhdGEgKTtcblx0XHRcdH0gY2F0Y2ggKCBlICkge31cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHdlIHNldCB0aGUgZGF0YSBzbyBpdCBpc24ndCBjaGFuZ2VkIGxhdGVyXG5cdFx0XHRkYXRhVXNlci5zZXQoIGVsZW0sIGtleSwgZGF0YSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gZGF0YTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRoYXNEYXRhOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuaGFzRGF0YSggZWxlbSApIHx8IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKTtcblx0fSxcblxuXHRkYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVVzZXIuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YVVzZXIucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH0sXG5cblx0Ly8gVE9ETzogTm93IHRoYXQgYWxsIGNhbGxzIHRvIF9kYXRhIGFuZCBfcmVtb3ZlRGF0YSBoYXZlIGJlZW4gcmVwbGFjZWRcblx0Ly8gd2l0aCBkaXJlY3QgY2FsbHMgdG8gZGF0YVByaXYgbWV0aG9kcywgdGhlc2UgY2FuIGJlIGRlcHJlY2F0ZWQuXG5cdF9kYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZGF0YSApIHtcblx0XHRyZXR1cm4gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBuYW1lLCBkYXRhICk7XG5cdH0sXG5cblx0X3JlbW92ZURhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lICkge1xuXHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgbmFtZSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGF0YTogZnVuY3Rpb24oIGtleSwgdmFsdWUgKSB7XG5cdFx0dmFyIGksIG5hbWUsIGRhdGEsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0YXR0cnMgPSBlbGVtICYmIGVsZW0uYXR0cmlidXRlcztcblxuXHRcdC8vIEdldHMgYWxsIHZhbHVlc1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHRoaXMubGVuZ3RoICkge1xuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtICk7XG5cblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICYmICFkYXRhUHJpdi5nZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIgKSApIHtcblx0XHRcdFx0XHRpID0gYXR0cnMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXG5cdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSAxMSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBUaGUgYXR0cnMgZWxlbWVudHMgY2FuIGJlIG51bGwgKCMxNDg5NClcblx0XHRcdFx0XHRcdGlmICggYXR0cnNbIGkgXSApIHtcblx0XHRcdFx0XHRcdFx0bmFtZSA9IGF0dHJzWyBpIF0ubmFtZTtcblx0XHRcdFx0XHRcdFx0aWYgKCBuYW1lLmluZGV4T2YoIFwiZGF0YS1cIiApID09PSAwICkge1xuXHRcdFx0XHRcdFx0XHRcdG5hbWUgPSBjYW1lbENhc2UoIG5hbWUuc2xpY2UoIDUgKSApO1xuXHRcdFx0XHRcdFx0XHRcdGRhdGFBdHRyKCBlbGVtLCBuYW1lLCBkYXRhWyBuYW1lIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiaGFzRGF0YUF0dHJzXCIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZGF0YTtcblx0XHR9XG5cblx0XHQvLyBTZXRzIG11bHRpcGxlIHZhbHVlc1xuXHRcdGlmICggdHlwZW9mIGtleSA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhVXNlci5zZXQoIHRoaXMsIGtleSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBkYXRhO1xuXG5cdFx0XHQvLyBUaGUgY2FsbGluZyBqUXVlcnkgb2JqZWN0IChlbGVtZW50IG1hdGNoZXMpIGlzIG5vdCBlbXB0eVxuXHRcdFx0Ly8gKGFuZCB0aGVyZWZvcmUgaGFzIGFuIGVsZW1lbnQgYXBwZWFycyBhdCB0aGlzWyAwIF0pIGFuZCB0aGVcblx0XHRcdC8vIGB2YWx1ZWAgcGFyYW1ldGVyIHdhcyBub3QgdW5kZWZpbmVkLiBBbiBlbXB0eSBqUXVlcnkgb2JqZWN0XG5cdFx0XHQvLyB3aWxsIHJlc3VsdCBpbiBgdW5kZWZpbmVkYCBmb3IgZWxlbSA9IHRoaXNbIDAgXSB3aGljaCB3aWxsXG5cdFx0XHQvLyB0aHJvdyBhbiBleGNlcHRpb24gaWYgYW4gYXR0ZW1wdCB0byByZWFkIGEgZGF0YSBjYWNoZSBpcyBtYWRlLlxuXHRcdFx0aWYgKCBlbGVtICYmIHZhbHVlID09PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0Ly8gQXR0ZW1wdCB0byBnZXQgZGF0YSBmcm9tIHRoZSBjYWNoZVxuXHRcdFx0XHQvLyBUaGUga2V5IHdpbGwgYWx3YXlzIGJlIGNhbWVsQ2FzZWQgaW4gRGF0YVxuXHRcdFx0XHRkYXRhID0gZGF0YVVzZXIuZ2V0KCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIFwiZGlzY292ZXJcIiB0aGUgZGF0YSBpblxuXHRcdFx0XHQvLyBIVE1MNSBjdXN0b20gZGF0YS0qIGF0dHJzXG5cdFx0XHRcdGRhdGEgPSBkYXRhQXR0ciggZWxlbSwga2V5ICk7XG5cdFx0XHRcdGlmICggZGF0YSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdHJldHVybiBkYXRhO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gV2UgdHJpZWQgcmVhbGx5IGhhcmQsIGJ1dCB0aGUgZGF0YSBkb2Vzbid0IGV4aXN0LlxuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNldCB0aGUgZGF0YS4uLlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHQvLyBXZSBhbHdheXMgc3RvcmUgdGhlIGNhbWVsQ2FzZWQga2V5XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5LCB2YWx1ZSApO1xuXHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSwgbnVsbCwgdHJ1ZSApO1xuXHR9LFxuXG5cdHJlbW92ZURhdGE6IGZ1bmN0aW9uKCBrZXkgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRkYXRhVXNlci5yZW1vdmUoIHRoaXMsIGtleSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHRlbmQoIHtcblx0cXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBxdWV1ZTtcblxuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHR5cGUgPSAoIHR5cGUgfHwgXCJmeFwiICkgKyBcInF1ZXVlXCI7XG5cdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmdldCggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHQvLyBTcGVlZCB1cCBkZXF1ZXVlIGJ5IGdldHRpbmcgb3V0IHF1aWNrbHkgaWYgdGhpcyBpcyBqdXN0IGEgbG9va3VwXG5cdFx0XHRpZiAoIGRhdGEgKSB7XG5cdFx0XHRcdGlmICggIXF1ZXVlIHx8IEFycmF5LmlzQXJyYXkoIGRhdGEgKSApIHtcblx0XHRcdFx0XHRxdWV1ZSA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgdHlwZSwgalF1ZXJ5Lm1ha2VBcnJheSggZGF0YSApICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0cXVldWUucHVzaCggZGF0YSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcXVldWUgfHwgW107XG5cdFx0fVxuXHR9LFxuXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRcdHZhciBxdWV1ZSA9IGpRdWVyeS5xdWV1ZSggZWxlbSwgdHlwZSApLFxuXHRcdFx0c3RhcnRMZW5ndGggPSBxdWV1ZS5sZW5ndGgsXG5cdFx0XHRmbiA9IHF1ZXVlLnNoaWZ0KCksXG5cdFx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgdHlwZSApLFxuXHRcdFx0bmV4dCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggZWxlbSwgdHlwZSApO1xuXHRcdFx0fTtcblxuXHRcdC8vIElmIHRoZSBmeCBxdWV1ZSBpcyBkZXF1ZXVlZCwgYWx3YXlzIHJlbW92ZSB0aGUgcHJvZ3Jlc3Mgc2VudGluZWxcblx0XHRpZiAoIGZuID09PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKTtcblx0XHRcdHN0YXJ0TGVuZ3RoLS07XG5cdFx0fVxuXG5cdFx0aWYgKCBmbiApIHtcblxuXHRcdFx0Ly8gQWRkIGEgcHJvZ3Jlc3Mgc2VudGluZWwgdG8gcHJldmVudCB0aGUgZnggcXVldWUgZnJvbSBiZWluZ1xuXHRcdFx0Ly8gYXV0b21hdGljYWxseSBkZXF1ZXVlZFxuXHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgKSB7XG5cdFx0XHRcdHF1ZXVlLnVuc2hpZnQoIFwiaW5wcm9ncmVzc1wiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENsZWFyIHVwIHRoZSBsYXN0IHF1ZXVlIHN0b3AgZnVuY3Rpb25cblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0Zm4uY2FsbCggZWxlbSwgbmV4dCwgaG9va3MgKTtcblx0XHR9XG5cblx0XHRpZiAoICFzdGFydExlbmd0aCAmJiBob29rcyApIHtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUoKTtcblx0XHR9XG5cdH0sXG5cblx0Ly8gTm90IHB1YmxpYyAtIGdlbmVyYXRlIGEgcXVldWVIb29rcyBvYmplY3QsIG9yIHJldHVybiB0aGUgY3VycmVudCBvbmVcblx0X3F1ZXVlSG9va3M6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlICkge1xuXHRcdHZhciBrZXkgPSB0eXBlICsgXCJxdWV1ZUhvb2tzXCI7XG5cdFx0cmV0dXJuIGRhdGFQcml2LmdldCggZWxlbSwga2V5ICkgfHwgZGF0YVByaXYuYWNjZXNzKCBlbGVtLCBrZXksIHtcblx0XHRcdGVtcHR5OiBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKS5hZGQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFsgdHlwZSArIFwicXVldWVcIiwga2V5IF0gKTtcblx0XHRcdH0gKVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHF1ZXVlOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgc2V0dGVyID0gMjtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRkYXRhID0gdHlwZTtcblx0XHRcdHR5cGUgPSBcImZ4XCI7XG5cdFx0XHRzZXR0ZXItLTtcblx0XHR9XG5cblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggPCBzZXR0ZXIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnF1ZXVlKCB0aGlzWyAwIF0sIHR5cGUgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZGF0YSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMgOlxuXHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBkYXRhICk7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIGEgaG9va3MgZm9yIHRoaXMgcXVldWVcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdFx0aWYgKCB0eXBlID09PSBcImZ4XCIgJiYgcXVldWVbIDAgXSAhPT0gXCJpbnByb2dyZXNzXCIgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHR9LFxuXHRkZXF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCB0eXBlICk7XG5cdFx0fSApO1xuXHR9LFxuXHRjbGVhclF1ZXVlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdH0sXG5cblx0Ly8gR2V0IGEgcHJvbWlzZSByZXNvbHZlZCB3aGVuIHF1ZXVlcyBvZiBhIGNlcnRhaW4gdHlwZVxuXHQvLyBhcmUgZW1wdGllZCAoZnggaXMgdGhlIHR5cGUgYnkgZGVmYXVsdClcblx0cHJvbWlzZTogZnVuY3Rpb24oIHR5cGUsIG9iaiApIHtcblx0XHR2YXIgdG1wLFxuXHRcdFx0Y291bnQgPSAxLFxuXHRcdFx0ZGVmZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGVsZW1lbnRzID0gdGhpcyxcblx0XHRcdGkgPSB0aGlzLmxlbmd0aCxcblx0XHRcdHJlc29sdmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhKCAtLWNvdW50ICkgKSB7XG5cdFx0XHRcdFx0ZGVmZXIucmVzb2x2ZVdpdGgoIGVsZW1lbnRzLCBbIGVsZW1lbnRzIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRvYmogPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHR0bXAgPSBkYXRhUHJpdi5nZXQoIGVsZW1lbnRzWyBpIF0sIHR5cGUgKyBcInF1ZXVlSG9va3NcIiApO1xuXHRcdFx0aWYgKCB0bXAgJiYgdG1wLmVtcHR5ICkge1xuXHRcdFx0XHRjb3VudCsrO1xuXHRcdFx0XHR0bXAuZW1wdHkuYWRkKCByZXNvbHZlICk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJlc29sdmUoKTtcblx0XHRyZXR1cm4gZGVmZXIucHJvbWlzZSggb2JqICk7XG5cdH1cbn0gKTtcbnZhciBwbnVtID0gKCAvWystXT8oPzpcXGQqXFwufClcXGQrKD86W2VFXVsrLV0/XFxkK3wpLyApLnNvdXJjZTtcblxudmFyIHJjc3NOdW0gPSBuZXcgUmVnRXhwKCBcIl4oPzooWystXSk9fCkoXCIgKyBwbnVtICsgXCIpKFthLXolXSopJFwiLCBcImlcIiApO1xuXG5cbnZhciBjc3NFeHBhbmQgPSBbIFwiVG9wXCIsIFwiUmlnaHRcIiwgXCJCb3R0b21cIiwgXCJMZWZ0XCIgXTtcblxudmFyIGRvY3VtZW50RWxlbWVudCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblxuXG5cblx0dmFyIGlzQXR0YWNoZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApO1xuXHRcdH0sXG5cdFx0Y29tcG9zZWQgPSB7IGNvbXBvc2VkOiB0cnVlIH07XG5cblx0Ly8gU3VwcG9ydDogSUUgOSAtIDExKywgRWRnZSAxMiAtIDE4KywgaU9TIDEwLjAgLSAxMC4yIG9ubHlcblx0Ly8gQ2hlY2sgYXR0YWNobWVudCBhY3Jvc3Mgc2hhZG93IERPTSBib3VuZGFyaWVzIHdoZW4gcG9zc2libGUgKGdoLTM1MDQpXG5cdC8vIFN1cHBvcnQ6IGlPUyAxMC4wLTEwLjIgb25seVxuXHQvLyBFYXJseSBpT1MgMTAgdmVyc2lvbnMgc3VwcG9ydCBgYXR0YWNoU2hhZG93YCBidXQgbm90IGBnZXRSb290Tm9kZWAsXG5cdC8vIGxlYWRpbmcgdG8gZXJyb3JzLiBXZSBuZWVkIHRvIGNoZWNrIGZvciBgZ2V0Um9vdE5vZGVgLlxuXHRpZiAoIGRvY3VtZW50RWxlbWVudC5nZXRSb290Tm9kZSApIHtcblx0XHRpc0F0dGFjaGVkID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmNvbnRhaW5zKCBlbGVtLm93bmVyRG9jdW1lbnQsIGVsZW0gKSB8fFxuXHRcdFx0XHRlbGVtLmdldFJvb3ROb2RlKCBjb21wb3NlZCApID09PSBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cdFx0fTtcblx0fVxudmFyIGlzSGlkZGVuV2l0aGluVHJlZSA9IGZ1bmN0aW9uKCBlbGVtLCBlbCApIHtcblxuXHRcdC8vIGlzSGlkZGVuV2l0aGluVHJlZSBtaWdodCBiZSBjYWxsZWQgZnJvbSBqUXVlcnkjZmlsdGVyIGZ1bmN0aW9uO1xuXHRcdC8vIGluIHRoYXQgY2FzZSwgZWxlbWVudCB3aWxsIGJlIHNlY29uZCBhcmd1bWVudFxuXHRcdGVsZW0gPSBlbCB8fCBlbGVtO1xuXG5cdFx0Ly8gSW5saW5lIHN0eWxlIHRydW1wcyBhbGxcblx0XHRyZXR1cm4gZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIm5vbmVcIiB8fFxuXHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID09PSBcIlwiICYmXG5cblx0XHRcdC8vIE90aGVyd2lzZSwgY2hlY2sgY29tcHV0ZWQgc3R5bGVcblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MyAtIDQ1XG5cdFx0XHQvLyBEaXNjb25uZWN0ZWQgZWxlbWVudHMgY2FuIGhhdmUgY29tcHV0ZWQgZGlzcGxheTogbm9uZSwgc28gZmlyc3QgY29uZmlybSB0aGF0IGVsZW0gaXNcblx0XHRcdC8vIGluIHRoZSBkb2N1bWVudC5cblx0XHRcdGlzQXR0YWNoZWQoIGVsZW0gKSAmJlxuXG5cdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApID09PSBcIm5vbmVcIjtcblx0fTtcblxudmFyIHN3YXAgPSBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgY2FsbGJhY2ssIGFyZ3MgKSB7XG5cdHZhciByZXQsIG5hbWUsXG5cdFx0b2xkID0ge307XG5cblx0Ly8gUmVtZW1iZXIgdGhlIG9sZCB2YWx1ZXMsIGFuZCBpbnNlcnQgdGhlIG5ldyBvbmVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRvbGRbIG5hbWUgXSA9IGVsZW0uc3R5bGVbIG5hbWUgXTtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvcHRpb25zWyBuYW1lIF07XG5cdH1cblxuXHRyZXQgPSBjYWxsYmFjay5hcHBseSggZWxlbSwgYXJncyB8fCBbXSApO1xuXG5cdC8vIFJldmVydCB0aGUgb2xkIHZhbHVlc1xuXHRmb3IgKCBuYW1lIGluIG9wdGlvbnMgKSB7XG5cdFx0ZWxlbS5zdHlsZVsgbmFtZSBdID0gb2xkWyBuYW1lIF07XG5cdH1cblxuXHRyZXR1cm4gcmV0O1xufTtcblxuXG5cblxuZnVuY3Rpb24gYWRqdXN0Q1NTKCBlbGVtLCBwcm9wLCB2YWx1ZVBhcnRzLCB0d2VlbiApIHtcblx0dmFyIGFkanVzdGVkLCBzY2FsZSxcblx0XHRtYXhJdGVyYXRpb25zID0gMjAsXG5cdFx0Y3VycmVudFZhbHVlID0gdHdlZW4gP1xuXHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiB0d2Vlbi5jdXIoKTtcblx0XHRcdH0gOlxuXHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHJldHVybiBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wLCBcIlwiICk7XG5cdFx0XHR9LFxuXHRcdGluaXRpYWwgPSBjdXJyZW50VmFsdWUoKSxcblx0XHR1bml0ID0gdmFsdWVQYXJ0cyAmJiB2YWx1ZVBhcnRzWyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICksXG5cblx0XHQvLyBTdGFydGluZyB2YWx1ZSBjb21wdXRhdGlvbiBpcyByZXF1aXJlZCBmb3IgcG90ZW50aWFsIHVuaXQgbWlzbWF0Y2hlc1xuXHRcdGluaXRpYWxJblVuaXQgPSBlbGVtLm5vZGVUeXBlICYmXG5cdFx0XHQoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSB8fCB1bml0ICE9PSBcInB4XCIgJiYgK2luaXRpYWwgKSAmJlxuXHRcdFx0cmNzc051bS5leGVjKCBqUXVlcnkuY3NzKCBlbGVtLCBwcm9wICkgKTtcblxuXHRpZiAoIGluaXRpYWxJblVuaXQgJiYgaW5pdGlhbEluVW5pdFsgMyBdICE9PSB1bml0ICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTU0XG5cdFx0Ly8gSGFsdmUgdGhlIGl0ZXJhdGlvbiB0YXJnZXQgdmFsdWUgdG8gcHJldmVudCBpbnRlcmZlcmVuY2UgZnJvbSBDU1MgdXBwZXIgYm91bmRzIChnaC0yMTQ0KVxuXHRcdGluaXRpYWwgPSBpbml0aWFsIC8gMjtcblxuXHRcdC8vIFRydXN0IHVuaXRzIHJlcG9ydGVkIGJ5IGpRdWVyeS5jc3Ncblx0XHR1bml0ID0gdW5pdCB8fCBpbml0aWFsSW5Vbml0WyAzIF07XG5cblx0XHQvLyBJdGVyYXRpdmVseSBhcHByb3hpbWF0ZSBmcm9tIGEgbm9uemVybyBzdGFydGluZyBwb2ludFxuXHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbCB8fCAxO1xuXG5cdFx0d2hpbGUgKCBtYXhJdGVyYXRpb25zLS0gKSB7XG5cblx0XHRcdC8vIEV2YWx1YXRlIGFuZCB1cGRhdGUgb3VyIGJlc3QgZ3Vlc3MgKGRvdWJsaW5nIGd1ZXNzZXMgdGhhdCB6ZXJvIG91dCkuXG5cdFx0XHQvLyBGaW5pc2ggaWYgdGhlIHNjYWxlIGVxdWFscyBvciBjcm9zc2VzIDEgKG1ha2luZyB0aGUgb2xkKm5ldyBwcm9kdWN0IG5vbi1wb3NpdGl2ZSkuXG5cdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIGluaXRpYWxJblVuaXQgKyB1bml0ICk7XG5cdFx0XHRpZiAoICggMSAtIHNjYWxlICkgKiAoIDEgLSAoIHNjYWxlID0gY3VycmVudFZhbHVlKCkgLyBpbml0aWFsIHx8IDAuNSApICkgPD0gMCApIHtcblx0XHRcdFx0bWF4SXRlcmF0aW9ucyA9IDA7XG5cdFx0XHR9XG5cdFx0XHRpbml0aWFsSW5Vbml0ID0gaW5pdGlhbEluVW5pdCAvIHNjYWxlO1xuXG5cdFx0fVxuXG5cdFx0aW5pdGlhbEluVW5pdCA9IGluaXRpYWxJblVuaXQgKiAyO1xuXHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgaW5pdGlhbEluVW5pdCArIHVuaXQgKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB3ZSB1cGRhdGUgdGhlIHR3ZWVuIHByb3BlcnRpZXMgbGF0ZXIgb25cblx0XHR2YWx1ZVBhcnRzID0gdmFsdWVQYXJ0cyB8fCBbXTtcblx0fVxuXG5cdGlmICggdmFsdWVQYXJ0cyApIHtcblx0XHRpbml0aWFsSW5Vbml0ID0gK2luaXRpYWxJblVuaXQgfHwgK2luaXRpYWwgfHwgMDtcblxuXHRcdC8vIEFwcGx5IHJlbGF0aXZlIG9mZnNldCAoKz0vLT0pIGlmIHNwZWNpZmllZFxuXHRcdGFkanVzdGVkID0gdmFsdWVQYXJ0c1sgMSBdID9cblx0XHRcdGluaXRpYWxJblVuaXQgKyAoIHZhbHVlUGFydHNbIDEgXSArIDEgKSAqIHZhbHVlUGFydHNbIDIgXSA6XG5cdFx0XHQrdmFsdWVQYXJ0c1sgMiBdO1xuXHRcdGlmICggdHdlZW4gKSB7XG5cdFx0XHR0d2Vlbi51bml0ID0gdW5pdDtcblx0XHRcdHR3ZWVuLnN0YXJ0ID0gaW5pdGlhbEluVW5pdDtcblx0XHRcdHR3ZWVuLmVuZCA9IGFkanVzdGVkO1xuXHRcdH1cblx0fVxuXHRyZXR1cm4gYWRqdXN0ZWQ7XG59XG5cblxudmFyIGRlZmF1bHREaXNwbGF5TWFwID0ge307XG5cbmZ1bmN0aW9uIGdldERlZmF1bHREaXNwbGF5KCBlbGVtICkge1xuXHR2YXIgdGVtcCxcblx0XHRkb2MgPSBlbGVtLm93bmVyRG9jdW1lbnQsXG5cdFx0bm9kZU5hbWUgPSBlbGVtLm5vZGVOYW1lLFxuXHRcdGRpc3BsYXkgPSBkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXTtcblxuXHRpZiAoIGRpc3BsYXkgKSB7XG5cdFx0cmV0dXJuIGRpc3BsYXk7XG5cdH1cblxuXHR0ZW1wID0gZG9jLmJvZHkuYXBwZW5kQ2hpbGQoIGRvYy5jcmVhdGVFbGVtZW50KCBub2RlTmFtZSApICk7XG5cdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCB0ZW1wLCBcImRpc3BsYXlcIiApO1xuXG5cdHRlbXAucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggdGVtcCApO1xuXG5cdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0ZGlzcGxheSA9IFwiYmxvY2tcIjtcblx0fVxuXHRkZWZhdWx0RGlzcGxheU1hcFsgbm9kZU5hbWUgXSA9IGRpc3BsYXk7XG5cblx0cmV0dXJuIGRpc3BsYXk7XG59XG5cbmZ1bmN0aW9uIHNob3dIaWRlKCBlbGVtZW50cywgc2hvdyApIHtcblx0dmFyIGRpc3BsYXksIGVsZW0sXG5cdFx0dmFsdWVzID0gW10sXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGVsZW1lbnRzLmxlbmd0aDtcblxuXHQvLyBEZXRlcm1pbmUgbmV3IGRpc3BsYXkgdmFsdWUgZm9yIGVsZW1lbnRzIHRoYXQgbmVlZCB0byBjaGFuZ2Vcblx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRlbGVtID0gZWxlbWVudHNbIGluZGV4IF07XG5cdFx0aWYgKCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdGNvbnRpbnVlO1xuXHRcdH1cblxuXHRcdGRpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXk7XG5cdFx0aWYgKCBzaG93ICkge1xuXG5cdFx0XHQvLyBTaW5jZSB3ZSBmb3JjZSB2aXNpYmlsaXR5IHVwb24gY2FzY2FkZS1oaWRkZW4gZWxlbWVudHMsIGFuIGltbWVkaWF0ZSAoYW5kIHNsb3cpXG5cdFx0XHQvLyBjaGVjayBpcyByZXF1aXJlZCBpbiB0aGlzIGZpcnN0IGxvb3AgdW5sZXNzIHdlIGhhdmUgYSBub25lbXB0eSBkaXNwbGF5IHZhbHVlIChlaXRoZXJcblx0XHRcdC8vIGlubGluZSBvciBhYm91dC10by1iZS1yZXN0b3JlZClcblx0XHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJkaXNwbGF5XCIgKSB8fCBudWxsO1xuXHRcdFx0XHRpZiAoICF2YWx1ZXNbIGluZGV4IF0gKSB7XG5cdFx0XHRcdFx0ZWxlbS5zdHlsZS5kaXNwbGF5ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0aWYgKCBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiYgaXNIaWRkZW5XaXRoaW5UcmVlKCBlbGVtICkgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IGdldERlZmF1bHREaXNwbGF5KCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdGlmICggZGlzcGxheSAhPT0gXCJub25lXCIgKSB7XG5cdFx0XHRcdHZhbHVlc1sgaW5kZXggXSA9IFwibm9uZVwiO1xuXG5cdFx0XHRcdC8vIFJlbWVtYmVyIHdoYXQgd2UncmUgb3ZlcndyaXRpbmdcblx0XHRcdFx0ZGF0YVByaXYuc2V0KCBlbGVtLCBcImRpc3BsYXlcIiwgZGlzcGxheSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFNldCB0aGUgZGlzcGxheSBvZiB0aGUgZWxlbWVudHMgaW4gYSBzZWNvbmQgbG9vcCB0byBhdm9pZCBjb25zdGFudCByZWZsb3dcblx0Zm9yICggaW5kZXggPSAwOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRpZiAoIHZhbHVlc1sgaW5kZXggXSAhPSBudWxsICkge1xuXHRcdFx0ZWxlbWVudHNbIGluZGV4IF0uc3R5bGUuZGlzcGxheSA9IHZhbHVlc1sgaW5kZXggXTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gZWxlbWVudHM7XG59XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0c2hvdzogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzLCB0cnVlICk7XG5cdH0sXG5cdGhpZGU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBzaG93SGlkZSggdGhpcyApO1xuXHR9LFxuXHR0b2dnbGU6IGZ1bmN0aW9uKCBzdGF0ZSApIHtcblx0XHRpZiAoIHR5cGVvZiBzdGF0ZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRyZXR1cm4gc3RhdGUgPyB0aGlzLnNob3coKSA6IHRoaXMuaGlkZSgpO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBpc0hpZGRlbldpdGhpblRyZWUoIHRoaXMgKSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuc2hvdygpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuaGlkZSgpO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxufSApO1xudmFyIHJjaGVja2FibGVUeXBlID0gKCAvXig/OmNoZWNrYm94fHJhZGlvKSQvaSApO1xuXG52YXIgcnRhZ05hbWUgPSAoIC88KFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKikvaSApO1xuXG52YXIgcnNjcmlwdFR5cGUgPSAoIC9eJHxebW9kdWxlJHxcXC8oPzpqYXZhfGVjbWEpc2NyaXB0L2kgKTtcblxuXG5cbi8vIFdlIGhhdmUgdG8gY2xvc2UgdGhlc2UgdGFncyB0byBzdXBwb3J0IFhIVE1MICgjMTMyMDApXG52YXIgd3JhcE1hcCA9IHtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRvcHRpb246IFsgMSwgXCI8c2VsZWN0IG11bHRpcGxlPSdtdWx0aXBsZSc+XCIsIFwiPC9zZWxlY3Q+XCIgXSxcblxuXHQvLyBYSFRNTCBwYXJzZXJzIGRvIG5vdCBtYWdpY2FsbHkgaW5zZXJ0IGVsZW1lbnRzIGluIHRoZVxuXHQvLyBzYW1lIHdheSB0aGF0IHRhZyBzb3VwIHBhcnNlcnMgZG8uIFNvIHdlIGNhbm5vdCBzaG9ydGVuXG5cdC8vIHRoaXMgYnkgb21pdHRpbmcgPHRib2R5PiBvciBvdGhlciByZXF1aXJlZCBlbGVtZW50cy5cblx0dGhlYWQ6IFsgMSwgXCI8dGFibGU+XCIsIFwiPC90YWJsZT5cIiBdLFxuXHRjb2w6IFsgMiwgXCI8dGFibGU+PGNvbGdyb3VwPlwiLCBcIjwvY29sZ3JvdXA+PC90YWJsZT5cIiBdLFxuXHR0cjogWyAyLCBcIjx0YWJsZT48dGJvZHk+XCIsIFwiPC90Ym9keT48L3RhYmxlPlwiIF0sXG5cdHRkOiBbIDMsIFwiPHRhYmxlPjx0Ym9keT48dHI+XCIsIFwiPC90cj48L3Rib2R5PjwvdGFibGU+XCIgXSxcblxuXHRfZGVmYXVsdDogWyAwLCBcIlwiLCBcIlwiIF1cbn07XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG53cmFwTWFwLm9wdGdyb3VwID0gd3JhcE1hcC5vcHRpb247XG5cbndyYXBNYXAudGJvZHkgPSB3cmFwTWFwLnRmb290ID0gd3JhcE1hcC5jb2xncm91cCA9IHdyYXBNYXAuY2FwdGlvbiA9IHdyYXBNYXAudGhlYWQ7XG53cmFwTWFwLnRoID0gd3JhcE1hcC50ZDtcblxuXG5mdW5jdGlvbiBnZXRBbGwoIGNvbnRleHQsIHRhZyApIHtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdC8vIFVzZSB0eXBlb2YgdG8gYXZvaWQgemVyby1hcmd1bWVudCBtZXRob2QgaW52b2NhdGlvbiBvbiBob3N0IG9iamVjdHMgKCMxNTE1MSlcblx0dmFyIHJldDtcblxuXHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdHJldCA9IGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyB8fCBcIipcIiApO1xuXG5cdH0gZWxzZSBpZiAoIHR5cGVvZiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0cmV0ID0gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgfHwgXCIqXCIgKTtcblxuXHR9IGVsc2Uge1xuXHRcdHJldCA9IFtdO1xuXHR9XG5cblx0aWYgKCB0YWcgPT09IHVuZGVmaW5lZCB8fCB0YWcgJiYgbm9kZU5hbWUoIGNvbnRleHQsIHRhZyApICkge1xuXHRcdHJldHVybiBqUXVlcnkubWVyZ2UoIFsgY29udGV4dCBdLCByZXQgKTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59XG5cblxuLy8gTWFyayBzY3JpcHRzIGFzIGhhdmluZyBhbHJlYWR5IGJlZW4gZXZhbHVhdGVkXG5mdW5jdGlvbiBzZXRHbG9iYWxFdmFsKCBlbGVtcywgcmVmRWxlbWVudHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRkYXRhUHJpdi5zZXQoXG5cdFx0XHRlbGVtc1sgaSBdLFxuXHRcdFx0XCJnbG9iYWxFdmFsXCIsXG5cdFx0XHQhcmVmRWxlbWVudHMgfHwgZGF0YVByaXYuZ2V0KCByZWZFbGVtZW50c1sgaSBdLCBcImdsb2JhbEV2YWxcIiApXG5cdFx0KTtcblx0fVxufVxuXG5cbnZhciByaHRtbCA9IC88fCYjP1xcdys7LztcblxuZnVuY3Rpb24gYnVpbGRGcmFnbWVudCggZWxlbXMsIGNvbnRleHQsIHNjcmlwdHMsIHNlbGVjdGlvbiwgaWdub3JlZCApIHtcblx0dmFyIGVsZW0sIHRtcCwgdGFnLCB3cmFwLCBhdHRhY2hlZCwgaixcblx0XHRmcmFnbWVudCA9IGNvbnRleHQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuXHRcdG5vZGVzID0gW10sXG5cdFx0aSA9IDAsXG5cdFx0bCA9IGVsZW1zLmxlbmd0aDtcblxuXHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0ZWxlbSA9IGVsZW1zWyBpIF07XG5cblx0XHRpZiAoIGVsZW0gfHwgZWxlbSA9PT0gMCApIHtcblxuXHRcdFx0Ly8gQWRkIG5vZGVzIGRpcmVjdGx5XG5cdFx0XHRpZiAoIHRvVHlwZSggZWxlbSApID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdGpRdWVyeS5tZXJnZSggbm9kZXMsIGVsZW0ubm9kZVR5cGUgPyBbIGVsZW0gXSA6IGVsZW0gKTtcblxuXHRcdFx0Ly8gQ29udmVydCBub24taHRtbCBpbnRvIGEgdGV4dCBub2RlXG5cdFx0XHR9IGVsc2UgaWYgKCAhcmh0bWwudGVzdCggZWxlbSApICkge1xuXHRcdFx0XHRub2Rlcy5wdXNoKCBjb250ZXh0LmNyZWF0ZVRleHROb2RlKCBlbGVtICkgKTtcblxuXHRcdFx0Ly8gQ29udmVydCBodG1sIGludG8gRE9NIG5vZGVzXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR0bXAgPSB0bXAgfHwgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGNvbnRleHQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICk7XG5cblx0XHRcdFx0Ly8gRGVzZXJpYWxpemUgYSBzdGFuZGFyZCByZXByZXNlbnRhdGlvblxuXHRcdFx0XHR0YWcgPSAoIHJ0YWdOYW1lLmV4ZWMoIGVsZW0gKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0d3JhcCA9IHdyYXBNYXBbIHRhZyBdIHx8IHdyYXBNYXAuX2RlZmF1bHQ7XG5cdFx0XHRcdHRtcC5pbm5lckhUTUwgPSB3cmFwWyAxIF0gKyBqUXVlcnkuaHRtbFByZWZpbHRlciggZWxlbSApICsgd3JhcFsgMiBdO1xuXG5cdFx0XHRcdC8vIERlc2NlbmQgdGhyb3VnaCB3cmFwcGVycyB0byB0aGUgcmlnaHQgY29udGVudFxuXHRcdFx0XHRqID0gd3JhcFsgMCBdO1xuXHRcdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0XHR0bXAgPSB0bXAubGFzdENoaWxkO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgdG1wLmNoaWxkTm9kZXMgKTtcblxuXHRcdFx0XHQvLyBSZW1lbWJlciB0aGUgdG9wLWxldmVsIGNvbnRhaW5lclxuXHRcdFx0XHR0bXAgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0XHRcdC8vIEVuc3VyZSB0aGUgY3JlYXRlZCBub2RlcyBhcmUgb3JwaGFuZWQgKCMxMjM5Milcblx0XHRcdFx0dG1wLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBSZW1vdmUgd3JhcHBlciBmcm9tIGZyYWdtZW50XG5cdGZyYWdtZW50LnRleHRDb250ZW50ID0gXCJcIjtcblxuXHRpID0gMDtcblx0d2hpbGUgKCAoIGVsZW0gPSBub2Rlc1sgaSsrIF0gKSApIHtcblxuXHRcdC8vIFNraXAgZWxlbWVudHMgYWxyZWFkeSBpbiB0aGUgY29udGV4dCBjb2xsZWN0aW9uICh0cmFjLTQwODcpXG5cdFx0aWYgKCBzZWxlY3Rpb24gJiYgalF1ZXJ5LmluQXJyYXkoIGVsZW0sIHNlbGVjdGlvbiApID4gLTEgKSB7XG5cdFx0XHRpZiAoIGlnbm9yZWQgKSB7XG5cdFx0XHRcdGlnbm9yZWQucHVzaCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0YXR0YWNoZWQgPSBpc0F0dGFjaGVkKCBlbGVtICk7XG5cblx0XHQvLyBBcHBlbmQgdG8gZnJhZ21lbnRcblx0XHR0bXAgPSBnZXRBbGwoIGZyYWdtZW50LmFwcGVuZENoaWxkKCBlbGVtICksIFwic2NyaXB0XCIgKTtcblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRpZiAoIGF0dGFjaGVkICkge1xuXHRcdFx0c2V0R2xvYmFsRXZhbCggdG1wICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ2FwdHVyZSBleGVjdXRhYmxlc1xuXHRcdGlmICggc2NyaXB0cyApIHtcblx0XHRcdGogPSAwO1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0bXBbIGorKyBdICkgKSB7XG5cdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggZWxlbS50eXBlIHx8IFwiXCIgKSApIHtcblx0XHRcdFx0XHRzY3JpcHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBmcmFnbWVudDtcbn1cblxuXG4oIGZ1bmN0aW9uKCkge1xuXHR2YXIgZnJhZ21lbnQgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0ZGl2ID0gZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSApLFxuXHRcdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seVxuXHQvLyBDaGVjayBzdGF0ZSBsb3N0IGlmIHRoZSBuYW1lIGlzIHNldCAoIzExMjE3KVxuXHQvLyBTdXBwb3J0OiBXaW5kb3dzIFdlYiBBcHBzIChXV0EpXG5cdC8vIGBuYW1lYCBhbmQgYHR5cGVgIG11c3QgdXNlIC5zZXRBdHRyaWJ1dGUgZm9yIFdXQSAoIzE0OTAxKVxuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCBcInJhZGlvXCIgKTtcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcImNoZWNrZWRcIiwgXCJjaGVja2VkXCIgKTtcblx0aW5wdXQuc2V0QXR0cmlidXRlKCBcIm5hbWVcIiwgXCJ0XCIgKTtcblxuXHRkaXYuYXBwZW5kQ2hpbGQoIGlucHV0ICk7XG5cblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMSBvbmx5XG5cdC8vIE9sZGVyIFdlYktpdCBkb2Vzbid0IGNsb25lIGNoZWNrZWQgc3RhdGUgY29ycmVjdGx5IGluIGZyYWdtZW50c1xuXHRzdXBwb3J0LmNoZWNrQ2xvbmUgPSBkaXYuY2xvbmVOb2RlKCB0cnVlICkuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmNoZWNrZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIE1ha2Ugc3VyZSB0ZXh0YXJlYSAoYW5kIGNoZWNrYm94KSBkZWZhdWx0VmFsdWUgaXMgcHJvcGVybHkgY2xvbmVkXG5cdGRpdi5pbm5lckhUTUwgPSBcIjx0ZXh0YXJlYT54PC90ZXh0YXJlYT5cIjtcblx0c3VwcG9ydC5ub0Nsb25lQ2hlY2tlZCA9ICEhZGl2LmNsb25lTm9kZSggdHJ1ZSApLmxhc3RDaGlsZC5kZWZhdWx0VmFsdWU7XG59ICkoKTtcblxuXG52YXJcblx0cmtleUV2ZW50ID0gL15rZXkvLFxuXHRybW91c2VFdmVudCA9IC9eKD86bW91c2V8cG9pbnRlcnxjb250ZXh0bWVudXxkcmFnfGRyb3ApfGNsaWNrLyxcblx0cnR5cGVuYW1lc3BhY2UgPSAvXihbXi5dKikoPzpcXC4oLispfCkvO1xuXG5mdW5jdGlvbiByZXR1cm5UcnVlKCkge1xuXHRyZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmV0dXJuRmFsc2UoKSB7XG5cdHJldHVybiBmYWxzZTtcbn1cblxuLy8gU3VwcG9ydDogSUUgPD05IC0gMTErXG4vLyBmb2N1cygpIGFuZCBibHVyKCkgYXJlIGFzeW5jaHJvbm91cywgZXhjZXB0IHdoZW4gdGhleSBhcmUgbm8tb3AuXG4vLyBTbyBleHBlY3QgZm9jdXMgdG8gYmUgc3luY2hyb25vdXMgd2hlbiB0aGUgZWxlbWVudCBpcyBhbHJlYWR5IGFjdGl2ZSxcbi8vIGFuZCBibHVyIHRvIGJlIHN5bmNocm9ub3VzIHdoZW4gdGhlIGVsZW1lbnQgaXMgbm90IGFscmVhZHkgYWN0aXZlLlxuLy8gKGZvY3VzIGFuZCBibHVyIGFyZSBhbHdheXMgc3luY2hyb25vdXMgaW4gb3RoZXIgc3VwcG9ydGVkIGJyb3dzZXJzLFxuLy8gdGhpcyBqdXN0IGRlZmluZXMgd2hlbiB3ZSBjYW4gY291bnQgb24gaXQpLlxuZnVuY3Rpb24gZXhwZWN0U3luYyggZWxlbSwgdHlwZSApIHtcblx0cmV0dXJuICggZWxlbSA9PT0gc2FmZUFjdGl2ZUVsZW1lbnQoKSApID09PSAoIHR5cGUgPT09IFwiZm9jdXNcIiApO1xufVxuXG4vLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuLy8gQWNjZXNzaW5nIGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgY2FuIHRocm93IHVuZXhwZWN0ZWRseVxuLy8gaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEzMzkzXG5mdW5jdGlvbiBzYWZlQWN0aXZlRWxlbWVudCgpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gZG9jdW1lbnQuYWN0aXZlRWxlbWVudDtcblx0fSBjYXRjaCAoIGVyciApIHsgfVxufVxuXG5mdW5jdGlvbiBvbiggZWxlbSwgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgb25lICkge1xuXHR2YXIgb3JpZ0ZuLCB0eXBlO1xuXG5cdC8vIFR5cGVzIGNhbiBiZSBhIG1hcCBvZiB0eXBlcy9oYW5kbGVyc1xuXHRpZiAoIHR5cGVvZiB0eXBlcyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vICggdHlwZXMtT2JqZWN0LCBzZWxlY3RvciwgZGF0YSApXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMtT2JqZWN0LCBkYXRhIClcblx0XHRcdGRhdGEgPSBkYXRhIHx8IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGZvciAoIHR5cGUgaW4gdHlwZXMgKSB7XG5cdFx0XHRvbiggZWxlbSwgdHlwZSwgc2VsZWN0b3IsIGRhdGEsIHR5cGVzWyB0eXBlIF0sIG9uZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggZGF0YSA9PSBudWxsICYmIGZuID09IG51bGwgKSB7XG5cblx0XHQvLyAoIHR5cGVzLCBmbiApXG5cdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRkYXRhID0gc2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdH0gZWxzZSBpZiAoIGZuID09IG51bGwgKSB7XG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMsIHNlbGVjdG9yLCBmbiApXG5cdFx0XHRmbiA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vICggdHlwZXMsIGRhdGEsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0fVxuXHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHR9IGVsc2UgaWYgKCAhZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW07XG5cdH1cblxuXHRpZiAoIG9uZSA9PT0gMSApIHtcblx0XHRvcmlnRm4gPSBmbjtcblx0XHRmbiA9IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0Ly8gQ2FuIHVzZSBhbiBlbXB0eSBzZXQsIHNpbmNlIGV2ZW50IGNvbnRhaW5zIHRoZSBpbmZvXG5cdFx0XHRqUXVlcnkoKS5vZmYoIGV2ZW50ICk7XG5cdFx0XHRyZXR1cm4gb3JpZ0ZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHR9O1xuXG5cdFx0Ly8gVXNlIHNhbWUgZ3VpZCBzbyBjYWxsZXIgY2FuIHJlbW92ZSB1c2luZyBvcmlnRm5cblx0XHRmbi5ndWlkID0gb3JpZ0ZuLmd1aWQgfHwgKCBvcmlnRm4uZ3VpZCA9IGpRdWVyeS5ndWlkKysgKTtcblx0fVxuXHRyZXR1cm4gZWxlbS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRqUXVlcnkuZXZlbnQuYWRkKCB0aGlzLCB0eXBlcywgZm4sIGRhdGEsIHNlbGVjdG9yICk7XG5cdH0gKTtcbn1cblxuLypcbiAqIEhlbHBlciBmdW5jdGlvbnMgZm9yIG1hbmFnaW5nIGV2ZW50cyAtLSBub3QgcGFydCBvZiB0aGUgcHVibGljIGludGVyZmFjZS5cbiAqIFByb3BzIHRvIERlYW4gRWR3YXJkcycgYWRkRXZlbnQgbGlicmFyeSBmb3IgbWFueSBvZiB0aGUgaWRlYXMuXG4gKi9cbmpRdWVyeS5ldmVudCA9IHtcblxuXHRnbG9iYWw6IHt9LFxuXG5cdGFkZDogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBkYXRhLCBzZWxlY3RvciApIHtcblxuXHRcdHZhciBoYW5kbGVPYmpJbiwgZXZlbnRIYW5kbGUsIHRtcCxcblx0XHRcdGV2ZW50cywgdCwgaGFuZGxlT2JqLFxuXHRcdFx0c3BlY2lhbCwgaGFuZGxlcnMsIHR5cGUsIG5hbWVzcGFjZXMsIG9yaWdUeXBlLFxuXHRcdFx0ZWxlbURhdGEgPSBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdC8vIERvbid0IGF0dGFjaCBldmVudHMgdG8gbm9EYXRhIG9yIHRleHQvY29tbWVudCBub2RlcyAoYnV0IGFsbG93IHBsYWluIG9iamVjdHMpXG5cdFx0aWYgKCAhZWxlbURhdGEgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGFuIG9iamVjdCBvZiBjdXN0b20gZGF0YSBpbiBsaWV1IG9mIHRoZSBoYW5kbGVyXG5cdFx0aWYgKCBoYW5kbGVyLmhhbmRsZXIgKSB7XG5cdFx0XHRoYW5kbGVPYmpJbiA9IGhhbmRsZXI7XG5cdFx0XHRoYW5kbGVyID0gaGFuZGxlT2JqSW4uaGFuZGxlcjtcblx0XHRcdHNlbGVjdG9yID0gaGFuZGxlT2JqSW4uc2VsZWN0b3I7XG5cdFx0fVxuXG5cdFx0Ly8gRW5zdXJlIHRoYXQgaW52YWxpZCBzZWxlY3RvcnMgdGhyb3cgZXhjZXB0aW9ucyBhdCBhdHRhY2ggdGltZVxuXHRcdC8vIEV2YWx1YXRlIGFnYWluc3QgZG9jdW1lbnRFbGVtZW50IGluIGNhc2UgZWxlbSBpcyBhIG5vbi1lbGVtZW50IG5vZGUgKGUuZy4sIGRvY3VtZW50KVxuXHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRqUXVlcnkuZmluZC5tYXRjaGVzU2VsZWN0b3IoIGRvY3VtZW50RWxlbWVudCwgc2VsZWN0b3IgKTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB0aGUgaGFuZGxlciBoYXMgYSB1bmlxdWUgSUQsIHVzZWQgdG8gZmluZC9yZW1vdmUgaXQgbGF0ZXJcblx0XHRpZiAoICFoYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRoYW5kbGVyLmd1aWQgPSBqUXVlcnkuZ3VpZCsrO1xuXHRcdH1cblxuXHRcdC8vIEluaXQgdGhlIGVsZW1lbnQncyBldmVudCBzdHJ1Y3R1cmUgYW5kIG1haW4gaGFuZGxlciwgaWYgdGhpcyBpcyB0aGUgZmlyc3Rcblx0XHRpZiAoICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0ZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzID0ge307XG5cdFx0fVxuXHRcdGlmICggISggZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgKSApIHtcblx0XHRcdGV2ZW50SGFuZGxlID0gZWxlbURhdGEuaGFuZGxlID0gZnVuY3Rpb24oIGUgKSB7XG5cblx0XHRcdFx0Ly8gRGlzY2FyZCB0aGUgc2Vjb25kIGV2ZW50IG9mIGEgalF1ZXJ5LmV2ZW50LnRyaWdnZXIoKSBhbmRcblx0XHRcdFx0Ly8gd2hlbiBhbiBldmVudCBpcyBjYWxsZWQgYWZ0ZXIgYSBwYWdlIGhhcyB1bmxvYWRlZFxuXHRcdFx0XHRyZXR1cm4gdHlwZW9mIGpRdWVyeSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICE9PSBlLnR5cGUgP1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5kaXNwYXRjaC5hcHBseSggZWxlbSwgYXJndW1lbnRzICkgOiB1bmRlZmluZWQ7XG5cdFx0XHR9O1xuXHRcdH1cblxuXHRcdC8vIEhhbmRsZSBtdWx0aXBsZSBldmVudHMgc2VwYXJhdGVkIGJ5IGEgc3BhY2Vcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVGhlcmUgKm11c3QqIGJlIGEgdHlwZSwgbm8gYXR0YWNoaW5nIG5hbWVzcGFjZS1vbmx5IGhhbmRsZXJzXG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgZXZlbnQgY2hhbmdlcyBpdHMgdHlwZSwgdXNlIHRoZSBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzIGZvciB0aGUgY2hhbmdlZCB0eXBlXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblxuXHRcdFx0Ly8gSWYgc2VsZWN0b3IgZGVmaW5lZCwgZGV0ZXJtaW5lIHNwZWNpYWwgZXZlbnQgYXBpIHR5cGUsIG90aGVyd2lzZSBnaXZlbiB0eXBlXG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cblx0XHRcdC8vIFVwZGF0ZSBzcGVjaWFsIGJhc2VkIG9uIG5ld2x5IHJlc2V0IHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBoYW5kbGVPYmogaXMgcGFzc2VkIHRvIGFsbCBldmVudCBoYW5kbGVyc1xuXHRcdFx0aGFuZGxlT2JqID0galF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRvcmlnVHlwZTogb3JpZ1R5cGUsXG5cdFx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRcdGhhbmRsZXI6IGhhbmRsZXIsXG5cdFx0XHRcdGd1aWQ6IGhhbmRsZXIuZ3VpZCxcblx0XHRcdFx0c2VsZWN0b3I6IHNlbGVjdG9yLFxuXHRcdFx0XHRuZWVkc0NvbnRleHQ6IHNlbGVjdG9yICYmIGpRdWVyeS5leHByLm1hdGNoLm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApLFxuXHRcdFx0XHRuYW1lc3BhY2U6IG5hbWVzcGFjZXMuam9pbiggXCIuXCIgKVxuXHRcdFx0fSwgaGFuZGxlT2JqSW4gKTtcblxuXHRcdFx0Ly8gSW5pdCB0aGUgZXZlbnQgaGFuZGxlciBxdWV1ZSBpZiB3ZSdyZSB0aGUgZmlyc3Rcblx0XHRcdGlmICggISggaGFuZGxlcnMgPSBldmVudHNbIHR5cGUgXSApICkge1xuXHRcdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdID0gW107XG5cdFx0XHRcdGhhbmRsZXJzLmRlbGVnYXRlQ291bnQgPSAwO1xuXG5cdFx0XHRcdC8vIE9ubHkgdXNlIGFkZEV2ZW50TGlzdGVuZXIgaWYgdGhlIHNwZWNpYWwgZXZlbnRzIGhhbmRsZXIgcmV0dXJucyBmYWxzZVxuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnNldHVwIHx8XG5cdFx0XHRcdFx0c3BlY2lhbC5zZXR1cC5jYWxsKCBlbGVtLCBkYXRhLCBuYW1lc3BhY2VzLCBldmVudEhhbmRsZSApID09PSBmYWxzZSApIHtcblxuXHRcdFx0XHRcdGlmICggZWxlbS5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0XHRcdFx0ZWxlbS5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBldmVudEhhbmRsZSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHNwZWNpYWwuYWRkICkge1xuXHRcdFx0XHRzcGVjaWFsLmFkZC5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblxuXHRcdFx0XHRpZiAoICFoYW5kbGVPYmouaGFuZGxlci5ndWlkICkge1xuXHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyLmd1aWQgPSBoYW5kbGVyLmd1aWQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIHRvIHRoZSBlbGVtZW50J3MgaGFuZGxlciBsaXN0LCBkZWxlZ2F0ZXMgaW4gZnJvbnRcblx0XHRcdGlmICggc2VsZWN0b3IgKSB7XG5cdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaGFuZGxlcnMuZGVsZWdhdGVDb3VudCsrLCAwLCBoYW5kbGVPYmogKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBLZWVwIHRyYWNrIG9mIHdoaWNoIGV2ZW50cyBoYXZlIGV2ZXIgYmVlbiB1c2VkLCBmb3IgZXZlbnQgb3B0aW1pemF0aW9uXG5cdFx0XHRqUXVlcnkuZXZlbnQuZ2xvYmFsWyB0eXBlIF0gPSB0cnVlO1xuXHRcdH1cblxuXHR9LFxuXG5cdC8vIERldGFjaCBhbiBldmVudCBvciBzZXQgb2YgZXZlbnRzIGZyb20gYW4gZWxlbWVudFxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBlbGVtLCB0eXBlcywgaGFuZGxlciwgc2VsZWN0b3IsIG1hcHBlZFR5cGVzICkge1xuXG5cdFx0dmFyIGosIG9yaWdDb3VudCwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2Lmhhc0RhdGEoIGVsZW0gKSAmJiBkYXRhUHJpdi5nZXQoIGVsZW0gKTtcblxuXHRcdGlmICggIWVsZW1EYXRhIHx8ICEoIGV2ZW50cyA9IGVsZW1EYXRhLmV2ZW50cyApICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE9uY2UgZm9yIGVhY2ggdHlwZS5uYW1lc3BhY2UgaW4gdHlwZXM7IHR5cGUgbWF5IGJlIG9taXR0ZWRcblx0XHR0eXBlcyA9ICggdHlwZXMgfHwgXCJcIiApLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cdFx0dCA9IHR5cGVzLmxlbmd0aDtcblx0XHR3aGlsZSAoIHQtLSApIHtcblx0XHRcdHRtcCA9IHJ0eXBlbmFtZXNwYWNlLmV4ZWMoIHR5cGVzWyB0IF0gKSB8fCBbXTtcblx0XHRcdHR5cGUgPSBvcmlnVHlwZSA9IHRtcFsgMSBdO1xuXHRcdFx0bmFtZXNwYWNlcyA9ICggdG1wWyAyIF0gfHwgXCJcIiApLnNwbGl0KCBcIi5cIiApLnNvcnQoKTtcblxuXHRcdFx0Ly8gVW5iaW5kIGFsbCBldmVudHMgKG9uIHRoaXMgbmFtZXNwYWNlLCBpZiBwcm92aWRlZCkgZm9yIHRoZSBlbGVtZW50XG5cdFx0XHRpZiAoICF0eXBlICkge1xuXHRcdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQucmVtb3ZlKCBlbGVtLCB0eXBlICsgdHlwZXNbIHQgXSwgaGFuZGxlciwgc2VsZWN0b3IsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRjb250aW51ZTtcblx0XHRcdH1cblxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cdFx0XHR0eXBlID0gKCBzZWxlY3RvciA/IHNwZWNpYWwuZGVsZWdhdGVUeXBlIDogc3BlY2lhbC5iaW5kVHlwZSApIHx8IHR5cGU7XG5cdFx0XHRoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdIHx8IFtdO1xuXHRcdFx0dG1wID0gdG1wWyAyIF0gJiZcblx0XHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICk7XG5cblx0XHRcdC8vIFJlbW92ZSBtYXRjaGluZyBldmVudHNcblx0XHRcdG9yaWdDb3VudCA9IGogPSBoYW5kbGVycy5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdFx0aGFuZGxlT2JqID0gaGFuZGxlcnNbIGogXTtcblxuXHRcdFx0XHRpZiAoICggbWFwcGVkVHlwZXMgfHwgb3JpZ1R5cGUgPT09IGhhbmRsZU9iai5vcmlnVHlwZSApICYmXG5cdFx0XHRcdFx0KCAhaGFuZGxlciB8fCBoYW5kbGVyLmd1aWQgPT09IGhhbmRsZU9iai5ndWlkICkgJiZcblx0XHRcdFx0XHQoICF0bXAgfHwgdG1wLnRlc3QoIGhhbmRsZU9iai5uYW1lc3BhY2UgKSApICYmXG5cdFx0XHRcdFx0KCAhc2VsZWN0b3IgfHwgc2VsZWN0b3IgPT09IGhhbmRsZU9iai5zZWxlY3RvciB8fFxuXHRcdFx0XHRcdFx0c2VsZWN0b3IgPT09IFwiKipcIiAmJiBoYW5kbGVPYmouc2VsZWN0b3IgKSApIHtcblx0XHRcdFx0XHRoYW5kbGVycy5zcGxpY2UoIGosIDEgKTtcblxuXHRcdFx0XHRcdGlmICggaGFuZGxlT2JqLnNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudC0tO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNwZWNpYWwucmVtb3ZlICkge1xuXHRcdFx0XHRcdFx0c3BlY2lhbC5yZW1vdmUuY2FsbCggZWxlbSwgaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlbW92ZSBnZW5lcmljIGV2ZW50IGhhbmRsZXIgaWYgd2UgcmVtb3ZlZCBzb21ldGhpbmcgYW5kIG5vIG1vcmUgaGFuZGxlcnMgZXhpc3Rcblx0XHRcdC8vIChhdm9pZHMgcG90ZW50aWFsIGZvciBlbmRsZXNzIHJlY3Vyc2lvbiBkdXJpbmcgcmVtb3ZhbCBvZiBzcGVjaWFsIGV2ZW50IGhhbmRsZXJzKVxuXHRcdFx0aWYgKCBvcmlnQ291bnQgJiYgIWhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0aWYgKCAhc3BlY2lhbC50ZWFyZG93biB8fFxuXHRcdFx0XHRcdHNwZWNpYWwudGVhcmRvd24uY2FsbCggZWxlbSwgbmFtZXNwYWNlcywgZWxlbURhdGEuaGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBlbGVtRGF0YS5oYW5kbGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGRlbGV0ZSBldmVudHNbIHR5cGUgXTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBSZW1vdmUgZGF0YSBhbmQgdGhlIGV4cGFuZG8gaWYgaXQncyBubyBsb25nZXIgdXNlZFxuXHRcdGlmICggalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGV2ZW50cyApICkge1xuXHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImhhbmRsZSBldmVudHNcIiApO1xuXHRcdH1cblx0fSxcblxuXHRkaXNwYXRjaDogZnVuY3Rpb24oIG5hdGl2ZUV2ZW50ICkge1xuXG5cdFx0Ly8gTWFrZSBhIHdyaXRhYmxlIGpRdWVyeS5FdmVudCBmcm9tIHRoZSBuYXRpdmUgZXZlbnQgb2JqZWN0XG5cdFx0dmFyIGV2ZW50ID0galF1ZXJ5LmV2ZW50LmZpeCggbmF0aXZlRXZlbnQgKTtcblxuXHRcdHZhciBpLCBqLCByZXQsIG1hdGNoZWQsIGhhbmRsZU9iaiwgaGFuZGxlclF1ZXVlLFxuXHRcdFx0YXJncyA9IG5ldyBBcnJheSggYXJndW1lbnRzLmxlbmd0aCApLFxuXHRcdFx0aGFuZGxlcnMgPSAoIGRhdGFQcml2LmdldCggdGhpcywgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSB8fCBbXSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgZXZlbnQudHlwZSBdIHx8IHt9O1xuXG5cdFx0Ly8gVXNlIHRoZSBmaXgtZWQgalF1ZXJ5LkV2ZW50IHJhdGhlciB0aGFuIHRoZSAocmVhZC1vbmx5KSBuYXRpdmUgZXZlbnRcblx0XHRhcmdzWyAwIF0gPSBldmVudDtcblxuXHRcdGZvciAoIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrICkge1xuXHRcdFx0YXJnc1sgaSBdID0gYXJndW1lbnRzWyBpIF07XG5cdFx0fVxuXG5cdFx0ZXZlbnQuZGVsZWdhdGVUYXJnZXQgPSB0aGlzO1xuXG5cdFx0Ly8gQ2FsbCB0aGUgcHJlRGlzcGF0Y2ggaG9vayBmb3IgdGhlIG1hcHBlZCB0eXBlLCBhbmQgbGV0IGl0IGJhaWwgaWYgZGVzaXJlZFxuXHRcdGlmICggc3BlY2lhbC5wcmVEaXNwYXRjaCAmJiBzcGVjaWFsLnByZURpc3BhdGNoLmNhbGwoIHRoaXMsIGV2ZW50ICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBoYW5kbGVyc1xuXHRcdGhhbmRsZXJRdWV1ZSA9IGpRdWVyeS5ldmVudC5oYW5kbGVycy5jYWxsKCB0aGlzLCBldmVudCwgaGFuZGxlcnMgKTtcblxuXHRcdC8vIFJ1biBkZWxlZ2F0ZXMgZmlyc3Q7IHRoZXkgbWF5IHdhbnQgdG8gc3RvcCBwcm9wYWdhdGlvbiBiZW5lYXRoIHVzXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIG1hdGNoZWQgPSBoYW5kbGVyUXVldWVbIGkrKyBdICkgJiYgIWV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRldmVudC5jdXJyZW50VGFyZ2V0ID0gbWF0Y2hlZC5lbGVtO1xuXG5cdFx0XHRqID0gMDtcblx0XHRcdHdoaWxlICggKCBoYW5kbGVPYmogPSBtYXRjaGVkLmhhbmRsZXJzWyBqKysgXSApICYmXG5cdFx0XHRcdCFldmVudC5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXG5cdFx0XHRcdC8vIElmIHRoZSBldmVudCBpcyBuYW1lc3BhY2VkLCB0aGVuIGVhY2ggaGFuZGxlciBpcyBvbmx5IGludm9rZWQgaWYgaXQgaXNcblx0XHRcdFx0Ly8gc3BlY2lhbGx5IHVuaXZlcnNhbCBvciBpdHMgbmFtZXNwYWNlcyBhcmUgYSBzdXBlcnNldCBvZiB0aGUgZXZlbnQncy5cblx0XHRcdFx0aWYgKCAhZXZlbnQucm5hbWVzcGFjZSB8fCBoYW5kbGVPYmoubmFtZXNwYWNlID09PSBmYWxzZSB8fFxuXHRcdFx0XHRcdGV2ZW50LnJuYW1lc3BhY2UudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkge1xuXG5cdFx0XHRcdFx0ZXZlbnQuaGFuZGxlT2JqID0gaGFuZGxlT2JqO1xuXHRcdFx0XHRcdGV2ZW50LmRhdGEgPSBoYW5kbGVPYmouZGF0YTtcblxuXHRcdFx0XHRcdHJldCA9ICggKCBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgaGFuZGxlT2JqLm9yaWdUeXBlIF0gfHwge30gKS5oYW5kbGUgfHxcblx0XHRcdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyICkuYXBwbHkoIG1hdGNoZWQuZWxlbSwgYXJncyApO1xuXG5cdFx0XHRcdFx0aWYgKCByZXQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdGlmICggKCBldmVudC5yZXN1bHQgPSByZXQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhbGwgdGhlIHBvc3REaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGVcblx0XHRpZiAoIHNwZWNpYWwucG9zdERpc3BhdGNoICkge1xuXHRcdFx0c3BlY2lhbC5wb3N0RGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdGhhbmRsZXJzOiBmdW5jdGlvbiggZXZlbnQsIGhhbmRsZXJzICkge1xuXHRcdHZhciBpLCBoYW5kbGVPYmosIHNlbCwgbWF0Y2hlZEhhbmRsZXJzLCBtYXRjaGVkU2VsZWN0b3JzLFxuXHRcdFx0aGFuZGxlclF1ZXVlID0gW10sXG5cdFx0XHRkZWxlZ2F0ZUNvdW50ID0gaGFuZGxlcnMuZGVsZWdhdGVDb3VudCxcblx0XHRcdGN1ciA9IGV2ZW50LnRhcmdldDtcblxuXHRcdC8vIEZpbmQgZGVsZWdhdGUgaGFuZGxlcnNcblx0XHRpZiAoIGRlbGVnYXRlQ291bnQgJiZcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05XG5cdFx0XHQvLyBCbGFjay1ob2xlIFNWRyA8dXNlPiBpbnN0YW5jZSB0cmVlcyAodHJhYy0xMzE4MClcblx0XHRcdGN1ci5ub2RlVHlwZSAmJlxuXG5cdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NDJcblx0XHRcdC8vIFN1cHByZXNzIHNwZWMtdmlvbGF0aW5nIGNsaWNrcyBpbmRpY2F0aW5nIGEgbm9uLXByaW1hcnkgcG9pbnRlciBidXR0b24gKHRyYWMtMzg2MSlcblx0XHRcdC8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50LXR5cGUtY2xpY2tcblx0XHRcdC8vIFN1cHBvcnQ6IElFIDExIG9ubHlcblx0XHRcdC8vIC4uLmJ1dCBub3QgYXJyb3cga2V5IFwiY2xpY2tzXCIgb2YgcmFkaW8gaW5wdXRzLCB3aGljaCBjYW4gaGF2ZSBgYnV0dG9uYCAtMSAoZ2gtMjM0Mylcblx0XHRcdCEoIGV2ZW50LnR5cGUgPT09IFwiY2xpY2tcIiAmJiBldmVudC5idXR0b24gPj0gMSApICkge1xuXG5cdFx0XHRmb3IgKCA7IGN1ciAhPT0gdGhpczsgY3VyID0gY3VyLnBhcmVudE5vZGUgfHwgdGhpcyApIHtcblxuXHRcdFx0XHQvLyBEb24ndCBjaGVjayBub24tZWxlbWVudHMgKCMxMzIwOClcblx0XHRcdFx0Ly8gRG9uJ3QgcHJvY2VzcyBjbGlja3Mgb24gZGlzYWJsZWQgZWxlbWVudHMgKCM2OTExLCAjODE2NSwgIzExMzgyLCAjMTE3NjQpXG5cdFx0XHRcdGlmICggY3VyLm5vZGVUeXBlID09PSAxICYmICEoIGV2ZW50LnR5cGUgPT09IFwiY2xpY2tcIiAmJiBjdXIuZGlzYWJsZWQgPT09IHRydWUgKSApIHtcblx0XHRcdFx0XHRtYXRjaGVkSGFuZGxlcnMgPSBbXTtcblx0XHRcdFx0XHRtYXRjaGVkU2VsZWN0b3JzID0ge307XG5cdFx0XHRcdFx0Zm9yICggaSA9IDA7IGkgPCBkZWxlZ2F0ZUNvdW50OyBpKysgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaSBdO1xuXG5cdFx0XHRcdFx0XHQvLyBEb24ndCBjb25mbGljdCB3aXRoIE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoIzEzMjAzKVxuXHRcdFx0XHRcdFx0c2VsID0gaGFuZGxlT2JqLnNlbGVjdG9yICsgXCIgXCI7XG5cblx0XHRcdFx0XHRcdGlmICggbWF0Y2hlZFNlbGVjdG9yc1sgc2VsIF0gPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZFNlbGVjdG9yc1sgc2VsIF0gPSBoYW5kbGVPYmoubmVlZHNDb250ZXh0ID9cblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkoIHNlbCwgdGhpcyApLmluZGV4KCBjdXIgKSA+IC0xIDpcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuZmluZCggc2VsLCB0aGlzLCBudWxsLCBbIGN1ciBdICkubGVuZ3RoO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSApIHtcblx0XHRcdFx0XHRcdFx0bWF0Y2hlZEhhbmRsZXJzLnB1c2goIGhhbmRsZU9iaiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIG1hdGNoZWRIYW5kbGVycy5sZW5ndGggKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVyUXVldWUucHVzaCggeyBlbGVtOiBjdXIsIGhhbmRsZXJzOiBtYXRjaGVkSGFuZGxlcnMgfSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEFkZCB0aGUgcmVtYWluaW5nIChkaXJlY3RseS1ib3VuZCkgaGFuZGxlcnNcblx0XHRjdXIgPSB0aGlzO1xuXHRcdGlmICggZGVsZWdhdGVDb3VudCA8IGhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IGhhbmRsZXJzLnNsaWNlKCBkZWxlZ2F0ZUNvdW50ICkgfSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBoYW5kbGVyUXVldWU7XG5cdH0sXG5cblx0YWRkUHJvcDogZnVuY3Rpb24oIG5hbWUsIGhvb2sgKSB7XG5cdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBqUXVlcnkuRXZlbnQucHJvdG90eXBlLCBuYW1lLCB7XG5cdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXG5cdFx0XHRnZXQ6IGlzRnVuY3Rpb24oIGhvb2sgKSA/XG5cdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5vcmlnaW5hbEV2ZW50ICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gaG9vayggdGhpcy5vcmlnaW5hbEV2ZW50ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IDpcblx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB0aGlzLm9yaWdpbmFsRXZlbnRbIG5hbWUgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIHRoaXMsIG5hbWUsIHtcblx0XHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdGNvbmZpZ3VyYWJsZTogdHJ1ZSxcblx0XHRcdFx0XHR3cml0YWJsZTogdHJ1ZSxcblx0XHRcdFx0XHR2YWx1ZTogdmFsdWVcblx0XHRcdFx0fSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRmaXg6IGZ1bmN0aW9uKCBvcmlnaW5hbEV2ZW50ICkge1xuXHRcdHJldHVybiBvcmlnaW5hbEV2ZW50WyBqUXVlcnkuZXhwYW5kbyBdID9cblx0XHRcdG9yaWdpbmFsRXZlbnQgOlxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCggb3JpZ2luYWxFdmVudCApO1xuXHR9LFxuXG5cdHNwZWNpYWw6IHtcblx0XHRsb2FkOiB7XG5cblx0XHRcdC8vIFByZXZlbnQgdHJpZ2dlcmVkIGltYWdlLmxvYWQgZXZlbnRzIGZyb20gYnViYmxpbmcgdG8gd2luZG93LmxvYWRcblx0XHRcdG5vQnViYmxlOiB0cnVlXG5cdFx0fSxcblx0XHRjbGljazoge1xuXG5cdFx0XHQvLyBVdGlsaXplIG5hdGl2ZSBldmVudCB0byBlbnN1cmUgY29ycmVjdCBzdGF0ZSBmb3IgY2hlY2thYmxlIGlucHV0c1xuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCBkYXRhICkge1xuXG5cdFx0XHRcdC8vIEZvciBtdXR1YWwgY29tcHJlc3NpYmlsaXR5IHdpdGggX2RlZmF1bHQsIHJlcGxhY2UgYHRoaXNgIGFjY2VzcyB3aXRoIGEgbG9jYWwgdmFyLlxuXHRcdFx0XHQvLyBgfHwgZGF0YWAgaXMgZGVhZCBjb2RlIG1lYW50IG9ubHkgdG8gcHJlc2VydmUgdGhlIHZhcmlhYmxlIHRocm91Z2ggbWluaWZpY2F0aW9uLlxuXHRcdFx0XHR2YXIgZWwgPSB0aGlzIHx8IGRhdGE7XG5cblx0XHRcdFx0Ly8gQ2xhaW0gdGhlIGZpcnN0IGhhbmRsZXJcblx0XHRcdFx0aWYgKCByY2hlY2thYmxlVHlwZS50ZXN0KCBlbC50eXBlICkgJiZcblx0XHRcdFx0XHRlbC5jbGljayAmJiBub2RlTmFtZSggZWwsIFwiaW5wdXRcIiApICkge1xuXG5cdFx0XHRcdFx0Ly8gZGF0YVByaXYuc2V0KCBlbCwgXCJjbGlja1wiLCAuLi4gKVxuXHRcdFx0XHRcdGxldmVyYWdlTmF0aXZlKCBlbCwgXCJjbGlja1wiLCByZXR1cm5UcnVlICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXR1cm4gZmFsc2UgdG8gYWxsb3cgbm9ybWFsIHByb2Nlc3NpbmcgaW4gdGhlIGNhbGxlclxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0dHJpZ2dlcjogZnVuY3Rpb24oIGRhdGEgKSB7XG5cblx0XHRcdFx0Ly8gRm9yIG11dHVhbCBjb21wcmVzc2liaWxpdHkgd2l0aCBfZGVmYXVsdCwgcmVwbGFjZSBgdGhpc2AgYWNjZXNzIHdpdGggYSBsb2NhbCB2YXIuXG5cdFx0XHRcdC8vIGB8fCBkYXRhYCBpcyBkZWFkIGNvZGUgbWVhbnQgb25seSB0byBwcmVzZXJ2ZSB0aGUgdmFyaWFibGUgdGhyb3VnaCBtaW5pZmljYXRpb24uXG5cdFx0XHRcdHZhciBlbCA9IHRoaXMgfHwgZGF0YTtcblxuXHRcdFx0XHQvLyBGb3JjZSBzZXR1cCBiZWZvcmUgdHJpZ2dlcmluZyBhIGNsaWNrXG5cdFx0XHRcdGlmICggcmNoZWNrYWJsZVR5cGUudGVzdCggZWwudHlwZSApICYmXG5cdFx0XHRcdFx0ZWwuY2xpY2sgJiYgbm9kZU5hbWUoIGVsLCBcImlucHV0XCIgKSApIHtcblxuXHRcdFx0XHRcdGxldmVyYWdlTmF0aXZlKCBlbCwgXCJjbGlja1wiICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXR1cm4gbm9uLWZhbHNlIHRvIGFsbG93IG5vcm1hbCBldmVudC1wYXRoIHByb3BhZ2F0aW9uXG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRm9yIGNyb3NzLWJyb3dzZXIgY29uc2lzdGVuY3ksIHN1cHByZXNzIG5hdGl2ZSAuY2xpY2soKSBvbiBsaW5rc1xuXHRcdFx0Ly8gQWxzbyBwcmV2ZW50IGl0IGlmIHdlJ3JlIGN1cnJlbnRseSBpbnNpZGUgYSBsZXZlcmFnZWQgbmF0aXZlLWV2ZW50IHN0YWNrXG5cdFx0XHRfZGVmYXVsdDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gZXZlbnQudGFyZ2V0O1xuXHRcdFx0XHRyZXR1cm4gcmNoZWNrYWJsZVR5cGUudGVzdCggdGFyZ2V0LnR5cGUgKSAmJlxuXHRcdFx0XHRcdHRhcmdldC5jbGljayAmJiBub2RlTmFtZSggdGFyZ2V0LCBcImlucHV0XCIgKSAmJlxuXHRcdFx0XHRcdGRhdGFQcml2LmdldCggdGFyZ2V0LCBcImNsaWNrXCIgKSB8fFxuXHRcdFx0XHRcdG5vZGVOYW1lKCB0YXJnZXQsIFwiYVwiICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdGJlZm9yZXVubG9hZDoge1xuXHRcdFx0cG9zdERpc3BhdGNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCAyMCtcblx0XHRcdFx0Ly8gRmlyZWZveCBkb2Vzbid0IGFsZXJ0IGlmIHRoZSByZXR1cm5WYWx1ZSBmaWVsZCBpcyBub3Qgc2V0LlxuXHRcdFx0XHRpZiAoIGV2ZW50LnJlc3VsdCAhPT0gdW5kZWZpbmVkICYmIGV2ZW50Lm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0ZXZlbnQub3JpZ2luYWxFdmVudC5yZXR1cm5WYWx1ZSA9IGV2ZW50LnJlc3VsdDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gRW5zdXJlIHRoZSBwcmVzZW5jZSBvZiBhbiBldmVudCBsaXN0ZW5lciB0aGF0IGhhbmRsZXMgbWFudWFsbHktdHJpZ2dlcmVkXG4vLyBzeW50aGV0aWMgZXZlbnRzIGJ5IGludGVycnVwdGluZyBwcm9ncmVzcyB1bnRpbCByZWludm9rZWQgaW4gcmVzcG9uc2UgdG9cbi8vICpuYXRpdmUqIGV2ZW50cyB0aGF0IGl0IGZpcmVzIGRpcmVjdGx5LCBlbnN1cmluZyB0aGF0IHN0YXRlIGNoYW5nZXMgaGF2ZVxuLy8gYWxyZWFkeSBvY2N1cnJlZCBiZWZvcmUgb3RoZXIgbGlzdGVuZXJzIGFyZSBpbnZva2VkLlxuZnVuY3Rpb24gbGV2ZXJhZ2VOYXRpdmUoIGVsLCB0eXBlLCBleHBlY3RTeW5jICkge1xuXG5cdC8vIE1pc3NpbmcgZXhwZWN0U3luYyBpbmRpY2F0ZXMgYSB0cmlnZ2VyIGNhbGwsIHdoaWNoIG11c3QgZm9yY2Ugc2V0dXAgdGhyb3VnaCBqUXVlcnkuZXZlbnQuYWRkXG5cdGlmICggIWV4cGVjdFN5bmMgKSB7XG5cdFx0aWYgKCBkYXRhUHJpdi5nZXQoIGVsLCB0eXBlICkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGpRdWVyeS5ldmVudC5hZGQoIGVsLCB0eXBlLCByZXR1cm5UcnVlICk7XG5cdFx0fVxuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFJlZ2lzdGVyIHRoZSBjb250cm9sbGVyIGFzIGEgc3BlY2lhbCB1bml2ZXJzYWwgaGFuZGxlciBmb3IgYWxsIGV2ZW50IG5hbWVzcGFjZXNcblx0ZGF0YVByaXYuc2V0KCBlbCwgdHlwZSwgZmFsc2UgKTtcblx0alF1ZXJ5LmV2ZW50LmFkZCggZWwsIHR5cGUsIHtcblx0XHRuYW1lc3BhY2U6IGZhbHNlLFxuXHRcdGhhbmRsZXI6IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdHZhciBub3RBc3luYywgcmVzdWx0LFxuXHRcdFx0XHRzYXZlZCA9IGRhdGFQcml2LmdldCggdGhpcywgdHlwZSApO1xuXG5cdFx0XHRpZiAoICggZXZlbnQuaXNUcmlnZ2VyICYgMSApICYmIHRoaXNbIHR5cGUgXSApIHtcblxuXHRcdFx0XHQvLyBJbnRlcnJ1cHQgcHJvY2Vzc2luZyBvZiB0aGUgb3V0ZXIgc3ludGhldGljIC50cmlnZ2VyKCllZCBldmVudFxuXHRcdFx0XHQvLyBTYXZlZCBkYXRhIHNob3VsZCBiZSBmYWxzZSBpbiBzdWNoIGNhc2VzLCBidXQgbWlnaHQgYmUgYSBsZWZ0b3ZlciBjYXB0dXJlIG9iamVjdFxuXHRcdFx0XHQvLyBmcm9tIGFuIGFzeW5jIG5hdGl2ZSBoYW5kbGVyIChnaC00MzUwKVxuXHRcdFx0XHRpZiAoICFzYXZlZC5sZW5ndGggKSB7XG5cblx0XHRcdFx0XHQvLyBTdG9yZSBhcmd1bWVudHMgZm9yIHVzZSB3aGVuIGhhbmRsaW5nIHRoZSBpbm5lciBuYXRpdmUgZXZlbnRcblx0XHRcdFx0XHQvLyBUaGVyZSB3aWxsIGFsd2F5cyBiZSBhdCBsZWFzdCBvbmUgYXJndW1lbnQgKGFuIGV2ZW50IG9iamVjdCksIHNvIHRoaXMgYXJyYXlcblx0XHRcdFx0XHQvLyB3aWxsIG5vdCBiZSBjb25mdXNlZCB3aXRoIGEgbGVmdG92ZXIgY2FwdHVyZSBvYmplY3QuXG5cdFx0XHRcdFx0c2F2ZWQgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIHR5cGUsIHNhdmVkICk7XG5cblx0XHRcdFx0XHQvLyBUcmlnZ2VyIHRoZSBuYXRpdmUgZXZlbnQgYW5kIGNhcHR1cmUgaXRzIHJlc3VsdFxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExK1xuXHRcdFx0XHRcdC8vIGZvY3VzKCkgYW5kIGJsdXIoKSBhcmUgYXN5bmNocm9ub3VzXG5cdFx0XHRcdFx0bm90QXN5bmMgPSBleHBlY3RTeW5jKCB0aGlzLCB0eXBlICk7XG5cdFx0XHRcdFx0dGhpc1sgdHlwZSBdKCk7XG5cdFx0XHRcdFx0cmVzdWx0ID0gZGF0YVByaXYuZ2V0KCB0aGlzLCB0eXBlICk7XG5cdFx0XHRcdFx0aWYgKCBzYXZlZCAhPT0gcmVzdWx0IHx8IG5vdEFzeW5jICkge1xuXHRcdFx0XHRcdFx0ZGF0YVByaXYuc2V0KCB0aGlzLCB0eXBlLCBmYWxzZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRyZXN1bHQgPSB7fTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0aWYgKCBzYXZlZCAhPT0gcmVzdWx0ICkge1xuXG5cdFx0XHRcdFx0XHQvLyBDYW5jZWwgdGhlIG91dGVyIHN5bnRoZXRpYyBldmVudFxuXHRcdFx0XHRcdFx0ZXZlbnQuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdC52YWx1ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSWYgdGhpcyBpcyBhbiBpbm5lciBzeW50aGV0aWMgZXZlbnQgZm9yIGFuIGV2ZW50IHdpdGggYSBidWJibGluZyBzdXJyb2dhdGVcblx0XHRcdFx0Ly8gKGZvY3VzIG9yIGJsdXIpLCBhc3N1bWUgdGhhdCB0aGUgc3Vycm9nYXRlIGFscmVhZHkgcHJvcGFnYXRlZCBmcm9tIHRyaWdnZXJpbmcgdGhlXG5cdFx0XHRcdC8vIG5hdGl2ZSBldmVudCBhbmQgcHJldmVudCB0aGF0IGZyb20gaGFwcGVuaW5nIGFnYWluIGhlcmUuXG5cdFx0XHRcdC8vIFRoaXMgdGVjaG5pY2FsbHkgZ2V0cyB0aGUgb3JkZXJpbmcgd3Jvbmcgdy5yLnQuIHRvIGAudHJpZ2dlcigpYCAoaW4gd2hpY2ggdGhlXG5cdFx0XHRcdC8vIGJ1YmJsaW5nIHN1cnJvZ2F0ZSBwcm9wYWdhdGVzICphZnRlciogdGhlIG5vbi1idWJibGluZyBiYXNlKSwgYnV0IHRoYXQgc2VlbXNcblx0XHRcdFx0Ly8gbGVzcyBiYWQgdGhhbiBkdXBsaWNhdGlvbi5cblx0XHRcdFx0fSBlbHNlIGlmICggKCBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9ICkuZGVsZWdhdGVUeXBlICkge1xuXHRcdFx0XHRcdGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XHR9XG5cblx0XHRcdC8vIElmIHRoaXMgaXMgYSBuYXRpdmUgZXZlbnQgdHJpZ2dlcmVkIGFib3ZlLCBldmVyeXRoaW5nIGlzIG5vdyBpbiBvcmRlclxuXHRcdFx0Ly8gRmlyZSBhbiBpbm5lciBzeW50aGV0aWMgZXZlbnQgd2l0aCB0aGUgb3JpZ2luYWwgYXJndW1lbnRzXG5cdFx0XHR9IGVsc2UgaWYgKCBzYXZlZC5sZW5ndGggKSB7XG5cblx0XHRcdFx0Ly8gLi4uYW5kIGNhcHR1cmUgdGhlIHJlc3VsdFxuXHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIHR5cGUsIHtcblx0XHRcdFx0XHR2YWx1ZTogalF1ZXJ5LmV2ZW50LnRyaWdnZXIoXG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExK1xuXHRcdFx0XHRcdFx0Ly8gRXh0ZW5kIHdpdGggdGhlIHByb3RvdHlwZSB0byByZXNldCB0aGUgYWJvdmUgc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKClcblx0XHRcdFx0XHRcdGpRdWVyeS5leHRlbmQoIHNhdmVkWyAwIF0sIGpRdWVyeS5FdmVudC5wcm90b3R5cGUgKSxcblx0XHRcdFx0XHRcdHNhdmVkLnNsaWNlKCAxICksXG5cdFx0XHRcdFx0XHR0aGlzXG5cdFx0XHRcdFx0KVxuXHRcdFx0XHR9ICk7XG5cblx0XHRcdFx0Ly8gQWJvcnQgaGFuZGxpbmcgb2YgdGhlIG5hdGl2ZSBldmVudFxuXHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gKTtcbn1cblxualF1ZXJ5LnJlbW92ZUV2ZW50ID0gZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGhhbmRsZSApIHtcblxuXHQvLyBUaGlzIFwiaWZcIiBpcyBuZWVkZWQgZm9yIHBsYWluIG9iamVjdHNcblx0aWYgKCBlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0ZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBoYW5kbGUgKTtcblx0fVxufTtcblxualF1ZXJ5LkV2ZW50ID0gZnVuY3Rpb24oIHNyYywgcHJvcHMgKSB7XG5cblx0Ly8gQWxsb3cgaW5zdGFudGlhdGlvbiB3aXRob3V0IHRoZSAnbmV3JyBrZXl3b3JkXG5cdGlmICggISggdGhpcyBpbnN0YW5jZW9mIGpRdWVyeS5FdmVudCApICkge1xuXHRcdHJldHVybiBuZXcgalF1ZXJ5LkV2ZW50KCBzcmMsIHByb3BzICk7XG5cdH1cblxuXHQvLyBFdmVudCBvYmplY3Rcblx0aWYgKCBzcmMgJiYgc3JjLnR5cGUgKSB7XG5cdFx0dGhpcy5vcmlnaW5hbEV2ZW50ID0gc3JjO1xuXHRcdHRoaXMudHlwZSA9IHNyYy50eXBlO1xuXG5cdFx0Ly8gRXZlbnRzIGJ1YmJsaW5nIHVwIHRoZSBkb2N1bWVudCBtYXkgaGF2ZSBiZWVuIG1hcmtlZCBhcyBwcmV2ZW50ZWRcblx0XHQvLyBieSBhIGhhbmRsZXIgbG93ZXIgZG93biB0aGUgdHJlZTsgcmVmbGVjdCB0aGUgY29ycmVjdCB2YWx1ZS5cblx0XHR0aGlzLmlzRGVmYXVsdFByZXZlbnRlZCA9IHNyYy5kZWZhdWx0UHJldmVudGVkIHx8XG5cdFx0XHRcdHNyYy5kZWZhdWx0UHJldmVudGVkID09PSB1bmRlZmluZWQgJiZcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9Mi4zIG9ubHlcblx0XHRcdFx0c3JjLnJldHVyblZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRyZXR1cm5UcnVlIDpcblx0XHRcdHJldHVybkZhbHNlO1xuXG5cdFx0Ly8gQ3JlYXRlIHRhcmdldCBwcm9wZXJ0aWVzXG5cdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDw9NiAtIDcgb25seVxuXHRcdC8vIFRhcmdldCBzaG91bGQgbm90IGJlIGEgdGV4dCBub2RlICgjNTA0LCAjMTMxNDMpXG5cdFx0dGhpcy50YXJnZXQgPSAoIHNyYy50YXJnZXQgJiYgc3JjLnRhcmdldC5ub2RlVHlwZSA9PT0gMyApID9cblx0XHRcdHNyYy50YXJnZXQucGFyZW50Tm9kZSA6XG5cdFx0XHRzcmMudGFyZ2V0O1xuXG5cdFx0dGhpcy5jdXJyZW50VGFyZ2V0ID0gc3JjLmN1cnJlbnRUYXJnZXQ7XG5cdFx0dGhpcy5yZWxhdGVkVGFyZ2V0ID0gc3JjLnJlbGF0ZWRUYXJnZXQ7XG5cblx0Ly8gRXZlbnQgdHlwZVxuXHR9IGVsc2Uge1xuXHRcdHRoaXMudHlwZSA9IHNyYztcblx0fVxuXG5cdC8vIFB1dCBleHBsaWNpdGx5IHByb3ZpZGVkIHByb3BlcnRpZXMgb250byB0aGUgZXZlbnQgb2JqZWN0XG5cdGlmICggcHJvcHMgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdGhpcywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIENyZWF0ZSBhIHRpbWVzdGFtcCBpZiBpbmNvbWluZyBldmVudCBkb2Vzbid0IGhhdmUgb25lXG5cdHRoaXMudGltZVN0YW1wID0gc3JjICYmIHNyYy50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKTtcblxuXHQvLyBNYXJrIGl0IGFzIGZpeGVkXG5cdHRoaXNbIGpRdWVyeS5leHBhbmRvIF0gPSB0cnVlO1xufTtcblxuLy8galF1ZXJ5LkV2ZW50IGlzIGJhc2VkIG9uIERPTTMgRXZlbnRzIGFzIHNwZWNpZmllZCBieSB0aGUgRUNNQVNjcmlwdCBMYW5ndWFnZSBCaW5kaW5nXG4vLyBodHRwczovL3d3dy53My5vcmcvVFIvMjAwMy9XRC1ET00tTGV2ZWwtMy1FdmVudHMtMjAwMzAzMzEvZWNtYS1zY3JpcHQtYmluZGluZy5odG1sXG5qUXVlcnkuRXZlbnQucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogalF1ZXJ5LkV2ZW50LFxuXHRpc0RlZmF1bHRQcmV2ZW50ZWQ6IHJldHVybkZhbHNlLFxuXHRpc1Byb3BhZ2F0aW9uU3RvcHBlZDogcmV0dXJuRmFsc2UsXG5cdGlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNTaW11bGF0ZWQ6IGZhbHNlLFxuXG5cdHByZXZlbnREZWZhdWx0OiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXHR9LFxuXHRzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0ltbWVkaWF0ZVByb3BhZ2F0aW9uU3RvcHBlZCA9IHJldHVyblRydWU7XG5cblx0XHRpZiAoIGUgJiYgIXRoaXMuaXNTaW11bGF0ZWQgKSB7XG5cdFx0XHRlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdH1cblxuXHRcdHRoaXMuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH1cbn07XG5cbi8vIEluY2x1ZGVzIGFsbCBjb21tb24gZXZlbnQgcHJvcHMgaW5jbHVkaW5nIEtleUV2ZW50IGFuZCBNb3VzZUV2ZW50IHNwZWNpZmljIHByb3BzXG5qUXVlcnkuZWFjaCgge1xuXHRhbHRLZXk6IHRydWUsXG5cdGJ1YmJsZXM6IHRydWUsXG5cdGNhbmNlbGFibGU6IHRydWUsXG5cdGNoYW5nZWRUb3VjaGVzOiB0cnVlLFxuXHRjdHJsS2V5OiB0cnVlLFxuXHRkZXRhaWw6IHRydWUsXG5cdGV2ZW50UGhhc2U6IHRydWUsXG5cdG1ldGFLZXk6IHRydWUsXG5cdHBhZ2VYOiB0cnVlLFxuXHRwYWdlWTogdHJ1ZSxcblx0c2hpZnRLZXk6IHRydWUsXG5cdHZpZXc6IHRydWUsXG5cdFwiY2hhclwiOiB0cnVlLFxuXHRjb2RlOiB0cnVlLFxuXHRjaGFyQ29kZTogdHJ1ZSxcblx0a2V5OiB0cnVlLFxuXHRrZXlDb2RlOiB0cnVlLFxuXHRidXR0b246IHRydWUsXG5cdGJ1dHRvbnM6IHRydWUsXG5cdGNsaWVudFg6IHRydWUsXG5cdGNsaWVudFk6IHRydWUsXG5cdG9mZnNldFg6IHRydWUsXG5cdG9mZnNldFk6IHRydWUsXG5cdHBvaW50ZXJJZDogdHJ1ZSxcblx0cG9pbnRlclR5cGU6IHRydWUsXG5cdHNjcmVlblg6IHRydWUsXG5cdHNjcmVlblk6IHRydWUsXG5cdHRhcmdldFRvdWNoZXM6IHRydWUsXG5cdHRvRWxlbWVudDogdHJ1ZSxcblx0dG91Y2hlczogdHJ1ZSxcblxuXHR3aGljaDogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdHZhciBidXR0b24gPSBldmVudC5idXR0b247XG5cblx0XHQvLyBBZGQgd2hpY2ggZm9yIGtleSBldmVudHNcblx0XHRpZiAoIGV2ZW50LndoaWNoID09IG51bGwgJiYgcmtleUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdHJldHVybiBldmVudC5jaGFyQ29kZSAhPSBudWxsID8gZXZlbnQuY2hhckNvZGUgOiBldmVudC5rZXlDb2RlO1xuXHRcdH1cblxuXHRcdC8vIEFkZCB3aGljaCBmb3IgY2xpY2s6IDEgPT09IGxlZnQ7IDIgPT09IG1pZGRsZTsgMyA9PT0gcmlnaHRcblx0XHRpZiAoICFldmVudC53aGljaCAmJiBidXR0b24gIT09IHVuZGVmaW5lZCAmJiBybW91c2VFdmVudC50ZXN0KCBldmVudC50eXBlICkgKSB7XG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDEgKSB7XG5cdFx0XHRcdHJldHVybiAxO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDIgKSB7XG5cdFx0XHRcdHJldHVybiAzO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGJ1dHRvbiAmIDQgKSB7XG5cdFx0XHRcdHJldHVybiAyO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gMDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQud2hpY2g7XG5cdH1cbn0sIGpRdWVyeS5ldmVudC5hZGRQcm9wICk7XG5cbmpRdWVyeS5lYWNoKCB7IGZvY3VzOiBcImZvY3VzaW5cIiwgYmx1cjogXCJmb2N1c291dFwiIH0sIGZ1bmN0aW9uKCB0eXBlLCBkZWxlZ2F0ZVR5cGUgKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gPSB7XG5cblx0XHQvLyBVdGlsaXplIG5hdGl2ZSBldmVudCBpZiBwb3NzaWJsZSBzbyBibHVyL2ZvY3VzIHNlcXVlbmNlIGlzIGNvcnJlY3Rcblx0XHRzZXR1cDogZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIENsYWltIHRoZSBmaXJzdCBoYW5kbGVyXG5cdFx0XHQvLyBkYXRhUHJpdi5zZXQoIHRoaXMsIFwiZm9jdXNcIiwgLi4uIClcblx0XHRcdC8vIGRhdGFQcml2LnNldCggdGhpcywgXCJibHVyXCIsIC4uLiApXG5cdFx0XHRsZXZlcmFnZU5hdGl2ZSggdGhpcywgdHlwZSwgZXhwZWN0U3luYyApO1xuXG5cdFx0XHQvLyBSZXR1cm4gZmFsc2UgdG8gYWxsb3cgbm9ybWFsIHByb2Nlc3NpbmcgaW4gdGhlIGNhbGxlclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cdFx0dHJpZ2dlcjogZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIEZvcmNlIHNldHVwIGJlZm9yZSB0cmlnZ2VyXG5cdFx0XHRsZXZlcmFnZU5hdGl2ZSggdGhpcywgdHlwZSApO1xuXG5cdFx0XHQvLyBSZXR1cm4gbm9uLWZhbHNlIHRvIGFsbG93IG5vcm1hbCBldmVudC1wYXRoIHByb3BhZ2F0aW9uXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9LFxuXG5cdFx0ZGVsZWdhdGVUeXBlOiBkZWxlZ2F0ZVR5cGVcblx0fTtcbn0gKTtcblxuLy8gQ3JlYXRlIG1vdXNlZW50ZXIvbGVhdmUgZXZlbnRzIHVzaW5nIG1vdXNlb3Zlci9vdXQgYW5kIGV2ZW50LXRpbWUgY2hlY2tzXG4vLyBzbyB0aGF0IGV2ZW50IGRlbGVnYXRpb24gd29ya3MgaW4galF1ZXJ5LlxuLy8gRG8gdGhlIHNhbWUgZm9yIHBvaW50ZXJlbnRlci9wb2ludGVybGVhdmUgYW5kIHBvaW50ZXJvdmVyL3BvaW50ZXJvdXRcbi8vXG4vLyBTdXBwb3J0OiBTYWZhcmkgNyBvbmx5XG4vLyBTYWZhcmkgc2VuZHMgbW91c2VlbnRlciB0b28gb2Z0ZW47IHNlZTpcbi8vIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ3MDI1OFxuLy8gZm9yIHRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgYnVnIChpdCBleGlzdGVkIGluIG9sZGVyIENocm9tZSB2ZXJzaW9ucyBhcyB3ZWxsKS5cbmpRdWVyeS5lYWNoKCB7XG5cdG1vdXNlZW50ZXI6IFwibW91c2VvdmVyXCIsXG5cdG1vdXNlbGVhdmU6IFwibW91c2VvdXRcIixcblx0cG9pbnRlcmVudGVyOiBcInBvaW50ZXJvdmVyXCIsXG5cdHBvaW50ZXJsZWF2ZTogXCJwb2ludGVyb3V0XCJcbn0sIGZ1bmN0aW9uKCBvcmlnLCBmaXggKSB7XG5cdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBvcmlnIF0gPSB7XG5cdFx0ZGVsZWdhdGVUeXBlOiBmaXgsXG5cdFx0YmluZFR5cGU6IGZpeCxcblxuXHRcdGhhbmRsZTogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIHJldCxcblx0XHRcdFx0dGFyZ2V0ID0gdGhpcyxcblx0XHRcdFx0cmVsYXRlZCA9IGV2ZW50LnJlbGF0ZWRUYXJnZXQsXG5cdFx0XHRcdGhhbmRsZU9iaiA9IGV2ZW50LmhhbmRsZU9iajtcblxuXHRcdFx0Ly8gRm9yIG1vdXNlZW50ZXIvbGVhdmUgY2FsbCB0aGUgaGFuZGxlciBpZiByZWxhdGVkIGlzIG91dHNpZGUgdGhlIHRhcmdldC5cblx0XHRcdC8vIE5COiBObyByZWxhdGVkVGFyZ2V0IGlmIHRoZSBtb3VzZSBsZWZ0L2VudGVyZWQgdGhlIGJyb3dzZXIgd2luZG93XG5cdFx0XHRpZiAoICFyZWxhdGVkIHx8ICggcmVsYXRlZCAhPT0gdGFyZ2V0ICYmICFqUXVlcnkuY29udGFpbnMoIHRhcmdldCwgcmVsYXRlZCApICkgKSB7XG5cdFx0XHRcdGV2ZW50LnR5cGUgPSBoYW5kbGVPYmoub3JpZ1R5cGU7XG5cdFx0XHRcdHJldCA9IGhhbmRsZU9iai5oYW5kbGVyLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGZpeDtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXHR9O1xufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0b246IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiApO1xuXHR9LFxuXHRvbmU6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiBvbiggdGhpcywgdHlwZXMsIHNlbGVjdG9yLCBkYXRhLCBmbiwgMSApO1xuXHR9LFxuXHRvZmY6IGZ1bmN0aW9uKCB0eXBlcywgc2VsZWN0b3IsIGZuICkge1xuXHRcdHZhciBoYW5kbGVPYmosIHR5cGU7XG5cdFx0aWYgKCB0eXBlcyAmJiB0eXBlcy5wcmV2ZW50RGVmYXVsdCAmJiB0eXBlcy5oYW5kbGVPYmogKSB7XG5cblx0XHRcdC8vICggZXZlbnQgKSAgZGlzcGF0Y2hlZCBqUXVlcnkuRXZlbnRcblx0XHRcdGhhbmRsZU9iaiA9IHR5cGVzLmhhbmRsZU9iajtcblx0XHRcdGpRdWVyeSggdHlwZXMuZGVsZWdhdGVUYXJnZXQgKS5vZmYoXG5cdFx0XHRcdGhhbmRsZU9iai5uYW1lc3BhY2UgP1xuXHRcdFx0XHRcdGhhbmRsZU9iai5vcmlnVHlwZSArIFwiLlwiICsgaGFuZGxlT2JqLm5hbWVzcGFjZSA6XG5cdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlLFxuXHRcdFx0XHRoYW5kbGVPYmouc2VsZWN0b3IsXG5cdFx0XHRcdGhhbmRsZU9iai5oYW5kbGVyXG5cdFx0XHQpO1xuXHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0fVxuXHRcdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0XHQvLyAoIHR5cGVzLW9iamVjdCBbLCBzZWxlY3Rvcl0gKVxuXHRcdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdFx0dGhpcy5vZmYoIHR5cGUsIHNlbGVjdG9yLCB0eXBlc1sgdHlwZSBdICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCBzZWxlY3RvciA9PT0gZmFsc2UgfHwgdHlwZW9mIHNlbGVjdG9yID09PSBcImZ1bmN0aW9uXCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMgWywgZm5dIClcblx0XHRcdGZuID0gc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKCBmbiA9PT0gZmFsc2UgKSB7XG5cdFx0XHRmbiA9IHJldHVybkZhbHNlO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIHRoaXMsIHR5cGVzLCBmbiwgc2VsZWN0b3IgKTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxuXG52YXJcblxuXHQvKiBlc2xpbnQtZGlzYWJsZSBtYXgtbGVuICovXG5cblx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9lc2xpbnQvZXNsaW50L2lzc3Vlcy8zMjI5XG5cdHJ4aHRtbFRhZyA9IC88KD8hYXJlYXxicnxjb2x8ZW1iZWR8aHJ8aW1nfGlucHV0fGxpbmt8bWV0YXxwYXJhbSkoKFthLXpdW15cXC9cXDA+XFx4MjBcXHRcXHJcXG5cXGZdKilbXj5dKilcXC8+L2dpLFxuXG5cdC8qIGVzbGludC1lbmFibGUgKi9cblxuXHQvLyBTdXBwb3J0OiBJRSA8PTEwIC0gMTEsIEVkZ2UgMTIgLSAxMyBvbmx5XG5cdC8vIEluIElFL0VkZ2UgdXNpbmcgcmVnZXggZ3JvdXBzIGhlcmUgY2F1c2VzIHNldmVyZSBzbG93ZG93bnMuXG5cdC8vIFNlZSBodHRwczovL2Nvbm5lY3QubWljcm9zb2Z0LmNvbS9JRS9mZWVkYmFjay9kZXRhaWxzLzE3MzY1MTIvXG5cdHJub0lubmVyaHRtbCA9IC88c2NyaXB0fDxzdHlsZXw8bGluay9pLFxuXG5cdC8vIGNoZWNrZWQ9XCJjaGVja2VkXCIgb3IgY2hlY2tlZFxuXHRyY2hlY2tlZCA9IC9jaGVja2VkXFxzKig/OltePV18PVxccyouY2hlY2tlZC4pL2ksXG5cdHJjbGVhblNjcmlwdCA9IC9eXFxzKjwhKD86XFxbQ0RBVEFcXFt8LS0pfCg/OlxcXVxcXXwtLSk+XFxzKiQvZztcblxuLy8gUHJlZmVyIGEgdGJvZHkgb3ZlciBpdHMgcGFyZW50IHRhYmxlIGZvciBjb250YWluaW5nIG5ldyByb3dzXG5mdW5jdGlvbiBtYW5pcHVsYXRpb25UYXJnZXQoIGVsZW0sIGNvbnRlbnQgKSB7XG5cdGlmICggbm9kZU5hbWUoIGVsZW0sIFwidGFibGVcIiApICYmXG5cdFx0bm9kZU5hbWUoIGNvbnRlbnQubm9kZVR5cGUgIT09IDExID8gY29udGVudCA6IGNvbnRlbnQuZmlyc3RDaGlsZCwgXCJ0clwiICkgKSB7XG5cblx0XHRyZXR1cm4galF1ZXJ5KCBlbGVtICkuY2hpbGRyZW4oIFwidGJvZHlcIiApWyAwIF0gfHwgZWxlbTtcblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG4vLyBSZXBsYWNlL3Jlc3RvcmUgdGhlIHR5cGUgYXR0cmlidXRlIG9mIHNjcmlwdCBlbGVtZW50cyBmb3Igc2FmZSBET00gbWFuaXB1bGF0aW9uXG5mdW5jdGlvbiBkaXNhYmxlU2NyaXB0KCBlbGVtICkge1xuXHRlbGVtLnR5cGUgPSAoIGVsZW0uZ2V0QXR0cmlidXRlKCBcInR5cGVcIiApICE9PSBudWxsICkgKyBcIi9cIiArIGVsZW0udHlwZTtcblx0cmV0dXJuIGVsZW07XG59XG5mdW5jdGlvbiByZXN0b3JlU2NyaXB0KCBlbGVtICkge1xuXHRpZiAoICggZWxlbS50eXBlIHx8IFwiXCIgKS5zbGljZSggMCwgNSApID09PSBcInRydWUvXCIgKSB7XG5cdFx0ZWxlbS50eXBlID0gZWxlbS50eXBlLnNsaWNlKCA1ICk7XG5cdH0gZWxzZSB7XG5cdFx0ZWxlbS5yZW1vdmVBdHRyaWJ1dGUoIFwidHlwZVwiICk7XG5cdH1cblxuXHRyZXR1cm4gZWxlbTtcbn1cblxuZnVuY3Rpb24gY2xvbmVDb3B5RXZlbnQoIHNyYywgZGVzdCApIHtcblx0dmFyIGksIGwsIHR5cGUsIHBkYXRhT2xkLCBwZGF0YUN1ciwgdWRhdGFPbGQsIHVkYXRhQ3VyLCBldmVudHM7XG5cblx0aWYgKCBkZXN0Lm5vZGVUeXBlICE9PSAxICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIDEuIENvcHkgcHJpdmF0ZSBkYXRhOiBldmVudHMsIGhhbmRsZXJzLCBldGMuXG5cdGlmICggZGF0YVByaXYuaGFzRGF0YSggc3JjICkgKSB7XG5cdFx0cGRhdGFPbGQgPSBkYXRhUHJpdi5hY2Nlc3MoIHNyYyApO1xuXHRcdHBkYXRhQ3VyID0gZGF0YVByaXYuc2V0KCBkZXN0LCBwZGF0YU9sZCApO1xuXHRcdGV2ZW50cyA9IHBkYXRhT2xkLmV2ZW50cztcblxuXHRcdGlmICggZXZlbnRzICkge1xuXHRcdFx0ZGVsZXRlIHBkYXRhQ3VyLmhhbmRsZTtcblx0XHRcdHBkYXRhQ3VyLmV2ZW50cyA9IHt9O1xuXG5cdFx0XHRmb3IgKCB0eXBlIGluIGV2ZW50cyApIHtcblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBldmVudHNbIHR5cGUgXS5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZGVzdCwgdHlwZSwgZXZlbnRzWyB0eXBlIF1bIGkgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gMi4gQ29weSB1c2VyIGRhdGFcblx0aWYgKCBkYXRhVXNlci5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHR1ZGF0YU9sZCA9IGRhdGFVc2VyLmFjY2Vzcyggc3JjICk7XG5cdFx0dWRhdGFDdXIgPSBqUXVlcnkuZXh0ZW5kKCB7fSwgdWRhdGFPbGQgKTtcblxuXHRcdGRhdGFVc2VyLnNldCggZGVzdCwgdWRhdGFDdXIgKTtcblx0fVxufVxuXG4vLyBGaXggSUUgYnVncywgc2VlIHN1cHBvcnQgdGVzdHNcbmZ1bmN0aW9uIGZpeElucHV0KCBzcmMsIGRlc3QgKSB7XG5cdHZhciBub2RlTmFtZSA9IGRlc3Qubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHQvLyBGYWlscyB0byBwZXJzaXN0IHRoZSBjaGVja2VkIHN0YXRlIG9mIGEgY2xvbmVkIGNoZWNrYm94IG9yIHJhZGlvIGJ1dHRvbi5cblx0aWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiICYmIHJjaGVja2FibGVUeXBlLnRlc3QoIHNyYy50eXBlICkgKSB7XG5cdFx0ZGVzdC5jaGVja2VkID0gc3JjLmNoZWNrZWQ7XG5cblx0Ly8gRmFpbHMgdG8gcmV0dXJuIHRoZSBzZWxlY3RlZCBvcHRpb24gdG8gdGhlIGRlZmF1bHQgc2VsZWN0ZWQgc3RhdGUgd2hlbiBjbG9uaW5nIG9wdGlvbnNcblx0fSBlbHNlIGlmICggbm9kZU5hbWUgPT09IFwiaW5wdXRcIiB8fCBub2RlTmFtZSA9PT0gXCJ0ZXh0YXJlYVwiICkge1xuXHRcdGRlc3QuZGVmYXVsdFZhbHVlID0gc3JjLmRlZmF1bHRWYWx1ZTtcblx0fVxufVxuXG5mdW5jdGlvbiBkb21NYW5pcCggY29sbGVjdGlvbiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKSB7XG5cblx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRhcmdzID0gY29uY2F0LmFwcGx5KCBbXSwgYXJncyApO1xuXG5cdHZhciBmcmFnbWVudCwgZmlyc3QsIHNjcmlwdHMsIGhhc1NjcmlwdHMsIG5vZGUsIGRvYyxcblx0XHRpID0gMCxcblx0XHRsID0gY29sbGVjdGlvbi5sZW5ndGgsXG5cdFx0aU5vQ2xvbmUgPSBsIC0gMSxcblx0XHR2YWx1ZSA9IGFyZ3NbIDAgXSxcblx0XHR2YWx1ZUlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdC8vIFdlIGNhbid0IGNsb25lTm9kZSBmcmFnbWVudHMgdGhhdCBjb250YWluIGNoZWNrZWQsIGluIFdlYktpdFxuXHRpZiAoIHZhbHVlSXNGdW5jdGlvbiB8fFxuXHRcdFx0KCBsID4gMSAmJiB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXN1cHBvcnQuY2hlY2tDbG9uZSAmJiByY2hlY2tlZC50ZXN0KCB2YWx1ZSApICkgKSB7XG5cdFx0cmV0dXJuIGNvbGxlY3Rpb24uZWFjaCggZnVuY3Rpb24oIGluZGV4ICkge1xuXHRcdFx0dmFyIHNlbGYgPSBjb2xsZWN0aW9uLmVxKCBpbmRleCApO1xuXHRcdFx0aWYgKCB2YWx1ZUlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdGFyZ3NbIDAgXSA9IHZhbHVlLmNhbGwoIHRoaXMsIGluZGV4LCBzZWxmLmh0bWwoKSApO1xuXHRcdFx0fVxuXHRcdFx0ZG9tTWFuaXAoIHNlbGYsIGFyZ3MsIGNhbGxiYWNrLCBpZ25vcmVkICk7XG5cdFx0fSApO1xuXHR9XG5cblx0aWYgKCBsICkge1xuXHRcdGZyYWdtZW50ID0gYnVpbGRGcmFnbWVudCggYXJncywgY29sbGVjdGlvblsgMCBdLm93bmVyRG9jdW1lbnQsIGZhbHNlLCBjb2xsZWN0aW9uLCBpZ25vcmVkICk7XG5cdFx0Zmlyc3QgPSBmcmFnbWVudC5maXJzdENoaWxkO1xuXG5cdFx0aWYgKCBmcmFnbWVudC5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMSApIHtcblx0XHRcdGZyYWdtZW50ID0gZmlyc3Q7XG5cdFx0fVxuXG5cdFx0Ly8gUmVxdWlyZSBlaXRoZXIgbmV3IGNvbnRlbnQgb3IgYW4gaW50ZXJlc3QgaW4gaWdub3JlZCBlbGVtZW50cyB0byBpbnZva2UgdGhlIGNhbGxiYWNrXG5cdFx0aWYgKCBmaXJzdCB8fCBpZ25vcmVkICkge1xuXHRcdFx0c2NyaXB0cyA9IGpRdWVyeS5tYXAoIGdldEFsbCggZnJhZ21lbnQsIFwic2NyaXB0XCIgKSwgZGlzYWJsZVNjcmlwdCApO1xuXHRcdFx0aGFzU2NyaXB0cyA9IHNjcmlwdHMubGVuZ3RoO1xuXG5cdFx0XHQvLyBVc2UgdGhlIG9yaWdpbmFsIGZyYWdtZW50IGZvciB0aGUgbGFzdCBpdGVtXG5cdFx0XHQvLyBpbnN0ZWFkIG9mIHRoZSBmaXJzdCBiZWNhdXNlIGl0IGNhbiBlbmQgdXBcblx0XHRcdC8vIGJlaW5nIGVtcHRpZWQgaW5jb3JyZWN0bHkgaW4gY2VydGFpbiBzaXR1YXRpb25zICgjODA3MCkuXG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdG5vZGUgPSBmcmFnbWVudDtcblxuXHRcdFx0XHRpZiAoIGkgIT09IGlOb0Nsb25lICkge1xuXHRcdFx0XHRcdG5vZGUgPSBqUXVlcnkuY2xvbmUoIG5vZGUsIHRydWUsIHRydWUgKTtcblxuXHRcdFx0XHRcdC8vIEtlZXAgcmVmZXJlbmNlcyB0byBjbG9uZWQgc2NyaXB0cyBmb3IgbGF0ZXIgcmVzdG9yYXRpb25cblx0XHRcdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBzY3JpcHRzLCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdGNhbGxiYWNrLmNhbGwoIGNvbGxlY3Rpb25bIGkgXSwgbm9kZSwgaSApO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhhc1NjcmlwdHMgKSB7XG5cdFx0XHRcdGRvYyA9IHNjcmlwdHNbIHNjcmlwdHMubGVuZ3RoIC0gMSBdLm93bmVyRG9jdW1lbnQ7XG5cblx0XHRcdFx0Ly8gUmVlbmFibGUgc2NyaXB0c1xuXHRcdFx0XHRqUXVlcnkubWFwKCBzY3JpcHRzLCByZXN0b3JlU2NyaXB0ICk7XG5cblx0XHRcdFx0Ly8gRXZhbHVhdGUgZXhlY3V0YWJsZSBzY3JpcHRzIG9uIGZpcnN0IGRvY3VtZW50IGluc2VydGlvblxuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGhhc1NjcmlwdHM7IGkrKyApIHtcblx0XHRcdFx0XHRub2RlID0gc2NyaXB0c1sgaSBdO1xuXHRcdFx0XHRcdGlmICggcnNjcmlwdFR5cGUudGVzdCggbm9kZS50eXBlIHx8IFwiXCIgKSAmJlxuXHRcdFx0XHRcdFx0IWRhdGFQcml2LmFjY2Vzcyggbm9kZSwgXCJnbG9iYWxFdmFsXCIgKSAmJlxuXHRcdFx0XHRcdFx0alF1ZXJ5LmNvbnRhaW5zKCBkb2MsIG5vZGUgKSApIHtcblxuXHRcdFx0XHRcdFx0aWYgKCBub2RlLnNyYyAmJiAoIG5vZGUudHlwZSB8fCBcIlwiICkudG9Mb3dlckNhc2UoKSAgIT09IFwibW9kdWxlXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gT3B0aW9uYWwgQUpBWCBkZXBlbmRlbmN5LCBidXQgd29uJ3QgcnVuIHNjcmlwdHMgaWYgbm90IHByZXNlbnRcblx0XHRcdFx0XHRcdFx0aWYgKCBqUXVlcnkuX2V2YWxVcmwgJiYgIW5vZGUubm9Nb2R1bGUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5Ll9ldmFsVXJsKCBub2RlLnNyYywge1xuXHRcdFx0XHRcdFx0XHRcdFx0bm9uY2U6IG5vZGUubm9uY2UgfHwgbm9kZS5nZXRBdHRyaWJ1dGUoIFwibm9uY2VcIiApXG5cdFx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRET01FdmFsKCBub2RlLnRleHRDb250ZW50LnJlcGxhY2UoIHJjbGVhblNjcmlwdCwgXCJcIiApLCBub2RlLCBkb2MgKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gY29sbGVjdGlvbjtcbn1cblxuZnVuY3Rpb24gcmVtb3ZlKCBlbGVtLCBzZWxlY3Rvciwga2VlcERhdGEgKSB7XG5cdHZhciBub2RlLFxuXHRcdG5vZGVzID0gc2VsZWN0b3IgPyBqUXVlcnkuZmlsdGVyKCBzZWxlY3RvciwgZWxlbSApIDogZWxlbSxcblx0XHRpID0gMDtcblxuXHRmb3IgKCA7ICggbm9kZSA9IG5vZGVzWyBpIF0gKSAhPSBudWxsOyBpKysgKSB7XG5cdFx0aWYgKCAha2VlcERhdGEgJiYgbm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggbm9kZSApICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBub2RlLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRpZiAoIGtlZXBEYXRhICYmIGlzQXR0YWNoZWQoIG5vZGUgKSApIHtcblx0XHRcdFx0c2V0R2xvYmFsRXZhbCggZ2V0QWxsKCBub2RlLCBcInNjcmlwdFwiICkgKTtcblx0XHRcdH1cblx0XHRcdG5vZGUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCggbm9kZSApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGh0bWxQcmVmaWx0ZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHJldHVybiBodG1sLnJlcGxhY2UoIHJ4aHRtbFRhZywgXCI8JDE+PC8kMj5cIiApO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZWxlbSwgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0dmFyIGksIGwsIHNyY0VsZW1lbnRzLCBkZXN0RWxlbWVudHMsXG5cdFx0XHRjbG9uZSA9IGVsZW0uY2xvbmVOb2RlKCB0cnVlICksXG5cdFx0XHRpblBhZ2UgPSBpc0F0dGFjaGVkKCBlbGVtICk7XG5cblx0XHQvLyBGaXggSUUgY2xvbmluZyBpc3N1ZXNcblx0XHRpZiAoICFzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkICYmICggZWxlbS5ub2RlVHlwZSA9PT0gMSB8fCBlbGVtLm5vZGVUeXBlID09PSAxMSApICYmXG5cdFx0XHRcdCFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gV2UgZXNjaGV3IFNpenpsZSBoZXJlIGZvciBwZXJmb3JtYW5jZSByZWFzb25zOiBodHRwczovL2pzcGVyZi5jb20vZ2V0YWxsLXZzLXNpenpsZS8yXG5cdFx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lICk7XG5cdFx0XHRzcmNFbGVtZW50cyA9IGdldEFsbCggZWxlbSApO1xuXG5cdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0Zml4SW5wdXQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29weSB0aGUgZXZlbnRzIGZyb20gdGhlIG9yaWdpbmFsIHRvIHRoZSBjbG9uZVxuXHRcdGlmICggZGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdGlmICggZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0XHRcdHNyY0VsZW1lbnRzID0gc3JjRWxlbWVudHMgfHwgZ2V0QWxsKCBlbGVtICk7XG5cdFx0XHRcdGRlc3RFbGVtZW50cyA9IGRlc3RFbGVtZW50cyB8fCBnZXRBbGwoIGNsb25lICk7XG5cblx0XHRcdFx0Zm9yICggaSA9IDAsIGwgPSBzcmNFbGVtZW50cy5sZW5ndGg7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIHNyY0VsZW1lbnRzWyBpIF0sIGRlc3RFbGVtZW50c1sgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGNsb25lQ29weUV2ZW50KCBlbGVtLCBjbG9uZSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFByZXNlcnZlIHNjcmlwdCBldmFsdWF0aW9uIGhpc3Rvcnlcblx0XHRkZXN0RWxlbWVudHMgPSBnZXRBbGwoIGNsb25lLCBcInNjcmlwdFwiICk7XG5cdFx0aWYgKCBkZXN0RWxlbWVudHMubGVuZ3RoID4gMCApIHtcblx0XHRcdHNldEdsb2JhbEV2YWwoIGRlc3RFbGVtZW50cywgIWluUGFnZSAmJiBnZXRBbGwoIGVsZW0sIFwic2NyaXB0XCIgKSApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB0aGUgY2xvbmVkIHNldFxuXHRcdHJldHVybiBjbG9uZTtcblx0fSxcblxuXHRjbGVhbkRhdGE6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblx0XHR2YXIgZGF0YSwgZWxlbSwgdHlwZSxcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbCxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyAoIGVsZW0gPSBlbGVtc1sgaSBdICkgIT09IHVuZGVmaW5lZDsgaSsrICkge1xuXHRcdFx0aWYgKCBhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cdFx0XHRcdGlmICggKCBkYXRhID0gZWxlbVsgZGF0YVByaXYuZXhwYW5kbyBdICkgKSB7XG5cdFx0XHRcdFx0aWYgKCBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdGZvciAoIHR5cGUgaW4gZGF0YS5ldmVudHMgKSB7XG5cdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbFsgdHlwZSBdICkge1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKTtcblxuXHRcdFx0XHRcdFx0XHQvLyBUaGlzIGlzIGEgc2hvcnRjdXQgdG8gYXZvaWQgalF1ZXJ5LmV2ZW50LnJlbW92ZSdzIG92ZXJoZWFkXG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LnJlbW92ZUV2ZW50KCBlbGVtLCB0eXBlLCBkYXRhLmhhbmRsZSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lIDw9MzUgLSA0NStcblx0XHRcdFx0XHQvLyBBc3NpZ24gdW5kZWZpbmVkIGluc3RlYWQgb2YgdXNpbmcgZGVsZXRlLCBzZWUgRGF0YSNyZW1vdmVcblx0XHRcdFx0XHRlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gPSB1bmRlZmluZWQ7XG5cdFx0XHRcdH1cblx0XHRcdFx0aWYgKCBlbGVtWyBkYXRhVXNlci5leHBhbmRvIF0gKSB7XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGRldGFjaDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHJldHVybiByZW1vdmUoIHRoaXMsIHNlbGVjdG9yLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IgKTtcblx0fSxcblxuXHR0ZXh0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkudGV4dCggdGhpcyApIDpcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHRcdFx0dGhpcy50ZXh0Q29udGVudCA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0YXBwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuYXBwZW5kQ2hpbGQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0cHJlcGVuZDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBtYW5pcHVsYXRpb25UYXJnZXQoIHRoaXMsIGVsZW0gKTtcblx0XHRcdFx0dGFyZ2V0Lmluc2VydEJlZm9yZSggZWxlbSwgdGFyZ2V0LmZpcnN0Q2hpbGQgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0YmVmb3JlOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRhZnRlcjogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0aWYgKCB0aGlzLnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdHRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoIGVsZW0sIHRoaXMubmV4dFNpYmxpbmcgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0ZW1wdHk6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlbGVtLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IHRoaXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBQcmV2ZW50IG1lbW9yeSBsZWFrc1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIGVsZW0sIGZhbHNlICkgKTtcblxuXHRcdFx0XHQvLyBSZW1vdmUgYW55IHJlbWFpbmluZyBub2Rlc1xuXHRcdFx0XHRlbGVtLnRleHRDb250ZW50ID0gXCJcIjtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRjbG9uZTogZnVuY3Rpb24oIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICkge1xuXHRcdGRhdGFBbmRFdmVudHMgPSBkYXRhQW5kRXZlbnRzID09IG51bGwgPyBmYWxzZSA6IGRhdGFBbmRFdmVudHM7XG5cdFx0ZGVlcERhdGFBbmRFdmVudHMgPSBkZWVwRGF0YUFuZEV2ZW50cyA9PSBudWxsID8gZGF0YUFuZEV2ZW50cyA6IGRlZXBEYXRhQW5kRXZlbnRzO1xuXG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY2xvbmUoIHRoaXMsIGRhdGFBbmRFdmVudHMsIGRlZXBEYXRhQW5kRXZlbnRzICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdGh0bWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXSB8fCB7fSxcblx0XHRcdFx0aSA9IDAsXG5cdFx0XHRcdGwgPSB0aGlzLmxlbmd0aDtcblxuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdHJldHVybiBlbGVtLmlubmVySFRNTDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2VlIGlmIHdlIGNhbiB0YWtlIGEgc2hvcnRjdXQgYW5kIGp1c3QgdXNlIGlubmVySFRNTFxuXHRcdFx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgJiYgIXJub0lubmVyaHRtbC50ZXN0KCB2YWx1ZSApICYmXG5cdFx0XHRcdCF3cmFwTWFwWyAoIHJ0YWdOYW1lLmV4ZWMoIHZhbHVlICkgfHwgWyBcIlwiLCBcIlwiIF0gKVsgMSBdLnRvTG93ZXJDYXNlKCkgXSApIHtcblxuXHRcdFx0XHR2YWx1ZSA9IGpRdWVyeS5odG1sUHJlZmlsdGVyKCB2YWx1ZSApO1xuXG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRcdFx0ZWxlbSA9IHRoaXNbIGkgXSB8fCB7fTtcblxuXHRcdFx0XHRcdFx0Ly8gUmVtb3ZlIGVsZW1lbnQgbm9kZXMgYW5kIHByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXHRcdFx0XHRcdFx0XHRlbGVtLmlubmVySFRNTCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW0gPSAwO1xuXG5cdFx0XHRcdC8vIElmIHVzaW5nIGlubmVySFRNTCB0aHJvd3MgYW4gZXhjZXB0aW9uLCB1c2UgdGhlIGZhbGxiYWNrIG1ldGhvZFxuXHRcdFx0XHR9IGNhdGNoICggZSApIHt9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggZWxlbSApIHtcblx0XHRcdFx0dGhpcy5lbXB0eSgpLmFwcGVuZCggdmFsdWUgKTtcblx0XHRcdH1cblx0XHR9LCBudWxsLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCApO1xuXHR9LFxuXG5cdHJlcGxhY2VXaXRoOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaWdub3JlZCA9IFtdO1xuXG5cdFx0Ly8gTWFrZSB0aGUgY2hhbmdlcywgcmVwbGFjaW5nIGVhY2ggbm9uLWlnbm9yZWQgY29udGV4dCBlbGVtZW50IHdpdGggdGhlIG5ldyBjb250ZW50XG5cdFx0cmV0dXJuIGRvbU1hbmlwKCB0aGlzLCBhcmd1bWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIHBhcmVudCA9IHRoaXMucGFyZW50Tm9kZTtcblxuXHRcdFx0aWYgKCBqUXVlcnkuaW5BcnJheSggdGhpcywgaWdub3JlZCApIDwgMCApIHtcblx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCB0aGlzICkgKTtcblx0XHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnJlcGxhY2VDaGlsZCggZWxlbSwgdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBGb3JjZSBjYWxsYmFjayBpbnZvY2F0aW9uXG5cdFx0fSwgaWdub3JlZCApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCB7XG5cdGFwcGVuZFRvOiBcImFwcGVuZFwiLFxuXHRwcmVwZW5kVG86IFwicHJlcGVuZFwiLFxuXHRpbnNlcnRCZWZvcmU6IFwiYmVmb3JlXCIsXG5cdGluc2VydEFmdGVyOiBcImFmdGVyXCIsXG5cdHJlcGxhY2VBbGw6IFwicmVwbGFjZVdpdGhcIlxufSwgZnVuY3Rpb24oIG5hbWUsIG9yaWdpbmFsICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHR2YXIgZWxlbXMsXG5cdFx0XHRyZXQgPSBbXSxcblx0XHRcdGluc2VydCA9IGpRdWVyeSggc2VsZWN0b3IgKSxcblx0XHRcdGxhc3QgPSBpbnNlcnQubGVuZ3RoIC0gMSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Zm9yICggOyBpIDw9IGxhc3Q7IGkrKyApIHtcblx0XHRcdGVsZW1zID0gaSA9PT0gbGFzdCA/IHRoaXMgOiB0aGlzLmNsb25lKCB0cnVlICk7XG5cdFx0XHRqUXVlcnkoIGluc2VydFsgaSBdIClbIG9yaWdpbmFsIF0oIGVsZW1zICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seSwgUGhhbnRvbUpTIDEgb25seVxuXHRcdFx0Ly8gLmdldCgpIGJlY2F1c2UgcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0cHVzaC5hcHBseSggcmV0LCBlbGVtcy5nZXQoKSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggcmV0ICk7XG5cdH07XG59ICk7XG52YXIgcm51bW5vbnB4ID0gbmV3IFJlZ0V4cCggXCJeKFwiICsgcG51bSArIFwiKSg/IXB4KVthLXolXSskXCIsIFwiaVwiICk7XG5cbnZhciBnZXRTdHlsZXMgPSBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seSwgRmlyZWZveCA8PTMwICgjMTUwOTgsICMxNDE1MClcblx0XHQvLyBJRSB0aHJvd3Mgb24gZWxlbWVudHMgY3JlYXRlZCBpbiBwb3B1cHNcblx0XHQvLyBGRiBtZWFud2hpbGUgdGhyb3dzIG9uIGZyYW1lIGVsZW1lbnRzIHRocm91Z2ggXCJkZWZhdWx0Vmlldy5nZXRDb21wdXRlZFN0eWxlXCJcblx0XHR2YXIgdmlldyA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0VmlldztcblxuXHRcdGlmICggIXZpZXcgfHwgIXZpZXcub3BlbmVyICkge1xuXHRcdFx0dmlldyA9IHdpbmRvdztcblx0XHR9XG5cblx0XHRyZXR1cm4gdmlldy5nZXRDb21wdXRlZFN0eWxlKCBlbGVtICk7XG5cdH07XG5cbnZhciByYm94U3R5bGUgPSBuZXcgUmVnRXhwKCBjc3NFeHBhbmQuam9pbiggXCJ8XCIgKSwgXCJpXCIgKTtcblxuXG5cbiggZnVuY3Rpb24oKSB7XG5cblx0Ly8gRXhlY3V0aW5nIGJvdGggcGl4ZWxQb3NpdGlvbiAmIGJveFNpemluZ1JlbGlhYmxlIHRlc3RzIHJlcXVpcmUgb25seSBvbmUgbGF5b3V0XG5cdC8vIHNvIHRoZXkncmUgZXhlY3V0ZWQgYXQgdGhlIHNhbWUgdGltZSB0byBzYXZlIHRoZSBzZWNvbmQgY29tcHV0YXRpb24uXG5cdGZ1bmN0aW9uIGNvbXB1dGVTdHlsZVRlc3RzKCkge1xuXG5cdFx0Ly8gVGhpcyBpcyBhIHNpbmdsZXRvbiwgd2UgbmVlZCB0byBleGVjdXRlIGl0IG9ubHkgb25jZVxuXHRcdGlmICggIWRpdiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRjb250YWluZXIuc3R5bGUuY3NzVGV4dCA9IFwicG9zaXRpb246YWJzb2x1dGU7bGVmdDotMTExMTFweDt3aWR0aDo2MHB4O1wiICtcblx0XHRcdFwibWFyZ2luLXRvcDoxcHg7cGFkZGluZzowO2JvcmRlcjowXCI7XG5cdFx0ZGl2LnN0eWxlLmNzc1RleHQgPVxuXHRcdFx0XCJwb3NpdGlvbjpyZWxhdGl2ZTtkaXNwbGF5OmJsb2NrO2JveC1zaXppbmc6Ym9yZGVyLWJveDtvdmVyZmxvdzpzY3JvbGw7XCIgK1xuXHRcdFx0XCJtYXJnaW46YXV0bztib3JkZXI6MXB4O3BhZGRpbmc6MXB4O1wiICtcblx0XHRcdFwid2lkdGg6NjAlO3RvcDoxJVwiO1xuXHRcdGRvY3VtZW50RWxlbWVudC5hcHBlbmRDaGlsZCggY29udGFpbmVyICkuYXBwZW5kQ2hpbGQoIGRpdiApO1xuXG5cdFx0dmFyIGRpdlN0eWxlID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoIGRpdiApO1xuXHRcdHBpeGVsUG9zaXRpb25WYWwgPSBkaXZTdHlsZS50b3AgIT09IFwiMSVcIjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIEZpcmVmb3ggPD0zIC0gNDRcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnRWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLm1hcmdpbkxlZnQgKSA9PT0gMTI7XG5cblx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5LCBTYWZhcmkgPD05LjEgLSAxMC4xLCBpT1MgPD03LjAgLSA5LjNcblx0XHQvLyBTb21lIHN0eWxlcyBjb21lIGJhY2sgd2l0aCBwZXJjZW50YWdlIHZhbHVlcywgZXZlbiB0aG91Z2ggdGhleSBzaG91bGRuJ3Rcblx0XHRkaXYuc3R5bGUucmlnaHQgPSBcIjYwJVwiO1xuXHRcdHBpeGVsQm94U3R5bGVzVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS5yaWdodCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5XG5cdFx0Ly8gRGV0ZWN0IG1pc3JlcG9ydGluZyBvZiBjb250ZW50IGRpbWVuc2lvbnMgZm9yIGJveC1zaXppbmc6Ym9yZGVyLWJveCBlbGVtZW50c1xuXHRcdGJveFNpemluZ1JlbGlhYmxlVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXZTdHlsZS53aWR0aCApID09PSAzNjtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgb25seVxuXHRcdC8vIERldGVjdCBvdmVyZmxvdzpzY3JvbGwgc2NyZXdpbmVzcyAoZ2gtMzY5OSlcblx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD02NFxuXHRcdC8vIERvbid0IGdldCB0cmlja2VkIHdoZW4gem9vbSBhZmZlY3RzIG9mZnNldFdpZHRoIChnaC00MDI5KVxuXHRcdGRpdi5zdHlsZS5wb3NpdGlvbiA9IFwiYWJzb2x1dGVcIjtcblx0XHRzY3JvbGxib3hTaXplVmFsID0gcm91bmRQaXhlbE1lYXN1cmVzKCBkaXYub2Zmc2V0V2lkdGggLyAzICkgPT09IDEyO1xuXG5cdFx0ZG9jdW1lbnRFbGVtZW50LnJlbW92ZUNoaWxkKCBjb250YWluZXIgKTtcblxuXHRcdC8vIE51bGxpZnkgdGhlIGRpdiBzbyBpdCB3b3VsZG4ndCBiZSBzdG9yZWQgaW4gdGhlIG1lbW9yeSBhbmRcblx0XHQvLyBpdCB3aWxsIGFsc28gYmUgYSBzaWduIHRoYXQgY2hlY2tzIGFscmVhZHkgcGVyZm9ybWVkXG5cdFx0ZGl2ID0gbnVsbDtcblx0fVxuXG5cdGZ1bmN0aW9uIHJvdW5kUGl4ZWxNZWFzdXJlcyggbWVhc3VyZSApIHtcblx0XHRyZXR1cm4gTWF0aC5yb3VuZCggcGFyc2VGbG9hdCggbWVhc3VyZSApICk7XG5cdH1cblxuXHR2YXIgcGl4ZWxQb3NpdGlvblZhbCwgYm94U2l6aW5nUmVsaWFibGVWYWwsIHNjcm9sbGJveFNpemVWYWwsIHBpeGVsQm94U3R5bGVzVmFsLFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCxcblx0XHRjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICksXG5cdFx0ZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApO1xuXG5cdC8vIEZpbmlzaCBlYXJseSBpbiBsaW1pdGVkIChub24tYnJvd3NlcikgZW52aXJvbm1lbnRzXG5cdGlmICggIWRpdi5zdHlsZSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdC8vIFN0eWxlIG9mIGNsb25lZCBlbGVtZW50IGFmZmVjdHMgc291cmNlIGVsZW1lbnQgY2xvbmVkICgjODkwOClcblx0ZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID0gXCJjb250ZW50LWJveFwiO1xuXHRkaXYuY2xvbmVOb2RlKCB0cnVlICkuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcIlwiO1xuXHRzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSA9IGRpdi5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9PT0gXCJjb250ZW50LWJveFwiO1xuXG5cdGpRdWVyeS5leHRlbmQoIHN1cHBvcnQsIHtcblx0XHRib3hTaXppbmdSZWxpYWJsZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIGJveFNpemluZ1JlbGlhYmxlVmFsO1xuXHRcdH0sXG5cdFx0cGl4ZWxCb3hTdHlsZXM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBwaXhlbEJveFN0eWxlc1ZhbDtcblx0XHR9LFxuXHRcdHBpeGVsUG9zaXRpb246IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiBwaXhlbFBvc2l0aW9uVmFsO1xuXHRcdH0sXG5cdFx0cmVsaWFibGVNYXJnaW5MZWZ0OiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gcmVsaWFibGVNYXJnaW5MZWZ0VmFsO1xuXHRcdH0sXG5cdFx0c2Nyb2xsYm94U2l6ZTogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHNjcm9sbGJveFNpemVWYWw7XG5cdFx0fVxuXHR9ICk7XG59ICkoKTtcblxuXG5mdW5jdGlvbiBjdXJDU1MoIGVsZW0sIG5hbWUsIGNvbXB1dGVkICkge1xuXHR2YXIgd2lkdGgsIG1pbldpZHRoLCBtYXhXaWR0aCwgcmV0LFxuXG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA1MStcblx0XHQvLyBSZXRyaWV2aW5nIHN0eWxlIGJlZm9yZSBjb21wdXRlZCBzb21laG93XG5cdFx0Ly8gZml4ZXMgYW4gaXNzdWUgd2l0aCBnZXR0aW5nIHdyb25nIHZhbHVlc1xuXHRcdC8vIG9uIGRldGFjaGVkIGVsZW1lbnRzXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlO1xuXG5cdGNvbXB1dGVkID0gY29tcHV0ZWQgfHwgZ2V0U3R5bGVzKCBlbGVtICk7XG5cblx0Ly8gZ2V0UHJvcGVydHlWYWx1ZSBpcyBuZWVkZWQgZm9yOlxuXHQvLyAgIC5jc3MoJ2ZpbHRlcicpIChJRSA5IG9ubHksICMxMjUzNylcblx0Ly8gICAuY3NzKCctLWN1c3RvbVByb3BlcnR5KSAoIzMxNDQpXG5cdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0cmV0ID0gY29tcHV0ZWQuZ2V0UHJvcGVydHlWYWx1ZSggbmFtZSApIHx8IGNvbXB1dGVkWyBuYW1lIF07XG5cblx0XHRpZiAoIHJldCA9PT0gXCJcIiAmJiAhaXNBdHRhY2hlZCggZWxlbSApICkge1xuXHRcdFx0cmV0ID0galF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gQSB0cmlidXRlIHRvIHRoZSBcImF3ZXNvbWUgaGFjayBieSBEZWFuIEVkd2FyZHNcIlxuXHRcdC8vIEFuZHJvaWQgQnJvd3NlciByZXR1cm5zIHBlcmNlbnRhZ2UgZm9yIHNvbWUgdmFsdWVzLFxuXHRcdC8vIGJ1dCB3aWR0aCBzZWVtcyB0byBiZSByZWxpYWJseSBwaXhlbHMuXG5cdFx0Ly8gVGhpcyBpcyBhZ2FpbnN0IHRoZSBDU1NPTSBkcmFmdCBzcGVjOlxuXHRcdC8vIGh0dHBzOi8vZHJhZnRzLmNzc3dnLm9yZy9jc3NvbS8jcmVzb2x2ZWQtdmFsdWVzXG5cdFx0aWYgKCAhc3VwcG9ydC5waXhlbEJveFN0eWxlcygpICYmIHJudW1ub25weC50ZXN0KCByZXQgKSAmJiByYm94U3R5bGUudGVzdCggbmFtZSApICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgb3JpZ2luYWwgdmFsdWVzXG5cdFx0XHR3aWR0aCA9IHN0eWxlLndpZHRoO1xuXHRcdFx0bWluV2lkdGggPSBzdHlsZS5taW5XaWR0aDtcblx0XHRcdG1heFdpZHRoID0gc3R5bGUubWF4V2lkdGg7XG5cblx0XHRcdC8vIFB1dCBpbiB0aGUgbmV3IHZhbHVlcyB0byBnZXQgYSBjb21wdXRlZCB2YWx1ZSBvdXRcblx0XHRcdHN0eWxlLm1pbldpZHRoID0gc3R5bGUubWF4V2lkdGggPSBzdHlsZS53aWR0aCA9IHJldDtcblx0XHRcdHJldCA9IGNvbXB1dGVkLndpZHRoO1xuXG5cdFx0XHQvLyBSZXZlcnQgdGhlIGNoYW5nZWQgdmFsdWVzXG5cdFx0XHRzdHlsZS53aWR0aCA9IHdpZHRoO1xuXHRcdFx0c3R5bGUubWluV2lkdGggPSBtaW5XaWR0aDtcblx0XHRcdHN0eWxlLm1heFdpZHRoID0gbWF4V2lkdGg7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIHJldCAhPT0gdW5kZWZpbmVkID9cblxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0XHQvLyBJRSByZXR1cm5zIHpJbmRleCB2YWx1ZSBhcyBhbiBpbnRlZ2VyLlxuXHRcdHJldCArIFwiXCIgOlxuXHRcdHJldDtcbn1cblxuXG5mdW5jdGlvbiBhZGRHZXRIb29rSWYoIGNvbmRpdGlvbkZuLCBob29rRm4gKSB7XG5cblx0Ly8gRGVmaW5lIHRoZSBob29rLCB3ZSdsbCBjaGVjayBvbiB0aGUgZmlyc3QgcnVuIGlmIGl0J3MgcmVhbGx5IG5lZWRlZC5cblx0cmV0dXJuIHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBjb25kaXRpb25GbigpICkge1xuXG5cdFx0XHRcdC8vIEhvb2sgbm90IG5lZWRlZCAob3IgaXQncyBub3QgcG9zc2libGUgdG8gdXNlIGl0IGR1ZVxuXHRcdFx0XHQvLyB0byBtaXNzaW5nIGRlcGVuZGVuY3kpLCByZW1vdmUgaXQuXG5cdFx0XHRcdGRlbGV0ZSB0aGlzLmdldDtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBIb29rIG5lZWRlZDsgcmVkZWZpbmUgaXQgc28gdGhhdCB0aGUgc3VwcG9ydCB0ZXN0IGlzIG5vdCBleGVjdXRlZCBhZ2Fpbi5cblx0XHRcdHJldHVybiAoIHRoaXMuZ2V0ID0gaG9va0ZuICkuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH1cblx0fTtcbn1cblxuXG52YXIgY3NzUHJlZml4ZXMgPSBbIFwiV2Via2l0XCIsIFwiTW96XCIsIFwibXNcIiBdLFxuXHRlbXB0eVN0eWxlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApLnN0eWxlLFxuXHR2ZW5kb3JQcm9wcyA9IHt9O1xuXG4vLyBSZXR1cm4gYSB2ZW5kb3ItcHJlZml4ZWQgcHJvcGVydHkgb3IgdW5kZWZpbmVkXG5mdW5jdGlvbiB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHtcblxuXHQvLyBDaGVjayBmb3IgdmVuZG9yIHByZWZpeGVkIG5hbWVzXG5cdHZhciBjYXBOYW1lID0gbmFtZVsgMCBdLnRvVXBwZXJDYXNlKCkgKyBuYW1lLnNsaWNlKCAxICksXG5cdFx0aSA9IGNzc1ByZWZpeGVzLmxlbmd0aDtcblxuXHR3aGlsZSAoIGktLSApIHtcblx0XHRuYW1lID0gY3NzUHJlZml4ZXNbIGkgXSArIGNhcE5hbWU7XG5cdFx0aWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7XG5cdFx0XHRyZXR1cm4gbmFtZTtcblx0XHR9XG5cdH1cbn1cblxuLy8gUmV0dXJuIGEgcG90ZW50aWFsbHktbWFwcGVkIGpRdWVyeS5jc3NQcm9wcyBvciB2ZW5kb3IgcHJlZml4ZWQgcHJvcGVydHlcbmZ1bmN0aW9uIGZpbmFsUHJvcE5hbWUoIG5hbWUgKSB7XG5cdHZhciBmaW5hbCA9IGpRdWVyeS5jc3NQcm9wc1sgbmFtZSBdIHx8IHZlbmRvclByb3BzWyBuYW1lIF07XG5cblx0aWYgKCBmaW5hbCApIHtcblx0XHRyZXR1cm4gZmluYWw7XG5cdH1cblx0aWYgKCBuYW1lIGluIGVtcHR5U3R5bGUgKSB7XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cblx0cmV0dXJuIHZlbmRvclByb3BzWyBuYW1lIF0gPSB2ZW5kb3JQcm9wTmFtZSggbmFtZSApIHx8IG5hbWU7XG59XG5cblxudmFyXG5cblx0Ly8gU3dhcHBhYmxlIGlmIGRpc3BsYXkgaXMgbm9uZSBvciBzdGFydHMgd2l0aCB0YWJsZVxuXHQvLyBleGNlcHQgXCJ0YWJsZVwiLCBcInRhYmxlLWNlbGxcIiwgb3IgXCJ0YWJsZS1jYXB0aW9uXCJcblx0Ly8gU2VlIGhlcmUgZm9yIGRpc3BsYXkgdmFsdWVzOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL0NTUy9kaXNwbGF5XG5cdHJkaXNwbGF5c3dhcCA9IC9eKG5vbmV8dGFibGUoPyEtY1tlYV0pLispLyxcblx0cmN1c3RvbVByb3AgPSAvXi0tLyxcblx0Y3NzU2hvdyA9IHsgcG9zaXRpb246IFwiYWJzb2x1dGVcIiwgdmlzaWJpbGl0eTogXCJoaWRkZW5cIiwgZGlzcGxheTogXCJibG9ja1wiIH0sXG5cdGNzc05vcm1hbFRyYW5zZm9ybSA9IHtcblx0XHRsZXR0ZXJTcGFjaW5nOiBcIjBcIixcblx0XHRmb250V2VpZ2h0OiBcIjQwMFwiXG5cdH07XG5cbmZ1bmN0aW9uIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKSB7XG5cblx0Ly8gQW55IHJlbGF0aXZlICgrLy0pIHZhbHVlcyBoYXZlIGFscmVhZHkgYmVlblxuXHQvLyBub3JtYWxpemVkIGF0IHRoaXMgcG9pbnRcblx0dmFyIG1hdGNoZXMgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICk7XG5cdHJldHVybiBtYXRjaGVzID9cblxuXHRcdC8vIEd1YXJkIGFnYWluc3QgdW5kZWZpbmVkIFwic3VidHJhY3RcIiwgZS5nLiwgd2hlbiB1c2VkIGFzIGluIGNzc0hvb2tzXG5cdFx0TWF0aC5tYXgoIDAsIG1hdGNoZXNbIDIgXSAtICggc3VidHJhY3QgfHwgMCApICkgKyAoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSA6XG5cdFx0dmFsdWU7XG59XG5cbmZ1bmN0aW9uIGJveE1vZGVsQWRqdXN0bWVudCggZWxlbSwgZGltZW5zaW9uLCBib3gsIGlzQm9yZGVyQm94LCBzdHlsZXMsIGNvbXB1dGVkVmFsICkge1xuXHR2YXIgaSA9IGRpbWVuc2lvbiA9PT0gXCJ3aWR0aFwiID8gMSA6IDAsXG5cdFx0ZXh0cmEgPSAwLFxuXHRcdGRlbHRhID0gMDtcblxuXHQvLyBBZGp1c3RtZW50IG1heSBub3QgYmUgbmVjZXNzYXJ5XG5cdGlmICggYm94ID09PSAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICkgKSB7XG5cdFx0cmV0dXJuIDA7XG5cdH1cblxuXHRmb3IgKCA7IGkgPCA0OyBpICs9IDIgKSB7XG5cblx0XHQvLyBCb3RoIGJveCBtb2RlbHMgZXhjbHVkZSBtYXJnaW5cblx0XHRpZiAoIGJveCA9PT0gXCJtYXJnaW5cIiApIHtcblx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIGJveCArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHR9XG5cblx0XHQvLyBJZiB3ZSBnZXQgaGVyZSB3aXRoIGEgY29udGVudC1ib3gsIHdlJ3JlIHNlZWtpbmcgXCJwYWRkaW5nXCIgb3IgXCJib3JkZXJcIiBvciBcIm1hcmdpblwiXG5cdFx0aWYgKCAhaXNCb3JkZXJCb3ggKSB7XG5cblx0XHRcdC8vIEFkZCBwYWRkaW5nXG5cdFx0XHRkZWx0YSArPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblxuXHRcdFx0Ly8gRm9yIFwiYm9yZGVyXCIgb3IgXCJtYXJnaW5cIiwgYWRkIGJvcmRlclxuXHRcdFx0aWYgKCBib3ggIT09IFwicGFkZGluZ1wiICkge1xuXHRcdFx0XHRkZWx0YSArPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBCdXQgc3RpbGwga2VlcCB0cmFjayBvZiBpdCBvdGhlcndpc2Vcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGV4dHJhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cblx0XHQvLyBJZiB3ZSBnZXQgaGVyZSB3aXRoIGEgYm9yZGVyLWJveCAoY29udGVudCArIHBhZGRpbmcgKyBib3JkZXIpLCB3ZSdyZSBzZWVraW5nIFwiY29udGVudFwiIG9yXG5cdFx0Ly8gXCJwYWRkaW5nXCIgb3IgXCJtYXJnaW5cIlxuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIEZvciBcImNvbnRlbnRcIiwgc3VidHJhY3QgcGFkZGluZ1xuXHRcdFx0aWYgKCBib3ggPT09IFwiY29udGVudFwiICkge1xuXHRcdFx0XHRkZWx0YSAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcInBhZGRpbmdcIiArIGNzc0V4cGFuZFsgaSBdLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRm9yIFwiY29udGVudFwiIG9yIFwicGFkZGluZ1wiLCBzdWJ0cmFjdCBib3JkZXJcblx0XHRcdGlmICggYm94ICE9PSBcIm1hcmdpblwiICkge1xuXHRcdFx0XHRkZWx0YSAtPSBqUXVlcnkuY3NzKCBlbGVtLCBcImJvcmRlclwiICsgY3NzRXhwYW5kWyBpIF0gKyBcIldpZHRoXCIsIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIEFjY291bnQgZm9yIHBvc2l0aXZlIGNvbnRlbnQtYm94IHNjcm9sbCBndXR0ZXIgd2hlbiByZXF1ZXN0ZWQgYnkgcHJvdmlkaW5nIGNvbXB1dGVkVmFsXG5cdGlmICggIWlzQm9yZGVyQm94ICYmIGNvbXB1dGVkVmFsID49IDAgKSB7XG5cblx0XHQvLyBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgaXMgYSByb3VuZGVkIHN1bSBvZiBjb250ZW50LCBwYWRkaW5nLCBzY3JvbGwgZ3V0dGVyLCBhbmQgYm9yZGVyXG5cdFx0Ly8gQXNzdW1pbmcgaW50ZWdlciBzY3JvbGwgZ3V0dGVyLCBzdWJ0cmFjdCB0aGUgcmVzdCBhbmQgcm91bmQgZG93blxuXHRcdGRlbHRhICs9IE1hdGgubWF4KCAwLCBNYXRoLmNlaWwoXG5cdFx0XHRlbGVtWyBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApIF0gLVxuXHRcdFx0Y29tcHV0ZWRWYWwgLVxuXHRcdFx0ZGVsdGEgLVxuXHRcdFx0ZXh0cmEgLVxuXHRcdFx0MC41XG5cblx0XHQvLyBJZiBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgaXMgdW5rbm93biwgdGhlbiB3ZSBjYW4ndCBkZXRlcm1pbmUgY29udGVudC1ib3ggc2Nyb2xsIGd1dHRlclxuXHRcdC8vIFVzZSBhbiBleHBsaWNpdCB6ZXJvIHRvIGF2b2lkIE5hTiAoZ2gtMzk2NClcblx0XHQpICkgfHwgMDtcblx0fVxuXG5cdHJldHVybiBkZWx0YTtcbn1cblxuZnVuY3Rpb24gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApIHtcblxuXHQvLyBTdGFydCB3aXRoIGNvbXB1dGVkIHN0eWxlXG5cdHZhciBzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblxuXHRcdC8vIFRvIGF2b2lkIGZvcmNpbmcgYSByZWZsb3csIG9ubHkgZmV0Y2ggYm94U2l6aW5nIGlmIHdlIG5lZWQgaXQgKGdoLTQzMjIpLlxuXHRcdC8vIEZha2UgY29udGVudC1ib3ggdW50aWwgd2Uga25vdyBpdCdzIG5lZWRlZCB0byBrbm93IHRoZSB0cnVlIHZhbHVlLlxuXHRcdGJveFNpemluZ05lZWRlZCA9ICFzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgfHwgZXh0cmEsXG5cdFx0aXNCb3JkZXJCb3ggPSBib3hTaXppbmdOZWVkZWQgJiZcblx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCIsXG5cdFx0dmFsdWVJc0JvcmRlckJveCA9IGlzQm9yZGVyQm94LFxuXG5cdFx0dmFsID0gY3VyQ1NTKCBlbGVtLCBkaW1lbnNpb24sIHN0eWxlcyApLFxuXHRcdG9mZnNldFByb3AgPSBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApO1xuXG5cdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD01NFxuXHQvLyBSZXR1cm4gYSBjb25mb3VuZGluZyBub24tcGl4ZWwgdmFsdWUgb3IgZmVpZ24gaWdub3JhbmNlLCBhcyBhcHByb3ByaWF0ZS5cblx0aWYgKCBybnVtbm9ucHgudGVzdCggdmFsICkgKSB7XG5cdFx0aWYgKCAhZXh0cmEgKSB7XG5cdFx0XHRyZXR1cm4gdmFsO1xuXHRcdH1cblx0XHR2YWwgPSBcImF1dG9cIjtcblx0fVxuXG5cblx0Ly8gRmFsbCBiYWNrIHRvIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCB3aGVuIHZhbHVlIGlzIFwiYXV0b1wiXG5cdC8vIFRoaXMgaGFwcGVucyBmb3IgaW5saW5lIGVsZW1lbnRzIHdpdGggbm8gZXhwbGljaXQgc2V0dGluZyAoZ2gtMzU3MSlcblx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMSAtIDQuMyBvbmx5XG5cdC8vIEFsc28gdXNlIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBmb3IgbWlzcmVwb3J0ZWQgaW5saW5lIGRpbWVuc2lvbnMgKGdoLTM2MDIpXG5cdC8vIFN1cHBvcnQ6IElFIDktMTEgb25seVxuXHQvLyBBbHNvIHVzZSBvZmZzZXRXaWR0aC9vZmZzZXRIZWlnaHQgZm9yIHdoZW4gYm94IHNpemluZyBpcyB1bnJlbGlhYmxlXG5cdC8vIFdlIHVzZSBnZXRDbGllbnRSZWN0cygpIHRvIGNoZWNrIGZvciBoaWRkZW4vZGlzY29ubmVjdGVkLlxuXHQvLyBJbiB0aG9zZSBjYXNlcywgdGhlIGNvbXB1dGVkIHZhbHVlIGNhbiBiZSB0cnVzdGVkIHRvIGJlIGJvcmRlci1ib3hcblx0aWYgKCAoICFzdXBwb3J0LmJveFNpemluZ1JlbGlhYmxlKCkgJiYgaXNCb3JkZXJCb3ggfHxcblx0XHR2YWwgPT09IFwiYXV0b1wiIHx8XG5cdFx0IXBhcnNlRmxvYXQoIHZhbCApICYmIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiaW5saW5lXCIgKSAmJlxuXHRcdGVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggKSB7XG5cblx0XHRpc0JvcmRlckJveCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCI7XG5cblx0XHQvLyBXaGVyZSBhdmFpbGFibGUsIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBhcHByb3hpbWF0ZSBib3JkZXIgYm94IGRpbWVuc2lvbnMuXG5cdFx0Ly8gV2hlcmUgbm90IGF2YWlsYWJsZSAoZS5nLiwgU1ZHKSwgYXNzdW1lIHVucmVsaWFibGUgYm94LXNpemluZyBhbmQgaW50ZXJwcmV0IHRoZVxuXHRcdC8vIHJldHJpZXZlZCB2YWx1ZSBhcyBhIGNvbnRlbnQgYm94IGRpbWVuc2lvbi5cblx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gb2Zmc2V0UHJvcCBpbiBlbGVtO1xuXHRcdGlmICggdmFsdWVJc0JvcmRlckJveCApIHtcblx0XHRcdHZhbCA9IGVsZW1bIG9mZnNldFByb3AgXTtcblx0XHR9XG5cdH1cblxuXHQvLyBOb3JtYWxpemUgXCJcIiBhbmQgYXV0b1xuXHR2YWwgPSBwYXJzZUZsb2F0KCB2YWwgKSB8fCAwO1xuXG5cdC8vIEFkanVzdCBmb3IgdGhlIGVsZW1lbnQncyBib3ggbW9kZWxcblx0cmV0dXJuICggdmFsICtcblx0XHRib3hNb2RlbEFkanVzdG1lbnQoXG5cdFx0XHRlbGVtLFxuXHRcdFx0ZGltZW5zaW9uLFxuXHRcdFx0ZXh0cmEgfHwgKCBpc0JvcmRlckJveCA/IFwiYm9yZGVyXCIgOiBcImNvbnRlbnRcIiApLFxuXHRcdFx0dmFsdWVJc0JvcmRlckJveCxcblx0XHRcdHN0eWxlcyxcblxuXHRcdFx0Ly8gUHJvdmlkZSB0aGUgY3VycmVudCBjb21wdXRlZCBzaXplIHRvIHJlcXVlc3Qgc2Nyb2xsIGd1dHRlciBjYWxjdWxhdGlvbiAoZ2gtMzU4OSlcblx0XHRcdHZhbFxuXHRcdClcblx0KSArIFwicHhcIjtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIEFkZCBpbiBzdHlsZSBwcm9wZXJ0eSBob29rcyBmb3Igb3ZlcnJpZGluZyB0aGUgZGVmYXVsdFxuXHQvLyBiZWhhdmlvciBvZiBnZXR0aW5nIGFuZCBzZXR0aW5nIGEgc3R5bGUgcHJvcGVydHlcblx0Y3NzSG9va3M6IHtcblx0XHRvcGFjaXR5OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHRcdC8vIFdlIHNob3VsZCBhbHdheXMgZ2V0IGEgbnVtYmVyIGJhY2sgZnJvbSBvcGFjaXR5XG5cdFx0XHRcdFx0dmFyIHJldCA9IGN1ckNTUyggZWxlbSwgXCJvcGFjaXR5XCIgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmV0ID09PSBcIlwiID8gXCIxXCIgOiByZXQ7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cblx0Ly8gRG9uJ3QgYXV0b21hdGljYWxseSBhZGQgXCJweFwiIHRvIHRoZXNlIHBvc3NpYmx5LXVuaXRsZXNzIHByb3BlcnRpZXNcblx0Y3NzTnVtYmVyOiB7XG5cdFx0XCJhbmltYXRpb25JdGVyYXRpb25Db3VudFwiOiB0cnVlLFxuXHRcdFwiY29sdW1uQ291bnRcIjogdHJ1ZSxcblx0XHRcImZpbGxPcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJmbGV4R3Jvd1wiOiB0cnVlLFxuXHRcdFwiZmxleFNocmlua1wiOiB0cnVlLFxuXHRcdFwiZm9udFdlaWdodFwiOiB0cnVlLFxuXHRcdFwiZ3JpZEFyZWFcIjogdHJ1ZSxcblx0XHRcImdyaWRDb2x1bW5cIjogdHJ1ZSxcblx0XHRcImdyaWRDb2x1bW5FbmRcIjogdHJ1ZSxcblx0XHRcImdyaWRDb2x1bW5TdGFydFwiOiB0cnVlLFxuXHRcdFwiZ3JpZFJvd1wiOiB0cnVlLFxuXHRcdFwiZ3JpZFJvd0VuZFwiOiB0cnVlLFxuXHRcdFwiZ3JpZFJvd1N0YXJ0XCI6IHRydWUsXG5cdFx0XCJsaW5lSGVpZ2h0XCI6IHRydWUsXG5cdFx0XCJvcGFjaXR5XCI6IHRydWUsXG5cdFx0XCJvcmRlclwiOiB0cnVlLFxuXHRcdFwib3JwaGFuc1wiOiB0cnVlLFxuXHRcdFwid2lkb3dzXCI6IHRydWUsXG5cdFx0XCJ6SW5kZXhcIjogdHJ1ZSxcblx0XHRcInpvb21cIjogdHJ1ZVxuXHR9LFxuXG5cdC8vIEFkZCBpbiBwcm9wZXJ0aWVzIHdob3NlIG5hbWVzIHlvdSB3aXNoIHRvIGZpeCBiZWZvcmVcblx0Ly8gc2V0dGluZyBvciBnZXR0aW5nIHRoZSB2YWx1ZVxuXHRjc3NQcm9wczoge30sXG5cblx0Ly8gR2V0IGFuZCBzZXQgdGhlIHN0eWxlIHByb3BlcnR5IG9uIGEgRE9NIE5vZGVcblx0c3R5bGU6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSwgZXh0cmEgKSB7XG5cblx0XHQvLyBEb24ndCBzZXQgc3R5bGVzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoICFlbGVtIHx8IGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCB8fCAhZWxlbS5zdHlsZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWVcblx0XHR2YXIgcmV0LCB0eXBlLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0gY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRpc0N1c3RvbVByb3AgPSByY3VzdG9tUHJvcC50ZXN0KCBuYW1lICksXG5cdFx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUuIFdlIGRvbid0XG5cdFx0Ly8gd2FudCB0byBxdWVyeSB0aGUgdmFsdWUgaWYgaXQgaXMgYSBDU1MgY3VzdG9tIHByb3BlcnR5XG5cdFx0Ly8gc2luY2UgdGhleSBhcmUgdXNlci1kZWZpbmVkLlxuXHRcdGlmICggIWlzQ3VzdG9tUHJvcCApIHtcblx0XHRcdG5hbWUgPSBmaW5hbFByb3BOYW1lKCBvcmlnTmFtZSApO1xuXHRcdH1cblxuXHRcdC8vIEdldHMgaG9vayBmb3IgdGhlIHByZWZpeGVkIHZlcnNpb24sIHRoZW4gdW5wcmVmaXhlZCB2ZXJzaW9uXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBDaGVjayBpZiB3ZSdyZSBzZXR0aW5nIGEgdmFsdWVcblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR0eXBlID0gdHlwZW9mIHZhbHVlO1xuXG5cdFx0XHQvLyBDb252ZXJ0IFwiKz1cIiBvciBcIi09XCIgdG8gcmVsYXRpdmUgbnVtYmVycyAoIzczNDUpXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwic3RyaW5nXCIgJiYgKCByZXQgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJiByZXRbIDEgXSApIHtcblx0XHRcdFx0dmFsdWUgPSBhZGp1c3RDU1MoIGVsZW0sIG5hbWUsIHJldCApO1xuXG5cdFx0XHRcdC8vIEZpeGVzIGJ1ZyAjOTIzN1xuXHRcdFx0XHR0eXBlID0gXCJudW1iZXJcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTWFrZSBzdXJlIHRoYXQgbnVsbCBhbmQgTmFOIHZhbHVlcyBhcmVuJ3Qgc2V0ICgjNzExNilcblx0XHRcdGlmICggdmFsdWUgPT0gbnVsbCB8fCB2YWx1ZSAhPT0gdmFsdWUgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBudW1iZXIgd2FzIHBhc3NlZCBpbiwgYWRkIHRoZSB1bml0IChleGNlcHQgZm9yIGNlcnRhaW4gQ1NTIHByb3BlcnRpZXMpXG5cdFx0XHQvLyBUaGUgaXNDdXN0b21Qcm9wIGNoZWNrIGNhbiBiZSByZW1vdmVkIGluIGpRdWVyeSA0LjAgd2hlbiB3ZSBvbmx5IGF1dG8tYXBwZW5kXG5cdFx0XHQvLyBcInB4XCIgdG8gYSBmZXcgaGFyZGNvZGVkIHZhbHVlcy5cblx0XHRcdGlmICggdHlwZSA9PT0gXCJudW1iZXJcIiAmJiAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0XHR2YWx1ZSArPSByZXQgJiYgcmV0WyAzIF0gfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBvcmlnTmFtZSBdID8gXCJcIiA6IFwicHhcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBiYWNrZ3JvdW5kLSogcHJvcHMgYWZmZWN0IG9yaWdpbmFsIGNsb25lJ3MgdmFsdWVzXG5cdFx0XHRpZiAoICFzdXBwb3J0LmNsZWFyQ2xvbmVTdHlsZSAmJiB2YWx1ZSA9PT0gXCJcIiAmJiBuYW1lLmluZGV4T2YoIFwiYmFja2dyb3VuZFwiICkgPT09IDAgKSB7XG5cdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSBcImluaGVyaXRcIjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCwgdXNlIHRoYXQgdmFsdWUsIG90aGVyd2lzZSBqdXN0IHNldCB0aGUgc3BlY2lmaWVkIHZhbHVlXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHxcblx0XHRcdFx0KCB2YWx1ZSA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdGlmICggaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0XHRcdHN0eWxlLnNldFByb3BlcnR5KCBuYW1lLCB2YWx1ZSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0eWxlWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gSWYgYSBob29rIHdhcyBwcm92aWRlZCBnZXQgdGhlIG5vbi1jb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIGZhbHNlLCBleHRyYSApICkgIT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBPdGhlcndpc2UganVzdCBnZXQgdGhlIHZhbHVlIGZyb20gdGhlIHN0eWxlIG9iamVjdFxuXHRcdFx0cmV0dXJuIHN0eWxlWyBuYW1lIF07XG5cdFx0fVxuXHR9LFxuXG5cdGNzczogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGV4dHJhLCBzdHlsZXMgKSB7XG5cdFx0dmFyIHZhbCwgbnVtLCBob29rcyxcblx0XHRcdG9yaWdOYW1lID0gY2FtZWxDYXNlKCBuYW1lICksXG5cdFx0XHRpc0N1c3RvbVByb3AgPSByY3VzdG9tUHJvcC50ZXN0KCBuYW1lICk7XG5cblx0XHQvLyBNYWtlIHN1cmUgdGhhdCB3ZSdyZSB3b3JraW5nIHdpdGggdGhlIHJpZ2h0IG5hbWUuIFdlIGRvbid0XG5cdFx0Ly8gd2FudCB0byBtb2RpZnkgdGhlIHZhbHVlIGlmIGl0IGlzIGEgQ1NTIGN1c3RvbSBwcm9wZXJ0eVxuXHRcdC8vIHNpbmNlIHRoZXkgYXJlIHVzZXItZGVmaW5lZC5cblx0XHRpZiAoICFpc0N1c3RvbVByb3AgKSB7XG5cdFx0XHRuYW1lID0gZmluYWxQcm9wTmFtZSggb3JpZ05hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBUcnkgcHJlZml4ZWQgbmFtZSBmb2xsb3dlZCBieSB0aGUgdW5wcmVmaXhlZCBuYW1lXG5cdFx0aG9va3MgPSBqUXVlcnkuY3NzSG9va3NbIG5hbWUgXSB8fCBqUXVlcnkuY3NzSG9va3NbIG9yaWdOYW1lIF07XG5cblx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZnJvbSB0aGVyZVxuXHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbCA9IGhvb2tzLmdldCggZWxlbSwgdHJ1ZSwgZXh0cmEgKTtcblx0XHR9XG5cblx0XHQvLyBPdGhlcndpc2UsIGlmIGEgd2F5IHRvIGdldCB0aGUgY29tcHV0ZWQgdmFsdWUgZXhpc3RzLCB1c2UgdGhhdFxuXHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIG5hbWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdC8vIENvbnZlcnQgXCJub3JtYWxcIiB0byBjb21wdXRlZCB2YWx1ZVxuXHRcdGlmICggdmFsID09PSBcIm5vcm1hbFwiICYmIG5hbWUgaW4gY3NzTm9ybWFsVHJhbnNmb3JtICkge1xuXHRcdFx0dmFsID0gY3NzTm9ybWFsVHJhbnNmb3JtWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0Ly8gTWFrZSBudW1lcmljIGlmIGZvcmNlZCBvciBhIHF1YWxpZmllciB3YXMgcHJvdmlkZWQgYW5kIHZhbCBsb29rcyBudW1lcmljXG5cdFx0aWYgKCBleHRyYSA9PT0gXCJcIiB8fCBleHRyYSApIHtcblx0XHRcdG51bSA9IHBhcnNlRmxvYXQoIHZhbCApO1xuXHRcdFx0cmV0dXJuIGV4dHJhID09PSB0cnVlIHx8IGlzRmluaXRlKCBudW0gKSA/IG51bSB8fCAwIDogdmFsO1xuXHRcdH1cblxuXHRcdHJldHVybiB2YWw7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJoZWlnaHRcIiwgXCJ3aWR0aFwiIF0sIGZ1bmN0aW9uKCBpLCBkaW1lbnNpb24gKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgZGltZW5zaW9uIF0gPSB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSwgY29tcHV0ZWQsIGV4dHJhICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblxuXHRcdFx0XHQvLyBDZXJ0YWluIGVsZW1lbnRzIGNhbiBoYXZlIGRpbWVuc2lvbiBpbmZvIGlmIHdlIGludmlzaWJseSBzaG93IHRoZW1cblx0XHRcdFx0Ly8gYnV0IGl0IG11c3QgaGF2ZSBhIGN1cnJlbnQgZGlzcGxheSBzdHlsZSB0aGF0IHdvdWxkIGJlbmVmaXRcblx0XHRcdFx0cmV0dXJuIHJkaXNwbGF5c3dhcC50ZXN0KCBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApICkgJiZcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFNhZmFyaSA4K1xuXHRcdFx0XHRcdC8vIFRhYmxlIGNvbHVtbnMgaW4gU2FmYXJpIGhhdmUgbm9uLXplcm8gb2Zmc2V0V2lkdGggJiB6ZXJvXG5cdFx0XHRcdFx0Ly8gZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggdW5sZXNzIGRpc3BsYXkgaXMgY2hhbmdlZC5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHRcdFx0XHQvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhIGRpc2Nvbm5lY3RlZCBub2RlXG5cdFx0XHRcdFx0Ly8gaW4gSUUgdGhyb3dzIGFuIGVycm9yLlxuXHRcdFx0XHRcdCggIWVsZW0uZ2V0Q2xpZW50UmVjdHMoKS5sZW5ndGggfHwgIWVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKSA/XG5cdFx0XHRcdFx0XHRzd2FwKCBlbGVtLCBjc3NTaG93LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIGRpbWVuc2lvbiwgZXh0cmEgKTtcblx0XHRcdFx0XHRcdH0gKSA6XG5cdFx0XHRcdFx0XHRnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBkaW1lbnNpb24sIGV4dHJhICk7XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlLCBleHRyYSApIHtcblx0XHRcdHZhciBtYXRjaGVzLFxuXHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKSxcblxuXHRcdFx0XHQvLyBPbmx5IHJlYWQgc3R5bGVzLnBvc2l0aW9uIGlmIHRoZSB0ZXN0IGhhcyBhIGNoYW5jZSB0byBmYWlsXG5cdFx0XHRcdC8vIHRvIGF2b2lkIGZvcmNpbmcgYSByZWZsb3cuXG5cdFx0XHRcdHNjcm9sbGJveFNpemVCdWdneSA9ICFzdXBwb3J0LnNjcm9sbGJveFNpemUoKSAmJlxuXHRcdFx0XHRcdHN0eWxlcy5wb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiLFxuXG5cdFx0XHRcdC8vIFRvIGF2b2lkIGZvcmNpbmcgYSByZWZsb3csIG9ubHkgZmV0Y2ggYm94U2l6aW5nIGlmIHdlIG5lZWQgaXQgKGdoLTM5OTEpXG5cdFx0XHRcdGJveFNpemluZ05lZWRlZCA9IHNjcm9sbGJveFNpemVCdWdneSB8fCBleHRyYSxcblx0XHRcdFx0aXNCb3JkZXJCb3ggPSBib3hTaXppbmdOZWVkZWQgJiZcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBcImJveFNpemluZ1wiLCBmYWxzZSwgc3R5bGVzICkgPT09IFwiYm9yZGVyLWJveFwiLFxuXHRcdFx0XHRzdWJ0cmFjdCA9IGV4dHJhID9cblx0XHRcdFx0XHRib3hNb2RlbEFkanVzdG1lbnQoXG5cdFx0XHRcdFx0XHRlbGVtLFxuXHRcdFx0XHRcdFx0ZGltZW5zaW9uLFxuXHRcdFx0XHRcdFx0ZXh0cmEsXG5cdFx0XHRcdFx0XHRpc0JvcmRlckJveCxcblx0XHRcdFx0XHRcdHN0eWxlc1xuXHRcdFx0XHRcdCkgOlxuXHRcdFx0XHRcdDA7XG5cblx0XHRcdC8vIEFjY291bnQgZm9yIHVucmVsaWFibGUgYm9yZGVyLWJveCBkaW1lbnNpb25zIGJ5IGNvbXBhcmluZyBvZmZzZXQqIHRvIGNvbXB1dGVkIGFuZFxuXHRcdFx0Ly8gZmFraW5nIGEgY29udGVudC1ib3ggdG8gZ2V0IGJvcmRlciBhbmQgcGFkZGluZyAoZ2gtMzY5OSlcblx0XHRcdGlmICggaXNCb3JkZXJCb3ggJiYgc2Nyb2xsYm94U2l6ZUJ1Z2d5ICkge1xuXHRcdFx0XHRzdWJ0cmFjdCAtPSBNYXRoLmNlaWwoXG5cdFx0XHRcdFx0ZWxlbVsgXCJvZmZzZXRcIiArIGRpbWVuc2lvblsgMCBdLnRvVXBwZXJDYXNlKCkgKyBkaW1lbnNpb24uc2xpY2UoIDEgKSBdIC1cblx0XHRcdFx0XHRwYXJzZUZsb2F0KCBzdHlsZXNbIGRpbWVuc2lvbiBdICkgLVxuXHRcdFx0XHRcdGJveE1vZGVsQWRqdXN0bWVudCggZWxlbSwgZGltZW5zaW9uLCBcImJvcmRlclwiLCBmYWxzZSwgc3R5bGVzICkgLVxuXHRcdFx0XHRcdDAuNVxuXHRcdFx0XHQpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IHRvIHBpeGVscyBpZiB2YWx1ZSBhZGp1c3RtZW50IGlzIG5lZWRlZFxuXHRcdFx0aWYgKCBzdWJ0cmFjdCAmJiAoIG1hdGNoZXMgPSByY3NzTnVtLmV4ZWMoIHZhbHVlICkgKSAmJlxuXHRcdFx0XHQoIG1hdGNoZXNbIDMgXSB8fCBcInB4XCIgKSAhPT0gXCJweFwiICkge1xuXG5cdFx0XHRcdGVsZW0uc3R5bGVbIGRpbWVuc2lvbiBdID0gdmFsdWU7XG5cdFx0XHRcdHZhbHVlID0galF1ZXJ5LmNzcyggZWxlbSwgZGltZW5zaW9uICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBzZXRQb3NpdGl2ZU51bWJlciggZWxlbSwgdmFsdWUsIHN1YnRyYWN0ICk7XG5cdFx0fVxuXHR9O1xufSApO1xuXG5qUXVlcnkuY3NzSG9va3MubWFyZ2luTGVmdCA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5yZWxpYWJsZU1hcmdpbkxlZnQsXG5cdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRpZiAoIGNvbXB1dGVkICkge1xuXHRcdFx0cmV0dXJuICggcGFyc2VGbG9hdCggY3VyQ1NTKCBlbGVtLCBcIm1hcmdpbkxlZnRcIiApICkgfHxcblx0XHRcdFx0ZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0IC1cblx0XHRcdFx0XHRzd2FwKCBlbGVtLCB7IG1hcmdpbkxlZnQ6IDAgfSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5sZWZ0O1xuXHRcdFx0XHRcdH0gKVxuXHRcdFx0XHQpICsgXCJweFwiO1xuXHRcdH1cblx0fVxuKTtcblxuLy8gVGhlc2UgaG9va3MgYXJlIHVzZWQgYnkgYW5pbWF0ZSB0byBleHBhbmQgcHJvcGVydGllc1xualF1ZXJ5LmVhY2goIHtcblx0bWFyZ2luOiBcIlwiLFxuXHRwYWRkaW5nOiBcIlwiLFxuXHRib3JkZXI6IFwiV2lkdGhcIlxufSwgZnVuY3Rpb24oIHByZWZpeCwgc3VmZml4ICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdID0ge1xuXHRcdGV4cGFuZDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGkgPSAwLFxuXHRcdFx0XHRleHBhbmRlZCA9IHt9LFxuXG5cdFx0XHRcdC8vIEFzc3VtZXMgYSBzaW5nbGUgbnVtYmVyIGlmIG5vdCBhIHN0cmluZ1xuXHRcdFx0XHRwYXJ0cyA9IHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiA/IHZhbHVlLnNwbGl0KCBcIiBcIiApIDogWyB2YWx1ZSBdO1xuXG5cdFx0XHRmb3IgKCA7IGkgPCA0OyBpKysgKSB7XG5cdFx0XHRcdGV4cGFuZGVkWyBwcmVmaXggKyBjc3NFeHBhbmRbIGkgXSArIHN1ZmZpeCBdID1cblx0XHRcdFx0XHRwYXJ0c1sgaSBdIHx8IHBhcnRzWyBpIC0gMiBdIHx8IHBhcnRzWyAwIF07XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBleHBhbmRlZDtcblx0XHR9XG5cdH07XG5cblx0aWYgKCBwcmVmaXggIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0alF1ZXJ5LmNzc0hvb2tzWyBwcmVmaXggKyBzdWZmaXggXS5zZXQgPSBzZXRQb3NpdGl2ZU51bWJlcjtcblx0fVxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGNzczogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdHZhciBzdHlsZXMsIGxlbixcblx0XHRcdFx0bWFwID0ge30sXG5cdFx0XHRcdGkgPSAwO1xuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIG5hbWUgKSApIHtcblx0XHRcdFx0c3R5bGVzID0gZ2V0U3R5bGVzKCBlbGVtICk7XG5cdFx0XHRcdGxlbiA9IG5hbWUubGVuZ3RoO1xuXG5cdFx0XHRcdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdG1hcFsgbmFtZVsgaSBdIF0gPSBqUXVlcnkuY3NzKCBlbGVtLCBuYW1lWyBpIF0sIGZhbHNlLCBzdHlsZXMgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBtYXA7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBuYW1lLCB2YWx1ZSApIDpcblx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgbmFtZSApO1xuXHRcdH0sIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9XG59ICk7XG5cblxuZnVuY3Rpb24gVHdlZW4oIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICkge1xuXHRyZXR1cm4gbmV3IFR3ZWVuLnByb3RvdHlwZS5pbml0KCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZyApO1xufVxualF1ZXJ5LlR3ZWVuID0gVHdlZW47XG5cblR3ZWVuLnByb3RvdHlwZSA9IHtcblx0Y29uc3RydWN0b3I6IFR3ZWVuLFxuXHRpbml0OiBmdW5jdGlvbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcsIHVuaXQgKSB7XG5cdFx0dGhpcy5lbGVtID0gZWxlbTtcblx0XHR0aGlzLnByb3AgPSBwcm9wO1xuXHRcdHRoaXMuZWFzaW5nID0gZWFzaW5nIHx8IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHQ7XG5cdFx0dGhpcy5vcHRpb25zID0gb3B0aW9ucztcblx0XHR0aGlzLnN0YXJ0ID0gdGhpcy5ub3cgPSB0aGlzLmN1cigpO1xuXHRcdHRoaXMuZW5kID0gZW5kO1xuXHRcdHRoaXMudW5pdCA9IHVuaXQgfHwgKCBqUXVlcnkuY3NzTnVtYmVyWyBwcm9wIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdH0sXG5cdGN1cjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdHJldHVybiBob29rcyAmJiBob29rcy5nZXQgP1xuXHRcdFx0aG9va3MuZ2V0KCB0aGlzICkgOlxuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LmdldCggdGhpcyApO1xuXHR9LFxuXHRydW46IGZ1bmN0aW9uKCBwZXJjZW50ICkge1xuXHRcdHZhciBlYXNlZCxcblx0XHRcdGhvb2tzID0gVHdlZW4ucHJvcEhvb2tzWyB0aGlzLnByb3AgXTtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLmR1cmF0aW9uICkge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IGpRdWVyeS5lYXNpbmdbIHRoaXMuZWFzaW5nIF0oXG5cdFx0XHRcdHBlcmNlbnQsIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAqIHBlcmNlbnQsIDAsIDEsIHRoaXMub3B0aW9ucy5kdXJhdGlvblxuXHRcdFx0KTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5wb3MgPSBlYXNlZCA9IHBlcmNlbnQ7XG5cdFx0fVxuXHRcdHRoaXMubm93ID0gKCB0aGlzLmVuZCAtIHRoaXMuc3RhcnQgKSAqIGVhc2VkICsgdGhpcy5zdGFydDtcblxuXHRcdGlmICggdGhpcy5vcHRpb25zLnN0ZXAgKSB7XG5cdFx0XHR0aGlzLm9wdGlvbnMuc3RlcC5jYWxsKCB0aGlzLmVsZW0sIHRoaXMubm93LCB0aGlzICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBob29rcy5zZXQgKSB7XG5cdFx0XHRob29rcy5zZXQoIHRoaXMgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0VHdlZW4ucHJvcEhvb2tzLl9kZWZhdWx0LnNldCggdGhpcyApO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcztcblx0fVxufTtcblxuVHdlZW4ucHJvdG90eXBlLmluaXQucHJvdG90eXBlID0gVHdlZW4ucHJvdG90eXBlO1xuXG5Ud2Vlbi5wcm9wSG9va3MgPSB7XG5cdF9kZWZhdWx0OiB7XG5cdFx0Z2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0XHR2YXIgcmVzdWx0O1xuXG5cdFx0XHQvLyBVc2UgYSBwcm9wZXJ0eSBvbiB0aGUgZWxlbWVudCBkaXJlY3RseSB3aGVuIGl0IGlzIG5vdCBhIERPTSBlbGVtZW50LFxuXHRcdFx0Ly8gb3Igd2hlbiB0aGVyZSBpcyBubyBtYXRjaGluZyBzdHlsZSBwcm9wZXJ0eSB0aGF0IGV4aXN0cy5cblx0XHRcdGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSAhPT0gMSB8fFxuXHRcdFx0XHR0d2Vlbi5lbGVtWyB0d2Vlbi5wcm9wIF0gIT0gbnVsbCAmJiB0d2Vlbi5lbGVtLnN0eWxlWyB0d2Vlbi5wcm9wIF0gPT0gbnVsbCApIHtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUGFzc2luZyBhbiBlbXB0eSBzdHJpbmcgYXMgYSAzcmQgcGFyYW1ldGVyIHRvIC5jc3Mgd2lsbCBhdXRvbWF0aWNhbGx5XG5cdFx0XHQvLyBhdHRlbXB0IGEgcGFyc2VGbG9hdCBhbmQgZmFsbGJhY2sgdG8gYSBzdHJpbmcgaWYgdGhlIHBhcnNlIGZhaWxzLlxuXHRcdFx0Ly8gU2ltcGxlIHZhbHVlcyBzdWNoIGFzIFwiMTBweFwiIGFyZSBwYXJzZWQgdG8gRmxvYXQ7XG5cdFx0XHQvLyBjb21wbGV4IHZhbHVlcyBzdWNoIGFzIFwicm90YXRlKDFyYWQpXCIgYXJlIHJldHVybmVkIGFzLWlzLlxuXHRcdFx0cmVzdWx0ID0galF1ZXJ5LmNzcyggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgXCJcIiApO1xuXG5cdFx0XHQvLyBFbXB0eSBzdHJpbmdzLCBudWxsLCB1bmRlZmluZWQgYW5kIFwiYXV0b1wiIGFyZSBjb252ZXJ0ZWQgdG8gMC5cblx0XHRcdHJldHVybiAhcmVzdWx0IHx8IHJlc3VsdCA9PT0gXCJhdXRvXCIgPyAwIDogcmVzdWx0O1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cblx0XHRcdC8vIFVzZSBzdGVwIGhvb2sgZm9yIGJhY2sgY29tcGF0LlxuXHRcdFx0Ly8gVXNlIGNzc0hvb2sgaWYgaXRzIHRoZXJlLlxuXHRcdFx0Ly8gVXNlIC5zdHlsZSBpZiBhdmFpbGFibGUgYW5kIHVzZSBwbGFpbiBwcm9wZXJ0aWVzIHdoZXJlIGF2YWlsYWJsZS5cblx0XHRcdGlmICggalF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSApIHtcblx0XHRcdFx0alF1ZXJ5LmZ4LnN0ZXBbIHR3ZWVuLnByb3AgXSggdHdlZW4gKTtcblx0XHRcdH0gZWxzZSBpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRcdGpRdWVyeS5jc3NIb29rc1sgdHdlZW4ucHJvcCBdIHx8XG5cdFx0XHRcdFx0dHdlZW4uZWxlbS5zdHlsZVsgZmluYWxQcm9wTmFtZSggdHdlZW4ucHJvcCApIF0gIT0gbnVsbCApICkge1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIHR3ZWVuLmVsZW0sIHR3ZWVuLnByb3AsIHR3ZWVuLm5vdyArIHR3ZWVuLnVuaXQgKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn07XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG4vLyBQYW5pYyBiYXNlZCBhcHByb2FjaCB0byBzZXR0aW5nIHRoaW5ncyBvbiBkaXNjb25uZWN0ZWQgbm9kZXNcblR3ZWVuLnByb3BIb29rcy5zY3JvbGxUb3AgPSBUd2Vlbi5wcm9wSG9va3Muc2Nyb2xsTGVmdCA9IHtcblx0c2V0OiBmdW5jdGlvbiggdHdlZW4gKSB7XG5cdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICYmIHR3ZWVuLmVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSA9IHR3ZWVuLm5vdztcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5lYXNpbmcgPSB7XG5cdGxpbmVhcjogZnVuY3Rpb24oIHAgKSB7XG5cdFx0cmV0dXJuIHA7XG5cdH0sXG5cdHN3aW5nOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gMC41IC0gTWF0aC5jb3MoIHAgKiBNYXRoLlBJICkgLyAyO1xuXHR9LFxuXHRfZGVmYXVsdDogXCJzd2luZ1wiXG59O1xuXG5qUXVlcnkuZnggPSBUd2Vlbi5wcm90b3R5cGUuaW5pdDtcblxuLy8gQmFjayBjb21wYXQgPDEuOCBleHRlbnNpb24gcG9pbnRcbmpRdWVyeS5meC5zdGVwID0ge307XG5cblxuXG5cbnZhclxuXHRmeE5vdywgaW5Qcm9ncmVzcyxcblx0cmZ4dHlwZXMgPSAvXig/OnRvZ2dsZXxzaG93fGhpZGUpJC8sXG5cdHJydW4gPSAvcXVldWVIb29rcyQvO1xuXG5mdW5jdGlvbiBzY2hlZHVsZSgpIHtcblx0aWYgKCBpblByb2dyZXNzICkge1xuXHRcdGlmICggZG9jdW1lbnQuaGlkZGVuID09PSBmYWxzZSAmJiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lICkge1xuXHRcdFx0d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZSggc2NoZWR1bGUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0d2luZG93LnNldFRpbWVvdXQoIHNjaGVkdWxlLCBqUXVlcnkuZnguaW50ZXJ2YWwgKTtcblx0XHR9XG5cblx0XHRqUXVlcnkuZngudGljaygpO1xuXHR9XG59XG5cbi8vIEFuaW1hdGlvbnMgY3JlYXRlZCBzeW5jaHJvbm91c2x5IHdpbGwgcnVuIHN5bmNocm9ub3VzbHlcbmZ1bmN0aW9uIGNyZWF0ZUZ4Tm93KCkge1xuXHR3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0ZnhOb3cgPSB1bmRlZmluZWQ7XG5cdH0gKTtcblx0cmV0dXJuICggZnhOb3cgPSBEYXRlLm5vdygpICk7XG59XG5cbi8vIEdlbmVyYXRlIHBhcmFtZXRlcnMgdG8gY3JlYXRlIGEgc3RhbmRhcmQgYW5pbWF0aW9uXG5mdW5jdGlvbiBnZW5GeCggdHlwZSwgaW5jbHVkZVdpZHRoICkge1xuXHR2YXIgd2hpY2gsXG5cdFx0aSA9IDAsXG5cdFx0YXR0cnMgPSB7IGhlaWdodDogdHlwZSB9O1xuXG5cdC8vIElmIHdlIGluY2x1ZGUgd2lkdGgsIHN0ZXAgdmFsdWUgaXMgMSB0byBkbyBhbGwgY3NzRXhwYW5kIHZhbHVlcyxcblx0Ly8gb3RoZXJ3aXNlIHN0ZXAgdmFsdWUgaXMgMiB0byBza2lwIG92ZXIgTGVmdCBhbmQgUmlnaHRcblx0aW5jbHVkZVdpZHRoID0gaW5jbHVkZVdpZHRoID8gMSA6IDA7XG5cdGZvciAoIDsgaSA8IDQ7IGkgKz0gMiAtIGluY2x1ZGVXaWR0aCApIHtcblx0XHR3aGljaCA9IGNzc0V4cGFuZFsgaSBdO1xuXHRcdGF0dHJzWyBcIm1hcmdpblwiICsgd2hpY2ggXSA9IGF0dHJzWyBcInBhZGRpbmdcIiArIHdoaWNoIF0gPSB0eXBlO1xuXHR9XG5cblx0aWYgKCBpbmNsdWRlV2lkdGggKSB7XG5cdFx0YXR0cnMub3BhY2l0eSA9IGF0dHJzLndpZHRoID0gdHlwZTtcblx0fVxuXG5cdHJldHVybiBhdHRycztcbn1cblxuZnVuY3Rpb24gY3JlYXRlVHdlZW4oIHZhbHVlLCBwcm9wLCBhbmltYXRpb24gKSB7XG5cdHZhciB0d2Vlbixcblx0XHRjb2xsZWN0aW9uID0gKCBBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSB8fCBbXSApLmNvbmNhdCggQW5pbWF0aW9uLnR3ZWVuZXJzWyBcIipcIiBdICksXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IGNvbGxlY3Rpb24ubGVuZ3RoO1xuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGlmICggKCB0d2VlbiA9IGNvbGxlY3Rpb25bIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBwcm9wLCB2YWx1ZSApICkgKSB7XG5cblx0XHRcdC8vIFdlJ3JlIGRvbmUgd2l0aCB0aGlzIHByb3BlcnR5XG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIGRlZmF1bHRQcmVmaWx0ZXIoIGVsZW0sIHByb3BzLCBvcHRzICkge1xuXHR2YXIgcHJvcCwgdmFsdWUsIHRvZ2dsZSwgaG9va3MsIG9sZGZpcmUsIHByb3BUd2VlbiwgcmVzdG9yZURpc3BsYXksIGRpc3BsYXksXG5cdFx0aXNCb3ggPSBcIndpZHRoXCIgaW4gcHJvcHMgfHwgXCJoZWlnaHRcIiBpbiBwcm9wcyxcblx0XHRhbmltID0gdGhpcyxcblx0XHRvcmlnID0ge30sXG5cdFx0c3R5bGUgPSBlbGVtLnN0eWxlLFxuXHRcdGhpZGRlbiA9IGVsZW0ubm9kZVR5cGUgJiYgaXNIaWRkZW5XaXRoaW5UcmVlKCBlbGVtICksXG5cdFx0ZGF0YVNob3cgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZnhzaG93XCIgKTtcblxuXHQvLyBRdWV1ZS1za2lwcGluZyBhbmltYXRpb25zIGhpamFjayB0aGUgZnggaG9va3Ncblx0aWYgKCAhb3B0cy5xdWV1ZSApIHtcblx0XHRob29rcyA9IGpRdWVyeS5fcXVldWVIb29rcyggZWxlbSwgXCJmeFwiICk7XG5cdFx0aWYgKCBob29rcy51bnF1ZXVlZCA9PSBudWxsICkge1xuXHRcdFx0aG9va3MudW5xdWV1ZWQgPSAwO1xuXHRcdFx0b2xkZmlyZSA9IGhvb2tzLmVtcHR5LmZpcmU7XG5cdFx0XHRob29rcy5lbXB0eS5maXJlID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggIWhvb2tzLnVucXVldWVkICkge1xuXHRcdFx0XHRcdG9sZGZpcmUoKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHR9XG5cdFx0aG9va3MudW5xdWV1ZWQrKztcblxuXHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRW5zdXJlIHRoZSBjb21wbGV0ZSBoYW5kbGVyIGlzIGNhbGxlZCBiZWZvcmUgdGhpcyBjb21wbGV0ZXNcblx0XHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0aG9va3MudW5xdWV1ZWQtLTtcblx0XHRcdFx0aWYgKCAhalF1ZXJ5LnF1ZXVlKCBlbGVtLCBcImZ4XCIgKS5sZW5ndGggKSB7XG5cdFx0XHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fSApO1xuXHR9XG5cblx0Ly8gRGV0ZWN0IHNob3cvaGlkZSBhbmltYXRpb25zXG5cdGZvciAoIHByb3AgaW4gcHJvcHMgKSB7XG5cdFx0dmFsdWUgPSBwcm9wc1sgcHJvcCBdO1xuXHRcdGlmICggcmZ4dHlwZXMudGVzdCggdmFsdWUgKSApIHtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgcHJvcCBdO1xuXHRcdFx0dG9nZ2xlID0gdG9nZ2xlIHx8IHZhbHVlID09PSBcInRvZ2dsZVwiO1xuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gKCBoaWRkZW4gPyBcImhpZGVcIiA6IFwic2hvd1wiICkgKSB7XG5cblx0XHRcdFx0Ly8gUHJldGVuZCB0byBiZSBoaWRkZW4gaWYgdGhpcyBpcyBhIFwic2hvd1wiIGFuZFxuXHRcdFx0XHQvLyB0aGVyZSBpcyBzdGlsbCBkYXRhIGZyb20gYSBzdG9wcGVkIHNob3cvaGlkZVxuXHRcdFx0XHRpZiAoIHZhbHVlID09PSBcInNob3dcIiAmJiBkYXRhU2hvdyAmJiBkYXRhU2hvd1sgcHJvcCBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0aGlkZGVuID0gdHJ1ZTtcblxuXHRcdFx0XHQvLyBJZ25vcmUgYWxsIG90aGVyIG5vLW9wIHNob3cvaGlkZSBkYXRhXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdG9yaWdbIHByb3AgXSA9IGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gfHwgalF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQmFpbCBvdXQgaWYgdGhpcyBpcyBhIG5vLW9wIGxpa2UgLmhpZGUoKS5oaWRlKClcblx0cHJvcFR3ZWVuID0gIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wcyApO1xuXHRpZiAoICFwcm9wVHdlZW4gJiYgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIG9yaWcgKSApIHtcblx0XHRyZXR1cm47XG5cdH1cblxuXHQvLyBSZXN0cmljdCBcIm92ZXJmbG93XCIgYW5kIFwiZGlzcGxheVwiIHN0eWxlcyBkdXJpbmcgYm94IGFuaW1hdGlvbnNcblx0aWYgKCBpc0JveCAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEsIEVkZ2UgMTIgLSAxNVxuXHRcdC8vIFJlY29yZCBhbGwgMyBvdmVyZmxvdyBhdHRyaWJ1dGVzIGJlY2F1c2UgSUUgZG9lcyBub3QgaW5mZXIgdGhlIHNob3J0aGFuZFxuXHRcdC8vIGZyb20gaWRlbnRpY2FsbHktdmFsdWVkIG92ZXJmbG93WCBhbmQgb3ZlcmZsb3dZIGFuZCBFZGdlIGp1c3QgbWlycm9yc1xuXHRcdC8vIHRoZSBvdmVyZmxvd1ggdmFsdWUgdGhlcmUuXG5cdFx0b3B0cy5vdmVyZmxvdyA9IFsgc3R5bGUub3ZlcmZsb3csIHN0eWxlLm92ZXJmbG93WCwgc3R5bGUub3ZlcmZsb3dZIF07XG5cblx0XHQvLyBJZGVudGlmeSBhIGRpc3BsYXkgdHlwZSwgcHJlZmVycmluZyBvbGQgc2hvdy9oaWRlIGRhdGEgb3ZlciB0aGUgQ1NTIGNhc2NhZGVcblx0XHRyZXN0b3JlRGlzcGxheSA9IGRhdGFTaG93ICYmIGRhdGFTaG93LmRpc3BsYXk7XG5cdFx0aWYgKCByZXN0b3JlRGlzcGxheSA9PSBudWxsICkge1xuXHRcdFx0cmVzdG9yZURpc3BsYXkgPSBkYXRhUHJpdi5nZXQoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0fVxuXHRcdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdGlmICggZGlzcGxheSA9PT0gXCJub25lXCIgKSB7XG5cdFx0XHRpZiAoIHJlc3RvcmVEaXNwbGF5ICkge1xuXHRcdFx0XHRkaXNwbGF5ID0gcmVzdG9yZURpc3BsYXk7XG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEdldCBub25lbXB0eSB2YWx1ZShzKSBieSB0ZW1wb3JhcmlseSBmb3JjaW5nIHZpc2liaWxpdHlcblx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdLCB0cnVlICk7XG5cdFx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZWxlbS5zdHlsZS5kaXNwbGF5IHx8IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0XHRkaXNwbGF5ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQW5pbWF0ZSBpbmxpbmUgZWxlbWVudHMgYXMgaW5saW5lLWJsb2NrXG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcImlubGluZVwiIHx8IGRpc3BsYXkgPT09IFwiaW5saW5lLWJsb2NrXCIgJiYgcmVzdG9yZURpc3BsYXkgIT0gbnVsbCApIHtcblx0XHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJmbG9hdFwiICkgPT09IFwibm9uZVwiICkge1xuXG5cdFx0XHRcdC8vIFJlc3RvcmUgdGhlIG9yaWdpbmFsIGRpc3BsYXkgdmFsdWUgYXQgdGhlIGVuZCBvZiBwdXJlIHNob3cvaGlkZSBhbmltYXRpb25zXG5cdFx0XHRcdGlmICggIXByb3BUd2VlbiApIHtcblx0XHRcdFx0XHRhbmltLmRvbmUoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0c3R5bGUuZGlzcGxheSA9IHJlc3RvcmVEaXNwbGF5O1xuXHRcdFx0XHRcdH0gKTtcblx0XHRcdFx0XHRpZiAoIHJlc3RvcmVEaXNwbGF5ID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRkaXNwbGF5ID0gc3R5bGUuZGlzcGxheTtcblx0XHRcdFx0XHRcdHJlc3RvcmVEaXNwbGF5ID0gZGlzcGxheSA9PT0gXCJub25lXCIgPyBcIlwiIDogZGlzcGxheTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdFx0c3R5bGUuZGlzcGxheSA9IFwiaW5saW5lLWJsb2NrXCI7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0aWYgKCBvcHRzLm92ZXJmbG93ICkge1xuXHRcdHN0eWxlLm92ZXJmbG93ID0gXCJoaWRkZW5cIjtcblx0XHRhbmltLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cdFx0XHRzdHlsZS5vdmVyZmxvdyA9IG9wdHMub3ZlcmZsb3dbIDAgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WCA9IG9wdHMub3ZlcmZsb3dbIDEgXTtcblx0XHRcdHN0eWxlLm92ZXJmbG93WSA9IG9wdHMub3ZlcmZsb3dbIDIgXTtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBJbXBsZW1lbnQgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0cHJvcFR3ZWVuID0gZmFsc2U7XG5cdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblxuXHRcdC8vIEdlbmVyYWwgc2hvdy9oaWRlIHNldHVwIGZvciB0aGlzIGVsZW1lbnQgYW5pbWF0aW9uXG5cdFx0aWYgKCAhcHJvcFR3ZWVuICkge1xuXHRcdFx0aWYgKCBkYXRhU2hvdyApIHtcblx0XHRcdFx0aWYgKCBcImhpZGRlblwiIGluIGRhdGFTaG93ICkge1xuXHRcdFx0XHRcdGhpZGRlbiA9IGRhdGFTaG93LmhpZGRlbjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGF0YVNob3cgPSBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIFwiZnhzaG93XCIsIHsgZGlzcGxheTogcmVzdG9yZURpc3BsYXkgfSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdG9yZSBoaWRkZW4vdmlzaWJsZSBmb3IgdG9nZ2xlIHNvIGAuc3RvcCgpLnRvZ2dsZSgpYCBcInJldmVyc2VzXCJcblx0XHRcdGlmICggdG9nZ2xlICkge1xuXHRcdFx0XHRkYXRhU2hvdy5oaWRkZW4gPSAhaGlkZGVuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTaG93IGVsZW1lbnRzIGJlZm9yZSBhbmltYXRpbmcgdGhlbVxuXHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSwgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby1sb29wLWZ1bmMgKi9cblxuXHRcdFx0YW5pbS5kb25lKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0LyogZXNsaW50LWVuYWJsZSBuby1sb29wLWZ1bmMgKi9cblxuXHRcdFx0XHQvLyBUaGUgZmluYWwgc3RlcCBvZiBhIFwiaGlkZVwiIGFuaW1hdGlvbiBpcyBhY3R1YWxseSBoaWRpbmcgdGhlIGVsZW1lbnRcblx0XHRcdFx0aWYgKCAhaGlkZGVuICkge1xuXHRcdFx0XHRcdHNob3dIaWRlKCBbIGVsZW0gXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgXCJmeHNob3dcIiApO1xuXHRcdFx0XHRmb3IgKCBwcm9wIGluIG9yaWcgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBvcmlnWyBwcm9wIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdC8vIFBlci1wcm9wZXJ0eSBzZXR1cFxuXHRcdHByb3BUd2VlbiA9IGNyZWF0ZVR3ZWVuKCBoaWRkZW4gPyBkYXRhU2hvd1sgcHJvcCBdIDogMCwgcHJvcCwgYW5pbSApO1xuXHRcdGlmICggISggcHJvcCBpbiBkYXRhU2hvdyApICkge1xuXHRcdFx0ZGF0YVNob3dbIHByb3AgXSA9IHByb3BUd2Vlbi5zdGFydDtcblx0XHRcdGlmICggaGlkZGVuICkge1xuXHRcdFx0XHRwcm9wVHdlZW4uZW5kID0gcHJvcFR3ZWVuLnN0YXJ0O1xuXHRcdFx0XHRwcm9wVHdlZW4uc3RhcnQgPSAwO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBwcm9wRmlsdGVyKCBwcm9wcywgc3BlY2lhbEVhc2luZyApIHtcblx0dmFyIGluZGV4LCBuYW1lLCBlYXNpbmcsIHZhbHVlLCBob29rcztcblxuXHQvLyBjYW1lbENhc2UsIHNwZWNpYWxFYXNpbmcgYW5kIGV4cGFuZCBjc3NIb29rIHBhc3Ncblx0Zm9yICggaW5kZXggaW4gcHJvcHMgKSB7XG5cdFx0bmFtZSA9IGNhbWVsQ2FzZSggaW5kZXggKTtcblx0XHRlYXNpbmcgPSBzcGVjaWFsRWFzaW5nWyBuYW1lIF07XG5cdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0XHRlYXNpbmcgPSB2YWx1ZVsgMSBdO1xuXHRcdFx0dmFsdWUgPSBwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyAwIF07XG5cdFx0fVxuXG5cdFx0aWYgKCBpbmRleCAhPT0gbmFtZSApIHtcblx0XHRcdHByb3BzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdGRlbGV0ZSBwcm9wc1sgaW5kZXggXTtcblx0XHR9XG5cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdO1xuXHRcdGlmICggaG9va3MgJiYgXCJleHBhbmRcIiBpbiBob29rcyApIHtcblx0XHRcdHZhbHVlID0gaG9va3MuZXhwYW5kKCB2YWx1ZSApO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBuYW1lIF07XG5cblx0XHRcdC8vIE5vdCBxdWl0ZSAkLmV4dGVuZCwgdGhpcyB3b24ndCBvdmVyd3JpdGUgZXhpc3Rpbmcga2V5cy5cblx0XHRcdC8vIFJldXNpbmcgJ2luZGV4JyBiZWNhdXNlIHdlIGhhdmUgdGhlIGNvcnJlY3QgXCJuYW1lXCJcblx0XHRcdGZvciAoIGluZGV4IGluIHZhbHVlICkge1xuXHRcdFx0XHRpZiAoICEoIGluZGV4IGluIHByb3BzICkgKSB7XG5cdFx0XHRcdFx0cHJvcHNbIGluZGV4IF0gPSB2YWx1ZVsgaW5kZXggXTtcblx0XHRcdFx0XHRzcGVjaWFsRWFzaW5nWyBpbmRleCBdID0gZWFzaW5nO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSBlbHNlIHtcblx0XHRcdHNwZWNpYWxFYXNpbmdbIG5hbWUgXSA9IGVhc2luZztcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gQW5pbWF0aW9uKCBlbGVtLCBwcm9wZXJ0aWVzLCBvcHRpb25zICkge1xuXHR2YXIgcmVzdWx0LFxuXHRcdHN0b3BwZWQsXG5cdFx0aW5kZXggPSAwLFxuXHRcdGxlbmd0aCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzLmxlbmd0aCxcblx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIERvbid0IG1hdGNoIGVsZW0gaW4gdGhlIDphbmltYXRlZCBzZWxlY3RvclxuXHRcdFx0ZGVsZXRlIHRpY2suZWxlbTtcblx0XHR9ICksXG5cdFx0dGljayA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0aWYgKCBzdG9wcGVkICkge1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9XG5cdFx0XHR2YXIgY3VycmVudFRpbWUgPSBmeE5vdyB8fCBjcmVhdGVGeE5vdygpLFxuXHRcdFx0XHRyZW1haW5pbmcgPSBNYXRoLm1heCggMCwgYW5pbWF0aW9uLnN0YXJ0VGltZSArIGFuaW1hdGlvbi5kdXJhdGlvbiAtIGN1cnJlbnRUaW1lICksXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCAyLjMgb25seVxuXHRcdFx0XHQvLyBBcmNoYWljIGNyYXNoIGJ1ZyB3b24ndCBhbGxvdyB1cyB0byB1c2UgYDEgLSAoIDAuNSB8fCAwIClgICgjMTI0OTcpXG5cdFx0XHRcdHRlbXAgPSByZW1haW5pbmcgLyBhbmltYXRpb24uZHVyYXRpb24gfHwgMCxcblx0XHRcdFx0cGVyY2VudCA9IDEgLSB0ZW1wLFxuXHRcdFx0XHRpbmRleCA9IDAsXG5cdFx0XHRcdGxlbmd0aCA9IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoO1xuXG5cdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggcGVyY2VudCApO1xuXHRcdFx0fVxuXG5cdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgcGVyY2VudCwgcmVtYWluaW5nIF0gKTtcblxuXHRcdFx0Ly8gSWYgdGhlcmUncyBtb3JlIHRvIGRvLCB5aWVsZFxuXHRcdFx0aWYgKCBwZXJjZW50IDwgMSAmJiBsZW5ndGggKSB7XG5cdFx0XHRcdHJldHVybiByZW1haW5pbmc7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHRoaXMgd2FzIGFuIGVtcHR5IGFuaW1hdGlvbiwgc3ludGhlc2l6ZSBhIGZpbmFsIHByb2dyZXNzIG5vdGlmaWNhdGlvblxuXHRcdFx0aWYgKCAhbGVuZ3RoICkge1xuXHRcdFx0XHRkZWZlcnJlZC5ub3RpZnlXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgMSwgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJlc29sdmUgdGhlIGFuaW1hdGlvbiBhbmQgcmVwb3J0IGl0cyBjb25jbHVzaW9uXG5cdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24gXSApO1xuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH0sXG5cdFx0YW5pbWF0aW9uID0gZGVmZXJyZWQucHJvbWlzZSgge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdHByb3BzOiBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcGVydGllcyApLFxuXHRcdFx0b3B0czogalF1ZXJ5LmV4dGVuZCggdHJ1ZSwge1xuXHRcdFx0XHRzcGVjaWFsRWFzaW5nOiB7fSxcblx0XHRcdFx0ZWFzaW5nOiBqUXVlcnkuZWFzaW5nLl9kZWZhdWx0XG5cdFx0XHR9LCBvcHRpb25zICksXG5cdFx0XHRvcmlnaW5hbFByb3BlcnRpZXM6IHByb3BlcnRpZXMsXG5cdFx0XHRvcmlnaW5hbE9wdGlvbnM6IG9wdGlvbnMsXG5cdFx0XHRzdGFydFRpbWU6IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRkdXJhdGlvbjogb3B0aW9ucy5kdXJhdGlvbixcblx0XHRcdHR3ZWVuczogW10sXG5cdFx0XHRjcmVhdGVUd2VlbjogZnVuY3Rpb24oIHByb3AsIGVuZCApIHtcblx0XHRcdFx0dmFyIHR3ZWVuID0galF1ZXJ5LlR3ZWVuKCBlbGVtLCBhbmltYXRpb24ub3B0cywgcHJvcCwgZW5kLFxuXHRcdFx0XHRcdFx0YW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZ1sgcHJvcCBdIHx8IGFuaW1hdGlvbi5vcHRzLmVhc2luZyApO1xuXHRcdFx0XHRhbmltYXRpb24udHdlZW5zLnB1c2goIHR3ZWVuICk7XG5cdFx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHRcdH0sXG5cdFx0XHRzdG9wOiBmdW5jdGlvbiggZ290b0VuZCApIHtcblx0XHRcdFx0dmFyIGluZGV4ID0gMCxcblxuXHRcdFx0XHRcdC8vIElmIHdlIGFyZSBnb2luZyB0byB0aGUgZW5kLCB3ZSB3YW50IHRvIHJ1biBhbGwgdGhlIHR3ZWVuc1xuXHRcdFx0XHRcdC8vIG90aGVyd2lzZSB3ZSBza2lwIHRoaXMgcGFydFxuXHRcdFx0XHRcdGxlbmd0aCA9IGdvdG9FbmQgPyBhbmltYXRpb24udHdlZW5zLmxlbmd0aCA6IDA7XG5cdFx0XHRcdGlmICggc3RvcHBlZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0XHRzdG9wcGVkID0gdHJ1ZTtcblx0XHRcdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdFx0XHRhbmltYXRpb24udHdlZW5zWyBpbmRleCBdLnJ1biggMSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVzb2x2ZSB3aGVuIHdlIHBsYXllZCB0aGUgbGFzdCBmcmFtZTsgb3RoZXJ3aXNlLCByZWplY3Rcblx0XHRcdFx0aWYgKCBnb3RvRW5kICkge1xuXHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdFx0XHRkZWZlcnJlZC5yZXNvbHZlV2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlamVjdFdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBnb3RvRW5kIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH1cblx0XHR9ICksXG5cdFx0cHJvcHMgPSBhbmltYXRpb24ucHJvcHM7XG5cblx0cHJvcEZpbHRlciggcHJvcHMsIGFuaW1hdGlvbi5vcHRzLnNwZWNpYWxFYXNpbmcgKTtcblxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdHJlc3VsdCA9IEFuaW1hdGlvbi5wcmVmaWx0ZXJzWyBpbmRleCBdLmNhbGwoIGFuaW1hdGlvbiwgZWxlbSwgcHJvcHMsIGFuaW1hdGlvbi5vcHRzICk7XG5cdFx0aWYgKCByZXN1bHQgKSB7XG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24oIHJlc3VsdC5zdG9wICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5fcXVldWVIb29rcyggYW5pbWF0aW9uLmVsZW0sIGFuaW1hdGlvbi5vcHRzLnF1ZXVlICkuc3RvcCA9XG5cdFx0XHRcdFx0cmVzdWx0LnN0b3AuYmluZCggcmVzdWx0ICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0O1xuXHRcdH1cblx0fVxuXG5cdGpRdWVyeS5tYXAoIHByb3BzLCBjcmVhdGVUd2VlbiwgYW5pbWF0aW9uICk7XG5cblx0aWYgKCBpc0Z1bmN0aW9uKCBhbmltYXRpb24ub3B0cy5zdGFydCApICkge1xuXHRcdGFuaW1hdGlvbi5vcHRzLnN0YXJ0LmNhbGwoIGVsZW0sIGFuaW1hdGlvbiApO1xuXHR9XG5cblx0Ly8gQXR0YWNoIGNhbGxiYWNrcyBmcm9tIG9wdGlvbnNcblx0YW5pbWF0aW9uXG5cdFx0LnByb2dyZXNzKCBhbmltYXRpb24ub3B0cy5wcm9ncmVzcyApXG5cdFx0LmRvbmUoIGFuaW1hdGlvbi5vcHRzLmRvbmUsIGFuaW1hdGlvbi5vcHRzLmNvbXBsZXRlIClcblx0XHQuZmFpbCggYW5pbWF0aW9uLm9wdHMuZmFpbCApXG5cdFx0LmFsd2F5cyggYW5pbWF0aW9uLm9wdHMuYWx3YXlzICk7XG5cblx0alF1ZXJ5LmZ4LnRpbWVyKFxuXHRcdGpRdWVyeS5leHRlbmQoIHRpY2ssIHtcblx0XHRcdGVsZW06IGVsZW0sXG5cdFx0XHRhbmltOiBhbmltYXRpb24sXG5cdFx0XHRxdWV1ZTogYW5pbWF0aW9uLm9wdHMucXVldWVcblx0XHR9IClcblx0KTtcblxuXHRyZXR1cm4gYW5pbWF0aW9uO1xufVxuXG5qUXVlcnkuQW5pbWF0aW9uID0galF1ZXJ5LmV4dGVuZCggQW5pbWF0aW9uLCB7XG5cblx0dHdlZW5lcnM6IHtcblx0XHRcIipcIjogWyBmdW5jdGlvbiggcHJvcCwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgdHdlZW4gPSB0aGlzLmNyZWF0ZVR3ZWVuKCBwcm9wLCB2YWx1ZSApO1xuXHRcdFx0YWRqdXN0Q1NTKCB0d2Vlbi5lbGVtLCBwcm9wLCByY3NzTnVtLmV4ZWMoIHZhbHVlICksIHR3ZWVuICk7XG5cdFx0XHRyZXR1cm4gdHdlZW47XG5cdFx0fSBdXG5cdH0sXG5cblx0dHdlZW5lcjogZnVuY3Rpb24oIHByb3BzLCBjYWxsYmFjayApIHtcblx0XHRpZiAoIGlzRnVuY3Rpb24oIHByb3BzICkgKSB7XG5cdFx0XHRjYWxsYmFjayA9IHByb3BzO1xuXHRcdFx0cHJvcHMgPSBbIFwiKlwiIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdHByb3BzID0gcHJvcHMubWF0Y2goIHJub3RodG1sd2hpdGUgKTtcblx0XHR9XG5cblx0XHR2YXIgcHJvcCxcblx0XHRcdGluZGV4ID0gMCxcblx0XHRcdGxlbmd0aCA9IHByb3BzLmxlbmd0aDtcblxuXHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRwcm9wID0gcHJvcHNbIGluZGV4IF07XG5cdFx0XHRBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXSA9IEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdO1xuXHRcdFx0QW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0udW5zaGlmdCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH0sXG5cblx0cHJlZmlsdGVyczogWyBkZWZhdWx0UHJlZmlsdGVyIF0sXG5cblx0cHJlZmlsdGVyOiBmdW5jdGlvbiggY2FsbGJhY2ssIHByZXBlbmQgKSB7XG5cdFx0aWYgKCBwcmVwZW5kICkge1xuXHRcdFx0QW5pbWF0aW9uLnByZWZpbHRlcnMudW5zaGlmdCggY2FsbGJhY2sgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0QW5pbWF0aW9uLnByZWZpbHRlcnMucHVzaCggY2FsbGJhY2sgKTtcblx0XHR9XG5cdH1cbn0gKTtcblxualF1ZXJ5LnNwZWVkID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGZuICkge1xuXHR2YXIgb3B0ID0gc3BlZWQgJiYgdHlwZW9mIHNwZWVkID09PSBcIm9iamVjdFwiID8galF1ZXJ5LmV4dGVuZCgge30sIHNwZWVkICkgOiB7XG5cdFx0Y29tcGxldGU6IGZuIHx8ICFmbiAmJiBlYXNpbmcgfHxcblx0XHRcdGlzRnVuY3Rpb24oIHNwZWVkICkgJiYgc3BlZWQsXG5cdFx0ZHVyYXRpb246IHNwZWVkLFxuXHRcdGVhc2luZzogZm4gJiYgZWFzaW5nIHx8IGVhc2luZyAmJiAhaXNGdW5jdGlvbiggZWFzaW5nICkgJiYgZWFzaW5nXG5cdH07XG5cblx0Ly8gR28gdG8gdGhlIGVuZCBzdGF0ZSBpZiBmeCBhcmUgb2ZmXG5cdGlmICggalF1ZXJ5LmZ4Lm9mZiApIHtcblx0XHRvcHQuZHVyYXRpb24gPSAwO1xuXG5cdH0gZWxzZSB7XG5cdFx0aWYgKCB0eXBlb2Ygb3B0LmR1cmF0aW9uICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0aWYgKCBvcHQuZHVyYXRpb24gaW4galF1ZXJ5LmZ4LnNwZWVkcyApIHtcblx0XHRcdFx0b3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4LnNwZWVkc1sgb3B0LmR1cmF0aW9uIF07XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdG9wdC5kdXJhdGlvbiA9IGpRdWVyeS5meC5zcGVlZHMuX2RlZmF1bHQ7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gTm9ybWFsaXplIG9wdC5xdWV1ZSAtIHRydWUvdW5kZWZpbmVkL251bGwgLT4gXCJmeFwiXG5cdGlmICggb3B0LnF1ZXVlID09IG51bGwgfHwgb3B0LnF1ZXVlID09PSB0cnVlICkge1xuXHRcdG9wdC5xdWV1ZSA9IFwiZnhcIjtcblx0fVxuXG5cdC8vIFF1ZXVlaW5nXG5cdG9wdC5vbGQgPSBvcHQuY29tcGxldGU7XG5cblx0b3B0LmNvbXBsZXRlID0gZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBvcHQub2xkICkgKSB7XG5cdFx0XHRvcHQub2xkLmNhbGwoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIG9wdC5xdWV1ZSApIHtcblx0XHRcdGpRdWVyeS5kZXF1ZXVlKCB0aGlzLCBvcHQucXVldWUgKTtcblx0XHR9XG5cdH07XG5cblx0cmV0dXJuIG9wdDtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZmFkZVRvOiBmdW5jdGlvbiggc3BlZWQsIHRvLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXG5cdFx0Ly8gU2hvdyBhbnkgaGlkZGVuIGVsZW1lbnRzIGFmdGVyIHNldHRpbmcgb3BhY2l0eSB0byAwXG5cdFx0cmV0dXJuIHRoaXMuZmlsdGVyKCBpc0hpZGRlbldpdGhpblRyZWUgKS5jc3MoIFwib3BhY2l0eVwiLCAwICkuc2hvdygpXG5cblx0XHRcdC8vIEFuaW1hdGUgdG8gdGhlIHZhbHVlIHNwZWNpZmllZFxuXHRcdFx0LmVuZCgpLmFuaW1hdGUoIHsgb3BhY2l0eTogdG8gfSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fSxcblx0YW5pbWF0ZTogZnVuY3Rpb24oIHByb3AsIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHZhciBlbXB0eSA9IGpRdWVyeS5pc0VtcHR5T2JqZWN0KCBwcm9wICksXG5cdFx0XHRvcHRhbGwgPSBqUXVlcnkuc3BlZWQoIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICksXG5cdFx0XHRkb0FuaW1hdGlvbiA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIE9wZXJhdGUgb24gYSBjb3B5IG9mIHByb3Agc28gcGVyLXByb3BlcnR5IGVhc2luZyB3b24ndCBiZSBsb3N0XG5cdFx0XHRcdHZhciBhbmltID0gQW5pbWF0aW9uKCB0aGlzLCBqUXVlcnkuZXh0ZW5kKCB7fSwgcHJvcCApLCBvcHRhbGwgKTtcblxuXHRcdFx0XHQvLyBFbXB0eSBhbmltYXRpb25zLCBvciBmaW5pc2hpbmcgcmVzb2x2ZXMgaW1tZWRpYXRlbHlcblx0XHRcdFx0aWYgKCBlbXB0eSB8fCBkYXRhUHJpdi5nZXQoIHRoaXMsIFwiZmluaXNoXCIgKSApIHtcblx0XHRcdFx0XHRhbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fTtcblx0XHRcdGRvQW5pbWF0aW9uLmZpbmlzaCA9IGRvQW5pbWF0aW9uO1xuXG5cdFx0cmV0dXJuIGVtcHR5IHx8IG9wdGFsbC5xdWV1ZSA9PT0gZmFsc2UgP1xuXHRcdFx0dGhpcy5lYWNoKCBkb0FuaW1hdGlvbiApIDpcblx0XHRcdHRoaXMucXVldWUoIG9wdGFsbC5xdWV1ZSwgZG9BbmltYXRpb24gKTtcblx0fSxcblx0c3RvcDogZnVuY3Rpb24oIHR5cGUsIGNsZWFyUXVldWUsIGdvdG9FbmQgKSB7XG5cdFx0dmFyIHN0b3BRdWV1ZSA9IGZ1bmN0aW9uKCBob29rcyApIHtcblx0XHRcdHZhciBzdG9wID0gaG9va3Muc3RvcDtcblx0XHRcdGRlbGV0ZSBob29rcy5zdG9wO1xuXHRcdFx0c3RvcCggZ290b0VuZCApO1xuXHRcdH07XG5cblx0XHRpZiAoIHR5cGVvZiB0eXBlICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0Z290b0VuZCA9IGNsZWFyUXVldWU7XG5cdFx0XHRjbGVhclF1ZXVlID0gdHlwZTtcblx0XHRcdHR5cGUgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHRcdGlmICggY2xlYXJRdWV1ZSAmJiB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHRoaXMucXVldWUoIHR5cGUgfHwgXCJmeFwiLCBbXSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGRlcXVldWUgPSB0cnVlLFxuXHRcdFx0XHRpbmRleCA9IHR5cGUgIT0gbnVsbCAmJiB0eXBlICsgXCJxdWV1ZUhvb2tzXCIsXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGRhdGEgPSBkYXRhUHJpdi5nZXQoIHRoaXMgKTtcblxuXHRcdFx0aWYgKCBpbmRleCApIHtcblx0XHRcdFx0aWYgKCBkYXRhWyBpbmRleCBdICYmIGRhdGFbIGluZGV4IF0uc3RvcCApIHtcblx0XHRcdFx0XHRzdG9wUXVldWUoIGRhdGFbIGluZGV4IF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Zm9yICggaW5kZXggaW4gZGF0YSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICYmIHJydW4udGVzdCggaW5kZXggKSApIHtcblx0XHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHRmb3IgKCBpbmRleCA9IHRpbWVycy5sZW5ndGg7IGluZGV4LS07ICkge1xuXHRcdFx0XHRpZiAoIHRpbWVyc1sgaW5kZXggXS5lbGVtID09PSB0aGlzICYmXG5cdFx0XHRcdFx0KCB0eXBlID09IG51bGwgfHwgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkgKSB7XG5cblx0XHRcdFx0XHR0aW1lcnNbIGluZGV4IF0uYW5pbS5zdG9wKCBnb3RvRW5kICk7XG5cdFx0XHRcdFx0ZGVxdWV1ZSA9IGZhbHNlO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhcnQgdGhlIG5leHQgaW4gdGhlIHF1ZXVlIGlmIHRoZSBsYXN0IHN0ZXAgd2Fzbid0IGZvcmNlZC5cblx0XHRcdC8vIFRpbWVycyBjdXJyZW50bHkgd2lsbCBjYWxsIHRoZWlyIGNvbXBsZXRlIGNhbGxiYWNrcywgd2hpY2hcblx0XHRcdC8vIHdpbGwgZGVxdWV1ZSBidXQgb25seSBpZiB0aGV5IHdlcmUgZ290b0VuZC5cblx0XHRcdGlmICggZGVxdWV1ZSB8fCAhZ290b0VuZCApIHtcblx0XHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cdGZpbmlzaDogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0aWYgKCB0eXBlICE9PSBmYWxzZSApIHtcblx0XHRcdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblx0XHR9XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgaW5kZXgsXG5cdFx0XHRcdGRhdGEgPSBkYXRhUHJpdi5nZXQoIHRoaXMgKSxcblx0XHRcdFx0cXVldWUgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZVwiIF0sXG5cdFx0XHRcdGhvb2tzID0gZGF0YVsgdHlwZSArIFwicXVldWVIb29rc1wiIF0sXG5cdFx0XHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnMsXG5cdFx0XHRcdGxlbmd0aCA9IHF1ZXVlID8gcXVldWUubGVuZ3RoIDogMDtcblxuXHRcdFx0Ly8gRW5hYmxlIGZpbmlzaGluZyBmbGFnIG9uIHByaXZhdGUgZGF0YVxuXHRcdFx0ZGF0YS5maW5pc2ggPSB0cnVlO1xuXG5cdFx0XHQvLyBFbXB0eSB0aGUgcXVldWUgZmlyc3Rcblx0XHRcdGpRdWVyeS5xdWV1ZSggdGhpcywgdHlwZSwgW10gKTtcblxuXHRcdFx0aWYgKCBob29rcyAmJiBob29rcy5zdG9wICkge1xuXHRcdFx0XHRob29rcy5zdG9wLmNhbGwoIHRoaXMsIHRydWUgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFjdGl2ZSBhbmltYXRpb25zLCBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiYgdGltZXJzWyBpbmRleCBdLnF1ZXVlID09PSB0eXBlICkge1xuXHRcdFx0XHRcdHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIHRydWUgKTtcblx0XHRcdFx0XHR0aW1lcnMuc3BsaWNlKCBpbmRleCwgMSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIExvb2sgZm9yIGFueSBhbmltYXRpb25zIGluIHRoZSBvbGQgcXVldWUgYW5kIGZpbmlzaCB0aGVtXG5cdFx0XHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRpZiAoIHF1ZXVlWyBpbmRleCBdICYmIHF1ZXVlWyBpbmRleCBdLmZpbmlzaCApIHtcblx0XHRcdFx0XHRxdWV1ZVsgaW5kZXggXS5maW5pc2guY2FsbCggdGhpcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFR1cm4gb2ZmIGZpbmlzaGluZyBmbGFnXG5cdFx0XHRkZWxldGUgZGF0YS5maW5pc2g7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwidG9nZ2xlXCIsIFwic2hvd1wiLCBcImhpZGVcIiBdLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGNzc0ZuID0galF1ZXJ5LmZuWyBuYW1lIF07XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBzcGVlZCA9PSBudWxsIHx8IHR5cGVvZiBzcGVlZCA9PT0gXCJib29sZWFuXCIgP1xuXHRcdFx0Y3NzRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApIDpcblx0XHRcdHRoaXMuYW5pbWF0ZSggZ2VuRngoIG5hbWUsIHRydWUgKSwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxuLy8gR2VuZXJhdGUgc2hvcnRjdXRzIGZvciBjdXN0b20gYW5pbWF0aW9uc1xualF1ZXJ5LmVhY2goIHtcblx0c2xpZGVEb3duOiBnZW5GeCggXCJzaG93XCIgKSxcblx0c2xpZGVVcDogZ2VuRngoIFwiaGlkZVwiICksXG5cdHNsaWRlVG9nZ2xlOiBnZW5GeCggXCJ0b2dnbGVcIiApLFxuXHRmYWRlSW46IHsgb3BhY2l0eTogXCJzaG93XCIgfSxcblx0ZmFkZU91dDogeyBvcGFjaXR5OiBcImhpZGVcIiB9LFxuXHRmYWRlVG9nZ2xlOiB7IG9wYWNpdHk6IFwidG9nZ2xlXCIgfVxufSwgZnVuY3Rpb24oIG5hbWUsIHByb3BzICkge1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5hbmltYXRlKCBwcm9wcywgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKTtcblx0fTtcbn0gKTtcblxualF1ZXJ5LnRpbWVycyA9IFtdO1xualF1ZXJ5LmZ4LnRpY2sgPSBmdW5jdGlvbigpIHtcblx0dmFyIHRpbWVyLFxuXHRcdGkgPSAwLFxuXHRcdHRpbWVycyA9IGpRdWVyeS50aW1lcnM7XG5cblx0ZnhOb3cgPSBEYXRlLm5vdygpO1xuXG5cdGZvciAoIDsgaSA8IHRpbWVycy5sZW5ndGg7IGkrKyApIHtcblx0XHR0aW1lciA9IHRpbWVyc1sgaSBdO1xuXG5cdFx0Ly8gUnVuIHRoZSB0aW1lciBhbmQgc2FmZWx5IHJlbW92ZSBpdCB3aGVuIGRvbmUgKGFsbG93aW5nIGZvciBleHRlcm5hbCByZW1vdmFsKVxuXHRcdGlmICggIXRpbWVyKCkgJiYgdGltZXJzWyBpIF0gPT09IHRpbWVyICkge1xuXHRcdFx0dGltZXJzLnNwbGljZSggaS0tLCAxICk7XG5cdFx0fVxuXHR9XG5cblx0aWYgKCAhdGltZXJzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkuZnguc3RvcCgpO1xuXHR9XG5cdGZ4Tm93ID0gdW5kZWZpbmVkO1xufTtcblxualF1ZXJ5LmZ4LnRpbWVyID0gZnVuY3Rpb24oIHRpbWVyICkge1xuXHRqUXVlcnkudGltZXJzLnB1c2goIHRpbWVyICk7XG5cdGpRdWVyeS5meC5zdGFydCgpO1xufTtcblxualF1ZXJ5LmZ4LmludGVydmFsID0gMTM7XG5qUXVlcnkuZnguc3RhcnQgPSBmdW5jdGlvbigpIHtcblx0aWYgKCBpblByb2dyZXNzICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdGluUHJvZ3Jlc3MgPSB0cnVlO1xuXHRzY2hlZHVsZSgpO1xufTtcblxualF1ZXJ5LmZ4LnN0b3AgPSBmdW5jdGlvbigpIHtcblx0aW5Qcm9ncmVzcyA9IG51bGw7XG59O1xuXG5qUXVlcnkuZnguc3BlZWRzID0ge1xuXHRzbG93OiA2MDAsXG5cdGZhc3Q6IDIwMCxcblxuXHQvLyBEZWZhdWx0IHNwZWVkXG5cdF9kZWZhdWx0OiA0MDBcbn07XG5cblxuLy8gQmFzZWQgb2ZmIG9mIHRoZSBwbHVnaW4gYnkgQ2xpbnQgSGVsZmVycywgd2l0aCBwZXJtaXNzaW9uLlxuLy8gaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTAwMzI0MDE0NzQ3L2h0dHA6Ly9ibGluZHNpZ25hbHMuY29tL2luZGV4LnBocC8yMDA5LzA3L2pxdWVyeS1kZWxheS9cbmpRdWVyeS5mbi5kZWxheSA9IGZ1bmN0aW9uKCB0aW1lLCB0eXBlICkge1xuXHR0aW1lID0galF1ZXJ5LmZ4ID8galF1ZXJ5LmZ4LnNwZWVkc1sgdGltZSBdIHx8IHRpbWUgOiB0aW1lO1xuXHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0cmV0dXJuIHRoaXMucXVldWUoIHR5cGUsIGZ1bmN0aW9uKCBuZXh0LCBob29rcyApIHtcblx0XHR2YXIgdGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KCBuZXh0LCB0aW1lICk7XG5cdFx0aG9va3Muc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0d2luZG93LmNsZWFyVGltZW91dCggdGltZW91dCApO1xuXHRcdH07XG5cdH0gKTtcbn07XG5cblxuKCBmdW5jdGlvbigpIHtcblx0dmFyIGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICksXG5cdFx0c2VsZWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJzZWxlY3RcIiApLFxuXHRcdG9wdCA9IHNlbGVjdC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvcHRpb25cIiApICk7XG5cblx0aW5wdXQudHlwZSA9IFwiY2hlY2tib3hcIjtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4zIG9ubHlcblx0Ly8gRGVmYXVsdCB2YWx1ZSBmb3IgYSBjaGVja2JveCBzaG91bGQgYmUgXCJvblwiXG5cdHN1cHBvcnQuY2hlY2tPbiA9IGlucHV0LnZhbHVlICE9PSBcIlwiO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBNdXN0IGFjY2VzcyBzZWxlY3RlZEluZGV4IHRvIG1ha2UgZGVmYXVsdCBvcHRpb25zIHNlbGVjdFxuXHRzdXBwb3J0Lm9wdFNlbGVjdGVkID0gb3B0LnNlbGVjdGVkO1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHQvLyBBbiBpbnB1dCBsb3NlcyBpdHMgdmFsdWUgYWZ0ZXIgYmVjb21pbmcgYSByYWRpb1xuXHRpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiaW5wdXRcIiApO1xuXHRpbnB1dC52YWx1ZSA9IFwidFwiO1xuXHRpbnB1dC50eXBlID0gXCJyYWRpb1wiO1xuXHRzdXBwb3J0LnJhZGlvVmFsdWUgPSBpbnB1dC52YWx1ZSA9PT0gXCJ0XCI7XG59ICkoKTtcblxuXG52YXIgYm9vbEhvb2ssXG5cdGF0dHJIYW5kbGUgPSBqUXVlcnkuZXhwci5hdHRySGFuZGxlO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBqUXVlcnkuYXR0ciwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH0sXG5cblx0cmVtb3ZlQXR0cjogZnVuY3Rpb24oIG5hbWUgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggdGhpcywgbmFtZSApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGF0dHI6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHR2YXIgcmV0LCBob29rcyxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgYXR0cmlidXRlcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIEZhbGxiYWNrIHRvIHByb3Agd2hlbiBhdHRyaWJ1dGVzIGFyZSBub3Qgc3VwcG9ydGVkXG5cdFx0aWYgKCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgPT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LnByb3AoIGVsZW0sIG5hbWUsIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXR0cmlidXRlIGhvb2tzIGFyZSBkZXRlcm1pbmVkIGJ5IHRoZSBsb3dlcmNhc2UgdmVyc2lvblxuXHRcdC8vIEdyYWIgbmVjZXNzYXJ5IGhvb2sgaWYgb25lIGlzIGRlZmluZWRcblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblx0XHRcdGhvb2tzID0galF1ZXJ5LmF0dHJIb29rc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gfHxcblx0XHRcdFx0KCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnRlc3QoIG5hbWUgKSA/IGJvb2xIb29rIDogdW5kZWZpbmVkICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCB2YWx1ZSA9PT0gbnVsbCApIHtcblx0XHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIGhvb2tzICYmIFwic2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0KCByZXQgPSBob29rcy5zZXQoIGVsZW0sIHZhbHVlLCBuYW1lICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggbmFtZSwgdmFsdWUgKyBcIlwiICk7XG5cdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0cmV0ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgbmFtZSApO1xuXG5cdFx0Ly8gTm9uLWV4aXN0ZW50IGF0dHJpYnV0ZXMgcmV0dXJuIG51bGwsIHdlIG5vcm1hbGl6ZSB0byB1bmRlZmluZWRcblx0XHRyZXR1cm4gcmV0ID09IG51bGwgPyB1bmRlZmluZWQgOiByZXQ7XG5cdH0sXG5cblx0YXR0ckhvb2tzOiB7XG5cdFx0dHlwZToge1xuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggIXN1cHBvcnQucmFkaW9WYWx1ZSAmJiB2YWx1ZSA9PT0gXCJyYWRpb1wiICYmXG5cdFx0XHRcdFx0bm9kZU5hbWUoIGVsZW0sIFwiaW5wdXRcIiApICkge1xuXHRcdFx0XHRcdHZhciB2YWwgPSBlbGVtLnZhbHVlO1xuXHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcInR5cGVcIiwgdmFsdWUgKTtcblx0XHRcdFx0XHRpZiAoIHZhbCApIHtcblx0XHRcdFx0XHRcdGVsZW0udmFsdWUgPSB2YWw7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0dmFyIG5hbWUsXG5cdFx0XHRpID0gMCxcblxuXHRcdFx0Ly8gQXR0cmlidXRlIG5hbWVzIGNhbiBjb250YWluIG5vbi1IVE1MIHdoaXRlc3BhY2UgY2hhcmFjdGVyc1xuXHRcdFx0Ly8gaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2Uvc3ludGF4Lmh0bWwjYXR0cmlidXRlcy0yXG5cdFx0XHRhdHRyTmFtZXMgPSB2YWx1ZSAmJiB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApO1xuXG5cdFx0aWYgKCBhdHRyTmFtZXMgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdHdoaWxlICggKCBuYW1lID0gYXR0ck5hbWVzWyBpKysgXSApICkge1xuXHRcdFx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggbmFtZSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIb29rcyBmb3IgYm9vbGVhbiBhdHRyaWJ1dGVzXG5ib29sSG9vayA9IHtcblx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIG5hbWUgKSB7XG5cdFx0aWYgKCB2YWx1ZSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBib29sZWFuIGF0dHJpYnV0ZXMgd2hlbiBzZXQgdG8gZmFsc2Vcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCBlbGVtLCBuYW1lICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lICk7XG5cdFx0fVxuXHRcdHJldHVybiBuYW1lO1xuXHR9XG59O1xuXG5qUXVlcnkuZWFjaCggalF1ZXJ5LmV4cHIubWF0Y2guYm9vbC5zb3VyY2UubWF0Y2goIC9cXHcrL2cgKSwgZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cdHZhciBnZXR0ZXIgPSBhdHRySGFuZGxlWyBuYW1lIF0gfHwgalF1ZXJ5LmZpbmQuYXR0cjtcblxuXHRhdHRySGFuZGxlWyBuYW1lIF0gPSBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0dmFyIHJldCwgaGFuZGxlLFxuXHRcdFx0bG93ZXJjYXNlTmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcblxuXHRcdGlmICggIWlzWE1MICkge1xuXG5cdFx0XHQvLyBBdm9pZCBhbiBpbmZpbml0ZSBsb29wIGJ5IHRlbXBvcmFyaWx5IHJlbW92aW5nIHRoaXMgZnVuY3Rpb24gZnJvbSB0aGUgZ2V0dGVyXG5cdFx0XHRoYW5kbGUgPSBhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF07XG5cdFx0XHRhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF0gPSByZXQ7XG5cdFx0XHRyZXQgPSBnZXR0ZXIoIGVsZW0sIG5hbWUsIGlzWE1MICkgIT0gbnVsbCA/XG5cdFx0XHRcdGxvd2VyY2FzZU5hbWUgOlxuXHRcdFx0XHRudWxsO1xuXHRcdFx0YXR0ckhhbmRsZVsgbG93ZXJjYXNlTmFtZSBdID0gaGFuZGxlO1xuXHRcdH1cblx0XHRyZXR1cm4gcmV0O1xuXHR9O1xufSApO1xuXG5cblxuXG52YXIgcmZvY3VzYWJsZSA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJjbGlja2FibGUgPSAvXig/OmF8YXJlYSkkL2k7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0cHJvcDogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5wcm9wLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVQcm9wOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRlbGV0ZSB0aGlzWyBqUXVlcnkucHJvcEZpeFsgbmFtZSBdIHx8IG5hbWUgXTtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmV4dGVuZCgge1xuXHRwcm9wOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgdmFsdWUgKSB7XG5cdFx0dmFyIHJldCwgaG9va3MsXG5cdFx0XHRuVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0XHQvLyBEb24ndCBnZXQvc2V0IHByb3BlcnRpZXMgb24gdGV4dCwgY29tbWVudCBhbmQgYXR0cmlidXRlIG5vZGVzXG5cdFx0aWYgKCBuVHlwZSA9PT0gMyB8fCBuVHlwZSA9PT0gOCB8fCBuVHlwZSA9PT0gMiApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIG5UeXBlICE9PSAxIHx8ICFqUXVlcnkuaXNYTUxEb2MoIGVsZW0gKSApIHtcblxuXHRcdFx0Ly8gRml4IG5hbWUgYW5kIGF0dGFjaCBob29rc1xuXHRcdFx0bmFtZSA9IGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZTtcblx0XHRcdGhvb2tzID0galF1ZXJ5LnByb3BIb29rc1sgbmFtZSBdO1xuXHRcdH1cblxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAoIGVsZW1bIG5hbWUgXSA9IHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICYmICggcmV0ID0gaG9va3MuZ2V0KCBlbGVtLCBuYW1lICkgKSAhPT0gbnVsbCApIHtcblx0XHRcdHJldHVybiByZXQ7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGVsZW1bIG5hbWUgXTtcblx0fSxcblxuXHRwcm9wSG9va3M6IHtcblx0XHR0YWJJbmRleDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSBvbmx5XG5cdFx0XHRcdC8vIGVsZW0udGFiSW5kZXggZG9lc24ndCBhbHdheXMgcmV0dXJuIHRoZVxuXHRcdFx0XHQvLyBjb3JyZWN0IHZhbHVlIHdoZW4gaXQgaGFzbid0IGJlZW4gZXhwbGljaXRseSBzZXRcblx0XHRcdFx0Ly8gaHR0cHM6Ly93ZWIuYXJjaGl2ZS5vcmcvd2ViLzIwMTQxMTE2MjMzMzQ3L2h0dHA6Ly9mbHVpZHByb2plY3Qub3JnL2Jsb2cvMjAwOC8wMS8wOS9nZXR0aW5nLXNldHRpbmctYW5kLXJlbW92aW5nLXRhYmluZGV4LXZhbHVlcy13aXRoLWphdmFzY3JpcHQvXG5cdFx0XHRcdC8vIFVzZSBwcm9wZXIgYXR0cmlidXRlIHJldHJpZXZhbCgjMTIwNzIpXG5cdFx0XHRcdHZhciB0YWJpbmRleCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidGFiaW5kZXhcIiApO1xuXG5cdFx0XHRcdGlmICggdGFiaW5kZXggKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHBhcnNlSW50KCB0YWJpbmRleCwgMTAgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdGlmIChcblx0XHRcdFx0XHRyZm9jdXNhYmxlLnRlc3QoIGVsZW0ubm9kZU5hbWUgKSB8fFxuXHRcdFx0XHRcdHJjbGlja2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApICYmXG5cdFx0XHRcdFx0ZWxlbS5ocmVmXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHRwcm9wRml4OiB7XG5cdFx0XCJmb3JcIjogXCJodG1sRm9yXCIsXG5cdFx0XCJjbGFzc1wiOiBcImNsYXNzTmFtZVwiXG5cdH1cbn0gKTtcblxuLy8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG4vLyBBY2Nlc3NpbmcgdGhlIHNlbGVjdGVkSW5kZXggcHJvcGVydHlcbi8vIGZvcmNlcyB0aGUgYnJvd3NlciB0byByZXNwZWN0IHNldHRpbmcgc2VsZWN0ZWRcbi8vIG9uIHRoZSBvcHRpb25cbi8vIFRoZSBnZXR0ZXIgZW5zdXJlcyBhIGRlZmF1bHQgb3B0aW9uIGlzIHNlbGVjdGVkXG4vLyB3aGVuIGluIGFuIG9wdGdyb3VwXG4vLyBlc2xpbnQgcnVsZSBcIm5vLXVudXNlZC1leHByZXNzaW9uc1wiIGlzIGRpc2FibGVkIGZvciB0aGlzIGNvZGVcbi8vIHNpbmNlIGl0IGNvbnNpZGVycyBzdWNoIGFjY2Vzc2lvbnMgbm9vcFxuaWYgKCAhc3VwcG9ydC5vcHRTZWxlY3RlZCApIHtcblx0alF1ZXJ5LnByb3BIb29rcy5zZWxlY3RlZCA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHQvKiBlc2xpbnQgbm8tdW51c2VkLWV4cHJlc3Npb25zOiBcIm9mZlwiICovXG5cblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRpZiAoIHBhcmVudCAmJiBwYXJlbnQucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdH1cblx0XHRcdHJldHVybiBudWxsO1xuXHRcdH0sXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdFx0LyogZXNsaW50IG5vLXVudXNlZC1leHByZXNzaW9uczogXCJvZmZcIiAqL1xuXG5cdFx0XHR2YXIgcGFyZW50ID0gZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0aWYgKCBwYXJlbnQgKSB7XG5cdFx0XHRcdHBhcmVudC5zZWxlY3RlZEluZGV4O1xuXG5cdFx0XHRcdGlmICggcGFyZW50LnBhcmVudE5vZGUgKSB7XG5cdFx0XHRcdFx0cGFyZW50LnBhcmVudE5vZGUuc2VsZWN0ZWRJbmRleDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxualF1ZXJ5LmVhY2goIFtcblx0XCJ0YWJJbmRleFwiLFxuXHRcInJlYWRPbmx5XCIsXG5cdFwibWF4TGVuZ3RoXCIsXG5cdFwiY2VsbFNwYWNpbmdcIixcblx0XCJjZWxsUGFkZGluZ1wiLFxuXHRcInJvd1NwYW5cIixcblx0XCJjb2xTcGFuXCIsXG5cdFwidXNlTWFwXCIsXG5cdFwiZnJhbWVCb3JkZXJcIixcblx0XCJjb250ZW50RWRpdGFibGVcIlxuXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS5wcm9wRml4WyB0aGlzLnRvTG93ZXJDYXNlKCkgXSA9IHRoaXM7XG59ICk7XG5cblxuXG5cblx0Ly8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2UgYWNjb3JkaW5nIHRvIEhUTUwgc3BlY1xuXHQvLyBodHRwczovL2luZnJhLnNwZWMud2hhdHdnLm9yZy8jc3RyaXAtYW5kLWNvbGxhcHNlLWFzY2lpLXdoaXRlc3BhY2Vcblx0ZnVuY3Rpb24gc3RyaXBBbmRDb2xsYXBzZSggdmFsdWUgKSB7XG5cdFx0dmFyIHRva2VucyA9IHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cdFx0cmV0dXJuIHRva2Vucy5qb2luKCBcIiBcIiApO1xuXHR9XG5cblxuZnVuY3Rpb24gZ2V0Q2xhc3MoIGVsZW0gKSB7XG5cdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSAmJiBlbGVtLmdldEF0dHJpYnV0ZSggXCJjbGFzc1wiICkgfHwgXCJcIjtcbn1cblxuZnVuY3Rpb24gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICkge1xuXHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbHVlICkgKSB7XG5cdFx0cmV0dXJuIHZhbHVlO1xuXHR9XG5cdGlmICggdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiB2YWx1ZS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdO1xuXHR9XG5cdHJldHVybiBbXTtcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRhZGRDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLmFkZENsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRjbGFzc2VzID0gY2xhc3Nlc1RvQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIGNsYXNzZXMubGVuZ3RoICkge1xuXHRcdFx0d2hpbGUgKCAoIGVsZW0gPSB0aGlzWyBpKysgXSApICkge1xuXHRcdFx0XHRjdXJWYWx1ZSA9IGdldENsYXNzKCBlbGVtICk7XG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBcIiBcIiArIHN0cmlwQW5kQ29sbGFwc2UoIGN1clZhbHVlICkgKyBcIiBcIiApO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA8IDAgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciArPSBjbGF6eiArIFwiIFwiO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IHN0cmlwQW5kQ29sbGFwc2UoIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0cmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgY2xhc3NlcywgZWxlbSwgY3VyLCBjdXJWYWx1ZSwgY2xhenosIGosIGZpbmFsVmFsdWUsXG5cdFx0XHRpID0gMDtcblxuXHRcdGlmICggaXNGdW5jdGlvbiggdmFsdWUgKSApIHtcblx0XHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBqICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5yZW1vdmVDbGFzcyggdmFsdWUuY2FsbCggdGhpcywgaiwgZ2V0Q2xhc3MoIHRoaXMgKSApICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0aWYgKCAhYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB0aGlzLmF0dHIoIFwiY2xhc3NcIiwgXCJcIiApO1xuXHRcdH1cblxuXHRcdGNsYXNzZXMgPSBjbGFzc2VzVG9BcnJheSggdmFsdWUgKTtcblxuXHRcdGlmICggY2xhc3Nlcy5sZW5ndGggKSB7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTtcblxuXHRcdFx0XHQvLyBUaGlzIGV4cHJlc3Npb24gaXMgaGVyZSBmb3IgYmV0dGVyIGNvbXByZXNzaWJpbGl0eSAoc2VlIGFkZENsYXNzKVxuXHRcdFx0XHRjdXIgPSBlbGVtLm5vZGVUeXBlID09PSAxICYmICggXCIgXCIgKyBzdHJpcEFuZENvbGxhcHNlKCBjdXJWYWx1ZSApICsgXCIgXCIgKTtcblxuXHRcdFx0XHRpZiAoIGN1ciApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoICggY2xhenogPSBjbGFzc2VzWyBqKysgXSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgKmFsbCogaW5zdGFuY2VzXG5cdFx0XHRcdFx0XHR3aGlsZSAoIGN1ci5pbmRleE9mKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIgKSA+IC0xICkge1xuXHRcdFx0XHRcdFx0XHRjdXIgPSBjdXIucmVwbGFjZSggXCIgXCIgKyBjbGF6eiArIFwiIFwiLCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIE9ubHkgYXNzaWduIGlmIGRpZmZlcmVudCB0byBhdm9pZCB1bm5lZWRlZCByZW5kZXJpbmcuXG5cdFx0XHRcdFx0ZmluYWxWYWx1ZSA9IHN0cmlwQW5kQ29sbGFwc2UoIGN1ciApO1xuXHRcdFx0XHRcdGlmICggY3VyVmFsdWUgIT09IGZpbmFsVmFsdWUgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLCBmaW5hbFZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXM7XG5cdH0sXG5cblx0dG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uKCB2YWx1ZSwgc3RhdGVWYWwgKSB7XG5cdFx0dmFyIHR5cGUgPSB0eXBlb2YgdmFsdWUsXG5cdFx0XHRpc1ZhbGlkVmFsdWUgPSB0eXBlID09PSBcInN0cmluZ1wiIHx8IEFycmF5LmlzQXJyYXkoIHZhbHVlICk7XG5cblx0XHRpZiAoIHR5cGVvZiBzdGF0ZVZhbCA9PT0gXCJib29sZWFuXCIgJiYgaXNWYWxpZFZhbHVlICkge1xuXHRcdFx0cmV0dXJuIHN0YXRlVmFsID8gdGhpcy5hZGRDbGFzcyggdmFsdWUgKSA6IHRoaXMucmVtb3ZlQ2xhc3MoIHZhbHVlICk7XG5cdFx0fVxuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnRvZ2dsZUNsYXNzKFxuXHRcdFx0XHRcdHZhbHVlLmNhbGwoIHRoaXMsIGksIGdldENsYXNzKCB0aGlzICksIHN0YXRlVmFsICksXG5cdFx0XHRcdFx0c3RhdGVWYWxcblx0XHRcdFx0KTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBjbGFzc05hbWUsIGksIHNlbGYsIGNsYXNzTmFtZXM7XG5cblx0XHRcdGlmICggaXNWYWxpZFZhbHVlICkge1xuXG5cdFx0XHRcdC8vIFRvZ2dsZSBpbmRpdmlkdWFsIGNsYXNzIG5hbWVzXG5cdFx0XHRcdGkgPSAwO1xuXHRcdFx0XHRzZWxmID0galF1ZXJ5KCB0aGlzICk7XG5cdFx0XHRcdGNsYXNzTmFtZXMgPSBjbGFzc2VzVG9BcnJheSggdmFsdWUgKTtcblxuXHRcdFx0XHR3aGlsZSAoICggY2xhc3NOYW1lID0gY2xhc3NOYW1lc1sgaSsrIF0gKSApIHtcblxuXHRcdFx0XHRcdC8vIENoZWNrIGVhY2ggY2xhc3NOYW1lIGdpdmVuLCBzcGFjZSBzZXBhcmF0ZWQgbGlzdFxuXHRcdFx0XHRcdGlmICggc2VsZi5oYXNDbGFzcyggY2xhc3NOYW1lICkgKSB7XG5cdFx0XHRcdFx0XHRzZWxmLnJlbW92ZUNsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0c2VsZi5hZGRDbGFzcyggY2xhc3NOYW1lICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdC8vIFRvZ2dsZSB3aG9sZSBjbGFzcyBuYW1lXG5cdFx0XHR9IGVsc2UgaWYgKCB2YWx1ZSA9PT0gdW5kZWZpbmVkIHx8IHR5cGUgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdFx0XHRjbGFzc05hbWUgPSBnZXRDbGFzcyggdGhpcyApO1xuXHRcdFx0XHRpZiAoIGNsYXNzTmFtZSApIHtcblxuXHRcdFx0XHRcdC8vIFN0b3JlIGNsYXNzTmFtZSBpZiBzZXRcblx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIFwiX19jbGFzc05hbWVfX1wiLCBjbGFzc05hbWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIElmIHRoZSBlbGVtZW50IGhhcyBhIGNsYXNzIG5hbWUgb3IgaWYgd2UncmUgcGFzc2VkIGBmYWxzZWAsXG5cdFx0XHRcdC8vIHRoZW4gcmVtb3ZlIHRoZSB3aG9sZSBjbGFzc25hbWUgKGlmIHRoZXJlIHdhcyBvbmUsIHRoZSBhYm92ZSBzYXZlZCBpdCkuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBicmluZyBiYWNrIHdoYXRldmVyIHdhcyBwcmV2aW91c2x5IHNhdmVkIChpZiBhbnl0aGluZyksXG5cdFx0XHRcdC8vIGZhbGxpbmcgYmFjayB0byB0aGUgZW1wdHkgc3RyaW5nIGlmIG5vdGhpbmcgd2FzIHN0b3JlZC5cblx0XHRcdFx0aWYgKCB0aGlzLnNldEF0dHJpYnV0ZSApIHtcblx0XHRcdFx0XHR0aGlzLnNldEF0dHJpYnV0ZSggXCJjbGFzc1wiLFxuXHRcdFx0XHRcdFx0Y2xhc3NOYW1lIHx8IHZhbHVlID09PSBmYWxzZSA/XG5cdFx0XHRcdFx0XHRcIlwiIDpcblx0XHRcdFx0XHRcdGRhdGFQcml2LmdldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIgKSB8fCBcIlwiXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRoYXNDbGFzczogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBjbGFzc05hbWUsIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGNsYXNzTmFtZSA9IFwiIFwiICsgc2VsZWN0b3IgKyBcIiBcIjtcblx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0KCBcIiBcIiArIHN0cmlwQW5kQ29sbGFwc2UoIGdldENsYXNzKCBlbGVtICkgKSArIFwiIFwiICkuaW5kZXhPZiggY2xhc3NOYW1lICkgPiAtMSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZmFsc2U7XG5cdH1cbn0gKTtcblxuXG5cblxudmFyIHJyZXR1cm4gPSAvXFxyL2c7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0dmFsOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGhvb2tzLCByZXQsIHZhbHVlSXNGdW5jdGlvbixcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF07XG5cblx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHRob29rcyA9IGpRdWVyeS52YWxIb29rc1sgZWxlbS50eXBlIF0gfHxcblx0XHRcdFx0XHRqUXVlcnkudmFsSG9va3NbIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHRcdGlmICggaG9va3MgJiZcblx0XHRcdFx0XHRcImdldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdFx0KCByZXQgPSBob29rcy5nZXQoIGVsZW0sIFwidmFsdWVcIiApICkgIT09IHVuZGVmaW5lZFxuXHRcdFx0XHQpIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0ID0gZWxlbS52YWx1ZTtcblxuXHRcdFx0XHQvLyBIYW5kbGUgbW9zdCBjb21tb24gc3RyaW5nIGNhc2VzXG5cdFx0XHRcdGlmICggdHlwZW9mIHJldCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdFx0XHRyZXR1cm4gcmV0LnJlcGxhY2UoIHJyZXR1cm4sIFwiXCIgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEhhbmRsZSBjYXNlcyB3aGVyZSB2YWx1ZSBpcyBudWxsL3VuZGVmIG9yIG51bWJlclxuXHRcdFx0XHRyZXR1cm4gcmV0ID09IG51bGwgPyBcIlwiIDogcmV0O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFsdWVJc0Z1bmN0aW9uID0gaXNGdW5jdGlvbiggdmFsdWUgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0dmFyIHZhbDtcblxuXHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlICE9PSAxICkge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdmFsdWVJc0Z1bmN0aW9uICkge1xuXHRcdFx0XHR2YWwgPSB2YWx1ZS5jYWxsKCB0aGlzLCBpLCBqUXVlcnkoIHRoaXMgKS52YWwoKSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dmFsID0gdmFsdWU7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRyZWF0IG51bGwvdW5kZWZpbmVkIGFzIFwiXCI7IGNvbnZlcnQgbnVtYmVycyB0byBzdHJpbmdcblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHZhbCA9IFwiXCI7XG5cblx0XHRcdH0gZWxzZSBpZiAoIHR5cGVvZiB2YWwgPT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRcdHZhbCArPSBcIlwiO1xuXG5cdFx0XHR9IGVsc2UgaWYgKCBBcnJheS5pc0FycmF5KCB2YWwgKSApIHtcblx0XHRcdFx0dmFsID0galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlID09IG51bGwgPyBcIlwiIDogdmFsdWUgKyBcIlwiO1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyB0aGlzLnR5cGUgXSB8fCBqUXVlcnkudmFsSG9va3NbIHRoaXMubm9kZU5hbWUudG9Mb3dlckNhc2UoKSBdO1xuXG5cdFx0XHQvLyBJZiBzZXQgcmV0dXJucyB1bmRlZmluZWQsIGZhbGwgYmFjayB0byBub3JtYWwgc2V0dGluZ1xuXHRcdFx0aWYgKCAhaG9va3MgfHwgISggXCJzZXRcIiBpbiBob29rcyApIHx8IGhvb2tzLnNldCggdGhpcywgdmFsLCBcInZhbHVlXCIgKSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHR0aGlzLnZhbHVlID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdHZhbEhvb2tzOiB7XG5cdFx0b3B0aW9uOiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHRcdHZhciB2YWwgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBcInZhbHVlXCIgKTtcblx0XHRcdFx0cmV0dXJuIHZhbCAhPSBudWxsID9cblx0XHRcdFx0XHR2YWwgOlxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD0xMCAtIDExIG9ubHlcblx0XHRcdFx0XHQvLyBvcHRpb24udGV4dCB0aHJvd3MgZXhjZXB0aW9ucyAoIzE0Njg2LCAjMTQ4NTgpXG5cdFx0XHRcdFx0Ly8gU3RyaXAgYW5kIGNvbGxhcHNlIHdoaXRlc3BhY2Vcblx0XHRcdFx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnLyNzdHJpcC1hbmQtY29sbGFwc2Utd2hpdGVzcGFjZVxuXHRcdFx0XHRcdHN0cmlwQW5kQ29sbGFwc2UoIGpRdWVyeS50ZXh0KCBlbGVtICkgKTtcblx0XHRcdH1cblx0XHR9LFxuXHRcdHNlbGVjdDoge1xuXHRcdFx0Z2V0OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHZhbHVlLCBvcHRpb24sIGksXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHRpbmRleCA9IGVsZW0uc2VsZWN0ZWRJbmRleCxcblx0XHRcdFx0XHRvbmUgPSBlbGVtLnR5cGUgPT09IFwic2VsZWN0LW9uZVwiLFxuXHRcdFx0XHRcdHZhbHVlcyA9IG9uZSA/IG51bGwgOiBbXSxcblx0XHRcdFx0XHRtYXggPSBvbmUgPyBpbmRleCArIDEgOiBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHRpZiAoIGluZGV4IDwgMCApIHtcblx0XHRcdFx0XHRpID0gbWF4O1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0aSA9IG9uZSA/IGluZGV4IDogMDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIExvb3AgdGhyb3VnaCBhbGwgdGhlIHNlbGVjdGVkIG9wdGlvbnNcblx0XHRcdFx0Zm9yICggOyBpIDwgbWF4OyBpKysgKSB7XG5cdFx0XHRcdFx0b3B0aW9uID0gb3B0aW9uc1sgaSBdO1xuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHQvLyBJRTgtOSBkb2Vzbid0IHVwZGF0ZSBzZWxlY3RlZCBhZnRlciBmb3JtIHJlc2V0ICgjMjU1MSlcblx0XHRcdFx0XHRpZiAoICggb3B0aW9uLnNlbGVjdGVkIHx8IGkgPT09IGluZGV4ICkgJiZcblxuXHRcdFx0XHRcdFx0XHQvLyBEb24ndCByZXR1cm4gb3B0aW9ucyB0aGF0IGFyZSBkaXNhYmxlZCBvciBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHRcdFx0XHRcdCFvcHRpb24uZGlzYWJsZWQgJiZcblx0XHRcdFx0XHRcdFx0KCAhb3B0aW9uLnBhcmVudE5vZGUuZGlzYWJsZWQgfHxcblx0XHRcdFx0XHRcdFx0XHQhbm9kZU5hbWUoIG9wdGlvbi5wYXJlbnROb2RlLCBcIm9wdGdyb3VwXCIgKSApICkge1xuXG5cdFx0XHRcdFx0XHQvLyBHZXQgdGhlIHNwZWNpZmljIHZhbHVlIGZvciB0aGUgb3B0aW9uXG5cdFx0XHRcdFx0XHR2YWx1ZSA9IGpRdWVyeSggb3B0aW9uICkudmFsKCk7XG5cblx0XHRcdFx0XHRcdC8vIFdlIGRvbid0IG5lZWQgYW4gYXJyYXkgZm9yIG9uZSBzZWxlY3RzXG5cdFx0XHRcdFx0XHRpZiAoIG9uZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBNdWx0aS1TZWxlY3RzIHJldHVybiBhbiBhcnJheVxuXHRcdFx0XHRcdFx0dmFsdWVzLnB1c2goIHZhbHVlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH0sXG5cblx0XHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0XHR2YXIgb3B0aW9uU2V0LCBvcHRpb24sXG5cdFx0XHRcdFx0b3B0aW9ucyA9IGVsZW0ub3B0aW9ucyxcblx0XHRcdFx0XHR2YWx1ZXMgPSBqUXVlcnkubWFrZUFycmF5KCB2YWx1ZSApLFxuXHRcdFx0XHRcdGkgPSBvcHRpb25zLmxlbmd0aDtcblxuXHRcdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cblx0XHRcdFx0XHQvKiBlc2xpbnQtZGlzYWJsZSBuby1jb25kLWFzc2lnbiAqL1xuXG5cdFx0XHRcdFx0aWYgKCBvcHRpb24uc2VsZWN0ZWQgPVxuXHRcdFx0XHRcdFx0alF1ZXJ5LmluQXJyYXkoIGpRdWVyeS52YWxIb29rcy5vcHRpb24uZ2V0KCBvcHRpb24gKSwgdmFsdWVzICkgPiAtMVxuXHRcdFx0XHRcdCkge1xuXHRcdFx0XHRcdFx0b3B0aW9uU2V0ID0gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWNvbmQtYXNzaWduICovXG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBGb3JjZSBicm93c2VycyB0byBiZWhhdmUgY29uc2lzdGVudGx5IHdoZW4gbm9uLW1hdGNoaW5nIHZhbHVlIGlzIHNldFxuXHRcdFx0XHRpZiAoICFvcHRpb25TZXQgKSB7XG5cdFx0XHRcdFx0ZWxlbS5zZWxlY3RlZEluZGV4ID0gLTE7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIHZhbHVlcztcblx0XHRcdH1cblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gUmFkaW9zIGFuZCBjaGVja2JveGVzIGdldHRlci9zZXR0ZXJcbmpRdWVyeS5lYWNoKCBbIFwicmFkaW9cIiwgXCJjaGVja2JveFwiIF0sIGZ1bmN0aW9uKCkge1xuXHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXSA9IHtcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdFx0cmV0dXJuICggZWxlbS5jaGVja2VkID0galF1ZXJ5LmluQXJyYXkoIGpRdWVyeSggZWxlbSApLnZhbCgpLCB2YWx1ZSApID4gLTEgKTtcblx0XHRcdH1cblx0XHR9XG5cdH07XG5cdGlmICggIXN1cHBvcnQuY2hlY2tPbiApIHtcblx0XHRqUXVlcnkudmFsSG9va3NbIHRoaXMgXS5nZXQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtLmdldEF0dHJpYnV0ZSggXCJ2YWx1ZVwiICkgPT09IG51bGwgPyBcIm9uXCIgOiBlbGVtLnZhbHVlO1xuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUmV0dXJuIGpRdWVyeSBmb3IgYXR0cmlidXRlcy1vbmx5IGluY2x1c2lvblxuXG5cbnN1cHBvcnQuZm9jdXNpbiA9IFwib25mb2N1c2luXCIgaW4gd2luZG93O1xuXG5cbnZhciByZm9jdXNNb3JwaCA9IC9eKD86Zm9jdXNpbmZvY3VzfGZvY3Vzb3V0Ymx1cikkLyxcblx0c3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgPSBmdW5jdGlvbiggZSApIHtcblx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHR9O1xuXG5qUXVlcnkuZXh0ZW5kKCBqUXVlcnkuZXZlbnQsIHtcblxuXHR0cmlnZ2VyOiBmdW5jdGlvbiggZXZlbnQsIGRhdGEsIGVsZW0sIG9ubHlIYW5kbGVycyApIHtcblxuXHRcdHZhciBpLCBjdXIsIHRtcCwgYnViYmxlVHlwZSwgb250eXBlLCBoYW5kbGUsIHNwZWNpYWwsIGxhc3RFbGVtZW50LFxuXHRcdFx0ZXZlbnRQYXRoID0gWyBlbGVtIHx8IGRvY3VtZW50IF0sXG5cdFx0XHR0eXBlID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcInR5cGVcIiApID8gZXZlbnQudHlwZSA6IGV2ZW50LFxuXHRcdFx0bmFtZXNwYWNlcyA9IGhhc093bi5jYWxsKCBldmVudCwgXCJuYW1lc3BhY2VcIiApID8gZXZlbnQubmFtZXNwYWNlLnNwbGl0KCBcIi5cIiApIDogW107XG5cblx0XHRjdXIgPSBsYXN0RWxlbWVudCA9IHRtcCA9IGVsZW0gPSBlbGVtIHx8IGRvY3VtZW50O1xuXG5cdFx0Ly8gRG9uJ3QgZG8gZXZlbnRzIG9uIHRleHQgYW5kIGNvbW1lbnQgbm9kZXNcblx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDMgfHwgZWxlbS5ub2RlVHlwZSA9PT0gOCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBmb2N1cy9ibHVyIG1vcnBocyB0byBmb2N1c2luL291dDsgZW5zdXJlIHdlJ3JlIG5vdCBmaXJpbmcgdGhlbSByaWdodCBub3dcblx0XHRpZiAoIHJmb2N1c01vcnBoLnRlc3QoIHR5cGUgKyBqUXVlcnkuZXZlbnQudHJpZ2dlcmVkICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCB0eXBlLmluZGV4T2YoIFwiLlwiICkgPiAtMSApIHtcblxuXHRcdFx0Ly8gTmFtZXNwYWNlZCB0cmlnZ2VyOyBjcmVhdGUgYSByZWdleHAgdG8gbWF0Y2ggZXZlbnQgdHlwZSBpbiBoYW5kbGUoKVxuXHRcdFx0bmFtZXNwYWNlcyA9IHR5cGUuc3BsaXQoIFwiLlwiICk7XG5cdFx0XHR0eXBlID0gbmFtZXNwYWNlcy5zaGlmdCgpO1xuXHRcdFx0bmFtZXNwYWNlcy5zb3J0KCk7XG5cdFx0fVxuXHRcdG9udHlwZSA9IHR5cGUuaW5kZXhPZiggXCI6XCIgKSA8IDAgJiYgXCJvblwiICsgdHlwZTtcblxuXHRcdC8vIENhbGxlciBjYW4gcGFzcyBpbiBhIGpRdWVyeS5FdmVudCBvYmplY3QsIE9iamVjdCwgb3IganVzdCBhbiBldmVudCB0eXBlIHN0cmluZ1xuXHRcdGV2ZW50ID0gZXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0ZXZlbnQgOlxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCggdHlwZSwgdHlwZW9mIGV2ZW50ID09PSBcIm9iamVjdFwiICYmIGV2ZW50ICk7XG5cblx0XHQvLyBUcmlnZ2VyIGJpdG1hc2s6ICYgMSBmb3IgbmF0aXZlIGhhbmRsZXJzOyAmIDIgZm9yIGpRdWVyeSAoYWx3YXlzIHRydWUpXG5cdFx0ZXZlbnQuaXNUcmlnZ2VyID0gb25seUhhbmRsZXJzID8gMiA6IDM7XG5cdFx0ZXZlbnQubmFtZXNwYWNlID0gbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApO1xuXHRcdGV2ZW50LnJuYW1lc3BhY2UgPSBldmVudC5uYW1lc3BhY2UgP1xuXHRcdFx0bmV3IFJlZ0V4cCggXCIoXnxcXFxcLilcIiArIG5hbWVzcGFjZXMuam9pbiggXCJcXFxcLig/Oi4qXFxcXC58KVwiICkgKyBcIihcXFxcLnwkKVwiICkgOlxuXHRcdFx0bnVsbDtcblxuXHRcdC8vIENsZWFuIHVwIHRoZSBldmVudCBpbiBjYXNlIGl0IGlzIGJlaW5nIHJldXNlZFxuXHRcdGV2ZW50LnJlc3VsdCA9IHVuZGVmaW5lZDtcblx0XHRpZiAoICFldmVudC50YXJnZXQgKSB7XG5cdFx0XHRldmVudC50YXJnZXQgPSBlbGVtO1xuXHRcdH1cblxuXHRcdC8vIENsb25lIGFueSBpbmNvbWluZyBkYXRhIGFuZCBwcmVwZW5kIHRoZSBldmVudCwgY3JlYXRpbmcgdGhlIGhhbmRsZXIgYXJnIGxpc3Rcblx0XHRkYXRhID0gZGF0YSA9PSBudWxsID9cblx0XHRcdFsgZXZlbnQgXSA6XG5cdFx0XHRqUXVlcnkubWFrZUFycmF5KCBkYXRhLCBbIGV2ZW50IF0gKTtcblxuXHRcdC8vIEFsbG93IHNwZWNpYWwgZXZlbnRzIHRvIGRyYXcgb3V0c2lkZSB0aGUgbGluZXNcblx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRpZiAoICFvbmx5SGFuZGxlcnMgJiYgc3BlY2lhbC50cmlnZ2VyICYmIHNwZWNpYWwudHJpZ2dlci5hcHBseSggZWxlbSwgZGF0YSApID09PSBmYWxzZSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEZXRlcm1pbmUgZXZlbnQgcHJvcGFnYXRpb24gcGF0aCBpbiBhZHZhbmNlLCBwZXIgVzNDIGV2ZW50cyBzcGVjICgjOTk1MSlcblx0XHQvLyBCdWJibGUgdXAgdG8gZG9jdW1lbnQsIHRoZW4gdG8gd2luZG93OyB3YXRjaCBmb3IgYSBnbG9iYWwgb3duZXJEb2N1bWVudCB2YXIgKCM5NzI0KVxuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhc3BlY2lhbC5ub0J1YmJsZSAmJiAhaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0YnViYmxlVHlwZSA9IHNwZWNpYWwuZGVsZWdhdGVUeXBlIHx8IHR5cGU7XG5cdFx0XHRpZiAoICFyZm9jdXNNb3JwaC50ZXN0KCBidWJibGVUeXBlICsgdHlwZSApICkge1xuXHRcdFx0XHRjdXIgPSBjdXIucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGZvciAoIDsgY3VyOyBjdXIgPSBjdXIucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIGN1ciApO1xuXHRcdFx0XHR0bXAgPSBjdXI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE9ubHkgYWRkIHdpbmRvdyBpZiB3ZSBnb3QgdG8gZG9jdW1lbnQgKGUuZy4sIG5vdCBwbGFpbiBvYmogb3IgZGV0YWNoZWQgRE9NKVxuXHRcdFx0aWYgKCB0bXAgPT09ICggZWxlbS5vd25lckRvY3VtZW50IHx8IGRvY3VtZW50ICkgKSB7XG5cdFx0XHRcdGV2ZW50UGF0aC5wdXNoKCB0bXAuZGVmYXVsdFZpZXcgfHwgdG1wLnBhcmVudFdpbmRvdyB8fCB3aW5kb3cgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBGaXJlIGhhbmRsZXJzIG9uIHRoZSBldmVudCBwYXRoXG5cdFx0aSA9IDA7XG5cdFx0d2hpbGUgKCAoIGN1ciA9IGV2ZW50UGF0aFsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGxhc3RFbGVtZW50ID0gY3VyO1xuXHRcdFx0ZXZlbnQudHlwZSA9IGkgPiAxID9cblx0XHRcdFx0YnViYmxlVHlwZSA6XG5cdFx0XHRcdHNwZWNpYWwuYmluZFR5cGUgfHwgdHlwZTtcblxuXHRcdFx0Ly8galF1ZXJ5IGhhbmRsZXJcblx0XHRcdGhhbmRsZSA9ICggZGF0YVByaXYuZ2V0KCBjdXIsIFwiZXZlbnRzXCIgKSB8fCB7fSApWyBldmVudC50eXBlIF0gJiZcblx0XHRcdFx0ZGF0YVByaXYuZ2V0KCBjdXIsIFwiaGFuZGxlXCIgKTtcblx0XHRcdGlmICggaGFuZGxlICkge1xuXHRcdFx0XHRoYW5kbGUuYXBwbHkoIGN1ciwgZGF0YSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBOYXRpdmUgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gb250eXBlICYmIGN1clsgb250eXBlIF07XG5cdFx0XHRpZiAoIGhhbmRsZSAmJiBoYW5kbGUuYXBwbHkgJiYgYWNjZXB0RGF0YSggY3VyICkgKSB7XG5cdFx0XHRcdGV2ZW50LnJlc3VsdCA9IGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHRcdGV2ZW50LnR5cGUgPSB0eXBlO1xuXG5cdFx0Ly8gSWYgbm9ib2R5IHByZXZlbnRlZCB0aGUgZGVmYXVsdCBhY3Rpb24sIGRvIGl0IG5vd1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiAhZXZlbnQuaXNEZWZhdWx0UHJldmVudGVkKCkgKSB7XG5cblx0XHRcdGlmICggKCAhc3BlY2lhbC5fZGVmYXVsdCB8fFxuXHRcdFx0XHRzcGVjaWFsLl9kZWZhdWx0LmFwcGx5KCBldmVudFBhdGgucG9wKCksIGRhdGEgKSA9PT0gZmFsc2UgKSAmJlxuXHRcdFx0XHRhY2NlcHREYXRhKCBlbGVtICkgKSB7XG5cblx0XHRcdFx0Ly8gQ2FsbCBhIG5hdGl2ZSBET00gbWV0aG9kIG9uIHRoZSB0YXJnZXQgd2l0aCB0aGUgc2FtZSBuYW1lIGFzIHRoZSBldmVudC5cblx0XHRcdFx0Ly8gRG9uJ3QgZG8gZGVmYXVsdCBhY3Rpb25zIG9uIHdpbmRvdywgdGhhdCdzIHdoZXJlIGdsb2JhbCB2YXJpYWJsZXMgYmUgKCM2MTcwKVxuXHRcdFx0XHRpZiAoIG9udHlwZSAmJiBpc0Z1bmN0aW9uKCBlbGVtWyB0eXBlIF0gKSAmJiAhaXNXaW5kb3coIGVsZW0gKSApIHtcblxuXHRcdFx0XHRcdC8vIERvbid0IHJlLXRyaWdnZXIgYW4gb25GT08gZXZlbnQgd2hlbiB3ZSBjYWxsIGl0cyBGT08oKSBtZXRob2Rcblx0XHRcdFx0XHR0bXAgPSBlbGVtWyBvbnR5cGUgXTtcblxuXHRcdFx0XHRcdGlmICggdG1wICkge1xuXHRcdFx0XHRcdFx0ZWxlbVsgb250eXBlIF0gPSBudWxsO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZXZlbnQgcmUtdHJpZ2dlcmluZyBvZiB0aGUgc2FtZSBldmVudCwgc2luY2Ugd2UgYWxyZWFkeSBidWJibGVkIGl0IGFib3ZlXG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXJlZCA9IHR5cGU7XG5cblx0XHRcdFx0XHRpZiAoIGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRcdFx0XHRsYXN0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCB0eXBlLCBzdG9wUHJvcGFnYXRpb25DYWxsYmFjayApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGVsZW1bIHR5cGUgXSgpO1xuXG5cdFx0XHRcdFx0aWYgKCBldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0XHRcdFx0bGFzdEVsZW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lciggdHlwZSwgc3RvcFByb3BhZ2F0aW9uQ2FsbGJhY2sgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IHRtcDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gZXZlbnQucmVzdWx0O1xuXHR9LFxuXG5cdC8vIFBpZ2d5YmFjayBvbiBhIGRvbm9yIGV2ZW50IHRvIHNpbXVsYXRlIGEgZGlmZmVyZW50IG9uZVxuXHQvLyBVc2VkIG9ubHkgZm9yIGBmb2N1cyhpbiB8IG91dClgIGV2ZW50c1xuXHRzaW11bGF0ZTogZnVuY3Rpb24oIHR5cGUsIGVsZW0sIGV2ZW50ICkge1xuXHRcdHZhciBlID0galF1ZXJ5LmV4dGVuZChcblx0XHRcdG5ldyBqUXVlcnkuRXZlbnQoKSxcblx0XHRcdGV2ZW50LFxuXHRcdFx0e1xuXHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRpc1NpbXVsYXRlZDogdHJ1ZVxuXHRcdFx0fVxuXHRcdCk7XG5cblx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggZSwgbnVsbCwgZWxlbSApO1xuXHR9XG5cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIHRoaXMgKTtcblx0XHR9ICk7XG5cdH0sXG5cdHRyaWdnZXJIYW5kbGVyOiBmdW5jdGlvbiggdHlwZSwgZGF0YSApIHtcblx0XHR2YXIgZWxlbSA9IHRoaXNbIDAgXTtcblx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4galF1ZXJ5LmV2ZW50LnRyaWdnZXIoIHR5cGUsIGRhdGEsIGVsZW0sIHRydWUgKTtcblx0XHR9XG5cdH1cbn0gKTtcblxuXG4vLyBTdXBwb3J0OiBGaXJlZm94IDw9NDRcbi8vIEZpcmVmb3ggZG9lc24ndCBoYXZlIGZvY3VzKGluIHwgb3V0KSBldmVudHNcbi8vIFJlbGF0ZWQgdGlja2V0IC0gaHR0cHM6Ly9idWd6aWxsYS5tb3ppbGxhLm9yZy9zaG93X2J1Zy5jZ2k/aWQ9Njg3Nzg3XG4vL1xuLy8gU3VwcG9ydDogQ2hyb21lIDw9NDggLSA0OSwgU2FmYXJpIDw9OS4wIC0gOS4xXG4vLyBmb2N1cyhpbiB8IG91dCkgZXZlbnRzIGZpcmUgYWZ0ZXIgZm9jdXMgJiBibHVyIGV2ZW50cyxcbi8vIHdoaWNoIGlzIHNwZWMgdmlvbGF0aW9uIC0gaHR0cDovL3d3dy53My5vcmcvVFIvRE9NLUxldmVsLTMtRXZlbnRzLyNldmVudHMtZm9jdXNldmVudC1ldmVudC1vcmRlclxuLy8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD00NDk4NTdcbmlmICggIXN1cHBvcnQuZm9jdXNpbiApIHtcblx0alF1ZXJ5LmVhY2goIHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblxuXHRcdC8vIEF0dGFjaCBhIHNpbmdsZSBjYXB0dXJpbmcgaGFuZGxlciBvbiB0aGUgZG9jdW1lbnQgd2hpbGUgc29tZW9uZSB3YW50cyBmb2N1c2luL2ZvY3Vzb3V0XG5cdFx0dmFyIGhhbmRsZXIgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQuc2ltdWxhdGUoIGZpeCwgZXZlbnQudGFyZ2V0LCBqUXVlcnkuZXZlbnQuZml4KCBldmVudCApICk7XG5cdFx0fTtcblxuXHRcdGpRdWVyeS5ldmVudC5zcGVjaWFsWyBmaXggXSA9IHtcblx0XHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGRvYyA9IHRoaXMub3duZXJEb2N1bWVudCB8fCB0aGlzLFxuXHRcdFx0XHRcdGF0dGFjaGVzID0gZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5hZGRFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgKCBhdHRhY2hlcyB8fCAwICkgKyAxICk7XG5cdFx0XHR9LFxuXHRcdFx0dGVhcmRvd246IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICkgLSAxO1xuXG5cdFx0XHRcdGlmICggIWF0dGFjaGVzICkge1xuXHRcdFx0XHRcdGRvYy5yZW1vdmVFdmVudExpc3RlbmVyKCBvcmlnLCBoYW5kbGVyLCB0cnVlICk7XG5cdFx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBkb2MsIGZpeCApO1xuXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGF0YVByaXYuYWNjZXNzKCBkb2MsIGZpeCwgYXR0YWNoZXMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH0gKTtcbn1cbnZhciBsb2NhdGlvbiA9IHdpbmRvdy5sb2NhdGlvbjtcblxudmFyIG5vbmNlID0gRGF0ZS5ub3coKTtcblxudmFyIHJxdWVyeSA9ICggL1xcPy8gKTtcblxuXG5cbi8vIENyb3NzLWJyb3dzZXIgeG1sIHBhcnNpbmdcbmpRdWVyeS5wYXJzZVhNTCA9IGZ1bmN0aW9uKCBkYXRhICkge1xuXHR2YXIgeG1sO1xuXHRpZiAoICFkYXRhIHx8IHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBudWxsO1xuXHR9XG5cblx0Ly8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHlcblx0Ly8gSUUgdGhyb3dzIG9uIHBhcnNlRnJvbVN0cmluZyB3aXRoIGludmFsaWQgaW5wdXQuXG5cdHRyeSB7XG5cdFx0eG1sID0gKCBuZXcgd2luZG93LkRPTVBhcnNlcigpICkucGFyc2VGcm9tU3RyaW5nKCBkYXRhLCBcInRleHQveG1sXCIgKTtcblx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0eG1sID0gdW5kZWZpbmVkO1xuXHR9XG5cblx0aWYgKCAheG1sIHx8IHhtbC5nZXRFbGVtZW50c0J5VGFnTmFtZSggXCJwYXJzZXJlcnJvclwiICkubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5lcnJvciggXCJJbnZhbGlkIFhNTDogXCIgKyBkYXRhICk7XG5cdH1cblx0cmV0dXJuIHhtbDtcbn07XG5cblxudmFyXG5cdHJicmFja2V0ID0gL1xcW1xcXSQvLFxuXHRyQ1JMRiA9IC9cXHI/XFxuL2csXG5cdHJzdWJtaXR0ZXJUeXBlcyA9IC9eKD86c3VibWl0fGJ1dHRvbnxpbWFnZXxyZXNldHxmaWxlKSQvaSxcblx0cnN1Ym1pdHRhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8a2V5Z2VuKS9pO1xuXG5mdW5jdGlvbiBidWlsZFBhcmFtcyggcHJlZml4LCBvYmosIHRyYWRpdGlvbmFsLCBhZGQgKSB7XG5cdHZhciBuYW1lO1xuXG5cdGlmICggQXJyYXkuaXNBcnJheSggb2JqICkgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgYXJyYXkgaXRlbS5cblx0XHRqUXVlcnkuZWFjaCggb2JqLCBmdW5jdGlvbiggaSwgdiApIHtcblx0XHRcdGlmICggdHJhZGl0aW9uYWwgfHwgcmJyYWNrZXQudGVzdCggcHJlZml4ICkgKSB7XG5cblx0XHRcdFx0Ly8gVHJlYXQgZWFjaCBhcnJheSBpdGVtIGFzIGEgc2NhbGFyLlxuXHRcdFx0XHRhZGQoIHByZWZpeCwgdiApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdC8vIEl0ZW0gaXMgbm9uLXNjYWxhciAoYXJyYXkgb3Igb2JqZWN0KSwgZW5jb2RlIGl0cyBudW1lcmljIGluZGV4LlxuXHRcdFx0XHRidWlsZFBhcmFtcyhcblx0XHRcdFx0XHRwcmVmaXggKyBcIltcIiArICggdHlwZW9mIHYgPT09IFwib2JqZWN0XCIgJiYgdiAhPSBudWxsID8gaSA6IFwiXCIgKSArIFwiXVwiLFxuXHRcdFx0XHRcdHYsXG5cdFx0XHRcdFx0dHJhZGl0aW9uYWwsXG5cdFx0XHRcdFx0YWRkXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXG5cdH0gZWxzZSBpZiAoICF0cmFkaXRpb25hbCAmJiB0b1R5cGUoIG9iaiApID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gU2VyaWFsaXplIG9iamVjdCBpdGVtLlxuXHRcdGZvciAoIG5hbWUgaW4gb2JqICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCArIFwiW1wiICsgbmFtZSArIFwiXVwiLCBvYmpbIG5hbWUgXSwgdHJhZGl0aW9uYWwsIGFkZCApO1xuXHRcdH1cblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gU2VyaWFsaXplIHNjYWxhciBpdGVtLlxuXHRcdGFkZCggcHJlZml4LCBvYmogKTtcblx0fVxufVxuXG4vLyBTZXJpYWxpemUgYW4gYXJyYXkgb2YgZm9ybSBlbGVtZW50cyBvciBhIHNldCBvZlxuLy8ga2V5L3ZhbHVlcyBpbnRvIGEgcXVlcnkgc3RyaW5nXG5qUXVlcnkucGFyYW0gPSBmdW5jdGlvbiggYSwgdHJhZGl0aW9uYWwgKSB7XG5cdHZhciBwcmVmaXgsXG5cdFx0cyA9IFtdLFxuXHRcdGFkZCA9IGZ1bmN0aW9uKCBrZXksIHZhbHVlT3JGdW5jdGlvbiApIHtcblxuXHRcdFx0Ly8gSWYgdmFsdWUgaXMgYSBmdW5jdGlvbiwgaW52b2tlIGl0IGFuZCB1c2UgaXRzIHJldHVybiB2YWx1ZVxuXHRcdFx0dmFyIHZhbHVlID0gaXNGdW5jdGlvbiggdmFsdWVPckZ1bmN0aW9uICkgP1xuXHRcdFx0XHR2YWx1ZU9yRnVuY3Rpb24oKSA6XG5cdFx0XHRcdHZhbHVlT3JGdW5jdGlvbjtcblxuXHRcdFx0c1sgcy5sZW5ndGggXSA9IGVuY29kZVVSSUNvbXBvbmVudCgga2V5ICkgKyBcIj1cIiArXG5cdFx0XHRcdGVuY29kZVVSSUNvbXBvbmVudCggdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSApO1xuXHRcdH07XG5cblx0aWYgKCBhID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIFwiXCI7XG5cdH1cblxuXHQvLyBJZiBhbiBhcnJheSB3YXMgcGFzc2VkIGluLCBhc3N1bWUgdGhhdCBpdCBpcyBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzLlxuXHRpZiAoIEFycmF5LmlzQXJyYXkoIGEgKSB8fCAoIGEuanF1ZXJ5ICYmICFqUXVlcnkuaXNQbGFpbk9iamVjdCggYSApICkgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgdGhlIGZvcm0gZWxlbWVudHNcblx0XHRqUXVlcnkuZWFjaCggYSwgZnVuY3Rpb24oKSB7XG5cdFx0XHRhZGQoIHRoaXMubmFtZSwgdGhpcy52YWx1ZSApO1xuXHRcdH0gKTtcblxuXHR9IGVsc2Uge1xuXG5cdFx0Ly8gSWYgdHJhZGl0aW9uYWwsIGVuY29kZSB0aGUgXCJvbGRcIiB3YXkgKHRoZSB3YXkgMS4zLjIgb3Igb2xkZXJcblx0XHQvLyBkaWQgaXQpLCBvdGhlcndpc2UgZW5jb2RlIHBhcmFtcyByZWN1cnNpdmVseS5cblx0XHRmb3IgKCBwcmVmaXggaW4gYSApIHtcblx0XHRcdGJ1aWxkUGFyYW1zKCBwcmVmaXgsIGFbIHByZWZpeCBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSByZXN1bHRpbmcgc2VyaWFsaXphdGlvblxuXHRyZXR1cm4gcy5qb2luKCBcIiZcIiApO1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRzZXJpYWxpemU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnkucGFyYW0oIHRoaXMuc2VyaWFsaXplQXJyYXkoKSApO1xuXHR9LFxuXHRzZXJpYWxpemVBcnJheTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gQ2FuIGFkZCBwcm9wSG9vayBmb3IgXCJlbGVtZW50c1wiIHRvIGZpbHRlciBvciBhZGQgZm9ybSBlbGVtZW50c1xuXHRcdFx0dmFyIGVsZW1lbnRzID0galF1ZXJ5LnByb3AoIHRoaXMsIFwiZWxlbWVudHNcIiApO1xuXHRcdFx0cmV0dXJuIGVsZW1lbnRzID8galF1ZXJ5Lm1ha2VBcnJheSggZWxlbWVudHMgKSA6IHRoaXM7XG5cdFx0fSApXG5cdFx0LmZpbHRlciggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgdHlwZSA9IHRoaXMudHlwZTtcblxuXHRcdFx0Ly8gVXNlIC5pcyggXCI6ZGlzYWJsZWRcIiApIHNvIHRoYXQgZmllbGRzZXRbZGlzYWJsZWRdIHdvcmtzXG5cdFx0XHRyZXR1cm4gdGhpcy5uYW1lICYmICFqUXVlcnkoIHRoaXMgKS5pcyggXCI6ZGlzYWJsZWRcIiApICYmXG5cdFx0XHRcdHJzdWJtaXR0YWJsZS50ZXN0KCB0aGlzLm5vZGVOYW1lICkgJiYgIXJzdWJtaXR0ZXJUeXBlcy50ZXN0KCB0eXBlICkgJiZcblx0XHRcdFx0KCB0aGlzLmNoZWNrZWQgfHwgIXJjaGVja2FibGVUeXBlLnRlc3QoIHR5cGUgKSApO1xuXHRcdH0gKVxuXHRcdC5tYXAoIGZ1bmN0aW9uKCBpLCBlbGVtICkge1xuXHRcdFx0dmFyIHZhbCA9IGpRdWVyeSggdGhpcyApLnZhbCgpO1xuXG5cdFx0XHRpZiAoIHZhbCA9PSBudWxsICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWwgKSApIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5tYXAoIHZhbCwgZnVuY3Rpb24oIHZhbCApIHtcblx0XHRcdFx0XHRyZXR1cm4geyBuYW1lOiBlbGVtLm5hbWUsIHZhbHVlOiB2YWwucmVwbGFjZSggckNSTEYsIFwiXFxyXFxuXCIgKSB9O1xuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0fSApLmdldCgpO1xuXHR9XG59ICk7XG5cblxudmFyXG5cdHIyMCA9IC8lMjAvZyxcblx0cmhhc2ggPSAvIy4qJC8sXG5cdHJhbnRpQ2FjaGUgPSAvKFs/Jl0pXz1bXiZdKi8sXG5cdHJoZWFkZXJzID0gL14oLio/KTpbIFxcdF0qKFteXFxyXFxuXSopJC9tZyxcblxuXHQvLyAjNzY1MywgIzgxMjUsICM4MTUyOiBsb2NhbCBwcm90b2NvbCBkZXRlY3Rpb25cblx0cmxvY2FsUHJvdG9jb2wgPSAvXig/OmFib3V0fGFwcHxhcHAtc3RvcmFnZXwuKy1leHRlbnNpb258ZmlsZXxyZXN8d2lkZ2V0KTokLyxcblx0cm5vQ29udGVudCA9IC9eKD86R0VUfEhFQUQpJC8sXG5cdHJwcm90b2NvbCA9IC9eXFwvXFwvLyxcblxuXHQvKiBQcmVmaWx0ZXJzXG5cdCAqIDEpIFRoZXkgYXJlIHVzZWZ1bCB0byBpbnRyb2R1Y2UgY3VzdG9tIGRhdGFUeXBlcyAoc2VlIGFqYXgvanNvbnAuanMgZm9yIGFuIGV4YW1wbGUpXG5cdCAqIDIpIFRoZXNlIGFyZSBjYWxsZWQ6XG5cdCAqICAgIC0gQkVGT1JFIGFza2luZyBmb3IgYSB0cmFuc3BvcnRcblx0ICogICAgLSBBRlRFUiBwYXJhbSBzZXJpYWxpemF0aW9uIChzLmRhdGEgaXMgYSBzdHJpbmcgaWYgcy5wcm9jZXNzRGF0YSBpcyB0cnVlKVxuXHQgKiAzKSBrZXkgaXMgdGhlIGRhdGFUeXBlXG5cdCAqIDQpIHRoZSBjYXRjaGFsbCBzeW1ib2wgXCIqXCIgY2FuIGJlIHVzZWRcblx0ICogNSkgZXhlY3V0aW9uIHdpbGwgc3RhcnQgd2l0aCB0cmFuc3BvcnQgZGF0YVR5cGUgYW5kIFRIRU4gY29udGludWUgZG93biB0byBcIipcIiBpZiBuZWVkZWRcblx0ICovXG5cdHByZWZpbHRlcnMgPSB7fSxcblxuXHQvKiBUcmFuc3BvcnRzIGJpbmRpbmdzXG5cdCAqIDEpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogMikgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiAzKSBzZWxlY3Rpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBnbyB0byBcIipcIiBpZiBuZWVkZWRcblx0ICovXG5cdHRyYW5zcG9ydHMgPSB7fSxcblxuXHQvLyBBdm9pZCBjb21tZW50LXByb2xvZyBjaGFyIHNlcXVlbmNlICgjMTAwOTgpOyBtdXN0IGFwcGVhc2UgbGludCBhbmQgZXZhZGUgY29tcHJlc3Npb25cblx0YWxsVHlwZXMgPSBcIiovXCIuY29uY2F0KCBcIipcIiApLFxuXG5cdC8vIEFuY2hvciB0YWcgZm9yIHBhcnNpbmcgdGhlIGRvY3VtZW50IG9yaWdpblxuXHRvcmlnaW5BbmNob3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImFcIiApO1xuXHRvcmlnaW5BbmNob3IuaHJlZiA9IGxvY2F0aW9uLmhyZWY7XG5cbi8vIEJhc2UgXCJjb25zdHJ1Y3RvclwiIGZvciBqUXVlcnkuYWpheFByZWZpbHRlciBhbmQgalF1ZXJ5LmFqYXhUcmFuc3BvcnRcbmZ1bmN0aW9uIGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlICkge1xuXG5cdC8vIGRhdGFUeXBlRXhwcmVzc2lvbiBpcyBvcHRpb25hbCBhbmQgZGVmYXVsdHMgdG8gXCIqXCJcblx0cmV0dXJuIGZ1bmN0aW9uKCBkYXRhVHlwZUV4cHJlc3Npb24sIGZ1bmMgKSB7XG5cblx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZUV4cHJlc3Npb24gIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRmdW5jID0gZGF0YVR5cGVFeHByZXNzaW9uO1xuXHRcdFx0ZGF0YVR5cGVFeHByZXNzaW9uID0gXCIqXCI7XG5cdFx0fVxuXG5cdFx0dmFyIGRhdGFUeXBlLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRkYXRhVHlwZXMgPSBkYXRhVHlwZUV4cHJlc3Npb24udG9Mb3dlckNhc2UoKS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdO1xuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBmdW5jICkgKSB7XG5cblx0XHRcdC8vIEZvciBlYWNoIGRhdGFUeXBlIGluIHRoZSBkYXRhVHlwZUV4cHJlc3Npb25cblx0XHRcdHdoaWxlICggKCBkYXRhVHlwZSA9IGRhdGFUeXBlc1sgaSsrIF0gKSApIHtcblxuXHRcdFx0XHQvLyBQcmVwZW5kIGlmIHJlcXVlc3RlZFxuXHRcdFx0XHRpZiAoIGRhdGFUeXBlWyAwIF0gPT09IFwiK1wiICkge1xuXHRcdFx0XHRcdGRhdGFUeXBlID0gZGF0YVR5cGUuc2xpY2UoIDEgKSB8fCBcIipcIjtcblx0XHRcdFx0XHQoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnVuc2hpZnQoIGZ1bmMgKTtcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UgYXBwZW5kXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0KCBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gPSBzdHJ1Y3R1cmVbIGRhdGFUeXBlIF0gfHwgW10gKS5wdXNoKCBmdW5jICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH07XG59XG5cbi8vIEJhc2UgaW5zcGVjdGlvbiBmdW5jdGlvbiBmb3IgcHJlZmlsdGVycyBhbmQgdHJhbnNwb3J0c1xuZnVuY3Rpb24gaW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHN0cnVjdHVyZSwgb3B0aW9ucywgb3JpZ2luYWxPcHRpb25zLCBqcVhIUiApIHtcblxuXHR2YXIgaW5zcGVjdGVkID0ge30sXG5cdFx0c2Vla2luZ1RyYW5zcG9ydCA9ICggc3RydWN0dXJlID09PSB0cmFuc3BvcnRzICk7XG5cblx0ZnVuY3Rpb24gaW5zcGVjdCggZGF0YVR5cGUgKSB7XG5cdFx0dmFyIHNlbGVjdGVkO1xuXHRcdGluc3BlY3RlZFsgZGF0YVR5cGUgXSA9IHRydWU7XG5cdFx0alF1ZXJ5LmVhY2goIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSwgZnVuY3Rpb24oIF8sIHByZWZpbHRlck9yRmFjdG9yeSApIHtcblx0XHRcdHZhciBkYXRhVHlwZU9yVHJhbnNwb3J0ID0gcHJlZmlsdGVyT3JGYWN0b3J5KCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICk7XG5cdFx0XHRpZiAoIHR5cGVvZiBkYXRhVHlwZU9yVHJhbnNwb3J0ID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCFzZWVraW5nVHJhbnNwb3J0ICYmICFpbnNwZWN0ZWRbIGRhdGFUeXBlT3JUcmFuc3BvcnQgXSApIHtcblxuXHRcdFx0XHRvcHRpb25zLmRhdGFUeXBlcy51bnNoaWZ0KCBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHRcdGluc3BlY3QoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fSBlbHNlIGlmICggc2Vla2luZ1RyYW5zcG9ydCApIHtcblx0XHRcdFx0cmV0dXJuICEoIHNlbGVjdGVkID0gZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0XHRyZXR1cm4gc2VsZWN0ZWQ7XG5cdH1cblxuXHRyZXR1cm4gaW5zcGVjdCggb3B0aW9ucy5kYXRhVHlwZXNbIDAgXSApIHx8ICFpbnNwZWN0ZWRbIFwiKlwiIF0gJiYgaW5zcGVjdCggXCIqXCIgKTtcbn1cblxuLy8gQSBzcGVjaWFsIGV4dGVuZCBmb3IgYWpheCBvcHRpb25zXG4vLyB0aGF0IHRha2VzIFwiZmxhdFwiIG9wdGlvbnMgKG5vdCB0byBiZSBkZWVwIGV4dGVuZGVkKVxuLy8gRml4ZXMgIzk4ODdcbmZ1bmN0aW9uIGFqYXhFeHRlbmQoIHRhcmdldCwgc3JjICkge1xuXHR2YXIga2V5LCBkZWVwLFxuXHRcdGZsYXRPcHRpb25zID0galF1ZXJ5LmFqYXhTZXR0aW5ncy5mbGF0T3B0aW9ucyB8fCB7fTtcblxuXHRmb3IgKCBrZXkgaW4gc3JjICkge1xuXHRcdGlmICggc3JjWyBrZXkgXSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0KCBmbGF0T3B0aW9uc1sga2V5IF0gPyB0YXJnZXQgOiAoIGRlZXAgfHwgKCBkZWVwID0ge30gKSApIClbIGtleSBdID0gc3JjWyBrZXkgXTtcblx0XHR9XG5cdH1cblx0aWYgKCBkZWVwICkge1xuXHRcdGpRdWVyeS5leHRlbmQoIHRydWUsIHRhcmdldCwgZGVlcCApO1xuXHR9XG5cblx0cmV0dXJuIHRhcmdldDtcbn1cblxuLyogSGFuZGxlcyByZXNwb25zZXMgdG8gYW4gYWpheCByZXF1ZXN0OlxuICogLSBmaW5kcyB0aGUgcmlnaHQgZGF0YVR5cGUgKG1lZGlhdGVzIGJldHdlZW4gY29udGVudC10eXBlIGFuZCBleHBlY3RlZCBkYXRhVHlwZSlcbiAqIC0gcmV0dXJucyB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuICovXG5mdW5jdGlvbiBhamF4SGFuZGxlUmVzcG9uc2VzKCBzLCBqcVhIUiwgcmVzcG9uc2VzICkge1xuXG5cdHZhciBjdCwgdHlwZSwgZmluYWxEYXRhVHlwZSwgZmlyc3REYXRhVHlwZSxcblx0XHRjb250ZW50cyA9IHMuY29udGVudHMsXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXM7XG5cblx0Ly8gUmVtb3ZlIGF1dG8gZGF0YVR5cGUgYW5kIGdldCBjb250ZW50LXR5cGUgaW4gdGhlIHByb2Nlc3Ncblx0d2hpbGUgKCBkYXRhVHlwZXNbIDAgXSA9PT0gXCIqXCIgKSB7XG5cdFx0ZGF0YVR5cGVzLnNoaWZ0KCk7XG5cdFx0aWYgKCBjdCA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0Y3QgPSBzLm1pbWVUeXBlIHx8IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiICk7XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgaWYgd2UncmUgZGVhbGluZyB3aXRoIGEga25vd24gY29udGVudC10eXBlXG5cdGlmICggY3QgKSB7XG5cdFx0Zm9yICggdHlwZSBpbiBjb250ZW50cyApIHtcblx0XHRcdGlmICggY29udGVudHNbIHR5cGUgXSAmJiBjb250ZW50c1sgdHlwZSBdLnRlc3QoIGN0ICkgKSB7XG5cdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0eXBlICk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIENoZWNrIHRvIHNlZSBpZiB3ZSBoYXZlIGEgcmVzcG9uc2UgZm9yIHRoZSBleHBlY3RlZCBkYXRhVHlwZVxuXHRpZiAoIGRhdGFUeXBlc1sgMCBdIGluIHJlc3BvbnNlcyApIHtcblx0XHRmaW5hbERhdGFUeXBlID0gZGF0YVR5cGVzWyAwIF07XG5cdH0gZWxzZSB7XG5cblx0XHQvLyBUcnkgY29udmVydGlibGUgZGF0YVR5cGVzXG5cdFx0Zm9yICggdHlwZSBpbiByZXNwb25zZXMgKSB7XG5cdFx0XHRpZiAoICFkYXRhVHlwZXNbIDAgXSB8fCBzLmNvbnZlcnRlcnNbIHR5cGUgKyBcIiBcIiArIGRhdGFUeXBlc1sgMCBdIF0gKSB7XG5cdFx0XHRcdGZpbmFsRGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggIWZpcnN0RGF0YVR5cGUgKSB7XG5cdFx0XHRcdGZpcnN0RGF0YVR5cGUgPSB0eXBlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIE9yIGp1c3QgdXNlIGZpcnN0IG9uZVxuXHRcdGZpbmFsRGF0YVR5cGUgPSBmaW5hbERhdGFUeXBlIHx8IGZpcnN0RGF0YVR5cGU7XG5cdH1cblxuXHQvLyBJZiB3ZSBmb3VuZCBhIGRhdGFUeXBlXG5cdC8vIFdlIGFkZCB0aGUgZGF0YVR5cGUgdG8gdGhlIGxpc3QgaWYgbmVlZGVkXG5cdC8vIGFuZCByZXR1cm4gdGhlIGNvcnJlc3BvbmRpbmcgcmVzcG9uc2Vcblx0aWYgKCBmaW5hbERhdGFUeXBlICkge1xuXHRcdGlmICggZmluYWxEYXRhVHlwZSAhPT0gZGF0YVR5cGVzWyAwIF0gKSB7XG5cdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggZmluYWxEYXRhVHlwZSApO1xuXHRcdH1cblx0XHRyZXR1cm4gcmVzcG9uc2VzWyBmaW5hbERhdGFUeXBlIF07XG5cdH1cbn1cblxuLyogQ2hhaW4gY29udmVyc2lvbnMgZ2l2ZW4gdGhlIHJlcXVlc3QgYW5kIHRoZSBvcmlnaW5hbCByZXNwb25zZVxuICogQWxzbyBzZXRzIHRoZSByZXNwb25zZVhYWCBmaWVsZHMgb24gdGhlIGpxWEhSIGluc3RhbmNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApIHtcblx0dmFyIGNvbnYyLCBjdXJyZW50LCBjb252LCB0bXAsIHByZXYsXG5cdFx0Y29udmVydGVycyA9IHt9LFxuXG5cdFx0Ly8gV29yayB3aXRoIGEgY29weSBvZiBkYXRhVHlwZXMgaW4gY2FzZSB3ZSBuZWVkIHRvIG1vZGlmeSBpdCBmb3IgY29udmVyc2lvblxuXHRcdGRhdGFUeXBlcyA9IHMuZGF0YVR5cGVzLnNsaWNlKCk7XG5cblx0Ly8gQ3JlYXRlIGNvbnZlcnRlcnMgbWFwIHdpdGggbG93ZXJjYXNlZCBrZXlzXG5cdGlmICggZGF0YVR5cGVzWyAxIF0gKSB7XG5cdFx0Zm9yICggY29udiBpbiBzLmNvbnZlcnRlcnMgKSB7XG5cdFx0XHRjb252ZXJ0ZXJzWyBjb252LnRvTG93ZXJDYXNlKCkgXSA9IHMuY29udmVydGVyc1sgY29udiBdO1xuXHRcdH1cblx0fVxuXG5cdGN1cnJlbnQgPSBkYXRhVHlwZXMuc2hpZnQoKTtcblxuXHQvLyBDb252ZXJ0IHRvIGVhY2ggc2VxdWVudGlhbCBkYXRhVHlwZVxuXHR3aGlsZSAoIGN1cnJlbnQgKSB7XG5cblx0XHRpZiAoIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSApIHtcblx0XHRcdGpxWEhSWyBzLnJlc3BvbnNlRmllbGRzWyBjdXJyZW50IF0gXSA9IHJlc3BvbnNlO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHRoZSBkYXRhRmlsdGVyIGlmIHByb3ZpZGVkXG5cdFx0aWYgKCAhcHJldiAmJiBpc1N1Y2Nlc3MgJiYgcy5kYXRhRmlsdGVyICkge1xuXHRcdFx0cmVzcG9uc2UgPSBzLmRhdGFGaWx0ZXIoIHJlc3BvbnNlLCBzLmRhdGFUeXBlICk7XG5cdFx0fVxuXG5cdFx0cHJldiA9IGN1cnJlbnQ7XG5cdFx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdFx0aWYgKCBjdXJyZW50ICkge1xuXG5cdFx0XHQvLyBUaGVyZSdzIG9ubHkgd29yayB0byBkbyBpZiBjdXJyZW50IGRhdGFUeXBlIGlzIG5vbi1hdXRvXG5cdFx0XHRpZiAoIGN1cnJlbnQgPT09IFwiKlwiICkge1xuXG5cdFx0XHRcdGN1cnJlbnQgPSBwcmV2O1xuXG5cdFx0XHQvLyBDb252ZXJ0IHJlc3BvbnNlIGlmIHByZXYgZGF0YVR5cGUgaXMgbm9uLWF1dG8gYW5kIGRpZmZlcnMgZnJvbSBjdXJyZW50XG5cdFx0XHR9IGVsc2UgaWYgKCBwcmV2ICE9PSBcIipcIiAmJiBwcmV2ICE9PSBjdXJyZW50ICkge1xuXG5cdFx0XHRcdC8vIFNlZWsgYSBkaXJlY3QgY29udmVydGVyXG5cdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyBjdXJyZW50IF0gfHwgY29udmVydGVyc1sgXCIqIFwiICsgY3VycmVudCBdO1xuXG5cdFx0XHRcdC8vIElmIG5vbmUgZm91bmQsIHNlZWsgYSBwYWlyXG5cdFx0XHRcdGlmICggIWNvbnYgKSB7XG5cdFx0XHRcdFx0Zm9yICggY29udjIgaW4gY29udmVydGVycyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSWYgY29udjIgb3V0cHV0cyBjdXJyZW50XG5cdFx0XHRcdFx0XHR0bXAgPSBjb252Mi5zcGxpdCggXCIgXCIgKTtcblx0XHRcdFx0XHRcdGlmICggdG1wWyAxIF0gPT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gSWYgcHJldiBjYW4gYmUgY29udmVydGVkIHRvIGFjY2VwdGVkIGlucHV0XG5cdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBwcmV2ICsgXCIgXCIgKyB0bXBbIDAgXSBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0Y29udmVydGVyc1sgXCIqIFwiICsgdG1wWyAwIF0gXTtcblx0XHRcdFx0XHRcdFx0aWYgKCBjb252ICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gQ29uZGVuc2UgZXF1aXZhbGVuY2UgY29udmVydGVyc1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY29udiA9PT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnYgPSBjb252ZXJ0ZXJzWyBjb252MiBdO1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBpbnNlcnQgdGhlIGludGVybWVkaWF0ZSBkYXRhVHlwZVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAoIGNvbnZlcnRlcnNbIGNvbnYyIF0gIT09IHRydWUgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjdXJyZW50ID0gdG1wWyAwIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRkYXRhVHlwZXMudW5zaGlmdCggdG1wWyAxIF0gKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBBcHBseSBjb252ZXJ0ZXIgKGlmIG5vdCBhbiBlcXVpdmFsZW5jZSlcblx0XHRcdFx0aWYgKCBjb252ICE9PSB0cnVlICkge1xuXG5cdFx0XHRcdFx0Ly8gVW5sZXNzIGVycm9ycyBhcmUgYWxsb3dlZCB0byBidWJibGUsIGNhdGNoIGFuZCByZXR1cm4gdGhlbVxuXHRcdFx0XHRcdGlmICggY29udiAmJiBzLnRocm93cyApIHtcblx0XHRcdFx0XHRcdHJlc3BvbnNlID0gY29udiggcmVzcG9uc2UgKTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiB7XG5cdFx0XHRcdFx0XHRcdFx0c3RhdGU6IFwicGFyc2VyZXJyb3JcIixcblx0XHRcdFx0XHRcdFx0XHRlcnJvcjogY29udiA/IGUgOiBcIk5vIGNvbnZlcnNpb24gZnJvbSBcIiArIHByZXYgKyBcIiB0byBcIiArIGN1cnJlbnRcblx0XHRcdFx0XHRcdFx0fTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRyZXR1cm4geyBzdGF0ZTogXCJzdWNjZXNzXCIsIGRhdGE6IHJlc3BvbnNlIH07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBDb3VudGVyIGZvciBob2xkaW5nIHRoZSBudW1iZXIgb2YgYWN0aXZlIHF1ZXJpZXNcblx0YWN0aXZlOiAwLFxuXG5cdC8vIExhc3QtTW9kaWZpZWQgaGVhZGVyIGNhY2hlIGZvciBuZXh0IHJlcXVlc3Rcblx0bGFzdE1vZGlmaWVkOiB7fSxcblx0ZXRhZzoge30sXG5cblx0YWpheFNldHRpbmdzOiB7XG5cdFx0dXJsOiBsb2NhdGlvbi5ocmVmLFxuXHRcdHR5cGU6IFwiR0VUXCIsXG5cdFx0aXNMb2NhbDogcmxvY2FsUHJvdG9jb2wudGVzdCggbG9jYXRpb24ucHJvdG9jb2wgKSxcblx0XHRnbG9iYWw6IHRydWUsXG5cdFx0cHJvY2Vzc0RhdGE6IHRydWUsXG5cdFx0YXN5bmM6IHRydWUsXG5cdFx0Y29udGVudFR5cGU6IFwiYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkOyBjaGFyc2V0PVVURi04XCIsXG5cblx0XHQvKlxuXHRcdHRpbWVvdXQ6IDAsXG5cdFx0ZGF0YTogbnVsbCxcblx0XHRkYXRhVHlwZTogbnVsbCxcblx0XHR1c2VybmFtZTogbnVsbCxcblx0XHRwYXNzd29yZDogbnVsbCxcblx0XHRjYWNoZTogbnVsbCxcblx0XHR0aHJvd3M6IGZhbHNlLFxuXHRcdHRyYWRpdGlvbmFsOiBmYWxzZSxcblx0XHRoZWFkZXJzOiB7fSxcblx0XHQqL1xuXG5cdFx0YWNjZXB0czoge1xuXHRcdFx0XCIqXCI6IGFsbFR5cGVzLFxuXHRcdFx0dGV4dDogXCJ0ZXh0L3BsYWluXCIsXG5cdFx0XHRodG1sOiBcInRleHQvaHRtbFwiLFxuXHRcdFx0eG1sOiBcImFwcGxpY2F0aW9uL3htbCwgdGV4dC94bWxcIixcblx0XHRcdGpzb246IFwiYXBwbGljYXRpb24vanNvbiwgdGV4dC9qYXZhc2NyaXB0XCJcblx0XHR9LFxuXG5cdFx0Y29udGVudHM6IHtcblx0XHRcdHhtbDogL1xcYnhtbFxcYi8sXG5cdFx0XHRodG1sOiAvXFxiaHRtbC8sXG5cdFx0XHRqc29uOiAvXFxianNvblxcYi9cblx0XHR9LFxuXG5cdFx0cmVzcG9uc2VGaWVsZHM6IHtcblx0XHRcdHhtbDogXCJyZXNwb25zZVhNTFwiLFxuXHRcdFx0dGV4dDogXCJyZXNwb25zZVRleHRcIixcblx0XHRcdGpzb246IFwicmVzcG9uc2VKU09OXCJcblx0XHR9LFxuXG5cdFx0Ly8gRGF0YSBjb252ZXJ0ZXJzXG5cdFx0Ly8gS2V5cyBzZXBhcmF0ZSBzb3VyY2UgKG9yIGNhdGNoYWxsIFwiKlwiKSBhbmQgZGVzdGluYXRpb24gdHlwZXMgd2l0aCBhIHNpbmdsZSBzcGFjZVxuXHRcdGNvbnZlcnRlcnM6IHtcblxuXHRcdFx0Ly8gQ29udmVydCBhbnl0aGluZyB0byB0ZXh0XG5cdFx0XHRcIiogdGV4dFwiOiBTdHJpbmcsXG5cblx0XHRcdC8vIFRleHQgdG8gaHRtbCAodHJ1ZSA9IG5vIHRyYW5zZm9ybWF0aW9uKVxuXHRcdFx0XCJ0ZXh0IGh0bWxcIjogdHJ1ZSxcblxuXHRcdFx0Ly8gRXZhbHVhdGUgdGV4dCBhcyBhIGpzb24gZXhwcmVzc2lvblxuXHRcdFx0XCJ0ZXh0IGpzb25cIjogSlNPTi5wYXJzZSxcblxuXHRcdFx0Ly8gUGFyc2UgdGV4dCBhcyB4bWxcblx0XHRcdFwidGV4dCB4bWxcIjogalF1ZXJ5LnBhcnNlWE1MXG5cdFx0fSxcblxuXHRcdC8vIEZvciBvcHRpb25zIHRoYXQgc2hvdWxkbid0IGJlIGRlZXAgZXh0ZW5kZWQ6XG5cdFx0Ly8geW91IGNhbiBhZGQgeW91ciBvd24gY3VzdG9tIG9wdGlvbnMgaGVyZSBpZlxuXHRcdC8vIGFuZCB3aGVuIHlvdSBjcmVhdGUgb25lIHRoYXQgc2hvdWxkbid0IGJlXG5cdFx0Ly8gZGVlcCBleHRlbmRlZCAoc2VlIGFqYXhFeHRlbmQpXG5cdFx0ZmxhdE9wdGlvbnM6IHtcblx0XHRcdHVybDogdHJ1ZSxcblx0XHRcdGNvbnRleHQ6IHRydWVcblx0XHR9XG5cdH0sXG5cblx0Ly8gQ3JlYXRlcyBhIGZ1bGwgZmxlZGdlZCBzZXR0aW5ncyBvYmplY3QgaW50byB0YXJnZXRcblx0Ly8gd2l0aCBib3RoIGFqYXhTZXR0aW5ncyBhbmQgc2V0dGluZ3MgZmllbGRzLlxuXHQvLyBJZiB0YXJnZXQgaXMgb21pdHRlZCwgd3JpdGVzIGludG8gYWpheFNldHRpbmdzLlxuXHRhamF4U2V0dXA6IGZ1bmN0aW9uKCB0YXJnZXQsIHNldHRpbmdzICkge1xuXHRcdHJldHVybiBzZXR0aW5ncyA/XG5cblx0XHRcdC8vIEJ1aWxkaW5nIGEgc2V0dGluZ3Mgb2JqZWN0XG5cdFx0XHRhamF4RXh0ZW5kKCBhamF4RXh0ZW5kKCB0YXJnZXQsIGpRdWVyeS5hamF4U2V0dGluZ3MgKSwgc2V0dGluZ3MgKSA6XG5cblx0XHRcdC8vIEV4dGVuZGluZyBhamF4U2V0dGluZ3Ncblx0XHRcdGFqYXhFeHRlbmQoIGpRdWVyeS5hamF4U2V0dGluZ3MsIHRhcmdldCApO1xuXHR9LFxuXG5cdGFqYXhQcmVmaWx0ZXI6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycyApLFxuXHRhamF4VHJhbnNwb3J0OiBhZGRUb1ByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHRyYW5zcG9ydHMgKSxcblxuXHQvLyBNYWluIG1ldGhvZFxuXHRhamF4OiBmdW5jdGlvbiggdXJsLCBvcHRpb25zICkge1xuXG5cdFx0Ly8gSWYgdXJsIGlzIGFuIG9iamVjdCwgc2ltdWxhdGUgcHJlLTEuNSBzaWduYXR1cmVcblx0XHRpZiAoIHR5cGVvZiB1cmwgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0XHRvcHRpb25zID0gdXJsO1xuXHRcdFx0dXJsID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIEZvcmNlIG9wdGlvbnMgdG8gYmUgYW4gb2JqZWN0XG5cdFx0b3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cblx0XHR2YXIgdHJhbnNwb3J0LFxuXG5cdFx0XHQvLyBVUkwgd2l0aG91dCBhbnRpLWNhY2hlIHBhcmFtXG5cdFx0XHRjYWNoZVVSTCxcblxuXHRcdFx0Ly8gUmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nLFxuXHRcdFx0cmVzcG9uc2VIZWFkZXJzLFxuXG5cdFx0XHQvLyB0aW1lb3V0IGhhbmRsZVxuXHRcdFx0dGltZW91dFRpbWVyLFxuXG5cdFx0XHQvLyBVcmwgY2xlYW51cCB2YXJcblx0XHRcdHVybEFuY2hvcixcblxuXHRcdFx0Ly8gUmVxdWVzdCBzdGF0ZSAoYmVjb21lcyBmYWxzZSB1cG9uIHNlbmQgYW5kIHRydWUgdXBvbiBjb21wbGV0aW9uKVxuXHRcdFx0Y29tcGxldGVkLFxuXG5cdFx0XHQvLyBUbyBrbm93IGlmIGdsb2JhbCBldmVudHMgYXJlIHRvIGJlIGRpc3BhdGNoZWRcblx0XHRcdGZpcmVHbG9iYWxzLFxuXG5cdFx0XHQvLyBMb29wIHZhcmlhYmxlXG5cdFx0XHRpLFxuXG5cdFx0XHQvLyB1bmNhY2hlZCBwYXJ0IG9mIHRoZSB1cmxcblx0XHRcdHVuY2FjaGVkLFxuXG5cdFx0XHQvLyBDcmVhdGUgdGhlIGZpbmFsIG9wdGlvbnMgb2JqZWN0XG5cdFx0XHRzID0galF1ZXJ5LmFqYXhTZXR1cCgge30sIG9wdGlvbnMgKSxcblxuXHRcdFx0Ly8gQ2FsbGJhY2tzIGNvbnRleHRcblx0XHRcdGNhbGxiYWNrQ29udGV4dCA9IHMuY29udGV4dCB8fCBzLFxuXG5cdFx0XHQvLyBDb250ZXh0IGZvciBnbG9iYWwgZXZlbnRzIGlzIGNhbGxiYWNrQ29udGV4dCBpZiBpdCBpcyBhIERPTSBub2RlIG9yIGpRdWVyeSBjb2xsZWN0aW9uXG5cdFx0XHRnbG9iYWxFdmVudENvbnRleHQgPSBzLmNvbnRleHQgJiZcblx0XHRcdFx0KCBjYWxsYmFja0NvbnRleHQubm9kZVR5cGUgfHwgY2FsbGJhY2tDb250ZXh0LmpxdWVyeSApID9cblx0XHRcdFx0XHRqUXVlcnkoIGNhbGxiYWNrQ29udGV4dCApIDpcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQsXG5cblx0XHRcdC8vIERlZmVycmVkc1xuXHRcdFx0ZGVmZXJyZWQgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblx0XHRcdGNvbXBsZXRlRGVmZXJyZWQgPSBqUXVlcnkuQ2FsbGJhY2tzKCBcIm9uY2UgbWVtb3J5XCIgKSxcblxuXHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdHN0YXR1c0NvZGUgPSBzLnN0YXR1c0NvZGUgfHwge30sXG5cblx0XHRcdC8vIEhlYWRlcnMgKHRoZXkgYXJlIHNlbnQgYWxsIGF0IG9uY2UpXG5cdFx0XHRyZXF1ZXN0SGVhZGVycyA9IHt9LFxuXHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lcyA9IHt9LFxuXG5cdFx0XHQvLyBEZWZhdWx0IGFib3J0IG1lc3NhZ2Vcblx0XHRcdHN0ckFib3J0ID0gXCJjYW5jZWxlZFwiLFxuXG5cdFx0XHQvLyBGYWtlIHhoclxuXHRcdFx0anFYSFIgPSB7XG5cdFx0XHRcdHJlYWR5U3RhdGU6IDAsXG5cblx0XHRcdFx0Ly8gQnVpbGRzIGhlYWRlcnMgaGFzaHRhYmxlIGlmIG5lZWRlZFxuXHRcdFx0XHRnZXRSZXNwb25zZUhlYWRlcjogZnVuY3Rpb24oIGtleSApIHtcblx0XHRcdFx0XHR2YXIgbWF0Y2g7XG5cdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdFx0XHRpZiAoICFyZXNwb25zZUhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVycyA9IHt9O1xuXHRcdFx0XHRcdFx0XHR3aGlsZSAoICggbWF0Y2ggPSByaGVhZGVycy5leGVjKCByZXNwb25zZUhlYWRlcnNTdHJpbmcgKSApICkge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3BvbnNlSGVhZGVyc1sgbWF0Y2hbIDEgXS50b0xvd2VyQ2FzZSgpICsgXCIgXCIgXSA9XG5cdFx0XHRcdFx0XHRcdFx0XHQoIHJlc3BvbnNlSGVhZGVyc1sgbWF0Y2hbIDEgXS50b0xvd2VyQ2FzZSgpICsgXCIgXCIgXSB8fCBbXSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5jb25jYXQoIG1hdGNoWyAyIF0gKTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0bWF0Y2ggPSByZXNwb25zZUhlYWRlcnNbIGtleS50b0xvd2VyQ2FzZSgpICsgXCIgXCIgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoID09IG51bGwgPyBudWxsIDogbWF0Y2guam9pbiggXCIsIFwiICk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gUmF3IHN0cmluZ1xuXHRcdFx0XHRnZXRBbGxSZXNwb25zZUhlYWRlcnM6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHJldHVybiBjb21wbGV0ZWQgPyByZXNwb25zZUhlYWRlcnNTdHJpbmcgOiBudWxsO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhY2hlcyB0aGUgaGVhZGVyXG5cdFx0XHRcdHNldFJlcXVlc3RIZWFkZXI6IGZ1bmN0aW9uKCBuYW1lLCB2YWx1ZSApIHtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0bmFtZSA9IHJlcXVlc3RIZWFkZXJzTmFtZXNbIG5hbWUudG9Mb3dlckNhc2UoKSBdID1cblx0XHRcdFx0XHRcdFx0cmVxdWVzdEhlYWRlcnNOYW1lc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gfHwgbmFtZTtcblx0XHRcdFx0XHRcdHJlcXVlc3RIZWFkZXJzWyBuYW1lIF0gPSB2YWx1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGVzIHJlc3BvbnNlIGNvbnRlbnQtdHlwZSBoZWFkZXJcblx0XHRcdFx0b3ZlcnJpZGVNaW1lVHlwZTogZnVuY3Rpb24oIHR5cGUgKSB7XG5cdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdHMubWltZVR5cGUgPSB0eXBlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0XHRzdGF0dXNDb2RlOiBmdW5jdGlvbiggbWFwICkge1xuXHRcdFx0XHRcdHZhciBjb2RlO1xuXHRcdFx0XHRcdGlmICggbWFwICkge1xuXHRcdFx0XHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gRXhlY3V0ZSB0aGUgYXBwcm9wcmlhdGUgY2FsbGJhY2tzXG5cdFx0XHRcdFx0XHRcdGpxWEhSLmFsd2F5cyggbWFwWyBqcVhIUi5zdGF0dXMgXSApO1xuXHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBMYXp5LWFkZCB0aGUgbmV3IGNhbGxiYWNrcyBpbiBhIHdheSB0aGF0IHByZXNlcnZlcyBvbGQgb25lc1xuXHRcdFx0XHRcdFx0XHRmb3IgKCBjb2RlIGluIG1hcCApIHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0dXNDb2RlWyBjb2RlIF0gPSBbIHN0YXR1c0NvZGVbIGNvZGUgXSwgbWFwWyBjb2RlIF0gXTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBDYW5jZWwgdGhlIHJlcXVlc3Rcblx0XHRcdFx0YWJvcnQ6IGZ1bmN0aW9uKCBzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHZhciBmaW5hbFRleHQgPSBzdGF0dXNUZXh0IHx8IHN0ckFib3J0O1xuXHRcdFx0XHRcdGlmICggdHJhbnNwb3J0ICkge1xuXHRcdFx0XHRcdFx0dHJhbnNwb3J0LmFib3J0KCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZG9uZSggMCwgZmluYWxUZXh0ICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblx0XHRcdH07XG5cblx0XHQvLyBBdHRhY2ggZGVmZXJyZWRzXG5cdFx0ZGVmZXJyZWQucHJvbWlzZSgganFYSFIgKTtcblxuXHRcdC8vIEFkZCBwcm90b2NvbCBpZiBub3QgcHJvdmlkZWQgKHByZWZpbHRlcnMgbWlnaHQgZXhwZWN0IGl0KVxuXHRcdC8vIEhhbmRsZSBmYWxzeSB1cmwgaW4gdGhlIHNldHRpbmdzIG9iamVjdCAoIzEwMDkzOiBjb25zaXN0ZW5jeSB3aXRoIG9sZCBzaWduYXR1cmUpXG5cdFx0Ly8gV2UgYWxzbyB1c2UgdGhlIHVybCBwYXJhbWV0ZXIgaWYgYXZhaWxhYmxlXG5cdFx0cy51cmwgPSAoICggdXJsIHx8IHMudXJsIHx8IGxvY2F0aW9uLmhyZWYgKSArIFwiXCIgKVxuXHRcdFx0LnJlcGxhY2UoIHJwcm90b2NvbCwgbG9jYXRpb24ucHJvdG9jb2wgKyBcIi8vXCIgKTtcblxuXHRcdC8vIEFsaWFzIG1ldGhvZCBvcHRpb24gdG8gdHlwZSBhcyBwZXIgdGlja2V0ICMxMjAwNFxuXHRcdHMudHlwZSA9IG9wdGlvbnMubWV0aG9kIHx8IG9wdGlvbnMudHlwZSB8fCBzLm1ldGhvZCB8fCBzLnR5cGU7XG5cblx0XHQvLyBFeHRyYWN0IGRhdGFUeXBlcyBsaXN0XG5cdFx0cy5kYXRhVHlwZXMgPSAoIHMuZGF0YVR5cGUgfHwgXCIqXCIgKS50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgWyBcIlwiIF07XG5cblx0XHQvLyBBIGNyb3NzLWRvbWFpbiByZXF1ZXN0IGlzIGluIG9yZGVyIHdoZW4gdGhlIG9yaWdpbiBkb2Vzbid0IG1hdGNoIHRoZSBjdXJyZW50IG9yaWdpbi5cblx0XHRpZiAoIHMuY3Jvc3NEb21haW4gPT0gbnVsbCApIHtcblx0XHRcdHVybEFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OCAtIDExLCBFZGdlIDEyIC0gMTVcblx0XHRcdC8vIElFIHRocm93cyBleGNlcHRpb24gb24gYWNjZXNzaW5nIHRoZSBocmVmIHByb3BlcnR5IGlmIHVybCBpcyBtYWxmb3JtZWQsXG5cdFx0XHQvLyBlLmcuIGh0dHA6Ly9leGFtcGxlLmNvbTo4MHgvXG5cdFx0XHR0cnkge1xuXHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHMudXJsO1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OCAtIDExIG9ubHlcblx0XHRcdFx0Ly8gQW5jaG9yJ3MgaG9zdCBwcm9wZXJ0eSBpc24ndCBjb3JyZWN0bHkgc2V0IHdoZW4gcy51cmwgaXMgcmVsYXRpdmVcblx0XHRcdFx0dXJsQW5jaG9yLmhyZWYgPSB1cmxBbmNob3IuaHJlZjtcblx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IG9yaWdpbkFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIG9yaWdpbkFuY2hvci5ob3N0ICE9PVxuXHRcdFx0XHRcdHVybEFuY2hvci5wcm90b2NvbCArIFwiLy9cIiArIHVybEFuY2hvci5ob3N0O1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0Ly8gSWYgdGhlcmUgaXMgYW4gZXJyb3IgcGFyc2luZyB0aGUgVVJMLCBhc3N1bWUgaXQgaXMgY3Jvc3NEb21haW4sXG5cdFx0XHRcdC8vIGl0IGNhbiBiZSByZWplY3RlZCBieSB0aGUgdHJhbnNwb3J0IGlmIGl0IGlzIGludmFsaWRcblx0XHRcdFx0cy5jcm9zc0RvbWFpbiA9IHRydWU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBkYXRhIGlmIG5vdCBhbHJlYWR5IGEgc3RyaW5nXG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJiB0eXBlb2Ygcy5kYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdFx0cy5kYXRhID0galF1ZXJ5LnBhcmFtKCBzLmRhdGEsIHMudHJhZGl0aW9uYWwgKTtcblx0XHR9XG5cblx0XHQvLyBBcHBseSBwcmVmaWx0ZXJzXG5cdFx0aW5zcGVjdFByZWZpbHRlcnNPclRyYW5zcG9ydHMoIHByZWZpbHRlcnMsIHMsIG9wdGlvbnMsIGpxWEhSICk7XG5cblx0XHQvLyBJZiByZXF1ZXN0IHdhcyBhYm9ydGVkIGluc2lkZSBhIHByZWZpbHRlciwgc3RvcCB0aGVyZVxuXHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdH1cblxuXHRcdC8vIFdlIGNhbiBmaXJlIGdsb2JhbCBldmVudHMgYXMgb2Ygbm93IGlmIGFza2VkIHRvXG5cdFx0Ly8gRG9uJ3QgZmlyZSBldmVudHMgaWYgalF1ZXJ5LmV2ZW50IGlzIHVuZGVmaW5lZCBpbiBhbiBBTUQtdXNhZ2Ugc2NlbmFyaW8gKCMxNTExOClcblx0XHRmaXJlR2xvYmFscyA9IGpRdWVyeS5ldmVudCAmJiBzLmdsb2JhbDtcblxuXHRcdC8vIFdhdGNoIGZvciBhIG5ldyBzZXQgb2YgcmVxdWVzdHNcblx0XHRpZiAoIGZpcmVHbG9iYWxzICYmIGpRdWVyeS5hY3RpdmUrKyA9PT0gMCApIHtcblx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBcImFqYXhTdGFydFwiICk7XG5cdFx0fVxuXG5cdFx0Ly8gVXBwZXJjYXNlIHRoZSB0eXBlXG5cdFx0cy50eXBlID0gcy50eXBlLnRvVXBwZXJDYXNlKCk7XG5cblx0XHQvLyBEZXRlcm1pbmUgaWYgcmVxdWVzdCBoYXMgY29udGVudFxuXHRcdHMuaGFzQ29udGVudCA9ICFybm9Db250ZW50LnRlc3QoIHMudHlwZSApO1xuXG5cdFx0Ly8gU2F2ZSB0aGUgVVJMIGluIGNhc2Ugd2UncmUgdG95aW5nIHdpdGggdGhlIElmLU1vZGlmaWVkLVNpbmNlXG5cdFx0Ly8gYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyIGxhdGVyIG9uXG5cdFx0Ly8gUmVtb3ZlIGhhc2ggdG8gc2ltcGxpZnkgdXJsIG1hbmlwdWxhdGlvblxuXHRcdGNhY2hlVVJMID0gcy51cmwucmVwbGFjZSggcmhhc2gsIFwiXCIgKTtcblxuXHRcdC8vIE1vcmUgb3B0aW9ucyBoYW5kbGluZyBmb3IgcmVxdWVzdHMgd2l0aCBubyBjb250ZW50XG5cdFx0aWYgKCAhcy5oYXNDb250ZW50ICkge1xuXG5cdFx0XHQvLyBSZW1lbWJlciB0aGUgaGFzaCBzbyB3ZSBjYW4gcHV0IGl0IGJhY2tcblx0XHRcdHVuY2FjaGVkID0gcy51cmwuc2xpY2UoIGNhY2hlVVJMLmxlbmd0aCApO1xuXG5cdFx0XHQvLyBJZiBkYXRhIGlzIGF2YWlsYWJsZSBhbmQgc2hvdWxkIGJlIHByb2Nlc3NlZCwgYXBwZW5kIGRhdGEgdG8gdXJsXG5cdFx0XHRpZiAoIHMuZGF0YSAmJiAoIHMucHJvY2Vzc0RhdGEgfHwgdHlwZW9mIHMuZGF0YSA9PT0gXCJzdHJpbmdcIiApICkge1xuXHRcdFx0XHRjYWNoZVVSTCArPSAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gXCImXCIgOiBcIj9cIiApICsgcy5kYXRhO1xuXG5cdFx0XHRcdC8vICM5NjgyOiByZW1vdmUgZGF0YSBzbyB0aGF0IGl0J3Mgbm90IHVzZWQgaW4gYW4gZXZlbnR1YWwgcmV0cnlcblx0XHRcdFx0ZGVsZXRlIHMuZGF0YTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWRkIG9yIHVwZGF0ZSBhbnRpLWNhY2hlIHBhcmFtIGlmIG5lZWRlZFxuXHRcdFx0aWYgKCBzLmNhY2hlID09PSBmYWxzZSApIHtcblx0XHRcdFx0Y2FjaGVVUkwgPSBjYWNoZVVSTC5yZXBsYWNlKCByYW50aUNhY2hlLCBcIiQxXCIgKTtcblx0XHRcdFx0dW5jYWNoZWQgPSAoIHJxdWVyeS50ZXN0KCBjYWNoZVVSTCApID8gXCImXCIgOiBcIj9cIiApICsgXCJfPVwiICsgKCBub25jZSsrICkgKyB1bmNhY2hlZDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUHV0IGhhc2ggYW5kIGFudGktY2FjaGUgb24gdGhlIFVSTCB0aGF0IHdpbGwgYmUgcmVxdWVzdGVkIChnaC0xNzMyKVxuXHRcdFx0cy51cmwgPSBjYWNoZVVSTCArIHVuY2FjaGVkO1xuXG5cdFx0Ly8gQ2hhbmdlICclMjAnIHRvICcrJyBpZiB0aGlzIGlzIGVuY29kZWQgZm9ybSBib2R5IGNvbnRlbnQgKGdoLTI2NTgpXG5cdFx0fSBlbHNlIGlmICggcy5kYXRhICYmIHMucHJvY2Vzc0RhdGEgJiZcblx0XHRcdCggcy5jb250ZW50VHlwZSB8fCBcIlwiICkuaW5kZXhPZiggXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiApID09PSAwICkge1xuXHRcdFx0cy5kYXRhID0gcy5kYXRhLnJlcGxhY2UoIHIyMCwgXCIrXCIgKTtcblx0XHR9XG5cblx0XHQvLyBTZXQgdGhlIElmLU1vZGlmaWVkLVNpbmNlIGFuZC9vciBJZi1Ob25lLU1hdGNoIGhlYWRlciwgaWYgaW4gaWZNb2RpZmllZCBtb2RlLlxuXHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0aWYgKCBqUXVlcnkubGFzdE1vZGlmaWVkWyBjYWNoZVVSTCBdICkge1xuXHRcdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIklmLU1vZGlmaWVkLVNpbmNlXCIsIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKTtcblx0XHRcdH1cblx0XHRcdGlmICggalF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTm9uZS1NYXRjaFwiLCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgY29ycmVjdCBoZWFkZXIsIGlmIGRhdGEgaXMgYmVpbmcgc2VudFxuXHRcdGlmICggcy5kYXRhICYmIHMuaGFzQ29udGVudCAmJiBzLmNvbnRlbnRUeXBlICE9PSBmYWxzZSB8fCBvcHRpb25zLmNvbnRlbnRUeXBlICkge1xuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJDb250ZW50LVR5cGVcIiwgcy5jb250ZW50VHlwZSApO1xuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgQWNjZXB0cyBoZWFkZXIgZm9yIHRoZSBzZXJ2ZXIsIGRlcGVuZGluZyBvbiB0aGUgZGF0YVR5cGVcblx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKFxuXHRcdFx0XCJBY2NlcHRcIixcblx0XHRcdHMuZGF0YVR5cGVzWyAwIF0gJiYgcy5hY2NlcHRzWyBzLmRhdGFUeXBlc1sgMCBdIF0gP1xuXHRcdFx0XHRzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSArXG5cdFx0XHRcdFx0KCBzLmRhdGFUeXBlc1sgMCBdICE9PSBcIipcIiA/IFwiLCBcIiArIGFsbFR5cGVzICsgXCI7IHE9MC4wMVwiIDogXCJcIiApIDpcblx0XHRcdFx0cy5hY2NlcHRzWyBcIipcIiBdXG5cdFx0KTtcblxuXHRcdC8vIENoZWNrIGZvciBoZWFkZXJzIG9wdGlvblxuXHRcdGZvciAoIGkgaW4gcy5oZWFkZXJzICkge1xuXHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggaSwgcy5oZWFkZXJzWyBpIF0gKTtcblx0XHR9XG5cblx0XHQvLyBBbGxvdyBjdXN0b20gaGVhZGVycy9taW1ldHlwZXMgYW5kIGVhcmx5IGFib3J0XG5cdFx0aWYgKCBzLmJlZm9yZVNlbmQgJiZcblx0XHRcdCggcy5iZWZvcmVTZW5kLmNhbGwoIGNhbGxiYWNrQ29udGV4dCwganFYSFIsIHMgKSA9PT0gZmFsc2UgfHwgY29tcGxldGVkICkgKSB7XG5cblx0XHRcdC8vIEFib3J0IGlmIG5vdCBkb25lIGFscmVhZHkgYW5kIHJldHVyblxuXHRcdFx0cmV0dXJuIGpxWEhSLmFib3J0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gQWJvcnRpbmcgaXMgbm8gbG9uZ2VyIGEgY2FuY2VsbGF0aW9uXG5cdFx0c3RyQWJvcnQgPSBcImFib3J0XCI7XG5cblx0XHQvLyBJbnN0YWxsIGNhbGxiYWNrcyBvbiBkZWZlcnJlZHNcblx0XHRjb21wbGV0ZURlZmVycmVkLmFkZCggcy5jb21wbGV0ZSApO1xuXHRcdGpxWEhSLmRvbmUoIHMuc3VjY2VzcyApO1xuXHRcdGpxWEhSLmZhaWwoIHMuZXJyb3IgKTtcblxuXHRcdC8vIEdldCB0cmFuc3BvcnRcblx0XHR0cmFuc3BvcnQgPSBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIG5vIHRyYW5zcG9ydCwgd2UgYXV0by1hYm9ydFxuXHRcdGlmICggIXRyYW5zcG9ydCApIHtcblx0XHRcdGRvbmUoIC0xLCBcIk5vIFRyYW5zcG9ydFwiICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSAxO1xuXG5cdFx0XHQvLyBTZW5kIGdsb2JhbCBldmVudFxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheFNlbmRcIiwgWyBqcVhIUiwgcyBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGFqYXhTZW5kLCBzdG9wIHRoZXJlXG5cdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0cmV0dXJuIGpxWEhSO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBUaW1lb3V0XG5cdFx0XHRpZiAoIHMuYXN5bmMgJiYgcy50aW1lb3V0ID4gMCApIHtcblx0XHRcdFx0dGltZW91dFRpbWVyID0gd2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdGpxWEhSLmFib3J0KCBcInRpbWVvdXRcIiApO1xuXHRcdFx0XHR9LCBzLnRpbWVvdXQgKTtcblx0XHRcdH1cblxuXHRcdFx0dHJ5IHtcblx0XHRcdFx0Y29tcGxldGVkID0gZmFsc2U7XG5cdFx0XHRcdHRyYW5zcG9ydC5zZW5kKCByZXF1ZXN0SGVhZGVycywgZG9uZSApO1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0Ly8gUmV0aHJvdyBwb3N0LWNvbXBsZXRpb24gZXhjZXB0aW9uc1xuXHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHR0aHJvdyBlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUHJvcGFnYXRlIG90aGVycyBhcyByZXN1bHRzXG5cdFx0XHRcdGRvbmUoIC0xLCBlICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbGJhY2sgZm9yIHdoZW4gZXZlcnl0aGluZyBpcyBkb25lXG5cdFx0ZnVuY3Rpb24gZG9uZSggc3RhdHVzLCBuYXRpdmVTdGF0dXNUZXh0LCByZXNwb25zZXMsIGhlYWRlcnMgKSB7XG5cdFx0XHR2YXIgaXNTdWNjZXNzLCBzdWNjZXNzLCBlcnJvciwgcmVzcG9uc2UsIG1vZGlmaWVkLFxuXHRcdFx0XHRzdGF0dXNUZXh0ID0gbmF0aXZlU3RhdHVzVGV4dDtcblxuXHRcdFx0Ly8gSWdub3JlIHJlcGVhdCBpbnZvY2F0aW9uc1xuXHRcdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Y29tcGxldGVkID0gdHJ1ZTtcblxuXHRcdFx0Ly8gQ2xlYXIgdGltZW91dCBpZiBpdCBleGlzdHNcblx0XHRcdGlmICggdGltZW91dFRpbWVyICkge1xuXHRcdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0VGltZXIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRGVyZWZlcmVuY2UgdHJhbnNwb3J0IGZvciBlYXJseSBnYXJiYWdlIGNvbGxlY3Rpb25cblx0XHRcdC8vIChubyBtYXR0ZXIgaG93IGxvbmcgdGhlIGpxWEhSIG9iamVjdCB3aWxsIGJlIHVzZWQpXG5cdFx0XHR0cmFuc3BvcnQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdC8vIENhY2hlIHJlc3BvbnNlIGhlYWRlcnNcblx0XHRcdHJlc3BvbnNlSGVhZGVyc1N0cmluZyA9IGhlYWRlcnMgfHwgXCJcIjtcblxuXHRcdFx0Ly8gU2V0IHJlYWR5U3RhdGVcblx0XHRcdGpxWEhSLnJlYWR5U3RhdGUgPSBzdGF0dXMgPiAwID8gNCA6IDA7XG5cblx0XHRcdC8vIERldGVybWluZSBpZiBzdWNjZXNzZnVsXG5cdFx0XHRpc1N1Y2Nlc3MgPSBzdGF0dXMgPj0gMjAwICYmIHN0YXR1cyA8IDMwMCB8fCBzdGF0dXMgPT09IDMwNDtcblxuXHRcdFx0Ly8gR2V0IHJlc3BvbnNlIGRhdGFcblx0XHRcdGlmICggcmVzcG9uc2VzICkge1xuXHRcdFx0XHRyZXNwb25zZSA9IGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ29udmVydCBubyBtYXR0ZXIgd2hhdCAodGhhdCB3YXkgcmVzcG9uc2VYWFggZmllbGRzIGFyZSBhbHdheXMgc2V0KVxuXHRcdFx0cmVzcG9uc2UgPSBhamF4Q29udmVydCggcywgcmVzcG9uc2UsIGpxWEhSLCBpc1N1Y2Nlc3MgKTtcblxuXHRcdFx0Ly8gSWYgc3VjY2Vzc2Z1bCwgaGFuZGxlIHR5cGUgY2hhaW5pbmdcblx0XHRcdGlmICggaXNTdWNjZXNzICkge1xuXG5cdFx0XHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0XHRcdGlmICggcy5pZk1vZGlmaWVkICkge1xuXHRcdFx0XHRcdG1vZGlmaWVkID0ganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiTGFzdC1Nb2RpZmllZFwiICk7XG5cdFx0XHRcdFx0aWYgKCBtb2RpZmllZCApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJldGFnXCIgKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5LmV0YWdbIGNhY2hlVVJMIF0gPSBtb2RpZmllZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBpZiBubyBjb250ZW50XG5cdFx0XHRcdGlmICggc3RhdHVzID09PSAyMDQgfHwgcy50eXBlID09PSBcIkhFQURcIiApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub2NvbnRlbnRcIjtcblxuXHRcdFx0XHQvLyBpZiBub3QgbW9kaWZpZWRcblx0XHRcdFx0fSBlbHNlIGlmICggc3RhdHVzID09PSAzMDQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwibm90bW9kaWZpZWRcIjtcblxuXHRcdFx0XHQvLyBJZiB3ZSBoYXZlIGRhdGEsIGxldCdzIGNvbnZlcnQgaXRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gcmVzcG9uc2Uuc3RhdGU7XG5cdFx0XHRcdFx0c3VjY2VzcyA9IHJlc3BvbnNlLmRhdGE7XG5cdFx0XHRcdFx0ZXJyb3IgPSByZXNwb25zZS5lcnJvcjtcblx0XHRcdFx0XHRpc1N1Y2Nlc3MgPSAhZXJyb3I7XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gRXh0cmFjdCBlcnJvciBmcm9tIHN0YXR1c1RleHQgYW5kIG5vcm1hbGl6ZSBmb3Igbm9uLWFib3J0c1xuXHRcdFx0XHRlcnJvciA9IHN0YXR1c1RleHQ7XG5cdFx0XHRcdGlmICggc3RhdHVzIHx8ICFzdGF0dXNUZXh0ICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcImVycm9yXCI7XG5cdFx0XHRcdFx0aWYgKCBzdGF0dXMgPCAwICkge1xuXHRcdFx0XHRcdFx0c3RhdHVzID0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IGRhdGEgZm9yIHRoZSBmYWtlIHhociBvYmplY3Rcblx0XHRcdGpxWEhSLnN0YXR1cyA9IHN0YXR1cztcblx0XHRcdGpxWEhSLnN0YXR1c1RleHQgPSAoIG5hdGl2ZVN0YXR1c1RleHQgfHwgc3RhdHVzVGV4dCApICsgXCJcIjtcblxuXHRcdFx0Ly8gU3VjY2Vzcy9FcnJvclxuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsgc3VjY2Vzcywgc3RhdHVzVGV4dCwganFYSFIgXSApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0LCBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRqcVhIUi5zdGF0dXNDb2RlKCBzdGF0dXNDb2RlICk7XG5cdFx0XHRzdGF0dXNDb2RlID0gdW5kZWZpbmVkO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggaXNTdWNjZXNzID8gXCJhamF4U3VjY2Vzc1wiIDogXCJhamF4RXJyb3JcIixcblx0XHRcdFx0XHRbIGpxWEhSLCBzLCBpc1N1Y2Nlc3MgPyBzdWNjZXNzIDogZXJyb3IgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb21wbGV0ZVxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZC5maXJlV2l0aCggY2FsbGJhY2tDb250ZXh0LCBbIGpxWEhSLCBzdGF0dXNUZXh0IF0gKTtcblxuXHRcdFx0aWYgKCBmaXJlR2xvYmFscyApIHtcblx0XHRcdFx0Z2xvYmFsRXZlbnRDb250ZXh0LnRyaWdnZXIoIFwiYWpheENvbXBsZXRlXCIsIFsganFYSFIsIHMgXSApO1xuXG5cdFx0XHRcdC8vIEhhbmRsZSB0aGUgZ2xvYmFsIEFKQVggY291bnRlclxuXHRcdFx0XHRpZiAoICEoIC0talF1ZXJ5LmFjdGl2ZSApICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBcImFqYXhTdG9wXCIgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBqcVhIUjtcblx0fSxcblxuXHRnZXRKU09OOiBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4galF1ZXJ5LmdldCggdXJsLCBkYXRhLCBjYWxsYmFjaywgXCJqc29uXCIgKTtcblx0fSxcblxuXHRnZXRTY3JpcHQ6IGZ1bmN0aW9uKCB1cmwsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIHVuZGVmaW5lZCwgY2FsbGJhY2ssIFwic2NyaXB0XCIgKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcImdldFwiLCBcInBvc3RcIiBdLCBmdW5jdGlvbiggaSwgbWV0aG9kICkge1xuXHRqUXVlcnlbIG1ldGhvZCBdID0gZnVuY3Rpb24oIHVybCwgZGF0YSwgY2FsbGJhY2ssIHR5cGUgKSB7XG5cblx0XHQvLyBTaGlmdCBhcmd1bWVudHMgaWYgZGF0YSBhcmd1bWVudCB3YXMgb21pdHRlZFxuXHRcdGlmICggaXNGdW5jdGlvbiggZGF0YSApICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgY2FsbGJhY2s7XG5cdFx0XHRjYWxsYmFjayA9IGRhdGE7XG5cdFx0XHRkYXRhID0gdW5kZWZpbmVkO1xuXHRcdH1cblxuXHRcdC8vIFRoZSB1cmwgY2FuIGJlIGFuIG9wdGlvbnMgb2JqZWN0ICh3aGljaCB0aGVuIG11c3QgaGF2ZSAudXJsKVxuXHRcdHJldHVybiBqUXVlcnkuYWpheCggalF1ZXJ5LmV4dGVuZCgge1xuXHRcdFx0dXJsOiB1cmwsXG5cdFx0XHR0eXBlOiBtZXRob2QsXG5cdFx0XHRkYXRhVHlwZTogdHlwZSxcblx0XHRcdGRhdGE6IGRhdGEsXG5cdFx0XHRzdWNjZXNzOiBjYWxsYmFja1xuXHRcdH0sIGpRdWVyeS5pc1BsYWluT2JqZWN0KCB1cmwgKSAmJiB1cmwgKSApO1xuXHR9O1xufSApO1xuXG5cbmpRdWVyeS5fZXZhbFVybCA9IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XG5cdHJldHVybiBqUXVlcnkuYWpheCgge1xuXHRcdHVybDogdXJsLFxuXG5cdFx0Ly8gTWFrZSB0aGlzIGV4cGxpY2l0LCBzaW5jZSB1c2VyIGNhbiBvdmVycmlkZSB0aGlzIHRocm91Z2ggYWpheFNldHVwICgjMTEyNjQpXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRkYXRhVHlwZTogXCJzY3JpcHRcIixcblx0XHRjYWNoZTogdHJ1ZSxcblx0XHRhc3luYzogZmFsc2UsXG5cdFx0Z2xvYmFsOiBmYWxzZSxcblxuXHRcdC8vIE9ubHkgZXZhbHVhdGUgdGhlIHJlc3BvbnNlIGlmIGl0IGlzIHN1Y2Nlc3NmdWwgKGdoLTQxMjYpXG5cdFx0Ly8gZGF0YUZpbHRlciBpcyBub3QgaW52b2tlZCBmb3IgZmFpbHVyZSByZXNwb25zZXMsIHNvIHVzaW5nIGl0IGluc3RlYWRcblx0XHQvLyBvZiB0aGUgZGVmYXVsdCBjb252ZXJ0ZXIgaXMga2x1ZGd5IGJ1dCBpdCB3b3Jrcy5cblx0XHRjb252ZXJ0ZXJzOiB7XG5cdFx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCkge31cblx0XHR9LFxuXHRcdGRhdGFGaWx0ZXI6IGZ1bmN0aW9uKCByZXNwb25zZSApIHtcblx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCByZXNwb25zZSwgb3B0aW9ucyApO1xuXHRcdH1cblx0fSApO1xufTtcblxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHdyYXBBbGw6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciB3cmFwO1xuXG5cdFx0aWYgKCB0aGlzWyAwIF0gKSB7XG5cdFx0XHRpZiAoIGlzRnVuY3Rpb24oIGh0bWwgKSApIHtcblx0XHRcdFx0aHRtbCA9IGh0bWwuY2FsbCggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRoZSBlbGVtZW50cyB0byB3cmFwIHRoZSB0YXJnZXQgYXJvdW5kXG5cdFx0XHR3cmFwID0galF1ZXJ5KCBodG1sLCB0aGlzWyAwIF0ub3duZXJEb2N1bWVudCApLmVxKCAwICkuY2xvbmUoIHRydWUgKTtcblxuXHRcdFx0aWYgKCB0aGlzWyAwIF0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0d3JhcC5pbnNlcnRCZWZvcmUoIHRoaXNbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHR3cmFwLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gdGhpcztcblxuXHRcdFx0XHR3aGlsZSAoIGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQgKSB7XG5cdFx0XHRcdFx0ZWxlbSA9IGVsZW0uZmlyc3RFbGVtZW50Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZWxlbTtcblx0XHRcdH0gKS5hcHBlbmQoIHRoaXMgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR3cmFwSW5uZXI6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBJbm5lciggaHRtbC5jYWxsKCB0aGlzLCBpICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBzZWxmID0galF1ZXJ5KCB0aGlzICksXG5cdFx0XHRcdGNvbnRlbnRzID0gc2VsZi5jb250ZW50cygpO1xuXG5cdFx0XHRpZiAoIGNvbnRlbnRzLmxlbmd0aCApIHtcblx0XHRcdFx0Y29udGVudHMud3JhcEFsbCggaHRtbCApO1xuXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRzZWxmLmFwcGVuZCggaHRtbCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHR3cmFwOiBmdW5jdGlvbiggaHRtbCApIHtcblx0XHR2YXIgaHRtbElzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCBodG1sICk7XG5cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLndyYXBBbGwoIGh0bWxJc0Z1bmN0aW9uID8gaHRtbC5jYWxsKCB0aGlzLCBpICkgOiBodG1sICk7XG5cdFx0fSApO1xuXHR9LFxuXG5cdHVud3JhcDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHRoaXMucGFyZW50KCBzZWxlY3RvciApLm5vdCggXCJib2R5XCIgKS5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeSggdGhpcyApLnJlcGxhY2VXaXRoKCB0aGlzLmNoaWxkTm9kZXMgKTtcblx0XHR9ICk7XG5cdFx0cmV0dXJuIHRoaXM7XG5cdH1cbn0gKTtcblxuXG5qUXVlcnkuZXhwci5wc2V1ZG9zLmhpZGRlbiA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gIWpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSggZWxlbSApO1xufTtcbmpRdWVyeS5leHByLnBzZXVkb3MudmlzaWJsZSA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4gISEoIGVsZW0ub2Zmc2V0V2lkdGggfHwgZWxlbS5vZmZzZXRIZWlnaHQgfHwgZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApO1xufTtcblxuXG5cblxualF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIgPSBmdW5jdGlvbigpIHtcblx0dHJ5IHtcblx0XHRyZXR1cm4gbmV3IHdpbmRvdy5YTUxIdHRwUmVxdWVzdCgpO1xuXHR9IGNhdGNoICggZSApIHt9XG59O1xuXG52YXIgeGhyU3VjY2Vzc1N0YXR1cyA9IHtcblxuXHRcdC8vIEZpbGUgcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgY29kZSAwLCBhc3N1bWUgMjAwXG5cdFx0MDogMjAwLFxuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHQvLyAjMTQ1MDogc29tZXRpbWVzIElFIHJldHVybnMgMTIyMyB3aGVuIGl0IHNob3VsZCBiZSAyMDRcblx0XHQxMjIzOiAyMDRcblx0fSxcblx0eGhyU3VwcG9ydGVkID0galF1ZXJ5LmFqYXhTZXR0aW5ncy54aHIoKTtcblxuc3VwcG9ydC5jb3JzID0gISF4aHJTdXBwb3J0ZWQgJiYgKCBcIndpdGhDcmVkZW50aWFsc1wiIGluIHhoclN1cHBvcnRlZCApO1xuc3VwcG9ydC5hamF4ID0geGhyU3VwcG9ydGVkID0gISF4aHJTdXBwb3J0ZWQ7XG5cbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBmdW5jdGlvbiggb3B0aW9ucyApIHtcblx0dmFyIGNhbGxiYWNrLCBlcnJvckNhbGxiYWNrO1xuXG5cdC8vIENyb3NzIGRvbWFpbiBvbmx5IGFsbG93ZWQgaWYgc3VwcG9ydGVkIHRocm91Z2ggWE1MSHR0cFJlcXVlc3Rcblx0aWYgKCBzdXBwb3J0LmNvcnMgfHwgeGhyU3VwcG9ydGVkICYmICFvcHRpb25zLmNyb3NzRG9tYWluICkge1xuXHRcdHJldHVybiB7XG5cdFx0XHRzZW5kOiBmdW5jdGlvbiggaGVhZGVycywgY29tcGxldGUgKSB7XG5cdFx0XHRcdHZhciBpLFxuXHRcdFx0XHRcdHhociA9IG9wdGlvbnMueGhyKCk7XG5cblx0XHRcdFx0eGhyLm9wZW4oXG5cdFx0XHRcdFx0b3B0aW9ucy50eXBlLFxuXHRcdFx0XHRcdG9wdGlvbnMudXJsLFxuXHRcdFx0XHRcdG9wdGlvbnMuYXN5bmMsXG5cdFx0XHRcdFx0b3B0aW9ucy51c2VybmFtZSxcblx0XHRcdFx0XHRvcHRpb25zLnBhc3N3b3JkXG5cdFx0XHRcdCk7XG5cblx0XHRcdFx0Ly8gQXBwbHkgY3VzdG9tIGZpZWxkcyBpZiBwcm92aWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMueGhyRmllbGRzICkge1xuXHRcdFx0XHRcdGZvciAoIGkgaW4gb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0XHR4aHJbIGkgXSA9IG9wdGlvbnMueGhyRmllbGRzWyBpIF07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gT3ZlcnJpZGUgbWltZSB0eXBlIGlmIG5lZWRlZFxuXHRcdFx0XHRpZiAoIG9wdGlvbnMubWltZVR5cGUgJiYgeGhyLm92ZXJyaWRlTWltZVR5cGUgKSB7XG5cdFx0XHRcdFx0eGhyLm92ZXJyaWRlTWltZVR5cGUoIG9wdGlvbnMubWltZVR5cGUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFgtUmVxdWVzdGVkLVdpdGggaGVhZGVyXG5cdFx0XHRcdC8vIEZvciBjcm9zcy1kb21haW4gcmVxdWVzdHMsIHNlZWluZyBhcyBjb25kaXRpb25zIGZvciBhIHByZWZsaWdodCBhcmVcblx0XHRcdFx0Ly8gYWtpbiB0byBhIGppZ3NhdyBwdXp6bGUsIHdlIHNpbXBseSBuZXZlciBzZXQgaXQgdG8gYmUgc3VyZS5cblx0XHRcdFx0Ly8gKGl0IGNhbiBhbHdheXMgYmUgc2V0IG9uIGEgcGVyLXJlcXVlc3QgYmFzaXMgb3IgZXZlbiB1c2luZyBhamF4U2V0dXApXG5cdFx0XHRcdC8vIEZvciBzYW1lLWRvbWFpbiByZXF1ZXN0cywgd29uJ3QgY2hhbmdlIGhlYWRlciBpZiBhbHJlYWR5IHByb3ZpZGVkLlxuXHRcdFx0XHRpZiAoICFvcHRpb25zLmNyb3NzRG9tYWluICYmICFoZWFkZXJzWyBcIlgtUmVxdWVzdGVkLVdpdGhcIiBdICkge1xuXHRcdFx0XHRcdGhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gPSBcIlhNTEh0dHBSZXF1ZXN0XCI7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTZXQgaGVhZGVyc1xuXHRcdFx0XHRmb3IgKCBpIGluIGhlYWRlcnMgKSB7XG5cdFx0XHRcdFx0eGhyLnNldFJlcXVlc3RIZWFkZXIoIGksIGhlYWRlcnNbIGkgXSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQ2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRjYWxsYmFjayA9IGVycm9yQ2FsbGJhY2sgPSB4aHIub25sb2FkID1cblx0XHRcdFx0XHRcdFx0XHR4aHIub25lcnJvciA9IHhoci5vbmFib3J0ID0geGhyLm9udGltZW91dCA9XG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIub25yZWFkeXN0YXRlY2hhbmdlID0gbnVsbDtcblxuXHRcdFx0XHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiYWJvcnRcIiApIHtcblx0XHRcdFx0XHRcdFx0XHR4aHIuYWJvcnQoKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggdHlwZSA9PT0gXCJlcnJvclwiICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHQvLyBPbiBhIG1hbnVhbCBuYXRpdmUgYWJvcnQsIElFOSB0aHJvd3Ncblx0XHRcdFx0XHRcdFx0XHQvLyBlcnJvcnMgb24gYW55IHByb3BlcnR5IGFjY2VzcyB0aGF0IGlzIG5vdCByZWFkeVN0YXRlXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCB0eXBlb2YgeGhyLnN0YXR1cyAhPT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCAwLCBcImVycm9yXCIgKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gRmlsZTogcHJvdG9jb2wgYWx3YXlzIHlpZWxkcyBzdGF0dXMgMDsgc2VlICM4NjA1LCAjMTQyMDdcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdFx0eGhyLnN0YXR1c1RleHRcblx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdGNvbXBsZXRlKFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyU3VjY2Vzc1N0YXR1c1sgeGhyLnN0YXR1cyBdIHx8IHhoci5zdGF0dXMsXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dCxcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElFOSBoYXMgbm8gWEhSMiBidXQgdGhyb3dzIG9uIGJpbmFyeSAodHJhYy0xMTQyNilcblx0XHRcdFx0XHRcdFx0XHRcdC8vIEZvciBYSFIyIG5vbi10ZXh0LCBsZXQgdGhlIGNhbGxlciBoYW5kbGUgaXQgKGdoLTI0OTgpXG5cdFx0XHRcdFx0XHRcdFx0XHQoIHhoci5yZXNwb25zZVR5cGUgfHwgXCJ0ZXh0XCIgKSAhPT0gXCJ0ZXh0XCIgIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgeGhyLnJlc3BvbnNlVGV4dCAhPT0gXCJzdHJpbmdcIiA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgYmluYXJ5OiB4aHIucmVzcG9uc2UgfSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHsgdGV4dDogeGhyLnJlc3BvbnNlVGV4dCB9LFxuXHRcdFx0XHRcdFx0XHRcdFx0eGhyLmdldEFsbFJlc3BvbnNlSGVhZGVycygpXG5cdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH07XG5cblx0XHRcdFx0Ly8gTGlzdGVuIHRvIGV2ZW50c1xuXHRcdFx0XHR4aHIub25sb2FkID0gY2FsbGJhY2soKTtcblx0XHRcdFx0ZXJyb3JDYWxsYmFjayA9IHhoci5vbmVycm9yID0geGhyLm9udGltZW91dCA9IGNhbGxiYWNrKCBcImVycm9yXCIgKTtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA5IG9ubHlcblx0XHRcdFx0Ly8gVXNlIG9ucmVhZHlzdGF0ZWNoYW5nZSB0byByZXBsYWNlIG9uYWJvcnRcblx0XHRcdFx0Ly8gdG8gaGFuZGxlIHVuY2F1Z2h0IGFib3J0c1xuXHRcdFx0XHRpZiAoIHhoci5vbmFib3J0ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0eGhyLm9uYWJvcnQgPSBlcnJvckNhbGxiYWNrO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0Ly8gQ2hlY2sgcmVhZHlTdGF0ZSBiZWZvcmUgdGltZW91dCBhcyBpdCBjaGFuZ2VzXG5cdFx0XHRcdFx0XHRpZiAoIHhoci5yZWFkeVN0YXRlID09PSA0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIEFsbG93IG9uZXJyb3IgdG8gYmUgY2FsbGVkIGZpcnN0LFxuXHRcdFx0XHRcdFx0XHQvLyBidXQgdGhhdCB3aWxsIG5vdCBoYW5kbGUgYSBuYXRpdmUgYWJvcnRcblx0XHRcdFx0XHRcdFx0Ly8gQWxzbywgc2F2ZSBlcnJvckNhbGxiYWNrIHRvIGEgdmFyaWFibGVcblx0XHRcdFx0XHRcdFx0Ly8gYXMgeGhyLm9uZXJyb3IgY2Fubm90IGJlIGFjY2Vzc2VkXG5cdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0ZXJyb3JDYWxsYmFjaygpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDcmVhdGUgdGhlIGFib3J0IGNhbGxiYWNrXG5cdFx0XHRcdGNhbGxiYWNrID0gY2FsbGJhY2soIFwiYWJvcnRcIiApO1xuXG5cdFx0XHRcdHRyeSB7XG5cblx0XHRcdFx0XHQvLyBEbyBzZW5kIHRoZSByZXF1ZXN0ICh0aGlzIG1heSByYWlzZSBhbiBleGNlcHRpb24pXG5cdFx0XHRcdFx0eGhyLnNlbmQoIG9wdGlvbnMuaGFzQ29udGVudCAmJiBvcHRpb25zLmRhdGEgfHwgbnVsbCApO1xuXHRcdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHRcdC8vICMxNDY4MzogT25seSByZXRocm93IGlmIHRoaXMgaGFzbid0IGJlZW4gbm90aWZpZWQgYXMgYW4gZXJyb3IgeWV0XG5cdFx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9LFxuXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxuLy8gUHJldmVudCBhdXRvLWV4ZWN1dGlvbiBvZiBzY3JpcHRzIHdoZW4gbm8gZXhwbGljaXQgZGF0YVR5cGUgd2FzIHByb3ZpZGVkIChTZWUgZ2gtMjQzMilcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBmdW5jdGlvbiggcyApIHtcblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMuY29udGVudHMuc2NyaXB0ID0gZmFsc2U7XG5cdH1cbn0gKTtcblxuLy8gSW5zdGFsbCBzY3JpcHQgZGF0YVR5cGVcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0YWNjZXB0czoge1xuXHRcdHNjcmlwdDogXCJ0ZXh0L2phdmFzY3JpcHQsIGFwcGxpY2F0aW9uL2phdmFzY3JpcHQsIFwiICtcblx0XHRcdFwiYXBwbGljYXRpb24vZWNtYXNjcmlwdCwgYXBwbGljYXRpb24veC1lY21hc2NyaXB0XCJcblx0fSxcblx0Y29udGVudHM6IHtcblx0XHRzY3JpcHQ6IC9cXGIoPzpqYXZhfGVjbWEpc2NyaXB0XFxiL1xuXHR9LFxuXHRjb252ZXJ0ZXJzOiB7XG5cdFx0XCJ0ZXh0IHNjcmlwdFwiOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdGpRdWVyeS5nbG9iYWxFdmFsKCB0ZXh0ICk7XG5cdFx0XHRyZXR1cm4gdGV4dDtcblx0XHR9XG5cdH1cbn0gKTtcblxuLy8gSGFuZGxlIGNhY2hlJ3Mgc3BlY2lhbCBjYXNlIGFuZCBjcm9zc0RvbWFpblxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwic2NyaXB0XCIsIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRzLmNhY2hlID0gZmFsc2U7XG5cdH1cblx0aWYgKCBzLmNyb3NzRG9tYWluICkge1xuXHRcdHMudHlwZSA9IFwiR0VUXCI7XG5cdH1cbn0gKTtcblxuLy8gQmluZCBzY3JpcHQgdGFnIGhhY2sgdHJhbnNwb3J0XG5qUXVlcnkuYWpheFRyYW5zcG9ydCggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cblx0Ly8gVGhpcyB0cmFuc3BvcnQgb25seSBkZWFscyB3aXRoIGNyb3NzIGRvbWFpbiBvciBmb3JjZWQtYnktYXR0cnMgcmVxdWVzdHNcblx0aWYgKCBzLmNyb3NzRG9tYWluIHx8IHMuc2NyaXB0QXR0cnMgKSB7XG5cdFx0dmFyIHNjcmlwdCwgY2FsbGJhY2s7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBfLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0c2NyaXB0ID0galF1ZXJ5KCBcIjxzY3JpcHQ+XCIgKVxuXHRcdFx0XHRcdC5hdHRyKCBzLnNjcmlwdEF0dHJzIHx8IHt9IClcblx0XHRcdFx0XHQucHJvcCggeyBjaGFyc2V0OiBzLnNjcmlwdENoYXJzZXQsIHNyYzogcy51cmwgfSApXG5cdFx0XHRcdFx0Lm9uKCBcImxvYWQgZXJyb3JcIiwgY2FsbGJhY2sgPSBmdW5jdGlvbiggZXZ0ICkge1xuXHRcdFx0XHRcdFx0c2NyaXB0LnJlbW92ZSgpO1xuXHRcdFx0XHRcdFx0Y2FsbGJhY2sgPSBudWxsO1xuXHRcdFx0XHRcdFx0aWYgKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRcdGNvbXBsZXRlKCBldnQudHlwZSA9PT0gXCJlcnJvclwiID8gNDA0IDogMjAwLCBldnQudHlwZSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQvLyBVc2UgbmF0aXZlIERPTSBtYW5pcHVsYXRpb24gdG8gYXZvaWQgb3VyIGRvbU1hbmlwIEFKQVggdHJpY2tlcnlcblx0XHRcdFx0ZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZCggc2NyaXB0WyAwIF0gKTtcblx0XHRcdH0sXG5cdFx0XHRhYm9ydDogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0Y2FsbGJhY2soKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH07XG5cdH1cbn0gKTtcblxuXG5cblxudmFyIG9sZENhbGxiYWNrcyA9IFtdLFxuXHRyanNvbnAgPSAvKD0pXFw/KD89JnwkKXxcXD9cXD8vO1xuXG4vLyBEZWZhdWx0IGpzb25wIHNldHRpbmdzXG5qUXVlcnkuYWpheFNldHVwKCB7XG5cdGpzb25wOiBcImNhbGxiYWNrXCIsXG5cdGpzb25wQ2FsbGJhY2s6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBjYWxsYmFjayA9IG9sZENhbGxiYWNrcy5wb3AoKSB8fCAoIGpRdWVyeS5leHBhbmRvICsgXCJfXCIgKyAoIG5vbmNlKysgKSApO1xuXHRcdHRoaXNbIGNhbGxiYWNrIF0gPSB0cnVlO1xuXHRcdHJldHVybiBjYWxsYmFjaztcblx0fVxufSApO1xuXG4vLyBEZXRlY3QsIG5vcm1hbGl6ZSBvcHRpb25zIGFuZCBpbnN0YWxsIGNhbGxiYWNrcyBmb3IganNvbnAgcmVxdWVzdHNcbmpRdWVyeS5hamF4UHJlZmlsdGVyKCBcImpzb24ganNvbnBcIiwgZnVuY3Rpb24oIHMsIG9yaWdpbmFsU2V0dGluZ3MsIGpxWEhSICkge1xuXG5cdHZhciBjYWxsYmFja05hbWUsIG92ZXJ3cml0dGVuLCByZXNwb25zZUNvbnRhaW5lcixcblx0XHRqc29uUHJvcCA9IHMuanNvbnAgIT09IGZhbHNlICYmICggcmpzb25wLnRlc3QoIHMudXJsICkgP1xuXHRcdFx0XCJ1cmxcIiA6XG5cdFx0XHR0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICYmXG5cdFx0XHRcdCggcy5jb250ZW50VHlwZSB8fCBcIlwiIClcblx0XHRcdFx0XHQuaW5kZXhPZiggXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWRcIiApID09PSAwICYmXG5cdFx0XHRcdHJqc29ucC50ZXN0KCBzLmRhdGEgKSAmJiBcImRhdGFcIlxuXHRcdCk7XG5cblx0Ly8gSGFuZGxlIGlmZiB0aGUgZXhwZWN0ZWQgZGF0YSB0eXBlIGlzIFwianNvbnBcIiBvciB3ZSBoYXZlIGEgcGFyYW1ldGVyIHRvIHNldFxuXHRpZiAoIGpzb25Qcm9wIHx8IHMuZGF0YVR5cGVzWyAwIF0gPT09IFwianNvbnBcIiApIHtcblxuXHRcdC8vIEdldCBjYWxsYmFjayBuYW1lLCByZW1lbWJlcmluZyBwcmVleGlzdGluZyB2YWx1ZSBhc3NvY2lhdGVkIHdpdGggaXRcblx0XHRjYWxsYmFja05hbWUgPSBzLmpzb25wQ2FsbGJhY2sgPSBpc0Z1bmN0aW9uKCBzLmpzb25wQ2FsbGJhY2sgKSA/XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2soKSA6XG5cdFx0XHRzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHQvLyBJbnNlcnQgY2FsbGJhY2sgaW50byB1cmwgb3IgZm9ybSBkYXRhXG5cdFx0aWYgKCBqc29uUHJvcCApIHtcblx0XHRcdHNbIGpzb25Qcm9wIF0gPSBzWyBqc29uUHJvcCBdLnJlcGxhY2UoIHJqc29ucCwgXCIkMVwiICsgY2FsbGJhY2tOYW1lICk7XG5cdFx0fSBlbHNlIGlmICggcy5qc29ucCAhPT0gZmFsc2UgKSB7XG5cdFx0XHRzLnVybCArPSAoIHJxdWVyeS50ZXN0KCBzLnVybCApID8gXCImXCIgOiBcIj9cIiApICsgcy5qc29ucCArIFwiPVwiICsgY2FsbGJhY2tOYW1lO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBkYXRhIGNvbnZlcnRlciB0byByZXRyaWV2ZSBqc29uIGFmdGVyIHNjcmlwdCBleGVjdXRpb25cblx0XHRzLmNvbnZlcnRlcnNbIFwic2NyaXB0IGpzb25cIiBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoICFyZXNwb25zZUNvbnRhaW5lciApIHtcblx0XHRcdFx0alF1ZXJ5LmVycm9yKCBjYWxsYmFja05hbWUgKyBcIiB3YXMgbm90IGNhbGxlZFwiICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzcG9uc2VDb250YWluZXJbIDAgXTtcblx0XHR9O1xuXG5cdFx0Ly8gRm9yY2UganNvbiBkYXRhVHlwZVxuXHRcdHMuZGF0YVR5cGVzWyAwIF0gPSBcImpzb25cIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tcblx0XHRvdmVyd3JpdHRlbiA9IHdpbmRvd1sgY2FsbGJhY2tOYW1lIF07XG5cdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBhcmd1bWVudHM7XG5cdFx0fTtcblxuXHRcdC8vIENsZWFuLXVwIGZ1bmN0aW9uIChmaXJlcyBhZnRlciBjb252ZXJ0ZXJzKVxuXHRcdGpxWEhSLmFsd2F5cyggZnVuY3Rpb24oKSB7XG5cblx0XHRcdC8vIElmIHByZXZpb3VzIHZhbHVlIGRpZG4ndCBleGlzdCAtIHJlbW92ZSBpdFxuXHRcdFx0aWYgKCBvdmVyd3JpdHRlbiA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRqUXVlcnkoIHdpbmRvdyApLnJlbW92ZVByb3AoIGNhbGxiYWNrTmFtZSApO1xuXG5cdFx0XHQvLyBPdGhlcndpc2UgcmVzdG9yZSBwcmVleGlzdGluZyB2YWx1ZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0d2luZG93WyBjYWxsYmFja05hbWUgXSA9IG92ZXJ3cml0dGVuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTYXZlIGJhY2sgYXMgZnJlZVxuXHRcdFx0aWYgKCBzWyBjYWxsYmFja05hbWUgXSApIHtcblxuXHRcdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCByZS11c2luZyB0aGUgb3B0aW9ucyBkb2Vzbid0IHNjcmV3IHRoaW5ncyBhcm91bmRcblx0XHRcdFx0cy5qc29ucENhbGxiYWNrID0gb3JpZ2luYWxTZXR0aW5ncy5qc29ucENhbGxiYWNrO1xuXG5cdFx0XHRcdC8vIFNhdmUgdGhlIGNhbGxiYWNrIG5hbWUgZm9yIGZ1dHVyZSB1c2Vcblx0XHRcdFx0b2xkQ2FsbGJhY2tzLnB1c2goIGNhbGxiYWNrTmFtZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDYWxsIGlmIGl0IHdhcyBhIGZ1bmN0aW9uIGFuZCB3ZSBoYXZlIGEgcmVzcG9uc2Vcblx0XHRcdGlmICggcmVzcG9uc2VDb250YWluZXIgJiYgaXNGdW5jdGlvbiggb3ZlcndyaXR0ZW4gKSApIHtcblx0XHRcdFx0b3ZlcndyaXR0ZW4oIHJlc3BvbnNlQ29udGFpbmVyWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmVzcG9uc2VDb250YWluZXIgPSBvdmVyd3JpdHRlbiA9IHVuZGVmaW5lZDtcblx0XHR9ICk7XG5cblx0XHQvLyBEZWxlZ2F0ZSB0byBzY3JpcHRcblx0XHRyZXR1cm4gXCJzY3JpcHRcIjtcblx0fVxufSApO1xuXG5cblxuXG4vLyBTdXBwb3J0OiBTYWZhcmkgOCBvbmx5XG4vLyBJbiBTYWZhcmkgOCBkb2N1bWVudHMgY3JlYXRlZCB2aWEgZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50XG4vLyBjb2xsYXBzZSBzaWJsaW5nIGZvcm1zOiB0aGUgc2Vjb25kIG9uZSBiZWNvbWVzIGEgY2hpbGQgb2YgdGhlIGZpcnN0IG9uZS5cbi8vIEJlY2F1c2Ugb2YgdGhhdCwgdGhpcyBzZWN1cml0eSBtZWFzdXJlIGhhcyB0byBiZSBkaXNhYmxlZCBpbiBTYWZhcmkgOC5cbi8vIGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0xMzczMzdcbnN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ID0gKCBmdW5jdGlvbigpIHtcblx0dmFyIGJvZHkgPSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoIFwiXCIgKS5ib2R5O1xuXHRib2R5LmlubmVySFRNTCA9IFwiPGZvcm0+PC9mb3JtPjxmb3JtPjwvZm9ybT5cIjtcblx0cmV0dXJuIGJvZHkuY2hpbGROb2Rlcy5sZW5ndGggPT09IDI7XG59ICkoKTtcblxuXG4vLyBBcmd1bWVudCBcImRhdGFcIiBzaG91bGQgYmUgc3RyaW5nIG9mIGh0bWxcbi8vIGNvbnRleHQgKG9wdGlvbmFsKTogSWYgc3BlY2lmaWVkLCB0aGUgZnJhZ21lbnQgd2lsbCBiZSBjcmVhdGVkIGluIHRoaXMgY29udGV4dCxcbi8vIGRlZmF1bHRzIHRvIGRvY3VtZW50XG4vLyBrZWVwU2NyaXB0cyAob3B0aW9uYWwpOiBJZiB0cnVlLCB3aWxsIGluY2x1ZGUgc2NyaXB0cyBwYXNzZWQgaW4gdGhlIGh0bWwgc3RyaW5nXG5qUXVlcnkucGFyc2VIVE1MID0gZnVuY3Rpb24oIGRhdGEsIGNvbnRleHQsIGtlZXBTY3JpcHRzICkge1xuXHRpZiAoIHR5cGVvZiBkYXRhICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBbXTtcblx0fVxuXHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRrZWVwU2NyaXB0cyA9IGNvbnRleHQ7XG5cdFx0Y29udGV4dCA9IGZhbHNlO1xuXHR9XG5cblx0dmFyIGJhc2UsIHBhcnNlZCwgc2NyaXB0cztcblxuXHRpZiAoICFjb250ZXh0ICkge1xuXG5cdFx0Ly8gU3RvcCBzY3JpcHRzIG9yIGlubGluZSBldmVudCBoYW5kbGVycyBmcm9tIGJlaW5nIGV4ZWN1dGVkIGltbWVkaWF0ZWx5XG5cdFx0Ly8gYnkgdXNpbmcgZG9jdW1lbnQuaW1wbGVtZW50YXRpb25cblx0XHRpZiAoIHN1cHBvcnQuY3JlYXRlSFRNTERvY3VtZW50ICkge1xuXHRcdFx0Y29udGV4dCA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggXCJcIiApO1xuXG5cdFx0XHQvLyBTZXQgdGhlIGJhc2UgaHJlZiBmb3IgdGhlIGNyZWF0ZWQgZG9jdW1lbnRcblx0XHRcdC8vIHNvIGFueSBwYXJzZWQgZWxlbWVudHMgd2l0aCBVUkxzXG5cdFx0XHQvLyBhcmUgYmFzZWQgb24gdGhlIGRvY3VtZW50J3MgVVJMIChnaC0yOTY1KVxuXHRcdFx0YmFzZSA9IGNvbnRleHQuY3JlYXRlRWxlbWVudCggXCJiYXNlXCIgKTtcblx0XHRcdGJhc2UuaHJlZiA9IGRvY3VtZW50LmxvY2F0aW9uLmhyZWY7XG5cdFx0XHRjb250ZXh0LmhlYWQuYXBwZW5kQ2hpbGQoIGJhc2UgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Y29udGV4dCA9IGRvY3VtZW50O1xuXHRcdH1cblx0fVxuXG5cdHBhcnNlZCA9IHJzaW5nbGVUYWcuZXhlYyggZGF0YSApO1xuXHRzY3JpcHRzID0gIWtlZXBTY3JpcHRzICYmIFtdO1xuXG5cdC8vIFNpbmdsZSB0YWdcblx0aWYgKCBwYXJzZWQgKSB7XG5cdFx0cmV0dXJuIFsgY29udGV4dC5jcmVhdGVFbGVtZW50KCBwYXJzZWRbIDEgXSApIF07XG5cdH1cblxuXHRwYXJzZWQgPSBidWlsZEZyYWdtZW50KCBbIGRhdGEgXSwgY29udGV4dCwgc2NyaXB0cyApO1xuXG5cdGlmICggc2NyaXB0cyAmJiBzY3JpcHRzLmxlbmd0aCApIHtcblx0XHRqUXVlcnkoIHNjcmlwdHMgKS5yZW1vdmUoKTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkubWVyZ2UoIFtdLCBwYXJzZWQuY2hpbGROb2RlcyApO1xufTtcblxuXG4vKipcbiAqIExvYWQgYSB1cmwgaW50byBhIHBhZ2VcbiAqL1xualF1ZXJ5LmZuLmxvYWQgPSBmdW5jdGlvbiggdXJsLCBwYXJhbXMsIGNhbGxiYWNrICkge1xuXHR2YXIgc2VsZWN0b3IsIHR5cGUsIHJlc3BvbnNlLFxuXHRcdHNlbGYgPSB0aGlzLFxuXHRcdG9mZiA9IHVybC5pbmRleE9mKCBcIiBcIiApO1xuXG5cdGlmICggb2ZmID4gLTEgKSB7XG5cdFx0c2VsZWN0b3IgPSBzdHJpcEFuZENvbGxhcHNlKCB1cmwuc2xpY2UoIG9mZiApICk7XG5cdFx0dXJsID0gdXJsLnNsaWNlKCAwLCBvZmYgKTtcblx0fVxuXG5cdC8vIElmIGl0J3MgYSBmdW5jdGlvblxuXHRpZiAoIGlzRnVuY3Rpb24oIHBhcmFtcyApICkge1xuXG5cdFx0Ly8gV2UgYXNzdW1lIHRoYXQgaXQncyB0aGUgY2FsbGJhY2tcblx0XHRjYWxsYmFjayA9IHBhcmFtcztcblx0XHRwYXJhbXMgPSB1bmRlZmluZWQ7XG5cblx0Ly8gT3RoZXJ3aXNlLCBidWlsZCBhIHBhcmFtIHN0cmluZ1xuXHR9IGVsc2UgaWYgKCBwYXJhbXMgJiYgdHlwZW9mIHBhcmFtcyA9PT0gXCJvYmplY3RcIiApIHtcblx0XHR0eXBlID0gXCJQT1NUXCI7XG5cdH1cblxuXHQvLyBJZiB3ZSBoYXZlIGVsZW1lbnRzIHRvIG1vZGlmeSwgbWFrZSB0aGUgcmVxdWVzdFxuXHRpZiAoIHNlbGYubGVuZ3RoID4gMCApIHtcblx0XHRqUXVlcnkuYWpheCgge1xuXHRcdFx0dXJsOiB1cmwsXG5cblx0XHRcdC8vIElmIFwidHlwZVwiIHZhcmlhYmxlIGlzIHVuZGVmaW5lZCwgdGhlbiBcIkdFVFwiIG1ldGhvZCB3aWxsIGJlIHVzZWQuXG5cdFx0XHQvLyBNYWtlIHZhbHVlIG9mIHRoaXMgZmllbGQgZXhwbGljaXQgc2luY2Vcblx0XHRcdC8vIHVzZXIgY2FuIG92ZXJyaWRlIGl0IHRocm91Z2ggYWpheFNldHVwIG1ldGhvZFxuXHRcdFx0dHlwZTogdHlwZSB8fCBcIkdFVFwiLFxuXHRcdFx0ZGF0YVR5cGU6IFwiaHRtbFwiLFxuXHRcdFx0ZGF0YTogcGFyYW1zXG5cdFx0fSApLmRvbmUoIGZ1bmN0aW9uKCByZXNwb25zZVRleHQgKSB7XG5cblx0XHRcdC8vIFNhdmUgcmVzcG9uc2UgZm9yIHVzZSBpbiBjb21wbGV0ZSBjYWxsYmFja1xuXHRcdFx0cmVzcG9uc2UgPSBhcmd1bWVudHM7XG5cblx0XHRcdHNlbGYuaHRtbCggc2VsZWN0b3IgP1xuXG5cdFx0XHRcdC8vIElmIGEgc2VsZWN0b3Igd2FzIHNwZWNpZmllZCwgbG9jYXRlIHRoZSByaWdodCBlbGVtZW50cyBpbiBhIGR1bW15IGRpdlxuXHRcdFx0XHQvLyBFeGNsdWRlIHNjcmlwdHMgdG8gYXZvaWQgSUUgJ1Blcm1pc3Npb24gRGVuaWVkJyBlcnJvcnNcblx0XHRcdFx0alF1ZXJ5KCBcIjxkaXY+XCIgKS5hcHBlbmQoIGpRdWVyeS5wYXJzZUhUTUwoIHJlc3BvbnNlVGV4dCApICkuZmluZCggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIHVzZSB0aGUgZnVsbCByZXN1bHRcblx0XHRcdFx0cmVzcG9uc2VUZXh0ICk7XG5cblx0XHQvLyBJZiB0aGUgcmVxdWVzdCBzdWNjZWVkcywgdGhpcyBmdW5jdGlvbiBnZXRzIFwiZGF0YVwiLCBcInN0YXR1c1wiLCBcImpxWEhSXCJcblx0XHQvLyBidXQgdGhleSBhcmUgaWdub3JlZCBiZWNhdXNlIHJlc3BvbnNlIHdhcyBzZXQgYWJvdmUuXG5cdFx0Ly8gSWYgaXQgZmFpbHMsIHRoaXMgZnVuY3Rpb24gZ2V0cyBcImpxWEhSXCIsIFwic3RhdHVzXCIsIFwiZXJyb3JcIlxuXHRcdH0gKS5hbHdheXMoIGNhbGxiYWNrICYmIGZ1bmN0aW9uKCBqcVhIUiwgc3RhdHVzICkge1xuXHRcdFx0c2VsZi5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0Y2FsbGJhY2suYXBwbHkoIHRoaXMsIHJlc3BvbnNlIHx8IFsganFYSFIucmVzcG9uc2VUZXh0LCBzdGF0dXMsIGpxWEhSIF0gKTtcblx0XHRcdH0gKTtcblx0XHR9ICk7XG5cdH1cblxuXHRyZXR1cm4gdGhpcztcbn07XG5cblxuXG5cbi8vIEF0dGFjaCBhIGJ1bmNoIG9mIGZ1bmN0aW9ucyBmb3IgaGFuZGxpbmcgY29tbW9uIEFKQVggZXZlbnRzXG5qUXVlcnkuZWFjaCggW1xuXHRcImFqYXhTdGFydFwiLFxuXHRcImFqYXhTdG9wXCIsXG5cdFwiYWpheENvbXBsZXRlXCIsXG5cdFwiYWpheEVycm9yXCIsXG5cdFwiYWpheFN1Y2Nlc3NcIixcblx0XCJhamF4U2VuZFwiXG5dLCBmdW5jdGlvbiggaSwgdHlwZSApIHtcblx0alF1ZXJ5LmZuWyB0eXBlIF0gPSBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGUsIGZuICk7XG5cdH07XG59ICk7XG5cblxuXG5cbmpRdWVyeS5leHByLnBzZXVkb3MuYW5pbWF0ZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0cmV0dXJuIGpRdWVyeS5ncmVwKCBqUXVlcnkudGltZXJzLCBmdW5jdGlvbiggZm4gKSB7XG5cdFx0cmV0dXJuIGVsZW0gPT09IGZuLmVsZW07XG5cdH0gKS5sZW5ndGg7XG59O1xuXG5cblxuXG5qUXVlcnkub2Zmc2V0ID0ge1xuXHRzZXRPZmZzZXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBpICkge1xuXHRcdHZhciBjdXJQb3NpdGlvbiwgY3VyTGVmdCwgY3VyQ1NTVG9wLCBjdXJUb3AsIGN1ck9mZnNldCwgY3VyQ1NTTGVmdCwgY2FsY3VsYXRlUG9zaXRpb24sXG5cdFx0XHRwb3NpdGlvbiA9IGpRdWVyeS5jc3MoIGVsZW0sIFwicG9zaXRpb25cIiApLFxuXHRcdFx0Y3VyRWxlbSA9IGpRdWVyeSggZWxlbSApLFxuXHRcdFx0cHJvcHMgPSB7fTtcblxuXHRcdC8vIFNldCBwb3NpdGlvbiBmaXJzdCwgaW4tY2FzZSB0b3AvbGVmdCBhcmUgc2V0IGV2ZW4gb24gc3RhdGljIGVsZW1cblx0XHRpZiAoIHBvc2l0aW9uID09PSBcInN0YXRpY1wiICkge1xuXHRcdFx0ZWxlbS5zdHlsZS5wb3NpdGlvbiA9IFwicmVsYXRpdmVcIjtcblx0XHR9XG5cblx0XHRjdXJPZmZzZXQgPSBjdXJFbGVtLm9mZnNldCgpO1xuXHRcdGN1ckNTU1RvcCA9IGpRdWVyeS5jc3MoIGVsZW0sIFwidG9wXCIgKTtcblx0XHRjdXJDU1NMZWZ0ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJsZWZ0XCIgKTtcblx0XHRjYWxjdWxhdGVQb3NpdGlvbiA9ICggcG9zaXRpb24gPT09IFwiYWJzb2x1dGVcIiB8fCBwb3NpdGlvbiA9PT0gXCJmaXhlZFwiICkgJiZcblx0XHRcdCggY3VyQ1NTVG9wICsgY3VyQ1NTTGVmdCApLmluZGV4T2YoIFwiYXV0b1wiICkgPiAtMTtcblxuXHRcdC8vIE5lZWQgdG8gYmUgYWJsZSB0byBjYWxjdWxhdGUgcG9zaXRpb24gaWYgZWl0aGVyXG5cdFx0Ly8gdG9wIG9yIGxlZnQgaXMgYXV0byBhbmQgcG9zaXRpb24gaXMgZWl0aGVyIGFic29sdXRlIG9yIGZpeGVkXG5cdFx0aWYgKCBjYWxjdWxhdGVQb3NpdGlvbiApIHtcblx0XHRcdGN1clBvc2l0aW9uID0gY3VyRWxlbS5wb3NpdGlvbigpO1xuXHRcdFx0Y3VyVG9wID0gY3VyUG9zaXRpb24udG9wO1xuXHRcdFx0Y3VyTGVmdCA9IGN1clBvc2l0aW9uLmxlZnQ7XG5cblx0XHR9IGVsc2Uge1xuXHRcdFx0Y3VyVG9wID0gcGFyc2VGbG9hdCggY3VyQ1NTVG9wICkgfHwgMDtcblx0XHRcdGN1ckxlZnQgPSBwYXJzZUZsb2F0KCBjdXJDU1NMZWZ0ICkgfHwgMDtcblx0XHR9XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIG9wdGlvbnMgKSApIHtcblxuXHRcdFx0Ly8gVXNlIGpRdWVyeS5leHRlbmQgaGVyZSB0byBhbGxvdyBtb2RpZmljYXRpb24gb2YgY29vcmRpbmF0ZXMgYXJndW1lbnQgKGdoLTE4NDgpXG5cdFx0XHRvcHRpb25zID0gb3B0aW9ucy5jYWxsKCBlbGVtLCBpLCBqUXVlcnkuZXh0ZW5kKCB7fSwgY3VyT2Zmc2V0ICkgKTtcblx0XHR9XG5cblx0XHRpZiAoIG9wdGlvbnMudG9wICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy50b3AgPSAoIG9wdGlvbnMudG9wIC0gY3VyT2Zmc2V0LnRvcCApICsgY3VyVG9wO1xuXHRcdH1cblx0XHRpZiAoIG9wdGlvbnMubGVmdCAhPSBudWxsICkge1xuXHRcdFx0cHJvcHMubGVmdCA9ICggb3B0aW9ucy5sZWZ0IC0gY3VyT2Zmc2V0LmxlZnQgKSArIGN1ckxlZnQ7XG5cdFx0fVxuXG5cdFx0aWYgKCBcInVzaW5nXCIgaW4gb3B0aW9ucyApIHtcblx0XHRcdG9wdGlvbnMudXNpbmcuY2FsbCggZWxlbSwgcHJvcHMgKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdXJFbGVtLmNzcyggcHJvcHMgKTtcblx0XHR9XG5cdH1cbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHQvLyBvZmZzZXQoKSByZWxhdGVzIGFuIGVsZW1lbnQncyBib3JkZXIgYm94IHRvIHRoZSBkb2N1bWVudCBvcmlnaW5cblx0b2Zmc2V0OiBmdW5jdGlvbiggb3B0aW9ucyApIHtcblxuXHRcdC8vIFByZXNlcnZlIGNoYWluaW5nIGZvciBzZXR0ZXJcblx0XHRpZiAoIGFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRyZXR1cm4gb3B0aW9ucyA9PT0gdW5kZWZpbmVkID9cblx0XHRcdFx0dGhpcyA6XG5cdFx0XHRcdHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5Lm9mZnNldC5zZXRPZmZzZXQoIHRoaXMsIG9wdGlvbnMsIGkgKTtcblx0XHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHZhciByZWN0LCB3aW4sXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdO1xuXG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBSZXR1cm4gemVyb3MgZm9yIGRpc2Nvbm5lY3RlZCBhbmQgaGlkZGVuIChkaXNwbGF5OiBub25lKSBlbGVtZW50cyAoZ2gtMjMxMClcblx0XHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0XHQvLyBSdW5uaW5nIGdldEJvdW5kaW5nQ2xpZW50UmVjdCBvbiBhXG5cdFx0Ly8gZGlzY29ubmVjdGVkIG5vZGUgaW4gSUUgdGhyb3dzIGFuIGVycm9yXG5cdFx0aWYgKCAhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiB7IHRvcDogMCwgbGVmdDogMCB9O1xuXHRcdH1cblxuXHRcdC8vIEdldCBkb2N1bWVudC1yZWxhdGl2ZSBwb3NpdGlvbiBieSBhZGRpbmcgdmlld3BvcnQgc2Nyb2xsIHRvIHZpZXdwb3J0LXJlbGF0aXZlIGdCQ1Jcblx0XHRyZWN0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblx0XHR3aW4gPSBlbGVtLm93bmVyRG9jdW1lbnQuZGVmYXVsdFZpZXc7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogcmVjdC50b3AgKyB3aW4ucGFnZVlPZmZzZXQsXG5cdFx0XHRsZWZ0OiByZWN0LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXRcblx0XHR9O1xuXHR9LFxuXG5cdC8vIHBvc2l0aW9uKCkgcmVsYXRlcyBhbiBlbGVtZW50J3MgbWFyZ2luIGJveCB0byBpdHMgb2Zmc2V0IHBhcmVudCdzIHBhZGRpbmcgYm94XG5cdC8vIFRoaXMgY29ycmVzcG9uZHMgdG8gdGhlIGJlaGF2aW9yIG9mIENTUyBhYnNvbHV0ZSBwb3NpdGlvbmluZ1xuXHRwb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0aWYgKCAhdGhpc1sgMCBdICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHZhciBvZmZzZXRQYXJlbnQsIG9mZnNldCwgZG9jLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXSxcblx0XHRcdHBhcmVudE9mZnNldCA9IHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cblx0XHQvLyBwb3NpdGlvbjpmaXhlZCBlbGVtZW50cyBhcmUgb2Zmc2V0IGZyb20gdGhlIHZpZXdwb3J0LCB3aGljaCBpdHNlbGYgYWx3YXlzIGhhcyB6ZXJvIG9mZnNldFxuXHRcdGlmICggalF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICkgPT09IFwiZml4ZWRcIiApIHtcblxuXHRcdFx0Ly8gQXNzdW1lIHBvc2l0aW9uOmZpeGVkIGltcGxpZXMgYXZhaWxhYmlsaXR5IG9mIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxuXHRcdFx0b2Zmc2V0ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRvZmZzZXQgPSB0aGlzLm9mZnNldCgpO1xuXG5cdFx0XHQvLyBBY2NvdW50IGZvciB0aGUgKnJlYWwqIG9mZnNldCBwYXJlbnQsIHdoaWNoIGNhbiBiZSB0aGUgZG9jdW1lbnQgb3IgaXRzIHJvb3QgZWxlbWVudFxuXHRcdFx0Ly8gd2hlbiBhIHN0YXRpY2FsbHkgcG9zaXRpb25lZCBlbGVtZW50IGlzIGlkZW50aWZpZWRcblx0XHRcdGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudDtcblx0XHRcdG9mZnNldFBhcmVudCA9IGVsZW0ub2Zmc2V0UGFyZW50IHx8IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cdFx0XHR3aGlsZSAoIG9mZnNldFBhcmVudCAmJlxuXHRcdFx0XHQoIG9mZnNldFBhcmVudCA9PT0gZG9jLmJvZHkgfHwgb2Zmc2V0UGFyZW50ID09PSBkb2MuZG9jdW1lbnRFbGVtZW50ICkgJiZcblx0XHRcdFx0alF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblxuXHRcdFx0XHRvZmZzZXRQYXJlbnQgPSBvZmZzZXRQYXJlbnQucGFyZW50Tm9kZTtcblx0XHRcdH1cblx0XHRcdGlmICggb2Zmc2V0UGFyZW50ICYmIG9mZnNldFBhcmVudCAhPT0gZWxlbSAmJiBvZmZzZXRQYXJlbnQubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHRcdFx0Ly8gSW5jb3Jwb3JhdGUgYm9yZGVycyBpbnRvIGl0cyBvZmZzZXQsIHNpbmNlIHRoZXkgYXJlIG91dHNpZGUgaXRzIGNvbnRlbnQgb3JpZ2luXG5cdFx0XHRcdHBhcmVudE9mZnNldCA9IGpRdWVyeSggb2Zmc2V0UGFyZW50ICkub2Zmc2V0KCk7XG5cdFx0XHRcdHBhcmVudE9mZnNldC50b3AgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcImJvcmRlclRvcFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdFx0cGFyZW50T2Zmc2V0LmxlZnQgKz0galF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcImJvcmRlckxlZnRXaWR0aFwiLCB0cnVlICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU3VidHJhY3QgcGFyZW50IG9mZnNldHMgYW5kIGVsZW1lbnQgbWFyZ2luc1xuXHRcdHJldHVybiB7XG5cdFx0XHR0b3A6IG9mZnNldC50b3AgLSBwYXJlbnRPZmZzZXQudG9wIC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5Ub3BcIiwgdHJ1ZSApLFxuXHRcdFx0bGVmdDogb2Zmc2V0LmxlZnQgLSBwYXJlbnRPZmZzZXQubGVmdCAtIGpRdWVyeS5jc3MoIGVsZW0sIFwibWFyZ2luTGVmdFwiLCB0cnVlIClcblx0XHR9O1xuXHR9LFxuXG5cdC8vIFRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuIGRvY3VtZW50RWxlbWVudCBpbiB0aGUgZm9sbG93aW5nIGNhc2VzOlxuXHQvLyAxKSBGb3IgdGhlIGVsZW1lbnQgaW5zaWRlIHRoZSBpZnJhbWUgd2l0aG91dCBvZmZzZXRQYXJlbnQsIHRoaXMgbWV0aG9kIHdpbGwgcmV0dXJuXG5cdC8vICAgIGRvY3VtZW50RWxlbWVudCBvZiB0aGUgcGFyZW50IHdpbmRvd1xuXHQvLyAyKSBGb3IgdGhlIGhpZGRlbiBvciBkZXRhY2hlZCBlbGVtZW50XG5cdC8vIDMpIEZvciBib2R5IG9yIGh0bWwgZWxlbWVudCwgaS5lLiBpbiBjYXNlIG9mIHRoZSBodG1sIG5vZGUgLSBpdCB3aWxsIHJldHVybiBpdHNlbGZcblx0Ly9cblx0Ly8gYnV0IHRob3NlIGV4Y2VwdGlvbnMgd2VyZSBuZXZlciBwcmVzZW50ZWQgYXMgYSByZWFsIGxpZmUgdXNlLWNhc2VzXG5cdC8vIGFuZCBtaWdodCBiZSBjb25zaWRlcmVkIGFzIG1vcmUgcHJlZmVyYWJsZSByZXN1bHRzLlxuXHQvL1xuXHQvLyBUaGlzIGxvZ2ljLCBob3dldmVyLCBpcyBub3QgZ3VhcmFudGVlZCBhbmQgY2FuIGNoYW5nZSBhdCBhbnkgcG9pbnQgaW4gdGhlIGZ1dHVyZVxuXHRvZmZzZXRQYXJlbnQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB0aGlzLm1hcCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgb2Zmc2V0UGFyZW50ID0gdGhpcy5vZmZzZXRQYXJlbnQ7XG5cblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmIGpRdWVyeS5jc3MoIG9mZnNldFBhcmVudCwgXCJwb3NpdGlvblwiICkgPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRcdG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5vZmZzZXRQYXJlbnQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBvZmZzZXRQYXJlbnQgfHwgZG9jdW1lbnRFbGVtZW50O1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG4vLyBDcmVhdGUgc2Nyb2xsTGVmdCBhbmQgc2Nyb2xsVG9wIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IHNjcm9sbExlZnQ6IFwicGFnZVhPZmZzZXRcIiwgc2Nyb2xsVG9wOiBcInBhZ2VZT2Zmc2V0XCIgfSwgZnVuY3Rpb24oIG1ldGhvZCwgcHJvcCApIHtcblx0dmFyIHRvcCA9IFwicGFnZVlPZmZzZXRcIiA9PT0gcHJvcDtcblxuXHRqUXVlcnkuZm5bIG1ldGhvZCBdID0gZnVuY3Rpb24oIHZhbCApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgbWV0aG9kLCB2YWwgKSB7XG5cblx0XHRcdC8vIENvYWxlc2NlIGRvY3VtZW50cyBhbmQgd2luZG93c1xuXHRcdFx0dmFyIHdpbjtcblx0XHRcdGlmICggaXNXaW5kb3coIGVsZW0gKSApIHtcblx0XHRcdFx0d2luID0gZWxlbTtcblx0XHRcdH0gZWxzZSBpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdHdpbiA9IGVsZW0uZGVmYXVsdFZpZXc7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggdmFsID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiB3aW4gPyB3aW5bIHByb3AgXSA6IGVsZW1bIG1ldGhvZCBdO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIHdpbiApIHtcblx0XHRcdFx0d2luLnNjcm9sbFRvKFxuXHRcdFx0XHRcdCF0b3AgPyB2YWwgOiB3aW4ucGFnZVhPZmZzZXQsXG5cdFx0XHRcdFx0dG9wID8gdmFsIDogd2luLnBhZ2VZT2Zmc2V0XG5cdFx0XHRcdCk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGVsZW1bIG1ldGhvZCBdID0gdmFsO1xuXHRcdFx0fVxuXHRcdH0sIG1ldGhvZCwgdmFsLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH07XG59ICk7XG5cbi8vIFN1cHBvcnQ6IFNhZmFyaSA8PTcgLSA5LjEsIENocm9tZSA8PTM3IC0gNDlcbi8vIEFkZCB0aGUgdG9wL2xlZnQgY3NzSG9va3MgdXNpbmcgalF1ZXJ5LmZuLnBvc2l0aW9uXG4vLyBXZWJraXQgYnVnOiBodHRwczovL2J1Z3Mud2Via2l0Lm9yZy9zaG93X2J1Zy5jZ2k/aWQ9MjkwODRcbi8vIEJsaW5rIGJ1ZzogaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NTg5MzQ3XG4vLyBnZXRDb21wdXRlZFN0eWxlIHJldHVybnMgcGVyY2VudCB3aGVuIHNwZWNpZmllZCBmb3IgdG9wL2xlZnQvYm90dG9tL3JpZ2h0O1xuLy8gcmF0aGVyIHRoYW4gbWFrZSB0aGUgY3NzIG1vZHVsZSBkZXBlbmQgb24gdGhlIG9mZnNldCBtb2R1bGUsIGp1c3QgY2hlY2sgZm9yIGl0IGhlcmVcbmpRdWVyeS5lYWNoKCBbIFwidG9wXCIsIFwibGVmdFwiIF0sIGZ1bmN0aW9uKCBpLCBwcm9wICkge1xuXHRqUXVlcnkuY3NzSG9va3NbIHByb3AgXSA9IGFkZEdldEhvb2tJZiggc3VwcG9ydC5waXhlbFBvc2l0aW9uLFxuXHRcdGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCApIHtcblx0XHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRcdGNvbXB1dGVkID0gY3VyQ1NTKCBlbGVtLCBwcm9wICk7XG5cblx0XHRcdFx0Ly8gSWYgY3VyQ1NTIHJldHVybnMgcGVyY2VudGFnZSwgZmFsbGJhY2sgdG8gb2Zmc2V0XG5cdFx0XHRcdHJldHVybiBybnVtbm9ucHgudGVzdCggY29tcHV0ZWQgKSA/XG5cdFx0XHRcdFx0alF1ZXJ5KCBlbGVtICkucG9zaXRpb24oKVsgcHJvcCBdICsgXCJweFwiIDpcblx0XHRcdFx0XHRjb21wdXRlZDtcblx0XHRcdH1cblx0XHR9XG5cdCk7XG59ICk7XG5cblxuLy8gQ3JlYXRlIGlubmVySGVpZ2h0LCBpbm5lcldpZHRoLCBoZWlnaHQsIHdpZHRoLCBvdXRlckhlaWdodCBhbmQgb3V0ZXJXaWR0aCBtZXRob2RzXG5qUXVlcnkuZWFjaCggeyBIZWlnaHQ6IFwiaGVpZ2h0XCIsIFdpZHRoOiBcIndpZHRoXCIgfSwgZnVuY3Rpb24oIG5hbWUsIHR5cGUgKSB7XG5cdGpRdWVyeS5lYWNoKCB7IHBhZGRpbmc6IFwiaW5uZXJcIiArIG5hbWUsIGNvbnRlbnQ6IHR5cGUsIFwiXCI6IFwib3V0ZXJcIiArIG5hbWUgfSxcblx0XHRmdW5jdGlvbiggZGVmYXVsdEV4dHJhLCBmdW5jTmFtZSApIHtcblxuXHRcdC8vIE1hcmdpbiBpcyBvbmx5IGZvciBvdXRlckhlaWdodCwgb3V0ZXJXaWR0aFxuXHRcdGpRdWVyeS5mblsgZnVuY05hbWUgXSA9IGZ1bmN0aW9uKCBtYXJnaW4sIHZhbHVlICkge1xuXHRcdFx0dmFyIGNoYWluYWJsZSA9IGFyZ3VtZW50cy5sZW5ndGggJiYgKCBkZWZhdWx0RXh0cmEgfHwgdHlwZW9mIG1hcmdpbiAhPT0gXCJib29sZWFuXCIgKSxcblx0XHRcdFx0ZXh0cmEgPSBkZWZhdWx0RXh0cmEgfHwgKCBtYXJnaW4gPT09IHRydWUgfHwgdmFsdWUgPT09IHRydWUgPyBcIm1hcmdpblwiIDogXCJib3JkZXJcIiApO1xuXG5cdFx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggZWxlbSwgdHlwZSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBkb2M7XG5cblx0XHRcdFx0aWYgKCBpc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRcdFx0Ly8gJCggd2luZG93ICkub3V0ZXJXaWR0aC9IZWlnaHQgcmV0dXJuIHcvaCBpbmNsdWRpbmcgc2Nyb2xsYmFycyAoZ2gtMTcyOSlcblx0XHRcdFx0XHRyZXR1cm4gZnVuY05hbWUuaW5kZXhPZiggXCJvdXRlclwiICkgPT09IDAgP1xuXHRcdFx0XHRcdFx0ZWxlbVsgXCJpbm5lclwiICsgbmFtZSBdIDpcblx0XHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50WyBcImNsaWVudFwiICsgbmFtZSBdO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gR2V0IGRvY3VtZW50IHdpZHRoIG9yIGhlaWdodFxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0ZG9jID0gZWxlbS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0XHRcdFx0XHQvLyBFaXRoZXIgc2Nyb2xsW1dpZHRoL0hlaWdodF0gb3Igb2Zmc2V0W1dpZHRoL0hlaWdodF0gb3IgY2xpZW50W1dpZHRoL0hlaWdodF0sXG5cdFx0XHRcdFx0Ly8gd2hpY2hldmVyIGlzIGdyZWF0ZXN0XG5cdFx0XHRcdFx0cmV0dXJuIE1hdGgubWF4KFxuXHRcdFx0XHRcdFx0ZWxlbS5ib2R5WyBcInNjcm9sbFwiICsgbmFtZSBdLCBkb2NbIFwic2Nyb2xsXCIgKyBuYW1lIF0sXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwib2Zmc2V0XCIgKyBuYW1lIF0sIGRvY1sgXCJvZmZzZXRcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGRvY1sgXCJjbGllbnRcIiArIG5hbWUgXVxuXHRcdFx0XHRcdCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cblx0XHRcdFx0XHQvLyBHZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50LCByZXF1ZXN0aW5nIGJ1dCBub3QgZm9yY2luZyBwYXJzZUZsb2F0XG5cdFx0XHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgdHlwZSwgZXh0cmEgKSA6XG5cblx0XHRcdFx0XHQvLyBTZXQgd2lkdGggb3IgaGVpZ2h0IG9uIHRoZSBlbGVtZW50XG5cdFx0XHRcdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCB0eXBlLCB2YWx1ZSwgZXh0cmEgKTtcblx0XHRcdH0sIHR5cGUsIGNoYWluYWJsZSA/IG1hcmdpbiA6IHVuZGVmaW5lZCwgY2hhaW5hYmxlICk7XG5cdFx0fTtcblx0fSApO1xufSApO1xuXG5cbmpRdWVyeS5lYWNoKCAoIFwiYmx1ciBmb2N1cyBmb2N1c2luIGZvY3Vzb3V0IHJlc2l6ZSBzY3JvbGwgY2xpY2sgZGJsY2xpY2sgXCIgK1xuXHRcIm1vdXNlZG93biBtb3VzZXVwIG1vdXNlbW92ZSBtb3VzZW92ZXIgbW91c2VvdXQgbW91c2VlbnRlciBtb3VzZWxlYXZlIFwiICtcblx0XCJjaGFuZ2Ugc2VsZWN0IHN1Ym1pdCBrZXlkb3duIGtleXByZXNzIGtleXVwIGNvbnRleHRtZW51XCIgKS5zcGxpdCggXCIgXCIgKSxcblx0ZnVuY3Rpb24oIGksIG5hbWUgKSB7XG5cblx0Ly8gSGFuZGxlIGV2ZW50IGJpbmRpbmdcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAwID9cblx0XHRcdHRoaXMub24oIG5hbWUsIG51bGwsIGRhdGEsIGZuICkgOlxuXHRcdFx0dGhpcy50cmlnZ2VyKCBuYW1lICk7XG5cdH07XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0aG92ZXI6IGZ1bmN0aW9uKCBmbk92ZXIsIGZuT3V0ICkge1xuXHRcdHJldHVybiB0aGlzLm1vdXNlZW50ZXIoIGZuT3ZlciApLm1vdXNlbGVhdmUoIGZuT3V0IHx8IGZuT3ZlciApO1xuXHR9XG59ICk7XG5cblxuXG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHRiaW5kOiBmdW5jdGlvbiggdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgbnVsbCwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5iaW5kOiBmdW5jdGlvbiggdHlwZXMsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9mZiggdHlwZXMsIG51bGwsIGZuICk7XG5cdH0sXG5cblx0ZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGRhdGEsIGZuICkge1xuXHRcdHJldHVybiB0aGlzLm9uKCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdHVuZGVsZWdhdGU6IGZ1bmN0aW9uKCBzZWxlY3RvciwgdHlwZXMsIGZuICkge1xuXG5cdFx0Ly8gKCBuYW1lc3BhY2UgKSBvciAoIHNlbGVjdG9yLCB0eXBlcyBbLCBmbl0gKVxuXHRcdHJldHVybiBhcmd1bWVudHMubGVuZ3RoID09PSAxID9cblx0XHRcdHRoaXMub2ZmKCBzZWxlY3RvciwgXCIqKlwiICkgOlxuXHRcdFx0dGhpcy5vZmYoIHR5cGVzLCBzZWxlY3RvciB8fCBcIioqXCIsIGZuICk7XG5cdH1cbn0gKTtcblxuLy8gQmluZCBhIGZ1bmN0aW9uIHRvIGEgY29udGV4dCwgb3B0aW9uYWxseSBwYXJ0aWFsbHkgYXBwbHlpbmcgYW55XG4vLyBhcmd1bWVudHMuXG4vLyBqUXVlcnkucHJveHkgaXMgZGVwcmVjYXRlZCB0byBwcm9tb3RlIHN0YW5kYXJkcyAoc3BlY2lmaWNhbGx5IEZ1bmN0aW9uI2JpbmQpXG4vLyBIb3dldmVyLCBpdCBpcyBub3Qgc2xhdGVkIGZvciByZW1vdmFsIGFueSB0aW1lIHNvb25cbmpRdWVyeS5wcm94eSA9IGZ1bmN0aW9uKCBmbiwgY29udGV4dCApIHtcblx0dmFyIHRtcCwgYXJncywgcHJveHk7XG5cblx0aWYgKCB0eXBlb2YgY29udGV4dCA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHR0bXAgPSBmblsgY29udGV4dCBdO1xuXHRcdGNvbnRleHQgPSBmbjtcblx0XHRmbiA9IHRtcDtcblx0fVxuXG5cdC8vIFF1aWNrIGNoZWNrIHRvIGRldGVybWluZSBpZiB0YXJnZXQgaXMgY2FsbGFibGUsIGluIHRoZSBzcGVjXG5cdC8vIHRoaXMgdGhyb3dzIGEgVHlwZUVycm9yLCBidXQgd2Ugd2lsbCBqdXN0IHJldHVybiB1bmRlZmluZWQuXG5cdGlmICggIWlzRnVuY3Rpb24oIGZuICkgKSB7XG5cdFx0cmV0dXJuIHVuZGVmaW5lZDtcblx0fVxuXG5cdC8vIFNpbXVsYXRlZCBiaW5kXG5cdGFyZ3MgPSBzbGljZS5jYWxsKCBhcmd1bWVudHMsIDIgKTtcblx0cHJveHkgPSBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZm4uYXBwbHkoIGNvbnRleHQgfHwgdGhpcywgYXJncy5jb25jYXQoIHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApICkgKTtcblx0fTtcblxuXHQvLyBTZXQgdGhlIGd1aWQgb2YgdW5pcXVlIGhhbmRsZXIgdG8gdGhlIHNhbWUgb2Ygb3JpZ2luYWwgaGFuZGxlciwgc28gaXQgY2FuIGJlIHJlbW92ZWRcblx0cHJveHkuZ3VpZCA9IGZuLmd1aWQgPSBmbi5ndWlkIHx8IGpRdWVyeS5ndWlkKys7XG5cblx0cmV0dXJuIHByb3h5O1xufTtcblxualF1ZXJ5LmhvbGRSZWFkeSA9IGZ1bmN0aW9uKCBob2xkICkge1xuXHRpZiAoIGhvbGQgKSB7XG5cdFx0alF1ZXJ5LnJlYWR5V2FpdCsrO1xuXHR9IGVsc2Uge1xuXHRcdGpRdWVyeS5yZWFkeSggdHJ1ZSApO1xuXHR9XG59O1xualF1ZXJ5LmlzQXJyYXkgPSBBcnJheS5pc0FycmF5O1xualF1ZXJ5LnBhcnNlSlNPTiA9IEpTT04ucGFyc2U7XG5qUXVlcnkubm9kZU5hbWUgPSBub2RlTmFtZTtcbmpRdWVyeS5pc0Z1bmN0aW9uID0gaXNGdW5jdGlvbjtcbmpRdWVyeS5pc1dpbmRvdyA9IGlzV2luZG93O1xualF1ZXJ5LmNhbWVsQ2FzZSA9IGNhbWVsQ2FzZTtcbmpRdWVyeS50eXBlID0gdG9UeXBlO1xuXG5qUXVlcnkubm93ID0gRGF0ZS5ub3c7XG5cbmpRdWVyeS5pc051bWVyaWMgPSBmdW5jdGlvbiggb2JqICkge1xuXG5cdC8vIEFzIG9mIGpRdWVyeSAzLjAsIGlzTnVtZXJpYyBpcyBsaW1pdGVkIHRvXG5cdC8vIHN0cmluZ3MgYW5kIG51bWJlcnMgKHByaW1pdGl2ZXMgb3Igb2JqZWN0cylcblx0Ly8gdGhhdCBjYW4gYmUgY29lcmNlZCB0byBmaW5pdGUgbnVtYmVycyAoZ2gtMjY2Milcblx0dmFyIHR5cGUgPSBqUXVlcnkudHlwZSggb2JqICk7XG5cdHJldHVybiAoIHR5cGUgPT09IFwibnVtYmVyXCIgfHwgdHlwZSA9PT0gXCJzdHJpbmdcIiApICYmXG5cblx0XHQvLyBwYXJzZUZsb2F0IE5hTnMgbnVtZXJpYy1jYXN0IGZhbHNlIHBvc2l0aXZlcyAoXCJcIilcblx0XHQvLyAuLi5idXQgbWlzaW50ZXJwcmV0cyBsZWFkaW5nLW51bWJlciBzdHJpbmdzLCBwYXJ0aWN1bGFybHkgaGV4IGxpdGVyYWxzIChcIjB4Li4uXCIpXG5cdFx0Ly8gc3VidHJhY3Rpb24gZm9yY2VzIGluZmluaXRpZXMgdG8gTmFOXG5cdFx0IWlzTmFOKCBvYmogLSBwYXJzZUZsb2F0KCBvYmogKSApO1xufTtcblxuXG5cblxuLy8gUmVnaXN0ZXIgYXMgYSBuYW1lZCBBTUQgbW9kdWxlLCBzaW5jZSBqUXVlcnkgY2FuIGJlIGNvbmNhdGVuYXRlZCB3aXRoIG90aGVyXG4vLyBmaWxlcyB0aGF0IG1heSB1c2UgZGVmaW5lLCBidXQgbm90IHZpYSBhIHByb3BlciBjb25jYXRlbmF0aW9uIHNjcmlwdCB0aGF0XG4vLyB1bmRlcnN0YW5kcyBhbm9ueW1vdXMgQU1EIG1vZHVsZXMuIEEgbmFtZWQgQU1EIGlzIHNhZmVzdCBhbmQgbW9zdCByb2J1c3Rcbi8vIHdheSB0byByZWdpc3Rlci4gTG93ZXJjYXNlIGpxdWVyeSBpcyB1c2VkIGJlY2F1c2UgQU1EIG1vZHVsZSBuYW1lcyBhcmVcbi8vIGRlcml2ZWQgZnJvbSBmaWxlIG5hbWVzLCBhbmQgalF1ZXJ5IGlzIG5vcm1hbGx5IGRlbGl2ZXJlZCBpbiBhIGxvd2VyY2FzZVxuLy8gZmlsZSBuYW1lLiBEbyB0aGlzIGFmdGVyIGNyZWF0aW5nIHRoZSBnbG9iYWwgc28gdGhhdCBpZiBhbiBBTUQgbW9kdWxlIHdhbnRzXG4vLyB0byBjYWxsIG5vQ29uZmxpY3QgdG8gaGlkZSB0aGlzIHZlcnNpb24gb2YgalF1ZXJ5LCBpdCB3aWxsIHdvcmsuXG5cbi8vIE5vdGUgdGhhdCBmb3IgbWF4aW11bSBwb3J0YWJpbGl0eSwgbGlicmFyaWVzIHRoYXQgYXJlIG5vdCBqUXVlcnkgc2hvdWxkXG4vLyBkZWNsYXJlIHRoZW1zZWx2ZXMgYXMgYW5vbnltb3VzIG1vZHVsZXMsIGFuZCBhdm9pZCBzZXR0aW5nIGEgZ2xvYmFsIGlmIGFuXG4vLyBBTUQgbG9hZGVyIGlzIHByZXNlbnQuIGpRdWVyeSBpcyBhIHNwZWNpYWwgY2FzZS4gRm9yIG1vcmUgaW5mb3JtYXRpb24sIHNlZVxuLy8gaHR0cHM6Ly9naXRodWIuY29tL2pyYnVya2UvcmVxdWlyZWpzL3dpa2kvVXBkYXRpbmctZXhpc3RpbmctbGlicmFyaWVzI3dpa2ktYW5vblxuXG5pZiAoIHR5cGVvZiBkZWZpbmUgPT09IFwiZnVuY3Rpb25cIiAmJiBkZWZpbmUuYW1kICkge1xuXHRkZWZpbmUoIFwianF1ZXJ5XCIsIFtdLCBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4galF1ZXJ5O1xuXHR9ICk7XG59XG5cblxuXG5cbnZhclxuXG5cdC8vIE1hcCBvdmVyIGpRdWVyeSBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfalF1ZXJ5ID0gd2luZG93LmpRdWVyeSxcblxuXHQvLyBNYXAgb3ZlciB0aGUgJCBpbiBjYXNlIG9mIG92ZXJ3cml0ZVxuXHRfJCA9IHdpbmRvdy4kO1xuXG5qUXVlcnkubm9Db25mbGljdCA9IGZ1bmN0aW9uKCBkZWVwICkge1xuXHRpZiAoIHdpbmRvdy4kID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LiQgPSBfJDtcblx0fVxuXG5cdGlmICggZGVlcCAmJiB3aW5kb3cualF1ZXJ5ID09PSBqUXVlcnkgKSB7XG5cdFx0d2luZG93LmpRdWVyeSA9IF9qUXVlcnk7XG5cdH1cblxuXHRyZXR1cm4galF1ZXJ5O1xufTtcblxuLy8gRXhwb3NlIGpRdWVyeSBhbmQgJCBpZGVudGlmaWVycywgZXZlbiBpbiBBTURcbi8vICgjNzEwMiNjb21tZW50OjEwLCBodHRwczovL2dpdGh1Yi5jb20vanF1ZXJ5L2pxdWVyeS9wdWxsLzU1Nylcbi8vIGFuZCBDb21tb25KUyBmb3IgYnJvd3NlciBlbXVsYXRvcnMgKCMxMzU2NilcbmlmICggIW5vR2xvYmFsICkge1xuXHR3aW5kb3cualF1ZXJ5ID0gd2luZG93LiQgPSBqUXVlcnk7XG59XG5cblxuXG5cbnJldHVybiBqUXVlcnk7XG59ICk7XG4iLCIvKiFcbiAqIE1hdGVyaWFsaXplIHYxLjAuMCAoaHR0cDovL21hdGVyaWFsaXplY3NzLmNvbSlcbiAqIENvcHlyaWdodCAyMDE0LTIwMTcgTWF0ZXJpYWxpemVcbiAqIE1JVCBMaWNlbnNlIChodHRwczovL3Jhdy5naXRodWJ1c2VyY29udGVudC5jb20vRG9nZmFsby9tYXRlcmlhbGl6ZS9tYXN0ZXIvTElDRU5TRSlcbiAqL1xudmFyIF9nZXQgPSBmdW5jdGlvbiBnZXQob2JqZWN0LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpIHsgaWYgKG9iamVjdCA9PT0gbnVsbCkgb2JqZWN0ID0gRnVuY3Rpb24ucHJvdG90eXBlOyB2YXIgZGVzYyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LCBwcm9wZXJ0eSk7IGlmIChkZXNjID09PSB1bmRlZmluZWQpIHsgdmFyIHBhcmVudCA9IE9iamVjdC5nZXRQcm90b3R5cGVPZihvYmplY3QpOyBpZiAocGFyZW50ID09PSBudWxsKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gZWxzZSB7IHJldHVybiBnZXQocGFyZW50LCBwcm9wZXJ0eSwgcmVjZWl2ZXIpOyB9IH0gZWxzZSBpZiAoXCJ2YWx1ZVwiIGluIGRlc2MpIHsgcmV0dXJuIGRlc2MudmFsdWU7IH0gZWxzZSB7IHZhciBnZXR0ZXIgPSBkZXNjLmdldDsgaWYgKGdldHRlciA9PT0gdW5kZWZpbmVkKSB7IHJldHVybiB1bmRlZmluZWQ7IH0gcmV0dXJuIGdldHRlci5jYWxsKHJlY2VpdmVyKTsgfSB9O1xuXG52YXIgX2NyZWF0ZUNsYXNzID0gZnVuY3Rpb24gKCkgeyBmdW5jdGlvbiBkZWZpbmVQcm9wZXJ0aWVzKHRhcmdldCwgcHJvcHMpIHsgZm9yICh2YXIgaSA9IDA7IGkgPCBwcm9wcy5sZW5ndGg7IGkrKykgeyB2YXIgZGVzY3JpcHRvciA9IHByb3BzW2ldOyBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSBkZXNjcmlwdG9yLmVudW1lcmFibGUgfHwgZmFsc2U7IGRlc2NyaXB0b3IuY29uZmlndXJhYmxlID0gdHJ1ZTsgaWYgKFwidmFsdWVcIiBpbiBkZXNjcmlwdG9yKSBkZXNjcmlwdG9yLndyaXRhYmxlID0gdHJ1ZTsgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRhcmdldCwgZGVzY3JpcHRvci5rZXksIGRlc2NyaXB0b3IpOyB9IH0gcmV0dXJuIGZ1bmN0aW9uIChDb25zdHJ1Y3RvciwgcHJvdG9Qcm9wcywgc3RhdGljUHJvcHMpIHsgaWYgKHByb3RvUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IucHJvdG90eXBlLCBwcm90b1Byb3BzKTsgaWYgKHN0YXRpY1Byb3BzKSBkZWZpbmVQcm9wZXJ0aWVzKENvbnN0cnVjdG9yLCBzdGF0aWNQcm9wcyk7IHJldHVybiBDb25zdHJ1Y3RvcjsgfTsgfSgpO1xuXG5mdW5jdGlvbiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihzZWxmLCBjYWxsKSB7IGlmICghc2VsZikgeyB0aHJvdyBuZXcgUmVmZXJlbmNlRXJyb3IoXCJ0aGlzIGhhc24ndCBiZWVuIGluaXRpYWxpc2VkIC0gc3VwZXIoKSBoYXNuJ3QgYmVlbiBjYWxsZWRcIik7IH0gcmV0dXJuIGNhbGwgJiYgKHR5cGVvZiBjYWxsID09PSBcIm9iamVjdFwiIHx8IHR5cGVvZiBjYWxsID09PSBcImZ1bmN0aW9uXCIpID8gY2FsbCA6IHNlbGY7IH1cblxuZnVuY3Rpb24gX2luaGVyaXRzKHN1YkNsYXNzLCBzdXBlckNsYXNzKSB7IGlmICh0eXBlb2Ygc3VwZXJDbGFzcyAhPT0gXCJmdW5jdGlvblwiICYmIHN1cGVyQ2xhc3MgIT09IG51bGwpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIlN1cGVyIGV4cHJlc3Npb24gbXVzdCBlaXRoZXIgYmUgbnVsbCBvciBhIGZ1bmN0aW9uLCBub3QgXCIgKyB0eXBlb2Ygc3VwZXJDbGFzcyk7IH0gc3ViQ2xhc3MucHJvdG90eXBlID0gT2JqZWN0LmNyZWF0ZShzdXBlckNsYXNzICYmIHN1cGVyQ2xhc3MucHJvdG90eXBlLCB7IGNvbnN0cnVjdG9yOiB7IHZhbHVlOiBzdWJDbGFzcywgZW51bWVyYWJsZTogZmFsc2UsIHdyaXRhYmxlOiB0cnVlLCBjb25maWd1cmFibGU6IHRydWUgfSB9KTsgaWYgKHN1cGVyQ2xhc3MpIE9iamVjdC5zZXRQcm90b3R5cGVPZiA/IE9iamVjdC5zZXRQcm90b3R5cGVPZihzdWJDbGFzcywgc3VwZXJDbGFzcykgOiBzdWJDbGFzcy5fX3Byb3RvX18gPSBzdXBlckNsYXNzOyB9XG5cbmZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qISBjYXNoLWRvbSAxLjMuNSwgaHR0cHM6Ly9naXRodWIuY29tL2tlbndoZWVsZXIvY2FzaCBAbGljZW5zZSBNSVQgKi9cbihmdW5jdGlvbiAoZmFjdG9yeSkge1xuICB3aW5kb3cuY2FzaCA9IGZhY3RvcnkoKTtcbn0pKGZ1bmN0aW9uICgpIHtcbiAgdmFyIGRvYyA9IGRvY3VtZW50LFxuICAgICAgd2luID0gd2luZG93LFxuICAgICAgQXJyYXlQcm90byA9IEFycmF5LnByb3RvdHlwZSxcbiAgICAgIHNsaWNlID0gQXJyYXlQcm90by5zbGljZSxcbiAgICAgIGZpbHRlciA9IEFycmF5UHJvdG8uZmlsdGVyLFxuICAgICAgcHVzaCA9IEFycmF5UHJvdG8ucHVzaDtcblxuICB2YXIgbm9vcCA9IGZ1bmN0aW9uICgpIHt9LFxuICAgICAgaXNGdW5jdGlvbiA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgLy8gQHNlZSBodHRwczovL2NyYnVnLmNvbS81Njg0NDhcbiAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09IHR5cGVvZiBub29wICYmIGl0ZW0uY2FsbDtcbiAgfSxcbiAgICAgIGlzU3RyaW5nID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICByZXR1cm4gdHlwZW9mIGl0ZW0gPT09IHR5cGVvZiBcIlwiO1xuICB9O1xuXG4gIHZhciBpZE1hdGNoID0gL14jW1xcdy1dKiQvLFxuICAgICAgY2xhc3NNYXRjaCA9IC9eXFwuW1xcdy1dKiQvLFxuICAgICAgaHRtbE1hdGNoID0gLzwuKz4vLFxuICAgICAgc2luZ2xldCA9IC9eXFx3KyQvO1xuXG4gIGZ1bmN0aW9uIGZpbmQoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICBjb250ZXh0ID0gY29udGV4dCB8fCBkb2M7XG4gICAgdmFyIGVsZW1zID0gY2xhc3NNYXRjaC50ZXN0KHNlbGVjdG9yKSA/IGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZShzZWxlY3Rvci5zbGljZSgxKSkgOiBzaW5nbGV0LnRlc3Qoc2VsZWN0b3IpID8gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZShzZWxlY3RvcikgOiBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoc2VsZWN0b3IpO1xuICAgIHJldHVybiBlbGVtcztcbiAgfVxuXG4gIHZhciBmcmFnO1xuICBmdW5jdGlvbiBwYXJzZUhUTUwoc3RyKSB7XG4gICAgaWYgKCFmcmFnKSB7XG4gICAgICBmcmFnID0gZG9jLmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChudWxsKTtcbiAgICAgIHZhciBiYXNlID0gZnJhZy5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKTtcbiAgICAgIGJhc2UuaHJlZiA9IGRvYy5sb2NhdGlvbi5ocmVmO1xuICAgICAgZnJhZy5oZWFkLmFwcGVuZENoaWxkKGJhc2UpO1xuICAgIH1cblxuICAgIGZyYWcuYm9keS5pbm5lckhUTUwgPSBzdHI7XG5cbiAgICByZXR1cm4gZnJhZy5ib2R5LmNoaWxkTm9kZXM7XG4gIH1cblxuICBmdW5jdGlvbiBvblJlYWR5KGZuKSB7XG4gICAgaWYgKGRvYy5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIikge1xuICAgICAgZm4oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgZG9jLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsIGZuKTtcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBJbml0KHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gSWYgYWxyZWFkeSBhIGNhc2ggY29sbGVjdGlvbiwgZG9uJ3QgZG8gYW55IGZ1cnRoZXIgcHJvY2Vzc2luZ1xuICAgIGlmIChzZWxlY3Rvci5jYXNoICYmIHNlbGVjdG9yICE9PSB3aW4pIHtcbiAgICAgIHJldHVybiBzZWxlY3RvcjtcbiAgICB9XG5cbiAgICB2YXIgZWxlbXMgPSBzZWxlY3RvcixcbiAgICAgICAgaSA9IDAsXG4gICAgICAgIGxlbmd0aDtcblxuICAgIGlmIChpc1N0cmluZyhzZWxlY3RvcikpIHtcbiAgICAgIGVsZW1zID0gaWRNYXRjaC50ZXN0KHNlbGVjdG9yKSA/XG4gICAgICAvLyBJZiBhbiBJRCB1c2UgdGhlIGZhc3RlciBnZXRFbGVtZW50QnlJZCBjaGVja1xuICAgICAgZG9jLmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yLnNsaWNlKDEpKSA6IGh0bWxNYXRjaC50ZXN0KHNlbGVjdG9yKSA/XG4gICAgICAvLyBJZiBIVE1MLCBwYXJzZSBpdCBpbnRvIHJlYWwgZWxlbWVudHNcbiAgICAgIHBhcnNlSFRNTChzZWxlY3RvcikgOlxuICAgICAgLy8gZWxzZSB1c2UgYGZpbmRgXG4gICAgICBmaW5kKHNlbGVjdG9yLCBjb250ZXh0KTtcblxuICAgICAgLy8gSWYgZnVuY3Rpb24sIHVzZSBhcyBzaG9ydGN1dCBmb3IgRE9NIHJlYWR5XG4gICAgfSBlbHNlIGlmIChpc0Z1bmN0aW9uKHNlbGVjdG9yKSkge1xuICAgICAgb25SZWFkeShzZWxlY3Rvcik7cmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgaWYgKCFlbGVtcykge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gSWYgYSBzaW5nbGUgRE9NIGVsZW1lbnQgaXMgcGFzc2VkIGluIG9yIHJlY2VpdmVkIHZpYSBJRCwgcmV0dXJuIHRoZSBzaW5nbGUgZWxlbWVudFxuICAgIGlmIChlbGVtcy5ub2RlVHlwZSB8fCBlbGVtcyA9PT0gd2luKSB7XG4gICAgICB0aGlzWzBdID0gZWxlbXM7XG4gICAgICB0aGlzLmxlbmd0aCA9IDE7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIFRyZWF0IGxpa2UgYW4gYXJyYXkgYW5kIGxvb3AgdGhyb3VnaCBlYWNoIGl0ZW0uXG4gICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aCA9IGVsZW1zLmxlbmd0aDtcbiAgICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgICAgdGhpc1tpXSA9IGVsZW1zW2ldO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZnVuY3Rpb24gY2FzaChzZWxlY3RvciwgY29udGV4dCkge1xuICAgIHJldHVybiBuZXcgSW5pdChzZWxlY3RvciwgY29udGV4dCk7XG4gIH1cblxuICB2YXIgZm4gPSBjYXNoLmZuID0gY2FzaC5wcm90b3R5cGUgPSBJbml0LnByb3RvdHlwZSA9IHsgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgY2FzaDogdHJ1ZSxcbiAgICBsZW5ndGg6IDAsXG4gICAgcHVzaDogcHVzaCxcbiAgICBzcGxpY2U6IEFycmF5UHJvdG8uc3BsaWNlLFxuICAgIG1hcDogQXJyYXlQcm90by5tYXAsXG4gICAgaW5pdDogSW5pdFxuICB9O1xuXG4gIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShmbiwgXCJjb25zdHJ1Y3RvclwiLCB7IHZhbHVlOiBjYXNoIH0pO1xuXG4gIGNhc2gucGFyc2VIVE1MID0gcGFyc2VIVE1MO1xuICBjYXNoLm5vb3AgPSBub29wO1xuICBjYXNoLmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xuICBjYXNoLmlzU3RyaW5nID0gaXNTdHJpbmc7XG5cbiAgY2FzaC5leHRlbmQgPSBmbi5leHRlbmQgPSBmdW5jdGlvbiAodGFyZ2V0KSB7XG4gICAgdGFyZ2V0ID0gdGFyZ2V0IHx8IHt9O1xuXG4gICAgdmFyIGFyZ3MgPSBzbGljZS5jYWxsKGFyZ3VtZW50cyksXG4gICAgICAgIGxlbmd0aCA9IGFyZ3MubGVuZ3RoLFxuICAgICAgICBpID0gMTtcblxuICAgIGlmIChhcmdzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdGFyZ2V0ID0gdGhpcztcbiAgICAgIGkgPSAwO1xuICAgIH1cblxuICAgIGZvciAoOyBpIDwgbGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmICghYXJnc1tpXSkge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cbiAgICAgIGZvciAodmFyIGtleSBpbiBhcmdzW2ldKSB7XG4gICAgICAgIGlmIChhcmdzW2ldLmhhc093blByb3BlcnR5KGtleSkpIHtcbiAgICAgICAgICB0YXJnZXRba2V5XSA9IGFyZ3NbaV1ba2V5XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0YXJnZXQ7XG4gIH07XG5cbiAgZnVuY3Rpb24gZWFjaChjb2xsZWN0aW9uLCBjYWxsYmFjaykge1xuICAgIHZhciBsID0gY29sbGVjdGlvbi5sZW5ndGgsXG4gICAgICAgIGkgPSAwO1xuXG4gICAgZm9yICg7IGkgPCBsOyBpKyspIHtcbiAgICAgIGlmIChjYWxsYmFjay5jYWxsKGNvbGxlY3Rpb25baV0sIGNvbGxlY3Rpb25baV0sIGksIGNvbGxlY3Rpb24pID09PSBmYWxzZSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBtYXRjaGVzKGVsLCBzZWxlY3Rvcikge1xuICAgIHZhciBtID0gZWwgJiYgKGVsLm1hdGNoZXMgfHwgZWwud2Via2l0TWF0Y2hlc1NlbGVjdG9yIHx8IGVsLm1vek1hdGNoZXNTZWxlY3RvciB8fCBlbC5tc01hdGNoZXNTZWxlY3RvciB8fCBlbC5vTWF0Y2hlc1NlbGVjdG9yKTtcbiAgICByZXR1cm4gISFtICYmIG0uY2FsbChlbCwgc2VsZWN0b3IpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKSB7XG4gICAgcmV0dXJuIChcbiAgICAgIC8qIFVzZSBicm93c2VyJ3MgYG1hdGNoZXNgIGZ1bmN0aW9uIGlmIHN0cmluZyAqL1xuICAgICAgaXNTdHJpbmcoc2VsZWN0b3IpID8gbWF0Y2hlcyA6XG4gICAgICAvKiBNYXRjaCBhIGNhc2ggZWxlbWVudCAqL1xuICAgICAgc2VsZWN0b3IuY2FzaCA/IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gc2VsZWN0b3IuaXMoZWwpO1xuICAgICAgfSA6XG4gICAgICAvKiBEaXJlY3QgY29tcGFyaXNvbiAqL1xuICAgICAgZnVuY3Rpb24gKGVsLCBzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gZWwgPT09IHNlbGVjdG9yO1xuICAgICAgfVxuICAgICk7XG4gIH1cblxuICBmdW5jdGlvbiB1bmlxdWUoY29sbGVjdGlvbikge1xuICAgIHJldHVybiBjYXNoKHNsaWNlLmNhbGwoY29sbGVjdGlvbikuZmlsdGVyKGZ1bmN0aW9uIChpdGVtLCBpbmRleCwgc2VsZikge1xuICAgICAgcmV0dXJuIHNlbGYuaW5kZXhPZihpdGVtKSA9PT0gaW5kZXg7XG4gICAgfSkpO1xuICB9XG5cbiAgY2FzaC5leHRlbmQoe1xuICAgIG1lcmdlOiBmdW5jdGlvbiAoZmlyc3QsIHNlY29uZCkge1xuICAgICAgdmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuICAgICAgICAgIGkgPSBmaXJzdC5sZW5ndGgsXG4gICAgICAgICAgaiA9IDA7XG5cbiAgICAgIGZvciAoOyBqIDwgbGVuOyBpKyssIGorKykge1xuICAgICAgICBmaXJzdFtpXSA9IHNlY29uZFtqXTtcbiAgICAgIH1cblxuICAgICAgZmlyc3QubGVuZ3RoID0gaTtcbiAgICAgIHJldHVybiBmaXJzdDtcbiAgICB9LFxuXG4gICAgZWFjaDogZWFjaCxcbiAgICBtYXRjaGVzOiBtYXRjaGVzLFxuICAgIHVuaXF1ZTogdW5pcXVlLFxuICAgIGlzQXJyYXk6IEFycmF5LmlzQXJyYXksXG4gICAgaXNOdW1lcmljOiBmdW5jdGlvbiAobikge1xuICAgICAgcmV0dXJuICFpc05hTihwYXJzZUZsb2F0KG4pKSAmJiBpc0Zpbml0ZShuKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgdmFyIHVpZCA9IGNhc2gudWlkID0gXCJfY2FzaFwiICsgRGF0ZS5ub3coKTtcblxuICBmdW5jdGlvbiBnZXREYXRhQ2FjaGUobm9kZSkge1xuICAgIHJldHVybiBub2RlW3VpZF0gPSBub2RlW3VpZF0gfHwge307XG4gIH1cblxuICBmdW5jdGlvbiBzZXREYXRhKG5vZGUsIGtleSwgdmFsdWUpIHtcbiAgICByZXR1cm4gZ2V0RGF0YUNhY2hlKG5vZGUpW2tleV0gPSB2YWx1ZTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERhdGEobm9kZSwga2V5KSB7XG4gICAgdmFyIGMgPSBnZXREYXRhQ2FjaGUobm9kZSk7XG4gICAgaWYgKGNba2V5XSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICBjW2tleV0gPSBub2RlLmRhdGFzZXQgPyBub2RlLmRhdGFzZXRba2V5XSA6IGNhc2gobm9kZSkuYXR0cihcImRhdGEtXCIgKyBrZXkpO1xuICAgIH1cbiAgICByZXR1cm4gY1trZXldO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlRGF0YShub2RlLCBrZXkpIHtcbiAgICB2YXIgYyA9IGdldERhdGFDYWNoZShub2RlKTtcbiAgICBpZiAoYykge1xuICAgICAgZGVsZXRlIGNba2V5XTtcbiAgICB9IGVsc2UgaWYgKG5vZGUuZGF0YXNldCkge1xuICAgICAgZGVsZXRlIG5vZGUuZGF0YXNldFtrZXldO1xuICAgIH0gZWxzZSB7XG4gICAgICBjYXNoKG5vZGUpLnJlbW92ZUF0dHIoXCJkYXRhLVwiICsgbmFtZSk7XG4gICAgfVxuICB9XG5cbiAgZm4uZXh0ZW5kKHtcbiAgICBkYXRhOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1N0cmluZyhuYW1lKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IGdldERhdGEodGhpc1swXSwgbmFtZSkgOiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICByZXR1cm4gc2V0RGF0YSh2LCBuYW1lLCB2YWx1ZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICB0aGlzLmRhdGEoa2V5LCBuYW1lW2tleV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgcmVtb3ZlRGF0YTogZnVuY3Rpb24gKGtleSkge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gcmVtb3ZlRGF0YSh2LCBrZXkpO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIHZhciBub3RXaGl0ZU1hdGNoID0gL1xcUysvZztcblxuICBmdW5jdGlvbiBnZXRDbGFzc2VzKGMpIHtcbiAgICByZXR1cm4gaXNTdHJpbmcoYykgJiYgYy5tYXRjaChub3RXaGl0ZU1hdGNoKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGhhc0NsYXNzKHYsIGMpIHtcbiAgICByZXR1cm4gdi5jbGFzc0xpc3QgPyB2LmNsYXNzTGlzdC5jb250YWlucyhjKSA6IG5ldyBSZWdFeHAoXCIoXnwgKVwiICsgYyArIFwiKCB8JClcIiwgXCJnaVwiKS50ZXN0KHYuY2xhc3NOYW1lKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGFkZENsYXNzKHYsIGMsIHNwYWNlZE5hbWUpIHtcbiAgICBpZiAodi5jbGFzc0xpc3QpIHtcbiAgICAgIHYuY2xhc3NMaXN0LmFkZChjKTtcbiAgICB9IGVsc2UgaWYgKHNwYWNlZE5hbWUuaW5kZXhPZihcIiBcIiArIGMgKyBcIiBcIikpIHtcbiAgICAgIHYuY2xhc3NOYW1lICs9IFwiIFwiICsgYztcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVDbGFzcyh2LCBjKSB7XG4gICAgaWYgKHYuY2xhc3NMaXN0KSB7XG4gICAgICB2LmNsYXNzTGlzdC5yZW1vdmUoYyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHYuY2xhc3NOYW1lID0gdi5jbGFzc05hbWUucmVwbGFjZShjLCBcIlwiKTtcbiAgICB9XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIGFkZENsYXNzOiBmdW5jdGlvbiAoYykge1xuICAgICAgdmFyIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpO1xuXG4gICAgICByZXR1cm4gY2xhc3NlcyA/IHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICB2YXIgc3BhY2VkTmFtZSA9IFwiIFwiICsgdi5jbGFzc05hbWUgKyBcIiBcIjtcbiAgICAgICAgZWFjaChjbGFzc2VzLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgIGFkZENsYXNzKHYsIGMsIHNwYWNlZE5hbWUpO1xuICAgICAgICB9KTtcbiAgICAgIH0pIDogdGhpcztcbiAgICB9LFxuXG4gICAgYXR0cjogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgaWYgKGlzU3RyaW5nKG5hbWUpKSB7XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNbMF0gPyB0aGlzWzBdLmdldEF0dHJpYnV0ZSA/IHRoaXNbMF0uZ2V0QXR0cmlidXRlKG5hbWUpIDogdGhpc1swXVtuYW1lXSA6IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBpZiAodi5zZXRBdHRyaWJ1dGUpIHtcbiAgICAgICAgICAgIHYuc2V0QXR0cmlidXRlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdltuYW1lXSA9IHZhbHVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICAgIHRoaXMuYXR0cihrZXksIG5hbWVba2V5XSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBoYXNDbGFzczogZnVuY3Rpb24gKGMpIHtcbiAgICAgIHZhciBjaGVjayA9IGZhbHNlLFxuICAgICAgICAgIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpO1xuICAgICAgaWYgKGNsYXNzZXMgJiYgY2xhc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgY2hlY2sgPSBoYXNDbGFzcyh2LCBjbGFzc2VzWzBdKTtcbiAgICAgICAgICByZXR1cm4gIWNoZWNrO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBjaGVjaztcbiAgICB9LFxuXG4gICAgcHJvcDogZnVuY3Rpb24gKG5hbWUsIHZhbHVlKSB7XG4gICAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlID09PSB1bmRlZmluZWQgPyB0aGlzWzBdW25hbWVdIDogdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgdltuYW1lXSA9IHZhbHVlO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgdGhpcy5wcm9wKGtleSwgbmFtZVtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIHJlbW92ZUF0dHI6IGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICh2LnJlbW92ZUF0dHJpYnV0ZSkge1xuICAgICAgICAgIHYucmVtb3ZlQXR0cmlidXRlKG5hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSB2W25hbWVdO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgcmVtb3ZlQ2xhc3M6IGZ1bmN0aW9uIChjKSB7XG4gICAgICBpZiAoIWFyZ3VtZW50cy5sZW5ndGgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuYXR0cihcImNsYXNzXCIsIFwiXCIpO1xuICAgICAgfVxuICAgICAgdmFyIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpO1xuICAgICAgcmV0dXJuIGNsYXNzZXMgPyB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgZWFjaChjbGFzc2VzLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgIHJlbW92ZUNsYXNzKHYsIGMpO1xuICAgICAgICB9KTtcbiAgICAgIH0pIDogdGhpcztcbiAgICB9LFxuXG4gICAgcmVtb3ZlUHJvcDogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgZGVsZXRlIHZbbmFtZV07XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgdG9nZ2xlQ2xhc3M6IGZ1bmN0aW9uIChjLCBzdGF0ZSkge1xuICAgICAgaWYgKHN0YXRlICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbc3RhdGUgPyBcImFkZENsYXNzXCIgOiBcInJlbW92ZUNsYXNzXCJdKGMpO1xuICAgICAgfVxuICAgICAgdmFyIGNsYXNzZXMgPSBnZXRDbGFzc2VzKGMpO1xuICAgICAgcmV0dXJuIGNsYXNzZXMgPyB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFyIHNwYWNlZE5hbWUgPSBcIiBcIiArIHYuY2xhc3NOYW1lICsgXCIgXCI7XG4gICAgICAgIGVhY2goY2xhc3NlcywgZnVuY3Rpb24gKGMpIHtcbiAgICAgICAgICBpZiAoaGFzQ2xhc3ModiwgYykpIHtcbiAgICAgICAgICAgIHJlbW92ZUNsYXNzKHYsIGMpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBhZGRDbGFzcyh2LCBjLCBzcGFjZWROYW1lKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSkgOiB0aGlzO1xuICAgIH0gfSk7XG5cbiAgZm4uZXh0ZW5kKHtcbiAgICBhZGQ6IGZ1bmN0aW9uIChzZWxlY3RvciwgY29udGV4dCkge1xuICAgICAgcmV0dXJuIHVuaXF1ZShjYXNoLm1lcmdlKHRoaXMsIGNhc2goc2VsZWN0b3IsIGNvbnRleHQpKSk7XG4gICAgfSxcblxuICAgIGVhY2g6IGZ1bmN0aW9uIChjYWxsYmFjaykge1xuICAgICAgZWFjaCh0aGlzLCBjYWxsYmFjayk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgZXE6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgcmV0dXJuIGNhc2godGhpcy5nZXQoaW5kZXgpKTtcbiAgICB9LFxuXG4gICAgZmlsdGVyOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21wYXJhdG9yID0gaXNGdW5jdGlvbihzZWxlY3RvcikgPyBzZWxlY3RvciA6IGdldENvbXBhcmVGdW5jdGlvbihzZWxlY3Rvcik7XG5cbiAgICAgIHJldHVybiBjYXNoKGZpbHRlci5jYWxsKHRoaXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgIHJldHVybiBjb21wYXJhdG9yKGUsIHNlbGVjdG9yKTtcbiAgICAgIH0pKTtcbiAgICB9LFxuXG4gICAgZmlyc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVxKDApO1xuICAgIH0sXG5cbiAgICBnZXQ6IGZ1bmN0aW9uIChpbmRleCkge1xuICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHNsaWNlLmNhbGwodGhpcyk7XG4gICAgICB9XG4gICAgICByZXR1cm4gaW5kZXggPCAwID8gdGhpc1tpbmRleCArIHRoaXMubGVuZ3RoXSA6IHRoaXNbaW5kZXhdO1xuICAgIH0sXG5cbiAgICBpbmRleDogZnVuY3Rpb24gKGVsZW0pIHtcbiAgICAgIHZhciBjaGlsZCA9IGVsZW0gPyBjYXNoKGVsZW0pWzBdIDogdGhpc1swXSxcbiAgICAgICAgICBjb2xsZWN0aW9uID0gZWxlbSA/IHRoaXMgOiBjYXNoKGNoaWxkKS5wYXJlbnQoKS5jaGlsZHJlbigpO1xuICAgICAgcmV0dXJuIHNsaWNlLmNhbGwoY29sbGVjdGlvbikuaW5kZXhPZihjaGlsZCk7XG4gICAgfSxcblxuICAgIGxhc3Q6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVxKC0xKTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgdmFyIGNhbWVsQ2FzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FtZWxSZWdleCA9IC8oPzpeXFx3fFtBLVpdfFxcYlxcdykvZyxcbiAgICAgICAgd2hpdGVTcGFjZSA9IC9bXFxzLV9dKy9nO1xuICAgIHJldHVybiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICByZXR1cm4gc3RyLnJlcGxhY2UoY2FtZWxSZWdleCwgZnVuY3Rpb24gKGxldHRlciwgaW5kZXgpIHtcbiAgICAgICAgcmV0dXJuIGxldHRlcltpbmRleCA9PT0gMCA/IFwidG9Mb3dlckNhc2VcIiA6IFwidG9VcHBlckNhc2VcIl0oKTtcbiAgICAgIH0pLnJlcGxhY2Uod2hpdGVTcGFjZSwgXCJcIik7XG4gICAgfTtcbiAgfSgpO1xuXG4gIHZhciBnZXRQcmVmaXhlZFByb3AgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGNhY2hlID0ge30sXG4gICAgICAgIGRvYyA9IGRvY3VtZW50LFxuICAgICAgICBkaXYgPSBkb2MuY3JlYXRlRWxlbWVudChcImRpdlwiKSxcbiAgICAgICAgc3R5bGUgPSBkaXYuc3R5bGU7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24gKHByb3ApIHtcbiAgICAgIHByb3AgPSBjYW1lbENhc2UocHJvcCk7XG4gICAgICBpZiAoY2FjaGVbcHJvcF0pIHtcbiAgICAgICAgcmV0dXJuIGNhY2hlW3Byb3BdO1xuICAgICAgfVxuXG4gICAgICB2YXIgdWNQcm9wID0gcHJvcC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHByb3Auc2xpY2UoMSksXG4gICAgICAgICAgcHJlZml4ZXMgPSBbXCJ3ZWJraXRcIiwgXCJtb3pcIiwgXCJtc1wiLCBcIm9cIl0sXG4gICAgICAgICAgcHJvcHMgPSAocHJvcCArIFwiIFwiICsgcHJlZml4ZXMuam9pbih1Y1Byb3AgKyBcIiBcIikgKyB1Y1Byb3ApLnNwbGl0KFwiIFwiKTtcblxuICAgICAgZWFjaChwcm9wcywgZnVuY3Rpb24gKHApIHtcbiAgICAgICAgaWYgKHAgaW4gc3R5bGUpIHtcbiAgICAgICAgICBjYWNoZVtwXSA9IHByb3AgPSBjYWNoZVtwcm9wXSA9IHA7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIGNhY2hlW3Byb3BdO1xuICAgIH07XG4gIH0oKTtcblxuICBjYXNoLnByZWZpeGVkUHJvcCA9IGdldFByZWZpeGVkUHJvcDtcbiAgY2FzaC5jYW1lbENhc2UgPSBjYW1lbENhc2U7XG5cbiAgZm4uZXh0ZW5kKHtcbiAgICBjc3M6IGZ1bmN0aW9uIChwcm9wLCB2YWx1ZSkge1xuICAgICAgaWYgKGlzU3RyaW5nKHByb3ApKSB7XG4gICAgICAgIHByb3AgPSBnZXRQcmVmaXhlZFByb3AocHJvcCk7XG4gICAgICAgIHJldHVybiBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgIHJldHVybiB2LnN0eWxlW3Byb3BdID0gdmFsdWU7XG4gICAgICAgIH0pIDogd2luLmdldENvbXB1dGVkU3R5bGUodGhpc1swXSlbcHJvcF07XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBwcm9wKSB7XG4gICAgICAgIHRoaXMuY3NzKGtleSwgcHJvcFtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGNvbXB1dGUoZWwsIHByb3ApIHtcbiAgICByZXR1cm4gcGFyc2VJbnQod2luLmdldENvbXB1dGVkU3R5bGUoZWxbMF0sIG51bGwpW3Byb3BdLCAxMCkgfHwgMDtcbiAgfVxuXG4gIGVhY2goW1wiV2lkdGhcIiwgXCJIZWlnaHRcIl0sIGZ1bmN0aW9uICh2KSB7XG4gICAgdmFyIGxvd2VyID0gdi50b0xvd2VyQ2FzZSgpO1xuXG4gICAgZm5bbG93ZXJdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXNbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KClbbG93ZXJdO1xuICAgIH07XG5cbiAgICBmbltcImlubmVyXCIgKyB2XSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzWzBdW1wiY2xpZW50XCIgKyB2XTtcbiAgICB9O1xuXG4gICAgZm5bXCJvdXRlclwiICsgdl0gPSBmdW5jdGlvbiAobWFyZ2lucykge1xuICAgICAgcmV0dXJuIHRoaXNbMF1bXCJvZmZzZXRcIiArIHZdICsgKG1hcmdpbnMgPyBjb21wdXRlKHRoaXMsIFwibWFyZ2luXCIgKyAodiA9PT0gXCJXaWR0aFwiID8gXCJMZWZ0XCIgOiBcIlRvcFwiKSkgKyBjb21wdXRlKHRoaXMsIFwibWFyZ2luXCIgKyAodiA9PT0gXCJXaWR0aFwiID8gXCJSaWdodFwiIDogXCJCb3R0b21cIikpIDogMCk7XG4gICAgfTtcbiAgfSk7XG5cbiAgZnVuY3Rpb24gcmVnaXN0ZXJFdmVudChub2RlLCBldmVudE5hbWUsIGNhbGxiYWNrKSB7XG4gICAgdmFyIGV2ZW50Q2FjaGUgPSBnZXREYXRhKG5vZGUsIFwiX2Nhc2hFdmVudHNcIikgfHwgc2V0RGF0YShub2RlLCBcIl9jYXNoRXZlbnRzXCIsIHt9KTtcbiAgICBldmVudENhY2hlW2V2ZW50TmFtZV0gPSBldmVudENhY2hlW2V2ZW50TmFtZV0gfHwgW107XG4gICAgZXZlbnRDYWNoZVtldmVudE5hbWVdLnB1c2goY2FsbGJhY2spO1xuICAgIG5vZGUuYWRkRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGNhbGxiYWNrKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUV2ZW50KG5vZGUsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgZXZlbnRzID0gZ2V0RGF0YShub2RlLCBcIl9jYXNoRXZlbnRzXCIpLFxuICAgICAgICBldmVudENhY2hlID0gZXZlbnRzICYmIGV2ZW50c1tldmVudE5hbWVdLFxuICAgICAgICBpbmRleDtcblxuICAgIGlmICghZXZlbnRDYWNoZSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChjYWxsYmFjaykge1xuICAgICAgbm9kZS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgICAgaW5kZXggPSBldmVudENhY2hlLmluZGV4T2YoY2FsbGJhY2spO1xuICAgICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgZXZlbnRDYWNoZS5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBlYWNoKGV2ZW50Q2FjaGUsIGZ1bmN0aW9uIChldmVudCkge1xuICAgICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBldmVudCk7XG4gICAgICB9KTtcbiAgICAgIGV2ZW50Q2FjaGUgPSBbXTtcbiAgICB9XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIG9mZjogZnVuY3Rpb24gKGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHJlbW92ZUV2ZW50KHYsIGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIG9uOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBkZWxlZ2F0ZSwgY2FsbGJhY2ssIHJ1bk9uY2UpIHtcbiAgICAgIC8vIGpzaGludCBpZ25vcmU6bGluZVxuICAgICAgdmFyIG9yaWdpbmFsQ2FsbGJhY2s7XG4gICAgICBpZiAoIWlzU3RyaW5nKGV2ZW50TmFtZSkpIHtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIGV2ZW50TmFtZSkge1xuICAgICAgICAgIHRoaXMub24oa2V5LCBkZWxlZ2F0ZSwgZXZlbnROYW1lW2tleV0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNGdW5jdGlvbihkZWxlZ2F0ZSkpIHtcbiAgICAgICAgY2FsbGJhY2sgPSBkZWxlZ2F0ZTtcbiAgICAgICAgZGVsZWdhdGUgPSBudWxsO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnROYW1lID09PSBcInJlYWR5XCIpIHtcbiAgICAgICAgb25SZWFkeShjYWxsYmFjayk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICBpZiAoZGVsZWdhdGUpIHtcbiAgICAgICAgb3JpZ2luYWxDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBjYWxsYmFjayA9IGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgdmFyIHQgPSBlLnRhcmdldDtcbiAgICAgICAgICB3aGlsZSAoIW1hdGNoZXModCwgZGVsZWdhdGUpKSB7XG4gICAgICAgICAgICBpZiAodCA9PT0gdGhpcyB8fCB0ID09PSBudWxsKSB7XG4gICAgICAgICAgICAgIHJldHVybiB0ID0gZmFsc2U7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHQgPSB0LnBhcmVudE5vZGU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHQpIHtcbiAgICAgICAgICAgIG9yaWdpbmFsQ2FsbGJhY2suY2FsbCh0LCBlKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgdmFyIGZpbmFsQ2FsbGJhY2sgPSBjYWxsYmFjaztcbiAgICAgICAgaWYgKHJ1bk9uY2UpIHtcbiAgICAgICAgICBmaW5hbENhbGxiYWNrID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIHJlbW92ZUV2ZW50KHYsIGV2ZW50TmFtZSwgZmluYWxDYWxsYmFjayk7XG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgICByZWdpc3RlckV2ZW50KHYsIGV2ZW50TmFtZSwgZmluYWxDYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgb25lOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBkZWxlZ2F0ZSwgY2FsbGJhY2spIHtcbiAgICAgIHJldHVybiB0aGlzLm9uKGV2ZW50TmFtZSwgZGVsZWdhdGUsIGNhbGxiYWNrLCB0cnVlKTtcbiAgICB9LFxuXG4gICAgcmVhZHk6IG9uUmVhZHksXG5cbiAgICAvKipcbiAgICAgKiBNb2RpZmllZFxuICAgICAqIFRyaWdnZXJzIGJyb3dzZXIgZXZlbnRcbiAgICAgKiBAcGFyYW0gU3RyaW5nIGV2ZW50TmFtZVxuICAgICAqIEBwYXJhbSBPYmplY3QgZGF0YSAtIEFkZCBwcm9wZXJ0aWVzIHRvIGV2ZW50IG9iamVjdFxuICAgICAqL1xuICAgIHRyaWdnZXI6IGZ1bmN0aW9uIChldmVudE5hbWUsIGRhdGEpIHtcbiAgICAgIGlmIChkb2N1bWVudC5jcmVhdGVFdmVudCkge1xuICAgICAgICB2YXIgZXZ0ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0hUTUxFdmVudHMnKTtcbiAgICAgICAgZXZ0LmluaXRFdmVudChldmVudE5hbWUsIHRydWUsIGZhbHNlKTtcbiAgICAgICAgZXZ0ID0gdGhpcy5leHRlbmQoZXZ0LCBkYXRhKTtcbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgIHJldHVybiB2LmRpc3BhdGNoRXZlbnQoZXZ0KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGVuY29kZShuYW1lLCB2YWx1ZSkge1xuICAgIHJldHVybiBcIiZcIiArIGVuY29kZVVSSUNvbXBvbmVudChuYW1lKSArIFwiPVwiICsgZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKS5yZXBsYWNlKC8lMjAvZywgXCIrXCIpO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2VsZWN0TXVsdGlwbGVfKGVsKSB7XG4gICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgIGVhY2goZWwub3B0aW9ucywgZnVuY3Rpb24gKG8pIHtcbiAgICAgIGlmIChvLnNlbGVjdGVkKSB7XG4gICAgICAgIHZhbHVlcy5wdXNoKG8udmFsdWUpO1xuICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB2YWx1ZXMubGVuZ3RoID8gdmFsdWVzIDogbnVsbDtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFNlbGVjdFNpbmdsZV8oZWwpIHtcbiAgICB2YXIgc2VsZWN0ZWRJbmRleCA9IGVsLnNlbGVjdGVkSW5kZXg7XG4gICAgcmV0dXJuIHNlbGVjdGVkSW5kZXggPj0gMCA/IGVsLm9wdGlvbnNbc2VsZWN0ZWRJbmRleF0udmFsdWUgOiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0VmFsdWUoZWwpIHtcbiAgICB2YXIgdHlwZSA9IGVsLnR5cGU7XG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgc3dpdGNoICh0eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgIGNhc2UgXCJzZWxlY3Qtb25lXCI6XG4gICAgICAgIHJldHVybiBnZXRTZWxlY3RTaW5nbGVfKGVsKTtcbiAgICAgIGNhc2UgXCJzZWxlY3QtbXVsdGlwbGVcIjpcbiAgICAgICAgcmV0dXJuIGdldFNlbGVjdE11bHRpcGxlXyhlbCk7XG4gICAgICBjYXNlIFwicmFkaW9cIjpcbiAgICAgICAgcmV0dXJuIGVsLmNoZWNrZWQgPyBlbC52YWx1ZSA6IG51bGw7XG4gICAgICBjYXNlIFwiY2hlY2tib3hcIjpcbiAgICAgICAgcmV0dXJuIGVsLmNoZWNrZWQgPyBlbC52YWx1ZSA6IG51bGw7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICByZXR1cm4gZWwudmFsdWUgPyBlbC52YWx1ZSA6IG51bGw7XG4gICAgfVxuICB9XG5cbiAgZm4uZXh0ZW5kKHtcbiAgICBzZXJpYWxpemU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBxdWVyeSA9IFwiXCI7XG5cbiAgICAgIGVhY2godGhpc1swXS5lbGVtZW50cyB8fCB0aGlzLCBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgaWYgKGVsLmRpc2FibGVkIHx8IGVsLnRhZ05hbWUgPT09IFwiRklFTERTRVRcIikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmFtZSA9IGVsLm5hbWU7XG4gICAgICAgIHN3aXRjaCAoZWwudHlwZS50b0xvd2VyQ2FzZSgpKSB7XG4gICAgICAgICAgY2FzZSBcImZpbGVcIjpcbiAgICAgICAgICBjYXNlIFwicmVzZXRcIjpcbiAgICAgICAgICBjYXNlIFwic3VibWl0XCI6XG4gICAgICAgICAgY2FzZSBcImJ1dHRvblwiOlxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgY2FzZSBcInNlbGVjdC1tdWx0aXBsZVwiOlxuICAgICAgICAgICAgdmFyIHZhbHVlcyA9IGdldFZhbHVlKGVsKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZXMgIT09IG51bGwpIHtcbiAgICAgICAgICAgICAgZWFjaCh2YWx1ZXMsIGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgICAgICAgIHF1ZXJ5ICs9IGVuY29kZShuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHZhciB2YWx1ZSA9IGdldFZhbHVlKGVsKTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBxdWVyeSArPSBlbmNvZGUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHF1ZXJ5LnN1YnN0cigxKTtcbiAgICB9LFxuXG4gICAgdmFsOiBmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiBnZXRWYWx1ZSh0aGlzWzBdKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdi52YWx1ZSA9IHZhbHVlO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIGluc2VydEVsZW1lbnQoZWwsIGNoaWxkLCBwcmVwZW5kKSB7XG4gICAgaWYgKHByZXBlbmQpIHtcbiAgICAgIHZhciBmaXJzdCA9IGVsLmNoaWxkTm9kZXNbMF07XG4gICAgICBlbC5pbnNlcnRCZWZvcmUoY2hpbGQsIGZpcnN0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgZWwuYXBwZW5kQ2hpbGQoY2hpbGQpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGluc2VydENvbnRlbnQocGFyZW50LCBjaGlsZCwgcHJlcGVuZCkge1xuICAgIHZhciBzdHIgPSBpc1N0cmluZyhjaGlsZCk7XG5cbiAgICBpZiAoIXN0ciAmJiBjaGlsZC5sZW5ndGgpIHtcbiAgICAgIGVhY2goY2hpbGQsIGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiBpbnNlcnRDb250ZW50KHBhcmVudCwgdiwgcHJlcGVuZCk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBlYWNoKHBhcmVudCwgc3RyID8gZnVuY3Rpb24gKHYpIHtcbiAgICAgIHJldHVybiB2Lmluc2VydEFkamFjZW50SFRNTChwcmVwZW5kID8gXCJhZnRlcmJlZ2luXCIgOiBcImJlZm9yZWVuZFwiLCBjaGlsZCk7XG4gICAgfSA6IGZ1bmN0aW9uICh2LCBpKSB7XG4gICAgICByZXR1cm4gaW5zZXJ0RWxlbWVudCh2LCBpID09PSAwID8gY2hpbGQgOiBjaGlsZC5jbG9uZU5vZGUodHJ1ZSksIHByZXBlbmQpO1xuICAgIH0pO1xuICB9XG5cbiAgZm4uZXh0ZW5kKHtcbiAgICBhZnRlcjogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICBjYXNoKHNlbGVjdG9yKS5pbnNlcnRBZnRlcih0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBhcHBlbmQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICBpbnNlcnRDb250ZW50KHRoaXMsIGNvbnRlbnQpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGFwcGVuZFRvOiBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICBpbnNlcnRDb250ZW50KGNhc2gocGFyZW50KSwgdGhpcyk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgYmVmb3JlOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGNhc2goc2VsZWN0b3IpLmluc2VydEJlZm9yZSh0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBjbG9uZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNhc2godGhpcy5tYXAoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHYuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgfSkpO1xuICAgIH0sXG5cbiAgICBlbXB0eTogZnVuY3Rpb24gKCkge1xuICAgICAgdGhpcy5odG1sKFwiXCIpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGh0bWw6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdLmlubmVySFRNTDtcbiAgICAgIH1cbiAgICAgIHZhciBzb3VyY2UgPSBjb250ZW50Lm5vZGVUeXBlID8gY29udGVudFswXS5vdXRlckhUTUwgOiBjb250ZW50O1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdi5pbm5lckhUTUwgPSBzb3VyY2U7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgaW5zZXJ0QWZ0ZXI6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIF90aGlzID0gdGhpcztcblxuICAgICAgY2FzaChzZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGUsXG4gICAgICAgICAgICBzaWJsaW5nID0gZWwubmV4dFNpYmxpbmc7XG4gICAgICAgIF90aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGkgPT09IDAgPyB2IDogdi5jbG9uZU5vZGUodHJ1ZSksIHNpYmxpbmcpO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgaW5zZXJ0QmVmb3JlOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIHZhciBfdGhpczIgPSB0aGlzO1xuICAgICAgY2FzaChzZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG4gICAgICAgIF90aGlzMi5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcGFyZW50Lmluc2VydEJlZm9yZShpID09PSAwID8gdiA6IHYuY2xvbmVOb2RlKHRydWUpLCBlbCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgcHJlcGVuZDogZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgIGluc2VydENvbnRlbnQodGhpcywgY29udGVudCwgdHJ1ZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgcHJlcGVuZFRvOiBmdW5jdGlvbiAocGFyZW50KSB7XG4gICAgICBpbnNlcnRDb250ZW50KGNhc2gocGFyZW50KSwgdGhpcywgdHJ1ZSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgcmVtb3ZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIGlmICghIXYucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHJldHVybiB2LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB0ZXh0OiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgaWYgKGNvbnRlbnQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpc1swXS50ZXh0Q29udGVudDtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIHYudGV4dENvbnRlbnQgPSBjb250ZW50O1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIHZhciBkb2NFbCA9IGRvYy5kb2N1bWVudEVsZW1lbnQ7XG5cbiAgZm4uZXh0ZW5kKHtcbiAgICBwb3NpdGlvbjogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGVsID0gdGhpc1swXTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGxlZnQ6IGVsLm9mZnNldExlZnQsXG4gICAgICAgIHRvcDogZWwub2Zmc2V0VG9wXG4gICAgICB9O1xuICAgIH0sXG5cbiAgICBvZmZzZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZWN0ID0gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIHRvcDogcmVjdC50b3AgKyB3aW4ucGFnZVlPZmZzZXQgLSBkb2NFbC5jbGllbnRUb3AsXG4gICAgICAgIGxlZnQ6IHJlY3QubGVmdCArIHdpbi5wYWdlWE9mZnNldCAtIGRvY0VsLmNsaWVudExlZnRcbiAgICAgIH07XG4gICAgfSxcblxuICAgIG9mZnNldFBhcmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNhc2godGhpc1swXS5vZmZzZXRQYXJlbnQpO1xuICAgIH1cblxuICB9KTtcblxuICBmbi5leHRlbmQoe1xuICAgIGNoaWxkcmVuOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIHZhciBlbGVtcyA9IFtdO1xuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBwdXNoLmFwcGx5KGVsZW1zLCBlbC5jaGlsZHJlbik7XG4gICAgICB9KTtcbiAgICAgIGVsZW1zID0gdW5pcXVlKGVsZW1zKTtcblxuICAgICAgcmV0dXJuICFzZWxlY3RvciA/IGVsZW1zIDogZWxlbXMuZmlsdGVyKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiBtYXRjaGVzKHYsIHNlbGVjdG9yKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBjbG9zZXN0OiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGlmICghc2VsZWN0b3IgfHwgdGhpcy5sZW5ndGggPCAxKSB7XG4gICAgICAgIHJldHVybiBjYXNoKCk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5pcyhzZWxlY3RvcikpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKHNlbGVjdG9yKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB0aGlzLnBhcmVudCgpLmNsb3Nlc3Qoc2VsZWN0b3IpO1xuICAgIH0sXG5cbiAgICBpczogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgdmFyIG1hdGNoID0gZmFsc2UsXG4gICAgICAgICAgY29tcGFyYXRvciA9IGdldENvbXBhcmVGdW5jdGlvbihzZWxlY3Rvcik7XG5cbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgbWF0Y2ggPSBjb21wYXJhdG9yKGVsLCBzZWxlY3Rvcik7XG4gICAgICAgIHJldHVybiAhbWF0Y2g7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG1hdGNoO1xuICAgIH0sXG5cbiAgICBmaW5kOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGlmICghc2VsZWN0b3IgfHwgc2VsZWN0b3Iubm9kZVR5cGUpIHtcbiAgICAgICAgcmV0dXJuIGNhc2goc2VsZWN0b3IgJiYgdGhpcy5oYXMoc2VsZWN0b3IpLmxlbmd0aCA/IHNlbGVjdG9yIDogbnVsbCk7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbGVtcyA9IFtdO1xuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBwdXNoLmFwcGx5KGVsZW1zLCBmaW5kKHNlbGVjdG9yLCBlbCkpO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB1bmlxdWUoZWxlbXMpO1xuICAgIH0sXG5cbiAgICBoYXM6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIGNvbXBhcmF0b3IgPSBpc1N0cmluZyhzZWxlY3RvcikgPyBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGZpbmQoc2VsZWN0b3IsIGVsKS5sZW5ndGggIT09IDA7XG4gICAgICB9IDogZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBlbC5jb250YWlucyhzZWxlY3Rvcik7XG4gICAgICB9O1xuXG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXIoY29tcGFyYXRvcik7XG4gICAgfSxcblxuICAgIG5leHQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjYXNoKHRoaXNbMF0ubmV4dEVsZW1lbnRTaWJsaW5nKTtcbiAgICB9LFxuXG4gICAgbm90OiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIHZhciBjb21wYXJhdG9yID0gZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKTtcblxuICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gIWNvbXBhcmF0b3IoZWwsIHNlbGVjdG9yKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBwYXJlbnQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciByZXN1bHQgPSBbXTtcblxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGlmIChpdGVtICYmIGl0ZW0ucGFyZW50Tm9kZSkge1xuICAgICAgICAgIHJlc3VsdC5wdXNoKGl0ZW0ucGFyZW50Tm9kZSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdW5pcXVlKHJlc3VsdCk7XG4gICAgfSxcblxuICAgIHBhcmVudHM6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIGxhc3QsXG4gICAgICAgICAgcmVzdWx0ID0gW107XG5cbiAgICAgIHRoaXMuZWFjaChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICBsYXN0ID0gaXRlbTtcblxuICAgICAgICB3aGlsZSAobGFzdCAmJiBsYXN0LnBhcmVudE5vZGUgJiYgbGFzdCAhPT0gZG9jLmJvZHkucGFyZW50Tm9kZSkge1xuICAgICAgICAgIGxhc3QgPSBsYXN0LnBhcmVudE5vZGU7XG5cbiAgICAgICAgICBpZiAoIXNlbGVjdG9yIHx8IHNlbGVjdG9yICYmIG1hdGNoZXMobGFzdCwgc2VsZWN0b3IpKSB7XG4gICAgICAgICAgICByZXN1bHQucHVzaChsYXN0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gdW5pcXVlKHJlc3VsdCk7XG4gICAgfSxcblxuICAgIHByZXY6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiBjYXNoKHRoaXNbMF0ucHJldmlvdXNFbGVtZW50U2libGluZyk7XG4gICAgfSxcblxuICAgIHNpYmxpbmdzOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIHZhciBjb2xsZWN0aW9uID0gdGhpcy5wYXJlbnQoKS5jaGlsZHJlbihzZWxlY3RvciksXG4gICAgICAgICAgZWwgPSB0aGlzWzBdO1xuXG4gICAgICByZXR1cm4gY29sbGVjdGlvbi5maWx0ZXIoZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgcmV0dXJuIGkgIT09IGVsO1xuICAgICAgfSk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIHJldHVybiBjYXNoO1xufSk7XG47XG52YXIgQ29tcG9uZW50ID0gZnVuY3Rpb24gKCkge1xuICAvKipcbiAgICogR2VuZXJpYyBjb25zdHJ1Y3RvciBmb3IgYWxsIGNvbXBvbmVudHNcbiAgICogQGNvbnN0cnVjdG9yXG4gICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICovXG4gIGZ1bmN0aW9uIENvbXBvbmVudChjbGFzc0RlZiwgZWwsIG9wdGlvbnMpIHtcbiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ29tcG9uZW50KTtcblxuICAgIC8vIERpc3BsYXkgZXJyb3IgaWYgZWwgaXMgdmFsaWQgSFRNTCBFbGVtZW50XG4gICAgaWYgKCEoZWwgaW5zdGFuY2VvZiBFbGVtZW50KSkge1xuICAgICAgY29uc29sZS5lcnJvcihFcnJvcihlbCArICcgaXMgbm90IGFuIEhUTUwgRWxlbWVudCcpKTtcbiAgICB9XG5cbiAgICAvLyBJZiBleGlzdHMsIGRlc3Ryb3kgYW5kIHJlaW5pdGlhbGl6ZSBpbiBjaGlsZFxuICAgIHZhciBpbnMgPSBjbGFzc0RlZi5nZXRJbnN0YW5jZShlbCk7XG4gICAgaWYgKCEhaW5zKSB7XG4gICAgICBpbnMuZGVzdHJveSgpO1xuICAgIH1cblxuICAgIHRoaXMuZWwgPSBlbDtcbiAgICB0aGlzLiRlbCA9IGNhc2goZWwpO1xuICB9XG5cbiAgLyoqXG4gICAqIEluaXRpYWxpemVzIGNvbXBvbmVudHNcbiAgICogQHBhcmFtIHtjbGFzc30gY2xhc3NEZWZcbiAgICogQHBhcmFtIHtFbGVtZW50IHwgTm9kZUxpc3QgfCBqUXVlcnl9IGVsc1xuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cblxuXG4gIF9jcmVhdGVDbGFzcyhDb21wb25lbnQsIG51bGwsIFt7XG4gICAga2V5OiBcImluaXRcIixcbiAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChjbGFzc0RlZiwgZWxzLCBvcHRpb25zKSB7XG4gICAgICB2YXIgaW5zdGFuY2VzID0gbnVsbDtcbiAgICAgIGlmIChlbHMgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAgIGluc3RhbmNlcyA9IG5ldyBjbGFzc0RlZihlbHMsIG9wdGlvbnMpO1xuICAgICAgfSBlbHNlIGlmICghIWVscyAmJiAoZWxzLmpxdWVyeSB8fCBlbHMuY2FzaCB8fCBlbHMgaW5zdGFuY2VvZiBOb2RlTGlzdCkpIHtcbiAgICAgICAgdmFyIGluc3RhbmNlc0FyciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGVscy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIGluc3RhbmNlc0Fyci5wdXNoKG5ldyBjbGFzc0RlZihlbHNbaV0sIG9wdGlvbnMpKTtcbiAgICAgICAgfVxuICAgICAgICBpbnN0YW5jZXMgPSBpbnN0YW5jZXNBcnI7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBpbnN0YW5jZXM7XG4gICAgfVxuICB9XSk7XG5cbiAgcmV0dXJuIENvbXBvbmVudDtcbn0oKTtcblxuOyAvLyBSZXF1aXJlZCBmb3IgTWV0ZW9yIHBhY2thZ2UsIHRoZSB1c2Ugb2Ygd2luZG93IHByZXZlbnRzIGV4cG9ydCBieSBNZXRlb3JcbihmdW5jdGlvbiAod2luZG93KSB7XG4gIGlmICh3aW5kb3cuUGFja2FnZSkge1xuICAgIE0gPSB7fTtcbiAgfSBlbHNlIHtcbiAgICB3aW5kb3cuTSA9IHt9O1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGpRdWVyeVxuICBNLmpRdWVyeUxvYWRlZCA9ICEhd2luZG93LmpRdWVyeTtcbn0pKHdpbmRvdyk7XG5cbi8vIEFNRFxuaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICBkZWZpbmUoJ00nLCBbXSwgZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBNO1xuICB9KTtcblxuICAvLyBDb21tb24gSlNcbn0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgIT09ICd1bmRlZmluZWQnICYmICFleHBvcnRzLm5vZGVUeXBlKSB7XG4gIGlmICh0eXBlb2YgbW9kdWxlICE9PSAndW5kZWZpbmVkJyAmJiAhbW9kdWxlLm5vZGVUeXBlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgZXhwb3J0cyA9IG1vZHVsZS5leHBvcnRzID0gTTtcbiAgfVxuICBleHBvcnRzLmRlZmF1bHQgPSBNO1xufVxuXG5NLnZlcnNpb24gPSAnMS4wLjAnO1xuXG5NLmtleXMgPSB7XG4gIFRBQjogOSxcbiAgRU5URVI6IDEzLFxuICBFU0M6IDI3LFxuICBBUlJPV19VUDogMzgsXG4gIEFSUk9XX0RPV046IDQwXG59O1xuXG4vKipcbiAqIFRhYlByZXNzIEtleWRvd24gaGFuZGxlclxuICovXG5NLnRhYlByZXNzZWQgPSBmYWxzZTtcbk0ua2V5RG93biA9IGZhbHNlO1xudmFyIGRvY0hhbmRsZUtleWRvd24gPSBmdW5jdGlvbiAoZSkge1xuICBNLmtleURvd24gPSB0cnVlO1xuICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLlRBQiB8fCBlLndoaWNoID09PSBNLmtleXMuQVJST1dfRE9XTiB8fCBlLndoaWNoID09PSBNLmtleXMuQVJST1dfVVApIHtcbiAgICBNLnRhYlByZXNzZWQgPSB0cnVlO1xuICB9XG59O1xudmFyIGRvY0hhbmRsZUtleXVwID0gZnVuY3Rpb24gKGUpIHtcbiAgTS5rZXlEb3duID0gZmFsc2U7XG4gIGlmIChlLndoaWNoID09PSBNLmtleXMuVEFCIHx8IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOIHx8IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19VUCkge1xuICAgIE0udGFiUHJlc3NlZCA9IGZhbHNlO1xuICB9XG59O1xudmFyIGRvY0hhbmRsZUZvY3VzID0gZnVuY3Rpb24gKGUpIHtcbiAgaWYgKE0ua2V5RG93bikge1xuICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LmFkZCgna2V5Ym9hcmQtZm9jdXNlZCcpO1xuICB9XG59O1xudmFyIGRvY0hhbmRsZUJsdXIgPSBmdW5jdGlvbiAoZSkge1xuICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5yZW1vdmUoJ2tleWJvYXJkLWZvY3VzZWQnKTtcbn07XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgZG9jSGFuZGxlS2V5ZG93biwgdHJ1ZSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIGRvY0hhbmRsZUtleXVwLCB0cnVlKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgZG9jSGFuZGxlRm9jdXMsIHRydWUpO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGRvY0hhbmRsZUJsdXIsIHRydWUpO1xuXG4vKipcbiAqIEluaXRpYWxpemUgalF1ZXJ5IHdyYXBwZXIgZm9yIHBsdWdpblxuICogQHBhcmFtIHtDbGFzc30gcGx1Z2luICBqYXZhc2NyaXB0IGNsYXNzXG4gKiBAcGFyYW0ge3N0cmluZ30gcGx1Z2luTmFtZSAgalF1ZXJ5IHBsdWdpbiBuYW1lXG4gKiBAcGFyYW0ge3N0cmluZ30gY2xhc3NSZWYgIENsYXNzIHJlZmVyZW5jZSBuYW1lXG4gKi9cbk0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIgPSBmdW5jdGlvbiAocGx1Z2luLCBwbHVnaW5OYW1lLCBjbGFzc1JlZikge1xuICBqUXVlcnkuZm5bcGx1Z2luTmFtZV0gPSBmdW5jdGlvbiAobWV0aG9kT3JPcHRpb25zKSB7XG4gICAgLy8gQ2FsbCBwbHVnaW4gbWV0aG9kIGlmIHZhbGlkIG1ldGhvZCBuYW1lIGlzIHBhc3NlZCBpblxuICAgIGlmIChwbHVnaW4ucHJvdG90eXBlW21ldGhvZE9yT3B0aW9uc10pIHtcbiAgICAgIHZhciBwYXJhbXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsIDEpO1xuXG4gICAgICAvLyBHZXR0ZXIgbWV0aG9kc1xuICAgICAgaWYgKG1ldGhvZE9yT3B0aW9ucy5zbGljZSgwLCAzKSA9PT0gJ2dldCcpIHtcbiAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpcy5maXJzdCgpWzBdW2NsYXNzUmVmXTtcbiAgICAgICAgcmV0dXJuIGluc3RhbmNlW21ldGhvZE9yT3B0aW9uc10uYXBwbHkoaW5zdGFuY2UsIHBhcmFtcyk7XG4gICAgICB9XG5cbiAgICAgIC8vIFZvaWQgbWV0aG9kc1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBpbnN0YW5jZSA9IHRoaXNbY2xhc3NSZWZdO1xuICAgICAgICBpbnN0YW5jZVttZXRob2RPck9wdGlvbnNdLmFwcGx5KGluc3RhbmNlLCBwYXJhbXMpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEluaXRpYWxpemUgcGx1Z2luIGlmIG9wdGlvbnMgb3Igbm8gYXJndW1lbnQgaXMgcGFzc2VkIGluXG4gICAgfSBlbHNlIGlmICh0eXBlb2YgbWV0aG9kT3JPcHRpb25zID09PSAnb2JqZWN0JyB8fCAhbWV0aG9kT3JPcHRpb25zKSB7XG4gICAgICBwbHVnaW4uaW5pdCh0aGlzLCBhcmd1bWVudHNbMF0pO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGVycm9yIGlmIGFuIHVucmVjb2duaXplZCAgbWV0aG9kIG5hbWUgaXMgcGFzc2VkIGluXG4gICAgalF1ZXJ5LmVycm9yKFwiTWV0aG9kIFwiICsgbWV0aG9kT3JPcHRpb25zICsgXCIgZG9lcyBub3QgZXhpc3Qgb24galF1ZXJ5LlwiICsgcGx1Z2luTmFtZSk7XG4gIH07XG59O1xuXG4vKipcbiAqIEF1dG9tYXRpY2FsbHkgaW5pdGlhbGl6ZSBjb21wb25lbnRzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHQgIERPTSBFbGVtZW50IHRvIHNlYXJjaCB3aXRoaW4gZm9yIGNvbXBvbmVudHNcbiAqL1xuTS5BdXRvSW5pdCA9IGZ1bmN0aW9uIChjb250ZXh0KSB7XG4gIC8vIFVzZSBkb2N1bWVudC5ib2R5IGlmIG5vIGNvbnRleHQgaXMgZ2l2ZW5cbiAgdmFyIHJvb3QgPSAhIWNvbnRleHQgPyBjb250ZXh0IDogZG9jdW1lbnQuYm9keTtcblxuICB2YXIgcmVnaXN0cnkgPSB7XG4gICAgQXV0b2NvbXBsZXRlOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5hdXRvY29tcGxldGU6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBDYXJvdXNlbDogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2Fyb3VzZWw6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBDaGlwczogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuY2hpcHM6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBDb2xsYXBzaWJsZTogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuY29sbGFwc2libGU6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBEYXRlcGlja2VyOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5kYXRlcGlja2VyOm5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgRHJvcGRvd246IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmRyb3Bkb3duLXRyaWdnZXI6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBNYXRlcmlhbGJveDogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcubWF0ZXJpYWxib3hlZDpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIE1vZGFsOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tb2RhbDpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIFBhcmFsbGF4OiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5wYXJhbGxheDpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIFB1c2hwaW46IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnB1c2hwaW46bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBTY3JvbGxTcHk6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnNjcm9sbHNweTpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIEZvcm1TZWxlY3Q6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnc2VsZWN0Om5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgU2lkZW5hdjogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuc2lkZW5hdjpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIFRhYnM6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnRhYnM6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBUYXBUYXJnZXQ6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnRhcC10YXJnZXQ6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBUaW1lcGlja2VyOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy50aW1lcGlja2VyOm5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgVG9vbHRpcDogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcudG9vbHRpcHBlZDpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIEZsb2F0aW5nQWN0aW9uQnV0dG9uOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5maXhlZC1hY3Rpb24tYnRuOm5vdCgubm8tYXV0b2luaXQpJylcbiAgfTtcblxuICBmb3IgKHZhciBwbHVnaW5OYW1lIGluIHJlZ2lzdHJ5KSB7XG4gICAgdmFyIHBsdWdpbiA9IE1bcGx1Z2luTmFtZV07XG4gICAgcGx1Z2luLmluaXQocmVnaXN0cnlbcGx1Z2luTmFtZV0pO1xuICB9XG59O1xuXG4vKipcbiAqIEdlbmVyYXRlIGFwcHJveGltYXRlZCBzZWxlY3RvciBzdHJpbmcgZm9yIGEgalF1ZXJ5IG9iamVjdFxuICogQHBhcmFtIHtqUXVlcnl9IG9iaiAgalF1ZXJ5IG9iamVjdCB0byBiZSBwYXJzZWRcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbk0ub2JqZWN0U2VsZWN0b3JTdHJpbmcgPSBmdW5jdGlvbiAob2JqKSB7XG4gIHZhciB0YWdTdHIgPSBvYmoucHJvcCgndGFnTmFtZScpIHx8ICcnO1xuICB2YXIgaWRTdHIgPSBvYmouYXR0cignaWQnKSB8fCAnJztcbiAgdmFyIGNsYXNzU3RyID0gb2JqLmF0dHIoJ2NsYXNzJykgfHwgJyc7XG4gIHJldHVybiAodGFnU3RyICsgaWRTdHIgKyBjbGFzc1N0cikucmVwbGFjZSgvXFxzL2csICcnKTtcbn07XG5cbi8vIFVuaXF1ZSBSYW5kb20gSURcbk0uZ3VpZCA9IGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gczQoKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoKDEgKyBNYXRoLnJhbmRvbSgpKSAqIDB4MTAwMDApLnRvU3RyaW5nKDE2KS5zdWJzdHJpbmcoMSk7XG4gIH1cbiAgcmV0dXJuIGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gczQoKSArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgczQoKSArIHM0KCk7XG4gIH07XG59KCk7XG5cbi8qKlxuICogRXNjYXBlcyBoYXNoIGZyb20gc3BlY2lhbCBjaGFyYWN0ZXJzXG4gKiBAcGFyYW0ge3N0cmluZ30gaGFzaCAgU3RyaW5nIHJldHVybmVkIGZyb20gdGhpcy5oYXNoXG4gKiBAcmV0dXJucyB7c3RyaW5nfVxuICovXG5NLmVzY2FwZUhhc2ggPSBmdW5jdGlvbiAoaGFzaCkge1xuICByZXR1cm4gaGFzaC5yZXBsYWNlKC8oOnxcXC58XFxbfFxcXXwsfD18XFwvKS9nLCAnXFxcXCQxJyk7XG59O1xuXG5NLmVsZW1lbnRPclBhcmVudElzRml4ZWQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICB2YXIgJGVsZW1lbnQgPSAkKGVsZW1lbnQpO1xuICB2YXIgJGNoZWNrRWxlbWVudHMgPSAkZWxlbWVudC5hZGQoJGVsZW1lbnQucGFyZW50cygpKTtcbiAgdmFyIGlzRml4ZWQgPSBmYWxzZTtcbiAgJGNoZWNrRWxlbWVudHMuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCQodGhpcykuY3NzKCdwb3NpdGlvbicpID09PSAnZml4ZWQnKSB7XG4gICAgICBpc0ZpeGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH0pO1xuICByZXR1cm4gaXNGaXhlZDtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRWRnZXNcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gdG9wICBJZiB0aGUgdG9wIGVkZ2Ugd2FzIGV4Y2VlZGVkXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IHJpZ2h0ICBJZiB0aGUgcmlnaHQgZWRnZSB3YXMgZXhjZWVkZWRcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gYm90dG9tICBJZiB0aGUgYm90dG9tIGVkZ2Ugd2FzIGV4Y2VlZGVkXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IGxlZnQgIElmIHRoZSBsZWZ0IGVkZ2Ugd2FzIGV4Y2VlZGVkXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCb3VuZGluZ1xuICogQHByb3BlcnR5IHtOdW1iZXJ9IGxlZnQgIGxlZnQgb2Zmc2V0IGNvb3JkaW5hdGVcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSB0b3AgIHRvcCBvZmZzZXQgY29vcmRpbmF0ZVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHdpZHRoXG4gKiBAcHJvcGVydHkge051bWJlcn0gaGVpZ2h0XG4gKi9cblxuLyoqXG4gKiBFc2NhcGVzIGhhc2ggZnJvbSBzcGVjaWFsIGNoYXJhY3RlcnNcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGFpbmVyICBDb250YWluZXIgZWxlbWVudCB0aGF0IGFjdHMgYXMgdGhlIGJvdW5kYXJ5XG4gKiBAcGFyYW0ge0JvdW5kaW5nfSBib3VuZGluZyAgZWxlbWVudCBib3VuZGluZyB0aGF0IGlzIGJlaW5nIGNoZWNrZWRcbiAqIEBwYXJhbSB7TnVtYmVyfSBvZmZzZXQgIG9mZnNldCBmcm9tIGVkZ2UgdGhhdCBjb3VudHMgYXMgZXhjZWVkaW5nXG4gKiBAcmV0dXJucyB7RWRnZXN9XG4gKi9cbk0uY2hlY2tXaXRoaW5Db250YWluZXIgPSBmdW5jdGlvbiAoY29udGFpbmVyLCBib3VuZGluZywgb2Zmc2V0KSB7XG4gIHZhciBlZGdlcyA9IHtcbiAgICB0b3A6IGZhbHNlLFxuICAgIHJpZ2h0OiBmYWxzZSxcbiAgICBib3R0b206IGZhbHNlLFxuICAgIGxlZnQ6IGZhbHNlXG4gIH07XG5cbiAgdmFyIGNvbnRhaW5lclJlY3QgPSBjb250YWluZXIuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gIC8vIElmIGJvZHkgZWxlbWVudCBpcyBzbWFsbGVyIHRoYW4gdmlld3BvcnQsIHVzZSB2aWV3cG9ydCBoZWlnaHQgaW5zdGVhZC5cbiAgdmFyIGNvbnRhaW5lckJvdHRvbSA9IGNvbnRhaW5lciA9PT0gZG9jdW1lbnQuYm9keSA/IE1hdGgubWF4KGNvbnRhaW5lclJlY3QuYm90dG9tLCB3aW5kb3cuaW5uZXJIZWlnaHQpIDogY29udGFpbmVyUmVjdC5ib3R0b207XG5cbiAgdmFyIHNjcm9sbExlZnQgPSBjb250YWluZXIuc2Nyb2xsTGVmdDtcbiAgdmFyIHNjcm9sbFRvcCA9IGNvbnRhaW5lci5zY3JvbGxUb3A7XG5cbiAgdmFyIHNjcm9sbGVkWCA9IGJvdW5kaW5nLmxlZnQgLSBzY3JvbGxMZWZ0O1xuICB2YXIgc2Nyb2xsZWRZID0gYm91bmRpbmcudG9wIC0gc2Nyb2xsVG9wO1xuXG4gIC8vIENoZWNrIGZvciBjb250YWluZXIgYW5kIHZpZXdwb3J0IGZvciBlYWNoIGVkZ2VcbiAgaWYgKHNjcm9sbGVkWCA8IGNvbnRhaW5lclJlY3QubGVmdCArIG9mZnNldCB8fCBzY3JvbGxlZFggPCBvZmZzZXQpIHtcbiAgICBlZGdlcy5sZWZ0ID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChzY3JvbGxlZFggKyBib3VuZGluZy53aWR0aCA+IGNvbnRhaW5lclJlY3QucmlnaHQgLSBvZmZzZXQgfHwgc2Nyb2xsZWRYICsgYm91bmRpbmcud2lkdGggPiB3aW5kb3cuaW5uZXJXaWR0aCAtIG9mZnNldCkge1xuICAgIGVkZ2VzLnJpZ2h0ID0gdHJ1ZTtcbiAgfVxuXG4gIGlmIChzY3JvbGxlZFkgPCBjb250YWluZXJSZWN0LnRvcCArIG9mZnNldCB8fCBzY3JvbGxlZFkgPCBvZmZzZXQpIHtcbiAgICBlZGdlcy50b3AgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHNjcm9sbGVkWSArIGJvdW5kaW5nLmhlaWdodCA+IGNvbnRhaW5lckJvdHRvbSAtIG9mZnNldCB8fCBzY3JvbGxlZFkgKyBib3VuZGluZy5oZWlnaHQgPiB3aW5kb3cuaW5uZXJIZWlnaHQgLSBvZmZzZXQpIHtcbiAgICBlZGdlcy5ib3R0b20gPSB0cnVlO1xuICB9XG5cbiAgcmV0dXJuIGVkZ2VzO1xufTtcblxuTS5jaGVja1Bvc3NpYmxlQWxpZ25tZW50cyA9IGZ1bmN0aW9uIChlbCwgY29udGFpbmVyLCBib3VuZGluZywgb2Zmc2V0KSB7XG4gIHZhciBjYW5BbGlnbiA9IHtcbiAgICB0b3A6IHRydWUsXG4gICAgcmlnaHQ6IHRydWUsXG4gICAgYm90dG9tOiB0cnVlLFxuICAgIGxlZnQ6IHRydWUsXG4gICAgc3BhY2VPblRvcDogbnVsbCxcbiAgICBzcGFjZU9uUmlnaHQ6IG51bGwsXG4gICAgc3BhY2VPbkJvdHRvbTogbnVsbCxcbiAgICBzcGFjZU9uTGVmdDogbnVsbFxuICB9O1xuXG4gIHZhciBjb250YWluZXJBbGxvd3NPdmVyZmxvdyA9IGdldENvbXB1dGVkU3R5bGUoY29udGFpbmVyKS5vdmVyZmxvdyA9PT0gJ3Zpc2libGUnO1xuICB2YXIgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgdmFyIGNvbnRhaW5lckhlaWdodCA9IE1hdGgubWluKGNvbnRhaW5lclJlY3QuaGVpZ2h0LCB3aW5kb3cuaW5uZXJIZWlnaHQpO1xuICB2YXIgY29udGFpbmVyV2lkdGggPSBNYXRoLm1pbihjb250YWluZXJSZWN0LndpZHRoLCB3aW5kb3cuaW5uZXJXaWR0aCk7XG4gIHZhciBlbE9mZnNldFJlY3QgPSBlbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICB2YXIgc2Nyb2xsTGVmdCA9IGNvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICB2YXIgc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcblxuICB2YXIgc2Nyb2xsZWRYID0gYm91bmRpbmcubGVmdCAtIHNjcm9sbExlZnQ7XG4gIHZhciBzY3JvbGxlZFlUb3BFZGdlID0gYm91bmRpbmcudG9wIC0gc2Nyb2xsVG9wO1xuICB2YXIgc2Nyb2xsZWRZQm90dG9tRWRnZSA9IGJvdW5kaW5nLnRvcCArIGVsT2Zmc2V0UmVjdC5oZWlnaHQgLSBzY3JvbGxUb3A7XG5cbiAgLy8gQ2hlY2sgZm9yIGNvbnRhaW5lciBhbmQgdmlld3BvcnQgZm9yIGxlZnRcbiAgY2FuQWxpZ24uc3BhY2VPblJpZ2h0ID0gIWNvbnRhaW5lckFsbG93c092ZXJmbG93ID8gY29udGFpbmVyV2lkdGggLSAoc2Nyb2xsZWRYICsgYm91bmRpbmcud2lkdGgpIDogd2luZG93LmlubmVyV2lkdGggLSAoZWxPZmZzZXRSZWN0LmxlZnQgKyBib3VuZGluZy53aWR0aCk7XG4gIGlmIChjYW5BbGlnbi5zcGFjZU9uUmlnaHQgPCAwKSB7XG4gICAgY2FuQWxpZ24ubGVmdCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGNvbnRhaW5lciBhbmQgdmlld3BvcnQgZm9yIFJpZ2h0XG4gIGNhbkFsaWduLnNwYWNlT25MZWZ0ID0gIWNvbnRhaW5lckFsbG93c092ZXJmbG93ID8gc2Nyb2xsZWRYIC0gYm91bmRpbmcud2lkdGggKyBlbE9mZnNldFJlY3Qud2lkdGggOiBlbE9mZnNldFJlY3QucmlnaHQgLSBib3VuZGluZy53aWR0aDtcbiAgaWYgKGNhbkFsaWduLnNwYWNlT25MZWZ0IDwgMCkge1xuICAgIGNhbkFsaWduLnJpZ2h0ID0gZmFsc2U7XG4gIH1cblxuICAvLyBDaGVjayBmb3IgY29udGFpbmVyIGFuZCB2aWV3cG9ydCBmb3IgVG9wXG4gIGNhbkFsaWduLnNwYWNlT25Cb3R0b20gPSAhY29udGFpbmVyQWxsb3dzT3ZlcmZsb3cgPyBjb250YWluZXJIZWlnaHQgLSAoc2Nyb2xsZWRZVG9wRWRnZSArIGJvdW5kaW5nLmhlaWdodCArIG9mZnNldCkgOiB3aW5kb3cuaW5uZXJIZWlnaHQgLSAoZWxPZmZzZXRSZWN0LnRvcCArIGJvdW5kaW5nLmhlaWdodCArIG9mZnNldCk7XG4gIGlmIChjYW5BbGlnbi5zcGFjZU9uQm90dG9tIDwgMCkge1xuICAgIGNhbkFsaWduLnRvcCA9IGZhbHNlO1xuICB9XG5cbiAgLy8gQ2hlY2sgZm9yIGNvbnRhaW5lciBhbmQgdmlld3BvcnQgZm9yIEJvdHRvbVxuICBjYW5BbGlnbi5zcGFjZU9uVG9wID0gIWNvbnRhaW5lckFsbG93c092ZXJmbG93ID8gc2Nyb2xsZWRZQm90dG9tRWRnZSAtIChib3VuZGluZy5oZWlnaHQgLSBvZmZzZXQpIDogZWxPZmZzZXRSZWN0LmJvdHRvbSAtIChib3VuZGluZy5oZWlnaHQgKyBvZmZzZXQpO1xuICBpZiAoY2FuQWxpZ24uc3BhY2VPblRvcCA8IDApIHtcbiAgICBjYW5BbGlnbi5ib3R0b20gPSBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiBjYW5BbGlnbjtcbn07XG5cbk0uZ2V0T3ZlcmZsb3dQYXJlbnQgPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICBpZiAoZWxlbWVudCA9PSBudWxsKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoZWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSB8fCBnZXRDb21wdXRlZFN0eWxlKGVsZW1lbnQpLm92ZXJmbG93ICE9PSAndmlzaWJsZScpIHtcbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIHJldHVybiBNLmdldE92ZXJmbG93UGFyZW50KGVsZW1lbnQucGFyZW50RWxlbWVudCk7XG59O1xuXG4vKipcbiAqIEdldHMgaWQgb2YgY29tcG9uZW50IGZyb20gYSB0cmlnZ2VyXG4gKiBAcGFyYW0ge0VsZW1lbnR9IHRyaWdnZXIgIHRyaWdnZXJcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbk0uZ2V0SWRGcm9tVHJpZ2dlciA9IGZ1bmN0aW9uICh0cmlnZ2VyKSB7XG4gIHZhciBpZCA9IHRyaWdnZXIuZ2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcpO1xuICBpZiAoIWlkKSB7XG4gICAgaWQgPSB0cmlnZ2VyLmdldEF0dHJpYnV0ZSgnaHJlZicpO1xuICAgIGlmIChpZCkge1xuICAgICAgaWQgPSBpZC5zbGljZSgxKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaWQgPSAnJztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGlkO1xufTtcblxuLyoqXG4gKiBNdWx0aSBicm93c2VyIHN1cHBvcnQgZm9yIGRvY3VtZW50IHNjcm9sbCB0b3BcbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbk0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AgPSBmdW5jdGlvbiAoKSB7XG4gIHJldHVybiB3aW5kb3cucGFnZVlPZmZzZXQgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnNjcm9sbFRvcCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbFRvcCB8fCAwO1xufTtcblxuLyoqXG4gKiBNdWx0aSBicm93c2VyIHN1cHBvcnQgZm9yIGRvY3VtZW50IHNjcm9sbCBsZWZ0XG4gKiBAcmV0dXJucyB7TnVtYmVyfVxuICovXG5NLmdldERvY3VtZW50U2Nyb2xsTGVmdCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHdpbmRvdy5wYWdlWE9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsTGVmdCB8fCBkb2N1bWVudC5ib2R5LnNjcm9sbExlZnQgfHwgMDtcbn07XG5cbi8qKlxuICogQHR5cGVkZWYge09iamVjdH0gRWRnZXNcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gdG9wICBJZiB0aGUgdG9wIGVkZ2Ugd2FzIGV4Y2VlZGVkXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IHJpZ2h0ICBJZiB0aGUgcmlnaHQgZWRnZSB3YXMgZXhjZWVkZWRcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gYm90dG9tICBJZiB0aGUgYm90dG9tIGVkZ2Ugd2FzIGV4Y2VlZGVkXG4gKiBAcHJvcGVydHkge0Jvb2xlYW59IGxlZnQgIElmIHRoZSBsZWZ0IGVkZ2Ugd2FzIGV4Y2VlZGVkXG4gKi9cblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBCb3VuZGluZ1xuICogQHByb3BlcnR5IHtOdW1iZXJ9IGxlZnQgIGxlZnQgb2Zmc2V0IGNvb3JkaW5hdGVcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSB0b3AgIHRvcCBvZmZzZXQgY29vcmRpbmF0ZVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHdpZHRoXG4gKiBAcHJvcGVydHkge051bWJlcn0gaGVpZ2h0XG4gKi9cblxuLyoqXG4gKiBHZXQgdGltZSBpbiBtc1xuICogQGxpY2Vuc2UgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9tYXN0ZXIvTElDRU5TRVxuICogQHR5cGUge2Z1bmN0aW9ufVxuICogQHJldHVybiB7bnVtYmVyfVxuICovXG52YXIgZ2V0VGltZSA9IERhdGUubm93IHx8IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIGEgZnVuY3Rpb24sIHRoYXQsIHdoZW4gaW52b2tlZCwgd2lsbCBvbmx5IGJlIHRyaWdnZXJlZCBhdCBtb3N0IG9uY2VcbiAqIGR1cmluZyBhIGdpdmVuIHdpbmRvdyBvZiB0aW1lLiBOb3JtYWxseSwgdGhlIHRocm90dGxlZCBmdW5jdGlvbiB3aWxsIHJ1blxuICogYXMgbXVjaCBhcyBpdCBjYW4sIHdpdGhvdXQgZXZlciBnb2luZyBtb3JlIHRoYW4gb25jZSBwZXIgYHdhaXRgIGR1cmF0aW9uO1xuICogYnV0IGlmIHlvdSdkIGxpa2UgdG8gZGlzYWJsZSB0aGUgZXhlY3V0aW9uIG9uIHRoZSBsZWFkaW5nIGVkZ2UsIHBhc3NcbiAqIGB7bGVhZGluZzogZmFsc2V9YC4gVG8gZGlzYWJsZSBleGVjdXRpb24gb24gdGhlIHRyYWlsaW5nIGVkZ2UsIGRpdHRvLlxuICogQGxpY2Vuc2UgaHR0cHM6Ly9yYXcuZ2l0aHViLmNvbS9qYXNoa2VuYXMvdW5kZXJzY29yZS9tYXN0ZXIvTElDRU5TRVxuICogQHBhcmFtIHtmdW5jdGlvbn0gZnVuY1xuICogQHBhcmFtIHtudW1iZXJ9IHdhaXRcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9uc1xuICogQHJldHVybnMge0Z1bmN0aW9ufVxuICovXG5NLnRocm90dGxlID0gZnVuY3Rpb24gKGZ1bmMsIHdhaXQsIG9wdGlvbnMpIHtcbiAgdmFyIGNvbnRleHQgPSB2b2lkIDAsXG4gICAgICBhcmdzID0gdm9pZCAwLFxuICAgICAgcmVzdWx0ID0gdm9pZCAwO1xuICB2YXIgdGltZW91dCA9IG51bGw7XG4gIHZhciBwcmV2aW91cyA9IDA7XG4gIG9wdGlvbnMgfHwgKG9wdGlvbnMgPSB7fSk7XG4gIHZhciBsYXRlciA9IGZ1bmN0aW9uICgpIHtcbiAgICBwcmV2aW91cyA9IG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UgPyAwIDogZ2V0VGltZSgpO1xuICAgIHRpbWVvdXQgPSBudWxsO1xuICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICB9O1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHZhciBub3cgPSBnZXRUaW1lKCk7XG4gICAgaWYgKCFwcmV2aW91cyAmJiBvcHRpb25zLmxlYWRpbmcgPT09IGZhbHNlKSBwcmV2aW91cyA9IG5vdztcbiAgICB2YXIgcmVtYWluaW5nID0gd2FpdCAtIChub3cgLSBwcmV2aW91cyk7XG4gICAgY29udGV4dCA9IHRoaXM7XG4gICAgYXJncyA9IGFyZ3VtZW50cztcbiAgICBpZiAocmVtYWluaW5nIDw9IDApIHtcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIHRpbWVvdXQgPSBudWxsO1xuICAgICAgcHJldmlvdXMgPSBub3c7XG4gICAgICByZXN1bHQgPSBmdW5jLmFwcGx5KGNvbnRleHQsIGFyZ3MpO1xuICAgICAgY29udGV4dCA9IGFyZ3MgPSBudWxsO1xuICAgIH0gZWxzZSBpZiAoIXRpbWVvdXQgJiYgb3B0aW9ucy50cmFpbGluZyAhPT0gZmFsc2UpIHtcbiAgICAgIHRpbWVvdXQgPSBzZXRUaW1lb3V0KGxhdGVyLCByZW1haW5pbmcpO1xuICAgIH1cbiAgICByZXR1cm4gcmVzdWx0O1xuICB9O1xufTtcbjsgLypcbiAgdjIuMi4wXG4gIDIwMTcgSnVsaWFuIEdhcm5pZXJcbiAgUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gICovXG52YXIgJGpzY29tcCA9IHsgc2NvcGU6IHt9IH07JGpzY29tcC5kZWZpbmVQcm9wZXJ0eSA9IFwiZnVuY3Rpb25cIiA9PSB0eXBlb2YgT2JqZWN0LmRlZmluZVByb3BlcnRpZXMgPyBPYmplY3QuZGVmaW5lUHJvcGVydHkgOiBmdW5jdGlvbiAoZSwgciwgcCkge1xuICBpZiAocC5nZXQgfHwgcC5zZXQpIHRocm93IG5ldyBUeXBlRXJyb3IoXCJFUzMgZG9lcyBub3Qgc3VwcG9ydCBnZXR0ZXJzIGFuZCBzZXR0ZXJzLlwiKTtlICE9IEFycmF5LnByb3RvdHlwZSAmJiBlICE9IE9iamVjdC5wcm90b3R5cGUgJiYgKGVbcl0gPSBwLnZhbHVlKTtcbn07JGpzY29tcC5nZXRHbG9iYWwgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gXCJ1bmRlZmluZWRcIiAhPSB0eXBlb2Ygd2luZG93ICYmIHdpbmRvdyA9PT0gZSA/IGUgOiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiBnbG9iYWwgJiYgbnVsbCAhPSBnbG9iYWwgPyBnbG9iYWwgOiBlO1xufTskanNjb21wLmdsb2JhbCA9ICRqc2NvbXAuZ2V0R2xvYmFsKHRoaXMpOyRqc2NvbXAuU1lNQk9MX1BSRUZJWCA9IFwianNjb21wX3N5bWJvbF9cIjtcbiRqc2NvbXAuaW5pdFN5bWJvbCA9IGZ1bmN0aW9uICgpIHtcbiAgJGpzY29tcC5pbml0U3ltYm9sID0gZnVuY3Rpb24gKCkge307JGpzY29tcC5nbG9iYWwuU3ltYm9sIHx8ICgkanNjb21wLmdsb2JhbC5TeW1ib2wgPSAkanNjb21wLlN5bWJvbCk7XG59OyRqc2NvbXAuc3ltYm9sQ291bnRlcl8gPSAwOyRqc2NvbXAuU3ltYm9sID0gZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuICRqc2NvbXAuU1lNQk9MX1BSRUZJWCArIChlIHx8IFwiXCIpICsgJGpzY29tcC5zeW1ib2xDb3VudGVyXysrO1xufTtcbiRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yID0gZnVuY3Rpb24gKCkge1xuICAkanNjb21wLmluaXRTeW1ib2woKTt2YXIgZSA9ICRqc2NvbXAuZ2xvYmFsLlN5bWJvbC5pdGVyYXRvcjtlIHx8IChlID0gJGpzY29tcC5nbG9iYWwuU3ltYm9sLml0ZXJhdG9yID0gJGpzY29tcC5nbG9iYWwuU3ltYm9sKFwiaXRlcmF0b3JcIikpO1wiZnVuY3Rpb25cIiAhPSB0eXBlb2YgQXJyYXkucHJvdG90eXBlW2VdICYmICRqc2NvbXAuZGVmaW5lUHJvcGVydHkoQXJyYXkucHJvdG90eXBlLCBlLCB7IGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAkanNjb21wLmFycmF5SXRlcmF0b3IodGhpcyk7XG4gICAgfSB9KTskanNjb21wLmluaXRTeW1ib2xJdGVyYXRvciA9IGZ1bmN0aW9uICgpIHt9O1xufTskanNjb21wLmFycmF5SXRlcmF0b3IgPSBmdW5jdGlvbiAoZSkge1xuICB2YXIgciA9IDA7cmV0dXJuICRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGUoZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiByIDwgZS5sZW5ndGggPyB7IGRvbmU6ICExLCB2YWx1ZTogZVtyKytdIH0gOiB7IGRvbmU6ICEwIH07XG4gIH0pO1xufTtcbiRqc2NvbXAuaXRlcmF0b3JQcm90b3R5cGUgPSBmdW5jdGlvbiAoZSkge1xuICAkanNjb21wLmluaXRTeW1ib2xJdGVyYXRvcigpO2UgPSB7IG5leHQ6IGUgfTtlWyRqc2NvbXAuZ2xvYmFsLlN5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH07cmV0dXJuIGU7XG59OyRqc2NvbXAuYXJyYXkgPSAkanNjb21wLmFycmF5IHx8IHt9OyRqc2NvbXAuaXRlcmF0b3JGcm9tQXJyYXkgPSBmdW5jdGlvbiAoZSwgcikge1xuICAkanNjb21wLmluaXRTeW1ib2xJdGVyYXRvcigpO2UgaW5zdGFuY2VvZiBTdHJpbmcgJiYgKGUgKz0gXCJcIik7dmFyIHAgPSAwLFxuICAgICAgbSA9IHsgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgaWYgKHAgPCBlLmxlbmd0aCkge1xuICAgICAgICB2YXIgdSA9IHArKztyZXR1cm4geyB2YWx1ZTogcih1LCBlW3VdKSwgZG9uZTogITEgfTtcbiAgICAgIH1tLm5leHQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiB7IGRvbmU6ICEwLCB2YWx1ZTogdm9pZCAwIH07XG4gICAgICB9O3JldHVybiBtLm5leHQoKTtcbiAgICB9IH07bVtTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBtO1xuICB9O3JldHVybiBtO1xufTtcbiRqc2NvbXAucG9seWZpbGwgPSBmdW5jdGlvbiAoZSwgciwgcCwgbSkge1xuICBpZiAocikge1xuICAgIHAgPSAkanNjb21wLmdsb2JhbDtlID0gZS5zcGxpdChcIi5cIik7Zm9yIChtID0gMDsgbSA8IGUubGVuZ3RoIC0gMTsgbSsrKSB7XG4gICAgICB2YXIgdSA9IGVbbV07dSBpbiBwIHx8IChwW3VdID0ge30pO3AgPSBwW3VdO1xuICAgIH1lID0gZVtlLmxlbmd0aCAtIDFdO20gPSBwW2VdO3IgPSByKG0pO3IgIT0gbSAmJiBudWxsICE9IHIgJiYgJGpzY29tcC5kZWZpbmVQcm9wZXJ0eShwLCBlLCB7IGNvbmZpZ3VyYWJsZTogITAsIHdyaXRhYmxlOiAhMCwgdmFsdWU6IHIgfSk7XG4gIH1cbn07JGpzY29tcC5wb2x5ZmlsbChcIkFycmF5LnByb3RvdHlwZS5rZXlzXCIsIGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiBlID8gZSA6IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gJGpzY29tcC5pdGVyYXRvckZyb21BcnJheSh0aGlzLCBmdW5jdGlvbiAoZSkge1xuICAgICAgcmV0dXJuIGU7XG4gICAgfSk7XG4gIH07XG59LCBcImVzNi1pbXBsXCIsIFwiZXMzXCIpO3ZhciAkanNjb21wJHRoaXMgPSB0aGlzO1xuKGZ1bmN0aW9uIChyKSB7XG4gIE0uYW5pbWUgPSByKCk7XG59KShmdW5jdGlvbiAoKSB7XG4gIGZ1bmN0aW9uIGUoYSkge1xuICAgIGlmICghaC5jb2woYSkpIHRyeSB7XG4gICAgICByZXR1cm4gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChhKTtcbiAgICB9IGNhdGNoIChjKSB7fVxuICB9ZnVuY3Rpb24gcihhLCBjKSB7XG4gICAgZm9yICh2YXIgZCA9IGEubGVuZ3RoLCBiID0gMiA8PSBhcmd1bWVudHMubGVuZ3RoID8gYXJndW1lbnRzWzFdIDogdm9pZCAwLCBmID0gW10sIG4gPSAwOyBuIDwgZDsgbisrKSB7XG4gICAgICBpZiAobiBpbiBhKSB7XG4gICAgICAgIHZhciBrID0gYVtuXTtjLmNhbGwoYiwgaywgbiwgYSkgJiYgZi5wdXNoKGspO1xuICAgICAgfVxuICAgIH1yZXR1cm4gZjtcbiAgfWZ1bmN0aW9uIHAoYSkge1xuICAgIHJldHVybiBhLnJlZHVjZShmdW5jdGlvbiAoYSwgZCkge1xuICAgICAgcmV0dXJuIGEuY29uY2F0KGguYXJyKGQpID8gcChkKSA6IGQpO1xuICAgIH0sIFtdKTtcbiAgfWZ1bmN0aW9uIG0oYSkge1xuICAgIGlmIChoLmFycihhKSkgcmV0dXJuIGE7XG4gICAgaC5zdHIoYSkgJiYgKGEgPSBlKGEpIHx8IGEpO3JldHVybiBhIGluc3RhbmNlb2YgTm9kZUxpc3QgfHwgYSBpbnN0YW5jZW9mIEhUTUxDb2xsZWN0aW9uID8gW10uc2xpY2UuY2FsbChhKSA6IFthXTtcbiAgfWZ1bmN0aW9uIHUoYSwgYykge1xuICAgIHJldHVybiBhLnNvbWUoZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBhID09PSBjO1xuICAgIH0pO1xuICB9ZnVuY3Rpb24gQyhhKSB7XG4gICAgdmFyIGMgPSB7fSxcbiAgICAgICAgZDtmb3IgKGQgaW4gYSkge1xuICAgICAgY1tkXSA9IGFbZF07XG4gICAgfXJldHVybiBjO1xuICB9ZnVuY3Rpb24gRChhLCBjKSB7XG4gICAgdmFyIGQgPSBDKGEpLFxuICAgICAgICBiO2ZvciAoYiBpbiBhKSB7XG4gICAgICBkW2JdID0gYy5oYXNPd25Qcm9wZXJ0eShiKSA/IGNbYl0gOiBhW2JdO1xuICAgIH1yZXR1cm4gZDtcbiAgfWZ1bmN0aW9uIHooYSwgYykge1xuICAgIHZhciBkID0gQyhhKSxcbiAgICAgICAgYjtmb3IgKGIgaW4gYykge1xuICAgICAgZFtiXSA9IGgudW5kKGFbYl0pID8gY1tiXSA6IGFbYl07XG4gICAgfXJldHVybiBkO1xuICB9ZnVuY3Rpb24gVChhKSB7XG4gICAgYSA9IGEucmVwbGFjZSgvXiM/KFthLWZcXGRdKShbYS1mXFxkXSkoW2EtZlxcZF0pJC9pLCBmdW5jdGlvbiAoYSwgYywgZCwgaykge1xuICAgICAgcmV0dXJuIGMgKyBjICsgZCArIGQgKyBrICsgaztcbiAgICB9KTt2YXIgYyA9IC9eIz8oW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkkL2kuZXhlYyhhKTtcbiAgICBhID0gcGFyc2VJbnQoY1sxXSwgMTYpO3ZhciBkID0gcGFyc2VJbnQoY1syXSwgMTYpLFxuICAgICAgICBjID0gcGFyc2VJbnQoY1szXSwgMTYpO3JldHVybiBcInJnYmEoXCIgKyBhICsgXCIsXCIgKyBkICsgXCIsXCIgKyBjICsgXCIsMSlcIjtcbiAgfWZ1bmN0aW9uIFUoYSkge1xuICAgIGZ1bmN0aW9uIGMoYSwgYywgYikge1xuICAgICAgMCA+IGIgJiYgKGIgKz0gMSk7MSA8IGIgJiYgLS1iO3JldHVybiBiIDwgMSAvIDYgPyBhICsgNiAqIChjIC0gYSkgKiBiIDogLjUgPiBiID8gYyA6IGIgPCAyIC8gMyA/IGEgKyAoYyAtIGEpICogKDIgLyAzIC0gYikgKiA2IDogYTtcbiAgICB9dmFyIGQgPSAvaHNsXFwoKFxcZCspLFxccyooW1xcZC5dKyklLFxccyooW1xcZC5dKyklXFwpL2cuZXhlYyhhKSB8fCAvaHNsYVxcKChcXGQrKSxcXHMqKFtcXGQuXSspJSxcXHMqKFtcXGQuXSspJSxcXHMqKFtcXGQuXSspXFwpL2cuZXhlYyhhKTthID0gcGFyc2VJbnQoZFsxXSkgLyAzNjA7dmFyIGIgPSBwYXJzZUludChkWzJdKSAvIDEwMCxcbiAgICAgICAgZiA9IHBhcnNlSW50KGRbM10pIC8gMTAwLFxuICAgICAgICBkID0gZFs0XSB8fCAxO2lmICgwID09IGIpIGYgPSBiID0gYSA9IGY7ZWxzZSB7XG4gICAgICB2YXIgbiA9IC41ID4gZiA/IGYgKiAoMSArIGIpIDogZiArIGIgLSBmICogYixcbiAgICAgICAgICBrID0gMiAqIGYgLSBuLFxuICAgICAgICAgIGYgPSBjKGssIG4sIGEgKyAxIC8gMyksXG4gICAgICAgICAgYiA9IGMoaywgbiwgYSk7YSA9IGMoaywgbiwgYSAtIDEgLyAzKTtcbiAgICB9cmV0dXJuIFwicmdiYShcIiArIDI1NSAqIGYgKyBcIixcIiArIDI1NSAqIGIgKyBcIixcIiArIDI1NSAqIGEgKyBcIixcIiArIGQgKyBcIilcIjtcbiAgfWZ1bmN0aW9uIHkoYSkge1xuICAgIGlmIChhID0gLyhbXFwrXFwtXT9bMC05I1xcLl0rKSglfHB4fHB0fGVtfHJlbXxpbnxjbXxtbXxleHxjaHxwY3x2d3x2aHx2bWlufHZtYXh8ZGVnfHJhZHx0dXJuKT8kLy5leGVjKGEpKSByZXR1cm4gYVsyXTtcbiAgfWZ1bmN0aW9uIFYoYSkge1xuICAgIGlmICgtMSA8IGEuaW5kZXhPZihcInRyYW5zbGF0ZVwiKSB8fCBcInBlcnNwZWN0aXZlXCIgPT09IGEpIHJldHVybiBcInB4XCI7aWYgKC0xIDwgYS5pbmRleE9mKFwicm90YXRlXCIpIHx8IC0xIDwgYS5pbmRleE9mKFwic2tld1wiKSkgcmV0dXJuIFwiZGVnXCI7XG4gIH1mdW5jdGlvbiBJKGEsIGMpIHtcbiAgICByZXR1cm4gaC5mbmMoYSkgPyBhKGMudGFyZ2V0LCBjLmlkLCBjLnRvdGFsKSA6IGE7XG4gIH1mdW5jdGlvbiBFKGEsIGMpIHtcbiAgICBpZiAoYyBpbiBhLnN0eWxlKSByZXR1cm4gZ2V0Q29tcHV0ZWRTdHlsZShhKS5nZXRQcm9wZXJ0eVZhbHVlKGMucmVwbGFjZSgvKFthLXpdKShbQS1aXSkvZywgXCIkMS0kMlwiKS50b0xvd2VyQ2FzZSgpKSB8fCBcIjBcIjtcbiAgfWZ1bmN0aW9uIEooYSwgYykge1xuICAgIGlmIChoLmRvbShhKSAmJiB1KFcsIGMpKSByZXR1cm4gXCJ0cmFuc2Zvcm1cIjtpZiAoaC5kb20oYSkgJiYgKGEuZ2V0QXR0cmlidXRlKGMpIHx8IGguc3ZnKGEpICYmIGFbY10pKSByZXR1cm4gXCJhdHRyaWJ1dGVcIjtpZiAoaC5kb20oYSkgJiYgXCJ0cmFuc2Zvcm1cIiAhPT0gYyAmJiBFKGEsIGMpKSByZXR1cm4gXCJjc3NcIjtpZiAobnVsbCAhPSBhW2NdKSByZXR1cm4gXCJvYmplY3RcIjtcbiAgfWZ1bmN0aW9uIFgoYSwgYykge1xuICAgIHZhciBkID0gVihjKSxcbiAgICAgICAgZCA9IC0xIDwgYy5pbmRleE9mKFwic2NhbGVcIikgPyAxIDogMCArIGQ7YSA9IGEuc3R5bGUudHJhbnNmb3JtO2lmICghYSkgcmV0dXJuIGQ7Zm9yICh2YXIgYiA9IFtdLCBmID0gW10sIG4gPSBbXSwgayA9IC8oXFx3KylcXCgoLis/KVxcKS9nOyBiID0gay5leGVjKGEpOykge1xuICAgICAgZi5wdXNoKGJbMV0pLCBuLnB1c2goYlsyXSk7XG4gICAgfWEgPSByKG4sIGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4gZltiXSA9PT0gYztcbiAgICB9KTtyZXR1cm4gYS5sZW5ndGggPyBhWzBdIDogZDtcbiAgfWZ1bmN0aW9uIEsoYSwgYykge1xuICAgIHN3aXRjaCAoSihhLCBjKSkge2Nhc2UgXCJ0cmFuc2Zvcm1cIjpcbiAgICAgICAgcmV0dXJuIFgoYSwgYyk7Y2FzZSBcImNzc1wiOlxuICAgICAgICByZXR1cm4gRShhLCBjKTtjYXNlIFwiYXR0cmlidXRlXCI6XG4gICAgICAgIHJldHVybiBhLmdldEF0dHJpYnV0ZShjKTt9cmV0dXJuIGFbY10gfHwgMDtcbiAgfWZ1bmN0aW9uIEwoYSwgYykge1xuICAgIHZhciBkID0gL14oXFwqPXxcXCs9fC09KS8uZXhlYyhhKTtpZiAoIWQpIHJldHVybiBhO3ZhciBiID0geShhKSB8fCAwO2MgPSBwYXJzZUZsb2F0KGMpO2EgPSBwYXJzZUZsb2F0KGEucmVwbGFjZShkWzBdLCBcIlwiKSk7c3dpdGNoIChkWzBdWzBdKSB7Y2FzZSBcIitcIjpcbiAgICAgICAgcmV0dXJuIGMgKyBhICsgYjtjYXNlIFwiLVwiOlxuICAgICAgICByZXR1cm4gYyAtIGEgKyBiO2Nhc2UgXCIqXCI6XG4gICAgICAgIHJldHVybiBjICogYSArIGI7fVxuICB9ZnVuY3Rpb24gRihhLCBjKSB7XG4gICAgcmV0dXJuIE1hdGguc3FydChNYXRoLnBvdyhjLnggLSBhLngsIDIpICsgTWF0aC5wb3coYy55IC0gYS55LCAyKSk7XG4gIH1mdW5jdGlvbiBNKGEpIHtcbiAgICBhID0gYS5wb2ludHM7Zm9yICh2YXIgYyA9IDAsIGQsIGIgPSAwOyBiIDwgYS5udW1iZXJPZkl0ZW1zOyBiKyspIHtcbiAgICAgIHZhciBmID0gYS5nZXRJdGVtKGIpOzAgPCBiICYmIChjICs9IEYoZCwgZikpO2QgPSBmO1xuICAgIH1yZXR1cm4gYztcbiAgfWZ1bmN0aW9uIE4oYSkge1xuICAgIGlmIChhLmdldFRvdGFsTGVuZ3RoKSByZXR1cm4gYS5nZXRUb3RhbExlbmd0aCgpO3N3aXRjaCAoYS50YWdOYW1lLnRvTG93ZXJDYXNlKCkpIHtjYXNlIFwiY2lyY2xlXCI6XG4gICAgICAgIHJldHVybiAyICogTWF0aC5QSSAqIGEuZ2V0QXR0cmlidXRlKFwiclwiKTtjYXNlIFwicmVjdFwiOlxuICAgICAgICByZXR1cm4gMiAqIGEuZ2V0QXR0cmlidXRlKFwid2lkdGhcIikgKyAyICogYS5nZXRBdHRyaWJ1dGUoXCJoZWlnaHRcIik7Y2FzZSBcImxpbmVcIjpcbiAgICAgICAgcmV0dXJuIEYoeyB4OiBhLmdldEF0dHJpYnV0ZShcIngxXCIpLCB5OiBhLmdldEF0dHJpYnV0ZShcInkxXCIpIH0sIHsgeDogYS5nZXRBdHRyaWJ1dGUoXCJ4MlwiKSwgeTogYS5nZXRBdHRyaWJ1dGUoXCJ5MlwiKSB9KTtjYXNlIFwicG9seWxpbmVcIjpcbiAgICAgICAgcmV0dXJuIE0oYSk7Y2FzZSBcInBvbHlnb25cIjpcbiAgICAgICAgdmFyIGMgPSBhLnBvaW50cztyZXR1cm4gTShhKSArIEYoYy5nZXRJdGVtKGMubnVtYmVyT2ZJdGVtcyAtIDEpLCBjLmdldEl0ZW0oMCkpO31cbiAgfWZ1bmN0aW9uIFkoYSwgYykge1xuICAgIGZ1bmN0aW9uIGQoYikge1xuICAgICAgYiA9IHZvaWQgMCA9PT0gYiA/IDAgOiBiO3JldHVybiBhLmVsLmdldFBvaW50QXRMZW5ndGgoMSA8PSBjICsgYiA/IGMgKyBiIDogMCk7XG4gICAgfXZhciBiID0gZCgpLFxuICAgICAgICBmID0gZCgtMSksXG4gICAgICAgIG4gPSBkKDEpO3N3aXRjaCAoYS5wcm9wZXJ0eSkge2Nhc2UgXCJ4XCI6XG4gICAgICAgIHJldHVybiBiLng7Y2FzZSBcInlcIjpcbiAgICAgICAgcmV0dXJuIGIueTtcbiAgICAgIGNhc2UgXCJhbmdsZVwiOlxuICAgICAgICByZXR1cm4gMTgwICogTWF0aC5hdGFuMihuLnkgLSBmLnksIG4ueCAtIGYueCkgLyBNYXRoLlBJO31cbiAgfWZ1bmN0aW9uIE8oYSwgYykge1xuICAgIHZhciBkID0gLy0/XFxkKlxcLj9cXGQrL2csXG4gICAgICAgIGI7YiA9IGgucHRoKGEpID8gYS50b3RhbExlbmd0aCA6IGE7aWYgKGguY29sKGIpKSB7XG4gICAgICBpZiAoaC5yZ2IoYikpIHtcbiAgICAgICAgdmFyIGYgPSAvcmdiXFwoKFxcZCssXFxzKltcXGRdKyxcXHMqW1xcZF0rKVxcKS9nLmV4ZWMoYik7YiA9IGYgPyBcInJnYmEoXCIgKyBmWzFdICsgXCIsMSlcIiA6IGI7XG4gICAgICB9IGVsc2UgYiA9IGguaGV4KGIpID8gVChiKSA6IGguaHNsKGIpID8gVShiKSA6IHZvaWQgMDtcbiAgICB9IGVsc2UgZiA9IChmID0geShiKSkgPyBiLnN1YnN0cigwLCBiLmxlbmd0aCAtIGYubGVuZ3RoKSA6IGIsIGIgPSBjICYmICEvXFxzL2cudGVzdChiKSA/IGYgKyBjIDogZjtiICs9IFwiXCI7cmV0dXJuIHsgb3JpZ2luYWw6IGIsIG51bWJlcnM6IGIubWF0Y2goZCkgPyBiLm1hdGNoKGQpLm1hcChOdW1iZXIpIDogWzBdLCBzdHJpbmdzOiBoLnN0cihhKSB8fCBjID8gYi5zcGxpdChkKSA6IFtdIH07XG4gIH1mdW5jdGlvbiBQKGEpIHtcbiAgICBhID0gYSA/IHAoaC5hcnIoYSkgPyBhLm1hcChtKSA6IG0oYSkpIDogW107cmV0dXJuIHIoYSwgZnVuY3Rpb24gKGEsIGQsIGIpIHtcbiAgICAgIHJldHVybiBiLmluZGV4T2YoYSkgPT09IGQ7XG4gICAgfSk7XG4gIH1mdW5jdGlvbiBaKGEpIHtcbiAgICB2YXIgYyA9IFAoYSk7cmV0dXJuIGMubWFwKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICByZXR1cm4geyB0YXJnZXQ6IGEsIGlkOiBiLCB0b3RhbDogYy5sZW5ndGggfTtcbiAgICB9KTtcbiAgfWZ1bmN0aW9uIGFhKGEsIGMpIHtcbiAgICB2YXIgZCA9IEMoYyk7aWYgKGguYXJyKGEpKSB7XG4gICAgICB2YXIgYiA9IGEubGVuZ3RoOzIgIT09IGIgfHwgaC5vYmooYVswXSkgPyBoLmZuYyhjLmR1cmF0aW9uKSB8fCAoZC5kdXJhdGlvbiA9IGMuZHVyYXRpb24gLyBiKSA6IGEgPSB7IHZhbHVlOiBhIH07XG4gICAgfXJldHVybiBtKGEpLm1hcChmdW5jdGlvbiAoYSwgYikge1xuICAgICAgYiA9IGIgPyAwIDogYy5kZWxheTthID0gaC5vYmooYSkgJiYgIWgucHRoKGEpID8gYSA6IHsgdmFsdWU6IGEgfTtoLnVuZChhLmRlbGF5KSAmJiAoYS5kZWxheSA9IGIpO3JldHVybiBhO1xuICAgIH0pLm1hcChmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIHooYSwgZCk7XG4gICAgfSk7XG4gIH1mdW5jdGlvbiBiYShhLCBjKSB7XG4gICAgdmFyIGQgPSB7fSxcbiAgICAgICAgYjtmb3IgKGIgaW4gYSkge1xuICAgICAgdmFyIGYgPSBJKGFbYl0sIGMpO2guYXJyKGYpICYmIChmID0gZi5tYXAoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcmV0dXJuIEkoYSwgYyk7XG4gICAgICB9KSwgMSA9PT0gZi5sZW5ndGggJiYgKGYgPSBmWzBdKSk7ZFtiXSA9IGY7XG4gICAgfWQuZHVyYXRpb24gPSBwYXJzZUZsb2F0KGQuZHVyYXRpb24pO2QuZGVsYXkgPSBwYXJzZUZsb2F0KGQuZGVsYXkpO3JldHVybiBkO1xuICB9ZnVuY3Rpb24gY2EoYSkge1xuICAgIHJldHVybiBoLmFycihhKSA/IEEuYXBwbHkodGhpcywgYSkgOiBRW2FdO1xuICB9ZnVuY3Rpb24gZGEoYSwgYykge1xuICAgIHZhciBkO3JldHVybiBhLnR3ZWVucy5tYXAoZnVuY3Rpb24gKGIpIHtcbiAgICAgIGIgPSBiYShiLCBjKTt2YXIgZiA9IGIudmFsdWUsXG4gICAgICAgICAgZSA9IEsoYy50YXJnZXQsIGEubmFtZSksXG4gICAgICAgICAgayA9IGQgPyBkLnRvLm9yaWdpbmFsIDogZSxcbiAgICAgICAgICBrID0gaC5hcnIoZikgPyBmWzBdIDogayxcbiAgICAgICAgICB3ID0gTChoLmFycihmKSA/IGZbMV0gOiBmLCBrKSxcbiAgICAgICAgICBlID0geSh3KSB8fCB5KGspIHx8IHkoZSk7Yi5mcm9tID0gTyhrLCBlKTtiLnRvID0gTyh3LCBlKTtiLnN0YXJ0ID0gZCA/IGQuZW5kIDogYS5vZmZzZXQ7Yi5lbmQgPSBiLnN0YXJ0ICsgYi5kZWxheSArIGIuZHVyYXRpb247Yi5lYXNpbmcgPSBjYShiLmVhc2luZyk7Yi5lbGFzdGljaXR5ID0gKDFFMyAtIE1hdGgubWluKE1hdGgubWF4KGIuZWxhc3RpY2l0eSwgMSksIDk5OSkpIC8gMUUzO2IuaXNQYXRoID0gaC5wdGgoZik7Yi5pc0NvbG9yID0gaC5jb2woYi5mcm9tLm9yaWdpbmFsKTtiLmlzQ29sb3IgJiYgKGIucm91bmQgPSAxKTtyZXR1cm4gZCA9IGI7XG4gICAgfSk7XG4gIH1mdW5jdGlvbiBlYShhLCBjKSB7XG4gICAgcmV0dXJuIHIocChhLm1hcChmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGMubWFwKGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZhciBjID0gSihhLnRhcmdldCwgYi5uYW1lKTtpZiAoYykge1xuICAgICAgICAgIHZhciBkID0gZGEoYiwgYSk7YiA9IHsgdHlwZTogYywgcHJvcGVydHk6IGIubmFtZSwgYW5pbWF0YWJsZTogYSwgdHdlZW5zOiBkLCBkdXJhdGlvbjogZFtkLmxlbmd0aCAtIDFdLmVuZCwgZGVsYXk6IGRbMF0uZGVsYXkgfTtcbiAgICAgICAgfSBlbHNlIGIgPSB2b2lkIDA7cmV0dXJuIGI7XG4gICAgICB9KTtcbiAgICB9KSksIGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gIWgudW5kKGEpO1xuICAgIH0pO1xuICB9ZnVuY3Rpb24gUihhLCBjLCBkLCBiKSB7XG4gICAgdmFyIGYgPSBcImRlbGF5XCIgPT09IGE7cmV0dXJuIGMubGVuZ3RoID8gKGYgPyBNYXRoLm1pbiA6IE1hdGgubWF4KS5hcHBseShNYXRoLCBjLm1hcChmdW5jdGlvbiAoYikge1xuICAgICAgcmV0dXJuIGJbYV07XG4gICAgfSkpIDogZiA/IGIuZGVsYXkgOiBkLm9mZnNldCArIGIuZGVsYXkgKyBiLmR1cmF0aW9uO1xuICB9ZnVuY3Rpb24gZmEoYSkge1xuICAgIHZhciBjID0gRChnYSwgYSksXG4gICAgICAgIGQgPSBEKFMsIGEpLFxuICAgICAgICBiID0gWihhLnRhcmdldHMpLFxuICAgICAgICBmID0gW10sXG4gICAgICAgIGUgPSB6KGMsIGQpLFxuICAgICAgICBrO2ZvciAoayBpbiBhKSB7XG4gICAgICBlLmhhc093blByb3BlcnR5KGspIHx8IFwidGFyZ2V0c1wiID09PSBrIHx8IGYucHVzaCh7IG5hbWU6IGssIG9mZnNldDogZS5vZmZzZXQsIHR3ZWVuczogYWEoYVtrXSwgZCkgfSk7XG4gICAgfWEgPSBlYShiLCBmKTtyZXR1cm4geihjLCB7IGNoaWxkcmVuOiBbXSwgYW5pbWF0YWJsZXM6IGIsIGFuaW1hdGlvbnM6IGEsIGR1cmF0aW9uOiBSKFwiZHVyYXRpb25cIiwgYSwgYywgZCksIGRlbGF5OiBSKFwiZGVsYXlcIiwgYSwgYywgZCkgfSk7XG4gIH1mdW5jdGlvbiBxKGEpIHtcbiAgICBmdW5jdGlvbiBjKCkge1xuICAgICAgcmV0dXJuIHdpbmRvdy5Qcm9taXNlICYmIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiBwID0gYTtcbiAgICAgIH0pO1xuICAgIH1mdW5jdGlvbiBkKGEpIHtcbiAgICAgIHJldHVybiBnLnJldmVyc2VkID8gZy5kdXJhdGlvbiAtIGEgOiBhO1xuICAgIH1mdW5jdGlvbiBiKGEpIHtcbiAgICAgIGZvciAodmFyIGIgPSAwLCBjID0ge30sIGQgPSBnLmFuaW1hdGlvbnMsIGYgPSBkLmxlbmd0aDsgYiA8IGY7KSB7XG4gICAgICAgIHZhciBlID0gZFtiXSxcbiAgICAgICAgICAgIGsgPSBlLmFuaW1hdGFibGUsXG4gICAgICAgICAgICBoID0gZS50d2VlbnMsXG4gICAgICAgICAgICBuID0gaC5sZW5ndGggLSAxLFxuICAgICAgICAgICAgbCA9IGhbbl07biAmJiAobCA9IHIoaCwgZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgICByZXR1cm4gYSA8IGIuZW5kO1xuICAgICAgICB9KVswXSB8fCBsKTtmb3IgKHZhciBoID0gTWF0aC5taW4oTWF0aC5tYXgoYSAtIGwuc3RhcnQgLSBsLmRlbGF5LCAwKSwgbC5kdXJhdGlvbikgLyBsLmR1cmF0aW9uLCB3ID0gaXNOYU4oaCkgPyAxIDogbC5lYXNpbmcoaCwgbC5lbGFzdGljaXR5KSwgaCA9IGwudG8uc3RyaW5ncywgcCA9IGwucm91bmQsIG4gPSBbXSwgbSA9IHZvaWQgMCwgbSA9IGwudG8ubnVtYmVycy5sZW5ndGgsIHQgPSAwOyB0IDwgbTsgdCsrKSB7XG4gICAgICAgICAgdmFyIHggPSB2b2lkIDAsXG4gICAgICAgICAgICAgIHggPSBsLnRvLm51bWJlcnNbdF0sXG4gICAgICAgICAgICAgIHEgPSBsLmZyb20ubnVtYmVyc1t0XSxcbiAgICAgICAgICAgICAgeCA9IGwuaXNQYXRoID8gWShsLnZhbHVlLCB3ICogeCkgOiBxICsgdyAqICh4IC0gcSk7cCAmJiAobC5pc0NvbG9yICYmIDIgPCB0IHx8ICh4ID0gTWF0aC5yb3VuZCh4ICogcCkgLyBwKSk7bi5wdXNoKHgpO1xuICAgICAgICB9aWYgKGwgPSBoLmxlbmd0aCkgZm9yIChtID0gaFswXSwgdyA9IDA7IHcgPCBsOyB3KyspIHtcbiAgICAgICAgICBwID0gaFt3ICsgMV0sIHQgPSBuW3ddLCBpc05hTih0KSB8fCAobSA9IHAgPyBtICsgKHQgKyBwKSA6IG0gKyAodCArIFwiIFwiKSk7XG4gICAgICAgIH0gZWxzZSBtID0gblswXTtoYVtlLnR5cGVdKGsudGFyZ2V0LCBlLnByb3BlcnR5LCBtLCBjLCBrLmlkKTtlLmN1cnJlbnRWYWx1ZSA9IG07YisrO1xuICAgICAgfWlmIChiID0gT2JqZWN0LmtleXMoYykubGVuZ3RoKSBmb3IgKGQgPSAwOyBkIDwgYjsgZCsrKSB7XG4gICAgICAgIEggfHwgKEggPSBFKGRvY3VtZW50LmJvZHksIFwidHJhbnNmb3JtXCIpID8gXCJ0cmFuc2Zvcm1cIiA6IFwiLXdlYmtpdC10cmFuc2Zvcm1cIiksIGcuYW5pbWF0YWJsZXNbZF0udGFyZ2V0LnN0eWxlW0hdID0gY1tkXS5qb2luKFwiIFwiKTtcbiAgICAgIH1nLmN1cnJlbnRUaW1lID0gYTtnLnByb2dyZXNzID0gYSAvIGcuZHVyYXRpb24gKiAxMDA7XG4gICAgfWZ1bmN0aW9uIGYoYSkge1xuICAgICAgaWYgKGdbYV0pIGdbYV0oZyk7XG4gICAgfWZ1bmN0aW9uIGUoKSB7XG4gICAgICBnLnJlbWFpbmluZyAmJiAhMCAhPT0gZy5yZW1haW5pbmcgJiYgZy5yZW1haW5pbmctLTtcbiAgICB9ZnVuY3Rpb24gayhhKSB7XG4gICAgICB2YXIgayA9IGcuZHVyYXRpb24sXG4gICAgICAgICAgbiA9IGcub2Zmc2V0LFxuICAgICAgICAgIHcgPSBuICsgZy5kZWxheSxcbiAgICAgICAgICByID0gZy5jdXJyZW50VGltZSxcbiAgICAgICAgICB4ID0gZy5yZXZlcnNlZCxcbiAgICAgICAgICBxID0gZChhKTtpZiAoZy5jaGlsZHJlbi5sZW5ndGgpIHtcbiAgICAgICAgdmFyIHUgPSBnLmNoaWxkcmVuLFxuICAgICAgICAgICAgdiA9IHUubGVuZ3RoO1xuICAgICAgICBpZiAocSA+PSBnLmN1cnJlbnRUaW1lKSBmb3IgKHZhciBHID0gMDsgRyA8IHY7IEcrKykge1xuICAgICAgICAgIHVbR10uc2VlayhxKTtcbiAgICAgICAgfSBlbHNlIGZvciAoOyB2LS07KSB7XG4gICAgICAgICAgdVt2XS5zZWVrKHEpO1xuICAgICAgICB9XG4gICAgICB9aWYgKHEgPj0gdyB8fCAhaykgZy5iZWdhbiB8fCAoZy5iZWdhbiA9ICEwLCBmKFwiYmVnaW5cIikpLCBmKFwicnVuXCIpO2lmIChxID4gbiAmJiBxIDwgaykgYihxKTtlbHNlIGlmIChxIDw9IG4gJiYgMCAhPT0gciAmJiAoYigwKSwgeCAmJiBlKCkpLCBxID49IGsgJiYgciAhPT0gayB8fCAhaykgYihrKSwgeCB8fCBlKCk7ZihcInVwZGF0ZVwiKTthID49IGsgJiYgKGcucmVtYWluaW5nID8gKHQgPSBoLCBcImFsdGVybmF0ZVwiID09PSBnLmRpcmVjdGlvbiAmJiAoZy5yZXZlcnNlZCA9ICFnLnJldmVyc2VkKSkgOiAoZy5wYXVzZSgpLCBnLmNvbXBsZXRlZCB8fCAoZy5jb21wbGV0ZWQgPSAhMCwgZihcImNvbXBsZXRlXCIpLCBcIlByb21pc2VcIiBpbiB3aW5kb3cgJiYgKHAoKSwgbSA9IGMoKSkpKSwgbCA9IDApO1xuICAgIH1hID0gdm9pZCAwID09PSBhID8ge30gOiBhO3ZhciBoLFxuICAgICAgICB0LFxuICAgICAgICBsID0gMCxcbiAgICAgICAgcCA9IG51bGwsXG4gICAgICAgIG0gPSBjKCksXG4gICAgICAgIGcgPSBmYShhKTtnLnJlc2V0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGEgPSBnLmRpcmVjdGlvbixcbiAgICAgICAgICBjID0gZy5sb29wO2cuY3VycmVudFRpbWUgPSAwO2cucHJvZ3Jlc3MgPSAwO2cucGF1c2VkID0gITA7Zy5iZWdhbiA9ICExO2cuY29tcGxldGVkID0gITE7Zy5yZXZlcnNlZCA9IFwicmV2ZXJzZVwiID09PSBhO2cucmVtYWluaW5nID0gXCJhbHRlcm5hdGVcIiA9PT0gYSAmJiAxID09PSBjID8gMiA6IGM7YigwKTtmb3IgKGEgPSBnLmNoaWxkcmVuLmxlbmd0aDsgYS0tOykge1xuICAgICAgICBnLmNoaWxkcmVuW2FdLnJlc2V0KCk7XG4gICAgICB9XG4gICAgfTtnLnRpY2sgPSBmdW5jdGlvbiAoYSkge1xuICAgICAgaCA9IGE7dCB8fCAodCA9IGgpO2soKGwgKyBoIC0gdCkgKiBxLnNwZWVkKTtcbiAgICB9O2cuc2VlayA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICBrKGQoYSkpO1xuICAgIH07Zy5wYXVzZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBhID0gdi5pbmRleE9mKGcpOy0xIDwgYSAmJiB2LnNwbGljZShhLCAxKTtnLnBhdXNlZCA9ICEwO1xuICAgIH07Zy5wbGF5ID0gZnVuY3Rpb24gKCkge1xuICAgICAgZy5wYXVzZWQgJiYgKGcucGF1c2VkID0gITEsIHQgPSAwLCBsID0gZChnLmN1cnJlbnRUaW1lKSwgdi5wdXNoKGcpLCBCIHx8IGlhKCkpO1xuICAgIH07Zy5yZXZlcnNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgZy5yZXZlcnNlZCA9ICFnLnJldmVyc2VkO3QgPSAwO2wgPSBkKGcuY3VycmVudFRpbWUpO1xuICAgIH07Zy5yZXN0YXJ0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgZy5wYXVzZSgpO1xuICAgICAgZy5yZXNldCgpO2cucGxheSgpO1xuICAgIH07Zy5maW5pc2hlZCA9IG07Zy5yZXNldCgpO2cuYXV0b3BsYXkgJiYgZy5wbGF5KCk7cmV0dXJuIGc7XG4gIH12YXIgZ2EgPSB7IHVwZGF0ZTogdm9pZCAwLCBiZWdpbjogdm9pZCAwLCBydW46IHZvaWQgMCwgY29tcGxldGU6IHZvaWQgMCwgbG9vcDogMSwgZGlyZWN0aW9uOiBcIm5vcm1hbFwiLCBhdXRvcGxheTogITAsIG9mZnNldDogMCB9LFxuICAgICAgUyA9IHsgZHVyYXRpb246IDFFMywgZGVsYXk6IDAsIGVhc2luZzogXCJlYXNlT3V0RWxhc3RpY1wiLCBlbGFzdGljaXR5OiA1MDAsIHJvdW5kOiAwIH0sXG4gICAgICBXID0gXCJ0cmFuc2xhdGVYIHRyYW5zbGF0ZVkgdHJhbnNsYXRlWiByb3RhdGUgcm90YXRlWCByb3RhdGVZIHJvdGF0ZVogc2NhbGUgc2NhbGVYIHNjYWxlWSBzY2FsZVogc2tld1ggc2tld1kgcGVyc3BlY3RpdmVcIi5zcGxpdChcIiBcIiksXG4gICAgICBILFxuICAgICAgaCA9IHsgYXJyOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIEFycmF5LmlzQXJyYXkoYSk7XG4gICAgfSwgb2JqOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIC0xIDwgT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGEpLmluZGV4T2YoXCJPYmplY3RcIik7XG4gICAgfSxcbiAgICBwdGg6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gaC5vYmooYSkgJiYgYS5oYXNPd25Qcm9wZXJ0eShcInRvdGFsTGVuZ3RoXCIpO1xuICAgIH0sIHN2ZzogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBhIGluc3RhbmNlb2YgU1ZHRWxlbWVudDtcbiAgICB9LCBkb206IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gYS5ub2RlVHlwZSB8fCBoLnN2ZyhhKTtcbiAgICB9LCBzdHI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gXCJzdHJpbmdcIiA9PT0gdHlwZW9mIGE7XG4gICAgfSwgZm5jOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIFwiZnVuY3Rpb25cIiA9PT0gdHlwZW9mIGE7XG4gICAgfSwgdW5kOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIFwidW5kZWZpbmVkXCIgPT09IHR5cGVvZiBhO1xuICAgIH0sIGhleDogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiAoLyheI1swLTlBLUZdezZ9JCl8KF4jWzAtOUEtRl17M30kKS9pLnRlc3QoYSlcbiAgICAgICk7XG4gICAgfSwgcmdiOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICgvXnJnYi8udGVzdChhKVxuICAgICAgKTtcbiAgICB9LCBoc2w6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gKC9eaHNsLy50ZXN0KGEpXG4gICAgICApO1xuICAgIH0sIGNvbDogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBoLmhleChhKSB8fCBoLnJnYihhKSB8fCBoLmhzbChhKTtcbiAgICB9IH0sXG4gICAgICBBID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIGEoYSwgZCwgYikge1xuICAgICAgcmV0dXJuICgoKDEgLSAzICogYiArIDMgKiBkKSAqIGEgKyAoMyAqIGIgLSA2ICogZCkpICogYSArIDMgKiBkKSAqIGE7XG4gICAgfXJldHVybiBmdW5jdGlvbiAoYywgZCwgYiwgZikge1xuICAgICAgaWYgKDAgPD0gYyAmJiAxID49IGMgJiYgMCA8PSBiICYmIDEgPj0gYikge1xuICAgICAgICB2YXIgZSA9IG5ldyBGbG9hdDMyQXJyYXkoMTEpO2lmIChjICE9PSBkIHx8IGIgIT09IGYpIGZvciAodmFyIGsgPSAwOyAxMSA+IGs7ICsraykge1xuICAgICAgICAgIGVba10gPSBhKC4xICogaywgYywgYik7XG4gICAgICAgIH1yZXR1cm4gZnVuY3Rpb24gKGspIHtcbiAgICAgICAgICBpZiAoYyA9PT0gZCAmJiBiID09PSBmKSByZXR1cm4gaztpZiAoMCA9PT0gaykgcmV0dXJuIDA7aWYgKDEgPT09IGspIHJldHVybiAxO2ZvciAodmFyIGggPSAwLCBsID0gMTsgMTAgIT09IGwgJiYgZVtsXSA8PSBrOyArK2wpIHtcbiAgICAgICAgICAgIGggKz0gLjE7XG4gICAgICAgICAgfS0tbDt2YXIgbCA9IGggKyAoayAtIGVbbF0pIC8gKGVbbCArIDFdIC0gZVtsXSkgKiAuMSxcbiAgICAgICAgICAgICAgbiA9IDMgKiAoMSAtIDMgKiBiICsgMyAqIGMpICogbCAqIGwgKyAyICogKDMgKiBiIC0gNiAqIGMpICogbCArIDMgKiBjO2lmICguMDAxIDw9IG4pIHtcbiAgICAgICAgICAgIGZvciAoaCA9IDA7IDQgPiBoOyArK2gpIHtcbiAgICAgICAgICAgICAgbiA9IDMgKiAoMSAtIDMgKiBiICsgMyAqIGMpICogbCAqIGwgKyAyICogKDMgKiBiIC0gNiAqIGMpICogbCArIDMgKiBjO2lmICgwID09PSBuKSBicmVhazt2YXIgbSA9IGEobCwgYywgYikgLSBrLFxuICAgICAgICAgICAgICAgICAgbCA9IGwgLSBtIC8gbjtcbiAgICAgICAgICAgIH1rID0gbDtcbiAgICAgICAgICB9IGVsc2UgaWYgKDAgPT09IG4pIGsgPSBsO2Vsc2Uge1xuICAgICAgICAgICAgdmFyIGwgPSBoLFxuICAgICAgICAgICAgICAgIGggPSBoICsgLjEsXG4gICAgICAgICAgICAgICAgZyA9IDA7ZG8ge1xuICAgICAgICAgICAgICBtID0gbCArIChoIC0gbCkgLyAyLCBuID0gYShtLCBjLCBiKSAtIGssIDAgPCBuID8gaCA9IG0gOiBsID0gbTtcbiAgICAgICAgICAgIH0gd2hpbGUgKDFlLTcgPCBNYXRoLmFicyhuKSAmJiAxMCA+ICsrZyk7ayA9IG07XG4gICAgICAgICAgfXJldHVybiBhKGssIGQsIGYpO1xuICAgICAgICB9O1xuICAgICAgfVxuICAgIH07XG4gIH0oKSxcbiAgICAgIFEgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gYShhLCBiKSB7XG4gICAgICByZXR1cm4gMCA9PT0gYSB8fCAxID09PSBhID8gYSA6IC1NYXRoLnBvdygyLCAxMCAqIChhIC0gMSkpICogTWF0aC5zaW4oMiAqIChhIC0gMSAtIGIgLyAoMiAqIE1hdGguUEkpICogTWF0aC5hc2luKDEpKSAqIE1hdGguUEkgLyBiKTtcbiAgICB9dmFyIGMgPSBcIlF1YWQgQ3ViaWMgUXVhcnQgUXVpbnQgU2luZSBFeHBvIENpcmMgQmFjayBFbGFzdGljXCIuc3BsaXQoXCIgXCIpLFxuICAgICAgICBkID0geyBJbjogW1suNTUsIC4wODUsIC42OCwgLjUzXSwgWy41NSwgLjA1NSwgLjY3NSwgLjE5XSwgWy44OTUsIC4wMywgLjY4NSwgLjIyXSwgWy43NTUsIC4wNSwgLjg1NSwgLjA2XSwgWy40NywgMCwgLjc0NSwgLjcxNV0sIFsuOTUsIC4wNSwgLjc5NSwgLjAzNV0sIFsuNiwgLjA0LCAuOTgsIC4zMzVdLCBbLjYsIC0uMjgsIC43MzUsIC4wNDVdLCBhXSwgT3V0OiBbWy4yNSwgLjQ2LCAuNDUsIC45NF0sIFsuMjE1LCAuNjEsIC4zNTUsIDFdLCBbLjE2NSwgLjg0LCAuNDQsIDFdLCBbLjIzLCAxLCAuMzIsIDFdLCBbLjM5LCAuNTc1LCAuNTY1LCAxXSwgWy4xOSwgMSwgLjIyLCAxXSwgWy4wNzUsIC44MiwgLjE2NSwgMV0sIFsuMTc1LCAuODg1LCAuMzIsIDEuMjc1XSwgZnVuY3Rpb24gKGIsIGMpIHtcbiAgICAgICAgcmV0dXJuIDEgLSBhKDEgLSBiLCBjKTtcbiAgICAgIH1dLCBJbk91dDogW1suNDU1LCAuMDMsIC41MTUsIC45NTVdLCBbLjY0NSwgLjA0NSwgLjM1NSwgMV0sIFsuNzcsIDAsIC4xNzUsIDFdLCBbLjg2LCAwLCAuMDcsIDFdLCBbLjQ0NSwgLjA1LCAuNTUsIC45NV0sIFsxLCAwLCAwLCAxXSwgWy43ODUsIC4xMzUsIC4xNSwgLjg2XSwgWy42OCwgLS41NSwgLjI2NSwgMS41NV0sIGZ1bmN0aW9uIChiLCBjKSB7XG4gICAgICAgIHJldHVybiAuNSA+IGIgPyBhKDIgKiBiLCBjKSAvIDIgOiAxIC0gYSgtMiAqIGIgKyAyLCBjKSAvIDI7XG4gICAgICB9XSB9LFxuICAgICAgICBiID0geyBsaW5lYXI6IEEoLjI1LCAuMjUsIC43NSwgLjc1KSB9LFxuICAgICAgICBmID0ge30sXG4gICAgICAgIGU7Zm9yIChlIGluIGQpIHtcbiAgICAgIGYudHlwZSA9IGUsIGRbZi50eXBlXS5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIHJldHVybiBmdW5jdGlvbiAoZCwgZikge1xuICAgICAgICAgIGJbXCJlYXNlXCIgKyBhLnR5cGUgKyBjW2ZdXSA9IGguZm5jKGQpID8gZCA6IEEuYXBwbHkoJGpzY29tcCR0aGlzLCBkKTtcbiAgICAgICAgfTtcbiAgICAgIH0oZikpLCBmID0geyB0eXBlOiBmLnR5cGUgfTtcbiAgICB9cmV0dXJuIGI7XG4gIH0oKSxcbiAgICAgIGhhID0geyBjc3M6IGZ1bmN0aW9uIChhLCBjLCBkKSB7XG4gICAgICByZXR1cm4gYS5zdHlsZVtjXSA9IGQ7XG4gICAgfSwgYXR0cmlidXRlOiBmdW5jdGlvbiAoYSwgYywgZCkge1xuICAgICAgcmV0dXJuIGEuc2V0QXR0cmlidXRlKGMsIGQpO1xuICAgIH0sIG9iamVjdDogZnVuY3Rpb24gKGEsIGMsIGQpIHtcbiAgICAgIHJldHVybiBhW2NdID0gZDtcbiAgICB9LCB0cmFuc2Zvcm06IGZ1bmN0aW9uIChhLCBjLCBkLCBiLCBmKSB7XG4gICAgICBiW2ZdIHx8IChiW2ZdID0gW10pO2JbZl0ucHVzaChjICsgXCIoXCIgKyBkICsgXCIpXCIpO1xuICAgIH0gfSxcbiAgICAgIHYgPSBbXSxcbiAgICAgIEIgPSAwLFxuICAgICAgaWEgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gYSgpIHtcbiAgICAgIEIgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoYyk7XG4gICAgfWZ1bmN0aW9uIGMoYykge1xuICAgICAgdmFyIGIgPSB2Lmxlbmd0aDtpZiAoYikge1xuICAgICAgICBmb3IgKHZhciBkID0gMDsgZCA8IGI7KSB7XG4gICAgICAgICAgdltkXSAmJiB2W2RdLnRpY2soYyksIGQrKztcbiAgICAgICAgfWEoKTtcbiAgICAgIH0gZWxzZSBjYW5jZWxBbmltYXRpb25GcmFtZShCKSwgQiA9IDA7XG4gICAgfXJldHVybiBhO1xuICB9KCk7cS52ZXJzaW9uID0gXCIyLjIuMFwiO3Euc3BlZWQgPSAxO3EucnVubmluZyA9IHY7cS5yZW1vdmUgPSBmdW5jdGlvbiAoYSkge1xuICAgIGEgPSBQKGEpO2ZvciAodmFyIGMgPSB2Lmxlbmd0aDsgYy0tOykge1xuICAgICAgZm9yICh2YXIgZCA9IHZbY10sIGIgPSBkLmFuaW1hdGlvbnMsIGYgPSBiLmxlbmd0aDsgZi0tOykge1xuICAgICAgICB1KGEsIGJbZl0uYW5pbWF0YWJsZS50YXJnZXQpICYmIChiLnNwbGljZShmLCAxKSwgYi5sZW5ndGggfHwgZC5wYXVzZSgpKTtcbiAgICAgIH1cbiAgICB9XG4gIH07cS5nZXRWYWx1ZSA9IEs7cS5wYXRoID0gZnVuY3Rpb24gKGEsIGMpIHtcbiAgICB2YXIgZCA9IGguc3RyKGEpID8gZShhKVswXSA6IGEsXG4gICAgICAgIGIgPSBjIHx8IDEwMDtyZXR1cm4gZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiB7IGVsOiBkLCBwcm9wZXJ0eTogYSwgdG90YWxMZW5ndGg6IE4oZCkgKiAoYiAvIDEwMCkgfTtcbiAgICB9O1xuICB9O3Euc2V0RGFzaG9mZnNldCA9IGZ1bmN0aW9uIChhKSB7XG4gICAgdmFyIGMgPSBOKGEpO2Euc2V0QXR0cmlidXRlKFwic3Ryb2tlLWRhc2hhcnJheVwiLCBjKTtyZXR1cm4gYztcbiAgfTtxLmJlemllciA9IEE7cS5lYXNpbmdzID0gUTtxLnRpbWVsaW5lID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgYyA9IHEoYSk7Yy5wYXVzZSgpO2MuZHVyYXRpb24gPSAwO2MuYWRkID0gZnVuY3Rpb24gKGQpIHtcbiAgICAgIGMuY2hpbGRyZW4uZm9yRWFjaChmdW5jdGlvbiAoYSkge1xuICAgICAgICBhLmJlZ2FuID0gITA7YS5jb21wbGV0ZWQgPSAhMDtcbiAgICAgIH0pO20oZCkuZm9yRWFjaChmdW5jdGlvbiAoYikge1xuICAgICAgICB2YXIgZCA9IHooYiwgRChTLCBhIHx8IHt9KSk7ZC50YXJnZXRzID0gZC50YXJnZXRzIHx8IGEudGFyZ2V0cztiID0gYy5kdXJhdGlvbjt2YXIgZSA9IGQub2Zmc2V0O2QuYXV0b3BsYXkgPSAhMTtkLmRpcmVjdGlvbiA9IGMuZGlyZWN0aW9uO2Qub2Zmc2V0ID0gaC51bmQoZSkgPyBiIDogTChlLCBiKTtjLmJlZ2FuID0gITA7Yy5jb21wbGV0ZWQgPSAhMDtjLnNlZWsoZC5vZmZzZXQpO2QgPSBxKGQpO2QuYmVnYW4gPSAhMDtkLmNvbXBsZXRlZCA9ICEwO2QuZHVyYXRpb24gPiBiICYmIChjLmR1cmF0aW9uID0gZC5kdXJhdGlvbik7Yy5jaGlsZHJlbi5wdXNoKGQpO1xuICAgICAgfSk7Yy5zZWVrKDApO2MucmVzZXQoKTtjLmF1dG9wbGF5ICYmIGMucmVzdGFydCgpO3JldHVybiBjO1xuICAgIH07cmV0dXJuIGM7XG4gIH07cS5yYW5kb20gPSBmdW5jdGlvbiAoYSwgYykge1xuICAgIHJldHVybiBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoYyAtIGEgKyAxKSkgKyBhO1xuICB9O3JldHVybiBxO1xufSk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGFjY29yZGlvbjogdHJ1ZSxcbiAgICBvbk9wZW5TdGFydDogdW5kZWZpbmVkLFxuICAgIG9uT3BlbkVuZDogdW5kZWZpbmVkLFxuICAgIG9uQ2xvc2VTdGFydDogdW5kZWZpbmVkLFxuICAgIG9uQ2xvc2VFbmQ6IHVuZGVmaW5lZCxcbiAgICBpbkR1cmF0aW9uOiAzMDAsXG4gICAgb3V0RHVyYXRpb246IDMwMFxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIENvbGxhcHNpYmxlID0gZnVuY3Rpb24gKF9Db21wb25lbnQpIHtcbiAgICBfaW5oZXJpdHMoQ29sbGFwc2libGUsIF9Db21wb25lbnQpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IENvbGxhcHNpYmxlIGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ29sbGFwc2libGUoZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb2xsYXBzaWJsZSk7XG5cbiAgICAgIHZhciBfdGhpczMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ29sbGFwc2libGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xsYXBzaWJsZSkpLmNhbGwodGhpcywgQ29sbGFwc2libGUsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzMy5lbC5NX0NvbGxhcHNpYmxlID0gX3RoaXMzO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBjb2xsYXBzaWJsZVxuICAgICAgICogQG1lbWJlciBDb2xsYXBzaWJsZSNvcHRpb25zXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2FjY29yZGlvbj1mYWxzZV0gLSBUeXBlIG9mIHRoZSBjb2xsYXBzaWJsZVxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgY29sbGFwc2libGUgaXMgb3BlbmVkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBjb2xsYXBzaWJsZSBpcyBvcGVuZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGJlZm9yZSBjb2xsYXBzaWJsZSBpcyBjbG9zZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZUVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBjb2xsYXBzaWJsZSBpcyBjbG9zZWRcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGluRHVyYXRpb24gLSBUcmFuc2l0aW9uIGluIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IG91dER1cmF0aW9uIC0gVHJhbnNpdGlvbiBkdXJhdGlvbiBpbiBtaWxsaXNlY29uZHMuXG4gICAgICAgKi9cbiAgICAgIF90aGlzMy5vcHRpb25zID0gJC5leHRlbmQoe30sIENvbGxhcHNpYmxlLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLy8gU2V0dXAgdGFiIGluZGljZXNcbiAgICAgIF90aGlzMy4kaGVhZGVycyA9IF90aGlzMy4kZWwuY2hpbGRyZW4oJ2xpJykuY2hpbGRyZW4oJy5jb2xsYXBzaWJsZS1oZWFkZXInKTtcbiAgICAgIF90aGlzMy4kaGVhZGVycy5hdHRyKCd0YWJpbmRleCcsIDApO1xuXG4gICAgICBfdGhpczMuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuXG4gICAgICAvLyBPcGVuIGZpcnN0IGFjdGl2ZVxuICAgICAgdmFyICRhY3RpdmVCb2RpZXMgPSBfdGhpczMuJGVsLmNoaWxkcmVuKCdsaS5hY3RpdmUnKS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWJvZHknKTtcbiAgICAgIGlmIChfdGhpczMub3B0aW9ucy5hY2NvcmRpb24pIHtcbiAgICAgICAgLy8gSGFuZGxlIEFjY29yZGlvblxuICAgICAgICAkYWN0aXZlQm9kaWVzLmZpcnN0KCkuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBIYW5kbGUgRXhwYW5kYWJsZXNcbiAgICAgICAgJGFjdGl2ZUJvZGllcy5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBfdGhpczM7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENvbGxhcHNpYmxlLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLk1fQ29sbGFwc2libGUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB2YXIgX3RoaXM0ID0gdGhpcztcblxuICAgICAgICB0aGlzLl9oYW5kbGVDb2xsYXBzaWJsZUNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDb2xsYXBzaWJsZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlQ29sbGFwc2libGVLZXlkb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDb2xsYXBzaWJsZUNsaWNrQm91bmQpO1xuICAgICAgICB0aGlzLiRoZWFkZXJzLmVhY2goZnVuY3Rpb24gKGhlYWRlcikge1xuICAgICAgICAgIGhlYWRlci5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgX3RoaXM0Ll9oYW5kbGVDb2xsYXBzaWJsZUtleWRvd25Cb3VuZCk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdmFyIF90aGlzNSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuJGhlYWRlcnMuZWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7XG4gICAgICAgICAgaGVhZGVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBfdGhpczUuX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93bkJvdW5kKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENvbGxhcHNpYmxlIENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ29sbGFwc2libGVDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDb2xsYXBzaWJsZUNsaWNrKGUpIHtcbiAgICAgICAgdmFyICRoZWFkZXIgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY29sbGFwc2libGUtaGVhZGVyJyk7XG4gICAgICAgIGlmIChlLnRhcmdldCAmJiAkaGVhZGVyLmxlbmd0aCkge1xuICAgICAgICAgIHZhciAkY29sbGFwc2libGUgPSAkaGVhZGVyLmNsb3Nlc3QoJy5jb2xsYXBzaWJsZScpO1xuICAgICAgICAgIGlmICgkY29sbGFwc2libGVbMF0gPT09IHRoaXMuZWwpIHtcbiAgICAgICAgICAgIHZhciAkY29sbGFwc2libGVMaSA9ICRoZWFkZXIuY2xvc2VzdCgnbGknKTtcbiAgICAgICAgICAgIHZhciAkY29sbGFwc2libGVMaXMgPSAkY29sbGFwc2libGUuY2hpbGRyZW4oJ2xpJyk7XG4gICAgICAgICAgICB2YXIgaXNBY3RpdmUgPSAkY29sbGFwc2libGVMaVswXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gJGNvbGxhcHNpYmxlTGlzLmluZGV4KCRjb2xsYXBzaWJsZUxpKTtcblxuICAgICAgICAgICAgaWYgKGlzQWN0aXZlKSB7XG4gICAgICAgICAgICAgIHRoaXMuY2xvc2UoaW5kZXgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5vcGVuKGluZGV4KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgQ29sbGFwc2libGUgS2V5ZG93blxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDb2xsYXBzaWJsZUtleWRvd24oZSkge1xuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2tCb3VuZChlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgaW4gY29sbGFwc2libGUgc2xpZGVcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCAtIDB0aCBpbmRleCBvZiBzbGlkZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVJblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW4oaW5kZXgpIHtcbiAgICAgICAgdmFyIF90aGlzNiA9IHRoaXM7XG5cbiAgICAgICAgdmFyICRjb2xsYXBzaWJsZUxpID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpJykuZXEoaW5kZXgpO1xuICAgICAgICBpZiAoJGNvbGxhcHNpYmxlTGkubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyICRib2R5ID0gJGNvbGxhcHNpYmxlTGkuY2hpbGRyZW4oJy5jb2xsYXBzaWJsZS1ib2R5Jyk7XG5cbiAgICAgICAgICBhbmltLnJlbW92ZSgkYm9keVswXSk7XG4gICAgICAgICAgJGJvZHkuY3NzKHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaycsXG4gICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBwYWRkaW5nVG9wOiAnJyxcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206ICcnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB2YXIgcFRvcCA9ICRib2R5LmNzcygncGFkZGluZy10b3AnKTtcbiAgICAgICAgICB2YXIgcEJvdHRvbSA9ICRib2R5LmNzcygncGFkZGluZy1ib3R0b20nKTtcbiAgICAgICAgICB2YXIgZmluYWxIZWlnaHQgPSAkYm9keVswXS5zY3JvbGxIZWlnaHQ7XG4gICAgICAgICAgJGJvZHkuY3NzKHtcbiAgICAgICAgICAgIHBhZGRpbmdUb3A6IDAsXG4gICAgICAgICAgICBwYWRkaW5nQm90dG9tOiAwXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6ICRib2R5WzBdLFxuICAgICAgICAgICAgaGVpZ2h0OiBmaW5hbEhlaWdodCxcbiAgICAgICAgICAgIHBhZGRpbmdUb3A6IHBUb3AsXG4gICAgICAgICAgICBwYWRkaW5nQm90dG9tOiBwQm90dG9tLFxuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0Q3ViaWMnLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgICAgICAgICRib2R5LmNzcyh7XG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLFxuICAgICAgICAgICAgICAgIHBhZGRpbmdUb3A6ICcnLFxuICAgICAgICAgICAgICAgIHBhZGRpbmdCb3R0b206ICcnLFxuICAgICAgICAgICAgICAgIGhlaWdodDogJydcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgLy8gb25PcGVuRW5kIGNhbGxiYWNrXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXM2Lm9wdGlvbnMub25PcGVuRW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM2Lm9wdGlvbnMub25PcGVuRW5kLmNhbGwoX3RoaXM2LCAkY29sbGFwc2libGVMaVswXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgb3V0IGNvbGxhcHNpYmxlIHNsaWRlXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggLSAwdGggaW5kZXggb2Ygc2xpZGUgdG8gb3BlblxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVPdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU91dChpbmRleCkge1xuICAgICAgICB2YXIgX3RoaXM3ID0gdGhpcztcblxuICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGkgPSB0aGlzLiRlbC5jaGlsZHJlbignbGknKS5lcShpbmRleCk7XG4gICAgICAgIGlmICgkY29sbGFwc2libGVMaS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgJGJvZHkgPSAkY29sbGFwc2libGVMaS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWJvZHknKTtcbiAgICAgICAgICBhbmltLnJlbW92ZSgkYm9keVswXSk7XG4gICAgICAgICAgJGJvZHkuY3NzKCdvdmVyZmxvdycsICdoaWRkZW4nKTtcbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6ICRib2R5WzBdLFxuICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgcGFkZGluZ1RvcDogMCxcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0Q3ViaWMnLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgJGJvZHkuY3NzKHtcbiAgICAgICAgICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICAgICAgICAgIG92ZXJmbG93OiAnJyxcbiAgICAgICAgICAgICAgICBwYWRkaW5nOiAnJyxcbiAgICAgICAgICAgICAgICBkaXNwbGF5OiAnJ1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBvbkNsb3NlRW5kIGNhbGxiYWNrXG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXM3Lm9wdGlvbnMub25DbG9zZUVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIF90aGlzNy5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczcsICRjb2xsYXBzaWJsZUxpWzBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT3BlbiBDb2xsYXBzaWJsZVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gMHRoIGluZGV4IG9mIHNsaWRlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvcGVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbihpbmRleCkge1xuICAgICAgICB2YXIgX3RoaXM4ID0gdGhpcztcblxuICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGkgPSB0aGlzLiRlbC5jaGlsZHJlbignbGknKS5lcShpbmRleCk7XG4gICAgICAgIGlmICgkY29sbGFwc2libGVMaS5sZW5ndGggJiYgISRjb2xsYXBzaWJsZUxpWzBdLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJykpIHtcbiAgICAgICAgICAvLyBvbk9wZW5TdGFydCBjYWxsYmFja1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uT3BlblN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQuY2FsbCh0aGlzLCAkY29sbGFwc2libGVMaVswXSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSGFuZGxlIGFjY29yZGlvbiBiZWhhdmlvclxuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYWNjb3JkaW9uKSB7XG4gICAgICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGlzID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpJyk7XG4gICAgICAgICAgICB2YXIgJGFjdGl2ZUxpcyA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaS5hY3RpdmUnKTtcbiAgICAgICAgICAgICRhY3RpdmVMaXMuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgdmFyIGluZGV4ID0gJGNvbGxhcHNpYmxlTGlzLmluZGV4KCQoZWwpKTtcbiAgICAgICAgICAgICAgX3RoaXM4LmNsb3NlKGluZGV4KTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFuaW1hdGUgaW5cbiAgICAgICAgICAkY29sbGFwc2libGVMaVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICB0aGlzLl9hbmltYXRlSW4oaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2xvc2UgQ29sbGFwc2libGVcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCAtIDB0aCBpbmRleCBvZiBzbGlkZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZShpbmRleCkge1xuICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGkgPSB0aGlzLiRlbC5jaGlsZHJlbignbGknKS5lcShpbmRleCk7XG4gICAgICAgIGlmICgkY29sbGFwc2libGVMaS5sZW5ndGggJiYgJGNvbGxhcHNpYmxlTGlbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgICAgIC8vIG9uQ2xvc2VTdGFydCBjYWxsYmFja1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsICRjb2xsYXBzaWJsZUxpWzBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBBbmltYXRlIG91dFxuICAgICAgICAgICRjb2xsYXBzaWJsZUxpWzBdLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGVPdXQoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KENvbGxhcHNpYmxlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ29sbGFwc2libGUpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Db2xsYXBzaWJsZTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDb2xsYXBzaWJsZTtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uQ29sbGFwc2libGUgPSBDb2xsYXBzaWJsZTtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKENvbGxhcHNpYmxlLCAnY29sbGFwc2libGUnLCAnTV9Db2xsYXBzaWJsZScpO1xuICB9XG59KShjYXNoLCBNLmFuaW1lKTtcbjsoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgYWxpZ25tZW50OiAnbGVmdCcsXG4gICAgYXV0b0ZvY3VzOiB0cnVlLFxuICAgIGNvbnN0cmFpbldpZHRoOiB0cnVlLFxuICAgIGNvbnRhaW5lcjogbnVsbCxcbiAgICBjb3ZlclRyaWdnZXI6IHRydWUsXG4gICAgY2xvc2VPbkNsaWNrOiB0cnVlLFxuICAgIGhvdmVyOiBmYWxzZSxcbiAgICBpbkR1cmF0aW9uOiAxNTAsXG4gICAgb3V0RHVyYXRpb246IDI1MCxcbiAgICBvbk9wZW5TdGFydDogbnVsbCxcbiAgICBvbk9wZW5FbmQ6IG51bGwsXG4gICAgb25DbG9zZVN0YXJ0OiBudWxsLFxuICAgIG9uQ2xvc2VFbmQ6IG51bGwsXG4gICAgb25JdGVtQ2xpY2s6IG51bGxcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqL1xuXG4gIHZhciBEcm9wZG93biA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Mikge1xuICAgIF9pbmhlcml0cyhEcm9wZG93biwgX0NvbXBvbmVudDIpO1xuXG4gICAgZnVuY3Rpb24gRHJvcGRvd24oZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBEcm9wZG93bik7XG5cbiAgICAgIHZhciBfdGhpczkgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoRHJvcGRvd24uX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEcm9wZG93bikpLmNhbGwodGhpcywgRHJvcGRvd24sIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzOS5lbC5NX0Ryb3Bkb3duID0gX3RoaXM5O1xuICAgICAgRHJvcGRvd24uX2Ryb3Bkb3ducy5wdXNoKF90aGlzOSk7XG5cbiAgICAgIF90aGlzOS5pZCA9IE0uZ2V0SWRGcm9tVHJpZ2dlcihlbCk7XG4gICAgICBfdGhpczkuZHJvcGRvd25FbCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKF90aGlzOS5pZCk7XG4gICAgICBfdGhpczkuJGRyb3Bkb3duRWwgPSAkKF90aGlzOS5kcm9wZG93bkVsKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgZHJvcGRvd25cbiAgICAgICAqIEBtZW1iZXIgRHJvcGRvd24jb3B0aW9uc1xuICAgICAgICogQHByb3Age1N0cmluZ30gW2FsaWdubWVudD0nbGVmdCddIC0gRWRnZSB3aGljaCB0aGUgZHJvcGRvd24gaXMgYWxpZ25lZCB0b1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFthdXRvRm9jdXM9dHJ1ZV0gLSBBdXRvbWF0aWNhbGx5IGZvY3VzIGRyb3Bkb3duIGVsIGZvciBrZXlib2FyZFxuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtjb25zdHJhaW5XaWR0aD10cnVlXSAtIENvbnN0cmFpbiB3aWR0aCB0byB3aWR0aCBvZiB0aGUgYnV0dG9uXG4gICAgICAgKiBAcHJvcCB7RWxlbWVudH0gY29udGFpbmVyIC0gQ29udGFpbmVyIGVsZW1lbnQgdG8gYXR0YWNoIGRyb3Bkb3duIHRvIChvcHRpb25hbClcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbY292ZXJUcmlnZ2VyPXRydWVdIC0gUGxhY2UgZHJvcGRvd24gb3ZlciB0cmlnZ2VyXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2Nsb3NlT25DbGljaz10cnVlXSAtIENsb3NlIG9uIGNsaWNrIG9mIGRyb3Bkb3duIGl0ZW1cbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbaG92ZXI9ZmFsc2VdIC0gT3BlbiBkcm9wZG93biBvbiBob3ZlclxuICAgICAgICogQHByb3Age051bWJlcn0gW2luRHVyYXRpb249MTUwXSAtIER1cmF0aW9uIG9mIG9wZW4gYW5pbWF0aW9uIGluIG1zXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbb3V0RHVyYXRpb249MjUwXSAtIER1cmF0aW9uIG9mIGNsb3NlIGFuaW1hdGlvbiBpbiBtc1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRyb3Bkb3duIHN0YXJ0cyBvcGVuaW5nXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRyb3Bkb3duIGZpbmlzaGVzIG9wZW5pbmdcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gZHJvcGRvd24gc3RhcnRzIGNsb3NpbmdcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZUVuZCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIGRyb3Bkb3duIGZpbmlzaGVzIGNsb3NpbmdcbiAgICAgICAqL1xuICAgICAgX3RoaXM5Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRHJvcGRvd24uZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAvKipcbiAgICAgICAqIERlc2NyaWJlcyBvcGVuL2Nsb3NlIHN0YXRlIG9mIGRyb3Bkb3duXG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgX3RoaXM5LmlzT3BlbiA9IGZhbHNlO1xuXG4gICAgICAvKipcbiAgICAgICAqIERlc2NyaWJlcyBpZiBkcm9wZG93biBjb250ZW50IGlzIHNjcm9sbGFibGVcbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICBfdGhpczkuaXNTY3JvbGxhYmxlID0gZmFsc2U7XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIGlmIHRvdWNoIG1vdmluZyBvbiBkcm9wZG93biBjb250ZW50XG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgX3RoaXM5LmlzVG91Y2hNb3ZpbmcgPSBmYWxzZTtcblxuICAgICAgX3RoaXM5LmZvY3VzZWRJbmRleCA9IC0xO1xuICAgICAgX3RoaXM5LmZpbHRlclF1ZXJ5ID0gW107XG5cbiAgICAgIC8vIE1vdmUgZHJvcGRvd24tY29udGVudCBhZnRlciBkcm9wZG93bi10cmlnZ2VyXG4gICAgICBpZiAoISFfdGhpczkub3B0aW9ucy5jb250YWluZXIpIHtcbiAgICAgICAgJChfdGhpczkub3B0aW9ucy5jb250YWluZXIpLmFwcGVuZChfdGhpczkuZHJvcGRvd25FbCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpczkuJGVsLmFmdGVyKF90aGlzOS5kcm9wZG93bkVsKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXM5Ll9tYWtlRHJvcGRvd25Gb2N1c2FibGUoKTtcbiAgICAgIF90aGlzOS5fcmVzZXRGaWx0ZXJRdWVyeUJvdW5kID0gX3RoaXM5Ll9yZXNldEZpbHRlclF1ZXJ5LmJpbmQoX3RoaXM5KTtcbiAgICAgIF90aGlzOS5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kID0gX3RoaXM5Ll9oYW5kbGVEb2N1bWVudENsaWNrLmJpbmQoX3RoaXM5KTtcbiAgICAgIF90aGlzOS5faGFuZGxlRG9jdW1lbnRUb3VjaG1vdmVCb3VuZCA9IF90aGlzOS5faGFuZGxlRG9jdW1lbnRUb3VjaG1vdmUuYmluZChfdGhpczkpO1xuICAgICAgX3RoaXM5Ll9oYW5kbGVEcm9wZG93bkNsaWNrQm91bmQgPSBfdGhpczkuX2hhbmRsZURyb3Bkb3duQ2xpY2suYmluZChfdGhpczkpO1xuICAgICAgX3RoaXM5Ll9oYW5kbGVEcm9wZG93bktleWRvd25Cb3VuZCA9IF90aGlzOS5faGFuZGxlRHJvcGRvd25LZXlkb3duLmJpbmQoX3RoaXM5KTtcbiAgICAgIF90aGlzOS5faGFuZGxlVHJpZ2dlcktleWRvd25Cb3VuZCA9IF90aGlzOS5faGFuZGxlVHJpZ2dlcktleWRvd24uYmluZChfdGhpczkpO1xuICAgICAgX3RoaXM5Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczk7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKERyb3Bkb3duLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVzZXREcm9wZG93blN0eWxlcygpO1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIERyb3Bkb3duLl9kcm9wZG93bnMuc3BsaWNlKERyb3Bkb3duLl9kcm9wZG93bnMuaW5kZXhPZih0aGlzKSwgMSk7XG4gICAgICAgIHRoaXMuZWwuTV9Ecm9wZG93biA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIC8vIFRyaWdnZXIga2V5ZG93biBoYW5kbGVyXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZVRyaWdnZXJLZXlkb3duQm91bmQpO1xuXG4gICAgICAgIC8vIEl0ZW0gY2xpY2sgaGFuZGxlclxuICAgICAgICB0aGlzLmRyb3Bkb3duRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEcm9wZG93bkNsaWNrQm91bmQpO1xuXG4gICAgICAgIC8vIEhvdmVyIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaG92ZXIpIHtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUVudGVyLmJpbmQodGhpcyk7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlLmJpbmQodGhpcyk7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTtcbiAgICAgICAgICB0aGlzLmRyb3Bkb3duRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7XG5cbiAgICAgICAgICAvLyBDbGljayBldmVudCBoYW5kbGVyc1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGlja0JvdW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlVHJpZ2dlcktleWRvd25Cb3VuZCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURyb3Bkb3duQ2xpY2tCb3VuZCk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ob3Zlcikge1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuX2hhbmRsZU1vdXNlRW50ZXJCb3VuZCk7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTtcbiAgICAgICAgICB0aGlzLmRyb3Bkb3duRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsaWNrQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cFRlbXBvcmFyeUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBUZW1wb3JhcnlFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICAvLyBVc2UgY2FwdHVyZSBwaGFzZSBldmVudCBoYW5kbGVyIHRvIHByZXZlbnQgY2xpY2tcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlQm91bmQpO1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZURyb3Bkb3duS2V5ZG93bkJvdW5kKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZVRlbXBvcmFyeUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlVGVtcG9yYXJ5RXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgLy8gVXNlIGNhcHR1cmUgcGhhc2UgZXZlbnQgaGFuZGxlciB0byBwcmV2ZW50IGNsaWNrXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQsIHRydWUpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVEb2N1bWVudFRvdWNobW92ZUJvdW5kKTtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVEcm9wZG93bktleWRvd25Cb3VuZCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVNb3VzZUVudGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1vdXNlRW50ZXIoKSB7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlTW91c2VMZWF2ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVNb3VzZUxlYXZlKGUpIHtcbiAgICAgICAgdmFyIHRvRWwgPSBlLnRvRWxlbWVudCB8fCBlLnJlbGF0ZWRUYXJnZXQ7XG4gICAgICAgIHZhciBsZWF2ZVRvRHJvcGRvd25Db250ZW50ID0gISEkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoO1xuICAgICAgICB2YXIgbGVhdmVUb0FjdGl2ZURyb3Bkb3duVHJpZ2dlciA9IGZhbHNlO1xuXG4gICAgICAgIHZhciAkY2xvc2VzdFRyaWdnZXIgPSAkKHRvRWwpLmNsb3Nlc3QoJy5kcm9wZG93bi10cmlnZ2VyJyk7XG4gICAgICAgIGlmICgkY2xvc2VzdFRyaWdnZXIubGVuZ3RoICYmICEhJGNsb3Nlc3RUcmlnZ2VyWzBdLk1fRHJvcGRvd24gJiYgJGNsb3Nlc3RUcmlnZ2VyWzBdLk1fRHJvcGRvd24uaXNPcGVuKSB7XG4gICAgICAgICAgbGVhdmVUb0FjdGl2ZURyb3Bkb3duVHJpZ2dlciA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDbG9zZSBob3ZlciBkcm9wZG93biBpZiBtb3VzZSBkaWQgbm90IGxlYXZlIHRvIGVpdGhlciBhY3RpdmUgZHJvcGRvd24tdHJpZ2dlciBvciBkcm9wZG93bi1jb250ZW50XG4gICAgICAgIGlmICghbGVhdmVUb0FjdGl2ZURyb3Bkb3duVHJpZ2dlciAmJiAhbGVhdmVUb0Ryb3Bkb3duQ29udGVudCkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRG9jdW1lbnRDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEb2N1bWVudENsaWNrKGUpIHtcbiAgICAgICAgdmFyIF90aGlzMTAgPSB0aGlzO1xuXG4gICAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY2xvc2VPbkNsaWNrICYmICR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGggJiYgIXRoaXMuaXNUb3VjaE1vdmluZykge1xuICAgICAgICAgIC8vIGlzVG91Y2hNb3ZpbmcgdG8gY2hlY2sgaWYgc2Nyb2xsaW5nIG9uIG1vYmlsZS5cbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzMTAuY2xvc2UoKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfSBlbHNlIGlmICgkdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi10cmlnZ2VyJykubGVuZ3RoIHx8ICEkdGFyZ2V0LmNsb3Nlc3QoJy5kcm9wZG93bi1jb250ZW50JykubGVuZ3RoKSB7XG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczEwLmNsb3NlKCk7XG4gICAgICAgICAgfSwgMCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc1RvdWNoTW92aW5nID0gZmFsc2U7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVUcmlnZ2VyS2V5ZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVUcmlnZ2VyS2V5ZG93bihlKSB7XG4gICAgICAgIC8vIEFSUk9XIERPV04gT1IgRU5URVIgV0hFTiBTRUxFQ1QgSVMgQ0xPU0VEIC0gb3BlbiBEcm9wZG93blxuICAgICAgICBpZiAoKGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOIHx8IGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUikgJiYgIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIERvY3VtZW50IFRvdWNobW92ZVxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlKGUpIHtcbiAgICAgICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgaWYgKCR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmlzVG91Y2hNb3ZpbmcgPSB0cnVlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIERyb3Bkb3duIENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRHJvcGRvd25DbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEcm9wZG93bkNsaWNrKGUpIHtcbiAgICAgICAgLy8gb25JdGVtQ2xpY2sgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25JdGVtQ2xpY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB2YXIgaXRlbUVsID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKVswXTtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25JdGVtQ2xpY2suY2FsbCh0aGlzLCBpdGVtRWwpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIERyb3Bkb3duIEtleWRvd25cbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVEcm9wZG93bktleWRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRHJvcGRvd25LZXlkb3duKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5UQUIpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuXG4gICAgICAgICAgLy8gTmF2aWdhdGUgZG93biBkcm9wZG93biBsaXN0XG4gICAgICAgIH0gZWxzZSBpZiAoKGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOIHx8IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19VUCkgJiYgdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdmFyIGRpcmVjdGlvbiA9IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOID8gMSA6IC0xO1xuICAgICAgICAgIHZhciBuZXdGb2N1c2VkSW5kZXggPSB0aGlzLmZvY3VzZWRJbmRleDtcbiAgICAgICAgICB2YXIgZm91bmROZXdJbmRleCA9IGZhbHNlO1xuICAgICAgICAgIGRvIHtcbiAgICAgICAgICAgIG5ld0ZvY3VzZWRJbmRleCA9IG5ld0ZvY3VzZWRJbmRleCArIGRpcmVjdGlvbjtcblxuICAgICAgICAgICAgaWYgKCEhdGhpcy5kcm9wZG93bkVsLmNoaWxkcmVuW25ld0ZvY3VzZWRJbmRleF0gJiYgdGhpcy5kcm9wZG93bkVsLmNoaWxkcmVuW25ld0ZvY3VzZWRJbmRleF0udGFiSW5kZXggIT09IC0xKSB7XG4gICAgICAgICAgICAgIGZvdW5kTmV3SW5kZXggPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IHdoaWxlIChuZXdGb2N1c2VkSW5kZXggPCB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW4ubGVuZ3RoICYmIG5ld0ZvY3VzZWRJbmRleCA+PSAwKTtcblxuICAgICAgICAgIGlmIChmb3VuZE5ld0luZGV4KSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRJbmRleCA9IG5ld0ZvY3VzZWRJbmRleDtcbiAgICAgICAgICAgIHRoaXMuX2ZvY3VzRm9jdXNlZEl0ZW0oKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBFTlRFUiBzZWxlY3RzIGNob2ljZSBvbiBmb2N1c2VkIGl0ZW1cbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09PSBNLmtleXMuRU5URVIgJiYgdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICAvLyBTZWFyY2ggZm9yIDxhPiBhbmQgPGJ1dHRvbj5cbiAgICAgICAgICB2YXIgZm9jdXNlZEVsZW1lbnQgPSB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bdGhpcy5mb2N1c2VkSW5kZXhdO1xuICAgICAgICAgIHZhciAkYWN0aXZhdGFibGVFbGVtZW50ID0gJChmb2N1c2VkRWxlbWVudCkuZmluZCgnYSwgYnV0dG9uJykuZmlyc3QoKTtcblxuICAgICAgICAgIC8vIENsaWNrIGEgb3IgYnV0dG9uIHRhZyBpZiBleGlzdHMsIG90aGVyd2lzZSBjbGljayBsaSB0YWdcbiAgICAgICAgICBpZiAoISEkYWN0aXZhdGFibGVFbGVtZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgJGFjdGl2YXRhYmxlRWxlbWVudFswXS5jbGljaygpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoISFmb2N1c2VkRWxlbWVudCkge1xuICAgICAgICAgICAgZm9jdXNlZEVsZW1lbnQuY2xpY2soKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDbG9zZSBkcm9wZG93biBvbiBFU0NcbiAgICAgICAgfSBlbHNlIGlmIChlLndoaWNoID09PSBNLmtleXMuRVNDICYmIHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENBU0UgV0hFTiBVU0VSIFRZUEUgTEVUVEVSU1xuICAgICAgICB2YXIgbGV0dGVyID0gU3RyaW5nLmZyb21DaGFyQ29kZShlLndoaWNoKS50b0xvd2VyQ2FzZSgpLFxuICAgICAgICAgICAgbm9uTGV0dGVycyA9IFs5LCAxMywgMjcsIDM4LCA0MF07XG4gICAgICAgIGlmIChsZXR0ZXIgJiYgbm9uTGV0dGVycy5pbmRleE9mKGUud2hpY2gpID09PSAtMSkge1xuICAgICAgICAgIHRoaXMuZmlsdGVyUXVlcnkucHVzaChsZXR0ZXIpO1xuXG4gICAgICAgICAgdmFyIHN0cmluZyA9IHRoaXMuZmlsdGVyUXVlcnkuam9pbignJyksXG4gICAgICAgICAgICAgIG5ld09wdGlvbkVsID0gJCh0aGlzLmRyb3Bkb3duRWwpLmZpbmQoJ2xpJykuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgcmV0dXJuICQoZWwpLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2Yoc3RyaW5nKSA9PT0gMDtcbiAgICAgICAgICB9KVswXTtcblxuICAgICAgICAgIGlmIChuZXdPcHRpb25FbCkge1xuICAgICAgICAgICAgdGhpcy5mb2N1c2VkSW5kZXggPSAkKG5ld09wdGlvbkVsKS5pbmRleCgpO1xuICAgICAgICAgICAgdGhpcy5fZm9jdXNGb2N1c2VkSXRlbSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZmlsdGVyVGltZW91dCA9IHNldFRpbWVvdXQodGhpcy5fcmVzZXRGaWx0ZXJRdWVyeUJvdW5kLCAxMDAwKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBkcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3Jlc2V0RmlsdGVyUXVlcnlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzZXRGaWx0ZXJRdWVyeSgpIHtcbiAgICAgICAgdGhpcy5maWx0ZXJRdWVyeSA9IFtdO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVzZXREcm9wZG93blN0eWxlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldERyb3Bkb3duU3R5bGVzKCkge1xuICAgICAgICB0aGlzLiRkcm9wZG93bkVsLmNzcyh7XG4gICAgICAgICAgZGlzcGxheTogJycsXG4gICAgICAgICAgd2lkdGg6ICcnLFxuICAgICAgICAgIGhlaWdodDogJycsXG4gICAgICAgICAgbGVmdDogJycsXG4gICAgICAgICAgdG9wOiAnJyxcbiAgICAgICAgICAndHJhbnNmb3JtLW9yaWdpbic6ICcnLFxuICAgICAgICAgIHRyYW5zZm9ybTogJycsXG4gICAgICAgICAgb3BhY2l0eTogJydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9tYWtlRHJvcGRvd25Gb2N1c2FibGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfbWFrZURyb3Bkb3duRm9jdXNhYmxlKCkge1xuICAgICAgICAvLyBOZWVkZWQgZm9yIGFycm93IGtleSBuYXZpZ2F0aW9uXG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC50YWJJbmRleCA9IDA7XG5cbiAgICAgICAgLy8gT25seSBzZXQgdGFiaW5kZXggaWYgaXQgaGFzbid0IGJlZW4gc2V0IGJ5IHVzZXJcbiAgICAgICAgJCh0aGlzLmRyb3Bkb3duRWwpLmNoaWxkcmVuKCkuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBpZiAoIWVsLmdldEF0dHJpYnV0ZSgndGFiaW5kZXgnKSkge1xuICAgICAgICAgICAgZWwuc2V0QXR0cmlidXRlKCd0YWJpbmRleCcsIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9mb2N1c0ZvY3VzZWRJdGVtXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZvY3VzRm9jdXNlZEl0ZW0oKSB7XG4gICAgICAgIGlmICh0aGlzLmZvY3VzZWRJbmRleCA+PSAwICYmIHRoaXMuZm9jdXNlZEluZGV4IDwgdGhpcy5kcm9wZG93bkVsLmNoaWxkcmVuLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgdGhpcy5kcm9wZG93bkVsLmNoaWxkcmVuW3RoaXMuZm9jdXNlZEluZGV4XS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9nZXREcm9wZG93blBvc2l0aW9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldERyb3Bkb3duUG9zaXRpb24oKSB7XG4gICAgICAgIHZhciBvZmZzZXRQYXJlbnRCUmVjdCA9IHRoaXMuZWwub2Zmc2V0UGFyZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgdHJpZ2dlckJSZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGRyb3Bkb3duQlJlY3QgPSB0aGlzLmRyb3Bkb3duRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG5cbiAgICAgICAgdmFyIGlkZWFsSGVpZ2h0ID0gZHJvcGRvd25CUmVjdC5oZWlnaHQ7XG4gICAgICAgIHZhciBpZGVhbFdpZHRoID0gZHJvcGRvd25CUmVjdC53aWR0aDtcbiAgICAgICAgdmFyIGlkZWFsWFBvcyA9IHRyaWdnZXJCUmVjdC5sZWZ0IC0gZHJvcGRvd25CUmVjdC5sZWZ0O1xuICAgICAgICB2YXIgaWRlYWxZUG9zID0gdHJpZ2dlckJSZWN0LnRvcCAtIGRyb3Bkb3duQlJlY3QudG9wO1xuXG4gICAgICAgIHZhciBkcm9wZG93bkJvdW5kcyA9IHtcbiAgICAgICAgICBsZWZ0OiBpZGVhbFhQb3MsXG4gICAgICAgICAgdG9wOiBpZGVhbFlQb3MsXG4gICAgICAgICAgaGVpZ2h0OiBpZGVhbEhlaWdodCxcbiAgICAgICAgICB3aWR0aDogaWRlYWxXaWR0aFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIENvdW50YWluZXIgaGVyZSB3aWxsIGJlIGNsb3Nlc3QgYW5jZXN0b3Igd2l0aCBvdmVyZmxvdzogaGlkZGVuXG4gICAgICAgIHZhciBjbG9zZXN0T3ZlcmZsb3dQYXJlbnQgPSAhIXRoaXMuZHJvcGRvd25FbC5vZmZzZXRQYXJlbnQgPyB0aGlzLmRyb3Bkb3duRWwub2Zmc2V0UGFyZW50IDogdGhpcy5kcm9wZG93bkVsLnBhcmVudE5vZGU7XG5cbiAgICAgICAgdmFyIGFsaWdubWVudHMgPSBNLmNoZWNrUG9zc2libGVBbGlnbm1lbnRzKHRoaXMuZWwsIGNsb3Nlc3RPdmVyZmxvd1BhcmVudCwgZHJvcGRvd25Cb3VuZHMsIHRoaXMub3B0aW9ucy5jb3ZlclRyaWdnZXIgPyAwIDogdHJpZ2dlckJSZWN0LmhlaWdodCk7XG5cbiAgICAgICAgdmFyIHZlcnRpY2FsQWxpZ25tZW50ID0gJ3RvcCc7XG4gICAgICAgIHZhciBob3Jpem9udGFsQWxpZ25tZW50ID0gdGhpcy5vcHRpb25zLmFsaWdubWVudDtcbiAgICAgICAgaWRlYWxZUG9zICs9IHRoaXMub3B0aW9ucy5jb3ZlclRyaWdnZXIgPyAwIDogdHJpZ2dlckJSZWN0LmhlaWdodDtcblxuICAgICAgICAvLyBSZXNldCBpc1Njcm9sbGFibGVcbiAgICAgICAgdGhpcy5pc1Njcm9sbGFibGUgPSBmYWxzZTtcblxuICAgICAgICBpZiAoIWFsaWdubWVudHMudG9wKSB7XG4gICAgICAgICAgaWYgKGFsaWdubWVudHMuYm90dG9tKSB7XG4gICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudCA9ICdib3R0b20nO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmlzU2Nyb2xsYWJsZSA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIERldGVybWluZSB3aGljaCBzaWRlIGhhcyBtb3N0IHNwYWNlIGFuZCBjdXRvZmYgYXQgY29ycmVjdCBoZWlnaHRcbiAgICAgICAgICAgIGlmIChhbGlnbm1lbnRzLnNwYWNlT25Ub3AgPiBhbGlnbm1lbnRzLnNwYWNlT25Cb3R0b20pIHtcbiAgICAgICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQgPSAnYm90dG9tJztcbiAgICAgICAgICAgICAgaWRlYWxIZWlnaHQgKz0gYWxpZ25tZW50cy5zcGFjZU9uVG9wO1xuICAgICAgICAgICAgICBpZGVhbFlQb3MgLT0gYWxpZ25tZW50cy5zcGFjZU9uVG9wO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaWRlYWxIZWlnaHQgKz0gYWxpZ25tZW50cy5zcGFjZU9uQm90dG9tO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHByZWZlcnJlZCBob3Jpem9udGFsIGFsaWdubWVudCBpcyBwb3NzaWJsZVxuICAgICAgICBpZiAoIWFsaWdubWVudHNbaG9yaXpvbnRhbEFsaWdubWVudF0pIHtcbiAgICAgICAgICB2YXIgb3Bwb3NpdGVBbGlnbm1lbnQgPSBob3Jpem9udGFsQWxpZ25tZW50ID09PSAnbGVmdCcgPyAncmlnaHQnIDogJ2xlZnQnO1xuICAgICAgICAgIGlmIChhbGlnbm1lbnRzW29wcG9zaXRlQWxpZ25tZW50XSkge1xuICAgICAgICAgICAgaG9yaXpvbnRhbEFsaWdubWVudCA9IG9wcG9zaXRlQWxpZ25tZW50O1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggc2lkZSBoYXMgbW9zdCBzcGFjZSBhbmQgY3V0b2ZmIGF0IGNvcnJlY3QgaGVpZ2h0XG4gICAgICAgICAgICBpZiAoYWxpZ25tZW50cy5zcGFjZU9uTGVmdCA+IGFsaWdubWVudHMuc3BhY2VPblJpZ2h0KSB7XG4gICAgICAgICAgICAgIGhvcml6b250YWxBbGlnbm1lbnQgPSAncmlnaHQnO1xuICAgICAgICAgICAgICBpZGVhbFdpZHRoICs9IGFsaWdubWVudHMuc3BhY2VPbkxlZnQ7XG4gICAgICAgICAgICAgIGlkZWFsWFBvcyAtPSBhbGlnbm1lbnRzLnNwYWNlT25MZWZ0O1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgaG9yaXpvbnRhbEFsaWdubWVudCA9ICdsZWZ0JztcbiAgICAgICAgICAgICAgaWRlYWxXaWR0aCArPSBhbGlnbm1lbnRzLnNwYWNlT25SaWdodDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmVydGljYWxBbGlnbm1lbnQgPT09ICdib3R0b20nKSB7XG4gICAgICAgICAgaWRlYWxZUG9zID0gaWRlYWxZUG9zIC0gZHJvcGRvd25CUmVjdC5oZWlnaHQgKyAodGhpcy5vcHRpb25zLmNvdmVyVHJpZ2dlciA/IHRyaWdnZXJCUmVjdC5oZWlnaHQgOiAwKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoaG9yaXpvbnRhbEFsaWdubWVudCA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIGlkZWFsWFBvcyA9IGlkZWFsWFBvcyAtIGRyb3Bkb3duQlJlY3Qud2lkdGggKyB0cmlnZ2VyQlJlY3Qud2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiBpZGVhbFhQb3MsXG4gICAgICAgICAgeTogaWRlYWxZUG9zLFxuICAgICAgICAgIHZlcnRpY2FsQWxpZ25tZW50OiB2ZXJ0aWNhbEFsaWdubWVudCxcbiAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50OiBob3Jpem9udGFsQWxpZ25tZW50LFxuICAgICAgICAgIGhlaWdodDogaWRlYWxIZWlnaHQsXG4gICAgICAgICAgd2lkdGg6IGlkZWFsV2lkdGhcbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIGluIGRyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUluXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbigpIHtcbiAgICAgICAgdmFyIF90aGlzMTEgPSB0aGlzO1xuXG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZHJvcGRvd25FbCk7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuZHJvcGRvd25FbCxcbiAgICAgICAgICBvcGFjaXR5OiB7XG4gICAgICAgICAgICB2YWx1ZTogWzAsIDFdLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzY2FsZVg6IFswLjMsIDFdLFxuICAgICAgICAgIHNjYWxlWTogWzAuMywgMV0sXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWludCcsXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgICAgICBpZiAoX3RoaXMxMS5vcHRpb25zLmF1dG9Gb2N1cykge1xuICAgICAgICAgICAgICBfdGhpczExLmRyb3Bkb3duRWwuZm9jdXMoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gb25PcGVuRW5kIGNhbGxiYWNrXG4gICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTEub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMxMS5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKF90aGlzMTEsIF90aGlzMTEuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQW5pbWF0ZSBvdXQgZHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlT3V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVPdXQoKSB7XG4gICAgICAgIHZhciBfdGhpczEyID0gdGhpcztcblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmRyb3Bkb3duRWwpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLmRyb3Bkb3duRWwsXG4gICAgICAgICAgb3BhY2l0eToge1xuICAgICAgICAgICAgdmFsdWU6IDAsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVpbnQnXG4gICAgICAgICAgfSxcbiAgICAgICAgICBzY2FsZVg6IDAuMyxcbiAgICAgICAgICBzY2FsZVk6IDAuMyxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWludCcsXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uIChhbmltKSB7XG4gICAgICAgICAgICBfdGhpczEyLl9yZXNldERyb3Bkb3duU3R5bGVzKCk7XG5cbiAgICAgICAgICAgIC8vIG9uQ2xvc2VFbmQgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMxMi5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMxMi5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczEyLCBfdGhpczEyLmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFBsYWNlIGRyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcGxhY2VEcm9wZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9wbGFjZURyb3Bkb3duKCkge1xuICAgICAgICAvLyBTZXQgd2lkdGggYmVmb3JlIGNhbGN1bGF0aW5nIHBvc2l0aW9uSW5mb1xuICAgICAgICB2YXIgaWRlYWxXaWR0aCA9IHRoaXMub3B0aW9ucy5jb25zdHJhaW5XaWR0aCA/IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggOiB0aGlzLmRyb3Bkb3duRWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS53aWR0aCA9IGlkZWFsV2lkdGggKyAncHgnO1xuXG4gICAgICAgIHZhciBwb3NpdGlvbkluZm8gPSB0aGlzLl9nZXREcm9wZG93blBvc2l0aW9uKCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS5sZWZ0ID0gcG9zaXRpb25JbmZvLnggKyAncHgnO1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWwuc3R5bGUudG9wID0gcG9zaXRpb25JbmZvLnkgKyAncHgnO1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWwuc3R5bGUuaGVpZ2h0ID0gcG9zaXRpb25JbmZvLmhlaWdodCArICdweCc7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS53aWR0aCA9IHBvc2l0aW9uSW5mby53aWR0aCArICdweCc7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS50cmFuc2Zvcm1PcmlnaW4gPSAocG9zaXRpb25JbmZvLmhvcml6b250YWxBbGlnbm1lbnQgPT09ICdsZWZ0JyA/ICcwJyA6ICcxMDAlJykgKyBcIiBcIiArIChwb3NpdGlvbkluZm8udmVydGljYWxBbGlnbm1lbnQgPT09ICd0b3AnID8gJzAnIDogJzEwMCUnKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIERyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvcGVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcblxuICAgICAgICAvLyBvbk9wZW5TdGFydCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzZXQgc3R5bGVzXG4gICAgICAgIHRoaXMuX3Jlc2V0RHJvcGRvd25TdHlsZXMoKTtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuXG4gICAgICAgIHRoaXMuX3BsYWNlRHJvcGRvd24oKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZUluKCk7XG4gICAgICAgIHRoaXMuX3NldHVwVGVtcG9yYXJ5RXZlbnRIYW5kbGVycygpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENsb3NlIERyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbG9zZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMuZm9jdXNlZEluZGV4ID0gLTE7XG5cbiAgICAgICAgLy8gb25DbG9zZVN0YXJ0IGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2FuaW1hdGVPdXQoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlVGVtcG9yYXJ5RXZlbnRIYW5kbGVycygpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgdGhpcy5lbC5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVjYWxjdWxhdGUgZGltZW5zaW9uc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVjYWxjdWxhdGVEaW1lbnNpb25zXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVjYWxjdWxhdGVEaW1lbnNpb25zKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICB0aGlzLiRkcm9wZG93bkVsLmNzcyh7XG4gICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICAgICAgbGVmdDogJycsXG4gICAgICAgICAgICB0b3A6ICcnLFxuICAgICAgICAgICAgJ3RyYW5zZm9ybS1vcmlnaW4nOiAnJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuX3BsYWNlRHJvcGRvd24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChEcm9wZG93bi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyb3Bkb3duKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fRHJvcGRvd247XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRHJvcGRvd247XG4gIH0oQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgRHJvcGRvd25cbiAgICovXG5cblxuICBEcm9wZG93bi5fZHJvcGRvd25zID0gW107XG5cbiAgTS5Ecm9wZG93biA9IERyb3Bkb3duO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoRHJvcGRvd24sICdkcm9wZG93bicsICdNX0Ryb3Bkb3duJyk7XG4gIH1cbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBvcGFjaXR5OiAwLjUsXG4gICAgaW5EdXJhdGlvbjogMjUwLFxuICAgIG91dER1cmF0aW9uOiAyNTAsXG4gICAgb25PcGVuU3RhcnQ6IG51bGwsXG4gICAgb25PcGVuRW5kOiBudWxsLFxuICAgIG9uQ2xvc2VTdGFydDogbnVsbCxcbiAgICBvbkNsb3NlRW5kOiBudWxsLFxuICAgIHByZXZlbnRTY3JvbGxpbmc6IHRydWUsXG4gICAgZGlzbWlzc2libGU6IHRydWUsXG4gICAgc3RhcnRpbmdUb3A6ICc0JScsXG4gICAgZW5kaW5nVG9wOiAnMTAlJ1xuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIE1vZGFsID0gZnVuY3Rpb24gKF9Db21wb25lbnQzKSB7XG4gICAgX2luaGVyaXRzKE1vZGFsLCBfQ29tcG9uZW50Myk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgTW9kYWwgaW5zdGFuY2UgYW5kIHNldCB1cCBvdmVybGF5XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gTW9kYWwoZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNb2RhbCk7XG5cbiAgICAgIHZhciBfdGhpczEzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1vZGFsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTW9kYWwpKS5jYWxsKHRoaXMsIE1vZGFsLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczEzLmVsLk1fTW9kYWwgPSBfdGhpczEzO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbFxuICAgICAgICogQG1lbWJlciBNb2RhbCNvcHRpb25zXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbb3BhY2l0eT0wLjVdIC0gT3BhY2l0eSBvZiB0aGUgbW9kYWwgb3ZlcmxheVxuICAgICAgICogQHByb3Age051bWJlcn0gW2luRHVyYXRpb249MjUwXSAtIExlbmd0aCBpbiBtcyBvZiBlbnRlciB0cmFuc2l0aW9uXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbb3V0RHVyYXRpb249MjUwXSAtIExlbmd0aCBpbiBtcyBvZiBleGl0IHRyYW5zaXRpb25cbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuU3RhcnQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYmVmb3JlIG1vZGFsIGlzIG9wZW5lZFxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5FbmQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgbW9kYWwgaXMgb3BlbmVkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VTdGFydCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgbW9kYWwgaXMgY2xvc2VkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VFbmQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgbW9kYWwgaXMgY2xvc2VkXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2Rpc21pc3NpYmxlPXRydWVdIC0gQWxsb3cgbW9kYWwgdG8gYmUgZGlzbWlzc2VkIGJ5IGtleWJvYXJkIG9yIG92ZXJsYXkgY2xpY2tcbiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IFtzdGFydGluZ1RvcD0nNCUnXSAtIHN0YXJ0aW5nVG9wXG4gICAgICAgKiBAcHJvcCB7U3RyaW5nfSBbZW5kaW5nVG9wPScxMCUnXSAtIGVuZGluZ1RvcFxuICAgICAgICovXG4gICAgICBfdGhpczEzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgTW9kYWwuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAvKipcbiAgICAgICAqIERlc2NyaWJlcyBvcGVuL2Nsb3NlIHN0YXRlIG9mIG1vZGFsXG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgX3RoaXMxMy5pc09wZW4gPSBmYWxzZTtcblxuICAgICAgX3RoaXMxMy5pZCA9IF90aGlzMTMuJGVsLmF0dHIoJ2lkJyk7XG4gICAgICBfdGhpczEzLl9vcGVuaW5nVHJpZ2dlciA9IHVuZGVmaW5lZDtcbiAgICAgIF90aGlzMTMuJG92ZXJsYXkgPSAkKCc8ZGl2IGNsYXNzPVwibW9kYWwtb3ZlcmxheVwiPjwvZGl2PicpO1xuICAgICAgX3RoaXMxMy5lbC50YWJJbmRleCA9IDA7XG4gICAgICBfdGhpczEzLl9udGhNb2RhbE9wZW5lZCA9IDA7XG5cbiAgICAgIE1vZGFsLl9jb3VudCsrO1xuICAgICAgX3RoaXMxMy5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICByZXR1cm4gX3RoaXMxMztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTW9kYWwsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBNb2RhbC5fY291bnQtLTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcbiAgICAgICAgdGhpcy4kb3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5lbC5NX01vZGFsID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlTW9kYWxDbG9zZUNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVNb2RhbENsb3NlQ2xpY2suYmluZCh0aGlzKTtcblxuICAgICAgICBpZiAoTW9kYWwuX2NvdW50ID09PSAxKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVRyaWdnZXJDbGljayk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy4kb3ZlcmxheVswXS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU92ZXJsYXlDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2VDbGlja0JvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGlmIChNb2RhbC5fY291bnQgPT09IDApIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVHJpZ2dlckNsaWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRvdmVybGF5WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTW9kYWxDbG9zZUNsaWNrQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBUcmlnZ2VyIENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlVHJpZ2dlckNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRyaWdnZXJDbGljayhlKSB7XG4gICAgICAgIHZhciAkdHJpZ2dlciA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5tb2RhbC10cmlnZ2VyJyk7XG4gICAgICAgIGlmICgkdHJpZ2dlci5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgbW9kYWxJZCA9IE0uZ2V0SWRGcm9tVHJpZ2dlcigkdHJpZ2dlclswXSk7XG4gICAgICAgICAgdmFyIG1vZGFsSW5zdGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChtb2RhbElkKS5NX01vZGFsO1xuICAgICAgICAgIGlmIChtb2RhbEluc3RhbmNlKSB7XG4gICAgICAgICAgICBtb2RhbEluc3RhbmNlLm9wZW4oJHRyaWdnZXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgT3ZlcmxheSBDbGlja1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU92ZXJsYXlDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVPdmVybGF5Q2xpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgTW9kYWwgQ2xvc2UgQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVNb2RhbENsb3NlQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTW9kYWxDbG9zZUNsaWNrKGUpIHtcbiAgICAgICAgdmFyICRjbG9zZVRyaWdnZXIgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcubW9kYWwtY2xvc2UnKTtcbiAgICAgICAgaWYgKCRjbG9zZVRyaWdnZXIubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIEtleWRvd25cbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVLZXlkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUtleWRvd24oZSkge1xuICAgICAgICAvLyBFU0Mga2V5XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDI3ICYmIHRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBGb2N1c1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUZvY3VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUZvY3VzKGUpIHtcbiAgICAgICAgLy8gT25seSB0cmFwIGZvY3VzIGlmIHRoaXMgbW9kYWwgaXMgdGhlIGxhc3QgbW9kZWwgb3BlbmVkIChwcmV2ZW50cyBsb29wcyBpbiBuZXN0ZWQgbW9kYWxzKS5cbiAgICAgICAgaWYgKCF0aGlzLmVsLmNvbnRhaW5zKGUudGFyZ2V0KSAmJiB0aGlzLl9udGhNb2RhbE9wZW5lZCA9PT0gTW9kYWwuX21vZGFsc09wZW4pIHtcbiAgICAgICAgICB0aGlzLmVsLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIGluIG1vZGFsXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUluXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbigpIHtcbiAgICAgICAgdmFyIF90aGlzMTQgPSB0aGlzO1xuXG4gICAgICAgIC8vIFNldCBpbml0aWFsIHN0eWxlc1xuICAgICAgICAkLmV4dGVuZCh0aGlzLmVsLnN0eWxlLCB7XG4gICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0pO1xuICAgICAgICAkLmV4dGVuZCh0aGlzLiRvdmVybGF5WzBdLnN0eWxlLCB7XG4gICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFuaW1hdGUgb3ZlcmxheVxuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRvdmVybGF5WzBdLFxuICAgICAgICAgIG9wYWNpdHk6IHRoaXMub3B0aW9ucy5vcGFjaXR5LFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRGVmaW5lIG1vZGFsIGFuaW1hdGlvbiBvcHRpb25zXG4gICAgICAgIHZhciBlbnRlckFuaW1PcHRpb25zID0ge1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXG4gICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIG9uT3BlbkVuZCBjYWxsYmFja1xuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTQub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMxNC5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKF90aGlzMTQsIF90aGlzMTQuZWwsIF90aGlzMTQuX29wZW5pbmdUcmlnZ2VyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQm90dG9tIHNoZWV0IGFuaW1hdGlvblxuICAgICAgICBpZiAodGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvdHRvbS1zaGVldCcpKSB7XG4gICAgICAgICAgJC5leHRlbmQoZW50ZXJBbmltT3B0aW9ucywge1xuICAgICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuaW0oZW50ZXJBbmltT3B0aW9ucyk7XG5cbiAgICAgICAgICAvLyBOb3JtYWwgbW9kYWwgYW5pbWF0aW9uXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJC5leHRlbmQoZW50ZXJBbmltT3B0aW9ucywge1xuICAgICAgICAgICAgdG9wOiBbdGhpcy5vcHRpb25zLnN0YXJ0aW5nVG9wLCB0aGlzLm9wdGlvbnMuZW5kaW5nVG9wXSxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBzY2FsZVg6IFswLjgsIDFdLFxuICAgICAgICAgICAgc2NhbGVZOiBbMC44LCAxXVxuICAgICAgICAgIH0pO1xuICAgICAgICAgIGFuaW0oZW50ZXJBbmltT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIG91dCBtb2RhbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVPdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU91dCgpIHtcbiAgICAgICAgdmFyIF90aGlzMTUgPSB0aGlzO1xuXG4gICAgICAgIC8vIEFuaW1hdGUgb3ZlcmxheVxuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRvdmVybGF5WzBdLFxuICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhcnQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIERlZmluZSBtb2RhbCBhbmltYXRpb24gb3B0aW9uc1xuICAgICAgICB2YXIgZXhpdEFuaW1PcHRpb25zID0ge1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnLFxuICAgICAgICAgIC8vIEhhbmRsZSBtb2RhbCByZWFkeSBjYWxsYmFja1xuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczE1LmVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICBfdGhpczE1LiRvdmVybGF5LnJlbW92ZSgpO1xuXG4gICAgICAgICAgICAvLyBDYWxsIG9uQ2xvc2VFbmQgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMxNS5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMxNS5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczE1LCBfdGhpczE1LmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQm90dG9tIHNoZWV0IGFuaW1hdGlvblxuICAgICAgICBpZiAodGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ2JvdHRvbS1zaGVldCcpKSB7XG4gICAgICAgICAgJC5leHRlbmQoZXhpdEFuaW1PcHRpb25zLCB7XG4gICAgICAgICAgICBib3R0b206ICctMTAwJScsXG4gICAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5pbShleGl0QW5pbU9wdGlvbnMpO1xuXG4gICAgICAgICAgLy8gTm9ybWFsIG1vZGFsIGFuaW1hdGlvblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQuZXh0ZW5kKGV4aXRBbmltT3B0aW9ucywge1xuICAgICAgICAgICAgdG9wOiBbdGhpcy5vcHRpb25zLmVuZGluZ1RvcCwgdGhpcy5vcHRpb25zLnN0YXJ0aW5nVG9wXSxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICBzY2FsZVg6IDAuOCxcbiAgICAgICAgICAgIHNjYWxlWTogMC44XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5pbShleGl0QW5pbU9wdGlvbnMpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT3BlbiBNb2RhbFxuICAgICAgICogQHBhcmFtIHtjYXNofSBbJHRyaWdnZXJdXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvcGVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigkdHJpZ2dlcikge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIE1vZGFsLl9tb2RhbHNPcGVuKys7XG4gICAgICAgIHRoaXMuX250aE1vZGFsT3BlbmVkID0gTW9kYWwuX21vZGFsc09wZW47XG5cbiAgICAgICAgLy8gU2V0IFotSW5kZXggYmFzZWQgb24gbnVtYmVyIG9mIGN1cnJlbnRseSBvcGVuIG1vZGFsc1xuICAgICAgICB0aGlzLiRvdmVybGF5WzBdLnN0eWxlLnpJbmRleCA9IDEwMDAgKyBNb2RhbC5fbW9kYWxzT3BlbiAqIDI7XG4gICAgICAgIHRoaXMuZWwuc3R5bGUuekluZGV4ID0gMTAwMCArIE1vZGFsLl9tb2RhbHNPcGVuICogMiArIDE7XG5cbiAgICAgICAgLy8gU2V0IG9wZW5pbmcgdHJpZ2dlciwgdW5kZWZpbmVkIGluZGljYXRlcyBtb2RhbCB3YXMgb3BlbmVkIGJ5IGphdmFzY3JpcHRcbiAgICAgICAgdGhpcy5fb3BlbmluZ1RyaWdnZXIgPSAhISR0cmlnZ2VyID8gJHRyaWdnZXJbMF0gOiB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gb25PcGVuU3RhcnQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsLCB0aGlzLl9vcGVuaW5nVHJpZ2dlcik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnByZXZlbnRTY3JvbGxpbmcpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcbiAgICAgICAgdGhpcy5lbC5pbnNlcnRBZGphY2VudEVsZW1lbnQoJ2FmdGVyZW5kJywgdGhpcy4kb3ZlcmxheVswXSk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSkge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUtleWRvd25Cb3VuZCA9IHRoaXMuX2hhbmRsZUtleWRvd24uYmluZCh0aGlzKTtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVGb2N1c0JvdW5kID0gdGhpcy5faGFuZGxlRm9jdXMuYmluZCh0aGlzKTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlS2V5ZG93bkJvdW5kKTtcbiAgICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5lbCk7XG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJG92ZXJsYXlbMF0pO1xuICAgICAgICB0aGlzLl9hbmltYXRlSW4oKTtcblxuICAgICAgICAvLyBGb2N1cyBtb2RhbFxuICAgICAgICB0aGlzLmVsLmZvY3VzKCk7XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2xvc2UgTW9kYWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICBNb2RhbC5fbW9kYWxzT3Blbi0tO1xuICAgICAgICB0aGlzLl9udGhNb2RhbE9wZW5lZCA9IDA7XG5cbiAgICAgICAgLy8gQ2FsbCBvbkNsb3NlU3RhcnQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG5cbiAgICAgICAgLy8gRW5hYmxlIGJvZHkgc2Nyb2xsaW5nIG9ubHkgaWYgdGhlcmUgYXJlIG5vIG1vcmUgbW9kYWxzIG9wZW4uXG4gICAgICAgIGlmIChNb2RhbC5fbW9kYWxzT3BlbiA9PT0gMCkge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZGlzbWlzc2libGUpIHtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlS2V5ZG93bkJvdW5kKTtcbiAgICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQsIHRydWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5lbCk7XG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJG92ZXJsYXlbMF0pO1xuICAgICAgICB0aGlzLl9hbmltYXRlT3V0KCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChNb2RhbC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1vZGFsKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fTW9kYWw7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTW9kYWw7XG4gIH0oQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgTW9kYWxcbiAgICovXG5cblxuICBNb2RhbC5fbW9kYWxzT3BlbiA9IDA7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIE1vZGFsXG4gICAqL1xuICBNb2RhbC5fY291bnQgPSAwO1xuXG4gIE0uTW9kYWwgPSBNb2RhbDtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKE1vZGFsLCAnbW9kYWwnLCAnTV9Nb2RhbCcpO1xuICB9XG59KShjYXNoLCBNLmFuaW1lKTtcbjsoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgaW5EdXJhdGlvbjogMjc1LFxuICAgIG91dER1cmF0aW9uOiAyMDAsXG4gICAgb25PcGVuU3RhcnQ6IG51bGwsXG4gICAgb25PcGVuRW5kOiBudWxsLFxuICAgIG9uQ2xvc2VTdGFydDogbnVsbCxcbiAgICBvbkNsb3NlRW5kOiBudWxsXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgTWF0ZXJpYWxib3ggPSBmdW5jdGlvbiAoX0NvbXBvbmVudDQpIHtcbiAgICBfaW5oZXJpdHMoTWF0ZXJpYWxib3gsIF9Db21wb25lbnQ0KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBNYXRlcmlhbGJveCBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIE1hdGVyaWFsYm94KGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTWF0ZXJpYWxib3gpO1xuXG4gICAgICB2YXIgX3RoaXMxNiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChNYXRlcmlhbGJveC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hdGVyaWFsYm94KSkuY2FsbCh0aGlzLCBNYXRlcmlhbGJveCwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXMxNi5lbC5NX01hdGVyaWFsYm94ID0gX3RoaXMxNjtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgbW9kYWxcbiAgICAgICAqIEBtZW1iZXIgTWF0ZXJpYWxib3gjb3B0aW9uc1xuICAgICAgICogQHByb3Age051bWJlcn0gW2luRHVyYXRpb249Mjc1XSAtIExlbmd0aCBpbiBtcyBvZiBlbnRlciB0cmFuc2l0aW9uXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbb3V0RHVyYXRpb249MjAwXSAtIExlbmd0aCBpbiBtcyBvZiBleGl0IHRyYW5zaXRpb25cbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuU3RhcnQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYmVmb3JlIG1hdGVyaWFsYm94IGlzIG9wZW5lZFxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5FbmQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgbWF0ZXJpYWxib3ggaXMgb3BlbmVkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VTdGFydCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgbWF0ZXJpYWxib3ggaXMgY2xvc2VkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VFbmQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYWZ0ZXIgbWF0ZXJpYWxib3ggaXMgY2xvc2VkXG4gICAgICAgKi9cbiAgICAgIF90aGlzMTYub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBNYXRlcmlhbGJveC5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzMTYub3ZlcmxheUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgX3RoaXMxNi5kb25lQW5pbWF0aW5nID0gdHJ1ZTtcbiAgICAgIF90aGlzMTYucGxhY2Vob2xkZXIgPSAkKCc8ZGl2PjwvZGl2PicpLmFkZENsYXNzKCdtYXRlcmlhbC1wbGFjZWhvbGRlcicpO1xuICAgICAgX3RoaXMxNi5vcmlnaW5hbFdpZHRoID0gMDtcbiAgICAgIF90aGlzMTYub3JpZ2luYWxIZWlnaHQgPSAwO1xuICAgICAgX3RoaXMxNi5vcmlnaW5JbmxpbmVTdHlsZXMgPSBfdGhpczE2LiRlbC5hdHRyKCdzdHlsZScpO1xuICAgICAgX3RoaXMxNi5jYXB0aW9uID0gX3RoaXMxNi5lbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtY2FwdGlvbicpIHx8ICcnO1xuXG4gICAgICAvLyBXcmFwXG4gICAgICBfdGhpczE2LiRlbC5iZWZvcmUoX3RoaXMxNi5wbGFjZWhvbGRlcik7XG4gICAgICBfdGhpczE2LnBsYWNlaG9sZGVyLmFwcGVuZChfdGhpczE2LiRlbCk7XG5cbiAgICAgIF90aGlzMTYuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzMTY7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKE1hdGVyaWFsYm94LCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLk1fTWF0ZXJpYWxib3ggPSB1bmRlZmluZWQ7XG5cbiAgICAgICAgLy8gVW53cmFwIGltYWdlXG4gICAgICAgICQodGhpcy5wbGFjZWhvbGRlcikuYWZ0ZXIodGhpcy5lbCkucmVtb3ZlKCk7XG5cbiAgICAgICAgdGhpcy4kZWwucmVtb3ZlQXR0cignc3R5bGUnKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZU1hdGVyaWFsYm94Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZU1hdGVyaWFsYm94Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU1hdGVyaWFsYm94Q2xpY2tCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTWF0ZXJpYWxib3hDbGlja0JvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgTWF0ZXJpYWxib3ggQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVNYXRlcmlhbGJveENsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1hdGVyaWFsYm94Q2xpY2soZSkge1xuICAgICAgICAvLyBJZiBhbHJlYWR5IG1vZGFsLCByZXR1cm4gdG8gb3JpZ2luYWxcbiAgICAgICAgaWYgKHRoaXMuZG9uZUFuaW1hdGluZyA9PT0gZmFsc2UgfHwgdGhpcy5vdmVybGF5QWN0aXZlICYmIHRoaXMuZG9uZUFuaW1hdGluZykge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBXaW5kb3cgU2Nyb2xsXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlV2luZG93U2Nyb2xsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVdpbmRvd1Njcm9sbCgpIHtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheUFjdGl2ZSkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBXaW5kb3cgUmVzaXplXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlV2luZG93UmVzaXplXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVdpbmRvd1Jlc2l6ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMub3ZlcmxheUFjdGl2ZSkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBXaW5kb3cgUmVzaXplXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlV2luZG93RXNjYXBlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVdpbmRvd0VzY2FwZShlKSB7XG4gICAgICAgIC8vIEVTQyBrZXlcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcgJiYgdGhpcy5kb25lQW5pbWF0aW5nICYmIHRoaXMub3ZlcmxheUFjdGl2ZSkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEZpbmQgYW5jZXN0b3JzIHdpdGggb3ZlcmZsb3c6IGhpZGRlbjsgYW5kIG1ha2UgdmlzaWJsZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX21ha2VBbmNlc3RvcnNPdmVyZmxvd1Zpc2libGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfbWFrZUFuY2VzdG9yc092ZXJmbG93VmlzaWJsZSgpIHtcbiAgICAgICAgdGhpcy5hbmNlc3RvcnNDaGFuZ2VkID0gJCgpO1xuICAgICAgICB2YXIgYW5jZXN0b3IgPSB0aGlzLnBsYWNlaG9sZGVyWzBdLnBhcmVudE5vZGU7XG4gICAgICAgIHdoaWxlIChhbmNlc3RvciAhPT0gbnVsbCAmJiAhJChhbmNlc3RvcikuaXMoZG9jdW1lbnQpKSB7XG4gICAgICAgICAgdmFyIGN1cnIgPSAkKGFuY2VzdG9yKTtcbiAgICAgICAgICBpZiAoY3Vyci5jc3MoJ292ZXJmbG93JykgIT09ICd2aXNpYmxlJykge1xuICAgICAgICAgICAgY3Vyci5jc3MoJ292ZXJmbG93JywgJ3Zpc2libGUnKTtcbiAgICAgICAgICAgIGlmICh0aGlzLmFuY2VzdG9yc0NoYW5nZWQgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICB0aGlzLmFuY2VzdG9yc0NoYW5nZWQgPSBjdXJyO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdGhpcy5hbmNlc3RvcnNDaGFuZ2VkID0gdGhpcy5hbmNlc3RvcnNDaGFuZ2VkLmFkZChjdXJyKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgYW5jZXN0b3IgPSBhbmNlc3Rvci5wYXJlbnROb2RlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQW5pbWF0ZSBpbWFnZSBpblxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVJbWFnZUluXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbWFnZUluKCkge1xuICAgICAgICB2YXIgX3RoaXMxNyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGFuaW1PcHRpb25zID0ge1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsXG4gICAgICAgICAgaGVpZ2h0OiBbdGhpcy5vcmlnaW5hbEhlaWdodCwgdGhpcy5uZXdIZWlnaHRdLFxuICAgICAgICAgIHdpZHRoOiBbdGhpcy5vcmlnaW5hbFdpZHRoLCB0aGlzLm5ld1dpZHRoXSxcbiAgICAgICAgICBsZWZ0OiBNLmdldERvY3VtZW50U2Nyb2xsTGVmdCgpICsgdGhpcy53aW5kb3dXaWR0aCAvIDIgLSB0aGlzLnBsYWNlaG9sZGVyLm9mZnNldCgpLmxlZnQgLSB0aGlzLm5ld1dpZHRoIC8gMixcbiAgICAgICAgICB0b3A6IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKSArIHRoaXMud2luZG93SGVpZ2h0IC8gMiAtIHRoaXMucGxhY2Vob2xkZXIub2Zmc2V0KCkudG9wIC0gdGhpcy5uZXdIZWlnaHQgLyAyLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzMTcuZG9uZUFuaW1hdGluZyA9IHRydWU7XG5cbiAgICAgICAgICAgIC8vIG9uT3BlbkVuZCBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczE3Lm9wdGlvbnMub25PcGVuRW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIF90aGlzMTcub3B0aW9ucy5vbk9wZW5FbmQuY2FsbChfdGhpczE3LCBfdGhpczE3LmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gT3ZlcnJpZGUgbWF4LXdpZHRoIG9yIG1heC1oZWlnaHQgaWYgbmVlZGVkXG4gICAgICAgIHRoaXMubWF4V2lkdGggPSB0aGlzLiRlbC5jc3MoJ21heC13aWR0aCcpO1xuICAgICAgICB0aGlzLm1heEhlaWdodCA9IHRoaXMuJGVsLmNzcygnbWF4LWhlaWdodCcpO1xuICAgICAgICBpZiAodGhpcy5tYXhXaWR0aCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgYW5pbU9wdGlvbnMubWF4V2lkdGggPSB0aGlzLm5ld1dpZHRoO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm1heEhlaWdodCAhPT0gJ25vbmUnKSB7XG4gICAgICAgICAgYW5pbU9wdGlvbnMubWF4SGVpZ2h0ID0gdGhpcy5uZXdIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICBhbmltKGFuaW1PcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIGltYWdlIG91dFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVJbWFnZU91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW1hZ2VPdXQoKSB7XG4gICAgICAgIHZhciBfdGhpczE4ID0gdGhpcztcblxuICAgICAgICB2YXIgYW5pbU9wdGlvbnMgPSB7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCxcbiAgICAgICAgICB3aWR0aDogdGhpcy5vcmlnaW5hbFdpZHRoLFxuICAgICAgICAgIGhlaWdodDogdGhpcy5vcmlnaW5hbEhlaWdodCxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMxOC5wbGFjZWhvbGRlci5jc3Moe1xuICAgICAgICAgICAgICBoZWlnaHQ6ICcnLFxuICAgICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICAgIHBvc2l0aW9uOiAnJyxcbiAgICAgICAgICAgICAgdG9wOiAnJyxcbiAgICAgICAgICAgICAgbGVmdDogJydcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBSZXZlcnQgdG8gd2lkdGggb3IgaGVpZ2h0IGF0dHJpYnV0ZVxuICAgICAgICAgICAgaWYgKF90aGlzMTguYXR0cldpZHRoKSB7XG4gICAgICAgICAgICAgIF90aGlzMTguJGVsLmF0dHIoJ3dpZHRoJywgX3RoaXMxOC5hdHRyV2lkdGgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKF90aGlzMTguYXR0ckhlaWdodCkge1xuICAgICAgICAgICAgICBfdGhpczE4LiRlbC5hdHRyKCdoZWlnaHQnLCBfdGhpczE4LmF0dHJIZWlnaHQpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBfdGhpczE4LiRlbC5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgX3RoaXMxOC5vcmlnaW5JbmxpbmVTdHlsZXMgJiYgX3RoaXMxOC4kZWwuYXR0cignc3R5bGUnLCBfdGhpczE4Lm9yaWdpbklubGluZVN0eWxlcyk7XG5cbiAgICAgICAgICAgIC8vIFJlbW92ZSBjbGFzc1xuICAgICAgICAgICAgX3RoaXMxOC4kZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgX3RoaXMxOC5kb25lQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIG92ZXJmbG93IG92ZXJyaWRlcyBvbiBhbmNlc3RvcnNcbiAgICAgICAgICAgIGlmIChfdGhpczE4LmFuY2VzdG9yc0NoYW5nZWQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIF90aGlzMTguYW5jZXN0b3JzQ2hhbmdlZC5jc3MoJ292ZXJmbG93JywgJycpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBvbkNsb3NlRW5kIGNhbGxiYWNrXG4gICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTgub3B0aW9ucy5vbkNsb3NlRW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIF90aGlzMTgub3B0aW9ucy5vbkNsb3NlRW5kLmNhbGwoX3RoaXMxOCwgX3RoaXMxOC5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIGFuaW0oYW5pbU9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZSBvcGVuIGFuZCBjbG9zZSB2YXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdXBkYXRlVmFyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVWYXJzKCkge1xuICAgICAgICB0aGlzLndpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHRoaXMud2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB0aGlzLmNhcHRpb24gPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jYXB0aW9uJykgfHwgJyc7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT3BlbiBNYXRlcmlhbGJveFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib3BlblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIHZhciBfdGhpczE5ID0gdGhpcztcblxuICAgICAgICB0aGlzLl91cGRhdGVWYXJzKCk7XG4gICAgICAgIHRoaXMub3JpZ2luYWxXaWR0aCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIHRoaXMub3JpZ2luYWxIZWlnaHQgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmhlaWdodDtcblxuICAgICAgICAvLyBTZXQgc3RhdGVzXG4gICAgICAgIHRoaXMuZG9uZUFuaW1hdGluZyA9IGZhbHNlO1xuICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHRoaXMub3ZlcmxheUFjdGl2ZSA9IHRydWU7XG5cbiAgICAgICAgLy8gb25PcGVuU3RhcnQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBwb3NpdGlvbmluZyBmb3IgcGxhY2Vob2xkZXJcbiAgICAgICAgdGhpcy5wbGFjZWhvbGRlci5jc3Moe1xuICAgICAgICAgIHdpZHRoOiB0aGlzLnBsYWNlaG9sZGVyWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoICsgJ3B4JyxcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMucGxhY2Vob2xkZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICBwb3NpdGlvbjogJ3JlbGF0aXZlJyxcbiAgICAgICAgICB0b3A6IDAsXG4gICAgICAgICAgbGVmdDogMFxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLl9tYWtlQW5jZXN0b3JzT3ZlcmZsb3dWaXNpYmxlKCk7XG5cbiAgICAgICAgLy8gU2V0IGNzcyBvbiBvcmlnaW5cbiAgICAgICAgdGhpcy4kZWwuY3NzKHtcbiAgICAgICAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICAgICAgICAnei1pbmRleCc6IDEwMDAsXG4gICAgICAgICAgJ3dpbGwtY2hhbmdlJzogJ2xlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQ2hhbmdlIGZyb20gd2lkdGggb3IgaGVpZ2h0IGF0dHJpYnV0ZSB0byBjc3NcbiAgICAgICAgdGhpcy5hdHRyV2lkdGggPSB0aGlzLiRlbC5hdHRyKCd3aWR0aCcpO1xuICAgICAgICB0aGlzLmF0dHJIZWlnaHQgPSB0aGlzLiRlbC5hdHRyKCdoZWlnaHQnKTtcbiAgICAgICAgaWYgKHRoaXMuYXR0cldpZHRoKSB7XG4gICAgICAgICAgdGhpcy4kZWwuY3NzKCd3aWR0aCcsIHRoaXMuYXR0cldpZHRoICsgJ3B4Jyk7XG4gICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQXR0cignd2lkdGgnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5hdHRySGVpZ2h0KSB7XG4gICAgICAgICAgdGhpcy4kZWwuY3NzKCd3aWR0aCcsIHRoaXMuYXR0ckhlaWdodCArICdweCcpO1xuICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZUF0dHIoJ2hlaWdodCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIG92ZXJsYXlcbiAgICAgICAgdGhpcy4kb3ZlcmxheSA9ICQoJzxkaXYgaWQ9XCJtYXRlcmlhbGJveC1vdmVybGF5XCI+PC9kaXY+JykuY3NzKHtcbiAgICAgICAgICBvcGFjaXR5OiAwXG4gICAgICAgIH0pLm9uZSgnY2xpY2snLCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzMTkuZG9uZUFuaW1hdGluZykge1xuICAgICAgICAgICAgX3RoaXMxOS5jbG9zZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUHV0IGJlZm9yZSBpbiBvcmlnaW4gaW1hZ2UgdG8gcHJlc2VydmUgei1pbmRleCBsYXllcmluZy5cbiAgICAgICAgdGhpcy4kZWwuYmVmb3JlKHRoaXMuJG92ZXJsYXkpO1xuXG4gICAgICAgIC8vIFNldCBkaW1lbnNpb25zIGlmIG5lZWRlZFxuICAgICAgICB2YXIgb3ZlcmxheU9mZnNldCA9IHRoaXMuJG92ZXJsYXlbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHRoaXMuJG92ZXJsYXkuY3NzKHtcbiAgICAgICAgICB3aWR0aDogdGhpcy53aW5kb3dXaWR0aCArICdweCcsXG4gICAgICAgICAgaGVpZ2h0OiB0aGlzLndpbmRvd0hlaWdodCArICdweCcsXG4gICAgICAgICAgbGVmdDogLTEgKiBvdmVybGF5T2Zmc2V0LmxlZnQgKyAncHgnLFxuICAgICAgICAgIHRvcDogLTEgKiBvdmVybGF5T2Zmc2V0LnRvcCArICdweCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5lbCk7XG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJG92ZXJsYXlbMF0pO1xuXG4gICAgICAgIC8vIEFuaW1hdGUgT3ZlcmxheVxuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRvdmVybGF5WzBdLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBBZGQgYW5kIGFuaW1hdGUgY2FwdGlvbiBpZiBpdCBleGlzdHNcbiAgICAgICAgaWYgKHRoaXMuY2FwdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICBpZiAodGhpcy4kcGhvdG9jYXB0aW9uKSB7XG4gICAgICAgICAgICBhbmltLnJlbW92ZSh0aGlzLiRwaG90b0NhcHRpb25bMF0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLiRwaG90b0NhcHRpb24gPSAkKCc8ZGl2IGNsYXNzPVwibWF0ZXJpYWxib3gtY2FwdGlvblwiPjwvZGl2PicpO1xuICAgICAgICAgIHRoaXMuJHBob3RvQ2FwdGlvbi50ZXh0KHRoaXMuY2FwdGlvbik7XG4gICAgICAgICAgJCgnYm9keScpLmFwcGVuZCh0aGlzLiRwaG90b0NhcHRpb24pO1xuICAgICAgICAgIHRoaXMuJHBob3RvQ2FwdGlvbi5jc3MoeyBkaXNwbGF5OiAnaW5saW5lJyB9KTtcblxuICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy4kcGhvdG9DYXB0aW9uWzBdLFxuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzaXplIEltYWdlXG4gICAgICAgIHZhciByYXRpbyA9IDA7XG4gICAgICAgIHZhciB3aWR0aFBlcmNlbnQgPSB0aGlzLm9yaWdpbmFsV2lkdGggLyB0aGlzLndpbmRvd1dpZHRoO1xuICAgICAgICB2YXIgaGVpZ2h0UGVyY2VudCA9IHRoaXMub3JpZ2luYWxIZWlnaHQgLyB0aGlzLndpbmRvd0hlaWdodDtcbiAgICAgICAgdGhpcy5uZXdXaWR0aCA9IDA7XG4gICAgICAgIHRoaXMubmV3SGVpZ2h0ID0gMDtcblxuICAgICAgICBpZiAod2lkdGhQZXJjZW50ID4gaGVpZ2h0UGVyY2VudCkge1xuICAgICAgICAgIHJhdGlvID0gdGhpcy5vcmlnaW5hbEhlaWdodCAvIHRoaXMub3JpZ2luYWxXaWR0aDtcbiAgICAgICAgICB0aGlzLm5ld1dpZHRoID0gdGhpcy53aW5kb3dXaWR0aCAqIDAuOTtcbiAgICAgICAgICB0aGlzLm5ld0hlaWdodCA9IHRoaXMud2luZG93V2lkdGggKiAwLjkgKiByYXRpbztcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByYXRpbyA9IHRoaXMub3JpZ2luYWxXaWR0aCAvIHRoaXMub3JpZ2luYWxIZWlnaHQ7XG4gICAgICAgICAgdGhpcy5uZXdXaWR0aCA9IHRoaXMud2luZG93SGVpZ2h0ICogMC45ICogcmF0aW87XG4gICAgICAgICAgdGhpcy5uZXdIZWlnaHQgPSB0aGlzLndpbmRvd0hlaWdodCAqIDAuOTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2FuaW1hdGVJbWFnZUluKCk7XG5cbiAgICAgICAgLy8gSGFuZGxlIEV4aXQgdHJpZ2dlcnNcbiAgICAgICAgdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsQm91bmQgPSB0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlV2luZG93UmVzaXplQm91bmQgPSB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlV2luZG93RXNjYXBlQm91bmQgPSB0aGlzLl9oYW5kbGVXaW5kb3dFc2NhcGUuYmluZCh0aGlzKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsQm91bmQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlV2luZG93UmVzaXplQm91bmQpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVXaW5kb3dFc2NhcGVCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2xvc2UgTWF0ZXJpYWxib3hcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHZhciBfdGhpczIwID0gdGhpcztcblxuICAgICAgICB0aGlzLl91cGRhdGVWYXJzKCk7XG4gICAgICAgIHRoaXMuZG9uZUFuaW1hdGluZyA9IGZhbHNlO1xuXG4gICAgICAgIC8vIG9uQ2xvc2VTdGFydCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0LmNhbGwodGhpcywgdGhpcy5lbCk7XG4gICAgICAgIH1cblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy4kb3ZlcmxheVswXSk7XG5cbiAgICAgICAgaWYgKHRoaXMuY2FwdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICBhbmltLnJlbW92ZSh0aGlzLiRwaG90b0NhcHRpb25bMF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gZGlzYWJsZSBleGl0IGhhbmRsZXJzXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGxCb3VuZCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZVdpbmRvd0VzY2FwZUJvdW5kKTtcblxuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRvdmVybGF5WzBdLFxuICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzMjAub3ZlcmxheUFjdGl2ZSA9IGZhbHNlO1xuICAgICAgICAgICAgX3RoaXMyMC4kb3ZlcmxheS5yZW1vdmUoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX2FuaW1hdGVJbWFnZU91dCgpO1xuXG4gICAgICAgIC8vIFJlbW92ZSBDYXB0aW9uICsgcmVzZXQgY3NzIHNldHRpbmdzIG9uIGltYWdlXG4gICAgICAgIGlmICh0aGlzLmNhcHRpb24gIT09ICcnKSB7XG4gICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRwaG90b0NhcHRpb25bMF0sXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzMjAuJHBob3RvQ2FwdGlvbi5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChNYXRlcmlhbGJveC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKE1hdGVyaWFsYm94KSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fTWF0ZXJpYWxib3g7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gTWF0ZXJpYWxib3g7XG4gIH0oQ29tcG9uZW50KTtcblxuICBNLk1hdGVyaWFsYm94ID0gTWF0ZXJpYWxib3g7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihNYXRlcmlhbGJveCwgJ21hdGVyaWFsYm94JywgJ01fTWF0ZXJpYWxib3gnKTtcbiAgfVxufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIHJlc3BvbnNpdmVUaHJlc2hvbGQ6IDAgLy8gYnJlYWtwb2ludCBmb3Igc3dpcGVhYmxlXG4gIH07XG5cbiAgdmFyIFBhcmFsbGF4ID0gZnVuY3Rpb24gKF9Db21wb25lbnQ1KSB7XG4gICAgX2luaGVyaXRzKFBhcmFsbGF4LCBfQ29tcG9uZW50NSk7XG5cbiAgICBmdW5jdGlvbiBQYXJhbGxheChlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBhcmFsbGF4KTtcblxuICAgICAgdmFyIF90aGlzMjEgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUGFyYWxsYXguX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQYXJhbGxheCkpLmNhbGwodGhpcywgUGFyYWxsYXgsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzMjEuZWwuTV9QYXJhbGxheCA9IF90aGlzMjE7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIFBhcmFsbGF4XG4gICAgICAgKiBAbWVtYmVyIFBhcmFsbGF4I29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IHJlc3BvbnNpdmVUaHJlc2hvbGRcbiAgICAgICAqL1xuICAgICAgX3RoaXMyMS5vcHRpb25zID0gJC5leHRlbmQoe30sIFBhcmFsbGF4LmRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICAgIF90aGlzMjEuX2VuYWJsZWQgPSB3aW5kb3cuaW5uZXJXaWR0aCA+IF90aGlzMjEub3B0aW9ucy5yZXNwb25zaXZlVGhyZXNob2xkO1xuXG4gICAgICBfdGhpczIxLiRpbWcgPSBfdGhpczIxLiRlbC5maW5kKCdpbWcnKS5maXJzdCgpO1xuICAgICAgX3RoaXMyMS4kaW1nLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgZWwgPSB0aGlzO1xuICAgICAgICBpZiAoZWwuY29tcGxldGUpICQoZWwpLnRyaWdnZXIoJ2xvYWQnKTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczIxLl91cGRhdGVQYXJhbGxheCgpO1xuICAgICAgX3RoaXMyMS5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICBfdGhpczIxLl9zZXR1cFN0eWxlcygpO1xuXG4gICAgICBQYXJhbGxheC5fcGFyYWxsYXhlcy5wdXNoKF90aGlzMjEpO1xuICAgICAgcmV0dXJuIF90aGlzMjE7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFBhcmFsbGF4LCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgUGFyYWxsYXguX3BhcmFsbGF4ZXMuc3BsaWNlKFBhcmFsbGF4Ll9wYXJhbGxheGVzLmluZGV4T2YodGhpcyksIDEpO1xuICAgICAgICB0aGlzLiRpbWdbMF0uc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcblxuICAgICAgICB0aGlzLiRlbFswXS5NX1BhcmFsbGF4ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VMb2FkQm91bmQgPSB0aGlzLl9oYW5kbGVJbWFnZUxvYWQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy4kaW1nWzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2xvYWQnLCB0aGlzLl9oYW5kbGVJbWFnZUxvYWRCb3VuZCk7XG5cbiAgICAgICAgaWYgKFBhcmFsbGF4Ll9wYXJhbGxheGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIFBhcmFsbGF4Ll9oYW5kbGVTY3JvbGxUaHJvdHRsZWQgPSBNLnRocm90dGxlKFBhcmFsbGF4Ll9oYW5kbGVTY3JvbGwsIDUpO1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBQYXJhbGxheC5faGFuZGxlU2Nyb2xsVGhyb3R0bGVkKTtcblxuICAgICAgICAgIFBhcmFsbGF4Ll9oYW5kbGVXaW5kb3dSZXNpemVUaHJvdHRsZWQgPSBNLnRocm90dGxlKFBhcmFsbGF4Ll9oYW5kbGVXaW5kb3dSZXNpemUsIDUpO1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBQYXJhbGxheC5faGFuZGxlV2luZG93UmVzaXplVGhyb3R0bGVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLiRpbWdbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX2hhbmRsZUltYWdlTG9hZEJvdW5kKTtcblxuICAgICAgICBpZiAoUGFyYWxsYXguX3BhcmFsbGF4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIFBhcmFsbGF4Ll9oYW5kbGVTY3JvbGxUaHJvdHRsZWQpO1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCBQYXJhbGxheC5faGFuZGxlV2luZG93UmVzaXplVGhyb3R0bGVkKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBTdHlsZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBTdHlsZXMoKSB7XG4gICAgICAgIHRoaXMuJGltZ1swXS5zdHlsZS5vcGFjaXR5ID0gMTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUltYWdlTG9hZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbWFnZUxvYWQoKSB7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVBhcmFsbGF4KCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl91cGRhdGVQYXJhbGxheFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVQYXJhbGxheCgpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lckhlaWdodCA9IHRoaXMuJGVsLmhlaWdodCgpID4gMCA/IHRoaXMuZWwucGFyZW50Tm9kZS5vZmZzZXRIZWlnaHQgOiA1MDA7XG4gICAgICAgIHZhciBpbWdIZWlnaHQgPSB0aGlzLiRpbWdbMF0ub2Zmc2V0SGVpZ2h0O1xuICAgICAgICB2YXIgcGFyYWxsYXhEaXN0ID0gaW1nSGVpZ2h0IC0gY29udGFpbmVySGVpZ2h0O1xuICAgICAgICB2YXIgYm90dG9tID0gdGhpcy4kZWwub2Zmc2V0KCkudG9wICsgY29udGFpbmVySGVpZ2h0O1xuICAgICAgICB2YXIgdG9wID0gdGhpcy4kZWwub2Zmc2V0KCkudG9wO1xuICAgICAgICB2YXIgc2Nyb2xsVG9wID0gTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpO1xuICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB2YXIgd2luZG93Qm90dG9tID0gc2Nyb2xsVG9wICsgd2luZG93SGVpZ2h0O1xuICAgICAgICB2YXIgcGVyY2VudFNjcm9sbGVkID0gKHdpbmRvd0JvdHRvbSAtIHRvcCkgLyAoY29udGFpbmVySGVpZ2h0ICsgd2luZG93SGVpZ2h0KTtcbiAgICAgICAgdmFyIHBhcmFsbGF4ID0gcGFyYWxsYXhEaXN0ICogcGVyY2VudFNjcm9sbGVkO1xuXG4gICAgICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgICAgIHRoaXMuJGltZ1swXS5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgfSBlbHNlIGlmIChib3R0b20gPiBzY3JvbGxUb3AgJiYgdG9wIDwgc2Nyb2xsVG9wICsgd2luZG93SGVpZ2h0KSB7XG4gICAgICAgICAgdGhpcy4kaW1nWzBdLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlM0QoLTUwJSwgXCIgKyBwYXJhbGxheCArIFwicHgsIDApXCI7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoUGFyYWxsYXguX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihQYXJhbGxheCksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1BhcmFsbGF4O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlU2Nyb2xsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVNjcm9sbCgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQYXJhbGxheC5fcGFyYWxsYXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBwYXJhbGxheEluc3RhbmNlID0gUGFyYWxsYXguX3BhcmFsbGF4ZXNbaV07XG4gICAgICAgICAgcGFyYWxsYXhJbnN0YW5jZS5fdXBkYXRlUGFyYWxsYXguY2FsbChwYXJhbGxheEluc3RhbmNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlV2luZG93UmVzaXplXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVdpbmRvd1Jlc2l6ZSgpIHtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBQYXJhbGxheC5fcGFyYWxsYXhlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBwYXJhbGxheEluc3RhbmNlID0gUGFyYWxsYXguX3BhcmFsbGF4ZXNbaV07XG4gICAgICAgICAgcGFyYWxsYXhJbnN0YW5jZS5fZW5hYmxlZCA9IHdpbmRvdy5pbm5lcldpZHRoID4gcGFyYWxsYXhJbnN0YW5jZS5vcHRpb25zLnJlc3BvbnNpdmVUaHJlc2hvbGQ7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBQYXJhbGxheDtcbiAgfShDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBQYXJhbGxheFxuICAgKi9cblxuXG4gIFBhcmFsbGF4Ll9wYXJhbGxheGVzID0gW107XG5cbiAgTS5QYXJhbGxheCA9IFBhcmFsbGF4O1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoUGFyYWxsYXgsICdwYXJhbGxheCcsICdNX1BhcmFsbGF4Jyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBkdXJhdGlvbjogMzAwLFxuICAgIG9uU2hvdzogbnVsbCxcbiAgICBzd2lwZWFibGU6IGZhbHNlLFxuICAgIHJlc3BvbnNpdmVUaHJlc2hvbGQ6IEluZmluaXR5IC8vIGJyZWFrcG9pbnQgZm9yIHN3aXBlYWJsZVxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIFRhYnMgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDYpIHtcbiAgICBfaW5oZXJpdHMoVGFicywgX0NvbXBvbmVudDYpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IFRhYnMgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUYWJzKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFicyk7XG5cbiAgICAgIHZhciBfdGhpczIyID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFRhYnMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUYWJzKSkuY2FsbCh0aGlzLCBUYWJzLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczIyLmVsLk1fVGFicyA9IF90aGlzMjI7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIFRhYnNcbiAgICAgICAqIEBtZW1iZXIgVGFicyNvcHRpb25zXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBkdXJhdGlvblxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvblNob3dcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBzd2lwZWFibGVcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IHJlc3BvbnNpdmVUaHJlc2hvbGRcbiAgICAgICAqL1xuICAgICAgX3RoaXMyMi5vcHRpb25zID0gJC5leHRlbmQoe30sIFRhYnMuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBTZXR1cFxuICAgICAgX3RoaXMyMi4kdGFiTGlua3MgPSBfdGhpczIyLiRlbC5jaGlsZHJlbignbGkudGFiJykuY2hpbGRyZW4oJ2EnKTtcbiAgICAgIF90aGlzMjIuaW5kZXggPSAwO1xuICAgICAgX3RoaXMyMi5fc2V0dXBBY3RpdmVUYWJMaW5rKCk7XG5cbiAgICAgIC8vIFNldHVwIHRhYnMgY29udGVudFxuICAgICAgaWYgKF90aGlzMjIub3B0aW9ucy5zd2lwZWFibGUpIHtcbiAgICAgICAgX3RoaXMyMi5fc2V0dXBTd2lwZWFibGVUYWJzKCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpczIyLl9zZXR1cE5vcm1hbFRhYnMoKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgdGFicyBpbmRpY2F0b3IgYWZ0ZXIgY29udGVudCB0byBlbnN1cmUgYWNjdXJhdGUgd2lkdGhzXG4gICAgICBfdGhpczIyLl9zZXRUYWJzQW5kVGFiV2lkdGgoKTtcbiAgICAgIF90aGlzMjIuX2NyZWF0ZUluZGljYXRvcigpO1xuXG4gICAgICBfdGhpczIyLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczIyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhUYWJzLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLl9pbmRpY2F0b3IucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLl9pbmRpY2F0b3IpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3dpcGVhYmxlKSB7XG4gICAgICAgICAgdGhpcy5fdGVhcmRvd25Td2lwZWFibGVUYWJzKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fdGVhcmRvd25Ob3JtYWxUYWJzKCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRlbFswXS5NX1RhYnMgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCA9IHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlV2luZG93UmVzaXplQm91bmQpO1xuXG4gICAgICAgIHRoaXMuX2hhbmRsZVRhYkNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVUYWJDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVGFiQ2xpY2tCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlV2luZG93UmVzaXplQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVGFiQ2xpY2tCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIHdpbmRvdyBSZXNpemVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgICAgICB0aGlzLl9zZXRUYWJzQW5kVGFiV2lkdGgoKTtcblxuICAgICAgICBpZiAodGhpcy50YWJXaWR0aCAhPT0gMCAmJiB0aGlzLnRhYnNXaWR0aCAhPT0gMCkge1xuICAgICAgICAgIHRoaXMuX2luZGljYXRvci5zdHlsZS5sZWZ0ID0gdGhpcy5fY2FsY0xlZnRQb3ModGhpcy4kYWN0aXZlVGFiTGluaykgKyAncHgnO1xuICAgICAgICAgIHRoaXMuX2luZGljYXRvci5zdHlsZS5yaWdodCA9IHRoaXMuX2NhbGNSaWdodFBvcyh0aGlzLiRhY3RpdmVUYWJMaW5rKSArICdweCc7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgdGFiIGNsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlVGFiQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlVGFiQ2xpY2soZSkge1xuICAgICAgICB2YXIgX3RoaXMyMyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHRhYiA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpLnRhYicpO1xuICAgICAgICB2YXIgdGFiTGluayA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2EnKTtcblxuICAgICAgICAvLyBIYW5kbGUgY2xpY2sgb24gdGFiIGxpbmsgb25seVxuICAgICAgICBpZiAoIXRhYkxpbmsubGVuZ3RoIHx8ICF0YWJMaW5rLnBhcmVudCgpLmhhc0NsYXNzKCd0YWInKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0YWIuaGFzQ2xhc3MoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWN0IGFzIHJlZ3VsYXIgbGluayBpZiB0YXJnZXQgYXR0cmlidXRlIGlzIHNwZWNpZmllZC5cbiAgICAgICAgaWYgKCEhdGFiTGluay5hdHRyKCd0YXJnZXQnKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE1ha2UgdGhlIG9sZCB0YWIgaW5hY3RpdmUuXG4gICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmsucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB2YXIgJG9sZENvbnRlbnQgPSB0aGlzLiRjb250ZW50O1xuXG4gICAgICAgIC8vIFVwZGF0ZSB0aGUgdmFyaWFibGVzIHdpdGggdGhlIG5ldyBsaW5rIGFuZCBjb250ZW50XG4gICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmsgPSB0YWJMaW5rO1xuICAgICAgICB0aGlzLiRjb250ZW50ID0gJChNLmVzY2FwZUhhc2godGFiTGlua1swXS5oYXNoKSk7XG4gICAgICAgIHRoaXMuJHRhYkxpbmtzID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpLnRhYicpLmNoaWxkcmVuKCdhJyk7XG5cbiAgICAgICAgLy8gTWFrZSB0aGUgdGFiIGFjdGl2ZS5cbiAgICAgICAgdGhpcy4kYWN0aXZlVGFiTGluay5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHZhciBwcmV2SW5kZXggPSB0aGlzLmluZGV4O1xuICAgICAgICB0aGlzLmluZGV4ID0gTWF0aC5tYXgodGhpcy4kdGFiTGlua3MuaW5kZXgodGFiTGluayksIDApO1xuXG4gICAgICAgIC8vIFN3YXAgY29udGVudFxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnN3aXBlYWJsZSkge1xuICAgICAgICAgIGlmICh0aGlzLl90YWJzQ2Fyb3VzZWwpIHtcbiAgICAgICAgICAgIHRoaXMuX3RhYnNDYXJvdXNlbC5zZXQodGhpcy5pbmRleCwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMjMub3B0aW9ucy5vblNob3cgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBfdGhpczIzLm9wdGlvbnMub25TaG93LmNhbGwoX3RoaXMyMywgX3RoaXMyMy4kY29udGVudFswXSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAodGhpcy4kY29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnRbMF0uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgICAgICB0aGlzLiRjb250ZW50LmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICB0aGlzLm9wdGlvbnMub25TaG93LmNhbGwodGhpcywgdGhpcy4kY29udGVudFswXSk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICgkb2xkQ29udGVudC5sZW5ndGggJiYgISRvbGRDb250ZW50LmlzKHRoaXMuJGNvbnRlbnQpKSB7XG4gICAgICAgICAgICAgICRvbGRDb250ZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICAgICRvbGRDb250ZW50LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgd2lkdGhzIGFmdGVyIGNvbnRlbnQgaXMgc3dhcHBlZCAoc2Nyb2xsYmFyIGJ1Z2ZpeClcbiAgICAgICAgdGhpcy5fc2V0VGFic0FuZFRhYldpZHRoKCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvclxuICAgICAgICB0aGlzLl9hbmltYXRlSW5kaWNhdG9yKHByZXZJbmRleCk7XG5cbiAgICAgICAgLy8gUHJldmVudCB0aGUgYW5jaG9yJ3MgZGVmYXVsdCBjbGljayBhY3Rpb25cbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdlbmVyYXRlIGVsZW1lbnRzIGZvciB0YWIgaW5kaWNhdG9yLlxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2NyZWF0ZUluZGljYXRvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVJbmRpY2F0b3IoKSB7XG4gICAgICAgIHZhciBfdGhpczI0ID0gdGhpcztcblxuICAgICAgICB2YXIgaW5kaWNhdG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGknKTtcbiAgICAgICAgaW5kaWNhdG9yLmNsYXNzTGlzdC5hZGQoJ2luZGljYXRvcicpO1xuXG4gICAgICAgIHRoaXMuZWwuYXBwZW5kQ2hpbGQoaW5kaWNhdG9yKTtcbiAgICAgICAgdGhpcy5faW5kaWNhdG9yID0gaW5kaWNhdG9yO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzMjQuX2luZGljYXRvci5zdHlsZS5sZWZ0ID0gX3RoaXMyNC5fY2FsY0xlZnRQb3MoX3RoaXMyNC4kYWN0aXZlVGFiTGluaykgKyAncHgnO1xuICAgICAgICAgIF90aGlzMjQuX2luZGljYXRvci5zdHlsZS5yaWdodCA9IF90aGlzMjQuX2NhbGNSaWdodFBvcyhfdGhpczI0LiRhY3RpdmVUYWJMaW5rKSArICdweCc7XG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGZpcnN0IGFjdGl2ZSB0YWIgbGluay5cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEFjdGl2ZVRhYkxpbmtcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBBY3RpdmVUYWJMaW5rKCkge1xuICAgICAgICAvLyBJZiB0aGUgbG9jYXRpb24uaGFzaCBtYXRjaGVzIG9uZSBvZiB0aGUgbGlua3MsIHVzZSB0aGF0IGFzIHRoZSBhY3RpdmUgdGFiLlxuICAgICAgICB0aGlzLiRhY3RpdmVUYWJMaW5rID0gJCh0aGlzLiR0YWJMaW5rcy5maWx0ZXIoJ1tocmVmPVwiJyArIGxvY2F0aW9uLmhhc2ggKyAnXCJdJykpO1xuXG4gICAgICAgIC8vIElmIG5vIG1hdGNoIGlzIGZvdW5kLCB1c2UgdGhlIGZpcnN0IGxpbmsgb3IgYW55IHdpdGggY2xhc3MgJ2FjdGl2ZScgYXMgdGhlIGluaXRpYWwgYWN0aXZlIHRhYi5cbiAgICAgICAgaWYgKHRoaXMuJGFjdGl2ZVRhYkxpbmsubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy4kYWN0aXZlVGFiTGluayA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaS50YWInKS5jaGlsZHJlbignYS5hY3RpdmUnKS5maXJzdCgpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLiRhY3RpdmVUYWJMaW5rLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmsgPSB0aGlzLiRlbC5jaGlsZHJlbignbGkudGFiJykuY2hpbGRyZW4oJ2EnKS5maXJzdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kdGFiTGlua3MucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB0aGlzLiRhY3RpdmVUYWJMaW5rWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuXG4gICAgICAgIHRoaXMuaW5kZXggPSBNYXRoLm1heCh0aGlzLiR0YWJMaW5rcy5pbmRleCh0aGlzLiRhY3RpdmVUYWJMaW5rKSwgMCk7XG5cbiAgICAgICAgaWYgKHRoaXMuJGFjdGl2ZVRhYkxpbmsubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy4kY29udGVudCA9ICQoTS5lc2NhcGVIYXNoKHRoaXMuJGFjdGl2ZVRhYkxpbmtbMF0uaGFzaCkpO1xuICAgICAgICAgIHRoaXMuJGNvbnRlbnQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgc3dpcGVhYmxlIHRhYnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cFN3aXBlYWJsZVRhYnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBTd2lwZWFibGVUYWJzKCkge1xuICAgICAgICB2YXIgX3RoaXMyNSA9IHRoaXM7XG5cbiAgICAgICAgLy8gQ2hhbmdlIHN3aXBlYWJsZSBhY2NvcmRpbmcgdG8gcmVzcG9uc2l2ZSB0aHJlc2hvbGRcbiAgICAgICAgaWYgKHdpbmRvdy5pbm5lcldpZHRoID4gdGhpcy5vcHRpb25zLnJlc3BvbnNpdmVUaHJlc2hvbGQpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMuc3dpcGVhYmxlID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgJHRhYnNDb250ZW50ID0gJCgpO1xuICAgICAgICB0aGlzLiR0YWJMaW5rcy5lYWNoKGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgdmFyICRjdXJyQ29udGVudCA9ICQoTS5lc2NhcGVIYXNoKGxpbmsuaGFzaCkpO1xuICAgICAgICAgICRjdXJyQ29udGVudC5hZGRDbGFzcygnY2Fyb3VzZWwtaXRlbScpO1xuICAgICAgICAgICR0YWJzQ29udGVudCA9ICR0YWJzQ29udGVudC5hZGQoJGN1cnJDb250ZW50KTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyICR0YWJzV3JhcHBlciA9ICQoJzxkaXYgY2xhc3M9XCJ0YWJzLWNvbnRlbnQgY2Fyb3VzZWwgY2Fyb3VzZWwtc2xpZGVyXCI+PC9kaXY+Jyk7XG4gICAgICAgICR0YWJzQ29udGVudC5maXJzdCgpLmJlZm9yZSgkdGFic1dyYXBwZXIpO1xuICAgICAgICAkdGFic1dyYXBwZXIuYXBwZW5kKCR0YWJzQ29udGVudCk7XG4gICAgICAgICR0YWJzQ29udGVudFswXS5zdHlsZS5kaXNwbGF5ID0gJyc7XG5cbiAgICAgICAgLy8gS2VlcCBhY3RpdmUgdGFiIGluZGV4IHRvIHNldCBpbml0aWFsIGNhcm91c2VsIHNsaWRlXG4gICAgICAgIHZhciBhY3RpdmVUYWJJbmRleCA9IHRoaXMuJGFjdGl2ZVRhYkxpbmsuY2xvc2VzdCgnLnRhYicpLmluZGV4KCk7XG5cbiAgICAgICAgdGhpcy5fdGFic0Nhcm91c2VsID0gTS5DYXJvdXNlbC5pbml0KCR0YWJzV3JhcHBlclswXSwge1xuICAgICAgICAgIGZ1bGxXaWR0aDogdHJ1ZSxcbiAgICAgICAgICBub1dyYXA6IHRydWUsXG4gICAgICAgICAgb25DeWNsZVRvOiBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgdmFyIHByZXZJbmRleCA9IF90aGlzMjUuaW5kZXg7XG4gICAgICAgICAgICBfdGhpczI1LmluZGV4ID0gJChpdGVtKS5pbmRleCgpO1xuICAgICAgICAgICAgX3RoaXMyNS4kYWN0aXZlVGFiTGluay5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBfdGhpczI1LiRhY3RpdmVUYWJMaW5rID0gX3RoaXMyNS4kdGFiTGlua3MuZXEoX3RoaXMyNS5pbmRleCk7XG4gICAgICAgICAgICBfdGhpczI1LiRhY3RpdmVUYWJMaW5rLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIF90aGlzMjUuX2FuaW1hdGVJbmRpY2F0b3IocHJldkluZGV4KTtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMyNS5vcHRpb25zLm9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczI1Lm9wdGlvbnMub25TaG93LmNhbGwoX3RoaXMyNSwgX3RoaXMyNS4kY29udGVudFswXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBjYXJvdXNlbCBzbGlkZSB0byBhY3RpdmUgdGFiXG4gICAgICAgIHRoaXMuX3RhYnNDYXJvdXNlbC5zZXQoYWN0aXZlVGFiSW5kZXgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIG5vcm1hbCB0YWJzLlxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3RlYXJkb3duU3dpcGVhYmxlVGFic1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90ZWFyZG93blN3aXBlYWJsZVRhYnMoKSB7XG4gICAgICAgIHZhciAkdGFic1dyYXBwZXIgPSB0aGlzLl90YWJzQ2Fyb3VzZWwuJGVsO1xuICAgICAgICB0aGlzLl90YWJzQ2Fyb3VzZWwuZGVzdHJveSgpO1xuXG4gICAgICAgIC8vIFVud3JhcFxuICAgICAgICAkdGFic1dyYXBwZXIuYWZ0ZXIoJHRhYnNXcmFwcGVyLmNoaWxkcmVuKCkpO1xuICAgICAgICAkdGFic1dyYXBwZXIucmVtb3ZlKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgbm9ybWFsIHRhYnMuXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBOb3JtYWxUYWJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwTm9ybWFsVGFicygpIHtcbiAgICAgICAgLy8gSGlkZSBUYWJzIENvbnRlbnRcbiAgICAgICAgdGhpcy4kdGFiTGlua3Mubm90KHRoaXMuJGFjdGl2ZVRhYkxpbmspLmVhY2goZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICBpZiAoISFsaW5rLmhhc2gpIHtcbiAgICAgICAgICAgIHZhciAkY3VyckNvbnRlbnQgPSAkKE0uZXNjYXBlSGFzaChsaW5rLmhhc2gpKTtcbiAgICAgICAgICAgIGlmICgkY3VyckNvbnRlbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICRjdXJyQ29udGVudFswXS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gbm9ybWFsIHRhYnMuXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdGVhcmRvd25Ob3JtYWxUYWJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3RlYXJkb3duTm9ybWFsVGFicygpIHtcbiAgICAgICAgLy8gc2hvdyBUYWJzIENvbnRlbnRcbiAgICAgICAgdGhpcy4kdGFiTGlua3MuZWFjaChmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgIGlmICghIWxpbmsuaGFzaCkge1xuICAgICAgICAgICAgdmFyICRjdXJyQ29udGVudCA9ICQoTS5lc2NhcGVIYXNoKGxpbmsuaGFzaCkpO1xuICAgICAgICAgICAgaWYgKCRjdXJyQ29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJGN1cnJDb250ZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnJztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIHNldCB0YWJzIGFuZCB0YWIgd2lkdGhcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRUYWJzQW5kVGFiV2lkdGhcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0VGFic0FuZFRhYldpZHRoKCkge1xuICAgICAgICB0aGlzLnRhYnNXaWR0aCA9IHRoaXMuJGVsLndpZHRoKCk7XG4gICAgICAgIHRoaXMudGFiV2lkdGggPSBNYXRoLm1heCh0aGlzLnRhYnNXaWR0aCwgdGhpcy5lbC5zY3JvbGxXaWR0aCkgLyB0aGlzLiR0YWJMaW5rcy5sZW5ndGg7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRmluZHMgcmlnaHQgYXR0cmlidXRlIGZvciBpbmRpY2F0b3IgYmFzZWQgb24gYWN0aXZlIHRhYi5cbiAgICAgICAqIEBwYXJhbSB7Y2FzaH0gZWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jYWxjUmlnaHRQb3NcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2FsY1JpZ2h0UG9zKGVsKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmNlaWwodGhpcy50YWJzV2lkdGggLSBlbC5wb3NpdGlvbigpLmxlZnQgLSBlbFswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRmluZHMgbGVmdCBhdHRyaWJ1dGUgZm9yIGluZGljYXRvciBiYXNlZCBvbiBhY3RpdmUgdGFiLlxuICAgICAgICogQHBhcmFtIHtjYXNofSBlbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2NhbGNMZWZ0UG9zXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NhbGNMZWZ0UG9zKGVsKSB7XG4gICAgICAgIHJldHVybiBNYXRoLmZsb29yKGVsLnBvc2l0aW9uKCkubGVmdCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInVwZGF0ZVRhYkluZGljYXRvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZVRhYkluZGljYXRvcigpIHtcbiAgICAgICAgdGhpcy5fc2V0VGFic0FuZFRhYldpZHRoKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGVJbmRpY2F0b3IodGhpcy5pbmRleCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQW5pbWF0ZXMgSW5kaWNhdG9yIHRvIGFjdGl2ZSB0YWIuXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gcHJldkluZGV4XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUluZGljYXRvclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW5kaWNhdG9yKHByZXZJbmRleCkge1xuICAgICAgICB2YXIgbGVmdERlbGF5ID0gMCxcbiAgICAgICAgICAgIHJpZ2h0RGVsYXkgPSAwO1xuXG4gICAgICAgIGlmICh0aGlzLmluZGV4IC0gcHJldkluZGV4ID49IDApIHtcbiAgICAgICAgICBsZWZ0RGVsYXkgPSA5MDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByaWdodERlbGF5ID0gOTA7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBbmltYXRlXG4gICAgICAgIHZhciBhbmltT3B0aW9ucyA9IHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLl9pbmRpY2F0b3IsXG4gICAgICAgICAgbGVmdDoge1xuICAgICAgICAgICAgdmFsdWU6IHRoaXMuX2NhbGNMZWZ0UG9zKHRoaXMuJGFjdGl2ZVRhYkxpbmspLFxuICAgICAgICAgICAgZGVsYXk6IGxlZnREZWxheVxuICAgICAgICAgIH0sXG4gICAgICAgICAgcmlnaHQ6IHtcbiAgICAgICAgICAgIHZhbHVlOiB0aGlzLl9jYWxjUmlnaHRQb3ModGhpcy4kYWN0aXZlVGFiTGluayksXG4gICAgICAgICAgICBkZWxheTogcmlnaHREZWxheVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgfTtcbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5faW5kaWNhdG9yKTtcbiAgICAgICAgYW5pbShhbmltT3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2VsZWN0IHRhYi5cbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0YWJJZFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2VsZWN0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0KHRhYklkKSB7XG4gICAgICAgIHZhciB0YWIgPSB0aGlzLiR0YWJMaW5rcy5maWx0ZXIoJ1tocmVmPVwiIycgKyB0YWJJZCArICdcIl0nKTtcbiAgICAgICAgaWYgKHRhYi5sZW5ndGgpIHtcbiAgICAgICAgICB0YWIudHJpZ2dlcignY2xpY2snKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChUYWJzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFicyksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1RhYnM7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVGFicztcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uVGFicyA9IFRhYnM7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihUYWJzLCAndGFicycsICdNX1RhYnMnKTtcbiAgfVxufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGV4aXREZWxheTogMjAwLFxuICAgIGVudGVyRGVsYXk6IDAsXG4gICAgaHRtbDogbnVsbCxcbiAgICBtYXJnaW46IDUsXG4gICAgaW5EdXJhdGlvbjogMjUwLFxuICAgIG91dER1cmF0aW9uOiAyMDAsXG4gICAgcG9zaXRpb246ICdib3R0b20nLFxuICAgIHRyYW5zaXRpb25Nb3ZlbWVudDogMTBcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBUb29sdGlwID0gZnVuY3Rpb24gKF9Db21wb25lbnQ3KSB7XG4gICAgX2luaGVyaXRzKFRvb2x0aXAsIF9Db21wb25lbnQ3KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBUb29sdGlwIGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gVG9vbHRpcChlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRvb2x0aXApO1xuXG4gICAgICB2YXIgX3RoaXMyNiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUb29sdGlwLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVG9vbHRpcCkpLmNhbGwodGhpcywgVG9vbHRpcCwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXMyNi5lbC5NX1Rvb2x0aXAgPSBfdGhpczI2O1xuICAgICAgX3RoaXMyNi5vcHRpb25zID0gJC5leHRlbmQoe30sIFRvb2x0aXAuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICBfdGhpczI2LmlzT3BlbiA9IGZhbHNlO1xuICAgICAgX3RoaXMyNi5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICAgIF90aGlzMjYuaXNGb2N1c2VkID0gZmFsc2U7XG4gICAgICBfdGhpczI2Ll9hcHBlbmRUb29sdGlwRWwoKTtcbiAgICAgIF90aGlzMjYuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzMjY7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFRvb2x0aXAsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICAkKHRoaXMudG9vbHRpcEVsKS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLk1fVG9vbHRpcCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FwcGVuZFRvb2x0aXBFbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmRUb29sdGlwRWwoKSB7XG4gICAgICAgIHZhciB0b29sdGlwRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9vbHRpcEVsLmNsYXNzTGlzdC5hZGQoJ21hdGVyaWFsLXRvb2x0aXAnKTtcbiAgICAgICAgdGhpcy50b29sdGlwRWwgPSB0b29sdGlwRWw7XG5cbiAgICAgICAgdmFyIHRvb2x0aXBDb250ZW50RWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9vbHRpcENvbnRlbnRFbC5jbGFzc0xpc3QuYWRkKCd0b29sdGlwLWNvbnRlbnQnKTtcbiAgICAgICAgdG9vbHRpcENvbnRlbnRFbC5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaHRtbDtcbiAgICAgICAgdG9vbHRpcEVsLmFwcGVuZENoaWxkKHRvb2x0aXBDb250ZW50RWwpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHRvb2x0aXBFbCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl91cGRhdGVUb29sdGlwQ29udGVudFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVUb29sdGlwQ29udGVudCgpIHtcbiAgICAgICAgdGhpcy50b29sdGlwRWwucXVlcnlTZWxlY3RvcignLnRvb2x0aXAtY29udGVudCcpLmlubmVySFRNTCA9IHRoaXMub3B0aW9ucy5odG1sO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kID0gdGhpcy5faGFuZGxlTW91c2VFbnRlci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQgPSB0aGlzLl9oYW5kbGVGb2N1cy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVCbHVyQm91bmQgPSB0aGlzLl9oYW5kbGVCbHVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuX2hhbmRsZU1vdXNlRW50ZXJCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVGb2N1c0JvdW5kLCB0cnVlKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlQmx1ckJvdW5kLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQsIHRydWUpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVCbHVyQm91bmQsIHRydWUpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvcGVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3Blbihpc01hbnVhbCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaXNNYW51YWwgPSBpc01hbnVhbCA9PT0gdW5kZWZpbmVkID8gdHJ1ZSA6IHVuZGVmaW5lZDsgLy8gRGVmYXVsdCB2YWx1ZSB0cnVlXG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgLy8gVXBkYXRlIHRvb2x0aXAgY29udGVudCB3aXRoIEhUTUwgYXR0cmlidXRlIG9wdGlvbnNcbiAgICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucywgdGhpcy5fZ2V0QXR0cmlidXRlT3B0aW9ucygpKTtcbiAgICAgICAgdGhpcy5fdXBkYXRlVG9vbHRpcENvbnRlbnQoKTtcbiAgICAgICAgdGhpcy5fc2V0RW50ZXJEZWxheVRpbWVvdXQoaXNNYW51YWwpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbG9zZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fc2V0RXhpdERlbGF5VGltZW91dCgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZSB0aW1lb3V0IHdoaWNoIGRlbGF5cyB3aGVuIHRoZSB0b29sdGlwIGNsb3Nlc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldEV4aXREZWxheVRpbWVvdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0RXhpdERlbGF5VGltZW91dCgpIHtcbiAgICAgICAgdmFyIF90aGlzMjcgPSB0aGlzO1xuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9leGl0RGVsYXlUaW1lb3V0KTtcblxuICAgICAgICB0aGlzLl9leGl0RGVsYXlUaW1lb3V0ID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKF90aGlzMjcuaXNIb3ZlcmVkIHx8IF90aGlzMjcuaXNGb2N1c2VkKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXMyNy5fYW5pbWF0ZU91dCgpO1xuICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZXhpdERlbGF5KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGUgdGltZW91dCB3aGljaCBkZWxheXMgd2hlbiB0aGUgdG9hc3QgY2xvc2VzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0RW50ZXJEZWxheVRpbWVvdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0RW50ZXJEZWxheVRpbWVvdXQoaXNNYW51YWwpIHtcbiAgICAgICAgdmFyIF90aGlzMjggPSB0aGlzO1xuXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLl9lbnRlckRlbGF5VGltZW91dCk7XG5cbiAgICAgICAgdGhpcy5fZW50ZXJEZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoIV90aGlzMjguaXNIb3ZlcmVkICYmICFfdGhpczI4LmlzRm9jdXNlZCAmJiAhaXNNYW51YWwpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfdGhpczI4Ll9hbmltYXRlSW4oKTtcbiAgICAgICAgfSwgdGhpcy5vcHRpb25zLmVudGVyRGVsYXkpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcG9zaXRpb25Ub29sdGlwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3Bvc2l0aW9uVG9vbHRpcCgpIHtcbiAgICAgICAgdmFyIG9yaWdpbiA9IHRoaXMuZWwsXG4gICAgICAgICAgICB0b29sdGlwID0gdGhpcy50b29sdGlwRWwsXG4gICAgICAgICAgICBvcmlnaW5IZWlnaHQgPSBvcmlnaW4ub2Zmc2V0SGVpZ2h0LFxuICAgICAgICAgICAgb3JpZ2luV2lkdGggPSBvcmlnaW4ub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICB0b29sdGlwSGVpZ2h0ID0gdG9vbHRpcC5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICB0b29sdGlwV2lkdGggPSB0b29sdGlwLm9mZnNldFdpZHRoLFxuICAgICAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSB2b2lkIDAsXG4gICAgICAgICAgICBtYXJnaW4gPSB0aGlzLm9wdGlvbnMubWFyZ2luLFxuICAgICAgICAgICAgdGFyZ2V0VG9wID0gdm9pZCAwLFxuICAgICAgICAgICAgdGFyZ2V0TGVmdCA9IHZvaWQgMDtcblxuICAgICAgICB0aGlzLnhNb3ZlbWVudCA9IDAsIHRoaXMueU1vdmVtZW50ID0gMDtcblxuICAgICAgICB0YXJnZXRUb3AgPSBvcmlnaW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wICsgTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpO1xuICAgICAgICB0YXJnZXRMZWZ0ID0gb3JpZ2luLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgKyBNLmdldERvY3VtZW50U2Nyb2xsTGVmdCgpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09ICd0b3AnKSB7XG4gICAgICAgICAgdGFyZ2V0VG9wICs9IC10b29sdGlwSGVpZ2h0IC0gbWFyZ2luO1xuICAgICAgICAgIHRhcmdldExlZnQgKz0gb3JpZ2luV2lkdGggLyAyIC0gdG9vbHRpcFdpZHRoIC8gMjtcbiAgICAgICAgICB0aGlzLnlNb3ZlbWVudCA9IC10aGlzLm9wdGlvbnMudHJhbnNpdGlvbk1vdmVtZW50O1xuICAgICAgICB9IGVsc2UgaWYgKHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgIHRhcmdldFRvcCArPSBvcmlnaW5IZWlnaHQgLyAyIC0gdG9vbHRpcEhlaWdodCAvIDI7XG4gICAgICAgICAgdGFyZ2V0TGVmdCArPSBvcmlnaW5XaWR0aCArIG1hcmdpbjtcbiAgICAgICAgICB0aGlzLnhNb3ZlbWVudCA9IHRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSAnbGVmdCcpIHtcbiAgICAgICAgICB0YXJnZXRUb3AgKz0gb3JpZ2luSGVpZ2h0IC8gMiAtIHRvb2x0aXBIZWlnaHQgLyAyO1xuICAgICAgICAgIHRhcmdldExlZnQgKz0gLXRvb2x0aXBXaWR0aCAtIG1hcmdpbjtcbiAgICAgICAgICB0aGlzLnhNb3ZlbWVudCA9IC10aGlzLm9wdGlvbnMudHJhbnNpdGlvbk1vdmVtZW50O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhcmdldFRvcCArPSBvcmlnaW5IZWlnaHQgKyBtYXJnaW47XG4gICAgICAgICAgdGFyZ2V0TGVmdCArPSBvcmlnaW5XaWR0aCAvIDIgLSB0b29sdGlwV2lkdGggLyAyO1xuICAgICAgICAgIHRoaXMueU1vdmVtZW50ID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb25Nb3ZlbWVudDtcbiAgICAgICAgfVxuXG4gICAgICAgIG5ld0Nvb3JkaW5hdGVzID0gdGhpcy5fcmVwb3NpdGlvbldpdGhpblNjcmVlbih0YXJnZXRMZWZ0LCB0YXJnZXRUb3AsIHRvb2x0aXBXaWR0aCwgdG9vbHRpcEhlaWdodCk7XG4gICAgICAgICQodG9vbHRpcCkuY3NzKHtcbiAgICAgICAgICB0b3A6IG5ld0Nvb3JkaW5hdGVzLnkgKyAncHgnLFxuICAgICAgICAgIGxlZnQ6IG5ld0Nvb3JkaW5hdGVzLnggKyAncHgnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVwb3NpdGlvbldpdGhpblNjcmVlblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXBvc2l0aW9uV2l0aGluU2NyZWVuKHgsIHksIHdpZHRoLCBoZWlnaHQpIHtcbiAgICAgICAgdmFyIHNjcm9sbExlZnQgPSBNLmdldERvY3VtZW50U2Nyb2xsTGVmdCgpO1xuICAgICAgICB2YXIgc2Nyb2xsVG9wID0gTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpO1xuICAgICAgICB2YXIgbmV3WCA9IHggLSBzY3JvbGxMZWZ0O1xuICAgICAgICB2YXIgbmV3WSA9IHkgLSBzY3JvbGxUb3A7XG5cbiAgICAgICAgdmFyIGJvdW5kaW5nID0ge1xuICAgICAgICAgIGxlZnQ6IG5ld1gsXG4gICAgICAgICAgdG9wOiBuZXdZLFxuICAgICAgICAgIHdpZHRoOiB3aWR0aCxcbiAgICAgICAgICBoZWlnaHQ6IGhlaWdodFxuICAgICAgICB9O1xuXG4gICAgICAgIHZhciBvZmZzZXQgPSB0aGlzLm9wdGlvbnMubWFyZ2luICsgdGhpcy5vcHRpb25zLnRyYW5zaXRpb25Nb3ZlbWVudDtcbiAgICAgICAgdmFyIGVkZ2VzID0gTS5jaGVja1dpdGhpbkNvbnRhaW5lcihkb2N1bWVudC5ib2R5LCBib3VuZGluZywgb2Zmc2V0KTtcblxuICAgICAgICBpZiAoZWRnZXMubGVmdCkge1xuICAgICAgICAgIG5ld1ggPSBvZmZzZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAoZWRnZXMucmlnaHQpIHtcbiAgICAgICAgICBuZXdYIC09IG5ld1ggKyB3aWR0aCAtIHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGVkZ2VzLnRvcCkge1xuICAgICAgICAgIG5ld1kgPSBvZmZzZXQ7XG4gICAgICAgIH0gZWxzZSBpZiAoZWRnZXMuYm90dG9tKSB7XG4gICAgICAgICAgbmV3WSAtPSBuZXdZICsgaGVpZ2h0IC0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICB4OiBuZXdYICsgc2Nyb2xsTGVmdCxcbiAgICAgICAgICB5OiBuZXdZICsgc2Nyb2xsVG9wXG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluKCkge1xuICAgICAgICB0aGlzLl9wb3NpdGlvblRvb2x0aXAoKTtcbiAgICAgICAgdGhpcy50b29sdGlwRWwuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJztcbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy50b29sdGlwRWwpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLnRvb2x0aXBFbCxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIHRyYW5zbGF0ZVg6IHRoaXMueE1vdmVtZW50LFxuICAgICAgICAgIHRyYW5zbGF0ZVk6IHRoaXMueU1vdmVtZW50LFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZU91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0KCkge1xuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLnRvb2x0aXBFbCk7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMudG9vbHRpcEVsLFxuICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgdHJhbnNsYXRlWDogMCxcbiAgICAgICAgICB0cmFuc2xhdGVZOiAwLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU1vdXNlRW50ZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VFbnRlcigpIHtcbiAgICAgICAgdGhpcy5pc0hvdmVyZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlOyAvLyBBbGxvd3MgY2xvc2Ugb2YgdG9vbHRpcCB3aGVuIG9wZW5lZCBieSBmb2N1cy5cbiAgICAgICAgdGhpcy5vcGVuKGZhbHNlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU1vdXNlTGVhdmVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VMZWF2ZSgpIHtcbiAgICAgICAgdGhpcy5pc0hvdmVyZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTsgLy8gQWxsb3dzIGNsb3NlIG9mIHRvb2x0aXAgd2hlbiBvcGVuZWQgYnkgZm9jdXMuXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUZvY3VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUZvY3VzKCkge1xuICAgICAgICBpZiAoTS50YWJQcmVzc2VkKSB7XG4gICAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMub3BlbihmYWxzZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUJsdXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQmx1cigpIHtcbiAgICAgICAgdGhpcy5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfZ2V0QXR0cmlidXRlT3B0aW9uc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXRBdHRyaWJ1dGVPcHRpb25zKCkge1xuICAgICAgICB2YXIgYXR0cmlidXRlT3B0aW9ucyA9IHt9O1xuICAgICAgICB2YXIgdG9vbHRpcFRleHRPcHRpb24gPSB0aGlzLmVsLmdldEF0dHJpYnV0ZSgnZGF0YS10b29sdGlwJyk7XG4gICAgICAgIHZhciBwb3NpdGlvbk9wdGlvbiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXBvc2l0aW9uJyk7XG5cbiAgICAgICAgaWYgKHRvb2x0aXBUZXh0T3B0aW9uKSB7XG4gICAgICAgICAgYXR0cmlidXRlT3B0aW9ucy5odG1sID0gdG9vbHRpcFRleHRPcHRpb247XG4gICAgICAgIH1cblxuICAgICAgICBpZiAocG9zaXRpb25PcHRpb24pIHtcbiAgICAgICAgICBhdHRyaWJ1dGVPcHRpb25zLnBvc2l0aW9uID0gcG9zaXRpb25PcHRpb247XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZU9wdGlvbnM7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KFRvb2x0aXAuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUb29sdGlwKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fVG9vbHRpcDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUb29sdGlwO1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5Ub29sdGlwID0gVG9vbHRpcDtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFRvb2x0aXAsICd0b29sdGlwJywgJ01fVG9vbHRpcCcpO1xuICB9XG59KShjYXNoLCBNLmFuaW1lKTtcbjsgLyohXG4gICogV2F2ZXMgdjAuNi40XG4gICogaHR0cDovL2ZpYW4ubXkuaWQvV2F2ZXNcbiAgKlxuICAqIENvcHlyaWdodCAyMDE0IEFsZmlhbmEgRS4gU2lidWVhIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAgKiBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAgKiBodHRwczovL2dpdGh1Yi5jb20vZmlhbnMvV2F2ZXMvYmxvYi9tYXN0ZXIvTElDRU5TRVxuICAqL1xuXG47KGZ1bmN0aW9uICh3aW5kb3cpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBXYXZlcyA9IFdhdmVzIHx8IHt9O1xuICB2YXIgJCQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLmJpbmQoZG9jdW1lbnQpO1xuXG4gIC8vIEZpbmQgZXhhY3QgcG9zaXRpb24gb2YgZWxlbWVudFxuICBmdW5jdGlvbiBpc1dpbmRvdyhvYmopIHtcbiAgICByZXR1cm4gb2JqICE9PSBudWxsICYmIG9iaiA9PT0gb2JqLndpbmRvdztcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldFdpbmRvdyhlbGVtKSB7XG4gICAgcmV0dXJuIGlzV2luZG93KGVsZW0pID8gZWxlbSA6IGVsZW0ubm9kZVR5cGUgPT09IDkgJiYgZWxlbS5kZWZhdWx0VmlldztcbiAgfVxuXG4gIGZ1bmN0aW9uIG9mZnNldChlbGVtKSB7XG4gICAgdmFyIGRvY0VsZW0sXG4gICAgICAgIHdpbixcbiAgICAgICAgYm94ID0geyB0b3A6IDAsIGxlZnQ6IDAgfSxcbiAgICAgICAgZG9jID0gZWxlbSAmJiBlbGVtLm93bmVyRG9jdW1lbnQ7XG5cbiAgICBkb2NFbGVtID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICAgIGlmICh0eXBlb2YgZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QgIT09IHR5cGVvZiB1bmRlZmluZWQpIHtcbiAgICAgIGJveCA9IGVsZW0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgfVxuICAgIHdpbiA9IGdldFdpbmRvdyhkb2MpO1xuICAgIHJldHVybiB7XG4gICAgICB0b3A6IGJveC50b3AgKyB3aW4ucGFnZVlPZmZzZXQgLSBkb2NFbGVtLmNsaWVudFRvcCxcbiAgICAgIGxlZnQ6IGJveC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jRWxlbS5jbGllbnRMZWZ0XG4gICAgfTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnZlcnRTdHlsZShvYmopIHtcbiAgICB2YXIgc3R5bGUgPSAnJztcblxuICAgIGZvciAodmFyIGEgaW4gb2JqKSB7XG4gICAgICBpZiAob2JqLmhhc093blByb3BlcnR5KGEpKSB7XG4gICAgICAgIHN0eWxlICs9IGEgKyAnOicgKyBvYmpbYV0gKyAnOyc7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHN0eWxlO1xuICB9XG5cbiAgdmFyIEVmZmVjdCA9IHtcblxuICAgIC8vIEVmZmVjdCBkZWxheVxuICAgIGR1cmF0aW9uOiA3NTAsXG5cbiAgICBzaG93OiBmdW5jdGlvbiAoZSwgZWxlbWVudCkge1xuXG4gICAgICAvLyBEaXNhYmxlIHJpZ2h0IGNsaWNrXG4gICAgICBpZiAoZS5idXR0b24gPT09IDIpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgZWwgPSBlbGVtZW50IHx8IHRoaXM7XG5cbiAgICAgIC8vIENyZWF0ZSByaXBwbGVcbiAgICAgIHZhciByaXBwbGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgIHJpcHBsZS5jbGFzc05hbWUgPSAnd2F2ZXMtcmlwcGxlJztcbiAgICAgIGVsLmFwcGVuZENoaWxkKHJpcHBsZSk7XG5cbiAgICAgIC8vIEdldCBjbGljayBjb29yZGluYXRlIGFuZCBlbGVtZW50IHdpdGRoXG4gICAgICB2YXIgcG9zID0gb2Zmc2V0KGVsKTtcbiAgICAgIHZhciByZWxhdGl2ZVkgPSBlLnBhZ2VZIC0gcG9zLnRvcDtcbiAgICAgIHZhciByZWxhdGl2ZVggPSBlLnBhZ2VYIC0gcG9zLmxlZnQ7XG4gICAgICB2YXIgc2NhbGUgPSAnc2NhbGUoJyArIGVsLmNsaWVudFdpZHRoIC8gMTAwICogMTAgKyAnKSc7XG5cbiAgICAgIC8vIFN1cHBvcnQgZm9yIHRvdWNoIGRldmljZXNcbiAgICAgIGlmICgndG91Y2hlcycgaW4gZSkge1xuICAgICAgICByZWxhdGl2ZVkgPSBlLnRvdWNoZXNbMF0ucGFnZVkgLSBwb3MudG9wO1xuICAgICAgICByZWxhdGl2ZVggPSBlLnRvdWNoZXNbMF0ucGFnZVggLSBwb3MubGVmdDtcbiAgICAgIH1cblxuICAgICAgLy8gQXR0YWNoIGRhdGEgdG8gZWxlbWVudFxuICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS1ob2xkJywgRGF0ZS5ub3coKSk7XG4gICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXNjYWxlJywgc2NhbGUpO1xuICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS14JywgcmVsYXRpdmVYKTtcbiAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEteScsIHJlbGF0aXZlWSk7XG5cbiAgICAgIC8vIFNldCByaXBwbGUgcG9zaXRpb25cbiAgICAgIHZhciByaXBwbGVTdHlsZSA9IHtcbiAgICAgICAgJ3RvcCc6IHJlbGF0aXZlWSArICdweCcsXG4gICAgICAgICdsZWZ0JzogcmVsYXRpdmVYICsgJ3B4J1xuICAgICAgfTtcblxuICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9IHJpcHBsZS5jbGFzc05hbWUgKyAnIHdhdmVzLW5vdHJhbnNpdGlvbic7XG4gICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpO1xuICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9IHJpcHBsZS5jbGFzc05hbWUucmVwbGFjZSgnd2F2ZXMtbm90cmFuc2l0aW9uJywgJycpO1xuXG4gICAgICAvLyBTY2FsZSB0aGUgcmlwcGxlXG4gICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNmb3JtJ10gPSBzY2FsZTtcbiAgICAgIHJpcHBsZVN0eWxlWyctbXMtdHJhbnNmb3JtJ10gPSBzY2FsZTtcbiAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgcmlwcGxlU3R5bGUudHJhbnNmb3JtID0gc2NhbGU7XG4gICAgICByaXBwbGVTdHlsZS5vcGFjaXR5ID0gJzEnO1xuXG4gICAgICByaXBwbGVTdHlsZVsnLXdlYmtpdC10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuICAgICAgcmlwcGxlU3R5bGVbJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbiddID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcbiAgICAgIHJpcHBsZVN0eWxlWyctby10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuICAgICAgcmlwcGxlU3R5bGVbJ3RyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG5cbiAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XG4gICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XG4gICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcblxuICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUocmlwcGxlU3R5bGUpKTtcbiAgICB9LFxuXG4gICAgaGlkZTogZnVuY3Rpb24gKGUpIHtcbiAgICAgIFRvdWNoSGFuZGxlci50b3VjaHVwKGUpO1xuXG4gICAgICB2YXIgZWwgPSB0aGlzO1xuICAgICAgdmFyIHdpZHRoID0gZWwuY2xpZW50V2lkdGggKiAxLjQ7XG5cbiAgICAgIC8vIEdldCBmaXJzdCByaXBwbGVcbiAgICAgIHZhciByaXBwbGUgPSBudWxsO1xuICAgICAgdmFyIHJpcHBsZXMgPSBlbC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCd3YXZlcy1yaXBwbGUnKTtcbiAgICAgIGlmIChyaXBwbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmlwcGxlID0gcmlwcGxlc1tyaXBwbGVzLmxlbmd0aCAtIDFdO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgcmVsYXRpdmVYID0gcmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS14Jyk7XG4gICAgICB2YXIgcmVsYXRpdmVZID0gcmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS15Jyk7XG4gICAgICB2YXIgc2NhbGUgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXNjYWxlJyk7XG5cbiAgICAgIC8vIEdldCBkZWxheSBiZWV0d2VlbiBtb3VzZWRvd24gYW5kIG1vdXNlIGxlYXZlXG4gICAgICB2YXIgZGlmZiA9IERhdGUubm93KCkgLSBOdW1iZXIocmlwcGxlLmdldEF0dHJpYnV0ZSgnZGF0YS1ob2xkJykpO1xuICAgICAgdmFyIGRlbGF5ID0gMzUwIC0gZGlmZjtcblxuICAgICAgaWYgKGRlbGF5IDwgMCkge1xuICAgICAgICBkZWxheSA9IDA7XG4gICAgICB9XG5cbiAgICAgIC8vIEZhZGUgb3V0IHJpcHBsZSBhZnRlciBkZWxheVxuICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBzdHlsZSA9IHtcbiAgICAgICAgICAndG9wJzogcmVsYXRpdmVZICsgJ3B4JyxcbiAgICAgICAgICAnbGVmdCc6IHJlbGF0aXZlWCArICdweCcsXG4gICAgICAgICAgJ29wYWNpdHknOiAnMCcsXG5cbiAgICAgICAgICAvLyBEdXJhdGlvblxuICAgICAgICAgICctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICctbW96LXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICctby10cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAndHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgJy13ZWJraXQtdHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgJy1tb3otdHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgJy1tcy10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAnLW8tdHJhbnNmb3JtJzogc2NhbGUsXG4gICAgICAgICAgJ3RyYW5zZm9ybSc6IHNjYWxlXG4gICAgICAgIH07XG5cbiAgICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBjb252ZXJ0U3R5bGUoc3R5bGUpKTtcblxuICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgZWwucmVtb3ZlQ2hpbGQocmlwcGxlKTtcbiAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9LCBFZmZlY3QuZHVyYXRpb24pO1xuICAgICAgfSwgZGVsYXkpO1xuICAgIH0sXG5cbiAgICAvLyBMaXR0bGUgaGFjayB0byBtYWtlIDxpbnB1dD4gY2FuIHBlcmZvcm0gd2F2ZXMgZWZmZWN0XG4gICAgd3JhcElucHV0OiBmdW5jdGlvbiAoZWxlbWVudHMpIHtcbiAgICAgIGZvciAodmFyIGEgPSAwOyBhIDwgZWxlbWVudHMubGVuZ3RoOyBhKyspIHtcbiAgICAgICAgdmFyIGVsID0gZWxlbWVudHNbYV07XG5cbiAgICAgICAgaWYgKGVsLnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgICAgIHZhciBwYXJlbnQgPSBlbC5wYXJlbnROb2RlO1xuXG4gICAgICAgICAgLy8gSWYgaW5wdXQgYWxyZWFkeSBoYXZlIHBhcmVudCBqdXN0IHBhc3MgdGhyb3VnaFxuICAgICAgICAgIGlmIChwYXJlbnQudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaScgJiYgcGFyZW50LmNsYXNzTmFtZS5pbmRleE9mKCd3YXZlcy1lZmZlY3QnKSAhPT0gLTEpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFB1dCBlbGVtZW50IGNsYXNzIGFuZCBzdHlsZSB0byB0aGUgc3BlY2lmaWVkIHBhcmVudFxuICAgICAgICAgIHZhciB3cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgICAgIHdyYXBwZXIuY2xhc3NOYW1lID0gZWwuY2xhc3NOYW1lICsgJyB3YXZlcy1pbnB1dC13cmFwcGVyJztcblxuICAgICAgICAgIHZhciBlbGVtZW50U3R5bGUgPSBlbC5nZXRBdHRyaWJ1dGUoJ3N0eWxlJyk7XG5cbiAgICAgICAgICBpZiAoIWVsZW1lbnRTdHlsZSkge1xuICAgICAgICAgICAgZWxlbWVudFN0eWxlID0gJyc7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgd3JhcHBlci5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgZWxlbWVudFN0eWxlKTtcblxuICAgICAgICAgIGVsLmNsYXNzTmFtZSA9ICd3YXZlcy1idXR0b24taW5wdXQnO1xuICAgICAgICAgIGVsLnJlbW92ZUF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgICAgIC8vIFB1dCBlbGVtZW50IGFzIGNoaWxkXG4gICAgICAgICAgcGFyZW50LnJlcGxhY2VDaGlsZCh3cmFwcGVyLCBlbCk7XG4gICAgICAgICAgd3JhcHBlci5hcHBlbmRDaGlsZChlbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERpc2FibGUgbW91c2Vkb3duIGV2ZW50IGZvciA1MDBtcyBkdXJpbmcgYW5kIGFmdGVyIHRvdWNoXG4gICAqL1xuICB2YXIgVG91Y2hIYW5kbGVyID0ge1xuICAgIC8qIHVzZXMgYW4gaW50ZWdlciByYXRoZXIgdGhhbiBib29sIHNvIHRoZXJlJ3Mgbm8gaXNzdWVzIHdpdGhcbiAgICAgKiBuZWVkaW5nIHRvIGNsZWFyIHRpbWVvdXRzIGlmIGFub3RoZXIgdG91Y2ggZXZlbnQgb2NjdXJyZWRcbiAgICAgKiB3aXRoaW4gdGhlIDUwMG1zLiBDYW5ub3QgbW91c2V1cCBiZXR3ZWVuIHRvdWNoc3RhcnQgYW5kXG4gICAgICogdG91Y2hlbmQsIG5vciBpbiB0aGUgNTAwbXMgYWZ0ZXIgdG91Y2hlbmQuICovXG4gICAgdG91Y2hlczogMCxcbiAgICBhbGxvd0V2ZW50OiBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGFsbG93ID0gdHJ1ZTtcblxuICAgICAgaWYgKGUudHlwZSA9PT0gJ3RvdWNoc3RhcnQnKSB7XG4gICAgICAgIFRvdWNoSGFuZGxlci50b3VjaGVzICs9IDE7IC8vcHVzaFxuICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICd0b3VjaGVuZCcgfHwgZS50eXBlID09PSAndG91Y2hjYW5jZWwnKSB7XG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChUb3VjaEhhbmRsZXIudG91Y2hlcyA+IDApIHtcbiAgICAgICAgICAgIFRvdWNoSGFuZGxlci50b3VjaGVzIC09IDE7IC8vcG9wIGFmdGVyIDUwMG1zXG4gICAgICAgICAgfVxuICAgICAgICB9LCA1MDApO1xuICAgICAgfSBlbHNlIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nICYmIFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkge1xuICAgICAgICBhbGxvdyA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gYWxsb3c7XG4gICAgfSxcbiAgICB0b3VjaHVwOiBmdW5jdGlvbiAoZSkge1xuICAgICAgVG91Y2hIYW5kbGVyLmFsbG93RXZlbnQoZSk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBEZWxlZ2F0ZWQgY2xpY2sgaGFuZGxlciBmb3IgLndhdmVzLWVmZmVjdCBlbGVtZW50LlxuICAgKiByZXR1cm5zIG51bGwgd2hlbiAud2F2ZXMtZWZmZWN0IGVsZW1lbnQgbm90IGluIFwiY2xpY2sgdHJlZVwiXG4gICAqL1xuICBmdW5jdGlvbiBnZXRXYXZlc0VmZmVjdEVsZW1lbnQoZSkge1xuICAgIGlmIChUb3VjaEhhbmRsZXIuYWxsb3dFdmVudChlKSA9PT0gZmFsc2UpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIHZhciBlbGVtZW50ID0gbnVsbDtcbiAgICB2YXIgdGFyZ2V0ID0gZS50YXJnZXQgfHwgZS5zcmNFbGVtZW50O1xuXG4gICAgd2hpbGUgKHRhcmdldC5wYXJlbnROb2RlICE9PSBudWxsKSB7XG4gICAgICBpZiAoISh0YXJnZXQgaW5zdGFuY2VvZiBTVkdFbGVtZW50KSAmJiB0YXJnZXQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkge1xuICAgICAgICBlbGVtZW50ID0gdGFyZ2V0O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuICAgIH1cbiAgICByZXR1cm4gZWxlbWVudDtcbiAgfVxuXG4gIC8qKlxuICAgKiBCdWJibGUgdGhlIGNsaWNrIGFuZCBzaG93IGVmZmVjdCBpZiAud2F2ZXMtZWZmZWN0IGVsZW0gd2FzIGZvdW5kXG4gICAqL1xuICBmdW5jdGlvbiBzaG93RWZmZWN0KGUpIHtcbiAgICB2YXIgZWxlbWVudCA9IGdldFdhdmVzRWZmZWN0RWxlbWVudChlKTtcblxuICAgIGlmIChlbGVtZW50ICE9PSBudWxsKSB7XG4gICAgICBFZmZlY3Quc2hvdyhlLCBlbGVtZW50KTtcblxuICAgICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGNhbmNlbCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XG4gICAgICB9XG5cbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnZW5kJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICB9XG4gIH1cblxuICBXYXZlcy5kaXNwbGF5RWZmZWN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICAgIGlmICgnZHVyYXRpb24nIGluIG9wdGlvbnMpIHtcbiAgICAgIEVmZmVjdC5kdXJhdGlvbiA9IG9wdGlvbnMuZHVyYXRpb247XG4gICAgfVxuXG4gICAgLy9XcmFwIGlucHV0IGluc2lkZSA8aT4gdGFnXG4gICAgRWZmZWN0LndyYXBJbnB1dCgkJCgnLndhdmVzLWVmZmVjdCcpKTtcblxuICAgIGlmICgnb250b3VjaHN0YXJ0JyBpbiB3aW5kb3cpIHtcbiAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHNob3dFZmZlY3QsIGZhbHNlKTtcbiAgICB9XG5cbiAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHNob3dFZmZlY3QsIGZhbHNlKTtcbiAgfTtcblxuICAvKipcbiAgICogQXR0YWNoIFdhdmVzIHRvIGFuIGlucHV0IGVsZW1lbnQgKG9yIGFueSBlbGVtZW50IHdoaWNoIGRvZXNuJ3RcbiAgICogYnViYmxlIG1vdXNldXAvbW91c2Vkb3duIGV2ZW50cykuXG4gICAqICAgSW50ZW5kZWQgdG8gYmUgdXNlZCB3aXRoIGR5bmFtaWNhbGx5IGxvYWRlZCBmb3Jtcy9pbnB1dHMsIG9yXG4gICAqIHdoZXJlIHRoZSB1c2VyIGRvZXNuJ3Qgd2FudCBhIGRlbGVnYXRlZCBjbGljayBoYW5kbGVyLlxuICAgKi9cbiAgV2F2ZXMuYXR0YWNoID0gZnVuY3Rpb24gKGVsZW1lbnQpIHtcbiAgICAvL0ZVVFVSRTogYXV0b21hdGljYWxseSBhZGQgd2F2ZXMgY2xhc3NlcyBhbmQgYWxsb3cgdXNlcnNcbiAgICAvLyB0byBzcGVjaWZ5IHRoZW0gd2l0aCBhbiBvcHRpb25zIHBhcmFtPyBFZy4gbGlnaHQvY2xhc3NpYy9idXR0b25cbiAgICBpZiAoZWxlbWVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpbnB1dCcpIHtcbiAgICAgIEVmZmVjdC53cmFwSW5wdXQoW2VsZW1lbnRdKTtcbiAgICAgIGVsZW1lbnQgPSBlbGVtZW50LnBhcmVudE5vZGU7XG4gICAgfVxuXG4gICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgIH1cblxuICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICB9O1xuXG4gIHdpbmRvdy5XYXZlcyA9IFdhdmVzO1xuXG4gIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBmdW5jdGlvbiAoKSB7XG4gICAgV2F2ZXMuZGlzcGxheUVmZmVjdCgpO1xuICB9LCBmYWxzZSk7XG59KSh3aW5kb3cpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBodG1sOiAnJyxcbiAgICBkaXNwbGF5TGVuZ3RoOiA0MDAwLFxuICAgIGluRHVyYXRpb246IDMwMCxcbiAgICBvdXREdXJhdGlvbjogMzc1LFxuICAgIGNsYXNzZXM6ICcnLFxuICAgIGNvbXBsZXRlQ2FsbGJhY2s6IG51bGwsXG4gICAgYWN0aXZhdGlvblBlcmNlbnQ6IDAuOFxuICB9O1xuXG4gIHZhciBUb2FzdCA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBUb2FzdChvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVG9hc3QpO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSB0b2FzdFxuICAgICAgICogQG1lbWJlciBUb2FzdCNvcHRpb25zXG4gICAgICAgKi9cbiAgICAgIHRoaXMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBUb2FzdC5kZWZhdWx0cywgb3B0aW9ucyk7XG4gICAgICB0aGlzLm1lc3NhZ2UgPSB0aGlzLm9wdGlvbnMuaHRtbDtcblxuICAgICAgLyoqXG4gICAgICAgKiBEZXNjcmliZXMgY3VycmVudCBwYW4gc3RhdGUgdG9hc3RcbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICB0aGlzLnBhbm5pbmcgPSBmYWxzZTtcblxuICAgICAgLyoqXG4gICAgICAgKiBUaW1lIHJlbWFpbmluZyB1bnRpbCB0b2FzdCBpcyByZW1vdmVkXG4gICAgICAgKi9cbiAgICAgIHRoaXMudGltZVJlbWFpbmluZyA9IHRoaXMub3B0aW9ucy5kaXNwbGF5TGVuZ3RoO1xuXG4gICAgICBpZiAoVG9hc3QuX3RvYXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgVG9hc3QuX2NyZWF0ZUNvbnRhaW5lcigpO1xuICAgICAgfVxuXG4gICAgICAvLyBDcmVhdGUgbmV3IHRvYXN0XG4gICAgICBUb2FzdC5fdG9hc3RzLnB1c2godGhpcyk7XG4gICAgICB2YXIgdG9hc3RFbGVtZW50ID0gdGhpcy5fY3JlYXRlVG9hc3QoKTtcbiAgICAgIHRvYXN0RWxlbWVudC5NX1RvYXN0ID0gdGhpcztcbiAgICAgIHRoaXMuZWwgPSB0b2FzdEVsZW1lbnQ7XG4gICAgICB0aGlzLiRlbCA9ICQodG9hc3RFbGVtZW50KTtcbiAgICAgIHRoaXMuX2FuaW1hdGVJbigpO1xuICAgICAgdGhpcy5fc2V0VGltZXIoKTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVG9hc3QsIFt7XG4gICAgICBrZXk6IFwiX2NyZWF0ZVRvYXN0XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBDcmVhdGUgdG9hc3QgYW5kIGFwcGVuZCBpdCB0byB0b2FzdCBjb250YWluZXJcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVUb2FzdCgpIHtcbiAgICAgICAgdmFyIHRvYXN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIHRvYXN0LmNsYXNzTGlzdC5hZGQoJ3RvYXN0Jyk7XG5cbiAgICAgICAgLy8gQWRkIGN1c3RvbSBjbGFzc2VzIG9udG8gdG9hc3RcbiAgICAgICAgaWYgKCEhdGhpcy5vcHRpb25zLmNsYXNzZXMubGVuZ3RoKSB7XG4gICAgICAgICAgJCh0b2FzdCkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmNsYXNzZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IGNvbnRlbnRcbiAgICAgICAgaWYgKHR5cGVvZiBIVE1MRWxlbWVudCA9PT0gJ29iamVjdCcgPyB0aGlzLm1lc3NhZ2UgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCA6IHRoaXMubWVzc2FnZSAmJiB0eXBlb2YgdGhpcy5tZXNzYWdlID09PSAnb2JqZWN0JyAmJiB0aGlzLm1lc3NhZ2UgIT09IG51bGwgJiYgdGhpcy5tZXNzYWdlLm5vZGVUeXBlID09PSAxICYmIHR5cGVvZiB0aGlzLm1lc3NhZ2Uubm9kZU5hbWUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgdG9hc3QuYXBwZW5kQ2hpbGQodGhpcy5tZXNzYWdlKTtcblxuICAgICAgICAgIC8vIENoZWNrIGlmIGl0IGlzIGpRdWVyeSBvYmplY3RcbiAgICAgICAgfSBlbHNlIGlmICghIXRoaXMubWVzc2FnZS5qcXVlcnkpIHtcbiAgICAgICAgICAkKHRvYXN0KS5hcHBlbmQodGhpcy5tZXNzYWdlWzBdKTtcblxuICAgICAgICAgIC8vIEluc2VydCBhcyBodG1sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRvYXN0LmlubmVySFRNTCA9IHRoaXMubWVzc2FnZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFwcGVuZCB0b2FzZnRcbiAgICAgICAgVG9hc3QuX2NvbnRhaW5lci5hcHBlbmRDaGlsZCh0b2FzdCk7XG4gICAgICAgIHJldHVybiB0b2FzdDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIGluIHRvYXN0XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUluXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbigpIHtcbiAgICAgICAgLy8gQW5pbWF0ZSB0b2FzdCBpblxuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLmVsLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZSBzZXRJbnRlcnZhbCB3aGljaCBhdXRvbWF0aWNhbGx5IHJlbW92ZXMgdG9hc3Qgd2hlbiB0aW1lUmVtYWluaW5nID49IDBcbiAgICAgICAqIGhhcyBiZWVuIHJlYWNoZWRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRUaW1lclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRUaW1lcigpIHtcbiAgICAgICAgdmFyIF90aGlzMjkgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLnRpbWVSZW1haW5pbmcgIT09IEluZmluaXR5KSB7XG4gICAgICAgICAgdGhpcy5jb3VudGVySW50ZXJ2YWwgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBJZiB0b2FzdCBpcyBub3QgYmVpbmcgZHJhZ2dlZCwgZGVjcmVhc2UgaXRzIHRpbWUgcmVtYWluaW5nXG4gICAgICAgICAgICBpZiAoIV90aGlzMjkucGFubmluZykge1xuICAgICAgICAgICAgICBfdGhpczI5LnRpbWVSZW1haW5pbmcgLT0gMjA7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIEFuaW1hdGUgdG9hc3Qgb3V0XG4gICAgICAgICAgICBpZiAoX3RoaXMyOS50aW1lUmVtYWluaW5nIDw9IDApIHtcbiAgICAgICAgICAgICAgX3RoaXMyOS5kaXNtaXNzKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSwgMjApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRGlzbWlzcyB0b2FzdCB3aXRoIGFuaW1hdGlvblxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGlzbWlzc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc21pc3MoKSB7XG4gICAgICAgIHZhciBfdGhpczMwID0gdGhpcztcblxuICAgICAgICB3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLmNvdW50ZXJJbnRlcnZhbCk7XG4gICAgICAgIHZhciBhY3RpdmF0aW9uRGlzdGFuY2UgPSB0aGlzLmVsLm9mZnNldFdpZHRoICogdGhpcy5vcHRpb25zLmFjdGl2YXRpb25QZXJjZW50O1xuXG4gICAgICAgIGlmICh0aGlzLndhc1N3aXBlZCkge1xuICAgICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNpdGlvbiA9ICd0cmFuc2Zvcm0gLjA1cywgb3BhY2l0eSAuMDVzJztcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWChcIiArIGFjdGl2YXRpb25EaXN0YW5jZSArIFwicHgpXCI7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS5vcGFjaXR5ID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsXG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICBtYXJnaW5Ub3A6IC00MCxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRFeHBvJyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gQ2FsbCB0aGUgb3B0aW9uYWwgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMzMC5vcHRpb25zLmNvbXBsZXRlQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMzMC5vcHRpb25zLmNvbXBsZXRlQ2FsbGJhY2soKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIFJlbW92ZSB0b2FzdCBmcm9tIERPTVxuICAgICAgICAgICAgX3RoaXMzMC4kZWwucmVtb3ZlKCk7XG4gICAgICAgICAgICBUb2FzdC5fdG9hc3RzLnNwbGljZShUb2FzdC5fdG9hc3RzLmluZGV4T2YoX3RoaXMzMCksIDEpO1xuICAgICAgICAgICAgaWYgKFRvYXN0Ll90b2FzdHMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgIFRvYXN0Ll9yZW1vdmVDb250YWluZXIoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1RvYXN0O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFwcGVuZCB0b2FzdCBjb250YWluZXIgYW5kIGFkZCBldmVudCBoYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2NyZWF0ZUNvbnRhaW5lclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVDb250YWluZXIoKSB7XG4gICAgICAgIHZhciBjb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgY29udGFpbmVyLnNldEF0dHJpYnV0ZSgnaWQnLCAndG9hc3QtY29udGFpbmVyJyk7XG5cbiAgICAgICAgLy8gQWRkIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBUb2FzdC5fb25EcmFnU3RhcnQpO1xuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgVG9hc3QuX29uRHJhZ01vdmUpO1xuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBUb2FzdC5fb25EcmFnRW5kKTtcblxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgVG9hc3QuX29uRHJhZ1N0YXJ0KTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgVG9hc3QuX29uRHJhZ01vdmUpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgVG9hc3QuX29uRHJhZ0VuZCk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChjb250YWluZXIpO1xuICAgICAgICBUb2FzdC5fY29udGFpbmVyID0gY29udGFpbmVyO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSB0b2FzdCBjb250YWluZXIgYW5kIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlQ29udGFpbmVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgLy8gQWRkIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgVG9hc3QuX29uRHJhZ01vdmUpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgVG9hc3QuX29uRHJhZ0VuZCk7XG5cbiAgICAgICAgJChUb2FzdC5fY29udGFpbmVyKS5yZW1vdmUoKTtcbiAgICAgICAgVG9hc3QuX2NvbnRhaW5lciA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQmVnaW4gZHJhZyBoYW5kbGVyXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfb25EcmFnU3RhcnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfb25EcmFnU3RhcnQoZSkge1xuICAgICAgICBpZiAoZS50YXJnZXQgJiYgJChlLnRhcmdldCkuY2xvc2VzdCgnLnRvYXN0JykubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyICR0b2FzdCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy50b2FzdCcpO1xuICAgICAgICAgIHZhciB0b2FzdCA9ICR0b2FzdFswXS5NX1RvYXN0O1xuICAgICAgICAgIHRvYXN0LnBhbm5pbmcgPSB0cnVlO1xuICAgICAgICAgIFRvYXN0Ll9kcmFnZ2VkVG9hc3QgPSB0b2FzdDtcbiAgICAgICAgICB0b2FzdC5lbC5jbGFzc0xpc3QuYWRkKCdwYW5uaW5nJyk7XG4gICAgICAgICAgdG9hc3QuZWwuc3R5bGUudHJhbnNpdGlvbiA9ICcnO1xuICAgICAgICAgIHRvYXN0LnN0YXJ0aW5nWFBvcyA9IFRvYXN0Ll94UG9zKGUpO1xuICAgICAgICAgIHRvYXN0LnRpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIHRvYXN0LnhQb3MgPSBUb2FzdC5feFBvcyhlKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIERyYWcgbW92ZSBoYW5kbGVyXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfb25EcmFnTW92ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRyYWdNb3ZlKGUpIHtcbiAgICAgICAgaWYgKCEhVG9hc3QuX2RyYWdnZWRUb2FzdCkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB2YXIgdG9hc3QgPSBUb2FzdC5fZHJhZ2dlZFRvYXN0O1xuICAgICAgICAgIHRvYXN0LmRlbHRhWCA9IE1hdGguYWJzKHRvYXN0LnhQb3MgLSBUb2FzdC5feFBvcyhlKSk7XG4gICAgICAgICAgdG9hc3QueFBvcyA9IFRvYXN0Ll94UG9zKGUpO1xuICAgICAgICAgIHRvYXN0LnZlbG9jaXR5WCA9IHRvYXN0LmRlbHRhWCAvIChEYXRlLm5vdygpIC0gdG9hc3QudGltZSk7XG4gICAgICAgICAgdG9hc3QudGltZSA9IERhdGUubm93KCk7XG5cbiAgICAgICAgICB2YXIgdG90YWxEZWx0YVggPSB0b2FzdC54UG9zIC0gdG9hc3Quc3RhcnRpbmdYUG9zO1xuICAgICAgICAgIHZhciBhY3RpdmF0aW9uRGlzdGFuY2UgPSB0b2FzdC5lbC5vZmZzZXRXaWR0aCAqIHRvYXN0Lm9wdGlvbnMuYWN0aXZhdGlvblBlcmNlbnQ7XG4gICAgICAgICAgdG9hc3QuZWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKFwiICsgdG90YWxEZWx0YVggKyBcInB4KVwiO1xuICAgICAgICAgIHRvYXN0LmVsLnN0eWxlLm9wYWNpdHkgPSAxIC0gTWF0aC5hYnModG90YWxEZWx0YVggLyBhY3RpdmF0aW9uRGlzdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRW5kIGRyYWcgaGFuZGxlclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX29uRHJhZ0VuZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRyYWdFbmQoKSB7XG4gICAgICAgIGlmICghIVRvYXN0Ll9kcmFnZ2VkVG9hc3QpIHtcbiAgICAgICAgICB2YXIgdG9hc3QgPSBUb2FzdC5fZHJhZ2dlZFRvYXN0O1xuICAgICAgICAgIHRvYXN0LnBhbm5pbmcgPSBmYWxzZTtcbiAgICAgICAgICB0b2FzdC5lbC5jbGFzc0xpc3QucmVtb3ZlKCdwYW5uaW5nJyk7XG5cbiAgICAgICAgICB2YXIgdG90YWxEZWx0YVggPSB0b2FzdC54UG9zIC0gdG9hc3Quc3RhcnRpbmdYUG9zO1xuICAgICAgICAgIHZhciBhY3RpdmF0aW9uRGlzdGFuY2UgPSB0b2FzdC5lbC5vZmZzZXRXaWR0aCAqIHRvYXN0Lm9wdGlvbnMuYWN0aXZhdGlvblBlcmNlbnQ7XG4gICAgICAgICAgdmFyIHNob3VsZEJlRGlzbWlzc2VkID0gTWF0aC5hYnModG90YWxEZWx0YVgpID4gYWN0aXZhdGlvbkRpc3RhbmNlIHx8IHRvYXN0LnZlbG9jaXR5WCA+IDE7XG5cbiAgICAgICAgICAvLyBSZW1vdmUgdG9hc3RcbiAgICAgICAgICBpZiAoc2hvdWxkQmVEaXNtaXNzZWQpIHtcbiAgICAgICAgICAgIHRvYXN0Lndhc1N3aXBlZCA9IHRydWU7XG4gICAgICAgICAgICB0b2FzdC5kaXNtaXNzKCk7XG5cbiAgICAgICAgICAgIC8vIEFuaW1hdGUgdG9hc3QgYmFjayB0byBvcmlnaW5hbCBwb3NpdGlvblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0b2FzdC5lbC5zdHlsZS50cmFuc2l0aW9uID0gJ3RyYW5zZm9ybSAuMnMsIG9wYWNpdHkgLjJzJztcbiAgICAgICAgICAgIHRvYXN0LmVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICAgICAgdG9hc3QuZWwuc3R5bGUub3BhY2l0eSA9ICcnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBUb2FzdC5fZHJhZ2dlZFRvYXN0ID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCB4IHBvc2l0aW9uIG9mIG1vdXNlIG9yIHRvdWNoIGV2ZW50XG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfeFBvc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF94UG9zKGUpIHtcbiAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgIH1cbiAgICAgICAgLy8gbW91c2UgZXZlbnRcbiAgICAgICAgcmV0dXJuIGUuY2xpZW50WDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgYWxsIHRvYXN0c1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGlzbWlzc0FsbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRpc21pc3NBbGwoKSB7XG4gICAgICAgIGZvciAodmFyIHRvYXN0SW5kZXggaW4gVG9hc3QuX3RvYXN0cykge1xuICAgICAgICAgIFRvYXN0Ll90b2FzdHNbdG9hc3RJbmRleF0uZGlzbWlzcygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVG9hc3Q7XG4gIH0oKTtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgVG9hc3RcbiAgICogQHR5cGUge0FycmF5LjxUb2FzdD59XG4gICAqL1xuXG5cbiAgVG9hc3QuX3RvYXN0cyA9IFtdO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBUb2FzdFxuICAgKi9cbiAgVG9hc3QuX2NvbnRhaW5lciA9IG51bGw7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFRvYXN0XG4gICAqIEB0eXBlIHtUb2FzdH1cbiAgICovXG4gIFRvYXN0Ll9kcmFnZ2VkVG9hc3QgPSBudWxsO1xuXG4gIE0uVG9hc3QgPSBUb2FzdDtcbiAgTS50b2FzdCA9IGZ1bmN0aW9uIChvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBUb2FzdChvcHRpb25zKTtcbiAgfTtcbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBlZGdlOiAnbGVmdCcsXG4gICAgZHJhZ2dhYmxlOiB0cnVlLFxuICAgIGluRHVyYXRpb246IDI1MCxcbiAgICBvdXREdXJhdGlvbjogMjAwLFxuICAgIG9uT3BlblN0YXJ0OiBudWxsLFxuICAgIG9uT3BlbkVuZDogbnVsbCxcbiAgICBvbkNsb3NlU3RhcnQ6IG51bGwsXG4gICAgb25DbG9zZUVuZDogbnVsbCxcbiAgICBwcmV2ZW50U2Nyb2xsaW5nOiB0cnVlXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKi9cblxuICB2YXIgU2lkZW5hdiA9IGZ1bmN0aW9uIChfQ29tcG9uZW50OCkge1xuICAgIF9pbmhlcml0cyhTaWRlbmF2LCBfQ29tcG9uZW50OCk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgU2lkZW5hdiBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXlcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTaWRlbmF2KGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2lkZW5hdik7XG5cbiAgICAgIHZhciBfdGhpczMxID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNpZGVuYXYuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTaWRlbmF2KSkuY2FsbCh0aGlzLCBTaWRlbmF2LCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczMxLmVsLk1fU2lkZW5hdiA9IF90aGlzMzE7XG4gICAgICBfdGhpczMxLmlkID0gX3RoaXMzMS4kZWwuYXR0cignaWQnKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgU2lkZW5hdlxuICAgICAgICogQG1lbWJlciBTaWRlbmF2I29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IFtlZGdlPSdsZWZ0J10gLSBTaWRlIG9mIHNjcmVlbiBvbiB3aGljaCBTaWRlbmF2IGFwcGVhcnNcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbZHJhZ2dhYmxlPXRydWVdIC0gQWxsb3cgc3dpcGUgZ2VzdHVyZXMgdG8gb3Blbi9jbG9zZSBTaWRlbmF2XG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaW5EdXJhdGlvbj0yNTBdIC0gTGVuZ3RoIGluIG1zIG9mIGVudGVyIHRyYW5zaXRpb25cbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtvdXREdXJhdGlvbj0yMDBdIC0gTGVuZ3RoIGluIG1zIG9mIGV4aXQgdHJhbnNpdGlvblxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHNpZGVuYXYgc3RhcnRzIGVudGVyaW5nXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIEZ1bmN0aW9uIGNhbGxlZCB3aGVuIHNpZGVuYXYgZmluaXNoZXMgZW50ZXJpbmdcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gc2lkZW5hdiBzdGFydHMgZXhpdGluZ1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlRW5kIC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gc2lkZW5hdiBmaW5pc2hlcyBleGl0aW5nXG4gICAgICAgKi9cbiAgICAgIF90aGlzMzEub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBTaWRlbmF2LmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBEZXNjcmliZXMgb3Blbi9jbG9zZSBzdGF0ZSBvZiBTaWRlbmF2XG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgX3RoaXMzMS5pc09wZW4gPSBmYWxzZTtcblxuICAgICAgLyoqXG4gICAgICAgKiBEZXNjcmliZXMgaWYgU2lkZW5hdiBpcyBmaXhlZFxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIF90aGlzMzEuaXNGaXhlZCA9IF90aGlzMzEuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdzaWRlbmF2LWZpeGVkJyk7XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIGlmIFNpZGVuYXYgaXMgYmVpbmcgZHJhZ2dlZWRcbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICBfdGhpczMxLmlzRHJhZ2dlZCA9IGZhbHNlO1xuXG4gICAgICAvLyBXaW5kb3cgc2l6ZSB2YXJpYWJsZXMgZm9yIHdpbmRvdyByZXNpemUgY2hlY2tzXG4gICAgICBfdGhpczMxLmxhc3RXaW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgX3RoaXMzMS5sYXN0V2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICBfdGhpczMxLl9jcmVhdGVPdmVybGF5KCk7XG4gICAgICBfdGhpczMxLl9jcmVhdGVEcmFnVGFyZ2V0KCk7XG4gICAgICBfdGhpczMxLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIF90aGlzMzEuX3NldHVwQ2xhc3NlcygpO1xuICAgICAgX3RoaXMzMS5fc2V0dXBGaXhlZCgpO1xuXG4gICAgICBTaWRlbmF2Ll9zaWRlbmF2cy5wdXNoKF90aGlzMzEpO1xuICAgICAgcmV0dXJuIF90aGlzMzE7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFNpZGVuYXYsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuX2VuYWJsZUJvZHlTY3JvbGxpbmcoKTtcbiAgICAgICAgdGhpcy5fb3ZlcmxheS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX292ZXJsYXkpO1xuICAgICAgICB0aGlzLmRyYWdUYXJnZXQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmRyYWdUYXJnZXQpO1xuICAgICAgICB0aGlzLmVsLk1fU2lkZW5hdiA9IHVuZGVmaW5lZDtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS50cmFuc2Zvcm0gPSAnJztcblxuICAgICAgICB2YXIgaW5kZXggPSBTaWRlbmF2Ll9zaWRlbmF2cy5pbmRleE9mKHRoaXMpO1xuICAgICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICAgIFNpZGVuYXYuX3NpZGVuYXZzLnNwbGljZShpbmRleCwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2NyZWF0ZU92ZXJsYXlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlT3ZlcmxheSgpIHtcbiAgICAgICAgdmFyIG92ZXJsYXkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdGhpcy5fY2xvc2VCb3VuZCA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAgICAgb3ZlcmxheS5jbGFzc0xpc3QuYWRkKCdzaWRlbmF2LW92ZXJsYXknKTtcblxuICAgICAgICBvdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fY2xvc2VCb3VuZCk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChvdmVybGF5KTtcbiAgICAgICAgdGhpcy5fb3ZlcmxheSA9IG92ZXJsYXk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBpZiAoU2lkZW5hdi5fc2lkZW5hdnMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVRyaWdnZXJDbGljayk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0RHJhZ0JvdW5kID0gdGhpcy5faGFuZGxlRHJhZ1RhcmdldERyYWcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRHJhZ1RhcmdldFJlbGVhc2VCb3VuZCA9IHRoaXMuX2hhbmRsZURyYWdUYXJnZXRSZWxlYXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlRHJhZ0JvdW5kID0gdGhpcy5faGFuZGxlQ2xvc2VEcmFnLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlUmVsZWFzZUJvdW5kID0gdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDbG9zZVRyaWdnZXJDbGljay5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZHJhZ1RhcmdldC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0RHJhZ0JvdW5kKTtcbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRHJhZ1RhcmdldFJlbGVhc2VCb3VuZCk7XG4gICAgICAgIHRoaXMuX292ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2xvc2VEcmFnQm91bmQpO1xuICAgICAgICB0aGlzLl9vdmVybGF5LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZUNsb3NlRHJhZ0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZUNsb3NlUmVsZWFzZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrQm91bmQpO1xuXG4gICAgICAgIC8vIEFkZCByZXNpemUgZm9yIHNpZGUgbmF2IGZpeGVkXG4gICAgICAgIGlmICh0aGlzLmlzRml4ZWQpIHtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCA9IHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgaWYgKFNpZGVuYXYuX3NpZGVuYXZzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUcmlnZ2VyQ2xpY2spO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZURyYWdUYXJnZXREcmFnQm91bmQpO1xuICAgICAgICB0aGlzLmRyYWdUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0UmVsZWFzZUJvdW5kKTtcbiAgICAgICAgdGhpcy5fb3ZlcmxheS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVDbG9zZURyYWdCb3VuZCk7XG4gICAgICAgIHRoaXMuX292ZXJsYXkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDbG9zZVJlbGVhc2VCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2xvc2VEcmFnQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xvc2VUcmlnZ2VyQ2xpY2tCb3VuZCk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIHJlc2l6ZSBmb3Igc2lkZSBuYXYgZml4ZWRcbiAgICAgICAgaWYgKHRoaXMuaXNGaXhlZCkge1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgVHJpZ2dlciBDbGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVRyaWdnZXJDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVUcmlnZ2VyQ2xpY2soZSkge1xuICAgICAgICB2YXIgJHRyaWdnZXIgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuc2lkZW5hdi10cmlnZ2VyJyk7XG4gICAgICAgIGlmIChlLnRhcmdldCAmJiAkdHJpZ2dlci5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgc2lkZW5hdklkID0gTS5nZXRJZEZyb21UcmlnZ2VyKCR0cmlnZ2VyWzBdKTtcblxuICAgICAgICAgIHZhciBzaWRlbmF2SW5zdGFuY2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzaWRlbmF2SWQpLk1fU2lkZW5hdjtcbiAgICAgICAgICBpZiAoc2lkZW5hdkluc3RhbmNlKSB7XG4gICAgICAgICAgICBzaWRlbmF2SW5zdGFuY2Uub3BlbigkdHJpZ2dlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCB2YXJpYWJsZXMgbmVlZGVkIGF0IHRoZSBiZWdnaW5pbmcgb2YgZHJhZ1xuICAgICAgICogYW5kIHN0b3AgYW55IGN1cnJlbnQgdHJhbnNpdGlvbi5cbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zdGFydERyYWdcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc3RhcnREcmFnKGUpIHtcbiAgICAgICAgdmFyIGNsaWVudFggPSBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLl9zdGFydGluZ1hwb3MgPSBjbGllbnRYO1xuICAgICAgICB0aGlzLl94UG9zID0gdGhpcy5fc3RhcnRpbmdYcG9zO1xuICAgICAgICB0aGlzLl90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgdGhpcy5fd2lkdGggPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoO1xuICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xuICAgICAgICB0aGlzLl9pbml0aWFsU2Nyb2xsVG9wID0gdGhpcy5pc09wZW4gPyB0aGlzLmVsLnNjcm9sbFRvcCA6IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKTtcbiAgICAgICAgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5fb3ZlcmxheSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IHZhcmlhYmxlcyBuZWVkZWQgYXQgZWFjaCBkcmFnIG1vdmUgdXBkYXRlIHRpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9kcmFnTW92ZVVwZGF0ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9kcmFnTW92ZVVwZGF0ZShlKSB7XG4gICAgICAgIHZhciBjbGllbnRYID0gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgIHZhciBjdXJyZW50U2Nyb2xsVG9wID0gdGhpcy5pc09wZW4gPyB0aGlzLmVsLnNjcm9sbFRvcCA6IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKTtcbiAgICAgICAgdGhpcy5kZWx0YVggPSBNYXRoLmFicyh0aGlzLl94UG9zIC0gY2xpZW50WCk7XG4gICAgICAgIHRoaXMuX3hQb3MgPSBjbGllbnRYO1xuICAgICAgICB0aGlzLnZlbG9jaXR5WCA9IHRoaXMuZGVsdGFYIC8gKERhdGUubm93KCkgLSB0aGlzLl90aW1lKTtcbiAgICAgICAgdGhpcy5fdGltZSA9IERhdGUubm93KCk7XG4gICAgICAgIGlmICh0aGlzLl9pbml0aWFsU2Nyb2xsVG9wICE9PSBjdXJyZW50U2Nyb2xsVG9wKSB7XG4gICAgICAgICAgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGVzIERyYWdnaW5nIG9mIFNpZGVuYXZcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVEcmFnVGFyZ2V0RHJhZ1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEcmFnVGFyZ2V0RHJhZyhlKSB7XG4gICAgICAgIC8vIENoZWNrIGlmIGRyYWdnYWJsZVxuICAgICAgICBpZiAoIXRoaXMub3B0aW9ucy5kcmFnZ2FibGUgfHwgdGhpcy5faXNDdXJyZW50bHlGaXhlZCgpIHx8IHRoaXMuX3ZlcnRpY2FsbHlTY3JvbGxpbmcpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJZiBub3QgYmVpbmcgZHJhZ2dlZCwgc2V0IGluaXRpYWwgZHJhZyBzdGFydCB2YXJpYWJsZXNcbiAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCkge1xuICAgICAgICAgIHRoaXMuX3N0YXJ0RHJhZyhlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJ1biB0b3VjaG1vdmUgdXBkYXRlc1xuICAgICAgICB0aGlzLl9kcmFnTW92ZVVwZGF0ZShlKTtcblxuICAgICAgICAvLyBDYWxjdWxhdGUgcmF3IGRlbHRhWFxuICAgICAgICB2YXIgdG90YWxEZWx0YVggPSB0aGlzLl94UG9zIC0gdGhpcy5fc3RhcnRpbmdYcG9zO1xuXG4gICAgICAgIC8vIGRyYWdEaXJlY3Rpb24gaXMgdGhlIGF0dGVtcHRlZCB1c2VyIGRyYWcgZGlyZWN0aW9uXG4gICAgICAgIHZhciBkcmFnRGlyZWN0aW9uID0gdG90YWxEZWx0YVggPiAwID8gJ3JpZ2h0JyA6ICdsZWZ0JztcblxuICAgICAgICAvLyBEb24ndCBhbGxvdyB0b3RhbERlbHRhWCB0byBleGNlZWQgU2lkZW5hdiB3aWR0aCBvciBiZSBkcmFnZ2VkIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAgICAgICAgdG90YWxEZWx0YVggPSBNYXRoLm1pbih0aGlzLl93aWR0aCwgTWF0aC5hYnModG90YWxEZWx0YVgpKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lZGdlID09PSBkcmFnRGlyZWN0aW9uKSB7XG4gICAgICAgICAgdG90YWxEZWx0YVggPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgLyoqXG4gICAgICAgICAqIHRyYW5zZm9ybVggaXMgdGhlIGRyYWcgZGlzcGxhY2VtZW50XG4gICAgICAgICAqIHRyYW5zZm9ybVByZWZpeCBpcyB0aGUgaW5pdGlhbCB0cmFuc2Zvcm0gcGxhY2VtZW50XG4gICAgICAgICAqIEludmVydCB2YWx1ZXMgaWYgU2lkZW5hdiBpcyByaWdodCBlZGdlXG4gICAgICAgICAqL1xuICAgICAgICB2YXIgdHJhbnNmb3JtWCA9IHRvdGFsRGVsdGFYO1xuICAgICAgICB2YXIgdHJhbnNmb3JtUHJlZml4ID0gJ3RyYW5zbGF0ZVgoLTEwMCUpJztcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lZGdlID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgdHJhbnNmb3JtUHJlZml4ID0gJ3RyYW5zbGF0ZVgoMTAwJSknO1xuICAgICAgICAgIHRyYW5zZm9ybVggPSAtdHJhbnNmb3JtWDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGN1bGF0ZSBvcGVuL2Nsb3NlIHBlcmNlbnRhZ2Ugb2Ygc2lkZW5hdiwgd2l0aCBvcGVuID0gMSBhbmQgY2xvc2UgPSAwXG4gICAgICAgIHRoaXMucGVyY2VudE9wZW4gPSBNYXRoLm1pbigxLCB0b3RhbERlbHRhWCAvIHRoaXMuX3dpZHRoKTtcblxuICAgICAgICAvLyBTZXQgdHJhbnNmb3JtIGFuZCBvcGFjaXR5IHN0eWxlc1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnRyYW5zZm9ybSA9IHRyYW5zZm9ybVByZWZpeCArIFwiIHRyYW5zbGF0ZVgoXCIgKyB0cmFuc2Zvcm1YICsgXCJweClcIjtcbiAgICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5vcGFjaXR5ID0gdGhpcy5wZXJjZW50T3BlbjtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgRHJhZyBUYXJnZXQgUmVsZWFzZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURyYWdUYXJnZXRSZWxlYXNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURyYWdUYXJnZXRSZWxlYXNlKCkge1xuICAgICAgICBpZiAodGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5wZXJjZW50T3BlbiA+IDAuMikge1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGVPdXQoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuX3ZlcnRpY2FsbHlTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDbG9zZSBEcmFnXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2xvc2VEcmFnXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsb3NlRHJhZyhlKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIC8vIENoZWNrIGlmIGRyYWdnYWJsZVxuICAgICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRyYWdnYWJsZSB8fCB0aGlzLl9pc0N1cnJlbnRseUZpeGVkKCkgfHwgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZykge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIElmIG5vdCBiZWluZyBkcmFnZ2VkLCBzZXQgaW5pdGlhbCBkcmFnIHN0YXJ0IHZhcmlhYmxlc1xuICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX3N0YXJ0RHJhZyhlKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBSdW4gdG91Y2htb3ZlIHVwZGF0ZXNcbiAgICAgICAgICB0aGlzLl9kcmFnTW92ZVVwZGF0ZShlKTtcblxuICAgICAgICAgIC8vIENhbGN1bGF0ZSByYXcgZGVsdGFYXG4gICAgICAgICAgdmFyIHRvdGFsRGVsdGFYID0gdGhpcy5feFBvcyAtIHRoaXMuX3N0YXJ0aW5nWHBvcztcblxuICAgICAgICAgIC8vIGRyYWdEaXJlY3Rpb24gaXMgdGhlIGF0dGVtcHRlZCB1c2VyIGRyYWcgZGlyZWN0aW9uXG4gICAgICAgICAgdmFyIGRyYWdEaXJlY3Rpb24gPSB0b3RhbERlbHRhWCA+IDAgPyAncmlnaHQnIDogJ2xlZnQnO1xuXG4gICAgICAgICAgLy8gRG9uJ3QgYWxsb3cgdG90YWxEZWx0YVggdG8gZXhjZWVkIFNpZGVuYXYgd2lkdGggb3IgYmUgZHJhZ2dlZCBpbiB0aGUgb3Bwb3NpdGUgZGlyZWN0aW9uXG4gICAgICAgICAgdG90YWxEZWx0YVggPSBNYXRoLm1pbih0aGlzLl93aWR0aCwgTWF0aC5hYnModG90YWxEZWx0YVgpKTtcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgIT09IGRyYWdEaXJlY3Rpb24pIHtcbiAgICAgICAgICAgIHRvdGFsRGVsdGFYID0gMDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgdHJhbnNmb3JtWCA9IC10b3RhbERlbHRhWDtcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICAgIHRyYW5zZm9ybVggPSAtdHJhbnNmb3JtWDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBDYWxjdWxhdGUgb3Blbi9jbG9zZSBwZXJjZW50YWdlIG9mIHNpZGVuYXYsIHdpdGggb3BlbiA9IDEgYW5kIGNsb3NlID0gMFxuICAgICAgICAgIHRoaXMucGVyY2VudE9wZW4gPSBNYXRoLm1pbigxLCAxIC0gdG90YWxEZWx0YVggLyB0aGlzLl93aWR0aCk7XG5cbiAgICAgICAgICAvLyBTZXQgdHJhbnNmb3JtIGFuZCBvcGFjaXR5IHN0eWxlc1xuICAgICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKFwiICsgdHJhbnNmb3JtWCArIFwicHgpXCI7XG4gICAgICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5vcGFjaXR5ID0gdGhpcy5wZXJjZW50T3BlbjtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDbG9zZSBSZWxlYXNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2xvc2VSZWxlYXNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsb3NlUmVsZWFzZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuICYmIHRoaXMuaXNEcmFnZ2VkKSB7XG4gICAgICAgICAgaWYgKHRoaXMucGVyY2VudE9wZW4gPiAwLjgpIHtcbiAgICAgICAgICAgIHRoaXMuX2FuaW1hdGVJbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy5pc0RyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLl92ZXJ0aWNhbGx5U2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGVzIGNsb3Npbmcgb2YgU2lkZW5hdiB3aGVuIGVsZW1lbnQgd2l0aCBjbGFzcyAuc2lkZW5hdi1jbG9zZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrKGUpIHtcbiAgICAgICAgdmFyICRjbG9zZVRyaWdnZXIgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuc2lkZW5hdi1jbG9zZScpO1xuICAgICAgICBpZiAoJGNsb3NlVHJpZ2dlci5sZW5ndGggJiYgIXRoaXMuX2lzQ3VycmVudGx5Rml4ZWQoKSkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBXaW5kb3cgUmVzaXplXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlV2luZG93UmVzaXplXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVdpbmRvd1Jlc2l6ZSgpIHtcbiAgICAgICAgLy8gT25seSBoYW5kbGUgaG9yaXpvbnRhbCByZXNpemVzXG4gICAgICAgIGlmICh0aGlzLmxhc3RXaW5kb3dXaWR0aCAhPT0gd2luZG93LmlubmVyV2lkdGgpIHtcbiAgICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiA5OTIpIHtcbiAgICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5sYXN0V2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy5sYXN0V2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBDbGFzc2VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwQ2xhc3NlcygpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5lZGdlID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdyaWdodC1hbGlnbmVkJyk7XG4gICAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LmNsYXNzTGlzdC5hZGQoJ3JpZ2h0LWFsaWduZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlQ2xhc3Nlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVDbGFzc2VzKCkge1xuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3JpZ2h0LWFsaWduZWQnKTtcbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LmNsYXNzTGlzdC5yZW1vdmUoJ3JpZ2h0LWFsaWduZWQnKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRml4ZWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBGaXhlZCgpIHtcbiAgICAgICAgaWYgKHRoaXMuX2lzQ3VycmVudGx5Rml4ZWQoKSkge1xuICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9pc0N1cnJlbnRseUZpeGVkXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzQ3VycmVudGx5Rml4ZWQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLmlzRml4ZWQgJiYgd2luZG93LmlubmVyV2lkdGggPiA5OTI7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jcmVhdGVEcmFnVGFyZ2V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZURyYWdUYXJnZXQoKSB7XG4gICAgICAgIHZhciBkcmFnVGFyZ2V0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgIGRyYWdUYXJnZXQuY2xhc3NMaXN0LmFkZCgnZHJhZy10YXJnZXQnKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChkcmFnVGFyZ2V0KTtcbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0ID0gZHJhZ1RhcmdldDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3ByZXZlbnRCb2R5U2Nyb2xsaW5nXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3ByZXZlbnRCb2R5U2Nyb2xsaW5nKCkge1xuICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2VuYWJsZUJvZHlTY3JvbGxpbmdcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZW5hYmxlQm9keVNjcm9sbGluZygpIHtcbiAgICAgICAgdmFyIGJvZHkgPSBkb2N1bWVudC5ib2R5O1xuICAgICAgICBib2R5LnN0eWxlLm92ZXJmbG93ID0gJyc7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4gPT09IHRydWUpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG5cbiAgICAgICAgLy8gUnVuIG9uT3BlblN0YXJ0IGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uT3BlblN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uT3BlblN0YXJ0LmNhbGwodGhpcywgdGhpcy5lbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgZml4ZWQgU2lkZW5hdlxuICAgICAgICBpZiAodGhpcy5faXNDdXJyZW50bHlGaXhlZCgpKSB7XG4gICAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5lbCk7XG4gICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLmVsLFxuICAgICAgICAgICAgdHJhbnNsYXRlWDogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fZW5hYmxlQm9keVNjcm9sbGluZygpO1xuICAgICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcblxuICAgICAgICAgIC8vIEhhbmRsZSBub24tZml4ZWQgU2lkZW5hdlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJldmVudFNjcm9sbGluZykge1xuICAgICAgICAgICAgdGhpcy5fcHJldmVudEJvZHlTY3JvbGxpbmcoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2VkIHx8IHRoaXMucGVyY2VudE9wZW4gIT0gMSkge1xuICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZUluKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3BlbiA9PT0gZmFsc2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuXG4gICAgICAgIC8vIFJ1biBvbkNsb3NlU3RhcnQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIGZpeGVkIFNpZGVuYXZcbiAgICAgICAgaWYgKHRoaXMuX2lzQ3VycmVudGx5Rml4ZWQoKSkge1xuICAgICAgICAgIHZhciB0cmFuc2Zvcm1YID0gdGhpcy5vcHRpb25zLmVkZ2UgPT09ICdsZWZ0JyA/ICctMTA1JScgOiAnMTA1JSc7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoXCIgKyB0cmFuc2Zvcm1YICsgXCIpXCI7XG5cbiAgICAgICAgICAvLyBIYW5kbGUgbm9uLWZpeGVkIFNpZGVuYXZcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9lbmFibGVCb2R5U2Nyb2xsaW5nKCk7XG5cbiAgICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2VkIHx8IHRoaXMucGVyY2VudE9wZW4gIT0gMCkge1xuICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZU91dCgpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluKCkge1xuICAgICAgICB0aGlzLl9hbmltYXRlU2lkZW5hdkluKCk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGVPdmVybGF5SW4oKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVTaWRlbmF2SW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZVNpZGVuYXZJbigpIHtcbiAgICAgICAgdmFyIF90aGlzMzIgPSB0aGlzO1xuXG4gICAgICAgIHZhciBzbGlkZU91dFBlcmNlbnQgPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gLTEgOiAxO1xuICAgICAgICBpZiAodGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICBzbGlkZU91dFBlcmNlbnQgPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gc2xpZGVPdXRQZXJjZW50ICsgdGhpcy5wZXJjZW50T3BlbiA6IHNsaWRlT3V0UGVyY2VudCAtIHRoaXMucGVyY2VudE9wZW47XG4gICAgICAgIH1cblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCxcbiAgICAgICAgICB0cmFuc2xhdGVYOiBbc2xpZGVPdXRQZXJjZW50ICogMTAwICsgXCIlXCIsIDBdLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuaW5EdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFJ1biBvbk9wZW5FbmQgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMzMi5vcHRpb25zLm9uT3BlbkVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczMyLm9wdGlvbnMub25PcGVuRW5kLmNhbGwoX3RoaXMzMiwgX3RoaXMzMi5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVPdmVybGF5SW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU92ZXJsYXlJbigpIHtcbiAgICAgICAgdmFyIHN0YXJ0ID0gMDtcbiAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2VkKSB7XG4gICAgICAgICAgc3RhcnQgPSB0aGlzLnBlcmNlbnRPcGVuO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICQodGhpcy5fb3ZlcmxheSkuY3NzKHtcbiAgICAgICAgICAgIGRpc3BsYXk6ICdibG9jaydcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuX292ZXJsYXkpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLl9vdmVybGF5LFxuICAgICAgICAgIG9wYWNpdHk6IFtzdGFydCwgMV0sXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVPdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU91dCgpIHtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZVNpZGVuYXZPdXQoKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZU92ZXJsYXlPdXQoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVTaWRlbmF2T3V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVTaWRlbmF2T3V0KCkge1xuICAgICAgICB2YXIgX3RoaXMzMyA9IHRoaXM7XG5cbiAgICAgICAgdmFyIGVuZFBlcmNlbnQgPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gLTEgOiAxO1xuICAgICAgICB2YXIgc2xpZGVPdXRQZXJjZW50ID0gMDtcbiAgICAgICAgaWYgKHRoaXMuaXNEcmFnZ2VkKSB7XG4gICAgICAgICAgc2xpZGVPdXRQZXJjZW50ID0gdGhpcy5vcHRpb25zLmVkZ2UgPT09ICdsZWZ0JyA/IGVuZFBlcmNlbnQgKyB0aGlzLnBlcmNlbnRPcGVuIDogZW5kUGVyY2VudCAtIHRoaXMucGVyY2VudE9wZW47XG4gICAgICAgIH1cblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCxcbiAgICAgICAgICB0cmFuc2xhdGVYOiBbc2xpZGVPdXRQZXJjZW50ICogMTAwICsgXCIlXCIsIGVuZFBlcmNlbnQgKiAxMDUgKyBcIiVcIl0sXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIFJ1biBvbk9wZW5FbmQgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMzMy5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMzMy5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczMzLCBfdGhpczMzLmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZU92ZXJsYXlPdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU92ZXJsYXlPdXQoKSB7XG4gICAgICAgIHZhciBfdGhpczM0ID0gdGhpcztcblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLl9vdmVybGF5KTtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5fb3ZlcmxheSxcbiAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAkKF90aGlzMzQuX292ZXJsYXkpLmNzcygnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoU2lkZW5hdi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNpZGVuYXYpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9TaWRlbmF2O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNpZGVuYXY7XG4gIH0oQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgU2lkZW5hdlxuICAgKiBAdHlwZSB7QXJyYXkuPFNpZGVuYXY+fVxuICAgKi9cblxuXG4gIFNpZGVuYXYuX3NpZGVuYXZzID0gW107XG5cbiAgTS5TaWRlbmF2ID0gU2lkZW5hdjtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFNpZGVuYXYsICdzaWRlbmF2JywgJ01fU2lkZW5hdicpO1xuICB9XG59KShjYXNoLCBNLmFuaW1lKTtcbjsoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgdGhyb3R0bGU6IDEwMCxcbiAgICBzY3JvbGxPZmZzZXQ6IDIwMCwgLy8gb2Zmc2V0IC0gMjAwIGFsbG93cyBlbGVtZW50cyBuZWFyIGJvdHRvbSBvZiBwYWdlIHRvIHNjcm9sbFxuICAgIGFjdGl2ZUNsYXNzOiAnYWN0aXZlJyxcbiAgICBnZXRBY3RpdmVFbGVtZW50OiBmdW5jdGlvbiAoaWQpIHtcbiAgICAgIHJldHVybiAnYVtocmVmPVwiIycgKyBpZCArICdcIl0nO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBTY3JvbGxTcHkgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDkpIHtcbiAgICBfaW5oZXJpdHMoU2Nyb2xsU3B5LCBfQ29tcG9uZW50OSk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgU2Nyb2xsU3B5IGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2Nyb2xsU3B5KGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2Nyb2xsU3B5KTtcblxuICAgICAgdmFyIF90aGlzMzUgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2Nyb2xsU3B5Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2Nyb2xsU3B5KSkuY2FsbCh0aGlzLCBTY3JvbGxTcHksIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzMzUuZWwuTV9TY3JvbGxTcHkgPSBfdGhpczM1O1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbFxuICAgICAgICogQG1lbWJlciBNb2RhbCNvcHRpb25zXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbdGhyb3R0bGU9MTAwXSAtIFRocm90dGxlIG9mIHNjcm9sbCBoYW5kbGVyXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbc2Nyb2xsT2Zmc2V0PTIwMF0gLSBPZmZzZXQgZm9yIGNlbnRlcmluZyBlbGVtZW50IHdoZW4gc2Nyb2xsZWQgdG9cbiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IFthY3RpdmVDbGFzcz0nYWN0aXZlJ10gLSBDbGFzcyBhcHBsaWVkIHRvIGFjdGl2ZSBlbGVtZW50c1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBbZ2V0QWN0aXZlRWxlbWVudF0gLSBVc2VkIHRvIGZpbmQgYWN0aXZlIGVsZW1lbnRcbiAgICAgICAqL1xuICAgICAgX3RoaXMzNS5vcHRpb25zID0gJC5leHRlbmQoe30sIFNjcm9sbFNweS5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIHNldHVwXG4gICAgICBTY3JvbGxTcHkuX2VsZW1lbnRzLnB1c2goX3RoaXMzNSk7XG4gICAgICBTY3JvbGxTcHkuX2NvdW50Kys7XG4gICAgICBTY3JvbGxTcHkuX2luY3JlbWVudCsrO1xuICAgICAgX3RoaXMzNS50aWNrSWQgPSAtMTtcbiAgICAgIF90aGlzMzUuaWQgPSBTY3JvbGxTcHkuX2luY3JlbWVudDtcbiAgICAgIF90aGlzMzUuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgX3RoaXMzNS5faGFuZGxlV2luZG93U2Nyb2xsKCk7XG4gICAgICByZXR1cm4gX3RoaXMzNTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2Nyb2xsU3B5LCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgU2Nyb2xsU3B5Ll9lbGVtZW50cy5zcGxpY2UoU2Nyb2xsU3B5Ll9lbGVtZW50cy5pbmRleE9mKHRoaXMpLCAxKTtcbiAgICAgICAgU2Nyb2xsU3B5Ll9lbGVtZW50c0luVmlldy5zcGxpY2UoU2Nyb2xsU3B5Ll9lbGVtZW50c0luVmlldy5pbmRleE9mKHRoaXMpLCAxKTtcbiAgICAgICAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMuc3BsaWNlKFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLmluZGV4T2YodGhpcy4kZWwpLCAxKTtcbiAgICAgICAgU2Nyb2xsU3B5Ll9jb3VudC0tO1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgICQodGhpcy5vcHRpb25zLmdldEFjdGl2ZUVsZW1lbnQodGhpcy4kZWwuYXR0cignaWQnKSkpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG4gICAgICAgIHRoaXMuZWwuTV9TY3JvbGxTcHkgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB2YXIgdGhyb3R0bGVkUmVzaXplID0gTS50aHJvdHRsZSh0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGwsIDIwMCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kID0gdGhyb3R0bGVkUmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kID0gdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsLmJpbmQodGhpcyk7XG4gICAgICAgIGlmIChTY3JvbGxTcHkuX2NvdW50ID09PSAxKSB7XG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kKTtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQpO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUcmlnZ2VyQ2xpY2spO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBpZiAoU2Nyb2xsU3B5Ll9jb3VudCA9PT0gMCkge1xuICAgICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGxCb3VuZCk7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kKTtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVHJpZ2dlckNsaWNrKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBUcmlnZ2VyIENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlVHJpZ2dlckNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRyaWdnZXJDbGljayhlKSB7XG4gICAgICAgIHZhciAkdHJpZ2dlciA9ICQoZS50YXJnZXQpO1xuICAgICAgICBmb3IgKHZhciBpID0gU2Nyb2xsU3B5Ll9lbGVtZW50cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgIHZhciBzY3JvbGxzcHkgPSBTY3JvbGxTcHkuX2VsZW1lbnRzW2ldO1xuICAgICAgICAgIGlmICgkdHJpZ2dlci5pcygnYVtocmVmPVwiIycgKyBzY3JvbGxzcHkuJGVsLmF0dHIoJ2lkJykgKyAnXCJdJykpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHZhciBvZmZzZXQgPSBzY3JvbGxzcHkuJGVsLm9mZnNldCgpLnRvcCArIDE7XG5cbiAgICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgICB0YXJnZXRzOiBbZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LCBkb2N1bWVudC5ib2R5XSxcbiAgICAgICAgICAgICAgc2Nyb2xsVG9wOiBvZmZzZXQgLSBzY3JvbGxzcHkub3B0aW9ucy5zY3JvbGxPZmZzZXQsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiA0MDAsXG4gICAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFdpbmRvdyBTY3JvbGxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVXaW5kb3dTY3JvbGxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93U2Nyb2xsKCkge1xuICAgICAgICAvLyB1bmlxdWUgdGljayBpZFxuICAgICAgICBTY3JvbGxTcHkuX3RpY2tzKys7XG5cbiAgICAgICAgLy8gdmlld3BvcnQgcmVjdGFuZ2xlXG4gICAgICAgIHZhciB0b3AgPSBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCksXG4gICAgICAgICAgICBsZWZ0ID0gTS5nZXREb2N1bWVudFNjcm9sbExlZnQoKSxcbiAgICAgICAgICAgIHJpZ2h0ID0gbGVmdCArIHdpbmRvdy5pbm5lcldpZHRoLFxuICAgICAgICAgICAgYm90dG9tID0gdG9wICsgd2luZG93LmlubmVySGVpZ2h0O1xuXG4gICAgICAgIC8vIGRldGVybWluZSB3aGljaCBlbGVtZW50cyBhcmUgaW4gdmlld1xuICAgICAgICB2YXIgaW50ZXJzZWN0aW9ucyA9IFNjcm9sbFNweS5fZmluZEVsZW1lbnRzKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaW50ZXJzZWN0aW9ucy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBzY3JvbGxzcHkgPSBpbnRlcnNlY3Rpb25zW2ldO1xuICAgICAgICAgIHZhciBsYXN0VGljayA9IHNjcm9sbHNweS50aWNrSWQ7XG4gICAgICAgICAgaWYgKGxhc3RUaWNrIDwgMCkge1xuICAgICAgICAgICAgLy8gZW50ZXJlZCBpbnRvIHZpZXdcbiAgICAgICAgICAgIHNjcm9sbHNweS5fZW50ZXIoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyB1cGRhdGUgdGljayBpZFxuICAgICAgICAgIHNjcm9sbHNweS50aWNrSWQgPSBTY3JvbGxTcHkuX3RpY2tzO1xuICAgICAgICB9XG5cbiAgICAgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IFNjcm9sbFNweS5fZWxlbWVudHNJblZpZXcubGVuZ3RoOyBfaSsrKSB7XG4gICAgICAgICAgdmFyIF9zY3JvbGxzcHkgPSBTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3W19pXTtcbiAgICAgICAgICB2YXIgX2xhc3RUaWNrID0gX3Njcm9sbHNweS50aWNrSWQ7XG4gICAgICAgICAgaWYgKF9sYXN0VGljayA+PSAwICYmIF9sYXN0VGljayAhPT0gU2Nyb2xsU3B5Ll90aWNrcykge1xuICAgICAgICAgICAgLy8gZXhpdGVkIGZyb20gdmlld1xuICAgICAgICAgICAgX3Njcm9sbHNweS5fZXhpdCgpO1xuICAgICAgICAgICAgX3Njcm9sbHNweS50aWNrSWQgPSAtMTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyByZW1lbWJlciBlbGVtZW50cyBpbiB2aWV3IGZvciBuZXh0IHRpY2tcbiAgICAgICAgU2Nyb2xsU3B5Ll9lbGVtZW50c0luVmlldyA9IGludGVyc2VjdGlvbnM7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRmluZCBlbGVtZW50cyB0aGF0IGFyZSB3aXRoaW4gdGhlIGJvdW5kYXJ5XG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gdG9wXG4gICAgICAgKiBAcGFyYW0ge251bWJlcn0gcmlnaHRcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBib3R0b21cbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsZWZ0XG4gICAgICAgKiBAcmV0dXJuIHtBcnJheS48U2Nyb2xsU3B5Pn0gICBBIGNvbGxlY3Rpb24gb2YgZWxlbWVudHNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9lbnRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9lbnRlcigpIHtcbiAgICAgICAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMgPSBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgcmV0dXJuIHZhbHVlLmhlaWdodCgpICE9IDA7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXSkge1xuICAgICAgICAgICQodGhpcy5vcHRpb25zLmdldEFjdGl2ZUVsZW1lbnQoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF0uYXR0cignaWQnKSkpLnJlbW92ZUNsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG4gICAgICAgICAgaWYgKFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdWzBdLk1fU2Nyb2xsU3B5ICYmIHRoaXMuaWQgPCBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXVswXS5NX1Njcm9sbFNweS5pZCkge1xuICAgICAgICAgICAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMudW5zaGlmdCh0aGlzLiRlbCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLnB1c2godGhpcy4kZWwpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cy5wdXNoKHRoaXMuJGVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgICQodGhpcy5vcHRpb25zLmdldEFjdGl2ZUVsZW1lbnQoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF0uYXR0cignaWQnKSkpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9leGl0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2V4aXQoKSB7XG4gICAgICAgIHZhciBfdGhpczM2ID0gdGhpcztcblxuICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cyA9IFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuaGVpZ2h0KCkgIT0gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdKSB7XG4gICAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXS5hdHRyKCdpZCcpKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcblxuICAgICAgICAgIFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzID0gU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgcmV0dXJuIGVsLmF0dHIoJ2lkJykgIT0gX3RoaXMzNi4kZWwuYXR0cignaWQnKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF0pIHtcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGVtcHR5XG4gICAgICAgICAgICAkKHRoaXMub3B0aW9ucy5nZXRBY3RpdmVFbGVtZW50KFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdLmF0dHIoJ2lkJykpKS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChTY3JvbGxTcHkuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTY3JvbGxTcHkpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9TY3JvbGxTcHk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9maW5kRWxlbWVudHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZmluZEVsZW1lbnRzKHRvcCwgcmlnaHQsIGJvdHRvbSwgbGVmdCkge1xuICAgICAgICB2YXIgaGl0cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFNjcm9sbFNweS5fZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgc2Nyb2xsc3B5ID0gU2Nyb2xsU3B5Ll9lbGVtZW50c1tpXTtcbiAgICAgICAgICB2YXIgY3VyclRvcCA9IHRvcCArIHNjcm9sbHNweS5vcHRpb25zLnNjcm9sbE9mZnNldCB8fCAyMDA7XG5cbiAgICAgICAgICBpZiAoc2Nyb2xsc3B5LiRlbC5oZWlnaHQoKSA+IDApIHtcbiAgICAgICAgICAgIHZhciBlbFRvcCA9IHNjcm9sbHNweS4kZWwub2Zmc2V0KCkudG9wLFxuICAgICAgICAgICAgICAgIGVsTGVmdCA9IHNjcm9sbHNweS4kZWwub2Zmc2V0KCkubGVmdCxcbiAgICAgICAgICAgICAgICBlbFJpZ2h0ID0gZWxMZWZ0ICsgc2Nyb2xsc3B5LiRlbC53aWR0aCgpLFxuICAgICAgICAgICAgICAgIGVsQm90dG9tID0gZWxUb3AgKyBzY3JvbGxzcHkuJGVsLmhlaWdodCgpO1xuXG4gICAgICAgICAgICB2YXIgaXNJbnRlcnNlY3QgPSAhKGVsTGVmdCA+IHJpZ2h0IHx8IGVsUmlnaHQgPCBsZWZ0IHx8IGVsVG9wID4gYm90dG9tIHx8IGVsQm90dG9tIDwgY3VyclRvcCk7XG5cbiAgICAgICAgICAgIGlmIChpc0ludGVyc2VjdCkge1xuICAgICAgICAgICAgICBoaXRzLnB1c2goc2Nyb2xsc3B5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGhpdHM7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2Nyb2xsU3B5O1xuICB9KENvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFNjcm9sbFNweVxuICAgKiBAdHlwZSB7QXJyYXkuPFNjcm9sbFNweT59XG4gICAqL1xuXG5cbiAgU2Nyb2xsU3B5Ll9lbGVtZW50cyA9IFtdO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBTY3JvbGxTcHlcbiAgICogQHR5cGUge0FycmF5LjxTY3JvbGxTcHk+fVxuICAgKi9cbiAgU2Nyb2xsU3B5Ll9lbGVtZW50c0luVmlldyA9IFtdO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBTY3JvbGxTcHlcbiAgICogQHR5cGUge0FycmF5LjxjYXNoPn1cbiAgICovXG4gIFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzID0gW107XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFNjcm9sbFNweVxuICAgKi9cbiAgU2Nyb2xsU3B5Ll9jb3VudCA9IDA7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFNjcm9sbFNweVxuICAgKi9cbiAgU2Nyb2xsU3B5Ll9pbmNyZW1lbnQgPSAwO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBTY3JvbGxTcHlcbiAgICovXG4gIFNjcm9sbFNweS5fdGlja3MgPSAwO1xuXG4gIE0uU2Nyb2xsU3B5ID0gU2Nyb2xsU3B5O1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoU2Nyb2xsU3B5LCAnc2Nyb2xsU3B5JywgJ01fU2Nyb2xsU3B5Jyk7XG4gIH1cbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBkYXRhOiB7fSwgLy8gQXV0b2NvbXBsZXRlIGRhdGEgc2V0XG4gICAgbGltaXQ6IEluZmluaXR5LCAvLyBMaW1pdCBvZiByZXN1bHRzIHRoZSBhdXRvY29tcGxldGUgc2hvd3NcbiAgICBvbkF1dG9jb21wbGV0ZTogbnVsbCwgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gYXV0b2NvbXBsZXRlZFxuICAgIG1pbkxlbmd0aDogMSwgLy8gTWluIGNoYXJhY3RlcnMgYmVmb3JlIGF1dG9jb21wbGV0ZSBzdGFydHNcbiAgICBzb3J0RnVuY3Rpb246IGZ1bmN0aW9uIChhLCBiLCBpbnB1dFN0cmluZykge1xuICAgICAgLy8gU29ydCBmdW5jdGlvbiBmb3Igc29ydGluZyBhdXRvY29tcGxldGUgcmVzdWx0c1xuICAgICAgcmV0dXJuIGEuaW5kZXhPZihpbnB1dFN0cmluZykgLSBiLmluZGV4T2YoaW5wdXRTdHJpbmcpO1xuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBBdXRvY29tcGxldGUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDEwKSB7XG4gICAgX2luaGVyaXRzKEF1dG9jb21wbGV0ZSwgX0NvbXBvbmVudDEwKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBBdXRvY29tcGxldGUgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBBdXRvY29tcGxldGUoZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBdXRvY29tcGxldGUpO1xuXG4gICAgICB2YXIgX3RoaXMzNyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChBdXRvY29tcGxldGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihBdXRvY29tcGxldGUpKS5jYWxsKHRoaXMsIEF1dG9jb21wbGV0ZSwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXMzNy5lbC5NX0F1dG9jb21wbGV0ZSA9IF90aGlzMzc7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIGF1dG9jb21wbGV0ZVxuICAgICAgICogQG1lbWJlciBBdXRvY29tcGxldGUjb3B0aW9uc1xuICAgICAgICogQHByb3Age051bWJlcn0gZHVyYXRpb25cbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGRpc3RcbiAgICAgICAqIEBwcm9wIHtudW1iZXJ9IHNoaWZ0XG4gICAgICAgKiBAcHJvcCB7bnVtYmVyfSBwYWRkaW5nXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gZnVsbFdpZHRoXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gaW5kaWNhdG9yc1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IG5vV3JhcFxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkN5Y2xlVG9cbiAgICAgICAqL1xuICAgICAgX3RoaXMzNy5vcHRpb25zID0gJC5leHRlbmQoe30sIEF1dG9jb21wbGV0ZS5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFNldHVwXG4gICAgICBfdGhpczM3LmlzT3BlbiA9IGZhbHNlO1xuICAgICAgX3RoaXMzNy5jb3VudCA9IDA7XG4gICAgICBfdGhpczM3LmFjdGl2ZUluZGV4ID0gLTE7XG4gICAgICBfdGhpczM3Lm9sZFZhbDtcbiAgICAgIF90aGlzMzcuJGlucHV0RmllbGQgPSBfdGhpczM3LiRlbC5jbG9zZXN0KCcuaW5wdXQtZmllbGQnKTtcbiAgICAgIF90aGlzMzcuJGFjdGl2ZSA9ICQoKTtcbiAgICAgIF90aGlzMzcuX21vdXNlZG93biA9IGZhbHNlO1xuICAgICAgX3RoaXMzNy5fc2V0dXBEcm9wZG93bigpO1xuXG4gICAgICBfdGhpczM3Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczM3O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhBdXRvY29tcGxldGUsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZURyb3Bkb3duKCk7XG4gICAgICAgIHRoaXMuZWwuTV9BdXRvY29tcGxldGUgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEJsdXJCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0Qmx1ci5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEtleXVwQW5kRm9jdXNCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1cy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnRCb3VuZCA9IHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kQm91bmQgPSB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmQuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVJbnB1dEJsdXJCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVJbnB1dEtleXVwQW5kRm9jdXNCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVJbnB1dEtleXVwQW5kRm9jdXNCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnRCb3VuZCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmRCb3VuZCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cub250b3VjaHN0YXJ0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0Qm91bmQpO1xuICAgICAgICAgIHRoaXMuY29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVJbnB1dEJsdXJCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5dXAnLCB0aGlzLl9oYW5kbGVJbnB1dEtleXVwQW5kRm9jdXNCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVJbnB1dEtleXVwQW5kRm9jdXNCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnRCb3VuZCk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmRCb3VuZCk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cub250b3VjaHN0YXJ0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0Qm91bmQpO1xuICAgICAgICAgIHRoaXMuY29udGFpbmVyLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgZHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cERyb3Bkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRHJvcGRvd24oKSB7XG4gICAgICAgIHZhciBfdGhpczM4ID0gdGhpcztcblxuICAgICAgICB0aGlzLmNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIHRoaXMuY29udGFpbmVyLmlkID0gXCJhdXRvY29tcGxldGUtb3B0aW9ucy1cIiArIE0uZ3VpZCgpO1xuICAgICAgICAkKHRoaXMuY29udGFpbmVyKS5hZGRDbGFzcygnYXV0b2NvbXBsZXRlLWNvbnRlbnQgZHJvcGRvd24tY29udGVudCcpO1xuICAgICAgICB0aGlzLiRpbnB1dEZpZWxkLmFwcGVuZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICAgIHRoaXMuZWwuc2V0QXR0cmlidXRlKCdkYXRhLXRhcmdldCcsIHRoaXMuY29udGFpbmVyLmlkKTtcblxuICAgICAgICB0aGlzLmRyb3Bkb3duID0gTS5Ecm9wZG93bi5pbml0KHRoaXMuZWwsIHtcbiAgICAgICAgICBhdXRvRm9jdXM6IGZhbHNlLFxuICAgICAgICAgIGNsb3NlT25DbGljazogZmFsc2UsXG4gICAgICAgICAgY292ZXJUcmlnZ2VyOiBmYWxzZSxcbiAgICAgICAgICBvbkl0ZW1DbGljazogZnVuY3Rpb24gKGl0ZW1FbCkge1xuICAgICAgICAgICAgX3RoaXMzOC5zZWxlY3RPcHRpb24oJChpdGVtRWwpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNrZXRjaHkgcmVtb3ZhbCBvZiBkcm9wZG93biBjbGljayBoYW5kbGVyXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLmRyb3Bkb3duLl9oYW5kbGVDbGlja0JvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgZHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVEcm9wZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVEcm9wZG93bigpIHtcbiAgICAgICAgdGhpcy5jb250YWluZXIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGlzLmNvbnRhaW5lcik7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIElucHV0IEJsdXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dEJsdXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRCbHVyKCkge1xuICAgICAgICBpZiAoIXRoaXMuX21vdXNlZG93bikge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICB0aGlzLl9yZXNldEF1dG9jb21wbGV0ZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIElucHV0IEtleXVwIGFuZCBGb2N1c1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEtleXVwQW5kRm9jdXMoZSkge1xuICAgICAgICBpZiAoZS50eXBlID09PSAna2V5dXAnKSB7XG4gICAgICAgICAgQXV0b2NvbXBsZXRlLl9rZXlkb3duID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmNvdW50ID0gMDtcbiAgICAgICAgdmFyIHZhbCA9IHRoaXMuZWwudmFsdWUudG9Mb3dlckNhc2UoKTtcblxuICAgICAgICAvLyBEb24ndCBjYXB0dXJlIGVudGVyIG9yIGFycm93IGtleSB1c2FnZS5cbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMgfHwgZS5rZXlDb2RlID09PSAzOCB8fCBlLmtleUNvZGUgPT09IDQwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgaWYgdGhlIGlucHV0IGlzbid0IGVtcHR5XG4gICAgICAgIC8vIENoZWNrIGlmIGZvY3VzIHRyaWdnZXJlZCBieSB0YWJcbiAgICAgICAgaWYgKHRoaXMub2xkVmFsICE9PSB2YWwgJiYgKE0udGFiUHJlc3NlZCB8fCBlLnR5cGUgIT09ICdmb2N1cycpKSB7XG4gICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVcGRhdGUgb2xkVmFsXG4gICAgICAgIHRoaXMub2xkVmFsID0gdmFsO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBJbnB1dCBLZXlkb3duXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRLZXlkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0S2V5ZG93bihlKSB7XG4gICAgICAgIEF1dG9jb21wbGV0ZS5fa2V5ZG93biA9IHRydWU7XG5cbiAgICAgICAgLy8gQXJyb3cga2V5cyBhbmQgZW50ZXIga2V5IHVzYWdlXG4gICAgICAgIHZhciBrZXlDb2RlID0gZS5rZXlDb2RlLFxuICAgICAgICAgICAgbGlFbGVtZW50ID0gdm9pZCAwLFxuICAgICAgICAgICAgbnVtSXRlbXMgPSAkKHRoaXMuY29udGFpbmVyKS5jaGlsZHJlbignbGknKS5sZW5ndGg7XG5cbiAgICAgICAgLy8gc2VsZWN0IGVsZW1lbnQgb24gRW50ZXJcbiAgICAgICAgaWYgKGtleUNvZGUgPT09IE0ua2V5cy5FTlRFUiAmJiB0aGlzLmFjdGl2ZUluZGV4ID49IDApIHtcbiAgICAgICAgICBsaUVsZW1lbnQgPSAkKHRoaXMuY29udGFpbmVyKS5jaGlsZHJlbignbGknKS5lcSh0aGlzLmFjdGl2ZUluZGV4KTtcbiAgICAgICAgICBpZiAobGlFbGVtZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5zZWxlY3RPcHRpb24obGlFbGVtZW50KTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FwdHVyZSB1cCBhbmQgZG93biBrZXlcbiAgICAgICAgaWYgKGtleUNvZGUgPT09IE0ua2V5cy5BUlJPV19VUCB8fCBrZXlDb2RlID09PSBNLmtleXMuQVJST1dfRE9XTikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIGlmIChrZXlDb2RlID09PSBNLmtleXMuQVJST1dfVVAgJiYgdGhpcy5hY3RpdmVJbmRleCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlSW5kZXgtLTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoa2V5Q29kZSA9PT0gTS5rZXlzLkFSUk9XX0RPV04gJiYgdGhpcy5hY3RpdmVJbmRleCA8IG51bUl0ZW1zIC0gMSkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVJbmRleCsrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgaWYgKHRoaXMuYWN0aXZlSW5kZXggPj0gMCkge1xuICAgICAgICAgICAgdGhpcy4kYWN0aXZlID0gJCh0aGlzLmNvbnRhaW5lcikuY2hpbGRyZW4oJ2xpJykuZXEodGhpcy5hY3RpdmVJbmRleCk7XG4gICAgICAgICAgICB0aGlzLiRhY3RpdmUuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBJbnB1dCBDbGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRDbGljayhlKSB7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDb250YWluZXIgTW91c2Vkb3duIGFuZCBUb3VjaHN0YXJ0XG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0KGUpIHtcbiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgQ29udGFpbmVyIE1vdXNldXAgYW5kIFRvdWNoZW5kXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNvbnRhaW5lck1vdXNldXBBbmRUb3VjaGVuZChlKSB7XG4gICAgICAgIHRoaXMuX21vdXNlZG93biA9IGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhpZ2hsaWdodCBwYXJ0aWFsIG1hdGNoXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGlnaGxpZ2h0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hpZ2hsaWdodChzdHJpbmcsICRlbCkge1xuICAgICAgICB2YXIgaW1nID0gJGVsLmZpbmQoJ2ltZycpO1xuICAgICAgICB2YXIgbWF0Y2hTdGFydCA9ICRlbC50ZXh0KCkudG9Mb3dlckNhc2UoKS5pbmRleE9mKCcnICsgc3RyaW5nLnRvTG93ZXJDYXNlKCkgKyAnJyksXG4gICAgICAgICAgICBtYXRjaEVuZCA9IG1hdGNoU3RhcnQgKyBzdHJpbmcubGVuZ3RoIC0gMSxcbiAgICAgICAgICAgIGJlZm9yZU1hdGNoID0gJGVsLnRleHQoKS5zbGljZSgwLCBtYXRjaFN0YXJ0KSxcbiAgICAgICAgICAgIG1hdGNoVGV4dCA9ICRlbC50ZXh0KCkuc2xpY2UobWF0Y2hTdGFydCwgbWF0Y2hFbmQgKyAxKSxcbiAgICAgICAgICAgIGFmdGVyTWF0Y2ggPSAkZWwudGV4dCgpLnNsaWNlKG1hdGNoRW5kICsgMSk7XG4gICAgICAgICRlbC5odG1sKFwiPHNwYW4+XCIgKyBiZWZvcmVNYXRjaCArIFwiPHNwYW4gY2xhc3M9J2hpZ2hsaWdodCc+XCIgKyBtYXRjaFRleHQgKyBcIjwvc3Bhbj5cIiArIGFmdGVyTWF0Y2ggKyBcIjwvc3Bhbj5cIik7XG4gICAgICAgIGlmIChpbWcubGVuZ3RoKSB7XG4gICAgICAgICAgJGVsLnByZXBlbmQoaW1nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlc2V0IGN1cnJlbnQgZWxlbWVudCBwb3NpdGlvblxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3Jlc2V0Q3VycmVudEVsZW1lbnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzZXRDdXJyZW50RWxlbWVudCgpIHtcbiAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IC0xO1xuICAgICAgICB0aGlzLiRhY3RpdmUucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlc2V0IGF1dG9jb21wbGV0ZSBlbGVtZW50c1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3Jlc2V0QXV0b2NvbXBsZXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc2V0QXV0b2NvbXBsZXRlKCkge1xuICAgICAgICAkKHRoaXMuY29udGFpbmVyKS5lbXB0eSgpO1xuICAgICAgICB0aGlzLl9yZXNldEN1cnJlbnRFbGVtZW50KCk7XG4gICAgICAgIHRoaXMub2xkVmFsID0gbnVsbDtcbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2VsZWN0IGF1dG9jb21wbGV0ZSBvcHRpb25cbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgIEF1dG9jb21wbGV0ZSBvcHRpb24gbGlzdCBpdGVtIGVsZW1lbnRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInNlbGVjdE9wdGlvblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNlbGVjdE9wdGlvbihlbCkge1xuICAgICAgICB2YXIgdGV4dCA9IGVsLnRleHQoKS50cmltKCk7XG4gICAgICAgIHRoaXMuZWwudmFsdWUgPSB0ZXh0O1xuICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgdGhpcy5fcmVzZXRBdXRvY29tcGxldGUoKTtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBvbkF1dG9jb21wbGV0ZSBjYWxsYmFjay5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25BdXRvY29tcGxldGUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25BdXRvY29tcGxldGUuY2FsbCh0aGlzLCB0ZXh0KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbmRlciBkcm9wZG93biBjb250ZW50XG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YSAgZGF0YSBzZXRcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB2YWwgIGN1cnJlbnQgaW5wdXQgdmFsdWVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW5kZXJEcm9wZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXJEcm9wZG93bihkYXRhLCB2YWwpIHtcbiAgICAgICAgdmFyIF90aGlzMzkgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX3Jlc2V0QXV0b2NvbXBsZXRlKCk7XG5cbiAgICAgICAgdmFyIG1hdGNoaW5nRGF0YSA9IFtdO1xuXG4gICAgICAgIC8vIEdhdGhlciBhbGwgbWF0Y2hpbmcgZGF0YVxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZGF0YSkge1xuICAgICAgICAgIGlmIChkYXRhLmhhc093blByb3BlcnR5KGtleSkgJiYga2V5LnRvTG93ZXJDYXNlKCkuaW5kZXhPZih2YWwpICE9PSAtMSkge1xuICAgICAgICAgICAgLy8gQnJlYWsgaWYgcGFzdCBsaW1pdFxuICAgICAgICAgICAgaWYgKHRoaXMuY291bnQgPj0gdGhpcy5vcHRpb25zLmxpbWl0KSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgZW50cnkgPSB7XG4gICAgICAgICAgICAgIGRhdGE6IGRhdGFba2V5XSxcbiAgICAgICAgICAgICAga2V5OiBrZXlcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBtYXRjaGluZ0RhdGEucHVzaChlbnRyeSk7XG5cbiAgICAgICAgICAgIHRoaXMuY291bnQrKztcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTb3J0XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc29ydEZ1bmN0aW9uKSB7XG4gICAgICAgICAgdmFyIHNvcnRGdW5jdGlvbkJvdW5kID0gZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczM5Lm9wdGlvbnMuc29ydEZ1bmN0aW9uKGEua2V5LnRvTG93ZXJDYXNlKCksIGIua2V5LnRvTG93ZXJDYXNlKCksIHZhbC50b0xvd2VyQ2FzZSgpKTtcbiAgICAgICAgICB9O1xuICAgICAgICAgIG1hdGNoaW5nRGF0YS5zb3J0KHNvcnRGdW5jdGlvbkJvdW5kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlbmRlclxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1hdGNoaW5nRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBfZW50cnkgPSBtYXRjaGluZ0RhdGFbaV07XG4gICAgICAgICAgdmFyICRhdXRvY29tcGxldGVPcHRpb24gPSAkKCc8bGk+PC9saT4nKTtcbiAgICAgICAgICBpZiAoISFfZW50cnkuZGF0YSkge1xuICAgICAgICAgICAgJGF1dG9jb21wbGV0ZU9wdGlvbi5hcHBlbmQoXCI8aW1nIHNyYz1cXFwiXCIgKyBfZW50cnkuZGF0YSArIFwiXFxcIiBjbGFzcz1cXFwicmlnaHQgY2lyY2xlXFxcIj48c3Bhbj5cIiArIF9lbnRyeS5rZXkgKyBcIjwvc3Bhbj5cIik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICRhdXRvY29tcGxldGVPcHRpb24uYXBwZW5kKCc8c3Bhbj4nICsgX2VudHJ5LmtleSArICc8L3NwYW4+Jyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgJCh0aGlzLmNvbnRhaW5lcikuYXBwZW5kKCRhdXRvY29tcGxldGVPcHRpb24pO1xuICAgICAgICAgIHRoaXMuX2hpZ2hsaWdodCh2YWwsICRhdXRvY29tcGxldGVPcHRpb24pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT3BlbiBBdXRvY29tcGxldGUgRHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5lbC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIHRoaXMuX3Jlc2V0QXV0b2NvbXBsZXRlKCk7XG5cbiAgICAgICAgaWYgKHZhbC5sZW5ndGggPj0gdGhpcy5vcHRpb25zLm1pbkxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgICB0aGlzLl9yZW5kZXJEcm9wZG93bih0aGlzLm9wdGlvbnMuZGF0YSwgdmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9wZW4gZHJvcGRvd25cbiAgICAgICAgaWYgKCF0aGlzLmRyb3Bkb3duLmlzT3Blbikge1xuICAgICAgICAgIHRoaXMuZHJvcGRvd24ub3BlbigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFJlY2FsY3VsYXRlIGRyb3Bkb3duIHdoZW4gaXRzIGFscmVhZHkgb3BlblxuICAgICAgICAgIHRoaXMuZHJvcGRvd24ucmVjYWxjdWxhdGVEaW1lbnNpb25zKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDbG9zZSBBdXRvY29tcGxldGUgRHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIHRoaXMuZHJvcGRvd24uY2xvc2UoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBVcGRhdGUgRGF0YVxuICAgICAgICogQHBhcmFtIHtPYmplY3R9IGRhdGFcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInVwZGF0ZURhdGFcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGVEYXRhKGRhdGEpIHtcbiAgICAgICAgdmFyIHZhbCA9IHRoaXMuZWwudmFsdWUudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgdGhpcy5vcHRpb25zLmRhdGEgPSBkYXRhO1xuXG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHRoaXMuX3JlbmRlckRyb3Bkb3duKGRhdGEsIHZhbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoQXV0b2NvbXBsZXRlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQXV0b2NvbXBsZXRlKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fQXV0b2NvbXBsZXRlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEF1dG9jb21wbGV0ZTtcbiAgfShDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBBdXRvY29tcGxldGVcbiAgICovXG5cblxuICBBdXRvY29tcGxldGUuX2tleWRvd24gPSBmYWxzZTtcblxuICBNLkF1dG9jb21wbGV0ZSA9IEF1dG9jb21wbGV0ZTtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKEF1dG9jb21wbGV0ZSwgJ2F1dG9jb21wbGV0ZScsICdNX0F1dG9jb21wbGV0ZScpO1xuICB9XG59KShjYXNoKTtcbjsoZnVuY3Rpb24gKCQpIHtcbiAgLy8gRnVuY3Rpb24gdG8gdXBkYXRlIGxhYmVscyBvZiB0ZXh0IGZpZWxkc1xuICBNLnVwZGF0ZVRleHRGaWVsZHMgPSBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIGlucHV0X3NlbGVjdG9yID0gJ2lucHV0W3R5cGU9dGV4dF0sIGlucHV0W3R5cGU9cGFzc3dvcmRdLCBpbnB1dFt0eXBlPWVtYWlsXSwgaW5wdXRbdHlwZT11cmxdLCBpbnB1dFt0eXBlPXRlbF0sIGlucHV0W3R5cGU9bnVtYmVyXSwgaW5wdXRbdHlwZT1zZWFyY2hdLCBpbnB1dFt0eXBlPWRhdGVdLCBpbnB1dFt0eXBlPXRpbWVdLCB0ZXh0YXJlYSc7XG4gICAgJChpbnB1dF9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoZWxlbWVudCwgaW5kZXgpIHtcbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICBpZiAoZWxlbWVudC52YWx1ZS5sZW5ndGggPiAwIHx8ICQoZWxlbWVudCkuaXMoJzpmb2N1cycpIHx8IGVsZW1lbnQuYXV0b2ZvY3VzIHx8ICR0aGlzLmF0dHIoJ3BsYWNlaG9sZGVyJykgIT09IG51bGwpIHtcbiAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfSBlbHNlIGlmIChlbGVtZW50LnZhbGlkaXR5KSB7XG4gICAgICAgICR0aGlzLnNpYmxpbmdzKCdsYWJlbCcpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnLCBlbGVtZW50LnZhbGlkaXR5LmJhZElucHV0ID09PSB0cnVlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICR0aGlzLnNpYmxpbmdzKCdsYWJlbCcpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBNLnZhbGlkYXRlX2ZpZWxkID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgIHZhciBoYXNMZW5ndGggPSBvYmplY3QuYXR0cignZGF0YS1sZW5ndGgnKSAhPT0gbnVsbDtcbiAgICB2YXIgbGVuQXR0ciA9IHBhcnNlSW50KG9iamVjdC5hdHRyKCdkYXRhLWxlbmd0aCcpKTtcbiAgICB2YXIgbGVuID0gb2JqZWN0WzBdLnZhbHVlLmxlbmd0aDtcblxuICAgIGlmIChsZW4gPT09IDAgJiYgb2JqZWN0WzBdLnZhbGlkaXR5LmJhZElucHV0ID09PSBmYWxzZSAmJiAhb2JqZWN0LmlzKCc6cmVxdWlyZWQnKSkge1xuICAgICAgaWYgKG9iamVjdC5oYXNDbGFzcygndmFsaWRhdGUnKSkge1xuICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgIC8vIENoZWNrIGZvciBjaGFyYWN0ZXIgY291bnRlciBhdHRyaWJ1dGVzXG4gICAgICAgIGlmIChvYmplY3QuaXMoJzp2YWxpZCcpICYmIGhhc0xlbmd0aCAmJiBsZW4gPD0gbGVuQXR0ciB8fCBvYmplY3QuaXMoJzp2YWxpZCcpICYmICFoYXNMZW5ndGgpIHtcbiAgICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgICBvYmplY3QuYWRkQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCd2YWxpZCcpO1xuICAgICAgICAgIG9iamVjdC5hZGRDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9O1xuXG4gIE0udGV4dGFyZWFBdXRvUmVzaXplID0gZnVuY3Rpb24gKCR0ZXh0YXJlYSkge1xuICAgIC8vIFdyYXAgaWYgbmF0aXZlIGVsZW1lbnRcbiAgICBpZiAoJHRleHRhcmVhIGluc3RhbmNlb2YgRWxlbWVudCkge1xuICAgICAgJHRleHRhcmVhID0gJCgkdGV4dGFyZWEpO1xuICAgIH1cblxuICAgIGlmICghJHRleHRhcmVhLmxlbmd0aCkge1xuICAgICAgY29uc29sZS5lcnJvcignTm8gdGV4dGFyZWEgZWxlbWVudCBmb3VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIC8vIFRleHRhcmVhIEF1dG8gUmVzaXplXG4gICAgdmFyIGhpZGRlbkRpdiA9ICQoJy5oaWRkZW5kaXYnKS5maXJzdCgpO1xuICAgIGlmICghaGlkZGVuRGl2Lmxlbmd0aCkge1xuICAgICAgaGlkZGVuRGl2ID0gJCgnPGRpdiBjbGFzcz1cImhpZGRlbmRpdiBjb21tb25cIj48L2Rpdj4nKTtcbiAgICAgICQoJ2JvZHknKS5hcHBlbmQoaGlkZGVuRGl2KTtcbiAgICB9XG5cbiAgICAvLyBTZXQgZm9udCBwcm9wZXJ0aWVzIG9mIGhpZGRlbkRpdlxuICAgIHZhciBmb250RmFtaWx5ID0gJHRleHRhcmVhLmNzcygnZm9udC1mYW1pbHknKTtcbiAgICB2YXIgZm9udFNpemUgPSAkdGV4dGFyZWEuY3NzKCdmb250LXNpemUnKTtcbiAgICB2YXIgbGluZUhlaWdodCA9ICR0ZXh0YXJlYS5jc3MoJ2xpbmUtaGVpZ2h0Jyk7XG5cbiAgICAvLyBGaXJlZm94IGNhbid0IGhhbmRsZSBwYWRkaW5nIHNob3J0aGFuZC5cbiAgICB2YXIgcGFkZGluZ1RvcCA9ICR0ZXh0YXJlYS5jc3MoJ3BhZGRpbmctdG9wJyk7XG4gICAgdmFyIHBhZGRpbmdSaWdodCA9ICR0ZXh0YXJlYS5jc3MoJ3BhZGRpbmctcmlnaHQnKTtcbiAgICB2YXIgcGFkZGluZ0JvdHRvbSA9ICR0ZXh0YXJlYS5jc3MoJ3BhZGRpbmctYm90dG9tJyk7XG4gICAgdmFyIHBhZGRpbmdMZWZ0ID0gJHRleHRhcmVhLmNzcygncGFkZGluZy1sZWZ0Jyk7XG5cbiAgICBpZiAoZm9udFNpemUpIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ2ZvbnQtc2l6ZScsIGZvbnRTaXplKTtcbiAgICB9XG4gICAgaWYgKGZvbnRGYW1pbHkpIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ2ZvbnQtZmFtaWx5JywgZm9udEZhbWlseSk7XG4gICAgfVxuICAgIGlmIChsaW5lSGVpZ2h0KSB7XG4gICAgICBoaWRkZW5EaXYuY3NzKCdsaW5lLWhlaWdodCcsIGxpbmVIZWlnaHQpO1xuICAgIH1cbiAgICBpZiAocGFkZGluZ1RvcCkge1xuICAgICAgaGlkZGVuRGl2LmNzcygncGFkZGluZy10b3AnLCBwYWRkaW5nVG9wKTtcbiAgICB9XG4gICAgaWYgKHBhZGRpbmdSaWdodCkge1xuICAgICAgaGlkZGVuRGl2LmNzcygncGFkZGluZy1yaWdodCcsIHBhZGRpbmdSaWdodCk7XG4gICAgfVxuICAgIGlmIChwYWRkaW5nQm90dG9tKSB7XG4gICAgICBoaWRkZW5EaXYuY3NzKCdwYWRkaW5nLWJvdHRvbScsIHBhZGRpbmdCb3R0b20pO1xuICAgIH1cbiAgICBpZiAocGFkZGluZ0xlZnQpIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ3BhZGRpbmctbGVmdCcsIHBhZGRpbmdMZWZ0KTtcbiAgICB9XG5cbiAgICAvLyBTZXQgb3JpZ2luYWwtaGVpZ2h0LCBpZiBub25lXG4gICAgaWYgKCEkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JykpIHtcbiAgICAgICR0ZXh0YXJlYS5kYXRhKCdvcmlnaW5hbC1oZWlnaHQnLCAkdGV4dGFyZWEuaGVpZ2h0KCkpO1xuICAgIH1cblxuICAgIGlmICgkdGV4dGFyZWEuYXR0cignd3JhcCcpID09PSAnb2ZmJykge1xuICAgICAgaGlkZGVuRGl2LmNzcygnb3ZlcmZsb3ctd3JhcCcsICdub3JtYWwnKS5jc3MoJ3doaXRlLXNwYWNlJywgJ3ByZScpO1xuICAgIH1cblxuICAgIGhpZGRlbkRpdi50ZXh0KCR0ZXh0YXJlYVswXS52YWx1ZSArICdcXG4nKTtcbiAgICB2YXIgY29udGVudCA9IGhpZGRlbkRpdi5odG1sKCkucmVwbGFjZSgvXFxuL2csICc8YnI+Jyk7XG4gICAgaGlkZGVuRGl2Lmh0bWwoY29udGVudCk7XG5cbiAgICAvLyBXaGVuIHRleHRhcmVhIGlzIGhpZGRlbiwgd2lkdGggZ29lcyBjcmF6eS5cbiAgICAvLyBBcHByb3hpbWF0ZSB3aXRoIGhhbGYgb2Ygd2luZG93IHNpemVcblxuICAgIGlmICgkdGV4dGFyZWFbMF0ub2Zmc2V0V2lkdGggPiAwICYmICR0ZXh0YXJlYVswXS5vZmZzZXRIZWlnaHQgPiAwKSB7XG4gICAgICBoaWRkZW5EaXYuY3NzKCd3aWR0aCcsICR0ZXh0YXJlYS53aWR0aCgpICsgJ3B4Jyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgd2luZG93LmlubmVyV2lkdGggLyAyICsgJ3B4Jyk7XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogUmVzaXplIGlmIHRoZSBuZXcgaGVpZ2h0IGlzIGdyZWF0ZXIgdGhhbiB0aGVcbiAgICAgKiBvcmlnaW5hbCBoZWlnaHQgb2YgdGhlIHRleHRhcmVhXG4gICAgICovXG4gICAgaWYgKCR0ZXh0YXJlYS5kYXRhKCdvcmlnaW5hbC1oZWlnaHQnKSA8PSBoaWRkZW5EaXYuaW5uZXJIZWlnaHQoKSkge1xuICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgaGlkZGVuRGl2LmlubmVySGVpZ2h0KCkgKyAncHgnKTtcbiAgICB9IGVsc2UgaWYgKCR0ZXh0YXJlYVswXS52YWx1ZS5sZW5ndGggPCAkdGV4dGFyZWEuZGF0YSgncHJldmlvdXMtbGVuZ3RoJykpIHtcbiAgICAgIC8qKlxuICAgICAgICogSW4gY2FzZSB0aGUgbmV3IGhlaWdodCBpcyBsZXNzIHRoYW4gb3JpZ2luYWwgaGVpZ2h0LCBpdFxuICAgICAgICogbWVhbnMgdGhlIHRleHRhcmVhIGhhcyBsZXNzIHRleHQgdGhhbiBiZWZvcmVcbiAgICAgICAqIFNvIHdlIHNldCB0aGUgaGVpZ2h0IHRvIHRoZSBvcmlnaW5hbCBvbmVcbiAgICAgICAqL1xuICAgICAgJHRleHRhcmVhLmNzcygnaGVpZ2h0JywgJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcpICsgJ3B4Jyk7XG4gICAgfVxuICAgICR0ZXh0YXJlYS5kYXRhKCdwcmV2aW91cy1sZW5ndGgnLCAkdGV4dGFyZWFbMF0udmFsdWUubGVuZ3RoKTtcbiAgfTtcblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgLy8gVGV4dCBiYXNlZCBpbnB1dHNcbiAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIGlucHV0W3R5cGU9ZGF0ZV0sIGlucHV0W3R5cGU9dGltZV0sIHRleHRhcmVhJztcblxuICAgIC8vIEFkZCBhY3RpdmUgaWYgZm9ybSBhdXRvIGNvbXBsZXRlXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsIGlucHV0X3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGggIT09IDAgfHwgJCh0aGlzKS5hdHRyKCdwbGFjZWhvbGRlcicpICE9PSBudWxsKSB7XG4gICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgICAgTS52YWxpZGF0ZV9maWVsZCgkKHRoaXMpKTtcbiAgICB9KTtcblxuICAgIC8vIEFkZCBhY3RpdmUgaWYgaW5wdXQgZWxlbWVudCBoYXMgYmVlbiBwcmUtcG9wdWxhdGVkIG9uIGRvY3VtZW50IHJlYWR5XG4gICAgJChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkge1xuICAgICAgTS51cGRhdGVUZXh0RmllbGRzKCk7XG4gICAgfSk7XG5cbiAgICAvLyBIVE1MIERPTSBGT1JNIFJFU0VUIGhhbmRsaW5nXG4gICAgJChkb2N1bWVudCkub24oJ3Jlc2V0JywgZnVuY3Rpb24gKGUpIHtcbiAgICAgIHZhciBmb3JtUmVzZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgIGlmIChmb3JtUmVzZXQuaXMoJ2Zvcm0nKSkge1xuICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ3ZhbGlkJykucmVtb3ZlQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgZm9ybVJlc2V0LmZpbmQoaW5wdXRfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICBpZiAodGhpcy52YWx1ZS5sZW5ndGgpIHtcbiAgICAgICAgICAgICQodGhpcykuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gUmVzZXQgc2VsZWN0IChhZnRlciBuYXRpdmUgcmVzZXQpXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGZvcm1SZXNldC5maW5kKCdzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIGNoZWNrIGlmIGluaXRpYWxpemVkXG4gICAgICAgICAgICBpZiAodGhpcy5NX0Zvcm1TZWxlY3QpIHtcbiAgICAgICAgICAgICAgJCh0aGlzKS50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBBZGQgYWN0aXZlIHdoZW4gZWxlbWVudCBoYXMgZm9jdXNcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKGlucHV0X3NlbGVjdG9yKSkge1xuICAgICAgICAkKGUudGFyZ2V0KS5zaWJsaW5ncygnbGFiZWwsIC5wcmVmaXgnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG4gICAgfSwgdHJ1ZSk7XG5cbiAgICAvKipcbiAgICAgKiBSZW1vdmUgYWN0aXZlIHdoZW4gZWxlbWVudCBpcyBibHVycmVkXG4gICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAqL1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyICRpbnB1dEVsZW1lbnQgPSAkKGUudGFyZ2V0KTtcbiAgICAgIGlmICgkaW5wdXRFbGVtZW50LmlzKGlucHV0X3NlbGVjdG9yKSkge1xuICAgICAgICB2YXIgc2VsZWN0b3IgPSAnLnByZWZpeCc7XG5cbiAgICAgICAgaWYgKCRpbnB1dEVsZW1lbnRbMF0udmFsdWUubGVuZ3RoID09PSAwICYmICRpbnB1dEVsZW1lbnRbMF0udmFsaWRpdHkuYmFkSW5wdXQgIT09IHRydWUgJiYgJGlucHV0RWxlbWVudC5hdHRyKCdwbGFjZWhvbGRlcicpID09PSBudWxsKSB7XG4gICAgICAgICAgc2VsZWN0b3IgKz0gJywgbGFiZWwnO1xuICAgICAgICB9XG4gICAgICAgICRpbnB1dEVsZW1lbnQuc2libGluZ3Moc2VsZWN0b3IpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgTS52YWxpZGF0ZV9maWVsZCgkaW5wdXRFbGVtZW50KTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcblxuICAgIC8vIFJhZGlvIGFuZCBDaGVja2JveCBmb2N1cyBjbGFzc1xuICAgIHZhciByYWRpb19jaGVja2JveCA9ICdpbnB1dFt0eXBlPXJhZGlvXSwgaW5wdXRbdHlwZT1jaGVja2JveF0nO1xuICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIHJhZGlvX2NoZWNrYm94LCBmdW5jdGlvbiAoZSkge1xuICAgICAgLy8gVEFCLCBjaGVjayBpZiB0YWJiaW5nIHRvIHJhZGlvIG9yIGNoZWNrYm94LlxuICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5UQUIpIHtcbiAgICAgICAgJCh0aGlzKS5hZGRDbGFzcygndGFiYmVkJyk7XG4gICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG4gICAgICAgICR0aGlzLm9uZSgnYmx1cicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygndGFiYmVkJyk7XG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB2YXIgdGV4dF9hcmVhX3NlbGVjdG9yID0gJy5tYXRlcmlhbGl6ZS10ZXh0YXJlYSc7XG4gICAgJCh0ZXh0X2FyZWFfc2VsZWN0b3IpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICR0ZXh0YXJlYSA9ICQodGhpcyk7XG4gICAgICAvKipcbiAgICAgICAqIFJlc2l6ZSB0ZXh0YXJlYSBvbiBkb2N1bWVudCBsb2FkIGFmdGVyIHN0b3JpbmdcbiAgICAgICAqIHRoZSBvcmlnaW5hbCBoZWlnaHQgYW5kIHRoZSBvcmlnaW5hbCBsZW5ndGhcbiAgICAgICAqL1xuICAgICAgJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcsICR0ZXh0YXJlYS5oZWlnaHQoKSk7XG4gICAgICAkdGV4dGFyZWEuZGF0YSgncHJldmlvdXMtbGVuZ3RoJywgdGhpcy52YWx1ZS5sZW5ndGgpO1xuICAgICAgTS50ZXh0YXJlYUF1dG9SZXNpemUoJHRleHRhcmVhKTtcbiAgICB9KTtcblxuICAgICQoZG9jdW1lbnQpLm9uKCdrZXl1cCcsIHRleHRfYXJlYV9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgTS50ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7XG4gICAgfSk7XG4gICAgJChkb2N1bWVudCkub24oJ2tleWRvd24nLCB0ZXh0X2FyZWFfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgIE0udGV4dGFyZWFBdXRvUmVzaXplKCQodGhpcykpO1xuICAgIH0pO1xuXG4gICAgLy8gRmlsZSBJbnB1dCBQYXRoXG4gICAgJChkb2N1bWVudCkub24oJ2NoYW5nZScsICcuZmlsZS1maWVsZCBpbnB1dFt0eXBlPVwiZmlsZVwiXScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciBmaWxlX2ZpZWxkID0gJCh0aGlzKS5jbG9zZXN0KCcuZmlsZS1maWVsZCcpO1xuICAgICAgdmFyIHBhdGhfaW5wdXQgPSBmaWxlX2ZpZWxkLmZpbmQoJ2lucHV0LmZpbGUtcGF0aCcpO1xuICAgICAgdmFyIGZpbGVzID0gJCh0aGlzKVswXS5maWxlcztcbiAgICAgIHZhciBmaWxlX25hbWVzID0gW107XG4gICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGZpbGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGZpbGVfbmFtZXMucHVzaChmaWxlc1tpXS5uYW1lKTtcbiAgICAgIH1cbiAgICAgIHBhdGhfaW5wdXRbMF0udmFsdWUgPSBmaWxlX25hbWVzLmpvaW4oJywgJyk7XG4gICAgICBwYXRoX2lucHV0LnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgIH0pO1xuICB9KTsgLy8gRW5kIG9mICQoZG9jdW1lbnQpLnJlYWR5XG59KShjYXNoKTtcbjsoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgaW5kaWNhdG9yczogdHJ1ZSxcbiAgICBoZWlnaHQ6IDQwMCxcbiAgICBkdXJhdGlvbjogNTAwLFxuICAgIGludGVydmFsOiA2MDAwXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgU2xpZGVyID0gZnVuY3Rpb24gKF9Db21wb25lbnQxMSkge1xuICAgIF9pbmhlcml0cyhTbGlkZXIsIF9Db21wb25lbnQxMSk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgU2xpZGVyIGluc3RhbmNlIGFuZCBzZXQgdXAgb3ZlcmxheVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNsaWRlcihlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNsaWRlcik7XG5cbiAgICAgIHZhciBfdGhpczQwID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFNsaWRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNsaWRlcikpLmNhbGwodGhpcywgU2xpZGVyLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczQwLmVsLk1fU2xpZGVyID0gX3RoaXM0MDtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgbW9kYWxcbiAgICAgICAqIEBtZW1iZXIgU2xpZGVyI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbaW5kaWNhdG9ycz10cnVlXSAtIFNob3cgaW5kaWNhdG9yc1xuICAgICAgICogQHByb3Age051bWJlcn0gW2hlaWdodD00MDBdIC0gaGVpZ2h0IG9mIHNsaWRlclxuICAgICAgICogQHByb3Age051bWJlcn0gW2R1cmF0aW9uPTUwMF0gLSBMZW5ndGggaW4gbXMgb2Ygc2xpZGUgdHJhbnNpdGlvblxuICAgICAgICogQHByb3Age051bWJlcn0gW2ludGVydmFsPTYwMDBdIC0gTGVuZ3RoIGluIG1zIG9mIHNsaWRlIGludGVydmFsXG4gICAgICAgKi9cbiAgICAgIF90aGlzNDAub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBTbGlkZXIuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBzZXR1cFxuICAgICAgX3RoaXM0MC4kc2xpZGVyID0gX3RoaXM0MC4kZWwuZmluZCgnLnNsaWRlcycpO1xuICAgICAgX3RoaXM0MC4kc2xpZGVzID0gX3RoaXM0MC4kc2xpZGVyLmNoaWxkcmVuKCdsaScpO1xuICAgICAgX3RoaXM0MC5hY3RpdmVJbmRleCA9IF90aGlzNDAuJHNsaWRlcy5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgcmV0dXJuICQoaXRlbSkuaGFzQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfSkuZmlyc3QoKS5pbmRleCgpO1xuICAgICAgaWYgKF90aGlzNDAuYWN0aXZlSW5kZXggIT0gLTEpIHtcbiAgICAgICAgX3RoaXM0MC4kYWN0aXZlID0gX3RoaXM0MC4kc2xpZGVzLmVxKF90aGlzNDAuYWN0aXZlSW5kZXgpO1xuICAgICAgfVxuXG4gICAgICBfdGhpczQwLl9zZXRTbGlkZXJIZWlnaHQoKTtcblxuICAgICAgLy8gU2V0IGluaXRpYWwgcG9zaXRpb25zIG9mIGNhcHRpb25zXG4gICAgICBfdGhpczQwLiRzbGlkZXMuZmluZCgnLmNhcHRpb24nKS5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBfdGhpczQwLl9hbmltYXRlQ2FwdGlvbkluKGVsLCAwKTtcbiAgICAgIH0pO1xuXG4gICAgICAvLyBNb3ZlIGltZyBzcmMgaW50byBiYWNrZ3JvdW5kLWltYWdlXG4gICAgICBfdGhpczQwLiRzbGlkZXMuZmluZCgnaW1nJykuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgdmFyIHBsYWNlaG9sZGVyQmFzZTY0ID0gJ2RhdGE6aW1hZ2UvZ2lmO2Jhc2U2NCxSMGxHT0RsaEFRQUJBSUFCQVAvLy93QUFBQ0g1QkFFS0FBRUFMQUFBQUFBQkFBRUFBQUlDVEFFQU93PT0nO1xuICAgICAgICBpZiAoJChlbCkuYXR0cignc3JjJykgIT09IHBsYWNlaG9sZGVyQmFzZTY0KSB7XG4gICAgICAgICAgJChlbCkuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJywgJ3VybChcIicgKyAkKGVsKS5hdHRyKCdzcmMnKSArICdcIiknKTtcbiAgICAgICAgICAkKGVsKS5hdHRyKCdzcmMnLCBwbGFjZWhvbGRlckJhc2U2NCk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczQwLl9zZXR1cEluZGljYXRvcnMoKTtcblxuICAgICAgLy8gU2hvdyBhY3RpdmUgc2xpZGVcbiAgICAgIGlmIChfdGhpczQwLiRhY3RpdmUpIHtcbiAgICAgICAgX3RoaXM0MC4kYWN0aXZlLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXM0MC4kc2xpZGVzLmZpcnN0KCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiBfdGhpczQwLiRzbGlkZXMuZmlyc3QoKVswXSxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIGR1cmF0aW9uOiBfdGhpczQwLm9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIF90aGlzNDAuYWN0aXZlSW5kZXggPSAwO1xuICAgICAgICBfdGhpczQwLiRhY3RpdmUgPSBfdGhpczQwLiRzbGlkZXMuZXEoX3RoaXM0MC5hY3RpdmVJbmRleCk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcbiAgICAgICAgaWYgKF90aGlzNDAub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgICAgX3RoaXM0MC4kaW5kaWNhdG9ycy5lcShfdGhpczQwLmFjdGl2ZUluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQWRqdXN0IGhlaWdodCB0byBjdXJyZW50IHNsaWRlXG4gICAgICBfdGhpczQwLiRhY3RpdmUuZmluZCgnaW1nJykuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogX3RoaXM0MC4kYWN0aXZlLmZpbmQoJy5jYXB0aW9uJylbMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IF90aGlzNDAub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgX3RoaXM0MC5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG5cbiAgICAgIC8vIGF1dG8gc2Nyb2xsXG4gICAgICBfdGhpczQwLnN0YXJ0KCk7XG4gICAgICByZXR1cm4gX3RoaXM0MDtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2xpZGVyLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5wYXVzZSgpO1xuICAgICAgICB0aGlzLl9yZW1vdmVJbmRpY2F0b3JzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5lbC5NX1NsaWRlciA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHZhciBfdGhpczQxID0gdGhpcztcblxuICAgICAgICB0aGlzLl9oYW5kbGVJbnRlcnZhbEJvdW5kID0gdGhpcy5faGFuZGxlSW50ZXJ2YWwuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5kaWNhdG9yQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUluZGljYXRvckNsaWNrLmJpbmQodGhpcyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczQxLl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdmFyIF90aGlzNDIgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykge1xuICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM0Mi5faGFuZGxlSW5kaWNhdG9yQ2xpY2tCb3VuZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgaW5kaWNhdG9yIGNsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5kaWNhdG9yQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5kaWNhdG9yQ2xpY2soZSkge1xuICAgICAgICB2YXIgY3VyckluZGV4ID0gJChlLnRhcmdldCkuaW5kZXgoKTtcbiAgICAgICAgdGhpcy5zZXQoY3VyckluZGV4KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW50ZXJ2YWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnRlcnZhbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnRlcnZhbCgpIHtcbiAgICAgICAgdmFyIG5ld0FjdGl2ZUluZGV4ID0gdGhpcy4kc2xpZGVyLmZpbmQoJy5hY3RpdmUnKS5pbmRleCgpO1xuICAgICAgICBpZiAodGhpcy4kc2xpZGVzLmxlbmd0aCA9PT0gbmV3QWN0aXZlSW5kZXggKyAxKSBuZXdBY3RpdmVJbmRleCA9IDA7XG4gICAgICAgIC8vIGxvb3AgdG8gc3RhcnRcbiAgICAgICAgZWxzZSBuZXdBY3RpdmVJbmRleCArPSAxO1xuXG4gICAgICAgIHRoaXMuc2V0KG5ld0FjdGl2ZUluZGV4KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIGluIGNhcHRpb25cbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gY2FwdGlvblxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGR1cmF0aW9uXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUNhcHRpb25JblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlQ2FwdGlvbkluKGNhcHRpb24sIGR1cmF0aW9uKSB7XG4gICAgICAgIHZhciBhbmltT3B0aW9ucyA9IHtcbiAgICAgICAgICB0YXJnZXRzOiBjYXB0aW9uLFxuICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IGR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9O1xuXG4gICAgICAgIGlmICgkKGNhcHRpb24pLmhhc0NsYXNzKCdjZW50ZXItYWxpZ24nKSkge1xuICAgICAgICAgIGFuaW1PcHRpb25zLnRyYW5zbGF0ZVkgPSAtMTAwO1xuICAgICAgICB9IGVsc2UgaWYgKCQoY2FwdGlvbikuaGFzQ2xhc3MoJ3JpZ2h0LWFsaWduJykpIHtcbiAgICAgICAgICBhbmltT3B0aW9ucy50cmFuc2xhdGVYID0gMTAwO1xuICAgICAgICB9IGVsc2UgaWYgKCQoY2FwdGlvbikuaGFzQ2xhc3MoJ2xlZnQtYWxpZ24nKSkge1xuICAgICAgICAgIGFuaW1PcHRpb25zLnRyYW5zbGF0ZVggPSAtMTAwO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbShhbmltT3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IGhlaWdodCBvZiBzbGlkZXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRTbGlkZXJIZWlnaHRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0U2xpZGVySGVpZ2h0KCkge1xuICAgICAgICAvLyBJZiBmdWxsc2NyZWVuLCBkbyBub3RoaW5nXG4gICAgICAgIGlmICghdGhpcy4kZWwuaGFzQ2xhc3MoJ2Z1bGxzY3JlZW4nKSkge1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykge1xuICAgICAgICAgICAgLy8gQWRkIGhlaWdodCBpZiBpbmRpY2F0b3JzIGFyZSBwcmVzZW50XG4gICAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIHRoaXMub3B0aW9ucy5oZWlnaHQgKyA0MCArICdweCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIHRoaXMub3B0aW9ucy5oZWlnaHQgKyAncHgnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy4kc2xpZGVyLmNzcygnaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodCArICdweCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgaW5kaWNhdG9yc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwSW5kaWNhdG9yc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEluZGljYXRvcnMoKSB7XG4gICAgICAgIHZhciBfdGhpczQzID0gdGhpcztcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgICB0aGlzLiRpbmRpY2F0b3JzID0gJCgnPHVsIGNsYXNzPVwiaW5kaWNhdG9yc1wiPjwvdWw+Jyk7XG4gICAgICAgICAgdGhpcy4kc2xpZGVzLmVhY2goZnVuY3Rpb24gKGVsLCBpbmRleCkge1xuICAgICAgICAgICAgdmFyICRpbmRpY2F0b3IgPSAkKCc8bGkgY2xhc3M9XCJpbmRpY2F0b3ItaXRlbVwiPjwvbGk+Jyk7XG4gICAgICAgICAgICBfdGhpczQzLiRpbmRpY2F0b3JzLmFwcGVuZCgkaW5kaWNhdG9yWzBdKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy4kaW5kaWNhdG9yc1swXSk7XG4gICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycyA9IHRoaXMuJGluZGljYXRvcnMuY2hpbGRyZW4oJ2xpLmluZGljYXRvci1pdGVtJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgaW5kaWNhdG9yc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUluZGljYXRvcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlSW5kaWNhdG9ycygpIHtcbiAgICAgICAgdGhpcy4kZWwuZmluZCgndWwuaW5kaWNhdG9ycycpLnJlbW92ZSgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEN5Y2xlIHRvIG50aCBpdGVtXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXhcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInNldFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldChpbmRleCkge1xuICAgICAgICB2YXIgX3RoaXM0NCA9IHRoaXM7XG5cbiAgICAgICAgLy8gV3JhcCBhcm91bmQgaW5kaWNlcy5cbiAgICAgICAgaWYgKGluZGV4ID49IHRoaXMuJHNsaWRlcy5sZW5ndGgpIGluZGV4ID0gMDtlbHNlIGlmIChpbmRleCA8IDApIGluZGV4ID0gdGhpcy4kc2xpZGVzLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgLy8gT25seSBkbyBpZiBpbmRleCBjaGFuZ2VzXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZUluZGV4ICE9IGluZGV4KSB7XG4gICAgICAgICAgdGhpcy4kYWN0aXZlID0gdGhpcy4kc2xpZGVzLmVxKHRoaXMuYWN0aXZlSW5kZXgpO1xuICAgICAgICAgIHZhciAkY2FwdGlvbiA9IHRoaXMuJGFjdGl2ZS5maW5kKCcuY2FwdGlvbicpO1xuICAgICAgICAgIHRoaXMuJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuJGFjdGl2ZVswXSxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgX3RoaXM0NC4kc2xpZGVzLm5vdCgnLmFjdGl2ZScpLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICAgICAgICB0YXJnZXRzOiBlbCxcbiAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgICAgICAgICAgdHJhbnNsYXRlWTogMCxcbiAgICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAwLFxuICAgICAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy5fYW5pbWF0ZUNhcHRpb25JbigkY2FwdGlvblswXSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uKTtcblxuICAgICAgICAgIC8vIFVwZGF0ZSBpbmRpY2F0b3JzXG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3JzLmVxKHRoaXMuYWN0aXZlSW5kZXgpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuJHNsaWRlcy5lcShpbmRleClbMF0sXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRzbGlkZXMuZXEoaW5kZXgpLmZpbmQoJy5jYXB0aW9uJylbMF0sXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgdHJhbnNsYXRlWDogMCxcbiAgICAgICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgZGVsYXk6IHRoaXMub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgdGhpcy4kc2xpZGVzLmVxKGluZGV4KS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgdGhpcy5hY3RpdmVJbmRleCA9IGluZGV4O1xuXG4gICAgICAgICAgLy8gUmVzZXQgaW50ZXJ2YWxcbiAgICAgICAgICB0aGlzLnN0YXJ0KCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBQYXVzZSBzbGlkZXIgaW50ZXJ2YWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInBhdXNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU3RhcnQgc2xpZGVyIGludGVydmFsXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzdGFydFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHN0YXJ0KCkge1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMuaW50ZXJ2YWwpO1xuICAgICAgICB0aGlzLmludGVydmFsID0gc2V0SW50ZXJ2YWwodGhpcy5faGFuZGxlSW50ZXJ2YWxCb3VuZCwgdGhpcy5vcHRpb25zLmR1cmF0aW9uICsgdGhpcy5vcHRpb25zLmludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBNb3ZlIHRvIG5leHQgc2xpZGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm5leHRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KCkge1xuICAgICAgICB2YXIgbmV3SW5kZXggPSB0aGlzLmFjdGl2ZUluZGV4ICsgMTtcblxuICAgICAgICAvLyBXcmFwIGFyb3VuZCBpbmRpY2VzLlxuICAgICAgICBpZiAobmV3SW5kZXggPj0gdGhpcy4kc2xpZGVzLmxlbmd0aCkgbmV3SW5kZXggPSAwO2Vsc2UgaWYgKG5ld0luZGV4IDwgMCkgbmV3SW5kZXggPSB0aGlzLiRzbGlkZXMubGVuZ3RoIC0gMTtcblxuICAgICAgICB0aGlzLnNldChuZXdJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogTW92ZSB0byBwcmV2aW91cyBzbGlkZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicHJldlwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXYoKSB7XG4gICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXggLSAxO1xuXG4gICAgICAgIC8vIFdyYXAgYXJvdW5kIGluZGljZXMuXG4gICAgICAgIGlmIChuZXdJbmRleCA+PSB0aGlzLiRzbGlkZXMubGVuZ3RoKSBuZXdJbmRleCA9IDA7ZWxzZSBpZiAobmV3SW5kZXggPCAwKSBuZXdJbmRleCA9IHRoaXMuJHNsaWRlcy5sZW5ndGggLSAxO1xuXG4gICAgICAgIHRoaXMuc2V0KG5ld0luZGV4KTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoU2xpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2xpZGVyKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fU2xpZGVyO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFNsaWRlcjtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uU2xpZGVyID0gU2xpZGVyO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoU2xpZGVyLCAnc2xpZGVyJywgJ01fU2xpZGVyJyk7XG4gIH1cbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAkKGRvY3VtZW50KS5vbignY2xpY2snLCAnLmNhcmQnLCBmdW5jdGlvbiAoZSkge1xuICAgIGlmICgkKHRoaXMpLmNoaWxkcmVuKCcuY2FyZC1yZXZlYWwnKS5sZW5ndGgpIHtcbiAgICAgIHZhciAkY2FyZCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jYXJkJyk7XG4gICAgICBpZiAoJGNhcmQuZGF0YSgnaW5pdGlhbE92ZXJmbG93JykgPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAkY2FyZC5kYXRhKCdpbml0aWFsT3ZlcmZsb3cnLCAkY2FyZC5jc3MoJ292ZXJmbG93JykgPT09IHVuZGVmaW5lZCA/ICcnIDogJGNhcmQuY3NzKCdvdmVyZmxvdycpKTtcbiAgICAgIH1cbiAgICAgIHZhciAkY2FyZFJldmVhbCA9ICQodGhpcykuZmluZCgnLmNhcmQtcmV2ZWFsJyk7XG4gICAgICBpZiAoJChlLnRhcmdldCkuaXMoJCgnLmNhcmQtcmV2ZWFsIC5jYXJkLXRpdGxlJykpIHx8ICQoZS50YXJnZXQpLmlzKCQoJy5jYXJkLXJldmVhbCAuY2FyZC10aXRsZSBpJykpKSB7XG4gICAgICAgIC8vIE1ha2UgUmV2ZWFsIGFuaW1hdGUgZG93biBhbmQgZGlzcGxheSBub25lXG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6ICRjYXJkUmV2ZWFsWzBdLFxuICAgICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IDIyNSxcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgICAgIHZhciBlbCA9IGFuaW0uYW5pbWF0YWJsZXNbMF0udGFyZ2V0O1xuICAgICAgICAgICAgJChlbCkuY3NzKHsgZGlzcGxheTogJ25vbmUnIH0pO1xuICAgICAgICAgICAgJGNhcmQuY3NzKCdvdmVyZmxvdycsICRjYXJkLmRhdGEoJ2luaXRpYWxPdmVyZmxvdycpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIGlmICgkKGUudGFyZ2V0KS5pcygkKCcuY2FyZCAuYWN0aXZhdG9yJykpIHx8ICQoZS50YXJnZXQpLmlzKCQoJy5jYXJkIC5hY3RpdmF0b3IgaScpKSkge1xuICAgICAgICAkY2FyZC5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICAkY2FyZFJldmVhbC5jc3MoeyBkaXNwbGF5OiAnYmxvY2snIH0pO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiAkY2FyZFJldmVhbFswXSxcbiAgICAgICAgICB0cmFuc2xhdGVZOiAnLTEwMCUnLFxuICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZUluT3V0UXVhZCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfVxuICB9KTtcbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBkYXRhOiBbXSxcbiAgICBwbGFjZWhvbGRlcjogJycsXG4gICAgc2Vjb25kYXJ5UGxhY2Vob2xkZXI6ICcnLFxuICAgIGF1dG9jb21wbGV0ZU9wdGlvbnM6IHt9LFxuICAgIGxpbWl0OiBJbmZpbml0eSxcbiAgICBvbkNoaXBBZGQ6IG51bGwsXG4gICAgb25DaGlwU2VsZWN0OiBudWxsLFxuICAgIG9uQ2hpcERlbGV0ZTogbnVsbFxuICB9O1xuXG4gIC8qKlxuICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBjaGlwXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSB0YWcgIGNoaXAgdGFnIHN0cmluZ1xuICAgKiBAcHJvcGVydHkge1N0cmluZ30gW2ltYWdlXSAgY2hpcCBhdmF0YXIgaW1hZ2Ugc3RyaW5nXG4gICAqL1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIENoaXBzID0gZnVuY3Rpb24gKF9Db21wb25lbnQxMikge1xuICAgIF9pbmhlcml0cyhDaGlwcywgX0NvbXBvbmVudDEyKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBDaGlwcyBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXlcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDaGlwcyhlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENoaXBzKTtcblxuICAgICAgdmFyIF90aGlzNDUgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2hpcHMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDaGlwcykpLmNhbGwodGhpcywgQ2hpcHMsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzNDUuZWwuTV9DaGlwcyA9IF90aGlzNDU7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIG1vZGFsXG4gICAgICAgKiBAbWVtYmVyIENoaXBzI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtBcnJheX0gZGF0YVxuICAgICAgICogQHByb3Age1N0cmluZ30gcGxhY2Vob2xkZXJcbiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IHNlY29uZGFyeVBsYWNlaG9sZGVyXG4gICAgICAgKiBAcHJvcCB7T2JqZWN0fSBhdXRvY29tcGxldGVPcHRpb25zXG4gICAgICAgKi9cbiAgICAgIF90aGlzNDUub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDaGlwcy5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzNDUuJGVsLmFkZENsYXNzKCdjaGlwcyBpbnB1dC1maWVsZCcpO1xuICAgICAgX3RoaXM0NS5jaGlwc0RhdGEgPSBbXTtcbiAgICAgIF90aGlzNDUuJGNoaXBzID0gJCgpO1xuICAgICAgX3RoaXM0NS5fc2V0dXBJbnB1dCgpO1xuICAgICAgX3RoaXM0NS5oYXNBdXRvY29tcGxldGUgPSBPYmplY3Qua2V5cyhfdGhpczQ1Lm9wdGlvbnMuYXV0b2NvbXBsZXRlT3B0aW9ucykubGVuZ3RoID4gMDtcblxuICAgICAgLy8gU2V0IGlucHV0IGlkXG4gICAgICBpZiAoIV90aGlzNDUuJGlucHV0LmF0dHIoJ2lkJykpIHtcbiAgICAgICAgX3RoaXM0NS4kaW5wdXQuYXR0cignaWQnLCBNLmd1aWQoKSk7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbmRlciBpbml0aWFsIGNoaXBzXG4gICAgICBpZiAoX3RoaXM0NS5vcHRpb25zLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgIF90aGlzNDUuY2hpcHNEYXRhID0gX3RoaXM0NS5vcHRpb25zLmRhdGE7XG4gICAgICAgIF90aGlzNDUuX3JlbmRlckNoaXBzKF90aGlzNDUuY2hpcHNEYXRhKTtcbiAgICAgIH1cblxuICAgICAgLy8gU2V0dXAgYXV0b2NvbXBsZXRlIGlmIG5lZWRlZFxuICAgICAgaWYgKF90aGlzNDUuaGFzQXV0b2NvbXBsZXRlKSB7XG4gICAgICAgIF90aGlzNDUuX3NldHVwQXV0b2NvbXBsZXRlKCk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzNDUuX3NldFBsYWNlaG9sZGVyKCk7XG4gICAgICBfdGhpczQ1Ll9zZXR1cExhYmVsKCk7XG4gICAgICBfdGhpczQ1Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczQ1O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDaGlwcywgW3tcbiAgICAgIGtleTogXCJnZXREYXRhXCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgQ2hpcHMgRGF0YVxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0RGF0YSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuY2hpcHNEYXRhO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy4kY2hpcHMucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuZWwuTV9DaGlwcyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNoaXBDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlQ2hpcENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0Rm9jdXNCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0Rm9jdXMuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRCbHVyQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEJsdXIuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2hpcENsaWNrQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgQ2hpcHMuX2hhbmRsZUNoaXBzS2V5ZG93bik7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgQ2hpcHMuX2hhbmRsZUNoaXBzS2V5dXApO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBDaGlwcy5faGFuZGxlQ2hpcHNCbHVyLCB0cnVlKTtcbiAgICAgICAgdGhpcy4kaW5wdXRbMF0uYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVJbnB1dEZvY3VzQm91bmQpO1xuICAgICAgICB0aGlzLiRpbnB1dFswXS5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlSW5wdXRCbHVyQm91bmQpO1xuICAgICAgICB0aGlzLiRpbnB1dFswXS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNoaXBDbGlja0JvdW5kKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIENoaXBzLl9oYW5kbGVDaGlwc0tleWRvd24pO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIENoaXBzLl9oYW5kbGVDaGlwc0tleXVwKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgQ2hpcHMuX2hhbmRsZUNoaXBzQmx1ciwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuJGlucHV0WzBdLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlSW5wdXRGb2N1c0JvdW5kKTtcbiAgICAgICAgdGhpcy4kaW5wdXRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZUlucHV0Qmx1ckJvdW5kKTtcbiAgICAgICAgdGhpcy4kaW5wdXRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgQ2hpcCBDbGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNoaXBDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDaGlwQ2xpY2soZSkge1xuICAgICAgICB2YXIgJGNoaXAgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2hpcCcpO1xuICAgICAgICB2YXIgY2xpY2tlZENsb3NlID0gJChlLnRhcmdldCkuaXMoJy5jbG9zZScpO1xuICAgICAgICBpZiAoJGNoaXAubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGluZGV4ID0gJGNoaXAuaW5kZXgoKTtcbiAgICAgICAgICBpZiAoY2xpY2tlZENsb3NlKSB7XG4gICAgICAgICAgICAvLyBkZWxldGUgY2hpcFxuICAgICAgICAgICAgdGhpcy5kZWxldGVDaGlwKGluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuJGlucHV0WzBdLmZvY3VzKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIHNlbGVjdCBjaGlwXG4gICAgICAgICAgICB0aGlzLnNlbGVjdENoaXAoaW5kZXgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIERlZmF1bHQgaGFuZGxlIGNsaWNrIHRvIGZvY3VzIG9uIGlucHV0XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kaW5wdXRbMF0uZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDaGlwcyBLZXlkb3duXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRGb2N1c1wiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIElucHV0IEZvY3VzXG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRGb2N1cygpIHtcbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2ZvY3VzJyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIElucHV0IEJsdXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dEJsdXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRCbHVyKCkge1xuICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygnZm9jdXMnKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW5wdXQgS2V5ZG93blxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0S2V5ZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEtleWRvd24oZSkge1xuICAgICAgICBDaGlwcy5fa2V5ZG93biA9IHRydWU7XG5cbiAgICAgICAgLy8gZW50ZXJcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMTMpIHtcbiAgICAgICAgICAvLyBPdmVycmlkZSBlbnRlciBpZiBhdXRvY29tcGxldGluZy5cbiAgICAgICAgICBpZiAodGhpcy5oYXNBdXRvY29tcGxldGUgJiYgdGhpcy5hdXRvY29tcGxldGUgJiYgdGhpcy5hdXRvY29tcGxldGUuaXNPcGVuKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuYWRkQ2hpcCh7XG4gICAgICAgICAgICB0YWc6IHRoaXMuJGlucHV0WzBdLnZhbHVlXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy4kaW5wdXRbMF0udmFsdWUgPSAnJztcblxuICAgICAgICAgIC8vIGRlbGV0ZSBvciBsZWZ0XG4gICAgICAgIH0gZWxzZSBpZiAoKGUua2V5Q29kZSA9PT0gOCB8fCBlLmtleUNvZGUgPT09IDM3KSAmJiB0aGlzLiRpbnB1dFswXS52YWx1ZSA9PT0gJycgJiYgdGhpcy5jaGlwc0RhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMuc2VsZWN0Q2hpcCh0aGlzLmNoaXBzRGF0YS5sZW5ndGggLSAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbmRlciBDaGlwXG4gICAgICAgKiBAcGFyYW0ge2NoaXB9IGNoaXBcbiAgICAgICAqIEByZXR1cm4ge0VsZW1lbnR9XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVuZGVyQ2hpcFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXJDaGlwKGNoaXApIHtcbiAgICAgICAgaWYgKCFjaGlwLnRhZykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZW5kZXJlZENoaXAgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdmFyIGNsb3NlSWNvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2knKTtcbiAgICAgICAgcmVuZGVyZWRDaGlwLmNsYXNzTGlzdC5hZGQoJ2NoaXAnKTtcbiAgICAgICAgcmVuZGVyZWRDaGlwLnRleHRDb250ZW50ID0gY2hpcC50YWc7XG4gICAgICAgIHJlbmRlcmVkQ2hpcC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMCk7XG4gICAgICAgICQoY2xvc2VJY29uKS5hZGRDbGFzcygnbWF0ZXJpYWwtaWNvbnMgY2xvc2UnKTtcbiAgICAgICAgY2xvc2VJY29uLnRleHRDb250ZW50ID0gJ2Nsb3NlJztcblxuICAgICAgICAvLyBhdHRhY2ggaW1hZ2UgaWYgbmVlZGVkXG4gICAgICAgIGlmIChjaGlwLmltYWdlKSB7XG4gICAgICAgICAgdmFyIGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgICAgICAgIGltZy5zZXRBdHRyaWJ1dGUoJ3NyYycsIGNoaXAuaW1hZ2UpO1xuICAgICAgICAgIHJlbmRlcmVkQ2hpcC5pbnNlcnRCZWZvcmUoaW1nLCByZW5kZXJlZENoaXAuZmlyc3RDaGlsZCk7XG4gICAgICAgIH1cblxuICAgICAgICByZW5kZXJlZENoaXAuYXBwZW5kQ2hpbGQoY2xvc2VJY29uKTtcbiAgICAgICAgcmV0dXJuIHJlbmRlcmVkQ2hpcDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW5kZXIgQ2hpcHNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW5kZXJDaGlwc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW5kZXJDaGlwcygpIHtcbiAgICAgICAgdGhpcy4kY2hpcHMucmVtb3ZlKCk7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jaGlwc0RhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICB2YXIgY2hpcEVsID0gdGhpcy5fcmVuZGVyQ2hpcCh0aGlzLmNoaXBzRGF0YVtpXSk7XG4gICAgICAgICAgdGhpcy4kZWwuYXBwZW5kKGNoaXBFbCk7XG4gICAgICAgICAgdGhpcy4kY2hpcHMuYWRkKGNoaXBFbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtb3ZlIGlucHV0IHRvIGVuZFxuICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy4kaW5wdXRbMF0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEF1dG9jb21wbGV0ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwQXV0b2NvbXBsZXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwQXV0b2NvbXBsZXRlKCkge1xuICAgICAgICB2YXIgX3RoaXM0NiA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5vcHRpb25zLmF1dG9jb21wbGV0ZU9wdGlvbnMub25BdXRvY29tcGxldGUgPSBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgX3RoaXM0Ni5hZGRDaGlwKHtcbiAgICAgICAgICAgIHRhZzogdmFsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX3RoaXM0Ni4kaW5wdXRbMF0udmFsdWUgPSAnJztcbiAgICAgICAgICBfdGhpczQ2LiRpbnB1dFswXS5mb2N1cygpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMuYXV0b2NvbXBsZXRlID0gTS5BdXRvY29tcGxldGUuaW5pdCh0aGlzLiRpbnB1dFswXSwgdGhpcy5vcHRpb25zLmF1dG9jb21wbGV0ZU9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIElucHV0XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBJbnB1dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cElucHV0KCkge1xuICAgICAgICB0aGlzLiRpbnB1dCA9IHRoaXMuJGVsLmZpbmQoJ2lucHV0Jyk7XG4gICAgICAgIGlmICghdGhpcy4kaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy4kaW5wdXQgPSAkKCc8aW5wdXQ+PC9pbnB1dD4nKTtcbiAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQodGhpcy4kaW5wdXQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kaW5wdXQuYWRkQ2xhc3MoJ2lucHV0Jyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgTGFiZWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cExhYmVsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwTGFiZWwoKSB7XG4gICAgICAgIHRoaXMuJGxhYmVsID0gdGhpcy4kZWwuZmluZCgnbGFiZWwnKTtcbiAgICAgICAgaWYgKHRoaXMuJGxhYmVsLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuJGxhYmVsLnNldEF0dHJpYnV0ZSgnZm9yJywgdGhpcy4kaW5wdXQuYXR0cignaWQnKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgcGxhY2Vob2xkZXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRQbGFjZWhvbGRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRQbGFjZWhvbGRlcigpIHtcbiAgICAgICAgaWYgKHRoaXMuY2hpcHNEYXRhICE9PSB1bmRlZmluZWQgJiYgIXRoaXMuY2hpcHNEYXRhLmxlbmd0aCAmJiB0aGlzLm9wdGlvbnMucGxhY2Vob2xkZXIpIHtcbiAgICAgICAgICAkKHRoaXMuJGlucHV0KS5wcm9wKCdwbGFjZWhvbGRlcicsIHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcik7XG4gICAgICAgIH0gZWxzZSBpZiAoKHRoaXMuY2hpcHNEYXRhID09PSB1bmRlZmluZWQgfHwgISF0aGlzLmNoaXBzRGF0YS5sZW5ndGgpICYmIHRoaXMub3B0aW9ucy5zZWNvbmRhcnlQbGFjZWhvbGRlcikge1xuICAgICAgICAgICQodGhpcy4kaW5wdXQpLnByb3AoJ3BsYWNlaG9sZGVyJywgdGhpcy5vcHRpb25zLnNlY29uZGFyeVBsYWNlaG9sZGVyKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENoZWNrIGlmIGNoaXAgaXMgdmFsaWRcbiAgICAgICAqIEBwYXJhbSB7Y2hpcH0gY2hpcFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2lzVmFsaWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNWYWxpZChjaGlwKSB7XG4gICAgICAgIGlmIChjaGlwLmhhc093blByb3BlcnR5KCd0YWcnKSAmJiBjaGlwLnRhZyAhPT0gJycpIHtcbiAgICAgICAgICB2YXIgZXhpc3RzID0gZmFsc2U7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaXBzRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaWYgKHRoaXMuY2hpcHNEYXRhW2ldLnRhZyA9PT0gY2hpcC50YWcpIHtcbiAgICAgICAgICAgICAgZXhpc3RzID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiAhZXhpc3RzO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFkZCBjaGlwXG4gICAgICAgKiBAcGFyYW0ge2NoaXB9IGNoaXBcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImFkZENoaXBcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGRDaGlwKGNoaXApIHtcbiAgICAgICAgaWYgKCF0aGlzLl9pc1ZhbGlkKGNoaXApIHx8IHRoaXMuY2hpcHNEYXRhLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubGltaXQpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmVuZGVyZWRDaGlwID0gdGhpcy5fcmVuZGVyQ2hpcChjaGlwKTtcbiAgICAgICAgdGhpcy4kY2hpcHMuYWRkKHJlbmRlcmVkQ2hpcCk7XG4gICAgICAgIHRoaXMuY2hpcHNEYXRhLnB1c2goY2hpcCk7XG4gICAgICAgICQodGhpcy4kaW5wdXQpLmJlZm9yZShyZW5kZXJlZENoaXApO1xuICAgICAgICB0aGlzLl9zZXRQbGFjZWhvbGRlcigpO1xuXG4gICAgICAgIC8vIGZpcmUgY2hpcEFkZCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNoaXBBZGQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25DaGlwQWRkLmNhbGwodGhpcywgdGhpcy4kZWwsIHJlbmRlcmVkQ2hpcCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBEZWxldGUgY2hpcFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGNoaXBcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImRlbGV0ZUNoaXBcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZWxldGVDaGlwKGNoaXBJbmRleCkge1xuICAgICAgICB2YXIgJGNoaXAgPSB0aGlzLiRjaGlwcy5lcShjaGlwSW5kZXgpO1xuICAgICAgICB0aGlzLiRjaGlwcy5lcShjaGlwSW5kZXgpLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLiRjaGlwcyA9IHRoaXMuJGNoaXBzLmZpbHRlcihmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICByZXR1cm4gJChlbCkuaW5kZXgoKSA+PSAwO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5jaGlwc0RhdGEuc3BsaWNlKGNoaXBJbmRleCwgMSk7XG4gICAgICAgIHRoaXMuX3NldFBsYWNlaG9sZGVyKCk7XG5cbiAgICAgICAgLy8gZmlyZSBjaGlwRGVsZXRlIGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2hpcERlbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNoaXBEZWxldGUuY2FsbCh0aGlzLCB0aGlzLiRlbCwgJGNoaXBbMF0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2VsZWN0IGNoaXBcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBjaGlwXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZWxlY3RDaGlwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0Q2hpcChjaGlwSW5kZXgpIHtcbiAgICAgICAgdmFyICRjaGlwID0gdGhpcy4kY2hpcHMuZXEoY2hpcEluZGV4KTtcbiAgICAgICAgdGhpcy5fc2VsZWN0ZWRDaGlwID0gJGNoaXA7XG4gICAgICAgICRjaGlwWzBdLmZvY3VzKCk7XG5cbiAgICAgICAgLy8gZmlyZSBjaGlwU2VsZWN0IGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2hpcFNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNoaXBTZWxlY3QuY2FsbCh0aGlzLCB0aGlzLiRlbCwgJGNoaXBbMF0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KENoaXBzLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2hpcHMpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9DaGlwcztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNoaXBzS2V5ZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDaGlwc0tleWRvd24oZSkge1xuICAgICAgICBDaGlwcy5fa2V5ZG93biA9IHRydWU7XG5cbiAgICAgICAgdmFyICRjaGlwcyA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jaGlwcycpO1xuICAgICAgICB2YXIgY2hpcHNLZXlkb3duID0gZS50YXJnZXQgJiYgJGNoaXBzLmxlbmd0aDtcblxuICAgICAgICAvLyBEb24ndCBoYW5kbGUga2V5ZG93biBpbnB1dHMgb24gaW5wdXQgYW5kIHRleHRhcmVhXG4gICAgICAgIGlmICgkKGUudGFyZ2V0KS5pcygnaW5wdXQsIHRleHRhcmVhJykgfHwgIWNoaXBzS2V5ZG93bikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBjdXJyQ2hpcHMgPSAkY2hpcHNbMF0uTV9DaGlwcztcblxuICAgICAgICAvLyBiYWNrc3BhY2UgYW5kIGRlbGV0ZVxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSA4IHx8IGUua2V5Q29kZSA9PT0gNDYpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICB2YXIgc2VsZWN0SW5kZXggPSBjdXJyQ2hpcHMuY2hpcHNEYXRhLmxlbmd0aDtcbiAgICAgICAgICBpZiAoY3VyckNoaXBzLl9zZWxlY3RlZENoaXApIHtcbiAgICAgICAgICAgIHZhciBpbmRleCA9IGN1cnJDaGlwcy5fc2VsZWN0ZWRDaGlwLmluZGV4KCk7XG4gICAgICAgICAgICBjdXJyQ2hpcHMuZGVsZXRlQ2hpcChpbmRleCk7XG4gICAgICAgICAgICBjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcCA9IG51bGw7XG5cbiAgICAgICAgICAgIC8vIE1ha2Ugc3VyZSBzZWxlY3RJbmRleCBkb2Vzbid0IGdvIG5lZ2F0aXZlXG4gICAgICAgICAgICBzZWxlY3RJbmRleCA9IE1hdGgubWF4KGluZGV4IC0gMSwgMCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGN1cnJDaGlwcy5jaGlwc0RhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICBjdXJyQ2hpcHMuc2VsZWN0Q2hpcChzZWxlY3RJbmRleCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbGVmdCBhcnJvdyBrZXlcbiAgICAgICAgfSBlbHNlIGlmIChlLmtleUNvZGUgPT09IDM3KSB7XG4gICAgICAgICAgaWYgKGN1cnJDaGlwcy5fc2VsZWN0ZWRDaGlwKSB7XG4gICAgICAgICAgICB2YXIgX3NlbGVjdEluZGV4ID0gY3VyckNoaXBzLl9zZWxlY3RlZENoaXAuaW5kZXgoKSAtIDE7XG4gICAgICAgICAgICBpZiAoX3NlbGVjdEluZGV4IDwgMCkge1xuICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjdXJyQ2hpcHMuc2VsZWN0Q2hpcChfc2VsZWN0SW5kZXgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHJpZ2h0IGFycm93IGtleVxuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzkpIHtcbiAgICAgICAgICBpZiAoY3VyckNoaXBzLl9zZWxlY3RlZENoaXApIHtcbiAgICAgICAgICAgIHZhciBfc2VsZWN0SW5kZXgyID0gY3VyckNoaXBzLl9zZWxlY3RlZENoaXAuaW5kZXgoKSArIDE7XG5cbiAgICAgICAgICAgIGlmIChfc2VsZWN0SW5kZXgyID49IGN1cnJDaGlwcy5jaGlwc0RhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGN1cnJDaGlwcy4kaW5wdXRbMF0uZm9jdXMoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGN1cnJDaGlwcy5zZWxlY3RDaGlwKF9zZWxlY3RJbmRleDIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDaGlwcyBLZXl1cFxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNoaXBzS2V5dXBcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2hpcHNLZXl1cChlKSB7XG4gICAgICAgIENoaXBzLl9rZXlkb3duID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENoaXBzIEJsdXJcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDaGlwc0JsdXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2hpcHNCbHVyKGUpIHtcbiAgICAgICAgaWYgKCFDaGlwcy5fa2V5ZG93bikge1xuICAgICAgICAgIHZhciAkY2hpcHMgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuY2hpcHMnKTtcbiAgICAgICAgICB2YXIgY3VyckNoaXBzID0gJGNoaXBzWzBdLk1fQ2hpcHM7XG5cbiAgICAgICAgICBjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcCA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDaGlwcztcbiAgfShDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBDaGlwc1xuICAgKi9cblxuXG4gIENoaXBzLl9rZXlkb3duID0gZmFsc2U7XG5cbiAgTS5DaGlwcyA9IENoaXBzO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoQ2hpcHMsICdjaGlwcycsICdNX0NoaXBzJyk7XG4gIH1cblxuICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgLy8gSGFuZGxlIHJlbW92YWwgb2Ygc3RhdGljIGNoaXBzLlxuICAgICQoZG9jdW1lbnQuYm9keSkub24oJ2NsaWNrJywgJy5jaGlwIC5jbG9zZScsIGZ1bmN0aW9uICgpIHtcbiAgICAgIHZhciAkY2hpcHMgPSAkKHRoaXMpLmNsb3Nlc3QoJy5jaGlwcycpO1xuICAgICAgaWYgKCRjaGlwcy5sZW5ndGggJiYgJGNoaXBzWzBdLk1fQ2hpcHMpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgJCh0aGlzKS5jbG9zZXN0KCcuY2hpcCcpLnJlbW92ZSgpO1xuICAgIH0pO1xuICB9KTtcbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICB0b3A6IDAsXG4gICAgYm90dG9tOiBJbmZpbml0eSxcbiAgICBvZmZzZXQ6IDAsXG4gICAgb25Qb3NpdGlvbkNoYW5nZTogbnVsbFxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIFB1c2hwaW4gPSBmdW5jdGlvbiAoX0NvbXBvbmVudDEzKSB7XG4gICAgX2luaGVyaXRzKFB1c2hwaW4sIF9Db21wb25lbnQxMyk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgUHVzaHBpbiBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIFB1c2hwaW4oZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBQdXNocGluKTtcblxuICAgICAgdmFyIF90aGlzNDcgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUHVzaHBpbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFB1c2hwaW4pKS5jYWxsKHRoaXMsIFB1c2hwaW4sIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzNDcuZWwuTV9QdXNocGluID0gX3RoaXM0NztcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgbW9kYWxcbiAgICAgICAqIEBtZW1iZXIgUHVzaHBpbiNvcHRpb25zXG4gICAgICAgKi9cbiAgICAgIF90aGlzNDcub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBQdXNocGluLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXM0Ny5vcmlnaW5hbE9mZnNldCA9IF90aGlzNDcuZWwub2Zmc2V0VG9wO1xuICAgICAgUHVzaHBpbi5fcHVzaHBpbnMucHVzaChfdGhpczQ3KTtcbiAgICAgIF90aGlzNDcuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgX3RoaXM0Ny5fdXBkYXRlUG9zaXRpb24oKTtcbiAgICAgIHJldHVybiBfdGhpczQ3O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhQdXNocGluLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSBudWxsO1xuICAgICAgICB0aGlzLl9yZW1vdmVQaW5DbGFzc2VzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcblxuICAgICAgICAvLyBSZW1vdmUgcHVzaHBpbiBJbnN0XG4gICAgICAgIHZhciBpbmRleCA9IFB1c2hwaW4uX3B1c2hwaW5zLmluZGV4T2YodGhpcyk7XG4gICAgICAgIFB1c2hwaW4uX3B1c2hwaW5zLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBQdXNocGluLl91cGRhdGVFbGVtZW50cyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIFB1c2hwaW4uX3VwZGF0ZUVsZW1lbnRzKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3VwZGF0ZVBvc2l0aW9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVBvc2l0aW9uKCkge1xuICAgICAgICB2YXIgc2Nyb2xsZWQgPSBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCkgKyB0aGlzLm9wdGlvbnMub2Zmc2V0O1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9wIDw9IHNjcm9sbGVkICYmIHRoaXMub3B0aW9ucy5ib3R0b20gPj0gc2Nyb2xsZWQgJiYgIXRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaW5uZWQnKSkge1xuICAgICAgICAgIHRoaXMuX3JlbW92ZVBpbkNsYXNzZXMoKTtcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRvcCA9IHRoaXMub3B0aW9ucy5vZmZzZXQgKyBcInB4XCI7XG4gICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdwaW5uZWQnKTtcblxuICAgICAgICAgIC8vIG9uUG9zaXRpb25DaGFuZ2UgY2FsbGJhY2tcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vblBvc2l0aW9uQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Qb3NpdGlvbkNoYW5nZS5jYWxsKHRoaXMsICdwaW5uZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgcGluLXRvcCAod2hlbiBzY3JvbGxlZCBwb3NpdGlvbiBpcyBhYm92ZSB0b3ApXG4gICAgICAgIGlmIChzY3JvbGxlZCA8IHRoaXMub3B0aW9ucy50b3AgJiYgIXRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaW4tdG9wJykpIHtcbiAgICAgICAgICB0aGlzLl9yZW1vdmVQaW5DbGFzc2VzKCk7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSAwO1xuICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgncGluLXRvcCcpO1xuXG4gICAgICAgICAgLy8gb25Qb3NpdGlvbkNoYW5nZSBjYWxsYmFja1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uUG9zaXRpb25DaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblBvc2l0aW9uQ2hhbmdlLmNhbGwodGhpcywgJ3Bpbi10b3AnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgcGluLWJvdHRvbSAod2hlbiBzY3JvbGxlZCBwb3NpdGlvbiBpcyBiZWxvdyBib3R0b20pXG4gICAgICAgIGlmIChzY3JvbGxlZCA+IHRoaXMub3B0aW9ucy5ib3R0b20gJiYgIXRoaXMuZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdwaW4tYm90dG9tJykpIHtcbiAgICAgICAgICB0aGlzLl9yZW1vdmVQaW5DbGFzc2VzKCk7XG4gICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdwaW4tYm90dG9tJyk7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS50b3AgPSB0aGlzLm9wdGlvbnMuYm90dG9tIC0gdGhpcy5vcmlnaW5hbE9mZnNldCArIFwicHhcIjtcblxuICAgICAgICAgIC8vIG9uUG9zaXRpb25DaGFuZ2UgY2FsbGJhY2tcbiAgICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vblBvc2l0aW9uQ2hhbmdlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25Qb3NpdGlvbkNoYW5nZS5jYWxsKHRoaXMsICdwaW4tYm90dG9tJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVQaW5DbGFzc2VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZVBpbkNsYXNzZXMoKSB7XG4gICAgICAgIC8vIElFIDExIGJ1ZyAoY2FuJ3QgcmVtb3ZlIG11bHRpcGxlIGNsYXNzZXMgaW4gb25lIGxpbmUpXG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgncGluLXRvcCcpO1xuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Bpbm5lZCcpO1xuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Bpbi1ib3R0b20nKTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoUHVzaHBpbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFB1c2hwaW4pLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9QdXNocGluO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdXBkYXRlRWxlbWVudHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlRWxlbWVudHMoKSB7XG4gICAgICAgIGZvciAodmFyIGVsSW5kZXggaW4gUHVzaHBpbi5fcHVzaHBpbnMpIHtcbiAgICAgICAgICB2YXIgcEluc3RhbmNlID0gUHVzaHBpbi5fcHVzaHBpbnNbZWxJbmRleF07XG4gICAgICAgICAgcEluc3RhbmNlLl91cGRhdGVQb3NpdGlvbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gUHVzaHBpbjtcbiAgfShDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBQdXNocGluXG4gICAqL1xuXG5cbiAgUHVzaHBpbi5fcHVzaHBpbnMgPSBbXTtcblxuICBNLlB1c2hwaW4gPSBQdXNocGluO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoUHVzaHBpbiwgJ3B1c2hwaW4nLCAnTV9QdXNocGluJyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBkaXJlY3Rpb246ICd0b3AnLFxuICAgIGhvdmVyRW5hYmxlZDogdHJ1ZSxcbiAgICB0b29sYmFyRW5hYmxlZDogZmFsc2VcbiAgfTtcblxuICAkLmZuLnJldmVyc2UgPSBbXS5yZXZlcnNlO1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIEZsb2F0aW5nQWN0aW9uQnV0dG9uID0gZnVuY3Rpb24gKF9Db21wb25lbnQxNCkge1xuICAgIF9pbmhlcml0cyhGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgX0NvbXBvbmVudDE0KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBGbG9hdGluZ0FjdGlvbkJ1dHRvbiBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIEZsb2F0aW5nQWN0aW9uQnV0dG9uKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRmxvYXRpbmdBY3Rpb25CdXR0b24pO1xuXG4gICAgICB2YXIgX3RoaXM0OCA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGbG9hdGluZ0FjdGlvbkJ1dHRvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZsb2F0aW5nQWN0aW9uQnV0dG9uKSkuY2FsbCh0aGlzLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM0OC5lbC5NX0Zsb2F0aW5nQWN0aW9uQnV0dG9uID0gX3RoaXM0ODtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgZmFiXG4gICAgICAgKiBAbWVtYmVyIEZsb2F0aW5nQWN0aW9uQnV0dG9uI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbZGlyZWN0aW9uXSAtIERpcmVjdGlvbiBmYWIgbWVudSBvcGVuc1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtob3ZlckVuYWJsZWQ9dHJ1ZV0gLSBFbmFibGUgaG92ZXIgdnMgY2xpY2tcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbdG9vbGJhckVuYWJsZWQ9ZmFsc2VdIC0gRW5hYmxlIHRvb2xiYXIgdHJhbnNpdGlvblxuICAgICAgICovXG4gICAgICBfdGhpczQ4Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRmxvYXRpbmdBY3Rpb25CdXR0b24uZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICBfdGhpczQ4LmlzT3BlbiA9IGZhbHNlO1xuICAgICAgX3RoaXM0OC4kYW5jaG9yID0gX3RoaXM0OC4kZWwuY2hpbGRyZW4oJ2EnKS5maXJzdCgpO1xuICAgICAgX3RoaXM0OC4kbWVudSA9IF90aGlzNDguJGVsLmNoaWxkcmVuKCd1bCcpLmZpcnN0KCk7XG4gICAgICBfdGhpczQ4LiRmbG9hdGluZ0J0bnMgPSBfdGhpczQ4LiRlbC5maW5kKCd1bCAuYnRuLWZsb2F0aW5nJyk7XG4gICAgICBfdGhpczQ4LiRmbG9hdGluZ0J0bnNSZXZlcnNlID0gX3RoaXM0OC4kZWwuZmluZCgndWwgLmJ0bi1mbG9hdGluZycpLnJldmVyc2UoKTtcbiAgICAgIF90aGlzNDgub2Zmc2V0WSA9IDA7XG4gICAgICBfdGhpczQ4Lm9mZnNldFggPSAwO1xuXG4gICAgICBfdGhpczQ4LiRlbC5hZGRDbGFzcyhcImRpcmVjdGlvbi1cIiArIF90aGlzNDgub3B0aW9ucy5kaXJlY3Rpb24pO1xuICAgICAgaWYgKF90aGlzNDgub3B0aW9ucy5kaXJlY3Rpb24gPT09ICd0b3AnKSB7XG4gICAgICAgIF90aGlzNDgub2Zmc2V0WSA9IDQwO1xuICAgICAgfSBlbHNlIGlmIChfdGhpczQ4Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgIF90aGlzNDgub2Zmc2V0WCA9IC00MDtcbiAgICAgIH0gZWxzZSBpZiAoX3RoaXM0OC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgX3RoaXM0OC5vZmZzZXRZID0gLTQwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXM0OC5vZmZzZXRYID0gNDA7XG4gICAgICB9XG4gICAgICBfdGhpczQ4Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczQ4O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5lbC5NX0Zsb2F0aW5nQWN0aW9uQnV0dG9uID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlRkFCQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUZBQkNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZU9wZW5Cb3VuZCA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDbG9zZUJvdW5kID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaG92ZXJFbmFibGVkICYmICF0aGlzLm9wdGlvbnMudG9vbGJhckVuYWJsZWQpIHtcbiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVPcGVuQm91bmQpO1xuICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZUNsb3NlQm91bmQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVGQUJDbGlja0JvdW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ob3ZlckVuYWJsZWQgJiYgIXRoaXMub3B0aW9ucy50b29sYmFyRW5hYmxlZCkge1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuX2hhbmRsZU9wZW5Cb3VuZCk7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlQ2xvc2VCb3VuZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUZBQkNsaWNrQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIEZBQiBDbGlja1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUZBQkNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUZBQkNsaWNrKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgRG9jdW1lbnQgQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVEb2N1bWVudENsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICBpZiAoISQoZS50YXJnZXQpLmNsb3Nlc3QodGhpcy4kbWVudSkubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT3BlbiBGQUJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvb2xiYXJFbmFibGVkKSB7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0ZUluVG9vbGJhcigpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGVJbkZBQigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDbG9zZSBGQUJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnRvb2xiYXJFbmFibGVkKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX2hhbmRsZUNsb3NlQm91bmQsIHRydWUpO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQsIHRydWUpO1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGVPdXRUb29sYmFyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0ZU91dEZBQigpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2xhc3NpYyBGQUIgTWVudSBvcGVuXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUluRkFCXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbkZBQigpIHtcbiAgICAgICAgdmFyIF90aGlzNDkgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICB2YXIgdGltZSA9IDA7XG4gICAgICAgIHRoaXMuJGZsb2F0aW5nQnRuc1JldmVyc2UuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6IGVsLFxuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHNjYWxlOiBbMC40LCAxXSxcbiAgICAgICAgICAgIHRyYW5zbGF0ZVk6IFtfdGhpczQ5Lm9mZnNldFksIDBdLFxuICAgICAgICAgICAgdHJhbnNsYXRlWDogW190aGlzNDkub2Zmc2V0WCwgMF0sXG4gICAgICAgICAgICBkdXJhdGlvbjogMjc1LFxuICAgICAgICAgICAgZGVsYXk6IHRpbWUsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRpbWUgKz0gNDA7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENsYXNzaWMgRkFCIE1lbnUgY2xvc2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlT3V0RkFCXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVPdXRGQUIoKSB7XG4gICAgICAgIHZhciBfdGhpczUwID0gdGhpcztcblxuICAgICAgICB0aGlzLiRmbG9hdGluZ0J0bnNSZXZlcnNlLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgYW5pbS5yZW1vdmUoZWwpO1xuICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgdGFyZ2V0czogZWwsXG4gICAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgICAgc2NhbGU6IDAuNCxcbiAgICAgICAgICAgIHRyYW5zbGF0ZVk6IF90aGlzNTAub2Zmc2V0WSxcbiAgICAgICAgICAgIHRyYW5zbGF0ZVg6IF90aGlzNTAub2Zmc2V0WCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAxNzUsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczUwLiRlbC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFRvb2xiYXIgdHJhbnNpdGlvbiBNZW51IG9wZW5cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5Ub29sYmFyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJblRvb2xiYXIoKSB7XG4gICAgICAgIHZhciBfdGhpczUxID0gdGhpcztcblxuICAgICAgICB2YXIgc2NhbGVGYWN0b3IgPSB2b2lkIDA7XG4gICAgICAgIHZhciB3aW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB2YXIgd2luZG93SGVpZ2h0ID0gd2luZG93LmlubmVySGVpZ2h0O1xuICAgICAgICB2YXIgYnRuUmVjdCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBiYWNrZHJvcCA9ICQoJzxkaXYgY2xhc3M9XCJmYWItYmFja2Ryb3BcIj48L2Rpdj4nKTtcbiAgICAgICAgdmFyIGZhYkNvbG9yID0gdGhpcy4kYW5jaG9yLmNzcygnYmFja2dyb3VuZC1jb2xvcicpO1xuICAgICAgICB0aGlzLiRhbmNob3IuYXBwZW5kKGJhY2tkcm9wKTtcblxuICAgICAgICB0aGlzLm9mZnNldFggPSBidG5SZWN0LmxlZnQgLSB3aW5kb3dXaWR0aCAvIDIgKyBidG5SZWN0LndpZHRoIC8gMjtcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gd2luZG93SGVpZ2h0IC0gYnRuUmVjdC5ib3R0b207XG4gICAgICAgIHNjYWxlRmFjdG9yID0gd2luZG93V2lkdGggLyBiYWNrZHJvcFswXS5jbGllbnRXaWR0aDtcbiAgICAgICAgdGhpcy5idG5Cb3R0b20gPSBidG5SZWN0LmJvdHRvbTtcbiAgICAgICAgdGhpcy5idG5MZWZ0ID0gYnRuUmVjdC5sZWZ0O1xuICAgICAgICB0aGlzLmJ0bldpZHRoID0gYnRuUmVjdC53aWR0aDtcblxuICAgICAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZVxuICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuJGVsLmNzcyh7XG4gICAgICAgICAgJ3RleHQtYWxpZ24nOiAnY2VudGVyJyxcbiAgICAgICAgICB3aWR0aDogJzEwMCUnLFxuICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICBsZWZ0OiAwLFxuICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZVgoJyArIHRoaXMub2Zmc2V0WCArICdweCknLFxuICAgICAgICAgIHRyYW5zaXRpb246ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4kYW5jaG9yLmNzcyh7XG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWSgnICsgLXRoaXMub2Zmc2V0WSArICdweCknLFxuICAgICAgICAgIHRyYW5zaXRpb246ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgICAgYmFja2Ryb3AuY3NzKHtcbiAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIF90aGlzNTEuJGVsLmNzcyh7XG4gICAgICAgICAgICB0cmFuc2Zvcm06ICcnLFxuICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA4NSwgMC42ODAsIDAuNTMwKSwgYmFja2dyb3VuZC1jb2xvciAwcyBsaW5lYXIgLjJzJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzNTEuJGFuY2hvci5jc3Moe1xuICAgICAgICAgICAgb3ZlcmZsb3c6ICd2aXNpYmxlJyxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycydcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXM1MS4kZWwuY3NzKHtcbiAgICAgICAgICAgICAgb3ZlcmZsb3c6ICdoaWRkZW4nLFxuICAgICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6IGZhYkNvbG9yXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGJhY2tkcm9wLmNzcyh7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3NjYWxlKCcgKyBzY2FsZUZhY3RvciArICcpJyxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMgY3ViaWMtYmV6aWVyKDAuNTUwLCAwLjA1NSwgMC42NzUsIDAuMTkwKSdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXM1MS4kbWVudS5jaGlsZHJlbignbGknKS5jaGlsZHJlbignYScpLmNzcyh7XG4gICAgICAgICAgICAgIG9wYWNpdHk6IDFcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAvLyBTY3JvbGwgdG8gY2xvc2UuXG4gICAgICAgICAgICBfdGhpczUxLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQgPSBfdGhpczUxLl9oYW5kbGVEb2N1bWVudENsaWNrLmJpbmQoX3RoaXM1MSk7XG4gICAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgX3RoaXM1MS5faGFuZGxlQ2xvc2VCb3VuZCwgdHJ1ZSk7XG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM1MS5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kLCB0cnVlKTtcbiAgICAgICAgICB9LCAxMDApO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBUb29sYmFyIHRyYW5zaXRpb24gTWVudSBjbG9zZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVPdXRUb29sYmFyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVPdXRUb29sYmFyKCkge1xuICAgICAgICB2YXIgX3RoaXM1MiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHZhciBiYWNrZHJvcCA9IHRoaXMuJGVsLmZpbmQoJy5mYWItYmFja2Ryb3AnKTtcbiAgICAgICAgdmFyIGZhYkNvbG9yID0gdGhpcy4kYW5jaG9yLmNzcygnYmFja2dyb3VuZC1jb2xvcicpO1xuXG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IHRoaXMuYnRuTGVmdCAtIHdpbmRvd1dpZHRoIC8gMiArIHRoaXMuYnRuV2lkdGggLyAyO1xuICAgICAgICB0aGlzLm9mZnNldFkgPSB3aW5kb3dIZWlnaHQgLSB0aGlzLmJ0bkJvdHRvbTtcblxuICAgICAgICAvLyBIaWRlIGJhY2tkcm9wXG4gICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy4kZWwuY3NzKHtcbiAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJ25vbmUnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiRhbmNob3IuY3NzKHtcbiAgICAgICAgICB0cmFuc2l0aW9uOiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgIGJhY2tkcm9wLmNzcyh7XG4gICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoMCknLFxuICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogZmFiQ29sb3JcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuJG1lbnUuY2hpbGRyZW4oJ2xpJykuY2hpbGRyZW4oJ2EnKS5jc3Moe1xuICAgICAgICAgIG9wYWNpdHk6ICcnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGJhY2tkcm9wLnJlbW92ZSgpO1xuXG4gICAgICAgICAgLy8gU2V0IGluaXRpYWwgc3RhdGUuXG4gICAgICAgICAgX3RoaXM1Mi4kZWwuY3NzKHtcbiAgICAgICAgICAgICd0ZXh0LWFsaWduJzogJycsXG4gICAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgICBib3R0b206ICcnLFxuICAgICAgICAgICAgbGVmdDogJycsXG4gICAgICAgICAgICBvdmVyZmxvdzogJycsXG4gICAgICAgICAgICAnYmFja2dyb3VuZC1jb2xvcic6ICcnLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoJyArIC1fdGhpczUyLm9mZnNldFggKyAncHgsMCwwKSdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpczUyLiRhbmNob3IuY3NzKHtcbiAgICAgICAgICAgIG92ZXJmbG93OiAnJyxcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKDAsJyArIF90aGlzNTIub2Zmc2V0WSArICdweCwwKSdcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXM1Mi4kZWwuY3NzKHtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwwLDApJyxcbiAgICAgICAgICAgICAgdHJhbnNpdGlvbjogJ3RyYW5zZm9ybSAuMnMnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aGlzNTIuJGFuY2hvci5jc3Moe1xuICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLDAsMCknLFxuICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycyBjdWJpYy1iZXppZXIoMC41NTAsIDAuMDU1LCAwLjY3NSwgMC4xOTApJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfSwgMjApO1xuICAgICAgICB9LCAyMDApO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChGbG9hdGluZ0FjdGlvbkJ1dHRvbi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZsb2F0aW5nQWN0aW9uQnV0dG9uKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fRmxvYXRpbmdBY3Rpb25CdXR0b247XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRmxvYXRpbmdBY3Rpb25CdXR0b247XG4gIH0oQ29tcG9uZW50KTtcblxuICBNLkZsb2F0aW5nQWN0aW9uQnV0dG9uID0gRmxvYXRpbmdBY3Rpb25CdXR0b247XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihGbG9hdGluZ0FjdGlvbkJ1dHRvbiwgJ2Zsb2F0aW5nQWN0aW9uQnV0dG9uJywgJ01fRmxvYXRpbmdBY3Rpb25CdXR0b24nKTtcbiAgfVxufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIC8vIENsb3NlIHdoZW4gZGF0ZSBpcyBzZWxlY3RlZFxuICAgIGF1dG9DbG9zZTogZmFsc2UsXG5cbiAgICAvLyB0aGUgZGVmYXVsdCBvdXRwdXQgZm9ybWF0IGZvciB0aGUgaW5wdXQgZmllbGQgdmFsdWVcbiAgICBmb3JtYXQ6ICdtbW0gZGQsIHl5eXknLFxuXG4gICAgLy8gVXNlZCB0byBjcmVhdGUgZGF0ZSBvYmplY3QgZnJvbSBjdXJyZW50IGlucHV0IHN0cmluZ1xuICAgIHBhcnNlOiBudWxsLFxuXG4gICAgLy8gVGhlIGluaXRpYWwgZGF0ZSB0byB2aWV3IHdoZW4gZmlyc3Qgb3BlbmVkXG4gICAgZGVmYXVsdERhdGU6IG51bGwsXG5cbiAgICAvLyBNYWtlIHRoZSBgZGVmYXVsdERhdGVgIHRoZSBpbml0aWFsIHNlbGVjdGVkIHZhbHVlXG4gICAgc2V0RGVmYXVsdERhdGU6IGZhbHNlLFxuXG4gICAgZGlzYWJsZVdlZWtlbmRzOiBmYWxzZSxcblxuICAgIGRpc2FibGVEYXlGbjogbnVsbCxcblxuICAgIC8vIEZpcnN0IGRheSBvZiB3ZWVrICgwOiBTdW5kYXksIDE6IE1vbmRheSBldGMpXG4gICAgZmlyc3REYXk6IDAsXG5cbiAgICAvLyBUaGUgZWFybGllc3QgZGF0ZSB0aGF0IGNhbiBiZSBzZWxlY3RlZFxuICAgIG1pbkRhdGU6IG51bGwsXG4gICAgLy8gVGhlbGF0ZXN0IGRhdGUgdGhhdCBjYW4gYmUgc2VsZWN0ZWRcbiAgICBtYXhEYXRlOiBudWxsLFxuXG4gICAgLy8gTnVtYmVyIG9mIHllYXJzIGVpdGhlciBzaWRlLCBvciBhcnJheSBvZiB1cHBlci9sb3dlciByYW5nZVxuICAgIHllYXJSYW5nZTogMTAsXG5cbiAgICAvLyB1c2VkIGludGVybmFsbHkgKGRvbid0IGNvbmZpZyBvdXRzaWRlKVxuICAgIG1pblllYXI6IDAsXG4gICAgbWF4WWVhcjogOTk5OSxcbiAgICBtaW5Nb250aDogdW5kZWZpbmVkLFxuICAgIG1heE1vbnRoOiB1bmRlZmluZWQsXG5cbiAgICBzdGFydFJhbmdlOiBudWxsLFxuICAgIGVuZFJhbmdlOiBudWxsLFxuXG4gICAgaXNSVEw6IGZhbHNlLFxuXG4gICAgLy8gUmVuZGVyIHRoZSBtb250aCBhZnRlciB5ZWFyIGluIHRoZSBjYWxlbmRhciB0aXRsZVxuICAgIHNob3dNb250aEFmdGVyWWVhcjogZmFsc2UsXG5cbiAgICAvLyBSZW5kZXIgZGF5cyBvZiB0aGUgY2FsZW5kYXIgZ3JpZCB0aGF0IGZhbGwgaW4gdGhlIG5leHQgb3IgcHJldmlvdXMgbW9udGhcbiAgICBzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBmYWxzZSxcblxuICAgIC8vIFNwZWNpZnkgYSBET00gZWxlbWVudCB0byByZW5kZXIgdGhlIGNhbGVuZGFyIGluXG4gICAgY29udGFpbmVyOiBudWxsLFxuXG4gICAgLy8gU2hvdyBjbGVhciBidXR0b25cbiAgICBzaG93Q2xlYXJCdG46IGZhbHNlLFxuXG4gICAgLy8gaW50ZXJuYXRpb25hbGl6YXRpb25cbiAgICBpMThuOiB7XG4gICAgICBjYW5jZWw6ICdDYW5jZWwnLFxuICAgICAgY2xlYXI6ICdDbGVhcicsXG4gICAgICBkb25lOiAnT2snLFxuICAgICAgcHJldmlvdXNNb250aDogJ+KAuScsXG4gICAgICBuZXh0TW9udGg6ICfigLonLFxuICAgICAgbW9udGhzOiBbJ0phbnVhcnknLCAnRmVicnVhcnknLCAnTWFyY2gnLCAnQXByaWwnLCAnTWF5JywgJ0p1bmUnLCAnSnVseScsICdBdWd1c3QnLCAnU2VwdGVtYmVyJywgJ09jdG9iZXInLCAnTm92ZW1iZXInLCAnRGVjZW1iZXInXSxcbiAgICAgIG1vbnRoc1Nob3J0OiBbJ0phbicsICdGZWInLCAnTWFyJywgJ0FwcicsICdNYXknLCAnSnVuJywgJ0p1bCcsICdBdWcnLCAnU2VwJywgJ09jdCcsICdOb3YnLCAnRGVjJ10sXG4gICAgICB3ZWVrZGF5czogWydTdW5kYXknLCAnTW9uZGF5JywgJ1R1ZXNkYXknLCAnV2VkbmVzZGF5JywgJ1RodXJzZGF5JywgJ0ZyaWRheScsICdTYXR1cmRheSddLFxuICAgICAgd2Vla2RheXNTaG9ydDogWydTdW4nLCAnTW9uJywgJ1R1ZScsICdXZWQnLCAnVGh1JywgJ0ZyaScsICdTYXQnXSxcbiAgICAgIHdlZWtkYXlzQWJicmV2OiBbJ1MnLCAnTScsICdUJywgJ1cnLCAnVCcsICdGJywgJ1MnXVxuICAgIH0sXG5cbiAgICAvLyBldmVudHMgYXJyYXlcbiAgICBldmVudHM6IFtdLFxuXG4gICAgLy8gY2FsbGJhY2sgZnVuY3Rpb25cbiAgICBvblNlbGVjdDogbnVsbCxcbiAgICBvbk9wZW46IG51bGwsXG4gICAgb25DbG9zZTogbnVsbCxcbiAgICBvbkRyYXc6IG51bGxcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBEYXRlcGlja2VyID0gZnVuY3Rpb24gKF9Db21wb25lbnQxNSkge1xuICAgIF9pbmhlcml0cyhEYXRlcGlja2VyLCBfQ29tcG9uZW50MTUpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IERhdGVwaWNrZXIgaW5zdGFuY2UgYW5kIHNldCB1cCBvdmVybGF5XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gRGF0ZXBpY2tlcihlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERhdGVwaWNrZXIpO1xuXG4gICAgICB2YXIgX3RoaXM1MyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEYXRlcGlja2VyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGF0ZXBpY2tlcikpLmNhbGwodGhpcywgRGF0ZXBpY2tlciwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM1My5lbC5NX0RhdGVwaWNrZXIgPSBfdGhpczUzO1xuXG4gICAgICBfdGhpczUzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRGF0ZXBpY2tlci5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIG1ha2Ugc3VyZSBpMThuIGRlZmF1bHRzIGFyZSBub3QgbG9zdCB3aGVuIG9ubHkgZmV3IGkxOG4gb3B0aW9uIHByb3BlcnRpZXMgYXJlIHBhc3NlZFxuICAgICAgaWYgKCEhb3B0aW9ucyAmJiBvcHRpb25zLmhhc093blByb3BlcnR5KCdpMThuJykgJiYgdHlwZW9mIG9wdGlvbnMuaTE4biA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgX3RoaXM1My5vcHRpb25zLmkxOG4gPSAkLmV4dGVuZCh7fSwgRGF0ZXBpY2tlci5kZWZhdWx0cy5pMThuLCBvcHRpb25zLmkxOG4pO1xuICAgICAgfVxuXG4gICAgICAvLyBSZW1vdmUgdGltZSBjb21wb25lbnQgZnJvbSBtaW5EYXRlIGFuZCBtYXhEYXRlIG9wdGlvbnNcbiAgICAgIGlmIChfdGhpczUzLm9wdGlvbnMubWluRGF0ZSkgX3RoaXM1My5vcHRpb25zLm1pbkRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICBpZiAoX3RoaXM1My5vcHRpb25zLm1heERhdGUpIF90aGlzNTMub3B0aW9ucy5tYXhEYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuXG4gICAgICBfdGhpczUzLmlkID0gTS5ndWlkKCk7XG5cbiAgICAgIF90aGlzNTMuX3NldHVwVmFyaWFibGVzKCk7XG4gICAgICBfdGhpczUzLl9pbnNlcnRIVE1MSW50b0RPTSgpO1xuICAgICAgX3RoaXM1My5fc2V0dXBNb2RhbCgpO1xuXG4gICAgICBfdGhpczUzLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcblxuICAgICAgaWYgKCFfdGhpczUzLm9wdGlvbnMuZGVmYXVsdERhdGUpIHtcbiAgICAgICAgX3RoaXM1My5vcHRpb25zLmRlZmF1bHREYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZShfdGhpczUzLmVsLnZhbHVlKSk7XG4gICAgICB9XG5cbiAgICAgIHZhciBkZWZEYXRlID0gX3RoaXM1My5vcHRpb25zLmRlZmF1bHREYXRlO1xuICAgICAgaWYgKERhdGVwaWNrZXIuX2lzRGF0ZShkZWZEYXRlKSkge1xuICAgICAgICBpZiAoX3RoaXM1My5vcHRpb25zLnNldERlZmF1bHREYXRlKSB7XG4gICAgICAgICAgX3RoaXM1My5zZXREYXRlKGRlZkRhdGUsIHRydWUpO1xuICAgICAgICAgIF90aGlzNTMuc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIF90aGlzNTMuZ290b0RhdGUoZGVmRGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzNTMuZ290b0RhdGUobmV3IERhdGUoKSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIG9wZW4vY2xvc2Ugc3RhdGUgb2YgZGF0ZXBpY2tlclxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIF90aGlzNTMuaXNPcGVuID0gZmFsc2U7XG4gICAgICByZXR1cm4gX3RoaXM1MztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRGF0ZXBpY2tlciwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5tb2RhbC5kZXN0cm95KCk7XG4gICAgICAgICQodGhpcy5tb2RhbEVsKS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5kZXN0cm95U2VsZWN0cygpO1xuICAgICAgICB0aGlzLmVsLk1fRGF0ZXBpY2tlciA9IHVuZGVmaW5lZDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVzdHJveVNlbGVjdHNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95U2VsZWN0cygpIHtcbiAgICAgICAgdmFyIG9sZFllYXJTZWxlY3QgPSB0aGlzLmNhbGVuZGFyRWwucXVlcnlTZWxlY3RvcignLm9yaWctc2VsZWN0LXllYXInKTtcbiAgICAgICAgaWYgKG9sZFllYXJTZWxlY3QpIHtcbiAgICAgICAgICBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2Uob2xkWWVhclNlbGVjdCkuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBvbGRNb250aFNlbGVjdCA9IHRoaXMuY2FsZW5kYXJFbC5xdWVyeVNlbGVjdG9yKCcub3JpZy1zZWxlY3QtbW9udGgnKTtcbiAgICAgICAgaWYgKG9sZE1vbnRoU2VsZWN0KSB7XG4gICAgICAgICAgTS5Gb3JtU2VsZWN0LmdldEluc3RhbmNlKG9sZE1vbnRoU2VsZWN0KS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2luc2VydEhUTUxJbnRvRE9NXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2luc2VydEhUTUxJbnRvRE9NKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDbGVhckJ0bikge1xuICAgICAgICAgICQodGhpcy5jbGVhckJ0bikuY3NzKHsgdmlzaWJpbGl0eTogJycgfSk7XG4gICAgICAgICAgdGhpcy5jbGVhckJ0bi5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaTE4bi5jbGVhcjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZG9uZUJ0bi5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaTE4bi5kb25lO1xuICAgICAgICB0aGlzLmNhbmNlbEJ0bi5pbm5lckhUTUwgPSB0aGlzLm9wdGlvbnMuaTE4bi5jYW5jZWw7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jb250YWluZXIpIHtcbiAgICAgICAgICB0aGlzLiRtb2RhbEVsLmFwcGVuZFRvKHRoaXMub3B0aW9ucy5jb250YWluZXIpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuJG1vZGFsRWwuaW5zZXJ0QmVmb3JlKHRoaXMuZWwpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cE1vZGFsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwTW9kYWwoKSB7XG4gICAgICAgIHZhciBfdGhpczU0ID0gdGhpcztcblxuICAgICAgICB0aGlzLm1vZGFsRWwuaWQgPSAnbW9kYWwtJyArIHRoaXMuaWQ7XG4gICAgICAgIHRoaXMubW9kYWwgPSBNLk1vZGFsLmluaXQodGhpcy5tb2RhbEVsLCB7XG4gICAgICAgICAgb25DbG9zZUVuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXM1NC5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ0b1N0cmluZ1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHRvU3RyaW5nKGZvcm1hdCkge1xuICAgICAgICB2YXIgX3RoaXM1NSA9IHRoaXM7XG5cbiAgICAgICAgZm9ybWF0ID0gZm9ybWF0IHx8IHRoaXMub3B0aW9ucy5mb3JtYXQ7XG4gICAgICAgIGlmICghRGF0ZXBpY2tlci5faXNEYXRlKHRoaXMuZGF0ZSkpIHtcbiAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgZm9ybWF0QXJyYXkgPSBmb3JtYXQuc3BsaXQoLyhkezEsNH18bXsxLDR9fHl7NH18eXl8IS4pL2cpO1xuICAgICAgICB2YXIgZm9ybWF0dGVkRGF0ZSA9IGZvcm1hdEFycmF5Lm1hcChmdW5jdGlvbiAobGFiZWwpIHtcbiAgICAgICAgICBpZiAoX3RoaXM1NS5mb3JtYXRzW2xhYmVsXSkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNTUuZm9ybWF0c1tsYWJlbF0oKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICByZXR1cm4gbGFiZWw7XG4gICAgICAgIH0pLmpvaW4oJycpO1xuICAgICAgICByZXR1cm4gZm9ybWF0dGVkRGF0ZTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0RGF0ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldERhdGUoZGF0ZSwgcHJldmVudE9uU2VsZWN0KSB7XG4gICAgICAgIGlmICghZGF0ZSkge1xuICAgICAgICAgIHRoaXMuZGF0ZSA9IG51bGw7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyRGF0ZURpc3BsYXkoKTtcbiAgICAgICAgICByZXR1cm4gdGhpcy5kcmF3KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHR5cGVvZiBkYXRlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKGRhdGUpKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIURhdGVwaWNrZXIuX2lzRGF0ZShkYXRlKSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtaW4gPSB0aGlzLm9wdGlvbnMubWluRGF0ZSxcbiAgICAgICAgICAgIG1heCA9IHRoaXMub3B0aW9ucy5tYXhEYXRlO1xuXG4gICAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUobWluKSAmJiBkYXRlIDwgbWluKSB7XG4gICAgICAgICAgZGF0ZSA9IG1pbjtcbiAgICAgICAgfSBlbHNlIGlmIChEYXRlcGlja2VyLl9pc0RhdGUobWF4KSAmJiBkYXRlID4gbWF4KSB7XG4gICAgICAgICAgZGF0ZSA9IG1heDtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGF0ZSA9IG5ldyBEYXRlKGRhdGUuZ2V0VGltZSgpKTtcblxuICAgICAgICB0aGlzLl9yZW5kZXJEYXRlRGlzcGxheSgpO1xuXG4gICAgICAgIERhdGVwaWNrZXIuX3NldFRvU3RhcnRPZkRheSh0aGlzLmRhdGUpO1xuICAgICAgICB0aGlzLmdvdG9EYXRlKHRoaXMuZGF0ZSk7XG5cbiAgICAgICAgaWYgKCFwcmV2ZW50T25TZWxlY3QgJiYgdHlwZW9mIHRoaXMub3B0aW9ucy5vblNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vblNlbGVjdC5jYWxsKHRoaXMsIHRoaXMuZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0SW5wdXRWYWx1ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldElucHV0VmFsdWUoKSB7XG4gICAgICAgIHRoaXMuZWwudmFsdWUgPSB0aGlzLnRvU3RyaW5nKCk7XG4gICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ2NoYW5nZScsIHsgZmlyZWRCeTogdGhpcyB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbmRlckRhdGVEaXNwbGF5XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckRhdGVEaXNwbGF5KCkge1xuICAgICAgICB2YXIgZGlzcGxheURhdGUgPSBEYXRlcGlja2VyLl9pc0RhdGUodGhpcy5kYXRlKSA/IHRoaXMuZGF0ZSA6IG5ldyBEYXRlKCk7XG4gICAgICAgIHZhciBpMThuID0gdGhpcy5vcHRpb25zLmkxOG47XG4gICAgICAgIHZhciBkYXkgPSBpMThuLndlZWtkYXlzU2hvcnRbZGlzcGxheURhdGUuZ2V0RGF5KCldO1xuICAgICAgICB2YXIgbW9udGggPSBpMThuLm1vbnRoc1Nob3J0W2Rpc3BsYXlEYXRlLmdldE1vbnRoKCldO1xuICAgICAgICB2YXIgZGF0ZSA9IGRpc3BsYXlEYXRlLmdldERhdGUoKTtcbiAgICAgICAgdGhpcy55ZWFyVGV4dEVsLmlubmVySFRNTCA9IGRpc3BsYXlEYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgIHRoaXMuZGF0ZVRleHRFbC5pbm5lckhUTUwgPSBkYXkgKyBcIiwgXCIgKyBtb250aCArIFwiIFwiICsgZGF0ZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBjaGFuZ2UgdmlldyB0byBhIHNwZWNpZmljIGRhdGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdvdG9EYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ290b0RhdGUoZGF0ZSkge1xuICAgICAgICB2YXIgbmV3Q2FsZW5kYXIgPSB0cnVlO1xuXG4gICAgICAgIGlmICghRGF0ZXBpY2tlci5faXNEYXRlKGRhdGUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY2FsZW5kYXJzKSB7XG4gICAgICAgICAgdmFyIGZpcnN0VmlzaWJsZURhdGUgPSBuZXcgRGF0ZSh0aGlzLmNhbGVuZGFyc1swXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1swXS5tb250aCwgMSksXG4gICAgICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2FsZW5kYXJzW3RoaXMuY2FsZW5kYXJzLmxlbmd0aCAtIDFdLnllYXIsIHRoaXMuY2FsZW5kYXJzW3RoaXMuY2FsZW5kYXJzLmxlbmd0aCAtIDFdLm1vbnRoLCAxKSxcbiAgICAgICAgICAgICAgdmlzaWJsZURhdGUgPSBkYXRlLmdldFRpbWUoKTtcbiAgICAgICAgICAvLyBnZXQgdGhlIGVuZCBvZiB0aGUgbW9udGhcbiAgICAgICAgICBsYXN0VmlzaWJsZURhdGUuc2V0TW9udGgobGFzdFZpc2libGVEYXRlLmdldE1vbnRoKCkgKyAxKTtcbiAgICAgICAgICBsYXN0VmlzaWJsZURhdGUuc2V0RGF0ZShsYXN0VmlzaWJsZURhdGUuZ2V0RGF0ZSgpIC0gMSk7XG4gICAgICAgICAgbmV3Q2FsZW5kYXIgPSB2aXNpYmxlRGF0ZSA8IGZpcnN0VmlzaWJsZURhdGUuZ2V0VGltZSgpIHx8IGxhc3RWaXNpYmxlRGF0ZS5nZXRUaW1lKCkgPCB2aXNpYmxlRGF0ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuZXdDYWxlbmRhcikge1xuICAgICAgICAgIHRoaXMuY2FsZW5kYXJzID0gW3tcbiAgICAgICAgICAgIG1vbnRoOiBkYXRlLmdldE1vbnRoKCksXG4gICAgICAgICAgICB5ZWFyOiBkYXRlLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICB9XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImFkanVzdENhbGVuZGFyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkanVzdENhbGVuZGFycygpIHtcbiAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0gPSB0aGlzLmFkanVzdENhbGVuZGFyKHRoaXMuY2FsZW5kYXJzWzBdKTtcbiAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImFkanVzdENhbGVuZGFyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRqdXN0Q2FsZW5kYXIoY2FsZW5kYXIpIHtcbiAgICAgICAgaWYgKGNhbGVuZGFyLm1vbnRoIDwgMCkge1xuICAgICAgICAgIGNhbGVuZGFyLnllYXIgLT0gTWF0aC5jZWlsKE1hdGguYWJzKGNhbGVuZGFyLm1vbnRoKSAvIDEyKTtcbiAgICAgICAgICBjYWxlbmRhci5tb250aCArPSAxMjtcbiAgICAgICAgfVxuICAgICAgICBpZiAoY2FsZW5kYXIubW9udGggPiAxMSkge1xuICAgICAgICAgIGNhbGVuZGFyLnllYXIgKz0gTWF0aC5mbG9vcihNYXRoLmFicyhjYWxlbmRhci5tb250aCkgLyAxMik7XG4gICAgICAgICAgY2FsZW5kYXIubW9udGggLT0gMTI7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGNhbGVuZGFyO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJuZXh0TW9udGhcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0TW9udGgoKSB7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoKys7XG4gICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInByZXZNb250aFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHByZXZNb250aCgpIHtcbiAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGgtLTtcbiAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVuZGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyKHllYXIsIG1vbnRoLCByYW5kSWQpIHtcbiAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICBub3cgPSBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgZGF5cyA9IERhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSxcbiAgICAgICAgICAgIGJlZm9yZSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxKS5nZXREYXkoKSxcbiAgICAgICAgICAgIGRhdGEgPSBbXSxcbiAgICAgICAgICAgIHJvdyA9IFtdO1xuICAgICAgICBEYXRlcGlja2VyLl9zZXRUb1N0YXJ0T2ZEYXkobm93KTtcbiAgICAgICAgaWYgKG9wdHMuZmlyc3REYXkgPiAwKSB7XG4gICAgICAgICAgYmVmb3JlIC09IG9wdHMuZmlyc3REYXk7XG4gICAgICAgICAgaWYgKGJlZm9yZSA8IDApIHtcbiAgICAgICAgICAgIGJlZm9yZSArPSA3O1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB2YXIgcHJldmlvdXNNb250aCA9IG1vbnRoID09PSAwID8gMTEgOiBtb250aCAtIDEsXG4gICAgICAgICAgICBuZXh0TW9udGggPSBtb250aCA9PT0gMTEgPyAwIDogbW9udGggKyAxLFxuICAgICAgICAgICAgeWVhck9mUHJldmlvdXNNb250aCA9IG1vbnRoID09PSAwID8geWVhciAtIDEgOiB5ZWFyLFxuICAgICAgICAgICAgeWVhck9mTmV4dE1vbnRoID0gbW9udGggPT09IDExID8geWVhciArIDEgOiB5ZWFyLFxuICAgICAgICAgICAgZGF5c0luUHJldmlvdXNNb250aCA9IERhdGVwaWNrZXIuX2dldERheXNJbk1vbnRoKHllYXJPZlByZXZpb3VzTW9udGgsIHByZXZpb3VzTW9udGgpO1xuICAgICAgICB2YXIgY2VsbHMgPSBkYXlzICsgYmVmb3JlLFxuICAgICAgICAgICAgYWZ0ZXIgPSBjZWxscztcbiAgICAgICAgd2hpbGUgKGFmdGVyID4gNykge1xuICAgICAgICAgIGFmdGVyIC09IDc7XG4gICAgICAgIH1cbiAgICAgICAgY2VsbHMgKz0gNyAtIGFmdGVyO1xuICAgICAgICB2YXIgaXNXZWVrU2VsZWN0ZWQgPSBmYWxzZTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDAsIHIgPSAwOyBpIDwgY2VsbHM7IGkrKykge1xuICAgICAgICAgIHZhciBkYXkgPSBuZXcgRGF0ZSh5ZWFyLCBtb250aCwgMSArIChpIC0gYmVmb3JlKSksXG4gICAgICAgICAgICAgIGlzU2VsZWN0ZWQgPSBEYXRlcGlja2VyLl9pc0RhdGUodGhpcy5kYXRlKSA/IERhdGVwaWNrZXIuX2NvbXBhcmVEYXRlcyhkYXksIHRoaXMuZGF0ZSkgOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNUb2RheSA9IERhdGVwaWNrZXIuX2NvbXBhcmVEYXRlcyhkYXksIG5vdyksXG4gICAgICAgICAgICAgIGhhc0V2ZW50ID0gb3B0cy5ldmVudHMuaW5kZXhPZihkYXkudG9EYXRlU3RyaW5nKCkpICE9PSAtMSA/IHRydWUgOiBmYWxzZSxcbiAgICAgICAgICAgICAgaXNFbXB0eSA9IGkgPCBiZWZvcmUgfHwgaSA+PSBkYXlzICsgYmVmb3JlLFxuICAgICAgICAgICAgICBkYXlOdW1iZXIgPSAxICsgKGkgLSBiZWZvcmUpLFxuICAgICAgICAgICAgICBtb250aE51bWJlciA9IG1vbnRoLFxuICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhcixcbiAgICAgICAgICAgICAgaXNTdGFydFJhbmdlID0gb3B0cy5zdGFydFJhbmdlICYmIERhdGVwaWNrZXIuX2NvbXBhcmVEYXRlcyhvcHRzLnN0YXJ0UmFuZ2UsIGRheSksXG4gICAgICAgICAgICAgIGlzRW5kUmFuZ2UgPSBvcHRzLmVuZFJhbmdlICYmIERhdGVwaWNrZXIuX2NvbXBhcmVEYXRlcyhvcHRzLmVuZFJhbmdlLCBkYXkpLFxuICAgICAgICAgICAgICBpc0luUmFuZ2UgPSBvcHRzLnN0YXJ0UmFuZ2UgJiYgb3B0cy5lbmRSYW5nZSAmJiBvcHRzLnN0YXJ0UmFuZ2UgPCBkYXkgJiYgZGF5IDwgb3B0cy5lbmRSYW5nZSxcbiAgICAgICAgICAgICAgaXNEaXNhYmxlZCA9IG9wdHMubWluRGF0ZSAmJiBkYXkgPCBvcHRzLm1pbkRhdGUgfHwgb3B0cy5tYXhEYXRlICYmIGRheSA+IG9wdHMubWF4RGF0ZSB8fCBvcHRzLmRpc2FibGVXZWVrZW5kcyAmJiBEYXRlcGlja2VyLl9pc1dlZWtlbmQoZGF5KSB8fCBvcHRzLmRpc2FibGVEYXlGbiAmJiBvcHRzLmRpc2FibGVEYXlGbihkYXkpO1xuXG4gICAgICAgICAgaWYgKGlzRW1wdHkpIHtcbiAgICAgICAgICAgIGlmIChpIDwgYmVmb3JlKSB7XG4gICAgICAgICAgICAgIGRheU51bWJlciA9IGRheXNJblByZXZpb3VzTW9udGggKyBkYXlOdW1iZXI7XG4gICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gcHJldmlvdXNNb250aDtcbiAgICAgICAgICAgICAgeWVhck51bWJlciA9IHllYXJPZlByZXZpb3VzTW9udGg7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBkYXlOdW1iZXIgPSBkYXlOdW1iZXIgLSBkYXlzO1xuICAgICAgICAgICAgICBtb250aE51bWJlciA9IG5leHRNb250aDtcbiAgICAgICAgICAgICAgeWVhck51bWJlciA9IHllYXJPZk5leHRNb250aDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICB2YXIgZGF5Q29uZmlnID0ge1xuICAgICAgICAgICAgZGF5OiBkYXlOdW1iZXIsXG4gICAgICAgICAgICBtb250aDogbW9udGhOdW1iZXIsXG4gICAgICAgICAgICB5ZWFyOiB5ZWFyTnVtYmVyLFxuICAgICAgICAgICAgaGFzRXZlbnQ6IGhhc0V2ZW50LFxuICAgICAgICAgICAgaXNTZWxlY3RlZDogaXNTZWxlY3RlZCxcbiAgICAgICAgICAgIGlzVG9kYXk6IGlzVG9kYXksXG4gICAgICAgICAgICBpc0Rpc2FibGVkOiBpc0Rpc2FibGVkLFxuICAgICAgICAgICAgaXNFbXB0eTogaXNFbXB0eSxcbiAgICAgICAgICAgIGlzU3RhcnRSYW5nZTogaXNTdGFydFJhbmdlLFxuICAgICAgICAgICAgaXNFbmRSYW5nZTogaXNFbmRSYW5nZSxcbiAgICAgICAgICAgIGlzSW5SYW5nZTogaXNJblJhbmdlLFxuICAgICAgICAgICAgc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRoczogb3B0cy5zaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzXG4gICAgICAgICAgfTtcblxuICAgICAgICAgIHJvdy5wdXNoKHRoaXMucmVuZGVyRGF5KGRheUNvbmZpZykpO1xuXG4gICAgICAgICAgaWYgKCsrciA9PT0gNykge1xuICAgICAgICAgICAgZGF0YS5wdXNoKHRoaXMucmVuZGVyUm93KHJvdywgb3B0cy5pc1JUTCwgaXNXZWVrU2VsZWN0ZWQpKTtcbiAgICAgICAgICAgIHJvdyA9IFtdO1xuICAgICAgICAgICAgciA9IDA7XG4gICAgICAgICAgICBpc1dlZWtTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5yZW5kZXJUYWJsZShvcHRzLCBkYXRhLCByYW5kSWQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZW5kZXJEYXlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJEYXkob3B0cykge1xuICAgICAgICB2YXIgYXJyID0gW107XG4gICAgICAgIHZhciBhcmlhU2VsZWN0ZWQgPSAnZmFsc2UnO1xuICAgICAgICBpZiAob3B0cy5pc0VtcHR5KSB7XG4gICAgICAgICAgaWYgKG9wdHMuc2hvd0RheXNJbk5leHRBbmRQcmV2aW91c01vbnRocykge1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLW91dHNpZGUtY3VycmVudC1tb250aCcpO1xuICAgICAgICAgICAgYXJyLnB1c2goJ2lzLXNlbGVjdGlvbi1kaXNhYmxlZCcpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gJzx0ZCBjbGFzcz1cImlzLWVtcHR5XCI+PC90ZD4nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc0Rpc2FibGVkKSB7XG4gICAgICAgICAgYXJyLnB1c2goJ2lzLWRpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAob3B0cy5pc1RvZGF5KSB7XG4gICAgICAgICAgYXJyLnB1c2goJ2lzLXRvZGF5Jyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNTZWxlY3RlZCkge1xuICAgICAgICAgIGFyci5wdXNoKCdpcy1zZWxlY3RlZCcpO1xuICAgICAgICAgIGFyaWFTZWxlY3RlZCA9ICd0cnVlJztcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5oYXNFdmVudCkge1xuICAgICAgICAgIGFyci5wdXNoKCdoYXMtZXZlbnQnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc0luUmFuZ2UpIHtcbiAgICAgICAgICBhcnIucHVzaCgnaXMtaW5yYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzU3RhcnRSYW5nZSkge1xuICAgICAgICAgIGFyci5wdXNoKCdpcy1zdGFydHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNFbmRSYW5nZSkge1xuICAgICAgICAgIGFyci5wdXNoKCdpcy1lbmRyYW5nZScpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBcIjx0ZCBkYXRhLWRheT1cXFwiXCIgKyBvcHRzLmRheSArIFwiXFxcIiBjbGFzcz1cXFwiXCIgKyBhcnIuam9pbignICcpICsgXCJcXFwiIGFyaWEtc2VsZWN0ZWQ9XFxcIlwiICsgYXJpYVNlbGVjdGVkICsgXCJcXFwiPlwiICsgKFwiPGJ1dHRvbiBjbGFzcz1cXFwiZGF0ZXBpY2tlci1kYXktYnV0dG9uXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiIGRhdGEteWVhcj1cXFwiXCIgKyBvcHRzLnllYXIgKyBcIlxcXCIgZGF0YS1tb250aD1cXFwiXCIgKyBvcHRzLm1vbnRoICsgXCJcXFwiIGRhdGEtZGF5PVxcXCJcIiArIG9wdHMuZGF5ICsgXCJcXFwiPlwiICsgb3B0cy5kYXkgKyBcIjwvYnV0dG9uPlwiKSArICc8L3RkPic7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlclJvd1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclJvdyhkYXlzLCBpc1JUTCwgaXNSb3dTZWxlY3RlZCkge1xuICAgICAgICByZXR1cm4gJzx0ciBjbGFzcz1cImRhdGVwaWNrZXItcm93JyArIChpc1Jvd1NlbGVjdGVkID8gJyBpcy1zZWxlY3RlZCcgOiAnJykgKyAnXCI+JyArIChpc1JUTCA/IGRheXMucmV2ZXJzZSgpIDogZGF5cykuam9pbignJykgKyAnPC90cj4nO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZW5kZXJUYWJsZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRhYmxlKG9wdHMsIGRhdGEsIHJhbmRJZCkge1xuICAgICAgICByZXR1cm4gJzxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLXRhYmxlLXdyYXBwZXJcIj48dGFibGUgY2VsbHBhZGRpbmc9XCIwXCIgY2VsbHNwYWNpbmc9XCIwXCIgY2xhc3M9XCJkYXRlcGlja2VyLXRhYmxlXCIgcm9sZT1cImdyaWRcIiBhcmlhLWxhYmVsbGVkYnk9XCInICsgcmFuZElkICsgJ1wiPicgKyB0aGlzLnJlbmRlckhlYWQob3B0cykgKyB0aGlzLnJlbmRlckJvZHkoZGF0YSkgKyAnPC90YWJsZT48L2Rpdj4nO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZW5kZXJIZWFkXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVySGVhZChvcHRzKSB7XG4gICAgICAgIHZhciBpID0gdm9pZCAwLFxuICAgICAgICAgICAgYXJyID0gW107XG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCA3OyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaChcIjx0aCBzY29wZT1cXFwiY29sXFxcIj48YWJiciB0aXRsZT1cXFwiXCIgKyB0aGlzLnJlbmRlckRheU5hbWUob3B0cywgaSkgKyBcIlxcXCI+XCIgKyB0aGlzLnJlbmRlckRheU5hbWUob3B0cywgaSwgdHJ1ZSkgKyBcIjwvYWJicj48L3RoPlwiKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gJzx0aGVhZD48dHI+JyArIChvcHRzLmlzUlRMID8gYXJyLnJldmVyc2UoKSA6IGFycikuam9pbignJykgKyAnPC90cj48L3RoZWFkPic7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlckJvZHlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJCb2R5KHJvd3MpIHtcbiAgICAgICAgcmV0dXJuICc8dGJvZHk+JyArIHJvd3Muam9pbignJykgKyAnPC90Ym9keT4nO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZW5kZXJUaXRsZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlclRpdGxlKGluc3RhbmNlLCBjLCB5ZWFyLCBtb250aCwgcmVmWWVhciwgcmFuZElkKSB7XG4gICAgICAgIHZhciBpID0gdm9pZCAwLFxuICAgICAgICAgICAgaiA9IHZvaWQgMCxcbiAgICAgICAgICAgIGFyciA9IHZvaWQgMCxcbiAgICAgICAgICAgIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICBpc01pblllYXIgPSB5ZWFyID09PSBvcHRzLm1pblllYXIsXG4gICAgICAgICAgICBpc01heFllYXIgPSB5ZWFyID09PSBvcHRzLm1heFllYXIsXG4gICAgICAgICAgICBodG1sID0gJzxkaXYgaWQ9XCInICsgcmFuZElkICsgJ1wiIGNsYXNzPVwiZGF0ZXBpY2tlci1jb250cm9sc1wiIHJvbGU9XCJoZWFkaW5nXCIgYXJpYS1saXZlPVwiYXNzZXJ0aXZlXCI+JyxcbiAgICAgICAgICAgIG1vbnRoSHRtbCA9IHZvaWQgMCxcbiAgICAgICAgICAgIHllYXJIdG1sID0gdm9pZCAwLFxuICAgICAgICAgICAgcHJldiA9IHRydWUsXG4gICAgICAgICAgICBuZXh0ID0gdHJ1ZTtcblxuICAgICAgICBmb3IgKGFyciA9IFtdLCBpID0gMDsgaSA8IDEyOyBpKyspIHtcbiAgICAgICAgICBhcnIucHVzaCgnPG9wdGlvbiB2YWx1ZT1cIicgKyAoeWVhciA9PT0gcmVmWWVhciA/IGkgLSBjIDogMTIgKyBpIC0gYykgKyAnXCInICsgKGkgPT09IG1vbnRoID8gJyBzZWxlY3RlZD1cInNlbGVjdGVkXCInIDogJycpICsgKGlzTWluWWVhciAmJiBpIDwgb3B0cy5taW5Nb250aCB8fCBpc01heFllYXIgJiYgaSA+IG9wdHMubWF4TW9udGggPyAnZGlzYWJsZWQ9XCJkaXNhYmxlZFwiJyA6ICcnKSArICc+JyArIG9wdHMuaTE4bi5tb250aHNbaV0gKyAnPC9vcHRpb24+Jyk7XG4gICAgICAgIH1cblxuICAgICAgICBtb250aEh0bWwgPSAnPHNlbGVjdCBjbGFzcz1cImRhdGVwaWNrZXItc2VsZWN0IG9yaWctc2VsZWN0LW1vbnRoXCIgdGFiaW5kZXg9XCItMVwiPicgKyBhcnIuam9pbignJykgKyAnPC9zZWxlY3Q+JztcblxuICAgICAgICBpZiAoJC5pc0FycmF5KG9wdHMueWVhclJhbmdlKSkge1xuICAgICAgICAgIGkgPSBvcHRzLnllYXJSYW5nZVswXTtcbiAgICAgICAgICBqID0gb3B0cy55ZWFyUmFuZ2VbMV0gKyAxO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGkgPSB5ZWFyIC0gb3B0cy55ZWFyUmFuZ2U7XG4gICAgICAgICAgaiA9IDEgKyB5ZWFyICsgb3B0cy55ZWFyUmFuZ2U7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGFyciA9IFtdOyBpIDwgaiAmJiBpIDw9IG9wdHMubWF4WWVhcjsgaSsrKSB7XG4gICAgICAgICAgaWYgKGkgPj0gb3B0cy5taW5ZZWFyKSB7XG4gICAgICAgICAgICBhcnIucHVzaChcIjxvcHRpb24gdmFsdWU9XFxcIlwiICsgaSArIFwiXFxcIiBcIiArIChpID09PSB5ZWFyID8gJ3NlbGVjdGVkPVwic2VsZWN0ZWRcIicgOiAnJykgKyBcIj5cIiArIGkgKyBcIjwvb3B0aW9uPlwiKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB5ZWFySHRtbCA9IFwiPHNlbGVjdCBjbGFzcz1cXFwiZGF0ZXBpY2tlci1zZWxlY3Qgb3JpZy1zZWxlY3QteWVhclxcXCIgdGFiaW5kZXg9XFxcIi0xXFxcIj5cIiArIGFyci5qb2luKCcnKSArIFwiPC9zZWxlY3Q+XCI7XG5cbiAgICAgICAgdmFyIGxlZnRBcnJvdyA9ICc8c3ZnIGZpbGw9XCIjMDAwMDAwXCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTE1LjQxIDE2LjA5bC00LjU4LTQuNTkgNC41OC00LjU5TDE0IDUuNWwtNiA2IDYgNnpcIi8+PHBhdGggZD1cIk0wLS41aDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PC9zdmc+JztcbiAgICAgICAgaHRtbCArPSBcIjxidXR0b24gY2xhc3M9XFxcIm1vbnRoLXByZXZcIiArIChwcmV2ID8gJycgOiAnIGlzLWRpc2FibGVkJykgKyBcIlxcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIj5cIiArIGxlZnRBcnJvdyArIFwiPC9idXR0b24+XCI7XG5cbiAgICAgICAgaHRtbCArPSAnPGRpdiBjbGFzcz1cInNlbGVjdHMtY29udGFpbmVyXCI+JztcbiAgICAgICAgaWYgKG9wdHMuc2hvd01vbnRoQWZ0ZXJZZWFyKSB7XG4gICAgICAgICAgaHRtbCArPSB5ZWFySHRtbCArIG1vbnRoSHRtbDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBodG1sICs9IG1vbnRoSHRtbCArIHllYXJIdG1sO1xuICAgICAgICB9XG4gICAgICAgIGh0bWwgKz0gJzwvZGl2Pic7XG5cbiAgICAgICAgaWYgKGlzTWluWWVhciAmJiAobW9udGggPT09IDAgfHwgb3B0cy5taW5Nb250aCA+PSBtb250aCkpIHtcbiAgICAgICAgICBwcmV2ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoaXNNYXhZZWFyICYmIChtb250aCA9PT0gMTEgfHwgb3B0cy5tYXhNb250aCA8PSBtb250aCkpIHtcbiAgICAgICAgICBuZXh0ID0gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgcmlnaHRBcnJvdyA9ICc8c3ZnIGZpbGw9XCIjMDAwMDAwXCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTguNTkgMTYuMzRsNC41OC00LjU5LTQuNTgtNC41OUwxMCA1Ljc1bDYgNi02IDZ6XCIvPjxwYXRoIGQ9XCJNMC0uMjVoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48L3N2Zz4nO1xuICAgICAgICBodG1sICs9IFwiPGJ1dHRvbiBjbGFzcz1cXFwibW9udGgtbmV4dFwiICsgKG5leHQgPyAnJyA6ICcgaXMtZGlzYWJsZWQnKSArIFwiXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiPlwiICsgcmlnaHRBcnJvdyArIFwiPC9idXR0b24+XCI7XG5cbiAgICAgICAgcmV0dXJuIGh0bWwgKz0gJzwvZGl2Pic7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogcmVmcmVzaCB0aGUgSFRNTFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZHJhd1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRyYXcoZm9yY2UpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3BlbiAmJiAhZm9yY2UpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9wdHMgPSB0aGlzLm9wdGlvbnMsXG4gICAgICAgICAgICBtaW5ZZWFyID0gb3B0cy5taW5ZZWFyLFxuICAgICAgICAgICAgbWF4WWVhciA9IG9wdHMubWF4WWVhcixcbiAgICAgICAgICAgIG1pbk1vbnRoID0gb3B0cy5taW5Nb250aCxcbiAgICAgICAgICAgIG1heE1vbnRoID0gb3B0cy5tYXhNb250aCxcbiAgICAgICAgICAgIGh0bWwgPSAnJyxcbiAgICAgICAgICAgIHJhbmRJZCA9IHZvaWQgMDtcblxuICAgICAgICBpZiAodGhpcy5feSA8PSBtaW5ZZWFyKSB7XG4gICAgICAgICAgdGhpcy5feSA9IG1pblllYXI7XG4gICAgICAgICAgaWYgKCFpc05hTihtaW5Nb250aCkgJiYgdGhpcy5fbSA8IG1pbk1vbnRoKSB7XG4gICAgICAgICAgICB0aGlzLl9tID0gbWluTW9udGg7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLl95ID49IG1heFllYXIpIHtcbiAgICAgICAgICB0aGlzLl95ID0gbWF4WWVhcjtcbiAgICAgICAgICBpZiAoIWlzTmFOKG1heE1vbnRoKSAmJiB0aGlzLl9tID4gbWF4TW9udGgpIHtcbiAgICAgICAgICAgIHRoaXMuX20gPSBtYXhNb250aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICByYW5kSWQgPSAnZGF0ZXBpY2tlci10aXRsZS0nICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikucmVwbGFjZSgvW15hLXpdKy9nLCAnJykuc3Vic3RyKDAsIDIpO1xuXG4gICAgICAgIGZvciAodmFyIGMgPSAwOyBjIDwgMTsgYysrKSB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyRGF0ZURpc3BsYXkoKTtcbiAgICAgICAgICBodG1sICs9IHRoaXMucmVuZGVyVGl0bGUodGhpcywgYywgdGhpcy5jYWxlbmRhcnNbY10ueWVhciwgdGhpcy5jYWxlbmRhcnNbY10ubW9udGgsIHRoaXMuY2FsZW5kYXJzWzBdLnllYXIsIHJhbmRJZCkgKyB0aGlzLnJlbmRlcih0aGlzLmNhbGVuZGFyc1tjXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1tjXS5tb250aCwgcmFuZElkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZGVzdHJveVNlbGVjdHMoKTtcblxuICAgICAgICB0aGlzLmNhbGVuZGFyRWwuaW5uZXJIVE1MID0gaHRtbDtcblxuICAgICAgICAvLyBJbml0IE1hdGVyaWFsaXplIFNlbGVjdFxuICAgICAgICB2YXIgeWVhclNlbGVjdCA9IHRoaXMuY2FsZW5kYXJFbC5xdWVyeVNlbGVjdG9yKCcub3JpZy1zZWxlY3QteWVhcicpO1xuICAgICAgICB2YXIgbW9udGhTZWxlY3QgPSB0aGlzLmNhbGVuZGFyRWwucXVlcnlTZWxlY3RvcignLm9yaWctc2VsZWN0LW1vbnRoJyk7XG4gICAgICAgIE0uRm9ybVNlbGVjdC5pbml0KHllYXJTZWxlY3QsIHtcbiAgICAgICAgICBjbGFzc2VzOiAnc2VsZWN0LXllYXInLFxuICAgICAgICAgIGRyb3Bkb3duT3B0aW9uczogeyBjb250YWluZXI6IGRvY3VtZW50LmJvZHksIGNvbnN0cmFpbldpZHRoOiBmYWxzZSB9XG4gICAgICAgIH0pO1xuICAgICAgICBNLkZvcm1TZWxlY3QuaW5pdChtb250aFNlbGVjdCwge1xuICAgICAgICAgIGNsYXNzZXM6ICdzZWxlY3QtbW9udGgnLFxuICAgICAgICAgIGRyb3Bkb3duT3B0aW9uczogeyBjb250YWluZXI6IGRvY3VtZW50LmJvZHksIGNvbnN0cmFpbldpZHRoOiBmYWxzZSB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBjaGFuZ2UgaGFuZGxlcnMgZm9yIHNlbGVjdFxuICAgICAgICB5ZWFyU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZVllYXJDaGFuZ2UuYmluZCh0aGlzKSk7XG4gICAgICAgIG1vbnRoU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZU1vbnRoQ2hhbmdlLmJpbmQodGhpcykpO1xuXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uRHJhdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkRyYXcodGhpcyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRDaGFuZ2VCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0Q2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhbGVuZGFyQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNhbGVuZGFyQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5fZmluaXNoU2VsZWN0aW9uQm91bmQgPSB0aGlzLl9maW5pc2hTZWxlY3Rpb24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlTW9udGhDaGFuZ2UgPSB0aGlzLl9oYW5kbGVNb250aENoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9jbG9zZUJvdW5kID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlSW5wdXRDaGFuZ2VCb3VuZCk7XG4gICAgICAgIHRoaXMuY2FsZW5kYXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhbGVuZGFyQ2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuZG9uZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2ZpbmlzaFNlbGVjdGlvbkJvdW5kKTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUJvdW5kKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDbGVhckJ0bikge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUNsZWFyQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNsZWFyQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgICB0aGlzLmNsZWFyQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xlYXJDbGlja0JvdW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBWYXJpYWJsZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBWYXJpYWJsZXMoKSB7XG4gICAgICAgIHZhciBfdGhpczU2ID0gdGhpcztcblxuICAgICAgICB0aGlzLiRtb2RhbEVsID0gJChEYXRlcGlja2VyLl90ZW1wbGF0ZSk7XG4gICAgICAgIHRoaXMubW9kYWxFbCA9IHRoaXMuJG1vZGFsRWxbMF07XG5cbiAgICAgICAgdGhpcy5jYWxlbmRhckVsID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy5kYXRlcGlja2VyLWNhbGVuZGFyJyk7XG5cbiAgICAgICAgdGhpcy55ZWFyVGV4dEVsID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy55ZWFyLXRleHQnKTtcbiAgICAgICAgdGhpcy5kYXRlVGV4dEVsID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy5kYXRlLXRleHQnKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2xlYXJCdG4pIHtcbiAgICAgICAgICB0aGlzLmNsZWFyQnRuID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy5kYXRlcGlja2VyLWNsZWFyJyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kb25lQnRuID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy5kYXRlcGlja2VyLWRvbmUnKTtcbiAgICAgICAgdGhpcy5jYW5jZWxCdG4gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItY2FuY2VsJyk7XG5cbiAgICAgICAgdGhpcy5mb3JtYXRzID0ge1xuICAgICAgICAgIGQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczU2LmRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkID0gX3RoaXM1Ni5kYXRlLmdldERhdGUoKTtcbiAgICAgICAgICAgIHJldHVybiAoZCA8IDEwID8gJzAnIDogJycpICsgZDtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRkZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNTYub3B0aW9ucy5pMThuLndlZWtkYXlzU2hvcnRbX3RoaXM1Ni5kYXRlLmdldERheSgpXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRkZGQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczU2Lm9wdGlvbnMuaTE4bi53ZWVrZGF5c1tfdGhpczU2LmRhdGUuZ2V0RGF5KCldO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNTYuZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1tOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgbSA9IF90aGlzNTYuZGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICAgICAgICAgIHJldHVybiAobSA8IDEwID8gJzAnIDogJycpICsgbTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1tbTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNTYub3B0aW9ucy5pMThuLm1vbnRoc1Nob3J0W190aGlzNTYuZGF0ZS5nZXRNb250aCgpXTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIG1tbW06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczU2Lm9wdGlvbnMuaTE4bi5tb250aHNbX3RoaXM1Ni5kYXRlLmdldE1vbnRoKCldO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgeXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiAoJycgKyBfdGhpczU2LmRhdGUuZ2V0RnVsbFllYXIoKSkuc2xpY2UoMik7XG4gICAgICAgICAgfSxcbiAgICAgICAgICB5eXl5OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM1Ni5kYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZUJvdW5kKTtcbiAgICAgICAgdGhpcy5jYWxlbmRhckVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGlja0JvdW5kKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRDbGljaygpIHtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dEtleWRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRLZXlkb3duKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2FsZW5kYXJDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYWxlbmRhckNsaWNrKGUpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkdGFyZ2V0ID0gJChlLnRhcmdldCk7XG4gICAgICAgIGlmICghJHRhcmdldC5oYXNDbGFzcygnaXMtZGlzYWJsZWQnKSkge1xuICAgICAgICAgIGlmICgkdGFyZ2V0Lmhhc0NsYXNzKCdkYXRlcGlja2VyLWRheS1idXR0b24nKSAmJiAhJHRhcmdldC5oYXNDbGFzcygnaXMtZW1wdHknKSAmJiAhJHRhcmdldC5wYXJlbnQoKS5oYXNDbGFzcygnaXMtZGlzYWJsZWQnKSkge1xuICAgICAgICAgICAgdGhpcy5zZXREYXRlKG5ldyBEYXRlKGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS15ZWFyJyksIGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1tb250aCcpLCBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2RhdGEtZGF5JykpKTtcbiAgICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2ZpbmlzaFNlbGVjdGlvbigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoJHRhcmdldC5jbG9zZXN0KCcubW9udGgtcHJldicpLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5wcmV2TW9udGgoKTtcbiAgICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuY2xvc2VzdCgnLm1vbnRoLW5leHQnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHRoaXMubmV4dE1vbnRoKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDbGVhckNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsZWFyQ2xpY2soKSB7XG4gICAgICAgIHRoaXMuZGF0ZSA9IG51bGw7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVNb250aENoYW5nZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVNb250aENoYW5nZShlKSB7XG4gICAgICAgIHRoaXMuZ290b01vbnRoKGUudGFyZ2V0LnZhbHVlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVllYXJDaGFuZ2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlWWVhckNoYW5nZShlKSB7XG4gICAgICAgIHRoaXMuZ290b1llYXIoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgbW9udGggKHplcm8taW5kZXgsIGUuZy4gMDogSmFudWFyeSlcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdvdG9Nb250aFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdvdG9Nb250aChtb250aCkge1xuICAgICAgICBpZiAoIWlzTmFOKG1vbnRoKSkge1xuICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoID0gcGFyc2VJbnQobW9udGgsIDEwKTtcbiAgICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogY2hhbmdlIHZpZXcgdG8gYSBzcGVjaWZpYyBmdWxsIHllYXIgKGUuZy4gXCIyMDEyXCIpXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnb3RvWWVhclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdvdG9ZZWFyKHllYXIpIHtcbiAgICAgICAgaWYgKCFpc05hTih5ZWFyKSkge1xuICAgICAgICAgIHRoaXMuY2FsZW5kYXJzWzBdLnllYXIgPSBwYXJzZUludCh5ZWFyLCAxMCk7XG4gICAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRDaGFuZ2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRDaGFuZ2UoZSkge1xuICAgICAgICB2YXIgZGF0ZSA9IHZvaWQgMDtcblxuICAgICAgICAvLyBQcmV2ZW50IGNoYW5nZSBldmVudCBmcm9tIGJlaW5nIGZpcmVkIHdoZW4gdHJpZ2dlcmVkIGJ5IHRoZSBwbHVnaW5cbiAgICAgICAgaWYgKGUuZmlyZWRCeSA9PT0gdGhpcykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnBhcnNlKSB7XG4gICAgICAgICAgZGF0ZSA9IHRoaXMub3B0aW9ucy5wYXJzZSh0aGlzLmVsLnZhbHVlLCB0aGlzLm9wdGlvbnMuZm9ybWF0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBkYXRlID0gbmV3IERhdGUoRGF0ZS5wYXJzZSh0aGlzLmVsLnZhbHVlKSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoRGF0ZXBpY2tlci5faXNEYXRlKGRhdGUpKSB7XG4gICAgICAgICAgdGhpcy5zZXREYXRlKGRhdGUpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlckRheU5hbWVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJEYXlOYW1lKG9wdHMsIGRheSwgYWJicikge1xuICAgICAgICBkYXkgKz0gb3B0cy5maXJzdERheTtcbiAgICAgICAgd2hpbGUgKGRheSA+PSA3KSB7XG4gICAgICAgICAgZGF5IC09IDc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGFiYnIgPyBvcHRzLmkxOG4ud2Vla2RheXNBYmJyZXZbZGF5XSA6IG9wdHMuaTE4bi53ZWVrZGF5c1tkYXldO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCBpbnB1dCB2YWx1ZSB0byB0aGUgc2VsZWN0ZWQgZGF0ZSBhbmQgY2xvc2UgRGF0ZXBpY2tlclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2ZpbmlzaFNlbGVjdGlvblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5pc2hTZWxlY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc2V0SW5wdXRWYWx1ZSgpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT3BlbiBEYXRlcGlja2VyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvcGVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5kcmF3KCk7XG4gICAgICAgIHRoaXMubW9kYWwub3BlbigpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDbG9zZSBEYXRlcGlja2VyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbG9zZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNsb3NlLmNhbGwodGhpcyk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5tb2RhbC5jbG9zZSgpO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoRGF0ZXBpY2tlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERhdGVwaWNrZXIpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaXNEYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2lzRGF0ZShvYmopIHtcbiAgICAgICAgcmV0dXJuICgvRGF0ZS8udGVzdChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSkgJiYgIWlzTmFOKG9iai5nZXRUaW1lKCkpXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9pc1dlZWtlbmRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNXZWVrZW5kKGRhdGUpIHtcbiAgICAgICAgdmFyIGRheSA9IGRhdGUuZ2V0RGF5KCk7XG4gICAgICAgIHJldHVybiBkYXkgPT09IDAgfHwgZGF5ID09PSA2O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0VG9TdGFydE9mRGF5XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFRvU3RhcnRPZkRheShkYXRlKSB7XG4gICAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9nZXREYXlzSW5Nb250aFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9nZXREYXlzSW5Nb250aCh5ZWFyLCBtb250aCkge1xuICAgICAgICByZXR1cm4gWzMxLCBEYXRlcGlja2VyLl9pc0xlYXBZZWFyKHllYXIpID8gMjkgOiAyOCwgMzEsIDMwLCAzMSwgMzAsIDMxLCAzMSwgMzAsIDMxLCAzMCwgMzFdW21vbnRoXTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2lzTGVhcFllYXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNMZWFwWWVhcih5ZWFyKSB7XG4gICAgICAgIC8vIHNvbHV0aW9uIGJ5IE1hdHRpIFZpcmtrdW5lbjogaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvNDg4MTk1MVxuICAgICAgICByZXR1cm4geWVhciAlIDQgPT09IDAgJiYgeWVhciAlIDEwMCAhPT0gMCB8fCB5ZWFyICUgNDAwID09PSAwO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY29tcGFyZURhdGVzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NvbXBhcmVEYXRlcyhhLCBiKSB7XG4gICAgICAgIC8vIHdlYWsgZGF0ZSBjb21wYXJpc29uICh1c2Ugc2V0VG9TdGFydE9mRGF5KGRhdGUpIHRvIGVuc3VyZSBjb3JyZWN0IHJlc3VsdClcbiAgICAgICAgcmV0dXJuIGEuZ2V0VGltZSgpID09PSBiLmdldFRpbWUoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldFRvU3RhcnRPZkRheVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRUb1N0YXJ0T2ZEYXkoZGF0ZSkge1xuICAgICAgICBpZiAoRGF0ZXBpY2tlci5faXNEYXRlKGRhdGUpKSBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9EYXRlcGlja2VyO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIERhdGVwaWNrZXI7XG4gIH0oQ29tcG9uZW50KTtcblxuICBEYXRlcGlja2VyLl90ZW1wbGF0ZSA9IFsnPGRpdiBjbGFzcz0gXCJtb2RhbCBkYXRlcGlja2VyLW1vZGFsXCI+JywgJzxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50IGRhdGVwaWNrZXItY29udGFpbmVyXCI+JywgJzxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLWRhdGUtZGlzcGxheVwiPicsICc8c3BhbiBjbGFzcz1cInllYXItdGV4dFwiPjwvc3Bhbj4nLCAnPHNwYW4gY2xhc3M9XCJkYXRlLXRleHRcIj48L3NwYW4+JywgJzwvZGl2PicsICc8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci1jYWxlbmRhci1jb250YWluZXJcIj4nLCAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItY2FsZW5kYXJcIj48L2Rpdj4nLCAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItZm9vdGVyXCI+JywgJzxidXR0b24gY2xhc3M9XCJidG4tZmxhdCBkYXRlcGlja2VyLWNsZWFyIHdhdmVzLWVmZmVjdFwiIHN0eWxlPVwidmlzaWJpbGl0eTogaGlkZGVuO1wiIHR5cGU9XCJidXR0b25cIj48L2J1dHRvbj4nLCAnPGRpdiBjbGFzcz1cImNvbmZpcm1hdGlvbi1idG5zXCI+JywgJzxidXR0b24gY2xhc3M9XCJidG4tZmxhdCBkYXRlcGlja2VyLWNhbmNlbCB3YXZlcy1lZmZlY3RcIiB0eXBlPVwiYnV0dG9uXCI+PC9idXR0b24+JywgJzxidXR0b24gY2xhc3M9XCJidG4tZmxhdCBkYXRlcGlja2VyLWRvbmUgd2F2ZXMtZWZmZWN0XCIgdHlwZT1cImJ1dHRvblwiPjwvYnV0dG9uPicsICc8L2Rpdj4nLCAnPC9kaXY+JywgJzwvZGl2PicsICc8L2Rpdj4nLCAnPC9kaXY+J10uam9pbignJyk7XG5cbiAgTS5EYXRlcGlja2VyID0gRGF0ZXBpY2tlcjtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKERhdGVwaWNrZXIsICdkYXRlcGlja2VyJywgJ01fRGF0ZXBpY2tlcicpO1xuICB9XG59KShjYXNoKTtcbjsoZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgZGlhbFJhZGl1czogMTM1LFxuICAgIG91dGVyUmFkaXVzOiAxMDUsXG4gICAgaW5uZXJSYWRpdXM6IDcwLFxuICAgIHRpY2tSYWRpdXM6IDIwLFxuICAgIGR1cmF0aW9uOiAzNTAsXG4gICAgY29udGFpbmVyOiBudWxsLFxuICAgIGRlZmF1bHRUaW1lOiAnbm93JywgLy8gZGVmYXVsdCB0aW1lLCAnbm93JyBvciAnMTM6MTQnIGUuZy5cbiAgICBmcm9tTm93OiAwLCAvLyBNaWxsaXNlY29uZCBvZmZzZXQgZnJvbSB0aGUgZGVmYXVsdFRpbWVcbiAgICBzaG93Q2xlYXJCdG46IGZhbHNlLFxuXG4gICAgLy8gaW50ZXJuYXRpb25hbGl6YXRpb25cbiAgICBpMThuOiB7XG4gICAgICBjYW5jZWw6ICdDYW5jZWwnLFxuICAgICAgY2xlYXI6ICdDbGVhcicsXG4gICAgICBkb25lOiAnT2snXG4gICAgfSxcblxuICAgIGF1dG9DbG9zZTogZmFsc2UsIC8vIGF1dG8gY2xvc2Ugd2hlbiBtaW51dGUgaXMgc2VsZWN0ZWRcbiAgICB0d2VsdmVIb3VyOiB0cnVlLCAvLyBjaGFuZ2UgdG8gMTIgaG91ciBBTS9QTSBjbG9jayBmcm9tIDI0IGhvdXJcbiAgICB2aWJyYXRlOiB0cnVlLCAvLyB2aWJyYXRlIHRoZSBkZXZpY2Ugd2hlbiBkcmFnZ2luZyBjbG9jayBoYW5kXG5cbiAgICAvLyBDYWxsYmFja3NcbiAgICBvbk9wZW5TdGFydDogbnVsbCxcbiAgICBvbk9wZW5FbmQ6IG51bGwsXG4gICAgb25DbG9zZVN0YXJ0OiBudWxsLFxuICAgIG9uQ2xvc2VFbmQ6IG51bGwsXG4gICAgb25TZWxlY3Q6IG51bGxcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBUaW1lcGlja2VyID0gZnVuY3Rpb24gKF9Db21wb25lbnQxNikge1xuICAgIF9pbmhlcml0cyhUaW1lcGlja2VyLCBfQ29tcG9uZW50MTYpO1xuXG4gICAgZnVuY3Rpb24gVGltZXBpY2tlcihlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFRpbWVwaWNrZXIpO1xuXG4gICAgICB2YXIgX3RoaXM1NyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUaW1lcGlja2VyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGltZXBpY2tlcikpLmNhbGwodGhpcywgVGltZXBpY2tlciwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM1Ny5lbC5NX1RpbWVwaWNrZXIgPSBfdGhpczU3O1xuXG4gICAgICBfdGhpczU3Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVGltZXBpY2tlci5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzNTcuaWQgPSBNLmd1aWQoKTtcbiAgICAgIF90aGlzNTcuX2luc2VydEhUTUxJbnRvRE9NKCk7XG4gICAgICBfdGhpczU3Ll9zZXR1cE1vZGFsKCk7XG4gICAgICBfdGhpczU3Ll9zZXR1cFZhcmlhYmxlcygpO1xuICAgICAgX3RoaXM1Ny5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG5cbiAgICAgIF90aGlzNTcuX2Nsb2NrU2V0dXAoKTtcbiAgICAgIF90aGlzNTcuX3BpY2tlclNldHVwKCk7XG4gICAgICByZXR1cm4gX3RoaXM1NztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVGltZXBpY2tlciwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5tb2RhbC5kZXN0cm95KCk7XG4gICAgICAgICQodGhpcy5tb2RhbEVsKS5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5lbC5NX1RpbWVwaWNrZXIgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsb2NrQ2xpY2tTdGFydEJvdW5kID0gdGhpcy5faGFuZGxlQ2xvY2tDbGlja1N0YXJ0LmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQgPSB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrRW5kQm91bmQgPSB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrRW5kLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgICAgdGhpcy5wbGF0ZS5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVDbG9ja0NsaWNrU3RhcnRCb3VuZCk7XG4gICAgICAgIHRoaXMucGxhdGUuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZUNsb2NrQ2xpY2tTdGFydEJvdW5kKTtcblxuICAgICAgICAkKHRoaXMuc3BhbkhvdXJzKS5vbignY2xpY2snLCB0aGlzLnNob3dWaWV3LmJpbmQodGhpcywgJ2hvdXJzJykpO1xuICAgICAgICAkKHRoaXMuc3Bhbk1pbnV0ZXMpLm9uKCdjbGljaycsIHRoaXMuc2hvd1ZpZXcuYmluZCh0aGlzLCAnbWludXRlcycpKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRDbGljaygpIHtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dEtleWRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRLZXlkb3duKGUpIHtcbiAgICAgICAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2xvY2tDbGlja1N0YXJ0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsb2NrQ2xpY2tTdGFydChlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGNsb2NrUGxhdGVCUiA9IHRoaXMucGxhdGUuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciBvZmZzZXQgPSB7IHg6IGNsb2NrUGxhdGVCUi5sZWZ0LCB5OiBjbG9ja1BsYXRlQlIudG9wIH07XG5cbiAgICAgICAgdGhpcy54MCA9IG9mZnNldC54ICsgdGhpcy5vcHRpb25zLmRpYWxSYWRpdXM7XG4gICAgICAgIHRoaXMueTAgPSBvZmZzZXQueSArIHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzO1xuICAgICAgICB0aGlzLm1vdmVkID0gZmFsc2U7XG4gICAgICAgIHZhciBjbGlja1BvcyA9IFRpbWVwaWNrZXIuX1BvcyhlKTtcbiAgICAgICAgdGhpcy5keCA9IGNsaWNrUG9zLnggLSB0aGlzLngwO1xuICAgICAgICB0aGlzLmR5ID0gY2xpY2tQb3MueSAtIHRoaXMueTA7XG5cbiAgICAgICAgLy8gU2V0IGNsb2NrIGhhbmRzXG4gICAgICAgIHRoaXMuc2V0SGFuZCh0aGlzLmR4LCB0aGlzLmR5LCBmYWxzZSk7XG5cbiAgICAgICAgLy8gTW91c2Vtb3ZlIG9uIGRvY3VtZW50XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZUJvdW5kKTtcblxuICAgICAgICAvLyBNb3VzZXVwIG9uIGRvY3VtZW50XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrRW5kQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRCb3VuZCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEb2N1bWVudENsaWNrTW92ZShlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIGNsaWNrUG9zID0gVGltZXBpY2tlci5fUG9zKGUpO1xuICAgICAgICB2YXIgeCA9IGNsaWNrUG9zLnggLSB0aGlzLngwO1xuICAgICAgICB2YXIgeSA9IGNsaWNrUG9zLnkgLSB0aGlzLnkwO1xuICAgICAgICB0aGlzLm1vdmVkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5zZXRIYW5kKHgsIHksIGZhbHNlLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRG9jdW1lbnRDbGlja0VuZChlKSB7XG4gICAgICAgIHZhciBfdGhpczU4ID0gdGhpcztcblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrRW5kQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRCb3VuZCk7XG4gICAgICAgIHZhciBjbGlja1BvcyA9IFRpbWVwaWNrZXIuX1BvcyhlKTtcbiAgICAgICAgdmFyIHggPSBjbGlja1Bvcy54IC0gdGhpcy54MDtcbiAgICAgICAgdmFyIHkgPSBjbGlja1Bvcy55IC0gdGhpcy55MDtcbiAgICAgICAgaWYgKHRoaXMubW92ZWQgJiYgeCA9PT0gdGhpcy5keCAmJiB5ID09PSB0aGlzLmR5KSB7XG4gICAgICAgICAgdGhpcy5zZXRIYW5kKHgsIHkpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuY3VycmVudFZpZXcgPT09ICdob3VycycpIHtcbiAgICAgICAgICB0aGlzLnNob3dWaWV3KCdtaW51dGVzJywgdGhpcy5vcHRpb25zLmR1cmF0aW9uIC8gMik7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmF1dG9DbG9zZSkge1xuICAgICAgICAgICQodGhpcy5taW51dGVzVmlldykuYWRkQ2xhc3MoJ3RpbWVwaWNrZXItZGlhbC1vdXQnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzNTguZG9uZSgpO1xuICAgICAgICAgIH0sIHRoaXMub3B0aW9ucy5kdXJhdGlvbiAvIDIpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25TZWxlY3QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25TZWxlY3QuY2FsbCh0aGlzLCB0aGlzLmhvdXJzLCB0aGlzLm1pbnV0ZXMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gVW5iaW5kIG1vdXNlbW92ZSBldmVudFxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZUJvdW5kKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmVCb3VuZCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9pbnNlcnRIVE1MSW50b0RPTVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pbnNlcnRIVE1MSW50b0RPTSgpIHtcbiAgICAgICAgdGhpcy4kbW9kYWxFbCA9ICQoVGltZXBpY2tlci5fdGVtcGxhdGUpO1xuICAgICAgICB0aGlzLm1vZGFsRWwgPSB0aGlzLiRtb2RhbEVsWzBdO1xuICAgICAgICB0aGlzLm1vZGFsRWwuaWQgPSAnbW9kYWwtJyArIHRoaXMuaWQ7XG5cbiAgICAgICAgLy8gQXBwZW5kIHBvcG92ZXIgdG8gaW5wdXQgYnkgZGVmYXVsdFxuICAgICAgICB2YXIgY29udGFpbmVyRWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5jb250YWluZXIpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbnRhaW5lciAmJiAhIWNvbnRhaW5lckVsKSB7XG4gICAgICAgICAgdGhpcy4kbW9kYWxFbC5hcHBlbmRUbyhjb250YWluZXJFbCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kbW9kYWxFbC5pbnNlcnRCZWZvcmUodGhpcy5lbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwTW9kYWxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBNb2RhbCgpIHtcbiAgICAgICAgdmFyIF90aGlzNTkgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMubW9kYWwgPSBNLk1vZGFsLmluaXQodGhpcy5tb2RhbEVsLCB7XG4gICAgICAgICAgb25PcGVuU3RhcnQ6IHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCxcbiAgICAgICAgICBvbk9wZW5FbmQ6IHRoaXMub3B0aW9ucy5vbk9wZW5FbmQsXG4gICAgICAgICAgb25DbG9zZVN0YXJ0OiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0LFxuICAgICAgICAgIG9uQ2xvc2VFbmQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXM1OS5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXM1OS5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczU5KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF90aGlzNTkuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwVmFyaWFibGVzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwVmFyaWFibGVzKCkge1xuICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gJ2hvdXJzJztcbiAgICAgICAgdGhpcy52aWJyYXRlID0gbmF2aWdhdG9yLnZpYnJhdGUgPyAndmlicmF0ZScgOiBuYXZpZ2F0b3Iud2Via2l0VmlicmF0ZSA/ICd3ZWJraXRWaWJyYXRlJyA6IG51bGw7XG5cbiAgICAgICAgdGhpcy5fY2FudmFzID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLWNhbnZhcycpO1xuICAgICAgICB0aGlzLnBsYXRlID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLXBsYXRlJyk7XG5cbiAgICAgICAgdGhpcy5ob3Vyc1ZpZXcgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItaG91cnMnKTtcbiAgICAgICAgdGhpcy5taW51dGVzVmlldyA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1taW51dGVzJyk7XG4gICAgICAgIHRoaXMuc3BhbkhvdXJzID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLXNwYW4taG91cnMnKTtcbiAgICAgICAgdGhpcy5zcGFuTWludXRlcyA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1zcGFuLW1pbnV0ZXMnKTtcbiAgICAgICAgdGhpcy5zcGFuQW1QbSA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1zcGFuLWFtLXBtJyk7XG4gICAgICAgIHRoaXMuZm9vdGVyID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLWZvb3RlcicpO1xuICAgICAgICB0aGlzLmFtT3JQbSA9ICdQTSc7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9waWNrZXJTZXR1cFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9waWNrZXJTZXR1cCgpIHtcbiAgICAgICAgdmFyICRjbGVhckJ0biA9ICQoXCI8YnV0dG9uIGNsYXNzPVxcXCJidG4tZmxhdCB0aW1lcGlja2VyLWNsZWFyIHdhdmVzLWVmZmVjdFxcXCIgc3R5bGU9XFxcInZpc2liaWxpdHk6IGhpZGRlbjtcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgdGFiaW5kZXg9XFxcIlwiICsgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyID8gJzMnIDogJzEnKSArIFwiXFxcIj5cIiArIHRoaXMub3B0aW9ucy5pMThuLmNsZWFyICsgXCI8L2J1dHRvbj5cIikuYXBwZW5kVG8odGhpcy5mb290ZXIpLm9uKCdjbGljaycsIHRoaXMuY2xlYXIuYmluZCh0aGlzKSk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hvd0NsZWFyQnRuKSB7XG4gICAgICAgICAgJGNsZWFyQnRuLmNzcyh7IHZpc2liaWxpdHk6ICcnIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIgPSAkKCc8ZGl2IGNsYXNzPVwiY29uZmlybWF0aW9uLWJ0bnNcIj48L2Rpdj4nKTtcbiAgICAgICAgJCgnPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IHRpbWVwaWNrZXItY2xvc2Ugd2F2ZXMtZWZmZWN0XCIgdHlwZT1cImJ1dHRvblwiIHRhYmluZGV4PVwiJyArICh0aGlzLm9wdGlvbnMudHdlbHZlSG91ciA/ICczJyA6ICcxJykgKyAnXCI+JyArIHRoaXMub3B0aW9ucy5pMThuLmNhbmNlbCArICc8L2J1dHRvbj4nKS5hcHBlbmRUbyhjb25maXJtYXRpb25CdG5zQ29udGFpbmVyKS5vbignY2xpY2snLCB0aGlzLmNsb3NlLmJpbmQodGhpcykpO1xuICAgICAgICAkKCc8YnV0dG9uIGNsYXNzPVwiYnRuLWZsYXQgdGltZXBpY2tlci1jbG9zZSB3YXZlcy1lZmZlY3RcIiB0eXBlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCInICsgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyID8gJzMnIDogJzEnKSArICdcIj4nICsgdGhpcy5vcHRpb25zLmkxOG4uZG9uZSArICc8L2J1dHRvbj4nKS5hcHBlbmRUbyhjb25maXJtYXRpb25CdG5zQ29udGFpbmVyKS5vbignY2xpY2snLCB0aGlzLmRvbmUuYmluZCh0aGlzKSk7XG4gICAgICAgIGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIuYXBwZW5kVG8odGhpcy5mb290ZXIpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY2xvY2tTZXR1cFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jbG9ja1NldHVwKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHtcbiAgICAgICAgICB0aGlzLiRhbUJ0biA9ICQoJzxkaXYgY2xhc3M9XCJhbS1idG5cIj5BTTwvZGl2PicpO1xuICAgICAgICAgIHRoaXMuJHBtQnRuID0gJCgnPGRpdiBjbGFzcz1cInBtLWJ0blwiPlBNPC9kaXY+Jyk7XG4gICAgICAgICAgdGhpcy4kYW1CdG4ub24oJ2NsaWNrJywgdGhpcy5faGFuZGxlQW1QbUNsaWNrLmJpbmQodGhpcykpLmFwcGVuZFRvKHRoaXMuc3BhbkFtUG0pO1xuICAgICAgICAgIHRoaXMuJHBtQnRuLm9uKCdjbGljaycsIHRoaXMuX2hhbmRsZUFtUG1DbGljay5iaW5kKHRoaXMpKS5hcHBlbmRUbyh0aGlzLnNwYW5BbVBtKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2J1aWxkSG91cnNWaWV3KCk7XG4gICAgICAgIHRoaXMuX2J1aWxkTWludXRlc1ZpZXcoKTtcbiAgICAgICAgdGhpcy5fYnVpbGRTVkdDbG9jaygpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYnVpbGRTVkdDbG9ja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9idWlsZFNWR0Nsb2NrKCkge1xuICAgICAgICAvLyBEcmF3IGNsb2NrIGhhbmRzIGFuZCBvdGhlcnNcbiAgICAgICAgdmFyIGRpYWxSYWRpdXMgPSB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cztcbiAgICAgICAgdmFyIHRpY2tSYWRpdXMgPSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cztcbiAgICAgICAgdmFyIGRpYW1ldGVyID0gZGlhbFJhZGl1cyAqIDI7XG5cbiAgICAgICAgdmFyIHN2ZyA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdzdmcnKTtcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGltZXBpY2tlci1zdmcnKTtcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnd2lkdGgnLCBkaWFtZXRlcik7XG4gICAgICAgIHN2Zy5zZXRBdHRyaWJ1dGUoJ2hlaWdodCcsIGRpYW1ldGVyKTtcbiAgICAgICAgdmFyIGcgPSBUaW1lcGlja2VyLl9jcmVhdGVTVkdFbCgnZycpO1xuICAgICAgICBnLnNldEF0dHJpYnV0ZSgndHJhbnNmb3JtJywgJ3RyYW5zbGF0ZSgnICsgZGlhbFJhZGl1cyArICcsJyArIGRpYWxSYWRpdXMgKyAnKScpO1xuICAgICAgICB2YXIgYmVhcmluZyA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdjaXJjbGUnKTtcbiAgICAgICAgYmVhcmluZy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RpbWVwaWNrZXItY2FudmFzLWJlYXJpbmcnKTtcbiAgICAgICAgYmVhcmluZy5zZXRBdHRyaWJ1dGUoJ2N4JywgMCk7XG4gICAgICAgIGJlYXJpbmcuc2V0QXR0cmlidXRlKCdjeScsIDApO1xuICAgICAgICBiZWFyaW5nLnNldEF0dHJpYnV0ZSgncicsIDQpO1xuICAgICAgICB2YXIgaGFuZCA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdsaW5lJyk7XG4gICAgICAgIGhhbmQuc2V0QXR0cmlidXRlKCd4MScsIDApO1xuICAgICAgICBoYW5kLnNldEF0dHJpYnV0ZSgneTEnLCAwKTtcbiAgICAgICAgdmFyIGJnID0gVGltZXBpY2tlci5fY3JlYXRlU1ZHRWwoJ2NpcmNsZScpO1xuICAgICAgICBiZy5zZXRBdHRyaWJ1dGUoJ2NsYXNzJywgJ3RpbWVwaWNrZXItY2FudmFzLWJnJyk7XG4gICAgICAgIGJnLnNldEF0dHJpYnV0ZSgncicsIHRpY2tSYWRpdXMpO1xuICAgICAgICBnLmFwcGVuZENoaWxkKGhhbmQpO1xuICAgICAgICBnLmFwcGVuZENoaWxkKGJnKTtcbiAgICAgICAgZy5hcHBlbmRDaGlsZChiZWFyaW5nKTtcbiAgICAgICAgc3ZnLmFwcGVuZENoaWxkKGcpO1xuICAgICAgICB0aGlzLl9jYW52YXMuYXBwZW5kQ2hpbGQoc3ZnKTtcblxuICAgICAgICB0aGlzLmhhbmQgPSBoYW5kO1xuICAgICAgICB0aGlzLmJnID0gYmc7XG4gICAgICAgIHRoaXMuYmVhcmluZyA9IGJlYXJpbmc7XG4gICAgICAgIHRoaXMuZyA9IGc7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9idWlsZEhvdXJzVmlld1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9idWlsZEhvdXJzVmlldygpIHtcbiAgICAgICAgdmFyICR0aWNrID0gJCgnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItdGlja1wiPjwvZGl2PicpO1xuICAgICAgICAvLyBIb3VycyB2aWV3XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuICAgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgMTM7IGkgKz0gMSkge1xuICAgICAgICAgICAgdmFyIHRpY2sgPSAkdGljay5jbG9uZSgpO1xuICAgICAgICAgICAgdmFyIHJhZGlhbiA9IGkgLyA2ICogTWF0aC5QSTtcbiAgICAgICAgICAgIHZhciByYWRpdXMgPSB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXM7XG4gICAgICAgICAgICB0aWNrLmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzICsgTWF0aC5zaW4ocmFkaWFuKSAqIHJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzICsgJ3B4JyxcbiAgICAgICAgICAgICAgdG9wOiB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cyAtIE1hdGguY29zKHJhZGlhbikgKiByYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgdGljay5odG1sKGkgPT09IDAgPyAnMDAnIDogaSk7XG4gICAgICAgICAgICB0aGlzLmhvdXJzVmlldy5hcHBlbmRDaGlsZCh0aWNrWzBdKTtcbiAgICAgICAgICAgIC8vIHRpY2sub24obW91c2Vkb3duRXZlbnQsIG1vdXNlZG93bik7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGZvciAodmFyIF9pMiA9IDA7IF9pMiA8IDI0OyBfaTIgKz0gMSkge1xuICAgICAgICAgICAgdmFyIF90aWNrID0gJHRpY2suY2xvbmUoKTtcbiAgICAgICAgICAgIHZhciBfcmFkaWFuID0gX2kyIC8gNiAqIE1hdGguUEk7XG4gICAgICAgICAgICB2YXIgaW5uZXIgPSBfaTIgPiAwICYmIF9pMiA8IDEzO1xuICAgICAgICAgICAgdmFyIF9yYWRpdXMgPSBpbm5lciA/IHRoaXMub3B0aW9ucy5pbm5lclJhZGl1cyA6IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cztcbiAgICAgICAgICAgIF90aWNrLmNzcyh7XG4gICAgICAgICAgICAgIGxlZnQ6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzICsgTWF0aC5zaW4oX3JhZGlhbikgKiBfcmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnLFxuICAgICAgICAgICAgICB0b3A6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzIC0gTWF0aC5jb3MoX3JhZGlhbikgKiBfcmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIF90aWNrLmh0bWwoX2kyID09PSAwID8gJzAwJyA6IF9pMik7XG4gICAgICAgICAgICB0aGlzLmhvdXJzVmlldy5hcHBlbmRDaGlsZChfdGlja1swXSk7XG4gICAgICAgICAgICAvLyB0aWNrLm9uKG1vdXNlZG93bkV2ZW50LCBtb3VzZWRvd24pO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYnVpbGRNaW51dGVzVmlld1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9idWlsZE1pbnV0ZXNWaWV3KCkge1xuICAgICAgICB2YXIgJHRpY2sgPSAkKCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci10aWNrXCI+PC9kaXY+Jyk7XG4gICAgICAgIC8vIE1pbnV0ZXMgdmlld1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IDYwOyBpICs9IDUpIHtcbiAgICAgICAgICB2YXIgdGljayA9ICR0aWNrLmNsb25lKCk7XG4gICAgICAgICAgdmFyIHJhZGlhbiA9IGkgLyAzMCAqIE1hdGguUEk7XG4gICAgICAgICAgdGljay5jc3Moe1xuICAgICAgICAgICAgbGVmdDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgKyBNYXRoLnNpbihyYWRpYW4pICogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnLFxuICAgICAgICAgICAgdG9wOiB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cyAtIE1hdGguY29zKHJhZGlhbikgKiB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aWNrLmh0bWwoVGltZXBpY2tlci5fYWRkTGVhZGluZ1plcm8oaSkpO1xuICAgICAgICAgIHRoaXMubWludXRlc1ZpZXcuYXBwZW5kQ2hpbGQodGlja1swXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUFtUG1DbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVBbVBtQ2xpY2soZSkge1xuICAgICAgICB2YXIgJGJ0bkNsaWNrZWQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgdGhpcy5hbU9yUG0gPSAkYnRuQ2xpY2tlZC5oYXNDbGFzcygnYW0tYnRuJykgPyAnQU0nIDogJ1BNJztcbiAgICAgICAgdGhpcy5fdXBkYXRlQW1QbVZpZXcoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3VwZGF0ZUFtUG1WaWV3XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZUFtUG1WaWV3KCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHtcbiAgICAgICAgICB0aGlzLiRhbUJ0bi50b2dnbGVDbGFzcygndGV4dC1wcmltYXJ5JywgdGhpcy5hbU9yUG0gPT09ICdBTScpO1xuICAgICAgICAgIHRoaXMuJHBtQnRuLnRvZ2dsZUNsYXNzKCd0ZXh0LXByaW1hcnknLCB0aGlzLmFtT3JQbSA9PT0gJ1BNJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3VwZGF0ZVRpbWVGcm9tSW5wdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlVGltZUZyb21JbnB1dCgpIHtcbiAgICAgICAgLy8gR2V0IHRoZSB0aW1lXG4gICAgICAgIHZhciB2YWx1ZSA9ICgodGhpcy5lbC52YWx1ZSB8fCB0aGlzLm9wdGlvbnMuZGVmYXVsdFRpbWUgfHwgJycpICsgJycpLnNwbGl0KCc6Jyk7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91ciAmJiAhKHR5cGVvZiB2YWx1ZVsxXSA9PT0gJ3VuZGVmaW5lZCcpKSB7XG4gICAgICAgICAgaWYgKHZhbHVlWzFdLnRvVXBwZXJDYXNlKCkuaW5kZXhPZignQU0nKSA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuYW1PclBtID0gJ0FNJztcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5hbU9yUG0gPSAnUE0nO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZVsxXSA9IHZhbHVlWzFdLnJlcGxhY2UoJ0FNJywgJycpLnJlcGxhY2UoJ1BNJywgJycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZVswXSA9PT0gJ25vdycpIHtcbiAgICAgICAgICB2YXIgbm93ID0gbmV3IERhdGUoK25ldyBEYXRlKCkgKyB0aGlzLm9wdGlvbnMuZnJvbU5vdyk7XG4gICAgICAgICAgdmFsdWUgPSBbbm93LmdldEhvdXJzKCksIG5vdy5nZXRNaW51dGVzKCldO1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuICAgICAgICAgICAgdGhpcy5hbU9yUG0gPSB2YWx1ZVswXSA+PSAxMiAmJiB2YWx1ZVswXSA8IDI0ID8gJ1BNJyA6ICdBTSc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuaG91cnMgPSArdmFsdWVbMF0gfHwgMDtcbiAgICAgICAgdGhpcy5taW51dGVzID0gK3ZhbHVlWzFdIHx8IDA7XG4gICAgICAgIHRoaXMuc3BhbkhvdXJzLmlubmVySFRNTCA9IHRoaXMuaG91cnM7XG4gICAgICAgIHRoaXMuc3Bhbk1pbnV0ZXMuaW5uZXJIVE1MID0gVGltZXBpY2tlci5fYWRkTGVhZGluZ1plcm8odGhpcy5taW51dGVzKTtcblxuICAgICAgICB0aGlzLl91cGRhdGVBbVBtVmlldygpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzaG93Vmlld1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNob3dWaWV3KHZpZXcsIGRlbGF5KSB7XG4gICAgICAgIGlmICh2aWV3ID09PSAnbWludXRlcycgJiYgJCh0aGlzLmhvdXJzVmlldykuY3NzKCd2aXNpYmlsaXR5JykgPT09ICd2aXNpYmxlJykge1xuICAgICAgICAgIC8vIHJhaXNlQ2FsbGJhY2sodGhpcy5vcHRpb25zLmJlZm9yZUhvdXJTZWxlY3QpO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpc0hvdXJzID0gdmlldyA9PT0gJ2hvdXJzJyxcbiAgICAgICAgICAgIG5leHRWaWV3ID0gaXNIb3VycyA/IHRoaXMuaG91cnNWaWV3IDogdGhpcy5taW51dGVzVmlldyxcbiAgICAgICAgICAgIGhpZGVWaWV3ID0gaXNIb3VycyA/IHRoaXMubWludXRlc1ZpZXcgOiB0aGlzLmhvdXJzVmlldztcbiAgICAgICAgdGhpcy5jdXJyZW50VmlldyA9IHZpZXc7XG5cbiAgICAgICAgJCh0aGlzLnNwYW5Ib3VycykudG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsIGlzSG91cnMpO1xuICAgICAgICAkKHRoaXMuc3Bhbk1pbnV0ZXMpLnRvZ2dsZUNsYXNzKCd0ZXh0LXByaW1hcnknLCAhaXNIb3Vycyk7XG5cbiAgICAgICAgLy8gVHJhbnNpdGlvbiB2aWV3XG4gICAgICAgIGhpZGVWaWV3LmNsYXNzTGlzdC5hZGQoJ3RpbWVwaWNrZXItZGlhbC1vdXQnKTtcbiAgICAgICAgJChuZXh0VmlldykuY3NzKCd2aXNpYmlsaXR5JywgJ3Zpc2libGUnKS5yZW1vdmVDbGFzcygndGltZXBpY2tlci1kaWFsLW91dCcpO1xuXG4gICAgICAgIC8vIFJlc2V0IGNsb2NrIGhhbmRcbiAgICAgICAgdGhpcy5yZXNldENsb2NrKGRlbGF5KTtcblxuICAgICAgICAvLyBBZnRlciB0cmFuc2l0aW9ucyBlbmRlZFxuICAgICAgICBjbGVhclRpbWVvdXQodGhpcy50b2dnbGVWaWV3VGltZXIpO1xuICAgICAgICB0aGlzLnRvZ2dsZVZpZXdUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICQoaGlkZVZpZXcpLmNzcygndmlzaWJpbGl0eScsICdoaWRkZW4nKTtcbiAgICAgICAgfSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVzZXRDbG9ja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlc2V0Q2xvY2soZGVsYXkpIHtcbiAgICAgICAgdmFyIHZpZXcgPSB0aGlzLmN1cnJlbnRWaWV3LFxuICAgICAgICAgICAgdmFsdWUgPSB0aGlzW3ZpZXddLFxuICAgICAgICAgICAgaXNIb3VycyA9IHZpZXcgPT09ICdob3VycycsXG4gICAgICAgICAgICB1bml0ID0gTWF0aC5QSSAvIChpc0hvdXJzID8gNiA6IDMwKSxcbiAgICAgICAgICAgIHJhZGlhbiA9IHZhbHVlICogdW5pdCxcbiAgICAgICAgICAgIHJhZGl1cyA9IGlzSG91cnMgJiYgdmFsdWUgPiAwICYmIHZhbHVlIDwgMTMgPyB0aGlzLm9wdGlvbnMuaW5uZXJSYWRpdXMgOiB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXMsXG4gICAgICAgICAgICB4ID0gTWF0aC5zaW4ocmFkaWFuKSAqIHJhZGl1cyxcbiAgICAgICAgICAgIHkgPSAtTWF0aC5jb3MocmFkaWFuKSAqIHJhZGl1cyxcbiAgICAgICAgICAgIHNlbGYgPSB0aGlzO1xuXG4gICAgICAgIGlmIChkZWxheSkge1xuICAgICAgICAgICQodGhpcy5jYW52YXMpLmFkZENsYXNzKCd0aW1lcGlja2VyLWNhbnZhcy1vdXQnKTtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoc2VsZi5jYW52YXMpLnJlbW92ZUNsYXNzKCd0aW1lcGlja2VyLWNhbnZhcy1vdXQnKTtcbiAgICAgICAgICAgIHNlbGYuc2V0SGFuZCh4LCB5KTtcbiAgICAgICAgICB9LCBkZWxheSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5zZXRIYW5kKHgsIHkpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInNldEhhbmRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRIYW5kKHgsIHksIHJvdW5kQnk1KSB7XG4gICAgICAgIHZhciBfdGhpczYwID0gdGhpcztcblxuICAgICAgICB2YXIgcmFkaWFuID0gTWF0aC5hdGFuMih4LCAteSksXG4gICAgICAgICAgICBpc0hvdXJzID0gdGhpcy5jdXJyZW50VmlldyA9PT0gJ2hvdXJzJyxcbiAgICAgICAgICAgIHVuaXQgPSBNYXRoLlBJIC8gKGlzSG91cnMgfHwgcm91bmRCeTUgPyA2IDogMzApLFxuICAgICAgICAgICAgeiA9IE1hdGguc3FydCh4ICogeCArIHkgKiB5KSxcbiAgICAgICAgICAgIGlubmVyID0gaXNIb3VycyAmJiB6IDwgKHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cyArIHRoaXMub3B0aW9ucy5pbm5lclJhZGl1cykgLyAyLFxuICAgICAgICAgICAgcmFkaXVzID0gaW5uZXIgPyB0aGlzLm9wdGlvbnMuaW5uZXJSYWRpdXMgOiB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXM7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyKSB7XG4gICAgICAgICAgcmFkaXVzID0gdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmFkaWFuIHNob3VsZCBpbiByYW5nZSBbMCwgMlBJXVxuICAgICAgICBpZiAocmFkaWFuIDwgMCkge1xuICAgICAgICAgIHJhZGlhbiA9IE1hdGguUEkgKiAyICsgcmFkaWFuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gR2V0IHRoZSByb3VuZCB2YWx1ZVxuICAgICAgICB2YXIgdmFsdWUgPSBNYXRoLnJvdW5kKHJhZGlhbiAvIHVuaXQpO1xuXG4gICAgICAgIC8vIEdldCB0aGUgcm91bmQgcmFkaWFuXG4gICAgICAgIHJhZGlhbiA9IHZhbHVlICogdW5pdDtcblxuICAgICAgICAvLyBDb3JyZWN0IHRoZSBob3VycyBvciBtaW51dGVzXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuICAgICAgICAgIGlmIChpc0hvdXJzKSB7XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IDApIHZhbHVlID0gMTI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyb3VuZEJ5NSkgdmFsdWUgKj0gNTtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gNjApIHZhbHVlID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKGlzSG91cnMpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMTIpIHtcbiAgICAgICAgICAgICAgdmFsdWUgPSAwO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgPSBpbm5lciA/IHZhbHVlID09PSAwID8gMTIgOiB2YWx1ZSA6IHZhbHVlID09PSAwID8gMCA6IHZhbHVlICsgMTI7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGlmIChyb3VuZEJ5NSkge1xuICAgICAgICAgICAgICB2YWx1ZSAqPSA1O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKHZhbHVlID09PSA2MCkge1xuICAgICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gT25jZSBob3VycyBvciBtaW51dGVzIGNoYW5nZWQsIHZpYnJhdGUgdGhlIGRldmljZVxuICAgICAgICBpZiAodGhpc1t0aGlzLmN1cnJlbnRWaWV3XSAhPT0gdmFsdWUpIHtcbiAgICAgICAgICBpZiAodGhpcy52aWJyYXRlICYmIHRoaXMub3B0aW9ucy52aWJyYXRlKSB7XG4gICAgICAgICAgICAvLyBEbyBub3QgdmlicmF0ZSB0b28gZnJlcXVlbnRseVxuICAgICAgICAgICAgaWYgKCF0aGlzLnZpYnJhdGVUaW1lcikge1xuICAgICAgICAgICAgICBuYXZpZ2F0b3JbdGhpcy52aWJyYXRlXSgxMCk7XG4gICAgICAgICAgICAgIHRoaXMudmlicmF0ZVRpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM2MC52aWJyYXRlVGltZXIgPSBudWxsO1xuICAgICAgICAgICAgICB9LCAxMDApO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXNbdGhpcy5jdXJyZW50Vmlld10gPSB2YWx1ZTtcbiAgICAgICAgaWYgKGlzSG91cnMpIHtcbiAgICAgICAgICB0aGlzWydzcGFuSG91cnMnXS5pbm5lckhUTUwgPSB2YWx1ZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzWydzcGFuTWludXRlcyddLmlubmVySFRNTCA9IFRpbWVwaWNrZXIuX2FkZExlYWRpbmdaZXJvKHZhbHVlKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNldCBjbG9jayBoYW5kIGFuZCBvdGhlcnMnIHBvc2l0aW9uXG4gICAgICAgIHZhciBjeDEgPSBNYXRoLnNpbihyYWRpYW4pICogKHJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzKSxcbiAgICAgICAgICAgIGN5MSA9IC1NYXRoLmNvcyhyYWRpYW4pICogKHJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzKSxcbiAgICAgICAgICAgIGN4MiA9IE1hdGguc2luKHJhZGlhbikgKiByYWRpdXMsXG4gICAgICAgICAgICBjeTIgPSAtTWF0aC5jb3MocmFkaWFuKSAqIHJhZGl1cztcbiAgICAgICAgdGhpcy5oYW5kLnNldEF0dHJpYnV0ZSgneDInLCBjeDEpO1xuICAgICAgICB0aGlzLmhhbmQuc2V0QXR0cmlidXRlKCd5MicsIGN5MSk7XG4gICAgICAgIHRoaXMuYmcuc2V0QXR0cmlidXRlKCdjeCcsIGN4Mik7XG4gICAgICAgIHRoaXMuYmcuc2V0QXR0cmlidXRlKCdjeScsIGN5Mik7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMuX3VwZGF0ZVRpbWVGcm9tSW5wdXQoKTtcbiAgICAgICAgdGhpcy5zaG93VmlldygnaG91cnMnKTtcblxuICAgICAgICB0aGlzLm1vZGFsLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMubW9kYWwuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBGaW5pc2ggdGltZXBpY2tlciBzZWxlY3Rpb24uXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkb25lXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZG9uZShlLCBjbGVhclZhbHVlKSB7XG4gICAgICAgIC8vIFNldCBpbnB1dCB2YWx1ZVxuICAgICAgICB2YXIgbGFzdCA9IHRoaXMuZWwudmFsdWU7XG4gICAgICAgIHZhciB2YWx1ZSA9IGNsZWFyVmFsdWUgPyAnJyA6IFRpbWVwaWNrZXIuX2FkZExlYWRpbmdaZXJvKHRoaXMuaG91cnMpICsgJzonICsgVGltZXBpY2tlci5fYWRkTGVhZGluZ1plcm8odGhpcy5taW51dGVzKTtcbiAgICAgICAgdGhpcy50aW1lID0gdmFsdWU7XG4gICAgICAgIGlmICghY2xlYXJWYWx1ZSAmJiB0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuICAgICAgICAgIHZhbHVlID0gdmFsdWUgKyBcIiBcIiArIHRoaXMuYW1PclBtO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWwudmFsdWUgPSB2YWx1ZTtcblxuICAgICAgICAvLyBUcmlnZ2VyIGNoYW5nZSBldmVudFxuICAgICAgICBpZiAodmFsdWUgIT09IGxhc3QpIHtcbiAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgdGhpcy5lbC5mb2N1cygpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbGVhclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsZWFyKCkge1xuICAgICAgICB0aGlzLmRvbmUobnVsbCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KFRpbWVwaWNrZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUaW1lcGlja2VyKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FkZExlYWRpbmdaZXJvXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZExlYWRpbmdaZXJvKG51bSkge1xuICAgICAgICByZXR1cm4gKG51bSA8IDEwID8gJzAnIDogJycpICsgbnVtO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY3JlYXRlU1ZHRWxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlU1ZHRWwobmFtZSkge1xuICAgICAgICB2YXIgc3ZnTlMgPSAnaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmcnO1xuICAgICAgICByZXR1cm4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHN2Z05TLCBuYW1lKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBAdHlwZWRlZiB7T2JqZWN0fSBQb2ludFxuICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHggVGhlIFggQ29vcmRpbmF0ZVxuICAgICAgICogQHByb3BlcnR5IHtudW1iZXJ9IHkgVGhlIFkgQ29vcmRpbmF0ZVxuICAgICAgICovXG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHggcG9zaXRpb24gb2YgbW91c2Ugb3IgdG91Y2ggZXZlbnRcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqIEByZXR1cm4ge1BvaW50fSB4IGFuZCB5IGxvY2F0aW9uXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfUG9zXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX1BvcyhlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIHsgeDogZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFgsIHk6IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRZIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gbW91c2UgZXZlbnRcbiAgICAgICAgcmV0dXJuIHsgeDogZS5jbGllbnRYLCB5OiBlLmNsaWVudFkgfTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fVGltZXBpY2tlcjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUaW1lcGlja2VyO1xuICB9KENvbXBvbmVudCk7XG5cbiAgVGltZXBpY2tlci5fdGVtcGxhdGUgPSBbJzxkaXYgY2xhc3M9IFwibW9kYWwgdGltZXBpY2tlci1tb2RhbFwiPicsICc8ZGl2IGNsYXNzPVwibW9kYWwtY29udGVudCB0aW1lcGlja2VyLWNvbnRhaW5lclwiPicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1kaWdpdGFsLWRpc3BsYXlcIj4nLCAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItdGV4dC1jb250YWluZXJcIj4nLCAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItZGlzcGxheS1jb2x1bW5cIj4nLCAnPHNwYW4gY2xhc3M9XCJ0aW1lcGlja2VyLXNwYW4taG91cnMgdGV4dC1wcmltYXJ5XCI+PC9zcGFuPicsICc6JywgJzxzcGFuIGNsYXNzPVwidGltZXBpY2tlci1zcGFuLW1pbnV0ZXNcIj48L3NwYW4+JywgJzwvZGl2PicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1kaXNwbGF5LWNvbHVtbiB0aW1lcGlja2VyLWRpc3BsYXktYW0tcG1cIj4nLCAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItc3Bhbi1hbS1wbVwiPjwvZGl2PicsICc8L2Rpdj4nLCAnPC9kaXY+JywgJzwvZGl2PicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1hbmFsb2ctZGlzcGxheVwiPicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1wbGF0ZVwiPicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1jYW52YXNcIj48L2Rpdj4nLCAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItZGlhbCB0aW1lcGlja2VyLWhvdXJzXCI+PC9kaXY+JywgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWRpYWwgdGltZXBpY2tlci1taW51dGVzIHRpbWVwaWNrZXItZGlhbC1vdXRcIj48L2Rpdj4nLCAnPC9kaXY+JywgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWZvb3RlclwiPjwvZGl2PicsICc8L2Rpdj4nLCAnPC9kaXY+JywgJzwvZGl2PiddLmpvaW4oJycpO1xuXG4gIE0uVGltZXBpY2tlciA9IFRpbWVwaWNrZXI7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihUaW1lcGlja2VyLCAndGltZXBpY2tlcicsICdNX1RpbWVwaWNrZXInKTtcbiAgfVxufSkoY2FzaCk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge307XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgQ2hhcmFjdGVyQ291bnRlciA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTcpIHtcbiAgICBfaW5oZXJpdHMoQ2hhcmFjdGVyQ291bnRlciwgX0NvbXBvbmVudDE3KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBDaGFyYWN0ZXJDb3VudGVyIGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gQ2hhcmFjdGVyQ291bnRlcihlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENoYXJhY3RlckNvdW50ZXIpO1xuXG4gICAgICB2YXIgX3RoaXM2MSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDaGFyYWN0ZXJDb3VudGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2hhcmFjdGVyQ291bnRlcikpLmNhbGwodGhpcywgQ2hhcmFjdGVyQ291bnRlciwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM2MS5lbC5NX0NoYXJhY3RlckNvdW50ZXIgPSBfdGhpczYxO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBjaGFyYWN0ZXIgY291bnRlclxuICAgICAgICovXG4gICAgICBfdGhpczYxLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ2hhcmFjdGVyQ291bnRlci5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzNjEuaXNJbnZhbGlkID0gZmFsc2U7XG4gICAgICBfdGhpczYxLmlzVmFsaWRMZW5ndGggPSBmYWxzZTtcbiAgICAgIF90aGlzNjEuX3NldHVwQ291bnRlcigpO1xuICAgICAgX3RoaXM2MS5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICByZXR1cm4gX3RoaXM2MTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ2hhcmFjdGVyQ291bnRlciwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5lbC5DaGFyYWN0ZXJDb3VudGVyID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLl9yZW1vdmVDb3VudGVyKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVVcGRhdGVDb3VudGVyQm91bmQgPSB0aGlzLnVwZGF0ZUNvdW50ZXIuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlVXBkYXRlQ291bnRlckJvdW5kLCB0cnVlKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX2hhbmRsZVVwZGF0ZUNvdW50ZXJCb3VuZCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlVXBkYXRlQ291bnRlckJvdW5kLCB0cnVlKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX2hhbmRsZVVwZGF0ZUNvdW50ZXJCb3VuZCwgdHJ1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgY291bnRlciBlbGVtZW50XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBDb3VudGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwQ291bnRlcigpIHtcbiAgICAgICAgdGhpcy5jb3VudGVyRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG4gICAgICAgICQodGhpcy5jb3VudGVyRWwpLmFkZENsYXNzKCdjaGFyYWN0ZXItY291bnRlcicpLmNzcyh7XG4gICAgICAgICAgZmxvYXQ6ICdyaWdodCcsXG4gICAgICAgICAgJ2ZvbnQtc2l6ZSc6ICcxMnB4JyxcbiAgICAgICAgICBoZWlnaHQ6IDFcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy4kZWwucGFyZW50KCkuYXBwZW5kKHRoaXMuY291bnRlckVsKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgY291bnRlciBlbGVtZW50XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlQ291bnRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVDb3VudGVyKCkge1xuICAgICAgICAkKHRoaXMuY291bnRlckVsKS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBVcGRhdGUgY291bnRlclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXBkYXRlQ291bnRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZUNvdW50ZXIoKSB7XG4gICAgICAgIHZhciBtYXhMZW5ndGggPSArdGhpcy4kZWwuYXR0cignZGF0YS1sZW5ndGgnKSxcbiAgICAgICAgICAgIGFjdHVhbExlbmd0aCA9IHRoaXMuZWwudmFsdWUubGVuZ3RoO1xuICAgICAgICB0aGlzLmlzVmFsaWRMZW5ndGggPSBhY3R1YWxMZW5ndGggPD0gbWF4TGVuZ3RoO1xuICAgICAgICB2YXIgY291bnRlclN0cmluZyA9IGFjdHVhbExlbmd0aDtcblxuICAgICAgICBpZiAobWF4TGVuZ3RoKSB7XG4gICAgICAgICAgY291bnRlclN0cmluZyArPSAnLycgKyBtYXhMZW5ndGg7XG4gICAgICAgICAgdGhpcy5fdmFsaWRhdGVJbnB1dCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh0aGlzLmNvdW50ZXJFbCkuaHRtbChjb3VudGVyU3RyaW5nKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBZGQgdmFsaWRhdGlvbiBjbGFzc2VzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdmFsaWRhdGVJbnB1dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF92YWxpZGF0ZUlucHV0KCkge1xuICAgICAgICBpZiAodGhpcy5pc1ZhbGlkTGVuZ3RoICYmIHRoaXMuaXNJbnZhbGlkKSB7XG4gICAgICAgICAgdGhpcy5pc0ludmFsaWQgPSBmYWxzZTtcbiAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLmlzVmFsaWRMZW5ndGggJiYgIXRoaXMuaXNJbnZhbGlkKSB7XG4gICAgICAgICAgdGhpcy5pc0ludmFsaWQgPSB0cnVlO1xuICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCd2YWxpZCcpO1xuICAgICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoQ2hhcmFjdGVyQ291bnRlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENoYXJhY3RlckNvdW50ZXIpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9DaGFyYWN0ZXJDb3VudGVyO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENoYXJhY3RlckNvdW50ZXI7XG4gIH0oQ29tcG9uZW50KTtcblxuICBNLkNoYXJhY3RlckNvdW50ZXIgPSBDaGFyYWN0ZXJDb3VudGVyO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoQ2hhcmFjdGVyQ291bnRlciwgJ2NoYXJhY3RlckNvdW50ZXInLCAnTV9DaGFyYWN0ZXJDb3VudGVyJyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBkdXJhdGlvbjogMjAwLCAvLyBtc1xuICAgIGRpc3Q6IC0xMDAsIC8vIHpvb20gc2NhbGUgVE9ETzogbWFrZSB0aGlzIG1vcmUgaW50dWl0aXZlIGFzIGFuIG9wdGlvblxuICAgIHNoaWZ0OiAwLCAvLyBzcGFjaW5nIGZvciBjZW50ZXIgaW1hZ2VcbiAgICBwYWRkaW5nOiAwLCAvLyBQYWRkaW5nIGJldHdlZW4gbm9uIGNlbnRlciBpdGVtc1xuICAgIG51bVZpc2libGU6IDUsIC8vIE51bWJlciBvZiB2aXNpYmxlIGl0ZW1zIGluIGNhcm91c2VsXG4gICAgZnVsbFdpZHRoOiBmYWxzZSwgLy8gQ2hhbmdlIHRvIGZ1bGwgd2lkdGggc3R5bGVzXG4gICAgaW5kaWNhdG9yczogZmFsc2UsIC8vIFRvZ2dsZSBpbmRpY2F0b3JzXG4gICAgbm9XcmFwOiBmYWxzZSwgLy8gRG9uJ3Qgd3JhcCBhcm91bmQgYW5kIGN5Y2xlIHRocm91Z2ggaXRlbXMuXG4gICAgb25DeWNsZVRvOiBudWxsIC8vIENhbGxiYWNrIGZvciB3aGVuIGEgbmV3IHNsaWRlIGlzIGN5Y2xlZCB0by5cbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBDYXJvdXNlbCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTgpIHtcbiAgICBfaW5oZXJpdHMoQ2Fyb3VzZWwsIF9Db21wb25lbnQxOCk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgQ2Fyb3VzZWwgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDYXJvdXNlbChlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENhcm91c2VsKTtcblxuICAgICAgdmFyIF90aGlzNjIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoQ2Fyb3VzZWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDYXJvdXNlbCkpLmNhbGwodGhpcywgQ2Fyb3VzZWwsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzNjIuZWwuTV9DYXJvdXNlbCA9IF90aGlzNjI7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIGNhcm91c2VsXG4gICAgICAgKiBAbWVtYmVyIENhcm91c2VsI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGR1cmF0aW9uXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBkaXN0XG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBzaGlmdFxuICAgICAgICogQHByb3Age051bWJlcn0gcGFkZGluZ1xuICAgICAgICogQHByb3Age051bWJlcn0gbnVtVmlzaWJsZVxuICAgICAgICogQHByb3Age0Jvb2xlYW59IGZ1bGxXaWR0aFxuICAgICAgICogQHByb3Age0Jvb2xlYW59IGluZGljYXRvcnNcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBub1dyYXBcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DeWNsZVRvXG4gICAgICAgKi9cbiAgICAgIF90aGlzNjIub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDYXJvdXNlbC5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFNldHVwXG4gICAgICBfdGhpczYyLmhhc011bHRpcGxlU2xpZGVzID0gX3RoaXM2Mi4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5sZW5ndGggPiAxO1xuICAgICAgX3RoaXM2Mi5zaG93SW5kaWNhdG9ycyA9IF90aGlzNjIub3B0aW9ucy5pbmRpY2F0b3JzICYmIF90aGlzNjIuaGFzTXVsdGlwbGVTbGlkZXM7XG4gICAgICBfdGhpczYyLm5vV3JhcCA9IF90aGlzNjIub3B0aW9ucy5ub1dyYXAgfHwgIV90aGlzNjIuaGFzTXVsdGlwbGVTbGlkZXM7XG4gICAgICBfdGhpczYyLnByZXNzZWQgPSBmYWxzZTtcbiAgICAgIF90aGlzNjIuZHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgX3RoaXM2Mi5vZmZzZXQgPSBfdGhpczYyLnRhcmdldCA9IDA7XG4gICAgICBfdGhpczYyLmltYWdlcyA9IFtdO1xuICAgICAgX3RoaXM2Mi5pdGVtV2lkdGggPSBfdGhpczYyLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmZpcnN0KCkuaW5uZXJXaWR0aCgpO1xuICAgICAgX3RoaXM2Mi5pdGVtSGVpZ2h0ID0gX3RoaXM2Mi4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5maXJzdCgpLmlubmVySGVpZ2h0KCk7XG4gICAgICBfdGhpczYyLmRpbSA9IF90aGlzNjIuaXRlbVdpZHRoICogMiArIF90aGlzNjIub3B0aW9ucy5wYWRkaW5nIHx8IDE7IC8vIE1ha2Ugc3VyZSBkaW0gaXMgbm9uIHplcm8gZm9yIGRpdmlzaW9ucy5cbiAgICAgIF90aGlzNjIuX2F1dG9TY3JvbGxCb3VuZCA9IF90aGlzNjIuX2F1dG9TY3JvbGwuYmluZChfdGhpczYyKTtcbiAgICAgIF90aGlzNjIuX3RyYWNrQm91bmQgPSBfdGhpczYyLl90cmFjay5iaW5kKF90aGlzNjIpO1xuXG4gICAgICAvLyBGdWxsIFdpZHRoIGNhcm91c2VsIHNldHVwXG4gICAgICBpZiAoX3RoaXM2Mi5vcHRpb25zLmZ1bGxXaWR0aCkge1xuICAgICAgICBfdGhpczYyLm9wdGlvbnMuZGlzdCA9IDA7XG4gICAgICAgIF90aGlzNjIuX3NldENhcm91c2VsSGVpZ2h0KCk7XG5cbiAgICAgICAgLy8gT2Zmc2V0IGZpeGVkIGl0ZW1zIHdoZW4gaW5kaWNhdG9ycy5cbiAgICAgICAgaWYgKF90aGlzNjIuc2hvd0luZGljYXRvcnMpIHtcbiAgICAgICAgICBfdGhpczYyLiRlbC5maW5kKCcuY2Fyb3VzZWwtZml4ZWQtaXRlbScpLmFkZENsYXNzKCd3aXRoLWluZGljYXRvcnMnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBJdGVyYXRlIHRocm91Z2ggc2xpZGVzXG4gICAgICBfdGhpczYyLiRpbmRpY2F0b3JzID0gJCgnPHVsIGNsYXNzPVwiaW5kaWNhdG9yc1wiPjwvdWw+Jyk7XG4gICAgICBfdGhpczYyLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XG4gICAgICAgIF90aGlzNjIuaW1hZ2VzLnB1c2goZWwpO1xuICAgICAgICBpZiAoX3RoaXM2Mi5zaG93SW5kaWNhdG9ycykge1xuICAgICAgICAgIHZhciAkaW5kaWNhdG9yID0gJCgnPGxpIGNsYXNzPVwiaW5kaWNhdG9yLWl0ZW1cIj48L2xpPicpO1xuXG4gICAgICAgICAgLy8gQWRkIGFjdGl2ZSB0byBmaXJzdCBieSBkZWZhdWx0LlxuICAgICAgICAgIGlmIChpID09PSAwKSB7XG4gICAgICAgICAgICAkaW5kaWNhdG9yWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzNjIuJGluZGljYXRvcnMuYXBwZW5kKCRpbmRpY2F0b3IpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIGlmIChfdGhpczYyLnNob3dJbmRpY2F0b3JzKSB7XG4gICAgICAgIF90aGlzNjIuJGVsLmFwcGVuZChfdGhpczYyLiRpbmRpY2F0b3JzKTtcbiAgICAgIH1cbiAgICAgIF90aGlzNjIuY291bnQgPSBfdGhpczYyLmltYWdlcy5sZW5ndGg7XG5cbiAgICAgIC8vIENhcCBudW1WaXNpYmxlIGF0IGNvdW50XG4gICAgICBfdGhpczYyLm9wdGlvbnMubnVtVmlzaWJsZSA9IE1hdGgubWluKF90aGlzNjIuY291bnQsIF90aGlzNjIub3B0aW9ucy5udW1WaXNpYmxlKTtcblxuICAgICAgLy8gU2V0dXAgY3Jvc3MgYnJvd3NlciBzdHJpbmdcbiAgICAgIF90aGlzNjIueGZvcm0gPSAndHJhbnNmb3JtJztcbiAgICAgIFsnd2Via2l0JywgJ01veicsICdPJywgJ21zJ10uZXZlcnkoZnVuY3Rpb24gKHByZWZpeCkge1xuICAgICAgICB2YXIgZSA9IHByZWZpeCArICdUcmFuc2Zvcm0nO1xuICAgICAgICBpZiAodHlwZW9mIGRvY3VtZW50LmJvZHkuc3R5bGVbZV0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgX3RoaXM2Mi54Zm9ybSA9IGU7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzNjIuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgX3RoaXM2Mi5fc2Nyb2xsKF90aGlzNjIub2Zmc2V0KTtcbiAgICAgIHJldHVybiBfdGhpczYyO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDYXJvdXNlbCwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5lbC5NX0Nhcm91c2VsID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdmFyIF90aGlzNjMgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcm91c2VsVGFwQm91bmQgPSB0aGlzLl9oYW5kbGVDYXJvdXNlbFRhcC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJvdXNlbERyYWdCb3VuZCA9IHRoaXMuX2hhbmRsZUNhcm91c2VsRHJhZy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VCb3VuZCA9IHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDYXJvdXNlbENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDYXJvdXNlbENsaWNrLmJpbmQodGhpcyk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cub250b3VjaHN0YXJ0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZUNhcm91c2VsVGFwQm91bmQpO1xuICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxEcmFnQm91bmQpO1xuICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VCb3VuZCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZUNhcm91c2VsVGFwQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZUNhcm91c2VsRHJhZ0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDYXJvdXNlbENsaWNrQm91bmQpO1xuXG4gICAgICAgIGlmICh0aGlzLnNob3dJbmRpY2F0b3JzICYmIHRoaXMuJGluZGljYXRvcnMpIHtcbiAgICAgICAgICB0aGlzLl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlSW5kaWNhdG9yQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgICB0aGlzLiRpbmRpY2F0b3JzLmZpbmQoJy5pbmRpY2F0b3ItaXRlbScpLmVhY2goZnVuY3Rpb24gKGVsLCBpKSB7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzNjMuX2hhbmRsZUluZGljYXRvckNsaWNrQm91bmQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVzaXplXG4gICAgICAgIHZhciB0aHJvdHRsZWRSZXNpemUgPSBNLnRocm90dGxlKHRoaXMuX2hhbmRsZVJlc2l6ZSwgMjAwKTtcbiAgICAgICAgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQgPSB0aHJvdHRsZWRSZXNpemUuYmluZCh0aGlzKTtcblxuICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdmFyIF90aGlzNjQgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0eXBlb2Ygd2luZG93Lm9udG91Y2hzdGFydCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFRhcEJvdW5kKTtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZUNhcm91c2VsRHJhZ0JvdW5kKTtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlQm91bmQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxUYXBCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxEcmFnQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcm91c2VsQ2xpY2tCb3VuZCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvd0luZGljYXRvcnMgJiYgdGhpcy4kaW5kaWNhdG9ycykge1xuICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZmluZCgnLmluZGljYXRvci1pdGVtJykuZWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM2NC5faGFuZGxlSW5kaWNhdG9yQ2xpY2tCb3VuZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDYXJvdXNlbCBUYXBcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDYXJvdXNlbFRhcFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYXJvdXNlbFRhcChlKSB7XG4gICAgICAgIC8vIEZpeGVzIGZpcmVmb3ggZHJhZ2dhYmxlIGltYWdlIGJ1Z1xuICAgICAgICBpZiAoZS50eXBlID09PSAnbW91c2Vkb3duJyAmJiAkKGUudGFyZ2V0KS5pcygnaW1nJykpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wcmVzc2VkID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5kcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMudmVydGljYWxEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgIHRoaXMucmVmZXJlbmNlID0gdGhpcy5feHBvcyhlKTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2VZID0gdGhpcy5feXBvcyhlKTtcblxuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdGhpcy5hbXBsaXR1ZGUgPSAwO1xuICAgICAgICB0aGlzLmZyYW1lID0gdGhpcy5vZmZzZXQ7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gRGF0ZS5ub3coKTtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpY2tlcik7XG4gICAgICAgIHRoaXMudGlja2VyID0gc2V0SW50ZXJ2YWwodGhpcy5fdHJhY2tCb3VuZCwgMTAwKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgQ2Fyb3VzZWwgRHJhZ1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNhcm91c2VsRHJhZ1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYXJvdXNlbERyYWcoZSkge1xuICAgICAgICB2YXIgeCA9IHZvaWQgMCxcbiAgICAgICAgICAgIHkgPSB2b2lkIDAsXG4gICAgICAgICAgICBkZWx0YSA9IHZvaWQgMCxcbiAgICAgICAgICAgIGRlbHRhWSA9IHZvaWQgMDtcbiAgICAgICAgaWYgKHRoaXMucHJlc3NlZCkge1xuICAgICAgICAgIHggPSB0aGlzLl94cG9zKGUpO1xuICAgICAgICAgIHkgPSB0aGlzLl95cG9zKGUpO1xuICAgICAgICAgIGRlbHRhID0gdGhpcy5yZWZlcmVuY2UgLSB4O1xuICAgICAgICAgIGRlbHRhWSA9IE1hdGguYWJzKHRoaXMucmVmZXJlbmNlWSAtIHkpO1xuICAgICAgICAgIGlmIChkZWx0YVkgPCAzMCAmJiAhdGhpcy52ZXJ0aWNhbERyYWdnZWQpIHtcbiAgICAgICAgICAgIC8vIElmIHZlcnRpY2FsIHNjcm9sbGluZyBkb24ndCBhbGxvdyBkcmFnZ2luZy5cbiAgICAgICAgICAgIGlmIChkZWx0YSA+IDIgfHwgZGVsdGEgPCAtMikge1xuICAgICAgICAgICAgICB0aGlzLmRyYWdnZWQgPSB0cnVlO1xuICAgICAgICAgICAgICB0aGlzLnJlZmVyZW5jZSA9IHg7XG4gICAgICAgICAgICAgIHRoaXMuX3Njcm9sbCh0aGlzLm9mZnNldCArIGRlbHRhKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuZHJhZ2dlZCkge1xuICAgICAgICAgICAgLy8gSWYgZHJhZ2dpbmcgZG9uJ3QgYWxsb3cgdmVydGljYWwgc2Nyb2xsLlxuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gVmVydGljYWwgc2Nyb2xsaW5nLlxuICAgICAgICAgICAgdGhpcy52ZXJ0aWNhbERyYWdnZWQgPSB0cnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLmRyYWdnZWQpIHtcbiAgICAgICAgICAvLyBJZiBkcmFnZ2luZyBkb24ndCBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGwuXG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENhcm91c2VsIFJlbGVhc2VcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2Fyb3VzZWxSZWxlYXNlKGUpIHtcbiAgICAgICAgaWYgKHRoaXMucHJlc3NlZCkge1xuICAgICAgICAgIHRoaXMucHJlc3NlZCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aWNrZXIpO1xuICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMub2Zmc2V0O1xuICAgICAgICBpZiAodGhpcy52ZWxvY2l0eSA+IDEwIHx8IHRoaXMudmVsb2NpdHkgPCAtMTApIHtcbiAgICAgICAgICB0aGlzLmFtcGxpdHVkZSA9IDAuOSAqIHRoaXMudmVsb2NpdHk7XG4gICAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLm9mZnNldCArIHRoaXMuYW1wbGl0dWRlO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gTWF0aC5yb3VuZCh0aGlzLnRhcmdldCAvIHRoaXMuZGltKSAqIHRoaXMuZGltO1xuXG4gICAgICAgIC8vIE5vIHdyYXAgb2YgaXRlbXMuXG4gICAgICAgIGlmICh0aGlzLm5vV3JhcCkge1xuICAgICAgICAgIGlmICh0aGlzLnRhcmdldCA+PSB0aGlzLmRpbSAqICh0aGlzLmNvdW50IC0gMSkpIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5kaW0gKiAodGhpcy5jb3VudCAtIDEpO1xuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy50YXJnZXQgPCAwKSB7XG4gICAgICAgICAgICB0aGlzLnRhcmdldCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHRoaXMuYW1wbGl0dWRlID0gdGhpcy50YXJnZXQgLSB0aGlzLm9mZnNldDtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5fYXV0b1Njcm9sbEJvdW5kKTtcblxuICAgICAgICBpZiAodGhpcy5kcmFnZ2VkKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDYXJvdXNlbCBDTGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNhcm91c2VsQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2Fyb3VzZWxDbGljayhlKSB7XG4gICAgICAgIC8vIERpc2FibGUgY2xpY2tzIGlmIGNhcm91c2VsIHdhcyBkcmFnZ2VkLlxuICAgICAgICBpZiAodGhpcy5kcmFnZ2VkKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9IGVsc2UgaWYgKCF0aGlzLm9wdGlvbnMuZnVsbFdpZHRoKSB7XG4gICAgICAgICAgdmFyIGNsaWNrZWRJbmRleCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jYXJvdXNlbC1pdGVtJykuaW5kZXgoKTtcbiAgICAgICAgICB2YXIgZGlmZiA9IHRoaXMuX3dyYXAodGhpcy5jZW50ZXIpIC0gY2xpY2tlZEluZGV4O1xuXG4gICAgICAgICAgLy8gRGlzYWJsZSBjbGlja3MgaWYgY2Fyb3VzZWwgd2FzIHNoaWZ0ZWQgYnkgY2xpY2tcbiAgICAgICAgICBpZiAoZGlmZiAhPT0gMCkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5fY3ljbGVUbyhjbGlja2VkSW5kZXgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIEluZGljYXRvciBDTGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUluZGljYXRvckNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUluZGljYXRvckNsaWNrKGUpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICB2YXIgaW5kaWNhdG9yID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmluZGljYXRvci1pdGVtJyk7XG4gICAgICAgIGlmIChpbmRpY2F0b3IubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5fY3ljbGVUbyhpbmRpY2F0b3IuaW5kZXgoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgVGhyb3R0bGUgUmVzaXplXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlUmVzaXplXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJlc2l6ZShlKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZnVsbFdpZHRoKSB7XG4gICAgICAgICAgdGhpcy5pdGVtV2lkdGggPSB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmZpcnN0KCkuaW5uZXJXaWR0aCgpO1xuICAgICAgICAgIHRoaXMuaW1hZ2VIZWlnaHQgPSB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbS5hY3RpdmUnKS5oZWlnaHQoKTtcbiAgICAgICAgICB0aGlzLmRpbSA9IHRoaXMuaXRlbVdpZHRoICogMiArIHRoaXMub3B0aW9ucy5wYWRkaW5nO1xuICAgICAgICAgIHRoaXMub2Zmc2V0ID0gdGhpcy5jZW50ZXIgKiAyICogdGhpcy5pdGVtV2lkdGg7XG4gICAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLm9mZnNldDtcbiAgICAgICAgICB0aGlzLl9zZXRDYXJvdXNlbEhlaWdodCh0cnVlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9zY3JvbGwoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCBjYXJvdXNlbCBoZWlnaHQgYmFzZWQgb24gZmlyc3Qgc2xpZGVcbiAgICAgICAqIEBwYXJhbSB7Qm9vbGVhbX0gaW1hZ2VPbmx5IC0gdHJ1ZSBmb3IgaW1hZ2Ugc2xpZGVzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0Q2Fyb3VzZWxIZWlnaHRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0Q2Fyb3VzZWxIZWlnaHQoaW1hZ2VPbmx5KSB7XG4gICAgICAgIHZhciBfdGhpczY1ID0gdGhpcztcblxuICAgICAgICB2YXIgZmlyc3RTbGlkZSA9IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtLmFjdGl2ZScpLmxlbmd0aCA/IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtLmFjdGl2ZScpLmZpcnN0KCkgOiB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmZpcnN0KCk7XG4gICAgICAgIHZhciBmaXJzdEltYWdlID0gZmlyc3RTbGlkZS5maW5kKCdpbWcnKS5maXJzdCgpO1xuICAgICAgICBpZiAoZmlyc3RJbWFnZS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoZmlyc3RJbWFnZVswXS5jb21wbGV0ZSkge1xuICAgICAgICAgICAgLy8gSWYgaW1hZ2Ugd29uJ3QgdHJpZ2dlciB0aGUgbG9hZCBldmVudFxuICAgICAgICAgICAgdmFyIGltYWdlSGVpZ2h0ID0gZmlyc3RJbWFnZS5oZWlnaHQoKTtcbiAgICAgICAgICAgIGlmIChpbWFnZUhlaWdodCA+IDApIHtcbiAgICAgICAgICAgICAgdGhpcy4kZWwuY3NzKCdoZWlnaHQnLCBpbWFnZUhlaWdodCArICdweCcpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgLy8gSWYgaW1hZ2Ugc3RpbGwgaGFzIG5vIGhlaWdodCwgdXNlIHRoZSBuYXR1cmFsIGRpbWVuc2lvbnMgdG8gY2FsY3VsYXRlXG4gICAgICAgICAgICAgIHZhciBuYXR1cmFsV2lkdGggPSBmaXJzdEltYWdlWzBdLm5hdHVyYWxXaWR0aDtcbiAgICAgICAgICAgICAgdmFyIG5hdHVyYWxIZWlnaHQgPSBmaXJzdEltYWdlWzBdLm5hdHVyYWxIZWlnaHQ7XG4gICAgICAgICAgICAgIHZhciBhZGp1c3RlZEhlaWdodCA9IHRoaXMuJGVsLndpZHRoKCkgLyBuYXR1cmFsV2lkdGggKiBuYXR1cmFsSGVpZ2h0O1xuICAgICAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIGFkanVzdGVkSGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIEdldCBoZWlnaHQgd2hlbiBpbWFnZSBpcyBsb2FkZWQgbm9ybWFsbHlcbiAgICAgICAgICAgIGZpcnN0SW1hZ2Uub25lKCdsb2FkJywgZnVuY3Rpb24gKGVsLCBpKSB7XG4gICAgICAgICAgICAgIF90aGlzNjUuJGVsLmNzcygnaGVpZ2h0JywgZWwub2Zmc2V0SGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoIWltYWdlT25seSkge1xuICAgICAgICAgIHZhciBzbGlkZUhlaWdodCA9IGZpcnN0U2xpZGUuaGVpZ2h0KCk7XG4gICAgICAgICAgdGhpcy4kZWwuY3NzKCdoZWlnaHQnLCBzbGlkZUhlaWdodCArICdweCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHggcG9zaXRpb24gZnJvbSBldmVudFxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3hwb3NcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfeHBvcyhlKSB7XG4gICAgICAgIC8vIHRvdWNoIGV2ZW50XG4gICAgICAgIGlmIChlLnRhcmdldFRvdWNoZXMgJiYgZS50YXJnZXRUb3VjaGVzLmxlbmd0aCA+PSAxKSB7XG4gICAgICAgICAgcmV0dXJuIGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gbW91c2UgZXZlbnRcbiAgICAgICAgcmV0dXJuIGUuY2xpZW50WDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgeSBwb3NpdGlvbiBmcm9tIGV2ZW50XG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfeXBvc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF95cG9zKGUpIHtcbiAgICAgICAgLy8gdG91Y2ggZXZlbnRcbiAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtb3VzZSBldmVudFxuICAgICAgICByZXR1cm4gZS5jbGllbnRZO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFdyYXAgaW5kZXhcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfd3JhcFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF93cmFwKHgpIHtcbiAgICAgICAgcmV0dXJuIHggPj0gdGhpcy5jb3VudCA/IHggJSB0aGlzLmNvdW50IDogeCA8IDAgPyB0aGlzLl93cmFwKHRoaXMuY291bnQgKyB4ICUgdGhpcy5jb3VudCkgOiB4O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFRyYWNrcyBzY3JvbGxpbmcgaW5mb3JtYXRpb25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl90cmFja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90cmFjaygpIHtcbiAgICAgICAgdmFyIG5vdyA9IHZvaWQgMCxcbiAgICAgICAgICAgIGVsYXBzZWQgPSB2b2lkIDAsXG4gICAgICAgICAgICBkZWx0YSA9IHZvaWQgMCxcbiAgICAgICAgICAgIHYgPSB2b2lkIDA7XG5cbiAgICAgICAgbm93ID0gRGF0ZS5ub3coKTtcbiAgICAgICAgZWxhcHNlZCA9IG5vdyAtIHRoaXMudGltZXN0YW1wO1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IG5vdztcbiAgICAgICAgZGVsdGEgPSB0aGlzLm9mZnNldCAtIHRoaXMuZnJhbWU7XG4gICAgICAgIHRoaXMuZnJhbWUgPSB0aGlzLm9mZnNldDtcblxuICAgICAgICB2ID0gMTAwMCAqIGRlbHRhIC8gKDEgKyBlbGFwc2VkKTtcbiAgICAgICAgdGhpcy52ZWxvY2l0eSA9IDAuOCAqIHYgKyAwLjIgKiB0aGlzLnZlbG9jaXR5O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEF1dG8gc2Nyb2xscyB0byBuZWFyZXN0IGNhcm91c2VsIGl0ZW0uXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYXV0b1Njcm9sbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hdXRvU2Nyb2xsKCkge1xuICAgICAgICB2YXIgZWxhcHNlZCA9IHZvaWQgMCxcbiAgICAgICAgICAgIGRlbHRhID0gdm9pZCAwO1xuXG4gICAgICAgIGlmICh0aGlzLmFtcGxpdHVkZSkge1xuICAgICAgICAgIGVsYXBzZWQgPSBEYXRlLm5vdygpIC0gdGhpcy50aW1lc3RhbXA7XG4gICAgICAgICAgZGVsdGEgPSB0aGlzLmFtcGxpdHVkZSAqIE1hdGguZXhwKC1lbGFwc2VkIC8gdGhpcy5vcHRpb25zLmR1cmF0aW9uKTtcbiAgICAgICAgICBpZiAoZGVsdGEgPiAyIHx8IGRlbHRhIDwgLTIpIHtcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbCh0aGlzLnRhcmdldCAtIGRlbHRhKTtcbiAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9hdXRvU2Nyb2xsQm91bmQpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLl9zY3JvbGwodGhpcy50YXJnZXQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNjcm9sbCB0byB0YXJnZXRcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSB4XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2Nyb2xsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3Njcm9sbCh4KSB7XG4gICAgICAgIHZhciBfdGhpczY2ID0gdGhpcztcblxuICAgICAgICAvLyBUcmFjayBzY3JvbGxpbmcgc3RhdGVcbiAgICAgICAgaWYgKCF0aGlzLiRlbC5oYXNDbGFzcygnc2Nyb2xsaW5nJykpIHtcbiAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Njcm9sbGluZycpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLnNjcm9sbGluZ1RpbWVvdXQgIT0gbnVsbCkge1xuICAgICAgICAgIHdpbmRvdy5jbGVhclRpbWVvdXQodGhpcy5zY3JvbGxpbmdUaW1lb3V0KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnNjcm9sbGluZ1RpbWVvdXQgPSB3aW5kb3cuc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXM2Ni4kZWwucmVtb3ZlQ2xhc3MoJ3Njcm9sbGluZycpO1xuICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pO1xuXG4gICAgICAgIC8vIFN0YXJ0IGFjdHVhbCBzY3JvbGxcbiAgICAgICAgdmFyIGkgPSB2b2lkIDAsXG4gICAgICAgICAgICBoYWxmID0gdm9pZCAwLFxuICAgICAgICAgICAgZGVsdGEgPSB2b2lkIDAsXG4gICAgICAgICAgICBkaXIgPSB2b2lkIDAsXG4gICAgICAgICAgICB0d2VlbiA9IHZvaWQgMCxcbiAgICAgICAgICAgIGVsID0gdm9pZCAwLFxuICAgICAgICAgICAgYWxpZ25tZW50ID0gdm9pZCAwLFxuICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gdm9pZCAwLFxuICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSB2b2lkIDAsXG4gICAgICAgICAgICBjZW50ZXJUd2VlbmVkT3BhY2l0eSA9IHZvaWQgMDtcbiAgICAgICAgdmFyIGxhc3RDZW50ZXIgPSB0aGlzLmNlbnRlcjtcbiAgICAgICAgdmFyIG51bVZpc2libGVPZmZzZXQgPSAxIC8gdGhpcy5vcHRpb25zLm51bVZpc2libGU7XG5cbiAgICAgICAgdGhpcy5vZmZzZXQgPSB0eXBlb2YgeCA9PT0gJ251bWJlcicgPyB4IDogdGhpcy5vZmZzZXQ7XG4gICAgICAgIHRoaXMuY2VudGVyID0gTWF0aC5mbG9vcigodGhpcy5vZmZzZXQgKyB0aGlzLmRpbSAvIDIpIC8gdGhpcy5kaW0pO1xuICAgICAgICBkZWx0YSA9IHRoaXMub2Zmc2V0IC0gdGhpcy5jZW50ZXIgKiB0aGlzLmRpbTtcbiAgICAgICAgZGlyID0gZGVsdGEgPCAwID8gMSA6IC0xO1xuICAgICAgICB0d2VlbiA9IC1kaXIgKiBkZWx0YSAqIDIgLyB0aGlzLmRpbTtcbiAgICAgICAgaGFsZiA9IHRoaXMuY291bnQgPj4gMTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZ1bGxXaWR0aCkge1xuICAgICAgICAgIGFsaWdubWVudCA9ICd0cmFuc2xhdGVYKDApJztcbiAgICAgICAgICBjZW50ZXJUd2VlbmVkT3BhY2l0eSA9IDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgYWxpZ25tZW50ID0gJ3RyYW5zbGF0ZVgoJyArICh0aGlzLmVsLmNsaWVudFdpZHRoIC0gdGhpcy5pdGVtV2lkdGgpIC8gMiArICdweCkgJztcbiAgICAgICAgICBhbGlnbm1lbnQgKz0gJ3RyYW5zbGF0ZVkoJyArICh0aGlzLmVsLmNsaWVudEhlaWdodCAtIHRoaXMuaXRlbUhlaWdodCkgLyAyICsgJ3B4KSc7XG4gICAgICAgICAgY2VudGVyVHdlZW5lZE9wYWNpdHkgPSAxIC0gbnVtVmlzaWJsZU9mZnNldCAqIHR3ZWVuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IGluZGljYXRvciBhY3RpdmVcbiAgICAgICAgaWYgKHRoaXMuc2hvd0luZGljYXRvcnMpIHtcbiAgICAgICAgICB2YXIgZGlmZiA9IHRoaXMuY2VudGVyICUgdGhpcy5jb3VudDtcbiAgICAgICAgICB2YXIgYWN0aXZlSW5kaWNhdG9yID0gdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0uYWN0aXZlJyk7XG4gICAgICAgICAgaWYgKGFjdGl2ZUluZGljYXRvci5pbmRleCgpICE9PSBkaWZmKSB7XG4gICAgICAgICAgICBhY3RpdmVJbmRpY2F0b3IucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0nKS5lcShkaWZmKVswXS5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjZW50ZXJcbiAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLlxuICAgICAgICBpZiAoIXRoaXMubm9XcmFwIHx8IHRoaXMuY2VudGVyID49IDAgJiYgdGhpcy5jZW50ZXIgPCB0aGlzLmNvdW50KSB7XG4gICAgICAgICAgZWwgPSB0aGlzLmltYWdlc1t0aGlzLl93cmFwKHRoaXMuY2VudGVyKV07XG5cbiAgICAgICAgICAvLyBBZGQgYWN0aXZlIGNsYXNzIHRvIGNlbnRlciBpdGVtLlxuICAgICAgICAgIGlmICghJChlbCkuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIGVsLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgdHJhbnNmb3JtU3RyaW5nID0gYWxpZ25tZW50ICsgXCIgdHJhbnNsYXRlWChcIiArIC1kZWx0YSAvIDIgKyBcInB4KSB0cmFuc2xhdGVYKFwiICsgZGlyICogdGhpcy5vcHRpb25zLnNoaWZ0ICogdHdlZW4gKiBpICsgXCJweCkgdHJhbnNsYXRlWihcIiArIHRoaXMub3B0aW9ucy5kaXN0ICogdHdlZW4gKyBcInB4KVwiO1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUl0ZW1TdHlsZShlbCwgY2VudGVyVHdlZW5lZE9wYWNpdHksIDAsIHRyYW5zZm9ybVN0cmluZyk7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKGkgPSAxOyBpIDw9IGhhbGY7ICsraSkge1xuICAgICAgICAgIC8vIHJpZ2h0IHNpZGVcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZ1bGxXaWR0aCkge1xuICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gdGhpcy5vcHRpb25zLmRpc3Q7XG4gICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IGkgPT09IGhhbGYgJiYgZGVsdGEgPCAwID8gMSAtIHR3ZWVuIDogMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gdGhpcy5vcHRpb25zLmRpc3QgKiAoaSAqIDIgKyB0d2VlbiAqIGRpcik7XG4gICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IDEgLSBudW1WaXNpYmxlT2Zmc2V0ICogKGkgKiAyICsgdHdlZW4gKiBkaXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuXG4gICAgICAgICAgaWYgKCF0aGlzLm5vV3JhcCB8fCB0aGlzLmNlbnRlciArIGkgPCB0aGlzLmNvdW50KSB7XG4gICAgICAgICAgICBlbCA9IHRoaXMuaW1hZ2VzW3RoaXMuX3dyYXAodGhpcy5jZW50ZXIgKyBpKV07XG4gICAgICAgICAgICB2YXIgX3RyYW5zZm9ybVN0cmluZyA9IGFsaWdubWVudCArIFwiIHRyYW5zbGF0ZVgoXCIgKyAodGhpcy5vcHRpb25zLnNoaWZ0ICsgKHRoaXMuZGltICogaSAtIGRlbHRhKSAvIDIpICsgXCJweCkgdHJhbnNsYXRlWihcIiArIHpUcmFuc2xhdGlvbiArIFwicHgpXCI7XG4gICAgICAgICAgICB0aGlzLl91cGRhdGVJdGVtU3R5bGUoZWwsIHR3ZWVuZWRPcGFjaXR5LCAtaSwgX3RyYW5zZm9ybVN0cmluZyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gbGVmdCBzaWRlXG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mdWxsV2lkdGgpIHtcbiAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IHRoaXMub3B0aW9ucy5kaXN0O1xuICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSBpID09PSBoYWxmICYmIGRlbHRhID4gMCA/IDEgLSB0d2VlbiA6IDE7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHpUcmFuc2xhdGlvbiA9IHRoaXMub3B0aW9ucy5kaXN0ICogKGkgKiAyIC0gdHdlZW4gKiBkaXIpO1xuICAgICAgICAgICAgdHdlZW5lZE9wYWNpdHkgPSAxIC0gbnVtVmlzaWJsZU9mZnNldCAqIChpICogMiAtIHR3ZWVuICogZGlyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLlxuICAgICAgICAgIGlmICghdGhpcy5ub1dyYXAgfHwgdGhpcy5jZW50ZXIgLSBpID49IDApIHtcbiAgICAgICAgICAgIGVsID0gdGhpcy5pbWFnZXNbdGhpcy5fd3JhcCh0aGlzLmNlbnRlciAtIGkpXTtcbiAgICAgICAgICAgIHZhciBfdHJhbnNmb3JtU3RyaW5nMiA9IGFsaWdubWVudCArIFwiIHRyYW5zbGF0ZVgoXCIgKyAoLXRoaXMub3B0aW9ucy5zaGlmdCArICgtdGhpcy5kaW0gKiBpIC0gZGVsdGEpIC8gMikgKyBcInB4KSB0cmFuc2xhdGVaKFwiICsgelRyYW5zbGF0aW9uICsgXCJweClcIjtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUl0ZW1TdHlsZShlbCwgdHdlZW5lZE9wYWNpdHksIC1pLCBfdHJhbnNmb3JtU3RyaW5nMik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gY2VudGVyXG4gICAgICAgIC8vIERvbid0IHNob3cgd3JhcHBlZCBpdGVtcy5cbiAgICAgICAgaWYgKCF0aGlzLm5vV3JhcCB8fCB0aGlzLmNlbnRlciA+PSAwICYmIHRoaXMuY2VudGVyIDwgdGhpcy5jb3VudCkge1xuICAgICAgICAgIGVsID0gdGhpcy5pbWFnZXNbdGhpcy5fd3JhcCh0aGlzLmNlbnRlcildO1xuICAgICAgICAgIHZhciBfdHJhbnNmb3JtU3RyaW5nMyA9IGFsaWdubWVudCArIFwiIHRyYW5zbGF0ZVgoXCIgKyAtZGVsdGEgLyAyICsgXCJweCkgdHJhbnNsYXRlWChcIiArIGRpciAqIHRoaXMub3B0aW9ucy5zaGlmdCAqIHR3ZWVuICsgXCJweCkgdHJhbnNsYXRlWihcIiArIHRoaXMub3B0aW9ucy5kaXN0ICogdHdlZW4gKyBcInB4KVwiO1xuICAgICAgICAgIHRoaXMuX3VwZGF0ZUl0ZW1TdHlsZShlbCwgY2VudGVyVHdlZW5lZE9wYWNpdHksIDAsIF90cmFuc2Zvcm1TdHJpbmczKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9uQ3ljbGVUbyBjYWxsYmFja1xuICAgICAgICB2YXIgJGN1cnJJdGVtID0gdGhpcy4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0nKS5lcSh0aGlzLl93cmFwKHRoaXMuY2VudGVyKSk7XG4gICAgICAgIGlmIChsYXN0Q2VudGVyICE9PSB0aGlzLmNlbnRlciAmJiB0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ3ljbGVUbyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkN5Y2xlVG8uY2FsbCh0aGlzLCAkY3Vyckl0ZW1bMF0sIHRoaXMuZHJhZ2dlZCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbmUgdGltZSBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub25lVGltZUNhbGxiYWNrID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vbmVUaW1lQ2FsbGJhY2suY2FsbCh0aGlzLCAkY3Vyckl0ZW1bMF0sIHRoaXMuZHJhZ2dlZCk7XG4gICAgICAgICAgdGhpcy5vbmVUaW1lQ2FsbGJhY2sgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3ljbGUgdG8gdGFyZ2V0XG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gb3BhY2l0eVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHpJbmRleFxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHRyYW5zZm9ybVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3VwZGF0ZUl0ZW1TdHlsZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVJdGVtU3R5bGUoZWwsIG9wYWNpdHksIHpJbmRleCwgdHJhbnNmb3JtKSB7XG4gICAgICAgIGVsLnN0eWxlW3RoaXMueGZvcm1dID0gdHJhbnNmb3JtO1xuICAgICAgICBlbC5zdHlsZS56SW5kZXggPSB6SW5kZXg7XG4gICAgICAgIGVsLnN0eWxlLm9wYWNpdHkgPSBvcGFjaXR5O1xuICAgICAgICBlbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEN5Y2xlIHRvIHRhcmdldFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IG5cbiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY3ljbGVUb1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jeWNsZVRvKG4sIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciBkaWZmID0gdGhpcy5jZW50ZXIgJSB0aGlzLmNvdW50IC0gbjtcblxuICAgICAgICAvLyBBY2NvdW50IGZvciB3cmFwYXJvdW5kLlxuICAgICAgICBpZiAoIXRoaXMubm9XcmFwKSB7XG4gICAgICAgICAgaWYgKGRpZmYgPCAwKSB7XG4gICAgICAgICAgICBpZiAoTWF0aC5hYnMoZGlmZiArIHRoaXMuY291bnQpIDwgTWF0aC5hYnMoZGlmZikpIHtcbiAgICAgICAgICAgICAgZGlmZiArPSB0aGlzLmNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaWZmIC0gdGhpcy5jb3VudCkgPCBkaWZmKSB7XG4gICAgICAgICAgICAgIGRpZmYgLT0gdGhpcy5jb3VudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMuZGltICogTWF0aC5yb3VuZCh0aGlzLm9mZnNldCAvIHRoaXMuZGltKTtcbiAgICAgICAgLy8gTmV4dFxuICAgICAgICBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgICB0aGlzLnRhcmdldCArPSB0aGlzLmRpbSAqIE1hdGguYWJzKGRpZmYpO1xuXG4gICAgICAgICAgLy8gUHJldlxuICAgICAgICB9IGVsc2UgaWYgKGRpZmYgPiAwKSB7XG4gICAgICAgICAgdGhpcy50YXJnZXQgLT0gdGhpcy5kaW0gKiBkaWZmO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IG9uZSB0aW1lIGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgY2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9uZVRpbWVDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2Nyb2xsXG4gICAgICAgIGlmICh0aGlzLm9mZnNldCAhPT0gdGhpcy50YXJnZXQpIHtcbiAgICAgICAgICB0aGlzLmFtcGxpdHVkZSA9IHRoaXMudGFyZ2V0IC0gdGhpcy5vZmZzZXQ7XG4gICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9hdXRvU2Nyb2xsQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3ljbGUgdG8gbmV4dCBpdGVtXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gW25dXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJuZXh0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gbmV4dChuKSB7XG4gICAgICAgIGlmIChuID09PSB1bmRlZmluZWQgfHwgaXNOYU4obikpIHtcbiAgICAgICAgICBuID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuY2VudGVyICsgbjtcbiAgICAgICAgaWYgKGluZGV4ID49IHRoaXMuY291bnQgfHwgaW5kZXggPCAwKSB7XG4gICAgICAgICAgaWYgKHRoaXMubm9XcmFwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaW5kZXggPSB0aGlzLl93cmFwKGluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLl9jeWNsZVRvKGluZGV4KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDeWNsZSB0byBwcmV2aW91cyBpdGVtXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gW25dXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwcmV2XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcHJldihuKSB7XG4gICAgICAgIGlmIChuID09PSB1bmRlZmluZWQgfHwgaXNOYU4obikpIHtcbiAgICAgICAgICBuID0gMTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBpbmRleCA9IHRoaXMuY2VudGVyIC0gbjtcbiAgICAgICAgaWYgKGluZGV4ID49IHRoaXMuY291bnQgfHwgaW5kZXggPCAwKSB7XG4gICAgICAgICAgaWYgKHRoaXMubm9XcmFwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaW5kZXggPSB0aGlzLl93cmFwKGluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2N5Y2xlVG8oaW5kZXgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEN5Y2xlIHRvIG50aCBpdGVtXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gW25dXG4gICAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBjYWxsYmFja1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0KG4sIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChuID09PSB1bmRlZmluZWQgfHwgaXNOYU4obikpIHtcbiAgICAgICAgICBuID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChuID4gdGhpcy5jb3VudCB8fCBuIDwgMCkge1xuICAgICAgICAgIGlmICh0aGlzLm5vV3JhcCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIG4gPSB0aGlzLl93cmFwKG4pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY3ljbGVUbyhuLCBjYWxsYmFjayk7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KENhcm91c2VsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2Fyb3VzZWwpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9DYXJvdXNlbDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBDYXJvdXNlbDtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uQ2Fyb3VzZWwgPSBDYXJvdXNlbDtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKENhcm91c2VsLCAnY2Fyb3VzZWwnLCAnTV9DYXJvdXNlbCcpO1xuICB9XG59KShjYXNoKTtcbjsoZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgb25PcGVuOiB1bmRlZmluZWQsXG4gICAgb25DbG9zZTogdW5kZWZpbmVkXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgVGFwVGFyZ2V0ID0gZnVuY3Rpb24gKF9Db21wb25lbnQxOSkge1xuICAgIF9pbmhlcml0cyhUYXBUYXJnZXQsIF9Db21wb25lbnQxOSk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgVGFwVGFyZ2V0IGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gVGFwVGFyZ2V0KGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGFwVGFyZ2V0KTtcblxuICAgICAgdmFyIF90aGlzNjcgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGFwVGFyZ2V0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFwVGFyZ2V0KSkuY2FsbCh0aGlzLCBUYXBUYXJnZXQsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzNjcuZWwuTV9UYXBUYXJnZXQgPSBfdGhpczY3O1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBzZWxlY3RcbiAgICAgICAqIEBtZW1iZXIgVGFwVGFyZ2V0I29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuIC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIHdoZW4gZmVhdHVyZSBkaXNjb3ZlcnkgaXMgb3BlbmVkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2UgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgd2hlbiBmZWF0dXJlIGRpc2NvdmVyeSBpcyBjbG9zZWRcbiAgICAgICAqL1xuICAgICAgX3RoaXM2Ny5vcHRpb25zID0gJC5leHRlbmQoe30sIFRhcFRhcmdldC5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzNjcuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgIC8vIHNldHVwXG4gICAgICBfdGhpczY3LiRvcmlnaW4gPSAkKCcjJyArIF90aGlzNjcuJGVsLmF0dHIoJ2RhdGEtdGFyZ2V0JykpO1xuICAgICAgX3RoaXM2Ny5fc2V0dXAoKTtcblxuICAgICAgX3RoaXM2Ny5fY2FsY3VsYXRlUG9zaXRpb25pbmcoKTtcbiAgICAgIF90aGlzNjcuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzNjc7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFRhcFRhcmdldCwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5lbC5UYXBUYXJnZXQgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZVRhcmdldENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVUYXJnZXRDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVPcmlnaW5DbGlja0JvdW5kID0gdGhpcy5faGFuZGxlT3JpZ2luQ2xpY2suYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVGFyZ2V0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMub3JpZ2luRWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVPcmlnaW5DbGlja0JvdW5kKTtcblxuICAgICAgICAvLyBSZXNpemVcbiAgICAgICAgdmFyIHRocm90dGxlZFJlc2l6ZSA9IE0udGhyb3R0bGUodGhpcy5faGFuZGxlUmVzaXplLCAyMDApO1xuICAgICAgICB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCA9IHRocm90dGxlZFJlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVGFyZ2V0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMub3JpZ2luRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVPcmlnaW5DbGlja0JvdW5kKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgVGFyZ2V0IENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlVGFyZ2V0Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlVGFyZ2V0Q2xpY2soZSkge1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgT3JpZ2luIENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlT3JpZ2luQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlT3JpZ2luQ2xpY2soZSkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFJlc2l6ZVxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVJlc2l6ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSZXNpemUoZSkge1xuICAgICAgICB0aGlzLl9jYWxjdWxhdGVQb3NpdGlvbmluZygpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBSZXNpemVcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVEb2N1bWVudENsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICBpZiAoISQoZS50YXJnZXQpLmNsb3Nlc3QoJy50YXAtdGFyZ2V0LXdyYXBwZXInKS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBUYXAgVGFyZ2V0XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXAoKSB7XG4gICAgICAgIC8vIENyZWF0aW5nIHRhcCB0YXJnZXRcbiAgICAgICAgdGhpcy53cmFwcGVyID0gdGhpcy4kZWwucGFyZW50KClbMF07XG4gICAgICAgIHRoaXMud2F2ZUVsID0gJCh0aGlzLndyYXBwZXIpLmZpbmQoJy50YXAtdGFyZ2V0LXdhdmUnKVswXTtcbiAgICAgICAgdGhpcy5vcmlnaW5FbCA9ICQodGhpcy53cmFwcGVyKS5maW5kKCcudGFwLXRhcmdldC1vcmlnaW4nKVswXTtcbiAgICAgICAgdGhpcy5jb250ZW50RWwgPSB0aGlzLiRlbC5maW5kKCcudGFwLXRhcmdldC1jb250ZW50JylbMF07XG5cbiAgICAgICAgLy8gQ3JlYXRpbmcgd3JhcHBlclxuICAgICAgICBpZiAoISQodGhpcy53cmFwcGVyKS5oYXNDbGFzcygnLnRhcC10YXJnZXQtd3JhcHBlcicpKSB7XG4gICAgICAgICAgdGhpcy53cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ3RhcC10YXJnZXQtd3JhcHBlcicpO1xuICAgICAgICAgIHRoaXMuJGVsLmJlZm9yZSgkKHRoaXMud3JhcHBlcikpO1xuICAgICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmQodGhpcy5lbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGluZyBjb250ZW50XG4gICAgICAgIGlmICghdGhpcy5jb250ZW50RWwpIHtcbiAgICAgICAgICB0aGlzLmNvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICAgIHRoaXMuY29udGVudEVsLmNsYXNzTGlzdC5hZGQoJ3RhcC10YXJnZXQtY29udGVudCcpO1xuICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0aGlzLmNvbnRlbnRFbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGluZyBmb3JlZ3JvdW5kIHdhdmVcbiAgICAgICAgaWYgKCF0aGlzLndhdmVFbCkge1xuICAgICAgICAgIHRoaXMud2F2ZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy53YXZlRWwuY2xhc3NMaXN0LmFkZCgndGFwLXRhcmdldC13YXZlJyk7XG5cbiAgICAgICAgICAvLyBDcmVhdGluZyBvcmlnaW5cbiAgICAgICAgICBpZiAoIXRoaXMub3JpZ2luRWwpIHtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luRWwgPSB0aGlzLiRvcmlnaW4uY2xvbmUodHJ1ZSwgdHJ1ZSk7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbkVsLmFkZENsYXNzKCd0YXAtdGFyZ2V0LW9yaWdpbicpO1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5FbC5yZW1vdmVBdHRyKCdpZCcpO1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5FbC5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5FbCA9IHRoaXMub3JpZ2luRWxbMF07XG4gICAgICAgICAgICB0aGlzLndhdmVFbC5hcHBlbmQodGhpcy5vcmlnaW5FbCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLndhdmVFbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDYWxjdWxhdGUgcG9zaXRpb25pbmdcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jYWxjdWxhdGVQb3NpdGlvbmluZ1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jYWxjdWxhdGVQb3NpdGlvbmluZygpIHtcbiAgICAgICAgLy8gRWxlbWVudCBvciBwYXJlbnQgaXMgZml4ZWQgcG9zaXRpb24/XG4gICAgICAgIHZhciBpc0ZpeGVkID0gdGhpcy4kb3JpZ2luLmNzcygncG9zaXRpb24nKSA9PT0gJ2ZpeGVkJztcbiAgICAgICAgaWYgKCFpc0ZpeGVkKSB7XG4gICAgICAgICAgdmFyIHBhcmVudHMgPSB0aGlzLiRvcmlnaW4ucGFyZW50cygpO1xuICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcGFyZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgaXNGaXhlZCA9ICQocGFyZW50c1tpXSkuY3NzKCdwb3NpdGlvbicpID09ICdmaXhlZCc7XG4gICAgICAgICAgICBpZiAoaXNGaXhlZCkge1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYWxjdWxhdGluZyBvcmlnaW5cbiAgICAgICAgdmFyIG9yaWdpbldpZHRoID0gdGhpcy4kb3JpZ2luLm91dGVyV2lkdGgoKTtcbiAgICAgICAgdmFyIG9yaWdpbkhlaWdodCA9IHRoaXMuJG9yaWdpbi5vdXRlckhlaWdodCgpO1xuICAgICAgICB2YXIgb3JpZ2luVG9wID0gaXNGaXhlZCA/IHRoaXMuJG9yaWdpbi5vZmZzZXQoKS50b3AgLSBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCkgOiB0aGlzLiRvcmlnaW4ub2Zmc2V0KCkudG9wO1xuICAgICAgICB2YXIgb3JpZ2luTGVmdCA9IGlzRml4ZWQgPyB0aGlzLiRvcmlnaW4ub2Zmc2V0KCkubGVmdCAtIE0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0KCkgOiB0aGlzLiRvcmlnaW4ub2Zmc2V0KCkubGVmdDtcblxuICAgICAgICAvLyBDYWxjdWxhdGluZyBzY3JlZW5cbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHZhciBjZW50ZXJYID0gd2luZG93V2lkdGggLyAyO1xuICAgICAgICB2YXIgY2VudGVyWSA9IHdpbmRvd0hlaWdodCAvIDI7XG4gICAgICAgIHZhciBpc0xlZnQgPSBvcmlnaW5MZWZ0IDw9IGNlbnRlclg7XG4gICAgICAgIHZhciBpc1JpZ2h0ID0gb3JpZ2luTGVmdCA+IGNlbnRlclg7XG4gICAgICAgIHZhciBpc1RvcCA9IG9yaWdpblRvcCA8PSBjZW50ZXJZO1xuICAgICAgICB2YXIgaXNCb3R0b20gPSBvcmlnaW5Ub3AgPiBjZW50ZXJZO1xuICAgICAgICB2YXIgaXNDZW50ZXJYID0gb3JpZ2luTGVmdCA+PSB3aW5kb3dXaWR0aCAqIDAuMjUgJiYgb3JpZ2luTGVmdCA8PSB3aW5kb3dXaWR0aCAqIDAuNzU7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRpbmcgdGFwIHRhcmdldFxuICAgICAgICB2YXIgdGFwVGFyZ2V0V2lkdGggPSB0aGlzLiRlbC5vdXRlcldpZHRoKCk7XG4gICAgICAgIHZhciB0YXBUYXJnZXRIZWlnaHQgPSB0aGlzLiRlbC5vdXRlckhlaWdodCgpO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0VG9wID0gb3JpZ2luVG9wICsgb3JpZ2luSGVpZ2h0IC8gMiAtIHRhcFRhcmdldEhlaWdodCAvIDI7XG4gICAgICAgIHZhciB0YXBUYXJnZXRMZWZ0ID0gb3JpZ2luTGVmdCArIG9yaWdpbldpZHRoIC8gMiAtIHRhcFRhcmdldFdpZHRoIC8gMjtcbiAgICAgICAgdmFyIHRhcFRhcmdldFBvc2l0aW9uID0gaXNGaXhlZCA/ICdmaXhlZCcgOiAnYWJzb2x1dGUnO1xuXG4gICAgICAgIC8vIENhbGN1bGF0aW5nIGNvbnRlbnRcbiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRXaWR0aCA9IGlzQ2VudGVyWCA/IHRhcFRhcmdldFdpZHRoIDogdGFwVGFyZ2V0V2lkdGggLyAyICsgb3JpZ2luV2lkdGg7XG4gICAgICAgIHZhciB0YXBUYXJnZXRUZXh0SGVpZ2h0ID0gdGFwVGFyZ2V0SGVpZ2h0IC8gMjtcbiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRUb3AgPSBpc1RvcCA/IHRhcFRhcmdldEhlaWdodCAvIDIgOiAwO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0VGV4dEJvdHRvbSA9IDA7XG4gICAgICAgIHZhciB0YXBUYXJnZXRUZXh0TGVmdCA9IGlzTGVmdCAmJiAhaXNDZW50ZXJYID8gdGFwVGFyZ2V0V2lkdGggLyAyIC0gb3JpZ2luV2lkdGggOiAwO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0VGV4dFJpZ2h0ID0gMDtcbiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRQYWRkaW5nID0gb3JpZ2luV2lkdGg7XG4gICAgICAgIHZhciB0YXBUYXJnZXRUZXh0QWxpZ24gPSBpc0JvdHRvbSA/ICdib3R0b20nIDogJ3RvcCc7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRpbmcgd2F2ZVxuICAgICAgICB2YXIgdGFwVGFyZ2V0V2F2ZVdpZHRoID0gb3JpZ2luV2lkdGggPiBvcmlnaW5IZWlnaHQgPyBvcmlnaW5XaWR0aCAqIDIgOiBvcmlnaW5XaWR0aCAqIDI7XG4gICAgICAgIHZhciB0YXBUYXJnZXRXYXZlSGVpZ2h0ID0gdGFwVGFyZ2V0V2F2ZVdpZHRoO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0V2F2ZVRvcCA9IHRhcFRhcmdldEhlaWdodCAvIDIgLSB0YXBUYXJnZXRXYXZlSGVpZ2h0IC8gMjtcbiAgICAgICAgdmFyIHRhcFRhcmdldFdhdmVMZWZ0ID0gdGFwVGFyZ2V0V2lkdGggLyAyIC0gdGFwVGFyZ2V0V2F2ZVdpZHRoIC8gMjtcblxuICAgICAgICAvLyBTZXR0aW5nIHRhcCB0YXJnZXRcbiAgICAgICAgdmFyIHRhcFRhcmdldFdyYXBwZXJDc3NPYmogPSB7fTtcbiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai50b3AgPSBpc1RvcCA/IHRhcFRhcmdldFRvcCArICdweCcgOiAnJztcbiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5yaWdodCA9IGlzUmlnaHQgPyB3aW5kb3dXaWR0aCAtIHRhcFRhcmdldExlZnQgLSB0YXBUYXJnZXRXaWR0aCArICdweCcgOiAnJztcbiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5ib3R0b20gPSBpc0JvdHRvbSA/IHdpbmRvd0hlaWdodCAtIHRhcFRhcmdldFRvcCAtIHRhcFRhcmdldEhlaWdodCArICdweCcgOiAnJztcbiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5sZWZ0ID0gaXNMZWZ0ID8gdGFwVGFyZ2V0TGVmdCArICdweCcgOiAnJztcbiAgICAgICAgdGFwVGFyZ2V0V3JhcHBlckNzc09iai5wb3NpdGlvbiA9IHRhcFRhcmdldFBvc2l0aW9uO1xuICAgICAgICAkKHRoaXMud3JhcHBlcikuY3NzKHRhcFRhcmdldFdyYXBwZXJDc3NPYmopO1xuXG4gICAgICAgIC8vIFNldHRpbmcgY29udGVudFxuICAgICAgICAkKHRoaXMuY29udGVudEVsKS5jc3Moe1xuICAgICAgICAgIHdpZHRoOiB0YXBUYXJnZXRUZXh0V2lkdGggKyAncHgnLFxuICAgICAgICAgIGhlaWdodDogdGFwVGFyZ2V0VGV4dEhlaWdodCArICdweCcsXG4gICAgICAgICAgdG9wOiB0YXBUYXJnZXRUZXh0VG9wICsgJ3B4JyxcbiAgICAgICAgICByaWdodDogdGFwVGFyZ2V0VGV4dFJpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICBib3R0b206IHRhcFRhcmdldFRleHRCb3R0b20gKyAncHgnLFxuICAgICAgICAgIGxlZnQ6IHRhcFRhcmdldFRleHRMZWZ0ICsgJ3B4JyxcbiAgICAgICAgICBwYWRkaW5nOiB0YXBUYXJnZXRUZXh0UGFkZGluZyArICdweCcsXG4gICAgICAgICAgdmVydGljYWxBbGlnbjogdGFwVGFyZ2V0VGV4dEFsaWduXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldHRpbmcgd2F2ZVxuICAgICAgICAkKHRoaXMud2F2ZUVsKS5jc3Moe1xuICAgICAgICAgIHRvcDogdGFwVGFyZ2V0V2F2ZVRvcCArICdweCcsXG4gICAgICAgICAgbGVmdDogdGFwVGFyZ2V0V2F2ZUxlZnQgKyAncHgnLFxuICAgICAgICAgIHdpZHRoOiB0YXBUYXJnZXRXYXZlV2lkdGggKyAncHgnLFxuICAgICAgICAgIGhlaWdodDogdGFwVGFyZ2V0V2F2ZUhlaWdodCArICdweCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogT3BlbiBUYXBUYXJnZXRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvbk9wZW4gY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uT3Blbi5jYWxsKHRoaXMsIHRoaXMuJG9yaWdpblswXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIHRoaXMud3JhcHBlci5jbGFzc0xpc3QuYWRkKCdvcGVuJyk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENsb3NlIFRhcCBUYXJnZXRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBvbkNsb3NlIGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25DbG9zZS5jYWxsKHRoaXMsIHRoaXMuJG9yaWdpblswXSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLndyYXBwZXIuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbicpO1xuXG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQsIHRydWUpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kKTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoVGFwVGFyZ2V0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoVGFwVGFyZ2V0KSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fVGFwVGFyZ2V0O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRhcFRhcmdldDtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uVGFwVGFyZ2V0ID0gVGFwVGFyZ2V0O1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoVGFwVGFyZ2V0LCAndGFwVGFyZ2V0JywgJ01fVGFwVGFyZ2V0Jyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBjbGFzc2VzOiAnJyxcbiAgICBkcm9wZG93bk9wdGlvbnM6IHt9XG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgRm9ybVNlbGVjdCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MjApIHtcbiAgICBfaW5oZXJpdHMoRm9ybVNlbGVjdCwgX0NvbXBvbmVudDIwKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBGb3JtU2VsZWN0IGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gRm9ybVNlbGVjdChlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEZvcm1TZWxlY3QpO1xuXG4gICAgICAvLyBEb24ndCBpbml0IGlmIGJyb3dzZXIgZGVmYXVsdCB2ZXJzaW9uXG4gICAgICB2YXIgX3RoaXM2OCA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChGb3JtU2VsZWN0Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRm9ybVNlbGVjdCkpLmNhbGwodGhpcywgRm9ybVNlbGVjdCwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgaWYgKF90aGlzNjguJGVsLmhhc0NsYXNzKCdicm93c2VyLWRlZmF1bHQnKSkge1xuICAgICAgICByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4oX3RoaXM2OCk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzNjguZWwuTV9Gb3JtU2VsZWN0ID0gX3RoaXM2ODtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgc2VsZWN0XG4gICAgICAgKiBAbWVtYmVyIEZvcm1TZWxlY3Qjb3B0aW9uc1xuICAgICAgICovXG4gICAgICBfdGhpczY4Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgRm9ybVNlbGVjdC5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzNjguaXNNdWx0aXBsZSA9IF90aGlzNjguJGVsLnByb3AoJ211bHRpcGxlJyk7XG5cbiAgICAgIC8vIFNldHVwXG4gICAgICBfdGhpczY4LmVsLnRhYkluZGV4ID0gLTE7XG4gICAgICBfdGhpczY4Ll9rZXlzU2VsZWN0ZWQgPSB7fTtcbiAgICAgIF90aGlzNjguX3ZhbHVlRGljdCA9IHt9OyAvLyBNYXBzIGtleSB0byBvcmlnaW5hbCBhbmQgZ2VuZXJhdGVkIG9wdGlvbiBlbGVtZW50LlxuICAgICAgX3RoaXM2OC5fc2V0dXBEcm9wZG93bigpO1xuXG4gICAgICBfdGhpczY4Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczY4O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhGb3JtU2VsZWN0LCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLl9yZW1vdmVEcm9wZG93bigpO1xuICAgICAgICB0aGlzLmVsLk1fRm9ybVNlbGVjdCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHZhciBfdGhpczY5ID0gdGhpcztcblxuICAgICAgICB0aGlzLl9oYW5kbGVTZWxlY3RDaGFuZ2VCb3VuZCA9IHRoaXMuX2hhbmRsZVNlbGVjdENoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVPcHRpb25DbGlja0JvdW5kID0gdGhpcy5faGFuZGxlT3B0aW9uQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRDbGljay5iaW5kKHRoaXMpO1xuXG4gICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJ2xpOm5vdCgub3B0Z3JvdXApJykuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzNjkuX2hhbmRsZU9wdGlvbkNsaWNrQm91bmQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVTZWxlY3RDaGFuZ2VCb3VuZCk7XG4gICAgICAgIHRoaXMuaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdmFyIF90aGlzNzAgPSB0aGlzO1xuXG4gICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJ2xpOm5vdCgub3B0Z3JvdXApJykuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBlbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzNzAuX2hhbmRsZU9wdGlvbkNsaWNrQm91bmQpO1xuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVTZWxlY3RDaGFuZ2VCb3VuZCk7XG4gICAgICAgIHRoaXMuaW5wdXQucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBTZWxlY3QgQ2hhbmdlXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlU2VsZWN0Q2hhbmdlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVNlbGVjdENoYW5nZShlKSB7XG4gICAgICAgIHRoaXMuX3NldFZhbHVlVG9JbnB1dCgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBPcHRpb24gQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVPcHRpb25DbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVPcHRpb25DbGljayhlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgdmFyIG9wdGlvbiA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJ2xpJylbMF07XG4gICAgICAgIHZhciBrZXkgPSBvcHRpb24uaWQ7XG4gICAgICAgIGlmICghJChvcHRpb24pLmhhc0NsYXNzKCdkaXNhYmxlZCcpICYmICEkKG9wdGlvbikuaGFzQ2xhc3MoJ29wdGdyb3VwJykgJiYga2V5Lmxlbmd0aCkge1xuICAgICAgICAgIHZhciBzZWxlY3RlZCA9IHRydWU7XG5cbiAgICAgICAgICBpZiAodGhpcy5pc011bHRpcGxlKSB7XG4gICAgICAgICAgICAvLyBEZXNlbGVjdCBwbGFjZWhvbGRlciBvcHRpb24gaWYgc3RpbGwgc2VsZWN0ZWQuXG4gICAgICAgICAgICB2YXIgcGxhY2Vob2xkZXJPcHRpb24gPSAkKHRoaXMuZHJvcGRvd25PcHRpb25zKS5maW5kKCdsaS5kaXNhYmxlZC5zZWxlY3RlZCcpO1xuICAgICAgICAgICAgaWYgKHBsYWNlaG9sZGVyT3B0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICBwbGFjZWhvbGRlck9wdGlvbi5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICAgICAgcGxhY2Vob2xkZXJPcHRpb24uZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykucHJvcCgnY2hlY2tlZCcsIGZhbHNlKTtcbiAgICAgICAgICAgICAgdGhpcy5fdG9nZ2xlRW50cnlGcm9tQXJyYXkocGxhY2Vob2xkZXJPcHRpb25bMF0uaWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2VsZWN0ZWQgPSB0aGlzLl90b2dnbGVFbnRyeUZyb21BcnJheShrZXkpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKHRoaXMuZHJvcGRvd25PcHRpb25zKS5maW5kKCdsaScpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgJChvcHRpb24pLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcsIHNlbGVjdGVkKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBTZXQgc2VsZWN0ZWQgb24gb3JpZ2luYWwgc2VsZWN0IG9wdGlvblxuICAgICAgICAgIC8vIE9ubHkgdHJpZ2dlciBpZiBzZWxlY3RlZCBzdGF0ZSBjaGFuZ2VkXG4gICAgICAgICAgdmFyIHByZXZTZWxlY3RlZCA9ICQodGhpcy5fdmFsdWVEaWN0W2tleV0uZWwpLnByb3AoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgaWYgKHByZXZTZWxlY3RlZCAhPT0gc2VsZWN0ZWQpIHtcbiAgICAgICAgICAgICQodGhpcy5fdmFsdWVEaWN0W2tleV0uZWwpLnByb3AoJ3NlbGVjdGVkJywgc2VsZWN0ZWQpO1xuICAgICAgICAgICAgdGhpcy4kZWwudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW5wdXQgQ2xpY2tcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dENsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0Q2xpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmRyb3Bkb3duICYmIHRoaXMuZHJvcGRvd24uaXNPcGVuKSB7XG4gICAgICAgICAgdGhpcy5fc2V0VmFsdWVUb0lucHV0KCk7XG4gICAgICAgICAgdGhpcy5fc2V0U2VsZWN0ZWRTdGF0ZXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGRyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBEcm9wZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cERyb3Bkb3duKCkge1xuICAgICAgICB2YXIgX3RoaXM3MSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy53cmFwcGVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICQodGhpcy53cmFwcGVyKS5hZGRDbGFzcygnc2VsZWN0LXdyYXBwZXIgJyArIHRoaXMub3B0aW9ucy5jbGFzc2VzKTtcbiAgICAgICAgdGhpcy4kZWwuYmVmb3JlKCQodGhpcy53cmFwcGVyKSk7XG4gICAgICAgIHRoaXMud3JhcHBlci5hcHBlbmRDaGlsZCh0aGlzLmVsKTtcblxuICAgICAgICBpZiAodGhpcy5lbC5kaXNhYmxlZCkge1xuICAgICAgICAgIHRoaXMud3JhcHBlci5jbGFzc0xpc3QuYWRkKCdkaXNhYmxlZCcpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ3JlYXRlIGRyb3Bkb3duXG4gICAgICAgIHRoaXMuJHNlbGVjdE9wdGlvbnMgPSB0aGlzLiRlbC5jaGlsZHJlbignb3B0aW9uLCBvcHRncm91cCcpO1xuICAgICAgICB0aGlzLmRyb3Bkb3duT3B0aW9ucyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3VsJyk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25PcHRpb25zLmlkID0gXCJzZWxlY3Qtb3B0aW9ucy1cIiArIE0uZ3VpZCgpO1xuICAgICAgICAkKHRoaXMuZHJvcGRvd25PcHRpb25zKS5hZGRDbGFzcygnZHJvcGRvd24tY29udGVudCBzZWxlY3QtZHJvcGRvd24gJyArICh0aGlzLmlzTXVsdGlwbGUgPyAnbXVsdGlwbGUtc2VsZWN0LWRyb3Bkb3duJyA6ICcnKSk7XG5cbiAgICAgICAgLy8gQ3JlYXRlIGRyb3Bkb3duIHN0cnVjdHVyZS5cbiAgICAgICAgaWYgKHRoaXMuJHNlbGVjdE9wdGlvbnMubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy4kc2VsZWN0T3B0aW9ucy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgaWYgKCQoZWwpLmlzKCdvcHRpb24nKSkge1xuICAgICAgICAgICAgICAvLyBEaXJlY3QgZGVzY2VuZGFudCBvcHRpb24uXG4gICAgICAgICAgICAgIHZhciBvcHRpb25FbCA9IHZvaWQgMDtcbiAgICAgICAgICAgICAgaWYgKF90aGlzNzEuaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgICAgIG9wdGlvbkVsID0gX3RoaXM3MS5fYXBwZW5kT3B0aW9uV2l0aEljb24oX3RoaXM3MS4kZWwsIGVsLCAnbXVsdGlwbGUnKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBvcHRpb25FbCA9IF90aGlzNzEuX2FwcGVuZE9wdGlvbldpdGhJY29uKF90aGlzNzEuJGVsLCBlbCk7XG4gICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICBfdGhpczcxLl9hZGRPcHRpb25Ub1ZhbHVlRGljdChlbCwgb3B0aW9uRWwpO1xuICAgICAgICAgICAgfSBlbHNlIGlmICgkKGVsKS5pcygnb3B0Z3JvdXAnKSkge1xuICAgICAgICAgICAgICAvLyBPcHRncm91cC5cbiAgICAgICAgICAgICAgdmFyIHNlbGVjdE9wdGlvbnMgPSAkKGVsKS5jaGlsZHJlbignb3B0aW9uJyk7XG4gICAgICAgICAgICAgICQoX3RoaXM3MS5kcm9wZG93bk9wdGlvbnMpLmFwcGVuZCgkKCc8bGkgY2xhc3M9XCJvcHRncm91cFwiPjxzcGFuPicgKyBlbC5nZXRBdHRyaWJ1dGUoJ2xhYmVsJykgKyAnPC9zcGFuPjwvbGk+JylbMF0pO1xuXG4gICAgICAgICAgICAgIHNlbGVjdE9wdGlvbnMuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICB2YXIgb3B0aW9uRWwgPSBfdGhpczcxLl9hcHBlbmRPcHRpb25XaXRoSWNvbihfdGhpczcxLiRlbCwgZWwsICdvcHRncm91cC1vcHRpb24nKTtcbiAgICAgICAgICAgICAgICBfdGhpczcxLl9hZGRPcHRpb25Ub1ZhbHVlRGljdChlbCwgb3B0aW9uRWwpO1xuICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGVsLmFmdGVyKHRoaXMuZHJvcGRvd25PcHRpb25zKTtcblxuICAgICAgICAvLyBBZGQgaW5wdXQgZHJvcGRvd25cbiAgICAgICAgdGhpcy5pbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7XG4gICAgICAgICQodGhpcy5pbnB1dCkuYWRkQ2xhc3MoJ3NlbGVjdC1kcm9wZG93biBkcm9wZG93bi10cmlnZ2VyJyk7XG4gICAgICAgIHRoaXMuaW5wdXQuc2V0QXR0cmlidXRlKCd0eXBlJywgJ3RleHQnKTtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXRBdHRyaWJ1dGUoJ3JlYWRvbmx5JywgJ3RydWUnKTtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0JywgdGhpcy5kcm9wZG93bk9wdGlvbnMuaWQpO1xuICAgICAgICBpZiAodGhpcy5lbC5kaXNhYmxlZCkge1xuICAgICAgICAgICQodGhpcy5pbnB1dCkucHJvcCgnZGlzYWJsZWQnLCAndHJ1ZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kZWwuYmVmb3JlKHRoaXMuaW5wdXQpO1xuICAgICAgICB0aGlzLl9zZXRWYWx1ZVRvSW5wdXQoKTtcblxuICAgICAgICAvLyBBZGQgY2FyZXRcbiAgICAgICAgdmFyIGRyb3Bkb3duSWNvbiA9ICQoJzxzdmcgY2xhc3M9XCJjYXJldFwiIGhlaWdodD1cIjI0XCIgdmlld0JveD1cIjAgMCAyNCAyNFwiIHdpZHRoPVwiMjRcIiB4bWxucz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCI+PHBhdGggZD1cIk03IDEwbDUgNSA1LTV6XCIvPjxwYXRoIGQ9XCJNMCAwaDI0djI0SDB6XCIgZmlsbD1cIm5vbmVcIi8+PC9zdmc+Jyk7XG4gICAgICAgIHRoaXMuJGVsLmJlZm9yZShkcm9wZG93bkljb25bMF0pO1xuXG4gICAgICAgIC8vIEluaXRpYWxpemUgZHJvcGRvd25cbiAgICAgICAgaWYgKCF0aGlzLmVsLmRpc2FibGVkKSB7XG4gICAgICAgICAgdmFyIGRyb3Bkb3duT3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCB0aGlzLm9wdGlvbnMuZHJvcGRvd25PcHRpb25zKTtcblxuICAgICAgICAgIC8vIEFkZCBjYWxsYmFjayBmb3IgY2VudGVyaW5nIHNlbGVjdGVkIG9wdGlvbiB3aGVuIGRyb3Bkb3duIGNvbnRlbnQgaXMgc2Nyb2xsYWJsZVxuICAgICAgICAgIGRyb3Bkb3duT3B0aW9ucy5vbk9wZW5FbmQgPSBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgIHZhciBzZWxlY3RlZE9wdGlvbiA9ICQoX3RoaXM3MS5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJy5zZWxlY3RlZCcpLmZpcnN0KCk7XG5cbiAgICAgICAgICAgIGlmIChzZWxlY3RlZE9wdGlvbi5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgLy8gRm9jdXMgc2VsZWN0ZWQgb3B0aW9uIGluIGRyb3Bkb3duXG4gICAgICAgICAgICAgIE0ua2V5RG93biA9IHRydWU7XG4gICAgICAgICAgICAgIF90aGlzNzEuZHJvcGRvd24uZm9jdXNlZEluZGV4ID0gc2VsZWN0ZWRPcHRpb24uaW5kZXgoKTtcbiAgICAgICAgICAgICAgX3RoaXM3MS5kcm9wZG93bi5fZm9jdXNGb2N1c2VkSXRlbSgpO1xuICAgICAgICAgICAgICBNLmtleURvd24gPSBmYWxzZTtcblxuICAgICAgICAgICAgICAvLyBIYW5kbGUgc2Nyb2xsaW5nIHRvIHNlbGVjdGVkIG9wdGlvblxuICAgICAgICAgICAgICBpZiAoX3RoaXM3MS5kcm9wZG93bi5pc1Njcm9sbGFibGUpIHtcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsT2Zmc2V0ID0gc2VsZWN0ZWRPcHRpb25bMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gX3RoaXM3MS5kcm9wZG93bk9wdGlvbnMuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOyAvLyBzY3JvbGwgdG8gc2VsZWN0ZWQgb3B0aW9uXG4gICAgICAgICAgICAgICAgc2Nyb2xsT2Zmc2V0IC09IF90aGlzNzEuZHJvcGRvd25PcHRpb25zLmNsaWVudEhlaWdodCAvIDI7IC8vIGNlbnRlciBpbiBkcm9wZG93blxuICAgICAgICAgICAgICAgIF90aGlzNzEuZHJvcGRvd25PcHRpb25zLnNjcm9sbFRvcCA9IHNjcm9sbE9mZnNldDtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBpZiAodGhpcy5pc011bHRpcGxlKSB7XG4gICAgICAgICAgICBkcm9wZG93bk9wdGlvbnMuY2xvc2VPbkNsaWNrID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuZHJvcGRvd24gPSBNLkRyb3Bkb3duLmluaXQodGhpcy5pbnB1dCwgZHJvcGRvd25PcHRpb25zKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBpbml0aWFsIHNlbGVjdGlvbnNcbiAgICAgICAgdGhpcy5fc2V0U2VsZWN0ZWRTdGF0ZXMoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBZGQgb3B0aW9uIHRvIHZhbHVlIGRpY3RcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWwgIG9yaWdpbmFsIG9wdGlvbiBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9wdGlvbkVsICBnZW5lcmF0ZWQgb3B0aW9uIGVsZW1lbnRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hZGRPcHRpb25Ub1ZhbHVlRGljdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hZGRPcHRpb25Ub1ZhbHVlRGljdChlbCwgb3B0aW9uRWwpIHtcbiAgICAgICAgdmFyIGluZGV4ID0gT2JqZWN0LmtleXModGhpcy5fdmFsdWVEaWN0KS5sZW5ndGg7XG4gICAgICAgIHZhciBrZXkgPSB0aGlzLmRyb3Bkb3duT3B0aW9ucy5pZCArIGluZGV4O1xuICAgICAgICB2YXIgb2JqID0ge307XG4gICAgICAgIG9wdGlvbkVsLmlkID0ga2V5O1xuXG4gICAgICAgIG9iai5lbCA9IGVsO1xuICAgICAgICBvYmoub3B0aW9uRWwgPSBvcHRpb25FbDtcbiAgICAgICAgdGhpcy5fdmFsdWVEaWN0W2tleV0gPSBvYmo7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIGRyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRHJvcGRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRHJvcGRvd24oKSB7XG4gICAgICAgICQodGhpcy53cmFwcGVyKS5maW5kKCcuY2FyZXQnKS5yZW1vdmUoKTtcbiAgICAgICAgJCh0aGlzLmlucHV0KS5yZW1vdmUoKTtcbiAgICAgICAgJCh0aGlzLmRyb3Bkb3duT3B0aW9ucykucmVtb3ZlKCk7XG4gICAgICAgICQodGhpcy53cmFwcGVyKS5iZWZvcmUodGhpcy4kZWwpO1xuICAgICAgICAkKHRoaXMud3JhcHBlcikucmVtb3ZlKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgZHJvcGRvd25cbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gc2VsZWN0ICBzZWxlY3QgZWxlbWVudFxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBvcHRpb24gIG9wdGlvbiBlbGVtZW50IGZyb20gc2VsZWN0XG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICAgICAgICogQHJldHVybiB7RWxlbWVudH0gIG9wdGlvbiBlbGVtZW50IGFkZGVkXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYXBwZW5kT3B0aW9uV2l0aEljb25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYXBwZW5kT3B0aW9uV2l0aEljb24oc2VsZWN0LCBvcHRpb24sIHR5cGUpIHtcbiAgICAgICAgLy8gQWRkIGRpc2FibGVkIGF0dHIgaWYgZGlzYWJsZWRcbiAgICAgICAgdmFyIGRpc2FibGVkQ2xhc3MgPSBvcHRpb24uZGlzYWJsZWQgPyAnZGlzYWJsZWQgJyA6ICcnO1xuICAgICAgICB2YXIgb3B0Z3JvdXBDbGFzcyA9IHR5cGUgPT09ICdvcHRncm91cC1vcHRpb24nID8gJ29wdGdyb3VwLW9wdGlvbiAnIDogJyc7XG4gICAgICAgIHZhciBtdWx0aXBsZUNoZWNrYm94ID0gdGhpcy5pc011bHRpcGxlID8gXCI8bGFiZWw+PGlucHV0IHR5cGU9XFxcImNoZWNrYm94XFxcIlwiICsgZGlzYWJsZWRDbGFzcyArIFwiXFxcIi8+PHNwYW4+XCIgKyBvcHRpb24uaW5uZXJIVE1MICsgXCI8L3NwYW4+PC9sYWJlbD5cIiA6IG9wdGlvbi5pbm5lckhUTUw7XG4gICAgICAgIHZhciBsaUVsID0gJCgnPGxpPjwvbGk+Jyk7XG4gICAgICAgIHZhciBzcGFuRWwgPSAkKCc8c3Bhbj48L3NwYW4+Jyk7XG4gICAgICAgIHNwYW5FbC5odG1sKG11bHRpcGxlQ2hlY2tib3gpO1xuICAgICAgICBsaUVsLmFkZENsYXNzKGRpc2FibGVkQ2xhc3MgKyBcIiBcIiArIG9wdGdyb3VwQ2xhc3MpO1xuICAgICAgICBsaUVsLmFwcGVuZChzcGFuRWwpO1xuXG4gICAgICAgIC8vIGFkZCBpY29uc1xuICAgICAgICB2YXIgaWNvblVybCA9IG9wdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWNvbicpO1xuICAgICAgICBpZiAoISFpY29uVXJsKSB7XG4gICAgICAgICAgdmFyIGltZ0VsID0gJChcIjxpbWcgYWx0PVxcXCJcXFwiIHNyYz1cXFwiXCIgKyBpY29uVXJsICsgXCJcXFwiPlwiKTtcbiAgICAgICAgICBsaUVsLnByZXBlbmQoaW1nRWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2hlY2sgZm9yIG11bHRpcGxlIHR5cGUuXG4gICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmFwcGVuZChsaUVsWzBdKTtcbiAgICAgICAgcmV0dXJuIGxpRWxbMF07XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVG9nZ2xlIGVudHJ5IGZyb20gb3B0aW9uXG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30ga2V5ICBPcHRpb24ga2V5XG4gICAgICAgKiBAcmV0dXJuIHtCb29sZWFufSAgaWYgZW50cnkgd2FzIGFkZGVkIG9yIHJlbW92ZWRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl90b2dnbGVFbnRyeUZyb21BcnJheVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF90b2dnbGVFbnRyeUZyb21BcnJheShrZXkpIHtcbiAgICAgICAgdmFyIG5vdEFkZGVkID0gIXRoaXMuX2tleXNTZWxlY3RlZC5oYXNPd25Qcm9wZXJ0eShrZXkpO1xuICAgICAgICB2YXIgJG9wdGlvbkxpID0gJCh0aGlzLl92YWx1ZURpY3Rba2V5XS5vcHRpb25FbCk7XG5cbiAgICAgICAgaWYgKG5vdEFkZGVkKSB7XG4gICAgICAgICAgdGhpcy5fa2V5c1NlbGVjdGVkW2tleV0gPSB0cnVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRlbGV0ZSB0aGlzLl9rZXlzU2VsZWN0ZWRba2V5XTtcbiAgICAgICAgfVxuXG4gICAgICAgICRvcHRpb25MaS50b2dnbGVDbGFzcygnc2VsZWN0ZWQnLCBub3RBZGRlZCk7XG5cbiAgICAgICAgLy8gU2V0IGNoZWNrYm94IGNoZWNrZWQgdmFsdWVcbiAgICAgICAgJG9wdGlvbkxpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoJ2NoZWNrZWQnLCBub3RBZGRlZCk7XG5cbiAgICAgICAgLy8gdXNlIG5vdEFkZGVkIGluc3RlYWQgb2YgdHJ1ZSAodG8gZGV0ZWN0IGlmIHRoZSBvcHRpb24gaXMgc2VsZWN0ZWQgb3Igbm90KVxuICAgICAgICAkb3B0aW9uTGkucHJvcCgnc2VsZWN0ZWQnLCBub3RBZGRlZCk7XG5cbiAgICAgICAgcmV0dXJuIG5vdEFkZGVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCB0ZXh0IHZhbHVlIHRvIGlucHV0XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0VmFsdWVUb0lucHV0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFZhbHVlVG9JbnB1dCgpIHtcbiAgICAgICAgdmFyIHZhbHVlcyA9IFtdO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMuJGVsLmZpbmQoJ29wdGlvbicpO1xuXG4gICAgICAgIG9wdGlvbnMuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBpZiAoJChlbCkucHJvcCgnc2VsZWN0ZWQnKSkge1xuICAgICAgICAgICAgdmFyIHRleHQgPSAkKGVsKS50ZXh0KCk7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaCh0ZXh0KTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmICghdmFsdWVzLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBmaXJzdERpc2FibGVkID0gdGhpcy4kZWwuZmluZCgnb3B0aW9uOmRpc2FibGVkJykuZXEoMCk7XG4gICAgICAgICAgaWYgKGZpcnN0RGlzYWJsZWQubGVuZ3RoICYmIGZpcnN0RGlzYWJsZWRbMF0udmFsdWUgPT09ICcnKSB7XG4gICAgICAgICAgICB2YWx1ZXMucHVzaChmaXJzdERpc2FibGVkLnRleHQoKSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pbnB1dC52YWx1ZSA9IHZhbHVlcy5qb2luKCcsICcpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCBzZWxlY3RlZCBzdGF0ZSBvZiBkcm9wZG93biB0byBtYXRjaCBhY3R1YWwgc2VsZWN0IGVsZW1lbnRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRTZWxlY3RlZFN0YXRlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRTZWxlY3RlZFN0YXRlcygpIHtcbiAgICAgICAgdGhpcy5fa2V5c1NlbGVjdGVkID0ge307XG5cbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX3ZhbHVlRGljdCkge1xuICAgICAgICAgIHZhciBvcHRpb24gPSB0aGlzLl92YWx1ZURpY3Rba2V5XTtcbiAgICAgICAgICB2YXIgb3B0aW9uSXNTZWxlY3RlZCA9ICQob3B0aW9uLmVsKS5wcm9wKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICQob3B0aW9uLm9wdGlvbkVsKS5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJywgb3B0aW9uSXNTZWxlY3RlZCk7XG4gICAgICAgICAgaWYgKG9wdGlvbklzU2VsZWN0ZWQpIHtcbiAgICAgICAgICAgIHRoaXMuX2FjdGl2YXRlT3B0aW9uKCQodGhpcy5kcm9wZG93bk9wdGlvbnMpLCAkKG9wdGlvbi5vcHRpb25FbCkpO1xuICAgICAgICAgICAgdGhpcy5fa2V5c1NlbGVjdGVkW2tleV0gPSB0cnVlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkKG9wdGlvbi5vcHRpb25FbCkucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogTWFrZSBvcHRpb24gYXMgc2VsZWN0ZWQgYW5kIHNjcm9sbCB0byBzZWxlY3RlZCBwb3NpdGlvblxuICAgICAgICogQHBhcmFtIHtqUXVlcnl9IGNvbGxlY3Rpb24gIFNlbGVjdCBvcHRpb25zIGpRdWVyeSBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG5ld09wdGlvbiAgZWxlbWVudCBvZiB0aGUgbmV3IG9wdGlvblxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FjdGl2YXRlT3B0aW9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FjdGl2YXRlT3B0aW9uKGNvbGxlY3Rpb24sIG5ld09wdGlvbikge1xuICAgICAgICBpZiAobmV3T3B0aW9uKSB7XG4gICAgICAgICAgaWYgKCF0aGlzLmlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24uZmluZCgnbGkuc2VsZWN0ZWQnKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIG9wdGlvbiA9ICQobmV3T3B0aW9uKTtcbiAgICAgICAgICBvcHRpb24uYWRkQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgU2VsZWN0ZWQgVmFsdWVzXG4gICAgICAgKiBAcmV0dXJuIHtBcnJheX0gIEFycmF5IG9mIHNlbGVjdGVkIHZhbHVlc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0U2VsZWN0ZWRWYWx1ZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRTZWxlY3RlZFZhbHVlcygpIHtcbiAgICAgICAgdmFyIHNlbGVjdGVkVmFsdWVzID0gW107XG4gICAgICAgIGZvciAodmFyIGtleSBpbiB0aGlzLl9rZXlzU2VsZWN0ZWQpIHtcbiAgICAgICAgICBzZWxlY3RlZFZhbHVlcy5wdXNoKHRoaXMuX3ZhbHVlRGljdFtrZXldLmVsLnZhbHVlKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc2VsZWN0ZWRWYWx1ZXM7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KEZvcm1TZWxlY3QuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGb3JtU2VsZWN0KSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fRm9ybVNlbGVjdDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBGb3JtU2VsZWN0O1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5Gb3JtU2VsZWN0ID0gRm9ybVNlbGVjdDtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKEZvcm1TZWxlY3QsICdmb3JtU2VsZWN0JywgJ01fRm9ybVNlbGVjdCcpO1xuICB9XG59KShjYXNoKTtcbjsoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7fTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBSYW5nZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MjEpIHtcbiAgICBfaW5oZXJpdHMoUmFuZ2UsIF9Db21wb25lbnQyMSk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgUmFuZ2UgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBSYW5nZShlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFJhbmdlKTtcblxuICAgICAgdmFyIF90aGlzNzIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoUmFuZ2UuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihSYW5nZSkpLmNhbGwodGhpcywgUmFuZ2UsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzNzIuZWwuTV9SYW5nZSA9IF90aGlzNzI7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIHJhbmdlXG4gICAgICAgKiBAbWVtYmVyIFJhbmdlI29wdGlvbnNcbiAgICAgICAqL1xuICAgICAgX3RoaXM3Mi5vcHRpb25zID0gJC5leHRlbmQoe30sIFJhbmdlLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXM3Mi5fbW91c2Vkb3duID0gZmFsc2U7XG5cbiAgICAgIC8vIFNldHVwXG4gICAgICBfdGhpczcyLl9zZXR1cFRodW1iKCk7XG5cbiAgICAgIF90aGlzNzIuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzNzI7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFJhbmdlLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLl9yZW1vdmVUaHVtYigpO1xuICAgICAgICB0aGlzLmVsLk1fUmFuZ2UgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVSYW5nZUNoYW5nZUJvdW5kID0gdGhpcy5faGFuZGxlUmFuZ2VDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZWRvd25Ub3VjaHN0YXJ0Qm91bmQgPSB0aGlzLl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZUJvdW5kID0gdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZEJvdW5kID0gdGhpcy5faGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlQm91bmQgPSB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmUuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZVJhbmdlQ2hhbmdlQm91bmQpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZWRvd25Ub3VjaHN0YXJ0Qm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnRCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlQm91bmQpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZVJhbmdlTW91c2V1cFRvdWNoZW5kQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmRCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5faGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobGVhdmUnLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZVJhbmdlQ2hhbmdlQm91bmQpO1xuXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZWRvd25Ub3VjaHN0YXJ0Qm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnRCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdpbnB1dCcsIHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlQm91bmQpO1xuXG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZVJhbmdlTW91c2V1cFRvdWNoZW5kQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmRCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5faGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobGVhdmUnLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFJhbmdlIENoYW5nZVxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVJhbmdlQ2hhbmdlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJhbmdlQ2hhbmdlKCkge1xuICAgICAgICAkKHRoaXMudmFsdWUpLmh0bWwodGhpcy4kZWwudmFsKCkpO1xuXG4gICAgICAgIGlmICghJCh0aGlzLnRodW1iKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICB0aGlzLl9zaG93UmFuZ2VCdWJibGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gdGhpcy5fY2FsY1JhbmdlT2Zmc2V0KCk7XG4gICAgICAgICQodGhpcy50aHVtYikuYWRkQ2xhc3MoJ2FjdGl2ZScpLmNzcygnbGVmdCcsIG9mZnNldExlZnQgKyAncHgnKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgUmFuZ2UgTW91c2Vkb3duIGFuZCBUb3VjaHN0YXJ0XG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlUmFuZ2VNb3VzZWRvd25Ub3VjaHN0YXJ0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJhbmdlTW91c2Vkb3duVG91Y2hzdGFydChlKSB7XG4gICAgICAgIC8vIFNldCBpbmRpY2F0b3IgdmFsdWVcbiAgICAgICAgJCh0aGlzLnZhbHVlKS5odG1sKHRoaXMuJGVsLnZhbCgpKTtcblxuICAgICAgICB0aGlzLl9tb3VzZWRvd24gPSB0cnVlO1xuICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygnYWN0aXZlJyk7XG5cbiAgICAgICAgaWYgKCEkKHRoaXMudGh1bWIpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgIHRoaXMuX3Nob3dSYW5nZUJ1YmJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGUudHlwZSAhPT0gJ2lucHV0Jykge1xuICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gdGhpcy5fY2FsY1JhbmdlT2Zmc2V0KCk7XG4gICAgICAgICAgJCh0aGlzLnRodW1iKS5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0Jywgb2Zmc2V0TGVmdCArICdweCcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFJhbmdlIElucHV0LCBNb3VzZW1vdmUgYW5kIFRvdWNobW92ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuX21vdXNlZG93bikge1xuICAgICAgICAgIGlmICghJCh0aGlzLnRodW1iKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dSYW5nZUJ1YmJsZSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBvZmZzZXRMZWZ0ID0gdGhpcy5fY2FsY1JhbmdlT2Zmc2V0KCk7XG4gICAgICAgICAgJCh0aGlzLnRodW1iKS5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0Jywgb2Zmc2V0TGVmdCArICdweCcpO1xuICAgICAgICAgICQodGhpcy52YWx1ZSkuaHRtbCh0aGlzLiRlbC52YWwoKSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgUmFuZ2UgTW91c2V1cCBhbmQgVG91Y2hlbmRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZCgpIHtcbiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgUmFuZ2UgQmx1ciwgTW91c2VvdXQgYW5kIFRvdWNobGVhdmVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlUmFuZ2VCbHVyTW91c2VvdXRUb3VjaGxlYXZlKCkge1xuICAgICAgICBpZiAoIXRoaXMuX21vdXNlZG93bikge1xuICAgICAgICAgIHZhciBwYWRkaW5nTGVmdCA9IHBhcnNlSW50KHRoaXMuJGVsLmNzcygncGFkZGluZy1sZWZ0JykpO1xuICAgICAgICAgIHZhciBtYXJnaW5MZWZ0ID0gNyArIHBhZGRpbmdMZWZ0ICsgJ3B4JztcblxuICAgICAgICAgIGlmICgkKHRoaXMudGh1bWIpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgYW5pbS5yZW1vdmUodGhpcy50aHVtYik7XG4gICAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgICAgdGFyZ2V0czogdGhpcy50aHVtYixcbiAgICAgICAgICAgICAgaGVpZ2h0OiAwLFxuICAgICAgICAgICAgICB3aWR0aDogMCxcbiAgICAgICAgICAgICAgdG9wOiAxMCxcbiAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgICBtYXJnaW5MZWZ0OiBtYXJnaW5MZWZ0LFxuICAgICAgICAgICAgICBkdXJhdGlvbjogMTAwXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgICAgJCh0aGlzLnRodW1iKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBkcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwVGh1bWJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBUaHVtYigpIHtcbiAgICAgICAgdGhpcy50aHVtYiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgdGhpcy52YWx1ZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgJCh0aGlzLnRodW1iKS5hZGRDbGFzcygndGh1bWInKTtcbiAgICAgICAgJCh0aGlzLnZhbHVlKS5hZGRDbGFzcygndmFsdWUnKTtcbiAgICAgICAgJCh0aGlzLnRodW1iKS5hcHBlbmQodGhpcy52YWx1ZSk7XG4gICAgICAgIHRoaXMuJGVsLmFmdGVyKHRoaXMudGh1bWIpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBkcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZVRodW1iXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZVRodW1iKCkge1xuICAgICAgICAkKHRoaXMudGh1bWIpLnJlbW92ZSgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIG1vcnBoIHRodW1iIGludG8gYnViYmxlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2hvd1JhbmdlQnViYmxlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3Nob3dSYW5nZUJ1YmJsZSgpIHtcbiAgICAgICAgdmFyIHBhZGRpbmdMZWZ0ID0gcGFyc2VJbnQoJCh0aGlzLnRodW1iKS5wYXJlbnQoKS5jc3MoJ3BhZGRpbmctbGVmdCcpKTtcbiAgICAgICAgdmFyIG1hcmdpbkxlZnQgPSAtNyArIHBhZGRpbmdMZWZ0ICsgJ3B4JzsgLy8gVE9ETzogZml4IG1hZ2ljIG51bWJlcj9cbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy50aHVtYik7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMudGh1bWIsXG4gICAgICAgICAgaGVpZ2h0OiAzMCxcbiAgICAgICAgICB3aWR0aDogMzAsXG4gICAgICAgICAgdG9wOiAtMzAsXG4gICAgICAgICAgbWFyZ2luTGVmdDogbWFyZ2luTGVmdCxcbiAgICAgICAgICBkdXJhdGlvbjogMzAwLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWludCdcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2FsY3VsYXRlIHRoZSBvZmZzZXQgb2YgdGhlIHRodW1iXG4gICAgICAgKiBAcmV0dXJuIHtOdW1iZXJ9ICBvZmZzZXQgaW4gcGl4ZWxzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY2FsY1JhbmdlT2Zmc2V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NhbGNSYW5nZU9mZnNldCgpIHtcbiAgICAgICAgdmFyIHdpZHRoID0gdGhpcy4kZWwud2lkdGgoKSAtIDE1O1xuICAgICAgICB2YXIgbWF4ID0gcGFyc2VGbG9hdCh0aGlzLiRlbC5hdHRyKCdtYXgnKSkgfHwgMTAwOyAvLyBSYW5nZSBkZWZhdWx0IG1heFxuICAgICAgICB2YXIgbWluID0gcGFyc2VGbG9hdCh0aGlzLiRlbC5hdHRyKCdtaW4nKSkgfHwgMDsgLy8gUmFuZ2UgZGVmYXVsdCBtaW5cbiAgICAgICAgdmFyIHBlcmNlbnQgPSAocGFyc2VGbG9hdCh0aGlzLiRlbC52YWwoKSkgLSBtaW4pIC8gKG1heCAtIG1pbik7XG4gICAgICAgIHJldHVybiBwZXJjZW50ICogd2lkdGg7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KFJhbmdlLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUmFuZ2UpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9SYW5nZTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBSYW5nZTtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uUmFuZ2UgPSBSYW5nZTtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFJhbmdlLCAncmFuZ2UnLCAnTV9SYW5nZScpO1xuICB9XG5cbiAgUmFuZ2UuaW5pdCgkKCdpbnB1dFt0eXBlPXJhbmdlXScpKTtcbn0pKGNhc2gsIE0uYW5pbWUpO1xuIiwiaW1wb3J0IEFnb3JhUlRDIGZyb20gJ2Fnb3JhLXJ0Yy1zZGsnO1xyXG5pbXBvcnQge1RvYXN0LCBhZGRWaWV3LCByZW1vdmVWaWV3LCBpc0ZpcmVmb3gsIGlzQ29tcGF0aWJsZUNocm9tZX0gZnJvbSAnLi9jb21tb24nO1xyXG5cclxuY29uc29sZS5sb2coXCJhZ29yYSBzZGsgdmVyc2lvbjogXCIgKyBBZ29yYVJUQy5WRVJTSU9OICsgXCIgY29tcGF0aWJsZTogXCIgKyBBZ29yYVJUQy5jaGVja1N5c3RlbVJlcXVpcmVtZW50cygpKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJUQ0NsaWVudCB7XHJcbiAgY29uc3RydWN0b3IgKCkge1xyXG4gICAgdGhpcy5fY2xpZW50ID0gbnVsbDtcclxuICAgIHRoaXMuX2pvaW5lZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fcHVibGlzaGVkID0gZmFsc2U7XHJcbiAgICB0aGlzLl9sb2NhbFN0cmVhbSA9IG51bGw7XHJcbiAgICB0aGlzLl9yZW1vdGVTdHJlYW1zID0gW107XHJcbiAgICB0aGlzLl9wYXJhbXMgPSB7fTtcclxuXHJcbiAgICB0aGlzLl9zaG93UHJvZmlsZSA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgaGFuZGxlRXZlbnRzKCkge1xyXG4gICAgdGhpcy5fY2xpZW50Lm9uKFwiZXJyb3JcIiwgKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpXHJcbiAgICB9KVxyXG4gICAgLy8gT2NjdXJzIHdoZW4gdGhlIHBlZXIgdXNlciBsZWF2ZXMgdGhlIGNoYW5uZWw7IGZvciBleGFtcGxlLCB0aGUgcGVlciB1c2VyIGNhbGxzIENsaWVudC5sZWF2ZS5cclxuICAgIHRoaXMuX2NsaWVudC5vbihcInBlZXItbGVhdmVcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zdCBpZCA9IGV2dC51aWQ7XHJcbiAgICAgIGlmIChpZCAhPSB0aGlzLl9wYXJhbXMudWlkKSB7XHJcbiAgICAgICAgcmVtb3ZlVmlldyhpZCk7XHJcbiAgICAgIH1cclxuICAgICAgVG9hc3Qubm90aWNlKFwicGVlciBsZWF2ZVwiKVxyXG4gICAgICBjb25zb2xlLmxvZygncGVlci1sZWF2ZScsIGlkKTtcclxuICAgIH0pXHJcbiAgICAvLyBPY2N1cnMgd2hlbiB0aGUgbG9jYWwgc3RyZWFtIGlzIF9wdWJsaXNoZWQuXHJcbiAgICB0aGlzLl9jbGllbnQub24oXCJzdHJlYW0tcHVibGlzaGVkXCIsIChldnQpID0+IHtcclxuICAgICAgVG9hc3Qubm90aWNlKFwic3RyZWFtIHB1Ymxpc2hlZCBzdWNjZXNzXCIpXHJcbiAgICAgIGNvbnNvbGUubG9nKFwic3RyZWFtLXB1Ymxpc2hlZFwiKTtcclxuICAgIH0pXHJcbiAgICAvLyBPY2N1cnMgd2hlbiB0aGUgcmVtb3RlIHN0cmVhbSBpcyBhZGRlZC5cclxuICAgIHRoaXMuX2NsaWVudC5vbihcInN0cmVhbS1hZGRlZFwiLCAoZXZ0KSA9PiB7ICBcclxuICAgICAgY29uc3QgcmVtb3RlU3RyZWFtID0gZXZ0LnN0cmVhbTtcclxuICAgICAgY29uc3QgaWQgPSByZW1vdGVTdHJlYW0uZ2V0SWQoKTtcclxuICAgICAgVG9hc3QuaW5mbyhcInN0cmVhbS1hZGRlZCB1aWQ6IFwiICsgaWQpXHJcbiAgICAgIGlmIChpZCAhPT0gdGhpcy5fcGFyYW1zLnVpZCkge1xyXG4gICAgICAgIHRoaXMuX2NsaWVudC5zdWJzY3JpYmUocmVtb3RlU3RyZWFtLCAoZXJyKSA9PiB7XHJcbiAgICAgICAgICBjb25zb2xlLmxvZyhcInN0cmVhbSBzdWJzY3JpYmUgZmFpbGVkXCIsIGVycik7XHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgICBjb25zb2xlLmxvZygnc3RyZWFtLWFkZGVkIHJlbW90ZS11aWQ6ICcsIGlkKTtcclxuICAgIH0pO1xyXG4gICAgLy8gT2NjdXJzIHdoZW4gYSB1c2VyIHN1YnNjcmliZXMgdG8gYSByZW1vdGUgc3RyZWFtLlxyXG4gICAgdGhpcy5fY2xpZW50Lm9uKFwic3RyZWFtLXN1YnNjcmliZWRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBjb25zdCByZW1vdGVTdHJlYW0gPSBldnQuc3RyZWFtO1xyXG4gICAgICBjb25zdCBpZCA9IHJlbW90ZVN0cmVhbS5nZXRJZCgpO1xyXG4gICAgICB0aGlzLl9yZW1vdGVTdHJlYW1zLnB1c2gocmVtb3RlU3RyZWFtKTtcclxuICAgICAgYWRkVmlldyhpZCwgdGhpcy5fc2hvd1Byb2ZpbGUpO1xyXG4gICAgICByZW1vdGVTdHJlYW0ucGxheShcInJlbW90ZV92aWRlb19cIiArIGlkLCB7Zml0OiBcImNvdmVyXCJ9KTtcclxuICAgICAgVG9hc3QuaW5mbygnc3RyZWFtLXN1YnNjcmliZWQgcmVtb3RlLXVpZDogJyArIGlkKTtcclxuICAgICAgY29uc29sZS5sb2coJ3N0cmVhbS1zdWJzY3JpYmVkIHJlbW90ZS11aWQ6ICcsIGlkKTtcclxuICAgIH0pXHJcbiAgICAvLyBPY2N1cnMgd2hlbiB0aGUgcmVtb3RlIHN0cmVhbSBpcyByZW1vdmVkOyBmb3IgZXhhbXBsZSwgYSBwZWVyIHVzZXIgY2FsbHMgQ2xpZW50LnVucHVibGlzaC5cclxuICAgIHRoaXMuX2NsaWVudC5vbihcInN0cmVhbS1yZW1vdmVkXCIsIChldnQpID0+IHtcclxuICAgICAgY29uc3QgcmVtb3RlU3RyZWFtID0gZXZ0LnN0cmVhbTtcclxuICAgICAgY29uc3QgaWQgPSByZW1vdGVTdHJlYW0uZ2V0SWQoKTtcclxuICAgICAgVG9hc3QuaW5mbyhcInN0cmVhbS1yZW1vdmVkIHVpZDogXCIgKyBpZCk7XHJcbiAgICAgIHJlbW90ZVN0cmVhbS5zdG9wKCk7XHJcbiAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMgPSB0aGlzLl9yZW1vdGVTdHJlYW1zLmZpbHRlcigoc3RyZWFtKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHN0cmVhbS5nZXRJZCgpICE9PSBpZFxyXG4gICAgICB9KTtcclxuICAgICAgcmVtb3ZlVmlldyhpZCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdzdHJlYW0tcmVtb3ZlZCByZW1vdGUtdWlkOiAnLCBpZCk7XHJcbiAgICB9KVxyXG4gICAgdGhpcy5fY2xpZW50Lm9uKFwib25Ub2tlblByaXZpbGVnZVdpbGxFeHBpcmVcIiwgKCkgPT4ge1xyXG4gICAgICAvLyBBZnRlciByZXF1ZXN0aW5nIGEgbmV3IHRva2VuXHJcbiAgICAgIC8vIHRoaXMuX2NsaWVudC5yZW5ld1Rva2VuKHRva2VuKTtcclxuICAgICAgVG9hc3QuaW5mbyhcIm9uVG9rZW5Qcml2aWxlZ2VXaWxsRXhwaXJlXCIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIm9uVG9rZW5Qcml2aWxlZ2VXaWxsRXhwaXJlXCIpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9jbGllbnQub24oXCJvblRva2VuUHJpdmlsZWdlRGlkRXhwaXJlXCIsICgpID0+IHtcclxuICAgICAgLy8gQWZ0ZXIgcmVxdWVzdGluZyBhIG5ldyB0b2tlblxyXG4gICAgICAvLyBjbGllbnQucmVuZXdUb2tlbih0b2tlbik7XHJcbiAgICAgIFRvYXN0LmluZm8oXCJvblRva2VuUHJpdmlsZWdlRGlkRXhwaXJlXCIpO1xyXG4gICAgICBjb25zb2xlLmxvZyhcIm9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmVcIik7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgam9pbiAoZGF0YSkge1xyXG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHsgICAgXHJcbiAgICAgIGlmICh0aGlzLl9qb2luZWQpIHtcclxuICAgICAgICBUb2FzdC5lcnJvcihcIllvdXIgYWxyZWFkeSBqb2luZWRcIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgICB9XHJcbiAgICBcclxuICAgICAgLyoqXHJcbiAgICAgICAqIEEgY2xhc3MgZGVmaW5pbmcgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGNvbmZpZyBwYXJhbWV0ZXIgaW4gdGhlIGNyZWF0ZUNsaWVudCBtZXRob2QuXHJcbiAgICAgICAqIE5vdGU6XHJcbiAgICAgICAqICAgIEVuc3VyZSB0aGF0IHlvdSBkbyBub3QgbGVhdmUgbW9kZSBhbmQgY29kZWMgYXMgZW1wdHkuXHJcbiAgICAgICAqICAgIEVuc3VyZSB0aGF0IHlvdSBzZXQgdGhlc2UgcHJvcGVydGllcyBiZWZvcmUgY2FsbGluZyBDbGllbnQuam9pbi5cclxuICAgICAgICogIFlvdSBjb3VsZCBmaW5kIG1vcmUgZGV0YWlsIGhlcmUuIGh0dHBzOi8vZG9jcy5hZ29yYS5pby9lbi9WaWRlby9BUEklMjBSZWZlcmVuY2Uvd2ViL2ludGVyZmFjZXMvYWdvcmFydGMuY2xpZW50Y29uZmlnLmh0bWxcclxuICAgICAgKiovXHJcbiAgICAgIHRoaXMuX2NsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7bW9kZTogZGF0YS5tb2RlLCBjb2RlYzogZGF0YS5jb2RlY30pO1xyXG4gICAgXHJcbiAgICAgIHRoaXMuX3BhcmFtcyA9IGRhdGE7XHJcbiAgICBcclxuICAgICAgLy8gaGFuZGxlIEFnb3JhUlRDIGNsaWVudCBldmVudFxyXG4gICAgICB0aGlzLmhhbmRsZUV2ZW50cygpO1xyXG4gICAgXHJcbiAgICAgIC8vIGluaXQgY2xpZW50XHJcbiAgICAgIHRoaXMuX2NsaWVudC5pbml0KGRhdGEuYXBwSUQsICgpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcImluaXQgc3VjY2Vzc1wiKTtcclxuICAgIFxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIEpvaW5zIGFuIEFnb3JhUlRDIENoYW5uZWxcclxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBqb2lucyBhbiBBZ29yYVJUQyBjaGFubmVsLlxyXG4gICAgICAgICAqIFBhcmFtZXRlcnNcclxuICAgICAgICAgKiB0b2tlbk9yS2V5OiBzdHJpbmcgfCBudWxsXHJcbiAgICAgICAgICogICAgTG93IHNlY3VyaXR5IHJlcXVpcmVtZW50czogUGFzcyBudWxsIGFzIHRoZSBwYXJhbWV0ZXIgdmFsdWUuXHJcbiAgICAgICAgICogICAgSGlnaCBzZWN1cml0eSByZXF1aXJlbWVudHM6IFBhc3MgdGhlIHN0cmluZyBvZiB0aGUgVG9rZW4gb3IgQ2hhbm5lbCBLZXkgYXMgdGhlIHBhcmFtZXRlciB2YWx1ZS4gU2VlIFVzZSBTZWN1cml0eSBLZXlzIGZvciBkZXRhaWxzLlxyXG4gICAgICAgICAqICBjaGFubmVsOiBzdHJpbmdcclxuICAgICAgICAgKiAgICBBIHN0cmluZyB0aGF0IHByb3ZpZGVzIGEgdW5pcXVlIGNoYW5uZWwgbmFtZSBmb3IgdGhlIEFnb3JhIHNlc3Npb24uIFRoZSBsZW5ndGggbXVzdCBiZSB3aXRoaW4gNjQgYnl0ZXMuIFN1cHBvcnRlZCBjaGFyYWN0ZXIgc2NvcGVzOlxyXG4gICAgICAgICAqICAgIDI2IGxvd2VyY2FzZSBFbmdsaXNoIGxldHRlcnMgYS16XHJcbiAgICAgICAgICogICAgMjYgdXBwZXJjYXNlIEVuZ2xpc2ggbGV0dGVycyBBLVpcclxuICAgICAgICAgKiAgICAxMCBudW1iZXJzIDAtOVxyXG4gICAgICAgICAqICAgIFNwYWNlXHJcbiAgICAgICAgICogICAgXCIhXCIsIFwiI1wiLCBcIiRcIiwgXCIlXCIsIFwiJlwiLCBcIihcIiwgXCIpXCIsIFwiK1wiLCBcIi1cIiwgXCI6XCIsIFwiO1wiLCBcIjxcIiwgXCI9XCIsIFwiLlwiLCBcIj5cIiwgXCI/XCIsIFwiQFwiLCBcIltcIiwgXCJdXCIsIFwiXlwiLCBcIl9cIiwgXCJ7XCIsIFwifVwiLCBcInxcIiwgXCJ+XCIsIFwiLFwiXHJcbiAgICAgICAgICogIHVpZDogbnVtYmVyIHwgbnVsbFxyXG4gICAgICAgICAqICAgIFRoZSB1c2VyIElELCBhbiBpbnRlZ2VyLiBFbnN1cmUgdGhpcyBJRCBpcyB1bmlxdWUuIElmIHlvdSBzZXQgdGhlIHVpZCB0byBudWxsLCB0aGUgc2VydmVyIGFzc2lnbnMgb25lIGFuZCByZXR1cm5zIGl0IGluIHRoZSBvblN1Y2Nlc3MgY2FsbGJhY2suXHJcbiAgICAgICAgICogICBOb3RlOlxyXG4gICAgICAgICAqICAgICAgQWxsIHVzZXJzIGluIHRoZSBzYW1lIGNoYW5uZWwgc2hvdWxkIGhhdmUgdGhlIHNhbWUgdHlwZSAobnVtYmVyKSBvZiB1aWQuXHJcbiAgICAgICAgICogICAgICBJZiB5b3UgdXNlIGEgbnVtYmVyIGFzIHRoZSB1c2VyIElELCBpdCBzaG91bGQgYmUgYSAzMi1iaXQgdW5zaWduZWQgaW50ZWdlciB3aXRoIGEgdmFsdWUgcmFuZ2luZyBmcm9tIDAgdG8gKDIzMi0xKS5cclxuICAgICAgICAqKi9cclxuICAgICAgICB0aGlzLl9jbGllbnQuam9pbihkYXRhLnRva2VuID8gZGF0YS50b2tlbiA6IG51bGwsIGRhdGEuY2hhbm5lbCwgZGF0YS51aWQgPyArZGF0YS51aWQgOiBudWxsLCAodWlkKSA9PiB7XHJcbiAgICAgICAgICB0aGlzLl9wYXJhbXMudWlkID0gdWlkO1xyXG4gICAgICAgICAgVG9hc3Qubm90aWNlKFwiam9pbiBjaGFubmVsOiBcIiArIGRhdGEuY2hhbm5lbCArIFwiIHN1Y2Nlc3MsIHVpZDogXCIgKyB1aWQpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJqb2luIGNoYW5uZWw6IFwiICsgZGF0YS5jaGFubmVsICsgXCIgc3VjY2VzcywgdWlkOiBcIiArIHVpZCk7XHJcbiAgICAgICAgICB0aGlzLl9qb2luZWQgPSB0cnVlO1xyXG4gICAgXHJcbiAgICAgICAgICAvLyBzdGFydCBzdHJlYW0gaW50ZXJ2YWwgc3RhdHNcclxuICAgICAgICAgIC8vIGlmIHlvdSBkb24ndCBuZWVkIHNob3cgc3RyZWFtIHByb2ZpbGUgeW91IGNhbiBjb21tZW50IHRoaXNcclxuICAgICAgICAgIGlmICghdGhpcy5faW50ZXJ2YWwpIHtcclxuICAgICAgICAgICAgdGhpcy5faW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgdGhpcy5fdXBkYXRlVmlkZW9JbmZvKCk7XHJcbiAgICAgICAgICAgIH0sIDApO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgIC8vIGNyZWF0ZSBsb2NhbCBzdHJlYW1cclxuICAgICAgICAgICBjb25zdCBzdHJlYW1TcGVjID0geyAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBzdHJlYW1JRDogdGhpcy5fcGFyYW1zLnVpZCxcclxuICAgICAgICAgICAgYXVkaW86IHRydWUsXHJcbiAgICAgICAgICAgIHZpZGVvOiB0cnVlLFxyXG4gICAgICAgICAgICBzY3JlZW46IGZhbHNlLFxyXG4gICAgICAgICAgICBtaWNyb3Bob25lSWQ6IGRhdGEubWljcm9waG9uZUlkLFxyXG4gICAgICAgICAgICBjYW1lcmFJZDogZGF0YS5jYW1lcmFJZCxcclxuICAgICAgICAgICAgbWlycm9yOiBmYWxzZVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgICAgXHJcbiAgICAgICAgICAvLyBjcmVhdGUgbG9jYWwgc3RyZWFtXHJcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbSA9IEFnb3JhUlRDLmNyZWF0ZVN0cmVhbShzdHJlYW1TcGVjKTsgXHJcbiAgICAgICAgICBcclxuICAgICAgICBcclxuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLm9uKFwicGxheWVyLXN0YXR1cy1jaGFuZ2VcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInBsYXllciBzdGF0dXMgY2hhbmdlXCIsIGV2dCk7XHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgIGlmIChkYXRhLmNhbWVyYVJlc29sdXRpb24gKSB7XHJcbiAgICAgICAgICAgIC8vIHNldCBsb2NhbCB2aWRlbyByZXNvbHV0aW9uXHJcbiAgICAgICAgICAgIGlmKGRhdGEuY2FtZXJhUmVzb2x1dGlvbiA9PSAnZGVmYXVsdCcpe1xyXG4gICAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLnNldFZpZGVvUHJvZmlsZShcIjRLXzFcIik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW0uc2V0VmlkZW9Qcm9maWxlKGRhdGEuY2FtZXJhUmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgICAgLy8gaW5pdCBsb2NhbCBzdHJlYW1cclxuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLmluaXQoKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcImluaXQgbG9jYWwgc3RyZWFtIHN1Y2Nlc3NcIik7XHJcbiAgICAgICAgICAgIC8vIHBsYXkgc3RyZWFtIHdpdGggaHRtbCBlbGVtZW50IGlkIFwibG9jYWxfc3RyZWFtXCJcclxuICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW0ucGxheShcImxvY2FsX3N0cmVhbVwiLCB7Zml0OiBcImNvdmVyXCJ9KTtcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBydW4gY2FsbGJhY2tcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgfSwgKGVycikgPT4gIHtcclxuICAgICAgICAgICAgVG9hc3QuZXJyb3IoXCJzdHJlYW0gaW5pdCBmYWlsZWQsIHBsZWFzZSBvcGVuIGNvbnNvbGUgc2VlIG1vcmUgZGV0YWlsXCIpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiaW5pdCBsb2NhbCBzdHJlYW0gZmFpbGVkIFwiLCBlcnIpO1xyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgIFRvYXN0LmVycm9yKFwiY2xpZW50IGpvaW4gZmFpbGVkLCBwbGVhc2Ugb3BlbiBjb25zb2xlIHNlZSBtb3JlIGRldGFpbFwiKTtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJjbGllbnQgam9pbiBmYWlsZWRcIiwgZXJyKTtcclxuICAgICAgICB9KVxyXG4gICAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgICAgVG9hc3QuZXJyb3IoXCJjbGllbnQgaW5pdCBmYWlsZWQsIHBsZWFzZSBvcGVuIGNvbnNvbGUgc2VlIG1vcmUgZGV0YWlsXCIpO1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgam9pblNjcmVlblNoYXJpbmcgKGRhdGEpIHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7ICAgIFxyXG4gICAgICBpZiAodGhpcy5fam9pbmVkKSB7XHJcbiAgICAgICAgVG9hc3QuZXJyb3IoXCJZb3VyIGFscmVhZHkgam9pbmVkXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgICAgfVxyXG4gICAgXHJcbiAgICAgIC8qKlxyXG4gICAgICAgKiBBIGNsYXNzIGRlZmluaW5nIHRoZSBwcm9wZXJ0aWVzIG9mIHRoZSBjb25maWcgcGFyYW1ldGVyIGluIHRoZSBjcmVhdGVDbGllbnQgbWV0aG9kLlxyXG4gICAgICAgKiBOb3RlOlxyXG4gICAgICAgKiAgICBFbnN1cmUgdGhhdCB5b3UgZG8gbm90IGxlYXZlIG1vZGUgYW5kIGNvZGVjIGFzIGVtcHR5LlxyXG4gICAgICAgKiAgICBFbnN1cmUgdGhhdCB5b3Ugc2V0IHRoZXNlIHByb3BlcnRpZXMgYmVmb3JlIGNhbGxpbmcgQ2xpZW50LmpvaW4uXHJcbiAgICAgICAqICBZb3UgY291bGQgZmluZCBtb3JlIGRldGFpbCBoZXJlLiBodHRwczovL2RvY3MuYWdvcmEuaW8vZW4vVmlkZW8vQVBJJTIwUmVmZXJlbmNlL3dlYi9pbnRlcmZhY2VzL2Fnb3JhcnRjLmNsaWVudGNvbmZpZy5odG1sXHJcbiAgICAgICoqL1xyXG4gICAgICB0aGlzLl9jbGllbnQgPSBBZ29yYVJUQy5jcmVhdGVDbGllbnQoe21vZGU6IGRhdGEubW9kZSwgY29kZWM6IGRhdGEuY29kZWN9KTtcclxuICAgIFxyXG4gICAgICB0aGlzLl9wYXJhbXMgPSBkYXRhO1xyXG4gICAgXHJcbiAgICAgIC8vIGhhbmRsZSBBZ29yYVJUQyBjbGllbnQgZXZlbnRcclxuICAgICAgdGhpcy5oYW5kbGVFdmVudHMoKTtcclxuICAgIFxyXG4gICAgICAvLyBpbml0IGNsaWVudFxyXG4gICAgICB0aGlzLl9jbGllbnQuaW5pdChkYXRhLmFwcElELCAoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJpbml0IHN1Y2Nlc3NcIik7XHJcbiAgICBcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiBKb2lucyBhbiBBZ29yYVJUQyBDaGFubmVsXHJcbiAgICAgICAgICogVGhpcyBtZXRob2Qgam9pbnMgYW4gQWdvcmFSVEMgY2hhbm5lbC5cclxuICAgICAgICAgKiBQYXJhbWV0ZXJzXHJcbiAgICAgICAgICogdG9rZW5PcktleTogc3RyaW5nIHwgbnVsbFxyXG4gICAgICAgICAqICAgIExvdyBzZWN1cml0eSByZXF1aXJlbWVudHM6IFBhc3MgbnVsbCBhcyB0aGUgcGFyYW1ldGVyIHZhbHVlLlxyXG4gICAgICAgICAqICAgIEhpZ2ggc2VjdXJpdHkgcmVxdWlyZW1lbnRzOiBQYXNzIHRoZSBzdHJpbmcgb2YgdGhlIFRva2VuIG9yIENoYW5uZWwgS2V5IGFzIHRoZSBwYXJhbWV0ZXIgdmFsdWUuIFNlZSBVc2UgU2VjdXJpdHkgS2V5cyBmb3IgZGV0YWlscy5cclxuICAgICAgICAgKiAgY2hhbm5lbDogc3RyaW5nXHJcbiAgICAgICAgICogICAgQSBzdHJpbmcgdGhhdCBwcm92aWRlcyBhIHVuaXF1ZSBjaGFubmVsIG5hbWUgZm9yIHRoZSBBZ29yYSBzZXNzaW9uLiBUaGUgbGVuZ3RoIG11c3QgYmUgd2l0aGluIDY0IGJ5dGVzLiBTdXBwb3J0ZWQgY2hhcmFjdGVyIHNjb3BlczpcclxuICAgICAgICAgKiAgICAyNiBsb3dlcmNhc2UgRW5nbGlzaCBsZXR0ZXJzIGEtelxyXG4gICAgICAgICAqICAgIDI2IHVwcGVyY2FzZSBFbmdsaXNoIGxldHRlcnMgQS1aXHJcbiAgICAgICAgICogICAgMTAgbnVtYmVycyAwLTlcclxuICAgICAgICAgKiAgICBTcGFjZVxyXG4gICAgICAgICAqICAgIFwiIVwiLCBcIiNcIiwgXCIkXCIsIFwiJVwiLCBcIiZcIiwgXCIoXCIsIFwiKVwiLCBcIitcIiwgXCItXCIsIFwiOlwiLCBcIjtcIiwgXCI8XCIsIFwiPVwiLCBcIi5cIiwgXCI+XCIsIFwiP1wiLCBcIkBcIiwgXCJbXCIsIFwiXVwiLCBcIl5cIiwgXCJfXCIsIFwie1wiLCBcIn1cIiwgXCJ8XCIsIFwiflwiLCBcIixcIlxyXG4gICAgICAgICAqICB1aWQ6IG51bWJlciB8IG51bGxcclxuICAgICAgICAgKiAgICBUaGUgdXNlciBJRCwgYW4gaW50ZWdlci4gRW5zdXJlIHRoaXMgSUQgaXMgdW5pcXVlLiBJZiB5b3Ugc2V0IHRoZSB1aWQgdG8gbnVsbCwgdGhlIHNlcnZlciBhc3NpZ25zIG9uZSBhbmQgcmV0dXJucyBpdCBpbiB0aGUgb25TdWNjZXNzIGNhbGxiYWNrLlxyXG4gICAgICAgICAqICAgTm90ZTpcclxuICAgICAgICAgKiAgICAgIEFsbCB1c2VycyBpbiB0aGUgc2FtZSBjaGFubmVsIHNob3VsZCBoYXZlIHRoZSBzYW1lIHR5cGUgKG51bWJlcikgb2YgdWlkLlxyXG4gICAgICAgICAqICAgICAgSWYgeW91IHVzZSBhIG51bWJlciBhcyB0aGUgdXNlciBJRCwgaXQgc2hvdWxkIGJlIGEgMzItYml0IHVuc2lnbmVkIGludGVnZXIgd2l0aCBhIHZhbHVlIHJhbmdpbmcgZnJvbSAwIHRvICgyMzItMSkuXHJcbiAgICAgICAgKiovXHJcbiAgICAgICAgdGhpcy5fY2xpZW50LmpvaW4oZGF0YS50b2tlbiA/IGRhdGEudG9rZW4gOiBudWxsLCBkYXRhLmNoYW5uZWwsIGRhdGEudWlkID8gK2RhdGEudWlkIDogbnVsbCwgKHVpZCkgPT4ge1xyXG4gICAgICAgICAgdGhpcy5fcGFyYW1zLnVpZCA9IHVpZDtcclxuICAgICAgICAgIFRvYXN0Lm5vdGljZShcImpvaW4gY2hhbm5lbCB3aGlsZSBzY3JlZW5zaGFyaW5nOiBcIiArIGRhdGEuY2hhbm5lbCArIFwiIHN1Y2Nlc3MsIHVpZDogXCIgKyB1aWQpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJqb2luIGNoYW5uZWwgd2hpbGUgc2NyZWVuc2hhcmluZzogXCIgKyBkYXRhLmNoYW5uZWwgKyBcIiBzdWNjZXNzLCB1aWQ6IFwiICsgdWlkKTtcclxuICAgICAgICAgIHRoaXMuX2pvaW5lZCA9IHRydWU7XHJcbiAgICBcclxuICAgICAgICAgIC8vIHN0YXJ0IHN0cmVhbSBpbnRlcnZhbCBzdGF0c1xyXG4gICAgICAgICAgLy8gaWYgeW91IGRvbid0IG5lZWQgc2hvdyBzdHJlYW0gcHJvZmlsZSB5b3UgY2FuIGNvbW1lbnQgdGhpc1xyXG4gICAgICAgICAgaWYgKCF0aGlzLl9pbnRlcnZhbCkge1xyXG4gICAgICAgICAgICB0aGlzLl9pbnRlcnZhbCA9IHNldEludGVydmFsKCgpID0+IHtcclxuICAgICAgICAgICAgICB0aGlzLl91cGRhdGVWaWRlb0luZm8oKTtcclxuICAgICAgICAgICAgfSwgMCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAvLyBjcmVhdGUgbG9jYWwgc3RyZWFtXHJcbiAgICAgICAgICBjb25zdCBzdHJlYW1TcGVjID0ge1xyXG4gICAgICAgICAgICBzdHJlYW1JRDogdGhpcy5fcGFyYW1zLnVpZCxcclxuICAgICAgICAgICAgYXVkaW86IGZhbHNlLFxyXG4gICAgICAgICAgICB2aWRlbzogZmFsc2UsXHJcbiAgICAgICAgICAgIHNjcmVlbjogdHJ1ZSxcclxuICAgICAgICAgICAgbWljcm9waG9uZUlkOiBkYXRhLm1pY3JvcGhvbmVJZCxcclxuICAgICAgICAgICAgY2FtZXJhSWQ6IGRhdGEuY2FtZXJhSWQsXHJcbiAgICAgICAgICAgIHNjcmVlbkF1ZGlvOiBkYXRhLnNjcmVlbkF1ZGlvXHJcbiAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgIC8vIFlvdXIgZmlyZWZveCBuZWVkIHVzZSBzdXBwb3J0IG1lZGlhU291cmNlIGF0IGxlYXN0XHJcbiAgICAgICAgICBpZiAoaXNGaXJlZm94KCkpIHtcclxuICAgICAgICAgICAgc3RyZWFtU3BlYy5tZWRpYVNvdXJjZSA9ICd3aW5kb3cnO1xyXG4gICAgICAgICAgfSBlbHNlIGlmICghaXNDb21wYXRpYmxlQ2hyb21lKCkpIHtcclxuICAgICAgICAgICAgLy8gYmVmb3JlIGNocm9tZSA3MiBuZWVkIGluc3RhbGwgY2hyb21lIGV4dGVuc2lvbnNcclxuICAgICAgICAgICAgLy8gWW91IGNhbiBkb3dubG9hZCBzY3JlZW4gc2hhcmUgcGx1Z2luIGhlcmUgaHR0cHM6Ly9jaHJvbWUuZ29vZ2xlLmNvbS93ZWJzdG9yZS9kZXRhaWwvYWdvcmEtd2ViLXNjcmVlbnNoYXJpbmcvbWlubGxwbWhkZ3BuZG5rb21jb2NjZmVrZmVnbmxpa2dcclxuICAgICAgICAgICAgc3RyZWFtU3BlYy5leHRlbnNpb25JZCA9ICdtaW5sbHBtaGRncG5kbmtvbWNvY2NmZWtmZWdubGlrZyc7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgICBcclxuICAgICAgICAgIFRvYXN0Lm5vdGljZShcInRlc3RcIik7XHJcblxyXG4gICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW0gPSBBZ29yYVJUQy5jcmVhdGVTdHJlYW0oc3RyZWFtU3BlYyk7XHJcblxyXG4gICAgICAgICAgLy8gVG9hc3Qubm90aWNlKFwiX2xvY2FsU3RyZWFtXCIpO1xyXG4gICAgICAgICAgLy8gVG9hc3Qubm90aWNlKF9sb2NhbFN0cmVhbSk7XHJcblxyXG4gICAgICAgICAgLy8gc2V0IHNjcmVlbiBzaGFyaW5nIHZpZGVvIHJlc29sdXRpb25cclxuICAgICAgICAgIGlmIChkYXRhLnNjcmVlblNoYXJlUmVzb2x1dGlvbiAhPSAnZGVmYXVsdCcpIHtcclxuICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW0uc2V0U2NyZWVuUHJvZmlsZShkYXRhLnNjcmVlblNoYXJlUmVzb2x1dGlvbik7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwic2V0IHNjcmVlbiBwcm9maWxlXCIsIGRhdGEuc2NyZWVuU2hhcmVSZXNvbHV0aW9uKTtcclxuICAgICAgICAgIH1cclxuICAgICAgIFxyXG4gICAgICAgICAgLy8gT2NjdXJzIHdoZW4gc2RrIGVtaXQgZXJyb3IgXHJcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbS5vbihcImVycm9yXCIsIChldnQpID0+IHtcclxuICAgICAgICAgICAgVG9hc3QuZXJyb3IoXCJlcnJvclwiLCBKU09OLnN0cmluZ2lmeShbZXZ0XSkpXHJcbiAgICAgICAgICB9KVxyXG5cclxuICAgICAgICAgIC8vIE9jY3VycyB3aGVuIGEgeW91IHN0b3Agc2NyZWVuIHNoYXJpbmdcclxuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLm9uKFwic3RvcFNjcmVlblNoYXJpbmdcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbS5zdG9wKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3Nob3dQcm9maWxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIFRvYXN0Lm5vdGljZShcInN0b3Agc2NyZWVuIHNoYXJpbmdcIilcclxuICAgICAgICAgIH0pXHJcbiAgICBcclxuICAgICAgICAgIC8vIGluaXQgbG9jYWwgc3RyZWFtXHJcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbS5pbml0KCgpID0+IHtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbml0IGxvY2FsIHN0cmVhbSBzdWNjZXNzXCIpO1xyXG4gICAgICAgICAgICAvLyBwbGF5IHN0cmVhbSB3aXRoIGh0bWwgZWxlbWVudCBpZCBcImxvY2FsX3N0cmVhbVwiXHJcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLnBsYXkoXCJsb2NhbF9zdHJlYW1cIiwge2ZpdDogXCJjb3ZlclwifSlcclxuICAgIFxyXG4gICAgICAgICAgICAvLyBydW4gY2FsbGJhY2tcclxuICAgICAgICAgICAgcmVzb2x2ZSgpO1xyXG4gICAgICAgICAgfSwgKGVycikgPT4gIHtcclxuICAgICAgICAgICAgVG9hc3QuZXJyb3IoXCJzdHJlYW0gaW5pdCBmYWlsZWQsIHBsZWFzZSBvcGVuIGNvbnNvbGUgc2VlIG1vcmUgZGV0YWlsXCIpXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJpbml0IGxvY2FsIHN0cmVhbSBmYWlsZWQgXCIsIGVycik7XHJcbiAgICAgICAgICAgIGlmIChpc0ZpcmVmb3goKSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdGFydCBzY3JlZW4gc2hhcmluZywgbWF5YmUgZmlyZWZveCBub3Qgc3VwcG9ydCBtZWRpYVNvdXJjZSwgcGxlYXNlIHVwZ3JhZGUgeW91ciBmaXJlZm94IHRvIGxhdGVzdCB2ZXJzaW9uJylcclxuICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCFpc0NvbXBhdGlibGVDaHJvbWUoKSkge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBzdGFydCBzY3JlZW4gc2hhcmluZywgbWF5YmUgY2hyb21lIGV4dGVuc2lvbiB3YXMgbm90IGluc3RhbGxlZCBwcm9wZXJseSwgeW91IGNhbiBnZXQgaXQgZnJvbSBodHRwczovL2Nocm9tZS5nb29nbGUuY29tL3dlYnN0b3JlL2RldGFpbC9taW5sbHBtaGRncG5kbmtvbWNvY2NmZWtmZWdubGlrZycpO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfSlcclxuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcclxuICAgICAgICAgIFRvYXN0LmVycm9yKFwiY2xpZW50IGpvaW4gZmFpbGVkLCBwbGVhc2Ugb3BlbiBjb25zb2xlIHNlZSBtb3JlIGRldGFpbFwiKVxyXG4gICAgICAgICAgY29uc29sZS5lcnJvcihcImNsaWVudCBqb2luIGZhaWxlZFwiLCBlcnIpXHJcbiAgICAgICAgfSlcclxuICAgICAgfSwgKGVycikgPT4ge1xyXG4gICAgICAgIFRvYXN0LmVycm9yKFwiY2xpZW50IGluaXQgZmFpbGVkLCBwbGVhc2Ugb3BlbiBjb25zb2xlIHNlZSBtb3JlIGRldGFpbFwiKVxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcclxuICAgICAgfSk7XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgcHVibGlzaCAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xyXG4gICAgICBUb2FzdC5lcnJvcihcIlBsZWFzZSBKb2luIEZpcnN0XCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAodGhpcy5fcHVibGlzaGVkKSB7XHJcbiAgICAgIFRvYXN0LmVycm9yKFwiWW91ciBhbHJlYWR5IHB1Ymxpc2hlZFwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3Qgb2xkU3RhdGUgPSB0aGlzLl9wdWJsaXNoZWQ7XHJcbiAgXHJcbiAgICAvLyBwdWJsaXNoIGxvY2FsU3RyZWFtXHJcbiAgICB0aGlzLl9jbGllbnQucHVibGlzaCh0aGlzLl9sb2NhbFN0cmVhbSwgKGVycikgPT4ge1xyXG4gICAgICB0aGlzLl9wdWJsaXNoZWQgPSBvbGRTdGF0ZTtcclxuICAgICAgY29uc29sZS5sb2coXCJwdWJsaXNoIGZhaWxlZFwiKTtcclxuICAgICAgVG9hc3QuZXJyb3IoXCJwdWJsaXNoIGZhaWxlZFwiKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICAgIFRvYXN0LmluZm8oXCJwdWJsaXNoXCIpO1xyXG4gICAgdGhpcy5fcHVibGlzaGVkID0gdHJ1ZTtcclxuICB9XHJcblxyXG4gIHVucHVibGlzaCAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xyXG4gICAgICBUb2FzdC5lcnJvcihcIlBsZWFzZSBKb2luIEZpcnN0XCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBpZiAoIXRoaXMuX3B1Ymxpc2hlZCkge1xyXG4gICAgICBUb2FzdC5lcnJvcihcIllvdXIgZGlkbid0IHB1Ymxpc2hcIik7XHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IG9sZFN0YXRlID0gdGhpcy5fcHVibGlzaGVkO1xyXG4gICAgdGhpcy5fY2xpZW50LnVucHVibGlzaCh0aGlzLl9sb2NhbFN0cmVhbSwgKGVycikgPT4ge1xyXG4gICAgICB0aGlzLl9wdWJsaXNoZWQgPSBvbGRTdGF0ZTtcclxuICAgICAgY29uc29sZS5sb2coXCJ1bnB1Ymxpc2ggZmFpbGVkXCIpO1xyXG4gICAgICBUb2FzdC5lcnJvcihcInVucHVibGlzaCBmYWlsZWRcIilcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSk7XHJcbiAgICBUb2FzdC5pbmZvKFwidW5wdWJsaXNoXCIpO1xyXG4gICAgdGhpcy5fcHVibGlzaGVkID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBsZWF2ZSAoKSB7XHJcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xyXG4gICAgICBUb2FzdC5lcnJvcihcIlBsZWFzZSBKb2luIEZpcnN0IVwiKTtcclxuICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLl9qb2luZWQpIHtcclxuICAgICAgVG9hc3QuZXJyb3IoXCJZb3UgYXJlIG5vdCBpbiBjaGFubmVsXCIpO1xyXG4gICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICAvLyBsZWF2ZSBjaGFubmVsXHJcbiAgICB0aGlzLl9jbGllbnQubGVhdmUoKCkgPT4ge1xyXG4gICAgICAvLyBjbG9zZSBzdHJlYW1cclxuICAgICAgdGhpcy5fbG9jYWxTdHJlYW0uY2xvc2UoKTtcclxuXHJcbiAgICAgICQoXCIjbG9jYWxfdmlkZW9faW5mb1wiKS5hZGRDbGFzcyhcImhpZGVcIik7XHJcbiAgICAgIC8vIHN0b3Agc3RyZWFtXHJcbiAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLnN0b3AoKTtcclxuICAgICAgd2hpbGUgKHRoaXMuX3JlbW90ZVN0cmVhbXMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGNvbnN0IHN0cmVhbSA9IHRoaXMuX3JlbW90ZVN0cmVhbXMuc2hpZnQoKTtcclxuICAgICAgICBjb25zdCBpZCA9IHN0cmVhbS5nZXRJZCgpXHJcbiAgICAgICAgc3RyZWFtLnN0b3AoKTtcclxuICAgICAgICByZW1vdmVWaWV3KGlkKTtcclxuICAgICAgfVxyXG4gICAgICB0aGlzLl9sb2NhbFN0cmVhbSA9IG51bGw7XHJcbiAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMgPSBbXTtcclxuICAgICAgdGhpcy5fY2xpZW50ID0gbnVsbDtcclxuICAgICAgY29uc29sZS5sb2coXCJjbGllbnQgbGVhdmVzIGNoYW5uZWwgc3VjY2Vzc1wiKTtcclxuICAgICAgdGhpcy5fcHVibGlzaGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX2pvaW5lZCA9IGZhbHNlO1xyXG4gICAgICBUb2FzdC5ub3RpY2UoXCJsZWF2ZSBzdWNjZXNzXCIpXHJcbiAgICB9LCAoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiY2hhbm5lbCBsZWF2ZSBmYWlsZWRcIik7XHJcbiAgICAgIFRvYXN0LmVycm9yKFwibGVhdmUgc3VjY2Vzc1wiKTtcclxuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIF9nZXRMb3N0UmF0ZSAobG9zdFBhY2tldHMsIGFycml2ZWRQYWNrZXRzKSB7XHJcbiAgICBsZXQgbG9zdCA9IGxvc3RQYWNrZXRzID8gK2xvc3RQYWNrZXRzIDogMDtcclxuICAgIGxldCBhcnJpdmVkID0gYXJyaXZlZFBhY2tldHMgPyArYXJyaXZlZFBhY2tldHMgOiAwO1xyXG4gICAgaWYgKGFycml2ZWQgPT0gMCkgcmV0dXJuIDA7XHJcbiAgICBjb25zdCByZXN1bHQgPSAobG9zdCAvIChsb3N0ICsgYXJyaXZlZCkpLnRvRml4ZWQoMikgKiAxMDBcclxuICAgIHJldHVybiByZXN1bHQ7XHJcbiAgfVxyXG5cclxuICBfdXBkYXRlVmlkZW9JbmZvICgpIHtcclxuICAgIHRoaXMuX2xvY2FsU3RyZWFtICYmIHRoaXMuX2xvY2FsU3RyZWFtLmdldFN0YXRzKChzdGF0cykgPT4ge1xyXG4gICAgICBjb25zdCBsb2NhbFN0cmVhbVByb2ZpbGUgPSBbXHJcbiAgICAgICAgWydVaWQ6ICcsIHRoaXMuX2xvY2FsU3RyZWFtLmdldElkKCldLmpvaW4oJycpLFxyXG4gICAgICAgIFsnU0ROIGFjY2VzcyBkZWxheTogJywgc3RhdHMuYWNjZXNzRGVsYXksICdtcyddLmpvaW4oJycpLFxyXG4gICAgICAgIFsnVmlkZW8gc2VuZDogJywgc3RhdHMudmlkZW9TZW5kRnJhbWVSYXRlLCAnZnBzICcsIHN0YXRzLnZpZGVvU2VuZFJlc29sdXRpb25XaWR0aCArICd4JyArIHN0YXRzLnZpZGVvU2VuZFJlc29sdXRpb25IZWlnaHRdLmpvaW4oJycpLFxyXG4gICAgICBdLmpvaW4oJzxici8+Jyk7XHJcbiAgICAgICQoXCIjbG9jYWxfdmlkZW9faW5mb1wiKVswXS5pbm5lckhUTUwgPSBsb2NhbFN0cmVhbVByb2ZpbGU7XHJcbiAgICB9KVxyXG5cclxuICAgIGlmICh0aGlzLl9yZW1vdGVTdHJlYW1zLmxlbmd0aCA+IDApIHtcclxuICAgICAgZm9yIChsZXQgcmVtb3RlU3RyZWFtIG9mIHRoaXMuX3JlbW90ZVN0cmVhbXMpIHtcclxuICAgICAgICByZW1vdGVTdHJlYW0uZ2V0U3RhdHMoKHN0YXRzKSA9PiB7XHJcbiAgICAgICAgICBjb25zdCByZW1vdGVTdHJlYW1Qcm9maWxlID0gW1xyXG4gICAgICAgICAgICBbJ1VpZDogJywgcmVtb3RlU3RyZWFtLmdldElkKCldLmpvaW4oJycpLFxyXG4gICAgICAgICAgICBbJ1NETiBhY2Nlc3MgZGVsYXk6ICcsIHN0YXRzLmFjY2Vzc0RlbGF5LCAnbXMnXS5qb2luKCcnKSxcclxuICAgICAgICAgICAgWydFbmQgdG8gZW5kIGRlbGF5OiAnLCBzdGF0cy5lbmRUb0VuZERlbGF5LCAnbXMnXS5qb2luKCcnKSxcclxuICAgICAgICAgICAgWydWaWRlbyByZWN2OiAnLCBzdGF0cy52aWRlb1JlY2VpdmVGcmFtZVJhdGUsICdmcHMgJywgc3RhdHMudmlkZW9SZWNlaXZlUmVzb2x1dGlvbldpZHRoICsgJ3gnICsgc3RhdHMudmlkZW9SZWNlaXZlUmVzb2x1dGlvbkhlaWdodF0uam9pbignJyksXHJcbiAgICAgICAgICBdLmpvaW4oJzxici8+Jyk7XHJcbiAgICAgICAgICBpZiAoJChcIiNyZW1vdGVfdmlkZW9faW5mb19cIityZW1vdGVTdHJlYW0uZ2V0SWQoKSlbMF0pIHtcclxuICAgICAgICAgICAgJChcIiNyZW1vdGVfdmlkZW9faW5mb19cIityZW1vdGVTdHJlYW0uZ2V0SWQoKSlbMF0uaW5uZXJIVE1MID0gcmVtb3RlU3RyZWFtUHJvZmlsZTtcclxuICAgICAgICAgIH1cclxuICAgICAgICB9KVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXROZXR3b3JrUXVhbGl0eUFuZFN0cmVhbVN0YXRzIChlbmFibGUpIHtcclxuICAgIHRoaXMuX3Nob3dQcm9maWxlID0gZW5hYmxlO1xyXG4gICAgdGhpcy5fc2hvd1Byb2ZpbGUgPyAkKFwiLnZpZGVvLXByb2ZpbGVcIikucmVtb3ZlQ2xhc3MoXCJoaWRlXCIpIDogJChcIi52aWRlby1wcm9maWxlXCIpLmFkZENsYXNzKFwiaGlkZVwiKVxyXG4gIH1cclxufVxyXG5cclxuIiwiLyohXG4gKiBVQVBhcnNlci5qcyB2MC43LjIwXG4gKiBMaWdodHdlaWdodCBKYXZhU2NyaXB0LWJhc2VkIFVzZXItQWdlbnQgc3RyaW5nIHBhcnNlclxuICogaHR0cHM6Ly9naXRodWIuY29tL2ZhaXNhbG1hbi91YS1wYXJzZXItanNcbiAqXG4gKiBDb3B5cmlnaHQgwqkgMjAxMi0yMDE5IEZhaXNhbCBTYWxtYW4gPGZAZmFpc2FsbWFuLmNvbT5cbiAqIExpY2Vuc2VkIHVuZGVyIE1JVCBMaWNlbnNlXG4gKi9cblxuKGZ1bmN0aW9uICh3aW5kb3csIHVuZGVmaW5lZCkge1xuXG4gICAgJ3VzZSBzdHJpY3QnO1xuXG4gICAgLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBDb25zdGFudHNcbiAgICAvLy8vLy8vLy8vLy8vXG5cblxuICAgIHZhciBMSUJWRVJTSU9OICA9ICcwLjcuMjAnLFxuICAgICAgICBFTVBUWSAgICAgICA9ICcnLFxuICAgICAgICBVTktOT1dOICAgICA9ICc/JyxcbiAgICAgICAgRlVOQ19UWVBFICAgPSAnZnVuY3Rpb24nLFxuICAgICAgICBVTkRFRl9UWVBFICA9ICd1bmRlZmluZWQnLFxuICAgICAgICBPQkpfVFlQRSAgICA9ICdvYmplY3QnLFxuICAgICAgICBTVFJfVFlQRSAgICA9ICdzdHJpbmcnLFxuICAgICAgICBNQUpPUiAgICAgICA9ICdtYWpvcicsIC8vIGRlcHJlY2F0ZWRcbiAgICAgICAgTU9ERUwgICAgICAgPSAnbW9kZWwnLFxuICAgICAgICBOQU1FICAgICAgICA9ICduYW1lJyxcbiAgICAgICAgVFlQRSAgICAgICAgPSAndHlwZScsXG4gICAgICAgIFZFTkRPUiAgICAgID0gJ3ZlbmRvcicsXG4gICAgICAgIFZFUlNJT04gICAgID0gJ3ZlcnNpb24nLFxuICAgICAgICBBUkNISVRFQ1RVUkU9ICdhcmNoaXRlY3R1cmUnLFxuICAgICAgICBDT05TT0xFICAgICA9ICdjb25zb2xlJyxcbiAgICAgICAgTU9CSUxFICAgICAgPSAnbW9iaWxlJyxcbiAgICAgICAgVEFCTEVUICAgICAgPSAndGFibGV0JyxcbiAgICAgICAgU01BUlRUViAgICAgPSAnc21hcnR0dicsXG4gICAgICAgIFdFQVJBQkxFICAgID0gJ3dlYXJhYmxlJyxcbiAgICAgICAgRU1CRURERUQgICAgPSAnZW1iZWRkZWQnO1xuXG5cbiAgICAvLy8vLy8vLy8vL1xuICAgIC8vIEhlbHBlclxuICAgIC8vLy8vLy8vLy9cblxuXG4gICAgdmFyIHV0aWwgPSB7XG4gICAgICAgIGV4dGVuZCA6IGZ1bmN0aW9uIChyZWdleGVzLCBleHRlbnNpb25zKSB7XG4gICAgICAgICAgICB2YXIgbWVyZ2VkUmVnZXhlcyA9IHt9O1xuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiByZWdleGVzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGV4dGVuc2lvbnNbaV0gJiYgZXh0ZW5zaW9uc1tpXS5sZW5ndGggJSAyID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlZ2V4ZXNbaV0gPSBleHRlbnNpb25zW2ldLmNvbmNhdChyZWdleGVzW2ldKTtcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICBtZXJnZWRSZWdleGVzW2ldID0gcmVnZXhlc1tpXTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbWVyZ2VkUmVnZXhlcztcbiAgICAgICAgfSxcbiAgICAgICAgaGFzIDogZnVuY3Rpb24gKHN0cjEsIHN0cjIpIHtcbiAgICAgICAgICBpZiAodHlwZW9mIHN0cjEgPT09IFwic3RyaW5nXCIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIyLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzdHIxLnRvTG93ZXJDYXNlKCkpICE9PSAtMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAgbG93ZXJpemUgOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgICByZXR1cm4gc3RyLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIH0sXG4gICAgICAgIG1ham9yIDogZnVuY3Rpb24gKHZlcnNpb24pIHtcbiAgICAgICAgICAgIHJldHVybiB0eXBlb2YodmVyc2lvbikgPT09IFNUUl9UWVBFID8gdmVyc2lvbi5yZXBsYWNlKC9bXlxcZFxcLl0vZywnJykuc3BsaXQoXCIuXCIpWzBdIDogdW5kZWZpbmVkO1xuICAgICAgICB9LFxuICAgICAgICB0cmltIDogZnVuY3Rpb24gKHN0cikge1xuICAgICAgICAgIHJldHVybiBzdHIucmVwbGFjZSgvXltcXHNcXHVGRUZGXFx4QTBdK3xbXFxzXFx1RkVGRlxceEEwXSskL2csICcnKTtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIE1hcCBoZWxwZXJcbiAgICAvLy8vLy8vLy8vLy8vL1xuXG5cbiAgICB2YXIgbWFwcGVyID0ge1xuXG4gICAgICAgIHJneCA6IGZ1bmN0aW9uICh1YSwgYXJyYXlzKSB7XG5cbiAgICAgICAgICAgIHZhciBpID0gMCwgaiwgaywgcCwgcSwgbWF0Y2hlcywgbWF0Y2g7XG5cbiAgICAgICAgICAgIC8vIGxvb3AgdGhyb3VnaCBhbGwgcmVnZXhlcyBtYXBzXG4gICAgICAgICAgICB3aGlsZSAoaSA8IGFycmF5cy5sZW5ndGggJiYgIW1hdGNoZXMpIHtcblxuICAgICAgICAgICAgICAgIHZhciByZWdleCA9IGFycmF5c1tpXSwgICAgICAgLy8gZXZlbiBzZXF1ZW5jZSAoMCwyLDQsLi4pXG4gICAgICAgICAgICAgICAgICAgIHByb3BzID0gYXJyYXlzW2kgKyAxXTsgICAvLyBvZGQgc2VxdWVuY2UgKDEsMyw1LC4uKVxuICAgICAgICAgICAgICAgIGogPSBrID0gMDtcblxuICAgICAgICAgICAgICAgIC8vIHRyeSBtYXRjaGluZyB1YXN0cmluZyB3aXRoIHJlZ2V4ZXNcbiAgICAgICAgICAgICAgICB3aGlsZSAoaiA8IHJlZ2V4Lmxlbmd0aCAmJiAhbWF0Y2hlcykge1xuXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMgPSByZWdleFtqKytdLmV4ZWModWEpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICghIW1hdGNoZXMpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAocCA9IDA7IHAgPCBwcm9wcy5sZW5ndGg7IHArKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoID0gbWF0Y2hlc1srK2tdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHEgPSBwcm9wc1twXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBnaXZlbiBwcm9wZXJ0eSBpcyBhY3R1YWxseSBhcnJheVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcSA9PT0gT0JKX1RZUEUgJiYgcS5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChxLmxlbmd0aCA9PSAyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHFbMV0gPT0gRlVOQ19UWVBFKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzaWduIG1vZGlmaWVkIG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1txWzBdXSA9IHFbMV0uY2FsbCh0aGlzLCBtYXRjaCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGFzc2lnbiBnaXZlbiB2YWx1ZSwgaWdub3JlIHJlZ2V4IG1hdGNoXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1txWzBdXSA9IHFbMV07XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocS5sZW5ndGggPT0gMykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgd2hldGhlciBmdW5jdGlvbiBvciByZWdleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxWzFdID09PSBGVU5DX1RZUEUgJiYgIShxWzFdLmV4ZWMgJiYgcVsxXS50ZXN0KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNhbGwgZnVuY3Rpb24gKHVzdWFsbHkgc3RyaW5nIG1hcHBlcilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gbWF0Y2ggPyBxWzFdLmNhbGwodGhpcywgbWF0Y2gsIHFbMl0pIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBzYW5pdGl6ZSBtYXRjaCB1c2luZyBnaXZlbiByZWdleFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcVswXV0gPSBtYXRjaCA/IG1hdGNoLnJlcGxhY2UocVsxXSwgcVsyXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAocS5sZW5ndGggPT0gNCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcVswXV0gPSBtYXRjaCA/IHFbM10uY2FsbCh0aGlzLCBtYXRjaC5yZXBsYWNlKHFbMV0sIHFbMl0pKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcV0gPSBtYXRjaCA/IG1hdGNoIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBpICs9IDI7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgc3RyIDogZnVuY3Rpb24gKHN0ciwgbWFwKSB7XG5cbiAgICAgICAgICAgIGZvciAodmFyIGkgaW4gbWFwKSB7XG4gICAgICAgICAgICAgICAgLy8gY2hlY2sgaWYgYXJyYXlcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1hcFtpXSA9PT0gT0JKX1RZUEUgJiYgbWFwW2ldLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBtYXBbaV0ubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh1dGlsLmhhcyhtYXBbaV1bal0sIHN0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gKGkgPT09IFVOS05PV04pID8gdW5kZWZpbmVkIDogaTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAodXRpbC5oYXMobWFwW2ldLCBzdHIpKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSA9PT0gVU5LTk9XTikgPyB1bmRlZmluZWQgOiBpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBzdHI7XG4gICAgICAgIH1cbiAgICB9O1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBTdHJpbmcgbWFwXG4gICAgLy8vLy8vLy8vLy8vLy9cblxuXG4gICAgdmFyIG1hcHMgPSB7XG5cbiAgICAgICAgYnJvd3NlciA6IHtcbiAgICAgICAgICAgIG9sZHNhZmFyaSA6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uIDoge1xuICAgICAgICAgICAgICAgICAgICAnMS4wJyAgIDogJy84JyxcbiAgICAgICAgICAgICAgICAgICAgJzEuMicgICA6ICcvMScsXG4gICAgICAgICAgICAgICAgICAgICcxLjMnICAgOiAnLzMnLFxuICAgICAgICAgICAgICAgICAgICAnMi4wJyAgIDogJy80MTInLFxuICAgICAgICAgICAgICAgICAgICAnMi4wLjInIDogJy80MTYnLFxuICAgICAgICAgICAgICAgICAgICAnMi4wLjMnIDogJy80MTcnLFxuICAgICAgICAgICAgICAgICAgICAnMi4wLjQnIDogJy80MTknLFxuICAgICAgICAgICAgICAgICAgICAnPycgICAgIDogJy8nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIGRldmljZSA6IHtcbiAgICAgICAgICAgIGFtYXpvbiA6IHtcbiAgICAgICAgICAgICAgICBtb2RlbCA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0ZpcmUgUGhvbmUnIDogWydTRCcsICdLRiddXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHNwcmludCA6IHtcbiAgICAgICAgICAgICAgICBtb2RlbCA6IHtcbiAgICAgICAgICAgICAgICAgICAgJ0V2byBTaGlmdCA0RycgOiAnNzM3M0tUJ1xuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgdmVuZG9yIDoge1xuICAgICAgICAgICAgICAgICAgICAnSFRDJyAgICAgICA6ICdBUEEnLFxuICAgICAgICAgICAgICAgICAgICAnU3ByaW50JyAgICA6ICdTcHJpbnQnXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9LFxuXG4gICAgICAgIG9zIDoge1xuICAgICAgICAgICAgd2luZG93cyA6IHtcbiAgICAgICAgICAgICAgICB2ZXJzaW9uIDoge1xuICAgICAgICAgICAgICAgICAgICAnTUUnICAgICAgICA6ICc0LjkwJyxcbiAgICAgICAgICAgICAgICAgICAgJ05UIDMuMTEnICAgOiAnTlQzLjUxJyxcbiAgICAgICAgICAgICAgICAgICAgJ05UIDQuMCcgICAgOiAnTlQ0LjAnLFxuICAgICAgICAgICAgICAgICAgICAnMjAwMCcgICAgICA6ICdOVCA1LjAnLFxuICAgICAgICAgICAgICAgICAgICAnWFAnICAgICAgICA6IFsnTlQgNS4xJywgJ05UIDUuMiddLFxuICAgICAgICAgICAgICAgICAgICAnVmlzdGEnICAgICA6ICdOVCA2LjAnLFxuICAgICAgICAgICAgICAgICAgICAnNycgICAgICAgICA6ICdOVCA2LjEnLFxuICAgICAgICAgICAgICAgICAgICAnOCcgICAgICAgICA6ICdOVCA2LjInLFxuICAgICAgICAgICAgICAgICAgICAnOC4xJyAgICAgICA6ICdOVCA2LjMnLFxuICAgICAgICAgICAgICAgICAgICAnMTAnICAgICAgICA6IFsnTlQgNi40JywgJ05UIDEwLjAnXSxcbiAgICAgICAgICAgICAgICAgICAgJ1JUJyAgICAgICAgOiAnQVJNJ1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vXG4gICAgLy8gUmVnZXggbWFwXG4gICAgLy8vLy8vLy8vLy8vL1xuXG5cbiAgICB2YXIgcmVnZXhlcyA9IHtcblxuICAgICAgICBicm93c2VyIDogW1tcblxuICAgICAgICAgICAgLy8gUHJlc3RvIGJhc2VkXG4gICAgICAgICAgICAvKG9wZXJhXFxzbWluaSlcXC8oW1xcd1xcLi1dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBNaW5pXG4gICAgICAgICAgICAvKG9wZXJhXFxzW21vYmlsZXRhYl0rKS4rdmVyc2lvblxcLyhbXFx3XFwuLV0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBNb2JpL1RhYmxldFxuICAgICAgICAgICAgLyhvcGVyYSkuK3ZlcnNpb25cXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSA+IDkuODBcbiAgICAgICAgICAgIC8ob3BlcmEpW1xcL1xcc10rKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIDwgOS44MFxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8ob3Bpb3MpW1xcL1xcc10rKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIG1pbmkgb24gaXBob25lID49IDguMFxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnT3BlcmEgTWluaSddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvXFxzKG9wcilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBXZWJraXRcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ09wZXJhJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8vIE1peGVkXG4gICAgICAgICAgICAvKGtpbmRsZSlcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtpbmRsZVxuICAgICAgICAgICAgLyhsdW5hc2NhcGV8bWF4dGhvbnxuZXRmcm9udHxqYXNtaW5lfGJsYXplcilbXFwvXFxzXT8oW1xcd1xcLl0qKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMdW5hc2NhcGUvTWF4dGhvbi9OZXRmcm9udC9KYXNtaW5lL0JsYXplclxuXG4gICAgICAgICAgICAvLyBUcmlkZW50IGJhc2VkXG4gICAgICAgICAgICAvKGF2YW50XFxzfGllbW9iaWxlfHNsaW18YmFpZHUpKD86YnJvd3Nlcik/W1xcL1xcc10/KFtcXHdcXC5dKikvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXZhbnQvSUVNb2JpbGUvU2xpbUJyb3dzZXIvQmFpZHVcbiAgICAgICAgICAgIC8oPzptc3xcXCgpKGllKVxccyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEludGVybmV0IEV4cGxvcmVyXG5cbiAgICAgICAgICAgIC8vIFdlYmtpdC9LSFRNTCBiYXNlZFxuICAgICAgICAgICAgLyhyZWtvbnEpXFwvKFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWtvbnFcbiAgICAgICAgICAgIC8oY2hyb21pdW18ZmxvY2t8cm9ja21lbHR8bWlkb3JpfGVwaXBoYW55fHNpbGt8c2t5ZmlyZXxvdmlicm93c2VyfGJvbHR8aXJvbnx2aXZhbGRpfGlyaWRpdW18cGhhbnRvbWpzfGJvd3NlcnxxdWFya3xxdXB6aWxsYXxmYWxrb24pXFwvKFtcXHdcXC4tXSspL2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21pdW0vRmxvY2svUm9ja01lbHQvTWlkb3JpL0VwaXBoYW55L1NpbGsvU2t5ZmlyZS9Cb2x0L0lyb24vSXJpZGl1bS9QaGFudG9tSlMvQm93c2VyL1F1cFppbGxhL0ZhbGtvblxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oa29ucXVlcm9yKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS29ucXVlcm9yXG4gICAgICAgICAgICBdLCBbW05BTUUsICdLb25xdWVyb3InXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyh0cmlkZW50KS4rcnZbOlxcc10oW1xcd1xcLl0rKS4rbGlrZVxcc2dlY2tvL2kgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUUxMVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnSUUnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhlZGdlfGVkZ2lvc3xlZGdhfGVkZylcXC8oKFxcZCspP1tcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWljcm9zb2Z0IEVkZ2VcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0VkZ2UnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyh5YWJyb3dzZXIpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBZYW5kZXhcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ1lhbmRleCddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKHB1ZmZpbilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFB1ZmZpblxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnUHVmZmluJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oZm9jdXMpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBGb2N1c1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnRmlyZWZveCBGb2N1cyddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKG9wdClcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIFRvdWNoXG4gICAgICAgICAgICBdLCBbW05BTUUsICdPcGVyYSBUb3VjaCddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKCg/OltcXHNcXC9dKXVjP1xccz9icm93c2VyfCg/Omp1Yy4rKXVjd2ViKVtcXC9cXHNdPyhbXFx3XFwuXSspL2kgICAgICAgICAvLyBVQ0Jyb3dzZXJcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ1VDQnJvd3NlciddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKGNvbW9kb19kcmFnb24pXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbW9kbyBEcmFnb25cbiAgICAgICAgICAgIF0sIFtbTkFNRSwgL18vZywgJyAnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyh3aW5kb3dzd2VjaGF0IHFiY29yZSlcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZUNoYXQgRGVza3RvcCBmb3IgV2luZG93cyBCdWlsdC1pbiBCcm93c2VyXG4gICAgICAgICAgICBdLCBbW05BTUUsICdXZUNoYXQoV2luKSBEZXNrdG9wJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8obWljcm9tZXNzZW5nZXIpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2VDaGF0XG4gICAgICAgICAgICBdLCBbW05BTUUsICdXZUNoYXQnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhicmF2ZSlcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJyYXZlIGJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0JyYXZlJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8ocXFicm93c2VybGl0ZSlcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUVFCcm93c2VyTGl0ZVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oUVEpXFwvKFtcXGRcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUVEsIGFrYSBTaG91UVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC9tPyhxcWJyb3dzZXIpW1xcL1xcc10/KFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFFRQnJvd3NlclxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oQklEVUJyb3dzZXIpW1xcL1xcc10/KFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhaWR1IEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKDIzNDVFeHBsb3JlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyAyMzQ1IEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKE1ldGFTcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTb3VHb3VCcm93c2VyXG4gICAgICAgICAgICBdLCBbTkFNRV0sIFtcblxuICAgICAgICAgICAgLyhMQkJST1dTRVIpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpZUJhbyBCcm93c2VyXG4gICAgICAgICAgICBdLCBbTkFNRV0sIFtcblxuICAgICAgICAgICAgL3hpYW9taVxcL21pdWlicm93c2VyXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTUlVSSBCcm93c2VyXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdNSVVJIEJyb3dzZXInXV0sIFtcblxuICAgICAgICAgICAgLztmYmF2XFwvKFtcXHdcXC5dKyk7L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGYWNlYm9vayBBcHAgZm9yIGlPUyAmIEFuZHJvaWRcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0ZhY2Vib29rJ11dLCBbXG5cbiAgICAgICAgICAgIC9zYWZhcmlcXHMobGluZSlcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbmUgQXBwIGZvciBpT1NcbiAgICAgICAgICAgIC9hbmRyb2lkLisobGluZSlcXC8oW1xcd1xcLl0rKVxcL2lhYi9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExpbmUgQXBwIGZvciBBbmRyb2lkXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgL2hlYWRsZXNzY2hyb21lKD86XFwvKFtcXHdcXC5dKyl8XFxzKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lIEhlYWRsZXNzXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdDaHJvbWUgSGVhZGxlc3MnXV0sIFtcblxuICAgICAgICAgICAgL1xcc3d2XFwpLisoY2hyb21lKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9tZSBXZWJWaWV3XG4gICAgICAgICAgICBdLCBbW05BTUUsIC8oLispLywgJyQxIFdlYlZpZXcnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLygoPzpvY3VsdXN8c2Ftc3VuZylicm93c2VyKVxcLyhbXFx3XFwuXSspL2lcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgLyguKyg/Omd8dXMpKSguKykvLCAnJDEgJDInXSwgVkVSU0lPTl0sIFsgICAgICAgICAgICAgICAgLy8gT2N1bHVzIC8gU2Ftc3VuZyBCcm93c2VyXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLit2ZXJzaW9uXFwvKFtcXHdcXC5dKylcXHMrKD86bW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKi9pICAgICAgICAvLyBBbmRyb2lkIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0FuZHJvaWQgQnJvd3NlciddXSwgW1xuXG4gICAgICAgICAgICAvKHNhaWxmaXNoYnJvd3NlcilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNhaWxmaXNoIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ1NhaWxmaXNoIEJyb3dzZXInXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhjaHJvbWV8b21uaXdlYnxhcm9yYXxbdGl6ZW5va2FdezV9XFxzP2Jyb3dzZXIpXFwvdj8oW1xcd1xcLl0rKS9pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENocm9tZS9PbW5pV2ViL0Fyb3JhL1RpemVuL05va2lhXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhkb2xmaW4pXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBEb2xwaGluXG4gICAgICAgICAgICBdLCBbW05BTUUsICdEb2xwaGluJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oKD86YW5kcm9pZC4rKWNybW98Y3Jpb3MpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lIGZvciBBbmRyb2lkL2lPU1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnQ2hyb21lJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oY29hc3QpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgQ29hc3RcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ09wZXJhIENvYXN0J10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC9meGlvc1xcLyhbXFx3XFwuLV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBmb3IgaU9TXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdGaXJlZm94J11dLCBbXG5cbiAgICAgICAgICAgIC92ZXJzaW9uXFwvKFtcXHdcXC5dKykuKz9tb2JpbGVcXC9cXHcrXFxzKHNhZmFyaSkvaSAgICAgICAgICAgICAgICAgICAgICAgLy8gTW9iaWxlIFNhZmFyaVxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnTW9iaWxlIFNhZmFyaSddXSwgW1xuXG4gICAgICAgICAgICAvdmVyc2lvblxcLyhbXFx3XFwuXSspLis/KG1vYmlsZVxccz9zYWZhcml8c2FmYXJpKS9pICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkgJiBTYWZhcmkgTW9iaWxlXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgTkFNRV0sIFtcblxuICAgICAgICAgICAgL3dlYmtpdC4rPyhnc2EpXFwvKFtcXHdcXC5dKykuKz8obW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpKFxcL1tcXHdcXC5dKykvaSAgLy8gR29vZ2xlIFNlYXJjaCBBcHBsaWFuY2Ugb24gaU9TXG4gICAgICAgICAgICBdLCBbW05BTUUsICdHU0EnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgL3dlYmtpdC4rPyhtb2JpbGVcXHM/c2FmYXJpfHNhZmFyaSkoXFwvW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgLy8gU2FmYXJpIDwgMy4wXG4gICAgICAgICAgICBdLCBbTkFNRSwgW1ZFUlNJT04sIG1hcHBlci5zdHIsIG1hcHMuYnJvd3Nlci5vbGRzYWZhcmkudmVyc2lvbl1dLCBbXG5cbiAgICAgICAgICAgIC8od2Via2l0fGtodG1sKVxcLyhbXFx3XFwuXSspL2lcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvLyBHZWNrbyBiYXNlZFxuICAgICAgICAgICAgLyhuYXZpZ2F0b3J8bmV0c2NhcGUpXFwvKFtcXHdcXC4tXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOZXRzY2FwZVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnTmV0c2NhcGUnXSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8oc3dpZnRmb3gpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dpZnRmb3hcbiAgICAgICAgICAgIC8oaWNlZHJhZ29ufGljZXdlYXNlbHxjYW1pbm98Y2hpbWVyYXxmZW5uZWN8bWFlbW9cXHNicm93c2VyfG1pbmltb3xjb25rZXJvcilbXFwvXFxzXT8oW1xcd1xcLlxcK10rKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJY2VEcmFnb24vSWNld2Vhc2VsL0NhbWluby9DaGltZXJhL0Zlbm5lYy9NYWVtby9NaW5pbW8vQ29ua2Vyb3JcbiAgICAgICAgICAgIC8oZmlyZWZveHxzZWFtb25rZXl8ay1tZWxlb258aWNlY2F0fGljZWFwZXxmaXJlYmlyZHxwaG9lbml4fHBhbGVtb29ufGJhc2lsaXNrfHdhdGVyZm94KVxcLyhbXFx3XFwuLV0rKSQvaSxcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94L1NlYU1vbmtleS9LLU1lbGVvbi9JY2VDYXQvSWNlQXBlL0ZpcmViaXJkL1Bob2VuaXhcbiAgICAgICAgICAgIC8obW96aWxsYSlcXC8oW1xcd1xcLl0rKS4rcnZcXDouK2dlY2tvXFwvXFxkKy9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW96aWxsYVxuXG4gICAgICAgICAgICAvLyBPdGhlclxuICAgICAgICAgICAgLyhwb2xhcmlzfGx5bnh8ZGlsbG98aWNhYnxkb3Jpc3xhbWF5YXx3M218bmV0c3VyZnxzbGVpcG5pcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQb2xhcmlzL0x5bngvRGlsbG8vaUNhYi9Eb3Jpcy9BbWF5YS93M20vTmV0U3VyZi9TbGVpcG5pclxuICAgICAgICAgICAgLyhsaW5rcylcXHNcXCgoW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGlua3NcbiAgICAgICAgICAgIC8oZ29icm93c2VyKVxcLz8oW1xcd1xcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR29Ccm93c2VyXG4gICAgICAgICAgICAvKGljZVxccz9icm93c2VyKVxcL3Y/KFtcXHdcXC5fXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJQ0UgQnJvd3NlclxuICAgICAgICAgICAgLyhtb3NhaWMpW1xcL1xcc10oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW9zYWljXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl1cbiAgICAgICAgXSxcblxuICAgICAgICBjcHUgOiBbW1xuXG4gICAgICAgICAgICAvKD86KGFtZHx4KD86KD86ODZ8NjQpW18tXSk/fHdvd3x3aW4pNjQpWztcXCldL2kgICAgICAgICAgICAgICAgICAgICAvLyBBTUQ2NFxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdhbWQ2NCddXSwgW1xuXG4gICAgICAgICAgICAvKGlhMzIoPz07KSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElBMzIgKHF1aWNrdGltZSlcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCB1dGlsLmxvd2VyaXplXV0sIFtcblxuICAgICAgICAgICAgLygoPzppWzM0Nl18eCk4NilbO1xcKV0vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUEzMlxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdpYTMyJ11dLCBbXG5cbiAgICAgICAgICAgIC8vIFBvY2tldFBDIG1pc3Rha2VubHkgaWRlbnRpZmllZCBhcyBQb3dlclBDXG4gICAgICAgICAgICAvd2luZG93c1xccyhjZXxtb2JpbGUpO1xcc3BwYzsvaVxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsICdhcm0nXV0sIFtcblxuICAgICAgICAgICAgLygoPzpwcGN8cG93ZXJwYykoPzo2NCk/KSg/Olxcc21hY3w7fFxcKSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvd2VyUENcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAvb3dlci8sICcnLCB1dGlsLmxvd2VyaXplXV0sIFtcblxuICAgICAgICAgICAgLyhzdW40XFx3KVs7XFwpXS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNQQVJDXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ3NwYXJjJ11dLCBbXG5cbiAgICAgICAgICAgIC8oKD86YXZyMzJ8aWE2NCg/PTspKXw2OGsoPz1cXCkpfGFybSg/OjY0fCg/PXZcXGQrWztsXSkpfCg/PWF0bWVsXFxzKWF2cnwoPzppcml4fG1pcHN8c3BhcmMpKD86NjQpPyg/PTspfHBhLXJpc2MpL2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUE2NCwgNjhLLCBBUk0vNjQsIEFWUi8zMiwgSVJJWC82NCwgTUlQUy82NCwgU1BBUkMvNjQsIFBBLVJJU0NcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCB1dGlsLmxvd2VyaXplXV1cbiAgICAgICAgXSxcblxuICAgICAgICBkZXZpY2UgOiBbW1xuXG4gICAgICAgICAgICAvXFwoKGlwYWR8cGxheWJvb2spO1tcXHdcXHNcXCksOy1dKyhyaW18YXBwbGUpL2kgICAgICAgICAgICAgICAgICAgICAgICAvLyBpUGFkL1BsYXlCb29rXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFZFTkRPUiwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hcHBsZWNvcmVtZWRpYVxcL1tcXHdcXC5dKyBcXCgoaXBhZCkvICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlQYWRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FwcGxlJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvKGFwcGxlXFxzezAsMX10dikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcHBsZSBUVlxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgJ0FwcGxlIFRWJ10sIFtWRU5ET1IsICdBcHBsZSddXSwgW1xuXG4gICAgICAgICAgICAvKGFyY2hvcylcXHMoZ2FtZXBhZDI/KS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBcmNob3NcbiAgICAgICAgICAgIC8oaHApLisodG91Y2hwYWQpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFAgVG91Y2hQYWRcbiAgICAgICAgICAgIC8oaHApLisodGFibGV0KS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFAgVGFibGV0XG4gICAgICAgICAgICAvKGtpbmRsZSlcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtpbmRsZVxuICAgICAgICAgICAgL1xccyhub29rKVtcXHdcXHNdK2J1aWxkXFwvKFxcdyspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5vb2tcbiAgICAgICAgICAgIC8oZGVsbClcXHMoc3RyZWFba3ByXFxzXFxkXSpbXFxka29dKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGwgU3RyZWFrXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8oa2ZbQS16XSspXFxzYnVpbGRcXC8uK3NpbGtcXC8vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2luZGxlIEZpcmUgSERcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FtYXpvbiddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC8oc2R8a2YpWzAzNDloaWpvcnN0dXddK1xcc2J1aWxkXFwvLitzaWxrXFwvL2kgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZSBQaG9uZVxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgbWFwcGVyLnN0ciwgbWFwcy5kZXZpY2UuYW1hem9uLm1vZGVsXSwgW1ZFTkRPUiwgJ0FtYXpvbiddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9hbmRyb2lkLithZnQoW2Jtc10pXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmUgVFZcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FtYXpvbiddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG5cbiAgICAgICAgICAgIC9cXCgoaXBbaG9uZWR8XFxzXFx3Kl0rKTsuKyhhcHBsZSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaVBvZC9pUGhvbmVcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgVkVORE9SLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXCgoaXBbaG9uZWR8XFxzXFx3Kl0rKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaVBvZC9pUGhvbmVcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0FwcGxlJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvKGJsYWNrYmVycnkpW1xccy1dPyhcXHcrKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeVxuICAgICAgICAgICAgLyhibGFja2JlcnJ5fGJlbnF8cGFsbSg/PVxcLSl8c29ueWVyaWNzc29ufGFjZXJ8YXN1c3xkZWxsfG1laXp1fG1vdG9yb2xhfHBvbHl0cm9uKVtcXHNfLV0/KFtcXHctXSopL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJlblEvUGFsbS9Tb255LUVyaWNzc29uL0FjZXIvQXN1cy9EZWxsL01laXp1L01vdG9yb2xhL1BvbHl0cm9uXG4gICAgICAgICAgICAvKGhwKVxccyhbXFx3XFxzXStcXHcpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIUCBpUEFRXG4gICAgICAgICAgICAvKGFzdXMpLT8oXFx3KykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3VzXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvXFwoYmIxMDtcXHMoXFx3KykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrQmVycnkgMTBcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0JsYWNrQmVycnknXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzdXMgVGFibGV0c1xuICAgICAgICAgICAgL2FuZHJvaWQuKyh0cmFuc2ZvW3ByaW1lXFxzXXs0LDEwfVxcc1xcdyt8ZWVlcGN8c2xpZGVyXFxzXFx3K3xuZXh1cyA3fHBhZGZvbmV8cDAwYykvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQXN1cyddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLyhzb255KVxccyh0YWJsZXRcXHNbcHNdKVxcc2J1aWxkXFwvL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvbnlcbiAgICAgICAgICAgIC8oc29ueSk/KD86c2dwLispXFxzYnVpbGRcXC8vaVxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdTb255J10sIFtNT0RFTCwgJ1hwZXJpYSBUYWJsZXQnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvYW5kcm9pZC4rXFxzKFtjLWddXFxkezR9fHNvWy1sXVxcdyspKD89XFxzYnVpbGRcXC98XFwpLitjaHJvbWVcXC8oPyFbMS02XXswLDF9XFxkXFwuKSkvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU29ueSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL1xccyhvdXlhKVxccy9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE91eWFcbiAgICAgICAgICAgIC8obmludGVuZG8pXFxzKFt3aWRzM3VdKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5pbnRlbmRvXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIENPTlNPTEVdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rO1xccyhzaGllbGQpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTnZpZGlhXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdOdmlkaWEnXSwgW1RZUEUsIENPTlNPTEVdXSwgW1xuXG4gICAgICAgICAgICAvKHBsYXlzdGF0aW9uXFxzWzM0cG9ydGFibGV2aV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGF5c3RhdGlvblxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU29ueSddLCBbVFlQRSwgQ09OU09MRV1dLCBbXG5cbiAgICAgICAgICAgIC8oc3ByaW50XFxzKFxcdyspKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTcHJpbnQgUGhvbmVzXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgbWFwcGVyLnN0ciwgbWFwcy5kZXZpY2Uuc3ByaW50LnZlbmRvcl0sIFtNT0RFTCwgbWFwcGVyLnN0ciwgbWFwcy5kZXZpY2Uuc3ByaW50Lm1vZGVsXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8oaHRjKVs7X1xccy1dKyhbXFx3XFxzXSsoPz1cXCl8XFxzYnVpbGQpfFxcdyspL2ksICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFRDXG4gICAgICAgICAgICAvKHp0ZSktKFxcdyopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBaVEVcbiAgICAgICAgICAgIC8oYWxjYXRlbHxnZWVrc3Bob25lfG5leGlhbnxwYW5hc29uaWN8KD89O1xccylzb255KVtfXFxzLV0/KFtcXHctXSopL2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQWxjYXRlbC9HZWVrc1Bob25lL05leGlhbi9QYW5hc29uaWMvU29ueVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgW01PREVMLCAvXy9nLCAnICddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLyhuZXh1c1xcczkpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSFRDIE5leHVzIDlcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0hUQyddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2RcXC9odWF3ZWkoW1xcd1xccy1dKylbO1xcKV0vaSxcbiAgICAgICAgICAgIC8obmV4dXNcXHM2cCkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEh1YXdlaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnSHVhd2VpJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvKG1pY3Jvc29mdCk7XFxzKGx1bWlhW1xcc1xcd10rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBMdW1pYVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvW1xcc1xcKDtdKHhib3goPzpcXHNvbmUpPylbXFxzXFwpO10vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWljcm9zb2Z0IFhib3hcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ01pY3Jvc29mdCddLCBbVFlQRSwgQ09OU09MRV1dLCBbXG4gICAgICAgICAgICAvKGtpblxcLltvbmV0d117M30pL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaWNyb3NvZnQgS2luXG4gICAgICAgICAgICBdLCBbW01PREVMLCAvXFwuL2csICcgJ10sIFtWRU5ET1IsICdNaWNyb3NvZnQnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTW90b3JvbGFcbiAgICAgICAgICAgIC9cXHMobWlsZXN0b25lfGRyb2lkKD86WzItNHhdfFxccyg/OmJpb25pY3x4Mnxwcm98cmF6cikpPzo/KFxcczRnKT8pW1xcd1xcc10rYnVpbGRcXC8vaSxcbiAgICAgICAgICAgIC9tb3RbXFxzLV0/KFxcdyopL2ksXG4gICAgICAgICAgICAvKFhUXFxkezMsNH0pIGJ1aWxkXFwvL2ksXG4gICAgICAgICAgICAvKG5leHVzXFxzNikvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTW90b3JvbGEnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvYW5kcm9pZC4rXFxzKG16NjBcXGR8eG9vbVtcXHMyXXswLDJ9KVxcc2J1aWxkXFwvL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ01vdG9yb2xhJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvaGJidHZcXC9cXGQrXFwuXFxkK1xcLlxcZCtcXHMrXFwoW1xcd1xcc10qO1xccyooXFx3W147XSopOyhbXjtdKikvaSAgICAgICAgICAgIC8vIEhiYlRWIGRldmljZXNcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCB1dGlsLnRyaW1dLCBbTU9ERUwsIHV0aWwudHJpbV0sIFtUWVBFLCBTTUFSVFRWXV0sIFtcblxuICAgICAgICAgICAgL2hiYnR2LittYXBsZTsoXFxkKykvaVxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgL14vLCAnU21hcnRUViddLCBbVkVORE9SLCAnU2Ftc3VuZyddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG5cbiAgICAgICAgICAgIC9cXChkdHZbXFwpO10uKyhhcXVvcykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTaGFycFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU2hhcnAnXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rKChzY2gtaVs4OV0wXFxkfHNody1tMzgwc3xndC1wXFxkezR9fGd0LW5cXGQrfHNnaC10OFs1Nl05fG5leHVzIDEwKSkvaSxcbiAgICAgICAgICAgIC8oKFNNLVRcXHcrKSkvaVxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdTYW1zdW5nJ10sIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFsgICAgICAgICAgICAgICAgICAvLyBTYW1zdW5nXG4gICAgICAgICAgICAvc21hcnQtdHYuKyhzYW1zdW5nKS9pXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBbVFlQRSwgU01BUlRUVl0sIE1PREVMXSwgW1xuICAgICAgICAgICAgLygoc1tjZ3BdaC1cXHcrfGd0LVxcdyt8Z2FsYXh5XFxzbmV4dXN8c20tXFx3W1xcd1xcZF0rKSkvaSxcbiAgICAgICAgICAgIC8oc2FtW3N1bmddKilbXFxzLV0qKFxcdystP1tcXHctXSopL2ksXG4gICAgICAgICAgICAvc2VjLSgoc2doXFx3KykpL2lcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnU2Ftc3VuZyddLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC9zaWUtKFxcdyopL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNpZW1lbnNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1NpZW1lbnMnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8obWFlbW98bm9raWEpLioobjkwMHxsdW1pYVxcc1xcZCspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOb2tpYVxuICAgICAgICAgICAgLyhub2tpYSlbXFxzXy1dPyhbXFx3LV0qKS9pXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ05va2lhJ10sIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWRbeFxcZFxcLlxccztdK1xccyhbYWJdWzEtN11cXC0/WzAxNzhhXVxcZFxcZD8pL2kgICAgICAgICAgICAgICAgICAgLy8gQWNlclxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQWNlciddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuKyhbdmxda1xcLT9cXGR7M30pXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMRyBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0xHJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgL2FuZHJvaWRcXHMzXFwuW1xcc1xcdzstXXsxMH0obGc/KS0oWzA2Y3Y5XXszLDR9KS9pICAgICAgICAgICAgICAgICAgICAgLy8gTEcgVGFibGV0XG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ0xHJ10sIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC8obGcpIG5ldGNhc3RcXC50di9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExHIFNtYXJ0VFZcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgU01BUlRUVl1dLCBbXG4gICAgICAgICAgICAvKG5leHVzXFxzWzQ1XSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMR1xuICAgICAgICAgICAgL2xnW2U7XFxzXFwvLV0rKFxcdyopL2ksXG4gICAgICAgICAgICAvYW5kcm9pZC4rbGcoXFwtP1tcXGRcXHddKylcXHMrYnVpbGQvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTEcnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8obGVub3ZvKVxccz8ocyg/OjUwMDB8NjAwMCkoPzpbXFx3LV0rKXx0YWIoPzpbXFxzXFx3XSspKS9pICAgICAgICAgICAgIC8vIExlbm92byB0YWJsZXRzXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvYW5kcm9pZC4rKGlkZWF0YWJbYS16MC05XFwtXFxzXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGVub3ZvXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdMZW5vdm8nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvKGxlbm92bylbX1xccy1dPyhbXFx3LV0rKS9pXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC9saW51eDsuKygoam9sbGEpKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSm9sbGFcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLygocGViYmxlKSlhcHBcXC9bXFxkXFwuXStcXHMvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGViYmxlXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIFdFQVJBQkxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuKztcXHMob3BwbylcXHM/KFtcXHdcXHNdKylcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9QUE9cbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2Nya2V5L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgQ2hyb21lY2FzdFxuICAgICAgICAgICAgXSwgW1tNT0RFTCwgJ0Nocm9tZWNhc3QnXSwgW1ZFTkRPUiwgJ0dvb2dsZSddXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rO1xccyhnbGFzcylcXHNcXGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBHbGFzc1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnR29vZ2xlJ10sIFtUWVBFLCBXRUFSQUJMRV1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKHBpeGVsIGMpW1xccyldL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgUGl4ZWwgQ1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnR29vZ2xlJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rO1xccyhwaXhlbCggWzIzXSk/KCB4bCk/KVtcXHMpXS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR29vZ2xlIFBpeGVsXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdHb29nbGUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKFxcdyspXFxzK2J1aWxkXFwvaG1cXDEvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBYaWFvbWkgSG9uZ21pICdudW1lcmljJyBtb2RlbHNcbiAgICAgICAgICAgIC9hbmRyb2lkLisoaG1bXFxzXFwtX10qbm90ZT9bXFxzX10qKD86XFxkXFx3KT8pXFxzK2J1aWxkL2ksICAgICAgICAgICAgICAgLy8gWGlhb21pIEhvbmdtaVxuICAgICAgICAgICAgL2FuZHJvaWQuKyhtaVtcXHNcXC1fXSooPzphXFxkfG9uZXxvbmVbXFxzX11wbHVzfG5vdGUgbHRlKT9bXFxzX10qKD86XFxkP1xcdz8pW1xcc19dKig/OnBsdXMpPylcXHMrYnVpbGQvaSwgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFhpYW9taSBNaVxuICAgICAgICAgICAgL2FuZHJvaWQuKyhyZWRtaVtcXHNcXC1fXSooPzpub3RlKT8oPzpbXFxzX10qW1xcd1xcc10rKSlcXHMrYnVpbGQvaSAgICAgICAvLyBSZWRtaSBQaG9uZXNcbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIC9fL2csICcgJ10sIFtWRU5ET1IsICdYaWFvbWknXSwgW1RZUEUsIE1PQklMRV1dLCBbXG4gICAgICAgICAgICAvYW5kcm9pZC4rKG1pW1xcc1xcLV9dKig/OnBhZCkoPzpbXFxzX10qW1xcd1xcc10rKSlcXHMrYnVpbGQvaSAgICAgICAgICAgIC8vIE1pIFBhZCB0YWJsZXRzXG4gICAgICAgICAgICBdLFtbTU9ERUwsIC9fL2csICcgJ10sIFtWRU5ET1IsICdYaWFvbWknXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvYW5kcm9pZC4rO1xccyhtWzEtNV1cXHNub3RlKVxcc2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1laXp1XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdNZWl6dSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC8obXopLShbXFx3LV17Mix9KS9pXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ01laXp1J10sIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK2EwMDAoMSlcXHMrYnVpbGQvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT25lUGx1c1xuICAgICAgICAgICAgL2FuZHJvaWQuK29uZXBsdXNcXHMoYVxcZHs0fSlcXHMrYnVpbGQvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnT25lUGx1cyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooUkNUW1xcZFxcd10rKVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJDQSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdSQ0EnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL1xcc10rKFZlbnVlW1xcZFxcc117Miw3fSlcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAvLyBEZWxsIFZlbnVlIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0RlbGwnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKFFbVHxNXVtcXGRcXHddKylcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBWZXJpem9uIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnVmVyaXpvbiddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccysoQmFybmVzWyZcXHNdK05vYmxlXFxzK3xCTltSVF0pKFY/LiopXFxzK2J1aWxkL2kgICAgIC8vIEJhcm5lcyAmIE5vYmxlIFRhYmxldFxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdCYXJuZXMgJiBOb2JsZSddLCBNT0RFTCwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMrKFRNXFxkezN9LipcXGIpXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCYXJuZXMgJiBOb2JsZSBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ051VmlzaW9uJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rO1xccyhrODgpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWlRFIEsgU2VyaWVzIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWlRFJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKihnZW5cXGR7M30pXFxzK2J1aWxkLio0OWgvaSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2lzcyBHRU4gTW9iaWxlXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTd2lzcyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooenVyXFxkezN9KVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3dpc3MgWlVSIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU3dpc3MnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKChaZWtpKT9UQi4qXFxiKVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFpla2kgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnWmVraSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLyhhbmRyb2lkKS4rWztcXC9dXFxzKyhbWVJdXFxkezJ9KVxccytidWlsZC9pLFxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccysoRHJhZ29uW1xcLVxcc10rVG91Y2hcXHMrfERUKShcXHd7NX0pXFxzYnVpbGQvaSAgICAgICAgLy8gRHJhZ29uIFRvdWNoIFRhYmxldFxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdEcmFnb24gVG91Y2gnXSwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKihOUy0/XFx3ezAsOX0pXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbnNpZ25pYSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdJbnNpZ25pYSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooKE5YfE5leHQpLT9cXHd7MCw5fSlcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgLy8gTmV4dEJvb2sgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTmV4dEJvb2snXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKFh0cmVtZVxcXyk/KFYoMVswNDVdfDJbMDE1XXwzMHw0MHw2MHw3WzA1XXw5MCkpXFxzK2J1aWxkL2lcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnVm9pY2UnXSwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgWyAgICAgICAgICAgICAgICAgICAgLy8gVm9pY2UgWHRyZW1lIFBob25lc1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKihMVlRFTFxcLSk/KFYxWzEyXSlcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgIC8vIEx2VGVsIFBob25lc1xuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdMdlRlbCddLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKFBILTEpXFxzL2lcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0Vzc2VudGlhbCddLCBbVFlQRSwgTU9CSUxFXV0sIFsgICAgICAgICAgICAgICAgLy8gRXNzZW50aWFsIFBILTFcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooVigxMDBNRHw3MDBOQXw3MDExfDkxN0cpLipcXGIpXFxzK2J1aWxkL2kgICAgICAgICAgLy8gRW52aXplbiBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdFbnZpemVuJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKihMZVtcXHNcXC1dK1BhbilbXFxzXFwtXSsoXFx3ezEsOX0pXFxzK2J1aWxkL2kgICAgICAgICAgLy8gTGUgUGFuIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooVHJpb1tcXHNcXC1dKi4qKVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hY2hTcGVlZCBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdNYWNoU3BlZWQnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKFRyaW5pdHkpW1xcLVxcc10qKFRcXGR7M30pXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgLy8gVHJpbml0eSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqVFVfKDE0OTEpXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUm90b3IgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnUm90b3InXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLisoS1MoLispKVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFtYXpvbiBLaW5kbGUgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQW1hem9uJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rKEdpZ2FzZXQpW1xcc1xcLV0rKFFcXHd7MSw5fSlcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAvLyBHaWdhc2V0IFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL1xccyh0YWJsZXR8dGFiKVs7XFwvXS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuaWRlbnRpZmlhYmxlIFRhYmxldFxuICAgICAgICAgICAgL1xccyhtb2JpbGUpKD86WztcXC9dfFxcc3NhZmFyaSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVbmlkZW50aWZpYWJsZSBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtbVFlQRSwgdXRpbC5sb3dlcml6ZV0sIFZFTkRPUiwgTU9ERUxdLCBbXG5cbiAgICAgICAgICAgIC9bXFxzXFwvXFwoXShzbWFydC0/dHYpWztcXCldL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNtYXJ0VFZcbiAgICAgICAgICAgIF0sIFtbVFlQRSwgU01BUlRUVl1dLCBbXG5cbiAgICAgICAgICAgIC8oYW5kcm9pZFtcXHdcXC5cXHNcXC1dezAsOX0pOy4rYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyaWMgQW5kcm9pZCBEZXZpY2VcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0dlbmVyaWMnXV1cbiAgICAgICAgXSxcblxuICAgICAgICBlbmdpbmUgOiBbW1xuXG4gICAgICAgICAgICAvd2luZG93cy4rXFxzZWRnZVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFZGdlSFRNTFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnRWRnZUhUTUwnXV0sIFtcblxuICAgICAgICAgICAgL3dlYmtpdFxcLzUzN1xcLjM2LitjaHJvbWVcXC8oPyEyNykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGlua1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnQmxpbmsnXV0sIFtcblxuICAgICAgICAgICAgLyhwcmVzdG8pXFwvKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQcmVzdG9cbiAgICAgICAgICAgIC8od2Via2l0fHRyaWRlbnR8bmV0ZnJvbnR8bmV0c3VyZnxhbWF5YXxseW54fHczbXxnb2FubmEpXFwvKFtcXHdcXC5dKykvaSwgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZWJLaXQvVHJpZGVudC9OZXRGcm9udC9OZXRTdXJmL0FtYXlhL0x5bngvdzNtL0dvYW5uYVxuICAgICAgICAgICAgLyhraHRtbHx0YXNtYW58bGlua3MpW1xcL1xcc11cXCg/KFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEtIVE1ML1Rhc21hbi9MaW5rc1xuICAgICAgICAgICAgLyhpY2FiKVtcXC9cXHNdKFsyM11cXC5bXFxkXFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlDYWJcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvcnZcXDooW1xcd1xcLl17MSw5fSkuKyhnZWNrbykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdlY2tvXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgTkFNRV1cbiAgICAgICAgXSxcblxuICAgICAgICBvcyA6IFtbXG5cbiAgICAgICAgICAgIC8vIFdpbmRvd3MgYmFzZWRcbiAgICAgICAgICAgIC9taWNyb3NvZnRcXHMod2luZG93cylcXHModmlzdGF8eHApL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3dzIChpVHVuZXMpXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8od2luZG93cylcXHNudFxcczZcXC4yO1xccyhhcm0pL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdpbmRvd3MgUlRcbiAgICAgICAgICAgIC8od2luZG93c1xcc3Bob25lKD86XFxzb3MpKilbXFxzXFwvXT8oW1xcZFxcLlxcc1xcd10qKS9pLCAgICAgICAgICAgICAgICAgICAvLyBXaW5kb3dzIFBob25lXG4gICAgICAgICAgICAvKHdpbmRvd3NcXHNtb2JpbGV8d2luZG93cylbXFxzXFwvXT8oW250Y2VcXGRcXC5cXHNdK1xcdykvaVxuICAgICAgICAgICAgXSwgW05BTUUsIFtWRVJTSU9OLCBtYXBwZXIuc3RyLCBtYXBzLm9zLndpbmRvd3MudmVyc2lvbl1dLCBbXG4gICAgICAgICAgICAvKHdpbig/PTN8OXxuKXx3aW5cXHM5eFxccykoW250XFxkXFwuXSspL2lcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ1dpbmRvd3MnXSwgW1ZFUlNJT04sIG1hcHBlci5zdHIsIG1hcHMub3Mud2luZG93cy52ZXJzaW9uXV0sIFtcblxuICAgICAgICAgICAgLy8gTW9iaWxlL0VtYmVkZGVkIE9TXG4gICAgICAgICAgICAvXFwoKGJiKSgxMCk7L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja0JlcnJ5IDEwXG4gICAgICAgICAgICBdLCBbW05BTUUsICdCbGFja0JlcnJ5J10sIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKGJsYWNrYmVycnkpXFx3KlxcLz8oW1xcd1xcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja2JlcnJ5XG4gICAgICAgICAgICAvKHRpemVuKVtcXC9cXHNdKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBUaXplblxuICAgICAgICAgICAgLyhhbmRyb2lkfHdlYm9zfHBhbG1cXHNvc3xxbnh8YmFkYXxyaW1cXHN0YWJsZXRcXHNvc3xtZWVnb3xzYWlsZmlzaHxjb250aWtpKVtcXC9cXHMtXT8oW1xcd1xcLl0qKS9pXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFuZHJvaWQvV2ViT1MvUGFsbS9RTlgvQmFkYS9SSU0vTWVlR28vQ29udGlraS9TYWlsZmlzaCBPU1xuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvKHN5bWJpYW5cXHM/b3N8c3ltYm9zfHM2MCg/PTspKVtcXC9cXHMtXT8oW1xcd1xcLl0qKS9pICAgICAgICAgICAgICAgICAgLy8gU3ltYmlhblxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnU3ltYmlhbiddLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgL1xcKChzZXJpZXM0MCk7L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2VyaWVzIDQwXG4gICAgICAgICAgICBdLCBbTkFNRV0sIFtcbiAgICAgICAgICAgIC9tb3ppbGxhLitcXChtb2JpbGU7LitnZWNrby4rZmlyZWZveC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3ggT1NcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0ZpcmVmb3ggT1MnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLy8gQ29uc29sZVxuICAgICAgICAgICAgLyhuaW50ZW5kb3xwbGF5c3RhdGlvbilcXHMoW3dpZHMzNHBvcnRhYmxldnVdKykvaSwgICAgICAgICAgICAgICAgICAgLy8gTmludGVuZG8vUGxheXN0YXRpb25cblxuICAgICAgICAgICAgLy8gR05VL0xpbnV4IGJhc2VkXG4gICAgICAgICAgICAvKG1pbnQpW1xcL1xcc1xcKF0/KFxcdyopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaW50XG4gICAgICAgICAgICAvKG1hZ2VpYXx2ZWN0b3JsaW51eClbO1xcc10vaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWdlaWEvVmVjdG9yTGludXhcbiAgICAgICAgICAgIC8oam9saXxba3hsbl0/dWJ1bnR1fGRlYmlhbnxzdXNlfG9wZW5zdXNlfGdlbnRvb3woPz1cXHMpYXJjaHxzbGFja3dhcmV8ZmVkb3JhfG1hbmRyaXZhfGNlbnRvc3xwY2xpbnV4b3N8cmVkaGF0fHplbndhbGt8bGlucHVzKVtcXC9cXHMtXT8oPyFjaHJvbSkoW1xcd1xcLi1dKikvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSm9saS9VYnVudHUvRGViaWFuL1NVU0UvR2VudG9vL0FyY2gvU2xhY2t3YXJlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZlZG9yYS9NYW5kcml2YS9DZW50T1MvUENMaW51eE9TL1JlZEhhdC9aZW53YWxrL0xpbnB1c1xuICAgICAgICAgICAgLyhodXJkfGxpbnV4KVxccz8oW1xcd1xcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIdXJkL0xpbnV4XG4gICAgICAgICAgICAvKGdudSlcXHM/KFtcXHdcXC5dKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdOVVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oY3JvcylcXHNbXFx3XStcXHMoW1xcd1xcLl0rXFx3KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21pdW0gT1NcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0Nocm9taXVtIE9TJ10sIFZFUlNJT05dLFtcblxuICAgICAgICAgICAgLy8gU29sYXJpc1xuICAgICAgICAgICAgLyhzdW5vcylcXHM/KFtcXHdcXC5cXGRdKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29sYXJpc1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnU29sYXJpcyddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvLyBCU0QgYmFzZWRcbiAgICAgICAgICAgIC9cXHMoW2ZyZW50b3BjLV17MCw0fWJzZHxkcmFnb25mbHkpXFxzPyhbXFx3XFwuXSopL2kgICAgICAgICAgICAgICAgICAgIC8vIEZyZWVCU0QvTmV0QlNEL09wZW5CU0QvUEMtQlNEL0RyYWdvbkZseVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLFtcblxuICAgICAgICAgICAgLyhoYWlrdSlcXHMoXFx3KykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhhaWt1XG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sW1xuXG4gICAgICAgICAgICAvY2ZuZXR3b3JrXFwvLitkYXJ3aW4vaSxcbiAgICAgICAgICAgIC9pcFtob25lYWRdezIsNH0oPzouKm9zXFxzKFtcXHddKylcXHNsaWtlXFxzbWFjfDtcXHNvcGVyYSkvaSAgICAgICAgICAgICAvLyBpT1NcbiAgICAgICAgICAgIF0sIFtbVkVSU0lPTiwgL18vZywgJy4nXSwgW05BTUUsICdpT1MnXV0sIFtcblxuICAgICAgICAgICAgLyhtYWNcXHNvc1xcc3gpXFxzPyhbXFx3XFxzXFwuXSopL2ksXG4gICAgICAgICAgICAvKG1hY2ludG9zaHxtYWMoPz1fcG93ZXJwYylcXHMpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNYWMgT1NcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ01hYyBPUyddLCBbVkVSU0lPTiwgL18vZywgJy4nXV0sIFtcblxuICAgICAgICAgICAgLy8gT3RoZXJcbiAgICAgICAgICAgIC8oKD86b3Blbik/c29sYXJpcylbXFwvXFxzLV0/KFtcXHdcXC5dKikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvbGFyaXNcbiAgICAgICAgICAgIC8oYWl4KVxccygoXFxkKSg/PVxcLnxcXCl8XFxzKVtcXHdcXC5dKSovaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFJWFxuICAgICAgICAgICAgLyhwbGFuXFxzOXxtaW5peHxiZW9zfG9zXFwvMnxhbWlnYW9zfG1vcnBob3N8cmlzY1xcc29zfG9wZW52bXN8ZnVjaHNpYSkvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUGxhbjkvTWluaXgvQmVPUy9PUzIvQW1pZ2FPUy9Nb3JwaE9TL1JJU0NPUy9PcGVuVk1TL0Z1Y2hzaWFcbiAgICAgICAgICAgIC8odW5peClcXHM/KFtcXHdcXC5dKikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVU5JWFxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dXG4gICAgICAgIF1cbiAgICB9O1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIENvbnN0cnVjdG9yXG4gICAgLy8vLy8vLy8vLy8vLy8vL1xuICAgIHZhciBVQVBhcnNlciA9IGZ1bmN0aW9uICh1YXN0cmluZywgZXh0ZW5zaW9ucykge1xuXG4gICAgICAgIGlmICh0eXBlb2YgdWFzdHJpbmcgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICBleHRlbnNpb25zID0gdWFzdHJpbmc7XG4gICAgICAgICAgICB1YXN0cmluZyA9IHVuZGVmaW5lZDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICghKHRoaXMgaW5zdGFuY2VvZiBVQVBhcnNlcikpIHtcbiAgICAgICAgICAgIHJldHVybiBuZXcgVUFQYXJzZXIodWFzdHJpbmcsIGV4dGVuc2lvbnMpLmdldFJlc3VsdCgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHVhID0gdWFzdHJpbmcgfHwgKCh3aW5kb3cgJiYgd2luZG93Lm5hdmlnYXRvciAmJiB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCkgPyB3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudCA6IEVNUFRZKTtcbiAgICAgICAgdmFyIHJneG1hcCA9IGV4dGVuc2lvbnMgPyB1dGlsLmV4dGVuZChyZWdleGVzLCBleHRlbnNpb25zKSA6IHJlZ2V4ZXM7XG5cbiAgICAgICAgdGhpcy5nZXRCcm93c2VyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGJyb3dzZXIgPSB7IG5hbWU6IHVuZGVmaW5lZCwgdmVyc2lvbjogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICBtYXBwZXIucmd4LmNhbGwoYnJvd3NlciwgdWEsIHJneG1hcC5icm93c2VyKTtcbiAgICAgICAgICAgIGJyb3dzZXIubWFqb3IgPSB1dGlsLm1ham9yKGJyb3dzZXIudmVyc2lvbik7IC8vIGRlcHJlY2F0ZWRcbiAgICAgICAgICAgIHJldHVybiBicm93c2VyO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldENQVSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBjcHUgPSB7IGFyY2hpdGVjdHVyZTogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICBtYXBwZXIucmd4LmNhbGwoY3B1LCB1YSwgcmd4bWFwLmNwdSk7XG4gICAgICAgICAgICByZXR1cm4gY3B1O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldERldmljZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBkZXZpY2UgPSB7IHZlbmRvcjogdW5kZWZpbmVkLCBtb2RlbDogdW5kZWZpbmVkLCB0eXBlOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgIG1hcHBlci5yZ3guY2FsbChkZXZpY2UsIHVhLCByZ3htYXAuZGV2aWNlKTtcbiAgICAgICAgICAgIHJldHVybiBkZXZpY2U7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0RW5naW5lID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGVuZ2luZSA9IHsgbmFtZTogdW5kZWZpbmVkLCB2ZXJzaW9uOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgIG1hcHBlci5yZ3guY2FsbChlbmdpbmUsIHVhLCByZ3htYXAuZW5naW5lKTtcbiAgICAgICAgICAgIHJldHVybiBlbmdpbmU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0T1MgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgb3MgPSB7IG5hbWU6IHVuZGVmaW5lZCwgdmVyc2lvbjogdW5kZWZpbmVkIH07XG4gICAgICAgICAgICBtYXBwZXIucmd4LmNhbGwob3MsIHVhLCByZ3htYXAub3MpO1xuICAgICAgICAgICAgcmV0dXJuIG9zO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFJlc3VsdCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgdWEgICAgICA6IHRoaXMuZ2V0VUEoKSxcbiAgICAgICAgICAgICAgICBicm93c2VyIDogdGhpcy5nZXRCcm93c2VyKCksXG4gICAgICAgICAgICAgICAgZW5naW5lICA6IHRoaXMuZ2V0RW5naW5lKCksXG4gICAgICAgICAgICAgICAgb3MgICAgICA6IHRoaXMuZ2V0T1MoKSxcbiAgICAgICAgICAgICAgICBkZXZpY2UgIDogdGhpcy5nZXREZXZpY2UoKSxcbiAgICAgICAgICAgICAgICBjcHUgICAgIDogdGhpcy5nZXRDUFUoKVxuICAgICAgICAgICAgfTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRVQSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1YTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5zZXRVQSA9IGZ1bmN0aW9uICh1YXN0cmluZykge1xuICAgICAgICAgICAgdWEgPSB1YXN0cmluZztcbiAgICAgICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgVUFQYXJzZXIuVkVSU0lPTiA9IExJQlZFUlNJT047XG4gICAgVUFQYXJzZXIuQlJPV1NFUiA9IHtcbiAgICAgICAgTkFNRSAgICA6IE5BTUUsXG4gICAgICAgIE1BSk9SICAgOiBNQUpPUiwgLy8gZGVwcmVjYXRlZFxuICAgICAgICBWRVJTSU9OIDogVkVSU0lPTlxuICAgIH07XG4gICAgVUFQYXJzZXIuQ1BVID0ge1xuICAgICAgICBBUkNISVRFQ1RVUkUgOiBBUkNISVRFQ1RVUkVcbiAgICB9O1xuICAgIFVBUGFyc2VyLkRFVklDRSA9IHtcbiAgICAgICAgTU9ERUwgICA6IE1PREVMLFxuICAgICAgICBWRU5ET1IgIDogVkVORE9SLFxuICAgICAgICBUWVBFICAgIDogVFlQRSxcbiAgICAgICAgQ09OU09MRSA6IENPTlNPTEUsXG4gICAgICAgIE1PQklMRSAgOiBNT0JJTEUsXG4gICAgICAgIFNNQVJUVFYgOiBTTUFSVFRWLFxuICAgICAgICBUQUJMRVQgIDogVEFCTEVULFxuICAgICAgICBXRUFSQUJMRTogV0VBUkFCTEUsXG4gICAgICAgIEVNQkVEREVEOiBFTUJFRERFRFxuICAgIH07XG4gICAgVUFQYXJzZXIuRU5HSU5FID0ge1xuICAgICAgICBOQU1FICAgIDogTkFNRSxcbiAgICAgICAgVkVSU0lPTiA6IFZFUlNJT05cbiAgICB9O1xuICAgIFVBUGFyc2VyLk9TID0ge1xuICAgICAgICBOQU1FICAgIDogTkFNRSxcbiAgICAgICAgVkVSU0lPTiA6IFZFUlNJT05cbiAgICB9O1xuXG4gICAgLy8vLy8vLy8vLy9cbiAgICAvLyBFeHBvcnRcbiAgICAvLy8vLy8vLy8vXG5cblxuICAgIC8vIGNoZWNrIGpzIGVudmlyb25tZW50XG4gICAgaWYgKHR5cGVvZihleHBvcnRzKSAhPT0gVU5ERUZfVFlQRSkge1xuICAgICAgICAvLyBub2RlanMgZW52XG4gICAgICAgIGlmICh0eXBlb2YgbW9kdWxlICE9PSBVTkRFRl9UWVBFICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgICAgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBVQVBhcnNlcjtcbiAgICAgICAgfVxuICAgICAgICBleHBvcnRzLlVBUGFyc2VyID0gVUFQYXJzZXI7XG4gICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmVxdWlyZWpzIGVudiAob3B0aW9uYWwpXG4gICAgICAgIGlmICh0eXBlb2YoZGVmaW5lKSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gICAgICAgICAgICBkZWZpbmUoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBVQVBhcnNlcjtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKHdpbmRvdykge1xuICAgICAgICAgICAgLy8gYnJvd3NlciBlbnZcbiAgICAgICAgICAgIHdpbmRvdy5VQVBhcnNlciA9IFVBUGFyc2VyO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLy8galF1ZXJ5L1plcHRvIHNwZWNpZmljIChvcHRpb25hbClcbiAgICAvLyBOb3RlOlxuICAgIC8vICAgSW4gQU1EIGVudiB0aGUgZ2xvYmFsIHNjb3BlIHNob3VsZCBiZSBrZXB0IGNsZWFuLCBidXQgalF1ZXJ5IGlzIGFuIGV4Y2VwdGlvbi5cbiAgICAvLyAgIGpRdWVyeSBhbHdheXMgZXhwb3J0cyB0byBnbG9iYWwgc2NvcGUsIHVubGVzcyBqUXVlcnkubm9Db25mbGljdCh0cnVlKSBpcyB1c2VkLFxuICAgIC8vICAgYW5kIHdlIHNob3VsZCBjYXRjaCB0aGF0LlxuICAgIHZhciAkID0gd2luZG93ICYmICh3aW5kb3cualF1ZXJ5IHx8IHdpbmRvdy5aZXB0byk7XG4gICAgaWYgKHR5cGVvZiAkICE9PSBVTkRFRl9UWVBFICYmICEkLnVhKSB7XG4gICAgICAgIHZhciBwYXJzZXIgPSBuZXcgVUFQYXJzZXIoKTtcbiAgICAgICAgJC51YSA9IHBhcnNlci5nZXRSZXN1bHQoKTtcbiAgICAgICAgJC51YS5nZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcGFyc2VyLmdldFVBKCk7XG4gICAgICAgIH07XG4gICAgICAgICQudWEuc2V0ID0gZnVuY3Rpb24gKHVhc3RyaW5nKSB7XG4gICAgICAgICAgICBwYXJzZXIuc2V0VUEodWFzdHJpbmcpO1xuICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHBhcnNlci5nZXRSZXN1bHQoKTtcbiAgICAgICAgICAgIGZvciAodmFyIHByb3AgaW4gcmVzdWx0KSB7XG4gICAgICAgICAgICAgICAgJC51YVtwcm9wXSA9IHJlc3VsdFtwcm9wXTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XG5cbn0pKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnID8gd2luZG93IDogdGhpcyk7XG4iLCJpbXBvcnQgUlRDQ2xpZW50IGZyb20gJy4vcnRjLWNsaWVudCc7XHJcbmltcG9ydCB7Z2V0RGV2aWNlcywgc2VyaWFsaXplRm9ybURhdGEsIHZhbGlkYXRvciwgcmVzb2x1dGlvbnMsIHNjcmVlblNoYXJlUmVzb2x1dGlvbnN9IGZyb20gJy4vY29tbW9uJztcclxuaW1wb3J0IFwiLi9hc3NldHMvc3R5bGUuc2Nzc1wiO1xyXG5pbXBvcnQgKiBhcyBNIGZyb20gJ21hdGVyaWFsaXplLWNzcyc7XHJcbmltcG9ydCB7c2V0Rm9ybURhdGEsIHBhcnNlRnJvbVNlYXJjaH0gZnJvbSAnLi9zZWFyY2hQYXJhbSc7XHJcblxyXG5sZXQgc2NyZWVuQXVkaW8gPSB0cnVlO1xyXG5cclxuJCgoKSA9PiB7ICBcclxuICBnZXREZXZpY2VzKGZ1bmN0aW9uIChkZXZpY2VzKSB7XHJcbiAgICBkZXZpY2VzLmF1ZGlvcy5mb3JFYWNoKGZ1bmN0aW9uIChhdWRpbykge1xyXG4gICAgICAkKCc8b3B0aW9uLz4nLCB7XHJcbiAgICAgICAgdmFsdWU6IGF1ZGlvLnZhbHVlLFxyXG4gICAgICAgIHRleHQ6IGF1ZGlvLm5hbWUsXHJcbiAgICAgIH0pLmFwcGVuZFRvKFwiI21pY3JvcGhvbmVJZFwiKTtcclxuICAgIH0pXHJcbiAgICBkZXZpY2VzLnZpZGVvcy5mb3JFYWNoKGZ1bmN0aW9uICh2aWRlbykge1xyXG4gICAgICAkKCc8b3B0aW9uLz4nLCB7XHJcbiAgICAgICAgdmFsdWU6IHZpZGVvLnZhbHVlLFxyXG4gICAgICAgIHRleHQ6IHZpZGVvLm5hbWUsXHJcbiAgICAgIH0pLmFwcGVuZFRvKFwiI2NhbWVyYUlkXCIpO1xyXG4gICAgfSlcclxuICAgIHNjcmVlblNoYXJlUmVzb2x1dGlvbnMuZm9yRWFjaChmdW5jdGlvbiAocmVzb2x1dGlvbikge1xyXG4gICAgICAkKCc8b3B0aW9uLz4nLCB7XHJcbiAgICAgICAgdmFsdWU6IHJlc29sdXRpb24udmFsdWUsXHJcbiAgICAgICAgdGV4dDogcmVzb2x1dGlvbi5uYW1lXHJcbiAgICAgIH0pLmFwcGVuZFRvKFwiI3NjcmVlblNoYXJlUmVzb2x1dGlvblwiKTtcclxuICAgIH0pXHJcbiAgICByZXNvbHV0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XHJcbiAgICAgICQoJzxvcHRpb24vPicsIHtcclxuICAgICAgICB2YWx1ZTogcmVzb2x1dGlvbi52YWx1ZSxcclxuICAgICAgICB0ZXh0OiByZXNvbHV0aW9uLm5hbWVcclxuICAgICAgfSkuYXBwZW5kVG8oXCIjY2FtZXJhUmVzb2x1dGlvblwiKTtcclxuICAgIH0pXHJcbiAgICBNLkF1dG9Jbml0KCk7XHJcbiAgfSlcclxuXHJcbiAgY29uc3QgZmllbGRzID0gWydhcHBJRCcsICdjaGFubmVsJ107XHJcblxyXG4gIGxldCBydGMgPSBuZXcgUlRDQ2xpZW50KCk7XHJcblxyXG4gICQoXCIuYXV0b3BsYXktZmFsbGJhY2tcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpXHJcbiAgICBjb25zdCBpZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpLnNwbGl0KFwidmlkZW9fYXV0b3BsYXlfXCIpWzFdXHJcbiAgICBjb25zb2xlLmxvZyhcImF1dG9wbGF5IGZhbGxiYWNrXCIpXHJcbiAgICBpZiAoaWQgPT09ICdsb2NhbCcpIHtcclxuICAgICAgcnRjLl9sb2NhbFN0cmVhbS5yZXN1bWUoKS50aGVuKCgpID0+IHtcclxuICAgICAgICBUb2FzdC5ub3RpY2UoXCJsb2NhbCByZXN1bWVcIilcclxuICAgICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcyhcImhpZGVcIilcclxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIFRvYXN0LmVycm9yKFwicmVzdW1lIGZhaWxlZCwgcGxlYXNlIG9wZW4gY29uc29sZSBzZWUgbW9yZSBkZXRhaWxzXCIpXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXHJcbiAgICAgIH0pXHJcbiAgICAgIHJldHVybjtcclxuICAgIH1cclxuICAgIGNvbnN0IHJlbW90ZVN0cmVhbSA9IHJ0Yy5fcmVtb3RlU3RyZWFtcy5maW5kKChpdGVtKSA9PiBgJHtpdGVtLmdldElkKCl9YCA9PSBpZClcclxuICAgIGlmIChyZW1vdGVTdHJlYW0pIHtcclxuICAgICAgcmVtb3RlU3RyZWFtLnJlc3VtZSgpLnRoZW4oKCkgPT4ge1xyXG4gICAgICAgIFRvYXN0Lm5vdGljZShcInJlbW90ZSByZXN1bWVcIilcclxuICAgICAgICAkKGUudGFyZ2V0KS5hZGRDbGFzcyhcImhpZGVcIilcclxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIFRvYXN0LmVycm9yKFwicmVzdW1lIGZhaWxlZCwgcGxlYXNlIG9wZW4gY29uc29sZSBzZWUgbW9yZSBkZXRhaWxzXCIpXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpXHJcbiAgICAgIH0pXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgJChcIiNzaG93X3Byb2ZpbGVcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIHJ0Yy5zZXROZXR3b3JrUXVhbGl0eUFuZFN0cmVhbVN0YXRzKHRoaXMuY2hlY2tlZCk7XHJcbiAgfSlcclxuXHJcbiAgJChcIiNqb2luXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnNvbGUubG9nKFwiam9pbiBjbGlja2VkXCIpXHJcbiAgICBjb25zdCBwYXJhbXMgPSBzZXJpYWxpemVGb3JtRGF0YSgpO1xyXG4gICAgaWYgKHZhbGlkYXRvcihwYXJhbXMsIGZpZWxkcykpIHtcclxuICAgICAgcnRjLmpvaW4ocGFyYW1zKS50aGVuKCgpID0+IHtcclxuICAgICAgICBydGMucHVibGlzaCgpO1xyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gICQoXCIjZW5hYmxlX2F1ZGlvXCIpLm9uKFwiY2hhbmdlXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBzY3JlZW5BdWRpbyA9IHRoaXMuY2hlY2tlZDtcclxuICB9KTtcclxuICAkKFwiI2pvaW5TY3JlZW5TaGFyZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zb2xlLmxvZyhcImpvaW5TY3JlZW5TaGFyZSBjbGlja2VkXCIpXHJcbiAgICBjb25zdCBwYXJhbXMgPSBzZXJpYWxpemVGb3JtRGF0YSgpO1xyXG4gICAgaWYgKHZhbGlkYXRvcihwYXJhbXMsIGZpZWxkcykpIHtcclxuICAgICAgcnRjLmpvaW5TY3JlZW5TaGFyaW5nKHsuLi5wYXJhbXMsIHNjcmVlbkF1ZGlvfSkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgcnRjLnB1Ymxpc2goKTtcclxuICAgICAgfSlcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAkKFwiI3B1Ymxpc2hcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc29sZS5sb2coXCJzdGFydExpdmVTdHJlYW1pbmdcIilcclxuICAgIGNvbnN0IHBhcmFtcyA9IHNlcmlhbGl6ZUZvcm1EYXRhKCk7XHJcbiAgICBpZiAodmFsaWRhdG9yKHBhcmFtcywgZmllbGRzKSkge1xyXG4gICAgICBydGMucHVibGlzaCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKFwiI3VucHVibGlzaFwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zb2xlLmxvZyhcInN0b3BMaXZlU3RyZWFtaW5nXCIpXHJcbiAgICBjb25zdCBwYXJhbXMgPSBzZXJpYWxpemVGb3JtRGF0YSgpO1xyXG4gICAgaWYgKHZhbGlkYXRvcihwYXJhbXMsIGZpZWxkcykpIHtcclxuICAgICAgcnRjLnVucHVibGlzaCgpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAkKFwiI2xlYXZlXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIGNvbnNvbGUubG9nKFwibGVhdmVcIilcclxuICAgIGNvbnN0IHBhcmFtcyA9IHNlcmlhbGl6ZUZvcm1EYXRhKCk7XHJcbiAgICBpZiAodmFsaWRhdG9yKHBhcmFtcywgZmllbGRzKSkge1xyXG4gICAgICBydGMubGVhdmUoKTtcclxuICAgIH1cclxuICB9KTtcclxufSkiLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCJleHBvcnQgY29uc3QgcGFyc2VGcm9tU2VhcmNoID0gKCkgPT4ge1xyXG4gIGNvbnN0IHNlYXJjaFN0ciA9IHdpbmRvdy5sb2NhdGlvbi5zZWFyY2hcclxuICBjb25zdCBwYXJhbSA9IG5ldyBVUkxTZWFyY2hQYXJhbXMoc2VhcmNoU3RyKVxyXG4gIGxldCBtYXAgPSB7fVxyXG4gIGZvciAobGV0IGtleSBvZiBwYXJhbS5rZXlzKCkpIHtcclxuICAgIG1hcFtrZXldID0gcGFyYW0uZ2V0KGtleSlcclxuICB9XHJcbiAgcmV0dXJuIG1hcFxyXG59XHJcblxyXG5leHBvcnQgY29uc3Qgc3RyaW5naWZ5ID0gKG9iaikgPT4ge1xyXG4gIGNvbnN0IHN0ciA9IE9iamVjdC5lbnRyaWVzKG9iaikucmVkdWNlKChwcmUsIGN1cikgPT4ge1xyXG4gICAgcmV0dXJuIHByZSArIGAke2N1clswXX09JHtjdXJbMV19JmBcclxuICB9LCAnPycpXHJcbiAgcmV0dXJuIHN0ci5zbGljZSgwLCAtMSlcclxufVxyXG5cclxuZXhwb3J0IGNvbnN0IHNldEZvcm1EYXRhID0gKG9iaikgPT4ge1xyXG4gIE9iamVjdC5rZXlzKG9iaikubWFwKGtleSA9PiB7XHJcbiAgICBjb25zdCB0YXJnZXREb20gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGBbbmFtZT0ke2tleX1dYClcclxuICAgIGlmICh0YXJnZXREb20pIHtcclxuICAgICAgdGFyZ2V0RG9tLnZhbHVlID0gb2JqW2tleV1cclxuICAgIH1cclxuICB9KVxyXG59XHJcblxyXG5leHBvcnQgY29uc3QgcmVwbGFjZVNlYXJjaFN0cmluZyA9IChzZWFyY2hTdHIpID0+IHtcclxuICBpZiAod2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKSB7XHJcbiAgICBjb25zdCBuZXdVUkwgPSBuZXcgVVJMKHdpbmRvdy5sb2NhdGlvbi5ocmVmKTtcclxuICAgIG5ld1VSTC5zZWFyY2ggPSBzZWFyY2hTdHI7XHJcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoeyBwYXRoOiBuZXdVUkwuaHJlZiB9LCBcIlwiLCBuZXdVUkwuaHJlZik7XHJcbiAgfSBlbHNlIHtcclxuICAgIGNvbnNvbGUud2FybignYGhpc3RvcnkucHVzaFN0YXRlYCBpcyBub3Qgc3VwcG9ydGVkJylcclxuICB9XHJcbn0iXSwic291cmNlUm9vdCI6IiJ9