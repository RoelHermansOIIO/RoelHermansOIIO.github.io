/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "/agora-demo/";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 6);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "g", function() { return resolutions; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "h", function() { return screenShareResolutions; });
/* unused harmony export isSafari */
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "d", function() { return isCompatibleChrome; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "e", function() { return isFirefox; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return Toast; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "j", function() { return validator; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "i", function() { return serializeFormData; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "b", function() { return addView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "f", function() { return removeView; });
/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "c", function() { return getDevices; });
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(3);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(materialize_css__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);
/* harmony import */ var ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(ua_parser_js__WEBPACK_IMPORTED_MODULE_2__);

console.log("AgoraRTC SDK VERSION: ", agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.VERSION);


var resolutions = [{
  name: 'default',
  value: 'default'
}, {
  name: '480p',
  value: '480p'
}, {
  name: '720p',
  value: '720p'
}, {
  name: '1080p',
  value: '1080p'
}];
var screenShareResolutions = [{
  name: 'default',
  value: 'default'
}, {
  name: '480p_1',
  value: '480p_1'
}, {
  name: '720p_1',
  value: '720p_1'
}, {
  name: '1080p_1',
  value: '1080p_1'
}];
var parser = new ua_parser_js__WEBPACK_IMPORTED_MODULE_2___default.a();
var userAgentInfo = parser.getResult();
var isSafari = function isSafari() {
  return userAgentInfo.browser.name === 'Safari' || userAgentInfo.browser.name === 'Mobile Safari';
};
var isCompatibleChrome = function isCompatibleChrome() {
  if (userAgentInfo.browser.name === 'Chrome') {
    var major = +userAgentInfo.browser.major;
    if (major >= 72) return true;
  }

  return false;
};
var isFirefox = function isFirefox() {
  return userAgentInfo.browser.name === 'Firefox';
};

function Toastify(options) {
  materialize_css__WEBPACK_IMPORTED_MODULE_1__["toast"]({
    html: options.text,
    classes: options.classes
  });
}

var Toast = {
  info: function info(msg) {
    Toastify({
      text: msg,
      classes: "info-toast"
    });
  },
  notice: function notice(msg) {
    Toastify({
      text: msg,
      classes: "notice-toast"
    });
  },
  error: function error(msg) {
    Toastify({
      text: msg,
      classes: "error-toast"
    });
  }
};
function validator(formData, fields) {
  var keys = Object.keys(formData);

  for (var _i = 0, _keys = keys; _i < _keys.length; _i++) {
    var key = _keys[_i];

    if (fields.indexOf(key) != -1) {
      if (!formData[key]) {
        Toast.error("Please Enter " + key);
        return false;
      }
    }
  }

  return true;
}
function serializeFormData() {
  var formData = $("#form").serializeArray();
  var obj = {};
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = formData[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var item = _step.value;
      var key = item.name;
      var val = item.value;
      obj[key] = val;
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator["return"] != null) {
        _iterator["return"]();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  if (obj.uid != undefined && !Number.isNaN(+obj.uid)) {
    obj.uid = +obj.uid;
  }

  return obj;
}
function addView(id, show) {
  if (!$("#" + id)[0]) {
    $("<div/>", {
      id: "remote_video_panel_" + id,
      "class": "video-view"
    }).appendTo("#video");
    $("<div/>", {
      id: "remote_video_" + id,
      "class": "video-placeholder"
    }).appendTo("#remote_video_panel_" + id);
    $("<div/>", {
      id: "remote_video_info_" + id,
      "class": "video-profile " + (show ? "" : "hide")
    }).appendTo("#remote_video_panel_" + id);
    $("<div/>", {
      id: "video_autoplay_" + id,
      "class": "autoplay-fallback hide"
    }).appendTo("#remote_video_panel_" + id);
  }
}
function removeView(id) {
  if ($("#remote_video_panel_" + id)[0]) {
    $("#remote_video_panel_" + id).remove();
  }
}
function getDevices(next) {
  agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.getDevices(function (items) {
    items.filter(function (item) {
      return ['audioinput', 'videoinput'].indexOf(item.kind) !== -1;
    }).map(function (item) {
      return {
        name: item.label,
        value: item.deviceId,
        kind: item.kind
      };
    });
    var videos = [];
    var audios = [];

    for (var i = 0; i < items.length; i++) {
      var item = items[i];

      if ('videoinput' == item.kind) {
        var name = item.label;
        var value = item.deviceId;

        if (!name) {
          name = "camera-" + videos.length;
        }

        videos.push({
          name: name,
          value: value,
          kind: item.kind
        });
      }

      if ('audioinput' == item.kind) {
        var name = item.label;
        var value = item.deviceId;

        if (!name) {
          name = "microphone-" + audios.length;
        }

        audios.push({
          name: name,
          value: value,
          kind: item.kind
        });
      }
    }

    next({
      videos: videos,
      audios: audios
    });
  });
}
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)))

/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

/*! AgoraRTC|BUILD v3.0.0-0-g747f321 */
!function(e,t){ true?module.exports=t():undefined}(window,function(){return function(e){var t={};function n(i){if(t[i])return t[i].exports;var a=t[i]={i:i,l:!1,exports:{}};return e[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(i,a,function(t){return e[t]}.bind(null,a));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=34)}([function(e,t,n){"use strict";n.r(t);var i=n(8),a=n.n(i),r=n(9),o=n(3),s=n(2),c=0,d="free",u=[],l=[],p=0;setInterval(function(){Object(o.getParameter)("UPLOAD_LOG")&&f.info("console log upload")},9e5);var f=function(){var e,t,n,i,f,m,g="https://".concat(Object(o.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v1"),v=["DEBUG","INFO","WARNING","ERROR","NONE"],h=0,S=function e(t){d="uploading",setTimeout(function(){!function(e,t,n){var i;Array.isArray(e)||(e=[e]),e=e.map(function(e){return{log_item_id:c++,log_level:e.log_level,payload_str:e.payload}}),i={sdk_version:o.VERSION,process_id:Object(s.a)(),payload:JSON.stringify(e)};try{Object(r.post)(g,i,function(e){"OK"===e?t&&t(e):n&&n(e)},function(e){n&&n(e)},{withCredentials:!0})}catch(e){n&&n(e)}}(t,function(){p=0,0!==u.length?(l=u.length<10?u.splice(0,u.length):u.splice(0,10),e(l)):d="free"},function(){setTimeout(function(){e(l)},p++<2?200:1e4)})},3e3)};t=function(){for(var t=[0],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},n=function(){for(var t=[1],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},i=function(){for(var t=[2],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)},f=function(){for(var t=[3],n=0;n<arguments.length;n++)t.push(arguments[n]);e.apply(this,t)};var _={};return m=function(e){_[e]||(i.apply(void 0,arguments),_[e]=!0)},{DEBUG:0,INFO:1,WARNING:2,ERROR:3,NONE:4,enableLogUpload:function(){Object(o.setParameter)("UPLOAD_LOG",!0)},disableLogUpload:function(){Object(o.setParameter)("UPLOAD_LOG",!1)},setProxyServer:function(e){g=e?"https://".concat(e,"/ls/?h=").concat(Object(o.getParameter)("LOG_UPLOAD_SERVER"),"&p=443&d=upload/v1"):"https://".concat(Object(o.getParameter)("LOG_UPLOAD_SERVER"),"/upload/v1")},setLogLevel:function(e){e>4?e=4:e<0&&(e=0),h=e},log:e=function(){var e,t=arguments[0],n=arguments;if(n[0]=(e=new Date).toTimeString().split(" ")[0]+":"+e.getMilliseconds()+" Agora-SDK ["+(v[t]||"DEFAULT")+"]:",function(e,t){if(Object(o.getParameter)("UPLOAD_LOG"))try{t=Array.prototype.slice.call(t);var n="";t.forEach(function(e){"object"===a()(e)&&(e=JSON.stringify(e)),n=n+e+" "}),u.push({payload:n,log_level:e}),"free"===d&&(l=u.length<10?u.splice(0,u.length):u.splice(0,10),S(l))}catch(e){}}(t,n),!(t<h))switch(t){case 0:case 1:console.log.apply(console,n);break;case 2:console.warn.apply(console,n);break;case 3:console.error.apply(console,n);break;default:return void console.log.apply(console,n)}},debug:t,info:n,warning:i,deprecate:m,error:f}}();t.default=f},function(e,t,n){"use strict";n.r(t),n.d(t,"checkValidObject",function(){return o}),n.d(t,"checkValidString",function(){return s}),n.d(t,"checkValidNumber",function(){return c}),n.d(t,"checkValidFloatNumber",function(){return d}),n.d(t,"checkValidBoolean",function(){return u}),n.d(t,"checkValidEnum",function(){return r}),n.d(t,"isValidString",function(){return l}),n.d(t,"isValidNumber",function(){return p}),n.d(t,"isValidBoolean",function(){return m}),n.d(t,"isASCII",function(){return h}),n.d(t,"isInteger",function(){return S}),n.d(t,"isNumber",function(){return _}),n.d(t,"isString",function(){return E}),n.d(t,"isArray",function(){return I}),n.d(t,"isEmpty",function(){return y}),n.d(t,"isValidToken",function(){return g}),n.d(t,"isValidChannelName",function(){return v});var i=n(8),a=n.n(i),r=function(e,t,n){for(var i=0;i<n.length;i++)if(e===n[i])return!0;throw new Error("".concat(t," can only be set as ").concat(JSON.stringify(n)))},o=function(e,t){if(!e)throw new Error("Invalid param: ".concat(t||"param"," cannot be empty"));if("object"!==a()(e))throw new Error("".concat(t||"This paramter"," is of the object type"));return!0},s=function(e,t,n,i,a){if(y(n)&&(n=1),i=i||255,y(a)&&(a=!0),y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!l(e,n,i,a))throw new Error("Invalid ".concat(t||"string param",": Length of the string: [").concat(n,",").concat(i,"].").concat(a?" ASCII characters only.":""))},c=function(e,t,n,i){if(y(n)&&(n=1),i=i||1e4,y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!p(e,n,i))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(i,"]. integer only"))},d=function(e,t,n,i){if(null==e)throw new Error("".concat(t||"param"," cannot be null"));if(y(n)&&(n=0),i=i||1e4,y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!f(e,n,i))throw new Error("Invalid ".concat(t||"number param",": The value range is [").concat(n,",").concat(i,"]."))},u=function(e,t){if(y(e))throw new Error("".concat(t||"param"," cannot be empty"));if(!m(e))throw new Error("Invalid ".concat(t||"boolean param",": The value is of the boolean type."))},l=function(e,t,n,i){return t||(t=0),n||(n=Number.MAX_SAFE_INTEGER),y(i)&&(i=!0),E(e)&&(!i||h(e))&&e.length>=t&&e.length<=n},p=function(e,t,n){return S(e)&&e>=t&&e<=n},f=function(e,t,n){return _(e)&&e>=t&&e<=n},m=function(e){return"boolean"==typeof e},g=function(e){return l(e,1,2047)},v=function(e){return E(e)&&/^[a-zA-Z0-9 \!\#\$\%\&\(\)\+\-\:\;\<\=\.\>\?\@\[\]\^\_\{\}\|\~\,]{1,64}$/.test(e)},h=function(e){if("string"==typeof e){for(var t=0;t<e.length;t++){var n=e.charCodeAt(t);if(n<0||n>255)return!1}return!0}},S=function(e){return"number"==typeof e&&e%1==0},_=function(e){return"number"==typeof e},E=function(e){return"string"==typeof e},I=function(e){return e instanceof Array},y=function(e){return null==e}},function(e,t,n){"use strict";var i=n(13),a=n.n(i),r=n(5),o=n.n(r),s=n(3),c=n(0),d=n(9),u=n(15),l=n.n(u);n.d(t,"b",function(){return g}),n.d(t,"a",function(){return m});var p={eventType:null,sid:null,lts:null,success:null,cname:null,uid:null,peer:null,cid:null,elapse:null,extend:null,vid:0},f=null,m=function(){return f||(f="process-"+l()(),c.default.info("processId: "+f)),f},g=function(){var e={list:{}};e.url=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6080/events/message"),e.urlBackup=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6080/events/message"),e.setProxyServer=function(t){t?(e.url=Object(d.shouldUseHttps)()?"https://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6443&d=events/message"):"http://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),"&p=6080&d=events/message"),e.urlBackup=Object(d.shouldUseHttps)()?"https://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6443&d=events/message"):"http://".concat(t,"/rs/?h=").concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),"&p=6080&d=events/message"),c.default.debug("reportProxyServerURL: ".concat(e.url)),c.default.debug("reportProxyServerBackupURL: ".concat(e.urlBackup))):(e.url=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_DOMAIN"),":6080/events/message"),e.urlBackup=Object(d.shouldUseHttps)()?"https://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6443/events/message"):"http://".concat(Object(s.getParameter)("EVENT_REPORT_BACKUP_DOMAIN"),":6080/events/message"))},e.sessionInit=function(t,n){var i=o()({},p);i.startTime=+new Date,i.sid=t,i.cname=n.cname,e.list[t]=i;var a=o()({},{willUploadConsoleLog:Object(s.getParameter)("UPLOAD_LOG")},n.extend),r=o()({},i);r.eventType="session_init",r.appid=n.appid,r.browser=navigator.userAgent,r.build=s.BUILD,r.lts=+new Date,r.elapse=r.lts-r.startTime,r.extend=JSON.stringify(a),r.mode=n.mode,r.process=m(),r.success=n.succ,r.version=s.VERSION,delete r.startTime,e.send({type:"io.agora.pb.Wrtc.Session",data:r}),e._flushInvokeReport(t)},e.joinChooseServer=function(t,n,i){if(e.list[t]){n.uid&&(e.list[t].uid=parseInt(n.uid)),n.cid&&(e.list[t].cid=parseInt(n.cid));var a=o()({},e.list[t]);a.eventType="join_choose_server";var r=n.lts;a.lts=Date.now(),a.eventElapse=a.lts-r,a.chooseServerAddr=n.csAddr,a.errorCode=n.ec,a.elapse=a.lts-a.startTime,a.success=n.succ,a.chooseServerAddrList=JSON.stringify(n.serverList),delete a.startTime,e.send({type:"io.agora.pb.Wrtc.JoinChooseServer",data:a})}},e.reqUserAccount=function(t,n){n.vid&&(e.list[t].vid=n.vid);var i=o()({},e.list[t]),a=n.lts;i.eventType="req_user_account",i.lts=Date.now(),i.success=n.success,i.serverAddress=n.serverAddress,i.stringUid=n.stringUid,i.uid=n.uid,i.errorCode=n.errorCode,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-a,i.extend="string"==typeof n.extend?n.extend:JSON.stringify(n.extend),delete i.startTime,e.send({type:"io.agora.pb.Wrtc.ReqUserAccount",data:i})},e.joinGateway=function(t,n){n.vid&&(e.list[t].vid=n.vid);var i=o()({},e.list[t]),a=n.lts;i.eventType="join_gateway",i.lts=Date.now(),i.gatewayAddr=n.addr,i.success=n.succ,i.errorCode=n.ec,i.elapse=i.lts-i.startTime,i.eventElapse=i.lts-a,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.JoinGateway",data:i})},e.publish=function(t,n){var i=o()({},e.list[t]);i.eventType="publish";var a=n.lts;i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.success=n.succ,i.errorCode=n.ec,n.videoName&&(i.videoName=n.videoName),n.audioName&&(i.audioName=n.audioName),n.screenName&&(i.screenName=n.screenName),delete i.startTime,e.send({type:"io.agora.pb.Wrtc.Publish",data:i}),e._flushInvokeReport(t)},e.subscribe=function(t,n){var i=o()({},e.list[t]);i.eventType="subscribe";var a=n.lts;i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.errorCode=n.ec,i.success=n.succ,isFinite(n.peerid)?i.peer=n.peerid:i.peerSuid=""+n.peerid,"boolean"==typeof n.video&&(i.video=n.video),"boolean"==typeof n.audio&&(i.audio=n.audio),delete i.startTime,e.send({type:"io.agora.pb.Wrtc.Subscribe",data:i}),e._flushInvokeReport(t)},e.firstRemoteFrame=function(t,n){var i=o()({},e.list[t]);i.eventType="first_remote_frame";var a=n.lts;i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.width=n.width,i.height=n.height,i.success=n.succ,i.errorCode=n.ec,isFinite(n.peerid)?i.peer=n.peerid:i.peerSuid=""+n.peerid,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.FirstFrame",data:i})},e.streamSwitch=function(t,n){var i=o()({},e.list[t]);i.eventType="stream_switch",i.lts=Date.now(),i.isDual=n.isdual,i.elapse=i.lts-i.startTime,i.success=i.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.StreamSwitch",data:i})},e.audioSendingStopped=function(t,n){var i=o()({},e.list[t]);i.eventType="audio_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reason=n.reason,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.AudioSendingStopped",data:i})},e.videoSendingStopped=function(t,n){var i=o()({},e.list[t]);i.eventType="video_sending_stopped",i.lts=Date.now(),i.elapse=i.lts-i.startTime,i.reson=n.reason,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.VideoSendingStopped",data:i})},e.requestProxyAppCenter=function(t,n){var i=o()({},e.list[t]),a=n.lts;i.eventType="request_proxy_appcenter",i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.extend=n.extend+"",i.APAddr=n.APAddr,i.workerManagerList=n.workerManagerList,i.response=n.response,i.errorCode=n.ec,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.RequestProxyAppCenter",data:i})},e.requestProxyWorkerManager=function(t,n){var i=o()({},e.list[t]),a=n.lts;i.eventType="request_proxy_worker_manager",i.lts=Date.now(),i.eventElapse=i.lts-a,i.elapse=i.lts-i.startTime,i.extend=n.extend,i.workerManagerAddr=n.workerManagerAddr,i.response=n.response,i.errorCode=n.ec,i.success=n.succ,delete i.startTime,e.send({type:"io.agora.pb.Wrtc.RequestProxyWorkerManager",data:i})};var t=0;return e.reportApiInvoke=function(e,n){var i=n.tag,r=n.name,o=n.getStates,d=n.options,u=n.timeout,l=void 0===u?6e4:u,p=n.callback,f=n.reportResult,m=void 0===f||f,v=Date.now(),h=0,S=t++,_=function(){return a()({tag:i,invokeId:S,sid:e,name:r,apiInvokeTime:v,options:d},o&&{states:(t=o(),Object.keys(t).reduce(function(e,n){var i=e;return null!=t[n]&&(i[n]=t[n]),i},{}))});var t},E=!!Object(s.getParameter)("SHOW_REPORT_INVOKER_LOG");E&&c.default.info("".concat(r," start"));var I=setTimeout(function(){g._sendApiInvoke(a()({},_(),{error:"API_INVOKE_TIMEOUT",success:!1}))},l);return function(e,t){if(clearTimeout(I),++h>1&&(e="EXECUTOR_INVOKE_".concat(h)),e)return g._sendApiInvoke(a()({},_(),{success:!1,error:e},o&&{states:o()})),E&&c.default.info("".concat(r," onFailure"),e),p&&p(e);g._sendApiInvoke(a()({},_(),{success:!0},m&&{result:t},o&&{states:o()})),E&&c.default.info("".concat(r," onSuccess")),p&&p(null,t)}},e._cachedItems=[],e._cacheInvokeReport=function(t){t.lts||(t.lts=Date.now()),e._cachedItems.push(t),e._cachedItems.length>50&&e._cachedItems.shift()},e._flushInvokeReport=function(t){if(e._cachedItems.length){var n=e._cachedItems;e._cachedItems=[],c.default.debug("Flush cached event reporting:",n.length),n.forEach(function(n,i){n.sid=t,setTimeout(function(){e._sendApiInvoke(n)},5e3+500*i)})}},e._sendApiInvoke=function(t){var n=t.tag,i=t.invokeId,r=t.sid,o=t.name,c=t.result,d=t.states,u=t.options,l=t.error,p=t.success,f=t.apiInvokeTime,m=t.lts,g=Object(s.getParameter)("NOT_REPORT_EVENT");if(!(n&&g instanceof Array&&-1!==g.indexOf(n)))if(e.list[r]){var v=e.list[r],h=v.startTime,S=v.cname,_=v.uid,E=v.cid,I=(m=m||Date.now())-h,y=m-f,T="";if(u)try{T=JSON.stringify(u)}catch(e){T=u.toString()}var b=a()({invokeId:i,sid:r,cname:S,cid:E,lts:m,uid:_,success:p,elapse:I,apiName:o,execElapse:y},void 0!==u&&{options:T},void 0!==d&&{execStates:JSON.stringify(d)},void 0!==l&&{errorCode:JSON.stringify(l)},void 0!==c&&{execResult:JSON.stringify(c)});e.send({type:"io.agora.pb.Wrtc.ApiInvoke",data:b})}else e._cacheInvokeReport(arguments[0])},e._send=function(t){try{var n=[];t&&t.data&&t.data.apiName?n.push(["apiName",""+t.data.apiName]):t&&t.data&&t.data.eventType&&n.push(["eventType",t.data.eventType]);var i=n.map(function(e){return"".concat(e[0],"=").concat(encodeURIComponent(e[1]))}).join("&"),a=-1===e.url.indexOf("?")?"".concat(e.url,"?").concat(i):e.url;Object(d.post)(a,t,null,function(n){var a=-1===e.urlBackup.indexOf("?")?"".concat(e.urlBackup,"?").concat(i):e.urlBackup;Object(d.post)(a,t,null,function(e){},{timeout:1e4})},{timeout:1e4})}catch(e){}},e.sendCache=[],e.sendTimer=null,e.send=function(t){if(e.sendCache.push(t),null===e.sendTimer){return function t(){e.sendTimer=setTimeout(function(){if(0!==e.sendCache.length)return e._send(e.sendCache.shift()),t();e.sendTimer=null},Object(s.getParameter)("EVENT_REPORT_SEND_INTERVAL"))}()}},e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BUILD="v3.0.0-0-g747f321";t.VERSION="3.0.0";t.SUPPORT_RESOLUTION_LIST={"90p_1":[160,90,null,null,null,null],"120p_1":[160,120,15,15,30,65],"120p_3":[120,120,15,15,30,50],"120p_4":[212,120,null,null,null,null],"180p_1":[320,180,15,15,30,140],"180p_3":[180,180,15,15,30,100],"180p_4":[240,180,15,15,30,120],"240p_1":[320,240,15,15,40,200],"240p_3":[240,240,15,15,40,140],"240p_4":[424,240,15,15,40,220],"360p_1":[640,360,15,15,80,400],"360p_3":[360,360,15,15,80,260],"360p_4":[640,360,30,30,80,600],"360p_6":[360,360,30,30,80,400],"360p_7":[480,360,15,15,80,320],"360p_8":[480,360,30,30,80,490],"360p_9":[640,360,15,15,80,800],"360p_10":[640,360,24,24,80,800],"360p_11":[640,360,24,24,80,1e3],"480p_1":[640,480,15,15,20,500,1,5],"480p_2":[640,480,30,30,100,1e3,25,30],"480p_3":[480,480,15,15,100,400],"480p_4":[640,480,30,30,100,750],"480p_6":[480,480,30,30,100,600],"480p_8":[848,480,15,15,100,610],"480p_9":[848,480,30,30,100,930],"480p_10":[640,480,10,10,100,400],"720p_1":[1280,720,15,15,120,1130,1,5],"720p_2":[1280,720,30,30,120,2e3,25,30],"720p_3":[1280,720,30,30,120,1710],"720p_5":[960,720,15,15,120,910],"720p_6":[960,720,30,30,120,1380],"1080p_1":[1920,1080,15,15,120,2080,1,5],"1080p_2":[1920,1080,30,30,120,3e3,25,30],"1080p_3":[1920,1080,30,30,120,3150],"1080p_5":[1920,1080,60,60,120,4780],"1440p_1":[2560,1440,30,30,120,4850],"1440p_2":[2560,1440,60,60,120,7350],"4k_1":[3840,2160,30,30,120,8910],"4k_3":[3840,2160,60,60,120,13500]};t.AUDIO_PROFILE_SETTINGS={speech_low_quality:[!1,!1,!0,!0],speech_standard:[!1,!1,!0,!1],music_standard:[!1,!1,!1,!1],standard_stereo:[!1,!0,!1,!1],high_quality:[!0,!1,!1,!1],high_quality_stereo:[!0,!0,!1,!1],default:[!1,!1,!1,!1]};var i={WEBCS_DOMAIN:["webrtc2-ap-web-1.agora.io","webrtc2-ap-web-2.agoraio.cn"],WEBCS_DOMAIN_BACKUP_LIST:["webrtc2-ap-web-3.agora.io","webrtc2-ap-web-4.agoraio.cn"],PROXY_CS:["ap-proxy-1.agora.io","ap-proxy-2.agora.io"],CDS_AP:["cds-ap-web-1.agora.io","cds-ap-web-2.agoraio.cn","cds-ap-web-3.agora.io","cds-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER:["sua-ap-web-1.agora.io","sua-ap-web-2.agoraio.cn","sua-ap-web-3.agora.io","sua-ap-web-4.agoraio.cn"],UAP_AP:["uap-ap-web-1.agora.io","uap-ap-web-2.agoraio.cn","uap-ap-web-3.agora.io","uap-ap-web-4.agoraio.cn"],ACCOUNT_REGISTER_RETRY_TIMEOUT:1,ACCOUNT_REGISTER_RETRY_RATIO:2,ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX:6e4,ACCOUNT_REGISTER_RETRY_COUNT_MAX:1e5,AUDIO_CONTEXT:null,LOG_UPLOAD_SERVER:"logservice.agora.io",EVENT_REPORT_DOMAIN:"webcollector-1.agora.io",EVENT_REPORT_BACKUP_DOMAIN:"webcollector-2.agoraio.cn",WEBCS_BACKUP_CONNECT_TIMEOUT:6e3,LIVESTREAMING_ALIGN:!0,HTTP_CONNECT_TIMEOUT:5e3,PLAYER_STATE_DEFER:2e3,SIGNAL_REQUEST_TIMEOUT:1e4,SIGNAL_REQUEST_WATCH_INTERVAL:1e3,REPORT_STATS:!0,REPORT_STATS_TIMEOUT:3e3,UPLOAD_LOG:!1,NOT_REPORT_EVENT:[],FILEPATH_LENMAX:255,SUBSCRIBE_TCC:!1,PING_PONG_TIME_OUT:10,DUALSTREAM_OPERATION_CHECK:!0,WEBSOCKET_TIMEOUT_MIN:1e4,EVENT_REPORT_SEND_INTERVAL:1e3,MEDIA_ELEMENT_EXISTS_DEPTH:3,CANDIDATE_TIMEOUT:2e3,SHIM_CANDIDATE:!1,LEAVE_MSG_TIMEOUT:2e3,TICKET_RENEW_TIMEOUT:828e5,SHOW_REPORT_INVOKER_LOG:!1,STATS_FILTER:{transportId:!0,googTrackId:!0},FORCE_TURN:!1,TURN_ENABLE_TCP:!0,TURN_ENABLE_UDP:!0,FORCE_CHANGED_GATEWAY_FLAG:!1,JOIN_EXTEND:"",PUB_EXTEND:"",SUB_EXTEND:"",CHROME_NEW_STATS:!1};t.setParameter=function(e,t){return void 0!==i[e]&&(i[e]=t,!0)};t.getParameter=function(e){return void 0!==i[e]?i[e]:null}},function(e,t,n){"use strict";n.r(t),n.d(t,"getBrowserInfo",function(){return S}),n.d(t,"getBrowserVersion",function(){return p}),n.d(t,"getBrowserOS",function(){return f}),n.d(t,"isChrome",function(){return i}),n.d(t,"isSafari",function(){return a}),n.d(t,"isFireFox",function(){return o}),n.d(t,"isOpera",function(){return s}),n.d(t,"isEdge",function(){return r}),n.d(t,"isQQBrowser",function(){return c}),n.d(t,"isWeChatBrowser",function(){return d}),n.d(t,"isLegacyChrome",function(){return g}),n.d(t,"isSupportedPC",function(){return u}),n.d(t,"isSupportedMobile",function(){return l}),n.d(t,"getChromeKernelVersion",function(){return h}),n.d(t,"isChromeKernel",function(){return m});var i=function(){var e=S();return e.name&&"Chrome"===e.name},a=function(){var e=S();return e.name&&"Safari"===e.name},r=function(){var e=S();return e.name&&"Edge"===e.name},o=function(){var e=S();return e.name&&"Firefox"===e.name},s=function(){var e=S();return e.name&&"OPR"===e.name},c=function(){var e=S();return e.name&&"QQBrowser"===e.name},d=function(){var e=S();return e.name&&"MicroMessenger"===e.name},u=function(){var e=f();return"Linux"===e||"Mac OS X"===e||"Mac OS"===e||-1!==e.indexOf("Windows")},l=function(){var e=f();return"Android"===e||"iOS"===e},p=function(){return S().version},f=function(){return S().os},m=function(){return!!navigator.userAgent.match(/chrome\/[\d]./i)};function g(){return window.navigator.appVersion&&null!==window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)&&window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<=35}var v,h=function(){var e=navigator.userAgent.match(/chrome\/[\d]./i);return e&&e[0]&&e[0].split("/")[1]},S=(v=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];"Chrome"===n[1]&&null!=(e=t.match(/(OPR(?=\/))\/?(\d+)/i))&&(n=e),"Safari"===n[1]&&null!=(e=t.match(/version\/(\d+)/i))&&(n[2]=e[1]),~t.toLowerCase().indexOf("qqbrowser")&&null!=(e=t.match(/(qqbrowser(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("micromessenger")&&null!=(e=t.match(/(micromessenger(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("edge")&&null!=(e=t.match(/(edge(?=\/))\/?(\d+)/i))&&(n=e),~t.toLowerCase().indexOf("trident")&&null!=(e=/\brv[ :]+(\d+)/g.exec(t)||[])&&(n=[null,"IE",e[1]]);var i=void 0,a=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var r in a){var o=a[r];if(o.r.test(navigator.userAgent)){i=o.s;break}}return{name:n[1],version:n[2],os:i}}(),function(){return v})},function(e,t){function n(){return e.exports=n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},n.apply(this,arguments)}e.exports=n},function(e,t,n){e.exports=n(24)},function(e,t,n){"use strict";var i,a=this&&this.__extends||(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),r=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},o=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var c=s(n(30)),d=n(3),u=s(n(0)),l=n(9),p=n(1),f=n(10),m=function(e){function t(t,n){var i=e.call(this)||this;return i._state=_.RELAY_STATE_IDLE,i._onStatus=function(e){u.default.debug("["+i.clientId+"] ChannelMediaStatus: "+JSON.stringify(e)),e&&e.command&&("onAudioPacketReceived"===e.command&&i.emit("event",S.PACKET_RECEIVED_AUDIO_FROM_SRC),"onVideoPacketReceived"===e.command&&i.emit("event",S.PACKET_RECEIVED_VIDEO_FROM_SRC),"onSrcTokenPrivilegeDidExpire"===e.command&&(i._state=_.RELAY_STATE_FAILURE,i.emit("state",_.RELAY_STATE_FAILURE,E.SRC_TOKEN_EXPIRED)),"onDestTokenPrivilegeDidExpire"===e.command&&(i._state=_.RELAY_STATE_FAILURE,i.emit("state",_.RELAY_STATE_FAILURE,E.DEST_TOKEN_EXPIRED,e.channelName?{came:e.channelName}:null)))},i._onClose=function(){return r(i,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:if(u.default.debug("["+this.clientId+"] ChannelMediaSocket onClose"),this.emit("event",S.NETWORK_DISCONNECTED),this.state=_.RELAY_STATE_IDLE,!this._prevChannelMediaConfig)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.startChannelMediaRelay(this._prevChannelMediaConfig)];case 2:return t.sent(),[3,4];case 3:return(e=t.sent())instanceof y&&(e.message===v.WS_ABORT||e.message===v.AP_REQUEST_ABORT)?[2]:(this.emit("state",_.RELAY_STATE_FAILURE,E.SERVER_CONNECTION_LOST),[3,4]);case 4:return[2]}})})},i.token=t.appId,i.appId=t.appId,i.cname=t.cname,i.uid=t.uid,i.sid=t.sid,i.clientId=n,i}return a(t,e),Object.defineProperty(t.prototype,"state",{get:function(){return this._state},set:function(e){var t=this._state;this._state=e,t!==e&&this.emit("state",e)},enumerable:!0,configurable:!0}),t.prototype.startChannelMediaRelay=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:if(this.state!==_.RELAY_STATE_IDLE)throw new y(v.BAD_STATE);return this.state=_.RELAY_STATE_CONNECTING,[4,this._connect()];case 1:return t.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: connect success"),[4,this._sendStartRelayMessage(e)];case 2:return t.sent(),this._prevChannelMediaConfig=e,[2]}})})},t.prototype.updateChannelMediaRelay=function(e){return r(this,void 0,void 0,function(){return o(this,function(t){switch(t.label){case 0:if(this.state!==_.RELAY_STATE_RUNNING)throw new y(v.BAD_STATE);return[4,this._sendUpdateMessage(e)];case 1:return t.sent(),this._prevChannelMediaConfig=e,[2]}})})},t.prototype.stopChannelMediaRelay=function(){return r(this,void 0,void 0,function(){return o(this,function(e){switch(e.label){case 0:return[4,this._sendStopRelayMessage()];case 1:return e.sent(),u.default.debug("["+this.clientId+"] stopChannelMediaRelay: send stop message success"),this.state=_.RELAY_STATE_IDLE,this.dispose(),[2]}})})},t.prototype.dispose=function(){u.default.debug("["+this.clientId+"] disposeChannelMediaRelay"),this.state=_.RELAY_STATE_IDLE,this.emit("dispose"),this._signal&&this._signal.dispose(),this._prevChannelMediaConfig=null,this.removeEvent()},t.prototype._requestOneAP=function(e){var t=this;return new Promise(function(n,i){var a={command:"convergeAllocateEdge",sid:t.sid,appId:t.appId,token:"",ts:+new Date,version:d.VERSION,cname:t.cname,uid:t.uid+"",seq:1,requestId:1},r={service_name:"tele_channel",json_body:JSON.stringify(a)},o="https://"+e;l.post(o,r,function(e){var t=null,a=null;try{t=JSON.parse(e)}catch(e){i(new y(v.AP_JSON_PARSE_ERROR,e))}0!==t.code&&i(new y(v.AP_REQUEST_ERROR,t));try{a=JSON.parse(t.json_body)}catch(e){i(new y(v.AP_JSON_PARSE_ERROR,e))}200!==a.code&&i(new y(v.AP_REQUEST_ERROR,a)),a.servers?n(a.servers):i(new y(v.AP_JSON_PARSE_ERROR,a))},function(e){return i(e)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})})},t.prototype._requestAP=function(){var e=this,t=d.getParameter("UAP_AP");return new Promise(function(n,i){setTimeout(function(){i(new y(v.AP_REQUEST_TIMEOUT))},3e3),e.on("dispose",function(){i(new y(v.AP_REQUEST_ABORT))}),t.forEach(function(t){t+="/api/v1",e._requestOneAP(t).then(function(i){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" success: "+JSON.stringify(i));var a=i[0],r="wss://"+a.address.replace(/\./g,"-")+".edge.agora.io:"+a.wss;n(r)}).catch(function(n){u.default.debug("["+e.clientId+"] startChannelMediaRelay request AP "+t+" failed: "+JSON.stringify(n))})})})},t.prototype._connectWebsocket=function(e){return this._signal=new I(this.appId,this.cname,this.uid,this.sid),this._signal.connect(e)},t.prototype._connect=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return[4,this._requestAP()];case 1:return e=t.sent(),[4,this._connectWebsocket(e)];case 2:return t.sent(),this._signal.on("close",this._onClose.bind(this)),this._signal.on("status",this._onStatus.bind(this)),this.emit("event",S.NETWORK_CONNECTED),[2]}})})},t.prototype._sendStartRelayMessage=function(e){return r(this,void 0,void 0,function(){var t,n,i,a,r,s;return o(this,function(o){switch(o.label){case 0:return this._checkSignal(),t=this._genMessage(h.StopPacketTransfer),[4,this._signal.request(t)];case 1:return o.sent(),[4,this._signal.waitStatus("Normal Quit")];case 2:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: StopPacketTransfer success"),n=this._genMessage(h.SetSdkProfile,e),[4,this._signal.request(n)];case 3:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSdkProfile success"),i=this._genMessage(h.SetSourceChannel,e),[4,this._signal.request(i)];case 4:return o.sent(),[4,this._signal.waitStatus("SetSourceChannelStatus")];case 5:return o.sent(),this.emit("event",S.PACKET_JOINED_SRC_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceChannel success"),a=this._genMessage(h.SetSourceUserId,e),[4,this._signal.request(a)];case 6:return o.sent(),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetSourceUserId success"),r=this._genMessage(h.SetDestChannel,e),[4,this._signal.request(r)];case 7:return o.sent(),[4,this._signal.waitStatus("SetDestChannelStatus")];case 8:return o.sent(),this.emit("event",S.PACKET_JOINED_DEST_CHANNEL),u.default.debug("["+this.clientId+"] startChannelMediaRelay: SetDestChannel success"),s=this._genMessage(h.StartPacketTransfer,e),[4,this._signal.request(s)];case 9:return o.sent(),this.emit("event",S.PACKET_SENT_TO_DEST_CHANNEL),this.state=_.RELAY_STATE_RUNNING,u.default.debug("["+this.clientId+"] startChannelMediaRelay: StartPacketTransfer success"),[2]}})})},t.prototype._sendReconnectMessage=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(h.Reconnect,e),[4,this._signal.request(t)];case 1:return n.sent(),[2]}})})},t.prototype._sendUpdateMessage=function(e){return r(this,void 0,void 0,function(){var t;return o(this,function(n){switch(n.label){case 0:return this._checkSignal(),t=this._genMessage(h.UpdateDestChannel,e),[4,this._signal.request(t)];case 1:return n.sent(),this.emit("event",S.PACKET_UPDATE_DEST_CHANNEL),u.default.debug("["+this.clientId+"] sendUpdateMessage: UpdateDestChannel success"),[2]}})})},t.prototype._sendStopRelayMessage=function(){return r(this,void 0,void 0,function(){var e;return o(this,function(t){switch(t.label){case 0:return this._checkSignal(),e=this._genMessage(h.StopPacketTransfer),[4,this._signal.request(e)];case 1:return t.sent(),u.default.debug("["+this.clientId+"] sendStopRelayMessage: StopPacketTransfer success"),[2]}})})},t.prototype._genMessage=function(e,t){var n=this,i=[],a=[],r=[],o={appId:this.appId,cname:this.cname,uid:this.uid+"",sdkVersion:d.VERSION,sid:this.sid,ts:+new Date,requestId:0,seq:0,allocate:!0,clientRequest:{}},s=null;switch(e){case h.SetSdkProfile:return o.clientRequest={command:"SetSdkProfile",type:"multi_channel"},o;case h.SetSourceChannel:return s=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceChannel",uid:s.uid+"",channelName:s.channelName,token:s.token||this.appId},o;case h.SetSourceUserId:return s=t.getSrcChannelMediaInfo(),o.clientRequest={command:"SetSourceUserId",uid:this.uid+""},o;case h.SetDestChannel:return t.getDestChannelMediaInfos().forEach(function(e){i.push(e.channelName),a.push(e.uid+""),r.push(e.token||n.appId)}),o.clientRequest={command:"SetDestChannel",channelName:i,uid:a,token:r},o;case h.StartPacketTransfer:return o.clientRequest={command:"StartPacketTransfer"},o;case h.Reconnect:return o.clientRequest={command:"Reconnect"},o;case h.StopPacketTransfer:return o.clientRequest={command:"StopPacketTransfer"},o;case h.UpdateDestChannel:return t.getDestChannelMediaInfos().forEach(function(e){i.push(e.channelName),a.push(e.uid+""),r.push(e.token||n.appId)}),o.clientRequest={command:"UpdateDestChannel",channelName:i,uid:a,token:r},o}},t.prototype._checkSignal=function(){if(!this._signal||!this._signal.isConnect())throw new y(v.WS_DISCONNECTED)},t}(c.default);t.default=m;var g=function(){function e(){this.destChannelMediaInfos=new Map}return e.prototype.setSrcChannelInfo=function(e){p.checkValidObject(e,"srcInfo");var t=e.uid,n=e.channelName,i=e.token;if(i&&!p.isValidToken(i))throw"Invalid token in SrcChannelInfo";if(!p.isValidChannelName(n))throw"Invalid channelName in SrcChannelInfo";if(!f.is32Uint(t))throw"Invalid uid in SrcChannelInfo";this.srcChannelMediaInfo=e},e.prototype.setDestChannelInfo=function(e,t){if(!p.isValidChannelName(e))throw"Invalid channelName in DestChannelInfo";p.checkValidObject(t,"destInfo");var n=t.uid,i=t.token,a=t.channelName;if(i&&!p.isValidToken(i))throw"Invalid token in DestChannelInfo";if(!p.isValidChannelName(a))throw"Invalid channelName in DestChannelInfo";if(!f.is32Uint(n))throw"Invalid uid in DestChannelInfo";this.destChannelMediaInfos.set(e,t)},e.prototype.removeDestChannelInfo=function(e){if(!p.isValidChannelName(e))throw"Invalid channelName when invoke removeDestChannelInfo";this.destChannelMediaInfos.delete(e)},e.prototype.getSrcChannelMediaInfo=function(){return this.srcChannelMediaInfo},e.prototype.getDestChannelMediaInfos=function(){return this.destChannelMediaInfos},e}();t.ChannelMediaRelayConfiguration=g;var v,h,S,_,E,I=function(e){function t(t,n,i,a){var r=e.call(this)||this;return r._onOpen=function(){r.emit("open")},r._onClose=function(e){r.emit("close"),r.dispose()},r._onMessage=function(e){var t=JSON.parse(e.data);if(!t||"serverResponse"!==t.command||!t.requestId)return t&&"serverStatus"===t.command&&t.serverStatus&&t.serverStatus.command?(r.emit("status",t.serverStatus),void r.emit(t.serverStatus.command,t.serverStatus)):void 0;r.emit("req_"+t.requestId,t)},r._requestId=1,r.appId=t,r.cname=n,r.uid=i,r.sid=a,r}return a(t,e),t.prototype.isConnect=function(){return this._ws&&this._ws.readyState===WebSocket.OPEN},t.prototype.sendMessage=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new y(v.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,e.seq=t,this._ws.send(JSON.stringify(e)),t},t.prototype.waitStatus=function(e){var t=this;return new Promise(function(n,i){var a=window.setTimeout(function(){i(new y(v.WAIT_STATUS_TIMEOUT,e))},5e3);t.once(e,function(t){clearTimeout(a),t.state&&0!==t.state?i(new y(v.WAIT_STATUS_ERROR,e)):n()}),t.once("dispose",function(){clearTimeout(a),i(new y(v.WS_ABORT))})})},t.prototype.request=function(e){var t=this;return new Promise(function(n,i){var a=t.sendMessage(e),r=window.setTimeout(function(){t.removeAllListeners("req_"+a),i(new y(v.REQUEST_TIMEOUT))},3e3);t.once("req_"+a,function(e){clearTimeout(r),e&&200===e.code?n(e):i(new y(v.REQUEST_FAILED,e))}),t.once("dispose",function(){clearTimeout(r),i(new y(v.WS_ABORT))})})},t.prototype.connect=function(e){var t=this;return new Promise(function(n,i){t._ws=new WebSocket(e),t._ws.onopen=function(){t._onOpen(),t._prvUrl=e,t._ws.onmessage=t._onMessage,t._ws.onclose=t._onClose,t._startHeartBeatCheck(),n()},t._ws.onclose=function(e){t._ws=null,i(new y(v.CONNECT_FAILED,"websocket error code: "+e.code))},setTimeout(function(){t._ws&&t._ws.readyState!==WebSocket.OPEN&&(t._ws.onopen=null,t._ws.onclose=null,t._ws.close(),t._ws=null,i(new y(v.CONNECT_TIMEOUT)))},5e3),t.once("dispose",function(){i(new y(v.WS_ABORT))})})},t.prototype.dispose=function(){this._clearHeartBeatCheck(),this.emit("dispose"),this.removeEvent(),this._ws&&(this._ws.onopen=null,this._ws.onclose=null,this._ws.onmessage=null,this._ws.close()),this._ws=null},t.prototype._sendPing=function(e){if(!this._ws||this._ws.readyState!==WebSocket.OPEN)throw new y(v.WS_DISCONNECTED);var t=this._requestId++;return e.requestId=t,this._ws.send(JSON.stringify(e)),t},t.prototype._startHeartBeatCheck=function(){var e=this;this._heartBeatTimer=window.setInterval(function(){e._sendPing({command:"ping",appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid,ts:+new Date,requestId:0})},3e3)},t.prototype._clearHeartBeatCheck=function(){window.clearInterval(this._heartBeatTimer)},t}(c.default),y=function(){return function(e,t,n){void 0===e&&(e=""),this.code=n,this.data=t,this.message=e}}();t.ChannelMediaError=y,function(e){e.CONNECT_FAILED="connect failed",e.CONNECT_TIMEOUT="connect timeout",e.WS_DISCONNECTED="websocket disconnected",e.REQUEST_TIMEOUT="request timeout",e.REQUEST_FAILED="request failed",e.WAIT_STATUS_TIMEOUT="wait status timeout",e.WAIT_STATUS_ERROR="wait status error",e.BAD_STATE="bad state",e.WS_ABORT="ws abort",e.AP_REQUEST_TIMEOUT="AP request timeout",e.AP_JSON_PARSE_ERROR="AP json parse error",e.AP_REQUEST_ERROR="AP request error",e.AP_REQUEST_ABORT="AP request abort"}(v=t.CHANNEL_MEDIA_ERROR||(t.CHANNEL_MEDIA_ERROR={})),function(e){e[e.SetSdkProfile=0]="SetSdkProfile",e[e.SetSourceChannel=1]="SetSourceChannel",e[e.SetSourceUserId=2]="SetSourceUserId",e[e.SetDestChannel=3]="SetDestChannel",e[e.StartPacketTransfer=4]="StartPacketTransfer",e[e.StopPacketTransfer=5]="StopPacketTransfer",e[e.UpdateDestChannel=6]="UpdateDestChannel",e[e.Reconnect=7]="Reconnect",e[e.SetVideoProfile=8]="SetVideoProfile"}(h||(h={})),function(e){e[e.NETWORK_DISCONNECTED=0]="NETWORK_DISCONNECTED",e[e.NETWORK_CONNECTED=1]="NETWORK_CONNECTED",e[e.PACKET_JOINED_SRC_CHANNEL=2]="PACKET_JOINED_SRC_CHANNEL",e[e.PACKET_JOINED_DEST_CHANNEL=3]="PACKET_JOINED_DEST_CHANNEL",e[e.PACKET_SENT_TO_DEST_CHANNEL=4]="PACKET_SENT_TO_DEST_CHANNEL",e[e.PACKET_RECEIVED_VIDEO_FROM_SRC=5]="PACKET_RECEIVED_VIDEO_FROM_SRC",e[e.PACKET_RECEIVED_AUDIO_FROM_SRC=6]="PACKET_RECEIVED_AUDIO_FROM_SRC",e[e.PACKET_UPDATE_DEST_CHANNEL=7]="PACKET_UPDATE_DEST_CHANNEL",e[e.PACKET_UPDATE_DEST_CHANNEL_REFUSED=8]="PACKET_UPDATE_DEST_CHANNEL_REFUSED",e[e.PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE=9]="PACKET_UPDATE_DEST_CHANNEL_NOT_CHANGE"}(S=t.CHANNEL_MEDIA_RELAY_EVENT||(t.CHANNEL_MEDIA_RELAY_EVENT={})),function(e){e[e.RELAY_STATE_IDLE=0]="RELAY_STATE_IDLE",e[e.RELAY_STATE_CONNECTING=1]="RELAY_STATE_CONNECTING",e[e.RELAY_STATE_RUNNING=2]="RELAY_STATE_RUNNING",e[e.RELAY_STATE_FAILURE=3]="RELAY_STATE_FAILURE"}(_=t.CHANNEL_MEDIA_RELAY_STATE||(t.CHANNEL_MEDIA_RELAY_STATE={})),function(e){e[e.RELAY_OK=0]="RELAY_OK",e[e.SERVER_ERROR_RESPONSE=1]="SERVER_ERROR_RESPONSE",e[e.SERVER_NO_RESPONSE=2]="SERVER_NO_RESPONSE",e[e.NO_RESOURCE_AVAILABLE=3]="NO_RESOURCE_AVAILABLE",e[e.FAILED_JOIN_SRC=4]="FAILED_JOIN_SRC",e[e.FAILED_JOIN_DEST=5]="FAILED_JOIN_DEST",e[e.FAILED_PACKET_RECEIVED_FROM_SRC=6]="FAILED_PACKET_RECEIVED_FROM_SRC",e[e.FAILED_PACKET_SENT_TO_DEST=7]="FAILED_PACKET_SENT_TO_DEST",e[e.SERVER_CONNECTION_LOST=8]="SERVER_CONNECTION_LOST",e[e.INTERNAL_ERROR=9]="INTERNAL_ERROR",e[e.SRC_TOKEN_EXPIRED=10]="SRC_TOKEN_EXPIRED",e[e.DEST_TOKEN_EXPIRED=11]="DEST_TOKEN_EXPIRED",e[e.RELAY_ALREADY_START=12]="RELAY_ALREADY_START",e[e.RELAY_NOT_START=13]="RELAY_NOT_START",e[e.OPERATION_ABORT=14]="OPERATION_ABORT"}(E=t.CHANNEL_MEDIA_RELAY_ERROR||(t.CHANNEL_MEDIA_RELAY_ERROR={}))},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i(t){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?e.exports=i=function(e){return n(e)}:e.exports=i=function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":n(e)},i(t)}e.exports=i},function(e,t,n){"use strict";n.r(t),n.d(t,"post",function(){return u}),n.d(t,"shouldUseHttps",function(){return l}),n.d(t,"getHTTPSendBytes",function(){return s}),n.d(t,"getHTTPRecvBytes",function(){return c}),n.d(t,"resetHTTPByetsCount",function(){return d});var i=n(3),a=n(10),r=0,o=0,s=function(){return r},c=function(){return o},d=function(){r=0,o=0},u=function(e,t,n,s,c){var d=new XMLHttpRequest;if(d.timeout=t.timeout||Object(i.getParameter)("HTTP_CONNECT_TIMEOUT"),d.open("POST",e,!0),d.setRequestHeader("Content-type","application/json; charset=utf-8"),c)for(var u in c)"withCredentials"==u?d.withCredentials=!0:d.setRequestHeader(u,c[u]);d.onload=function(e){o+=Object(a.lengthInUtf8Bytes)(d.responseText),n&&n(d.responseText)},d.onerror=function(t){s&&s(t,e)},d.ontimeout=function(t){s&&s(t,e)};var l=JSON.stringify(t);r+=Object(a.lengthInUtf8Bytes)(l),d.send(l)},l=function(){return"https:"==document.location.protocol}},function(e,t,n){"use strict";n.r(t),n.d(t,"isLiveTranscodingValid",function(){return v}),n.d(t,"generateSessionId",function(){return f}),n.d(t,"audioLevelHelper",function(){return p}),n.d(t,"vsResHack",function(){return m}),n.d(t,"is32Uint",function(){return g}),n.d(t,"safeCall",function(){return l}),n.d(t,"random",function(){return S}),n.d(t,"popBanTip",function(){return E}),n.d(t,"lengthInUtf8Bytes",function(){return _});var i=n(8),a=n.n(i),r=n(4),o=n(0),s=n(15),c=n.n(s),d=n(14),u=n(12),l=function(){var e=arguments[0];if("function"==typeof e){var t=Array.prototype.slice.call(arguments,1);e.apply(null,t)}},p=function(e){return this.audioContext=Object(d.a)(),this.sourceNode=e.otWebkitAudioSource||this.audioContext.createMediaStreamSource(e),this.analyser=this.audioContext.createAnalyser(),this.timeDomainData=new Uint8Array(this.analyser.frequencyBinCount),this.sourceNode.connect(this.analyser),this.getAudioLevel=function(){if(this.analyser){this.analyser.getByteTimeDomainData(this.timeDomainData);for(var e=0,t=0;t<this.timeDomainData.length;t++)e=Math.max(e,Math.abs(this.timeDomainData[t]-128));return e/128}return o.default.warning("can't find analyser in audioLevelHelper"),0},this};function f(){return c()().replace(/-/g,"").toUpperCase()}var m=function(e,t,n){try{o.default.debug("start vsResHack",e);var i=document.createElement("video");i.setAttribute("autoplay",""),i.setAttribute("muted",""),i.muted=!0,i.setAttribute("playsinline",""),i.setAttribute("style","position: absolute; top: 0; left: 0; width:1px; high:1px;"),document.body.appendChild(i),i.addEventListener("playing",function(n){r.isFireFox()?i.videoWidth&&(o.default.debug("[vsResHack] get stream resolution: ","".concat(i.videoWidth," x ").concat(i.videoHeight),e),t(i.videoWidth,i.videoHeight),document.body.removeChild(i)):(o.default.debug("[vsResHack] get stream resolution: ","".concat(i.videoWidth," x ").concat(i.videoHeight),e),t(i.videoWidth,i.videoHeight),document.body.removeChild(i))}),Object(u.setSrcObject)(i,e)}catch(e){n(e)}},g=function(e){return"number"==typeof e&&0<=e&&e<=4294967295},v=function(e){var t=["lowLatency","userConfigExtraInfo","transcodingUsers"];for(var n in e)if("lowLatency"===n&&"boolean"!=typeof e[n]||"userConfigExtraInfo"===n&&"object"!==a()(e[n])||"transcodingUsers"===n&&!h(e[n])||!~t.indexOf(n)&&"number"!=typeof e[n])throw new Error("Param ["+n+"] is inValid");return!0},h=function(e){for(var t=0;t<e.length;t++)for(var n in e[t])if("number"!=typeof e[t][n])throw new Error("Param user["+t+"] - ["+n+"] is inValid");return!0},S=function(e){isNaN(e)&&(e=1e3);var t=+new Date,n=(t=(9301*t+49297)%233280)/233280;return Math.ceil(n*e)},_=function(e){var t=encodeURIComponent(e).match(/%[89ABab]/g);return e.length+(t?t.length:0)},E=function(){if(!document.getElementById("agora-ban-tip")){var e=document.createElement("div");e.id="agora-ban-tip",e.style="position: absolute; width: 100%; height: 100%; display: flex; justify-content: center; align-items: center; color: #fff;",document.querySelector("body").prepend(e);var t=document.createElement("div");t.style="background: #000; width: 346px; height: 116px; z-index: 100000; opacity: 0.6; border-radius: 10px; box-shadow: 0 2px 4px #000;",e.append(t);var n=document.createElement("div");n.style="height: 76px; display: flex; justify-content: center; align-items: center;";var i=document.createElement("span");i.style="height: 28px; width: 28px; color: #000; text-align: center; line-height: 30px; background: #fff; border-radius: 50%; font-weight: 600; font-size: 20px;margin-right: 5px;",i.innerText="!";var a=document.createElement("span");a.innerText="This browser does not support webRTC",n.append(i),n.append(a);var r=document.createElement("div");r.style="height: 38px; display: flex; border-top: #fff 1px solid; justify-content: center; align-items: center;",r.innerText="OK",t.append(n),t.append(r),r.onclick=function(){var e=document.getElementById("agora-ban-tip");e.parentNode.removeChild(e)}}}},function(e,t){function n(e,t,n,i,a,r,o){try{var s=e[r](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(i,a)}e.exports=function(e){return function(){var t=this,i=arguments;return new Promise(function(a,r){var o=e.apply(t,i);function s(e){n(o,a,r,s,c,"next",e)}function c(e){n(o,a,r,s,c,"throw",e)}s(void 0)})}}},function(e,t,n){"use strict";n.r(t),n.d(t,"RTCPeerConnection",function(){return T}),n.d(t,"getUserMedia",function(){return o}),n.d(t,"attachMediaStream",function(){return s}),n.d(t,"reattachMediaStream",function(){return c}),n.d(t,"setSrcObject",function(){return f}),n.d(t,"getSrcObject",function(){return m}),n.d(t,"webrtcDetectedBrowser",function(){return d}),n.d(t,"webrtcDetectedVersion",function(){return u}),n.d(t,"webrtcMinimumVersion",function(){return l}),n.d(t,"webrtcTesting",function(){return b}),n.d(t,"webrtcUtils",function(){return h});var i=n(8),a=n.n(i),r=n(4),o=null,s=null,c=null,d=null,u=null,l=null,p=null,f=null,m=null,g=null,v={addStream:null},h={log:function(){},extractVersion:function(e,t,n){var i=e.match(t);return i&&i.length>=n&&parseInt(i[n])}};if("object"==("undefined"==typeof window?"undefined":a()(window))?(!window.HTMLMediaElement||"srcObject"in window.HTMLMediaElement.prototype?(f=function(e,t){e.srcObject=t},m=function(e){return e.srcObject}):(f=function(e,t){"mozSrcObject"in e?e.mozSrcObject=t:(e._srcObject=t,e.src=t?URL.createObjectURL(t):null)},m=function(e){return"mozSrcObject"in e?e.mozSrcObject:e._srcObject}),o=window.navigator&&window.navigator.getUserMedia):(f=function(e,t){e.srcObject=t},m=function(e){return e.srcObject}),s=function(e,t){f(e,t)},c=function(e,t){f(e,m(t))},"undefined"!=typeof window&&window.navigator)if(navigator.mozGetUserMedia&&window.mozRTCPeerConnection){for(var S in h.log("This appears to be Firefox"),d="firefox",u=h.extractVersion(navigator.userAgent,/Firefox\/([0-9]+)\./,1),l=31,g=mozRTCPeerConnection,v)v[S]=g.prototype[S];if(p=function(e,t){if(u<38&&e&&e.iceServers){for(var n=[],i=0;i<e.iceServers.length;i++){var a=e.iceServers[i];if(a.hasOwnProperty("urls"))for(var r=0;r<a.urls.length;r++){var o={url:a.urls[r]};0===a.urls[r].indexOf("turn")&&(o.username=a.username,o.credential=a.credential),n.push(o)}else n.push(e.iceServers[i])}e.iceServers=n}var s=new g(e,t);for(var c in v)s[c]=v[c];return s},window.RTCSessionDescription||(window.RTCSessionDescription=mozRTCSessionDescription),window.RTCIceCandidate||(window.RTCIceCandidate=mozRTCIceCandidate),o=function(e,t,n){var i=function(e){if("object"!==a()(e)||e.require)return e;var t=[];return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i=e[n]="object"===a()(e[n])?e[n]:{ideal:e[n]};if(void 0===i.min&&void 0===i.max&&void 0===i.exact||t.push(n),void 0!==i.exact&&("number"==typeof i.exact?i.min=i.max=i.exact:e[n]=i.exact,delete i.exact),void 0!==i.ideal){e.advanced=e.advanced||[];var r={};"number"==typeof i.ideal?r[n]={min:i.ideal,max:i.ideal}:r[n]=i.ideal,e.advanced.push(r),delete i.ideal,Object.keys(i).length||delete e[n]}}}),t.length&&(e.require=t),e};return u<38&&(h.log("spec: "+JSON.stringify(e)),e.audio&&(e.audio=i(e.audio)),e.video&&(e.video=i(e.video)),h.log("ff37: "+JSON.stringify(e))),navigator.mozGetUserMedia(e,t,n)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:y,addEventListener:function(){},removeEventListener:function(){}}),navigator.mediaDevices.enumerateDevices=navigator.mediaDevices.enumerateDevices||function(){return new Promise(function(e){e([{kind:"audioinput",deviceId:"default",label:"",groupId:""},{kind:"videoinput",deviceId:"default",label:"",groupId:""}])})},u<41){var _=navigator.mediaDevices.enumerateDevices.bind(navigator.mediaDevices);navigator.mediaDevices.enumerateDevices=function(){return _().then(void 0,function(e){if("NotFoundError"===e.name)return[];throw e})}}}else if(navigator.webkitGetUserMedia&&window.webkitRTCPeerConnection){for(var S in h.log("This appears to be Chrome"),d="chrome",u=h.extractVersion(navigator.userAgent,/Chrom(e|ium)\/([0-9]+)\./,2),l=38,g=webkitRTCPeerConnection,v)v[S]=g.prototype[S];p=function(e,t){e&&e.iceTransportPolicy&&(e.iceTransports=e.iceTransportPolicy);var n=new g(e,t);for(var i in v)n[i]=v[i];var a=n.getStats.bind(n);return n.getStats=function(e,t,n){var i=arguments;i.length>0&&"function"==typeof e&&(t?(n=t,t=e,i=[e=null,t,n]):(t=e,i=[e=null,t]));if(i.length>=2){return a.apply(this,[function(e){i[1](function(e){var t={};return e.result().forEach(function(e){var n={id:e.id,timestamp:e.timestamp,type:e.type};e.names().forEach(function(t){n[t]=e.stat(t)}),t[n.id]=n}),t}(e))},i[0]])}return a()},n},["createOffer","createAnswer"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=this;if(arguments.length<1||1===arguments.length&&"object"===a()(arguments[0])){var n=1===arguments.length?arguments[0]:void 0;return new Promise(function(i,a){t.apply(e,[i,a,n])})}return t.apply(this,arguments)}}),["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(e){var t=webkitRTCPeerConnection.prototype[e];webkitRTCPeerConnection.prototype[e]=function(){var e=arguments,n=this;return new Promise(function(i,a){t.apply(n,[e[0],function(){i(),e.length>=2&&e[1].apply(null,[])},function(t){a(t),e.length>=3&&e[2].apply(null,[t])}])})}});var E=function(e){if("object"!==a()(e)||e.mandatory||e.optional)return e;var t={};return Object.keys(e).forEach(function(n){if("require"!==n&&"advanced"!==n&&"mediaSource"!==n){var i="object"===a()(e[n])?e[n]:{ideal:e[n]};void 0!==i.exact&&"number"==typeof i.exact&&(i.min=i.max=i.exact);var r=function(e,t){return e?e+t.charAt(0).toUpperCase()+t.slice(1):"deviceId"===t?"sourceId":t};if(void 0!==i.ideal){t.optional=t.optional||[];var o={};"number"==typeof i.ideal?(o[r("min",n)]=i.ideal,t.optional.push(o),(o={})[r("max",n)]=i.ideal,t.optional.push(o)):(o[r("",n)]=i.ideal,t.optional.push(o))}void 0!==i.exact&&"number"!=typeof i.exact?(t.mandatory=t.mandatory||{},t.mandatory[r("",n)]=i.exact):["min","max"].forEach(function(e){void 0!==i[e]&&(t.mandatory=t.mandatory||{},t.mandatory[r(e,n)]=i[e])})}}),e.advanced&&(t.optional=(t.optional||[]).concat(e.advanced)),t};if(o=function(e,t,n){return e.audio&&(e.audio=E(e.audio)),e.video&&(e.video=E(e.video)),h.log("chrome: "+JSON.stringify(e)),navigator.webkitGetUserMedia(e,t,n)},navigator.getUserMedia=o,navigator.mediaDevices||(navigator.mediaDevices={getUserMedia:y,enumerateDevices:function(){return new Promise(function(e){var t={audio:"audioinput",video:"videoinput"};return MediaStreamTrack.getSources(function(n){e(n.map(function(e){return{label:e.label,kind:t[e.kind],deviceId:e.id,groupId:""}}))})})}}),navigator.mediaDevices.getUserMedia){if(Number(Object(r.getBrowserVersion)().split(".")[0])<46){var I=navigator.mediaDevices.getUserMedia.bind(navigator.mediaDevices);navigator.mediaDevices.getUserMedia=function(e){return h.log("spec:   "+JSON.stringify(e)),e.audio=E(e.audio),e.video=E(e.video),h.log("chrome: "+JSON.stringify(e)),I(e)}}}else navigator.mediaDevices.getUserMedia=function(e){return y(e)};void 0===navigator.mediaDevices.addEventListener&&(navigator.mediaDevices.addEventListener=function(){h.log("Dummy mediaDevices.addEventListener called.")}),void 0===navigator.mediaDevices.removeEventListener&&(navigator.mediaDevices.removeEventListener=function(){h.log("Dummy mediaDevices.removeEventListener called.")}),s=function(e,t){u>=43?f(e,t):void 0!==e.src?e.src=t?URL.createObjectURL(t):null:h.log("Error attaching stream to element.")},c=function(e,t){u>=43?f(e,m(t)):e.src=t.src}}else navigator.mediaDevices&&navigator.userAgent.match(/Edge\/(\d+).(\d+)$/)?(h.log("This appears to be Edge"),d="edge",u=h.extractVersion(navigator.userAgent,/Edge\/(\d+).(\d+)$/,2),l=12):h.log("Browser does not appear to be WebRTC-capable");else h.log("This does not appear to be a browser"),d="not a browser";function y(e){return new Promise(function(t,n){o(e,t,n)})}var T,b={};try{Object.defineProperty(b,"version",{set:function(e){u=e}})}catch(e){}p?T=p:"undefined"!=typeof window&&(T=window.RTCPeerConnection)},function(e,t,n){var i=n(23);e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),a.forEach(function(t){i(e,t,n[t])})}return e}},function(e,t,n){"use strict";n.d(t,"a",function(){return s});var i=window.AudioContext||window.webkitAudioContext,a=n(3),r=a.getParameter,o=a.setParameter,s=function(){return r("AUDIO_CONTEXT")||(console.log("Creating Audio Context"),o("AUDIO_CONTEXT",function(){if(i)return new i;throw new Error("AUDIO_CONTEXT_NOT_SUPPORTED")}())),r("AUDIO_CONTEXT")}},function(e,t,n){var i=n(21),a=n(22);e.exports=function(e,t,n){var r=t&&n||0;"string"==typeof e&&(t="binary"===e?new Array(16):null,e=null);var o=(e=e||{}).random||(e.rng||i)();if(o[6]=15&o[6]|64,o[8]=63&o[8]|128,t)for(var s=0;s<16;++s)t[r+s]=o[s];return t||a(o)}},function(e,t,n){"use strict";var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var a,r=i(n(0)),o=n(12);!function(e){e.NEW="new",e.PREPARING_OFFER="preparing-offer",e.OFFER_SENT="offer-sent",e.ESTABLISHED="established",e.CLOSED="closed"}(a||(a={}));var s=function(){function e(e){this.candidate=null,this.state=a.NEW,this.config=e,this.isSubscriber=this.config.isSubscriber,this.peerConnection=this.initPeecConnection(e),this.peerConnection.onicecandidate=this._onicecandidate.bind(this),this.peerConnection.oniceconnectionstatechange=this._oniceconnectionstatechange.bind(this),this.peerConnection.onaddstream=this._onaddstream.bind(this),this.peerConnection.ontrack=this._ontrack.bind(this),this.processSignalingMessage=this.setAnswer.bind(this),this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.setLocalSDP.bind(this)),this.sendVideoStats={id:"",type:"",mediaType:"",googCodecName:"h264"===this.config.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},this.sendAudioStats={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},this.receiveAudioStats={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},this.receiveVideoStats={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"}}return e.prototype.addStream=function(e){this.peerConnection.addStream(e)},e.prototype.setAnswer=function(e){var t=JSON.parse(e);this.peerConnection.setRemoteDescription(new RTCSessionDescription({sdp:t.sdp,type:"answer"})),this.onsignalingmessage&&this.onsignalingmessage("")},e.prototype.close=function(){this.peerConnection.close()},e.prototype.getStats=function(e,t){if(void 0===t&&(t=500),t=t>500?500:t,Date.now()-this.lastTimeGetStats<t){var n=[];this.config.isSubscriber?(n.push(this.receiveVideoStats),n.push(this.receiveAudioStats)):(n.push(this.sendAudioStats),n.push(this.sendVideoStats)),n.push({id:"time",startTime:this.connectedTime,timestamp:Date.now()}),e&&e(n)}else this._getStats(e)},e.prototype._getStats=function(e){var t=this,n=[];this.peerConnection.getStats(null).then(function(i){t.lastTimeGetStats=Date.now(),Object.keys(i).map(function(e){var n=i[e];t.config.isSubscriber?n.type&&"inboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.receiveAudioStats.id=n.id+"recv",t.receiveAudioStats.type=n.type+"",t.receiveAudioStats.mediaType=n.mediaType+"",t.receiveAudioStats.packetsReceived=n.packetsReceived+"",t.receiveAudioStats.bytesReceived=n.bytesReceived+"",t.receiveAudioStats.packetsLost=n.packetsLost+"",t.receiveAudioStats.googJitterReceived=n.jitter+""):n.type&&"inboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.receiveVideoStats.id=n.id+"recv",t.receiveVideoStats.type=n.type+"",t.receiveVideoStats.mediaType=n.mediaType+"",t.receiveVideoStats.packetsReceived=n.packetsReceived+"",t.receiveVideoStats.bytesReceived=n.bytesReceived+"",t.receiveVideoStats.packetsLost=n.packetsLost+"",t.receiveVideoStats.googJitterBufferMs=n.jitter+"",t.receiveVideoStats.googPlisSent=n.pliCount+"",t.receiveVideoStats.googFirsSent=n.firCount+"",t.receiveVideoStats.googNacksSent=n.nackCount+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("v")?(t.receiveVideoStats.googFrameHeightReceived=n.frameHeight+"",t.receiveVideoStats.googFrameWidthReceived=n.frameWidth+"",t.receiveVideoStats.googFrameRateDecoded=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateOutput=n.framesPerSecond+"",t.receiveVideoStats.googFrameRateReceived=n.framesPerSecond+"",t.receiveVideoStats.googFramesDecoded=n.framesDecoded+"",t.receiveVideoStats.googFrameReceived=n.framesReceived+""):n.remoteSource&&n.type&&"track"===n.type&&n.trackIdentifier&&-1!==n.trackIdentifier.indexOf("a")&&(t.receiveAudioStats.audioOutputLevel=n.audioLevel+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"audio"===n.mediaType?(t.sendAudioStats.id=n.id+"send",t.sendAudioStats.type=n.type+"",t.sendAudioStats.mediaType=n.mediaType+"",t.sendAudioStats.packetsSent=n.packetsSent+"",t.sendAudioStats.bytesSent=n.bytesSent+""):!n.isRemote&&n.type&&"outboundrtp"===n.type&&n.mediaType&&"video"===n.mediaType?(t.sendVideoStats.id=n.id+"send",t.sendVideoStats.type=n.type+"",t.sendVideoStats.mediaType=n.mediaType+"",t.sendVideoStats.packetsSent=n.packetsSent+"",t.sendVideoStats.bytesSent=n.bytesSent+"",t.sendVideoStats.googRtt=n.roundTripTime+"",t.sendVideoStats.googPlisReceived=n.pliCount+"",t.sendVideoStats.googFirsReceived=n.firCount+"",t.sendVideoStats.googNacksReceived=n.nackCount+""):!n.remoteSource&&n.type&&"track"===n.type&&n.framesSent&&0!==n.framesSent&&(t.sendVideoStats.googFrameHeightSent=n.frameHeight+"",t.sendVideoStats.googFrameHeightInput=n.frameHeight+"",t.sendVideoStats.googFrameWidthSent=n.frameWidth+"",t.sendVideoStats.googFrameWidthInput=n.frameWidth+"",t.sendVideoStats.googFramesEncoded=n.framesSent+"",t.sendVideoStats.googFrameRateSent=n.framesPerSecond+"")}),t.config.isSubscriber?(n.push(t.receiveVideoStats),n.push(t.receiveAudioStats)):(n.push(t.sendAudioStats),n.push(t.sendVideoStats)),n.push({id:"time",startTime:t.connectedTime,timestamp:Date.now()}),e&&e(n)})},e.prototype.getStatsRate=function(e){this.getStats(e)},e.prototype.initPeecConnection=function(e){var t=e.stunServerUrl,n=e.turnServer,i=e.iceServers;return this.pcConfig={iceServers:[{urls:"stun:webcs.agora.io:3478"}]},i instanceof Array?this.pcConfig.iceServers=e.iceServers:t&&(t instanceof Array?t.map(function(e){"string"==typeof e&&""!==e&&this.pcConfig.iceServers.push({urls:e})}):"string"==typeof t&&""!==t&&this.pcConfig.iceServers.push({urls:t})),n&&(n instanceof Array?n.map(function(e){"string"==typeof e.url&&""!==e.url&&this.pcConfig.iceServers.push({username:e.username,credential:e.credential,url:e.url})}):"auto"!==n.mode&&"manual"!==n.mode||(n.udpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.udpport+"?transport=udp"}),"string"==typeof n.tcpport&&""!==n.tcpport&&this.pcConfig.iceServers.push({username:n.username,credential:n.credential,credentialType:"password",urls:"turn:"+n.url+":"+n.tcpport+"?transport=tcp"}),!0===n.forceturn&&(this.pcConfig.iceTransportPolicy="relay"))),new o.RTCPeerConnection(this.pcConfig)},e.prototype._ontrack=function(e){this.onaddstream&&this.onaddstream(e,"ontrack")},e.prototype._onaddstream=function(e){this.onaddstream&&this.onaddstream(e,"onaddstream")},e.prototype._oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(this.state=a.ESTABLISHED,this.connectedTime=Date.now()),this.oniceconnectionstatechange&&this.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},e.prototype._onicecandidate=function(e){!this.candidate&&e&&(this.candidate=e.candidate,this.peerConnection.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(this.editLocalSDP.bind(this)).then(this.setLocalSDP.bind(this)).then(this.sendOffer.bind(this)).catch())},e.prototype.setLocalSDP=function(e){return this.peerConnection.setLocalDescription(new RTCSessionDescription({sdp:e.sdp,type:"offer"})),this.state=a.PREPARING_OFFER,e},e.prototype.editLocalSDP=function(e){return e.sdp=this.setBandWidth(e.sdp),e.sdp=this.reviseOpus(e.sdp),e.sdp=this.addCandidate(e.sdp),e},e.prototype.setSendRecv=function(e){return e=(e=(e=e.replace(/a=recvonly\r\n/g,"a=sendrecv\r\n")).replace(/a=sendonly\r\n/g,"a=sendrecv\r\n")).replace(/a=inactive\r\n/g,"a=sendrecv\r\n")},e.prototype.setBandWidth=function(e){var t,n,i=this.config,a=i.codec,o=i.minVideoBW,s=i.maxVideoBW,c=i.maxAudioBW,d=i.clientId;if((t=e.match(/m=video.*\r\n/))&&o&&s){n=t[0]+"b=AS:"+s+"\r\n";var u=0,l=0;"h264"===a?(u=e.search(/a=rtpmap:(\d+) H264\/90000\r\n/),l=e.search(/H264\/90000\r\n/)):"vp8"===a&&(u=e.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),l=e.search(/VP8\/90000\r\n/)),-1!==u&&-1!==l&&l-u>10&&(n=n+"a=fmtp:"+e.slice(u+9,l-1)+" x-google-min-bitrate="+o+"\r\n"),e=e.replace(t[0],n),r.default.debug("["+d+"]Set Video Bitrate - min:"+o+" max:"+s)}return(t=e.match(/m=audio.*\r\n/))&&c&&(n=t[0]+"b=AS:"+c+"\r\n",e=e.replace(t[0],n)),e},e.prototype.reviseOpus=function(e){return e=(e=e.replace(/a=rtpmap:102 opus\/48000\/2/g,"a=rtpmap:111 opus/48000/2")).replace(/m=audio 9 UDP\/TLS\/RTP\/SAVPF 102 0 8 97 13 118 101/g,"m=audio 9 UDP/TLS/RTP/SAVPF 111 0 8 97 13 118 101")},e.prototype.addCandidate=function(e){return e+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"},e.prototype.sendOffer=function(e){this.config.callback(JSON.stringify({sdp:e.sdp,messageType:"OFFER",tiebreaker:Math.floor(429496723*Math.random()+1)})),this.state=a.OFFER_SENT},e}();t.default=s},function(e,t,n){var i=n(26),a=n(27),r=n(28);e.exports=function(e,t){return i(e)||a(e,t)||r()}},function(e,t,n){var i,a;a=this,void 0===(i=function(){return function(){"use strict";var e,t=this;function n(e){t.console&&(t.console.error?t.console.error(e):t.console.log&&t.console.log(e))}function i(e,t,i,a){var r=a||n,o=e.createShader(i);e.shaderSource(o,t),e.compileShader(o);var s=e.getShaderParameter(o,e.COMPILE_STATUS);if(!s){var c=e.getShaderInfoLog(o);return r("*** Error compiling shader '"+o+"':"+c),e.deleteShader(o),null}return o}function a(e,t,i,a,r){var o=r||n,s=e.createProgram();t.forEach(function(t){e.attachShader(s,t)}),i&&i.forEach(function(t,n){e.bindAttribLocation(s,a?a[n]:n,t)}),e.linkProgram(s);var c=e.getProgramParameter(s,e.LINK_STATUS);if(!c){var d=e.getProgramInfoLog(s);return o("Error in program linking:"+d),e.deleteProgram(s),null}return s}(e=e||t)===e.top&&(console.log("%c%s","color:blue;font-weight:bold;","for more about webgl-utils.js see:"),console.log("%c%s","color:blue;font-weight:bold;","http://webglfundamentals.org/webgl/lessons/webgl-boilerplate.html"));var r,o=["VERTEX_SHADER","FRAGMENT_SHADER"];return!document.documentMode&&window.StyleMedia&&(HTMLCanvasElement.prototype.getContext=(r=HTMLCanvasElement.prototype.getContext,function(){var e=arguments,t=e[0];return"webgl"===t&&((e=[].slice.call(arguments))[0]="experimental-webgl"),r.apply(this,e)})),{createProgram:a,createProgramFromSources:function(e,t,n,r,s){for(var c=[],d=0;d<t.length;++d)c.push(i(e,t[d],e[o[d]],s));return a(e,c,n,r,s)}}}.call(a)}.apply(t,[]))||(e.exports=i)},function(e,t,n){"use strict";var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))(function(a,r){function o(e){try{c(i.next(e))}catch(e){r(e)}}function s(e){try{c(i.throw(e))}catch(e){r(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(o,s)}c((i=i.apply(e,t||[])).next())})},a=this&&this.__generator||function(e,t){var n,i,a,r,o={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return r={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function s(r){return function(s){return function(r){if(n)throw new TypeError("Generator is already executing.");for(;o;)try{if(n=1,i&&(a=2&r[0]?i.return:r[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,r[1])).done)return a;switch(i=0,a&&(r=[2&r[0],a.value]),r[0]){case 0:case 1:a=r;break;case 4:return o.label++,{value:r[1],done:!1};case 5:o.label++,i=r[1],r=[0];continue;case 7:r=o.ops.pop(),o.trys.pop();continue;default:if(!(a=(a=o.trys).length>0&&a[a.length-1])&&(6===r[0]||2===r[0])){o=0;continue}if(3===r[0]&&(!a||r[1]>a[0]&&r[1]<a[3])){o.label=r[1];break}if(6===r[0]&&o.label<a[1]){o.label=a[1],a=r;break}if(a&&o.label<a[2]){o.label=a[2],o.ops.push(r);break}a[2]&&o.ops.pop(),o.trys.pop();continue}r=t.call(e,o)}catch(e){r=[6,e],i=0}finally{n=a=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,s])}}},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},o=this;Object.defineProperty(t,"__esModule",{value:!0});var s=n(29),c=n(4),d=r(n(0));t.getSupportedCodec=function(e){return i(o,void 0,void 0,function(){var t,n,i,r,o;return a(this,function(a){switch(a.label){case 0:return t={video:[],audio:[]},"undefined"!=typeof window?[3,1]:(d.default.error("getSupportedCodec: NOT_BROWSER_ENV"),[2,Promise.reject("NOT_BROWSER_ENV")]);case 1:try{n=s.createRTCPeerConnection({iceServers:[]})}catch(e){return d.default.error("Failed to init RTCPeerConnection",e),[2,Promise.reject(e)]}return n?[3,2]:(d.default.warning("getSupportedCodec: no RTCPeerConnection constructor is detected"),[2,Promise.resolve(t)]);case 2:return e&&e.stream?[3,7]:(i={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}},r=void 0,(c.isSafari()||c.isFireFox()||c.isWeChatBrowser())&&n.addTransceiver?(n.addTransceiver("audio"),n.addTransceiver("video"),[4,n.createOffer()]):[3,4]);case 3:return r=a.sent(),[3,6];case 4:return[4,new Promise(function(e,t){var a=setTimeout(function(){t("CREATEOFFER_TIMEOUT")},3e3);n.createOffer(function(t){clearTimeout(a),e(t)},function(e){clearTimeout(a),t(e)},i)})];case 5:r=a.sent(),a.label=6;case 6:return n.close(),o=r.sdp,[2,u(o)];case 7:return e.stream.getTracks&&n.addTrack?e.stream.getTracks().forEach(function(t){n.addTrack(t,e.stream)}):n.addStream(e.stream),r=void 0,c.isSafari()||c.isFireFox()?[4,n.createOffer()]:[3,9];case 8:return r=a.sent(),[3,11];case 9:return[4,new Promise(function(e,t){n.createOffer(e,t)})];case 10:r=a.sent(),a.label=11;case 11:return n.close(),o=r.sdp,[2,u(o)]}})})};var u=function(e){var t={video:[],audio:[]};return e.match(/ VP8/i)&&t.video.push("VP8"),e.match(/ H264/i)&&t.video.push("H264"),e.match(/ opus/i)&&t.audio.push("OPUS"),Promise.resolve(t)}},function(e,t,n){var i=n(31),a=n(32),r=n(33);e.exports=function(e){return i(e)||a(e)||r()}},function(e,t){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var i=new Uint8Array(16);e.exports=function(){return n(i),i}}else{var a=new Array(16);e.exports=function(){for(var e,t=0;t<16;t++)0==(3&t)&&(e=4294967296*Math.random()),a[t]=e>>>((3&t)<<3)&255;return a}}},function(e,t){for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=function(e,t){var i=t||0,a=n;return[a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],"-",a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]],a[e[i++]]].join("")}},function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t,n){var i=function(){return this||"object"==typeof self&&self}()||Function("return this")(),a=i.regeneratorRuntime&&Object.getOwnPropertyNames(i).indexOf("regeneratorRuntime")>=0,r=a&&i.regeneratorRuntime;if(i.regeneratorRuntime=void 0,e.exports=n(25),a)i.regeneratorRuntime=r;else try{delete i.regeneratorRuntime}catch(e){i.regeneratorRuntime=void 0}},function(e,t){!function(t){"use strict";var n,i=Object.prototype,a=i.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",s=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag",d="object"==typeof e,u=t.regeneratorRuntime;if(u)d&&(e.exports=u);else{(u=t.regeneratorRuntime=d?e.exports:{}).wrap=E;var l="suspendedStart",p="suspendedYield",f="executing",m="completed",g={},v={};v[o]=function(){return this};var h=Object.getPrototypeOf,S=h&&h(h(k([])));S&&S!==i&&a.call(S,o)&&(v=S);var _=b.prototype=y.prototype=Object.create(v);T.prototype=_.constructor=b,b.constructor=T,b[c]=T.displayName="GeneratorFunction",u.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===T||"GeneratorFunction"===(t.displayName||t.name))},u.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,b):(e.__proto__=b,c in e||(e[c]="GeneratorFunction")),e.prototype=Object.create(_),e},u.awrap=function(e){return{__await:e}},R(A.prototype),A.prototype[s]=function(){return this},u.AsyncIterator=A,u.async=function(e,t,n,i){var a=new A(E(e,t,n,i));return u.isGeneratorFunction(t)?a:a.next().then(function(e){return e.done?e.value:a.next()})},R(_),_[c]="Generator",_[o]=function(){return this},_.toString=function(){return"[object Generator]"},u.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},u.values=k,w.prototype={constructor:w,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(N),!e)for(var t in this)"t"===t.charAt(0)&&a.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=n)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function i(i,a){return s.type="throw",s.arg=e,t.next=i,a&&(t.method="next",t.arg=n),!!a}for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r],s=o.completion;if("root"===o.tryLoc)return i("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),d=a.call(o,"finallyLoc");if(c&&d){if(this.prev<o.catchLoc)return i(o.catchLoc,!0);if(this.prev<o.finallyLoc)return i(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return i(o.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return i(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&a.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<=r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?(this.method="next",this.next=r.finallyLoc,g):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),g},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),N(n),g}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var a=i.arg;N(n)}return a}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,i){return this.delegate={iterator:k(e),resultName:t,nextLoc:i},"next"===this.method&&(this.arg=n),g}}}function E(e,t,n,i){var a=t&&t.prototype instanceof y?t:y,r=Object.create(a.prototype),o=new w(i||[]);return r._invoke=function(e,t,n){var i=l;return function(a,r){if(i===f)throw new Error("Generator is already running");if(i===m){if("throw"===a)throw r;return D()}for(n.method=a,n.arg=r;;){var o=n.delegate;if(o){var s=O(o,n);if(s){if(s===g)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(i===l)throw i=m,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);i=f;var c=I(e,t,n);if("normal"===c.type){if(i=n.done?m:p,c.arg===g)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(i=m,n.method="throw",n.arg=c.arg)}}}(e,n,o),r}function I(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function y(){}function T(){}function b(){}function R(e){["next","throw","return"].forEach(function(t){e[t]=function(e){return this._invoke(t,e)}})}function A(e){var t;this._invoke=function(n,i){function r(){return new Promise(function(t,r){!function t(n,i,r,o){var s=I(e[n],e,i);if("throw"!==s.type){var c=s.arg,d=c.value;return d&&"object"==typeof d&&a.call(d,"__await")?Promise.resolve(d.__await).then(function(e){t("next",e,r,o)},function(e){t("throw",e,r,o)}):Promise.resolve(d).then(function(e){c.value=e,r(c)},function(e){return t("throw",e,r,o)})}o(s.arg)}(n,i,t,r)})}return t=t?t.then(r,r):r()}}function O(e,t){var i=e.iterator[t.method];if(i===n){if(t.delegate=null,"throw"===t.method){if(e.iterator.return&&(t.method="return",t.arg=n,O(e,t),"throw"===t.method))return g;t.method="throw",t.arg=new TypeError("The iterator does not provide a 'throw' method")}return g}var a=I(i,e.iterator,t.arg);if("throw"===a.type)return t.method="throw",t.arg=a.arg,t.delegate=null,g;var r=a.arg;return r?r.done?(t[e.resultName]=r.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=n),t.delegate=null,g):r:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,g)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function N(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function w(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function k(e){if(e){var t=e[o];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var i=-1,r=function t(){for(;++i<e.length;)if(a.call(e,i))return t.value=e[i],t.done=!1,t;return t.value=n,t.done=!0,t};return r.next=r}}return{next:D}}function D(){return{value:n,done:!0}}}(function(){return this||"object"==typeof self&&self}()||Function("return this")())},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){var n=[],i=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}return n}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i="object"==typeof window&&window.RTCPeerConnection,a="object"==typeof window&&window.webkitRTCPeerConnection,r="object"==typeof window&&window.mozRTCPeerConnection;t.createRTCPeerConnection=function(e){var t=i||a||r;return t?new t(e):null}},function(e,t,n){var i;
/*!
 * EventEmitter v5.2.8 - git.io/ee
 * Unlicense - http://unlicense.org/
 * Oliver Caldwell - https://oli.me.uk/
 * @preserve
 */!function(t){"use strict";function a(){}var r=a.prototype,o=t.EventEmitter;function s(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function c(e){return function(){return this[e].apply(this,arguments)}}r.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp)for(n in t={},i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n]);else t=i[e]||(i[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&((t={})[e]=n),t||n},r.addListener=function(e,t){if(!function e(t){return"function"==typeof t||t instanceof RegExp||!(!t||"object"!=typeof t)&&e(t.listener)}(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),a="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&-1===s(i[n],t)&&i[n].push(a?t:{listener:t,once:!1});return this},r.on=c("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=c("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,i,a=this.getListenersAsObject(e);for(i in a)a.hasOwnProperty(i)&&-1!==(n=s(a[i],t))&&a[i].splice(n,1);return this},r.off=c("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var i,a,r=e?this.removeListener:this.addListener,o=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(a=t[i])&&("function"==typeof a?r.call(this,i,a):o.call(this,i,a));return this},r.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},r.removeAllListeners=c("removeEvent"),r.emitEvent=function(e,t){var n,i,a,r,o=this.getListenersAsObject(e);for(r in o)if(o.hasOwnProperty(r))for(n=o[r].slice(0),a=0;a<n.length;a++)!0===(i=n[a]).once&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=c("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},r._getEvents=function(){return this._events||(this._events={})},a.noConflict=function(){return t.EventEmitter=o,a},void 0===(i=function(){return a}.call(t,n,t,e))||(e.exports=i)}("undefined"!=typeof window?window:this||{})},function(e,t){e.exports=function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}},function(e,t){e.exports=function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,n,a){"use strict";a.r(n);var r=a(3),o=a(0),s=a(2),c=function(){var e={dispatcher:{}};return e.dispatcher.eventListeners={},e.addEventListener=function(t,n){void 0===e.dispatcher.eventListeners[t]&&(e.dispatcher.eventListeners[t]=[]),e.dispatcher.eventListeners[t].push(n)},e.hasListeners=function(t){return!(!e.dispatcher.eventListeners[t]||!e.dispatcher.eventListeners[t].length)},e.on=e.addEventListener,e.removeEventListener=function(t,n){var i;-1!==(i=e.dispatcher.eventListeners[t].indexOf(n))&&e.dispatcher.eventListeners[t].splice(i,1)},e.dispatchEvent=function(t,n){var i;for(i in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(i)&&"function"==typeof e.dispatcher.eventListeners[t.type][i]&&(n?e.dispatcher.eventListeners[t.type][i](t):Promise.resolve(t).then(e.dispatcher.eventListeners[t.type][i]))},e.dispatchSocketEvent=function(t){var n;for(n in e.dispatcher.eventListeners[t.type])e.dispatcher.eventListeners[t.type]&&e.dispatcher.eventListeners[t.type].hasOwnProperty(n)&&"function"==typeof e.dispatcher.eventListeners[t.type][n]&&e.dispatcher.eventListeners[t.type][n](t.msg)},e},d=function(e){var t={};return t.type=e.type,t},u=function(e){var t=d(e);return t.stream=e.stream,t.reason=e.reason,t.msg=e.msg,t},l=function(e){var t=d(e);return t.uid=e.uid,t.attr=e.attr,t.stream=e.stream,t},p=function(e){var t=d(e);return t.msg=e.msg,t},f=function(e){var t=d(e);return t.url=e.url,t.uid=e.uid,t.status=e.status,t.reason=e.reason,t},m=a(4),g=function(){};g.prototype.set=function(e,t){["BatteryLevel"].indexOf(e)>-1&&(this[e]=t)};var v=new function(){var e=c();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.batteryManager=null,e._init=function(t,n){e.state=e.states.INITING,navigator.getBattery?navigator.getBattery().then(function(n){e.batteryManager=n,t&&setTimeout(function(){t()},0)}).catch(function(e){o.default.debug("navigator.getBattery is disabled",e),t&&t()}):(e.state=e.states.INITED,t&&t())},e._getBatteryStats=function(){var t={};return e.batteryManager&&e.batteryManager.level?t.BatteryLevel=Math.floor(100*e.batteryManager.level):t.BatteryLevel="UNSUPPORTED",t},e.getStats=function(t,n){var i=new g,a=e._getBatteryStats();a&&a.BatteryLevel&&i.set("BatteryLevel",a.BatteryLevel),t&&t(i)},e._init(),e},h=a(5),S=a.n(h),_=function(e){var t=c(e);return t.url=".",t},E=a(12),I={101100:"NO_FLAG_SET",101101:"FLAG_SET_BUT_EMPTY",101102:"INVALID_FALG_SET",101203:"NO_SERVICE_AVIABLE",0:"OK_CODE",5:"INVALID_VENDOR_KEY",7:"INVALID_CHANNEL_NAME",8:"INTERNAL_ERROR",9:"NO_AUTHORIZED",10:"DYNAMIC_KEY_TIMEOUT",11:"NO_ACTIVE_STATUS",13:"DYNAMIC_KEY_EXPIRED",14:"STATIC_USE_DYANMIC_KEY",15:"DYNAMIC_USE_STATIC_KEY",1010100:"NO_FLAG_SET",1010101:"FLAG_SET_BUT_EMPTY",1010102:"INVALID_FALG_SET",1010200:"NO_SERVICE_AVAILABLE",1010203:"NO_SERVICE_AVAILABLE_WEBRTC",1010205:"NO_SERVICE_AVAILABLE_DISPATCHER",1010208:"NO_SERVICE_AVAILABLE_APPCENTER",1010211:"NO_SERVICE_AVAILABLE_SUA",2010005:"INVALID_VENDOR_KEY",2010007:"INVALID_CHANNEL_NAME",2010008:"INTERNAL_ERROR",2010009:"NO_AUTHORIZED",2010010:"DYNAMIC_KEY_TIMEOUT",2010011:"NO_ACTIVE_STATUS",2010013:"DYNAMIC_KEY_EXPIRED",2010014:"STATIC_USE_DYANMIC_KEY",2010015:"DYNAMIC_USE_STATIC_KEY"},y={2000:"ERR_NO_VOCS_AVAILABLE",2001:"ERR_NO_VOS_AVAILABLE",2002:"ERR_JOIN_CHANNEL_TIMEOUT",2003:"WARN_REPEAT_JOIN",2004:"ERR_JOIN_BY_MULTI_IP",2011:"ERR_NOT_JOINED",2012:"WARN_REPEAT_JOIN",2013:"ERR_INVALID_VENDOR_KEY",2014:"ERR_INVALID_CHANNEL_NAME",2015:"ERR_INVALID_STRINGUID",2016:"ERR_TOO_MANY_USERS",2017:"ERR_SET_CLIENT_ROLE_TIMEOUT",2018:"ERR_SET_CLIENT_ROLE_NO_PERMISSION",2019:"ERR_SET_CLIENT_ROLE_ALREADY_IN_USE",2020:"ERR_PUBLISH_REQUEST_INVALID",2021:"ERR_SUBSCRIBE_REQUEST_INVALID",2022:"ERR_NOT_SUPPORTED_MESSAGE",2023:"ERR_ILLEAGAL_PLUGIN",101:"ERR_INVALID_VENDOR_KEY",102:"ERR_INVALID_CHANNEL_NAME",103:"WARN_NO_AVAILABLE_CHANNEL",104:"WARN_LOOKUP_CHANNEL_TIMEOUT",105:"WARN_LOOKUP_CHANNEL_REJECTED",106:"WARN_OPEN_CHANNEL_TIMEOUT",107:"WARN_OPEN_CHANNEL_REJECTED",108:"WARN_REQUEST_DEFERRED",109:"ERR_DYNAMIC_KEY_TIMEOUT",110:"ERR_NO_AUTHORIZED",111:"ERR_VOM_SERVICE_UNAVAILABLE",112:"ERR_NO_CHANNEL_AVAILABLE_CODE",113:"ERR_TOO_MANY_USERS",114:"ERR_MASTER_VOCS_UNAVAILABLE",115:"ERR_INTERNAL_ERROR",116:"ERR_NO_ACTIVE_STATUS",117:"ERR_INVALID_UID",118:"ERR_DYNAMIC_KEY_EXPIRED",119:"ERR_STATIC_USE_DYANMIC_KE",120:"ERR_DYNAMIC_USE_STATIC_KE",2:"K_TIMESTAMP_EXPIRED",3:"K_CHANNEL_PERMISSION_INVALID",4:"K_CERTIFICATE_INVALID",5:"K_CHANNEL_NAME_EMPTY",6:"K_CHANNEL_NOT_FOUND",7:"K_TICKET_INVALID",8:"K_CHANNEL_CONFLICTED",9:"K_SERVICE_NOT_READY",10:"K_SERVICE_TOO_HEAVY",14:"K_UID_BANNED",15:"K_IP_BANNED",16:"K_CHANNEL_BANNED"},T={1:"ERROR_ILLEAGAL_APPID",2:"ERROR_ILLEAGAL_UID",3:"INTERNAL_SERVER_ERROR"},b=["NO_FLAG_SET","NO_SERVICE_AVIABLE","FLAG_SET_BUT_EMPTY","EMPTY_ADDRESS_RESPONSE"],R=0,A=1,O=2,C=3,N=4,w=5,k=6,D=7,L=8,M=9,P=10,x={19:"ERR_ALREADY_IN_USE",10:"ERR_TIMEDOUT",3:"ERR_NOT_READY",9:"ERR_NO_PERMISSION",0:"UNKNOW_ERROR"},V={FAILED:"FAILED",INVALID_KEY:"INVALID_KEY",INVALID_CLIENT_MODE:"INVALID_CLIENT_MODE",INVALID_CLIENT_CODEC:"INVALID_CLIENT_CODEC",CLIENT_MODE_CODEC_MISMATCH:"CLIENT_MODE_CODEC_MISMATCH",WEB_API_NOT_SUPPORTED:"WEB_API_NOT_SUPPORTED",INVALID_PARAMETER:"INVALID_PARAMETER",NO_TRACK_IN_STREAM:"NO_TRACK_IN_STREAM",INVALID_OPERATION:"INVALID_OPERATION",INVALID_LOCAL_STREAM:"INVALID_LOCAL_STREAM",INVALID_REMOTE_STREAM:"INVALID_REMOTE_STREAM",INVALID_DYNAMIC_KEY:"INVALID_DYNAMIC_KEY",DYNAMIC_KEY_TIMEOUT:"DYNAMIC_KEY_TIMEOUT",NO_VOCS_AVAILABLE:"NO_VOCS_AVAILABLE",NO_VOS_AVAILABLE:"ERR_NO_VOS_AVAILABLE",JOIN_CHANNEL_TIMEOUT:"ERR_JOIN_CHANNEL_TIMEOUT",NO_AVAILABLE_CHANNEL:"NO_AVAILABLE_CHANNEL",LOOKUP_CHANNEL_TIMEOUT:"LOOKUP_CHANNEL_TIMEOUT",LOOKUP_CHANNEL_REJECTED:"LOOKUP_CHANNEL_REJECTED",OPEN_CHANNEL_TIMEOUT:"OPEN_CHANNEL_TIMEOUT",OPEN_CHANNEL_REJECTED:"OPEN_CHANNEL_REJECTED",REQUEST_DEFERRED:"REQUEST_DEFERRED",STREAM_ALREADY_PUBLISHED:"STREAM_ALREADY_PUBLISHED",STREAM_NOT_YET_PUBLISHED:"STREAM_NOT_YET_PUBLISHED",JOIN_TOO_FREQUENT:"JOIN_TOO_FREQUENT",SOCKET_ERROR:"SOCKET_ERROR",SOCKET_DISCONNECTED:"SOCKET_DISCONNECTED",PEERCONNECTION_FAILED:"PEERCONNECTION_FAILED",CONNECT_GATEWAY_ERROR:"CONNECT_GATEWAY_ERROR",SERVICE_NOT_AVAILABLE:"SERVICE_NOT_AVAILABLE",JOIN_CHANNEL_FAILED:"JOIN_CHANNEL_FAILED",PUBLISH_STREAM_FAILED:"PUBLISH_STREAM_FAILED",UNPUBLISH_STREAM_FAILED:"UNPUBLISH_STREAM_FAILED",SUBSCRIBE_STREAM_FAILED:"SUBSCRIBE_STREAM_FAILED",UNSUBSCRIBE_STREAM_FAILED:"UNSUBSCRIBE_STREAM_FAILED",NO_SUCH_REMOTE_STREAM:"NO_SUCH_REMOTE_STREAM",ERR_FAILED:"1",ERR_INVALID_VENDOR_KEY:"101",ERR_INVALID_CHANNEL_NAME:"102",WARN_NO_AVAILABLE_CHANNEL:"103",WARN_LOOKUP_CHANNEL_TIMEOUT:"104",WARN_LOOKUP_CHANNEL_REJECTED:"105",WARN_OPEN_CHANNEL_TIMEOUT:"106",WARN_OPEN_CHANNEL_REJECTED:"107",WARN_REQUEST_DEFERRED:"108",ERR_DYNAMIC_KEY_TIMEOUT:"109",ERR_INVALID_DYNAMIC_KEY:"110",ERR_NO_VOCS_AVAILABLE:"2000",ERR_NO_VOS_AVAILABLE:"2001",ERR_JOIN_CHANNEL_TIMEOUT:"2002",IOS_NOT_SUPPORT:"IOS_NOT_SUPPORT",WECHAT_NOT_SUPPORT:"WECHAT_NOT_SUPPORT",SHARING_SCREEN_NOT_SUPPORT:"SHARING_SCREEN_NOT_SUPPORT",STILL_ON_PUBLISHING:"STILL_ON_PUBLISHING",LOW_STREAM_ALREADY_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",LOW_STREAM_NOT_YET_PUBLISHED:"LOW_STREAM_ALREADY_PUBLISHED",HIGH_STREAM_NOT_VIDEO_TRACE:"HIGH_STREAM_NOT_VIDEO_TRACE",NOT_FIND_DEVICE_BY_LABEL:"NOT_FIND_DEVICE_BY_LABEL",ENABLE_DUALSTREAM_FAILED:"ENABLE_DUALSTREAM_FAILED",DISABLE_DUALSTREAM_FAILED:"DISABLE_DUALSTREAM_FAILED",PLAYER_NOT_FOUND:"PLAYER_NOT_FOUND",ELECTRON_NOT_SUPPORT_SHARING_SCREEN:"ELECTRON_NOT_SUPPORT_SHARING_SCREEN",BAD_ENVIRONMENT:"BAD_ENVIRONMENT",LOAD_AUDIO_FAILED:"LOAD_AUDIO_FAILED"},U=0,j=function(e){var t=_({});t.id=e.id,t.playerId=U++,t.fit=e.options&&e.options.fit,"contain"!==t.fit&&"cover"!==t.fit&&(t.fit=null),t.url=e.url,t.stream=e.stream.stream,t.elementID=e.elementID,t.setAudioOutput=function(e,n,i){var a=t.video||t.audio;return a?a.setSinkId?void a.setSinkId(e).then(function(){return o.default.debug("["+t.id+"] "+"video ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),a==t.video&&t.audio?t.audio.setSinkId(e):Promise.resolve()}).then(function(){return o.default.debug("["+t.id+"] "+"audio ".concat(t.id," setAudioOutput ").concat(e," SUCCESS")),n&&n()}).catch(function(e){return o.default.error("["+t.id+"] VideoPlayer.setAudioOutput",e),i&&i(e)}):(o.default.error("["+t.id+"] ",V.WEB_API_NOT_SUPPORTED),i&&i(V.WEB_API_NOT_SUPPORTED)):(o.default.error("["+t.id+"] ",V.PLAYER_NOT_FOUND),i&&i(V.PLAYER_NOT_FOUND))},t.destroy=function(){o.default.debug("[".concat(t.id,"] destroy ").concat(e.stream.local?"local":"remote"," Player ").concat(t.id)),Object(E.setSrcObject)(t.video,null),Object(E.setSrcObject)(t.audio,null),t.video.pause(),delete t.resizer,clearInterval(t.mediaPlayerTimer),t.mediaPlayerTimer=null,document.getElementById(t.div.id)&&t.parentNode.contains(t.div)&&t.parentNode.removeChild(t.div),["video","audio"].forEach(function(n){t[n];var i=a[n];clearTimeout(i.playDeferTimeout),i.formerMediaState=null;var r={playerId:t.playerId,stateId:i.stateId+1,playDeferTimeout:null,error:!1,status:"aborted",reason:"stop",updatedAt:Date.now()};a[n]=r;var c={type:"player-status-change",playerId:t.playerId,mediaType:n,status:r.status,reason:r.reason,isErrorState:!1,streamId:t.id};o.default.debug("[".concat(t.id,"] Media Player Status Change Triggered by destroy()"),c),e.stream.dispatchEvent(c),s.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:c,tag:"tracer"})()})},t.div=document.createElement("div"),t.div.setAttribute("id","player_"+t.id),e.stream.video?t.div.setAttribute("style","width: 100%; height: 100%; position: relative; background-color: black; overflow: hidden;"):t.div.setAttribute("style","width: 100%; height: 100%; position: relative; overflow: hidden;"),t.video=document.createElement("video"),t.video.setAttribute("id","video"+t.id),e.stream.local&&!e.stream.screen?e.stream.mirror?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; transform: rotateY(180deg); object-fit: ".concat(t.fit||"cover",";")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.video?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"cover",";")):e.stream.screen?t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; object-fit: ".concat(t.fit||"contain")):t.video.setAttribute("style","width: 100%; height: 100%; position: absolute; display: none; object-fit: ".concat(t.fit||"cover"));var n={autoplay:!0,muted:!!e.stream.local||!(!m.isSafari()&&"iOS"!==m.getBrowserOS())&&"video_element_muted",playsinline:!0,controls:!(!m.isSafari()&&"iOS"!==m.getBrowserOS()||e.stream.local),volume:null},i=S()({},n,e.options);!0!==i.muted||i.volume||(i.volume=0),i.autoplay&&t.video.setAttribute("autoplay",""),!0!==i.muted&&"video_element_muted"!==i.muted||(t.video.setAttribute("muted",""),t.video.muted=!0),i.playsinline&&t.video.setAttribute("playsinline",""),i.controls&&t.video.setAttribute("controls",""),Number.isFinite(i.volume)&&(t.video.volume=i.volume),t.audio=document.createElement("audio"),t.audio.setAttribute("id","audio"+t.id),i.autoplay&&t.audio.setAttribute("autoplay",""),!0===i.muted&&t.audio.setAttribute("muted",""),!0===i.muted&&(t.audio.muted=!0),i.playsinline&&t.audio.setAttribute("playsinline",""),Number.isFinite(i.volume)&&(t.audio.volume=i.volume),void 0!==t.elementID?(document.getElementById(t.elementID).appendChild(t.div),t.container=document.getElementById(t.elementID)):(document.body.appendChild(t.div),t.container=document.body),t.parentNode=t.div.parentNode;var a={video:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()},audio:{playerId:t.playerId,stateId:0,playDeferTimeout:null,error:!1,status:"init",reason:null,updatedAt:Date.now()}};t.mediaElemExists=function(e){for(var t=e,n=0;n<Object(r.getParameter)("MEDIA_ELEMENT_EXISTS_DEPTH")&&t;n++)t=t.parentNode;return!!t};var c=function(e){return t.mediaElemExists(e)?e.paused?"paused":"play":"aborted"},d=function(e,t,n){var i=c(e),a=!0;return"paused"===i?("audio"===t&&!0===n.muted&&(a=!1),n.autoplay||(a=!1)):"play"===i?"video"===t?a=!1:!0===n.muted?e.muted&&(a=!1):e.muted||(a=!1):"aborted"===i&&(a=!1),a},u=function(n){var u,l=this;if(l===t.video?u="video":l===t.audio&&(u="audio"),u){n.type||o.default.error("[".concat(t.id,"] Unexpected evt"),n);var p=c(l);clearTimeout(a[u].playDeferTimeout),a[u].playDeferTimeout=setTimeout(function(){a[u].playDeferTimeout=null;var r=a[u],f=c(l);if(p===f){var m={playerId:t.playerId,stateId:r.stateId+1,playDeferTimeout:null,error:d(l,u,i),status:c(l),reason:n.type,updatedAt:Date.now()};if(r.status!==m.status){a[u]=m;var g={type:"player-status-change",playerId:t.playerId,mediaType:u,status:m.status,reason:m.reason,isErrorState:m.error,streamId:t.id};o.default.debug("[".concat(t.id,"] Media Player Status Change"),g),e.stream.dispatchEvent(g),s.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:g,tag:"tracer"})()}}else o.default.debug("[".concat(t.id,"] Status Change after event Triggered.")+"Stream ".concat(t.id," PlayerId ").concat(t.playerId," mediaType ").concat(u," Status ").concat(p,"=>").concat(f))},Object(r.getParameter)("PLAYER_STATE_DEFER"))}else o.default.error("[".concat(t.id,"] Unknown media element"),l)};if(t.mediaPlayerTimer=setInterval(function(){["video","audio"].forEach(function(n){var r=t[n],u=a[n];if(!u.playDeferTimeout){var l={playerId:t.playerId,stateId:u.stateId+1,playDeferTimeout:null,error:d(r,n,i),status:c(r),reason:"timer",updatedAt:Date.now()};if(u.status!==l.status){o.default.debug("[".concat(t.id,"] Player ").concat(t.playerId," ").concat(n," Status Changed Detected by Timer: ").concat(u.status,"=>").concat(l.status)),a[n]=l;var p={type:"player-status-change",playerId:t.playerId,mediaType:n,status:l.status,reason:l.reason,isErrorState:l.error,streamId:t.id};o.default.debug("[".concat(t.id,"] Media Player Status Change"),p),e.stream.dispatchEvent(p),s.b.reportApiInvoke(e.stream.sid,{name:"Stream.playerStatusChange",options:p,tag:"tracer"})()}}})},Object(r.getParameter)("PLAYER_STATE_DEFER")),t.video.addEventListener("playing",function(e){!function e(){t.video.videoWidth*t.video.videoHeight>4?o.default.debug("["+t.id+"] video dimensions:",t.video.videoWidth,t.video.videoHeight):setTimeout(e,50)}()}),t.video.addEventListener("playing",u),t.video.addEventListener("canplay",u),t.video.addEventListener("abort",u),t.video.addEventListener("onerror",u),t.video.addEventListener("suspend",u),t.video.addEventListener("stalled",u),t.video.addEventListener("pause",u),t.audio.addEventListener("playing",u),t.audio.addEventListener("canplay",u),t.audio.addEventListener("abort",u),t.audio.addEventListener("onerror",u),t.audio.addEventListener("suspend",u),t.audio.addEventListener("stalled",u),t.audio.addEventListener("pause",u),e.stream.hasVideo()||e.stream.hasScreen())t.div.appendChild(t.video),t.div.appendChild(t.audio),m.isEdge()?t.video.srcObject=e.stream.stream:(Object(E.attachMediaStream)(t.video,e.stream.stream),Object(E.attachMediaStream)(t.audio,e.stream.stream));else if(!1!==i.muted&&"video_element_muted"!==i.muted||(t.video.removeAttribute("muted"),t.video.muted=!1),t.div.appendChild(t.video),window.MediaStream&&(m.isSafari()||"iOS"===m.getBrowserOS())){var l=new MediaStream(e.stream.stream.getAudioTracks());Object(E.setSrcObject)(t.video,l)}else Object(E.setSrcObject)(t.video,e.stream.stream);return t.setAudioVolume=function(e){var n=parseInt(e)/100;isFinite(n)&&(n<0?n=0:n>1&&(n=1),t.video&&(t.video.volume=n),t.audio&&(t.audio.volume=n))},t},F=function(e){var t={},n=E.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{url:"stun:webcs.agora.io:3478"}]};var i={id:"outbound_audio_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},a={id:"outbound_video_ssrc_send",type:"ssrc",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},s={id:"inbound_audio_ssrc_recv",type:"ssrc",mediaType:"",googCodecName:"opus",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},c={id:"inbound_video_ssrc_recv",type:"ssrc",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesReceived:"0",googFramesDecoded:"0"},d={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"};t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map(function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})}):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&(e.turnServer instanceof Array?e.turnServer.map(function(e){"string"==typeof e.url&&""!==e.url&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,url:e.url})}):"auto"!==e.turnServer.mode&&"manual"!==e.turnServer.mode||(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}t.iceCandidateTimer=setTimeout(function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,i,a,r;i=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),a=n.match(/a=candidate:.+typ\shost.+\r\n/),r=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===i&&null===a&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+i+" relay candidate: "+r+" host candidate : "+a),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},o.default.debug("["+t.clientId+']Created webkitRTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".');var u=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},l=function(n){var i,a;if((i=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW){a=i[0]+"b=AS:"+e.maxVideoBW+"\r\n";var r=0,s=0;"h264"===e.codec?(r=n.search(/a=rtpmap:(\d+) H264\/90000\r\n/),s=n.search(/H264\/90000\r\n/)):"vp8"===e.codec&&(r=n.search(/a=rtpmap:(\d+) VP8\/90000\r\n/),s=n.search(/VP8\/90000\r\n/)),-1!==r&&-1!==s&&s-r>10&&(a=a+"a=fmtp:"+n.slice(r+9,s-1)+" x-google-min-bitrate="+e.minVideoBW+"\r\n"),n=n.replace(i[0],a),o.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)}return(i=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(a=i[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(i[0],a)),n};t.processSignalingMessage=function(e){var n,i=JSON.parse(e);t.incomingMessage=i,"new"===t.state?"OFFER"===i.messageType?(n={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){}),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===i.messageType?((n={sdp:i.sdp,type:"answer"}).sdp=u(n.sdp),n.sdp=l(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){}),t.state="established"):"pr-answer"===i.messageType?(n={sdp:i.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){})):"offer"===i.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===i.messageType?(n={sdp:i.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){}),t.state="offer-received",t.markActionNeeded()):"ANSWER"===i.messageType?((n={sdp:i.sdp,type:"answer"}).sdp=u(n.sdp),n.sdp=l(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)).catch(function(e){})):t.error("Illegal message for this state: "+i.messageType+" in state "+t.state))};var p=0,f=0;return t.getVideoRelatedStats=function(e){t.getStats(function(n){n.forEach(function(n){if(t.isSubscriber){if("video"===n.mediaType&&n.id&&~n.id.indexOf("recv")){if(m.isChromeKernel()&&+m.getBrowserVersion()>=76){var i=+n.googFramesReceived-p,a=+n.googFramesDecoded-f;t._setStat(c,"googFrameRateReceived",i),t._setStat(c,"googFrameRateDecoded",a),t._setStat(c,"googFrameRateOutput",a),p=+n.googFramesReceived,f=+n.googFramesDecoded}e&&e({mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:n.googFrameRateReceived,frameRateDecoded:n.googFrameRateDecoded,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})}}else"video"===n.mediaType&&n.id&&~n.id.indexOf("send")&&e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:n.googFrameRateInput,frameRateSent:n.googFrameRateSent,googRtt:n.googRtt})})})},t.getAudioRelatedStats=function(e){t.getStats(function(n){n.forEach(function(n){t.isSubscriber&&"audio"===n.mediaType&&n.id&&~n.id.indexOf("recv")&&e&&e({mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:parseInt(n.googDecodingPLC)+parseInt(n.googDecodingPLCCNG)+"",frameReceived:n.googDecodingCTN,googJitterReceived:n.googJitterReceived,bytesReceived:n.bytesReceived,packetsReceived:n.packetsReceived,packetsLost:n.packetsLost})})})},t.getStatsRate=function(e){t.getStats(function(t){e(t)})},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):(t.lastTimeGetStats=Date.now(),this._getStats(function(n,i){t.filterStatsCache=n,t.originStatsCache=i,e&&e(n,i)}))},t._setStat=function(e,t,n){e.hasOwnProperty(t)&&(null!=n&&n!==1/0&&n==n||(n=0),e[t]=n+"")},t._processGetStatsAfterChrome76=function(e){var n=this;t.lastStats||(t.lastStats=new Map),t.peerConnection.getStats().then(function(r){var o=[],u=[],l=new Map,p=new Date,f=!0,m=!1,g=void 0;try{for(var v,h=r.values()[Symbol.iterator]();!(f=(v=h.next()).done);f=!0){var _=v.value;"codec"!=_.type?"candidate-pair"!=_.type?("inbound-rtp"===_.type&&"video"===_.mediaType&&l.set("inbound-video",_),"inbound-rtp"===_.type&&"audio"===_.mediaType&&l.set("inbound-audio",_),"outbound-rtp"===_.type&&"audio"===_.mediaType&&l.set("outbound-audio",_),"outbound-rtp"===_.type&&"video"===_.mediaType&&l.set("outbound-video",_),"track"===_.type&&"video"===_.kind&&_.remoteSource&&l.set("remote-video-track",_),"track"===_.type&&"audio"===_.kind&&_.remoteSource&&l.set("remote-audio-track",_),"remote-inbound-rtp"===_.type&&"video"===_.mediaType&&l.set("remote-inbound-video",_),"remote-inbound-rtp"===_.type&&"audio"===_.mediaType&&l.set("remote-inbound-audio",_),"track"!==_.type||"video"!==_.kind||_.remoteSource||l.set("local-video-track",_),"track"!==_.type||"audio"!==_.kind||_.remoteSource||l.set("local-audio-track",_),"media-source"===_.type&&"video"===_.kind&&l.set("media-source-video",_),"media-source"===_.type&&"audio"===_.kind&&l.set("media-source-audio",_)):u.push(_):o.push(_)}}catch(e){m=!0,g=e}finally{try{f||null==h.return||h.return()}finally{if(m)throw g}}l.set("codec",o),l.set("candidatePairs",u),l.set("timestamp",+p);var E=null,I=null;if(c.timestamp=p,s.timestamp=p,i.timestamp=p,i.timestamp=p,d.timestamp=p,n.isSubscriber)(E=l.get("inbound-video"))&&(t._setStat(c,"id","inbound_video_ssrc_recv"),t._setStat(c,"mediaType",E.mediaType),t._setStat(c,"packetsLost",E.packetsLost),t._setStat(c,"googDecodeMs",null),t._setStat(c,"googMaxDecodeMs",null),t._setStat(c,"googRenderDelayMs",null),t._setStat(c,"googMinPlayoutDelayMs",null),t._setStat(c,"googNacksSent",E.nackCount),t._setStat(c,"googPlisSent",E.pliCount),t._setStat(c,"googFirsSent",E.firCount),t._setStat(c,"bytesReceived",E.bytesReceived),t._setStat(c,"packetsReceived",E.packetsReceived)),(E=l.get("inbound-audio"))&&(t._setStat(s,"id","inbound_audio_ssrc_recv"),t._setStat(s,"mediaType",E.mediaType),t._setStat(s,"bytesReceived",E.bytesReceived),t._setStat(s,"packetsLost",E.packetsLost),t._setStat(s,"packetsReceived",E.packetsReceived),t._setStat(s,"googAccelerateRate",E.removedSamplesForAcceleration),t._setStat(s,"googCurrentDelayMs",E.jitterBufferDelay),t._setStat(s,"googDecodingCNG",null),t._setStat(s,"googDecodingCTN",null),t._setStat(s,"googDecodingCTSG",null),t._setStat(s,"googDecodingNormal",null),t._setStat(s,"googDecodingPLC",null),t._setStat(s,"googDecodingPLCCNG",null),t._setStat(s,"googJitterReceived",E.jitter),t._setStat(s,"googPreferredJitterBufferMs",null),t._setStat(s,"googSecondaryDecodedRate",null)),(E=l.get("remote-video-track"))&&(t._setStat(c,"googTargetDelayMs",E.jitterBufferDelay),t._setStat(c,"googFrameWidthReceived",E.frameWidth),t._setStat(c,"googFrameHeightReceived",E.frameHeight),t._setStat(c,"googJitterBufferMs",E.jitterBufferDelay/E.jitterBufferEmittedCount*1e3),t._setStat(c,"googCurrentDelayMs",E.jitterBufferDelay),t._setStat(c,"googFramesDecoded",E.framesDecoded),t._setStat(c,"googFramesReceived",E.framesReceived)),(E=l.get("remote-audio-track"))&&(t._setStat(s,"audioOutputLevel",32767*E.audioLevel),t._setStat(s,"googJitterBufferMs",E.jitterBufferDelay/E.jitterBufferEmittedCount*1e3),t._setStat(s,"googExpandRate",E.concealedSamples),t._setStat(s,"googPreemptiveExpandRate",E.insertedSamplesForDeceleration),t._setStat(s,"googSpeechExpandRate",E.silentConcealedSamples));else{var y=t.lastStats.get("timestamp"),T=t.lastStats.get("outbound-video");if((E=l.get("outbound-audio"))&&(t._setStat(i,"id","outbound_audio_ssrc_send"),t._setStat(i,"mediaType",E.mediaType),t._setStat(i,"aecDivergentFilterFraction",null),t._setStat(i,"bytesSent",E.bytesSent),t._setStat(i,"packetsSent",E.packetsSent),I=E.transportId),E=l.get("outbound-video")){if(t._setStat(a,"id","outbound_video_ssrc_send"),t._setStat(a,"mediaType",E.mediaType),t._setStat(a,"bytesSent",E.bytesSent),t._setStat(a,"packetsSent",E.packetsSent),t._setStat(a,"googAdaptationChanges",E.qualityLimitationDurations),t._setStat(a,"googAvgEncodeMs",null),t._setStat(a,"googEncodeUsagePercent",null),I=E.transportId,E.totalEncodedBytesTarget&&T&&T.totalEncodedBytesTarget){var b=(E.totalEncodedBytesTarget-T.totalEncodedBytesTarget)/(+new Date-y);t._setStat(d,"googTargetEncBitrate",Math.floor(8*b*1e3))}if(E.retransmittedBytesSent&&T&&T.retransmittedBytesSent){var R=(E.retransmittedBytesSent-T.retransmittedBytesSent)/(+new Date-y);t._setStat(d,"googRetransmitBitrate",Math.floor(8*R*1e3))}if(E.bytesSent&&T&&T.bytesSent){var A=(E.bytesSent-T.bytesSent)/(+new Date-y);t._setStat(d,"googTransmitBitrate",Math.floor(8*A*1e3)),t._setStat(d,"googActualEncBitrate",Math.floor(8*A*1e3))}if(E.totalPacketSendDelay&&T&&T.totalPacketSendDelay){var O=(E.totalPacketSendDelay-T.totalPacketSendDelay)/(+new Date-y);t._setStat(d,"googBucketDelay",Math.floor(1e3*O))}}if((E=l.get("remote-inbound-video"))&&(t._setStat(a,"packetsLost",E.packetsLost),t._setStat(a,"googRtt",E.roundTripTime)),(E=l.get("local-video-track"))&&(t._setStat(a,"googFrameHeightSent",E.frameHeight),t._setStat(a,"googFrameWidthSent",E.frameWidth),void 0!==E.framesPerSecond&&t._setStat(a,"googFrameRateSent",E.framesPerSecond)),(E=l.get("local-audio-track"))&&(t._setStat(i,"googEchoCancellationReturnLoss",E.echoReturnLoss),t._setStat(i,"googEchoCancellationReturnLossEnhancement",E.echoReturnLossEnhancement)),(E=l.get("media-source-video"))&&(t._setStat(a,"googFrameHeightInput",E.height),t._setStat(a,"googFrameWidthInput",E.width),t._setStat(a,"googFrameRateInput",E.framesPerSecond)),(E=l.get("media-source-audio"))&&t._setStat(i,"audioInputLevel",32767*E.totalAudioEnergy),(E=l.get("inbound-video"))&&(t._setStat(a,"googFirsReceived",E.firCount),t._setStat(a,"googNacksReceived",E.nackCount),t._setStat(a,"googPlisReceived",E.pliCount)),I)l.get("candidatePairs").map(function(e){I==e.transportId&&t._setStat(d,"googAvailableSendBandwidth",e.availableOutgoingBitrate)});else{var C=l.get("candidatePairs")[0];C&&t._setStat(d,"googAvailableSendBandwidth",C.availableOutgoingBitrate)}}t.lastStats=l;var N=[S()({},a),S()({},i),S()({},c),S()({},s),S()({},d)];N.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(N)})},t._processGetStatsBeforeChrome76=function(e){t.peerConnection.getStats(function(n){var r=[],o=[],u=null;Object.keys(n).forEach(function(e){var t=n[e];t&&(o.push(t),u=t.timestamp,"VideoBwe"===t.type?d=t:t.id.indexOf("_send")>-1&&"video"===t.mediaType?a=t:t.id.indexOf("_send")>-1&&"audio"===t.mediaType?i=t:t.id.indexOf("_recv")>-1&&"video"===t.mediaType?c=t:t.id.indexOf("_recv")>-1&&"audio"===t.mediaType&&(s=t))}),(r=[S()({},a),S()({},i),S()({},c),S()({},s),S()({},d)]).push({id:"time",startTime:t.connectedTime,timestamp:u||new Date}),e(r,o)})},t._getStats=function(e){Object(r.getParameter)("CHROME_NEW_STATS")&&m.isChromeKernel()&&+m.getBrowserVersion()>=76?t._processGetStatsAfterChrome76(e):t._processGetStatsBeforeChrome76(e)},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){t.peerConnection.removeTrack(t.peerConnection.getSenders().find(function(t){return t.track==e}))},t.addStream=function(e){t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater(function(){t.onstablestate()})},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var e;if(t.actionNeeded){if("new"===t.state||"established"===t.state)t.peerConnection.createOffer(function(e){if(e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")},function(e){o.default.debug("["+t.clientId+"]peer connection create offer failed ",e)},t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer(function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}},function(e){o.default.debug("["+t.clientId+"]peer connection create answer failed ",e)},t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;e=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",e),t.state="established"}else t.debug("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var i={};i.messageType=e,i.sdp=n,"OFFER"===e?(i.offererSessionId=t.sessionId,i.answererSessionId=t.otherSessionId,i.seq=t.sequenceNumber+=1,i.tiebreaker=Math.floor(429496723*Math.random()+1)):(i.offererSessionId=t.incomingMessage.offererSessionId,i.answererSessionId=t.sessionId,i.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(i))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find(function(t){return t.track.kind==e});if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,i){var a=t._getSender(e.kind);if(!a)return i("NO_SENDER_FOUND");try{a.replaceTrack(e)}catch(e){return i&&i(e)}setTimeout(function(){return n&&n()},50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&(t.onaddstream(e,"ontrack"),t.peerConnection.onaddstream=null)},t.peerConnection.onaddstream=function(e){t.onaddstream&&(t.onaddstream(e,"onaddstream"),t.peerConnection.ontrack=null)},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then(function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=u(e.sdp),e.sdp=l(e.sdp),t.peerConnection.setLocalDescription(e)}).then(function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)}).catch(function(e){console.log("createOffer error: ",e)})},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.onnegotiationneeded=null,t.state="new",t.markActionNeeded(),t},B=function(e){var t={},n=E.RTCPeerConnection;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[{urls:["stun:webcs.agora.io:3478","stun:stun.l.google.com:19302"]}],bundlePolicy:"max-bundle"},t.con={optional:[{DtlsSrtpKeyAgreement:!0}]},e.iceServers instanceof Array?t.pc_config.iceServers=e.iceServers:(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map(function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})}):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&(e.turnServer instanceof Array?e.turnServer.map(function(e){"string"==typeof e.url&&""!==e.url&&t.pc_config.iceServers.push({username:e.username,credential:e.credential,url:e.url})}):"auto"!==e.turnServer.mode&&"manual"!==e.turnServer.mode||(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:["turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"]}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:["turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"]}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay")))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={mandatory:{OfferToReceiveVideo:e.video,OfferToReceiveAudio:e.audio}},t.roapSessionId=103;try{t.pc_config.sdpSemantics="plan-b",t.peerConnection=new n(t.pc_config,t.con)}catch(e){delete t.pc_config.sdpSemantics,t.peerConnection=new n(t.pc_config,t.con)}o.default.debug("["+t.clientId+']safari Created RTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".'),t.iceCandidateTimer=setTimeout(function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,i,a,r;i=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),a=n.match(/a=candidate:.+typ\shost.+\r\n/),r=n.match(/a=candidate:.+typ\srelay.+\r\n/),0===t.iceCandidateCount&&(t.timeout=setTimeout(function(){t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},1e3)),null===i&&null===a&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+i+" relay candidate: "+r+" host candidate : "+a),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1};var i=function(t){return e.screen&&(t=t.replace("a=x-google-flag:conference\r\n","")),t},a=function(n){var i,a;return(i=n.match(/m=video.*\r\n/))&&e.minVideoBW&&e.maxVideoBW&&(a=i[0]+"b=AS:"+e.maxVideoBW+"\r\n",n=n.replace(i[0],a),o.default.debug("["+t.clientId+"]Set Video Bitrate - min:"+e.minVideoBW+" max:"+e.maxVideoBW)),(i=n.match(/m=audio.*\r\n/))&&e.maxAudioBW&&(a=i[0]+"b=AS:"+e.maxAudioBW+"\r\n",n=n.replace(i[0],a)),n};t.processSignalingMessage=function(e){var n,r=JSON.parse(e);t.incomingMessage=r,"new"===t.state?"OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),n.sdp=n.sdp.replace(/a=x-google-flag:conference\r\n/g,""),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="established"):"pr-answer"===r.messageType?(n={sdp:r.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n))):"offer"===r.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===r.messageType?(n={sdp:r.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new RTCSessionDescription(n)),t.state="offer-received",t.markActionNeeded()):"ANSWER"===r.messageType?((n={sdp:r.sdp,type:"answer"}).sdp=i(n.sdp),n.sdp=a(n.sdp),t.peerConnection.setRemoteDescription(new RTCSessionDescription(n))):t.error("Illegal message for this state: "+r.messageType+" in state "+t.state))};var s={id:"",type:"",mediaType:"",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},c={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0",googFramesEncoded:"0"},d={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},u={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googFramesDecoded:"0",googFrameReceived:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0"},l={id:"bweforvideo",type:"VideoBwe",googAvailableSendBandwidth:"0",googAvailableReceiveBandwidth:"0",googActualEncBitrate:"0",googRetransmitBitrate:"0",googTargetEncBitrate:"0",googBucketDelay:"0",googTransmitBitrate:"0"},p=0,f=0,m=0;return t.getVideoRelatedStats=function(n){t.peerConnection.getStats().then(function(i){var a={peerId:t.uid,mediaType:"video",isVideoMute:t.isVideoMute};i.forEach(function(i){if(t.isSubscriber){if("track"===i.type&&(~i.id.indexOf("video")||~i.trackIdentifier.indexOf("v"))){if(!t.lastReport)return void(t.lastReport=i);a.frameRateReceived=i.framesReceived-t.lastReport.framesReceived+"",a.frameRateDecoded=i.framesDecoded-t.lastReport.framesDecoded+"",t.lastReport=i}"inbound-rtp"===i.type&&~i.id.indexOf("Video")&&(a.bytesReceived=i.bytesReceived+"",a.packetsReceived=i.packetsReceived+"",a.packetsLost=i.packetsLost+"")}else if("outbound-rtp"===i.type&&~i.id.indexOf("Video")){if(!t.lastReport)return void(t.lastReport=i);n&&n({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:e.maxFrameRate+"",frameRateSent:i.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=i}}),n&&n(a)})},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then(function(n){n.forEach(function(n){t.isSubscriber&&"inbound-rtp"===n.type&&~n.id.indexOf("Audio")&&e&&e({peerId:t.uid,mediaType:"audio",isAudioMute:t.isAudioMute,frameDropped:n.packetsLost+"",frameReceived:n.packetsReceived+"",googJitterReceived:n.jitter+"",bytesReceived:n.bytesReceived+"",packetsReceived:n.packetsReceived+"",packetsLost:n.packetsLost+""})})})},t.getStatsRate=function(e){t.getStats(function(t){t.forEach(function(e){"outbound-rtp"===e.type&&"video"===e.mediaType&&e.googFramesEncoded&&(e.googFrameRateSent=((e.googFramesEncoded-p)/3).toString(),p=e.googFramesEncoded),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(e.googFrameRateReceived&&(e.googFrameRateReceived=((e.googFrameReceived-m)/3).toString(),m=e.googFrameReceived),e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-f)/3).toString(),f=e.googFramesDecoded))}),e(t)})},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats(function(n,i){t.filterStatsCache=n,t.originStatsCache=i,t.lastTimeGetStats=Date.now(),e&&e(n,i)})},t._getStats=function(e){var n=[];t.peerConnection.getStats().then(function(i){i.forEach(function(e){n.push(e),"outbound-rtp"===e.type&&"audio"===e.mediaType&&(s.id=e.id,s.type=e.type,s.mediaType=e.mediaType,s.bytesSent=e.bytesSent?e.bytesSent+"":"0",s.packetsSent=e.packetsSent?e.packetsSent+"":"0"),"outbound-rtp"===e.type&&"video"===e.mediaType&&(c.id=e.id,c.type=e.type,c.mediaType=e.mediaType,c.bytesSent=e.bytesSent?e.bytesSent+"":"0",c.packetsSent=e.packetsSent?e.packetsSent+"":"0",c.googPlisReceived=e.pliCount?e.pliCount+"":"0",c.googNacksReceived=e.nackCount?e.nackCount+"":"0",c.googFirsReceived=e.firCount?e.firCount+"":"0",c.googFramesEncoded=e.framesEncoded?e.framesEncoded+"":"0"),"inbound-rtp"===e.type&&-1!=e.id.indexOf("44444")&&(d.id=e.id,d.type=e.type,d.mediaType="audio",d.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",d.bytesReceived=e.bytesReceived?e.bytesReceived+"":"0",d.packetsLost=e.packetsLost?e.packetsLost+"":"0",d.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",d.googJitterReceived=e.jitter?e.jitter+"":"0"),"inbound-rtp"===e.type&&-1!=e.id.indexOf("55543")&&(u.id=e.id,u.type=e.type,u.mediaType="video",u.packetsReceived=e.packetsReceived?e.packetsReceived+"":"0",u.bytesReceived=e.bytesReceived?e.bytesReceived+"":"0",u.packetsLost=e.packetsLost?e.packetsLost+"":"0",u.googJitterBufferMs=e.jitter?e.jitter+"":"0",u.googNacksSent=e.nackCount?e.nackCount+"":"0",u.googPlisSent=e.pliCount?e.pliCount+"":"0",u.googFirsSent=e.firCount?e.firCount+"":"0"),"track"!==e.type||-1==e.id.indexOf("55543")&&!~e.trackIdentifier.indexOf("v")&&null!=e.audioLevel||(u.googFrameWidthReceived=e.frameWidth?e.frameWidth+"":"0",u.googFrameHeightReceived=e.frameHeight?e.frameHeight+"":"0",u.googFrameReceived=e.framesReceived?e.framesReceived+"":"0",u.googFramesDecoded=e.framesDecoded?e.framesDecoded+"":"0"),"track"!==e.type||-1==e.id.indexOf("44444")&&!~e.trackIdentifier.indexOf("a")&&void 0===e.audioLevel||(d.audioOutputLevel=e.audioLevel+"",s.audioInputLevel=e.audioLevel+""),"candidate-pair"===e.type&&(0==e.availableIncomingBitrate?l.googAvailableSendBandwidth=e.availableOutgoingBitrate+"":l.googAvailableReceiveBandwidth=e.availableIncomingBitrate+"")});var a=[l,s,c,d,u];a.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(a,n)}).catch(function(e){console.error(e)})},t.addTrack=function(e,n){t.peerConnection.addTrack(e,n)},t.removeTrack=function(e,n){var i=t.peerConnection.getSenders().find(function(t){return t.track==e});i.replaceTrack(null),t.peerConnection.removeTrack(i)},t.addStream=function(e){window.navigator.userAgent.indexOf("Safari")>-1&&-1===navigator.userAgent.indexOf("Chrome")?e.getTracks().forEach(function(n){return t.peerConnection.addTrack(n,e)}):t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater(function(){t.onstablestate()})},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){var n;if(t.actionNeeded){if("new"===t.state||"established"===t.state)e.isSubscriber&&(t.peerConnection.addTransceiver("audio",{direction:"recvonly"}),t.peerConnection.addTransceiver("video",{direction:"recvonly"})),t.peerConnection.createOffer(t.mediaConstraints).then(function(n){if(n.sdp=a(n.sdp),e.isSubscriber||(n.sdp=n.sdp.replace(/a=extmap:4 urn:3gpp:video-orientation\r\n/g,"")),n.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(n),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")}).catch(function(e){o.default.debug("["+t.clientId+"]peer connection create offer failed ",e)});else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer(function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}},function(e){o.default.debug("["+t.clientId+"]peer connection create answer failed ",e)},t.mediaConstraints);else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;n=t.peerConnection.localDescription.sdp,t.sendMessage("ANSWER",n),t.state="established"}else t.error("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var i={};i.messageType=e,i.sdp=n,"OFFER"===e?(i.offererSessionId=t.sessionId,i.answererSessionId=t.otherSessionId,i.seq=t.sequenceNumber+=1,i.tiebreaker=Math.floor(429496723*Math.random()+1)):(i.offererSessionId=t.incomingMessage.offererSessionId,i.answererSessionId=t.sessionId,i.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(i))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find(function(t){return t.track.kind==e});if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,i){var a=t._getSender(e.kind);if(!a)return i("NO_SENDER_FOUND");try{a.replaceTrack(e)}catch(e){return i&&i(e)}setTimeout(function(){return n&&n()},50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){console.log("!!! ontrack, ",e.track.kind,e.track),t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)},t.renegotiate=function(){void 0!==t.prevOffer&&t.peerConnection.createOffer().then(function(e){return e.sdp=e.sdp.replace(/a=recvonly\r\n/g,"a=inactive\r\n"),e.sdp=i(e.sdp),e.sdp=a(e.sdp),t.peerConnection.setLocalDescription(e)}).then(function(){t.onnegotiationneeded&&t.onnegotiationneeded(t.peerConnection.localDescription.sdp)}).catch(function(e){console.log("createOffer error: ",e)})},t.peerConnection.onnegotiationneeded=t.renegotiate,t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t},H=function(e){var t={},n=(mozRTCPeerConnection,mozRTCSessionDescription),i=!1;t.uid=e.uid,t.isVideoMute=e.isVideoMute,t.isAudioMute=e.isAudioMute,t.isSubscriber=e.isSubscriber,t.clientId=e.clientId,t.filterStatsCache=[],t.originStatsCache=[],t.lastTimeGetStats=null,t.pc_config={iceServers:[]},e.iceServers instanceof Array?e.iceServers.map(function(e){0===e.url.indexOf("stun:")&&t.pc_config.iceServers.push({url:e.url})}):(e.stunServerUrl&&(e.stunServerUrl instanceof Array?e.stunServerUrl.map(function(e){"string"==typeof e&&""!==e&&t.pc_config.iceServers.push({url:e})}):"string"==typeof e.stunServerUrl&&""!==e.stunServerUrl&&t.pc_config.iceServers.push({url:e.stunServerUrl})),e.turnServer&&"string"==typeof e.turnServer.url&&""!==e.turnServer.url&&(e.turnServer.udpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.udpport+"?transport=udp"}),"string"==typeof e.turnServer.tcpport&&""!==e.turnServer.tcpport&&t.pc_config.iceServers.push({username:e.turnServer.username,credential:e.turnServer.credential,credentialType:"password",urls:"turn:"+e.turnServer.url+":"+e.turnServer.tcpport+"?transport=tcp"}),!0===e.turnServer.forceturn&&(t.pc_config.iceTransportPolicy="relay"))),void 0===e.audio&&(e.audio=!0),void 0===e.video&&(e.video=!0),t.mediaConstraints={offerToReceiveAudio:e.audio,offerToReceiveVideo:e.video,mozDontOfferDataChannel:!0},t.roapSessionId=103,t.peerConnection=new E.RTCPeerConnection(t.pc_config),o.default.debug("["+t.clientId+']safari Created RTCPeerConnnection with config "'+JSON.stringify(t.pc_config)+'".'),t.iceCandidateTimer=setTimeout(function(){t.iceCandidateTimer=null,o.default.debug("[".concat(t.clientId,"]Candidates collected: ").concat(t.iceCandidateCount)),t.moreIceComing&&(t.moreIceComing=!1,t.markActionNeeded())},Object(r.getParameter)("CANDIDATE_TIMEOUT")),t.peerConnection.onicecandidate=function(e){var n,i,a,r;i=(n=t.peerConnection.localDescription.sdp).match(/a=candidate:.+typ\ssrflx.+\r\n/),a=n.match(/a=candidate:.+typ\shost.+\r\n/),r=n.match(/a=candidate:.+typ\srelay.+\r\n/),null===i&&null===a&&null===r||void 0!==t.ice||!t.iceCandidateTimer||(o.default.debug("["+t.clientId+"]srflx candidate : "+i+" relay candidate: "+r+" host candidate : "+a),clearTimeout(t.iceCandidateTimer),t.iceCandidateTimer=null,t.ice=0,t.moreIceComing=!1,t.markActionNeeded()),t.iceCandidateCount=t.iceCandidateCount+1},t.checkMLineReverseInSDP=function(e){return!(!~e.indexOf("m=audio")||!~e.indexOf("m=video"))&&e.indexOf("m=audio")>e.indexOf("m=video")},t.reverseMLineInSDP=function(e){var t=e.split("m=audio"),n=t[1].split("m=video"),i="m=video"+n[1],a="m=audio"+n[0];return e=t[0]+i+a},t.processSignalingMessage=function(e){var i,a=JSON.parse(e);t.incomingMessage=a,"new"===t.state?"OFFER"===a.messageType?(a.sdp=l(a.sdp),i={sdp:a.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state):"offer-sent"===t.state?"ANSWER"===a.messageType?(a.sdp=l(a.sdp),a.sdp=a.sdp.replace(/ generation 0/g,""),a.sdp=a.sdp.replace(/ udp /g," UDP "),-1!==a.sdp.indexOf("a=group:BUNDLE")?(a.sdp=a.sdp.replace(/a=group:BUNDLE audio video/,"a=group:BUNDLE sdparta_0 sdparta_1"),a.sdp=a.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),a.sdp=a.sdp.replace(/a=mid:video/,"a=mid:sdparta_1")):(a.sdp=a.sdp.replace(/a=mid:audio/,"a=mid:sdparta_0"),a.sdp=a.sdp.replace(/a=mid:video/,"a=mid:sdparta_0")),i={sdp:a.sdp,type:"answer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e)}),t.state="established"):"pr-answer"===a.messageType?(i={sdp:a.sdp,type:"pr-answer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)})):"offer"===a.messageType?t.error("Not written yet"):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state):"established"===t.state&&("OFFER"===a.messageType?(i={sdp:a.sdp,type:"offer"},t.peerConnection.setRemoteDescription(new n(i),function(){o.default.debug("["+t.clientId+"]setRemoteDescription succeeded")},function(e){o.default.info("["+t.clientId+"]setRemoteDescription failed: "+e.name)}),t.state="offer-received",t.markActionNeeded()):t.error("Illegal message for this state: "+a.messageType+" in state "+t.state))};var a={id:"",type:"",mediaType:"opus",googCodecName:"opus",aecDivergentFilterFraction:"0",audioInputLevel:"0",bytesSent:"0",packetsSent:"0",googEchoCancellationReturnLoss:"0",googEchoCancellationReturnLossEnhancement:"0"},s={id:"",type:"",mediaType:"",googCodecName:"h264"===e.codec?"H264":"VP8",bytesSent:"0",packetsLost:"0",packetsSent:"0",googAdaptationChanges:"0",googAvgEncodeMs:"0",googEncodeUsagePercent:"0",googFirsReceived:"0",googFrameHeightSent:"0",googFrameHeightInput:"0",googFrameRateInput:"0",googFrameRateSent:"0",googFrameWidthSent:"0",googFrameWidthInput:"0",googNacksReceived:"0",googPlisReceived:"0",googRtt:"0"},c={id:"",type:"",mediaType:"",audioOutputLevel:"0",bytesReceived:"0",packetsLost:"0",packetsReceived:"0",googAccelerateRate:"0",googCurrentDelayMs:"0",googDecodingCNG:"0",googDecodingCTN:"0",googDecodingCTSG:"0",googDecodingNormal:"0",googDecodingPLC:"0",googDecodingPLCCNG:"0",googExpandRate:"0",googJitterBufferMs:"0",googJitterReceived:"0",googPreemptiveExpandRate:"0",googPreferredJitterBufferMs:"0",googSecondaryDecodedRate:"0",googSpeechExpandRate:"0"},d={id:"",type:"",mediaType:"",googTargetDelayMs:"0",packetsLost:"0",googDecodeMs:"0",googMaxDecodeMs:"0",googRenderDelayMs:"0",googFrameWidthReceived:"0",googFrameHeightReceived:"0",googFrameRateReceived:"0",googFrameRateDecoded:"0",googFrameRateOutput:"0",googJitterBufferMs:"0",googCurrentDelayMs:"0",googMinPlayoutDelayMs:"0",googNacksSent:"0",googPlisSent:"0",googFirsSent:"0",bytesReceived:"0",packetsReceived:"0",googFramesDecoded:"0"},u=0;t.getVideoRelatedStats=function(e){t.peerConnection.getStats().then(function(n){var i=!0,a=!1,r=void 0;try{for(var o,s=n.values()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;if(t.isSubscriber){if(("inbound-rtp"===c.type||"inboundrtp"===c.type)&&"video"===c.mediaType){if(!t.lastReport)return void(t.lastReport=c);e&&e({browser:"firefox",mediaType:"video",peerId:t.uid,isVideoMute:t.isVideoMute,frameRateReceived:c.framerateMean+"",frameRateDecoded:c.framesDecoded-t.lastReport.framesDecoded+"",bytesReceived:c.bytesReceived+"",packetsReceived:c.packetsReceived+"",packetsLost:c.packetsLost+""}),t.lastReport=c}}else if(("outbound-rtp"===c.type||"outboundrtp"===c.type)&&"video"===c.mediaType){if(!t.lastReport)return void(t.lastReport=c);e&&e({mediaType:"video",isVideoMute:t.isVideoMute,frameRateInput:c.framerateMean+"",frameRateSent:c.framesEncoded-t.lastReport.framesEncoded+""}),t.lastReport=c}}}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}})},t.getAudioRelatedStats=function(e){t.peerConnection.getStats().then(function(n){var i=!0,a=!1,r=void 0;try{for(var o,s=n.values()[Symbol.iterator]();!(i=(o=s.next()).done);i=!0){var c=o.value;t.isSubscriber&&("inbound-rtp"!==c.type&&"inboundrtp"!==c.type||"audio"!==c.mediaType||e&&e({browser:"firefox",mediaType:"audio",peerId:t.uid,isAudioMute:t.isAudioMute,frameDropped:c.packetsLost+"",frameReceived:c.packetsReceived+"",googJitterReceived:c.jitter+"",bytesReceived:c.bytesReceived+"",packetsReceived:c.packetsReceived+"",packetsLost:c.packetsLost+""}))}}catch(e){a=!0,r=e}finally{try{i||null==s.return||s.return()}finally{if(a)throw r}}})},t.getStatsRate=function(e){t.getStats(function(t){t.forEach(function(e){"inbound-rtp"!==e.type&&"inboundrtp"!==e.type||"video"!==e.mediaType||e.googFrameRateDecoded&&(e.googFrameRateDecoded=((e.googFramesDecoded-u)/3).toString(),u=e.googFramesDecoded)}),e(t)})},t.getStats=function(e,n){n=(n=n||500)>500?500:n,t.lastTimeGetStats&&Date.now()-t.lastTimeGetStats<n?e&&e(t.filterStatsCache,t.originStatsCache):this._getStats(function(n,i){t.filterStatsCache=n,t.originStatsCache=i,t.lastTimeGetStats=Date.now(),e&&e(n,i)})},t._getStats=function(e){t.peerConnection.getStats().then(function(n){var i=[],r=!0,o=!1,u=void 0;try{for(var l,p=n.values()[Symbol.iterator]();!(r=(l=p.next()).done);r=!0){var f=l.value;i.push(f),"outbound-rtp"!==f.type&&"outboundrtp"!==f.type||"video"!==f.mediaType||-1!==f.id.indexOf("rtcp")||(s.id=f.id,s.type=f.type,s.mediaType=f.mediaType,s.bytesSent=f.bytesSent?f.bytesSent+"":"0",s.packetsSent=f.packetsSent?f.packetsSent+"":"0",s.googPlisReceived=f.pliCount?f.pliCount+"":"0",s.googNacksReceived=f.nackCount?f.nackCount+"":"0",s.googFirsReceived=f.firCount?f.firCount+"":"0",s.googFrameRateSent=f.framerateMean?f.framerateMean+"":"0"),"outbound-rtp"!==f.type&&"outboundrtp"!==f.type||"audio"!==f.mediaType||-1!==f.id.indexOf("rtcp")||(a.id=f.id,a.type=f.type,a.mediaType=f.mediaType,a.bytesSent=f.bytesSent?f.bytesSent+"":"0",a.packetsSent=f.packetsSent?f.packetsSent+"":"0"),"inbound-rtp"!==f.type&&"inboundrtp"!==f.type||"audio"!==f.mediaType||f.isRemote||-1!==f.id.indexOf("rtcp")||(c.id=f.id,c.type=f.type,c.mediaType=f.mediaType,c.bytesReceived=f.bytesReceived?f.bytesReceived+"":"0",c.packetsLost=f.packetsLost?f.packetsLost+"":"0",c.packetsReceived=f.packetsReceived?f.packetsReceived+"":"0",c.googJitterReceived=f.jitter?f.jitter+"":"0"),"inbound-rtp"!==f.type&&"inboundrtp"!==f.type||"video"!==f.mediaType||f.isRemote||-1!==f.id.indexOf("rtcp")||(d.id=f.id,d.type=f.type,d.mediaType=f.mediaType,d.bytesReceived=f.bytesReceived?f.bytesReceived+"":"0",d.googFrameRateReceived=f.framerateMean?f.framerateMean+"":"0",d.googFramesDecoded=f.framesDecoded?f.framesDecoded+"":"0",d.packetsLost=f.packetsLost?f.packetsLost+"":"0",d.packetsReceived=f.packetsReceived?f.packetsReceived+"":"0",d.googJitterBufferMs=f.jitter?f.jitter+"":"0",d.googNacksSent=f.nackCount?f.nackCount+"":"0",d.googPlisSent=f.pliCount?f.pliCount+"":"0",d.googFirsSent=f.firCount?f.firCount+"":"0"),-1!==f.id.indexOf("outbound_rtcp_video")&&(s.packetsLost=f.packetsLost?f.packetsLost+"":"0")}}catch(e){o=!0,u=e}finally{try{r||null==p.return||p.return()}finally{if(o)throw u}}var m=[s,a,c,d];m.push({id:"time",startTime:t.connectedTime,timestamp:new Date}),e(m,i)},function(e){o.default.error("["+t.clientId+"]"+e)})},t.addStream=function(e){i=!0,t.peerConnection.addStream(e),t.markActionNeeded()},t.removeStream=function(){t.markActionNeeded()},t.close=function(){t.state="closed",t.peerConnection.close()},t.markActionNeeded=function(){t.actionNeeded=!0,t.doLater(function(){t.onstablestate()})},t.doLater=function(e){window.setTimeout(e,1)},t.onstablestate=function(){if(t.actionNeeded){if("new"===t.state||"established"===t.state)i&&(t.mediaConstraints=void 0),t.peerConnection.createOffer(function(e){if(e.sdp=l(e.sdp),e.sdp=e.sdp.replace(/a=extmap:1 http:\/\/www.webrtc.org\/experiments\/rtp-hdrext\/abs-send-time/,"a=extmap:3 http://www.webrtc.org/experiments/rtp-hdrext/abs-send-time"),e.sdp!==t.prevOffer)return t.peerConnection.setLocalDescription(e),t.state="preparing-offer",void t.markActionNeeded();o.default.debug("["+t.clientId+"]Not sending a new offer")},function(e){o.default.debug("["+t.clientId+"]Ups! create offer failed ",e)},t.mediaConstraints);else if("preparing-offer"===t.state){if(t.moreIceComing)return;t.prevOffer=t.peerConnection.localDescription.sdp,t.offerCandidates=t.prevOffer.match(/a=candidate.+\r\n/g)||[],t.offerCandidates.length||(o.default.warning("[".concat(t.clientId,"]No Ice Candidate generated")),Object(r.getParameter)("SHIM_CANDIDATE")?(o.default.debug("Shimming fake candidate"),t.prevOffer+="a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"):o.default.error("[".concat(t.clientId,"]None Ice Candidate not allowed"))),t.prevOffer=t.prevOffer.replace(/a=candidate:.+typ\shost.+\r\n/g,"a=candidate:2243255435 1 udp 2122194687 192.168.0.1 30000 typ host generation 0 network-id 1\r\n"),t.sendMessage("OFFER",t.prevOffer),t.state="offer-sent"}else if("offer-received"===t.state)t.peerConnection.createAnswer(function(e){if(t.peerConnection.setLocalDescription(e),t.state="offer-received-preparing-answer",t.iceStarted)t.markActionNeeded();else{var n=new Date;o.default.debug("["+t.clientId+"]"+n.getTime()+": Starting ICE in responder"),t.iceStarted=!0}},function(){o.default.debug("["+t.clientId+"]Ups! Something went wrong")});else if("offer-received-preparing-answer"===t.state){if(t.moreIceComing)return;var e=t.peerConnection.localDescription.sdp;t.sendMessage("ANSWER",e),t.state="established"}else t.error("Dazed and confused in state "+t.state+", stopping here");t.actionNeeded=!1}},t.sendMessage=function(e,n){var i={};i.messageType=e,i.sdp=n,"OFFER"===e?(i.offererSessionId=t.sessionId,i.answererSessionId=t.otherSessionId,i.seq=t.sequenceNumber+=1,i.tiebreaker=Math.floor(429496723*Math.random()+1)):(i.offererSessionId=t.incomingMessage.offererSessionId,i.answererSessionId=t.sessionId,i.seq=t.incomingMessage.seq),t.onsignalingmessage(JSON.stringify(i))},t._getSender=function(e){if(t.peerConnection&&t.peerConnection.getSenders){var n=t.peerConnection.getSenders().find(function(t){return t.track.kind==e});if(n)return n}return null},t.hasSender=function(e){return!!t._getSender(e)},t.replaceTrack=function(e,n,i){var a=t._getSender(e.kind);if(!a)return i("NO_SENDER_FOUND");try{a.replaceTrack(e)}catch(e){return i&&i(e)}setTimeout(function(){return n&&n()},50)},t.error=function(e){throw"Error in RoapOnJsep: "+e},t.sessionId=t.roapSessionId+=1,t.sequenceNumber=0,t.actionNeeded=!1,t.iceStarted=!1,t.moreIceComing=!0,t.iceCandidateCount=0,t.onsignalingmessage=e.callback,t.peerConnection.ontrack=function(e){t.onaddstream&&t.onaddstream(e,"ontrack")},t.peerConnection.onremovestream=function(e){t.onremovestream&&t.onremovestream(e)},t.peerConnection.oniceconnectionstatechange=function(e){"connected"===e.currentTarget.iceConnectionState&&(t.connectedTime=new Date),t.oniceconnectionstatechange&&t.oniceconnectionstatechange(e.currentTarget.iceConnectionState)};var l=function(t){var n;if(e.video&&e.maxVideoBW&&(null==(n=t.match(/m=video.*\r\n/))&&(n=t.match(/m=video.*\n/)),n&&n.length>0)){var i=n[0]+"b=TIAS:"+1e3*e.maxVideoBW+"\r\n";t=t.replace(n[0],i)}return e.audio&&e.maxAudioBW&&(null==(n=t.match(/m=audio.*\r\n/))&&(n=t.match(/m=audio.*\n/)),n&&n.length>0)&&(i=n[0]+"b=TIAS:"+1e3*e.maxAudioBW+"\r\n",t=t.replace(n[0],i)),t};return t.onaddstream=null,t.onremovestream=null,t.state="new",t.markActionNeeded(),t},W=a(16),G=a.n(W),q=null,Y=function(){try{q=window.require("electron")}catch(e){}return q},J=function(e){var t=s.b.reportApiInvoke(null,{callback:e,name:"getScreenSources",options:arguments,tag:"tracer"}),n=Y();if(!n)return t&&t("electron is null");n.desktopCapturer.getSources({types:["window","screen"]},function(e,n){if(e)return t&&t(e);t&&t(null,n)})},K=function(e,t,n){var i=t.width;t={audio:!1,video:{mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:e,maxHeight:t.height,maxWidth:i,maxFrameRate:t.frameRate&&t.frameRate.max,minFrameRate:t.frameRate&&t.frameRate.min}}};navigator.webkitGetUserMedia(t,function(e){n&&n(null,e)},function(e){n&&n(e)})},z=function(){return!!Y()},X=J,Q=K,$=function(e,t){J(function(n,i){if(n)return t&&t(n);!function(e,t){var n=document.createElement("div");n.innerText="share screen",n.setAttribute("style","text-align: center; height: 25px; line-height: 25px; border-radius: 4px 4px 0 0; background: #D4D2D4; border-bottom:  solid 1px #B9B8B9;");var i=document.createElement("div");i.setAttribute("style","width: 100%; height: 500px; padding: 15px 25px ; box-sizing: border-box;");var a=document.createElement("div");a.innerText="Agora Web Screensharing wants to share the contents of your screen with webdemo.agorabeckon.com. Choose what you'd like to share.",a.setAttribute("style","height: 12%;");var r=document.createElement("div");r.setAttribute("style","width: 100%; height: 80%; background: #FFF; border:  solid 1px #CBCBCB; display: flex; flex-wrap: wrap; justify-content: space-around; overflow-y: scroll; padding: 0 15px; box-sizing: border-box;");var o=document.createElement("div");o.setAttribute("style","text-align: right; padding: 16px 0;");var s=document.createElement("button");s.innerHTML="cancel",s.setAttribute("style","width: 85px;"),s.onclick=function(){document.body.removeChild(c),t&&t("NotAllowedError")},o.appendChild(s),i.appendChild(a),i.appendChild(r),i.appendChild(o);var c=document.createElement("div");c.setAttribute("style","position: absolute; z-index: 99999999; top: 50%; left: 50%; width: 620px; height: 525px; background: #ECECEC; border-radius: 4px; -webkit-transform: translate(-50%,-50%); transform: translate(-50%,-50%);"),c.appendChild(n),c.appendChild(i),document.body.appendChild(c),e.map(function(e){if(e.id){var n=document.createElement("div");n.setAttribute("style","width: 30%; height: 160px; padding: 20px 0; text-align: center;box-sizing: content-box;"),n.innerHTML='<div style="height: 120px; display: table-cell; vertical-align: middle;"><img style="width: 100%; background: #333333; box-shadow: 1px 1px 1px 1px rgba(0, 0, 0, 0.2);" src='+e.thumbnail.toDataURL()+' /></div><span style="\theight: 40px; line-height: 40px; display: inline-block; width: 70%; word-break: keep-all; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">'+e.name+"</span>",n.onclick=function(){document.body.removeChild(c),t&&t(null,e.id)},r.appendChild(n)}})}(i,function(n,i){if(n)return t&&t(n);K(i,e,t)})})},Z=103,ee=function(e){var t={};if(t.clientId=e.clientId,e.session_id=Z+=1,"undefined"==typeof window||!window.navigator)throw o.default.error("["+t.streamId+"]["+t.clientId+"]Publish/subscribe video/audio streams not supported yet"),new Error("NON_BROWSER_ENV_DETECTED");return null!==window.navigator.userAgent.match("Firefox")?(t.browser="mozilla",t=H(e)):"iOS"===m.getBrowserOS()||m.isSafari()?(o.default.debug("["+t.streamId+"]["+t.clientId+"]Safari"),(t=B(e)).browser="safari"):~window.navigator.userAgent.indexOf("Edge")?t=new G.a(e):(t=F(e)).browser="chrome-stable",t},te=function(e,t,n){var i={};i.config=e,i.streamId=e.streamId,delete e.streamId,navigator.getMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var a=0,r=1,s=!1,c=null,d=function(e){if(a++,c)if(c===e)o.default.debug("Using Video Source/ Audio Source");else{var n=c.getVideoTracks()[0],i=c.getAudioTracks()[0],d=e.getVideoTracks()[0],u=e.getAudioTracks()[0];d&&(n&&c.removeTrack(n),c.addTrack(d)),u&&(i&&c.removeTrack(i),c.addTrack(u))}else c=e;a!==r||s||(s=!0,setTimeout(function(){t(c)},0))},u=function(e){o.default.error("Failed to GetUserMedia",e.name,e.code,e.message,e),a++,s||(s=!0,setTimeout(function(){n&&n(e)},0))},l=function(){var t={video:e.video,audio:e.audio};if(o.default.debug("GetUserMedia",JSON.stringify(t)),navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)navigator.mediaDevices.getUserMedia(t).then(d).catch(u);else if("undefined"!=typeof navigator&&navigator.getMedia)navigator.getMedia(e,d,u);else{var a={name:"MEDIA_NOT_SUPPORT",message:"Video/audio streams not supported yet"};o.default.error("["+i.streamId+"]"+a.message),n&&n(a)}};if((e.videoSource||e.audioSource)&&(c=new MediaStream,e.videoSource&&c.addTrack(e.videoSource),e.audioSource&&c.addTrack(e.audioSource)),e.video||e.audio||e.screen||e.screenAudio||d(c),!e.screen&&e.screenAudio)return n&&n({code:"Set screen to true before sharing the audio"});if(e.screen){if(z())return e.screen.sourceId?Q(e.screen.sourceId,e.screen,function(e,t){e?u(e):d(t)}):$(e.screen,function(e,t){e?u(e):d(t)});if(m.isFireFox()){o.default.debug("["+i.streamId+"]Screen access requested");if(!~["screen","window","application"].indexOf(e.screen.mediaSource))return n&&n({code:"Invalid mediaSource, mediaSource should be one of [screen, window, application]"});navigator.getMedia({video:e.screen},function(t){e.audio&&(r++,l()),d(t)},u)}else if(m.isChromeKernel()&&e.screen.extensionId){if(window.navigator.appVersion.match(/Chrome\/([\w\W]*?)\./)[1]<34)return void n({code:"This browser does not support screen sharing"});o.default.debug("["+i.streamId+"]Screen access on chrome stable, looking for extension");try{chrome.runtime.sendMessage(e.screen.extensionId,{getStream:!0},function(t){if(void 0===t){o.default.error("["+i.streamId+"]No response from Chrome Plugin. Plugin not installed properly");u({name:"PluginNotInstalledProperly",message:"No response from Chrome Plugin. Plugin not installed properly."})}else e.screen.mandatory.chromeMediaSourceId=t.streamId,navigator.getMedia({video:e.screen},function(t){e.audio&&(r++,l()),d(t)},u)})}catch(e){o.default.debug("["+i.streamId+"]AgoraRTC screensharing plugin is not accessible");return void n({code:"no_plugin_present"})}}else{if(window.navigator.mediaDevices.getDisplayMedia){var p={};return"number"==typeof e.screen.width&&"number"==typeof e.screen.height?p.video={width:{ideal:e.screen.width},height:{ideal:e.screen.height}}:p.video={width:e.screen.width,height:e.screen.height},e.screen.frameRate&&e.screen.frameRate.min?p.video.frameRate={ideal:e.screen.frameRate.max,max:e.screen.frameRate.max}:p.video.frameRate=e.screen.frameRate,e.screenAudio&&(p.audio=e.screenAudio),o.default.debug("use getDisplayMedia, constraints:",p),window.navigator.mediaDevices.getDisplayMedia(p).then(function(t){!e.screenAudio&&e.audio&&(r++,l()),d(t)}).catch(u)}o.default.error("["+i.streamId+"]This browser does not support screenSharing"),n({code:"This browser does not support screen sharing"})}}else l()},ne=a(10),ie=function(e,t,n){if(["End2EndDelay","TransportDelay","PacketLossRate","RecvLevel","RecvBitrate","CodecType","MuteState","TotalFreezeTime","TotalPlayDuration","RecordingLevel","SendLevel","SamplingRate","SendBitrate","CodecType","MuteState","End2EndDelay","TransportDelay","PacketLossRate","RecvBitrate","RecvResolutionWidth","RecvResolutionHeight","RenderResolutionHeight","RenderResolutionWidth","RenderFrameRate","TotalFreezeTime","TotalPlayDuration","TargetSendBitrate","SendFrameRate","SendFrameRate","SendBitrate","SendResolutionWidth","SendResolutionHeight","CaptureResolutionHeight","CaptureResolutionWidth","EncodeDelay","MuteState","TotalFreezeTime","TotalDuration","CaptureFrameRate","RTT","OutgoingAvailableBandwidth","Duration","UserCount","SendBytes","RecvBytes","SendBitrate","RecvBitrate","accessDelay","audioSendBytes","audioSendPackets","videoSendBytes","videoSendPackets","videoSendPacketsLost","videoSendFrameRate","audioSendPacketsLost","videoSendResolutionWidth","videoSendResolutionHeight","accessDelay","audioReceiveBytes","audioReceivePackets","audioReceivePacketsLost","videoReceiveBytes","videoReceivePackets","videoReceivePacketsLost","videoReceiveFrameRate","videoReceiveDecodeFrameRate","videoReceiveResolutionWidth","videoReceiveResolutionHeight","endToEndDelay","videoReceiveDelay","audioReceiveDelay","FirstFrameTime","VideoFreezeRate","AudioFreezeRate","RenderResolutionWidth","RenderResolutionHeight"].indexOf(t)>-1&&("string"==typeof n||isFinite(n)))return e[t]=""+n},ae=new function(){var e=c();return e.devicesHistory={},e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.deviceStates={ACTIVE:"ACTIVE",INACTIVE:"INACTIVE"},e.deviceReloadTimer=null,e._init=function(t,n){e.state=e.states.INITING,e.devicesHistory={},e._reloadDevicesInfo(function(){e.state=e.states.INITED,e.dispatchEvent({type:"inited"}),t&&t()},function(t){o.default.warning("Device Detection functionality cannot start properly."),e.state=e.states.UNINIT,n&&n(t)})},e._enumerateDevices=function(e,t){if(!navigator.mediaDevices||!navigator.mediaDevices.enumerateDevices)return o.default.warning("enumerateDevices() not supported."),t&&t("enumerateDevices() not supported");navigator.mediaDevices.enumerateDevices().then(function(t){e&&setTimeout(function(){e(t)},0)}).catch(function(e){t&&t(e)})},e._reloadDevicesInfo=function(t,n){var i=[];e._enumerateDevices(function(n){var a=Date.now();for(var r in n.forEach(function(t){var n=e.devicesHistory[t.deviceId];if((n?n.state:e.deviceStates.INACTIVE)!=e.deviceStates.ACTIVE){var r=n||{initAt:a};r.device=t,r.state=e.deviceStates.ACTIVE,i.push(r),e.devicesHistory[t.deviceId]=r}e.devicesHistory[t.deviceId].lastReloadAt=a}),e.devicesHistory){var s=e.devicesHistory[r];s&&s.state==e.deviceStates.ACTIVE&&s.lastReloadAt!==a&&(s.state=e.deviceStates.INACTIVE,i.push(s)),s.lastReloadAt=a}e.state==e.states.INITED&&i.forEach(function(t){var n=S()({},t);switch(t.device.kind){case"audioinput":n.type="recordingDeviceChanged";break;case"audiooutput":n.type="playoutDeviceChanged";break;case"videoinput":n.type="cameraChanged";break;default:o.default.warning("Unknown device change",n),n.type="unknownDeviceChanged"}e.dispatchEvent(n)}),t&&t()},n)},e.getDeviceById=function(t,n,i){e.getDevices(function(e){for(var a=0;a<e.length;a++){var r=e[a];if(r&&r.deviceId===t)return n&&n(r)}return i&&i()})},e.searchDeviceNameById=function(t){var n=e.devicesHistory[t];return n?n.device.label||n.device.deviceId:null},e.getDevices=function(t,n){e._enumerateDevices(t,function(e){n&&n(e.name+": "+e.message)})},e.getVideoCameraIdByLabel=function(t,n,i){e.getCameras(function(e){var a=!0,r=!1,o=void 0;try{for(var s,c=e[Symbol.iterator]();!(a=(s=c.next()).done);a=!0){var d=s.value;if(d.label===t)return n&&n(d.deviceId)}}catch(e){r=!0,o=e}finally{try{a||null==c.return||c.return()}finally{if(r)throw o}}return i&&i(V.NOT_FIND_DEVICE_BY_LABEL)},i)},e.getRecordingDevices=function(t,n){return e._enumerateDevices(function(e){var n=e.filter(function(e){return"audioinput"==e.kind});t&&t(n)},function(e){n&&n(e)})},e.getPlayoutDevices=function(t,n){return e._enumerateDevices(function(e){var n=e.filter(function(e){return"audiooutput"==e.kind});t&&t(n)},function(e){n&&n(e)})},e.getCameras=function(t,n){return e._enumerateDevices(function(e){var n=e.filter(function(e){return"videoinput"==e.kind});t&&t(n)},function(e){n&&n(e)})},e._init(function(){navigator.mediaDevices&&navigator.mediaDevices.addEventListener&&navigator.mediaDevices.addEventListener("devicechange",function(){e._reloadDevicesInfo()}),e.deviceReloadTimer=setInterval(e._reloadDevicesInfo,5e3)}),e},re=a(1),oe=a(14);var se=a(6),ce=a.n(se),de=a(11),ue=a.n(de),le=a(17),pe=a.n(le),fe=a(18),me=a.n(fe),ge=5,ve=[31,222,239,159,192,236,164,81,54,227,176,149,2,247,75,141,183,54,213,216,158,92,111,49,228,111,150,6,135,79,35,212,4,155,200,168,37,107,243,110,144,179,51,81,55,78,223,242,191,211,74,119,203,151,142,62,31,41,132,22,35,155,87,123,119,117,216,57,201,53,228,67,201,40,106,24,80,176,187,253,60,63,136,100,20,12,177,99,64,38,101,143,111,176,251,211,145,136,34,23,79,136,202,95,105,199,125,67,180,44,210,179,228,4,85,160,188,64,26,46,6,61,201,103,248,18,97,254,140,36,115,106,48,124,102,216,155,120,36,227,165,217,7,227,191,128,212,157,80,37,117,175,24,214,47,221,183,211,51,174,251,223,159,167,152,53,36,107,199,223,91,62,46,194,11,80,121,188,219,2,99,99,232,229,173,234,21,30,236,177,243,142,97,48,108,56,62,172,56,216,3,42,79,138,23,88,182,39,5,118,68,135,178,56,9,94,189,44,104,9,238,231,174,122,85,247,231,86,74,8,189,147,218,180,58,76,227,17,46,90,194,100,51,178,72,163,151,243,166,130,85,1,223,130,152,242,85,255,28,173,97,252,119,215,177,119,86,104,136,82,40,72,53,11,18,26,240,188,76,110,39,31,189];function he(e){for(var t=new Uint8Array([99,114,121,112,116,105,105]),n=t.length,i=e,a=i.length,r=new Uint8Array(a),o=new Uint8Array(256),s=0;s<256;s++)o[s]=s;for(var c=0,d=0;d<256;d++){var u=[o[c=(c+o[d]+t[d%n])%256],o[d]];o[d]=u[0],o[c]=u[1]}var l,p=0;c=0;for(var f=0;f<0+a;f++){var m=[o[c=(c+o[p=(p+1)%256])%256],o[p]];o[p]=m[0],o[c]=m[1],l=o[(o[p]+o[c])%256],f>=0&&(r[f-0]=i[f-0]^l)}var g=String.fromCharCode.apply(null,r);return Function("var winSize = "+ge+"; return `"+g+"`")()}function Se(e,t){var n=he(t),i=me.a.createProgramFromSources(e,[he(ve),n]),a=e.getAttribLocation(i,"a_position"),r=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,r),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(a);var o=2,s=e.FLOAT,c=!1,d=0,u=0;e.vertexAttribPointer(a,o,s,c,d,u);var l=e.getAttribLocation(i,"a_texCoord"),p=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,p),e.bufferData(e.ARRAY_BUFFER,new Float32Array([0,0,1,0,0,1,0,1,1,0,1,1]),e.STATIC_DRAW),e.enableVertexAttribArray(l);o=2,s=e.FLOAT,c=!1,d=0,u=0;return e.vertexAttribPointer(l,o,s,c,d,u),i}var _e=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,152,221,191,124,116,248,106,130,251,59,105,43,91,135,199,181,223,10,51,134,194,240,46,9,3,141,22,35,146,76,23,109,117,208,41,201,45,218,76,203,105,51,58,97,154,145,236,49,18,183,127,27,12,210,122,73,42,37,143,36,207,251,211,145,191,56,10,88,222,181,125,22,238,123,71,177,107,218,254,173,28,34,253,249,67,83,97,73,111,219,43,181,82,38,230,136,109,22,67];function Ee(e,t,n){var i=e.gl;this.program=Se(i,_e),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY");i.uniform1f(e,1)}}var Ie=[11,196,242,139,198,252,188,5,59,170,161,152,17,229,24,141,133,54,214,206,133,26,66,126,255,11,245,10,146,92,52,134,108,155,210,164,99,114,228,96,130,251,59,105,43,91,135,199,181,223,10,51,133,194,247,34,31,39,142,28,2,130,18,109,84,124,223,62,140,52,128,47,208,47,115,39,4,200,220,171,53,36,150,101,10,75,247,121,74,36,35,143,108,176,235,211,135,164,36,11,88,160,148,35,6,221,41,32,166,109,205,171,228,4,26,169,244,82,119,102,86,61,201,103,248,18,97,242,182,34,121,70,28,71,126,197,223,126,14,244,149,192,12,176,187,149,212,156,22,44,36,133,10,216,63,198,213,154,116,230,253,154,154,249,215,55,60,34,196,229,76,50,44,135,22,77,113,247,142,94,60,23,172,145,175,218,81,86,162,239,180,205,63,118,3,110,123,224,127,158,124,15,127,157,27,66,176,33,24,51,53,194,178,56,6,74,191,111,51,78,174,157,229,17,22,178,231,92,25,23,191,157,137,188,54,64,176,13,22,81,207,45,108,203,83,186,130,237,186,153,110,8,196,168,152,161,28,238,46,184,36,185,20,203,183,98,95,41,149,93,105,37,116,91,68,105,164,217,30,42,60,53,173,213,177,216,195,53,204,173,128,243,42,122,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,220,161,39,214,146,183,193,225,23,177,201,243,128,160,33,75,86,126,139,254,232,14,13,85,2,112,17,150,36,180,86,226,225,126,197,17,228,225,142,245,37,170,39,96,187,190,2,35,85,237,11,189,1,79,237,2,1,114,246,109,190,66,54,153,43,218,204,70,6,204,162,247,18,130,123,30,60,165,130,142,210,133,91,127,117,71,38,145,172,7,5,16,220,222,111,98,141,239,208,125,26,238,28,0,216,89,13,7,119,134,194,75,41,67,174,1,217,80,101,40,26,59,28,59,46,108,138,38,157,167,28,234,73,177,42,42,102,108,26,181,27,178,42,43,52,28,110,117,198,173,176,178,101,225,150,36,139,108,105,10,237,222,3,143,126,18,144,115,74,56,114,134,231,159,212,62,126,80,173,216,167,4,81,18,52,17,144,218,32,139,207,104,128,229,99,84,120,31,87,227,154,91,196,63,123,111,125,36,52,57,168,113,150,189,204,24,104,196,237,86,163,68,197,202,170,212,191,81,193,111,255,162,181,202,156,146,196,96,16,118,117,55,71,156,31,163,242,204,239,11,150,27,126,115,154,107,247,134,158,125,255,146,35,183,209,36,116,87,215,172,5,251,133,114,254,141,195,6,145,4,111,182,167,74,154,152,68,18,146,88,106,200,154,15,176,94,86,66,178,101,219,35,188,129,66,28,41,110,174,53,88,174,64,191,206,127,48,126,214,216,93,119,2,166,99,181,222,29,218,28,195,219,125,44,50,16,99,174,225,51,133,120,184,159,168,75,242,162,124,255,81,25,153,109,69,220,176,4,237,196,233,19,8,240,160,39,122,81,29,188,144,249,170,174,137,30,10,93,133,151,199,248,175,38,41,144,229,245,149,25,240,138,179,114,182,84,50,103,95,31,199,31,87,208,203,199,135,49,211,43,52,36,74,59,37,22,136,171,244,126,18,251,39,159,241,66,206,127,149,159,182,143,232,199,136,46,150,32,51,221,74,22,102,93,22,44,132,140,199,43,69,249,77,75,140,70,4,252,98,235,77,190,125,18,56,21,10,244,42,2,246,62,127,241,123,137,22,247,219,177,160,84,18,10,84,97,251,127,102,16,209,181,100,94,56,238,209,207,76,189,95,15,165,139,143,189,96,225,55,112,178,27,218,198,223,251,52,123,94,130,220,142,216,116,237,18,254,49,59,128,41,29,15,179,164,85,76,167,166,151,39,221,2,190,68,167,26,177,114,141,4,67,25,69,182,38,166,160,27,151,148,108,48,227,60,112,48,22,159,76,127,251,63,254,177,113,217,197,95,179,109,128,138,99,27,249,10,174,155,129,80,39,165,252,85,60,131,183,98,107,68,207,19,233,231,55,225,126,77,49,53,145,203,113,29,208,64,237,182,229,165,7,11,169,106,253,116,141,200,62,16,38,121,55,148,91,83,160,140,126,121,12,79,189,72,172,31,243,240,209,229,32,220,91,229,81,94,247,121,153,151,232,182,171,198,50,31,152,245,172,151,130,55,62,125,38,155,229,78,207,148,201,2,78,63,119,107,168,78,139,141,163,177,191,239,141,39,182,174,40,76,226,62,125,209,6,6,34,37,147,85,204,103,51,191,36,248,17,175,20,1,53,16,35,143,237,177,125,86,29,219,235,20,121,205,59,5,250,107,109,32,224,30,152,143,113,151,95,85,19,254,164,135,124,68,136,199,29,31,244,91,10,84,127,101,210,70,226,195,140,70,166,54,217,165,84,42,165,175,100,234,124,121,105,53,101,118,174,101,220,147,68,161,37,0,182,220,142,221,155,230,115,164,10,214,208,120,91,152,66,27,81,184,48,84,70,7,128,153,217,218,249,226,70,130,200,156,61,227,21,164,137,193,221,119,10,134,204,23,20,17,90,94,105,204,39,99,1,64,153,45,213,19,247,97,194,49,35,125,255,195,139,63,209,175,208,147,189,244,204,24,211,99,142,18,92,130,254,182,231,235,93,10,127,175,87,35,62,110,137,184,39,114,200,150,11,190,40,162,168,223,203,110,242,192,234,26,11,54,155,38,48,79,109,101,119,165,187,223,5,20,168,171,241,20,243,108,199,3,155,69,244,149,0,187,110,12,233,42,151,189,139,133,104,3,30,16,200,69,4,123,103,144,12,106,182,1,127,91,125,158,12,144,238,232,209,101,159,56,163,240,179,50,169,120,219,176,87,77,45,247,153,190,82,132,50,137,209,97,19,35,247,161,62,77,16,71,152,72,61,50,99,157,154,56,58,175,27,73,121,229,195,228,132,69,233,169,100,21,123,17,3,164,6,146,106,196,29,3,250,217,164,23,171,203,14,242,239,249,169,116,138,209,98,113,181,122,35,162,216,46,230,4,155,142,118,216,232,229,28,12,158,153,126,149,171,172,231,99,211,57,114,136,183,114,74,35,233,115,127,253,157,38,49,136,141,25,161,255,232,110,101,208,166,186,226,12,185,19,155,53,93,155,39,161,7,124,213,52,223,125,211,242,253,22,13,131,115,167,198,188,90,209,63,224,92,112,118,220,165,31,164,43,58,197,77,17,247,77,164,74,77,218,18,187,41,76,189,127,98,18,226,231,71,115,236,68,183,111,50,168,88,247,9,123,65,180,88,74,44,101,101,173,11];function ye(e,t,n){var i=e.gl,a=1/t,r=1/n,o=5;this.program=Se(i,Ie),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY"),t=i.getUniformLocation(this.program,"u_singleStepOffset"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(t,a,r),i.uniform1f(n,o),i.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){a=1/e,r=1/t}}var Te=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,165,108,122,254,125,130,229,55,109,113,11,210,238,163,213,86,116,156,248,215,63,20,48,173,31,55,133,18,105,32,16,204,35,128,38,212,87,200,97,114,40,12,210,193,171,59,33,158,108,14,75,228,74,65,32,57,192,112,156,234,250,140,189,40,20,6,230,135,52,17,200,123,68,183,44,215,187,234,2,13,169,234,94,115,60,6,107,224,118,254,88,2,235,134,36,120,5,85,94,126,222,223,101,105,227,147,199,64,185,246,143,183,210,30,37,127,226,79,156,118,147,208,131,51,248,232,217,206,181,218,58,61,112,244,227,68,45,41,206,69,12,45,163,205,75,6,23,167,145,250,237,92,84,164,240,253,216,54,85,7,108,62,255,42,217,3,27,0,196,94,28,241,120,80,92,89,135,228,125,2,3,242,39,116,64,248,216,177,122,66,178,180,9,7,33,186,208,213,188,59,78,243,95,123,28,142,45,99,130,7,167,194,156,238,199,10,71,141,251,221,158,16,255,38,181,36,184,20,136,240,55,27,51,191,82,105,55,97,78,74,121,191,161,91,126,105,103,174,139,223,145,150,120,156,240,252,182,105,104,205,65,97,129,194,68,218,91,141,11,224,124,132,138,119,36,201,211,39,203,146,225,246,252,21,161,250,188,137,190,42,4,90,126,211,171,240,113,67,28,92,57,77,200,125,224,19,178,142,112,202,5,233,229,128,235,105,239,102,52,179,224,87,45,68,211,10,187,9,38,190,86,25,43,175,56,231,11,108,220,36,129,131,19,93,163,239,169,118,205,50,77,121,139,139,141,197,170,20,44,39,19,97,205,228,8,106,67,210,135,111,127,141,185,175,123,26,226,42,29,217,16,99,9,46,157,232,22,3,105,174,73,144,23,110,55,84,46,4,116,39,113,205,58,158,242,7,208,75,162,55,115,35,52,124,235,114,178,55,43,98,17,100,33,134,237,190,230,60,184,192,104,146,52,58,79,174,180,81,155,114,0,153,113,90,51,86,150,254,136,205,104,39,11,190,187,233,80,81,81,56,18,222,148,116,155,156,33,132,226,127,84,34,83,28,249,153,18,197,10,116,102,125,45,47,36,235,46,212,166,209,3,125,132,237,124,163,68,197,202,232,152,234,75,235,103,248,160,241,213,151,144,130,37,23,51,48,55,12,227,31,163,242,251,245,22,129,77,20,35,150,20,181,203,138,69,233,215,109,178,209,52,85,96,221,179,56,249,138,111,250,141,134,95,152,92,109,183,174,104,151,156,31,66,211,10,57,141,167,18,177,27,126,74,252,29,143,121,173,203,8,27,44,123,148,57,88,163,68,228,158,62,98,121,192,228,94,92,72,241,33,230,173,0,197,1,194,144,111,91,60,0,106,181,203,51,133,120,250,158,184,93,216,184,126,253,21,22,155,99,80,205,227,69,231,141,165,71,70,252,223,105,51,93,22,165,135,233,177,164,139,53,5,85,151,134,214,165,249,100,24,186,207,245,149,68,218,204,252,32,190,90,48,76,57,31,201,15,52,130,135,152,206,63,198,100,126,36,2,104,116,0,160,163,186,2,91,165,57,149,163,12,239,121,152,209,224,136,248,135,136,46,150,32,51,154,6,105,0,71,30,44,175,147,139,34,91,184,78,31,145,18,3,250,122,166,47,252,109,19,40,10,123,163,99,76,133,119,37,180,38,207,79,171,185,188];function be(e,t,n){var i=e.gl,a=1/t,r=1/n,o=5;this.program=Se(i,Te),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY"),t=i.getUniformLocation(this.program,"u_singleStepOffset"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(t,a,r),i.uniform1f(n,o),i.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){a=1/e,r=1/t}}var Re=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,160,96,121,255,120,207,227,114,120,38,72,149,145,165,227,75,122,158,250,232,46,34,52,135,9,30,144,17,110,126,110,130,71,156,46,210,67,202,51,119,97,3,211,214,227,45,109,151,97,21,10,229,53,80,26,51,202,119,128,230,197,140,135,40,14,88,128,202,95,21,208,96,83,185,98,216,242,224,15,25,224,233,86,96,46,80,120,220,48,187,86,30,240,140,46,95,81,48,90,117,140,177,51,107,235,158,137,5,241,191,154,149,219,30,126,85,175,10,216,63,139,216,151,122,251,224,202,220,227,221,53,122,34,213,224,94,45,14,200,68,31,61,175,208,17,120,82,244,138,208,165,21,19,236,232,180,217,50,74,70,126,114,227,62,192,124,9,85,148,33,77,255,117,75,102,87,151,255,87,74,74,181,111,108,9,249,220,174,59,80,254,168,29,30,94,171,133,133,195,105,64,254,68,65,18,158,54,73,203,65,175,151,170,236,138,17,119,128,237,214,189,28,250,38,149,97,242,81,212,254,57,18,120,155,64,96,108,75,78,74,121,191,243,30,42,60,103,165,196,160,195,216,99,182,173,214,182,105,53,231,3,45,212,144,101,217,65,141,44,230,125,151,154,123,57,134,223,98,133,156,238,137,181,80,175,230,167,131,180,13,69,77,44,156,165,252,14,27,85,71,1,82,196,64,243,26,167,146,98,201,6,195,247,200,224,44,177,104,109,187,231,83,118,28,159,92,179,28,14,162,81,84,21,168,34,156,21,127,215,88,218,208,11,92,161,239,239,82,221,59,86,83,201,199,216,151,139,23,54,39,52,103,204,247,24,102,94,157,138,42,49,131,183,208,50,95,236,54,6,211,26,68,72,56,212,134,24,91,114,132,1,217,80,38,47,29,47,0,107,102,99,129,33,140,243,74,251,89,247,103,12,114,58,113,240,72,188,39,48,72,89,45,102,206,245,247,231,56,167,129,122,222,47,40,78,227,159,64,206,34,127,203,127,87,40,108,152,238,147,231,46,104,89,182,180,232,86,89,91,57,10,222,202,59,199,135,60,199,189,40,84,125,28,84,162,210,91,143,34,106,117,118,3,125,126,237,60,131,173,153,69,49,212,204,117,163,31,239,202,232,152,234,3,162,32,176,184,184,196,154,131,144,115,6,53,122,55,69,166,19,230,183,175,244,1,156,11,37,121,134,121,152,142,158,125,229,150,44,183,216,109,7,65,222,169,56,222,140,110,233,157,138,66,208,6,111,166,188,76,208,222,4,104,211,10,57,141,243,65,228,86,85,88,169,91,237,56,249,133,77,21,32,37,230,55,0,184,110,228,158,62,98,45,147,177,19,119,89,164,103,132,239,84,139,68,204,157,49,41,50,89,113,159,203,51,133,120,184,210,237,15,249,187,100,253,50,16,154,112,64,193,254,10,235,200,253,84,31,169,171,39,122,70,46,186,139,212,162,173,158,41,23,86,148,172,196,237,242,58,102,180,150,238,191,25,240,204,252,125,148,29,124,51,95,10,196,55,49,159,138,144,255,126,205,43,49,42,17,59,60,77,139,177,239,64,36,224,98,205,234,70,199,103,139,218,206,207,178,217,255,32,134,59,25,221,74,22,102,82,19,20,170,142,134,42,106,249,64,80,222,28,21,169,50,235,4,237,56,81,87,76,32,251,42,6,173,105,54,191,8,136,5,245,206,239,176,9,116,24];function Ae(e,t,n){var i=e.gl,a=1/t,r=1/n,o=5;this.program=Se(i,Re),this.setUniforms=function(){i.getUniformLocation(this.program,"u_image");var e=i.getUniformLocation(this.program,"u_flipY"),t=i.getUniformLocation(this.program,"u_singleStepOffset"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform2f(t,a,r),i.uniform1f(n,o),i.uniform1f(e,1)},this.setParameters=function(e){void 0!==e.denoiseLevel&&(o=e.denoiseLevel)},this.setSize=function(e,t){a=1/e,r=1/t}}var Oe=[11,196,242,139,198,252,188,5,32,162,171,128,13,160,25,222,172,102,207,244,158,69,103,57,239,111,150,18,157,82,55,210,20,131,156,190,100,112,230,97,199,225,96,74,99,94,248,222,162,213,95,122,158,212,233,42,22,37,217,115,36,152,30,123,116,104,212,109,129,41,220,77,213,97,124,45,4,219,197,171,40,18,149,104,20,4,248,102,64,9,50,217,124,131,180,188,159,170,63,1,84,130,150,117,14,212,118,67,165,97,207,242,251,15,30,187,188,77,79,122,67,101,252,109,244,82,37,191,227,35,114,87,57,71,99,218,155,54,101,239,138,197,13,226,228,176,157,158,87,98,55,251,79,150,64,138,200,135,40,132,135,207,146,252,222,57,58,111,151,225,78,59,36,210,70,29,121,160,210,31,109,67,167,194,177,236,91,108,164,229,130,211,59,66,93,18,107,226,54,210,51,8,77,217,19,73,187,33,30,59,9,135,162,49,5,11,225,111,119,11,247,218,129,115,83,205,170,21,4,69,210,133,134,245,109,15,177,9,81,81,203,105,42,158,12,255,151,165,230,205,5,92,196,251,211,187,27,214,43,186,91,233,85,192,229,15,71,38,220,20,38,101,44,78,7,60,251,186,75,103,108,53,166,220,186,208,194,120,207,230,159,248,22,32,142,124,96,157,222,60,191,65,145,6,239,125,151,147,50,58,130,207,110,131,223,231,137,238,28,182,216,167,198,191,37,67,76,1,144,232,218,79,72,28,65,101,43,216,64,253,16,173,179,123,140,27,233,245,199,230,36,181,102,114,247,162,18,34,20,212,25,171,24,28,143,80,94,40,167,34,209,61,117,130,1,198,196,7,21,252,180,255,92,128,119,9,48,156,138,136,151,143,23,44,52,3,40,197,228,31,123,67,163,140,32,54,204,187,149,80,19,255,82,120,195,12,110,65,56,212,143,22,78,44,234,72,140,29,118,103,18,36,7,122,50,37,139,47,142,243,25,208,88,237,126,50,103,127,19,183,29,169,29,1,55,23,100,32,129,239,243,160,61,178,197,117,199,45,57,26,165,135,92,218,59,0,197,54,13,96,40,141,212,221,131,103,46,22,228,191,167,73,20,86,62,11,147,217,116,205,203,110,134,249,51,6,123,23,86,231,157,8,144,83,126,115,118,35,96,36,229,36,220,228,143,71,45,223,129,48,236,5,145,202,188,208,184,70,241,104,255,188,181,146,210,206,144,53,77,101,120,38,8,245,80,230,165,160,183,83,202,79,127,57,214,126,242,150,208,40,239,148,35,163,201,97,74,70,214,181,63,240,147,33,253,149,140,77,197,82,126,189,231,7,196,212,80,14,151,24,57,144,243,81,234,66,24,19,236,2,137,121,246,129,65,7,99,110,174,54,74,182,81,234,142,37,72,110,220,255,64,119,10,188,111,191,228,1,205,9,204,143,56,62,125,84,106,225,131,97,192,43,240,157,161,75,168,247,44,175,65,81,192,48,21,157,167,80,191,130,161,75,85,186,174,42,117,1,68,252,204,138,254,203,152,21,13,64,144,195,207,238,229,54,103,247,159,245,211,85,191,141,168,32,234,85,46,118,12,5,199,4,19,217,203,202,156,33,143,114,116,60,66,40,58,77,208,237,171,26,72,175,114,205,248,87,137,62,210,143,151,197,167,210,241,122,150,104,122,154,2,70,102,83,19,36,141,136,199,42,79,229,71,86,194,109,31,236,80,166,17,230,109,1,40,28,46,224,56,20,230,47,100,254,116,208,76,169,157,241,175,3,70,85,31,38,245,58,33,80,145,237,8,22,71,224,158,156,31,249,81,87,247,230,199,237,96,167,123,63,243,79,156,206,203,160,54,124,68,253,215,132,235,57,185,92,238,55,59,210,104,71,26,183,180,71,12,255,224,192,65,154,72,244,8,164,10,248,46,207,30,92,1,80,244,31,189,138,88,216,218,63,100,227,116,57,119,94,135,5,126,255,32,191,163,61,209,194,88,248,112,139,173,43,69,134,3,160,151,137,25,98,239,166,19,123,208,180,31,120,30,191,75,183,179,126,180,125,92,107,105,206,138,28,67,139,3,188,230,184,255,121,13,181,45,160,114,202,194,123,87,55,124,97,164,82,95,232,216,117,62,5,90,176,82,167,52,160,153,174,168,105,146,91,248,81,79,249,97,138,133,170,245,229,132,61,5,149,224,246,194,213,61,12,109,44,136,235,95,219,133,220,27,93,36,93,124,180,81,141,152,220,170,163,229,197,124,171,232,48,70,251,106,119,150,20,16,49,119,247,42,132,36,76,254,124,177,66,175,9,1,39,92,127,195,171,198,34,2,64,144,179,72,40,151,110,89,229,42,125,33,238,16,220,228,51,203,8,1,68,145,253,133,118,93,163,129,22,13,248,65,12,4,63,101,210,70,170,138,203,14,246,54,194,195,27,107,241,175,35,171,49,52,106,121,45,36,152,85,215,132,78,167,34,18,167,245,152,133,134,170,120,182,10,146,191,37,2,205,47,125,20,203,44,88,81,32,150,223,220,218,238,254,30,212,167,221,115,156,82,226,137,220,221,97,3,139,202,33,9,27,26,126,40,215,25,126,9,82,208,49,217,14,161,81,196,61,60,87,254,213,194,81,216,161,151,209,166,222,230,24,128,117,140,92,4,203,254,170,253,249,88,90,112,226,18,44,122,39,158,158,56,69,204,159,5,179,51,197,233,139,216,102,226,206,248,15,78,112,214,126,67,28,40,38,98,190,178,206,67,94,245,254,160,101,176,32,157,26,132,83,252,228,87,242,32,127,160,112,210,224,133,149,115,41,30,16,200,69,89,81,77,144,12,106,182,73,54,28,53,195,28,216,179,179,136,35,141,102,234,177,240,34,186,106,145,245,3,84,48,251,157,245,11,217,111,227,138,42,67,114,211,177,37,103,16,71,152,72,117,123,36,213,202,56,124,227,84,8,45,229,149,165,214,69,244,169,55,68,62,94,104,228,74,205,123,222,17,7,172,158,227,74,206,149,67,175,171,251,185,121,151,223,63,35,229,32,49,190,209,120,137,69,213,214,19,150,187,177,28,12,158,153,126,149,171,167,234,120,129,109,32,157,180,75,66,56,233,115,127,230,157,32,34,143,156,31,230,168,174,125,118,195,249,243,165,81,246,10,144,15,103,139,55,173,7,59,136,69,172,54,132,165,140,78,77,230,33,169,129,188,71,209,109,161,8,57,57,199,143,31,164,43,58,130,1,110,145,31,229,13,46,149,94,244,106,76,238,105,107,1,183,177,10,61,225,94,185,116,58,183,95,225,22,119,19,248,28,13,123,125,108,158,64,184,77,245,153,162,217,227,208,41,185,211,235,41,153,181,54,166,165,11,154,55,21,184,209,192,249,44,164,160,29,229,159,82,156,198,241,183,114,83,137,186,151,148,31,21,197,216,145,32,13,50,22,241,137,39,71,28,142,160,215,107,221,45,202,104,227,110,186,12,150,145,240,51,49,44,196,115,224,238,149,189,134,99,67,241,62,157,240,114,247,195,26,200,141,97,147,249,23,150,174,10,13,219,81,73,58,242,96,250,243,15,49,218,58,230,104,252,175,150,123,86,185,84,90,198,6,36,0,99,72,28,166,238,115,231,171,249,179,71,174,68,156,227,17,198,79,73,142,99,144,20,80,62,80,191,142,46,71,9,243,6,8,214,116,72,190,106,161,19,185,100,9,187,64,94,86,203,174,156,245,222,95,54,30,148,19,11,50,112,96,61,237,159,173,7,154,127,175,79,48,97,89,78,126,66,171,204,158,195,27,226,205,222,157,89,251,90,125,37,212,27,97,3,141,247,175,50,121,7,187,68,196,181,202,167,189,57,84,81,222,23,27,84,130,176,98,66,240,207,18,23,28,163,163,194,45,37,129,202,170,97,189,0,81,238,0,39,199,163,35,211,206,247,65,29,116,242,67,102,235,13,136,232,230,114,146,187,7,254,142,26,121,16,237,5,160,201,114,94,178,199,95,212,241,45,112,180,188,72,86,114,189,155,149,149,163,210,112,101,12,69,225,75,202,223,28,242,90,215,156,169,224,245,135,128,92,148,217,131,208,255,25,135,117,136,5,104,185,249,161,228,214,16,105,204,9,182,135,153,220,101,244,160,207,58,182,118,185,240,57,245,123,13,112,182,106,229,220,90,29,86,215,96,147,232,2,55,131,225,137,68,245,89,141,252,97,3,129,155,216,223,98,116,45,78,85,141,161,74,215,7,150,171,225,59,78,221,152,236,14,117,100,208,158,86,13,185,124,87,157,111,40,187,182,124,173,71,173,23,199,52,155,190,134,11,23,64,25,215,39,115,231,173,77,72,114,54,252,116,178,59,221,106,241,119,254,30,226,241,204,233,113,197,96,146,0,41,67,3,231,126,12,218,202,22,171,114,249,176,134,160,19,216,31,229,118,226,62,242,126,126,42,127,130,68,218,218,81,202,106,217,191,25,177,82,97,81,36,232,137,58,90,216,190,117,235,20,194,144,76,178,27,213,13,208,18,29,118,126,49,98,203,179,128,237,100,32,242,189,212,6,210,210,188,161,205,13,124,119,13,215,112,41,183,176,215,168,210,182,111,1,115,2,239,141,8,177,124,112,48,197,2,239,11,99,4,36,77,69,47,244,19,153,61,19,2,96,176,7,112,122,131,169,25,189,116,171,49,12,121,162,79,154,74,251,50,233,182,63,180,224,118,49,253,21,20,16,31,144,184,93,174,231,244,183,13,49,225,189,211,73,185,49,110,142,25,226,45,176,233,204,74,33,16,205,88,131,92,157,170,175,68,170,61,53,116,165,16,27,182,160,181,87,241,15,151,85,107,76,167,129,25,172,127,184,138,153,222,228,125,64,44,45,32,12,227,148,106,152,83,240,166,54,235,32,190,12,242,164,123,189,53,194,141,104,43,202,110,4,168,119,245,232,179,178,198,1,224,87,86,160,31,19,140,233,102,191,204,4,98,138,163,191,106,24,213,47,208,82,137,132,131,16,253,84,25,144,90,159,148,16,196,84,166,61,160,101,229,227,93,118,59,87,66,16,128,59,96,131,250,20,184,150,205,91,227,201,62,35,79,180,172,173,85,197,106,153,238,229,60,204,65,193,230,94,101,177,134,6,165,53,171,142,208,155,2,11,4,202,127,54,17,142,117,227,121,128,204,192,147,147,92,189,5,224,148,72,18,83,101,126,124,228,153,242,123,229,247,92,221,6,73,227,250,87,167,194,129,187,73,38,185,109,217,240,193,88,50,178,180,151,54,197,187,137,190,166,233,1,103,204,88,31,127,185,29,65,1,29,254,223,14,83,167,215,114,248,30,173,89,173,187,69,5,105,117,15,106,94,173,63,227,25,230,190,136,168,177,175,107,91,126,254,34,188,25,118,48,12,226,130,153,162,57,47,181,212,79,160,97,64,157,246,90,53,43,149,76,102,15,195,107,58,242,84,172,29,81,198,113,81,251,138,182,154,111,30,171,129,56,17,45,214,153,112,117,203,174,40,38,234,236,32,4,112,225,26,187,195,246,252,9,218,69,160,223,178,54,148,81,8,134,151,75,248,63,224,240,48,75,250,221,85,46,100,50,3,70,64,102,111,160,155,233,59,147,184,57,61,6,126,79,176,16,185,94,166,33,135,78,42,75,140,208,140,44,153,187,64,103,119,160,236,16,239,74,218,219,212,207,110,53,30,76,248,40,111,98,44,20,113,204,233,109,135,96,107,39,163,203,125,45,157,152,71,239,175,174,159,147,80,111,93,38,253,228,154,225,181,101,12,241,127,65,49,189,5,85,151,237,213,143,14,104,138,54,52,27,4,132,67,35,156,86,157,73,16,229,222,245,110,79,165,179,56,179,53,218,229,100,58,87,149,48,231,64,63,115,67,3,172,6,186,115,154,60,53,214,152,149,89,234,37,143,82,255,64,28,183,93,112,39,70,185,57,0,199,9,61,175,219,41,76,37,176,82,125,65,53,160,214,105,62,153,244,222,96,205,6,178,85,41,240,113,0,96,149,38,3,195,18,152,41,246,3,103,29,110,134,30,101,75,46,103,199,184,20,230,8,55,120,4,229,168,35,43,7,28,161,143,87,27,87,79,255,186,44,195,158,155,181,119,81,172,217,107,95,98,55,243,186,66,105,48,224,123,232,84,156,20,10,156,208,204,52,34,228,136,97,242,200,246,211,67,202,40,241,91,92,253,9,54,72,131,221,106,178,32,44,182,4,225,193,37,20,249,249,231,10,206,18,71,254,221,187,172,88,204,6,127,138,102,7,208,75,147,219,199,177,79,36,170,101,207,177,109,95,143,217,41,199,80,183,201,2,254,12,55,23,198,14,255,69,245,138,155,129,227,167,168,130,156,135,14,96,93,48,99,143,107,126,92,117,143,112,108,193,228,84,13,41,186,27,172,92,201,149,116,19,112,197,116,209,128,102,1,55,152,177,28,37,34,50,83,41,199,74,178,59,111,67,118,35,252,36,33,87,28,170,17,215,47,90,154,124,137,15,14,211,59,75,59,30,77,0,49,37,225,191,87,101,127,214,227,160,99,174,234,82,148,235,16,241,219,147,170,127,221,250,116,39,218,156,72,227,172,55,0,79,188,76,51,222,232,24,36,62,94,154,3,61,230,146,114,253,0,128,58,253,90,72,211,242,38,39,133,153,161,119,105,195,152,225,208,105,140,80,217,186,196,157,21,116,230,116,139,25,159,143,118,128,77,201,238,247,228,15,168,4,133,148,21,148,12,44,241,7,115,17,129,176,202,46,130,122,129,235,141,223,85,21,199,65,181,169,52,174,161,153,62,25,164,115,213,89,138,199,103,79,200,165,135,249,244,27,209,178,240,129,211,61,9,111,157,147,119,36,119,255,110,130,84,49,210,225,247,100,26,121,127,163,160,26,79,99,24,77,65,32,178,109,36,27,253,173,110,183,11,14,211,57,130,254,124,104,165,219,31,70,97,14,194,39,61,26,141,125,228,126,194,184,101,160,204,106,128,144,106,103,171,18,246,129,220,85,172,151,123,5,73,155,192,175,91,157,239,61,237,116,170,65,233,56,19,49,114,168,190,3,214,53,250,90,213,244,88,101,30,229,248,124,15,71,141,27,172,235,21,129,211,72,61,172,112,170,128,135,96,196,221,255,27,176,105,188,183,121,33,37,149,53,131,226,233,29,167,234,218,109,53,185,152,36,248,53,61,235,78,21,201,214,210,163,12,251,187,45,188,137,126,127,237,92,234,91,240,225,38,194,57,213,251,237,171,30,99,52,14,49,84,101,252,237,7,166,122,114,32,107,32,207,239,136,168,178,12,11,241,233,230,146,132,18,83,233,41,172,17,6,161,42,113,87,40,255,185,1,146,128,5,240,126,131,71,42,54,124,205,2,122,71,30,222,229,40,134,142,102,97,239,151,177,1,230,231,49,123,219,28,129,91,152,112,13,154,81,197,226,255,112,158,178,177,55,181,108,138,185,245,29,186,21,73,188,209,154,200,89,116,235,198,144,36,87,248,22,7,200,122,7,148,44,42,87,140,238,204,95,231,252,0,136,0,22,39,70,123,125,165,113,227,172,146,163,128,158,36,52,91,19,36,245,27,150,138,141,11,67,239,224,65,24,116,101,7,39,46,142,172,164,243,148,0,33,226,59,47,203,137,156,241,66,250,157,30,204,101,143,134,98,238,155,226,25,184,136,219,89,100,193,11,143,71,139,243,230,151,0,249,1,78,26,32,93,104,157,67,97,164,248,86,124,146,93,74,222,228,167,55,53,100,135,216,109,13,64,37,106,177,200,200,182,92,251,69,31,243,89,80,198,14,132,203,72,103,28,104,217,24,97,223,113,11,29,178,191,210,46,162,255,68,99,8,237,213,162,152,193,183,121,203,19,108,182,29,86,26,192,103,220,103,205,154,179,197,9,22,73,127,175,146,38,119,210,0,24,180,21,245,215,204,91,186,119,138,183,239,15,155,231,248,133,39,24,101,144,236,10,230,54,174,227,73,21,110,10,160,241,232,131,14,212,127,232,59,122,65,146,54,163,9,189,190,121,88,170,62,194,14,204,152,245,38,131,37,91,81,72,114,29,115,239,182,56,44,156,159,177,180,82,160,93,97,86,183,236,50,95,85,39,71,181,225,152,143,63,123,117,34,44,109,160,166,229,240,91,138,102,54,180,173,44,50,80,42,124,7,50,124,211,239,21,94,197,185,239,213,107,142,64,95,124,125,17,180,97,189,101,52,48,19,112,12,70,9,212,177,54,118,66,84,147,236,248,26,124,95,103,135,254,124,49,112,186,99,120,90,8,194,191,88,57,242,65,61,10,104,246,197,252,19,159,58,194,75,173,242,103,8,115,84,69,238,149,26,15,159,182,141,132,119,70,29,53,20,143,46,163,204,6,236,59,45,185,172,89,119,83,38,144,36,222,96,151,26,99,195,163,170,133,92,159,214,53,150,116,90,176,69,145,130,15,172,140,217,215,101,163,115,161,65,101,8,7,183,113,213,134,58,175,130,251,143,173,248,168,135,60,159,30,194,68,208,119,120,2,40,178,227,247,161,77,47,136,46,244,163,72,65,158,25,225,195,61,132,182,204,177,186,200,81,2,65,105,212,72,94,203,232,217,182,123,251,228,160,1,161,204,123,20,37,1,77,208,179,45,149,181,122,102,190,123,213,164,231,41,216,130,234,248,208,251,252,220,84,209,67,47,61,220,5,142,162,26,236,121,142,248,132,255,65,122,203,196,102,191,187,2,195,127,255,193,92,49,91,186,154,39,156,29,211,172,49,104,245,114,153,223,211,199,249,35,130,160,128,0,152,176,183,20,236,113,193,108,26,255,11,237,102,133,245,94,115,114,10,89,229,214,221,99,149,30,99,37,246,10,26,26,39,92,123,170,73,211,127,227,54,30,86,133,159,112,225,91,148,100,174,149,75,143,14,140,20,44,64,212,5,243,8,116,63,30,97,42,123,20,73,212,85,207,83,122,27,251,233,84,10,17,236,232,83,200,127,119,143,163,204,220,167,59,231,20,106,186,222,191,8,40,234,21,25,180,13,116,250,152,224,174,75,3,205,38,173,215,236,151,185,121,254,244,154,239,17,53,106,164,61,49,116,216,118,94,150,35,181,26,238,66,49,211,221,132,146,166,115,39,136,36,205,230,179,31,197,51,148,165,109,38,70,37,148,52,44,209,250,98,58,246,225,103,198,101,26,25,196,207,8,166,21,88,252,175,253,10,88,107,157,19,225,61,12,246,221,37,239,186,167,137,142,135,222,128,174,62,95,216,38,141,157,45,232,97,217,173,203,234,116,129,69,206,189,94,221,12,54,139,186,247,184,16,200,121,244,104,8,7,35,111,47,188,10,140,92,73,143,206,203,72,122,184,20,102,197,130,64,150,63,96,239,8,132,111,217,84,91,198,32,43,100,138,241,15,160,42,190,253,193,184,164,124,29,210,96,67,224,221,182,29,218,129,149,29,128,174,98,88,88,125,56,40,255,120,5,0,87,174,42,150,90,112,201,183,169,19,57,195,191,12,58,244,235,132,25,145,72,146,214,8,125,100,135,12,5,102,97,248,174,24,159,90,33,43,187,6,61,212,241,225,190,219,252,197,123,129,164,108,123,55,230,4,153,166,105,234,15,85,216,23,56,32,3,41,110,68,146,172,133,202,98,41,7,47,152,35,255,168,106,241,226,222,77,244,52,185,65,252,227,32,66,38,11,172,60,28,28,103,84,1,1,205,182,190,28,189,102,253,43,1,191,148,116,10,227,18,81,93,80,239,157,232,215,180,163,165,161,109,177,71,150,244,144,208,160,110,22,174,60,206,43,103,121,55,103,114,115,173,238,13,10,227,251,41,176,216,158,229,216,55,234,128,128,20,167,106,181,86,163,130,215,110,149,191,10,227,215,8,214,154,178,181,15,19,0,247,250,97,74,43,157,55,94,174,41,41,9,199,97,20,91,32,18,10,43,98,240,247,203,20,250,117,160,44,229,202,187,64,54,124,15,184,169,129,27,160,240,26,61,255,60,166,60,144,209,84,55,187,186,168,13,124,125,29,17,100,249,227,62,205,78,179,163,168,139,168,21,38,83,239,151,74,43,66,2,92,72,71,94,216,134,238,20,45,158,213,164,73,57,80,47,198,184,130,223,227,71,132,133,235,177,85,174,142,124,172,200,54,229,40,126,60,76,92,216,153,56,241,174,66,141,90,226,3,30,68,234,71,187,163,112,146,255,22,143,170,204,3,127,179,81,139,160,37,77,246,128,220,196,158,153,73,177,65,199,119,29,197,144,130,248,206,155,253,108,213,124,7,223,221,162,146,134,242,65,99,162,107,120,247,214,207,96,150,169,131,208,218,221,28,24,112,208,23,1,130,142,232,56,104,45,33,158,95,255,123,31,74,76,120,178,155,213,6,195,164,8,8,69,241,197,127,83,169,21,167,19,94,143,252,33,159,248,241,170,153,147,1,149,199,201,131,170,79,236,212,209,143,107,98,24,123,56,33,193,85,247,64,225,135,210,78,145,57,16,145,71,170,20,133,87,235,4,166,239,100,82,235,81,50,223,9,193,52,49,86,129,190,196,82,165,107,63,115,161,98,33,20,193,29,42,151,205,252,124,72,245,48,181,67,7,13,21,127,59,226,188,144,129,112,244,192,121,213,80,42,196,1,13,107,108,78,0,40,121,225,148,237,234,209,216,238,9,147,226,254,96,89,212,72,193,106,75,135,74,227,67,255,92,191,81,188,124,226,149,152,142,15,159,195,238,114,55,255,166,157,230,59,148,170,166,151,65,213,104,253,253,112,150,82,147,137,27,214,100,247,65,81,92,47,86,217,7,45,120,81,130,31,236,243,76,78,3,45,105,172,220,71,48,220,94,196,249,163,193,133,50,236,205,20,55,2,63,14,127,69,113,212,204,12,58,79,89,86,29,61,199,201,64,149,6,144,182,150,129,31,18,167,120,248,82,107,25,143,128,27,161,28,25,153,183,217,238,78,186,106,92,27,202,219,165,96,0,216,234,169,73,101,39,182,113,217,240,170,116,172,221,250,233,48,49,242,83,227,92,181,184,72,230,180,21,15,108,135,25,38,153,25,124,227,26,149,73,236,39,211,244,149,58,183,132,26,223,219,174,144,117,233,219,165,205,157,159,222,184,52,47,241,201,123,65,24,44,55,215,177,168,250,179,115,190,227,123,158,163,179,224,69,196,66,207,254,243,101,221,193,140,250,4,28,222,52,96,138,160,33,218,64,118,214,234,201,152,148,91,178,111,107,144,142,6,182,102,72,188,34,213,181,26,223,58,255,103,81,17,47,169,11,245,224,123,148,215,237,186,107,75,152,90,202,166,22,149,197,5,246,238,78,76,229,106,199,94,127,195,0,45,82,6,159,103,96,138,231,71,46,107,59,216,39,43,12,221,27,214,56,155,145,66,187,169,250,235,78,211,179,239,183,198,163,93,5,196,24,174,143,225,106,139,89,98,13,127,207,184,194,30,1,165,198,169,8,197,118,86,163,221,138,23,209,61,116,79,99,233,43,130,60,244,85,229,243,172,123,148,200,120,192,127,211,52,11,159,41,95,212,230,188,169,156,137,29,212,12,148,168,148,133,243,44,241,139,127,24,246,220,227,125,209,97,60,52,162,192,146,49,161,92,138,112,189,128,59,126,125,46,207,60,79,231,174,152,209,68,223,205,2,38,14,91,116,159,255,28,27,178,248,164,104,158,79,69,214,234,157,12,75,163,83,253,245,202,61,213,176,6,197,230,29,208,166,253,194,254,235,29,141,241,70,249,15,62,0,148,163,135,52,122,40,96,87,31,179,152,51,216,133,184,122,198,203,60,115,218,191,193,16,178,25,148,252,112,104,103,252,36,92,221,28,179,43,199,198,151,128,100,252,217,161,249,34,201,172,118,52,180,252,104,7,223,44,116,102,212,21,40,224,184,55,163,210,21,207,161,239,51,54,155,41,133,18,67,48,3,165,130,251,4,79,214,57,72,130,157,212,144];function Ce(e,t,n){var i=e.gl,a=5,r=.1,o=.5,s=175/180*3.141593,c=115/180*3.141593,d=173/180*3.141593,u=116/180*3.141593,l=2.04203545,p=0,f=0,m=0,g=[],v=[0,1,3,4,6,7,9,10,12,13,15,16,18,19,21,22,24,26,29,31,34,36,39,41,44,46,49,51,54,56,59,61,64,65,66,67,68,69,70,72,73,74,75,76,77,79,80,81,82,83,84,85,87,88,89,90,91,92,94,95,96,97,98,99,101,102,103,104,105,106,107,109,110,111,112,113,114,116,117,118,119,120,121,123,124,125,126,127,128,129,131,132,133,134,135,136,138,139,140,141,142,143,145,146,147,148,149,150,151,153,154,155,156,157,158,160,161,162,163,164,165,166,168,169,170,171,172,173,175,176,177,178,179,180,182,183,184,185,186,187,188,190,191,192,193,194,195,197,198,199,200,201,202,204,205,206,207,208,209,210,212,213,214,215,216,217,219,220,221,222,223,224,226,226,226,227,227,227,228,228,228,229,229,229,230,230,231,231,231,232,232,232,233,233,233,234,234,235,235,235,236,236,236,237,237,237,238,238,239,239,239,240,240,240,241,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],h=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,32,33,35,36,37,39,40,42,43,44,46,47,49,50,51,53,54,56,57,58,59,61,62,63,64,66,67,68,69,71,72,73,74,76,77,78,79,81,82,83,84,86,87,88,90,91,92,93,95,96,97,98,100,101,102,103,105,106,107,108,110,111,112,113,115,116,117,118,120,121,122,124,125,126,127,129,130,131,132,134,135,136,137,139,140,141,142,144,145,146,147,149,150,151,152,154,155,156,158,159,160,161,163,164,165,166,168,169,170,171,173,174,175,176,178,179,180,181,183,184,185,186,188,189,190,192,193,194,195,197,198,199,200,202,203,204,205,207,208,209,210,212,213,214,215,217,218,219,220,222,223,224,226,226,226,227,227,228,228,229,229,230,230,231,231,232,232,233,233,234,234,234,235,235,236,236,237,237,238,238,239,239,240,240,241,241,242,242,243,243,243,244,244,244,245,245,245,246,246,246,247,247,247,248,248,248,249,249,249,250,250,250,251,251,251,252,252,252,253,253,253,254,254,254,255],S=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,35,36,37,38,39,40,41,43,44,45,46,47,48,50,51,52,53,54,55,56,58,59,60,61,62,63,65,66,67,68,69,70,72,73,74,76,77,78,80,81,83,84,85,87,88,89,91,92,94,95,96,98,99,100,102,103,105,106,107,109,110,111,113,114,116,117,118,120,121,122,124,125,127,128,129,131,132,133,135,136,138,139,140,142,143,144,146,147,149,150,151,153,154,155,157,158,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,192,193,193,194,195,195,196,197,197,198,199,199,200,201,201,202,203,203,204,205,205,206,207,207,208,209,209,210,211,211,212,213,213,214,215,215,216,217,217,218,219,219,220,221,221,222,223,223,224,225,225,226,227,227,228,229,229,230,231,231,232,233,233,234,235,235,236,237,237,238,239,239,240,241,241,242,243,243,244,245,245,246,247,247,248,249,249,250,251,251,252,253,253,254,255];this.program=Se(i,Oe),this.setUniforms=function(){var t=i.getUniformLocation(this.program,"u_flipY"),n=i.getUniformLocation(this.program,"u_denoiseLevel");i.uniform1f(n,a),i.uniform1f(t,1);var v=i.getUniformLocation(this.program,"light");i.uniform1f(v,r);var h=i.getUniformLocation(this.program,"redness");i.uniform1f(h,o);var S=i.getUniformLocation(this.program,"skin_he_max"),_=i.getUniformLocation(this.program,"skin_he_min"),E=i.getUniformLocation(this.program,"skin_hc_max"),I=i.getUniformLocation(this.program,"skin_hc_min"),y=i.getUniformLocation(this.program,"skin_hc_axis"),T=i.getUniformLocation(this.program,"facts_rotate_c"),b=i.getUniformLocation(this.program,"facts_rotate_le"),R=i.getUniformLocation(this.program,"facts_rotate_ge");i.uniform1f(S,s),i.uniform1f(_,c),i.uniform1f(E,d),i.uniform1f(I,u),i.uniform1f(y,l),i.uniform1f(T,p),i.uniform1f(b,f),i.uniform1f(R,m);var A=i.getUniformLocation(this.program,"u_originImage");i.activeTexture(i.TEXTURE2),i.bindTexture(i.TEXTURE_2D,e.inputTexture),i.uniform1i(A,2);for(var O=["lighten_lut"],C=[i.TEXTURE3],N=0;N<O.length;N++){var w=i.getUniformLocation(this.program,O[N]);i.activeTexture(C[N]),i.bindTexture(i.TEXTURE_2D,g[N]),i.uniform1i(w,N+3)}},this.setParameters=function(e){void 0!==e.denoiseLevel&&(a=e.denoiseLevel),void 0!==e.lightLevel&&(r=e.lightLevel),void 0!==e.rednessLevel&&(o=e.rednessLevel,this._updateRedness(o)),void 0!==e.lighteningContrastLevel&&this._updateLut(e.lighteningContrastLevel)},this._updateRedness=function(e){var t,n,i=3.141593,a=e,r=a;a>1&&(a=1),a<0&&(a=0),r>1&&(r=1),r<0&&(r=0),p=.8*a,r<.8&&(r=0),(l=(117-4*r)/180*i)<(u=(116-4*r)/180*i)&&(l=u),u<i/2&&(u=i/2),l<i/2&&(l=i/2),(c=(115-4*r)/180*i)<i/2&&(c=i/2),(d=173/180*i)>i&&(d=i),l>i&&(l=i),(s=175/180*i)>i&&(s=i),n=d-l,m=(t=s-d)>.01?p*n/t:p,n=l-u,f=(t=u-c)>.01?p*n/t:p},this._updateLut=function(e){var t=null;0==e&&(t=h),1==e&&(t=S),2==e&&(t=v);for(var n=[new Uint8Array(t)],a=[256],r=[1],o=0;o<n.length;o++)i.bindTexture(i.TEXTURE_2D,g[o]),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,a[o],r[o],0,i.LUMINANCE,i.UNSIGNED_BYTE,n[o])},this._init=function(){var e=null;e=h;for(var t=[new Uint8Array(e)],n=[256],a=[1],r=0;r<t.length;r++){var o=i.createTexture();i.bindTexture(i.TEXTURE_2D,o),i.texImage2D(i.TEXTURE_2D,0,i.LUMINANCE,n[r],a[r],0,i.LUMINANCE,i.UNSIGNED_BYTE,t[r]),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),g.push(o)}},this._init()}var Ne=!1;function we(){this.programs=[];var e=this,t=null,n=null;e.gl=null,e.inputTexture=null;var i=[],a=[],r=0,o=0;e._initGl=function(n,s){e.inputTexture=t.createTexture(),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR);for(var c=0;c<4;c++){var d=t.createTexture();t.bindTexture(t.TEXTURE_2D,d),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),c<2?t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n,s,0,t.RGBA,t.UNSIGNED_BYTE,null):t.texImage2D(t.TEXTURE_2D,0,t.RGBA,s,n,0,t.RGBA,t.UNSIGNED_BYTE,null);var u=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,u),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,d,0),i.push(d),a.push(u)}t.viewport(0,0,n,s),r=n,o=s},e.render=function(s){if(t){var c=0;o==s.videoWidth&&r===s.videoHeight&&(c=2),t.viewport(0,0,s.videoWidth,s.videoHeight),t.bindTexture(t.TEXTURE_2D,e.inputTexture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,s);for(var d=Ne?e.programs.length-1:0,u=0;u<=d;u++){var l=e.programs[u].program;t.useProgram(l);var p=t.getUniformLocation(l,"u_image");e.programs[u].setUniforms(),t.bindFramebuffer(t.FRAMEBUFFER,a[c+u%2]),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,i[c+u%2]),t.uniform1i(p,0)}t.useProgram(n);var f=t.getUniformLocation(n,"u_flipY");t.uniform1f(f,-1),t.bindFramebuffer(t.FRAMEBUFFER,null),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT),t.drawArrays(t.TRIANGLES,0,6)}},e.setEnableBeauty=function(e){Ne=e},e.init=function(i,a,r){if("undefined"==typeof WebGLRenderingContext)throw new Error("NOT_SUPPORT");t=r.getContext("webgl"),e.gl=t,e._initGl(i,a),e.programs.push(new Ee(this,i,a)),e.programs.push(new ye(this,i,a)),e.programs.push(new be(this,i,a)),e.programs.push(new Ae(this,i,a)),e.programs.push(new Ce(this,i,a)),n=e.programs[0].program},e.release=function(){e.gl=null,t=null,n=null,e.inputTexture=null,e.programs=[],i=[],a=[]},e.setDenoiseLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({denoiseLevel:t})})},e.setLightLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({lightLevel:t})})},e.setRednessLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({rednessLevel:t})})},e.setContrastLevel=function(t){e.programs.forEach(function(e){e.setParameters&&e.setParameters({lighteningContrastLevel:t})})},e.setSize=function(t,n){e.programs.forEach(function(e){e.setSize&&e.setSize(t,n)})}}we._instance=null,we.getInstance=function(){return we._instance||(we._instance=new we),we._instance};var ke=30,De=null,Le=!1,Me=5,Pe=.35,xe=.5,Ve=1,Ue=null,je=null;var Fe={addVideoEffectCapability:function(e){e.videoEffect={videoContextInited:!1,originVideoTrack:null,canvasVideoTrack:null,ctx:null},e._initVideoContext=function(){if(e.videoEffect.videoContextInited)throw new Error("Failed to init video context. Already inited");if(!e.stream)throw new Error("Failed to init video context. Local Stream not initialized");e.videoEffect.originVideoTrack=e.stream.getVideoTracks()[0],e.attributes&&e.attributes.maxFrameRate&&(ke=e.attributes.maxFrameRate),e.videoEffect.videoContextInited=!0},e._renderWithWebGL=function(e){return new Promise(function(t){je||(je=document.createElement("canvas")),Ue||(Ue=document.createElement("video")),Ue.setAttribute("autoplay",""),Ue.setAttribute("muted",""),Ue.muted=!0,Ue.setAttribute("playsinline",""),Ue.setAttribute("style","display:none"),Ue.srcObject=e;var n=e.getVideoTracks()[0].getSettings(),i=n.width,a=n.height;console.log("Width: ".concat(i,", Height: ").concat(a)),je.setAttribute("width",i),je.setAttribute("height",a),Ue.setAttribute("width",i),Ue.setAttribute("height",a);var r=we.getInstance();r.init(Ue.width,Ue.height,je),r.setDenoiseLevel(Me),r.setLightLevel(Pe),r.setRednessLevel(xe),r.setContrastLevel(Ve),Ue.addEventListener("playing",function e(){var n=je.captureStream(ke);Ue.removeEventListener("playing",e,!0),t([n.getVideoTracks()[0],Ue])},!0),Ue.play()})},e._disableEffect=function(){e.videoEffect.videoContextInited||e._initVideoContext();var t=e.videoEffect.originVideoTrack;if(!t)return o.default.warning("Video track is null, fail to disable video effect!"),Promise.resolve();if(e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find(function(e){return e&&e.track&&"video"==e.track.kind});if(n&&n.replaceTrack&&t)return n.replaceTrack(t)}return Promise.resolve()},e._releaseEffect=function(){var t;return t=Le?e._disableEffect():Promise.resolve(),we.getInstance().release(),e.videoEffect.videoContextInited=!1,e.videoEffect.canvasVideoTrack=null,t},e._enableEffect=function(){return e.videoEffect.videoContextInited||e._initVideoContext(),e.videoEffect.originVideoTrack?(e.videoEffect.canvasVideoTrack?(e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()):e._renderWithWebGL(e.stream).then(function(t){var n=pe()(t,2),i=n[0],a=n[1];e.videoEffect.canvasVideoTrack=i;var r=we.getInstance();requestAnimationFrame(function t(){Le&&r.render(a),e.videoEffect.videoContextInited&&requestAnimationFrame(t)}),m.isChrome()&&document.addEventListener("visibilitychange",function(){document.hidden,document.hidden?De=function(e,t){var n=t/1e3,i=new AudioContext,a=i.createGain();a.gain.value=0,a.connect(i.destination),function t(){var o=i.createOscillator();o.onended=t,o.connect(a),o.start(0),o.stop(i.currentTime+n),e(i.currentTime),r&&(o.onended=function(){i.close()})}();var r=!1;return function(){r=!0}}(function(){Le&&r.render(a)},ke):De&&(De(),De=null)},!1),e._showEffectInLocalPlayer(),e._replaceWithCanvasTrack()}),Promise.resolve()):(o.default.warning("Video track is null, fail to enable video effect!"),Promise.resolve())},e._showEffectInLocalPlayer=function(){if(e.player){var t=e.player.div.children[0];if("none"!==t.style.display&&(e.player.div.appendChild(je),"video"===t.tagName.toLowerCase())){var n=t.getAttribute("style");je.setAttribute("style",n),"none"!==t.style.display&&(t.style.display="none")}}},e._removeEffectFromLocalPlayer=function(){if(e.player&&e.player.div&&Le&&je){e.player.div.removeChild(je);var t=e.player.div.children[0];"video"===t.tagName.toLowerCase()&&(je.style.display="none",t.style.display="block")}},e._replaceWithCanvasTrack=function(){var t=null;e.pc&&e.pc.peerConnection&&e.pc.peerConnection&&(t=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find(function(e){return e&&e.track&&"video"==e.track.kind})),t&&t.replaceTrack&&e.videoEffect.canvasVideoTrack&&t.replaceTrack(e.videoEffect.canvasVideoTrack)},e.setBeautyEffectOptions=(t=ue()(ce.a.mark(function t(n,i){var a;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(Object(re.checkValidBoolean)(n,"enabled"),a=we.getInstance(),Le==n){t.next=13;break}if(a.setEnableBeauty(n),!n){t.next=9;break}return t.next=7,e._enableEffect();case 7:t.next=12;break;case 9:return e._removeEffectFromLocalPlayer(),t.next=12,e._releaseEffect();case 12:Le=n;case 13:if(n){t.next=15;break}return t.abrupt("return");case 15:if(!i){t.next=19;break}Object(re.checkValidObject)(i,"options"),t.next=20;break;case 19:return t.abrupt("return");case 20:if(void 0!==i.smoothnessLevel&&(Object(re.checkValidFloatNumber)(i.smoothnessLevel,"smoothnessLevel",0,1),(Me=10*i.smoothnessLevel)<.1&&(Me=.1),a.setDenoiseLevel(Me)),void 0!==i.lighteningLevel&&(Object(re.checkValidFloatNumber)(i.lighteningLevel,"lighteningLevel",0,1),(Pe=i.lighteningLevel/2)<.01&&(Pe=.01),a.setLightLevel(Pe)),void 0!==i.rednessLevel&&(Object(re.checkValidFloatNumber)(i.rednessLevel,"rednessLevel",0,1),(xe=i.rednessLevel)<.01&&(xe=.01),a.setRednessLevel(xe)),void 0===i.lighteningContrastLevel){t.next=28;break}if(0===i.lighteningContrastLevel||1===i.lighteningContrastLevel||2===i.lighteningContrastLevel){t.next=26;break}throw new Error("Invalid lighteningContrastLevel: The value should be 0, 1 or 2.");case 26:Ve=parseFloat(i.lighteningContrastLevel),a.setContrastLevel(Ve);case 28:case"end":return t.stop()}},t,this)})),function(e,n){return t.apply(this,arguments)});var t},restoreVideoEffect:function(e){return Le?e._enableEffect():Promise.resolve()},disableVideoEffect:function(e){return e._releaseEffect?e._releaseEffect():Promise.resolve()},applyEffectInPlayer:function(e){Le&&je&&e._showEffectInLocalPlayer()},removeEffectFromLocalPlayer:function(e){e._removeEffectFromLocalPlayer()},replaceWithCanvasTrack:function(e){Le&&e._replaceWithCanvasTrack()},checkVideoEffectEnabled:function(e){if(Le&&e.videoEffect&&e.videoEffect.videoContextInited)return o.default.error("Operation not permitted: ".concat("VIDEO_EFFECT_ENABLED")),"VIDEO_EFFECT_ENABLED";return!1}},Be=a(8),He=a.n(Be),We=function(e){Object(re.checkValidString)(e,"profileName"),-1===(e=e.toLowerCase()).indexOf("_")&&(e+="_1"),Object(re.checkValidEnum)(e,"profileName",Object.keys(r.SUPPORT_RESOLUTION_LIST));var t=r.SUPPORT_RESOLUTION_LIST[e];t||(e=Object(r.getParameter)("DEFAULT_PROFILE"),t=r.SUPPORT_RESOLUTION_LIST[e]);var n={profileName:e,video:{width:t[0],height:t[1]},attributes:{resolution:"".concat(t[0],"x").concat(t[1]),minFrameRate:t[2],maxFrameRate:t[3],minVideoBW:t[4],maxVideoBW:t[5]}};return t[2]&&t[3]&&(n.video.frameRate={ideal:t[2],max:t[3]}),t[6]&&t[7]&&(n.screen={width:t[0],height:t[1],frameRate:{min:t[6],max:t[7]}}),n},Ge=function(e){return Object.keys(r.SUPPORT_RESOLUTION_LIST).filter(function(t){var n=r.SUPPORT_RESOLUTION_LIST[t],i=["width","height","frameRate"];for(var a in i){var o=i[a];if(e[o]&&n[a]){if("number"==typeof e[o].max&&e[o].max<n[a])return!1;if("number"==typeof e[o].min&&e[o].min>n[a])return!1}}return!0}).reverse()},qe=function(e){var t=r.AUDIO_PROFILE_SETTINGS[e]||r.AUDIO_PROFILE_SETTINGS.default;return{highQuality:t[0],stereo:t[1],speech:t[2],lowQuality:t[3]}};var Ye=function(e){var t=c();if(t.params=S()({},e),t.stream=e.stream,t.url=e.url,t.onClose=void 0,t.local=!1,t.videoSource=e.videoSource,t.audioSource=e.audioSource,e.video=!(!e.videoSource&&!e.video),t.video=e.video,e.audio=!(!e.audioSource&&!e.audio),t.audio=e.audio,t.screen=!!e.screen,t.screenAudio=!!e.screenAudio,t.screenAttributes={width:1920,height:1080,maxFr:5,minFr:1},t.videoSize=e.videoSize,t.player=void 0,t.audioLevelHelper=null,e.attributes=e.attributes||{},t.attributes=e.attributes,t.microphoneId=e.microphoneId,t.cameraId=e.cameraId,t.facingMode=e.facingMode,t.inSwitchDevice=!1,t.userMuteVideo=!1,t.userMuteAudio=!1,t.peerMuteVideo=!1,t.peerMuteAudio=!1,t.lowStream=null,t.videoWidth=0,t.videoHeight=0,t.streamId=e.streamID,t.userId=null,t.mirror=!1!==e.mirror,t.DTX=e.audioProcessing&&e.audioProcessing.DTX,t.audioProcessing=e.audioProcessing,t.highQuality=!1,t.stereo=!1,t.speech=!1,t.screen||delete t.screen,!(void 0===t.videoSize||t.videoSize instanceof Array&&4===t.videoSize.length))throw Error("Invalid Video Size");function n(){var e={};t.getVideoTrack()===this?(o.default.debug("Video Track Ended"),e.type="videoTrackEnded",e.track=this):t.getAudioTrack()===this?(o.default.debug("Audio Track Ended"),e.type="audioTrackEnded",e.track=this):o.default.debug("Detached Track ended",this.kind,this.label,this),e.type&&t.dispatchEvent(e)}return t.videoSize=[640,480,640,480],void 0!==e.local&&!0!==e.local||(t.local=!0),t.initialized=!t.local,t._streamInitID=null,function(e){e.audioMixing={audioContextInited:!1,defaultVolume:100,inEarMonitoring:"FILE",sounds:{},states:{IDLE:"IDLE",STARTING:"STARTING",BUSY:"BUSY",PAUSED:"PAUSED"},inEarMonitoringModes:{NONE:"NONE",FILE:"FILE",MICROPHONE:"MOCROPHONE",ALL:"ALL"},ctx:null,mediaStreamSource:null,mediaStreamDest:null,buffer:{}},e._initSoundIfNotExists=function(t,n){e.audioMixing.sounds[t]||(e.audioMixing.sounds[t]={soundId:t,state:"IDLE",muted:e.userMuteAudio,filePath:n,volume:e.audioMixing.defaultVolume,startAt:null,startOffset:null,pauseAt:null,pauseOffset:null,resumeAt:null,resumeOffset:null,stopAt:null,options:null,source:null})},e._initSoundIfNotExists(-1),e.loadAudioBuffer=function(t,n,i){var a=s.b.reportApiInvoke(e.sid,{callback:i,name:"Stream.loadAudioBuffer",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"url",1,1024,!1),Object(re.checkValidString)(t,"id",1,1024,!1);var r=function(t){o.default.error("[".concat(e.streamId,"] loadAudioBuffer Failed: ")+t),a(V.LOAD_AUDIO_FAILED)},c=new XMLHttpRequest;c.open("GET",n,!0),c.responseType="arraybuffer",c.onload=function(){if(c.status>400)r("".concat(c.status," ").concat(c.statusText));else{var n=c.response;e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.ctx.decodeAudioData(n,function(n){e.audioMixing.buffer[t]=n,a(null)},function(t){o.default.error("[".concat(e.streamId,"] decodeAudioData Failed: "),t),a(t)})}},c.onerror=function(){return r("load error")},c.ontimeout=function(){return r("timeout")},c.send()},e.createAudioBufferSource=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.createAudioBufferSource",options:arguments,tag:"tracer"});if(e.audioMixing.buffer[t.id]){var i=e.audioMixing.buffer[t.id],a=e.audioMixing.ctx.createBufferSource();a.buffer=i;var r=e.audioMixing.ctx.createGain();if(a.connect(r),r.connect(e.audioMixing.mediaStreamDest),a.gainNode=r,t.loop)a.loop=!0,a.start(0,t.playTime/1e3);else if(t.cycle>1)if(Object(m.isChrome)()){a.loop=!0;var c=t.cycle*i.duration*1e3-(t.playTime||0);a.start(0,t.playTime/1e3,c/1e3)}else o.default.warning("[".concat(e.streamId,"] Cycle Param is ignored by current browser")),a.start(0,t.playTime/1e3);else a.start(0,t.playTime/1e3);var d=e.audioMixing.sounds[t.soundId];return d.source=a,e._flushAudioMixingMuteStatus(),a.addEventListener("ended",function(){a===d.source&&e.dispatchEvent({type:"audioSourceEnded",soundId:t.soundId,source:a,sound:d})}),n(),a}return o.default.error("[".concat(e.streamId,"] "),"AUDIOBUFFER_NOT_FOUND",t.id),n(!1),!1},e.on("audioSourceEnded",function(t){var n=t.source,i=t.sound;i&&i.state===e.audioMixing.states.BUSY&&!i.pauseAt&&(i.state=e.audioMixing.states.IDLE,i.startAt=null,i.startOffset=null,i.resumeAt=null,i.resumeOffset=null,n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest))}),e.clearAudioBufferSource=function(){e.audioBufferSource.forEach(function(e){e.stop()})},e._isSoundExists=function(t){return!!e.audioMixing.sounds[t.soundId]||(o.default.error("SoundId not exists. #".concat(t.soundId)),!1)},e._initAudioContext=function(){if(e.audioMixing.audioContextInited)throw new Error("Failed to init audio context. Already inited");if(!e.stream)throw new Error("Failed to init audio context. Local Stream not initialized");e.audioMixing.ctx=Object(oe.a)(),e.audioMixing.mediaStreamSource=e.audioMixing.ctx.createMediaStreamSource(e.stream),e.audioMixing.mediaStreamDest=e.audioMixing.ctx.createMediaStreamDestination(),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest);var t=e.stream.getVideoTracks()[0];if(t&&e.audioMixing.mediaStreamDest.stream.addTrack(t),e._isAudioMuted()?(e._unmuteAudio(),e.stream=e.audioMixing.mediaStreamDest.stream,e._muteAudio()):e.stream=e.audioMixing.mediaStreamDest.stream,e.audioLevelHelper=null,e.pc&&e.pc.peerConnection&&e.pc.peerConnection){var n=(e.pc.peerConnection&&e.pc.peerConnection.getSenders()).find(function(e){return e&&e.track&&"audio"==e.track.kind}),i=e.audioMixing.mediaStreamDest.stream.getAudioTracks()[0];n&&n.replaceTrack&&i&&n.replaceTrack(i)}e.audioMixing.audioContextInited=!0},e._cleanupAudioMixing=function(){if(e.audioMixing.audioContextInited){for(var t in e.audioMixing.sounds){var n=e.audioMixing.sounds[t];n.state!==e.audioMixing.states.BUSY&&n.state!==e.audioMixing.states.PAUSED||e._stopOneEffect({soundId:t})}e.audioLevelHelper=null,e.audioMixing.audioContextInited=!1}},e._reloadInEarMonitoringMode=function(t){if(t){if(!e.audioMixing.inEarMonitoringModes[t])return o.default.error("[".concat(e.streamId,"] Invalid InEarMonitoringMode ").concat(t));e.audioMixing.inEarMonitoring=t}switch(e.audioMixing.audioContextInited||e._initAudioContext(),e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.FILE:e.audioMixing.mediaStreamSource.connectedToDestination&&(e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!1);case e.audioMixing.inEarMonitoringModes.ALL:for(var n in e.audioMixing.sounds){var i=e.audioMixing.sounds[n];i&&i.source&&!i.source.connectedToDestination&&(i.source.gainNode.connect(e.audioMixing.ctx.destination),i.source.connectedToDestination=!0)}}switch(e.audioMixing.inEarMonitoring){case e.audioMixing.inEarMonitoringModes.MICROPHONE:e.audioMixing.source.forEach(function(t){t.connectedToDestination&&(t.gainNode.disconnect(e.audioMixing.ctx.destination),t.connectedToDestination=!1)});case e.audioMixing.inEarMonitoringModes.ALL:e.audioMixing.mediaStreamSource.connectedToDestination||(e.audioMixing.mediaStreamSource.connect(e.audioMixing.ctx.destination),e.audioMixing.mediaStreamSource.connectedToDestination=!0)}},e._startAudioMixingBufferSource=function(t){e.audioMixing.audioContextInited||e._initAudioContext();var n={soundId:t.soundId,id:t.filePath,loop:t.loop,cycle:t.cycle,playTime:t.playTime||0},i=t.replace,a=e.createAudioBufferSource(n);return a.sound=e.audioMixing.sounds[t.soundId],a?(a.addEventListener("ended",e._audioMixingFinishedListener,{once:!0}),e._reloadInEarMonitoringMode(),i&&e.audioMixing.mediaStreamSource.disconnect(e.audioMixing.mediaStreamDest),a):null},e._stopAudioMixingBufferSource=function(t){var n=e.audioMixing.sounds[t.soundId].source;return n?(n.removeEventListener("ended",e._audioMixingFinishedListener),e.audioMixing.mediaStreamSource.connect(e.audioMixing.mediaStreamDest),n.stop(),n.gainNode&&n.gainNode.disconnect&&n.gainNode.disconnect(),n.buffer=null,n):null},e._flushAudioMixingMuteStatus=function(t){for(var n in e.audioMixing.sounds){var i=e.audioMixing.sounds[n];i&&(void 0!==t&&(i.muted=!!t),i.source&&(i.muted?i.source.gainNode.gain.value=0:i.source.gainNode.gain.value=i.volume/100))}},e._handleAudioMixingInvalidStateError=function(t,n,i){var a=e.audioMixing.sounds[n.soundId],r=-1===n.soundId?"INVALID_AUDIO_MIXING_STATE":"INVALID_PLAY_EFFECT_STATE";o.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(r,", state is ").concat(a.state)),i&&i(r)},e._handleAudioMixingNoSourceError=function(t,n,i){e.audioMixing.sounds[n.soundId].state=e.audioMixing.states.IDLE;var a=-1===n.soundId?"NO_AUDIO_MIXING_SOURCE":"NO_EFFECT_SOURCE";o.default.error("[".concat(e.streamId,"] Cannot ").concat(t,": ").concat(a)),i&&i(a)},e._getOneEffectStates=function(t){var n=e.audioMixing.sounds[t.soundId];return function(){return n?{state:n.state,startAt:n.startAt,resumeAt:n.resumeAt,pauseOffset:n.pauseOffset,pauseAt:n.pauseAt,resumeOffset:n.resumeOffset,stopAt:n.stopAt,duration:e._getOneEffectDuration(t),position:e._getOneEffectCurrentPosition(t)}:{}}},e._audioMixingFinishedListener=function(){var t=this.sound;t.state===e.audioMixing.states.IDLE&&e.audioMixing.buffer[t.options.filePath]&&!t.options.cacheResource&&(o.default.debug("Recycled buffer ".concat(t.options.filePath)),delete e.audioMixing.buffer[t.options.filePath]),-1===t.soundId&&e.dispatchEvent({type:"audioMixingFinished"})},e._playOneEffect=function(t,n){Object(re.checkValidObject)(t,"options");var i=t.soundId,a=(t.filePath,t.cacheResource);if(t.cycle,t.loop,t.playTime,t.replace,Object(m.isSafari)()&&Object(m.getBrowserVersion)()<12){var r="BROWSER_NOT_SUPPORT";return o.default.error("[".concat(e.streamId,"] Cannot _playOneEffect: "),r),n(r)}e.audioMixing.audioContextInited||e._initAudioContext(),e._initSoundIfNotExists(i);var s=e.audioMixing.sounds[i];if(s.state===e.audioMixing.states.IDLE){if(void 0!==t.cycle&&!t.cycle>0)return r="Invalid Parmeter cycle: "+t.cycle,o.default.error("[".concat(e.streamId,"] ").concat(i),r),n(r);if(Object(re.isEmpty)(a)&&(t.cacheResource=!0),s.state=e.audioMixing.states.STARTING,s.options=t,e.audioMixing.buffer[t.filePath]){var c=e._startAudioMixingBufferSource(t);if(c)return s.source=c,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);s.state=e.audioMixing.states.IDLE;var d="CREATE_BUFFERSOURCE_FAILED";if(n)return n(d);o.default.error("[".concat(e.streamId,"] "),d)}else e.loadAudioBuffer(t.filePath,t.filePath,function(i){if(i)s.state=e.audioMixing.states.IDLE,n?n(i):o.default.error("[".concat(e.streamId,"] "),i);else{var a=e._startAudioMixingBufferSource(t);if(a)return s.source=a,s.startAt=Date.now(),s.resumeAt=null,s.pauseOffset=null,s.pauseAt=null,s.resumeOffset=null,s.stopAt=null,s.startOffset=t.playTime||0,s.state=e.audioMixing.states.BUSY,e._flushAudioMixingMuteStatus(),n(null);if(s.state=e.audioMixing.states.IDLE,i="CREATE_BUFFERSOURCE_FAILED",n)return n(i);o.default.error("[".concat(e.streamId,"] "),i)}})}else e._handleAudioMixingInvalidStateError("_playEffect",t,n)},e._stopOneEffect=function(t,n){var i=e.audioMixing.sounds[t.soundId];return e._isSoundExists(t)?i.state===e.audioMixing.states.BUSY||i.state===e.audioMixing.states.PAUSED?(e._stopAudioMixingBufferSource(t),i.stopAt=Date.now(),i.state=e.audioMixing.states.IDLE,e.audioMixing.buffer[i.options.filePath]&&!i.options.cacheResource&&(o.default.debug("Recycled buffer ".concat(i.options.filePath)),delete e.audioMixing.buffer[i.options.filePath]),void(n&&n(null))):void e._handleAudioMixingInvalidStateError("_stopOneEffect",t,n):n("SOUND_NOT_EXISTS")},e._pauseOneEffect=function(t,n){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.BUSY)return e._stopAudioMixingBufferSource(t)?(i.pauseAt=Date.now(),i.state=e.audioMixing.states.PAUSED,i.resumeAt?i.pauseOffset=i.pauseAt-i.resumeAt+i.resumeOffset:i.pauseOffset=i.pauseAt-i.startAt+i.startOffset,n&&n(null)):void e._handleAudioMixingNoSourceError("_pauseOneEffect",t,n);e._handleAudioMixingInvalidStateError("_pauseOneEffect",t,n)},e._resumeOneEffect=function(t,n){var i=e.audioMixing.sounds[t.soundId];if(i.state===e.audioMixing.states.PAUSED){var a={soundId:t.soundId,filePath:i.options.filePath,cycle:i.options.cycle,loop:i.options.loop,playTime:i.pauseOffset,replace:i.options.replace},r=e._startAudioMixingBufferSource(a);if(!r){var s="CREATE_BUFFERSOURCE_FAILED";return n(s),void o.default.error("[".concat(e.streamId,"] "),s)}i.source=r,i.resumeAt=Date.now(),i.resumeOffset=i.pauseOffset,i.state=e.audioMixing.states.BUSY,i.pauseAt=null,i.pauseOffset=null,n(null)}else e._handleAudioMixingInvalidStateError("_resumeOneEffect",t,n)},e._getOneEffectDuration=function(t){var n=e.audioMixing.sounds[t.soundId];return n.options&&n.options.filePath&&e.audioMixing.buffer[n.options.filePath]?1e3*e.audioMixing.buffer[n.options.filePath].duration:null},e._getOneEffectCurrentPosition=function(t,n){var i=e.audioMixing.sounds[t.soundId];return i.state===e.audioMixing.states.PAUSED?i.pauseOffset%e._getOneEffectDuration(t):i.state===e.audioMixing.states.BUSY?i.resumeAt?(Date.now()-i.resumeAt+i.resumeOffset)%e._getOneEffectDuration(t):(Date.now()-i.startAt+i.startOffset)%e._getOneEffectDuration(t):void(n&&e._handleAudioMixingInvalidStateError("_getOneEffectCurrentPosition",t))},e._setOneEffectPosition=function(t,n,i){var a=e.audioMixing.sounds[t.soundId];if(a.state===e.audioMixing.states.BUSY){if(!e._stopAudioMixingBufferSource(t))return void e._handleAudioMixingNoSourceError("_setOneEffectPosition",t,i);var r={soundId:t.soundId,filePath:a.options.filePath,loop:a.options.loop,cycle:a.options.cycle,playTime:n},s=e._startAudioMixingBufferSource(r);if(!s){var c="CREATE_BUFFERSOURCE_FAILED";return i&&i(c),void o.default.error("[".concat(e.streamId,"] "),c)}a.source=s,a.startAt=Date.now(),a.startOffset=n,a.resumeAt=null,a.resumeOffset=null,a.pauseOffset=null,a.pauseAt=null}else{if(a.state!==e.audioMixing.states.PAUSED)return void e._handleAudioMixingInvalidStateError("_setOneEffectPosition",t,i);a.pauseOffset=n}i&&i(null)},e.startAudioMixing=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"audioMixingPlayed"}),n&&n(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.startAudioMixing",options:t});Object(re.checkValidObject)(t,"options");var a=t.filePath,o=t.cacheResource,c=t.cycle,d=t.loop,u=t.playTime,l=t.replace;Object(re.checkValidString)(a,"filePath",1,Object(r.getParameter)("FILEPATH_LENMAX"),!1),Object(re.checkValidNumber)(u,"playTime",0,1e8),!Object(re.isEmpty)(c)&&Object(re.checkValidNumber)(c,"cycle"),!Object(re.isEmpty)(d)&&Object(re.checkValidBoolean)(d,"loop"),!Object(re.isEmpty)(l)&&Object(re.checkValidBoolean)(l,"replace"),!Object(re.isEmpty)(o)&&Object(re.checkValidBoolean)(o,"cacheResource");var p=S()({soundId:-1},t);e._playOneEffect(p,i)},e.stopAudioMixing=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.stopAudioMixing"});e._stopOneEffect({soundId:-1},n)},e.pauseAudioMixing=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.pauseAudioMixing"});return e._pauseOneEffect({soundId:-1},n)},e.resumeAudioMixing=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:function(n,i){if(n)return t&&t(n);e.dispatchEvent({type:"audioMixingPlayed"}),t&&t(null)},getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.resumeAudioMixing"});e._resumeOneEffect({soundId:-1},n)},e.adjustAudioMixingVolume=function(t){var n=s.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.adjustAudioMixingVolume",options:arguments,tag:"tracer"});Object(re.checkValidNumber)(t,"volume",0,100),e.audioMixing.sounds[-1].volume=t,e._flushAudioMixingMuteStatus(),n()},e.getAudioMixingDuration=function(){var t=s.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingDuration"}),n=e._getOneEffectDuration({soundId:-1});return t(null,n),n},e.getAudioMixingCurrentPosition=function(){var t=s.b.reportApiInvoke(e.sid,{getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.getAudioMixingCurrentPosition"}),n=e._getOneEffectCurrentPosition({soundId:-1},!0);return t(null,n),n},e.setAudioMixingPosition=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",getStates:e._getOneEffectStates({soundId:-1}),name:"Stream.setAudioMixingPosition"});Object(re.checkValidNumber)(t,"position",0,1e8),e._setOneEffectPosition({soundId:-1},t,i)},e.playEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:function(t){if(t)return n&&n(t);e.dispatchEvent({type:"effectPlayed"}),n&&n(null)},name:"Stream.playEffect",options:t});Object(re.checkValidObject)(t,"options");var a=t.soundId,o=t.filePath,c=t.cycle;Object(re.checkValidNumber)(a,"soundId",1,1e4),Object(re.checkValidString)(o,"filePath",0,Object(r.getParameter)("FILEPATH_LENMAX"),!1),!Object(re.isEmpty)(c)&&Object(re.checkValidNumber)(c,"cycle"),e._playOneEffect(t,i)},e.stopEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,getStates:e._getOneEffectStates({soundId:t}),name:"Stream.stopEffect"});Object(re.checkValidNumber)(t,"soundId",1,1e4),e._stopOneEffect({soundId:t},i)},e.stopAllEffects=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.stopAllEffect"}),i=!1,a=0,r=0,o=function(e){i||(e?(n(e),i=!0):a+=1,a===r&&(n(null),i=!0))};for(var c in e.audioMixing.sounds){var d=e.audioMixing.sounds[c];-1!==d.soundId&&(d.state!==e.audioMixing.states.BUSY&&d.state!==e.audioMixing.states.PAUSED||(r++,e._stopOneEffect({soundId:c},o)))}r||n(null)},e.preloadEffect=function(t,n,i){var a=s.b.reportApiInvoke(e.sid,{callback:i,options:arguments,tag:"tracer",name:"Stream.preloadEffect"});Object(re.checkValidNumber)(t,"soundId",1,1e4),Object(re.checkValidString)(n,"filePath",1,Object(r.getParameter)("FILEPATH_LENMAX"),!1),e._initSoundIfNotExists(t,n),e.audioMixing.buffer[n]?a(null):e.loadAudioBuffer(n,n,a)},e.unloadEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.unloadEffect"});Object(re.checkValidNumber)(t,"soundId",1,1e4);var a=e.audioMixing.sounds[t];if(!a){var r="SOUND_NOT_EXISTS";return o.default.error(r,t),void i(r)}var c=a.options?a.options.filePath:a.filePath;if(c)delete e.audioMixing.buffer[c],delete e.audioMixing.sounds[t],i(null);else{var d="SOUND_BUFFER_NOT_FOUND";o.default.error(d,t),i(d)}},e.pauseEffect=function(t,n){var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.pauseEffect"});return e._pauseOneEffect({soundId:t},i)},e.pauseAllEffects=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.pauseAllEffects"}),i=!1,a=0,r=0,o=function(e){i||(e?(n(e),i=!0):a+=1,a===r&&(n(null),i=!0))};for(var c in e.audioMixing.sounds)"-1"!==c&&e.audioMixing.sounds[c].state===e.audioMixing.states.BUSY&&(r++,e._pauseOneEffect({soundId:c},o));r||n(null)},e.resumeEffect=function(t,n){Object(re.checkValidNumber)(t,"soundId",1,1e4);var i=s.b.reportApiInvoke(e.sid,{callback:n,options:arguments,tag:"tracer",name:"Stream.resumeEffect"});return e._resumeOneEffect({soundId:t},i)},e.resumeAllEffects=function(t){var n=s.b.reportApiInvoke(e.sid,{callback:t,name:"Stream.resumeAllEffects"}),i=!1,a=0,r=0,o=function(e){i||(e?(n(e),i=!0):a+=1,a===r&&(n(null),i=!0))};for(var c in e.audioMixing.sounds)"-1"!==c&&e.audioMixing.sounds[c].state===e.audioMixing.states.PAUSED&&(r++,e._resumeOneEffect({soundId:c},o));r||n(null)},e.getEffectsVolume=function(){var t=[];for(var n in e.audioMixing.sounds){var i=e.audioMixing.sounds[n];i&&"-1"!==n&&t.push({soundId:parseInt(n),volume:i.volume})}return t},e.setEffectsVolume=function(t,n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setEffectsVolume",options:arguments,tag:"tracer",callback:n});for(var a in Object(re.checkValidNumber)(t,"volume",0,100),e.audioMixing.defaultVolume=t,e.audioMixing.sounds){var r=e.audioMixing.sounds[a];"-1"!==a&&(r.volume=t)}e._flushAudioMixingMuteStatus(),i(null)},e.setVolumeOfEffect=function(t,n,i){var a=s.b.reportApiInvoke(e.sid,{name:"Stream.setVolumeOfEffect",options:arguments,tag:"tracer",callback:i});Object(re.checkValidNumber)(t,"soundId",0,1e4),Object(re.checkValidNumber)(n,"volume",0,100),e._initSoundIfNotExists(t),e.audioMixing.sounds[t].volume=n,e._flushAudioMixingMuteStatus(),a(null)}}(t),Fe.addVideoEffectCapability(t),function(e,t){e.videoConstraint={},t.cameraId&&(e.videoConstraint.deviceId={exact:t.cameraId}),t.facingMode&&(e.videoConstraint.facingMode=t.facingMode),e.videoSize&&(e.videoConstraint.width=e.videoSize[0],e.videoConstraint.height=e.videoSize[1]),Object(m.isLegacyChrome)()||(e.videoConstraint.frameRate={ideal:30,max:30}),e.audioConstraint={},t.microphoneId&&(e.audioConstraint.deviceId={exact:t.microphoneId}),Object(m.isLegacyChrome)()||e.audioProcessing&&(void 0!==e.audioProcessing.AGC&&(Object(m.isFireFox)()?e.audioConstraint.autoGainControl=e.audioProcessing.AGC:Object(m.isChrome)()&&(e.audioConstraint.googAutoGainControl=e.audioProcessing.AGC,e.audioConstraint.googAutoGainControl2=e.audioProcessing.AGC)),void 0!==e.audioProcessing.AEC&&(e.audioConstraint.echoCancellation=e.audioProcessing.AEC),void 0!==e.audioProcessing.ANS&&(Object(m.isFireFox)()?e.audioConstraint.noiseSuppression=e.audioProcessing.ANS:Object(m.isChrome)()&&(e.audioConstraint.googNoiseSuppression=e.audioProcessing.ANS))),e.screenConstraint={},t.sourceId&&(e.screenConstraint.sourceId=t.sourceId),t.extensionId&&Object(m.isChrome)()?(e.screenConstraint.extensionId=t.extensionId,e.screenConstraint.mandatory={chromeMediaSource:"desktop",maxWidth:e.screenAttributes.width,maxHeight:e.screenAttributes.height,maxFrameRate:e.screenAttributes.maxFr,minFrameRate:e.screenAttributes.minFr}):(e.screenConstraint.mediaSource="screen",e.screenConstraint.width=e.screenAttributes.width,e.screenConstraint.height=e.screenAttributes.height,e.screenConstraint.frameRate={ideal:e.screenAttributes.maxFr,max:e.screenAttributes.maxFr}),t.mediaSource&&(e.screenConstraint.mediaSource=t.mediaSource),e.setVideoResolution=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoResolution",options:arguments,tag:"tracer"});if(!(n instanceof Array)){var a=We(n+="");return a&&a.video?(e.videoConstraint=S()(e.videoConstraint,{width:{ideal:a.video.width},height:{ideal:a.video.height}}),t.attributes.resolution=a.attributes.resolution,(r=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&r.applyConstraints?(o.default.debug("setVideoResolution applyConstraints",e.videoConstraint),r.applyConstraints(e.videoConstraint).then(i).catch(i)):i(),!0):(i("NO_PROFILE_".concat(n)),!1)}var r,c=n[0],d=n[1];e.videoConstraint=S()(e.videoConstraint,{width:{ideal:c},height:{ideal:d}}),t.attributes.resolution="".concat(c,"x").concat(d),(r=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0])&&r.applyConstraints?(o.default.debug("setVideoResolution applyConstraints",e.videoConstraint),Fe.disableVideoEffect(e).then(function(){return r.applyConstraints(e.videoConstraint).then(i).catch(i)}).then(function(){return Fe.restoreVideoEffect(e)})):i()},e.setVideoFrameRate=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoFrameRate",options:arguments,tag:"tracer"});if(Object(m.isFireFox)())return i("FIREFOX_NOT_SUPPORTED"),!1;if("object"===He()(n)&&n instanceof Array&&n.length>1){e.videoConstraint=S()(e.videoConstraint,{frameRate:{ideal:n[0],max:n[1]}}),t.attributes.minFrameRate=n[0],t.attributes.maxFrameRate=n[1];var a=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return a&&a.applyConstraints?(o.default.debug("setVideoFrameRate applyConstraints",e.videoConstraint),a.applyConstraints(e.videoConstraint).then(i).catch(i)):i(),!0}return i("INVALID_PARAM_".concat(JSON.stringify(n))),!1},e.setVideoBitRate=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoBitRate",options:arguments,tag:"tracer"});return"object"===He()(n)&&n instanceof Array&&n.length>1?(t.attributes.minVideoBW=n[0],t.attributes.maxVideoBW=n[1],e.connectionSpec&&(e.connectionSpec.minVideoBW=n[0],e.connectionSpec.maxVideoBW=n[1]),e.pc&&e.pc.renegotiate&&e.pc.renegotiate(),i(),!0):(i("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenBitRate=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setScreenBitRate",options:arguments,tag:"tracer"});return"object"===He()(n)&&n instanceof Array&&n.length>1?(t.screenAttributes.minVideoBW=n[0],t.screenAttributes.maxVideoBW=n[1],i(),!0):(i("INVALID_PARAM_".concat(JSON.stringify(n))),!1)},e.setScreenProfile=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setScreenProfile",options:arguments,tag:"tracer"});Object(re.checkValidEnum)(t,"profile",["480p_1","480p_2","720p_1","720p_2","1080p_1","1080p_2"]);var i=We(t);return i&&i.screen?(e.screenConstraint.mandatory?(e.screenConstraint.mandatory.maxWidth=i.screen.width,e.screenConstraint.mandatory.maxHeight=i.screen.height,i.screen.frameRate&&i.screen.frameRate.min&&i.screen.frameRate.max&&(e.screenConstraint.mandatory.minFrameRate=i.screen.frameRate.min,e.screenConstraint.mandatory.maxFrameRate=i.screen.frameRate.max)):e.screenConstraint=S()(e.screenConstraint,i.screen),e.screenAttributes.width=i.screen.width,e.screenAttributes.height=i.screen.height,e.screenAttributes.minFr=i.screen.frameRate.min,e.screenAttributes.maxFr=i.screen.frameRate.max,n(),!0):(n("NO_SCREEN_PROFILE_".concat(JSON.stringify(t))),!1)},e.setVideoProfileCustom=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.setVideoResolution(t[0]),e.setVideoFrameRate([t[1],t[1]]),e.setVideoBitRate([t[2],t[2]]),n()},e.setVideoProfileCustomPlus=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfileCustom",options:arguments,tag:"tracer"});e.videoConstraint.width=n.width,e.videoConstraint.height=n.height,t.attributes.resolution="".concat(n.width,"x").concat(n.height),e.setVideoFrameRate([n.framerate,n.framerate]),e.setVideoBitRate([n.bitrate,n.bitrate]),i()},e.setVideoProfile=function(n){var i=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoProfile",options:arguments,tag:"tracer"}),a=We(n);if(!a){var r="Invalid Profile ".concat(n);throw new Error(r)}if(e.profile=n,a&&a.video){e.profile=a.profileName,e.videoConstraint=S()(e.videoConstraint,a.video),e.connectionSpec&&a.attributes.maxVideoBW&&(e.connectionSpec.minVideoBW=a.attributes.minVideoBW,e.connectionSpec.maxVideoBW=a.attributes.maxVideoBW),Object(m.isEdge)()&&(e.videoConstraint.frameRate.max=60),Object(m.isFireFox)()&&(e.videoConstraint.frameRate={ideal:30,max:30}),t.attributes=S()(t.attributes,a.attributes),e.pc&&e.pc.renegotiate&&e.pc.renegotiate();var c=e.stream&&e.stream.getVideoTracks&&e.stream.getVideoTracks()[0];return c&&c.applyConstraints?(o.default.debug("setVideoProfile applyConstraints",e.videoConstraint),Fe.disableVideoEffect(e).then(function(){return c.applyConstraints(e.videoConstraint)}).then(function(){return Fe.restoreVideoEffect(e)}).then(function(t){return new Promise(function(n,a){i(t),Object(ne.vsResHack)(e.stream,function(t,i){e.videoWidth=t,e.videoHeight=i,n()},function(t){o.default.warning("[".concat(e.streamId,"] vsResHack failed: "),t),a()})})}).catch(i)):i(),!0}return i("INVALID_VIDEO_PROFILE_".concat(n)),!1},e.setAudioProfile=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setAudioProfile",options:arguments,tag:"tracer"});Object(re.checkValidEnum)(t,"profile",["speech_low_quality","speech_standard","music_standard","standard_stereo","high_quality","high_quality_stereo"]),e.audioProfile=t;var i=qe(t);return e.highQuality=i.highQuality,e.stereo=i.stereo,e.speech=i.speech,e.lowQuality=i.lowQuality,e.stereo&&Object(m.isChrome)()&&(e.audioConstraint.googAutoGainControl=!1,e.audioConstraint.googAutoGainControl2=!1,e.audioConstraint.echoCancellation=!1,e.audioConstraint.googNoiseSuppression=!1),n(),!0},e.setVideoEncoderConfiguration=function(t){Object(re.checkValidObject)(t,"config");var n=s.b.reportApiInvoke(e.sid,{name:"Stream.setVideoEncoderConfiguration",options:t,tag:"tracer"});t.resolution&&(Object(re.checkValidNumber)(t.resolution.width,"config.resolution.width"),Object(re.checkValidNumber)(t.resolution.height,"config.resolution.height"),e.setVideoResolution([t.resolution.width,t.resolution.height])),t.frameRate&&(Object(re.checkValidNumber)(t.frameRate.min,"config.frameRate.min"),Object(re.checkValidNumber)(t.frameRate.max,"config.frameRate.max"),e.setVideoFrameRate([t.frameRate.min,t.frameRate.max])),t.bitrate&&(Object(re.checkValidNumber)(t.bitrate.min,"config.bitrate.min",1,1e7),Object(re.checkValidNumber)(t.bitrate.max,"config.bitrate.max",1,1e7),e.setVideoBitRate([t.bitrate.min,t.bitrate.max])),n()},e.getSupportedProfile=function(t){var n=s.b.reportApiInvoke(e.sid,{name:"Stream.getSupportedProfile",options:arguments,tag:"tracer",callback:t});if(!e.local){var i="ONLY_LOCAL_STREAM_SUPPORTED";return o.default.error(i),n(i)}if(!e.stream)return i="STREAM_NOT_INIT",o.default.error(i),n(i);if(!e.stream.getVideoTracks)return i="TRACK_NOT_SUPPORT",o.default.error(i),n(i);var a=e.stream.getVideoTracks()[0];if(!a)return i="NO_VIDEO_TRACK_FOUND",o.default.error(i),n(i);if(!a.getCapabilities)return i="GETCAPABILITY_NOT_SUPPORT",o.default.error(i),n(i);var r=a.getCapabilities();return n(null,Ge(r))}}(t,e),t.getId=function(){return t.streamId},t.getUserId=function(){return t.userId},t.checkDualStreamEnabled=function(){if(Object(r.getParameter)("DUALSTREAM_OPERATION_CHECK")&&t.isDualStream){return o.default.error("Operation not permitted: ".concat("DUAL_STREAM_ENABLED")),"DUAL_STREAM_ENABLED"}return!1},t.setUserId=function(e){var n=s.b.reportApiInvoke(t.sid,{name:"Stream.setUserId",options:arguments,tag:"tracer"});t.userId&&o.default.warning("[".concat(t.streamId,"] Stream.userId ").concat(t.userId," => ").concat(e)),t.userId=e,n()},t.getAttributes=function(){return e.screen?t.screenAttributes:e.attributes},t.hasAudio=function(){return t.audio},t.hasVideo=function(){return t.video},t.hasScreen=function(){return t.screen},t.hasScreenAudio=function(){return t.screenAudio},t.isVideoOn=function(){return(t.hasVideo()||t.hasScreen())&&!t.userMuteVideo},t.isAudioOn=function(){return t.hasAudio()&&!t.userMuteAudio},t.init=function(i,a){var r=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Stream.init",options:arguments,tag:"tracer"}),c=((new Date).getTime(),arguments[2]);if(void 0===c&&(c=2),!0===t.initialized)return r({type:"warning",msg:"STREAM_ALREADY_INITIALIZED"});if(!0!==t.local)return r({type:"warning",msg:"STREAM_NOT_LOCAL"});var d=Math.random().toString().slice(3);t._streamInitID=d,t.videoSource?t.videoName="videoSource":t.video&&(t.videoName=ae.searchDeviceNameById(e.cameraId)||"default"),t.audioSource?t.audioName="audioSource":t.audio&&(t.audioName=ae.searchDeviceNameById(e.microphoneId)||"default"),t.screen&&(t.screenName=e.extensionId||"default");try{if(e.audio||e.video||e.screen||e.screenAudio||e.videoSource||e.audioSource){o.default.debug("[".concat(t.streamId,"] Requested access to local media"));var u={streamId:t.streamId};e.videoSource?u.videoSource=e.videoSource:e.screen?u.screen=t.screenConstraint:e.video&&(u.video=t.videoConstraint),e.audioSource?u.audioSource=e.audioSource:e.screenAudio?u.screenAudio=e.screenAudio:e.audio&&(u.audio=t.audioConstraint),te(u,function(i){if(u.screenAudio&&!i.getAudioTracks()[0]&&o.default.warning("[".concat(t.streamId,"] Audio sharing is not selected")),u.screen&&o.default.debug("[".concat(t.streamId,"] User has granted access to screen sharing")),(u.video||u.audio)&&o.default.debug("[".concat(t.streamId,"] User has granted access to local media")),null===t._streamInitID){i.getTracks().forEach(function(e){e.stop()});var a={type:"error",msg:"STREAM_IS_CLOSED",info:"stream is closed and cannot be initialized"};return o.default.error(t.streamId,a.info),void r(a)}if(t._streamInitID!==d){i.getTracks().forEach(function(e){e.stop()});a={type:"error",msg:"ABORT_OTHER_INIT",info:"stream initialization is aborted because of another stream.init"};return o.default.error(t.streamId,a.info),void r(a)}t.dispatchEvent({type:"accessAllowed"}),t.stream=i,t.initialized=!0,t.reloadDeviceName(),t.hasVideo()&&Object(ne.vsResHack)(i,function(e,n){t.videoWidth=e,t.videoHeight=n},function(e){o.default.warning("[".concat(t.streamId,"] vsResHack failed: "),e)}),e.screen&&t.stream&&t.stream.getVideoTracks()[0]&&(t.stream.getVideoTracks()[0].onended=function(){t.dispatchEvent({type:"stopScreenSharing"})}),t.stream&&t.stream.getTracks&&t.stream.getTracks().forEach(function(e){e&&!e.onended&&(e.onended=n)}),r()},function(e){var n={type:"error",info:null};switch(e&&(n.msg=e.name||e.code||e,e.message&&(n.info=e.message),e.code&&(n.info?n.info+=". "+e.code:n.info=" "+e.code),e.constraint&&(n.info?n.info+=". Constraint: "+e.constraint:n.info="constraint: "+e.constraint)),n.msg){case"Starting video failed":case"TrackStartError":if(t.videoConstraint&&(delete t.videoConstraint.width,delete t.videoConstraint.height),c>0)return void setTimeout(function(){t.init(function(e){return r(e)},r,c-1)},1);n.msg="MEDIA_OPTION_INVALID";break;case"DevicesNotFoundError":n.msg="DEVICES_NOT_FOUND";break;case"NotSupportedError":n.msg="NOT_SUPPORTED";break;case"PermissionDeniedError":case"InvalidStateError":n.msg="PERMISSION_DENIED",t.dispatchEvent({type:"accessDenied"});break;case"PERMISSION_DENIED":case"NotAllowedError":t.dispatchEvent({type:"accessDenied"});break;case"ConstraintNotSatisfiedError":n.msg="CONSTRAINT_NOT_SATISFIED";break;default:n.msg||(n.msg="UNDEFINED")}var i="Media access ".concat(n.msg).concat(n.info?": "+n.info:"");o.default.error("[".concat(t.streamId,"] "),i),r(n)})}else r({type:"warning",msg:"STREAM_HAS_NO_MEDIA_ATTRIBUTES"})}catch(e){o.default.error("[".concat(t.streamId,"] Stream init: "),e),r({type:"error",msg:e.message||e})}},t.reloadDeviceName=function(){if(t.stream){if(t.stream.getVideoTracks){var e=t.stream.getVideoTracks()[0];e&&e.label&&(t.videoName=e.label)}if(t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];n&&n.label&&(t.audioName=n.label)}}},t.close=function(){var e=s.b.reportApiInvoke(null,{name:"Stream.close",options:arguments,tag:"tracer"});if(o.default.debug("[".concat(t.streamId,"] Close stream with id"),t.streamId),void 0!==t.stream){var n=t.stream.getTracks();for(var i in n)n.hasOwnProperty(i)&&n[i].stop();!t.isLowStream&&t.local?Fe.disableVideoEffect(t).then(function(){t.stream=void 0}):t.stream=void 0}Object(m.isSafari)()&&t.pc&&t.pc.peerConnection&&t.pc.peerConnection.removeTrack&&t.pc.peerConnection.getSenders&&t.pc.peerConnection.getSenders().forEach(function(e){e&&(o.default.debug("[".concat(t.streamId,"] Remove Track"),e),t.pc.peerConnection.removeTrack(e))});t.initialized=!1,t._streamInitID=null,t._onAudioMute=void 0,t._onAudioUnmute=void 0,t._onVideoMute=void 0,t._onVideoUnmute=void 0,t.lowStream&&t.lowStream.close(),e()},t.enableAudio=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.enableAudio",options:arguments,tag:"tracer"});return o.default.deprecate("[".concat(t.streamId,"] Stream.enableAudio is deprecated and will be removed in the future. Use Stream.unmuteAudio instead")),t.userMuteAudio||o.default.warning("[".concat(t.streamId,"] User already enableAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.disableAudio=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.disableAudio",options:arguments,tag:"tracer"});o.default.deprecate("[".concat(t.streamId,"] Stream.disableAudio is deprecated and will be removed in the future. Use Stream.muteAudio instead")),t.userMuteAudio&&o.default.warning("[".concat(t.streamId,"] User already disableAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.enableVideo=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.enableVideo",options:arguments,tag:"tracer"});return o.default.deprecate("[".concat(t.streamId,"] Stream.enableVideo is deprecated and will be removed in the future. Use Stream.unmuteVideo instead")),t.userMuteVideo||o.default.warning("[".concat(t.streamId,"] User already enableVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.disableVideo=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.disableVideo",options:arguments,tag:"tracer"});o.default.deprecate("[".concat(t.streamId,"] Stream.disableVideo is deprecated and will be removed in the future. Use Stream.muteVideo instead")),t.userMuteVideo&&o.default.warning("[".concat(t.streamId,"] User already disableVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t.unmuteAudio=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.unmuteAudio",options:arguments,tag:"tracer"});return t.userMuteAudio||o.default.warning("[".concat(t.streamId,"] User already unmuteAudio")),t.userMuteAudio=!1,n(null,e=!t.peerMuteAudio&&t._unmuteAudio()),e},t.muteAudio=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.muteAudio",options:arguments,tag:"tracer"});t.userMuteAudio&&o.default.warning("[".concat(t.streamId,"] User already muteAudio")),t.userMuteAudio=!0;var n=t._muteAudio();return e(null,n),n},t.unmuteVideo=function(){var e,n=s.b.reportApiInvoke(t.sid,{name:"Stream.unmuteVideo",options:arguments,tag:"tracer"});return t.userMuteVideo||o.default.warning("[".concat(t.streamId,"] User already unmuteVideo")),t.userMuteVideo=!1,t.lowStream&&(t.lowStream.userMuteVideo=!1),n(null,e=!t.peerMuteVideo&&t._unmuteVideo()),e},t.muteVideo=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.muteVideo",options:arguments,tag:"tracer"});t.userMuteVideo&&o.default.warning("[".concat(t.streamId,"] User already muteVideo")),t.userMuteVideo=!0,t.lowStream&&(t.lowStream.userMuteVideo=!0);var n=t._muteVideo();return e(null,n),n},t._unmuteAudio=function(){return o.default.debug("[".concat(t.streamId,"] Unmuted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!1),!(!t.hasAudio()||!t.initialized||void 0===t.stream||!0===t.stream.getAudioTracks()[0].enabled)&&(t._onAudioUnmute&&t._onAudioUnmute(),t.pc&&(t.pc.isAudioMute=!1),t.stream.getAudioTracks()[0].enabled=!0,!0)},t._isAudioMuted=function(){if(t.stream&&t.hasAudio()){var e=t.stream.getAudioTracks();return e.length>0&&!e[0].enabled}return!1},t._isVideoMuted=function(){if(t.stream&&t.hasVideo()){var e=t.stream.getVideoTracks();return e.length>0&&!e[0].enabled}return!1},t._muteAudio=function(){return o.default.debug("[".concat(t.streamId,"] Muted audio stream with id "),t.streamId),t._flushAudioMixingMuteStatus(!0),!!(t.hasAudio()&&t.initialized&&void 0!==t.stream&&t.stream.getAudioTracks()[0].enabled)&&(t._onAudioMute&&t._onAudioMute(),t.pc&&(t.pc.isAudioMute=!0),t.stream.getAudioTracks()[0].enabled=!1,t.sid&&s.b.audioSendingStopped(t.sid,{succ:!0,reason:"muteAudio"}),!0)},t._unmuteVideo=function(){return o.default.debug("[".concat(t.streamId,"] Unmuted video stream with id"),t.streamId),!(!t.initialized||void 0===t.stream||!t.stream.getVideoTracks().length||!0===t.stream.getVideoTracks()[0].enabled)&&(t._onVideoUnmute&&t._onVideoUnmute(),t.pc&&(t.pc.isVideoMute=!1),t.stream.getVideoTracks()[0].enabled=!0,t.lowStream&&t.lowStream._unmuteVideo(),!0)},t._muteVideo=function(){return o.default.debug("[".concat(t.streamId,"] Muted video stream with id"),t.streamId),!!(t.initialized&&void 0!==t.stream&&t.stream.getVideoTracks().length&&t.stream.getVideoTracks()[0].enabled)&&(t._onVideoMute&&t._onVideoMute(),t.pc&&(t.pc.isVideoMute=!0),t.stream.getVideoTracks()[0].enabled=!1,t.lowStream&&t.lowStream._muteVideo(),t.sid&&s.b.videoSendingStopped(t.sid,{succ:!0,reason:"muteVideo"}),!0)},t.addTrack=function(i){var a=s.b.reportApiInvoke(t.sid,{name:"Stream.addTrack",options:arguments,tag:"tracer"}),r=t.checkDualStreamEnabled();if(r)return a(r);if(t.pc&&t.pc.addTrack(i,t.stream),"audio"==i.kind){t._cleanupAudioMixing();var o=new MediaStream;t.userMuteAudio&&(i.enabled=!1),o.addTrack(i);var c=t.stream.getVideoTracks()[0];c&&(o.addTrack(c),t.audio=!0,e.audio=!0),t.stream=o,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream)}else t.userMuteVideo&&(i.enabled=!1),t.stream.addTrack(i),t.video=!0,e.video=!0;i.onended||(i.onended=n),a()},t.removeTrack=function(n){var i=s.b.reportApiInvoke(t.sid,{name:"Stream.removeTrack",options:arguments,tag:"tracer"}),a=t.checkDualStreamEnabled(),r=Fe.checkVideoEffectEnabled(t);if(a||r)return i(a);t.pc&&t.pc.removeTrack(n,t.stream),t.stream.removeTrack(n),t._cleanupAudioMixing(),"audio"===n.kind?(t.audio=!1,e.audio=!1):(t.video=!1,e.video=!1),t.audioLevelHelper=null,"live"==n.readyState&&(n.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(n.kind," Stopped"))),i()},t.setAudioOutput=function(e,n,i){var a=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return i&&i(e);n&&n(t)},name:"Stream.setAudioOutput",options:arguments,tag:"tracer"});return Object(re.isValidString)(e,1,255)?(t.audioOutput=e,t.player?void t.player.setAudioOutput(e,function(){return a()},a):a()):(o.default.error("[".concat(t.streamId,"] setAudioOutput Invalid Parameter"),e),a(V.INVALID_PARAMETER))},t.play=function(e,n,i){"function"==typeof n&&(i=n,n=null),o.default.debug("[".concat(t.streamId,"] play()."),e,n);var a=s.b.reportApiInvoke(t.sid,{name:"Stream.play",options:arguments,tag:"tracer",callback:i});if(Object(re.checkValidString)(e,"elementID"),Object(re.isEmpty)(n)||(Object(re.isEmpty)(n.fit)||Object(re.checkValidEnum)(n.fit,"fit",["cover","contain"]),Object(re.isEmpty)(n.muted)||Object(re.checkValidBoolean)(n.muted,"muted")),t.player)o.default.warning("[".concat(t.streamId,"] Stream.play(): Stream is already playing. Fallback to resume stream")),t.resume().then(function(){a(null)}).catch(a);else{t.elementID=e,t.playOptions=n,!t.local||t.video||t.screen?(t.player=new j({id:t.getId(),stream:t,elementID:e,options:n}),t.local&&Fe.applyEffectInPlayer(t)):t.hasAudio()&&(t.player=new j({id:t.getId(),stream:t,elementID:e,options:n}));var r={audio:null,video:null};t.on("player-status-change",function e(n){if(r[n.mediaType]=n,r.audio&&r.video)if(t.removeEventListener("player-status-change",e),r.video.isErrorState||r.audio.isErrorState){var i=r.video.isErrorState?r.video:r.audio;a({isErrorState:!0,status:i.status,reason:i.reason,video:r.video,audio:r.audio})}else"aborted"===r.video.status&&"aborted"===r.audio.status?a({status:"aborted",reason:"stop",video:r.video,audio:r.audio}):a(null)}),t.audioOutput&&t.player.setAudioOutput(t.audioOutput),void 0!==t.audioLevel&&t.player.setAudioVolume(t.audioLevel),t._flushAudioMixingMuteStatus(!1)}},t.stop=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.stop",options:arguments,tag:"tracer"});o.default.debug("[".concat(t.streamId,"] Stop stream player with id "),t.streamId),t.player?(Fe.removeEffectFromLocalPlayer(t),t.player.destroy(),delete t.player):o.default.error("[".concat(t.streamId,"] Stream.stop(): Stream is not playing")),t._flushAudioMixingMuteStatus(!0),e()},t.isPlaying=function(){return!!t.player},t.isPaused=function(){return!!t.player&&(!!(t.player.video&&t.player.video.paused&&t.player.mediaElemExists(t.player.video))||!!(t.player.audio&&t.player.audio.paused&&t.player.mediaElemExists(t.player.audio)))},t.resume=function(){var e,n;return t.player?(t.player.video&&t.player.video.play&&(e=t.player.video.play()),e=e||Promise.resolve(),t.player.audio&&t.player.audio.play&&(n=t.player.audio.play()),n=n||Promise.resolve(),Promise.all([e,n])):Promise.reject("NO_PLAYER_FOUND")},t.getVideoTrack=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.getVideoTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getVideoTracks){var n=t.stream.getVideoTracks()[0];if(n)return o.default.info("[".concat(t.streamId,"] getVideoTrack"),n),e(),n}o.default.info("[".concat(t.streamId,"] getVideoTrack None")),e(null,"getVideoTrack None")},t.getAudioTrack=function(){var e=s.b.reportApiInvoke(t.sid,{name:"Stream.getAudioTrack",options:arguments,tag:"tracer"});if(t.stream&&t.stream.getAudioTracks){var n=t.stream.getAudioTracks()[0];if(n)return o.default.info("[".concat(t.streamId,"] getAudioTracks"),n),e(),n}o.default.info("[".concat(t.streamId,"] getAudioTracks None")),e(null,"getAudioTracks None")},t._hasVideoTracks=function(){return!!(t.stream&&t.stream.getVideoTracks&&t.stream.getVideoTracks()[0])},t._hasAudioTracks=function(){return!!(t.stream&&t.stream.getAudioTracks&&t.stream.getAudioTracks()[0])},t._replaceMediaStreamTrack=function(e,n,i){if(t.stream){if("video"==e.kind){if(r=t.stream.getVideoTracks()[0])return t.userMuteVideo&&(e.enabled=!1),t.stream.removeTrack(r),t.stream.addTrack(e),o.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(e.kind," SUCCESS")),"live"==r.readyState&&(r.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(r.kind," Stopped"))),n&&n();var a="MEDIASTREAM_TRACK_NOT_FOUND";return o.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),i(a)}if("audio"==e.kind){var r;if(r=t.stream.getAudioTracks()[0]){t.userMuteAudio&&(e.enabled=!1);var s=new MediaStream;s.addTrack(e);var c=t.stream&&t.stream.getVideoTracks()[0];return c&&s.addTrack(c),t.stream=s,t.audioLevelHelper=null,t.player&&t.player.video&&(t.player.video.srcObject=t.stream),o.default.debug("[".concat(t.streamId,"] _replaceMediaStreamTrack SUCCESS")),"live"==r.readyState&&(r.stop(),o.default.debug("[".concat(t.streamId,"] Track ").concat(r.kind," Stopped"))),n&&n()}a="MEDIASTREAM_TRACK_NOT_FOUND";return o.default.error("[".concat(t.streamId,"] MEDIASTREAM_TRACK_NOT_FOUND ").concat(e.kind)),i(a)}a="INVALID_TRACK_TYPE";return o.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(a," ").concat(e.kind)),i&&i(a)}a="NO_STREAM_FOUND";return o.default.error("[".concat(t.streamId,"] _replaceMediaStreamTrack ").concat(a)),i&&i(a)},t.replaceTrack=function(e,i,a){var r=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Stream.replaceTrack",options:arguments,tag:"tracer"});if(!e||!e.kind)return r("INVALID_TRACK");var c=t.checkDualStreamEnabled();return c?r(c):(t._cleanupAudioMixing(),e.onended||(e.onended=n),t.pc&&t.pc.hasSender&&t.pc.hasSender(e.kind)?void t.pc.replaceTrack(e,function(){return o.default.debug("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," SUCCESS")),t._replaceMediaStreamTrack(e,function(e){return r(null,e)},r)},function(n){return o.default.error("[".concat(t.streamId,"] PeerConnection.replaceTrack ").concat(e.kind," Failed ").concat(n)),r(n)}):t._replaceMediaStreamTrack(e,function(e){return r(null,e)},r))},t.setAudioVolume=function(e){var n=s.b.reportApiInvoke(t.sid,{name:"Stream.setAudioVolume",options:arguments,tag:"tracer"});Object(re.checkValidNumber)(e,"level",0,100),t.audioLevel=e,t.player&&t.player.setAudioVolume(e),n()},t.getStats=function(e,n,i){var a=[];a.push(t._getPCStats(i)),a.push(new Promise(function(e){var n={};t.pc&&t.pc.isSubscriber?null!==window.navigator.userAgent.match("Firefox")&&(ie(n,"videoReceiveResolutionHeight",t.videoHeight),ie(n,"videoReceiveResolutionWidth",t.videoWidth)):t.pc&&!t.pc.isSubscriber&&((Object(m.isSafari)()||Object(m.isFireFox)())&&(ie(n,"videoSendResolutionHeight",t.videoHeight),ie(n,"videoSendResolutionWidth",t.videoWidth)),(Object(m.isSafari)()||Object(m.isFireFox)())&&t.uplinkStats&&ie(n,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),e(n)})),a.push(new Promise(function(e){var n={};return t.traffic_stats&&t.pc&&t.pc.isSubscriber?(ie(n,"accessDelay",t.traffic_stats.access_delay),ie(n,"endToEndDelay",t.traffic_stats.e2e_delay),ie(n,"videoReceiveDelay",t.traffic_stats.video_delay),ie(n,"audioReceiveDelay",t.traffic_stats.audio_delay)):t.traffic_stats&&t.pc&&!t.pc.isSubscriber&&ie(n,"accessDelay",t.traffic_stats.access_delay),e(n)})),Promise.all(a).then(function(n){for(var i={},a=n.length-1;a>=0;a--){var r=n[a];S()(i,r)}e&&setTimeout(e.bind(t,i),0)}).catch(function(e){n&&setTimeout(n.bind(t,e),0)})},t._getPCStats=function(e){return new Promise(function(n,i){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats){return i("PEER_CONNECTION_NOT_ESTABLISHED")}t.pc.getStats(function(e){if(!t.pc||"established"!==t.pc.state||!t.pc.getStats){return i("PEER_CONNECTION_STATE_CHANGE")}var a=t.pc.isSubscriber?function(e){var t={};return e.forEach(function(e){e.id&&(-1===e.id.indexOf("recv")&&-1===e.id.indexOf("inbound_rtp")&&-1===e.id.indexOf("inbound-rtp")&&-1===e.id.indexOf("InboundRTP")||("audio"===e.mediaType?(ie(t,"audioReceiveBytes",e.bytesReceived),ie(t,"audioReceivePackets",e.packetsReceived),ie(t,"audioReceivePacketsLost",e.packetsLost)):(ie(t,"videoReceiveBytes",e.bytesReceived),ie(t,"videoReceivePacketsLost",e.packetsLost),ie(t,"videoReceivePackets",e.packetsReceived),ie(t,"videoReceiveFrameRate",e.googFrameRateReceived),ie(t,"videoReceiveDecodeFrameRate",e.googFrameRateDecoded),ie(t,"videoReceiveResolutionWidth",e.googFrameWidthReceived),ie(t,"videoReceiveResolutionHeight",e.googFrameHeightReceived))))}),t}(e):function(e){var t={};return e.forEach(function(e){e.id&&(-1===e.id.indexOf("send")&&-1===e.id.indexOf("outbound_rtp")&&-1===e.id.indexOf("OutboundRTP")||("audio"===e.mediaType?(ie(t,"audioSendBytes",e.bytesSent),ie(t,"audioSendPackets",e.packetsSent),ie(t,"audioSendPacketsLost",e.packetsLost)):(ie(t,"videoSendBytes",e.bytesSent),ie(t,"videoSendPackets",e.packetsSent),ie(t,"videoSendPacketsLost",e.packetsLost),ie(t,"videoSendFrameRate",e.googFrameRateSent),ie(t,"videoSendResolutionWidth",e.googFrameWidthSent),ie(t,"videoSendResolutionHeight",e.googFrameHeightSent))))}),t}(e);return n(a)},e)}).then(function(e){return t.pc.isSubscriber?(Object(m.isFireFox)()||Object(m.isSafari)())&&(e.videoReceiveResolutionHeight&&"0"!==e.videoReceiveResolutionHeight||e.videoReceiveResolutionWidth&&"0"!==e.videoReceiveResolutionWidth||(ie(e,"videoReceiveResolutionHeight",t.videoHeight),ie(e,"videoReceiveResolutionWidth",t.videoWidth))):((Object(m.isSafari)()||Object(m.isFireFox)())&&(e.videoSendResolutionHeight&&"0"!==e.videoSendResolutionHeight||e.videoSendResolutionWidth&&"0"!==e.videoSendResolutionWidth||(ie(e,"videoSendResolutionHeight",t.videoHeight),ie(e,"videoSendResolutionWidth",t.videoWidth))),(Object(m.isSafari)()||Object(m.isFireFox)())&&t.uplinkStats&&ie(e,"videoSendPacketsLost",t.uplinkStats.uplink_cumulative_lost)),Promise.resolve(e)})},t.getAudioLevel=function(){if(t.audioLevelHelper)return t.audioLevelHelper.getAudioLevel();if(t.stream){if(0!==t.stream.getAudioTracks().length)return t.audioLevelHelper=new ne.audioLevelHelper(t.stream),t.audioLevelHelper.getAudioLevel();o.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no audio trace in stream"))}else o.default.warning("[".concat(t.streamId,"] can't get audioLevel beacuse no stream exist"))},t.setVideoProfile("480P"),t._switchVideoDevice=function(e,n,i){if(e===t.cameraId)return n&&n();var a={video:S()({},t.videoConstraint,{deviceId:{exact:e}}),audio:!1};o.default.debug("[".concat(t.streamId,"] ").concat(a)),te(a,function(a){try{var r=function(){t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID,t.playOptions)),t.cameraId=e,t.videoConstraint.deviceId={exact:e},t.userMuteVideo&&(t.stream.getVideoTracks()[0].enabled=!1),Fe.restoreVideoEffect(t),n&&n()};Fe.disableVideoEffect(t).then(function(){Object(m.isSafari)()?t.replaceTrack(a.getVideoTracks()[0],r,i):(t.removeTrack(t.stream.getVideoTracks()[0]),t.addTrack(a.getVideoTracks()[0]),r())})}catch(e){return i&&i(e)}},function(e){return i&&i(e)})},t._switchAudioDevice=function(e,n,i){if(e===t.microphoneId)return n&&n();var a={video:!1,audio:S()({},t.audioConstraint,{deviceId:{exact:e}})};o.default.debug("[".concat(t.streamId,"] "),a),te(a,function(a){var r=function(){t._cleanupAudioMixing(),t.userMuteAudio&&(t.stream.getAudioTracks()[0].enabled=!1),t.isPlaying()&&(t.stop(),t.elementID&&t.play(t.elementID)),t.microphoneId=e,t.audioConstraint.deviceId={exact:e},n&&n()};try{Object(m.isSafari)()?t.replaceTrack(a.getAudioTracks()[0],r,i):(t.removeTrack(t.stream.getAudioTracks()[0]),t.addTrack(a.getAudioTracks()[0]),r())}catch(e){return i&&i(e)}},function(e){return i&&i(e)})},t.switchDevice=function(e,n,i,a){var r=s.b.reportApiInvoke(t.sid,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Stream.switchDevice",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"deviceId");var c=function(){return t.inSwitchDevice=!1,r()},d=function(e){t.inSwitchDevice=!1,o.default.error("[".concat(t.streamId,"] "),e),r(e)};if(t.inSwitchDevice)return r("Device switch is in process.");if(t.inSwitchDevice=!0,!t.local)return d("Only the local stream can switch the device.");if(t.screen&&"video"===e)return d("The device cannot be switched during screen-sharing.");if(t.videoSource||t.audioSource)return d("The device cannot be switched when using videoSource or audioSource.");if(t.lowStream)return d("The device cannot be switched when using lowstream.");var u=!1;for(var l in t.audioMixing.sounds){if(t.audioMixing.sounds[l].state!==t.audioMixing.states.IDLE){u=!0;break}}if(t.audioMixing.audioContextInited&&u)return d("The device cannot be switched when using audio Mixing.");ae.getDeviceById(n,function(){if("video"===e)t._switchVideoDevice(n,c,d);else{if("audio"!==e)return d("Invalid type.");t._switchAudioDevice(n,c,d)}},function(){return d("The device does not exist.")})},t},Je=a(19),Ke=a(7),ze=a.n(Ke),Xe=["live","rtc","web","interop","h264_interop","web-only"],Qe=["vp8","h264"],$e=["aes-128-xts","aes-256-xts","aes-128-ecb"],Ze=a(20),et=a.n(Ze),tt=function(e){e&&e.apply(this,[].slice.call(arguments,1))},nt=a(9),it=function(e){var t=c(e);t.needReconnect=!0,t.isTimeout=!1,t.isInit=!0,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),t.lastMsgTime=null,t.clientId=e.clientId,t.hostIndex=0,t.requestID=0,e.host instanceof Array?t.host=e.host:t.host=[e.host],t.getSendBytes=function(){return t.sendbytes},t.getRecvBytes=function(){return t.recvbytes},t.getDuration=function(){return Math.ceil((Date.now()-t.startTime)/1e3)},t.getURL=function(){return t.connection.url},t.reconnect=function(){t.isInit=!0,t.creatConnection()},t.connectNext=function(){t.isInit=!0,++t.hostIndex,o.default.debug("["+t.clientId+"] Gateway length:"+t.host.length+" current index:"+t.hostIndex),t.hostIndex>=t.host.length?t.dispatchEvent(p({type:"recover"})):t.creatConnection()},t.replaceHost=function(e){t.host=e||t.host,t.hostIndex=0,t.creatConnection()},t.creatConnection=function(){if(t.needReconnect=!0,o.default.debug("["+t.clientId+"] start connect:"+t.host[t.hostIndex]),t.lts=(new Date).getTime(),t.connection=new WebSocket("wss://"+t.host[t.hostIndex]),t.connection.binaryType="arraybuffer",t.turnConfig={},t.connection.url){var n=t.connection.url.match(/wss\:\/\/([^:]+):(\d+)/);if(n)t.turnConfig.url=n[1],Object(r.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(n[2])+30),Object(r.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(n[2])+30);else{var i=t.host[t.hostIndex].split(":");t.turnConfig.url=i[0],Object(r.getParameter)("TURN_ENABLE_TCP")&&(t.turnConfig.tcpport=parseInt(i[1])+30),Object(r.getParameter)("TURN_ENABLE_UDP")&&(t.turnConfig.udpport=parseInt(i[1])+30)}}t.connection.onopen=function(e){o.default.debug("["+t.clientId+"] websockect opened: "+t.host[t.hostIndex]),t.needReconnect=!0,t.isTimeout=!1,t.isInit=!1,t.sendbytes=0,t.recvbytes=0,t.startTime=Date.now(),Object(nt.resetHTTPByetsCount)(),clearTimeout(t.timeoutCheck),t.dispatchEvent(p({type:"onopen",event:e,socket:t}))},t.connection.onmessage=function(e){if(e.data instanceof ArrayBuffer)t.dispatchEvent({type:"onBinaryData",data:e.data});else{t.recvbytes+=Object(ne.lengthInUtf8Bytes)(e.data);var n=JSON.parse(e.data);t.lastMsgTime=Date.now(),n.hasOwnProperty("_id")?t.dispatchEvent(p({type:n._id,msg:n})):n.hasOwnProperty("_type")&&t.dispatchSocketEvent(p({type:n._type,msg:n._message}))}},t.connection.onclose=function(n){t.needReconnect?t.isTimeout||t.isInit?(o.default.debug("["+t.clientId+"] websockect connect timeout"),s.b.joinGateway(e.sid,{lts:t.lts,succ:!1,ec:"timeout",addr:t.connection.url}),t.connectNext()):t.dispatchEvent(p({type:"disconnect",event:n})):(o.default.debug("["+t.clientId+"] websockect closeed"),tt(e.onFailure,n),clearTimeout(t.timeoutCheck),t.dispatchEvent(p({type:"close",event:n})),t.connection.onopen=void 0,t.connection.onclose=void 0,t.connection.onerror=void 0,t.connection.onmessage=void 0,t.connection=void 0)},t.connection.onerror=function(e){},setTimeout(function(){t.connection&&t.connection.readyState!=WebSocket.OPEN&&(t.isTimeout=!0,t.connection.close())},5e3)},t.creatConnection(),t.sendMessage=function(e,n){if(t.connection&&t.connection.readyState==WebSocket.OPEN){var i=JSON.stringify(e);t.sendbytes+=Object(ne.lengthInUtf8Bytes)(i),t.connection.send(i)}else n({error:"Gateway not connected"})},t.disconnect=function(){t.needReconnect=!0,t.connection.close()},t.close=function(){t.needReconnect=!1,t.connection.onclose=void 0,t.connection.close()},t.sendSignalCommand=function(e,n){e._id="_request_"+t.requestID,t.requestID+=1,"publish_stats"!==e._type&&"subscribe_stats"!==e._type&&"publish_stats_low"!==e._type&&t.on(e._id,function(i){i.msg&&n&&n(i.msg._result,i.msg.message),delete t.dispatcher.eventListeners[e._id]}),t.sendMessage(e,function(e){e.reason="NOT_CONNECTED",n&&n(e.reason,e)})},t.requests=[];var n=function(e){var n=t.requests.findIndex(function(t){return t.id===e.type});if(n>=0)var i=t.requests.splice(n,1)[0];i&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.msg&&i.callback&&i.callback(e.msg._result,e.msg._message)):o.default.warning("Detached Response",e.type,e.msg)};return t.sendRequest=function(e,i){e=S()({_id:"_request_"+t.requestID},e),t.requestID+=1;var a={id:e._id,timeoutCounter:0,stalledAt:Date.now(),message:e,callback:i};t.requests.push(a),t.addEventListener(e._id,n),t.sendMessage(e,function(e){var n=this,i=t.requests.findIndex(function(e){return e.id===n.id});i>=0&&(n=t.requests.splice(i,1)[0]),n&&t.dispatcher.eventListeners[e.type]?(delete t.dispatcher.eventListeners[e.type],e.reason="NOT_CONNECTED",n.callback&&n.callback(e.reason,e)):o.default.warning("handleSendError",n)}.bind(a))},t.checkRequestTimeout=function(){for(var e=Math.ceil(Object(r.getParameter)("SIGNAL_REQUEST_TIMEOUT")/Object(r.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),n=t.requests.length-1;n>=0;n--){var i=t.requests[n];i.timeoutCounter>=e?(t.requests.splice(n,1),o.default.error("Request Timeout",i.timeoutCounter,i.message),i.callback&&i.callback("TIMEOUT")):i.timeoutCounter++}},clearInterval(t.requestTimer),t.requestTimer=setInterval(t.checkRequestTimeout,Object(r.getParameter)("SIGNAL_REQUEST_WATCH_INTERVAL")),t.sendReport=function(e){t.sendMessage(e,function(){})},t},at=function(e,t){var n={connect:function(){t.host=e,n.signal=it(t),n.on=n.signal.on,n.dispatchEvent=n.signal.dispatchEvent,n.signal.on("onopen",function(e){n.signal.onEvent=function(e){n.dispatchEvent(p({type:e.event,msg:e}))},n.dispatchEvent(p({type:"connect",msg:e}))}),n.signal.on("onError",function(e){var t=e.msg;onError(t.code,"error")})},getLastMsgTime:function(){return n.signal&&n.signal.lastMsgTime},getSendBytes:function(){return n.signal.getSendBytes()},getRecvBytes:function(){return n.signal.getRecvBytes()},getDuration:function(){return n.signal.getDuration()},disconnect:function(){n.signal.disconnect()},close:function(){n.signal.close()},getURL:function(){return n.signal.getURL()},reconnect:function(){n.signal.reconnect()},connectNext:function(){n.signal.connectNext()},replaceHost:function(e){n.signal.replaceHost(e)},emitSimpleMessage:function(e,t){n.signal.sendSignalCommand(e,t)},emitRequest:function(e,t){n.signal.sendRequest(e,t)},emitReport:function(e){n.signal.sendReport(e)}};return n.connect(),n},rt=function(e,t){var n=!1,i=0,a={command:"convergeAllocateEdge",sid:e.sid,appId:e.appId,token:e.token,uid:e.uid,cname:e.cname,ts:Math.floor(Date.now()/1e3),version:r.VERSION,seq:0,requestId:1};Object(r.getParameter)("PROXY_CS").map(function(c){var d=(new Date).getTime();ot("https://"+c+"/api/v1",a,function(a,u){if(a)return o.default.debug("["+e.clientId+"] Request proxy server failed: ",a),i++,s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!1,APAddr:c,workerManagerList:null,ec:JSON.stringify(a),response:JSON.stringify({err:a,res:u})}),void(i>=Object(r.getParameter)("PROXY_CS").length&&t&&t("Get proxy server failed: request all failed"));if(!n)if((u=JSON.parse(u)).json_body){var l=JSON.parse(u.json_body);if(o.default.debug("["+e.clientId+"] App return:",l.servers),200!==l.code){a="Get proxy server failed: response code ["+l.code+"], reason [ "+l.reason+"]";o.default.debug("["+e.clientId+"] "+a),s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!1,APAddr:c,workerManagerList:null,ec:a,response:JSON.stringify({err:a,res:u})})}else{n=!0;var p=ct(l.servers);s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!0,APAddr:c,workerManagerList:JSON.stringify(p),ec:null,response:JSON.stringify({res:u})}),t&&t(null,p)}}else o.default.debug("["+e.clientId+"] Get proxy server failed: no json_body"),s.b.requestProxyAppCenter(e.sid,{lts:d,succ:!1,APAddr:c,workerManagerList:null,ec:"Get proxy server failed: no json_body",response:JSON.stringify({res:u})})})})},ot=function(e,t,n){var i={service_name:"webrtc_proxy",json_body:JSON.stringify(t)};Object(nt.post)(e,i,function(e){n&&n(null,e)},function(e){n&&n(e)},{"X-Packet-Service-Type":0,"X-Packet-URI":61})},st=function(e,t,n){var i=!1,a=0,r={command:"request",gatewayType:"http",appId:e.appId,cname:e.cname,uid:e.uid+"",sdkVersion:"2.3.1",sid:e.sid,seq:1,ts:+new Date,requestId:3,clientRequest:{appId:e.appId,cname:e.cname,uid:e.uid+"",sid:e.sid}};t.map(function(c){var d=(new Date).getTime();!function(e,t,n){Object(nt.post)(e,t,function(e){n&&n(null,e)},function(e){n&&n(e)})}("https://"+c+":4000/v2/machine",r,function(r,u){if(r)return o.default.debug("["+e.clientId+"] Request worker manager failed: ",r),a++,s.b.requestProxyWorkerManager(e.sid,{lts:d,succ:!1,workerManagerAddr:c,ec:JSON.stringify(r),response:JSON.stringify({res:u})}),void(a>=t.length&&n&&n("requeet worker manager server failed: request failed"));if(!i){if(!(u=JSON.parse(u)).serverResponse)return n&&n("requeet worker manager server failed: serverResponse is undefined");i=!0,s.b.requestProxyWorkerManager(e.sid,{lts:d,succ:!0,workerManagerAddr:c,ec:JSON.stringify(r),response:JSON.stringify({res:u})}),n&&n(null,{address:c,serverResponse:u.serverResponse})}})})},ct=function(e){if(!e||[]instanceof Array==!1)return[];var t=[];return e.forEach(function(e){var n;e.address&&e.tcp?(e.address.match(/^[\.\:\d]+$/)?n="".concat(e.address.replace(/[^\d]/g,"-"),".edge.agora.io"):(o.default.info("["+joinInfo.clientId+"] "+"Cannot recognized as IP address ".concat(e.address,". Used As Host instead")),n="".concat(e.address,":").concat(e.tcp)),t.push(n)):o.default.error("["+joinInfo.clientId+"] Invalid address format ",e)}),t},dt=function(e,t){var n=S()({},e),i=Object(r.getParameter)("CDS_AP"),a=[],o=!1;(i=i.map(function(e){return n.proxyServer?"https://".concat(n.proxyServer,"/ap/?url=").concat(e+"/api/v1"):"https://".concat(e,"/api/v1?action=config")})).map(function(e){!function(e,t,n){var i={flag:64,cipher_method:0,timeout:1e3,features:t};Object(nt.post)(e,i,function(e){try{var t=JSON.parse(e);n&&n(null,t)}catch(e){n&&n(e)}n&&n(null,e)},function(e){n&&n(e)},{"X-Packet-Service-Type":0,"X-Packet-URI":54})}(e,n,function(e,n){o||(e?(a.push(e),a.length>=i.length&&t&&t("ALL_REQUEST_FAILED")):(o=!0,t&&t(null,n)))})})},ut={},lt={},pt=function(e,t,n,i){var a=(new Date).getTime(),r=t,c="";t.multiIP&&t.multiIP.gateway_ip&&(c={vocs_ip:[t.multiIP.uni_lbs_ip],vos_ip:[t.multiIP.gateway_ip]});var d={opid:133,flag:4096,ts:+new Date,key:t.token,cname:t.cname,sid:t.sid,detail:{6:t.stringUid},uid:t.uid||0};c&&(d.detail[5]=JSON.stringify(c)),Object(nt.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=wrtc_gateway"),d,function(c){try{var d=JSON.parse(c);d.res&&(d=d.res);var u=d.code}catch(e){var l="requestChooseServer failed with unexpected body "+c;return o.default.error("["+r.clientId+"]",l),i(l)}if(u){var p=I[d.code]||u;return s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:p}),i("Get server node failed ["+p+"]",e,p)}var f=[],m=[".agora.io",".agoraio.cn"],g=0;if(e.indexOf(m[1])>-1&&(g=1),d.addresses.forEach(function(e){var t;e.ip&&e.port?(e.ip.match(/^[\.\:\d]+$/)?t="".concat(e.ip.replace(/[^\d]/g,"-"),".edge").concat(m[g++%m.length],":").concat(e.port):(o.default.info("["+r.clientId+"] "+"Cannot recognized as IP address ".concat(e.ip,". Used As Host instead")),t="".concat(e.ip,":").concat(e.port)),f.push(t)):o.default.error("["+r.clientId+"] Invalid address format ",e)}),!f.length){o.default.error("["+r.clientId+"] Empty Address response",d);p="EMPTY_ADDRESS_RESPONSE";return s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:e,serverList:null,ec:p}),i("Get server node failed ["+p+"]",e,p)}var v={gateway_addr:f,uid:d.uid,cid:d.cid,vid:d.detail&&d.detail[8],res:d,uni_lbs_ip:d.detail};return n(v,e)},function(e,n){"timeout"===e.type?(s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:n,serverList:null,ec:"timeout"}),i("Connect choose server timeout",n)):s.b.joinChooseServer(t.sid,{lts:a,succ:!1,csAddr:n,serverList:null,ec:"server_wrong"})},{"X-Packet-Service-Type":0,"X-Packet-URI":69})},ft=function(e,t,n){var i=!1,a=null,c=1,d=1,u=null,l=e.clientId,p=function t(d,p){if(!i){var f=!1,g=!1,v=[],h=m.getBrowserInfo()||{};dt({device:h.name,system:h.os,vendor:e.appId,version:r.VERSION,cname:e.cname,sid:e.sid,session_id:Object(s.a)(),detail:"",proxyServer:d},function(t,n){g=!0;try{var i=Object.keys(n.test_tags)[0],a=JSON.parse(n.test_tags[i]);u=a[1]}catch(e){u=null}s.b.reportApiInvoke(e.sid,{name:"_config-distribute-request",options:{err:t,res:n}})(),lt[l]!==Rt.DISCONNECTED&&lt[l]!==Rt.DISCONNECTING?f&&p&&p(v,u):o.default.debug("[".concat(e.clientId,"] Request config success when connection state is ").concat(lt[l]))}),function(e,t,n){for(var i=(new Date).getTime(),a=!1,c=!0,d=function(n,r){if(a)s.b.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null},!1);else{if(clearTimeout(g),a=!0,o.default.debug("["+e.clientId+"] Get gateway address:",n.gateway_addr),e.proxyServer){for(var c=n.gateway_addr,d=0;d<c.length;d++){var u=c[d].split(":");n.gateway_addr[d]=e.proxyServer+"/ws/?h="+u[0]+"&p="+u[1]}o.default.debug("["+e.clientId+"] Get gateway address:",n.gateway_addr)}t(n),s.b.joinChooseServer(e.sid,{lts:i,succ:!0,csAddr:r,serverList:n.gateway_addr,cid:n.cid+"",uid:n.uid+"",ec:null},!0)}},u=function(t,i,a){c&&(o.default.error("["+e.clientId+"]",t,i,a),a&&-1===b.indexOf(a)&&(c=!1,n(a)))},l=Object(r.getParameter)("WEBCS_DOMAIN"),p=0;p<l.length;++p){var f;if("string"==typeof l[p]){var m=l[p];f=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(m+"/api/v1"):"https://".concat(m,"/api/v1"),o.default.debug("["+e.clientId+"] "+"Connect to choose_server: ".concat(f)),pt(f,e,d,u)}else o.default.error("["+e.clientId+"] Invalid Host",l[p])}var g=setTimeout(function(){if(!a)for(var t=Object(r.getParameter)("WEBCS_DOMAIN_BACKUP_LIST"),n=0;n<t.length;++n)if("string"==typeof t[n]){var i=t[n];f=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(i+"/api/v1"):"https://".concat(i,"/api/v1"),o.default.debug("["+e.clientId+"] "+"Connect to backup_choose_server: ".concat(f)),pt(f,e,d,u)}else o.default.error("["+e.clientId+"] Invalid Host",t[n])},1e3);setTimeout(function(){!a&&c&&n()},Object(r.getParameter)("WEBCS_BACKUP_CONNECT_TIMEOUT"))}(e,function(t){i=!0,f=!0,v=t,clearTimeout(a),lt[l]!==Rt.DISCONNECTED&&lt[l]!==Rt.DISCONNECTING?g&&p&&p(v,u):o.default.debug("[".concat(e.clientId,"] Request gateway list success when connection state is ").concat(lt[l]))},function(i){return i?(o.default.info("["+e.clientId+"] Join failed: "+i),void(n&&n(i))):lt[l]===Rt.DISCONNECTED||lt[l]===Rt.DISCONNECTING?(o.default.debug("[".concat(e.clientId,"] Request gateway list falied when connection state is ").concat(lt[l])),void(n&&n("OPERATION_ABORT"))):(o.default.debug("["+e.clientId+"] Request gateway list will be restart in "+c+"s"),a=setTimeout(function(){t(d,p)},1e3*c),ut[l]=a,void(c=c>=3600?3600:2*c))})}};e.useProxyServer?function n(){!function(e,t){rt(e,function(n,i){if(n)return t&&t(n);o.default.debug("["+e.clientId+"] getProxyServerList: ",i),st(e,i,t)})}(e,function(i,r){if(i)return o.default.debug("["+e.clientId+"]",i),o.default.debug("["+e.clientId+"] Request proxy will be restart in "+d+"s"),a=setTimeout(function(){n()},1e3*d),ut[l]=a,void(d=d>=3600?3600:2*d);clearTimeout(a);var c=r.address;e.proxyServer=c,e.turnServer={mode:"manual",url:r.address,tcpport:r.serverResponse.tcpport||"3433",udpport:r.serverResponse.udpport||"3478",username:r.serverResponse.username||"test",credential:r.serverResponse.password||"111111",forceturn:!0},e.turnServer.tcpport+="",e.turnServer.udpport+="",s.b.setProxyServer(c),o.default.setProxyServer(c),p(c,t)})}():p(null,t)},mt=function(e,t,n,i){var a=Date.now();i=i||t.stringUid;var r={sid:t.sid,opid:10,appid:t.appId,string_uid:i};return new Promise(function(c,d){Object(nt.post)(e+"".concat(-1===e.indexOf("?")?"?":"&","action=stringuid"),r,function(u){try{var l=JSON.parse(u),p=l.code}catch(c){var f="requestUserAccount failed with unexpected body "+u;return o.default.error("["+t.clientId+"]",f),d({retryable:!0,info:f,url:e}),n&&n.dispatchEvent({type:"error",reason:"USER_ACCOUNT_BODY_NOT_JSON"}),void s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:e,stringUid:i,uid:null,extend:u,errorCode:"USER_ACCOUNT_BODY_NOT_JSON"})}if(p){var m=T[l.code%1e4]||"REQ_ACCOUNT_ERR_".concat(p);return n&&n.dispatchEvent({type:"error",reason:m}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:e,stringUid:i,uid:null,errorCode:m,extend:r}),d({retryable:!1,info:f="Get String Uid Failed ["+m+"]",url:e,error:m})}var g=l.uid;if(!(g>0&&g<Math.pow(2,32))){o.default.error("["+t.clientId+"] "+"Invalid Uint Uid ".concat(i," => ").concat(g),l);m="INVALID_UINT_UID_".concat(g);return n&&n.dispatchEvent({type:"error",reason:m}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:e,stringUid:i,uid:null,errorCode:m,extend:r}),d({retryable:!0,error:m,info:"Get String Uid failed ["+m+"]",url:e})}c({uid:g,url:e}),s.b.reqUserAccount(r.sid,{lts:a,success:!0,serverAddress:e,stringUid:i,uid:g,errorCode:null,extend:r})},function(e,t){if("timeout"===e.type){var o="USER_ACCOUNT_TIMEOUT";n&&n.dispatchEvent({type:"error",reason:o}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:t,stringUid:i,uid:null,errorCode:o,extend:r}),d({retryable:!0,info:o,url:t})}else{var c="USER_ACCOUNT_SERVER_WRONG_".concat(e.type);n&&n.dispatchEvent({type:"error",reason:c}),s.b.reqUserAccount(r.sid,{lts:a,success:!1,serverAddress:t,stringUid:i,uid:null,errorCode:c,extend:r}),d({retryable:!0,info:c,url:t})}},{"X-Packet-Service-Type":0,"X-Packet-URI":72})})},gt=function(e,t,n){Date.now();var a,s=Object(r.getParameter)("ACCOUNT_REGISTER"),c=!1,d=Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT"),u=null,l=null,p=new Promise(function(){var p=ue()(ce.a.mark(function p(f,m){var g,v,h;return ce.a.wrap(function(p){for(;;)switch(p.prev=p.next){case 0:u=f,l=m,a=0;case 3:if(!(a<Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_COUNT_MAX"))){p.next=33;break}if(!c){p.next=6;break}return p.abrupt("return");case 6:return g=s[a%s.length],v=e.proxyServer?"https://".concat(e.proxyServer,"/ap/?url=").concat(s[i]+"/api/v1"):"https://".concat(g,"/api/v1"),p.prev=8,p.delegateYield(ce.a.mark(function i(){var a;return ce.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,mt(v,e,t,n);case 2:if(a=i.sent,!c){i.next=5;break}return i.abrupt("return",{v:void 0});case 5:c=!0,setTimeout(function(){o.default.debug("Get UserAccount Successfully",a),u(a)},0);case 7:case"end":return i.stop()}},i,this)})(),"t0",10);case 10:if(h=p.t0,"object"!==He()(h)){p.next=13;break}return p.abrupt("return",h.v);case 13:p.next=30;break;case 15:if(p.prev=15,p.t1=p.catch(8),!c){p.next=19;break}return p.abrupt("return");case 19:if(!p.t1.retryable){p.next=27;break}return(d=Math.ceil(d*Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_RATIO")))>Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")&&(d=Object(r.getParameter)("ACCOUNT_REGISTER_RETRY_TIMEOUT_MAX")),o.default.error("".concat(p.t1.info," ").concat(p.t1.url," Will Fetch User Account in ").concat(d/1e3," seconds")),p.next=25,new Promise(function(e){setTimeout(e,d)});case 25:p.next=30;break;case 27:o.default.error("Get UserAccount Error: ".concat(p.t1.info," ").concat(p.t1.url),p.t1.error),c=!0,l(p.t1);case 30:a++,p.next=3;break;case 33:case"end":return p.stop()}},p,this,[[8,15]])}));return function(e,t){return p.apply(this,arguments)}}());return p.cancel=function(){c||(c=!0,l({info:"Request Cancelled",retryable:!1}))},p.isFinished=function(){return c},p},vt={ERR_NO_VOCS_AVAILABLE:"tryNext",ERR_NO_VOS_AVAILABLE:"tryNext",ERR_JOIN_CHANNEL_TIMEOUT:"tryNext",WARN_REPEAT_JOIN:"quit",ERR_JOIN_BY_MULTI_IP:"recover",WARN_LOOKUP_CHANNEL_TIMEOUT:"tryNext",WARN_OPEN_CHANNEL_TIMEOUT:"tryNext",ERR_VOM_SERVICE_UNAVAILABLE:"tryNext",ERR_TOO_MANY_USERS:"tryNext",ERR_MASTER_VOCS_UNAVAILABLE:"tryNext",ERR_INTERNAL_ERROR:"tryNext",K_SERVICE_NOT_READY:"recover",notification_test_recover:"recover",notification_test_tryNext:"tryNext",notification_test_retry:"retry"},ht={googActualEncBitrate:"A_aeb",googAvailableSendBandwidth:"A_asb",googRetransmitBitrate:"A_rb",googAvailableReceiveBandwidth:"A_arb",googTargetEncBitrate:"A_teb",googBucketDelay:"A_bd",googTransmitBitrate:"A_tb",googCodecName:"A_cn",bytesSent:"bytesSent",packetsLost:"packetsLost",packetsSent:"packetsSent",googAdaptationChanges:"A_ac",googAvgEncodeMs:"A_aem",googEncodeUsagePercent:"A_eup",googFirsReceived:"A_fr",googFrameHeightInput:"A_fhi",googFrameHeightSent:"A_fhs",googFrameRateInput:"A_fri",googFrameRateSent:"A_frs",googFrameWidthInput:"A_fwi",googFrameWidthSent:"A_fws",googNacksReceived:"A_nr",googPlisReceived:"A_pr",googRtt:"A_rtt",aecDivergentFilterFraction:"A_adff",audioInputLevel:"A_ail",googEchoCancellationReturnLoss:"A_ecrl",googEchoCancellationReturnLossEnhancement:"A_ecrle",googResidualEchoLikelihood:"A_rel",googResidualEchoLikelihoodRecentMax:"A_relrm",googTargetDelayMs:"A_tdm",bytesReceived:"bytesReceived",packetsReceived:"packetsReceived",googDecodeMs:"A_dm",googMaxDecodeMs:"A_mdm",googRenderDelayMs:"A_rdm",googFrameWidthReceived:"A_fwr",googFrameHeightReceived:"A_fhr",googFrameRateReceived:"A_frr",googFrameRateDecoded:"A_frd",googFrameRateOutput:"A_fro",googJitterBufferMs:"A_jbm",googCurrentDelayMs:"A_cdm",googMinPlayoutDelayMs:"A_mpdm",googNacksSent:"A_ns",googPlisSent:"A_ps",googFirsSent:"A_fs",audioOutputLevel:"A_aol",googAccelerateRate:"A_ar",googDecodingCNG:"A_dcng",googDecodingCTN:"A_dctn",googDecodingCTSG:"A_dctsg",googDecodingNormal:"A_dn",googDecodingPLC:"A_dplc",googDecodingPLCCNG:"A_dplccng",googExpandRate:"A_er",googJitterReceived:"A_jr",googPreemptiveExpandRate:"A_per",googPreferredJitterBufferMs:"A_pjbm",googSecondaryDecodedRate:"A_sdr",googSpeechExpandRate:"A_ser",uplink_fraction_lost:"B_ufl",uplink_cumulative_lost:"B_ucl",uplink_available_bandwidth:"B_uab",period_fir:"B_fir",access_delay:"B_acd",uplink_network_quality:"B_unq",downlink_network_quality:"B_dnq",pub_audio_lost_ratio_400ms:"B_palr4",pub_video_lost_ratio_400ms:"B_pvlr4",e2e_delay:"B_ed",audio_delay:"B_ad",video_delay:"B_vd",stream_type:"B_st",e2e_audio_lost_ratio_400ms:"B_ealr4",e2e_video_lost_ratio_400ms:"B_evlr4",downlink_estimate_bandwidth:"B_deb"},St={};for(var _t in ht){var Et=ht[_t];St[Et]&&console.error("Key Conflict: ".concat(Et,": ").concat(ht[Et],"| ").concat(_t)),St[Et]=_t}var It=function(e){return ht[e]||e},yt=function(e){return St[e]||e};var Tt=function t(n){var i=!1,a=function(e){return{_type:"control",_message:e}},d=function(e,t){var n={};return Object.keys(t).forEach(function(e){Object(r.getParameter)("STATS_FILTER")[e]||(n[It(e)]=t[e])}),{_type:"subscribe_related_stats",_message:{stream_type:"high",stream_id:e,stats:n}}},g=function(e){return{_type:"publish",_message:e}},v=function(e,t){var n={};return Object.keys(t).forEach(function(e){Object(r.getParameter)("STATS_FILTER")[e]||(n[It(e)]=t[e])}),{_type:"subscribe_stats",_message:{stream_id:e,stats:n}}},h=t.DISCONNECTED,_=t.CONNECTING,E=t.CONNECTED,I=t.DISCONNECTING,T=h,b=c(n);Object.defineProperty(b,"state",{set:function(e){var n=T;T=e,function(e,t){lt[e]=t}(b.clientId,e),n!==e&&b.dispatchEvent({type:"connection-state-change",prevState:t.connetionStateMap[n],curState:t.connetionStateMap[e]})},get:function(){return T}}),b.socket=void 0,b.state=h,b.mode=n.mode,b.role=n.role,b.codec=n.codec,b.config={},b.timers={},b.timer_counter={},b.localStreams={},b.remoteStreams={},b.remoteMuteState={},b.attemps=1,b.p2p_attemps=1,b.audioLevel={},b.activeSpeaker=void 0,b.reconnectMode="retry",b.rejoinAttempt=0,b.hasChangeBGPAddress=!1,b.traffic_stats={},b.clientId=n.clientId,b.pingpongCounter=0,b.hasInvokeLeave=!1,b.p2ps=new Map,b.liveStreams=new Map,b.injectLiveStreams=new Map,b.remoteStreamsInChannel=new Set,function(e){var t=tt;e.makeRequest=function(n,i,a){if(void 0===e.socket)return o.default.debug("[".concat(e.clientId,"] No socket available")),void t(a,V.INVALID_OPERATION);try{e.socket.emitRequest(n,function(e,t){var n;"success"===e?"function"==typeof i&&i(t):"function"==typeof a&&(n=t&&t.error_code&&y[t.error_code]?y[t.error_code]:t&&t.error_str?t.error_str:t&&t.error_code?"UNKNOW_ERROR_".concat(t.error_code):e,a(n,t))})}catch(i){o.default.debug("[".concat(e.clientId,"] Socket emit message failed ").concat(JSON.stringify(n))),o.default.debug("[".concat(e.clientId,"] "),i),t(a,V.SOCKET_ERROR)}},e.makeReport=function(t){void 0===e.socket&&o.default.debug("[".concat(e.clientId,"] No socket available"));try{e.socket.emitReport(t)}catch(n){o.default.debug("[".concat(e.clientId,"] Socket emit report failed ").concat(JSON.stringify(t)))}}}(b),b.inChannelInfo={joinAt:null,duration:0},b._sendMessage=function(e,t){switch(e){case"SubscribeStats":sendMessage(v.apply(void 0,et()(t)))}};var R=tt;b.p2pCounter=Object(ne.random)(1e5),b.generateP2PId=function(){return++b.p2pCounter},b.audioVolumeIndication={enabled:!1,sortedAudioVolumes:[],smooth:3,interval:2e3},b.remoteVideoStreamTypes={REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2},b.streamFallbackTypes={STREAM_FALLBACK_OPTION_DISABLED:0,STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:1,STREAM_FALLBACK_OPTION_AUDIO_ONLY:2},b.configPublisher=function(e){b.config=e},b.getGatewayInfo=function(e,t){b.makeRequest({_type:"gateway_info"},e,t)},b.setClientRole=function(e,t){o.default.debug("[".concat(b.clientId,"] setClientRole to ").concat(e));var n=s.b.reportApiInvoke(b.joinInfo.sid,{name:"_setClientRole",callback:t});b.makeRequest({_type:"set_client_role",_message:{role:e}},function(){b.role=e,b.dispatchEvent({type:"client-role-changed",role:e}),n&&n(null,{role:e})},function(t,i){if(i&&i.code&&(t=x[i.code]||"UNKNOW_ERROR_"+i.code),"ERR_ALREADY_IN_USE"===t)return n&&n(null);o.default.error("set Client role error to "+e+": "+t),n&&n(t)})},b.join=function(e,t,i,a){e.useProxyServer&&(b.hasChangeBGPAddress=!0);var c=(new Date).getTime(),d=e.uid;if(b.inChannelInfo.joinAt&&(b.inChannelInfo.duration+=c-b.inChannelInfo.joinAt),b.inChannelInfo.joinAt=c,b.state!==_)return o.default.error("[".concat(b.clientId,"] GatewayClient.join Failed: state "),b.state),a&&a(V.INVALID_OPERATION),void s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:V.INVALID_OPERATION,addr:null});if(null!=d&&parseInt(d)!==d)return o.default.error("[".concat(b.clientId,"] Input uid is invalid")),b.state=h,a&&a(V.INVALID_PARAMETER),void s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:V.INVALID_PARAMETER,addr:null});var u=bt.register(b,{uid:d,cname:e&&e.cname});if(u)return b.state=h,a&&a(u),void s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:u,addr:null});b.joinInfo=S()({},e),b.uid=d,b.key=t,b.pingpongCounter=0,N(e,function(t){var d,u,l,f;b.state=E,o.default.debug("[".concat(b.clientId,"] Connected to gateway server")),clearInterval(b.pingTimer),b.pingTimer=setInterval(function(){var e=Object(r.getParameter)("PING_PONG_TIME_OUT");if(++b.pingpongCounter>=e){var t=Date.now();b.socket&&o.default.warning("PINGPONG Timeout. Last Socket Message: ".concat(t-b.socket.getLastMsgTime(),"ms")),b.socket&&b.socket.getLastMsgTime()&&t-b.socket.getLastMsgTime()>Object(r.getParameter)("WEBSOCKET_TIMEOUT_MIN")&&(b.pingpongCounter=0,b.socket.close(),b.socket.dispatchEvent(p({type:"disconnect",event:{msg:"PING_PONG_TIME_OUT"}})))}var n=Date.now();b.makeRequest({_type:"ping"},function(){b.pingpongCounter=0;var e=Date.now()-n;setTimeout(function(){Object(r.getParameter)("REPORT_STATS")&&b.makeRequest({_type:"ping_back",_message:{pingpongElapse:e}})},1e3)},function(e,t){"TIMEOUT"!==e&&(o.default.error("Ping Error ".concat(e," ").concat(JSON.stringify(t))),t&&t.error_code&&b.socket&&b.socket.signal&&b.socket.signal.connection&&b.socket.signal.connection.readyState===WebSocket.OPEN&&(o.default.info("Disconnecting websocket connection"),b.socket.signal.connection.close()))})},3e3),b.makeRequest((d={role:b.role},u=d.role,l=S()({},b.joinInfo.apResponse),f={session_id:b.joinInfo.sid,app_id:n.appId,channel_key:b.key,channel_name:b.joinInfo.cname,sdk_version:r.VERSION,browser:navigator.userAgent,process_id:Object(s.a)(),mode:b.mode,codec:b.codec,role:u,has_changed_gateway:Object(r.getParameter)("FORCE_CHANGED_GATEWAY_FLAG")||b.hasChangeBGPAddress,ap_response:l,extend:Object(r.getParameter)("JOIN_EXTEND"),details:{}},b.joinInfo.hasOwnProperty("stringUid")&&(f.string_uid=b.joinInfo.stringUid),b.joinInfo.aesmode&&b.joinInfo.aespassword&&(f.aes_mode=b.joinInfo.aesmode,f.aes_secret=b.joinInfo.aespassword),b.socket&&b.socket.signal&&b.socket.signal&&(l.addresses[b.socket.signal.hostIndex]&&(f.ap_response.ticket=l.addresses[b.socket.signal.hostIndex].ticket,delete l.addresses),b.joinInfo.turnServer&&"auto"===b.joinInfo.turnServer.mode&&b.socket.signal.turnConfig&&(b.joinInfo.turnServer.url=b.socket.signal.turnConfig.url,b.socket.signal.turnConfig.tcpport&&(b.joinInfo.turnServer.tcpport=""+b.socket.signal.turnConfig.tcpport),b.socket.signal.turnConfig.udpport&&(b.joinInfo.turnServer.udpport=""+b.socket.signal.turnConfig.udpport)),o.default.debug("Turn config",b.joinInfo.turnServer)),b.dispatchEvent({type:"join-message-hook",joinMessage:f},!0),{_type:"join",_message:f}),function(t){if(s.b.joinGateway(e.sid,{lts:c,succ:!0,ec:null,vid:e.vid,addr:b.socket.getURL()}),b.rejoinAttempt=0,i&&i(t.uid),b.dispatchEvent({type:"join"}),b.leaveOnConnected){o.default.info("[".concat(b.clientId,"] Calling Leave() once joined"));var n=b.leaveOnConnected;b.leaveOnConnected=null,b.leave(n.onSuccess,n.onFailure)}},function(t,n){if(o.default.error("[".concat(b.clientId,"] User join failed [").concat(t,"]")),"ERR_JOIN_BY_MULTI_IP"===t)return b.dispatchEvent({type:"onMultiIP",option:n.option});if(vt[t]&&b.rejoinAttempt<4){if(b._doWithAction(vt[t],i,a),b.leaveOnConnected){o.default.error("[".concat(b.clientId,"] Calling Leave() once joined: Join Failed"));var r=b.leaveOnConnected;b.leaveOnConnected=null,r.onFailure(V.JOIN_CHANNEL_FAILED)}}else a&&a(t);s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:t,addr:b.socket.getURL()})})},function(t){o.default.error("[".concat(b.clientId,"] User join failed [").concat(t,"]")),a&&a(t),s.b.joinGateway(e.sid,{lts:c,succ:!1,ec:t,addr:b.socket.getURL()})}),clearInterval(b.timers.trafficStats),b.timers.trafficStats=setInterval(function(){b.makeRequest({_type:"traffic_stats"},function(e){var t={};for(var n in e)t[yt(n)]=e[n];if(t.peer_delay&&t.peer_delay.length){var i=[];t.peer_delay.forEach(function(e){var t={};for(var n in e)t[yt(n)]=e[n];i.push(t)}),t.peer_delay=i}b.traffic_stats=t;var a=b.joinInfo.stringUid,r=b.localStreams[d]||b.localStreams[a];r&&(r.traffic_stats={access_delay:t.access_delay}),t.peer_delay&&t.peer_delay.forEach(function(e){var n=b.remoteStreams[e.peer_uid];n&&(n.traffic_stats={access_delay:t.access_delay,e2e_delay:e.e2e_delay,audio_delay:e.audio_delay,video_delay:e.video_delay})}),b.dispatchEvent({type:"after-getTrafficStats",trafficStats:t})})},3e3),this.remoteMuteState={},b.resetAudioVolumeIndication()},b.leave=function(e,t){switch(b.state){case h:return o.default.debug("[".concat(b.clientId,"] Client Already in DISCONNECTED status")),void R(e);case I:return o.default.error("[".concat(b.clientId,"] Client Already in DISCONNECTING status")),void R(t,V.INVALID_OPERATION);case _:if(b.leaveOnConnected)return o.default.error("[".concat(b.clientId,"] Client.leave() already called")),void R(t,V.INVALID_OPERATION);if(1==b.reconnectingCS)return;return o.default.debug("[".concat(b.clientId,"] Client connecting. Waiting for Client Fully Connected(And leave)")),void(b.leaveOnConnected={onSuccess:e,onFailure:t})}var n=bt.unregister(b);if(n)o.default.error("[".concat(b.clientId,"] "),n);else{for(var i in b.state=I,b.channelMediaConfig&&(b.channelMediaRelayController&&b.channelMediaRelayController.dispose(),b.channelMediaConfig,b.channelMediaRelayController=null),clearInterval(b.pingTimer),b.timers)b.timers.hasOwnProperty(i)&&clearInterval(b.timers[i]);for(var i in b.inChannelInfo.joinAt&&(b.inChannelInfo.duration+=Date.now()-b.inChannelInfo.joinAt,b.inChannelInfo.joinAt=null),b.makeRequest({_type:"leave"},function(t){b.socket.close(),b.socket=void 0,o.default.info("[".concat(b.clientId,"] Leave channel success")),b.state=h,e&&e(t)},function(e){"TIMEOUT"!==e&&(o.default.error("[".concat(b.clientId,"] Leave Channel Failed"),e),b.state=E,t&&t(e))}),b.localStreams)if(b.localStreams.hasOwnProperty(i)){var a=b.localStreams[i];delete b.localStreams[i],void 0!==a.pc&&(a.pc.close(),a.pc=void 0)}D()}},b.publish=function(e,t,n,i){var c=(new Date).getTime(),d=!1;if(e.publishLTS=c,"object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid local stream")),i&&i(V.INVALID_LOCAL_STREAM),void s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.INVALID_LOCAL_STREAM});if(!e.stream&&void 0===e.url)return o.default.error("[".concat(b.clientId,"] Invalid local media stream")),i&&i(V.INVALID_LOCAL_STREAM),void s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.INVALID_LOCAL_STREAM});if(b.state!==E)return o.default.error("[".concat(b.clientId,"] User is not in the session")),i&&i(V.INVALID_OPERATION),void s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.INVALID_OPERATION});var u=e.getAttributes()||{};if(e.local&&void 0===b.localStreams[e.getId()]&&(e.hasAudio()||e.hasVideo()||e.hasScreen())){var p=b.generateP2PId();if(b.p2ps.set(p,e),e.p2pId=p,void 0!==e.url)w(g({state:"url",audio:e.hasAudio(),video:e.hasVideo(),attributes:e.getAttributes()},e.url),function(t,n){"success"===t?(e.getUserId()!==n&&e.setUserId(n),b.localStreams[n]=e,e.onClose=function(){b.unpublish(e)}):o.default.error("[".concat(b.clientId,"] Publish local stream failed"),t)});else{b.localStreams[e.getId()]=e,e.connectionSpec={callback:function(u){o.default.debug("[".concat(b.clientId,"] SDP exchange in publish : send offer --  "),JSON.parse(u)),b.makeRequest(g({state:"offer",stream_type:1==t.streamType?"low":"high",p2p_id:p,sdp:u,audio:e.audio||e.screenAudio,video:e.screen||e.video,screen:e.screen,attributes:e.getAttributes(),dtx:e.DTX,hq:e.highQuality,lq:e.lowQuality,stereo:e.stereo,speech:e.speech,codec:b.codec,extend:Object(r.getParameter)("PUB_EXTEND")}),function(t){e.getUserId()!==t.uid&&e.setUserId(t.uid),o.default.info("[".concat(b.clientId,"] Local stream published with uid"),t.uid),e.onClose=function(){b.unpublish(e)},e._onAudioUnmute=function(){b.makeReport(a({action:"unmute_local_audio",stream_id:e.getId()}))},e._onVideoUnmute=function(){b.makeReport(a({action:"unmute_local_video",stream_id:e.getId()}))},e._onAudioMute=function(){b.makeReport(a({action:"mute_local_audio",stream_id:e.getId()}))},e._onVideoMute=function(){b.makeReport(a({action:"mute_local_video",stream_id:e.getId()}))},e.getId()===e.getUserId()&&(e.isAudioOn()||e.hasAudio()&&(o.default.debug("[".concat(b.clientId,"] local stream audio mute")),e._onAudioMute()),e.isVideoOn()||(e.hasVideo()||e.hasScreen())&&(o.default.debug("[".concat(b.clientId,"] local stream video mute")),e._onVideoMute())),e.pc.oniceconnectionstatechange=function(t){if("failed"===t){if(null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()]+"_RelatedStats")),o.default.error("[".concat(b.clientId,"] Publisher connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(p)),b.p2ps.delete(p),o.default.debug("[".concat(b.clientId,"] publish p2p failed: "),b.p2ps),!d)return d=!0,s.b.publish(b.joinInfo.sid,{lts:c,succ:!1,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:V.PEERCONNECTION_FAILED}),b.dispatchEvent(l({type:"pubP2PLost",stream:e})),i&&i(V.PEERCONNECTION_FAILED);b.dispatchEvent(l({type:"pubP2PLost",stream:e}))}else if("connected"===t&&(o.default.debug("[".concat(b.clientId,"] publish p2p connected: "),b.p2ps),e._isAudioMuted()?b.makeReport(a({action:"mute_local_audio",stream_id:e.getId()})):b.makeReport(a({action:"unmute_local_audio",stream_id:e.getId()})),e._isVideoMuted()?b.makeReport(a({action:"mute_local_video",stream_id:e.getId()})):b.makeReport(a({action:"unmute_local_video",stream_id:e.getId()})),!d))return d=!0,s.b.publish(b.joinInfo.sid,{lts:c,succ:!0,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:null}),n&&n()},o.default.debug("[".concat(b.clientId,"] SDP exchange in publish : receive answer --  "),JSON.parse(t.sdp)),e.pc.processSignalingMessage(t.sdp)},function(t,n){o.default.error("Publish Failed: ".concat(t)),s.b.publish(b.joinInfo.sid,{lts:c,succ:!0,audioName:e.hasAudio()&&e.audioName,videoName:e.hasVideo()&&e.videoName,screenName:e.hasScreen()&&e.screenName,ec:t}),"TIMEOUT"!=t&&(b.processPublishFailure(e),i&&i(t))})},audio:e.hasAudio(),video:e.hasVideo(),screen:e.hasScreen(),isSubscriber:!1,stunServerUrl:b.stunServerUrl,turnServer:b.joinInfo.turnServer,maxAudioBW:u.maxAudioBW,minVideoBW:u.minVideoBW,maxVideoBW:u.maxVideoBW,mode:b.mode,codec:b.codec,isVideoMute:e.userMuteVideo||e.peerMuteVideo,isAudioMute:e.userMuteAudio||e.peerMuteAudio,maxFrameRate:e.attributes.maxFrameRate,clientId:b.clientId},e.pc=ee(e.connectionSpec),e.pc.addStream(e.stream),o.default.debug("[".concat(b.clientId,"] PeerConnection add stream :"),e.stream),e.pc.onnegotiationneeded=function(n){var i={state:"negotiation",stream_type:1===t.streamType?"low":"high",p2p_id:p,sdp:n};b.makeRequest(g(i),function(t){o.default.debug("Negotating Stream ".concat(e.getId())),e.pc.processSignalingMessage(t.sdp)},function(e,t){o.default.error("Negotiation failed ".concat(e),t,i)})},clearInterval(b.timers[e.getId()]),b.timers[e.getId()]=setInterval(function(){if(Object(r.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate(function(n){n.forEach(function(n){if(n&&n.id&&!/_recv$/.test(n.id)&&!/^time$/.test(n.id)&&e.getUserId())if(-1===n.id.indexOf("outbound_rtp")&&-1===n.id.indexOf("OutboundRTP")||"video"!==n.mediaType||(n.googFrameWidthSent=e.videoWidth+"",n.googFrameHeightSent=e.videoHeight+""),e.getId()==e.getUserId()){var i=200*t;t++,setTimeout(function(){var e=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):b.makeReport(function(e){var t={};return Object.keys(e).forEach(function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[It(n)]=e[n])}),{_type:"publish_stats",_message:{stream_type:"high",stats:t}}}(n))},i)}else{i=200*t;t++,setTimeout(function(){var e=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishStatsLow report blocked by REPORT_STATS_TIMEOUT ".concat(e)):b.makeReport(function(e){var t={};return Object.keys(e).forEach(function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[It(n)]=e[n])}),{_type:"publish_stats",_message:{stream_type:"low",stats:t}}}(n))},i)}})})}},3e3);var f=function(){Object(r.getParameter)("REPORT_STATS")&&e&&e.pc&&e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats(function(t){var n,i,a=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();a>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("PublishRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(a)):e.getId()===e.getUserId()?b.makeReport((n=t,i={},Object.keys(n).forEach(function(e){Object(r.getParameter)("STATS_FILTER")[e]||(i[It(e)]=n[e])}),{_type:"publish_related_stats",_message:{stream_type:"high",stats:i}})):b.makeReport(function(e){var t={};return Object.keys(e).forEach(function(n){Object(r.getParameter)("STATS_FILTER")[n]||(t[It(n)]=e[n])}),{_type:"publish_related_stats",_message:{stream_type:"low",stats:t}}}(t))})};f(),clearInterval(b.timers[e.getId()+"_RelatedStats"]),b.timers[e.getId()+"_RelatedStats"]=setInterval(f,1e3)}}},b.unpublish=function(e,t,n,i){if("object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid local stream")),void R(i,V.INVALID_LOCAL_STREAM);if(b.state!==E)return o.default.error("[".concat(b.clientId,"] User not in the session")),void R(i,V.INVALID_OPERATION);if(null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()+"_RelatedStats"])),void 0!==b.socket)if(e.local&&void 0!==b.localStreams[e.getId()]){delete b.localStreams[e.getId()];var a={stream_id:e.getUserId(),stream_type:1===t.streamType?"low":"high"};b.makeRequest({_type:"unpublish",_message:a}),(e.hasAudio()||e.hasVideo()||e.hasScreen())&&void 0===e.url&&void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,b.p2ps.delete(e.p2pId),b.dispatchEvent({type:"stream-unpublished",stream:e,options:t}),n&&n()}else o.default.error("[".concat(b.clientId,"] Invalid local stream")),R(i,V.INVALID_LOCAL_STREAM);else o.default.error("[".concat(b.clientId,"] User not in the session")),R(i,V.INVALID_OPERATION)},b.subscribe=function(e,t,n){var i=(new Date).getTime();e.subscribeLTS=i;var c=!1;if(o.default.info("[".concat(b.clientId,"] Gatewayclient ").concat(b.uid," Subscribe ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),"object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid remote stream")),n&&n(V.INVALID_REMOTE_STREAM),void s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.INVALID_REMOTE_STREAM});if(b.state!==E&&(o.default.error("[".concat(b.clientId,"] User is not in the session")),!c))return c=!0,s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.INVALID_OPERATION}),n&&n(V.INVALID_OPERATION);if(!e.local&&b.remoteStreams.hasOwnProperty(e.getId()))if(e.hasAudio()||e.hasVideo()||e.hasScreen()){var p=b.generateP2PId();b.p2ps.set(p,e),e.p2pId=p,e.pc=ee({callback:function(t){o.default.debug("[".concat(b.clientId,"] SDP exchange in subscribe : send offer --  "),JSON.parse(t));var a={stream_id:e.getId(),audio:!e.subscribeOptions||e.subscribeOptions.audio,video:!e.subscribeOptions||e.subscribeOptions.video,codec:b.codec,p2p_id:p,sdp:t,tcc:Object(r.getParameter)("SUBSCRIBE_TCC"),extend:Object(r.getParameter)("SUB_EXTEND")};b.makeRequest({_type:"subscribe",_message:a},function(t){o.default.debug("[".concat(b.clientId,"] SDP exchange in subscribe : receive answer --  "),JSON.parse(t.sdp)),e.pc.processSignalingMessage(t.sdp)},function(t,a){o.default.error("[".concat(b.clientId,"] Subscribe remote stream Failed: ").concat(t,", closing stream "),e.getId(),a),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:t}),"TIMEOUT"!=t&&(b.processSubscribeFailure(e),n&&n(t))})},nop2p:!0,audio:!0,video:!0,screen:e.hasScreen(),isSubscriber:!0,stunServerUrl:b.stunServerUrl,turnServer:b.joinInfo.turnServer,isVideoMute:e.userMuteVideo,isAudioMute:e.userMuteAudio,uid:e.getId(),clientId:b.clientId}),e.pc.onaddstream=function(t,n){if(e._onAudioUnmute=function(){b.makeReport(a({action:"unmute_remote_audio",stream_id:e.getId()}),function(){},function(){})},e._onAudioMute=function(){b.makeReport(a({action:"mute_remote_audio",stream_id:e.getId()}),function(){},function(){})},e._onVideoUnmute=function(){b.makeReport(a({action:"unmute_remote_video",stream_id:e.getId()}),function(){},function(){})},e._onVideoMute=function(){b.makeReport(a({action:"mute_remote_video",stream_id:e.getId()}),function(){},function(){})},"ontrack"===n&&"video"===t.track.kind||"onaddstream"===n){o.default.info("[".concat(b.clientId,"] Remote stream subscribed with uid "),e.getId());var i=b.remoteStreams[e.getId()];if(b.remoteStreams[e.getId()].stream="onaddstream"===n?t.stream:t.streams[0],b.remoteStreams[e.getId()].hasVideo()){if(Object(m.isFireFox)()||Object(m.isSafari)()){var r=b.remoteStreams[e.getId()].stream;Object(ne.vsResHack)(r,function(t,n){e.videoWidth=t,e.videoHeight=n},function(e){return o.default.warning("[".concat(b.clientId,"] vsResHack failed: ")+e)})}}else{var s=b.remoteStreams[e.getId()];s.peerMuteVideo=!0,b._adjustPCMuteStatus(s)}i&&i.isPlaying()&&i.elementID&&(o.default.debug("[".concat(b.clientId,"] Reload Player ").concat(i.elementID," StreamId ").concat(i.getId())),e.audioOutput=i.audioOutput,i.stop(),e.play(i.elementID,i.playOptions)),delete e.audioLevelHelper;var c=u({type:"stream-subscribed",stream:b.remoteStreams[e.getId()]});b.dispatchEvent(c)}},clearInterval(b.timers[e.getId()]),b.timers[e.getId()]=setInterval(function(){if(Object(r.getParameter)("REPORT_STATS")){var t=0;e&&e.pc&&e.pc.getStats&&e.pc.getStatsRate(function(n){n.forEach(function(n){if(n&&n.id){if(/_send$/.test(n.id)||/^time$/.test(n.id)||/^bweforvideo$/.test(n.id))return;-1===n.id.indexOf("inbound_rtp")&&-1===n.id.indexOf("inbound-rtp")||"video"!==n.mediaType||(n.googFrameWidthReceived=e.videoWidth+"",n.googFrameHeightReceived=e.videoHeight+"");var i=200*t;t++;var a=e.getId();setTimeout(function(){var e=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();e>Object(r.getParameter)("REPORT_STATS_TIMEOUT")?o.default.debug("SubscribeStats report blocked by REPORT_STATS_TIMEOUT ".concat(e)):b.makeReport(v(a,n))},i)}else;})})}},3e3),clearInterval(b.timers[e.getId()+"_RelatedStats"]),b.timers[e.getId()+"_RelatedStats"]=setInterval(function(){if(Object(r.getParameter)("REPORT_STATS")&&e&&e.pc){var t=b.socket&&b.socket.getLastMsgTime()&&Date.now()-b.socket.getLastMsgTime();if(t>Object(r.getParameter)("REPORT_STATS_TIMEOUT"))return void o.default.debug("SubscribeRelatedStats report blocked by REPORT_STATS_TIMEOUT ".concat(t));e.pc.getVideoRelatedStats&&e.pc.getVideoRelatedStats(function(t){b.makeReport(d(e.getId(),t))}),e.pc.getAudioRelatedStats&&e.pc.getAudioRelatedStats(function(t){b.makeReport(d(e.getId(),t))})}},1e3),b.audioLevel[e.getId()]=0,clearInterval(b.timers[e.getId()+"audio"]),b.timers[e.getId()+"audio"]=setInterval(function(){b.hasListeners("active-speaker")&&e&&e.pc&&"established"===e.pc.state&&e.pc.getStats&&e.pc.getStats(function(t){t.forEach(function(t){if("audio"===t.mediaType){if(t.audioOutputLevel>5e3)for(var n in b.audioLevel[e.getId()]<20&&(b.audioLevel[e.getId()]+=1),b.audioLevel)n!==""+e.getId()&&b.audioLevel[n]>0&&(b.audioLevel[n]-=1);var i=Object.keys(b.audioLevel).sort(function(e,t){return b.audioLevel[t]-b.audioLevel[e]});if(b.activeSpeaker!==i[0]){var a=l({type:"active-speaker",uid:i[0]});b.dispatchEvent(a),b.activeSpeaker=i[0],o.default.debug("[".concat(b.clientId,"] Update active speaker: ").concat(b.activeSpeaker))}}})},50)},50),e.pc.oniceconnectionstatechange=function(a){if("failed"===a)null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()]+"audio")),o.default.error("[".concat(b.clientId,"] Subscriber connection is lost -- streamId: ").concat(e.getId(),", p2pId: ").concat(p)),o.default.debug("[".concat(b.clientId,"] subscribe p2p failed: "),b.p2ps),c||(c=!0,n&&n(V.PEERCONNECTION_FAILED),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.PEERCONNECTION_FAILED})),b.remoteStreams[e.getId()]&&b.p2ps.has(p)&&(b.p2ps.delete(p),b.dispatchEvent(l({type:"subP2PLost",stream:e})));else if("connected"===a&&(o.default.debug("[".concat(b.clientId,"] subscribe p2p connected: "),b.p2ps),!c)){c=!0,s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null}),b._adjustPCMuteStatus(e);var r=!1,d=setInterval(function(){e.pc?e.pc.getStats(function(t){t.forEach(function(t){-1!==t.id.indexOf("recv")&&"audio"===t.mediaType&&(parseInt(t.googDecodingNormal)>0||parseInt(t.audioOutputLevel)>0)&&(r||(r=!0,b.dispatchEvent({type:"first-audio-frame-decode",stream:e}),clearInterval(d),s.b.reportApiInvoke(b.joinInfo.sid,{name:"firstAudioDecode"})(null,{elapse:Date.now()-e.subscribeLTS})))})},100):clearInterval(d)},100),u=!1,f=setInterval(function(){e.pc?e.pc.getStats(function(t){t.forEach(function(t){-1===t.id.indexOf("recv")&&-1===t.id.indexOf("inbound_rtp")&&-1===t.id.indexOf("inbound-rtp")&&-1===t.id.indexOf("InboundRTP")||"video"===t.mediaType&&(t.framesDecoded>0||t.googFramesDecoded>0)&&(u||(u=!0,b.dispatchEvent({type:"first-video-frame-decode",stream:e}),clearInterval(f),e.firstFrameTime=(new Date).getTime()-e.subscribeLTS,s.b.firstRemoteFrame(b.joinInfo.sid,{lts:(new Date).getTime(),peerid:e.getId(),succ:!0,width:+t.googFrameWidthReceived,height:+t.googFrameHeightReceived})))})},100):clearInterval(f)},100);return e.sid=b.joinInfo.sid,t&&t()}}}else o.default.error("[".concat(b.clientId,"] Invalid remote stream")),c||(c=!0,n&&n(V.INVALID_REMOTE_STREAM),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.INVALID_REMOTE_STREAM}));else o.default.error("[".concat(b.clientId,"] No such remote stream")),c||(c=!0,n&&n(V.NO_SUCH_REMOTE_STREAM),s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!1,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:V.NO_SUCH_REMOTE_STREAM}))},b.subscribeChange=function(e,t,n){var i=Date.now();o.default.info("[".concat(b.clientId,"] Gatewayclient ").concat(b.uid," SubscribeChange ").concat(e.getId(),": ").concat(JSON.stringify(e.subscribeOptions))),b._adjustPCMuteStatus(e);var a={stream_id:e.getId(),audio:e.subscribeOptions.audio,video:e.subscribeOptions.video};b.makeRequest({_type:"subscribe_change",_message:a},function(n){var a=u({type:"stream-subscribe-changed",stream:b.remoteStreams[e.getId()]});s.b.subscribe(b.joinInfo.sid,{lts:i,succ:!0,video:e.subscribeOptions&&e.subscribeOptions.video,audio:e.subscribeOptions&&e.subscribeOptions.audio,peerid:e.getId(),ec:null}),b.dispatchEvent(a),t&&t()},function(t,i){o.default.error("[".concat(b.clientId,"] Subscribe Change Failed ").concat(e.getId()),t,i),n&&n(t,i)})},b.processPublishFailure=function(e){e.publishLTS=null,e.p2pId&&b.p2ps.get(e.p2pId)===e&&b.p2ps.delete(e.p2pId),b.localStreams[e.getUserId()]===e&&delete b.localStreams[e.getUserId()],b.localStreams[e.getId()]===e&&delete b.localStreams[e.getId()],e.pc&&(e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},b.processSubscribeFailure=function(e){e.p2pId&&b.p2ps.get(e.p2pId)===e&&b.p2ps.delete(e.p2pId),b.remoteStreams[e.getId()]===e&&delete b.remoteStreams[e.getId()],b.remoteStreams[e.getId()]===e&&delete b.remoteStreams[e.getId()],e.pc&&(e.pc.onaddstream=function(){},e.pc.processSignalingMessage=function(){},e.pc.oniceconnectionstatechange=function(){},e.pc.close(),delete e.pc),delete e.onClose,delete e._onAudioUnmute,delete e._onVideoUnmute,delete e._onAudioMute,delete e._onVideoMute,delete e._onAudioUnmute},b._adjustPCMuteStatus=function(e){!e.local&&e.pc&&e.pc.peerConnection.getReceivers&&e.pc.peerConnection.getReceivers().forEach(function(t){if(t&&t.track&&"audio"===t.track.kind){var n=!e.userMuteAudio&&!e.peerMuteAudio;e.subscribeOptions&&!e.subscribeOptions.audio&&(n=!1),t.track.enabled=!!n}else if(t&&t.track&&"video"===t.track.kind){var i=!e.userMuteVideo&&!e.peerMuteVideo;e.subscribeOptions&&!e.subscribeOptions.video&&(i=!1),t.track.enabled=!!i}})},b.unsubscribe=function(e,t,n){if("object"!==He()(e)||null===e)return o.default.error("[".concat(b.clientId,"] Invalid remote stream")),void R(n,V.INVALID_REMOTE_STREAM);if(b.state!==E)return o.default.error("[".concat(b.clientId,"] User is not in the session")),void R(n,V.INVALID_OPERATION);if(null!=b.timers[e.getId()]&&(clearInterval(b.timers[e.getId()]),clearInterval(b.timers[e.getId()]+"audio")),null!=b.audioLevel[e.getId()]&&delete b.audioLevel[e.getId()],null!=b.timer_counter[e.getId()]&&delete b.timer_counter[e.getId()],b.remoteStreams.hasOwnProperty(e.getId())){if(!b.socket)return o.default.error("[".concat(b.clientId,"] User is not in the session")),void R(n,V.INVALID_OPERATION);if(e.local)return o.default.error("[".concat(b.clientId,"] Invalid remote stream")),void R(n,V.INVALID_REMOTE_STREAM);e.close();var i={stream_id:e.getId()};b.makeRequest({_type:"unsubscribe",_message:i}),void 0!==e.pc&&(e.pc.close(),e.pc=void 0),e.onClose=void 0,e._onAudioMute=void 0,e._onAudioUnute=void 0,e._onVideoMute=void 0,e._onVideoUnmute=void 0,delete e.subscribeOptions,b.p2ps.delete(e.p2pId),o.default.info("[".concat(b.clientId,"] Unsubscribe stream success")),t&&t()}else R(n,V.NO_SUCH_REMOTE_STREAM)},b.setRemoteVideoStreamType=function(e,t){if(o.default.debug("[".concat(b.clientId,"] Switching remote video stream ").concat(e.getId()," to ").concat(t)),"object"===He()(e)&&null!==e)if(b.state===E){if(!e.local){switch(t){case b.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_HIGH:case b.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_LOW:case b.remoteVideoStreamTypes.REMOTE_VIDEO_STREAM_MEDIUM:break;default:return}var n={stream_id:e.getId(),stream_type:t};b.makeRequest({_type:"switch_video_stream",_message:n},function(){o.default.debug("SwitchVideoStream Success ".concat(n.stream_id," ").concat(n.stream_type))},function(e,t){o.default.error("SwitchVideoStream Error ".concat(e," ").concat(n.stream_id," ").concat(n.stream_type),t)})}}else o.default.error("[".concat(b.clientId,"] User is not in the session"));else o.default.error("[".concat(b.clientId,"] Invalid remote stream"))},b.renewToken=function(e,t,n){e?b.key?b.state!==E?(o.default.debug("[".concat(b.clientId,"] Client is not connected. Trying to rejoin")),b.key=e,b.rejoin(),t&&t()):(o.default.debug("[".concat(b.clientId,"] renewToken from ").concat(b.key," to ").concat(e)),b.makeRequest({_type:"renew_token",_message:{token:e}},t,n)):(o.default.error("[".concat(b.clientId,"] Client is previously joined without token")),n&&n(V.INVALID_PARAMETER)):(o.default.error("[".concat(b.clientId,"] Invalid Token ").concat(e)),n&&n(V.INVALID_PARAMETER))},b.setStreamFallbackOption=function(e,t){if(o.default.debug("[".concat(b.clientId,"] Set stream fallback option ").concat(e.getId()," to ").concat(t)),"object"===He()(e)&&null!==e)if(b.state===E){if(!e.local){switch(t){case b.streamFallbackTypes.STREAM_FALLBACK_OPTION_DISABLED:case b.streamFallbackTypes.STREAM_FALLBACK_OPTION_VIDEO_STREAM_LOW:case b.streamFallbackTypes.STREAM_FALLBACK_OPTION_AUDIO_ONLY:break;default:return}var n={stream_id:e.getId(),fallback_type:t};b.makeRequest({_type:"set_fallback_option",_message:n},function(){o.default.debug("SetStreamFallbackOption success ".concat(n.stream_id," ").concat(t))},function(e,i){o.default.error("Failed to SetStreamFallbackOption ".concat(n.stream_id," ").concat(t," ").concat(e),i)})}}else o.default.error("[".concat(b.clientId,"] User is not in the session"));else o.default.error("[".concat(b.clientId,"] Invalid remote stream"))},b.enableAudioVolumeIndicator=function(e,t){b.audioVolumeIndication.enabled=!0,b.audioVolumeIndication.interval=e,b.audioVolumeIndication.smooth=t,b.resetAudioVolumeIndication()},b.resetAudioVolumeIndication=function(){if(clearInterval(b.timers.audioVolumeIndication),clearInterval(b.timers.audioVolumeSampling),b.audioVolumeIndication.enabled&&b.audioVolumeIndication.interval){var e=Math.floor(1e3*b.audioVolumeIndication.smooth/100);clearInterval(b.timers.audioVolumeSampling),b.timers.audioVolumeSampling=setInterval(function(){b.audioVolumeSampling||(b.audioVolumeSampling={});var t={};for(var n in b.remoteStreams){var i=b.remoteStreams[n];if(i.stream&&i.hasAudio()){var a=i.getAudioLevel();a>0&&a<1&&(a*=100);var r=b.audioVolumeSampling[n]||[];for(r.push(a);r.length>e;)r.shift();t[n]=r}}b.audioVolumeSampling=t},100),clearInterval(b.timers.audioVolumeIndication),b.timers.audioVolumeIndication=setInterval(function(){if(b.socket&&b.socket.signal&&b.socket.signal.connection&&b.socket.signal.connection.readyState===WebSocket.OPEN){var e=[];for(var t in b.remoteStreams)if(b.audioVolumeSampling&&b.audioVolumeSampling[t]){var n=b.audioVolumeSampling[t],i=0;n.forEach(function(e){i+=e});var a={uid:t,level:Math.floor(i/n.length)};a.level&&e.push(a)}var r=e.sort(function(e,t){return e.level-t.level});o.default.debug("[".concat(b.clientId,"] volume-indicator "),JSON.stringify(r)),b.audioVolumeIndication.sortedAudioVolumes=r;var s=l({type:"volume-indicator",attr:r});b.dispatchEvent(s)}},b.audioVolumeIndication.interval)}},b.closeGateway=function(){o.default.debug("[".concat(b.clientId,"] close gateway")),b.state=h,b.socket.close(),O()},b.startChannelMediaRelay=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,r;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!b.channelMediaRelayController){e.next=2;break}throw new Ke.ChannelMediaError("RELAY_ALREADY_START","",Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_ALREADY_START);case 2:return n=function(e){b.dispatchEvent({type:"channel-media-relay-event",code:e})},i=function(e,t,n){e===Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE&&t===Ke.CHANNEL_MEDIA_RELAY_ERROR.SERVER_CONNECTION_LOST&&(b.channelMediaRelayController.dispose(),b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:e,code:t,data:n})},b.channelMediaRelayController=new ze.a(b.joinInfo,b.clientId),b.channelMediaRelayController.on("event",n),b.channelMediaRelayController.on("state",i),e.prev=7,e.next=10,b.channelMediaRelayController.startChannelMediaRelay(t);case 10:e.next=22;break;case 12:throw e.prev=12,e.t0=e.catch(7),o.default.debug("[".concat(b.clientId,"] startChannelMediaRelay exception: ").concat(JSON.stringify(e.t0))),a=Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,r="",r=e.t0 instanceof Ke.ChannelMediaError?"SetSourceChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetSourceChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_SRC":"SetDestChannelStatus"===e.t0.data||e.t0.data&&e.t0.data.serverResponse&&"SetDestChannel"===e.t0.data.serverResponse.command?"FAILED_JOIN_DEST":e.t0.data&&e.t0.data.serverResponse&&"StartPacketTransfer"===e.t0.data.serverResponse.command?"FAILED_PACKET_SENT_TO_DEST":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.t0.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.t0.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.AP_REQUEST_TIMEOUT?"NO_RESOURCE_AVAILABLE":e.t0.message===Ke.CHANNEL_MEDIA_ERROR.WS_ABORT||e.t0.message===Ke.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",b.dispatchEvent({type:"channel-media-relay-state",state:a,code:Ke.CHANNEL_MEDIA_RELAY_ERROR[r]}),b.channelMediaRelayController&&(b.channelMediaRelayController.dispose(),b.channelMediaConfig=null,b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new Ke.ChannelMediaError(r,null,Ke.CHANNEL_MEDIA_RELAY_ERROR[r]);case 22:b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_RUNNING,code:Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_OK}),b.channelMediaConfig=t;case 24:case"end":return e.stop()}},e,this,[[7,12]])}));return function(t){return e.apply(this,arguments)}}(),b.updateChannelMediaRelay=function(){var t=ue()(ce.a.mark(function t(n){var i,a;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b.channelMediaRelayController){t.next=2;break}throw new Ke.ChannelMediaError("RELAY_NOT_START",null,Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,b.channelMediaRelayController.updateChannelMediaRelay(n);case 5:t.next=18;break;case 7:throw t.prev=7,t.t0=t.catch(2),o.default.debug("[".concat(b.clientId,"] updateChannelMediaRelay exception: ").concat(JSON.stringify(e))),i=Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,a="",a=e instanceof Ke.ChannelMediaError?e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":e.message===Ke.CHANNEL_MEDIA_ERROR.WS_ABORT||e.message===Ke.CHANNEL_MEDIA_ERROR.AP_REQUEST_ABORT?"OPERATION_ABORT":"INTERNAL_ERROR":"INTERNAL_ERROR",b.dispatchEvent({type:"channel-media-relay-event",code:Ke.CHANNEL_MEDIA_RELAY_EVENT.PACKET_UPDATE_DEST_CHANNEL_REFUSED}),b.dispatchEvent({type:"channel-media-relay-state",state:i,code:Ke.CHANNEL_MEDIA_RELAY_ERROR[a]}),b.channelMediaRelayController&&(b.channelMediaRelayController.dispose(),b.channelMediaConfig=null,b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new Ke.ChannelMediaError(a,null,Ke.CHANNEL_MEDIA_RELAY_ERROR[a]);case 18:b.channelMediaConfig=n;case 19:case"end":return t.stop()}},t,this,[[2,7]])}));return function(e){return t.apply(this,arguments)}}(),b.stopChannelMediaRelay=ue()(ce.a.mark(function t(){var n,i;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(b.channelMediaRelayController){t.next=2;break}throw new Ke.ChannelMediaError("RELAY_NOT_START",null,Ke.CHANNEL_MEDIA_RELAY_ERROR.RELAY_NOT_START);case 2:return t.prev=2,t.next=5,b.channelMediaRelayController.stopChannelMediaRelay();case 5:t.next=17;break;case 7:throw t.prev=7,t.t0=t.catch(2),o.default.debug("[".concat(b.clientId,"] stopChannelMediaRelay exception: ").concat(JSON.stringify(e))),n=Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_FAILURE,i="",i=e instanceof Ke.ChannelMediaError?e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_TIMEOUT||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_TIMEOUT?"SERVER_NO_RESPONSE":e.message===Ke.CHANNEL_MEDIA_ERROR.REQUEST_FAILED||e.message===Ke.CHANNEL_MEDIA_ERROR.WAIT_STATUS_ERROR?"SERVER_ERROR_RESPONSE":"INTERNAL_ERROR":"INTERNAL_ERROR",b.dispatchEvent({type:"channel-media-relay-state",state:n,code:Ke.CHANNEL_MEDIA_RELAY_ERROR[i]}),b.channelMediaRelayController&&(b.channelMediaRelayController.dispose(),b.channelMediaConfig=null,b.channelMediaRelayController=null),b.dispatchEvent({type:"channel-media-relay-state",state:Ke.CHANNEL_MEDIA_RELAY_STATE.RELAY_STATE_IDLE}),new Ke.ChannelMediaError(i,null,Ke.CHANNEL_MEDIA_RELAY_ERROR[i]);case 17:b.channelMediaConfig=null,b.channelMediaRelayController=null;case 19:case"end":return t.stop()}},t,this,[[2,7]])}));var A=function(){o.default.debug("[".concat(b.clientId,"] Reconnect gateway")),b.state=h,b.socket.close(),O(),b.reconnectMode="recover",b.state=_,C()};b.recover=A;var O=function(){for(var e in b.dispatchEvent({type:"before-clear-connection"}),b.timers)b.timers.hasOwnProperty(e)&&clearInterval(b.timers[e]);for(var e in b.remoteStreams)if(b.remoteStreams.hasOwnProperty(e)){var t=b.remoteStreams[e],n=l({type:"stream-removed",uid:t.getId(),stream:t});b.dispatchEvent(n)}b.p2ps.clear(),D(),k(),clearInterval(b.pingTimer)};b.rejoin=function(){b.socket&&(clearInterval(b.pingTimer),b.socket.close(),b.socket=void 0),b.state=_,C()};var C=function(e,t){b.dispatchEvent(l({type:"rejoin-start"})),e=e||function(e){o.default.info("[".concat(b.clientId,"] User ").concat(e," is re-joined to ").concat(b.joinInfo.cname)),b.dispatchEvent(l({type:"rejoin"})),b.channelMediaConfig&&b.startChannelMediaRelay(b.channelMediaConfig).then(function(){o.default.debug("[".concat(b.clientId,"] restartChannelMediaRelay success"))}).catch(function(e){o.default.debug("[".concat(b.clientId,"] restartChannelMediaRelay failed: ").concat(JSON.stringify(e)))}),b.liveStreams&&b.liveStreams.size&&b.liveStreams.forEach(function(e,t){e&&b.setLiveTranscoding(b.transcoding),b.startLiveStreaming(t,e)}),b.injectLiveStreams&&b.injectLiveStreams.size&&b.injectLiveStreams.forEach(function(e,t){b.addInjectStreamUrl(t,e)})},t=t||function(e){o.default.error("[".concat(b.clientId,"] Re-join to channel failed "),e),b.dispatchEvent(u({type:"error",reason:e}))},b.key?(++b.rejoinAttempt,b.join(b.joinInfo,b.key,e,t)):o.default.error("[".concat(b.clientId,"] Connection recover failed [Invalid channel key]"))},N=function(e,t,n){if(b.onConnect=t,b.socket){if(b.dispatchEvent({type:"reconnect"}),"retry"===b.reconnectMode)o.default.debug("[".concat(b.clientId,"] Retry current gateway")),b.socket.reconnect();else if("tryNext"===b.reconnectMode)o.default.debug("[".concat(b.clientId,"] Try next gateway")),b.socket.connectNext();else if("recover"===b.reconnectMode){o.default.debug("[".concat(b.clientId,"] Recover gateway")),o.default.debug("[".concat(b.clientId,"] Try to reconnect choose server and get gateway list again ")),b.reconnectingCS=!0;var a=b.joinInfo&&b.joinInfo.sid;ft(b.joinInfo,function(e){o.default.debug("[".concat(b.clientId,"] session:  ").concat(a," get gateway list success")),b.joinInfo.apResponse=e.res,b.reconnectingCS?b.socket.replaceHost(e.gateway_addr):o.default.debug("[".concat(b.clientId,"] session:  ").concat(a," already leave"))})}}else c=e.gatewayAddr,b.socket=at(c,{sid:b.joinInfo.sid,clientId:b.clientId}),b.socket.on("start-connection",function(e){b.ticket=e&&e.msg&&e.msg.ticket}),b.socket.on("on_uplink_stats",function(e){var t={};for(var n in e)t[yt(n)]=e[n];if(b.OutgoingAvailableBandwidth=t.uplink_available_bandwidth,b.localStreams[b.uid]){var i=b.localStreams[b.uid].uplinkStats;i&&i.period_fir===t.period_fir||o.default.debug("[".concat(b.clientId,"]: Period fir change to: ").concat(t.period_fir)),b.localStreams[b.uid].uplinkStats=t}}),b.socket.on("connect",function(){b.dispatchEvent({type:"connected"}),b.attemps=1,b.onConnect()}),b.socket.on("recover",function(){b.state=_,o.default.debug("[".concat(b.clientId,"] Try to reconnect choose server and get gateway list again ")),b.reconnectingCS=!0,b.leaveOnConnected=null;var e=b.joinInfo&&b.joinInfo.sid;ft(b.joinInfo,function(t){o.default.debug("[".concat(b.clientId,"] session:  ").concat(e," get gateway list success")),b.reconnectingCS?b.socket.replaceHost(t.gateway_addr):o.default.debug("[".concat(b.clientId,"] session:  ").concat(e," already leave"))})}),b.socket.on("disconnect",function(e){if(o.default.debug("[".concat(b.clientId,"] Receive disconnect message")),b.state!==h){b.state=h;var t=u({type:"error",reason:V.SOCKET_DISCONNECTED});if(b.dispatchEvent(t),0===b.p2ps.size?b.reconnectMode="tryNext":b.reconnectMode="retry",O(),b.channelMediaRelayController&&b.channelMediaRelayController.dispose(),b.channelMediaRelayController=null,1!=i){var n,a=(n=b.attemps,1e3*Math.min(30,Math.pow(2,n)-1));if(o.default.error("[".concat(b.clientId,"] Disconnect from server [").concat(JSON.stringify(e),"], attempt to recover [#").concat(b.attemps,"] after ").concat(a/1e3," seconds")),b.hasInvokeLeave)return o.default.debug("[".concat(b.clientId,"] No reconnection becase client.leave has been invoked")),void(b.hasInvokeLeave=!1);setTimeout(function(){b.attemps++,b.state=_,b.inChannelInfo&&Date.now()-b.inChannelInfo.joinAt>Object(r.getParameter)("TICKET_RENEW_TIMEOUT")?(o.default.debug("Recovering to renew ticket"),A()):C()},a)}}}),b.socket.on("on_add_audio_stream",function(e){if(o.default.info("[".concat(b.clientId,"] Newly added audio stream with uid ").concat(e.uid)),b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),b.remoteStreamsInChannel.has(e.uid)||b.remoteStreamsInChannel.add(e.uid),void 0===b.remoteStreams[e.uid]){var t=Ye({streamID:e.uid,local:!1,audio:e.audio,video:e.video});t.peerMuteVideo=!0,b.remoteStreams[e.uid]=t;var n=u({type:"stream-added",stream:t});b.dispatchEvent(n);var i=b.remoteMuteState[e.uid];if(i&&i.audio){n=l({type:"mute-audio",uid:e.uid});b.dispatchEvent(n)}if(i&&i.video){n=l({type:"mute-video",uid:e.uid});b.dispatchEvent(n)}}}),b.socket.on("on_update_stream",function(e){var t=b.remoteStreams[e.uid];if(b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),t){t.audio=e.audio,t.video=e.video,t.screen=e.screen,t.pc&&b._adjustPCMuteStatus(t);var n=u({type:"stream-updated",stream:t});b.dispatchEvent(n)}else o.default.debug("[".concat(b.clientId,"] Ignoring onUpdateStream event before onAddStream for uid ").concat(e.uid))}),b.socket.on("on_add_video_stream",function(e){if(o.default.info("[".concat(b.clientId,"] Newly added remote stream with uid ").concat(e.uid,".")),b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),b.remoteStreamsInChannel.has(e.uid)||b.remoteStreamsInChannel.add(e.uid),void 0===b.remoteStreams[e.uid]){var t=Ye({streamID:e.uid,local:!1,audio:e.audio,video:e.video});b.remoteStreams[e.uid]=t;var n=u({type:"stream-added",stream:t});b.dispatchEvent(n);var i=b.remoteMuteState[e.uid];if(i&&i.audio){n=l({type:"mute-audio",uid:e.uid});b.dispatchEvent(n)}if(i&&i.video){n=l({type:"mute-video",uid:e.uid});b.dispatchEvent(n)}}else{var a=b.remoteStreams[e.uid];if(void 0!==a.stream){if((t=b.remoteStreams[e.uid]).video=!0,t.peerMuteVideo=!1,t.pc&&b._adjustPCMuteStatus(t),o.default.info("[".concat(b.clientId,"] Stream changed: enable video ").concat(e.uid)),t.isPlaying()){var r=t.player.elementID;t.stop(),t.play(r,t.playOptions)}}else if(a.p2pId)b.remoteStreams[e.uid].video=!0;else{t=Ye({streamID:e.uid,local:!1,audio:!0,video:!0});b.remoteStreams[e.uid]=t,o.default.info("[".concat(b.clientId,"] Stream changed: modify video ").concat(e.uid))}}}),b.socket.on("on_remove_stream",function(e){b.remoteStreamsInChannel.has(e.uid)&&b.remoteStreamsInChannel.delete(e.uid);var t=b.remoteStreams[e.uid];if(t){delete b.remoteStreams[e.uid],delete b.remoteMuteState[e.uid];var n=u({type:"stream-removed",stream:t});b.dispatchEvent(n),t.close(),void 0!==t.pc&&(t.pc.close(),t.pc=void 0,b.p2ps.delete(t.p2pId))}else o.default.error("ERROR stream ",e.uid," not found onRemoveStream ",e)}),b.socket.on("on_publish_stream",function(e){var t=b.localStreams[e.uid],n=u({type:"streamPublished",stream:t});b.dispatchEvent(n)}),b.socket.on("mute_audio",function(e){o.default.info("[".concat(b.clientId,"] rcv peer mute audio: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].audio=!0;var t=l({type:"mute-audio",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteAudio=!0,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("unmute_audio",function(e){o.default.info("[".concat(b.clientId,"] rcv peer unmute audio: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].audio=!1;var t=l({type:"unmute-audio",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteAudio=!1,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("mute_video",function(e){o.default.info("[".concat(b.clientId,"] rcv peer mute video: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].video=!0;var t=l({type:"mute-video",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteVideo=!0,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("unmute_video",function(e){o.default.info("[".concat(b.clientId,"] rcv peer unmute video: ").concat(e.uid)),b.remoteMuteState[e.uid]=b.remoteMuteState[e.uid]||{audio:!1,video:!1},b.remoteMuteState[e.uid].video=!1;var t=l({type:"unmute-video",uid:e.uid}),n=b.remoteStreams[e.uid];n?(n.peerMuteVideo=!1,n.pc&&b._adjustPCMuteStatus(n),b.dispatchEvent(t)):o.default.debug("Ignoring event ".concat(e.type),e)}),b.socket.on("on_crypt_error",function(e){o.default.warning("[".concat(b.clientId,"] stream crypt error"));var t=l({type:"crypt-error",cryptType:e.crypt_type});b.dispatchEvent(t)}),b.socket.on("on_user_banned",function(e){o.default.info("[".concat(b.clientId,"] user banned uid: ").concat(e.uid," error: ").concat(e.error_code));var t=l({type:"client-banned",uid:e.uid,attr:e.error_code});b.dispatchEvent(t),i=!0}),b.socket.on("on_stream_fallback_update",function(e){o.default.info("[".concat(b.clientId,"] stream fallback peerId: ").concat(e.stream_id," type: ").concat(e.stream_type));var t=l({type:"stream-fallback",uid:e.stream_id,stream:e.stream_id,attr:e.stream_type});b.dispatchEvent(t)}),b.socket.on("stream_recover",function(e){o.default.info("[".concat(b.clientId,"] stream recover uid: ").concat(e.id," peerId: ").concat(e.peerid," type: ").concat(e.type));var t=l({type:"stream-recover",uid:e.id,stream:e.peerid,attr:e.type});b.dispatchEvent(t)}),b.socket.on("on_p2p_lost",function(e){o.default.debug("[".concat(b.clientId,"] p2plost: "),e,"p2ps:",b.p2ps);var t,n="DTLS failed";(t=b.localStreams[e.uid]||b.remoteStreams[e.uid])?(t.pc&&t.pc.offerCandidates&&0===t.pc.offerCandidates.length&&(n="NO_CANDIDATES_IN_OFFER"),"publish"===e.event&&s.b.publish(b.joinInfo.sid,{lts:t.publishLTS,succ:!1,audioName:t.hasAudio()&&t.audioName,videoName:t.hasVideo()&&t.videoName,screenName:t.hasScreen()&&t.screenName,ec:n}),"subscribe"===e.event&&s.b.subscribe(b.joinInfo.sid,{lts:t.subscribeLTS,succ:!1,video:t.subscribeOptions&&t.subscribeOptions.video,audio:t.subscribeOptions&&t.subscribeOptions.audio,peerid:e.uid+"",ec:n})):o.default.warning("P2PLost Stream Not found",e),o.default.debug("[".concat(b.clientId,"] p2plost:"),e.p2pid),(t=b.p2ps.get(e.p2pid))&&(b.p2ps.delete(e.p2pid),t.local?b.dispatchEvent(l({type:"pubP2PLost",stream:t,attr:n})):b.remoteStreams[t.getId()]&&b.dispatchEvent(l({type:"subP2PLost",stream:t,attr:n})))}),b.socket.on("on_token_privilege_will_expire",function(e){o.default.debug("[".concat(b.clientId,"] Received Message onTokenPrivilegeWillExpire")),b.dispatchEvent(l({type:"onTokenPrivilegeWillExpire"}))}),b.socket.on("on_token_privilege_did_expire",function(){o.default.warning("[".concat(b.clientId,"] Received Message onTokenPrivilegeDidExpire, please get new token and join again")),b.closeGateway(),b.dispatchEvent(l({type:"onTokenPrivilegeDidExpire"}))}),b.socket.on("enable_local_video",function(e){b.dispatchEvent(l({type:"enable-local-video",uid:e.uid}))}),b.socket.on("disable_local_video",function(e){b.dispatchEvent(l({type:"disable-local-video",uid:e.uid}))}),b._doWithAction=function(e,t,n){"tryNext"===e?function(e,t){o.default.debug("[".concat(b.clientId,"] Connect next gateway")),b.state=h,b.socket.close(),O(),b.reconnectMode="tryNext",C(e,t)}(t,n):"retry"===e?function(e,t){o.default.debug("[".concat(b.clientId,"] Reconnect gateway")),b.state=h,b.socket.close(),O(),b.reconnectMode="retry",C(e,t)}(t,n):"quit"===e?(o.default.debug("[".concat(b.clientId,"] quit gateway")),b.state=h,b.socket.close(),O()):"recover"===e&&A()},b.socket.on("on_notification",function(e){if(o.default.debug("[".concat(b.clientId,"] Receive notification: "),e),"ERR_JOIN_BY_MULTI_IP"===y[e.code])return b.dispatchEvent({type:"onMultiIP",option:e.option});e.detail?b._doWithAction(vt[y[e.code]]):e.action&&b._doWithAction(e.action)}),b.socket.on("on_user_offline",function(e){var t=l({type:"peer-leave",uid:e.uid});if(b.remoteStreamsInChannel.has(e.uid)&&b.remoteStreamsInChannel.delete(e.uid),b.remoteStreams.hasOwnProperty(e.uid)&&(t.stream=b.remoteStreams[e.uid]),t.reason=e.reason,b.dispatchEvent(t),b.remoteStreams.hasOwnProperty(e.uid)){o.default.info("[".concat(b.clientId,"] closing stream on peer leave"),e.uid);var n=b.remoteStreams[e.uid];n.close(),delete b.remoteStreams[e.uid],void 0!==n.pc&&(n.pc.close(),n.pc=void 0,b.p2ps.delete(n.p2pId))}b.timers.hasOwnProperty(e.uid)&&(clearInterval(b.timers[e.uid]),clearInterval(b.timers[e.uid]+"_RelatedStats"),delete b.timers[e.uid]),null!=b.audioLevel[e.uid]&&delete b.audioLevel[e.uid],null!=b.timer_counter[e.uid]&&delete b.timer_counter[e.uid]}),b.socket.on("onUplinkStats",function(e){}),b.socket.on("liveStreamingStarted",function(e){var t=f({type:"liveStreamingStarted",url:e.url});b.dispatchEvent(t)}),b.socket.on("liveStreamingFailed",function(e){var t=f({type:"liveStreamingFailed",url:e.url});b.dispatchEvent(t)}),b.socket.on("liveStreamingStopped",function(e){var t=f({type:"liveStreamingStopped",url:e.url});b.dispatchEvent(t)}),b.socket.on("liveTranscodingUpdated",function(e){var t=f({type:"liveTranscodingUpdated",reason:e.reason});b.dispatchEvent(t)}),b.socket.on("streamInjectedStatus",function(e){var t=f({type:"streamInjectedStatus",url:e.url,uid:e.uid,status:e.status});b.dispatchEvent(t)}),b.socket.on("on_user_online",function(e){b.joinInfo.stringUid&&"string"!=typeof e.uid&&o.default.error("StringUID is Mixed with UintUID"),b.dispatchEvent({type:"peer-online",uid:e.uid})});var c},w=function(e,t){if(void 0!==b.socket)try{b.socket.emitSimpleMessage(e,function(e,n){t&&t(e,n)})}catch(e){o.default.error("[".concat(b.clientId,"] Error in sendSimpleSdp [").concat(e,"]"))}else o.default.error("[".concat(b.clientId,"] Error in sendSimpleSdp [socket not ready]"))},k=function(){for(var e in b.localStreams)if(void 0!==b.localStreams[e]){var t=b.localStreams[e];delete b.localStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}},D=function(){for(var e in b.remoteStreamsInChannel.clear(),b.remoteStreams)if(b.remoteStreams.hasOwnProperty(e)){var t=b.remoteStreams[e];t.isPlaying()&&t.stop(),t.close(),delete b.remoteStreams[e],void 0!==t.pc&&(t.pc.close(),t.pc=void 0)}};return b},bt={_gatewayClients:{},register:function(e,t){if(!t.uid){var n="NO_UID_PROVIDED";return o.default.error("[".concat(e.clientId,"] "),n,t),n}if(t.cname){if(this._gatewayClients[t.cname]&&this._gatewayClients[t.cname][t.uid]&&this._gatewayClients[t.cname][t.uid]!==e){n="UID_CONFLICT";return o.default.error("[".concat(e.clientId,"] "),n,t),n}return o.default.debug("[".concat(e.clientId,"] register client Channel"),t.cname,"Uid",t.uid),this._gatewayClients[t.cname]||(this._gatewayClients[t.cname]={}),this._gatewayClients[t.cname][t.uid]=e,null}var n="NO_CHANNEL_PROVIDED";return o.default.error("[".concat(e.clientId,"] "),n,t),n},unregister:function(e){var t=e&&e.uid,n=e.joinInfo&&e.joinInfo.cname;if(!t||!n){var i="INVALID_GATEWAYCLIENT";return o.default.error("[".concat(e.clientId,"] "),i),i}if(this._gatewayClients[n]&&this._gatewayClients[n][t]){if(this._gatewayClients[n][t]!==e){i="GATEWAYCLIENT_UID_CONFLICT";return o.default.error("[".concat(e.clientId,"] "),i),i}return o.default.debug("[".concat(e.clientId,"] unregister client "),e.uid),delete this._gatewayClients[n][t],null}var i="GATEWEAY_CLIENT_UNREGISTERED";o.default.error("[".concat(e.clientId,"] "),i)}};Tt.DISCONNECTED=0,Tt.CONNECTING=1,Tt.CONNECTED=2,Tt.DISCONNECTING=3,Tt.connetionStateMap={0:"DISCONNECTED",1:"CONNECTING",2:"CONNECTED",3:"DISCONNECTING"};var Rt=Tt,At=function(e){var t;switch(e){case"120p":case"120p_1":t=["120p_1","120p_1","120p_1"];break;case"120p_3":t=["120p_3","120p_3","120p_3"];break;case"180p":case"180p_1":t=["90p_1","90p_1","180p_1"];break;case"180p_3":t=["120p_3","120p_3","180p_3"];break;case"180p_4":t=["120p_1","120p_1","180p_4"];break;case"240p":case"240p_1":t=["120p_1","120p_1","240p_1"];break;case"240p_3":t=["120p_3","120p_3","240p_3"];break;case"240p_4":t=["120p_4","120p_4","240p_4"];break;case"360p":case"360p_1":case"360p_4":case"360p_9":case"360p_10":case"360p_11":t=["90p_1","90p_1","360p_1"];break;case"360p_3":case"360p_6":t=["120p_3","120p_3","360p_3"];break;case"360p_7":case"360p_8":t=["120p_1","120p_1","360p_7"];break;case"480p":case"480p_1":case"480p_2":case"480p_4":case"480p_10":t=["120p_1","120p_1","480p_1"];break;case"480p_3":case"480p_6":t=["120p_3","120p_3","480p_3"];break;case"480p_8":case"480p_9":t=["120p_4","120p_4","480p_8"];break;case"720p":case"720p_1":case"720p_2":case"720p_3":t=["90p_1","90p_1","720p_1"];break;case"720p_5":case"720p_6":t=["120p_1","120p_1","720p_5"];break;case"1080p":case"1080p_1":case"1080p_2":case"1080p_3":case"1080p_5":t=["90p_1","90p_1","1080p_1"];break;case"1440p":case"1440p_1":case"1440p_2":t=["90p_1","90p_1","1440p_1"];break;case"4k":case"4k_1":case"4k_3":t=["90p_1","90p_1","4k_1"];break;default:t=["120p_1","120p_1","360p_7"]}return Object(m.isOpera)()?[e,15,50]:Object(m.isFireFox)()?[t[1],15,100]:Object(m.isSafari)()?[t[2],15,50]:[t[0],15,50]},Ot={1001:"FRAMERATE_INPUT_TOO_LOW",1002:"FRAMERATE_SENT_TOO_LOW",1003:"SEND_VIDEO_BITRATE_TOO_LOW",1005:"RECV_VIDEO_DECODE_FAILED",2001:"AUDIO_INPUT_LEVEL_TOO_LOW",2002:"AUDIO_OUTPUT_LEVEL_TOO_LOW",2003:"SEND_AUDIO_BITRATE_TOO_LOW",2005:"RECV_AUDIO_DECODE_FAILED",3001:"FRAMERATE_INPUT_TOO_LOW_RECOVER",3002:"FRAMERATE_SENT_TOO_LOW_RECOVER",3003:"SEND_VIDEO_BITRATE_TOO_LOW_RECOVER",3005:"RECV_VIDEO_DECODE_FAILED_RECOVER",4001:"AUDIO_INPUT_LEVEL_TOO_LOW_RECOVER",4002:"AUDIO_OUTPUT_LEVEL_TOO_LOW_RECOVER",4003:"SEND_AUDIO_BITRATE_TOO_LOW_RECOVER",4005:"RECV_AUDIO_DECODE_FAILED_RECOVER"},Ct={FramerateInput:1001,FramerateSent:1002,SendVideoBitrate:1003,VideoDecode:1005,AudioIntputLevel:2001,AudioOutputLevel:2002,SendAudioBitrate:2003,AudioDecode:2005},Nt=function(e){var t={remoteStreamStorage:{},localStreamStorage:{}};return t.gatewayClient=e,t.checkAudioOutputLevel=function(e){return!(e&&parseInt(e.audioRecvBytesDelta)>0&&parseInt(e.audioDecodingNormalDelta)>0&&0===parseInt(e.audioOutputLevel))},t.checkAudioIntputLevel=function(e){return!e||0!==parseInt(e.audioInputLevel)},t.checkFramerateInput=function(e,t){if(!e||!t.attributes)return!0;var n=parseInt(t.attributes.maxFrameRate),i=parseInt(e.googFrameRateInput);return!n||!i||!(n>10&&i<5||n<10&&n>=5&&i<=1)},t.checkFramerateSent=function(e){return!(e&&parseInt(e.googFrameRateInput)>5&&parseInt(e.googFrameRateSent)<=1)},t.checkSendVideoBitrate=function(e){return!e||0!==parseInt(e.videoSendBytesDelta)},t.checkSendAudioBitrate=function(e){return!e||0!==parseInt(e.audioSendBytesDelta)},t.checkVideoDecode=function(e){return!e||0===parseInt(e.videoRecvBytesDelta)||0!==parseInt(e.googFrameRateDecoded)},t.checkAudioDecode=function(e){return!e||0===parseInt(e.audioRecvBytesDelta)||0!==parseInt(e.audioDecodingNormalDelta)},t.record=function(e,n,i,a,r){i[e]||(i[e]={isPrevNormal:!0,record:[]});var o=i[e],s=t["check"+e](n,r);if(o.record.push(s),o.record.length>=5){o.isCurNormal=-1!==o.record.indexOf(!0);var c=Ct[e];o.isPrevNormal&&!o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c,msg:Ot[c],uid:a}),!o.isPrevNormal&&o.isCurNormal&&t.gatewayClient.dispatchEvent({type:"exception",code:c+2e3,msg:Ot[c+2e3],uid:a}),o.isPrevNormal=o.isCurNormal,o.record=[]}},t.setLocalStats=function(e){var n={};Object.keys(e).map(function(i){var a=e[i],r=t.gatewayClient.localStreams[parseInt(i)],o=t.localStreamStorage[i]||{};r&&r.hasVideo()&&(t.record("SendVideoBitrate",a.videoStats,o,i),t.record("FramerateInput",a.videoStats,o,i,r),t.record("FramerateSent",a.videoStats,o,i)),r&&r.hasAudio()&&(t.record("AudioIntputLevel",a.audioStats,o,i),t.record("SendAudioBitrate",a.audioStats,o,i)),n[i]=o}),t.localStreamStorage=n},t.setRemoteStats=function(n){var i={};Object.keys(n).map(function(a){var r=n[a],o=e.remoteStreams[a],s=t.remoteStreamStorage[a]||{};o&&o.hasVideo()&&o.isPlaying()&&t.record("VideoDecode",r.videoStats,s,a),o&&o.hasAudio()&&o.isPlaying()&&(t.record("AudioOutputLevel",r.audioStats,s,a),t.record("AudioDecode",r.audioStats,s,a)),i[a]=s}),t.remoteStreamStorage=i},t},wt=new function(){var e=c();return e.states={UNINIT:"UNINIT",INITING:"INITING",INITED:"INITED"},e.state=e.states.UNINIT,e.type=null,e.lastConnectedAt=null,e.lastDisconnectedAt=null,e.lastTypeChangedAt=null,e.networkChangeTimer=null,e._init=function(t,n){if(e.state=e.states.INITING,navigator.connection&&navigator.connection.addEventListener){var i=e._getNetworkInfo();e.type=i&&i.type,e.state=e.states.INITED,t&&t()}else e.state=e.states.UNINIT,n&&n("DO_NOT_SUPPORT")},e._getNetworkInfo=function(){return navigator.connection},e._reloadNetworkInfo=function(){var t=e._getNetworkInfo(),n=t&&t.type||"UNSUPPORTED",i=Date.now();if(n!==e.type){e.lastTypeChangedAt=i,"none"==n?e.lastDisconnectedAt=i:"none"==e.type&&(e.lastConnectedAt=i),e.type=n;var a={type:"networkTypeChanged",networkType:n};e.dispatchEvent(a)}},e.getStats=function(t,n){var i={},a=e._getNetworkInfo();a&&(i.NetworkType=a.type||"UNSUPPORTED"),setTimeout(function(){t(i)},0)},e._init(function(){navigator.connection.addEventListener("change",function(){e._reloadNetworkInfo()}),e.networkChangeTimer=setInterval(function(){e._reloadNetworkInfo()},5e3)},function(e){}),e},kt="DISCONNECTING",Dt="DISCONNECTED",Lt="CONNECTED",Mt="INIT",Pt=[],xt=(setInterval(function(){Date.now();Pt.forEach(function(e){for(var t=e.requests.length-1;t>=0;t--){var n=e.requests[t];n.timeoutCnt++,n.timeoutCnt>=15&&(e.requests.splice(t,1),n.promises.reject({reason:"TIMEOUT",code:499}))}})},1e3),1),Vt=1,Ut=1,jt=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,s,c,d,u;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uid,i=t.url,a=t.serviceName,s=t.sid,c=t.appId,d=t.cname,u=t.timeout,e.abrupt("return",new Promise(function(e,t){var l=!1,p=new XMLHttpRequest;p.open("POST",i,!0),p.setRequestHeader("Content-Type","application/json; charset=utf-8"),p.setRequestHeader("X-Packet-Service-Type","0"),p.setRequestHeader("X-Packet-URI","61"),p.onload=function(){if(!l){var n=null,i=null;try{n=JSON.parse(p.responseText)}catch(e){var a="Invalid text ".concat(p.responseText);return o.default.error(a),l=!0,t(a)}if(n.code){var r="AP_ERR_".concat(n.code);return o.default.error(r,n),l=!0,t(r)}try{i=JSON.parse(n.json_body||n.json)}catch(e){var s="Invalid json_body ".concat(p.responseText);return o.default.error(s),l=!0,t(s)}if(200!==i.code){var c="APPCENTER_CODE_".concat(i.code);return o.default.error(c,i),l=!0,t(c)}if(!(i.servers&&i.servers.length>0)){return o.default.error("APPCENTER_EMPTY_SERVER",i),l=!0,t("APPCENTER_EMPTY_SERVER")}return l=!0,e(i)}},p.onerror=function(e){var n="AP_REUEST_".concat(e.type);o.default.error(n,i,e),l||(l=!0,t(n))},p.ontimeout=function(e){o.default.error("AP_REUEST_TIMEOUT",i,e),l||(l=!0,t("AP_REUEST_TIMEOUT"))},u&&(p.timeout=u),p.send(JSON.stringify({service_name:a,json_body:JSON.stringify({command:"convergeAllocateEdge",sid:s,uid:n+"",appId:c,ts:Math.floor(Date.now()/1e3),seq:xt++,cname:d,version:r.VERSION,requestId:Vt++})}))}));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),Ft=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,s,c,d,u,l,p,f,m,g;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.serviceName,i=t.sid,a=t.appId,s=t.cname,c=t.uid,d=null,e.t0=ce.a.keys(Object(r.getParameter)("UAP_AP"));case 3:if((e.t1=e.t0()).done){e.next=34;break}return u=e.t1.value,l="https://".concat(Object(r.getParameter)("UAP_AP")[u],"/api/v1?action=uap"),p=void 0,e.prev=7,e.next=10,jt({uid:c,url:l,appId:a,sid:i,serviceName:n,cname:s,timeout:Object(r.getParameter)("HTTP_CONNECT_TIMEOUT")});case 10:p=e.sent,e.next=18;break;case 13:return e.prev=13,e.t2=e.catch(7),o.default.error(e.t2),d=e.t2,e.abrupt("continue",3);case 18:f=ce.a.mark(function e(t){var i,a,r;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(i=p.servers[t],a="wss://".concat(i.address.replace(/\./g,"-"),".edge.").concat(t%2==0?"agora.io":"agoraio.cn",":").concat(i.wss,"?serviceName=").concat(encodeURIComponent(n)),i.wss){e.next=5;break}return o.default.error("Invalid server response",i),e.abrupt("return","continue");case 5:return e.prev=5,e.next=8,new Promise(function(e,t){var n=new WebSocket(a),i=!1;n.addEventListener("open",function(){i||(i=!0,e(n))}),n.addEventListener("error",function(e){i||(i=!0,t(e))})});case 8:return(r=e.sent).workerToken=p.workerToken,e.abrupt("return",{v:r});case 13:e.prev=13,e.t0=e.catch(5),o.default.error(e.t0),d=e.t0;case 17:case"end":return e.stop()}},e,this,[[5,13]])}),m=0;case 20:if(!(m<p.servers.length)){e.next=32;break}return e.delegateYield(f(m),"t3",22);case 22:g=e.t3,e.t4=g,e.next="continue"===e.t4?26:27;break;case 26:return e.abrupt("continue",29);case 27:if("object"!==He()(g)){e.next=29;break}return e.abrupt("return",g.v);case 29:m++,e.next=20;break;case 32:e.next=3;break;case 34:throw d;case 35:case"end":return e.stop()}},e,this,[[7,13]])}));return function(t){return e.apply(this,arguments)}}(),Bt={},Ht=function(e){return Bt[e]?(Bt[e]+=1,Bt[e]):(Bt[e]=1,Bt[e])},Wt={},Gt=function(e){return Wt[e]?(Wt[e]+=1,Wt[e]):(Wt[e]=1,Wt[e])},qt=function(e){var t=e.appId,n=e.cname,i=e.uid,a=e.sid,s=c();return s.status=Mt,s.pingpongTimer=null,s.connection=null,s.requests=[],s.appId=t,s.cname=n,s.uid=i,s.sid=a,s.connection=null,s.connectionId=Ut++,s.connect=function(){var e=ue()(ce.a.mark(function e(t){var n;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.wsClient,s.status===Mt){e.next=4;break}return o.default.debug("Ignored UapConnection.connect: ".concat(s.status)),e.abrupt("return");case 4:s.connection=n,s.status=Lt,s._flush(),s.startPingpong(),n.addEventListener("close",function(e){if(console.log("Weboskcet closed",e),n===s.connection){var t={type:"close",evt:e};s.dispatchEvent(t)}}),n.addEventListener("message",function(e){if(e.data){var t=null;try{t=JSON.parse(e.data)}catch(e){return void o.default.error("Invalid data from worker manager",t)}if(t.requestId)for(var n=s.requests.length-1;n>=0;n--){var i=s.requests[n];if(i.reqData.requestId===t.requestId){s.requests.splice(n,1),t.code<400&&t.code>=200?i.promises.resolve(t):i.promises.reject(t);break}}else t.type="notification",s.dispatchEvent(t)}});case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),s.disconnect=ue()(ce.a.mark(function e(){var t;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(t in s.status=kt,clearInterval(s.pingpongTimer),s.pingpongTimer=null,s.requests)s.requests[t].promises.reject("DISCONNECTED");return s.requests=[],null,s.connection&&(s.connection.close(),s.connection=null),s.status=Dt,e.abrupt("return",null);case 9:case"end":return e.stop()}},e,this)})),s.request=function(){var e=ue()(ce.a.mark(function e(t){var n,i,a,c;return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=S()({command:"request",sdkVersion:r.VERSION,seq:Gt(s.sid),appId:s.appId,cname:s.cname,uid:""+s.uid,sid:s.sid,requestId:Ht(s.sid),ts:Math.floor(Date.now()/1e3)},t),"INIT"!==s.status){e.next=5;break}return e.abrupt("return",new Promise(function(e,t){var i={reqData:n,stalledTs:Date.now(),timeoutCnt:0,promises:{resolve:e,reject:t}};s.requests.push(i)}));case 5:if(s.connection){e.next=11;break}throw i="NO_WEBSOCKET_CONNECTION",o.default.error(i),new Error(i);case 11:if(s.status!==kt||t.clientRequest&&"DestroyWorker"===t.clientRequest.command){e.next=17;break}throw a="WEBSOCKET_DISCONNECTING",o.default.error(a),new Error(a);case 17:if("DISCONNECTED"!==s.status){e.next=23;break}throw c="WEBSOCKET_DISCONNECTED",o.default.error(c),new Error(c);case 23:return e.abrupt("return",new Promise(function(e,t){var i={reqData:n,stalledTs:Date.now(),timeoutCnt:0,promises:{resolve:e,reject:t}};s.requests.push(i),s._flush()}));case 24:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),s._flush=function(){s.connection&&s.status===Lt&&s.requests.forEach(function(e){e.sentTs||(e.sentTs=Date.now(),e.reqData.clientRequest&&(e.reqData.clientRequest.workerToken=s.connection.workerToken),s.connection.send(JSON.stringify(e.reqData)))})},s.startPingpong=function(){clearInterval(s.pingpongTimer),s.pingpongTimer=setInterval(ue()(ce.a.mark(function e(){return ce.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(s.status!==Lt||!s.connection||1!==s.connection.readyState){e.next=9;break}return e.prev=1,e.next=4,s.request({command:"ping"});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.error("pingpong",e.t0);case 9:case"end":return e.stop()}},e,this,[[1,6]])})),6e3)},s._flush(),s.startPingpong(),Pt.push(s),s},Yt=function(e){e.disconnect();var t=Pt.find(function(t){return e.connectionId===t.connectionId});Pt.splice(t,1)},Jt=function(e){return"number"==typeof e&&0<=e&&e<=4294967295};var Kt=function(e){var t=e;if(Object(r.getParameter)("LIVESTREAMING_ALIGN"))switch(e){case 200:t=R;break;case 451:t=A;break;case 453:t=O;break;case 470:t=P;break;case 499:t=C;break;default:t=N}return t},zt=function(e){var t=e;if(Object(r.getParameter)("LIVESTREAMING_ALIGN"))switch(e){case 200:t=w;break;case 404:case 452:t=k;break;case 453:t=D;break;case 499:t=L;break;default:t=M}return t},Xt=function(e){var t={key:void 0,highStream:null,lowStream:null,lowStreamParameter:null,isDualStream:!1,highStreamState:2,lowStreamState:2,proxyServer:null};t.turnServer={mode:"auto",username:"test",credential:"111111",forceturn:Object(r.getParameter)("FORCE_TURN")},t.useProxyServer=!1,t.mode=e.mode,t.codec=e.codec,t.clientId=Object(ne.generateSessionId)().slice(0,5),t.uintUid=null;e=S()({},e);return t.aespassword=null,t.aesmode="none",t.hasPublished=!1,t.getSessionId=function(){return e.sessionId},t.startChannelMediaRelay=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return i&&i(e);i&&i()},name:"Client.startChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof Ke.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var r=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfos();if(Object(re.isEmpty)(r))throw"srcChannelMediaInfo should not be empty";if(Object(re.isEmpty)(o)||0===o.length)throw"destChannelMediaInfos should not be empty";if(!Object(ne.is32Uint)(r.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(re.isValidChannelName)(r.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(r.token&&!Object(re.isValidToken)(r.token))throw"Invalid token in srcChannelMediaInfo";if(o.forEach(function(e){if(!Object(ne.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(re.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(re.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"}),t.gatewayClient.state!==Rt.CONNECTED)throw"startChannelMediaRelay should be used after join";t.gatewayClient.startChannelMediaRelay(n).then(function(){a&&a()}).catch(function(e){a&&a(e)})},t.updateChannelMediaRelay=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return i&&i(e);i&&i()},name:"Client.updateChannelMediaRelay",options:arguments,tag:"tracer"});if(!(n instanceof Ke.ChannelMediaRelayConfiguration))throw"Configration should be instance of [ChannelMediaRelayConfiguration]";var r=n.getSrcChannelMediaInfo(),o=n.getDestChannelMediaInfos();if(Object(re.isEmpty)(r))throw"srcChannelMediaInfo should not be empty";if(Object(re.isEmpty)(o)||0===o.length)throw"destChannelMediaInfos should not be empty";if(!Object(ne.is32Uint)(r.uid))throw"Invalid uid in srcChannelMediaInfo";if(!Object(re.isValidChannelName)(r.channelName))throw"Invalid channelName in srcChannelMediaInfo";if(r.token&&!Object(re.isValidToken)(r.token))throw"Invalid token in srcChannelMediaInfo";if(o.forEach(function(e){if(!Object(ne.is32Uint)(e.uid))throw"Invalid uid in destChannelMediaInfo";if(!Object(re.isValidChannelName)(e.channelName))throw"Invalid channelName in destChannelMediaInfo";if(e.token&&!Object(re.isValidToken)(e.token))throw"Invalid token in destChannelMediaInfo"}),t.gatewayClient.state!==Rt.CONNECTED)throw"updateChannelMediaRelay should be used after join";t.gatewayClient.updateChannelMediaRelay(n).then(function(){a&&a()}).catch(function(e){a&&a(e)})},t.stopChannelMediaRelay=function(n){var i=s.b.reportApiInvoke(e.sessionId,{callback:function(e){if(e)return n&&n(e);n&&n()},name:"Client.stopChannelMediaRelay",options:arguments,tag:"tracer"});t.gatewayClient.stopChannelMediaRelay().then(function(){i&&i()}).catch(function(e){i&&i(e)})},t.getConnectionState=function(){var n=s.b.reportApiInvoke(e.sessionId,{name:"Client.getConnectionState",options:arguments,tag:"tracer"}),i=Rt.connetionStateMap[t.gatewayClient.state];return n(),i},t.setClientRole=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:i,name:"Client.setClientRole",options:arguments,tag:"tracer"});if(Object(re.checkValidEnum)(n,"setClientRole",["host","audience"]),"rtc"===t.mode){var r="RTC mode can not use setClientRole";return o.default.warning("[".concat(t.clientId,"] ").concat(r)),a&&a(r)}t.gatewayClient&&t.gatewayClient.state===Rt.CONNECTED?("audience"===n&&(0===this.highStreamState?this._unpublish(this.highStream,function(){a&&a(null,{role:n})},function(e){a&&a(e)}):t.gatewayClient.setClientRole("audience",a)),"host"===n&&t.gatewayClient.setClientRole("host",a)):(t.gatewayClient.role=n,a&&a(null,{role:n}))},t.getGatewayInfo=function(e){if(t.gatewayClient.state!==Rt.CONNECTED){var n="Client is not in connected state";return o.default.error("[".concat(t.clientId,"] ").concat(n)),void e(n)}t.gatewayClient.getGatewayInfo(function(t){e(null,t)},e)},t.renewToken=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return o.default.error("Failed to renew token ".concat(e),t),a&&a(e);i&&i(t)},name:"Client.renewToken",options:arguments,tag:"tracer"});if(!Object(re.isValidToken)(n))throw new Error("Invalid token: Token is of the string type .Length of the string: [1,255]. ASCII characters only.");return t.gatewayClient?t.key?(t.key=n,void t.gatewayClient.renewToken(n,function(e){return r(null,e)},r)):(o.default.error("[".concat(t.clientId,"] renewToken should not be called before user join")),r(V.INVALID_OPERATION)):(o.default.error("[".concat(t.clientId,"] renewToken Failed. GatewayClient not Exist")),r(V.INVALID_OPERATION))},t.setLowStreamParameter=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setLowStreamParameter",options:arguments,tag:"tracer"});Object(re.checkValidObject)(n,"param");var a=n.width,r=n.height,c=n.framerate,d=n.bitrate;Object(re.isEmpty)(a)||Object(re.checkValidNumber)(a,"width"),Object(re.isEmpty)(r)||Object(re.checkValidNumber)(r,"height"),Object(re.isEmpty)(c)||Object(re.checkValidNumber)(c,"framerate"),Object(re.isEmpty)(d)||Object(re.checkValidNumber)(d,"bitrate",1,1e7),(!a&&r||a&&!r)&&o.default.warning("[".concat(t.clientId,"] The width and height parameters take effect only when both are set")),t.lowStreamParameter=n,i()},t.init=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Client.init",options:arguments,tag:"tracer"});Object(re.checkValidString)(n),Object(m.isChromeKernel)()&&Object(m.getChromeKernelVersion)()<=48?a?r(V.BAD_ENVIRONMENT):Object(ne.popBanTip)():(o.default.info("[".concat(t.clientId,"] Initializing AgoraRTC client, appId: ").concat(n,".")),e.appId=n,e.sessionId=Object(ne.generateSessionId)(),r())},t.setTurnServer=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setTurnServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Set turn server before join channel");if(t.useProxyServer)throw new Error("You have already set the proxy");Object(re.checkValidObject)(n,"turnServer");var a=n.turnServerURL,r=n.username,c=n.password,d=n.udpport,u=n.forceturn,l=n.tcpport;Object(re.checkValidString)(a,"turnServerURL"),Object(re.checkValidString)(r,"username"),Object(re.checkValidString)(c,"password"),Object(re.checkValidString)(d,"udpport"),Object(re.isEmpty)(u)||Object(re.checkValidBoolean)(u,"forceturn"),t.turnServer.mode="manual",t.turnServer.url=a,t.turnServer.udpport=d,t.turnServer.username=r,t.turnServer.credential=c,t.turnServer.forceturn=u||!1,Object(re.isEmpty)(l)||(Object(re.checkValidString)(l,"tcpport"),t.turnServer.tcpport=l,o.default.info("[".concat(t.clientId,"] Set turnserver tcpurl. ").concat(t.turnServer.url,":").concat(t.turnServer.tcpport))),o.default.info("[".concat(t.clientId,"] Set turnserver udpurl. ").concat(t.turnServer.url,":").concat(t.turnServer.udpport,",username: ").concat(t.turnServer.uername,",password: ").concat(t.turnServer.credential)),i()},t.setProxyServer=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Set proxy server before join channel");if(!n)throw new Error("Do not set the proxyServer parameter as empty");if(t.useProxyServer)throw new Error("You have already set the proxy");Object(re.checkValidString)(n,"proxyServer"),t.proxyServer=n,s.b.setProxyServer(n),o.default.setProxyServer(n),i()},t.startProxyServer=function(){var n=s.b.reportApiInvoke(e.sessionId,{name:"Client.startProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Start proxy server before join channel");if(t.proxyServer||t.turnServer.url)throw new Error("You have already set the proxy");t.useProxyServer=!0,n()},t.stopProxyServer=function(){var n=s.b.reportApiInvoke(e.sessionId,{name:"Client.stopProxyServer",options:arguments,tag:"tracer"});if(t.gatewayClient&&t.gatewayClient.state!==Rt.DISCONNECTED)throw new Error("Stop proxy server after leave channel");s.b.setProxyServer(),o.default.setProxyServer(),t.turnServer={},t.proxyServer=null,t.useProxyServer=!1,n()},t.setEncryptionSecret=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionSecret",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"password"),t.aespassword=n,i()},t.setEncryptionMode=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.setEncryptionMode",options:arguments,tag:"tracer"});if(Object(re.checkValidString)(n,"encryptionMode"),-1===$e.indexOf(n))throw new Error('Invalid encryptionMode: encryptionMode should be "aes-128-xts" | "aes-256-xts" | "aes-128-ecb"');t.aesmode=n,i()},t.configPublisher=function(n){var i=s.b.reportApiInvoke(e.sessionId,{name:"Client.configPublisher",options:arguments,tag:"tracer"});Object(re.checkValidObject)(n,"config");var a=n.width,r=n.height,o=n.framerate,c=n.bitrate,d=n.publisherUrl;Object(re.checkValidNumber)(a,"width"),Object(re.checkValidNumber)(r,"height"),Object(re.checkValidNumber)(o,"framerate"),Object(re.checkValidNumber)(c,"bitrate",1,1e7),d&&Object(re.checkValidString)(d,"publisherUrl"),t.gatewayClient.configPublisher(n),i()},t.enableDualStream=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);n&&n(t)},name:"Client.enableDualStream",options:arguments,tag:"tracer"});return"iOS"===Object(m.getBrowserOS)()?(s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),a(V.IOS_NOT_SUPPORT)):Object(m.isWeChatBrowser)()?(s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!1}),a(V.WECHAT_NOT_SUPPORT)):(s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!0,succ:!0}),t.isDualStream=!0,t.highStream&&(t.highStream.isDualStream=!0),void(0===t.highStreamState?t._publishLowStream(function(e){return a(null,e)},function(e){o.default.warning("[".concat(t.clientId,"]"),e),a(V.ENABLE_DUALSTREAM_FAILED)}):1===t.highStreamState?a(V.STILL_ON_PUBLISHING):a(null)))},t.disableDualStream=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);n&&n(t)},name:"Client.disableDualStream",options:arguments,tag:"tracer"});s.b.streamSwitch(e.sessionId,{lts:(new Date).getTime(),isdual:!1,succ:!0}),t.isDualStream=!1,t.highStream&&(t.highStream.isDualStream=!1),0===t.highStreamState?t._unpublishLowStream(function(){t.highStream.lowStream=null,a()},function(e){o.default.warning("[".concat(t.clientId,"]"),e),a(V.DISABLE_DUALSTREAM_FAILED)}):1===t.highStreamState?a(V.STILL_ON_PUBLISHING):a()},t._createLowStream=function(e,n){if(t.highStream&&t.highStream.stream){var i=S()({},t.highStream.params);if(i.streamID+=1,i.audio=!1,i.video){var a=t.highStream.stream.getVideoTracks()[0];a?ae.getVideoCameraIdByLabel(a.label,function(a){i.cameraId=a;var s=new Ye(i);if(s.isLowStream=!0,s.streamId=t.highStream.getId()+1,t.lowStreamParameter){var c=S()({},t.lowStreamParameter);if(!c.width||!c.height){var d=At(t.highStream.profile),u=r.SUPPORT_RESOLUTION_LIST[d[0]];c.width=u[0],c.height=u[1]}if(c.framerate=c.framerate||5,c.bitrate=c.bitrate||50,Object(m.isSafari)()||Object(m.isOpera)()){o.default.debug("[".concat(t.clientId,"] Shimming lowStreamParameter"));u=r.SUPPORT_RESOLUTION_LIST[t.highStream.profile];c.width=u[0],c.height=u[1]}s.setVideoProfileCustomPlus(c)}else s.setVideoProfileCustom(At(t.highStream.profile));s.init(function(){t.highStream.lowStream=s,t.highStream.userMuteVideo&&s.muteVideo(),e&&e(s)},n)},n):n&&n(V.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(V.HIGH_STREAM_NOT_VIDEO_TRACE)}else n&&n(V.HIGH_STREAM_NOT_VIDEO_TRACE)},t._getLowStream=function(e,n){t.lowStream?e(t.lowStream):t._createLowStream(function(n){t.lowStream=n,e(t.lowStream)},n)},t._publishLowStream=function(e,n){return 2!==t.lowStreamState?n&&n(V.LOW_STREAM_ALREADY_PUBLISHED):t.highStream&&t.highStream.hasScreen()?n&&n(V.SHARING_SCREEN_NOT_SUPPORT):void t._getLowStream(function(i){t.lowStreamState=1,t.gatewayClient.publish(i,{streamType:1},function(){t.lowStreamState=0,e&&e()},function(e){1===t.lowStreamState&&(t.lowStreamState=2),o.default.debug("[".concat(t.clientId,"] publish low stream failed")),n&&n(e)})},n)},t._unpublishLowStream=function(e,n){if(0!==t.lowStreamState)return n&&n(V.LOW_STREAM_NOT_YET_PUBLISHED);t.lowStream&&(t.gatewayClient.unpublish(t.lowStream,{streamType:1},function(){},function(e){o.default.debug("[".concat(t.clientId,"] unpublish low stream failed")),n&&n(e)}),t.lowStream.close(),t.lowStream=null,t.lowStreamState=2,e&&e())},t.join=function(n,i,a,r,c){var d=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return c&&c(e);r&&r(t)},name:"Client.join",options:arguments,tag:"tracer"});if(n&&!Object(re.isValidToken)(n))return o.default.warning("[".concat(t.clientId,"] Param channelKey should be string")),d(V.INVALID_PARAMETER);if(!Object(re.isValidChannelName)(i))return o.default.error("Invalid Channel Name ".concat(i)),o.default.warning("[".concat(t.clientId,"] The length must be within 64 bytes. The supported characters: a-z,A-Z,0-9,space,!, #, $, %, &, (, ), +, -, :, ;, <, =, ., >, ?, @, [, ], ^, _,  {, }, |, ~, ,")),d(V.INVALID_PARAMETER);if("string"==typeof i&&""===i)return o.default.warning("[".concat(t.clientId,"] Param channel should not be empty")),d(V.INVALID_PARAMETER);if(a&&!Object(ne.is32Uint)(a)&&!Object(re.isValidString)(a,1,255))return o.default.error("Invalid UID ".concat(a," ").concat(He()(a))),o.default.warning("[".concat(t.clientId,"] [String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]")),d(V.INVALID_PARAMETER);if("string"==typeof a&&0==a.length)return o.default.warning("[".concat(t.clientId,"] String uid should not be empty")),d(V.INVALID_PARAMETER);if("string"==typeof a&&a.length>256)return o.default.warning("[".concat(t.clientId,"] Length of string uid should be less than 255")),d(V.INVALID_PARAMETER);t.highStream=null,t.lowStream=null,t.lowStreamParameter=null,t.isDualStream=!1,t.highStreamState=2,t.lowStreamState=2;var u={clientId:t.clientId,appId:e.appId,sid:e.sessionId,cname:i,uid:a,turnServer:t.turnServer,proxyServer:t.proxyServer,token:n||e.appId,useProxyServer:t.useProxyServer};if("string"==typeof a&&(u.stringUid=a,t.uintUid?(u.uid=t.uintUid,delete t.uintUid):u.uid=0),t.aespassword&&"none"!==t.aesmode&&S()(u,{aespassword:t.aespassword,aesmode:t.aesmode}),s.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),cname:i,appid:e.appId,mode:e.mode,succ:!0}),t.onSuccess=function(e){t.rtcStatsCollector.startNetworkQualityTimer(),t.onSuccess=null,d(null,e)},t.onFailure=function(e){return d(e)},t.channel=i,t.gatewayClient.state!==Rt.DISCONNECTED)return o.default.error("[".concat(t.clientId,"] Client already in connecting/connected state")),d(V.INVALID_OPERATION),void s.b.joinGateway(e.sessionId,{lts:Date.now(),succ:!1,ec:V.INVALID_OPERATION,addr:null});t.gatewayClient.state=Rt.CONNECTING;var l=function(a,r){o.default.info("[".concat(t.clientId,"] Joining channel: ").concat(i)),t.gatewayClient.dispatchEvent({type:"config-distribute",config:r,joinInfo:u}),t.key=n||e.appId,u.cid=a.cid,u.uid||(u.uid=a.uid),u.vid=a.vid,u.clientId=t.clientId,u.apResponse=a.res,a.uni_lbs_ip&&a.uni_lbs_ip[1]&&(u.uni_lbs_ip=a.uni_lbs_ip[1]),u.gatewayAddr=a.gateway_addr,t.joinInfo=u,t.gatewayClient.join(u,t.key,function(e){o.default.info("[".concat(t.clientId,"] Join channel ").concat(i," success, join with uid: ").concat(e,".")),t.onSuccess=null,t.rtcStatsCollector.startNetworkQualityTimer(),d(null,e)},function(e){return d(e)})};u.stringUid&&!u.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=gt(u,t.gatewayClient),t.userAccountReq.then(function(e){o.default.debug("getUserAccount Success ".concat(e.url," ").concat(u.stringUid," => ").concat(e.uid)),u.uid=e.uid,ft(u,l,function(e){return d(e)})}).catch(function(e){o.default.error("getUserAccount rejected",e),d(e)})):ft(u,l,function(e){return d(e)})},t.renewChannelKey=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e);i&&i(t)},name:"Client.renewChannelKey",options:arguments,tag:"tracer"});Object(re.checkValidString)(n,"key",1,2047),void 0===t.key?(o.default.error("[".concat(t.clientId,"] renewChannelKey should not be called before user join")),r(V.INVALID_OPERATION)):(t.key=n,t.gatewayClient.joinInfo.token=n,t.gatewayClient.key=n,t.gatewayClient.recover(),r())},t.leave=function(n,i){t.gatewayClient.hasInvokeLeave=!0;var a=!1,c=s.b.reportApiInvoke(e.sessionId,{callback:function(e,a){if(e)return i&&i(e);var r;t.gatewayClient.reconnectingCS=!1,clearTimeout((r=t.clientId,ut[r])),t._renewSession(),t.rtcStatsCollector.clearNetworkQualityTimer(),n&&n(a)},name:"Client.leave",options:arguments,tag:"tracer"});o.default.info("[".concat(t.clientId,"] Leaving channel")),t.userAccountReq&&!t.userAccountReq.isFinished()&&(t.userAccountReq.cancel(),t.gatewayClient.state===Rt.CONNECTING&&(t.gatewayClient.state=Rt.DISCONNECTED)),t.gatewayClient.leave(function(e){a=!0,c(null,e)},c),setTimeout(function(){a||(t.gatewayClient.socket&&(t.gatewayClient.socket.close(),t.gatewayClient.socket=null),t.gatewayClient.state=Rt.DISCONNECTED,c(null,"LEAVE_MSG_TIMEOUT"))},Object(r.getParameter)("LEAVE_MSG_TIMEOUT"))},t._renewSession=function(){var n=Object(ne.generateSessionId)();if(o.default.debug("renewSession ".concat(e.sessionId," => ").concat(n)),e.sessionId=n,t.joinInfo&&(t.joinInfo.sid=n),t.gatewayClient&&(t.gatewayClient.joinInfo&&(t.gatewayClient.joinInfo.sid=n),t.gatewayClient.localStreams))for(var i in t.gatewayClient.localStreams){var a=t.gatewayClient.localStreams[i];a&&(a.sid=n)}},t._publish=function(n,i,a,s){if(2!==t.highStreamState)return o.default.warning("[".concat(t.clientId,"] Can't publish stream when stream already publish ").concat(n.getId())),a&&a(V.STREAM_ALREADY_PUBLISHED);if("auto"===t.turnServer.mode&&Object(r.getParameter)("FORCE_TURN")&&!Object(r.getParameter)("TURN_ENABLE_TCP")&&!Object(r.getParameter)("TURN_ENABLE_UDP"))throw new Error("force TURN With No TURN Configuration");o.default.info("[".concat(t.clientId,"] Publishing stream, uid ").concat(n.getId())),t.highStream=n,t.highStreamState=1,t.highStream.streamId=t.joinInfo.stringUid||t.joinInfo.uid,t.hasPublished=!1;var c=function(n,i,a){t.gatewayClient.publish(n,{streamType:0},function(){n.sid=e.sessionId,t.highStreamState=0,o.default.info("[".concat(t.clientId,"] Publish success, uid: ").concat(n.getId())),t.highStream&&(t.highStream.isDualStream=t.isDualStream),t.isDualStream?t._publishLowStream(function(){i&&i()},function(e){o.default.warning("[".concat(t.clientId,"] "),e),Fe.replaceWithCanvasTrack(n),i&&i()}):(Fe.replaceWithCanvasTrack(n),i&&i())},a)};"audience"!==t.gatewayClient.role||"live"!==t.mode||s?c(n,i,a):t.gatewayClient.setClientRole("host",function(e){if(e)return a&&a(e);c(n,i,a)})},t._unpublish=function(e,n,i,a){if(0!==t.highStreamState)return o.default.warning("[".concat(t.clientId,"] Can't unpublish stream when stream not publish")),i&&i(V.STREAM_NOT_YET_PUBLISHED);o.default.info("[".concat(t.clientId,"] Unpublish stream, uid ").concat(e.getId()));var r=function(e,n,i){t.isDualStream&&t.lowStream&&t._unpublishLowStream(null,i),t.gatewayClient.unpublish(e,{streamType:0},function(){t.highStreamState=2,o.default.info("[".concat(t.clientId,"] Unpublish stream success, uid: ").concat(e.getId())),n&&n()},function(n){o.default.info("[".concat(t.clientId,"] Unpublish stream fail, uid: ").concat(e.getId())),i&&i(n)})};"host"!==t.gatewayClient.role||"live"!==t.mode||a?r(e,n,i):t.gatewayClient.setClientRole("audience",function(t){if(t)return i&&i(t);r(e,n,i)})},t.publish=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,n){if(e)return 1===t.highStreamState&&(t.highStreamState=2),i&&i(e)},name:"Client.publish",tag:"tracer",options:{stream:"too long to show",onFailure:!!i}});2===t.highStreamState?n._hasVideoTracks()||n._hasAudioTracks()?t._publish(n,function(e){return a(null,e)},function(e){return a(e)}):a(V.NO_TRACK_IN_STREAM):a(V.STREAM_ALREADY_PUBLISHED)},t.unpublish=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e);a&&a(t)},name:"Client.unpublish",tag:"tracer",options:{stream:"too long to show",onFailure:!!i}});0===t.highStreamState?t._unpublish(n,function(e){return r(null,e)},function(e){return r(e)}):r(V.STREAM_NOT_YET_PUBLISHED)},t.subscribe=function(n,i,a){var r=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return a&&a(e)},name:"Client.subscribe",tag:"tracer",options:{stream:"too long to show",options:i,onFailure:!!a}});"function"==typeof i&&(a=i,i=null),Object(re.checkValidObject)(n,"stream"),Object(re.isEmpty)(i)||(Object(re.checkValidObject)(i,"options"),Object(re.isEmpty)(i.video)||Object(re.checkValidBoolean)(i.video,"options.video"),Object(re.isEmpty)(i.audio)||Object(re.checkValidBoolean)(i.audio,"options.audio"));var c={video:!0,audio:!0};if(!Object(re.isEmpty)(i)){if(Object(m.isSafari)()&&(!i.video||!i.audio)){var d="SAFARI_NOT_SUPPORTED_FOR_TRACK_SUBSCRIPTION";return o.default.error("[".concat(t.clientId,"] "),d),void r(d)}if(!Object(re.isEmpty)(i.video)&&!Object(re.isValidBoolean)(i.video)||!Object(re.isEmpty)(i.audio)&&!Object(re.isValidBoolean)(i.audio)||!1===i.audio&&!1===i.video){d="INVALID_PARAMETER ".concat(JSON.stringify(i));return o.default.error("[".concat(t.clientId,"] "),d),void r(d)}}n.subscribeOptions?(S()(n.subscribeOptions,c,i),t.gatewayClient.subscribeChange(n,function(e){return r(null,e)},r)):(n.subscribeOptions=S()({},c,i),t.gatewayClient.subscribe(n,function(e){return r(null,e)},r))},t.unsubscribe=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{callback:function(e,t){if(e)return i&&i(e)},name:"Client.unsubscribe",tag:"tracer",options:{stream:"too long to show",onFailure:!!i}});o.default.info("[".concat(t.clientId,"] Unsubscribe stream, uid: ").concat(n.getId())),t.gatewayClient.unsubscribe(n,function(e){return a(null,e)},a)},t.setRemoteVideoStreamType=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{name:"Client.setRemoteVideoStreamType",tag:"tracer",options:{stream:"too long to show",streamType:i}});Object(re.checkValidEnum)(i,"streamType",[0,1]),t.gatewayClient.setRemoteVideoStreamType(n,i),a()},t.setStreamFallbackOption=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{name:"Client.setStreamFallbackOption",tag:"tracer",options:{stream:"too long to show",fallbackType:i}});Object(re.checkValidEnum)(i,"fallbackType",[0,1,2]),t.gatewayClient.setStreamFallbackOption(n,i),a()},t.enableAudioVolumeIndicator=function(n,i){var a=s.b.reportApiInvoke(e.sessionId,{name:"Client.enableAudioVolumeIndicator",options:arguments,tag:"tracer"});n=n||2e3,i=i||3,Object(re.checkValidNumber)(i,"smooth",1,100),Object(re.checkValidNumber)(n,"interval",50,1e5),t.audioVolumeIndication=t.audioVolumeIndication||{enabled:!0},t.audioVolumeIndication.interval=n,t.audioVolumeIndication.smooth=i,t.audioVolumeIndication={interval:n,smooth:i},o.default.info("[".concat(t.clientId,"] enableAudioVolumeIndicator interval ").concat(n," smooth ").concat(i)),t.gatewayClient.enableAudioVolumeIndicator(n,i),a()},t.getNetworkStats=function(e,n){return o.default.deprecate("[".concat(t.clientId,"] client.getNetworkStats is deprecated. Use client.getTransportStats instead.")),wt.getStats(e,n)},t.getSystemStats=function(e,t){return v.getStats(e,t)},t.getRecordingDevices=function(e,t){return ae.getRecordingDevices(e,t)},t.getPlayoutDevices=function(e,t){return ae.getPlayoutDevices(e,t)},t.getCameras=function(e,t){return ae.getCameras(e,t)},t.getRemoteAudioStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioStats(e,n)},t.getLocalAudioStats=function(e,n){return t.rtcStatsCollector.getLocalAudioStats(e,n)},t.getRemoteVideoStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoStats(e,n)},t.getLocalVideoStats=function(e,n){return t.rtcStatsCollector.getLocalVideoStats(e,n)},t._getRemoteVideoQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteVideoQualityStats(e,n)},t._getRemoteAudioQualityStats=function(e,n){return t.rtcStatsCollector.getRemoteAudioQualityStats(e,n)},t.getTransportStats=function(e,n){return t.rtcStatsCollector.getTransportStats(function(t){return wt.getStats(function(n){var i=S()({},t,n);e&&e(i)},n)},n)},t.getSessionStats=function(e,n){return t.rtcStatsCollector.getSessionStats(e,n)},t.onNetworkQuality=function(){return t.rtcStatsCollector.onNetworkQuality(onSuccess,onFailure)},e.clientId=t.clientId,t.gatewayClient=Rt(e),t.listenerLoggerTimer=null,t.listenerLoggerCache=[],t.on=function(e,n){t.gatewayClient.on(e,n),t.listenerLoggerCache.push("".concat(e).concat(n.name?":"+n.name:"")),t.listenerLoggerTimer?clearTimeout(t.listenerLoggerTimer):o.default.info("[".concat(t.clientId,"] Adding event handler on ").concat(e)),t.listenerLoggerTimer=setTimeout(function(){t.listenerLoggerCache.length&&(t.listenerLoggerTimer=null,o.default.info("[".concat(t.clientId,"] Added event handler on ").concat(t.listenerLoggerCache.join(", "))),t.listenerLoggerCache=[])},0)},t.off=function(e,n){o.default.info("remove event handler from [".concat(e,"]")),t.gatewayClient.removeEventListener(e,n)},t.rtcStatsCollector=function(e){var t=c();return t.gatewayClient=e,t.exceptionMonitor=new Nt(e),t.localStats={},t.remoteStats={},t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0},t.getRemoteAudioStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"End2EndDelay",r.peer_delay&&r.peer_delay.audio_delay),ie(a,"TransportDelay",r.peer_delay&&r.peer_delay.e2e_delay),ie(a,"PacketLossRate",r.peer_delay&&r.peer_delay.e2e_audio_lost_ratio_400ms),ie(a,"RecvLevel",r.audioStats&&r.audioStats.audioOutputLevel),ie(a,"RecvBitrate",r.audioRecvBitrate),ie(a,"CodecType",r.audioStats&&r.audioStats.googCodecName),ie(a,"MuteState",r.audioDisabled),ie(a,"TotalFreezeTime",r.audioStats&&r.audioStats.audioTotalFreezeTime),ie(a,"TotalPlayDuration",r.audioStats&&r.audioStats.audioTotalPlayDuration),n[i]=a}e&&e(n)},t.getLocalAudioStats=function(e){var n={};for(var i in t.localStats){var a={},r=t.localStats[i];ie(a,"RecordingLevel",r.audioStats&&r.audioStats.audioInputLevel),ie(a,"SendLevel",r.audioStats&&r.audioStats.totalAudioEnergy),ie(a,"SamplingRate",r.audioStats&&r.audioStats.totalSamplesDuration),ie(a,"SendBitrate",r.audioSendBitrate),ie(a,"CodecType",r.audioStats&&r.audioStats.googCodecName),ie(a,"MuteState",r.audioDisabled);var o=t.gatewayClient.localStreams[i];o&&o.isPlaying()&&ie(a,"MuteState",o.userMuteAudio?"1":"0"),n[i]=a}e&&e(n)},t.getRemoteVideoStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"End2EndDelay",r.peer_delay&&r.peer_delay.video_delay),ie(a,"TransportDelay",r.peer_delay&&r.peer_delay.e2e_delay),ie(a,"PacketLossRate",r.peer_delay&&r.peer_delay.e2e_video_lost_ratio_400ms),ie(a,"RecvBitrate",r.videoRecvBitrate),ie(a,"RecvResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthReceived),ie(a,"RecvResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightReceived),ie(a,"RenderResolutionWidth",r.videoStats&&r.videoStats.renderRemoteWidth),ie(a,"RenderResolutionHeight",r.videoStats&&r.videoStats.renderRemoteHeight),ie(a,"RenderFrameRate",r.videoStats&&r.videoStats.googFrameRateOutput),ie(a,"MuteState",r.videoDisabled),ie(a,"TotalFreezeTime",r.videoStats&&r.videoStats.videoTotalFreezeTime),ie(a,"TotalPlayDuration",r.videoStats&&r.videoStats.videoTotalPlayDuration),n[i]=a}e&&e(n)},t.getLocalVideoStats=function(e){var n={};for(var i in t.localStats){var a={},r=t.localStats[i];ie(a,"TargetSendBitrate",r.videoTargetSendBitrate),ie(a,"SendFrameRate",r.videoStats&&r.videoStats.googFrameRateSent),ie(a,"SendBitrate",r.videoSendBitrate),ie(a,"SendResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthSent),ie(a,"SendResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightSent),ie(a,"CaptureResolutionWidth",r.videoStats&&r.videoStats.googFrameWidthInput),ie(a,"CaptureResolutionHeight",r.videoStats&&r.videoStats.googFrameHeightInput),ie(a,"EncodeDelay",r.videoStats&&r.videoStats.googAvgEncodeMs),ie(a,"MuteState",r.videoDisabled),ie(a,"TotalFreezeTime",r.videoStats&&r.videoStats.videoTotalFreezeTime),ie(a,"TotalDuration",r.videoStats&&r.videoStats.videoTotalPlayDuration),ie(a,"CaptureFrameRate",r.videoStats&&r.videoStats.googFrameRateSent),r.videoStats&&!r.videoStats.googFrameWidthInput&&ie(a,"CaptureResolutionWidth",r.videoStats&&r.videoStats.renderLocalWidth),r.videoStats&&!r.videoStats.googFrameHeightInput&&ie(a,"CaptureResolutionHeight",r.videoStats&&r.videoStats.renderLocalHeight),n[i]=a,e&&e(n)}},t.getRemoteVideoQualityStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"videoReceiveDelay",r.videoStats&&r.videoStats.googCurrentDelayMs),ie(a,"VideoFreezeRate",r.videoStats&&r.videoStats.videoFreezeRate),ie(a,"FirstFrameTime",r.firstFrameTime),n[i]=a}e&&e(n)},t.getRemoteAudioQualityStats=function(e){var n={};for(var i in t.remoteStats){var a={},r=t.remoteStats[i];ie(a,"audioReceiveDelay",r.audioStats&&r.audioStats.googCurrentDelayMs),ie(a,"AudioFreezeRate",r.videoStats&&r.videoStats.videoFreezeRate),n[i]=a}e&&e(n)},t.getTransportStats=function(e){var n={},i={},a=t.gatewayClient.traffic_stats,r=a.peer_delay;if(ie(n,"OutgoingAvailableBandwidth",t.gatewayClient.OutgoingAvailableBandwidth/1e3),ie(n,"RTT",a&&a.access_delay),r){var o=!0,s=!1,c=void 0;try{for(var d,u=r[Symbol.iterator]();!(o=(d=u.next()).done);o=!0){var l=d.value;l.downlink_estimate_bandwidth&&(i[l.peer_uid]=l.downlink_estimate_bandwidth/1e3+"")}}catch(e){s=!0,c=e}finally{try{o||null==u.return||u.return()}finally{if(s)throw c}}}n.IncomingAvailableBandwidth=i,e&&e(n)},t.getSessionStats=function(e){var n={},i=t.gatewayClient.traffic_stats,a=t.gatewayClient.socket,r=0,o=0;for(var s in t.remoteStats)(c=t.remoteStats[s])&&c.videoStats&&c.videoStats.videoRecvBytesDelta&&(o+=parseInt(c.videoStats.videoRecvBytesDelta)),c&&c.audioStats&&c.audioStats.audioRecvBytesDelta&&(o+=parseInt(c.audioStats.audioRecvBytesDelta));for(var s in t.localStats){var c;(c=t.localStats[s])&&c.videoStats&&c.videoStats.videoSendBytesDelta&&(r+=parseInt(c.videoStats.videoSendBytesDelta)),c&&c.audioStats&&c.audioStats.audioSendBytesDelta&&(r+=parseInt(c.audioStats.audioSendBytesDelta))}var d=r+t.session.WSSendBytesDelta+t.session.HTTPSendBytesDelta,u=o+t.session.WSRecvBytesDelta+t.session.HTTPRecvBytesDelta,l=t.session.sendBytes+Object(nt.getHTTPSendBytes)(),p=t.session.recvBytes+Object(nt.getHTTPRecvBytes)();t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED&&(l+=a.getSendBytes(),p+=a.getRecvBytes());var f=1;i.peer_delay&&(f=i.peer_delay.length,f+=1),ie(n,"Duration",a.getDuration()),ie(n,"UserCount",f),ie(n,"SendBytes",l),ie(n,"RecvBytes",p),ie(n,"SendBitrate",8*d/1e3),ie(n,"RecvBitrate",8*u/1e3),e&&e(n)},t.isLocalVideoFreeze=function(e,t){var n=0,i=0;if(!e||!t)return!1;if(Object(m.isChrome)()||Object(m.isOpera)())n=e.googFrameRateInput,i=e.googFrameRateSent;else if(Object(m.isSafari)())n=parseInt(e.framerateMean),i=parseInt(e.framesEncoded)-parseInt(t.framesEncoded);else{if(!Object(m.isFireFox)())return!1;n=parseInt(e.framerateMean),i=parseInt(e.framesEncoded)-parseInt(t.framesEncoded)}return n>5&&i<3},t.isRemoteVideoFreeze=function(e,t){var n=0,i=0;if(!e||!t)return!1;if(Object(m.isChrome)()||Object(m.isOpera)())n=e.googFrameRateReceived,i=e.googFrameRateDecoded;else if(Object(m.isSafari)())n=e.framerateMean,i=parseInt(e.framesDecoded)-parseInt(t.framesDecoded);else{if(!Object(m.isFireFox)())return!1;n=parseInt(e.framesReceived)-parseInt(t.framesReceived),i=parseInt(e.framesDecoded)-parseInt(t.framesDecoded)}return n>5&&n<10&&i<3||n>10&&n<20&&i<4||n>20&&i<5},t.isAudioFreeze=function(e){if(Object(m.isChrome)()&&e){if(e.googDecodingPLC&&e.googDecodingPLCCNG&&e.googDecodingCTN)return(parseInt(e.googDecodingPLC)+parseInt(e.googDecodingPLCCNG))/parseInt(e.googDecodingCTN)>.2}else if((Object(m.isSafari)()||Object(m.isFireFox)())&&e.packetsLost&&e.packetsReceived)return parseInt(e.packetsLost)/(parseInt(e.packetsLost)+parseInt(e.packetsReceived))>.2;return!1},t.isAudioDecodeFailed=function(e){return!!((Object(m.isChrome)()||Object(m.isOpera)())&&e&&parseInt(e.bytesReceived)>0&&0===parseInt(e.googDecodingNormal))},t.startNetworkQualityTimer=function(){t.clearNetworkQualityTimer(),t.networkQualityTimer=setInterval(function(){if(t.gatewayClient.state!==Rt.CONNECTED)t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:0,downlinkNetworkQuality:0});else{var e=t.gatewayClient.traffic_stats;t.gatewayClient.dispatchEvent({type:"network-quality",uplinkNetworkQuality:t.networkQualityTrans(e.uplink_network_quality),downlinkNetworkQuality:t.networkQualityTrans(e.downlink_network_quality)})}},2e3)},t.clearNetworkQualityTimer=function(){t.networkQualityTimer&&clearInterval(t.networkQualityTimer)},t.networkQualityTrans=function(e){return e>=0&&e<.17?1:e>=.17&&e<.36?2:e>=.36&&e<.59?3:e>=.59&&e<=1?4:e>1?5:0},t.getStatsTimer=setInterval(function(){var e=t.gatewayClient.traffic_stats,n=Date.now();t.gatewayClient.dispatchEvent({type:"_testException"}),Object.keys(t.localStats).length&&t.exceptionMonitor.setLocalStats(t.localStats),Object.keys(t.remoteStats).length&&t.exceptionMonitor.setRemoteStats(t.remoteStats);var i={};Object.keys(t.gatewayClient.remoteStreams).forEach(function(a){var r=t.gatewayClient.remoteStreams[a],o=t.remoteStats[a],s={id:a,updatedAt:n};i[a]=s,s.firstFrameTime=r.firstFrameTime,o?(s.audioTotalPlayDuration=o.audioTotalPlayDuration+1,s.audioTotalFreezeTime=o.audioTotalFreezeTime,s.isAudioFreeze=!1,s.isAudioDecodeFailed=!1,s.videoTotalPlayDuration=o.videoTotalPlayDuration+1,s.videoTotalFreezeTime=o.videoTotalFreezeTime,s.isVideoFreeze=!1):(s.audioTotalPlayDuration=1,s.audioTotalFreezeTime=0,s.videoTotalPlayDuration=1,s.videoTotalFreezeTime=0);var c=e&&e.peer_delay&&e.peer_delay.find(function(e){return e.peer_uid==a});c&&(s.peer_delay=c),r&&(r.isPlaying()&&(s.audioDisabled=r.userMuteAudio||r.peerMuteAudio?"1":"0",s.videoDisabled=r.userMuteVideo||r.peerMuteVideo?"1":"0"),o&&o.peer_delay&&c&&o.peer_delay.stream_type!==c.stream_type&&t.gatewayClient.dispatchEvent({type:"streamTypeChange",uid:a,streamType:c.stream_type}),r.pc&&"established"==r.pc.state&&r.pc.getStats(function(e){if(s.pcStats=e,s.audioStats=e.find(function(e){return"audio"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)}),s.videoStats=e.find(function(e){return"video"==e.mediaType&&(e.id.indexOf("_recv")>-1||e.id.toLowerCase().indexOf("inbound")>-1)}),o&&o.audioStats&&s.audioStats){var n=parseInt(s.audioStats.bytesReceived)-parseInt(o.audioStats.bytesReceived),i=parseInt(s.audioStats.googDecodingNormal)-parseInt(o.audioStats.googDecodingNormal);if(s.audioStats.audioRecvBytesDelta=n,s.audioStats.audioDecodingNormalDelta=i,t.session.recvBytes+=n,isFinite(n)&&s.audioStats.timestamp){var a=s.audioStats.timestamp.getTime()-o.audioStats.timestamp.getTime();s.audioRecvBitrate=Math.floor(8*n/a)}t.isAudioFreeze(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.audioTotalFreezeTime++,s.isAudioFreeze=!0),t.isAudioDecodeFailed(s.audioStats)&&s.audioTotalPlayDuration>10&&(s.isAudioDecodeFailed=!0),s.audioStats.audioTotalFreezeTime=s.audioTotalFreezeTime,s.audioStats.audioTotalPlayDuration=s.audioTotalPlayDuration,s.audioStats.audioFreezeRate=Math.ceil(100*s.audioTotalFreezeTime/s.audioTotalPlayDuration)}if(o&&o.videoStats&&s.videoStats){var c=parseInt(s.videoStats.bytesReceived)-parseInt(o.videoStats.bytesReceived);s.videoStats.videoRecvBytesDelta=c,t.session.recvBytes+=c,isFinite(c)&&s.videoStats.timestamp&&(a=s.videoStats.timestamp.getTime()-o.videoStats.timestamp.getTime(),s.videoRecvBitrate=Math.floor(8*c/a)),t.isRemoteVideoFreeze(s.videoStats,o.videoStats)&&(s.videoTotalFreezeTime++,s.isVideoFreeze=!0),s.videoStats.videoTotalFreezeTime=s.videoTotalFreezeTime,s.videoStats.videoTotalPlayDuration=s.videoTotalPlayDuration,s.videoStats.videoFreezeRate=Math.ceil(100*s.videoTotalFreezeTime/s.videoTotalPlayDuration),r.player&&r.player.video&&r.player.video.videoWidth&&r.player.video.videoHeight?(s.videoStats.renderRemoteWidth=r.player.video.videoWidth,s.videoStats.renderRemoteHeight=r.player.video.videoHeight):(s.videoStats.renderRemoteWidth=r.videoWidth||s.videoStats.googFrameWidthReceived,s.videoStats.renderRemoteHeight=r.videoHeight||s.videoStats.googFrameHeightReceived)}}))}),t.remoteStats=i;var a={};if(Object.keys(t.gatewayClient.localStreams).forEach(function(e){var i=t.gatewayClient.localStreams[e],r=t.localStats[e],o={id:e,updatedAt:n};a[e]=o,r?(o.videoTotalPlayDuration=r.videoTotalPlayDuration+1,o.videoTotalFreezeTime=r.videoTotalFreezeTime,o.isVideoFreeze=!1):(o.videoTotalPlayDuration=1,o.videoTotalFreezeTime=0),i&&(i.isPlaying()&&(o.audioDisabled=i.userMuteAudio?"1":"0",o.videoDisabled=i.userMuteVideo?"1":"0"),i.video&&i.attributes.maxVideoBW?o.videoTargetSendBitrate=i.attributes.maxVideoBW:i.video&&i.screenAttributes&&(o.videoTargetSendBitrate=i.screenAttributes.maxVideoBW),i.pc&&"established"==i.pc.state&&i.pc.getStats(function(e){if(o.pcStats=e.reverse(),o.audioStats=e.find(function(e){return"audio"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)}),o.videoStats=e.find(function(e){return"video"==e.mediaType&&(e.id.indexOf("_send")>-1||e.id.toLowerCase().indexOf("outbound")>-1)}),o.audioStats&&r&&r.audioStats){var n=parseInt(o.audioStats.bytesSent)-parseInt(r.audioStats.bytesSent);if(o.audioStats.audioSendBytesDelta=n,t.session.sendBytes+=n,isFinite(n)&&o.audioStats.timestamp){var a=o.audioStats.timestamp.getTime()-r.audioStats.timestamp.getTime();o.audioSendBitrate=Math.floor(8*n/a)}}if(o.videoStats&&r&&r.videoStats){var s=parseInt(o.videoStats.bytesSent)-parseInt(r.videoStats.bytesSent);o.videoStats.videoSendBytesDelta=s,t.session.sendBytes+=s,isFinite(s)&&o.videoStats.timestamp&&(a=o.videoStats.timestamp.getTime()-r.videoStats.timestamp.getTime(),o.videoSendBitrate=Math.floor(8*s/a)),t.isLocalVideoFreeze(o.videoStats,r.videoStats)&&(o.videoTotalFreezeTime++,o.isVideoFreeze=!0),o.videoStats.videoTotalFreezeTime=o.videoTotalFreezeTime,o.videoStats.videoTotalPlayDuration=o.videoTotalPlayDuration,o.videoStats.videoFreezeRate=Math.ceil(100*o.videoTotalFreezeTime/o.videoTotalPlayDuration),o.videoStats.renderLocalWidth=i.videoWidth||o.videoStats.googFrameWidthSent,o.videoStats.renderLocalHeight=i.videoHeight||o.videoStats.googFrameHeightSent}}))}),t.localStats=a,t.session.HTTPSendBytesDelta=Object(nt.getHTTPSendBytes)()-t.session.HTTPSendBytes,t.session.HTTPSendBytes=Object(nt.getHTTPSendBytes)(),t.session.HTTPRecvBytesDelta=Object(nt.getHTTPRecvBytes)()-t.session.HTTPRecvBytes,t.session.HTTPRecvBytes=Object(nt.getHTTPRecvBytes)(),t.gatewayClient.socket&&t.gatewayClient.socket.state===t.gatewayClient.CONNECTED){var r=t.gatewayClient.socket;t.session.WSSendBytesDelta=r.getSendBytes()-t.session.WSSendBytes,t.session.WSSendBytes=r.getSendBytes(),t.session.WSRecvBytesDelta=r.getRecvBytes()-t.session.WSRecvBytes,t.session.WSRecvBytes=r.getRecvBytes()}},1e3),t.gatewayClient.on("join",function(){t.session={sendBytes:0,recvBytes:0,WSSendBytes:0,WSSendBytesDelta:0,WSRecvBytes:0,WSRecvBytesDelta:0,HTTPSendBytes:0,HTTPSendBytesDelta:0,HTTPRecvBytes:0,HTTPRecvBytesDelta:0}}),t}(t.gatewayClient),t.configDistributManager=function(e){var t={};return t.client=e,t.client.gatewayClient&&t.client.gatewayClient.on("config-distribute",function(n){var i=n.joinInfo,a=n.config;if(a){Object(re.isEmpty)(a.uploadLog)||(Object(r.setParameter)("UPLOAD_LOG",a.uploadLog),s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"uploadLog",value:a.uploadLog}})()),Object(re.isEmpty)(a.dualStream)||(e.isDualStream=a.dualStream,s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"dualStream",value:a.dualStream}})()),Object(re.isEmpty)(a.streamFallbackOption)||t.client.gatewayClient&&t.client.gatewayClient.on("stream-subscribed",function(e){var n=e.stream;n?(t.client.gatewayClient.setStreamFallbackOption(n,a.streamFallbackOption),s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId()}})()):s.b.reportApiInvoke(i.sid,{name:"_configDistribute",options:{feature:"streamFallbackOption",value:a.streamFallbackOption,streamId:n.getId(),err:"invalid stream"}})()});try{o.default.debug("[".concat(e.clientId,"] setParameter in distribution: ").concat(JSON.stringify(a))),Object.keys(a).map(function(e){return Object(r.setParameter)(e,a[e])})}catch(t){o.default.debug("[".concat(e.clientId,"] setParameter in distribution failed: ").concat(JSON.stringify(a)))}}}),t}(t),function(e,t){var n=arguments;e.liveStreaming=c(),e.liveStreaming.connections={inject_streaming:null,mix_streaming:null,raw_streaming:null},e.liveStreaming.connectionTypes={inject_streaming:"pull",mix_streaming:"push",raw_streaming:"push"},e.liveStreaming.pushStates={},e.liveStreaming.pullStates={},e.gatewayClient.addEventListener("join",function(t){e.liveStreaming.resumeStates("pull")}),e.gatewayClient.addEventListener("stream-unpublished",function(t){if(t.options&&0===t.options.streamType)for(var n in e.liveStreaming.pushStates){var i=e.liveStreaming.pushStates[n];i.url&&e._stopLiveStreaming(i.url,i.transcodingEnabled,!0)}}),e.gatewayClient.addEventListener("stream-published",function(t){e.liveStreaming.resumeStates("push")}),e.liveStreaming.connect=(m=ue()(ce.a.mark(function n(i){var a,r;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(e.joinInfo&&e.joinInfo.uid&&parseInt(e.joinInfo.vid,10)){n.next=3;break}throw new Error("CLIENT_NOT_JOINED");case 3:return a=new qt({appId:t.appId,cname:e.channel,sid:t.sessionId,uid:e.joinInfo.uid}),e.liveStreaming.connections[i]=a,n.next=7,Ft({appId:t.appId,cname:e.channel,serviceName:i,sid:t.sessionId,uid:e.joinInfo.uid});case 7:return r=n.sent,n.next=10,a.connect({wsClient:r});case 10:return a.on("notification",function(t){if(t.serviceName=i,e.liveStreaming.dispatchEvent(t),503===t.code);else switch(t.serviceName){case"inject_streaming":var n={reason:t&&t.reason,status:Kt(t&&t.code),type:"streamInjectedStatus",uid:t&&t.serverStatus&&t.serverStatus.inject_uid,url:t&&t.serverStatus&&t.serverStatus.url};e.gatewayClient.dispatchEvent(n);break;case"raw_streaming":case"mix_streaming":var a={reason:t&&t.reason,status:t&&t.code,type:t&&200===t.code?"liveStreamingStarted":"liveStreamingFailed",uid:t&&t.serverStatus&&t.uid,url:t&&t.serverStatus&&t.serverStatus.url};e.gatewayClient.dispatchEvent(a)}}),a.on("close",function(t){Yt(a),o.default.debug("Reconnect ".concat(i)),e.liveStreaming.connect(i).catch(function(t){e.liveStreaming.connections[i]=null,e.gatewayClient.dispatchEvent({type:"".concat(i.replace("_","-"),"-disconnected")})})}),o.default.debug("".concat(i," connected")),n.abrupt("return",a);case 14:case"end":return n.stop()}},n,this)})),function(e){return m.apply(this,arguments)}),e.liveStreaming.disconnect=(f=ue()(ce.a.mark(function t(n){var i,a;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=ce.a.keys(e.liveStreaming.connections);case 1:if((t.t1=t.t0()).done){t.next=13;break}if(i=t.t1.value,!e.liveStreaming.connections.hasOwnProperty(i)){t.next=11;break}if(!(a=e.liveStreaming.connections[i])||n&&n!==i){t.next=11;break}return o.default.info("Disconnecting liveStreaming ".concat(i)),t.next=9,a.disconnect();case 9:t.sent,e.liveStreaming.connections[i]=null;case 11:t.next=1;break;case 13:case"end":return t.stop()}},t,this)})),function(e){return f.apply(this,arguments)}),e.liveStreaming.resumeStates=(p=ue()(ce.a.mark(function t(n){var i,a,r,s,c,d,u,l;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=ce.a.keys(e.liveStreaming.connections);case 1:if((t.t1=t.t0()).done){t.next=8;break}if(i=t.t1.value,!n||e.liveStreaming.connectionTypes[i]===n){t.next=5;break}return t.abrupt("continue",1);case 5:e.liveStreaming.connections.hasOwnProperty(i)&&(a=e.liveStreaming.connections[i])&&(o.default.info("LiveStreaming closing connection ".concat(i)),a.disconnect(),e.liveStreaming.connections[i]=null),t.next=1;break;case 8:t.t2=ce.a.keys(e.liveStreaming.pushStates);case 9:if((t.t3=t.t2()).done){t.next=37;break}if(r=t.t3.value,!n||"push"===n){t.next=13;break}return t.abrupt("continue",9);case 13:if(!e.liveStreaming.pushStates.hasOwnProperty(r)){t.next=35;break}if(s=e.liveStreaming.pushStates[r],"audience"!==e.gatewayClient.role){t.next=19;break}o.default.warning("Cannot resume LiveStreaming in audience mode. ".concat(s.url),s),t.next=35;break;case 19:if(!s){t.next=35;break}return o.default.debug("Resuming LiveStreaming ".concat(s.url),s),t.prev=21,t.next=24,e._startLiveStreaming(s.url,s.transcodingEnabled);case 24:c=t.sent,o.default.debug("Resumed LiveStreaming ".concat(s.url,": ").concat(c.reason)),t.next=35;break;case 28:if(t.prev=28,t.t4=t.catch(21),454!==t.t4.code){t.next=34;break}o.default.debug("Resumed LiveStreaming ".concat(s.url,": ").concat(t.t4.reason)),t.next=35;break;case 34:throw t.t4;case 35:t.next=9;break;case 37:t.t5=ce.a.keys(e.liveStreaming.pullStates);case 38:if((t.t6=t.t5()).done){t.next=62;break}if(d=t.t6.value,!n||"pull"===n){t.next=42;break}return t.abrupt("continue",38);case 42:if(!e.liveStreaming.pullStates.hasOwnProperty(d)){t.next=60;break}if(u=e.liveStreaming.pullStates[d],"audience"!==e.gatewayClient.role){t.next=48;break}o.default.warning("Cannot resume addInjectStreamUrl in audience mode. ".concat(u.url),u),t.next=60;break;case 48:if(!u){t.next=60;break}return o.default.debug("Resuming LiveStreaming pullStream ".concat(u.url),u),t.prev=50,t.next=53,e._addInjectStreamUrl(u.url,u.transcodingConfig);case 53:l=t.sent,o.default.debug("Resumed LiveStreaming pullStream ".concat(u.url,": ").concat(l.reason)),t.next=60;break;case 57:t.prev=57,t.t7=t.catch(50),451===t.t7.code&&o.default.debug("Resumed LiveStreaming pullStream ".concat(u.url,": ").concat(t.t7.reason));case 60:t.next=38;break;case 62:case"end":return t.stop()}},t,this,[[21,28],[50,57]])})),function(e){return p.apply(this,arguments)}),e.liveStreaming.startOptions={autoDestroyTime:30},e.liveStreaming.transcodingConfig={audioBitrate:48,audioChannels:1,audioSampleRate:48e3,backgroundColor:0,height:360,images:[],lowLatency:!1,metadata:"",userConfigExtraInfo:"",userConfigs:[],videoBitrate:400,videoCodecProfile:100,videoCodecType:1,videoFramerate:15,videoGop:30,width:640},e.startLiveStreaming=function(n,i){Object(re.isEmpty)(i)||Object(re.checkValidBoolean)(i,"transcodingEnabled"),Object(re.checkValidString)(n,"url",1,1024);var a=s.b.reportApiInvoke(t.sessionId,{name:"Client.startLiveStreaming",options:arguments,tag:"tracer"});if(e.gatewayClient&&"audience"===e.gatewayClient.role){var r={code:403,reason:"AUDIENCE_STREAMING_FORBIDDEN"};throw a(r),r}var o=e._startLiveStreaming(n,i);return o.then(function(e){a(null,e)}).catch(function(e){a(e)}),o},e._startLiveStreaming=(l=ue()(ce.a.mark(function n(i,a){var r,s,c,d;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=S()({allocate:!0,clientRequest:{command:"PublishStream"},command:"request"}),o.default.debug("startLiveStreaming ".concat(i,", ").concat(a)),S()(r.clientRequest,e.liveStreaming.startOptions,{ts:Date.now(),url:i,vid:parseInt(e.joinInfo.vid,10)}),s=null,a?(e.liveStreaming.connections.mix_streaming||e.liveStreaming.connect("mix_streaming"),r.clientRequest.transcodingConfig=JSON.parse(JSON.stringify(e.liveStreaming.transcodingConfig)),s=e.liveStreaming.connections.mix_streaming):("vp8"===t.codec&&o.default.warning("VP8 is not supported by raw_streaming. Subscriber side will suffer"),"rtc"===t.mode&&o.default.warning("RTC mode is not supported by raw_streaming. Subscriber side will suffer"),e.liveStreaming.connections.raw_streaming||e.liveStreaming.connect("raw_streaming"),s=e.liveStreaming.connections.raw_streaming),c=null,d={},n.prev=7,n.next=10,s.request(r);case 10:c=n.sent,d.type="liveStreamingStarted",d.reason=c&&c.reason,d.status=c&&c.code,d.url=c&&c.serverResponse&&c.serverResponse.url,e.gatewayClient.dispatchEvent(d),n.next=26;break;case 18:throw n.prev=18,n.t0=n.catch(7),d.type="liveStreamingFailed",d.reason=n.t0&&n.t0.reason,d.status=n.t0&&n.t0.code,d.url=n.t0&&n.t0.serverResponse&&n.t0.serverResponse.url,e.gatewayClient.dispatchEvent(d),n.t0;case 26:return e.liveStreaming.pushStates[i]={transcodingEnabled:a,url:i},n.abrupt("return",c);case 28:case"end":return n.stop()}},n,this,[[7,18]])})),function(e,t){return l.apply(this,arguments)}),e.setLiveTranscoding=function(n,i){o.default.debug("setLiveTranscoding: ".concat(JSON.stringify(n))),Object(re.checkValidObject)(n,"transcoding");var a=n,r=a.width,c=a.height,d=a.videoBitrate,u=a.videoFramerate,l=a.lowLatency,p=a.audioSampleRate,f=a.audioBitrate,m=a.audioChannels,g=a.videoGop,v=a.images,h=a.videoCodecProfile,S=a.userCount,_=a.backgroundColor,E=a.transcodingUsers;if(E||(E=n.userConfigs),Object(re.isEmpty)(r)||Object(re.checkValidNumber)(r,"width"),Object(re.isEmpty)(c)||Object(re.checkValidNumber)(c,"height"),Object(re.isEmpty)(d)||Object(re.checkValidNumber)(d,"videoBitrate",1,1e6),Object(re.isEmpty)(u)||Object(re.checkValidNumber)(u,"videoFramerate"),Object(re.isEmpty)(l)||Object(re.checkValidBoolean)(l,"lowLatency"),Object(re.isEmpty)(p)||Object(re.checkValidEnum)(p,"audioSampleRate",[32e3,44100,48e3]),Object(re.isEmpty)(f)||Object(re.checkValidNumber)(f,"audioBitrate",1,128),Object(re.isEmpty)(m)||Object(re.checkValidEnum)(m,"audioChannels",[1,2,3,4,5]),Object(re.isEmpty)(g)||Object(re.checkValidNumber)(g,"videoGop"),Object(re.isEmpty)(h)||Object(re.checkValidEnum)(h,"videoCodecProfile",[66,77,100]),Object(re.isEmpty)(S)||Object(re.checkValidNumber)(S,"userCount",0,17),Object(re.isEmpty)(_)||Object(re.checkValidNumber)(_,"backgroundColor",0,16777215),!Object(re.isEmpty)(E)){if(!Object(re.isArray)(E))throw new Error("[transcodingUsers]: transcodingUsers should be Array");if(E.length>17)throw new Error("The length of transcodingUsers cannot greater than 17");E.map(function(e,t){if(!Object(re.isEmpty)(e.uid)&&!Jt(e.uid)&&!Object(re.isValidString)(e.uid,1,255))throw new Error("[String uid] Length of the string: [1,255]. ASCII characters only. [Number uid] The value range is [0,10000]");if(Object(re.isEmpty)(e.x)||Object(re.checkValidNumber)(e.x,"transcodingUser[".concat(t,"].x"),0,1e4),Object(re.isEmpty)(e.y)||Object(re.checkValidNumber)(e.y,"transcodingUser[".concat(t,"].y"),0,1e4),Object(re.isEmpty)(e.width)||Object(re.checkValidNumber)(e.width,"transcodingUser[".concat(t,"].width"),0,1e4),Object(re.isEmpty)(e.height)||Object(re.checkValidNumber)(e.height,"transcodingUser[".concat(t,"].height"),0,1e4),Object(re.isEmpty)(e.zOrder)||Object(re.checkValidNumber)(e.zOrder,"transcodingUser[".concat(t,"].zOrder"),0,100),!(Object(re.isEmpty)(e.alpha)||Object(re.isNumber)(e.alpha)&&e.alpha<=1&&e.alpha>=0))throw new Error("transcodingUser[${index}].alpha: The value range is [0, 1]")})}if(!Object(re.isEmpty)(v)){if(!Object(re.isArray)(v))throw new Error("[images]: images should be Array");v.map(function(e,t){if(Object(re.checkValidString)(e.url,"images[".concat(t,"].url"),1,1024),Object(re.isEmpty)(e.x)?e.x=0:Object(re.checkValidNumber)(e.x,"images[".concat(t,"].x"),0,1e4),Object(re.isEmpty)(e.y)?e.y=0:Object(re.checkValidNumber)(e.y,"images[".concat(t,"].y"),0,1e4),Object(re.isEmpty)(e.width)?e.width=160:Object(re.checkValidNumber)(e.width,"images[".concat(t,"].width"),0,1e4),Object(re.isEmpty)(e.height)?e.height=160:Object(re.checkValidNumber)(e.height,"images[".concat(t,"].height"),0,1e4),Object(re.isEmpty)(e.zOrder)?e.zOrder=0:Object(re.checkValidNumber)(e.zOrder,"images[".concat(t,"].zOrder"),0,100),Object(re.isEmpty)(e.alpha))e.alpha=1;else if(!(Object(re.isNumber)(e.alpha)&&e.alpha<=1&&e.alpha>=0))throw new Error("image[${index}].alpha: The value range is [0, 1]")})}var I=s.b.reportApiInvoke(t.sessionId,{name:"Client.setLiveTranscoding",options:arguments,tag:"tracer"});if((n=JSON.parse(JSON.stringify(n))).transcodingUsers&&(n.userConfigs=n.transcodingUsers,delete n.transcodingUsers),e.joinInfo.stringUid&&n.userConfigs&&n.userConfigs.length){var y=[];n.userConfigs.forEach(function(t){y.push(gt(e.joinInfo,e.gatewayClient,t.uid).then(function(e){t.uid=e.uid}))});var T=Promise.all(y).then(function(){return e._setLiveTranscoding(n,i)});return T.then(function(e){I(null,e)}).catch(function(e){I(e)}),T}var b=e._setLiveTranscoding(n,i);return b.then(function(e){I(null,e)}).catch(function(e){I(e)}),b},e._setLiveTranscoding=(u=ue()(ce.a.mark(function t(n,i){var a,r,o;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.liveStreaming.transcodingConfig=S()(e.liveStreaming.transcodingConfig,n),"boolean"!=typeof i&&(i=!!e.liveStreaming.connections.mix_streaming),a=JSON.parse(JSON.stringify({allocate:!1,clientRequest:{command:"UpdateTranscoding",transcodingConfig:e.liveStreaming.transcodingConfig},command:"request"})),r={},!i){t.next=16;break}return e.liveStreaming.connections.mix_streaming||e.liveStreaming.connect("mix_streaming"),t.next=8,e.liveStreaming.connections.mix_streaming.request(a);case 8:return o=t.sent,r.type="liveTranscodingUpdated",r.reason=o.reason,r.status=o.code,e.gatewayClient.dispatchEvent(r),t.abrupt("return",o);case 16:return t.abrupt("return",{code:200,reason:"success"});case 17:case"end":return t.stop()}},t,this)})),function(e,t){return u.apply(this,arguments)}),e.stopLiveStreaming=function(n,i){Object(re.checkValidString)(n,"url",1,1024);var a=s.b.reportApiInvoke(t.sessionId,{name:"Client.stopLiveStreaming",options:arguments,tag:"tracer"}),r=e._stopLiveStreaming(n,i);return r.then(function(e){a(null,e)}).catch(function(e){a(e)}),r},e._stopLiveStreaming=(d=ue()(ce.a.mark(function t(n,i,a){var r,o,s,c,d,u;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=null,o=e.liveStreaming.pushStates[n],r=o?o.transcodingEnabled?"mix_streaming":"raw_streaming":i?"mix_streaming":"raw_streaming",s={allocate:!1,clientRequest:{command:"UnpublishStream",url:n},command:"request"},e.liveStreaming.connections[r]||e.liveStreaming.connect(r),c=null,t.prev=6,t.next=9,e.liveStreaming.connections[r].request(s);case 9:c=t.sent,(d={}).type="liveStreamingStopped",d.reason=c&&c.reason,d.status=c&&c.code,d.url=c&&c.serverResponse&&c.serverResponse.url,e.gatewayClient.dispatchEvent(d),t.next=27;break;case 18:throw t.prev=18,t.t0=t.catch(6),(u={}).type="liveStreamingStopped",u.reason=t.t0&&t.t0.reason,u.status=t.t0&&t.t0.code,u.url=t.t0&&t.t0.serverResponse&&t.t0.serverResponse.url,e.gatewayClient.dispatchEvent(u),t.t0;case 27:return a||delete e.liveStreaming.pushStates[n],t.abrupt("return",c);case 29:case"end":return t.stop()}},t,this,[[6,18]])})),function(e,t,n){return d.apply(this,arguments)}),e.liveStreaming.injectStreamTranscodingConfig={autoDestroyTime:30,audioBitrate:48,audioChannels:1,audioSampleRate:44100,height:0,videoBitrate:400,videoFramerate:15,videoGop:30,width:0},e.addInjectStreamUrl=function(i,a){Object(re.checkValidString)(i,"url",1,1024),Object(re.checkValidObject)(a,"config"),!Object(re.isEmpty)(a&&a.width)&&Object(re.checkValidNumber)(a.width,"config.width",0,1e4),!Object(re.isEmpty)(a&&a.height)&&Object(re.checkValidNumber)(a.height,"config.height",0,1e4),!Object(re.isEmpty)(a&&a.videoGop)&&Object(re.checkValidNumber)(a.videoGop,"config.videoGop",1,1e4),!Object(re.isEmpty)(a&&a.videoFramerate)&&Object(re.checkValidNumber)(a.videoFramerate,"config.videoFramerate",1,1e4),!Object(re.isEmpty)(a&&a.videoBitrate)&&Object(re.checkValidNumber)(a.videoBitrate,"config.videoBitrate",1,1e4),!Object(re.isEmpty)(a&&a.audioSampleRate)&&Object(re.checkValidEnum)(a.audioSampleRate,"config.audioSampleRate",[32e3,44100,48e3]),!Object(re.isEmpty)(a&&a.audioBitrate)&&Object(re.checkValidNumber)(a.audioBitrate,"config.audioBitrate",1,1e4),!Object(re.isEmpty)(a&&a.audioChannels)&&Object(re.checkValidNumber)(a.audioChannels,"config.audioChannels",1,2);var r=s.b.reportApiInvoke(t.sessionId,{name:"Client.addInjectStreamUrl",options:n,tag:"tracer"});if("audience"===e.gatewayClient.role){var o={code:403,reason:"AUDIENCE_INJECTING_FORBIDDEN"};throw r(o),o}var c=e._addInjectStreamUrl(i,a);return c.then(function(e){r(null,e)}).catch(function(e){r(e)}),c},e._addInjectStreamUrl=(r=ue()(ce.a.mark(function n(i,a){var r,o,s,c,d;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=S()({},e.liveStreaming.injectStreamTranscodingConfig,a),o={allocate:!0,clientRequest:{cname:e.channel,command:"InjectStream",sid:t.sessionId,transcodingConfig:r,ts:Date.now(),url:i,vid:parseInt(e.joinInfo.vid,10)},command:"request"},e.liveStreaming.connections.inject_streaming||e.liveStreaming.connect("inject_streaming"),s=null,n.prev=4,n.next=7,e.liveStreaming.connections.inject_streaming.request(o);case 7:s=n.sent,c={reason:s&&s.reason,status:Kt(s&&s.code),type:"streamInjectedStatus",uid:s&&s.serverResponse&&s.serverResponse.inject_uid,url:s&&s.serverResponse&&s.serverResponse.url},e.gatewayClient.dispatchEvent(c),n.next=17;break;case 12:throw n.prev=12,n.t0=n.catch(4),d={reason:n.t0&&n.t0.reason,status:Kt(n.t0&&n.t0.code),type:"streamInjectedStatus",uid:n.t0&&n.t0.serverResponse&&n.t0.serverResponse.inject_uid,url:n.t0&&n.t0.serverResponse&&n.t0.serverResponse.url},e.gatewayClient.dispatchEvent(d),n.t0;case 17:return e.liveStreaming.pullStates[i]={transcodingConfig:r,url:i},n.abrupt("return",s);case 19:case"end":return n.stop()}},n,this,[[4,12]])})),function(e,t){return r.apply(this,arguments)}),e.removeInjectStreamUrl=(a=ue()(ce.a.mark(function n(i){var a,r,o=arguments;return ce.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return Object(re.checkValidString)(i,"url",1,255),a=s.b.reportApiInvoke(t.sessionId,{name:"Client.removeInjectStreamUrl",options:o,tag:"tracer"}),(r=e._removeInjectStreamUrl(i)).then(function(e){a(null,e)}).catch(function(e){a(e)}),n.abrupt("return",r);case 5:case"end":return n.stop()}},n,this)})),function(e){return a.apply(this,arguments)}),e._removeInjectStreamUrl=(i=ue()(ce.a.mark(function t(n){var i,a,r,o;return ce.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i={allocate:!1,clientRequest:{command:"UninjectStream",url:n},command:"request"},e.liveStreaming.connections.inject_streaming||e.liveStreaming.connect("inject_streaming"),a=null,t.prev=3,t.next=6,e.liveStreaming.connections.inject_streaming.request(i);case 6:a=t.sent,r={reason:a&&a.reason,status:zt(a&&a.code),type:"streamInjectedStatus",uid:a&&a.serverResponse&&a.serverResponse.inject_uid,url:a&&a.serverResponse&&a.serverResponse.url},e.gatewayClient.dispatchEvent(r),t.next=16;break;case 11:throw t.prev=11,t.t0=t.catch(3),o={reason:t.t0&&t.t0.reason,status:zt(t.t0&&t.t0.code),type:"streamInjectedStatus",uid:t.t0&&t.t0.serverResponse&&t.t0.serverResponse.inject_uid,url:t.t0&&t.t0.serverResponse&&t.t0.serverResponse.url},e.gatewayClient.dispatchEvent(o),t.t0;case 16:return delete e.liveStreaming.pullStates[n],t.abrupt("return",a);case 18:case"end":return t.stop()}},t,this,[[3,11]])})),function(e){return i.apply(this,arguments)});var i;var a;var r;var d;var u;var l;var p;var f;var m}(t,e),Object(re.isEmpty)(e.turnServer)||t.setTurnServer(e.turnServer),Object(re.isEmpty)(e.proxyServer)||t.setProxyServer(e.proxyServer),"live"===t.mode&&(t.gatewayClient.role="audience"),"rtc"===t.mode&&(t.gatewayClient.role="host"),t.gatewayClient.on("onMultiIP",function(e){t.gatewayClient.closeGateway(),t.gatewayClient.socket=void 0,t.gatewayClient.hasChangeBGPAddress=!0,t.joinInfo.multiIP=e.option,t.gatewayClient.state=Rt.CONNECTING;var n=function(e){o.default.info("[".concat(t.clientId,"] Joining channel: ").concat(t.channel)),t.joinInfo.cid=e.cid,t.joinInfo.uid||(t.joinInfo.uid=e.uid),t.joinInfo.uni_lbs_ip=e.uni_lbs_ip,t.joinInfo.gatewayAddr=e.gateway_addr,t.onSuccess?t.gatewayClient.join(t.joinInfo,t.key,function(e){o.default.info("[".concat(t.clientId,"] Join channel ").concat(t.channel," success"));var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n(e)},t.onFailure):(t.gatewayClient.joinInfo=S()({},t.joinInfo),t.gatewayClient.rejoin())};t.joinInfo.stringUid&&!t.joinInfo.uid?(t.userAccountReq&&!t.userAccountReq.isFinished()&&t.userAccountReq.cancel(),t.userAccountReq=gt(joinInfo,t.gatewayClient),t.userAccountReq.then(function(e){o.default.error("getUserAccount Success ".concat(e.url," ").concat(joinInfo.stringUid," => ").concat(e.uid)),t.joinInfo.uid=e.uid,ft(t.joinInfo,n,t.onFailure)}).catch(function(e){o.default.error("getUserAccount rejected",e),t.onFailure(e)})):ft(t.joinInfo,n,t.onFailure)}),t.gatewayClient.on("rejoin-start",function(){t._renewSession(),s.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{rejoin:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})}),t.gatewayClient.on("recover",function(){t._renewSession(),console.log("recover",e.sessionId),s.b.sessionInit(e.sessionId,{lts:(new Date).getTime(),extend:{recover:!0},cname:t.channel,appid:e.appId,mode:e.mode,succ:!0})}),t.gatewayClient.on("rejoin",function(){var e=t.highStreamState;if(o.default.debug("[".concat(t.clientId,"] Client local stream preState: ").concat(e)),t.onSuccess){var n=t.onSuccess;t.onSuccess=null,t.onFailure=null,n()}!t.highStream||0!==e&&1!==e||(o.default.info("[".concat(t.clientId,"] publish after rejoin")),t.highStreamState=2,t.lowStreamState=2,t.publish(t.highStream,function(e){e&&o.default.info("[".concat(t.clientId,"] "),e)}))}),t.gatewayClient.on("streamPublished",function(e){t.hasPublished||(t.hasPublished=!0,t.gatewayClient.dispatchEvent(u({type:"stream-published",stream:e.stream})))}),t.gatewayClient.on("pubP2PLost",function(e){o.default.debug("[".concat(t.clientId,"] Start reconnect local peerConnection: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:t.highStream.getId()}),1===t.highStreamState&&(t.highStreamState=0,t.lowStreamState=0),t._unpublish(t.highStream,function(){t._publish(t.highStream,function(){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection success: ").concat(t.highStream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!0,reason:""})},function(e){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})},!0)},function(e){o.default.debug("[".concat(t.clientId,"] Reconnect local peerConnection failed: ").concat(e)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:t.highStream.getId(),success:!1,reason:e})},!0)}),t.gatewayClient.on("subP2PLost",function(e){o.default.debug("[".concat(t.clientId,"] Start reconnect remote peerConnection: ").concat(e.stream.getId()," ").concat(e.stream.subscribeOptions)),t.gatewayClient.dispatchEvent({type:"stream-reconnect-start",uid:e.stream.getId()});var n=e.stream.subscribeOptions;console.log("Re-subscribe stream",n,e.stream),t.gatewayClient.unsubscribe(e.stream,function(){e.stream.subscribeOptions=n,t.gatewayClient.subscribe(e.stream,function(){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection success: ").concat(e.stream.getId())),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:""})},function(n){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})})},function(n){o.default.debug("[".concat(t.clientId,"] Reconnect remote peerConnection failed: "),n),t.gatewayClient.dispatchEvent({type:"stream-reconnect-end",uid:e.stream.getId(),success:!1,reason:n})})}),wt.on("networkTypeChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"network-type-changed"});t.gatewayClient.dispatchEvent(n)}),ae.on("recordingDeviceChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"recording-device-changed"});t.gatewayClient.dispatchEvent(n)}),ae.on("playoutDeviceChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"playout-device-changed"});t.gatewayClient.dispatchEvent(n)}),ae.on("cameraChanged",function(e){t.gatewayClient&&t.gatewayClient.dispatchEvent(e);var n=S()({},e,{type:"camera-changed"});t.gatewayClient.dispatchEvent(n)}),t.gatewayClient.on("streamTypeChange",function(n){var i=S()({},n,{type:"stream-type-changed"});t.gatewayClient.dispatchEvent(i),s.b.reportApiInvoke(e.sessionId,{name:"streamTypeChange"})(null,JSON.stringify(n))}),t},Qt={width:640,height:360,videoBitrate:400,videoFramerate:15,lowLatency:!1,audioSampleRate:48e3,audioBitrate:48,audioChannels:1,videoGop:30,videoCodecProfile:100,userCount:0,userConfigExtraInfo:{},backgroundColor:0,transcodingUsers:[]},$t=ae.getDevices,Zt=X,en=JSON.parse(JSON.stringify(r.SUPPORT_RESOLUTION_LIST));n.default={TranscodingUser:{uid:0,x:0,y:0,width:0,height:0,zOrder:0,alpha:1},LiveTranscoding:Qt,createClient:function(e){var t=s.b.reportApiInvoke(null,{name:"createClient",options:arguments,tag:"tracer"});(e=S()({},e||{})).codec||(e.codec=function(e){switch(e){case"h264_interop":return"h264";default:return"vp8"}}(e.mode));var n=function(e){return-1===Xe.indexOf(e.mode)?V.INVALID_CLIENT_MODE:-1===Qe.indexOf(e.codec)?V.INVALID_CLIENT_CODEC:"h264_interop"==e.mode&&"h264"!==e.codec&&V.CLIENT_MODE_CODEC_MISMATCH}(e);if(n)throw o.default.error("Invalid parameter setting MODE: ".concat(e.mode," CODEC: ").concat(e.codec," ERROR ").concat(n)),t(n),new Error(n);return o.default.info("Creating client, MODE: ".concat(e.mode," CODEC: ").concat(e.codec)),function(e){switch(e.mode){case"interop":case"h264_interop":e.mode="live";break;case"web-only":e.mode="rtc"}}(e),t(null,e),Xt(e)},createStream:function(e){var t=s.b.reportApiInvoke(null,{name:"createStream",options:arguments,tag:"tracer"});Object(re.checkValidObject)(e,"StreamSpec");var n=e.streamID,i=e.audio,a=e.video,r=e.screen,c=e.screenAudio,d=(e.audioSource,e.videoSource,e.cameraId),u=e.facingMode,l=e.microphoneId,p=e.mirror,f=e.extensionId,m=e.mediaSource,g=e.audioProcessing;if(!Object(re.isEmpty)(n)&&!Object(ne.is32Uint)(n)&&!Object(re.isValidString)(n,1,255))throw new Error("[String streamID] Length of the string: [1,255]. ASCII characters only. [Number streamID] The value range is Uint32");if(Object(re.checkValidBoolean)(i,"audio"),Object(re.checkValidBoolean)(a,"video"),Object(re.isEmpty)(r)||Object(re.checkValidBoolean)(r,"screen"),Object(re.isEmpty)(c)||Object(re.checkValidBoolean)(c,"screenAudio"),Object(re.isEmpty)(d)||Object(re.checkValidString)(d,"cameraId",0,255,!1),Object(re.isEmpty)(u)||Object(re.checkValidEnum)(u,"facingMode",["user","environment","left","right"]),Object(re.isEmpty)(l)||Object(re.checkValidString)(l,"microphoneId",0,255,!1),Object(re.isEmpty)(f)||Object(re.checkValidString)(f,"extensionId"),Object(re.isEmpty)(m)||Object(re.checkValidEnum)(m,"mediaSource",["screen","application","window"]),Object(re.isEmpty)(p)||Object(re.checkValidBoolean)(p,"mirror"),!Object(re.isEmpty)(g)){var v=g.AGC,h=g.AEC,S=g.ANS;Object(re.isEmpty)(v)||Object(re.checkValidBoolean)(v,"AGC"),Object(re.isEmpty)(h)||Object(re.checkValidBoolean)(h,"AEC"),Object(re.isEmpty)(S)||Object(re.checkValidBoolean)(S,"ANS")}o.default.debug("Create stream"),!0===c&&!0===i&&o.default.warning("Do not set both 'screenAudio' and 'audio' to true at the same time");var _=Ye(e);return t(),_},Logger:o.default,report:s.b,getDevices:$t,getScreenSources:Zt,getParameter:r.getParameter,setParameter:r.setParameter,checkSystemRequirements:function(){var e=s.b.reportApiInvoke(null,{name:"checkSystemRequirements",options:arguments,tag:"tracer"}),t=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,n=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,i=window.WebSocket,a=!!t&&!!n&&!!i,r=!1;o.default.debug(m.getBrowserInfo(),"isAPISupport:"+a),m.isChrome()&&m.getBrowserVersion()>=58&&"iOS"!==m.getBrowserOS()&&(r=!0),m.isFireFox()&&m.getBrowserVersion()>=56&&(r=!0),m.isOpera()&&m.getBrowserVersion()>=45&&(r=!0),m.isSafari()&&m.getBrowserVersion()>=11&&(r=!0),m.isEdge()&&(r=!0),(m.isWeChatBrowser()||m.isQQBrowser())&&"iOS"!==m.getBrowserOS()&&(r=!0),m.isSupportedPC()||m.isSupportedMobile()||(r=!1);var c=a&&r;return e(null,c),c},getSupportedCodec:Je.getSupportedCodec,ChannelMediaRelayConfiguration:Ke.ChannelMediaRelayConfiguration,VERSION:r.VERSION,BUILD:r.BUILD,PROFILE_TABLE:en,AUDIO_SAMPLE_RATE_32000:32e3,AUDIO_SAMPLE_RATE_44100:44100,AUDIO_SAMPLE_RATE_48000:48e3,VIDEO_CODEC_PROFILE_BASELINE:66,VIDEO_CODEC_PROFILE_MAIN:77,VIDEO_CODEC_PROFILE_HIGH:100,REMOTE_VIDEO_STREAM_HIGH:0,REMOTE_VIDEO_STREAM_LOW:1,REMOTE_VIDEO_STREAM_MEDIUM:2}}]).default});

/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * jQuery JavaScript Library v3.4.1
 * https://jquery.com/
 *
 * Includes Sizzle.js
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2019-05-01T21:04Z
 */
( function( global, factory ) {

	"use strict";

	if (  true && typeof module.exports === "object" ) {

		// For CommonJS and CommonJS-like environments where a proper `window`
		// is present, execute the factory and get jQuery.
		// For environments that do not have a `window` with a `document`
		// (such as Node.js), expose a factory as module.exports.
		// This accentuates the need for the creation of a real `window`.
		// e.g. var jQuery = require("jquery")(window);
		// See ticket #14549 for more info.
		module.exports = global.document ?
			factory( global, true ) :
			function( w ) {
				if ( !w.document ) {
					throw new Error( "jQuery requires a window with a document" );
				}
				return factory( w );
			};
	} else {
		factory( global );
	}

// Pass this if window is not defined yet
} )( typeof window !== "undefined" ? window : this, function( window, noGlobal ) {

// Edge <= 12 - 13+, Firefox <=18 - 45+, IE 10 - 11, Safari 5.1 - 9+, iOS 6 - 9.1
// throw exceptions when non-strict code (e.g., ASP.NET 4.5) accesses strict mode
// arguments.callee.caller (trac-13335). But as of jQuery 3.0 (2016), strict mode should be common
// enough that all such attempts are guarded in a try block.
"use strict";

var arr = [];

var document = window.document;

var getProto = Object.getPrototypeOf;

var slice = arr.slice;

var concat = arr.concat;

var push = arr.push;

var indexOf = arr.indexOf;

var class2type = {};

var toString = class2type.toString;

var hasOwn = class2type.hasOwnProperty;

var fnToString = hasOwn.toString;

var ObjectFunctionString = fnToString.call( Object );

var support = {};

var isFunction = function isFunction( obj ) {

      // Support: Chrome <=57, Firefox <=52
      // In some browsers, typeof returns "function" for HTML <object> elements
      // (i.e., `typeof document.createElement( "object" ) === "function"`).
      // We don't want to classify *any* DOM node as a function.
      return typeof obj === "function" && typeof obj.nodeType !== "number";
  };


var isWindow = function isWindow( obj ) {
		return obj != null && obj === obj.window;
	};




	var preservedScriptAttributes = {
		type: true,
		src: true,
		nonce: true,
		noModule: true
	};

	function DOMEval( code, node, doc ) {
		doc = doc || document;

		var i, val,
			script = doc.createElement( "script" );

		script.text = code;
		if ( node ) {
			for ( i in preservedScriptAttributes ) {

				// Support: Firefox 64+, Edge 18+
				// Some browsers don't support the "nonce" property on scripts.
				// On the other hand, just using `getAttribute` is not enough as
				// the `nonce` attribute is reset to an empty string whenever it
				// becomes browsing-context connected.
				// See https://github.com/whatwg/html/issues/2369
				// See https://html.spec.whatwg.org/#nonce-attributes
				// The `node.getAttribute` check was added for the sake of
				// `jQuery.globalEval` so that it can fake a nonce-containing node
				// via an object.
				val = node[ i ] || node.getAttribute && node.getAttribute( i );
				if ( val ) {
					script.setAttribute( i, val );
				}
			}
		}
		doc.head.appendChild( script ).parentNode.removeChild( script );
	}


function toType( obj ) {
	if ( obj == null ) {
		return obj + "";
	}

	// Support: Android <=2.3 only (functionish RegExp)
	return typeof obj === "object" || typeof obj === "function" ?
		class2type[ toString.call( obj ) ] || "object" :
		typeof obj;
}
/* global Symbol */
// Defining this global in .eslintrc.json would create a danger of using the global
// unguarded in another place, it seems safer to define global only for this module



var
	version = "3.4.1",

	// Define a local copy of jQuery
	jQuery = function( selector, context ) {

		// The jQuery object is actually just the init constructor 'enhanced'
		// Need init if jQuery is called (just allow error to be thrown if not included)
		return new jQuery.fn.init( selector, context );
	},

	// Support: Android <=4.0 only
	// Make sure we trim BOM and NBSP
	rtrim = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;

jQuery.fn = jQuery.prototype = {

	// The current version of jQuery being used
	jquery: version,

	constructor: jQuery,

	// The default length of a jQuery object is 0
	length: 0,

	toArray: function() {
		return slice.call( this );
	},

	// Get the Nth element in the matched element set OR
	// Get the whole matched element set as a clean array
	get: function( num ) {

		// Return all the elements in a clean array
		if ( num == null ) {
			return slice.call( this );
		}

		// Return just the one element from the set
		return num < 0 ? this[ num + this.length ] : this[ num ];
	},

	// Take an array of elements and push it onto the stack
	// (returning the new matched element set)
	pushStack: function( elems ) {

		// Build a new jQuery matched element set
		var ret = jQuery.merge( this.constructor(), elems );

		// Add the old object onto the stack (as a reference)
		ret.prevObject = this;

		// Return the newly-formed element set
		return ret;
	},

	// Execute a callback for every element in the matched set.
	each: function( callback ) {
		return jQuery.each( this, callback );
	},

	map: function( callback ) {
		return this.pushStack( jQuery.map( this, function( elem, i ) {
			return callback.call( elem, i, elem );
		} ) );
	},

	slice: function() {
		return this.pushStack( slice.apply( this, arguments ) );
	},

	first: function() {
		return this.eq( 0 );
	},

	last: function() {
		return this.eq( -1 );
	},

	eq: function( i ) {
		var len = this.length,
			j = +i + ( i < 0 ? len : 0 );
		return this.pushStack( j >= 0 && j < len ? [ this[ j ] ] : [] );
	},

	end: function() {
		return this.prevObject || this.constructor();
	},

	// For internal use only.
	// Behaves like an Array's method, not like a jQuery method.
	push: push,
	sort: arr.sort,
	splice: arr.splice
};

jQuery.extend = jQuery.fn.extend = function() {
	var options, name, src, copy, copyIsArray, clone,
		target = arguments[ 0 ] || {},
		i = 1,
		length = arguments.length,
		deep = false;

	// Handle a deep copy situation
	if ( typeof target === "boolean" ) {
		deep = target;

		// Skip the boolean and the target
		target = arguments[ i ] || {};
		i++;
	}

	// Handle case when target is a string or something (possible in deep copy)
	if ( typeof target !== "object" && !isFunction( target ) ) {
		target = {};
	}

	// Extend jQuery itself if only one argument is passed
	if ( i === length ) {
		target = this;
		i--;
	}

	for ( ; i < length; i++ ) {

		// Only deal with non-null/undefined values
		if ( ( options = arguments[ i ] ) != null ) {

			// Extend the base object
			for ( name in options ) {
				copy = options[ name ];

				// Prevent Object.prototype pollution
				// Prevent never-ending loop
				if ( name === "__proto__" || target === copy ) {
					continue;
				}

				// Recurse if we're merging plain objects or arrays
				if ( deep && copy && ( jQuery.isPlainObject( copy ) ||
					( copyIsArray = Array.isArray( copy ) ) ) ) {
					src = target[ name ];

					// Ensure proper type for the source value
					if ( copyIsArray && !Array.isArray( src ) ) {
						clone = [];
					} else if ( !copyIsArray && !jQuery.isPlainObject( src ) ) {
						clone = {};
					} else {
						clone = src;
					}
					copyIsArray = false;

					// Never move original objects, clone them
					target[ name ] = jQuery.extend( deep, clone, copy );

				// Don't bring in undefined values
				} else if ( copy !== undefined ) {
					target[ name ] = copy;
				}
			}
		}
	}

	// Return the modified object
	return target;
};

jQuery.extend( {

	// Unique for each copy of jQuery on the page
	expando: "jQuery" + ( version + Math.random() ).replace( /\D/g, "" ),

	// Assume jQuery is ready without the ready module
	isReady: true,

	error: function( msg ) {
		throw new Error( msg );
	},

	noop: function() {},

	isPlainObject: function( obj ) {
		var proto, Ctor;

		// Detect obvious negatives
		// Use toString instead of jQuery.type to catch host objects
		if ( !obj || toString.call( obj ) !== "[object Object]" ) {
			return false;
		}

		proto = getProto( obj );

		// Objects with no prototype (e.g., `Object.create( null )`) are plain
		if ( !proto ) {
			return true;
		}

		// Objects with prototype are plain iff they were constructed by a global Object function
		Ctor = hasOwn.call( proto, "constructor" ) && proto.constructor;
		return typeof Ctor === "function" && fnToString.call( Ctor ) === ObjectFunctionString;
	},

	isEmptyObject: function( obj ) {
		var name;

		for ( name in obj ) {
			return false;
		}
		return true;
	},

	// Evaluates a script in a global context
	globalEval: function( code, options ) {
		DOMEval( code, { nonce: options && options.nonce } );
	},

	each: function( obj, callback ) {
		var length, i = 0;

		if ( isArrayLike( obj ) ) {
			length = obj.length;
			for ( ; i < length; i++ ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		} else {
			for ( i in obj ) {
				if ( callback.call( obj[ i ], i, obj[ i ] ) === false ) {
					break;
				}
			}
		}

		return obj;
	},

	// Support: Android <=4.0 only
	trim: function( text ) {
		return text == null ?
			"" :
			( text + "" ).replace( rtrim, "" );
	},

	// results is for internal usage only
	makeArray: function( arr, results ) {
		var ret = results || [];

		if ( arr != null ) {
			if ( isArrayLike( Object( arr ) ) ) {
				jQuery.merge( ret,
					typeof arr === "string" ?
					[ arr ] : arr
				);
			} else {
				push.call( ret, arr );
			}
		}

		return ret;
	},

	inArray: function( elem, arr, i ) {
		return arr == null ? -1 : indexOf.call( arr, elem, i );
	},

	// Support: Android <=4.0 only, PhantomJS 1 only
	// push.apply(_, arraylike) throws on ancient WebKit
	merge: function( first, second ) {
		var len = +second.length,
			j = 0,
			i = first.length;

		for ( ; j < len; j++ ) {
			first[ i++ ] = second[ j ];
		}

		first.length = i;

		return first;
	},

	grep: function( elems, callback, invert ) {
		var callbackInverse,
			matches = [],
			i = 0,
			length = elems.length,
			callbackExpect = !invert;

		// Go through the array, only saving the items
		// that pass the validator function
		for ( ; i < length; i++ ) {
			callbackInverse = !callback( elems[ i ], i );
			if ( callbackInverse !== callbackExpect ) {
				matches.push( elems[ i ] );
			}
		}

		return matches;
	},

	// arg is for internal usage only
	map: function( elems, callback, arg ) {
		var length, value,
			i = 0,
			ret = [];

		// Go through the array, translating each of the items to their new values
		if ( isArrayLike( elems ) ) {
			length = elems.length;
			for ( ; i < length; i++ ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}

		// Go through every key on the object,
		} else {
			for ( i in elems ) {
				value = callback( elems[ i ], i, arg );

				if ( value != null ) {
					ret.push( value );
				}
			}
		}

		// Flatten any nested arrays
		return concat.apply( [], ret );
	},

	// A global GUID counter for objects
	guid: 1,

	// jQuery.support is not used in Core but other projects attach their
	// properties to it so it needs to exist.
	support: support
} );

if ( typeof Symbol === "function" ) {
	jQuery.fn[ Symbol.iterator ] = arr[ Symbol.iterator ];
}

// Populate the class2type map
jQuery.each( "Boolean Number String Function Array Date RegExp Object Error Symbol".split( " " ),
function( i, name ) {
	class2type[ "[object " + name + "]" ] = name.toLowerCase();
} );

function isArrayLike( obj ) {

	// Support: real iOS 8.2 only (not reproducible in simulator)
	// `in` check used to prevent JIT error (gh-2145)
	// hasOwn isn't used here due to false negatives
	// regarding Nodelist length in IE
	var length = !!obj && "length" in obj && obj.length,
		type = toType( obj );

	if ( isFunction( obj ) || isWindow( obj ) ) {
		return false;
	}

	return type === "array" || length === 0 ||
		typeof length === "number" && length > 0 && ( length - 1 ) in obj;
}
var Sizzle =
/*!
 * Sizzle CSS Selector Engine v2.3.4
 * https://sizzlejs.com/
 *
 * Copyright JS Foundation and other contributors
 * Released under the MIT license
 * https://js.foundation/
 *
 * Date: 2019-04-08
 */
(function( window ) {

var i,
	support,
	Expr,
	getText,
	isXML,
	tokenize,
	compile,
	select,
	outermostContext,
	sortInput,
	hasDuplicate,

	// Local document vars
	setDocument,
	document,
	docElem,
	documentIsHTML,
	rbuggyQSA,
	rbuggyMatches,
	matches,
	contains,

	// Instance-specific data
	expando = "sizzle" + 1 * new Date(),
	preferredDoc = window.document,
	dirruns = 0,
	done = 0,
	classCache = createCache(),
	tokenCache = createCache(),
	compilerCache = createCache(),
	nonnativeSelectorCache = createCache(),
	sortOrder = function( a, b ) {
		if ( a === b ) {
			hasDuplicate = true;
		}
		return 0;
	},

	// Instance methods
	hasOwn = ({}).hasOwnProperty,
	arr = [],
	pop = arr.pop,
	push_native = arr.push,
	push = arr.push,
	slice = arr.slice,
	// Use a stripped-down indexOf as it's faster than native
	// https://jsperf.com/thor-indexof-vs-for/5
	indexOf = function( list, elem ) {
		var i = 0,
			len = list.length;
		for ( ; i < len; i++ ) {
			if ( list[i] === elem ) {
				return i;
			}
		}
		return -1;
	},

	booleans = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",

	// Regular expressions

	// http://www.w3.org/TR/css3-selectors/#whitespace
	whitespace = "[\\x20\\t\\r\\n\\f]",

	// http://www.w3.org/TR/CSS21/syndata.html#value-def-identifier
	identifier = "(?:\\\\.|[\\w-]|[^\0-\\xa0])+",

	// Attribute selectors: http://www.w3.org/TR/selectors/#attribute-selectors
	attributes = "\\[" + whitespace + "*(" + identifier + ")(?:" + whitespace +
		// Operator (capture 2)
		"*([*^$|!~]?=)" + whitespace +
		// "Attribute values must be CSS identifiers [capture 5] or strings [capture 3 or capture 4]"
		"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + identifier + "))|)" + whitespace +
		"*\\]",

	pseudos = ":(" + identifier + ")(?:\\((" +
		// To reduce the number of selectors needing tokenize in the preFilter, prefer arguments:
		// 1. quoted (capture 3; capture 4 or capture 5)
		"('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|" +
		// 2. simple (capture 6)
		"((?:\\\\.|[^\\\\()[\\]]|" + attributes + ")*)|" +
		// 3. anything else (capture 2)
		".*" +
		")\\)|)",

	// Leading and non-escaped trailing whitespace, capturing some non-whitespace characters preceding the latter
	rwhitespace = new RegExp( whitespace + "+", "g" ),
	rtrim = new RegExp( "^" + whitespace + "+|((?:^|[^\\\\])(?:\\\\.)*)" + whitespace + "+$", "g" ),

	rcomma = new RegExp( "^" + whitespace + "*," + whitespace + "*" ),
	rcombinators = new RegExp( "^" + whitespace + "*([>+~]|" + whitespace + ")" + whitespace + "*" ),
	rdescend = new RegExp( whitespace + "|>" ),

	rpseudo = new RegExp( pseudos ),
	ridentifier = new RegExp( "^" + identifier + "$" ),

	matchExpr = {
		"ID": new RegExp( "^#(" + identifier + ")" ),
		"CLASS": new RegExp( "^\\.(" + identifier + ")" ),
		"TAG": new RegExp( "^(" + identifier + "|[*])" ),
		"ATTR": new RegExp( "^" + attributes ),
		"PSEUDO": new RegExp( "^" + pseudos ),
		"CHILD": new RegExp( "^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + whitespace +
			"*(even|odd|(([+-]|)(\\d*)n|)" + whitespace + "*(?:([+-]|)" + whitespace +
			"*(\\d+)|))" + whitespace + "*\\)|)", "i" ),
		"bool": new RegExp( "^(?:" + booleans + ")$", "i" ),
		// For use in libraries implementing .is()
		// We use this for POS matching in `select`
		"needsContext": new RegExp( "^" + whitespace + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" +
			whitespace + "*((?:-\\d)?\\d*)" + whitespace + "*\\)|)(?=[^-]|$)", "i" )
	},

	rhtml = /HTML$/i,
	rinputs = /^(?:input|select|textarea|button)$/i,
	rheader = /^h\d$/i,

	rnative = /^[^{]+\{\s*\[native \w/,

	// Easily-parseable/retrievable ID or TAG or CLASS selectors
	rquickExpr = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,

	rsibling = /[+~]/,

	// CSS escapes
	// http://www.w3.org/TR/CSS21/syndata.html#escaped-characters
	runescape = new RegExp( "\\\\([\\da-f]{1,6}" + whitespace + "?|(" + whitespace + ")|.)", "ig" ),
	funescape = function( _, escaped, escapedWhitespace ) {
		var high = "0x" + escaped - 0x10000;
		// NaN means non-codepoint
		// Support: Firefox<24
		// Workaround erroneous numeric interpretation of +"0x"
		return high !== high || escapedWhitespace ?
			escaped :
			high < 0 ?
				// BMP codepoint
				String.fromCharCode( high + 0x10000 ) :
				// Supplemental Plane codepoint (surrogate pair)
				String.fromCharCode( high >> 10 | 0xD800, high & 0x3FF | 0xDC00 );
	},

	// CSS string/identifier serialization
	// https://drafts.csswg.org/cssom/#common-serializing-idioms
	rcssescape = /([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,
	fcssescape = function( ch, asCodePoint ) {
		if ( asCodePoint ) {

			// U+0000 NULL becomes U+FFFD REPLACEMENT CHARACTER
			if ( ch === "\0" ) {
				return "\uFFFD";
			}

			// Control characters and (dependent upon position) numbers get escaped as code points
			return ch.slice( 0, -1 ) + "\\" + ch.charCodeAt( ch.length - 1 ).toString( 16 ) + " ";
		}

		// Other potentially-special ASCII characters get backslash-escaped
		return "\\" + ch;
	},

	// Used for iframes
	// See setDocument()
	// Removing the function wrapper causes a "Permission Denied"
	// error in IE
	unloadHandler = function() {
		setDocument();
	},

	inDisabledFieldset = addCombinator(
		function( elem ) {
			return elem.disabled === true && elem.nodeName.toLowerCase() === "fieldset";
		},
		{ dir: "parentNode", next: "legend" }
	);

// Optimize for push.apply( _, NodeList )
try {
	push.apply(
		(arr = slice.call( preferredDoc.childNodes )),
		preferredDoc.childNodes
	);
	// Support: Android<4.0
	// Detect silently failing push.apply
	arr[ preferredDoc.childNodes.length ].nodeType;
} catch ( e ) {
	push = { apply: arr.length ?

		// Leverage slice if possible
		function( target, els ) {
			push_native.apply( target, slice.call(els) );
		} :

		// Support: IE<9
		// Otherwise append directly
		function( target, els ) {
			var j = target.length,
				i = 0;
			// Can't trust NodeList.length
			while ( (target[j++] = els[i++]) ) {}
			target.length = j - 1;
		}
	};
}

function Sizzle( selector, context, results, seed ) {
	var m, i, elem, nid, match, groups, newSelector,
		newContext = context && context.ownerDocument,

		// nodeType defaults to 9, since context defaults to document
		nodeType = context ? context.nodeType : 9;

	results = results || [];

	// Return early from calls with invalid selector or context
	if ( typeof selector !== "string" || !selector ||
		nodeType !== 1 && nodeType !== 9 && nodeType !== 11 ) {

		return results;
	}

	// Try to shortcut find operations (as opposed to filters) in HTML documents
	if ( !seed ) {

		if ( ( context ? context.ownerDocument || context : preferredDoc ) !== document ) {
			setDocument( context );
		}
		context = context || document;

		if ( documentIsHTML ) {

			// If the selector is sufficiently simple, try using a "get*By*" DOM method
			// (excepting DocumentFragment context, where the methods don't exist)
			if ( nodeType !== 11 && (match = rquickExpr.exec( selector )) ) {

				// ID selector
				if ( (m = match[1]) ) {

					// Document context
					if ( nodeType === 9 ) {
						if ( (elem = context.getElementById( m )) ) {

							// Support: IE, Opera, Webkit
							// TODO: identify versions
							// getElementById can match elements by name instead of ID
							if ( elem.id === m ) {
								results.push( elem );
								return results;
							}
						} else {
							return results;
						}

					// Element context
					} else {

						// Support: IE, Opera, Webkit
						// TODO: identify versions
						// getElementById can match elements by name instead of ID
						if ( newContext && (elem = newContext.getElementById( m )) &&
							contains( context, elem ) &&
							elem.id === m ) {

							results.push( elem );
							return results;
						}
					}

				// Type selector
				} else if ( match[2] ) {
					push.apply( results, context.getElementsByTagName( selector ) );
					return results;

				// Class selector
				} else if ( (m = match[3]) && support.getElementsByClassName &&
					context.getElementsByClassName ) {

					push.apply( results, context.getElementsByClassName( m ) );
					return results;
				}
			}

			// Take advantage of querySelectorAll
			if ( support.qsa &&
				!nonnativeSelectorCache[ selector + " " ] &&
				(!rbuggyQSA || !rbuggyQSA.test( selector )) &&

				// Support: IE 8 only
				// Exclude object elements
				(nodeType !== 1 || context.nodeName.toLowerCase() !== "object") ) {

				newSelector = selector;
				newContext = context;

				// qSA considers elements outside a scoping root when evaluating child or
				// descendant combinators, which is not what we want.
				// In such cases, we work around the behavior by prefixing every selector in the
				// list with an ID selector referencing the scope context.
				// Thanks to Andrew Dupont for this technique.
				if ( nodeType === 1 && rdescend.test( selector ) ) {

					// Capture the context ID, setting it first if necessary
					if ( (nid = context.getAttribute( "id" )) ) {
						nid = nid.replace( rcssescape, fcssescape );
					} else {
						context.setAttribute( "id", (nid = expando) );
					}

					// Prefix every selector in the list
					groups = tokenize( selector );
					i = groups.length;
					while ( i-- ) {
						groups[i] = "#" + nid + " " + toSelector( groups[i] );
					}
					newSelector = groups.join( "," );

					// Expand context for sibling selectors
					newContext = rsibling.test( selector ) && testContext( context.parentNode ) ||
						context;
				}

				try {
					push.apply( results,
						newContext.querySelectorAll( newSelector )
					);
					return results;
				} catch ( qsaError ) {
					nonnativeSelectorCache( selector, true );
				} finally {
					if ( nid === expando ) {
						context.removeAttribute( "id" );
					}
				}
			}
		}
	}

	// All others
	return select( selector.replace( rtrim, "$1" ), context, results, seed );
}

/**
 * Create key-value caches of limited size
 * @returns {function(string, object)} Returns the Object data after storing it on itself with
 *	property name the (space-suffixed) string and (if the cache is larger than Expr.cacheLength)
 *	deleting the oldest entry
 */
function createCache() {
	var keys = [];

	function cache( key, value ) {
		// Use (key + " ") to avoid collision with native prototype properties (see Issue #157)
		if ( keys.push( key + " " ) > Expr.cacheLength ) {
			// Only keep the most recent entries
			delete cache[ keys.shift() ];
		}
		return (cache[ key + " " ] = value);
	}
	return cache;
}

/**
 * Mark a function for special use by Sizzle
 * @param {Function} fn The function to mark
 */
function markFunction( fn ) {
	fn[ expando ] = true;
	return fn;
}

/**
 * Support testing using an element
 * @param {Function} fn Passed the created element and returns a boolean result
 */
function assert( fn ) {
	var el = document.createElement("fieldset");

	try {
		return !!fn( el );
	} catch (e) {
		return false;
	} finally {
		// Remove from its parent by default
		if ( el.parentNode ) {
			el.parentNode.removeChild( el );
		}
		// release memory in IE
		el = null;
	}
}

/**
 * Adds the same handler for all of the specified attrs
 * @param {String} attrs Pipe-separated list of attributes
 * @param {Function} handler The method that will be applied
 */
function addHandle( attrs, handler ) {
	var arr = attrs.split("|"),
		i = arr.length;

	while ( i-- ) {
		Expr.attrHandle[ arr[i] ] = handler;
	}
}

/**
 * Checks document order of two siblings
 * @param {Element} a
 * @param {Element} b
 * @returns {Number} Returns less than 0 if a precedes b, greater than 0 if a follows b
 */
function siblingCheck( a, b ) {
	var cur = b && a,
		diff = cur && a.nodeType === 1 && b.nodeType === 1 &&
			a.sourceIndex - b.sourceIndex;

	// Use IE sourceIndex if available on both nodes
	if ( diff ) {
		return diff;
	}

	// Check if b follows a
	if ( cur ) {
		while ( (cur = cur.nextSibling) ) {
			if ( cur === b ) {
				return -1;
			}
		}
	}

	return a ? 1 : -1;
}

/**
 * Returns a function to use in pseudos for input types
 * @param {String} type
 */
function createInputPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return name === "input" && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for buttons
 * @param {String} type
 */
function createButtonPseudo( type ) {
	return function( elem ) {
		var name = elem.nodeName.toLowerCase();
		return (name === "input" || name === "button") && elem.type === type;
	};
}

/**
 * Returns a function to use in pseudos for :enabled/:disabled
 * @param {Boolean} disabled true for :disabled; false for :enabled
 */
function createDisabledPseudo( disabled ) {

	// Known :disabled false positives: fieldset[disabled] > legend:nth-of-type(n+2) :can-disable
	return function( elem ) {

		// Only certain elements can match :enabled or :disabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-enabled
		// https://html.spec.whatwg.org/multipage/scripting.html#selector-disabled
		if ( "form" in elem ) {

			// Check for inherited disabledness on relevant non-disabled elements:
			// * listed form-associated elements in a disabled fieldset
			//   https://html.spec.whatwg.org/multipage/forms.html#category-listed
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-fe-disabled
			// * option elements in a disabled optgroup
			//   https://html.spec.whatwg.org/multipage/forms.html#concept-option-disabled
			// All such elements have a "form" property.
			if ( elem.parentNode && elem.disabled === false ) {

				// Option elements defer to a parent optgroup if present
				if ( "label" in elem ) {
					if ( "label" in elem.parentNode ) {
						return elem.parentNode.disabled === disabled;
					} else {
						return elem.disabled === disabled;
					}
				}

				// Support: IE 6 - 11
				// Use the isDisabled shortcut property to check for disabled fieldset ancestors
				return elem.isDisabled === disabled ||

					// Where there is no isDisabled, check manually
					/* jshint -W018 */
					elem.isDisabled !== !disabled &&
						inDisabledFieldset( elem ) === disabled;
			}

			return elem.disabled === disabled;

		// Try to winnow out elements that can't be disabled before trusting the disabled property.
		// Some victims get caught in our net (label, legend, menu, track), but it shouldn't
		// even exist on them, let alone have a boolean value.
		} else if ( "label" in elem ) {
			return elem.disabled === disabled;
		}

		// Remaining elements are neither :enabled nor :disabled
		return false;
	};
}

/**
 * Returns a function to use in pseudos for positionals
 * @param {Function} fn
 */
function createPositionalPseudo( fn ) {
	return markFunction(function( argument ) {
		argument = +argument;
		return markFunction(function( seed, matches ) {
			var j,
				matchIndexes = fn( [], seed.length, argument ),
				i = matchIndexes.length;

			// Match elements found at the specified indexes
			while ( i-- ) {
				if ( seed[ (j = matchIndexes[i]) ] ) {
					seed[j] = !(matches[j] = seed[j]);
				}
			}
		});
	});
}

/**
 * Checks a node for validity as a Sizzle context
 * @param {Element|Object=} context
 * @returns {Element|Object|Boolean} The input node if acceptable, otherwise a falsy value
 */
function testContext( context ) {
	return context && typeof context.getElementsByTagName !== "undefined" && context;
}

// Expose support vars for convenience
support = Sizzle.support = {};

/**
 * Detects XML nodes
 * @param {Element|Object} elem An element or a document
 * @returns {Boolean} True iff elem is a non-HTML XML node
 */
isXML = Sizzle.isXML = function( elem ) {
	var namespace = elem.namespaceURI,
		docElem = (elem.ownerDocument || elem).documentElement;

	// Support: IE <=8
	// Assume HTML when documentElement doesn't yet exist, such as inside loading iframes
	// https://bugs.jquery.com/ticket/4833
	return !rhtml.test( namespace || docElem && docElem.nodeName || "HTML" );
};

/**
 * Sets document-related variables once based on the current document
 * @param {Element|Object} [doc] An element or document object to use to set the document
 * @returns {Object} Returns the current document
 */
setDocument = Sizzle.setDocument = function( node ) {
	var hasCompare, subWindow,
		doc = node ? node.ownerDocument || node : preferredDoc;

	// Return early if doc is invalid or already selected
	if ( doc === document || doc.nodeType !== 9 || !doc.documentElement ) {
		return document;
	}

	// Update global variables
	document = doc;
	docElem = document.documentElement;
	documentIsHTML = !isXML( document );

	// Support: IE 9-11, Edge
	// Accessing iframe documents after unload throws "permission denied" errors (jQuery #13936)
	if ( preferredDoc !== document &&
		(subWindow = document.defaultView) && subWindow.top !== subWindow ) {

		// Support: IE 11, Edge
		if ( subWindow.addEventListener ) {
			subWindow.addEventListener( "unload", unloadHandler, false );

		// Support: IE 9 - 10 only
		} else if ( subWindow.attachEvent ) {
			subWindow.attachEvent( "onunload", unloadHandler );
		}
	}

	/* Attributes
	---------------------------------------------------------------------- */

	// Support: IE<8
	// Verify that getAttribute really returns attributes and not properties
	// (excepting IE8 booleans)
	support.attributes = assert(function( el ) {
		el.className = "i";
		return !el.getAttribute("className");
	});

	/* getElement(s)By*
	---------------------------------------------------------------------- */

	// Check if getElementsByTagName("*") returns only elements
	support.getElementsByTagName = assert(function( el ) {
		el.appendChild( document.createComment("") );
		return !el.getElementsByTagName("*").length;
	});

	// Support: IE<9
	support.getElementsByClassName = rnative.test( document.getElementsByClassName );

	// Support: IE<10
	// Check if getElementById returns elements by name
	// The broken getElementById methods don't pick up programmatically-set names,
	// so use a roundabout getElementsByName test
	support.getById = assert(function( el ) {
		docElem.appendChild( el ).id = expando;
		return !document.getElementsByName || !document.getElementsByName( expando ).length;
	});

	// ID filter and find
	if ( support.getById ) {
		Expr.filter["ID"] = function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				return elem.getAttribute("id") === attrId;
			};
		};
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var elem = context.getElementById( id );
				return elem ? [ elem ] : [];
			}
		};
	} else {
		Expr.filter["ID"] =  function( id ) {
			var attrId = id.replace( runescape, funescape );
			return function( elem ) {
				var node = typeof elem.getAttributeNode !== "undefined" &&
					elem.getAttributeNode("id");
				return node && node.value === attrId;
			};
		};

		// Support: IE 6 - 7 only
		// getElementById is not reliable as a find shortcut
		Expr.find["ID"] = function( id, context ) {
			if ( typeof context.getElementById !== "undefined" && documentIsHTML ) {
				var node, i, elems,
					elem = context.getElementById( id );

				if ( elem ) {

					// Verify the id attribute
					node = elem.getAttributeNode("id");
					if ( node && node.value === id ) {
						return [ elem ];
					}

					// Fall back on getElementsByName
					elems = context.getElementsByName( id );
					i = 0;
					while ( (elem = elems[i++]) ) {
						node = elem.getAttributeNode("id");
						if ( node && node.value === id ) {
							return [ elem ];
						}
					}
				}

				return [];
			}
		};
	}

	// Tag
	Expr.find["TAG"] = support.getElementsByTagName ?
		function( tag, context ) {
			if ( typeof context.getElementsByTagName !== "undefined" ) {
				return context.getElementsByTagName( tag );

			// DocumentFragment nodes don't have gEBTN
			} else if ( support.qsa ) {
				return context.querySelectorAll( tag );
			}
		} :

		function( tag, context ) {
			var elem,
				tmp = [],
				i = 0,
				// By happy coincidence, a (broken) gEBTN appears on DocumentFragment nodes too
				results = context.getElementsByTagName( tag );

			// Filter out possible comments
			if ( tag === "*" ) {
				while ( (elem = results[i++]) ) {
					if ( elem.nodeType === 1 ) {
						tmp.push( elem );
					}
				}

				return tmp;
			}
			return results;
		};

	// Class
	Expr.find["CLASS"] = support.getElementsByClassName && function( className, context ) {
		if ( typeof context.getElementsByClassName !== "undefined" && documentIsHTML ) {
			return context.getElementsByClassName( className );
		}
	};

	/* QSA/matchesSelector
	---------------------------------------------------------------------- */

	// QSA and matchesSelector support

	// matchesSelector(:active) reports false when true (IE9/Opera 11.5)
	rbuggyMatches = [];

	// qSa(:focus) reports false when true (Chrome 21)
	// We allow this because of a bug in IE8/9 that throws an error
	// whenever `document.activeElement` is accessed on an iframe
	// So, we allow :focus to pass through QSA all the time to avoid the IE error
	// See https://bugs.jquery.com/ticket/13378
	rbuggyQSA = [];

	if ( (support.qsa = rnative.test( document.querySelectorAll )) ) {
		// Build QSA regex
		// Regex strategy adopted from Diego Perini
		assert(function( el ) {
			// Select is set to empty string on purpose
			// This is to test IE's treatment of not explicitly
			// setting a boolean content attribute,
			// since its presence should be enough
			// https://bugs.jquery.com/ticket/12359
			docElem.appendChild( el ).innerHTML = "<a id='" + expando + "'></a>" +
				"<select id='" + expando + "-\r\\' msallowcapture=''>" +
				"<option selected=''></option></select>";

			// Support: IE8, Opera 11-12.16
			// Nothing should be selected when empty strings follow ^= or $= or *=
			// The test attribute must be unknown in Opera but "safe" for WinRT
			// https://msdn.microsoft.com/en-us/library/ie/hh465388.aspx#attribute_section
			if ( el.querySelectorAll("[msallowcapture^='']").length ) {
				rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:''|\"\")" );
			}

			// Support: IE8
			// Boolean attributes and "value" are not treated correctly
			if ( !el.querySelectorAll("[selected]").length ) {
				rbuggyQSA.push( "\\[" + whitespace + "*(?:value|" + booleans + ")" );
			}

			// Support: Chrome<29, Android<4.4, Safari<7.0+, iOS<7.0+, PhantomJS<1.9.8+
			if ( !el.querySelectorAll( "[id~=" + expando + "-]" ).length ) {
				rbuggyQSA.push("~=");
			}

			// Webkit/Opera - :checked should return selected option elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			// IE8 throws error here and will not see later tests
			if ( !el.querySelectorAll(":checked").length ) {
				rbuggyQSA.push(":checked");
			}

			// Support: Safari 8+, iOS 8+
			// https://bugs.webkit.org/show_bug.cgi?id=136851
			// In-page `selector#id sibling-combinator selector` fails
			if ( !el.querySelectorAll( "a#" + expando + "+*" ).length ) {
				rbuggyQSA.push(".#.+[+~]");
			}
		});

		assert(function( el ) {
			el.innerHTML = "<a href='' disabled='disabled'></a>" +
				"<select disabled='disabled'><option/></select>";

			// Support: Windows 8 Native Apps
			// The type and name attributes are restricted during .innerHTML assignment
			var input = document.createElement("input");
			input.setAttribute( "type", "hidden" );
			el.appendChild( input ).setAttribute( "name", "D" );

			// Support: IE8
			// Enforce case-sensitivity of name attribute
			if ( el.querySelectorAll("[name=d]").length ) {
				rbuggyQSA.push( "name" + whitespace + "*[*^$|!~]?=" );
			}

			// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
			// IE8 throws error here and will not see later tests
			if ( el.querySelectorAll(":enabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Support: IE9-11+
			// IE's :disabled selector does not pick up the children of disabled fieldsets
			docElem.appendChild( el ).disabled = true;
			if ( el.querySelectorAll(":disabled").length !== 2 ) {
				rbuggyQSA.push( ":enabled", ":disabled" );
			}

			// Opera 10-11 does not throw on post-comma invalid pseudos
			el.querySelectorAll("*,:x");
			rbuggyQSA.push(",.*:");
		});
	}

	if ( (support.matchesSelector = rnative.test( (matches = docElem.matches ||
		docElem.webkitMatchesSelector ||
		docElem.mozMatchesSelector ||
		docElem.oMatchesSelector ||
		docElem.msMatchesSelector) )) ) {

		assert(function( el ) {
			// Check to see if it's possible to do matchesSelector
			// on a disconnected node (IE 9)
			support.disconnectedMatch = matches.call( el, "*" );

			// This should fail with an exception
			// Gecko does not error, returns false instead
			matches.call( el, "[s!='']:x" );
			rbuggyMatches.push( "!=", pseudos );
		});
	}

	rbuggyQSA = rbuggyQSA.length && new RegExp( rbuggyQSA.join("|") );
	rbuggyMatches = rbuggyMatches.length && new RegExp( rbuggyMatches.join("|") );

	/* Contains
	---------------------------------------------------------------------- */
	hasCompare = rnative.test( docElem.compareDocumentPosition );

	// Element contains another
	// Purposefully self-exclusive
	// As in, an element does not contain itself
	contains = hasCompare || rnative.test( docElem.contains ) ?
		function( a, b ) {
			var adown = a.nodeType === 9 ? a.documentElement : a,
				bup = b && b.parentNode;
			return a === bup || !!( bup && bup.nodeType === 1 && (
				adown.contains ?
					adown.contains( bup ) :
					a.compareDocumentPosition && a.compareDocumentPosition( bup ) & 16
			));
		} :
		function( a, b ) {
			if ( b ) {
				while ( (b = b.parentNode) ) {
					if ( b === a ) {
						return true;
					}
				}
			}
			return false;
		};

	/* Sorting
	---------------------------------------------------------------------- */

	// Document order sorting
	sortOrder = hasCompare ?
	function( a, b ) {

		// Flag for duplicate removal
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		// Sort on method existence if only one input has compareDocumentPosition
		var compare = !a.compareDocumentPosition - !b.compareDocumentPosition;
		if ( compare ) {
			return compare;
		}

		// Calculate position if both inputs belong to the same document
		compare = ( a.ownerDocument || a ) === ( b.ownerDocument || b ) ?
			a.compareDocumentPosition( b ) :

			// Otherwise we know they are disconnected
			1;

		// Disconnected nodes
		if ( compare & 1 ||
			(!support.sortDetached && b.compareDocumentPosition( a ) === compare) ) {

			// Choose the first element that is related to our preferred document
			if ( a === document || a.ownerDocument === preferredDoc && contains(preferredDoc, a) ) {
				return -1;
			}
			if ( b === document || b.ownerDocument === preferredDoc && contains(preferredDoc, b) ) {
				return 1;
			}

			// Maintain original order
			return sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;
		}

		return compare & 4 ? -1 : 1;
	} :
	function( a, b ) {
		// Exit early if the nodes are identical
		if ( a === b ) {
			hasDuplicate = true;
			return 0;
		}

		var cur,
			i = 0,
			aup = a.parentNode,
			bup = b.parentNode,
			ap = [ a ],
			bp = [ b ];

		// Parentless nodes are either documents or disconnected
		if ( !aup || !bup ) {
			return a === document ? -1 :
				b === document ? 1 :
				aup ? -1 :
				bup ? 1 :
				sortInput ?
				( indexOf( sortInput, a ) - indexOf( sortInput, b ) ) :
				0;

		// If the nodes are siblings, we can do a quick check
		} else if ( aup === bup ) {
			return siblingCheck( a, b );
		}

		// Otherwise we need full lists of their ancestors for comparison
		cur = a;
		while ( (cur = cur.parentNode) ) {
			ap.unshift( cur );
		}
		cur = b;
		while ( (cur = cur.parentNode) ) {
			bp.unshift( cur );
		}

		// Walk down the tree looking for a discrepancy
		while ( ap[i] === bp[i] ) {
			i++;
		}

		return i ?
			// Do a sibling check if the nodes have a common ancestor
			siblingCheck( ap[i], bp[i] ) :

			// Otherwise nodes in our document sort first
			ap[i] === preferredDoc ? -1 :
			bp[i] === preferredDoc ? 1 :
			0;
	};

	return document;
};

Sizzle.matches = function( expr, elements ) {
	return Sizzle( expr, null, null, elements );
};

Sizzle.matchesSelector = function( elem, expr ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	if ( support.matchesSelector && documentIsHTML &&
		!nonnativeSelectorCache[ expr + " " ] &&
		( !rbuggyMatches || !rbuggyMatches.test( expr ) ) &&
		( !rbuggyQSA     || !rbuggyQSA.test( expr ) ) ) {

		try {
			var ret = matches.call( elem, expr );

			// IE 9's matchesSelector returns false on disconnected nodes
			if ( ret || support.disconnectedMatch ||
					// As well, disconnected nodes are said to be in a document
					// fragment in IE 9
					elem.document && elem.document.nodeType !== 11 ) {
				return ret;
			}
		} catch (e) {
			nonnativeSelectorCache( expr, true );
		}
	}

	return Sizzle( expr, document, null, [ elem ] ).length > 0;
};

Sizzle.contains = function( context, elem ) {
	// Set document vars if needed
	if ( ( context.ownerDocument || context ) !== document ) {
		setDocument( context );
	}
	return contains( context, elem );
};

Sizzle.attr = function( elem, name ) {
	// Set document vars if needed
	if ( ( elem.ownerDocument || elem ) !== document ) {
		setDocument( elem );
	}

	var fn = Expr.attrHandle[ name.toLowerCase() ],
		// Don't get fooled by Object.prototype properties (jQuery #13807)
		val = fn && hasOwn.call( Expr.attrHandle, name.toLowerCase() ) ?
			fn( elem, name, !documentIsHTML ) :
			undefined;

	return val !== undefined ?
		val :
		support.attributes || !documentIsHTML ?
			elem.getAttribute( name ) :
			(val = elem.getAttributeNode(name)) && val.specified ?
				val.value :
				null;
};

Sizzle.escape = function( sel ) {
	return (sel + "").replace( rcssescape, fcssescape );
};

Sizzle.error = function( msg ) {
	throw new Error( "Syntax error, unrecognized expression: " + msg );
};

/**
 * Document sorting and removing duplicates
 * @param {ArrayLike} results
 */
Sizzle.uniqueSort = function( results ) {
	var elem,
		duplicates = [],
		j = 0,
		i = 0;

	// Unless we *know* we can detect duplicates, assume their presence
	hasDuplicate = !support.detectDuplicates;
	sortInput = !support.sortStable && results.slice( 0 );
	results.sort( sortOrder );

	if ( hasDuplicate ) {
		while ( (elem = results[i++]) ) {
			if ( elem === results[ i ] ) {
				j = duplicates.push( i );
			}
		}
		while ( j-- ) {
			results.splice( duplicates[ j ], 1 );
		}
	}

	// Clear input after sorting to release objects
	// See https://github.com/jquery/sizzle/pull/225
	sortInput = null;

	return results;
};

/**
 * Utility function for retrieving the text value of an array of DOM nodes
 * @param {Array|Element} elem
 */
getText = Sizzle.getText = function( elem ) {
	var node,
		ret = "",
		i = 0,
		nodeType = elem.nodeType;

	if ( !nodeType ) {
		// If no nodeType, this is expected to be an array
		while ( (node = elem[i++]) ) {
			// Do not traverse comment nodes
			ret += getText( node );
		}
	} else if ( nodeType === 1 || nodeType === 9 || nodeType === 11 ) {
		// Use textContent for elements
		// innerText usage removed for consistency of new lines (jQuery #11153)
		if ( typeof elem.textContent === "string" ) {
			return elem.textContent;
		} else {
			// Traverse its children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				ret += getText( elem );
			}
		}
	} else if ( nodeType === 3 || nodeType === 4 ) {
		return elem.nodeValue;
	}
	// Do not include comment or processing instruction nodes

	return ret;
};

Expr = Sizzle.selectors = {

	// Can be adjusted by the user
	cacheLength: 50,

	createPseudo: markFunction,

	match: matchExpr,

	attrHandle: {},

	find: {},

	relative: {
		">": { dir: "parentNode", first: true },
		" ": { dir: "parentNode" },
		"+": { dir: "previousSibling", first: true },
		"~": { dir: "previousSibling" }
	},

	preFilter: {
		"ATTR": function( match ) {
			match[1] = match[1].replace( runescape, funescape );

			// Move the given value to match[3] whether quoted or unquoted
			match[3] = ( match[3] || match[4] || match[5] || "" ).replace( runescape, funescape );

			if ( match[2] === "~=" ) {
				match[3] = " " + match[3] + " ";
			}

			return match.slice( 0, 4 );
		},

		"CHILD": function( match ) {
			/* matches from matchExpr["CHILD"]
				1 type (only|nth|...)
				2 what (child|of-type)
				3 argument (even|odd|\d*|\d*n([+-]\d+)?|...)
				4 xn-component of xn+y argument ([+-]?\d*n|)
				5 sign of xn-component
				6 x of xn-component
				7 sign of y-component
				8 y of y-component
			*/
			match[1] = match[1].toLowerCase();

			if ( match[1].slice( 0, 3 ) === "nth" ) {
				// nth-* requires argument
				if ( !match[3] ) {
					Sizzle.error( match[0] );
				}

				// numeric x and y parameters for Expr.filter.CHILD
				// remember that false/true cast respectively to 0/1
				match[4] = +( match[4] ? match[5] + (match[6] || 1) : 2 * ( match[3] === "even" || match[3] === "odd" ) );
				match[5] = +( ( match[7] + match[8] ) || match[3] === "odd" );

			// other types prohibit arguments
			} else if ( match[3] ) {
				Sizzle.error( match[0] );
			}

			return match;
		},

		"PSEUDO": function( match ) {
			var excess,
				unquoted = !match[6] && match[2];

			if ( matchExpr["CHILD"].test( match[0] ) ) {
				return null;
			}

			// Accept quoted arguments as-is
			if ( match[3] ) {
				match[2] = match[4] || match[5] || "";

			// Strip excess characters from unquoted arguments
			} else if ( unquoted && rpseudo.test( unquoted ) &&
				// Get excess from tokenize (recursively)
				(excess = tokenize( unquoted, true )) &&
				// advance to the next closing parenthesis
				(excess = unquoted.indexOf( ")", unquoted.length - excess ) - unquoted.length) ) {

				// excess is a negative index
				match[0] = match[0].slice( 0, excess );
				match[2] = unquoted.slice( 0, excess );
			}

			// Return only captures needed by the pseudo filter method (type and argument)
			return match.slice( 0, 3 );
		}
	},

	filter: {

		"TAG": function( nodeNameSelector ) {
			var nodeName = nodeNameSelector.replace( runescape, funescape ).toLowerCase();
			return nodeNameSelector === "*" ?
				function() { return true; } :
				function( elem ) {
					return elem.nodeName && elem.nodeName.toLowerCase() === nodeName;
				};
		},

		"CLASS": function( className ) {
			var pattern = classCache[ className + " " ];

			return pattern ||
				(pattern = new RegExp( "(^|" + whitespace + ")" + className + "(" + whitespace + "|$)" )) &&
				classCache( className, function( elem ) {
					return pattern.test( typeof elem.className === "string" && elem.className || typeof elem.getAttribute !== "undefined" && elem.getAttribute("class") || "" );
				});
		},

		"ATTR": function( name, operator, check ) {
			return function( elem ) {
				var result = Sizzle.attr( elem, name );

				if ( result == null ) {
					return operator === "!=";
				}
				if ( !operator ) {
					return true;
				}

				result += "";

				return operator === "=" ? result === check :
					operator === "!=" ? result !== check :
					operator === "^=" ? check && result.indexOf( check ) === 0 :
					operator === "*=" ? check && result.indexOf( check ) > -1 :
					operator === "$=" ? check && result.slice( -check.length ) === check :
					operator === "~=" ? ( " " + result.replace( rwhitespace, " " ) + " " ).indexOf( check ) > -1 :
					operator === "|=" ? result === check || result.slice( 0, check.length + 1 ) === check + "-" :
					false;
			};
		},

		"CHILD": function( type, what, argument, first, last ) {
			var simple = type.slice( 0, 3 ) !== "nth",
				forward = type.slice( -4 ) !== "last",
				ofType = what === "of-type";

			return first === 1 && last === 0 ?

				// Shortcut for :nth-*(n)
				function( elem ) {
					return !!elem.parentNode;
				} :

				function( elem, context, xml ) {
					var cache, uniqueCache, outerCache, node, nodeIndex, start,
						dir = simple !== forward ? "nextSibling" : "previousSibling",
						parent = elem.parentNode,
						name = ofType && elem.nodeName.toLowerCase(),
						useCache = !xml && !ofType,
						diff = false;

					if ( parent ) {

						// :(first|last|only)-(child|of-type)
						if ( simple ) {
							while ( dir ) {
								node = elem;
								while ( (node = node[ dir ]) ) {
									if ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) {

										return false;
									}
								}
								// Reverse direction for :only-* (if we haven't yet done so)
								start = dir = type === "only" && !start && "nextSibling";
							}
							return true;
						}

						start = [ forward ? parent.firstChild : parent.lastChild ];

						// non-xml :nth-child(...) stores cache data on `parent`
						if ( forward && useCache ) {

							// Seek `elem` from a previously-cached index

							// ...in a gzip-friendly way
							node = parent;
							outerCache = node[ expando ] || (node[ expando ] = {});

							// Support: IE <9 only
							// Defend against cloned attroperties (jQuery gh-1709)
							uniqueCache = outerCache[ node.uniqueID ] ||
								(outerCache[ node.uniqueID ] = {});

							cache = uniqueCache[ type ] || [];
							nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
							diff = nodeIndex && cache[ 2 ];
							node = nodeIndex && parent.childNodes[ nodeIndex ];

							while ( (node = ++nodeIndex && node && node[ dir ] ||

								// Fallback to seeking `elem` from the start
								(diff = nodeIndex = 0) || start.pop()) ) {

								// When found, cache indexes on `parent` and break
								if ( node.nodeType === 1 && ++diff && node === elem ) {
									uniqueCache[ type ] = [ dirruns, nodeIndex, diff ];
									break;
								}
							}

						} else {
							// Use previously-cached element index if available
							if ( useCache ) {
								// ...in a gzip-friendly way
								node = elem;
								outerCache = node[ expando ] || (node[ expando ] = {});

								// Support: IE <9 only
								// Defend against cloned attroperties (jQuery gh-1709)
								uniqueCache = outerCache[ node.uniqueID ] ||
									(outerCache[ node.uniqueID ] = {});

								cache = uniqueCache[ type ] || [];
								nodeIndex = cache[ 0 ] === dirruns && cache[ 1 ];
								diff = nodeIndex;
							}

							// xml :nth-child(...)
							// or :nth-last-child(...) or :nth(-last)?-of-type(...)
							if ( diff === false ) {
								// Use the same loop as above to seek `elem` from the start
								while ( (node = ++nodeIndex && node && node[ dir ] ||
									(diff = nodeIndex = 0) || start.pop()) ) {

									if ( ( ofType ?
										node.nodeName.toLowerCase() === name :
										node.nodeType === 1 ) &&
										++diff ) {

										// Cache the index of each encountered element
										if ( useCache ) {
											outerCache = node[ expando ] || (node[ expando ] = {});

											// Support: IE <9 only
											// Defend against cloned attroperties (jQuery gh-1709)
											uniqueCache = outerCache[ node.uniqueID ] ||
												(outerCache[ node.uniqueID ] = {});

											uniqueCache[ type ] = [ dirruns, diff ];
										}

										if ( node === elem ) {
											break;
										}
									}
								}
							}
						}

						// Incorporate the offset, then check against cycle size
						diff -= last;
						return diff === first || ( diff % first === 0 && diff / first >= 0 );
					}
				};
		},

		"PSEUDO": function( pseudo, argument ) {
			// pseudo-class names are case-insensitive
			// http://www.w3.org/TR/selectors/#pseudo-classes
			// Prioritize by case sensitivity in case custom pseudos are added with uppercase letters
			// Remember that setFilters inherits from pseudos
			var args,
				fn = Expr.pseudos[ pseudo ] || Expr.setFilters[ pseudo.toLowerCase() ] ||
					Sizzle.error( "unsupported pseudo: " + pseudo );

			// The user may use createPseudo to indicate that
			// arguments are needed to create the filter function
			// just as Sizzle does
			if ( fn[ expando ] ) {
				return fn( argument );
			}

			// But maintain support for old signatures
			if ( fn.length > 1 ) {
				args = [ pseudo, pseudo, "", argument ];
				return Expr.setFilters.hasOwnProperty( pseudo.toLowerCase() ) ?
					markFunction(function( seed, matches ) {
						var idx,
							matched = fn( seed, argument ),
							i = matched.length;
						while ( i-- ) {
							idx = indexOf( seed, matched[i] );
							seed[ idx ] = !( matches[ idx ] = matched[i] );
						}
					}) :
					function( elem ) {
						return fn( elem, 0, args );
					};
			}

			return fn;
		}
	},

	pseudos: {
		// Potentially complex pseudos
		"not": markFunction(function( selector ) {
			// Trim the selector passed to compile
			// to avoid treating leading and trailing
			// spaces as combinators
			var input = [],
				results = [],
				matcher = compile( selector.replace( rtrim, "$1" ) );

			return matcher[ expando ] ?
				markFunction(function( seed, matches, context, xml ) {
					var elem,
						unmatched = matcher( seed, null, xml, [] ),
						i = seed.length;

					// Match elements unmatched by `matcher`
					while ( i-- ) {
						if ( (elem = unmatched[i]) ) {
							seed[i] = !(matches[i] = elem);
						}
					}
				}) :
				function( elem, context, xml ) {
					input[0] = elem;
					matcher( input, null, xml, results );
					// Don't keep the element (issue #299)
					input[0] = null;
					return !results.pop();
				};
		}),

		"has": markFunction(function( selector ) {
			return function( elem ) {
				return Sizzle( selector, elem ).length > 0;
			};
		}),

		"contains": markFunction(function( text ) {
			text = text.replace( runescape, funescape );
			return function( elem ) {
				return ( elem.textContent || getText( elem ) ).indexOf( text ) > -1;
			};
		}),

		// "Whether an element is represented by a :lang() selector
		// is based solely on the element's language value
		// being equal to the identifier C,
		// or beginning with the identifier C immediately followed by "-".
		// The matching of C against the element's language value is performed case-insensitively.
		// The identifier C does not have to be a valid language name."
		// http://www.w3.org/TR/selectors/#lang-pseudo
		"lang": markFunction( function( lang ) {
			// lang value must be a valid identifier
			if ( !ridentifier.test(lang || "") ) {
				Sizzle.error( "unsupported lang: " + lang );
			}
			lang = lang.replace( runescape, funescape ).toLowerCase();
			return function( elem ) {
				var elemLang;
				do {
					if ( (elemLang = documentIsHTML ?
						elem.lang :
						elem.getAttribute("xml:lang") || elem.getAttribute("lang")) ) {

						elemLang = elemLang.toLowerCase();
						return elemLang === lang || elemLang.indexOf( lang + "-" ) === 0;
					}
				} while ( (elem = elem.parentNode) && elem.nodeType === 1 );
				return false;
			};
		}),

		// Miscellaneous
		"target": function( elem ) {
			var hash = window.location && window.location.hash;
			return hash && hash.slice( 1 ) === elem.id;
		},

		"root": function( elem ) {
			return elem === docElem;
		},

		"focus": function( elem ) {
			return elem === document.activeElement && (!document.hasFocus || document.hasFocus()) && !!(elem.type || elem.href || ~elem.tabIndex);
		},

		// Boolean properties
		"enabled": createDisabledPseudo( false ),
		"disabled": createDisabledPseudo( true ),

		"checked": function( elem ) {
			// In CSS3, :checked should return both checked and selected elements
			// http://www.w3.org/TR/2011/REC-css3-selectors-20110929/#checked
			var nodeName = elem.nodeName.toLowerCase();
			return (nodeName === "input" && !!elem.checked) || (nodeName === "option" && !!elem.selected);
		},

		"selected": function( elem ) {
			// Accessing this property makes selected-by-default
			// options in Safari work properly
			if ( elem.parentNode ) {
				elem.parentNode.selectedIndex;
			}

			return elem.selected === true;
		},

		// Contents
		"empty": function( elem ) {
			// http://www.w3.org/TR/selectors/#empty-pseudo
			// :empty is negated by element (1) or content nodes (text: 3; cdata: 4; entity ref: 5),
			//   but not by others (comment: 8; processing instruction: 7; etc.)
			// nodeType < 6 works because attributes (2) do not appear as children
			for ( elem = elem.firstChild; elem; elem = elem.nextSibling ) {
				if ( elem.nodeType < 6 ) {
					return false;
				}
			}
			return true;
		},

		"parent": function( elem ) {
			return !Expr.pseudos["empty"]( elem );
		},

		// Element/input types
		"header": function( elem ) {
			return rheader.test( elem.nodeName );
		},

		"input": function( elem ) {
			return rinputs.test( elem.nodeName );
		},

		"button": function( elem ) {
			var name = elem.nodeName.toLowerCase();
			return name === "input" && elem.type === "button" || name === "button";
		},

		"text": function( elem ) {
			var attr;
			return elem.nodeName.toLowerCase() === "input" &&
				elem.type === "text" &&

				// Support: IE<8
				// New HTML5 attribute values (e.g., "search") appear with elem.type === "text"
				( (attr = elem.getAttribute("type")) == null || attr.toLowerCase() === "text" );
		},

		// Position-in-collection
		"first": createPositionalPseudo(function() {
			return [ 0 ];
		}),

		"last": createPositionalPseudo(function( matchIndexes, length ) {
			return [ length - 1 ];
		}),

		"eq": createPositionalPseudo(function( matchIndexes, length, argument ) {
			return [ argument < 0 ? argument + length : argument ];
		}),

		"even": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 0;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"odd": createPositionalPseudo(function( matchIndexes, length ) {
			var i = 1;
			for ( ; i < length; i += 2 ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"lt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ?
				argument + length :
				argument > length ?
					length :
					argument;
			for ( ; --i >= 0; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		}),

		"gt": createPositionalPseudo(function( matchIndexes, length, argument ) {
			var i = argument < 0 ? argument + length : argument;
			for ( ; ++i < length; ) {
				matchIndexes.push( i );
			}
			return matchIndexes;
		})
	}
};

Expr.pseudos["nth"] = Expr.pseudos["eq"];

// Add button/input type pseudos
for ( i in { radio: true, checkbox: true, file: true, password: true, image: true } ) {
	Expr.pseudos[ i ] = createInputPseudo( i );
}
for ( i in { submit: true, reset: true } ) {
	Expr.pseudos[ i ] = createButtonPseudo( i );
}

// Easy API for creating new setFilters
function setFilters() {}
setFilters.prototype = Expr.filters = Expr.pseudos;
Expr.setFilters = new setFilters();

tokenize = Sizzle.tokenize = function( selector, parseOnly ) {
	var matched, match, tokens, type,
		soFar, groups, preFilters,
		cached = tokenCache[ selector + " " ];

	if ( cached ) {
		return parseOnly ? 0 : cached.slice( 0 );
	}

	soFar = selector;
	groups = [];
	preFilters = Expr.preFilter;

	while ( soFar ) {

		// Comma and first run
		if ( !matched || (match = rcomma.exec( soFar )) ) {
			if ( match ) {
				// Don't consume trailing commas as valid
				soFar = soFar.slice( match[0].length ) || soFar;
			}
			groups.push( (tokens = []) );
		}

		matched = false;

		// Combinators
		if ( (match = rcombinators.exec( soFar )) ) {
			matched = match.shift();
			tokens.push({
				value: matched,
				// Cast descendant combinators to space
				type: match[0].replace( rtrim, " " )
			});
			soFar = soFar.slice( matched.length );
		}

		// Filters
		for ( type in Expr.filter ) {
			if ( (match = matchExpr[ type ].exec( soFar )) && (!preFilters[ type ] ||
				(match = preFilters[ type ]( match ))) ) {
				matched = match.shift();
				tokens.push({
					value: matched,
					type: type,
					matches: match
				});
				soFar = soFar.slice( matched.length );
			}
		}

		if ( !matched ) {
			break;
		}
	}

	// Return the length of the invalid excess
	// if we're just parsing
	// Otherwise, throw an error or return tokens
	return parseOnly ?
		soFar.length :
		soFar ?
			Sizzle.error( selector ) :
			// Cache the tokens
			tokenCache( selector, groups ).slice( 0 );
};

function toSelector( tokens ) {
	var i = 0,
		len = tokens.length,
		selector = "";
	for ( ; i < len; i++ ) {
		selector += tokens[i].value;
	}
	return selector;
}

function addCombinator( matcher, combinator, base ) {
	var dir = combinator.dir,
		skip = combinator.next,
		key = skip || dir,
		checkNonElements = base && key === "parentNode",
		doneName = done++;

	return combinator.first ?
		// Check against closest ancestor/preceding element
		function( elem, context, xml ) {
			while ( (elem = elem[ dir ]) ) {
				if ( elem.nodeType === 1 || checkNonElements ) {
					return matcher( elem, context, xml );
				}
			}
			return false;
		} :

		// Check against all ancestor/preceding elements
		function( elem, context, xml ) {
			var oldCache, uniqueCache, outerCache,
				newCache = [ dirruns, doneName ];

			// We can't set arbitrary data on XML nodes, so they don't benefit from combinator caching
			if ( xml ) {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						if ( matcher( elem, context, xml ) ) {
							return true;
						}
					}
				}
			} else {
				while ( (elem = elem[ dir ]) ) {
					if ( elem.nodeType === 1 || checkNonElements ) {
						outerCache = elem[ expando ] || (elem[ expando ] = {});

						// Support: IE <9 only
						// Defend against cloned attroperties (jQuery gh-1709)
						uniqueCache = outerCache[ elem.uniqueID ] || (outerCache[ elem.uniqueID ] = {});

						if ( skip && skip === elem.nodeName.toLowerCase() ) {
							elem = elem[ dir ] || elem;
						} else if ( (oldCache = uniqueCache[ key ]) &&
							oldCache[ 0 ] === dirruns && oldCache[ 1 ] === doneName ) {

							// Assign to newCache so results back-propagate to previous elements
							return (newCache[ 2 ] = oldCache[ 2 ]);
						} else {
							// Reuse newcache so results back-propagate to previous elements
							uniqueCache[ key ] = newCache;

							// A match means we're done; a fail means we have to keep checking
							if ( (newCache[ 2 ] = matcher( elem, context, xml )) ) {
								return true;
							}
						}
					}
				}
			}
			return false;
		};
}

function elementMatcher( matchers ) {
	return matchers.length > 1 ?
		function( elem, context, xml ) {
			var i = matchers.length;
			while ( i-- ) {
				if ( !matchers[i]( elem, context, xml ) ) {
					return false;
				}
			}
			return true;
		} :
		matchers[0];
}

function multipleContexts( selector, contexts, results ) {
	var i = 0,
		len = contexts.length;
	for ( ; i < len; i++ ) {
		Sizzle( selector, contexts[i], results );
	}
	return results;
}

function condense( unmatched, map, filter, context, xml ) {
	var elem,
		newUnmatched = [],
		i = 0,
		len = unmatched.length,
		mapped = map != null;

	for ( ; i < len; i++ ) {
		if ( (elem = unmatched[i]) ) {
			if ( !filter || filter( elem, context, xml ) ) {
				newUnmatched.push( elem );
				if ( mapped ) {
					map.push( i );
				}
			}
		}
	}

	return newUnmatched;
}

function setMatcher( preFilter, selector, matcher, postFilter, postFinder, postSelector ) {
	if ( postFilter && !postFilter[ expando ] ) {
		postFilter = setMatcher( postFilter );
	}
	if ( postFinder && !postFinder[ expando ] ) {
		postFinder = setMatcher( postFinder, postSelector );
	}
	return markFunction(function( seed, results, context, xml ) {
		var temp, i, elem,
			preMap = [],
			postMap = [],
			preexisting = results.length,

			// Get initial elements from seed or context
			elems = seed || multipleContexts( selector || "*", context.nodeType ? [ context ] : context, [] ),

			// Prefilter to get matcher input, preserving a map for seed-results synchronization
			matcherIn = preFilter && ( seed || !selector ) ?
				condense( elems, preMap, preFilter, context, xml ) :
				elems,

			matcherOut = matcher ?
				// If we have a postFinder, or filtered seed, or non-seed postFilter or preexisting results,
				postFinder || ( seed ? preFilter : preexisting || postFilter ) ?

					// ...intermediate processing is necessary
					[] :

					// ...otherwise use results directly
					results :
				matcherIn;

		// Find primary matches
		if ( matcher ) {
			matcher( matcherIn, matcherOut, context, xml );
		}

		// Apply postFilter
		if ( postFilter ) {
			temp = condense( matcherOut, postMap );
			postFilter( temp, [], context, xml );

			// Un-match failing elements by moving them back to matcherIn
			i = temp.length;
			while ( i-- ) {
				if ( (elem = temp[i]) ) {
					matcherOut[ postMap[i] ] = !(matcherIn[ postMap[i] ] = elem);
				}
			}
		}

		if ( seed ) {
			if ( postFinder || preFilter ) {
				if ( postFinder ) {
					// Get the final matcherOut by condensing this intermediate into postFinder contexts
					temp = [];
					i = matcherOut.length;
					while ( i-- ) {
						if ( (elem = matcherOut[i]) ) {
							// Restore matcherIn since elem is not yet a final match
							temp.push( (matcherIn[i] = elem) );
						}
					}
					postFinder( null, (matcherOut = []), temp, xml );
				}

				// Move matched elements from seed to results to keep them synchronized
				i = matcherOut.length;
				while ( i-- ) {
					if ( (elem = matcherOut[i]) &&
						(temp = postFinder ? indexOf( seed, elem ) : preMap[i]) > -1 ) {

						seed[temp] = !(results[temp] = elem);
					}
				}
			}

		// Add elements to results, through postFinder if defined
		} else {
			matcherOut = condense(
				matcherOut === results ?
					matcherOut.splice( preexisting, matcherOut.length ) :
					matcherOut
			);
			if ( postFinder ) {
				postFinder( null, results, matcherOut, xml );
			} else {
				push.apply( results, matcherOut );
			}
		}
	});
}

function matcherFromTokens( tokens ) {
	var checkContext, matcher, j,
		len = tokens.length,
		leadingRelative = Expr.relative[ tokens[0].type ],
		implicitRelative = leadingRelative || Expr.relative[" "],
		i = leadingRelative ? 1 : 0,

		// The foundational matcher ensures that elements are reachable from top-level context(s)
		matchContext = addCombinator( function( elem ) {
			return elem === checkContext;
		}, implicitRelative, true ),
		matchAnyContext = addCombinator( function( elem ) {
			return indexOf( checkContext, elem ) > -1;
		}, implicitRelative, true ),
		matchers = [ function( elem, context, xml ) {
			var ret = ( !leadingRelative && ( xml || context !== outermostContext ) ) || (
				(checkContext = context).nodeType ?
					matchContext( elem, context, xml ) :
					matchAnyContext( elem, context, xml ) );
			// Avoid hanging onto element (issue #299)
			checkContext = null;
			return ret;
		} ];

	for ( ; i < len; i++ ) {
		if ( (matcher = Expr.relative[ tokens[i].type ]) ) {
			matchers = [ addCombinator(elementMatcher( matchers ), matcher) ];
		} else {
			matcher = Expr.filter[ tokens[i].type ].apply( null, tokens[i].matches );

			// Return special upon seeing a positional matcher
			if ( matcher[ expando ] ) {
				// Find the next relative operator (if any) for proper handling
				j = ++i;
				for ( ; j < len; j++ ) {
					if ( Expr.relative[ tokens[j].type ] ) {
						break;
					}
				}
				return setMatcher(
					i > 1 && elementMatcher( matchers ),
					i > 1 && toSelector(
						// If the preceding token was a descendant combinator, insert an implicit any-element `*`
						tokens.slice( 0, i - 1 ).concat({ value: tokens[ i - 2 ].type === " " ? "*" : "" })
					).replace( rtrim, "$1" ),
					matcher,
					i < j && matcherFromTokens( tokens.slice( i, j ) ),
					j < len && matcherFromTokens( (tokens = tokens.slice( j )) ),
					j < len && toSelector( tokens )
				);
			}
			matchers.push( matcher );
		}
	}

	return elementMatcher( matchers );
}

function matcherFromGroupMatchers( elementMatchers, setMatchers ) {
	var bySet = setMatchers.length > 0,
		byElement = elementMatchers.length > 0,
		superMatcher = function( seed, context, xml, results, outermost ) {
			var elem, j, matcher,
				matchedCount = 0,
				i = "0",
				unmatched = seed && [],
				setMatched = [],
				contextBackup = outermostContext,
				// We must always have either seed elements or outermost context
				elems = seed || byElement && Expr.find["TAG"]( "*", outermost ),
				// Use integer dirruns iff this is the outermost matcher
				dirrunsUnique = (dirruns += contextBackup == null ? 1 : Math.random() || 0.1),
				len = elems.length;

			if ( outermost ) {
				outermostContext = context === document || context || outermost;
			}

			// Add elements passing elementMatchers directly to results
			// Support: IE<9, Safari
			// Tolerate NodeList properties (IE: "length"; Safari: <number>) matching elements by id
			for ( ; i !== len && (elem = elems[i]) != null; i++ ) {
				if ( byElement && elem ) {
					j = 0;
					if ( !context && elem.ownerDocument !== document ) {
						setDocument( elem );
						xml = !documentIsHTML;
					}
					while ( (matcher = elementMatchers[j++]) ) {
						if ( matcher( elem, context || document, xml) ) {
							results.push( elem );
							break;
						}
					}
					if ( outermost ) {
						dirruns = dirrunsUnique;
					}
				}

				// Track unmatched elements for set filters
				if ( bySet ) {
					// They will have gone through all possible matchers
					if ( (elem = !matcher && elem) ) {
						matchedCount--;
					}

					// Lengthen the array for every element, matched or not
					if ( seed ) {
						unmatched.push( elem );
					}
				}
			}

			// `i` is now the count of elements visited above, and adding it to `matchedCount`
			// makes the latter nonnegative.
			matchedCount += i;

			// Apply set filters to unmatched elements
			// NOTE: This can be skipped if there are no unmatched elements (i.e., `matchedCount`
			// equals `i`), unless we didn't visit _any_ elements in the above loop because we have
			// no element matchers and no seed.
			// Incrementing an initially-string "0" `i` allows `i` to remain a string only in that
			// case, which will result in a "00" `matchedCount` that differs from `i` but is also
			// numerically zero.
			if ( bySet && i !== matchedCount ) {
				j = 0;
				while ( (matcher = setMatchers[j++]) ) {
					matcher( unmatched, setMatched, context, xml );
				}

				if ( seed ) {
					// Reintegrate element matches to eliminate the need for sorting
					if ( matchedCount > 0 ) {
						while ( i-- ) {
							if ( !(unmatched[i] || setMatched[i]) ) {
								setMatched[i] = pop.call( results );
							}
						}
					}

					// Discard index placeholder values to get only actual matches
					setMatched = condense( setMatched );
				}

				// Add matches to results
				push.apply( results, setMatched );

				// Seedless set matches succeeding multiple successful matchers stipulate sorting
				if ( outermost && !seed && setMatched.length > 0 &&
					( matchedCount + setMatchers.length ) > 1 ) {

					Sizzle.uniqueSort( results );
				}
			}

			// Override manipulation of globals by nested matchers
			if ( outermost ) {
				dirruns = dirrunsUnique;
				outermostContext = contextBackup;
			}

			return unmatched;
		};

	return bySet ?
		markFunction( superMatcher ) :
		superMatcher;
}

compile = Sizzle.compile = function( selector, match /* Internal Use Only */ ) {
	var i,
		setMatchers = [],
		elementMatchers = [],
		cached = compilerCache[ selector + " " ];

	if ( !cached ) {
		// Generate a function of recursive functions that can be used to check each element
		if ( !match ) {
			match = tokenize( selector );
		}
		i = match.length;
		while ( i-- ) {
			cached = matcherFromTokens( match[i] );
			if ( cached[ expando ] ) {
				setMatchers.push( cached );
			} else {
				elementMatchers.push( cached );
			}
		}

		// Cache the compiled function
		cached = compilerCache( selector, matcherFromGroupMatchers( elementMatchers, setMatchers ) );

		// Save selector and tokenization
		cached.selector = selector;
	}
	return cached;
};

/**
 * A low-level selection function that works with Sizzle's compiled
 *  selector functions
 * @param {String|Function} selector A selector or a pre-compiled
 *  selector function built with Sizzle.compile
 * @param {Element} context
 * @param {Array} [results]
 * @param {Array} [seed] A set of elements to match against
 */
select = Sizzle.select = function( selector, context, results, seed ) {
	var i, tokens, token, type, find,
		compiled = typeof selector === "function" && selector,
		match = !seed && tokenize( (selector = compiled.selector || selector) );

	results = results || [];

	// Try to minimize operations if there is only one selector in the list and no seed
	// (the latter of which guarantees us context)
	if ( match.length === 1 ) {

		// Reduce context if the leading compound selector is an ID
		tokens = match[0] = match[0].slice( 0 );
		if ( tokens.length > 2 && (token = tokens[0]).type === "ID" &&
				context.nodeType === 9 && documentIsHTML && Expr.relative[ tokens[1].type ] ) {

			context = ( Expr.find["ID"]( token.matches[0].replace(runescape, funescape), context ) || [] )[0];
			if ( !context ) {
				return results;

			// Precompiled matchers will still verify ancestry, so step up a level
			} else if ( compiled ) {
				context = context.parentNode;
			}

			selector = selector.slice( tokens.shift().value.length );
		}

		// Fetch a seed set for right-to-left matching
		i = matchExpr["needsContext"].test( selector ) ? 0 : tokens.length;
		while ( i-- ) {
			token = tokens[i];

			// Abort if we hit a combinator
			if ( Expr.relative[ (type = token.type) ] ) {
				break;
			}
			if ( (find = Expr.find[ type ]) ) {
				// Search, expanding context for leading sibling combinators
				if ( (seed = find(
					token.matches[0].replace( runescape, funescape ),
					rsibling.test( tokens[0].type ) && testContext( context.parentNode ) || context
				)) ) {

					// If seed is empty or no tokens remain, we can return early
					tokens.splice( i, 1 );
					selector = seed.length && toSelector( tokens );
					if ( !selector ) {
						push.apply( results, seed );
						return results;
					}

					break;
				}
			}
		}
	}

	// Compile and execute a filtering function if one is not provided
	// Provide `match` to avoid retokenization if we modified the selector above
	( compiled || compile( selector, match ) )(
		seed,
		context,
		!documentIsHTML,
		results,
		!context || rsibling.test( selector ) && testContext( context.parentNode ) || context
	);
	return results;
};

// One-time assignments

// Sort stability
support.sortStable = expando.split("").sort( sortOrder ).join("") === expando;

// Support: Chrome 14-35+
// Always assume duplicates if they aren't passed to the comparison function
support.detectDuplicates = !!hasDuplicate;

// Initialize against the default document
setDocument();

// Support: Webkit<537.32 - Safari 6.0.3/Chrome 25 (fixed in Chrome 27)
// Detached nodes confoundingly follow *each other*
support.sortDetached = assert(function( el ) {
	// Should return 1, but returns 4 (following)
	return el.compareDocumentPosition( document.createElement("fieldset") ) & 1;
});

// Support: IE<8
// Prevent attribute/property "interpolation"
// https://msdn.microsoft.com/en-us/library/ms536429%28VS.85%29.aspx
if ( !assert(function( el ) {
	el.innerHTML = "<a href='#'></a>";
	return el.firstChild.getAttribute("href") === "#" ;
}) ) {
	addHandle( "type|href|height|width", function( elem, name, isXML ) {
		if ( !isXML ) {
			return elem.getAttribute( name, name.toLowerCase() === "type" ? 1 : 2 );
		}
	});
}

// Support: IE<9
// Use defaultValue in place of getAttribute("value")
if ( !support.attributes || !assert(function( el ) {
	el.innerHTML = "<input/>";
	el.firstChild.setAttribute( "value", "" );
	return el.firstChild.getAttribute( "value" ) === "";
}) ) {
	addHandle( "value", function( elem, name, isXML ) {
		if ( !isXML && elem.nodeName.toLowerCase() === "input" ) {
			return elem.defaultValue;
		}
	});
}

// Support: IE<9
// Use getAttributeNode to fetch booleans when getAttribute lies
if ( !assert(function( el ) {
	return el.getAttribute("disabled") == null;
}) ) {
	addHandle( booleans, function( elem, name, isXML ) {
		var val;
		if ( !isXML ) {
			return elem[ name ] === true ? name.toLowerCase() :
					(val = elem.getAttributeNode( name )) && val.specified ?
					val.value :
				null;
		}
	});
}

return Sizzle;

})( window );



jQuery.find = Sizzle;
jQuery.expr = Sizzle.selectors;

// Deprecated
jQuery.expr[ ":" ] = jQuery.expr.pseudos;
jQuery.uniqueSort = jQuery.unique = Sizzle.uniqueSort;
jQuery.text = Sizzle.getText;
jQuery.isXMLDoc = Sizzle.isXML;
jQuery.contains = Sizzle.contains;
jQuery.escapeSelector = Sizzle.escape;




var dir = function( elem, dir, until ) {
	var matched = [],
		truncate = until !== undefined;

	while ( ( elem = elem[ dir ] ) && elem.nodeType !== 9 ) {
		if ( elem.nodeType === 1 ) {
			if ( truncate && jQuery( elem ).is( until ) ) {
				break;
			}
			matched.push( elem );
		}
	}
	return matched;
};


var siblings = function( n, elem ) {
	var matched = [];

	for ( ; n; n = n.nextSibling ) {
		if ( n.nodeType === 1 && n !== elem ) {
			matched.push( n );
		}
	}

	return matched;
};


var rneedsContext = jQuery.expr.match.needsContext;



function nodeName( elem, name ) {

  return elem.nodeName && elem.nodeName.toLowerCase() === name.toLowerCase();

};
var rsingleTag = ( /^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i );



// Implement the identical functionality for filter and not
function winnow( elements, qualifier, not ) {
	if ( isFunction( qualifier ) ) {
		return jQuery.grep( elements, function( elem, i ) {
			return !!qualifier.call( elem, i, elem ) !== not;
		} );
	}

	// Single element
	if ( qualifier.nodeType ) {
		return jQuery.grep( elements, function( elem ) {
			return ( elem === qualifier ) !== not;
		} );
	}

	// Arraylike of elements (jQuery, arguments, Array)
	if ( typeof qualifier !== "string" ) {
		return jQuery.grep( elements, function( elem ) {
			return ( indexOf.call( qualifier, elem ) > -1 ) !== not;
		} );
	}

	// Filtered directly for both simple and complex selectors
	return jQuery.filter( qualifier, elements, not );
}

jQuery.filter = function( expr, elems, not ) {
	var elem = elems[ 0 ];

	if ( not ) {
		expr = ":not(" + expr + ")";
	}

	if ( elems.length === 1 && elem.nodeType === 1 ) {
		return jQuery.find.matchesSelector( elem, expr ) ? [ elem ] : [];
	}

	return jQuery.find.matches( expr, jQuery.grep( elems, function( elem ) {
		return elem.nodeType === 1;
	} ) );
};

jQuery.fn.extend( {
	find: function( selector ) {
		var i, ret,
			len = this.length,
			self = this;

		if ( typeof selector !== "string" ) {
			return this.pushStack( jQuery( selector ).filter( function() {
				for ( i = 0; i < len; i++ ) {
					if ( jQuery.contains( self[ i ], this ) ) {
						return true;
					}
				}
			} ) );
		}

		ret = this.pushStack( [] );

		for ( i = 0; i < len; i++ ) {
			jQuery.find( selector, self[ i ], ret );
		}

		return len > 1 ? jQuery.uniqueSort( ret ) : ret;
	},
	filter: function( selector ) {
		return this.pushStack( winnow( this, selector || [], false ) );
	},
	not: function( selector ) {
		return this.pushStack( winnow( this, selector || [], true ) );
	},
	is: function( selector ) {
		return !!winnow(
			this,

			// If this is a positional/relative selector, check membership in the returned set
			// so $("p:first").is("p:last") won't return true for a doc with two "p".
			typeof selector === "string" && rneedsContext.test( selector ) ?
				jQuery( selector ) :
				selector || [],
			false
		).length;
	}
} );


// Initialize a jQuery object


// A central reference to the root jQuery(document)
var rootjQuery,

	// A simple way to check for HTML strings
	// Prioritize #id over <tag> to avoid XSS via location.hash (#9521)
	// Strict HTML recognition (#11290: must start with <)
	// Shortcut simple #id case for speed
	rquickExpr = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,

	init = jQuery.fn.init = function( selector, context, root ) {
		var match, elem;

		// HANDLE: $(""), $(null), $(undefined), $(false)
		if ( !selector ) {
			return this;
		}

		// Method init() accepts an alternate rootjQuery
		// so migrate can support jQuery.sub (gh-2101)
		root = root || rootjQuery;

		// Handle HTML strings
		if ( typeof selector === "string" ) {
			if ( selector[ 0 ] === "<" &&
				selector[ selector.length - 1 ] === ">" &&
				selector.length >= 3 ) {

				// Assume that strings that start and end with <> are HTML and skip the regex check
				match = [ null, selector, null ];

			} else {
				match = rquickExpr.exec( selector );
			}

			// Match html or make sure no context is specified for #id
			if ( match && ( match[ 1 ] || !context ) ) {

				// HANDLE: $(html) -> $(array)
				if ( match[ 1 ] ) {
					context = context instanceof jQuery ? context[ 0 ] : context;

					// Option to run scripts is true for back-compat
					// Intentionally let the error be thrown if parseHTML is not present
					jQuery.merge( this, jQuery.parseHTML(
						match[ 1 ],
						context && context.nodeType ? context.ownerDocument || context : document,
						true
					) );

					// HANDLE: $(html, props)
					if ( rsingleTag.test( match[ 1 ] ) && jQuery.isPlainObject( context ) ) {
						for ( match in context ) {

							// Properties of context are called as methods if possible
							if ( isFunction( this[ match ] ) ) {
								this[ match ]( context[ match ] );

							// ...and otherwise set as attributes
							} else {
								this.attr( match, context[ match ] );
							}
						}
					}

					return this;

				// HANDLE: $(#id)
				} else {
					elem = document.getElementById( match[ 2 ] );

					if ( elem ) {

						// Inject the element directly into the jQuery object
						this[ 0 ] = elem;
						this.length = 1;
					}
					return this;
				}

			// HANDLE: $(expr, $(...))
			} else if ( !context || context.jquery ) {
				return ( context || root ).find( selector );

			// HANDLE: $(expr, context)
			// (which is just equivalent to: $(context).find(expr)
			} else {
				return this.constructor( context ).find( selector );
			}

		// HANDLE: $(DOMElement)
		} else if ( selector.nodeType ) {
			this[ 0 ] = selector;
			this.length = 1;
			return this;

		// HANDLE: $(function)
		// Shortcut for document ready
		} else if ( isFunction( selector ) ) {
			return root.ready !== undefined ?
				root.ready( selector ) :

				// Execute immediately if ready is not present
				selector( jQuery );
		}

		return jQuery.makeArray( selector, this );
	};

// Give the init function the jQuery prototype for later instantiation
init.prototype = jQuery.fn;

// Initialize central reference
rootjQuery = jQuery( document );


var rparentsprev = /^(?:parents|prev(?:Until|All))/,

	// Methods guaranteed to produce a unique set when starting from a unique set
	guaranteedUnique = {
		children: true,
		contents: true,
		next: true,
		prev: true
	};

jQuery.fn.extend( {
	has: function( target ) {
		var targets = jQuery( target, this ),
			l = targets.length;

		return this.filter( function() {
			var i = 0;
			for ( ; i < l; i++ ) {
				if ( jQuery.contains( this, targets[ i ] ) ) {
					return true;
				}
			}
		} );
	},

	closest: function( selectors, context ) {
		var cur,
			i = 0,
			l = this.length,
			matched = [],
			targets = typeof selectors !== "string" && jQuery( selectors );

		// Positional selectors never match, since there's no _selection_ context
		if ( !rneedsContext.test( selectors ) ) {
			for ( ; i < l; i++ ) {
				for ( cur = this[ i ]; cur && cur !== context; cur = cur.parentNode ) {

					// Always skip document fragments
					if ( cur.nodeType < 11 && ( targets ?
						targets.index( cur ) > -1 :

						// Don't pass non-elements to Sizzle
						cur.nodeType === 1 &&
							jQuery.find.matchesSelector( cur, selectors ) ) ) {

						matched.push( cur );
						break;
					}
				}
			}
		}

		return this.pushStack( matched.length > 1 ? jQuery.uniqueSort( matched ) : matched );
	},

	// Determine the position of an element within the set
	index: function( elem ) {

		// No argument, return index in parent
		if ( !elem ) {
			return ( this[ 0 ] && this[ 0 ].parentNode ) ? this.first().prevAll().length : -1;
		}

		// Index in selector
		if ( typeof elem === "string" ) {
			return indexOf.call( jQuery( elem ), this[ 0 ] );
		}

		// Locate the position of the desired element
		return indexOf.call( this,

			// If it receives a jQuery object, the first element is used
			elem.jquery ? elem[ 0 ] : elem
		);
	},

	add: function( selector, context ) {
		return this.pushStack(
			jQuery.uniqueSort(
				jQuery.merge( this.get(), jQuery( selector, context ) )
			)
		);
	},

	addBack: function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	}
} );

function sibling( cur, dir ) {
	while ( ( cur = cur[ dir ] ) && cur.nodeType !== 1 ) {}
	return cur;
}

jQuery.each( {
	parent: function( elem ) {
		var parent = elem.parentNode;
		return parent && parent.nodeType !== 11 ? parent : null;
	},
	parents: function( elem ) {
		return dir( elem, "parentNode" );
	},
	parentsUntil: function( elem, i, until ) {
		return dir( elem, "parentNode", until );
	},
	next: function( elem ) {
		return sibling( elem, "nextSibling" );
	},
	prev: function( elem ) {
		return sibling( elem, "previousSibling" );
	},
	nextAll: function( elem ) {
		return dir( elem, "nextSibling" );
	},
	prevAll: function( elem ) {
		return dir( elem, "previousSibling" );
	},
	nextUntil: function( elem, i, until ) {
		return dir( elem, "nextSibling", until );
	},
	prevUntil: function( elem, i, until ) {
		return dir( elem, "previousSibling", until );
	},
	siblings: function( elem ) {
		return siblings( ( elem.parentNode || {} ).firstChild, elem );
	},
	children: function( elem ) {
		return siblings( elem.firstChild );
	},
	contents: function( elem ) {
		if ( typeof elem.contentDocument !== "undefined" ) {
			return elem.contentDocument;
		}

		// Support: IE 9 - 11 only, iOS 7 only, Android Browser <=4.3 only
		// Treat the template element as a regular one in browsers that
		// don't support it.
		if ( nodeName( elem, "template" ) ) {
			elem = elem.content || elem;
		}

		return jQuery.merge( [], elem.childNodes );
	}
}, function( name, fn ) {
	jQuery.fn[ name ] = function( until, selector ) {
		var matched = jQuery.map( this, fn, until );

		if ( name.slice( -5 ) !== "Until" ) {
			selector = until;
		}

		if ( selector && typeof selector === "string" ) {
			matched = jQuery.filter( selector, matched );
		}

		if ( this.length > 1 ) {

			// Remove duplicates
			if ( !guaranteedUnique[ name ] ) {
				jQuery.uniqueSort( matched );
			}

			// Reverse order for parents* and prev-derivatives
			if ( rparentsprev.test( name ) ) {
				matched.reverse();
			}
		}

		return this.pushStack( matched );
	};
} );
var rnothtmlwhite = ( /[^\x20\t\r\n\f]+/g );



// Convert String-formatted options into Object-formatted ones
function createOptions( options ) {
	var object = {};
	jQuery.each( options.match( rnothtmlwhite ) || [], function( _, flag ) {
		object[ flag ] = true;
	} );
	return object;
}

/*
 * Create a callback list using the following parameters:
 *
 *	options: an optional list of space-separated options that will change how
 *			the callback list behaves or a more traditional option object
 *
 * By default a callback list will act like an event callback list and can be
 * "fired" multiple times.
 *
 * Possible options:
 *
 *	once:			will ensure the callback list can only be fired once (like a Deferred)
 *
 *	memory:			will keep track of previous values and will call any callback added
 *					after the list has been fired right away with the latest "memorized"
 *					values (like a Deferred)
 *
 *	unique:			will ensure a callback can only be added once (no duplicate in the list)
 *
 *	stopOnFalse:	interrupt callings when a callback returns false
 *
 */
jQuery.Callbacks = function( options ) {

	// Convert options from String-formatted to Object-formatted if needed
	// (we check in cache first)
	options = typeof options === "string" ?
		createOptions( options ) :
		jQuery.extend( {}, options );

	var // Flag to know if list is currently firing
		firing,

		// Last fire value for non-forgettable lists
		memory,

		// Flag to know if list was already fired
		fired,

		// Flag to prevent firing
		locked,

		// Actual callback list
		list = [],

		// Queue of execution data for repeatable lists
		queue = [],

		// Index of currently firing callback (modified by add/remove as needed)
		firingIndex = -1,

		// Fire callbacks
		fire = function() {

			// Enforce single-firing
			locked = locked || options.once;

			// Execute callbacks for all pending executions,
			// respecting firingIndex overrides and runtime changes
			fired = firing = true;
			for ( ; queue.length; firingIndex = -1 ) {
				memory = queue.shift();
				while ( ++firingIndex < list.length ) {

					// Run callback and check for early termination
					if ( list[ firingIndex ].apply( memory[ 0 ], memory[ 1 ] ) === false &&
						options.stopOnFalse ) {

						// Jump to end and forget the data so .add doesn't re-fire
						firingIndex = list.length;
						memory = false;
					}
				}
			}

			// Forget the data if we're done with it
			if ( !options.memory ) {
				memory = false;
			}

			firing = false;

			// Clean up if we're done firing for good
			if ( locked ) {

				// Keep an empty list if we have data for future add calls
				if ( memory ) {
					list = [];

				// Otherwise, this object is spent
				} else {
					list = "";
				}
			}
		},

		// Actual Callbacks object
		self = {

			// Add a callback or a collection of callbacks to the list
			add: function() {
				if ( list ) {

					// If we have memory from a past run, we should fire after adding
					if ( memory && !firing ) {
						firingIndex = list.length - 1;
						queue.push( memory );
					}

					( function add( args ) {
						jQuery.each( args, function( _, arg ) {
							if ( isFunction( arg ) ) {
								if ( !options.unique || !self.has( arg ) ) {
									list.push( arg );
								}
							} else if ( arg && arg.length && toType( arg ) !== "string" ) {

								// Inspect recursively
								add( arg );
							}
						} );
					} )( arguments );

					if ( memory && !firing ) {
						fire();
					}
				}
				return this;
			},

			// Remove a callback from the list
			remove: function() {
				jQuery.each( arguments, function( _, arg ) {
					var index;
					while ( ( index = jQuery.inArray( arg, list, index ) ) > -1 ) {
						list.splice( index, 1 );

						// Handle firing indexes
						if ( index <= firingIndex ) {
							firingIndex--;
						}
					}
				} );
				return this;
			},

			// Check if a given callback is in the list.
			// If no argument is given, return whether or not list has callbacks attached.
			has: function( fn ) {
				return fn ?
					jQuery.inArray( fn, list ) > -1 :
					list.length > 0;
			},

			// Remove all callbacks from the list
			empty: function() {
				if ( list ) {
					list = [];
				}
				return this;
			},

			// Disable .fire and .add
			// Abort any current/pending executions
			// Clear all callbacks and values
			disable: function() {
				locked = queue = [];
				list = memory = "";
				return this;
			},
			disabled: function() {
				return !list;
			},

			// Disable .fire
			// Also disable .add unless we have memory (since it would have no effect)
			// Abort any pending executions
			lock: function() {
				locked = queue = [];
				if ( !memory && !firing ) {
					list = memory = "";
				}
				return this;
			},
			locked: function() {
				return !!locked;
			},

			// Call all callbacks with the given context and arguments
			fireWith: function( context, args ) {
				if ( !locked ) {
					args = args || [];
					args = [ context, args.slice ? args.slice() : args ];
					queue.push( args );
					if ( !firing ) {
						fire();
					}
				}
				return this;
			},

			// Call all the callbacks with the given arguments
			fire: function() {
				self.fireWith( this, arguments );
				return this;
			},

			// To know if the callbacks have already been called at least once
			fired: function() {
				return !!fired;
			}
		};

	return self;
};


function Identity( v ) {
	return v;
}
function Thrower( ex ) {
	throw ex;
}

function adoptValue( value, resolve, reject, noValue ) {
	var method;

	try {

		// Check for promise aspect first to privilege synchronous behavior
		if ( value && isFunction( ( method = value.promise ) ) ) {
			method.call( value ).done( resolve ).fail( reject );

		// Other thenables
		} else if ( value && isFunction( ( method = value.then ) ) ) {
			method.call( value, resolve, reject );

		// Other non-thenables
		} else {

			// Control `resolve` arguments by letting Array#slice cast boolean `noValue` to integer:
			// * false: [ value ].slice( 0 ) => resolve( value )
			// * true: [ value ].slice( 1 ) => resolve()
			resolve.apply( undefined, [ value ].slice( noValue ) );
		}

	// For Promises/A+, convert exceptions into rejections
	// Since jQuery.when doesn't unwrap thenables, we can skip the extra checks appearing in
	// Deferred#then to conditionally suppress rejection.
	} catch ( value ) {

		// Support: Android 4.0 only
		// Strict mode functions invoked without .call/.apply get global-object context
		reject.apply( undefined, [ value ] );
	}
}

jQuery.extend( {

	Deferred: function( func ) {
		var tuples = [

				// action, add listener, callbacks,
				// ... .then handlers, argument index, [final state]
				[ "notify", "progress", jQuery.Callbacks( "memory" ),
					jQuery.Callbacks( "memory" ), 2 ],
				[ "resolve", "done", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 0, "resolved" ],
				[ "reject", "fail", jQuery.Callbacks( "once memory" ),
					jQuery.Callbacks( "once memory" ), 1, "rejected" ]
			],
			state = "pending",
			promise = {
				state: function() {
					return state;
				},
				always: function() {
					deferred.done( arguments ).fail( arguments );
					return this;
				},
				"catch": function( fn ) {
					return promise.then( null, fn );
				},

				// Keep pipe for back-compat
				pipe: function( /* fnDone, fnFail, fnProgress */ ) {
					var fns = arguments;

					return jQuery.Deferred( function( newDefer ) {
						jQuery.each( tuples, function( i, tuple ) {

							// Map tuples (progress, done, fail) to arguments (done, fail, progress)
							var fn = isFunction( fns[ tuple[ 4 ] ] ) && fns[ tuple[ 4 ] ];

							// deferred.progress(function() { bind to newDefer or newDefer.notify })
							// deferred.done(function() { bind to newDefer or newDefer.resolve })
							// deferred.fail(function() { bind to newDefer or newDefer.reject })
							deferred[ tuple[ 1 ] ]( function() {
								var returned = fn && fn.apply( this, arguments );
								if ( returned && isFunction( returned.promise ) ) {
									returned.promise()
										.progress( newDefer.notify )
										.done( newDefer.resolve )
										.fail( newDefer.reject );
								} else {
									newDefer[ tuple[ 0 ] + "With" ](
										this,
										fn ? [ returned ] : arguments
									);
								}
							} );
						} );
						fns = null;
					} ).promise();
				},
				then: function( onFulfilled, onRejected, onProgress ) {
					var maxDepth = 0;
					function resolve( depth, deferred, handler, special ) {
						return function() {
							var that = this,
								args = arguments,
								mightThrow = function() {
									var returned, then;

									// Support: Promises/A+ section 2.3.3.3.3
									// https://promisesaplus.com/#point-59
									// Ignore double-resolution attempts
									if ( depth < maxDepth ) {
										return;
									}

									returned = handler.apply( that, args );

									// Support: Promises/A+ section 2.3.1
									// https://promisesaplus.com/#point-48
									if ( returned === deferred.promise() ) {
										throw new TypeError( "Thenable self-resolution" );
									}

									// Support: Promises/A+ sections 2.3.3.1, 3.5
									// https://promisesaplus.com/#point-54
									// https://promisesaplus.com/#point-75
									// Retrieve `then` only once
									then = returned &&

										// Support: Promises/A+ section 2.3.4
										// https://promisesaplus.com/#point-64
										// Only check objects and functions for thenability
										( typeof returned === "object" ||
											typeof returned === "function" ) &&
										returned.then;

									// Handle a returned thenable
									if ( isFunction( then ) ) {

										// Special processors (notify) just wait for resolution
										if ( special ) {
											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special )
											);

										// Normal processors (resolve) also hook into progress
										} else {

											// ...and disregard older resolution values
											maxDepth++;

											then.call(
												returned,
												resolve( maxDepth, deferred, Identity, special ),
												resolve( maxDepth, deferred, Thrower, special ),
												resolve( maxDepth, deferred, Identity,
													deferred.notifyWith )
											);
										}

									// Handle all other returned values
									} else {

										// Only substitute handlers pass on context
										// and multiple values (non-spec behavior)
										if ( handler !== Identity ) {
											that = undefined;
											args = [ returned ];
										}

										// Process the value(s)
										// Default process is resolve
										( special || deferred.resolveWith )( that, args );
									}
								},

								// Only normal processors (resolve) catch and reject exceptions
								process = special ?
									mightThrow :
									function() {
										try {
											mightThrow();
										} catch ( e ) {

											if ( jQuery.Deferred.exceptionHook ) {
												jQuery.Deferred.exceptionHook( e,
													process.stackTrace );
											}

											// Support: Promises/A+ section 2.3.3.3.4.1
											// https://promisesaplus.com/#point-61
											// Ignore post-resolution exceptions
											if ( depth + 1 >= maxDepth ) {

												// Only substitute handlers pass on context
												// and multiple values (non-spec behavior)
												if ( handler !== Thrower ) {
													that = undefined;
													args = [ e ];
												}

												deferred.rejectWith( that, args );
											}
										}
									};

							// Support: Promises/A+ section 2.3.3.3.1
							// https://promisesaplus.com/#point-57
							// Re-resolve promises immediately to dodge false rejection from
							// subsequent errors
							if ( depth ) {
								process();
							} else {

								// Call an optional hook to record the stack, in case of exception
								// since it's otherwise lost when execution goes async
								if ( jQuery.Deferred.getStackHook ) {
									process.stackTrace = jQuery.Deferred.getStackHook();
								}
								window.setTimeout( process );
							}
						};
					}

					return jQuery.Deferred( function( newDefer ) {

						// progress_handlers.add( ... )
						tuples[ 0 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onProgress ) ?
									onProgress :
									Identity,
								newDefer.notifyWith
							)
						);

						// fulfilled_handlers.add( ... )
						tuples[ 1 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onFulfilled ) ?
									onFulfilled :
									Identity
							)
						);

						// rejected_handlers.add( ... )
						tuples[ 2 ][ 3 ].add(
							resolve(
								0,
								newDefer,
								isFunction( onRejected ) ?
									onRejected :
									Thrower
							)
						);
					} ).promise();
				},

				// Get a promise for this deferred
				// If obj is provided, the promise aspect is added to the object
				promise: function( obj ) {
					return obj != null ? jQuery.extend( obj, promise ) : promise;
				}
			},
			deferred = {};

		// Add list-specific methods
		jQuery.each( tuples, function( i, tuple ) {
			var list = tuple[ 2 ],
				stateString = tuple[ 5 ];

			// promise.progress = list.add
			// promise.done = list.add
			// promise.fail = list.add
			promise[ tuple[ 1 ] ] = list.add;

			// Handle state
			if ( stateString ) {
				list.add(
					function() {

						// state = "resolved" (i.e., fulfilled)
						// state = "rejected"
						state = stateString;
					},

					// rejected_callbacks.disable
					// fulfilled_callbacks.disable
					tuples[ 3 - i ][ 2 ].disable,

					// rejected_handlers.disable
					// fulfilled_handlers.disable
					tuples[ 3 - i ][ 3 ].disable,

					// progress_callbacks.lock
					tuples[ 0 ][ 2 ].lock,

					// progress_handlers.lock
					tuples[ 0 ][ 3 ].lock
				);
			}

			// progress_handlers.fire
			// fulfilled_handlers.fire
			// rejected_handlers.fire
			list.add( tuple[ 3 ].fire );

			// deferred.notify = function() { deferred.notifyWith(...) }
			// deferred.resolve = function() { deferred.resolveWith(...) }
			// deferred.reject = function() { deferred.rejectWith(...) }
			deferred[ tuple[ 0 ] ] = function() {
				deferred[ tuple[ 0 ] + "With" ]( this === deferred ? undefined : this, arguments );
				return this;
			};

			// deferred.notifyWith = list.fireWith
			// deferred.resolveWith = list.fireWith
			// deferred.rejectWith = list.fireWith
			deferred[ tuple[ 0 ] + "With" ] = list.fireWith;
		} );

		// Make the deferred a promise
		promise.promise( deferred );

		// Call given func if any
		if ( func ) {
			func.call( deferred, deferred );
		}

		// All done!
		return deferred;
	},

	// Deferred helper
	when: function( singleValue ) {
		var

			// count of uncompleted subordinates
			remaining = arguments.length,

			// count of unprocessed arguments
			i = remaining,

			// subordinate fulfillment data
			resolveContexts = Array( i ),
			resolveValues = slice.call( arguments ),

			// the master Deferred
			master = jQuery.Deferred(),

			// subordinate callback factory
			updateFunc = function( i ) {
				return function( value ) {
					resolveContexts[ i ] = this;
					resolveValues[ i ] = arguments.length > 1 ? slice.call( arguments ) : value;
					if ( !( --remaining ) ) {
						master.resolveWith( resolveContexts, resolveValues );
					}
				};
			};

		// Single- and empty arguments are adopted like Promise.resolve
		if ( remaining <= 1 ) {
			adoptValue( singleValue, master.done( updateFunc( i ) ).resolve, master.reject,
				!remaining );

			// Use .then() to unwrap secondary thenables (cf. gh-3000)
			if ( master.state() === "pending" ||
				isFunction( resolveValues[ i ] && resolveValues[ i ].then ) ) {

				return master.then();
			}
		}

		// Multiple arguments are aggregated like Promise.all array elements
		while ( i-- ) {
			adoptValue( resolveValues[ i ], updateFunc( i ), master.reject );
		}

		return master.promise();
	}
} );


// These usually indicate a programmer mistake during development,
// warn about them ASAP rather than swallowing them by default.
var rerrorNames = /^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;

jQuery.Deferred.exceptionHook = function( error, stack ) {

	// Support: IE 8 - 9 only
	// Console exists when dev tools are open, which can happen at any time
	if ( window.console && window.console.warn && error && rerrorNames.test( error.name ) ) {
		window.console.warn( "jQuery.Deferred exception: " + error.message, error.stack, stack );
	}
};




jQuery.readyException = function( error ) {
	window.setTimeout( function() {
		throw error;
	} );
};




// The deferred used on DOM ready
var readyList = jQuery.Deferred();

jQuery.fn.ready = function( fn ) {

	readyList
		.then( fn )

		// Wrap jQuery.readyException in a function so that the lookup
		// happens at the time of error handling instead of callback
		// registration.
		.catch( function( error ) {
			jQuery.readyException( error );
		} );

	return this;
};

jQuery.extend( {

	// Is the DOM ready to be used? Set to true once it occurs.
	isReady: false,

	// A counter to track how many items to wait for before
	// the ready event fires. See #6781
	readyWait: 1,

	// Handle when the DOM is ready
	ready: function( wait ) {

		// Abort if there are pending holds or we're already ready
		if ( wait === true ? --jQuery.readyWait : jQuery.isReady ) {
			return;
		}

		// Remember that the DOM is ready
		jQuery.isReady = true;

		// If a normal DOM Ready event fired, decrement, and wait if need be
		if ( wait !== true && --jQuery.readyWait > 0 ) {
			return;
		}

		// If there are functions bound, to execute
		readyList.resolveWith( document, [ jQuery ] );
	}
} );

jQuery.ready.then = readyList.then;

// The ready event handler and self cleanup method
function completed() {
	document.removeEventListener( "DOMContentLoaded", completed );
	window.removeEventListener( "load", completed );
	jQuery.ready();
}

// Catch cases where $(document).ready() is called
// after the browser event has already occurred.
// Support: IE <=9 - 10 only
// Older IE sometimes signals "interactive" too soon
if ( document.readyState === "complete" ||
	( document.readyState !== "loading" && !document.documentElement.doScroll ) ) {

	// Handle it asynchronously to allow scripts the opportunity to delay ready
	window.setTimeout( jQuery.ready );

} else {

	// Use the handy event callback
	document.addEventListener( "DOMContentLoaded", completed );

	// A fallback to window.onload, that will always work
	window.addEventListener( "load", completed );
}




// Multifunctional method to get and set values of a collection
// The value/s can optionally be executed if it's a function
var access = function( elems, fn, key, value, chainable, emptyGet, raw ) {
	var i = 0,
		len = elems.length,
		bulk = key == null;

	// Sets many values
	if ( toType( key ) === "object" ) {
		chainable = true;
		for ( i in key ) {
			access( elems, fn, i, key[ i ], true, emptyGet, raw );
		}

	// Sets one value
	} else if ( value !== undefined ) {
		chainable = true;

		if ( !isFunction( value ) ) {
			raw = true;
		}

		if ( bulk ) {

			// Bulk operations run against the entire set
			if ( raw ) {
				fn.call( elems, value );
				fn = null;

			// ...except when executing function values
			} else {
				bulk = fn;
				fn = function( elem, key, value ) {
					return bulk.call( jQuery( elem ), value );
				};
			}
		}

		if ( fn ) {
			for ( ; i < len; i++ ) {
				fn(
					elems[ i ], key, raw ?
					value :
					value.call( elems[ i ], i, fn( elems[ i ], key ) )
				);
			}
		}
	}

	if ( chainable ) {
		return elems;
	}

	// Gets
	if ( bulk ) {
		return fn.call( elems );
	}

	return len ? fn( elems[ 0 ], key ) : emptyGet;
};


// Matches dashed string for camelizing
var rmsPrefix = /^-ms-/,
	rdashAlpha = /-([a-z])/g;

// Used by camelCase as callback to replace()
function fcamelCase( all, letter ) {
	return letter.toUpperCase();
}

// Convert dashed to camelCase; used by the css and data modules
// Support: IE <=9 - 11, Edge 12 - 15
// Microsoft forgot to hump their vendor prefix (#9572)
function camelCase( string ) {
	return string.replace( rmsPrefix, "ms-" ).replace( rdashAlpha, fcamelCase );
}
var acceptData = function( owner ) {

	// Accepts only:
	//  - Node
	//    - Node.ELEMENT_NODE
	//    - Node.DOCUMENT_NODE
	//  - Object
	//    - Any
	return owner.nodeType === 1 || owner.nodeType === 9 || !( +owner.nodeType );
};




function Data() {
	this.expando = jQuery.expando + Data.uid++;
}

Data.uid = 1;

Data.prototype = {

	cache: function( owner ) {

		// Check if the owner object already has a cache
		var value = owner[ this.expando ];

		// If not, create one
		if ( !value ) {
			value = {};

			// We can accept data for non-element nodes in modern browsers,
			// but we should not, see #8335.
			// Always return an empty object.
			if ( acceptData( owner ) ) {

				// If it is a node unlikely to be stringify-ed or looped over
				// use plain assignment
				if ( owner.nodeType ) {
					owner[ this.expando ] = value;

				// Otherwise secure it in a non-enumerable property
				// configurable must be true to allow the property to be
				// deleted when data is removed
				} else {
					Object.defineProperty( owner, this.expando, {
						value: value,
						configurable: true
					} );
				}
			}
		}

		return value;
	},
	set: function( owner, data, value ) {
		var prop,
			cache = this.cache( owner );

		// Handle: [ owner, key, value ] args
		// Always use camelCase key (gh-2257)
		if ( typeof data === "string" ) {
			cache[ camelCase( data ) ] = value;

		// Handle: [ owner, { properties } ] args
		} else {

			// Copy the properties one-by-one to the cache object
			for ( prop in data ) {
				cache[ camelCase( prop ) ] = data[ prop ];
			}
		}
		return cache;
	},
	get: function( owner, key ) {
		return key === undefined ?
			this.cache( owner ) :

			// Always use camelCase key (gh-2257)
			owner[ this.expando ] && owner[ this.expando ][ camelCase( key ) ];
	},
	access: function( owner, key, value ) {

		// In cases where either:
		//
		//   1. No key was specified
		//   2. A string key was specified, but no value provided
		//
		// Take the "read" path and allow the get method to determine
		// which value to return, respectively either:
		//
		//   1. The entire cache object
		//   2. The data stored at the key
		//
		if ( key === undefined ||
				( ( key && typeof key === "string" ) && value === undefined ) ) {

			return this.get( owner, key );
		}

		// When the key is not a string, or both a key and value
		// are specified, set or extend (existing objects) with either:
		//
		//   1. An object of properties
		//   2. A key and value
		//
		this.set( owner, key, value );

		// Since the "set" path can have two possible entry points
		// return the expected data based on which path was taken[*]
		return value !== undefined ? value : key;
	},
	remove: function( owner, key ) {
		var i,
			cache = owner[ this.expando ];

		if ( cache === undefined ) {
			return;
		}

		if ( key !== undefined ) {

			// Support array or space separated string of keys
			if ( Array.isArray( key ) ) {

				// If key is an array of keys...
				// We always set camelCase keys, so remove that.
				key = key.map( camelCase );
			} else {
				key = camelCase( key );

				// If a key with the spaces exists, use it.
				// Otherwise, create an array by matching non-whitespace
				key = key in cache ?
					[ key ] :
					( key.match( rnothtmlwhite ) || [] );
			}

			i = key.length;

			while ( i-- ) {
				delete cache[ key[ i ] ];
			}
		}

		// Remove the expando if there's no more data
		if ( key === undefined || jQuery.isEmptyObject( cache ) ) {

			// Support: Chrome <=35 - 45
			// Webkit & Blink performance suffers when deleting properties
			// from DOM nodes, so set to undefined instead
			// https://bugs.chromium.org/p/chromium/issues/detail?id=378607 (bug restricted)
			if ( owner.nodeType ) {
				owner[ this.expando ] = undefined;
			} else {
				delete owner[ this.expando ];
			}
		}
	},
	hasData: function( owner ) {
		var cache = owner[ this.expando ];
		return cache !== undefined && !jQuery.isEmptyObject( cache );
	}
};
var dataPriv = new Data();

var dataUser = new Data();



//	Implementation Summary
//
//	1. Enforce API surface and semantic compatibility with 1.9.x branch
//	2. Improve the module's maintainability by reducing the storage
//		paths to a single mechanism.
//	3. Use the same single mechanism to support "private" and "user" data.
//	4. _Never_ expose "private" data to user code (TODO: Drop _data, _removeData)
//	5. Avoid exposing implementation details on user objects (eg. expando properties)
//	6. Provide a clear path for implementation upgrade to WeakMap in 2014

var rbrace = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
	rmultiDash = /[A-Z]/g;

function getData( data ) {
	if ( data === "true" ) {
		return true;
	}

	if ( data === "false" ) {
		return false;
	}

	if ( data === "null" ) {
		return null;
	}

	// Only convert to a number if it doesn't change the string
	if ( data === +data + "" ) {
		return +data;
	}

	if ( rbrace.test( data ) ) {
		return JSON.parse( data );
	}

	return data;
}

function dataAttr( elem, key, data ) {
	var name;

	// If nothing was found internally, try to fetch any
	// data from the HTML5 data-* attribute
	if ( data === undefined && elem.nodeType === 1 ) {
		name = "data-" + key.replace( rmultiDash, "-$&" ).toLowerCase();
		data = elem.getAttribute( name );

		if ( typeof data === "string" ) {
			try {
				data = getData( data );
			} catch ( e ) {}

			// Make sure we set the data so it isn't changed later
			dataUser.set( elem, key, data );
		} else {
			data = undefined;
		}
	}
	return data;
}

jQuery.extend( {
	hasData: function( elem ) {
		return dataUser.hasData( elem ) || dataPriv.hasData( elem );
	},

	data: function( elem, name, data ) {
		return dataUser.access( elem, name, data );
	},

	removeData: function( elem, name ) {
		dataUser.remove( elem, name );
	},

	// TODO: Now that all calls to _data and _removeData have been replaced
	// with direct calls to dataPriv methods, these can be deprecated.
	_data: function( elem, name, data ) {
		return dataPriv.access( elem, name, data );
	},

	_removeData: function( elem, name ) {
		dataPriv.remove( elem, name );
	}
} );

jQuery.fn.extend( {
	data: function( key, value ) {
		var i, name, data,
			elem = this[ 0 ],
			attrs = elem && elem.attributes;

		// Gets all values
		if ( key === undefined ) {
			if ( this.length ) {
				data = dataUser.get( elem );

				if ( elem.nodeType === 1 && !dataPriv.get( elem, "hasDataAttrs" ) ) {
					i = attrs.length;
					while ( i-- ) {

						// Support: IE 11 only
						// The attrs elements can be null (#14894)
						if ( attrs[ i ] ) {
							name = attrs[ i ].name;
							if ( name.indexOf( "data-" ) === 0 ) {
								name = camelCase( name.slice( 5 ) );
								dataAttr( elem, name, data[ name ] );
							}
						}
					}
					dataPriv.set( elem, "hasDataAttrs", true );
				}
			}

			return data;
		}

		// Sets multiple values
		if ( typeof key === "object" ) {
			return this.each( function() {
				dataUser.set( this, key );
			} );
		}

		return access( this, function( value ) {
			var data;

			// The calling jQuery object (element matches) is not empty
			// (and therefore has an element appears at this[ 0 ]) and the
			// `value` parameter was not undefined. An empty jQuery object
			// will result in `undefined` for elem = this[ 0 ] which will
			// throw an exception if an attempt to read a data cache is made.
			if ( elem && value === undefined ) {

				// Attempt to get data from the cache
				// The key will always be camelCased in Data
				data = dataUser.get( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// Attempt to "discover" the data in
				// HTML5 custom data-* attrs
				data = dataAttr( elem, key );
				if ( data !== undefined ) {
					return data;
				}

				// We tried really hard, but the data doesn't exist.
				return;
			}

			// Set the data...
			this.each( function() {

				// We always store the camelCased key
				dataUser.set( this, key, value );
			} );
		}, null, value, arguments.length > 1, null, true );
	},

	removeData: function( key ) {
		return this.each( function() {
			dataUser.remove( this, key );
		} );
	}
} );


jQuery.extend( {
	queue: function( elem, type, data ) {
		var queue;

		if ( elem ) {
			type = ( type || "fx" ) + "queue";
			queue = dataPriv.get( elem, type );

			// Speed up dequeue by getting out quickly if this is just a lookup
			if ( data ) {
				if ( !queue || Array.isArray( data ) ) {
					queue = dataPriv.access( elem, type, jQuery.makeArray( data ) );
				} else {
					queue.push( data );
				}
			}
			return queue || [];
		}
	},

	dequeue: function( elem, type ) {
		type = type || "fx";

		var queue = jQuery.queue( elem, type ),
			startLength = queue.length,
			fn = queue.shift(),
			hooks = jQuery._queueHooks( elem, type ),
			next = function() {
				jQuery.dequeue( elem, type );
			};

		// If the fx queue is dequeued, always remove the progress sentinel
		if ( fn === "inprogress" ) {
			fn = queue.shift();
			startLength--;
		}

		if ( fn ) {

			// Add a progress sentinel to prevent the fx queue from being
			// automatically dequeued
			if ( type === "fx" ) {
				queue.unshift( "inprogress" );
			}

			// Clear up the last queue stop function
			delete hooks.stop;
			fn.call( elem, next, hooks );
		}

		if ( !startLength && hooks ) {
			hooks.empty.fire();
		}
	},

	// Not public - generate a queueHooks object, or return the current one
	_queueHooks: function( elem, type ) {
		var key = type + "queueHooks";
		return dataPriv.get( elem, key ) || dataPriv.access( elem, key, {
			empty: jQuery.Callbacks( "once memory" ).add( function() {
				dataPriv.remove( elem, [ type + "queue", key ] );
			} )
		} );
	}
} );

jQuery.fn.extend( {
	queue: function( type, data ) {
		var setter = 2;

		if ( typeof type !== "string" ) {
			data = type;
			type = "fx";
			setter--;
		}

		if ( arguments.length < setter ) {
			return jQuery.queue( this[ 0 ], type );
		}

		return data === undefined ?
			this :
			this.each( function() {
				var queue = jQuery.queue( this, type, data );

				// Ensure a hooks for this queue
				jQuery._queueHooks( this, type );

				if ( type === "fx" && queue[ 0 ] !== "inprogress" ) {
					jQuery.dequeue( this, type );
				}
			} );
	},
	dequeue: function( type ) {
		return this.each( function() {
			jQuery.dequeue( this, type );
		} );
	},
	clearQueue: function( type ) {
		return this.queue( type || "fx", [] );
	},

	// Get a promise resolved when queues of a certain type
	// are emptied (fx is the type by default)
	promise: function( type, obj ) {
		var tmp,
			count = 1,
			defer = jQuery.Deferred(),
			elements = this,
			i = this.length,
			resolve = function() {
				if ( !( --count ) ) {
					defer.resolveWith( elements, [ elements ] );
				}
			};

		if ( typeof type !== "string" ) {
			obj = type;
			type = undefined;
		}
		type = type || "fx";

		while ( i-- ) {
			tmp = dataPriv.get( elements[ i ], type + "queueHooks" );
			if ( tmp && tmp.empty ) {
				count++;
				tmp.empty.add( resolve );
			}
		}
		resolve();
		return defer.promise( obj );
	}
} );
var pnum = ( /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/ ).source;

var rcssNum = new RegExp( "^(?:([+-])=|)(" + pnum + ")([a-z%]*)$", "i" );


var cssExpand = [ "Top", "Right", "Bottom", "Left" ];

var documentElement = document.documentElement;



	var isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem );
		},
		composed = { composed: true };

	// Support: IE 9 - 11+, Edge 12 - 18+, iOS 10.0 - 10.2 only
	// Check attachment across shadow DOM boundaries when possible (gh-3504)
	// Support: iOS 10.0-10.2 only
	// Early iOS 10 versions support `attachShadow` but not `getRootNode`,
	// leading to errors. We need to check for `getRootNode`.
	if ( documentElement.getRootNode ) {
		isAttached = function( elem ) {
			return jQuery.contains( elem.ownerDocument, elem ) ||
				elem.getRootNode( composed ) === elem.ownerDocument;
		};
	}
var isHiddenWithinTree = function( elem, el ) {

		// isHiddenWithinTree might be called from jQuery#filter function;
		// in that case, element will be second argument
		elem = el || elem;

		// Inline style trumps all
		return elem.style.display === "none" ||
			elem.style.display === "" &&

			// Otherwise, check computed style
			// Support: Firefox <=43 - 45
			// Disconnected elements can have computed display: none, so first confirm that elem is
			// in the document.
			isAttached( elem ) &&

			jQuery.css( elem, "display" ) === "none";
	};

var swap = function( elem, options, callback, args ) {
	var ret, name,
		old = {};

	// Remember the old values, and insert the new ones
	for ( name in options ) {
		old[ name ] = elem.style[ name ];
		elem.style[ name ] = options[ name ];
	}

	ret = callback.apply( elem, args || [] );

	// Revert the old values
	for ( name in options ) {
		elem.style[ name ] = old[ name ];
	}

	return ret;
};




function adjustCSS( elem, prop, valueParts, tween ) {
	var adjusted, scale,
		maxIterations = 20,
		currentValue = tween ?
			function() {
				return tween.cur();
			} :
			function() {
				return jQuery.css( elem, prop, "" );
			},
		initial = currentValue(),
		unit = valueParts && valueParts[ 3 ] || ( jQuery.cssNumber[ prop ] ? "" : "px" ),

		// Starting value computation is required for potential unit mismatches
		initialInUnit = elem.nodeType &&
			( jQuery.cssNumber[ prop ] || unit !== "px" && +initial ) &&
			rcssNum.exec( jQuery.css( elem, prop ) );

	if ( initialInUnit && initialInUnit[ 3 ] !== unit ) {

		// Support: Firefox <=54
		// Halve the iteration target value to prevent interference from CSS upper bounds (gh-2144)
		initial = initial / 2;

		// Trust units reported by jQuery.css
		unit = unit || initialInUnit[ 3 ];

		// Iteratively approximate from a nonzero starting point
		initialInUnit = +initial || 1;

		while ( maxIterations-- ) {

			// Evaluate and update our best guess (doubling guesses that zero out).
			// Finish if the scale equals or crosses 1 (making the old*new product non-positive).
			jQuery.style( elem, prop, initialInUnit + unit );
			if ( ( 1 - scale ) * ( 1 - ( scale = currentValue() / initial || 0.5 ) ) <= 0 ) {
				maxIterations = 0;
			}
			initialInUnit = initialInUnit / scale;

		}

		initialInUnit = initialInUnit * 2;
		jQuery.style( elem, prop, initialInUnit + unit );

		// Make sure we update the tween properties later on
		valueParts = valueParts || [];
	}

	if ( valueParts ) {
		initialInUnit = +initialInUnit || +initial || 0;

		// Apply relative offset (+=/-=) if specified
		adjusted = valueParts[ 1 ] ?
			initialInUnit + ( valueParts[ 1 ] + 1 ) * valueParts[ 2 ] :
			+valueParts[ 2 ];
		if ( tween ) {
			tween.unit = unit;
			tween.start = initialInUnit;
			tween.end = adjusted;
		}
	}
	return adjusted;
}


var defaultDisplayMap = {};

function getDefaultDisplay( elem ) {
	var temp,
		doc = elem.ownerDocument,
		nodeName = elem.nodeName,
		display = defaultDisplayMap[ nodeName ];

	if ( display ) {
		return display;
	}

	temp = doc.body.appendChild( doc.createElement( nodeName ) );
	display = jQuery.css( temp, "display" );

	temp.parentNode.removeChild( temp );

	if ( display === "none" ) {
		display = "block";
	}
	defaultDisplayMap[ nodeName ] = display;

	return display;
}

function showHide( elements, show ) {
	var display, elem,
		values = [],
		index = 0,
		length = elements.length;

	// Determine new display value for elements that need to change
	for ( ; index < length; index++ ) {
		elem = elements[ index ];
		if ( !elem.style ) {
			continue;
		}

		display = elem.style.display;
		if ( show ) {

			// Since we force visibility upon cascade-hidden elements, an immediate (and slow)
			// check is required in this first loop unless we have a nonempty display value (either
			// inline or about-to-be-restored)
			if ( display === "none" ) {
				values[ index ] = dataPriv.get( elem, "display" ) || null;
				if ( !values[ index ] ) {
					elem.style.display = "";
				}
			}
			if ( elem.style.display === "" && isHiddenWithinTree( elem ) ) {
				values[ index ] = getDefaultDisplay( elem );
			}
		} else {
			if ( display !== "none" ) {
				values[ index ] = "none";

				// Remember what we're overwriting
				dataPriv.set( elem, "display", display );
			}
		}
	}

	// Set the display of the elements in a second loop to avoid constant reflow
	for ( index = 0; index < length; index++ ) {
		if ( values[ index ] != null ) {
			elements[ index ].style.display = values[ index ];
		}
	}

	return elements;
}

jQuery.fn.extend( {
	show: function() {
		return showHide( this, true );
	},
	hide: function() {
		return showHide( this );
	},
	toggle: function( state ) {
		if ( typeof state === "boolean" ) {
			return state ? this.show() : this.hide();
		}

		return this.each( function() {
			if ( isHiddenWithinTree( this ) ) {
				jQuery( this ).show();
			} else {
				jQuery( this ).hide();
			}
		} );
	}
} );
var rcheckableType = ( /^(?:checkbox|radio)$/i );

var rtagName = ( /<([a-z][^\/\0>\x20\t\r\n\f]*)/i );

var rscriptType = ( /^$|^module$|\/(?:java|ecma)script/i );



// We have to close these tags to support XHTML (#13200)
var wrapMap = {

	// Support: IE <=9 only
	option: [ 1, "<select multiple='multiple'>", "</select>" ],

	// XHTML parsers do not magically insert elements in the
	// same way that tag soup parsers do. So we cannot shorten
	// this by omitting <tbody> or other required elements.
	thead: [ 1, "<table>", "</table>" ],
	col: [ 2, "<table><colgroup>", "</colgroup></table>" ],
	tr: [ 2, "<table><tbody>", "</tbody></table>" ],
	td: [ 3, "<table><tbody><tr>", "</tr></tbody></table>" ],

	_default: [ 0, "", "" ]
};

// Support: IE <=9 only
wrapMap.optgroup = wrapMap.option;

wrapMap.tbody = wrapMap.tfoot = wrapMap.colgroup = wrapMap.caption = wrapMap.thead;
wrapMap.th = wrapMap.td;


function getAll( context, tag ) {

	// Support: IE <=9 - 11 only
	// Use typeof to avoid zero-argument method invocation on host objects (#15151)
	var ret;

	if ( typeof context.getElementsByTagName !== "undefined" ) {
		ret = context.getElementsByTagName( tag || "*" );

	} else if ( typeof context.querySelectorAll !== "undefined" ) {
		ret = context.querySelectorAll( tag || "*" );

	} else {
		ret = [];
	}

	if ( tag === undefined || tag && nodeName( context, tag ) ) {
		return jQuery.merge( [ context ], ret );
	}

	return ret;
}


// Mark scripts as having already been evaluated
function setGlobalEval( elems, refElements ) {
	var i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		dataPriv.set(
			elems[ i ],
			"globalEval",
			!refElements || dataPriv.get( refElements[ i ], "globalEval" )
		);
	}
}


var rhtml = /<|&#?\w+;/;

function buildFragment( elems, context, scripts, selection, ignored ) {
	var elem, tmp, tag, wrap, attached, j,
		fragment = context.createDocumentFragment(),
		nodes = [],
		i = 0,
		l = elems.length;

	for ( ; i < l; i++ ) {
		elem = elems[ i ];

		if ( elem || elem === 0 ) {

			// Add nodes directly
			if ( toType( elem ) === "object" ) {

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, elem.nodeType ? [ elem ] : elem );

			// Convert non-html into a text node
			} else if ( !rhtml.test( elem ) ) {
				nodes.push( context.createTextNode( elem ) );

			// Convert html into DOM nodes
			} else {
				tmp = tmp || fragment.appendChild( context.createElement( "div" ) );

				// Deserialize a standard representation
				tag = ( rtagName.exec( elem ) || [ "", "" ] )[ 1 ].toLowerCase();
				wrap = wrapMap[ tag ] || wrapMap._default;
				tmp.innerHTML = wrap[ 1 ] + jQuery.htmlPrefilter( elem ) + wrap[ 2 ];

				// Descend through wrappers to the right content
				j = wrap[ 0 ];
				while ( j-- ) {
					tmp = tmp.lastChild;
				}

				// Support: Android <=4.0 only, PhantomJS 1 only
				// push.apply(_, arraylike) throws on ancient WebKit
				jQuery.merge( nodes, tmp.childNodes );

				// Remember the top-level container
				tmp = fragment.firstChild;

				// Ensure the created nodes are orphaned (#12392)
				tmp.textContent = "";
			}
		}
	}

	// Remove wrapper from fragment
	fragment.textContent = "";

	i = 0;
	while ( ( elem = nodes[ i++ ] ) ) {

		// Skip elements already in the context collection (trac-4087)
		if ( selection && jQuery.inArray( elem, selection ) > -1 ) {
			if ( ignored ) {
				ignored.push( elem );
			}
			continue;
		}

		attached = isAttached( elem );

		// Append to fragment
		tmp = getAll( fragment.appendChild( elem ), "script" );

		// Preserve script evaluation history
		if ( attached ) {
			setGlobalEval( tmp );
		}

		// Capture executables
		if ( scripts ) {
			j = 0;
			while ( ( elem = tmp[ j++ ] ) ) {
				if ( rscriptType.test( elem.type || "" ) ) {
					scripts.push( elem );
				}
			}
		}
	}

	return fragment;
}


( function() {
	var fragment = document.createDocumentFragment(),
		div = fragment.appendChild( document.createElement( "div" ) ),
		input = document.createElement( "input" );

	// Support: Android 4.0 - 4.3 only
	// Check state lost if the name is set (#11217)
	// Support: Windows Web Apps (WWA)
	// `name` and `type` must use .setAttribute for WWA (#14901)
	input.setAttribute( "type", "radio" );
	input.setAttribute( "checked", "checked" );
	input.setAttribute( "name", "t" );

	div.appendChild( input );

	// Support: Android <=4.1 only
	// Older WebKit doesn't clone checked state correctly in fragments
	support.checkClone = div.cloneNode( true ).cloneNode( true ).lastChild.checked;

	// Support: IE <=11 only
	// Make sure textarea (and checkbox) defaultValue is properly cloned
	div.innerHTML = "<textarea>x</textarea>";
	support.noCloneChecked = !!div.cloneNode( true ).lastChild.defaultValue;
} )();


var
	rkeyEvent = /^key/,
	rmouseEvent = /^(?:mouse|pointer|contextmenu|drag|drop)|click/,
	rtypenamespace = /^([^.]*)(?:\.(.+)|)/;

function returnTrue() {
	return true;
}

function returnFalse() {
	return false;
}

// Support: IE <=9 - 11+
// focus() and blur() are asynchronous, except when they are no-op.
// So expect focus to be synchronous when the element is already active,
// and blur to be synchronous when the element is not already active.
// (focus and blur are always synchronous in other supported browsers,
// this just defines when we can count on it).
function expectSync( elem, type ) {
	return ( elem === safeActiveElement() ) === ( type === "focus" );
}

// Support: IE <=9 only
// Accessing document.activeElement can throw unexpectedly
// https://bugs.jquery.com/ticket/13393
function safeActiveElement() {
	try {
		return document.activeElement;
	} catch ( err ) { }
}

function on( elem, types, selector, data, fn, one ) {
	var origFn, type;

	// Types can be a map of types/handlers
	if ( typeof types === "object" ) {

		// ( types-Object, selector, data )
		if ( typeof selector !== "string" ) {

			// ( types-Object, data )
			data = data || selector;
			selector = undefined;
		}
		for ( type in types ) {
			on( elem, type, selector, data, types[ type ], one );
		}
		return elem;
	}

	if ( data == null && fn == null ) {

		// ( types, fn )
		fn = selector;
		data = selector = undefined;
	} else if ( fn == null ) {
		if ( typeof selector === "string" ) {

			// ( types, selector, fn )
			fn = data;
			data = undefined;
		} else {

			// ( types, data, fn )
			fn = data;
			data = selector;
			selector = undefined;
		}
	}
	if ( fn === false ) {
		fn = returnFalse;
	} else if ( !fn ) {
		return elem;
	}

	if ( one === 1 ) {
		origFn = fn;
		fn = function( event ) {

			// Can use an empty set, since event contains the info
			jQuery().off( event );
			return origFn.apply( this, arguments );
		};

		// Use same guid so caller can remove using origFn
		fn.guid = origFn.guid || ( origFn.guid = jQuery.guid++ );
	}
	return elem.each( function() {
		jQuery.event.add( this, types, fn, data, selector );
	} );
}

/*
 * Helper functions for managing events -- not part of the public interface.
 * Props to Dean Edwards' addEvent library for many of the ideas.
 */
jQuery.event = {

	global: {},

	add: function( elem, types, handler, data, selector ) {

		var handleObjIn, eventHandle, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.get( elem );

		// Don't attach events to noData or text/comment nodes (but allow plain objects)
		if ( !elemData ) {
			return;
		}

		// Caller can pass in an object of custom data in lieu of the handler
		if ( handler.handler ) {
			handleObjIn = handler;
			handler = handleObjIn.handler;
			selector = handleObjIn.selector;
		}

		// Ensure that invalid selectors throw exceptions at attach time
		// Evaluate against documentElement in case elem is a non-element node (e.g., document)
		if ( selector ) {
			jQuery.find.matchesSelector( documentElement, selector );
		}

		// Make sure that the handler has a unique ID, used to find/remove it later
		if ( !handler.guid ) {
			handler.guid = jQuery.guid++;
		}

		// Init the element's event structure and main handler, if this is the first
		if ( !( events = elemData.events ) ) {
			events = elemData.events = {};
		}
		if ( !( eventHandle = elemData.handle ) ) {
			eventHandle = elemData.handle = function( e ) {

				// Discard the second event of a jQuery.event.trigger() and
				// when an event is called after a page has unloaded
				return typeof jQuery !== "undefined" && jQuery.event.triggered !== e.type ?
					jQuery.event.dispatch.apply( elem, arguments ) : undefined;
			};
		}

		// Handle multiple events separated by a space
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// There *must* be a type, no attaching namespace-only handlers
			if ( !type ) {
				continue;
			}

			// If event changes its type, use the special event handlers for the changed type
			special = jQuery.event.special[ type ] || {};

			// If selector defined, determine special event api type, otherwise given type
			type = ( selector ? special.delegateType : special.bindType ) || type;

			// Update special based on newly reset type
			special = jQuery.event.special[ type ] || {};

			// handleObj is passed to all event handlers
			handleObj = jQuery.extend( {
				type: type,
				origType: origType,
				data: data,
				handler: handler,
				guid: handler.guid,
				selector: selector,
				needsContext: selector && jQuery.expr.match.needsContext.test( selector ),
				namespace: namespaces.join( "." )
			}, handleObjIn );

			// Init the event handler queue if we're the first
			if ( !( handlers = events[ type ] ) ) {
				handlers = events[ type ] = [];
				handlers.delegateCount = 0;

				// Only use addEventListener if the special events handler returns false
				if ( !special.setup ||
					special.setup.call( elem, data, namespaces, eventHandle ) === false ) {

					if ( elem.addEventListener ) {
						elem.addEventListener( type, eventHandle );
					}
				}
			}

			if ( special.add ) {
				special.add.call( elem, handleObj );

				if ( !handleObj.handler.guid ) {
					handleObj.handler.guid = handler.guid;
				}
			}

			// Add to the element's handler list, delegates in front
			if ( selector ) {
				handlers.splice( handlers.delegateCount++, 0, handleObj );
			} else {
				handlers.push( handleObj );
			}

			// Keep track of which events have ever been used, for event optimization
			jQuery.event.global[ type ] = true;
		}

	},

	// Detach an event or set of events from an element
	remove: function( elem, types, handler, selector, mappedTypes ) {

		var j, origCount, tmp,
			events, t, handleObj,
			special, handlers, type, namespaces, origType,
			elemData = dataPriv.hasData( elem ) && dataPriv.get( elem );

		if ( !elemData || !( events = elemData.events ) ) {
			return;
		}

		// Once for each type.namespace in types; type may be omitted
		types = ( types || "" ).match( rnothtmlwhite ) || [ "" ];
		t = types.length;
		while ( t-- ) {
			tmp = rtypenamespace.exec( types[ t ] ) || [];
			type = origType = tmp[ 1 ];
			namespaces = ( tmp[ 2 ] || "" ).split( "." ).sort();

			// Unbind all events (on this namespace, if provided) for the element
			if ( !type ) {
				for ( type in events ) {
					jQuery.event.remove( elem, type + types[ t ], handler, selector, true );
				}
				continue;
			}

			special = jQuery.event.special[ type ] || {};
			type = ( selector ? special.delegateType : special.bindType ) || type;
			handlers = events[ type ] || [];
			tmp = tmp[ 2 ] &&
				new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" );

			// Remove matching events
			origCount = j = handlers.length;
			while ( j-- ) {
				handleObj = handlers[ j ];

				if ( ( mappedTypes || origType === handleObj.origType ) &&
					( !handler || handler.guid === handleObj.guid ) &&
					( !tmp || tmp.test( handleObj.namespace ) ) &&
					( !selector || selector === handleObj.selector ||
						selector === "**" && handleObj.selector ) ) {
					handlers.splice( j, 1 );

					if ( handleObj.selector ) {
						handlers.delegateCount--;
					}
					if ( special.remove ) {
						special.remove.call( elem, handleObj );
					}
				}
			}

			// Remove generic event handler if we removed something and no more handlers exist
			// (avoids potential for endless recursion during removal of special event handlers)
			if ( origCount && !handlers.length ) {
				if ( !special.teardown ||
					special.teardown.call( elem, namespaces, elemData.handle ) === false ) {

					jQuery.removeEvent( elem, type, elemData.handle );
				}

				delete events[ type ];
			}
		}

		// Remove data and the expando if it's no longer used
		if ( jQuery.isEmptyObject( events ) ) {
			dataPriv.remove( elem, "handle events" );
		}
	},

	dispatch: function( nativeEvent ) {

		// Make a writable jQuery.Event from the native event object
		var event = jQuery.event.fix( nativeEvent );

		var i, j, ret, matched, handleObj, handlerQueue,
			args = new Array( arguments.length ),
			handlers = ( dataPriv.get( this, "events" ) || {} )[ event.type ] || [],
			special = jQuery.event.special[ event.type ] || {};

		// Use the fix-ed jQuery.Event rather than the (read-only) native event
		args[ 0 ] = event;

		for ( i = 1; i < arguments.length; i++ ) {
			args[ i ] = arguments[ i ];
		}

		event.delegateTarget = this;

		// Call the preDispatch hook for the mapped type, and let it bail if desired
		if ( special.preDispatch && special.preDispatch.call( this, event ) === false ) {
			return;
		}

		// Determine handlers
		handlerQueue = jQuery.event.handlers.call( this, event, handlers );

		// Run delegates first; they may want to stop propagation beneath us
		i = 0;
		while ( ( matched = handlerQueue[ i++ ] ) && !event.isPropagationStopped() ) {
			event.currentTarget = matched.elem;

			j = 0;
			while ( ( handleObj = matched.handlers[ j++ ] ) &&
				!event.isImmediatePropagationStopped() ) {

				// If the event is namespaced, then each handler is only invoked if it is
				// specially universal or its namespaces are a superset of the event's.
				if ( !event.rnamespace || handleObj.namespace === false ||
					event.rnamespace.test( handleObj.namespace ) ) {

					event.handleObj = handleObj;
					event.data = handleObj.data;

					ret = ( ( jQuery.event.special[ handleObj.origType ] || {} ).handle ||
						handleObj.handler ).apply( matched.elem, args );

					if ( ret !== undefined ) {
						if ( ( event.result = ret ) === false ) {
							event.preventDefault();
							event.stopPropagation();
						}
					}
				}
			}
		}

		// Call the postDispatch hook for the mapped type
		if ( special.postDispatch ) {
			special.postDispatch.call( this, event );
		}

		return event.result;
	},

	handlers: function( event, handlers ) {
		var i, handleObj, sel, matchedHandlers, matchedSelectors,
			handlerQueue = [],
			delegateCount = handlers.delegateCount,
			cur = event.target;

		// Find delegate handlers
		if ( delegateCount &&

			// Support: IE <=9
			// Black-hole SVG <use> instance trees (trac-13180)
			cur.nodeType &&

			// Support: Firefox <=42
			// Suppress spec-violating clicks indicating a non-primary pointer button (trac-3861)
			// https://www.w3.org/TR/DOM-Level-3-Events/#event-type-click
			// Support: IE 11 only
			// ...but not arrow key "clicks" of radio inputs, which can have `button` -1 (gh-2343)
			!( event.type === "click" && event.button >= 1 ) ) {

			for ( ; cur !== this; cur = cur.parentNode || this ) {

				// Don't check non-elements (#13208)
				// Don't process clicks on disabled elements (#6911, #8165, #11382, #11764)
				if ( cur.nodeType === 1 && !( event.type === "click" && cur.disabled === true ) ) {
					matchedHandlers = [];
					matchedSelectors = {};
					for ( i = 0; i < delegateCount; i++ ) {
						handleObj = handlers[ i ];

						// Don't conflict with Object.prototype properties (#13203)
						sel = handleObj.selector + " ";

						if ( matchedSelectors[ sel ] === undefined ) {
							matchedSelectors[ sel ] = handleObj.needsContext ?
								jQuery( sel, this ).index( cur ) > -1 :
								jQuery.find( sel, this, null, [ cur ] ).length;
						}
						if ( matchedSelectors[ sel ] ) {
							matchedHandlers.push( handleObj );
						}
					}
					if ( matchedHandlers.length ) {
						handlerQueue.push( { elem: cur, handlers: matchedHandlers } );
					}
				}
			}
		}

		// Add the remaining (directly-bound) handlers
		cur = this;
		if ( delegateCount < handlers.length ) {
			handlerQueue.push( { elem: cur, handlers: handlers.slice( delegateCount ) } );
		}

		return handlerQueue;
	},

	addProp: function( name, hook ) {
		Object.defineProperty( jQuery.Event.prototype, name, {
			enumerable: true,
			configurable: true,

			get: isFunction( hook ) ?
				function() {
					if ( this.originalEvent ) {
							return hook( this.originalEvent );
					}
				} :
				function() {
					if ( this.originalEvent ) {
							return this.originalEvent[ name ];
					}
				},

			set: function( value ) {
				Object.defineProperty( this, name, {
					enumerable: true,
					configurable: true,
					writable: true,
					value: value
				} );
			}
		} );
	},

	fix: function( originalEvent ) {
		return originalEvent[ jQuery.expando ] ?
			originalEvent :
			new jQuery.Event( originalEvent );
	},

	special: {
		load: {

			// Prevent triggered image.load events from bubbling to window.load
			noBubble: true
		},
		click: {

			// Utilize native event to ensure correct state for checkable inputs
			setup: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Claim the first handler
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					// dataPriv.set( el, "click", ... )
					leverageNative( el, "click", returnTrue );
				}

				// Return false to allow normal processing in the caller
				return false;
			},
			trigger: function( data ) {

				// For mutual compressibility with _default, replace `this` access with a local var.
				// `|| data` is dead code meant only to preserve the variable through minification.
				var el = this || data;

				// Force setup before triggering a click
				if ( rcheckableType.test( el.type ) &&
					el.click && nodeName( el, "input" ) ) {

					leverageNative( el, "click" );
				}

				// Return non-false to allow normal event-path propagation
				return true;
			},

			// For cross-browser consistency, suppress native .click() on links
			// Also prevent it if we're currently inside a leveraged native-event stack
			_default: function( event ) {
				var target = event.target;
				return rcheckableType.test( target.type ) &&
					target.click && nodeName( target, "input" ) &&
					dataPriv.get( target, "click" ) ||
					nodeName( target, "a" );
			}
		},

		beforeunload: {
			postDispatch: function( event ) {

				// Support: Firefox 20+
				// Firefox doesn't alert if the returnValue field is not set.
				if ( event.result !== undefined && event.originalEvent ) {
					event.originalEvent.returnValue = event.result;
				}
			}
		}
	}
};

// Ensure the presence of an event listener that handles manually-triggered
// synthetic events by interrupting progress until reinvoked in response to
// *native* events that it fires directly, ensuring that state changes have
// already occurred before other listeners are invoked.
function leverageNative( el, type, expectSync ) {

	// Missing expectSync indicates a trigger call, which must force setup through jQuery.event.add
	if ( !expectSync ) {
		if ( dataPriv.get( el, type ) === undefined ) {
			jQuery.event.add( el, type, returnTrue );
		}
		return;
	}

	// Register the controller as a special universal handler for all event namespaces
	dataPriv.set( el, type, false );
	jQuery.event.add( el, type, {
		namespace: false,
		handler: function( event ) {
			var notAsync, result,
				saved = dataPriv.get( this, type );

			if ( ( event.isTrigger & 1 ) && this[ type ] ) {

				// Interrupt processing of the outer synthetic .trigger()ed event
				// Saved data should be false in such cases, but might be a leftover capture object
				// from an async native handler (gh-4350)
				if ( !saved.length ) {

					// Store arguments for use when handling the inner native event
					// There will always be at least one argument (an event object), so this array
					// will not be confused with a leftover capture object.
					saved = slice.call( arguments );
					dataPriv.set( this, type, saved );

					// Trigger the native event and capture its result
					// Support: IE <=9 - 11+
					// focus() and blur() are asynchronous
					notAsync = expectSync( this, type );
					this[ type ]();
					result = dataPriv.get( this, type );
					if ( saved !== result || notAsync ) {
						dataPriv.set( this, type, false );
					} else {
						result = {};
					}
					if ( saved !== result ) {

						// Cancel the outer synthetic event
						event.stopImmediatePropagation();
						event.preventDefault();
						return result.value;
					}

				// If this is an inner synthetic event for an event with a bubbling surrogate
				// (focus or blur), assume that the surrogate already propagated from triggering the
				// native event and prevent that from happening again here.
				// This technically gets the ordering wrong w.r.t. to `.trigger()` (in which the
				// bubbling surrogate propagates *after* the non-bubbling base), but that seems
				// less bad than duplication.
				} else if ( ( jQuery.event.special[ type ] || {} ).delegateType ) {
					event.stopPropagation();
				}

			// If this is a native event triggered above, everything is now in order
			// Fire an inner synthetic event with the original arguments
			} else if ( saved.length ) {

				// ...and capture the result
				dataPriv.set( this, type, {
					value: jQuery.event.trigger(

						// Support: IE <=9 - 11+
						// Extend with the prototype to reset the above stopImmediatePropagation()
						jQuery.extend( saved[ 0 ], jQuery.Event.prototype ),
						saved.slice( 1 ),
						this
					)
				} );

				// Abort handling of the native event
				event.stopImmediatePropagation();
			}
		}
	} );
}

jQuery.removeEvent = function( elem, type, handle ) {

	// This "if" is needed for plain objects
	if ( elem.removeEventListener ) {
		elem.removeEventListener( type, handle );
	}
};

jQuery.Event = function( src, props ) {

	// Allow instantiation without the 'new' keyword
	if ( !( this instanceof jQuery.Event ) ) {
		return new jQuery.Event( src, props );
	}

	// Event object
	if ( src && src.type ) {
		this.originalEvent = src;
		this.type = src.type;

		// Events bubbling up the document may have been marked as prevented
		// by a handler lower down the tree; reflect the correct value.
		this.isDefaultPrevented = src.defaultPrevented ||
				src.defaultPrevented === undefined &&

				// Support: Android <=2.3 only
				src.returnValue === false ?
			returnTrue :
			returnFalse;

		// Create target properties
		// Support: Safari <=6 - 7 only
		// Target should not be a text node (#504, #13143)
		this.target = ( src.target && src.target.nodeType === 3 ) ?
			src.target.parentNode :
			src.target;

		this.currentTarget = src.currentTarget;
		this.relatedTarget = src.relatedTarget;

	// Event type
	} else {
		this.type = src;
	}

	// Put explicitly provided properties onto the event object
	if ( props ) {
		jQuery.extend( this, props );
	}

	// Create a timestamp if incoming event doesn't have one
	this.timeStamp = src && src.timeStamp || Date.now();

	// Mark it as fixed
	this[ jQuery.expando ] = true;
};

// jQuery.Event is based on DOM3 Events as specified by the ECMAScript Language Binding
// https://www.w3.org/TR/2003/WD-DOM-Level-3-Events-20030331/ecma-script-binding.html
jQuery.Event.prototype = {
	constructor: jQuery.Event,
	isDefaultPrevented: returnFalse,
	isPropagationStopped: returnFalse,
	isImmediatePropagationStopped: returnFalse,
	isSimulated: false,

	preventDefault: function() {
		var e = this.originalEvent;

		this.isDefaultPrevented = returnTrue;

		if ( e && !this.isSimulated ) {
			e.preventDefault();
		}
	},
	stopPropagation: function() {
		var e = this.originalEvent;

		this.isPropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopPropagation();
		}
	},
	stopImmediatePropagation: function() {
		var e = this.originalEvent;

		this.isImmediatePropagationStopped = returnTrue;

		if ( e && !this.isSimulated ) {
			e.stopImmediatePropagation();
		}

		this.stopPropagation();
	}
};

// Includes all common event props including KeyEvent and MouseEvent specific props
jQuery.each( {
	altKey: true,
	bubbles: true,
	cancelable: true,
	changedTouches: true,
	ctrlKey: true,
	detail: true,
	eventPhase: true,
	metaKey: true,
	pageX: true,
	pageY: true,
	shiftKey: true,
	view: true,
	"char": true,
	code: true,
	charCode: true,
	key: true,
	keyCode: true,
	button: true,
	buttons: true,
	clientX: true,
	clientY: true,
	offsetX: true,
	offsetY: true,
	pointerId: true,
	pointerType: true,
	screenX: true,
	screenY: true,
	targetTouches: true,
	toElement: true,
	touches: true,

	which: function( event ) {
		var button = event.button;

		// Add which for key events
		if ( event.which == null && rkeyEvent.test( event.type ) ) {
			return event.charCode != null ? event.charCode : event.keyCode;
		}

		// Add which for click: 1 === left; 2 === middle; 3 === right
		if ( !event.which && button !== undefined && rmouseEvent.test( event.type ) ) {
			if ( button & 1 ) {
				return 1;
			}

			if ( button & 2 ) {
				return 3;
			}

			if ( button & 4 ) {
				return 2;
			}

			return 0;
		}

		return event.which;
	}
}, jQuery.event.addProp );

jQuery.each( { focus: "focusin", blur: "focusout" }, function( type, delegateType ) {
	jQuery.event.special[ type ] = {

		// Utilize native event if possible so blur/focus sequence is correct
		setup: function() {

			// Claim the first handler
			// dataPriv.set( this, "focus", ... )
			// dataPriv.set( this, "blur", ... )
			leverageNative( this, type, expectSync );

			// Return false to allow normal processing in the caller
			return false;
		},
		trigger: function() {

			// Force setup before trigger
			leverageNative( this, type );

			// Return non-false to allow normal event-path propagation
			return true;
		},

		delegateType: delegateType
	};
} );

// Create mouseenter/leave events using mouseover/out and event-time checks
// so that event delegation works in jQuery.
// Do the same for pointerenter/pointerleave and pointerover/pointerout
//
// Support: Safari 7 only
// Safari sends mouseenter too often; see:
// https://bugs.chromium.org/p/chromium/issues/detail?id=470258
// for the description of the bug (it existed in older Chrome versions as well).
jQuery.each( {
	mouseenter: "mouseover",
	mouseleave: "mouseout",
	pointerenter: "pointerover",
	pointerleave: "pointerout"
}, function( orig, fix ) {
	jQuery.event.special[ orig ] = {
		delegateType: fix,
		bindType: fix,

		handle: function( event ) {
			var ret,
				target = this,
				related = event.relatedTarget,
				handleObj = event.handleObj;

			// For mouseenter/leave call the handler if related is outside the target.
			// NB: No relatedTarget if the mouse left/entered the browser window
			if ( !related || ( related !== target && !jQuery.contains( target, related ) ) ) {
				event.type = handleObj.origType;
				ret = handleObj.handler.apply( this, arguments );
				event.type = fix;
			}
			return ret;
		}
	};
} );

jQuery.fn.extend( {

	on: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn );
	},
	one: function( types, selector, data, fn ) {
		return on( this, types, selector, data, fn, 1 );
	},
	off: function( types, selector, fn ) {
		var handleObj, type;
		if ( types && types.preventDefault && types.handleObj ) {

			// ( event )  dispatched jQuery.Event
			handleObj = types.handleObj;
			jQuery( types.delegateTarget ).off(
				handleObj.namespace ?
					handleObj.origType + "." + handleObj.namespace :
					handleObj.origType,
				handleObj.selector,
				handleObj.handler
			);
			return this;
		}
		if ( typeof types === "object" ) {

			// ( types-object [, selector] )
			for ( type in types ) {
				this.off( type, selector, types[ type ] );
			}
			return this;
		}
		if ( selector === false || typeof selector === "function" ) {

			// ( types [, fn] )
			fn = selector;
			selector = undefined;
		}
		if ( fn === false ) {
			fn = returnFalse;
		}
		return this.each( function() {
			jQuery.event.remove( this, types, fn, selector );
		} );
	}
} );


var

	/* eslint-disable max-len */

	// See https://github.com/eslint/eslint/issues/3229
	rxhtmlTag = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,

	/* eslint-enable */

	// Support: IE <=10 - 11, Edge 12 - 13 only
	// In IE/Edge using regex groups here causes severe slowdowns.
	// See https://connect.microsoft.com/IE/feedback/details/1736512/
	rnoInnerhtml = /<script|<style|<link/i,

	// checked="checked" or checked
	rchecked = /checked\s*(?:[^=]|=\s*.checked.)/i,
	rcleanScript = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;

// Prefer a tbody over its parent table for containing new rows
function manipulationTarget( elem, content ) {
	if ( nodeName( elem, "table" ) &&
		nodeName( content.nodeType !== 11 ? content : content.firstChild, "tr" ) ) {

		return jQuery( elem ).children( "tbody" )[ 0 ] || elem;
	}

	return elem;
}

// Replace/restore the type attribute of script elements for safe DOM manipulation
function disableScript( elem ) {
	elem.type = ( elem.getAttribute( "type" ) !== null ) + "/" + elem.type;
	return elem;
}
function restoreScript( elem ) {
	if ( ( elem.type || "" ).slice( 0, 5 ) === "true/" ) {
		elem.type = elem.type.slice( 5 );
	} else {
		elem.removeAttribute( "type" );
	}

	return elem;
}

function cloneCopyEvent( src, dest ) {
	var i, l, type, pdataOld, pdataCur, udataOld, udataCur, events;

	if ( dest.nodeType !== 1 ) {
		return;
	}

	// 1. Copy private data: events, handlers, etc.
	if ( dataPriv.hasData( src ) ) {
		pdataOld = dataPriv.access( src );
		pdataCur = dataPriv.set( dest, pdataOld );
		events = pdataOld.events;

		if ( events ) {
			delete pdataCur.handle;
			pdataCur.events = {};

			for ( type in events ) {
				for ( i = 0, l = events[ type ].length; i < l; i++ ) {
					jQuery.event.add( dest, type, events[ type ][ i ] );
				}
			}
		}
	}

	// 2. Copy user data
	if ( dataUser.hasData( src ) ) {
		udataOld = dataUser.access( src );
		udataCur = jQuery.extend( {}, udataOld );

		dataUser.set( dest, udataCur );
	}
}

// Fix IE bugs, see support tests
function fixInput( src, dest ) {
	var nodeName = dest.nodeName.toLowerCase();

	// Fails to persist the checked state of a cloned checkbox or radio button.
	if ( nodeName === "input" && rcheckableType.test( src.type ) ) {
		dest.checked = src.checked;

	// Fails to return the selected option to the default selected state when cloning options
	} else if ( nodeName === "input" || nodeName === "textarea" ) {
		dest.defaultValue = src.defaultValue;
	}
}

function domManip( collection, args, callback, ignored ) {

	// Flatten any nested arrays
	args = concat.apply( [], args );

	var fragment, first, scripts, hasScripts, node, doc,
		i = 0,
		l = collection.length,
		iNoClone = l - 1,
		value = args[ 0 ],
		valueIsFunction = isFunction( value );

	// We can't cloneNode fragments that contain checked, in WebKit
	if ( valueIsFunction ||
			( l > 1 && typeof value === "string" &&
				!support.checkClone && rchecked.test( value ) ) ) {
		return collection.each( function( index ) {
			var self = collection.eq( index );
			if ( valueIsFunction ) {
				args[ 0 ] = value.call( this, index, self.html() );
			}
			domManip( self, args, callback, ignored );
		} );
	}

	if ( l ) {
		fragment = buildFragment( args, collection[ 0 ].ownerDocument, false, collection, ignored );
		first = fragment.firstChild;

		if ( fragment.childNodes.length === 1 ) {
			fragment = first;
		}

		// Require either new content or an interest in ignored elements to invoke the callback
		if ( first || ignored ) {
			scripts = jQuery.map( getAll( fragment, "script" ), disableScript );
			hasScripts = scripts.length;

			// Use the original fragment for the last item
			// instead of the first because it can end up
			// being emptied incorrectly in certain situations (#8070).
			for ( ; i < l; i++ ) {
				node = fragment;

				if ( i !== iNoClone ) {
					node = jQuery.clone( node, true, true );

					// Keep references to cloned scripts for later restoration
					if ( hasScripts ) {

						// Support: Android <=4.0 only, PhantomJS 1 only
						// push.apply(_, arraylike) throws on ancient WebKit
						jQuery.merge( scripts, getAll( node, "script" ) );
					}
				}

				callback.call( collection[ i ], node, i );
			}

			if ( hasScripts ) {
				doc = scripts[ scripts.length - 1 ].ownerDocument;

				// Reenable scripts
				jQuery.map( scripts, restoreScript );

				// Evaluate executable scripts on first document insertion
				for ( i = 0; i < hasScripts; i++ ) {
					node = scripts[ i ];
					if ( rscriptType.test( node.type || "" ) &&
						!dataPriv.access( node, "globalEval" ) &&
						jQuery.contains( doc, node ) ) {

						if ( node.src && ( node.type || "" ).toLowerCase()  !== "module" ) {

							// Optional AJAX dependency, but won't run scripts if not present
							if ( jQuery._evalUrl && !node.noModule ) {
								jQuery._evalUrl( node.src, {
									nonce: node.nonce || node.getAttribute( "nonce" )
								} );
							}
						} else {
							DOMEval( node.textContent.replace( rcleanScript, "" ), node, doc );
						}
					}
				}
			}
		}
	}

	return collection;
}

function remove( elem, selector, keepData ) {
	var node,
		nodes = selector ? jQuery.filter( selector, elem ) : elem,
		i = 0;

	for ( ; ( node = nodes[ i ] ) != null; i++ ) {
		if ( !keepData && node.nodeType === 1 ) {
			jQuery.cleanData( getAll( node ) );
		}

		if ( node.parentNode ) {
			if ( keepData && isAttached( node ) ) {
				setGlobalEval( getAll( node, "script" ) );
			}
			node.parentNode.removeChild( node );
		}
	}

	return elem;
}

jQuery.extend( {
	htmlPrefilter: function( html ) {
		return html.replace( rxhtmlTag, "<$1></$2>" );
	},

	clone: function( elem, dataAndEvents, deepDataAndEvents ) {
		var i, l, srcElements, destElements,
			clone = elem.cloneNode( true ),
			inPage = isAttached( elem );

		// Fix IE cloning issues
		if ( !support.noCloneChecked && ( elem.nodeType === 1 || elem.nodeType === 11 ) &&
				!jQuery.isXMLDoc( elem ) ) {

			// We eschew Sizzle here for performance reasons: https://jsperf.com/getall-vs-sizzle/2
			destElements = getAll( clone );
			srcElements = getAll( elem );

			for ( i = 0, l = srcElements.length; i < l; i++ ) {
				fixInput( srcElements[ i ], destElements[ i ] );
			}
		}

		// Copy the events from the original to the clone
		if ( dataAndEvents ) {
			if ( deepDataAndEvents ) {
				srcElements = srcElements || getAll( elem );
				destElements = destElements || getAll( clone );

				for ( i = 0, l = srcElements.length; i < l; i++ ) {
					cloneCopyEvent( srcElements[ i ], destElements[ i ] );
				}
			} else {
				cloneCopyEvent( elem, clone );
			}
		}

		// Preserve script evaluation history
		destElements = getAll( clone, "script" );
		if ( destElements.length > 0 ) {
			setGlobalEval( destElements, !inPage && getAll( elem, "script" ) );
		}

		// Return the cloned set
		return clone;
	},

	cleanData: function( elems ) {
		var data, elem, type,
			special = jQuery.event.special,
			i = 0;

		for ( ; ( elem = elems[ i ] ) !== undefined; i++ ) {
			if ( acceptData( elem ) ) {
				if ( ( data = elem[ dataPriv.expando ] ) ) {
					if ( data.events ) {
						for ( type in data.events ) {
							if ( special[ type ] ) {
								jQuery.event.remove( elem, type );

							// This is a shortcut to avoid jQuery.event.remove's overhead
							} else {
								jQuery.removeEvent( elem, type, data.handle );
							}
						}
					}

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataPriv.expando ] = undefined;
				}
				if ( elem[ dataUser.expando ] ) {

					// Support: Chrome <=35 - 45+
					// Assign undefined instead of using delete, see Data#remove
					elem[ dataUser.expando ] = undefined;
				}
			}
		}
	}
} );

jQuery.fn.extend( {
	detach: function( selector ) {
		return remove( this, selector, true );
	},

	remove: function( selector ) {
		return remove( this, selector );
	},

	text: function( value ) {
		return access( this, function( value ) {
			return value === undefined ?
				jQuery.text( this ) :
				this.empty().each( function() {
					if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
						this.textContent = value;
					}
				} );
		}, null, value, arguments.length );
	},

	append: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.appendChild( elem );
			}
		} );
	},

	prepend: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.nodeType === 1 || this.nodeType === 11 || this.nodeType === 9 ) {
				var target = manipulationTarget( this, elem );
				target.insertBefore( elem, target.firstChild );
			}
		} );
	},

	before: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this );
			}
		} );
	},

	after: function() {
		return domManip( this, arguments, function( elem ) {
			if ( this.parentNode ) {
				this.parentNode.insertBefore( elem, this.nextSibling );
			}
		} );
	},

	empty: function() {
		var elem,
			i = 0;

		for ( ; ( elem = this[ i ] ) != null; i++ ) {
			if ( elem.nodeType === 1 ) {

				// Prevent memory leaks
				jQuery.cleanData( getAll( elem, false ) );

				// Remove any remaining nodes
				elem.textContent = "";
			}
		}

		return this;
	},

	clone: function( dataAndEvents, deepDataAndEvents ) {
		dataAndEvents = dataAndEvents == null ? false : dataAndEvents;
		deepDataAndEvents = deepDataAndEvents == null ? dataAndEvents : deepDataAndEvents;

		return this.map( function() {
			return jQuery.clone( this, dataAndEvents, deepDataAndEvents );
		} );
	},

	html: function( value ) {
		return access( this, function( value ) {
			var elem = this[ 0 ] || {},
				i = 0,
				l = this.length;

			if ( value === undefined && elem.nodeType === 1 ) {
				return elem.innerHTML;
			}

			// See if we can take a shortcut and just use innerHTML
			if ( typeof value === "string" && !rnoInnerhtml.test( value ) &&
				!wrapMap[ ( rtagName.exec( value ) || [ "", "" ] )[ 1 ].toLowerCase() ] ) {

				value = jQuery.htmlPrefilter( value );

				try {
					for ( ; i < l; i++ ) {
						elem = this[ i ] || {};

						// Remove element nodes and prevent memory leaks
						if ( elem.nodeType === 1 ) {
							jQuery.cleanData( getAll( elem, false ) );
							elem.innerHTML = value;
						}
					}

					elem = 0;

				// If using innerHTML throws an exception, use the fallback method
				} catch ( e ) {}
			}

			if ( elem ) {
				this.empty().append( value );
			}
		}, null, value, arguments.length );
	},

	replaceWith: function() {
		var ignored = [];

		// Make the changes, replacing each non-ignored context element with the new content
		return domManip( this, arguments, function( elem ) {
			var parent = this.parentNode;

			if ( jQuery.inArray( this, ignored ) < 0 ) {
				jQuery.cleanData( getAll( this ) );
				if ( parent ) {
					parent.replaceChild( elem, this );
				}
			}

		// Force callback invocation
		}, ignored );
	}
} );

jQuery.each( {
	appendTo: "append",
	prependTo: "prepend",
	insertBefore: "before",
	insertAfter: "after",
	replaceAll: "replaceWith"
}, function( name, original ) {
	jQuery.fn[ name ] = function( selector ) {
		var elems,
			ret = [],
			insert = jQuery( selector ),
			last = insert.length - 1,
			i = 0;

		for ( ; i <= last; i++ ) {
			elems = i === last ? this : this.clone( true );
			jQuery( insert[ i ] )[ original ]( elems );

			// Support: Android <=4.0 only, PhantomJS 1 only
			// .get() because push.apply(_, arraylike) throws on ancient WebKit
			push.apply( ret, elems.get() );
		}

		return this.pushStack( ret );
	};
} );
var rnumnonpx = new RegExp( "^(" + pnum + ")(?!px)[a-z%]+$", "i" );

var getStyles = function( elem ) {

		// Support: IE <=11 only, Firefox <=30 (#15098, #14150)
		// IE throws on elements created in popups
		// FF meanwhile throws on frame elements through "defaultView.getComputedStyle"
		var view = elem.ownerDocument.defaultView;

		if ( !view || !view.opener ) {
			view = window;
		}

		return view.getComputedStyle( elem );
	};

var rboxStyle = new RegExp( cssExpand.join( "|" ), "i" );



( function() {

	// Executing both pixelPosition & boxSizingReliable tests require only one layout
	// so they're executed at the same time to save the second computation.
	function computeStyleTests() {

		// This is a singleton, we need to execute it only once
		if ( !div ) {
			return;
		}

		container.style.cssText = "position:absolute;left:-11111px;width:60px;" +
			"margin-top:1px;padding:0;border:0";
		div.style.cssText =
			"position:relative;display:block;box-sizing:border-box;overflow:scroll;" +
			"margin:auto;border:1px;padding:1px;" +
			"width:60%;top:1%";
		documentElement.appendChild( container ).appendChild( div );

		var divStyle = window.getComputedStyle( div );
		pixelPositionVal = divStyle.top !== "1%";

		// Support: Android 4.0 - 4.3 only, Firefox <=3 - 44
		reliableMarginLeftVal = roundPixelMeasures( divStyle.marginLeft ) === 12;

		// Support: Android 4.0 - 4.3 only, Safari <=9.1 - 10.1, iOS <=7.0 - 9.3
		// Some styles come back with percentage values, even though they shouldn't
		div.style.right = "60%";
		pixelBoxStylesVal = roundPixelMeasures( divStyle.right ) === 36;

		// Support: IE 9 - 11 only
		// Detect misreporting of content dimensions for box-sizing:border-box elements
		boxSizingReliableVal = roundPixelMeasures( divStyle.width ) === 36;

		// Support: IE 9 only
		// Detect overflow:scroll screwiness (gh-3699)
		// Support: Chrome <=64
		// Don't get tricked when zoom affects offsetWidth (gh-4029)
		div.style.position = "absolute";
		scrollboxSizeVal = roundPixelMeasures( div.offsetWidth / 3 ) === 12;

		documentElement.removeChild( container );

		// Nullify the div so it wouldn't be stored in the memory and
		// it will also be a sign that checks already performed
		div = null;
	}

	function roundPixelMeasures( measure ) {
		return Math.round( parseFloat( measure ) );
	}

	var pixelPositionVal, boxSizingReliableVal, scrollboxSizeVal, pixelBoxStylesVal,
		reliableMarginLeftVal,
		container = document.createElement( "div" ),
		div = document.createElement( "div" );

	// Finish early in limited (non-browser) environments
	if ( !div.style ) {
		return;
	}

	// Support: IE <=9 - 11 only
	// Style of cloned element affects source element cloned (#8908)
	div.style.backgroundClip = "content-box";
	div.cloneNode( true ).style.backgroundClip = "";
	support.clearCloneStyle = div.style.backgroundClip === "content-box";

	jQuery.extend( support, {
		boxSizingReliable: function() {
			computeStyleTests();
			return boxSizingReliableVal;
		},
		pixelBoxStyles: function() {
			computeStyleTests();
			return pixelBoxStylesVal;
		},
		pixelPosition: function() {
			computeStyleTests();
			return pixelPositionVal;
		},
		reliableMarginLeft: function() {
			computeStyleTests();
			return reliableMarginLeftVal;
		},
		scrollboxSize: function() {
			computeStyleTests();
			return scrollboxSizeVal;
		}
	} );
} )();


function curCSS( elem, name, computed ) {
	var width, minWidth, maxWidth, ret,

		// Support: Firefox 51+
		// Retrieving style before computed somehow
		// fixes an issue with getting wrong values
		// on detached elements
		style = elem.style;

	computed = computed || getStyles( elem );

	// getPropertyValue is needed for:
	//   .css('filter') (IE 9 only, #12537)
	//   .css('--customProperty) (#3144)
	if ( computed ) {
		ret = computed.getPropertyValue( name ) || computed[ name ];

		if ( ret === "" && !isAttached( elem ) ) {
			ret = jQuery.style( elem, name );
		}

		// A tribute to the "awesome hack by Dean Edwards"
		// Android Browser returns percentage for some values,
		// but width seems to be reliably pixels.
		// This is against the CSSOM draft spec:
		// https://drafts.csswg.org/cssom/#resolved-values
		if ( !support.pixelBoxStyles() && rnumnonpx.test( ret ) && rboxStyle.test( name ) ) {

			// Remember the original values
			width = style.width;
			minWidth = style.minWidth;
			maxWidth = style.maxWidth;

			// Put in the new values to get a computed value out
			style.minWidth = style.maxWidth = style.width = ret;
			ret = computed.width;

			// Revert the changed values
			style.width = width;
			style.minWidth = minWidth;
			style.maxWidth = maxWidth;
		}
	}

	return ret !== undefined ?

		// Support: IE <=9 - 11 only
		// IE returns zIndex value as an integer.
		ret + "" :
		ret;
}


function addGetHookIf( conditionFn, hookFn ) {

	// Define the hook, we'll check on the first run if it's really needed.
	return {
		get: function() {
			if ( conditionFn() ) {

				// Hook not needed (or it's not possible to use it due
				// to missing dependency), remove it.
				delete this.get;
				return;
			}

			// Hook needed; redefine it so that the support test is not executed again.
			return ( this.get = hookFn ).apply( this, arguments );
		}
	};
}


var cssPrefixes = [ "Webkit", "Moz", "ms" ],
	emptyStyle = document.createElement( "div" ).style,
	vendorProps = {};

// Return a vendor-prefixed property or undefined
function vendorPropName( name ) {

	// Check for vendor prefixed names
	var capName = name[ 0 ].toUpperCase() + name.slice( 1 ),
		i = cssPrefixes.length;

	while ( i-- ) {
		name = cssPrefixes[ i ] + capName;
		if ( name in emptyStyle ) {
			return name;
		}
	}
}

// Return a potentially-mapped jQuery.cssProps or vendor prefixed property
function finalPropName( name ) {
	var final = jQuery.cssProps[ name ] || vendorProps[ name ];

	if ( final ) {
		return final;
	}
	if ( name in emptyStyle ) {
		return name;
	}
	return vendorProps[ name ] = vendorPropName( name ) || name;
}


var

	// Swappable if display is none or starts with table
	// except "table", "table-cell", or "table-caption"
	// See here for display values: https://developer.mozilla.org/en-US/docs/CSS/display
	rdisplayswap = /^(none|table(?!-c[ea]).+)/,
	rcustomProp = /^--/,
	cssShow = { position: "absolute", visibility: "hidden", display: "block" },
	cssNormalTransform = {
		letterSpacing: "0",
		fontWeight: "400"
	};

function setPositiveNumber( elem, value, subtract ) {

	// Any relative (+/-) values have already been
	// normalized at this point
	var matches = rcssNum.exec( value );
	return matches ?

		// Guard against undefined "subtract", e.g., when used as in cssHooks
		Math.max( 0, matches[ 2 ] - ( subtract || 0 ) ) + ( matches[ 3 ] || "px" ) :
		value;
}

function boxModelAdjustment( elem, dimension, box, isBorderBox, styles, computedVal ) {
	var i = dimension === "width" ? 1 : 0,
		extra = 0,
		delta = 0;

	// Adjustment may not be necessary
	if ( box === ( isBorderBox ? "border" : "content" ) ) {
		return 0;
	}

	for ( ; i < 4; i += 2 ) {

		// Both box models exclude margin
		if ( box === "margin" ) {
			delta += jQuery.css( elem, box + cssExpand[ i ], true, styles );
		}

		// If we get here with a content-box, we're seeking "padding" or "border" or "margin"
		if ( !isBorderBox ) {

			// Add padding
			delta += jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );

			// For "border" or "margin", add border
			if ( box !== "padding" ) {
				delta += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );

			// But still keep track of it otherwise
			} else {
				extra += jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}

		// If we get here with a border-box (content + padding + border), we're seeking "content" or
		// "padding" or "margin"
		} else {

			// For "content", subtract padding
			if ( box === "content" ) {
				delta -= jQuery.css( elem, "padding" + cssExpand[ i ], true, styles );
			}

			// For "content" or "padding", subtract border
			if ( box !== "margin" ) {
				delta -= jQuery.css( elem, "border" + cssExpand[ i ] + "Width", true, styles );
			}
		}
	}

	// Account for positive content-box scroll gutter when requested by providing computedVal
	if ( !isBorderBox && computedVal >= 0 ) {

		// offsetWidth/offsetHeight is a rounded sum of content, padding, scroll gutter, and border
		// Assuming integer scroll gutter, subtract the rest and round down
		delta += Math.max( 0, Math.ceil(
			elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
			computedVal -
			delta -
			extra -
			0.5

		// If offsetWidth/offsetHeight is unknown, then we can't determine content-box scroll gutter
		// Use an explicit zero to avoid NaN (gh-3964)
		) ) || 0;
	}

	return delta;
}

function getWidthOrHeight( elem, dimension, extra ) {

	// Start with computed style
	var styles = getStyles( elem ),

		// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-4322).
		// Fake content-box until we know it's needed to know the true value.
		boxSizingNeeded = !support.boxSizingReliable() || extra,
		isBorderBox = boxSizingNeeded &&
			jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
		valueIsBorderBox = isBorderBox,

		val = curCSS( elem, dimension, styles ),
		offsetProp = "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 );

	// Support: Firefox <=54
	// Return a confounding non-pixel value or feign ignorance, as appropriate.
	if ( rnumnonpx.test( val ) ) {
		if ( !extra ) {
			return val;
		}
		val = "auto";
	}


	// Fall back to offsetWidth/offsetHeight when value is "auto"
	// This happens for inline elements with no explicit setting (gh-3571)
	// Support: Android <=4.1 - 4.3 only
	// Also use offsetWidth/offsetHeight for misreported inline dimensions (gh-3602)
	// Support: IE 9-11 only
	// Also use offsetWidth/offsetHeight for when box sizing is unreliable
	// We use getClientRects() to check for hidden/disconnected.
	// In those cases, the computed value can be trusted to be border-box
	if ( ( !support.boxSizingReliable() && isBorderBox ||
		val === "auto" ||
		!parseFloat( val ) && jQuery.css( elem, "display", false, styles ) === "inline" ) &&
		elem.getClientRects().length ) {

		isBorderBox = jQuery.css( elem, "boxSizing", false, styles ) === "border-box";

		// Where available, offsetWidth/offsetHeight approximate border box dimensions.
		// Where not available (e.g., SVG), assume unreliable box-sizing and interpret the
		// retrieved value as a content box dimension.
		valueIsBorderBox = offsetProp in elem;
		if ( valueIsBorderBox ) {
			val = elem[ offsetProp ];
		}
	}

	// Normalize "" and auto
	val = parseFloat( val ) || 0;

	// Adjust for the element's box model
	return ( val +
		boxModelAdjustment(
			elem,
			dimension,
			extra || ( isBorderBox ? "border" : "content" ),
			valueIsBorderBox,
			styles,

			// Provide the current computed size to request scroll gutter calculation (gh-3589)
			val
		)
	) + "px";
}

jQuery.extend( {

	// Add in style property hooks for overriding the default
	// behavior of getting and setting a style property
	cssHooks: {
		opacity: {
			get: function( elem, computed ) {
				if ( computed ) {

					// We should always get a number back from opacity
					var ret = curCSS( elem, "opacity" );
					return ret === "" ? "1" : ret;
				}
			}
		}
	},

	// Don't automatically add "px" to these possibly-unitless properties
	cssNumber: {
		"animationIterationCount": true,
		"columnCount": true,
		"fillOpacity": true,
		"flexGrow": true,
		"flexShrink": true,
		"fontWeight": true,
		"gridArea": true,
		"gridColumn": true,
		"gridColumnEnd": true,
		"gridColumnStart": true,
		"gridRow": true,
		"gridRowEnd": true,
		"gridRowStart": true,
		"lineHeight": true,
		"opacity": true,
		"order": true,
		"orphans": true,
		"widows": true,
		"zIndex": true,
		"zoom": true
	},

	// Add in properties whose names you wish to fix before
	// setting or getting the value
	cssProps: {},

	// Get and set the style property on a DOM Node
	style: function( elem, name, value, extra ) {

		// Don't set styles on text and comment nodes
		if ( !elem || elem.nodeType === 3 || elem.nodeType === 8 || !elem.style ) {
			return;
		}

		// Make sure that we're working with the right name
		var ret, type, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name ),
			style = elem.style;

		// Make sure that we're working with the right name. We don't
		// want to query the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Gets hook for the prefixed version, then unprefixed version
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// Check if we're setting a value
		if ( value !== undefined ) {
			type = typeof value;

			// Convert "+=" or "-=" to relative numbers (#7345)
			if ( type === "string" && ( ret = rcssNum.exec( value ) ) && ret[ 1 ] ) {
				value = adjustCSS( elem, name, ret );

				// Fixes bug #9237
				type = "number";
			}

			// Make sure that null and NaN values aren't set (#7116)
			if ( value == null || value !== value ) {
				return;
			}

			// If a number was passed in, add the unit (except for certain CSS properties)
			// The isCustomProp check can be removed in jQuery 4.0 when we only auto-append
			// "px" to a few hardcoded values.
			if ( type === "number" && !isCustomProp ) {
				value += ret && ret[ 3 ] || ( jQuery.cssNumber[ origName ] ? "" : "px" );
			}

			// background-* props affect original clone's values
			if ( !support.clearCloneStyle && value === "" && name.indexOf( "background" ) === 0 ) {
				style[ name ] = "inherit";
			}

			// If a hook was provided, use that value, otherwise just set the specified value
			if ( !hooks || !( "set" in hooks ) ||
				( value = hooks.set( elem, value, extra ) ) !== undefined ) {

				if ( isCustomProp ) {
					style.setProperty( name, value );
				} else {
					style[ name ] = value;
				}
			}

		} else {

			// If a hook was provided get the non-computed value from there
			if ( hooks && "get" in hooks &&
				( ret = hooks.get( elem, false, extra ) ) !== undefined ) {

				return ret;
			}

			// Otherwise just get the value from the style object
			return style[ name ];
		}
	},

	css: function( elem, name, extra, styles ) {
		var val, num, hooks,
			origName = camelCase( name ),
			isCustomProp = rcustomProp.test( name );

		// Make sure that we're working with the right name. We don't
		// want to modify the value if it is a CSS custom property
		// since they are user-defined.
		if ( !isCustomProp ) {
			name = finalPropName( origName );
		}

		// Try prefixed name followed by the unprefixed name
		hooks = jQuery.cssHooks[ name ] || jQuery.cssHooks[ origName ];

		// If a hook was provided get the computed value from there
		if ( hooks && "get" in hooks ) {
			val = hooks.get( elem, true, extra );
		}

		// Otherwise, if a way to get the computed value exists, use that
		if ( val === undefined ) {
			val = curCSS( elem, name, styles );
		}

		// Convert "normal" to computed value
		if ( val === "normal" && name in cssNormalTransform ) {
			val = cssNormalTransform[ name ];
		}

		// Make numeric if forced or a qualifier was provided and val looks numeric
		if ( extra === "" || extra ) {
			num = parseFloat( val );
			return extra === true || isFinite( num ) ? num || 0 : val;
		}

		return val;
	}
} );

jQuery.each( [ "height", "width" ], function( i, dimension ) {
	jQuery.cssHooks[ dimension ] = {
		get: function( elem, computed, extra ) {
			if ( computed ) {

				// Certain elements can have dimension info if we invisibly show them
				// but it must have a current display style that would benefit
				return rdisplayswap.test( jQuery.css( elem, "display" ) ) &&

					// Support: Safari 8+
					// Table columns in Safari have non-zero offsetWidth & zero
					// getBoundingClientRect().width unless display is changed.
					// Support: IE <=11 only
					// Running getBoundingClientRect on a disconnected node
					// in IE throws an error.
					( !elem.getClientRects().length || !elem.getBoundingClientRect().width ) ?
						swap( elem, cssShow, function() {
							return getWidthOrHeight( elem, dimension, extra );
						} ) :
						getWidthOrHeight( elem, dimension, extra );
			}
		},

		set: function( elem, value, extra ) {
			var matches,
				styles = getStyles( elem ),

				// Only read styles.position if the test has a chance to fail
				// to avoid forcing a reflow.
				scrollboxSizeBuggy = !support.scrollboxSize() &&
					styles.position === "absolute",

				// To avoid forcing a reflow, only fetch boxSizing if we need it (gh-3991)
				boxSizingNeeded = scrollboxSizeBuggy || extra,
				isBorderBox = boxSizingNeeded &&
					jQuery.css( elem, "boxSizing", false, styles ) === "border-box",
				subtract = extra ?
					boxModelAdjustment(
						elem,
						dimension,
						extra,
						isBorderBox,
						styles
					) :
					0;

			// Account for unreliable border-box dimensions by comparing offset* to computed and
			// faking a content-box to get border and padding (gh-3699)
			if ( isBorderBox && scrollboxSizeBuggy ) {
				subtract -= Math.ceil(
					elem[ "offset" + dimension[ 0 ].toUpperCase() + dimension.slice( 1 ) ] -
					parseFloat( styles[ dimension ] ) -
					boxModelAdjustment( elem, dimension, "border", false, styles ) -
					0.5
				);
			}

			// Convert to pixels if value adjustment is needed
			if ( subtract && ( matches = rcssNum.exec( value ) ) &&
				( matches[ 3 ] || "px" ) !== "px" ) {

				elem.style[ dimension ] = value;
				value = jQuery.css( elem, dimension );
			}

			return setPositiveNumber( elem, value, subtract );
		}
	};
} );

jQuery.cssHooks.marginLeft = addGetHookIf( support.reliableMarginLeft,
	function( elem, computed ) {
		if ( computed ) {
			return ( parseFloat( curCSS( elem, "marginLeft" ) ) ||
				elem.getBoundingClientRect().left -
					swap( elem, { marginLeft: 0 }, function() {
						return elem.getBoundingClientRect().left;
					} )
				) + "px";
		}
	}
);

// These hooks are used by animate to expand properties
jQuery.each( {
	margin: "",
	padding: "",
	border: "Width"
}, function( prefix, suffix ) {
	jQuery.cssHooks[ prefix + suffix ] = {
		expand: function( value ) {
			var i = 0,
				expanded = {},

				// Assumes a single number if not a string
				parts = typeof value === "string" ? value.split( " " ) : [ value ];

			for ( ; i < 4; i++ ) {
				expanded[ prefix + cssExpand[ i ] + suffix ] =
					parts[ i ] || parts[ i - 2 ] || parts[ 0 ];
			}

			return expanded;
		}
	};

	if ( prefix !== "margin" ) {
		jQuery.cssHooks[ prefix + suffix ].set = setPositiveNumber;
	}
} );

jQuery.fn.extend( {
	css: function( name, value ) {
		return access( this, function( elem, name, value ) {
			var styles, len,
				map = {},
				i = 0;

			if ( Array.isArray( name ) ) {
				styles = getStyles( elem );
				len = name.length;

				for ( ; i < len; i++ ) {
					map[ name[ i ] ] = jQuery.css( elem, name[ i ], false, styles );
				}

				return map;
			}

			return value !== undefined ?
				jQuery.style( elem, name, value ) :
				jQuery.css( elem, name );
		}, name, value, arguments.length > 1 );
	}
} );


function Tween( elem, options, prop, end, easing ) {
	return new Tween.prototype.init( elem, options, prop, end, easing );
}
jQuery.Tween = Tween;

Tween.prototype = {
	constructor: Tween,
	init: function( elem, options, prop, end, easing, unit ) {
		this.elem = elem;
		this.prop = prop;
		this.easing = easing || jQuery.easing._default;
		this.options = options;
		this.start = this.now = this.cur();
		this.end = end;
		this.unit = unit || ( jQuery.cssNumber[ prop ] ? "" : "px" );
	},
	cur: function() {
		var hooks = Tween.propHooks[ this.prop ];

		return hooks && hooks.get ?
			hooks.get( this ) :
			Tween.propHooks._default.get( this );
	},
	run: function( percent ) {
		var eased,
			hooks = Tween.propHooks[ this.prop ];

		if ( this.options.duration ) {
			this.pos = eased = jQuery.easing[ this.easing ](
				percent, this.options.duration * percent, 0, 1, this.options.duration
			);
		} else {
			this.pos = eased = percent;
		}
		this.now = ( this.end - this.start ) * eased + this.start;

		if ( this.options.step ) {
			this.options.step.call( this.elem, this.now, this );
		}

		if ( hooks && hooks.set ) {
			hooks.set( this );
		} else {
			Tween.propHooks._default.set( this );
		}
		return this;
	}
};

Tween.prototype.init.prototype = Tween.prototype;

Tween.propHooks = {
	_default: {
		get: function( tween ) {
			var result;

			// Use a property on the element directly when it is not a DOM element,
			// or when there is no matching style property that exists.
			if ( tween.elem.nodeType !== 1 ||
				tween.elem[ tween.prop ] != null && tween.elem.style[ tween.prop ] == null ) {
				return tween.elem[ tween.prop ];
			}

			// Passing an empty string as a 3rd parameter to .css will automatically
			// attempt a parseFloat and fallback to a string if the parse fails.
			// Simple values such as "10px" are parsed to Float;
			// complex values such as "rotate(1rad)" are returned as-is.
			result = jQuery.css( tween.elem, tween.prop, "" );

			// Empty strings, null, undefined and "auto" are converted to 0.
			return !result || result === "auto" ? 0 : result;
		},
		set: function( tween ) {

			// Use step hook for back compat.
			// Use cssHook if its there.
			// Use .style if available and use plain properties where available.
			if ( jQuery.fx.step[ tween.prop ] ) {
				jQuery.fx.step[ tween.prop ]( tween );
			} else if ( tween.elem.nodeType === 1 && (
					jQuery.cssHooks[ tween.prop ] ||
					tween.elem.style[ finalPropName( tween.prop ) ] != null ) ) {
				jQuery.style( tween.elem, tween.prop, tween.now + tween.unit );
			} else {
				tween.elem[ tween.prop ] = tween.now;
			}
		}
	}
};

// Support: IE <=9 only
// Panic based approach to setting things on disconnected nodes
Tween.propHooks.scrollTop = Tween.propHooks.scrollLeft = {
	set: function( tween ) {
		if ( tween.elem.nodeType && tween.elem.parentNode ) {
			tween.elem[ tween.prop ] = tween.now;
		}
	}
};

jQuery.easing = {
	linear: function( p ) {
		return p;
	},
	swing: function( p ) {
		return 0.5 - Math.cos( p * Math.PI ) / 2;
	},
	_default: "swing"
};

jQuery.fx = Tween.prototype.init;

// Back compat <1.8 extension point
jQuery.fx.step = {};




var
	fxNow, inProgress,
	rfxtypes = /^(?:toggle|show|hide)$/,
	rrun = /queueHooks$/;

function schedule() {
	if ( inProgress ) {
		if ( document.hidden === false && window.requestAnimationFrame ) {
			window.requestAnimationFrame( schedule );
		} else {
			window.setTimeout( schedule, jQuery.fx.interval );
		}

		jQuery.fx.tick();
	}
}

// Animations created synchronously will run synchronously
function createFxNow() {
	window.setTimeout( function() {
		fxNow = undefined;
	} );
	return ( fxNow = Date.now() );
}

// Generate parameters to create a standard animation
function genFx( type, includeWidth ) {
	var which,
		i = 0,
		attrs = { height: type };

	// If we include width, step value is 1 to do all cssExpand values,
	// otherwise step value is 2 to skip over Left and Right
	includeWidth = includeWidth ? 1 : 0;
	for ( ; i < 4; i += 2 - includeWidth ) {
		which = cssExpand[ i ];
		attrs[ "margin" + which ] = attrs[ "padding" + which ] = type;
	}

	if ( includeWidth ) {
		attrs.opacity = attrs.width = type;
	}

	return attrs;
}

function createTween( value, prop, animation ) {
	var tween,
		collection = ( Animation.tweeners[ prop ] || [] ).concat( Animation.tweeners[ "*" ] ),
		index = 0,
		length = collection.length;
	for ( ; index < length; index++ ) {
		if ( ( tween = collection[ index ].call( animation, prop, value ) ) ) {

			// We're done with this property
			return tween;
		}
	}
}

function defaultPrefilter( elem, props, opts ) {
	var prop, value, toggle, hooks, oldfire, propTween, restoreDisplay, display,
		isBox = "width" in props || "height" in props,
		anim = this,
		orig = {},
		style = elem.style,
		hidden = elem.nodeType && isHiddenWithinTree( elem ),
		dataShow = dataPriv.get( elem, "fxshow" );

	// Queue-skipping animations hijack the fx hooks
	if ( !opts.queue ) {
		hooks = jQuery._queueHooks( elem, "fx" );
		if ( hooks.unqueued == null ) {
			hooks.unqueued = 0;
			oldfire = hooks.empty.fire;
			hooks.empty.fire = function() {
				if ( !hooks.unqueued ) {
					oldfire();
				}
			};
		}
		hooks.unqueued++;

		anim.always( function() {

			// Ensure the complete handler is called before this completes
			anim.always( function() {
				hooks.unqueued--;
				if ( !jQuery.queue( elem, "fx" ).length ) {
					hooks.empty.fire();
				}
			} );
		} );
	}

	// Detect show/hide animations
	for ( prop in props ) {
		value = props[ prop ];
		if ( rfxtypes.test( value ) ) {
			delete props[ prop ];
			toggle = toggle || value === "toggle";
			if ( value === ( hidden ? "hide" : "show" ) ) {

				// Pretend to be hidden if this is a "show" and
				// there is still data from a stopped show/hide
				if ( value === "show" && dataShow && dataShow[ prop ] !== undefined ) {
					hidden = true;

				// Ignore all other no-op show/hide data
				} else {
					continue;
				}
			}
			orig[ prop ] = dataShow && dataShow[ prop ] || jQuery.style( elem, prop );
		}
	}

	// Bail out if this is a no-op like .hide().hide()
	propTween = !jQuery.isEmptyObject( props );
	if ( !propTween && jQuery.isEmptyObject( orig ) ) {
		return;
	}

	// Restrict "overflow" and "display" styles during box animations
	if ( isBox && elem.nodeType === 1 ) {

		// Support: IE <=9 - 11, Edge 12 - 15
		// Record all 3 overflow attributes because IE does not infer the shorthand
		// from identically-valued overflowX and overflowY and Edge just mirrors
		// the overflowX value there.
		opts.overflow = [ style.overflow, style.overflowX, style.overflowY ];

		// Identify a display type, preferring old show/hide data over the CSS cascade
		restoreDisplay = dataShow && dataShow.display;
		if ( restoreDisplay == null ) {
			restoreDisplay = dataPriv.get( elem, "display" );
		}
		display = jQuery.css( elem, "display" );
		if ( display === "none" ) {
			if ( restoreDisplay ) {
				display = restoreDisplay;
			} else {

				// Get nonempty value(s) by temporarily forcing visibility
				showHide( [ elem ], true );
				restoreDisplay = elem.style.display || restoreDisplay;
				display = jQuery.css( elem, "display" );
				showHide( [ elem ] );
			}
		}

		// Animate inline elements as inline-block
		if ( display === "inline" || display === "inline-block" && restoreDisplay != null ) {
			if ( jQuery.css( elem, "float" ) === "none" ) {

				// Restore the original display value at the end of pure show/hide animations
				if ( !propTween ) {
					anim.done( function() {
						style.display = restoreDisplay;
					} );
					if ( restoreDisplay == null ) {
						display = style.display;
						restoreDisplay = display === "none" ? "" : display;
					}
				}
				style.display = "inline-block";
			}
		}
	}

	if ( opts.overflow ) {
		style.overflow = "hidden";
		anim.always( function() {
			style.overflow = opts.overflow[ 0 ];
			style.overflowX = opts.overflow[ 1 ];
			style.overflowY = opts.overflow[ 2 ];
		} );
	}

	// Implement show/hide animations
	propTween = false;
	for ( prop in orig ) {

		// General show/hide setup for this element animation
		if ( !propTween ) {
			if ( dataShow ) {
				if ( "hidden" in dataShow ) {
					hidden = dataShow.hidden;
				}
			} else {
				dataShow = dataPriv.access( elem, "fxshow", { display: restoreDisplay } );
			}

			// Store hidden/visible for toggle so `.stop().toggle()` "reverses"
			if ( toggle ) {
				dataShow.hidden = !hidden;
			}

			// Show elements before animating them
			if ( hidden ) {
				showHide( [ elem ], true );
			}

			/* eslint-disable no-loop-func */

			anim.done( function() {

			/* eslint-enable no-loop-func */

				// The final step of a "hide" animation is actually hiding the element
				if ( !hidden ) {
					showHide( [ elem ] );
				}
				dataPriv.remove( elem, "fxshow" );
				for ( prop in orig ) {
					jQuery.style( elem, prop, orig[ prop ] );
				}
			} );
		}

		// Per-property setup
		propTween = createTween( hidden ? dataShow[ prop ] : 0, prop, anim );
		if ( !( prop in dataShow ) ) {
			dataShow[ prop ] = propTween.start;
			if ( hidden ) {
				propTween.end = propTween.start;
				propTween.start = 0;
			}
		}
	}
}

function propFilter( props, specialEasing ) {
	var index, name, easing, value, hooks;

	// camelCase, specialEasing and expand cssHook pass
	for ( index in props ) {
		name = camelCase( index );
		easing = specialEasing[ name ];
		value = props[ index ];
		if ( Array.isArray( value ) ) {
			easing = value[ 1 ];
			value = props[ index ] = value[ 0 ];
		}

		if ( index !== name ) {
			props[ name ] = value;
			delete props[ index ];
		}

		hooks = jQuery.cssHooks[ name ];
		if ( hooks && "expand" in hooks ) {
			value = hooks.expand( value );
			delete props[ name ];

			// Not quite $.extend, this won't overwrite existing keys.
			// Reusing 'index' because we have the correct "name"
			for ( index in value ) {
				if ( !( index in props ) ) {
					props[ index ] = value[ index ];
					specialEasing[ index ] = easing;
				}
			}
		} else {
			specialEasing[ name ] = easing;
		}
	}
}

function Animation( elem, properties, options ) {
	var result,
		stopped,
		index = 0,
		length = Animation.prefilters.length,
		deferred = jQuery.Deferred().always( function() {

			// Don't match elem in the :animated selector
			delete tick.elem;
		} ),
		tick = function() {
			if ( stopped ) {
				return false;
			}
			var currentTime = fxNow || createFxNow(),
				remaining = Math.max( 0, animation.startTime + animation.duration - currentTime ),

				// Support: Android 2.3 only
				// Archaic crash bug won't allow us to use `1 - ( 0.5 || 0 )` (#12497)
				temp = remaining / animation.duration || 0,
				percent = 1 - temp,
				index = 0,
				length = animation.tweens.length;

			for ( ; index < length; index++ ) {
				animation.tweens[ index ].run( percent );
			}

			deferred.notifyWith( elem, [ animation, percent, remaining ] );

			// If there's more to do, yield
			if ( percent < 1 && length ) {
				return remaining;
			}

			// If this was an empty animation, synthesize a final progress notification
			if ( !length ) {
				deferred.notifyWith( elem, [ animation, 1, 0 ] );
			}

			// Resolve the animation and report its conclusion
			deferred.resolveWith( elem, [ animation ] );
			return false;
		},
		animation = deferred.promise( {
			elem: elem,
			props: jQuery.extend( {}, properties ),
			opts: jQuery.extend( true, {
				specialEasing: {},
				easing: jQuery.easing._default
			}, options ),
			originalProperties: properties,
			originalOptions: options,
			startTime: fxNow || createFxNow(),
			duration: options.duration,
			tweens: [],
			createTween: function( prop, end ) {
				var tween = jQuery.Tween( elem, animation.opts, prop, end,
						animation.opts.specialEasing[ prop ] || animation.opts.easing );
				animation.tweens.push( tween );
				return tween;
			},
			stop: function( gotoEnd ) {
				var index = 0,

					// If we are going to the end, we want to run all the tweens
					// otherwise we skip this part
					length = gotoEnd ? animation.tweens.length : 0;
				if ( stopped ) {
					return this;
				}
				stopped = true;
				for ( ; index < length; index++ ) {
					animation.tweens[ index ].run( 1 );
				}

				// Resolve when we played the last frame; otherwise, reject
				if ( gotoEnd ) {
					deferred.notifyWith( elem, [ animation, 1, 0 ] );
					deferred.resolveWith( elem, [ animation, gotoEnd ] );
				} else {
					deferred.rejectWith( elem, [ animation, gotoEnd ] );
				}
				return this;
			}
		} ),
		props = animation.props;

	propFilter( props, animation.opts.specialEasing );

	for ( ; index < length; index++ ) {
		result = Animation.prefilters[ index ].call( animation, elem, props, animation.opts );
		if ( result ) {
			if ( isFunction( result.stop ) ) {
				jQuery._queueHooks( animation.elem, animation.opts.queue ).stop =
					result.stop.bind( result );
			}
			return result;
		}
	}

	jQuery.map( props, createTween, animation );

	if ( isFunction( animation.opts.start ) ) {
		animation.opts.start.call( elem, animation );
	}

	// Attach callbacks from options
	animation
		.progress( animation.opts.progress )
		.done( animation.opts.done, animation.opts.complete )
		.fail( animation.opts.fail )
		.always( animation.opts.always );

	jQuery.fx.timer(
		jQuery.extend( tick, {
			elem: elem,
			anim: animation,
			queue: animation.opts.queue
		} )
	);

	return animation;
}

jQuery.Animation = jQuery.extend( Animation, {

	tweeners: {
		"*": [ function( prop, value ) {
			var tween = this.createTween( prop, value );
			adjustCSS( tween.elem, prop, rcssNum.exec( value ), tween );
			return tween;
		} ]
	},

	tweener: function( props, callback ) {
		if ( isFunction( props ) ) {
			callback = props;
			props = [ "*" ];
		} else {
			props = props.match( rnothtmlwhite );
		}

		var prop,
			index = 0,
			length = props.length;

		for ( ; index < length; index++ ) {
			prop = props[ index ];
			Animation.tweeners[ prop ] = Animation.tweeners[ prop ] || [];
			Animation.tweeners[ prop ].unshift( callback );
		}
	},

	prefilters: [ defaultPrefilter ],

	prefilter: function( callback, prepend ) {
		if ( prepend ) {
			Animation.prefilters.unshift( callback );
		} else {
			Animation.prefilters.push( callback );
		}
	}
} );

jQuery.speed = function( speed, easing, fn ) {
	var opt = speed && typeof speed === "object" ? jQuery.extend( {}, speed ) : {
		complete: fn || !fn && easing ||
			isFunction( speed ) && speed,
		duration: speed,
		easing: fn && easing || easing && !isFunction( easing ) && easing
	};

	// Go to the end state if fx are off
	if ( jQuery.fx.off ) {
		opt.duration = 0;

	} else {
		if ( typeof opt.duration !== "number" ) {
			if ( opt.duration in jQuery.fx.speeds ) {
				opt.duration = jQuery.fx.speeds[ opt.duration ];

			} else {
				opt.duration = jQuery.fx.speeds._default;
			}
		}
	}

	// Normalize opt.queue - true/undefined/null -> "fx"
	if ( opt.queue == null || opt.queue === true ) {
		opt.queue = "fx";
	}

	// Queueing
	opt.old = opt.complete;

	opt.complete = function() {
		if ( isFunction( opt.old ) ) {
			opt.old.call( this );
		}

		if ( opt.queue ) {
			jQuery.dequeue( this, opt.queue );
		}
	};

	return opt;
};

jQuery.fn.extend( {
	fadeTo: function( speed, to, easing, callback ) {

		// Show any hidden elements after setting opacity to 0
		return this.filter( isHiddenWithinTree ).css( "opacity", 0 ).show()

			// Animate to the value specified
			.end().animate( { opacity: to }, speed, easing, callback );
	},
	animate: function( prop, speed, easing, callback ) {
		var empty = jQuery.isEmptyObject( prop ),
			optall = jQuery.speed( speed, easing, callback ),
			doAnimation = function() {

				// Operate on a copy of prop so per-property easing won't be lost
				var anim = Animation( this, jQuery.extend( {}, prop ), optall );

				// Empty animations, or finishing resolves immediately
				if ( empty || dataPriv.get( this, "finish" ) ) {
					anim.stop( true );
				}
			};
			doAnimation.finish = doAnimation;

		return empty || optall.queue === false ?
			this.each( doAnimation ) :
			this.queue( optall.queue, doAnimation );
	},
	stop: function( type, clearQueue, gotoEnd ) {
		var stopQueue = function( hooks ) {
			var stop = hooks.stop;
			delete hooks.stop;
			stop( gotoEnd );
		};

		if ( typeof type !== "string" ) {
			gotoEnd = clearQueue;
			clearQueue = type;
			type = undefined;
		}
		if ( clearQueue && type !== false ) {
			this.queue( type || "fx", [] );
		}

		return this.each( function() {
			var dequeue = true,
				index = type != null && type + "queueHooks",
				timers = jQuery.timers,
				data = dataPriv.get( this );

			if ( index ) {
				if ( data[ index ] && data[ index ].stop ) {
					stopQueue( data[ index ] );
				}
			} else {
				for ( index in data ) {
					if ( data[ index ] && data[ index ].stop && rrun.test( index ) ) {
						stopQueue( data[ index ] );
					}
				}
			}

			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this &&
					( type == null || timers[ index ].queue === type ) ) {

					timers[ index ].anim.stop( gotoEnd );
					dequeue = false;
					timers.splice( index, 1 );
				}
			}

			// Start the next in the queue if the last step wasn't forced.
			// Timers currently will call their complete callbacks, which
			// will dequeue but only if they were gotoEnd.
			if ( dequeue || !gotoEnd ) {
				jQuery.dequeue( this, type );
			}
		} );
	},
	finish: function( type ) {
		if ( type !== false ) {
			type = type || "fx";
		}
		return this.each( function() {
			var index,
				data = dataPriv.get( this ),
				queue = data[ type + "queue" ],
				hooks = data[ type + "queueHooks" ],
				timers = jQuery.timers,
				length = queue ? queue.length : 0;

			// Enable finishing flag on private data
			data.finish = true;

			// Empty the queue first
			jQuery.queue( this, type, [] );

			if ( hooks && hooks.stop ) {
				hooks.stop.call( this, true );
			}

			// Look for any active animations, and finish them
			for ( index = timers.length; index--; ) {
				if ( timers[ index ].elem === this && timers[ index ].queue === type ) {
					timers[ index ].anim.stop( true );
					timers.splice( index, 1 );
				}
			}

			// Look for any animations in the old queue and finish them
			for ( index = 0; index < length; index++ ) {
				if ( queue[ index ] && queue[ index ].finish ) {
					queue[ index ].finish.call( this );
				}
			}

			// Turn off finishing flag
			delete data.finish;
		} );
	}
} );

jQuery.each( [ "toggle", "show", "hide" ], function( i, name ) {
	var cssFn = jQuery.fn[ name ];
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return speed == null || typeof speed === "boolean" ?
			cssFn.apply( this, arguments ) :
			this.animate( genFx( name, true ), speed, easing, callback );
	};
} );

// Generate shortcuts for custom animations
jQuery.each( {
	slideDown: genFx( "show" ),
	slideUp: genFx( "hide" ),
	slideToggle: genFx( "toggle" ),
	fadeIn: { opacity: "show" },
	fadeOut: { opacity: "hide" },
	fadeToggle: { opacity: "toggle" }
}, function( name, props ) {
	jQuery.fn[ name ] = function( speed, easing, callback ) {
		return this.animate( props, speed, easing, callback );
	};
} );

jQuery.timers = [];
jQuery.fx.tick = function() {
	var timer,
		i = 0,
		timers = jQuery.timers;

	fxNow = Date.now();

	for ( ; i < timers.length; i++ ) {
		timer = timers[ i ];

		// Run the timer and safely remove it when done (allowing for external removal)
		if ( !timer() && timers[ i ] === timer ) {
			timers.splice( i--, 1 );
		}
	}

	if ( !timers.length ) {
		jQuery.fx.stop();
	}
	fxNow = undefined;
};

jQuery.fx.timer = function( timer ) {
	jQuery.timers.push( timer );
	jQuery.fx.start();
};

jQuery.fx.interval = 13;
jQuery.fx.start = function() {
	if ( inProgress ) {
		return;
	}

	inProgress = true;
	schedule();
};

jQuery.fx.stop = function() {
	inProgress = null;
};

jQuery.fx.speeds = {
	slow: 600,
	fast: 200,

	// Default speed
	_default: 400
};


// Based off of the plugin by Clint Helfers, with permission.
// https://web.archive.org/web/20100324014747/http://blindsignals.com/index.php/2009/07/jquery-delay/
jQuery.fn.delay = function( time, type ) {
	time = jQuery.fx ? jQuery.fx.speeds[ time ] || time : time;
	type = type || "fx";

	return this.queue( type, function( next, hooks ) {
		var timeout = window.setTimeout( next, time );
		hooks.stop = function() {
			window.clearTimeout( timeout );
		};
	} );
};


( function() {
	var input = document.createElement( "input" ),
		select = document.createElement( "select" ),
		opt = select.appendChild( document.createElement( "option" ) );

	input.type = "checkbox";

	// Support: Android <=4.3 only
	// Default value for a checkbox should be "on"
	support.checkOn = input.value !== "";

	// Support: IE <=11 only
	// Must access selectedIndex to make default options select
	support.optSelected = opt.selected;

	// Support: IE <=11 only
	// An input loses its value after becoming a radio
	input = document.createElement( "input" );
	input.value = "t";
	input.type = "radio";
	support.radioValue = input.value === "t";
} )();


var boolHook,
	attrHandle = jQuery.expr.attrHandle;

jQuery.fn.extend( {
	attr: function( name, value ) {
		return access( this, jQuery.attr, name, value, arguments.length > 1 );
	},

	removeAttr: function( name ) {
		return this.each( function() {
			jQuery.removeAttr( this, name );
		} );
	}
} );

jQuery.extend( {
	attr: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set attributes on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		// Fallback to prop when attributes are not supported
		if ( typeof elem.getAttribute === "undefined" ) {
			return jQuery.prop( elem, name, value );
		}

		// Attribute hooks are determined by the lowercase version
		// Grab necessary hook if one is defined
		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {
			hooks = jQuery.attrHooks[ name.toLowerCase() ] ||
				( jQuery.expr.match.bool.test( name ) ? boolHook : undefined );
		}

		if ( value !== undefined ) {
			if ( value === null ) {
				jQuery.removeAttr( elem, name );
				return;
			}

			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			elem.setAttribute( name, value + "" );
			return value;
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		ret = jQuery.find.attr( elem, name );

		// Non-existent attributes return null, we normalize to undefined
		return ret == null ? undefined : ret;
	},

	attrHooks: {
		type: {
			set: function( elem, value ) {
				if ( !support.radioValue && value === "radio" &&
					nodeName( elem, "input" ) ) {
					var val = elem.value;
					elem.setAttribute( "type", value );
					if ( val ) {
						elem.value = val;
					}
					return value;
				}
			}
		}
	},

	removeAttr: function( elem, value ) {
		var name,
			i = 0,

			// Attribute names can contain non-HTML whitespace characters
			// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2
			attrNames = value && value.match( rnothtmlwhite );

		if ( attrNames && elem.nodeType === 1 ) {
			while ( ( name = attrNames[ i++ ] ) ) {
				elem.removeAttribute( name );
			}
		}
	}
} );

// Hooks for boolean attributes
boolHook = {
	set: function( elem, value, name ) {
		if ( value === false ) {

			// Remove boolean attributes when set to false
			jQuery.removeAttr( elem, name );
		} else {
			elem.setAttribute( name, name );
		}
		return name;
	}
};

jQuery.each( jQuery.expr.match.bool.source.match( /\w+/g ), function( i, name ) {
	var getter = attrHandle[ name ] || jQuery.find.attr;

	attrHandle[ name ] = function( elem, name, isXML ) {
		var ret, handle,
			lowercaseName = name.toLowerCase();

		if ( !isXML ) {

			// Avoid an infinite loop by temporarily removing this function from the getter
			handle = attrHandle[ lowercaseName ];
			attrHandle[ lowercaseName ] = ret;
			ret = getter( elem, name, isXML ) != null ?
				lowercaseName :
				null;
			attrHandle[ lowercaseName ] = handle;
		}
		return ret;
	};
} );




var rfocusable = /^(?:input|select|textarea|button)$/i,
	rclickable = /^(?:a|area)$/i;

jQuery.fn.extend( {
	prop: function( name, value ) {
		return access( this, jQuery.prop, name, value, arguments.length > 1 );
	},

	removeProp: function( name ) {
		return this.each( function() {
			delete this[ jQuery.propFix[ name ] || name ];
		} );
	}
} );

jQuery.extend( {
	prop: function( elem, name, value ) {
		var ret, hooks,
			nType = elem.nodeType;

		// Don't get/set properties on text, comment and attribute nodes
		if ( nType === 3 || nType === 8 || nType === 2 ) {
			return;
		}

		if ( nType !== 1 || !jQuery.isXMLDoc( elem ) ) {

			// Fix name and attach hooks
			name = jQuery.propFix[ name ] || name;
			hooks = jQuery.propHooks[ name ];
		}

		if ( value !== undefined ) {
			if ( hooks && "set" in hooks &&
				( ret = hooks.set( elem, value, name ) ) !== undefined ) {
				return ret;
			}

			return ( elem[ name ] = value );
		}

		if ( hooks && "get" in hooks && ( ret = hooks.get( elem, name ) ) !== null ) {
			return ret;
		}

		return elem[ name ];
	},

	propHooks: {
		tabIndex: {
			get: function( elem ) {

				// Support: IE <=9 - 11 only
				// elem.tabIndex doesn't always return the
				// correct value when it hasn't been explicitly set
				// https://web.archive.org/web/20141116233347/http://fluidproject.org/blog/2008/01/09/getting-setting-and-removing-tabindex-values-with-javascript/
				// Use proper attribute retrieval(#12072)
				var tabindex = jQuery.find.attr( elem, "tabindex" );

				if ( tabindex ) {
					return parseInt( tabindex, 10 );
				}

				if (
					rfocusable.test( elem.nodeName ) ||
					rclickable.test( elem.nodeName ) &&
					elem.href
				) {
					return 0;
				}

				return -1;
			}
		}
	},

	propFix: {
		"for": "htmlFor",
		"class": "className"
	}
} );

// Support: IE <=11 only
// Accessing the selectedIndex property
// forces the browser to respect setting selected
// on the option
// The getter ensures a default option is selected
// when in an optgroup
// eslint rule "no-unused-expressions" is disabled for this code
// since it considers such accessions noop
if ( !support.optSelected ) {
	jQuery.propHooks.selected = {
		get: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent && parent.parentNode ) {
				parent.parentNode.selectedIndex;
			}
			return null;
		},
		set: function( elem ) {

			/* eslint no-unused-expressions: "off" */

			var parent = elem.parentNode;
			if ( parent ) {
				parent.selectedIndex;

				if ( parent.parentNode ) {
					parent.parentNode.selectedIndex;
				}
			}
		}
	};
}

jQuery.each( [
	"tabIndex",
	"readOnly",
	"maxLength",
	"cellSpacing",
	"cellPadding",
	"rowSpan",
	"colSpan",
	"useMap",
	"frameBorder",
	"contentEditable"
], function() {
	jQuery.propFix[ this.toLowerCase() ] = this;
} );




	// Strip and collapse whitespace according to HTML spec
	// https://infra.spec.whatwg.org/#strip-and-collapse-ascii-whitespace
	function stripAndCollapse( value ) {
		var tokens = value.match( rnothtmlwhite ) || [];
		return tokens.join( " " );
	}


function getClass( elem ) {
	return elem.getAttribute && elem.getAttribute( "class" ) || "";
}

function classesToArray( value ) {
	if ( Array.isArray( value ) ) {
		return value;
	}
	if ( typeof value === "string" ) {
		return value.match( rnothtmlwhite ) || [];
	}
	return [];
}

jQuery.fn.extend( {
	addClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).addClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {
						if ( cur.indexOf( " " + clazz + " " ) < 0 ) {
							cur += clazz + " ";
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	removeClass: function( value ) {
		var classes, elem, cur, curValue, clazz, j, finalValue,
			i = 0;

		if ( isFunction( value ) ) {
			return this.each( function( j ) {
				jQuery( this ).removeClass( value.call( this, j, getClass( this ) ) );
			} );
		}

		if ( !arguments.length ) {
			return this.attr( "class", "" );
		}

		classes = classesToArray( value );

		if ( classes.length ) {
			while ( ( elem = this[ i++ ] ) ) {
				curValue = getClass( elem );

				// This expression is here for better compressibility (see addClass)
				cur = elem.nodeType === 1 && ( " " + stripAndCollapse( curValue ) + " " );

				if ( cur ) {
					j = 0;
					while ( ( clazz = classes[ j++ ] ) ) {

						// Remove *all* instances
						while ( cur.indexOf( " " + clazz + " " ) > -1 ) {
							cur = cur.replace( " " + clazz + " ", " " );
						}
					}

					// Only assign if different to avoid unneeded rendering.
					finalValue = stripAndCollapse( cur );
					if ( curValue !== finalValue ) {
						elem.setAttribute( "class", finalValue );
					}
				}
			}
		}

		return this;
	},

	toggleClass: function( value, stateVal ) {
		var type = typeof value,
			isValidValue = type === "string" || Array.isArray( value );

		if ( typeof stateVal === "boolean" && isValidValue ) {
			return stateVal ? this.addClass( value ) : this.removeClass( value );
		}

		if ( isFunction( value ) ) {
			return this.each( function( i ) {
				jQuery( this ).toggleClass(
					value.call( this, i, getClass( this ), stateVal ),
					stateVal
				);
			} );
		}

		return this.each( function() {
			var className, i, self, classNames;

			if ( isValidValue ) {

				// Toggle individual class names
				i = 0;
				self = jQuery( this );
				classNames = classesToArray( value );

				while ( ( className = classNames[ i++ ] ) ) {

					// Check each className given, space separated list
					if ( self.hasClass( className ) ) {
						self.removeClass( className );
					} else {
						self.addClass( className );
					}
				}

			// Toggle whole class name
			} else if ( value === undefined || type === "boolean" ) {
				className = getClass( this );
				if ( className ) {

					// Store className if set
					dataPriv.set( this, "__className__", className );
				}

				// If the element has a class name or if we're passed `false`,
				// then remove the whole classname (if there was one, the above saved it).
				// Otherwise bring back whatever was previously saved (if anything),
				// falling back to the empty string if nothing was stored.
				if ( this.setAttribute ) {
					this.setAttribute( "class",
						className || value === false ?
						"" :
						dataPriv.get( this, "__className__" ) || ""
					);
				}
			}
		} );
	},

	hasClass: function( selector ) {
		var className, elem,
			i = 0;

		className = " " + selector + " ";
		while ( ( elem = this[ i++ ] ) ) {
			if ( elem.nodeType === 1 &&
				( " " + stripAndCollapse( getClass( elem ) ) + " " ).indexOf( className ) > -1 ) {
					return true;
			}
		}

		return false;
	}
} );




var rreturn = /\r/g;

jQuery.fn.extend( {
	val: function( value ) {
		var hooks, ret, valueIsFunction,
			elem = this[ 0 ];

		if ( !arguments.length ) {
			if ( elem ) {
				hooks = jQuery.valHooks[ elem.type ] ||
					jQuery.valHooks[ elem.nodeName.toLowerCase() ];

				if ( hooks &&
					"get" in hooks &&
					( ret = hooks.get( elem, "value" ) ) !== undefined
				) {
					return ret;
				}

				ret = elem.value;

				// Handle most common string cases
				if ( typeof ret === "string" ) {
					return ret.replace( rreturn, "" );
				}

				// Handle cases where value is null/undef or number
				return ret == null ? "" : ret;
			}

			return;
		}

		valueIsFunction = isFunction( value );

		return this.each( function( i ) {
			var val;

			if ( this.nodeType !== 1 ) {
				return;
			}

			if ( valueIsFunction ) {
				val = value.call( this, i, jQuery( this ).val() );
			} else {
				val = value;
			}

			// Treat null/undefined as ""; convert numbers to string
			if ( val == null ) {
				val = "";

			} else if ( typeof val === "number" ) {
				val += "";

			} else if ( Array.isArray( val ) ) {
				val = jQuery.map( val, function( value ) {
					return value == null ? "" : value + "";
				} );
			}

			hooks = jQuery.valHooks[ this.type ] || jQuery.valHooks[ this.nodeName.toLowerCase() ];

			// If set returns undefined, fall back to normal setting
			if ( !hooks || !( "set" in hooks ) || hooks.set( this, val, "value" ) === undefined ) {
				this.value = val;
			}
		} );
	}
} );

jQuery.extend( {
	valHooks: {
		option: {
			get: function( elem ) {

				var val = jQuery.find.attr( elem, "value" );
				return val != null ?
					val :

					// Support: IE <=10 - 11 only
					// option.text throws exceptions (#14686, #14858)
					// Strip and collapse whitespace
					// https://html.spec.whatwg.org/#strip-and-collapse-whitespace
					stripAndCollapse( jQuery.text( elem ) );
			}
		},
		select: {
			get: function( elem ) {
				var value, option, i,
					options = elem.options,
					index = elem.selectedIndex,
					one = elem.type === "select-one",
					values = one ? null : [],
					max = one ? index + 1 : options.length;

				if ( index < 0 ) {
					i = max;

				} else {
					i = one ? index : 0;
				}

				// Loop through all the selected options
				for ( ; i < max; i++ ) {
					option = options[ i ];

					// Support: IE <=9 only
					// IE8-9 doesn't update selected after form reset (#2551)
					if ( ( option.selected || i === index ) &&

							// Don't return options that are disabled or in a disabled optgroup
							!option.disabled &&
							( !option.parentNode.disabled ||
								!nodeName( option.parentNode, "optgroup" ) ) ) {

						// Get the specific value for the option
						value = jQuery( option ).val();

						// We don't need an array for one selects
						if ( one ) {
							return value;
						}

						// Multi-Selects return an array
						values.push( value );
					}
				}

				return values;
			},

			set: function( elem, value ) {
				var optionSet, option,
					options = elem.options,
					values = jQuery.makeArray( value ),
					i = options.length;

				while ( i-- ) {
					option = options[ i ];

					/* eslint-disable no-cond-assign */

					if ( option.selected =
						jQuery.inArray( jQuery.valHooks.option.get( option ), values ) > -1
					) {
						optionSet = true;
					}

					/* eslint-enable no-cond-assign */
				}

				// Force browsers to behave consistently when non-matching value is set
				if ( !optionSet ) {
					elem.selectedIndex = -1;
				}
				return values;
			}
		}
	}
} );

// Radios and checkboxes getter/setter
jQuery.each( [ "radio", "checkbox" ], function() {
	jQuery.valHooks[ this ] = {
		set: function( elem, value ) {
			if ( Array.isArray( value ) ) {
				return ( elem.checked = jQuery.inArray( jQuery( elem ).val(), value ) > -1 );
			}
		}
	};
	if ( !support.checkOn ) {
		jQuery.valHooks[ this ].get = function( elem ) {
			return elem.getAttribute( "value" ) === null ? "on" : elem.value;
		};
	}
} );




// Return jQuery for attributes-only inclusion


support.focusin = "onfocusin" in window;


var rfocusMorph = /^(?:focusinfocus|focusoutblur)$/,
	stopPropagationCallback = function( e ) {
		e.stopPropagation();
	};

jQuery.extend( jQuery.event, {

	trigger: function( event, data, elem, onlyHandlers ) {

		var i, cur, tmp, bubbleType, ontype, handle, special, lastElement,
			eventPath = [ elem || document ],
			type = hasOwn.call( event, "type" ) ? event.type : event,
			namespaces = hasOwn.call( event, "namespace" ) ? event.namespace.split( "." ) : [];

		cur = lastElement = tmp = elem = elem || document;

		// Don't do events on text and comment nodes
		if ( elem.nodeType === 3 || elem.nodeType === 8 ) {
			return;
		}

		// focus/blur morphs to focusin/out; ensure we're not firing them right now
		if ( rfocusMorph.test( type + jQuery.event.triggered ) ) {
			return;
		}

		if ( type.indexOf( "." ) > -1 ) {

			// Namespaced trigger; create a regexp to match event type in handle()
			namespaces = type.split( "." );
			type = namespaces.shift();
			namespaces.sort();
		}
		ontype = type.indexOf( ":" ) < 0 && "on" + type;

		// Caller can pass in a jQuery.Event object, Object, or just an event type string
		event = event[ jQuery.expando ] ?
			event :
			new jQuery.Event( type, typeof event === "object" && event );

		// Trigger bitmask: & 1 for native handlers; & 2 for jQuery (always true)
		event.isTrigger = onlyHandlers ? 2 : 3;
		event.namespace = namespaces.join( "." );
		event.rnamespace = event.namespace ?
			new RegExp( "(^|\\.)" + namespaces.join( "\\.(?:.*\\.|)" ) + "(\\.|$)" ) :
			null;

		// Clean up the event in case it is being reused
		event.result = undefined;
		if ( !event.target ) {
			event.target = elem;
		}

		// Clone any incoming data and prepend the event, creating the handler arg list
		data = data == null ?
			[ event ] :
			jQuery.makeArray( data, [ event ] );

		// Allow special events to draw outside the lines
		special = jQuery.event.special[ type ] || {};
		if ( !onlyHandlers && special.trigger && special.trigger.apply( elem, data ) === false ) {
			return;
		}

		// Determine event propagation path in advance, per W3C events spec (#9951)
		// Bubble up to document, then to window; watch for a global ownerDocument var (#9724)
		if ( !onlyHandlers && !special.noBubble && !isWindow( elem ) ) {

			bubbleType = special.delegateType || type;
			if ( !rfocusMorph.test( bubbleType + type ) ) {
				cur = cur.parentNode;
			}
			for ( ; cur; cur = cur.parentNode ) {
				eventPath.push( cur );
				tmp = cur;
			}

			// Only add window if we got to document (e.g., not plain obj or detached DOM)
			if ( tmp === ( elem.ownerDocument || document ) ) {
				eventPath.push( tmp.defaultView || tmp.parentWindow || window );
			}
		}

		// Fire handlers on the event path
		i = 0;
		while ( ( cur = eventPath[ i++ ] ) && !event.isPropagationStopped() ) {
			lastElement = cur;
			event.type = i > 1 ?
				bubbleType :
				special.bindType || type;

			// jQuery handler
			handle = ( dataPriv.get( cur, "events" ) || {} )[ event.type ] &&
				dataPriv.get( cur, "handle" );
			if ( handle ) {
				handle.apply( cur, data );
			}

			// Native handler
			handle = ontype && cur[ ontype ];
			if ( handle && handle.apply && acceptData( cur ) ) {
				event.result = handle.apply( cur, data );
				if ( event.result === false ) {
					event.preventDefault();
				}
			}
		}
		event.type = type;

		// If nobody prevented the default action, do it now
		if ( !onlyHandlers && !event.isDefaultPrevented() ) {

			if ( ( !special._default ||
				special._default.apply( eventPath.pop(), data ) === false ) &&
				acceptData( elem ) ) {

				// Call a native DOM method on the target with the same name as the event.
				// Don't do default actions on window, that's where global variables be (#6170)
				if ( ontype && isFunction( elem[ type ] ) && !isWindow( elem ) ) {

					// Don't re-trigger an onFOO event when we call its FOO() method
					tmp = elem[ ontype ];

					if ( tmp ) {
						elem[ ontype ] = null;
					}

					// Prevent re-triggering of the same event, since we already bubbled it above
					jQuery.event.triggered = type;

					if ( event.isPropagationStopped() ) {
						lastElement.addEventListener( type, stopPropagationCallback );
					}

					elem[ type ]();

					if ( event.isPropagationStopped() ) {
						lastElement.removeEventListener( type, stopPropagationCallback );
					}

					jQuery.event.triggered = undefined;

					if ( tmp ) {
						elem[ ontype ] = tmp;
					}
				}
			}
		}

		return event.result;
	},

	// Piggyback on a donor event to simulate a different one
	// Used only for `focus(in | out)` events
	simulate: function( type, elem, event ) {
		var e = jQuery.extend(
			new jQuery.Event(),
			event,
			{
				type: type,
				isSimulated: true
			}
		);

		jQuery.event.trigger( e, null, elem );
	}

} );

jQuery.fn.extend( {

	trigger: function( type, data ) {
		return this.each( function() {
			jQuery.event.trigger( type, data, this );
		} );
	},
	triggerHandler: function( type, data ) {
		var elem = this[ 0 ];
		if ( elem ) {
			return jQuery.event.trigger( type, data, elem, true );
		}
	}
} );


// Support: Firefox <=44
// Firefox doesn't have focus(in | out) events
// Related ticket - https://bugzilla.mozilla.org/show_bug.cgi?id=687787
//
// Support: Chrome <=48 - 49, Safari <=9.0 - 9.1
// focus(in | out) events fire after focus & blur events,
// which is spec violation - http://www.w3.org/TR/DOM-Level-3-Events/#events-focusevent-event-order
// Related ticket - https://bugs.chromium.org/p/chromium/issues/detail?id=449857
if ( !support.focusin ) {
	jQuery.each( { focus: "focusin", blur: "focusout" }, function( orig, fix ) {

		// Attach a single capturing handler on the document while someone wants focusin/focusout
		var handler = function( event ) {
			jQuery.event.simulate( fix, event.target, jQuery.event.fix( event ) );
		};

		jQuery.event.special[ fix ] = {
			setup: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix );

				if ( !attaches ) {
					doc.addEventListener( orig, handler, true );
				}
				dataPriv.access( doc, fix, ( attaches || 0 ) + 1 );
			},
			teardown: function() {
				var doc = this.ownerDocument || this,
					attaches = dataPriv.access( doc, fix ) - 1;

				if ( !attaches ) {
					doc.removeEventListener( orig, handler, true );
					dataPriv.remove( doc, fix );

				} else {
					dataPriv.access( doc, fix, attaches );
				}
			}
		};
	} );
}
var location = window.location;

var nonce = Date.now();

var rquery = ( /\?/ );



// Cross-browser xml parsing
jQuery.parseXML = function( data ) {
	var xml;
	if ( !data || typeof data !== "string" ) {
		return null;
	}

	// Support: IE 9 - 11 only
	// IE throws on parseFromString with invalid input.
	try {
		xml = ( new window.DOMParser() ).parseFromString( data, "text/xml" );
	} catch ( e ) {
		xml = undefined;
	}

	if ( !xml || xml.getElementsByTagName( "parsererror" ).length ) {
		jQuery.error( "Invalid XML: " + data );
	}
	return xml;
};


var
	rbracket = /\[\]$/,
	rCRLF = /\r?\n/g,
	rsubmitterTypes = /^(?:submit|button|image|reset|file)$/i,
	rsubmittable = /^(?:input|select|textarea|keygen)/i;

function buildParams( prefix, obj, traditional, add ) {
	var name;

	if ( Array.isArray( obj ) ) {

		// Serialize array item.
		jQuery.each( obj, function( i, v ) {
			if ( traditional || rbracket.test( prefix ) ) {

				// Treat each array item as a scalar.
				add( prefix, v );

			} else {

				// Item is non-scalar (array or object), encode its numeric index.
				buildParams(
					prefix + "[" + ( typeof v === "object" && v != null ? i : "" ) + "]",
					v,
					traditional,
					add
				);
			}
		} );

	} else if ( !traditional && toType( obj ) === "object" ) {

		// Serialize object item.
		for ( name in obj ) {
			buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
		}

	} else {

		// Serialize scalar item.
		add( prefix, obj );
	}
}

// Serialize an array of form elements or a set of
// key/values into a query string
jQuery.param = function( a, traditional ) {
	var prefix,
		s = [],
		add = function( key, valueOrFunction ) {

			// If value is a function, invoke it and use its return value
			var value = isFunction( valueOrFunction ) ?
				valueOrFunction() :
				valueOrFunction;

			s[ s.length ] = encodeURIComponent( key ) + "=" +
				encodeURIComponent( value == null ? "" : value );
		};

	if ( a == null ) {
		return "";
	}

	// If an array was passed in, assume that it is an array of form elements.
	if ( Array.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {

		// Serialize the form elements
		jQuery.each( a, function() {
			add( this.name, this.value );
		} );

	} else {

		// If traditional, encode the "old" way (the way 1.3.2 or older
		// did it), otherwise encode params recursively.
		for ( prefix in a ) {
			buildParams( prefix, a[ prefix ], traditional, add );
		}
	}

	// Return the resulting serialization
	return s.join( "&" );
};

jQuery.fn.extend( {
	serialize: function() {
		return jQuery.param( this.serializeArray() );
	},
	serializeArray: function() {
		return this.map( function() {

			// Can add propHook for "elements" to filter or add form elements
			var elements = jQuery.prop( this, "elements" );
			return elements ? jQuery.makeArray( elements ) : this;
		} )
		.filter( function() {
			var type = this.type;

			// Use .is( ":disabled" ) so that fieldset[disabled] works
			return this.name && !jQuery( this ).is( ":disabled" ) &&
				rsubmittable.test( this.nodeName ) && !rsubmitterTypes.test( type ) &&
				( this.checked || !rcheckableType.test( type ) );
		} )
		.map( function( i, elem ) {
			var val = jQuery( this ).val();

			if ( val == null ) {
				return null;
			}

			if ( Array.isArray( val ) ) {
				return jQuery.map( val, function( val ) {
					return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
				} );
			}

			return { name: elem.name, value: val.replace( rCRLF, "\r\n" ) };
		} ).get();
	}
} );


var
	r20 = /%20/g,
	rhash = /#.*$/,
	rantiCache = /([?&])_=[^&]*/,
	rheaders = /^(.*?):[ \t]*([^\r\n]*)$/mg,

	// #7653, #8125, #8152: local protocol detection
	rlocalProtocol = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
	rnoContent = /^(?:GET|HEAD)$/,
	rprotocol = /^\/\//,

	/* Prefilters
	 * 1) They are useful to introduce custom dataTypes (see ajax/jsonp.js for an example)
	 * 2) These are called:
	 *    - BEFORE asking for a transport
	 *    - AFTER param serialization (s.data is a string if s.processData is true)
	 * 3) key is the dataType
	 * 4) the catchall symbol "*" can be used
	 * 5) execution will start with transport dataType and THEN continue down to "*" if needed
	 */
	prefilters = {},

	/* Transports bindings
	 * 1) key is the dataType
	 * 2) the catchall symbol "*" can be used
	 * 3) selection will start with transport dataType and THEN go to "*" if needed
	 */
	transports = {},

	// Avoid comment-prolog char sequence (#10098); must appease lint and evade compression
	allTypes = "*/".concat( "*" ),

	// Anchor tag for parsing the document origin
	originAnchor = document.createElement( "a" );
	originAnchor.href = location.href;

// Base "constructor" for jQuery.ajaxPrefilter and jQuery.ajaxTransport
function addToPrefiltersOrTransports( structure ) {

	// dataTypeExpression is optional and defaults to "*"
	return function( dataTypeExpression, func ) {

		if ( typeof dataTypeExpression !== "string" ) {
			func = dataTypeExpression;
			dataTypeExpression = "*";
		}

		var dataType,
			i = 0,
			dataTypes = dataTypeExpression.toLowerCase().match( rnothtmlwhite ) || [];

		if ( isFunction( func ) ) {

			// For each dataType in the dataTypeExpression
			while ( ( dataType = dataTypes[ i++ ] ) ) {

				// Prepend if requested
				if ( dataType[ 0 ] === "+" ) {
					dataType = dataType.slice( 1 ) || "*";
					( structure[ dataType ] = structure[ dataType ] || [] ).unshift( func );

				// Otherwise append
				} else {
					( structure[ dataType ] = structure[ dataType ] || [] ).push( func );
				}
			}
		}
	};
}

// Base inspection function for prefilters and transports
function inspectPrefiltersOrTransports( structure, options, originalOptions, jqXHR ) {

	var inspected = {},
		seekingTransport = ( structure === transports );

	function inspect( dataType ) {
		var selected;
		inspected[ dataType ] = true;
		jQuery.each( structure[ dataType ] || [], function( _, prefilterOrFactory ) {
			var dataTypeOrTransport = prefilterOrFactory( options, originalOptions, jqXHR );
			if ( typeof dataTypeOrTransport === "string" &&
				!seekingTransport && !inspected[ dataTypeOrTransport ] ) {

				options.dataTypes.unshift( dataTypeOrTransport );
				inspect( dataTypeOrTransport );
				return false;
			} else if ( seekingTransport ) {
				return !( selected = dataTypeOrTransport );
			}
		} );
		return selected;
	}

	return inspect( options.dataTypes[ 0 ] ) || !inspected[ "*" ] && inspect( "*" );
}

// A special extend for ajax options
// that takes "flat" options (not to be deep extended)
// Fixes #9887
function ajaxExtend( target, src ) {
	var key, deep,
		flatOptions = jQuery.ajaxSettings.flatOptions || {};

	for ( key in src ) {
		if ( src[ key ] !== undefined ) {
			( flatOptions[ key ] ? target : ( deep || ( deep = {} ) ) )[ key ] = src[ key ];
		}
	}
	if ( deep ) {
		jQuery.extend( true, target, deep );
	}

	return target;
}

/* Handles responses to an ajax request:
 * - finds the right dataType (mediates between content-type and expected dataType)
 * - returns the corresponding response
 */
function ajaxHandleResponses( s, jqXHR, responses ) {

	var ct, type, finalDataType, firstDataType,
		contents = s.contents,
		dataTypes = s.dataTypes;

	// Remove auto dataType and get content-type in the process
	while ( dataTypes[ 0 ] === "*" ) {
		dataTypes.shift();
		if ( ct === undefined ) {
			ct = s.mimeType || jqXHR.getResponseHeader( "Content-Type" );
		}
	}

	// Check if we're dealing with a known content-type
	if ( ct ) {
		for ( type in contents ) {
			if ( contents[ type ] && contents[ type ].test( ct ) ) {
				dataTypes.unshift( type );
				break;
			}
		}
	}

	// Check to see if we have a response for the expected dataType
	if ( dataTypes[ 0 ] in responses ) {
		finalDataType = dataTypes[ 0 ];
	} else {

		// Try convertible dataTypes
		for ( type in responses ) {
			if ( !dataTypes[ 0 ] || s.converters[ type + " " + dataTypes[ 0 ] ] ) {
				finalDataType = type;
				break;
			}
			if ( !firstDataType ) {
				firstDataType = type;
			}
		}

		// Or just use first one
		finalDataType = finalDataType || firstDataType;
	}

	// If we found a dataType
	// We add the dataType to the list if needed
	// and return the corresponding response
	if ( finalDataType ) {
		if ( finalDataType !== dataTypes[ 0 ] ) {
			dataTypes.unshift( finalDataType );
		}
		return responses[ finalDataType ];
	}
}

/* Chain conversions given the request and the original response
 * Also sets the responseXXX fields on the jqXHR instance
 */
function ajaxConvert( s, response, jqXHR, isSuccess ) {
	var conv2, current, conv, tmp, prev,
		converters = {},

		// Work with a copy of dataTypes in case we need to modify it for conversion
		dataTypes = s.dataTypes.slice();

	// Create converters map with lowercased keys
	if ( dataTypes[ 1 ] ) {
		for ( conv in s.converters ) {
			converters[ conv.toLowerCase() ] = s.converters[ conv ];
		}
	}

	current = dataTypes.shift();

	// Convert to each sequential dataType
	while ( current ) {

		if ( s.responseFields[ current ] ) {
			jqXHR[ s.responseFields[ current ] ] = response;
		}

		// Apply the dataFilter if provided
		if ( !prev && isSuccess && s.dataFilter ) {
			response = s.dataFilter( response, s.dataType );
		}

		prev = current;
		current = dataTypes.shift();

		if ( current ) {

			// There's only work to do if current dataType is non-auto
			if ( current === "*" ) {

				current = prev;

			// Convert response if prev dataType is non-auto and differs from current
			} else if ( prev !== "*" && prev !== current ) {

				// Seek a direct converter
				conv = converters[ prev + " " + current ] || converters[ "* " + current ];

				// If none found, seek a pair
				if ( !conv ) {
					for ( conv2 in converters ) {

						// If conv2 outputs current
						tmp = conv2.split( " " );
						if ( tmp[ 1 ] === current ) {

							// If prev can be converted to accepted input
							conv = converters[ prev + " " + tmp[ 0 ] ] ||
								converters[ "* " + tmp[ 0 ] ];
							if ( conv ) {

								// Condense equivalence converters
								if ( conv === true ) {
									conv = converters[ conv2 ];

								// Otherwise, insert the intermediate dataType
								} else if ( converters[ conv2 ] !== true ) {
									current = tmp[ 0 ];
									dataTypes.unshift( tmp[ 1 ] );
								}
								break;
							}
						}
					}
				}

				// Apply converter (if not an equivalence)
				if ( conv !== true ) {

					// Unless errors are allowed to bubble, catch and return them
					if ( conv && s.throws ) {
						response = conv( response );
					} else {
						try {
							response = conv( response );
						} catch ( e ) {
							return {
								state: "parsererror",
								error: conv ? e : "No conversion from " + prev + " to " + current
							};
						}
					}
				}
			}
		}
	}

	return { state: "success", data: response };
}

jQuery.extend( {

	// Counter for holding the number of active queries
	active: 0,

	// Last-Modified header cache for next request
	lastModified: {},
	etag: {},

	ajaxSettings: {
		url: location.href,
		type: "GET",
		isLocal: rlocalProtocol.test( location.protocol ),
		global: true,
		processData: true,
		async: true,
		contentType: "application/x-www-form-urlencoded; charset=UTF-8",

		/*
		timeout: 0,
		data: null,
		dataType: null,
		username: null,
		password: null,
		cache: null,
		throws: false,
		traditional: false,
		headers: {},
		*/

		accepts: {
			"*": allTypes,
			text: "text/plain",
			html: "text/html",
			xml: "application/xml, text/xml",
			json: "application/json, text/javascript"
		},

		contents: {
			xml: /\bxml\b/,
			html: /\bhtml/,
			json: /\bjson\b/
		},

		responseFields: {
			xml: "responseXML",
			text: "responseText",
			json: "responseJSON"
		},

		// Data converters
		// Keys separate source (or catchall "*") and destination types with a single space
		converters: {

			// Convert anything to text
			"* text": String,

			// Text to html (true = no transformation)
			"text html": true,

			// Evaluate text as a json expression
			"text json": JSON.parse,

			// Parse text as xml
			"text xml": jQuery.parseXML
		},

		// For options that shouldn't be deep extended:
		// you can add your own custom options here if
		// and when you create one that shouldn't be
		// deep extended (see ajaxExtend)
		flatOptions: {
			url: true,
			context: true
		}
	},

	// Creates a full fledged settings object into target
	// with both ajaxSettings and settings fields.
	// If target is omitted, writes into ajaxSettings.
	ajaxSetup: function( target, settings ) {
		return settings ?

			// Building a settings object
			ajaxExtend( ajaxExtend( target, jQuery.ajaxSettings ), settings ) :

			// Extending ajaxSettings
			ajaxExtend( jQuery.ajaxSettings, target );
	},

	ajaxPrefilter: addToPrefiltersOrTransports( prefilters ),
	ajaxTransport: addToPrefiltersOrTransports( transports ),

	// Main method
	ajax: function( url, options ) {

		// If url is an object, simulate pre-1.5 signature
		if ( typeof url === "object" ) {
			options = url;
			url = undefined;
		}

		// Force options to be an object
		options = options || {};

		var transport,

			// URL without anti-cache param
			cacheURL,

			// Response headers
			responseHeadersString,
			responseHeaders,

			// timeout handle
			timeoutTimer,

			// Url cleanup var
			urlAnchor,

			// Request state (becomes false upon send and true upon completion)
			completed,

			// To know if global events are to be dispatched
			fireGlobals,

			// Loop variable
			i,

			// uncached part of the url
			uncached,

			// Create the final options object
			s = jQuery.ajaxSetup( {}, options ),

			// Callbacks context
			callbackContext = s.context || s,

			// Context for global events is callbackContext if it is a DOM node or jQuery collection
			globalEventContext = s.context &&
				( callbackContext.nodeType || callbackContext.jquery ) ?
					jQuery( callbackContext ) :
					jQuery.event,

			// Deferreds
			deferred = jQuery.Deferred(),
			completeDeferred = jQuery.Callbacks( "once memory" ),

			// Status-dependent callbacks
			statusCode = s.statusCode || {},

			// Headers (they are sent all at once)
			requestHeaders = {},
			requestHeadersNames = {},

			// Default abort message
			strAbort = "canceled",

			// Fake xhr
			jqXHR = {
				readyState: 0,

				// Builds headers hashtable if needed
				getResponseHeader: function( key ) {
					var match;
					if ( completed ) {
						if ( !responseHeaders ) {
							responseHeaders = {};
							while ( ( match = rheaders.exec( responseHeadersString ) ) ) {
								responseHeaders[ match[ 1 ].toLowerCase() + " " ] =
									( responseHeaders[ match[ 1 ].toLowerCase() + " " ] || [] )
										.concat( match[ 2 ] );
							}
						}
						match = responseHeaders[ key.toLowerCase() + " " ];
					}
					return match == null ? null : match.join( ", " );
				},

				// Raw string
				getAllResponseHeaders: function() {
					return completed ? responseHeadersString : null;
				},

				// Caches the header
				setRequestHeader: function( name, value ) {
					if ( completed == null ) {
						name = requestHeadersNames[ name.toLowerCase() ] =
							requestHeadersNames[ name.toLowerCase() ] || name;
						requestHeaders[ name ] = value;
					}
					return this;
				},

				// Overrides response content-type header
				overrideMimeType: function( type ) {
					if ( completed == null ) {
						s.mimeType = type;
					}
					return this;
				},

				// Status-dependent callbacks
				statusCode: function( map ) {
					var code;
					if ( map ) {
						if ( completed ) {

							// Execute the appropriate callbacks
							jqXHR.always( map[ jqXHR.status ] );
						} else {

							// Lazy-add the new callbacks in a way that preserves old ones
							for ( code in map ) {
								statusCode[ code ] = [ statusCode[ code ], map[ code ] ];
							}
						}
					}
					return this;
				},

				// Cancel the request
				abort: function( statusText ) {
					var finalText = statusText || strAbort;
					if ( transport ) {
						transport.abort( finalText );
					}
					done( 0, finalText );
					return this;
				}
			};

		// Attach deferreds
		deferred.promise( jqXHR );

		// Add protocol if not provided (prefilters might expect it)
		// Handle falsy url in the settings object (#10093: consistency with old signature)
		// We also use the url parameter if available
		s.url = ( ( url || s.url || location.href ) + "" )
			.replace( rprotocol, location.protocol + "//" );

		// Alias method option to type as per ticket #12004
		s.type = options.method || options.type || s.method || s.type;

		// Extract dataTypes list
		s.dataTypes = ( s.dataType || "*" ).toLowerCase().match( rnothtmlwhite ) || [ "" ];

		// A cross-domain request is in order when the origin doesn't match the current origin.
		if ( s.crossDomain == null ) {
			urlAnchor = document.createElement( "a" );

			// Support: IE <=8 - 11, Edge 12 - 15
			// IE throws exception on accessing the href property if url is malformed,
			// e.g. http://example.com:80x/
			try {
				urlAnchor.href = s.url;

				// Support: IE <=8 - 11 only
				// Anchor's host property isn't correctly set when s.url is relative
				urlAnchor.href = urlAnchor.href;
				s.crossDomain = originAnchor.protocol + "//" + originAnchor.host !==
					urlAnchor.protocol + "//" + urlAnchor.host;
			} catch ( e ) {

				// If there is an error parsing the URL, assume it is crossDomain,
				// it can be rejected by the transport if it is invalid
				s.crossDomain = true;
			}
		}

		// Convert data if not already a string
		if ( s.data && s.processData && typeof s.data !== "string" ) {
			s.data = jQuery.param( s.data, s.traditional );
		}

		// Apply prefilters
		inspectPrefiltersOrTransports( prefilters, s, options, jqXHR );

		// If request was aborted inside a prefilter, stop there
		if ( completed ) {
			return jqXHR;
		}

		// We can fire global events as of now if asked to
		// Don't fire events if jQuery.event is undefined in an AMD-usage scenario (#15118)
		fireGlobals = jQuery.event && s.global;

		// Watch for a new set of requests
		if ( fireGlobals && jQuery.active++ === 0 ) {
			jQuery.event.trigger( "ajaxStart" );
		}

		// Uppercase the type
		s.type = s.type.toUpperCase();

		// Determine if request has content
		s.hasContent = !rnoContent.test( s.type );

		// Save the URL in case we're toying with the If-Modified-Since
		// and/or If-None-Match header later on
		// Remove hash to simplify url manipulation
		cacheURL = s.url.replace( rhash, "" );

		// More options handling for requests with no content
		if ( !s.hasContent ) {

			// Remember the hash so we can put it back
			uncached = s.url.slice( cacheURL.length );

			// If data is available and should be processed, append data to url
			if ( s.data && ( s.processData || typeof s.data === "string" ) ) {
				cacheURL += ( rquery.test( cacheURL ) ? "&" : "?" ) + s.data;

				// #9682: remove data so that it's not used in an eventual retry
				delete s.data;
			}

			// Add or update anti-cache param if needed
			if ( s.cache === false ) {
				cacheURL = cacheURL.replace( rantiCache, "$1" );
				uncached = ( rquery.test( cacheURL ) ? "&" : "?" ) + "_=" + ( nonce++ ) + uncached;
			}

			// Put hash and anti-cache on the URL that will be requested (gh-1732)
			s.url = cacheURL + uncached;

		// Change '%20' to '+' if this is encoded form body content (gh-2658)
		} else if ( s.data && s.processData &&
			( s.contentType || "" ).indexOf( "application/x-www-form-urlencoded" ) === 0 ) {
			s.data = s.data.replace( r20, "+" );
		}

		// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
		if ( s.ifModified ) {
			if ( jQuery.lastModified[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-Modified-Since", jQuery.lastModified[ cacheURL ] );
			}
			if ( jQuery.etag[ cacheURL ] ) {
				jqXHR.setRequestHeader( "If-None-Match", jQuery.etag[ cacheURL ] );
			}
		}

		// Set the correct header, if data is being sent
		if ( s.data && s.hasContent && s.contentType !== false || options.contentType ) {
			jqXHR.setRequestHeader( "Content-Type", s.contentType );
		}

		// Set the Accepts header for the server, depending on the dataType
		jqXHR.setRequestHeader(
			"Accept",
			s.dataTypes[ 0 ] && s.accepts[ s.dataTypes[ 0 ] ] ?
				s.accepts[ s.dataTypes[ 0 ] ] +
					( s.dataTypes[ 0 ] !== "*" ? ", " + allTypes + "; q=0.01" : "" ) :
				s.accepts[ "*" ]
		);

		// Check for headers option
		for ( i in s.headers ) {
			jqXHR.setRequestHeader( i, s.headers[ i ] );
		}

		// Allow custom headers/mimetypes and early abort
		if ( s.beforeSend &&
			( s.beforeSend.call( callbackContext, jqXHR, s ) === false || completed ) ) {

			// Abort if not done already and return
			return jqXHR.abort();
		}

		// Aborting is no longer a cancellation
		strAbort = "abort";

		// Install callbacks on deferreds
		completeDeferred.add( s.complete );
		jqXHR.done( s.success );
		jqXHR.fail( s.error );

		// Get transport
		transport = inspectPrefiltersOrTransports( transports, s, options, jqXHR );

		// If no transport, we auto-abort
		if ( !transport ) {
			done( -1, "No Transport" );
		} else {
			jqXHR.readyState = 1;

			// Send global event
			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxSend", [ jqXHR, s ] );
			}

			// If request was aborted inside ajaxSend, stop there
			if ( completed ) {
				return jqXHR;
			}

			// Timeout
			if ( s.async && s.timeout > 0 ) {
				timeoutTimer = window.setTimeout( function() {
					jqXHR.abort( "timeout" );
				}, s.timeout );
			}

			try {
				completed = false;
				transport.send( requestHeaders, done );
			} catch ( e ) {

				// Rethrow post-completion exceptions
				if ( completed ) {
					throw e;
				}

				// Propagate others as results
				done( -1, e );
			}
		}

		// Callback for when everything is done
		function done( status, nativeStatusText, responses, headers ) {
			var isSuccess, success, error, response, modified,
				statusText = nativeStatusText;

			// Ignore repeat invocations
			if ( completed ) {
				return;
			}

			completed = true;

			// Clear timeout if it exists
			if ( timeoutTimer ) {
				window.clearTimeout( timeoutTimer );
			}

			// Dereference transport for early garbage collection
			// (no matter how long the jqXHR object will be used)
			transport = undefined;

			// Cache response headers
			responseHeadersString = headers || "";

			// Set readyState
			jqXHR.readyState = status > 0 ? 4 : 0;

			// Determine if successful
			isSuccess = status >= 200 && status < 300 || status === 304;

			// Get response data
			if ( responses ) {
				response = ajaxHandleResponses( s, jqXHR, responses );
			}

			// Convert no matter what (that way responseXXX fields are always set)
			response = ajaxConvert( s, response, jqXHR, isSuccess );

			// If successful, handle type chaining
			if ( isSuccess ) {

				// Set the If-Modified-Since and/or If-None-Match header, if in ifModified mode.
				if ( s.ifModified ) {
					modified = jqXHR.getResponseHeader( "Last-Modified" );
					if ( modified ) {
						jQuery.lastModified[ cacheURL ] = modified;
					}
					modified = jqXHR.getResponseHeader( "etag" );
					if ( modified ) {
						jQuery.etag[ cacheURL ] = modified;
					}
				}

				// if no content
				if ( status === 204 || s.type === "HEAD" ) {
					statusText = "nocontent";

				// if not modified
				} else if ( status === 304 ) {
					statusText = "notmodified";

				// If we have data, let's convert it
				} else {
					statusText = response.state;
					success = response.data;
					error = response.error;
					isSuccess = !error;
				}
			} else {

				// Extract error from statusText and normalize for non-aborts
				error = statusText;
				if ( status || !statusText ) {
					statusText = "error";
					if ( status < 0 ) {
						status = 0;
					}
				}
			}

			// Set data for the fake xhr object
			jqXHR.status = status;
			jqXHR.statusText = ( nativeStatusText || statusText ) + "";

			// Success/Error
			if ( isSuccess ) {
				deferred.resolveWith( callbackContext, [ success, statusText, jqXHR ] );
			} else {
				deferred.rejectWith( callbackContext, [ jqXHR, statusText, error ] );
			}

			// Status-dependent callbacks
			jqXHR.statusCode( statusCode );
			statusCode = undefined;

			if ( fireGlobals ) {
				globalEventContext.trigger( isSuccess ? "ajaxSuccess" : "ajaxError",
					[ jqXHR, s, isSuccess ? success : error ] );
			}

			// Complete
			completeDeferred.fireWith( callbackContext, [ jqXHR, statusText ] );

			if ( fireGlobals ) {
				globalEventContext.trigger( "ajaxComplete", [ jqXHR, s ] );

				// Handle the global AJAX counter
				if ( !( --jQuery.active ) ) {
					jQuery.event.trigger( "ajaxStop" );
				}
			}
		}

		return jqXHR;
	},

	getJSON: function( url, data, callback ) {
		return jQuery.get( url, data, callback, "json" );
	},

	getScript: function( url, callback ) {
		return jQuery.get( url, undefined, callback, "script" );
	}
} );

jQuery.each( [ "get", "post" ], function( i, method ) {
	jQuery[ method ] = function( url, data, callback, type ) {

		// Shift arguments if data argument was omitted
		if ( isFunction( data ) ) {
			type = type || callback;
			callback = data;
			data = undefined;
		}

		// The url can be an options object (which then must have .url)
		return jQuery.ajax( jQuery.extend( {
			url: url,
			type: method,
			dataType: type,
			data: data,
			success: callback
		}, jQuery.isPlainObject( url ) && url ) );
	};
} );


jQuery._evalUrl = function( url, options ) {
	return jQuery.ajax( {
		url: url,

		// Make this explicit, since user can override this through ajaxSetup (#11264)
		type: "GET",
		dataType: "script",
		cache: true,
		async: false,
		global: false,

		// Only evaluate the response if it is successful (gh-4126)
		// dataFilter is not invoked for failure responses, so using it instead
		// of the default converter is kludgy but it works.
		converters: {
			"text script": function() {}
		},
		dataFilter: function( response ) {
			jQuery.globalEval( response, options );
		}
	} );
};


jQuery.fn.extend( {
	wrapAll: function( html ) {
		var wrap;

		if ( this[ 0 ] ) {
			if ( isFunction( html ) ) {
				html = html.call( this[ 0 ] );
			}

			// The elements to wrap the target around
			wrap = jQuery( html, this[ 0 ].ownerDocument ).eq( 0 ).clone( true );

			if ( this[ 0 ].parentNode ) {
				wrap.insertBefore( this[ 0 ] );
			}

			wrap.map( function() {
				var elem = this;

				while ( elem.firstElementChild ) {
					elem = elem.firstElementChild;
				}

				return elem;
			} ).append( this );
		}

		return this;
	},

	wrapInner: function( html ) {
		if ( isFunction( html ) ) {
			return this.each( function( i ) {
				jQuery( this ).wrapInner( html.call( this, i ) );
			} );
		}

		return this.each( function() {
			var self = jQuery( this ),
				contents = self.contents();

			if ( contents.length ) {
				contents.wrapAll( html );

			} else {
				self.append( html );
			}
		} );
	},

	wrap: function( html ) {
		var htmlIsFunction = isFunction( html );

		return this.each( function( i ) {
			jQuery( this ).wrapAll( htmlIsFunction ? html.call( this, i ) : html );
		} );
	},

	unwrap: function( selector ) {
		this.parent( selector ).not( "body" ).each( function() {
			jQuery( this ).replaceWith( this.childNodes );
		} );
		return this;
	}
} );


jQuery.expr.pseudos.hidden = function( elem ) {
	return !jQuery.expr.pseudos.visible( elem );
};
jQuery.expr.pseudos.visible = function( elem ) {
	return !!( elem.offsetWidth || elem.offsetHeight || elem.getClientRects().length );
};




jQuery.ajaxSettings.xhr = function() {
	try {
		return new window.XMLHttpRequest();
	} catch ( e ) {}
};

var xhrSuccessStatus = {

		// File protocol always yields status code 0, assume 200
		0: 200,

		// Support: IE <=9 only
		// #1450: sometimes IE returns 1223 when it should be 204
		1223: 204
	},
	xhrSupported = jQuery.ajaxSettings.xhr();

support.cors = !!xhrSupported && ( "withCredentials" in xhrSupported );
support.ajax = xhrSupported = !!xhrSupported;

jQuery.ajaxTransport( function( options ) {
	var callback, errorCallback;

	// Cross domain only allowed if supported through XMLHttpRequest
	if ( support.cors || xhrSupported && !options.crossDomain ) {
		return {
			send: function( headers, complete ) {
				var i,
					xhr = options.xhr();

				xhr.open(
					options.type,
					options.url,
					options.async,
					options.username,
					options.password
				);

				// Apply custom fields if provided
				if ( options.xhrFields ) {
					for ( i in options.xhrFields ) {
						xhr[ i ] = options.xhrFields[ i ];
					}
				}

				// Override mime type if needed
				if ( options.mimeType && xhr.overrideMimeType ) {
					xhr.overrideMimeType( options.mimeType );
				}

				// X-Requested-With header
				// For cross-domain requests, seeing as conditions for a preflight are
				// akin to a jigsaw puzzle, we simply never set it to be sure.
				// (it can always be set on a per-request basis or even using ajaxSetup)
				// For same-domain requests, won't change header if already provided.
				if ( !options.crossDomain && !headers[ "X-Requested-With" ] ) {
					headers[ "X-Requested-With" ] = "XMLHttpRequest";
				}

				// Set headers
				for ( i in headers ) {
					xhr.setRequestHeader( i, headers[ i ] );
				}

				// Callback
				callback = function( type ) {
					return function() {
						if ( callback ) {
							callback = errorCallback = xhr.onload =
								xhr.onerror = xhr.onabort = xhr.ontimeout =
									xhr.onreadystatechange = null;

							if ( type === "abort" ) {
								xhr.abort();
							} else if ( type === "error" ) {

								// Support: IE <=9 only
								// On a manual native abort, IE9 throws
								// errors on any property access that is not readyState
								if ( typeof xhr.status !== "number" ) {
									complete( 0, "error" );
								} else {
									complete(

										// File: protocol always yields status 0; see #8605, #14207
										xhr.status,
										xhr.statusText
									);
								}
							} else {
								complete(
									xhrSuccessStatus[ xhr.status ] || xhr.status,
									xhr.statusText,

									// Support: IE <=9 only
									// IE9 has no XHR2 but throws on binary (trac-11426)
									// For XHR2 non-text, let the caller handle it (gh-2498)
									( xhr.responseType || "text" ) !== "text"  ||
									typeof xhr.responseText !== "string" ?
										{ binary: xhr.response } :
										{ text: xhr.responseText },
									xhr.getAllResponseHeaders()
								);
							}
						}
					};
				};

				// Listen to events
				xhr.onload = callback();
				errorCallback = xhr.onerror = xhr.ontimeout = callback( "error" );

				// Support: IE 9 only
				// Use onreadystatechange to replace onabort
				// to handle uncaught aborts
				if ( xhr.onabort !== undefined ) {
					xhr.onabort = errorCallback;
				} else {
					xhr.onreadystatechange = function() {

						// Check readyState before timeout as it changes
						if ( xhr.readyState === 4 ) {

							// Allow onerror to be called first,
							// but that will not handle a native abort
							// Also, save errorCallback to a variable
							// as xhr.onerror cannot be accessed
							window.setTimeout( function() {
								if ( callback ) {
									errorCallback();
								}
							} );
						}
					};
				}

				// Create the abort callback
				callback = callback( "abort" );

				try {

					// Do send the request (this may raise an exception)
					xhr.send( options.hasContent && options.data || null );
				} catch ( e ) {

					// #14683: Only rethrow if this hasn't been notified as an error yet
					if ( callback ) {
						throw e;
					}
				}
			},

			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




// Prevent auto-execution of scripts when no explicit dataType was provided (See gh-2432)
jQuery.ajaxPrefilter( function( s ) {
	if ( s.crossDomain ) {
		s.contents.script = false;
	}
} );

// Install script dataType
jQuery.ajaxSetup( {
	accepts: {
		script: "text/javascript, application/javascript, " +
			"application/ecmascript, application/x-ecmascript"
	},
	contents: {
		script: /\b(?:java|ecma)script\b/
	},
	converters: {
		"text script": function( text ) {
			jQuery.globalEval( text );
			return text;
		}
	}
} );

// Handle cache's special case and crossDomain
jQuery.ajaxPrefilter( "script", function( s ) {
	if ( s.cache === undefined ) {
		s.cache = false;
	}
	if ( s.crossDomain ) {
		s.type = "GET";
	}
} );

// Bind script tag hack transport
jQuery.ajaxTransport( "script", function( s ) {

	// This transport only deals with cross domain or forced-by-attrs requests
	if ( s.crossDomain || s.scriptAttrs ) {
		var script, callback;
		return {
			send: function( _, complete ) {
				script = jQuery( "<script>" )
					.attr( s.scriptAttrs || {} )
					.prop( { charset: s.scriptCharset, src: s.url } )
					.on( "load error", callback = function( evt ) {
						script.remove();
						callback = null;
						if ( evt ) {
							complete( evt.type === "error" ? 404 : 200, evt.type );
						}
					} );

				// Use native DOM manipulation to avoid our domManip AJAX trickery
				document.head.appendChild( script[ 0 ] );
			},
			abort: function() {
				if ( callback ) {
					callback();
				}
			}
		};
	}
} );




var oldCallbacks = [],
	rjsonp = /(=)\?(?=&|$)|\?\?/;

// Default jsonp settings
jQuery.ajaxSetup( {
	jsonp: "callback",
	jsonpCallback: function() {
		var callback = oldCallbacks.pop() || ( jQuery.expando + "_" + ( nonce++ ) );
		this[ callback ] = true;
		return callback;
	}
} );

// Detect, normalize options and install callbacks for jsonp requests
jQuery.ajaxPrefilter( "json jsonp", function( s, originalSettings, jqXHR ) {

	var callbackName, overwritten, responseContainer,
		jsonProp = s.jsonp !== false && ( rjsonp.test( s.url ) ?
			"url" :
			typeof s.data === "string" &&
				( s.contentType || "" )
					.indexOf( "application/x-www-form-urlencoded" ) === 0 &&
				rjsonp.test( s.data ) && "data"
		);

	// Handle iff the expected data type is "jsonp" or we have a parameter to set
	if ( jsonProp || s.dataTypes[ 0 ] === "jsonp" ) {

		// Get callback name, remembering preexisting value associated with it
		callbackName = s.jsonpCallback = isFunction( s.jsonpCallback ) ?
			s.jsonpCallback() :
			s.jsonpCallback;

		// Insert callback into url or form data
		if ( jsonProp ) {
			s[ jsonProp ] = s[ jsonProp ].replace( rjsonp, "$1" + callbackName );
		} else if ( s.jsonp !== false ) {
			s.url += ( rquery.test( s.url ) ? "&" : "?" ) + s.jsonp + "=" + callbackName;
		}

		// Use data converter to retrieve json after script execution
		s.converters[ "script json" ] = function() {
			if ( !responseContainer ) {
				jQuery.error( callbackName + " was not called" );
			}
			return responseContainer[ 0 ];
		};

		// Force json dataType
		s.dataTypes[ 0 ] = "json";

		// Install callback
		overwritten = window[ callbackName ];
		window[ callbackName ] = function() {
			responseContainer = arguments;
		};

		// Clean-up function (fires after converters)
		jqXHR.always( function() {

			// If previous value didn't exist - remove it
			if ( overwritten === undefined ) {
				jQuery( window ).removeProp( callbackName );

			// Otherwise restore preexisting value
			} else {
				window[ callbackName ] = overwritten;
			}

			// Save back as free
			if ( s[ callbackName ] ) {

				// Make sure that re-using the options doesn't screw things around
				s.jsonpCallback = originalSettings.jsonpCallback;

				// Save the callback name for future use
				oldCallbacks.push( callbackName );
			}

			// Call if it was a function and we have a response
			if ( responseContainer && isFunction( overwritten ) ) {
				overwritten( responseContainer[ 0 ] );
			}

			responseContainer = overwritten = undefined;
		} );

		// Delegate to script
		return "script";
	}
} );




// Support: Safari 8 only
// In Safari 8 documents created via document.implementation.createHTMLDocument
// collapse sibling forms: the second one becomes a child of the first one.
// Because of that, this security measure has to be disabled in Safari 8.
// https://bugs.webkit.org/show_bug.cgi?id=137337
support.createHTMLDocument = ( function() {
	var body = document.implementation.createHTMLDocument( "" ).body;
	body.innerHTML = "<form></form><form></form>";
	return body.childNodes.length === 2;
} )();


// Argument "data" should be string of html
// context (optional): If specified, the fragment will be created in this context,
// defaults to document
// keepScripts (optional): If true, will include scripts passed in the html string
jQuery.parseHTML = function( data, context, keepScripts ) {
	if ( typeof data !== "string" ) {
		return [];
	}
	if ( typeof context === "boolean" ) {
		keepScripts = context;
		context = false;
	}

	var base, parsed, scripts;

	if ( !context ) {

		// Stop scripts or inline event handlers from being executed immediately
		// by using document.implementation
		if ( support.createHTMLDocument ) {
			context = document.implementation.createHTMLDocument( "" );

			// Set the base href for the created document
			// so any parsed elements with URLs
			// are based on the document's URL (gh-2965)
			base = context.createElement( "base" );
			base.href = document.location.href;
			context.head.appendChild( base );
		} else {
			context = document;
		}
	}

	parsed = rsingleTag.exec( data );
	scripts = !keepScripts && [];

	// Single tag
	if ( parsed ) {
		return [ context.createElement( parsed[ 1 ] ) ];
	}

	parsed = buildFragment( [ data ], context, scripts );

	if ( scripts && scripts.length ) {
		jQuery( scripts ).remove();
	}

	return jQuery.merge( [], parsed.childNodes );
};


/**
 * Load a url into a page
 */
jQuery.fn.load = function( url, params, callback ) {
	var selector, type, response,
		self = this,
		off = url.indexOf( " " );

	if ( off > -1 ) {
		selector = stripAndCollapse( url.slice( off ) );
		url = url.slice( 0, off );
	}

	// If it's a function
	if ( isFunction( params ) ) {

		// We assume that it's the callback
		callback = params;
		params = undefined;

	// Otherwise, build a param string
	} else if ( params && typeof params === "object" ) {
		type = "POST";
	}

	// If we have elements to modify, make the request
	if ( self.length > 0 ) {
		jQuery.ajax( {
			url: url,

			// If "type" variable is undefined, then "GET" method will be used.
			// Make value of this field explicit since
			// user can override it through ajaxSetup method
			type: type || "GET",
			dataType: "html",
			data: params
		} ).done( function( responseText ) {

			// Save response for use in complete callback
			response = arguments;

			self.html( selector ?

				// If a selector was specified, locate the right elements in a dummy div
				// Exclude scripts to avoid IE 'Permission Denied' errors
				jQuery( "<div>" ).append( jQuery.parseHTML( responseText ) ).find( selector ) :

				// Otherwise use the full result
				responseText );

		// If the request succeeds, this function gets "data", "status", "jqXHR"
		// but they are ignored because response was set above.
		// If it fails, this function gets "jqXHR", "status", "error"
		} ).always( callback && function( jqXHR, status ) {
			self.each( function() {
				callback.apply( this, response || [ jqXHR.responseText, status, jqXHR ] );
			} );
		} );
	}

	return this;
};




// Attach a bunch of functions for handling common AJAX events
jQuery.each( [
	"ajaxStart",
	"ajaxStop",
	"ajaxComplete",
	"ajaxError",
	"ajaxSuccess",
	"ajaxSend"
], function( i, type ) {
	jQuery.fn[ type ] = function( fn ) {
		return this.on( type, fn );
	};
} );




jQuery.expr.pseudos.animated = function( elem ) {
	return jQuery.grep( jQuery.timers, function( fn ) {
		return elem === fn.elem;
	} ).length;
};




jQuery.offset = {
	setOffset: function( elem, options, i ) {
		var curPosition, curLeft, curCSSTop, curTop, curOffset, curCSSLeft, calculatePosition,
			position = jQuery.css( elem, "position" ),
			curElem = jQuery( elem ),
			props = {};

		// Set position first, in-case top/left are set even on static elem
		if ( position === "static" ) {
			elem.style.position = "relative";
		}

		curOffset = curElem.offset();
		curCSSTop = jQuery.css( elem, "top" );
		curCSSLeft = jQuery.css( elem, "left" );
		calculatePosition = ( position === "absolute" || position === "fixed" ) &&
			( curCSSTop + curCSSLeft ).indexOf( "auto" ) > -1;

		// Need to be able to calculate position if either
		// top or left is auto and position is either absolute or fixed
		if ( calculatePosition ) {
			curPosition = curElem.position();
			curTop = curPosition.top;
			curLeft = curPosition.left;

		} else {
			curTop = parseFloat( curCSSTop ) || 0;
			curLeft = parseFloat( curCSSLeft ) || 0;
		}

		if ( isFunction( options ) ) {

			// Use jQuery.extend here to allow modification of coordinates argument (gh-1848)
			options = options.call( elem, i, jQuery.extend( {}, curOffset ) );
		}

		if ( options.top != null ) {
			props.top = ( options.top - curOffset.top ) + curTop;
		}
		if ( options.left != null ) {
			props.left = ( options.left - curOffset.left ) + curLeft;
		}

		if ( "using" in options ) {
			options.using.call( elem, props );

		} else {
			curElem.css( props );
		}
	}
};

jQuery.fn.extend( {

	// offset() relates an element's border box to the document origin
	offset: function( options ) {

		// Preserve chaining for setter
		if ( arguments.length ) {
			return options === undefined ?
				this :
				this.each( function( i ) {
					jQuery.offset.setOffset( this, options, i );
				} );
		}

		var rect, win,
			elem = this[ 0 ];

		if ( !elem ) {
			return;
		}

		// Return zeros for disconnected and hidden (display: none) elements (gh-2310)
		// Support: IE <=11 only
		// Running getBoundingClientRect on a
		// disconnected node in IE throws an error
		if ( !elem.getClientRects().length ) {
			return { top: 0, left: 0 };
		}

		// Get document-relative position by adding viewport scroll to viewport-relative gBCR
		rect = elem.getBoundingClientRect();
		win = elem.ownerDocument.defaultView;
		return {
			top: rect.top + win.pageYOffset,
			left: rect.left + win.pageXOffset
		};
	},

	// position() relates an element's margin box to its offset parent's padding box
	// This corresponds to the behavior of CSS absolute positioning
	position: function() {
		if ( !this[ 0 ] ) {
			return;
		}

		var offsetParent, offset, doc,
			elem = this[ 0 ],
			parentOffset = { top: 0, left: 0 };

		// position:fixed elements are offset from the viewport, which itself always has zero offset
		if ( jQuery.css( elem, "position" ) === "fixed" ) {

			// Assume position:fixed implies availability of getBoundingClientRect
			offset = elem.getBoundingClientRect();

		} else {
			offset = this.offset();

			// Account for the *real* offset parent, which can be the document or its root element
			// when a statically positioned element is identified
			doc = elem.ownerDocument;
			offsetParent = elem.offsetParent || doc.documentElement;
			while ( offsetParent &&
				( offsetParent === doc.body || offsetParent === doc.documentElement ) &&
				jQuery.css( offsetParent, "position" ) === "static" ) {

				offsetParent = offsetParent.parentNode;
			}
			if ( offsetParent && offsetParent !== elem && offsetParent.nodeType === 1 ) {

				// Incorporate borders into its offset, since they are outside its content origin
				parentOffset = jQuery( offsetParent ).offset();
				parentOffset.top += jQuery.css( offsetParent, "borderTopWidth", true );
				parentOffset.left += jQuery.css( offsetParent, "borderLeftWidth", true );
			}
		}

		// Subtract parent offsets and element margins
		return {
			top: offset.top - parentOffset.top - jQuery.css( elem, "marginTop", true ),
			left: offset.left - parentOffset.left - jQuery.css( elem, "marginLeft", true )
		};
	},

	// This method will return documentElement in the following cases:
	// 1) For the element inside the iframe without offsetParent, this method will return
	//    documentElement of the parent window
	// 2) For the hidden or detached element
	// 3) For body or html element, i.e. in case of the html node - it will return itself
	//
	// but those exceptions were never presented as a real life use-cases
	// and might be considered as more preferable results.
	//
	// This logic, however, is not guaranteed and can change at any point in the future
	offsetParent: function() {
		return this.map( function() {
			var offsetParent = this.offsetParent;

			while ( offsetParent && jQuery.css( offsetParent, "position" ) === "static" ) {
				offsetParent = offsetParent.offsetParent;
			}

			return offsetParent || documentElement;
		} );
	}
} );

// Create scrollLeft and scrollTop methods
jQuery.each( { scrollLeft: "pageXOffset", scrollTop: "pageYOffset" }, function( method, prop ) {
	var top = "pageYOffset" === prop;

	jQuery.fn[ method ] = function( val ) {
		return access( this, function( elem, method, val ) {

			// Coalesce documents and windows
			var win;
			if ( isWindow( elem ) ) {
				win = elem;
			} else if ( elem.nodeType === 9 ) {
				win = elem.defaultView;
			}

			if ( val === undefined ) {
				return win ? win[ prop ] : elem[ method ];
			}

			if ( win ) {
				win.scrollTo(
					!top ? val : win.pageXOffset,
					top ? val : win.pageYOffset
				);

			} else {
				elem[ method ] = val;
			}
		}, method, val, arguments.length );
	};
} );

// Support: Safari <=7 - 9.1, Chrome <=37 - 49
// Add the top/left cssHooks using jQuery.fn.position
// Webkit bug: https://bugs.webkit.org/show_bug.cgi?id=29084
// Blink bug: https://bugs.chromium.org/p/chromium/issues/detail?id=589347
// getComputedStyle returns percent when specified for top/left/bottom/right;
// rather than make the css module depend on the offset module, just check for it here
jQuery.each( [ "top", "left" ], function( i, prop ) {
	jQuery.cssHooks[ prop ] = addGetHookIf( support.pixelPosition,
		function( elem, computed ) {
			if ( computed ) {
				computed = curCSS( elem, prop );

				// If curCSS returns percentage, fallback to offset
				return rnumnonpx.test( computed ) ?
					jQuery( elem ).position()[ prop ] + "px" :
					computed;
			}
		}
	);
} );


// Create innerHeight, innerWidth, height, width, outerHeight and outerWidth methods
jQuery.each( { Height: "height", Width: "width" }, function( name, type ) {
	jQuery.each( { padding: "inner" + name, content: type, "": "outer" + name },
		function( defaultExtra, funcName ) {

		// Margin is only for outerHeight, outerWidth
		jQuery.fn[ funcName ] = function( margin, value ) {
			var chainable = arguments.length && ( defaultExtra || typeof margin !== "boolean" ),
				extra = defaultExtra || ( margin === true || value === true ? "margin" : "border" );

			return access( this, function( elem, type, value ) {
				var doc;

				if ( isWindow( elem ) ) {

					// $( window ).outerWidth/Height return w/h including scrollbars (gh-1729)
					return funcName.indexOf( "outer" ) === 0 ?
						elem[ "inner" + name ] :
						elem.document.documentElement[ "client" + name ];
				}

				// Get document width or height
				if ( elem.nodeType === 9 ) {
					doc = elem.documentElement;

					// Either scroll[Width/Height] or offset[Width/Height] or client[Width/Height],
					// whichever is greatest
					return Math.max(
						elem.body[ "scroll" + name ], doc[ "scroll" + name ],
						elem.body[ "offset" + name ], doc[ "offset" + name ],
						doc[ "client" + name ]
					);
				}

				return value === undefined ?

					// Get width or height on the element, requesting but not forcing parseFloat
					jQuery.css( elem, type, extra ) :

					// Set width or height on the element
					jQuery.style( elem, type, value, extra );
			}, type, chainable ? margin : undefined, chainable );
		};
	} );
} );


jQuery.each( ( "blur focus focusin focusout resize scroll click dblclick " +
	"mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave " +
	"change select submit keydown keypress keyup contextmenu" ).split( " " ),
	function( i, name ) {

	// Handle event binding
	jQuery.fn[ name ] = function( data, fn ) {
		return arguments.length > 0 ?
			this.on( name, null, data, fn ) :
			this.trigger( name );
	};
} );

jQuery.fn.extend( {
	hover: function( fnOver, fnOut ) {
		return this.mouseenter( fnOver ).mouseleave( fnOut || fnOver );
	}
} );




jQuery.fn.extend( {

	bind: function( types, data, fn ) {
		return this.on( types, null, data, fn );
	},
	unbind: function( types, fn ) {
		return this.off( types, null, fn );
	},

	delegate: function( selector, types, data, fn ) {
		return this.on( types, selector, data, fn );
	},
	undelegate: function( selector, types, fn ) {

		// ( namespace ) or ( selector, types [, fn] )
		return arguments.length === 1 ?
			this.off( selector, "**" ) :
			this.off( types, selector || "**", fn );
	}
} );

// Bind a function to a context, optionally partially applying any
// arguments.
// jQuery.proxy is deprecated to promote standards (specifically Function#bind)
// However, it is not slated for removal any time soon
jQuery.proxy = function( fn, context ) {
	var tmp, args, proxy;

	if ( typeof context === "string" ) {
		tmp = fn[ context ];
		context = fn;
		fn = tmp;
	}

	// Quick check to determine if target is callable, in the spec
	// this throws a TypeError, but we will just return undefined.
	if ( !isFunction( fn ) ) {
		return undefined;
	}

	// Simulated bind
	args = slice.call( arguments, 2 );
	proxy = function() {
		return fn.apply( context || this, args.concat( slice.call( arguments ) ) );
	};

	// Set the guid of unique handler to the same of original handler, so it can be removed
	proxy.guid = fn.guid = fn.guid || jQuery.guid++;

	return proxy;
};

jQuery.holdReady = function( hold ) {
	if ( hold ) {
		jQuery.readyWait++;
	} else {
		jQuery.ready( true );
	}
};
jQuery.isArray = Array.isArray;
jQuery.parseJSON = JSON.parse;
jQuery.nodeName = nodeName;
jQuery.isFunction = isFunction;
jQuery.isWindow = isWindow;
jQuery.camelCase = camelCase;
jQuery.type = toType;

jQuery.now = Date.now;

jQuery.isNumeric = function( obj ) {

	// As of jQuery 3.0, isNumeric is limited to
	// strings and numbers (primitives or objects)
	// that can be coerced to finite numbers (gh-2662)
	var type = jQuery.type( obj );
	return ( type === "number" || type === "string" ) &&

		// parseFloat NaNs numeric-cast false positives ("")
		// ...but misinterprets leading-number strings, particularly hex literals ("0x...")
		// subtraction forces infinities to NaN
		!isNaN( obj - parseFloat( obj ) );
};




// Register as a named AMD module, since jQuery can be concatenated with other
// files that may use define, but not via a proper concatenation script that
// understands anonymous AMD modules. A named AMD is safest and most robust
// way to register. Lowercase jquery is used because AMD module names are
// derived from file names, and jQuery is normally delivered in a lowercase
// file name. Do this after creating the global so that if an AMD module wants
// to call noConflict to hide this version of jQuery, it will work.

// Note that for maximum portability, libraries that are not jQuery should
// declare themselves as anonymous modules, and avoid setting a global if an
// AMD loader is present. jQuery is a special case. For more information, see
// https://github.com/jrburke/requirejs/wiki/Updating-existing-libraries#wiki-anon

if ( true ) {
	!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function() {
		return jQuery;
	}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
}




var

	// Map over jQuery in case of overwrite
	_jQuery = window.jQuery,

	// Map over the $ in case of overwrite
	_$ = window.$;

jQuery.noConflict = function( deep ) {
	if ( window.$ === jQuery ) {
		window.$ = _$;
	}

	if ( deep && window.jQuery === jQuery ) {
		window.jQuery = _jQuery;
	}

	return jQuery;
};

// Expose jQuery and $ identifiers, even in AMD
// (#7102#comment:10, https://github.com/jquery/jquery/pull/557)
// and CommonJS for browser emulators (#13566)
if ( !noGlobal ) {
	window.jQuery = window.$ = jQuery;
}




return jQuery;
} );


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

/* WEBPACK VAR INJECTION */(function(jQuery, $, global) {var __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * Materialize v1.0.0 (http://materializecss.com)
 * Copyright 2014-2017 Materialize
 * MIT License (https://raw.githubusercontent.com/Dogfalo/materialize/master/LICENSE)
 */
var _get = function get(object, property, receiver) { if (object === null) object = Function.prototype; var desc = Object.getOwnPropertyDescriptor(object, property); if (desc === undefined) { var parent = Object.getPrototypeOf(object); if (parent === null) { return undefined; } else { return get(parent, property, receiver); } } else if ("value" in desc) { return desc.value; } else { var getter = desc.get; if (getter === undefined) { return undefined; } return getter.call(receiver); } };

var _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();

function _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError("this hasn't been initialised - super() hasn't been called"); } return call && (typeof call === "object" || typeof call === "function") ? call : self; }

function _inherits(subClass, superClass) { if (typeof superClass !== "function" && superClass !== null) { throw new TypeError("Super expression must either be null or a function, not " + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

/*! cash-dom 1.3.5, https://github.com/kenwheeler/cash @license MIT */
(function (factory) {
  window.cash = factory();
})(function () {
  var doc = document,
      win = window,
      ArrayProto = Array.prototype,
      slice = ArrayProto.slice,
      filter = ArrayProto.filter,
      push = ArrayProto.push;

  var noop = function () {},
      isFunction = function (item) {
    // @see https://crbug.com/568448
    return typeof item === typeof noop && item.call;
  },
      isString = function (item) {
    return typeof item === typeof "";
  };

  var idMatch = /^#[\w-]*$/,
      classMatch = /^\.[\w-]*$/,
      htmlMatch = /<.+>/,
      singlet = /^\w+$/;

  function find(selector, context) {
    context = context || doc;
    var elems = classMatch.test(selector) ? context.getElementsByClassName(selector.slice(1)) : singlet.test(selector) ? context.getElementsByTagName(selector) : context.querySelectorAll(selector);
    return elems;
  }

  var frag;
  function parseHTML(str) {
    if (!frag) {
      frag = doc.implementation.createHTMLDocument(null);
      var base = frag.createElement("base");
      base.href = doc.location.href;
      frag.head.appendChild(base);
    }

    frag.body.innerHTML = str;

    return frag.body.childNodes;
  }

  function onReady(fn) {
    if (doc.readyState !== "loading") {
      fn();
    } else {
      doc.addEventListener("DOMContentLoaded", fn);
    }
  }

  function Init(selector, context) {
    if (!selector) {
      return this;
    }

    // If already a cash collection, don't do any further processing
    if (selector.cash && selector !== win) {
      return selector;
    }

    var elems = selector,
        i = 0,
        length;

    if (isString(selector)) {
      elems = idMatch.test(selector) ?
      // If an ID use the faster getElementById check
      doc.getElementById(selector.slice(1)) : htmlMatch.test(selector) ?
      // If HTML, parse it into real elements
      parseHTML(selector) :
      // else use `find`
      find(selector, context);

      // If function, use as shortcut for DOM ready
    } else if (isFunction(selector)) {
      onReady(selector);return this;
    }

    if (!elems) {
      return this;
    }

    // If a single DOM element is passed in or received via ID, return the single element
    if (elems.nodeType || elems === win) {
      this[0] = elems;
      this.length = 1;
    } else {
      // Treat like an array and loop through each item.
      length = this.length = elems.length;
      for (; i < length; i++) {
        this[i] = elems[i];
      }
    }

    return this;
  }

  function cash(selector, context) {
    return new Init(selector, context);
  }

  var fn = cash.fn = cash.prototype = Init.prototype = { // jshint ignore:line
    cash: true,
    length: 0,
    push: push,
    splice: ArrayProto.splice,
    map: ArrayProto.map,
    init: Init
  };

  Object.defineProperty(fn, "constructor", { value: cash });

  cash.parseHTML = parseHTML;
  cash.noop = noop;
  cash.isFunction = isFunction;
  cash.isString = isString;

  cash.extend = fn.extend = function (target) {
    target = target || {};

    var args = slice.call(arguments),
        length = args.length,
        i = 1;

    if (args.length === 1) {
      target = this;
      i = 0;
    }

    for (; i < length; i++) {
      if (!args[i]) {
        continue;
      }
      for (var key in args[i]) {
        if (args[i].hasOwnProperty(key)) {
          target[key] = args[i][key];
        }
      }
    }

    return target;
  };

  function each(collection, callback) {
    var l = collection.length,
        i = 0;

    for (; i < l; i++) {
      if (callback.call(collection[i], collection[i], i, collection) === false) {
        break;
      }
    }
  }

  function matches(el, selector) {
    var m = el && (el.matches || el.webkitMatchesSelector || el.mozMatchesSelector || el.msMatchesSelector || el.oMatchesSelector);
    return !!m && m.call(el, selector);
  }

  function getCompareFunction(selector) {
    return (
      /* Use browser's `matches` function if string */
      isString(selector) ? matches :
      /* Match a cash element */
      selector.cash ? function (el) {
        return selector.is(el);
      } :
      /* Direct comparison */
      function (el, selector) {
        return el === selector;
      }
    );
  }

  function unique(collection) {
    return cash(slice.call(collection).filter(function (item, index, self) {
      return self.indexOf(item) === index;
    }));
  }

  cash.extend({
    merge: function (first, second) {
      var len = +second.length,
          i = first.length,
          j = 0;

      for (; j < len; i++, j++) {
        first[i] = second[j];
      }

      first.length = i;
      return first;
    },

    each: each,
    matches: matches,
    unique: unique,
    isArray: Array.isArray,
    isNumeric: function (n) {
      return !isNaN(parseFloat(n)) && isFinite(n);
    }

  });

  var uid = cash.uid = "_cash" + Date.now();

  function getDataCache(node) {
    return node[uid] = node[uid] || {};
  }

  function setData(node, key, value) {
    return getDataCache(node)[key] = value;
  }

  function getData(node, key) {
    var c = getDataCache(node);
    if (c[key] === undefined) {
      c[key] = node.dataset ? node.dataset[key] : cash(node).attr("data-" + key);
    }
    return c[key];
  }

  function removeData(node, key) {
    var c = getDataCache(node);
    if (c) {
      delete c[key];
    } else if (node.dataset) {
      delete node.dataset[key];
    } else {
      cash(node).removeAttr("data-" + name);
    }
  }

  fn.extend({
    data: function (name, value) {
      if (isString(name)) {
        return value === undefined ? getData(this[0], name) : this.each(function (v) {
          return setData(v, name, value);
        });
      }

      for (var key in name) {
        this.data(key, name[key]);
      }

      return this;
    },

    removeData: function (key) {
      return this.each(function (v) {
        return removeData(v, key);
      });
    }

  });

  var notWhiteMatch = /\S+/g;

  function getClasses(c) {
    return isString(c) && c.match(notWhiteMatch);
  }

  function hasClass(v, c) {
    return v.classList ? v.classList.contains(c) : new RegExp("(^| )" + c + "( |$)", "gi").test(v.className);
  }

  function addClass(v, c, spacedName) {
    if (v.classList) {
      v.classList.add(c);
    } else if (spacedName.indexOf(" " + c + " ")) {
      v.className += " " + c;
    }
  }

  function removeClass(v, c) {
    if (v.classList) {
      v.classList.remove(c);
    } else {
      v.className = v.className.replace(c, "");
    }
  }

  fn.extend({
    addClass: function (c) {
      var classes = getClasses(c);

      return classes ? this.each(function (v) {
        var spacedName = " " + v.className + " ";
        each(classes, function (c) {
          addClass(v, c, spacedName);
        });
      }) : this;
    },

    attr: function (name, value) {
      if (!name) {
        return undefined;
      }

      if (isString(name)) {
        if (value === undefined) {
          return this[0] ? this[0].getAttribute ? this[0].getAttribute(name) : this[0][name] : undefined;
        }

        return this.each(function (v) {
          if (v.setAttribute) {
            v.setAttribute(name, value);
          } else {
            v[name] = value;
          }
        });
      }

      for (var key in name) {
        this.attr(key, name[key]);
      }

      return this;
    },

    hasClass: function (c) {
      var check = false,
          classes = getClasses(c);
      if (classes && classes.length) {
        this.each(function (v) {
          check = hasClass(v, classes[0]);
          return !check;
        });
      }
      return check;
    },

    prop: function (name, value) {
      if (isString(name)) {
        return value === undefined ? this[0][name] : this.each(function (v) {
          v[name] = value;
        });
      }

      for (var key in name) {
        this.prop(key, name[key]);
      }

      return this;
    },

    removeAttr: function (name) {
      return this.each(function (v) {
        if (v.removeAttribute) {
          v.removeAttribute(name);
        } else {
          delete v[name];
        }
      });
    },

    removeClass: function (c) {
      if (!arguments.length) {
        return this.attr("class", "");
      }
      var classes = getClasses(c);
      return classes ? this.each(function (v) {
        each(classes, function (c) {
          removeClass(v, c);
        });
      }) : this;
    },

    removeProp: function (name) {
      return this.each(function (v) {
        delete v[name];
      });
    },

    toggleClass: function (c, state) {
      if (state !== undefined) {
        return this[state ? "addClass" : "removeClass"](c);
      }
      var classes = getClasses(c);
      return classes ? this.each(function (v) {
        var spacedName = " " + v.className + " ";
        each(classes, function (c) {
          if (hasClass(v, c)) {
            removeClass(v, c);
          } else {
            addClass(v, c, spacedName);
          }
        });
      }) : this;
    } });

  fn.extend({
    add: function (selector, context) {
      return unique(cash.merge(this, cash(selector, context)));
    },

    each: function (callback) {
      each(this, callback);
      return this;
    },

    eq: function (index) {
      return cash(this.get(index));
    },

    filter: function (selector) {
      if (!selector) {
        return this;
      }

      var comparator = isFunction(selector) ? selector : getCompareFunction(selector);

      return cash(filter.call(this, function (e) {
        return comparator(e, selector);
      }));
    },

    first: function () {
      return this.eq(0);
    },

    get: function (index) {
      if (index === undefined) {
        return slice.call(this);
      }
      return index < 0 ? this[index + this.length] : this[index];
    },

    index: function (elem) {
      var child = elem ? cash(elem)[0] : this[0],
          collection = elem ? this : cash(child).parent().children();
      return slice.call(collection).indexOf(child);
    },

    last: function () {
      return this.eq(-1);
    }

  });

  var camelCase = function () {
    var camelRegex = /(?:^\w|[A-Z]|\b\w)/g,
        whiteSpace = /[\s-_]+/g;
    return function (str) {
      return str.replace(camelRegex, function (letter, index) {
        return letter[index === 0 ? "toLowerCase" : "toUpperCase"]();
      }).replace(whiteSpace, "");
    };
  }();

  var getPrefixedProp = function () {
    var cache = {},
        doc = document,
        div = doc.createElement("div"),
        style = div.style;

    return function (prop) {
      prop = camelCase(prop);
      if (cache[prop]) {
        return cache[prop];
      }

      var ucProp = prop.charAt(0).toUpperCase() + prop.slice(1),
          prefixes = ["webkit", "moz", "ms", "o"],
          props = (prop + " " + prefixes.join(ucProp + " ") + ucProp).split(" ");

      each(props, function (p) {
        if (p in style) {
          cache[p] = prop = cache[prop] = p;
          return false;
        }
      });

      return cache[prop];
    };
  }();

  cash.prefixedProp = getPrefixedProp;
  cash.camelCase = camelCase;

  fn.extend({
    css: function (prop, value) {
      if (isString(prop)) {
        prop = getPrefixedProp(prop);
        return arguments.length > 1 ? this.each(function (v) {
          return v.style[prop] = value;
        }) : win.getComputedStyle(this[0])[prop];
      }

      for (var key in prop) {
        this.css(key, prop[key]);
      }

      return this;
    }

  });

  function compute(el, prop) {
    return parseInt(win.getComputedStyle(el[0], null)[prop], 10) || 0;
  }

  each(["Width", "Height"], function (v) {
    var lower = v.toLowerCase();

    fn[lower] = function () {
      return this[0].getBoundingClientRect()[lower];
    };

    fn["inner" + v] = function () {
      return this[0]["client" + v];
    };

    fn["outer" + v] = function (margins) {
      return this[0]["offset" + v] + (margins ? compute(this, "margin" + (v === "Width" ? "Left" : "Top")) + compute(this, "margin" + (v === "Width" ? "Right" : "Bottom")) : 0);
    };
  });

  function registerEvent(node, eventName, callback) {
    var eventCache = getData(node, "_cashEvents") || setData(node, "_cashEvents", {});
    eventCache[eventName] = eventCache[eventName] || [];
    eventCache[eventName].push(callback);
    node.addEventListener(eventName, callback);
  }

  function removeEvent(node, eventName, callback) {
    var events = getData(node, "_cashEvents"),
        eventCache = events && events[eventName],
        index;

    if (!eventCache) {
      return;
    }

    if (callback) {
      node.removeEventListener(eventName, callback);
      index = eventCache.indexOf(callback);
      if (index >= 0) {
        eventCache.splice(index, 1);
      }
    } else {
      each(eventCache, function (event) {
        node.removeEventListener(eventName, event);
      });
      eventCache = [];
    }
  }

  fn.extend({
    off: function (eventName, callback) {
      return this.each(function (v) {
        return removeEvent(v, eventName, callback);
      });
    },

    on: function (eventName, delegate, callback, runOnce) {
      // jshint ignore:line
      var originalCallback;
      if (!isString(eventName)) {
        for (var key in eventName) {
          this.on(key, delegate, eventName[key]);
        }
        return this;
      }

      if (isFunction(delegate)) {
        callback = delegate;
        delegate = null;
      }

      if (eventName === "ready") {
        onReady(callback);
        return this;
      }

      if (delegate) {
        originalCallback = callback;
        callback = function (e) {
          var t = e.target;
          while (!matches(t, delegate)) {
            if (t === this || t === null) {
              return t = false;
            }

            t = t.parentNode;
          }

          if (t) {
            originalCallback.call(t, e);
          }
        };
      }

      return this.each(function (v) {
        var finalCallback = callback;
        if (runOnce) {
          finalCallback = function () {
            callback.apply(this, arguments);
            removeEvent(v, eventName, finalCallback);
          };
        }
        registerEvent(v, eventName, finalCallback);
      });
    },

    one: function (eventName, delegate, callback) {
      return this.on(eventName, delegate, callback, true);
    },

    ready: onReady,

    /**
     * Modified
     * Triggers browser event
     * @param String eventName
     * @param Object data - Add properties to event object
     */
    trigger: function (eventName, data) {
      if (document.createEvent) {
        var evt = document.createEvent('HTMLEvents');
        evt.initEvent(eventName, true, false);
        evt = this.extend(evt, data);
        return this.each(function (v) {
          return v.dispatchEvent(evt);
        });
      }
    }

  });

  function encode(name, value) {
    return "&" + encodeURIComponent(name) + "=" + encodeURIComponent(value).replace(/%20/g, "+");
  }

  function getSelectMultiple_(el) {
    var values = [];
    each(el.options, function (o) {
      if (o.selected) {
        values.push(o.value);
      }
    });
    return values.length ? values : null;
  }

  function getSelectSingle_(el) {
    var selectedIndex = el.selectedIndex;
    return selectedIndex >= 0 ? el.options[selectedIndex].value : null;
  }

  function getValue(el) {
    var type = el.type;
    if (!type) {
      return null;
    }
    switch (type.toLowerCase()) {
      case "select-one":
        return getSelectSingle_(el);
      case "select-multiple":
        return getSelectMultiple_(el);
      case "radio":
        return el.checked ? el.value : null;
      case "checkbox":
        return el.checked ? el.value : null;
      default:
        return el.value ? el.value : null;
    }
  }

  fn.extend({
    serialize: function () {
      var query = "";

      each(this[0].elements || this, function (el) {
        if (el.disabled || el.tagName === "FIELDSET") {
          return;
        }
        var name = el.name;
        switch (el.type.toLowerCase()) {
          case "file":
          case "reset":
          case "submit":
          case "button":
            break;
          case "select-multiple":
            var values = getValue(el);
            if (values !== null) {
              each(values, function (value) {
                query += encode(name, value);
              });
            }
            break;
          default:
            var value = getValue(el);
            if (value !== null) {
              query += encode(name, value);
            }
        }
      });

      return query.substr(1);
    },

    val: function (value) {
      if (value === undefined) {
        return getValue(this[0]);
      }

      return this.each(function (v) {
        return v.value = value;
      });
    }

  });

  function insertElement(el, child, prepend) {
    if (prepend) {
      var first = el.childNodes[0];
      el.insertBefore(child, first);
    } else {
      el.appendChild(child);
    }
  }

  function insertContent(parent, child, prepend) {
    var str = isString(child);

    if (!str && child.length) {
      each(child, function (v) {
        return insertContent(parent, v, prepend);
      });
      return;
    }

    each(parent, str ? function (v) {
      return v.insertAdjacentHTML(prepend ? "afterbegin" : "beforeend", child);
    } : function (v, i) {
      return insertElement(v, i === 0 ? child : child.cloneNode(true), prepend);
    });
  }

  fn.extend({
    after: function (selector) {
      cash(selector).insertAfter(this);
      return this;
    },

    append: function (content) {
      insertContent(this, content);
      return this;
    },

    appendTo: function (parent) {
      insertContent(cash(parent), this);
      return this;
    },

    before: function (selector) {
      cash(selector).insertBefore(this);
      return this;
    },

    clone: function () {
      return cash(this.map(function (v) {
        return v.cloneNode(true);
      }));
    },

    empty: function () {
      this.html("");
      return this;
    },

    html: function (content) {
      if (content === undefined) {
        return this[0].innerHTML;
      }
      var source = content.nodeType ? content[0].outerHTML : content;
      return this.each(function (v) {
        return v.innerHTML = source;
      });
    },

    insertAfter: function (selector) {
      var _this = this;

      cash(selector).each(function (el, i) {
        var parent = el.parentNode,
            sibling = el.nextSibling;
        _this.each(function (v) {
          parent.insertBefore(i === 0 ? v : v.cloneNode(true), sibling);
        });
      });

      return this;
    },

    insertBefore: function (selector) {
      var _this2 = this;
      cash(selector).each(function (el, i) {
        var parent = el.parentNode;
        _this2.each(function (v) {
          parent.insertBefore(i === 0 ? v : v.cloneNode(true), el);
        });
      });
      return this;
    },

    prepend: function (content) {
      insertContent(this, content, true);
      return this;
    },

    prependTo: function (parent) {
      insertContent(cash(parent), this, true);
      return this;
    },

    remove: function () {
      return this.each(function (v) {
        if (!!v.parentNode) {
          return v.parentNode.removeChild(v);
        }
      });
    },

    text: function (content) {
      if (content === undefined) {
        return this[0].textContent;
      }
      return this.each(function (v) {
        return v.textContent = content;
      });
    }

  });

  var docEl = doc.documentElement;

  fn.extend({
    position: function () {
      var el = this[0];
      return {
        left: el.offsetLeft,
        top: el.offsetTop
      };
    },

    offset: function () {
      var rect = this[0].getBoundingClientRect();
      return {
        top: rect.top + win.pageYOffset - docEl.clientTop,
        left: rect.left + win.pageXOffset - docEl.clientLeft
      };
    },

    offsetParent: function () {
      return cash(this[0].offsetParent);
    }

  });

  fn.extend({
    children: function (selector) {
      var elems = [];
      this.each(function (el) {
        push.apply(elems, el.children);
      });
      elems = unique(elems);

      return !selector ? elems : elems.filter(function (v) {
        return matches(v, selector);
      });
    },

    closest: function (selector) {
      if (!selector || this.length < 1) {
        return cash();
      }
      if (this.is(selector)) {
        return this.filter(selector);
      }
      return this.parent().closest(selector);
    },

    is: function (selector) {
      if (!selector) {
        return false;
      }

      var match = false,
          comparator = getCompareFunction(selector);

      this.each(function (el) {
        match = comparator(el, selector);
        return !match;
      });

      return match;
    },

    find: function (selector) {
      if (!selector || selector.nodeType) {
        return cash(selector && this.has(selector).length ? selector : null);
      }

      var elems = [];
      this.each(function (el) {
        push.apply(elems, find(selector, el));
      });

      return unique(elems);
    },

    has: function (selector) {
      var comparator = isString(selector) ? function (el) {
        return find(selector, el).length !== 0;
      } : function (el) {
        return el.contains(selector);
      };

      return this.filter(comparator);
    },

    next: function () {
      return cash(this[0].nextElementSibling);
    },

    not: function (selector) {
      if (!selector) {
        return this;
      }

      var comparator = getCompareFunction(selector);

      return this.filter(function (el) {
        return !comparator(el, selector);
      });
    },

    parent: function () {
      var result = [];

      this.each(function (item) {
        if (item && item.parentNode) {
          result.push(item.parentNode);
        }
      });

      return unique(result);
    },

    parents: function (selector) {
      var last,
          result = [];

      this.each(function (item) {
        last = item;

        while (last && last.parentNode && last !== doc.body.parentNode) {
          last = last.parentNode;

          if (!selector || selector && matches(last, selector)) {
            result.push(last);
          }
        }
      });

      return unique(result);
    },

    prev: function () {
      return cash(this[0].previousElementSibling);
    },

    siblings: function (selector) {
      var collection = this.parent().children(selector),
          el = this[0];

      return collection.filter(function (i) {
        return i !== el;
      });
    }

  });

  return cash;
});
;
var Component = function () {
  /**
   * Generic constructor for all components
   * @constructor
   * @param {Element} el
   * @param {Object} options
   */
  function Component(classDef, el, options) {
    _classCallCheck(this, Component);

    // Display error if el is valid HTML Element
    if (!(el instanceof Element)) {
      console.error(Error(el + ' is not an HTML Element'));
    }

    // If exists, destroy and reinitialize in child
    var ins = classDef.getInstance(el);
    if (!!ins) {
      ins.destroy();
    }

    this.el = el;
    this.$el = cash(el);
  }

  /**
   * Initializes components
   * @param {class} classDef
   * @param {Element | NodeList | jQuery} els
   * @param {Object} options
   */


  _createClass(Component, null, [{
    key: "init",
    value: function init(classDef, els, options) {
      var instances = null;
      if (els instanceof Element) {
        instances = new classDef(els, options);
      } else if (!!els && (els.jquery || els.cash || els instanceof NodeList)) {
        var instancesArr = [];
        for (var i = 0; i < els.length; i++) {
          instancesArr.push(new classDef(els[i], options));
        }
        instances = instancesArr;
      }

      return instances;
    }
  }]);

  return Component;
}();

; // Required for Meteor package, the use of window prevents export by Meteor
(function (window) {
  if (window.Package) {
    M = {};
  } else {
    window.M = {};
  }

  // Check for jQuery
  M.jQueryLoaded = !!window.jQuery;
})(window);

// AMD
if (true) {
  !(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_RESULT__ = (function () {
    return M;
  }).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));

  // Common JS
} else {}

M.version = '1.0.0';

M.keys = {
  TAB: 9,
  ENTER: 13,
  ESC: 27,
  ARROW_UP: 38,
  ARROW_DOWN: 40
};

/**
 * TabPress Keydown handler
 */
M.tabPressed = false;
M.keyDown = false;
var docHandleKeydown = function (e) {
  M.keyDown = true;
  if (e.which === M.keys.TAB || e.which === M.keys.ARROW_DOWN || e.which === M.keys.ARROW_UP) {
    M.tabPressed = true;
  }
};
var docHandleKeyup = function (e) {
  M.keyDown = false;
  if (e.which === M.keys.TAB || e.which === M.keys.ARROW_DOWN || e.which === M.keys.ARROW_UP) {
    M.tabPressed = false;
  }
};
var docHandleFocus = function (e) {
  if (M.keyDown) {
    document.body.classList.add('keyboard-focused');
  }
};
var docHandleBlur = function (e) {
  document.body.classList.remove('keyboard-focused');
};
document.addEventListener('keydown', docHandleKeydown, true);
document.addEventListener('keyup', docHandleKeyup, true);
document.addEventListener('focus', docHandleFocus, true);
document.addEventListener('blur', docHandleBlur, true);

/**
 * Initialize jQuery wrapper for plugin
 * @param {Class} plugin  javascript class
 * @param {string} pluginName  jQuery plugin name
 * @param {string} classRef  Class reference name
 */
M.initializeJqueryWrapper = function (plugin, pluginName, classRef) {
  jQuery.fn[pluginName] = function (methodOrOptions) {
    // Call plugin method if valid method name is passed in
    if (plugin.prototype[methodOrOptions]) {
      var params = Array.prototype.slice.call(arguments, 1);

      // Getter methods
      if (methodOrOptions.slice(0, 3) === 'get') {
        var instance = this.first()[0][classRef];
        return instance[methodOrOptions].apply(instance, params);
      }

      // Void methods
      return this.each(function () {
        var instance = this[classRef];
        instance[methodOrOptions].apply(instance, params);
      });

      // Initialize plugin if options or no argument is passed in
    } else if (typeof methodOrOptions === 'object' || !methodOrOptions) {
      plugin.init(this, arguments[0]);
      return this;
    }

    // Return error if an unrecognized  method name is passed in
    jQuery.error("Method " + methodOrOptions + " does not exist on jQuery." + pluginName);
  };
};

/**
 * Automatically initialize components
 * @param {Element} context  DOM Element to search within for components
 */
M.AutoInit = function (context) {
  // Use document.body if no context is given
  var root = !!context ? context : document.body;

  var registry = {
    Autocomplete: root.querySelectorAll('.autocomplete:not(.no-autoinit)'),
    Carousel: root.querySelectorAll('.carousel:not(.no-autoinit)'),
    Chips: root.querySelectorAll('.chips:not(.no-autoinit)'),
    Collapsible: root.querySelectorAll('.collapsible:not(.no-autoinit)'),
    Datepicker: root.querySelectorAll('.datepicker:not(.no-autoinit)'),
    Dropdown: root.querySelectorAll('.dropdown-trigger:not(.no-autoinit)'),
    Materialbox: root.querySelectorAll('.materialboxed:not(.no-autoinit)'),
    Modal: root.querySelectorAll('.modal:not(.no-autoinit)'),
    Parallax: root.querySelectorAll('.parallax:not(.no-autoinit)'),
    Pushpin: root.querySelectorAll('.pushpin:not(.no-autoinit)'),
    ScrollSpy: root.querySelectorAll('.scrollspy:not(.no-autoinit)'),
    FormSelect: root.querySelectorAll('select:not(.no-autoinit)'),
    Sidenav: root.querySelectorAll('.sidenav:not(.no-autoinit)'),
    Tabs: root.querySelectorAll('.tabs:not(.no-autoinit)'),
    TapTarget: root.querySelectorAll('.tap-target:not(.no-autoinit)'),
    Timepicker: root.querySelectorAll('.timepicker:not(.no-autoinit)'),
    Tooltip: root.querySelectorAll('.tooltipped:not(.no-autoinit)'),
    FloatingActionButton: root.querySelectorAll('.fixed-action-btn:not(.no-autoinit)')
  };

  for (var pluginName in registry) {
    var plugin = M[pluginName];
    plugin.init(registry[pluginName]);
  }
};

/**
 * Generate approximated selector string for a jQuery object
 * @param {jQuery} obj  jQuery object to be parsed
 * @returns {string}
 */
M.objectSelectorString = function (obj) {
  var tagStr = obj.prop('tagName') || '';
  var idStr = obj.attr('id') || '';
  var classStr = obj.attr('class') || '';
  return (tagStr + idStr + classStr).replace(/\s/g, '');
};

// Unique Random ID
M.guid = function () {
  function s4() {
    return Math.floor((1 + Math.random()) * 0x10000).toString(16).substring(1);
  }
  return function () {
    return s4() + s4() + '-' + s4() + '-' + s4() + '-' + s4() + '-' + s4() + s4() + s4();
  };
}();

/**
 * Escapes hash from special characters
 * @param {string} hash  String returned from this.hash
 * @returns {string}
 */
M.escapeHash = function (hash) {
  return hash.replace(/(:|\.|\[|\]|,|=|\/)/g, '\\$1');
};

M.elementOrParentIsFixed = function (element) {
  var $element = $(element);
  var $checkElements = $element.add($element.parents());
  var isFixed = false;
  $checkElements.each(function () {
    if ($(this).css('position') === 'fixed') {
      isFixed = true;
      return false;
    }
  });
  return isFixed;
};

/**
 * @typedef {Object} Edges
 * @property {Boolean} top  If the top edge was exceeded
 * @property {Boolean} right  If the right edge was exceeded
 * @property {Boolean} bottom  If the bottom edge was exceeded
 * @property {Boolean} left  If the left edge was exceeded
 */

/**
 * @typedef {Object} Bounding
 * @property {Number} left  left offset coordinate
 * @property {Number} top  top offset coordinate
 * @property {Number} width
 * @property {Number} height
 */

/**
 * Escapes hash from special characters
 * @param {Element} container  Container element that acts as the boundary
 * @param {Bounding} bounding  element bounding that is being checked
 * @param {Number} offset  offset from edge that counts as exceeding
 * @returns {Edges}
 */
M.checkWithinContainer = function (container, bounding, offset) {
  var edges = {
    top: false,
    right: false,
    bottom: false,
    left: false
  };

  var containerRect = container.getBoundingClientRect();
  // If body element is smaller than viewport, use viewport height instead.
  var containerBottom = container === document.body ? Math.max(containerRect.bottom, window.innerHeight) : containerRect.bottom;

  var scrollLeft = container.scrollLeft;
  var scrollTop = container.scrollTop;

  var scrolledX = bounding.left - scrollLeft;
  var scrolledY = bounding.top - scrollTop;

  // Check for container and viewport for each edge
  if (scrolledX < containerRect.left + offset || scrolledX < offset) {
    edges.left = true;
  }

  if (scrolledX + bounding.width > containerRect.right - offset || scrolledX + bounding.width > window.innerWidth - offset) {
    edges.right = true;
  }

  if (scrolledY < containerRect.top + offset || scrolledY < offset) {
    edges.top = true;
  }

  if (scrolledY + bounding.height > containerBottom - offset || scrolledY + bounding.height > window.innerHeight - offset) {
    edges.bottom = true;
  }

  return edges;
};

M.checkPossibleAlignments = function (el, container, bounding, offset) {
  var canAlign = {
    top: true,
    right: true,
    bottom: true,
    left: true,
    spaceOnTop: null,
    spaceOnRight: null,
    spaceOnBottom: null,
    spaceOnLeft: null
  };

  var containerAllowsOverflow = getComputedStyle(container).overflow === 'visible';
  var containerRect = container.getBoundingClientRect();
  var containerHeight = Math.min(containerRect.height, window.innerHeight);
  var containerWidth = Math.min(containerRect.width, window.innerWidth);
  var elOffsetRect = el.getBoundingClientRect();

  var scrollLeft = container.scrollLeft;
  var scrollTop = container.scrollTop;

  var scrolledX = bounding.left - scrollLeft;
  var scrolledYTopEdge = bounding.top - scrollTop;
  var scrolledYBottomEdge = bounding.top + elOffsetRect.height - scrollTop;

  // Check for container and viewport for left
  canAlign.spaceOnRight = !containerAllowsOverflow ? containerWidth - (scrolledX + bounding.width) : window.innerWidth - (elOffsetRect.left + bounding.width);
  if (canAlign.spaceOnRight < 0) {
    canAlign.left = false;
  }

  // Check for container and viewport for Right
  canAlign.spaceOnLeft = !containerAllowsOverflow ? scrolledX - bounding.width + elOffsetRect.width : elOffsetRect.right - bounding.width;
  if (canAlign.spaceOnLeft < 0) {
    canAlign.right = false;
  }

  // Check for container and viewport for Top
  canAlign.spaceOnBottom = !containerAllowsOverflow ? containerHeight - (scrolledYTopEdge + bounding.height + offset) : window.innerHeight - (elOffsetRect.top + bounding.height + offset);
  if (canAlign.spaceOnBottom < 0) {
    canAlign.top = false;
  }

  // Check for container and viewport for Bottom
  canAlign.spaceOnTop = !containerAllowsOverflow ? scrolledYBottomEdge - (bounding.height - offset) : elOffsetRect.bottom - (bounding.height + offset);
  if (canAlign.spaceOnTop < 0) {
    canAlign.bottom = false;
  }

  return canAlign;
};

M.getOverflowParent = function (element) {
  if (element == null) {
    return null;
  }

  if (element === document.body || getComputedStyle(element).overflow !== 'visible') {
    return element;
  }

  return M.getOverflowParent(element.parentElement);
};

/**
 * Gets id of component from a trigger
 * @param {Element} trigger  trigger
 * @returns {string}
 */
M.getIdFromTrigger = function (trigger) {
  var id = trigger.getAttribute('data-target');
  if (!id) {
    id = trigger.getAttribute('href');
    if (id) {
      id = id.slice(1);
    } else {
      id = '';
    }
  }
  return id;
};

/**
 * Multi browser support for document scroll top
 * @returns {Number}
 */
M.getDocumentScrollTop = function () {
  return window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0;
};

/**
 * Multi browser support for document scroll left
 * @returns {Number}
 */
M.getDocumentScrollLeft = function () {
  return window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft || 0;
};

/**
 * @typedef {Object} Edges
 * @property {Boolean} top  If the top edge was exceeded
 * @property {Boolean} right  If the right edge was exceeded
 * @property {Boolean} bottom  If the bottom edge was exceeded
 * @property {Boolean} left  If the left edge was exceeded
 */

/**
 * @typedef {Object} Bounding
 * @property {Number} left  left offset coordinate
 * @property {Number} top  top offset coordinate
 * @property {Number} width
 * @property {Number} height
 */

/**
 * Get time in ms
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @type {function}
 * @return {number}
 */
var getTime = Date.now || function () {
  return new Date().getTime();
};

/**
 * Returns a function, that, when invoked, will only be triggered at most once
 * during a given window of time. Normally, the throttled function will run
 * as much as it can, without ever going more than once per `wait` duration;
 * but if you'd like to disable the execution on the leading edge, pass
 * `{leading: false}`. To disable execution on the trailing edge, ditto.
 * @license https://raw.github.com/jashkenas/underscore/master/LICENSE
 * @param {function} func
 * @param {number} wait
 * @param {Object=} options
 * @returns {Function}
 */
M.throttle = function (func, wait, options) {
  var context = void 0,
      args = void 0,
      result = void 0;
  var timeout = null;
  var previous = 0;
  options || (options = {});
  var later = function () {
    previous = options.leading === false ? 0 : getTime();
    timeout = null;
    result = func.apply(context, args);
    context = args = null;
  };
  return function () {
    var now = getTime();
    if (!previous && options.leading === false) previous = now;
    var remaining = wait - (now - previous);
    context = this;
    args = arguments;
    if (remaining <= 0) {
      clearTimeout(timeout);
      timeout = null;
      previous = now;
      result = func.apply(context, args);
      context = args = null;
    } else if (!timeout && options.trailing !== false) {
      timeout = setTimeout(later, remaining);
    }
    return result;
  };
};
; /*
  v2.2.0
  2017 Julian Garnier
  Released under the MIT license
  */
var $jscomp = { scope: {} };$jscomp.defineProperty = "function" == typeof Object.defineProperties ? Object.defineProperty : function (e, r, p) {
  if (p.get || p.set) throw new TypeError("ES3 does not support getters and setters.");e != Array.prototype && e != Object.prototype && (e[r] = p.value);
};$jscomp.getGlobal = function (e) {
  return "undefined" != typeof window && window === e ? e : "undefined" != typeof global && null != global ? global : e;
};$jscomp.global = $jscomp.getGlobal(this);$jscomp.SYMBOL_PREFIX = "jscomp_symbol_";
$jscomp.initSymbol = function () {
  $jscomp.initSymbol = function () {};$jscomp.global.Symbol || ($jscomp.global.Symbol = $jscomp.Symbol);
};$jscomp.symbolCounter_ = 0;$jscomp.Symbol = function (e) {
  return $jscomp.SYMBOL_PREFIX + (e || "") + $jscomp.symbolCounter_++;
};
$jscomp.initSymbolIterator = function () {
  $jscomp.initSymbol();var e = $jscomp.global.Symbol.iterator;e || (e = $jscomp.global.Symbol.iterator = $jscomp.global.Symbol("iterator"));"function" != typeof Array.prototype[e] && $jscomp.defineProperty(Array.prototype, e, { configurable: !0, writable: !0, value: function () {
      return $jscomp.arrayIterator(this);
    } });$jscomp.initSymbolIterator = function () {};
};$jscomp.arrayIterator = function (e) {
  var r = 0;return $jscomp.iteratorPrototype(function () {
    return r < e.length ? { done: !1, value: e[r++] } : { done: !0 };
  });
};
$jscomp.iteratorPrototype = function (e) {
  $jscomp.initSymbolIterator();e = { next: e };e[$jscomp.global.Symbol.iterator] = function () {
    return this;
  };return e;
};$jscomp.array = $jscomp.array || {};$jscomp.iteratorFromArray = function (e, r) {
  $jscomp.initSymbolIterator();e instanceof String && (e += "");var p = 0,
      m = { next: function () {
      if (p < e.length) {
        var u = p++;return { value: r(u, e[u]), done: !1 };
      }m.next = function () {
        return { done: !0, value: void 0 };
      };return m.next();
    } };m[Symbol.iterator] = function () {
    return m;
  };return m;
};
$jscomp.polyfill = function (e, r, p, m) {
  if (r) {
    p = $jscomp.global;e = e.split(".");for (m = 0; m < e.length - 1; m++) {
      var u = e[m];u in p || (p[u] = {});p = p[u];
    }e = e[e.length - 1];m = p[e];r = r(m);r != m && null != r && $jscomp.defineProperty(p, e, { configurable: !0, writable: !0, value: r });
  }
};$jscomp.polyfill("Array.prototype.keys", function (e) {
  return e ? e : function () {
    return $jscomp.iteratorFromArray(this, function (e) {
      return e;
    });
  };
}, "es6-impl", "es3");var $jscomp$this = this;
(function (r) {
  M.anime = r();
})(function () {
  function e(a) {
    if (!h.col(a)) try {
      return document.querySelectorAll(a);
    } catch (c) {}
  }function r(a, c) {
    for (var d = a.length, b = 2 <= arguments.length ? arguments[1] : void 0, f = [], n = 0; n < d; n++) {
      if (n in a) {
        var k = a[n];c.call(b, k, n, a) && f.push(k);
      }
    }return f;
  }function p(a) {
    return a.reduce(function (a, d) {
      return a.concat(h.arr(d) ? p(d) : d);
    }, []);
  }function m(a) {
    if (h.arr(a)) return a;
    h.str(a) && (a = e(a) || a);return a instanceof NodeList || a instanceof HTMLCollection ? [].slice.call(a) : [a];
  }function u(a, c) {
    return a.some(function (a) {
      return a === c;
    });
  }function C(a) {
    var c = {},
        d;for (d in a) {
      c[d] = a[d];
    }return c;
  }function D(a, c) {
    var d = C(a),
        b;for (b in a) {
      d[b] = c.hasOwnProperty(b) ? c[b] : a[b];
    }return d;
  }function z(a, c) {
    var d = C(a),
        b;for (b in c) {
      d[b] = h.und(a[b]) ? c[b] : a[b];
    }return d;
  }function T(a) {
    a = a.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i, function (a, c, d, k) {
      return c + c + d + d + k + k;
    });var c = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);
    a = parseInt(c[1], 16);var d = parseInt(c[2], 16),
        c = parseInt(c[3], 16);return "rgba(" + a + "," + d + "," + c + ",1)";
  }function U(a) {
    function c(a, c, b) {
      0 > b && (b += 1);1 < b && --b;return b < 1 / 6 ? a + 6 * (c - a) * b : .5 > b ? c : b < 2 / 3 ? a + (c - a) * (2 / 3 - b) * 6 : a;
    }var d = /hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(a) || /hsla\((\d+),\s*([\d.]+)%,\s*([\d.]+)%,\s*([\d.]+)\)/g.exec(a);a = parseInt(d[1]) / 360;var b = parseInt(d[2]) / 100,
        f = parseInt(d[3]) / 100,
        d = d[4] || 1;if (0 == b) f = b = a = f;else {
      var n = .5 > f ? f * (1 + b) : f + b - f * b,
          k = 2 * f - n,
          f = c(k, n, a + 1 / 3),
          b = c(k, n, a);a = c(k, n, a - 1 / 3);
    }return "rgba(" + 255 * f + "," + 255 * b + "," + 255 * a + "," + d + ")";
  }function y(a) {
    if (a = /([\+\-]?[0-9#\.]+)(%|px|pt|em|rem|in|cm|mm|ex|ch|pc|vw|vh|vmin|vmax|deg|rad|turn)?$/.exec(a)) return a[2];
  }function V(a) {
    if (-1 < a.indexOf("translate") || "perspective" === a) return "px";if (-1 < a.indexOf("rotate") || -1 < a.indexOf("skew")) return "deg";
  }function I(a, c) {
    return h.fnc(a) ? a(c.target, c.id, c.total) : a;
  }function E(a, c) {
    if (c in a.style) return getComputedStyle(a).getPropertyValue(c.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase()) || "0";
  }function J(a, c) {
    if (h.dom(a) && u(W, c)) return "transform";if (h.dom(a) && (a.getAttribute(c) || h.svg(a) && a[c])) return "attribute";if (h.dom(a) && "transform" !== c && E(a, c)) return "css";if (null != a[c]) return "object";
  }function X(a, c) {
    var d = V(c),
        d = -1 < c.indexOf("scale") ? 1 : 0 + d;a = a.style.transform;if (!a) return d;for (var b = [], f = [], n = [], k = /(\w+)\((.+?)\)/g; b = k.exec(a);) {
      f.push(b[1]), n.push(b[2]);
    }a = r(n, function (a, b) {
      return f[b] === c;
    });return a.length ? a[0] : d;
  }function K(a, c) {
    switch (J(a, c)) {case "transform":
        return X(a, c);case "css":
        return E(a, c);case "attribute":
        return a.getAttribute(c);}return a[c] || 0;
  }function L(a, c) {
    var d = /^(\*=|\+=|-=)/.exec(a);if (!d) return a;var b = y(a) || 0;c = parseFloat(c);a = parseFloat(a.replace(d[0], ""));switch (d[0][0]) {case "+":
        return c + a + b;case "-":
        return c - a + b;case "*":
        return c * a + b;}
  }function F(a, c) {
    return Math.sqrt(Math.pow(c.x - a.x, 2) + Math.pow(c.y - a.y, 2));
  }function M(a) {
    a = a.points;for (var c = 0, d, b = 0; b < a.numberOfItems; b++) {
      var f = a.getItem(b);0 < b && (c += F(d, f));d = f;
    }return c;
  }function N(a) {
    if (a.getTotalLength) return a.getTotalLength();switch (a.tagName.toLowerCase()) {case "circle":
        return 2 * Math.PI * a.getAttribute("r");case "rect":
        return 2 * a.getAttribute("width") + 2 * a.getAttribute("height");case "line":
        return F({ x: a.getAttribute("x1"), y: a.getAttribute("y1") }, { x: a.getAttribute("x2"), y: a.getAttribute("y2") });case "polyline":
        return M(a);case "polygon":
        var c = a.points;return M(a) + F(c.getItem(c.numberOfItems - 1), c.getItem(0));}
  }function Y(a, c) {
    function d(b) {
      b = void 0 === b ? 0 : b;return a.el.getPointAtLength(1 <= c + b ? c + b : 0);
    }var b = d(),
        f = d(-1),
        n = d(1);switch (a.property) {case "x":
        return b.x;case "y":
        return b.y;
      case "angle":
        return 180 * Math.atan2(n.y - f.y, n.x - f.x) / Math.PI;}
  }function O(a, c) {
    var d = /-?\d*\.?\d+/g,
        b;b = h.pth(a) ? a.totalLength : a;if (h.col(b)) {
      if (h.rgb(b)) {
        var f = /rgb\((\d+,\s*[\d]+,\s*[\d]+)\)/g.exec(b);b = f ? "rgba(" + f[1] + ",1)" : b;
      } else b = h.hex(b) ? T(b) : h.hsl(b) ? U(b) : void 0;
    } else f = (f = y(b)) ? b.substr(0, b.length - f.length) : b, b = c && !/\s/g.test(b) ? f + c : f;b += "";return { original: b, numbers: b.match(d) ? b.match(d).map(Number) : [0], strings: h.str(a) || c ? b.split(d) : [] };
  }function P(a) {
    a = a ? p(h.arr(a) ? a.map(m) : m(a)) : [];return r(a, function (a, d, b) {
      return b.indexOf(a) === d;
    });
  }function Z(a) {
    var c = P(a);return c.map(function (a, b) {
      return { target: a, id: b, total: c.length };
    });
  }function aa(a, c) {
    var d = C(c);if (h.arr(a)) {
      var b = a.length;2 !== b || h.obj(a[0]) ? h.fnc(c.duration) || (d.duration = c.duration / b) : a = { value: a };
    }return m(a).map(function (a, b) {
      b = b ? 0 : c.delay;a = h.obj(a) && !h.pth(a) ? a : { value: a };h.und(a.delay) && (a.delay = b);return a;
    }).map(function (a) {
      return z(a, d);
    });
  }function ba(a, c) {
    var d = {},
        b;for (b in a) {
      var f = I(a[b], c);h.arr(f) && (f = f.map(function (a) {
        return I(a, c);
      }), 1 === f.length && (f = f[0]));d[b] = f;
    }d.duration = parseFloat(d.duration);d.delay = parseFloat(d.delay);return d;
  }function ca(a) {
    return h.arr(a) ? A.apply(this, a) : Q[a];
  }function da(a, c) {
    var d;return a.tweens.map(function (b) {
      b = ba(b, c);var f = b.value,
          e = K(c.target, a.name),
          k = d ? d.to.original : e,
          k = h.arr(f) ? f[0] : k,
          w = L(h.arr(f) ? f[1] : f, k),
          e = y(w) || y(k) || y(e);b.from = O(k, e);b.to = O(w, e);b.start = d ? d.end : a.offset;b.end = b.start + b.delay + b.duration;b.easing = ca(b.easing);b.elasticity = (1E3 - Math.min(Math.max(b.elasticity, 1), 999)) / 1E3;b.isPath = h.pth(f);b.isColor = h.col(b.from.original);b.isColor && (b.round = 1);return d = b;
    });
  }function ea(a, c) {
    return r(p(a.map(function (a) {
      return c.map(function (b) {
        var c = J(a.target, b.name);if (c) {
          var d = da(b, a);b = { type: c, property: b.name, animatable: a, tweens: d, duration: d[d.length - 1].end, delay: d[0].delay };
        } else b = void 0;return b;
      });
    })), function (a) {
      return !h.und(a);
    });
  }function R(a, c, d, b) {
    var f = "delay" === a;return c.length ? (f ? Math.min : Math.max).apply(Math, c.map(function (b) {
      return b[a];
    })) : f ? b.delay : d.offset + b.delay + b.duration;
  }function fa(a) {
    var c = D(ga, a),
        d = D(S, a),
        b = Z(a.targets),
        f = [],
        e = z(c, d),
        k;for (k in a) {
      e.hasOwnProperty(k) || "targets" === k || f.push({ name: k, offset: e.offset, tweens: aa(a[k], d) });
    }a = ea(b, f);return z(c, { children: [], animatables: b, animations: a, duration: R("duration", a, c, d), delay: R("delay", a, c, d) });
  }function q(a) {
    function c() {
      return window.Promise && new Promise(function (a) {
        return p = a;
      });
    }function d(a) {
      return g.reversed ? g.duration - a : a;
    }function b(a) {
      for (var b = 0, c = {}, d = g.animations, f = d.length; b < f;) {
        var e = d[b],
            k = e.animatable,
            h = e.tweens,
            n = h.length - 1,
            l = h[n];n && (l = r(h, function (b) {
          return a < b.end;
        })[0] || l);for (var h = Math.min(Math.max(a - l.start - l.delay, 0), l.duration) / l.duration, w = isNaN(h) ? 1 : l.easing(h, l.elasticity), h = l.to.strings, p = l.round, n = [], m = void 0, m = l.to.numbers.length, t = 0; t < m; t++) {
          var x = void 0,
              x = l.to.numbers[t],
              q = l.from.numbers[t],
              x = l.isPath ? Y(l.value, w * x) : q + w * (x - q);p && (l.isColor && 2 < t || (x = Math.round(x * p) / p));n.push(x);
        }if (l = h.length) for (m = h[0], w = 0; w < l; w++) {
          p = h[w + 1], t = n[w], isNaN(t) || (m = p ? m + (t + p) : m + (t + " "));
        } else m = n[0];ha[e.type](k.target, e.property, m, c, k.id);e.currentValue = m;b++;
      }if (b = Object.keys(c).length) for (d = 0; d < b; d++) {
        H || (H = E(document.body, "transform") ? "transform" : "-webkit-transform"), g.animatables[d].target.style[H] = c[d].join(" ");
      }g.currentTime = a;g.progress = a / g.duration * 100;
    }function f(a) {
      if (g[a]) g[a](g);
    }function e() {
      g.remaining && !0 !== g.remaining && g.remaining--;
    }function k(a) {
      var k = g.duration,
          n = g.offset,
          w = n + g.delay,
          r = g.currentTime,
          x = g.reversed,
          q = d(a);if (g.children.length) {
        var u = g.children,
            v = u.length;
        if (q >= g.currentTime) for (var G = 0; G < v; G++) {
          u[G].seek(q);
        } else for (; v--;) {
          u[v].seek(q);
        }
      }if (q >= w || !k) g.began || (g.began = !0, f("begin")), f("run");if (q > n && q < k) b(q);else if (q <= n && 0 !== r && (b(0), x && e()), q >= k && r !== k || !k) b(k), x || e();f("update");a >= k && (g.remaining ? (t = h, "alternate" === g.direction && (g.reversed = !g.reversed)) : (g.pause(), g.completed || (g.completed = !0, f("complete"), "Promise" in window && (p(), m = c()))), l = 0);
    }a = void 0 === a ? {} : a;var h,
        t,
        l = 0,
        p = null,
        m = c(),
        g = fa(a);g.reset = function () {
      var a = g.direction,
          c = g.loop;g.currentTime = 0;g.progress = 0;g.paused = !0;g.began = !1;g.completed = !1;g.reversed = "reverse" === a;g.remaining = "alternate" === a && 1 === c ? 2 : c;b(0);for (a = g.children.length; a--;) {
        g.children[a].reset();
      }
    };g.tick = function (a) {
      h = a;t || (t = h);k((l + h - t) * q.speed);
    };g.seek = function (a) {
      k(d(a));
    };g.pause = function () {
      var a = v.indexOf(g);-1 < a && v.splice(a, 1);g.paused = !0;
    };g.play = function () {
      g.paused && (g.paused = !1, t = 0, l = d(g.currentTime), v.push(g), B || ia());
    };g.reverse = function () {
      g.reversed = !g.reversed;t = 0;l = d(g.currentTime);
    };g.restart = function () {
      g.pause();
      g.reset();g.play();
    };g.finished = m;g.reset();g.autoplay && g.play();return g;
  }var ga = { update: void 0, begin: void 0, run: void 0, complete: void 0, loop: 1, direction: "normal", autoplay: !0, offset: 0 },
      S = { duration: 1E3, delay: 0, easing: "easeOutElastic", elasticity: 500, round: 0 },
      W = "translateX translateY translateZ rotate rotateX rotateY rotateZ scale scaleX scaleY scaleZ skewX skewY perspective".split(" "),
      H,
      h = { arr: function (a) {
      return Array.isArray(a);
    }, obj: function (a) {
      return -1 < Object.prototype.toString.call(a).indexOf("Object");
    },
    pth: function (a) {
      return h.obj(a) && a.hasOwnProperty("totalLength");
    }, svg: function (a) {
      return a instanceof SVGElement;
    }, dom: function (a) {
      return a.nodeType || h.svg(a);
    }, str: function (a) {
      return "string" === typeof a;
    }, fnc: function (a) {
      return "function" === typeof a;
    }, und: function (a) {
      return "undefined" === typeof a;
    }, hex: function (a) {
      return (/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(a)
      );
    }, rgb: function (a) {
      return (/^rgb/.test(a)
      );
    }, hsl: function (a) {
      return (/^hsl/.test(a)
      );
    }, col: function (a) {
      return h.hex(a) || h.rgb(a) || h.hsl(a);
    } },
      A = function () {
    function a(a, d, b) {
      return (((1 - 3 * b + 3 * d) * a + (3 * b - 6 * d)) * a + 3 * d) * a;
    }return function (c, d, b, f) {
      if (0 <= c && 1 >= c && 0 <= b && 1 >= b) {
        var e = new Float32Array(11);if (c !== d || b !== f) for (var k = 0; 11 > k; ++k) {
          e[k] = a(.1 * k, c, b);
        }return function (k) {
          if (c === d && b === f) return k;if (0 === k) return 0;if (1 === k) return 1;for (var h = 0, l = 1; 10 !== l && e[l] <= k; ++l) {
            h += .1;
          }--l;var l = h + (k - e[l]) / (e[l + 1] - e[l]) * .1,
              n = 3 * (1 - 3 * b + 3 * c) * l * l + 2 * (3 * b - 6 * c) * l + 3 * c;if (.001 <= n) {
            for (h = 0; 4 > h; ++h) {
              n = 3 * (1 - 3 * b + 3 * c) * l * l + 2 * (3 * b - 6 * c) * l + 3 * c;if (0 === n) break;var m = a(l, c, b) - k,
                  l = l - m / n;
            }k = l;
          } else if (0 === n) k = l;else {
            var l = h,
                h = h + .1,
                g = 0;do {
              m = l + (h - l) / 2, n = a(m, c, b) - k, 0 < n ? h = m : l = m;
            } while (1e-7 < Math.abs(n) && 10 > ++g);k = m;
          }return a(k, d, f);
        };
      }
    };
  }(),
      Q = function () {
    function a(a, b) {
      return 0 === a || 1 === a ? a : -Math.pow(2, 10 * (a - 1)) * Math.sin(2 * (a - 1 - b / (2 * Math.PI) * Math.asin(1)) * Math.PI / b);
    }var c = "Quad Cubic Quart Quint Sine Expo Circ Back Elastic".split(" "),
        d = { In: [[.55, .085, .68, .53], [.55, .055, .675, .19], [.895, .03, .685, .22], [.755, .05, .855, .06], [.47, 0, .745, .715], [.95, .05, .795, .035], [.6, .04, .98, .335], [.6, -.28, .735, .045], a], Out: [[.25, .46, .45, .94], [.215, .61, .355, 1], [.165, .84, .44, 1], [.23, 1, .32, 1], [.39, .575, .565, 1], [.19, 1, .22, 1], [.075, .82, .165, 1], [.175, .885, .32, 1.275], function (b, c) {
        return 1 - a(1 - b, c);
      }], InOut: [[.455, .03, .515, .955], [.645, .045, .355, 1], [.77, 0, .175, 1], [.86, 0, .07, 1], [.445, .05, .55, .95], [1, 0, 0, 1], [.785, .135, .15, .86], [.68, -.55, .265, 1.55], function (b, c) {
        return .5 > b ? a(2 * b, c) / 2 : 1 - a(-2 * b + 2, c) / 2;
      }] },
        b = { linear: A(.25, .25, .75, .75) },
        f = {},
        e;for (e in d) {
      f.type = e, d[f.type].forEach(function (a) {
        return function (d, f) {
          b["ease" + a.type + c[f]] = h.fnc(d) ? d : A.apply($jscomp$this, d);
        };
      }(f)), f = { type: f.type };
    }return b;
  }(),
      ha = { css: function (a, c, d) {
      return a.style[c] = d;
    }, attribute: function (a, c, d) {
      return a.setAttribute(c, d);
    }, object: function (a, c, d) {
      return a[c] = d;
    }, transform: function (a, c, d, b, f) {
      b[f] || (b[f] = []);b[f].push(c + "(" + d + ")");
    } },
      v = [],
      B = 0,
      ia = function () {
    function a() {
      B = requestAnimationFrame(c);
    }function c(c) {
      var b = v.length;if (b) {
        for (var d = 0; d < b;) {
          v[d] && v[d].tick(c), d++;
        }a();
      } else cancelAnimationFrame(B), B = 0;
    }return a;
  }();q.version = "2.2.0";q.speed = 1;q.running = v;q.remove = function (a) {
    a = P(a);for (var c = v.length; c--;) {
      for (var d = v[c], b = d.animations, f = b.length; f--;) {
        u(a, b[f].animatable.target) && (b.splice(f, 1), b.length || d.pause());
      }
    }
  };q.getValue = K;q.path = function (a, c) {
    var d = h.str(a) ? e(a)[0] : a,
        b = c || 100;return function (a) {
      return { el: d, property: a, totalLength: N(d) * (b / 100) };
    };
  };q.setDashoffset = function (a) {
    var c = N(a);a.setAttribute("stroke-dasharray", c);return c;
  };q.bezier = A;q.easings = Q;q.timeline = function (a) {
    var c = q(a);c.pause();c.duration = 0;c.add = function (d) {
      c.children.forEach(function (a) {
        a.began = !0;a.completed = !0;
      });m(d).forEach(function (b) {
        var d = z(b, D(S, a || {}));d.targets = d.targets || a.targets;b = c.duration;var e = d.offset;d.autoplay = !1;d.direction = c.direction;d.offset = h.und(e) ? b : L(e, b);c.began = !0;c.completed = !0;c.seek(d.offset);d = q(d);d.began = !0;d.completed = !0;d.duration > b && (c.duration = d.duration);c.children.push(d);
      });c.seek(0);c.reset();c.autoplay && c.restart();return c;
    };return c;
  };q.random = function (a, c) {
    return Math.floor(Math.random() * (c - a + 1)) + a;
  };return q;
});
;(function ($, anim) {
  'use strict';

  var _defaults = {
    accordion: true,
    onOpenStart: undefined,
    onOpenEnd: undefined,
    onCloseStart: undefined,
    onCloseEnd: undefined,
    inDuration: 300,
    outDuration: 300
  };

  /**
   * @class
   *
   */

  var Collapsible = function (_Component) {
    _inherits(Collapsible, _Component);

    /**
     * Construct Collapsible instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Collapsible(el, options) {
      _classCallCheck(this, Collapsible);

      var _this3 = _possibleConstructorReturn(this, (Collapsible.__proto__ || Object.getPrototypeOf(Collapsible)).call(this, Collapsible, el, options));

      _this3.el.M_Collapsible = _this3;

      /**
       * Options for the collapsible
       * @member Collapsible#options
       * @prop {Boolean} [accordion=false] - Type of the collapsible
       * @prop {Function} onOpenStart - Callback function called before collapsible is opened
       * @prop {Function} onOpenEnd - Callback function called after collapsible is opened
       * @prop {Function} onCloseStart - Callback function called before collapsible is closed
       * @prop {Function} onCloseEnd - Callback function called after collapsible is closed
       * @prop {Number} inDuration - Transition in duration in milliseconds.
       * @prop {Number} outDuration - Transition duration in milliseconds.
       */
      _this3.options = $.extend({}, Collapsible.defaults, options);

      // Setup tab indices
      _this3.$headers = _this3.$el.children('li').children('.collapsible-header');
      _this3.$headers.attr('tabindex', 0);

      _this3._setupEventHandlers();

      // Open first active
      var $activeBodies = _this3.$el.children('li.active').children('.collapsible-body');
      if (_this3.options.accordion) {
        // Handle Accordion
        $activeBodies.first().css('display', 'block');
      } else {
        // Handle Expandables
        $activeBodies.css('display', 'block');
      }
      return _this3;
    }

    _createClass(Collapsible, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_Collapsible = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this4 = this;

        this._handleCollapsibleClickBound = this._handleCollapsibleClick.bind(this);
        this._handleCollapsibleKeydownBound = this._handleCollapsibleKeydown.bind(this);
        this.el.addEventListener('click', this._handleCollapsibleClickBound);
        this.$headers.each(function (header) {
          header.addEventListener('keydown', _this4._handleCollapsibleKeydownBound);
        });
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this5 = this;

        this.el.removeEventListener('click', this._handleCollapsibleClickBound);
        this.$headers.each(function (header) {
          header.removeEventListener('keydown', _this5._handleCollapsibleKeydownBound);
        });
      }

      /**
       * Handle Collapsible Click
       * @param {Event} e
       */

    }, {
      key: "_handleCollapsibleClick",
      value: function _handleCollapsibleClick(e) {
        var $header = $(e.target).closest('.collapsible-header');
        if (e.target && $header.length) {
          var $collapsible = $header.closest('.collapsible');
          if ($collapsible[0] === this.el) {
            var $collapsibleLi = $header.closest('li');
            var $collapsibleLis = $collapsible.children('li');
            var isActive = $collapsibleLi[0].classList.contains('active');
            var index = $collapsibleLis.index($collapsibleLi);

            if (isActive) {
              this.close(index);
            } else {
              this.open(index);
            }
          }
        }
      }

      /**
       * Handle Collapsible Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleCollapsibleKeydown",
      value: function _handleCollapsibleKeydown(e) {
        if (e.keyCode === 13) {
          this._handleCollapsibleClickBound(e);
        }
      }

      /**
       * Animate in collapsible slide
       * @param {Number} index - 0th index of slide
       */

    }, {
      key: "_animateIn",
      value: function _animateIn(index) {
        var _this6 = this;

        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length) {
          var $body = $collapsibleLi.children('.collapsible-body');

          anim.remove($body[0]);
          $body.css({
            display: 'block',
            overflow: 'hidden',
            height: 0,
            paddingTop: '',
            paddingBottom: ''
          });

          var pTop = $body.css('padding-top');
          var pBottom = $body.css('padding-bottom');
          var finalHeight = $body[0].scrollHeight;
          $body.css({
            paddingTop: 0,
            paddingBottom: 0
          });

          anim({
            targets: $body[0],
            height: finalHeight,
            paddingTop: pTop,
            paddingBottom: pBottom,
            duration: this.options.inDuration,
            easing: 'easeInOutCubic',
            complete: function (anim) {
              $body.css({
                overflow: '',
                paddingTop: '',
                paddingBottom: '',
                height: ''
              });

              // onOpenEnd callback
              if (typeof _this6.options.onOpenEnd === 'function') {
                _this6.options.onOpenEnd.call(_this6, $collapsibleLi[0]);
              }
            }
          });
        }
      }

      /**
       * Animate out collapsible slide
       * @param {Number} index - 0th index of slide to open
       */

    }, {
      key: "_animateOut",
      value: function _animateOut(index) {
        var _this7 = this;

        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length) {
          var $body = $collapsibleLi.children('.collapsible-body');
          anim.remove($body[0]);
          $body.css('overflow', 'hidden');
          anim({
            targets: $body[0],
            height: 0,
            paddingTop: 0,
            paddingBottom: 0,
            duration: this.options.outDuration,
            easing: 'easeInOutCubic',
            complete: function () {
              $body.css({
                height: '',
                overflow: '',
                padding: '',
                display: ''
              });

              // onCloseEnd callback
              if (typeof _this7.options.onCloseEnd === 'function') {
                _this7.options.onCloseEnd.call(_this7, $collapsibleLi[0]);
              }
            }
          });
        }
      }

      /**
       * Open Collapsible
       * @param {Number} index - 0th index of slide
       */

    }, {
      key: "open",
      value: function open(index) {
        var _this8 = this;

        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length && !$collapsibleLi[0].classList.contains('active')) {
          // onOpenStart callback
          if (typeof this.options.onOpenStart === 'function') {
            this.options.onOpenStart.call(this, $collapsibleLi[0]);
          }

          // Handle accordion behavior
          if (this.options.accordion) {
            var $collapsibleLis = this.$el.children('li');
            var $activeLis = this.$el.children('li.active');
            $activeLis.each(function (el) {
              var index = $collapsibleLis.index($(el));
              _this8.close(index);
            });
          }

          // Animate in
          $collapsibleLi[0].classList.add('active');
          this._animateIn(index);
        }
      }

      /**
       * Close Collapsible
       * @param {Number} index - 0th index of slide
       */

    }, {
      key: "close",
      value: function close(index) {
        var $collapsibleLi = this.$el.children('li').eq(index);
        if ($collapsibleLi.length && $collapsibleLi[0].classList.contains('active')) {
          // onCloseStart callback
          if (typeof this.options.onCloseStart === 'function') {
            this.options.onCloseStart.call(this, $collapsibleLi[0]);
          }

          // Animate out
          $collapsibleLi[0].classList.remove('active');
          this._animateOut(index);
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Collapsible.__proto__ || Object.getPrototypeOf(Collapsible), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Collapsible;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Collapsible;
  }(Component);

  M.Collapsible = Collapsible;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Collapsible, 'collapsible', 'M_Collapsible');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    alignment: 'left',
    autoFocus: true,
    constrainWidth: true,
    container: null,
    coverTrigger: true,
    closeOnClick: true,
    hover: false,
    inDuration: 150,
    outDuration: 250,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    onItemClick: null
  };

  /**
   * @class
   */

  var Dropdown = function (_Component2) {
    _inherits(Dropdown, _Component2);

    function Dropdown(el, options) {
      _classCallCheck(this, Dropdown);

      var _this9 = _possibleConstructorReturn(this, (Dropdown.__proto__ || Object.getPrototypeOf(Dropdown)).call(this, Dropdown, el, options));

      _this9.el.M_Dropdown = _this9;
      Dropdown._dropdowns.push(_this9);

      _this9.id = M.getIdFromTrigger(el);
      _this9.dropdownEl = document.getElementById(_this9.id);
      _this9.$dropdownEl = $(_this9.dropdownEl);

      /**
       * Options for the dropdown
       * @member Dropdown#options
       * @prop {String} [alignment='left'] - Edge which the dropdown is aligned to
       * @prop {Boolean} [autoFocus=true] - Automatically focus dropdown el for keyboard
       * @prop {Boolean} [constrainWidth=true] - Constrain width to width of the button
       * @prop {Element} container - Container element to attach dropdown to (optional)
       * @prop {Boolean} [coverTrigger=true] - Place dropdown over trigger
       * @prop {Boolean} [closeOnClick=true] - Close on click of dropdown item
       * @prop {Boolean} [hover=false] - Open dropdown on hover
       * @prop {Number} [inDuration=150] - Duration of open animation in ms
       * @prop {Number} [outDuration=250] - Duration of close animation in ms
       * @prop {Function} onOpenStart - Function called when dropdown starts opening
       * @prop {Function} onOpenEnd - Function called when dropdown finishes opening
       * @prop {Function} onCloseStart - Function called when dropdown starts closing
       * @prop {Function} onCloseEnd - Function called when dropdown finishes closing
       */
      _this9.options = $.extend({}, Dropdown.defaults, options);

      /**
       * Describes open/close state of dropdown
       * @type {Boolean}
       */
      _this9.isOpen = false;

      /**
       * Describes if dropdown content is scrollable
       * @type {Boolean}
       */
      _this9.isScrollable = false;

      /**
       * Describes if touch moving on dropdown content
       * @type {Boolean}
       */
      _this9.isTouchMoving = false;

      _this9.focusedIndex = -1;
      _this9.filterQuery = [];

      // Move dropdown-content after dropdown-trigger
      if (!!_this9.options.container) {
        $(_this9.options.container).append(_this9.dropdownEl);
      } else {
        _this9.$el.after(_this9.dropdownEl);
      }

      _this9._makeDropdownFocusable();
      _this9._resetFilterQueryBound = _this9._resetFilterQuery.bind(_this9);
      _this9._handleDocumentClickBound = _this9._handleDocumentClick.bind(_this9);
      _this9._handleDocumentTouchmoveBound = _this9._handleDocumentTouchmove.bind(_this9);
      _this9._handleDropdownClickBound = _this9._handleDropdownClick.bind(_this9);
      _this9._handleDropdownKeydownBound = _this9._handleDropdownKeydown.bind(_this9);
      _this9._handleTriggerKeydownBound = _this9._handleTriggerKeydown.bind(_this9);
      _this9._setupEventHandlers();
      return _this9;
    }

    _createClass(Dropdown, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._resetDropdownStyles();
        this._removeEventHandlers();
        Dropdown._dropdowns.splice(Dropdown._dropdowns.indexOf(this), 1);
        this.el.M_Dropdown = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        // Trigger keydown handler
        this.el.addEventListener('keydown', this._handleTriggerKeydownBound);

        // Item click handler
        this.dropdownEl.addEventListener('click', this._handleDropdownClickBound);

        // Hover event handlers
        if (this.options.hover) {
          this._handleMouseEnterBound = this._handleMouseEnter.bind(this);
          this.el.addEventListener('mouseenter', this._handleMouseEnterBound);
          this._handleMouseLeaveBound = this._handleMouseLeave.bind(this);
          this.el.addEventListener('mouseleave', this._handleMouseLeaveBound);
          this.dropdownEl.addEventListener('mouseleave', this._handleMouseLeaveBound);

          // Click event handlers
        } else {
          this._handleClickBound = this._handleClick.bind(this);
          this.el.addEventListener('click', this._handleClickBound);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('keydown', this._handleTriggerKeydownBound);
        this.dropdownEl.removeEventListener('click', this._handleDropdownClickBound);

        if (this.options.hover) {
          this.el.removeEventListener('mouseenter', this._handleMouseEnterBound);
          this.el.removeEventListener('mouseleave', this._handleMouseLeaveBound);
          this.dropdownEl.removeEventListener('mouseleave', this._handleMouseLeaveBound);
        } else {
          this.el.removeEventListener('click', this._handleClickBound);
        }
      }
    }, {
      key: "_setupTemporaryEventHandlers",
      value: function _setupTemporaryEventHandlers() {
        // Use capture phase event handler to prevent click
        document.body.addEventListener('click', this._handleDocumentClickBound, true);
        document.body.addEventListener('touchend', this._handleDocumentClickBound);
        document.body.addEventListener('touchmove', this._handleDocumentTouchmoveBound);
        this.dropdownEl.addEventListener('keydown', this._handleDropdownKeydownBound);
      }
    }, {
      key: "_removeTemporaryEventHandlers",
      value: function _removeTemporaryEventHandlers() {
        // Use capture phase event handler to prevent click
        document.body.removeEventListener('click', this._handleDocumentClickBound, true);
        document.body.removeEventListener('touchend', this._handleDocumentClickBound);
        document.body.removeEventListener('touchmove', this._handleDocumentTouchmoveBound);
        this.dropdownEl.removeEventListener('keydown', this._handleDropdownKeydownBound);
      }
    }, {
      key: "_handleClick",
      value: function _handleClick(e) {
        e.preventDefault();
        this.open();
      }
    }, {
      key: "_handleMouseEnter",
      value: function _handleMouseEnter() {
        this.open();
      }
    }, {
      key: "_handleMouseLeave",
      value: function _handleMouseLeave(e) {
        var toEl = e.toElement || e.relatedTarget;
        var leaveToDropdownContent = !!$(toEl).closest('.dropdown-content').length;
        var leaveToActiveDropdownTrigger = false;

        var $closestTrigger = $(toEl).closest('.dropdown-trigger');
        if ($closestTrigger.length && !!$closestTrigger[0].M_Dropdown && $closestTrigger[0].M_Dropdown.isOpen) {
          leaveToActiveDropdownTrigger = true;
        }

        // Close hover dropdown if mouse did not leave to either active dropdown-trigger or dropdown-content
        if (!leaveToActiveDropdownTrigger && !leaveToDropdownContent) {
          this.close();
        }
      }
    }, {
      key: "_handleDocumentClick",
      value: function _handleDocumentClick(e) {
        var _this10 = this;

        var $target = $(e.target);
        if (this.options.closeOnClick && $target.closest('.dropdown-content').length && !this.isTouchMoving) {
          // isTouchMoving to check if scrolling on mobile.
          setTimeout(function () {
            _this10.close();
          }, 0);
        } else if ($target.closest('.dropdown-trigger').length || !$target.closest('.dropdown-content').length) {
          setTimeout(function () {
            _this10.close();
          }, 0);
        }
        this.isTouchMoving = false;
      }
    }, {
      key: "_handleTriggerKeydown",
      value: function _handleTriggerKeydown(e) {
        // ARROW DOWN OR ENTER WHEN SELECT IS CLOSED - open Dropdown
        if ((e.which === M.keys.ARROW_DOWN || e.which === M.keys.ENTER) && !this.isOpen) {
          e.preventDefault();
          this.open();
        }
      }

      /**
       * Handle Document Touchmove
       * @param {Event} e
       */

    }, {
      key: "_handleDocumentTouchmove",
      value: function _handleDocumentTouchmove(e) {
        var $target = $(e.target);
        if ($target.closest('.dropdown-content').length) {
          this.isTouchMoving = true;
        }
      }

      /**
       * Handle Dropdown Click
       * @param {Event} e
       */

    }, {
      key: "_handleDropdownClick",
      value: function _handleDropdownClick(e) {
        // onItemClick callback
        if (typeof this.options.onItemClick === 'function') {
          var itemEl = $(e.target).closest('li')[0];
          this.options.onItemClick.call(this, itemEl);
        }
      }

      /**
       * Handle Dropdown Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleDropdownKeydown",
      value: function _handleDropdownKeydown(e) {
        if (e.which === M.keys.TAB) {
          e.preventDefault();
          this.close();

          // Navigate down dropdown list
        } else if ((e.which === M.keys.ARROW_DOWN || e.which === M.keys.ARROW_UP) && this.isOpen) {
          e.preventDefault();
          var direction = e.which === M.keys.ARROW_DOWN ? 1 : -1;
          var newFocusedIndex = this.focusedIndex;
          var foundNewIndex = false;
          do {
            newFocusedIndex = newFocusedIndex + direction;

            if (!!this.dropdownEl.children[newFocusedIndex] && this.dropdownEl.children[newFocusedIndex].tabIndex !== -1) {
              foundNewIndex = true;
              break;
            }
          } while (newFocusedIndex < this.dropdownEl.children.length && newFocusedIndex >= 0);

          if (foundNewIndex) {
            this.focusedIndex = newFocusedIndex;
            this._focusFocusedItem();
          }

          // ENTER selects choice on focused item
        } else if (e.which === M.keys.ENTER && this.isOpen) {
          // Search for <a> and <button>
          var focusedElement = this.dropdownEl.children[this.focusedIndex];
          var $activatableElement = $(focusedElement).find('a, button').first();

          // Click a or button tag if exists, otherwise click li tag
          if (!!$activatableElement.length) {
            $activatableElement[0].click();
          } else if (!!focusedElement) {
            focusedElement.click();
          }

          // Close dropdown on ESC
        } else if (e.which === M.keys.ESC && this.isOpen) {
          e.preventDefault();
          this.close();
        }

        // CASE WHEN USER TYPE LETTERS
        var letter = String.fromCharCode(e.which).toLowerCase(),
            nonLetters = [9, 13, 27, 38, 40];
        if (letter && nonLetters.indexOf(e.which) === -1) {
          this.filterQuery.push(letter);

          var string = this.filterQuery.join(''),
              newOptionEl = $(this.dropdownEl).find('li').filter(function (el) {
            return $(el).text().toLowerCase().indexOf(string) === 0;
          })[0];

          if (newOptionEl) {
            this.focusedIndex = $(newOptionEl).index();
            this._focusFocusedItem();
          }
        }

        this.filterTimeout = setTimeout(this._resetFilterQueryBound, 1000);
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_resetFilterQuery",
      value: function _resetFilterQuery() {
        this.filterQuery = [];
      }
    }, {
      key: "_resetDropdownStyles",
      value: function _resetDropdownStyles() {
        this.$dropdownEl.css({
          display: '',
          width: '',
          height: '',
          left: '',
          top: '',
          'transform-origin': '',
          transform: '',
          opacity: ''
        });
      }
    }, {
      key: "_makeDropdownFocusable",
      value: function _makeDropdownFocusable() {
        // Needed for arrow key navigation
        this.dropdownEl.tabIndex = 0;

        // Only set tabindex if it hasn't been set by user
        $(this.dropdownEl).children().each(function (el) {
          if (!el.getAttribute('tabindex')) {
            el.setAttribute('tabindex', 0);
          }
        });
      }
    }, {
      key: "_focusFocusedItem",
      value: function _focusFocusedItem() {
        if (this.focusedIndex >= 0 && this.focusedIndex < this.dropdownEl.children.length && this.options.autoFocus) {
          this.dropdownEl.children[this.focusedIndex].focus();
        }
      }
    }, {
      key: "_getDropdownPosition",
      value: function _getDropdownPosition() {
        var offsetParentBRect = this.el.offsetParent.getBoundingClientRect();
        var triggerBRect = this.el.getBoundingClientRect();
        var dropdownBRect = this.dropdownEl.getBoundingClientRect();

        var idealHeight = dropdownBRect.height;
        var idealWidth = dropdownBRect.width;
        var idealXPos = triggerBRect.left - dropdownBRect.left;
        var idealYPos = triggerBRect.top - dropdownBRect.top;

        var dropdownBounds = {
          left: idealXPos,
          top: idealYPos,
          height: idealHeight,
          width: idealWidth
        };

        // Countainer here will be closest ancestor with overflow: hidden
        var closestOverflowParent = !!this.dropdownEl.offsetParent ? this.dropdownEl.offsetParent : this.dropdownEl.parentNode;

        var alignments = M.checkPossibleAlignments(this.el, closestOverflowParent, dropdownBounds, this.options.coverTrigger ? 0 : triggerBRect.height);

        var verticalAlignment = 'top';
        var horizontalAlignment = this.options.alignment;
        idealYPos += this.options.coverTrigger ? 0 : triggerBRect.height;

        // Reset isScrollable
        this.isScrollable = false;

        if (!alignments.top) {
          if (alignments.bottom) {
            verticalAlignment = 'bottom';
          } else {
            this.isScrollable = true;

            // Determine which side has most space and cutoff at correct height
            if (alignments.spaceOnTop > alignments.spaceOnBottom) {
              verticalAlignment = 'bottom';
              idealHeight += alignments.spaceOnTop;
              idealYPos -= alignments.spaceOnTop;
            } else {
              idealHeight += alignments.spaceOnBottom;
            }
          }
        }

        // If preferred horizontal alignment is possible
        if (!alignments[horizontalAlignment]) {
          var oppositeAlignment = horizontalAlignment === 'left' ? 'right' : 'left';
          if (alignments[oppositeAlignment]) {
            horizontalAlignment = oppositeAlignment;
          } else {
            // Determine which side has most space and cutoff at correct height
            if (alignments.spaceOnLeft > alignments.spaceOnRight) {
              horizontalAlignment = 'right';
              idealWidth += alignments.spaceOnLeft;
              idealXPos -= alignments.spaceOnLeft;
            } else {
              horizontalAlignment = 'left';
              idealWidth += alignments.spaceOnRight;
            }
          }
        }

        if (verticalAlignment === 'bottom') {
          idealYPos = idealYPos - dropdownBRect.height + (this.options.coverTrigger ? triggerBRect.height : 0);
        }
        if (horizontalAlignment === 'right') {
          idealXPos = idealXPos - dropdownBRect.width + triggerBRect.width;
        }
        return {
          x: idealXPos,
          y: idealYPos,
          verticalAlignment: verticalAlignment,
          horizontalAlignment: horizontalAlignment,
          height: idealHeight,
          width: idealWidth
        };
      }

      /**
       * Animate in dropdown
       */

    }, {
      key: "_animateIn",
      value: function _animateIn() {
        var _this11 = this;

        anim.remove(this.dropdownEl);
        anim({
          targets: this.dropdownEl,
          opacity: {
            value: [0, 1],
            easing: 'easeOutQuad'
          },
          scaleX: [0.3, 1],
          scaleY: [0.3, 1],
          duration: this.options.inDuration,
          easing: 'easeOutQuint',
          complete: function (anim) {
            if (_this11.options.autoFocus) {
              _this11.dropdownEl.focus();
            }

            // onOpenEnd callback
            if (typeof _this11.options.onOpenEnd === 'function') {
              _this11.options.onOpenEnd.call(_this11, _this11.el);
            }
          }
        });
      }

      /**
       * Animate out dropdown
       */

    }, {
      key: "_animateOut",
      value: function _animateOut() {
        var _this12 = this;

        anim.remove(this.dropdownEl);
        anim({
          targets: this.dropdownEl,
          opacity: {
            value: 0,
            easing: 'easeOutQuint'
          },
          scaleX: 0.3,
          scaleY: 0.3,
          duration: this.options.outDuration,
          easing: 'easeOutQuint',
          complete: function (anim) {
            _this12._resetDropdownStyles();

            // onCloseEnd callback
            if (typeof _this12.options.onCloseEnd === 'function') {
              _this12.options.onCloseEnd.call(_this12, _this12.el);
            }
          }
        });
      }

      /**
       * Place dropdown
       */

    }, {
      key: "_placeDropdown",
      value: function _placeDropdown() {
        // Set width before calculating positionInfo
        var idealWidth = this.options.constrainWidth ? this.el.getBoundingClientRect().width : this.dropdownEl.getBoundingClientRect().width;
        this.dropdownEl.style.width = idealWidth + 'px';

        var positionInfo = this._getDropdownPosition();
        this.dropdownEl.style.left = positionInfo.x + 'px';
        this.dropdownEl.style.top = positionInfo.y + 'px';
        this.dropdownEl.style.height = positionInfo.height + 'px';
        this.dropdownEl.style.width = positionInfo.width + 'px';
        this.dropdownEl.style.transformOrigin = (positionInfo.horizontalAlignment === 'left' ? '0' : '100%') + " " + (positionInfo.verticalAlignment === 'top' ? '0' : '100%');
      }

      /**
       * Open Dropdown
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }
        this.isOpen = true;

        // onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el);
        }

        // Reset styles
        this._resetDropdownStyles();
        this.dropdownEl.style.display = 'block';

        this._placeDropdown();
        this._animateIn();
        this._setupTemporaryEventHandlers();
      }

      /**
       * Close Dropdown
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }
        this.isOpen = false;
        this.focusedIndex = -1;

        // onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        this._animateOut();
        this._removeTemporaryEventHandlers();

        if (this.options.autoFocus) {
          this.el.focus();
        }
      }

      /**
       * Recalculate dimensions
       */

    }, {
      key: "recalculateDimensions",
      value: function recalculateDimensions() {
        if (this.isOpen) {
          this.$dropdownEl.css({
            width: '',
            height: '',
            left: '',
            top: '',
            'transform-origin': ''
          });
          this._placeDropdown();
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Dropdown.__proto__ || Object.getPrototypeOf(Dropdown), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Dropdown;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Dropdown;
  }(Component);

  /**
   * @static
   * @memberof Dropdown
   */


  Dropdown._dropdowns = [];

  M.Dropdown = Dropdown;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Dropdown, 'dropdown', 'M_Dropdown');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    opacity: 0.5,
    inDuration: 250,
    outDuration: 250,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    preventScrolling: true,
    dismissible: true,
    startingTop: '4%',
    endingTop: '10%'
  };

  /**
   * @class
   *
   */

  var Modal = function (_Component3) {
    _inherits(Modal, _Component3);

    /**
     * Construct Modal instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Modal(el, options) {
      _classCallCheck(this, Modal);

      var _this13 = _possibleConstructorReturn(this, (Modal.__proto__ || Object.getPrototypeOf(Modal)).call(this, Modal, el, options));

      _this13.el.M_Modal = _this13;

      /**
       * Options for the modal
       * @member Modal#options
       * @prop {Number} [opacity=0.5] - Opacity of the modal overlay
       * @prop {Number} [inDuration=250] - Length in ms of enter transition
       * @prop {Number} [outDuration=250] - Length in ms of exit transition
       * @prop {Function} onOpenStart - Callback function called before modal is opened
       * @prop {Function} onOpenEnd - Callback function called after modal is opened
       * @prop {Function} onCloseStart - Callback function called before modal is closed
       * @prop {Function} onCloseEnd - Callback function called after modal is closed
       * @prop {Boolean} [dismissible=true] - Allow modal to be dismissed by keyboard or overlay click
       * @prop {String} [startingTop='4%'] - startingTop
       * @prop {String} [endingTop='10%'] - endingTop
       */
      _this13.options = $.extend({}, Modal.defaults, options);

      /**
       * Describes open/close state of modal
       * @type {Boolean}
       */
      _this13.isOpen = false;

      _this13.id = _this13.$el.attr('id');
      _this13._openingTrigger = undefined;
      _this13.$overlay = $('<div class="modal-overlay"></div>');
      _this13.el.tabIndex = 0;
      _this13._nthModalOpened = 0;

      Modal._count++;
      _this13._setupEventHandlers();
      return _this13;
    }

    _createClass(Modal, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        Modal._count--;
        this._removeEventHandlers();
        this.el.removeAttribute('style');
        this.$overlay.remove();
        this.el.M_Modal = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleOverlayClickBound = this._handleOverlayClick.bind(this);
        this._handleModalCloseClickBound = this._handleModalCloseClick.bind(this);

        if (Modal._count === 1) {
          document.body.addEventListener('click', this._handleTriggerClick);
        }
        this.$overlay[0].addEventListener('click', this._handleOverlayClickBound);
        this.el.addEventListener('click', this._handleModalCloseClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (Modal._count === 0) {
          document.body.removeEventListener('click', this._handleTriggerClick);
        }
        this.$overlay[0].removeEventListener('click', this._handleOverlayClickBound);
        this.el.removeEventListener('click', this._handleModalCloseClickBound);
      }

      /**
       * Handle Trigger Click
       * @param {Event} e
       */

    }, {
      key: "_handleTriggerClick",
      value: function _handleTriggerClick(e) {
        var $trigger = $(e.target).closest('.modal-trigger');
        if ($trigger.length) {
          var modalId = M.getIdFromTrigger($trigger[0]);
          var modalInstance = document.getElementById(modalId).M_Modal;
          if (modalInstance) {
            modalInstance.open($trigger);
          }
          e.preventDefault();
        }
      }

      /**
       * Handle Overlay Click
       */

    }, {
      key: "_handleOverlayClick",
      value: function _handleOverlayClick() {
        if (this.options.dismissible) {
          this.close();
        }
      }

      /**
       * Handle Modal Close Click
       * @param {Event} e
       */

    }, {
      key: "_handleModalCloseClick",
      value: function _handleModalCloseClick(e) {
        var $closeTrigger = $(e.target).closest('.modal-close');
        if ($closeTrigger.length) {
          this.close();
        }
      }

      /**
       * Handle Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleKeydown",
      value: function _handleKeydown(e) {
        // ESC key
        if (e.keyCode === 27 && this.options.dismissible) {
          this.close();
        }
      }

      /**
       * Handle Focus
       * @param {Event} e
       */

    }, {
      key: "_handleFocus",
      value: function _handleFocus(e) {
        // Only trap focus if this modal is the last model opened (prevents loops in nested modals).
        if (!this.el.contains(e.target) && this._nthModalOpened === Modal._modalsOpen) {
          this.el.focus();
        }
      }

      /**
       * Animate in modal
       */

    }, {
      key: "_animateIn",
      value: function _animateIn() {
        var _this14 = this;

        // Set initial styles
        $.extend(this.el.style, {
          display: 'block',
          opacity: 0
        });
        $.extend(this.$overlay[0].style, {
          display: 'block',
          opacity: 0
        });

        // Animate overlay
        anim({
          targets: this.$overlay[0],
          opacity: this.options.opacity,
          duration: this.options.inDuration,
          easing: 'easeOutQuad'
        });

        // Define modal animation options
        var enterAnimOptions = {
          targets: this.el,
          duration: this.options.inDuration,
          easing: 'easeOutCubic',
          // Handle modal onOpenEnd callback
          complete: function () {
            if (typeof _this14.options.onOpenEnd === 'function') {
              _this14.options.onOpenEnd.call(_this14, _this14.el, _this14._openingTrigger);
            }
          }
        };

        // Bottom sheet animation
        if (this.el.classList.contains('bottom-sheet')) {
          $.extend(enterAnimOptions, {
            bottom: 0,
            opacity: 1
          });
          anim(enterAnimOptions);

          // Normal modal animation
        } else {
          $.extend(enterAnimOptions, {
            top: [this.options.startingTop, this.options.endingTop],
            opacity: 1,
            scaleX: [0.8, 1],
            scaleY: [0.8, 1]
          });
          anim(enterAnimOptions);
        }
      }

      /**
       * Animate out modal
       */

    }, {
      key: "_animateOut",
      value: function _animateOut() {
        var _this15 = this;

        // Animate overlay
        anim({
          targets: this.$overlay[0],
          opacity: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuart'
        });

        // Define modal animation options
        var exitAnimOptions = {
          targets: this.el,
          duration: this.options.outDuration,
          easing: 'easeOutCubic',
          // Handle modal ready callback
          complete: function () {
            _this15.el.style.display = 'none';
            _this15.$overlay.remove();

            // Call onCloseEnd callback
            if (typeof _this15.options.onCloseEnd === 'function') {
              _this15.options.onCloseEnd.call(_this15, _this15.el);
            }
          }
        };

        // Bottom sheet animation
        if (this.el.classList.contains('bottom-sheet')) {
          $.extend(exitAnimOptions, {
            bottom: '-100%',
            opacity: 0
          });
          anim(exitAnimOptions);

          // Normal modal animation
        } else {
          $.extend(exitAnimOptions, {
            top: [this.options.endingTop, this.options.startingTop],
            opacity: 0,
            scaleX: 0.8,
            scaleY: 0.8
          });
          anim(exitAnimOptions);
        }
      }

      /**
       * Open Modal
       * @param {cash} [$trigger]
       */

    }, {
      key: "open",
      value: function open($trigger) {
        if (this.isOpen) {
          return;
        }

        this.isOpen = true;
        Modal._modalsOpen++;
        this._nthModalOpened = Modal._modalsOpen;

        // Set Z-Index based on number of currently open modals
        this.$overlay[0].style.zIndex = 1000 + Modal._modalsOpen * 2;
        this.el.style.zIndex = 1000 + Modal._modalsOpen * 2 + 1;

        // Set opening trigger, undefined indicates modal was opened by javascript
        this._openingTrigger = !!$trigger ? $trigger[0] : undefined;

        // onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el, this._openingTrigger);
        }

        if (this.options.preventScrolling) {
          document.body.style.overflow = 'hidden';
        }

        this.el.classList.add('open');
        this.el.insertAdjacentElement('afterend', this.$overlay[0]);

        if (this.options.dismissible) {
          this._handleKeydownBound = this._handleKeydown.bind(this);
          this._handleFocusBound = this._handleFocus.bind(this);
          document.addEventListener('keydown', this._handleKeydownBound);
          document.addEventListener('focus', this._handleFocusBound, true);
        }

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);
        this._animateIn();

        // Focus modal
        this.el.focus();

        return this;
      }

      /**
       * Close Modal
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isOpen = false;
        Modal._modalsOpen--;
        this._nthModalOpened = 0;

        // Call onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        this.el.classList.remove('open');

        // Enable body scrolling only if there are no more modals open.
        if (Modal._modalsOpen === 0) {
          document.body.style.overflow = '';
        }

        if (this.options.dismissible) {
          document.removeEventListener('keydown', this._handleKeydownBound);
          document.removeEventListener('focus', this._handleFocusBound, true);
        }

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);
        this._animateOut();
        return this;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Modal.__proto__ || Object.getPrototypeOf(Modal), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Modal;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Modal;
  }(Component);

  /**
   * @static
   * @memberof Modal
   */


  Modal._modalsOpen = 0;

  /**
   * @static
   * @memberof Modal
   */
  Modal._count = 0;

  M.Modal = Modal;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Modal, 'modal', 'M_Modal');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    inDuration: 275,
    outDuration: 200,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null
  };

  /**
   * @class
   *
   */

  var Materialbox = function (_Component4) {
    _inherits(Materialbox, _Component4);

    /**
     * Construct Materialbox instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Materialbox(el, options) {
      _classCallCheck(this, Materialbox);

      var _this16 = _possibleConstructorReturn(this, (Materialbox.__proto__ || Object.getPrototypeOf(Materialbox)).call(this, Materialbox, el, options));

      _this16.el.M_Materialbox = _this16;

      /**
       * Options for the modal
       * @member Materialbox#options
       * @prop {Number} [inDuration=275] - Length in ms of enter transition
       * @prop {Number} [outDuration=200] - Length in ms of exit transition
       * @prop {Function} onOpenStart - Callback function called before materialbox is opened
       * @prop {Function} onOpenEnd - Callback function called after materialbox is opened
       * @prop {Function} onCloseStart - Callback function called before materialbox is closed
       * @prop {Function} onCloseEnd - Callback function called after materialbox is closed
       */
      _this16.options = $.extend({}, Materialbox.defaults, options);

      _this16.overlayActive = false;
      _this16.doneAnimating = true;
      _this16.placeholder = $('<div></div>').addClass('material-placeholder');
      _this16.originalWidth = 0;
      _this16.originalHeight = 0;
      _this16.originInlineStyles = _this16.$el.attr('style');
      _this16.caption = _this16.el.getAttribute('data-caption') || '';

      // Wrap
      _this16.$el.before(_this16.placeholder);
      _this16.placeholder.append(_this16.$el);

      _this16._setupEventHandlers();
      return _this16;
    }

    _createClass(Materialbox, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_Materialbox = undefined;

        // Unwrap image
        $(this.placeholder).after(this.el).remove();

        this.$el.removeAttr('style');
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleMaterialboxClickBound = this._handleMaterialboxClick.bind(this);
        this.el.addEventListener('click', this._handleMaterialboxClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleMaterialboxClickBound);
      }

      /**
       * Handle Materialbox Click
       * @param {Event} e
       */

    }, {
      key: "_handleMaterialboxClick",
      value: function _handleMaterialboxClick(e) {
        // If already modal, return to original
        if (this.doneAnimating === false || this.overlayActive && this.doneAnimating) {
          this.close();
        } else {
          this.open();
        }
      }

      /**
       * Handle Window Scroll
       */

    }, {
      key: "_handleWindowScroll",
      value: function _handleWindowScroll() {
        if (this.overlayActive) {
          this.close();
        }
      }

      /**
       * Handle Window Resize
       */

    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        if (this.overlayActive) {
          this.close();
        }
      }

      /**
       * Handle Window Resize
       * @param {Event} e
       */

    }, {
      key: "_handleWindowEscape",
      value: function _handleWindowEscape(e) {
        // ESC key
        if (e.keyCode === 27 && this.doneAnimating && this.overlayActive) {
          this.close();
        }
      }

      /**
       * Find ancestors with overflow: hidden; and make visible
       */

    }, {
      key: "_makeAncestorsOverflowVisible",
      value: function _makeAncestorsOverflowVisible() {
        this.ancestorsChanged = $();
        var ancestor = this.placeholder[0].parentNode;
        while (ancestor !== null && !$(ancestor).is(document)) {
          var curr = $(ancestor);
          if (curr.css('overflow') !== 'visible') {
            curr.css('overflow', 'visible');
            if (this.ancestorsChanged === undefined) {
              this.ancestorsChanged = curr;
            } else {
              this.ancestorsChanged = this.ancestorsChanged.add(curr);
            }
          }
          ancestor = ancestor.parentNode;
        }
      }

      /**
       * Animate image in
       */

    }, {
      key: "_animateImageIn",
      value: function _animateImageIn() {
        var _this17 = this;

        var animOptions = {
          targets: this.el,
          height: [this.originalHeight, this.newHeight],
          width: [this.originalWidth, this.newWidth],
          left: M.getDocumentScrollLeft() + this.windowWidth / 2 - this.placeholder.offset().left - this.newWidth / 2,
          top: M.getDocumentScrollTop() + this.windowHeight / 2 - this.placeholder.offset().top - this.newHeight / 2,
          duration: this.options.inDuration,
          easing: 'easeOutQuad',
          complete: function () {
            _this17.doneAnimating = true;

            // onOpenEnd callback
            if (typeof _this17.options.onOpenEnd === 'function') {
              _this17.options.onOpenEnd.call(_this17, _this17.el);
            }
          }
        };

        // Override max-width or max-height if needed
        this.maxWidth = this.$el.css('max-width');
        this.maxHeight = this.$el.css('max-height');
        if (this.maxWidth !== 'none') {
          animOptions.maxWidth = this.newWidth;
        }
        if (this.maxHeight !== 'none') {
          animOptions.maxHeight = this.newHeight;
        }

        anim(animOptions);
      }

      /**
       * Animate image out
       */

    }, {
      key: "_animateImageOut",
      value: function _animateImageOut() {
        var _this18 = this;

        var animOptions = {
          targets: this.el,
          width: this.originalWidth,
          height: this.originalHeight,
          left: 0,
          top: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            _this18.placeholder.css({
              height: '',
              width: '',
              position: '',
              top: '',
              left: ''
            });

            // Revert to width or height attribute
            if (_this18.attrWidth) {
              _this18.$el.attr('width', _this18.attrWidth);
            }
            if (_this18.attrHeight) {
              _this18.$el.attr('height', _this18.attrHeight);
            }

            _this18.$el.removeAttr('style');
            _this18.originInlineStyles && _this18.$el.attr('style', _this18.originInlineStyles);

            // Remove class
            _this18.$el.removeClass('active');
            _this18.doneAnimating = true;

            // Remove overflow overrides on ancestors
            if (_this18.ancestorsChanged.length) {
              _this18.ancestorsChanged.css('overflow', '');
            }

            // onCloseEnd callback
            if (typeof _this18.options.onCloseEnd === 'function') {
              _this18.options.onCloseEnd.call(_this18, _this18.el);
            }
          }
        };

        anim(animOptions);
      }

      /**
       * Update open and close vars
       */

    }, {
      key: "_updateVars",
      value: function _updateVars() {
        this.windowWidth = window.innerWidth;
        this.windowHeight = window.innerHeight;
        this.caption = this.el.getAttribute('data-caption') || '';
      }

      /**
       * Open Materialbox
       */

    }, {
      key: "open",
      value: function open() {
        var _this19 = this;

        this._updateVars();
        this.originalWidth = this.el.getBoundingClientRect().width;
        this.originalHeight = this.el.getBoundingClientRect().height;

        // Set states
        this.doneAnimating = false;
        this.$el.addClass('active');
        this.overlayActive = true;

        // onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el);
        }

        // Set positioning for placeholder
        this.placeholder.css({
          width: this.placeholder[0].getBoundingClientRect().width + 'px',
          height: this.placeholder[0].getBoundingClientRect().height + 'px',
          position: 'relative',
          top: 0,
          left: 0
        });

        this._makeAncestorsOverflowVisible();

        // Set css on origin
        this.$el.css({
          position: 'absolute',
          'z-index': 1000,
          'will-change': 'left, top, width, height'
        });

        // Change from width or height attribute to css
        this.attrWidth = this.$el.attr('width');
        this.attrHeight = this.$el.attr('height');
        if (this.attrWidth) {
          this.$el.css('width', this.attrWidth + 'px');
          this.$el.removeAttr('width');
        }
        if (this.attrHeight) {
          this.$el.css('width', this.attrHeight + 'px');
          this.$el.removeAttr('height');
        }

        // Add overlay
        this.$overlay = $('<div id="materialbox-overlay"></div>').css({
          opacity: 0
        }).one('click', function () {
          if (_this19.doneAnimating) {
            _this19.close();
          }
        });

        // Put before in origin image to preserve z-index layering.
        this.$el.before(this.$overlay);

        // Set dimensions if needed
        var overlayOffset = this.$overlay[0].getBoundingClientRect();
        this.$overlay.css({
          width: this.windowWidth + 'px',
          height: this.windowHeight + 'px',
          left: -1 * overlayOffset.left + 'px',
          top: -1 * overlayOffset.top + 'px'
        });

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);

        // Animate Overlay
        anim({
          targets: this.$overlay[0],
          opacity: 1,
          duration: this.options.inDuration,
          easing: 'easeOutQuad'
        });

        // Add and animate caption if it exists
        if (this.caption !== '') {
          if (this.$photocaption) {
            anim.remove(this.$photoCaption[0]);
          }
          this.$photoCaption = $('<div class="materialbox-caption"></div>');
          this.$photoCaption.text(this.caption);
          $('body').append(this.$photoCaption);
          this.$photoCaption.css({ display: 'inline' });

          anim({
            targets: this.$photoCaption[0],
            opacity: 1,
            duration: this.options.inDuration,
            easing: 'easeOutQuad'
          });
        }

        // Resize Image
        var ratio = 0;
        var widthPercent = this.originalWidth / this.windowWidth;
        var heightPercent = this.originalHeight / this.windowHeight;
        this.newWidth = 0;
        this.newHeight = 0;

        if (widthPercent > heightPercent) {
          ratio = this.originalHeight / this.originalWidth;
          this.newWidth = this.windowWidth * 0.9;
          this.newHeight = this.windowWidth * 0.9 * ratio;
        } else {
          ratio = this.originalWidth / this.originalHeight;
          this.newWidth = this.windowHeight * 0.9 * ratio;
          this.newHeight = this.windowHeight * 0.9;
        }

        this._animateImageIn();

        // Handle Exit triggers
        this._handleWindowScrollBound = this._handleWindowScroll.bind(this);
        this._handleWindowResizeBound = this._handleWindowResize.bind(this);
        this._handleWindowEscapeBound = this._handleWindowEscape.bind(this);

        window.addEventListener('scroll', this._handleWindowScrollBound);
        window.addEventListener('resize', this._handleWindowResizeBound);
        window.addEventListener('keyup', this._handleWindowEscapeBound);
      }

      /**
       * Close Materialbox
       */

    }, {
      key: "close",
      value: function close() {
        var _this20 = this;

        this._updateVars();
        this.doneAnimating = false;

        // onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        anim.remove(this.el);
        anim.remove(this.$overlay[0]);

        if (this.caption !== '') {
          anim.remove(this.$photoCaption[0]);
        }

        // disable exit handlers
        window.removeEventListener('scroll', this._handleWindowScrollBound);
        window.removeEventListener('resize', this._handleWindowResizeBound);
        window.removeEventListener('keyup', this._handleWindowEscapeBound);

        anim({
          targets: this.$overlay[0],
          opacity: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            _this20.overlayActive = false;
            _this20.$overlay.remove();
          }
        });

        this._animateImageOut();

        // Remove Caption + reset css settings on image
        if (this.caption !== '') {
          anim({
            targets: this.$photoCaption[0],
            opacity: 0,
            duration: this.options.outDuration,
            easing: 'easeOutQuad',
            complete: function () {
              _this20.$photoCaption.remove();
            }
          });
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Materialbox.__proto__ || Object.getPrototypeOf(Materialbox), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Materialbox;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Materialbox;
  }(Component);

  M.Materialbox = Materialbox;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Materialbox, 'materialbox', 'M_Materialbox');
  }
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    responsiveThreshold: 0 // breakpoint for swipeable
  };

  var Parallax = function (_Component5) {
    _inherits(Parallax, _Component5);

    function Parallax(el, options) {
      _classCallCheck(this, Parallax);

      var _this21 = _possibleConstructorReturn(this, (Parallax.__proto__ || Object.getPrototypeOf(Parallax)).call(this, Parallax, el, options));

      _this21.el.M_Parallax = _this21;

      /**
       * Options for the Parallax
       * @member Parallax#options
       * @prop {Number} responsiveThreshold
       */
      _this21.options = $.extend({}, Parallax.defaults, options);
      _this21._enabled = window.innerWidth > _this21.options.responsiveThreshold;

      _this21.$img = _this21.$el.find('img').first();
      _this21.$img.each(function () {
        var el = this;
        if (el.complete) $(el).trigger('load');
      });

      _this21._updateParallax();
      _this21._setupEventHandlers();
      _this21._setupStyles();

      Parallax._parallaxes.push(_this21);
      return _this21;
    }

    _createClass(Parallax, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        Parallax._parallaxes.splice(Parallax._parallaxes.indexOf(this), 1);
        this.$img[0].style.transform = '';
        this._removeEventHandlers();

        this.$el[0].M_Parallax = undefined;
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleImageLoadBound = this._handleImageLoad.bind(this);
        this.$img[0].addEventListener('load', this._handleImageLoadBound);

        if (Parallax._parallaxes.length === 0) {
          Parallax._handleScrollThrottled = M.throttle(Parallax._handleScroll, 5);
          window.addEventListener('scroll', Parallax._handleScrollThrottled);

          Parallax._handleWindowResizeThrottled = M.throttle(Parallax._handleWindowResize, 5);
          window.addEventListener('resize', Parallax._handleWindowResizeThrottled);
        }
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.$img[0].removeEventListener('load', this._handleImageLoadBound);

        if (Parallax._parallaxes.length === 0) {
          window.removeEventListener('scroll', Parallax._handleScrollThrottled);
          window.removeEventListener('resize', Parallax._handleWindowResizeThrottled);
        }
      }
    }, {
      key: "_setupStyles",
      value: function _setupStyles() {
        this.$img[0].style.opacity = 1;
      }
    }, {
      key: "_handleImageLoad",
      value: function _handleImageLoad() {
        this._updateParallax();
      }
    }, {
      key: "_updateParallax",
      value: function _updateParallax() {
        var containerHeight = this.$el.height() > 0 ? this.el.parentNode.offsetHeight : 500;
        var imgHeight = this.$img[0].offsetHeight;
        var parallaxDist = imgHeight - containerHeight;
        var bottom = this.$el.offset().top + containerHeight;
        var top = this.$el.offset().top;
        var scrollTop = M.getDocumentScrollTop();
        var windowHeight = window.innerHeight;
        var windowBottom = scrollTop + windowHeight;
        var percentScrolled = (windowBottom - top) / (containerHeight + windowHeight);
        var parallax = parallaxDist * percentScrolled;

        if (!this._enabled) {
          this.$img[0].style.transform = '';
        } else if (bottom > scrollTop && top < scrollTop + windowHeight) {
          this.$img[0].style.transform = "translate3D(-50%, " + parallax + "px, 0)";
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Parallax.__proto__ || Object.getPrototypeOf(Parallax), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Parallax;
      }
    }, {
      key: "_handleScroll",
      value: function _handleScroll() {
        for (var i = 0; i < Parallax._parallaxes.length; i++) {
          var parallaxInstance = Parallax._parallaxes[i];
          parallaxInstance._updateParallax.call(parallaxInstance);
        }
      }
    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        for (var i = 0; i < Parallax._parallaxes.length; i++) {
          var parallaxInstance = Parallax._parallaxes[i];
          parallaxInstance._enabled = window.innerWidth > parallaxInstance.options.responsiveThreshold;
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Parallax;
  }(Component);

  /**
   * @static
   * @memberof Parallax
   */


  Parallax._parallaxes = [];

  M.Parallax = Parallax;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Parallax, 'parallax', 'M_Parallax');
  }
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    duration: 300,
    onShow: null,
    swipeable: false,
    responsiveThreshold: Infinity // breakpoint for swipeable
  };

  /**
   * @class
   *
   */

  var Tabs = function (_Component6) {
    _inherits(Tabs, _Component6);

    /**
     * Construct Tabs instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Tabs(el, options) {
      _classCallCheck(this, Tabs);

      var _this22 = _possibleConstructorReturn(this, (Tabs.__proto__ || Object.getPrototypeOf(Tabs)).call(this, Tabs, el, options));

      _this22.el.M_Tabs = _this22;

      /**
       * Options for the Tabs
       * @member Tabs#options
       * @prop {Number} duration
       * @prop {Function} onShow
       * @prop {Boolean} swipeable
       * @prop {Number} responsiveThreshold
       */
      _this22.options = $.extend({}, Tabs.defaults, options);

      // Setup
      _this22.$tabLinks = _this22.$el.children('li.tab').children('a');
      _this22.index = 0;
      _this22._setupActiveTabLink();

      // Setup tabs content
      if (_this22.options.swipeable) {
        _this22._setupSwipeableTabs();
      } else {
        _this22._setupNormalTabs();
      }

      // Setup tabs indicator after content to ensure accurate widths
      _this22._setTabsAndTabWidth();
      _this22._createIndicator();

      _this22._setupEventHandlers();
      return _this22;
    }

    _createClass(Tabs, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._indicator.parentNode.removeChild(this._indicator);

        if (this.options.swipeable) {
          this._teardownSwipeableTabs();
        } else {
          this._teardownNormalTabs();
        }

        this.$el[0].M_Tabs = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleWindowResizeBound = this._handleWindowResize.bind(this);
        window.addEventListener('resize', this._handleWindowResizeBound);

        this._handleTabClickBound = this._handleTabClick.bind(this);
        this.el.addEventListener('click', this._handleTabClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        window.removeEventListener('resize', this._handleWindowResizeBound);
        this.el.removeEventListener('click', this._handleTabClickBound);
      }

      /**
       * Handle window Resize
       */

    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        this._setTabsAndTabWidth();

        if (this.tabWidth !== 0 && this.tabsWidth !== 0) {
          this._indicator.style.left = this._calcLeftPos(this.$activeTabLink) + 'px';
          this._indicator.style.right = this._calcRightPos(this.$activeTabLink) + 'px';
        }
      }

      /**
       * Handle tab click
       * @param {Event} e
       */

    }, {
      key: "_handleTabClick",
      value: function _handleTabClick(e) {
        var _this23 = this;

        var tab = $(e.target).closest('li.tab');
        var tabLink = $(e.target).closest('a');

        // Handle click on tab link only
        if (!tabLink.length || !tabLink.parent().hasClass('tab')) {
          return;
        }

        if (tab.hasClass('disabled')) {
          e.preventDefault();
          return;
        }

        // Act as regular link if target attribute is specified.
        if (!!tabLink.attr('target')) {
          return;
        }

        // Make the old tab inactive.
        this.$activeTabLink.removeClass('active');
        var $oldContent = this.$content;

        // Update the variables with the new link and content
        this.$activeTabLink = tabLink;
        this.$content = $(M.escapeHash(tabLink[0].hash));
        this.$tabLinks = this.$el.children('li.tab').children('a');

        // Make the tab active.
        this.$activeTabLink.addClass('active');
        var prevIndex = this.index;
        this.index = Math.max(this.$tabLinks.index(tabLink), 0);

        // Swap content
        if (this.options.swipeable) {
          if (this._tabsCarousel) {
            this._tabsCarousel.set(this.index, function () {
              if (typeof _this23.options.onShow === 'function') {
                _this23.options.onShow.call(_this23, _this23.$content[0]);
              }
            });
          }
        } else {
          if (this.$content.length) {
            this.$content[0].style.display = 'block';
            this.$content.addClass('active');
            if (typeof this.options.onShow === 'function') {
              this.options.onShow.call(this, this.$content[0]);
            }

            if ($oldContent.length && !$oldContent.is(this.$content)) {
              $oldContent[0].style.display = 'none';
              $oldContent.removeClass('active');
            }
          }
        }

        // Update widths after content is swapped (scrollbar bugfix)
        this._setTabsAndTabWidth();

        // Update indicator
        this._animateIndicator(prevIndex);

        // Prevent the anchor's default click action
        e.preventDefault();
      }

      /**
       * Generate elements for tab indicator.
       */

    }, {
      key: "_createIndicator",
      value: function _createIndicator() {
        var _this24 = this;

        var indicator = document.createElement('li');
        indicator.classList.add('indicator');

        this.el.appendChild(indicator);
        this._indicator = indicator;

        setTimeout(function () {
          _this24._indicator.style.left = _this24._calcLeftPos(_this24.$activeTabLink) + 'px';
          _this24._indicator.style.right = _this24._calcRightPos(_this24.$activeTabLink) + 'px';
        }, 0);
      }

      /**
       * Setup first active tab link.
       */

    }, {
      key: "_setupActiveTabLink",
      value: function _setupActiveTabLink() {
        // If the location.hash matches one of the links, use that as the active tab.
        this.$activeTabLink = $(this.$tabLinks.filter('[href="' + location.hash + '"]'));

        // If no match is found, use the first link or any with class 'active' as the initial active tab.
        if (this.$activeTabLink.length === 0) {
          this.$activeTabLink = this.$el.children('li.tab').children('a.active').first();
        }
        if (this.$activeTabLink.length === 0) {
          this.$activeTabLink = this.$el.children('li.tab').children('a').first();
        }

        this.$tabLinks.removeClass('active');
        this.$activeTabLink[0].classList.add('active');

        this.index = Math.max(this.$tabLinks.index(this.$activeTabLink), 0);

        if (this.$activeTabLink.length) {
          this.$content = $(M.escapeHash(this.$activeTabLink[0].hash));
          this.$content.addClass('active');
        }
      }

      /**
       * Setup swipeable tabs
       */

    }, {
      key: "_setupSwipeableTabs",
      value: function _setupSwipeableTabs() {
        var _this25 = this;

        // Change swipeable according to responsive threshold
        if (window.innerWidth > this.options.responsiveThreshold) {
          this.options.swipeable = false;
        }

        var $tabsContent = $();
        this.$tabLinks.each(function (link) {
          var $currContent = $(M.escapeHash(link.hash));
          $currContent.addClass('carousel-item');
          $tabsContent = $tabsContent.add($currContent);
        });

        var $tabsWrapper = $('<div class="tabs-content carousel carousel-slider"></div>');
        $tabsContent.first().before($tabsWrapper);
        $tabsWrapper.append($tabsContent);
        $tabsContent[0].style.display = '';

        // Keep active tab index to set initial carousel slide
        var activeTabIndex = this.$activeTabLink.closest('.tab').index();

        this._tabsCarousel = M.Carousel.init($tabsWrapper[0], {
          fullWidth: true,
          noWrap: true,
          onCycleTo: function (item) {
            var prevIndex = _this25.index;
            _this25.index = $(item).index();
            _this25.$activeTabLink.removeClass('active');
            _this25.$activeTabLink = _this25.$tabLinks.eq(_this25.index);
            _this25.$activeTabLink.addClass('active');
            _this25._animateIndicator(prevIndex);
            if (typeof _this25.options.onShow === 'function') {
              _this25.options.onShow.call(_this25, _this25.$content[0]);
            }
          }
        });

        // Set initial carousel slide to active tab
        this._tabsCarousel.set(activeTabIndex);
      }

      /**
       * Teardown normal tabs.
       */

    }, {
      key: "_teardownSwipeableTabs",
      value: function _teardownSwipeableTabs() {
        var $tabsWrapper = this._tabsCarousel.$el;
        this._tabsCarousel.destroy();

        // Unwrap
        $tabsWrapper.after($tabsWrapper.children());
        $tabsWrapper.remove();
      }

      /**
       * Setup normal tabs.
       */

    }, {
      key: "_setupNormalTabs",
      value: function _setupNormalTabs() {
        // Hide Tabs Content
        this.$tabLinks.not(this.$activeTabLink).each(function (link) {
          if (!!link.hash) {
            var $currContent = $(M.escapeHash(link.hash));
            if ($currContent.length) {
              $currContent[0].style.display = 'none';
            }
          }
        });
      }

      /**
       * Teardown normal tabs.
       */

    }, {
      key: "_teardownNormalTabs",
      value: function _teardownNormalTabs() {
        // show Tabs Content
        this.$tabLinks.each(function (link) {
          if (!!link.hash) {
            var $currContent = $(M.escapeHash(link.hash));
            if ($currContent.length) {
              $currContent[0].style.display = '';
            }
          }
        });
      }

      /**
       * set tabs and tab width
       */

    }, {
      key: "_setTabsAndTabWidth",
      value: function _setTabsAndTabWidth() {
        this.tabsWidth = this.$el.width();
        this.tabWidth = Math.max(this.tabsWidth, this.el.scrollWidth) / this.$tabLinks.length;
      }

      /**
       * Finds right attribute for indicator based on active tab.
       * @param {cash} el
       */

    }, {
      key: "_calcRightPos",
      value: function _calcRightPos(el) {
        return Math.ceil(this.tabsWidth - el.position().left - el[0].getBoundingClientRect().width);
      }

      /**
       * Finds left attribute for indicator based on active tab.
       * @param {cash} el
       */

    }, {
      key: "_calcLeftPos",
      value: function _calcLeftPos(el) {
        return Math.floor(el.position().left);
      }
    }, {
      key: "updateTabIndicator",
      value: function updateTabIndicator() {
        this._setTabsAndTabWidth();
        this._animateIndicator(this.index);
      }

      /**
       * Animates Indicator to active tab.
       * @param {Number} prevIndex
       */

    }, {
      key: "_animateIndicator",
      value: function _animateIndicator(prevIndex) {
        var leftDelay = 0,
            rightDelay = 0;

        if (this.index - prevIndex >= 0) {
          leftDelay = 90;
        } else {
          rightDelay = 90;
        }

        // Animate
        var animOptions = {
          targets: this._indicator,
          left: {
            value: this._calcLeftPos(this.$activeTabLink),
            delay: leftDelay
          },
          right: {
            value: this._calcRightPos(this.$activeTabLink),
            delay: rightDelay
          },
          duration: this.options.duration,
          easing: 'easeOutQuad'
        };
        anim.remove(this._indicator);
        anim(animOptions);
      }

      /**
       * Select tab.
       * @param {String} tabId
       */

    }, {
      key: "select",
      value: function select(tabId) {
        var tab = this.$tabLinks.filter('[href="#' + tabId + '"]');
        if (tab.length) {
          tab.trigger('click');
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Tabs.__proto__ || Object.getPrototypeOf(Tabs), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Tabs;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Tabs;
  }(Component);

  M.Tabs = Tabs;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Tabs, 'tabs', 'M_Tabs');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    exitDelay: 200,
    enterDelay: 0,
    html: null,
    margin: 5,
    inDuration: 250,
    outDuration: 200,
    position: 'bottom',
    transitionMovement: 10
  };

  /**
   * @class
   *
   */

  var Tooltip = function (_Component7) {
    _inherits(Tooltip, _Component7);

    /**
     * Construct Tooltip instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Tooltip(el, options) {
      _classCallCheck(this, Tooltip);

      var _this26 = _possibleConstructorReturn(this, (Tooltip.__proto__ || Object.getPrototypeOf(Tooltip)).call(this, Tooltip, el, options));

      _this26.el.M_Tooltip = _this26;
      _this26.options = $.extend({}, Tooltip.defaults, options);

      _this26.isOpen = false;
      _this26.isHovered = false;
      _this26.isFocused = false;
      _this26._appendTooltipEl();
      _this26._setupEventHandlers();
      return _this26;
    }

    _createClass(Tooltip, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        $(this.tooltipEl).remove();
        this._removeEventHandlers();
        this.el.M_Tooltip = undefined;
      }
    }, {
      key: "_appendTooltipEl",
      value: function _appendTooltipEl() {
        var tooltipEl = document.createElement('div');
        tooltipEl.classList.add('material-tooltip');
        this.tooltipEl = tooltipEl;

        var tooltipContentEl = document.createElement('div');
        tooltipContentEl.classList.add('tooltip-content');
        tooltipContentEl.innerHTML = this.options.html;
        tooltipEl.appendChild(tooltipContentEl);
        document.body.appendChild(tooltipEl);
      }
    }, {
      key: "_updateTooltipContent",
      value: function _updateTooltipContent() {
        this.tooltipEl.querySelector('.tooltip-content').innerHTML = this.options.html;
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleMouseEnterBound = this._handleMouseEnter.bind(this);
        this._handleMouseLeaveBound = this._handleMouseLeave.bind(this);
        this._handleFocusBound = this._handleFocus.bind(this);
        this._handleBlurBound = this._handleBlur.bind(this);
        this.el.addEventListener('mouseenter', this._handleMouseEnterBound);
        this.el.addEventListener('mouseleave', this._handleMouseLeaveBound);
        this.el.addEventListener('focus', this._handleFocusBound, true);
        this.el.addEventListener('blur', this._handleBlurBound, true);
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('mouseenter', this._handleMouseEnterBound);
        this.el.removeEventListener('mouseleave', this._handleMouseLeaveBound);
        this.el.removeEventListener('focus', this._handleFocusBound, true);
        this.el.removeEventListener('blur', this._handleBlurBound, true);
      }
    }, {
      key: "open",
      value: function open(isManual) {
        if (this.isOpen) {
          return;
        }
        isManual = isManual === undefined ? true : undefined; // Default value true
        this.isOpen = true;
        // Update tooltip content with HTML attribute options
        this.options = $.extend({}, this.options, this._getAttributeOptions());
        this._updateTooltipContent();
        this._setEnterDelayTimeout(isManual);
      }
    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isHovered = false;
        this.isFocused = false;
        this.isOpen = false;
        this._setExitDelayTimeout();
      }

      /**
       * Create timeout which delays when the tooltip closes
       */

    }, {
      key: "_setExitDelayTimeout",
      value: function _setExitDelayTimeout() {
        var _this27 = this;

        clearTimeout(this._exitDelayTimeout);

        this._exitDelayTimeout = setTimeout(function () {
          if (_this27.isHovered || _this27.isFocused) {
            return;
          }

          _this27._animateOut();
        }, this.options.exitDelay);
      }

      /**
       * Create timeout which delays when the toast closes
       */

    }, {
      key: "_setEnterDelayTimeout",
      value: function _setEnterDelayTimeout(isManual) {
        var _this28 = this;

        clearTimeout(this._enterDelayTimeout);

        this._enterDelayTimeout = setTimeout(function () {
          if (!_this28.isHovered && !_this28.isFocused && !isManual) {
            return;
          }

          _this28._animateIn();
        }, this.options.enterDelay);
      }
    }, {
      key: "_positionTooltip",
      value: function _positionTooltip() {
        var origin = this.el,
            tooltip = this.tooltipEl,
            originHeight = origin.offsetHeight,
            originWidth = origin.offsetWidth,
            tooltipHeight = tooltip.offsetHeight,
            tooltipWidth = tooltip.offsetWidth,
            newCoordinates = void 0,
            margin = this.options.margin,
            targetTop = void 0,
            targetLeft = void 0;

        this.xMovement = 0, this.yMovement = 0;

        targetTop = origin.getBoundingClientRect().top + M.getDocumentScrollTop();
        targetLeft = origin.getBoundingClientRect().left + M.getDocumentScrollLeft();

        if (this.options.position === 'top') {
          targetTop += -tooltipHeight - margin;
          targetLeft += originWidth / 2 - tooltipWidth / 2;
          this.yMovement = -this.options.transitionMovement;
        } else if (this.options.position === 'right') {
          targetTop += originHeight / 2 - tooltipHeight / 2;
          targetLeft += originWidth + margin;
          this.xMovement = this.options.transitionMovement;
        } else if (this.options.position === 'left') {
          targetTop += originHeight / 2 - tooltipHeight / 2;
          targetLeft += -tooltipWidth - margin;
          this.xMovement = -this.options.transitionMovement;
        } else {
          targetTop += originHeight + margin;
          targetLeft += originWidth / 2 - tooltipWidth / 2;
          this.yMovement = this.options.transitionMovement;
        }

        newCoordinates = this._repositionWithinScreen(targetLeft, targetTop, tooltipWidth, tooltipHeight);
        $(tooltip).css({
          top: newCoordinates.y + 'px',
          left: newCoordinates.x + 'px'
        });
      }
    }, {
      key: "_repositionWithinScreen",
      value: function _repositionWithinScreen(x, y, width, height) {
        var scrollLeft = M.getDocumentScrollLeft();
        var scrollTop = M.getDocumentScrollTop();
        var newX = x - scrollLeft;
        var newY = y - scrollTop;

        var bounding = {
          left: newX,
          top: newY,
          width: width,
          height: height
        };

        var offset = this.options.margin + this.options.transitionMovement;
        var edges = M.checkWithinContainer(document.body, bounding, offset);

        if (edges.left) {
          newX = offset;
        } else if (edges.right) {
          newX -= newX + width - window.innerWidth;
        }

        if (edges.top) {
          newY = offset;
        } else if (edges.bottom) {
          newY -= newY + height - window.innerHeight;
        }

        return {
          x: newX + scrollLeft,
          y: newY + scrollTop
        };
      }
    }, {
      key: "_animateIn",
      value: function _animateIn() {
        this._positionTooltip();
        this.tooltipEl.style.visibility = 'visible';
        anim.remove(this.tooltipEl);
        anim({
          targets: this.tooltipEl,
          opacity: 1,
          translateX: this.xMovement,
          translateY: this.yMovement,
          duration: this.options.inDuration,
          easing: 'easeOutCubic'
        });
      }
    }, {
      key: "_animateOut",
      value: function _animateOut() {
        anim.remove(this.tooltipEl);
        anim({
          targets: this.tooltipEl,
          opacity: 0,
          translateX: 0,
          translateY: 0,
          duration: this.options.outDuration,
          easing: 'easeOutCubic'
        });
      }
    }, {
      key: "_handleMouseEnter",
      value: function _handleMouseEnter() {
        this.isHovered = true;
        this.isFocused = false; // Allows close of tooltip when opened by focus.
        this.open(false);
      }
    }, {
      key: "_handleMouseLeave",
      value: function _handleMouseLeave() {
        this.isHovered = false;
        this.isFocused = false; // Allows close of tooltip when opened by focus.
        this.close();
      }
    }, {
      key: "_handleFocus",
      value: function _handleFocus() {
        if (M.tabPressed) {
          this.isFocused = true;
          this.open(false);
        }
      }
    }, {
      key: "_handleBlur",
      value: function _handleBlur() {
        this.isFocused = false;
        this.close();
      }
    }, {
      key: "_getAttributeOptions",
      value: function _getAttributeOptions() {
        var attributeOptions = {};
        var tooltipTextOption = this.el.getAttribute('data-tooltip');
        var positionOption = this.el.getAttribute('data-position');

        if (tooltipTextOption) {
          attributeOptions.html = tooltipTextOption;
        }

        if (positionOption) {
          attributeOptions.position = positionOption;
        }
        return attributeOptions;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Tooltip.__proto__ || Object.getPrototypeOf(Tooltip), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Tooltip;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Tooltip;
  }(Component);

  M.Tooltip = Tooltip;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Tooltip, 'tooltip', 'M_Tooltip');
  }
})(cash, M.anime);
; /*!
  * Waves v0.6.4
  * http://fian.my.id/Waves
  *
  * Copyright 2014 Alfiana E. Sibuea and other contributors
  * Released under the MIT license
  * https://github.com/fians/Waves/blob/master/LICENSE
  */

;(function (window) {
  'use strict';

  var Waves = Waves || {};
  var $$ = document.querySelectorAll.bind(document);

  // Find exact position of element
  function isWindow(obj) {
    return obj !== null && obj === obj.window;
  }

  function getWindow(elem) {
    return isWindow(elem) ? elem : elem.nodeType === 9 && elem.defaultView;
  }

  function offset(elem) {
    var docElem,
        win,
        box = { top: 0, left: 0 },
        doc = elem && elem.ownerDocument;

    docElem = doc.documentElement;

    if (typeof elem.getBoundingClientRect !== typeof undefined) {
      box = elem.getBoundingClientRect();
    }
    win = getWindow(doc);
    return {
      top: box.top + win.pageYOffset - docElem.clientTop,
      left: box.left + win.pageXOffset - docElem.clientLeft
    };
  }

  function convertStyle(obj) {
    var style = '';

    for (var a in obj) {
      if (obj.hasOwnProperty(a)) {
        style += a + ':' + obj[a] + ';';
      }
    }

    return style;
  }

  var Effect = {

    // Effect delay
    duration: 750,

    show: function (e, element) {

      // Disable right click
      if (e.button === 2) {
        return false;
      }

      var el = element || this;

      // Create ripple
      var ripple = document.createElement('div');
      ripple.className = 'waves-ripple';
      el.appendChild(ripple);

      // Get click coordinate and element witdh
      var pos = offset(el);
      var relativeY = e.pageY - pos.top;
      var relativeX = e.pageX - pos.left;
      var scale = 'scale(' + el.clientWidth / 100 * 10 + ')';

      // Support for touch devices
      if ('touches' in e) {
        relativeY = e.touches[0].pageY - pos.top;
        relativeX = e.touches[0].pageX - pos.left;
      }

      // Attach data to element
      ripple.setAttribute('data-hold', Date.now());
      ripple.setAttribute('data-scale', scale);
      ripple.setAttribute('data-x', relativeX);
      ripple.setAttribute('data-y', relativeY);

      // Set ripple position
      var rippleStyle = {
        'top': relativeY + 'px',
        'left': relativeX + 'px'
      };

      ripple.className = ripple.className + ' waves-notransition';
      ripple.setAttribute('style', convertStyle(rippleStyle));
      ripple.className = ripple.className.replace('waves-notransition', '');

      // Scale the ripple
      rippleStyle['-webkit-transform'] = scale;
      rippleStyle['-moz-transform'] = scale;
      rippleStyle['-ms-transform'] = scale;
      rippleStyle['-o-transform'] = scale;
      rippleStyle.transform = scale;
      rippleStyle.opacity = '1';

      rippleStyle['-webkit-transition-duration'] = Effect.duration + 'ms';
      rippleStyle['-moz-transition-duration'] = Effect.duration + 'ms';
      rippleStyle['-o-transition-duration'] = Effect.duration + 'ms';
      rippleStyle['transition-duration'] = Effect.duration + 'ms';

      rippleStyle['-webkit-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
      rippleStyle['-moz-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
      rippleStyle['-o-transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';
      rippleStyle['transition-timing-function'] = 'cubic-bezier(0.250, 0.460, 0.450, 0.940)';

      ripple.setAttribute('style', convertStyle(rippleStyle));
    },

    hide: function (e) {
      TouchHandler.touchup(e);

      var el = this;
      var width = el.clientWidth * 1.4;

      // Get first ripple
      var ripple = null;
      var ripples = el.getElementsByClassName('waves-ripple');
      if (ripples.length > 0) {
        ripple = ripples[ripples.length - 1];
      } else {
        return false;
      }

      var relativeX = ripple.getAttribute('data-x');
      var relativeY = ripple.getAttribute('data-y');
      var scale = ripple.getAttribute('data-scale');

      // Get delay beetween mousedown and mouse leave
      var diff = Date.now() - Number(ripple.getAttribute('data-hold'));
      var delay = 350 - diff;

      if (delay < 0) {
        delay = 0;
      }

      // Fade out ripple after delay
      setTimeout(function () {
        var style = {
          'top': relativeY + 'px',
          'left': relativeX + 'px',
          'opacity': '0',

          // Duration
          '-webkit-transition-duration': Effect.duration + 'ms',
          '-moz-transition-duration': Effect.duration + 'ms',
          '-o-transition-duration': Effect.duration + 'ms',
          'transition-duration': Effect.duration + 'ms',
          '-webkit-transform': scale,
          '-moz-transform': scale,
          '-ms-transform': scale,
          '-o-transform': scale,
          'transform': scale
        };

        ripple.setAttribute('style', convertStyle(style));

        setTimeout(function () {
          try {
            el.removeChild(ripple);
          } catch (e) {
            return false;
          }
        }, Effect.duration);
      }, delay);
    },

    // Little hack to make <input> can perform waves effect
    wrapInput: function (elements) {
      for (var a = 0; a < elements.length; a++) {
        var el = elements[a];

        if (el.tagName.toLowerCase() === 'input') {
          var parent = el.parentNode;

          // If input already have parent just pass through
          if (parent.tagName.toLowerCase() === 'i' && parent.className.indexOf('waves-effect') !== -1) {
            continue;
          }

          // Put element class and style to the specified parent
          var wrapper = document.createElement('i');
          wrapper.className = el.className + ' waves-input-wrapper';

          var elementStyle = el.getAttribute('style');

          if (!elementStyle) {
            elementStyle = '';
          }

          wrapper.setAttribute('style', elementStyle);

          el.className = 'waves-button-input';
          el.removeAttribute('style');

          // Put element as child
          parent.replaceChild(wrapper, el);
          wrapper.appendChild(el);
        }
      }
    }
  };

  /**
   * Disable mousedown event for 500ms during and after touch
   */
  var TouchHandler = {
    /* uses an integer rather than bool so there's no issues with
     * needing to clear timeouts if another touch event occurred
     * within the 500ms. Cannot mouseup between touchstart and
     * touchend, nor in the 500ms after touchend. */
    touches: 0,
    allowEvent: function (e) {
      var allow = true;

      if (e.type === 'touchstart') {
        TouchHandler.touches += 1; //push
      } else if (e.type === 'touchend' || e.type === 'touchcancel') {
        setTimeout(function () {
          if (TouchHandler.touches > 0) {
            TouchHandler.touches -= 1; //pop after 500ms
          }
        }, 500);
      } else if (e.type === 'mousedown' && TouchHandler.touches > 0) {
        allow = false;
      }

      return allow;
    },
    touchup: function (e) {
      TouchHandler.allowEvent(e);
    }
  };

  /**
   * Delegated click handler for .waves-effect element.
   * returns null when .waves-effect element not in "click tree"
   */
  function getWavesEffectElement(e) {
    if (TouchHandler.allowEvent(e) === false) {
      return null;
    }

    var element = null;
    var target = e.target || e.srcElement;

    while (target.parentNode !== null) {
      if (!(target instanceof SVGElement) && target.className.indexOf('waves-effect') !== -1) {
        element = target;
        break;
      }
      target = target.parentNode;
    }
    return element;
  }

  /**
   * Bubble the click and show effect if .waves-effect elem was found
   */
  function showEffect(e) {
    var element = getWavesEffectElement(e);

    if (element !== null) {
      Effect.show(e, element);

      if ('ontouchstart' in window) {
        element.addEventListener('touchend', Effect.hide, false);
        element.addEventListener('touchcancel', Effect.hide, false);
      }

      element.addEventListener('mouseup', Effect.hide, false);
      element.addEventListener('mouseleave', Effect.hide, false);
      element.addEventListener('dragend', Effect.hide, false);
    }
  }

  Waves.displayEffect = function (options) {
    options = options || {};

    if ('duration' in options) {
      Effect.duration = options.duration;
    }

    //Wrap input inside <i> tag
    Effect.wrapInput($$('.waves-effect'));

    if ('ontouchstart' in window) {
      document.body.addEventListener('touchstart', showEffect, false);
    }

    document.body.addEventListener('mousedown', showEffect, false);
  };

  /**
   * Attach Waves to an input element (or any element which doesn't
   * bubble mouseup/mousedown events).
   *   Intended to be used with dynamically loaded forms/inputs, or
   * where the user doesn't want a delegated click handler.
   */
  Waves.attach = function (element) {
    //FUTURE: automatically add waves classes and allow users
    // to specify them with an options param? Eg. light/classic/button
    if (element.tagName.toLowerCase() === 'input') {
      Effect.wrapInput([element]);
      element = element.parentNode;
    }

    if ('ontouchstart' in window) {
      element.addEventListener('touchstart', showEffect, false);
    }

    element.addEventListener('mousedown', showEffect, false);
  };

  window.Waves = Waves;

  document.addEventListener('DOMContentLoaded', function () {
    Waves.displayEffect();
  }, false);
})(window);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    html: '',
    displayLength: 4000,
    inDuration: 300,
    outDuration: 375,
    classes: '',
    completeCallback: null,
    activationPercent: 0.8
  };

  var Toast = function () {
    function Toast(options) {
      _classCallCheck(this, Toast);

      /**
       * Options for the toast
       * @member Toast#options
       */
      this.options = $.extend({}, Toast.defaults, options);
      this.message = this.options.html;

      /**
       * Describes current pan state toast
       * @type {Boolean}
       */
      this.panning = false;

      /**
       * Time remaining until toast is removed
       */
      this.timeRemaining = this.options.displayLength;

      if (Toast._toasts.length === 0) {
        Toast._createContainer();
      }

      // Create new toast
      Toast._toasts.push(this);
      var toastElement = this._createToast();
      toastElement.M_Toast = this;
      this.el = toastElement;
      this.$el = $(toastElement);
      this._animateIn();
      this._setTimer();
    }

    _createClass(Toast, [{
      key: "_createToast",


      /**
       * Create toast and append it to toast container
       */
      value: function _createToast() {
        var toast = document.createElement('div');
        toast.classList.add('toast');

        // Add custom classes onto toast
        if (!!this.options.classes.length) {
          $(toast).addClass(this.options.classes);
        }

        // Set content
        if (typeof HTMLElement === 'object' ? this.message instanceof HTMLElement : this.message && typeof this.message === 'object' && this.message !== null && this.message.nodeType === 1 && typeof this.message.nodeName === 'string') {
          toast.appendChild(this.message);

          // Check if it is jQuery object
        } else if (!!this.message.jquery) {
          $(toast).append(this.message[0]);

          // Insert as html;
        } else {
          toast.innerHTML = this.message;
        }

        // Append toasft
        Toast._container.appendChild(toast);
        return toast;
      }

      /**
       * Animate in toast
       */

    }, {
      key: "_animateIn",
      value: function _animateIn() {
        // Animate toast in
        anim({
          targets: this.el,
          top: 0,
          opacity: 1,
          duration: this.options.inDuration,
          easing: 'easeOutCubic'
        });
      }

      /**
       * Create setInterval which automatically removes toast when timeRemaining >= 0
       * has been reached
       */

    }, {
      key: "_setTimer",
      value: function _setTimer() {
        var _this29 = this;

        if (this.timeRemaining !== Infinity) {
          this.counterInterval = setInterval(function () {
            // If toast is not being dragged, decrease its time remaining
            if (!_this29.panning) {
              _this29.timeRemaining -= 20;
            }

            // Animate toast out
            if (_this29.timeRemaining <= 0) {
              _this29.dismiss();
            }
          }, 20);
        }
      }

      /**
       * Dismiss toast with animation
       */

    }, {
      key: "dismiss",
      value: function dismiss() {
        var _this30 = this;

        window.clearInterval(this.counterInterval);
        var activationDistance = this.el.offsetWidth * this.options.activationPercent;

        if (this.wasSwiped) {
          this.el.style.transition = 'transform .05s, opacity .05s';
          this.el.style.transform = "translateX(" + activationDistance + "px)";
          this.el.style.opacity = 0;
        }

        anim({
          targets: this.el,
          opacity: 0,
          marginTop: -40,
          duration: this.options.outDuration,
          easing: 'easeOutExpo',
          complete: function () {
            // Call the optional callback
            if (typeof _this30.options.completeCallback === 'function') {
              _this30.options.completeCallback();
            }
            // Remove toast from DOM
            _this30.$el.remove();
            Toast._toasts.splice(Toast._toasts.indexOf(_this30), 1);
            if (Toast._toasts.length === 0) {
              Toast._removeContainer();
            }
          }
        });
      }
    }], [{
      key: "getInstance",


      /**
       * Get Instance
       */
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Toast;
      }

      /**
       * Append toast container and add event handlers
       */

    }, {
      key: "_createContainer",
      value: function _createContainer() {
        var container = document.createElement('div');
        container.setAttribute('id', 'toast-container');

        // Add event handler
        container.addEventListener('touchstart', Toast._onDragStart);
        container.addEventListener('touchmove', Toast._onDragMove);
        container.addEventListener('touchend', Toast._onDragEnd);

        container.addEventListener('mousedown', Toast._onDragStart);
        document.addEventListener('mousemove', Toast._onDragMove);
        document.addEventListener('mouseup', Toast._onDragEnd);

        document.body.appendChild(container);
        Toast._container = container;
      }

      /**
       * Remove toast container and event handlers
       */

    }, {
      key: "_removeContainer",
      value: function _removeContainer() {
        // Add event handler
        document.removeEventListener('mousemove', Toast._onDragMove);
        document.removeEventListener('mouseup', Toast._onDragEnd);

        $(Toast._container).remove();
        Toast._container = null;
      }

      /**
       * Begin drag handler
       * @param {Event} e
       */

    }, {
      key: "_onDragStart",
      value: function _onDragStart(e) {
        if (e.target && $(e.target).closest('.toast').length) {
          var $toast = $(e.target).closest('.toast');
          var toast = $toast[0].M_Toast;
          toast.panning = true;
          Toast._draggedToast = toast;
          toast.el.classList.add('panning');
          toast.el.style.transition = '';
          toast.startingXPos = Toast._xPos(e);
          toast.time = Date.now();
          toast.xPos = Toast._xPos(e);
        }
      }

      /**
       * Drag move handler
       * @param {Event} e
       */

    }, {
      key: "_onDragMove",
      value: function _onDragMove(e) {
        if (!!Toast._draggedToast) {
          e.preventDefault();
          var toast = Toast._draggedToast;
          toast.deltaX = Math.abs(toast.xPos - Toast._xPos(e));
          toast.xPos = Toast._xPos(e);
          toast.velocityX = toast.deltaX / (Date.now() - toast.time);
          toast.time = Date.now();

          var totalDeltaX = toast.xPos - toast.startingXPos;
          var activationDistance = toast.el.offsetWidth * toast.options.activationPercent;
          toast.el.style.transform = "translateX(" + totalDeltaX + "px)";
          toast.el.style.opacity = 1 - Math.abs(totalDeltaX / activationDistance);
        }
      }

      /**
       * End drag handler
       */

    }, {
      key: "_onDragEnd",
      value: function _onDragEnd() {
        if (!!Toast._draggedToast) {
          var toast = Toast._draggedToast;
          toast.panning = false;
          toast.el.classList.remove('panning');

          var totalDeltaX = toast.xPos - toast.startingXPos;
          var activationDistance = toast.el.offsetWidth * toast.options.activationPercent;
          var shouldBeDismissed = Math.abs(totalDeltaX) > activationDistance || toast.velocityX > 1;

          // Remove toast
          if (shouldBeDismissed) {
            toast.wasSwiped = true;
            toast.dismiss();

            // Animate toast back to original position
          } else {
            toast.el.style.transition = 'transform .2s, opacity .2s';
            toast.el.style.transform = '';
            toast.el.style.opacity = '';
          }
          Toast._draggedToast = null;
        }
      }

      /**
       * Get x position of mouse or touch event
       * @param {Event} e
       */

    }, {
      key: "_xPos",
      value: function _xPos(e) {
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return e.targetTouches[0].clientX;
        }
        // mouse event
        return e.clientX;
      }

      /**
       * Remove all toasts
       */

    }, {
      key: "dismissAll",
      value: function dismissAll() {
        for (var toastIndex in Toast._toasts) {
          Toast._toasts[toastIndex].dismiss();
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Toast;
  }();

  /**
   * @static
   * @memberof Toast
   * @type {Array.<Toast>}
   */


  Toast._toasts = [];

  /**
   * @static
   * @memberof Toast
   */
  Toast._container = null;

  /**
   * @static
   * @memberof Toast
   * @type {Toast}
   */
  Toast._draggedToast = null;

  M.Toast = Toast;
  M.toast = function (options) {
    return new Toast(options);
  };
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    edge: 'left',
    draggable: true,
    inDuration: 250,
    outDuration: 200,
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    preventScrolling: true
  };

  /**
   * @class
   */

  var Sidenav = function (_Component8) {
    _inherits(Sidenav, _Component8);

    /**
     * Construct Sidenav instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Sidenav(el, options) {
      _classCallCheck(this, Sidenav);

      var _this31 = _possibleConstructorReturn(this, (Sidenav.__proto__ || Object.getPrototypeOf(Sidenav)).call(this, Sidenav, el, options));

      _this31.el.M_Sidenav = _this31;
      _this31.id = _this31.$el.attr('id');

      /**
       * Options for the Sidenav
       * @member Sidenav#options
       * @prop {String} [edge='left'] - Side of screen on which Sidenav appears
       * @prop {Boolean} [draggable=true] - Allow swipe gestures to open/close Sidenav
       * @prop {Number} [inDuration=250] - Length in ms of enter transition
       * @prop {Number} [outDuration=200] - Length in ms of exit transition
       * @prop {Function} onOpenStart - Function called when sidenav starts entering
       * @prop {Function} onOpenEnd - Function called when sidenav finishes entering
       * @prop {Function} onCloseStart - Function called when sidenav starts exiting
       * @prop {Function} onCloseEnd - Function called when sidenav finishes exiting
       */
      _this31.options = $.extend({}, Sidenav.defaults, options);

      /**
       * Describes open/close state of Sidenav
       * @type {Boolean}
       */
      _this31.isOpen = false;

      /**
       * Describes if Sidenav is fixed
       * @type {Boolean}
       */
      _this31.isFixed = _this31.el.classList.contains('sidenav-fixed');

      /**
       * Describes if Sidenav is being draggeed
       * @type {Boolean}
       */
      _this31.isDragged = false;

      // Window size variables for window resize checks
      _this31.lastWindowWidth = window.innerWidth;
      _this31.lastWindowHeight = window.innerHeight;

      _this31._createOverlay();
      _this31._createDragTarget();
      _this31._setupEventHandlers();
      _this31._setupClasses();
      _this31._setupFixed();

      Sidenav._sidenavs.push(_this31);
      return _this31;
    }

    _createClass(Sidenav, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._enableBodyScrolling();
        this._overlay.parentNode.removeChild(this._overlay);
        this.dragTarget.parentNode.removeChild(this.dragTarget);
        this.el.M_Sidenav = undefined;
        this.el.style.transform = '';

        var index = Sidenav._sidenavs.indexOf(this);
        if (index >= 0) {
          Sidenav._sidenavs.splice(index, 1);
        }
      }
    }, {
      key: "_createOverlay",
      value: function _createOverlay() {
        var overlay = document.createElement('div');
        this._closeBound = this.close.bind(this);
        overlay.classList.add('sidenav-overlay');

        overlay.addEventListener('click', this._closeBound);

        document.body.appendChild(overlay);
        this._overlay = overlay;
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        if (Sidenav._sidenavs.length === 0) {
          document.body.addEventListener('click', this._handleTriggerClick);
        }

        this._handleDragTargetDragBound = this._handleDragTargetDrag.bind(this);
        this._handleDragTargetReleaseBound = this._handleDragTargetRelease.bind(this);
        this._handleCloseDragBound = this._handleCloseDrag.bind(this);
        this._handleCloseReleaseBound = this._handleCloseRelease.bind(this);
        this._handleCloseTriggerClickBound = this._handleCloseTriggerClick.bind(this);

        this.dragTarget.addEventListener('touchmove', this._handleDragTargetDragBound);
        this.dragTarget.addEventListener('touchend', this._handleDragTargetReleaseBound);
        this._overlay.addEventListener('touchmove', this._handleCloseDragBound);
        this._overlay.addEventListener('touchend', this._handleCloseReleaseBound);
        this.el.addEventListener('touchmove', this._handleCloseDragBound);
        this.el.addEventListener('touchend', this._handleCloseReleaseBound);
        this.el.addEventListener('click', this._handleCloseTriggerClickBound);

        // Add resize for side nav fixed
        if (this.isFixed) {
          this._handleWindowResizeBound = this._handleWindowResize.bind(this);
          window.addEventListener('resize', this._handleWindowResizeBound);
        }
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (Sidenav._sidenavs.length === 1) {
          document.body.removeEventListener('click', this._handleTriggerClick);
        }

        this.dragTarget.removeEventListener('touchmove', this._handleDragTargetDragBound);
        this.dragTarget.removeEventListener('touchend', this._handleDragTargetReleaseBound);
        this._overlay.removeEventListener('touchmove', this._handleCloseDragBound);
        this._overlay.removeEventListener('touchend', this._handleCloseReleaseBound);
        this.el.removeEventListener('touchmove', this._handleCloseDragBound);
        this.el.removeEventListener('touchend', this._handleCloseReleaseBound);
        this.el.removeEventListener('click', this._handleCloseTriggerClickBound);

        // Remove resize for side nav fixed
        if (this.isFixed) {
          window.removeEventListener('resize', this._handleWindowResizeBound);
        }
      }

      /**
       * Handle Trigger Click
       * @param {Event} e
       */

    }, {
      key: "_handleTriggerClick",
      value: function _handleTriggerClick(e) {
        var $trigger = $(e.target).closest('.sidenav-trigger');
        if (e.target && $trigger.length) {
          var sidenavId = M.getIdFromTrigger($trigger[0]);

          var sidenavInstance = document.getElementById(sidenavId).M_Sidenav;
          if (sidenavInstance) {
            sidenavInstance.open($trigger);
          }
          e.preventDefault();
        }
      }

      /**
       * Set variables needed at the beggining of drag
       * and stop any current transition.
       * @param {Event} e
       */

    }, {
      key: "_startDrag",
      value: function _startDrag(e) {
        var clientX = e.targetTouches[0].clientX;
        this.isDragged = true;
        this._startingXpos = clientX;
        this._xPos = this._startingXpos;
        this._time = Date.now();
        this._width = this.el.getBoundingClientRect().width;
        this._overlay.style.display = 'block';
        this._initialScrollTop = this.isOpen ? this.el.scrollTop : M.getDocumentScrollTop();
        this._verticallyScrolling = false;
        anim.remove(this.el);
        anim.remove(this._overlay);
      }

      /**
       * Set variables needed at each drag move update tick
       * @param {Event} e
       */

    }, {
      key: "_dragMoveUpdate",
      value: function _dragMoveUpdate(e) {
        var clientX = e.targetTouches[0].clientX;
        var currentScrollTop = this.isOpen ? this.el.scrollTop : M.getDocumentScrollTop();
        this.deltaX = Math.abs(this._xPos - clientX);
        this._xPos = clientX;
        this.velocityX = this.deltaX / (Date.now() - this._time);
        this._time = Date.now();
        if (this._initialScrollTop !== currentScrollTop) {
          this._verticallyScrolling = true;
        }
      }

      /**
       * Handles Dragging of Sidenav
       * @param {Event} e
       */

    }, {
      key: "_handleDragTargetDrag",
      value: function _handleDragTargetDrag(e) {
        // Check if draggable
        if (!this.options.draggable || this._isCurrentlyFixed() || this._verticallyScrolling) {
          return;
        }

        // If not being dragged, set initial drag start variables
        if (!this.isDragged) {
          this._startDrag(e);
        }

        // Run touchmove updates
        this._dragMoveUpdate(e);

        // Calculate raw deltaX
        var totalDeltaX = this._xPos - this._startingXpos;

        // dragDirection is the attempted user drag direction
        var dragDirection = totalDeltaX > 0 ? 'right' : 'left';

        // Don't allow totalDeltaX to exceed Sidenav width or be dragged in the opposite direction
        totalDeltaX = Math.min(this._width, Math.abs(totalDeltaX));
        if (this.options.edge === dragDirection) {
          totalDeltaX = 0;
        }

        /**
         * transformX is the drag displacement
         * transformPrefix is the initial transform placement
         * Invert values if Sidenav is right edge
         */
        var transformX = totalDeltaX;
        var transformPrefix = 'translateX(-100%)';
        if (this.options.edge === 'right') {
          transformPrefix = 'translateX(100%)';
          transformX = -transformX;
        }

        // Calculate open/close percentage of sidenav, with open = 1 and close = 0
        this.percentOpen = Math.min(1, totalDeltaX / this._width);

        // Set transform and opacity styles
        this.el.style.transform = transformPrefix + " translateX(" + transformX + "px)";
        this._overlay.style.opacity = this.percentOpen;
      }

      /**
       * Handle Drag Target Release
       */

    }, {
      key: "_handleDragTargetRelease",
      value: function _handleDragTargetRelease() {
        if (this.isDragged) {
          if (this.percentOpen > 0.2) {
            this.open();
          } else {
            this._animateOut();
          }

          this.isDragged = false;
          this._verticallyScrolling = false;
        }
      }

      /**
       * Handle Close Drag
       * @param {Event} e
       */

    }, {
      key: "_handleCloseDrag",
      value: function _handleCloseDrag(e) {
        if (this.isOpen) {
          // Check if draggable
          if (!this.options.draggable || this._isCurrentlyFixed() || this._verticallyScrolling) {
            return;
          }

          // If not being dragged, set initial drag start variables
          if (!this.isDragged) {
            this._startDrag(e);
          }

          // Run touchmove updates
          this._dragMoveUpdate(e);

          // Calculate raw deltaX
          var totalDeltaX = this._xPos - this._startingXpos;

          // dragDirection is the attempted user drag direction
          var dragDirection = totalDeltaX > 0 ? 'right' : 'left';

          // Don't allow totalDeltaX to exceed Sidenav width or be dragged in the opposite direction
          totalDeltaX = Math.min(this._width, Math.abs(totalDeltaX));
          if (this.options.edge !== dragDirection) {
            totalDeltaX = 0;
          }

          var transformX = -totalDeltaX;
          if (this.options.edge === 'right') {
            transformX = -transformX;
          }

          // Calculate open/close percentage of sidenav, with open = 1 and close = 0
          this.percentOpen = Math.min(1, 1 - totalDeltaX / this._width);

          // Set transform and opacity styles
          this.el.style.transform = "translateX(" + transformX + "px)";
          this._overlay.style.opacity = this.percentOpen;
        }
      }

      /**
       * Handle Close Release
       */

    }, {
      key: "_handleCloseRelease",
      value: function _handleCloseRelease() {
        if (this.isOpen && this.isDragged) {
          if (this.percentOpen > 0.8) {
            this._animateIn();
          } else {
            this.close();
          }

          this.isDragged = false;
          this._verticallyScrolling = false;
        }
      }

      /**
       * Handles closing of Sidenav when element with class .sidenav-close
       */

    }, {
      key: "_handleCloseTriggerClick",
      value: function _handleCloseTriggerClick(e) {
        var $closeTrigger = $(e.target).closest('.sidenav-close');
        if ($closeTrigger.length && !this._isCurrentlyFixed()) {
          this.close();
        }
      }

      /**
       * Handle Window Resize
       */

    }, {
      key: "_handleWindowResize",
      value: function _handleWindowResize() {
        // Only handle horizontal resizes
        if (this.lastWindowWidth !== window.innerWidth) {
          if (window.innerWidth > 992) {
            this.open();
          } else {
            this.close();
          }
        }

        this.lastWindowWidth = window.innerWidth;
        this.lastWindowHeight = window.innerHeight;
      }
    }, {
      key: "_setupClasses",
      value: function _setupClasses() {
        if (this.options.edge === 'right') {
          this.el.classList.add('right-aligned');
          this.dragTarget.classList.add('right-aligned');
        }
      }
    }, {
      key: "_removeClasses",
      value: function _removeClasses() {
        this.el.classList.remove('right-aligned');
        this.dragTarget.classList.remove('right-aligned');
      }
    }, {
      key: "_setupFixed",
      value: function _setupFixed() {
        if (this._isCurrentlyFixed()) {
          this.open();
        }
      }
    }, {
      key: "_isCurrentlyFixed",
      value: function _isCurrentlyFixed() {
        return this.isFixed && window.innerWidth > 992;
      }
    }, {
      key: "_createDragTarget",
      value: function _createDragTarget() {
        var dragTarget = document.createElement('div');
        dragTarget.classList.add('drag-target');
        document.body.appendChild(dragTarget);
        this.dragTarget = dragTarget;
      }
    }, {
      key: "_preventBodyScrolling",
      value: function _preventBodyScrolling() {
        var body = document.body;
        body.style.overflow = 'hidden';
      }
    }, {
      key: "_enableBodyScrolling",
      value: function _enableBodyScrolling() {
        var body = document.body;
        body.style.overflow = '';
      }
    }, {
      key: "open",
      value: function open() {
        if (this.isOpen === true) {
          return;
        }

        this.isOpen = true;

        // Run onOpenStart callback
        if (typeof this.options.onOpenStart === 'function') {
          this.options.onOpenStart.call(this, this.el);
        }

        // Handle fixed Sidenav
        if (this._isCurrentlyFixed()) {
          anim.remove(this.el);
          anim({
            targets: this.el,
            translateX: 0,
            duration: 0,
            easing: 'easeOutQuad'
          });
          this._enableBodyScrolling();
          this._overlay.style.display = 'none';

          // Handle non-fixed Sidenav
        } else {
          if (this.options.preventScrolling) {
            this._preventBodyScrolling();
          }

          if (!this.isDragged || this.percentOpen != 1) {
            this._animateIn();
          }
        }
      }
    }, {
      key: "close",
      value: function close() {
        if (this.isOpen === false) {
          return;
        }

        this.isOpen = false;

        // Run onCloseStart callback
        if (typeof this.options.onCloseStart === 'function') {
          this.options.onCloseStart.call(this, this.el);
        }

        // Handle fixed Sidenav
        if (this._isCurrentlyFixed()) {
          var transformX = this.options.edge === 'left' ? '-105%' : '105%';
          this.el.style.transform = "translateX(" + transformX + ")";

          // Handle non-fixed Sidenav
        } else {
          this._enableBodyScrolling();

          if (!this.isDragged || this.percentOpen != 0) {
            this._animateOut();
          } else {
            this._overlay.style.display = 'none';
          }
        }
      }
    }, {
      key: "_animateIn",
      value: function _animateIn() {
        this._animateSidenavIn();
        this._animateOverlayIn();
      }
    }, {
      key: "_animateSidenavIn",
      value: function _animateSidenavIn() {
        var _this32 = this;

        var slideOutPercent = this.options.edge === 'left' ? -1 : 1;
        if (this.isDragged) {
          slideOutPercent = this.options.edge === 'left' ? slideOutPercent + this.percentOpen : slideOutPercent - this.percentOpen;
        }

        anim.remove(this.el);
        anim({
          targets: this.el,
          translateX: [slideOutPercent * 100 + "%", 0],
          duration: this.options.inDuration,
          easing: 'easeOutQuad',
          complete: function () {
            // Run onOpenEnd callback
            if (typeof _this32.options.onOpenEnd === 'function') {
              _this32.options.onOpenEnd.call(_this32, _this32.el);
            }
          }
        });
      }
    }, {
      key: "_animateOverlayIn",
      value: function _animateOverlayIn() {
        var start = 0;
        if (this.isDragged) {
          start = this.percentOpen;
        } else {
          $(this._overlay).css({
            display: 'block'
          });
        }

        anim.remove(this._overlay);
        anim({
          targets: this._overlay,
          opacity: [start, 1],
          duration: this.options.inDuration,
          easing: 'easeOutQuad'
        });
      }
    }, {
      key: "_animateOut",
      value: function _animateOut() {
        this._animateSidenavOut();
        this._animateOverlayOut();
      }
    }, {
      key: "_animateSidenavOut",
      value: function _animateSidenavOut() {
        var _this33 = this;

        var endPercent = this.options.edge === 'left' ? -1 : 1;
        var slideOutPercent = 0;
        if (this.isDragged) {
          slideOutPercent = this.options.edge === 'left' ? endPercent + this.percentOpen : endPercent - this.percentOpen;
        }

        anim.remove(this.el);
        anim({
          targets: this.el,
          translateX: [slideOutPercent * 100 + "%", endPercent * 105 + "%"],
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            // Run onOpenEnd callback
            if (typeof _this33.options.onCloseEnd === 'function') {
              _this33.options.onCloseEnd.call(_this33, _this33.el);
            }
          }
        });
      }
    }, {
      key: "_animateOverlayOut",
      value: function _animateOverlayOut() {
        var _this34 = this;

        anim.remove(this._overlay);
        anim({
          targets: this._overlay,
          opacity: 0,
          duration: this.options.outDuration,
          easing: 'easeOutQuad',
          complete: function () {
            $(_this34._overlay).css('display', 'none');
          }
        });
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Sidenav.__proto__ || Object.getPrototypeOf(Sidenav), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Sidenav;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Sidenav;
  }(Component);

  /**
   * @static
   * @memberof Sidenav
   * @type {Array.<Sidenav>}
   */


  Sidenav._sidenavs = [];

  M.Sidenav = Sidenav;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Sidenav, 'sidenav', 'M_Sidenav');
  }
})(cash, M.anime);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    throttle: 100,
    scrollOffset: 200, // offset - 200 allows elements near bottom of page to scroll
    activeClass: 'active',
    getActiveElement: function (id) {
      return 'a[href="#' + id + '"]';
    }
  };

  /**
   * @class
   *
   */

  var ScrollSpy = function (_Component9) {
    _inherits(ScrollSpy, _Component9);

    /**
     * Construct ScrollSpy instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function ScrollSpy(el, options) {
      _classCallCheck(this, ScrollSpy);

      var _this35 = _possibleConstructorReturn(this, (ScrollSpy.__proto__ || Object.getPrototypeOf(ScrollSpy)).call(this, ScrollSpy, el, options));

      _this35.el.M_ScrollSpy = _this35;

      /**
       * Options for the modal
       * @member Modal#options
       * @prop {Number} [throttle=100] - Throttle of scroll handler
       * @prop {Number} [scrollOffset=200] - Offset for centering element when scrolled to
       * @prop {String} [activeClass='active'] - Class applied to active elements
       * @prop {Function} [getActiveElement] - Used to find active element
       */
      _this35.options = $.extend({}, ScrollSpy.defaults, options);

      // setup
      ScrollSpy._elements.push(_this35);
      ScrollSpy._count++;
      ScrollSpy._increment++;
      _this35.tickId = -1;
      _this35.id = ScrollSpy._increment;
      _this35._setupEventHandlers();
      _this35._handleWindowScroll();
      return _this35;
    }

    _createClass(ScrollSpy, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        ScrollSpy._elements.splice(ScrollSpy._elements.indexOf(this), 1);
        ScrollSpy._elementsInView.splice(ScrollSpy._elementsInView.indexOf(this), 1);
        ScrollSpy._visibleElements.splice(ScrollSpy._visibleElements.indexOf(this.$el), 1);
        ScrollSpy._count--;
        this._removeEventHandlers();
        $(this.options.getActiveElement(this.$el.attr('id'))).removeClass(this.options.activeClass);
        this.el.M_ScrollSpy = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var throttledResize = M.throttle(this._handleWindowScroll, 200);
        this._handleThrottledResizeBound = throttledResize.bind(this);
        this._handleWindowScrollBound = this._handleWindowScroll.bind(this);
        if (ScrollSpy._count === 1) {
          window.addEventListener('scroll', this._handleWindowScrollBound);
          window.addEventListener('resize', this._handleThrottledResizeBound);
          document.body.addEventListener('click', this._handleTriggerClick);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (ScrollSpy._count === 0) {
          window.removeEventListener('scroll', this._handleWindowScrollBound);
          window.removeEventListener('resize', this._handleThrottledResizeBound);
          document.body.removeEventListener('click', this._handleTriggerClick);
        }
      }

      /**
       * Handle Trigger Click
       * @param {Event} e
       */

    }, {
      key: "_handleTriggerClick",
      value: function _handleTriggerClick(e) {
        var $trigger = $(e.target);
        for (var i = ScrollSpy._elements.length - 1; i >= 0; i--) {
          var scrollspy = ScrollSpy._elements[i];
          if ($trigger.is('a[href="#' + scrollspy.$el.attr('id') + '"]')) {
            e.preventDefault();
            var offset = scrollspy.$el.offset().top + 1;

            anim({
              targets: [document.documentElement, document.body],
              scrollTop: offset - scrollspy.options.scrollOffset,
              duration: 400,
              easing: 'easeOutCubic'
            });
            break;
          }
        }
      }

      /**
       * Handle Window Scroll
       */

    }, {
      key: "_handleWindowScroll",
      value: function _handleWindowScroll() {
        // unique tick id
        ScrollSpy._ticks++;

        // viewport rectangle
        var top = M.getDocumentScrollTop(),
            left = M.getDocumentScrollLeft(),
            right = left + window.innerWidth,
            bottom = top + window.innerHeight;

        // determine which elements are in view
        var intersections = ScrollSpy._findElements(top, right, bottom, left);
        for (var i = 0; i < intersections.length; i++) {
          var scrollspy = intersections[i];
          var lastTick = scrollspy.tickId;
          if (lastTick < 0) {
            // entered into view
            scrollspy._enter();
          }

          // update tick id
          scrollspy.tickId = ScrollSpy._ticks;
        }

        for (var _i = 0; _i < ScrollSpy._elementsInView.length; _i++) {
          var _scrollspy = ScrollSpy._elementsInView[_i];
          var _lastTick = _scrollspy.tickId;
          if (_lastTick >= 0 && _lastTick !== ScrollSpy._ticks) {
            // exited from view
            _scrollspy._exit();
            _scrollspy.tickId = -1;
          }
        }

        // remember elements in view for next tick
        ScrollSpy._elementsInView = intersections;
      }

      /**
       * Find elements that are within the boundary
       * @param {number} top
       * @param {number} right
       * @param {number} bottom
       * @param {number} left
       * @return {Array.<ScrollSpy>}   A collection of elements
       */

    }, {
      key: "_enter",
      value: function _enter() {
        ScrollSpy._visibleElements = ScrollSpy._visibleElements.filter(function (value) {
          return value.height() != 0;
        });

        if (ScrollSpy._visibleElements[0]) {
          $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).removeClass(this.options.activeClass);
          if (ScrollSpy._visibleElements[0][0].M_ScrollSpy && this.id < ScrollSpy._visibleElements[0][0].M_ScrollSpy.id) {
            ScrollSpy._visibleElements.unshift(this.$el);
          } else {
            ScrollSpy._visibleElements.push(this.$el);
          }
        } else {
          ScrollSpy._visibleElements.push(this.$el);
        }

        $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).addClass(this.options.activeClass);
      }
    }, {
      key: "_exit",
      value: function _exit() {
        var _this36 = this;

        ScrollSpy._visibleElements = ScrollSpy._visibleElements.filter(function (value) {
          return value.height() != 0;
        });

        if (ScrollSpy._visibleElements[0]) {
          $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).removeClass(this.options.activeClass);

          ScrollSpy._visibleElements = ScrollSpy._visibleElements.filter(function (el) {
            return el.attr('id') != _this36.$el.attr('id');
          });
          if (ScrollSpy._visibleElements[0]) {
            // Check if empty
            $(this.options.getActiveElement(ScrollSpy._visibleElements[0].attr('id'))).addClass(this.options.activeClass);
          }
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(ScrollSpy.__proto__ || Object.getPrototypeOf(ScrollSpy), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_ScrollSpy;
      }
    }, {
      key: "_findElements",
      value: function _findElements(top, right, bottom, left) {
        var hits = [];
        for (var i = 0; i < ScrollSpy._elements.length; i++) {
          var scrollspy = ScrollSpy._elements[i];
          var currTop = top + scrollspy.options.scrollOffset || 200;

          if (scrollspy.$el.height() > 0) {
            var elTop = scrollspy.$el.offset().top,
                elLeft = scrollspy.$el.offset().left,
                elRight = elLeft + scrollspy.$el.width(),
                elBottom = elTop + scrollspy.$el.height();

            var isIntersect = !(elLeft > right || elRight < left || elTop > bottom || elBottom < currTop);

            if (isIntersect) {
              hits.push(scrollspy);
            }
          }
        }
        return hits;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return ScrollSpy;
  }(Component);

  /**
   * @static
   * @memberof ScrollSpy
   * @type {Array.<ScrollSpy>}
   */


  ScrollSpy._elements = [];

  /**
   * @static
   * @memberof ScrollSpy
   * @type {Array.<ScrollSpy>}
   */
  ScrollSpy._elementsInView = [];

  /**
   * @static
   * @memberof ScrollSpy
   * @type {Array.<cash>}
   */
  ScrollSpy._visibleElements = [];

  /**
   * @static
   * @memberof ScrollSpy
   */
  ScrollSpy._count = 0;

  /**
   * @static
   * @memberof ScrollSpy
   */
  ScrollSpy._increment = 0;

  /**
   * @static
   * @memberof ScrollSpy
   */
  ScrollSpy._ticks = 0;

  M.ScrollSpy = ScrollSpy;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(ScrollSpy, 'scrollSpy', 'M_ScrollSpy');
  }
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    data: {}, // Autocomplete data set
    limit: Infinity, // Limit of results the autocomplete shows
    onAutocomplete: null, // Callback for when autocompleted
    minLength: 1, // Min characters before autocomplete starts
    sortFunction: function (a, b, inputString) {
      // Sort function for sorting autocomplete results
      return a.indexOf(inputString) - b.indexOf(inputString);
    }
  };

  /**
   * @class
   *
   */

  var Autocomplete = function (_Component10) {
    _inherits(Autocomplete, _Component10);

    /**
     * Construct Autocomplete instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Autocomplete(el, options) {
      _classCallCheck(this, Autocomplete);

      var _this37 = _possibleConstructorReturn(this, (Autocomplete.__proto__ || Object.getPrototypeOf(Autocomplete)).call(this, Autocomplete, el, options));

      _this37.el.M_Autocomplete = _this37;

      /**
       * Options for the autocomplete
       * @member Autocomplete#options
       * @prop {Number} duration
       * @prop {Number} dist
       * @prop {number} shift
       * @prop {number} padding
       * @prop {Boolean} fullWidth
       * @prop {Boolean} indicators
       * @prop {Boolean} noWrap
       * @prop {Function} onCycleTo
       */
      _this37.options = $.extend({}, Autocomplete.defaults, options);

      // Setup
      _this37.isOpen = false;
      _this37.count = 0;
      _this37.activeIndex = -1;
      _this37.oldVal;
      _this37.$inputField = _this37.$el.closest('.input-field');
      _this37.$active = $();
      _this37._mousedown = false;
      _this37._setupDropdown();

      _this37._setupEventHandlers();
      return _this37;
    }

    _createClass(Autocomplete, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._removeDropdown();
        this.el.M_Autocomplete = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleInputBlurBound = this._handleInputBlur.bind(this);
        this._handleInputKeyupAndFocusBound = this._handleInputKeyupAndFocus.bind(this);
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);
        this._handleContainerMousedownAndTouchstartBound = this._handleContainerMousedownAndTouchstart.bind(this);
        this._handleContainerMouseupAndTouchendBound = this._handleContainerMouseupAndTouchend.bind(this);

        this.el.addEventListener('blur', this._handleInputBlurBound);
        this.el.addEventListener('keyup', this._handleInputKeyupAndFocusBound);
        this.el.addEventListener('focus', this._handleInputKeyupAndFocusBound);
        this.el.addEventListener('keydown', this._handleInputKeydownBound);
        this.el.addEventListener('click', this._handleInputClickBound);
        this.container.addEventListener('mousedown', this._handleContainerMousedownAndTouchstartBound);
        this.container.addEventListener('mouseup', this._handleContainerMouseupAndTouchendBound);

        if (typeof window.ontouchstart !== 'undefined') {
          this.container.addEventListener('touchstart', this._handleContainerMousedownAndTouchstartBound);
          this.container.addEventListener('touchend', this._handleContainerMouseupAndTouchendBound);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('blur', this._handleInputBlurBound);
        this.el.removeEventListener('keyup', this._handleInputKeyupAndFocusBound);
        this.el.removeEventListener('focus', this._handleInputKeyupAndFocusBound);
        this.el.removeEventListener('keydown', this._handleInputKeydownBound);
        this.el.removeEventListener('click', this._handleInputClickBound);
        this.container.removeEventListener('mousedown', this._handleContainerMousedownAndTouchstartBound);
        this.container.removeEventListener('mouseup', this._handleContainerMouseupAndTouchendBound);

        if (typeof window.ontouchstart !== 'undefined') {
          this.container.removeEventListener('touchstart', this._handleContainerMousedownAndTouchstartBound);
          this.container.removeEventListener('touchend', this._handleContainerMouseupAndTouchendBound);
        }
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_setupDropdown",
      value: function _setupDropdown() {
        var _this38 = this;

        this.container = document.createElement('ul');
        this.container.id = "autocomplete-options-" + M.guid();
        $(this.container).addClass('autocomplete-content dropdown-content');
        this.$inputField.append(this.container);
        this.el.setAttribute('data-target', this.container.id);

        this.dropdown = M.Dropdown.init(this.el, {
          autoFocus: false,
          closeOnClick: false,
          coverTrigger: false,
          onItemClick: function (itemEl) {
            _this38.selectOption($(itemEl));
          }
        });

        // Sketchy removal of dropdown click handler
        this.el.removeEventListener('click', this.dropdown._handleClickBound);
      }

      /**
       * Remove dropdown
       */

    }, {
      key: "_removeDropdown",
      value: function _removeDropdown() {
        this.container.parentNode.removeChild(this.container);
      }

      /**
       * Handle Input Blur
       */

    }, {
      key: "_handleInputBlur",
      value: function _handleInputBlur() {
        if (!this._mousedown) {
          this.close();
          this._resetAutocomplete();
        }
      }

      /**
       * Handle Input Keyup and Focus
       * @param {Event} e
       */

    }, {
      key: "_handleInputKeyupAndFocus",
      value: function _handleInputKeyupAndFocus(e) {
        if (e.type === 'keyup') {
          Autocomplete._keydown = false;
        }

        this.count = 0;
        var val = this.el.value.toLowerCase();

        // Don't capture enter or arrow key usage.
        if (e.keyCode === 13 || e.keyCode === 38 || e.keyCode === 40) {
          return;
        }

        // Check if the input isn't empty
        // Check if focus triggered by tab
        if (this.oldVal !== val && (M.tabPressed || e.type !== 'focus')) {
          this.open();
        }

        // Update oldVal
        this.oldVal = val;
      }

      /**
       * Handle Input Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        Autocomplete._keydown = true;

        // Arrow keys and enter key usage
        var keyCode = e.keyCode,
            liElement = void 0,
            numItems = $(this.container).children('li').length;

        // select element on Enter
        if (keyCode === M.keys.ENTER && this.activeIndex >= 0) {
          liElement = $(this.container).children('li').eq(this.activeIndex);
          if (liElement.length) {
            this.selectOption(liElement);
            e.preventDefault();
          }
          return;
        }

        // Capture up and down key
        if (keyCode === M.keys.ARROW_UP || keyCode === M.keys.ARROW_DOWN) {
          e.preventDefault();

          if (keyCode === M.keys.ARROW_UP && this.activeIndex > 0) {
            this.activeIndex--;
          }

          if (keyCode === M.keys.ARROW_DOWN && this.activeIndex < numItems - 1) {
            this.activeIndex++;
          }

          this.$active.removeClass('active');
          if (this.activeIndex >= 0) {
            this.$active = $(this.container).children('li').eq(this.activeIndex);
            this.$active.addClass('active');
          }
        }
      }

      /**
       * Handle Input Click
       * @param {Event} e
       */

    }, {
      key: "_handleInputClick",
      value: function _handleInputClick(e) {
        this.open();
      }

      /**
       * Handle Container Mousedown and Touchstart
       * @param {Event} e
       */

    }, {
      key: "_handleContainerMousedownAndTouchstart",
      value: function _handleContainerMousedownAndTouchstart(e) {
        this._mousedown = true;
      }

      /**
       * Handle Container Mouseup and Touchend
       * @param {Event} e
       */

    }, {
      key: "_handleContainerMouseupAndTouchend",
      value: function _handleContainerMouseupAndTouchend(e) {
        this._mousedown = false;
      }

      /**
       * Highlight partial match
       */

    }, {
      key: "_highlight",
      value: function _highlight(string, $el) {
        var img = $el.find('img');
        var matchStart = $el.text().toLowerCase().indexOf('' + string.toLowerCase() + ''),
            matchEnd = matchStart + string.length - 1,
            beforeMatch = $el.text().slice(0, matchStart),
            matchText = $el.text().slice(matchStart, matchEnd + 1),
            afterMatch = $el.text().slice(matchEnd + 1);
        $el.html("<span>" + beforeMatch + "<span class='highlight'>" + matchText + "</span>" + afterMatch + "</span>");
        if (img.length) {
          $el.prepend(img);
        }
      }

      /**
       * Reset current element position
       */

    }, {
      key: "_resetCurrentElement",
      value: function _resetCurrentElement() {
        this.activeIndex = -1;
        this.$active.removeClass('active');
      }

      /**
       * Reset autocomplete elements
       */

    }, {
      key: "_resetAutocomplete",
      value: function _resetAutocomplete() {
        $(this.container).empty();
        this._resetCurrentElement();
        this.oldVal = null;
        this.isOpen = false;
        this._mousedown = false;
      }

      /**
       * Select autocomplete option
       * @param {Element} el  Autocomplete option list item element
       */

    }, {
      key: "selectOption",
      value: function selectOption(el) {
        var text = el.text().trim();
        this.el.value = text;
        this.$el.trigger('change');
        this._resetAutocomplete();
        this.close();

        // Handle onAutocomplete callback.
        if (typeof this.options.onAutocomplete === 'function') {
          this.options.onAutocomplete.call(this, text);
        }
      }

      /**
       * Render dropdown content
       * @param {Object} data  data set
       * @param {String} val  current input value
       */

    }, {
      key: "_renderDropdown",
      value: function _renderDropdown(data, val) {
        var _this39 = this;

        this._resetAutocomplete();

        var matchingData = [];

        // Gather all matching data
        for (var key in data) {
          if (data.hasOwnProperty(key) && key.toLowerCase().indexOf(val) !== -1) {
            // Break if past limit
            if (this.count >= this.options.limit) {
              break;
            }

            var entry = {
              data: data[key],
              key: key
            };
            matchingData.push(entry);

            this.count++;
          }
        }

        // Sort
        if (this.options.sortFunction) {
          var sortFunctionBound = function (a, b) {
            return _this39.options.sortFunction(a.key.toLowerCase(), b.key.toLowerCase(), val.toLowerCase());
          };
          matchingData.sort(sortFunctionBound);
        }

        // Render
        for (var i = 0; i < matchingData.length; i++) {
          var _entry = matchingData[i];
          var $autocompleteOption = $('<li></li>');
          if (!!_entry.data) {
            $autocompleteOption.append("<img src=\"" + _entry.data + "\" class=\"right circle\"><span>" + _entry.key + "</span>");
          } else {
            $autocompleteOption.append('<span>' + _entry.key + '</span>');
          }

          $(this.container).append($autocompleteOption);
          this._highlight(val, $autocompleteOption);
        }
      }

      /**
       * Open Autocomplete Dropdown
       */

    }, {
      key: "open",
      value: function open() {
        var val = this.el.value.toLowerCase();

        this._resetAutocomplete();

        if (val.length >= this.options.minLength) {
          this.isOpen = true;
          this._renderDropdown(this.options.data, val);
        }

        // Open dropdown
        if (!this.dropdown.isOpen) {
          this.dropdown.open();
        } else {
          // Recalculate dropdown when its already open
          this.dropdown.recalculateDimensions();
        }
      }

      /**
       * Close Autocomplete Dropdown
       */

    }, {
      key: "close",
      value: function close() {
        this.dropdown.close();
      }

      /**
       * Update Data
       * @param {Object} data
       */

    }, {
      key: "updateData",
      value: function updateData(data) {
        var val = this.el.value.toLowerCase();
        this.options.data = data;

        if (this.isOpen) {
          this._renderDropdown(data, val);
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Autocomplete.__proto__ || Object.getPrototypeOf(Autocomplete), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Autocomplete;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Autocomplete;
  }(Component);

  /**
   * @static
   * @memberof Autocomplete
   */


  Autocomplete._keydown = false;

  M.Autocomplete = Autocomplete;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Autocomplete, 'autocomplete', 'M_Autocomplete');
  }
})(cash);
;(function ($) {
  // Function to update labels of text fields
  M.updateTextFields = function () {
    var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea';
    $(input_selector).each(function (element, index) {
      var $this = $(this);
      if (element.value.length > 0 || $(element).is(':focus') || element.autofocus || $this.attr('placeholder') !== null) {
        $this.siblings('label').addClass('active');
      } else if (element.validity) {
        $this.siblings('label').toggleClass('active', element.validity.badInput === true);
      } else {
        $this.siblings('label').removeClass('active');
      }
    });
  };

  M.validate_field = function (object) {
    var hasLength = object.attr('data-length') !== null;
    var lenAttr = parseInt(object.attr('data-length'));
    var len = object[0].value.length;

    if (len === 0 && object[0].validity.badInput === false && !object.is(':required')) {
      if (object.hasClass('validate')) {
        object.removeClass('valid');
        object.removeClass('invalid');
      }
    } else {
      if (object.hasClass('validate')) {
        // Check for character counter attributes
        if (object.is(':valid') && hasLength && len <= lenAttr || object.is(':valid') && !hasLength) {
          object.removeClass('invalid');
          object.addClass('valid');
        } else {
          object.removeClass('valid');
          object.addClass('invalid');
        }
      }
    }
  };

  M.textareaAutoResize = function ($textarea) {
    // Wrap if native element
    if ($textarea instanceof Element) {
      $textarea = $($textarea);
    }

    if (!$textarea.length) {
      console.error('No textarea element found');
      return;
    }

    // Textarea Auto Resize
    var hiddenDiv = $('.hiddendiv').first();
    if (!hiddenDiv.length) {
      hiddenDiv = $('<div class="hiddendiv common"></div>');
      $('body').append(hiddenDiv);
    }

    // Set font properties of hiddenDiv
    var fontFamily = $textarea.css('font-family');
    var fontSize = $textarea.css('font-size');
    var lineHeight = $textarea.css('line-height');

    // Firefox can't handle padding shorthand.
    var paddingTop = $textarea.css('padding-top');
    var paddingRight = $textarea.css('padding-right');
    var paddingBottom = $textarea.css('padding-bottom');
    var paddingLeft = $textarea.css('padding-left');

    if (fontSize) {
      hiddenDiv.css('font-size', fontSize);
    }
    if (fontFamily) {
      hiddenDiv.css('font-family', fontFamily);
    }
    if (lineHeight) {
      hiddenDiv.css('line-height', lineHeight);
    }
    if (paddingTop) {
      hiddenDiv.css('padding-top', paddingTop);
    }
    if (paddingRight) {
      hiddenDiv.css('padding-right', paddingRight);
    }
    if (paddingBottom) {
      hiddenDiv.css('padding-bottom', paddingBottom);
    }
    if (paddingLeft) {
      hiddenDiv.css('padding-left', paddingLeft);
    }

    // Set original-height, if none
    if (!$textarea.data('original-height')) {
      $textarea.data('original-height', $textarea.height());
    }

    if ($textarea.attr('wrap') === 'off') {
      hiddenDiv.css('overflow-wrap', 'normal').css('white-space', 'pre');
    }

    hiddenDiv.text($textarea[0].value + '\n');
    var content = hiddenDiv.html().replace(/\n/g, '<br>');
    hiddenDiv.html(content);

    // When textarea is hidden, width goes crazy.
    // Approximate with half of window size

    if ($textarea[0].offsetWidth > 0 && $textarea[0].offsetHeight > 0) {
      hiddenDiv.css('width', $textarea.width() + 'px');
    } else {
      hiddenDiv.css('width', window.innerWidth / 2 + 'px');
    }

    /**
     * Resize if the new height is greater than the
     * original height of the textarea
     */
    if ($textarea.data('original-height') <= hiddenDiv.innerHeight()) {
      $textarea.css('height', hiddenDiv.innerHeight() + 'px');
    } else if ($textarea[0].value.length < $textarea.data('previous-length')) {
      /**
       * In case the new height is less than original height, it
       * means the textarea has less text than before
       * So we set the height to the original one
       */
      $textarea.css('height', $textarea.data('original-height') + 'px');
    }
    $textarea.data('previous-length', $textarea[0].value.length);
  };

  $(document).ready(function () {
    // Text based inputs
    var input_selector = 'input[type=text], input[type=password], input[type=email], input[type=url], input[type=tel], input[type=number], input[type=search], input[type=date], input[type=time], textarea';

    // Add active if form auto complete
    $(document).on('change', input_selector, function () {
      if (this.value.length !== 0 || $(this).attr('placeholder') !== null) {
        $(this).siblings('label').addClass('active');
      }
      M.validate_field($(this));
    });

    // Add active if input element has been pre-populated on document ready
    $(document).ready(function () {
      M.updateTextFields();
    });

    // HTML DOM FORM RESET handling
    $(document).on('reset', function (e) {
      var formReset = $(e.target);
      if (formReset.is('form')) {
        formReset.find(input_selector).removeClass('valid').removeClass('invalid');
        formReset.find(input_selector).each(function (e) {
          if (this.value.length) {
            $(this).siblings('label').removeClass('active');
          }
        });

        // Reset select (after native reset)
        setTimeout(function () {
          formReset.find('select').each(function () {
            // check if initialized
            if (this.M_FormSelect) {
              $(this).trigger('change');
            }
          });
        }, 0);
      }
    });

    /**
     * Add active when element has focus
     * @param {Event} e
     */
    document.addEventListener('focus', function (e) {
      if ($(e.target).is(input_selector)) {
        $(e.target).siblings('label, .prefix').addClass('active');
      }
    }, true);

    /**
     * Remove active when element is blurred
     * @param {Event} e
     */
    document.addEventListener('blur', function (e) {
      var $inputElement = $(e.target);
      if ($inputElement.is(input_selector)) {
        var selector = '.prefix';

        if ($inputElement[0].value.length === 0 && $inputElement[0].validity.badInput !== true && $inputElement.attr('placeholder') === null) {
          selector += ', label';
        }
        $inputElement.siblings(selector).removeClass('active');
        M.validate_field($inputElement);
      }
    }, true);

    // Radio and Checkbox focus class
    var radio_checkbox = 'input[type=radio], input[type=checkbox]';
    $(document).on('keyup', radio_checkbox, function (e) {
      // TAB, check if tabbing to radio or checkbox.
      if (e.which === M.keys.TAB) {
        $(this).addClass('tabbed');
        var $this = $(this);
        $this.one('blur', function (e) {
          $(this).removeClass('tabbed');
        });
        return;
      }
    });

    var text_area_selector = '.materialize-textarea';
    $(text_area_selector).each(function () {
      var $textarea = $(this);
      /**
       * Resize textarea on document load after storing
       * the original height and the original length
       */
      $textarea.data('original-height', $textarea.height());
      $textarea.data('previous-length', this.value.length);
      M.textareaAutoResize($textarea);
    });

    $(document).on('keyup', text_area_selector, function () {
      M.textareaAutoResize($(this));
    });
    $(document).on('keydown', text_area_selector, function () {
      M.textareaAutoResize($(this));
    });

    // File Input Path
    $(document).on('change', '.file-field input[type="file"]', function () {
      var file_field = $(this).closest('.file-field');
      var path_input = file_field.find('input.file-path');
      var files = $(this)[0].files;
      var file_names = [];
      for (var i = 0; i < files.length; i++) {
        file_names.push(files[i].name);
      }
      path_input[0].value = file_names.join(', ');
      path_input.trigger('change');
    });
  }); // End of $(document).ready
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    indicators: true,
    height: 400,
    duration: 500,
    interval: 6000
  };

  /**
   * @class
   *
   */

  var Slider = function (_Component11) {
    _inherits(Slider, _Component11);

    /**
     * Construct Slider instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Slider(el, options) {
      _classCallCheck(this, Slider);

      var _this40 = _possibleConstructorReturn(this, (Slider.__proto__ || Object.getPrototypeOf(Slider)).call(this, Slider, el, options));

      _this40.el.M_Slider = _this40;

      /**
       * Options for the modal
       * @member Slider#options
       * @prop {Boolean} [indicators=true] - Show indicators
       * @prop {Number} [height=400] - height of slider
       * @prop {Number} [duration=500] - Length in ms of slide transition
       * @prop {Number} [interval=6000] - Length in ms of slide interval
       */
      _this40.options = $.extend({}, Slider.defaults, options);

      // setup
      _this40.$slider = _this40.$el.find('.slides');
      _this40.$slides = _this40.$slider.children('li');
      _this40.activeIndex = _this40.$slides.filter(function (item) {
        return $(item).hasClass('active');
      }).first().index();
      if (_this40.activeIndex != -1) {
        _this40.$active = _this40.$slides.eq(_this40.activeIndex);
      }

      _this40._setSliderHeight();

      // Set initial positions of captions
      _this40.$slides.find('.caption').each(function (el) {
        _this40._animateCaptionIn(el, 0);
      });

      // Move img src into background-image
      _this40.$slides.find('img').each(function (el) {
        var placeholderBase64 = 'data:image/gif;base64,R0lGODlhAQABAIABAP///wAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==';
        if ($(el).attr('src') !== placeholderBase64) {
          $(el).css('background-image', 'url("' + $(el).attr('src') + '")');
          $(el).attr('src', placeholderBase64);
        }
      });

      _this40._setupIndicators();

      // Show active slide
      if (_this40.$active) {
        _this40.$active.css('display', 'block');
      } else {
        _this40.$slides.first().addClass('active');
        anim({
          targets: _this40.$slides.first()[0],
          opacity: 1,
          duration: _this40.options.duration,
          easing: 'easeOutQuad'
        });

        _this40.activeIndex = 0;
        _this40.$active = _this40.$slides.eq(_this40.activeIndex);

        // Update indicators
        if (_this40.options.indicators) {
          _this40.$indicators.eq(_this40.activeIndex).addClass('active');
        }
      }

      // Adjust height to current slide
      _this40.$active.find('img').each(function (el) {
        anim({
          targets: _this40.$active.find('.caption')[0],
          opacity: 1,
          translateX: 0,
          translateY: 0,
          duration: _this40.options.duration,
          easing: 'easeOutQuad'
        });
      });

      _this40._setupEventHandlers();

      // auto scroll
      _this40.start();
      return _this40;
    }

    _createClass(Slider, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this.pause();
        this._removeIndicators();
        this._removeEventHandlers();
        this.el.M_Slider = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this41 = this;

        this._handleIntervalBound = this._handleInterval.bind(this);
        this._handleIndicatorClickBound = this._handleIndicatorClick.bind(this);

        if (this.options.indicators) {
          this.$indicators.each(function (el) {
            el.addEventListener('click', _this41._handleIndicatorClickBound);
          });
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this42 = this;

        if (this.options.indicators) {
          this.$indicators.each(function (el) {
            el.removeEventListener('click', _this42._handleIndicatorClickBound);
          });
        }
      }

      /**
       * Handle indicator click
       * @param {Event} e
       */

    }, {
      key: "_handleIndicatorClick",
      value: function _handleIndicatorClick(e) {
        var currIndex = $(e.target).index();
        this.set(currIndex);
      }

      /**
       * Handle Interval
       */

    }, {
      key: "_handleInterval",
      value: function _handleInterval() {
        var newActiveIndex = this.$slider.find('.active').index();
        if (this.$slides.length === newActiveIndex + 1) newActiveIndex = 0;
        // loop to start
        else newActiveIndex += 1;

        this.set(newActiveIndex);
      }

      /**
       * Animate in caption
       * @param {Element} caption
       * @param {Number} duration
       */

    }, {
      key: "_animateCaptionIn",
      value: function _animateCaptionIn(caption, duration) {
        var animOptions = {
          targets: caption,
          opacity: 0,
          duration: duration,
          easing: 'easeOutQuad'
        };

        if ($(caption).hasClass('center-align')) {
          animOptions.translateY = -100;
        } else if ($(caption).hasClass('right-align')) {
          animOptions.translateX = 100;
        } else if ($(caption).hasClass('left-align')) {
          animOptions.translateX = -100;
        }

        anim(animOptions);
      }

      /**
       * Set height of slider
       */

    }, {
      key: "_setSliderHeight",
      value: function _setSliderHeight() {
        // If fullscreen, do nothing
        if (!this.$el.hasClass('fullscreen')) {
          if (this.options.indicators) {
            // Add height if indicators are present
            this.$el.css('height', this.options.height + 40 + 'px');
          } else {
            this.$el.css('height', this.options.height + 'px');
          }
          this.$slider.css('height', this.options.height + 'px');
        }
      }

      /**
       * Setup indicators
       */

    }, {
      key: "_setupIndicators",
      value: function _setupIndicators() {
        var _this43 = this;

        if (this.options.indicators) {
          this.$indicators = $('<ul class="indicators"></ul>');
          this.$slides.each(function (el, index) {
            var $indicator = $('<li class="indicator-item"></li>');
            _this43.$indicators.append($indicator[0]);
          });
          this.$el.append(this.$indicators[0]);
          this.$indicators = this.$indicators.children('li.indicator-item');
        }
      }

      /**
       * Remove indicators
       */

    }, {
      key: "_removeIndicators",
      value: function _removeIndicators() {
        this.$el.find('ul.indicators').remove();
      }

      /**
       * Cycle to nth item
       * @param {Number} index
       */

    }, {
      key: "set",
      value: function set(index) {
        var _this44 = this;

        // Wrap around indices.
        if (index >= this.$slides.length) index = 0;else if (index < 0) index = this.$slides.length - 1;

        // Only do if index changes
        if (this.activeIndex != index) {
          this.$active = this.$slides.eq(this.activeIndex);
          var $caption = this.$active.find('.caption');
          this.$active.removeClass('active');

          anim({
            targets: this.$active[0],
            opacity: 0,
            duration: this.options.duration,
            easing: 'easeOutQuad',
            complete: function () {
              _this44.$slides.not('.active').each(function (el) {
                anim({
                  targets: el,
                  opacity: 0,
                  translateX: 0,
                  translateY: 0,
                  duration: 0,
                  easing: 'easeOutQuad'
                });
              });
            }
          });

          this._animateCaptionIn($caption[0], this.options.duration);

          // Update indicators
          if (this.options.indicators) {
            this.$indicators.eq(this.activeIndex).removeClass('active');
            this.$indicators.eq(index).addClass('active');
          }

          anim({
            targets: this.$slides.eq(index)[0],
            opacity: 1,
            duration: this.options.duration,
            easing: 'easeOutQuad'
          });

          anim({
            targets: this.$slides.eq(index).find('.caption')[0],
            opacity: 1,
            translateX: 0,
            translateY: 0,
            duration: this.options.duration,
            delay: this.options.duration,
            easing: 'easeOutQuad'
          });

          this.$slides.eq(index).addClass('active');
          this.activeIndex = index;

          // Reset interval
          this.start();
        }
      }

      /**
       * Pause slider interval
       */

    }, {
      key: "pause",
      value: function pause() {
        clearInterval(this.interval);
      }

      /**
       * Start slider interval
       */

    }, {
      key: "start",
      value: function start() {
        clearInterval(this.interval);
        this.interval = setInterval(this._handleIntervalBound, this.options.duration + this.options.interval);
      }

      /**
       * Move to next slide
       */

    }, {
      key: "next",
      value: function next() {
        var newIndex = this.activeIndex + 1;

        // Wrap around indices.
        if (newIndex >= this.$slides.length) newIndex = 0;else if (newIndex < 0) newIndex = this.$slides.length - 1;

        this.set(newIndex);
      }

      /**
       * Move to previous slide
       */

    }, {
      key: "prev",
      value: function prev() {
        var newIndex = this.activeIndex - 1;

        // Wrap around indices.
        if (newIndex >= this.$slides.length) newIndex = 0;else if (newIndex < 0) newIndex = this.$slides.length - 1;

        this.set(newIndex);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Slider.__proto__ || Object.getPrototypeOf(Slider), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Slider;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Slider;
  }(Component);

  M.Slider = Slider;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Slider, 'slider', 'M_Slider');
  }
})(cash, M.anime);
;(function ($, anim) {
  $(document).on('click', '.card', function (e) {
    if ($(this).children('.card-reveal').length) {
      var $card = $(e.target).closest('.card');
      if ($card.data('initialOverflow') === undefined) {
        $card.data('initialOverflow', $card.css('overflow') === undefined ? '' : $card.css('overflow'));
      }
      var $cardReveal = $(this).find('.card-reveal');
      if ($(e.target).is($('.card-reveal .card-title')) || $(e.target).is($('.card-reveal .card-title i'))) {
        // Make Reveal animate down and display none
        anim({
          targets: $cardReveal[0],
          translateY: 0,
          duration: 225,
          easing: 'easeInOutQuad',
          complete: function (anim) {
            var el = anim.animatables[0].target;
            $(el).css({ display: 'none' });
            $card.css('overflow', $card.data('initialOverflow'));
          }
        });
      } else if ($(e.target).is($('.card .activator')) || $(e.target).is($('.card .activator i'))) {
        $card.css('overflow', 'hidden');
        $cardReveal.css({ display: 'block' });
        anim({
          targets: $cardReveal[0],
          translateY: '-100%',
          duration: 300,
          easing: 'easeInOutQuad'
        });
      }
    }
  });
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    data: [],
    placeholder: '',
    secondaryPlaceholder: '',
    autocompleteOptions: {},
    limit: Infinity,
    onChipAdd: null,
    onChipSelect: null,
    onChipDelete: null
  };

  /**
   * @typedef {Object} chip
   * @property {String} tag  chip tag string
   * @property {String} [image]  chip avatar image string
   */

  /**
   * @class
   *
   */

  var Chips = function (_Component12) {
    _inherits(Chips, _Component12);

    /**
     * Construct Chips instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Chips(el, options) {
      _classCallCheck(this, Chips);

      var _this45 = _possibleConstructorReturn(this, (Chips.__proto__ || Object.getPrototypeOf(Chips)).call(this, Chips, el, options));

      _this45.el.M_Chips = _this45;

      /**
       * Options for the modal
       * @member Chips#options
       * @prop {Array} data
       * @prop {String} placeholder
       * @prop {String} secondaryPlaceholder
       * @prop {Object} autocompleteOptions
       */
      _this45.options = $.extend({}, Chips.defaults, options);

      _this45.$el.addClass('chips input-field');
      _this45.chipsData = [];
      _this45.$chips = $();
      _this45._setupInput();
      _this45.hasAutocomplete = Object.keys(_this45.options.autocompleteOptions).length > 0;

      // Set input id
      if (!_this45.$input.attr('id')) {
        _this45.$input.attr('id', M.guid());
      }

      // Render initial chips
      if (_this45.options.data.length) {
        _this45.chipsData = _this45.options.data;
        _this45._renderChips(_this45.chipsData);
      }

      // Setup autocomplete if needed
      if (_this45.hasAutocomplete) {
        _this45._setupAutocomplete();
      }

      _this45._setPlaceholder();
      _this45._setupLabel();
      _this45._setupEventHandlers();
      return _this45;
    }

    _createClass(Chips, [{
      key: "getData",


      /**
       * Get Chips Data
       */
      value: function getData() {
        return this.chipsData;
      }

      /**
       * Teardown component
       */

    }, {
      key: "destroy",
      value: function destroy() {
        this._removeEventHandlers();
        this.$chips.remove();
        this.el.M_Chips = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleChipClickBound = this._handleChipClick.bind(this);
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputFocusBound = this._handleInputFocus.bind(this);
        this._handleInputBlurBound = this._handleInputBlur.bind(this);

        this.el.addEventListener('click', this._handleChipClickBound);
        document.addEventListener('keydown', Chips._handleChipsKeydown);
        document.addEventListener('keyup', Chips._handleChipsKeyup);
        this.el.addEventListener('blur', Chips._handleChipsBlur, true);
        this.$input[0].addEventListener('focus', this._handleInputFocusBound);
        this.$input[0].addEventListener('blur', this._handleInputBlurBound);
        this.$input[0].addEventListener('keydown', this._handleInputKeydownBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleChipClickBound);
        document.removeEventListener('keydown', Chips._handleChipsKeydown);
        document.removeEventListener('keyup', Chips._handleChipsKeyup);
        this.el.removeEventListener('blur', Chips._handleChipsBlur, true);
        this.$input[0].removeEventListener('focus', this._handleInputFocusBound);
        this.$input[0].removeEventListener('blur', this._handleInputBlurBound);
        this.$input[0].removeEventListener('keydown', this._handleInputKeydownBound);
      }

      /**
       * Handle Chip Click
       * @param {Event} e
       */

    }, {
      key: "_handleChipClick",
      value: function _handleChipClick(e) {
        var $chip = $(e.target).closest('.chip');
        var clickedClose = $(e.target).is('.close');
        if ($chip.length) {
          var index = $chip.index();
          if (clickedClose) {
            // delete chip
            this.deleteChip(index);
            this.$input[0].focus();
          } else {
            // select chip
            this.selectChip(index);
          }

          // Default handle click to focus on input
        } else {
          this.$input[0].focus();
        }
      }

      /**
       * Handle Chips Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleInputFocus",


      /**
       * Handle Input Focus
       */
      value: function _handleInputFocus() {
        this.$el.addClass('focus');
      }

      /**
       * Handle Input Blur
       */

    }, {
      key: "_handleInputBlur",
      value: function _handleInputBlur() {
        this.$el.removeClass('focus');
      }

      /**
       * Handle Input Keydown
       * @param {Event} e
       */

    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        Chips._keydown = true;

        // enter
        if (e.keyCode === 13) {
          // Override enter if autocompleting.
          if (this.hasAutocomplete && this.autocomplete && this.autocomplete.isOpen) {
            return;
          }

          e.preventDefault();
          this.addChip({
            tag: this.$input[0].value
          });
          this.$input[0].value = '';

          // delete or left
        } else if ((e.keyCode === 8 || e.keyCode === 37) && this.$input[0].value === '' && this.chipsData.length) {
          e.preventDefault();
          this.selectChip(this.chipsData.length - 1);
        }
      }

      /**
       * Render Chip
       * @param {chip} chip
       * @return {Element}
       */

    }, {
      key: "_renderChip",
      value: function _renderChip(chip) {
        if (!chip.tag) {
          return;
        }

        var renderedChip = document.createElement('div');
        var closeIcon = document.createElement('i');
        renderedChip.classList.add('chip');
        renderedChip.textContent = chip.tag;
        renderedChip.setAttribute('tabindex', 0);
        $(closeIcon).addClass('material-icons close');
        closeIcon.textContent = 'close';

        // attach image if needed
        if (chip.image) {
          var img = document.createElement('img');
          img.setAttribute('src', chip.image);
          renderedChip.insertBefore(img, renderedChip.firstChild);
        }

        renderedChip.appendChild(closeIcon);
        return renderedChip;
      }

      /**
       * Render Chips
       */

    }, {
      key: "_renderChips",
      value: function _renderChips() {
        this.$chips.remove();
        for (var i = 0; i < this.chipsData.length; i++) {
          var chipEl = this._renderChip(this.chipsData[i]);
          this.$el.append(chipEl);
          this.$chips.add(chipEl);
        }

        // move input to end
        this.$el.append(this.$input[0]);
      }

      /**
       * Setup Autocomplete
       */

    }, {
      key: "_setupAutocomplete",
      value: function _setupAutocomplete() {
        var _this46 = this;

        this.options.autocompleteOptions.onAutocomplete = function (val) {
          _this46.addChip({
            tag: val
          });
          _this46.$input[0].value = '';
          _this46.$input[0].focus();
        };

        this.autocomplete = M.Autocomplete.init(this.$input[0], this.options.autocompleteOptions);
      }

      /**
       * Setup Input
       */

    }, {
      key: "_setupInput",
      value: function _setupInput() {
        this.$input = this.$el.find('input');
        if (!this.$input.length) {
          this.$input = $('<input></input>');
          this.$el.append(this.$input);
        }

        this.$input.addClass('input');
      }

      /**
       * Setup Label
       */

    }, {
      key: "_setupLabel",
      value: function _setupLabel() {
        this.$label = this.$el.find('label');
        if (this.$label.length) {
          this.$label.setAttribute('for', this.$input.attr('id'));
        }
      }

      /**
       * Set placeholder
       */

    }, {
      key: "_setPlaceholder",
      value: function _setPlaceholder() {
        if (this.chipsData !== undefined && !this.chipsData.length && this.options.placeholder) {
          $(this.$input).prop('placeholder', this.options.placeholder);
        } else if ((this.chipsData === undefined || !!this.chipsData.length) && this.options.secondaryPlaceholder) {
          $(this.$input).prop('placeholder', this.options.secondaryPlaceholder);
        }
      }

      /**
       * Check if chip is valid
       * @param {chip} chip
       */

    }, {
      key: "_isValid",
      value: function _isValid(chip) {
        if (chip.hasOwnProperty('tag') && chip.tag !== '') {
          var exists = false;
          for (var i = 0; i < this.chipsData.length; i++) {
            if (this.chipsData[i].tag === chip.tag) {
              exists = true;
              break;
            }
          }
          return !exists;
        }

        return false;
      }

      /**
       * Add chip
       * @param {chip} chip
       */

    }, {
      key: "addChip",
      value: function addChip(chip) {
        if (!this._isValid(chip) || this.chipsData.length >= this.options.limit) {
          return;
        }

        var renderedChip = this._renderChip(chip);
        this.$chips.add(renderedChip);
        this.chipsData.push(chip);
        $(this.$input).before(renderedChip);
        this._setPlaceholder();

        // fire chipAdd callback
        if (typeof this.options.onChipAdd === 'function') {
          this.options.onChipAdd.call(this, this.$el, renderedChip);
        }
      }

      /**
       * Delete chip
       * @param {Number} chip
       */

    }, {
      key: "deleteChip",
      value: function deleteChip(chipIndex) {
        var $chip = this.$chips.eq(chipIndex);
        this.$chips.eq(chipIndex).remove();
        this.$chips = this.$chips.filter(function (el) {
          return $(el).index() >= 0;
        });
        this.chipsData.splice(chipIndex, 1);
        this._setPlaceholder();

        // fire chipDelete callback
        if (typeof this.options.onChipDelete === 'function') {
          this.options.onChipDelete.call(this, this.$el, $chip[0]);
        }
      }

      /**
       * Select chip
       * @param {Number} chip
       */

    }, {
      key: "selectChip",
      value: function selectChip(chipIndex) {
        var $chip = this.$chips.eq(chipIndex);
        this._selectedChip = $chip;
        $chip[0].focus();

        // fire chipSelect callback
        if (typeof this.options.onChipSelect === 'function') {
          this.options.onChipSelect.call(this, this.$el, $chip[0]);
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Chips.__proto__ || Object.getPrototypeOf(Chips), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Chips;
      }
    }, {
      key: "_handleChipsKeydown",
      value: function _handleChipsKeydown(e) {
        Chips._keydown = true;

        var $chips = $(e.target).closest('.chips');
        var chipsKeydown = e.target && $chips.length;

        // Don't handle keydown inputs on input and textarea
        if ($(e.target).is('input, textarea') || !chipsKeydown) {
          return;
        }

        var currChips = $chips[0].M_Chips;

        // backspace and delete
        if (e.keyCode === 8 || e.keyCode === 46) {
          e.preventDefault();

          var selectIndex = currChips.chipsData.length;
          if (currChips._selectedChip) {
            var index = currChips._selectedChip.index();
            currChips.deleteChip(index);
            currChips._selectedChip = null;

            // Make sure selectIndex doesn't go negative
            selectIndex = Math.max(index - 1, 0);
          }

          if (currChips.chipsData.length) {
            currChips.selectChip(selectIndex);
          }

          // left arrow key
        } else if (e.keyCode === 37) {
          if (currChips._selectedChip) {
            var _selectIndex = currChips._selectedChip.index() - 1;
            if (_selectIndex < 0) {
              return;
            }
            currChips.selectChip(_selectIndex);
          }

          // right arrow key
        } else if (e.keyCode === 39) {
          if (currChips._selectedChip) {
            var _selectIndex2 = currChips._selectedChip.index() + 1;

            if (_selectIndex2 >= currChips.chipsData.length) {
              currChips.$input[0].focus();
            } else {
              currChips.selectChip(_selectIndex2);
            }
          }
        }
      }

      /**
       * Handle Chips Keyup
       * @param {Event} e
       */

    }, {
      key: "_handleChipsKeyup",
      value: function _handleChipsKeyup(e) {
        Chips._keydown = false;
      }

      /**
       * Handle Chips Blur
       * @param {Event} e
       */

    }, {
      key: "_handleChipsBlur",
      value: function _handleChipsBlur(e) {
        if (!Chips._keydown) {
          var $chips = $(e.target).closest('.chips');
          var currChips = $chips[0].M_Chips;

          currChips._selectedChip = null;
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Chips;
  }(Component);

  /**
   * @static
   * @memberof Chips
   */


  Chips._keydown = false;

  M.Chips = Chips;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Chips, 'chips', 'M_Chips');
  }

  $(document).ready(function () {
    // Handle removal of static chips.
    $(document.body).on('click', '.chip .close', function () {
      var $chips = $(this).closest('.chips');
      if ($chips.length && $chips[0].M_Chips) {
        return;
      }
      $(this).closest('.chip').remove();
    });
  });
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    top: 0,
    bottom: Infinity,
    offset: 0,
    onPositionChange: null
  };

  /**
   * @class
   *
   */

  var Pushpin = function (_Component13) {
    _inherits(Pushpin, _Component13);

    /**
     * Construct Pushpin instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Pushpin(el, options) {
      _classCallCheck(this, Pushpin);

      var _this47 = _possibleConstructorReturn(this, (Pushpin.__proto__ || Object.getPrototypeOf(Pushpin)).call(this, Pushpin, el, options));

      _this47.el.M_Pushpin = _this47;

      /**
       * Options for the modal
       * @member Pushpin#options
       */
      _this47.options = $.extend({}, Pushpin.defaults, options);

      _this47.originalOffset = _this47.el.offsetTop;
      Pushpin._pushpins.push(_this47);
      _this47._setupEventHandlers();
      _this47._updatePosition();
      return _this47;
    }

    _createClass(Pushpin, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this.el.style.top = null;
        this._removePinClasses();
        this._removeEventHandlers();

        // Remove pushpin Inst
        var index = Pushpin._pushpins.indexOf(this);
        Pushpin._pushpins.splice(index, 1);
      }
    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        document.addEventListener('scroll', Pushpin._updateElements);
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        document.removeEventListener('scroll', Pushpin._updateElements);
      }
    }, {
      key: "_updatePosition",
      value: function _updatePosition() {
        var scrolled = M.getDocumentScrollTop() + this.options.offset;

        if (this.options.top <= scrolled && this.options.bottom >= scrolled && !this.el.classList.contains('pinned')) {
          this._removePinClasses();
          this.el.style.top = this.options.offset + "px";
          this.el.classList.add('pinned');

          // onPositionChange callback
          if (typeof this.options.onPositionChange === 'function') {
            this.options.onPositionChange.call(this, 'pinned');
          }
        }

        // Add pin-top (when scrolled position is above top)
        if (scrolled < this.options.top && !this.el.classList.contains('pin-top')) {
          this._removePinClasses();
          this.el.style.top = 0;
          this.el.classList.add('pin-top');

          // onPositionChange callback
          if (typeof this.options.onPositionChange === 'function') {
            this.options.onPositionChange.call(this, 'pin-top');
          }
        }

        // Add pin-bottom (when scrolled position is below bottom)
        if (scrolled > this.options.bottom && !this.el.classList.contains('pin-bottom')) {
          this._removePinClasses();
          this.el.classList.add('pin-bottom');
          this.el.style.top = this.options.bottom - this.originalOffset + "px";

          // onPositionChange callback
          if (typeof this.options.onPositionChange === 'function') {
            this.options.onPositionChange.call(this, 'pin-bottom');
          }
        }
      }
    }, {
      key: "_removePinClasses",
      value: function _removePinClasses() {
        // IE 11 bug (can't remove multiple classes in one line)
        this.el.classList.remove('pin-top');
        this.el.classList.remove('pinned');
        this.el.classList.remove('pin-bottom');
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Pushpin.__proto__ || Object.getPrototypeOf(Pushpin), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Pushpin;
      }
    }, {
      key: "_updateElements",
      value: function _updateElements() {
        for (var elIndex in Pushpin._pushpins) {
          var pInstance = Pushpin._pushpins[elIndex];
          pInstance._updatePosition();
        }
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Pushpin;
  }(Component);

  /**
   * @static
   * @memberof Pushpin
   */


  Pushpin._pushpins = [];

  M.Pushpin = Pushpin;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Pushpin, 'pushpin', 'M_Pushpin');
  }
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {
    direction: 'top',
    hoverEnabled: true,
    toolbarEnabled: false
  };

  $.fn.reverse = [].reverse;

  /**
   * @class
   *
   */

  var FloatingActionButton = function (_Component14) {
    _inherits(FloatingActionButton, _Component14);

    /**
     * Construct FloatingActionButton instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function FloatingActionButton(el, options) {
      _classCallCheck(this, FloatingActionButton);

      var _this48 = _possibleConstructorReturn(this, (FloatingActionButton.__proto__ || Object.getPrototypeOf(FloatingActionButton)).call(this, FloatingActionButton, el, options));

      _this48.el.M_FloatingActionButton = _this48;

      /**
       * Options for the fab
       * @member FloatingActionButton#options
       * @prop {Boolean} [direction] - Direction fab menu opens
       * @prop {Boolean} [hoverEnabled=true] - Enable hover vs click
       * @prop {Boolean} [toolbarEnabled=false] - Enable toolbar transition
       */
      _this48.options = $.extend({}, FloatingActionButton.defaults, options);

      _this48.isOpen = false;
      _this48.$anchor = _this48.$el.children('a').first();
      _this48.$menu = _this48.$el.children('ul').first();
      _this48.$floatingBtns = _this48.$el.find('ul .btn-floating');
      _this48.$floatingBtnsReverse = _this48.$el.find('ul .btn-floating').reverse();
      _this48.offsetY = 0;
      _this48.offsetX = 0;

      _this48.$el.addClass("direction-" + _this48.options.direction);
      if (_this48.options.direction === 'top') {
        _this48.offsetY = 40;
      } else if (_this48.options.direction === 'right') {
        _this48.offsetX = -40;
      } else if (_this48.options.direction === 'bottom') {
        _this48.offsetY = -40;
      } else {
        _this48.offsetX = 40;
      }
      _this48._setupEventHandlers();
      return _this48;
    }

    _createClass(FloatingActionButton, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_FloatingActionButton = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleFABClickBound = this._handleFABClick.bind(this);
        this._handleOpenBound = this.open.bind(this);
        this._handleCloseBound = this.close.bind(this);

        if (this.options.hoverEnabled && !this.options.toolbarEnabled) {
          this.el.addEventListener('mouseenter', this._handleOpenBound);
          this.el.addEventListener('mouseleave', this._handleCloseBound);
        } else {
          this.el.addEventListener('click', this._handleFABClickBound);
        }
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        if (this.options.hoverEnabled && !this.options.toolbarEnabled) {
          this.el.removeEventListener('mouseenter', this._handleOpenBound);
          this.el.removeEventListener('mouseleave', this._handleCloseBound);
        } else {
          this.el.removeEventListener('click', this._handleFABClickBound);
        }
      }

      /**
       * Handle FAB Click
       */

    }, {
      key: "_handleFABClick",
      value: function _handleFABClick() {
        if (this.isOpen) {
          this.close();
        } else {
          this.open();
        }
      }

      /**
       * Handle Document Click
       * @param {Event} e
       */

    }, {
      key: "_handleDocumentClick",
      value: function _handleDocumentClick(e) {
        if (!$(e.target).closest(this.$menu).length) {
          this.close();
        }
      }

      /**
       * Open FAB
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        if (this.options.toolbarEnabled) {
          this._animateInToolbar();
        } else {
          this._animateInFAB();
        }
        this.isOpen = true;
      }

      /**
       * Close FAB
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        if (this.options.toolbarEnabled) {
          window.removeEventListener('scroll', this._handleCloseBound, true);
          document.body.removeEventListener('click', this._handleDocumentClickBound, true);
          this._animateOutToolbar();
        } else {
          this._animateOutFAB();
        }
        this.isOpen = false;
      }

      /**
       * Classic FAB Menu open
       */

    }, {
      key: "_animateInFAB",
      value: function _animateInFAB() {
        var _this49 = this;

        this.$el.addClass('active');

        var time = 0;
        this.$floatingBtnsReverse.each(function (el) {
          anim({
            targets: el,
            opacity: 1,
            scale: [0.4, 1],
            translateY: [_this49.offsetY, 0],
            translateX: [_this49.offsetX, 0],
            duration: 275,
            delay: time,
            easing: 'easeInOutQuad'
          });
          time += 40;
        });
      }

      /**
       * Classic FAB Menu close
       */

    }, {
      key: "_animateOutFAB",
      value: function _animateOutFAB() {
        var _this50 = this;

        this.$floatingBtnsReverse.each(function (el) {
          anim.remove(el);
          anim({
            targets: el,
            opacity: 0,
            scale: 0.4,
            translateY: _this50.offsetY,
            translateX: _this50.offsetX,
            duration: 175,
            easing: 'easeOutQuad',
            complete: function () {
              _this50.$el.removeClass('active');
            }
          });
        });
      }

      /**
       * Toolbar transition Menu open
       */

    }, {
      key: "_animateInToolbar",
      value: function _animateInToolbar() {
        var _this51 = this;

        var scaleFactor = void 0;
        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var btnRect = this.el.getBoundingClientRect();
        var backdrop = $('<div class="fab-backdrop"></div>');
        var fabColor = this.$anchor.css('background-color');
        this.$anchor.append(backdrop);

        this.offsetX = btnRect.left - windowWidth / 2 + btnRect.width / 2;
        this.offsetY = windowHeight - btnRect.bottom;
        scaleFactor = windowWidth / backdrop[0].clientWidth;
        this.btnBottom = btnRect.bottom;
        this.btnLeft = btnRect.left;
        this.btnWidth = btnRect.width;

        // Set initial state
        this.$el.addClass('active');
        this.$el.css({
          'text-align': 'center',
          width: '100%',
          bottom: 0,
          left: 0,
          transform: 'translateX(' + this.offsetX + 'px)',
          transition: 'none'
        });
        this.$anchor.css({
          transform: 'translateY(' + -this.offsetY + 'px)',
          transition: 'none'
        });
        backdrop.css({
          'background-color': fabColor
        });

        setTimeout(function () {
          _this51.$el.css({
            transform: '',
            transition: 'transform .2s cubic-bezier(0.550, 0.085, 0.680, 0.530), background-color 0s linear .2s'
          });
          _this51.$anchor.css({
            overflow: 'visible',
            transform: '',
            transition: 'transform .2s'
          });

          setTimeout(function () {
            _this51.$el.css({
              overflow: 'hidden',
              'background-color': fabColor
            });
            backdrop.css({
              transform: 'scale(' + scaleFactor + ')',
              transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
            });
            _this51.$menu.children('li').children('a').css({
              opacity: 1
            });

            // Scroll to close.
            _this51._handleDocumentClickBound = _this51._handleDocumentClick.bind(_this51);
            window.addEventListener('scroll', _this51._handleCloseBound, true);
            document.body.addEventListener('click', _this51._handleDocumentClickBound, true);
          }, 100);
        }, 0);
      }

      /**
       * Toolbar transition Menu close
       */

    }, {
      key: "_animateOutToolbar",
      value: function _animateOutToolbar() {
        var _this52 = this;

        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var backdrop = this.$el.find('.fab-backdrop');
        var fabColor = this.$anchor.css('background-color');

        this.offsetX = this.btnLeft - windowWidth / 2 + this.btnWidth / 2;
        this.offsetY = windowHeight - this.btnBottom;

        // Hide backdrop
        this.$el.removeClass('active');
        this.$el.css({
          'background-color': 'transparent',
          transition: 'none'
        });
        this.$anchor.css({
          transition: 'none'
        });
        backdrop.css({
          transform: 'scale(0)',
          'background-color': fabColor
        });
        this.$menu.children('li').children('a').css({
          opacity: ''
        });

        setTimeout(function () {
          backdrop.remove();

          // Set initial state.
          _this52.$el.css({
            'text-align': '',
            width: '',
            bottom: '',
            left: '',
            overflow: '',
            'background-color': '',
            transform: 'translate3d(' + -_this52.offsetX + 'px,0,0)'
          });
          _this52.$anchor.css({
            overflow: '',
            transform: 'translate3d(0,' + _this52.offsetY + 'px,0)'
          });

          setTimeout(function () {
            _this52.$el.css({
              transform: 'translate3d(0,0,0)',
              transition: 'transform .2s'
            });
            _this52.$anchor.css({
              transform: 'translate3d(0,0,0)',
              transition: 'transform .2s cubic-bezier(0.550, 0.055, 0.675, 0.190)'
            });
          }, 20);
        }, 200);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(FloatingActionButton.__proto__ || Object.getPrototypeOf(FloatingActionButton), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_FloatingActionButton;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return FloatingActionButton;
  }(Component);

  M.FloatingActionButton = FloatingActionButton;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(FloatingActionButton, 'floatingActionButton', 'M_FloatingActionButton');
  }
})(cash, M.anime);
;(function ($) {
  'use strict';

  var _defaults = {
    // Close when date is selected
    autoClose: false,

    // the default output format for the input field value
    format: 'mmm dd, yyyy',

    // Used to create date object from current input string
    parse: null,

    // The initial date to view when first opened
    defaultDate: null,

    // Make the `defaultDate` the initial selected value
    setDefaultDate: false,

    disableWeekends: false,

    disableDayFn: null,

    // First day of week (0: Sunday, 1: Monday etc)
    firstDay: 0,

    // The earliest date that can be selected
    minDate: null,
    // Thelatest date that can be selected
    maxDate: null,

    // Number of years either side, or array of upper/lower range
    yearRange: 10,

    // used internally (don't config outside)
    minYear: 0,
    maxYear: 9999,
    minMonth: undefined,
    maxMonth: undefined,

    startRange: null,
    endRange: null,

    isRTL: false,

    // Render the month after year in the calendar title
    showMonthAfterYear: false,

    // Render days of the calendar grid that fall in the next or previous month
    showDaysInNextAndPreviousMonths: false,

    // Specify a DOM element to render the calendar in
    container: null,

    // Show clear button
    showClearBtn: false,

    // internationalization
    i18n: {
      cancel: 'Cancel',
      clear: 'Clear',
      done: 'Ok',
      previousMonth: '',
      nextMonth: '',
      months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],
      monthsShort: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
      weekdays: ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'],
      weekdaysShort: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
      weekdaysAbbrev: ['S', 'M', 'T', 'W', 'T', 'F', 'S']
    },

    // events array
    events: [],

    // callback function
    onSelect: null,
    onOpen: null,
    onClose: null,
    onDraw: null
  };

  /**
   * @class
   *
   */

  var Datepicker = function (_Component15) {
    _inherits(Datepicker, _Component15);

    /**
     * Construct Datepicker instance and set up overlay
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Datepicker(el, options) {
      _classCallCheck(this, Datepicker);

      var _this53 = _possibleConstructorReturn(this, (Datepicker.__proto__ || Object.getPrototypeOf(Datepicker)).call(this, Datepicker, el, options));

      _this53.el.M_Datepicker = _this53;

      _this53.options = $.extend({}, Datepicker.defaults, options);

      // make sure i18n defaults are not lost when only few i18n option properties are passed
      if (!!options && options.hasOwnProperty('i18n') && typeof options.i18n === 'object') {
        _this53.options.i18n = $.extend({}, Datepicker.defaults.i18n, options.i18n);
      }

      // Remove time component from minDate and maxDate options
      if (_this53.options.minDate) _this53.options.minDate.setHours(0, 0, 0, 0);
      if (_this53.options.maxDate) _this53.options.maxDate.setHours(0, 0, 0, 0);

      _this53.id = M.guid();

      _this53._setupVariables();
      _this53._insertHTMLIntoDOM();
      _this53._setupModal();

      _this53._setupEventHandlers();

      if (!_this53.options.defaultDate) {
        _this53.options.defaultDate = new Date(Date.parse(_this53.el.value));
      }

      var defDate = _this53.options.defaultDate;
      if (Datepicker._isDate(defDate)) {
        if (_this53.options.setDefaultDate) {
          _this53.setDate(defDate, true);
          _this53.setInputValue();
        } else {
          _this53.gotoDate(defDate);
        }
      } else {
        _this53.gotoDate(new Date());
      }

      /**
       * Describes open/close state of datepicker
       * @type {Boolean}
       */
      _this53.isOpen = false;
      return _this53;
    }

    _createClass(Datepicker, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.modal.destroy();
        $(this.modalEl).remove();
        this.destroySelects();
        this.el.M_Datepicker = undefined;
      }
    }, {
      key: "destroySelects",
      value: function destroySelects() {
        var oldYearSelect = this.calendarEl.querySelector('.orig-select-year');
        if (oldYearSelect) {
          M.FormSelect.getInstance(oldYearSelect).destroy();
        }
        var oldMonthSelect = this.calendarEl.querySelector('.orig-select-month');
        if (oldMonthSelect) {
          M.FormSelect.getInstance(oldMonthSelect).destroy();
        }
      }
    }, {
      key: "_insertHTMLIntoDOM",
      value: function _insertHTMLIntoDOM() {
        if (this.options.showClearBtn) {
          $(this.clearBtn).css({ visibility: '' });
          this.clearBtn.innerHTML = this.options.i18n.clear;
        }

        this.doneBtn.innerHTML = this.options.i18n.done;
        this.cancelBtn.innerHTML = this.options.i18n.cancel;

        if (this.options.container) {
          this.$modalEl.appendTo(this.options.container);
        } else {
          this.$modalEl.insertBefore(this.el);
        }
      }
    }, {
      key: "_setupModal",
      value: function _setupModal() {
        var _this54 = this;

        this.modalEl.id = 'modal-' + this.id;
        this.modal = M.Modal.init(this.modalEl, {
          onCloseEnd: function () {
            _this54.isOpen = false;
          }
        });
      }
    }, {
      key: "toString",
      value: function toString(format) {
        var _this55 = this;

        format = format || this.options.format;
        if (!Datepicker._isDate(this.date)) {
          return '';
        }

        var formatArray = format.split(/(d{1,4}|m{1,4}|y{4}|yy|!.)/g);
        var formattedDate = formatArray.map(function (label) {
          if (_this55.formats[label]) {
            return _this55.formats[label]();
          }

          return label;
        }).join('');
        return formattedDate;
      }
    }, {
      key: "setDate",
      value: function setDate(date, preventOnSelect) {
        if (!date) {
          this.date = null;
          this._renderDateDisplay();
          return this.draw();
        }
        if (typeof date === 'string') {
          date = new Date(Date.parse(date));
        }
        if (!Datepicker._isDate(date)) {
          return;
        }

        var min = this.options.minDate,
            max = this.options.maxDate;

        if (Datepicker._isDate(min) && date < min) {
          date = min;
        } else if (Datepicker._isDate(max) && date > max) {
          date = max;
        }

        this.date = new Date(date.getTime());

        this._renderDateDisplay();

        Datepicker._setToStartOfDay(this.date);
        this.gotoDate(this.date);

        if (!preventOnSelect && typeof this.options.onSelect === 'function') {
          this.options.onSelect.call(this, this.date);
        }
      }
    }, {
      key: "setInputValue",
      value: function setInputValue() {
        this.el.value = this.toString();
        this.$el.trigger('change', { firedBy: this });
      }
    }, {
      key: "_renderDateDisplay",
      value: function _renderDateDisplay() {
        var displayDate = Datepicker._isDate(this.date) ? this.date : new Date();
        var i18n = this.options.i18n;
        var day = i18n.weekdaysShort[displayDate.getDay()];
        var month = i18n.monthsShort[displayDate.getMonth()];
        var date = displayDate.getDate();
        this.yearTextEl.innerHTML = displayDate.getFullYear();
        this.dateTextEl.innerHTML = day + ", " + month + " " + date;
      }

      /**
       * change view to a specific date
       */

    }, {
      key: "gotoDate",
      value: function gotoDate(date) {
        var newCalendar = true;

        if (!Datepicker._isDate(date)) {
          return;
        }

        if (this.calendars) {
          var firstVisibleDate = new Date(this.calendars[0].year, this.calendars[0].month, 1),
              lastVisibleDate = new Date(this.calendars[this.calendars.length - 1].year, this.calendars[this.calendars.length - 1].month, 1),
              visibleDate = date.getTime();
          // get the end of the month
          lastVisibleDate.setMonth(lastVisibleDate.getMonth() + 1);
          lastVisibleDate.setDate(lastVisibleDate.getDate() - 1);
          newCalendar = visibleDate < firstVisibleDate.getTime() || lastVisibleDate.getTime() < visibleDate;
        }

        if (newCalendar) {
          this.calendars = [{
            month: date.getMonth(),
            year: date.getFullYear()
          }];
        }

        this.adjustCalendars();
      }
    }, {
      key: "adjustCalendars",
      value: function adjustCalendars() {
        this.calendars[0] = this.adjustCalendar(this.calendars[0]);
        this.draw();
      }
    }, {
      key: "adjustCalendar",
      value: function adjustCalendar(calendar) {
        if (calendar.month < 0) {
          calendar.year -= Math.ceil(Math.abs(calendar.month) / 12);
          calendar.month += 12;
        }
        if (calendar.month > 11) {
          calendar.year += Math.floor(Math.abs(calendar.month) / 12);
          calendar.month -= 12;
        }
        return calendar;
      }
    }, {
      key: "nextMonth",
      value: function nextMonth() {
        this.calendars[0].month++;
        this.adjustCalendars();
      }
    }, {
      key: "prevMonth",
      value: function prevMonth() {
        this.calendars[0].month--;
        this.adjustCalendars();
      }
    }, {
      key: "render",
      value: function render(year, month, randId) {
        var opts = this.options,
            now = new Date(),
            days = Datepicker._getDaysInMonth(year, month),
            before = new Date(year, month, 1).getDay(),
            data = [],
            row = [];
        Datepicker._setToStartOfDay(now);
        if (opts.firstDay > 0) {
          before -= opts.firstDay;
          if (before < 0) {
            before += 7;
          }
        }
        var previousMonth = month === 0 ? 11 : month - 1,
            nextMonth = month === 11 ? 0 : month + 1,
            yearOfPreviousMonth = month === 0 ? year - 1 : year,
            yearOfNextMonth = month === 11 ? year + 1 : year,
            daysInPreviousMonth = Datepicker._getDaysInMonth(yearOfPreviousMonth, previousMonth);
        var cells = days + before,
            after = cells;
        while (after > 7) {
          after -= 7;
        }
        cells += 7 - after;
        var isWeekSelected = false;
        for (var i = 0, r = 0; i < cells; i++) {
          var day = new Date(year, month, 1 + (i - before)),
              isSelected = Datepicker._isDate(this.date) ? Datepicker._compareDates(day, this.date) : false,
              isToday = Datepicker._compareDates(day, now),
              hasEvent = opts.events.indexOf(day.toDateString()) !== -1 ? true : false,
              isEmpty = i < before || i >= days + before,
              dayNumber = 1 + (i - before),
              monthNumber = month,
              yearNumber = year,
              isStartRange = opts.startRange && Datepicker._compareDates(opts.startRange, day),
              isEndRange = opts.endRange && Datepicker._compareDates(opts.endRange, day),
              isInRange = opts.startRange && opts.endRange && opts.startRange < day && day < opts.endRange,
              isDisabled = opts.minDate && day < opts.minDate || opts.maxDate && day > opts.maxDate || opts.disableWeekends && Datepicker._isWeekend(day) || opts.disableDayFn && opts.disableDayFn(day);

          if (isEmpty) {
            if (i < before) {
              dayNumber = daysInPreviousMonth + dayNumber;
              monthNumber = previousMonth;
              yearNumber = yearOfPreviousMonth;
            } else {
              dayNumber = dayNumber - days;
              monthNumber = nextMonth;
              yearNumber = yearOfNextMonth;
            }
          }

          var dayConfig = {
            day: dayNumber,
            month: monthNumber,
            year: yearNumber,
            hasEvent: hasEvent,
            isSelected: isSelected,
            isToday: isToday,
            isDisabled: isDisabled,
            isEmpty: isEmpty,
            isStartRange: isStartRange,
            isEndRange: isEndRange,
            isInRange: isInRange,
            showDaysInNextAndPreviousMonths: opts.showDaysInNextAndPreviousMonths
          };

          row.push(this.renderDay(dayConfig));

          if (++r === 7) {
            data.push(this.renderRow(row, opts.isRTL, isWeekSelected));
            row = [];
            r = 0;
            isWeekSelected = false;
          }
        }
        return this.renderTable(opts, data, randId);
      }
    }, {
      key: "renderDay",
      value: function renderDay(opts) {
        var arr = [];
        var ariaSelected = 'false';
        if (opts.isEmpty) {
          if (opts.showDaysInNextAndPreviousMonths) {
            arr.push('is-outside-current-month');
            arr.push('is-selection-disabled');
          } else {
            return '<td class="is-empty"></td>';
          }
        }
        if (opts.isDisabled) {
          arr.push('is-disabled');
        }

        if (opts.isToday) {
          arr.push('is-today');
        }
        if (opts.isSelected) {
          arr.push('is-selected');
          ariaSelected = 'true';
        }
        if (opts.hasEvent) {
          arr.push('has-event');
        }
        if (opts.isInRange) {
          arr.push('is-inrange');
        }
        if (opts.isStartRange) {
          arr.push('is-startrange');
        }
        if (opts.isEndRange) {
          arr.push('is-endrange');
        }
        return "<td data-day=\"" + opts.day + "\" class=\"" + arr.join(' ') + "\" aria-selected=\"" + ariaSelected + "\">" + ("<button class=\"datepicker-day-button\" type=\"button\" data-year=\"" + opts.year + "\" data-month=\"" + opts.month + "\" data-day=\"" + opts.day + "\">" + opts.day + "</button>") + '</td>';
      }
    }, {
      key: "renderRow",
      value: function renderRow(days, isRTL, isRowSelected) {
        return '<tr class="datepicker-row' + (isRowSelected ? ' is-selected' : '') + '">' + (isRTL ? days.reverse() : days).join('') + '</tr>';
      }
    }, {
      key: "renderTable",
      value: function renderTable(opts, data, randId) {
        return '<div class="datepicker-table-wrapper"><table cellpadding="0" cellspacing="0" class="datepicker-table" role="grid" aria-labelledby="' + randId + '">' + this.renderHead(opts) + this.renderBody(data) + '</table></div>';
      }
    }, {
      key: "renderHead",
      value: function renderHead(opts) {
        var i = void 0,
            arr = [];
        for (i = 0; i < 7; i++) {
          arr.push("<th scope=\"col\"><abbr title=\"" + this.renderDayName(opts, i) + "\">" + this.renderDayName(opts, i, true) + "</abbr></th>");
        }
        return '<thead><tr>' + (opts.isRTL ? arr.reverse() : arr).join('') + '</tr></thead>';
      }
    }, {
      key: "renderBody",
      value: function renderBody(rows) {
        return '<tbody>' + rows.join('') + '</tbody>';
      }
    }, {
      key: "renderTitle",
      value: function renderTitle(instance, c, year, month, refYear, randId) {
        var i = void 0,
            j = void 0,
            arr = void 0,
            opts = this.options,
            isMinYear = year === opts.minYear,
            isMaxYear = year === opts.maxYear,
            html = '<div id="' + randId + '" class="datepicker-controls" role="heading" aria-live="assertive">',
            monthHtml = void 0,
            yearHtml = void 0,
            prev = true,
            next = true;

        for (arr = [], i = 0; i < 12; i++) {
          arr.push('<option value="' + (year === refYear ? i - c : 12 + i - c) + '"' + (i === month ? ' selected="selected"' : '') + (isMinYear && i < opts.minMonth || isMaxYear && i > opts.maxMonth ? 'disabled="disabled"' : '') + '>' + opts.i18n.months[i] + '</option>');
        }

        monthHtml = '<select class="datepicker-select orig-select-month" tabindex="-1">' + arr.join('') + '</select>';

        if ($.isArray(opts.yearRange)) {
          i = opts.yearRange[0];
          j = opts.yearRange[1] + 1;
        } else {
          i = year - opts.yearRange;
          j = 1 + year + opts.yearRange;
        }

        for (arr = []; i < j && i <= opts.maxYear; i++) {
          if (i >= opts.minYear) {
            arr.push("<option value=\"" + i + "\" " + (i === year ? 'selected="selected"' : '') + ">" + i + "</option>");
          }
        }

        yearHtml = "<select class=\"datepicker-select orig-select-year\" tabindex=\"-1\">" + arr.join('') + "</select>";

        var leftArrow = '<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M15.41 16.09l-4.58-4.59 4.58-4.59L14 5.5l-6 6 6 6z"/><path d="M0-.5h24v24H0z" fill="none"/></svg>';
        html += "<button class=\"month-prev" + (prev ? '' : ' is-disabled') + "\" type=\"button\">" + leftArrow + "</button>";

        html += '<div class="selects-container">';
        if (opts.showMonthAfterYear) {
          html += yearHtml + monthHtml;
        } else {
          html += monthHtml + yearHtml;
        }
        html += '</div>';

        if (isMinYear && (month === 0 || opts.minMonth >= month)) {
          prev = false;
        }

        if (isMaxYear && (month === 11 || opts.maxMonth <= month)) {
          next = false;
        }

        var rightArrow = '<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M8.59 16.34l4.58-4.59-4.58-4.59L10 5.75l6 6-6 6z"/><path d="M0-.25h24v24H0z" fill="none"/></svg>';
        html += "<button class=\"month-next" + (next ? '' : ' is-disabled') + "\" type=\"button\">" + rightArrow + "</button>";

        return html += '</div>';
      }

      /**
       * refresh the HTML
       */

    }, {
      key: "draw",
      value: function draw(force) {
        if (!this.isOpen && !force) {
          return;
        }
        var opts = this.options,
            minYear = opts.minYear,
            maxYear = opts.maxYear,
            minMonth = opts.minMonth,
            maxMonth = opts.maxMonth,
            html = '',
            randId = void 0;

        if (this._y <= minYear) {
          this._y = minYear;
          if (!isNaN(minMonth) && this._m < minMonth) {
            this._m = minMonth;
          }
        }
        if (this._y >= maxYear) {
          this._y = maxYear;
          if (!isNaN(maxMonth) && this._m > maxMonth) {
            this._m = maxMonth;
          }
        }

        randId = 'datepicker-title-' + Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 2);

        for (var c = 0; c < 1; c++) {
          this._renderDateDisplay();
          html += this.renderTitle(this, c, this.calendars[c].year, this.calendars[c].month, this.calendars[0].year, randId) + this.render(this.calendars[c].year, this.calendars[c].month, randId);
        }

        this.destroySelects();

        this.calendarEl.innerHTML = html;

        // Init Materialize Select
        var yearSelect = this.calendarEl.querySelector('.orig-select-year');
        var monthSelect = this.calendarEl.querySelector('.orig-select-month');
        M.FormSelect.init(yearSelect, {
          classes: 'select-year',
          dropdownOptions: { container: document.body, constrainWidth: false }
        });
        M.FormSelect.init(monthSelect, {
          classes: 'select-month',
          dropdownOptions: { container: document.body, constrainWidth: false }
        });

        // Add change handlers for select
        yearSelect.addEventListener('change', this._handleYearChange.bind(this));
        monthSelect.addEventListener('change', this._handleMonthChange.bind(this));

        if (typeof this.options.onDraw === 'function') {
          this.options.onDraw(this);
        }
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);
        this._handleInputChangeBound = this._handleInputChange.bind(this);
        this._handleCalendarClickBound = this._handleCalendarClick.bind(this);
        this._finishSelectionBound = this._finishSelection.bind(this);
        this._handleMonthChange = this._handleMonthChange.bind(this);
        this._closeBound = this.close.bind(this);

        this.el.addEventListener('click', this._handleInputClickBound);
        this.el.addEventListener('keydown', this._handleInputKeydownBound);
        this.el.addEventListener('change', this._handleInputChangeBound);
        this.calendarEl.addEventListener('click', this._handleCalendarClickBound);
        this.doneBtn.addEventListener('click', this._finishSelectionBound);
        this.cancelBtn.addEventListener('click', this._closeBound);

        if (this.options.showClearBtn) {
          this._handleClearClickBound = this._handleClearClick.bind(this);
          this.clearBtn.addEventListener('click', this._handleClearClickBound);
        }
      }
    }, {
      key: "_setupVariables",
      value: function _setupVariables() {
        var _this56 = this;

        this.$modalEl = $(Datepicker._template);
        this.modalEl = this.$modalEl[0];

        this.calendarEl = this.modalEl.querySelector('.datepicker-calendar');

        this.yearTextEl = this.modalEl.querySelector('.year-text');
        this.dateTextEl = this.modalEl.querySelector('.date-text');
        if (this.options.showClearBtn) {
          this.clearBtn = this.modalEl.querySelector('.datepicker-clear');
        }
        this.doneBtn = this.modalEl.querySelector('.datepicker-done');
        this.cancelBtn = this.modalEl.querySelector('.datepicker-cancel');

        this.formats = {
          d: function () {
            return _this56.date.getDate();
          },
          dd: function () {
            var d = _this56.date.getDate();
            return (d < 10 ? '0' : '') + d;
          },
          ddd: function () {
            return _this56.options.i18n.weekdaysShort[_this56.date.getDay()];
          },
          dddd: function () {
            return _this56.options.i18n.weekdays[_this56.date.getDay()];
          },
          m: function () {
            return _this56.date.getMonth() + 1;
          },
          mm: function () {
            var m = _this56.date.getMonth() + 1;
            return (m < 10 ? '0' : '') + m;
          },
          mmm: function () {
            return _this56.options.i18n.monthsShort[_this56.date.getMonth()];
          },
          mmmm: function () {
            return _this56.options.i18n.months[_this56.date.getMonth()];
          },
          yy: function () {
            return ('' + _this56.date.getFullYear()).slice(2);
          },
          yyyy: function () {
            return _this56.date.getFullYear();
          }
        };
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleInputClickBound);
        this.el.removeEventListener('keydown', this._handleInputKeydownBound);
        this.el.removeEventListener('change', this._handleInputChangeBound);
        this.calendarEl.removeEventListener('click', this._handleCalendarClickBound);
      }
    }, {
      key: "_handleInputClick",
      value: function _handleInputClick() {
        this.open();
      }
    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        if (e.which === M.keys.ENTER) {
          e.preventDefault();
          this.open();
        }
      }
    }, {
      key: "_handleCalendarClick",
      value: function _handleCalendarClick(e) {
        if (!this.isOpen) {
          return;
        }

        var $target = $(e.target);
        if (!$target.hasClass('is-disabled')) {
          if ($target.hasClass('datepicker-day-button') && !$target.hasClass('is-empty') && !$target.parent().hasClass('is-disabled')) {
            this.setDate(new Date(e.target.getAttribute('data-year'), e.target.getAttribute('data-month'), e.target.getAttribute('data-day')));
            if (this.options.autoClose) {
              this._finishSelection();
            }
          } else if ($target.closest('.month-prev').length) {
            this.prevMonth();
          } else if ($target.closest('.month-next').length) {
            this.nextMonth();
          }
        }
      }
    }, {
      key: "_handleClearClick",
      value: function _handleClearClick() {
        this.date = null;
        this.setInputValue();
        this.close();
      }
    }, {
      key: "_handleMonthChange",
      value: function _handleMonthChange(e) {
        this.gotoMonth(e.target.value);
      }
    }, {
      key: "_handleYearChange",
      value: function _handleYearChange(e) {
        this.gotoYear(e.target.value);
      }

      /**
       * change view to a specific month (zero-index, e.g. 0: January)
       */

    }, {
      key: "gotoMonth",
      value: function gotoMonth(month) {
        if (!isNaN(month)) {
          this.calendars[0].month = parseInt(month, 10);
          this.adjustCalendars();
        }
      }

      /**
       * change view to a specific full year (e.g. "2012")
       */

    }, {
      key: "gotoYear",
      value: function gotoYear(year) {
        if (!isNaN(year)) {
          this.calendars[0].year = parseInt(year, 10);
          this.adjustCalendars();
        }
      }
    }, {
      key: "_handleInputChange",
      value: function _handleInputChange(e) {
        var date = void 0;

        // Prevent change event from being fired when triggered by the plugin
        if (e.firedBy === this) {
          return;
        }
        if (this.options.parse) {
          date = this.options.parse(this.el.value, this.options.format);
        } else {
          date = new Date(Date.parse(this.el.value));
        }

        if (Datepicker._isDate(date)) {
          this.setDate(date);
        }
      }
    }, {
      key: "renderDayName",
      value: function renderDayName(opts, day, abbr) {
        day += opts.firstDay;
        while (day >= 7) {
          day -= 7;
        }
        return abbr ? opts.i18n.weekdaysAbbrev[day] : opts.i18n.weekdays[day];
      }

      /**
       * Set input value to the selected date and close Datepicker
       */

    }, {
      key: "_finishSelection",
      value: function _finishSelection() {
        this.setInputValue();
        this.close();
      }

      /**
       * Open Datepicker
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        this.isOpen = true;
        if (typeof this.options.onOpen === 'function') {
          this.options.onOpen.call(this);
        }
        this.draw();
        this.modal.open();
        return this;
      }

      /**
       * Close Datepicker
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isOpen = false;
        if (typeof this.options.onClose === 'function') {
          this.options.onClose.call(this);
        }
        this.modal.close();
        return this;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Datepicker.__proto__ || Object.getPrototypeOf(Datepicker), "init", this).call(this, this, els, options);
      }
    }, {
      key: "_isDate",
      value: function _isDate(obj) {
        return (/Date/.test(Object.prototype.toString.call(obj)) && !isNaN(obj.getTime())
        );
      }
    }, {
      key: "_isWeekend",
      value: function _isWeekend(date) {
        var day = date.getDay();
        return day === 0 || day === 6;
      }
    }, {
      key: "_setToStartOfDay",
      value: function _setToStartOfDay(date) {
        if (Datepicker._isDate(date)) date.setHours(0, 0, 0, 0);
      }
    }, {
      key: "_getDaysInMonth",
      value: function _getDaysInMonth(year, month) {
        return [31, Datepicker._isLeapYear(year) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][month];
      }
    }, {
      key: "_isLeapYear",
      value: function _isLeapYear(year) {
        // solution by Matti Virkkunen: http://stackoverflow.com/a/4881951
        return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
      }
    }, {
      key: "_compareDates",
      value: function _compareDates(a, b) {
        // weak date comparison (use setToStartOfDay(date) to ensure correct result)
        return a.getTime() === b.getTime();
      }
    }, {
      key: "_setToStartOfDay",
      value: function _setToStartOfDay(date) {
        if (Datepicker._isDate(date)) date.setHours(0, 0, 0, 0);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Datepicker;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Datepicker;
  }(Component);

  Datepicker._template = ['<div class= "modal datepicker-modal">', '<div class="modal-content datepicker-container">', '<div class="datepicker-date-display">', '<span class="year-text"></span>', '<span class="date-text"></span>', '</div>', '<div class="datepicker-calendar-container">', '<div class="datepicker-calendar"></div>', '<div class="datepicker-footer">', '<button class="btn-flat datepicker-clear waves-effect" style="visibility: hidden;" type="button"></button>', '<div class="confirmation-btns">', '<button class="btn-flat datepicker-cancel waves-effect" type="button"></button>', '<button class="btn-flat datepicker-done waves-effect" type="button"></button>', '</div>', '</div>', '</div>', '</div>', '</div>'].join('');

  M.Datepicker = Datepicker;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Datepicker, 'datepicker', 'M_Datepicker');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    dialRadius: 135,
    outerRadius: 105,
    innerRadius: 70,
    tickRadius: 20,
    duration: 350,
    container: null,
    defaultTime: 'now', // default time, 'now' or '13:14' e.g.
    fromNow: 0, // Millisecond offset from the defaultTime
    showClearBtn: false,

    // internationalization
    i18n: {
      cancel: 'Cancel',
      clear: 'Clear',
      done: 'Ok'
    },

    autoClose: false, // auto close when minute is selected
    twelveHour: true, // change to 12 hour AM/PM clock from 24 hour
    vibrate: true, // vibrate the device when dragging clock hand

    // Callbacks
    onOpenStart: null,
    onOpenEnd: null,
    onCloseStart: null,
    onCloseEnd: null,
    onSelect: null
  };

  /**
   * @class
   *
   */

  var Timepicker = function (_Component16) {
    _inherits(Timepicker, _Component16);

    function Timepicker(el, options) {
      _classCallCheck(this, Timepicker);

      var _this57 = _possibleConstructorReturn(this, (Timepicker.__proto__ || Object.getPrototypeOf(Timepicker)).call(this, Timepicker, el, options));

      _this57.el.M_Timepicker = _this57;

      _this57.options = $.extend({}, Timepicker.defaults, options);

      _this57.id = M.guid();
      _this57._insertHTMLIntoDOM();
      _this57._setupModal();
      _this57._setupVariables();
      _this57._setupEventHandlers();

      _this57._clockSetup();
      _this57._pickerSetup();
      return _this57;
    }

    _createClass(Timepicker, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.modal.destroy();
        $(this.modalEl).remove();
        this.el.M_Timepicker = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleInputKeydownBound = this._handleInputKeydown.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);
        this._handleClockClickStartBound = this._handleClockClickStart.bind(this);
        this._handleDocumentClickMoveBound = this._handleDocumentClickMove.bind(this);
        this._handleDocumentClickEndBound = this._handleDocumentClickEnd.bind(this);

        this.el.addEventListener('click', this._handleInputClickBound);
        this.el.addEventListener('keydown', this._handleInputKeydownBound);
        this.plate.addEventListener('mousedown', this._handleClockClickStartBound);
        this.plate.addEventListener('touchstart', this._handleClockClickStartBound);

        $(this.spanHours).on('click', this.showView.bind(this, 'hours'));
        $(this.spanMinutes).on('click', this.showView.bind(this, 'minutes'));
      }
    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleInputClickBound);
        this.el.removeEventListener('keydown', this._handleInputKeydownBound);
      }
    }, {
      key: "_handleInputClick",
      value: function _handleInputClick() {
        this.open();
      }
    }, {
      key: "_handleInputKeydown",
      value: function _handleInputKeydown(e) {
        if (e.which === M.keys.ENTER) {
          e.preventDefault();
          this.open();
        }
      }
    }, {
      key: "_handleClockClickStart",
      value: function _handleClockClickStart(e) {
        e.preventDefault();
        var clockPlateBR = this.plate.getBoundingClientRect();
        var offset = { x: clockPlateBR.left, y: clockPlateBR.top };

        this.x0 = offset.x + this.options.dialRadius;
        this.y0 = offset.y + this.options.dialRadius;
        this.moved = false;
        var clickPos = Timepicker._Pos(e);
        this.dx = clickPos.x - this.x0;
        this.dy = clickPos.y - this.y0;

        // Set clock hands
        this.setHand(this.dx, this.dy, false);

        // Mousemove on document
        document.addEventListener('mousemove', this._handleDocumentClickMoveBound);
        document.addEventListener('touchmove', this._handleDocumentClickMoveBound);

        // Mouseup on document
        document.addEventListener('mouseup', this._handleDocumentClickEndBound);
        document.addEventListener('touchend', this._handleDocumentClickEndBound);
      }
    }, {
      key: "_handleDocumentClickMove",
      value: function _handleDocumentClickMove(e) {
        e.preventDefault();
        var clickPos = Timepicker._Pos(e);
        var x = clickPos.x - this.x0;
        var y = clickPos.y - this.y0;
        this.moved = true;
        this.setHand(x, y, false, true);
      }
    }, {
      key: "_handleDocumentClickEnd",
      value: function _handleDocumentClickEnd(e) {
        var _this58 = this;

        e.preventDefault();
        document.removeEventListener('mouseup', this._handleDocumentClickEndBound);
        document.removeEventListener('touchend', this._handleDocumentClickEndBound);
        var clickPos = Timepicker._Pos(e);
        var x = clickPos.x - this.x0;
        var y = clickPos.y - this.y0;
        if (this.moved && x === this.dx && y === this.dy) {
          this.setHand(x, y);
        }

        if (this.currentView === 'hours') {
          this.showView('minutes', this.options.duration / 2);
        } else if (this.options.autoClose) {
          $(this.minutesView).addClass('timepicker-dial-out');
          setTimeout(function () {
            _this58.done();
          }, this.options.duration / 2);
        }

        if (typeof this.options.onSelect === 'function') {
          this.options.onSelect.call(this, this.hours, this.minutes);
        }

        // Unbind mousemove event
        document.removeEventListener('mousemove', this._handleDocumentClickMoveBound);
        document.removeEventListener('touchmove', this._handleDocumentClickMoveBound);
      }
    }, {
      key: "_insertHTMLIntoDOM",
      value: function _insertHTMLIntoDOM() {
        this.$modalEl = $(Timepicker._template);
        this.modalEl = this.$modalEl[0];
        this.modalEl.id = 'modal-' + this.id;

        // Append popover to input by default
        var containerEl = document.querySelector(this.options.container);
        if (this.options.container && !!containerEl) {
          this.$modalEl.appendTo(containerEl);
        } else {
          this.$modalEl.insertBefore(this.el);
        }
      }
    }, {
      key: "_setupModal",
      value: function _setupModal() {
        var _this59 = this;

        this.modal = M.Modal.init(this.modalEl, {
          onOpenStart: this.options.onOpenStart,
          onOpenEnd: this.options.onOpenEnd,
          onCloseStart: this.options.onCloseStart,
          onCloseEnd: function () {
            if (typeof _this59.options.onCloseEnd === 'function') {
              _this59.options.onCloseEnd.call(_this59);
            }
            _this59.isOpen = false;
          }
        });
      }
    }, {
      key: "_setupVariables",
      value: function _setupVariables() {
        this.currentView = 'hours';
        this.vibrate = navigator.vibrate ? 'vibrate' : navigator.webkitVibrate ? 'webkitVibrate' : null;

        this._canvas = this.modalEl.querySelector('.timepicker-canvas');
        this.plate = this.modalEl.querySelector('.timepicker-plate');

        this.hoursView = this.modalEl.querySelector('.timepicker-hours');
        this.minutesView = this.modalEl.querySelector('.timepicker-minutes');
        this.spanHours = this.modalEl.querySelector('.timepicker-span-hours');
        this.spanMinutes = this.modalEl.querySelector('.timepicker-span-minutes');
        this.spanAmPm = this.modalEl.querySelector('.timepicker-span-am-pm');
        this.footer = this.modalEl.querySelector('.timepicker-footer');
        this.amOrPm = 'PM';
      }
    }, {
      key: "_pickerSetup",
      value: function _pickerSetup() {
        var $clearBtn = $("<button class=\"btn-flat timepicker-clear waves-effect\" style=\"visibility: hidden;\" type=\"button\" tabindex=\"" + (this.options.twelveHour ? '3' : '1') + "\">" + this.options.i18n.clear + "</button>").appendTo(this.footer).on('click', this.clear.bind(this));
        if (this.options.showClearBtn) {
          $clearBtn.css({ visibility: '' });
        }

        var confirmationBtnsContainer = $('<div class="confirmation-btns"></div>');
        $('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="' + (this.options.twelveHour ? '3' : '1') + '">' + this.options.i18n.cancel + '</button>').appendTo(confirmationBtnsContainer).on('click', this.close.bind(this));
        $('<button class="btn-flat timepicker-close waves-effect" type="button" tabindex="' + (this.options.twelveHour ? '3' : '1') + '">' + this.options.i18n.done + '</button>').appendTo(confirmationBtnsContainer).on('click', this.done.bind(this));
        confirmationBtnsContainer.appendTo(this.footer);
      }
    }, {
      key: "_clockSetup",
      value: function _clockSetup() {
        if (this.options.twelveHour) {
          this.$amBtn = $('<div class="am-btn">AM</div>');
          this.$pmBtn = $('<div class="pm-btn">PM</div>');
          this.$amBtn.on('click', this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm);
          this.$pmBtn.on('click', this._handleAmPmClick.bind(this)).appendTo(this.spanAmPm);
        }

        this._buildHoursView();
        this._buildMinutesView();
        this._buildSVGClock();
      }
    }, {
      key: "_buildSVGClock",
      value: function _buildSVGClock() {
        // Draw clock hands and others
        var dialRadius = this.options.dialRadius;
        var tickRadius = this.options.tickRadius;
        var diameter = dialRadius * 2;

        var svg = Timepicker._createSVGEl('svg');
        svg.setAttribute('class', 'timepicker-svg');
        svg.setAttribute('width', diameter);
        svg.setAttribute('height', diameter);
        var g = Timepicker._createSVGEl('g');
        g.setAttribute('transform', 'translate(' + dialRadius + ',' + dialRadius + ')');
        var bearing = Timepicker._createSVGEl('circle');
        bearing.setAttribute('class', 'timepicker-canvas-bearing');
        bearing.setAttribute('cx', 0);
        bearing.setAttribute('cy', 0);
        bearing.setAttribute('r', 4);
        var hand = Timepicker._createSVGEl('line');
        hand.setAttribute('x1', 0);
        hand.setAttribute('y1', 0);
        var bg = Timepicker._createSVGEl('circle');
        bg.setAttribute('class', 'timepicker-canvas-bg');
        bg.setAttribute('r', tickRadius);
        g.appendChild(hand);
        g.appendChild(bg);
        g.appendChild(bearing);
        svg.appendChild(g);
        this._canvas.appendChild(svg);

        this.hand = hand;
        this.bg = bg;
        this.bearing = bearing;
        this.g = g;
      }
    }, {
      key: "_buildHoursView",
      value: function _buildHoursView() {
        var $tick = $('<div class="timepicker-tick"></div>');
        // Hours view
        if (this.options.twelveHour) {
          for (var i = 1; i < 13; i += 1) {
            var tick = $tick.clone();
            var radian = i / 6 * Math.PI;
            var radius = this.options.outerRadius;
            tick.css({
              left: this.options.dialRadius + Math.sin(radian) * radius - this.options.tickRadius + 'px',
              top: this.options.dialRadius - Math.cos(radian) * radius - this.options.tickRadius + 'px'
            });
            tick.html(i === 0 ? '00' : i);
            this.hoursView.appendChild(tick[0]);
            // tick.on(mousedownEvent, mousedown);
          }
        } else {
          for (var _i2 = 0; _i2 < 24; _i2 += 1) {
            var _tick = $tick.clone();
            var _radian = _i2 / 6 * Math.PI;
            var inner = _i2 > 0 && _i2 < 13;
            var _radius = inner ? this.options.innerRadius : this.options.outerRadius;
            _tick.css({
              left: this.options.dialRadius + Math.sin(_radian) * _radius - this.options.tickRadius + 'px',
              top: this.options.dialRadius - Math.cos(_radian) * _radius - this.options.tickRadius + 'px'
            });
            _tick.html(_i2 === 0 ? '00' : _i2);
            this.hoursView.appendChild(_tick[0]);
            // tick.on(mousedownEvent, mousedown);
          }
        }
      }
    }, {
      key: "_buildMinutesView",
      value: function _buildMinutesView() {
        var $tick = $('<div class="timepicker-tick"></div>');
        // Minutes view
        for (var i = 0; i < 60; i += 5) {
          var tick = $tick.clone();
          var radian = i / 30 * Math.PI;
          tick.css({
            left: this.options.dialRadius + Math.sin(radian) * this.options.outerRadius - this.options.tickRadius + 'px',
            top: this.options.dialRadius - Math.cos(radian) * this.options.outerRadius - this.options.tickRadius + 'px'
          });
          tick.html(Timepicker._addLeadingZero(i));
          this.minutesView.appendChild(tick[0]);
        }
      }
    }, {
      key: "_handleAmPmClick",
      value: function _handleAmPmClick(e) {
        var $btnClicked = $(e.target);
        this.amOrPm = $btnClicked.hasClass('am-btn') ? 'AM' : 'PM';
        this._updateAmPmView();
      }
    }, {
      key: "_updateAmPmView",
      value: function _updateAmPmView() {
        if (this.options.twelveHour) {
          this.$amBtn.toggleClass('text-primary', this.amOrPm === 'AM');
          this.$pmBtn.toggleClass('text-primary', this.amOrPm === 'PM');
        }
      }
    }, {
      key: "_updateTimeFromInput",
      value: function _updateTimeFromInput() {
        // Get the time
        var value = ((this.el.value || this.options.defaultTime || '') + '').split(':');
        if (this.options.twelveHour && !(typeof value[1] === 'undefined')) {
          if (value[1].toUpperCase().indexOf('AM') > 0) {
            this.amOrPm = 'AM';
          } else {
            this.amOrPm = 'PM';
          }
          value[1] = value[1].replace('AM', '').replace('PM', '');
        }
        if (value[0] === 'now') {
          var now = new Date(+new Date() + this.options.fromNow);
          value = [now.getHours(), now.getMinutes()];
          if (this.options.twelveHour) {
            this.amOrPm = value[0] >= 12 && value[0] < 24 ? 'PM' : 'AM';
          }
        }
        this.hours = +value[0] || 0;
        this.minutes = +value[1] || 0;
        this.spanHours.innerHTML = this.hours;
        this.spanMinutes.innerHTML = Timepicker._addLeadingZero(this.minutes);

        this._updateAmPmView();
      }
    }, {
      key: "showView",
      value: function showView(view, delay) {
        if (view === 'minutes' && $(this.hoursView).css('visibility') === 'visible') {
          // raiseCallback(this.options.beforeHourSelect);
        }
        var isHours = view === 'hours',
            nextView = isHours ? this.hoursView : this.minutesView,
            hideView = isHours ? this.minutesView : this.hoursView;
        this.currentView = view;

        $(this.spanHours).toggleClass('text-primary', isHours);
        $(this.spanMinutes).toggleClass('text-primary', !isHours);

        // Transition view
        hideView.classList.add('timepicker-dial-out');
        $(nextView).css('visibility', 'visible').removeClass('timepicker-dial-out');

        // Reset clock hand
        this.resetClock(delay);

        // After transitions ended
        clearTimeout(this.toggleViewTimer);
        this.toggleViewTimer = setTimeout(function () {
          $(hideView).css('visibility', 'hidden');
        }, this.options.duration);
      }
    }, {
      key: "resetClock",
      value: function resetClock(delay) {
        var view = this.currentView,
            value = this[view],
            isHours = view === 'hours',
            unit = Math.PI / (isHours ? 6 : 30),
            radian = value * unit,
            radius = isHours && value > 0 && value < 13 ? this.options.innerRadius : this.options.outerRadius,
            x = Math.sin(radian) * radius,
            y = -Math.cos(radian) * radius,
            self = this;

        if (delay) {
          $(this.canvas).addClass('timepicker-canvas-out');
          setTimeout(function () {
            $(self.canvas).removeClass('timepicker-canvas-out');
            self.setHand(x, y);
          }, delay);
        } else {
          this.setHand(x, y);
        }
      }
    }, {
      key: "setHand",
      value: function setHand(x, y, roundBy5) {
        var _this60 = this;

        var radian = Math.atan2(x, -y),
            isHours = this.currentView === 'hours',
            unit = Math.PI / (isHours || roundBy5 ? 6 : 30),
            z = Math.sqrt(x * x + y * y),
            inner = isHours && z < (this.options.outerRadius + this.options.innerRadius) / 2,
            radius = inner ? this.options.innerRadius : this.options.outerRadius;

        if (this.options.twelveHour) {
          radius = this.options.outerRadius;
        }

        // Radian should in range [0, 2PI]
        if (radian < 0) {
          radian = Math.PI * 2 + radian;
        }

        // Get the round value
        var value = Math.round(radian / unit);

        // Get the round radian
        radian = value * unit;

        // Correct the hours or minutes
        if (this.options.twelveHour) {
          if (isHours) {
            if (value === 0) value = 12;
          } else {
            if (roundBy5) value *= 5;
            if (value === 60) value = 0;
          }
        } else {
          if (isHours) {
            if (value === 12) {
              value = 0;
            }
            value = inner ? value === 0 ? 12 : value : value === 0 ? 0 : value + 12;
          } else {
            if (roundBy5) {
              value *= 5;
            }
            if (value === 60) {
              value = 0;
            }
          }
        }

        // Once hours or minutes changed, vibrate the device
        if (this[this.currentView] !== value) {
          if (this.vibrate && this.options.vibrate) {
            // Do not vibrate too frequently
            if (!this.vibrateTimer) {
              navigator[this.vibrate](10);
              this.vibrateTimer = setTimeout(function () {
                _this60.vibrateTimer = null;
              }, 100);
            }
          }
        }

        this[this.currentView] = value;
        if (isHours) {
          this['spanHours'].innerHTML = value;
        } else {
          this['spanMinutes'].innerHTML = Timepicker._addLeadingZero(value);
        }

        // Set clock hand and others' position
        var cx1 = Math.sin(radian) * (radius - this.options.tickRadius),
            cy1 = -Math.cos(radian) * (radius - this.options.tickRadius),
            cx2 = Math.sin(radian) * radius,
            cy2 = -Math.cos(radian) * radius;
        this.hand.setAttribute('x2', cx1);
        this.hand.setAttribute('y2', cy1);
        this.bg.setAttribute('cx', cx2);
        this.bg.setAttribute('cy', cy2);
      }
    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        this.isOpen = true;
        this._updateTimeFromInput();
        this.showView('hours');

        this.modal.open();
      }
    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        this.isOpen = false;
        this.modal.close();
      }

      /**
       * Finish timepicker selection.
       */

    }, {
      key: "done",
      value: function done(e, clearValue) {
        // Set input value
        var last = this.el.value;
        var value = clearValue ? '' : Timepicker._addLeadingZero(this.hours) + ':' + Timepicker._addLeadingZero(this.minutes);
        this.time = value;
        if (!clearValue && this.options.twelveHour) {
          value = value + " " + this.amOrPm;
        }
        this.el.value = value;

        // Trigger change event
        if (value !== last) {
          this.$el.trigger('change');
        }

        this.close();
        this.el.focus();
      }
    }, {
      key: "clear",
      value: function clear() {
        this.done(null, true);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Timepicker.__proto__ || Object.getPrototypeOf(Timepicker), "init", this).call(this, this, els, options);
      }
    }, {
      key: "_addLeadingZero",
      value: function _addLeadingZero(num) {
        return (num < 10 ? '0' : '') + num;
      }
    }, {
      key: "_createSVGEl",
      value: function _createSVGEl(name) {
        var svgNS = 'http://www.w3.org/2000/svg';
        return document.createElementNS(svgNS, name);
      }

      /**
       * @typedef {Object} Point
       * @property {number} x The X Coordinate
       * @property {number} y The Y Coordinate
       */

      /**
       * Get x position of mouse or touch event
       * @param {Event} e
       * @return {Point} x and y location
       */

    }, {
      key: "_Pos",
      value: function _Pos(e) {
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return { x: e.targetTouches[0].clientX, y: e.targetTouches[0].clientY };
        }
        // mouse event
        return { x: e.clientX, y: e.clientY };
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Timepicker;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Timepicker;
  }(Component);

  Timepicker._template = ['<div class= "modal timepicker-modal">', '<div class="modal-content timepicker-container">', '<div class="timepicker-digital-display">', '<div class="timepicker-text-container">', '<div class="timepicker-display-column">', '<span class="timepicker-span-hours text-primary"></span>', ':', '<span class="timepicker-span-minutes"></span>', '</div>', '<div class="timepicker-display-column timepicker-display-am-pm">', '<div class="timepicker-span-am-pm"></div>', '</div>', '</div>', '</div>', '<div class="timepicker-analog-display">', '<div class="timepicker-plate">', '<div class="timepicker-canvas"></div>', '<div class="timepicker-dial timepicker-hours"></div>', '<div class="timepicker-dial timepicker-minutes timepicker-dial-out"></div>', '</div>', '<div class="timepicker-footer"></div>', '</div>', '</div>', '</div>'].join('');

  M.Timepicker = Timepicker;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Timepicker, 'timepicker', 'M_Timepicker');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {};

  /**
   * @class
   *
   */

  var CharacterCounter = function (_Component17) {
    _inherits(CharacterCounter, _Component17);

    /**
     * Construct CharacterCounter instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function CharacterCounter(el, options) {
      _classCallCheck(this, CharacterCounter);

      var _this61 = _possibleConstructorReturn(this, (CharacterCounter.__proto__ || Object.getPrototypeOf(CharacterCounter)).call(this, CharacterCounter, el, options));

      _this61.el.M_CharacterCounter = _this61;

      /**
       * Options for the character counter
       */
      _this61.options = $.extend({}, CharacterCounter.defaults, options);

      _this61.isInvalid = false;
      _this61.isValidLength = false;
      _this61._setupCounter();
      _this61._setupEventHandlers();
      return _this61;
    }

    _createClass(CharacterCounter, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.CharacterCounter = undefined;
        this._removeCounter();
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleUpdateCounterBound = this.updateCounter.bind(this);

        this.el.addEventListener('focus', this._handleUpdateCounterBound, true);
        this.el.addEventListener('input', this._handleUpdateCounterBound, true);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('focus', this._handleUpdateCounterBound, true);
        this.el.removeEventListener('input', this._handleUpdateCounterBound, true);
      }

      /**
       * Setup counter element
       */

    }, {
      key: "_setupCounter",
      value: function _setupCounter() {
        this.counterEl = document.createElement('span');
        $(this.counterEl).addClass('character-counter').css({
          float: 'right',
          'font-size': '12px',
          height: 1
        });

        this.$el.parent().append(this.counterEl);
      }

      /**
       * Remove counter element
       */

    }, {
      key: "_removeCounter",
      value: function _removeCounter() {
        $(this.counterEl).remove();
      }

      /**
       * Update counter
       */

    }, {
      key: "updateCounter",
      value: function updateCounter() {
        var maxLength = +this.$el.attr('data-length'),
            actualLength = this.el.value.length;
        this.isValidLength = actualLength <= maxLength;
        var counterString = actualLength;

        if (maxLength) {
          counterString += '/' + maxLength;
          this._validateInput();
        }

        $(this.counterEl).html(counterString);
      }

      /**
       * Add validation classes
       */

    }, {
      key: "_validateInput",
      value: function _validateInput() {
        if (this.isValidLength && this.isInvalid) {
          this.isInvalid = false;
          this.$el.removeClass('invalid');
        } else if (!this.isValidLength && !this.isInvalid) {
          this.isInvalid = true;
          this.$el.removeClass('valid');
          this.$el.addClass('invalid');
        }
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(CharacterCounter.__proto__ || Object.getPrototypeOf(CharacterCounter), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_CharacterCounter;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return CharacterCounter;
  }(Component);

  M.CharacterCounter = CharacterCounter;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(CharacterCounter, 'characterCounter', 'M_CharacterCounter');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    duration: 200, // ms
    dist: -100, // zoom scale TODO: make this more intuitive as an option
    shift: 0, // spacing for center image
    padding: 0, // Padding between non center items
    numVisible: 5, // Number of visible items in carousel
    fullWidth: false, // Change to full width styles
    indicators: false, // Toggle indicators
    noWrap: false, // Don't wrap around and cycle through items.
    onCycleTo: null // Callback for when a new slide is cycled to.
  };

  /**
   * @class
   *
   */

  var Carousel = function (_Component18) {
    _inherits(Carousel, _Component18);

    /**
     * Construct Carousel instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Carousel(el, options) {
      _classCallCheck(this, Carousel);

      var _this62 = _possibleConstructorReturn(this, (Carousel.__proto__ || Object.getPrototypeOf(Carousel)).call(this, Carousel, el, options));

      _this62.el.M_Carousel = _this62;

      /**
       * Options for the carousel
       * @member Carousel#options
       * @prop {Number} duration
       * @prop {Number} dist
       * @prop {Number} shift
       * @prop {Number} padding
       * @prop {Number} numVisible
       * @prop {Boolean} fullWidth
       * @prop {Boolean} indicators
       * @prop {Boolean} noWrap
       * @prop {Function} onCycleTo
       */
      _this62.options = $.extend({}, Carousel.defaults, options);

      // Setup
      _this62.hasMultipleSlides = _this62.$el.find('.carousel-item').length > 1;
      _this62.showIndicators = _this62.options.indicators && _this62.hasMultipleSlides;
      _this62.noWrap = _this62.options.noWrap || !_this62.hasMultipleSlides;
      _this62.pressed = false;
      _this62.dragged = false;
      _this62.offset = _this62.target = 0;
      _this62.images = [];
      _this62.itemWidth = _this62.$el.find('.carousel-item').first().innerWidth();
      _this62.itemHeight = _this62.$el.find('.carousel-item').first().innerHeight();
      _this62.dim = _this62.itemWidth * 2 + _this62.options.padding || 1; // Make sure dim is non zero for divisions.
      _this62._autoScrollBound = _this62._autoScroll.bind(_this62);
      _this62._trackBound = _this62._track.bind(_this62);

      // Full Width carousel setup
      if (_this62.options.fullWidth) {
        _this62.options.dist = 0;
        _this62._setCarouselHeight();

        // Offset fixed items when indicators.
        if (_this62.showIndicators) {
          _this62.$el.find('.carousel-fixed-item').addClass('with-indicators');
        }
      }

      // Iterate through slides
      _this62.$indicators = $('<ul class="indicators"></ul>');
      _this62.$el.find('.carousel-item').each(function (el, i) {
        _this62.images.push(el);
        if (_this62.showIndicators) {
          var $indicator = $('<li class="indicator-item"></li>');

          // Add active to first by default.
          if (i === 0) {
            $indicator[0].classList.add('active');
          }

          _this62.$indicators.append($indicator);
        }
      });
      if (_this62.showIndicators) {
        _this62.$el.append(_this62.$indicators);
      }
      _this62.count = _this62.images.length;

      // Cap numVisible at count
      _this62.options.numVisible = Math.min(_this62.count, _this62.options.numVisible);

      // Setup cross browser string
      _this62.xform = 'transform';
      ['webkit', 'Moz', 'O', 'ms'].every(function (prefix) {
        var e = prefix + 'Transform';
        if (typeof document.body.style[e] !== 'undefined') {
          _this62.xform = e;
          return false;
        }
        return true;
      });

      _this62._setupEventHandlers();
      _this62._scroll(_this62.offset);
      return _this62;
    }

    _createClass(Carousel, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.M_Carousel = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this63 = this;

        this._handleCarouselTapBound = this._handleCarouselTap.bind(this);
        this._handleCarouselDragBound = this._handleCarouselDrag.bind(this);
        this._handleCarouselReleaseBound = this._handleCarouselRelease.bind(this);
        this._handleCarouselClickBound = this._handleCarouselClick.bind(this);

        if (typeof window.ontouchstart !== 'undefined') {
          this.el.addEventListener('touchstart', this._handleCarouselTapBound);
          this.el.addEventListener('touchmove', this._handleCarouselDragBound);
          this.el.addEventListener('touchend', this._handleCarouselReleaseBound);
        }

        this.el.addEventListener('mousedown', this._handleCarouselTapBound);
        this.el.addEventListener('mousemove', this._handleCarouselDragBound);
        this.el.addEventListener('mouseup', this._handleCarouselReleaseBound);
        this.el.addEventListener('mouseleave', this._handleCarouselReleaseBound);
        this.el.addEventListener('click', this._handleCarouselClickBound);

        if (this.showIndicators && this.$indicators) {
          this._handleIndicatorClickBound = this._handleIndicatorClick.bind(this);
          this.$indicators.find('.indicator-item').each(function (el, i) {
            el.addEventListener('click', _this63._handleIndicatorClickBound);
          });
        }

        // Resize
        var throttledResize = M.throttle(this._handleResize, 200);
        this._handleThrottledResizeBound = throttledResize.bind(this);

        window.addEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this64 = this;

        if (typeof window.ontouchstart !== 'undefined') {
          this.el.removeEventListener('touchstart', this._handleCarouselTapBound);
          this.el.removeEventListener('touchmove', this._handleCarouselDragBound);
          this.el.removeEventListener('touchend', this._handleCarouselReleaseBound);
        }
        this.el.removeEventListener('mousedown', this._handleCarouselTapBound);
        this.el.removeEventListener('mousemove', this._handleCarouselDragBound);
        this.el.removeEventListener('mouseup', this._handleCarouselReleaseBound);
        this.el.removeEventListener('mouseleave', this._handleCarouselReleaseBound);
        this.el.removeEventListener('click', this._handleCarouselClickBound);

        if (this.showIndicators && this.$indicators) {
          this.$indicators.find('.indicator-item').each(function (el, i) {
            el.removeEventListener('click', _this64._handleIndicatorClickBound);
          });
        }

        window.removeEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Handle Carousel Tap
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselTap",
      value: function _handleCarouselTap(e) {
        // Fixes firefox draggable image bug
        if (e.type === 'mousedown' && $(e.target).is('img')) {
          e.preventDefault();
        }
        this.pressed = true;
        this.dragged = false;
        this.verticalDragged = false;
        this.reference = this._xpos(e);
        this.referenceY = this._ypos(e);

        this.velocity = this.amplitude = 0;
        this.frame = this.offset;
        this.timestamp = Date.now();
        clearInterval(this.ticker);
        this.ticker = setInterval(this._trackBound, 100);
      }

      /**
       * Handle Carousel Drag
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselDrag",
      value: function _handleCarouselDrag(e) {
        var x = void 0,
            y = void 0,
            delta = void 0,
            deltaY = void 0;
        if (this.pressed) {
          x = this._xpos(e);
          y = this._ypos(e);
          delta = this.reference - x;
          deltaY = Math.abs(this.referenceY - y);
          if (deltaY < 30 && !this.verticalDragged) {
            // If vertical scrolling don't allow dragging.
            if (delta > 2 || delta < -2) {
              this.dragged = true;
              this.reference = x;
              this._scroll(this.offset + delta);
            }
          } else if (this.dragged) {
            // If dragging don't allow vertical scroll.
            e.preventDefault();
            e.stopPropagation();
            return false;
          } else {
            // Vertical scrolling.
            this.verticalDragged = true;
          }
        }

        if (this.dragged) {
          // If dragging don't allow vertical scroll.
          e.preventDefault();
          e.stopPropagation();
          return false;
        }
      }

      /**
       * Handle Carousel Release
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselRelease",
      value: function _handleCarouselRelease(e) {
        if (this.pressed) {
          this.pressed = false;
        } else {
          return;
        }

        clearInterval(this.ticker);
        this.target = this.offset;
        if (this.velocity > 10 || this.velocity < -10) {
          this.amplitude = 0.9 * this.velocity;
          this.target = this.offset + this.amplitude;
        }
        this.target = Math.round(this.target / this.dim) * this.dim;

        // No wrap of items.
        if (this.noWrap) {
          if (this.target >= this.dim * (this.count - 1)) {
            this.target = this.dim * (this.count - 1);
          } else if (this.target < 0) {
            this.target = 0;
          }
        }
        this.amplitude = this.target - this.offset;
        this.timestamp = Date.now();
        requestAnimationFrame(this._autoScrollBound);

        if (this.dragged) {
          e.preventDefault();
          e.stopPropagation();
        }
        return false;
      }

      /**
       * Handle Carousel CLick
       * @param {Event} e
       */

    }, {
      key: "_handleCarouselClick",
      value: function _handleCarouselClick(e) {
        // Disable clicks if carousel was dragged.
        if (this.dragged) {
          e.preventDefault();
          e.stopPropagation();
          return false;
        } else if (!this.options.fullWidth) {
          var clickedIndex = $(e.target).closest('.carousel-item').index();
          var diff = this._wrap(this.center) - clickedIndex;

          // Disable clicks if carousel was shifted by click
          if (diff !== 0) {
            e.preventDefault();
            e.stopPropagation();
          }
          this._cycleTo(clickedIndex);
        }
      }

      /**
       * Handle Indicator CLick
       * @param {Event} e
       */

    }, {
      key: "_handleIndicatorClick",
      value: function _handleIndicatorClick(e) {
        e.stopPropagation();

        var indicator = $(e.target).closest('.indicator-item');
        if (indicator.length) {
          this._cycleTo(indicator.index());
        }
      }

      /**
       * Handle Throttle Resize
       * @param {Event} e
       */

    }, {
      key: "_handleResize",
      value: function _handleResize(e) {
        if (this.options.fullWidth) {
          this.itemWidth = this.$el.find('.carousel-item').first().innerWidth();
          this.imageHeight = this.$el.find('.carousel-item.active').height();
          this.dim = this.itemWidth * 2 + this.options.padding;
          this.offset = this.center * 2 * this.itemWidth;
          this.target = this.offset;
          this._setCarouselHeight(true);
        } else {
          this._scroll();
        }
      }

      /**
       * Set carousel height based on first slide
       * @param {Booleam} imageOnly - true for image slides
       */

    }, {
      key: "_setCarouselHeight",
      value: function _setCarouselHeight(imageOnly) {
        var _this65 = this;

        var firstSlide = this.$el.find('.carousel-item.active').length ? this.$el.find('.carousel-item.active').first() : this.$el.find('.carousel-item').first();
        var firstImage = firstSlide.find('img').first();
        if (firstImage.length) {
          if (firstImage[0].complete) {
            // If image won't trigger the load event
            var imageHeight = firstImage.height();
            if (imageHeight > 0) {
              this.$el.css('height', imageHeight + 'px');
            } else {
              // If image still has no height, use the natural dimensions to calculate
              var naturalWidth = firstImage[0].naturalWidth;
              var naturalHeight = firstImage[0].naturalHeight;
              var adjustedHeight = this.$el.width() / naturalWidth * naturalHeight;
              this.$el.css('height', adjustedHeight + 'px');
            }
          } else {
            // Get height when image is loaded normally
            firstImage.one('load', function (el, i) {
              _this65.$el.css('height', el.offsetHeight + 'px');
            });
          }
        } else if (!imageOnly) {
          var slideHeight = firstSlide.height();
          this.$el.css('height', slideHeight + 'px');
        }
      }

      /**
       * Get x position from event
       * @param {Event} e
       */

    }, {
      key: "_xpos",
      value: function _xpos(e) {
        // touch event
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return e.targetTouches[0].clientX;
        }

        // mouse event
        return e.clientX;
      }

      /**
       * Get y position from event
       * @param {Event} e
       */

    }, {
      key: "_ypos",
      value: function _ypos(e) {
        // touch event
        if (e.targetTouches && e.targetTouches.length >= 1) {
          return e.targetTouches[0].clientY;
        }

        // mouse event
        return e.clientY;
      }

      /**
       * Wrap index
       * @param {Number} x
       */

    }, {
      key: "_wrap",
      value: function _wrap(x) {
        return x >= this.count ? x % this.count : x < 0 ? this._wrap(this.count + x % this.count) : x;
      }

      /**
       * Tracks scrolling information
       */

    }, {
      key: "_track",
      value: function _track() {
        var now = void 0,
            elapsed = void 0,
            delta = void 0,
            v = void 0;

        now = Date.now();
        elapsed = now - this.timestamp;
        this.timestamp = now;
        delta = this.offset - this.frame;
        this.frame = this.offset;

        v = 1000 * delta / (1 + elapsed);
        this.velocity = 0.8 * v + 0.2 * this.velocity;
      }

      /**
       * Auto scrolls to nearest carousel item.
       */

    }, {
      key: "_autoScroll",
      value: function _autoScroll() {
        var elapsed = void 0,
            delta = void 0;

        if (this.amplitude) {
          elapsed = Date.now() - this.timestamp;
          delta = this.amplitude * Math.exp(-elapsed / this.options.duration);
          if (delta > 2 || delta < -2) {
            this._scroll(this.target - delta);
            requestAnimationFrame(this._autoScrollBound);
          } else {
            this._scroll(this.target);
          }
        }
      }

      /**
       * Scroll to target
       * @param {Number} x
       */

    }, {
      key: "_scroll",
      value: function _scroll(x) {
        var _this66 = this;

        // Track scrolling state
        if (!this.$el.hasClass('scrolling')) {
          this.el.classList.add('scrolling');
        }
        if (this.scrollingTimeout != null) {
          window.clearTimeout(this.scrollingTimeout);
        }
        this.scrollingTimeout = window.setTimeout(function () {
          _this66.$el.removeClass('scrolling');
        }, this.options.duration);

        // Start actual scroll
        var i = void 0,
            half = void 0,
            delta = void 0,
            dir = void 0,
            tween = void 0,
            el = void 0,
            alignment = void 0,
            zTranslation = void 0,
            tweenedOpacity = void 0,
            centerTweenedOpacity = void 0;
        var lastCenter = this.center;
        var numVisibleOffset = 1 / this.options.numVisible;

        this.offset = typeof x === 'number' ? x : this.offset;
        this.center = Math.floor((this.offset + this.dim / 2) / this.dim);
        delta = this.offset - this.center * this.dim;
        dir = delta < 0 ? 1 : -1;
        tween = -dir * delta * 2 / this.dim;
        half = this.count >> 1;

        if (this.options.fullWidth) {
          alignment = 'translateX(0)';
          centerTweenedOpacity = 1;
        } else {
          alignment = 'translateX(' + (this.el.clientWidth - this.itemWidth) / 2 + 'px) ';
          alignment += 'translateY(' + (this.el.clientHeight - this.itemHeight) / 2 + 'px)';
          centerTweenedOpacity = 1 - numVisibleOffset * tween;
        }

        // Set indicator active
        if (this.showIndicators) {
          var diff = this.center % this.count;
          var activeIndicator = this.$indicators.find('.indicator-item.active');
          if (activeIndicator.index() !== diff) {
            activeIndicator.removeClass('active');
            this.$indicators.find('.indicator-item').eq(diff)[0].classList.add('active');
          }
        }

        // center
        // Don't show wrapped items.
        if (!this.noWrap || this.center >= 0 && this.center < this.count) {
          el = this.images[this._wrap(this.center)];

          // Add active class to center item.
          if (!$(el).hasClass('active')) {
            this.$el.find('.carousel-item').removeClass('active');
            el.classList.add('active');
          }
          var transformString = alignment + " translateX(" + -delta / 2 + "px) translateX(" + dir * this.options.shift * tween * i + "px) translateZ(" + this.options.dist * tween + "px)";
          this._updateItemStyle(el, centerTweenedOpacity, 0, transformString);
        }

        for (i = 1; i <= half; ++i) {
          // right side
          if (this.options.fullWidth) {
            zTranslation = this.options.dist;
            tweenedOpacity = i === half && delta < 0 ? 1 - tween : 1;
          } else {
            zTranslation = this.options.dist * (i * 2 + tween * dir);
            tweenedOpacity = 1 - numVisibleOffset * (i * 2 + tween * dir);
          }
          // Don't show wrapped items.
          if (!this.noWrap || this.center + i < this.count) {
            el = this.images[this._wrap(this.center + i)];
            var _transformString = alignment + " translateX(" + (this.options.shift + (this.dim * i - delta) / 2) + "px) translateZ(" + zTranslation + "px)";
            this._updateItemStyle(el, tweenedOpacity, -i, _transformString);
          }

          // left side
          if (this.options.fullWidth) {
            zTranslation = this.options.dist;
            tweenedOpacity = i === half && delta > 0 ? 1 - tween : 1;
          } else {
            zTranslation = this.options.dist * (i * 2 - tween * dir);
            tweenedOpacity = 1 - numVisibleOffset * (i * 2 - tween * dir);
          }
          // Don't show wrapped items.
          if (!this.noWrap || this.center - i >= 0) {
            el = this.images[this._wrap(this.center - i)];
            var _transformString2 = alignment + " translateX(" + (-this.options.shift + (-this.dim * i - delta) / 2) + "px) translateZ(" + zTranslation + "px)";
            this._updateItemStyle(el, tweenedOpacity, -i, _transformString2);
          }
        }

        // center
        // Don't show wrapped items.
        if (!this.noWrap || this.center >= 0 && this.center < this.count) {
          el = this.images[this._wrap(this.center)];
          var _transformString3 = alignment + " translateX(" + -delta / 2 + "px) translateX(" + dir * this.options.shift * tween + "px) translateZ(" + this.options.dist * tween + "px)";
          this._updateItemStyle(el, centerTweenedOpacity, 0, _transformString3);
        }

        // onCycleTo callback
        var $currItem = this.$el.find('.carousel-item').eq(this._wrap(this.center));
        if (lastCenter !== this.center && typeof this.options.onCycleTo === 'function') {
          this.options.onCycleTo.call(this, $currItem[0], this.dragged);
        }

        // One time callback
        if (typeof this.oneTimeCallback === 'function') {
          this.oneTimeCallback.call(this, $currItem[0], this.dragged);
          this.oneTimeCallback = null;
        }
      }

      /**
       * Cycle to target
       * @param {Element} el
       * @param {Number} opacity
       * @param {Number} zIndex
       * @param {String} transform
       */

    }, {
      key: "_updateItemStyle",
      value: function _updateItemStyle(el, opacity, zIndex, transform) {
        el.style[this.xform] = transform;
        el.style.zIndex = zIndex;
        el.style.opacity = opacity;
        el.style.visibility = 'visible';
      }

      /**
       * Cycle to target
       * @param {Number} n
       * @param {Function} callback
       */

    }, {
      key: "_cycleTo",
      value: function _cycleTo(n, callback) {
        var diff = this.center % this.count - n;

        // Account for wraparound.
        if (!this.noWrap) {
          if (diff < 0) {
            if (Math.abs(diff + this.count) < Math.abs(diff)) {
              diff += this.count;
            }
          } else if (diff > 0) {
            if (Math.abs(diff - this.count) < diff) {
              diff -= this.count;
            }
          }
        }

        this.target = this.dim * Math.round(this.offset / this.dim);
        // Next
        if (diff < 0) {
          this.target += this.dim * Math.abs(diff);

          // Prev
        } else if (diff > 0) {
          this.target -= this.dim * diff;
        }

        // Set one time callback
        if (typeof callback === 'function') {
          this.oneTimeCallback = callback;
        }

        // Scroll
        if (this.offset !== this.target) {
          this.amplitude = this.target - this.offset;
          this.timestamp = Date.now();
          requestAnimationFrame(this._autoScrollBound);
        }
      }

      /**
       * Cycle to next item
       * @param {Number} [n]
       */

    }, {
      key: "next",
      value: function next(n) {
        if (n === undefined || isNaN(n)) {
          n = 1;
        }

        var index = this.center + n;
        if (index >= this.count || index < 0) {
          if (this.noWrap) {
            return;
          }

          index = this._wrap(index);
        }
        this._cycleTo(index);
      }

      /**
       * Cycle to previous item
       * @param {Number} [n]
       */

    }, {
      key: "prev",
      value: function prev(n) {
        if (n === undefined || isNaN(n)) {
          n = 1;
        }

        var index = this.center - n;
        if (index >= this.count || index < 0) {
          if (this.noWrap) {
            return;
          }

          index = this._wrap(index);
        }

        this._cycleTo(index);
      }

      /**
       * Cycle to nth item
       * @param {Number} [n]
       * @param {Function} callback
       */

    }, {
      key: "set",
      value: function set(n, callback) {
        if (n === undefined || isNaN(n)) {
          n = 0;
        }

        if (n > this.count || n < 0) {
          if (this.noWrap) {
            return;
          }

          n = this._wrap(n);
        }

        this._cycleTo(n, callback);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Carousel.__proto__ || Object.getPrototypeOf(Carousel), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Carousel;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Carousel;
  }(Component);

  M.Carousel = Carousel;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Carousel, 'carousel', 'M_Carousel');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    onOpen: undefined,
    onClose: undefined
  };

  /**
   * @class
   *
   */

  var TapTarget = function (_Component19) {
    _inherits(TapTarget, _Component19);

    /**
     * Construct TapTarget instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function TapTarget(el, options) {
      _classCallCheck(this, TapTarget);

      var _this67 = _possibleConstructorReturn(this, (TapTarget.__proto__ || Object.getPrototypeOf(TapTarget)).call(this, TapTarget, el, options));

      _this67.el.M_TapTarget = _this67;

      /**
       * Options for the select
       * @member TapTarget#options
       * @prop {Function} onOpen - Callback function called when feature discovery is opened
       * @prop {Function} onClose - Callback function called when feature discovery is closed
       */
      _this67.options = $.extend({}, TapTarget.defaults, options);

      _this67.isOpen = false;

      // setup
      _this67.$origin = $('#' + _this67.$el.attr('data-target'));
      _this67._setup();

      _this67._calculatePositioning();
      _this67._setupEventHandlers();
      return _this67;
    }

    _createClass(TapTarget, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this.el.TapTarget = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleDocumentClickBound = this._handleDocumentClick.bind(this);
        this._handleTargetClickBound = this._handleTargetClick.bind(this);
        this._handleOriginClickBound = this._handleOriginClick.bind(this);

        this.el.addEventListener('click', this._handleTargetClickBound);
        this.originEl.addEventListener('click', this._handleOriginClickBound);

        // Resize
        var throttledResize = M.throttle(this._handleResize, 200);
        this._handleThrottledResizeBound = throttledResize.bind(this);

        window.addEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('click', this._handleTargetClickBound);
        this.originEl.removeEventListener('click', this._handleOriginClickBound);
        window.removeEventListener('resize', this._handleThrottledResizeBound);
      }

      /**
       * Handle Target Click
       * @param {Event} e
       */

    }, {
      key: "_handleTargetClick",
      value: function _handleTargetClick(e) {
        this.open();
      }

      /**
       * Handle Origin Click
       * @param {Event} e
       */

    }, {
      key: "_handleOriginClick",
      value: function _handleOriginClick(e) {
        this.close();
      }

      /**
       * Handle Resize
       * @param {Event} e
       */

    }, {
      key: "_handleResize",
      value: function _handleResize(e) {
        this._calculatePositioning();
      }

      /**
       * Handle Resize
       * @param {Event} e
       */

    }, {
      key: "_handleDocumentClick",
      value: function _handleDocumentClick(e) {
        if (!$(e.target).closest('.tap-target-wrapper').length) {
          this.close();
          e.preventDefault();
          e.stopPropagation();
        }
      }

      /**
       * Setup Tap Target
       */

    }, {
      key: "_setup",
      value: function _setup() {
        // Creating tap target
        this.wrapper = this.$el.parent()[0];
        this.waveEl = $(this.wrapper).find('.tap-target-wave')[0];
        this.originEl = $(this.wrapper).find('.tap-target-origin')[0];
        this.contentEl = this.$el.find('.tap-target-content')[0];

        // Creating wrapper
        if (!$(this.wrapper).hasClass('.tap-target-wrapper')) {
          this.wrapper = document.createElement('div');
          this.wrapper.classList.add('tap-target-wrapper');
          this.$el.before($(this.wrapper));
          this.wrapper.append(this.el);
        }

        // Creating content
        if (!this.contentEl) {
          this.contentEl = document.createElement('div');
          this.contentEl.classList.add('tap-target-content');
          this.$el.append(this.contentEl);
        }

        // Creating foreground wave
        if (!this.waveEl) {
          this.waveEl = document.createElement('div');
          this.waveEl.classList.add('tap-target-wave');

          // Creating origin
          if (!this.originEl) {
            this.originEl = this.$origin.clone(true, true);
            this.originEl.addClass('tap-target-origin');
            this.originEl.removeAttr('id');
            this.originEl.removeAttr('style');
            this.originEl = this.originEl[0];
            this.waveEl.append(this.originEl);
          }

          this.wrapper.append(this.waveEl);
        }
      }

      /**
       * Calculate positioning
       */

    }, {
      key: "_calculatePositioning",
      value: function _calculatePositioning() {
        // Element or parent is fixed position?
        var isFixed = this.$origin.css('position') === 'fixed';
        if (!isFixed) {
          var parents = this.$origin.parents();
          for (var i = 0; i < parents.length; i++) {
            isFixed = $(parents[i]).css('position') == 'fixed';
            if (isFixed) {
              break;
            }
          }
        }

        // Calculating origin
        var originWidth = this.$origin.outerWidth();
        var originHeight = this.$origin.outerHeight();
        var originTop = isFixed ? this.$origin.offset().top - M.getDocumentScrollTop() : this.$origin.offset().top;
        var originLeft = isFixed ? this.$origin.offset().left - M.getDocumentScrollLeft() : this.$origin.offset().left;

        // Calculating screen
        var windowWidth = window.innerWidth;
        var windowHeight = window.innerHeight;
        var centerX = windowWidth / 2;
        var centerY = windowHeight / 2;
        var isLeft = originLeft <= centerX;
        var isRight = originLeft > centerX;
        var isTop = originTop <= centerY;
        var isBottom = originTop > centerY;
        var isCenterX = originLeft >= windowWidth * 0.25 && originLeft <= windowWidth * 0.75;

        // Calculating tap target
        var tapTargetWidth = this.$el.outerWidth();
        var tapTargetHeight = this.$el.outerHeight();
        var tapTargetTop = originTop + originHeight / 2 - tapTargetHeight / 2;
        var tapTargetLeft = originLeft + originWidth / 2 - tapTargetWidth / 2;
        var tapTargetPosition = isFixed ? 'fixed' : 'absolute';

        // Calculating content
        var tapTargetTextWidth = isCenterX ? tapTargetWidth : tapTargetWidth / 2 + originWidth;
        var tapTargetTextHeight = tapTargetHeight / 2;
        var tapTargetTextTop = isTop ? tapTargetHeight / 2 : 0;
        var tapTargetTextBottom = 0;
        var tapTargetTextLeft = isLeft && !isCenterX ? tapTargetWidth / 2 - originWidth : 0;
        var tapTargetTextRight = 0;
        var tapTargetTextPadding = originWidth;
        var tapTargetTextAlign = isBottom ? 'bottom' : 'top';

        // Calculating wave
        var tapTargetWaveWidth = originWidth > originHeight ? originWidth * 2 : originWidth * 2;
        var tapTargetWaveHeight = tapTargetWaveWidth;
        var tapTargetWaveTop = tapTargetHeight / 2 - tapTargetWaveHeight / 2;
        var tapTargetWaveLeft = tapTargetWidth / 2 - tapTargetWaveWidth / 2;

        // Setting tap target
        var tapTargetWrapperCssObj = {};
        tapTargetWrapperCssObj.top = isTop ? tapTargetTop + 'px' : '';
        tapTargetWrapperCssObj.right = isRight ? windowWidth - tapTargetLeft - tapTargetWidth + 'px' : '';
        tapTargetWrapperCssObj.bottom = isBottom ? windowHeight - tapTargetTop - tapTargetHeight + 'px' : '';
        tapTargetWrapperCssObj.left = isLeft ? tapTargetLeft + 'px' : '';
        tapTargetWrapperCssObj.position = tapTargetPosition;
        $(this.wrapper).css(tapTargetWrapperCssObj);

        // Setting content
        $(this.contentEl).css({
          width: tapTargetTextWidth + 'px',
          height: tapTargetTextHeight + 'px',
          top: tapTargetTextTop + 'px',
          right: tapTargetTextRight + 'px',
          bottom: tapTargetTextBottom + 'px',
          left: tapTargetTextLeft + 'px',
          padding: tapTargetTextPadding + 'px',
          verticalAlign: tapTargetTextAlign
        });

        // Setting wave
        $(this.waveEl).css({
          top: tapTargetWaveTop + 'px',
          left: tapTargetWaveLeft + 'px',
          width: tapTargetWaveWidth + 'px',
          height: tapTargetWaveHeight + 'px'
        });
      }

      /**
       * Open TapTarget
       */

    }, {
      key: "open",
      value: function open() {
        if (this.isOpen) {
          return;
        }

        // onOpen callback
        if (typeof this.options.onOpen === 'function') {
          this.options.onOpen.call(this, this.$origin[0]);
        }

        this.isOpen = true;
        this.wrapper.classList.add('open');

        document.body.addEventListener('click', this._handleDocumentClickBound, true);
        document.body.addEventListener('touchend', this._handleDocumentClickBound);
      }

      /**
       * Close Tap Target
       */

    }, {
      key: "close",
      value: function close() {
        if (!this.isOpen) {
          return;
        }

        // onClose callback
        if (typeof this.options.onClose === 'function') {
          this.options.onClose.call(this, this.$origin[0]);
        }

        this.isOpen = false;
        this.wrapper.classList.remove('open');

        document.body.removeEventListener('click', this._handleDocumentClickBound, true);
        document.body.removeEventListener('touchend', this._handleDocumentClickBound);
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(TapTarget.__proto__ || Object.getPrototypeOf(TapTarget), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_TapTarget;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return TapTarget;
  }(Component);

  M.TapTarget = TapTarget;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(TapTarget, 'tapTarget', 'M_TapTarget');
  }
})(cash);
;(function ($) {
  'use strict';

  var _defaults = {
    classes: '',
    dropdownOptions: {}
  };

  /**
   * @class
   *
   */

  var FormSelect = function (_Component20) {
    _inherits(FormSelect, _Component20);

    /**
     * Construct FormSelect instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function FormSelect(el, options) {
      _classCallCheck(this, FormSelect);

      // Don't init if browser default version
      var _this68 = _possibleConstructorReturn(this, (FormSelect.__proto__ || Object.getPrototypeOf(FormSelect)).call(this, FormSelect, el, options));

      if (_this68.$el.hasClass('browser-default')) {
        return _possibleConstructorReturn(_this68);
      }

      _this68.el.M_FormSelect = _this68;

      /**
       * Options for the select
       * @member FormSelect#options
       */
      _this68.options = $.extend({}, FormSelect.defaults, options);

      _this68.isMultiple = _this68.$el.prop('multiple');

      // Setup
      _this68.el.tabIndex = -1;
      _this68._keysSelected = {};
      _this68._valueDict = {}; // Maps key to original and generated option element.
      _this68._setupDropdown();

      _this68._setupEventHandlers();
      return _this68;
    }

    _createClass(FormSelect, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._removeDropdown();
        this.el.M_FormSelect = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        var _this69 = this;

        this._handleSelectChangeBound = this._handleSelectChange.bind(this);
        this._handleOptionClickBound = this._handleOptionClick.bind(this);
        this._handleInputClickBound = this._handleInputClick.bind(this);

        $(this.dropdownOptions).find('li:not(.optgroup)').each(function (el) {
          el.addEventListener('click', _this69._handleOptionClickBound);
        });
        this.el.addEventListener('change', this._handleSelectChangeBound);
        this.input.addEventListener('click', this._handleInputClickBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        var _this70 = this;

        $(this.dropdownOptions).find('li:not(.optgroup)').each(function (el) {
          el.removeEventListener('click', _this70._handleOptionClickBound);
        });
        this.el.removeEventListener('change', this._handleSelectChangeBound);
        this.input.removeEventListener('click', this._handleInputClickBound);
      }

      /**
       * Handle Select Change
       * @param {Event} e
       */

    }, {
      key: "_handleSelectChange",
      value: function _handleSelectChange(e) {
        this._setValueToInput();
      }

      /**
       * Handle Option Click
       * @param {Event} e
       */

    }, {
      key: "_handleOptionClick",
      value: function _handleOptionClick(e) {
        e.preventDefault();
        var option = $(e.target).closest('li')[0];
        var key = option.id;
        if (!$(option).hasClass('disabled') && !$(option).hasClass('optgroup') && key.length) {
          var selected = true;

          if (this.isMultiple) {
            // Deselect placeholder option if still selected.
            var placeholderOption = $(this.dropdownOptions).find('li.disabled.selected');
            if (placeholderOption.length) {
              placeholderOption.removeClass('selected');
              placeholderOption.find('input[type="checkbox"]').prop('checked', false);
              this._toggleEntryFromArray(placeholderOption[0].id);
            }
            selected = this._toggleEntryFromArray(key);
          } else {
            $(this.dropdownOptions).find('li').removeClass('selected');
            $(option).toggleClass('selected', selected);
          }

          // Set selected on original select option
          // Only trigger if selected state changed
          var prevSelected = $(this._valueDict[key].el).prop('selected');
          if (prevSelected !== selected) {
            $(this._valueDict[key].el).prop('selected', selected);
            this.$el.trigger('change');
          }
        }

        e.stopPropagation();
      }

      /**
       * Handle Input Click
       */

    }, {
      key: "_handleInputClick",
      value: function _handleInputClick() {
        if (this.dropdown && this.dropdown.isOpen) {
          this._setValueToInput();
          this._setSelectedStates();
        }
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_setupDropdown",
      value: function _setupDropdown() {
        var _this71 = this;

        this.wrapper = document.createElement('div');
        $(this.wrapper).addClass('select-wrapper ' + this.options.classes);
        this.$el.before($(this.wrapper));
        this.wrapper.appendChild(this.el);

        if (this.el.disabled) {
          this.wrapper.classList.add('disabled');
        }

        // Create dropdown
        this.$selectOptions = this.$el.children('option, optgroup');
        this.dropdownOptions = document.createElement('ul');
        this.dropdownOptions.id = "select-options-" + M.guid();
        $(this.dropdownOptions).addClass('dropdown-content select-dropdown ' + (this.isMultiple ? 'multiple-select-dropdown' : ''));

        // Create dropdown structure.
        if (this.$selectOptions.length) {
          this.$selectOptions.each(function (el) {
            if ($(el).is('option')) {
              // Direct descendant option.
              var optionEl = void 0;
              if (_this71.isMultiple) {
                optionEl = _this71._appendOptionWithIcon(_this71.$el, el, 'multiple');
              } else {
                optionEl = _this71._appendOptionWithIcon(_this71.$el, el);
              }

              _this71._addOptionToValueDict(el, optionEl);
            } else if ($(el).is('optgroup')) {
              // Optgroup.
              var selectOptions = $(el).children('option');
              $(_this71.dropdownOptions).append($('<li class="optgroup"><span>' + el.getAttribute('label') + '</span></li>')[0]);

              selectOptions.each(function (el) {
                var optionEl = _this71._appendOptionWithIcon(_this71.$el, el, 'optgroup-option');
                _this71._addOptionToValueDict(el, optionEl);
              });
            }
          });
        }

        this.$el.after(this.dropdownOptions);

        // Add input dropdown
        this.input = document.createElement('input');
        $(this.input).addClass('select-dropdown dropdown-trigger');
        this.input.setAttribute('type', 'text');
        this.input.setAttribute('readonly', 'true');
        this.input.setAttribute('data-target', this.dropdownOptions.id);
        if (this.el.disabled) {
          $(this.input).prop('disabled', 'true');
        }

        this.$el.before(this.input);
        this._setValueToInput();

        // Add caret
        var dropdownIcon = $('<svg class="caret" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>');
        this.$el.before(dropdownIcon[0]);

        // Initialize dropdown
        if (!this.el.disabled) {
          var dropdownOptions = $.extend({}, this.options.dropdownOptions);

          // Add callback for centering selected option when dropdown content is scrollable
          dropdownOptions.onOpenEnd = function (el) {
            var selectedOption = $(_this71.dropdownOptions).find('.selected').first();

            if (selectedOption.length) {
              // Focus selected option in dropdown
              M.keyDown = true;
              _this71.dropdown.focusedIndex = selectedOption.index();
              _this71.dropdown._focusFocusedItem();
              M.keyDown = false;

              // Handle scrolling to selected option
              if (_this71.dropdown.isScrollable) {
                var scrollOffset = selectedOption[0].getBoundingClientRect().top - _this71.dropdownOptions.getBoundingClientRect().top; // scroll to selected option
                scrollOffset -= _this71.dropdownOptions.clientHeight / 2; // center in dropdown
                _this71.dropdownOptions.scrollTop = scrollOffset;
              }
            }
          };

          if (this.isMultiple) {
            dropdownOptions.closeOnClick = false;
          }
          this.dropdown = M.Dropdown.init(this.input, dropdownOptions);
        }

        // Add initial selections
        this._setSelectedStates();
      }

      /**
       * Add option to value dict
       * @param {Element} el  original option element
       * @param {Element} optionEl  generated option element
       */

    }, {
      key: "_addOptionToValueDict",
      value: function _addOptionToValueDict(el, optionEl) {
        var index = Object.keys(this._valueDict).length;
        var key = this.dropdownOptions.id + index;
        var obj = {};
        optionEl.id = key;

        obj.el = el;
        obj.optionEl = optionEl;
        this._valueDict[key] = obj;
      }

      /**
       * Remove dropdown
       */

    }, {
      key: "_removeDropdown",
      value: function _removeDropdown() {
        $(this.wrapper).find('.caret').remove();
        $(this.input).remove();
        $(this.dropdownOptions).remove();
        $(this.wrapper).before(this.$el);
        $(this.wrapper).remove();
      }

      /**
       * Setup dropdown
       * @param {Element} select  select element
       * @param {Element} option  option element from select
       * @param {String} type
       * @return {Element}  option element added
       */

    }, {
      key: "_appendOptionWithIcon",
      value: function _appendOptionWithIcon(select, option, type) {
        // Add disabled attr if disabled
        var disabledClass = option.disabled ? 'disabled ' : '';
        var optgroupClass = type === 'optgroup-option' ? 'optgroup-option ' : '';
        var multipleCheckbox = this.isMultiple ? "<label><input type=\"checkbox\"" + disabledClass + "\"/><span>" + option.innerHTML + "</span></label>" : option.innerHTML;
        var liEl = $('<li></li>');
        var spanEl = $('<span></span>');
        spanEl.html(multipleCheckbox);
        liEl.addClass(disabledClass + " " + optgroupClass);
        liEl.append(spanEl);

        // add icons
        var iconUrl = option.getAttribute('data-icon');
        if (!!iconUrl) {
          var imgEl = $("<img alt=\"\" src=\"" + iconUrl + "\">");
          liEl.prepend(imgEl);
        }

        // Check for multiple type.
        $(this.dropdownOptions).append(liEl[0]);
        return liEl[0];
      }

      /**
       * Toggle entry from option
       * @param {String} key  Option key
       * @return {Boolean}  if entry was added or removed
       */

    }, {
      key: "_toggleEntryFromArray",
      value: function _toggleEntryFromArray(key) {
        var notAdded = !this._keysSelected.hasOwnProperty(key);
        var $optionLi = $(this._valueDict[key].optionEl);

        if (notAdded) {
          this._keysSelected[key] = true;
        } else {
          delete this._keysSelected[key];
        }

        $optionLi.toggleClass('selected', notAdded);

        // Set checkbox checked value
        $optionLi.find('input[type="checkbox"]').prop('checked', notAdded);

        // use notAdded instead of true (to detect if the option is selected or not)
        $optionLi.prop('selected', notAdded);

        return notAdded;
      }

      /**
       * Set text value to input
       */

    }, {
      key: "_setValueToInput",
      value: function _setValueToInput() {
        var values = [];
        var options = this.$el.find('option');

        options.each(function (el) {
          if ($(el).prop('selected')) {
            var text = $(el).text();
            values.push(text);
          }
        });

        if (!values.length) {
          var firstDisabled = this.$el.find('option:disabled').eq(0);
          if (firstDisabled.length && firstDisabled[0].value === '') {
            values.push(firstDisabled.text());
          }
        }

        this.input.value = values.join(', ');
      }

      /**
       * Set selected state of dropdown to match actual select element
       */

    }, {
      key: "_setSelectedStates",
      value: function _setSelectedStates() {
        this._keysSelected = {};

        for (var key in this._valueDict) {
          var option = this._valueDict[key];
          var optionIsSelected = $(option.el).prop('selected');
          $(option.optionEl).find('input[type="checkbox"]').prop('checked', optionIsSelected);
          if (optionIsSelected) {
            this._activateOption($(this.dropdownOptions), $(option.optionEl));
            this._keysSelected[key] = true;
          } else {
            $(option.optionEl).removeClass('selected');
          }
        }
      }

      /**
       * Make option as selected and scroll to selected position
       * @param {jQuery} collection  Select options jQuery element
       * @param {Element} newOption  element of the new option
       */

    }, {
      key: "_activateOption",
      value: function _activateOption(collection, newOption) {
        if (newOption) {
          if (!this.isMultiple) {
            collection.find('li.selected').removeClass('selected');
          }
          var option = $(newOption);
          option.addClass('selected');
        }
      }

      /**
       * Get Selected Values
       * @return {Array}  Array of selected values
       */

    }, {
      key: "getSelectedValues",
      value: function getSelectedValues() {
        var selectedValues = [];
        for (var key in this._keysSelected) {
          selectedValues.push(this._valueDict[key].el.value);
        }
        return selectedValues;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(FormSelect.__proto__ || Object.getPrototypeOf(FormSelect), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_FormSelect;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return FormSelect;
  }(Component);

  M.FormSelect = FormSelect;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(FormSelect, 'formSelect', 'M_FormSelect');
  }
})(cash);
;(function ($, anim) {
  'use strict';

  var _defaults = {};

  /**
   * @class
   *
   */

  var Range = function (_Component21) {
    _inherits(Range, _Component21);

    /**
     * Construct Range instance
     * @constructor
     * @param {Element} el
     * @param {Object} options
     */
    function Range(el, options) {
      _classCallCheck(this, Range);

      var _this72 = _possibleConstructorReturn(this, (Range.__proto__ || Object.getPrototypeOf(Range)).call(this, Range, el, options));

      _this72.el.M_Range = _this72;

      /**
       * Options for the range
       * @member Range#options
       */
      _this72.options = $.extend({}, Range.defaults, options);

      _this72._mousedown = false;

      // Setup
      _this72._setupThumb();

      _this72._setupEventHandlers();
      return _this72;
    }

    _createClass(Range, [{
      key: "destroy",


      /**
       * Teardown component
       */
      value: function destroy() {
        this._removeEventHandlers();
        this._removeThumb();
        this.el.M_Range = undefined;
      }

      /**
       * Setup Event Handlers
       */

    }, {
      key: "_setupEventHandlers",
      value: function _setupEventHandlers() {
        this._handleRangeChangeBound = this._handleRangeChange.bind(this);
        this._handleRangeMousedownTouchstartBound = this._handleRangeMousedownTouchstart.bind(this);
        this._handleRangeInputMousemoveTouchmoveBound = this._handleRangeInputMousemoveTouchmove.bind(this);
        this._handleRangeMouseupTouchendBound = this._handleRangeMouseupTouchend.bind(this);
        this._handleRangeBlurMouseoutTouchleaveBound = this._handleRangeBlurMouseoutTouchleave.bind(this);

        this.el.addEventListener('change', this._handleRangeChangeBound);

        this.el.addEventListener('mousedown', this._handleRangeMousedownTouchstartBound);
        this.el.addEventListener('touchstart', this._handleRangeMousedownTouchstartBound);

        this.el.addEventListener('input', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.addEventListener('mousemove', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.addEventListener('touchmove', this._handleRangeInputMousemoveTouchmoveBound);

        this.el.addEventListener('mouseup', this._handleRangeMouseupTouchendBound);
        this.el.addEventListener('touchend', this._handleRangeMouseupTouchendBound);

        this.el.addEventListener('blur', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.addEventListener('mouseout', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.addEventListener('touchleave', this._handleRangeBlurMouseoutTouchleaveBound);
      }

      /**
       * Remove Event Handlers
       */

    }, {
      key: "_removeEventHandlers",
      value: function _removeEventHandlers() {
        this.el.removeEventListener('change', this._handleRangeChangeBound);

        this.el.removeEventListener('mousedown', this._handleRangeMousedownTouchstartBound);
        this.el.removeEventListener('touchstart', this._handleRangeMousedownTouchstartBound);

        this.el.removeEventListener('input', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.removeEventListener('mousemove', this._handleRangeInputMousemoveTouchmoveBound);
        this.el.removeEventListener('touchmove', this._handleRangeInputMousemoveTouchmoveBound);

        this.el.removeEventListener('mouseup', this._handleRangeMouseupTouchendBound);
        this.el.removeEventListener('touchend', this._handleRangeMouseupTouchendBound);

        this.el.removeEventListener('blur', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.removeEventListener('mouseout', this._handleRangeBlurMouseoutTouchleaveBound);
        this.el.removeEventListener('touchleave', this._handleRangeBlurMouseoutTouchleaveBound);
      }

      /**
       * Handle Range Change
       * @param {Event} e
       */

    }, {
      key: "_handleRangeChange",
      value: function _handleRangeChange() {
        $(this.value).html(this.$el.val());

        if (!$(this.thumb).hasClass('active')) {
          this._showRangeBubble();
        }

        var offsetLeft = this._calcRangeOffset();
        $(this.thumb).addClass('active').css('left', offsetLeft + 'px');
      }

      /**
       * Handle Range Mousedown and Touchstart
       * @param {Event} e
       */

    }, {
      key: "_handleRangeMousedownTouchstart",
      value: function _handleRangeMousedownTouchstart(e) {
        // Set indicator value
        $(this.value).html(this.$el.val());

        this._mousedown = true;
        this.$el.addClass('active');

        if (!$(this.thumb).hasClass('active')) {
          this._showRangeBubble();
        }

        if (e.type !== 'input') {
          var offsetLeft = this._calcRangeOffset();
          $(this.thumb).addClass('active').css('left', offsetLeft + 'px');
        }
      }

      /**
       * Handle Range Input, Mousemove and Touchmove
       */

    }, {
      key: "_handleRangeInputMousemoveTouchmove",
      value: function _handleRangeInputMousemoveTouchmove() {
        if (this._mousedown) {
          if (!$(this.thumb).hasClass('active')) {
            this._showRangeBubble();
          }

          var offsetLeft = this._calcRangeOffset();
          $(this.thumb).addClass('active').css('left', offsetLeft + 'px');
          $(this.value).html(this.$el.val());
        }
      }

      /**
       * Handle Range Mouseup and Touchend
       */

    }, {
      key: "_handleRangeMouseupTouchend",
      value: function _handleRangeMouseupTouchend() {
        this._mousedown = false;
        this.$el.removeClass('active');
      }

      /**
       * Handle Range Blur, Mouseout and Touchleave
       */

    }, {
      key: "_handleRangeBlurMouseoutTouchleave",
      value: function _handleRangeBlurMouseoutTouchleave() {
        if (!this._mousedown) {
          var paddingLeft = parseInt(this.$el.css('padding-left'));
          var marginLeft = 7 + paddingLeft + 'px';

          if ($(this.thumb).hasClass('active')) {
            anim.remove(this.thumb);
            anim({
              targets: this.thumb,
              height: 0,
              width: 0,
              top: 10,
              easing: 'easeOutQuad',
              marginLeft: marginLeft,
              duration: 100
            });
          }
          $(this.thumb).removeClass('active');
        }
      }

      /**
       * Setup dropdown
       */

    }, {
      key: "_setupThumb",
      value: function _setupThumb() {
        this.thumb = document.createElement('span');
        this.value = document.createElement('span');
        $(this.thumb).addClass('thumb');
        $(this.value).addClass('value');
        $(this.thumb).append(this.value);
        this.$el.after(this.thumb);
      }

      /**
       * Remove dropdown
       */

    }, {
      key: "_removeThumb",
      value: function _removeThumb() {
        $(this.thumb).remove();
      }

      /**
       * morph thumb into bubble
       */

    }, {
      key: "_showRangeBubble",
      value: function _showRangeBubble() {
        var paddingLeft = parseInt($(this.thumb).parent().css('padding-left'));
        var marginLeft = -7 + paddingLeft + 'px'; // TODO: fix magic number?
        anim.remove(this.thumb);
        anim({
          targets: this.thumb,
          height: 30,
          width: 30,
          top: -30,
          marginLeft: marginLeft,
          duration: 300,
          easing: 'easeOutQuint'
        });
      }

      /**
       * Calculate the offset of the thumb
       * @return {Number}  offset in pixels
       */

    }, {
      key: "_calcRangeOffset",
      value: function _calcRangeOffset() {
        var width = this.$el.width() - 15;
        var max = parseFloat(this.$el.attr('max')) || 100; // Range default max
        var min = parseFloat(this.$el.attr('min')) || 0; // Range default min
        var percent = (parseFloat(this.$el.val()) - min) / (max - min);
        return percent * width;
      }
    }], [{
      key: "init",
      value: function init(els, options) {
        return _get(Range.__proto__ || Object.getPrototypeOf(Range), "init", this).call(this, this, els, options);
      }

      /**
       * Get Instance
       */

    }, {
      key: "getInstance",
      value: function getInstance(el) {
        var domElem = !!el.jquery ? el[0] : el;
        return domElem.M_Range;
      }
    }, {
      key: "defaults",
      get: function () {
        return _defaults;
      }
    }]);

    return Range;
  }(Component);

  M.Range = Range;

  if (M.jQueryLoaded) {
    M.initializeJqueryWrapper(Range, 'range', 'M_Range');
  }

  Range.init($('input[type=range]'));
})(cash, M.anime);

/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2), __webpack_require__(2), __webpack_require__(7)))

/***/ }),
/* 4 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* WEBPACK VAR INJECTION */(function($) {/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, "a", function() { return RTCClient; });
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(1);
/* harmony import */ var agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }



console.log("agora sdk version: " + agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.VERSION + " compatible: " + agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.checkSystemRequirements());

var RTCClient =
/*#__PURE__*/
function () {
  function RTCClient() {
    _classCallCheck(this, RTCClient);

    this._client = null;
    this._joined = false;
    this._published = false;
    this._localStream = null;
    this._remoteStreams = [];
    this._params = {};
    this._showProfile = false;
  }

  _createClass(RTCClient, [{
    key: "handleEvents",
    value: function handleEvents() {
      var _this = this;

      this._client.on("error", function (err) {
        console.log(err);
      }); // Occurs when the peer user leaves the channel; for example, the peer user calls Client.leave.


      this._client.on("peer-leave", function (evt) {
        var id = evt.uid;

        if (id != _this._params.uid) {
          Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* removeView */ "f"])(id);
        }

        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("peer leave");
        console.log('peer-leave', id);
      }); // Occurs when the local stream is _published.


      this._client.on("stream-published", function (evt) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("stream published success");
        console.log("stream-published");
      }); // Occurs when the remote stream is added.


      this._client.on("stream-added", function (evt) {
        var remoteStream = evt.stream;
        var id = remoteStream.getId();
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("stream-added uid: " + id);

        if (id !== _this._params.uid) {
          _this._client.subscribe(remoteStream, function (err) {
            console.log("stream subscribe failed", err);
          });
        }

        console.log('stream-added remote-uid: ', id);
      }); // Occurs when a user subscribes to a remote stream.


      this._client.on("stream-subscribed", function (evt) {
        var remoteStream = evt.stream;
        var id = remoteStream.getId();

        _this._remoteStreams.push(remoteStream);

        Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* addView */ "b"])(id, _this._showProfile);
        remoteStream.play("remote_video_" + id, {
          fit: "cover"
        });
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info('stream-subscribed remote-uid: ' + id);
        console.log('stream-subscribed remote-uid: ', id);
      }); // Occurs when the remote stream is removed; for example, a peer user calls Client.unpublish.


      this._client.on("stream-removed", function (evt) {
        var remoteStream = evt.stream;
        var id = remoteStream.getId();
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("stream-removed uid: " + id);
        remoteStream.stop();
        _this._remoteStreams = _this._remoteStreams.filter(function (stream) {
          return stream.getId() !== id;
        });
        Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* removeView */ "f"])(id);
        console.log('stream-removed remote-uid: ', id);
      });

      this._client.on("onTokenPrivilegeWillExpire", function () {
        // After requesting a new token
        // this._client.renewToken(token);
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("onTokenPrivilegeWillExpire");
        console.log("onTokenPrivilegeWillExpire");
      });

      this._client.on("onTokenPrivilegeDidExpire", function () {
        // After requesting a new token
        // client.renewToken(token);
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("onTokenPrivilegeDidExpire");
        console.log("onTokenPrivilegeDidExpire");
      });
    }
  }, {
    key: "join",
    value: function join(data) {
      var _this2 = this;

      return new Promise(function (resolve, reject) {
        if (_this2._joined) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your already joined");
          return;
        }
        /**
         * A class defining the properties of the config parameter in the createClient method.
         * Note:
         *    Ensure that you do not leave mode and codec as empty.
         *    Ensure that you set these properties before calling Client.join.
         *  You could find more detail here. https://docs.agora.io/en/Video/API%20Reference/web/interfaces/agorartc.clientconfig.html
        **/


        _this2._client = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createClient({
          mode: data.mode,
          codec: data.codec
        });
        _this2._params = data; // handle AgoraRTC client event

        _this2.handleEvents(); // init client


        _this2._client.init(data.appID, function () {
          console.log("init success");
          /**
           * Joins an AgoraRTC Channel
           * This method joins an AgoraRTC channel.
           * Parameters
           * tokenOrKey: string | null
           *    Low security requirements: Pass null as the parameter value.
           *    High security requirements: Pass the string of the Token or Channel Key as the parameter value. See Use Security Keys for details.
           *  channel: string
           *    A string that provides a unique channel name for the Agora session. The length must be within 64 bytes. Supported character scopes:
           *    26 lowercase English letters a-z
           *    26 uppercase English letters A-Z
           *    10 numbers 0-9
           *    Space
           *    "!", "#", "$", "%", "&", "(", ")", "+", "-", ":", ";", "<", "=", ".", ">", "?", "@", "[", "]", "^", "_", "{", "}", "|", "~", ","
           *  uid: number | null
           *    The user ID, an integer. Ensure this ID is unique. If you set the uid to null, the server assigns one and returns it in the onSuccess callback.
           *   Note:
           *      All users in the same channel should have the same type (number) of uid.
           *      If you use a number as the user ID, it should be a 32-bit unsigned integer with a value ranging from 0 to (232-1).
          **/

          _this2._client.join(data.token ? data.token : null, data.channel, data.uid ? +data.uid : null, function (uid) {
            _this2._params.uid = uid;
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("join channel: " + data.channel + " success, uid: " + uid);
            console.log("join channel: " + data.channel + " success, uid: " + uid);
            _this2._joined = true; // start stream interval stats
            // if you don't need show stream profile you can comment this

            if (!_this2._interval) {
              _this2._interval = setInterval(function () {
                _this2._updateVideoInfo();
              }, 0);
            } // create local stream


            _this2._localStream = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createStream({
              streamID: _this2._params.uid,
              audio: true,
              video: true,
              screen: false,
              microphoneId: data.microphoneId,
              cameraId: data.cameraId
            });

            _this2._localStream.on("player-status-change", function (evt) {
              console.log("player status change", evt);
            });

            if (data.cameraResolution && data.cameraResolution != 'default') {
              // set local video resolution
              _this2._localStream.setVideoProfile(data.cameraResolution);
            } // init local stream


            _this2._localStream.init(function () {
              console.log("init local stream success"); // play stream with html element id "local_stream"

              _this2._localStream.play("local_stream", {
                fit: "cover"
              }); // run callback


              resolve();
            }, function (err) {
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("stream init failed, please open console see more detail");
              console.error("init local stream failed ", err);
            });
          }, function (err) {
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client join failed, please open console see more detail");
            console.error("client join failed", err);
          });
        }, function (err) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client init failed, please open console see more detail");
          console.error(err);
        });
      });
    }
  }, {
    key: "joinScreenSharing",
    value: function joinScreenSharing(data) {
      var _this3 = this;

      return new Promise(function (resolve, reject) {
        if (_this3._joined) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your already joined");
          return;
        }
        /**
         * A class defining the properties of the config parameter in the createClient method.
         * Note:
         *    Ensure that you do not leave mode and codec as empty.
         *    Ensure that you set these properties before calling Client.join.
         *  You could find more detail here. https://docs.agora.io/en/Video/API%20Reference/web/interfaces/agorartc.clientconfig.html
        **/


        _this3._client = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createClient({
          mode: data.mode,
          codec: data.codec
        });
        _this3._params = data; // handle AgoraRTC client event

        _this3.handleEvents(); // init client


        _this3._client.init(data.appID, function () {
          console.log("init success");
          /**
           * Joins an AgoraRTC Channel
           * This method joins an AgoraRTC channel.
           * Parameters
           * tokenOrKey: string | null
           *    Low security requirements: Pass null as the parameter value.
           *    High security requirements: Pass the string of the Token or Channel Key as the parameter value. See Use Security Keys for details.
           *  channel: string
           *    A string that provides a unique channel name for the Agora session. The length must be within 64 bytes. Supported character scopes:
           *    26 lowercase English letters a-z
           *    26 uppercase English letters A-Z
           *    10 numbers 0-9
           *    Space
           *    "!", "#", "$", "%", "&", "(", ")", "+", "-", ":", ";", "<", "=", ".", ">", "?", "@", "[", "]", "^", "_", "{", "}", "|", "~", ","
           *  uid: number | null
           *    The user ID, an integer. Ensure this ID is unique. If you set the uid to null, the server assigns one and returns it in the onSuccess callback.
           *   Note:
           *      All users in the same channel should have the same type (number) of uid.
           *      If you use a number as the user ID, it should be a 32-bit unsigned integer with a value ranging from 0 to (232-1).
          **/

          _this3._client.join(data.token ? data.token : null, data.channel, data.uid ? +data.uid : null, function (uid) {
            _this3._params.uid = uid;
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("join channel while screensharing: " + data.channel + " success, uid: " + uid);
            console.log("join channel while screensharing: " + data.channel + " success, uid: " + uid);
            _this3._joined = true; // start stream interval stats
            // if you don't need show stream profile you can comment this

            if (!_this3._interval) {
              _this3._interval = setInterval(function () {
                _this3._updateVideoInfo();
              }, 0);
            } // create local stream


            var streamSpec = {
              streamID: _this3._params.uid,
              audio: false,
              video: false,
              screen: true,
              microphoneId: data.microphoneId,
              cameraId: data.cameraId,
              screenAudio: data.screenAudio
            }; // Your firefox need use support mediaSource at least

            if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isFirefox */ "e"])()) {
              streamSpec.mediaSource = 'window';
            } else if (!Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isCompatibleChrome */ "d"])()) {
              // before chrome 72 need install chrome extensions
              // You can download screen share plugin here https://chrome.google.com/webstore/detail/agora-web-screensharing/minllpmhdgpndnkomcoccfekfegnlikg
              streamSpec.extensionId = 'minllpmhdgpndnkomcoccfekfegnlikg';
            }

            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("test");
            _this3._localStream = agora_rtc_sdk__WEBPACK_IMPORTED_MODULE_0___default.a.createStream(streamSpec); // Toast.notice("_localStream");
            // Toast.notice(_localStream);
            // set screen sharing video resolution

            if (data.screenShareResolution != 'default') {
              _this3._localStream.setScreenProfile(data.screenShareResolution);

              console.log("set screen profile", data.screenShareResolution);
            } // Occurs when sdk emit error 


            _this3._localStream.on("error", function (evt) {
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("error", JSON.stringify([evt]));
            }); // Occurs when a you stop screen sharing


            _this3._localStream.on("stopScreenSharing", function (evt) {
              _this3._localStream.stop();

              _this3._showProfile = false;
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("stop screen sharing");
            }); // init local stream


            _this3._localStream.init(function () {
              console.log("init local stream success"); // play stream with html element id "local_stream"

              _this3._localStream.play("local_stream", {
                fit: "cover"
              }); // run callback


              resolve();
            }, function (err) {
              _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("stream init failed, please open console see more detail");
              console.error("init local stream failed ", err);

              if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isFirefox */ "e"])()) {
                console.error('Failed to start screen sharing, maybe firefox not support mediaSource, please upgrade your firefox to latest version');
                return;
              }

              if (!Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* isCompatibleChrome */ "d"])()) {
                console.error('Failed to start screen sharing, maybe chrome extension was not installed properly, you can get it from https://chrome.google.com/webstore/detail/minllpmhdgpndnkomcoccfekfegnlikg');
                return;
              }
            });
          }, function (err) {
            _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client join failed, please open console see more detail");
            console.error("client join failed", err);
          });
        }, function (err) {
          _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("client init failed, please open console see more detail");
          console.error(err);
        });
      });
    }
  }, {
    key: "publish",
    value: function publish() {
      var _this4 = this;

      if (!this._client) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Please Join First");
        return;
      }

      if (this._published) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your already published");
        return;
      }

      var oldState = this._published; // publish localStream

      this._client.publish(this._localStream, function (err) {
        _this4._published = oldState;
        console.log("publish failed");
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("publish failed");
        console.error(err);
      });

      _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("publish");
      this._published = true;
    }
  }, {
    key: "unpublish",
    value: function unpublish() {
      var _this5 = this;

      if (!this._client) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Please Join First");
        return;
      }

      if (!this._published) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Your didn't publish");
        return;
      }

      var oldState = this._published;

      this._client.unpublish(this._localStream, function (err) {
        _this5._published = oldState;
        console.log("unpublish failed");
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("unpublish failed");
        console.error(err);
      });

      _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].info("unpublish");
      this._published = false;
    }
  }, {
    key: "leave",
    value: function leave() {
      var _this6 = this;

      if (!this._client) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("Please Join First!");
        return;
      }

      if (!this._joined) {
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("You are not in channel");
        return;
      } // leave channel


      this._client.leave(function () {
        // close stream
        _this6._localStream.close();

        $("#local_video_info").addClass("hide"); // stop stream

        _this6._localStream.stop();

        while (_this6._remoteStreams.length > 0) {
          var stream = _this6._remoteStreams.shift();

          var id = stream.getId();
          stream.stop();
          Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* removeView */ "f"])(id);
        }

        _this6._localStream = null;
        _this6._remoteStreams = [];
        _this6._client = null;
        console.log("client leaves channel success");
        _this6._published = false;
        _this6._joined = false;
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].notice("leave success");
      }, function (err) {
        console.log("channel leave failed");
        _common__WEBPACK_IMPORTED_MODULE_1__[/* Toast */ "a"].error("leave success");
        console.error(err);
      });
    }
  }, {
    key: "_getLostRate",
    value: function _getLostRate(lostPackets, arrivedPackets) {
      var lost = lostPackets ? +lostPackets : 0;
      var arrived = arrivedPackets ? +arrivedPackets : 0;
      if (arrived == 0) return 0;
      var result = (lost / (lost + arrived)).toFixed(2) * 100;
      return result;
    }
  }, {
    key: "_updateVideoInfo",
    value: function _updateVideoInfo() {
      var _this7 = this;

      this._localStream && this._localStream.getStats(function (stats) {
        var localStreamProfile = [['Uid: ', _this7._localStream.getId()].join(''), ['SDN access delay: ', stats.accessDelay, 'ms'].join(''), ['Video send: ', stats.videoSendFrameRate, 'fps ', stats.videoSendResolutionWidth + 'x' + stats.videoSendResolutionHeight].join('')].join('<br/>');
        $("#local_video_info")[0].innerHTML = localStreamProfile;
      });

      if (this._remoteStreams.length > 0) {
        var _iteratorNormalCompletion = true;
        var _didIteratorError = false;
        var _iteratorError = undefined;

        try {
          var _loop = function _loop() {
            var remoteStream = _step.value;
            remoteStream.getStats(function (stats) {
              var remoteStreamProfile = [['Uid: ', remoteStream.getId()].join(''), ['SDN access delay: ', stats.accessDelay, 'ms'].join(''), ['End to end delay: ', stats.endToEndDelay, 'ms'].join(''), ['Video recv: ', stats.videoReceiveFrameRate, 'fps ', stats.videoReceiveResolutionWidth + 'x' + stats.videoReceiveResolutionHeight].join('')].join('<br/>');

              if ($("#remote_video_info_" + remoteStream.getId())[0]) {
                $("#remote_video_info_" + remoteStream.getId())[0].innerHTML = remoteStreamProfile;
              }
            });
          };

          for (var _iterator = this._remoteStreams[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
            _loop();
          }
        } catch (err) {
          _didIteratorError = true;
          _iteratorError = err;
        } finally {
          try {
            if (!_iteratorNormalCompletion && _iterator["return"] != null) {
              _iterator["return"]();
            }
          } finally {
            if (_didIteratorError) {
              throw _iteratorError;
            }
          }
        }
      }
    }
  }, {
    key: "setNetworkQualityAndStreamStats",
    value: function setNetworkQualityAndStreamStats(enable) {
      this._showProfile = enable;
      this._showProfile ? $(".video-profile").removeClass("hide") : $(".video-profile").addClass("hide");
    }
  }]);

  return RTCClient;
}();


/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)))

/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

var __WEBPACK_AMD_DEFINE_RESULT__;/*!
 * UAParser.js v0.7.20
 * Lightweight JavaScript-based User-Agent string parser
 * https://github.com/faisalman/ua-parser-js
 *
 * Copyright  2012-2019 Faisal Salman <f@faisalman.com>
 * Licensed under MIT License
 */

(function (window, undefined) {

    'use strict';

    //////////////
    // Constants
    /////////////


    var LIBVERSION  = '0.7.20',
        EMPTY       = '',
        UNKNOWN     = '?',
        FUNC_TYPE   = 'function',
        UNDEF_TYPE  = 'undefined',
        OBJ_TYPE    = 'object',
        STR_TYPE    = 'string',
        MAJOR       = 'major', // deprecated
        MODEL       = 'model',
        NAME        = 'name',
        TYPE        = 'type',
        VENDOR      = 'vendor',
        VERSION     = 'version',
        ARCHITECTURE= 'architecture',
        CONSOLE     = 'console',
        MOBILE      = 'mobile',
        TABLET      = 'tablet',
        SMARTTV     = 'smarttv',
        WEARABLE    = 'wearable',
        EMBEDDED    = 'embedded';


    ///////////
    // Helper
    //////////


    var util = {
        extend : function (regexes, extensions) {
            var mergedRegexes = {};
            for (var i in regexes) {
                if (extensions[i] && extensions[i].length % 2 === 0) {
                    mergedRegexes[i] = extensions[i].concat(regexes[i]);
                } else {
                    mergedRegexes[i] = regexes[i];
                }
            }
            return mergedRegexes;
        },
        has : function (str1, str2) {
          if (typeof str1 === "string") {
            return str2.toLowerCase().indexOf(str1.toLowerCase()) !== -1;
          } else {
            return false;
          }
        },
        lowerize : function (str) {
            return str.toLowerCase();
        },
        major : function (version) {
            return typeof(version) === STR_TYPE ? version.replace(/[^\d\.]/g,'').split(".")[0] : undefined;
        },
        trim : function (str) {
          return str.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g, '');
        }
    };


    ///////////////
    // Map helper
    //////////////


    var mapper = {

        rgx : function (ua, arrays) {

            var i = 0, j, k, p, q, matches, match;

            // loop through all regexes maps
            while (i < arrays.length && !matches) {

                var regex = arrays[i],       // even sequence (0,2,4,..)
                    props = arrays[i + 1];   // odd sequence (1,3,5,..)
                j = k = 0;

                // try matching uastring with regexes
                while (j < regex.length && !matches) {

                    matches = regex[j++].exec(ua);

                    if (!!matches) {
                        for (p = 0; p < props.length; p++) {
                            match = matches[++k];
                            q = props[p];
                            // check if given property is actually array
                            if (typeof q === OBJ_TYPE && q.length > 0) {
                                if (q.length == 2) {
                                    if (typeof q[1] == FUNC_TYPE) {
                                        // assign modified match
                                        this[q[0]] = q[1].call(this, match);
                                    } else {
                                        // assign given value, ignore regex match
                                        this[q[0]] = q[1];
                                    }
                                } else if (q.length == 3) {
                                    // check whether function or regex
                                    if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {
                                        // call function (usually string mapper)
                                        this[q[0]] = match ? q[1].call(this, match, q[2]) : undefined;
                                    } else {
                                        // sanitize match using given regex
                                        this[q[0]] = match ? match.replace(q[1], q[2]) : undefined;
                                    }
                                } else if (q.length == 4) {
                                        this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : undefined;
                                }
                            } else {
                                this[q] = match ? match : undefined;
                            }
                        }
                    }
                }
                i += 2;
            }
        },

        str : function (str, map) {

            for (var i in map) {
                // check if array
                if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {
                    for (var j = 0; j < map[i].length; j++) {
                        if (util.has(map[i][j], str)) {
                            return (i === UNKNOWN) ? undefined : i;
                        }
                    }
                } else if (util.has(map[i], str)) {
                    return (i === UNKNOWN) ? undefined : i;
                }
            }
            return str;
        }
    };


    ///////////////
    // String map
    //////////////


    var maps = {

        browser : {
            oldsafari : {
                version : {
                    '1.0'   : '/8',
                    '1.2'   : '/1',
                    '1.3'   : '/3',
                    '2.0'   : '/412',
                    '2.0.2' : '/416',
                    '2.0.3' : '/417',
                    '2.0.4' : '/419',
                    '?'     : '/'
                }
            }
        },

        device : {
            amazon : {
                model : {
                    'Fire Phone' : ['SD', 'KF']
                }
            },
            sprint : {
                model : {
                    'Evo Shift 4G' : '7373KT'
                },
                vendor : {
                    'HTC'       : 'APA',
                    'Sprint'    : 'Sprint'
                }
            }
        },

        os : {
            windows : {
                version : {
                    'ME'        : '4.90',
                    'NT 3.11'   : 'NT3.51',
                    'NT 4.0'    : 'NT4.0',
                    '2000'      : 'NT 5.0',
                    'XP'        : ['NT 5.1', 'NT 5.2'],
                    'Vista'     : 'NT 6.0',
                    '7'         : 'NT 6.1',
                    '8'         : 'NT 6.2',
                    '8.1'       : 'NT 6.3',
                    '10'        : ['NT 6.4', 'NT 10.0'],
                    'RT'        : 'ARM'
                }
            }
        }
    };


    //////////////
    // Regex map
    /////////////


    var regexes = {

        browser : [[

            // Presto based
            /(opera\smini)\/([\w\.-]+)/i,                                       // Opera Mini
            /(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,                      // Opera Mobi/Tablet
            /(opera).+version\/([\w\.]+)/i,                                     // Opera > 9.80
            /(opera)[\/\s]+([\w\.]+)/i                                          // Opera < 9.80
            ], [NAME, VERSION], [

            /(opios)[\/\s]+([\w\.]+)/i                                          // Opera mini on iphone >= 8.0
            ], [[NAME, 'Opera Mini'], VERSION], [

            /\s(opr)\/([\w\.]+)/i                                               // Opera Webkit
            ], [[NAME, 'Opera'], VERSION], [

            // Mixed
            /(kindle)\/([\w\.]+)/i,                                             // Kindle
            /(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,
                                                                                // Lunascape/Maxthon/Netfront/Jasmine/Blazer

            // Trident based
            /(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,
                                                                                // Avant/IEMobile/SlimBrowser/Baidu
            /(?:ms|\()(ie)\s([\w\.]+)/i,                                        // Internet Explorer

            // Webkit/KHTML based
            /(rekonq)\/([\w\.]*)/i,                                             // Rekonq
            /(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark|qupzilla|falkon)\/([\w\.-]+)/i
                                                                                // Chromium/Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon
            ], [NAME, VERSION], [

            /(konqueror)\/([\w\.]+)/i                                           // Konqueror
            ], [[NAME, 'Konqueror'], VERSION], [

            /(trident).+rv[:\s]([\w\.]+).+like\sgecko/i                         // IE11
            ], [[NAME, 'IE'], VERSION], [

            /(edge|edgios|edga|edg)\/((\d+)?[\w\.]+)/i                          // Microsoft Edge
            ], [[NAME, 'Edge'], VERSION], [

            /(yabrowser)\/([\w\.]+)/i                                           // Yandex
            ], [[NAME, 'Yandex'], VERSION], [

            /(puffin)\/([\w\.]+)/i                                              // Puffin
            ], [[NAME, 'Puffin'], VERSION], [

            /(focus)\/([\w\.]+)/i                                               // Firefox Focus
            ], [[NAME, 'Firefox Focus'], VERSION], [

            /(opt)\/([\w\.]+)/i                                                 // Opera Touch
            ], [[NAME, 'Opera Touch'], VERSION], [

            /((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i         // UCBrowser
            ], [[NAME, 'UCBrowser'], VERSION], [

            /(comodo_dragon)\/([\w\.]+)/i                                       // Comodo Dragon
            ], [[NAME, /_/g, ' '], VERSION], [

            /(windowswechat qbcore)\/([\w\.]+)/i                                // WeChat Desktop for Windows Built-in Browser
            ], [[NAME, 'WeChat(Win) Desktop'], VERSION], [

            /(micromessenger)\/([\w\.]+)/i                                      // WeChat
            ], [[NAME, 'WeChat'], VERSION], [

            /(brave)\/([\w\.]+)/i                                              // Brave browser
            ], [[NAME, 'Brave'], VERSION], [

            /(qqbrowserlite)\/([\w\.]+)/i                                       // QQBrowserLite
            ], [NAME, VERSION], [

            /(QQ)\/([\d\.]+)/i                                                  // QQ, aka ShouQ
            ], [NAME, VERSION], [

            /m?(qqbrowser)[\/\s]?([\w\.]+)/i                                    // QQBrowser
            ], [NAME, VERSION], [

            /(BIDUBrowser)[\/\s]?([\w\.]+)/i                                    // Baidu Browser
            ], [NAME, VERSION], [

            /(2345Explorer)[\/\s]?([\w\.]+)/i                                   // 2345 Browser
            ], [NAME, VERSION], [

            /(MetaSr)[\/\s]?([\w\.]+)/i                                         // SouGouBrowser
            ], [NAME], [

            /(LBBROWSER)/i                                      // LieBao Browser
            ], [NAME], [

            /xiaomi\/miuibrowser\/([\w\.]+)/i                                   // MIUI Browser
            ], [VERSION, [NAME, 'MIUI Browser']], [

            /;fbav\/([\w\.]+);/i                                                // Facebook App for iOS & Android
            ], [VERSION, [NAME, 'Facebook']], [

            /safari\s(line)\/([\w\.]+)/i,                                       // Line App for iOS
            /android.+(line)\/([\w\.]+)\/iab/i                                  // Line App for Android
            ], [NAME, VERSION], [

            /headlesschrome(?:\/([\w\.]+)|\s)/i                                 // Chrome Headless
            ], [VERSION, [NAME, 'Chrome Headless']], [

            /\swv\).+(chrome)\/([\w\.]+)/i                                      // Chrome WebView
            ], [[NAME, /(.+)/, '$1 WebView'], VERSION], [

            /((?:oculus|samsung)browser)\/([\w\.]+)/i
            ], [[NAME, /(.+(?:g|us))(.+)/, '$1 $2'], VERSION], [                // Oculus / Samsung Browser

            /android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i        // Android Browser
            ], [VERSION, [NAME, 'Android Browser']], [

            /(sailfishbrowser)\/([\w\.]+)/i                                     // Sailfish Browser
            ], [[NAME, 'Sailfish Browser'], VERSION], [

            /(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i
                                                                                // Chrome/OmniWeb/Arora/Tizen/Nokia
            ], [NAME, VERSION], [

            /(dolfin)\/([\w\.]+)/i                                              // Dolphin
            ], [[NAME, 'Dolphin'], VERSION], [

            /((?:android.+)crmo|crios)\/([\w\.]+)/i                             // Chrome for Android/iOS
            ], [[NAME, 'Chrome'], VERSION], [

            /(coast)\/([\w\.]+)/i                                               // Opera Coast
            ], [[NAME, 'Opera Coast'], VERSION], [

            /fxios\/([\w\.-]+)/i                                                // Firefox for iOS
            ], [VERSION, [NAME, 'Firefox']], [

            /version\/([\w\.]+).+?mobile\/\w+\s(safari)/i                       // Mobile Safari
            ], [VERSION, [NAME, 'Mobile Safari']], [

            /version\/([\w\.]+).+?(mobile\s?safari|safari)/i                    // Safari & Safari Mobile
            ], [VERSION, NAME], [

            /webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i  // Google Search Appliance on iOS
            ], [[NAME, 'GSA'], VERSION], [

            /webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i                     // Safari < 3.0
            ], [NAME, [VERSION, mapper.str, maps.browser.oldsafari.version]], [

            /(webkit|khtml)\/([\w\.]+)/i
            ], [NAME, VERSION], [

            // Gecko based
            /(navigator|netscape)\/([\w\.-]+)/i                                 // Netscape
            ], [[NAME, 'Netscape'], VERSION], [
            /(swiftfox)/i,                                                      // Swiftfox
            /(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,
                                                                                // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror
            /(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,

                                                                                // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix
            /(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,                          // Mozilla

            // Other
            /(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,
                                                                                // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Sleipnir
            /(links)\s\(([\w\.]+)/i,                                            // Links
            /(gobrowser)\/?([\w\.]*)/i,                                         // GoBrowser
            /(ice\s?browser)\/v?([\w\._]+)/i,                                   // ICE Browser
            /(mosaic)[\/\s]([\w\.]+)/i                                          // Mosaic
            ], [NAME, VERSION]
        ],

        cpu : [[

            /(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i                     // AMD64
            ], [[ARCHITECTURE, 'amd64']], [

            /(ia32(?=;))/i                                                      // IA32 (quicktime)
            ], [[ARCHITECTURE, util.lowerize]], [

            /((?:i[346]|x)86)[;\)]/i                                            // IA32
            ], [[ARCHITECTURE, 'ia32']], [

            // PocketPC mistakenly identified as PowerPC
            /windows\s(ce|mobile);\sppc;/i
            ], [[ARCHITECTURE, 'arm']], [

            /((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i                           // PowerPC
            ], [[ARCHITECTURE, /ower/, '', util.lowerize]], [

            /(sun4\w)[;\)]/i                                                    // SPARC
            ], [[ARCHITECTURE, 'sparc']], [

            /((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i
                                                                                // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC
            ], [[ARCHITECTURE, util.lowerize]]
        ],

        device : [[

            /\((ipad|playbook);[\w\s\),;-]+(rim|apple)/i                        // iPad/PlayBook
            ], [MODEL, VENDOR, [TYPE, TABLET]], [

            /applecoremedia\/[\w\.]+ \((ipad)/                                  // iPad
            ], [MODEL, [VENDOR, 'Apple'], [TYPE, TABLET]], [

            /(apple\s{0,1}tv)/i                                                 // Apple TV
            ], [[MODEL, 'Apple TV'], [VENDOR, 'Apple']], [

            /(archos)\s(gamepad2?)/i,                                           // Archos
            /(hp).+(touchpad)/i,                                                // HP TouchPad
            /(hp).+(tablet)/i,                                                  // HP Tablet
            /(kindle)\/([\w\.]+)/i,                                             // Kindle
            /\s(nook)[\w\s]+build\/(\w+)/i,                                     // Nook
            /(dell)\s(strea[kpr\s\d]*[\dko])/i                                  // Dell Streak
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /(kf[A-z]+)\sbuild\/.+silk\//i                                      // Kindle Fire HD
            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [
            /(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i                         // Fire Phone
            ], [[MODEL, mapper.str, maps.device.amazon.model], [VENDOR, 'Amazon'], [TYPE, MOBILE]], [
            /android.+aft([bms])\sbuild/i                                       // Fire TV
            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, SMARTTV]], [

            /\((ip[honed|\s\w*]+);.+(apple)/i                                   // iPod/iPhone
            ], [MODEL, VENDOR, [TYPE, MOBILE]], [
            /\((ip[honed|\s\w*]+);/i                                            // iPod/iPhone
            ], [MODEL, [VENDOR, 'Apple'], [TYPE, MOBILE]], [

            /(blackberry)[\s-]?(\w+)/i,                                         // BlackBerry
            /(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,
                                                                                // BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron
            /(hp)\s([\w\s]+\w)/i,                                               // HP iPAQ
            /(asus)-?(\w+)/i                                                    // Asus
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [
            /\(bb10;\s(\w+)/i                                                   // BlackBerry 10
            ], [MODEL, [VENDOR, 'BlackBerry'], [TYPE, MOBILE]], [
                                                                                // Asus Tablets
            /android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone|p00c)/i
            ], [MODEL, [VENDOR, 'Asus'], [TYPE, TABLET]], [

            /(sony)\s(tablet\s[ps])\sbuild\//i,                                  // Sony
            /(sony)?(?:sgp.+)\sbuild\//i
            ], [[VENDOR, 'Sony'], [MODEL, 'Xperia Tablet'], [TYPE, TABLET]], [
            /android.+\s([c-g]\d{4}|so[-l]\w+)(?=\sbuild\/|\).+chrome\/(?![1-6]{0,1}\d\.))/i
            ], [MODEL, [VENDOR, 'Sony'], [TYPE, MOBILE]], [

            /\s(ouya)\s/i,                                                      // Ouya
            /(nintendo)\s([wids3u]+)/i                                          // Nintendo
            ], [VENDOR, MODEL, [TYPE, CONSOLE]], [

            /android.+;\s(shield)\sbuild/i                                      // Nvidia
            ], [MODEL, [VENDOR, 'Nvidia'], [TYPE, CONSOLE]], [

            /(playstation\s[34portablevi]+)/i                                   // Playstation
            ], [MODEL, [VENDOR, 'Sony'], [TYPE, CONSOLE]], [

            /(sprint\s(\w+))/i                                                  // Sprint Phones
            ], [[VENDOR, mapper.str, maps.device.sprint.vendor], [MODEL, mapper.str, maps.device.sprint.model], [TYPE, MOBILE]], [

            /(htc)[;_\s-]+([\w\s]+(?=\)|\sbuild)|\w+)/i,                        // HTC
            /(zte)-(\w*)/i,                                                     // ZTE
            /(alcatel|geeksphone|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i
                                                                                // Alcatel/GeeksPhone/Nexian/Panasonic/Sony
            ], [VENDOR, [MODEL, /_/g, ' '], [TYPE, MOBILE]], [

            /(nexus\s9)/i                                                       // HTC Nexus 9
            ], [MODEL, [VENDOR, 'HTC'], [TYPE, TABLET]], [

            /d\/huawei([\w\s-]+)[;\)]/i,
            /(nexus\s6p)/i                                                      // Huawei
            ], [MODEL, [VENDOR, 'Huawei'], [TYPE, MOBILE]], [

            /(microsoft);\s(lumia[\s\w]+)/i                                     // Microsoft Lumia
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /[\s\(;](xbox(?:\sone)?)[\s\);]/i                                   // Microsoft Xbox
            ], [MODEL, [VENDOR, 'Microsoft'], [TYPE, CONSOLE]], [
            /(kin\.[onetw]{3})/i                                                // Microsoft Kin
            ], [[MODEL, /\./g, ' '], [VENDOR, 'Microsoft'], [TYPE, MOBILE]], [

                                                                                // Motorola
            /\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,
            /mot[\s-]?(\w*)/i,
            /(XT\d{3,4}) build\//i,
            /(nexus\s6)/i
            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, MOBILE]], [
            /android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i
            ], [MODEL, [VENDOR, 'Motorola'], [TYPE, TABLET]], [

            /hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i            // HbbTV devices
            ], [[VENDOR, util.trim], [MODEL, util.trim], [TYPE, SMARTTV]], [

            /hbbtv.+maple;(\d+)/i
            ], [[MODEL, /^/, 'SmartTV'], [VENDOR, 'Samsung'], [TYPE, SMARTTV]], [

            /\(dtv[\);].+(aquos)/i                                              // Sharp
            ], [MODEL, [VENDOR, 'Sharp'], [TYPE, SMARTTV]], [

            /android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,
            /((SM-T\w+))/i
            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, TABLET]], [                  // Samsung
            /smart-tv.+(samsung)/i
            ], [VENDOR, [TYPE, SMARTTV], MODEL], [
            /((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,
            /(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,
            /sec-((sgh\w+))/i
            ], [[VENDOR, 'Samsung'], MODEL, [TYPE, MOBILE]], [

            /sie-(\w*)/i                                                        // Siemens
            ], [MODEL, [VENDOR, 'Siemens'], [TYPE, MOBILE]], [

            /(maemo|nokia).*(n900|lumia\s\d+)/i,                                // Nokia
            /(nokia)[\s_-]?([\w-]*)/i
            ], [[VENDOR, 'Nokia'], MODEL, [TYPE, MOBILE]], [

            /android[x\d\.\s;]+\s([ab][1-7]\-?[0178a]\d\d?)/i                   // Acer
            ], [MODEL, [VENDOR, 'Acer'], [TYPE, TABLET]], [

            /android.+([vl]k\-?\d{3})\s+build/i                                 // LG Tablet
            ], [MODEL, [VENDOR, 'LG'], [TYPE, TABLET]], [
            /android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i                     // LG Tablet
            ], [[VENDOR, 'LG'], MODEL, [TYPE, TABLET]], [
            /(lg) netcast\.tv/i                                                 // LG SmartTV
            ], [VENDOR, MODEL, [TYPE, SMARTTV]], [
            /(nexus\s[45])/i,                                                   // LG
            /lg[e;\s\/-]+(\w*)/i,
            /android.+lg(\-?[\d\w]+)\s+build/i
            ], [MODEL, [VENDOR, 'LG'], [TYPE, MOBILE]], [

            /(lenovo)\s?(s(?:5000|6000)(?:[\w-]+)|tab(?:[\s\w]+))/i             // Lenovo tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [
            /android.+(ideatab[a-z0-9\-\s]+)/i                                  // Lenovo
            ], [MODEL, [VENDOR, 'Lenovo'], [TYPE, TABLET]], [
            /(lenovo)[_\s-]?([\w-]+)/i
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /linux;.+((jolla));/i                                               // Jolla
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /((pebble))app\/[\d\.]+\s/i                                         // Pebble
            ], [VENDOR, MODEL, [TYPE, WEARABLE]], [

            /android.+;\s(oppo)\s?([\w\s]+)\sbuild/i                            // OPPO
            ], [VENDOR, MODEL, [TYPE, MOBILE]], [

            /crkey/i                                                            // Google Chromecast
            ], [[MODEL, 'Chromecast'], [VENDOR, 'Google']], [

            /android.+;\s(glass)\s\d/i                                          // Google Glass
            ], [MODEL, [VENDOR, 'Google'], [TYPE, WEARABLE]], [

            /android.+;\s(pixel c)[\s)]/i                                       // Google Pixel C
            ], [MODEL, [VENDOR, 'Google'], [TYPE, TABLET]], [

            /android.+;\s(pixel( [23])?( xl)?)[\s)]/i                              // Google Pixel
            ], [MODEL, [VENDOR, 'Google'], [TYPE, MOBILE]], [

            /android.+;\s(\w+)\s+build\/hm\1/i,                                 // Xiaomi Hongmi 'numeric' models
            /android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,               // Xiaomi Hongmi
            /android.+(mi[\s\-_]*(?:a\d|one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,    
                                                                                // Xiaomi Mi
            /android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i       // Redmi Phones
            ], [[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, MOBILE]], [
            /android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i            // Mi Pad tablets
            ],[[MODEL, /_/g, ' '], [VENDOR, 'Xiaomi'], [TYPE, TABLET]], [
            /android.+;\s(m[1-5]\snote)\sbuild/i                                // Meizu
            ], [MODEL, [VENDOR, 'Meizu'], [TYPE, MOBILE]], [
            /(mz)-([\w-]{2,})/i
            ], [[VENDOR, 'Meizu'], MODEL, [TYPE, MOBILE]], [

            /android.+a000(1)\s+build/i,                                        // OnePlus
            /android.+oneplus\s(a\d{4})\s+build/i
            ], [MODEL, [VENDOR, 'OnePlus'], [TYPE, MOBILE]], [

            /android.+[;\/]\s*(RCT[\d\w]+)\s+build/i                            // RCA Tablets
            ], [MODEL, [VENDOR, 'RCA'], [TYPE, TABLET]], [

            /android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i                      // Dell Venue Tablets
            ], [MODEL, [VENDOR, 'Dell'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i                         // Verizon Tablet
            ], [MODEL, [VENDOR, 'Verizon'], [TYPE, TABLET]], [

            /android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i     // Barnes & Noble Tablet
            ], [[VENDOR, 'Barnes & Noble'], MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i                           // Barnes & Noble Tablet
            ], [MODEL, [VENDOR, 'NuVision'], [TYPE, TABLET]], [

            /android.+;\s(k88)\sbuild/i                                         // ZTE K Series Tablet
            ], [MODEL, [VENDOR, 'ZTE'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(gen\d{3})\s+build.*49h/i                         // Swiss GEN Mobile
            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, MOBILE]], [

            /android.+[;\/]\s*(zur\d{3})\s+build/i                              // Swiss ZUR Tablet
            ], [MODEL, [VENDOR, 'Swiss'], [TYPE, TABLET]], [

            /android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i                         // Zeki Tablets
            ], [MODEL, [VENDOR, 'Zeki'], [TYPE, TABLET]], [

            /(android).+[;\/]\s+([YR]\d{2})\s+build/i,
            /android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i        // Dragon Touch Tablet
            ], [[VENDOR, 'Dragon Touch'], MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i                            // Insignia Tablets
            ], [MODEL, [VENDOR, 'Insignia'], [TYPE, TABLET]], [

            /android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i                    // NextBook Tablets
            ], [MODEL, [VENDOR, 'NextBook'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i
            ], [[VENDOR, 'Voice'], MODEL, [TYPE, MOBILE]], [                    // Voice Xtreme Phones

            /android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i                     // LvTel Phones
            ], [[VENDOR, 'LvTel'], MODEL, [TYPE, MOBILE]], [

            /android.+;\s(PH-1)\s/i
            ], [MODEL, [VENDOR, 'Essential'], [TYPE, MOBILE]], [                // Essential PH-1

            /android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i          // Envizen Tablets
            ], [MODEL, [VENDOR, 'Envizen'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i          // Le Pan Tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i                         // MachSpeed Tablets
            ], [MODEL, [VENDOR, 'MachSpeed'], [TYPE, TABLET]], [

            /android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i                // Trinity Tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /android.+[;\/]\s*TU_(1491)\s+build/i                               // Rotor Tablets
            ], [MODEL, [VENDOR, 'Rotor'], [TYPE, TABLET]], [

            /android.+(KS(.+))\s+build/i                                        // Amazon Kindle Tablets
            ], [MODEL, [VENDOR, 'Amazon'], [TYPE, TABLET]], [

            /android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i                      // Gigaset Tablets
            ], [VENDOR, MODEL, [TYPE, TABLET]], [

            /\s(tablet|tab)[;\/]/i,                                             // Unidentifiable Tablet
            /\s(mobile)(?:[;\/]|\ssafari)/i                                     // Unidentifiable Mobile
            ], [[TYPE, util.lowerize], VENDOR, MODEL], [

            /[\s\/\(](smart-?tv)[;\)]/i                                         // SmartTV
            ], [[TYPE, SMARTTV]], [

            /(android[\w\.\s\-]{0,9});.+build/i                                 // Generic Android Device
            ], [MODEL, [VENDOR, 'Generic']]
        ],

        engine : [[

            /windows.+\sedge\/([\w\.]+)/i                                       // EdgeHTML
            ], [VERSION, [NAME, 'EdgeHTML']], [

            /webkit\/537\.36.+chrome\/(?!27)/i                                  // Blink
            ], [[NAME, 'Blink']], [

            /(presto)\/([\w\.]+)/i,                                             // Presto
            /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna)\/([\w\.]+)/i,     
                                                                                // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna
            /(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,                          // KHTML/Tasman/Links
            /(icab)[\/\s]([23]\.[\d\.]+)/i                                      // iCab
            ], [NAME, VERSION], [

            /rv\:([\w\.]{1,9}).+(gecko)/i                                       // Gecko
            ], [VERSION, NAME]
        ],

        os : [[

            // Windows based
            /microsoft\s(windows)\s(vista|xp)/i                                 // Windows (iTunes)
            ], [NAME, VERSION], [
            /(windows)\snt\s6\.2;\s(arm)/i,                                     // Windows RT
            /(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,                   // Windows Phone
            /(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i
            ], [NAME, [VERSION, mapper.str, maps.os.windows.version]], [
            /(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i
            ], [[NAME, 'Windows'], [VERSION, mapper.str, maps.os.windows.version]], [

            // Mobile/Embedded OS
            /\((bb)(10);/i                                                      // BlackBerry 10
            ], [[NAME, 'BlackBerry'], VERSION], [
            /(blackberry)\w*\/?([\w\.]*)/i,                                     // Blackberry
            /(tizen)[\/\s]([\w\.]+)/i,                                          // Tizen
            /(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|sailfish|contiki)[\/\s-]?([\w\.]*)/i
                                                                                // Android/WebOS/Palm/QNX/Bada/RIM/MeeGo/Contiki/Sailfish OS
            ], [NAME, VERSION], [
            /(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i                  // Symbian
            ], [[NAME, 'Symbian'], VERSION], [
            /\((series40);/i                                                    // Series 40
            ], [NAME], [
            /mozilla.+\(mobile;.+gecko.+firefox/i                               // Firefox OS
            ], [[NAME, 'Firefox OS'], VERSION], [

            // Console
            /(nintendo|playstation)\s([wids34portablevu]+)/i,                   // Nintendo/Playstation

            // GNU/Linux based
            /(mint)[\/\s\(]?(\w*)/i,                                            // Mint
            /(mageia|vectorlinux)[;\s]/i,                                       // Mageia/VectorLinux
            /(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,
                                                                                // Joli/Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware
                                                                                // Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus
            /(hurd|linux)\s?([\w\.]*)/i,                                        // Hurd/Linux
            /(gnu)\s?([\w\.]*)/i                                                // GNU
            ], [NAME, VERSION], [

            /(cros)\s[\w]+\s([\w\.]+\w)/i                                       // Chromium OS
            ], [[NAME, 'Chromium OS'], VERSION],[

            // Solaris
            /(sunos)\s?([\w\.\d]*)/i                                            // Solaris
            ], [[NAME, 'Solaris'], VERSION], [

            // BSD based
            /\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i                    // FreeBSD/NetBSD/OpenBSD/PC-BSD/DragonFly
            ], [NAME, VERSION],[

            /(haiku)\s(\w+)/i                                                   // Haiku
            ], [NAME, VERSION],[

            /cfnetwork\/.+darwin/i,
            /ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i             // iOS
            ], [[VERSION, /_/g, '.'], [NAME, 'iOS']], [

            /(mac\sos\sx)\s?([\w\s\.]*)/i,
            /(macintosh|mac(?=_powerpc)\s)/i                                    // Mac OS
            ], [[NAME, 'Mac OS'], [VERSION, /_/g, '.']], [

            // Other
            /((?:open)?solaris)[\/\s-]?([\w\.]*)/i,                             // Solaris
            /(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,                                // AIX
            /(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,
                                                                                // Plan9/Minix/BeOS/OS2/AmigaOS/MorphOS/RISCOS/OpenVMS/Fuchsia
            /(unix)\s?([\w\.]*)/i                                               // UNIX
            ], [NAME, VERSION]
        ]
    };


    /////////////////
    // Constructor
    ////////////////
    var UAParser = function (uastring, extensions) {

        if (typeof uastring === 'object') {
            extensions = uastring;
            uastring = undefined;
        }

        if (!(this instanceof UAParser)) {
            return new UAParser(uastring, extensions).getResult();
        }

        var ua = uastring || ((window && window.navigator && window.navigator.userAgent) ? window.navigator.userAgent : EMPTY);
        var rgxmap = extensions ? util.extend(regexes, extensions) : regexes;

        this.getBrowser = function () {
            var browser = { name: undefined, version: undefined };
            mapper.rgx.call(browser, ua, rgxmap.browser);
            browser.major = util.major(browser.version); // deprecated
            return browser;
        };
        this.getCPU = function () {
            var cpu = { architecture: undefined };
            mapper.rgx.call(cpu, ua, rgxmap.cpu);
            return cpu;
        };
        this.getDevice = function () {
            var device = { vendor: undefined, model: undefined, type: undefined };
            mapper.rgx.call(device, ua, rgxmap.device);
            return device;
        };
        this.getEngine = function () {
            var engine = { name: undefined, version: undefined };
            mapper.rgx.call(engine, ua, rgxmap.engine);
            return engine;
        };
        this.getOS = function () {
            var os = { name: undefined, version: undefined };
            mapper.rgx.call(os, ua, rgxmap.os);
            return os;
        };
        this.getResult = function () {
            return {
                ua      : this.getUA(),
                browser : this.getBrowser(),
                engine  : this.getEngine(),
                os      : this.getOS(),
                device  : this.getDevice(),
                cpu     : this.getCPU()
            };
        };
        this.getUA = function () {
            return ua;
        };
        this.setUA = function (uastring) {
            ua = uastring;
            return this;
        };
        return this;
    };

    UAParser.VERSION = LIBVERSION;
    UAParser.BROWSER = {
        NAME    : NAME,
        MAJOR   : MAJOR, // deprecated
        VERSION : VERSION
    };
    UAParser.CPU = {
        ARCHITECTURE : ARCHITECTURE
    };
    UAParser.DEVICE = {
        MODEL   : MODEL,
        VENDOR  : VENDOR,
        TYPE    : TYPE,
        CONSOLE : CONSOLE,
        MOBILE  : MOBILE,
        SMARTTV : SMARTTV,
        TABLET  : TABLET,
        WEARABLE: WEARABLE,
        EMBEDDED: EMBEDDED
    };
    UAParser.ENGINE = {
        NAME    : NAME,
        VERSION : VERSION
    };
    UAParser.OS = {
        NAME    : NAME,
        VERSION : VERSION
    };

    ///////////
    // Export
    //////////


    // check js environment
    if (typeof(exports) !== UNDEF_TYPE) {
        // nodejs env
        if (typeof module !== UNDEF_TYPE && module.exports) {
            exports = module.exports = UAParser;
        }
        exports.UAParser = UAParser;
    } else {
        // requirejs env (optional)
        if (true) {
            !(__WEBPACK_AMD_DEFINE_RESULT__ = (function () {
                return UAParser;
            }).call(exports, __webpack_require__, exports, module),
				__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));
        } else {}
    }

    // jQuery/Zepto specific (optional)
    // Note:
    //   In AMD env the global scope should be kept clean, but jQuery is an exception.
    //   jQuery always exports to global scope, unless jQuery.noConflict(true) is used,
    //   and we should catch that.
    var $ = window && (window.jQuery || window.Zepto);
    if (typeof $ !== UNDEF_TYPE && !$.ua) {
        var parser = new UAParser();
        $.ua = parser.getResult();
        $.ua.get = function () {
            return parser.getUA();
        };
        $.ua.set = function (uastring) {
            parser.setUA(uastring);
            var result = parser.getResult();
            for (var prop in result) {
                $.ua[prop] = result[prop];
            }
        };
    }

})(typeof window === 'object' ? window : this);


/***/ }),
/* 6 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
__webpack_require__.r(__webpack_exports__);
/* WEBPACK VAR INJECTION */(function($) {/* harmony import */ var _rtc_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(4);
/* harmony import */ var _common__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(0);
/* harmony import */ var _assets_style_scss__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(8);
/* harmony import */ var _assets_style_scss__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_assets_style_scss__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(3);
/* harmony import */ var materialize_css__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(materialize_css__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _searchParam__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(9);
function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }

function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }

function _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }






var screenAudio = true;
$(function () {
  Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* getDevices */ "c"])(function (devices) {
    devices.audios.forEach(function (audio) {
      $('<option/>', {
        value: audio.value,
        text: audio.name
      }).appendTo("#microphoneId");
    });
    devices.videos.forEach(function (video) {
      $('<option/>', {
        value: video.value,
        text: video.name
      }).appendTo("#cameraId");
    });
    _common__WEBPACK_IMPORTED_MODULE_1__[/* screenShareResolutions */ "h"].forEach(function (resolution) {
      $('<option/>', {
        value: resolution.value,
        text: resolution.name
      }).appendTo("#screenShareResolution");
    });
    _common__WEBPACK_IMPORTED_MODULE_1__[/* resolutions */ "g"].forEach(function (resolution) {
      $('<option/>', {
        value: resolution.value,
        text: resolution.name
      }).appendTo("#cameraResolution");
    });
    materialize_css__WEBPACK_IMPORTED_MODULE_3__["AutoInit"]();
  });
  var fields = ['appID', 'channel'];
  var rtc = new _rtc_client__WEBPACK_IMPORTED_MODULE_0__[/* default */ "a"]();
  $(".autoplay-fallback").on("click", function (e) {
    e.preventDefault();
    var id = e.target.getAttribute("id").split("video_autoplay_")[1];
    console.log("autoplay fallback");

    if (id === 'local') {
      rtc._localStream.resume().then(function () {
        Toast.notice("local resume");
        $(e.target).addClass("hide");
      })["catch"](function (err) {
        Toast.error("resume failed, please open console see more details");
        console.error(err);
      });

      return;
    }

    var remoteStream = rtc._remoteStreams.find(function (item) {
      return "".concat(item.getId()) == id;
    });

    if (remoteStream) {
      remoteStream.resume().then(function () {
        Toast.notice("remote resume");
        $(e.target).addClass("hide");
      })["catch"](function (err) {
        Toast.error("resume failed, please open console see more details");
        console.error(err);
      });
    }
  });
  $("#show_profile").on("change", function (e) {
    e.preventDefault();
    rtc.setNetworkQualityAndStreamStats(this.checked);
  });
  $("#join").on("click", function (e) {
    e.preventDefault();
    console.log("join");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.join(params).then(function () {
        rtc.publish();
      });
    }
  });
  $("#enable_audio").on("change", function (e) {
    e.preventDefault();
    screenAudio = this.checked;
  });
  $("#joinScreenShare").on("click", function (e) {
    e.preventDefault();
    console.log("join");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.joinScreenSharing(_objectSpread({}, params, {
        screenAudio: screenAudio
      })).then(function () {
        rtc.publish();
      });
    }
  });
  $("#publish").on("click", function (e) {
    e.preventDefault();
    console.log("startLiveStreaming");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.publish();
    }
  });
  $("#unpublish").on("click", function (e) {
    e.preventDefault();
    console.log("stopLiveStreaming");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.unpublish();
    }
  });
  $("#leave").on("click", function (e) {
    e.preventDefault();
    console.log("leave");
    var params = Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* serializeFormData */ "i"])();

    if (Object(_common__WEBPACK_IMPORTED_MODULE_1__[/* validator */ "j"])(params, fields)) {
      rtc.leave();
    }
  });
});
/* WEBPACK VAR INJECTION */}.call(this, __webpack_require__(2)))

/***/ }),
/* 7 */
/***/ (function(module, exports) {

var g;

// This works in non-strict mode
g = (function() {
	return this;
})();

try {
	// This works if eval is allowed (see CSP)
	g = g || new Function("return this")();
} catch (e) {
	// This works if the window reference is available
	if (typeof window === "object") g = window;
}

// g can still be undefined, but nothing to do about it...
// We return undefined, instead of nothing here, so it's
// easier to handle this case. if(!global) { ...}

module.exports = g;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

// extracted by mini-css-extract-plugin

/***/ }),
/* 9 */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
/* unused harmony export parseFromSearch */
/* unused harmony export stringify */
/* unused harmony export setFormData */
/* unused harmony export replaceSearchString */
var parseFromSearch = function parseFromSearch() {
  var searchStr = window.location.search;
  var param = new URLSearchParams(searchStr);
  var map = {};
  var _iteratorNormalCompletion = true;
  var _didIteratorError = false;
  var _iteratorError = undefined;

  try {
    for (var _iterator = param.keys()[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {
      var key = _step.value;
      map[key] = param.get(key);
    }
  } catch (err) {
    _didIteratorError = true;
    _iteratorError = err;
  } finally {
    try {
      if (!_iteratorNormalCompletion && _iterator["return"] != null) {
        _iterator["return"]();
      }
    } finally {
      if (_didIteratorError) {
        throw _iteratorError;
      }
    }
  }

  return map;
};
var stringify = function stringify(obj) {
  var str = Object.entries(obj).reduce(function (pre, cur) {
    return pre + "".concat(cur[0], "=").concat(cur[1], "&");
  }, '?');
  return str.slice(0, -1);
};
var setFormData = function setFormData(obj) {
  Object.keys(obj).map(function (key) {
    var targetDom = document.querySelector("[name=".concat(key, "]"));

    if (targetDom) {
      targetDom.value = obj[key];
    }
  });
};
var replaceSearchString = function replaceSearchString(searchStr) {
  if (window.history.pushState) {
    var newURL = new URL(window.location.href);
    newURL.search = searchStr;
    window.history.pushState({
      path: newURL.href
    }, "", newURL.href);
  } else {
    console.warn('`history.pushState` is not supported');
  }
};

/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vLy4vc3JjL2NvbW1vbi5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvYWdvcmEtcnRjLXNkay9BZ29yYVJUQ1NESy5taW4uanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL2pxdWVyeS9kaXN0L2pxdWVyeS5qcyIsIndlYnBhY2s6Ly8vLi9ub2RlX21vZHVsZXMvbWF0ZXJpYWxpemUtY3NzL2Rpc3QvanMvbWF0ZXJpYWxpemUuanMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3J0Yy1jbGllbnQuanMiLCJ3ZWJwYWNrOi8vLy4vbm9kZV9tb2R1bGVzL3VhLXBhcnNlci1qcy9zcmMvdWEtcGFyc2VyLmpzIiwid2VicGFjazovLy8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly8vKHdlYnBhY2spL2J1aWxkaW4vZ2xvYmFsLmpzIiwid2VicGFjazovLy8uL3NyYy9hc3NldHMvc3R5bGUuc2Nzcz9jNzZiIiwid2VicGFjazovLy8uL3NyYy9zZWFyY2hQYXJhbS5qcyJdLCJuYW1lcyI6WyJjb25zb2xlIiwibG9nIiwiQWdvcmFSVEMiLCJWRVJTSU9OIiwicmVzb2x1dGlvbnMiLCJuYW1lIiwidmFsdWUiLCJzY3JlZW5TaGFyZVJlc29sdXRpb25zIiwicGFyc2VyIiwiVUFQYXJzZXIiLCJ1c2VyQWdlbnRJbmZvIiwiZ2V0UmVzdWx0IiwiaXNTYWZhcmkiLCJicm93c2VyIiwiaXNDb21wYXRpYmxlQ2hyb21lIiwibWFqb3IiLCJpc0ZpcmVmb3giLCJUb2FzdGlmeSIsIm9wdGlvbnMiLCJNIiwiaHRtbCIsInRleHQiLCJjbGFzc2VzIiwiVG9hc3QiLCJpbmZvIiwibXNnIiwibm90aWNlIiwiZXJyb3IiLCJ2YWxpZGF0b3IiLCJmb3JtRGF0YSIsImZpZWxkcyIsImtleXMiLCJPYmplY3QiLCJrZXkiLCJpbmRleE9mIiwic2VyaWFsaXplRm9ybURhdGEiLCIkIiwic2VyaWFsaXplQXJyYXkiLCJvYmoiLCJpdGVtIiwidmFsIiwidWlkIiwidW5kZWZpbmVkIiwiTnVtYmVyIiwiaXNOYU4iLCJhZGRWaWV3IiwiaWQiLCJzaG93IiwiYXBwZW5kVG8iLCJyZW1vdmVWaWV3IiwicmVtb3ZlIiwiZ2V0RGV2aWNlcyIsIm5leHQiLCJpdGVtcyIsImZpbHRlciIsImtpbmQiLCJtYXAiLCJsYWJlbCIsImRldmljZUlkIiwidmlkZW9zIiwiYXVkaW9zIiwiaSIsImxlbmd0aCIsInB1c2giLCJjaGVja1N5c3RlbVJlcXVpcmVtZW50cyIsIlJUQ0NsaWVudCIsIl9jbGllbnQiLCJfam9pbmVkIiwiX3B1Ymxpc2hlZCIsIl9sb2NhbFN0cmVhbSIsIl9yZW1vdGVTdHJlYW1zIiwiX3BhcmFtcyIsIl9zaG93UHJvZmlsZSIsIm9uIiwiZXJyIiwiZXZ0IiwicmVtb3RlU3RyZWFtIiwic3RyZWFtIiwiZ2V0SWQiLCJzdWJzY3JpYmUiLCJwbGF5IiwiZml0Iiwic3RvcCIsImRhdGEiLCJQcm9taXNlIiwicmVzb2x2ZSIsInJlamVjdCIsImNyZWF0ZUNsaWVudCIsIm1vZGUiLCJjb2RlYyIsImhhbmRsZUV2ZW50cyIsImluaXQiLCJhcHBJRCIsImpvaW4iLCJ0b2tlbiIsImNoYW5uZWwiLCJfaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIl91cGRhdGVWaWRlb0luZm8iLCJjcmVhdGVTdHJlYW0iLCJzdHJlYW1JRCIsImF1ZGlvIiwidmlkZW8iLCJzY3JlZW4iLCJtaWNyb3Bob25lSWQiLCJjYW1lcmFJZCIsImNhbWVyYVJlc29sdXRpb24iLCJzZXRWaWRlb1Byb2ZpbGUiLCJzdHJlYW1TcGVjIiwic2NyZWVuQXVkaW8iLCJtZWRpYVNvdXJjZSIsImV4dGVuc2lvbklkIiwic2NyZWVuU2hhcmVSZXNvbHV0aW9uIiwic2V0U2NyZWVuUHJvZmlsZSIsIkpTT04iLCJzdHJpbmdpZnkiLCJvbGRTdGF0ZSIsInB1Ymxpc2giLCJ1bnB1Ymxpc2giLCJsZWF2ZSIsImNsb3NlIiwiYWRkQ2xhc3MiLCJzaGlmdCIsImxvc3RQYWNrZXRzIiwiYXJyaXZlZFBhY2tldHMiLCJsb3N0IiwiYXJyaXZlZCIsInJlc3VsdCIsInRvRml4ZWQiLCJnZXRTdGF0cyIsInN0YXRzIiwibG9jYWxTdHJlYW1Qcm9maWxlIiwiYWNjZXNzRGVsYXkiLCJ2aWRlb1NlbmRGcmFtZVJhdGUiLCJ2aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGgiLCJ2aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0IiwiaW5uZXJIVE1MIiwicmVtb3RlU3RyZWFtUHJvZmlsZSIsImVuZFRvRW5kRGVsYXkiLCJ2aWRlb1JlY2VpdmVGcmFtZVJhdGUiLCJ2aWRlb1JlY2VpdmVSZXNvbHV0aW9uV2lkdGgiLCJ2aWRlb1JlY2VpdmVSZXNvbHV0aW9uSGVpZ2h0IiwiZW5hYmxlIiwicmVtb3ZlQ2xhc3MiLCJkZXZpY2VzIiwiZm9yRWFjaCIsInJlc29sdXRpb24iLCJydGMiLCJlIiwicHJldmVudERlZmF1bHQiLCJ0YXJnZXQiLCJnZXRBdHRyaWJ1dGUiLCJzcGxpdCIsInJlc3VtZSIsInRoZW4iLCJmaW5kIiwic2V0TmV0d29ya1F1YWxpdHlBbmRTdHJlYW1TdGF0cyIsImNoZWNrZWQiLCJwYXJhbXMiLCJqb2luU2NyZWVuU2hhcmluZyIsInBhcnNlRnJvbVNlYXJjaCIsInNlYXJjaFN0ciIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwicGFyYW0iLCJVUkxTZWFyY2hQYXJhbXMiLCJnZXQiLCJzdHIiLCJlbnRyaWVzIiwicmVkdWNlIiwicHJlIiwiY3VyIiwic2xpY2UiLCJzZXRGb3JtRGF0YSIsInRhcmdldERvbSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsInJlcGxhY2VTZWFyY2hTdHJpbmciLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwibmV3VVJMIiwiVVJMIiwiaHJlZiIsInBhdGgiLCJ3YXJuIl0sIm1hcHBpbmdzIjoiO1FBQUE7UUFDQTs7UUFFQTtRQUNBOztRQUVBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBO1FBQ0E7UUFDQTtRQUNBOztRQUVBO1FBQ0E7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O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLCtCQUErQjtBQUMvQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxZQUFZOztBQUVwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUYsb0JBQW9COztBQUVwQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0Esa0JBQWtCLGtDQUFrQztBQUNwRCxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsWUFBWTtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxTQUFTO0FBQ2xCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUyxZQUFZO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsVUFBVSxZQUFZO0FBQ3RCOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVMsU0FBUztBQUNsQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQSxnQkFBZ0IsSUFBSTs7QUFFcEI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0Esd0NBQXdDLElBQUk7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsYUFBYSx5QkFBeUI7QUFDdEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsU0FBUztBQUNwQjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEIsV0FBVyxTQUFTO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkIsV0FBVyxRQUFRO0FBQ25CLGFBQWEsT0FBTztBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsV0FBVyxPQUFPO0FBQ2xCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLE9BQU87QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsUUFBUSw2QkFBNkI7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFNBQVM7QUFDcEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGdCQUFnQjtBQUMzQixhQUFhLHVCQUF1QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLGVBQWU7QUFDMUIsYUFBYSxRQUFRO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFdBQVcsZUFBZTtBQUMxQixhQUFhLE9BQU87QUFDcEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBLDZEQUE2RDs7QUFFN0Q7QUFDQTtBQUNBO0FBQ0EsMENBQTBDOztBQUUxQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdFQUFnRTs7QUFFaEU7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDOztBQUU3QztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFD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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVcsZ0JBQWdCO0FBQzNCO0FBQ0EsV0FBVyxRQUFRO0FBQ25CLFdBQVcsTUFBTTtBQUNqQixXQUFXLE1BQU07QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7O0FBRUEsQ0FBQzs7OztBQUlEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTtBQUNBOztBQUVBLFFBQVEsR0FBRztBQUNYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBOzs7O0FBSUE7O0FBRUE7O0FBRUE7QUFDQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQixTQUFTO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBOztBQUVBLGNBQWMsU0FBUztBQUN2QjtBQUNBOztBQUVBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEOzs7QUFHQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7QUFDSjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFVBQVUsT0FBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsVUFBVSxPQUFPO0FBQ2pCLDBCQUEwQix3QkFBd0I7O0FBRWxEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBLDBDQUEwQztBQUMxQyxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUI7O0FBRW5CO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsY0FBYztBQUN4QjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLE1BQU07O0FBRU47QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLHdDQUF3QyxzQ0FBc0M7QUFDOUUsb0NBQW9DLHVDQUF1QztBQUMzRSxvQ0FBb0Msc0NBQXNDO0FBQzFFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1IsT0FBTztBQUNQO0FBQ0EsTUFBTTtBQUNOLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVU7O0FBRVY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFROztBQUVSO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQ0FBb0M7QUFDcEMscUNBQXFDO0FBQ3JDLG9DQUFvQztBQUNwQztBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7OztBQUtBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxDQUFDOztBQUVEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFVBQVUsU0FBUztBQUNuQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7OztBQUtBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsdUJBQXVCLGFBQWE7QUFDcEMsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7OztBQUlBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxvQkFBb0IsU0FBUztBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTtBQUNKLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0osRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7O0FBR0E7O0FBRUE7Ozs7QUFJQTtBQUNBO0FBQ0EsR0FBRztBQUNILGNBQWM7O0FBRWQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFFBQVEsZ0JBQWdCO0FBQ3hCO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQixnQkFBZ0I7QUFDakM7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTs7OztBQUlBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsRUFBRTtBQUNGOztBQUVBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxRQUFRLE9BQU87QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0Esc0JBQXNCOztBQUV0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSxPQUFPO0FBQ2Y7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUUsZ0JBQWdCO0FBQ2xCOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxXQUFXOztBQUVYOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDO0FBQzNDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG9EQUFvRDtBQUNwRDs7QUFFQTtBQUNBOztBQUVBLGNBQWMsc0JBQXNCO0FBQ3BDO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSx5QkFBeUI7QUFDekI7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLCtEQUErRDtBQUMvRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVUsY0FBYzs7QUFFeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQixtQkFBbUI7QUFDcEM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQix1Q0FBdUM7QUFDakU7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsdUJBQXVCLHVEQUF1RDtBQUM5RTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSywrQ0FBK0M7QUFDcEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0Esc0NBQXNDO0FBQ3RDO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEscUNBQXFDLGNBQWM7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVELGNBQWMscUNBQXFDO0FBQ25EOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQ0FBcUM7QUFDckM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEOztBQUVBO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7OztBQUdEOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQyxPQUFPO0FBQ2xEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCOztBQUU5QjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLE9BQU87QUFDakI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxnQkFBZ0IsZ0JBQWdCO0FBQ2hDO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsUUFBUSwrQkFBK0I7QUFDdkM7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLHVDQUF1QyxPQUFPO0FBQzlDO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHdDQUF3QyxPQUFPO0FBQy9DO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxxQ0FBcUM7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQSxTQUFTLDhCQUE4QjtBQUN2Qzs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsWUFBWSxPQUFPO0FBQ25COztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTs7QUFFRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxXQUFXO0FBQ3BCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLENBQUM7QUFDRDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7OztBQUlBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwrQ0FBK0MsY0FBYyxXQUFXO0FBQ3hFLG1CQUFtQixVQUFVO0FBQzdCO0FBQ0Esc0JBQXNCLGNBQWMsc0JBQXNCLGdCQUFnQjtBQUMxRSxnQkFBZ0IsV0FBVyxZQUFZO0FBQ3ZDLGNBQWM7QUFDZDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRixDQUFDOzs7QUFHRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksK0RBQStEO0FBQzNFO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFFBQVEsT0FBTzs7QUFFZjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBLEdBQUc7O0FBRUg7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7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OztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSixpREFBaUQsMEJBQTBCO0FBQzNFOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsVUFBVSxnQkFBZ0I7QUFDMUI7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLDJCQUEyQjtBQUMzQjtB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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7QUFLRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBOztBQUVBLGlDQUFpQztBQUNqQztBQUNBOztBQUVBLElBQUk7QUFDSjs7QUFFQSxJQUFJO0FBQ0o7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQSxXQUFXLFNBQVM7QUFDcEI7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7Ozs7O0FBS0Q7OztBQUdBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxzQ0FBc0M7QUFDdEM7QUFDQTtBQUNBOztBQUVBOztBQUVBLHlCQUF5QjtBQUN6QjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLDhDQUE4QztBQUM5QztBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDJDQUEyQztBQUMzQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsS0FBSztBQUNmO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsaURBQWlEO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsQ0FBQzs7QUFFRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWUscUNBQXFDOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBOztBQUVBOzs7O0FBSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7O0FBRUo7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUgsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSCxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGFBQWE7QUFDYixLQUFLO0FBQ0w7O0FBRUEsV0FBVztBQUNYLEdBQUc7QUFDSDtBQUNBLENBQUM7OztBQUdEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCOztBQUVoQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCOztBQUVoQixnREFBZ0Q7QUFDaEQ7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxtQkFBbUI7QUFDbkI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjs7QUFFakI7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxTQUFTO0FBQ1Q7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLGlCQUFpQjtBQUNqQixTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esa0RBQWtEOztBQUVsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLDJCQUEyQjs7QUFFM0I7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQzs7QUFFbEM7QUFDQSxzQkFBc0I7QUFDdEIsMkJBQTJCOztBQUUzQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzREFBc0Q7QUFDdEQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTs7QUFFSjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSztBQUNMOztBQUVBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOzs7QUFHQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxJQUFJO0FBQ0o7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBLElBQUk7QUFDSjtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNILEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7O0FBS0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFFBQVE7O0FBRVI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQSxtREFBbUQ7QUFDbkQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxRQUFRO0FBQ1I7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXLHVCQUF1QjtBQUNsQyxXQUFXLHlCQUF5QjtBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUTtBQUNSO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJOztBQUVKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7QUFLRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTtBQUNGO0FBQ0E7QUFDQSxFQUFFO0FBQ0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLCtCQUErQjtBQUMvQixhQUFhLHVDQUF1QztBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxNQUFNOztBQUVOO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7Ozs7QUFLRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7QUFHRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7QUFDRjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7O0FBRUg7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLElBQUk7QUFDSixHQUFHO0FBQ0g7O0FBRUE7QUFDQTs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDOzs7OztBQUtEO0FBQ0E7QUFDQTtBQUNBLEVBQUU7QUFDRjs7Ozs7QUFLQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsR0FBRztBQUNIO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLHFEQUFxRDtBQUNyRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtB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Q0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxVQUFVLFlBQVk7QUFDdEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLFVBQVUsT0FBTztBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxZQUFZLFNBQVM7QUFDckI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUssRUFBRTs7QUFFUDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxHQUFHOztBQUVIO0FBQ0Esa0JBQWtCO0FBQ2xCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRzs7QUFFSDtBQUNBLG9GQUFvRjtBQUNwRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQSxLQUFLOztBQUVMOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGVBQWU7QUFDZjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTzs7QUFFUDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxHQUFHOztBQUVIO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQSxLQUFLO0FBQ0w7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUCxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTzs7QUFFUDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNULE9BQU87QUFDUDtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7O0FBRUEsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUEsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQOztBQUVBO0FBQ0E7QUFDQSxPQUFPO0FBQ1AsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0EsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPOztBQUVQO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDs7QUFFQSxHQUFHOztBQUVIO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhLFFBQVE7QUFDckIsYUFBYSxPQUFPO0FBQ3BCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FB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S0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlOztBQUVmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlOztBQUVmO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQSxrQ0FBa0M7O0FBRWxDO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsUUFBUTtBQUN4QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QjtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsT0FBTztBQUN2QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QixnQkFBZ0IsU0FBUztBQUN6QjtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhDQUE4QztBQUM5Qzs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQyxvQkFBb0I7O0FBRXREO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUzs7QUFFVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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UztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLEtBQUs7QUFDdEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsS0FBSztBQUN0Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBLG1DQUFtQzs7QUFFbkM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw2REFBNkQ7QUFDN0Q7QUFDQTtBQUNBLGtDQUFrQztBQUNsQztBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsK0JBQStCO0FBQy9CO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsQ0FBQztBQUNEOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsa0JBQWtCO0FBQ2pDOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0M7QUFDdEM7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxTQUFTO0FBQ1QsT0FBTztBQUNQLEtBQUs7O0FBRUw7QUFDQTtBQUNBLHFCQUFxQixxQkFBcUI7QUFDMUM7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLGtDQUFrQztBQUNsQyxPQUFPO0FBQ1A7QUFDQTtBQUNBLHNDQUFzQztBQUN0QztBQUNBLFNBQVM7QUFDVCxPQUFPO0FBQ1A7QUFDQTs7QUFFQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0M7QUFDaEM7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOzs7QUFHQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFlBQVk7QUFDWjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsZ0JBQWdCO0FBQ2hCO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGdCQUFnQjtBQUNoQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7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O0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4QixpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsdUJBQXVCLHlCQUF5QjtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1gsU0FBUztBQUNUO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0EsZUFBZSxNQUFNO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQSxlQUFlLE1BQU07QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxQkFBcUIsa0JBQWtCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUcsRUFBRTtBQUNMLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkI7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsT0FBTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVCxPQUFPOztBQUVQOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QixpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0Esb0RBQW9EOztBQUVwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakIsZUFBZTtBQUNmO0FBQ0EsV0FBVzs7QUFFWDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXOztBQUVYO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNILENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7QUFDQTtBQUNBO0FBQ0E7OztBQUdBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGVBQWUsUUFBUTtBQUN2QixlQUFlLE9BQU87QUFDdEI7QUFDQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGdCQUFnQixRQUFRO0FBQ3hCLGdCQUFnQixRQUFRO0FBQ3hCLGdCQUFnQixRQUFRO0FBQ3hCO0FBQ0EsbUNBQW1DOztBQUVuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQSxPQUFPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0EsU0FBUztBQUNUOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsU0FBUzs7QUFFVDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7O0FBRVg7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQSxhQUFhOztBQUViO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVzs7QUFFWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2IsV0FBVztBQUNYLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUEsbUNBQW1DOztBQUVuQztBQUNBO0FBQ0EsMENBQTBDO0FBQzFDOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBOztBQUVBO0FBQ0E7QUFDQSxnQkFBZ0I7QUFDaEI7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSxnQ0FBZ0MsaUJBQWlCO0FBQ2pEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsMkNBQTJDLElBQUksR0FBRyxJQUFJLEdBQUcsRUFBRTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGdCQUFnQjtBQUNwRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDhCQUE4QixXQUFXO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLE9BQU87QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsNkJBQTZCLFFBQVE7QUFDckM7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBLHNCQUFzQiw0QkFBNEI7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSx1QkFBdUIsT0FBTztBQUM5QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixTQUFTO0FBQ1Q7QUFDQTtBQUNBLDRCQUE0QjtBQUM1QixTQUFTOztBQUVUO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSCwrYkFBK2I7O0FBRS9iOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzQkFBc0I7O0FBRXRCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsK0dBQStHO0FBQy9HO0FBQ0EseUJBQXlCLGlCQUFpQjtBQUMxQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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Q2hCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7O0FBRVQ7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSzs7QUFFTDtBQUNBLEdBQUc7O0FBRUg7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNELENBQUM7QUFDRDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLE9BQU87QUFDdkIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFFBQVE7QUFDeEIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQSxtQ0FBbUM7O0FBRW5DO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUVBQXlFO0FBQ3pFO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLE9BQU87QUFDUDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU87O0FBRVA7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7O0FBR0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixRQUFRO0FBQ3pCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsbUJBQW1CLFdBQVc7QUFDOUI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxXQUFXO0FBQ1g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsUUFBUTtBQUN6QixpQkFBaUIsT0FBTztBQUN4QixpQkFBaUIsT0FBTztBQUN4QixpQkFBaUIsT0FBTztBQUN4Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCLGlCQUFpQixTQUFTO0FBQzFCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsV0FBVztBQUNYO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxTQUFTO0FBQ1Q7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE9BQU87QUFDeEI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixPQUFPO0FBQ3hCLGlCQUFpQixTQUFTO0FBQzFCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsQ0FBQztBQUNEOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZUFBZSxRQUFRO0FBQ3ZCLGVBQWUsT0FBTztBQUN0QjtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsZ0JBQWdCLFNBQVM7QUFDekIsZ0JBQWdCLFNBQVM7QUFDekI7QUFDQSxtQ0FBbUM7O0FBRW5DOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlCQUFpQixNQUFNO0FBQ3ZCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsaUJBQWlCLE1BQU07QUFDdkI7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHlCQUF5QixvQkFBb0I7QUFDN0M7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7O0FBRUw7QUFDQSxHQUFHOztBQUVIOztBQUVBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRCxDQUFDO0FBQ0Q7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFFBQVE7QUFDdkIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLG1DQUFtQzs7QUFFbkM7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsOEJBQThCO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOzs7QUFHQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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QTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxpQkFBaUIsTUFBTTtBQUN2Qjs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBLGlEQUFpRDtBQUNqRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTO0FBQ1Q7O0FBRUE7QUFDQTtBQUNBLGtCQUFrQixPQUFPO0FBQ3pCOztBQUVBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQSwwREFBMEQ7QUFDMUQsd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLOztBQUVMO0FBQ0EsR0FBRzs7QUFFSDs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxD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QW1DLG1CQUFtQjtBQUN0RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTs7O0FBR0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxTQUFTOztBQUVUO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTtBQUNBOzs7QUFHQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLGNBQWMsZ0JBQWdCO0FBQzlCOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsOENBQThDLEVBQUU7QUFDaEQ7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSxzREFBc0Q7QUFDdEQ7O0FBRUEsc0JBQXNCO0FBQ3RCOztBQUVBLCtCQUErQjtBQUMvQjs7QUFFQTtBQUNBLGtDQUFrQyxNQUFNO0FBQ3hDOztBQUVBLCtDQUErQztBQUMvQzs7QUFFQSx1QkFBdUI7QUFDdkI7O0FBRUEsK0JBQStCLCtCQUErQixrREFBa0Q7QUFDaEg7QUFDQTtBQUNBOztBQUVBOztBQUVBLCtCQUErQixTQUFTO0FBQ3hDOztBQUVBO0FBQ0E7O0FBRUEsc0JBQXNCLElBQUk7QUFDMUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLGtDQUFrQztBQUNsQztBQUNBLGtDQUFrQztBQUNsQzs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxvQkFBb0I7QUFDcEI7QUFDQTtBQUNBLHdDQUF3QyxLQUFLO0FBQzdDOztBQUVBO0FBQ0E7QUFDQTtBQUNBLGlDQUFpQyxFQUFFLDZDQUE2QyxJQUFJO0FBQ3BGOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSx1QkFBdUI7QUFDdkI7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBLG9CQUFvQjtBQUNwQjtBQUNBLHNEQUFzRDtBQUN0RDtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsa0NBQWtDO0FBQ2xDO0FBQ0E7O0FBRUEseUJBQXlCO0FBQ3pCOztBQUVBLG1CQUFtQix1QkFBdUI7QUFDMUM7QUFDQSwyQkFBMkIsRUFBRTtBQUM3Qjs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxtQkFBbUIsSUFBSTtBQUN2QjtBQUNBO0FBQ0EsMENBQTBDLElBQUk7QUFDOUM7O0FBRUEsOENBQThDLFNBQVMsSUFBSSxJQUFJO0FBQy9EOztBQUVBLDBCQUEwQjtBQUMxQjs7QUFFQSxzQkFBc0I7QUFDdEI7O0FBRUEsc0RBQXNELEVBQUU7QUFDeEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQSw2QkFBNkI7QUFDN0I7O0FBRUEsa0NBQWtDLEVBQUU7QUFDcEM7QUFDQSwrQkFBK0IsR0FBRyxHQUFHLGVBQWUsSUFBSTtBQUN4RDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtCQUFrQjtBQUNsQjtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxtQkFBbUIsWUFBWTtBQUMvQjs7QUFFQTtBQUNBOztBQUVBLHVCQUF1QjtBQUN2Qjs7QUFFQTtBQUNBOztBQUVBLHVCQUF1QjtBQUN2Qjs7QUFFQSx1QkFBdUI7QUFDdkI7O0FBRUEsdUJBQXVCO0FBQ3ZCOztBQUVBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBLHlCQUF5QixHQUFHO0FBQzVCOztBQUVBO0FBQ0Esb0NBQW9DLEVBQUU7QUFDdEM7O0FBRUEsd0JBQXdCO0FBQ3hCOztBQUVBLHdCQUF3QixtQkFBbUIsSUFBSTtBQUMvQzs7QUFFQSx3QkFBd0I7QUFDeEI7O0FBRUEsd0JBQXdCO0FBQ3hCOztBQUVBLHdCQUF3QixZQUFZLEVBQUU7QUFDdEM7O0FBRUEsdUJBQXVCO0FBQ3ZCOztBQUVBLHdCQUF3QixhQUFhLEVBQUU7QUFDdkM7O0FBRUEsd0JBQXdCLGFBQWEsRUFBRTtBQUN2Qzs7QUFFQSx3QkFBd0I7QUFDeEI7O0FBRUEsMEJBQTBCLGNBQWMsRUFBRTtBQUMxQyx3QkFBd0Isb0NBQW9DLEVBQUU7QUFDOUQ7O0FBRUEsd0JBQXdCLGNBQWMsSUFBSTtBQUMxQzs7QUFFQSx3QkFBd0IscUJBQXFCLElBQUk7QUFDakQ7O0FBRUEsd0JBQXdCO0FBQ3hCOztBQUVBLHdCQUF3QjtBQUN4Qjs7QUFFQSx1QkFBdUI7QUFDdkI7O0FBRUEsd0JBQXdCO0FBQ3hCOztBQUVBLHdCQUF3QiwrQkFBK0IsSUFBSTtBQUMzRDs7QUFFQSx3QkFBd0I7QUFDeEI7O0FBRUEsd0JBQXdCLDJCQUEyQixFQUFFO0FBQ3JEOztBQUVBLHdCQUF3QjtBQUN4Qjs7QUFFQTtBQUNBOztBQUVBLDJDQUEyQyxJQUFJO0FBQy9DOztBQUVBLDZCQUE2QjtBQUM3Qiw0QkFBNEI7QUFDNUI7O0FBRUEsa0NBQWtDO0FBQ2xDOztBQUVBLGdDQUFnQyxJQUFJLEVBQUU7QUFDdEM7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLHlCQUF5QixJQUFJO0FBQzdCO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUNBQWlDO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3QkFBd0I7QUFDeEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EseUNBQXlDO0FBQ3pDO0FBQ0EsMEJBQTBCO0FBQzFCO0FBQ0EsK0JBQStCO0FBQy9COztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLG1DQUFtQztBQUNuQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSw0QkFBNEIsSUFBSTtBQUNoQzs7QUFFQTtBQUNBOztBQUVBO0FBQ0Esd0JBQXdCLElBQUksNkJBQTZCO0FBQ3pEOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0EsMkJBQTJCO0FBQzNCO0FBQ0Esd0RBQXdEO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QjtBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLDBCQUEwQjtBQUMxQjtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNCQUFzQjtBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7OztBQUdBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsWUFBWSxJQUEyQztBQUN2RCxZQUFZLG1DQUFPO0FBQ25CO0FBQ0EsYUFBYTtBQUFBLG9HQUFDO0FBQ2QsU0FBUyxNQUFNLEVBR047QUFDVDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLENBQUM7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUMvM0JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFFQSxJQUFJWixXQUFXLEdBQUcsSUFBbEI7QUFFQXpFLENBQUMsQ0FBQyxZQUFNO0FBQ05lLG9FQUFVLENBQUMsVUFBVTZGLE9BQVYsRUFBbUI7QUFDNUJBLFdBQU8sQ0FBQ3BGLE1BQVIsQ0FBZXFGLE9BQWYsQ0FBdUIsVUFBVTVDLEtBQVYsRUFBaUI7QUFDdENqRSxPQUFDLENBQUMsV0FBRCxFQUFjO0FBQ2I5QixhQUFLLEVBQUUrRixLQUFLLENBQUMvRixLQURBO0FBRWJlLFlBQUksRUFBRWdGLEtBQUssQ0FBQ2hHO0FBRkMsT0FBZCxDQUFELENBR0cyQyxRQUhILENBR1ksZUFIWjtBQUlELEtBTEQ7QUFNQWdHLFdBQU8sQ0FBQ3JGLE1BQVIsQ0FBZXNGLE9BQWYsQ0FBdUIsVUFBVTNDLEtBQVYsRUFBaUI7QUFDdENsRSxPQUFDLENBQUMsV0FBRCxFQUFjO0FBQ2I5QixhQUFLLEVBQUVnRyxLQUFLLENBQUNoRyxLQURBO0FBRWJlLFlBQUksRUFBRWlGLEtBQUssQ0FBQ2pHO0FBRkMsT0FBZCxDQUFELENBR0cyQyxRQUhILENBR1ksV0FIWjtBQUlELEtBTEQ7QUFNQXpDLDBFQUFzQixDQUFDMEksT0FBdkIsQ0FBK0IsVUFBVUMsVUFBVixFQUFzQjtBQUNuRDlHLE9BQUMsQ0FBQyxXQUFELEVBQWM7QUFDYjlCLGFBQUssRUFBRTRJLFVBQVUsQ0FBQzVJLEtBREw7QUFFYmUsWUFBSSxFQUFFNkgsVUFBVSxDQUFDN0k7QUFGSixPQUFkLENBQUQsQ0FHRzJDLFFBSEgsQ0FHWSx3QkFIWjtBQUlELEtBTEQ7QUFNQTVDLCtEQUFXLENBQUM2SSxPQUFaLENBQW9CLFVBQVVDLFVBQVYsRUFBc0I7QUFDeEM5RyxPQUFDLENBQUMsV0FBRCxFQUFjO0FBQ2I5QixhQUFLLEVBQUU0SSxVQUFVLENBQUM1SSxLQURMO0FBRWJlLFlBQUksRUFBRTZILFVBQVUsQ0FBQzdJO0FBRkosT0FBZCxDQUFELENBR0cyQyxRQUhILENBR1ksbUJBSFo7QUFJRCxLQUxEO0FBTUE3Qiw0REFBQTtBQUNELEdBMUJTLENBQVY7QUE0QkEsTUFBTVcsTUFBTSxHQUFHLENBQUMsT0FBRCxFQUFVLFNBQVYsQ0FBZjtBQUVBLE1BQUlxSCxHQUFHLEdBQUcsSUFBSWxGLDJEQUFKLEVBQVY7QUFFQTdCLEdBQUMsQ0FBQyxvQkFBRCxDQUFELENBQXdCcUMsRUFBeEIsQ0FBMkIsT0FBM0IsRUFBb0MsVUFBVTJFLENBQVYsRUFBYTtBQUMvQ0EsS0FBQyxDQUFDQyxjQUFGO0FBQ0EsUUFBTXZHLEVBQUUsR0FBR3NHLENBQUMsQ0FBQ0UsTUFBRixDQUFTQyxZQUFULENBQXNCLElBQXRCLEVBQTRCQyxLQUE1QixDQUFrQyxpQkFBbEMsRUFBcUQsQ0FBckQsQ0FBWDtBQUNBeEosV0FBTyxDQUFDQyxHQUFSLENBQVksbUJBQVo7O0FBQ0EsUUFBSTZDLEVBQUUsS0FBSyxPQUFYLEVBQW9CO0FBQ2xCcUcsU0FBRyxDQUFDOUUsWUFBSixDQUFpQm9GLE1BQWpCLEdBQTBCQyxJQUExQixDQUErQixZQUFNO0FBQ25DbkksYUFBSyxDQUFDRyxNQUFOLENBQWEsY0FBYjtBQUNBVSxTQUFDLENBQUNnSCxDQUFDLENBQUNFLE1BQUgsQ0FBRCxDQUFZN0IsUUFBWixDQUFxQixNQUFyQjtBQUNELE9BSEQsV0FHUyxVQUFDL0MsR0FBRCxFQUFTO0FBQ2hCbkQsYUFBSyxDQUFDSSxLQUFOLENBQVkscURBQVo7QUFDQTNCLGVBQU8sQ0FBQzJCLEtBQVIsQ0FBYytDLEdBQWQ7QUFDRCxPQU5EOztBQU9BO0FBQ0Q7O0FBQ0QsUUFBTUUsWUFBWSxHQUFHdUUsR0FBRyxDQUFDN0UsY0FBSixDQUFtQnFGLElBQW5CLENBQXdCLFVBQUNwSCxJQUFEO0FBQUEsYUFBVSxVQUFHQSxJQUFJLENBQUN1QyxLQUFMLEVBQUgsS0FBcUJoQyxFQUEvQjtBQUFBLEtBQXhCLENBQXJCOztBQUNBLFFBQUk4QixZQUFKLEVBQWtCO0FBQ2hCQSxrQkFBWSxDQUFDNkUsTUFBYixHQUFzQkMsSUFBdEIsQ0FBMkIsWUFBTTtBQUMvQm5JLGFBQUssQ0FBQ0csTUFBTixDQUFhLGVBQWI7QUFDQVUsU0FBQyxDQUFDZ0gsQ0FBQyxDQUFDRSxNQUFILENBQUQsQ0FBWTdCLFFBQVosQ0FBcUIsTUFBckI7QUFDRCxPQUhELFdBR1MsVUFBQy9DLEdBQUQsRUFBUztBQUNoQm5ELGFBQUssQ0FBQ0ksS0FBTixDQUFZLHFEQUFaO0FBQ0EzQixlQUFPLENBQUMyQixLQUFSLENBQWMrQyxHQUFkO0FBQ0QsT0FORDtBQU9EO0FBQ0YsR0F4QkQ7QUEwQkF0QyxHQUFDLENBQUMsZUFBRCxDQUFELENBQW1CcUMsRUFBbkIsQ0FBc0IsUUFBdEIsRUFBZ0MsVUFBVTJFLENBQVYsRUFBYTtBQUMzQ0EsS0FBQyxDQUFDQyxjQUFGO0FBQ0FGLE9BQUcsQ0FBQ1MsK0JBQUosQ0FBb0MsS0FBS0MsT0FBekM7QUFDRCxHQUhEO0FBS0F6SCxHQUFDLENBQUMsT0FBRCxDQUFELENBQVdxQyxFQUFYLENBQWMsT0FBZCxFQUF1QixVQUFVMkUsQ0FBVixFQUFhO0FBQ2xDQSxLQUFDLENBQUNDLGNBQUY7QUFDQXJKLFdBQU8sQ0FBQ0MsR0FBUixDQUFZLE1BQVo7QUFDQSxRQUFNNkosTUFBTSxHQUFHM0gseUVBQWlCLEVBQWhDOztBQUNBLFFBQUlQLGlFQUFTLENBQUNrSSxNQUFELEVBQVNoSSxNQUFULENBQWIsRUFBK0I7QUFDN0JxSCxTQUFHLENBQUN0RCxJQUFKLENBQVNpRSxNQUFULEVBQWlCSixJQUFqQixDQUFzQixZQUFNO0FBQzFCUCxXQUFHLENBQUM5QixPQUFKO0FBQ0QsT0FGRDtBQUdEO0FBQ0YsR0FURDtBQVdBakYsR0FBQyxDQUFDLGVBQUQsQ0FBRCxDQUFtQnFDLEVBQW5CLENBQXNCLFFBQXRCLEVBQWdDLFVBQVUyRSxDQUFWLEVBQWE7QUFDM0NBLEtBQUMsQ0FBQ0MsY0FBRjtBQUNBeEMsZUFBVyxHQUFHLEtBQUtnRCxPQUFuQjtBQUNELEdBSEQ7QUFJQXpILEdBQUMsQ0FBQyxrQkFBRCxDQUFELENBQXNCcUMsRUFBdEIsQ0FBeUIsT0FBekIsRUFBa0MsVUFBVTJFLENBQVYsRUFBYTtBQUM3Q0EsS0FBQyxDQUFDQyxjQUFGO0FBQ0FySixXQUFPLENBQUNDLEdBQVIsQ0FBWSxNQUFaO0FBQ0EsUUFBTTZKLE1BQU0sR0FBRzNILHlFQUFpQixFQUFoQzs7QUFDQSxRQUFJUCxpRUFBUyxDQUFDa0ksTUFBRCxFQUFTaEksTUFBVCxDQUFiLEVBQStCO0FBQzdCcUgsU0FBRyxDQUFDWSxpQkFBSixtQkFBMEJELE1BQTFCO0FBQWtDakQsbUJBQVcsRUFBWEE7QUFBbEMsVUFBZ0Q2QyxJQUFoRCxDQUFxRCxZQUFNO0FBQ3pEUCxXQUFHLENBQUM5QixPQUFKO0FBQ0QsT0FGRDtBQUdEO0FBQ0YsR0FURDtBQVdBakYsR0FBQyxDQUFDLFVBQUQsQ0FBRCxDQUFjcUMsRUFBZCxDQUFpQixPQUFqQixFQUEwQixVQUFVMkUsQ0FBVixFQUFhO0FBQ3JDQSxLQUFDLENBQUNDLGNBQUY7QUFDQXJKLFdBQU8sQ0FBQ0MsR0FBUixDQUFZLG9CQUFaO0FBQ0EsUUFBTTZKLE1BQU0sR0FBRzNILHlFQUFpQixFQUFoQzs7QUFDQSxRQUFJUCxpRUFBUyxDQUFDa0ksTUFBRCxFQUFTaEksTUFBVCxDQUFiLEVBQStCO0FBQzdCcUgsU0FBRyxDQUFDOUIsT0FBSjtBQUNEO0FBQ0YsR0FQRDtBQVNBakYsR0FBQyxDQUFDLFlBQUQsQ0FBRCxDQUFnQnFDLEVBQWhCLENBQW1CLE9BQW5CLEVBQTRCLFVBQVUyRSxDQUFWLEVBQWE7QUFDdkNBLEtBQUMsQ0FBQ0MsY0FBRjtBQUNBckosV0FBTyxDQUFDQyxHQUFSLENBQVksbUJBQVo7QUFDQSxRQUFNNkosTUFBTSxHQUFHM0gseUVBQWlCLEVBQWhDOztBQUNBLFFBQUlQLGlFQUFTLENBQUNrSSxNQUFELEVBQVNoSSxNQUFULENBQWIsRUFBK0I7QUFDN0JxSCxTQUFHLENBQUM3QixTQUFKO0FBQ0Q7QUFDRixHQVBEO0FBU0FsRixHQUFDLENBQUMsUUFBRCxDQUFELENBQVlxQyxFQUFaLENBQWUsT0FBZixFQUF3QixVQUFVMkUsQ0FBVixFQUFhO0FBQ25DQSxLQUFDLENBQUNDLGNBQUY7QUFDQXJKLFdBQU8sQ0FBQ0MsR0FBUixDQUFZLE9BQVo7QUFDQSxRQUFNNkosTUFBTSxHQUFHM0gseUVBQWlCLEVBQWhDOztBQUNBLFFBQUlQLGlFQUFTLENBQUNrSSxNQUFELEVBQVNoSSxNQUFULENBQWIsRUFBK0I7QUFDN0JxSCxTQUFHLENBQUM1QixLQUFKO0FBQ0Q7QUFDRixHQVBEO0FBUUQsQ0FwSEEsQ0FBRCxDOzs7Ozs7O0FDUkE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSw0Q0FBNEM7O0FBRTVDOzs7Ozs7O0FDbkJBLHVDOzs7Ozs7O0FDQUE7QUFBQTtBQUFBO0FBQUE7QUFBTyxJQUFNeUMsZUFBZSxHQUFHLFNBQWxCQSxlQUFrQixHQUFNO0FBQ25DLE1BQU1DLFNBQVMsR0FBR0MsTUFBTSxDQUFDQyxRQUFQLENBQWdCQyxNQUFsQztBQUNBLE1BQU1DLEtBQUssR0FBRyxJQUFJQyxlQUFKLENBQW9CTCxTQUFwQixDQUFkO0FBQ0EsTUFBSXpHLEdBQUcsR0FBRyxFQUFWO0FBSG1DO0FBQUE7QUFBQTs7QUFBQTtBQUluQyx5QkFBZ0I2RyxLQUFLLENBQUN0SSxJQUFOLEVBQWhCLDhIQUE4QjtBQUFBLFVBQXJCRSxHQUFxQjtBQUM1QnVCLFNBQUcsQ0FBQ3ZCLEdBQUQsQ0FBSCxHQUFXb0ksS0FBSyxDQUFDRSxHQUFOLENBQVV0SSxHQUFWLENBQVg7QUFDRDtBQU5rQztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBOztBQU9uQyxTQUFPdUIsR0FBUDtBQUNELENBUk07QUFVQSxJQUFNMkQsU0FBUyxHQUFHLFNBQVpBLFNBQVksQ0FBQzdFLEdBQUQsRUFBUztBQUNoQyxNQUFNa0ksR0FBRyxHQUFHeEksTUFBTSxDQUFDeUksT0FBUCxDQUFlbkksR0FBZixFQUFvQm9JLE1BQXBCLENBQTJCLFVBQUNDLEdBQUQsRUFBTUMsR0FBTixFQUFjO0FBQ25ELFdBQU9ELEdBQUcsYUFBTUMsR0FBRyxDQUFDLENBQUQsQ0FBVCxjQUFnQkEsR0FBRyxDQUFDLENBQUQsQ0FBbkIsTUFBVjtBQUNELEdBRlcsRUFFVCxHQUZTLENBQVo7QUFHQSxTQUFPSixHQUFHLENBQUNLLEtBQUosQ0FBVSxDQUFWLEVBQWEsQ0FBQyxDQUFkLENBQVA7QUFDRCxDQUxNO0FBT0EsSUFBTUMsV0FBVyxHQUFHLFNBQWRBLFdBQWMsQ0FBQ3hJLEdBQUQsRUFBUztBQUNsQ04sUUFBTSxDQUFDRCxJQUFQLENBQVlPLEdBQVosRUFBaUJrQixHQUFqQixDQUFxQixVQUFBdkIsR0FBRyxFQUFJO0FBQzFCLFFBQU04SSxTQUFTLEdBQUdDLFFBQVEsQ0FBQ0MsYUFBVCxpQkFBZ0NoSixHQUFoQyxPQUFsQjs7QUFDQSxRQUFJOEksU0FBSixFQUFlO0FBQ2JBLGVBQVMsQ0FBQ3pLLEtBQVYsR0FBa0JnQyxHQUFHLENBQUNMLEdBQUQsQ0FBckI7QUFDRDtBQUNGLEdBTEQ7QUFNRCxDQVBNO0FBU0EsSUFBTWlKLG1CQUFtQixHQUFHLFNBQXRCQSxtQkFBc0IsQ0FBQ2pCLFNBQUQsRUFBZTtBQUNoRCxNQUFJQyxNQUFNLENBQUNpQixPQUFQLENBQWVDLFNBQW5CLEVBQThCO0FBQzVCLFFBQU1DLE1BQU0sR0FBRyxJQUFJQyxHQUFKLENBQVFwQixNQUFNLENBQUNDLFFBQVAsQ0FBZ0JvQixJQUF4QixDQUFmO0FBQ0FGLFVBQU0sQ0FBQ2pCLE1BQVAsR0FBZ0JILFNBQWhCO0FBQ0FDLFVBQU0sQ0FBQ2lCLE9BQVAsQ0FBZUMsU0FBZixDQUF5QjtBQUFFSSxVQUFJLEVBQUVILE1BQU0sQ0FBQ0U7QUFBZixLQUF6QixFQUFnRCxFQUFoRCxFQUFvREYsTUFBTSxDQUFDRSxJQUEzRDtBQUNELEdBSkQsTUFJTztBQUNMdkwsV0FBTyxDQUFDeUwsSUFBUixDQUFhLHNDQUFiO0FBQ0Q7QUFDRixDQVJNLEMiLCJmaWxlIjoiaW5kZXguNGE3MDQ0Y2QzNGNmM2FlODFiMmEuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIi9hZ29yYS1kZW1vL1wiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gNik7XG4iLCJpbXBvcnQgQWdvcmFSVEMgZnJvbSAnYWdvcmEtcnRjLXNkayc7XG5jb25zb2xlLmxvZyhcIkFnb3JhUlRDIFNESyBWRVJTSU9OOiBcIiwgQWdvcmFSVEMuVkVSU0lPTik7XG5pbXBvcnQgKiBhcyBNIGZyb20gJ21hdGVyaWFsaXplLWNzcyc7XG5pbXBvcnQgVUFQYXJzZXIgZnJvbSAndWEtcGFyc2VyLWpzJztcblxuZXhwb3J0IGNvbnN0IHJlc29sdXRpb25zID0gW1xuICB7XG4gICAgbmFtZTogJ2RlZmF1bHQnLFxuICAgIHZhbHVlOiAnZGVmYXVsdCcsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiAnNDgwcCcsXG4gICAgdmFsdWU6ICc0ODBwJyxcbiAgfSxcbiAge1xuICAgIG5hbWU6ICc3MjBwJyxcbiAgICB2YWx1ZTogJzcyMHAnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJzEwODBwJyxcbiAgICB2YWx1ZTogJzEwODBwJ1xuICB9XG5dO1xuXG5leHBvcnQgY29uc3Qgc2NyZWVuU2hhcmVSZXNvbHV0aW9ucyA9IFtcbiAge1xuICAgIG5hbWU6ICdkZWZhdWx0JyxcbiAgICB2YWx1ZTogJ2RlZmF1bHQnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJzQ4MHBfMScsXG4gICAgdmFsdWU6ICc0ODBwXzEnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJzcyMHBfMScsXG4gICAgdmFsdWU6ICc3MjBwXzEnLFxuICB9LFxuICB7XG4gICAgbmFtZTogJzEwODBwXzEnLFxuICAgIHZhbHVlOiAnMTA4MHBfMSdcbiAgfVxuXTtcblxuY29uc3QgcGFyc2VyID0gbmV3IFVBUGFyc2VyKCk7XG5cbmNvbnN0IHVzZXJBZ2VudEluZm8gPSBwYXJzZXIuZ2V0UmVzdWx0KCk7XG5cbmV4cG9ydCBjb25zdCBpc1NhZmFyaSA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICB1c2VyQWdlbnRJbmZvLmJyb3dzZXIubmFtZSA9PT0gJ1NhZmFyaScgfHxcbiAgICB1c2VyQWdlbnRJbmZvLmJyb3dzZXIubmFtZSA9PT0gJ01vYmlsZSBTYWZhcmknXG4gICk7XG59O1xuXG5leHBvcnQgY29uc3QgaXNDb21wYXRpYmxlQ2hyb21lID0gKCkgPT4ge1xuICBpZiAodXNlckFnZW50SW5mby5icm93c2VyLm5hbWUgPT09ICdDaHJvbWUnKSB7XG4gICAgY29uc3QgbWFqb3IgPSArdXNlckFnZW50SW5mby5icm93c2VyLm1ham9yO1xuICAgIGlmIChtYWpvciA+PSA3MikgcmV0dXJuIHRydWU7XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzRmlyZWZveCA9ICgpID0+IHtcbiAgcmV0dXJuIHVzZXJBZ2VudEluZm8uYnJvd3Nlci5uYW1lID09PSAnRmlyZWZveCc7XG59O1xuXG5mdW5jdGlvbiBUb2FzdGlmeSAob3B0aW9ucykge1xuICBNLnRvYXN0KHtodG1sOiBvcHRpb25zLnRleHQsIGNsYXNzZXM6IG9wdGlvbnMuY2xhc3Nlc30pO1xufVxuXG5leHBvcnQgY29uc3QgVG9hc3QgPSB7XG4gIGluZm86IChtc2cpID0+IHtcbiAgICBUb2FzdGlmeSh7XG4gICAgICB0ZXh0OiBtc2csXG4gICAgICBjbGFzc2VzOiBcImluZm8tdG9hc3RcIlxuICAgIH0pXG4gIH0sXG4gIG5vdGljZTogKG1zZykgPT4ge1xuICAgIFRvYXN0aWZ5KHtcbiAgICAgIHRleHQ6IG1zZyxcbiAgICAgIGNsYXNzZXM6IFwibm90aWNlLXRvYXN0XCJcbiAgICB9KVxuICB9LFxuICBlcnJvcjogKG1zZykgPT4ge1xuICAgIFRvYXN0aWZ5KHtcbiAgICAgIHRleHQ6IG1zZyxcbiAgICAgIGNsYXNzZXM6IFwiZXJyb3ItdG9hc3RcIlxuICAgIH0pXG4gIH1cbn07XG5cbmV4cG9ydCBmdW5jdGlvbiB2YWxpZGF0b3IoZm9ybURhdGEsIGZpZWxkcykge1xuICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXMoZm9ybURhdGEpO1xuICBmb3IgKGxldCBrZXkgb2Yga2V5cykge1xuICAgIGlmIChmaWVsZHMuaW5kZXhPZihrZXkpICE9IC0xKSB7XG4gICAgICBpZiAoIWZvcm1EYXRhW2tleV0pIHtcbiAgICAgICAgVG9hc3QuZXJyb3IoXCJQbGVhc2UgRW50ZXIgXCIgKyBrZXkpO1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIHJldHVybiB0cnVlO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gc2VyaWFsaXplRm9ybURhdGEoKSB7XG4gIGNvbnN0IGZvcm1EYXRhID0gJChcIiNmb3JtXCIpLnNlcmlhbGl6ZUFycmF5KCk7XG4gIGNvbnN0IG9iaiA9IHt9XG4gIGZvciAodmFyIGl0ZW0gb2YgZm9ybURhdGEpIHtcbiAgICB2YXIga2V5ID0gaXRlbS5uYW1lO1xuICAgIHZhciB2YWwgPSBpdGVtLnZhbHVlO1xuICAgIG9ialtrZXldID0gdmFsO1xuICB9XG4gIGlmIChvYmoudWlkICE9IHVuZGVmaW5lZFxuICAgICYmICFOdW1iZXIuaXNOYU4oK29iai51aWQpKSB7XG4gICAgb2JqLnVpZCA9ICtvYmoudWlkXG4gIH1cbiAgcmV0dXJuIG9iajtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGFkZFZpZXcgKGlkLCBzaG93KSB7XG4gIGlmICghJChcIiNcIiArIGlkKVswXSkge1xuICAgICQoXCI8ZGl2Lz5cIiwge1xuICAgICAgaWQ6IFwicmVtb3RlX3ZpZGVvX3BhbmVsX1wiICsgaWQsXG4gICAgICBjbGFzczogXCJ2aWRlby12aWV3XCIsXG4gICAgfSkuYXBwZW5kVG8oXCIjdmlkZW9cIik7XG5cbiAgICAkKFwiPGRpdi8+XCIsIHtcbiAgICAgIGlkOiBcInJlbW90ZV92aWRlb19cIiArIGlkLFxuICAgICAgY2xhc3M6IFwidmlkZW8tcGxhY2Vob2xkZXJcIixcbiAgICB9KS5hcHBlbmRUbyhcIiNyZW1vdGVfdmlkZW9fcGFuZWxfXCIgKyBpZCk7XG5cbiAgICAkKFwiPGRpdi8+XCIsIHtcbiAgICAgIGlkOiBcInJlbW90ZV92aWRlb19pbmZvX1wiICsgaWQsXG4gICAgICBjbGFzczogXCJ2aWRlby1wcm9maWxlIFwiICsgKHNob3cgPyBcIlwiIDogIFwiaGlkZVwiKSxcbiAgICB9KS5hcHBlbmRUbyhcIiNyZW1vdGVfdmlkZW9fcGFuZWxfXCIgKyBpZCk7XG5cbiAgICAkKFwiPGRpdi8+XCIsIHtcbiAgICAgIGlkOiBcInZpZGVvX2F1dG9wbGF5X1wiKyBpZCxcbiAgICAgIGNsYXNzOiBcImF1dG9wbGF5LWZhbGxiYWNrIGhpZGVcIixcbiAgICB9KS5hcHBlbmRUbyhcIiNyZW1vdGVfdmlkZW9fcGFuZWxfXCIgKyBpZCk7XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZVZpZXcgKGlkKSB7XG4gIGlmICgkKFwiI3JlbW90ZV92aWRlb19wYW5lbF9cIiArIGlkKVswXSkge1xuICAgICQoXCIjcmVtb3RlX3ZpZGVvX3BhbmVsX1wiK2lkKS5yZW1vdmUoKTtcbiAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGV2aWNlcyAobmV4dCkge1xuICBBZ29yYVJUQy5nZXREZXZpY2VzKGZ1bmN0aW9uIChpdGVtcykge1xuICAgIGl0ZW1zLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIFsnYXVkaW9pbnB1dCcsICd2aWRlb2lucHV0J10uaW5kZXhPZihpdGVtLmtpbmQpICE9PSAtMVxuICAgIH0pXG4gICAgLm1hcChmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IGl0ZW0ubGFiZWwsXG4gICAgICB2YWx1ZTogaXRlbS5kZXZpY2VJZCxcbiAgICAgIGtpbmQ6IGl0ZW0ua2luZCxcbiAgICAgIH1cbiAgICB9KTtcbiAgICB2YXIgdmlkZW9zID0gW107XG4gICAgdmFyIGF1ZGlvcyA9IFtdO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBpdGVtID0gaXRlbXNbaV07XG4gICAgICBpZiAoJ3ZpZGVvaW5wdXQnID09IGl0ZW0ua2luZCkge1xuICAgICAgICB2YXIgbmFtZSA9IGl0ZW0ubGFiZWw7XG4gICAgICAgIHZhciB2YWx1ZSA9IGl0ZW0uZGV2aWNlSWQ7XG4gICAgICAgIGlmICghbmFtZSkge1xuICAgICAgICAgIG5hbWUgPSBcImNhbWVyYS1cIiArIHZpZGVvcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgdmlkZW9zLnB1c2goe1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgIGtpbmQ6IGl0ZW0ua2luZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIGlmICgnYXVkaW9pbnB1dCcgPT0gaXRlbS5raW5kKSB7XG4gICAgICAgIHZhciBuYW1lID0gaXRlbS5sYWJlbDtcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbS5kZXZpY2VJZDtcbiAgICAgICAgaWYgKCFuYW1lKSB7XG4gICAgICAgICAgbmFtZSA9IFwibWljcm9waG9uZS1cIiArIGF1ZGlvcy5sZW5ndGg7XG4gICAgICAgIH1cbiAgICAgICAgYXVkaW9zLnB1c2goe1xuICAgICAgICAgIG5hbWU6IG5hbWUsXG4gICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgIGtpbmQ6IGl0ZW0ua2luZFxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gICAgbmV4dCh7dmlkZW9zOiB2aWRlb3MsIGF1ZGlvczogYXVkaW9zfSk7XG4gIH0pO1xufSIsIi8qISBBZ29yYVJUQ3xCVUlMRCB2My4wLjAtMC1nNzQ3ZjMyMSAqL1xuIWZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIGV4cG9ydHMmJlwib2JqZWN0XCI9PXR5cGVvZiBtb2R1bGU/bW9kdWxlLmV4cG9ydHM9dCgpOlwiZnVuY3Rpb25cIj09dHlwZW9mIGRlZmluZSYmZGVmaW5lLmFtZD9kZWZpbmUoXCJBZ29yYVJUQ1wiLFtdLHQpOlwib2JqZWN0XCI9PXR5cGVvZiBleHBvcnRzP2V4cG9ydHMuQWdvcmFSVEM9dCgpOmUuQWdvcmFSVEM9dCgpfSh3aW5kb3csZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHQ9e307ZnVuY3Rpb24gbihpKXtpZih0W2ldKXJldHVybiB0W2ldLmV4cG9ydHM7dmFyIGE9dFtpXT17aTppLGw6ITEsZXhwb3J0czp7fX07cmV0dXJuIGVbaV0uY2FsbChhLmV4cG9ydHMsYSxhLmV4cG9ydHMsbiksYS5sPSEwLGEuZXhwb3J0c31yZXR1cm4gbi5tPWUsbi5jPXQsbi5kPWZ1bmN0aW9uKGUsdCxpKXtuLm8oZSx0KXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCx7ZW51bWVyYWJsZTohMCxnZXQ6aX0pfSxuLnI9ZnVuY3Rpb24oZSl7XCJ1bmRlZmluZWRcIiE9dHlwZW9mIFN5bWJvbCYmU3ltYm9sLnRvU3RyaW5nVGFnJiZPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxTeW1ib2wudG9TdHJpbmdUYWcse3ZhbHVlOlwiTW9kdWxlXCJ9KSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZSxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KX0sbi50PWZ1bmN0aW9uKGUsdCl7aWYoMSZ0JiYoZT1uKGUpKSw4JnQpcmV0dXJuIGU7aWYoNCZ0JiZcIm9iamVjdFwiPT10eXBlb2YgZSYmZSYmZS5fX2VzTW9kdWxlKXJldHVybiBlO3ZhciBpPU9iamVjdC5jcmVhdGUobnVsbCk7aWYobi5yKGkpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShpLFwiZGVmYXVsdFwiLHtlbnVtZXJhYmxlOiEwLHZhbHVlOmV9KSwyJnQmJlwic3RyaW5nXCIhPXR5cGVvZiBlKWZvcih2YXIgYSBpbiBlKW4uZChpLGEsZnVuY3Rpb24odCl7cmV0dXJuIGVbdF19LmJpbmQobnVsbCxhKSk7cmV0dXJuIGl9LG4ubj1mdW5jdGlvbihlKXt2YXIgdD1lJiZlLl9fZXNNb2R1bGU/ZnVuY3Rpb24oKXtyZXR1cm4gZS5kZWZhdWx0fTpmdW5jdGlvbigpe3JldHVybiBlfTtyZXR1cm4gbi5kKHQsXCJhXCIsdCksdH0sbi5vPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChlLHQpfSxuLnA9XCJcIixuKG4ucz0zNCl9KFtmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpO3ZhciBpPW4oOCksYT1uLm4oaSkscj1uKDkpLG89bigzKSxzPW4oMiksYz0wLGQ9XCJmcmVlXCIsdT1bXSxsPVtdLHA9MDtzZXRJbnRlcnZhbChmdW5jdGlvbigpe09iamVjdChvLmdldFBhcmFtZXRlcikoXCJVUExPQURfTE9HXCIpJiZmLmluZm8oXCJjb25zb2xlIGxvZyB1cGxvYWRcIil9LDllNSk7dmFyIGY9ZnVuY3Rpb24oKXt2YXIgZSx0LG4saSxmLG0sZz1cImh0dHBzOi8vXCIuY29uY2F0KE9iamVjdChvLmdldFBhcmFtZXRlcikoXCJMT0dfVVBMT0FEX1NFUlZFUlwiKSxcIi91cGxvYWQvdjFcIiksdj1bXCJERUJVR1wiLFwiSU5GT1wiLFwiV0FSTklOR1wiLFwiRVJST1JcIixcIk5PTkVcIl0saD0wLFM9ZnVuY3Rpb24gZSh0KXtkPVwidXBsb2FkaW5nXCIsc2V0VGltZW91dChmdW5jdGlvbigpeyFmdW5jdGlvbihlLHQsbil7dmFyIGk7QXJyYXkuaXNBcnJheShlKXx8KGU9W2VdKSxlPWUubWFwKGZ1bmN0aW9uKGUpe3JldHVybntsb2dfaXRlbV9pZDpjKyssbG9nX2xldmVsOmUubG9nX2xldmVsLHBheWxvYWRfc3RyOmUucGF5bG9hZH19KSxpPXtzZGtfdmVyc2lvbjpvLlZFUlNJT04scHJvY2Vzc19pZDpPYmplY3Qocy5hKSgpLHBheWxvYWQ6SlNPTi5zdHJpbmdpZnkoZSl9O3RyeXtPYmplY3Qoci5wb3N0KShnLGksZnVuY3Rpb24oZSl7XCJPS1wiPT09ZT90JiZ0KGUpOm4mJm4oZSl9LGZ1bmN0aW9uKGUpe24mJm4oZSl9LHt3aXRoQ3JlZGVudGlhbHM6ITB9KX1jYXRjaChlKXtuJiZuKGUpfX0odCxmdW5jdGlvbigpe3A9MCwwIT09dS5sZW5ndGg/KGw9dS5sZW5ndGg8MTA/dS5zcGxpY2UoMCx1Lmxlbmd0aCk6dS5zcGxpY2UoMCwxMCksZShsKSk6ZD1cImZyZWVcIn0sZnVuY3Rpb24oKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZShsKX0scCsrPDI/MjAwOjFlNCl9KX0sM2UzKX07dD1mdW5jdGlvbigpe2Zvcih2YXIgdD1bMF0sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKGFyZ3VtZW50c1tuXSk7ZS5hcHBseSh0aGlzLHQpfSxuPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVsxXSxuPTA7bjxhcmd1bWVudHMubGVuZ3RoO24rKyl0LnB1c2goYXJndW1lbnRzW25dKTtlLmFwcGx5KHRoaXMsdCl9LGk9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9WzJdLG49MDtuPGFyZ3VtZW50cy5sZW5ndGg7bisrKXQucHVzaChhcmd1bWVudHNbbl0pO2UuYXBwbHkodGhpcyx0KX0sZj1mdW5jdGlvbigpe2Zvcih2YXIgdD1bM10sbj0wO248YXJndW1lbnRzLmxlbmd0aDtuKyspdC5wdXNoKGFyZ3VtZW50c1tuXSk7ZS5hcHBseSh0aGlzLHQpfTt2YXIgXz17fTtyZXR1cm4gbT1mdW5jdGlvbihlKXtfW2VdfHwoaS5hcHBseSh2b2lkIDAsYXJndW1lbnRzKSxfW2VdPSEwKX0se0RFQlVHOjAsSU5GTzoxLFdBUk5JTkc6MixFUlJPUjozLE5PTkU6NCxlbmFibGVMb2dVcGxvYWQ6ZnVuY3Rpb24oKXtPYmplY3Qoby5zZXRQYXJhbWV0ZXIpKFwiVVBMT0FEX0xPR1wiLCEwKX0sZGlzYWJsZUxvZ1VwbG9hZDpmdW5jdGlvbigpe09iamVjdChvLnNldFBhcmFtZXRlcikoXCJVUExPQURfTE9HXCIsITEpfSxzZXRQcm94eVNlcnZlcjpmdW5jdGlvbihlKXtnPWU/XCJodHRwczovL1wiLmNvbmNhdChlLFwiL2xzLz9oPVwiKS5jb25jYXQoT2JqZWN0KG8uZ2V0UGFyYW1ldGVyKShcIkxPR19VUExPQURfU0VSVkVSXCIpLFwiJnA9NDQzJmQ9dXBsb2FkL3YxXCIpOlwiaHR0cHM6Ly9cIi5jb25jYXQoT2JqZWN0KG8uZ2V0UGFyYW1ldGVyKShcIkxPR19VUExPQURfU0VSVkVSXCIpLFwiL3VwbG9hZC92MVwiKX0sc2V0TG9nTGV2ZWw6ZnVuY3Rpb24oZSl7ZT40P2U9NDplPDAmJihlPTApLGg9ZX0sbG9nOmU9ZnVuY3Rpb24oKXt2YXIgZSx0PWFyZ3VtZW50c1swXSxuPWFyZ3VtZW50cztpZihuWzBdPShlPW5ldyBEYXRlKS50b1RpbWVTdHJpbmcoKS5zcGxpdChcIiBcIilbMF0rXCI6XCIrZS5nZXRNaWxsaXNlY29uZHMoKStcIiBBZ29yYS1TREsgW1wiKyh2W3RdfHxcIkRFRkFVTFRcIikrXCJdOlwiLGZ1bmN0aW9uKGUsdCl7aWYoT2JqZWN0KG8uZ2V0UGFyYW1ldGVyKShcIlVQTE9BRF9MT0dcIikpdHJ5e3Q9QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodCk7dmFyIG49XCJcIjt0LmZvckVhY2goZnVuY3Rpb24oZSl7XCJvYmplY3RcIj09PWEoKShlKSYmKGU9SlNPTi5zdHJpbmdpZnkoZSkpLG49bitlK1wiIFwifSksdS5wdXNoKHtwYXlsb2FkOm4sbG9nX2xldmVsOmV9KSxcImZyZWVcIj09PWQmJihsPXUubGVuZ3RoPDEwP3Uuc3BsaWNlKDAsdS5sZW5ndGgpOnUuc3BsaWNlKDAsMTApLFMobCkpfWNhdGNoKGUpe319KHQsbiksISh0PGgpKXN3aXRjaCh0KXtjYXNlIDA6Y2FzZSAxOmNvbnNvbGUubG9nLmFwcGx5KGNvbnNvbGUsbik7YnJlYWs7Y2FzZSAyOmNvbnNvbGUud2Fybi5hcHBseShjb25zb2xlLG4pO2JyZWFrO2Nhc2UgMzpjb25zb2xlLmVycm9yLmFwcGx5KGNvbnNvbGUsbik7YnJlYWs7ZGVmYXVsdDpyZXR1cm4gdm9pZCBjb25zb2xlLmxvZy5hcHBseShjb25zb2xlLG4pfX0sZGVidWc6dCxpbmZvOm4sd2FybmluZzppLGRlcHJlY2F0ZTptLGVycm9yOmZ9fSgpO3QuZGVmYXVsdD1mfSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpLG4uZCh0LFwiY2hlY2tWYWxpZE9iamVjdFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG99KSxuLmQodCxcImNoZWNrVmFsaWRTdHJpbmdcIixmdW5jdGlvbigpe3JldHVybiBzfSksbi5kKHQsXCJjaGVja1ZhbGlkTnVtYmVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gY30pLG4uZCh0LFwiY2hlY2tWYWxpZEZsb2F0TnVtYmVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gZH0pLG4uZCh0LFwiY2hlY2tWYWxpZEJvb2xlYW5cIixmdW5jdGlvbigpe3JldHVybiB1fSksbi5kKHQsXCJjaGVja1ZhbGlkRW51bVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSxuLmQodCxcImlzVmFsaWRTdHJpbmdcIixmdW5jdGlvbigpe3JldHVybiBsfSksbi5kKHQsXCJpc1ZhbGlkTnVtYmVyXCIsZnVuY3Rpb24oKXtyZXR1cm4gcH0pLG4uZCh0LFwiaXNWYWxpZEJvb2xlYW5cIixmdW5jdGlvbigpe3JldHVybiBtfSksbi5kKHQsXCJpc0FTQ0lJXCIsZnVuY3Rpb24oKXtyZXR1cm4gaH0pLG4uZCh0LFwiaXNJbnRlZ2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gU30pLG4uZCh0LFwiaXNOdW1iZXJcIixmdW5jdGlvbigpe3JldHVybiBffSksbi5kKHQsXCJpc1N0cmluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIEV9KSxuLmQodCxcImlzQXJyYXlcIixmdW5jdGlvbigpe3JldHVybiBJfSksbi5kKHQsXCJpc0VtcHR5XCIsZnVuY3Rpb24oKXtyZXR1cm4geX0pLG4uZCh0LFwiaXNWYWxpZFRva2VuXCIsZnVuY3Rpb24oKXtyZXR1cm4gZ30pLG4uZCh0LFwiaXNWYWxpZENoYW5uZWxOYW1lXCIsZnVuY3Rpb24oKXtyZXR1cm4gdn0pO3ZhciBpPW4oOCksYT1uLm4oaSkscj1mdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpPTA7aTxuLmxlbmd0aDtpKyspaWYoZT09PW5baV0pcmV0dXJuITA7dGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHQsXCIgY2FuIG9ubHkgYmUgc2V0IGFzIFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobikpKX0sbz1mdW5jdGlvbihlLHQpe2lmKCFlKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgcGFyYW06IFwiLmNvbmNhdCh0fHxcInBhcmFtXCIsXCIgY2Fubm90IGJlIGVtcHR5XCIpKTtpZihcIm9iamVjdFwiIT09YSgpKGUpKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdCh0fHxcIlRoaXMgcGFyYW10ZXJcIixcIiBpcyBvZiB0aGUgb2JqZWN0IHR5cGVcIikpO3JldHVybiEwfSxzPWZ1bmN0aW9uKGUsdCxuLGksYSl7aWYoeShuKSYmKG49MSksaT1pfHwyNTUseShhKSYmKGE9ITApLHkoZSkpdGhyb3cgbmV3IEVycm9yKFwiXCIuY29uY2F0KHR8fFwicGFyYW1cIixcIiBjYW5ub3QgYmUgZW1wdHlcIikpO2lmKCFsKGUsbixpLGEpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgXCIuY29uY2F0KHR8fFwic3RyaW5nIHBhcmFtXCIsXCI6IExlbmd0aCBvZiB0aGUgc3RyaW5nOiBbXCIpLmNvbmNhdChuLFwiLFwiKS5jb25jYXQoaSxcIl0uXCIpLmNvbmNhdChhP1wiIEFTQ0lJIGNoYXJhY3RlcnMgb25seS5cIjpcIlwiKSl9LGM9ZnVuY3Rpb24oZSx0LG4saSl7aWYoeShuKSYmKG49MSksaT1pfHwxZTQseShlKSl0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQodHx8XCJwYXJhbVwiLFwiIGNhbm5vdCBiZSBlbXB0eVwiKSk7aWYoIXAoZSxuLGkpKXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgXCIuY29uY2F0KHR8fFwibnVtYmVyIHBhcmFtXCIsXCI6IFRoZSB2YWx1ZSByYW5nZSBpcyBbXCIpLmNvbmNhdChuLFwiLFwiKS5jb25jYXQoaSxcIl0uIGludGVnZXIgb25seVwiKSl9LGQ9ZnVuY3Rpb24oZSx0LG4saSl7aWYobnVsbD09ZSl0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQodHx8XCJwYXJhbVwiLFwiIGNhbm5vdCBiZSBudWxsXCIpKTtpZih5KG4pJiYobj0wKSxpPWl8fDFlNCx5KGUpKXRocm93IG5ldyBFcnJvcihcIlwiLmNvbmNhdCh0fHxcInBhcmFtXCIsXCIgY2Fubm90IGJlIGVtcHR5XCIpKTtpZighZihlLG4saSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBcIi5jb25jYXQodHx8XCJudW1iZXIgcGFyYW1cIixcIjogVGhlIHZhbHVlIHJhbmdlIGlzIFtcIikuY29uY2F0KG4sXCIsXCIpLmNvbmNhdChpLFwiXS5cIikpfSx1PWZ1bmN0aW9uKGUsdCl7aWYoeShlKSl0aHJvdyBuZXcgRXJyb3IoXCJcIi5jb25jYXQodHx8XCJwYXJhbVwiLFwiIGNhbm5vdCBiZSBlbXB0eVwiKSk7aWYoIW0oZSkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZCBcIi5jb25jYXQodHx8XCJib29sZWFuIHBhcmFtXCIsXCI6IFRoZSB2YWx1ZSBpcyBvZiB0aGUgYm9vbGVhbiB0eXBlLlwiKSl9LGw9ZnVuY3Rpb24oZSx0LG4saSl7cmV0dXJuIHR8fCh0PTApLG58fChuPU51bWJlci5NQVhfU0FGRV9JTlRFR0VSKSx5KGkpJiYoaT0hMCksRShlKSYmKCFpfHxoKGUpKSYmZS5sZW5ndGg+PXQmJmUubGVuZ3RoPD1ufSxwPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gUyhlKSYmZT49dCYmZTw9bn0sZj1mdW5jdGlvbihlLHQsbil7cmV0dXJuIF8oZSkmJmU+PXQmJmU8PW59LG09ZnVuY3Rpb24oZSl7cmV0dXJuXCJib29sZWFuXCI9PXR5cGVvZiBlfSxnPWZ1bmN0aW9uKGUpe3JldHVybiBsKGUsMSwyMDQ3KX0sdj1mdW5jdGlvbihlKXtyZXR1cm4gRShlKSYmL15bYS16QS1aMC05IFxcIVxcI1xcJFxcJVxcJlxcKFxcKVxcK1xcLVxcOlxcO1xcPFxcPVxcLlxcPlxcP1xcQFxcW1xcXVxcXlxcX1xce1xcfVxcfFxcflxcLF17MSw2NH0kLy50ZXN0KGUpfSxoPWZ1bmN0aW9uKGUpe2lmKFwic3RyaW5nXCI9PXR5cGVvZiBlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIG49ZS5jaGFyQ29kZUF0KHQpO2lmKG48MHx8bj4yNTUpcmV0dXJuITF9cmV0dXJuITB9fSxTPWZ1bmN0aW9uKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlJiZlJTE9PTB9LF89ZnVuY3Rpb24oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGV9LEU9ZnVuY3Rpb24oZSl7cmV0dXJuXCJzdHJpbmdcIj09dHlwZW9mIGV9LEk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBBcnJheX0seT1mdW5jdGlvbihlKXtyZXR1cm4gbnVsbD09ZX19LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjt2YXIgaT1uKDEzKSxhPW4ubihpKSxyPW4oNSksbz1uLm4ocikscz1uKDMpLGM9bigwKSxkPW4oOSksdT1uKDE1KSxsPW4ubih1KTtuLmQodCxcImJcIixmdW5jdGlvbigpe3JldHVybiBnfSksbi5kKHQsXCJhXCIsZnVuY3Rpb24oKXtyZXR1cm4gbX0pO3ZhciBwPXtldmVudFR5cGU6bnVsbCxzaWQ6bnVsbCxsdHM6bnVsbCxzdWNjZXNzOm51bGwsY25hbWU6bnVsbCx1aWQ6bnVsbCxwZWVyOm51bGwsY2lkOm51bGwsZWxhcHNlOm51bGwsZXh0ZW5kOm51bGwsdmlkOjB9LGY9bnVsbCxtPWZ1bmN0aW9uKCl7cmV0dXJuIGZ8fChmPVwicHJvY2Vzcy1cIitsKCkoKSxjLmRlZmF1bHQuaW5mbyhcInByb2Nlc3NJZDogXCIrZikpLGZ9LGc9ZnVuY3Rpb24oKXt2YXIgZT17bGlzdDp7fX07ZS51cmw9T2JqZWN0KGQuc2hvdWxkVXNlSHR0cHMpKCk/XCJodHRwczovL1wiLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0RPTUFJTlwiKSxcIjo2NDQzL2V2ZW50cy9tZXNzYWdlXCIpOlwiaHR0cDovL1wiLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0RPTUFJTlwiKSxcIjo2MDgwL2V2ZW50cy9tZXNzYWdlXCIpLGUudXJsQmFja3VwPU9iamVjdChkLnNob3VsZFVzZUh0dHBzKSgpP1wiaHR0cHM6Ly9cIi5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9CQUNLVVBfRE9NQUlOXCIpLFwiOjY0NDMvZXZlbnRzL21lc3NhZ2VcIik6XCJodHRwOi8vXCIuY29uY2F0KE9iamVjdChzLmdldFBhcmFtZXRlcikoXCJFVkVOVF9SRVBPUlRfQkFDS1VQX0RPTUFJTlwiKSxcIjo2MDgwL2V2ZW50cy9tZXNzYWdlXCIpLGUuc2V0UHJveHlTZXJ2ZXI9ZnVuY3Rpb24odCl7dD8oZS51cmw9T2JqZWN0KGQuc2hvdWxkVXNlSHR0cHMpKCk/XCJodHRwczovL1wiLmNvbmNhdCh0LFwiL3JzLz9oPVwiKS5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9ET01BSU5cIiksXCImcD02NDQzJmQ9ZXZlbnRzL21lc3NhZ2VcIik6XCJodHRwOi8vXCIuY29uY2F0KHQsXCIvcnMvP2g9XCIpLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0RPTUFJTlwiKSxcIiZwPTYwODAmZD1ldmVudHMvbWVzc2FnZVwiKSxlLnVybEJhY2t1cD1PYmplY3QoZC5zaG91bGRVc2VIdHRwcykoKT9cImh0dHBzOi8vXCIuY29uY2F0KHQsXCIvcnMvP2g9XCIpLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0JBQ0tVUF9ET01BSU5cIiksXCImcD02NDQzJmQ9ZXZlbnRzL21lc3NhZ2VcIik6XCJodHRwOi8vXCIuY29uY2F0KHQsXCIvcnMvP2g9XCIpLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0JBQ0tVUF9ET01BSU5cIiksXCImcD02MDgwJmQ9ZXZlbnRzL21lc3NhZ2VcIiksYy5kZWZhdWx0LmRlYnVnKFwicmVwb3J0UHJveHlTZXJ2ZXJVUkw6IFwiLmNvbmNhdChlLnVybCkpLGMuZGVmYXVsdC5kZWJ1ZyhcInJlcG9ydFByb3h5U2VydmVyQmFja3VwVVJMOiBcIi5jb25jYXQoZS51cmxCYWNrdXApKSk6KGUudXJsPU9iamVjdChkLnNob3VsZFVzZUh0dHBzKSgpP1wiaHR0cHM6Ly9cIi5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9ET01BSU5cIiksXCI6NjQ0My9ldmVudHMvbWVzc2FnZVwiKTpcImh0dHA6Ly9cIi5jb25jYXQoT2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIkVWRU5UX1JFUE9SVF9ET01BSU5cIiksXCI6NjA4MC9ldmVudHMvbWVzc2FnZVwiKSxlLnVybEJhY2t1cD1PYmplY3QoZC5zaG91bGRVc2VIdHRwcykoKT9cImh0dHBzOi8vXCIuY29uY2F0KE9iamVjdChzLmdldFBhcmFtZXRlcikoXCJFVkVOVF9SRVBPUlRfQkFDS1VQX0RPTUFJTlwiKSxcIjo2NDQzL2V2ZW50cy9tZXNzYWdlXCIpOlwiaHR0cDovL1wiLmNvbmNhdChPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiRVZFTlRfUkVQT1JUX0JBQ0tVUF9ET01BSU5cIiksXCI6NjA4MC9ldmVudHMvbWVzc2FnZVwiKSl9LGUuc2Vzc2lvbkluaXQ9ZnVuY3Rpb24odCxuKXt2YXIgaT1vKCkoe30scCk7aS5zdGFydFRpbWU9K25ldyBEYXRlLGkuc2lkPXQsaS5jbmFtZT1uLmNuYW1lLGUubGlzdFt0XT1pO3ZhciBhPW8oKSh7fSx7d2lsbFVwbG9hZENvbnNvbGVMb2c6T2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIlVQTE9BRF9MT0dcIil9LG4uZXh0ZW5kKSxyPW8oKSh7fSxpKTtyLmV2ZW50VHlwZT1cInNlc3Npb25faW5pdFwiLHIuYXBwaWQ9bi5hcHBpZCxyLmJyb3dzZXI9bmF2aWdhdG9yLnVzZXJBZ2VudCxyLmJ1aWxkPXMuQlVJTEQsci5sdHM9K25ldyBEYXRlLHIuZWxhcHNlPXIubHRzLXIuc3RhcnRUaW1lLHIuZXh0ZW5kPUpTT04uc3RyaW5naWZ5KGEpLHIubW9kZT1uLm1vZGUsci5wcm9jZXNzPW0oKSxyLnN1Y2Nlc3M9bi5zdWNjLHIudmVyc2lvbj1zLlZFUlNJT04sZGVsZXRlIHIuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuU2Vzc2lvblwiLGRhdGE6cn0pLGUuX2ZsdXNoSW52b2tlUmVwb3J0KHQpfSxlLmpvaW5DaG9vc2VTZXJ2ZXI9ZnVuY3Rpb24odCxuLGkpe2lmKGUubGlzdFt0XSl7bi51aWQmJihlLmxpc3RbdF0udWlkPXBhcnNlSW50KG4udWlkKSksbi5jaWQmJihlLmxpc3RbdF0uY2lkPXBhcnNlSW50KG4uY2lkKSk7dmFyIGE9bygpKHt9LGUubGlzdFt0XSk7YS5ldmVudFR5cGU9XCJqb2luX2Nob29zZV9zZXJ2ZXJcIjt2YXIgcj1uLmx0czthLmx0cz1EYXRlLm5vdygpLGEuZXZlbnRFbGFwc2U9YS5sdHMtcixhLmNob29zZVNlcnZlckFkZHI9bi5jc0FkZHIsYS5lcnJvckNvZGU9bi5lYyxhLmVsYXBzZT1hLmx0cy1hLnN0YXJ0VGltZSxhLnN1Y2Nlc3M9bi5zdWNjLGEuY2hvb3NlU2VydmVyQWRkckxpc3Q9SlNPTi5zdHJpbmdpZnkobi5zZXJ2ZXJMaXN0KSxkZWxldGUgYS5zdGFydFRpbWUsZS5zZW5kKHt0eXBlOlwiaW8uYWdvcmEucGIuV3J0Yy5Kb2luQ2hvb3NlU2VydmVyXCIsZGF0YTphfSl9fSxlLnJlcVVzZXJBY2NvdW50PWZ1bmN0aW9uKHQsbil7bi52aWQmJihlLmxpc3RbdF0udmlkPW4udmlkKTt2YXIgaT1vKCkoe30sZS5saXN0W3RdKSxhPW4ubHRzO2kuZXZlbnRUeXBlPVwicmVxX3VzZXJfYWNjb3VudFwiLGkubHRzPURhdGUubm93KCksaS5zdWNjZXNzPW4uc3VjY2VzcyxpLnNlcnZlckFkZHJlc3M9bi5zZXJ2ZXJBZGRyZXNzLGkuc3RyaW5nVWlkPW4uc3RyaW5nVWlkLGkudWlkPW4udWlkLGkuZXJyb3JDb2RlPW4uZXJyb3JDb2RlLGkuZWxhcHNlPWkubHRzLWkuc3RhcnRUaW1lLGkuZXZlbnRFbGFwc2U9aS5sdHMtYSxpLmV4dGVuZD1cInN0cmluZ1wiPT10eXBlb2Ygbi5leHRlbmQ/bi5leHRlbmQ6SlNPTi5zdHJpbmdpZnkobi5leHRlbmQpLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlJlcVVzZXJBY2NvdW50XCIsZGF0YTppfSl9LGUuam9pbkdhdGV3YXk9ZnVuY3Rpb24odCxuKXtuLnZpZCYmKGUubGlzdFt0XS52aWQ9bi52aWQpO3ZhciBpPW8oKSh7fSxlLmxpc3RbdF0pLGE9bi5sdHM7aS5ldmVudFR5cGU9XCJqb2luX2dhdGV3YXlcIixpLmx0cz1EYXRlLm5vdygpLGkuZ2F0ZXdheUFkZHI9bi5hZGRyLGkuc3VjY2Vzcz1uLnN1Y2MsaS5lcnJvckNvZGU9bi5lYyxpLmVsYXBzZT1pLmx0cy1pLnN0YXJ0VGltZSxpLmV2ZW50RWxhcHNlPWkubHRzLWEsZGVsZXRlIGkuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuSm9pbkdhdGV3YXlcIixkYXRhOml9KX0sZS5wdWJsaXNoPWZ1bmN0aW9uKHQsbil7dmFyIGk9bygpKHt9LGUubGlzdFt0XSk7aS5ldmVudFR5cGU9XCJwdWJsaXNoXCI7dmFyIGE9bi5sdHM7aS5sdHM9RGF0ZS5ub3coKSxpLmV2ZW50RWxhcHNlPWkubHRzLWEsaS5lbGFwc2U9aS5sdHMtaS5zdGFydFRpbWUsaS5zdWNjZXNzPW4uc3VjYyxpLmVycm9yQ29kZT1uLmVjLG4udmlkZW9OYW1lJiYoaS52aWRlb05hbWU9bi52aWRlb05hbWUpLG4uYXVkaW9OYW1lJiYoaS5hdWRpb05hbWU9bi5hdWRpb05hbWUpLG4uc2NyZWVuTmFtZSYmKGkuc2NyZWVuTmFtZT1uLnNjcmVlbk5hbWUpLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlB1Ymxpc2hcIixkYXRhOml9KSxlLl9mbHVzaEludm9rZVJlcG9ydCh0KX0sZS5zdWJzY3JpYmU9ZnVuY3Rpb24odCxuKXt2YXIgaT1vKCkoe30sZS5saXN0W3RdKTtpLmV2ZW50VHlwZT1cInN1YnNjcmliZVwiO3ZhciBhPW4ubHRzO2kubHRzPURhdGUubm93KCksaS5ldmVudEVsYXBzZT1pLmx0cy1hLGkuZWxhcHNlPWkubHRzLWkuc3RhcnRUaW1lLGkuZXJyb3JDb2RlPW4uZWMsaS5zdWNjZXNzPW4uc3VjYyxpc0Zpbml0ZShuLnBlZXJpZCk/aS5wZWVyPW4ucGVlcmlkOmkucGVlclN1aWQ9XCJcIituLnBlZXJpZCxcImJvb2xlYW5cIj09dHlwZW9mIG4udmlkZW8mJihpLnZpZGVvPW4udmlkZW8pLFwiYm9vbGVhblwiPT10eXBlb2Ygbi5hdWRpbyYmKGkuYXVkaW89bi5hdWRpbyksZGVsZXRlIGkuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuU3Vic2NyaWJlXCIsZGF0YTppfSksZS5fZmx1c2hJbnZva2VSZXBvcnQodCl9LGUuZmlyc3RSZW1vdGVGcmFtZT1mdW5jdGlvbih0LG4pe3ZhciBpPW8oKSh7fSxlLmxpc3RbdF0pO2kuZXZlbnRUeXBlPVwiZmlyc3RfcmVtb3RlX2ZyYW1lXCI7dmFyIGE9bi5sdHM7aS5sdHM9RGF0ZS5ub3coKSxpLmV2ZW50RWxhcHNlPWkubHRzLWEsaS5lbGFwc2U9aS5sdHMtaS5zdGFydFRpbWUsaS53aWR0aD1uLndpZHRoLGkuaGVpZ2h0PW4uaGVpZ2h0LGkuc3VjY2Vzcz1uLnN1Y2MsaS5lcnJvckNvZGU9bi5lYyxpc0Zpbml0ZShuLnBlZXJpZCk/aS5wZWVyPW4ucGVlcmlkOmkucGVlclN1aWQ9XCJcIituLnBlZXJpZCxkZWxldGUgaS5zdGFydFRpbWUsZS5zZW5kKHt0eXBlOlwiaW8uYWdvcmEucGIuV3J0Yy5GaXJzdEZyYW1lXCIsZGF0YTppfSl9LGUuc3RyZWFtU3dpdGNoPWZ1bmN0aW9uKHQsbil7dmFyIGk9bygpKHt9LGUubGlzdFt0XSk7aS5ldmVudFR5cGU9XCJzdHJlYW1fc3dpdGNoXCIsaS5sdHM9RGF0ZS5ub3coKSxpLmlzRHVhbD1uLmlzZHVhbCxpLmVsYXBzZT1pLmx0cy1pLnN0YXJ0VGltZSxpLnN1Y2Nlc3M9aS5zdWNjLGRlbGV0ZSBpLnN0YXJ0VGltZSxlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLlN0cmVhbVN3aXRjaFwiLGRhdGE6aX0pfSxlLmF1ZGlvU2VuZGluZ1N0b3BwZWQ9ZnVuY3Rpb24odCxuKXt2YXIgaT1vKCkoe30sZS5saXN0W3RdKTtpLmV2ZW50VHlwZT1cImF1ZGlvX3NlbmRpbmdfc3RvcHBlZFwiLGkubHRzPURhdGUubm93KCksaS5lbGFwc2U9aS5sdHMtaS5zdGFydFRpbWUsaS5yZWFzb249bi5yZWFzb24saS5zdWNjZXNzPW4uc3VjYyxkZWxldGUgaS5zdGFydFRpbWUsZS5zZW5kKHt0eXBlOlwiaW8uYWdvcmEucGIuV3J0Yy5BdWRpb1NlbmRpbmdTdG9wcGVkXCIsZGF0YTppfSl9LGUudmlkZW9TZW5kaW5nU3RvcHBlZD1mdW5jdGlvbih0LG4pe3ZhciBpPW8oKSh7fSxlLmxpc3RbdF0pO2kuZXZlbnRUeXBlPVwidmlkZW9fc2VuZGluZ19zdG9wcGVkXCIsaS5sdHM9RGF0ZS5ub3coKSxpLmVsYXBzZT1pLmx0cy1pLnN0YXJ0VGltZSxpLnJlc29uPW4ucmVhc29uLGkuc3VjY2Vzcz1uLnN1Y2MsZGVsZXRlIGkuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuVmlkZW9TZW5kaW5nU3RvcHBlZFwiLGRhdGE6aX0pfSxlLnJlcXVlc3RQcm94eUFwcENlbnRlcj1mdW5jdGlvbih0LG4pe3ZhciBpPW8oKSh7fSxlLmxpc3RbdF0pLGE9bi5sdHM7aS5ldmVudFR5cGU9XCJyZXF1ZXN0X3Byb3h5X2FwcGNlbnRlclwiLGkubHRzPURhdGUubm93KCksaS5ldmVudEVsYXBzZT1pLmx0cy1hLGkuZWxhcHNlPWkubHRzLWkuc3RhcnRUaW1lLGkuZXh0ZW5kPW4uZXh0ZW5kK1wiXCIsaS5BUEFkZHI9bi5BUEFkZHIsaS53b3JrZXJNYW5hZ2VyTGlzdD1uLndvcmtlck1hbmFnZXJMaXN0LGkucmVzcG9uc2U9bi5yZXNwb25zZSxpLmVycm9yQ29kZT1uLmVjLGkuc3VjY2Vzcz1uLnN1Y2MsZGVsZXRlIGkuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuUmVxdWVzdFByb3h5QXBwQ2VudGVyXCIsZGF0YTppfSl9LGUucmVxdWVzdFByb3h5V29ya2VyTWFuYWdlcj1mdW5jdGlvbih0LG4pe3ZhciBpPW8oKSh7fSxlLmxpc3RbdF0pLGE9bi5sdHM7aS5ldmVudFR5cGU9XCJyZXF1ZXN0X3Byb3h5X3dvcmtlcl9tYW5hZ2VyXCIsaS5sdHM9RGF0ZS5ub3coKSxpLmV2ZW50RWxhcHNlPWkubHRzLWEsaS5lbGFwc2U9aS5sdHMtaS5zdGFydFRpbWUsaS5leHRlbmQ9bi5leHRlbmQsaS53b3JrZXJNYW5hZ2VyQWRkcj1uLndvcmtlck1hbmFnZXJBZGRyLGkucmVzcG9uc2U9bi5yZXNwb25zZSxpLmVycm9yQ29kZT1uLmVjLGkuc3VjY2Vzcz1uLnN1Y2MsZGVsZXRlIGkuc3RhcnRUaW1lLGUuc2VuZCh7dHlwZTpcImlvLmFnb3JhLnBiLldydGMuUmVxdWVzdFByb3h5V29ya2VyTWFuYWdlclwiLGRhdGE6aX0pfTt2YXIgdD0wO3JldHVybiBlLnJlcG9ydEFwaUludm9rZT1mdW5jdGlvbihlLG4pe3ZhciBpPW4udGFnLHI9bi5uYW1lLG89bi5nZXRTdGF0ZXMsZD1uLm9wdGlvbnMsdT1uLnRpbWVvdXQsbD12b2lkIDA9PT11PzZlNDp1LHA9bi5jYWxsYmFjayxmPW4ucmVwb3J0UmVzdWx0LG09dm9pZCAwPT09Znx8Zix2PURhdGUubm93KCksaD0wLFM9dCsrLF89ZnVuY3Rpb24oKXtyZXR1cm4gYSgpKHt0YWc6aSxpbnZva2VJZDpTLHNpZDplLG5hbWU6cixhcGlJbnZva2VUaW1lOnYsb3B0aW9uczpkfSxvJiZ7c3RhdGVzOih0PW8oKSxPYmplY3Qua2V5cyh0KS5yZWR1Y2UoZnVuY3Rpb24oZSxuKXt2YXIgaT1lO3JldHVybiBudWxsIT10W25dJiYoaVtuXT10W25dKSxpfSx7fSkpfSk7dmFyIHR9LEU9ISFPYmplY3Qocy5nZXRQYXJhbWV0ZXIpKFwiU0hPV19SRVBPUlRfSU5WT0tFUl9MT0dcIik7RSYmYy5kZWZhdWx0LmluZm8oXCJcIi5jb25jYXQocixcIiBzdGFydFwiKSk7dmFyIEk9c2V0VGltZW91dChmdW5jdGlvbigpe2cuX3NlbmRBcGlJbnZva2UoYSgpKHt9LF8oKSx7ZXJyb3I6XCJBUElfSU5WT0tFX1RJTUVPVVRcIixzdWNjZXNzOiExfSkpfSxsKTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtpZihjbGVhclRpbWVvdXQoSSksKytoPjEmJihlPVwiRVhFQ1VUT1JfSU5WT0tFX1wiLmNvbmNhdChoKSksZSlyZXR1cm4gZy5fc2VuZEFwaUludm9rZShhKCkoe30sXygpLHtzdWNjZXNzOiExLGVycm9yOmV9LG8mJntzdGF0ZXM6bygpfSkpLEUmJmMuZGVmYXVsdC5pbmZvKFwiXCIuY29uY2F0KHIsXCIgb25GYWlsdXJlXCIpLGUpLHAmJnAoZSk7Zy5fc2VuZEFwaUludm9rZShhKCkoe30sXygpLHtzdWNjZXNzOiEwfSxtJiZ7cmVzdWx0OnR9LG8mJntzdGF0ZXM6bygpfSkpLEUmJmMuZGVmYXVsdC5pbmZvKFwiXCIuY29uY2F0KHIsXCIgb25TdWNjZXNzXCIpKSxwJiZwKG51bGwsdCl9fSxlLl9jYWNoZWRJdGVtcz1bXSxlLl9jYWNoZUludm9rZVJlcG9ydD1mdW5jdGlvbih0KXt0Lmx0c3x8KHQubHRzPURhdGUubm93KCkpLGUuX2NhY2hlZEl0ZW1zLnB1c2godCksZS5fY2FjaGVkSXRlbXMubGVuZ3RoPjUwJiZlLl9jYWNoZWRJdGVtcy5zaGlmdCgpfSxlLl9mbHVzaEludm9rZVJlcG9ydD1mdW5jdGlvbih0KXtpZihlLl9jYWNoZWRJdGVtcy5sZW5ndGgpe3ZhciBuPWUuX2NhY2hlZEl0ZW1zO2UuX2NhY2hlZEl0ZW1zPVtdLGMuZGVmYXVsdC5kZWJ1ZyhcIkZsdXNoIGNhY2hlZCBldmVudCByZXBvcnRpbmc6XCIsbi5sZW5ndGgpLG4uZm9yRWFjaChmdW5jdGlvbihuLGkpe24uc2lkPXQsc2V0VGltZW91dChmdW5jdGlvbigpe2UuX3NlbmRBcGlJbnZva2Uobil9LDVlMys1MDAqaSl9KX19LGUuX3NlbmRBcGlJbnZva2U9ZnVuY3Rpb24odCl7dmFyIG49dC50YWcsaT10Lmludm9rZUlkLHI9dC5zaWQsbz10Lm5hbWUsYz10LnJlc3VsdCxkPXQuc3RhdGVzLHU9dC5vcHRpb25zLGw9dC5lcnJvcixwPXQuc3VjY2VzcyxmPXQuYXBpSW52b2tlVGltZSxtPXQubHRzLGc9T2JqZWN0KHMuZ2V0UGFyYW1ldGVyKShcIk5PVF9SRVBPUlRfRVZFTlRcIik7aWYoIShuJiZnIGluc3RhbmNlb2YgQXJyYXkmJi0xIT09Zy5pbmRleE9mKG4pKSlpZihlLmxpc3Rbcl0pe3ZhciB2PWUubGlzdFtyXSxoPXYuc3RhcnRUaW1lLFM9di5jbmFtZSxfPXYudWlkLEU9di5jaWQsST0obT1tfHxEYXRlLm5vdygpKS1oLHk9bS1mLFQ9XCJcIjtpZih1KXRyeXtUPUpTT04uc3RyaW5naWZ5KHUpfWNhdGNoKGUpe1Q9dS50b1N0cmluZygpfXZhciBiPWEoKSh7aW52b2tlSWQ6aSxzaWQ6cixjbmFtZTpTLGNpZDpFLGx0czptLHVpZDpfLHN1Y2Nlc3M6cCxlbGFwc2U6SSxhcGlOYW1lOm8sZXhlY0VsYXBzZTp5fSx2b2lkIDAhPT11JiZ7b3B0aW9uczpUfSx2b2lkIDAhPT1kJiZ7ZXhlY1N0YXRlczpKU09OLnN0cmluZ2lmeShkKX0sdm9pZCAwIT09bCYme2Vycm9yQ29kZTpKU09OLnN0cmluZ2lmeShsKX0sdm9pZCAwIT09YyYme2V4ZWNSZXN1bHQ6SlNPTi5zdHJpbmdpZnkoYyl9KTtlLnNlbmQoe3R5cGU6XCJpby5hZ29yYS5wYi5XcnRjLkFwaUludm9rZVwiLGRhdGE6Yn0pfWVsc2UgZS5fY2FjaGVJbnZva2VSZXBvcnQoYXJndW1lbnRzWzBdKX0sZS5fc2VuZD1mdW5jdGlvbih0KXt0cnl7dmFyIG49W107dCYmdC5kYXRhJiZ0LmRhdGEuYXBpTmFtZT9uLnB1c2goW1wiYXBpTmFtZVwiLFwiXCIrdC5kYXRhLmFwaU5hbWVdKTp0JiZ0LmRhdGEmJnQuZGF0YS5ldmVudFR5cGUmJm4ucHVzaChbXCJldmVudFR5cGVcIix0LmRhdGEuZXZlbnRUeXBlXSk7dmFyIGk9bi5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuXCJcIi5jb25jYXQoZVswXSxcIj1cIikuY29uY2F0KGVuY29kZVVSSUNvbXBvbmVudChlWzFdKSl9KS5qb2luKFwiJlwiKSxhPS0xPT09ZS51cmwuaW5kZXhPZihcIj9cIik/XCJcIi5jb25jYXQoZS51cmwsXCI/XCIpLmNvbmNhdChpKTplLnVybDtPYmplY3QoZC5wb3N0KShhLHQsbnVsbCxmdW5jdGlvbihuKXt2YXIgYT0tMT09PWUudXJsQmFja3VwLmluZGV4T2YoXCI/XCIpP1wiXCIuY29uY2F0KGUudXJsQmFja3VwLFwiP1wiKS5jb25jYXQoaSk6ZS51cmxCYWNrdXA7T2JqZWN0KGQucG9zdCkoYSx0LG51bGwsZnVuY3Rpb24oZSl7fSx7dGltZW91dDoxZTR9KX0se3RpbWVvdXQ6MWU0fSl9Y2F0Y2goZSl7fX0sZS5zZW5kQ2FjaGU9W10sZS5zZW5kVGltZXI9bnVsbCxlLnNlbmQ9ZnVuY3Rpb24odCl7aWYoZS5zZW5kQ2FjaGUucHVzaCh0KSxudWxsPT09ZS5zZW5kVGltZXIpe3JldHVybiBmdW5jdGlvbiB0KCl7ZS5zZW5kVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe2lmKDAhPT1lLnNlbmRDYWNoZS5sZW5ndGgpcmV0dXJuIGUuX3NlbmQoZS5zZW5kQ2FjaGUuc2hpZnQoKSksdCgpO2Uuc2VuZFRpbWVyPW51bGx9LE9iamVjdChzLmdldFBhcmFtZXRlcikoXCJFVkVOVF9SRVBPUlRfU0VORF9JTlRFUlZBTFwiKSl9KCl9fSxlfSgpfSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dC5CVUlMRD1cInYzLjAuMC0wLWc3NDdmMzIxXCI7dC5WRVJTSU9OPVwiMy4wLjBcIjt0LlNVUFBPUlRfUkVTT0xVVElPTl9MSVNUPXtcIjkwcF8xXCI6WzE2MCw5MCxudWxsLG51bGwsbnVsbCxudWxsXSxcIjEyMHBfMVwiOlsxNjAsMTIwLDE1LDE1LDMwLDY1XSxcIjEyMHBfM1wiOlsxMjAsMTIwLDE1LDE1LDMwLDUwXSxcIjEyMHBfNFwiOlsyMTIsMTIwLG51bGwsbnVsbCxudWxsLG51bGxdLFwiMTgwcF8xXCI6WzMyMCwxODAsMTUsMTUsMzAsMTQwXSxcIjE4MHBfM1wiOlsxODAsMTgwLDE1LDE1LDMwLDEwMF0sXCIxODBwXzRcIjpbMjQwLDE4MCwxNSwxNSwzMCwxMjBdLFwiMjQwcF8xXCI6WzMyMCwyNDAsMTUsMTUsNDAsMjAwXSxcIjI0MHBfM1wiOlsyNDAsMjQwLDE1LDE1LDQwLDE0MF0sXCIyNDBwXzRcIjpbNDI0LDI0MCwxNSwxNSw0MCwyMjBdLFwiMzYwcF8xXCI6WzY0MCwzNjAsMTUsMTUsODAsNDAwXSxcIjM2MHBfM1wiOlszNjAsMzYwLDE1LDE1LDgwLDI2MF0sXCIzNjBwXzRcIjpbNjQwLDM2MCwzMCwzMCw4MCw2MDBdLFwiMzYwcF82XCI6WzM2MCwzNjAsMzAsMzAsODAsNDAwXSxcIjM2MHBfN1wiOls0ODAsMzYwLDE1LDE1LDgwLDMyMF0sXCIzNjBwXzhcIjpbNDgwLDM2MCwzMCwzMCw4MCw0OTBdLFwiMzYwcF85XCI6WzY0MCwzNjAsMTUsMTUsODAsODAwXSxcIjM2MHBfMTBcIjpbNjQwLDM2MCwyNCwyNCw4MCw4MDBdLFwiMzYwcF8xMVwiOls2NDAsMzYwLDI0LDI0LDgwLDFlM10sXCI0ODBwXzFcIjpbNjQwLDQ4MCwxNSwxNSwyMCw1MDAsMSw1XSxcIjQ4MHBfMlwiOls2NDAsNDgwLDMwLDMwLDEwMCwxZTMsMjUsMzBdLFwiNDgwcF8zXCI6WzQ4MCw0ODAsMTUsMTUsMTAwLDQwMF0sXCI0ODBwXzRcIjpbNjQwLDQ4MCwzMCwzMCwxMDAsNzUwXSxcIjQ4MHBfNlwiOls0ODAsNDgwLDMwLDMwLDEwMCw2MDBdLFwiNDgwcF84XCI6Wzg0OCw0ODAsMTUsMTUsMTAwLDYxMF0sXCI0ODBwXzlcIjpbODQ4LDQ4MCwzMCwzMCwxMDAsOTMwXSxcIjQ4MHBfMTBcIjpbNjQwLDQ4MCwxMCwxMCwxMDAsNDAwXSxcIjcyMHBfMVwiOlsxMjgwLDcyMCwxNSwxNSwxMjAsMTEzMCwxLDVdLFwiNzIwcF8yXCI6WzEyODAsNzIwLDMwLDMwLDEyMCwyZTMsMjUsMzBdLFwiNzIwcF8zXCI6WzEyODAsNzIwLDMwLDMwLDEyMCwxNzEwXSxcIjcyMHBfNVwiOls5NjAsNzIwLDE1LDE1LDEyMCw5MTBdLFwiNzIwcF82XCI6Wzk2MCw3MjAsMzAsMzAsMTIwLDEzODBdLFwiMTA4MHBfMVwiOlsxOTIwLDEwODAsMTUsMTUsMTIwLDIwODAsMSw1XSxcIjEwODBwXzJcIjpbMTkyMCwxMDgwLDMwLDMwLDEyMCwzZTMsMjUsMzBdLFwiMTA4MHBfM1wiOlsxOTIwLDEwODAsMzAsMzAsMTIwLDMxNTBdLFwiMTA4MHBfNVwiOlsxOTIwLDEwODAsNjAsNjAsMTIwLDQ3ODBdLFwiMTQ0MHBfMVwiOlsyNTYwLDE0NDAsMzAsMzAsMTIwLDQ4NTBdLFwiMTQ0MHBfMlwiOlsyNTYwLDE0NDAsNjAsNjAsMTIwLDczNTBdLFwiNGtfMVwiOlszODQwLDIxNjAsMzAsMzAsMTIwLDg5MTBdLFwiNGtfM1wiOlszODQwLDIxNjAsNjAsNjAsMTIwLDEzNTAwXX07dC5BVURJT19QUk9GSUxFX1NFVFRJTkdTPXtzcGVlY2hfbG93X3F1YWxpdHk6WyExLCExLCEwLCEwXSxzcGVlY2hfc3RhbmRhcmQ6WyExLCExLCEwLCExXSxtdXNpY19zdGFuZGFyZDpbITEsITEsITEsITFdLHN0YW5kYXJkX3N0ZXJlbzpbITEsITAsITEsITFdLGhpZ2hfcXVhbGl0eTpbITAsITEsITEsITFdLGhpZ2hfcXVhbGl0eV9zdGVyZW86WyEwLCEwLCExLCExXSxkZWZhdWx0OlshMSwhMSwhMSwhMV19O3ZhciBpPXtXRUJDU19ET01BSU46W1wid2VicnRjMi1hcC13ZWItMS5hZ29yYS5pb1wiLFwid2VicnRjMi1hcC13ZWItMi5hZ29yYWlvLmNuXCJdLFdFQkNTX0RPTUFJTl9CQUNLVVBfTElTVDpbXCJ3ZWJydGMyLWFwLXdlYi0zLmFnb3JhLmlvXCIsXCJ3ZWJydGMyLWFwLXdlYi00LmFnb3JhaW8uY25cIl0sUFJPWFlfQ1M6W1wiYXAtcHJveHktMS5hZ29yYS5pb1wiLFwiYXAtcHJveHktMi5hZ29yYS5pb1wiXSxDRFNfQVA6W1wiY2RzLWFwLXdlYi0xLmFnb3JhLmlvXCIsXCJjZHMtYXAtd2ViLTIuYWdvcmFpby5jblwiLFwiY2RzLWFwLXdlYi0zLmFnb3JhLmlvXCIsXCJjZHMtYXAtd2ViLTQuYWdvcmFpby5jblwiXSxBQ0NPVU5UX1JFR0lTVEVSOltcInN1YS1hcC13ZWItMS5hZ29yYS5pb1wiLFwic3VhLWFwLXdlYi0yLmFnb3JhaW8uY25cIixcInN1YS1hcC13ZWItMy5hZ29yYS5pb1wiLFwic3VhLWFwLXdlYi00LmFnb3JhaW8uY25cIl0sVUFQX0FQOltcInVhcC1hcC13ZWItMS5hZ29yYS5pb1wiLFwidWFwLWFwLXdlYi0yLmFnb3JhaW8uY25cIixcInVhcC1hcC13ZWItMy5hZ29yYS5pb1wiLFwidWFwLWFwLXdlYi00LmFnb3JhaW8uY25cIl0sQUNDT1VOVF9SRUdJU1RFUl9SRVRSWV9USU1FT1VUOjEsQUNDT1VOVF9SRUdJU1RFUl9SRVRSWV9SQVRJTzoyLEFDQ09VTlRfUkVHSVNURVJfUkVUUllfVElNRU9VVF9NQVg6NmU0LEFDQ09VTlRfUkVHSVNURVJfUkVUUllfQ09VTlRfTUFYOjFlNSxBVURJT19DT05URVhUOm51bGwsTE9HX1VQTE9BRF9TRVJWRVI6XCJsb2dzZXJ2aWNlLmFnb3JhLmlvXCIsRVZFTlRfUkVQT1JUX0RPTUFJTjpcIndlYmNvbGxlY3Rvci0xLmFnb3JhLmlvXCIsRVZFTlRfUkVQT1JUX0JBQ0tVUF9ET01BSU46XCJ3ZWJjb2xsZWN0b3ItMi5hZ29yYWlvLmNuXCIsV0VCQ1NfQkFDS1VQX0NPTk5FQ1RfVElNRU9VVDo2ZTMsTElWRVNUUkVBTUlOR19BTElHTjohMCxIVFRQX0NPTk5FQ1RfVElNRU9VVDo1ZTMsUExBWUVSX1NUQVRFX0RFRkVSOjJlMyxTSUdOQUxfUkVRVUVTVF9USU1FT1VUOjFlNCxTSUdOQUxfUkVRVUVTVF9XQVRDSF9JTlRFUlZBTDoxZTMsUkVQT1JUX1NUQVRTOiEwLFJFUE9SVF9TVEFUU19USU1FT1VUOjNlMyxVUExPQURfTE9HOiExLE5PVF9SRVBPUlRfRVZFTlQ6W10sRklMRVBBVEhfTEVOTUFYOjI1NSxTVUJTQ1JJQkVfVENDOiExLFBJTkdfUE9OR19USU1FX09VVDoxMCxEVUFMU1RSRUFNX09QRVJBVElPTl9DSEVDSzohMCxXRUJTT0NLRVRfVElNRU9VVF9NSU46MWU0LEVWRU5UX1JFUE9SVF9TRU5EX0lOVEVSVkFMOjFlMyxNRURJQV9FTEVNRU5UX0VYSVNUU19ERVBUSDozLENBTkRJREFURV9USU1FT1VUOjJlMyxTSElNX0NBTkRJREFURTohMSxMRUFWRV9NU0dfVElNRU9VVDoyZTMsVElDS0VUX1JFTkVXX1RJTUVPVVQ6ODI4ZTUsU0hPV19SRVBPUlRfSU5WT0tFUl9MT0c6ITEsU1RBVFNfRklMVEVSOnt0cmFuc3BvcnRJZDohMCxnb29nVHJhY2tJZDohMH0sRk9SQ0VfVFVSTjohMSxUVVJOX0VOQUJMRV9UQ1A6ITAsVFVSTl9FTkFCTEVfVURQOiEwLEZPUkNFX0NIQU5HRURfR0FURVdBWV9GTEFHOiExLEpPSU5fRVhURU5EOlwiXCIsUFVCX0VYVEVORDpcIlwiLFNVQl9FWFRFTkQ6XCJcIixDSFJPTUVfTkVXX1NUQVRTOiExfTt0LnNldFBhcmFtZXRlcj1mdW5jdGlvbihlLHQpe3JldHVybiB2b2lkIDAhPT1pW2VdJiYoaVtlXT10LCEwKX07dC5nZXRQYXJhbWV0ZXI9ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMCE9PWlbZV0/aVtlXTpudWxsfX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO24ucih0KSxuLmQodCxcImdldEJyb3dzZXJJbmZvXCIsZnVuY3Rpb24oKXtyZXR1cm4gU30pLG4uZCh0LFwiZ2V0QnJvd3NlclZlcnNpb25cIixmdW5jdGlvbigpe3JldHVybiBwfSksbi5kKHQsXCJnZXRCcm93c2VyT1NcIixmdW5jdGlvbigpe3JldHVybiBmfSksbi5kKHQsXCJpc0Nocm9tZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGl9KSxuLmQodCxcImlzU2FmYXJpXCIsZnVuY3Rpb24oKXtyZXR1cm4gYX0pLG4uZCh0LFwiaXNGaXJlRm94XCIsZnVuY3Rpb24oKXtyZXR1cm4gb30pLG4uZCh0LFwiaXNPcGVyYVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSxuLmQodCxcImlzRWRnZVwiLGZ1bmN0aW9uKCl7cmV0dXJuIHJ9KSxuLmQodCxcImlzUVFCcm93c2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gY30pLG4uZCh0LFwiaXNXZUNoYXRCcm93c2VyXCIsZnVuY3Rpb24oKXtyZXR1cm4gZH0pLG4uZCh0LFwiaXNMZWdhY3lDaHJvbWVcIixmdW5jdGlvbigpe3JldHVybiBnfSksbi5kKHQsXCJpc1N1cHBvcnRlZFBDXCIsZnVuY3Rpb24oKXtyZXR1cm4gdX0pLG4uZCh0LFwiaXNTdXBwb3J0ZWRNb2JpbGVcIixmdW5jdGlvbigpe3JldHVybiBsfSksbi5kKHQsXCJnZXRDaHJvbWVLZXJuZWxWZXJzaW9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gaH0pLG4uZCh0LFwiaXNDaHJvbWVLZXJuZWxcIixmdW5jdGlvbigpe3JldHVybiBtfSk7dmFyIGk9ZnVuY3Rpb24oKXt2YXIgZT1TKCk7cmV0dXJuIGUubmFtZSYmXCJDaHJvbWVcIj09PWUubmFtZX0sYT1mdW5jdGlvbigpe3ZhciBlPVMoKTtyZXR1cm4gZS5uYW1lJiZcIlNhZmFyaVwiPT09ZS5uYW1lfSxyPWZ1bmN0aW9uKCl7dmFyIGU9UygpO3JldHVybiBlLm5hbWUmJlwiRWRnZVwiPT09ZS5uYW1lfSxvPWZ1bmN0aW9uKCl7dmFyIGU9UygpO3JldHVybiBlLm5hbWUmJlwiRmlyZWZveFwiPT09ZS5uYW1lfSxzPWZ1bmN0aW9uKCl7dmFyIGU9UygpO3JldHVybiBlLm5hbWUmJlwiT1BSXCI9PT1lLm5hbWV9LGM9ZnVuY3Rpb24oKXt2YXIgZT1TKCk7cmV0dXJuIGUubmFtZSYmXCJRUUJyb3dzZXJcIj09PWUubmFtZX0sZD1mdW5jdGlvbigpe3ZhciBlPVMoKTtyZXR1cm4gZS5uYW1lJiZcIk1pY3JvTWVzc2VuZ2VyXCI9PT1lLm5hbWV9LHU9ZnVuY3Rpb24oKXt2YXIgZT1mKCk7cmV0dXJuXCJMaW51eFwiPT09ZXx8XCJNYWMgT1MgWFwiPT09ZXx8XCJNYWMgT1NcIj09PWV8fC0xIT09ZS5pbmRleE9mKFwiV2luZG93c1wiKX0sbD1mdW5jdGlvbigpe3ZhciBlPWYoKTtyZXR1cm5cIkFuZHJvaWRcIj09PWV8fFwiaU9TXCI9PT1lfSxwPWZ1bmN0aW9uKCl7cmV0dXJuIFMoKS52ZXJzaW9ufSxmPWZ1bmN0aW9uKCl7cmV0dXJuIFMoKS5vc30sbT1mdW5jdGlvbigpe3JldHVybiEhbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvY2hyb21lXFwvW1xcZF0uL2kpfTtmdW5jdGlvbiBnKCl7cmV0dXJuIHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbiYmbnVsbCE9PXdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvQ2hyb21lXFwvKFtcXHdcXFddKj8pXFwuLykmJndpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvQ2hyb21lXFwvKFtcXHdcXFddKj8pXFwuLylbMV08PTM1fXZhciB2LGg9ZnVuY3Rpb24oKXt2YXIgZT1uYXZpZ2F0b3IudXNlckFnZW50Lm1hdGNoKC9jaHJvbWVcXC9bXFxkXS4vaSk7cmV0dXJuIGUmJmVbMF0mJmVbMF0uc3BsaXQoXCIvXCIpWzFdfSxTPSh2PWZ1bmN0aW9uKCl7dmFyIGUsdD1uYXZpZ2F0b3IudXNlckFnZW50LG49dC5tYXRjaCgvKG9wZXJhfGNocm9tZXxzYWZhcml8ZmlyZWZveHxtc2llfHRyaWRlbnQoPz1cXC8pKVxcLz9cXHMqKFxcZCspL2kpfHxbXTtcIkNocm9tZVwiPT09blsxXSYmbnVsbCE9KGU9dC5tYXRjaCgvKE9QUig/PVxcLykpXFwvPyhcXGQrKS9pKSkmJihuPWUpLFwiU2FmYXJpXCI9PT1uWzFdJiZudWxsIT0oZT10Lm1hdGNoKC92ZXJzaW9uXFwvKFxcZCspL2kpKSYmKG5bMl09ZVsxXSksfnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwicXFicm93c2VyXCIpJiZudWxsIT0oZT10Lm1hdGNoKC8ocXFicm93c2VyKD89XFwvKSlcXC8/KFxcZCspL2kpKSYmKG49ZSksfnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwibWljcm9tZXNzZW5nZXJcIikmJm51bGwhPShlPXQubWF0Y2goLyhtaWNyb21lc3Nlbmdlcig/PVxcLykpXFwvPyhcXGQrKS9pKSkmJihuPWUpLH50LnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImVkZ2VcIikmJm51bGwhPShlPXQubWF0Y2goLyhlZGdlKD89XFwvKSlcXC8/KFxcZCspL2kpKSYmKG49ZSksfnQudG9Mb3dlckNhc2UoKS5pbmRleE9mKFwidHJpZGVudFwiKSYmbnVsbCE9KGU9L1xcYnJ2WyA6XSsoXFxkKykvZy5leGVjKHQpfHxbXSkmJihuPVtudWxsLFwiSUVcIixlWzFdXSk7dmFyIGk9dm9pZCAwLGE9W3tzOlwiV2luZG93cyAxMFwiLHI6LyhXaW5kb3dzIDEwLjB8V2luZG93cyBOVCAxMC4wKS99LHtzOlwiV2luZG93cyA4LjFcIixyOi8oV2luZG93cyA4LjF8V2luZG93cyBOVCA2LjMpL30se3M6XCJXaW5kb3dzIDhcIixyOi8oV2luZG93cyA4fFdpbmRvd3MgTlQgNi4yKS99LHtzOlwiV2luZG93cyA3XCIscjovKFdpbmRvd3MgN3xXaW5kb3dzIE5UIDYuMSkvfSx7czpcIldpbmRvd3MgVmlzdGFcIixyOi9XaW5kb3dzIE5UIDYuMC99LHtzOlwiV2luZG93cyBTZXJ2ZXIgMjAwM1wiLHI6L1dpbmRvd3MgTlQgNS4yL30se3M6XCJXaW5kb3dzIFhQXCIscjovKFdpbmRvd3MgTlQgNS4xfFdpbmRvd3MgWFApL30se3M6XCJXaW5kb3dzIDIwMDBcIixyOi8oV2luZG93cyBOVCA1LjB8V2luZG93cyAyMDAwKS99LHtzOlwiV2luZG93cyBNRVwiLHI6LyhXaW4gOXggNC45MHxXaW5kb3dzIE1FKS99LHtzOlwiV2luZG93cyA5OFwiLHI6LyhXaW5kb3dzIDk4fFdpbjk4KS99LHtzOlwiV2luZG93cyA5NVwiLHI6LyhXaW5kb3dzIDk1fFdpbjk1fFdpbmRvd3NfOTUpL30se3M6XCJXaW5kb3dzIE5UIDQuMFwiLHI6LyhXaW5kb3dzIE5UIDQuMHxXaW5OVDQuMHxXaW5OVHxXaW5kb3dzIE5UKS99LHtzOlwiV2luZG93cyBDRVwiLHI6L1dpbmRvd3MgQ0UvfSx7czpcIldpbmRvd3MgMy4xMVwiLHI6L1dpbjE2L30se3M6XCJBbmRyb2lkXCIscjovQW5kcm9pZC99LHtzOlwiT3BlbiBCU0RcIixyOi9PcGVuQlNEL30se3M6XCJTdW4gT1NcIixyOi9TdW5PUy99LHtzOlwiTGludXhcIixyOi8oTGludXh8WDExKS99LHtzOlwiaU9TXCIscjovKGlQaG9uZXxpUGFkfGlQb2QpL30se3M6XCJNYWMgT1MgWFwiLHI6L01hYyBPUyBYL30se3M6XCJNYWMgT1NcIixyOi8oTWFjUFBDfE1hY0ludGVsfE1hY19Qb3dlclBDfE1hY2ludG9zaCkvfSx7czpcIlFOWFwiLHI6L1FOWC99LHtzOlwiVU5JWFwiLHI6L1VOSVgvfSx7czpcIkJlT1NcIixyOi9CZU9TL30se3M6XCJPUy8yXCIscjovT1NcXC8yL30se3M6XCJTZWFyY2ggQm90XCIscjovKG51aGt8R29vZ2xlYm90fFlhbW15Ym90fE9wZW5ib3R8U2x1cnB8TVNOQm90fEFzayBKZWV2ZXNcXC9UZW9tYXxpYV9hcmNoaXZlcikvfV07Zm9yKHZhciByIGluIGEpe3ZhciBvPWFbcl07aWYoby5yLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpe2k9by5zO2JyZWFrfX1yZXR1cm57bmFtZTpuWzFdLHZlcnNpb246blsyXSxvczppfX0oKSxmdW5jdGlvbigpe3JldHVybiB2fSl9LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbigpe3JldHVybiBlLmV4cG9ydHM9bj1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHQ9MTt0PGFyZ3VtZW50cy5sZW5ndGg7dCsrKXt2YXIgbj1hcmd1bWVudHNbdF07Zm9yKHZhciBpIGluIG4pT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG4saSkmJihlW2ldPW5baV0pfXJldHVybiBlfSxuLmFwcGx5KHRoaXMsYXJndW1lbnRzKX1lLmV4cG9ydHM9bn0sZnVuY3Rpb24oZSx0LG4pe2UuZXhwb3J0cz1uKDI0KX0sZnVuY3Rpb24oZSx0LG4pe1widXNlIHN0cmljdFwiO3ZhciBpLGE9dGhpcyYmdGhpcy5fX2V4dGVuZHN8fChpPWZ1bmN0aW9uKGUsdCl7cmV0dXJuKGk9T2JqZWN0LnNldFByb3RvdHlwZU9mfHx7X19wcm90b19fOltdfWluc3RhbmNlb2YgQXJyYXkmJmZ1bmN0aW9uKGUsdCl7ZS5fX3Byb3RvX189dH18fGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuIGluIHQpdC5oYXNPd25Qcm9wZXJ0eShuKSYmKGVbbl09dFtuXSl9KShlLHQpfSxmdW5jdGlvbihlLHQpe2Z1bmN0aW9uIG4oKXt0aGlzLmNvbnN0cnVjdG9yPWV9aShlLHQpLGUucHJvdG90eXBlPW51bGw9PT10P09iamVjdC5jcmVhdGUodCk6KG4ucHJvdG90eXBlPXQucHJvdG90eXBlLG5ldyBuKX0pLHI9dGhpcyYmdGhpcy5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKGEscil7ZnVuY3Rpb24gbyhlKXt0cnl7YyhpLm5leHQoZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2MoaS50aHJvdyhlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gYyhlKXtlLmRvbmU/YShlLnZhbHVlKTpuZXcgbihmdW5jdGlvbih0KXt0KGUudmFsdWUpfSkudGhlbihvLHMpfWMoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfSxvPXRoaXMmJnRoaXMuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxhLHIsbz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZhWzBdKXRocm93IGFbMV07cmV0dXJuIGFbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcj17bmV4dDpzKDApLHRocm93OnMoMSkscmV0dXJuOnMoMil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHJbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscjtmdW5jdGlvbiBzKHIpe3JldHVybiBmdW5jdGlvbihzKXtyZXR1cm4gZnVuY3Rpb24ocil7aWYobil0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO287KXRyeXtpZihuPTEsaSYmKGE9MiZyWzBdP2kucmV0dXJuOnJbMF0/aS50aHJvd3x8KChhPWkucmV0dXJuKSYmYS5jYWxsKGkpLDApOmkubmV4dCkmJiEoYT1hLmNhbGwoaSxyWzFdKSkuZG9uZSlyZXR1cm4gYTtzd2l0Y2goaT0wLGEmJihyPVsyJnJbMF0sYS52YWx1ZV0pLHJbMF0pe2Nhc2UgMDpjYXNlIDE6YT1yO2JyZWFrO2Nhc2UgNDpyZXR1cm4gby5sYWJlbCsrLHt2YWx1ZTpyWzFdLGRvbmU6ITF9O2Nhc2UgNTpvLmxhYmVsKyssaT1yWzFdLHI9WzBdO2NvbnRpbnVlO2Nhc2UgNzpyPW8ub3BzLnBvcCgpLG8udHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoYT0oYT1vLnRyeXMpLmxlbmd0aD4wJiZhW2EubGVuZ3RoLTFdKSYmKDY9PT1yWzBdfHwyPT09clswXSkpe289MDtjb250aW51ZX1pZigzPT09clswXSYmKCFhfHxyWzFdPmFbMF0mJnJbMV08YVszXSkpe28ubGFiZWw9clsxXTticmVha31pZig2PT09clswXSYmby5sYWJlbDxhWzFdKXtvLmxhYmVsPWFbMV0sYT1yO2JyZWFrfWlmKGEmJm8ubGFiZWw8YVsyXSl7by5sYWJlbD1hWzJdLG8ub3BzLnB1c2gocik7YnJlYWt9YVsyXSYmby5vcHMucG9wKCksby50cnlzLnBvcCgpO2NvbnRpbnVlfXI9dC5jYWxsKGUsbyl9Y2F0Y2goZSl7cj1bNixlXSxpPTB9ZmluYWxseXtuPWE9MH1pZig1JnJbMF0pdGhyb3cgclsxXTtyZXR1cm57dmFsdWU6clswXT9yWzFdOnZvaWQgMCxkb25lOiEwfX0oW3Isc10pfX19LHM9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGM9cyhuKDMwKSksZD1uKDMpLHU9cyhuKDApKSxsPW4oOSkscD1uKDEpLGY9bigxMCksbT1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbil7dmFyIGk9ZS5jYWxsKHRoaXMpfHx0aGlzO3JldHVybiBpLl9zdGF0ZT1fLlJFTEFZX1NUQVRFX0lETEUsaS5fb25TdGF0dXM9ZnVuY3Rpb24oZSl7dS5kZWZhdWx0LmRlYnVnKFwiW1wiK2kuY2xpZW50SWQrXCJdIENoYW5uZWxNZWRpYVN0YXR1czogXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGUmJmUuY29tbWFuZCYmKFwib25BdWRpb1BhY2tldFJlY2VpdmVkXCI9PT1lLmNvbW1hbmQmJmkuZW1pdChcImV2ZW50XCIsUy5QQUNLRVRfUkVDRUlWRURfQVVESU9fRlJPTV9TUkMpLFwib25WaWRlb1BhY2tldFJlY2VpdmVkXCI9PT1lLmNvbW1hbmQmJmkuZW1pdChcImV2ZW50XCIsUy5QQUNLRVRfUkVDRUlWRURfVklERU9fRlJPTV9TUkMpLFwib25TcmNUb2tlblByaXZpbGVnZURpZEV4cGlyZVwiPT09ZS5jb21tYW5kJiYoaS5fc3RhdGU9Xy5SRUxBWV9TVEFURV9GQUlMVVJFLGkuZW1pdChcInN0YXRlXCIsXy5SRUxBWV9TVEFURV9GQUlMVVJFLEUuU1JDX1RPS0VOX0VYUElSRUQpKSxcIm9uRGVzdFRva2VuUHJpdmlsZWdlRGlkRXhwaXJlXCI9PT1lLmNvbW1hbmQmJihpLl9zdGF0ZT1fLlJFTEFZX1NUQVRFX0ZBSUxVUkUsaS5lbWl0KFwic3RhdGVcIixfLlJFTEFZX1NUQVRFX0ZBSUxVUkUsRS5ERVNUX1RPS0VOX0VYUElSRUQsZS5jaGFubmVsTmFtZT97Y2FtZTplLmNoYW5uZWxOYW1lfTpudWxsKSkpfSxpLl9vbkNsb3NlPWZ1bmN0aW9uKCl7cmV0dXJuIHIoaSx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG8odGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmlmKHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBDaGFubmVsTWVkaWFTb2NrZXQgb25DbG9zZVwiKSx0aGlzLmVtaXQoXCJldmVudFwiLFMuTkVUV09SS19ESVNDT05ORUNURUQpLHRoaXMuc3RhdGU9Xy5SRUxBWV9TVEFURV9JRExFLCF0aGlzLl9wcmV2Q2hhbm5lbE1lZGlhQ29uZmlnKXJldHVyblszLDRdO3QubGFiZWw9MTtjYXNlIDE6cmV0dXJuIHQudHJ5cy5wdXNoKFsxLDMsLDRdKSxbNCx0aGlzLnN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXkodGhpcy5fcHJldkNoYW5uZWxNZWRpYUNvbmZpZyldO2Nhc2UgMjpyZXR1cm4gdC5zZW50KCksWzMsNF07Y2FzZSAzOnJldHVybihlPXQuc2VudCgpKWluc3RhbmNlb2YgeSYmKGUubWVzc2FnZT09PXYuV1NfQUJPUlR8fGUubWVzc2FnZT09PXYuQVBfUkVRVUVTVF9BQk9SVCk/WzJdOih0aGlzLmVtaXQoXCJzdGF0ZVwiLF8uUkVMQVlfU1RBVEVfRkFJTFVSRSxFLlNFUlZFUl9DT05ORUNUSU9OX0xPU1QpLFszLDRdKTtjYXNlIDQ6cmV0dXJuWzJdfX0pfSl9LGkudG9rZW49dC5hcHBJZCxpLmFwcElkPXQuYXBwSWQsaS5jbmFtZT10LmNuYW1lLGkudWlkPXQudWlkLGkuc2lkPXQuc2lkLGkuY2xpZW50SWQ9bixpfXJldHVybiBhKHQsZSksT2JqZWN0LmRlZmluZVByb3BlcnR5KHQucHJvdG90eXBlLFwic3RhdGVcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX3N0YXRlfSxzZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5fc3RhdGU7dGhpcy5fc3RhdGU9ZSx0IT09ZSYmdGhpcy5lbWl0KFwic3RhdGVcIixlKX0sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITB9KSx0LnByb3RvdHlwZS5zdGFydENoYW5uZWxNZWRpYVJlbGF5PWZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3JldHVybiBvKHRoaXMsZnVuY3Rpb24odCl7c3dpdGNoKHQubGFiZWwpe2Nhc2UgMDppZih0aGlzLnN0YXRlIT09Xy5SRUxBWV9TVEFURV9JRExFKXRocm93IG5ldyB5KHYuQkFEX1NUQVRFKTtyZXR1cm4gdGhpcy5zdGF0ZT1fLlJFTEFZX1NUQVRFX0NPTk5FQ1RJTkcsWzQsdGhpcy5fY29ubmVjdCgpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5OiBjb25uZWN0IHN1Y2Nlc3NcIiksWzQsdGhpcy5fc2VuZFN0YXJ0UmVsYXlNZXNzYWdlKGUpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLHRoaXMuX3ByZXZDaGFubmVsTWVkaWFDb25maWc9ZSxbMl19fSl9KX0sdC5wcm90b3R5cGUudXBkYXRlQ2hhbm5lbE1lZGlhUmVsYXk9ZnVuY3Rpb24oZSl7cmV0dXJuIHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOmlmKHRoaXMuc3RhdGUhPT1fLlJFTEFZX1NUQVRFX1JVTk5JTkcpdGhyb3cgbmV3IHkodi5CQURfU1RBVEUpO3JldHVybls0LHRoaXMuX3NlbmRVcGRhdGVNZXNzYWdlKGUpXTtjYXNlIDE6cmV0dXJuIHQuc2VudCgpLHRoaXMuX3ByZXZDaGFubmVsTWVkaWFDb25maWc9ZSxbMl19fSl9KX0sdC5wcm90b3R5cGUuc3RvcENoYW5uZWxNZWRpYVJlbGF5PWZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcyxmdW5jdGlvbihlKXtzd2l0Y2goZS5sYWJlbCl7Y2FzZSAwOnJldHVybls0LHRoaXMuX3NlbmRTdG9wUmVsYXlNZXNzYWdlKCldO2Nhc2UgMTpyZXR1cm4gZS5zZW50KCksdS5kZWZhdWx0LmRlYnVnKFwiW1wiK3RoaXMuY2xpZW50SWQrXCJdIHN0b3BDaGFubmVsTWVkaWFSZWxheTogc2VuZCBzdG9wIG1lc3NhZ2Ugc3VjY2Vzc1wiKSx0aGlzLnN0YXRlPV8uUkVMQVlfU1RBVEVfSURMRSx0aGlzLmRpc3Bvc2UoKSxbMl19fSl9KX0sdC5wcm90b3R5cGUuZGlzcG9zZT1mdW5jdGlvbigpe3UuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBkaXNwb3NlQ2hhbm5lbE1lZGlhUmVsYXlcIiksdGhpcy5zdGF0ZT1fLlJFTEFZX1NUQVRFX0lETEUsdGhpcy5lbWl0KFwiZGlzcG9zZVwiKSx0aGlzLl9zaWduYWwmJnRoaXMuX3NpZ25hbC5kaXNwb3NlKCksdGhpcy5fcHJldkNoYW5uZWxNZWRpYUNvbmZpZz1udWxsLHRoaXMucmVtb3ZlRXZlbnQoKX0sdC5wcm90b3R5cGUuX3JlcXVlc3RPbmVBUD1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe3ZhciBhPXtjb21tYW5kOlwiY29udmVyZ2VBbGxvY2F0ZUVkZ2VcIixzaWQ6dC5zaWQsYXBwSWQ6dC5hcHBJZCx0b2tlbjpcIlwiLHRzOituZXcgRGF0ZSx2ZXJzaW9uOmQuVkVSU0lPTixjbmFtZTp0LmNuYW1lLHVpZDp0LnVpZCtcIlwiLHNlcToxLHJlcXVlc3RJZDoxfSxyPXtzZXJ2aWNlX25hbWU6XCJ0ZWxlX2NoYW5uZWxcIixqc29uX2JvZHk6SlNPTi5zdHJpbmdpZnkoYSl9LG89XCJodHRwczovL1wiK2U7bC5wb3N0KG8scixmdW5jdGlvbihlKXt2YXIgdD1udWxsLGE9bnVsbDt0cnl7dD1KU09OLnBhcnNlKGUpfWNhdGNoKGUpe2kobmV3IHkodi5BUF9KU09OX1BBUlNFX0VSUk9SLGUpKX0wIT09dC5jb2RlJiZpKG5ldyB5KHYuQVBfUkVRVUVTVF9FUlJPUix0KSk7dHJ5e2E9SlNPTi5wYXJzZSh0Lmpzb25fYm9keSl9Y2F0Y2goZSl7aShuZXcgeSh2LkFQX0pTT05fUEFSU0VfRVJST1IsZSkpfTIwMCE9PWEuY29kZSYmaShuZXcgeSh2LkFQX1JFUVVFU1RfRVJST1IsYSkpLGEuc2VydmVycz9uKGEuc2VydmVycyk6aShuZXcgeSh2LkFQX0pTT05fUEFSU0VfRVJST1IsYSkpfSxmdW5jdGlvbihlKXtyZXR1cm4gaShlKX0se1wiWC1QYWNrZXQtU2VydmljZS1UeXBlXCI6MCxcIlgtUGFja2V0LVVSSVwiOjYxfSl9KX0sdC5wcm90b3R5cGUuX3JlcXVlc3RBUD1mdW5jdGlvbigpe3ZhciBlPXRoaXMsdD1kLmdldFBhcmFtZXRlcihcIlVBUF9BUFwiKTtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixpKXtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aShuZXcgeSh2LkFQX1JFUVVFU1RfVElNRU9VVCkpfSwzZTMpLGUub24oXCJkaXNwb3NlXCIsZnVuY3Rpb24oKXtpKG5ldyB5KHYuQVBfUkVRVUVTVF9BQk9SVCkpfSksdC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QrPVwiL2FwaS92MVwiLGUuX3JlcXVlc3RPbmVBUCh0KS50aGVuKGZ1bmN0aW9uKGkpe3UuZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5IHJlcXVlc3QgQVAgXCIrdCtcIiBzdWNjZXNzOiBcIitKU09OLnN0cmluZ2lmeShpKSk7dmFyIGE9aVswXSxyPVwid3NzOi8vXCIrYS5hZGRyZXNzLnJlcGxhY2UoL1xcLi9nLFwiLVwiKStcIi5lZGdlLmFnb3JhLmlvOlwiK2Eud3NzO24ocil9KS5jYXRjaChmdW5jdGlvbihuKXt1LmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheSByZXF1ZXN0IEFQIFwiK3QrXCIgZmFpbGVkOiBcIitKU09OLnN0cmluZ2lmeShuKSl9KX0pfSl9LHQucHJvdG90eXBlLl9jb25uZWN0V2Vic29ja2V0PWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLl9zaWduYWw9bmV3IEkodGhpcy5hcHBJZCx0aGlzLmNuYW1lLHRoaXMudWlkLHRoaXMuc2lkKSx0aGlzLl9zaWduYWwuY29ubmVjdChlKX0sdC5wcm90b3R5cGUuX2Nvbm5lY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gcih0aGlzLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgZTtyZXR1cm4gbyh0aGlzLGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cmV0dXJuWzQsdGhpcy5fcmVxdWVzdEFQKCldO2Nhc2UgMTpyZXR1cm4gZT10LnNlbnQoKSxbNCx0aGlzLl9jb25uZWN0V2Vic29ja2V0KGUpXTtjYXNlIDI6cmV0dXJuIHQuc2VudCgpLHRoaXMuX3NpZ25hbC5vbihcImNsb3NlXCIsdGhpcy5fb25DbG9zZS5iaW5kKHRoaXMpKSx0aGlzLl9zaWduYWwub24oXCJzdGF0dXNcIix0aGlzLl9vblN0YXR1cy5iaW5kKHRoaXMpKSx0aGlzLmVtaXQoXCJldmVudFwiLFMuTkVUV09SS19DT05ORUNURUQpLFsyXX19KX0pfSx0LnByb3RvdHlwZS5fc2VuZFN0YXJ0UmVsYXlNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciB0LG4saSxhLHIscztyZXR1cm4gbyh0aGlzLGZ1bmN0aW9uKG8pe3N3aXRjaChvLmxhYmVsKXtjYXNlIDA6cmV0dXJuIHRoaXMuX2NoZWNrU2lnbmFsKCksdD10aGlzLl9nZW5NZXNzYWdlKGguU3RvcFBhY2tldFRyYW5zZmVyKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdCh0KV07Y2FzZSAxOnJldHVybiBvLnNlbnQoKSxbNCx0aGlzLl9zaWduYWwud2FpdFN0YXR1cyhcIk5vcm1hbCBRdWl0XCIpXTtjYXNlIDI6cmV0dXJuIG8uc2VudCgpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5OiBTdG9wUGFja2V0VHJhbnNmZXIgc3VjY2Vzc1wiKSxuPXRoaXMuX2dlbk1lc3NhZ2UoaC5TZXRTZGtQcm9maWxlLGUpLFs0LHRoaXMuX3NpZ25hbC5yZXF1ZXN0KG4pXTtjYXNlIDM6cmV0dXJuIG8uc2VudCgpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5OiBTZXRTZGtQcm9maWxlIHN1Y2Nlc3NcIiksaT10aGlzLl9nZW5NZXNzYWdlKGguU2V0U291cmNlQ2hhbm5lbCxlKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdChpKV07Y2FzZSA0OnJldHVybiBvLnNlbnQoKSxbNCx0aGlzLl9zaWduYWwud2FpdFN0YXR1cyhcIlNldFNvdXJjZUNoYW5uZWxTdGF0dXNcIildO2Nhc2UgNTpyZXR1cm4gby5zZW50KCksdGhpcy5lbWl0KFwiZXZlbnRcIixTLlBBQ0tFVF9KT0lORURfU1JDX0NIQU5ORUwpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5OiBTZXRTb3VyY2VDaGFubmVsIHN1Y2Nlc3NcIiksYT10aGlzLl9nZW5NZXNzYWdlKGguU2V0U291cmNlVXNlcklkLGUpLFs0LHRoaXMuX3NpZ25hbC5yZXF1ZXN0KGEpXTtjYXNlIDY6cmV0dXJuIG8uc2VudCgpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5OiBTZXRTb3VyY2VVc2VySWQgc3VjY2Vzc1wiKSxyPXRoaXMuX2dlbk1lc3NhZ2UoaC5TZXREZXN0Q2hhbm5lbCxlKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdChyKV07Y2FzZSA3OnJldHVybiBvLnNlbnQoKSxbNCx0aGlzLl9zaWduYWwud2FpdFN0YXR1cyhcIlNldERlc3RDaGFubmVsU3RhdHVzXCIpXTtjYXNlIDg6cmV0dXJuIG8uc2VudCgpLHRoaXMuZW1pdChcImV2ZW50XCIsUy5QQUNLRVRfSk9JTkVEX0RFU1RfQ0hBTk5FTCksdS5kZWZhdWx0LmRlYnVnKFwiW1wiK3RoaXMuY2xpZW50SWQrXCJdIHN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXk6IFNldERlc3RDaGFubmVsIHN1Y2Nlc3NcIikscz10aGlzLl9nZW5NZXNzYWdlKGguU3RhcnRQYWNrZXRUcmFuc2ZlcixlKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdChzKV07Y2FzZSA5OnJldHVybiBvLnNlbnQoKSx0aGlzLmVtaXQoXCJldmVudFwiLFMuUEFDS0VUX1NFTlRfVE9fREVTVF9DSEFOTkVMKSx0aGlzLnN0YXRlPV8uUkVMQVlfU1RBVEVfUlVOTklORyx1LmRlZmF1bHQuZGVidWcoXCJbXCIrdGhpcy5jbGllbnRJZCtcIl0gc3RhcnRDaGFubmVsTWVkaWFSZWxheTogU3RhcnRQYWNrZXRUcmFuc2ZlciBzdWNjZXNzXCIpLFsyXX19KX0pfSx0LnByb3RvdHlwZS5fc2VuZFJlY29ubmVjdE1lc3NhZ2U9ZnVuY3Rpb24oZSl7cmV0dXJuIHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIG8odGhpcyxmdW5jdGlvbihuKXtzd2l0Y2gobi5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGVja1NpZ25hbCgpLHQ9dGhpcy5fZ2VuTWVzc2FnZShoLlJlY29ubmVjdCxlKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdCh0KV07Y2FzZSAxOnJldHVybiBuLnNlbnQoKSxbMl19fSl9KX0sdC5wcm90b3R5cGUuX3NlbmRVcGRhdGVNZXNzYWdlPWZ1bmN0aW9uKGUpe3JldHVybiByKHRoaXMsdm9pZCAwLHZvaWQgMCxmdW5jdGlvbigpe3ZhciB0O3JldHVybiBvKHRoaXMsZnVuY3Rpb24obil7c3dpdGNoKG4ubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdGhpcy5fY2hlY2tTaWduYWwoKSx0PXRoaXMuX2dlbk1lc3NhZ2UoaC5VcGRhdGVEZXN0Q2hhbm5lbCxlKSxbNCx0aGlzLl9zaWduYWwucmVxdWVzdCh0KV07Y2FzZSAxOnJldHVybiBuLnNlbnQoKSx0aGlzLmVtaXQoXCJldmVudFwiLFMuUEFDS0VUX1VQREFURV9ERVNUX0NIQU5ORUwpLHUuZGVmYXVsdC5kZWJ1ZyhcIltcIit0aGlzLmNsaWVudElkK1wiXSBzZW5kVXBkYXRlTWVzc2FnZTogVXBkYXRlRGVzdENoYW5uZWwgc3VjY2Vzc1wiKSxbMl19fSl9KX0sdC5wcm90b3R5cGUuX3NlbmRTdG9wUmVsYXlNZXNzYWdlPWZ1bmN0aW9uKCl7cmV0dXJuIHIodGhpcyx2b2lkIDAsdm9pZCAwLGZ1bmN0aW9uKCl7dmFyIGU7cmV0dXJuIG8odGhpcyxmdW5jdGlvbih0KXtzd2l0Y2godC5sYWJlbCl7Y2FzZSAwOnJldHVybiB0aGlzLl9jaGVja1NpZ25hbCgpLGU9dGhpcy5fZ2VuTWVzc2FnZShoLlN0b3BQYWNrZXRUcmFuc2ZlciksWzQsdGhpcy5fc2lnbmFsLnJlcXVlc3QoZSldO2Nhc2UgMTpyZXR1cm4gdC5zZW50KCksdS5kZWZhdWx0LmRlYnVnKFwiW1wiK3RoaXMuY2xpZW50SWQrXCJdIHNlbmRTdG9wUmVsYXlNZXNzYWdlOiBTdG9wUGFja2V0VHJhbnNmZXIgc3VjY2Vzc1wiKSxbMl19fSl9KX0sdC5wcm90b3R5cGUuX2dlbk1lc3NhZ2U9ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLGk9W10sYT1bXSxyPVtdLG89e2FwcElkOnRoaXMuYXBwSWQsY25hbWU6dGhpcy5jbmFtZSx1aWQ6dGhpcy51aWQrXCJcIixzZGtWZXJzaW9uOmQuVkVSU0lPTixzaWQ6dGhpcy5zaWQsdHM6K25ldyBEYXRlLHJlcXVlc3RJZDowLHNlcTowLGFsbG9jYXRlOiEwLGNsaWVudFJlcXVlc3Q6e319LHM9bnVsbDtzd2l0Y2goZSl7Y2FzZSBoLlNldFNka1Byb2ZpbGU6cmV0dXJuIG8uY2xpZW50UmVxdWVzdD17Y29tbWFuZDpcIlNldFNka1Byb2ZpbGVcIix0eXBlOlwibXVsdGlfY2hhbm5lbFwifSxvO2Nhc2UgaC5TZXRTb3VyY2VDaGFubmVsOnJldHVybiBzPXQuZ2V0U3JjQ2hhbm5lbE1lZGlhSW5mbygpLG8uY2xpZW50UmVxdWVzdD17Y29tbWFuZDpcIlNldFNvdXJjZUNoYW5uZWxcIix1aWQ6cy51aWQrXCJcIixjaGFubmVsTmFtZTpzLmNoYW5uZWxOYW1lLHRva2VuOnMudG9rZW58fHRoaXMuYXBwSWR9LG87Y2FzZSBoLlNldFNvdXJjZVVzZXJJZDpyZXR1cm4gcz10LmdldFNyY0NoYW5uZWxNZWRpYUluZm8oKSxvLmNsaWVudFJlcXVlc3Q9e2NvbW1hbmQ6XCJTZXRTb3VyY2VVc2VySWRcIix1aWQ6dGhpcy51aWQrXCJcIn0sbztjYXNlIGguU2V0RGVzdENoYW5uZWw6cmV0dXJuIHQuZ2V0RGVzdENoYW5uZWxNZWRpYUluZm9zKCkuZm9yRWFjaChmdW5jdGlvbihlKXtpLnB1c2goZS5jaGFubmVsTmFtZSksYS5wdXNoKGUudWlkK1wiXCIpLHIucHVzaChlLnRva2VufHxuLmFwcElkKX0pLG8uY2xpZW50UmVxdWVzdD17Y29tbWFuZDpcIlNldERlc3RDaGFubmVsXCIsY2hhbm5lbE5hbWU6aSx1aWQ6YSx0b2tlbjpyfSxvO2Nhc2UgaC5TdGFydFBhY2tldFRyYW5zZmVyOnJldHVybiBvLmNsaWVudFJlcXVlc3Q9e2NvbW1hbmQ6XCJTdGFydFBhY2tldFRyYW5zZmVyXCJ9LG87Y2FzZSBoLlJlY29ubmVjdDpyZXR1cm4gby5jbGllbnRSZXF1ZXN0PXtjb21tYW5kOlwiUmVjb25uZWN0XCJ9LG87Y2FzZSBoLlN0b3BQYWNrZXRUcmFuc2ZlcjpyZXR1cm4gby5jbGllbnRSZXF1ZXN0PXtjb21tYW5kOlwiU3RvcFBhY2tldFRyYW5zZmVyXCJ9LG87Y2FzZSBoLlVwZGF0ZURlc3RDaGFubmVsOnJldHVybiB0LmdldERlc3RDaGFubmVsTWVkaWFJbmZvcygpLmZvckVhY2goZnVuY3Rpb24oZSl7aS5wdXNoKGUuY2hhbm5lbE5hbWUpLGEucHVzaChlLnVpZCtcIlwiKSxyLnB1c2goZS50b2tlbnx8bi5hcHBJZCl9KSxvLmNsaWVudFJlcXVlc3Q9e2NvbW1hbmQ6XCJVcGRhdGVEZXN0Q2hhbm5lbFwiLGNoYW5uZWxOYW1lOmksdWlkOmEsdG9rZW46cn0sb319LHQucHJvdG90eXBlLl9jaGVja1NpZ25hbD1mdW5jdGlvbigpe2lmKCF0aGlzLl9zaWduYWx8fCF0aGlzLl9zaWduYWwuaXNDb25uZWN0KCkpdGhyb3cgbmV3IHkodi5XU19ESVNDT05ORUNURUQpfSx0fShjLmRlZmF1bHQpO3QuZGVmYXVsdD1tO3ZhciBnPWZ1bmN0aW9uKCl7ZnVuY3Rpb24gZSgpe3RoaXMuZGVzdENoYW5uZWxNZWRpYUluZm9zPW5ldyBNYXB9cmV0dXJuIGUucHJvdG90eXBlLnNldFNyY0NoYW5uZWxJbmZvPWZ1bmN0aW9uKGUpe3AuY2hlY2tWYWxpZE9iamVjdChlLFwic3JjSW5mb1wiKTt2YXIgdD1lLnVpZCxuPWUuY2hhbm5lbE5hbWUsaT1lLnRva2VuO2lmKGkmJiFwLmlzVmFsaWRUb2tlbihpKSl0aHJvd1wiSW52YWxpZCB0b2tlbiBpbiBTcmNDaGFubmVsSW5mb1wiO2lmKCFwLmlzVmFsaWRDaGFubmVsTmFtZShuKSl0aHJvd1wiSW52YWxpZCBjaGFubmVsTmFtZSBpbiBTcmNDaGFubmVsSW5mb1wiO2lmKCFmLmlzMzJVaW50KHQpKXRocm93XCJJbnZhbGlkIHVpZCBpbiBTcmNDaGFubmVsSW5mb1wiO3RoaXMuc3JjQ2hhbm5lbE1lZGlhSW5mbz1lfSxlLnByb3RvdHlwZS5zZXREZXN0Q2hhbm5lbEluZm89ZnVuY3Rpb24oZSx0KXtpZighcC5pc1ZhbGlkQ2hhbm5lbE5hbWUoZSkpdGhyb3dcIkludmFsaWQgY2hhbm5lbE5hbWUgaW4gRGVzdENoYW5uZWxJbmZvXCI7cC5jaGVja1ZhbGlkT2JqZWN0KHQsXCJkZXN0SW5mb1wiKTt2YXIgbj10LnVpZCxpPXQudG9rZW4sYT10LmNoYW5uZWxOYW1lO2lmKGkmJiFwLmlzVmFsaWRUb2tlbihpKSl0aHJvd1wiSW52YWxpZCB0b2tlbiBpbiBEZXN0Q2hhbm5lbEluZm9cIjtpZighcC5pc1ZhbGlkQ2hhbm5lbE5hbWUoYSkpdGhyb3dcIkludmFsaWQgY2hhbm5lbE5hbWUgaW4gRGVzdENoYW5uZWxJbmZvXCI7aWYoIWYuaXMzMlVpbnQobikpdGhyb3dcIkludmFsaWQgdWlkIGluIERlc3RDaGFubmVsSW5mb1wiO3RoaXMuZGVzdENoYW5uZWxNZWRpYUluZm9zLnNldChlLHQpfSxlLnByb3RvdHlwZS5yZW1vdmVEZXN0Q2hhbm5lbEluZm89ZnVuY3Rpb24oZSl7aWYoIXAuaXNWYWxpZENoYW5uZWxOYW1lKGUpKXRocm93XCJJbnZhbGlkIGNoYW5uZWxOYW1lIHdoZW4gaW52b2tlIHJlbW92ZURlc3RDaGFubmVsSW5mb1wiO3RoaXMuZGVzdENoYW5uZWxNZWRpYUluZm9zLmRlbGV0ZShlKX0sZS5wcm90b3R5cGUuZ2V0U3JjQ2hhbm5lbE1lZGlhSW5mbz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNyY0NoYW5uZWxNZWRpYUluZm99LGUucHJvdG90eXBlLmdldERlc3RDaGFubmVsTWVkaWFJbmZvcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmRlc3RDaGFubmVsTWVkaWFJbmZvc30sZX0oKTt0LkNoYW5uZWxNZWRpYVJlbGF5Q29uZmlndXJhdGlvbj1nO3ZhciB2LGgsUyxfLEUsST1mdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQsbixpLGEpe3ZhciByPWUuY2FsbCh0aGlzKXx8dGhpcztyZXR1cm4gci5fb25PcGVuPWZ1bmN0aW9uKCl7ci5lbWl0KFwib3BlblwiKX0sci5fb25DbG9zZT1mdW5jdGlvbihlKXtyLmVtaXQoXCJjbG9zZVwiKSxyLmRpc3Bvc2UoKX0sci5fb25NZXNzYWdlPWZ1bmN0aW9uKGUpe3ZhciB0PUpTT04ucGFyc2UoZS5kYXRhKTtpZighdHx8XCJzZXJ2ZXJSZXNwb25zZVwiIT09dC5jb21tYW5kfHwhdC5yZXF1ZXN0SWQpcmV0dXJuIHQmJlwic2VydmVyU3RhdHVzXCI9PT10LmNvbW1hbmQmJnQuc2VydmVyU3RhdHVzJiZ0LnNlcnZlclN0YXR1cy5jb21tYW5kPyhyLmVtaXQoXCJzdGF0dXNcIix0LnNlcnZlclN0YXR1cyksdm9pZCByLmVtaXQodC5zZXJ2ZXJTdGF0dXMuY29tbWFuZCx0LnNlcnZlclN0YXR1cykpOnZvaWQgMDtyLmVtaXQoXCJyZXFfXCIrdC5yZXF1ZXN0SWQsdCl9LHIuX3JlcXVlc3RJZD0xLHIuYXBwSWQ9dCxyLmNuYW1lPW4sci51aWQ9aSxyLnNpZD1hLHJ9cmV0dXJuIGEodCxlKSx0LnByb3RvdHlwZS5pc0Nvbm5lY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fd3MmJnRoaXMuX3dzLnJlYWR5U3RhdGU9PT1XZWJTb2NrZXQuT1BFTn0sdC5wcm90b3R5cGUuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSl7aWYoIXRoaXMuX3dzfHx0aGlzLl93cy5yZWFkeVN0YXRlIT09V2ViU29ja2V0Lk9QRU4pdGhyb3cgbmV3IHkodi5XU19ESVNDT05ORUNURUQpO3ZhciB0PXRoaXMuX3JlcXVlc3RJZCsrO3JldHVybiBlLnJlcXVlc3RJZD10LGUuc2VxPXQsdGhpcy5fd3Muc2VuZChKU09OLnN0cmluZ2lmeShlKSksdH0sdC5wcm90b3R5cGUud2FpdFN0YXR1cz1mdW5jdGlvbihlKXt2YXIgdD10aGlzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihuLGkpe3ZhciBhPXdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aShuZXcgeSh2LldBSVRfU1RBVFVTX1RJTUVPVVQsZSkpfSw1ZTMpO3Qub25jZShlLGZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dChhKSx0LnN0YXRlJiYwIT09dC5zdGF0ZT9pKG5ldyB5KHYuV0FJVF9TVEFUVVNfRVJST1IsZSkpOm4oKX0pLHQub25jZShcImRpc3Bvc2VcIixmdW5jdGlvbigpe2NsZWFyVGltZW91dChhKSxpKG5ldyB5KHYuV1NfQUJPUlQpKX0pfSl9LHQucHJvdG90eXBlLnJlcXVlc3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24obixpKXt2YXIgYT10LnNlbmRNZXNzYWdlKGUpLHI9d2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LnJlbW92ZUFsbExpc3RlbmVycyhcInJlcV9cIithKSxpKG5ldyB5KHYuUkVRVUVTVF9USU1FT1VUKSl9LDNlMyk7dC5vbmNlKFwicmVxX1wiK2EsZnVuY3Rpb24oZSl7Y2xlYXJUaW1lb3V0KHIpLGUmJjIwMD09PWUuY29kZT9uKGUpOmkobmV3IHkodi5SRVFVRVNUX0ZBSUxFRCxlKSl9KSx0Lm9uY2UoXCJkaXNwb3NlXCIsZnVuY3Rpb24oKXtjbGVhclRpbWVvdXQociksaShuZXcgeSh2LldTX0FCT1JUKSl9KX0pfSx0LnByb3RvdHlwZS5jb25uZWN0PWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXM7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4saSl7dC5fd3M9bmV3IFdlYlNvY2tldChlKSx0Ll93cy5vbm9wZW49ZnVuY3Rpb24oKXt0Ll9vbk9wZW4oKSx0Ll9wcnZVcmw9ZSx0Ll93cy5vbm1lc3NhZ2U9dC5fb25NZXNzYWdlLHQuX3dzLm9uY2xvc2U9dC5fb25DbG9zZSx0Ll9zdGFydEhlYXJ0QmVhdENoZWNrKCksbigpfSx0Ll93cy5vbmNsb3NlPWZ1bmN0aW9uKGUpe3QuX3dzPW51bGwsaShuZXcgeSh2LkNPTk5FQ1RfRkFJTEVELFwid2Vic29ja2V0IGVycm9yIGNvZGU6IFwiK2UuY29kZSkpfSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5fd3MmJnQuX3dzLnJlYWR5U3RhdGUhPT1XZWJTb2NrZXQuT1BFTiYmKHQuX3dzLm9ub3Blbj1udWxsLHQuX3dzLm9uY2xvc2U9bnVsbCx0Ll93cy5jbG9zZSgpLHQuX3dzPW51bGwsaShuZXcgeSh2LkNPTk5FQ1RfVElNRU9VVCkpKX0sNWUzKSx0Lm9uY2UoXCJkaXNwb3NlXCIsZnVuY3Rpb24oKXtpKG5ldyB5KHYuV1NfQUJPUlQpKX0pfSl9LHQucHJvdG90eXBlLmRpc3Bvc2U9ZnVuY3Rpb24oKXt0aGlzLl9jbGVhckhlYXJ0QmVhdENoZWNrKCksdGhpcy5lbWl0KFwiZGlzcG9zZVwiKSx0aGlzLnJlbW92ZUV2ZW50KCksdGhpcy5fd3MmJih0aGlzLl93cy5vbm9wZW49bnVsbCx0aGlzLl93cy5vbmNsb3NlPW51bGwsdGhpcy5fd3Mub25tZXNzYWdlPW51bGwsdGhpcy5fd3MuY2xvc2UoKSksdGhpcy5fd3M9bnVsbH0sdC5wcm90b3R5cGUuX3NlbmRQaW5nPWZ1bmN0aW9uKGUpe2lmKCF0aGlzLl93c3x8dGhpcy5fd3MucmVhZHlTdGF0ZSE9PVdlYlNvY2tldC5PUEVOKXRocm93IG5ldyB5KHYuV1NfRElTQ09OTkVDVEVEKTt2YXIgdD10aGlzLl9yZXF1ZXN0SWQrKztyZXR1cm4gZS5yZXF1ZXN0SWQ9dCx0aGlzLl93cy5zZW5kKEpTT04uc3RyaW5naWZ5KGUpKSx0fSx0LnByb3RvdHlwZS5fc3RhcnRIZWFydEJlYXRDaGVjaz1mdW5jdGlvbigpe3ZhciBlPXRoaXM7dGhpcy5faGVhcnRCZWF0VGltZXI9d2luZG93LnNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5fc2VuZFBpbmcoe2NvbW1hbmQ6XCJwaW5nXCIsYXBwSWQ6ZS5hcHBJZCxjbmFtZTplLmNuYW1lLHVpZDplLnVpZCtcIlwiLHNpZDplLnNpZCx0czorbmV3IERhdGUscmVxdWVzdElkOjB9KX0sM2UzKX0sdC5wcm90b3R5cGUuX2NsZWFySGVhcnRCZWF0Q2hlY2s9ZnVuY3Rpb24oKXt3aW5kb3cuY2xlYXJJbnRlcnZhbCh0aGlzLl9oZWFydEJlYXRUaW1lcil9LHR9KGMuZGVmYXVsdCkseT1mdW5jdGlvbigpe3JldHVybiBmdW5jdGlvbihlLHQsbil7dm9pZCAwPT09ZSYmKGU9XCJcIiksdGhpcy5jb2RlPW4sdGhpcy5kYXRhPXQsdGhpcy5tZXNzYWdlPWV9fSgpO3QuQ2hhbm5lbE1lZGlhRXJyb3I9eSxmdW5jdGlvbihlKXtlLkNPTk5FQ1RfRkFJTEVEPVwiY29ubmVjdCBmYWlsZWRcIixlLkNPTk5FQ1RfVElNRU9VVD1cImNvbm5lY3QgdGltZW91dFwiLGUuV1NfRElTQ09OTkVDVEVEPVwid2Vic29ja2V0IGRpc2Nvbm5lY3RlZFwiLGUuUkVRVUVTVF9USU1FT1VUPVwicmVxdWVzdCB0aW1lb3V0XCIsZS5SRVFVRVNUX0ZBSUxFRD1cInJlcXVlc3QgZmFpbGVkXCIsZS5XQUlUX1NUQVRVU19USU1FT1VUPVwid2FpdCBzdGF0dXMgdGltZW91dFwiLGUuV0FJVF9TVEFUVVNfRVJST1I9XCJ3YWl0IHN0YXR1cyBlcnJvclwiLGUuQkFEX1NUQVRFPVwiYmFkIHN0YXRlXCIsZS5XU19BQk9SVD1cIndzIGFib3J0XCIsZS5BUF9SRVFVRVNUX1RJTUVPVVQ9XCJBUCByZXF1ZXN0IHRpbWVvdXRcIixlLkFQX0pTT05fUEFSU0VfRVJST1I9XCJBUCBqc29uIHBhcnNlIGVycm9yXCIsZS5BUF9SRVFVRVNUX0VSUk9SPVwiQVAgcmVxdWVzdCBlcnJvclwiLGUuQVBfUkVRVUVTVF9BQk9SVD1cIkFQIHJlcXVlc3QgYWJvcnRcIn0odj10LkNIQU5ORUxfTUVESUFfRVJST1J8fCh0LkNIQU5ORUxfTUVESUFfRVJST1I9e30pKSxmdW5jdGlvbihlKXtlW2UuU2V0U2RrUHJvZmlsZT0wXT1cIlNldFNka1Byb2ZpbGVcIixlW2UuU2V0U291cmNlQ2hhbm5lbD0xXT1cIlNldFNvdXJjZUNoYW5uZWxcIixlW2UuU2V0U291cmNlVXNlcklkPTJdPVwiU2V0U291cmNlVXNlcklkXCIsZVtlLlNldERlc3RDaGFubmVsPTNdPVwiU2V0RGVzdENoYW5uZWxcIixlW2UuU3RhcnRQYWNrZXRUcmFuc2Zlcj00XT1cIlN0YXJ0UGFja2V0VHJhbnNmZXJcIixlW2UuU3RvcFBhY2tldFRyYW5zZmVyPTVdPVwiU3RvcFBhY2tldFRyYW5zZmVyXCIsZVtlLlVwZGF0ZURlc3RDaGFubmVsPTZdPVwiVXBkYXRlRGVzdENoYW5uZWxcIixlW2UuUmVjb25uZWN0PTddPVwiUmVjb25uZWN0XCIsZVtlLlNldFZpZGVvUHJvZmlsZT04XT1cIlNldFZpZGVvUHJvZmlsZVwifShofHwoaD17fSkpLGZ1bmN0aW9uKGUpe2VbZS5ORVRXT1JLX0RJU0NPTk5FQ1RFRD0wXT1cIk5FVFdPUktfRElTQ09OTkVDVEVEXCIsZVtlLk5FVFdPUktfQ09OTkVDVEVEPTFdPVwiTkVUV09SS19DT05ORUNURURcIixlW2UuUEFDS0VUX0pPSU5FRF9TUkNfQ0hBTk5FTD0yXT1cIlBBQ0tFVF9KT0lORURfU1JDX0NIQU5ORUxcIixlW2UuUEFDS0VUX0pPSU5FRF9ERVNUX0NIQU5ORUw9M109XCJQQUNLRVRfSk9JTkVEX0RFU1RfQ0hBTk5FTFwiLGVbZS5QQUNLRVRfU0VOVF9UT19ERVNUX0NIQU5ORUw9NF09XCJQQUNLRVRfU0VOVF9UT19ERVNUX0NIQU5ORUxcIixlW2UuUEFDS0VUX1JFQ0VJVkVEX1ZJREVPX0ZST01fU1JDPTVdPVwiUEFDS0VUX1JFQ0VJVkVEX1ZJREVPX0ZST01fU1JDXCIsZVtlLlBBQ0tFVF9SRUNFSVZFRF9BVURJT19GUk9NX1NSQz02XT1cIlBBQ0tFVF9SRUNFSVZFRF9BVURJT19GUk9NX1NSQ1wiLGVbZS5QQUNLRVRfVVBEQVRFX0RFU1RfQ0hBTk5FTD03XT1cIlBBQ0tFVF9VUERBVEVfREVTVF9DSEFOTkVMXCIsZVtlLlBBQ0tFVF9VUERBVEVfREVTVF9DSEFOTkVMX1JFRlVTRUQ9OF09XCJQQUNLRVRfVVBEQVRFX0RFU1RfQ0hBTk5FTF9SRUZVU0VEXCIsZVtlLlBBQ0tFVF9VUERBVEVfREVTVF9DSEFOTkVMX05PVF9DSEFOR0U9OV09XCJQQUNLRVRfVVBEQVRFX0RFU1RfQ0hBTk5FTF9OT1RfQ0hBTkdFXCJ9KFM9dC5DSEFOTkVMX01FRElBX1JFTEFZX0VWRU5UfHwodC5DSEFOTkVMX01FRElBX1JFTEFZX0VWRU5UPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlJFTEFZX1NUQVRFX0lETEU9MF09XCJSRUxBWV9TVEFURV9JRExFXCIsZVtlLlJFTEFZX1NUQVRFX0NPTk5FQ1RJTkc9MV09XCJSRUxBWV9TVEFURV9DT05ORUNUSU5HXCIsZVtlLlJFTEFZX1NUQVRFX1JVTk5JTkc9Ml09XCJSRUxBWV9TVEFURV9SVU5OSU5HXCIsZVtlLlJFTEFZX1NUQVRFX0ZBSUxVUkU9M109XCJSRUxBWV9TVEFURV9GQUlMVVJFXCJ9KF89dC5DSEFOTkVMX01FRElBX1JFTEFZX1NUQVRFfHwodC5DSEFOTkVMX01FRElBX1JFTEFZX1NUQVRFPXt9KSksZnVuY3Rpb24oZSl7ZVtlLlJFTEFZX09LPTBdPVwiUkVMQVlfT0tcIixlW2UuU0VSVkVSX0VSUk9SX1JFU1BPTlNFPTFdPVwiU0VSVkVSX0VSUk9SX1JFU1BPTlNFXCIsZVtlLlNFUlZFUl9OT19SRVNQT05TRT0yXT1cIlNFUlZFUl9OT19SRVNQT05TRVwiLGVbZS5OT19SRVNPVVJDRV9BVkFJTEFCTEU9M109XCJOT19SRVNPVVJDRV9BVkFJTEFCTEVcIixlW2UuRkFJTEVEX0pPSU5fU1JDPTRdPVwiRkFJTEVEX0pPSU5fU1JDXCIsZVtlLkZBSUxFRF9KT0lOX0RFU1Q9NV09XCJGQUlMRURfSk9JTl9ERVNUXCIsZVtlLkZBSUxFRF9QQUNLRVRfUkVDRUlWRURfRlJPTV9TUkM9Nl09XCJGQUlMRURfUEFDS0VUX1JFQ0VJVkVEX0ZST01fU1JDXCIsZVtlLkZBSUxFRF9QQUNLRVRfU0VOVF9UT19ERVNUPTddPVwiRkFJTEVEX1BBQ0tFVF9TRU5UX1RPX0RFU1RcIixlW2UuU0VSVkVSX0NPTk5FQ1RJT05fTE9TVD04XT1cIlNFUlZFUl9DT05ORUNUSU9OX0xPU1RcIixlW2UuSU5URVJOQUxfRVJST1I9OV09XCJJTlRFUk5BTF9FUlJPUlwiLGVbZS5TUkNfVE9LRU5fRVhQSVJFRD0xMF09XCJTUkNfVE9LRU5fRVhQSVJFRFwiLGVbZS5ERVNUX1RPS0VOX0VYUElSRUQ9MTFdPVwiREVTVF9UT0tFTl9FWFBJUkVEXCIsZVtlLlJFTEFZX0FMUkVBRFlfU1RBUlQ9MTJdPVwiUkVMQVlfQUxSRUFEWV9TVEFSVFwiLGVbZS5SRUxBWV9OT1RfU1RBUlQ9MTNdPVwiUkVMQVlfTk9UX1NUQVJUXCIsZVtlLk9QRVJBVElPTl9BQk9SVD0xNF09XCJPUEVSQVRJT05fQUJPUlRcIn0oRT10LkNIQU5ORUxfTUVESUFfUkVMQVlfRVJST1J8fCh0LkNIQU5ORUxfTUVESUFfUkVMQVlfRVJST1I9e30pKX0sZnVuY3Rpb24oZSx0KXtmdW5jdGlvbiBuKGUpe3JldHVybihuPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09dHlwZW9mIFN5bWJvbC5pdGVyYXRvcj9mdW5jdGlvbihlKXtyZXR1cm4gdHlwZW9mIGV9OmZ1bmN0aW9uKGUpe3JldHVybiBlJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiBTeW1ib2wmJmUuY29uc3RydWN0b3I9PT1TeW1ib2wmJmUhPT1TeW1ib2wucHJvdG90eXBlP1wic3ltYm9sXCI6dHlwZW9mIGV9KShlKX1mdW5jdGlvbiBpKHQpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmXCJzeW1ib2xcIj09PW4oU3ltYm9sLml0ZXJhdG9yKT9lLmV4cG9ydHM9aT1mdW5jdGlvbihlKXtyZXR1cm4gbihlKX06ZS5leHBvcnRzPWk9ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmZS5jb25zdHJ1Y3Rvcj09PVN5bWJvbCYmZSE9PVN5bWJvbC5wcm90b3R5cGU/XCJzeW1ib2xcIjpuKGUpfSxpKHQpfWUuZXhwb3J0cz1pfSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpLG4uZCh0LFwicG9zdFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHV9KSxuLmQodCxcInNob3VsZFVzZUh0dHBzXCIsZnVuY3Rpb24oKXtyZXR1cm4gbH0pLG4uZCh0LFwiZ2V0SFRUUFNlbmRCeXRlc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIHN9KSxuLmQodCxcImdldEhUVFBSZWN2Qnl0ZXNcIixmdW5jdGlvbigpe3JldHVybiBjfSksbi5kKHQsXCJyZXNldEhUVFBCeWV0c0NvdW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gZH0pO3ZhciBpPW4oMyksYT1uKDEwKSxyPTAsbz0wLHM9ZnVuY3Rpb24oKXtyZXR1cm4gcn0sYz1mdW5jdGlvbigpe3JldHVybiBvfSxkPWZ1bmN0aW9uKCl7cj0wLG89MH0sdT1mdW5jdGlvbihlLHQsbixzLGMpe3ZhciBkPW5ldyBYTUxIdHRwUmVxdWVzdDtpZihkLnRpbWVvdXQ9dC50aW1lb3V0fHxPYmplY3QoaS5nZXRQYXJhbWV0ZXIpKFwiSFRUUF9DT05ORUNUX1RJTUVPVVRcIiksZC5vcGVuKFwiUE9TVFwiLGUsITApLGQuc2V0UmVxdWVzdEhlYWRlcihcIkNvbnRlbnQtdHlwZVwiLFwiYXBwbGljYXRpb24vanNvbjsgY2hhcnNldD11dGYtOFwiKSxjKWZvcih2YXIgdSBpbiBjKVwid2l0aENyZWRlbnRpYWxzXCI9PXU/ZC53aXRoQ3JlZGVudGlhbHM9ITA6ZC5zZXRSZXF1ZXN0SGVhZGVyKHUsY1t1XSk7ZC5vbmxvYWQ9ZnVuY3Rpb24oZSl7bys9T2JqZWN0KGEubGVuZ3RoSW5VdGY4Qnl0ZXMpKGQucmVzcG9uc2VUZXh0KSxuJiZuKGQucmVzcG9uc2VUZXh0KX0sZC5vbmVycm9yPWZ1bmN0aW9uKHQpe3MmJnModCxlKX0sZC5vbnRpbWVvdXQ9ZnVuY3Rpb24odCl7cyYmcyh0LGUpfTt2YXIgbD1KU09OLnN0cmluZ2lmeSh0KTtyKz1PYmplY3QoYS5sZW5ndGhJblV0ZjhCeXRlcykobCksZC5zZW5kKGwpfSxsPWZ1bmN0aW9uKCl7cmV0dXJuXCJodHRwczpcIj09ZG9jdW1lbnQubG9jYXRpb24ucHJvdG9jb2x9fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5yKHQpLG4uZCh0LFwiaXNMaXZlVHJhbnNjb2RpbmdWYWxpZFwiLGZ1bmN0aW9uKCl7cmV0dXJuIHZ9KSxuLmQodCxcImdlbmVyYXRlU2Vzc2lvbklkXCIsZnVuY3Rpb24oKXtyZXR1cm4gZn0pLG4uZCh0LFwiYXVkaW9MZXZlbEhlbHBlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIHB9KSxuLmQodCxcInZzUmVzSGFja1wiLGZ1bmN0aW9uKCl7cmV0dXJuIG19KSxuLmQodCxcImlzMzJVaW50XCIsZnVuY3Rpb24oKXtyZXR1cm4gZ30pLG4uZCh0LFwic2FmZUNhbGxcIixmdW5jdGlvbigpe3JldHVybiBsfSksbi5kKHQsXCJyYW5kb21cIixmdW5jdGlvbigpe3JldHVybiBTfSksbi5kKHQsXCJwb3BCYW5UaXBcIixmdW5jdGlvbigpe3JldHVybiBFfSksbi5kKHQsXCJsZW5ndGhJblV0ZjhCeXRlc1wiLGZ1bmN0aW9uKCl7cmV0dXJuIF99KTt2YXIgaT1uKDgpLGE9bi5uKGkpLHI9big0KSxvPW4oMCkscz1uKDE1KSxjPW4ubihzKSxkPW4oMTQpLHU9bigxMiksbD1mdW5jdGlvbigpe3ZhciBlPWFyZ3VtZW50c1swXTtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiBlKXt2YXIgdD1BcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMsMSk7ZS5hcHBseShudWxsLHQpfX0scD1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hdWRpb0NvbnRleHQ9T2JqZWN0KGQuYSkoKSx0aGlzLnNvdXJjZU5vZGU9ZS5vdFdlYmtpdEF1ZGlvU291cmNlfHx0aGlzLmF1ZGlvQ29udGV4dC5jcmVhdGVNZWRpYVN0cmVhbVNvdXJjZShlKSx0aGlzLmFuYWx5c2VyPXRoaXMuYXVkaW9Db250ZXh0LmNyZWF0ZUFuYWx5c2VyKCksdGhpcy50aW1lRG9tYWluRGF0YT1uZXcgVWludDhBcnJheSh0aGlzLmFuYWx5c2VyLmZyZXF1ZW5jeUJpbkNvdW50KSx0aGlzLnNvdXJjZU5vZGUuY29ubmVjdCh0aGlzLmFuYWx5c2VyKSx0aGlzLmdldEF1ZGlvTGV2ZWw9ZnVuY3Rpb24oKXtpZih0aGlzLmFuYWx5c2VyKXt0aGlzLmFuYWx5c2VyLmdldEJ5dGVUaW1lRG9tYWluRGF0YSh0aGlzLnRpbWVEb21haW5EYXRhKTtmb3IodmFyIGU9MCx0PTA7dDx0aGlzLnRpbWVEb21haW5EYXRhLmxlbmd0aDt0KyspZT1NYXRoLm1heChlLE1hdGguYWJzKHRoaXMudGltZURvbWFpbkRhdGFbdF0tMTI4KSk7cmV0dXJuIGUvMTI4fXJldHVybiBvLmRlZmF1bHQud2FybmluZyhcImNhbid0IGZpbmQgYW5hbHlzZXIgaW4gYXVkaW9MZXZlbEhlbHBlclwiKSwwfSx0aGlzfTtmdW5jdGlvbiBmKCl7cmV0dXJuIGMoKSgpLnJlcGxhY2UoLy0vZyxcIlwiKS50b1VwcGVyQ2FzZSgpfXZhciBtPWZ1bmN0aW9uKGUsdCxuKXt0cnl7by5kZWZhdWx0LmRlYnVnKFwic3RhcnQgdnNSZXNIYWNrXCIsZSk7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInZpZGVvXCIpO2kuc2V0QXR0cmlidXRlKFwiYXV0b3BsYXlcIixcIlwiKSxpLnNldEF0dHJpYnV0ZShcIm11dGVkXCIsXCJcIiksaS5tdXRlZD0hMCxpLnNldEF0dHJpYnV0ZShcInBsYXlzaW5saW5lXCIsXCJcIiksaS5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwicG9zaXRpb246IGFic29sdXRlOyB0b3A6IDA7IGxlZnQ6IDA7IHdpZHRoOjFweDsgaGlnaDoxcHg7XCIpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoaSksaS5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLGZ1bmN0aW9uKG4pe3IuaXNGaXJlRm94KCk/aS52aWRlb1dpZHRoJiYoby5kZWZhdWx0LmRlYnVnKFwiW3ZzUmVzSGFja10gZ2V0IHN0cmVhbSByZXNvbHV0aW9uOiBcIixcIlwiLmNvbmNhdChpLnZpZGVvV2lkdGgsXCIgeCBcIikuY29uY2F0KGkudmlkZW9IZWlnaHQpLGUpLHQoaS52aWRlb1dpZHRoLGkudmlkZW9IZWlnaHQpLGRvY3VtZW50LmJvZHkucmVtb3ZlQ2hpbGQoaSkpOihvLmRlZmF1bHQuZGVidWcoXCJbdnNSZXNIYWNrXSBnZXQgc3RyZWFtIHJlc29sdXRpb246IFwiLFwiXCIuY29uY2F0KGkudmlkZW9XaWR0aCxcIiB4IFwiKS5jb25jYXQoaS52aWRlb0hlaWdodCksZSksdChpLnZpZGVvV2lkdGgsaS52aWRlb0hlaWdodCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChpKSl9KSxPYmplY3QodS5zZXRTcmNPYmplY3QpKGksZSl9Y2F0Y2goZSl7bihlKX19LGc9ZnVuY3Rpb24oZSl7cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGUmJjA8PWUmJmU8PTQyOTQ5NjcyOTV9LHY9ZnVuY3Rpb24oZSl7dmFyIHQ9W1wibG93TGF0ZW5jeVwiLFwidXNlckNvbmZpZ0V4dHJhSW5mb1wiLFwidHJhbnNjb2RpbmdVc2Vyc1wiXTtmb3IodmFyIG4gaW4gZSlpZihcImxvd0xhdGVuY3lcIj09PW4mJlwiYm9vbGVhblwiIT10eXBlb2YgZVtuXXx8XCJ1c2VyQ29uZmlnRXh0cmFJbmZvXCI9PT1uJiZcIm9iamVjdFwiIT09YSgpKGVbbl0pfHxcInRyYW5zY29kaW5nVXNlcnNcIj09PW4mJiFoKGVbbl0pfHwhfnQuaW5kZXhPZihuKSYmXCJudW1iZXJcIiE9dHlwZW9mIGVbbl0pdGhyb3cgbmV3IEVycm9yKFwiUGFyYW0gW1wiK24rXCJdIGlzIGluVmFsaWRcIik7cmV0dXJuITB9LGg9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZm9yKHZhciBuIGluIGVbdF0paWYoXCJudW1iZXJcIiE9dHlwZW9mIGVbdF1bbl0pdGhyb3cgbmV3IEVycm9yKFwiUGFyYW0gdXNlcltcIit0K1wiXSAtIFtcIituK1wiXSBpcyBpblZhbGlkXCIpO3JldHVybiEwfSxTPWZ1bmN0aW9uKGUpe2lzTmFOKGUpJiYoZT0xZTMpO3ZhciB0PStuZXcgRGF0ZSxuPSh0PSg5MzAxKnQrNDkyOTcpJTIzMzI4MCkvMjMzMjgwO3JldHVybiBNYXRoLmNlaWwobiplKX0sXz1mdW5jdGlvbihlKXt2YXIgdD1lbmNvZGVVUklDb21wb25lbnQoZSkubWF0Y2goLyVbODlBQmFiXS9nKTtyZXR1cm4gZS5sZW5ndGgrKHQ/dC5sZW5ndGg6MCl9LEU9ZnVuY3Rpb24oKXtpZighZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJhZ29yYS1iYW4tdGlwXCIpKXt2YXIgZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO2UuaWQ9XCJhZ29yYS1iYW4tdGlwXCIsZS5zdHlsZT1cInBvc2l0aW9uOiBhYnNvbHV0ZTsgd2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgZGlzcGxheTogZmxleDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7IGNvbG9yOiAjZmZmO1wiLGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJib2R5XCIpLnByZXBlbmQoZSk7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTt0LnN0eWxlPVwiYmFja2dyb3VuZDogIzAwMDsgd2lkdGg6IDM0NnB4OyBoZWlnaHQ6IDExNnB4OyB6LWluZGV4OiAxMDAwMDA7IG9wYWNpdHk6IDAuNjsgYm9yZGVyLXJhZGl1czogMTBweDsgYm94LXNoYWRvdzogMCAycHggNHB4ICMwMDA7XCIsZS5hcHBlbmQodCk7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLnN0eWxlPVwiaGVpZ2h0OiA3NnB4OyBkaXNwbGF5OiBmbGV4OyBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgYWxpZ24taXRlbXM6IGNlbnRlcjtcIjt2YXIgaT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3BhblwiKTtpLnN0eWxlPVwiaGVpZ2h0OiAyOHB4OyB3aWR0aDogMjhweDsgY29sb3I6ICMwMDA7IHRleHQtYWxpZ246IGNlbnRlcjsgbGluZS1oZWlnaHQ6IDMwcHg7IGJhY2tncm91bmQ6ICNmZmY7IGJvcmRlci1yYWRpdXM6IDUwJTsgZm9udC13ZWlnaHQ6IDYwMDsgZm9udC1zaXplOiAyMHB4O21hcmdpbi1yaWdodDogNXB4O1wiLGkuaW5uZXJUZXh0PVwiIVwiO3ZhciBhPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzcGFuXCIpO2EuaW5uZXJUZXh0PVwiVGhpcyBicm93c2VyIGRvZXMgbm90IHN1cHBvcnQgd2ViUlRDXCIsbi5hcHBlbmQoaSksbi5hcHBlbmQoYSk7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtyLnN0eWxlPVwiaGVpZ2h0OiAzOHB4OyBkaXNwbGF5OiBmbGV4OyBib3JkZXItdG9wOiAjZmZmIDFweCBzb2xpZDsganVzdGlmeS1jb250ZW50OiBjZW50ZXI7IGFsaWduLWl0ZW1zOiBjZW50ZXI7XCIsci5pbm5lclRleHQ9XCJPS1wiLHQuYXBwZW5kKG4pLHQuYXBwZW5kKHIpLHIub25jbGljaz1mdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiYWdvcmEtYmFuLXRpcFwiKTtlLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoZSl9fX19LGZ1bmN0aW9uKGUsdCl7ZnVuY3Rpb24gbihlLHQsbixpLGEscixvKXt0cnl7dmFyIHM9ZVtyXShvKSxjPXMudmFsdWV9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgbihlKX1zLmRvbmU/dChjKTpQcm9taXNlLnJlc29sdmUoYykudGhlbihpLGEpfWUuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdD10aGlzLGk9YXJndW1lbnRzO3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihhLHIpe3ZhciBvPWUuYXBwbHkodCxpKTtmdW5jdGlvbiBzKGUpe24obyxhLHIscyxjLFwibmV4dFwiLGUpfWZ1bmN0aW9uIGMoZSl7bihvLGEscixzLGMsXCJ0aHJvd1wiLGUpfXModm9pZCAwKX0pfX19LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtuLnIodCksbi5kKHQsXCJSVENQZWVyQ29ubmVjdGlvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIFR9KSxuLmQodCxcImdldFVzZXJNZWRpYVwiLGZ1bmN0aW9uKCl7cmV0dXJuIG99KSxuLmQodCxcImF0dGFjaE1lZGlhU3RyZWFtXCIsZnVuY3Rpb24oKXtyZXR1cm4gc30pLG4uZCh0LFwicmVhdHRhY2hNZWRpYVN0cmVhbVwiLGZ1bmN0aW9uKCl7cmV0dXJuIGN9KSxuLmQodCxcInNldFNyY09iamVjdFwiLGZ1bmN0aW9uKCl7cmV0dXJuIGZ9KSxuLmQodCxcImdldFNyY09iamVjdFwiLGZ1bmN0aW9uKCl7cmV0dXJuIG19KSxuLmQodCxcIndlYnJ0Y0RldGVjdGVkQnJvd3NlclwiLGZ1bmN0aW9uKCl7cmV0dXJuIGR9KSxuLmQodCxcIndlYnJ0Y0RldGVjdGVkVmVyc2lvblwiLGZ1bmN0aW9uKCl7cmV0dXJuIHV9KSxuLmQodCxcIndlYnJ0Y01pbmltdW1WZXJzaW9uXCIsZnVuY3Rpb24oKXtyZXR1cm4gbH0pLG4uZCh0LFwid2VicnRjVGVzdGluZ1wiLGZ1bmN0aW9uKCl7cmV0dXJuIGJ9KSxuLmQodCxcIndlYnJ0Y1V0aWxzXCIsZnVuY3Rpb24oKXtyZXR1cm4gaH0pO3ZhciBpPW4oOCksYT1uLm4oaSkscj1uKDQpLG89bnVsbCxzPW51bGwsYz1udWxsLGQ9bnVsbCx1PW51bGwsbD1udWxsLHA9bnVsbCxmPW51bGwsbT1udWxsLGc9bnVsbCx2PXthZGRTdHJlYW06bnVsbH0saD17bG9nOmZ1bmN0aW9uKCl7fSxleHRyYWN0VmVyc2lvbjpmdW5jdGlvbihlLHQsbil7dmFyIGk9ZS5tYXRjaCh0KTtyZXR1cm4gaSYmaS5sZW5ndGg+PW4mJnBhcnNlSW50KGlbbl0pfX07aWYoXCJvYmplY3RcIj09KFwidW5kZWZpbmVkXCI9PXR5cGVvZiB3aW5kb3c/XCJ1bmRlZmluZWRcIjphKCkod2luZG93KSk/KCF3aW5kb3cuSFRNTE1lZGlhRWxlbWVudHx8XCJzcmNPYmplY3RcImluIHdpbmRvdy5IVE1MTWVkaWFFbGVtZW50LnByb3RvdHlwZT8oZj1mdW5jdGlvbihlLHQpe2Uuc3JjT2JqZWN0PXR9LG09ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3JjT2JqZWN0fSk6KGY9ZnVuY3Rpb24oZSx0KXtcIm1velNyY09iamVjdFwiaW4gZT9lLm1velNyY09iamVjdD10OihlLl9zcmNPYmplY3Q9dCxlLnNyYz10P1VSTC5jcmVhdGVPYmplY3RVUkwodCk6bnVsbCl9LG09ZnVuY3Rpb24oZSl7cmV0dXJuXCJtb3pTcmNPYmplY3RcImluIGU/ZS5tb3pTcmNPYmplY3Q6ZS5fc3JjT2JqZWN0fSksbz13aW5kb3cubmF2aWdhdG9yJiZ3aW5kb3cubmF2aWdhdG9yLmdldFVzZXJNZWRpYSk6KGY9ZnVuY3Rpb24oZSx0KXtlLnNyY09iamVjdD10fSxtPWZ1bmN0aW9uKGUpe3JldHVybiBlLnNyY09iamVjdH0pLHM9ZnVuY3Rpb24oZSx0KXtmKGUsdCl9LGM9ZnVuY3Rpb24oZSx0KXtmKGUsbSh0KSl9LFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJndpbmRvdy5uYXZpZ2F0b3IpaWYobmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYSYmd2luZG93Lm1velJUQ1BlZXJDb25uZWN0aW9uKXtmb3IodmFyIFMgaW4gaC5sb2coXCJUaGlzIGFwcGVhcnMgdG8gYmUgRmlyZWZveFwiKSxkPVwiZmlyZWZveFwiLHU9aC5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LC9GaXJlZm94XFwvKFswLTldKylcXC4vLDEpLGw9MzEsZz1tb3pSVENQZWVyQ29ubmVjdGlvbix2KXZbU109Zy5wcm90b3R5cGVbU107aWYocD1mdW5jdGlvbihlLHQpe2lmKHU8MzgmJmUmJmUuaWNlU2VydmVycyl7Zm9yKHZhciBuPVtdLGk9MDtpPGUuaWNlU2VydmVycy5sZW5ndGg7aSsrKXt2YXIgYT1lLmljZVNlcnZlcnNbaV07aWYoYS5oYXNPd25Qcm9wZXJ0eShcInVybHNcIikpZm9yKHZhciByPTA7cjxhLnVybHMubGVuZ3RoO3IrKyl7dmFyIG89e3VybDphLnVybHNbcl19OzA9PT1hLnVybHNbcl0uaW5kZXhPZihcInR1cm5cIikmJihvLnVzZXJuYW1lPWEudXNlcm5hbWUsby5jcmVkZW50aWFsPWEuY3JlZGVudGlhbCksbi5wdXNoKG8pfWVsc2Ugbi5wdXNoKGUuaWNlU2VydmVyc1tpXSl9ZS5pY2VTZXJ2ZXJzPW59dmFyIHM9bmV3IGcoZSx0KTtmb3IodmFyIGMgaW4gdilzW2NdPXZbY107cmV0dXJuIHN9LHdpbmRvdy5SVENTZXNzaW9uRGVzY3JpcHRpb258fCh3aW5kb3cuUlRDU2Vzc2lvbkRlc2NyaXB0aW9uPW1velJUQ1Nlc3Npb25EZXNjcmlwdGlvbiksd2luZG93LlJUQ0ljZUNhbmRpZGF0ZXx8KHdpbmRvdy5SVENJY2VDYW5kaWRhdGU9bW96UlRDSWNlQ2FuZGlkYXRlKSxvPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1mdW5jdGlvbihlKXtpZihcIm9iamVjdFwiIT09YSgpKGUpfHxlLnJlcXVpcmUpcmV0dXJuIGU7dmFyIHQ9W107cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7aWYoXCJyZXF1aXJlXCIhPT1uJiZcImFkdmFuY2VkXCIhPT1uJiZcIm1lZGlhU291cmNlXCIhPT1uKXt2YXIgaT1lW25dPVwib2JqZWN0XCI9PT1hKCkoZVtuXSk/ZVtuXTp7aWRlYWw6ZVtuXX07aWYodm9pZCAwPT09aS5taW4mJnZvaWQgMD09PWkubWF4JiZ2b2lkIDA9PT1pLmV4YWN0fHx0LnB1c2gobiksdm9pZCAwIT09aS5leGFjdCYmKFwibnVtYmVyXCI9PXR5cGVvZiBpLmV4YWN0P2kubWluPWkubWF4PWkuZXhhY3Q6ZVtuXT1pLmV4YWN0LGRlbGV0ZSBpLmV4YWN0KSx2b2lkIDAhPT1pLmlkZWFsKXtlLmFkdmFuY2VkPWUuYWR2YW5jZWR8fFtdO3ZhciByPXt9O1wibnVtYmVyXCI9PXR5cGVvZiBpLmlkZWFsP3Jbbl09e21pbjppLmlkZWFsLG1heDppLmlkZWFsfTpyW25dPWkuaWRlYWwsZS5hZHZhbmNlZC5wdXNoKHIpLGRlbGV0ZSBpLmlkZWFsLE9iamVjdC5rZXlzKGkpLmxlbmd0aHx8ZGVsZXRlIGVbbl19fX0pLHQubGVuZ3RoJiYoZS5yZXF1aXJlPXQpLGV9O3JldHVybiB1PDM4JiYoaC5sb2coXCJzcGVjOiBcIitKU09OLnN0cmluZ2lmeShlKSksZS5hdWRpbyYmKGUuYXVkaW89aShlLmF1ZGlvKSksZS52aWRlbyYmKGUudmlkZW89aShlLnZpZGVvKSksaC5sb2coXCJmZjM3OiBcIitKU09OLnN0cmluZ2lmeShlKSkpLG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWEoZSx0LG4pfSxuYXZpZ2F0b3IuZ2V0VXNlck1lZGlhPW8sbmF2aWdhdG9yLm1lZGlhRGV2aWNlc3x8KG5hdmlnYXRvci5tZWRpYURldmljZXM9e2dldFVzZXJNZWRpYTp5LGFkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXt9LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oKXt9fSksbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzPW5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlc3x8ZnVuY3Rpb24oKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7ZShbe2tpbmQ6XCJhdWRpb2lucHV0XCIsZGV2aWNlSWQ6XCJkZWZhdWx0XCIsbGFiZWw6XCJcIixncm91cElkOlwiXCJ9LHtraW5kOlwidmlkZW9pbnB1dFwiLGRldmljZUlkOlwiZGVmYXVsdFwiLGxhYmVsOlwiXCIsZ3JvdXBJZDpcIlwifV0pfSl9LHU8NDEpe3ZhciBfPW5hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcy5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO25hdmlnYXRvci5tZWRpYURldmljZXMuZW51bWVyYXRlRGV2aWNlcz1mdW5jdGlvbigpe3JldHVybiBfKCkudGhlbih2b2lkIDAsZnVuY3Rpb24oZSl7aWYoXCJOb3RGb3VuZEVycm9yXCI9PT1lLm5hbWUpcmV0dXJuW107dGhyb3cgZX0pfX19ZWxzZSBpZihuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhJiZ3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24pe2Zvcih2YXIgUyBpbiBoLmxvZyhcIlRoaXMgYXBwZWFycyB0byBiZSBDaHJvbWVcIiksZD1cImNocm9tZVwiLHU9aC5leHRyYWN0VmVyc2lvbihuYXZpZ2F0b3IudXNlckFnZW50LC9DaHJvbShlfGl1bSlcXC8oWzAtOV0rKVxcLi8sMiksbD0zOCxnPXdlYmtpdFJUQ1BlZXJDb25uZWN0aW9uLHYpdltTXT1nLnByb3RvdHlwZVtTXTtwPWZ1bmN0aW9uKGUsdCl7ZSYmZS5pY2VUcmFuc3BvcnRQb2xpY3kmJihlLmljZVRyYW5zcG9ydHM9ZS5pY2VUcmFuc3BvcnRQb2xpY3kpO3ZhciBuPW5ldyBnKGUsdCk7Zm9yKHZhciBpIGluIHYpbltpXT12W2ldO3ZhciBhPW4uZ2V0U3RhdHMuYmluZChuKTtyZXR1cm4gbi5nZXRTdGF0cz1mdW5jdGlvbihlLHQsbil7dmFyIGk9YXJndW1lbnRzO2kubGVuZ3RoPjAmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJih0PyhuPXQsdD1lLGk9W2U9bnVsbCx0LG5dKToodD1lLGk9W2U9bnVsbCx0XSkpO2lmKGkubGVuZ3RoPj0yKXtyZXR1cm4gYS5hcHBseSh0aGlzLFtmdW5jdGlvbihlKXtpWzFdKGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBlLnJlc3VsdCgpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG49e2lkOmUuaWQsdGltZXN0YW1wOmUudGltZXN0YW1wLHR5cGU6ZS50eXBlfTtlLm5hbWVzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtuW3RdPWUuc3RhdCh0KX0pLHRbbi5pZF09bn0pLHR9KGUpKX0saVswXV0pfXJldHVybiBhKCl9LG59LFtcImNyZWF0ZU9mZmVyXCIsXCJjcmVhdGVBbnN3ZXJcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD13ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbZV07d2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9dGhpcztpZihhcmd1bWVudHMubGVuZ3RoPDF8fDE9PT1hcmd1bWVudHMubGVuZ3RoJiZcIm9iamVjdFwiPT09YSgpKGFyZ3VtZW50c1swXSkpe3ZhciBuPTE9PT1hcmd1bWVudHMubGVuZ3RoP2FyZ3VtZW50c1swXTp2b2lkIDA7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGksYSl7dC5hcHBseShlLFtpLGEsbl0pfSl9cmV0dXJuIHQuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0pLFtcInNldExvY2FsRGVzY3JpcHRpb25cIixcInNldFJlbW90ZURlc2NyaXB0aW9uXCIsXCJhZGRJY2VDYW5kaWRhdGVcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD13ZWJraXRSVENQZWVyQ29ubmVjdGlvbi5wcm90b3R5cGVbZV07d2Via2l0UlRDUGVlckNvbm5lY3Rpb24ucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIGU9YXJndW1lbnRzLG49dGhpcztyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24oaSxhKXt0LmFwcGx5KG4sW2VbMF0sZnVuY3Rpb24oKXtpKCksZS5sZW5ndGg+PTImJmVbMV0uYXBwbHkobnVsbCxbXSl9LGZ1bmN0aW9uKHQpe2EodCksZS5sZW5ndGg+PTMmJmVbMl0uYXBwbHkobnVsbCxbdF0pfV0pfSl9fSk7dmFyIEU9ZnVuY3Rpb24oZSl7aWYoXCJvYmplY3RcIiE9PWEoKShlKXx8ZS5tYW5kYXRvcnl8fGUub3B0aW9uYWwpcmV0dXJuIGU7dmFyIHQ9e307cmV0dXJuIE9iamVjdC5rZXlzKGUpLmZvckVhY2goZnVuY3Rpb24obil7aWYoXCJyZXF1aXJlXCIhPT1uJiZcImFkdmFuY2VkXCIhPT1uJiZcIm1lZGlhU291cmNlXCIhPT1uKXt2YXIgaT1cIm9iamVjdFwiPT09YSgpKGVbbl0pP2Vbbl06e2lkZWFsOmVbbl19O3ZvaWQgMCE9PWkuZXhhY3QmJlwibnVtYmVyXCI9PXR5cGVvZiBpLmV4YWN0JiYoaS5taW49aS5tYXg9aS5leGFjdCk7dmFyIHI9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT9lK3QuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrdC5zbGljZSgxKTpcImRldmljZUlkXCI9PT10P1wic291cmNlSWRcIjp0fTtpZih2b2lkIDAhPT1pLmlkZWFsKXt0Lm9wdGlvbmFsPXQub3B0aW9uYWx8fFtdO3ZhciBvPXt9O1wibnVtYmVyXCI9PXR5cGVvZiBpLmlkZWFsPyhvW3IoXCJtaW5cIixuKV09aS5pZGVhbCx0Lm9wdGlvbmFsLnB1c2gobyksKG89e30pW3IoXCJtYXhcIixuKV09aS5pZGVhbCx0Lm9wdGlvbmFsLnB1c2gobykpOihvW3IoXCJcIixuKV09aS5pZGVhbCx0Lm9wdGlvbmFsLnB1c2gobykpfXZvaWQgMCE9PWkuZXhhY3QmJlwibnVtYmVyXCIhPXR5cGVvZiBpLmV4YWN0Pyh0Lm1hbmRhdG9yeT10Lm1hbmRhdG9yeXx8e30sdC5tYW5kYXRvcnlbcihcIlwiLG4pXT1pLmV4YWN0KTpbXCJtaW5cIixcIm1heFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZvaWQgMCE9PWlbZV0mJih0Lm1hbmRhdG9yeT10Lm1hbmRhdG9yeXx8e30sdC5tYW5kYXRvcnlbcihlLG4pXT1pW2VdKX0pfX0pLGUuYWR2YW5jZWQmJih0Lm9wdGlvbmFsPSh0Lm9wdGlvbmFsfHxbXSkuY29uY2F0KGUuYWR2YW5jZWQpKSx0fTtpZihvPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5hdWRpbyYmKGUuYXVkaW89RShlLmF1ZGlvKSksZS52aWRlbyYmKGUudmlkZW89RShlLnZpZGVvKSksaC5sb2coXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKGUsdCxuKX0sbmF2aWdhdG9yLmdldFVzZXJNZWRpYT1vLG5hdmlnYXRvci5tZWRpYURldmljZXN8fChuYXZpZ2F0b3IubWVkaWFEZXZpY2VzPXtnZXRVc2VyTWVkaWE6eSxlbnVtZXJhdGVEZXZpY2VzOmZ1bmN0aW9uKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3ZhciB0PXthdWRpbzpcImF1ZGlvaW5wdXRcIix2aWRlbzpcInZpZGVvaW5wdXRcIn07cmV0dXJuIE1lZGlhU3RyZWFtVHJhY2suZ2V0U291cmNlcyhmdW5jdGlvbihuKXtlKG4ubWFwKGZ1bmN0aW9uKGUpe3JldHVybntsYWJlbDplLmxhYmVsLGtpbmQ6dFtlLmtpbmRdLGRldmljZUlkOmUuaWQsZ3JvdXBJZDpcIlwifX0pKX0pfSl9fSksbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEpe2lmKE51bWJlcihPYmplY3Qoci5nZXRCcm93c2VyVmVyc2lvbikoKS5zcGxpdChcIi5cIilbMF0pPDQ2KXt2YXIgST1uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYS5iaW5kKG5hdmlnYXRvci5tZWRpYURldmljZXMpO25hdmlnYXRvci5tZWRpYURldmljZXMuZ2V0VXNlck1lZGlhPWZ1bmN0aW9uKGUpe3JldHVybiBoLmxvZyhcInNwZWM6ICAgXCIrSlNPTi5zdHJpbmdpZnkoZSkpLGUuYXVkaW89RShlLmF1ZGlvKSxlLnZpZGVvPUUoZS52aWRlbyksaC5sb2coXCJjaHJvbWU6IFwiK0pTT04uc3RyaW5naWZ5KGUpKSxJKGUpfX19ZWxzZSBuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYT1mdW5jdGlvbihlKXtyZXR1cm4geShlKX07dm9pZCAwPT09bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyJiYobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKCl7aC5sb2coXCJEdW1teSBtZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lciBjYWxsZWQuXCIpfSksdm9pZCAwPT09bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyJiYobmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5yZW1vdmVFdmVudExpc3RlbmVyPWZ1bmN0aW9uKCl7aC5sb2coXCJEdW1teSBtZWRpYURldmljZXMucmVtb3ZlRXZlbnRMaXN0ZW5lciBjYWxsZWQuXCIpfSkscz1mdW5jdGlvbihlLHQpe3U+PTQzP2YoZSx0KTp2b2lkIDAhPT1lLnNyYz9lLnNyYz10P1VSTC5jcmVhdGVPYmplY3RVUkwodCk6bnVsbDpoLmxvZyhcIkVycm9yIGF0dGFjaGluZyBzdHJlYW0gdG8gZWxlbWVudC5cIil9LGM9ZnVuY3Rpb24oZSx0KXt1Pj00Mz9mKGUsbSh0KSk6ZS5zcmM9dC5zcmN9fWVsc2UgbmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaCgvRWRnZVxcLyhcXGQrKS4oXFxkKykkLyk/KGgubG9nKFwiVGhpcyBhcHBlYXJzIHRvIGJlIEVkZ2VcIiksZD1cImVkZ2VcIix1PWguZXh0cmFjdFZlcnNpb24obmF2aWdhdG9yLnVzZXJBZ2VudCwvRWRnZVxcLyhcXGQrKS4oXFxkKykkLywyKSxsPTEyKTpoLmxvZyhcIkJyb3dzZXIgZG9lcyBub3QgYXBwZWFyIHRvIGJlIFdlYlJUQy1jYXBhYmxlXCIpO2Vsc2UgaC5sb2coXCJUaGlzIGRvZXMgbm90IGFwcGVhciB0byBiZSBhIGJyb3dzZXJcIiksZD1cIm5vdCBhIGJyb3dzZXJcIjtmdW5jdGlvbiB5KGUpe3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbih0LG4pe28oZSx0LG4pfSl9dmFyIFQsYj17fTt0cnl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGIsXCJ2ZXJzaW9uXCIse3NldDpmdW5jdGlvbihlKXt1PWV9fSl9Y2F0Y2goZSl7fXA/VD1wOlwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3cmJihUPXdpbmRvdy5SVENQZWVyQ29ubmVjdGlvbil9LGZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uKDIzKTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTE7dDxhcmd1bWVudHMubGVuZ3RoO3QrKyl7dmFyIG49bnVsbCE9YXJndW1lbnRzW3RdP2FyZ3VtZW50c1t0XTp7fSxhPU9iamVjdC5rZXlzKG4pO1wiZnVuY3Rpb25cIj09dHlwZW9mIE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMmJihhPWEuY29uY2F0KE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMobikuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4sZSkuZW51bWVyYWJsZX0pKSksYS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2koZSx0LG5bdF0pfSl9cmV0dXJuIGV9fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7bi5kKHQsXCJhXCIsZnVuY3Rpb24oKXtyZXR1cm4gc30pO3ZhciBpPXdpbmRvdy5BdWRpb0NvbnRleHR8fHdpbmRvdy53ZWJraXRBdWRpb0NvbnRleHQsYT1uKDMpLHI9YS5nZXRQYXJhbWV0ZXIsbz1hLnNldFBhcmFtZXRlcixzPWZ1bmN0aW9uKCl7cmV0dXJuIHIoXCJBVURJT19DT05URVhUXCIpfHwoY29uc29sZS5sb2coXCJDcmVhdGluZyBBdWRpbyBDb250ZXh0XCIpLG8oXCJBVURJT19DT05URVhUXCIsZnVuY3Rpb24oKXtpZihpKXJldHVybiBuZXcgaTt0aHJvdyBuZXcgRXJyb3IoXCJBVURJT19DT05URVhUX05PVF9TVVBQT1JURURcIil9KCkpKSxyKFwiQVVESU9fQ09OVEVYVFwiKX19LGZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1uKDIxKSxhPW4oMjIpO2UuZXhwb3J0cz1mdW5jdGlvbihlLHQsbil7dmFyIHI9dCYmbnx8MDtcInN0cmluZ1wiPT10eXBlb2YgZSYmKHQ9XCJiaW5hcnlcIj09PWU/bmV3IEFycmF5KDE2KTpudWxsLGU9bnVsbCk7dmFyIG89KGU9ZXx8e30pLnJhbmRvbXx8KGUucm5nfHxpKSgpO2lmKG9bNl09MTUmb1s2XXw2NCxvWzhdPTYzJm9bOF18MTI4LHQpZm9yKHZhciBzPTA7czwxNjsrK3MpdFtyK3NdPW9bc107cmV0dXJuIHR8fGEobyl9fSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX07T2JqZWN0LmRlZmluZVByb3BlcnR5KHQsXCJfX2VzTW9kdWxlXCIse3ZhbHVlOiEwfSk7dmFyIGEscj1pKG4oMCkpLG89bigxMik7IWZ1bmN0aW9uKGUpe2UuTkVXPVwibmV3XCIsZS5QUkVQQVJJTkdfT0ZGRVI9XCJwcmVwYXJpbmctb2ZmZXJcIixlLk9GRkVSX1NFTlQ9XCJvZmZlci1zZW50XCIsZS5FU1RBQkxJU0hFRD1cImVzdGFibGlzaGVkXCIsZS5DTE9TRUQ9XCJjbG9zZWRcIn0oYXx8KGE9e30pKTt2YXIgcz1mdW5jdGlvbigpe2Z1bmN0aW9uIGUoZSl7dGhpcy5jYW5kaWRhdGU9bnVsbCx0aGlzLnN0YXRlPWEuTkVXLHRoaXMuY29uZmlnPWUsdGhpcy5pc1N1YnNjcmliZXI9dGhpcy5jb25maWcuaXNTdWJzY3JpYmVyLHRoaXMucGVlckNvbm5lY3Rpb249dGhpcy5pbml0UGVlY0Nvbm5lY3Rpb24oZSksdGhpcy5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZT10aGlzLl9vbmljZWNhbmRpZGF0ZS5iaW5kKHRoaXMpLHRoaXMucGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9dGhpcy5fb25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UuYmluZCh0aGlzKSx0aGlzLnBlZXJDb25uZWN0aW9uLm9uYWRkc3RyZWFtPXRoaXMuX29uYWRkc3RyZWFtLmJpbmQodGhpcyksdGhpcy5wZWVyQ29ubmVjdGlvbi5vbnRyYWNrPXRoaXMuX29udHJhY2suYmluZCh0aGlzKSx0aGlzLnByb2Nlc3NTaWduYWxpbmdNZXNzYWdlPXRoaXMuc2V0QW5zd2VyLmJpbmQodGhpcyksdGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcih7b2ZmZXJUb1JlY2VpdmVBdWRpbzohMCxvZmZlclRvUmVjZWl2ZVZpZGVvOiEwfSkudGhlbih0aGlzLnNldExvY2FsU0RQLmJpbmQodGhpcykpLHRoaXMuc2VuZFZpZGVvU3RhdHM9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGdvb2dDb2RlY05hbWU6XCJoMjY0XCI9PT10aGlzLmNvbmZpZy5jb2RlYz9cIkgyNjRcIjpcIlZQOFwiLGJ5dGVzU2VudDpcIjBcIixwYWNrZXRzTG9zdDpcIjBcIixwYWNrZXRzU2VudDpcIjBcIixnb29nQWRhcHRhdGlvbkNoYW5nZXM6XCIwXCIsZ29vZ0F2Z0VuY29kZU1zOlwiMFwiLGdvb2dFbmNvZGVVc2FnZVBlcmNlbnQ6XCIwXCIsZ29vZ0ZpcnNSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVIZWlnaHRTZW50OlwiMFwiLGdvb2dGcmFtZUhlaWdodElucHV0OlwiMFwiLGdvb2dGcmFtZVJhdGVJbnB1dDpcIjBcIixnb29nRnJhbWVSYXRlU2VudDpcIjBcIixnb29nRnJhbWVXaWR0aFNlbnQ6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhJbnB1dDpcIjBcIixnb29nTmFja3NSZWNlaXZlZDpcIjBcIixnb29nUGxpc1JlY2VpdmVkOlwiMFwiLGdvb2dSdHQ6XCIwXCIsZ29vZ0ZyYW1lc0VuY29kZWQ6XCIwXCJ9LHRoaXMuc2VuZEF1ZGlvU3RhdHM9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGdvb2dDb2RlY05hbWU6XCJvcHVzXCIsYWVjRGl2ZXJnZW50RmlsdGVyRnJhY3Rpb246XCIwXCIsYXVkaW9JbnB1dExldmVsOlwiMFwiLGJ5dGVzU2VudDpcIjBcIixwYWNrZXRzU2VudDpcIjBcIixnb29nRWNob0NhbmNlbGxhdGlvblJldHVybkxvc3M6XCIwXCIsZ29vZ0VjaG9DYW5jZWxsYXRpb25SZXR1cm5Mb3NzRW5oYW5jZW1lbnQ6XCIwXCJ9LHRoaXMucmVjZWl2ZUF1ZGlvU3RhdHM9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGF1ZGlvT3V0cHV0TGV2ZWw6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzTG9zdDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0FjY2VsZXJhdGVSYXRlOlwiMFwiLGdvb2dDdXJyZW50RGVsYXlNczpcIjBcIixnb29nRGVjb2RpbmdDTkc6XCIwXCIsZ29vZ0RlY29kaW5nQ1ROOlwiMFwiLGdvb2dEZWNvZGluZ0NUU0c6XCIwXCIsZ29vZ0RlY29kaW5nTm9ybWFsOlwiMFwiLGdvb2dEZWNvZGluZ1BMQzpcIjBcIixnb29nRGVjb2RpbmdQTENDTkc6XCIwXCIsZ29vZ0V4cGFuZFJhdGU6XCIwXCIsZ29vZ0ppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dKaXR0ZXJSZWNlaXZlZDpcIjBcIixnb29nUHJlZW1wdGl2ZUV4cGFuZFJhdGU6XCIwXCIsZ29vZ1ByZWZlcnJlZEppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dTZWNvbmRhcnlEZWNvZGVkUmF0ZTpcIjBcIixnb29nU3BlZWNoRXhwYW5kUmF0ZTpcIjBcIn0sdGhpcy5yZWNlaXZlVmlkZW9TdGF0cz17aWQ6XCJcIix0eXBlOlwiXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ1RhcmdldERlbGF5TXM6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIsZ29vZ0RlY29kZU1zOlwiMFwiLGdvb2dNYXhEZWNvZGVNczpcIjBcIixnb29nUmVuZGVyRGVsYXlNczpcIjBcIixnb29nRnJhbWVXaWR0aFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZUhlaWdodFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZVJhdGVSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlRGVjb2RlZDpcIjBcIixnb29nRnJhbWVSYXRlT3V0cHV0OlwiMFwiLGdvb2dGcmFtZXNEZWNvZGVkOlwiMFwiLGdvb2dGcmFtZVJlY2VpdmVkOlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ01pblBsYXlvdXREZWxheU1zOlwiMFwiLGdvb2dOYWNrc1NlbnQ6XCIwXCIsZ29vZ1BsaXNTZW50OlwiMFwiLGdvb2dGaXJzU2VudDpcIjBcIixieXRlc1JlY2VpdmVkOlwiMFwiLHBhY2tldHNSZWNlaXZlZDpcIjBcIn19cmV0dXJuIGUucHJvdG90eXBlLmFkZFN0cmVhbT1mdW5jdGlvbihlKXt0aGlzLnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShlKX0sZS5wcm90b3R5cGUuc2V0QW5zd2VyPWZ1bmN0aW9uKGUpe3ZhciB0PUpTT04ucGFyc2UoZSk7dGhpcy5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtzZHA6dC5zZHAsdHlwZTpcImFuc3dlclwifSkpLHRoaXMub25zaWduYWxpbmdtZXNzYWdlJiZ0aGlzLm9uc2lnbmFsaW5nbWVzc2FnZShcIlwiKX0sZS5wcm90b3R5cGUuY2xvc2U9ZnVuY3Rpb24oKXt0aGlzLnBlZXJDb25uZWN0aW9uLmNsb3NlKCl9LGUucHJvdG90eXBlLmdldFN0YXRzPWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwPT09dCYmKHQ9NTAwKSx0PXQ+NTAwPzUwMDp0LERhdGUubm93KCktdGhpcy5sYXN0VGltZUdldFN0YXRzPHQpe3ZhciBuPVtdO3RoaXMuY29uZmlnLmlzU3Vic2NyaWJlcj8obi5wdXNoKHRoaXMucmVjZWl2ZVZpZGVvU3RhdHMpLG4ucHVzaCh0aGlzLnJlY2VpdmVBdWRpb1N0YXRzKSk6KG4ucHVzaCh0aGlzLnNlbmRBdWRpb1N0YXRzKSxuLnB1c2godGhpcy5zZW5kVmlkZW9TdGF0cykpLG4ucHVzaCh7aWQ6XCJ0aW1lXCIsc3RhcnRUaW1lOnRoaXMuY29ubmVjdGVkVGltZSx0aW1lc3RhbXA6RGF0ZS5ub3coKX0pLGUmJmUobil9ZWxzZSB0aGlzLl9nZXRTdGF0cyhlKX0sZS5wcm90b3R5cGUuX2dldFN0YXRzPWZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMsbj1bXTt0aGlzLnBlZXJDb25uZWN0aW9uLmdldFN0YXRzKG51bGwpLnRoZW4oZnVuY3Rpb24oaSl7dC5sYXN0VGltZUdldFN0YXRzPURhdGUubm93KCksT2JqZWN0LmtleXMoaSkubWFwKGZ1bmN0aW9uKGUpe3ZhciBuPWlbZV07dC5jb25maWcuaXNTdWJzY3JpYmVyP24udHlwZSYmXCJpbmJvdW5kcnRwXCI9PT1uLnR5cGUmJm4ubWVkaWFUeXBlJiZcImF1ZGlvXCI9PT1uLm1lZGlhVHlwZT8odC5yZWNlaXZlQXVkaW9TdGF0cy5pZD1uLmlkK1wicmVjdlwiLHQucmVjZWl2ZUF1ZGlvU3RhdHMudHlwZT1uLnR5cGUrXCJcIix0LnJlY2VpdmVBdWRpb1N0YXRzLm1lZGlhVHlwZT1uLm1lZGlhVHlwZStcIlwiLHQucmVjZWl2ZUF1ZGlvU3RhdHMucGFja2V0c1JlY2VpdmVkPW4ucGFja2V0c1JlY2VpdmVkK1wiXCIsdC5yZWNlaXZlQXVkaW9TdGF0cy5ieXRlc1JlY2VpdmVkPW4uYnl0ZXNSZWNlaXZlZCtcIlwiLHQucmVjZWl2ZUF1ZGlvU3RhdHMucGFja2V0c0xvc3Q9bi5wYWNrZXRzTG9zdCtcIlwiLHQucmVjZWl2ZUF1ZGlvU3RhdHMuZ29vZ0ppdHRlclJlY2VpdmVkPW4uaml0dGVyK1wiXCIpOm4udHlwZSYmXCJpbmJvdW5kcnRwXCI9PT1uLnR5cGUmJm4ubWVkaWFUeXBlJiZcInZpZGVvXCI9PT1uLm1lZGlhVHlwZT8odC5yZWNlaXZlVmlkZW9TdGF0cy5pZD1uLmlkK1wicmVjdlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMudHlwZT1uLnR5cGUrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLm1lZGlhVHlwZT1uLm1lZGlhVHlwZStcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMucGFja2V0c1JlY2VpdmVkPW4ucGFja2V0c1JlY2VpdmVkK1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5ieXRlc1JlY2VpdmVkPW4uYnl0ZXNSZWNlaXZlZCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMucGFja2V0c0xvc3Q9bi5wYWNrZXRzTG9zdCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ0ppdHRlckJ1ZmZlck1zPW4uaml0dGVyK1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5nb29nUGxpc1NlbnQ9bi5wbGlDb3VudCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ0ZpcnNTZW50PW4uZmlyQ291bnQrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLmdvb2dOYWNrc1NlbnQ9bi5uYWNrQ291bnQrXCJcIik6bi5yZW1vdGVTb3VyY2UmJm4udHlwZSYmXCJ0cmFja1wiPT09bi50eXBlJiZuLnRyYWNrSWRlbnRpZmllciYmLTEhPT1uLnRyYWNrSWRlbnRpZmllci5pbmRleE9mKFwidlwiKT8odC5yZWNlaXZlVmlkZW9TdGF0cy5nb29nRnJhbWVIZWlnaHRSZWNlaXZlZD1uLmZyYW1lSGVpZ2h0K1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5nb29nRnJhbWVXaWR0aFJlY2VpdmVkPW4uZnJhbWVXaWR0aCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ0ZyYW1lUmF0ZURlY29kZWQ9bi5mcmFtZXNQZXJTZWNvbmQrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLmdvb2dGcmFtZVJhdGVPdXRwdXQ9bi5mcmFtZXNQZXJTZWNvbmQrXCJcIix0LnJlY2VpdmVWaWRlb1N0YXRzLmdvb2dGcmFtZVJhdGVSZWNlaXZlZD1uLmZyYW1lc1BlclNlY29uZCtcIlwiLHQucmVjZWl2ZVZpZGVvU3RhdHMuZ29vZ0ZyYW1lc0RlY29kZWQ9bi5mcmFtZXNEZWNvZGVkK1wiXCIsdC5yZWNlaXZlVmlkZW9TdGF0cy5nb29nRnJhbWVSZWNlaXZlZD1uLmZyYW1lc1JlY2VpdmVkK1wiXCIpOm4ucmVtb3RlU291cmNlJiZuLnR5cGUmJlwidHJhY2tcIj09PW4udHlwZSYmbi50cmFja0lkZW50aWZpZXImJi0xIT09bi50cmFja0lkZW50aWZpZXIuaW5kZXhPZihcImFcIikmJih0LnJlY2VpdmVBdWRpb1N0YXRzLmF1ZGlvT3V0cHV0TGV2ZWw9bi5hdWRpb0xldmVsK1wiXCIpOiFuLmlzUmVtb3RlJiZuLnR5cGUmJlwib3V0Ym91bmRydHBcIj09PW4udHlwZSYmbi5tZWRpYVR5cGUmJlwiYXVkaW9cIj09PW4ubWVkaWFUeXBlPyh0LnNlbmRBdWRpb1N0YXRzLmlkPW4uaWQrXCJzZW5kXCIsdC5zZW5kQXVkaW9TdGF0cy50eXBlPW4udHlwZStcIlwiLHQuc2VuZEF1ZGlvU3RhdHMubWVkaWFUeXBlPW4ubWVkaWFUeXBlK1wiXCIsdC5zZW5kQXVkaW9TdGF0cy5wYWNrZXRzU2VudD1uLnBhY2tldHNTZW50K1wiXCIsdC5zZW5kQXVkaW9TdGF0cy5ieXRlc1NlbnQ9bi5ieXRlc1NlbnQrXCJcIik6IW4uaXNSZW1vdGUmJm4udHlwZSYmXCJvdXRib3VuZHJ0cFwiPT09bi50eXBlJiZuLm1lZGlhVHlwZSYmXCJ2aWRlb1wiPT09bi5tZWRpYVR5cGU/KHQuc2VuZFZpZGVvU3RhdHMuaWQ9bi5pZCtcInNlbmRcIix0LnNlbmRWaWRlb1N0YXRzLnR5cGU9bi50eXBlK1wiXCIsdC5zZW5kVmlkZW9TdGF0cy5tZWRpYVR5cGU9bi5tZWRpYVR5cGUrXCJcIix0LnNlbmRWaWRlb1N0YXRzLnBhY2tldHNTZW50PW4ucGFja2V0c1NlbnQrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmJ5dGVzU2VudD1uLmJ5dGVzU2VudCtcIlwiLHQuc2VuZFZpZGVvU3RhdHMuZ29vZ1J0dD1uLnJvdW5kVHJpcFRpbWUrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dQbGlzUmVjZWl2ZWQ9bi5wbGlDb3VudCtcIlwiLHQuc2VuZFZpZGVvU3RhdHMuZ29vZ0ZpcnNSZWNlaXZlZD1uLmZpckNvdW50K1wiXCIsdC5zZW5kVmlkZW9TdGF0cy5nb29nTmFja3NSZWNlaXZlZD1uLm5hY2tDb3VudCtcIlwiKTohbi5yZW1vdGVTb3VyY2UmJm4udHlwZSYmXCJ0cmFja1wiPT09bi50eXBlJiZuLmZyYW1lc1NlbnQmJjAhPT1uLmZyYW1lc1NlbnQmJih0LnNlbmRWaWRlb1N0YXRzLmdvb2dGcmFtZUhlaWdodFNlbnQ9bi5mcmFtZUhlaWdodCtcIlwiLHQuc2VuZFZpZGVvU3RhdHMuZ29vZ0ZyYW1lSGVpZ2h0SW5wdXQ9bi5mcmFtZUhlaWdodCtcIlwiLHQuc2VuZFZpZGVvU3RhdHMuZ29vZ0ZyYW1lV2lkdGhTZW50PW4uZnJhbWVXaWR0aCtcIlwiLHQuc2VuZFZpZGVvU3RhdHMuZ29vZ0ZyYW1lV2lkdGhJbnB1dD1uLmZyYW1lV2lkdGgrXCJcIix0LnNlbmRWaWRlb1N0YXRzLmdvb2dGcmFtZXNFbmNvZGVkPW4uZnJhbWVzU2VudCtcIlwiLHQuc2VuZFZpZGVvU3RhdHMuZ29vZ0ZyYW1lUmF0ZVNlbnQ9bi5mcmFtZXNQZXJTZWNvbmQrXCJcIil9KSx0LmNvbmZpZy5pc1N1YnNjcmliZXI/KG4ucHVzaCh0LnJlY2VpdmVWaWRlb1N0YXRzKSxuLnB1c2godC5yZWNlaXZlQXVkaW9TdGF0cykpOihuLnB1c2godC5zZW5kQXVkaW9TdGF0cyksbi5wdXNoKHQuc2VuZFZpZGVvU3RhdHMpKSxuLnB1c2goe2lkOlwidGltZVwiLHN0YXJ0VGltZTp0LmNvbm5lY3RlZFRpbWUsdGltZXN0YW1wOkRhdGUubm93KCl9KSxlJiZlKG4pfSl9LGUucHJvdG90eXBlLmdldFN0YXRzUmF0ZT1mdW5jdGlvbihlKXt0aGlzLmdldFN0YXRzKGUpfSxlLnByb3RvdHlwZS5pbml0UGVlY0Nvbm5lY3Rpb249ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdHVuU2VydmVyVXJsLG49ZS50dXJuU2VydmVyLGk9ZS5pY2VTZXJ2ZXJzO3JldHVybiB0aGlzLnBjQ29uZmlnPXtpY2VTZXJ2ZXJzOlt7dXJsczpcInN0dW46d2ViY3MuYWdvcmEuaW86MzQ3OFwifV19LGkgaW5zdGFuY2VvZiBBcnJheT90aGlzLnBjQ29uZmlnLmljZVNlcnZlcnM9ZS5pY2VTZXJ2ZXJzOnQmJih0IGluc3RhbmNlb2YgQXJyYXk/dC5tYXAoZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUmJlwiXCIhPT1lJiZ0aGlzLnBjQ29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXJsczplfSl9KTpcInN0cmluZ1wiPT10eXBlb2YgdCYmXCJcIiE9PXQmJnRoaXMucGNDb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmxzOnR9KSksbiYmKG4gaW5zdGFuY2VvZiBBcnJheT9uLm1hcChmdW5jdGlvbihlKXtcInN0cmluZ1wiPT10eXBlb2YgZS51cmwmJlwiXCIhPT1lLnVybCYmdGhpcy5wY0NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOmUudXNlcm5hbWUsY3JlZGVudGlhbDplLmNyZWRlbnRpYWwsdXJsOmUudXJsfSl9KTpcImF1dG9cIiE9PW4ubW9kZSYmXCJtYW51YWxcIiE9PW4ubW9kZXx8KG4udWRwcG9ydCYmdGhpcy5wY0NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOm4udXNlcm5hbWUsY3JlZGVudGlhbDpuLmNyZWRlbnRpYWwsY3JlZGVudGlhbFR5cGU6XCJwYXNzd29yZFwiLHVybHM6XCJ0dXJuOlwiK24udXJsK1wiOlwiK24udWRwcG9ydCtcIj90cmFuc3BvcnQ9dWRwXCJ9KSxcInN0cmluZ1wiPT10eXBlb2Ygbi50Y3Bwb3J0JiZcIlwiIT09bi50Y3Bwb3J0JiZ0aGlzLnBjQ29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXNlcm5hbWU6bi51c2VybmFtZSxjcmVkZW50aWFsOm4uY3JlZGVudGlhbCxjcmVkZW50aWFsVHlwZTpcInBhc3N3b3JkXCIsdXJsczpcInR1cm46XCIrbi51cmwrXCI6XCIrbi50Y3Bwb3J0K1wiP3RyYW5zcG9ydD10Y3BcIn0pLCEwPT09bi5mb3JjZXR1cm4mJih0aGlzLnBjQ29uZmlnLmljZVRyYW5zcG9ydFBvbGljeT1cInJlbGF5XCIpKSksbmV3IG8uUlRDUGVlckNvbm5lY3Rpb24odGhpcy5wY0NvbmZpZyl9LGUucHJvdG90eXBlLl9vbnRyYWNrPWZ1bmN0aW9uKGUpe3RoaXMub25hZGRzdHJlYW0mJnRoaXMub25hZGRzdHJlYW0oZSxcIm9udHJhY2tcIil9LGUucHJvdG90eXBlLl9vbmFkZHN0cmVhbT1mdW5jdGlvbihlKXt0aGlzLm9uYWRkc3RyZWFtJiZ0aGlzLm9uYWRkc3RyZWFtKGUsXCJvbmFkZHN0cmVhbVwiKX0sZS5wcm90b3R5cGUuX29uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKGUpe1wiY29ubmVjdGVkXCI9PT1lLmN1cnJlbnRUYXJnZXQuaWNlQ29ubmVjdGlvblN0YXRlJiYodGhpcy5zdGF0ZT1hLkVTVEFCTElTSEVELHRoaXMuY29ubmVjdGVkVGltZT1EYXRlLm5vdygpKSx0aGlzLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlJiZ0aGlzLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlKGUuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUpfSxlLnByb3RvdHlwZS5fb25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7IXRoaXMuY2FuZGlkYXRlJiZlJiYodGhpcy5jYW5kaWRhdGU9ZS5jYW5kaWRhdGUsdGhpcy5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcih7b2ZmZXJUb1JlY2VpdmVBdWRpbzohMCxvZmZlclRvUmVjZWl2ZVZpZGVvOiEwfSkudGhlbih0aGlzLmVkaXRMb2NhbFNEUC5iaW5kKHRoaXMpKS50aGVuKHRoaXMuc2V0TG9jYWxTRFAuYmluZCh0aGlzKSkudGhlbih0aGlzLnNlbmRPZmZlci5iaW5kKHRoaXMpKS5jYXRjaCgpKX0sZS5wcm90b3R5cGUuc2V0TG9jYWxTRFA9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKHtzZHA6ZS5zZHAsdHlwZTpcIm9mZmVyXCJ9KSksdGhpcy5zdGF0ZT1hLlBSRVBBUklOR19PRkZFUixlfSxlLnByb3RvdHlwZS5lZGl0TG9jYWxTRFA9ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2RwPXRoaXMuc2V0QmFuZFdpZHRoKGUuc2RwKSxlLnNkcD10aGlzLnJldmlzZU9wdXMoZS5zZHApLGUuc2RwPXRoaXMuYWRkQ2FuZGlkYXRlKGUuc2RwKSxlfSxlLnByb3RvdHlwZS5zZXRTZW5kUmVjdj1mdW5jdGlvbihlKXtyZXR1cm4gZT0oZT0oZT1lLnJlcGxhY2UoL2E9cmVjdm9ubHlcXHJcXG4vZyxcImE9c2VuZHJlY3ZcXHJcXG5cIikpLnJlcGxhY2UoL2E9c2VuZG9ubHlcXHJcXG4vZyxcImE9c2VuZHJlY3ZcXHJcXG5cIikpLnJlcGxhY2UoL2E9aW5hY3RpdmVcXHJcXG4vZyxcImE9c2VuZHJlY3ZcXHJcXG5cIil9LGUucHJvdG90eXBlLnNldEJhbmRXaWR0aD1mdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5jb25maWcsYT1pLmNvZGVjLG89aS5taW5WaWRlb0JXLHM9aS5tYXhWaWRlb0JXLGM9aS5tYXhBdWRpb0JXLGQ9aS5jbGllbnRJZDtpZigodD1lLm1hdGNoKC9tPXZpZGVvLipcXHJcXG4vKSkmJm8mJnMpe249dFswXStcImI9QVM6XCIrcytcIlxcclxcblwiO3ZhciB1PTAsbD0wO1wiaDI2NFwiPT09YT8odT1lLnNlYXJjaCgvYT1ydHBtYXA6KFxcZCspIEgyNjRcXC85MDAwMFxcclxcbi8pLGw9ZS5zZWFyY2goL0gyNjRcXC85MDAwMFxcclxcbi8pKTpcInZwOFwiPT09YSYmKHU9ZS5zZWFyY2goL2E9cnRwbWFwOihcXGQrKSBWUDhcXC85MDAwMFxcclxcbi8pLGw9ZS5zZWFyY2goL1ZQOFxcLzkwMDAwXFxyXFxuLykpLC0xIT09dSYmLTEhPT1sJiZsLXU+MTAmJihuPW4rXCJhPWZtdHA6XCIrZS5zbGljZSh1KzksbC0xKStcIiB4LWdvb2dsZS1taW4tYml0cmF0ZT1cIitvK1wiXFxyXFxuXCIpLGU9ZS5yZXBsYWNlKHRbMF0sbiksci5kZWZhdWx0LmRlYnVnKFwiW1wiK2QrXCJdU2V0IFZpZGVvIEJpdHJhdGUgLSBtaW46XCIrbytcIiBtYXg6XCIrcyl9cmV0dXJuKHQ9ZS5tYXRjaCgvbT1hdWRpby4qXFxyXFxuLykpJiZjJiYobj10WzBdK1wiYj1BUzpcIitjK1wiXFxyXFxuXCIsZT1lLnJlcGxhY2UodFswXSxuKSksZX0sZS5wcm90b3R5cGUucmV2aXNlT3B1cz1mdW5jdGlvbihlKXtyZXR1cm4gZT0oZT1lLnJlcGxhY2UoL2E9cnRwbWFwOjEwMiBvcHVzXFwvNDgwMDBcXC8yL2csXCJhPXJ0cG1hcDoxMTEgb3B1cy80ODAwMC8yXCIpKS5yZXBsYWNlKC9tPWF1ZGlvIDkgVURQXFwvVExTXFwvUlRQXFwvU0FWUEYgMTAyIDAgOCA5NyAxMyAxMTggMTAxL2csXCJtPWF1ZGlvIDkgVURQL1RMUy9SVFAvU0FWUEYgMTExIDAgOCA5NyAxMyAxMTggMTAxXCIpfSxlLnByb3RvdHlwZS5hZGRDYW5kaWRhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIGUrPVwiYT1jYW5kaWRhdGU6MjI0MzI1NTQzNSAxIHVkcCAyMTIyMTk0Njg3IDE5Mi4xNjguMC4xIDMwMDAwIHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDFcXHJcXG5cIn0sZS5wcm90b3R5cGUuc2VuZE9mZmVyPWZ1bmN0aW9uKGUpe3RoaXMuY29uZmlnLmNhbGxiYWNrKEpTT04uc3RyaW5naWZ5KHtzZHA6ZS5zZHAsbWVzc2FnZVR5cGU6XCJPRkZFUlwiLHRpZWJyZWFrZXI6TWF0aC5mbG9vcig0Mjk0OTY3MjMqTWF0aC5yYW5kb20oKSsxKX0pKSx0aGlzLnN0YXRlPWEuT0ZGRVJfU0VOVH0sZX0oKTt0LmRlZmF1bHQ9c30sZnVuY3Rpb24oZSx0LG4pe3ZhciBpPW4oMjYpLGE9bigyNykscj1uKDI4KTtlLmV4cG9ydHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gaShlKXx8YShlLHQpfHxyKCl9fSxmdW5jdGlvbihlLHQsbil7dmFyIGksYTthPXRoaXMsdm9pZCAwPT09KGk9ZnVuY3Rpb24oKXtyZXR1cm4gZnVuY3Rpb24oKXtcInVzZSBzdHJpY3RcIjt2YXIgZSx0PXRoaXM7ZnVuY3Rpb24gbihlKXt0LmNvbnNvbGUmJih0LmNvbnNvbGUuZXJyb3I/dC5jb25zb2xlLmVycm9yKGUpOnQuY29uc29sZS5sb2cmJnQuY29uc29sZS5sb2coZSkpfWZ1bmN0aW9uIGkoZSx0LGksYSl7dmFyIHI9YXx8bixvPWUuY3JlYXRlU2hhZGVyKGkpO2Uuc2hhZGVyU291cmNlKG8sdCksZS5jb21waWxlU2hhZGVyKG8pO3ZhciBzPWUuZ2V0U2hhZGVyUGFyYW1ldGVyKG8sZS5DT01QSUxFX1NUQVRVUyk7aWYoIXMpe3ZhciBjPWUuZ2V0U2hhZGVySW5mb0xvZyhvKTtyZXR1cm4gcihcIioqKiBFcnJvciBjb21waWxpbmcgc2hhZGVyICdcIitvK1wiJzpcIitjKSxlLmRlbGV0ZVNoYWRlcihvKSxudWxsfXJldHVybiBvfWZ1bmN0aW9uIGEoZSx0LGksYSxyKXt2YXIgbz1yfHxuLHM9ZS5jcmVhdGVQcm9ncmFtKCk7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UuYXR0YWNoU2hhZGVyKHMsdCl9KSxpJiZpLmZvckVhY2goZnVuY3Rpb24odCxuKXtlLmJpbmRBdHRyaWJMb2NhdGlvbihzLGE/YVtuXTpuLHQpfSksZS5saW5rUHJvZ3JhbShzKTt2YXIgYz1lLmdldFByb2dyYW1QYXJhbWV0ZXIocyxlLkxJTktfU1RBVFVTKTtpZighYyl7dmFyIGQ9ZS5nZXRQcm9ncmFtSW5mb0xvZyhzKTtyZXR1cm4gbyhcIkVycm9yIGluIHByb2dyYW0gbGlua2luZzpcIitkKSxlLmRlbGV0ZVByb2dyYW0ocyksbnVsbH1yZXR1cm4gc30oZT1lfHx0KT09PWUudG9wJiYoY29uc29sZS5sb2coXCIlYyVzXCIsXCJjb2xvcjpibHVlO2ZvbnQtd2VpZ2h0OmJvbGQ7XCIsXCJmb3IgbW9yZSBhYm91dCB3ZWJnbC11dGlscy5qcyBzZWU6XCIpLGNvbnNvbGUubG9nKFwiJWMlc1wiLFwiY29sb3I6Ymx1ZTtmb250LXdlaWdodDpib2xkO1wiLFwiaHR0cDovL3dlYmdsZnVuZGFtZW50YWxzLm9yZy93ZWJnbC9sZXNzb25zL3dlYmdsLWJvaWxlcnBsYXRlLmh0bWxcIikpO3ZhciByLG89W1wiVkVSVEVYX1NIQURFUlwiLFwiRlJBR01FTlRfU0hBREVSXCJdO3JldHVybiFkb2N1bWVudC5kb2N1bWVudE1vZGUmJndpbmRvdy5TdHlsZU1lZGlhJiYoSFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLmdldENvbnRleHQ9KHI9SFRNTENhbnZhc0VsZW1lbnQucHJvdG90eXBlLmdldENvbnRleHQsZnVuY3Rpb24oKXt2YXIgZT1hcmd1bWVudHMsdD1lWzBdO3JldHVyblwid2ViZ2xcIj09PXQmJigoZT1bXS5zbGljZS5jYWxsKGFyZ3VtZW50cykpWzBdPVwiZXhwZXJpbWVudGFsLXdlYmdsXCIpLHIuYXBwbHkodGhpcyxlKX0pKSx7Y3JlYXRlUHJvZ3JhbTphLGNyZWF0ZVByb2dyYW1Gcm9tU291cmNlczpmdW5jdGlvbihlLHQsbixyLHMpe2Zvcih2YXIgYz1bXSxkPTA7ZDx0Lmxlbmd0aDsrK2QpYy5wdXNoKGkoZSx0W2RdLGVbb1tkXV0scykpO3JldHVybiBhKGUsYyxuLHIscyl9fX0uY2FsbChhKX0uYXBwbHkodCxbXSkpfHwoZS5leHBvcnRzPWkpfSxmdW5jdGlvbihlLHQsbil7XCJ1c2Ugc3RyaWN0XCI7dmFyIGk9dGhpcyYmdGhpcy5fX2F3YWl0ZXJ8fGZ1bmN0aW9uKGUsdCxuLGkpe3JldHVybiBuZXcobnx8KG49UHJvbWlzZSkpKGZ1bmN0aW9uKGEscil7ZnVuY3Rpb24gbyhlKXt0cnl7YyhpLm5leHQoZSkpfWNhdGNoKGUpe3IoZSl9fWZ1bmN0aW9uIHMoZSl7dHJ5e2MoaS50aHJvdyhlKSl9Y2F0Y2goZSl7cihlKX19ZnVuY3Rpb24gYyhlKXtlLmRvbmU/YShlLnZhbHVlKTpuZXcgbihmdW5jdGlvbih0KXt0KGUudmFsdWUpfSkudGhlbihvLHMpfWMoKGk9aS5hcHBseShlLHR8fFtdKSkubmV4dCgpKX0pfSxhPXRoaXMmJnRoaXMuX19nZW5lcmF0b3J8fGZ1bmN0aW9uKGUsdCl7dmFyIG4saSxhLHIsbz17bGFiZWw6MCxzZW50OmZ1bmN0aW9uKCl7aWYoMSZhWzBdKXRocm93IGFbMV07cmV0dXJuIGFbMV19LHRyeXM6W10sb3BzOltdfTtyZXR1cm4gcj17bmV4dDpzKDApLHRocm93OnMoMSkscmV0dXJuOnMoMil9LFwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbCYmKHJbU3ltYm9sLml0ZXJhdG9yXT1mdW5jdGlvbigpe3JldHVybiB0aGlzfSkscjtmdW5jdGlvbiBzKHIpe3JldHVybiBmdW5jdGlvbihzKXtyZXR1cm4gZnVuY3Rpb24ocil7aWYobil0aHJvdyBuZXcgVHlwZUVycm9yKFwiR2VuZXJhdG9yIGlzIGFscmVhZHkgZXhlY3V0aW5nLlwiKTtmb3IoO287KXRyeXtpZihuPTEsaSYmKGE9MiZyWzBdP2kucmV0dXJuOnJbMF0/aS50aHJvd3x8KChhPWkucmV0dXJuKSYmYS5jYWxsKGkpLDApOmkubmV4dCkmJiEoYT1hLmNhbGwoaSxyWzFdKSkuZG9uZSlyZXR1cm4gYTtzd2l0Y2goaT0wLGEmJihyPVsyJnJbMF0sYS52YWx1ZV0pLHJbMF0pe2Nhc2UgMDpjYXNlIDE6YT1yO2JyZWFrO2Nhc2UgNDpyZXR1cm4gby5sYWJlbCsrLHt2YWx1ZTpyWzFdLGRvbmU6ITF9O2Nhc2UgNTpvLmxhYmVsKyssaT1yWzFdLHI9WzBdO2NvbnRpbnVlO2Nhc2UgNzpyPW8ub3BzLnBvcCgpLG8udHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEoYT0oYT1vLnRyeXMpLmxlbmd0aD4wJiZhW2EubGVuZ3RoLTFdKSYmKDY9PT1yWzBdfHwyPT09clswXSkpe289MDtjb250aW51ZX1pZigzPT09clswXSYmKCFhfHxyWzFdPmFbMF0mJnJbMV08YVszXSkpe28ubGFiZWw9clsxXTticmVha31pZig2PT09clswXSYmby5sYWJlbDxhWzFdKXtvLmxhYmVsPWFbMV0sYT1yO2JyZWFrfWlmKGEmJm8ubGFiZWw8YVsyXSl7by5sYWJlbD1hWzJdLG8ub3BzLnB1c2gocik7YnJlYWt9YVsyXSYmby5vcHMucG9wKCksby50cnlzLnBvcCgpO2NvbnRpbnVlfXI9dC5jYWxsKGUsbyl9Y2F0Y2goZSl7cj1bNixlXSxpPTB9ZmluYWxseXtuPWE9MH1pZig1JnJbMF0pdGhyb3cgclsxXTtyZXR1cm57dmFsdWU6clswXT9yWzFdOnZvaWQgMCxkb25lOiEwfX0oW3Isc10pfX19LHI9dGhpcyYmdGhpcy5fX2ltcG9ydERlZmF1bHR8fGZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLl9fZXNNb2R1bGU/ZTp7ZGVmYXVsdDplfX0sbz10aGlzO09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LFwiX19lc01vZHVsZVwiLHt2YWx1ZTohMH0pO3ZhciBzPW4oMjkpLGM9big0KSxkPXIobigwKSk7dC5nZXRTdXBwb3J0ZWRDb2RlYz1mdW5jdGlvbihlKXtyZXR1cm4gaShvLHZvaWQgMCx2b2lkIDAsZnVuY3Rpb24oKXt2YXIgdCxuLGkscixvO3JldHVybiBhKHRoaXMsZnVuY3Rpb24oYSl7c3dpdGNoKGEubGFiZWwpe2Nhc2UgMDpyZXR1cm4gdD17dmlkZW86W10sYXVkaW86W119LFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/WzMsMV06KGQuZGVmYXVsdC5lcnJvcihcImdldFN1cHBvcnRlZENvZGVjOiBOT1RfQlJPV1NFUl9FTlZcIiksWzIsUHJvbWlzZS5yZWplY3QoXCJOT1RfQlJPV1NFUl9FTlZcIildKTtjYXNlIDE6dHJ5e249cy5jcmVhdGVSVENQZWVyQ29ubmVjdGlvbih7aWNlU2VydmVyczpbXX0pfWNhdGNoKGUpe3JldHVybiBkLmRlZmF1bHQuZXJyb3IoXCJGYWlsZWQgdG8gaW5pdCBSVENQZWVyQ29ubmVjdGlvblwiLGUpLFsyLFByb21pc2UucmVqZWN0KGUpXX1yZXR1cm4gbj9bMywyXTooZC5kZWZhdWx0Lndhcm5pbmcoXCJnZXRTdXBwb3J0ZWRDb2RlYzogbm8gUlRDUGVlckNvbm5lY3Rpb24gY29uc3RydWN0b3IgaXMgZGV0ZWN0ZWRcIiksWzIsUHJvbWlzZS5yZXNvbHZlKHQpXSk7Y2FzZSAyOnJldHVybiBlJiZlLnN0cmVhbT9bMyw3XTooaT17bWFuZGF0b3J5OntPZmZlclRvUmVjZWl2ZUF1ZGlvOiEwLE9mZmVyVG9SZWNlaXZlVmlkZW86ITB9fSxyPXZvaWQgMCwoYy5pc1NhZmFyaSgpfHxjLmlzRmlyZUZveCgpfHxjLmlzV2VDaGF0QnJvd3NlcigpKSYmbi5hZGRUcmFuc2NlaXZlcj8obi5hZGRUcmFuc2NlaXZlcihcImF1ZGlvXCIpLG4uYWRkVHJhbnNjZWl2ZXIoXCJ2aWRlb1wiKSxbNCxuLmNyZWF0ZU9mZmVyKCldKTpbMyw0XSk7Y2FzZSAzOnJldHVybiByPWEuc2VudCgpLFszLDZdO2Nhc2UgNDpyZXR1cm5bNCxuZXcgUHJvbWlzZShmdW5jdGlvbihlLHQpe3ZhciBhPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KFwiQ1JFQVRFT0ZGRVJfVElNRU9VVFwiKX0sM2UzKTtuLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uKHQpe2NsZWFyVGltZW91dChhKSxlKHQpfSxmdW5jdGlvbihlKXtjbGVhclRpbWVvdXQoYSksdChlKX0saSl9KV07Y2FzZSA1OnI9YS5zZW50KCksYS5sYWJlbD02O2Nhc2UgNjpyZXR1cm4gbi5jbG9zZSgpLG89ci5zZHAsWzIsdShvKV07Y2FzZSA3OnJldHVybiBlLnN0cmVhbS5nZXRUcmFja3MmJm4uYWRkVHJhY2s/ZS5zdHJlYW0uZ2V0VHJhY2tzKCkuZm9yRWFjaChmdW5jdGlvbih0KXtuLmFkZFRyYWNrKHQsZS5zdHJlYW0pfSk6bi5hZGRTdHJlYW0oZS5zdHJlYW0pLHI9dm9pZCAwLGMuaXNTYWZhcmkoKXx8Yy5pc0ZpcmVGb3goKT9bNCxuLmNyZWF0ZU9mZmVyKCldOlszLDldO2Nhc2UgODpyZXR1cm4gcj1hLnNlbnQoKSxbMywxMV07Y2FzZSA5OnJldHVybls0LG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUsdCl7bi5jcmVhdGVPZmZlcihlLHQpfSldO2Nhc2UgMTA6cj1hLnNlbnQoKSxhLmxhYmVsPTExO2Nhc2UgMTE6cmV0dXJuIG4uY2xvc2UoKSxvPXIuc2RwLFsyLHUobyldfX0pfSl9O3ZhciB1PWZ1bmN0aW9uKGUpe3ZhciB0PXt2aWRlbzpbXSxhdWRpbzpbXX07cmV0dXJuIGUubWF0Y2goLyBWUDgvaSkmJnQudmlkZW8ucHVzaChcIlZQOFwiKSxlLm1hdGNoKC8gSDI2NC9pKSYmdC52aWRlby5wdXNoKFwiSDI2NFwiKSxlLm1hdGNoKC8gb3B1cy9pKSYmdC5hdWRpby5wdXNoKFwiT1BVU1wiKSxQcm9taXNlLnJlc29sdmUodCl9fSxmdW5jdGlvbihlLHQsbil7dmFyIGk9bigzMSksYT1uKDMyKSxyPW4oMzMpO2UuZXhwb3J0cz1mdW5jdGlvbihlKXtyZXR1cm4gaShlKXx8YShlKXx8cigpfX0sZnVuY3Rpb24oZSx0KXt2YXIgbj1cInVuZGVmaW5lZFwiIT10eXBlb2YgY3J5cHRvJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZjcnlwdG8uZ2V0UmFuZG9tVmFsdWVzLmJpbmQoY3J5cHRvKXx8XCJ1bmRlZmluZWRcIiE9dHlwZW9mIG1zQ3J5cHRvJiZcImZ1bmN0aW9uXCI9PXR5cGVvZiB3aW5kb3cubXNDcnlwdG8uZ2V0UmFuZG9tVmFsdWVzJiZtc0NyeXB0by5nZXRSYW5kb21WYWx1ZXMuYmluZChtc0NyeXB0byk7aWYobil7dmFyIGk9bmV3IFVpbnQ4QXJyYXkoMTYpO2UuZXhwb3J0cz1mdW5jdGlvbigpe3JldHVybiBuKGkpLGl9fWVsc2V7dmFyIGE9bmV3IEFycmF5KDE2KTtlLmV4cG9ydHM9ZnVuY3Rpb24oKXtmb3IodmFyIGUsdD0wO3Q8MTY7dCsrKTA9PSgzJnQpJiYoZT00Mjk0OTY3Mjk2Kk1hdGgucmFuZG9tKCkpLGFbdF09ZT4+PigoMyZ0KTw8MykmMjU1O3JldHVybiBhfX19LGZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPVtdLGk9MDtpPDI1NjsrK2kpbltpXT0oaSsyNTYpLnRvU3RyaW5nKDE2KS5zdWJzdHIoMSk7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCl7dmFyIGk9dHx8MCxhPW47cmV0dXJuW2FbZVtpKytdXSxhW2VbaSsrXV0sYVtlW2krK11dLGFbZVtpKytdXSxcIi1cIixhW2VbaSsrXV0sYVtlW2krK11dLFwiLVwiLGFbZVtpKytdXSxhW2VbaSsrXV0sXCItXCIsYVtlW2krK11dLGFbZVtpKytdXSxcIi1cIixhW2VbaSsrXV0sYVtlW2krK11dLGFbZVtpKytdXSxhW2VbaSsrXV0sYVtlW2krK11dLGFbZVtpKytdXV0uam9pbihcIlwiKX19LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdCBpbiBlP09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQse3ZhbHVlOm4sZW51bWVyYWJsZTohMCxjb25maWd1cmFibGU6ITAsd3JpdGFibGU6ITB9KTplW3RdPW4sZX19LGZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1mdW5jdGlvbigpe3JldHVybiB0aGlzfHxcIm9iamVjdFwiPT10eXBlb2Ygc2VsZiYmc2VsZn0oKXx8RnVuY3Rpb24oXCJyZXR1cm4gdGhpc1wiKSgpLGE9aS5yZWdlbmVyYXRvclJ1bnRpbWUmJk9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKGkpLmluZGV4T2YoXCJyZWdlbmVyYXRvclJ1bnRpbWVcIik+PTAscj1hJiZpLnJlZ2VuZXJhdG9yUnVudGltZTtpZihpLnJlZ2VuZXJhdG9yUnVudGltZT12b2lkIDAsZS5leHBvcnRzPW4oMjUpLGEpaS5yZWdlbmVyYXRvclJ1bnRpbWU9cjtlbHNlIHRyeXtkZWxldGUgaS5yZWdlbmVyYXRvclJ1bnRpbWV9Y2F0Y2goZSl7aS5yZWdlbmVyYXRvclJ1bnRpbWU9dm9pZCAwfX0sZnVuY3Rpb24oZSx0KXshZnVuY3Rpb24odCl7XCJ1c2Ugc3RyaWN0XCI7dmFyIG4saT1PYmplY3QucHJvdG90eXBlLGE9aS5oYXNPd25Qcm9wZXJ0eSxyPVwiZnVuY3Rpb25cIj09dHlwZW9mIFN5bWJvbD9TeW1ib2w6e30sbz1yLml0ZXJhdG9yfHxcIkBAaXRlcmF0b3JcIixzPXIuYXN5bmNJdGVyYXRvcnx8XCJAQGFzeW5jSXRlcmF0b3JcIixjPXIudG9TdHJpbmdUYWd8fFwiQEB0b1N0cmluZ1RhZ1wiLGQ9XCJvYmplY3RcIj09dHlwZW9mIGUsdT10LnJlZ2VuZXJhdG9yUnVudGltZTtpZih1KWQmJihlLmV4cG9ydHM9dSk7ZWxzZXsodT10LnJlZ2VuZXJhdG9yUnVudGltZT1kP2UuZXhwb3J0czp7fSkud3JhcD1FO3ZhciBsPVwic3VzcGVuZGVkU3RhcnRcIixwPVwic3VzcGVuZGVkWWllbGRcIixmPVwiZXhlY3V0aW5nXCIsbT1cImNvbXBsZXRlZFwiLGc9e30sdj17fTt2W29dPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9O3ZhciBoPU9iamVjdC5nZXRQcm90b3R5cGVPZixTPWgmJmgoaChrKFtdKSkpO1MmJlMhPT1pJiZhLmNhbGwoUyxvKSYmKHY9Uyk7dmFyIF89Yi5wcm90b3R5cGU9eS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh2KTtULnByb3RvdHlwZT1fLmNvbnN0cnVjdG9yPWIsYi5jb25zdHJ1Y3Rvcj1ULGJbY109VC5kaXNwbGF5TmFtZT1cIkdlbmVyYXRvckZ1bmN0aW9uXCIsdS5pc0dlbmVyYXRvckZ1bmN0aW9uPWZ1bmN0aW9uKGUpe3ZhciB0PVwiZnVuY3Rpb25cIj09dHlwZW9mIGUmJmUuY29uc3RydWN0b3I7cmV0dXJuISF0JiYodD09PVR8fFwiR2VuZXJhdG9yRnVuY3Rpb25cIj09PSh0LmRpc3BsYXlOYW1lfHx0Lm5hbWUpKX0sdS5tYXJrPWZ1bmN0aW9uKGUpe3JldHVybiBPYmplY3Quc2V0UHJvdG90eXBlT2Y/T2JqZWN0LnNldFByb3RvdHlwZU9mKGUsYik6KGUuX19wcm90b19fPWIsYyBpbiBlfHwoZVtjXT1cIkdlbmVyYXRvckZ1bmN0aW9uXCIpKSxlLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKF8pLGV9LHUuYXdyYXA9ZnVuY3Rpb24oZSl7cmV0dXJue19fYXdhaXQ6ZX19LFIoQS5wcm90b3R5cGUpLEEucHJvdG90eXBlW3NdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9LHUuQXN5bmNJdGVyYXRvcj1BLHUuYXN5bmM9ZnVuY3Rpb24oZSx0LG4saSl7dmFyIGE9bmV3IEEoRShlLHQsbixpKSk7cmV0dXJuIHUuaXNHZW5lcmF0b3JGdW5jdGlvbih0KT9hOmEubmV4dCgpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuZG9uZT9lLnZhbHVlOmEubmV4dCgpfSl9LFIoXyksX1tjXT1cIkdlbmVyYXRvclwiLF9bb109ZnVuY3Rpb24oKXtyZXR1cm4gdGhpc30sXy50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiW29iamVjdCBHZW5lcmF0b3JdXCJ9LHUua2V5cz1mdW5jdGlvbihlKXt2YXIgdD1bXTtmb3IodmFyIG4gaW4gZSl0LnB1c2gobik7cmV0dXJuIHQucmV2ZXJzZSgpLGZ1bmN0aW9uIG4oKXtmb3IoO3QubGVuZ3RoOyl7dmFyIGk9dC5wb3AoKTtpZihpIGluIGUpcmV0dXJuIG4udmFsdWU9aSxuLmRvbmU9ITEsbn1yZXR1cm4gbi5kb25lPSEwLG59fSx1LnZhbHVlcz1rLHcucHJvdG90eXBlPXtjb25zdHJ1Y3Rvcjp3LHJlc2V0OmZ1bmN0aW9uKGUpe2lmKHRoaXMucHJldj0wLHRoaXMubmV4dD0wLHRoaXMuc2VudD10aGlzLl9zZW50PW4sdGhpcy5kb25lPSExLHRoaXMuZGVsZWdhdGU9bnVsbCx0aGlzLm1ldGhvZD1cIm5leHRcIix0aGlzLmFyZz1uLHRoaXMudHJ5RW50cmllcy5mb3JFYWNoKE4pLCFlKWZvcih2YXIgdCBpbiB0aGlzKVwidFwiPT09dC5jaGFyQXQoMCkmJmEuY2FsbCh0aGlzLHQpJiYhaXNOYU4oK3Quc2xpY2UoMSkpJiYodGhpc1t0XT1uKX0sc3RvcDpmdW5jdGlvbigpe3RoaXMuZG9uZT0hMDt2YXIgZT10aGlzLnRyeUVudHJpZXNbMF0uY29tcGxldGlvbjtpZihcInRocm93XCI9PT1lLnR5cGUpdGhyb3cgZS5hcmc7cmV0dXJuIHRoaXMucnZhbH0sZGlzcGF0Y2hFeGNlcHRpb246ZnVuY3Rpb24oZSl7aWYodGhpcy5kb25lKXRocm93IGU7dmFyIHQ9dGhpcztmdW5jdGlvbiBpKGksYSl7cmV0dXJuIHMudHlwZT1cInRocm93XCIscy5hcmc9ZSx0Lm5leHQ9aSxhJiYodC5tZXRob2Q9XCJuZXh0XCIsdC5hcmc9biksISFhfWZvcih2YXIgcj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7cj49MDstLXIpe3ZhciBvPXRoaXMudHJ5RW50cmllc1tyXSxzPW8uY29tcGxldGlvbjtpZihcInJvb3RcIj09PW8udHJ5TG9jKXJldHVybiBpKFwiZW5kXCIpO2lmKG8udHJ5TG9jPD10aGlzLnByZXYpe3ZhciBjPWEuY2FsbChvLFwiY2F0Y2hMb2NcIiksZD1hLmNhbGwobyxcImZpbmFsbHlMb2NcIik7aWYoYyYmZCl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCk7aWYodGhpcy5wcmV2PG8uZmluYWxseUxvYylyZXR1cm4gaShvLmZpbmFsbHlMb2MpfWVsc2UgaWYoYyl7aWYodGhpcy5wcmV2PG8uY2F0Y2hMb2MpcmV0dXJuIGkoby5jYXRjaExvYywhMCl9ZWxzZXtpZighZCl0aHJvdyBuZXcgRXJyb3IoXCJ0cnkgc3RhdGVtZW50IHdpdGhvdXQgY2F0Y2ggb3IgZmluYWxseVwiKTtpZih0aGlzLnByZXY8by5maW5hbGx5TG9jKXJldHVybiBpKG8uZmluYWxseUxvYyl9fX19LGFicnVwdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7bj49MDstLW4pe3ZhciBpPXRoaXMudHJ5RW50cmllc1tuXTtpZihpLnRyeUxvYzw9dGhpcy5wcmV2JiZhLmNhbGwoaSxcImZpbmFsbHlMb2NcIikmJnRoaXMucHJldjxpLmZpbmFsbHlMb2Mpe3ZhciByPWk7YnJlYWt9fXImJihcImJyZWFrXCI9PT1lfHxcImNvbnRpbnVlXCI9PT1lKSYmci50cnlMb2M8PXQmJnQ8PXIuZmluYWxseUxvYyYmKHI9bnVsbCk7dmFyIG89cj9yLmNvbXBsZXRpb246e307cmV0dXJuIG8udHlwZT1lLG8uYXJnPXQscj8odGhpcy5tZXRob2Q9XCJuZXh0XCIsdGhpcy5uZXh0PXIuZmluYWxseUxvYyxnKTp0aGlzLmNvbXBsZXRlKG8pfSxjb21wbGV0ZTpmdW5jdGlvbihlLHQpe2lmKFwidGhyb3dcIj09PWUudHlwZSl0aHJvdyBlLmFyZztyZXR1cm5cImJyZWFrXCI9PT1lLnR5cGV8fFwiY29udGludWVcIj09PWUudHlwZT90aGlzLm5leHQ9ZS5hcmc6XCJyZXR1cm5cIj09PWUudHlwZT8odGhpcy5ydmFsPXRoaXMuYXJnPWUuYXJnLHRoaXMubWV0aG9kPVwicmV0dXJuXCIsdGhpcy5uZXh0PVwiZW5kXCIpOlwibm9ybWFsXCI9PT1lLnR5cGUmJnQmJih0aGlzLm5leHQ9dCksZ30sZmluaXNoOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD10aGlzLnRyeUVudHJpZXMubGVuZ3RoLTE7dD49MDstLXQpe3ZhciBuPXRoaXMudHJ5RW50cmllc1t0XTtpZihuLmZpbmFsbHlMb2M9PT1lKXJldHVybiB0aGlzLmNvbXBsZXRlKG4uY29tcGxldGlvbixuLmFmdGVyTG9jKSxOKG4pLGd9fSxjYXRjaDpmdW5jdGlvbihlKXtmb3IodmFyIHQ9dGhpcy50cnlFbnRyaWVzLmxlbmd0aC0xO3Q+PTA7LS10KXt2YXIgbj10aGlzLnRyeUVudHJpZXNbdF07aWYobi50cnlMb2M9PT1lKXt2YXIgaT1uLmNvbXBsZXRpb247aWYoXCJ0aHJvd1wiPT09aS50eXBlKXt2YXIgYT1pLmFyZztOKG4pfXJldHVybiBhfX10aHJvdyBuZXcgRXJyb3IoXCJpbGxlZ2FsIGNhdGNoIGF0dGVtcHRcIil9LGRlbGVnYXRlWWllbGQ6ZnVuY3Rpb24oZSx0LGkpe3JldHVybiB0aGlzLmRlbGVnYXRlPXtpdGVyYXRvcjprKGUpLHJlc3VsdE5hbWU6dCxuZXh0TG9jOml9LFwibmV4dFwiPT09dGhpcy5tZXRob2QmJih0aGlzLmFyZz1uKSxnfX19ZnVuY3Rpb24gRShlLHQsbixpKXt2YXIgYT10JiZ0LnByb3RvdHlwZSBpbnN0YW5jZW9mIHk/dDp5LHI9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksbz1uZXcgdyhpfHxbXSk7cmV0dXJuIHIuX2ludm9rZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9bDtyZXR1cm4gZnVuY3Rpb24oYSxyKXtpZihpPT09Zil0aHJvdyBuZXcgRXJyb3IoXCJHZW5lcmF0b3IgaXMgYWxyZWFkeSBydW5uaW5nXCIpO2lmKGk9PT1tKXtpZihcInRocm93XCI9PT1hKXRocm93IHI7cmV0dXJuIEQoKX1mb3Iobi5tZXRob2Q9YSxuLmFyZz1yOzspe3ZhciBvPW4uZGVsZWdhdGU7aWYobyl7dmFyIHM9TyhvLG4pO2lmKHMpe2lmKHM9PT1nKWNvbnRpbnVlO3JldHVybiBzfX1pZihcIm5leHRcIj09PW4ubWV0aG9kKW4uc2VudD1uLl9zZW50PW4uYXJnO2Vsc2UgaWYoXCJ0aHJvd1wiPT09bi5tZXRob2Qpe2lmKGk9PT1sKXRocm93IGk9bSxuLmFyZztuLmRpc3BhdGNoRXhjZXB0aW9uKG4uYXJnKX1lbHNlXCJyZXR1cm5cIj09PW4ubWV0aG9kJiZuLmFicnVwdChcInJldHVyblwiLG4uYXJnKTtpPWY7dmFyIGM9SShlLHQsbik7aWYoXCJub3JtYWxcIj09PWMudHlwZSl7aWYoaT1uLmRvbmU/bTpwLGMuYXJnPT09Zyljb250aW51ZTtyZXR1cm57dmFsdWU6Yy5hcmcsZG9uZTpuLmRvbmV9fVwidGhyb3dcIj09PWMudHlwZSYmKGk9bSxuLm1ldGhvZD1cInRocm93XCIsbi5hcmc9Yy5hcmcpfX19KGUsbixvKSxyfWZ1bmN0aW9uIEkoZSx0LG4pe3RyeXtyZXR1cm57dHlwZTpcIm5vcm1hbFwiLGFyZzplLmNhbGwodCxuKX19Y2F0Y2goZSl7cmV0dXJue3R5cGU6XCJ0aHJvd1wiLGFyZzplfX19ZnVuY3Rpb24geSgpe31mdW5jdGlvbiBUKCl7fWZ1bmN0aW9uIGIoKXt9ZnVuY3Rpb24gUihlKXtbXCJuZXh0XCIsXCJ0aHJvd1wiLFwicmV0dXJuXCJdLmZvckVhY2goZnVuY3Rpb24odCl7ZVt0XT1mdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5faW52b2tlKHQsZSl9fSl9ZnVuY3Rpb24gQShlKXt2YXIgdDt0aGlzLl9pbnZva2U9ZnVuY3Rpb24obixpKXtmdW5jdGlvbiByKCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKHQscil7IWZ1bmN0aW9uIHQobixpLHIsbyl7dmFyIHM9SShlW25dLGUsaSk7aWYoXCJ0aHJvd1wiIT09cy50eXBlKXt2YXIgYz1zLmFyZyxkPWMudmFsdWU7cmV0dXJuIGQmJlwib2JqZWN0XCI9PXR5cGVvZiBkJiZhLmNhbGwoZCxcIl9fYXdhaXRcIik/UHJvbWlzZS5yZXNvbHZlKGQuX19hd2FpdCkudGhlbihmdW5jdGlvbihlKXt0KFwibmV4dFwiLGUscixvKX0sZnVuY3Rpb24oZSl7dChcInRocm93XCIsZSxyLG8pfSk6UHJvbWlzZS5yZXNvbHZlKGQpLnRoZW4oZnVuY3Rpb24oZSl7Yy52YWx1ZT1lLHIoYyl9LGZ1bmN0aW9uKGUpe3JldHVybiB0KFwidGhyb3dcIixlLHIsbyl9KX1vKHMuYXJnKX0obixpLHQscil9KX1yZXR1cm4gdD10P3QudGhlbihyLHIpOnIoKX19ZnVuY3Rpb24gTyhlLHQpe3ZhciBpPWUuaXRlcmF0b3JbdC5tZXRob2RdO2lmKGk9PT1uKXtpZih0LmRlbGVnYXRlPW51bGwsXCJ0aHJvd1wiPT09dC5tZXRob2Qpe2lmKGUuaXRlcmF0b3IucmV0dXJuJiYodC5tZXRob2Q9XCJyZXR1cm5cIix0LmFyZz1uLE8oZSx0KSxcInRocm93XCI9PT10Lm1ldGhvZCkpcmV0dXJuIGc7dC5tZXRob2Q9XCJ0aHJvd1wiLHQuYXJnPW5ldyBUeXBlRXJyb3IoXCJUaGUgaXRlcmF0b3IgZG9lcyBub3QgcHJvdmlkZSBhICd0aHJvdycgbWV0aG9kXCIpfXJldHVybiBnfXZhciBhPUkoaSxlLml0ZXJhdG9yLHQuYXJnKTtpZihcInRocm93XCI9PT1hLnR5cGUpcmV0dXJuIHQubWV0aG9kPVwidGhyb3dcIix0LmFyZz1hLmFyZyx0LmRlbGVnYXRlPW51bGwsZzt2YXIgcj1hLmFyZztyZXR1cm4gcj9yLmRvbmU/KHRbZS5yZXN1bHROYW1lXT1yLnZhbHVlLHQubmV4dD1lLm5leHRMb2MsXCJyZXR1cm5cIiE9PXQubWV0aG9kJiYodC5tZXRob2Q9XCJuZXh0XCIsdC5hcmc9biksdC5kZWxlZ2F0ZT1udWxsLGcpOnI6KHQubWV0aG9kPVwidGhyb3dcIix0LmFyZz1uZXcgVHlwZUVycm9yKFwiaXRlcmF0b3IgcmVzdWx0IGlzIG5vdCBhbiBvYmplY3RcIiksdC5kZWxlZ2F0ZT1udWxsLGcpfWZ1bmN0aW9uIEMoZSl7dmFyIHQ9e3RyeUxvYzplWzBdfTsxIGluIGUmJih0LmNhdGNoTG9jPWVbMV0pLDIgaW4gZSYmKHQuZmluYWxseUxvYz1lWzJdLHQuYWZ0ZXJMb2M9ZVszXSksdGhpcy50cnlFbnRyaWVzLnB1c2godCl9ZnVuY3Rpb24gTihlKXt2YXIgdD1lLmNvbXBsZXRpb258fHt9O3QudHlwZT1cIm5vcm1hbFwiLGRlbGV0ZSB0LmFyZyxlLmNvbXBsZXRpb249dH1mdW5jdGlvbiB3KGUpe3RoaXMudHJ5RW50cmllcz1be3RyeUxvYzpcInJvb3RcIn1dLGUuZm9yRWFjaChDLHRoaXMpLHRoaXMucmVzZXQoITApfWZ1bmN0aW9uIGsoZSl7aWYoZSl7dmFyIHQ9ZVtvXTtpZih0KXJldHVybiB0LmNhbGwoZSk7aWYoXCJmdW5jdGlvblwiPT10eXBlb2YgZS5uZXh0KXJldHVybiBlO2lmKCFpc05hTihlLmxlbmd0aCkpe3ZhciBpPS0xLHI9ZnVuY3Rpb24gdCgpe2Zvcig7KytpPGUubGVuZ3RoOylpZihhLmNhbGwoZSxpKSlyZXR1cm4gdC52YWx1ZT1lW2ldLHQuZG9uZT0hMSx0O3JldHVybiB0LnZhbHVlPW4sdC5kb25lPSEwLHR9O3JldHVybiByLm5leHQ9cn19cmV0dXJue25leHQ6RH19ZnVuY3Rpb24gRCgpe3JldHVybnt2YWx1ZTpuLGRvbmU6ITB9fX0oZnVuY3Rpb24oKXtyZXR1cm4gdGhpc3x8XCJvYmplY3RcIj09dHlwZW9mIHNlbGYmJnNlbGZ9KCl8fEZ1bmN0aW9uKFwicmV0dXJuIHRoaXNcIikoKSl9LGZ1bmN0aW9uKGUsdCl7ZS5leHBvcnRzPWZ1bmN0aW9uKGUpe2lmKEFycmF5LmlzQXJyYXkoZSkpcmV0dXJuIGV9fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlLHQpe3ZhciBuPVtdLGk9ITAsYT0hMSxyPXZvaWQgMDt0cnl7Zm9yKHZhciBvLHM9ZVtTeW1ib2wuaXRlcmF0b3JdKCk7IShpPShvPXMubmV4dCgpKS5kb25lKSYmKG4ucHVzaChvLnZhbHVlKSwhdHx8bi5sZW5ndGghPT10KTtpPSEwKTt9Y2F0Y2goZSl7YT0hMCxyPWV9ZmluYWxseXt0cnl7aXx8bnVsbD09cy5yZXR1cm58fHMucmV0dXJuKCl9ZmluYWxseXtpZihhKXRocm93IHJ9fXJldHVybiBufX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIGRlc3RydWN0dXJlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZVwiKX19LGZ1bmN0aW9uKGUsdCxuKXtcInVzZSBzdHJpY3RcIjtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxcIl9fZXNNb2R1bGVcIix7dmFsdWU6ITB9KTt2YXIgaT1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cuUlRDUGVlckNvbm5lY3Rpb24sYT1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cud2Via2l0UlRDUGVlckNvbm5lY3Rpb24scj1cIm9iamVjdFwiPT10eXBlb2Ygd2luZG93JiZ3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb247dC5jcmVhdGVSVENQZWVyQ29ubmVjdGlvbj1mdW5jdGlvbihlKXt2YXIgdD1pfHxhfHxyO3JldHVybiB0P25ldyB0KGUpOm51bGx9fSxmdW5jdGlvbihlLHQsbil7dmFyIGk7XG4vKiFcbiAqIEV2ZW50RW1pdHRlciB2NS4yLjggLSBnaXQuaW8vZWVcbiAqIFVubGljZW5zZSAtIGh0dHA6Ly91bmxpY2Vuc2Uub3JnL1xuICogT2xpdmVyIENhbGR3ZWxsIC0gaHR0cHM6Ly9vbGkubWUudWsvXG4gKiBAcHJlc2VydmVcbiAqLyFmdW5jdGlvbih0KXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiBhKCl7fXZhciByPWEucHJvdG90eXBlLG89dC5FdmVudEVtaXR0ZXI7ZnVuY3Rpb24gcyhlLHQpe2Zvcih2YXIgbj1lLmxlbmd0aDtuLS07KWlmKGVbbl0ubGlzdGVuZXI9PT10KXJldHVybiBuO3JldHVybi0xfWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXNbZV0uYXBwbHkodGhpcyxhcmd1bWVudHMpfX1yLmdldExpc3RlbmVycz1mdW5jdGlvbihlKXt2YXIgdCxuLGk9dGhpcy5fZ2V0RXZlbnRzKCk7aWYoZSBpbnN0YW5jZW9mIFJlZ0V4cClmb3IobiBpbiB0PXt9LGkpaS5oYXNPd25Qcm9wZXJ0eShuKSYmZS50ZXN0KG4pJiYodFtuXT1pW25dKTtlbHNlIHQ9aVtlXXx8KGlbZV09W10pO3JldHVybiB0fSxyLmZsYXR0ZW5MaXN0ZW5lcnM9ZnVuY3Rpb24oZSl7dmFyIHQsbj1bXTtmb3IodD0wO3Q8ZS5sZW5ndGg7dCs9MSluLnB1c2goZVt0XS5saXN0ZW5lcik7cmV0dXJuIG59LHIuZ2V0TGlzdGVuZXJzQXNPYmplY3Q9ZnVuY3Rpb24oZSl7dmFyIHQsbj10aGlzLmdldExpc3RlbmVycyhlKTtyZXR1cm4gbiBpbnN0YW5jZW9mIEFycmF5JiYoKHQ9e30pW2VdPW4pLHR8fG59LHIuYWRkTGlzdGVuZXI9ZnVuY3Rpb24oZSx0KXtpZighZnVuY3Rpb24gZSh0KXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiB0fHx0IGluc3RhbmNlb2YgUmVnRXhwfHwhKCF0fHxcIm9iamVjdFwiIT10eXBlb2YgdCkmJmUodC5saXN0ZW5lcil9KHQpKXRocm93IG5ldyBUeXBlRXJyb3IoXCJsaXN0ZW5lciBtdXN0IGJlIGEgZnVuY3Rpb25cIik7dmFyIG4saT10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpLGE9XCJvYmplY3RcIj09dHlwZW9mIHQ7Zm9yKG4gaW4gaSlpLmhhc093blByb3BlcnR5KG4pJiYtMT09PXMoaVtuXSx0KSYmaVtuXS5wdXNoKGE/dDp7bGlzdGVuZXI6dCxvbmNlOiExfSk7cmV0dXJuIHRoaXN9LHIub249YyhcImFkZExpc3RlbmVyXCIpLHIuYWRkT25jZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuYWRkTGlzdGVuZXIoZSx7bGlzdGVuZXI6dCxvbmNlOiEwfSl9LHIub25jZT1jKFwiYWRkT25jZUxpc3RlbmVyXCIpLHIuZGVmaW5lRXZlbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuZ2V0TGlzdGVuZXJzKGUpLHRoaXN9LHIuZGVmaW5lRXZlbnRzPWZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCs9MSl0aGlzLmRlZmluZUV2ZW50KGVbdF0pO3JldHVybiB0aGlzfSxyLnJlbW92ZUxpc3RlbmVyPWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxhPXRoaXMuZ2V0TGlzdGVuZXJzQXNPYmplY3QoZSk7Zm9yKGkgaW4gYSlhLmhhc093blByb3BlcnR5KGkpJiYtMSE9PShuPXMoYVtpXSx0KSkmJmFbaV0uc3BsaWNlKG4sMSk7cmV0dXJuIHRoaXN9LHIub2ZmPWMoXCJyZW1vdmVMaXN0ZW5lclwiKSxyLmFkZExpc3RlbmVycz1mdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLm1hbmlwdWxhdGVMaXN0ZW5lcnMoITEsZSx0KX0sci5yZW1vdmVMaXN0ZW5lcnM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5tYW5pcHVsYXRlTGlzdGVuZXJzKCEwLGUsdCl9LHIubWFuaXB1bGF0ZUxpc3RlbmVycz1mdW5jdGlvbihlLHQsbil7dmFyIGksYSxyPWU/dGhpcy5yZW1vdmVMaXN0ZW5lcjp0aGlzLmFkZExpc3RlbmVyLG89ZT90aGlzLnJlbW92ZUxpc3RlbmVyczp0aGlzLmFkZExpc3RlbmVycztpZihcIm9iamVjdFwiIT10eXBlb2YgdHx8dCBpbnN0YW5jZW9mIFJlZ0V4cClmb3IoaT1uLmxlbmd0aDtpLS07KXIuY2FsbCh0aGlzLHQsbltpXSk7ZWxzZSBmb3IoaSBpbiB0KXQuaGFzT3duUHJvcGVydHkoaSkmJihhPXRbaV0pJiYoXCJmdW5jdGlvblwiPT10eXBlb2YgYT9yLmNhbGwodGhpcyxpLGEpOm8uY2FsbCh0aGlzLGksYSkpO3JldHVybiB0aGlzfSxyLnJlbW92ZUV2ZW50PWZ1bmN0aW9uKGUpe3ZhciB0LG49dHlwZW9mIGUsaT10aGlzLl9nZXRFdmVudHMoKTtpZihcInN0cmluZ1wiPT09bilkZWxldGUgaVtlXTtlbHNlIGlmKGUgaW5zdGFuY2VvZiBSZWdFeHApZm9yKHQgaW4gaSlpLmhhc093blByb3BlcnR5KHQpJiZlLnRlc3QodCkmJmRlbGV0ZSBpW3RdO2Vsc2UgZGVsZXRlIHRoaXMuX2V2ZW50cztyZXR1cm4gdGhpc30sci5yZW1vdmVBbGxMaXN0ZW5lcnM9YyhcInJlbW92ZUV2ZW50XCIpLHIuZW1pdEV2ZW50PWZ1bmN0aW9uKGUsdCl7dmFyIG4saSxhLHIsbz10aGlzLmdldExpc3RlbmVyc0FzT2JqZWN0KGUpO2ZvcihyIGluIG8paWYoby5oYXNPd25Qcm9wZXJ0eShyKSlmb3Iobj1vW3JdLnNsaWNlKDApLGE9MDthPG4ubGVuZ3RoO2ErKykhMD09PShpPW5bYV0pLm9uY2UmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxpLmxpc3RlbmVyKSxpLmxpc3RlbmVyLmFwcGx5KHRoaXMsdHx8W10pPT09dGhpcy5fZ2V0T25jZVJldHVyblZhbHVlKCkmJnRoaXMucmVtb3ZlTGlzdGVuZXIoZSxpLmxpc3RlbmVyKTtyZXR1cm4gdGhpc30sci50cmlnZ2VyPWMoXCJlbWl0RXZlbnRcIiksci5lbWl0PWZ1bmN0aW9uKGUpe3ZhciB0PUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gdGhpcy5lbWl0RXZlbnQoZSx0KX0sci5zZXRPbmNlUmV0dXJuVmFsdWU9ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuX29uY2VSZXR1cm5WYWx1ZT1lLHRoaXN9LHIuX2dldE9uY2VSZXR1cm5WYWx1ZT1mdW5jdGlvbigpe3JldHVybiF0aGlzLmhhc093blByb3BlcnR5KFwiX29uY2VSZXR1cm5WYWx1ZVwiKXx8dGhpcy5fb25jZVJldHVyblZhbHVlfSxyLl9nZXRFdmVudHM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZXZlbnRzfHwodGhpcy5fZXZlbnRzPXt9KX0sYS5ub0NvbmZsaWN0PWZ1bmN0aW9uKCl7cmV0dXJuIHQuRXZlbnRFbWl0dGVyPW8sYX0sdm9pZCAwPT09KGk9ZnVuY3Rpb24oKXtyZXR1cm4gYX0uY2FsbCh0LG4sdCxlKSl8fChlLmV4cG9ydHM9aSl9KFwidW5kZWZpbmVkXCIhPXR5cGVvZiB3aW5kb3c/d2luZG93OnRoaXN8fHt9KX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oZSl7aWYoQXJyYXkuaXNBcnJheShlKSl7Zm9yKHZhciB0PTAsbj1uZXcgQXJyYXkoZS5sZW5ndGgpO3Q8ZS5sZW5ndGg7dCsrKW5bdF09ZVt0XTtyZXR1cm4gbn19fSxmdW5jdGlvbihlLHQpe2UuZXhwb3J0cz1mdW5jdGlvbihlKXtpZihTeW1ib2wuaXRlcmF0b3IgaW4gT2JqZWN0KGUpfHxcIltvYmplY3QgQXJndW1lbnRzXVwiPT09T2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKGUpKXJldHVybiBBcnJheS5mcm9tKGUpfX0sZnVuY3Rpb24oZSx0KXtlLmV4cG9ydHM9ZnVuY3Rpb24oKXt0aHJvdyBuZXcgVHlwZUVycm9yKFwiSW52YWxpZCBhdHRlbXB0IHRvIHNwcmVhZCBub24taXRlcmFibGUgaW5zdGFuY2VcIil9fSxmdW5jdGlvbih0LG4sYSl7XCJ1c2Ugc3RyaWN0XCI7YS5yKG4pO3ZhciByPWEoMyksbz1hKDApLHM9YSgyKSxjPWZ1bmN0aW9uKCl7dmFyIGU9e2Rpc3BhdGNoZXI6e319O3JldHVybiBlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnM9e30sZS5hZGRFdmVudExpc3RlbmVyPWZ1bmN0aW9uKHQsbil7dm9pZCAwPT09ZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3RdJiYoZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3RdPVtdKSxlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdF0ucHVzaChuKX0sZS5oYXNMaXN0ZW5lcnM9ZnVuY3Rpb24odCl7cmV0dXJuISghZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3RdfHwhZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3RdLmxlbmd0aCl9LGUub249ZS5hZGRFdmVudExpc3RlbmVyLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0LG4pe3ZhciBpOy0xIT09KGk9ZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3RdLmluZGV4T2YobikpJiZlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdF0uc3BsaWNlKGksMSl9LGUuZGlzcGF0Y2hFdmVudD1mdW5jdGlvbih0LG4pe3ZhciBpO2ZvcihpIGluIGUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0LnR5cGVdKWUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0LnR5cGVdJiZlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXS5oYXNPd25Qcm9wZXJ0eShpKSYmXCJmdW5jdGlvblwiPT10eXBlb2YgZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3QudHlwZV1baV0mJihuP2UuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0LnR5cGVdW2ldKHQpOlByb21pc2UucmVzb2x2ZSh0KS50aGVuKGUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0LnR5cGVdW2ldKSl9LGUuZGlzcGF0Y2hTb2NrZXRFdmVudD1mdW5jdGlvbih0KXt2YXIgbjtmb3IobiBpbiBlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXSllLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXSYmZS5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW3QudHlwZV0uaGFzT3duUHJvcGVydHkobikmJlwiZnVuY3Rpb25cIj09dHlwZW9mIGUuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1t0LnR5cGVdW25dJiZlLmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbdC50eXBlXVtuXSh0Lm1zZyl9LGV9LGQ9ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIHQudHlwZT1lLnR5cGUsdH0sdT1mdW5jdGlvbihlKXt2YXIgdD1kKGUpO3JldHVybiB0LnN0cmVhbT1lLnN0cmVhbSx0LnJlYXNvbj1lLnJlYXNvbix0Lm1zZz1lLm1zZyx0fSxsPWZ1bmN0aW9uKGUpe3ZhciB0PWQoZSk7cmV0dXJuIHQudWlkPWUudWlkLHQuYXR0cj1lLmF0dHIsdC5zdHJlYW09ZS5zdHJlYW0sdH0scD1mdW5jdGlvbihlKXt2YXIgdD1kKGUpO3JldHVybiB0Lm1zZz1lLm1zZyx0fSxmPWZ1bmN0aW9uKGUpe3ZhciB0PWQoZSk7cmV0dXJuIHQudXJsPWUudXJsLHQudWlkPWUudWlkLHQuc3RhdHVzPWUuc3RhdHVzLHQucmVhc29uPWUucmVhc29uLHR9LG09YSg0KSxnPWZ1bmN0aW9uKCl7fTtnLnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24oZSx0KXtbXCJCYXR0ZXJ5TGV2ZWxcIl0uaW5kZXhPZihlKT4tMSYmKHRoaXNbZV09dCl9O3ZhciB2PW5ldyBmdW5jdGlvbigpe3ZhciBlPWMoKTtyZXR1cm4gZS5zdGF0ZXM9e1VOSU5JVDpcIlVOSU5JVFwiLElOSVRJTkc6XCJJTklUSU5HXCIsSU5JVEVEOlwiSU5JVEVEXCJ9LGUuc3RhdGU9ZS5zdGF0ZXMuVU5JTklULGUuYmF0dGVyeU1hbmFnZXI9bnVsbCxlLl9pbml0PWZ1bmN0aW9uKHQsbil7ZS5zdGF0ZT1lLnN0YXRlcy5JTklUSU5HLG5hdmlnYXRvci5nZXRCYXR0ZXJ5P25hdmlnYXRvci5nZXRCYXR0ZXJ5KCkudGhlbihmdW5jdGlvbihuKXtlLmJhdHRlcnlNYW5hZ2VyPW4sdCYmc2V0VGltZW91dChmdW5jdGlvbigpe3QoKX0sMCl9KS5jYXRjaChmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJuYXZpZ2F0b3IuZ2V0QmF0dGVyeSBpcyBkaXNhYmxlZFwiLGUpLHQmJnQoKX0pOihlLnN0YXRlPWUuc3RhdGVzLklOSVRFRCx0JiZ0KCkpfSxlLl9nZXRCYXR0ZXJ5U3RhdHM9ZnVuY3Rpb24oKXt2YXIgdD17fTtyZXR1cm4gZS5iYXR0ZXJ5TWFuYWdlciYmZS5iYXR0ZXJ5TWFuYWdlci5sZXZlbD90LkJhdHRlcnlMZXZlbD1NYXRoLmZsb29yKDEwMCplLmJhdHRlcnlNYW5hZ2VyLmxldmVsKTp0LkJhdHRlcnlMZXZlbD1cIlVOU1VQUE9SVEVEXCIsdH0sZS5nZXRTdGF0cz1mdW5jdGlvbih0LG4pe3ZhciBpPW5ldyBnLGE9ZS5fZ2V0QmF0dGVyeVN0YXRzKCk7YSYmYS5CYXR0ZXJ5TGV2ZWwmJmkuc2V0KFwiQmF0dGVyeUxldmVsXCIsYS5CYXR0ZXJ5TGV2ZWwpLHQmJnQoaSl9LGUuX2luaXQoKSxlfSxoPWEoNSksUz1hLm4oaCksXz1mdW5jdGlvbihlKXt2YXIgdD1jKGUpO3JldHVybiB0LnVybD1cIi5cIix0fSxFPWEoMTIpLEk9ezEwMTEwMDpcIk5PX0ZMQUdfU0VUXCIsMTAxMTAxOlwiRkxBR19TRVRfQlVUX0VNUFRZXCIsMTAxMTAyOlwiSU5WQUxJRF9GQUxHX1NFVFwiLDEwMTIwMzpcIk5PX1NFUlZJQ0VfQVZJQUJMRVwiLDA6XCJPS19DT0RFXCIsNTpcIklOVkFMSURfVkVORE9SX0tFWVwiLDc6XCJJTlZBTElEX0NIQU5ORUxfTkFNRVwiLDg6XCJJTlRFUk5BTF9FUlJPUlwiLDk6XCJOT19BVVRIT1JJWkVEXCIsMTA6XCJEWU5BTUlDX0tFWV9USU1FT1VUXCIsMTE6XCJOT19BQ1RJVkVfU1RBVFVTXCIsMTM6XCJEWU5BTUlDX0tFWV9FWFBJUkVEXCIsMTQ6XCJTVEFUSUNfVVNFX0RZQU5NSUNfS0VZXCIsMTU6XCJEWU5BTUlDX1VTRV9TVEFUSUNfS0VZXCIsMTAxMDEwMDpcIk5PX0ZMQUdfU0VUXCIsMTAxMDEwMTpcIkZMQUdfU0VUX0JVVF9FTVBUWVwiLDEwMTAxMDI6XCJJTlZBTElEX0ZBTEdfU0VUXCIsMTAxMDIwMDpcIk5PX1NFUlZJQ0VfQVZBSUxBQkxFXCIsMTAxMDIwMzpcIk5PX1NFUlZJQ0VfQVZBSUxBQkxFX1dFQlJUQ1wiLDEwMTAyMDU6XCJOT19TRVJWSUNFX0FWQUlMQUJMRV9ESVNQQVRDSEVSXCIsMTAxMDIwODpcIk5PX1NFUlZJQ0VfQVZBSUxBQkxFX0FQUENFTlRFUlwiLDEwMTAyMTE6XCJOT19TRVJWSUNFX0FWQUlMQUJMRV9TVUFcIiwyMDEwMDA1OlwiSU5WQUxJRF9WRU5ET1JfS0VZXCIsMjAxMDAwNzpcIklOVkFMSURfQ0hBTk5FTF9OQU1FXCIsMjAxMDAwODpcIklOVEVSTkFMX0VSUk9SXCIsMjAxMDAwOTpcIk5PX0FVVEhPUklaRURcIiwyMDEwMDEwOlwiRFlOQU1JQ19LRVlfVElNRU9VVFwiLDIwMTAwMTE6XCJOT19BQ1RJVkVfU1RBVFVTXCIsMjAxMDAxMzpcIkRZTkFNSUNfS0VZX0VYUElSRURcIiwyMDEwMDE0OlwiU1RBVElDX1VTRV9EWUFOTUlDX0tFWVwiLDIwMTAwMTU6XCJEWU5BTUlDX1VTRV9TVEFUSUNfS0VZXCJ9LHk9ezIwMDA6XCJFUlJfTk9fVk9DU19BVkFJTEFCTEVcIiwyMDAxOlwiRVJSX05PX1ZPU19BVkFJTEFCTEVcIiwyMDAyOlwiRVJSX0pPSU5fQ0hBTk5FTF9USU1FT1VUXCIsMjAwMzpcIldBUk5fUkVQRUFUX0pPSU5cIiwyMDA0OlwiRVJSX0pPSU5fQllfTVVMVElfSVBcIiwyMDExOlwiRVJSX05PVF9KT0lORURcIiwyMDEyOlwiV0FSTl9SRVBFQVRfSk9JTlwiLDIwMTM6XCJFUlJfSU5WQUxJRF9WRU5ET1JfS0VZXCIsMjAxNDpcIkVSUl9JTlZBTElEX0NIQU5ORUxfTkFNRVwiLDIwMTU6XCJFUlJfSU5WQUxJRF9TVFJJTkdVSURcIiwyMDE2OlwiRVJSX1RPT19NQU5ZX1VTRVJTXCIsMjAxNzpcIkVSUl9TRVRfQ0xJRU5UX1JPTEVfVElNRU9VVFwiLDIwMTg6XCJFUlJfU0VUX0NMSUVOVF9ST0xFX05PX1BFUk1JU1NJT05cIiwyMDE5OlwiRVJSX1NFVF9DTElFTlRfUk9MRV9BTFJFQURZX0lOX1VTRVwiLDIwMjA6XCJFUlJfUFVCTElTSF9SRVFVRVNUX0lOVkFMSURcIiwyMDIxOlwiRVJSX1NVQlNDUklCRV9SRVFVRVNUX0lOVkFMSURcIiwyMDIyOlwiRVJSX05PVF9TVVBQT1JURURfTUVTU0FHRVwiLDIwMjM6XCJFUlJfSUxMRUFHQUxfUExVR0lOXCIsMTAxOlwiRVJSX0lOVkFMSURfVkVORE9SX0tFWVwiLDEwMjpcIkVSUl9JTlZBTElEX0NIQU5ORUxfTkFNRVwiLDEwMzpcIldBUk5fTk9fQVZBSUxBQkxFX0NIQU5ORUxcIiwxMDQ6XCJXQVJOX0xPT0tVUF9DSEFOTkVMX1RJTUVPVVRcIiwxMDU6XCJXQVJOX0xPT0tVUF9DSEFOTkVMX1JFSkVDVEVEXCIsMTA2OlwiV0FSTl9PUEVOX0NIQU5ORUxfVElNRU9VVFwiLDEwNzpcIldBUk5fT1BFTl9DSEFOTkVMX1JFSkVDVEVEXCIsMTA4OlwiV0FSTl9SRVFVRVNUX0RFRkVSUkVEXCIsMTA5OlwiRVJSX0RZTkFNSUNfS0VZX1RJTUVPVVRcIiwxMTA6XCJFUlJfTk9fQVVUSE9SSVpFRFwiLDExMTpcIkVSUl9WT01fU0VSVklDRV9VTkFWQUlMQUJMRVwiLDExMjpcIkVSUl9OT19DSEFOTkVMX0FWQUlMQUJMRV9DT0RFXCIsMTEzOlwiRVJSX1RPT19NQU5ZX1VTRVJTXCIsMTE0OlwiRVJSX01BU1RFUl9WT0NTX1VOQVZBSUxBQkxFXCIsMTE1OlwiRVJSX0lOVEVSTkFMX0VSUk9SXCIsMTE2OlwiRVJSX05PX0FDVElWRV9TVEFUVVNcIiwxMTc6XCJFUlJfSU5WQUxJRF9VSURcIiwxMTg6XCJFUlJfRFlOQU1JQ19LRVlfRVhQSVJFRFwiLDExOTpcIkVSUl9TVEFUSUNfVVNFX0RZQU5NSUNfS0VcIiwxMjA6XCJFUlJfRFlOQU1JQ19VU0VfU1RBVElDX0tFXCIsMjpcIktfVElNRVNUQU1QX0VYUElSRURcIiwzOlwiS19DSEFOTkVMX1BFUk1JU1NJT05fSU5WQUxJRFwiLDQ6XCJLX0NFUlRJRklDQVRFX0lOVkFMSURcIiw1OlwiS19DSEFOTkVMX05BTUVfRU1QVFlcIiw2OlwiS19DSEFOTkVMX05PVF9GT1VORFwiLDc6XCJLX1RJQ0tFVF9JTlZBTElEXCIsODpcIktfQ0hBTk5FTF9DT05GTElDVEVEXCIsOTpcIktfU0VSVklDRV9OT1RfUkVBRFlcIiwxMDpcIktfU0VSVklDRV9UT09fSEVBVllcIiwxNDpcIktfVUlEX0JBTk5FRFwiLDE1OlwiS19JUF9CQU5ORURcIiwxNjpcIktfQ0hBTk5FTF9CQU5ORURcIn0sVD17MTpcIkVSUk9SX0lMTEVBR0FMX0FQUElEXCIsMjpcIkVSUk9SX0lMTEVBR0FMX1VJRFwiLDM6XCJJTlRFUk5BTF9TRVJWRVJfRVJST1JcIn0sYj1bXCJOT19GTEFHX1NFVFwiLFwiTk9fU0VSVklDRV9BVklBQkxFXCIsXCJGTEFHX1NFVF9CVVRfRU1QVFlcIixcIkVNUFRZX0FERFJFU1NfUkVTUE9OU0VcIl0sUj0wLEE9MSxPPTIsQz0zLE49NCx3PTUsaz02LEQ9NyxMPTgsTT05LFA9MTAseD17MTk6XCJFUlJfQUxSRUFEWV9JTl9VU0VcIiwxMDpcIkVSUl9USU1FRE9VVFwiLDM6XCJFUlJfTk9UX1JFQURZXCIsOTpcIkVSUl9OT19QRVJNSVNTSU9OXCIsMDpcIlVOS05PV19FUlJPUlwifSxWPXtGQUlMRUQ6XCJGQUlMRURcIixJTlZBTElEX0tFWTpcIklOVkFMSURfS0VZXCIsSU5WQUxJRF9DTElFTlRfTU9ERTpcIklOVkFMSURfQ0xJRU5UX01PREVcIixJTlZBTElEX0NMSUVOVF9DT0RFQzpcIklOVkFMSURfQ0xJRU5UX0NPREVDXCIsQ0xJRU5UX01PREVfQ09ERUNfTUlTTUFUQ0g6XCJDTElFTlRfTU9ERV9DT0RFQ19NSVNNQVRDSFwiLFdFQl9BUElfTk9UX1NVUFBPUlRFRDpcIldFQl9BUElfTk9UX1NVUFBPUlRFRFwiLElOVkFMSURfUEFSQU1FVEVSOlwiSU5WQUxJRF9QQVJBTUVURVJcIixOT19UUkFDS19JTl9TVFJFQU06XCJOT19UUkFDS19JTl9TVFJFQU1cIixJTlZBTElEX09QRVJBVElPTjpcIklOVkFMSURfT1BFUkFUSU9OXCIsSU5WQUxJRF9MT0NBTF9TVFJFQU06XCJJTlZBTElEX0xPQ0FMX1NUUkVBTVwiLElOVkFMSURfUkVNT1RFX1NUUkVBTTpcIklOVkFMSURfUkVNT1RFX1NUUkVBTVwiLElOVkFMSURfRFlOQU1JQ19LRVk6XCJJTlZBTElEX0RZTkFNSUNfS0VZXCIsRFlOQU1JQ19LRVlfVElNRU9VVDpcIkRZTkFNSUNfS0VZX1RJTUVPVVRcIixOT19WT0NTX0FWQUlMQUJMRTpcIk5PX1ZPQ1NfQVZBSUxBQkxFXCIsTk9fVk9TX0FWQUlMQUJMRTpcIkVSUl9OT19WT1NfQVZBSUxBQkxFXCIsSk9JTl9DSEFOTkVMX1RJTUVPVVQ6XCJFUlJfSk9JTl9DSEFOTkVMX1RJTUVPVVRcIixOT19BVkFJTEFCTEVfQ0hBTk5FTDpcIk5PX0FWQUlMQUJMRV9DSEFOTkVMXCIsTE9PS1VQX0NIQU5ORUxfVElNRU9VVDpcIkxPT0tVUF9DSEFOTkVMX1RJTUVPVVRcIixMT09LVVBfQ0hBTk5FTF9SRUpFQ1RFRDpcIkxPT0tVUF9DSEFOTkVMX1JFSkVDVEVEXCIsT1BFTl9DSEFOTkVMX1RJTUVPVVQ6XCJPUEVOX0NIQU5ORUxfVElNRU9VVFwiLE9QRU5fQ0hBTk5FTF9SRUpFQ1RFRDpcIk9QRU5fQ0hBTk5FTF9SRUpFQ1RFRFwiLFJFUVVFU1RfREVGRVJSRUQ6XCJSRVFVRVNUX0RFRkVSUkVEXCIsU1RSRUFNX0FMUkVBRFlfUFVCTElTSEVEOlwiU1RSRUFNX0FMUkVBRFlfUFVCTElTSEVEXCIsU1RSRUFNX05PVF9ZRVRfUFVCTElTSEVEOlwiU1RSRUFNX05PVF9ZRVRfUFVCTElTSEVEXCIsSk9JTl9UT09fRlJFUVVFTlQ6XCJKT0lOX1RPT19GUkVRVUVOVFwiLFNPQ0tFVF9FUlJPUjpcIlNPQ0tFVF9FUlJPUlwiLFNPQ0tFVF9ESVNDT05ORUNURUQ6XCJTT0NLRVRfRElTQ09OTkVDVEVEXCIsUEVFUkNPTk5FQ1RJT05fRkFJTEVEOlwiUEVFUkNPTk5FQ1RJT05fRkFJTEVEXCIsQ09OTkVDVF9HQVRFV0FZX0VSUk9SOlwiQ09OTkVDVF9HQVRFV0FZX0VSUk9SXCIsU0VSVklDRV9OT1RfQVZBSUxBQkxFOlwiU0VSVklDRV9OT1RfQVZBSUxBQkxFXCIsSk9JTl9DSEFOTkVMX0ZBSUxFRDpcIkpPSU5fQ0hBTk5FTF9GQUlMRURcIixQVUJMSVNIX1NUUkVBTV9GQUlMRUQ6XCJQVUJMSVNIX1NUUkVBTV9GQUlMRURcIixVTlBVQkxJU0hfU1RSRUFNX0ZBSUxFRDpcIlVOUFVCTElTSF9TVFJFQU1fRkFJTEVEXCIsU1VCU0NSSUJFX1NUUkVBTV9GQUlMRUQ6XCJTVUJTQ1JJQkVfU1RSRUFNX0ZBSUxFRFwiLFVOU1VCU0NSSUJFX1NUUkVBTV9GQUlMRUQ6XCJVTlNVQlNDUklCRV9TVFJFQU1fRkFJTEVEXCIsTk9fU1VDSF9SRU1PVEVfU1RSRUFNOlwiTk9fU1VDSF9SRU1PVEVfU1RSRUFNXCIsRVJSX0ZBSUxFRDpcIjFcIixFUlJfSU5WQUxJRF9WRU5ET1JfS0VZOlwiMTAxXCIsRVJSX0lOVkFMSURfQ0hBTk5FTF9OQU1FOlwiMTAyXCIsV0FSTl9OT19BVkFJTEFCTEVfQ0hBTk5FTDpcIjEwM1wiLFdBUk5fTE9PS1VQX0NIQU5ORUxfVElNRU9VVDpcIjEwNFwiLFdBUk5fTE9PS1VQX0NIQU5ORUxfUkVKRUNURUQ6XCIxMDVcIixXQVJOX09QRU5fQ0hBTk5FTF9USU1FT1VUOlwiMTA2XCIsV0FSTl9PUEVOX0NIQU5ORUxfUkVKRUNURUQ6XCIxMDdcIixXQVJOX1JFUVVFU1RfREVGRVJSRUQ6XCIxMDhcIixFUlJfRFlOQU1JQ19LRVlfVElNRU9VVDpcIjEwOVwiLEVSUl9JTlZBTElEX0RZTkFNSUNfS0VZOlwiMTEwXCIsRVJSX05PX1ZPQ1NfQVZBSUxBQkxFOlwiMjAwMFwiLEVSUl9OT19WT1NfQVZBSUxBQkxFOlwiMjAwMVwiLEVSUl9KT0lOX0NIQU5ORUxfVElNRU9VVDpcIjIwMDJcIixJT1NfTk9UX1NVUFBPUlQ6XCJJT1NfTk9UX1NVUFBPUlRcIixXRUNIQVRfTk9UX1NVUFBPUlQ6XCJXRUNIQVRfTk9UX1NVUFBPUlRcIixTSEFSSU5HX1NDUkVFTl9OT1RfU1VQUE9SVDpcIlNIQVJJTkdfU0NSRUVOX05PVF9TVVBQT1JUXCIsU1RJTExfT05fUFVCTElTSElORzpcIlNUSUxMX09OX1BVQkxJU0hJTkdcIixMT1dfU1RSRUFNX0FMUkVBRFlfUFVCTElTSEVEOlwiTE9XX1NUUkVBTV9BTFJFQURZX1BVQkxJU0hFRFwiLExPV19TVFJFQU1fTk9UX1lFVF9QVUJMSVNIRUQ6XCJMT1dfU1RSRUFNX0FMUkVBRFlfUFVCTElTSEVEXCIsSElHSF9TVFJFQU1fTk9UX1ZJREVPX1RSQUNFOlwiSElHSF9TVFJFQU1fTk9UX1ZJREVPX1RSQUNFXCIsTk9UX0ZJTkRfREVWSUNFX0JZX0xBQkVMOlwiTk9UX0ZJTkRfREVWSUNFX0JZX0xBQkVMXCIsRU5BQkxFX0RVQUxTVFJFQU1fRkFJTEVEOlwiRU5BQkxFX0RVQUxTVFJFQU1fRkFJTEVEXCIsRElTQUJMRV9EVUFMU1RSRUFNX0ZBSUxFRDpcIkRJU0FCTEVfRFVBTFNUUkVBTV9GQUlMRURcIixQTEFZRVJfTk9UX0ZPVU5EOlwiUExBWUVSX05PVF9GT1VORFwiLEVMRUNUUk9OX05PVF9TVVBQT1JUX1NIQVJJTkdfU0NSRUVOOlwiRUxFQ1RST05fTk9UX1NVUFBPUlRfU0hBUklOR19TQ1JFRU5cIixCQURfRU5WSVJPTk1FTlQ6XCJCQURfRU5WSVJPTk1FTlRcIixMT0FEX0FVRElPX0ZBSUxFRDpcIkxPQURfQVVESU9fRkFJTEVEXCJ9LFU9MCxqPWZ1bmN0aW9uKGUpe3ZhciB0PV8oe30pO3QuaWQ9ZS5pZCx0LnBsYXllcklkPVUrKyx0LmZpdD1lLm9wdGlvbnMmJmUub3B0aW9ucy5maXQsXCJjb250YWluXCIhPT10LmZpdCYmXCJjb3ZlclwiIT09dC5maXQmJih0LmZpdD1udWxsKSx0LnVybD1lLnVybCx0LnN0cmVhbT1lLnN0cmVhbS5zdHJlYW0sdC5lbGVtZW50SUQ9ZS5lbGVtZW50SUQsdC5zZXRBdWRpb091dHB1dD1mdW5jdGlvbihlLG4saSl7dmFyIGE9dC52aWRlb3x8dC5hdWRpbztyZXR1cm4gYT9hLnNldFNpbmtJZD92b2lkIGEuc2V0U2lua0lkKGUpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuaWQrXCJdIFwiK1widmlkZW8gXCIuY29uY2F0KHQuaWQsXCIgc2V0QXVkaW9PdXRwdXQgXCIpLmNvbmNhdChlLFwiIFNVQ0NFU1NcIikpLGE9PXQudmlkZW8mJnQuYXVkaW8/dC5hdWRpby5zZXRTaW5rSWQoZSk6UHJvbWlzZS5yZXNvbHZlKCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmlkK1wiXSBcIitcImF1ZGlvIFwiLmNvbmNhdCh0LmlkLFwiIHNldEF1ZGlvT3V0cHV0IFwiKS5jb25jYXQoZSxcIiBTVUNDRVNTXCIpKSxuJiZuKCl9KS5jYXRjaChmdW5jdGlvbihlKXtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiK3QuaWQrXCJdIFZpZGVvUGxheWVyLnNldEF1ZGlvT3V0cHV0XCIsZSksaSYmaShlKX0pOihvLmRlZmF1bHQuZXJyb3IoXCJbXCIrdC5pZCtcIl0gXCIsVi5XRUJfQVBJX05PVF9TVVBQT1JURUQpLGkmJmkoVi5XRUJfQVBJX05PVF9TVVBQT1JURUQpKTooby5kZWZhdWx0LmVycm9yKFwiW1wiK3QuaWQrXCJdIFwiLFYuUExBWUVSX05PVF9GT1VORCksaSYmaShWLlBMQVlFUl9OT1RfRk9VTkQpKX0sdC5kZXN0cm95PWZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmlkLFwiXSBkZXN0cm95IFwiKS5jb25jYXQoZS5zdHJlYW0ubG9jYWw/XCJsb2NhbFwiOlwicmVtb3RlXCIsXCIgUGxheWVyIFwiKS5jb25jYXQodC5pZCkpLE9iamVjdChFLnNldFNyY09iamVjdCkodC52aWRlbyxudWxsKSxPYmplY3QoRS5zZXRTcmNPYmplY3QpKHQuYXVkaW8sbnVsbCksdC52aWRlby5wYXVzZSgpLGRlbGV0ZSB0LnJlc2l6ZXIsY2xlYXJJbnRlcnZhbCh0Lm1lZGlhUGxheWVyVGltZXIpLHQubWVkaWFQbGF5ZXJUaW1lcj1udWxsLGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuZGl2LmlkKSYmdC5wYXJlbnROb2RlLmNvbnRhaW5zKHQuZGl2KSYmdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQuZGl2KSxbXCJ2aWRlb1wiLFwiYXVkaW9cIl0uZm9yRWFjaChmdW5jdGlvbihuKXt0W25dO3ZhciBpPWFbbl07Y2xlYXJUaW1lb3V0KGkucGxheURlZmVyVGltZW91dCksaS5mb3JtZXJNZWRpYVN0YXRlPW51bGw7dmFyIHI9e3BsYXllcklkOnQucGxheWVySWQsc3RhdGVJZDppLnN0YXRlSWQrMSxwbGF5RGVmZXJUaW1lb3V0Om51bGwsZXJyb3I6ITEsc3RhdHVzOlwiYWJvcnRlZFwiLHJlYXNvbjpcInN0b3BcIix1cGRhdGVkQXQ6RGF0ZS5ub3coKX07YVtuXT1yO3ZhciBjPXt0eXBlOlwicGxheWVyLXN0YXR1cy1jaGFuZ2VcIixwbGF5ZXJJZDp0LnBsYXllcklkLG1lZGlhVHlwZTpuLHN0YXR1czpyLnN0YXR1cyxyZWFzb246ci5yZWFzb24saXNFcnJvclN0YXRlOiExLHN0cmVhbUlkOnQuaWR9O28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5pZCxcIl0gTWVkaWEgUGxheWVyIFN0YXR1cyBDaGFuZ2UgVHJpZ2dlcmVkIGJ5IGRlc3Ryb3koKVwiKSxjKSxlLnN0cmVhbS5kaXNwYXRjaEV2ZW50KGMpLHMuYi5yZXBvcnRBcGlJbnZva2UoZS5zdHJlYW0uc2lkLHtuYW1lOlwiU3RyZWFtLnBsYXllclN0YXR1c0NoYW5nZVwiLG9wdGlvbnM6Yyx0YWc6XCJ0cmFjZXJcIn0pKCl9KX0sdC5kaXY9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKSx0LmRpdi5zZXRBdHRyaWJ1dGUoXCJpZFwiLFwicGxheWVyX1wiK3QuaWQpLGUuc3RyZWFtLnZpZGVvP3QuZGl2LnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogcmVsYXRpdmU7IGJhY2tncm91bmQtY29sb3I6IGJsYWNrOyBvdmVyZmxvdzogaGlkZGVuO1wiKTp0LmRpdi5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwid2lkdGg6IDEwMCU7IGhlaWdodDogMTAwJTsgcG9zaXRpb246IHJlbGF0aXZlOyBvdmVyZmxvdzogaGlkZGVuO1wiKSx0LnZpZGVvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKSx0LnZpZGVvLnNldEF0dHJpYnV0ZShcImlkXCIsXCJ2aWRlb1wiK3QuaWQpLGUuc3RyZWFtLmxvY2FsJiYhZS5zdHJlYW0uc2NyZWVuP2Uuc3RyZWFtLm1pcnJvcj90LnZpZGVvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IHRyYW5zZm9ybTogcm90YXRlWSgxODBkZWcpOyBvYmplY3QtZml0OiBcIi5jb25jYXQodC5maXR8fFwiY292ZXJcIixcIjtcIikpOnQudmlkZW8uc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgb2JqZWN0LWZpdDogXCIuY29uY2F0KHQuZml0fHxcImNvdmVyXCIsXCI7XCIpKTplLnN0cmVhbS52aWRlbz90LnZpZGVvLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiAxMDAlOyBwb3NpdGlvbjogYWJzb2x1dGU7IG9iamVjdC1maXQ6IFwiLmNvbmNhdCh0LmZpdHx8XCJjb3ZlclwiLFwiO1wiKSk6ZS5zdHJlYW0uc2NyZWVuP3QudmlkZW8uc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgb2JqZWN0LWZpdDogXCIuY29uY2F0KHQuZml0fHxcImNvbnRhaW5cIikpOnQudmlkZW8uc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDEwMCU7IHBvc2l0aW9uOiBhYnNvbHV0ZTsgZGlzcGxheTogbm9uZTsgb2JqZWN0LWZpdDogXCIuY29uY2F0KHQuZml0fHxcImNvdmVyXCIpKTt2YXIgbj17YXV0b3BsYXk6ITAsbXV0ZWQ6ISFlLnN0cmVhbS5sb2NhbHx8ISghbS5pc1NhZmFyaSgpJiZcImlPU1wiIT09bS5nZXRCcm93c2VyT1MoKSkmJlwidmlkZW9fZWxlbWVudF9tdXRlZFwiLHBsYXlzaW5saW5lOiEwLGNvbnRyb2xzOiEoIW0uaXNTYWZhcmkoKSYmXCJpT1NcIiE9PW0uZ2V0QnJvd3Nlck9TKCl8fGUuc3RyZWFtLmxvY2FsKSx2b2x1bWU6bnVsbH0saT1TKCkoe30sbixlLm9wdGlvbnMpOyEwIT09aS5tdXRlZHx8aS52b2x1bWV8fChpLnZvbHVtZT0wKSxpLmF1dG9wbGF5JiZ0LnZpZGVvLnNldEF0dHJpYnV0ZShcImF1dG9wbGF5XCIsXCJcIiksITAhPT1pLm11dGVkJiZcInZpZGVvX2VsZW1lbnRfbXV0ZWRcIiE9PWkubXV0ZWR8fCh0LnZpZGVvLnNldEF0dHJpYnV0ZShcIm11dGVkXCIsXCJcIiksdC52aWRlby5tdXRlZD0hMCksaS5wbGF5c2lubGluZSYmdC52aWRlby5zZXRBdHRyaWJ1dGUoXCJwbGF5c2lubGluZVwiLFwiXCIpLGkuY29udHJvbHMmJnQudmlkZW8uc2V0QXR0cmlidXRlKFwiY29udHJvbHNcIixcIlwiKSxOdW1iZXIuaXNGaW5pdGUoaS52b2x1bWUpJiYodC52aWRlby52b2x1bWU9aS52b2x1bWUpLHQuYXVkaW89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpLHQuYXVkaW8uc2V0QXR0cmlidXRlKFwiaWRcIixcImF1ZGlvXCIrdC5pZCksaS5hdXRvcGxheSYmdC5hdWRpby5zZXRBdHRyaWJ1dGUoXCJhdXRvcGxheVwiLFwiXCIpLCEwPT09aS5tdXRlZCYmdC5hdWRpby5zZXRBdHRyaWJ1dGUoXCJtdXRlZFwiLFwiXCIpLCEwPT09aS5tdXRlZCYmKHQuYXVkaW8ubXV0ZWQ9ITApLGkucGxheXNpbmxpbmUmJnQuYXVkaW8uc2V0QXR0cmlidXRlKFwicGxheXNpbmxpbmVcIixcIlwiKSxOdW1iZXIuaXNGaW5pdGUoaS52b2x1bWUpJiYodC5hdWRpby52b2x1bWU9aS52b2x1bWUpLHZvaWQgMCE9PXQuZWxlbWVudElEPyhkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0LmVsZW1lbnRJRCkuYXBwZW5kQ2hpbGQodC5kaXYpLHQuY29udGFpbmVyPWRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHQuZWxlbWVudElEKSk6KGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodC5kaXYpLHQuY29udGFpbmVyPWRvY3VtZW50LmJvZHkpLHQucGFyZW50Tm9kZT10LmRpdi5wYXJlbnROb2RlO3ZhciBhPXt2aWRlbzp7cGxheWVySWQ6dC5wbGF5ZXJJZCxzdGF0ZUlkOjAscGxheURlZmVyVGltZW91dDpudWxsLGVycm9yOiExLHN0YXR1czpcImluaXRcIixyZWFzb246bnVsbCx1cGRhdGVkQXQ6RGF0ZS5ub3coKX0sYXVkaW86e3BsYXllcklkOnQucGxheWVySWQsc3RhdGVJZDowLHBsYXlEZWZlclRpbWVvdXQ6bnVsbCxlcnJvcjohMSxzdGF0dXM6XCJpbml0XCIscmVhc29uOm51bGwsdXBkYXRlZEF0OkRhdGUubm93KCl9fTt0Lm1lZGlhRWxlbUV4aXN0cz1mdW5jdGlvbihlKXtmb3IodmFyIHQ9ZSxuPTA7bjxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiTUVESUFfRUxFTUVOVF9FWElTVFNfREVQVEhcIikmJnQ7bisrKXQ9dC5wYXJlbnROb2RlO3JldHVybiEhdH07dmFyIGM9ZnVuY3Rpb24oZSl7cmV0dXJuIHQubWVkaWFFbGVtRXhpc3RzKGUpP2UucGF1c2VkP1wicGF1c2VkXCI6XCJwbGF5XCI6XCJhYm9ydGVkXCJ9LGQ9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPWMoZSksYT0hMDtyZXR1cm5cInBhdXNlZFwiPT09aT8oXCJhdWRpb1wiPT09dCYmITA9PT1uLm11dGVkJiYoYT0hMSksbi5hdXRvcGxheXx8KGE9ITEpKTpcInBsYXlcIj09PWk/XCJ2aWRlb1wiPT09dD9hPSExOiEwPT09bi5tdXRlZD9lLm11dGVkJiYoYT0hMSk6ZS5tdXRlZHx8KGE9ITEpOlwiYWJvcnRlZFwiPT09aSYmKGE9ITEpLGF9LHU9ZnVuY3Rpb24obil7dmFyIHUsbD10aGlzO2lmKGw9PT10LnZpZGVvP3U9XCJ2aWRlb1wiOmw9PT10LmF1ZGlvJiYodT1cImF1ZGlvXCIpLHUpe24udHlwZXx8by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmlkLFwiXSBVbmV4cGVjdGVkIGV2dFwiKSxuKTt2YXIgcD1jKGwpO2NsZWFyVGltZW91dChhW3VdLnBsYXlEZWZlclRpbWVvdXQpLGFbdV0ucGxheURlZmVyVGltZW91dD1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7YVt1XS5wbGF5RGVmZXJUaW1lb3V0PW51bGw7dmFyIHI9YVt1XSxmPWMobCk7aWYocD09PWYpe3ZhciBtPXtwbGF5ZXJJZDp0LnBsYXllcklkLHN0YXRlSWQ6ci5zdGF0ZUlkKzEscGxheURlZmVyVGltZW91dDpudWxsLGVycm9yOmQobCx1LGkpLHN0YXR1czpjKGwpLHJlYXNvbjpuLnR5cGUsdXBkYXRlZEF0OkRhdGUubm93KCl9O2lmKHIuc3RhdHVzIT09bS5zdGF0dXMpe2FbdV09bTt2YXIgZz17dHlwZTpcInBsYXllci1zdGF0dXMtY2hhbmdlXCIscGxheWVySWQ6dC5wbGF5ZXJJZCxtZWRpYVR5cGU6dSxzdGF0dXM6bS5zdGF0dXMscmVhc29uOm0ucmVhc29uLGlzRXJyb3JTdGF0ZTptLmVycm9yLHN0cmVhbUlkOnQuaWR9O28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5pZCxcIl0gTWVkaWEgUGxheWVyIFN0YXR1cyBDaGFuZ2VcIiksZyksZS5zdHJlYW0uZGlzcGF0Y2hFdmVudChnKSxzLmIucmVwb3J0QXBpSW52b2tlKGUuc3RyZWFtLnNpZCx7bmFtZTpcIlN0cmVhbS5wbGF5ZXJTdGF0dXNDaGFuZ2VcIixvcHRpb25zOmcsdGFnOlwidHJhY2VyXCJ9KSgpfX1lbHNlIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5pZCxcIl0gU3RhdHVzIENoYW5nZSBhZnRlciBldmVudCBUcmlnZ2VyZWQuXCIpK1wiU3RyZWFtIFwiLmNvbmNhdCh0LmlkLFwiIFBsYXllcklkIFwiKS5jb25jYXQodC5wbGF5ZXJJZCxcIiBtZWRpYVR5cGUgXCIpLmNvbmNhdCh1LFwiIFN0YXR1cyBcIikuY29uY2F0KHAsXCI9PlwiKS5jb25jYXQoZikpfSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUExBWUVSX1NUQVRFX0RFRkVSXCIpKX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5pZCxcIl0gVW5rbm93biBtZWRpYSBlbGVtZW50XCIpLGwpfTtpZih0Lm1lZGlhUGxheWVyVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtbXCJ2aWRlb1wiLFwiYXVkaW9cIl0uZm9yRWFjaChmdW5jdGlvbihuKXt2YXIgcj10W25dLHU9YVtuXTtpZighdS5wbGF5RGVmZXJUaW1lb3V0KXt2YXIgbD17cGxheWVySWQ6dC5wbGF5ZXJJZCxzdGF0ZUlkOnUuc3RhdGVJZCsxLHBsYXlEZWZlclRpbWVvdXQ6bnVsbCxlcnJvcjpkKHIsbixpKSxzdGF0dXM6YyhyKSxyZWFzb246XCJ0aW1lclwiLHVwZGF0ZWRBdDpEYXRlLm5vdygpfTtpZih1LnN0YXR1cyE9PWwuc3RhdHVzKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuaWQsXCJdIFBsYXllciBcIikuY29uY2F0KHQucGxheWVySWQsXCIgXCIpLmNvbmNhdChuLFwiIFN0YXR1cyBDaGFuZ2VkIERldGVjdGVkIGJ5IFRpbWVyOiBcIikuY29uY2F0KHUuc3RhdHVzLFwiPT5cIikuY29uY2F0KGwuc3RhdHVzKSksYVtuXT1sO3ZhciBwPXt0eXBlOlwicGxheWVyLXN0YXR1cy1jaGFuZ2VcIixwbGF5ZXJJZDp0LnBsYXllcklkLG1lZGlhVHlwZTpuLHN0YXR1czpsLnN0YXR1cyxyZWFzb246bC5yZWFzb24saXNFcnJvclN0YXRlOmwuZXJyb3Isc3RyZWFtSWQ6dC5pZH07by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmlkLFwiXSBNZWRpYSBQbGF5ZXIgU3RhdHVzIENoYW5nZVwiKSxwKSxlLnN0cmVhbS5kaXNwYXRjaEV2ZW50KHApLHMuYi5yZXBvcnRBcGlJbnZva2UoZS5zdHJlYW0uc2lkLHtuYW1lOlwiU3RyZWFtLnBsYXllclN0YXR1c0NoYW5nZVwiLG9wdGlvbnM6cCx0YWc6XCJ0cmFjZXJcIn0pKCl9fX0pfSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUExBWUVSX1NUQVRFX0RFRkVSXCIpKSx0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJwbGF5aW5nXCIsZnVuY3Rpb24oZSl7IWZ1bmN0aW9uIGUoKXt0LnZpZGVvLnZpZGVvV2lkdGgqdC52aWRlby52aWRlb0hlaWdodD40P28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmlkK1wiXSB2aWRlbyBkaW1lbnNpb25zOlwiLHQudmlkZW8udmlkZW9XaWR0aCx0LnZpZGVvLnZpZGVvSGVpZ2h0KTpzZXRUaW1lb3V0KGUsNTApfSgpfSksdC52aWRlby5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLHUpLHQudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXlcIix1KSx0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLHUpLHQudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcIm9uZXJyb3JcIix1KSx0LnZpZGVvLmFkZEV2ZW50TGlzdGVuZXIoXCJzdXNwZW5kXCIsdSksdC52aWRlby5hZGRFdmVudExpc3RlbmVyKFwic3RhbGxlZFwiLHUpLHQudmlkZW8uYWRkRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsdSksdC5hdWRpby5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLHUpLHQuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcImNhbnBsYXlcIix1KSx0LmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJhYm9ydFwiLHUpLHQuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcIm9uZXJyb3JcIix1KSx0LmF1ZGlvLmFkZEV2ZW50TGlzdGVuZXIoXCJzdXNwZW5kXCIsdSksdC5hdWRpby5hZGRFdmVudExpc3RlbmVyKFwic3RhbGxlZFwiLHUpLHQuYXVkaW8uYWRkRXZlbnRMaXN0ZW5lcihcInBhdXNlXCIsdSksZS5zdHJlYW0uaGFzVmlkZW8oKXx8ZS5zdHJlYW0uaGFzU2NyZWVuKCkpdC5kaXYuYXBwZW5kQ2hpbGQodC52aWRlbyksdC5kaXYuYXBwZW5kQ2hpbGQodC5hdWRpbyksbS5pc0VkZ2UoKT90LnZpZGVvLnNyY09iamVjdD1lLnN0cmVhbS5zdHJlYW06KE9iamVjdChFLmF0dGFjaE1lZGlhU3RyZWFtKSh0LnZpZGVvLGUuc3RyZWFtLnN0cmVhbSksT2JqZWN0KEUuYXR0YWNoTWVkaWFTdHJlYW0pKHQuYXVkaW8sZS5zdHJlYW0uc3RyZWFtKSk7ZWxzZSBpZighMSE9PWkubXV0ZWQmJlwidmlkZW9fZWxlbWVudF9tdXRlZFwiIT09aS5tdXRlZHx8KHQudmlkZW8ucmVtb3ZlQXR0cmlidXRlKFwibXV0ZWRcIiksdC52aWRlby5tdXRlZD0hMSksdC5kaXYuYXBwZW5kQ2hpbGQodC52aWRlbyksd2luZG93Lk1lZGlhU3RyZWFtJiYobS5pc1NhZmFyaSgpfHxcImlPU1wiPT09bS5nZXRCcm93c2VyT1MoKSkpe3ZhciBsPW5ldyBNZWRpYVN0cmVhbShlLnN0cmVhbS5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKSk7T2JqZWN0KEUuc2V0U3JjT2JqZWN0KSh0LnZpZGVvLGwpfWVsc2UgT2JqZWN0KEUuc2V0U3JjT2JqZWN0KSh0LnZpZGVvLGUuc3RyZWFtLnN0cmVhbSk7cmV0dXJuIHQuc2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oZSl7dmFyIG49cGFyc2VJbnQoZSkvMTAwO2lzRmluaXRlKG4pJiYobjwwP249MDpuPjEmJihuPTEpLHQudmlkZW8mJih0LnZpZGVvLnZvbHVtZT1uKSx0LmF1ZGlvJiYodC5hdWRpby52b2x1bWU9bikpfSx0fSxGPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49RS5SVENQZWVyQ29ubmVjdGlvbjt0LnVpZD1lLnVpZCx0LmlzVmlkZW9NdXRlPWUuaXNWaWRlb011dGUsdC5pc0F1ZGlvTXV0ZT1lLmlzQXVkaW9NdXRlLHQuaXNTdWJzY3JpYmVyPWUuaXNTdWJzY3JpYmVyLHQuY2xpZW50SWQ9ZS5jbGllbnRJZCx0LmZpbHRlclN0YXRzQ2FjaGU9W10sdC5vcmlnaW5TdGF0c0NhY2hlPVtdLHQubGFzdFRpbWVHZXRTdGF0cz1udWxsLHQucGNfY29uZmlnPXtpY2VTZXJ2ZXJzOlt7dXJsOlwic3R1bjp3ZWJjcy5hZ29yYS5pbzozNDc4XCJ9XX07dmFyIGk9e2lkOlwib3V0Ym91bmRfYXVkaW9fc3NyY19zZW5kXCIsdHlwZTpcInNzcmNcIixtZWRpYVR5cGU6XCJcIixnb29nQ29kZWNOYW1lOlwib3B1c1wiLGFlY0RpdmVyZ2VudEZpbHRlckZyYWN0aW9uOlwiMFwiLGF1ZGlvSW5wdXRMZXZlbDpcIjBcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0VjaG9DYW5jZWxsYXRpb25SZXR1cm5Mb3NzOlwiMFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zc0VuaGFuY2VtZW50OlwiMFwifSxhPXtpZDpcIm91dGJvdW5kX3ZpZGVvX3NzcmNfc2VuZFwiLHR5cGU6XCJzc3JjXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ0NvZGVjTmFtZTpcImgyNjRcIj09PWUuY29kZWM/XCJIMjY0XCI6XCJWUDhcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0FkYXB0YXRpb25DaGFuZ2VzOlwiMFwiLGdvb2dBdmdFbmNvZGVNczpcIjBcIixnb29nRW5jb2RlVXNhZ2VQZXJjZW50OlwiMFwiLGdvb2dGaXJzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lSGVpZ2h0U2VudDpcIjBcIixnb29nRnJhbWVIZWlnaHRJbnB1dDpcIjBcIixnb29nRnJhbWVSYXRlSW5wdXQ6XCIwXCIsZ29vZ0ZyYW1lUmF0ZVNlbnQ6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhTZW50OlwiMFwiLGdvb2dGcmFtZVdpZHRoSW5wdXQ6XCIwXCIsZ29vZ05hY2tzUmVjZWl2ZWQ6XCIwXCIsZ29vZ1BsaXNSZWNlaXZlZDpcIjBcIixnb29nUnR0OlwiMFwifSxzPXtpZDpcImluYm91bmRfYXVkaW9fc3NyY19yZWN2XCIsdHlwZTpcInNzcmNcIixtZWRpYVR5cGU6XCJcIixnb29nQ29kZWNOYW1lOlwib3B1c1wiLGF1ZGlvT3V0cHV0TGV2ZWw6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzTG9zdDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0FjY2VsZXJhdGVSYXRlOlwiMFwiLGdvb2dDdXJyZW50RGVsYXlNczpcIjBcIixnb29nRGVjb2RpbmdDTkc6XCIwXCIsZ29vZ0RlY29kaW5nQ1ROOlwiMFwiLGdvb2dEZWNvZGluZ0NUU0c6XCIwXCIsZ29vZ0RlY29kaW5nTm9ybWFsOlwiMFwiLGdvb2dEZWNvZGluZ1BMQzpcIjBcIixnb29nRGVjb2RpbmdQTENDTkc6XCIwXCIsZ29vZ0V4cGFuZFJhdGU6XCIwXCIsZ29vZ0ppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dKaXR0ZXJSZWNlaXZlZDpcIjBcIixnb29nUHJlZW1wdGl2ZUV4cGFuZFJhdGU6XCIwXCIsZ29vZ1ByZWZlcnJlZEppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dTZWNvbmRhcnlEZWNvZGVkUmF0ZTpcIjBcIixnb29nU3BlZWNoRXhwYW5kUmF0ZTpcIjBcIn0sYz17aWQ6XCJpbmJvdW5kX3ZpZGVvX3NzcmNfcmVjdlwiLHR5cGU6XCJzc3JjXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ1RhcmdldERlbGF5TXM6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIsZ29vZ0RlY29kZU1zOlwiMFwiLGdvb2dNYXhEZWNvZGVNczpcIjBcIixnb29nUmVuZGVyRGVsYXlNczpcIjBcIixnb29nRnJhbWVXaWR0aFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZUhlaWdodFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZVJhdGVSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlRGVjb2RlZDpcIjBcIixnb29nRnJhbWVSYXRlT3V0cHV0OlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ01pblBsYXlvdXREZWxheU1zOlwiMFwiLGdvb2dOYWNrc1NlbnQ6XCIwXCIsZ29vZ1BsaXNTZW50OlwiMFwiLGdvb2dGaXJzU2VudDpcIjBcIixieXRlc1JlY2VpdmVkOlwiMFwiLHBhY2tldHNSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0ZyYW1lc0RlY29kZWQ6XCIwXCJ9LGQ9e2lkOlwiYndlZm9ydmlkZW9cIix0eXBlOlwiVmlkZW9Cd2VcIixnb29nQXZhaWxhYmxlU2VuZEJhbmR3aWR0aDpcIjBcIixnb29nQXZhaWxhYmxlUmVjZWl2ZUJhbmR3aWR0aDpcIjBcIixnb29nQWN0dWFsRW5jQml0cmF0ZTpcIjBcIixnb29nUmV0cmFuc21pdEJpdHJhdGU6XCIwXCIsZ29vZ1RhcmdldEVuY0JpdHJhdGU6XCIwXCIsZ29vZ0J1Y2tldERlbGF5OlwiMFwiLGdvb2dUcmFuc21pdEJpdHJhdGU6XCIwXCJ9O3QuY29uPXtvcHRpb25hbDpbe0R0bHNTcnRwS2V5QWdyZWVtZW50OiEwfV19LGUuaWNlU2VydmVycyBpbnN0YW5jZW9mIEFycmF5P3QucGNfY29uZmlnLmljZVNlcnZlcnM9ZS5pY2VTZXJ2ZXJzOihlLnN0dW5TZXJ2ZXJVcmwmJihlLnN0dW5TZXJ2ZXJVcmwgaW5zdGFuY2VvZiBBcnJheT9lLnN0dW5TZXJ2ZXJVcmwubWFwKGZ1bmN0aW9uKGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlJiZcIlwiIT09ZSYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmw6ZX0pfSk6XCJzdHJpbmdcIj09dHlwZW9mIGUuc3R1blNlcnZlclVybCYmXCJcIiE9PWUuc3R1blNlcnZlclVybCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmw6ZS5zdHVuU2VydmVyVXJsfSkpLGUudHVyblNlcnZlciYmKGUudHVyblNlcnZlciBpbnN0YW5jZW9mIEFycmF5P2UudHVyblNlcnZlci5tYXAoZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUudXJsJiZcIlwiIT09ZS51cmwmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXNlcm5hbWU6ZS51c2VybmFtZSxjcmVkZW50aWFsOmUuY3JlZGVudGlhbCx1cmw6ZS51cmx9KX0pOlwiYXV0b1wiIT09ZS50dXJuU2VydmVyLm1vZGUmJlwibWFudWFsXCIhPT1lLnR1cm5TZXJ2ZXIubW9kZXx8KGUudHVyblNlcnZlci51ZHBwb3J0JiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOmUudHVyblNlcnZlci51c2VybmFtZSxjcmVkZW50aWFsOmUudHVyblNlcnZlci5jcmVkZW50aWFsLGNyZWRlbnRpYWxUeXBlOlwicGFzc3dvcmRcIix1cmxzOlwidHVybjpcIitlLnR1cm5TZXJ2ZXIudXJsK1wiOlwiK2UudHVyblNlcnZlci51ZHBwb3J0K1wiP3RyYW5zcG9ydD11ZHBcIn0pLFwic3RyaW5nXCI9PXR5cGVvZiBlLnR1cm5TZXJ2ZXIudGNwcG9ydCYmXCJcIiE9PWUudHVyblNlcnZlci50Y3Bwb3J0JiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOmUudHVyblNlcnZlci51c2VybmFtZSxjcmVkZW50aWFsOmUudHVyblNlcnZlci5jcmVkZW50aWFsLGNyZWRlbnRpYWxUeXBlOlwicGFzc3dvcmRcIix1cmxzOlwidHVybjpcIitlLnR1cm5TZXJ2ZXIudXJsK1wiOlwiK2UudHVyblNlcnZlci50Y3Bwb3J0K1wiP3RyYW5zcG9ydD10Y3BcIn0pLCEwPT09ZS50dXJuU2VydmVyLmZvcmNldHVybiYmKHQucGNfY29uZmlnLmljZVRyYW5zcG9ydFBvbGljeT1cInJlbGF5XCIpKSkpLHZvaWQgMD09PWUuYXVkaW8mJihlLmF1ZGlvPSEwKSx2b2lkIDA9PT1lLnZpZGVvJiYoZS52aWRlbz0hMCksdC5tZWRpYUNvbnN0cmFpbnRzPXttYW5kYXRvcnk6e09mZmVyVG9SZWNlaXZlVmlkZW86ZS52aWRlbyxPZmZlclRvUmVjZWl2ZUF1ZGlvOmUuYXVkaW99fSx0LnJvYXBTZXNzaW9uSWQ9MTAzO3RyeXt0LnBjX2NvbmZpZy5zZHBTZW1hbnRpY3M9XCJwbGFuLWJcIix0LnBlZXJDb25uZWN0aW9uPW5ldyBuKHQucGNfY29uZmlnLHQuY29uKX1jYXRjaChlKXtkZWxldGUgdC5wY19jb25maWcuc2RwU2VtYW50aWNzLHQucGVlckNvbm5lY3Rpb249bmV3IG4odC5wY19jb25maWcsdC5jb24pfXQuaWNlQ2FuZGlkYXRlVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3QuaWNlQ2FuZGlkYXRlVGltZXI9bnVsbCxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdQ2FuZGlkYXRlcyBjb2xsZWN0ZWQ6IFwiKS5jb25jYXQodC5pY2VDYW5kaWRhdGVDb3VudCkpLHQubW9yZUljZUNvbWluZyYmKHQubW9yZUljZUNvbWluZz0hMSx0Lm1hcmtBY3Rpb25OZWVkZWQoKSl9LE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJDQU5ESURBVEVfVElNRU9VVFwiKSksdC5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZT1mdW5jdGlvbihlKXt2YXIgbixpLGEscjtpPShuPXQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHApLm1hdGNoKC9hPWNhbmRpZGF0ZTouK3R5cFxcc3NyZmx4LitcXHJcXG4vKSxhPW4ubWF0Y2goL2E9Y2FuZGlkYXRlOi4rdHlwXFxzaG9zdC4rXFxyXFxuLykscj1uLm1hdGNoKC9hPWNhbmRpZGF0ZTouK3R5cFxcc3JlbGF5LitcXHJcXG4vKSxudWxsPT09aSYmbnVsbD09PWEmJm51bGw9PT1yfHx2b2lkIDAhPT10LmljZXx8IXQuaWNlQ2FuZGlkYXRlVGltZXJ8fChvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1zcmZseCBjYW5kaWRhdGUgOiBcIitpK1wiIHJlbGF5IGNhbmRpZGF0ZTogXCIrcitcIiBob3N0IGNhbmRpZGF0ZSA6IFwiK2EpLGNsZWFyVGltZW91dCh0LmljZUNhbmRpZGF0ZVRpbWVyKSx0LmljZUNhbmRpZGF0ZVRpbWVyPW51bGwsdC5pY2U9MCx0Lm1vcmVJY2VDb21pbmc9ITEsdC5tYXJrQWN0aW9uTmVlZGVkKCkpLHQuaWNlQ2FuZGlkYXRlQ291bnQ9dC5pY2VDYW5kaWRhdGVDb3VudCsxfSxvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCsnXUNyZWF0ZWQgd2Via2l0UlRDUGVlckNvbm5uZWN0aW9uIHdpdGggY29uZmlnIFwiJytKU09OLnN0cmluZ2lmeSh0LnBjX2NvbmZpZykrJ1wiLicpO3ZhciB1PWZ1bmN0aW9uKHQpe3JldHVybiBlLnNjcmVlbiYmKHQ9dC5yZXBsYWNlKFwiYT14LWdvb2dsZS1mbGFnOmNvbmZlcmVuY2VcXHJcXG5cIixcIlwiKSksdH0sbD1mdW5jdGlvbihuKXt2YXIgaSxhO2lmKChpPW4ubWF0Y2goL209dmlkZW8uKlxcclxcbi8pKSYmZS5taW5WaWRlb0JXJiZlLm1heFZpZGVvQlcpe2E9aVswXStcImI9QVM6XCIrZS5tYXhWaWRlb0JXK1wiXFxyXFxuXCI7dmFyIHI9MCxzPTA7XCJoMjY0XCI9PT1lLmNvZGVjPyhyPW4uc2VhcmNoKC9hPXJ0cG1hcDooXFxkKykgSDI2NFxcLzkwMDAwXFxyXFxuLykscz1uLnNlYXJjaCgvSDI2NFxcLzkwMDAwXFxyXFxuLykpOlwidnA4XCI9PT1lLmNvZGVjJiYocj1uLnNlYXJjaCgvYT1ydHBtYXA6KFxcZCspIFZQOFxcLzkwMDAwXFxyXFxuLykscz1uLnNlYXJjaCgvVlA4XFwvOTAwMDBcXHJcXG4vKSksLTEhPT1yJiYtMSE9PXMmJnMtcj4xMCYmKGE9YStcImE9Zm10cDpcIituLnNsaWNlKHIrOSxzLTEpK1wiIHgtZ29vZ2xlLW1pbi1iaXRyYXRlPVwiK2UubWluVmlkZW9CVytcIlxcclxcblwiKSxuPW4ucmVwbGFjZShpWzBdLGEpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXVNldCBWaWRlbyBCaXRyYXRlIC0gbWluOlwiK2UubWluVmlkZW9CVytcIiBtYXg6XCIrZS5tYXhWaWRlb0JXKX1yZXR1cm4oaT1uLm1hdGNoKC9tPWF1ZGlvLipcXHJcXG4vKSkmJmUubWF4QXVkaW9CVyYmKGE9aVswXStcImI9QVM6XCIrZS5tYXhBdWRpb0JXK1wiXFxyXFxuXCIsbj1uLnJlcGxhY2UoaVswXSxhKSksbn07dC5wcm9jZXNzU2lnbmFsaW5nTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgbixpPUpTT04ucGFyc2UoZSk7dC5pbmNvbWluZ01lc3NhZ2U9aSxcIm5ld1wiPT09dC5zdGF0ZT9cIk9GRkVSXCI9PT1pLm1lc3NhZ2VUeXBlPyhuPXtzZHA6aS5zZHAsdHlwZTpcIm9mZmVyXCJ9LHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihuKSkuY2F0Y2goZnVuY3Rpb24oZSl7fSksdC5zdGF0ZT1cIm9mZmVyLXJlY2VpdmVkXCIsdC5tYXJrQWN0aW9uTmVlZGVkKCkpOnQuZXJyb3IoXCJJbGxlZ2FsIG1lc3NhZ2UgZm9yIHRoaXMgc3RhdGU6IFwiK2kubWVzc2FnZVR5cGUrXCIgaW4gc3RhdGUgXCIrdC5zdGF0ZSk6XCJvZmZlci1zZW50XCI9PT10LnN0YXRlP1wiQU5TV0VSXCI9PT1pLm1lc3NhZ2VUeXBlPygobj17c2RwOmkuc2RwLHR5cGU6XCJhbnN3ZXJcIn0pLnNkcD11KG4uc2RwKSxuLnNkcD1sKG4uc2RwKSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obikpLmNhdGNoKGZ1bmN0aW9uKGUpe30pLHQuc3RhdGU9XCJlc3RhYmxpc2hlZFwiKTpcInByLWFuc3dlclwiPT09aS5tZXNzYWdlVHlwZT8obj17c2RwOmkuc2RwLHR5cGU6XCJwci1hbnN3ZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG4pKS5jYXRjaChmdW5jdGlvbihlKXt9KSk6XCJvZmZlclwiPT09aS5tZXNzYWdlVHlwZT90LmVycm9yKFwiTm90IHdyaXR0ZW4geWV0XCIpOnQuZXJyb3IoXCJJbGxlZ2FsIG1lc3NhZ2UgZm9yIHRoaXMgc3RhdGU6IFwiK2kubWVzc2FnZVR5cGUrXCIgaW4gc3RhdGUgXCIrdC5zdGF0ZSk6XCJlc3RhYmxpc2hlZFwiPT09dC5zdGF0ZSYmKFwiT0ZGRVJcIj09PWkubWVzc2FnZVR5cGU/KG49e3NkcDppLnNkcCx0eXBlOlwib2ZmZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG4pKS5jYXRjaChmdW5jdGlvbihlKXt9KSx0LnN0YXRlPVwib2ZmZXItcmVjZWl2ZWRcIix0Lm1hcmtBY3Rpb25OZWVkZWQoKSk6XCJBTlNXRVJcIj09PWkubWVzc2FnZVR5cGU/KChuPXtzZHA6aS5zZHAsdHlwZTpcImFuc3dlclwifSkuc2RwPXUobi5zZHApLG4uc2RwPWwobi5zZHApLHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihuKSkuY2F0Y2goZnVuY3Rpb24oZSl7fSkpOnQuZXJyb3IoXCJJbGxlZ2FsIG1lc3NhZ2UgZm9yIHRoaXMgc3RhdGU6IFwiK2kubWVzc2FnZVR5cGUrXCIgaW4gc3RhdGUgXCIrdC5zdGF0ZSkpfTt2YXIgcD0wLGY9MDtyZXR1cm4gdC5nZXRWaWRlb1JlbGF0ZWRTdGF0cz1mdW5jdGlvbihlKXt0LmdldFN0YXRzKGZ1bmN0aW9uKG4pe24uZm9yRWFjaChmdW5jdGlvbihuKXtpZih0LmlzU3Vic2NyaWJlcil7aWYoXCJ2aWRlb1wiPT09bi5tZWRpYVR5cGUmJm4uaWQmJn5uLmlkLmluZGV4T2YoXCJyZWN2XCIpKXtpZihtLmlzQ2hyb21lS2VybmVsKCkmJittLmdldEJyb3dzZXJWZXJzaW9uKCk+PTc2KXt2YXIgaT0rbi5nb29nRnJhbWVzUmVjZWl2ZWQtcCxhPStuLmdvb2dGcmFtZXNEZWNvZGVkLWY7dC5fc2V0U3RhdChjLFwiZ29vZ0ZyYW1lUmF0ZVJlY2VpdmVkXCIsaSksdC5fc2V0U3RhdChjLFwiZ29vZ0ZyYW1lUmF0ZURlY29kZWRcIixhKSx0Ll9zZXRTdGF0KGMsXCJnb29nRnJhbWVSYXRlT3V0cHV0XCIsYSkscD0rbi5nb29nRnJhbWVzUmVjZWl2ZWQsZj0rbi5nb29nRnJhbWVzRGVjb2RlZH1lJiZlKHttZWRpYVR5cGU6XCJ2aWRlb1wiLHBlZXJJZDp0LnVpZCxpc1ZpZGVvTXV0ZTp0LmlzVmlkZW9NdXRlLGZyYW1lUmF0ZVJlY2VpdmVkOm4uZ29vZ0ZyYW1lUmF0ZVJlY2VpdmVkLGZyYW1lUmF0ZURlY29kZWQ6bi5nb29nRnJhbWVSYXRlRGVjb2RlZCxieXRlc1JlY2VpdmVkOm4uYnl0ZXNSZWNlaXZlZCxwYWNrZXRzUmVjZWl2ZWQ6bi5wYWNrZXRzUmVjZWl2ZWQscGFja2V0c0xvc3Q6bi5wYWNrZXRzTG9zdH0pfX1lbHNlXCJ2aWRlb1wiPT09bi5tZWRpYVR5cGUmJm4uaWQmJn5uLmlkLmluZGV4T2YoXCJzZW5kXCIpJiZlJiZlKHttZWRpYVR5cGU6XCJ2aWRlb1wiLGlzVmlkZW9NdXRlOnQuaXNWaWRlb011dGUsZnJhbWVSYXRlSW5wdXQ6bi5nb29nRnJhbWVSYXRlSW5wdXQsZnJhbWVSYXRlU2VudDpuLmdvb2dGcmFtZVJhdGVTZW50LGdvb2dSdHQ6bi5nb29nUnR0fSl9KX0pfSx0LmdldEF1ZGlvUmVsYXRlZFN0YXRzPWZ1bmN0aW9uKGUpe3QuZ2V0U3RhdHMoZnVuY3Rpb24obil7bi5mb3JFYWNoKGZ1bmN0aW9uKG4pe3QuaXNTdWJzY3JpYmVyJiZcImF1ZGlvXCI9PT1uLm1lZGlhVHlwZSYmbi5pZCYmfm4uaWQuaW5kZXhPZihcInJlY3ZcIikmJmUmJmUoe21lZGlhVHlwZTpcImF1ZGlvXCIscGVlcklkOnQudWlkLGlzQXVkaW9NdXRlOnQuaXNBdWRpb011dGUsZnJhbWVEcm9wcGVkOnBhcnNlSW50KG4uZ29vZ0RlY29kaW5nUExDKStwYXJzZUludChuLmdvb2dEZWNvZGluZ1BMQ0NORykrXCJcIixmcmFtZVJlY2VpdmVkOm4uZ29vZ0RlY29kaW5nQ1ROLGdvb2dKaXR0ZXJSZWNlaXZlZDpuLmdvb2dKaXR0ZXJSZWNlaXZlZCxieXRlc1JlY2VpdmVkOm4uYnl0ZXNSZWNlaXZlZCxwYWNrZXRzUmVjZWl2ZWQ6bi5wYWNrZXRzUmVjZWl2ZWQscGFja2V0c0xvc3Q6bi5wYWNrZXRzTG9zdH0pfSl9KX0sdC5nZXRTdGF0c1JhdGU9ZnVuY3Rpb24oZSl7dC5nZXRTdGF0cyhmdW5jdGlvbih0KXtlKHQpfSl9LHQuZ2V0U3RhdHM9ZnVuY3Rpb24oZSxuKXtuPShuPW58fDUwMCk+NTAwPzUwMDpuLHQubGFzdFRpbWVHZXRTdGF0cyYmRGF0ZS5ub3coKS10Lmxhc3RUaW1lR2V0U3RhdHM8bj9lJiZlKHQuZmlsdGVyU3RhdHNDYWNoZSx0Lm9yaWdpblN0YXRzQ2FjaGUpOih0Lmxhc3RUaW1lR2V0U3RhdHM9RGF0ZS5ub3coKSx0aGlzLl9nZXRTdGF0cyhmdW5jdGlvbihuLGkpe3QuZmlsdGVyU3RhdHNDYWNoZT1uLHQub3JpZ2luU3RhdHNDYWNoZT1pLGUmJmUobixpKX0pKX0sdC5fc2V0U3RhdD1mdW5jdGlvbihlLHQsbil7ZS5oYXNPd25Qcm9wZXJ0eSh0KSYmKG51bGwhPW4mJm4hPT0xLzAmJm49PW58fChuPTApLGVbdF09bitcIlwiKX0sdC5fcHJvY2Vzc0dldFN0YXRzQWZ0ZXJDaHJvbWU3Nj1mdW5jdGlvbihlKXt2YXIgbj10aGlzO3QubGFzdFN0YXRzfHwodC5sYXN0U3RhdHM9bmV3IE1hcCksdC5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24ocil7dmFyIG89W10sdT1bXSxsPW5ldyBNYXAscD1uZXcgRGF0ZSxmPSEwLG09ITEsZz12b2lkIDA7dHJ5e2Zvcih2YXIgdixoPXIudmFsdWVzKClbU3ltYm9sLml0ZXJhdG9yXSgpOyEoZj0odj1oLm5leHQoKSkuZG9uZSk7Zj0hMCl7dmFyIF89di52YWx1ZTtcImNvZGVjXCIhPV8udHlwZT9cImNhbmRpZGF0ZS1wYWlyXCIhPV8udHlwZT8oXCJpbmJvdW5kLXJ0cFwiPT09Xy50eXBlJiZcInZpZGVvXCI9PT1fLm1lZGlhVHlwZSYmbC5zZXQoXCJpbmJvdW5kLXZpZGVvXCIsXyksXCJpbmJvdW5kLXJ0cFwiPT09Xy50eXBlJiZcImF1ZGlvXCI9PT1fLm1lZGlhVHlwZSYmbC5zZXQoXCJpbmJvdW5kLWF1ZGlvXCIsXyksXCJvdXRib3VuZC1ydHBcIj09PV8udHlwZSYmXCJhdWRpb1wiPT09Xy5tZWRpYVR5cGUmJmwuc2V0KFwib3V0Ym91bmQtYXVkaW9cIixfKSxcIm91dGJvdW5kLXJ0cFwiPT09Xy50eXBlJiZcInZpZGVvXCI9PT1fLm1lZGlhVHlwZSYmbC5zZXQoXCJvdXRib3VuZC12aWRlb1wiLF8pLFwidHJhY2tcIj09PV8udHlwZSYmXCJ2aWRlb1wiPT09Xy5raW5kJiZfLnJlbW90ZVNvdXJjZSYmbC5zZXQoXCJyZW1vdGUtdmlkZW8tdHJhY2tcIixfKSxcInRyYWNrXCI9PT1fLnR5cGUmJlwiYXVkaW9cIj09PV8ua2luZCYmXy5yZW1vdGVTb3VyY2UmJmwuc2V0KFwicmVtb3RlLWF1ZGlvLXRyYWNrXCIsXyksXCJyZW1vdGUtaW5ib3VuZC1ydHBcIj09PV8udHlwZSYmXCJ2aWRlb1wiPT09Xy5tZWRpYVR5cGUmJmwuc2V0KFwicmVtb3RlLWluYm91bmQtdmlkZW9cIixfKSxcInJlbW90ZS1pbmJvdW5kLXJ0cFwiPT09Xy50eXBlJiZcImF1ZGlvXCI9PT1fLm1lZGlhVHlwZSYmbC5zZXQoXCJyZW1vdGUtaW5ib3VuZC1hdWRpb1wiLF8pLFwidHJhY2tcIiE9PV8udHlwZXx8XCJ2aWRlb1wiIT09Xy5raW5kfHxfLnJlbW90ZVNvdXJjZXx8bC5zZXQoXCJsb2NhbC12aWRlby10cmFja1wiLF8pLFwidHJhY2tcIiE9PV8udHlwZXx8XCJhdWRpb1wiIT09Xy5raW5kfHxfLnJlbW90ZVNvdXJjZXx8bC5zZXQoXCJsb2NhbC1hdWRpby10cmFja1wiLF8pLFwibWVkaWEtc291cmNlXCI9PT1fLnR5cGUmJlwidmlkZW9cIj09PV8ua2luZCYmbC5zZXQoXCJtZWRpYS1zb3VyY2UtdmlkZW9cIixfKSxcIm1lZGlhLXNvdXJjZVwiPT09Xy50eXBlJiZcImF1ZGlvXCI9PT1fLmtpbmQmJmwuc2V0KFwibWVkaWEtc291cmNlLWF1ZGlvXCIsXykpOnUucHVzaChfKTpvLnB1c2goXyl9fWNhdGNoKGUpe209ITAsZz1lfWZpbmFsbHl7dHJ5e2Z8fG51bGw9PWgucmV0dXJufHxoLnJldHVybigpfWZpbmFsbHl7aWYobSl0aHJvdyBnfX1sLnNldChcImNvZGVjXCIsbyksbC5zZXQoXCJjYW5kaWRhdGVQYWlyc1wiLHUpLGwuc2V0KFwidGltZXN0YW1wXCIsK3ApO3ZhciBFPW51bGwsST1udWxsO2lmKGMudGltZXN0YW1wPXAscy50aW1lc3RhbXA9cCxpLnRpbWVzdGFtcD1wLGkudGltZXN0YW1wPXAsZC50aW1lc3RhbXA9cCxuLmlzU3Vic2NyaWJlcikoRT1sLmdldChcImluYm91bmQtdmlkZW9cIikpJiYodC5fc2V0U3RhdChjLFwiaWRcIixcImluYm91bmRfdmlkZW9fc3NyY19yZWN2XCIpLHQuX3NldFN0YXQoYyxcIm1lZGlhVHlwZVwiLEUubWVkaWFUeXBlKSx0Ll9zZXRTdGF0KGMsXCJwYWNrZXRzTG9zdFwiLEUucGFja2V0c0xvc3QpLHQuX3NldFN0YXQoYyxcImdvb2dEZWNvZGVNc1wiLG51bGwpLHQuX3NldFN0YXQoYyxcImdvb2dNYXhEZWNvZGVNc1wiLG51bGwpLHQuX3NldFN0YXQoYyxcImdvb2dSZW5kZXJEZWxheU1zXCIsbnVsbCksdC5fc2V0U3RhdChjLFwiZ29vZ01pblBsYXlvdXREZWxheU1zXCIsbnVsbCksdC5fc2V0U3RhdChjLFwiZ29vZ05hY2tzU2VudFwiLEUubmFja0NvdW50KSx0Ll9zZXRTdGF0KGMsXCJnb29nUGxpc1NlbnRcIixFLnBsaUNvdW50KSx0Ll9zZXRTdGF0KGMsXCJnb29nRmlyc1NlbnRcIixFLmZpckNvdW50KSx0Ll9zZXRTdGF0KGMsXCJieXRlc1JlY2VpdmVkXCIsRS5ieXRlc1JlY2VpdmVkKSx0Ll9zZXRTdGF0KGMsXCJwYWNrZXRzUmVjZWl2ZWRcIixFLnBhY2tldHNSZWNlaXZlZCkpLChFPWwuZ2V0KFwiaW5ib3VuZC1hdWRpb1wiKSkmJih0Ll9zZXRTdGF0KHMsXCJpZFwiLFwiaW5ib3VuZF9hdWRpb19zc3JjX3JlY3ZcIiksdC5fc2V0U3RhdChzLFwibWVkaWFUeXBlXCIsRS5tZWRpYVR5cGUpLHQuX3NldFN0YXQocyxcImJ5dGVzUmVjZWl2ZWRcIixFLmJ5dGVzUmVjZWl2ZWQpLHQuX3NldFN0YXQocyxcInBhY2tldHNMb3N0XCIsRS5wYWNrZXRzTG9zdCksdC5fc2V0U3RhdChzLFwicGFja2V0c1JlY2VpdmVkXCIsRS5wYWNrZXRzUmVjZWl2ZWQpLHQuX3NldFN0YXQocyxcImdvb2dBY2NlbGVyYXRlUmF0ZVwiLEUucmVtb3ZlZFNhbXBsZXNGb3JBY2NlbGVyYXRpb24pLHQuX3NldFN0YXQocyxcImdvb2dDdXJyZW50RGVsYXlNc1wiLEUuaml0dGVyQnVmZmVyRGVsYXkpLHQuX3NldFN0YXQocyxcImdvb2dEZWNvZGluZ0NOR1wiLG51bGwpLHQuX3NldFN0YXQocyxcImdvb2dEZWNvZGluZ0NUTlwiLG51bGwpLHQuX3NldFN0YXQocyxcImdvb2dEZWNvZGluZ0NUU0dcIixudWxsKSx0Ll9zZXRTdGF0KHMsXCJnb29nRGVjb2RpbmdOb3JtYWxcIixudWxsKSx0Ll9zZXRTdGF0KHMsXCJnb29nRGVjb2RpbmdQTENcIixudWxsKSx0Ll9zZXRTdGF0KHMsXCJnb29nRGVjb2RpbmdQTENDTkdcIixudWxsKSx0Ll9zZXRTdGF0KHMsXCJnb29nSml0dGVyUmVjZWl2ZWRcIixFLmppdHRlciksdC5fc2V0U3RhdChzLFwiZ29vZ1ByZWZlcnJlZEppdHRlckJ1ZmZlck1zXCIsbnVsbCksdC5fc2V0U3RhdChzLFwiZ29vZ1NlY29uZGFyeURlY29kZWRSYXRlXCIsbnVsbCkpLChFPWwuZ2V0KFwicmVtb3RlLXZpZGVvLXRyYWNrXCIpKSYmKHQuX3NldFN0YXQoYyxcImdvb2dUYXJnZXREZWxheU1zXCIsRS5qaXR0ZXJCdWZmZXJEZWxheSksdC5fc2V0U3RhdChjLFwiZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZFwiLEUuZnJhbWVXaWR0aCksdC5fc2V0U3RhdChjLFwiZ29vZ0ZyYW1lSGVpZ2h0UmVjZWl2ZWRcIixFLmZyYW1lSGVpZ2h0KSx0Ll9zZXRTdGF0KGMsXCJnb29nSml0dGVyQnVmZmVyTXNcIixFLmppdHRlckJ1ZmZlckRlbGF5L0Uuaml0dGVyQnVmZmVyRW1pdHRlZENvdW50KjFlMyksdC5fc2V0U3RhdChjLFwiZ29vZ0N1cnJlbnREZWxheU1zXCIsRS5qaXR0ZXJCdWZmZXJEZWxheSksdC5fc2V0U3RhdChjLFwiZ29vZ0ZyYW1lc0RlY29kZWRcIixFLmZyYW1lc0RlY29kZWQpLHQuX3NldFN0YXQoYyxcImdvb2dGcmFtZXNSZWNlaXZlZFwiLEUuZnJhbWVzUmVjZWl2ZWQpKSwoRT1sLmdldChcInJlbW90ZS1hdWRpby10cmFja1wiKSkmJih0Ll9zZXRTdGF0KHMsXCJhdWRpb091dHB1dExldmVsXCIsMzI3NjcqRS5hdWRpb0xldmVsKSx0Ll9zZXRTdGF0KHMsXCJnb29nSml0dGVyQnVmZmVyTXNcIixFLmppdHRlckJ1ZmZlckRlbGF5L0Uuaml0dGVyQnVmZmVyRW1pdHRlZENvdW50KjFlMyksdC5fc2V0U3RhdChzLFwiZ29vZ0V4cGFuZFJhdGVcIixFLmNvbmNlYWxlZFNhbXBsZXMpLHQuX3NldFN0YXQocyxcImdvb2dQcmVlbXB0aXZlRXhwYW5kUmF0ZVwiLEUuaW5zZXJ0ZWRTYW1wbGVzRm9yRGVjZWxlcmF0aW9uKSx0Ll9zZXRTdGF0KHMsXCJnb29nU3BlZWNoRXhwYW5kUmF0ZVwiLEUuc2lsZW50Q29uY2VhbGVkU2FtcGxlcykpO2Vsc2V7dmFyIHk9dC5sYXN0U3RhdHMuZ2V0KFwidGltZXN0YW1wXCIpLFQ9dC5sYXN0U3RhdHMuZ2V0KFwib3V0Ym91bmQtdmlkZW9cIik7aWYoKEU9bC5nZXQoXCJvdXRib3VuZC1hdWRpb1wiKSkmJih0Ll9zZXRTdGF0KGksXCJpZFwiLFwib3V0Ym91bmRfYXVkaW9fc3NyY19zZW5kXCIpLHQuX3NldFN0YXQoaSxcIm1lZGlhVHlwZVwiLEUubWVkaWFUeXBlKSx0Ll9zZXRTdGF0KGksXCJhZWNEaXZlcmdlbnRGaWx0ZXJGcmFjdGlvblwiLG51bGwpLHQuX3NldFN0YXQoaSxcImJ5dGVzU2VudFwiLEUuYnl0ZXNTZW50KSx0Ll9zZXRTdGF0KGksXCJwYWNrZXRzU2VudFwiLEUucGFja2V0c1NlbnQpLEk9RS50cmFuc3BvcnRJZCksRT1sLmdldChcIm91dGJvdW5kLXZpZGVvXCIpKXtpZih0Ll9zZXRTdGF0KGEsXCJpZFwiLFwib3V0Ym91bmRfdmlkZW9fc3NyY19zZW5kXCIpLHQuX3NldFN0YXQoYSxcIm1lZGlhVHlwZVwiLEUubWVkaWFUeXBlKSx0Ll9zZXRTdGF0KGEsXCJieXRlc1NlbnRcIixFLmJ5dGVzU2VudCksdC5fc2V0U3RhdChhLFwicGFja2V0c1NlbnRcIixFLnBhY2tldHNTZW50KSx0Ll9zZXRTdGF0KGEsXCJnb29nQWRhcHRhdGlvbkNoYW5nZXNcIixFLnF1YWxpdHlMaW1pdGF0aW9uRHVyYXRpb25zKSx0Ll9zZXRTdGF0KGEsXCJnb29nQXZnRW5jb2RlTXNcIixudWxsKSx0Ll9zZXRTdGF0KGEsXCJnb29nRW5jb2RlVXNhZ2VQZXJjZW50XCIsbnVsbCksST1FLnRyYW5zcG9ydElkLEUudG90YWxFbmNvZGVkQnl0ZXNUYXJnZXQmJlQmJlQudG90YWxFbmNvZGVkQnl0ZXNUYXJnZXQpe3ZhciBiPShFLnRvdGFsRW5jb2RlZEJ5dGVzVGFyZ2V0LVQudG90YWxFbmNvZGVkQnl0ZXNUYXJnZXQpLygrbmV3IERhdGUteSk7dC5fc2V0U3RhdChkLFwiZ29vZ1RhcmdldEVuY0JpdHJhdGVcIixNYXRoLmZsb29yKDgqYioxZTMpKX1pZihFLnJldHJhbnNtaXR0ZWRCeXRlc1NlbnQmJlQmJlQucmV0cmFuc21pdHRlZEJ5dGVzU2VudCl7dmFyIFI9KEUucmV0cmFuc21pdHRlZEJ5dGVzU2VudC1ULnJldHJhbnNtaXR0ZWRCeXRlc1NlbnQpLygrbmV3IERhdGUteSk7dC5fc2V0U3RhdChkLFwiZ29vZ1JldHJhbnNtaXRCaXRyYXRlXCIsTWF0aC5mbG9vcig4KlIqMWUzKSl9aWYoRS5ieXRlc1NlbnQmJlQmJlQuYnl0ZXNTZW50KXt2YXIgQT0oRS5ieXRlc1NlbnQtVC5ieXRlc1NlbnQpLygrbmV3IERhdGUteSk7dC5fc2V0U3RhdChkLFwiZ29vZ1RyYW5zbWl0Qml0cmF0ZVwiLE1hdGguZmxvb3IoOCpBKjFlMykpLHQuX3NldFN0YXQoZCxcImdvb2dBY3R1YWxFbmNCaXRyYXRlXCIsTWF0aC5mbG9vcig4KkEqMWUzKSl9aWYoRS50b3RhbFBhY2tldFNlbmREZWxheSYmVCYmVC50b3RhbFBhY2tldFNlbmREZWxheSl7dmFyIE89KEUudG90YWxQYWNrZXRTZW5kRGVsYXktVC50b3RhbFBhY2tldFNlbmREZWxheSkvKCtuZXcgRGF0ZS15KTt0Ll9zZXRTdGF0KGQsXCJnb29nQnVja2V0RGVsYXlcIixNYXRoLmZsb29yKDFlMypPKSl9fWlmKChFPWwuZ2V0KFwicmVtb3RlLWluYm91bmQtdmlkZW9cIikpJiYodC5fc2V0U3RhdChhLFwicGFja2V0c0xvc3RcIixFLnBhY2tldHNMb3N0KSx0Ll9zZXRTdGF0KGEsXCJnb29nUnR0XCIsRS5yb3VuZFRyaXBUaW1lKSksKEU9bC5nZXQoXCJsb2NhbC12aWRlby10cmFja1wiKSkmJih0Ll9zZXRTdGF0KGEsXCJnb29nRnJhbWVIZWlnaHRTZW50XCIsRS5mcmFtZUhlaWdodCksdC5fc2V0U3RhdChhLFwiZ29vZ0ZyYW1lV2lkdGhTZW50XCIsRS5mcmFtZVdpZHRoKSx2b2lkIDAhPT1FLmZyYW1lc1BlclNlY29uZCYmdC5fc2V0U3RhdChhLFwiZ29vZ0ZyYW1lUmF0ZVNlbnRcIixFLmZyYW1lc1BlclNlY29uZCkpLChFPWwuZ2V0KFwibG9jYWwtYXVkaW8tdHJhY2tcIikpJiYodC5fc2V0U3RhdChpLFwiZ29vZ0VjaG9DYW5jZWxsYXRpb25SZXR1cm5Mb3NzXCIsRS5lY2hvUmV0dXJuTG9zcyksdC5fc2V0U3RhdChpLFwiZ29vZ0VjaG9DYW5jZWxsYXRpb25SZXR1cm5Mb3NzRW5oYW5jZW1lbnRcIixFLmVjaG9SZXR1cm5Mb3NzRW5oYW5jZW1lbnQpKSwoRT1sLmdldChcIm1lZGlhLXNvdXJjZS12aWRlb1wiKSkmJih0Ll9zZXRTdGF0KGEsXCJnb29nRnJhbWVIZWlnaHRJbnB1dFwiLEUuaGVpZ2h0KSx0Ll9zZXRTdGF0KGEsXCJnb29nRnJhbWVXaWR0aElucHV0XCIsRS53aWR0aCksdC5fc2V0U3RhdChhLFwiZ29vZ0ZyYW1lUmF0ZUlucHV0XCIsRS5mcmFtZXNQZXJTZWNvbmQpKSwoRT1sLmdldChcIm1lZGlhLXNvdXJjZS1hdWRpb1wiKSkmJnQuX3NldFN0YXQoaSxcImF1ZGlvSW5wdXRMZXZlbFwiLDMyNzY3KkUudG90YWxBdWRpb0VuZXJneSksKEU9bC5nZXQoXCJpbmJvdW5kLXZpZGVvXCIpKSYmKHQuX3NldFN0YXQoYSxcImdvb2dGaXJzUmVjZWl2ZWRcIixFLmZpckNvdW50KSx0Ll9zZXRTdGF0KGEsXCJnb29nTmFja3NSZWNlaXZlZFwiLEUubmFja0NvdW50KSx0Ll9zZXRTdGF0KGEsXCJnb29nUGxpc1JlY2VpdmVkXCIsRS5wbGlDb3VudCkpLEkpbC5nZXQoXCJjYW5kaWRhdGVQYWlyc1wiKS5tYXAoZnVuY3Rpb24oZSl7ST09ZS50cmFuc3BvcnRJZCYmdC5fc2V0U3RhdChkLFwiZ29vZ0F2YWlsYWJsZVNlbmRCYW5kd2lkdGhcIixlLmF2YWlsYWJsZU91dGdvaW5nQml0cmF0ZSl9KTtlbHNle3ZhciBDPWwuZ2V0KFwiY2FuZGlkYXRlUGFpcnNcIilbMF07QyYmdC5fc2V0U3RhdChkLFwiZ29vZ0F2YWlsYWJsZVNlbmRCYW5kd2lkdGhcIixDLmF2YWlsYWJsZU91dGdvaW5nQml0cmF0ZSl9fXQubGFzdFN0YXRzPWw7dmFyIE49W1MoKSh7fSxhKSxTKCkoe30saSksUygpKHt9LGMpLFMoKSh7fSxzKSxTKCkoe30sZCldO04ucHVzaCh7aWQ6XCJ0aW1lXCIsc3RhcnRUaW1lOnQuY29ubmVjdGVkVGltZSx0aW1lc3RhbXA6bmV3IERhdGV9KSxlKE4pfSl9LHQuX3Byb2Nlc3NHZXRTdGF0c0JlZm9yZUNocm9tZTc2PWZ1bmN0aW9uKGUpe3QucGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoZnVuY3Rpb24obil7dmFyIHI9W10sbz1bXSx1PW51bGw7T2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1uW2VdO3QmJihvLnB1c2godCksdT10LnRpbWVzdGFtcCxcIlZpZGVvQndlXCI9PT10LnR5cGU/ZD10OnQuaWQuaW5kZXhPZihcIl9zZW5kXCIpPi0xJiZcInZpZGVvXCI9PT10Lm1lZGlhVHlwZT9hPXQ6dC5pZC5pbmRleE9mKFwiX3NlbmRcIik+LTEmJlwiYXVkaW9cIj09PXQubWVkaWFUeXBlP2k9dDp0LmlkLmluZGV4T2YoXCJfcmVjdlwiKT4tMSYmXCJ2aWRlb1wiPT09dC5tZWRpYVR5cGU/Yz10OnQuaWQuaW5kZXhPZihcIl9yZWN2XCIpPi0xJiZcImF1ZGlvXCI9PT10Lm1lZGlhVHlwZSYmKHM9dCkpfSksKHI9W1MoKSh7fSxhKSxTKCkoe30saSksUygpKHt9LGMpLFMoKSh7fSxzKSxTKCkoe30sZCldKS5wdXNoKHtpZDpcInRpbWVcIixzdGFydFRpbWU6dC5jb25uZWN0ZWRUaW1lLHRpbWVzdGFtcDp1fHxuZXcgRGF0ZX0pLGUocixvKX0pfSx0Ll9nZXRTdGF0cz1mdW5jdGlvbihlKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQ0hST01FX05FV19TVEFUU1wiKSYmbS5pc0Nocm9tZUtlcm5lbCgpJiYrbS5nZXRCcm93c2VyVmVyc2lvbigpPj03Nj90Ll9wcm9jZXNzR2V0U3RhdHNBZnRlckNocm9tZTc2KGUpOnQuX3Byb2Nlc3NHZXRTdGF0c0JlZm9yZUNocm9tZTc2KGUpfSx0LmFkZFRyYWNrPWZ1bmN0aW9uKGUsbil7dC5wZWVyQ29ubmVjdGlvbi5hZGRUcmFjayhlLG4pfSx0LnJlbW92ZVRyYWNrPWZ1bmN0aW9uKGUsbil7dC5wZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayh0LnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrPT1lfSkpfSx0LmFkZFN0cmVhbT1mdW5jdGlvbihlKXt0LnBlZXJDb25uZWN0aW9uLmFkZFN0cmVhbShlKSx0Lm1hcmtBY3Rpb25OZWVkZWQoKX0sdC5yZW1vdmVTdHJlYW09ZnVuY3Rpb24oKXt0Lm1hcmtBY3Rpb25OZWVkZWQoKX0sdC5jbG9zZT1mdW5jdGlvbigpe3Quc3RhdGU9XCJjbG9zZWRcIix0LnBlZXJDb25uZWN0aW9uLmNsb3NlKCl9LHQubWFya0FjdGlvbk5lZWRlZD1mdW5jdGlvbigpe3QuYWN0aW9uTmVlZGVkPSEwLHQuZG9MYXRlcihmdW5jdGlvbigpe3Qub25zdGFibGVzdGF0ZSgpfSl9LHQuZG9MYXRlcj1mdW5jdGlvbihlKXt3aW5kb3cuc2V0VGltZW91dChlLDEpfSx0Lm9uc3RhYmxlc3RhdGU9ZnVuY3Rpb24oKXt2YXIgZTtpZih0LmFjdGlvbk5lZWRlZCl7aWYoXCJuZXdcIj09PXQuc3RhdGV8fFwiZXN0YWJsaXNoZWRcIj09PXQuc3RhdGUpdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcihmdW5jdGlvbihlKXtpZihlLnNkcCE9PXQucHJldk9mZmVyKXJldHVybiB0LnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZSksdC5zdGF0ZT1cInByZXBhcmluZy1vZmZlclwiLHZvaWQgdC5tYXJrQWN0aW9uTmVlZGVkKCk7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdTm90IHNlbmRpbmcgYSBuZXcgb2ZmZXJcIil9LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXBlZXIgY29ubmVjdGlvbiBjcmVhdGUgb2ZmZXIgZmFpbGVkIFwiLGUpfSx0Lm1lZGlhQ29uc3RyYWludHMpO2Vsc2UgaWYoXCJwcmVwYXJpbmctb2ZmZXJcIj09PXQuc3RhdGUpe2lmKHQubW9yZUljZUNvbWluZylyZXR1cm47dC5wcmV2T2ZmZXI9dC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCx0Lm9mZmVyQ2FuZGlkYXRlcz10LnByZXZPZmZlci5tYXRjaCgvYT1jYW5kaWRhdGUuK1xcclxcbi9nKXx8W10sdC5vZmZlckNhbmRpZGF0ZXMubGVuZ3RofHwoby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdTm8gSWNlIENhbmRpZGF0ZSBnZW5lcmF0ZWRcIikpLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJTSElNX0NBTkRJREFURVwiKT8oby5kZWZhdWx0LmRlYnVnKFwiU2hpbW1pbmcgZmFrZSBjYW5kaWRhdGVcIiksdC5wcmV2T2ZmZXIrPVwiYT1jYW5kaWRhdGU6MjI0MzI1NTQzNSAxIHVkcCAyMTIyMTk0Njg3IDE5Mi4xNjguMC4xIDMwMDAwIHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDFcXHJcXG5cIik6by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXU5vbmUgSWNlIENhbmRpZGF0ZSBub3QgYWxsb3dlZFwiKSkpLHQucHJldk9mZmVyPXQucHJldk9mZmVyLnJlcGxhY2UoL2E9Y2FuZGlkYXRlOi4rdHlwXFxzaG9zdC4rXFxyXFxuL2csXCJhPWNhbmRpZGF0ZToyMjQzMjU1NDM1IDEgdWRwIDIxMjIxOTQ2ODcgMTkyLjE2OC4wLjEgMzAwMDAgdHlwIGhvc3QgZ2VuZXJhdGlvbiAwIG5ldHdvcmstaWQgMVxcclxcblwiKSx0LnNlbmRNZXNzYWdlKFwiT0ZGRVJcIix0LnByZXZPZmZlciksdC5zdGF0ZT1cIm9mZmVyLXNlbnRcIn1lbHNlIGlmKFwib2ZmZXItcmVjZWl2ZWRcIj09PXQuc3RhdGUpdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoZnVuY3Rpb24oZSl7aWYodC5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGUpLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZC1wcmVwYXJpbmctYW5zd2VyXCIsdC5pY2VTdGFydGVkKXQubWFya0FjdGlvbk5lZWRlZCgpO2Vsc2V7dmFyIG49bmV3IERhdGU7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdXCIrbi5nZXRUaW1lKCkrXCI6IFN0YXJ0aW5nIElDRSBpbiByZXNwb25kZXJcIiksdC5pY2VTdGFydGVkPSEwfX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdcGVlciBjb25uZWN0aW9uIGNyZWF0ZSBhbnN3ZXIgZmFpbGVkIFwiLGUpfSx0Lm1lZGlhQ29uc3RyYWludHMpO2Vsc2UgaWYoXCJvZmZlci1yZWNlaXZlZC1wcmVwYXJpbmctYW5zd2VyXCI9PT10LnN0YXRlKXtpZih0Lm1vcmVJY2VDb21pbmcpcmV0dXJuO2U9dC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCx0LnNlbmRNZXNzYWdlKFwiQU5TV0VSXCIsZSksdC5zdGF0ZT1cImVzdGFibGlzaGVkXCJ9ZWxzZSB0LmRlYnVnKFwiRGF6ZWQgYW5kIGNvbmZ1c2VkIGluIHN0YXRlIFwiK3Quc3RhdGUrXCIsIHN0b3BwaW5nIGhlcmVcIik7dC5hY3Rpb25OZWVkZWQ9ITF9fSx0LnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUsbil7dmFyIGk9e307aS5tZXNzYWdlVHlwZT1lLGkuc2RwPW4sXCJPRkZFUlwiPT09ZT8oaS5vZmZlcmVyU2Vzc2lvbklkPXQuc2Vzc2lvbklkLGkuYW5zd2VyZXJTZXNzaW9uSWQ9dC5vdGhlclNlc3Npb25JZCxpLnNlcT10LnNlcXVlbmNlTnVtYmVyKz0xLGkudGllYnJlYWtlcj1NYXRoLmZsb29yKDQyOTQ5NjcyMypNYXRoLnJhbmRvbSgpKzEpKTooaS5vZmZlcmVyU2Vzc2lvbklkPXQuaW5jb21pbmdNZXNzYWdlLm9mZmVyZXJTZXNzaW9uSWQsaS5hbnN3ZXJlclNlc3Npb25JZD10LnNlc3Npb25JZCxpLnNlcT10LmluY29taW5nTWVzc2FnZS5zZXEpLHQub25zaWduYWxpbmdtZXNzYWdlKEpTT04uc3RyaW5naWZ5KGkpKX0sdC5fZ2V0U2VuZGVyPWZ1bmN0aW9uKGUpe2lmKHQucGVlckNvbm5lY3Rpb24mJnQucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycyl7dmFyIG49dC5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjay5raW5kPT1lfSk7aWYobilyZXR1cm4gbn1yZXR1cm4gbnVsbH0sdC5oYXNTZW5kZXI9ZnVuY3Rpb24oZSl7cmV0dXJuISF0Ll9nZXRTZW5kZXIoZSl9LHQucmVwbGFjZVRyYWNrPWZ1bmN0aW9uKGUsbixpKXt2YXIgYT10Ll9nZXRTZW5kZXIoZS5raW5kKTtpZighYSlyZXR1cm4gaShcIk5PX1NFTkRFUl9GT1VORFwiKTt0cnl7YS5yZXBsYWNlVHJhY2soZSl9Y2F0Y2goZSl7cmV0dXJuIGkmJmkoZSl9c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBuJiZuKCl9LDUwKX0sdC5lcnJvcj1mdW5jdGlvbihlKXt0aHJvd1wiRXJyb3IgaW4gUm9hcE9uSnNlcDogXCIrZX0sdC5zZXNzaW9uSWQ9dC5yb2FwU2Vzc2lvbklkKz0xLHQuc2VxdWVuY2VOdW1iZXI9MCx0LmFjdGlvbk5lZWRlZD0hMSx0LmljZVN0YXJ0ZWQ9ITEsdC5tb3JlSWNlQ29taW5nPSEwLHQuaWNlQ2FuZGlkYXRlQ291bnQ9MCx0Lm9uc2lnbmFsaW5nbWVzc2FnZT1lLmNhbGxiYWNrLHQucGVlckNvbm5lY3Rpb24ub250cmFjaz1mdW5jdGlvbihlKXt0Lm9uYWRkc3RyZWFtJiYodC5vbmFkZHN0cmVhbShlLFwib250cmFja1wiKSx0LnBlZXJDb25uZWN0aW9uLm9uYWRkc3RyZWFtPW51bGwpfSx0LnBlZXJDb25uZWN0aW9uLm9uYWRkc3RyZWFtPWZ1bmN0aW9uKGUpe3Qub25hZGRzdHJlYW0mJih0Lm9uYWRkc3RyZWFtKGUsXCJvbmFkZHN0cmVhbVwiKSx0LnBlZXJDb25uZWN0aW9uLm9udHJhY2s9bnVsbCl9LHQucGVlckNvbm5lY3Rpb24ub25yZW1vdmVzdHJlYW09ZnVuY3Rpb24oZSl7dC5vbnJlbW92ZXN0cmVhbSYmdC5vbnJlbW92ZXN0cmVhbShlKX0sdC5wZWVyQ29ubmVjdGlvbi5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbihlKXtcImNvbm5lY3RlZFwiPT09ZS5jdXJyZW50VGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZSYmKHQuY29ubmVjdGVkVGltZT1uZXcgRGF0ZSksdC5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZSYmdC5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZShlLmN1cnJlbnRUYXJnZXQuaWNlQ29ubmVjdGlvblN0YXRlKX0sdC5yZW5lZ290aWF0ZT1mdW5jdGlvbigpe3ZvaWQgMCE9PXQucHJldk9mZmVyJiZ0LnBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKCkudGhlbihmdW5jdGlvbihlKXtyZXR1cm4gZS5zZHA9ZS5zZHAucmVwbGFjZSgvYT1yZWN2b25seVxcclxcbi9nLFwiYT1pbmFjdGl2ZVxcclxcblwiKSxlLnNkcD11KGUuc2RwKSxlLnNkcD1sKGUuc2RwKSx0LnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZSl9KS50aGVuKGZ1bmN0aW9uKCl7dC5vbm5lZ290aWF0aW9ubmVlZGVkJiZ0Lm9ubmVnb3RpYXRpb25uZWVkZWQodC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCl9KS5jYXRjaChmdW5jdGlvbihlKXtjb25zb2xlLmxvZyhcImNyZWF0ZU9mZmVyIGVycm9yOiBcIixlKX0pfSx0LnBlZXJDb25uZWN0aW9uLm9ubmVnb3RpYXRpb25uZWVkZWQ9dC5yZW5lZ290aWF0ZSx0Lm9uYWRkc3RyZWFtPW51bGwsdC5vbnJlbW92ZXN0cmVhbT1udWxsLHQub25uZWdvdGlhdGlvbm5lZWRlZD1udWxsLHQuc3RhdGU9XCJuZXdcIix0Lm1hcmtBY3Rpb25OZWVkZWQoKSx0fSxCPWZ1bmN0aW9uKGUpe3ZhciB0PXt9LG49RS5SVENQZWVyQ29ubmVjdGlvbjt0LnVpZD1lLnVpZCx0LmlzVmlkZW9NdXRlPWUuaXNWaWRlb011dGUsdC5pc0F1ZGlvTXV0ZT1lLmlzQXVkaW9NdXRlLHQuaXNTdWJzY3JpYmVyPWUuaXNTdWJzY3JpYmVyLHQuY2xpZW50SWQ9ZS5jbGllbnRJZCx0LmZpbHRlclN0YXRzQ2FjaGU9W10sdC5vcmlnaW5TdGF0c0NhY2hlPVtdLHQubGFzdFRpbWVHZXRTdGF0cz1udWxsLHQucGNfY29uZmlnPXtpY2VTZXJ2ZXJzOlt7dXJsczpbXCJzdHVuOndlYmNzLmFnb3JhLmlvOjM0NzhcIixcInN0dW46c3R1bi5sLmdvb2dsZS5jb206MTkzMDJcIl19XSxidW5kbGVQb2xpY3k6XCJtYXgtYnVuZGxlXCJ9LHQuY29uPXtvcHRpb25hbDpbe0R0bHNTcnRwS2V5QWdyZWVtZW50OiEwfV19LGUuaWNlU2VydmVycyBpbnN0YW5jZW9mIEFycmF5P3QucGNfY29uZmlnLmljZVNlcnZlcnM9ZS5pY2VTZXJ2ZXJzOihlLnN0dW5TZXJ2ZXJVcmwmJihlLnN0dW5TZXJ2ZXJVcmwgaW5zdGFuY2VvZiBBcnJheT9lLnN0dW5TZXJ2ZXJVcmwubWFwKGZ1bmN0aW9uKGUpe1wic3RyaW5nXCI9PXR5cGVvZiBlJiZcIlwiIT09ZSYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmw6ZX0pfSk6XCJzdHJpbmdcIj09dHlwZW9mIGUuc3R1blNlcnZlclVybCYmXCJcIiE9PWUuc3R1blNlcnZlclVybCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1cmw6ZS5zdHVuU2VydmVyVXJsfSkpLGUudHVyblNlcnZlciYmKGUudHVyblNlcnZlciBpbnN0YW5jZW9mIEFycmF5P2UudHVyblNlcnZlci5tYXAoZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUudXJsJiZcIlwiIT09ZS51cmwmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXNlcm5hbWU6ZS51c2VybmFtZSxjcmVkZW50aWFsOmUuY3JlZGVudGlhbCx1cmw6ZS51cmx9KX0pOlwiYXV0b1wiIT09ZS50dXJuU2VydmVyLm1vZGUmJlwibWFudWFsXCIhPT1lLnR1cm5TZXJ2ZXIubW9kZXx8KGUudHVyblNlcnZlci51ZHBwb3J0JiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VzZXJuYW1lOmUudHVyblNlcnZlci51c2VybmFtZSxjcmVkZW50aWFsOmUudHVyblNlcnZlci5jcmVkZW50aWFsLGNyZWRlbnRpYWxUeXBlOlwicGFzc3dvcmRcIix1cmxzOltcInR1cm46XCIrZS50dXJuU2VydmVyLnVybCtcIjpcIitlLnR1cm5TZXJ2ZXIudWRwcG9ydCtcIj90cmFuc3BvcnQ9dWRwXCJdfSksXCJzdHJpbmdcIj09dHlwZW9mIGUudHVyblNlcnZlci50Y3Bwb3J0JiZcIlwiIT09ZS50dXJuU2VydmVyLnRjcHBvcnQmJnQucGNfY29uZmlnLmljZVNlcnZlcnMucHVzaCh7dXNlcm5hbWU6ZS50dXJuU2VydmVyLnVzZXJuYW1lLGNyZWRlbnRpYWw6ZS50dXJuU2VydmVyLmNyZWRlbnRpYWwsY3JlZGVudGlhbFR5cGU6XCJwYXNzd29yZFwiLHVybHM6W1widHVybjpcIitlLnR1cm5TZXJ2ZXIudXJsK1wiOlwiK2UudHVyblNlcnZlci50Y3Bwb3J0K1wiP3RyYW5zcG9ydD10Y3BcIl19KSwhMD09PWUudHVyblNlcnZlci5mb3JjZXR1cm4mJih0LnBjX2NvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3k9XCJyZWxheVwiKSkpKSx2b2lkIDA9PT1lLmF1ZGlvJiYoZS5hdWRpbz0hMCksdm9pZCAwPT09ZS52aWRlbyYmKGUudmlkZW89ITApLHQubWVkaWFDb25zdHJhaW50cz17bWFuZGF0b3J5OntPZmZlclRvUmVjZWl2ZVZpZGVvOmUudmlkZW8sT2ZmZXJUb1JlY2VpdmVBdWRpbzplLmF1ZGlvfX0sdC5yb2FwU2Vzc2lvbklkPTEwMzt0cnl7dC5wY19jb25maWcuc2RwU2VtYW50aWNzPVwicGxhbi1iXCIsdC5wZWVyQ29ubmVjdGlvbj1uZXcgbih0LnBjX2NvbmZpZyx0LmNvbil9Y2F0Y2goZSl7ZGVsZXRlIHQucGNfY29uZmlnLnNkcFNlbWFudGljcyx0LnBlZXJDb25uZWN0aW9uPW5ldyBuKHQucGNfY29uZmlnLHQuY29uKX1vLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCsnXXNhZmFyaSBDcmVhdGVkIFJUQ1BlZXJDb25ubmVjdGlvbiB3aXRoIGNvbmZpZyBcIicrSlNPTi5zdHJpbmdpZnkodC5wY19jb25maWcpKydcIi4nKSx0LmljZUNhbmRpZGF0ZVRpbWVyPXNldFRpbWVvdXQoZnVuY3Rpb24oKXt0LmljZUNhbmRpZGF0ZVRpbWVyPW51bGwsby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXUNhbmRpZGF0ZXMgY29sbGVjdGVkOiBcIikuY29uY2F0KHQuaWNlQ2FuZGlkYXRlQ291bnQpKSx0Lm1vcmVJY2VDb21pbmcmJih0Lm1vcmVJY2VDb21pbmc9ITEsdC5tYXJrQWN0aW9uTmVlZGVkKCkpfSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQ0FORElEQVRFX1RJTUVPVVRcIikpLHQucGVlckNvbm5lY3Rpb24ub25pY2VjYW5kaWRhdGU9ZnVuY3Rpb24oZSl7dmFyIG4saSxhLHI7aT0obj10LnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24uc2RwKS5tYXRjaCgvYT1jYW5kaWRhdGU6Lit0eXBcXHNzcmZseC4rXFxyXFxuLyksYT1uLm1hdGNoKC9hPWNhbmRpZGF0ZTouK3R5cFxcc2hvc3QuK1xcclxcbi8pLHI9bi5tYXRjaCgvYT1jYW5kaWRhdGU6Lit0eXBcXHNyZWxheS4rXFxyXFxuLyksMD09PXQuaWNlQ2FuZGlkYXRlQ291bnQmJih0LnRpbWVvdXQ9c2V0VGltZW91dChmdW5jdGlvbigpe3QubW9yZUljZUNvbWluZyYmKHQubW9yZUljZUNvbWluZz0hMSx0Lm1hcmtBY3Rpb25OZWVkZWQoKSl9LDFlMykpLG51bGw9PT1pJiZudWxsPT09YSYmbnVsbD09PXJ8fHZvaWQgMCE9PXQuaWNlfHwhdC5pY2VDYW5kaWRhdGVUaW1lcnx8KG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXNyZmx4IGNhbmRpZGF0ZSA6IFwiK2krXCIgcmVsYXkgY2FuZGlkYXRlOiBcIityK1wiIGhvc3QgY2FuZGlkYXRlIDogXCIrYSksY2xlYXJUaW1lb3V0KHQuaWNlQ2FuZGlkYXRlVGltZXIpLHQuaWNlQ2FuZGlkYXRlVGltZXI9bnVsbCx0LmljZT0wLHQubW9yZUljZUNvbWluZz0hMSx0Lm1hcmtBY3Rpb25OZWVkZWQoKSksdC5pY2VDYW5kaWRhdGVDb3VudD10LmljZUNhbmRpZGF0ZUNvdW50KzF9O3ZhciBpPWZ1bmN0aW9uKHQpe3JldHVybiBlLnNjcmVlbiYmKHQ9dC5yZXBsYWNlKFwiYT14LWdvb2dsZS1mbGFnOmNvbmZlcmVuY2VcXHJcXG5cIixcIlwiKSksdH0sYT1mdW5jdGlvbihuKXt2YXIgaSxhO3JldHVybihpPW4ubWF0Y2goL209dmlkZW8uKlxcclxcbi8pKSYmZS5taW5WaWRlb0JXJiZlLm1heFZpZGVvQlcmJihhPWlbMF0rXCJiPUFTOlwiK2UubWF4VmlkZW9CVytcIlxcclxcblwiLG49bi5yZXBsYWNlKGlbMF0sYSksby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdU2V0IFZpZGVvIEJpdHJhdGUgLSBtaW46XCIrZS5taW5WaWRlb0JXK1wiIG1heDpcIitlLm1heFZpZGVvQlcpKSwoaT1uLm1hdGNoKC9tPWF1ZGlvLipcXHJcXG4vKSkmJmUubWF4QXVkaW9CVyYmKGE9aVswXStcImI9QVM6XCIrZS5tYXhBdWRpb0JXK1wiXFxyXFxuXCIsbj1uLnJlcGxhY2UoaVswXSxhKSksbn07dC5wcm9jZXNzU2lnbmFsaW5nTWVzc2FnZT1mdW5jdGlvbihlKXt2YXIgbixyPUpTT04ucGFyc2UoZSk7dC5pbmNvbWluZ01lc3NhZ2U9cixcIm5ld1wiPT09dC5zdGF0ZT9cIk9GRkVSXCI9PT1yLm1lc3NhZ2VUeXBlPyhuPXtzZHA6ci5zZHAsdHlwZTpcIm9mZmVyXCJ9LHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihuKSksdC5zdGF0ZT1cIm9mZmVyLXJlY2VpdmVkXCIsdC5tYXJrQWN0aW9uTmVlZGVkKCkpOnQuZXJyb3IoXCJJbGxlZ2FsIG1lc3NhZ2UgZm9yIHRoaXMgc3RhdGU6IFwiK3IubWVzc2FnZVR5cGUrXCIgaW4gc3RhdGUgXCIrdC5zdGF0ZSk6XCJvZmZlci1zZW50XCI9PT10LnN0YXRlP1wiQU5TV0VSXCI9PT1yLm1lc3NhZ2VUeXBlPygobj17c2RwOnIuc2RwLHR5cGU6XCJhbnN3ZXJcIn0pLnNkcD1pKG4uc2RwKSxuLnNkcD1hKG4uc2RwKSxuLnNkcD1uLnNkcC5yZXBsYWNlKC9hPXgtZ29vZ2xlLWZsYWc6Y29uZmVyZW5jZVxcclxcbi9nLFwiXCIpLHQucGVlckNvbm5lY3Rpb24uc2V0UmVtb3RlRGVzY3JpcHRpb24obmV3IFJUQ1Nlc3Npb25EZXNjcmlwdGlvbihuKSksdC5zdGF0ZT1cImVzdGFibGlzaGVkXCIpOlwicHItYW5zd2VyXCI9PT1yLm1lc3NhZ2VUeXBlPyhuPXtzZHA6ci5zZHAsdHlwZTpcInByLWFuc3dlclwifSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obikpKTpcIm9mZmVyXCI9PT1yLm1lc3NhZ2VUeXBlP3QuZXJyb3IoXCJOb3Qgd3JpdHRlbiB5ZXRcIik6dC5lcnJvcihcIklsbGVnYWwgbWVzc2FnZSBmb3IgdGhpcyBzdGF0ZTogXCIrci5tZXNzYWdlVHlwZStcIiBpbiBzdGF0ZSBcIit0LnN0YXRlKTpcImVzdGFibGlzaGVkXCI9PT10LnN0YXRlJiYoXCJPRkZFUlwiPT09ci5tZXNzYWdlVHlwZT8obj17c2RwOnIuc2RwLHR5cGU6XCJvZmZlclwifSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBSVENTZXNzaW9uRGVzY3JpcHRpb24obikpLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZFwiLHQubWFya0FjdGlvbk5lZWRlZCgpKTpcIkFOU1dFUlwiPT09ci5tZXNzYWdlVHlwZT8oKG49e3NkcDpyLnNkcCx0eXBlOlwiYW5zd2VyXCJ9KS5zZHA9aShuLnNkcCksbi5zZHA9YShuLnNkcCksdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgUlRDU2Vzc2lvbkRlc2NyaXB0aW9uKG4pKSk6dC5lcnJvcihcIklsbGVnYWwgbWVzc2FnZSBmb3IgdGhpcyBzdGF0ZTogXCIrci5tZXNzYWdlVHlwZStcIiBpbiBzdGF0ZSBcIit0LnN0YXRlKSl9O3ZhciBzPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixnb29nQ29kZWNOYW1lOlwib3B1c1wiLGFlY0RpdmVyZ2VudEZpbHRlckZyYWN0aW9uOlwiMFwiLGF1ZGlvSW5wdXRMZXZlbDpcIjBcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0VjaG9DYW5jZWxsYXRpb25SZXR1cm5Mb3NzOlwiMFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zc0VuaGFuY2VtZW50OlwiMFwifSxjPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixnb29nQ29kZWNOYW1lOlwiaDI2NFwiPT09ZS5jb2RlYz9cIkgyNjRcIjpcIlZQOFwiLGJ5dGVzU2VudDpcIjBcIixwYWNrZXRzTG9zdDpcIjBcIixwYWNrZXRzU2VudDpcIjBcIixnb29nQWRhcHRhdGlvbkNoYW5nZXM6XCIwXCIsZ29vZ0F2Z0VuY29kZU1zOlwiMFwiLGdvb2dFbmNvZGVVc2FnZVBlcmNlbnQ6XCIwXCIsZ29vZ0ZpcnNSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVIZWlnaHRTZW50OlwiMFwiLGdvb2dGcmFtZUhlaWdodElucHV0OlwiMFwiLGdvb2dGcmFtZVJhdGVJbnB1dDpcIjBcIixnb29nRnJhbWVSYXRlU2VudDpcIjBcIixnb29nRnJhbWVXaWR0aFNlbnQ6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhJbnB1dDpcIjBcIixnb29nTmFja3NSZWNlaXZlZDpcIjBcIixnb29nUGxpc1JlY2VpdmVkOlwiMFwiLGdvb2dSdHQ6XCIwXCIsZ29vZ0ZyYW1lc0VuY29kZWQ6XCIwXCJ9LGQ9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGF1ZGlvT3V0cHV0TGV2ZWw6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzTG9zdDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0FjY2VsZXJhdGVSYXRlOlwiMFwiLGdvb2dDdXJyZW50RGVsYXlNczpcIjBcIixnb29nRGVjb2RpbmdDTkc6XCIwXCIsZ29vZ0RlY29kaW5nQ1ROOlwiMFwiLGdvb2dEZWNvZGluZ0NUU0c6XCIwXCIsZ29vZ0RlY29kaW5nTm9ybWFsOlwiMFwiLGdvb2dEZWNvZGluZ1BMQzpcIjBcIixnb29nRGVjb2RpbmdQTENDTkc6XCIwXCIsZ29vZ0V4cGFuZFJhdGU6XCIwXCIsZ29vZ0ppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dKaXR0ZXJSZWNlaXZlZDpcIjBcIixnb29nUHJlZW1wdGl2ZUV4cGFuZFJhdGU6XCIwXCIsZ29vZ1ByZWZlcnJlZEppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dTZWNvbmRhcnlEZWNvZGVkUmF0ZTpcIjBcIixnb29nU3BlZWNoRXhwYW5kUmF0ZTpcIjBcIn0sdT17aWQ6XCJcIix0eXBlOlwiXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ1RhcmdldERlbGF5TXM6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIsZ29vZ0RlY29kZU1zOlwiMFwiLGdvb2dNYXhEZWNvZGVNczpcIjBcIixnb29nUmVuZGVyRGVsYXlNczpcIjBcIixnb29nRnJhbWVXaWR0aFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZUhlaWdodFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZVJhdGVSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlRGVjb2RlZDpcIjBcIixnb29nRnJhbWVSYXRlT3V0cHV0OlwiMFwiLGdvb2dGcmFtZXNEZWNvZGVkOlwiMFwiLGdvb2dGcmFtZVJlY2VpdmVkOlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ01pblBsYXlvdXREZWxheU1zOlwiMFwiLGdvb2dOYWNrc1NlbnQ6XCIwXCIsZ29vZ1BsaXNTZW50OlwiMFwiLGdvb2dGaXJzU2VudDpcIjBcIixieXRlc1JlY2VpdmVkOlwiMFwiLHBhY2tldHNSZWNlaXZlZDpcIjBcIn0sbD17aWQ6XCJid2Vmb3J2aWRlb1wiLHR5cGU6XCJWaWRlb0J3ZVwiLGdvb2dBdmFpbGFibGVTZW5kQmFuZHdpZHRoOlwiMFwiLGdvb2dBdmFpbGFibGVSZWNlaXZlQmFuZHdpZHRoOlwiMFwiLGdvb2dBY3R1YWxFbmNCaXRyYXRlOlwiMFwiLGdvb2dSZXRyYW5zbWl0Qml0cmF0ZTpcIjBcIixnb29nVGFyZ2V0RW5jQml0cmF0ZTpcIjBcIixnb29nQnVja2V0RGVsYXk6XCIwXCIsZ29vZ1RyYW5zbWl0Qml0cmF0ZTpcIjBcIn0scD0wLGY9MCxtPTA7cmV0dXJuIHQuZ2V0VmlkZW9SZWxhdGVkU3RhdHM9ZnVuY3Rpb24obil7dC5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24oaSl7dmFyIGE9e3BlZXJJZDp0LnVpZCxtZWRpYVR5cGU6XCJ2aWRlb1wiLGlzVmlkZW9NdXRlOnQuaXNWaWRlb011dGV9O2kuZm9yRWFjaChmdW5jdGlvbihpKXtpZih0LmlzU3Vic2NyaWJlcil7aWYoXCJ0cmFja1wiPT09aS50eXBlJiYofmkuaWQuaW5kZXhPZihcInZpZGVvXCIpfHx+aS50cmFja0lkZW50aWZpZXIuaW5kZXhPZihcInZcIikpKXtpZighdC5sYXN0UmVwb3J0KXJldHVybiB2b2lkKHQubGFzdFJlcG9ydD1pKTthLmZyYW1lUmF0ZVJlY2VpdmVkPWkuZnJhbWVzUmVjZWl2ZWQtdC5sYXN0UmVwb3J0LmZyYW1lc1JlY2VpdmVkK1wiXCIsYS5mcmFtZVJhdGVEZWNvZGVkPWkuZnJhbWVzRGVjb2RlZC10Lmxhc3RSZXBvcnQuZnJhbWVzRGVjb2RlZCtcIlwiLHQubGFzdFJlcG9ydD1pfVwiaW5ib3VuZC1ydHBcIj09PWkudHlwZSYmfmkuaWQuaW5kZXhPZihcIlZpZGVvXCIpJiYoYS5ieXRlc1JlY2VpdmVkPWkuYnl0ZXNSZWNlaXZlZCtcIlwiLGEucGFja2V0c1JlY2VpdmVkPWkucGFja2V0c1JlY2VpdmVkK1wiXCIsYS5wYWNrZXRzTG9zdD1pLnBhY2tldHNMb3N0K1wiXCIpfWVsc2UgaWYoXCJvdXRib3VuZC1ydHBcIj09PWkudHlwZSYmfmkuaWQuaW5kZXhPZihcIlZpZGVvXCIpKXtpZighdC5sYXN0UmVwb3J0KXJldHVybiB2b2lkKHQubGFzdFJlcG9ydD1pKTtuJiZuKHttZWRpYVR5cGU6XCJ2aWRlb1wiLGlzVmlkZW9NdXRlOnQuaXNWaWRlb011dGUsZnJhbWVSYXRlSW5wdXQ6ZS5tYXhGcmFtZVJhdGUrXCJcIixmcmFtZVJhdGVTZW50OmkuZnJhbWVzRW5jb2RlZC10Lmxhc3RSZXBvcnQuZnJhbWVzRW5jb2RlZCtcIlwifSksdC5sYXN0UmVwb3J0PWl9fSksbiYmbihhKX0pfSx0LmdldEF1ZGlvUmVsYXRlZFN0YXRzPWZ1bmN0aW9uKGUpe3QucGVlckNvbm5lY3Rpb24uZ2V0U3RhdHMoKS50aGVuKGZ1bmN0aW9uKG4pe24uZm9yRWFjaChmdW5jdGlvbihuKXt0LmlzU3Vic2NyaWJlciYmXCJpbmJvdW5kLXJ0cFwiPT09bi50eXBlJiZ+bi5pZC5pbmRleE9mKFwiQXVkaW9cIikmJmUmJmUoe3BlZXJJZDp0LnVpZCxtZWRpYVR5cGU6XCJhdWRpb1wiLGlzQXVkaW9NdXRlOnQuaXNBdWRpb011dGUsZnJhbWVEcm9wcGVkOm4ucGFja2V0c0xvc3QrXCJcIixmcmFtZVJlY2VpdmVkOm4ucGFja2V0c1JlY2VpdmVkK1wiXCIsZ29vZ0ppdHRlclJlY2VpdmVkOm4uaml0dGVyK1wiXCIsYnl0ZXNSZWNlaXZlZDpuLmJ5dGVzUmVjZWl2ZWQrXCJcIixwYWNrZXRzUmVjZWl2ZWQ6bi5wYWNrZXRzUmVjZWl2ZWQrXCJcIixwYWNrZXRzTG9zdDpuLnBhY2tldHNMb3N0K1wiXCJ9KX0pfSl9LHQuZ2V0U3RhdHNSYXRlPWZ1bmN0aW9uKGUpe3QuZ2V0U3RhdHMoZnVuY3Rpb24odCl7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wib3V0Ym91bmQtcnRwXCI9PT1lLnR5cGUmJlwidmlkZW9cIj09PWUubWVkaWFUeXBlJiZlLmdvb2dGcmFtZXNFbmNvZGVkJiYoZS5nb29nRnJhbWVSYXRlU2VudD0oKGUuZ29vZ0ZyYW1lc0VuY29kZWQtcCkvMykudG9TdHJpbmcoKSxwPWUuZ29vZ0ZyYW1lc0VuY29kZWQpLFwiaW5ib3VuZC1ydHBcIj09PWUudHlwZSYmLTEhPWUuaWQuaW5kZXhPZihcIjU1NTQzXCIpJiYoZS5nb29nRnJhbWVSYXRlUmVjZWl2ZWQmJihlLmdvb2dGcmFtZVJhdGVSZWNlaXZlZD0oKGUuZ29vZ0ZyYW1lUmVjZWl2ZWQtbSkvMykudG9TdHJpbmcoKSxtPWUuZ29vZ0ZyYW1lUmVjZWl2ZWQpLGUuZ29vZ0ZyYW1lUmF0ZURlY29kZWQmJihlLmdvb2dGcmFtZVJhdGVEZWNvZGVkPSgoZS5nb29nRnJhbWVzRGVjb2RlZC1mKS8zKS50b1N0cmluZygpLGY9ZS5nb29nRnJhbWVzRGVjb2RlZCkpfSksZSh0KX0pfSx0LmdldFN0YXRzPWZ1bmN0aW9uKGUsbil7bj0obj1ufHw1MDApPjUwMD81MDA6bix0Lmxhc3RUaW1lR2V0U3RhdHMmJkRhdGUubm93KCktdC5sYXN0VGltZUdldFN0YXRzPG4/ZSYmZSh0LmZpbHRlclN0YXRzQ2FjaGUsdC5vcmlnaW5TdGF0c0NhY2hlKTp0aGlzLl9nZXRTdGF0cyhmdW5jdGlvbihuLGkpe3QuZmlsdGVyU3RhdHNDYWNoZT1uLHQub3JpZ2luU3RhdHNDYWNoZT1pLHQubGFzdFRpbWVHZXRTdGF0cz1EYXRlLm5vdygpLGUmJmUobixpKX0pfSx0Ll9nZXRTdGF0cz1mdW5jdGlvbihlKXt2YXIgbj1bXTt0LnBlZXJDb25uZWN0aW9uLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihpKXtpLmZvckVhY2goZnVuY3Rpb24oZSl7bi5wdXNoKGUpLFwib3V0Ym91bmQtcnRwXCI9PT1lLnR5cGUmJlwiYXVkaW9cIj09PWUubWVkaWFUeXBlJiYocy5pZD1lLmlkLHMudHlwZT1lLnR5cGUscy5tZWRpYVR5cGU9ZS5tZWRpYVR5cGUscy5ieXRlc1NlbnQ9ZS5ieXRlc1NlbnQ/ZS5ieXRlc1NlbnQrXCJcIjpcIjBcIixzLnBhY2tldHNTZW50PWUucGFja2V0c1NlbnQ/ZS5wYWNrZXRzU2VudCtcIlwiOlwiMFwiKSxcIm91dGJvdW5kLXJ0cFwiPT09ZS50eXBlJiZcInZpZGVvXCI9PT1lLm1lZGlhVHlwZSYmKGMuaWQ9ZS5pZCxjLnR5cGU9ZS50eXBlLGMubWVkaWFUeXBlPWUubWVkaWFUeXBlLGMuYnl0ZXNTZW50PWUuYnl0ZXNTZW50P2UuYnl0ZXNTZW50K1wiXCI6XCIwXCIsYy5wYWNrZXRzU2VudD1lLnBhY2tldHNTZW50P2UucGFja2V0c1NlbnQrXCJcIjpcIjBcIixjLmdvb2dQbGlzUmVjZWl2ZWQ9ZS5wbGlDb3VudD9lLnBsaUNvdW50K1wiXCI6XCIwXCIsYy5nb29nTmFja3NSZWNlaXZlZD1lLm5hY2tDb3VudD9lLm5hY2tDb3VudCtcIlwiOlwiMFwiLGMuZ29vZ0ZpcnNSZWNlaXZlZD1lLmZpckNvdW50P2UuZmlyQ291bnQrXCJcIjpcIjBcIixjLmdvb2dGcmFtZXNFbmNvZGVkPWUuZnJhbWVzRW5jb2RlZD9lLmZyYW1lc0VuY29kZWQrXCJcIjpcIjBcIiksXCJpbmJvdW5kLXJ0cFwiPT09ZS50eXBlJiYtMSE9ZS5pZC5pbmRleE9mKFwiNDQ0NDRcIikmJihkLmlkPWUuaWQsZC50eXBlPWUudHlwZSxkLm1lZGlhVHlwZT1cImF1ZGlvXCIsZC5wYWNrZXRzUmVjZWl2ZWQ9ZS5wYWNrZXRzUmVjZWl2ZWQ/ZS5wYWNrZXRzUmVjZWl2ZWQrXCJcIjpcIjBcIixkLmJ5dGVzUmVjZWl2ZWQ9ZS5ieXRlc1JlY2VpdmVkP2UuYnl0ZXNSZWNlaXZlZCtcIlwiOlwiMFwiLGQucGFja2V0c0xvc3Q9ZS5wYWNrZXRzTG9zdD9lLnBhY2tldHNMb3N0K1wiXCI6XCIwXCIsZC5wYWNrZXRzUmVjZWl2ZWQ9ZS5wYWNrZXRzUmVjZWl2ZWQ/ZS5wYWNrZXRzUmVjZWl2ZWQrXCJcIjpcIjBcIixkLmdvb2dKaXR0ZXJSZWNlaXZlZD1lLmppdHRlcj9lLmppdHRlcitcIlwiOlwiMFwiKSxcImluYm91bmQtcnRwXCI9PT1lLnR5cGUmJi0xIT1lLmlkLmluZGV4T2YoXCI1NTU0M1wiKSYmKHUuaWQ9ZS5pZCx1LnR5cGU9ZS50eXBlLHUubWVkaWFUeXBlPVwidmlkZW9cIix1LnBhY2tldHNSZWNlaXZlZD1lLnBhY2tldHNSZWNlaXZlZD9lLnBhY2tldHNSZWNlaXZlZCtcIlwiOlwiMFwiLHUuYnl0ZXNSZWNlaXZlZD1lLmJ5dGVzUmVjZWl2ZWQ/ZS5ieXRlc1JlY2VpdmVkK1wiXCI6XCIwXCIsdS5wYWNrZXRzTG9zdD1lLnBhY2tldHNMb3N0P2UucGFja2V0c0xvc3QrXCJcIjpcIjBcIix1Lmdvb2dKaXR0ZXJCdWZmZXJNcz1lLmppdHRlcj9lLmppdHRlcitcIlwiOlwiMFwiLHUuZ29vZ05hY2tzU2VudD1lLm5hY2tDb3VudD9lLm5hY2tDb3VudCtcIlwiOlwiMFwiLHUuZ29vZ1BsaXNTZW50PWUucGxpQ291bnQ/ZS5wbGlDb3VudCtcIlwiOlwiMFwiLHUuZ29vZ0ZpcnNTZW50PWUuZmlyQ291bnQ/ZS5maXJDb3VudCtcIlwiOlwiMFwiKSxcInRyYWNrXCIhPT1lLnR5cGV8fC0xPT1lLmlkLmluZGV4T2YoXCI1NTU0M1wiKSYmIX5lLnRyYWNrSWRlbnRpZmllci5pbmRleE9mKFwidlwiKSYmbnVsbCE9ZS5hdWRpb0xldmVsfHwodS5nb29nRnJhbWVXaWR0aFJlY2VpdmVkPWUuZnJhbWVXaWR0aD9lLmZyYW1lV2lkdGgrXCJcIjpcIjBcIix1Lmdvb2dGcmFtZUhlaWdodFJlY2VpdmVkPWUuZnJhbWVIZWlnaHQ/ZS5mcmFtZUhlaWdodCtcIlwiOlwiMFwiLHUuZ29vZ0ZyYW1lUmVjZWl2ZWQ9ZS5mcmFtZXNSZWNlaXZlZD9lLmZyYW1lc1JlY2VpdmVkK1wiXCI6XCIwXCIsdS5nb29nRnJhbWVzRGVjb2RlZD1lLmZyYW1lc0RlY29kZWQ/ZS5mcmFtZXNEZWNvZGVkK1wiXCI6XCIwXCIpLFwidHJhY2tcIiE9PWUudHlwZXx8LTE9PWUuaWQuaW5kZXhPZihcIjQ0NDQ0XCIpJiYhfmUudHJhY2tJZGVudGlmaWVyLmluZGV4T2YoXCJhXCIpJiZ2b2lkIDA9PT1lLmF1ZGlvTGV2ZWx8fChkLmF1ZGlvT3V0cHV0TGV2ZWw9ZS5hdWRpb0xldmVsK1wiXCIscy5hdWRpb0lucHV0TGV2ZWw9ZS5hdWRpb0xldmVsK1wiXCIpLFwiY2FuZGlkYXRlLXBhaXJcIj09PWUudHlwZSYmKDA9PWUuYXZhaWxhYmxlSW5jb21pbmdCaXRyYXRlP2wuZ29vZ0F2YWlsYWJsZVNlbmRCYW5kd2lkdGg9ZS5hdmFpbGFibGVPdXRnb2luZ0JpdHJhdGUrXCJcIjpsLmdvb2dBdmFpbGFibGVSZWNlaXZlQmFuZHdpZHRoPWUuYXZhaWxhYmxlSW5jb21pbmdCaXRyYXRlK1wiXCIpfSk7dmFyIGE9W2wscyxjLGQsdV07YS5wdXNoKHtpZDpcInRpbWVcIixzdGFydFRpbWU6dC5jb25uZWN0ZWRUaW1lLHRpbWVzdGFtcDpuZXcgRGF0ZX0pLGUoYSxuKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2NvbnNvbGUuZXJyb3IoZSl9KX0sdC5hZGRUcmFjaz1mdW5jdGlvbihlLG4pe3QucGVlckNvbm5lY3Rpb24uYWRkVHJhY2soZSxuKX0sdC5yZW1vdmVUcmFjaz1mdW5jdGlvbihlLG4pe3ZhciBpPXQucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycygpLmZpbmQoZnVuY3Rpb24odCl7cmV0dXJuIHQudHJhY2s9PWV9KTtpLnJlcGxhY2VUcmFjayhudWxsKSx0LnBlZXJDb25uZWN0aW9uLnJlbW92ZVRyYWNrKGkpfSx0LmFkZFN0cmVhbT1mdW5jdGlvbihlKXt3aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiU2FmYXJpXCIpPi0xJiYtMT09PW5hdmlnYXRvci51c2VyQWdlbnQuaW5kZXhPZihcIkNocm9tZVwiKT9lLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24obil7cmV0dXJuIHQucGVlckNvbm5lY3Rpb24uYWRkVHJhY2sobixlKX0pOnQucGVlckNvbm5lY3Rpb24uYWRkU3RyZWFtKGUpLHQubWFya0FjdGlvbk5lZWRlZCgpfSx0LnJlbW92ZVN0cmVhbT1mdW5jdGlvbigpe3QubWFya0FjdGlvbk5lZWRlZCgpfSx0LmNsb3NlPWZ1bmN0aW9uKCl7dC5zdGF0ZT1cImNsb3NlZFwiLHQucGVlckNvbm5lY3Rpb24uY2xvc2UoKX0sdC5tYXJrQWN0aW9uTmVlZGVkPWZ1bmN0aW9uKCl7dC5hY3Rpb25OZWVkZWQ9ITAsdC5kb0xhdGVyKGZ1bmN0aW9uKCl7dC5vbnN0YWJsZXN0YXRlKCl9KX0sdC5kb0xhdGVyPWZ1bmN0aW9uKGUpe3dpbmRvdy5zZXRUaW1lb3V0KGUsMSl9LHQub25zdGFibGVzdGF0ZT1mdW5jdGlvbigpe3ZhciBuO2lmKHQuYWN0aW9uTmVlZGVkKXtpZihcIm5ld1wiPT09dC5zdGF0ZXx8XCJlc3RhYmxpc2hlZFwiPT09dC5zdGF0ZSllLmlzU3Vic2NyaWJlciYmKHQucGVlckNvbm5lY3Rpb24uYWRkVHJhbnNjZWl2ZXIoXCJhdWRpb1wiLHtkaXJlY3Rpb246XCJyZWN2b25seVwifSksdC5wZWVyQ29ubmVjdGlvbi5hZGRUcmFuc2NlaXZlcihcInZpZGVvXCIse2RpcmVjdGlvbjpcInJlY3Zvbmx5XCJ9KSksdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcih0Lm1lZGlhQ29uc3RyYWludHMpLnRoZW4oZnVuY3Rpb24obil7aWYobi5zZHA9YShuLnNkcCksZS5pc1N1YnNjcmliZXJ8fChuLnNkcD1uLnNkcC5yZXBsYWNlKC9hPWV4dG1hcDo0IHVybjozZ3BwOnZpZGVvLW9yaWVudGF0aW9uXFxyXFxuL2csXCJcIikpLG4uc2RwIT09dC5wcmV2T2ZmZXIpcmV0dXJuIHQucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihuKSx0LnN0YXRlPVwicHJlcGFyaW5nLW9mZmVyXCIsdm9pZCB0Lm1hcmtBY3Rpb25OZWVkZWQoKTtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1Ob3Qgc2VuZGluZyBhIG5ldyBvZmZlclwiKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXBlZXIgY29ubmVjdGlvbiBjcmVhdGUgb2ZmZXIgZmFpbGVkIFwiLGUpfSk7ZWxzZSBpZihcInByZXBhcmluZy1vZmZlclwiPT09dC5zdGF0ZSl7aWYodC5tb3JlSWNlQ29taW5nKXJldHVybjt0LnByZXZPZmZlcj10LnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24uc2RwLHQub2ZmZXJDYW5kaWRhdGVzPXQucHJldk9mZmVyLm1hdGNoKC9hPWNhbmRpZGF0ZS4rXFxyXFxuL2cpfHxbXSx0Lm9mZmVyQ2FuZGlkYXRlcy5sZW5ndGh8fChvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl1ObyBJY2UgQ2FuZGlkYXRlIGdlbmVyYXRlZFwiKSksT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlNISU1fQ0FORElEQVRFXCIpPyhvLmRlZmF1bHQuZGVidWcoXCJTaGltbWluZyBmYWtlIGNhbmRpZGF0ZVwiKSx0LnByZXZPZmZlcis9XCJhPWNhbmRpZGF0ZToyMjQzMjU1NDM1IDEgdWRwIDIxMjIxOTQ2ODcgMTkyLjE2OC4wLjEgMzAwMDAgdHlwIGhvc3QgZ2VuZXJhdGlvbiAwIG5ldHdvcmstaWQgMVxcclxcblwiKTpvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdTm9uZSBJY2UgQ2FuZGlkYXRlIG5vdCBhbGxvd2VkXCIpKSksdC5wcmV2T2ZmZXI9dC5wcmV2T2ZmZXIucmVwbGFjZSgvYT1jYW5kaWRhdGU6Lit0eXBcXHNob3N0LitcXHJcXG4vZyxcImE9Y2FuZGlkYXRlOjIyNDMyNTU0MzUgMSB1ZHAgMjEyMjE5NDY4NyAxOTIuMTY4LjAuMSAzMDAwMCB0eXAgaG9zdCBnZW5lcmF0aW9uIDAgbmV0d29yay1pZCAxXFxyXFxuXCIpLHQuc2VuZE1lc3NhZ2UoXCJPRkZFUlwiLHQucHJldk9mZmVyKSx0LnN0YXRlPVwib2ZmZXItc2VudFwifWVsc2UgaWYoXCJvZmZlci1yZWNlaXZlZFwiPT09dC5zdGF0ZSl0LnBlZXJDb25uZWN0aW9uLmNyZWF0ZUFuc3dlcihmdW5jdGlvbihlKXtpZih0LnBlZXJDb25uZWN0aW9uLnNldExvY2FsRGVzY3JpcHRpb24oZSksdC5zdGF0ZT1cIm9mZmVyLXJlY2VpdmVkLXByZXBhcmluZy1hbnN3ZXJcIix0LmljZVN0YXJ0ZWQpdC5tYXJrQWN0aW9uTmVlZGVkKCk7ZWxzZXt2YXIgbj1uZXcgRGF0ZTtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1cIituLmdldFRpbWUoKStcIjogU3RhcnRpbmcgSUNFIGluIHJlc3BvbmRlclwiKSx0LmljZVN0YXJ0ZWQ9ITB9fSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1wZWVyIGNvbm5lY3Rpb24gY3JlYXRlIGFuc3dlciBmYWlsZWQgXCIsZSl9LHQubWVkaWFDb25zdHJhaW50cyk7ZWxzZSBpZihcIm9mZmVyLXJlY2VpdmVkLXByZXBhcmluZy1hbnN3ZXJcIj09PXQuc3RhdGUpe2lmKHQubW9yZUljZUNvbWluZylyZXR1cm47bj10LnBlZXJDb25uZWN0aW9uLmxvY2FsRGVzY3JpcHRpb24uc2RwLHQuc2VuZE1lc3NhZ2UoXCJBTlNXRVJcIixuKSx0LnN0YXRlPVwiZXN0YWJsaXNoZWRcIn1lbHNlIHQuZXJyb3IoXCJEYXplZCBhbmQgY29uZnVzZWQgaW4gc3RhdGUgXCIrdC5zdGF0ZStcIiwgc3RvcHBpbmcgaGVyZVwiKTt0LmFjdGlvbk5lZWRlZD0hMX19LHQuc2VuZE1lc3NhZ2U9ZnVuY3Rpb24oZSxuKXt2YXIgaT17fTtpLm1lc3NhZ2VUeXBlPWUsaS5zZHA9bixcIk9GRkVSXCI9PT1lPyhpLm9mZmVyZXJTZXNzaW9uSWQ9dC5zZXNzaW9uSWQsaS5hbnN3ZXJlclNlc3Npb25JZD10Lm90aGVyU2Vzc2lvbklkLGkuc2VxPXQuc2VxdWVuY2VOdW1iZXIrPTEsaS50aWVicmVha2VyPU1hdGguZmxvb3IoNDI5NDk2NzIzKk1hdGgucmFuZG9tKCkrMSkpOihpLm9mZmVyZXJTZXNzaW9uSWQ9dC5pbmNvbWluZ01lc3NhZ2Uub2ZmZXJlclNlc3Npb25JZCxpLmFuc3dlcmVyU2Vzc2lvbklkPXQuc2Vzc2lvbklkLGkuc2VxPXQuaW5jb21pbmdNZXNzYWdlLnNlcSksdC5vbnNpZ25hbGluZ21lc3NhZ2UoSlNPTi5zdHJpbmdpZnkoaSkpfSx0Ll9nZXRTZW5kZXI9ZnVuY3Rpb24oZSl7aWYodC5wZWVyQ29ubmVjdGlvbiYmdC5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKXt2YXIgbj10LnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKS5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiB0LnRyYWNrLmtpbmQ9PWV9KTtpZihuKXJldHVybiBufXJldHVybiBudWxsfSx0Lmhhc1NlbmRlcj1mdW5jdGlvbihlKXtyZXR1cm4hIXQuX2dldFNlbmRlcihlKX0sdC5yZXBsYWNlVHJhY2s9ZnVuY3Rpb24oZSxuLGkpe3ZhciBhPXQuX2dldFNlbmRlcihlLmtpbmQpO2lmKCFhKXJldHVybiBpKFwiTk9fU0VOREVSX0ZPVU5EXCIpO3RyeXthLnJlcGxhY2VUcmFjayhlKX1jYXRjaChlKXtyZXR1cm4gaSYmaShlKX1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7cmV0dXJuIG4mJm4oKX0sNTApfSx0LmVycm9yPWZ1bmN0aW9uKGUpe3Rocm93XCJFcnJvciBpbiBSb2FwT25Kc2VwOiBcIitlfSx0LnNlc3Npb25JZD10LnJvYXBTZXNzaW9uSWQrPTEsdC5zZXF1ZW5jZU51bWJlcj0wLHQuYWN0aW9uTmVlZGVkPSExLHQuaWNlU3RhcnRlZD0hMSx0Lm1vcmVJY2VDb21pbmc9ITAsdC5pY2VDYW5kaWRhdGVDb3VudD0wLHQub25zaWduYWxpbmdtZXNzYWdlPWUuY2FsbGJhY2ssdC5wZWVyQ29ubmVjdGlvbi5vbnRyYWNrPWZ1bmN0aW9uKGUpe2NvbnNvbGUubG9nKFwiISEhIG9udHJhY2ssIFwiLGUudHJhY2sua2luZCxlLnRyYWNrKSx0Lm9uYWRkc3RyZWFtJiZ0Lm9uYWRkc3RyZWFtKGUsXCJvbnRyYWNrXCIpfSx0LnBlZXJDb25uZWN0aW9uLm9ucmVtb3Zlc3RyZWFtPWZ1bmN0aW9uKGUpe3Qub25yZW1vdmVzdHJlYW0mJnQub25yZW1vdmVzdHJlYW0oZSl9LHQucGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSl7XCJjb25uZWN0ZWRcIj09PWUuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUmJih0LmNvbm5lY3RlZFRpbWU9bmV3IERhdGUpLHQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UmJnQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoZS5jdXJyZW50VGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZSl9LHQucmVuZWdvdGlhdGU9ZnVuY3Rpb24oKXt2b2lkIDAhPT10LnByZXZPZmZlciYmdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVPZmZlcigpLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIGUuc2RwPWUuc2RwLnJlcGxhY2UoL2E9cmVjdm9ubHlcXHJcXG4vZyxcImE9aW5hY3RpdmVcXHJcXG5cIiksZS5zZHA9aShlLnNkcCksZS5zZHA9YShlLnNkcCksdC5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGUpfSkudGhlbihmdW5jdGlvbigpe3Qub25uZWdvdGlhdGlvbm5lZWRlZCYmdC5vbm5lZ290aWF0aW9ubmVlZGVkKHQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHApfSkuY2F0Y2goZnVuY3Rpb24oZSl7Y29uc29sZS5sb2coXCJjcmVhdGVPZmZlciBlcnJvcjogXCIsZSl9KX0sdC5wZWVyQ29ubmVjdGlvbi5vbm5lZ290aWF0aW9ubmVlZGVkPXQucmVuZWdvdGlhdGUsdC5vbmFkZHN0cmVhbT1udWxsLHQub25yZW1vdmVzdHJlYW09bnVsbCx0LnN0YXRlPVwibmV3XCIsdC5tYXJrQWN0aW9uTmVlZGVkKCksdH0sSD1mdW5jdGlvbihlKXt2YXIgdD17fSxuPShtb3pSVENQZWVyQ29ubmVjdGlvbixtb3pSVENTZXNzaW9uRGVzY3JpcHRpb24pLGk9ITE7dC51aWQ9ZS51aWQsdC5pc1ZpZGVvTXV0ZT1lLmlzVmlkZW9NdXRlLHQuaXNBdWRpb011dGU9ZS5pc0F1ZGlvTXV0ZSx0LmlzU3Vic2NyaWJlcj1lLmlzU3Vic2NyaWJlcix0LmNsaWVudElkPWUuY2xpZW50SWQsdC5maWx0ZXJTdGF0c0NhY2hlPVtdLHQub3JpZ2luU3RhdHNDYWNoZT1bXSx0Lmxhc3RUaW1lR2V0U3RhdHM9bnVsbCx0LnBjX2NvbmZpZz17aWNlU2VydmVyczpbXX0sZS5pY2VTZXJ2ZXJzIGluc3RhbmNlb2YgQXJyYXk/ZS5pY2VTZXJ2ZXJzLm1hcChmdW5jdGlvbihlKXswPT09ZS51cmwuaW5kZXhPZihcInN0dW46XCIpJiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VybDplLnVybH0pfSk6KGUuc3R1blNlcnZlclVybCYmKGUuc3R1blNlcnZlclVybCBpbnN0YW5jZW9mIEFycmF5P2Uuc3R1blNlcnZlclVybC5tYXAoZnVuY3Rpb24oZSl7XCJzdHJpbmdcIj09dHlwZW9mIGUmJlwiXCIhPT1lJiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VybDplfSl9KTpcInN0cmluZ1wiPT10eXBlb2YgZS5zdHVuU2VydmVyVXJsJiZcIlwiIT09ZS5zdHVuU2VydmVyVXJsJiZ0LnBjX2NvbmZpZy5pY2VTZXJ2ZXJzLnB1c2goe3VybDplLnN0dW5TZXJ2ZXJVcmx9KSksZS50dXJuU2VydmVyJiZcInN0cmluZ1wiPT10eXBlb2YgZS50dXJuU2VydmVyLnVybCYmXCJcIiE9PWUudHVyblNlcnZlci51cmwmJihlLnR1cm5TZXJ2ZXIudWRwcG9ydCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1c2VybmFtZTplLnR1cm5TZXJ2ZXIudXNlcm5hbWUsY3JlZGVudGlhbDplLnR1cm5TZXJ2ZXIuY3JlZGVudGlhbCxjcmVkZW50aWFsVHlwZTpcInBhc3N3b3JkXCIsdXJsczpcInR1cm46XCIrZS50dXJuU2VydmVyLnVybCtcIjpcIitlLnR1cm5TZXJ2ZXIudWRwcG9ydCtcIj90cmFuc3BvcnQ9dWRwXCJ9KSxcInN0cmluZ1wiPT10eXBlb2YgZS50dXJuU2VydmVyLnRjcHBvcnQmJlwiXCIhPT1lLnR1cm5TZXJ2ZXIudGNwcG9ydCYmdC5wY19jb25maWcuaWNlU2VydmVycy5wdXNoKHt1c2VybmFtZTplLnR1cm5TZXJ2ZXIudXNlcm5hbWUsY3JlZGVudGlhbDplLnR1cm5TZXJ2ZXIuY3JlZGVudGlhbCxjcmVkZW50aWFsVHlwZTpcInBhc3N3b3JkXCIsdXJsczpcInR1cm46XCIrZS50dXJuU2VydmVyLnVybCtcIjpcIitlLnR1cm5TZXJ2ZXIudGNwcG9ydCtcIj90cmFuc3BvcnQ9dGNwXCJ9KSwhMD09PWUudHVyblNlcnZlci5mb3JjZXR1cm4mJih0LnBjX2NvbmZpZy5pY2VUcmFuc3BvcnRQb2xpY3k9XCJyZWxheVwiKSkpLHZvaWQgMD09PWUuYXVkaW8mJihlLmF1ZGlvPSEwKSx2b2lkIDA9PT1lLnZpZGVvJiYoZS52aWRlbz0hMCksdC5tZWRpYUNvbnN0cmFpbnRzPXtvZmZlclRvUmVjZWl2ZUF1ZGlvOmUuYXVkaW8sb2ZmZXJUb1JlY2VpdmVWaWRlbzplLnZpZGVvLG1vekRvbnRPZmZlckRhdGFDaGFubmVsOiEwfSx0LnJvYXBTZXNzaW9uSWQ9MTAzLHQucGVlckNvbm5lY3Rpb249bmV3IEUuUlRDUGVlckNvbm5lY3Rpb24odC5wY19jb25maWcpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkKyddc2FmYXJpIENyZWF0ZWQgUlRDUGVlckNvbm5uZWN0aW9uIHdpdGggY29uZmlnIFwiJytKU09OLnN0cmluZ2lmeSh0LnBjX2NvbmZpZykrJ1wiLicpLHQuaWNlQ2FuZGlkYXRlVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3QuaWNlQ2FuZGlkYXRlVGltZXI9bnVsbCxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdQ2FuZGlkYXRlcyBjb2xsZWN0ZWQ6IFwiKS5jb25jYXQodC5pY2VDYW5kaWRhdGVDb3VudCkpLHQubW9yZUljZUNvbWluZyYmKHQubW9yZUljZUNvbWluZz0hMSx0Lm1hcmtBY3Rpb25OZWVkZWQoKSl9LE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJDQU5ESURBVEVfVElNRU9VVFwiKSksdC5wZWVyQ29ubmVjdGlvbi5vbmljZWNhbmRpZGF0ZT1mdW5jdGlvbihlKXt2YXIgbixpLGEscjtpPShuPXQucGVlckNvbm5lY3Rpb24ubG9jYWxEZXNjcmlwdGlvbi5zZHApLm1hdGNoKC9hPWNhbmRpZGF0ZTouK3R5cFxcc3NyZmx4LitcXHJcXG4vKSxhPW4ubWF0Y2goL2E9Y2FuZGlkYXRlOi4rdHlwXFxzaG9zdC4rXFxyXFxuLykscj1uLm1hdGNoKC9hPWNhbmRpZGF0ZTouK3R5cFxcc3JlbGF5LitcXHJcXG4vKSxudWxsPT09aSYmbnVsbD09PWEmJm51bGw9PT1yfHx2b2lkIDAhPT10LmljZXx8IXQuaWNlQ2FuZGlkYXRlVGltZXJ8fChvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1zcmZseCBjYW5kaWRhdGUgOiBcIitpK1wiIHJlbGF5IGNhbmRpZGF0ZTogXCIrcitcIiBob3N0IGNhbmRpZGF0ZSA6IFwiK2EpLGNsZWFyVGltZW91dCh0LmljZUNhbmRpZGF0ZVRpbWVyKSx0LmljZUNhbmRpZGF0ZVRpbWVyPW51bGwsdC5pY2U9MCx0Lm1vcmVJY2VDb21pbmc9ITEsdC5tYXJrQWN0aW9uTmVlZGVkKCkpLHQuaWNlQ2FuZGlkYXRlQ291bnQ9dC5pY2VDYW5kaWRhdGVDb3VudCsxfSx0LmNoZWNrTUxpbmVSZXZlcnNlSW5TRFA9ZnVuY3Rpb24oZSl7cmV0dXJuISghfmUuaW5kZXhPZihcIm09YXVkaW9cIil8fCF+ZS5pbmRleE9mKFwibT12aWRlb1wiKSkmJmUuaW5kZXhPZihcIm09YXVkaW9cIik+ZS5pbmRleE9mKFwibT12aWRlb1wiKX0sdC5yZXZlcnNlTUxpbmVJblNEUD1mdW5jdGlvbihlKXt2YXIgdD1lLnNwbGl0KFwibT1hdWRpb1wiKSxuPXRbMV0uc3BsaXQoXCJtPXZpZGVvXCIpLGk9XCJtPXZpZGVvXCIrblsxXSxhPVwibT1hdWRpb1wiK25bMF07cmV0dXJuIGU9dFswXStpK2F9LHQucHJvY2Vzc1NpZ25hbGluZ01lc3NhZ2U9ZnVuY3Rpb24oZSl7dmFyIGksYT1KU09OLnBhcnNlKGUpO3QuaW5jb21pbmdNZXNzYWdlPWEsXCJuZXdcIj09PXQuc3RhdGU/XCJPRkZFUlwiPT09YS5tZXNzYWdlVHlwZT8oYS5zZHA9bChhLnNkcCksaT17c2RwOmEuc2RwLHR5cGU6XCJvZmZlclwifSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBuKGkpLGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdc2V0UmVtb3RlRGVzY3JpcHRpb24gc3VjY2VlZGVkXCIpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIit0LmNsaWVudElkK1wiXXNldFJlbW90ZURlc2NyaXB0aW9uIGZhaWxlZDogXCIrZS5uYW1lKX0pLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZFwiLHQubWFya0FjdGlvbk5lZWRlZCgpKTp0LmVycm9yKFwiSWxsZWdhbCBtZXNzYWdlIGZvciB0aGlzIHN0YXRlOiBcIithLm1lc3NhZ2VUeXBlK1wiIGluIHN0YXRlIFwiK3Quc3RhdGUpOlwib2ZmZXItc2VudFwiPT09dC5zdGF0ZT9cIkFOU1dFUlwiPT09YS5tZXNzYWdlVHlwZT8oYS5zZHA9bChhLnNkcCksYS5zZHA9YS5zZHAucmVwbGFjZSgvIGdlbmVyYXRpb24gMC9nLFwiXCIpLGEuc2RwPWEuc2RwLnJlcGxhY2UoLyB1ZHAgL2csXCIgVURQIFwiKSwtMSE9PWEuc2RwLmluZGV4T2YoXCJhPWdyb3VwOkJVTkRMRVwiKT8oYS5zZHA9YS5zZHAucmVwbGFjZSgvYT1ncm91cDpCVU5ETEUgYXVkaW8gdmlkZW8vLFwiYT1ncm91cDpCVU5ETEUgc2RwYXJ0YV8wIHNkcGFydGFfMVwiKSxhLnNkcD1hLnNkcC5yZXBsYWNlKC9hPW1pZDphdWRpby8sXCJhPW1pZDpzZHBhcnRhXzBcIiksYS5zZHA9YS5zZHAucmVwbGFjZSgvYT1taWQ6dmlkZW8vLFwiYT1taWQ6c2RwYXJ0YV8xXCIpKTooYS5zZHA9YS5zZHAucmVwbGFjZSgvYT1taWQ6YXVkaW8vLFwiYT1taWQ6c2RwYXJ0YV8wXCIpLGEuc2RwPWEuc2RwLnJlcGxhY2UoL2E9bWlkOnZpZGVvLyxcImE9bWlkOnNkcGFydGFfMFwiKSksaT17c2RwOmEuc2RwLHR5cGU6XCJhbnN3ZXJcIn0sdC5wZWVyQ29ubmVjdGlvbi5zZXRSZW1vdGVEZXNjcmlwdGlvbihuZXcgbihpKSxmdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LmNsaWVudElkK1wiXXNldFJlbW90ZURlc2NyaXB0aW9uIHN1Y2NlZWRlZFwiKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIrdC5jbGllbnRJZCtcIl1zZXRSZW1vdGVEZXNjcmlwdGlvbiBmYWlsZWQ6IFwiK2UpfSksdC5zdGF0ZT1cImVzdGFibGlzaGVkXCIpOlwicHItYW5zd2VyXCI9PT1hLm1lc3NhZ2VUeXBlPyhpPXtzZHA6YS5zZHAsdHlwZTpcInByLWFuc3dlclwifSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBuKGkpLGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdc2V0UmVtb3RlRGVzY3JpcHRpb24gc3VjY2VlZGVkXCIpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIit0LmNsaWVudElkK1wiXXNldFJlbW90ZURlc2NyaXB0aW9uIGZhaWxlZDogXCIrZS5uYW1lKX0pKTpcIm9mZmVyXCI9PT1hLm1lc3NhZ2VUeXBlP3QuZXJyb3IoXCJOb3Qgd3JpdHRlbiB5ZXRcIik6dC5lcnJvcihcIklsbGVnYWwgbWVzc2FnZSBmb3IgdGhpcyBzdGF0ZTogXCIrYS5tZXNzYWdlVHlwZStcIiBpbiBzdGF0ZSBcIit0LnN0YXRlKTpcImVzdGFibGlzaGVkXCI9PT10LnN0YXRlJiYoXCJPRkZFUlwiPT09YS5tZXNzYWdlVHlwZT8oaT17c2RwOmEuc2RwLHR5cGU6XCJvZmZlclwifSx0LnBlZXJDb25uZWN0aW9uLnNldFJlbW90ZURlc2NyaXB0aW9uKG5ldyBuKGkpLGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdc2V0UmVtb3RlRGVzY3JpcHRpb24gc3VjY2VlZGVkXCIpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIit0LmNsaWVudElkK1wiXXNldFJlbW90ZURlc2NyaXB0aW9uIGZhaWxlZDogXCIrZS5uYW1lKX0pLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZFwiLHQubWFya0FjdGlvbk5lZWRlZCgpKTp0LmVycm9yKFwiSWxsZWdhbCBtZXNzYWdlIGZvciB0aGlzIHN0YXRlOiBcIithLm1lc3NhZ2VUeXBlK1wiIGluIHN0YXRlIFwiK3Quc3RhdGUpKX07dmFyIGE9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIm9wdXNcIixnb29nQ29kZWNOYW1lOlwib3B1c1wiLGFlY0RpdmVyZ2VudEZpbHRlckZyYWN0aW9uOlwiMFwiLGF1ZGlvSW5wdXRMZXZlbDpcIjBcIixieXRlc1NlbnQ6XCIwXCIscGFja2V0c1NlbnQ6XCIwXCIsZ29vZ0VjaG9DYW5jZWxsYXRpb25SZXR1cm5Mb3NzOlwiMFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zc0VuaGFuY2VtZW50OlwiMFwifSxzPXtpZDpcIlwiLHR5cGU6XCJcIixtZWRpYVR5cGU6XCJcIixnb29nQ29kZWNOYW1lOlwiaDI2NFwiPT09ZS5jb2RlYz9cIkgyNjRcIjpcIlZQOFwiLGJ5dGVzU2VudDpcIjBcIixwYWNrZXRzTG9zdDpcIjBcIixwYWNrZXRzU2VudDpcIjBcIixnb29nQWRhcHRhdGlvbkNoYW5nZXM6XCIwXCIsZ29vZ0F2Z0VuY29kZU1zOlwiMFwiLGdvb2dFbmNvZGVVc2FnZVBlcmNlbnQ6XCIwXCIsZ29vZ0ZpcnNSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVIZWlnaHRTZW50OlwiMFwiLGdvb2dGcmFtZUhlaWdodElucHV0OlwiMFwiLGdvb2dGcmFtZVJhdGVJbnB1dDpcIjBcIixnb29nRnJhbWVSYXRlU2VudDpcIjBcIixnb29nRnJhbWVXaWR0aFNlbnQ6XCIwXCIsZ29vZ0ZyYW1lV2lkdGhJbnB1dDpcIjBcIixnb29nTmFja3NSZWNlaXZlZDpcIjBcIixnb29nUGxpc1JlY2VpdmVkOlwiMFwiLGdvb2dSdHQ6XCIwXCJ9LGM9e2lkOlwiXCIsdHlwZTpcIlwiLG1lZGlhVHlwZTpcIlwiLGF1ZGlvT3V0cHV0TGV2ZWw6XCIwXCIsYnl0ZXNSZWNlaXZlZDpcIjBcIixwYWNrZXRzTG9zdDpcIjBcIixwYWNrZXRzUmVjZWl2ZWQ6XCIwXCIsZ29vZ0FjY2VsZXJhdGVSYXRlOlwiMFwiLGdvb2dDdXJyZW50RGVsYXlNczpcIjBcIixnb29nRGVjb2RpbmdDTkc6XCIwXCIsZ29vZ0RlY29kaW5nQ1ROOlwiMFwiLGdvb2dEZWNvZGluZ0NUU0c6XCIwXCIsZ29vZ0RlY29kaW5nTm9ybWFsOlwiMFwiLGdvb2dEZWNvZGluZ1BMQzpcIjBcIixnb29nRGVjb2RpbmdQTENDTkc6XCIwXCIsZ29vZ0V4cGFuZFJhdGU6XCIwXCIsZ29vZ0ppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dKaXR0ZXJSZWNlaXZlZDpcIjBcIixnb29nUHJlZW1wdGl2ZUV4cGFuZFJhdGU6XCIwXCIsZ29vZ1ByZWZlcnJlZEppdHRlckJ1ZmZlck1zOlwiMFwiLGdvb2dTZWNvbmRhcnlEZWNvZGVkUmF0ZTpcIjBcIixnb29nU3BlZWNoRXhwYW5kUmF0ZTpcIjBcIn0sZD17aWQ6XCJcIix0eXBlOlwiXCIsbWVkaWFUeXBlOlwiXCIsZ29vZ1RhcmdldERlbGF5TXM6XCIwXCIscGFja2V0c0xvc3Q6XCIwXCIsZ29vZ0RlY29kZU1zOlwiMFwiLGdvb2dNYXhEZWNvZGVNczpcIjBcIixnb29nUmVuZGVyRGVsYXlNczpcIjBcIixnb29nRnJhbWVXaWR0aFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZUhlaWdodFJlY2VpdmVkOlwiMFwiLGdvb2dGcmFtZVJhdGVSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVSYXRlRGVjb2RlZDpcIjBcIixnb29nRnJhbWVSYXRlT3V0cHV0OlwiMFwiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIjBcIixnb29nQ3VycmVudERlbGF5TXM6XCIwXCIsZ29vZ01pblBsYXlvdXREZWxheU1zOlwiMFwiLGdvb2dOYWNrc1NlbnQ6XCIwXCIsZ29vZ1BsaXNTZW50OlwiMFwiLGdvb2dGaXJzU2VudDpcIjBcIixieXRlc1JlY2VpdmVkOlwiMFwiLHBhY2tldHNSZWNlaXZlZDpcIjBcIixnb29nRnJhbWVzRGVjb2RlZDpcIjBcIn0sdT0wO3QuZ2V0VmlkZW9SZWxhdGVkU3RhdHM9ZnVuY3Rpb24oZSl7dC5wZWVyQ29ubmVjdGlvbi5nZXRTdGF0cygpLnRoZW4oZnVuY3Rpb24obil7dmFyIGk9ITAsYT0hMSxyPXZvaWQgMDt0cnl7Zm9yKHZhciBvLHM9bi52YWx1ZXMoKVtTeW1ib2wuaXRlcmF0b3JdKCk7IShpPShvPXMubmV4dCgpKS5kb25lKTtpPSEwKXt2YXIgYz1vLnZhbHVlO2lmKHQuaXNTdWJzY3JpYmVyKXtpZigoXCJpbmJvdW5kLXJ0cFwiPT09Yy50eXBlfHxcImluYm91bmRydHBcIj09PWMudHlwZSkmJlwidmlkZW9cIj09PWMubWVkaWFUeXBlKXtpZighdC5sYXN0UmVwb3J0KXJldHVybiB2b2lkKHQubGFzdFJlcG9ydD1jKTtlJiZlKHticm93c2VyOlwiZmlyZWZveFwiLG1lZGlhVHlwZTpcInZpZGVvXCIscGVlcklkOnQudWlkLGlzVmlkZW9NdXRlOnQuaXNWaWRlb011dGUsZnJhbWVSYXRlUmVjZWl2ZWQ6Yy5mcmFtZXJhdGVNZWFuK1wiXCIsZnJhbWVSYXRlRGVjb2RlZDpjLmZyYW1lc0RlY29kZWQtdC5sYXN0UmVwb3J0LmZyYW1lc0RlY29kZWQrXCJcIixieXRlc1JlY2VpdmVkOmMuYnl0ZXNSZWNlaXZlZCtcIlwiLHBhY2tldHNSZWNlaXZlZDpjLnBhY2tldHNSZWNlaXZlZCtcIlwiLHBhY2tldHNMb3N0OmMucGFja2V0c0xvc3QrXCJcIn0pLHQubGFzdFJlcG9ydD1jfX1lbHNlIGlmKChcIm91dGJvdW5kLXJ0cFwiPT09Yy50eXBlfHxcIm91dGJvdW5kcnRwXCI9PT1jLnR5cGUpJiZcInZpZGVvXCI9PT1jLm1lZGlhVHlwZSl7aWYoIXQubGFzdFJlcG9ydClyZXR1cm4gdm9pZCh0Lmxhc3RSZXBvcnQ9Yyk7ZSYmZSh7bWVkaWFUeXBlOlwidmlkZW9cIixpc1ZpZGVvTXV0ZTp0LmlzVmlkZW9NdXRlLGZyYW1lUmF0ZUlucHV0OmMuZnJhbWVyYXRlTWVhbitcIlwiLGZyYW1lUmF0ZVNlbnQ6Yy5mcmFtZXNFbmNvZGVkLXQubGFzdFJlcG9ydC5mcmFtZXNFbmNvZGVkK1wiXCJ9KSx0Lmxhc3RSZXBvcnQ9Y319fWNhdGNoKGUpe2E9ITAscj1lfWZpbmFsbHl7dHJ5e2l8fG51bGw9PXMucmV0dXJufHxzLnJldHVybigpfWZpbmFsbHl7aWYoYSl0aHJvdyByfX19KX0sdC5nZXRBdWRpb1JlbGF0ZWRTdGF0cz1mdW5jdGlvbihlKXt0LnBlZXJDb25uZWN0aW9uLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihuKXt2YXIgaT0hMCxhPSExLHI9dm9pZCAwO3RyeXtmb3IodmFyIG8scz1uLnZhbHVlcygpW1N5bWJvbC5pdGVyYXRvcl0oKTshKGk9KG89cy5uZXh0KCkpLmRvbmUpO2k9ITApe3ZhciBjPW8udmFsdWU7dC5pc1N1YnNjcmliZXImJihcImluYm91bmQtcnRwXCIhPT1jLnR5cGUmJlwiaW5ib3VuZHJ0cFwiIT09Yy50eXBlfHxcImF1ZGlvXCIhPT1jLm1lZGlhVHlwZXx8ZSYmZSh7YnJvd3NlcjpcImZpcmVmb3hcIixtZWRpYVR5cGU6XCJhdWRpb1wiLHBlZXJJZDp0LnVpZCxpc0F1ZGlvTXV0ZTp0LmlzQXVkaW9NdXRlLGZyYW1lRHJvcHBlZDpjLnBhY2tldHNMb3N0K1wiXCIsZnJhbWVSZWNlaXZlZDpjLnBhY2tldHNSZWNlaXZlZCtcIlwiLGdvb2dKaXR0ZXJSZWNlaXZlZDpjLmppdHRlcitcIlwiLGJ5dGVzUmVjZWl2ZWQ6Yy5ieXRlc1JlY2VpdmVkK1wiXCIscGFja2V0c1JlY2VpdmVkOmMucGFja2V0c1JlY2VpdmVkK1wiXCIscGFja2V0c0xvc3Q6Yy5wYWNrZXRzTG9zdCtcIlwifSkpfX1jYXRjaChlKXthPSEwLHI9ZX1maW5hbGx5e3RyeXtpfHxudWxsPT1zLnJldHVybnx8cy5yZXR1cm4oKX1maW5hbGx5e2lmKGEpdGhyb3cgcn19fSl9LHQuZ2V0U3RhdHNSYXRlPWZ1bmN0aW9uKGUpe3QuZ2V0U3RhdHMoZnVuY3Rpb24odCl7dC5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiaW5ib3VuZC1ydHBcIiE9PWUudHlwZSYmXCJpbmJvdW5kcnRwXCIhPT1lLnR5cGV8fFwidmlkZW9cIiE9PWUubWVkaWFUeXBlfHxlLmdvb2dGcmFtZVJhdGVEZWNvZGVkJiYoZS5nb29nRnJhbWVSYXRlRGVjb2RlZD0oKGUuZ29vZ0ZyYW1lc0RlY29kZWQtdSkvMykudG9TdHJpbmcoKSx1PWUuZ29vZ0ZyYW1lc0RlY29kZWQpfSksZSh0KX0pfSx0LmdldFN0YXRzPWZ1bmN0aW9uKGUsbil7bj0obj1ufHw1MDApPjUwMD81MDA6bix0Lmxhc3RUaW1lR2V0U3RhdHMmJkRhdGUubm93KCktdC5sYXN0VGltZUdldFN0YXRzPG4/ZSYmZSh0LmZpbHRlclN0YXRzQ2FjaGUsdC5vcmlnaW5TdGF0c0NhY2hlKTp0aGlzLl9nZXRTdGF0cyhmdW5jdGlvbihuLGkpe3QuZmlsdGVyU3RhdHNDYWNoZT1uLHQub3JpZ2luU3RhdHNDYWNoZT1pLHQubGFzdFRpbWVHZXRTdGF0cz1EYXRlLm5vdygpLGUmJmUobixpKX0pfSx0Ll9nZXRTdGF0cz1mdW5jdGlvbihlKXt0LnBlZXJDb25uZWN0aW9uLmdldFN0YXRzKCkudGhlbihmdW5jdGlvbihuKXt2YXIgaT1bXSxyPSEwLG89ITEsdT12b2lkIDA7dHJ5e2Zvcih2YXIgbCxwPW4udmFsdWVzKClbU3ltYm9sLml0ZXJhdG9yXSgpOyEocj0obD1wLm5leHQoKSkuZG9uZSk7cj0hMCl7dmFyIGY9bC52YWx1ZTtpLnB1c2goZiksXCJvdXRib3VuZC1ydHBcIiE9PWYudHlwZSYmXCJvdXRib3VuZHJ0cFwiIT09Zi50eXBlfHxcInZpZGVvXCIhPT1mLm1lZGlhVHlwZXx8LTEhPT1mLmlkLmluZGV4T2YoXCJydGNwXCIpfHwocy5pZD1mLmlkLHMudHlwZT1mLnR5cGUscy5tZWRpYVR5cGU9Zi5tZWRpYVR5cGUscy5ieXRlc1NlbnQ9Zi5ieXRlc1NlbnQ/Zi5ieXRlc1NlbnQrXCJcIjpcIjBcIixzLnBhY2tldHNTZW50PWYucGFja2V0c1NlbnQ/Zi5wYWNrZXRzU2VudCtcIlwiOlwiMFwiLHMuZ29vZ1BsaXNSZWNlaXZlZD1mLnBsaUNvdW50P2YucGxpQ291bnQrXCJcIjpcIjBcIixzLmdvb2dOYWNrc1JlY2VpdmVkPWYubmFja0NvdW50P2YubmFja0NvdW50K1wiXCI6XCIwXCIscy5nb29nRmlyc1JlY2VpdmVkPWYuZmlyQ291bnQ/Zi5maXJDb3VudCtcIlwiOlwiMFwiLHMuZ29vZ0ZyYW1lUmF0ZVNlbnQ9Zi5mcmFtZXJhdGVNZWFuP2YuZnJhbWVyYXRlTWVhbitcIlwiOlwiMFwiKSxcIm91dGJvdW5kLXJ0cFwiIT09Zi50eXBlJiZcIm91dGJvdW5kcnRwXCIhPT1mLnR5cGV8fFwiYXVkaW9cIiE9PWYubWVkaWFUeXBlfHwtMSE9PWYuaWQuaW5kZXhPZihcInJ0Y3BcIil8fChhLmlkPWYuaWQsYS50eXBlPWYudHlwZSxhLm1lZGlhVHlwZT1mLm1lZGlhVHlwZSxhLmJ5dGVzU2VudD1mLmJ5dGVzU2VudD9mLmJ5dGVzU2VudCtcIlwiOlwiMFwiLGEucGFja2V0c1NlbnQ9Zi5wYWNrZXRzU2VudD9mLnBhY2tldHNTZW50K1wiXCI6XCIwXCIpLFwiaW5ib3VuZC1ydHBcIiE9PWYudHlwZSYmXCJpbmJvdW5kcnRwXCIhPT1mLnR5cGV8fFwiYXVkaW9cIiE9PWYubWVkaWFUeXBlfHxmLmlzUmVtb3RlfHwtMSE9PWYuaWQuaW5kZXhPZihcInJ0Y3BcIil8fChjLmlkPWYuaWQsYy50eXBlPWYudHlwZSxjLm1lZGlhVHlwZT1mLm1lZGlhVHlwZSxjLmJ5dGVzUmVjZWl2ZWQ9Zi5ieXRlc1JlY2VpdmVkP2YuYnl0ZXNSZWNlaXZlZCtcIlwiOlwiMFwiLGMucGFja2V0c0xvc3Q9Zi5wYWNrZXRzTG9zdD9mLnBhY2tldHNMb3N0K1wiXCI6XCIwXCIsYy5wYWNrZXRzUmVjZWl2ZWQ9Zi5wYWNrZXRzUmVjZWl2ZWQ/Zi5wYWNrZXRzUmVjZWl2ZWQrXCJcIjpcIjBcIixjLmdvb2dKaXR0ZXJSZWNlaXZlZD1mLmppdHRlcj9mLmppdHRlcitcIlwiOlwiMFwiKSxcImluYm91bmQtcnRwXCIhPT1mLnR5cGUmJlwiaW5ib3VuZHJ0cFwiIT09Zi50eXBlfHxcInZpZGVvXCIhPT1mLm1lZGlhVHlwZXx8Zi5pc1JlbW90ZXx8LTEhPT1mLmlkLmluZGV4T2YoXCJydGNwXCIpfHwoZC5pZD1mLmlkLGQudHlwZT1mLnR5cGUsZC5tZWRpYVR5cGU9Zi5tZWRpYVR5cGUsZC5ieXRlc1JlY2VpdmVkPWYuYnl0ZXNSZWNlaXZlZD9mLmJ5dGVzUmVjZWl2ZWQrXCJcIjpcIjBcIixkLmdvb2dGcmFtZVJhdGVSZWNlaXZlZD1mLmZyYW1lcmF0ZU1lYW4/Zi5mcmFtZXJhdGVNZWFuK1wiXCI6XCIwXCIsZC5nb29nRnJhbWVzRGVjb2RlZD1mLmZyYW1lc0RlY29kZWQ/Zi5mcmFtZXNEZWNvZGVkK1wiXCI6XCIwXCIsZC5wYWNrZXRzTG9zdD1mLnBhY2tldHNMb3N0P2YucGFja2V0c0xvc3QrXCJcIjpcIjBcIixkLnBhY2tldHNSZWNlaXZlZD1mLnBhY2tldHNSZWNlaXZlZD9mLnBhY2tldHNSZWNlaXZlZCtcIlwiOlwiMFwiLGQuZ29vZ0ppdHRlckJ1ZmZlck1zPWYuaml0dGVyP2Yuaml0dGVyK1wiXCI6XCIwXCIsZC5nb29nTmFja3NTZW50PWYubmFja0NvdW50P2YubmFja0NvdW50K1wiXCI6XCIwXCIsZC5nb29nUGxpc1NlbnQ9Zi5wbGlDb3VudD9mLnBsaUNvdW50K1wiXCI6XCIwXCIsZC5nb29nRmlyc1NlbnQ9Zi5maXJDb3VudD9mLmZpckNvdW50K1wiXCI6XCIwXCIpLC0xIT09Zi5pZC5pbmRleE9mKFwib3V0Ym91bmRfcnRjcF92aWRlb1wiKSYmKHMucGFja2V0c0xvc3Q9Zi5wYWNrZXRzTG9zdD9mLnBhY2tldHNMb3N0K1wiXCI6XCIwXCIpfX1jYXRjaChlKXtvPSEwLHU9ZX1maW5hbGx5e3RyeXtyfHxudWxsPT1wLnJldHVybnx8cC5yZXR1cm4oKX1maW5hbGx5e2lmKG8pdGhyb3cgdX19dmFyIG09W3MsYSxjLGRdO20ucHVzaCh7aWQ6XCJ0aW1lXCIsc3RhcnRUaW1lOnQuY29ubmVjdGVkVGltZSx0aW1lc3RhbXA6bmV3IERhdGV9KSxlKG0saSl9LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5lcnJvcihcIltcIit0LmNsaWVudElkK1wiXVwiK2UpfSl9LHQuYWRkU3RyZWFtPWZ1bmN0aW9uKGUpe2k9ITAsdC5wZWVyQ29ubmVjdGlvbi5hZGRTdHJlYW0oZSksdC5tYXJrQWN0aW9uTmVlZGVkKCl9LHQucmVtb3ZlU3RyZWFtPWZ1bmN0aW9uKCl7dC5tYXJrQWN0aW9uTmVlZGVkKCl9LHQuY2xvc2U9ZnVuY3Rpb24oKXt0LnN0YXRlPVwiY2xvc2VkXCIsdC5wZWVyQ29ubmVjdGlvbi5jbG9zZSgpfSx0Lm1hcmtBY3Rpb25OZWVkZWQ9ZnVuY3Rpb24oKXt0LmFjdGlvbk5lZWRlZD0hMCx0LmRvTGF0ZXIoZnVuY3Rpb24oKXt0Lm9uc3RhYmxlc3RhdGUoKX0pfSx0LmRvTGF0ZXI9ZnVuY3Rpb24oZSl7d2luZG93LnNldFRpbWVvdXQoZSwxKX0sdC5vbnN0YWJsZXN0YXRlPWZ1bmN0aW9uKCl7aWYodC5hY3Rpb25OZWVkZWQpe2lmKFwibmV3XCI9PT10LnN0YXRlfHxcImVzdGFibGlzaGVkXCI9PT10LnN0YXRlKWkmJih0Lm1lZGlhQ29uc3RyYWludHM9dm9pZCAwKSx0LnBlZXJDb25uZWN0aW9uLmNyZWF0ZU9mZmVyKGZ1bmN0aW9uKGUpe2lmKGUuc2RwPWwoZS5zZHApLGUuc2RwPWUuc2RwLnJlcGxhY2UoL2E9ZXh0bWFwOjEgaHR0cDpcXC9cXC93d3cud2VicnRjLm9yZ1xcL2V4cGVyaW1lbnRzXFwvcnRwLWhkcmV4dFxcL2Ficy1zZW5kLXRpbWUvLFwiYT1leHRtYXA6MyBodHRwOi8vd3d3LndlYnJ0Yy5vcmcvZXhwZXJpbWVudHMvcnRwLWhkcmV4dC9hYnMtc2VuZC10aW1lXCIpLGUuc2RwIT09dC5wcmV2T2ZmZXIpcmV0dXJuIHQucGVlckNvbm5lY3Rpb24uc2V0TG9jYWxEZXNjcmlwdGlvbihlKSx0LnN0YXRlPVwicHJlcGFyaW5nLW9mZmVyXCIsdm9pZCB0Lm1hcmtBY3Rpb25OZWVkZWQoKTtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1Ob3Qgc2VuZGluZyBhIG5ldyBvZmZlclwiKX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdVXBzISBjcmVhdGUgb2ZmZXIgZmFpbGVkIFwiLGUpfSx0Lm1lZGlhQ29uc3RyYWludHMpO2Vsc2UgaWYoXCJwcmVwYXJpbmctb2ZmZXJcIj09PXQuc3RhdGUpe2lmKHQubW9yZUljZUNvbWluZylyZXR1cm47dC5wcmV2T2ZmZXI9dC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcCx0Lm9mZmVyQ2FuZGlkYXRlcz10LnByZXZPZmZlci5tYXRjaCgvYT1jYW5kaWRhdGUuK1xcclxcbi9nKXx8W10sdC5vZmZlckNhbmRpZGF0ZXMubGVuZ3RofHwoby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdTm8gSWNlIENhbmRpZGF0ZSBnZW5lcmF0ZWRcIikpLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJTSElNX0NBTkRJREFURVwiKT8oby5kZWZhdWx0LmRlYnVnKFwiU2hpbW1pbmcgZmFrZSBjYW5kaWRhdGVcIiksdC5wcmV2T2ZmZXIrPVwiYT1jYW5kaWRhdGU6MjI0MzI1NTQzNSAxIHVkcCAyMTIyMTk0Njg3IDE5Mi4xNjguMC4xIDMwMDAwIHR5cCBob3N0IGdlbmVyYXRpb24gMCBuZXR3b3JrLWlkIDFcXHJcXG5cIik6by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXU5vbmUgSWNlIENhbmRpZGF0ZSBub3QgYWxsb3dlZFwiKSkpLHQucHJldk9mZmVyPXQucHJldk9mZmVyLnJlcGxhY2UoL2E9Y2FuZGlkYXRlOi4rdHlwXFxzaG9zdC4rXFxyXFxuL2csXCJhPWNhbmRpZGF0ZToyMjQzMjU1NDM1IDEgdWRwIDIxMjIxOTQ2ODcgMTkyLjE2OC4wLjEgMzAwMDAgdHlwIGhvc3QgZ2VuZXJhdGlvbiAwIG5ldHdvcmstaWQgMVxcclxcblwiKSx0LnNlbmRNZXNzYWdlKFwiT0ZGRVJcIix0LnByZXZPZmZlciksdC5zdGF0ZT1cIm9mZmVyLXNlbnRcIn1lbHNlIGlmKFwib2ZmZXItcmVjZWl2ZWRcIj09PXQuc3RhdGUpdC5wZWVyQ29ubmVjdGlvbi5jcmVhdGVBbnN3ZXIoZnVuY3Rpb24oZSl7aWYodC5wZWVyQ29ubmVjdGlvbi5zZXRMb2NhbERlc2NyaXB0aW9uKGUpLHQuc3RhdGU9XCJvZmZlci1yZWNlaXZlZC1wcmVwYXJpbmctYW5zd2VyXCIsdC5pY2VTdGFydGVkKXQubWFya0FjdGlvbk5lZWRlZCgpO2Vsc2V7dmFyIG49bmV3IERhdGU7by5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdXCIrbi5nZXRUaW1lKCkrXCI6IFN0YXJ0aW5nIElDRSBpbiByZXNwb25kZXJcIiksdC5pY2VTdGFydGVkPSEwfX0sZnVuY3Rpb24oKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl1VcHMhIFNvbWV0aGluZyB3ZW50IHdyb25nXCIpfSk7ZWxzZSBpZihcIm9mZmVyLXJlY2VpdmVkLXByZXBhcmluZy1hbnN3ZXJcIj09PXQuc3RhdGUpe2lmKHQubW9yZUljZUNvbWluZylyZXR1cm47dmFyIGU9dC5wZWVyQ29ubmVjdGlvbi5sb2NhbERlc2NyaXB0aW9uLnNkcDt0LnNlbmRNZXNzYWdlKFwiQU5TV0VSXCIsZSksdC5zdGF0ZT1cImVzdGFibGlzaGVkXCJ9ZWxzZSB0LmVycm9yKFwiRGF6ZWQgYW5kIGNvbmZ1c2VkIGluIHN0YXRlIFwiK3Quc3RhdGUrXCIsIHN0b3BwaW5nIGhlcmVcIik7dC5hY3Rpb25OZWVkZWQ9ITF9fSx0LnNlbmRNZXNzYWdlPWZ1bmN0aW9uKGUsbil7dmFyIGk9e307aS5tZXNzYWdlVHlwZT1lLGkuc2RwPW4sXCJPRkZFUlwiPT09ZT8oaS5vZmZlcmVyU2Vzc2lvbklkPXQuc2Vzc2lvbklkLGkuYW5zd2VyZXJTZXNzaW9uSWQ9dC5vdGhlclNlc3Npb25JZCxpLnNlcT10LnNlcXVlbmNlTnVtYmVyKz0xLGkudGllYnJlYWtlcj1NYXRoLmZsb29yKDQyOTQ5NjcyMypNYXRoLnJhbmRvbSgpKzEpKTooaS5vZmZlcmVyU2Vzc2lvbklkPXQuaW5jb21pbmdNZXNzYWdlLm9mZmVyZXJTZXNzaW9uSWQsaS5hbnN3ZXJlclNlc3Npb25JZD10LnNlc3Npb25JZCxpLnNlcT10LmluY29taW5nTWVzc2FnZS5zZXEpLHQub25zaWduYWxpbmdtZXNzYWdlKEpTT04uc3RyaW5naWZ5KGkpKX0sdC5fZ2V0U2VuZGVyPWZ1bmN0aW9uKGUpe2lmKHQucGVlckNvbm5lY3Rpb24mJnQucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycyl7dmFyIG49dC5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZmluZChmdW5jdGlvbih0KXtyZXR1cm4gdC50cmFjay5raW5kPT1lfSk7aWYobilyZXR1cm4gbn1yZXR1cm4gbnVsbH0sdC5oYXNTZW5kZXI9ZnVuY3Rpb24oZSl7cmV0dXJuISF0Ll9nZXRTZW5kZXIoZSl9LHQucmVwbGFjZVRyYWNrPWZ1bmN0aW9uKGUsbixpKXt2YXIgYT10Ll9nZXRTZW5kZXIoZS5raW5kKTtpZighYSlyZXR1cm4gaShcIk5PX1NFTkRFUl9GT1VORFwiKTt0cnl7YS5yZXBsYWNlVHJhY2soZSl9Y2F0Y2goZSl7cmV0dXJuIGkmJmkoZSl9c2V0VGltZW91dChmdW5jdGlvbigpe3JldHVybiBuJiZuKCl9LDUwKX0sdC5lcnJvcj1mdW5jdGlvbihlKXt0aHJvd1wiRXJyb3IgaW4gUm9hcE9uSnNlcDogXCIrZX0sdC5zZXNzaW9uSWQ9dC5yb2FwU2Vzc2lvbklkKz0xLHQuc2VxdWVuY2VOdW1iZXI9MCx0LmFjdGlvbk5lZWRlZD0hMSx0LmljZVN0YXJ0ZWQ9ITEsdC5tb3JlSWNlQ29taW5nPSEwLHQuaWNlQ2FuZGlkYXRlQ291bnQ9MCx0Lm9uc2lnbmFsaW5nbWVzc2FnZT1lLmNhbGxiYWNrLHQucGVlckNvbm5lY3Rpb24ub250cmFjaz1mdW5jdGlvbihlKXt0Lm9uYWRkc3RyZWFtJiZ0Lm9uYWRkc3RyZWFtKGUsXCJvbnRyYWNrXCIpfSx0LnBlZXJDb25uZWN0aW9uLm9ucmVtb3Zlc3RyZWFtPWZ1bmN0aW9uKGUpe3Qub25yZW1vdmVzdHJlYW0mJnQub25yZW1vdmVzdHJlYW0oZSl9LHQucGVlckNvbm5lY3Rpb24ub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oZSl7XCJjb25uZWN0ZWRcIj09PWUuY3VycmVudFRhcmdldC5pY2VDb25uZWN0aW9uU3RhdGUmJih0LmNvbm5lY3RlZFRpbWU9bmV3IERhdGUpLHQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UmJnQub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2UoZS5jdXJyZW50VGFyZ2V0LmljZUNvbm5lY3Rpb25TdGF0ZSl9O3ZhciBsPWZ1bmN0aW9uKHQpe3ZhciBuO2lmKGUudmlkZW8mJmUubWF4VmlkZW9CVyYmKG51bGw9PShuPXQubWF0Y2goL209dmlkZW8uKlxcclxcbi8pKSYmKG49dC5tYXRjaCgvbT12aWRlby4qXFxuLykpLG4mJm4ubGVuZ3RoPjApKXt2YXIgaT1uWzBdK1wiYj1USUFTOlwiKzFlMyplLm1heFZpZGVvQlcrXCJcXHJcXG5cIjt0PXQucmVwbGFjZShuWzBdLGkpfXJldHVybiBlLmF1ZGlvJiZlLm1heEF1ZGlvQlcmJihudWxsPT0obj10Lm1hdGNoKC9tPWF1ZGlvLipcXHJcXG4vKSkmJihuPXQubWF0Y2goL209YXVkaW8uKlxcbi8pKSxuJiZuLmxlbmd0aD4wKSYmKGk9blswXStcImI9VElBUzpcIisxZTMqZS5tYXhBdWRpb0JXK1wiXFxyXFxuXCIsdD10LnJlcGxhY2UoblswXSxpKSksdH07cmV0dXJuIHQub25hZGRzdHJlYW09bnVsbCx0Lm9ucmVtb3Zlc3RyZWFtPW51bGwsdC5zdGF0ZT1cIm5ld1wiLHQubWFya0FjdGlvbk5lZWRlZCgpLHR9LFc9YSgxNiksRz1hLm4oVykscT1udWxsLFk9ZnVuY3Rpb24oKXt0cnl7cT13aW5kb3cucmVxdWlyZShcImVsZWN0cm9uXCIpfWNhdGNoKGUpe31yZXR1cm4gcX0sSj1mdW5jdGlvbihlKXt2YXIgdD1zLmIucmVwb3J0QXBpSW52b2tlKG51bGwse2NhbGxiYWNrOmUsbmFtZTpcImdldFNjcmVlblNvdXJjZXNcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pLG49WSgpO2lmKCFuKXJldHVybiB0JiZ0KFwiZWxlY3Ryb24gaXMgbnVsbFwiKTtuLmRlc2t0b3BDYXB0dXJlci5nZXRTb3VyY2VzKHt0eXBlczpbXCJ3aW5kb3dcIixcInNjcmVlblwiXX0sZnVuY3Rpb24oZSxuKXtpZihlKXJldHVybiB0JiZ0KGUpO3QmJnQobnVsbCxuKX0pfSxLPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT10LndpZHRoO3Q9e2F1ZGlvOiExLHZpZGVvOnttYW5kYXRvcnk6e2Nocm9tZU1lZGlhU291cmNlOlwiZGVza3RvcFwiLGNocm9tZU1lZGlhU291cmNlSWQ6ZSxtYXhIZWlnaHQ6dC5oZWlnaHQsbWF4V2lkdGg6aSxtYXhGcmFtZVJhdGU6dC5mcmFtZVJhdGUmJnQuZnJhbWVSYXRlLm1heCxtaW5GcmFtZVJhdGU6dC5mcmFtZVJhdGUmJnQuZnJhbWVSYXRlLm1pbn19fTtuYXZpZ2F0b3Iud2Via2l0R2V0VXNlck1lZGlhKHQsZnVuY3Rpb24oZSl7biYmbihudWxsLGUpfSxmdW5jdGlvbihlKXtuJiZuKGUpfSl9LHo9ZnVuY3Rpb24oKXtyZXR1cm4hIVkoKX0sWD1KLFE9SywkPWZ1bmN0aW9uKGUsdCl7SihmdW5jdGlvbihuLGkpe2lmKG4pcmV0dXJuIHQmJnQobik7IWZ1bmN0aW9uKGUsdCl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLmlubmVyVGV4dD1cInNoYXJlIHNjcmVlblwiLG4uc2V0QXR0cmlidXRlKFwic3R5bGVcIixcInRleHQtYWxpZ246IGNlbnRlcjsgaGVpZ2h0OiAyNXB4OyBsaW5lLWhlaWdodDogMjVweDsgYm9yZGVyLXJhZGl1czogNHB4IDRweCAwIDA7IGJhY2tncm91bmQ6ICNENEQyRDQ7IGJvcmRlci1ib3R0b206ICBzb2xpZCAxcHggI0I5QjhCOTtcIik7dmFyIGk9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtpLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMTAwJTsgaGVpZ2h0OiA1MDBweDsgcGFkZGluZzogMTVweCAyNXB4IDsgYm94LXNpemluZzogYm9yZGVyLWJveDtcIik7dmFyIGE9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTthLmlubmVyVGV4dD1cIkFnb3JhIFdlYiBTY3JlZW5zaGFyaW5nIHdhbnRzIHRvIHNoYXJlIHRoZSBjb250ZW50cyBvZiB5b3VyIHNjcmVlbiB3aXRoIHdlYmRlbW8uYWdvcmFiZWNrb24uY29tLiBDaG9vc2Ugd2hhdCB5b3UnZCBsaWtlIHRvIHNoYXJlLlwiLGEuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcImhlaWdodDogMTIlO1wiKTt2YXIgcj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO3Iuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcIndpZHRoOiAxMDAlOyBoZWlnaHQ6IDgwJTsgYmFja2dyb3VuZDogI0ZGRjsgYm9yZGVyOiAgc29saWQgMXB4ICNDQkNCQ0I7IGRpc3BsYXk6IGZsZXg7IGZsZXgtd3JhcDogd3JhcDsganVzdGlmeS1jb250ZW50OiBzcGFjZS1hcm91bmQ7IG92ZXJmbG93LXk6IHNjcm9sbDsgcGFkZGluZzogMCAxNXB4OyBib3gtc2l6aW5nOiBib3JkZXItYm94O1wiKTt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO28uc2V0QXR0cmlidXRlKFwic3R5bGVcIixcInRleHQtYWxpZ246IHJpZ2h0OyBwYWRkaW5nOiAxNnB4IDA7XCIpO3ZhciBzPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJidXR0b25cIik7cy5pbm5lckhUTUw9XCJjYW5jZWxcIixzLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogODVweDtcIikscy5vbmNsaWNrPWZ1bmN0aW9uKCl7ZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChjKSx0JiZ0KFwiTm90QWxsb3dlZEVycm9yXCIpfSxvLmFwcGVuZENoaWxkKHMpLGkuYXBwZW5kQ2hpbGQoYSksaS5hcHBlbmRDaGlsZChyKSxpLmFwcGVuZENoaWxkKG8pO3ZhciBjPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7Yy5zZXRBdHRyaWJ1dGUoXCJzdHlsZVwiLFwicG9zaXRpb246IGFic29sdXRlOyB6LWluZGV4OiA5OTk5OTk5OTsgdG9wOiA1MCU7IGxlZnQ6IDUwJTsgd2lkdGg6IDYyMHB4OyBoZWlnaHQ6IDUyNXB4OyBiYWNrZ3JvdW5kOiAjRUNFQ0VDOyBib3JkZXItcmFkaXVzOiA0cHg7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwtNTAlKTsgdHJhbnNmb3JtOiB0cmFuc2xhdGUoLTUwJSwtNTAlKTtcIiksYy5hcHBlbmRDaGlsZChuKSxjLmFwcGVuZENoaWxkKGkpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoYyksZS5tYXAoZnVuY3Rpb24oZSl7aWYoZS5pZCl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtuLnNldEF0dHJpYnV0ZShcInN0eWxlXCIsXCJ3aWR0aDogMzAlOyBoZWlnaHQ6IDE2MHB4OyBwYWRkaW5nOiAyMHB4IDA7IHRleHQtYWxpZ246IGNlbnRlcjtib3gtc2l6aW5nOiBjb250ZW50LWJveDtcIiksbi5pbm5lckhUTUw9JzxkaXYgc3R5bGU9XCJoZWlnaHQ6IDEyMHB4OyBkaXNwbGF5OiB0YWJsZS1jZWxsOyB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlO1wiPjxpbWcgc3R5bGU9XCJ3aWR0aDogMTAwJTsgYmFja2dyb3VuZDogIzMzMzMzMzsgYm94LXNoYWRvdzogMXB4IDFweCAxcHggMXB4IHJnYmEoMCwgMCwgMCwgMC4yKTtcIiBzcmM9JytlLnRodW1ibmFpbC50b0RhdGFVUkwoKSsnIC8+PC9kaXY+PHNwYW4gc3R5bGU9XCJcXHRoZWlnaHQ6IDQwcHg7IGxpbmUtaGVpZ2h0OiA0MHB4OyBkaXNwbGF5OiBpbmxpbmUtYmxvY2s7IHdpZHRoOiA3MCU7IHdvcmQtYnJlYWs6IGtlZXAtYWxsOyB3aGl0ZS1zcGFjZTogbm93cmFwOyBvdmVyZmxvdzogaGlkZGVuOyB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcIj4nK2UubmFtZStcIjwvc3Bhbj5cIixuLm9uY2xpY2s9ZnVuY3Rpb24oKXtkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKGMpLHQmJnQobnVsbCxlLmlkKX0sci5hcHBlbmRDaGlsZChuKX19KX0oaSxmdW5jdGlvbihuLGkpe2lmKG4pcmV0dXJuIHQmJnQobik7SyhpLGUsdCl9KX0pfSxaPTEwMyxlZT1mdW5jdGlvbihlKXt2YXIgdD17fTtpZih0LmNsaWVudElkPWUuY2xpZW50SWQsZS5zZXNzaW9uX2lkPVorPTEsXCJ1bmRlZmluZWRcIj09dHlwZW9mIHdpbmRvd3x8IXdpbmRvdy5uYXZpZ2F0b3IpdGhyb3cgby5kZWZhdWx0LmVycm9yKFwiW1wiK3Quc3RyZWFtSWQrXCJdW1wiK3QuY2xpZW50SWQrXCJdUHVibGlzaC9zdWJzY3JpYmUgdmlkZW8vYXVkaW8gc3RyZWFtcyBub3Qgc3VwcG9ydGVkIHlldFwiKSxuZXcgRXJyb3IoXCJOT05fQlJPV1NFUl9FTlZfREVURUNURURcIik7cmV0dXJuIG51bGwhPT13aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChcIkZpcmVmb3hcIik/KHQuYnJvd3Nlcj1cIm1vemlsbGFcIix0PUgoZSkpOlwiaU9TXCI9PT1tLmdldEJyb3dzZXJPUygpfHxtLmlzU2FmYXJpKCk/KG8uZGVmYXVsdC5kZWJ1ZyhcIltcIit0LnN0cmVhbUlkK1wiXVtcIit0LmNsaWVudElkK1wiXVNhZmFyaVwiKSwodD1CKGUpKS5icm93c2VyPVwic2FmYXJpXCIpOn53aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5pbmRleE9mKFwiRWRnZVwiKT90PW5ldyBHLmEoZSk6KHQ9RihlKSkuYnJvd3Nlcj1cImNocm9tZS1zdGFibGVcIix0fSx0ZT1mdW5jdGlvbihlLHQsbil7dmFyIGk9e307aS5jb25maWc9ZSxpLnN0cmVhbUlkPWUuc3RyZWFtSWQsZGVsZXRlIGUuc3RyZWFtSWQsbmF2aWdhdG9yLmdldE1lZGlhPW5hdmlnYXRvci5nZXRVc2VyTWVkaWF8fG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWF8fG5hdmlnYXRvci5tb3pHZXRVc2VyTWVkaWF8fG5hdmlnYXRvci5tc0dldFVzZXJNZWRpYTt2YXIgYT0wLHI9MSxzPSExLGM9bnVsbCxkPWZ1bmN0aW9uKGUpe2lmKGErKyxjKWlmKGM9PT1lKW8uZGVmYXVsdC5kZWJ1ZyhcIlVzaW5nIFZpZGVvIFNvdXJjZS8gQXVkaW8gU291cmNlXCIpO2Vsc2V7dmFyIG49Yy5nZXRWaWRlb1RyYWNrcygpWzBdLGk9Yy5nZXRBdWRpb1RyYWNrcygpWzBdLGQ9ZS5nZXRWaWRlb1RyYWNrcygpWzBdLHU9ZS5nZXRBdWRpb1RyYWNrcygpWzBdO2QmJihuJiZjLnJlbW92ZVRyYWNrKG4pLGMuYWRkVHJhY2soZCkpLHUmJihpJiZjLnJlbW92ZVRyYWNrKGkpLGMuYWRkVHJhY2sodSkpfWVsc2UgYz1lO2EhPT1yfHxzfHwocz0hMCxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChjKX0sMCkpfSx1PWZ1bmN0aW9uKGUpe28uZGVmYXVsdC5lcnJvcihcIkZhaWxlZCB0byBHZXRVc2VyTWVkaWFcIixlLm5hbWUsZS5jb2RlLGUubWVzc2FnZSxlKSxhKyssc3x8KHM9ITAsc2V0VGltZW91dChmdW5jdGlvbigpe24mJm4oZSl9LDApKX0sbD1mdW5jdGlvbigpe3ZhciB0PXt2aWRlbzplLnZpZGVvLGF1ZGlvOmUuYXVkaW99O2lmKG8uZGVmYXVsdC5kZWJ1ZyhcIkdldFVzZXJNZWRpYVwiLEpTT04uc3RyaW5naWZ5KHQpKSxuYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSluYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldFVzZXJNZWRpYSh0KS50aGVuKGQpLmNhdGNoKHUpO2Vsc2UgaWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIG5hdmlnYXRvciYmbmF2aWdhdG9yLmdldE1lZGlhKW5hdmlnYXRvci5nZXRNZWRpYShlLGQsdSk7ZWxzZXt2YXIgYT17bmFtZTpcIk1FRElBX05PVF9TVVBQT1JUXCIsbWVzc2FnZTpcIlZpZGVvL2F1ZGlvIHN0cmVhbXMgbm90IHN1cHBvcnRlZCB5ZXRcIn07by5kZWZhdWx0LmVycm9yKFwiW1wiK2kuc3RyZWFtSWQrXCJdXCIrYS5tZXNzYWdlKSxuJiZuKGEpfX07aWYoKGUudmlkZW9Tb3VyY2V8fGUuYXVkaW9Tb3VyY2UpJiYoYz1uZXcgTWVkaWFTdHJlYW0sZS52aWRlb1NvdXJjZSYmYy5hZGRUcmFjayhlLnZpZGVvU291cmNlKSxlLmF1ZGlvU291cmNlJiZjLmFkZFRyYWNrKGUuYXVkaW9Tb3VyY2UpKSxlLnZpZGVvfHxlLmF1ZGlvfHxlLnNjcmVlbnx8ZS5zY3JlZW5BdWRpb3x8ZChjKSwhZS5zY3JlZW4mJmUuc2NyZWVuQXVkaW8pcmV0dXJuIG4mJm4oe2NvZGU6XCJTZXQgc2NyZWVuIHRvIHRydWUgYmVmb3JlIHNoYXJpbmcgdGhlIGF1ZGlvXCJ9KTtpZihlLnNjcmVlbil7aWYoeigpKXJldHVybiBlLnNjcmVlbi5zb3VyY2VJZD9RKGUuc2NyZWVuLnNvdXJjZUlkLGUuc2NyZWVuLGZ1bmN0aW9uKGUsdCl7ZT91KGUpOmQodCl9KTokKGUuc2NyZWVuLGZ1bmN0aW9uKGUsdCl7ZT91KGUpOmQodCl9KTtpZihtLmlzRmlyZUZveCgpKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIraS5zdHJlYW1JZCtcIl1TY3JlZW4gYWNjZXNzIHJlcXVlc3RlZFwiKTtpZighfltcInNjcmVlblwiLFwid2luZG93XCIsXCJhcHBsaWNhdGlvblwiXS5pbmRleE9mKGUuc2NyZWVuLm1lZGlhU291cmNlKSlyZXR1cm4gbiYmbih7Y29kZTpcIkludmFsaWQgbWVkaWFTb3VyY2UsIG1lZGlhU291cmNlIHNob3VsZCBiZSBvbmUgb2YgW3NjcmVlbiwgd2luZG93LCBhcHBsaWNhdGlvbl1cIn0pO25hdmlnYXRvci5nZXRNZWRpYSh7dmlkZW86ZS5zY3JlZW59LGZ1bmN0aW9uKHQpe2UuYXVkaW8mJihyKyssbCgpKSxkKHQpfSx1KX1lbHNlIGlmKG0uaXNDaHJvbWVLZXJuZWwoKSYmZS5zY3JlZW4uZXh0ZW5zaW9uSWQpe2lmKHdpbmRvdy5uYXZpZ2F0b3IuYXBwVmVyc2lvbi5tYXRjaCgvQ2hyb21lXFwvKFtcXHdcXFddKj8pXFwuLylbMV08MzQpcmV0dXJuIHZvaWQgbih7Y29kZTpcIlRoaXMgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHNjcmVlbiBzaGFyaW5nXCJ9KTtvLmRlZmF1bHQuZGVidWcoXCJbXCIraS5zdHJlYW1JZCtcIl1TY3JlZW4gYWNjZXNzIG9uIGNocm9tZSBzdGFibGUsIGxvb2tpbmcgZm9yIGV4dGVuc2lvblwiKTt0cnl7Y2hyb21lLnJ1bnRpbWUuc2VuZE1lc3NhZ2UoZS5zY3JlZW4uZXh0ZW5zaW9uSWQse2dldFN0cmVhbTohMH0sZnVuY3Rpb24odCl7aWYodm9pZCAwPT09dCl7by5kZWZhdWx0LmVycm9yKFwiW1wiK2kuc3RyZWFtSWQrXCJdTm8gcmVzcG9uc2UgZnJvbSBDaHJvbWUgUGx1Z2luLiBQbHVnaW4gbm90IGluc3RhbGxlZCBwcm9wZXJseVwiKTt1KHtuYW1lOlwiUGx1Z2luTm90SW5zdGFsbGVkUHJvcGVybHlcIixtZXNzYWdlOlwiTm8gcmVzcG9uc2UgZnJvbSBDaHJvbWUgUGx1Z2luLiBQbHVnaW4gbm90IGluc3RhbGxlZCBwcm9wZXJseS5cIn0pfWVsc2UgZS5zY3JlZW4ubWFuZGF0b3J5LmNocm9tZU1lZGlhU291cmNlSWQ9dC5zdHJlYW1JZCxuYXZpZ2F0b3IuZ2V0TWVkaWEoe3ZpZGVvOmUuc2NyZWVufSxmdW5jdGlvbih0KXtlLmF1ZGlvJiYocisrLGwoKSksZCh0KX0sdSl9KX1jYXRjaChlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIraS5zdHJlYW1JZCtcIl1BZ29yYVJUQyBzY3JlZW5zaGFyaW5nIHBsdWdpbiBpcyBub3QgYWNjZXNzaWJsZVwiKTtyZXR1cm4gdm9pZCBuKHtjb2RlOlwibm9fcGx1Z2luX3ByZXNlbnRcIn0pfX1lbHNle2lmKHdpbmRvdy5uYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmdldERpc3BsYXlNZWRpYSl7dmFyIHA9e307cmV0dXJuXCJudW1iZXJcIj09dHlwZW9mIGUuc2NyZWVuLndpZHRoJiZcIm51bWJlclwiPT10eXBlb2YgZS5zY3JlZW4uaGVpZ2h0P3AudmlkZW89e3dpZHRoOntpZGVhbDplLnNjcmVlbi53aWR0aH0saGVpZ2h0OntpZGVhbDplLnNjcmVlbi5oZWlnaHR9fTpwLnZpZGVvPXt3aWR0aDplLnNjcmVlbi53aWR0aCxoZWlnaHQ6ZS5zY3JlZW4uaGVpZ2h0fSxlLnNjcmVlbi5mcmFtZVJhdGUmJmUuc2NyZWVuLmZyYW1lUmF0ZS5taW4/cC52aWRlby5mcmFtZVJhdGU9e2lkZWFsOmUuc2NyZWVuLmZyYW1lUmF0ZS5tYXgsbWF4OmUuc2NyZWVuLmZyYW1lUmF0ZS5tYXh9OnAudmlkZW8uZnJhbWVSYXRlPWUuc2NyZWVuLmZyYW1lUmF0ZSxlLnNjcmVlbkF1ZGlvJiYocC5hdWRpbz1lLnNjcmVlbkF1ZGlvKSxvLmRlZmF1bHQuZGVidWcoXCJ1c2UgZ2V0RGlzcGxheU1lZGlhLCBjb25zdHJhaW50czpcIixwKSx3aW5kb3cubmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXREaXNwbGF5TWVkaWEocCkudGhlbihmdW5jdGlvbih0KXshZS5zY3JlZW5BdWRpbyYmZS5hdWRpbyYmKHIrKyxsKCkpLGQodCl9KS5jYXRjaCh1KX1vLmRlZmF1bHQuZXJyb3IoXCJbXCIraS5zdHJlYW1JZCtcIl1UaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBzY3JlZW5TaGFyaW5nXCIpLG4oe2NvZGU6XCJUaGlzIGJyb3dzZXIgZG9lcyBub3Qgc3VwcG9ydCBzY3JlZW4gc2hhcmluZ1wifSl9fWVsc2UgbCgpfSxuZT1hKDEwKSxpZT1mdW5jdGlvbihlLHQsbil7aWYoW1wiRW5kMkVuZERlbGF5XCIsXCJUcmFuc3BvcnREZWxheVwiLFwiUGFja2V0TG9zc1JhdGVcIixcIlJlY3ZMZXZlbFwiLFwiUmVjdkJpdHJhdGVcIixcIkNvZGVjVHlwZVwiLFwiTXV0ZVN0YXRlXCIsXCJUb3RhbEZyZWV6ZVRpbWVcIixcIlRvdGFsUGxheUR1cmF0aW9uXCIsXCJSZWNvcmRpbmdMZXZlbFwiLFwiU2VuZExldmVsXCIsXCJTYW1wbGluZ1JhdGVcIixcIlNlbmRCaXRyYXRlXCIsXCJDb2RlY1R5cGVcIixcIk11dGVTdGF0ZVwiLFwiRW5kMkVuZERlbGF5XCIsXCJUcmFuc3BvcnREZWxheVwiLFwiUGFja2V0TG9zc1JhdGVcIixcIlJlY3ZCaXRyYXRlXCIsXCJSZWN2UmVzb2x1dGlvbldpZHRoXCIsXCJSZWN2UmVzb2x1dGlvbkhlaWdodFwiLFwiUmVuZGVyUmVzb2x1dGlvbkhlaWdodFwiLFwiUmVuZGVyUmVzb2x1dGlvbldpZHRoXCIsXCJSZW5kZXJGcmFtZVJhdGVcIixcIlRvdGFsRnJlZXplVGltZVwiLFwiVG90YWxQbGF5RHVyYXRpb25cIixcIlRhcmdldFNlbmRCaXRyYXRlXCIsXCJTZW5kRnJhbWVSYXRlXCIsXCJTZW5kRnJhbWVSYXRlXCIsXCJTZW5kQml0cmF0ZVwiLFwiU2VuZFJlc29sdXRpb25XaWR0aFwiLFwiU2VuZFJlc29sdXRpb25IZWlnaHRcIixcIkNhcHR1cmVSZXNvbHV0aW9uSGVpZ2h0XCIsXCJDYXB0dXJlUmVzb2x1dGlvbldpZHRoXCIsXCJFbmNvZGVEZWxheVwiLFwiTXV0ZVN0YXRlXCIsXCJUb3RhbEZyZWV6ZVRpbWVcIixcIlRvdGFsRHVyYXRpb25cIixcIkNhcHR1cmVGcmFtZVJhdGVcIixcIlJUVFwiLFwiT3V0Z29pbmdBdmFpbGFibGVCYW5kd2lkdGhcIixcIkR1cmF0aW9uXCIsXCJVc2VyQ291bnRcIixcIlNlbmRCeXRlc1wiLFwiUmVjdkJ5dGVzXCIsXCJTZW5kQml0cmF0ZVwiLFwiUmVjdkJpdHJhdGVcIixcImFjY2Vzc0RlbGF5XCIsXCJhdWRpb1NlbmRCeXRlc1wiLFwiYXVkaW9TZW5kUGFja2V0c1wiLFwidmlkZW9TZW5kQnl0ZXNcIixcInZpZGVvU2VuZFBhY2tldHNcIixcInZpZGVvU2VuZFBhY2tldHNMb3N0XCIsXCJ2aWRlb1NlbmRGcmFtZVJhdGVcIixcImF1ZGlvU2VuZFBhY2tldHNMb3N0XCIsXCJ2aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGhcIixcInZpZGVvU2VuZFJlc29sdXRpb25IZWlnaHRcIixcImFjY2Vzc0RlbGF5XCIsXCJhdWRpb1JlY2VpdmVCeXRlc1wiLFwiYXVkaW9SZWNlaXZlUGFja2V0c1wiLFwiYXVkaW9SZWNlaXZlUGFja2V0c0xvc3RcIixcInZpZGVvUmVjZWl2ZUJ5dGVzXCIsXCJ2aWRlb1JlY2VpdmVQYWNrZXRzXCIsXCJ2aWRlb1JlY2VpdmVQYWNrZXRzTG9zdFwiLFwidmlkZW9SZWNlaXZlRnJhbWVSYXRlXCIsXCJ2aWRlb1JlY2VpdmVEZWNvZGVGcmFtZVJhdGVcIixcInZpZGVvUmVjZWl2ZVJlc29sdXRpb25XaWR0aFwiLFwidmlkZW9SZWNlaXZlUmVzb2x1dGlvbkhlaWdodFwiLFwiZW5kVG9FbmREZWxheVwiLFwidmlkZW9SZWNlaXZlRGVsYXlcIixcImF1ZGlvUmVjZWl2ZURlbGF5XCIsXCJGaXJzdEZyYW1lVGltZVwiLFwiVmlkZW9GcmVlemVSYXRlXCIsXCJBdWRpb0ZyZWV6ZVJhdGVcIixcIlJlbmRlclJlc29sdXRpb25XaWR0aFwiLFwiUmVuZGVyUmVzb2x1dGlvbkhlaWdodFwiXS5pbmRleE9mKHQpPi0xJiYoXCJzdHJpbmdcIj09dHlwZW9mIG58fGlzRmluaXRlKG4pKSlyZXR1cm4gZVt0XT1cIlwiK259LGFlPW5ldyBmdW5jdGlvbigpe3ZhciBlPWMoKTtyZXR1cm4gZS5kZXZpY2VzSGlzdG9yeT17fSxlLnN0YXRlcz17VU5JTklUOlwiVU5JTklUXCIsSU5JVElORzpcIklOSVRJTkdcIixJTklURUQ6XCJJTklURURcIn0sZS5zdGF0ZT1lLnN0YXRlcy5VTklOSVQsZS5kZXZpY2VTdGF0ZXM9e0FDVElWRTpcIkFDVElWRVwiLElOQUNUSVZFOlwiSU5BQ1RJVkVcIn0sZS5kZXZpY2VSZWxvYWRUaW1lcj1udWxsLGUuX2luaXQ9ZnVuY3Rpb24odCxuKXtlLnN0YXRlPWUuc3RhdGVzLklOSVRJTkcsZS5kZXZpY2VzSGlzdG9yeT17fSxlLl9yZWxvYWREZXZpY2VzSW5mbyhmdW5jdGlvbigpe2Uuc3RhdGU9ZS5zdGF0ZXMuSU5JVEVELGUuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImluaXRlZFwifSksdCYmdCgpfSxmdW5jdGlvbih0KXtvLmRlZmF1bHQud2FybmluZyhcIkRldmljZSBEZXRlY3Rpb24gZnVuY3Rpb25hbGl0eSBjYW5ub3Qgc3RhcnQgcHJvcGVybHkuXCIpLGUuc3RhdGU9ZS5zdGF0ZXMuVU5JTklULG4mJm4odCl9KX0sZS5fZW51bWVyYXRlRGV2aWNlcz1mdW5jdGlvbihlLHQpe2lmKCFuYXZpZ2F0b3IubWVkaWFEZXZpY2VzfHwhbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKXJldHVybiBvLmRlZmF1bHQud2FybmluZyhcImVudW1lcmF0ZURldmljZXMoKSBub3Qgc3VwcG9ydGVkLlwiKSx0JiZ0KFwiZW51bWVyYXRlRGV2aWNlcygpIG5vdCBzdXBwb3J0ZWRcIik7bmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5lbnVtZXJhdGVEZXZpY2VzKCkudGhlbihmdW5jdGlvbih0KXtlJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZSh0KX0sMCl9KS5jYXRjaChmdW5jdGlvbihlKXt0JiZ0KGUpfSl9LGUuX3JlbG9hZERldmljZXNJbmZvPWZ1bmN0aW9uKHQsbil7dmFyIGk9W107ZS5fZW51bWVyYXRlRGV2aWNlcyhmdW5jdGlvbihuKXt2YXIgYT1EYXRlLm5vdygpO2Zvcih2YXIgciBpbiBuLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49ZS5kZXZpY2VzSGlzdG9yeVt0LmRldmljZUlkXTtpZigobj9uLnN0YXRlOmUuZGV2aWNlU3RhdGVzLklOQUNUSVZFKSE9ZS5kZXZpY2VTdGF0ZXMuQUNUSVZFKXt2YXIgcj1ufHx7aW5pdEF0OmF9O3IuZGV2aWNlPXQsci5zdGF0ZT1lLmRldmljZVN0YXRlcy5BQ1RJVkUsaS5wdXNoKHIpLGUuZGV2aWNlc0hpc3RvcnlbdC5kZXZpY2VJZF09cn1lLmRldmljZXNIaXN0b3J5W3QuZGV2aWNlSWRdLmxhc3RSZWxvYWRBdD1hfSksZS5kZXZpY2VzSGlzdG9yeSl7dmFyIHM9ZS5kZXZpY2VzSGlzdG9yeVtyXTtzJiZzLnN0YXRlPT1lLmRldmljZVN0YXRlcy5BQ1RJVkUmJnMubGFzdFJlbG9hZEF0IT09YSYmKHMuc3RhdGU9ZS5kZXZpY2VTdGF0ZXMuSU5BQ1RJVkUsaS5wdXNoKHMpKSxzLmxhc3RSZWxvYWRBdD1hfWUuc3RhdGU9PWUuc3RhdGVzLklOSVRFRCYmaS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPVMoKSh7fSx0KTtzd2l0Y2godC5kZXZpY2Uua2luZCl7Y2FzZVwiYXVkaW9pbnB1dFwiOm4udHlwZT1cInJlY29yZGluZ0RldmljZUNoYW5nZWRcIjticmVhaztjYXNlXCJhdWRpb291dHB1dFwiOm4udHlwZT1cInBsYXlvdXREZXZpY2VDaGFuZ2VkXCI7YnJlYWs7Y2FzZVwidmlkZW9pbnB1dFwiOm4udHlwZT1cImNhbWVyYUNoYW5nZWRcIjticmVhaztkZWZhdWx0Om8uZGVmYXVsdC53YXJuaW5nKFwiVW5rbm93biBkZXZpY2UgY2hhbmdlXCIsbiksbi50eXBlPVwidW5rbm93bkRldmljZUNoYW5nZWRcIn1lLmRpc3BhdGNoRXZlbnQobil9KSx0JiZ0KCl9LG4pfSxlLmdldERldmljZUJ5SWQ9ZnVuY3Rpb24odCxuLGkpe2UuZ2V0RGV2aWNlcyhmdW5jdGlvbihlKXtmb3IodmFyIGE9MDthPGUubGVuZ3RoO2ErKyl7dmFyIHI9ZVthXTtpZihyJiZyLmRldmljZUlkPT09dClyZXR1cm4gbiYmbihyKX1yZXR1cm4gaSYmaSgpfSl9LGUuc2VhcmNoRGV2aWNlTmFtZUJ5SWQ9ZnVuY3Rpb24odCl7dmFyIG49ZS5kZXZpY2VzSGlzdG9yeVt0XTtyZXR1cm4gbj9uLmRldmljZS5sYWJlbHx8bi5kZXZpY2UuZGV2aWNlSWQ6bnVsbH0sZS5nZXREZXZpY2VzPWZ1bmN0aW9uKHQsbil7ZS5fZW51bWVyYXRlRGV2aWNlcyh0LGZ1bmN0aW9uKGUpe24mJm4oZS5uYW1lK1wiOiBcIitlLm1lc3NhZ2UpfSl9LGUuZ2V0VmlkZW9DYW1lcmFJZEJ5TGFiZWw9ZnVuY3Rpb24odCxuLGkpe2UuZ2V0Q2FtZXJhcyhmdW5jdGlvbihlKXt2YXIgYT0hMCxyPSExLG89dm9pZCAwO3RyeXtmb3IodmFyIHMsYz1lW1N5bWJvbC5pdGVyYXRvcl0oKTshKGE9KHM9Yy5uZXh0KCkpLmRvbmUpO2E9ITApe3ZhciBkPXMudmFsdWU7aWYoZC5sYWJlbD09PXQpcmV0dXJuIG4mJm4oZC5kZXZpY2VJZCl9fWNhdGNoKGUpe3I9ITAsbz1lfWZpbmFsbHl7dHJ5e2F8fG51bGw9PWMucmV0dXJufHxjLnJldHVybigpfWZpbmFsbHl7aWYocil0aHJvdyBvfX1yZXR1cm4gaSYmaShWLk5PVF9GSU5EX0RFVklDRV9CWV9MQUJFTCl9LGkpfSxlLmdldFJlY29yZGluZ0RldmljZXM9ZnVuY3Rpb24odCxuKXtyZXR1cm4gZS5fZW51bWVyYXRlRGV2aWNlcyhmdW5jdGlvbihlKXt2YXIgbj1lLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm5cImF1ZGlvaW5wdXRcIj09ZS5raW5kfSk7dCYmdChuKX0sZnVuY3Rpb24oZSl7biYmbihlKX0pfSxlLmdldFBsYXlvdXREZXZpY2VzPWZ1bmN0aW9uKHQsbil7cmV0dXJuIGUuX2VudW1lcmF0ZURldmljZXMoZnVuY3Rpb24oZSl7dmFyIG49ZS5maWx0ZXIoZnVuY3Rpb24oZSl7cmV0dXJuXCJhdWRpb291dHB1dFwiPT1lLmtpbmR9KTt0JiZ0KG4pfSxmdW5jdGlvbihlKXtuJiZuKGUpfSl9LGUuZ2V0Q2FtZXJhcz1mdW5jdGlvbih0LG4pe3JldHVybiBlLl9lbnVtZXJhdGVEZXZpY2VzKGZ1bmN0aW9uKGUpe3ZhciBuPWUuZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9pbnB1dFwiPT1lLmtpbmR9KTt0JiZ0KG4pfSxmdW5jdGlvbihlKXtuJiZuKGUpfSl9LGUuX2luaXQoZnVuY3Rpb24oKXtuYXZpZ2F0b3IubWVkaWFEZXZpY2VzJiZuYXZpZ2F0b3IubWVkaWFEZXZpY2VzLmFkZEV2ZW50TGlzdGVuZXImJm5hdmlnYXRvci5tZWRpYURldmljZXMuYWRkRXZlbnRMaXN0ZW5lcihcImRldmljZWNoYW5nZVwiLGZ1bmN0aW9uKCl7ZS5fcmVsb2FkRGV2aWNlc0luZm8oKX0pLGUuZGV2aWNlUmVsb2FkVGltZXI9c2V0SW50ZXJ2YWwoZS5fcmVsb2FkRGV2aWNlc0luZm8sNWUzKX0pLGV9LHJlPWEoMSksb2U9YSgxNCk7dmFyIHNlPWEoNiksY2U9YS5uKHNlKSxkZT1hKDExKSx1ZT1hLm4oZGUpLGxlPWEoMTcpLHBlPWEubihsZSksZmU9YSgxOCksbWU9YS5uKGZlKSxnZT01LHZlPVszMSwyMjIsMjM5LDE1OSwxOTIsMjM2LDE2NCw4MSw1NCwyMjcsMTc2LDE0OSwyLDI0Nyw3NSwxNDEsMTgzLDU0LDIxMywyMTYsMTU4LDkyLDExMSw0OSwyMjgsMTExLDE1MCw2LDEzNSw3OSwzNSwyMTIsNCwxNTUsMjAwLDE2OCwzNywxMDcsMjQzLDExMCwxNDQsMTc5LDUxLDgxLDU1LDc4LDIyMywyNDIsMTkxLDIxMSw3NCwxMTksMjAzLDE1MSwxNDIsNjIsMzEsNDEsMTMyLDIyLDM1LDE1NSw4NywxMjMsMTE5LDExNywyMTYsNTcsMjAxLDUzLDIyOCw2NywyMDEsNDAsMTA2LDI0LDgwLDE3NiwxODcsMjUzLDYwLDYzLDEzNiwxMDAsMjAsMTIsMTc3LDk5LDY0LDM4LDEwMSwxNDMsMTExLDE3NiwyNTEsMjExLDE0NSwxMzYsMzQsMjMsNzksMTM2LDIwMiw5NSwxMDUsMTk5LDEyNSw2NywxODAsNDQsMjEwLDE3OSwyMjgsNCw4NSwxNjAsMTg4LDY0LDI2LDQ2LDYsNjEsMjAxLDEwMywyNDgsMTgsOTcsMjU0LDE0MCwzNiwxMTUsMTA2LDQ4LDEyNCwxMDIsMjE2LDE1NSwxMjAsMzYsMjI3LDE2NSwyMTcsNywyMjcsMTkxLDEyOCwyMTIsMTU3LDgwLDM3LDExNywxNzUsMjQsMjE0LDQ3LDIyMSwxODMsMjExLDUxLDE3NCwyNTEsMjIzLDE1OSwxNjcsMTUyLDUzLDM2LDEwNywxOTksMjIzLDkxLDYyLDQ2LDE5NCwxMSw4MCwxMjEsMTg4LDIxOSwyLDk5LDk5LDIzMiwyMjksMTczLDIzNCwyMSwzMCwyMzYsMTc3LDI0MywxNDIsOTcsNDgsMTA4LDU2LDYyLDE3Miw1NiwyMTYsMyw0Miw3OSwxMzgsMjMsODgsMTgyLDM5LDUsMTE4LDY4LDEzNSwxNzgsNTYsOSw5NCwxODksNDQsMTA0LDksMjM4LDIzMSwxNzQsMTIyLDg1LDI0NywyMzEsODYsNzQsOCwxODksMTQ3LDIxOCwxODAsNTgsNzYsMjI3LDE3LDQ2LDkwLDE5NCwxMDAsNTEsMTc4LDcyLDE2MywxNTEsMjQzLDE2NiwxMzAsODUsMSwyMjMsMTMwLDE1MiwyNDIsODUsMjU1LDI4LDE3Myw5NywyNTIsMTE5LDIxNSwxNzcsMTE5LDg2LDEwNCwxMzYsODIsNDAsNzIsNTMsMTEsMTgsMjYsMjQwLDE4OCw3NiwxMTAsMzksMzEsMTg5XTtmdW5jdGlvbiBoZShlKXtmb3IodmFyIHQ9bmV3IFVpbnQ4QXJyYXkoWzk5LDExNCwxMjEsMTEyLDExNiwxMDUsMTA1XSksbj10Lmxlbmd0aCxpPWUsYT1pLmxlbmd0aCxyPW5ldyBVaW50OEFycmF5KGEpLG89bmV3IFVpbnQ4QXJyYXkoMjU2KSxzPTA7czwyNTY7cysrKW9bc109cztmb3IodmFyIGM9MCxkPTA7ZDwyNTY7ZCsrKXt2YXIgdT1bb1tjPShjK29bZF0rdFtkJW5dKSUyNTZdLG9bZF1dO29bZF09dVswXSxvW2NdPXVbMV19dmFyIGwscD0wO2M9MDtmb3IodmFyIGY9MDtmPDArYTtmKyspe3ZhciBtPVtvW2M9KGMrb1twPShwKzEpJTI1Nl0pJTI1Nl0sb1twXV07b1twXT1tWzBdLG9bY109bVsxXSxsPW9bKG9bcF0rb1tjXSklMjU2XSxmPj0wJiYocltmLTBdPWlbZi0wXV5sKX12YXIgZz1TdHJpbmcuZnJvbUNoYXJDb2RlLmFwcGx5KG51bGwscik7cmV0dXJuIEZ1bmN0aW9uKFwidmFyIHdpblNpemUgPSBcIitnZStcIjsgcmV0dXJuIGBcIitnK1wiYFwiKSgpfWZ1bmN0aW9uIFNlKGUsdCl7dmFyIG49aGUodCksaT1tZS5hLmNyZWF0ZVByb2dyYW1Gcm9tU291cmNlcyhlLFtoZSh2ZSksbl0pLGE9ZS5nZXRBdHRyaWJMb2NhdGlvbihpLFwiYV9wb3NpdGlvblwiKSxyPWUuY3JlYXRlQnVmZmVyKCk7ZS5iaW5kQnVmZmVyKGUuQVJSQVlfQlVGRkVSLHIpLGUuYnVmZmVyRGF0YShlLkFSUkFZX0JVRkZFUixuZXcgRmxvYXQzMkFycmF5KFswLDAsMSwwLDAsMSwwLDEsMSwwLDEsMV0pLGUuU1RBVElDX0RSQVcpLGUuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkoYSk7dmFyIG89MixzPWUuRkxPQVQsYz0hMSxkPTAsdT0wO2UudmVydGV4QXR0cmliUG9pbnRlcihhLG8scyxjLGQsdSk7dmFyIGw9ZS5nZXRBdHRyaWJMb2NhdGlvbihpLFwiYV90ZXhDb29yZFwiKSxwPWUuY3JlYXRlQnVmZmVyKCk7ZS5iaW5kQnVmZmVyKGUuQVJSQVlfQlVGRkVSLHApLGUuYnVmZmVyRGF0YShlLkFSUkFZX0JVRkZFUixuZXcgRmxvYXQzMkFycmF5KFswLDAsMSwwLDAsMSwwLDEsMSwwLDEsMV0pLGUuU1RBVElDX0RSQVcpLGUuZW5hYmxlVmVydGV4QXR0cmliQXJyYXkobCk7bz0yLHM9ZS5GTE9BVCxjPSExLGQ9MCx1PTA7cmV0dXJuIGUudmVydGV4QXR0cmliUG9pbnRlcihsLG8scyxjLGQsdSksaX12YXIgX2U9WzExLDE5NiwyNDIsMTM5LDE5OCwyNTIsMTg4LDUsNTksMTcwLDE2MSwxNTIsMTcsMjI5LDI0LDE0MSwxMzMsNTQsMjE0LDIwNiwxMzMsMjYsNjYsMTI2LDI1NSwxMSwyNDUsMTAsMTQ2LDkyLDUyLDEzNCwxMDgsMTUyLDIyMSwxOTEsMTI0LDExNiwyNDgsMTA2LDEzMCwyNTEsNTksMTA1LDQzLDkxLDEzNSwxOTksMTgxLDIyMywxMCw1MSwxMzQsMTk0LDI0MCw0Niw5LDMsMTQxLDIyLDM1LDE0Niw3NiwyMywxMDksMTE3LDIwOCw0MSwyMDEsNDUsMjE4LDc2LDIwMywxMDUsNTEsNTgsOTcsMTU0LDE0NSwyMzYsNDksMTgsMTgzLDEyNywyNywxMiwyMTAsMTIyLDczLDQyLDM3LDE0MywzNiwyMDcsMjUxLDIxMSwxNDUsMTkxLDU2LDEwLDg4LDIyMiwxODEsMTI1LDIyLDIzOCwxMjMsNzEsMTc3LDEwNywyMTgsMjU0LDE3MywyOCwzNCwyNTMsMjQ5LDY3LDgzLDk3LDczLDExMSwyMTksNDMsMTgxLDgyLDM4LDIzMCwxMzYsMTA5LDIyLDY3XTtmdW5jdGlvbiBFZShlLHQsbil7dmFyIGk9ZS5nbDt0aGlzLnByb2dyYW09U2UoaSxfZSksdGhpcy5zZXRVbmlmb3Jtcz1mdW5jdGlvbigpe2kuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfaW1hZ2VcIik7dmFyIGU9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9mbGlwWVwiKTtpLnVuaWZvcm0xZihlLDEpfX12YXIgSWU9WzExLDE5NiwyNDIsMTM5LDE5OCwyNTIsMTg4LDUsNTksMTcwLDE2MSwxNTIsMTcsMjI5LDI0LDE0MSwxMzMsNTQsMjE0LDIwNiwxMzMsMjYsNjYsMTI2LDI1NSwxMSwyNDUsMTAsMTQ2LDkyLDUyLDEzNCwxMDgsMTU1LDIxMCwxNjQsOTksMTE0LDIyOCw5NiwxMzAsMjUxLDU5LDEwNSw0Myw5MSwxMzUsMTk5LDE4MSwyMjMsMTAsNTEsMTMzLDE5NCwyNDcsMzQsMzEsMzksMTQyLDI4LDIsMTMwLDE4LDEwOSw4NCwxMjQsMjIzLDYyLDE0MCw1MiwxMjgsNDcsMjA4LDQ3LDExNSwzOSw0LDIwMCwyMjAsMTcxLDUzLDM2LDE1MCwxMDEsMTAsNzUsMjQ3LDEyMSw3NCwzNiwzNSwxNDMsMTA4LDE3NiwyMzUsMjExLDEzNSwxNjQsMzYsMTEsODgsMTYwLDE0OCwzNSw2LDIyMSw0MSwzMiwxNjYsMTA5LDIwNSwxNzEsMjI4LDQsMjYsMTY5LDI0NCw4MiwxMTksMTAyLDg2LDYxLDIwMSwxMDMsMjQ4LDE4LDk3LDI0MiwxODIsMzQsMTIxLDcwLDI4LDcxLDEyNiwxOTcsMjIzLDEyNiwxNCwyNDQsMTQ5LDE5MiwxMiwxNzYsMTg3LDE0OSwyMTIsMTU2LDIyLDQ0LDM2LDEzMywxMCwyMTYsNjMsMTk4LDIxMywxNTQsMTE2LDIzMCwyNTMsMTU0LDE1NCwyNDksMjE1LDU1LDYwLDM0LDE5NiwyMjksNzYsNTAsNDQsMTM1LDIyLDc3LDExMywyNDcsMTQyLDk0LDYwLDIzLDE3MiwxNDUsMTc1LDIxOCw4MSw4NiwxNjIsMjM5LDE4MCwyMDUsNjMsMTE4LDMsMTEwLDEyMywyMjQsMTI3LDE1OCwxMjQsMTUsMTI3LDE1NywyNyw2NiwxNzYsMzMsMjQsNTEsNTMsMTk0LDE3OCw1Niw2LDc0LDE5MSwxMTEsNTEsNzgsMTc0LDE1NywyMjksMTcsMjIsMTc4LDIzMSw5MiwyNSwyMywxOTEsMTU3LDEzNywxODgsNTQsNjQsMTc2LDEzLDIyLDgxLDIwNyw0NSwxMDgsMjAzLDgzLDE4NiwxMzAsMjM3LDE4NiwxNTMsMTEwLDgsMTk2LDE2OCwxNTIsMTYxLDI4LDIzOCw0NiwxODQsMzYsMTg1LDIwLDIwMywxODMsOTgsOTUsNDEsMTQ5LDkzLDEwNSwzNywxMTYsOTEsNjgsMTA1LDE2NCwyMTcsMzAsNDIsNjAsNTMsMTczLDIxMywxNzcsMjE2LDE5NSw1MywyMDQsMTczLDEyOCwyNDMsNDIsMTIyLDIwNSw2NSw5NywxMjksMTk0LDY4LDIxOCw5MSwxNDEsMTEsMjI0LDEyNCwxMzIsMTM4LDExOSwzNiwyMjAsMTYxLDM5LDIxNCwxNDYsMTgzLDE5MywyMjUsMjMsMTc3LDIwMSwyNDMsMTI4LDE2MCwzMyw3NSw4NiwxMjYsMTM5LDI1NCwyMzIsMTQsMTMsODUsMiwxMTIsMTcsMTUwLDM2LDE4MCw4NiwyMjYsMjI1LDEyNiwxOTcsMTcsMjI4LDIyNSwxNDIsMjQ1LDM3LDE3MCwzOSw5NiwxODcsMTkwLDIsMzUsODUsMjM3LDExLDE4OSwxLDc5LDIzNywyLDEsMTE0LDI0NiwxMDksMTkwLDY2LDU0LDE1Myw0MywyMTgsMjA0LDcwLDYsMjA0LDE2MiwyNDcsMTgsMTMwLDEyMywzMCw2MCwxNjUsMTMwLDE0MiwyMTAsMTMzLDkxLDEyNywxMTcsNzEsMzgsMTQ1LDE3Miw3LDUsMTYsMjIwLDIyMiwxMTEsOTgsMTQxLDIzOSwyMDgsMTI1LDI2LDIzOCwyOCwwLDIxNiw4OSwxMyw3LDExOSwxMzQsMTk0LDc1LDQxLDY3LDE3NCwxLDIxNyw4MCwxMDEsNDAsMjYsNTksMjgsNTksNDYsMTA4LDEzOCwzOCwxNTcsMTY3LDI4LDIzNCw3MywxNzcsNDIsNDIsMTAyLDEwOCwyNiwxODEsMjcsMTc4LDQyLDQzLDUyLDI4LDExMCwxMTcsMTk4LDE3MywxNzYsMTc4LDEwMSwyMjUsMTUwLDM2LDEzOSwxMDgsMTA1LDEwLDIzNywyMjIsMywxNDMsMTI2LDE4LDE0NCwxMTUsNzQsNTYsMTE0LDEzNCwyMzEsMTU5LDIxMiw2MiwxMjYsODAsMTczLDIxNiwxNjcsNCw4MSwxOCw1MiwxNywxNDQsMjE4LDMyLDEzOSwyMDcsMTA0LDEyOCwyMjksOTksODQsMTIwLDMxLDg3LDIyNywxNTQsOTEsMTk2LDYzLDEyMywxMTEsMTI1LDM2LDUyLDU3LDE2OCwxMTMsMTUwLDE4OSwyMDQsMjQsMTA0LDE5NiwyMzcsODYsMTYzLDY4LDE5NywyMDIsMTcwLDIxMiwxOTEsODEsMTkzLDExMSwyNTUsMTYyLDE4MSwyMDIsMTU2LDE0NiwxOTYsOTYsMTYsMTE4LDExNyw1NSw3MSwxNTYsMzEsMTYzLDI0MiwyMDQsMjM5LDExLDE1MCwyNywxMjYsMTE1LDE1NCwxMDcsMjQ3LDEzNCwxNTgsMTI1LDI1NSwxNDYsMzUsMTgzLDIwOSwzNiwxMTYsODcsMjE1LDE3Miw1LDI1MSwxMzMsMTE0LDI1NCwxNDEsMTk1LDYsMTQ1LDQsMTExLDE4MiwxNjcsNzQsMTU0LDE1Miw2OCwxOCwxNDYsODgsMTA2LDIwMCwxNTQsMTUsMTc2LDk0LDg2LDY2LDE3OCwxMDEsMjE5LDM1LDE4OCwxMjksNjYsMjgsNDEsMTEwLDE3NCw1Myw4OCwxNzQsNjQsMTkxLDIwNiwxMjcsNDgsMTI2LDIxNCwyMTYsOTMsMTE5LDIsMTY2LDk5LDE4MSwyMjIsMjksMjE4LDI4LDE5NSwyMTksMTI1LDQ0LDUwLDE2LDk5LDE3NCwyMjUsNTEsMTMzLDEyMCwxODQsMTU5LDE2OCw3NSwyNDIsMTYyLDEyNCwyNTUsODEsMjUsMTUzLDEwOSw2OSwyMjAsMTc2LDQsMjM3LDE5NiwyMzMsMTksOCwyNDAsMTYwLDM5LDEyMiw4MSwyOSwxODgsMTQ0LDI0OSwxNzAsMTc0LDEzNywzMCwxMCw5MywxMzMsMTUxLDE5OSwyNDgsMTc1LDM4LDQxLDE0NCwyMjksMjQ1LDE0OSwyNSwyNDAsMTM4LDE3OSwxMTQsMTgyLDg0LDUwLDEwMyw5NSwzMSwxOTksMzEsODcsMjA4LDIwMywxOTksMTM1LDQ5LDIxMSw0Myw1MiwzNiw3NCw1OSwzNywyMiwxMzYsMTcxLDI0NCwxMjYsMTgsMjUxLDM5LDE1OSwyNDEsNjYsMjA2LDEyNywxNDksMTU5LDE4MiwxNDMsMjMyLDE5OSwxMzYsNDYsMTUwLDMyLDUxLDIyMSw3NCwyMiwxMDIsOTMsMjIsNDQsMTMyLDE0MCwxOTksNDMsNjksMjQ5LDc3LDc1LDE0MCw3MCw0LDI1Miw5OCwyMzUsNzcsMTkwLDEyNSwxOCw1NiwyMSwxMCwyNDQsNDIsMiwyNDYsNjIsMTI3LDI0MSwxMjMsMTM3LDIyLDI0NywyMTksMTc3LDE2MCw4NCwxOCwxMCw4NCw5NywyNTEsMTI3LDEwMiwxNiwyMDksMTgxLDEwMCw5NCw1NiwyMzgsMjA5LDIwNyw3NiwxODksOTUsMTUsMTY1LDEzOSwxNDMsMTg5LDk2LDIyNSw1NSwxMTIsMTc4LDI3LDIxOCwxOTgsMjIzLDI1MSw1MiwxMjMsOTQsMTMwLDIyMCwxNDIsMjE2LDExNiwyMzcsMTgsMjU0LDQ5LDU5LDEyOCw0MSwyOSwxNSwxNzksMTY0LDg1LDc2LDE2NywxNjYsMTUxLDM5LDIyMSwyLDE5MCw2OCwxNjcsMjYsMTc3LDExNCwxNDEsNCw2NywyNSw2OSwxODIsMzgsMTY2LDE2MCwyNywxNTEsMTQ4LDEwOCw0OCwyMjcsNjAsMTEyLDQ4LDIyLDE1OSw3NiwxMjcsMjUxLDYzLDI1NCwxNzcsMTEzLDIxNywxOTcsOTUsMTc5LDEwOSwxMjgsMTM4LDk5LDI3LDI0OSwxMCwxNzQsMTU1LDEyOSw4MCwzOSwxNjUsMjUyLDg1LDYwLDEzMSwxODMsOTgsMTA3LDY4LDIwNywxOSwyMzMsMjMxLDU1LDIyNSwxMjYsNzcsNDksNTMsMTQ1LDIwMywxMTMsMjksMjA4LDY0LDIzNywxODIsMjI5LDE2NSw3LDExLDE2OSwxMDYsMjUzLDExNiwxNDEsMjAwLDYyLDE2LDM4LDEyMSw1NSwxNDgsOTEsODMsMTYwLDE0MCwxMjYsMTIxLDEyLDc5LDE4OSw3MiwxNzIsMzEsMjQzLDI0MCwyMDksMjI5LDMyLDIyMCw5MSwyMjksODEsOTQsMjQ3LDEyMSwxNTMsMTUxLDIzMiwxODIsMTcxLDE5OCw1MCwzMSwxNTIsMjQ1LDE3MiwxNTEsMTMwLDU1LDYyLDEyNSwzOCwxNTUsMjI5LDc4LDIwNywxNDgsMjAxLDIsNzgsNjMsMTE5LDEwNywxNjgsNzgsMTM5LDE0MSwxNjMsMTc3LDE5MSwyMzksMTQxLDM5LDE4MiwxNzQsNDAsNzYsMjI2LDYyLDEyNSwyMDksNiw2LDM0LDM3LDE0Nyw4NSwyMDQsMTAzLDUxLDE5MSwzNiwyNDgsMTcsMTc1LDIwLDEsNTMsMTYsMzUsMTQzLDIzNywxNzcsMTI1LDg2LDI5LDIxOSwyMzUsMjAsMTIxLDIwNSw1OSw1LDI1MCwxMDcsMTA5LDMyLDIyNCwzMCwxNTIsMTQzLDExMywxNTEsOTUsODUsMTksMjU0LDE2NCwxMzUsMTI0LDY4LDEzNiwxOTksMjksMzEsMjQ0LDkxLDEwLDg0LDEyNywxMDEsMjEwLDcwLDIyNiwxOTUsMTQwLDcwLDE2Niw1NCwyMTcsMTY1LDg0LDQyLDE2NSwxNzUsMTAwLDIzNCwxMjQsMTIxLDEwNSw1MywxMDEsMTE4LDE3NCwxMDEsMjIwLDE0Nyw2OCwxNjEsMzcsMCwxODIsMjIwLDE0MiwyMjEsMTU1LDIzMCwxMTUsMTY0LDEwLDIxNCwyMDgsMTIwLDkxLDE1Miw2NiwyNyw4MSwxODQsNDgsODQsNzAsNywxMjgsMTUzLDIxNywyMTgsMjQ5LDIyNiw3MCwxMzAsMjAwLDE1Niw2MSwyMjcsMjEsMTY0LDEzNywxOTMsMjIxLDExOSwxMCwxMzQsMjA0LDIzLDIwLDE3LDkwLDk0LDEwNSwyMDQsMzksOTksMSw2NCwxNTMsNDUsMjEzLDE5LDI0Nyw5NywxOTQsNDksMzUsMTI1LDI1NSwxOTUsMTM5LDYzLDIwOSwxNzUsMjA4LDE0NywxODksMjQ0LDIwNCwyNCwyMTEsOTksMTQyLDE4LDkyLDEzMCwyNTQsMTgyLDIzMSwyMzUsOTMsMTAsMTI3LDE3NSw4NywzNSw2MiwxMTAsMTM3LDE4NCwzOSwxMTQsMjAwLDE1MCwxMSwxOTAsNDAsMTYyLDE2OCwyMjMsMjAzLDExMCwyNDIsMTkyLDIzNCwyNiwxMSw1NCwxNTUsMzgsNDgsNzksMTA5LDEwMSwxMTksMTY1LDE4NywyMjMsNSwyMCwxNjgsMTcxLDI0MSwyMCwyNDMsMTA4LDE5OSwzLDE1NSw2OSwyNDQsMTQ5LDAsMTg3LDExMCwxMiwyMzMsNDIsMTUxLDE4OSwxMzksMTMzLDEwNCwzLDMwLDE2LDIwMCw2OSw0LDEyMywxMDMsMTQ0LDEyLDEwNiwxODIsMSwxMjcsOTEsMTI1LDE1OCwxMiwxNDQsMjM4LDIzMiwyMDksMTAxLDE1OSw1NiwxNjMsMjQwLDE3OSw1MCwxNjksMTIwLDIxOSwxNzYsODcsNzcsNDUsMjQ3LDE1MywxOTAsODIsMTMyLDUwLDEzNywyMDksOTcsMTksMzUsMjQ3LDE2MSw2Miw3NywxNiw3MSwxNTIsNzIsNjEsNTAsOTksMTU3LDE1NCw1Niw1OCwxNzUsMjcsNzMsMTIxLDIyOSwxOTUsMjI4LDEzMiw2OSwyMzMsMTY5LDEwMCwyMSwxMjMsMTcsMywxNjQsNiwxNDYsMTA2LDE5NiwyOSwzLDI1MCwyMTcsMTY0LDIzLDE3MSwyMDMsMTQsMjQyLDIzOSwyNDksMTY5LDExNiwxMzgsMjA5LDk4LDExMywxODEsMTIyLDM1LDE2MiwyMTYsNDYsMjMwLDQsMTU1LDE0MiwxMTgsMjE2LDIzMiwyMjksMjgsMTIsMTU4LDE1MywxMjYsMTQ5LDE3MSwxNzIsMjMxLDk5LDIxMSw1NywxMTQsMTM2LDE4MywxMTQsNzQsMzUsMjMzLDExNSwxMjcsMjUzLDE1NywzOCw0OSwxMzYsMTQxLDI1LDE2MSwyNTUsMjMyLDExMCwxMDEsMjA4LDE2NiwxODYsMjI2LDEyLDE4NSwxOSwxNTUsNTMsOTMsMTU1LDM5LDE2MSw3LDEyNCwyMTMsNTIsMjIzLDEyNSwyMTEsMjQyLDI1MywyMiwxMywxMzEsMTE1LDE2NywxOTgsMTg4LDkwLDIwOSw2MywyMjQsOTIsMTEyLDExOCwyMjAsMTY1LDMxLDE2NCw0Myw1OCwxOTcsNzcsMTcsMjQ3LDc3LDE2NCw3NCw3NywyMTgsMTgsMTg3LDQxLDc2LDE4OSwxMjcsOTgsMTgsMjI2LDIzMSw3MSwxMTUsMjM2LDY4LDE4MywxMTEsNTAsMTY4LDg4LDI0Nyw5LDEyMyw2NSwxODAsODgsNzQsNDQsMTAxLDEwMSwxNzMsMTFdO2Z1bmN0aW9uIHllKGUsdCxuKXt2YXIgaT1lLmdsLGE9MS90LHI9MS9uLG89NTt0aGlzLnByb2dyYW09U2UoaSxJZSksdGhpcy5zZXRVbmlmb3Jtcz1mdW5jdGlvbigpe2kuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfaW1hZ2VcIik7dmFyIGU9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9mbGlwWVwiKSx0PWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfc2luZ2xlU3RlcE9mZnNldFwiKSxuPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfZGVub2lzZUxldmVsXCIpO2kudW5pZm9ybTJmKHQsYSxyKSxpLnVuaWZvcm0xZihuLG8pLGkudW5pZm9ybTFmKGUsMSl9LHRoaXMuc2V0UGFyYW1ldGVycz1mdW5jdGlvbihlKXt2b2lkIDAhPT1lLmRlbm9pc2VMZXZlbCYmKG89ZS5kZW5vaXNlTGV2ZWwpfSx0aGlzLnNldFNpemU9ZnVuY3Rpb24oZSx0KXthPTEvZSxyPTEvdH19dmFyIFRlPVsxMSwxOTYsMjQyLDEzOSwxOTgsMjUyLDE4OCw1LDMyLDE2MiwxNzEsMTI4LDEzLDE2MCwyNSwyMjIsMTcyLDEwMiwyMDcsMjQ0LDE1OCw2OSwxMDMsNTcsMjM5LDExMSwxNTAsMTgsMTU3LDgyLDU1LDIxMCwyMCwxMzEsMTU2LDE2NSwxMDgsMTIyLDI1NCwxMjUsMTMwLDIyOSw1NSwxMDksMTEzLDExLDIxMCwyMzgsMTYzLDIxMyw4NiwxMTYsMTU2LDI0OCwyMTUsNjMsMjAsNDgsMTczLDMxLDU1LDEzMywxOCwxMDUsMzIsMTYsMjA0LDM1LDEyOCwzOCwyMTIsODcsMjAwLDk3LDExNCw0MCwxMiwyMTAsMTkzLDE3MSw1OSwzMywxNTgsMTA4LDE0LDc1LDIyOCw3NCw2NSwzMiw1NywxOTIsMTEyLDE1NiwyMzQsMjUwLDE0MCwxODksNDAsMjAsNiwyMzAsMTM1LDUyLDE3LDIwMCwxMjMsNjgsMTgzLDQ0LDIxNSwxODcsMjM0LDIsMTMsMTY5LDIzNCw5NCwxMTUsNjAsNiwxMDcsMjI0LDExOCwyNTQsODgsMiwyMzUsMTM0LDM2LDEyMCw1LDg1LDk0LDEyNiwyMjIsMjIzLDEwMSwxMDUsMjI3LDE0NywxOTksNjQsMTg1LDI0NiwxNDMsMTgzLDIxMCwzMCwzNywxMjcsMjI2LDc5LDE1NiwxMTgsMTQ3LDIwOCwxMzEsNTEsMjQ4LDIzMiwyMTcsMjA2LDE4MSwyMTgsNTgsNjEsMTEyLDI0NCwyMjcsNjgsNDUsNDEsMjA2LDY5LDEyLDQ1LDE2MywyMDUsNzUsNiwyMywxNjcsMTQ1LDI1MCwyMzcsOTIsODQsMTY0LDI0MCwyNTMsMjE2LDU0LDg1LDcsMTA4LDYyLDI1NSw0MiwyMTcsMywyNywwLDE5Niw5NCwyOCwyNDEsMTIwLDgwLDkyLDg5LDEzNSwyMjgsMTI1LDIsMywyNDIsMzksMTE2LDY0LDI0OCwyMTYsMTc3LDEyMiw2NiwxNzgsMTgwLDksNywzMywxODYsMjA4LDIxMywxODgsNTksNzgsMjQzLDk1LDEyMywyOCwxNDIsNDUsOTksMTMwLDcsMTY3LDE5NCwxNTYsMjM4LDE5OSwxMCw3MSwxNDEsMjUxLDIyMSwxNTgsMTYsMjU1LDM4LDE4MSwzNiwxODQsMjAsMTM2LDI0MCw1NSwyNyw1MSwxOTEsODIsMTA1LDU1LDk3LDc4LDc0LDEyMSwxOTEsMTYxLDkxLDEyNiwxMDUsMTAzLDE3NCwxMzksMjIzLDE0NSwxNTAsMTIwLDE1NiwyNDAsMjUyLDE4MiwxMDUsMTA0LDIwNSw2NSw5NywxMjksMTk0LDY4LDIxOCw5MSwxNDEsMTEsMjI0LDEyNCwxMzIsMTM4LDExOSwzNiwyMDEsMjExLDM5LDIwMywxNDYsMjI1LDI0NiwyNTIsMjEsMTYxLDI1MCwxODgsMTM3LDE5MCw0Miw0LDkwLDEyNiwyMTEsMTcxLDI0MCwxMTMsNjcsMjgsOTIsNTcsNzcsMjAwLDEyNSwyMjQsMTksMTc4LDE0MiwxMTIsMjAyLDUsMjMzLDIyOSwxMjgsMjM1LDEwNSwyMzksMTAyLDUyLDE3OSwyMjQsODcsNDUsNjgsMjExLDEwLDE4Nyw5LDM4LDE5MCw4NiwyNSw0MywxNzUsNTYsMjMxLDExLDEwOCwyMjAsMzYsMTI5LDEzMSwxOSw5MywxNjMsMjM5LDE2OSwxMTgsMjA1LDUwLDc3LDEyMSwxMzksMTM5LDE0MSwxOTcsMTcwLDIwLDQ0LDM5LDE5LDk3LDIwNSwyMjgsOCwxMDYsNjcsMjEwLDEzNSwxMTEsMTI3LDE0MSwxODUsMTc1LDEyMywyNiwyMjYsNDIsMjksMjE3LDE2LDk5LDksNDYsMTU3LDIzMiwyMiwzLDEwNSwxNzQsNzMsMTQ0LDIzLDExMCw1NSw4NCw0Niw0LDExNiwzOSwxMTMsMjA1LDU4LDE1OCwyNDIsNywyMDgsNzUsMTYyLDU1LDExNSwzNSw1MiwxMjQsMjM1LDExNCwxNzgsNTUsNDMsOTgsMTcsMTAwLDMzLDEzNCwyMzcsMTkwLDIzMCw2MCwxODQsMTkyLDEwNCwxNDYsNTIsNTgsNzksMTc0LDE4MCw4MSwxNTUsMTE0LDAsMTUzLDExMyw5MCw1MSw4NiwxNTAsMjU0LDEzNiwyMDUsMTA0LDM5LDExLDE5MCwxODcsMjMzLDgwLDgxLDgxLDU2LDE4LDIyMiwxNDgsMTE2LDE1NSwxNTYsMzMsMTMyLDIyNiwxMjcsODQsMzQsODMsMjgsMjQ5LDE1MywxOCwxOTcsMTAsMTE2LDEwMiwxMjUsNDUsNDcsMzYsMjM1LDQ2LDIxMiwxNjYsMjA5LDMsMTI1LDEzMiwyMzcsMTI0LDE2Myw2OCwxOTcsMjAyLDIzMiwxNTIsMjM0LDc1LDIzNSwxMDMsMjQ4LDE2MCwyNDEsMjEzLDE1MSwxNDQsMTMwLDM3LDIzLDUxLDQ4LDU1LDEyLDIyNywzMSwxNjMsMjQyLDI1MSwyNDUsMjIsMTI5LDc3LDIwLDM1LDE1MCwyMCwxODEsMjAzLDEzOCw2OSwyMzMsMjE1LDEwOSwxNzgsMjA5LDUyLDg1LDk2LDIyMSwxNzksNTYsMjQ5LDEzOCwxMTEsMjUwLDE0MSwxMzQsOTUsMTUyLDkyLDEwOSwxODMsMTc0LDEwNCwxNTEsMTU2LDMxLDY2LDIxMSwxMCw1NywxNDEsMTY3LDE4LDE3NywyNywxMjYsNzQsMjUyLDI5LDE0MywxMjEsMTczLDIwMyw4LDI3LDQ0LDEyMywxNDgsNTcsODgsMTYzLDY4LDIyOCwxNTgsNjIsOTgsMTIxLDE5MiwyMjgsOTQsOTIsNzIsMjQxLDMzLDIzMCwxNzMsMCwxOTcsMSwxOTQsMTQ0LDExMSw5MSw2MCwwLDEwNiwxODEsMjAzLDUxLDEzMywxMjAsMjUwLDE1OCwxODQsOTMsMjE2LDE4NCwxMjYsMjUzLDIxLDIyLDE1NSw5OSw4MCwyMDUsMjI3LDY5LDIzMSwxNDEsMTY1LDcxLDcwLDI1MiwyMjMsMTA1LDUxLDkzLDIyLDE2NSwxMzUsMjMzLDE3NywxNjQsMTM5LDUzLDUsODUsMTUxLDEzNCwyMTQsMTY1LDI0OSwxMDAsMjQsMTg2LDIwNywyNDUsMTQ5LDY4LDIxOCwyMDQsMjUyLDMyLDE5MCw5MCw0OCw3Niw1NywzMSwyMDEsMTUsNTIsMTMwLDEzNSwxNTIsMjA2LDYzLDE5OCwxMDAsMTI2LDM2LDIsMTA0LDExNiwwLDE2MCwxNjMsMTg2LDIsOTEsMTY1LDU3LDE0OSwxNjMsMTIsMjM5LDEyMSwxNTIsMjA5LDIyNCwxMzYsMjQ4LDEzNSwxMzYsNDYsMTUwLDMyLDUxLDE1NCw2LDEwNSwwLDcxLDMwLDQ0LDE3NSwxNDcsMTM5LDM0LDkxLDE4NCw3OCwzMSwxNDUsMTgsMywyNTAsMTIyLDE2Niw0NywyNTIsMTA5LDE5LDQwLDEwLDEyMywxNjMsOTksNzYsMTMzLDExOSwzNywxODAsMzgsMjA3LDc5LDE3MSwxODUsMTg4XTtmdW5jdGlvbiBiZShlLHQsbil7dmFyIGk9ZS5nbCxhPTEvdCxyPTEvbixvPTU7dGhpcy5wcm9ncmFtPVNlKGksVGUpLHRoaXMuc2V0VW5pZm9ybXM9ZnVuY3Rpb24oKXtpLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2ltYWdlXCIpO3ZhciBlPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfZmxpcFlcIiksdD1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X3NpbmdsZVN0ZXBPZmZzZXRcIiksbj1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2Rlbm9pc2VMZXZlbFwiKTtpLnVuaWZvcm0yZih0LGEsciksaS51bmlmb3JtMWYobixvKSxpLnVuaWZvcm0xZihlLDEpfSx0aGlzLnNldFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5kZW5vaXNlTGV2ZWwmJihvPWUuZGVub2lzZUxldmVsKX0sdGhpcy5zZXRTaXplPWZ1bmN0aW9uKGUsdCl7YT0xL2Uscj0xL3R9fXZhciBSZT1bMTEsMTk2LDI0MiwxMzksMTk4LDI1MiwxODgsNSwzMiwxNjIsMTcxLDEyOCwxMywxNjAsMjUsMjIyLDE3MiwxMDIsMjA3LDI0NCwxNTgsNjksMTAzLDU3LDIzOSwxMTEsMTUwLDE4LDE1Nyw4Miw1NSwyMTAsMjAsMTMxLDE1NiwxNjAsOTYsMTIxLDI1NSwxMjAsMjA3LDIyNywxMTQsMTIwLDM4LDcyLDE0OSwxNDUsMTY1LDIyNyw3NSwxMjIsMTU4LDI1MCwyMzIsNDYsMzQsNTIsMTM1LDksMzAsMTQ0LDE3LDExMCwxMjYsMTEwLDEzMCw3MSwxNTYsNDYsMjEwLDY3LDIwMiw1MSwxMTksOTcsMywyMTEsMjE0LDIyNyw0NSwxMDksMTUxLDk3LDIxLDEwLDIyOSw1Myw4MCwyNiw1MSwyMDIsMTE5LDEyOCwyMzAsMTk3LDE0MCwxMzUsNDAsMTQsODgsMTI4LDIwMiw5NSwyMSwyMDgsOTYsODMsMTg1LDk4LDIxNiwyNDIsMjI0LDE1LDI1LDIyNCwyMzMsODYsOTYsNDYsODAsMTIwLDIyMCw0OCwxODcsODYsMzAsMjQwLDE0MCw0Niw5NSw4MSw0OCw5MCwxMTcsMTQwLDE3Nyw1MSwxMDcsMjM1LDE1OCwxMzcsNSwyNDEsMTkxLDE1NCwxNDksMjE5LDMwLDEyNiw4NSwxNzUsMTAsMjE2LDYzLDEzOSwyMTYsMTUxLDEyMiwyNTEsMjI0LDIwMiwyMjAsMjI3LDIyMSw1MywxMjIsMzQsMjEzLDIyNCw5NCw0NSwxNCwyMDAsNjgsMzEsNjEsMTc1LDIwOCwxNywxMjAsODIsMjQ0LDEzOCwyMDgsMTY1LDIxLDE5LDIzNiwyMzIsMTgwLDIxNyw1MCw3NCw3MCwxMjYsMTE0LDIyNyw2MiwxOTIsMTI0LDksODUsMTQ4LDMzLDc3LDI1NSwxMTcsNzUsMTAyLDg3LDE1MSwyNTUsODcsNzQsNzQsMTgxLDExMSwxMDgsOSwyNDksMjIwLDE3NCw1OSw4MCwyNTQsMTY4LDI5LDMwLDk0LDE3MSwxMzMsMTMzLDE5NSwxMDUsNjQsMjU0LDY4LDY1LDE4LDE1OCw1NCw3MywyMDMsNjUsMTc1LDE1MSwxNzAsMjM2LDEzOCwxNywxMTksMTI4LDIzNywyMTQsMTg5LDI4LDI1MCwzOCwxNDksOTcsMjQyLDgxLDIxMiwyNTQsNTcsMTgsMTIwLDE1NSw2NCw5NiwxMDgsNzUsNzgsNzQsMTIxLDE5MSwyNDMsMzAsNDIsNjAsMTAzLDE2NSwxOTYsMTYwLDE5NSwyMTYsOTksMTgyLDE3MywyMTQsMTgyLDEwNSw1MywyMzEsMyw0NSwyMTIsMTQ0LDEwMSwyMTcsNjUsMTQxLDQ0LDIzMCwxMjUsMTUxLDE1NCwxMjMsNTcsMTM0LDIyMyw5OCwxMzMsMTU2LDIzOCwxMzcsMTgxLDgwLDE3NSwyMzAsMTY3LDEzMSwxODAsMTMsNjksNzcsNDQsMTU2LDE2NSwyNTIsMTQsMjcsODUsNzEsMSw4MiwxOTYsNjQsMjQzLDI2LDE2NywxNDYsOTgsMjAxLDYsMTk1LDI0NywyMDAsMjI0LDQ0LDE3NywxMDQsMTA5LDE4NywyMzEsODMsMTE4LDI4LDE1OSw5MiwxNzksMjgsMTQsMTYyLDgxLDg0LDIxLDE2OCwzNCwxNTYsMjEsMTI3LDIxNSw4OCwyMTgsMjA4LDExLDkyLDE2MSwyMzksMjM5LDgyLDIyMSw1OSw4Niw4MywyMDEsMTk5LDIxNiwxNTEsMTM5LDIzLDU0LDM5LDUyLDEwMywyMDQsMjQ3LDI0LDEwMiw5NCwxNTcsMTM4LDQyLDQ5LDEzMSwxODMsMjA4LDUwLDk1LDIzNiw1NCw2LDIxMSwyNiw2OCw3Miw1NiwyMTIsMTM0LDI0LDkxLDExNCwxMzIsMSwyMTcsODAsMzgsNDcsMjksNDcsMCwxMDcsMTAyLDk5LDEyOSwzMywxNDAsMjQzLDc0LDI1MSw4OSwyNDcsMTAzLDEyLDExNCw1OCwxMTMsMjQwLDcyLDE4OCwzOSw0OCw3Miw4OSw0NSwxMDIsMjA2LDI0NSwyNDcsMjMxLDU2LDE2NywxMjksMTIyLDIyMiw0Nyw0MCw3OCwyMjcsMTU5LDY0LDIwNiwzNCwxMjcsMjAzLDEyNyw4Nyw0MCwxMDgsMTUyLDIzOCwxNDcsMjMxLDQ2LDEwNCw4OSwxODIsMTgwLDIzMiw4Niw4OSw5MSw1NywxMCwyMjIsMjAyLDU5LDE5OSwxMzUsNjAsMTk5LDE4OSw0MCw4NCwxMjUsMjgsODQsMTYyLDIxMCw5MSwxNDMsMzQsMTA2LDExNywxMTgsMywxMjUsMTI2LDIzNyw2MCwxMzEsMTczLDE1Myw2OSw0OSwyMTIsMjA0LDExNywxNjMsMzEsMjM5LDIwMiwyMzIsMTUyLDIzNCwzLDE2MiwzMiwxNzYsMTg0LDE4NCwxOTYsMTU0LDEzMSwxNDQsMTE1LDYsNTMsMTIyLDU1LDY5LDE2NiwxOSwyMzAsMTgzLDE3NSwyNDQsMSwxNTYsMTEsMzcsMTIxLDEzNCwxMjEsMTUyLDE0MiwxNTgsMTI1LDIyOSwxNTAsNDQsMTgzLDIxNiwxMDksNyw2NSwyMjIsMTY5LDU2LDIyMiwxNDAsMTEwLDIzMywxNTcsMTM4LDY2LDIwOCw2LDExMSwxNjYsMTg4LDc2LDIwOCwyMjIsNCwxMDQsMjExLDEwLDU3LDE0MSwyNDMsNjUsMjI4LDg2LDg1LDg4LDE2OSw5MSwyMzcsNTYsMjQ5LDEzMyw3NywyMSwzMiwzNywyMzAsNTUsMCwxODQsMTEwLDIyOCwxNTgsNjIsOTgsNDUsMTQ3LDE3NywxOSwxMTksODksMTY0LDEwMywxMzIsMjM5LDg0LDEzOSw2OCwyMDQsMTU3LDQ5LDQxLDUwLDg5LDExMywxNTksMjAzLDUxLDEzMywxMjAsMTg0LDIxMCwyMzcsMTUsMjQ5LDE4NywxMDAsMjUzLDUwLDE2LDE1NCwxMTIsNjQsMTkzLDI1NCwxMCwyMzUsMjAwLDI1Myw4NCwzMSwxNjksMTcxLDM5LDEyMiw3MCw0NiwxODYsMTM5LDIxMiwxNjIsMTczLDE1OCw0MSwyMyw4NiwxNDgsMTcyLDE5NiwyMzcsMjQyLDU4LDEwMiwxODAsMTUwLDIzOCwxOTEsMjUsMjQwLDIwNCwyNTIsMTI1LDE0OCwyOSwxMjQsNTEsOTUsMTAsMTk2LDU1LDQ5LDE1OSwxMzgsMTQ0LDI1NSwxMjYsMjA1LDQzLDQ5LDQyLDE3LDU5LDYwLDc3LDEzOSwxNzcsMjM5LDY0LDM2LDIyNCw5OCwyMDUsMjM0LDcwLDE5OSwxMDMsMTM5LDIxOCwyMDYsMjA3LDE3OCwyMTcsMjU1LDMyLDEzNCw1OSwyNSwyMjEsNzQsMjIsMTAyLDgyLDE5LDIwLDE3MCwxNDIsMTM0LDQyLDEwNiwyNDksNjQsODAsMjIyLDI4LDIxLDE2OSw1MCwyMzUsNCwyMzcsNTYsODEsODcsNzYsMzIsMjUxLDQyLDYsMTczLDEwNSw1NCwxOTEsOCwxMzYsNSwyNDUsMjA2LDIzOSwxNzYsOSwxMTYsMjRdO2Z1bmN0aW9uIEFlKGUsdCxuKXt2YXIgaT1lLmdsLGE9MS90LHI9MS9uLG89NTt0aGlzLnByb2dyYW09U2UoaSxSZSksdGhpcy5zZXRVbmlmb3Jtcz1mdW5jdGlvbigpe2kuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfaW1hZ2VcIik7dmFyIGU9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9mbGlwWVwiKSx0PWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfc2luZ2xlU3RlcE9mZnNldFwiKSxuPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfZGVub2lzZUxldmVsXCIpO2kudW5pZm9ybTJmKHQsYSxyKSxpLnVuaWZvcm0xZihuLG8pLGkudW5pZm9ybTFmKGUsMSl9LHRoaXMuc2V0UGFyYW1ldGVycz1mdW5jdGlvbihlKXt2b2lkIDAhPT1lLmRlbm9pc2VMZXZlbCYmKG89ZS5kZW5vaXNlTGV2ZWwpfSx0aGlzLnNldFNpemU9ZnVuY3Rpb24oZSx0KXthPTEvZSxyPTEvdH19dmFyIE9lPVsxMSwxOTYsMjQyLDEzOSwxOTgsMjUyLDE4OCw1LDMyLDE2MiwxNzEsMTI4LDEzLDE2MCwyNSwyMjIsMTcyLDEwMiwyMDcsMjQ0LDE1OCw2OSwxMDMsNTcsMjM5LDExMSwxNTAsMTgsMTU3LDgyLDU1LDIxMCwyMCwxMzEsMTU2LDE5MCwxMDAsMTEyLDIzMCw5NywxOTksMjI1LDk2LDc0LDk5LDk0LDI0OCwyMjIsMTYyLDIxMyw5NSwxMjIsMTU4LDIxMiwyMzMsNDIsMjIsMzcsMjE3LDExNSwzNiwxNTIsMzAsMTIzLDExNiwxMDQsMjEyLDEwOSwxMjksNDEsMjIwLDc3LDIxMyw5NywxMjQsNDUsNCwyMTksMTk3LDE3MSw0MCwxOCwxNDksMTA0LDIwLDQsMjQ4LDEwMiw2NCw5LDUwLDIxNywxMjQsMTMxLDE4MCwxODgsMTU5LDE3MCw2MywxLDg0LDEzMCwxNTAsMTE3LDE0LDIxMiwxMTgsNjcsMTY1LDk3LDIwNywyNDIsMjUxLDE1LDMwLDE4NywxODgsNzcsNzksMTIyLDY3LDEwMSwyNTIsMTA5LDI0NCw4MiwzNywxOTEsMjI3LDM1LDExNCw4Nyw1Nyw3MSw5OSwyMTgsMTU1LDU0LDEwMSwyMzksMTM4LDE5NywxMywyMjYsMjI4LDE3NiwxNTcsMTU4LDg3LDk4LDU1LDI1MSw3OSwxNTAsNjQsMTM4LDIwMCwxMzUsNDAsMTMyLDEzNSwyMDcsMTQ2LDI1MiwyMjIsNTcsNTgsMTExLDE1MSwyMjUsNzgsNTksMzYsMjEwLDcwLDI5LDEyMSwxNjAsMjEwLDMxLDEwOSw2NywxNjcsMTk0LDE3NywyMzYsOTEsMTA4LDE2NCwyMjksMTMwLDIxMSw1OSw2Niw5MywxOCwxMDcsMjI2LDU0LDIxMCw1MSw4LDc3LDIxNywxOSw3MywxODcsMzMsMzAsNTksOSwxMzUsMTYyLDQ5LDUsMTEsMjI1LDExMSwxMTksMTEsMjQ3LDIxOCwxMjksMTE1LDgzLDIwNSwxNzAsMjEsNCw2OSwyMTAsMTMzLDEzNCwyNDUsMTA5LDE1LDE3Nyw5LDgxLDgxLDIwMywxMDUsNDIsMTU4LDEyLDI1NSwxNTEsMTY1LDIzMCwyMDUsNSw5MiwxOTYsMjUxLDIxMSwxODcsMjcsMjE0LDQzLDE4Niw5MSwyMzMsODUsMTkyLDIyOSwxNSw3MSwzOCwyMjAsMjAsMzgsMTAxLDQ0LDc4LDcsNjAsMjUxLDE4Niw3NSwxMDMsMTA4LDUzLDE2NiwyMjAsMTg2LDIwOCwxOTQsMTIwLDIwNywyMzAsMTU5LDI0OCwyMiwzMiwxNDIsMTI0LDk2LDE1NywyMjIsNjAsMTkxLDY1LDE0NSw2LDIzOSwxMjUsMTUxLDE0Nyw1MCw1OCwxMzAsMjA3LDExMCwxMzEsMjIzLDIzMSwxMzcsMjM4LDI4LDE4MiwyMTYsMTY3LDE5OCwxOTEsMzcsNjcsNzYsMSwxNDQsMjMyLDIxOCw3OSw3MiwyOCw2NSwxMDEsNDMsMjE2LDY0LDI1MywxNiwxNzMsMTc5LDEyMywxNDAsMjcsMjMzLDI0NSwxOTksMjMwLDM2LDE4MSwxMDIsMTE0LDI0NywxNjIsMTgsMzQsMjAsMjEyLDI1LDE3MSwyNCwyOCwxNDMsODAsOTQsNDAsMTY3LDM0LDIwOSw2MSwxMTcsMTMwLDEsMTk4LDE5Niw3LDIxLDI1MiwxODAsMjU1LDkyLDEyOCwxMTksOSw0OCwxNTYsMTM4LDEzNiwxNTEsMTQzLDIzLDQ0LDUyLDMsNDAsMTk3LDIyOCwzMSwxMjMsNjcsMTYzLDE0MCwzMiw1NCwyMDQsMTg3LDE0OSw4MCwxOSwyNTUsODIsMTIwLDE5NSwxMiwxMTAsNjUsNTYsMjEyLDE0MywyMiw3OCw0NCwyMzQsNzIsMTQwLDI5LDExOCwxMDMsMTgsMzYsNywxMjIsNTAsMzcsMTM5LDQ3LDE0MiwyNDMsMjUsMjA4LDg4LDIzNywxMjYsNTAsMTAzLDEyNywxOSwxODMsMjksMTY5LDI5LDEsNTUsMjMsMTAwLDMyLDEyOSwyMzksMjQzLDE2MCw2MSwxNzgsMTk3LDExNywxOTksNDUsNTcsMjYsMTY1LDEzNSw5MiwyMTgsNTksMCwxOTcsNTQsMTMsOTYsNDAsMTQxLDIxMiwyMjEsMTMxLDEwMyw0NiwyMiwyMjgsMTkxLDE2Nyw3MywyMCw4Niw2MiwxMSwxNDcsMjE3LDExNiwyMDUsMjAzLDExMCwxMzQsMjQ5LDUxLDYsMTIzLDIzLDg2LDIzMSwxNTcsOCwxNDQsODMsMTI2LDExNSwxMTgsMzUsOTYsMzYsMjI5LDM2LDIyMCwyMjgsMTQzLDcxLDQ1LDIyMywxMjksNDgsMjM2LDUsMTQ1LDIwMiwxODgsMjA4LDE4NCw3MCwyNDEsMTA0LDI1NSwxODgsMTgxLDE0NiwyMTAsMjA2LDE0NCw1Myw3NywxMDEsMTIwLDM4LDgsMjQ1LDgwLDIzMCwxNjUsMTYwLDE4Myw4MywyMDIsNzksMTI3LDU3LDIxNCwxMjYsMjQyLDE1MCwyMDgsNDAsMjM5LDE0OCwzNSwxNjMsMjAxLDk3LDc0LDcwLDIxNCwxODEsNjMsMjQwLDE0NywzMywyNTMsMTQ5LDE0MCw3NywxOTcsODIsMTI2LDE4OSwyMzEsNywxOTYsMjEyLDgwLDE0LDE1MSwyNCw1NywxNDQsMjQzLDgxLDIzNCw2NiwyNCwxOSwyMzYsMiwxMzcsMTIxLDI0NiwxMjksNjUsNyw5OSwxMTAsMTc0LDU0LDc0LDE4Miw4MSwyMzQsMTQyLDM3LDcyLDExMCwyMjAsMjU1LDY0LDExOSwxMCwxODgsMTExLDE5MSwyMjgsMSwyMDUsOSwyMDQsMTQzLDU2LDYyLDEyNSw4NCwxMDYsMjI1LDEzMSw5NywxOTIsNDMsMjQwLDE1NywxNjEsNzUsMTY4LDI0Nyw0NCwxNzUsNjUsODEsMTkyLDQ4LDIxLDE1NywxNjcsODAsMTkxLDEzMCwxNjEsNzUsODUsMTg2LDE3NCw0MiwxMTcsMSw2OCwyNTIsMjA0LDEzOCwyNTQsMjAzLDE1MiwyMSwxMyw2NCwxNDQsMTk1LDIwNywyMzgsMjI5LDU0LDEwMywyNDcsMTU5LDI0NSwyMTEsODUsMTkxLDE0MSwxNjgsMzIsMjM0LDg1LDQ2LDExOCwxMiw1LDE5OSw0LDE5LDIxNywyMDMsMjAyLDE1NiwzMywxNDMsMTE0LDExNiw2MCw2Niw0MCw1OCw3NywyMDgsMjM3LDE3MSwyNiw3MiwxNzUsMTE0LDIwNSwyNDgsODcsMTM3LDYyLDIxMCwxNDMsMTUxLDE5NywxNjcsMjEwLDI0MSwxMjIsMTUwLDEwNCwxMjIsMTU0LDIsNzAsMTAyLDgzLDE5LDM2LDE0MSwxMzYsMTk5LDQyLDc5LDIyOSw3MSw4NiwxOTQsMTA5LDMxLDIzNiw4MCwxNjYsMTcsMjMwLDEwOSwxLDQwLDI4LDQ2LDIyNCw1NiwyMCwyMzAsNDcsMTAwLDI1NCwxMTYsMjA4LDc2LDE2OSwxNTcsMjQxLDE3NSwzLDcwLDg1LDMxLDM4LDI0NSw1OCwzMyw4MCwxNDUsMjM3LDgsMjIsNzEsMjI0LDE1OCwxNTYsMzEsMjQ5LDgxLDg3LDI0NywyMzAsMTk5LDIzNyw5NiwxNjcsMTIzLDYzLDI0Myw3OSwxNTYsMjA2LDIwMywxNjAsNTQsMTI0LDY4LDI1MywyMTUsMTMyLDIzNSw1NywxODUsOTIsMjM4LDU1LDU5LDIxMCwxMDQsNzEsMjYsMTgzLDE4MCw3MSwxMiwyNTUsMjI0LDE5Miw2NSwxNTQsNzIsMjQ0LDgsMTY0LDEwLDI0OCw0NiwyMDcsMzAsOTIsMSw4MCwyNDQsMzEsMTg5LDEzOCw4OCwyMTYsMjE4LDYzLDEwMCwyMjcsMTE2LDU3LDExOSw5NCwxMzUsNSwxMjYsMjU1LDMyLDE5MSwxNjMsNjEsMjA5LDE5NCw4OCwyNDgsMTEyLDEzOSwxNzMsNDMsNjksMTM0LDMsMTYwLDE1MSwxMzcsMjUsOTgsMjM5LDE2NiwxOSwxMjMsMjA4LDE4MCwzMSwxMjAsMzAsMTkxLDc1LDE4MywxNzksMTI2LDE4MCwxMjUsOTIsMTA3LDEwNSwyMDYsMTM4LDI4LDY3LDEzOSwzLDE4OCwyMzAsMTg0LDI1NSwxMjEsMTMsMTgxLDQ1LDE2MCwxMTQsMjAyLDE5NCwxMjMsODcsNTUsMTI0LDk3LDE2NCw4Miw5NSwyMzIsMjE2LDExNyw2Miw1LDkwLDE3Niw4MiwxNjcsNTIsMTYwLDE1MywxNzQsMTY4LDEwNSwxNDYsOTEsMjQ4LDgxLDc5LDI0OSw5NywxMzgsMTMzLDE3MCwyNDUsMjI5LDEzMiw2MSw1LDE0OSwyMjQsMjQ2LDE5NCwyMTMsNjEsMTIsMTA5LDQ0LDEzNiwyMzUsOTUsMjE5LDEzMywyMjAsMjcsOTMsMzYsOTMsMTI0LDE4MCw4MSwxNDEsMTUyLDIyMCwxNzAsMTYzLDIyOSwxOTcsMTI0LDE3MSwyMzIsNDgsNzAsMjUxLDEwNiwxMTksMTUwLDIwLDE2LDQ5LDExOSwyNDcsNDIsMTMyLDM2LDc2LDI1NCwxMjQsMTc3LDY2LDE3NSw5LDEsMzksOTIsMTI3LDE5NSwxNzEsMTk4LDM0LDIsNjQsMTQ0LDE3OSw3Miw0MCwxNTEsMTEwLDg5LDIyOSw0MiwxMjUsMzMsMjM4LDE2LDIyMCwyMjgsNTEsMjAzLDgsMSw2OCwxNDUsMjUzLDEzMywxMTgsOTMsMTYzLDEyOSwyMiwxMywyNDgsNjUsMTIsNCw2MywxMDEsMjEwLDcwLDE3MCwxMzgsMjAzLDE0LDI0Niw1NCwxOTQsMTk1LDI3LDEwNywyNDEsMTc1LDM1LDE3MSw0OSw1MiwxMDYsMTIxLDQ1LDM2LDE1Miw4NSwyMTUsMTMyLDc4LDE2NywzNCwxOCwxNjcsMjQ1LDE1MiwxMzMsMTM0LDE3MCwxMjAsMTgyLDEwLDE0NiwxOTEsMzcsMiwyMDUsNDcsMTI1LDIwLDIwMyw0NCw4OCw4MSwzMiwxNTAsMjIzLDIyMCwyMTgsMjM4LDI1NCwzMCwyMTIsMTY3LDIyMSwxMTUsMTU2LDgyLDIyNiwxMzcsMjIwLDIyMSw5NywzLDEzOSwyMDIsMzMsOSwyNywyNiwxMjYsNDAsMjE1LDI1LDEyNiw5LDgyLDIwOCw0OSwyMTcsMTQsMTYxLDgxLDE5Niw2MSw2MCw4NywyNTQsMjEzLDE5NCw4MSwyMTYsMTYxLDE1MSwyMDksMTY2LDIyMiwyMzAsMjQsMTI4LDExNywxNDAsOTIsNCwyMDMsMjU0LDE3MCwyNTMsMjQ5LDg4LDkwLDExMiwyMjYsMTgsNDQsMTIyLDM5LDE1OCwxNTgsNTYsNjksMjA0LDE1OSw1LDE3OSw1MSwxOTcsMjMzLDEzOSwyMTYsMTAyLDIyNiwyMDYsMjQ4LDE1LDc4LDExMiwyMTQsMTI2LDY3LDI4LDQwLDM4LDk4LDE5MCwxNzgsMjA2LDY3LDk0LDI0NSwyNTQsMTYwLDEwMSwxNzYsMzIsMTU3LDI2LDEzMiw4MywyNTIsMjI4LDg3LDI0MiwzMiwxMjcsMTYwLDExMiwyMTAsMjI0LDEzMywxNDksMTE1LDQxLDMwLDE2LDIwMCw2OSw4OSw4MSw3NywxNDQsMTIsMTA2LDE4Miw3Myw1NCwyOCw1MywxOTUsMjgsMjE2LDE3OSwxNzksMTM2LDM1LDE0MSwxMDIsMjM0LDE3NywyNDAsMzQsMTg2LDEwNiwxNDUsMjQ1LDMsODQsNDgsMjUxLDE1NywyNDUsMTEsMjE3LDExMSwyMjcsMTM4LDQyLDY3LDExNCwyMTEsMTc3LDM3LDEwMywxNiw3MSwxNTIsNzIsMTE3LDEyMywzNiwyMTMsMjAyLDU2LDEyNCwyMjcsODQsOCw0NSwyMjksMTQ5LDE2NSwyMTQsNjksMjQ0LDE2OSw1NSw2OCw2Miw5NCwxMDQsMjI4LDc0LDIwNSwxMjMsMjIyLDE3LDcsMTcyLDE1OCwyMjcsNzQsMjA2LDE0OSw2NywxNzUsMTcxLDI1MSwxODUsMTIxLDE1MSwyMjMsNjMsMzUsMjI5LDMyLDQ5LDE5MCwyMDksMTIwLDEzNyw2OSwyMTMsMjE0LDE5LDE1MCwxODcsMTc3LDI4LDEyLDE1OCwxNTMsMTI2LDE0OSwxNzEsMTY3LDIzNCwxMjAsMTI5LDEwOSwzMiwxNTcsMTgwLDc1LDY2LDU2LDIzMywxMTUsMTI3LDIzMCwxNTcsMzIsMzQsMTQzLDE1NiwzMSwyMzAsMTY4LDE3NCwxMjUsMTE4LDE5NSwyNDksMjQzLDE2NSw4MSwyNDYsMTAsMTQ0LDE1LDEwMywxMzksNTUsMTczLDcsNTksMTM2LDY5LDE3Miw1NCwxMzIsMTY1LDE0MCw3OCw3NywyMzAsMzMsMTY5LDEyOSwxODgsNzEsMjA5LDEwOSwxNjEsOCw1Nyw1NywxOTksMTQzLDMxLDE2NCw0Myw1OCwxMzAsMSwxMTAsMTQ1LDMxLDIyOSwxMyw0NiwxNDksOTQsMjQ0LDEwNiw3NiwyMzgsMTA1LDEwNywxLDE4MywxNzcsMTAsNjEsMjI1LDk0LDE4NSwxMTYsNTgsMTgzLDk1LDIyNSwyMiwxMTksMTksMjQ4LDI4LDEzLDEyMywxMjUsMTA4LDE1OCw2NCwxODQsNzcsMjQ1LDE1MywxNjIsMjE3LDIyNywyMDgsNDEsMTg1LDIxMSwyMzUsNDEsMTUzLDE4MSw1NCwxNjYsMTY1LDExLDE1NCw1NSwyMSwxODQsMjA5LDE5MiwyNDksNDQsMTY0LDE2MCwyOSwyMjksMTU5LDgyLDE1NiwxOTgsMjQxLDE4MywxMTQsODMsMTM3LDE4NiwxNTEsMTQ4LDMxLDIxLDE5NywyMTYsMTQ1LDMyLDEzLDUwLDIyLDI0MSwxMzcsMzksNzEsMjgsMTQyLDE2MCwyMTUsMTA3LDIyMSw0NSwyMDIsMTA0LDIyNywxMTAsMTg2LDEyLDE1MCwxNDUsMjQwLDUxLDQ5LDQ0LDE5NiwxMTUsMjI0LDIzOCwxNDksMTg5LDEzNCw5OSw2NywyNDEsNjIsMTU3LDI0MCwxMTQsMjQ3LDE5NSwyNiwyMDAsMTQxLDk3LDE0NywyNDksMjMsMTUwLDE3NCwxMCwxMywyMTksODEsNzMsNTgsMjQyLDk2LDI1MCwyNDMsMTUsNDksMjE4LDU4LDIzMCwxMDQsMjUyLDE3NSwxNTAsMTIzLDg2LDE4NSw4NCw5MCwxOTgsNiwzNiwwLDk5LDcyLDI4LDE2NiwyMzgsMTE1LDIzMSwxNzEsMjQ5LDE3OSw3MSwxNzQsNjgsMTU2LDIyNywxNywxOTgsNzksNzMsMTQyLDk5LDE0NCwyMCw4MCw2Miw4MCwxOTEsMTQyLDQ2LDcxLDksMjQzLDYsOCwyMTQsMTE2LDcyLDE5MCwxMDYsMTYxLDE5LDE4NSwxMDAsOSwxODcsNjQsOTQsODYsMjAzLDE3NCwxNTYsMjQ1LDIyMiw5NSw1NCwzMCwxNDgsMTksMTEsNTAsMTEyLDk2LDYxLDIzNywxNTksMTczLDcsMTU0LDEyNywxNzUsNzksNDgsOTcsODksNzgsMTI2LDY2LDE3MSwyMDQsMTU4LDE5NSwyNywyMjYsMjA1LDIyMiwxNTcsODksMjUxLDkwLDEyNSwzNywyMTIsMjcsOTcsMywxNDEsMjQ3LDE3NSw1MCwxMjEsNywxODcsNjgsMTk2LDE4MSwyMDIsMTY3LDE4OSw1Nyw4NCw4MSwyMjIsMjMsMjcsODQsMTMwLDE3Niw5OCw2NiwyNDAsMjA3LDE4LDIzLDI4LDE2MywxNjMsMTk0LDQ1LDM3LDEyOSwyMDIsMTcwLDk3LDE4OSwwLDgxLDIzOCwwLDM5LDE5OSwxNjMsMzUsMjExLDIwNiwyNDcsNjUsMjksMTE2LDI0Miw2NywxMDIsMjM1LDEzLDEzNiwyMzIsMjMwLDExNCwxNDYsMTg3LDcsMjU0LDE0MiwyNiwxMjEsMTYsMjM3LDUsMTYwLDIwMSwxMTQsOTQsMTc4LDE5OSw5NSwyMTIsMjQxLDQ1LDExMiwxODAsMTg4LDcyLDg2LDExNCwxODksMTU1LDE0OSwxNDksMTYzLDIxMCwxMTIsMTAxLDEyLDY5LDIyNSw3NSwyMDIsMjIzLDI4LDI0Miw5MCwyMTUsMTU2LDE2OSwyMjQsMjQ1LDEzNSwxMjgsOTIsMTQ4LDIxNywxMzEsMjA4LDI1NSwyNSwxMzUsMTE3LDEzNiw1LDEwNCwxODUsMjQ5LDE2MSwyMjgsMjE0LDE2LDEwNSwyMDQsOSwxODIsMTM1LDE1MywyMjAsMTAxLDI0NCwxNjAsMjA3LDU4LDE4MiwxMTgsMTg1LDI0MCw1NywyNDUsMTIzLDEzLDExMiwxODIsMTA2LDIyOSwyMjAsOTAsMjksODYsMjE1LDk2LDE0NywyMzIsMiw1NSwxMzEsMjI1LDEzNyw2OCwyNDUsODksMTQxLDI1Miw5NywzLDEyOSwxNTUsMjE2LDIyMyw5OCwxMTYsNDUsNzgsODUsMTQxLDE2MSw3NCwyMTUsNywxNTAsMTcxLDIyNSw1OSw3OCwyMjEsMTUyLDIzNiwxNCwxMTcsMTAwLDIwOCwxNTgsODYsMTMsMTg1LDEyNCw4NywxNTcsMTExLDQwLDE4NywxODIsMTI0LDE3Myw3MSwxNzMsMjMsMTk5LDUyLDE1NSwxOTAsMTM0LDExLDIzLDY0LDI1LDIxNSwzOSwxMTUsMjMxLDE3Myw3Nyw3MiwxMTQsNTQsMjUyLDExNiwxNzgsNTksMjIxLDEwNiwyNDEsMTE5LDI1NCwzMCwyMjYsMjQxLDIwNCwyMzMsMTEzLDE5Nyw5NiwxNDYsMCw0MSw2NywzLDIzMSwxMjYsMTIsMjE4LDIwMiwyMiwxNzEsMTE0LDI0OSwxNzYsMTM0LDE2MCwxOSwyMTYsMzEsMjI5LDExOCwyMjYsNjIsMjQyLDEyNiwxMjYsNDIsMTI3LDEzMCw2OCwyMTgsMjE4LDgxLDIwMiwxMDYsMjE3LDE5MSwyNSwxNzcsODIsOTcsODEsMzYsMjMyLDEzNyw1OCw5MCwyMTYsMTkwLDExNywyMzUsMjAsMTk0LDE0NCw3NiwxNzgsMjcsMjEzLDEzLDIwOCwxOCwyOSwxMTgsMTI2LDQ5LDk4LDIwMywxNzksMTI4LDIzNywxMDAsMzIsMjQyLDE4OSwyMTIsNiwyMTAsMjEwLDE4OCwxNjEsMjA1LDEzLDEyNCwxMTksMTMsMjE1LDExMiw0MSwxODMsMTc2LDIxNSwxNjgsMjEwLDE4MiwxMTEsMSwxMTUsMiwyMzksMTQxLDgsMTc3LDEyNCwxMTIsNDgsMTk3LDIsMjM5LDExLDk5LDQsMzYsNzcsNjksNDcsMjQ0LDE5LDE1Myw2MSwxOSwyLDk2LDE3Niw3LDExMiwxMjIsMTMxLDE2OSwyNSwxODksMTE2LDE3MSw0OSwxMiwxMjEsMTYyLDc5LDE1NCw3NCwyNTEsNTAsMjMzLDE4Miw2MywxODAsMjI0LDExOCw0OSwyNTMsMjEsMjAsMTYsMzEsMTQ0LDE4NCw5MywxNzQsMjMxLDI0NCwxODMsMTMsNDksMjI1LDE4OSwyMTEsNzMsMTg1LDQ5LDExMCwxNDIsMjUsMjI2LDQ1LDE3NiwyMzMsMjA0LDc0LDMzLDE2LDIwNSw4OCwxMzEsOTIsMTU3LDE3MCwxNzUsNjgsMTcwLDYxLDUzLDExNiwxNjUsMTYsMjcsMTgyLDE2MCwxODEsODcsMjQxLDE1LDE1MSw4NSwxMDcsNzYsMTY3LDEyOSwyNSwxNzIsMTI3LDE4NCwxMzgsMTUzLDIyMiwyMjgsMTI1LDY0LDQ0LDQ1LDMyLDEyLDIyNywxNDgsMTA2LDE1Miw4MywyNDAsMTY2LDU0LDIzNSwzMiwxOTAsMTIsMjQyLDE2NCwxMjMsMTg5LDUzLDE5NCwxNDEsMTA0LDQzLDIwMiwxMTAsNCwxNjgsMTE5LDI0NSwyMzIsMTc5LDE3OCwxOTgsMSwyMjQsODcsODYsMTYwLDMxLDE5LDE0MCwyMzMsMTAyLDE5MSwyMDQsNCw5OCwxMzgsMTYzLDE5MSwxMDYsMjQsMjEzLDQ3LDIwOCw4MiwxMzcsMTMyLDEzMSwxNiwyNTMsODQsMjUsMTQ0LDkwLDE1OSwxNDgsMTYsMTk2LDg0LDE2Niw2MSwxNjAsMTAxLDIyOSwyMjcsOTMsMTE4LDU5LDg3LDY2LDE2LDEyOCw1OSw5NiwxMzEsMjUwLDIwLDE4NCwxNTAsMjA1LDkxLDIyNywyMDEsNjIsMzUsNzksMTgwLDE3MiwxNzMsODUsMTk3LDEwNiwxNTMsMjM4LDIyOSw2MCwyMDQsNjUsMTkzLDIzMCw5NCwxMDEsMTc3LDEzNCw2LDE2NSw1MywxNzEsMTQyLDIwOCwxNTUsMiwxMSw0LDIwMiwxMjcsNTQsMTcsMTQyLDExNywyMjcsMTIxLDEyOCwyMDQsMTkyLDE0NywxNDcsOTIsMTg5LDUsMjI0LDE0OCw3MiwxOCw4MywxMDEsMTI2LDEyNCwyMjgsMTUzLDI0MiwxMjMsMjI5LDI0Nyw5MiwyMjEsNiw3MywyMjcsMjUwLDg3LDE2NywxOTQsMTI5LDE4Nyw3MywzOCwxODUsMTA5LDIxNywyNDAsMTkzLDg4LDUwLDE3OCwxODAsMTUxLDU0LDE5NywxODcsMTM3LDE5MCwxNjYsMjMzLDEsMTAzLDIwNCw4OCwzMSwxMjcsMTg1LDI5LDY1LDEsMjksMjU0LDIyMywxNCw4MywxNjcsMjE1LDExNCwyNDgsMzAsMTczLDg5LDE3MywxODcsNjksNSwxMDUsMTE3LDE1LDEwNiw5NCwxNzMsNjMsMjI3LDI1LDIzMCwxOTAsMTM2LDE2OCwxNzcsMTc1LDEwNyw5MSwxMjYsMjU0LDM0LDE4OCwyNSwxMTgsNDgsMTIsMjI2LDEzMCwxNTMsMTYyLDU3LDQ3LDE4MSwyMTIsNzksMTYwLDk3LDY0LDE1NywyNDYsOTAsNTMsNDMsMTQ5LDc2LDEwMiwxNSwxOTUsMTA3LDU4LDI0Miw4NCwxNzIsMjksODEsMTk4LDExMyw4MSwyNTEsMTM4LDE4MiwxNTQsMTExLDMwLDE3MSwxMjksNTYsMTcsNDUsMjE0LDE1MywxMTIsMTE3LDIwMywxNzQsNDAsMzgsMjM0LDIzNiwzMiw0LDExMiwyMjUsMjYsMTg3LDE5NSwyNDYsMjUyLDksMjE4LDY5LDE2MCwyMjMsMTc4LDU0LDE0OCw4MSw4LDEzNCwxNTEsNzUsMjQ4LDYzLDIyNCwyNDAsNDgsNzUsMjUwLDIyMSw4NSw0NiwxMDAsNTAsMyw3MCw2NCwxMDIsMTExLDE2MCwxNTUsMjMzLDU5LDE0NywxODQsNTcsNjEsNiwxMjYsNzksMTc2LDE2LDE4NSw5NCwxNjYsMzMsMTM1LDc4LDQyLDc1LDE0MCwyMDgsMTQwLDQ0LDE1MywxODcsNjQsMTAzLDExOSwxNjAsMjM2LDE2LDIzOSw3NCwyMTgsMjE5LDIxMiwyMDcsMTEwLDUzLDMwLDc2LDI0OCw0MCwxMTEsOTgsNDQsMjAsMTEzLDIwNCwyMzMsMTA5LDEzNSw5NiwxMDcsMzksMTYzLDIwMywxMjUsNDUsMTU3LDE1Miw3MSwyMzksMTc1LDE3NCwxNTksMTQ3LDgwLDExMSw5MywzOCwyNTMsMjI4LDE1NCwyMjUsMTgxLDEwMSwxMiwyNDEsMTI3LDY1LDQ5LDE4OSw1LDg1LDE1MSwyMzcsMjEzLDE0MywxNCwxMDQsMTM4LDU0LDUyLDI3LDQsMTMyLDY3LDM1LDE1Niw4NiwxNTcsNzMsMTYsMjI5LDIyMiwyNDUsMTEwLDc5LDE2NSwxNzksNTYsMTc5LDUzLDIxOCwyMjksMTAwLDU4LDg3LDE0OSw0OCwyMzEsNjQsNjMsMTE1LDY3LDMsMTcyLDYsMTg2LDExNSwxNTQsNjAsNTMsMjE0LDE1MiwxNDksODksMjM0LDM3LDE0Myw4MiwyNTUsNjQsMjgsMTgzLDkzLDExMiwzOSw3MCwxODUsNTcsMCwxOTksOSw2MSwxNzUsMjE5LDQxLDc2LDM3LDE3Niw4MiwxMjUsNjUsNTMsMTYwLDIxNCwxMDUsNjIsMTUzLDI0NCwyMjIsOTYsMjA1LDYsMTc4LDg1LDQxLDI0MCwxMTMsMCw5NiwxNDksMzgsMywxOTUsMTgsMTUyLDQxLDI0NiwzLDEwMywyOSwxMTAsMTM0LDMwLDEwMSw3NSw0NiwxMDMsMTk5LDE4NCwyMCwyMzAsOCw1NSwxMjAsNCwyMjksMTY4LDM1LDQzLDcsMjgsMTYxLDE0Myw4NywyNyw4Nyw3OSwyNTUsMTg2LDQ0LDE5NSwxNTgsMTU1LDE4MSwxMTksODEsMTcyLDIxNywxMDcsOTUsOTgsNTUsMjQzLDE4Niw2NiwxMDUsNDgsMjI0LDEyMywyMzIsODQsMTU2LDIwLDEwLDE1NiwyMDgsMjA0LDUyLDM0LDIyOCwxMzYsOTcsMjQyLDIwMCwyNDYsMjExLDY3LDIwMiw0MCwyNDEsOTEsOTIsMjUzLDksNTQsNzIsMTMxLDIyMSwxMDYsMTc4LDMyLDQ0LDE4Miw0LDIyNSwxOTMsMzcsMjAsMjQ5LDI0OSwyMzEsMTAsMjA2LDE4LDcxLDI1NCwyMjEsMTg3LDE3Miw4OCwyMDQsNiwxMjcsMTM4LDEwMiw3LDIwOCw3NSwxNDcsMjE5LDE5OSwxNzcsNzksMzYsMTcwLDEwMSwyMDcsMTc3LDEwOSw5NSwxNDMsMjE3LDQxLDE5OSw4MCwxODMsMjAxLDIsMjU0LDEyLDU1LDIzLDE5OCwxNCwyNTUsNjksMjQ1LDEzOCwxNTUsMTI5LDIyNywxNjcsMTY4LDEzMCwxNTYsMTM1LDE0LDk2LDkzLDQ4LDk5LDE0MywxMDcsMTI2LDkyLDExNywxNDMsMTEyLDEwOCwxOTMsMjI4LDg0LDEzLDQxLDE4NiwyNywxNzIsOTIsMjAxLDE0OSwxMTYsMTksMTEyLDE5NywxMTYsMjA5LDEyOCwxMDIsMSw1NSwxNTIsMTc3LDI4LDM3LDM0LDUwLDgzLDQxLDE5OSw3NCwxNzgsNTksMTExLDY3LDExOCwzNSwyNTIsMzYsMzMsODcsMjgsMTcwLDE3LDIxNSw0Nyw5MCwxNTQsMTI0LDEzNywxNSwxNCwyMTEsNTksNzUsNTksMzAsNzcsMCw0OSwzNywyMjUsMTkxLDg3LDEwMSwxMjcsMjE0LDIyNywxNjAsOTksMTc0LDIzNCw4MiwxNDgsMjM1LDE2LDI0MSwyMTksMTQ3LDE3MCwxMjcsMjIxLDI1MCwxMTYsMzksMjE4LDE1Niw3MiwyMjcsMTcyLDU1LDAsNzksMTg4LDc2LDUxLDIyMiwyMzIsMjQsMzYsNjIsOTQsMTU0LDMsNjEsMjMwLDE0NiwxMTQsMjUzLDAsMTI4LDU4LDI1Myw5MCw3MiwyMTEsMjQyLDM4LDM5LDEzMywxNTMsMTYxLDExOSwxMDUsMTk1LDE1MiwyMjUsMjA4LDEwNSwxNDAsODAsMjE3LDE4NiwxOTYsMTU3LDIxLDExNiwyMzAsMTE2LDEzOSwyNSwxNTksMTQzLDExOCwxMjgsNzcsMjAxLDIzOCwyNDcsMjI4LDE1LDE2OCw0LDEzMywxNDgsMjEsMTQ4LDEyLDQ0LDI0MSw3LDExNSwxNywxMjksMTc2LDIwMiw0NiwxMzAsMTIyLDEyOSwyMzUsMTQxLDIyMyw4NSwyMSwxOTksNjUsMTgxLDE2OSw1MiwxNzQsMTYxLDE1Myw2MiwyNSwxNjQsMTE1LDIxMyw4OSwxMzgsMTk5LDEwMyw3OSwyMDAsMTY1LDEzNSwyNDksMjQ0LDI3LDIwOSwxNzgsMjQwLDEyOSwyMTEsNjEsOSwxMTEsMTU3LDE0NywxMTksMzYsMTE5LDI1NSwxMTAsMTMwLDg0LDQ5LDIxMCwyMjUsMjQ3LDEwMCwyNiwxMjEsMTI3LDE2MywxNjAsMjYsNzksOTksMjQsNzcsNjUsMzIsMTc4LDEwOSwzNiwyNywyNTMsMTczLDExMCwxODMsMTEsMTQsMjExLDU3LDEzMCwyNTQsMTI0LDEwNCwxNjUsMjE5LDMxLDcwLDk3LDE0LDE5NCwzOSw2MSwyNiwxNDEsMTI1LDIyOCwxMjYsMTk0LDE4NCwxMDEsMTYwLDIwNCwxMDYsMTI4LDE0NCwxMDYsMTAzLDE3MSwxOCwyNDYsMTI5LDIyMCw4NSwxNzIsMTUxLDEyMyw1LDczLDE1NSwxOTIsMTc1LDkxLDE1NywyMzksNjEsMjM3LDExNiwxNzAsNjUsMjMzLDU2LDE5LDQ5LDExNCwxNjgsMTkwLDMsMjE0LDUzLDI1MCw5MCwyMTMsMjQ0LDg4LDEwMSwzMCwyMjksMjQ4LDEyNCwxNSw3MSwxNDEsMjcsMTcyLDIzNSwyMSwxMjksMjExLDcyLDYxLDE3MiwxMTIsMTcwLDEyOCwxMzUsOTYsMTk2LDIyMSwyNTUsMjcsMTc2LDEwNSwxODgsMTgzLDEyMSwzMywzNywxNDksNTMsMTMxLDIyNiwyMzMsMjksMTY3LDIzNCwyMTgsMTA5LDUzLDE4NSwxNTIsMzYsMjQ4LDUzLDYxLDIzNSw3OCwyMSwyMDEsMjE0LDIxMCwxNjMsMTIsMjUxLDE4Nyw0NSwxODgsMTM3LDEyNiwxMjcsMjM3LDkyLDIzNCw5MSwyNDAsMjI1LDM4LDE5NCw1NywyMTMsMjUxLDIzNywxNzEsMzAsOTksNTIsMTQsNDksODQsMTAxLDI1MiwyMzcsNywxNjYsMTIyLDExNCwzMiwxMDcsMzIsMjA3LDIzOSwxMzYsMTY4LDE3OCwxMiwxMSwyNDEsMjMzLDIzMCwxNDYsMTMyLDE4LDgzLDIzMyw0MSwxNzIsMTcsNiwxNjEsNDIsMTEzLDg3LDQwLDI1NSwxODUsMSwxNDYsMTI4LDUsMjQwLDEyNiwxMzEsNzEsNDIsNTQsMTI0LDIwNSwyLDEyMiw3MSwzMCwyMjIsMjI5LDQwLDEzNCwxNDIsMTAyLDk3LDIzOSwxNTEsMTc3LDEsMjMwLDIzMSw0OSwxMjMsMjE5LDI4LDEyOSw5MSwxNTIsMTEyLDEzLDE1NCw4MSwxOTcsMjI2LDI1NSwxMTIsMTU4LDE3OCwxNzcsNTUsMTgxLDEwOCwxMzgsMTg1LDI0NSwyOSwxODYsMjEsNzMsMTg4LDIwOSwxNTQsMjAwLDg5LDExNiwyMzUsMTk4LDE0NCwzNiw4NywyNDgsMjIsNywyMDAsMTIyLDcsMTQ4LDQ0LDQyLDg3LDE0MCwyMzgsMjA0LDk1LDIzMSwyNTIsMCwxMzYsMCwyMiwzOSw3MCwxMjMsMTI1LDE2NSwxMTMsMjI3LDE3MiwxNDYsMTYzLDEyOCwxNTgsMzYsNTIsOTEsMTksMzYsMjQ1LDI3LDE1MCwxMzgsMTQxLDExLDY3LDIzOSwyMjQsNjUsMjQsMTE2LDEwMSw3LDM5LDQ2LDE0MiwxNzIsMTY0LDI0MywxNDgsMCwzMywyMjYsNTksNDcsMjAzLDEzNywxNTYsMjQxLDY2LDI1MCwxNTcsMzAsMjA0LDEwMSwxNDMsMTM0LDk4LDIzOCwxNTUsMjI2LDI1LDE4NCwxMzYsMjE5LDg5LDEwMCwxOTMsMTEsMTQzLDcxLDEzOSwyNDMsMjMwLDE1MSwwLDI0OSwxLDc4LDI2LDMyLDkzLDEwNCwxNTcsNjcsOTcsMTY0LDI0OCw4NiwxMjQsMTQ2LDkzLDc0LDIyMiwyMjgsMTY3LDU1LDUzLDEwMCwxMzUsMjE2LDEwOSwxMyw2NCwzNywxMDYsMTc3LDIwMCwyMDAsMTgyLDkyLDI1MSw2OSwzMSwyNDMsODksODAsMTk4LDE0LDEzMiwyMDMsNzIsMTAzLDI4LDEwNCwyMTcsMjQsOTcsMjIzLDExMywxMSwyOSwxNzgsMTkxLDIxMCw0NiwxNjIsMjU1LDY4LDk5LDgsMjM3LDIxMywxNjIsMTUyLDE5MywxODMsMTIxLDIwMywxOSwxMDgsMTgyLDI5LDg2LDI2LDE5MiwxMDMsMjIwLDEwMywyMDUsMTU0LDE3OSwxOTcsOSwyMiw3MywxMjcsMTc1LDE0NiwzOCwxMTksMjEwLDAsMjQsMTgwLDIxLDI0NSwyMTUsMjA0LDkxLDE4NiwxMTksMTM4LDE4MywyMzksMTUsMTU1LDIzMSwyNDgsMTMzLDM5LDI0LDEwMSwxNDQsMjM2LDEwLDIzMCw1NCwxNzQsMjI3LDczLDIxLDExMCwxMCwxNjAsMjQxLDIzMiwxMzEsMTQsMjEyLDEyNywyMzIsNTksMTIyLDY1LDE0Niw1NCwxNjMsOSwxODksMTkwLDEyMSw4OCwxNzAsNjIsMTk0LDE0LDIwNCwxNTIsMjQ1LDM4LDEzMSwzNyw5MSw4MSw3MiwxMTQsMjksMTE1LDIzOSwxODIsNTYsNDQsMTU2LDE1OSwxNzcsMTgwLDgyLDE2MCw5Myw5Nyw4NiwxODMsMjM2LDUwLDk1LDg1LDM5LDcxLDE4MSwyMjUsMTUyLDE0Myw2MywxMjMsMTE3LDM0LDQ0LDEwOSwxNjAsMTY2LDIyOSwyNDAsOTEsMTM4LDEwMiw1NCwxODAsMTczLDQ0LDUwLDgwLDQyLDEyNCw3LDUwLDEyNCwyMTEsMjM5LDIxLDk0LDE5NywxODUsMjM5LDIxMywxMDcsMTQyLDY0LDk1LDEyNCwxMjUsMTcsMTgwLDk3LDE4OSwxMDEsNTIsNDgsMTksMTEyLDEyLDcwLDksMjEyLDE3Nyw1NCwxMTgsNjYsODQsMTQ3LDIzNiwyNDgsMjYsMTI0LDk1LDEwMywxMzUsMjU0LDEyNCw0OSwxMTIsMTg2LDk5LDEyMCw5MCw4LDE5NCwxOTEsODgsNTcsMjQyLDY1LDYxLDEwLDEwNCwyNDYsMTk3LDI1MiwxOSwxNTksNTgsMTk0LDc1LDE3MywyNDIsMTAzLDgsMTE1LDg0LDY5LDIzOCwxNDksMjYsMTUsMTU5LDE4MiwxNDEsMTMyLDExOSw3MCwyOSw1MywyMCwxNDMsNDYsMTYzLDIwNCw2LDIzNiw1OSw0NSwxODUsMTcyLDg5LDExOSw4MywzOCwxNDQsMzYsMjIyLDk2LDE1MSwyNiw5OSwxOTUsMTYzLDE3MCwxMzMsOTIsMTU5LDIxNCw1MywxNTAsMTE2LDkwLDE3Niw2OSwxNDUsMTMwLDE1LDE3MiwxNDAsMjE3LDIxNSwxMDEsMTYzLDExNSwxNjEsNjUsMTAxLDgsNywxODMsMTEzLDIxMywxMzQsNTgsMTc1LDEzMCwyNTEsMTQzLDE3MywyNDgsMTY4LDEzNSw2MCwxNTksMzAsMTk0LDY4LDIwOCwxMTksMTIwLDIsNDAsMTc4LDIyNywyNDcsMTYxLDc3LDQ3LDEzNiw0NiwyNDQsMTYzLDcyLDY1LDE1OCwyNSwyMjUsMTk1LDYxLDEzMiwxODIsMjA0LDE3NywxODYsMjAwLDgxLDIsNjUsMTA1LDIxMiw3Miw5NCwyMDMsMjMyLDIxNywxODIsMTIzLDI1MSwyMjgsMTYwLDEsMTYxLDIwNCwxMjMsMjAsMzcsMSw3NywyMDgsMTc5LDQ1LDE0OSwxODEsMTIyLDEwMiwxOTAsMTIzLDIxMywxNjQsMjMxLDQxLDIxNiwxMzAsMjM0LDI0OCwyMDgsMjUxLDI1MiwyMjAsODQsMjA5LDY3LDQ3LDYxLDIyMCw1LDE0MiwxNjIsMjYsMjM2LDEyMSwxNDIsMjQ4LDEzMiwyNTUsNjUsMTIyLDIwMywxOTYsMTAyLDE5MSwxODcsMiwxOTUsMTI3LDI1NSwxOTMsOTIsNDksOTEsMTg2LDE1NCwzOSwxNTYsMjksMjExLDE3Miw0OSwxMDQsMjQ1LDExNCwxNTMsMjIzLDIxMSwxOTksMjQ5LDM1LDEzMCwxNjAsMTI4LDAsMTUyLDE3NiwxODMsMjAsMjM2LDExMywxOTMsMTA4LDI2LDI1NSwxMSwyMzcsMTAyLDEzMywyNDUsOTQsMTE1LDExNCwxMCw4OSwyMjksMjE0LDIyMSw5OSwxNDksMzAsOTksMzcsMjQ2LDEwLDI2LDI2LDM5LDkyLDEyMywxNzAsNzMsMjExLDEyNywyMjcsNTQsMzAsODYsMTMzLDE1OSwxMTIsMjI1LDkxLDE0OCwxMDAsMTc0LDE0OSw3NSwxNDMsMTQsMTQwLDIwLDQ0LDY0LDIxMiw1LDI0Myw4LDExNiw2MywzMCw5Nyw0MiwxMjMsMjAsNzMsMjEyLDg1LDIwNyw4MywxMjIsMjcsMjUxLDIzMyw4NCwxMCwxNywyMzYsMjMyLDgzLDIwMCwxMjcsMTE5LDE0MywxNjMsMjA0LDIyMCwxNjcsNTksMjMxLDIwLDEwNiwxODYsMjIyLDE5MSw4LDQwLDIzNCwyMSwyNSwxODAsMTMsMTE2LDI1MCwxNTIsMjI0LDE3NCw3NSwzLDIwNSwzOCwxNzMsMjE1LDIzNiwxNTEsMTg1LDEyMSwyNTQsMjQ0LDE1NCwyMzksMTcsNTMsMTA2LDE2NCw2MSw0OSwxMTYsMjE2LDExOCw5NCwxNTAsMzUsMTgxLDI2LDIzOCw2Niw0OSwyMTEsMjIxLDEzMiwxNDYsMTY2LDExNSwzOSwxMzYsMzYsMjA1LDIzMCwxNzksMzEsMTk3LDUxLDE0OCwxNjUsMTA5LDM4LDcwLDM3LDE0OCw1Miw0NCwyMDksMjUwLDk4LDU4LDI0NiwyMjUsMTAzLDE5OCwxMDEsMjYsMjUsMTk2LDIwNyw4LDE2NiwyMSw4OCwyNTIsMTc1LDI1MywxMCw4OCwxMDcsMTU3LDE5LDIyNSw2MSwxMiwyNDYsMjIxLDM3LDIzOSwxODYsMTY3LDEzNywxNDIsMTM1LDIyMiwxMjgsMTc0LDYyLDk1LDIxNiwzOCwxNDEsMTU3LDQ1LDIzMiw5NywyMTcsMTczLDIwMywyMzQsMTE2LDEyOSw2OSwyMDYsMTg5LDk0LDIyMSwxMiw1NCwxMzksMTg2LDI0NywxODQsMTYsMjAwLDEyMSwyNDQsMTA0LDgsNywzNSwxMTEsNDcsMTg4LDEwLDE0MCw5Miw3MywxNDMsMjA2LDIwMyw3MiwxMjIsMTg0LDIwLDEwMiwxOTcsMTMwLDY0LDE1MCw2Myw5NiwyMzksOCwxMzIsMTExLDIxNyw4NCw5MSwxOTgsMzIsNDMsMTAwLDEzOCwyNDEsMTUsMTYwLDQyLDE5MCwyNTMsMTkzLDE4NCwxNjQsMTI0LDI5LDIxMCw5Niw2NywyMjQsMjIxLDE4MiwyOSwyMTgsMTI5LDE0OSwyOSwxMjgsMTc0LDk4LDg4LDg4LDEyNSw1Niw0MCwyNTUsMTIwLDUsMCw4NywxNzQsNDIsMTUwLDkwLDExMiwyMDEsMTgzLDE2OSwxOSw1NywxOTUsMTkxLDEyLDU4LDI0NCwyMzUsMTMyLDI1LDE0NSw3MiwxNDYsMjE0LDgsMTI1LDEwMCwxMzUsMTIsNSwxMDIsOTcsMjQ4LDE3NCwyNCwxNTksOTAsMzMsNDMsMTg3LDYsNjEsMjEyLDI0MSwyMjUsMTkwLDIxOSwyNTIsMTk3LDEyMywxMjksMTY0LDEwOCwxMjMsNTUsMjMwLDQsMTUzLDE2NiwxMDUsMjM0LDE1LDg1LDIxNiwyMyw1NiwzMiwzLDQxLDExMCw2OCwxNDYsMTcyLDEzMywyMDIsOTgsNDEsNyw0NywxNTIsMzUsMjU1LDE2OCwxMDYsMjQxLDIyNiwyMjIsNzcsMjQ0LDUyLDE4NSw2NSwyNTIsMjI3LDMyLDY2LDM4LDExLDE3Miw2MCwyOCwyOCwxMDMsODQsMSwxLDIwNSwxODIsMTkwLDI4LDE4OSwxMDIsMjUzLDQzLDEsMTkxLDE0OCwxMTYsMTAsMjI3LDE4LDgxLDkzLDgwLDIzOSwxNTcsMjMyLDIxNSwxODAsMTYzLDE2NSwxNjEsMTA5LDE3Nyw3MSwxNTAsMjQ0LDE0NCwyMDgsMTYwLDExMCwyMiwxNzQsNjAsMjA2LDQzLDEwMywxMjEsNTUsMTAzLDExNCwxMTUsMTczLDIzOCwxMywxMCwyMjcsMjUxLDQxLDE3NiwyMTYsMTU4LDIyOSwyMTYsNTUsMjM0LDEyOCwxMjgsMjAsMTY3LDEwNiwxODEsODYsMTYzLDEzMCwyMTUsMTEwLDE0OSwxOTEsMTAsMjI3LDIxNSw4LDIxNCwxNTQsMTc4LDE4MSwxNSwxOSwwLDI0NywyNTAsOTcsNzQsNDMsMTU3LDU1LDk0LDE3NCw0MSw0MSw5LDE5OSw5NywyMCw5MSwzMiwxOCwxMCw0Myw5OCwyNDAsMjQ3LDIwMywyMCwyNTAsMTE3LDE2MCw0NCwyMjksMjAyLDE4Nyw2NCw1NCwxMjQsMTUsMTg0LDE2OSwxMjksMjcsMTYwLDI0MCwyNiw2MSwyNTUsNjAsMTY2LDYwLDE0NCwyMDksODQsNTUsMTg3LDE4NiwxNjgsMTMsMTI0LDEyNSwyOSwxNywxMDAsMjQ5LDIyNyw2MiwyMDUsNzgsMTc5LDE2MywxNjgsMTM5LDE2OCwyMSwzOCw4MywyMzksMTUxLDc0LDQzLDY2LDIsOTIsNzIsNzEsOTQsMjE2LDEzNCwyMzgsMjAsNDUsMTU4LDIxMywxNjQsNzMsNTcsODAsNDcsMTk4LDE4NCwxMzAsMjIzLDIyNyw3MSwxMzIsMTMzLDIzNSwxNzcsODUsMTc0LDE0MiwxMjQsMTcyLDIwMCw1NCwyMjksNDAsMTI2LDYwLDc2LDkyLDIxNiwxNTMsNTYsMjQxLDE3NCw2NiwxNDEsOTAsMjI2LDMsMzAsNjgsMjM0LDcxLDE4NywxNjMsMTEyLDE0NiwyNTUsMjIsMTQzLDE3MCwyMDQsMywxMjcsMTc5LDgxLDEzOSwxNjAsMzcsNzcsMjQ2LDEyOCwyMjAsMTk2LDE1OCwxNTMsNzMsMTc3LDY1LDE5OSwxMTksMjksMTk3LDE0NCwxMzAsMjQ4LDIwNiwxNTUsMjUzLDEwOCwyMTMsMTI0LDcsMjIzLDIyMSwxNjIsMTQ2LDEzNCwyNDIsNjUsOTksMTYyLDEwNywxMjAsMjQ3LDIxNCwyMDcsOTYsMTUwLDE2OSwxMzEsMjA4LDIxOCwyMjEsMjgsMjQsMTEyLDIwOCwyMywxLDEzMCwxNDIsMjMyLDU2LDEwNCw0NSwzMywxNTgsOTUsMjU1LDEyMywzMSw3NCw3NiwxMjAsMTc4LDE1NSwyMTMsNiwxOTUsMTY0LDgsOCw2OSwyNDEsMTk3LDEyNyw4MywxNjksMjEsMTY3LDE5LDk0LDE0MywyNTIsMzMsMTU5LDI0OCwyNDEsMTcwLDE1MywxNDcsMSwxNDksMTk5LDIwMSwxMzEsMTcwLDc5LDIzNiwyMTIsMjA5LDE0MywxMDcsOTgsMjQsMTIzLDU2LDMzLDE5Myw4NSwyNDcsNjQsMjI1LDEzNSwyMTAsNzgsMTQ1LDU3LDE2LDE0NSw3MSwxNzAsMjAsMTMzLDg3LDIzNSw0LDE2NiwyMzksMTAwLDgyLDIzNSw4MSw1MCwyMjMsOSwxOTMsNTIsNDksODYsMTI5LDE5MCwxOTYsODIsMTY1LDEwNyw2MywxMTUsMTYxLDk4LDMzLDIwLDE5MywyOSw0MiwxNTEsMjA1LDI1MiwxMjQsNzIsMjQ1LDQ4LDE4MSw2Nyw3LDEzLDIxLDEyNyw1OSwyMjYsMTg4LDE0NCwxMjksMTEyLDI0NCwxOTIsMTIxLDIxMyw4MCw0MiwxOTYsMSwxMywxMDcsMTA4LDc4LDAsNDAsMTIxLDIyNSwxNDgsMjM3LDIzNCwyMDksMjE2LDIzOCw5LDE0NywyMjYsMjU0LDk2LDg5LDIxMiw3MiwxOTMsMTA2LDc1LDEzNSw3NCwyMjcsNjcsMjU1LDkyLDE5MSw4MSwxODgsMTI0LDIyNiwxNDksMTUyLDE0MiwxNSwxNTksMTk1LDIzOCwxMTQsNTUsMjU1LDE2NiwxNTcsMjMwLDU5LDE0OCwxNzAsMTY2LDE1MSw2NSwyMTMsMTA0LDI1MywyNTMsMTEyLDE1MCw4MiwxNDcsMTM3LDI3LDIxNCwxMDAsMjQ3LDY1LDgxLDkyLDQ3LDg2LDIxNyw3LDQ1LDEyMCw4MSwxMzAsMzEsMjM2LDI0Myw3Niw3OCwzLDQ1LDEwNSwxNzIsMjIwLDcxLDQ4LDIyMCw5NCwxOTYsMjQ5LDE2MywxOTMsMTMzLDUwLDIzNiwyMDUsMjAsNTUsMiw2MywxNCwxMjcsNjksMTEzLDIxMiwyMDQsMTIsNTgsNzksODksODYsMjksNjEsMTk5LDIwMSw2NCwxNDksNiwxNDQsMTgyLDE1MCwxMjksMzEsMTgsMTY3LDEyMCwyNDgsODIsMTA3LDI1LDE0MywxMjgsMjcsMTYxLDI4LDI1LDE1MywxODMsMjE3LDIzOCw3OCwxODYsMTA2LDkyLDI3LDIwMiwyMTksMTY1LDk2LDAsMjE2LDIzNCwxNjksNzMsMTAxLDM5LDE4MiwxMTMsMjE3LDI0MCwxNzAsMTE2LDE3MiwyMjEsMjUwLDIzMyw0OCw0OSwyNDIsODMsMjI3LDkyLDE4MSwxODQsNzIsMjMwLDE4MCwyMSwxNSwxMDgsMTM1LDI1LDM4LDE1MywyNSwxMjQsMjI3LDI2LDE0OSw3MywyMzYsMzksMjExLDI0NCwxNDksNTgsMTgzLDEzMiwyNiwyMjMsMjE5LDE3NCwxNDQsMTE3LDIzMywyMTksMTY1LDIwNSwxNTcsMTU5LDIyMiwxODQsNTIsNDcsMjQxLDIwMSwxMjMsNjUsMjQsNDQsNTUsMjE1LDE3NywxNjgsMjUwLDE3OSwxMTUsMTkwLDIyNywxMjMsMTU4LDE2MywxNzksMjI0LDY5LDE5Niw2NiwyMDcsMjU0LDI0MywxMDEsMjIxLDE5MywxNDAsMjUwLDQsMjgsMjIyLDUyLDk2LDEzOCwxNjAsMzMsMjE4LDY0LDExOCwyMTQsMjM0LDIwMSwxNTIsMTQ4LDkxLDE3OCwxMTEsMTA3LDE0NCwxNDIsNiwxODIsMTAyLDcyLDE4OCwzNCwyMTMsMTgxLDI2LDIyMyw1OCwyNTUsMTAzLDgxLDE3LDQ3LDE2OSwxMSwyNDUsMjI0LDEyMywxNDgsMjE1LDIzNywxODYsMTA3LDc1LDE1Miw5MCwyMDIsMTY2LDIyLDE0OSwxOTcsNSwyNDYsMjM4LDc4LDc2LDIyOSwxMDYsMTk5LDk0LDEyNywxOTUsMCw0NSw4Miw2LDE1OSwxMDMsOTYsMTM4LDIzMSw3MSw0NiwxMDcsNTksMjE2LDM5LDQzLDEyLDIyMSwyNywyMTQsNTYsMTU1LDE0NSw2NiwxODcsMTY5LDI1MCwyMzUsNzgsMjExLDE3OSwyMzksMTgzLDE5OCwxNjMsOTMsNSwxOTYsMjQsMTc0LDE0MywyMjUsMTA2LDEzOSw4OSw5OCwxMywxMjcsMjA3LDE4NCwxOTQsMzAsMSwxNjUsMTk4LDE2OSw4LDE5NywxMTgsODYsMTYzLDIyMSwxMzgsMjMsMjA5LDYxLDExNiw3OSw5OSwyMzMsNDMsMTMwLDYwLDI0NCw4NSwyMjksMjQzLDE3MiwxMjMsMTQ4LDIwMCwxMjAsMTkyLDEyNywyMTEsNTIsMTEsMTU5LDQxLDk1LDIxMiwyMzAsMTg4LDE2OSwxNTYsMTM3LDI5LDIxMiwxMiwxNDgsMTY4LDE0OCwxMzMsMjQzLDQ0LDI0MSwxMzksMTI3LDI0LDI0NiwyMjAsMjI3LDEyNSwyMDksOTcsNjAsNTIsMTYyLDE5MiwxNDYsNDksMTYxLDkyLDEzOCwxMTIsMTg5LDEyOCw1OSwxMjYsMTI1LDQ2LDIwNyw2MCw3OSwyMzEsMTc0LDE1MiwyMDksNjgsMjIzLDIwNSwyLDM4LDE0LDkxLDExNiwxNTksMjU1LDI4LDI3LDE3OCwyNDgsMTY0LDEwNCwxNTgsNzksNjksMjE0LDIzNCwxNTcsMTIsNzUsMTYzLDgzLDI1MywyNDUsMjAyLDYxLDIxMywxNzYsNiwxOTcsMjMwLDI5LDIwOCwxNjYsMjUzLDE5NCwyNTQsMjM1LDI5LDE0MSwyNDEsNzAsMjQ5LDE1LDYyLDAsMTQ4LDE2MywxMzUsNTIsMTIyLDQwLDk2LDg3LDMxLDE3OSwxNTIsNTEsMjE2LDEzMywxODQsMTIyLDE5OCwyMDMsNjAsMTE1LDIxOCwxOTEsMTkzLDE2LDE3OCwyNSwxNDgsMjUyLDExMiwxMDQsMTAzLDI1MiwzNiw5MiwyMjEsMjgsMTc5LDQzLDE5OSwxOTgsMTUxLDEyOCwxMDAsMjUyLDIxNywxNjEsMjQ5LDM0LDIwMSwxNzIsMTE4LDUyLDE4MCwyNTIsMTA0LDcsMjIzLDQ0LDExNiwxMDIsMjEyLDIxLDQwLDIyNCwxODQsNTUsMTYzLDIxMCwyMSwyMDcsMTYxLDIzOSw1MSw1NCwxNTUsNDEsMTMzLDE4LDY3LDQ4LDMsMTY1LDEzMCwyNTEsNCw3OSwyMTQsNTcsNzIsMTMwLDE1NywyMTIsMTQ0XTtmdW5jdGlvbiBDZShlLHQsbil7dmFyIGk9ZS5nbCxhPTUscj0uMSxvPS41LHM9MTc1LzE4MCozLjE0MTU5MyxjPTExNS8xODAqMy4xNDE1OTMsZD0xNzMvMTgwKjMuMTQxNTkzLHU9MTE2LzE4MCozLjE0MTU5MyxsPTIuMDQyMDM1NDUscD0wLGY9MCxtPTAsZz1bXSx2PVswLDEsMyw0LDYsNyw5LDEwLDEyLDEzLDE1LDE2LDE4LDE5LDIxLDIyLDI0LDI2LDI5LDMxLDM0LDM2LDM5LDQxLDQ0LDQ2LDQ5LDUxLDU0LDU2LDU5LDYxLDY0LDY1LDY2LDY3LDY4LDY5LDcwLDcyLDczLDc0LDc1LDc2LDc3LDc5LDgwLDgxLDgyLDgzLDg0LDg1LDg3LDg4LDg5LDkwLDkxLDkyLDk0LDk1LDk2LDk3LDk4LDk5LDEwMSwxMDIsMTAzLDEwNCwxMDUsMTA2LDEwNywxMDksMTEwLDExMSwxMTIsMTEzLDExNCwxMTYsMTE3LDExOCwxMTksMTIwLDEyMSwxMjMsMTI0LDEyNSwxMjYsMTI3LDEyOCwxMjksMTMxLDEzMiwxMzMsMTM0LDEzNSwxMzYsMTM4LDEzOSwxNDAsMTQxLDE0MiwxNDMsMTQ1LDE0NiwxNDcsMTQ4LDE0OSwxNTAsMTUxLDE1MywxNTQsMTU1LDE1NiwxNTcsMTU4LDE2MCwxNjEsMTYyLDE2MywxNjQsMTY1LDE2NiwxNjgsMTY5LDE3MCwxNzEsMTcyLDE3MywxNzUsMTc2LDE3NywxNzgsMTc5LDE4MCwxODIsMTgzLDE4NCwxODUsMTg2LDE4NywxODgsMTkwLDE5MSwxOTIsMTkzLDE5NCwxOTUsMTk3LDE5OCwxOTksMjAwLDIwMSwyMDIsMjA0LDIwNSwyMDYsMjA3LDIwOCwyMDksMjEwLDIxMiwyMTMsMjE0LDIxNSwyMTYsMjE3LDIxOSwyMjAsMjIxLDIyMiwyMjMsMjI0LDIyNiwyMjYsMjI2LDIyNywyMjcsMjI3LDIyOCwyMjgsMjI4LDIyOSwyMjksMjI5LDIzMCwyMzAsMjMxLDIzMSwyMzEsMjMyLDIzMiwyMzIsMjMzLDIzMywyMzMsMjM0LDIzNCwyMzUsMjM1LDIzNSwyMzYsMjM2LDIzNiwyMzcsMjM3LDIzNywyMzgsMjM4LDIzOSwyMzksMjM5LDI0MCwyNDAsMjQwLDI0MSwyNDEsMjQxLDI0MiwyNDIsMjQzLDI0MywyNDMsMjQ0LDI0NCwyNDQsMjQ1LDI0NSwyNDUsMjQ2LDI0NiwyNDYsMjQ3LDI0NywyNDcsMjQ4LDI0OCwyNDgsMjQ5LDI0OSwyNDksMjUwLDI1MCwyNTAsMjUxLDI1MSwyNTEsMjUyLDI1MiwyNTIsMjUzLDI1MywyNTMsMjU0LDI1NCwyNTQsMjU1XSxoPVswLDEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE3LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMyLDMzLDM1LDM2LDM3LDM5LDQwLDQyLDQzLDQ0LDQ2LDQ3LDQ5LDUwLDUxLDUzLDU0LDU2LDU3LDU4LDU5LDYxLDYyLDYzLDY0LDY2LDY3LDY4LDY5LDcxLDcyLDczLDc0LDc2LDc3LDc4LDc5LDgxLDgyLDgzLDg0LDg2LDg3LDg4LDkwLDkxLDkyLDkzLDk1LDk2LDk3LDk4LDEwMCwxMDEsMTAyLDEwMywxMDUsMTA2LDEwNywxMDgsMTEwLDExMSwxMTIsMTEzLDExNSwxMTYsMTE3LDExOCwxMjAsMTIxLDEyMiwxMjQsMTI1LDEyNiwxMjcsMTI5LDEzMCwxMzEsMTMyLDEzNCwxMzUsMTM2LDEzNywxMzksMTQwLDE0MSwxNDIsMTQ0LDE0NSwxNDYsMTQ3LDE0OSwxNTAsMTUxLDE1MiwxNTQsMTU1LDE1NiwxNTgsMTU5LDE2MCwxNjEsMTYzLDE2NCwxNjUsMTY2LDE2OCwxNjksMTcwLDE3MSwxNzMsMTc0LDE3NSwxNzYsMTc4LDE3OSwxODAsMTgxLDE4MywxODQsMTg1LDE4NiwxODgsMTg5LDE5MCwxOTIsMTkzLDE5NCwxOTUsMTk3LDE5OCwxOTksMjAwLDIwMiwyMDMsMjA0LDIwNSwyMDcsMjA4LDIwOSwyMTAsMjEyLDIxMywyMTQsMjE1LDIxNywyMTgsMjE5LDIyMCwyMjIsMjIzLDIyNCwyMjYsMjI2LDIyNiwyMjcsMjI3LDIyOCwyMjgsMjI5LDIyOSwyMzAsMjMwLDIzMSwyMzEsMjMyLDIzMiwyMzMsMjMzLDIzNCwyMzQsMjM0LDIzNSwyMzUsMjM2LDIzNiwyMzcsMjM3LDIzOCwyMzgsMjM5LDIzOSwyNDAsMjQwLDI0MSwyNDEsMjQyLDI0MiwyNDMsMjQzLDI0MywyNDQsMjQ0LDI0NCwyNDUsMjQ1LDI0NSwyNDYsMjQ2LDI0NiwyNDcsMjQ3LDI0NywyNDgsMjQ4LDI0OCwyNDksMjQ5LDI0OSwyNTAsMjUwLDI1MCwyNTEsMjUxLDI1MSwyNTIsMjUyLDI1MiwyNTMsMjUzLDI1MywyNTQsMjU0LDI1NCwyNTVdLFM9WzEsMiwzLDQsNSw2LDcsOCw5LDEwLDExLDEyLDEzLDE0LDE1LDE2LDE4LDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2LDI3LDI4LDI5LDMwLDMxLDMyLDMzLDM1LDM2LDM3LDM4LDM5LDQwLDQxLDQzLDQ0LDQ1LDQ2LDQ3LDQ4LDUwLDUxLDUyLDUzLDU0LDU1LDU2LDU4LDU5LDYwLDYxLDYyLDYzLDY1LDY2LDY3LDY4LDY5LDcwLDcyLDczLDc0LDc2LDc3LDc4LDgwLDgxLDgzLDg0LDg1LDg3LDg4LDg5LDkxLDkyLDk0LDk1LDk2LDk4LDk5LDEwMCwxMDIsMTAzLDEwNSwxMDYsMTA3LDEwOSwxMTAsMTExLDExMywxMTQsMTE2LDExNywxMTgsMTIwLDEyMSwxMjIsMTI0LDEyNSwxMjcsMTI4LDEyOSwxMzEsMTMyLDEzMywxMzUsMTM2LDEzOCwxMzksMTQwLDE0MiwxNDMsMTQ0LDE0NiwxNDcsMTQ5LDE1MCwxNTEsMTUzLDE1NCwxNTUsMTU3LDE1OCwxNjAsMTYxLDE2MiwxNjMsMTY0LDE2NSwxNjYsMTY3LDE2OCwxNjksMTcwLDE3MSwxNzIsMTczLDE3NCwxNzUsMTc2LDE3NywxNzgsMTc5LDE4MCwxODEsMTgyLDE4MywxODQsMTg1LDE4NiwxODcsMTg4LDE4OSwxOTAsMTkxLDE5MiwxOTIsMTkzLDE5MywxOTQsMTk1LDE5NSwxOTYsMTk3LDE5NywxOTgsMTk5LDE5OSwyMDAsMjAxLDIwMSwyMDIsMjAzLDIwMywyMDQsMjA1LDIwNSwyMDYsMjA3LDIwNywyMDgsMjA5LDIwOSwyMTAsMjExLDIxMSwyMTIsMjEzLDIxMywyMTQsMjE1LDIxNSwyMTYsMjE3LDIxNywyMTgsMjE5LDIxOSwyMjAsMjIxLDIyMSwyMjIsMjIzLDIyMywyMjQsMjI1LDIyNSwyMjYsMjI3LDIyNywyMjgsMjI5LDIyOSwyMzAsMjMxLDIzMSwyMzIsMjMzLDIzMywyMzQsMjM1LDIzNSwyMzYsMjM3LDIzNywyMzgsMjM5LDIzOSwyNDAsMjQxLDI0MSwyNDIsMjQzLDI0MywyNDQsMjQ1LDI0NSwyNDYsMjQ3LDI0NywyNDgsMjQ5LDI0OSwyNTAsMjUxLDI1MSwyNTIsMjUzLDI1MywyNTQsMjU1XTt0aGlzLnByb2dyYW09U2UoaSxPZSksdGhpcy5zZXRVbmlmb3Jtcz1mdW5jdGlvbigpe3ZhciB0PWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInVfZmxpcFlcIiksbj1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJ1X2Rlbm9pc2VMZXZlbFwiKTtpLnVuaWZvcm0xZihuLGEpLGkudW5pZm9ybTFmKHQsMSk7dmFyIHY9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwibGlnaHRcIik7aS51bmlmb3JtMWYodixyKTt2YXIgaD1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJyZWRuZXNzXCIpO2kudW5pZm9ybTFmKGgsbyk7dmFyIFM9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwic2tpbl9oZV9tYXhcIiksXz1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJza2luX2hlX21pblwiKSxFPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcInNraW5faGNfbWF4XCIpLEk9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwic2tpbl9oY19taW5cIikseT1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJza2luX2hjX2F4aXNcIiksVD1pLmdldFVuaWZvcm1Mb2NhdGlvbih0aGlzLnByb2dyYW0sXCJmYWN0c19yb3RhdGVfY1wiKSxiPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcImZhY3RzX3JvdGF0ZV9sZVwiKSxSPWkuZ2V0VW5pZm9ybUxvY2F0aW9uKHRoaXMucHJvZ3JhbSxcImZhY3RzX3JvdGF0ZV9nZVwiKTtpLnVuaWZvcm0xZihTLHMpLGkudW5pZm9ybTFmKF8sYyksaS51bmlmb3JtMWYoRSxkKSxpLnVuaWZvcm0xZihJLHUpLGkudW5pZm9ybTFmKHksbCksaS51bmlmb3JtMWYoVCxwKSxpLnVuaWZvcm0xZihiLGYpLGkudW5pZm9ybTFmKFIsbSk7dmFyIEE9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLFwidV9vcmlnaW5JbWFnZVwiKTtpLmFjdGl2ZVRleHR1cmUoaS5URVhUVVJFMiksaS5iaW5kVGV4dHVyZShpLlRFWFRVUkVfMkQsZS5pbnB1dFRleHR1cmUpLGkudW5pZm9ybTFpKEEsMik7Zm9yKHZhciBPPVtcImxpZ2h0ZW5fbHV0XCJdLEM9W2kuVEVYVFVSRTNdLE49MDtOPE8ubGVuZ3RoO04rKyl7dmFyIHc9aS5nZXRVbmlmb3JtTG9jYXRpb24odGhpcy5wcm9ncmFtLE9bTl0pO2kuYWN0aXZlVGV4dHVyZShDW05dKSxpLmJpbmRUZXh0dXJlKGkuVEVYVFVSRV8yRCxnW05dKSxpLnVuaWZvcm0xaSh3LE4rMyl9fSx0aGlzLnNldFBhcmFtZXRlcnM9ZnVuY3Rpb24oZSl7dm9pZCAwIT09ZS5kZW5vaXNlTGV2ZWwmJihhPWUuZGVub2lzZUxldmVsKSx2b2lkIDAhPT1lLmxpZ2h0TGV2ZWwmJihyPWUubGlnaHRMZXZlbCksdm9pZCAwIT09ZS5yZWRuZXNzTGV2ZWwmJihvPWUucmVkbmVzc0xldmVsLHRoaXMuX3VwZGF0ZVJlZG5lc3MobykpLHZvaWQgMCE9PWUubGlnaHRlbmluZ0NvbnRyYXN0TGV2ZWwmJnRoaXMuX3VwZGF0ZUx1dChlLmxpZ2h0ZW5pbmdDb250cmFzdExldmVsKX0sdGhpcy5fdXBkYXRlUmVkbmVzcz1mdW5jdGlvbihlKXt2YXIgdCxuLGk9My4xNDE1OTMsYT1lLHI9YTthPjEmJihhPTEpLGE8MCYmKGE9MCkscj4xJiYocj0xKSxyPDAmJihyPTApLHA9LjgqYSxyPC44JiYocj0wKSwobD0oMTE3LTQqcikvMTgwKmkpPCh1PSgxMTYtNCpyKS8xODAqaSkmJihsPXUpLHU8aS8yJiYodT1pLzIpLGw8aS8yJiYobD1pLzIpLChjPSgxMTUtNCpyKS8xODAqaSk8aS8yJiYoYz1pLzIpLChkPTE3My8xODAqaSk+aSYmKGQ9aSksbD5pJiYobD1pKSwocz0xNzUvMTgwKmkpPmkmJihzPWkpLG49ZC1sLG09KHQ9cy1kKT4uMDE/cCpuL3Q6cCxuPWwtdSxmPSh0PXUtYyk+LjAxP3Aqbi90OnB9LHRoaXMuX3VwZGF0ZUx1dD1mdW5jdGlvbihlKXt2YXIgdD1udWxsOzA9PWUmJih0PWgpLDE9PWUmJih0PVMpLDI9PWUmJih0PXYpO2Zvcih2YXIgbj1bbmV3IFVpbnQ4QXJyYXkodCldLGE9WzI1Nl0scj1bMV0sbz0wO288bi5sZW5ndGg7bysrKWkuYmluZFRleHR1cmUoaS5URVhUVVJFXzJELGdbb10pLGkudGV4SW1hZ2UyRChpLlRFWFRVUkVfMkQsMCxpLkxVTUlOQU5DRSxhW29dLHJbb10sMCxpLkxVTUlOQU5DRSxpLlVOU0lHTkVEX0JZVEUsbltvXSl9LHRoaXMuX2luaXQ9ZnVuY3Rpb24oKXt2YXIgZT1udWxsO2U9aDtmb3IodmFyIHQ9W25ldyBVaW50OEFycmF5KGUpXSxuPVsyNTZdLGE9WzFdLHI9MDtyPHQubGVuZ3RoO3IrKyl7dmFyIG89aS5jcmVhdGVUZXh0dXJlKCk7aS5iaW5kVGV4dHVyZShpLlRFWFRVUkVfMkQsbyksaS50ZXhJbWFnZTJEKGkuVEVYVFVSRV8yRCwwLGkuTFVNSU5BTkNFLG5bcl0sYVtyXSwwLGkuTFVNSU5BTkNFLGkuVU5TSUdORURfQllURSx0W3JdKSxpLnRleFBhcmFtZXRlcmkoaS5URVhUVVJFXzJELGkuVEVYVFVSRV9XUkFQX1MsaS5DTEFNUF9UT19FREdFKSxpLnRleFBhcmFtZXRlcmkoaS5URVhUVVJFXzJELGkuVEVYVFVSRV9XUkFQX1QsaS5DTEFNUF9UT19FREdFKSxpLnRleFBhcmFtZXRlcmkoaS5URVhUVVJFXzJELGkuVEVYVFVSRV9NSU5fRklMVEVSLGkuTElORUFSKSxpLnRleFBhcmFtZXRlcmkoaS5URVhUVVJFXzJELGkuVEVYVFVSRV9NQUdfRklMVEVSLGkuTElORUFSKSxnLnB1c2gobyl9fSx0aGlzLl9pbml0KCl9dmFyIE5lPSExO2Z1bmN0aW9uIHdlKCl7dGhpcy5wcm9ncmFtcz1bXTt2YXIgZT10aGlzLHQ9bnVsbCxuPW51bGw7ZS5nbD1udWxsLGUuaW5wdXRUZXh0dXJlPW51bGw7dmFyIGk9W10sYT1bXSxyPTAsbz0wO2UuX2luaXRHbD1mdW5jdGlvbihuLHMpe2UuaW5wdXRUZXh0dXJlPXQuY3JlYXRlVGV4dHVyZSgpLHQuYmluZFRleHR1cmUodC5URVhUVVJFXzJELGUuaW5wdXRUZXh0dXJlKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1MsdC5DTEFNUF9UT19FREdFKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1QsdC5DTEFNUF9UT19FREdFKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9NSU5fRklMVEVSLHQuTElORUFSKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9NQUdfRklMVEVSLHQuTElORUFSKTtmb3IodmFyIGM9MDtjPDQ7YysrKXt2YXIgZD10LmNyZWF0ZVRleHR1cmUoKTt0LmJpbmRUZXh0dXJlKHQuVEVYVFVSRV8yRCxkKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1MsdC5DTEFNUF9UT19FREdFKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9XUkFQX1QsdC5DTEFNUF9UT19FREdFKSx0LnRleFBhcmFtZXRlcmkodC5URVhUVVJFXzJELHQuVEVYVFVSRV9NSU5fRklMVEVSLHQuTElORUFSKSxjPDI/dC50ZXhJbWFnZTJEKHQuVEVYVFVSRV8yRCwwLHQuUkdCQSxuLHMsMCx0LlJHQkEsdC5VTlNJR05FRF9CWVRFLG51bGwpOnQudGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQsMCx0LlJHQkEscyxuLDAsdC5SR0JBLHQuVU5TSUdORURfQllURSxudWxsKTt2YXIgdT10LmNyZWF0ZUZyYW1lYnVmZmVyKCk7dC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUix1KSx0LmZyYW1lYnVmZmVyVGV4dHVyZTJEKHQuRlJBTUVCVUZGRVIsdC5DT0xPUl9BVFRBQ0hNRU5UMCx0LlRFWFRVUkVfMkQsZCwwKSxpLnB1c2goZCksYS5wdXNoKHUpfXQudmlld3BvcnQoMCwwLG4scykscj1uLG89c30sZS5yZW5kZXI9ZnVuY3Rpb24ocyl7aWYodCl7dmFyIGM9MDtvPT1zLnZpZGVvV2lkdGgmJnI9PT1zLnZpZGVvSGVpZ2h0JiYoYz0yKSx0LnZpZXdwb3J0KDAsMCxzLnZpZGVvV2lkdGgscy52aWRlb0hlaWdodCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsZS5pbnB1dFRleHR1cmUpLHQudGV4SW1hZ2UyRCh0LlRFWFRVUkVfMkQsMCx0LlJHQkEsdC5SR0JBLHQuVU5TSUdORURfQllURSxzKTtmb3IodmFyIGQ9TmU/ZS5wcm9ncmFtcy5sZW5ndGgtMTowLHU9MDt1PD1kO3UrKyl7dmFyIGw9ZS5wcm9ncmFtc1t1XS5wcm9ncmFtO3QudXNlUHJvZ3JhbShsKTt2YXIgcD10LmdldFVuaWZvcm1Mb2NhdGlvbihsLFwidV9pbWFnZVwiKTtlLnByb2dyYW1zW3VdLnNldFVuaWZvcm1zKCksdC5iaW5kRnJhbWVidWZmZXIodC5GUkFNRUJVRkZFUixhW2MrdSUyXSksdC5jbGVhckNvbG9yKDAsMCwwLDEpLHQuY2xlYXIodC5DT0xPUl9CVUZGRVJfQklUKSx0LmRyYXdBcnJheXModC5UUklBTkdMRVMsMCw2KSx0LmFjdGl2ZVRleHR1cmUodC5URVhUVVJFMCksdC5iaW5kVGV4dHVyZSh0LlRFWFRVUkVfMkQsaVtjK3UlMl0pLHQudW5pZm9ybTFpKHAsMCl9dC51c2VQcm9ncmFtKG4pO3ZhciBmPXQuZ2V0VW5pZm9ybUxvY2F0aW9uKG4sXCJ1X2ZsaXBZXCIpO3QudW5pZm9ybTFmKGYsLTEpLHQuYmluZEZyYW1lYnVmZmVyKHQuRlJBTUVCVUZGRVIsbnVsbCksdC5jbGVhckNvbG9yKDAsMCwwLDEpLHQuY2xlYXIodC5DT0xPUl9CVUZGRVJfQklUKSx0LmRyYXdBcnJheXModC5UUklBTkdMRVMsMCw2KX19LGUuc2V0RW5hYmxlQmVhdXR5PWZ1bmN0aW9uKGUpe05lPWV9LGUuaW5pdD1mdW5jdGlvbihpLGEscil7aWYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFdlYkdMUmVuZGVyaW5nQ29udGV4dCl0aHJvdyBuZXcgRXJyb3IoXCJOT1RfU1VQUE9SVFwiKTt0PXIuZ2V0Q29udGV4dChcIndlYmdsXCIpLGUuZ2w9dCxlLl9pbml0R2woaSxhKSxlLnByb2dyYW1zLnB1c2gobmV3IEVlKHRoaXMsaSxhKSksZS5wcm9ncmFtcy5wdXNoKG5ldyB5ZSh0aGlzLGksYSkpLGUucHJvZ3JhbXMucHVzaChuZXcgYmUodGhpcyxpLGEpKSxlLnByb2dyYW1zLnB1c2gobmV3IEFlKHRoaXMsaSxhKSksZS5wcm9ncmFtcy5wdXNoKG5ldyBDZSh0aGlzLGksYSkpLG49ZS5wcm9ncmFtc1swXS5wcm9ncmFtfSxlLnJlbGVhc2U9ZnVuY3Rpb24oKXtlLmdsPW51bGwsdD1udWxsLG49bnVsbCxlLmlucHV0VGV4dHVyZT1udWxsLGUucHJvZ3JhbXM9W10saT1bXSxhPVtdfSxlLnNldERlbm9pc2VMZXZlbD1mdW5jdGlvbih0KXtlLnByb2dyYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zZXRQYXJhbWV0ZXJzJiZlLnNldFBhcmFtZXRlcnMoe2Rlbm9pc2VMZXZlbDp0fSl9KX0sZS5zZXRMaWdodExldmVsPWZ1bmN0aW9uKHQpe2UucHJvZ3JhbXMuZm9yRWFjaChmdW5jdGlvbihlKXtlLnNldFBhcmFtZXRlcnMmJmUuc2V0UGFyYW1ldGVycyh7bGlnaHRMZXZlbDp0fSl9KX0sZS5zZXRSZWRuZXNzTGV2ZWw9ZnVuY3Rpb24odCl7ZS5wcm9ncmFtcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc2V0UGFyYW1ldGVycyYmZS5zZXRQYXJhbWV0ZXJzKHtyZWRuZXNzTGV2ZWw6dH0pfSl9LGUuc2V0Q29udHJhc3RMZXZlbD1mdW5jdGlvbih0KXtlLnByb2dyYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zZXRQYXJhbWV0ZXJzJiZlLnNldFBhcmFtZXRlcnMoe2xpZ2h0ZW5pbmdDb250cmFzdExldmVsOnR9KX0pfSxlLnNldFNpemU9ZnVuY3Rpb24odCxuKXtlLnByb2dyYW1zLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zZXRTaXplJiZlLnNldFNpemUodCxuKX0pfX13ZS5faW5zdGFuY2U9bnVsbCx3ZS5nZXRJbnN0YW5jZT1mdW5jdGlvbigpe3JldHVybiB3ZS5faW5zdGFuY2V8fCh3ZS5faW5zdGFuY2U9bmV3IHdlKSx3ZS5faW5zdGFuY2V9O3ZhciBrZT0zMCxEZT1udWxsLExlPSExLE1lPTUsUGU9LjM1LHhlPS41LFZlPTEsVWU9bnVsbCxqZT1udWxsO3ZhciBGZT17YWRkVmlkZW9FZmZlY3RDYXBhYmlsaXR5OmZ1bmN0aW9uKGUpe2UudmlkZW9FZmZlY3Q9e3ZpZGVvQ29udGV4dEluaXRlZDohMSxvcmlnaW5WaWRlb1RyYWNrOm51bGwsY2FudmFzVmlkZW9UcmFjazpudWxsLGN0eDpudWxsfSxlLl9pbml0VmlkZW9Db250ZXh0PWZ1bmN0aW9uKCl7aWYoZS52aWRlb0VmZmVjdC52aWRlb0NvbnRleHRJbml0ZWQpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGluaXQgdmlkZW8gY29udGV4dC4gQWxyZWFkeSBpbml0ZWRcIik7aWYoIWUuc3RyZWFtKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBpbml0IHZpZGVvIGNvbnRleHQuIExvY2FsIFN0cmVhbSBub3QgaW5pdGlhbGl6ZWRcIik7ZS52aWRlb0VmZmVjdC5vcmlnaW5WaWRlb1RyYWNrPWUuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0sZS5hdHRyaWJ1dGVzJiZlLmF0dHJpYnV0ZXMubWF4RnJhbWVSYXRlJiYoa2U9ZS5hdHRyaWJ1dGVzLm1heEZyYW1lUmF0ZSksZS52aWRlb0VmZmVjdC52aWRlb0NvbnRleHRJbml0ZWQ9ITB9LGUuX3JlbmRlcldpdGhXZWJHTD1mdW5jdGlvbihlKXtyZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24odCl7amV8fChqZT1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKSxVZXx8KFVlPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ2aWRlb1wiKSksVWUuc2V0QXR0cmlidXRlKFwiYXV0b3BsYXlcIixcIlwiKSxVZS5zZXRBdHRyaWJ1dGUoXCJtdXRlZFwiLFwiXCIpLFVlLm11dGVkPSEwLFVlLnNldEF0dHJpYnV0ZShcInBsYXlzaW5saW5lXCIsXCJcIiksVWUuc2V0QXR0cmlidXRlKFwic3R5bGVcIixcImRpc3BsYXk6bm9uZVwiKSxVZS5zcmNPYmplY3Q9ZTt2YXIgbj1lLmdldFZpZGVvVHJhY2tzKClbMF0uZ2V0U2V0dGluZ3MoKSxpPW4ud2lkdGgsYT1uLmhlaWdodDtjb25zb2xlLmxvZyhcIldpZHRoOiBcIi5jb25jYXQoaSxcIiwgSGVpZ2h0OiBcIikuY29uY2F0KGEpKSxqZS5zZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiLGkpLGplLnNldEF0dHJpYnV0ZShcImhlaWdodFwiLGEpLFVlLnNldEF0dHJpYnV0ZShcIndpZHRoXCIsaSksVWUuc2V0QXR0cmlidXRlKFwiaGVpZ2h0XCIsYSk7dmFyIHI9d2UuZ2V0SW5zdGFuY2UoKTtyLmluaXQoVWUud2lkdGgsVWUuaGVpZ2h0LGplKSxyLnNldERlbm9pc2VMZXZlbChNZSksci5zZXRMaWdodExldmVsKFBlKSxyLnNldFJlZG5lc3NMZXZlbCh4ZSksci5zZXRDb250cmFzdExldmVsKFZlKSxVZS5hZGRFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLGZ1bmN0aW9uIGUoKXt2YXIgbj1qZS5jYXB0dXJlU3RyZWFtKGtlKTtVZS5yZW1vdmVFdmVudExpc3RlbmVyKFwicGxheWluZ1wiLGUsITApLHQoW24uZ2V0VmlkZW9UcmFja3MoKVswXSxVZV0pfSwhMCksVWUucGxheSgpfSl9LGUuX2Rpc2FibGVFZmZlY3Q9ZnVuY3Rpb24oKXtlLnZpZGVvRWZmZWN0LnZpZGVvQ29udGV4dEluaXRlZHx8ZS5faW5pdFZpZGVvQ29udGV4dCgpO3ZhciB0PWUudmlkZW9FZmZlY3Qub3JpZ2luVmlkZW9UcmFjaztpZighdClyZXR1cm4gby5kZWZhdWx0Lndhcm5pbmcoXCJWaWRlbyB0cmFjayBpcyBudWxsLCBmYWlsIHRvIGRpc2FibGUgdmlkZW8gZWZmZWN0IVwiKSxQcm9taXNlLnJlc29sdmUoKTtpZihlLnBjJiZlLnBjLnBlZXJDb25uZWN0aW9uJiZlLnBjLnBlZXJDb25uZWN0aW9uKXt2YXIgbj0oZS5wYy5wZWVyQ29ubmVjdGlvbiYmZS5wYy5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUudHJhY2smJlwidmlkZW9cIj09ZS50cmFjay5raW5kfSk7aWYobiYmbi5yZXBsYWNlVHJhY2smJnQpcmV0dXJuIG4ucmVwbGFjZVRyYWNrKHQpfXJldHVybiBQcm9taXNlLnJlc29sdmUoKX0sZS5fcmVsZWFzZUVmZmVjdD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0PUxlP2UuX2Rpc2FibGVFZmZlY3QoKTpQcm9taXNlLnJlc29sdmUoKSx3ZS5nZXRJbnN0YW5jZSgpLnJlbGVhc2UoKSxlLnZpZGVvRWZmZWN0LnZpZGVvQ29udGV4dEluaXRlZD0hMSxlLnZpZGVvRWZmZWN0LmNhbnZhc1ZpZGVvVHJhY2s9bnVsbCx0fSxlLl9lbmFibGVFZmZlY3Q9ZnVuY3Rpb24oKXtyZXR1cm4gZS52aWRlb0VmZmVjdC52aWRlb0NvbnRleHRJbml0ZWR8fGUuX2luaXRWaWRlb0NvbnRleHQoKSxlLnZpZGVvRWZmZWN0Lm9yaWdpblZpZGVvVHJhY2s/KGUudmlkZW9FZmZlY3QuY2FudmFzVmlkZW9UcmFjaz8oZS5fc2hvd0VmZmVjdEluTG9jYWxQbGF5ZXIoKSxlLl9yZXBsYWNlV2l0aENhbnZhc1RyYWNrKCkpOmUuX3JlbmRlcldpdGhXZWJHTChlLnN0cmVhbSkudGhlbihmdW5jdGlvbih0KXt2YXIgbj1wZSgpKHQsMiksaT1uWzBdLGE9blsxXTtlLnZpZGVvRWZmZWN0LmNhbnZhc1ZpZGVvVHJhY2s9aTt2YXIgcj13ZS5nZXRJbnN0YW5jZSgpO3JlcXVlc3RBbmltYXRpb25GcmFtZShmdW5jdGlvbiB0KCl7TGUmJnIucmVuZGVyKGEpLGUudmlkZW9FZmZlY3QudmlkZW9Db250ZXh0SW5pdGVkJiZyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodCl9KSxtLmlzQ2hyb21lKCkmJmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJ2aXNpYmlsaXR5Y2hhbmdlXCIsZnVuY3Rpb24oKXtkb2N1bWVudC5oaWRkZW4sZG9jdW1lbnQuaGlkZGVuP0RlPWZ1bmN0aW9uKGUsdCl7dmFyIG49dC8xZTMsaT1uZXcgQXVkaW9Db250ZXh0LGE9aS5jcmVhdGVHYWluKCk7YS5nYWluLnZhbHVlPTAsYS5jb25uZWN0KGkuZGVzdGluYXRpb24pLGZ1bmN0aW9uIHQoKXt2YXIgbz1pLmNyZWF0ZU9zY2lsbGF0b3IoKTtvLm9uZW5kZWQ9dCxvLmNvbm5lY3QoYSksby5zdGFydCgwKSxvLnN0b3AoaS5jdXJyZW50VGltZStuKSxlKGkuY3VycmVudFRpbWUpLHImJihvLm9uZW5kZWQ9ZnVuY3Rpb24oKXtpLmNsb3NlKCl9KX0oKTt2YXIgcj0hMTtyZXR1cm4gZnVuY3Rpb24oKXtyPSEwfX0oZnVuY3Rpb24oKXtMZSYmci5yZW5kZXIoYSl9LGtlKTpEZSYmKERlKCksRGU9bnVsbCl9LCExKSxlLl9zaG93RWZmZWN0SW5Mb2NhbFBsYXllcigpLGUuX3JlcGxhY2VXaXRoQ2FudmFzVHJhY2soKX0pLFByb21pc2UucmVzb2x2ZSgpKTooby5kZWZhdWx0Lndhcm5pbmcoXCJWaWRlbyB0cmFjayBpcyBudWxsLCBmYWlsIHRvIGVuYWJsZSB2aWRlbyBlZmZlY3QhXCIpLFByb21pc2UucmVzb2x2ZSgpKX0sZS5fc2hvd0VmZmVjdEluTG9jYWxQbGF5ZXI9ZnVuY3Rpb24oKXtpZihlLnBsYXllcil7dmFyIHQ9ZS5wbGF5ZXIuZGl2LmNoaWxkcmVuWzBdO2lmKFwibm9uZVwiIT09dC5zdHlsZS5kaXNwbGF5JiYoZS5wbGF5ZXIuZGl2LmFwcGVuZENoaWxkKGplKSxcInZpZGVvXCI9PT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKSkpe3ZhciBuPXQuZ2V0QXR0cmlidXRlKFwic3R5bGVcIik7amUuc2V0QXR0cmlidXRlKFwic3R5bGVcIixuKSxcIm5vbmVcIiE9PXQuc3R5bGUuZGlzcGxheSYmKHQuc3R5bGUuZGlzcGxheT1cIm5vbmVcIil9fX0sZS5fcmVtb3ZlRWZmZWN0RnJvbUxvY2FsUGxheWVyPWZ1bmN0aW9uKCl7aWYoZS5wbGF5ZXImJmUucGxheWVyLmRpdiYmTGUmJmplKXtlLnBsYXllci5kaXYucmVtb3ZlQ2hpbGQoamUpO3ZhciB0PWUucGxheWVyLmRpdi5jaGlsZHJlblswXTtcInZpZGVvXCI9PT10LnRhZ05hbWUudG9Mb3dlckNhc2UoKSYmKGplLnN0eWxlLmRpc3BsYXk9XCJub25lXCIsdC5zdHlsZS5kaXNwbGF5PVwiYmxvY2tcIil9fSxlLl9yZXBsYWNlV2l0aENhbnZhc1RyYWNrPWZ1bmN0aW9uKCl7dmFyIHQ9bnVsbDtlLnBjJiZlLnBjLnBlZXJDb25uZWN0aW9uJiZlLnBjLnBlZXJDb25uZWN0aW9uJiYodD0oZS5wYy5wZWVyQ29ubmVjdGlvbiYmZS5wYy5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkpLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUudHJhY2smJlwidmlkZW9cIj09ZS50cmFjay5raW5kfSkpLHQmJnQucmVwbGFjZVRyYWNrJiZlLnZpZGVvRWZmZWN0LmNhbnZhc1ZpZGVvVHJhY2smJnQucmVwbGFjZVRyYWNrKGUudmlkZW9FZmZlY3QuY2FudmFzVmlkZW9UcmFjayl9LGUuc2V0QmVhdXR5RWZmZWN0T3B0aW9ucz0odD11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiB0KG4saSl7dmFyIGE7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDppZihPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKG4sXCJlbmFibGVkXCIpLGE9d2UuZ2V0SW5zdGFuY2UoKSxMZT09bil7dC5uZXh0PTEzO2JyZWFrfWlmKGEuc2V0RW5hYmxlQmVhdXR5KG4pLCFuKXt0Lm5leHQ9OTticmVha31yZXR1cm4gdC5uZXh0PTcsZS5fZW5hYmxlRWZmZWN0KCk7Y2FzZSA3OnQubmV4dD0xMjticmVhaztjYXNlIDk6cmV0dXJuIGUuX3JlbW92ZUVmZmVjdEZyb21Mb2NhbFBsYXllcigpLHQubmV4dD0xMixlLl9yZWxlYXNlRWZmZWN0KCk7Y2FzZSAxMjpMZT1uO2Nhc2UgMTM6aWYobil7dC5uZXh0PTE1O2JyZWFrfXJldHVybiB0LmFicnVwdChcInJldHVyblwiKTtjYXNlIDE1OmlmKCFpKXt0Lm5leHQ9MTk7YnJlYWt9T2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKGksXCJvcHRpb25zXCIpLHQubmV4dD0yMDticmVhaztjYXNlIDE5OnJldHVybiB0LmFicnVwdChcInJldHVyblwiKTtjYXNlIDIwOmlmKHZvaWQgMCE9PWkuc21vb3RobmVzc0xldmVsJiYoT2JqZWN0KHJlLmNoZWNrVmFsaWRGbG9hdE51bWJlcikoaS5zbW9vdGhuZXNzTGV2ZWwsXCJzbW9vdGhuZXNzTGV2ZWxcIiwwLDEpLChNZT0xMCppLnNtb290aG5lc3NMZXZlbCk8LjEmJihNZT0uMSksYS5zZXREZW5vaXNlTGV2ZWwoTWUpKSx2b2lkIDAhPT1pLmxpZ2h0ZW5pbmdMZXZlbCYmKE9iamVjdChyZS5jaGVja1ZhbGlkRmxvYXROdW1iZXIpKGkubGlnaHRlbmluZ0xldmVsLFwibGlnaHRlbmluZ0xldmVsXCIsMCwxKSwoUGU9aS5saWdodGVuaW5nTGV2ZWwvMik8LjAxJiYoUGU9LjAxKSxhLnNldExpZ2h0TGV2ZWwoUGUpKSx2b2lkIDAhPT1pLnJlZG5lc3NMZXZlbCYmKE9iamVjdChyZS5jaGVja1ZhbGlkRmxvYXROdW1iZXIpKGkucmVkbmVzc0xldmVsLFwicmVkbmVzc0xldmVsXCIsMCwxKSwoeGU9aS5yZWRuZXNzTGV2ZWwpPC4wMSYmKHhlPS4wMSksYS5zZXRSZWRuZXNzTGV2ZWwoeGUpKSx2b2lkIDA9PT1pLmxpZ2h0ZW5pbmdDb250cmFzdExldmVsKXt0Lm5leHQ9Mjg7YnJlYWt9aWYoMD09PWkubGlnaHRlbmluZ0NvbnRyYXN0TGV2ZWx8fDE9PT1pLmxpZ2h0ZW5pbmdDb250cmFzdExldmVsfHwyPT09aS5saWdodGVuaW5nQ29udHJhc3RMZXZlbCl7dC5uZXh0PTI2O2JyZWFrfXRocm93IG5ldyBFcnJvcihcIkludmFsaWQgbGlnaHRlbmluZ0NvbnRyYXN0TGV2ZWw6IFRoZSB2YWx1ZSBzaG91bGQgYmUgMCwgMSBvciAyLlwiKTtjYXNlIDI2OlZlPXBhcnNlRmxvYXQoaS5saWdodGVuaW5nQ29udHJhc3RMZXZlbCksYS5zZXRDb250cmFzdExldmVsKFZlKTtjYXNlIDI4OmNhc2VcImVuZFwiOnJldHVybiB0LnN0b3AoKX19LHQsdGhpcyl9KSksZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KTt2YXIgdH0scmVzdG9yZVZpZGVvRWZmZWN0OmZ1bmN0aW9uKGUpe3JldHVybiBMZT9lLl9lbmFibGVFZmZlY3QoKTpQcm9taXNlLnJlc29sdmUoKX0sZGlzYWJsZVZpZGVvRWZmZWN0OmZ1bmN0aW9uKGUpe3JldHVybiBlLl9yZWxlYXNlRWZmZWN0P2UuX3JlbGVhc2VFZmZlY3QoKTpQcm9taXNlLnJlc29sdmUoKX0sYXBwbHlFZmZlY3RJblBsYXllcjpmdW5jdGlvbihlKXtMZSYmamUmJmUuX3Nob3dFZmZlY3RJbkxvY2FsUGxheWVyKCl9LHJlbW92ZUVmZmVjdEZyb21Mb2NhbFBsYXllcjpmdW5jdGlvbihlKXtlLl9yZW1vdmVFZmZlY3RGcm9tTG9jYWxQbGF5ZXIoKX0scmVwbGFjZVdpdGhDYW52YXNUcmFjazpmdW5jdGlvbihlKXtMZSYmZS5fcmVwbGFjZVdpdGhDYW52YXNUcmFjaygpfSxjaGVja1ZpZGVvRWZmZWN0RW5hYmxlZDpmdW5jdGlvbihlKXtpZihMZSYmZS52aWRlb0VmZmVjdCYmZS52aWRlb0VmZmVjdC52aWRlb0NvbnRleHRJbml0ZWQpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIk9wZXJhdGlvbiBub3QgcGVybWl0dGVkOiBcIi5jb25jYXQoXCJWSURFT19FRkZFQ1RfRU5BQkxFRFwiKSksXCJWSURFT19FRkZFQ1RfRU5BQkxFRFwiO3JldHVybiExfX0sQmU9YSg4KSxIZT1hLm4oQmUpLFdlPWZ1bmN0aW9uKGUpe09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShlLFwicHJvZmlsZU5hbWVcIiksLTE9PT0oZT1lLnRvTG93ZXJDYXNlKCkpLmluZGV4T2YoXCJfXCIpJiYoZSs9XCJfMVwiKSxPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKGUsXCJwcm9maWxlTmFtZVwiLE9iamVjdC5rZXlzKHIuU1VQUE9SVF9SRVNPTFVUSU9OX0xJU1QpKTt2YXIgdD1yLlNVUFBPUlRfUkVTT0xVVElPTl9MSVNUW2VdO3R8fChlPU9iamVjdChyLmdldFBhcmFtZXRlcikoXCJERUZBVUxUX1BST0ZJTEVcIiksdD1yLlNVUFBPUlRfUkVTT0xVVElPTl9MSVNUW2VdKTt2YXIgbj17cHJvZmlsZU5hbWU6ZSx2aWRlbzp7d2lkdGg6dFswXSxoZWlnaHQ6dFsxXX0sYXR0cmlidXRlczp7cmVzb2x1dGlvbjpcIlwiLmNvbmNhdCh0WzBdLFwieFwiKS5jb25jYXQodFsxXSksbWluRnJhbWVSYXRlOnRbMl0sbWF4RnJhbWVSYXRlOnRbM10sbWluVmlkZW9CVzp0WzRdLG1heFZpZGVvQlc6dFs1XX19O3JldHVybiB0WzJdJiZ0WzNdJiYobi52aWRlby5mcmFtZVJhdGU9e2lkZWFsOnRbMl0sbWF4OnRbM119KSx0WzZdJiZ0WzddJiYobi5zY3JlZW49e3dpZHRoOnRbMF0saGVpZ2h0OnRbMV0sZnJhbWVSYXRlOnttaW46dFs2XSxtYXg6dFs3XX19KSxufSxHZT1mdW5jdGlvbihlKXtyZXR1cm4gT2JqZWN0LmtleXMoci5TVVBQT1JUX1JFU09MVVRJT05fTElTVCkuZmlsdGVyKGZ1bmN0aW9uKHQpe3ZhciBuPXIuU1VQUE9SVF9SRVNPTFVUSU9OX0xJU1RbdF0saT1bXCJ3aWR0aFwiLFwiaGVpZ2h0XCIsXCJmcmFtZVJhdGVcIl07Zm9yKHZhciBhIGluIGkpe3ZhciBvPWlbYV07aWYoZVtvXSYmblthXSl7aWYoXCJudW1iZXJcIj09dHlwZW9mIGVbb10ubWF4JiZlW29dLm1heDxuW2FdKXJldHVybiExO2lmKFwibnVtYmVyXCI9PXR5cGVvZiBlW29dLm1pbiYmZVtvXS5taW4+blthXSlyZXR1cm4hMX19cmV0dXJuITB9KS5yZXZlcnNlKCl9LHFlPWZ1bmN0aW9uKGUpe3ZhciB0PXIuQVVESU9fUFJPRklMRV9TRVRUSU5HU1tlXXx8ci5BVURJT19QUk9GSUxFX1NFVFRJTkdTLmRlZmF1bHQ7cmV0dXJue2hpZ2hRdWFsaXR5OnRbMF0sc3RlcmVvOnRbMV0sc3BlZWNoOnRbMl0sbG93UXVhbGl0eTp0WzNdfX07dmFyIFllPWZ1bmN0aW9uKGUpe3ZhciB0PWMoKTtpZih0LnBhcmFtcz1TKCkoe30sZSksdC5zdHJlYW09ZS5zdHJlYW0sdC51cmw9ZS51cmwsdC5vbkNsb3NlPXZvaWQgMCx0LmxvY2FsPSExLHQudmlkZW9Tb3VyY2U9ZS52aWRlb1NvdXJjZSx0LmF1ZGlvU291cmNlPWUuYXVkaW9Tb3VyY2UsZS52aWRlbz0hKCFlLnZpZGVvU291cmNlJiYhZS52aWRlbyksdC52aWRlbz1lLnZpZGVvLGUuYXVkaW89ISghZS5hdWRpb1NvdXJjZSYmIWUuYXVkaW8pLHQuYXVkaW89ZS5hdWRpbyx0LnNjcmVlbj0hIWUuc2NyZWVuLHQuc2NyZWVuQXVkaW89ISFlLnNjcmVlbkF1ZGlvLHQuc2NyZWVuQXR0cmlidXRlcz17d2lkdGg6MTkyMCxoZWlnaHQ6MTA4MCxtYXhGcjo1LG1pbkZyOjF9LHQudmlkZW9TaXplPWUudmlkZW9TaXplLHQucGxheWVyPXZvaWQgMCx0LmF1ZGlvTGV2ZWxIZWxwZXI9bnVsbCxlLmF0dHJpYnV0ZXM9ZS5hdHRyaWJ1dGVzfHx7fSx0LmF0dHJpYnV0ZXM9ZS5hdHRyaWJ1dGVzLHQubWljcm9waG9uZUlkPWUubWljcm9waG9uZUlkLHQuY2FtZXJhSWQ9ZS5jYW1lcmFJZCx0LmZhY2luZ01vZGU9ZS5mYWNpbmdNb2RlLHQuaW5Td2l0Y2hEZXZpY2U9ITEsdC51c2VyTXV0ZVZpZGVvPSExLHQudXNlck11dGVBdWRpbz0hMSx0LnBlZXJNdXRlVmlkZW89ITEsdC5wZWVyTXV0ZUF1ZGlvPSExLHQubG93U3RyZWFtPW51bGwsdC52aWRlb1dpZHRoPTAsdC52aWRlb0hlaWdodD0wLHQuc3RyZWFtSWQ9ZS5zdHJlYW1JRCx0LnVzZXJJZD1udWxsLHQubWlycm9yPSExIT09ZS5taXJyb3IsdC5EVFg9ZS5hdWRpb1Byb2Nlc3NpbmcmJmUuYXVkaW9Qcm9jZXNzaW5nLkRUWCx0LmF1ZGlvUHJvY2Vzc2luZz1lLmF1ZGlvUHJvY2Vzc2luZyx0LmhpZ2hRdWFsaXR5PSExLHQuc3RlcmVvPSExLHQuc3BlZWNoPSExLHQuc2NyZWVufHxkZWxldGUgdC5zY3JlZW4sISh2b2lkIDA9PT10LnZpZGVvU2l6ZXx8dC52aWRlb1NpemUgaW5zdGFuY2VvZiBBcnJheSYmND09PXQudmlkZW9TaXplLmxlbmd0aCkpdGhyb3cgRXJyb3IoXCJJbnZhbGlkIFZpZGVvIFNpemVcIik7ZnVuY3Rpb24gbigpe3ZhciBlPXt9O3QuZ2V0VmlkZW9UcmFjaygpPT09dGhpcz8oby5kZWZhdWx0LmRlYnVnKFwiVmlkZW8gVHJhY2sgRW5kZWRcIiksZS50eXBlPVwidmlkZW9UcmFja0VuZGVkXCIsZS50cmFjaz10aGlzKTp0LmdldEF1ZGlvVHJhY2soKT09PXRoaXM/KG8uZGVmYXVsdC5kZWJ1ZyhcIkF1ZGlvIFRyYWNrIEVuZGVkXCIpLGUudHlwZT1cImF1ZGlvVHJhY2tFbmRlZFwiLGUudHJhY2s9dGhpcyk6by5kZWZhdWx0LmRlYnVnKFwiRGV0YWNoZWQgVHJhY2sgZW5kZWRcIix0aGlzLmtpbmQsdGhpcy5sYWJlbCx0aGlzKSxlLnR5cGUmJnQuZGlzcGF0Y2hFdmVudChlKX1yZXR1cm4gdC52aWRlb1NpemU9WzY0MCw0ODAsNjQwLDQ4MF0sdm9pZCAwIT09ZS5sb2NhbCYmITAhPT1lLmxvY2FsfHwodC5sb2NhbD0hMCksdC5pbml0aWFsaXplZD0hdC5sb2NhbCx0Ll9zdHJlYW1Jbml0SUQ9bnVsbCxmdW5jdGlvbihlKXtlLmF1ZGlvTWl4aW5nPXthdWRpb0NvbnRleHRJbml0ZWQ6ITEsZGVmYXVsdFZvbHVtZToxMDAsaW5FYXJNb25pdG9yaW5nOlwiRklMRVwiLHNvdW5kczp7fSxzdGF0ZXM6e0lETEU6XCJJRExFXCIsU1RBUlRJTkc6XCJTVEFSVElOR1wiLEJVU1k6XCJCVVNZXCIsUEFVU0VEOlwiUEFVU0VEXCJ9LGluRWFyTW9uaXRvcmluZ01vZGVzOntOT05FOlwiTk9ORVwiLEZJTEU6XCJGSUxFXCIsTUlDUk9QSE9ORTpcIk1PQ1JPUEhPTkVcIixBTEw6XCJBTExcIn0sY3R4Om51bGwsbWVkaWFTdHJlYW1Tb3VyY2U6bnVsbCxtZWRpYVN0cmVhbURlc3Q6bnVsbCxidWZmZXI6e319LGUuX2luaXRTb3VuZElmTm90RXhpc3RzPWZ1bmN0aW9uKHQsbil7ZS5hdWRpb01peGluZy5zb3VuZHNbdF18fChlLmF1ZGlvTWl4aW5nLnNvdW5kc1t0XT17c291bmRJZDp0LHN0YXRlOlwiSURMRVwiLG11dGVkOmUudXNlck11dGVBdWRpbyxmaWxlUGF0aDpuLHZvbHVtZTplLmF1ZGlvTWl4aW5nLmRlZmF1bHRWb2x1bWUsc3RhcnRBdDpudWxsLHN0YXJ0T2Zmc2V0Om51bGwscGF1c2VBdDpudWxsLHBhdXNlT2Zmc2V0Om51bGwscmVzdW1lQXQ6bnVsbCxyZXN1bWVPZmZzZXQ6bnVsbCxzdG9wQXQ6bnVsbCxvcHRpb25zOm51bGwsc291cmNlOm51bGx9KX0sZS5faW5pdFNvdW5kSWZOb3RFeGlzdHMoLTEpLGUubG9hZEF1ZGlvQnVmZmVyPWZ1bmN0aW9uKHQsbixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazppLG5hbWU6XCJTdHJlYW0ubG9hZEF1ZGlvQnVmZmVyXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobixcInVybFwiLDEsMTAyNCwhMSksT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKHQsXCJpZFwiLDEsMTAyNCwhMSk7dmFyIHI9ZnVuY3Rpb24odCl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBsb2FkQXVkaW9CdWZmZXIgRmFpbGVkOiBcIikrdCksYShWLkxPQURfQVVESU9fRkFJTEVEKX0sYz1uZXcgWE1MSHR0cFJlcXVlc3Q7Yy5vcGVuKFwiR0VUXCIsbiwhMCksYy5yZXNwb25zZVR5cGU9XCJhcnJheWJ1ZmZlclwiLGMub25sb2FkPWZ1bmN0aW9uKCl7aWYoYy5zdGF0dXM+NDAwKXIoXCJcIi5jb25jYXQoYy5zdGF0dXMsXCIgXCIpLmNvbmNhdChjLnN0YXR1c1RleHQpKTtlbHNle3ZhciBuPWMucmVzcG9uc2U7ZS5hdWRpb01peGluZy5hdWRpb0NvbnRleHRJbml0ZWR8fGUuX2luaXRBdWRpb0NvbnRleHQoKSxlLmF1ZGlvTWl4aW5nLmN0eC5kZWNvZGVBdWRpb0RhdGEobixmdW5jdGlvbihuKXtlLmF1ZGlvTWl4aW5nLmJ1ZmZlclt0XT1uLGEobnVsbCl9LGZ1bmN0aW9uKHQpe28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gZGVjb2RlQXVkaW9EYXRhIEZhaWxlZDogXCIpLHQpLGEodCl9KX19LGMub25lcnJvcj1mdW5jdGlvbigpe3JldHVybiByKFwibG9hZCBlcnJvclwiKX0sYy5vbnRpbWVvdXQ9ZnVuY3Rpb24oKXtyZXR1cm4gcihcInRpbWVvdXRcIil9LGMuc2VuZCgpfSxlLmNyZWF0ZUF1ZGlvQnVmZmVyU291cmNlPWZ1bmN0aW9uKHQpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uY3JlYXRlQXVkaW9CdWZmZXJTb3VyY2VcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKGUuYXVkaW9NaXhpbmcuYnVmZmVyW3QuaWRdKXt2YXIgaT1lLmF1ZGlvTWl4aW5nLmJ1ZmZlclt0LmlkXSxhPWUuYXVkaW9NaXhpbmcuY3R4LmNyZWF0ZUJ1ZmZlclNvdXJjZSgpO2EuYnVmZmVyPWk7dmFyIHI9ZS5hdWRpb01peGluZy5jdHguY3JlYXRlR2FpbigpO2lmKGEuY29ubmVjdChyKSxyLmNvbm5lY3QoZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbURlc3QpLGEuZ2Fpbk5vZGU9cix0Lmxvb3ApYS5sb29wPSEwLGEuc3RhcnQoMCx0LnBsYXlUaW1lLzFlMyk7ZWxzZSBpZih0LmN5Y2xlPjEpaWYoT2JqZWN0KG0uaXNDaHJvbWUpKCkpe2EubG9vcD0hMDt2YXIgYz10LmN5Y2xlKmkuZHVyYXRpb24qMWUzLSh0LnBsYXlUaW1lfHwwKTthLnN0YXJ0KDAsdC5wbGF5VGltZS8xZTMsYy8xZTMpfWVsc2Ugby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIEN5Y2xlIFBhcmFtIGlzIGlnbm9yZWQgYnkgY3VycmVudCBicm93c2VyXCIpKSxhLnN0YXJ0KDAsdC5wbGF5VGltZS8xZTMpO2Vsc2UgYS5zdGFydCgwLHQucGxheVRpbWUvMWUzKTt2YXIgZD1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdO3JldHVybiBkLnNvdXJjZT1hLGUuX2ZsdXNoQXVkaW9NaXhpbmdNdXRlU3RhdHVzKCksYS5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIixmdW5jdGlvbigpe2E9PT1kLnNvdXJjZSYmZS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYXVkaW9Tb3VyY2VFbmRlZFwiLHNvdW5kSWQ6dC5zb3VuZElkLHNvdXJjZTphLHNvdW5kOmR9KX0pLG4oKSxhfXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIFwiKSxcIkFVRElPQlVGRkVSX05PVF9GT1VORFwiLHQuaWQpLG4oITEpLCExfSxlLm9uKFwiYXVkaW9Tb3VyY2VFbmRlZFwiLGZ1bmN0aW9uKHQpe3ZhciBuPXQuc291cmNlLGk9dC5zb3VuZDtpJiZpLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuQlVTWSYmIWkucGF1c2VBdCYmKGkuc3RhdGU9ZS5hdWRpb01peGluZy5zdGF0ZXMuSURMRSxpLnN0YXJ0QXQ9bnVsbCxpLnN0YXJ0T2Zmc2V0PW51bGwsaS5yZXN1bWVBdD1udWxsLGkucmVzdW1lT2Zmc2V0PW51bGwsbi5nYWluTm9kZSYmbi5nYWluTm9kZS5kaXNjb25uZWN0JiZuLmdhaW5Ob2RlLmRpc2Nvbm5lY3QoKSxuLmJ1ZmZlcj1udWxsLGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1Tb3VyY2UuY29ubmVjdChlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtRGVzdCkpfSksZS5jbGVhckF1ZGlvQnVmZmVyU291cmNlPWZ1bmN0aW9uKCl7ZS5hdWRpb0J1ZmZlclNvdXJjZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RvcCgpfSl9LGUuX2lzU291bmRFeGlzdHM9ZnVuY3Rpb24odCl7cmV0dXJuISFlLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdfHwoby5kZWZhdWx0LmVycm9yKFwiU291bmRJZCBub3QgZXhpc3RzLiAjXCIuY29uY2F0KHQuc291bmRJZCkpLCExKX0sZS5faW5pdEF1ZGlvQ29udGV4dD1mdW5jdGlvbigpe2lmKGUuYXVkaW9NaXhpbmcuYXVkaW9Db250ZXh0SW5pdGVkKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBpbml0IGF1ZGlvIGNvbnRleHQuIEFscmVhZHkgaW5pdGVkXCIpO2lmKCFlLnN0cmVhbSl0aHJvdyBuZXcgRXJyb3IoXCJGYWlsZWQgdG8gaW5pdCBhdWRpbyBjb250ZXh0LiBMb2NhbCBTdHJlYW0gbm90IGluaXRpYWxpemVkXCIpO2UuYXVkaW9NaXhpbmcuY3R4PU9iamVjdChvZS5hKSgpLGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1Tb3VyY2U9ZS5hdWRpb01peGluZy5jdHguY3JlYXRlTWVkaWFTdHJlYW1Tb3VyY2UoZS5zdHJlYW0pLGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0PWUuYXVkaW9NaXhpbmcuY3R4LmNyZWF0ZU1lZGlhU3RyZWFtRGVzdGluYXRpb24oKSxlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtU291cmNlLmNvbm5lY3QoZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbURlc3QpO3ZhciB0PWUuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07aWYodCYmZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbURlc3Quc3RyZWFtLmFkZFRyYWNrKHQpLGUuX2lzQXVkaW9NdXRlZCgpPyhlLl91bm11dGVBdWRpbygpLGUuc3RyZWFtPWUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0LnN0cmVhbSxlLl9tdXRlQXVkaW8oKSk6ZS5zdHJlYW09ZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbURlc3Quc3RyZWFtLGUuYXVkaW9MZXZlbEhlbHBlcj1udWxsLGUucGMmJmUucGMucGVlckNvbm5lY3Rpb24mJmUucGMucGVlckNvbm5lY3Rpb24pe3ZhciBuPShlLnBjLnBlZXJDb25uZWN0aW9uJiZlLnBjLnBlZXJDb25uZWN0aW9uLmdldFNlbmRlcnMoKSkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZSYmZS50cmFjayYmXCJhdWRpb1wiPT1lLnRyYWNrLmtpbmR9KSxpPWUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdO24mJm4ucmVwbGFjZVRyYWNrJiZpJiZuLnJlcGxhY2VUcmFjayhpKX1lLmF1ZGlvTWl4aW5nLmF1ZGlvQ29udGV4dEluaXRlZD0hMH0sZS5fY2xlYW51cEF1ZGlvTWl4aW5nPWZ1bmN0aW9uKCl7aWYoZS5hdWRpb01peGluZy5hdWRpb0NvbnRleHRJbml0ZWQpe2Zvcih2YXIgdCBpbiBlLmF1ZGlvTWl4aW5nLnNvdW5kcyl7dmFyIG49ZS5hdWRpb01peGluZy5zb3VuZHNbdF07bi5zdGF0ZSE9PWUuYXVkaW9NaXhpbmcuc3RhdGVzLkJVU1kmJm4uc3RhdGUhPT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5QQVVTRUR8fGUuX3N0b3BPbmVFZmZlY3Qoe3NvdW5kSWQ6dH0pfWUuYXVkaW9MZXZlbEhlbHBlcj1udWxsLGUuYXVkaW9NaXhpbmcuYXVkaW9Db250ZXh0SW5pdGVkPSExfX0sZS5fcmVsb2FkSW5FYXJNb25pdG9yaW5nTW9kZT1mdW5jdGlvbih0KXtpZih0KXtpZighZS5hdWRpb01peGluZy5pbkVhck1vbml0b3JpbmdNb2Rlc1t0XSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBJbnZhbGlkIEluRWFyTW9uaXRvcmluZ01vZGUgXCIpLmNvbmNhdCh0KSk7ZS5hdWRpb01peGluZy5pbkVhck1vbml0b3Jpbmc9dH1zd2l0Y2goZS5hdWRpb01peGluZy5hdWRpb0NvbnRleHRJbml0ZWR8fGUuX2luaXRBdWRpb0NvbnRleHQoKSxlLmF1ZGlvTWl4aW5nLmluRWFyTW9uaXRvcmluZyl7Y2FzZSBlLmF1ZGlvTWl4aW5nLmluRWFyTW9uaXRvcmluZ01vZGVzLkZJTEU6ZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0ZWRUb0Rlc3RpbmF0aW9uJiYoZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5kaXNjb25uZWN0KGUuYXVkaW9NaXhpbmcuY3R4LmRlc3RpbmF0aW9uKSxlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtU291cmNlLmNvbm5lY3RlZFRvRGVzdGluYXRpb249ITEpO2Nhc2UgZS5hdWRpb01peGluZy5pbkVhck1vbml0b3JpbmdNb2Rlcy5BTEw6Zm9yKHZhciBuIGluIGUuYXVkaW9NaXhpbmcuc291bmRzKXt2YXIgaT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1tuXTtpJiZpLnNvdXJjZSYmIWkuc291cmNlLmNvbm5lY3RlZFRvRGVzdGluYXRpb24mJihpLnNvdXJjZS5nYWluTm9kZS5jb25uZWN0KGUuYXVkaW9NaXhpbmcuY3R4LmRlc3RpbmF0aW9uKSxpLnNvdXJjZS5jb25uZWN0ZWRUb0Rlc3RpbmF0aW9uPSEwKX19c3dpdGNoKGUuYXVkaW9NaXhpbmcuaW5FYXJNb25pdG9yaW5nKXtjYXNlIGUuYXVkaW9NaXhpbmcuaW5FYXJNb25pdG9yaW5nTW9kZXMuTUlDUk9QSE9ORTplLmF1ZGlvTWl4aW5nLnNvdXJjZS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QuY29ubmVjdGVkVG9EZXN0aW5hdGlvbiYmKHQuZ2Fpbk5vZGUuZGlzY29ubmVjdChlLmF1ZGlvTWl4aW5nLmN0eC5kZXN0aW5hdGlvbiksdC5jb25uZWN0ZWRUb0Rlc3RpbmF0aW9uPSExKX0pO2Nhc2UgZS5hdWRpb01peGluZy5pbkVhck1vbml0b3JpbmdNb2Rlcy5BTEw6ZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0ZWRUb0Rlc3RpbmF0aW9ufHwoZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5jb25uZWN0KGUuYXVkaW9NaXhpbmcuY3R4LmRlc3RpbmF0aW9uKSxlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtU291cmNlLmNvbm5lY3RlZFRvRGVzdGluYXRpb249ITApfX0sZS5fc3RhcnRBdWRpb01peGluZ0J1ZmZlclNvdXJjZT1mdW5jdGlvbih0KXtlLmF1ZGlvTWl4aW5nLmF1ZGlvQ29udGV4dEluaXRlZHx8ZS5faW5pdEF1ZGlvQ29udGV4dCgpO3ZhciBuPXtzb3VuZElkOnQuc291bmRJZCxpZDp0LmZpbGVQYXRoLGxvb3A6dC5sb29wLGN5Y2xlOnQuY3ljbGUscGxheVRpbWU6dC5wbGF5VGltZXx8MH0saT10LnJlcGxhY2UsYT1lLmNyZWF0ZUF1ZGlvQnVmZmVyU291cmNlKG4pO3JldHVybiBhLnNvdW5kPWUuYXVkaW9NaXhpbmcuc291bmRzW3Quc291bmRJZF0sYT8oYS5hZGRFdmVudExpc3RlbmVyKFwiZW5kZWRcIixlLl9hdWRpb01peGluZ0ZpbmlzaGVkTGlzdGVuZXIse29uY2U6ITB9KSxlLl9yZWxvYWRJbkVhck1vbml0b3JpbmdNb2RlKCksaSYmZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbVNvdXJjZS5kaXNjb25uZWN0KGUuYXVkaW9NaXhpbmcubWVkaWFTdHJlYW1EZXN0KSxhKTpudWxsfSxlLl9zdG9wQXVkaW9NaXhpbmdCdWZmZXJTb3VyY2U9ZnVuY3Rpb24odCl7dmFyIG49ZS5hdWRpb01peGluZy5zb3VuZHNbdC5zb3VuZElkXS5zb3VyY2U7cmV0dXJuIG4/KG4ucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVuZGVkXCIsZS5fYXVkaW9NaXhpbmdGaW5pc2hlZExpc3RlbmVyKSxlLmF1ZGlvTWl4aW5nLm1lZGlhU3RyZWFtU291cmNlLmNvbm5lY3QoZS5hdWRpb01peGluZy5tZWRpYVN0cmVhbURlc3QpLG4uc3RvcCgpLG4uZ2Fpbk5vZGUmJm4uZ2Fpbk5vZGUuZGlzY29ubmVjdCYmbi5nYWluTm9kZS5kaXNjb25uZWN0KCksbi5idWZmZXI9bnVsbCxuKTpudWxsfSxlLl9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cz1mdW5jdGlvbih0KXtmb3IodmFyIG4gaW4gZS5hdWRpb01peGluZy5zb3VuZHMpe3ZhciBpPWUuYXVkaW9NaXhpbmcuc291bmRzW25dO2kmJih2b2lkIDAhPT10JiYoaS5tdXRlZD0hIXQpLGkuc291cmNlJiYoaS5tdXRlZD9pLnNvdXJjZS5nYWluTm9kZS5nYWluLnZhbHVlPTA6aS5zb3VyY2UuZ2Fpbk5vZGUuZ2Fpbi52YWx1ZT1pLnZvbHVtZS8xMDApKX19LGUuX2hhbmRsZUF1ZGlvTWl4aW5nSW52YWxpZFN0YXRlRXJyb3I9ZnVuY3Rpb24odCxuLGkpe3ZhciBhPWUuYXVkaW9NaXhpbmcuc291bmRzW24uc291bmRJZF0scj0tMT09PW4uc291bmRJZD9cIklOVkFMSURfQVVESU9fTUlYSU5HX1NUQVRFXCI6XCJJTlZBTElEX1BMQVlfRUZGRUNUX1NUQVRFXCI7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBDYW5ub3QgXCIpLmNvbmNhdCh0LFwiOiBcIikuY29uY2F0KHIsXCIsIHN0YXRlIGlzIFwiKS5jb25jYXQoYS5zdGF0ZSkpLGkmJmkocil9LGUuX2hhbmRsZUF1ZGlvTWl4aW5nTm9Tb3VyY2VFcnJvcj1mdW5jdGlvbih0LG4saSl7ZS5hdWRpb01peGluZy5zb3VuZHNbbi5zb3VuZElkXS5zdGF0ZT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5JRExFO3ZhciBhPS0xPT09bi5zb3VuZElkP1wiTk9fQVVESU9fTUlYSU5HX1NPVVJDRVwiOlwiTk9fRUZGRUNUX1NPVVJDRVwiO28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gQ2Fubm90IFwiKS5jb25jYXQodCxcIjogXCIpLmNvbmNhdChhKSksaSYmaShhKX0sZS5fZ2V0T25lRWZmZWN0U3RhdGVzPWZ1bmN0aW9uKHQpe3ZhciBuPWUuYXVkaW9NaXhpbmcuc291bmRzW3Quc291bmRJZF07cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIG4/e3N0YXRlOm4uc3RhdGUsc3RhcnRBdDpuLnN0YXJ0QXQscmVzdW1lQXQ6bi5yZXN1bWVBdCxwYXVzZU9mZnNldDpuLnBhdXNlT2Zmc2V0LHBhdXNlQXQ6bi5wYXVzZUF0LHJlc3VtZU9mZnNldDpuLnJlc3VtZU9mZnNldCxzdG9wQXQ6bi5zdG9wQXQsZHVyYXRpb246ZS5fZ2V0T25lRWZmZWN0RHVyYXRpb24odCkscG9zaXRpb246ZS5fZ2V0T25lRWZmZWN0Q3VycmVudFBvc2l0aW9uKHQpfTp7fX19LGUuX2F1ZGlvTWl4aW5nRmluaXNoZWRMaXN0ZW5lcj1mdW5jdGlvbigpe3ZhciB0PXRoaXMuc291bmQ7dC5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLklETEUmJmUuYXVkaW9NaXhpbmcuYnVmZmVyW3Qub3B0aW9ucy5maWxlUGF0aF0mJiF0Lm9wdGlvbnMuY2FjaGVSZXNvdXJjZSYmKG8uZGVmYXVsdC5kZWJ1ZyhcIlJlY3ljbGVkIGJ1ZmZlciBcIi5jb25jYXQodC5vcHRpb25zLmZpbGVQYXRoKSksZGVsZXRlIGUuYXVkaW9NaXhpbmcuYnVmZmVyW3Qub3B0aW9ucy5maWxlUGF0aF0pLC0xPT09dC5zb3VuZElkJiZlLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJhdWRpb01peGluZ0ZpbmlzaGVkXCJ9KX0sZS5fcGxheU9uZUVmZmVjdD1mdW5jdGlvbih0LG4pe09iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KSh0LFwib3B0aW9uc1wiKTt2YXIgaT10LnNvdW5kSWQsYT0odC5maWxlUGF0aCx0LmNhY2hlUmVzb3VyY2UpO2lmKHQuY3ljbGUsdC5sb29wLHQucGxheVRpbWUsdC5yZXBsYWNlLE9iamVjdChtLmlzU2FmYXJpKSgpJiZPYmplY3QobS5nZXRCcm93c2VyVmVyc2lvbikoKTwxMil7dmFyIHI9XCJCUk9XU0VSX05PVF9TVVBQT1JUXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gQ2Fubm90IF9wbGF5T25lRWZmZWN0OiBcIiksciksbihyKX1lLmF1ZGlvTWl4aW5nLmF1ZGlvQ29udGV4dEluaXRlZHx8ZS5faW5pdEF1ZGlvQ29udGV4dCgpLGUuX2luaXRTb3VuZElmTm90RXhpc3RzKGkpO3ZhciBzPWUuYXVkaW9NaXhpbmcuc291bmRzW2ldO2lmKHMuc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5JRExFKXtpZih2b2lkIDAhPT10LmN5Y2xlJiYhdC5jeWNsZT4wKXJldHVybiByPVwiSW52YWxpZCBQYXJtZXRlciBjeWNsZTogXCIrdC5jeWNsZSxvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuc3RyZWFtSWQsXCJdIFwiKS5jb25jYXQoaSksciksbihyKTtpZihPYmplY3QocmUuaXNFbXB0eSkoYSkmJih0LmNhY2hlUmVzb3VyY2U9ITApLHMuc3RhdGU9ZS5hdWRpb01peGluZy5zdGF0ZXMuU1RBUlRJTkcscy5vcHRpb25zPXQsZS5hdWRpb01peGluZy5idWZmZXJbdC5maWxlUGF0aF0pe3ZhciBjPWUuX3N0YXJ0QXVkaW9NaXhpbmdCdWZmZXJTb3VyY2UodCk7aWYoYylyZXR1cm4gcy5zb3VyY2U9YyxzLnN0YXJ0QXQ9RGF0ZS5ub3coKSxzLnJlc3VtZUF0PW51bGwscy5wYXVzZU9mZnNldD1udWxsLHMucGF1c2VBdD1udWxsLHMucmVzdW1lT2Zmc2V0PW51bGwscy5zdG9wQXQ9bnVsbCxzLnN0YXJ0T2Zmc2V0PXQucGxheVRpbWV8fDAscy5zdGF0ZT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZLGUuX2ZsdXNoQXVkaW9NaXhpbmdNdXRlU3RhdHVzKCksbihudWxsKTtzLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLklETEU7dmFyIGQ9XCJDUkVBVEVfQlVGRkVSU09VUkNFX0ZBSUxFRFwiO2lmKG4pcmV0dXJuIG4oZCk7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBcIiksZCl9ZWxzZSBlLmxvYWRBdWRpb0J1ZmZlcih0LmZpbGVQYXRoLHQuZmlsZVBhdGgsZnVuY3Rpb24oaSl7aWYoaSlzLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLklETEUsbj9uKGkpOm8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gXCIpLGkpO2Vsc2V7dmFyIGE9ZS5fc3RhcnRBdWRpb01peGluZ0J1ZmZlclNvdXJjZSh0KTtpZihhKXJldHVybiBzLnNvdXJjZT1hLHMuc3RhcnRBdD1EYXRlLm5vdygpLHMucmVzdW1lQXQ9bnVsbCxzLnBhdXNlT2Zmc2V0PW51bGwscy5wYXVzZUF0PW51bGwscy5yZXN1bWVPZmZzZXQ9bnVsbCxzLnN0b3BBdD1udWxsLHMuc3RhcnRPZmZzZXQ9dC5wbGF5VGltZXx8MCxzLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLkJVU1ksZS5fZmx1c2hBdWRpb01peGluZ011dGVTdGF0dXMoKSxuKG51bGwpO2lmKHMuc3RhdGU9ZS5hdWRpb01peGluZy5zdGF0ZXMuSURMRSxpPVwiQ1JFQVRFX0JVRkZFUlNPVVJDRV9GQUlMRURcIixuKXJldHVybiBuKGkpO28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gXCIpLGkpfX0pfWVsc2UgZS5faGFuZGxlQXVkaW9NaXhpbmdJbnZhbGlkU3RhdGVFcnJvcihcIl9wbGF5RWZmZWN0XCIsdCxuKX0sZS5fc3RvcE9uZUVmZmVjdD1mdW5jdGlvbih0LG4pe3ZhciBpPWUuYXVkaW9NaXhpbmcuc291bmRzW3Quc291bmRJZF07cmV0dXJuIGUuX2lzU291bmRFeGlzdHModCk/aS5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLkJVU1l8fGkuc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5QQVVTRUQ/KGUuX3N0b3BBdWRpb01peGluZ0J1ZmZlclNvdXJjZSh0KSxpLnN0b3BBdD1EYXRlLm5vdygpLGkuc3RhdGU9ZS5hdWRpb01peGluZy5zdGF0ZXMuSURMRSxlLmF1ZGlvTWl4aW5nLmJ1ZmZlcltpLm9wdGlvbnMuZmlsZVBhdGhdJiYhaS5vcHRpb25zLmNhY2hlUmVzb3VyY2UmJihvLmRlZmF1bHQuZGVidWcoXCJSZWN5Y2xlZCBidWZmZXIgXCIuY29uY2F0KGkub3B0aW9ucy5maWxlUGF0aCkpLGRlbGV0ZSBlLmF1ZGlvTWl4aW5nLmJ1ZmZlcltpLm9wdGlvbnMuZmlsZVBhdGhdKSx2b2lkKG4mJm4obnVsbCkpKTp2b2lkIGUuX2hhbmRsZUF1ZGlvTWl4aW5nSW52YWxpZFN0YXRlRXJyb3IoXCJfc3RvcE9uZUVmZmVjdFwiLHQsbik6bihcIlNPVU5EX05PVF9FWElTVFNcIil9LGUuX3BhdXNlT25lRWZmZWN0PWZ1bmN0aW9uKHQsbil7dmFyIGk9ZS5hdWRpb01peGluZy5zb3VuZHNbdC5zb3VuZElkXTtpZihpLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuQlVTWSlyZXR1cm4gZS5fc3RvcEF1ZGlvTWl4aW5nQnVmZmVyU291cmNlKHQpPyhpLnBhdXNlQXQ9RGF0ZS5ub3coKSxpLnN0YXRlPWUuYXVkaW9NaXhpbmcuc3RhdGVzLlBBVVNFRCxpLnJlc3VtZUF0P2kucGF1c2VPZmZzZXQ9aS5wYXVzZUF0LWkucmVzdW1lQXQraS5yZXN1bWVPZmZzZXQ6aS5wYXVzZU9mZnNldD1pLnBhdXNlQXQtaS5zdGFydEF0K2kuc3RhcnRPZmZzZXQsbiYmbihudWxsKSk6dm9pZCBlLl9oYW5kbGVBdWRpb01peGluZ05vU291cmNlRXJyb3IoXCJfcGF1c2VPbmVFZmZlY3RcIix0LG4pO2UuX2hhbmRsZUF1ZGlvTWl4aW5nSW52YWxpZFN0YXRlRXJyb3IoXCJfcGF1c2VPbmVFZmZlY3RcIix0LG4pfSxlLl9yZXN1bWVPbmVFZmZlY3Q9ZnVuY3Rpb24odCxuKXt2YXIgaT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdO2lmKGkuc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5QQVVTRUQpe3ZhciBhPXtzb3VuZElkOnQuc291bmRJZCxmaWxlUGF0aDppLm9wdGlvbnMuZmlsZVBhdGgsY3ljbGU6aS5vcHRpb25zLmN5Y2xlLGxvb3A6aS5vcHRpb25zLmxvb3AscGxheVRpbWU6aS5wYXVzZU9mZnNldCxyZXBsYWNlOmkub3B0aW9ucy5yZXBsYWNlfSxyPWUuX3N0YXJ0QXVkaW9NaXhpbmdCdWZmZXJTb3VyY2UoYSk7aWYoIXIpe3ZhciBzPVwiQ1JFQVRFX0JVRkZFUlNPVVJDRV9GQUlMRURcIjtyZXR1cm4gbihzKSx2b2lkIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5zdHJlYW1JZCxcIl0gXCIpLHMpfWkuc291cmNlPXIsaS5yZXN1bWVBdD1EYXRlLm5vdygpLGkucmVzdW1lT2Zmc2V0PWkucGF1c2VPZmZzZXQsaS5zdGF0ZT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZLGkucGF1c2VBdD1udWxsLGkucGF1c2VPZmZzZXQ9bnVsbCxuKG51bGwpfWVsc2UgZS5faGFuZGxlQXVkaW9NaXhpbmdJbnZhbGlkU3RhdGVFcnJvcihcIl9yZXN1bWVPbmVFZmZlY3RcIix0LG4pfSxlLl9nZXRPbmVFZmZlY3REdXJhdGlvbj1mdW5jdGlvbih0KXt2YXIgbj1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdO3JldHVybiBuLm9wdGlvbnMmJm4ub3B0aW9ucy5maWxlUGF0aCYmZS5hdWRpb01peGluZy5idWZmZXJbbi5vcHRpb25zLmZpbGVQYXRoXT8xZTMqZS5hdWRpb01peGluZy5idWZmZXJbbi5vcHRpb25zLmZpbGVQYXRoXS5kdXJhdGlvbjpudWxsfSxlLl9nZXRPbmVFZmZlY3RDdXJyZW50UG9zaXRpb249ZnVuY3Rpb24odCxuKXt2YXIgaT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1t0LnNvdW5kSWRdO3JldHVybiBpLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuUEFVU0VEP2kucGF1c2VPZmZzZXQlZS5fZ2V0T25lRWZmZWN0RHVyYXRpb24odCk6aS5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLkJVU1k/aS5yZXN1bWVBdD8oRGF0ZS5ub3coKS1pLnJlc3VtZUF0K2kucmVzdW1lT2Zmc2V0KSVlLl9nZXRPbmVFZmZlY3REdXJhdGlvbih0KTooRGF0ZS5ub3coKS1pLnN0YXJ0QXQraS5zdGFydE9mZnNldCklZS5fZ2V0T25lRWZmZWN0RHVyYXRpb24odCk6dm9pZChuJiZlLl9oYW5kbGVBdWRpb01peGluZ0ludmFsaWRTdGF0ZUVycm9yKFwiX2dldE9uZUVmZmVjdEN1cnJlbnRQb3NpdGlvblwiLHQpKX0sZS5fc2V0T25lRWZmZWN0UG9zaXRpb249ZnVuY3Rpb24odCxuLGkpe3ZhciBhPWUuYXVkaW9NaXhpbmcuc291bmRzW3Quc291bmRJZF07aWYoYS5zdGF0ZT09PWUuYXVkaW9NaXhpbmcuc3RhdGVzLkJVU1kpe2lmKCFlLl9zdG9wQXVkaW9NaXhpbmdCdWZmZXJTb3VyY2UodCkpcmV0dXJuIHZvaWQgZS5faGFuZGxlQXVkaW9NaXhpbmdOb1NvdXJjZUVycm9yKFwiX3NldE9uZUVmZmVjdFBvc2l0aW9uXCIsdCxpKTt2YXIgcj17c291bmRJZDp0LnNvdW5kSWQsZmlsZVBhdGg6YS5vcHRpb25zLmZpbGVQYXRoLGxvb3A6YS5vcHRpb25zLmxvb3AsY3ljbGU6YS5vcHRpb25zLmN5Y2xlLHBsYXlUaW1lOm59LHM9ZS5fc3RhcnRBdWRpb01peGluZ0J1ZmZlclNvdXJjZShyKTtpZighcyl7dmFyIGM9XCJDUkVBVEVfQlVGRkVSU09VUkNFX0ZBSUxFRFwiO3JldHVybiBpJiZpKGMpLHZvaWQgby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSBcIiksYyl9YS5zb3VyY2U9cyxhLnN0YXJ0QXQ9RGF0ZS5ub3coKSxhLnN0YXJ0T2Zmc2V0PW4sYS5yZXN1bWVBdD1udWxsLGEucmVzdW1lT2Zmc2V0PW51bGwsYS5wYXVzZU9mZnNldD1udWxsLGEucGF1c2VBdD1udWxsfWVsc2V7aWYoYS5zdGF0ZSE9PWUuYXVkaW9NaXhpbmcuc3RhdGVzLlBBVVNFRClyZXR1cm4gdm9pZCBlLl9oYW5kbGVBdWRpb01peGluZ0ludmFsaWRTdGF0ZUVycm9yKFwiX3NldE9uZUVmZmVjdFBvc2l0aW9uXCIsdCxpKTthLnBhdXNlT2Zmc2V0PW59aSYmaShudWxsKX0sZS5zdGFydEF1ZGlvTWl4aW5nPWZ1bmN0aW9uKHQsbil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6ZnVuY3Rpb24odCl7aWYodClyZXR1cm4gbiYmbih0KTtlLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJhdWRpb01peGluZ1BsYXllZFwifSksbiYmbihudWxsKX0sZ2V0U3RhdGVzOmUuX2dldE9uZUVmZmVjdFN0YXRlcyh7c291bmRJZDotMX0pLG5hbWU6XCJTdHJlYW0uc3RhcnRBdWRpb01peGluZ1wiLG9wdGlvbnM6dH0pO09iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KSh0LFwib3B0aW9uc1wiKTt2YXIgYT10LmZpbGVQYXRoLG89dC5jYWNoZVJlc291cmNlLGM9dC5jeWNsZSxkPXQubG9vcCx1PXQucGxheVRpbWUsbD10LnJlcGxhY2U7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGEsXCJmaWxlUGF0aFwiLDEsT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkZJTEVQQVRIX0xFTk1BWFwiKSwhMSksT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHUsXCJwbGF5VGltZVwiLDAsMWU4KSwhT2JqZWN0KHJlLmlzRW1wdHkpKGMpJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYyxcImN5Y2xlXCIpLCFPYmplY3QocmUuaXNFbXB0eSkoZCkmJk9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoZCxcImxvb3BcIiksIU9iamVjdChyZS5pc0VtcHR5KShsKSYmT2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShsLFwicmVwbGFjZVwiKSwhT2JqZWN0KHJlLmlzRW1wdHkpKG8pJiZPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKG8sXCJjYWNoZVJlc291cmNlXCIpO3ZhciBwPVMoKSh7c291bmRJZDotMX0sdCk7ZS5fcGxheU9uZUVmZmVjdChwLGkpfSxlLnN0b3BBdWRpb01peGluZz1mdW5jdGlvbih0KXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazp0LGdldFN0YXRlczplLl9nZXRPbmVFZmZlY3RTdGF0ZXMoe3NvdW5kSWQ6LTF9KSxuYW1lOlwiU3RyZWFtLnN0b3BBdWRpb01peGluZ1wifSk7ZS5fc3RvcE9uZUVmZmVjdCh7c291bmRJZDotMX0sbil9LGUucGF1c2VBdWRpb01peGluZz1mdW5jdGlvbih0KXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazp0LGdldFN0YXRlczplLl9nZXRPbmVFZmZlY3RTdGF0ZXMoe3NvdW5kSWQ6LTF9KSxuYW1lOlwiU3RyZWFtLnBhdXNlQXVkaW9NaXhpbmdcIn0pO3JldHVybiBlLl9wYXVzZU9uZUVmZmVjdCh7c291bmRJZDotMX0sbil9LGUucmVzdW1lQXVkaW9NaXhpbmc9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6ZnVuY3Rpb24obixpKXtpZihuKXJldHVybiB0JiZ0KG4pO2UuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImF1ZGlvTWl4aW5nUGxheWVkXCJ9KSx0JiZ0KG51bGwpfSxnZXRTdGF0ZXM6ZS5fZ2V0T25lRWZmZWN0U3RhdGVzKHtzb3VuZElkOi0xfSksbmFtZTpcIlN0cmVhbS5yZXN1bWVBdWRpb01peGluZ1wifSk7ZS5fcmVzdW1lT25lRWZmZWN0KHtzb3VuZElkOi0xfSxuKX0sZS5hZGp1c3RBdWRpb01peGluZ1ZvbHVtZT1mdW5jdGlvbih0KXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtnZXRTdGF0ZXM6ZS5fZ2V0T25lRWZmZWN0U3RhdGVzKHtzb3VuZElkOi0xfSksbmFtZTpcIlN0cmVhbS5hZGp1c3RBdWRpb01peGluZ1ZvbHVtZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQsXCJ2b2x1bWVcIiwwLDEwMCksZS5hdWRpb01peGluZy5zb3VuZHNbLTFdLnZvbHVtZT10LGUuX2ZsdXNoQXVkaW9NaXhpbmdNdXRlU3RhdHVzKCksbigpfSxlLmdldEF1ZGlvTWl4aW5nRHVyYXRpb249ZnVuY3Rpb24oKXt2YXIgdD1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtnZXRTdGF0ZXM6ZS5fZ2V0T25lRWZmZWN0U3RhdGVzKHtzb3VuZElkOi0xfSksbmFtZTpcIlN0cmVhbS5nZXRBdWRpb01peGluZ0R1cmF0aW9uXCJ9KSxuPWUuX2dldE9uZUVmZmVjdER1cmF0aW9uKHtzb3VuZElkOi0xfSk7cmV0dXJuIHQobnVsbCxuKSxufSxlLmdldEF1ZGlvTWl4aW5nQ3VycmVudFBvc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIHQ9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Z2V0U3RhdGVzOmUuX2dldE9uZUVmZmVjdFN0YXRlcyh7c291bmRJZDotMX0pLG5hbWU6XCJTdHJlYW0uZ2V0QXVkaW9NaXhpbmdDdXJyZW50UG9zaXRpb25cIn0pLG49ZS5fZ2V0T25lRWZmZWN0Q3VycmVudFBvc2l0aW9uKHtzb3VuZElkOi0xfSwhMCk7cmV0dXJuIHQobnVsbCxuKSxufSxlLnNldEF1ZGlvTWl4aW5nUG9zaXRpb249ZnVuY3Rpb24odCxuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazpuLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwiLGdldFN0YXRlczplLl9nZXRPbmVFZmZlY3RTdGF0ZXMoe3NvdW5kSWQ6LTF9KSxuYW1lOlwiU3RyZWFtLnNldEF1ZGlvTWl4aW5nUG9zaXRpb25cIn0pO09iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LFwicG9zaXRpb25cIiwwLDFlOCksZS5fc2V0T25lRWZmZWN0UG9zaXRpb24oe3NvdW5kSWQ6LTF9LHQsaSl9LGUucGxheUVmZmVjdD1mdW5jdGlvbih0LG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2NhbGxiYWNrOmZ1bmN0aW9uKHQpe2lmKHQpcmV0dXJuIG4mJm4odCk7ZS5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZWZmZWN0UGxheWVkXCJ9KSxuJiZuKG51bGwpfSxuYW1lOlwiU3RyZWFtLnBsYXlFZmZlY3RcIixvcHRpb25zOnR9KTtPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkodCxcIm9wdGlvbnNcIik7dmFyIGE9dC5zb3VuZElkLG89dC5maWxlUGF0aCxjPXQuY3ljbGU7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGEsXCJzb3VuZElkXCIsMSwxZTQpLE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShvLFwiZmlsZVBhdGhcIiwwLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJGSUxFUEFUSF9MRU5NQVhcIiksITEpLCFPYmplY3QocmUuaXNFbXB0eSkoYykmJk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShjLFwiY3ljbGVcIiksZS5fcGxheU9uZUVmZmVjdCh0LGkpfSxlLnN0b3BFZmZlY3Q9ZnVuY3Rpb24odCxuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazpuLGdldFN0YXRlczplLl9nZXRPbmVFZmZlY3RTdGF0ZXMoe3NvdW5kSWQ6dH0pLG5hbWU6XCJTdHJlYW0uc3RvcEVmZmVjdFwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQsXCJzb3VuZElkXCIsMSwxZTQpLGUuX3N0b3BPbmVFZmZlY3Qoe3NvdW5kSWQ6dH0saSl9LGUuc3RvcEFsbEVmZmVjdHM9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6dCxuYW1lOlwiU3RyZWFtLnN0b3BBbGxFZmZlY3RcIn0pLGk9ITEsYT0wLHI9MCxvPWZ1bmN0aW9uKGUpe2l8fChlPyhuKGUpLGk9ITApOmErPTEsYT09PXImJihuKG51bGwpLGk9ITApKX07Zm9yKHZhciBjIGluIGUuYXVkaW9NaXhpbmcuc291bmRzKXt2YXIgZD1lLmF1ZGlvTWl4aW5nLnNvdW5kc1tjXTstMSE9PWQuc291bmRJZCYmKGQuc3RhdGUhPT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZJiZkLnN0YXRlIT09ZS5hdWRpb01peGluZy5zdGF0ZXMuUEFVU0VEfHwocisrLGUuX3N0b3BPbmVFZmZlY3Qoe3NvdW5kSWQ6Y30sbykpKX1yfHxuKG51bGwpfSxlLnByZWxvYWRFZmZlY3Q9ZnVuY3Rpb24odCxuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse2NhbGxiYWNrOmksb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCIsbmFtZTpcIlN0cmVhbS5wcmVsb2FkRWZmZWN0XCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikodCxcInNvdW5kSWRcIiwxLDFlNCksT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJmaWxlUGF0aFwiLDEsT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkZJTEVQQVRIX0xFTk1BWFwiKSwhMSksZS5faW5pdFNvdW5kSWZOb3RFeGlzdHModCxuKSxlLmF1ZGlvTWl4aW5nLmJ1ZmZlcltuXT9hKG51bGwpOmUubG9hZEF1ZGlvQnVmZmVyKG4sbixhKX0sZS51bmxvYWRFZmZlY3Q9ZnVuY3Rpb24odCxuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazpuLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwiLG5hbWU6XCJTdHJlYW0udW5sb2FkRWZmZWN0XCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikodCxcInNvdW5kSWRcIiwxLDFlNCk7dmFyIGE9ZS5hdWRpb01peGluZy5zb3VuZHNbdF07aWYoIWEpe3ZhciByPVwiU09VTkRfTk9UX0VYSVNUU1wiO3JldHVybiBvLmRlZmF1bHQuZXJyb3Iocix0KSx2b2lkIGkocil9dmFyIGM9YS5vcHRpb25zP2Eub3B0aW9ucy5maWxlUGF0aDphLmZpbGVQYXRoO2lmKGMpZGVsZXRlIGUuYXVkaW9NaXhpbmcuYnVmZmVyW2NdLGRlbGV0ZSBlLmF1ZGlvTWl4aW5nLnNvdW5kc1t0XSxpKG51bGwpO2Vsc2V7dmFyIGQ9XCJTT1VORF9CVUZGRVJfTk9UX0ZPVU5EXCI7by5kZWZhdWx0LmVycm9yKGQsdCksaShkKX19LGUucGF1c2VFZmZlY3Q9ZnVuY3Rpb24odCxuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazpuLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwiLG5hbWU6XCJTdHJlYW0ucGF1c2VFZmZlY3RcIn0pO3JldHVybiBlLl9wYXVzZU9uZUVmZmVjdCh7c291bmRJZDp0fSxpKX0sZS5wYXVzZUFsbEVmZmVjdHM9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6dCxuYW1lOlwiU3RyZWFtLnBhdXNlQWxsRWZmZWN0c1wifSksaT0hMSxhPTAscj0wLG89ZnVuY3Rpb24oZSl7aXx8KGU/KG4oZSksaT0hMCk6YSs9MSxhPT09ciYmKG4obnVsbCksaT0hMCkpfTtmb3IodmFyIGMgaW4gZS5hdWRpb01peGluZy5zb3VuZHMpXCItMVwiIT09YyYmZS5hdWRpb01peGluZy5zb3VuZHNbY10uc3RhdGU9PT1lLmF1ZGlvTWl4aW5nLnN0YXRlcy5CVVNZJiYocisrLGUuX3BhdXNlT25lRWZmZWN0KHtzb3VuZElkOmN9LG8pKTtyfHxuKG51bGwpfSxlLnJlc3VtZUVmZmVjdD1mdW5jdGlvbih0LG4pe09iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LFwic291bmRJZFwiLDEsMWU0KTt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtjYWxsYmFjazpuLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwiLG5hbWU6XCJTdHJlYW0ucmVzdW1lRWZmZWN0XCJ9KTtyZXR1cm4gZS5fcmVzdW1lT25lRWZmZWN0KHtzb3VuZElkOnR9LGkpfSxlLnJlc3VtZUFsbEVmZmVjdHM9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7Y2FsbGJhY2s6dCxuYW1lOlwiU3RyZWFtLnJlc3VtZUFsbEVmZmVjdHNcIn0pLGk9ITEsYT0wLHI9MCxvPWZ1bmN0aW9uKGUpe2l8fChlPyhuKGUpLGk9ITApOmErPTEsYT09PXImJihuKG51bGwpLGk9ITApKX07Zm9yKHZhciBjIGluIGUuYXVkaW9NaXhpbmcuc291bmRzKVwiLTFcIiE9PWMmJmUuYXVkaW9NaXhpbmcuc291bmRzW2NdLnN0YXRlPT09ZS5hdWRpb01peGluZy5zdGF0ZXMuUEFVU0VEJiYocisrLGUuX3Jlc3VtZU9uZUVmZmVjdCh7c291bmRJZDpjfSxvKSk7cnx8bihudWxsKX0sZS5nZXRFZmZlY3RzVm9sdW1lPWZ1bmN0aW9uKCl7dmFyIHQ9W107Zm9yKHZhciBuIGluIGUuYXVkaW9NaXhpbmcuc291bmRzKXt2YXIgaT1lLmF1ZGlvTWl4aW5nLnNvdW5kc1tuXTtpJiZcIi0xXCIhPT1uJiZ0LnB1c2goe3NvdW5kSWQ6cGFyc2VJbnQobiksdm9sdW1lOmkudm9sdW1lfSl9cmV0dXJuIHR9LGUuc2V0RWZmZWN0c1ZvbHVtZT1mdW5jdGlvbih0LG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0RWZmZWN0c1ZvbHVtZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwiLGNhbGxiYWNrOm59KTtmb3IodmFyIGEgaW4gT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQsXCJ2b2x1bWVcIiwwLDEwMCksZS5hdWRpb01peGluZy5kZWZhdWx0Vm9sdW1lPXQsZS5hdWRpb01peGluZy5zb3VuZHMpe3ZhciByPWUuYXVkaW9NaXhpbmcuc291bmRzW2FdO1wiLTFcIiE9PWEmJihyLnZvbHVtZT10KX1lLl9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cygpLGkobnVsbCl9LGUuc2V0Vm9sdW1lT2ZFZmZlY3Q9ZnVuY3Rpb24odCxuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0Vm9sdW1lT2ZFZmZlY3RcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixjYWxsYmFjazppfSk7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQsXCJzb3VuZElkXCIsMCwxZTQpLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShuLFwidm9sdW1lXCIsMCwxMDApLGUuX2luaXRTb3VuZElmTm90RXhpc3RzKHQpLGUuYXVkaW9NaXhpbmcuc291bmRzW3RdLnZvbHVtZT1uLGUuX2ZsdXNoQXVkaW9NaXhpbmdNdXRlU3RhdHVzKCksYShudWxsKX19KHQpLEZlLmFkZFZpZGVvRWZmZWN0Q2FwYWJpbGl0eSh0KSxmdW5jdGlvbihlLHQpe2UudmlkZW9Db25zdHJhaW50PXt9LHQuY2FtZXJhSWQmJihlLnZpZGVvQ29uc3RyYWludC5kZXZpY2VJZD17ZXhhY3Q6dC5jYW1lcmFJZH0pLHQuZmFjaW5nTW9kZSYmKGUudmlkZW9Db25zdHJhaW50LmZhY2luZ01vZGU9dC5mYWNpbmdNb2RlKSxlLnZpZGVvU2l6ZSYmKGUudmlkZW9Db25zdHJhaW50LndpZHRoPWUudmlkZW9TaXplWzBdLGUudmlkZW9Db25zdHJhaW50LmhlaWdodD1lLnZpZGVvU2l6ZVsxXSksT2JqZWN0KG0uaXNMZWdhY3lDaHJvbWUpKCl8fChlLnZpZGVvQ29uc3RyYWludC5mcmFtZVJhdGU9e2lkZWFsOjMwLG1heDozMH0pLGUuYXVkaW9Db25zdHJhaW50PXt9LHQubWljcm9waG9uZUlkJiYoZS5hdWRpb0NvbnN0cmFpbnQuZGV2aWNlSWQ9e2V4YWN0OnQubWljcm9waG9uZUlkfSksT2JqZWN0KG0uaXNMZWdhY3lDaHJvbWUpKCl8fGUuYXVkaW9Qcm9jZXNzaW5nJiYodm9pZCAwIT09ZS5hdWRpb1Byb2Nlc3NpbmcuQUdDJiYoT2JqZWN0KG0uaXNGaXJlRm94KSgpP2UuYXVkaW9Db25zdHJhaW50LmF1dG9HYWluQ29udHJvbD1lLmF1ZGlvUHJvY2Vzc2luZy5BR0M6T2JqZWN0KG0uaXNDaHJvbWUpKCkmJihlLmF1ZGlvQ29uc3RyYWludC5nb29nQXV0b0dhaW5Db250cm9sPWUuYXVkaW9Qcm9jZXNzaW5nLkFHQyxlLmF1ZGlvQ29uc3RyYWludC5nb29nQXV0b0dhaW5Db250cm9sMj1lLmF1ZGlvUHJvY2Vzc2luZy5BR0MpKSx2b2lkIDAhPT1lLmF1ZGlvUHJvY2Vzc2luZy5BRUMmJihlLmF1ZGlvQ29uc3RyYWludC5lY2hvQ2FuY2VsbGF0aW9uPWUuYXVkaW9Qcm9jZXNzaW5nLkFFQyksdm9pZCAwIT09ZS5hdWRpb1Byb2Nlc3NpbmcuQU5TJiYoT2JqZWN0KG0uaXNGaXJlRm94KSgpP2UuYXVkaW9Db25zdHJhaW50Lm5vaXNlU3VwcHJlc3Npb249ZS5hdWRpb1Byb2Nlc3NpbmcuQU5TOk9iamVjdChtLmlzQ2hyb21lKSgpJiYoZS5hdWRpb0NvbnN0cmFpbnQuZ29vZ05vaXNlU3VwcHJlc3Npb249ZS5hdWRpb1Byb2Nlc3NpbmcuQU5TKSkpLGUuc2NyZWVuQ29uc3RyYWludD17fSx0LnNvdXJjZUlkJiYoZS5zY3JlZW5Db25zdHJhaW50LnNvdXJjZUlkPXQuc291cmNlSWQpLHQuZXh0ZW5zaW9uSWQmJk9iamVjdChtLmlzQ2hyb21lKSgpPyhlLnNjcmVlbkNvbnN0cmFpbnQuZXh0ZW5zaW9uSWQ9dC5leHRlbnNpb25JZCxlLnNjcmVlbkNvbnN0cmFpbnQubWFuZGF0b3J5PXtjaHJvbWVNZWRpYVNvdXJjZTpcImRlc2t0b3BcIixtYXhXaWR0aDplLnNjcmVlbkF0dHJpYnV0ZXMud2lkdGgsbWF4SGVpZ2h0OmUuc2NyZWVuQXR0cmlidXRlcy5oZWlnaHQsbWF4RnJhbWVSYXRlOmUuc2NyZWVuQXR0cmlidXRlcy5tYXhGcixtaW5GcmFtZVJhdGU6ZS5zY3JlZW5BdHRyaWJ1dGVzLm1pbkZyfSk6KGUuc2NyZWVuQ29uc3RyYWludC5tZWRpYVNvdXJjZT1cInNjcmVlblwiLGUuc2NyZWVuQ29uc3RyYWludC53aWR0aD1lLnNjcmVlbkF0dHJpYnV0ZXMud2lkdGgsZS5zY3JlZW5Db25zdHJhaW50LmhlaWdodD1lLnNjcmVlbkF0dHJpYnV0ZXMuaGVpZ2h0LGUuc2NyZWVuQ29uc3RyYWludC5mcmFtZVJhdGU9e2lkZWFsOmUuc2NyZWVuQXR0cmlidXRlcy5tYXhGcixtYXg6ZS5zY3JlZW5BdHRyaWJ1dGVzLm1heEZyfSksdC5tZWRpYVNvdXJjZSYmKGUuc2NyZWVuQ29uc3RyYWludC5tZWRpYVNvdXJjZT10Lm1lZGlhU291cmNlKSxlLnNldFZpZGVvUmVzb2x1dGlvbj1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFZpZGVvUmVzb2x1dGlvblwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYoIShuIGluc3RhbmNlb2YgQXJyYXkpKXt2YXIgYT1XZShuKz1cIlwiKTtyZXR1cm4gYSYmYS52aWRlbz8oZS52aWRlb0NvbnN0cmFpbnQ9UygpKGUudmlkZW9Db25zdHJhaW50LHt3aWR0aDp7aWRlYWw6YS52aWRlby53aWR0aH0saGVpZ2h0OntpZGVhbDphLnZpZGVvLmhlaWdodH19KSx0LmF0dHJpYnV0ZXMucmVzb2x1dGlvbj1hLmF0dHJpYnV0ZXMucmVzb2x1dGlvbiwocj1lLnN0cmVhbSYmZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MmJmUuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0pJiZyLmFwcGx5Q29uc3RyYWludHM/KG8uZGVmYXVsdC5kZWJ1ZyhcInNldFZpZGVvUmVzb2x1dGlvbiBhcHBseUNvbnN0cmFpbnRzXCIsZS52aWRlb0NvbnN0cmFpbnQpLHIuYXBwbHlDb25zdHJhaW50cyhlLnZpZGVvQ29uc3RyYWludCkudGhlbihpKS5jYXRjaChpKSk6aSgpLCEwKTooaShcIk5PX1BST0ZJTEVfXCIuY29uY2F0KG4pKSwhMSl9dmFyIHIsYz1uWzBdLGQ9blsxXTtlLnZpZGVvQ29uc3RyYWludD1TKCkoZS52aWRlb0NvbnN0cmFpbnQse3dpZHRoOntpZGVhbDpjfSxoZWlnaHQ6e2lkZWFsOmR9fSksdC5hdHRyaWJ1dGVzLnJlc29sdXRpb249XCJcIi5jb25jYXQoYyxcInhcIikuY29uY2F0KGQpLChyPWUuc3RyZWFtJiZlLnN0cmVhbS5nZXRWaWRlb1RyYWNrcyYmZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSkmJnIuYXBwbHlDb25zdHJhaW50cz8oby5kZWZhdWx0LmRlYnVnKFwic2V0VmlkZW9SZXNvbHV0aW9uIGFwcGx5Q29uc3RyYWludHNcIixlLnZpZGVvQ29uc3RyYWludCksRmUuZGlzYWJsZVZpZGVvRWZmZWN0KGUpLnRoZW4oZnVuY3Rpb24oKXtyZXR1cm4gci5hcHBseUNvbnN0cmFpbnRzKGUudmlkZW9Db25zdHJhaW50KS50aGVuKGkpLmNhdGNoKGkpfSkudGhlbihmdW5jdGlvbigpe3JldHVybiBGZS5yZXN0b3JlVmlkZW9FZmZlY3QoZSl9KSk6aSgpfSxlLnNldFZpZGVvRnJhbWVSYXRlPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0VmlkZW9GcmFtZVJhdGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKE9iamVjdChtLmlzRmlyZUZveCkoKSlyZXR1cm4gaShcIkZJUkVGT1hfTk9UX1NVUFBPUlRFRFwiKSwhMTtpZihcIm9iamVjdFwiPT09SGUoKShuKSYmbiBpbnN0YW5jZW9mIEFycmF5JiZuLmxlbmd0aD4xKXtlLnZpZGVvQ29uc3RyYWludD1TKCkoZS52aWRlb0NvbnN0cmFpbnQse2ZyYW1lUmF0ZTp7aWRlYWw6blswXSxtYXg6blsxXX19KSx0LmF0dHJpYnV0ZXMubWluRnJhbWVSYXRlPW5bMF0sdC5hdHRyaWJ1dGVzLm1heEZyYW1lUmF0ZT1uWzFdO3ZhciBhPWUuc3RyZWFtJiZlLnN0cmVhbS5nZXRWaWRlb1RyYWNrcyYmZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtyZXR1cm4gYSYmYS5hcHBseUNvbnN0cmFpbnRzPyhvLmRlZmF1bHQuZGVidWcoXCJzZXRWaWRlb0ZyYW1lUmF0ZSBhcHBseUNvbnN0cmFpbnRzXCIsZS52aWRlb0NvbnN0cmFpbnQpLGEuYXBwbHlDb25zdHJhaW50cyhlLnZpZGVvQ29uc3RyYWludCkudGhlbihpKS5jYXRjaChpKSk6aSgpLCEwfXJldHVybiBpKFwiSU5WQUxJRF9QQVJBTV9cIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkobikpKSwhMX0sZS5zZXRWaWRlb0JpdFJhdGU9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7bmFtZTpcIlN0cmVhbS5zZXRWaWRlb0JpdFJhdGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3JldHVyblwib2JqZWN0XCI9PT1IZSgpKG4pJiZuIGluc3RhbmNlb2YgQXJyYXkmJm4ubGVuZ3RoPjE/KHQuYXR0cmlidXRlcy5taW5WaWRlb0JXPW5bMF0sdC5hdHRyaWJ1dGVzLm1heFZpZGVvQlc9blsxXSxlLmNvbm5lY3Rpb25TcGVjJiYoZS5jb25uZWN0aW9uU3BlYy5taW5WaWRlb0JXPW5bMF0sZS5jb25uZWN0aW9uU3BlYy5tYXhWaWRlb0JXPW5bMV0pLGUucGMmJmUucGMucmVuZWdvdGlhdGUmJmUucGMucmVuZWdvdGlhdGUoKSxpKCksITApOihpKFwiSU5WQUxJRF9QQVJBTV9cIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkobikpKSwhMSl9LGUuc2V0U2NyZWVuQml0UmF0ZT1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFNjcmVlbkJpdFJhdGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3JldHVyblwib2JqZWN0XCI9PT1IZSgpKG4pJiZuIGluc3RhbmNlb2YgQXJyYXkmJm4ubGVuZ3RoPjE/KHQuc2NyZWVuQXR0cmlidXRlcy5taW5WaWRlb0JXPW5bMF0sdC5zY3JlZW5BdHRyaWJ1dGVzLm1heFZpZGVvQlc9blsxXSxpKCksITApOihpKFwiSU5WQUxJRF9QQVJBTV9cIi5jb25jYXQoSlNPTi5zdHJpbmdpZnkobikpKSwhMSl9LGUuc2V0U2NyZWVuUHJvZmlsZT1mdW5jdGlvbih0KXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFNjcmVlblByb2ZpbGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkRW51bSkodCxcInByb2ZpbGVcIixbXCI0ODBwXzFcIixcIjQ4MHBfMlwiLFwiNzIwcF8xXCIsXCI3MjBwXzJcIixcIjEwODBwXzFcIixcIjEwODBwXzJcIl0pO3ZhciBpPVdlKHQpO3JldHVybiBpJiZpLnNjcmVlbj8oZS5zY3JlZW5Db25zdHJhaW50Lm1hbmRhdG9yeT8oZS5zY3JlZW5Db25zdHJhaW50Lm1hbmRhdG9yeS5tYXhXaWR0aD1pLnNjcmVlbi53aWR0aCxlLnNjcmVlbkNvbnN0cmFpbnQubWFuZGF0b3J5Lm1heEhlaWdodD1pLnNjcmVlbi5oZWlnaHQsaS5zY3JlZW4uZnJhbWVSYXRlJiZpLnNjcmVlbi5mcmFtZVJhdGUubWluJiZpLnNjcmVlbi5mcmFtZVJhdGUubWF4JiYoZS5zY3JlZW5Db25zdHJhaW50Lm1hbmRhdG9yeS5taW5GcmFtZVJhdGU9aS5zY3JlZW4uZnJhbWVSYXRlLm1pbixlLnNjcmVlbkNvbnN0cmFpbnQubWFuZGF0b3J5Lm1heEZyYW1lUmF0ZT1pLnNjcmVlbi5mcmFtZVJhdGUubWF4KSk6ZS5zY3JlZW5Db25zdHJhaW50PVMoKShlLnNjcmVlbkNvbnN0cmFpbnQsaS5zY3JlZW4pLGUuc2NyZWVuQXR0cmlidXRlcy53aWR0aD1pLnNjcmVlbi53aWR0aCxlLnNjcmVlbkF0dHJpYnV0ZXMuaGVpZ2h0PWkuc2NyZWVuLmhlaWdodCxlLnNjcmVlbkF0dHJpYnV0ZXMubWluRnI9aS5zY3JlZW4uZnJhbWVSYXRlLm1pbixlLnNjcmVlbkF0dHJpYnV0ZXMubWF4RnI9aS5zY3JlZW4uZnJhbWVSYXRlLm1heCxuKCksITApOihuKFwiTk9fU0NSRUVOX1BST0ZJTEVfXCIuY29uY2F0KEpTT04uc3RyaW5naWZ5KHQpKSksITEpfSxlLnNldFZpZGVvUHJvZmlsZUN1c3RvbT1mdW5jdGlvbih0KXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLnNldFZpZGVvUHJvZmlsZUN1c3RvbVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7ZS5zZXRWaWRlb1Jlc29sdXRpb24odFswXSksZS5zZXRWaWRlb0ZyYW1lUmF0ZShbdFsxXSx0WzFdXSksZS5zZXRWaWRlb0JpdFJhdGUoW3RbMl0sdFsyXV0pLG4oKX0sZS5zZXRWaWRlb1Byb2ZpbGVDdXN0b21QbHVzPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0VmlkZW9Qcm9maWxlQ3VzdG9tXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtlLnZpZGVvQ29uc3RyYWludC53aWR0aD1uLndpZHRoLGUudmlkZW9Db25zdHJhaW50LmhlaWdodD1uLmhlaWdodCx0LmF0dHJpYnV0ZXMucmVzb2x1dGlvbj1cIlwiLmNvbmNhdChuLndpZHRoLFwieFwiKS5jb25jYXQobi5oZWlnaHQpLGUuc2V0VmlkZW9GcmFtZVJhdGUoW24uZnJhbWVyYXRlLG4uZnJhbWVyYXRlXSksZS5zZXRWaWRlb0JpdFJhdGUoW24uYml0cmF0ZSxuLmJpdHJhdGVdKSxpKCl9LGUuc2V0VmlkZW9Qcm9maWxlPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0VmlkZW9Qcm9maWxlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSxhPVdlKG4pO2lmKCFhKXt2YXIgcj1cIkludmFsaWQgUHJvZmlsZSBcIi5jb25jYXQobik7dGhyb3cgbmV3IEVycm9yKHIpfWlmKGUucHJvZmlsZT1uLGEmJmEudmlkZW8pe2UucHJvZmlsZT1hLnByb2ZpbGVOYW1lLGUudmlkZW9Db25zdHJhaW50PVMoKShlLnZpZGVvQ29uc3RyYWludCxhLnZpZGVvKSxlLmNvbm5lY3Rpb25TcGVjJiZhLmF0dHJpYnV0ZXMubWF4VmlkZW9CVyYmKGUuY29ubmVjdGlvblNwZWMubWluVmlkZW9CVz1hLmF0dHJpYnV0ZXMubWluVmlkZW9CVyxlLmNvbm5lY3Rpb25TcGVjLm1heFZpZGVvQlc9YS5hdHRyaWJ1dGVzLm1heFZpZGVvQlcpLE9iamVjdChtLmlzRWRnZSkoKSYmKGUudmlkZW9Db25zdHJhaW50LmZyYW1lUmF0ZS5tYXg9NjApLE9iamVjdChtLmlzRmlyZUZveCkoKSYmKGUudmlkZW9Db25zdHJhaW50LmZyYW1lUmF0ZT17aWRlYWw6MzAsbWF4OjMwfSksdC5hdHRyaWJ1dGVzPVMoKSh0LmF0dHJpYnV0ZXMsYS5hdHRyaWJ1dGVzKSxlLnBjJiZlLnBjLnJlbmVnb3RpYXRlJiZlLnBjLnJlbmVnb3RpYXRlKCk7dmFyIGM9ZS5zdHJlYW0mJmUuc3RyZWFtLmdldFZpZGVvVHJhY2tzJiZlLnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO3JldHVybiBjJiZjLmFwcGx5Q29uc3RyYWludHM/KG8uZGVmYXVsdC5kZWJ1ZyhcInNldFZpZGVvUHJvZmlsZSBhcHBseUNvbnN0cmFpbnRzXCIsZS52aWRlb0NvbnN0cmFpbnQpLEZlLmRpc2FibGVWaWRlb0VmZmVjdChlKS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGMuYXBwbHlDb25zdHJhaW50cyhlLnZpZGVvQ29uc3RyYWludCl9KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIEZlLnJlc3RvcmVWaWRlb0VmZmVjdChlKX0pLnRoZW4oZnVuY3Rpb24odCl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4sYSl7aSh0KSxPYmplY3QobmUudnNSZXNIYWNrKShlLnN0cmVhbSxmdW5jdGlvbih0LGkpe2UudmlkZW9XaWR0aD10LGUudmlkZW9IZWlnaHQ9aSxuKCl9LGZ1bmN0aW9uKHQpe28uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdChlLnN0cmVhbUlkLFwiXSB2c1Jlc0hhY2sgZmFpbGVkOiBcIiksdCksYSgpfSl9KX0pLmNhdGNoKGkpKTppKCksITB9cmV0dXJuIGkoXCJJTlZBTElEX1ZJREVPX1BST0ZJTEVfXCIuY29uY2F0KG4pKSwhMX0sZS5zZXRBdWRpb1Byb2ZpbGU9ZnVuY3Rpb24odCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNpZCx7bmFtZTpcIlN0cmVhbS5zZXRBdWRpb1Byb2ZpbGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkRW51bSkodCxcInByb2ZpbGVcIixbXCJzcGVlY2hfbG93X3F1YWxpdHlcIixcInNwZWVjaF9zdGFuZGFyZFwiLFwibXVzaWNfc3RhbmRhcmRcIixcInN0YW5kYXJkX3N0ZXJlb1wiLFwiaGlnaF9xdWFsaXR5XCIsXCJoaWdoX3F1YWxpdHlfc3RlcmVvXCJdKSxlLmF1ZGlvUHJvZmlsZT10O3ZhciBpPXFlKHQpO3JldHVybiBlLmhpZ2hRdWFsaXR5PWkuaGlnaFF1YWxpdHksZS5zdGVyZW89aS5zdGVyZW8sZS5zcGVlY2g9aS5zcGVlY2gsZS5sb3dRdWFsaXR5PWkubG93UXVhbGl0eSxlLnN0ZXJlbyYmT2JqZWN0KG0uaXNDaHJvbWUpKCkmJihlLmF1ZGlvQ29uc3RyYWludC5nb29nQXV0b0dhaW5Db250cm9sPSExLGUuYXVkaW9Db25zdHJhaW50Lmdvb2dBdXRvR2FpbkNvbnRyb2wyPSExLGUuYXVkaW9Db25zdHJhaW50LmVjaG9DYW5jZWxsYXRpb249ITEsZS5hdWRpb0NvbnN0cmFpbnQuZ29vZ05vaXNlU3VwcHJlc3Npb249ITEpLG4oKSwhMH0sZS5zZXRWaWRlb0VuY29kZXJDb25maWd1cmF0aW9uPWZ1bmN0aW9uKHQpe09iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KSh0LFwiY29uZmlnXCIpO3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJTdHJlYW0uc2V0VmlkZW9FbmNvZGVyQ29uZmlndXJhdGlvblwiLG9wdGlvbnM6dCx0YWc6XCJ0cmFjZXJcIn0pO3QucmVzb2x1dGlvbiYmKE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKSh0LnJlc29sdXRpb24ud2lkdGgsXCJjb25maWcucmVzb2x1dGlvbi53aWR0aFwiKSxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikodC5yZXNvbHV0aW9uLmhlaWdodCxcImNvbmZpZy5yZXNvbHV0aW9uLmhlaWdodFwiKSxlLnNldFZpZGVvUmVzb2x1dGlvbihbdC5yZXNvbHV0aW9uLndpZHRoLHQucmVzb2x1dGlvbi5oZWlnaHRdKSksdC5mcmFtZVJhdGUmJihPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikodC5mcmFtZVJhdGUubWluLFwiY29uZmlnLmZyYW1lUmF0ZS5taW5cIiksT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQuZnJhbWVSYXRlLm1heCxcImNvbmZpZy5mcmFtZVJhdGUubWF4XCIpLGUuc2V0VmlkZW9GcmFtZVJhdGUoW3QuZnJhbWVSYXRlLm1pbix0LmZyYW1lUmF0ZS5tYXhdKSksdC5iaXRyYXRlJiYoT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQuYml0cmF0ZS5taW4sXCJjb25maWcuYml0cmF0ZS5taW5cIiwxLDFlNyksT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHQuYml0cmF0ZS5tYXgsXCJjb25maWcuYml0cmF0ZS5tYXhcIiwxLDFlNyksZS5zZXRWaWRlb0JpdFJhdGUoW3QuYml0cmF0ZS5taW4sdC5iaXRyYXRlLm1heF0pKSxuKCl9LGUuZ2V0U3VwcG9ydGVkUHJvZmlsZT1mdW5jdGlvbih0KXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2lkLHtuYW1lOlwiU3RyZWFtLmdldFN1cHBvcnRlZFByb2ZpbGVcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIixjYWxsYmFjazp0fSk7aWYoIWUubG9jYWwpe3ZhciBpPVwiT05MWV9MT0NBTF9TVFJFQU1fU1VQUE9SVEVEXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihpKSxuKGkpfWlmKCFlLnN0cmVhbSlyZXR1cm4gaT1cIlNUUkVBTV9OT1RfSU5JVFwiLG8uZGVmYXVsdC5lcnJvcihpKSxuKGkpO2lmKCFlLnN0cmVhbS5nZXRWaWRlb1RyYWNrcylyZXR1cm4gaT1cIlRSQUNLX05PVF9TVVBQT1JUXCIsby5kZWZhdWx0LmVycm9yKGkpLG4oaSk7dmFyIGE9ZS5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXTtpZighYSlyZXR1cm4gaT1cIk5PX1ZJREVPX1RSQUNLX0ZPVU5EXCIsby5kZWZhdWx0LmVycm9yKGkpLG4oaSk7aWYoIWEuZ2V0Q2FwYWJpbGl0aWVzKXJldHVybiBpPVwiR0VUQ0FQQUJJTElUWV9OT1RfU1VQUE9SVFwiLG8uZGVmYXVsdC5lcnJvcihpKSxuKGkpO3ZhciByPWEuZ2V0Q2FwYWJpbGl0aWVzKCk7cmV0dXJuIG4obnVsbCxHZShyKSl9fSh0LGUpLHQuZ2V0SWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC5zdHJlYW1JZH0sdC5nZXRVc2VySWQ9ZnVuY3Rpb24oKXtyZXR1cm4gdC51c2VySWR9LHQuY2hlY2tEdWFsU3RyZWFtRW5hYmxlZD1mdW5jdGlvbigpe2lmKE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJEVUFMU1RSRUFNX09QRVJBVElPTl9DSEVDS1wiKSYmdC5pc0R1YWxTdHJlYW0pe3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJPcGVyYXRpb24gbm90IHBlcm1pdHRlZDogXCIuY29uY2F0KFwiRFVBTF9TVFJFQU1fRU5BQkxFRFwiKSksXCJEVUFMX1NUUkVBTV9FTkFCTEVEXCJ9cmV0dXJuITF9LHQuc2V0VXNlcklkPWZ1bmN0aW9uKGUpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uc2V0VXNlcklkXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTt0LnVzZXJJZCYmby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFN0cmVhbS51c2VySWQgXCIpLmNvbmNhdCh0LnVzZXJJZCxcIiA9PiBcIikuY29uY2F0KGUpKSx0LnVzZXJJZD1lLG4oKX0sdC5nZXRBdHRyaWJ1dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIGUuc2NyZWVuP3Quc2NyZWVuQXR0cmlidXRlczplLmF0dHJpYnV0ZXN9LHQuaGFzQXVkaW89ZnVuY3Rpb24oKXtyZXR1cm4gdC5hdWRpb30sdC5oYXNWaWRlbz1mdW5jdGlvbigpe3JldHVybiB0LnZpZGVvfSx0Lmhhc1NjcmVlbj1mdW5jdGlvbigpe3JldHVybiB0LnNjcmVlbn0sdC5oYXNTY3JlZW5BdWRpbz1mdW5jdGlvbigpe3JldHVybiB0LnNjcmVlbkF1ZGlvfSx0LmlzVmlkZW9Pbj1mdW5jdGlvbigpe3JldHVybih0Lmhhc1ZpZGVvKCl8fHQuaGFzU2NyZWVuKCkpJiYhdC51c2VyTXV0ZVZpZGVvfSx0LmlzQXVkaW9Pbj1mdW5jdGlvbigpe3JldHVybiB0Lmhhc0F1ZGlvKCkmJiF0LnVzZXJNdXRlQXVkaW99LHQuaW5pdD1mdW5jdGlvbihpLGEpe3ZhciByPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gYSYmYShlKTtpJiZpKHQpfSxuYW1lOlwiU3RyZWFtLmluaXRcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pLGM9KChuZXcgRGF0ZSkuZ2V0VGltZSgpLGFyZ3VtZW50c1syXSk7aWYodm9pZCAwPT09YyYmKGM9MiksITA9PT10LmluaXRpYWxpemVkKXJldHVybiByKHt0eXBlOlwid2FybmluZ1wiLG1zZzpcIlNUUkVBTV9BTFJFQURZX0lOSVRJQUxJWkVEXCJ9KTtpZighMCE9PXQubG9jYWwpcmV0dXJuIHIoe3R5cGU6XCJ3YXJuaW5nXCIsbXNnOlwiU1RSRUFNX05PVF9MT0NBTFwifSk7dmFyIGQ9TWF0aC5yYW5kb20oKS50b1N0cmluZygpLnNsaWNlKDMpO3QuX3N0cmVhbUluaXRJRD1kLHQudmlkZW9Tb3VyY2U/dC52aWRlb05hbWU9XCJ2aWRlb1NvdXJjZVwiOnQudmlkZW8mJih0LnZpZGVvTmFtZT1hZS5zZWFyY2hEZXZpY2VOYW1lQnlJZChlLmNhbWVyYUlkKXx8XCJkZWZhdWx0XCIpLHQuYXVkaW9Tb3VyY2U/dC5hdWRpb05hbWU9XCJhdWRpb1NvdXJjZVwiOnQuYXVkaW8mJih0LmF1ZGlvTmFtZT1hZS5zZWFyY2hEZXZpY2VOYW1lQnlJZChlLm1pY3JvcGhvbmVJZCl8fFwiZGVmYXVsdFwiKSx0LnNjcmVlbiYmKHQuc2NyZWVuTmFtZT1lLmV4dGVuc2lvbklkfHxcImRlZmF1bHRcIik7dHJ5e2lmKGUuYXVkaW98fGUudmlkZW98fGUuc2NyZWVufHxlLnNjcmVlbkF1ZGlvfHxlLnZpZGVvU291cmNlfHxlLmF1ZGlvU291cmNlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFJlcXVlc3RlZCBhY2Nlc3MgdG8gbG9jYWwgbWVkaWFcIikpO3ZhciB1PXtzdHJlYW1JZDp0LnN0cmVhbUlkfTtlLnZpZGVvU291cmNlP3UudmlkZW9Tb3VyY2U9ZS52aWRlb1NvdXJjZTplLnNjcmVlbj91LnNjcmVlbj10LnNjcmVlbkNvbnN0cmFpbnQ6ZS52aWRlbyYmKHUudmlkZW89dC52aWRlb0NvbnN0cmFpbnQpLGUuYXVkaW9Tb3VyY2U/dS5hdWRpb1NvdXJjZT1lLmF1ZGlvU291cmNlOmUuc2NyZWVuQXVkaW8/dS5zY3JlZW5BdWRpbz1lLnNjcmVlbkF1ZGlvOmUuYXVkaW8mJih1LmF1ZGlvPXQuYXVkaW9Db25zdHJhaW50KSx0ZSh1LGZ1bmN0aW9uKGkpe2lmKHUuc2NyZWVuQXVkaW8mJiFpLmdldEF1ZGlvVHJhY2tzKClbMF0mJm8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBBdWRpbyBzaGFyaW5nIGlzIG5vdCBzZWxlY3RlZFwiKSksdS5zY3JlZW4mJm8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBoYXMgZ3JhbnRlZCBhY2Nlc3MgdG8gc2NyZWVuIHNoYXJpbmdcIikpLCh1LnZpZGVvfHx1LmF1ZGlvKSYmby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVc2VyIGhhcyBncmFudGVkIGFjY2VzcyB0byBsb2NhbCBtZWRpYVwiKSksbnVsbD09PXQuX3N0cmVhbUluaXRJRCl7aS5nZXRUcmFja3MoKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Uuc3RvcCgpfSk7dmFyIGE9e3R5cGU6XCJlcnJvclwiLG1zZzpcIlNUUkVBTV9JU19DTE9TRURcIixpbmZvOlwic3RyZWFtIGlzIGNsb3NlZCBhbmQgY2Fubm90IGJlIGluaXRpYWxpemVkXCJ9O3JldHVybiBvLmRlZmF1bHQuZXJyb3IodC5zdHJlYW1JZCxhLmluZm8pLHZvaWQgcihhKX1pZih0Ll9zdHJlYW1Jbml0SUQhPT1kKXtpLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zdG9wKCl9KTthPXt0eXBlOlwiZXJyb3JcIixtc2c6XCJBQk9SVF9PVEhFUl9JTklUXCIsaW5mbzpcInN0cmVhbSBpbml0aWFsaXphdGlvbiBpcyBhYm9ydGVkIGJlY2F1c2Ugb2YgYW5vdGhlciBzdHJlYW0uaW5pdFwifTtyZXR1cm4gby5kZWZhdWx0LmVycm9yKHQuc3RyZWFtSWQsYS5pbmZvKSx2b2lkIHIoYSl9dC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYWNjZXNzQWxsb3dlZFwifSksdC5zdHJlYW09aSx0LmluaXRpYWxpemVkPSEwLHQucmVsb2FkRGV2aWNlTmFtZSgpLHQuaGFzVmlkZW8oKSYmT2JqZWN0KG5lLnZzUmVzSGFjaykoaSxmdW5jdGlvbihlLG4pe3QudmlkZW9XaWR0aD1lLHQudmlkZW9IZWlnaHQ9bn0sZnVuY3Rpb24oZSl7by5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIHZzUmVzSGFjayBmYWlsZWQ6IFwiKSxlKX0pLGUuc2NyZWVuJiZ0LnN0cmVhbSYmdC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSYmKHQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0ub25lbmRlZD1mdW5jdGlvbigpe3QuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0b3BTY3JlZW5TaGFyaW5nXCJ9KX0pLHQuc3RyZWFtJiZ0LnN0cmVhbS5nZXRUcmFja3MmJnQuc3RyZWFtLmdldFRyYWNrcygpLmZvckVhY2goZnVuY3Rpb24oZSl7ZSYmIWUub25lbmRlZCYmKGUub25lbmRlZD1uKX0pLHIoKX0sZnVuY3Rpb24oZSl7dmFyIG49e3R5cGU6XCJlcnJvclwiLGluZm86bnVsbH07c3dpdGNoKGUmJihuLm1zZz1lLm5hbWV8fGUuY29kZXx8ZSxlLm1lc3NhZ2UmJihuLmluZm89ZS5tZXNzYWdlKSxlLmNvZGUmJihuLmluZm8/bi5pbmZvKz1cIi4gXCIrZS5jb2RlOm4uaW5mbz1cIiBcIitlLmNvZGUpLGUuY29uc3RyYWludCYmKG4uaW5mbz9uLmluZm8rPVwiLiBDb25zdHJhaW50OiBcIitlLmNvbnN0cmFpbnQ6bi5pbmZvPVwiY29uc3RyYWludDogXCIrZS5jb25zdHJhaW50KSksbi5tc2cpe2Nhc2VcIlN0YXJ0aW5nIHZpZGVvIGZhaWxlZFwiOmNhc2VcIlRyYWNrU3RhcnRFcnJvclwiOmlmKHQudmlkZW9Db25zdHJhaW50JiYoZGVsZXRlIHQudmlkZW9Db25zdHJhaW50LndpZHRoLGRlbGV0ZSB0LnZpZGVvQ29uc3RyYWludC5oZWlnaHQpLGM+MClyZXR1cm4gdm9pZCBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5pbml0KGZ1bmN0aW9uKGUpe3JldHVybiByKGUpfSxyLGMtMSl9LDEpO24ubXNnPVwiTUVESUFfT1BUSU9OX0lOVkFMSURcIjticmVhaztjYXNlXCJEZXZpY2VzTm90Rm91bmRFcnJvclwiOm4ubXNnPVwiREVWSUNFU19OT1RfRk9VTkRcIjticmVhaztjYXNlXCJOb3RTdXBwb3J0ZWRFcnJvclwiOm4ubXNnPVwiTk9UX1NVUFBPUlRFRFwiO2JyZWFrO2Nhc2VcIlBlcm1pc3Npb25EZW5pZWRFcnJvclwiOmNhc2VcIkludmFsaWRTdGF0ZUVycm9yXCI6bi5tc2c9XCJQRVJNSVNTSU9OX0RFTklFRFwiLHQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImFjY2Vzc0RlbmllZFwifSk7YnJlYWs7Y2FzZVwiUEVSTUlTU0lPTl9ERU5JRURcIjpjYXNlXCJOb3RBbGxvd2VkRXJyb3JcIjp0LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJhY2Nlc3NEZW5pZWRcIn0pO2JyZWFrO2Nhc2VcIkNvbnN0cmFpbnROb3RTYXRpc2ZpZWRFcnJvclwiOm4ubXNnPVwiQ09OU1RSQUlOVF9OT1RfU0FUSVNGSUVEXCI7YnJlYWs7ZGVmYXVsdDpuLm1zZ3x8KG4ubXNnPVwiVU5ERUZJTkVEXCIpfXZhciBpPVwiTWVkaWEgYWNjZXNzIFwiLmNvbmNhdChuLm1zZykuY29uY2F0KG4uaW5mbz9cIjogXCIrbi5pbmZvOlwiXCIpO28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gXCIpLGkpLHIobil9KX1lbHNlIHIoe3R5cGU6XCJ3YXJuaW5nXCIsbXNnOlwiU1RSRUFNX0hBU19OT19NRURJQV9BVFRSSUJVVEVTXCJ9KX1jYXRjaChlKXtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFN0cmVhbSBpbml0OiBcIiksZSkscih7dHlwZTpcImVycm9yXCIsbXNnOmUubWVzc2FnZXx8ZX0pfX0sdC5yZWxvYWREZXZpY2VOYW1lPWZ1bmN0aW9uKCl7aWYodC5zdHJlYW0pe2lmKHQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKXt2YXIgZT10LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO2UmJmUubGFiZWwmJih0LnZpZGVvTmFtZT1lLmxhYmVsKX1pZih0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcyl7dmFyIG49dC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXTtuJiZuLmxhYmVsJiYodC5hdWRpb05hbWU9bi5sYWJlbCl9fX0sdC5jbG9zZT1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UobnVsbCx7bmFtZTpcIlN0cmVhbS5jbG9zZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBDbG9zZSBzdHJlYW0gd2l0aCBpZFwiKSx0LnN0cmVhbUlkKSx2b2lkIDAhPT10LnN0cmVhbSl7dmFyIG49dC5zdHJlYW0uZ2V0VHJhY2tzKCk7Zm9yKHZhciBpIGluIG4pbi5oYXNPd25Qcm9wZXJ0eShpKSYmbltpXS5zdG9wKCk7IXQuaXNMb3dTdHJlYW0mJnQubG9jYWw/RmUuZGlzYWJsZVZpZGVvRWZmZWN0KHQpLnRoZW4oZnVuY3Rpb24oKXt0LnN0cmVhbT12b2lkIDB9KTp0LnN0cmVhbT12b2lkIDB9T2JqZWN0KG0uaXNTYWZhcmkpKCkmJnQucGMmJnQucGMucGVlckNvbm5lY3Rpb24mJnQucGMucGVlckNvbm5lY3Rpb24ucmVtb3ZlVHJhY2smJnQucGMucGVlckNvbm5lY3Rpb24uZ2V0U2VuZGVycyYmdC5wYy5wZWVyQ29ubmVjdGlvbi5nZXRTZW5kZXJzKCkuZm9yRWFjaChmdW5jdGlvbihlKXtlJiYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBSZW1vdmUgVHJhY2tcIiksZSksdC5wYy5wZWVyQ29ubmVjdGlvbi5yZW1vdmVUcmFjayhlKSl9KTt0LmluaXRpYWxpemVkPSExLHQuX3N0cmVhbUluaXRJRD1udWxsLHQuX29uQXVkaW9NdXRlPXZvaWQgMCx0Ll9vbkF1ZGlvVW5tdXRlPXZvaWQgMCx0Ll9vblZpZGVvTXV0ZT12b2lkIDAsdC5fb25WaWRlb1VubXV0ZT12b2lkIDAsdC5sb3dTdHJlYW0mJnQubG93U3RyZWFtLmNsb3NlKCksZSgpfSx0LmVuYWJsZUF1ZGlvPWZ1bmN0aW9uKCl7dmFyIGUsbj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLmVuYWJsZUF1ZGlvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtyZXR1cm4gby5kZWZhdWx0LmRlcHJlY2F0ZShcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gU3RyZWFtLmVuYWJsZUF1ZGlvIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLiBVc2UgU3RyZWFtLnVubXV0ZUF1ZGlvIGluc3RlYWRcIikpLHQudXNlck11dGVBdWRpb3x8by5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFVzZXIgYWxyZWFkeSBlbmFibGVBdWRpb1wiKSksdC51c2VyTXV0ZUF1ZGlvPSExLG4obnVsbCxlPSF0LnBlZXJNdXRlQXVkaW8mJnQuX3VubXV0ZUF1ZGlvKCkpLGV9LHQuZGlzYWJsZUF1ZGlvPWZ1bmN0aW9uKCl7dmFyIGU9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS5kaXNhYmxlQXVkaW9cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO28uZGVmYXVsdC5kZXByZWNhdGUoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFN0cmVhbS5kaXNhYmxlQXVkaW8gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUuIFVzZSBTdHJlYW0ubXV0ZUF1ZGlvIGluc3RlYWRcIikpLHQudXNlck11dGVBdWRpbyYmby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFVzZXIgYWxyZWFkeSBkaXNhYmxlQXVkaW9cIikpLHQudXNlck11dGVBdWRpbz0hMDt2YXIgbj10Ll9tdXRlQXVkaW8oKTtyZXR1cm4gZShudWxsLG4pLG59LHQuZW5hYmxlVmlkZW89ZnVuY3Rpb24oKXt2YXIgZSxuPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uZW5hYmxlVmlkZW9cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3JldHVybiBvLmRlZmF1bHQuZGVwcmVjYXRlKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBTdHJlYW0uZW5hYmxlVmlkZW8gaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCBiZSByZW1vdmVkIGluIHRoZSBmdXR1cmUuIFVzZSBTdHJlYW0udW5tdXRlVmlkZW8gaW5zdGVhZFwiKSksdC51c2VyTXV0ZVZpZGVvfHxvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBhbHJlYWR5IGVuYWJsZVZpZGVvXCIpKSx0LnVzZXJNdXRlVmlkZW89ITEsdC5sb3dTdHJlYW0mJih0Lmxvd1N0cmVhbS51c2VyTXV0ZVZpZGVvPSExKSxuKG51bGwsZT0hdC5wZWVyTXV0ZVZpZGVvJiZ0Ll91bm11dGVWaWRlbygpKSxlfSx0LmRpc2FibGVWaWRlbz1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uZGlzYWJsZVZpZGVvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtvLmRlZmF1bHQuZGVwcmVjYXRlKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBTdHJlYW0uZGlzYWJsZVZpZGVvIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgYmUgcmVtb3ZlZCBpbiB0aGUgZnV0dXJlLiBVc2UgU3RyZWFtLm11dGVWaWRlbyBpbnN0ZWFkXCIpKSx0LnVzZXJNdXRlVmlkZW8mJm8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVc2VyIGFscmVhZHkgZGlzYWJsZVZpZGVvXCIpKSx0LnVzZXJNdXRlVmlkZW89ITAsdC5sb3dTdHJlYW0mJih0Lmxvd1N0cmVhbS51c2VyTXV0ZVZpZGVvPSEwKTt2YXIgbj10Ll9tdXRlVmlkZW8oKTtyZXR1cm4gZShudWxsLG4pLG59LHQudW5tdXRlQXVkaW89ZnVuY3Rpb24oKXt2YXIgZSxuPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0udW5tdXRlQXVkaW9cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3JldHVybiB0LnVzZXJNdXRlQXVkaW98fG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVc2VyIGFscmVhZHkgdW5tdXRlQXVkaW9cIikpLHQudXNlck11dGVBdWRpbz0hMSxuKG51bGwsZT0hdC5wZWVyTXV0ZUF1ZGlvJiZ0Ll91bm11dGVBdWRpbygpKSxlfSx0Lm11dGVBdWRpbz1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0ubXV0ZUF1ZGlvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTt0LnVzZXJNdXRlQXVkaW8mJm8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVc2VyIGFscmVhZHkgbXV0ZUF1ZGlvXCIpKSx0LnVzZXJNdXRlQXVkaW89ITA7dmFyIG49dC5fbXV0ZUF1ZGlvKCk7cmV0dXJuIGUobnVsbCxuKSxufSx0LnVubXV0ZVZpZGVvPWZ1bmN0aW9uKCl7dmFyIGUsbj1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLnVubXV0ZVZpZGVvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtyZXR1cm4gdC51c2VyTXV0ZVZpZGVvfHxvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVXNlciBhbHJlYWR5IHVubXV0ZVZpZGVvXCIpKSx0LnVzZXJNdXRlVmlkZW89ITEsdC5sb3dTdHJlYW0mJih0Lmxvd1N0cmVhbS51c2VyTXV0ZVZpZGVvPSExKSxuKG51bGwsZT0hdC5wZWVyTXV0ZVZpZGVvJiZ0Ll91bm11dGVWaWRlbygpKSxlfSx0Lm11dGVWaWRlbz1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0ubXV0ZVZpZGVvXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTt0LnVzZXJNdXRlVmlkZW8mJm8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBVc2VyIGFscmVhZHkgbXV0ZVZpZGVvXCIpKSx0LnVzZXJNdXRlVmlkZW89ITAsdC5sb3dTdHJlYW0mJih0Lmxvd1N0cmVhbS51c2VyTXV0ZVZpZGVvPSEwKTt2YXIgbj10Ll9tdXRlVmlkZW8oKTtyZXR1cm4gZShudWxsLG4pLG59LHQuX3VubXV0ZUF1ZGlvPWZ1bmN0aW9uKCl7cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gVW5tdXRlZCBhdWRpbyBzdHJlYW0gd2l0aCBpZCBcIiksdC5zdHJlYW1JZCksdC5fZmx1c2hBdWRpb01peGluZ011dGVTdGF0dXMoITEpLCEoIXQuaGFzQXVkaW8oKXx8IXQuaW5pdGlhbGl6ZWR8fHZvaWQgMD09PXQuc3RyZWFtfHwhMD09PXQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZCkmJih0Ll9vbkF1ZGlvVW5tdXRlJiZ0Ll9vbkF1ZGlvVW5tdXRlKCksdC5wYyYmKHQucGMuaXNBdWRpb011dGU9ITEpLHQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZD0hMCwhMCl9LHQuX2lzQXVkaW9NdXRlZD1mdW5jdGlvbigpe2lmKHQuc3RyZWFtJiZ0Lmhhc0F1ZGlvKCkpe3ZhciBlPXQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKCk7cmV0dXJuIGUubGVuZ3RoPjAmJiFlWzBdLmVuYWJsZWR9cmV0dXJuITF9LHQuX2lzVmlkZW9NdXRlZD1mdW5jdGlvbigpe2lmKHQuc3RyZWFtJiZ0Lmhhc1ZpZGVvKCkpe3ZhciBlPXQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKCk7cmV0dXJuIGUubGVuZ3RoPjAmJiFlWzBdLmVuYWJsZWR9cmV0dXJuITF9LHQuX211dGVBdWRpbz1mdW5jdGlvbigpe3JldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIE11dGVkIGF1ZGlvIHN0cmVhbSB3aXRoIGlkIFwiKSx0LnN0cmVhbUlkKSx0Ll9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cyghMCksISEodC5oYXNBdWRpbygpJiZ0LmluaXRpYWxpemVkJiZ2b2lkIDAhPT10LnN0cmVhbSYmdC5zdHJlYW0uZ2V0QXVkaW9UcmFja3MoKVswXS5lbmFibGVkKSYmKHQuX29uQXVkaW9NdXRlJiZ0Ll9vbkF1ZGlvTXV0ZSgpLHQucGMmJih0LnBjLmlzQXVkaW9NdXRlPSEwKSx0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdLmVuYWJsZWQ9ITEsdC5zaWQmJnMuYi5hdWRpb1NlbmRpbmdTdG9wcGVkKHQuc2lkLHtzdWNjOiEwLHJlYXNvbjpcIm11dGVBdWRpb1wifSksITApfSx0Ll91bm11dGVWaWRlbz1mdW5jdGlvbigpe3JldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFVubXV0ZWQgdmlkZW8gc3RyZWFtIHdpdGggaWRcIiksdC5zdHJlYW1JZCksISghdC5pbml0aWFsaXplZHx8dm9pZCAwPT09dC5zdHJlYW18fCF0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpLmxlbmd0aHx8ITA9PT10LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQpJiYodC5fb25WaWRlb1VubXV0ZSYmdC5fb25WaWRlb1VubXV0ZSgpLHQucGMmJih0LnBjLmlzVmlkZW9NdXRlPSExKSx0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQ9ITAsdC5sb3dTdHJlYW0mJnQubG93U3RyZWFtLl91bm11dGVWaWRlbygpLCEwKX0sdC5fbXV0ZVZpZGVvPWZ1bmN0aW9uKCl7cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gTXV0ZWQgdmlkZW8gc3RyZWFtIHdpdGggaWRcIiksdC5zdHJlYW1JZCksISEodC5pbml0aWFsaXplZCYmdm9pZCAwIT09dC5zdHJlYW0mJnQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKCkubGVuZ3RoJiZ0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQpJiYodC5fb25WaWRlb011dGUmJnQuX29uVmlkZW9NdXRlKCksdC5wYyYmKHQucGMuaXNWaWRlb011dGU9ITApLHQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF0uZW5hYmxlZD0hMSx0Lmxvd1N0cmVhbSYmdC5sb3dTdHJlYW0uX211dGVWaWRlbygpLHQuc2lkJiZzLmIudmlkZW9TZW5kaW5nU3RvcHBlZCh0LnNpZCx7c3VjYzohMCxyZWFzb246XCJtdXRlVmlkZW9cIn0pLCEwKX0sdC5hZGRUcmFjaz1mdW5jdGlvbihpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLmFkZFRyYWNrXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSxyPXQuY2hlY2tEdWFsU3RyZWFtRW5hYmxlZCgpO2lmKHIpcmV0dXJuIGEocik7aWYodC5wYyYmdC5wYy5hZGRUcmFjayhpLHQuc3RyZWFtKSxcImF1ZGlvXCI9PWkua2luZCl7dC5fY2xlYW51cEF1ZGlvTWl4aW5nKCk7dmFyIG89bmV3IE1lZGlhU3RyZWFtO3QudXNlck11dGVBdWRpbyYmKGkuZW5hYmxlZD0hMSksby5hZGRUcmFjayhpKTt2YXIgYz10LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO2MmJihvLmFkZFRyYWNrKGMpLHQuYXVkaW89ITAsZS5hdWRpbz0hMCksdC5zdHJlYW09byx0LmF1ZGlvTGV2ZWxIZWxwZXI9bnVsbCx0LnBsYXllciYmdC5wbGF5ZXIudmlkZW8mJih0LnBsYXllci52aWRlby5zcmNPYmplY3Q9dC5zdHJlYW0pfWVsc2UgdC51c2VyTXV0ZVZpZGVvJiYoaS5lbmFibGVkPSExKSx0LnN0cmVhbS5hZGRUcmFjayhpKSx0LnZpZGVvPSEwLGUudmlkZW89ITA7aS5vbmVuZGVkfHwoaS5vbmVuZGVkPW4pLGEoKX0sdC5yZW1vdmVUcmFjaz1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtuYW1lOlwiU3RyZWFtLnJlbW92ZVRyYWNrXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSxhPXQuY2hlY2tEdWFsU3RyZWFtRW5hYmxlZCgpLHI9RmUuY2hlY2tWaWRlb0VmZmVjdEVuYWJsZWQodCk7aWYoYXx8cilyZXR1cm4gaShhKTt0LnBjJiZ0LnBjLnJlbW92ZVRyYWNrKG4sdC5zdHJlYW0pLHQuc3RyZWFtLnJlbW92ZVRyYWNrKG4pLHQuX2NsZWFudXBBdWRpb01peGluZygpLFwiYXVkaW9cIj09PW4ua2luZD8odC5hdWRpbz0hMSxlLmF1ZGlvPSExKToodC52aWRlbz0hMSxlLnZpZGVvPSExKSx0LmF1ZGlvTGV2ZWxIZWxwZXI9bnVsbCxcImxpdmVcIj09bi5yZWFkeVN0YXRlJiYobi5zdG9wKCksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBUcmFjayBcIikuY29uY2F0KG4ua2luZCxcIiBTdG9wcGVkXCIpKSksaSgpfSx0LnNldEF1ZGlvT3V0cHV0PWZ1bmN0aW9uKGUsbixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2lkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGkmJmkoZSk7biYmbih0KX0sbmFtZTpcIlN0cmVhbS5zZXRBdWRpb091dHB1dFwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7cmV0dXJuIE9iamVjdChyZS5pc1ZhbGlkU3RyaW5nKShlLDEsMjU1KT8odC5hdWRpb091dHB1dD1lLHQucGxheWVyP3ZvaWQgdC5wbGF5ZXIuc2V0QXVkaW9PdXRwdXQoZSxmdW5jdGlvbigpe3JldHVybiBhKCl9LGEpOmEoKSk6KG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gc2V0QXVkaW9PdXRwdXQgSW52YWxpZCBQYXJhbWV0ZXJcIiksZSksYShWLklOVkFMSURfUEFSQU1FVEVSKSl9LHQucGxheT1mdW5jdGlvbihlLG4saSl7XCJmdW5jdGlvblwiPT10eXBlb2YgbiYmKGk9bixuPW51bGwpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gcGxheSgpLlwiKSxlLG4pO3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0ucGxheVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwiLGNhbGxiYWNrOml9KTtpZihPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykoZSxcImVsZW1lbnRJRFwiKSxPYmplY3QocmUuaXNFbXB0eSkobil8fChPYmplY3QocmUuaXNFbXB0eSkobi5maXQpfHxPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKG4uZml0LFwiZml0XCIsW1wiY292ZXJcIixcImNvbnRhaW5cIl0pLE9iamVjdChyZS5pc0VtcHR5KShuLm11dGVkKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShuLm11dGVkLFwibXV0ZWRcIikpLHQucGxheWVyKW8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBTdHJlYW0ucGxheSgpOiBTdHJlYW0gaXMgYWxyZWFkeSBwbGF5aW5nLiBGYWxsYmFjayB0byByZXN1bWUgc3RyZWFtXCIpKSx0LnJlc3VtZSgpLnRoZW4oZnVuY3Rpb24oKXthKG51bGwpfSkuY2F0Y2goYSk7ZWxzZXt0LmVsZW1lbnRJRD1lLHQucGxheU9wdGlvbnM9biwhdC5sb2NhbHx8dC52aWRlb3x8dC5zY3JlZW4/KHQucGxheWVyPW5ldyBqKHtpZDp0LmdldElkKCksc3RyZWFtOnQsZWxlbWVudElEOmUsb3B0aW9uczpufSksdC5sb2NhbCYmRmUuYXBwbHlFZmZlY3RJblBsYXllcih0KSk6dC5oYXNBdWRpbygpJiYodC5wbGF5ZXI9bmV3IGooe2lkOnQuZ2V0SWQoKSxzdHJlYW06dCxlbGVtZW50SUQ6ZSxvcHRpb25zOm59KSk7dmFyIHI9e2F1ZGlvOm51bGwsdmlkZW86bnVsbH07dC5vbihcInBsYXllci1zdGF0dXMtY2hhbmdlXCIsZnVuY3Rpb24gZShuKXtpZihyW24ubWVkaWFUeXBlXT1uLHIuYXVkaW8mJnIudmlkZW8paWYodC5yZW1vdmVFdmVudExpc3RlbmVyKFwicGxheWVyLXN0YXR1cy1jaGFuZ2VcIixlKSxyLnZpZGVvLmlzRXJyb3JTdGF0ZXx8ci5hdWRpby5pc0Vycm9yU3RhdGUpe3ZhciBpPXIudmlkZW8uaXNFcnJvclN0YXRlP3IudmlkZW86ci5hdWRpbzthKHtpc0Vycm9yU3RhdGU6ITAsc3RhdHVzOmkuc3RhdHVzLHJlYXNvbjppLnJlYXNvbix2aWRlbzpyLnZpZGVvLGF1ZGlvOnIuYXVkaW99KX1lbHNlXCJhYm9ydGVkXCI9PT1yLnZpZGVvLnN0YXR1cyYmXCJhYm9ydGVkXCI9PT1yLmF1ZGlvLnN0YXR1cz9hKHtzdGF0dXM6XCJhYm9ydGVkXCIscmVhc29uOlwic3RvcFwiLHZpZGVvOnIudmlkZW8sYXVkaW86ci5hdWRpb30pOmEobnVsbCl9KSx0LmF1ZGlvT3V0cHV0JiZ0LnBsYXllci5zZXRBdWRpb091dHB1dCh0LmF1ZGlvT3V0cHV0KSx2b2lkIDAhPT10LmF1ZGlvTGV2ZWwmJnQucGxheWVyLnNldEF1ZGlvVm9sdW1lKHQuYXVkaW9MZXZlbCksdC5fZmx1c2hBdWRpb01peGluZ011dGVTdGF0dXMoITEpfX0sdC5zdG9wPWZ1bmN0aW9uKCl7dmFyIGU9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS5zdG9wXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFN0b3Agc3RyZWFtIHBsYXllciB3aXRoIGlkIFwiKSx0LnN0cmVhbUlkKSx0LnBsYXllcj8oRmUucmVtb3ZlRWZmZWN0RnJvbUxvY2FsUGxheWVyKHQpLHQucGxheWVyLmRlc3Ryb3koKSxkZWxldGUgdC5wbGF5ZXIpOm8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gU3RyZWFtLnN0b3AoKTogU3RyZWFtIGlzIG5vdCBwbGF5aW5nXCIpKSx0Ll9mbHVzaEF1ZGlvTWl4aW5nTXV0ZVN0YXR1cyghMCksZSgpfSx0LmlzUGxheWluZz1mdW5jdGlvbigpe3JldHVybiEhdC5wbGF5ZXJ9LHQuaXNQYXVzZWQ9ZnVuY3Rpb24oKXtyZXR1cm4hIXQucGxheWVyJiYoISEodC5wbGF5ZXIudmlkZW8mJnQucGxheWVyLnZpZGVvLnBhdXNlZCYmdC5wbGF5ZXIubWVkaWFFbGVtRXhpc3RzKHQucGxheWVyLnZpZGVvKSl8fCEhKHQucGxheWVyLmF1ZGlvJiZ0LnBsYXllci5hdWRpby5wYXVzZWQmJnQucGxheWVyLm1lZGlhRWxlbUV4aXN0cyh0LnBsYXllci5hdWRpbykpKX0sdC5yZXN1bWU9ZnVuY3Rpb24oKXt2YXIgZSxuO3JldHVybiB0LnBsYXllcj8odC5wbGF5ZXIudmlkZW8mJnQucGxheWVyLnZpZGVvLnBsYXkmJihlPXQucGxheWVyLnZpZGVvLnBsYXkoKSksZT1lfHxQcm9taXNlLnJlc29sdmUoKSx0LnBsYXllci5hdWRpbyYmdC5wbGF5ZXIuYXVkaW8ucGxheSYmKG49dC5wbGF5ZXIuYXVkaW8ucGxheSgpKSxuPW58fFByb21pc2UucmVzb2x2ZSgpLFByb21pc2UuYWxsKFtlLG5dKSk6UHJvbWlzZS5yZWplY3QoXCJOT19QTEFZRVJfRk9VTkRcIil9LHQuZ2V0VmlkZW9UcmFjaz1mdW5jdGlvbigpe3ZhciBlPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse25hbWU6XCJTdHJlYW0uZ2V0VmlkZW9UcmFja1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYodC5zdHJlYW0mJnQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKXt2YXIgbj10LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdO2lmKG4pcmV0dXJuIG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBnZXRWaWRlb1RyYWNrXCIpLG4pLGUoKSxufW8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBnZXRWaWRlb1RyYWNrIE5vbmVcIikpLGUobnVsbCxcImdldFZpZGVvVHJhY2sgTm9uZVwiKX0sdC5nZXRBdWRpb1RyYWNrPWZ1bmN0aW9uKCl7dmFyIGU9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS5nZXRBdWRpb1RyYWNrXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZih0LnN0cmVhbSYmdC5zdHJlYW0uZ2V0QXVkaW9UcmFja3Mpe3ZhciBuPXQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF07aWYobilyZXR1cm4gby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIGdldEF1ZGlvVHJhY2tzXCIpLG4pLGUoKSxufW8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBnZXRBdWRpb1RyYWNrcyBOb25lXCIpKSxlKG51bGwsXCJnZXRBdWRpb1RyYWNrcyBOb25lXCIpfSx0Ll9oYXNWaWRlb1RyYWNrcz1mdW5jdGlvbigpe3JldHVybiEhKHQuc3RyZWFtJiZ0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcyYmdC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSl9LHQuX2hhc0F1ZGlvVHJhY2tzPWZ1bmN0aW9uKCl7cmV0dXJuISEodC5zdHJlYW0mJnQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzJiZ0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKX0sdC5fcmVwbGFjZU1lZGlhU3RyZWFtVHJhY2s9ZnVuY3Rpb24oZSxuLGkpe2lmKHQuc3RyZWFtKXtpZihcInZpZGVvXCI9PWUua2luZCl7aWYocj10LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdKXJldHVybiB0LnVzZXJNdXRlVmlkZW8mJihlLmVuYWJsZWQ9ITEpLHQuc3RyZWFtLnJlbW92ZVRyYWNrKHIpLHQuc3RyZWFtLmFkZFRyYWNrKGUpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gX3JlcGxhY2VNZWRpYVN0cmVhbVRyYWNrIFwiKS5jb25jYXQoZS5raW5kLFwiIFNVQ0NFU1NcIikpLFwibGl2ZVwiPT1yLnJlYWR5U3RhdGUmJihyLnN0b3AoKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFRyYWNrIFwiKS5jb25jYXQoci5raW5kLFwiIFN0b3BwZWRcIikpKSxuJiZuKCk7dmFyIGE9XCJNRURJQVNUUkVBTV9UUkFDS19OT1RfRk9VTkRcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBNRURJQVNUUkVBTV9UUkFDS19OT1RfRk9VTkQgXCIpLmNvbmNhdChlLmtpbmQpKSxpKGEpfWlmKFwiYXVkaW9cIj09ZS5raW5kKXt2YXIgcjtpZihyPXQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0pe3QudXNlck11dGVBdWRpbyYmKGUuZW5hYmxlZD0hMSk7dmFyIHM9bmV3IE1lZGlhU3RyZWFtO3MuYWRkVHJhY2soZSk7dmFyIGM9dC5zdHJlYW0mJnQuc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07cmV0dXJuIGMmJnMuYWRkVHJhY2soYyksdC5zdHJlYW09cyx0LmF1ZGlvTGV2ZWxIZWxwZXI9bnVsbCx0LnBsYXllciYmdC5wbGF5ZXIudmlkZW8mJih0LnBsYXllci52aWRlby5zcmNPYmplY3Q9dC5zdHJlYW0pLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gX3JlcGxhY2VNZWRpYVN0cmVhbVRyYWNrIFNVQ0NFU1NcIikpLFwibGl2ZVwiPT1yLnJlYWR5U3RhdGUmJihyLnN0b3AoKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIFRyYWNrIFwiKS5jb25jYXQoci5raW5kLFwiIFN0b3BwZWRcIikpKSxuJiZuKCl9YT1cIk1FRElBU1RSRUFNX1RSQUNLX05PVF9GT1VORFwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIE1FRElBU1RSRUFNX1RSQUNLX05PVF9GT1VORCBcIikuY29uY2F0KGUua2luZCkpLGkoYSl9YT1cIklOVkFMSURfVFJBQ0tfVFlQRVwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuc3RyZWFtSWQsXCJdIF9yZXBsYWNlTWVkaWFTdHJlYW1UcmFjayBcIikuY29uY2F0KGEsXCIgXCIpLmNvbmNhdChlLmtpbmQpKSxpJiZpKGEpfWE9XCJOT19TVFJFQU1fRk9VTkRcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBfcmVwbGFjZU1lZGlhU3RyZWFtVHJhY2sgXCIpLmNvbmNhdChhKSksaSYmaShhKX0sdC5yZXBsYWNlVHJhY2s9ZnVuY3Rpb24oZSxpLGEpe3ZhciByPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gYSYmYShlKTtpJiZpKHQpfSxuYW1lOlwiU3RyZWFtLnJlcGxhY2VUcmFja1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYoIWV8fCFlLmtpbmQpcmV0dXJuIHIoXCJJTlZBTElEX1RSQUNLXCIpO3ZhciBjPXQuY2hlY2tEdWFsU3RyZWFtRW5hYmxlZCgpO3JldHVybiBjP3IoYyk6KHQuX2NsZWFudXBBdWRpb01peGluZygpLGUub25lbmRlZHx8KGUub25lbmRlZD1uKSx0LnBjJiZ0LnBjLmhhc1NlbmRlciYmdC5wYy5oYXNTZW5kZXIoZS5raW5kKT92b2lkIHQucGMucmVwbGFjZVRyYWNrKGUsZnVuY3Rpb24oKXtyZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBQZWVyQ29ubmVjdGlvbi5yZXBsYWNlVHJhY2sgXCIpLmNvbmNhdChlLmtpbmQsXCIgU1VDQ0VTU1wiKSksdC5fcmVwbGFjZU1lZGlhU3RyZWFtVHJhY2soZSxmdW5jdGlvbihlKXtyZXR1cm4gcihudWxsLGUpfSxyKX0sZnVuY3Rpb24obil7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gUGVlckNvbm5lY3Rpb24ucmVwbGFjZVRyYWNrIFwiKS5jb25jYXQoZS5raW5kLFwiIEZhaWxlZCBcIikuY29uY2F0KG4pKSxyKG4pfSk6dC5fcmVwbGFjZU1lZGlhU3RyZWFtVHJhY2soZSxmdW5jdGlvbihlKXtyZXR1cm4gcihudWxsLGUpfSxyKSl9LHQuc2V0QXVkaW9Wb2x1bWU9ZnVuY3Rpb24oZSl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZSh0LnNpZCx7bmFtZTpcIlN0cmVhbS5zZXRBdWRpb1ZvbHVtZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUsXCJsZXZlbFwiLDAsMTAwKSx0LmF1ZGlvTGV2ZWw9ZSx0LnBsYXllciYmdC5wbGF5ZXIuc2V0QXVkaW9Wb2x1bWUoZSksbigpfSx0LmdldFN0YXRzPWZ1bmN0aW9uKGUsbixpKXt2YXIgYT1bXTthLnB1c2godC5fZ2V0UENTdGF0cyhpKSksYS5wdXNoKG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3ZhciBuPXt9O3QucGMmJnQucGMuaXNTdWJzY3JpYmVyP251bGwhPT13aW5kb3cubmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChcIkZpcmVmb3hcIikmJihpZShuLFwidmlkZW9SZWNlaXZlUmVzb2x1dGlvbkhlaWdodFwiLHQudmlkZW9IZWlnaHQpLGllKG4sXCJ2aWRlb1JlY2VpdmVSZXNvbHV0aW9uV2lkdGhcIix0LnZpZGVvV2lkdGgpKTp0LnBjJiYhdC5wYy5pc1N1YnNjcmliZXImJigoT2JqZWN0KG0uaXNTYWZhcmkpKCl8fE9iamVjdChtLmlzRmlyZUZveCkoKSkmJihpZShuLFwidmlkZW9TZW5kUmVzb2x1dGlvbkhlaWdodFwiLHQudmlkZW9IZWlnaHQpLGllKG4sXCJ2aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGhcIix0LnZpZGVvV2lkdGgpKSwoT2JqZWN0KG0uaXNTYWZhcmkpKCl8fE9iamVjdChtLmlzRmlyZUZveCkoKSkmJnQudXBsaW5rU3RhdHMmJmllKG4sXCJ2aWRlb1NlbmRQYWNrZXRzTG9zdFwiLHQudXBsaW5rU3RhdHMudXBsaW5rX2N1bXVsYXRpdmVfbG9zdCkpLGUobil9KSksYS5wdXNoKG5ldyBQcm9taXNlKGZ1bmN0aW9uKGUpe3ZhciBuPXt9O3JldHVybiB0LnRyYWZmaWNfc3RhdHMmJnQucGMmJnQucGMuaXNTdWJzY3JpYmVyPyhpZShuLFwiYWNjZXNzRGVsYXlcIix0LnRyYWZmaWNfc3RhdHMuYWNjZXNzX2RlbGF5KSxpZShuLFwiZW5kVG9FbmREZWxheVwiLHQudHJhZmZpY19zdGF0cy5lMmVfZGVsYXkpLGllKG4sXCJ2aWRlb1JlY2VpdmVEZWxheVwiLHQudHJhZmZpY19zdGF0cy52aWRlb19kZWxheSksaWUobixcImF1ZGlvUmVjZWl2ZURlbGF5XCIsdC50cmFmZmljX3N0YXRzLmF1ZGlvX2RlbGF5KSk6dC50cmFmZmljX3N0YXRzJiZ0LnBjJiYhdC5wYy5pc1N1YnNjcmliZXImJmllKG4sXCJhY2Nlc3NEZWxheVwiLHQudHJhZmZpY19zdGF0cy5hY2Nlc3NfZGVsYXkpLGUobil9KSksUHJvbWlzZS5hbGwoYSkudGhlbihmdW5jdGlvbihuKXtmb3IodmFyIGk9e30sYT1uLmxlbmd0aC0xO2E+PTA7YS0tKXt2YXIgcj1uW2FdO1MoKShpLHIpfWUmJnNldFRpbWVvdXQoZS5iaW5kKHQsaSksMCl9KS5jYXRjaChmdW5jdGlvbihlKXtuJiZzZXRUaW1lb3V0KG4uYmluZCh0LGUpLDApfSl9LHQuX2dldFBDU3RhdHM9ZnVuY3Rpb24oZSl7cmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uKG4saSl7aWYoIXQucGN8fFwiZXN0YWJsaXNoZWRcIiE9PXQucGMuc3RhdGV8fCF0LnBjLmdldFN0YXRzKXtyZXR1cm4gaShcIlBFRVJfQ09OTkVDVElPTl9OT1RfRVNUQUJMSVNIRURcIil9dC5wYy5nZXRTdGF0cyhmdW5jdGlvbihlKXtpZighdC5wY3x8XCJlc3RhYmxpc2hlZFwiIT09dC5wYy5zdGF0ZXx8IXQucGMuZ2V0U3RhdHMpe3JldHVybiBpKFwiUEVFUl9DT05ORUNUSU9OX1NUQVRFX0NIQU5HRVwiKX12YXIgYT10LnBjLmlzU3Vic2NyaWJlcj9mdW5jdGlvbihlKXt2YXIgdD17fTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UuaWQmJigtMT09PWUuaWQuaW5kZXhPZihcInJlY3ZcIikmJi0xPT09ZS5pZC5pbmRleE9mKFwiaW5ib3VuZF9ydHBcIikmJi0xPT09ZS5pZC5pbmRleE9mKFwiaW5ib3VuZC1ydHBcIikmJi0xPT09ZS5pZC5pbmRleE9mKFwiSW5ib3VuZFJUUFwiKXx8KFwiYXVkaW9cIj09PWUubWVkaWFUeXBlPyhpZSh0LFwiYXVkaW9SZWNlaXZlQnl0ZXNcIixlLmJ5dGVzUmVjZWl2ZWQpLGllKHQsXCJhdWRpb1JlY2VpdmVQYWNrZXRzXCIsZS5wYWNrZXRzUmVjZWl2ZWQpLGllKHQsXCJhdWRpb1JlY2VpdmVQYWNrZXRzTG9zdFwiLGUucGFja2V0c0xvc3QpKTooaWUodCxcInZpZGVvUmVjZWl2ZUJ5dGVzXCIsZS5ieXRlc1JlY2VpdmVkKSxpZSh0LFwidmlkZW9SZWNlaXZlUGFja2V0c0xvc3RcIixlLnBhY2tldHNMb3N0KSxpZSh0LFwidmlkZW9SZWNlaXZlUGFja2V0c1wiLGUucGFja2V0c1JlY2VpdmVkKSxpZSh0LFwidmlkZW9SZWNlaXZlRnJhbWVSYXRlXCIsZS5nb29nRnJhbWVSYXRlUmVjZWl2ZWQpLGllKHQsXCJ2aWRlb1JlY2VpdmVEZWNvZGVGcmFtZVJhdGVcIixlLmdvb2dGcmFtZVJhdGVEZWNvZGVkKSxpZSh0LFwidmlkZW9SZWNlaXZlUmVzb2x1dGlvbldpZHRoXCIsZS5nb29nRnJhbWVXaWR0aFJlY2VpdmVkKSxpZSh0LFwidmlkZW9SZWNlaXZlUmVzb2x1dGlvbkhlaWdodFwiLGUuZ29vZ0ZyYW1lSGVpZ2h0UmVjZWl2ZWQpKSkpfSksdH0oZSk6ZnVuY3Rpb24oZSl7dmFyIHQ9e307cmV0dXJuIGUuZm9yRWFjaChmdW5jdGlvbihlKXtlLmlkJiYoLTE9PT1lLmlkLmluZGV4T2YoXCJzZW5kXCIpJiYtMT09PWUuaWQuaW5kZXhPZihcIm91dGJvdW5kX3J0cFwiKSYmLTE9PT1lLmlkLmluZGV4T2YoXCJPdXRib3VuZFJUUFwiKXx8KFwiYXVkaW9cIj09PWUubWVkaWFUeXBlPyhpZSh0LFwiYXVkaW9TZW5kQnl0ZXNcIixlLmJ5dGVzU2VudCksaWUodCxcImF1ZGlvU2VuZFBhY2tldHNcIixlLnBhY2tldHNTZW50KSxpZSh0LFwiYXVkaW9TZW5kUGFja2V0c0xvc3RcIixlLnBhY2tldHNMb3N0KSk6KGllKHQsXCJ2aWRlb1NlbmRCeXRlc1wiLGUuYnl0ZXNTZW50KSxpZSh0LFwidmlkZW9TZW5kUGFja2V0c1wiLGUucGFja2V0c1NlbnQpLGllKHQsXCJ2aWRlb1NlbmRQYWNrZXRzTG9zdFwiLGUucGFja2V0c0xvc3QpLGllKHQsXCJ2aWRlb1NlbmRGcmFtZVJhdGVcIixlLmdvb2dGcmFtZVJhdGVTZW50KSxpZSh0LFwidmlkZW9TZW5kUmVzb2x1dGlvbldpZHRoXCIsZS5nb29nRnJhbWVXaWR0aFNlbnQpLGllKHQsXCJ2aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0XCIsZS5nb29nRnJhbWVIZWlnaHRTZW50KSkpKX0pLHR9KGUpO3JldHVybiBuKGEpfSxlKX0pLnRoZW4oZnVuY3Rpb24oZSl7cmV0dXJuIHQucGMuaXNTdWJzY3JpYmVyPyhPYmplY3QobS5pc0ZpcmVGb3gpKCl8fE9iamVjdChtLmlzU2FmYXJpKSgpKSYmKGUudmlkZW9SZWNlaXZlUmVzb2x1dGlvbkhlaWdodCYmXCIwXCIhPT1lLnZpZGVvUmVjZWl2ZVJlc29sdXRpb25IZWlnaHR8fGUudmlkZW9SZWNlaXZlUmVzb2x1dGlvbldpZHRoJiZcIjBcIiE9PWUudmlkZW9SZWNlaXZlUmVzb2x1dGlvbldpZHRofHwoaWUoZSxcInZpZGVvUmVjZWl2ZVJlc29sdXRpb25IZWlnaHRcIix0LnZpZGVvSGVpZ2h0KSxpZShlLFwidmlkZW9SZWNlaXZlUmVzb2x1dGlvbldpZHRoXCIsdC52aWRlb1dpZHRoKSkpOigoT2JqZWN0KG0uaXNTYWZhcmkpKCl8fE9iamVjdChtLmlzRmlyZUZveCkoKSkmJihlLnZpZGVvU2VuZFJlc29sdXRpb25IZWlnaHQmJlwiMFwiIT09ZS52aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0fHxlLnZpZGVvU2VuZFJlc29sdXRpb25XaWR0aCYmXCIwXCIhPT1lLnZpZGVvU2VuZFJlc29sdXRpb25XaWR0aHx8KGllKGUsXCJ2aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0XCIsdC52aWRlb0hlaWdodCksaWUoZSxcInZpZGVvU2VuZFJlc29sdXRpb25XaWR0aFwiLHQudmlkZW9XaWR0aCkpKSwoT2JqZWN0KG0uaXNTYWZhcmkpKCl8fE9iamVjdChtLmlzRmlyZUZveCkoKSkmJnQudXBsaW5rU3RhdHMmJmllKGUsXCJ2aWRlb1NlbmRQYWNrZXRzTG9zdFwiLHQudXBsaW5rU3RhdHMudXBsaW5rX2N1bXVsYXRpdmVfbG9zdCkpLFByb21pc2UucmVzb2x2ZShlKX0pfSx0LmdldEF1ZGlvTGV2ZWw9ZnVuY3Rpb24oKXtpZih0LmF1ZGlvTGV2ZWxIZWxwZXIpcmV0dXJuIHQuYXVkaW9MZXZlbEhlbHBlci5nZXRBdWRpb0xldmVsKCk7aWYodC5zdHJlYW0pe2lmKDAhPT10LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpLmxlbmd0aClyZXR1cm4gdC5hdWRpb0xldmVsSGVscGVyPW5ldyBuZS5hdWRpb0xldmVsSGVscGVyKHQuc3RyZWFtKSx0LmF1ZGlvTGV2ZWxIZWxwZXIuZ2V0QXVkaW9MZXZlbCgpO28uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBjYW4ndCBnZXQgYXVkaW9MZXZlbCBiZWFjdXNlIG5vIGF1ZGlvIHRyYWNlIGluIHN0cmVhbVwiKSl9ZWxzZSBvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gY2FuJ3QgZ2V0IGF1ZGlvTGV2ZWwgYmVhY3VzZSBubyBzdHJlYW0gZXhpc3RcIikpfSx0LnNldFZpZGVvUHJvZmlsZShcIjQ4MFBcIiksdC5fc3dpdGNoVmlkZW9EZXZpY2U9ZnVuY3Rpb24oZSxuLGkpe2lmKGU9PT10LmNhbWVyYUlkKXJldHVybiBuJiZuKCk7dmFyIGE9e3ZpZGVvOlMoKSh7fSx0LnZpZGVvQ29uc3RyYWludCx7ZGV2aWNlSWQ6e2V4YWN0OmV9fSksYXVkaW86ITF9O28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gXCIpLmNvbmNhdChhKSksdGUoYSxmdW5jdGlvbihhKXt0cnl7dmFyIHI9ZnVuY3Rpb24oKXt0LmlzUGxheWluZygpJiYodC5zdG9wKCksdC5lbGVtZW50SUQmJnQucGxheSh0LmVsZW1lbnRJRCx0LnBsYXlPcHRpb25zKSksdC5jYW1lcmFJZD1lLHQudmlkZW9Db25zdHJhaW50LmRldmljZUlkPXtleGFjdDplfSx0LnVzZXJNdXRlVmlkZW8mJih0LnN0cmVhbS5nZXRWaWRlb1RyYWNrcygpWzBdLmVuYWJsZWQ9ITEpLEZlLnJlc3RvcmVWaWRlb0VmZmVjdCh0KSxuJiZuKCl9O0ZlLmRpc2FibGVWaWRlb0VmZmVjdCh0KS50aGVuKGZ1bmN0aW9uKCl7T2JqZWN0KG0uaXNTYWZhcmkpKCk/dC5yZXBsYWNlVHJhY2soYS5nZXRWaWRlb1RyYWNrcygpWzBdLHIsaSk6KHQucmVtb3ZlVHJhY2sodC5zdHJlYW0uZ2V0VmlkZW9UcmFja3MoKVswXSksdC5hZGRUcmFjayhhLmdldFZpZGVvVHJhY2tzKClbMF0pLHIoKSl9KX1jYXRjaChlKXtyZXR1cm4gaSYmaShlKX19LGZ1bmN0aW9uKGUpe3JldHVybiBpJiZpKGUpfSl9LHQuX3N3aXRjaEF1ZGlvRGV2aWNlPWZ1bmN0aW9uKGUsbixpKXtpZihlPT09dC5taWNyb3Bob25lSWQpcmV0dXJuIG4mJm4oKTt2YXIgYT17dmlkZW86ITEsYXVkaW86UygpKHt9LHQuYXVkaW9Db25zdHJhaW50LHtkZXZpY2VJZDp7ZXhhY3Q6ZX19KX07by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LnN0cmVhbUlkLFwiXSBcIiksYSksdGUoYSxmdW5jdGlvbihhKXt2YXIgcj1mdW5jdGlvbigpe3QuX2NsZWFudXBBdWRpb01peGluZygpLHQudXNlck11dGVBdWRpbyYmKHQuc3RyZWFtLmdldEF1ZGlvVHJhY2tzKClbMF0uZW5hYmxlZD0hMSksdC5pc1BsYXlpbmcoKSYmKHQuc3RvcCgpLHQuZWxlbWVudElEJiZ0LnBsYXkodC5lbGVtZW50SUQpKSx0Lm1pY3JvcGhvbmVJZD1lLHQuYXVkaW9Db25zdHJhaW50LmRldmljZUlkPXtleGFjdDplfSxuJiZuKCl9O3RyeXtPYmplY3QobS5pc1NhZmFyaSkoKT90LnJlcGxhY2VUcmFjayhhLmdldEF1ZGlvVHJhY2tzKClbMF0scixpKToodC5yZW1vdmVUcmFjayh0LnN0cmVhbS5nZXRBdWRpb1RyYWNrcygpWzBdKSx0LmFkZFRyYWNrKGEuZ2V0QXVkaW9UcmFja3MoKVswXSkscigpKX1jYXRjaChlKXtyZXR1cm4gaSYmaShlKX19LGZ1bmN0aW9uKGUpe3JldHVybiBpJiZpKGUpfSl9LHQuc3dpdGNoRGV2aWNlPWZ1bmN0aW9uKGUsbixpLGEpe3ZhciByPXMuYi5yZXBvcnRBcGlJbnZva2UodC5zaWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gYSYmYShlKTtpJiZpKHQpfSxuYW1lOlwiU3RyZWFtLnN3aXRjaERldmljZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJkZXZpY2VJZFwiKTt2YXIgYz1mdW5jdGlvbigpe3JldHVybiB0LmluU3dpdGNoRGV2aWNlPSExLHIoKX0sZD1mdW5jdGlvbihlKXt0LmluU3dpdGNoRGV2aWNlPSExLG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5zdHJlYW1JZCxcIl0gXCIpLGUpLHIoZSl9O2lmKHQuaW5Td2l0Y2hEZXZpY2UpcmV0dXJuIHIoXCJEZXZpY2Ugc3dpdGNoIGlzIGluIHByb2Nlc3MuXCIpO2lmKHQuaW5Td2l0Y2hEZXZpY2U9ITAsIXQubG9jYWwpcmV0dXJuIGQoXCJPbmx5IHRoZSBsb2NhbCBzdHJlYW0gY2FuIHN3aXRjaCB0aGUgZGV2aWNlLlwiKTtpZih0LnNjcmVlbiYmXCJ2aWRlb1wiPT09ZSlyZXR1cm4gZChcIlRoZSBkZXZpY2UgY2Fubm90IGJlIHN3aXRjaGVkIGR1cmluZyBzY3JlZW4tc2hhcmluZy5cIik7aWYodC52aWRlb1NvdXJjZXx8dC5hdWRpb1NvdXJjZSlyZXR1cm4gZChcIlRoZSBkZXZpY2UgY2Fubm90IGJlIHN3aXRjaGVkIHdoZW4gdXNpbmcgdmlkZW9Tb3VyY2Ugb3IgYXVkaW9Tb3VyY2UuXCIpO2lmKHQubG93U3RyZWFtKXJldHVybiBkKFwiVGhlIGRldmljZSBjYW5ub3QgYmUgc3dpdGNoZWQgd2hlbiB1c2luZyBsb3dzdHJlYW0uXCIpO3ZhciB1PSExO2Zvcih2YXIgbCBpbiB0LmF1ZGlvTWl4aW5nLnNvdW5kcyl7aWYodC5hdWRpb01peGluZy5zb3VuZHNbbF0uc3RhdGUhPT10LmF1ZGlvTWl4aW5nLnN0YXRlcy5JRExFKXt1PSEwO2JyZWFrfX1pZih0LmF1ZGlvTWl4aW5nLmF1ZGlvQ29udGV4dEluaXRlZCYmdSlyZXR1cm4gZChcIlRoZSBkZXZpY2UgY2Fubm90IGJlIHN3aXRjaGVkIHdoZW4gdXNpbmcgYXVkaW8gTWl4aW5nLlwiKTthZS5nZXREZXZpY2VCeUlkKG4sZnVuY3Rpb24oKXtpZihcInZpZGVvXCI9PT1lKXQuX3N3aXRjaFZpZGVvRGV2aWNlKG4sYyxkKTtlbHNle2lmKFwiYXVkaW9cIiE9PWUpcmV0dXJuIGQoXCJJbnZhbGlkIHR5cGUuXCIpO3QuX3N3aXRjaEF1ZGlvRGV2aWNlKG4sYyxkKX19LGZ1bmN0aW9uKCl7cmV0dXJuIGQoXCJUaGUgZGV2aWNlIGRvZXMgbm90IGV4aXN0LlwiKX0pfSx0fSxKZT1hKDE5KSxLZT1hKDcpLHplPWEubihLZSksWGU9W1wibGl2ZVwiLFwicnRjXCIsXCJ3ZWJcIixcImludGVyb3BcIixcImgyNjRfaW50ZXJvcFwiLFwid2ViLW9ubHlcIl0sUWU9W1widnA4XCIsXCJoMjY0XCJdLCRlPVtcImFlcy0xMjgteHRzXCIsXCJhZXMtMjU2LXh0c1wiLFwiYWVzLTEyOC1lY2JcIl0sWmU9YSgyMCksZXQ9YS5uKFplKSx0dD1mdW5jdGlvbihlKXtlJiZlLmFwcGx5KHRoaXMsW10uc2xpY2UuY2FsbChhcmd1bWVudHMsMSkpfSxudD1hKDkpLGl0PWZ1bmN0aW9uKGUpe3ZhciB0PWMoZSk7dC5uZWVkUmVjb25uZWN0PSEwLHQuaXNUaW1lb3V0PSExLHQuaXNJbml0PSEwLHQuc2VuZGJ5dGVzPTAsdC5yZWN2Ynl0ZXM9MCx0LnN0YXJ0VGltZT1EYXRlLm5vdygpLHQubGFzdE1zZ1RpbWU9bnVsbCx0LmNsaWVudElkPWUuY2xpZW50SWQsdC5ob3N0SW5kZXg9MCx0LnJlcXVlc3RJRD0wLGUuaG9zdCBpbnN0YW5jZW9mIEFycmF5P3QuaG9zdD1lLmhvc3Q6dC5ob3N0PVtlLmhvc3RdLHQuZ2V0U2VuZEJ5dGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHQuc2VuZGJ5dGVzfSx0LmdldFJlY3ZCeXRlcz1mdW5jdGlvbigpe3JldHVybiB0LnJlY3ZieXRlc30sdC5nZXREdXJhdGlvbj1mdW5jdGlvbigpe3JldHVybiBNYXRoLmNlaWwoKERhdGUubm93KCktdC5zdGFydFRpbWUpLzFlMyl9LHQuZ2V0VVJMPWZ1bmN0aW9uKCl7cmV0dXJuIHQuY29ubmVjdGlvbi51cmx9LHQucmVjb25uZWN0PWZ1bmN0aW9uKCl7dC5pc0luaXQ9ITAsdC5jcmVhdENvbm5lY3Rpb24oKX0sdC5jb25uZWN0TmV4dD1mdW5jdGlvbigpe3QuaXNJbml0PSEwLCsrdC5ob3N0SW5kZXgsby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdIEdhdGV3YXkgbGVuZ3RoOlwiK3QuaG9zdC5sZW5ndGgrXCIgY3VycmVudCBpbmRleDpcIit0Lmhvc3RJbmRleCksdC5ob3N0SW5kZXg+PXQuaG9zdC5sZW5ndGg/dC5kaXNwYXRjaEV2ZW50KHAoe3R5cGU6XCJyZWNvdmVyXCJ9KSk6dC5jcmVhdENvbm5lY3Rpb24oKX0sdC5yZXBsYWNlSG9zdD1mdW5jdGlvbihlKXt0Lmhvc3Q9ZXx8dC5ob3N0LHQuaG9zdEluZGV4PTAsdC5jcmVhdENvbm5lY3Rpb24oKX0sdC5jcmVhdENvbm5lY3Rpb249ZnVuY3Rpb24oKXtpZih0Lm5lZWRSZWNvbm5lY3Q9ITAsby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdIHN0YXJ0IGNvbm5lY3Q6XCIrdC5ob3N0W3QuaG9zdEluZGV4XSksdC5sdHM9KG5ldyBEYXRlKS5nZXRUaW1lKCksdC5jb25uZWN0aW9uPW5ldyBXZWJTb2NrZXQoXCJ3c3M6Ly9cIit0Lmhvc3RbdC5ob3N0SW5kZXhdKSx0LmNvbm5lY3Rpb24uYmluYXJ5VHlwZT1cImFycmF5YnVmZmVyXCIsdC50dXJuQ29uZmlnPXt9LHQuY29ubmVjdGlvbi51cmwpe3ZhciBuPXQuY29ubmVjdGlvbi51cmwubWF0Y2goL3dzc1xcOlxcL1xcLyhbXjpdKyk6KFxcZCspLyk7aWYobil0LnR1cm5Db25maWcudXJsPW5bMV0sT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlRVUk5fRU5BQkxFX1RDUFwiKSYmKHQudHVybkNvbmZpZy50Y3Bwb3J0PXBhcnNlSW50KG5bMl0pKzMwKSxPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiVFVSTl9FTkFCTEVfVURQXCIpJiYodC50dXJuQ29uZmlnLnVkcHBvcnQ9cGFyc2VJbnQoblsyXSkrMzApO2Vsc2V7dmFyIGk9dC5ob3N0W3QuaG9zdEluZGV4XS5zcGxpdChcIjpcIik7dC50dXJuQ29uZmlnLnVybD1pWzBdLE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJUVVJOX0VOQUJMRV9UQ1BcIikmJih0LnR1cm5Db25maWcudGNwcG9ydD1wYXJzZUludChpWzFdKSszMCksT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlRVUk5fRU5BQkxFX1VEUFwiKSYmKHQudHVybkNvbmZpZy51ZHBwb3J0PXBhcnNlSW50KGlbMV0pKzMwKX19dC5jb25uZWN0aW9uLm9ub3Blbj1mdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl0gd2Vic29ja2VjdCBvcGVuZWQ6IFwiK3QuaG9zdFt0Lmhvc3RJbmRleF0pLHQubmVlZFJlY29ubmVjdD0hMCx0LmlzVGltZW91dD0hMSx0LmlzSW5pdD0hMSx0LnNlbmRieXRlcz0wLHQucmVjdmJ5dGVzPTAsdC5zdGFydFRpbWU9RGF0ZS5ub3coKSxPYmplY3QobnQucmVzZXRIVFRQQnlldHNDb3VudCkoKSxjbGVhclRpbWVvdXQodC50aW1lb3V0Q2hlY2spLHQuZGlzcGF0Y2hFdmVudChwKHt0eXBlOlwib25vcGVuXCIsZXZlbnQ6ZSxzb2NrZXQ6dH0pKX0sdC5jb25uZWN0aW9uLm9ubWVzc2FnZT1mdW5jdGlvbihlKXtpZihlLmRhdGEgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcil0LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJvbkJpbmFyeURhdGFcIixkYXRhOmUuZGF0YX0pO2Vsc2V7dC5yZWN2Ynl0ZXMrPU9iamVjdChuZS5sZW5ndGhJblV0ZjhCeXRlcykoZS5kYXRhKTt2YXIgbj1KU09OLnBhcnNlKGUuZGF0YSk7dC5sYXN0TXNnVGltZT1EYXRlLm5vdygpLG4uaGFzT3duUHJvcGVydHkoXCJfaWRcIik/dC5kaXNwYXRjaEV2ZW50KHAoe3R5cGU6bi5faWQsbXNnOm59KSk6bi5oYXNPd25Qcm9wZXJ0eShcIl90eXBlXCIpJiZ0LmRpc3BhdGNoU29ja2V0RXZlbnQocCh7dHlwZTpuLl90eXBlLG1zZzpuLl9tZXNzYWdlfSkpfX0sdC5jb25uZWN0aW9uLm9uY2xvc2U9ZnVuY3Rpb24obil7dC5uZWVkUmVjb25uZWN0P3QuaXNUaW1lb3V0fHx0LmlzSW5pdD8oby5kZWZhdWx0LmRlYnVnKFwiW1wiK3QuY2xpZW50SWQrXCJdIHdlYnNvY2tlY3QgY29ubmVjdCB0aW1lb3V0XCIpLHMuYi5qb2luR2F0ZXdheShlLnNpZCx7bHRzOnQubHRzLHN1Y2M6ITEsZWM6XCJ0aW1lb3V0XCIsYWRkcjp0LmNvbm5lY3Rpb24udXJsfSksdC5jb25uZWN0TmV4dCgpKTp0LmRpc3BhdGNoRXZlbnQocCh7dHlwZTpcImRpc2Nvbm5lY3RcIixldmVudDpufSkpOihvLmRlZmF1bHQuZGVidWcoXCJbXCIrdC5jbGllbnRJZCtcIl0gd2Vic29ja2VjdCBjbG9zZWVkXCIpLHR0KGUub25GYWlsdXJlLG4pLGNsZWFyVGltZW91dCh0LnRpbWVvdXRDaGVjayksdC5kaXNwYXRjaEV2ZW50KHAoe3R5cGU6XCJjbG9zZVwiLGV2ZW50Om59KSksdC5jb25uZWN0aW9uLm9ub3Blbj12b2lkIDAsdC5jb25uZWN0aW9uLm9uY2xvc2U9dm9pZCAwLHQuY29ubmVjdGlvbi5vbmVycm9yPXZvaWQgMCx0LmNvbm5lY3Rpb24ub25tZXNzYWdlPXZvaWQgMCx0LmNvbm5lY3Rpb249dm9pZCAwKX0sdC5jb25uZWN0aW9uLm9uZXJyb3I9ZnVuY3Rpb24oZSl7fSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dC5jb25uZWN0aW9uJiZ0LmNvbm5lY3Rpb24ucmVhZHlTdGF0ZSE9V2ViU29ja2V0Lk9QRU4mJih0LmlzVGltZW91dD0hMCx0LmNvbm5lY3Rpb24uY2xvc2UoKSl9LDVlMyl9LHQuY3JlYXRDb25uZWN0aW9uKCksdC5zZW5kTWVzc2FnZT1mdW5jdGlvbihlLG4pe2lmKHQuY29ubmVjdGlvbiYmdC5jb25uZWN0aW9uLnJlYWR5U3RhdGU9PVdlYlNvY2tldC5PUEVOKXt2YXIgaT1KU09OLnN0cmluZ2lmeShlKTt0LnNlbmRieXRlcys9T2JqZWN0KG5lLmxlbmd0aEluVXRmOEJ5dGVzKShpKSx0LmNvbm5lY3Rpb24uc2VuZChpKX1lbHNlIG4oe2Vycm9yOlwiR2F0ZXdheSBub3QgY29ubmVjdGVkXCJ9KX0sdC5kaXNjb25uZWN0PWZ1bmN0aW9uKCl7dC5uZWVkUmVjb25uZWN0PSEwLHQuY29ubmVjdGlvbi5jbG9zZSgpfSx0LmNsb3NlPWZ1bmN0aW9uKCl7dC5uZWVkUmVjb25uZWN0PSExLHQuY29ubmVjdGlvbi5vbmNsb3NlPXZvaWQgMCx0LmNvbm5lY3Rpb24uY2xvc2UoKX0sdC5zZW5kU2lnbmFsQ29tbWFuZD1mdW5jdGlvbihlLG4pe2UuX2lkPVwiX3JlcXVlc3RfXCIrdC5yZXF1ZXN0SUQsdC5yZXF1ZXN0SUQrPTEsXCJwdWJsaXNoX3N0YXRzXCIhPT1lLl90eXBlJiZcInN1YnNjcmliZV9zdGF0c1wiIT09ZS5fdHlwZSYmXCJwdWJsaXNoX3N0YXRzX2xvd1wiIT09ZS5fdHlwZSYmdC5vbihlLl9pZCxmdW5jdGlvbihpKXtpLm1zZyYmbiYmbihpLm1zZy5fcmVzdWx0LGkubXNnLm1lc3NhZ2UpLGRlbGV0ZSB0LmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbZS5faWRdfSksdC5zZW5kTWVzc2FnZShlLGZ1bmN0aW9uKGUpe2UucmVhc29uPVwiTk9UX0NPTk5FQ1RFRFwiLG4mJm4oZS5yZWFzb24sZSl9KX0sdC5yZXF1ZXN0cz1bXTt2YXIgbj1mdW5jdGlvbihlKXt2YXIgbj10LnJlcXVlc3RzLmZpbmRJbmRleChmdW5jdGlvbih0KXtyZXR1cm4gdC5pZD09PWUudHlwZX0pO2lmKG4+PTApdmFyIGk9dC5yZXF1ZXN0cy5zcGxpY2UobiwxKVswXTtpJiZ0LmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbZS50eXBlXT8oZGVsZXRlIHQuZGlzcGF0Y2hlci5ldmVudExpc3RlbmVyc1tlLnR5cGVdLGUubXNnJiZpLmNhbGxiYWNrJiZpLmNhbGxiYWNrKGUubXNnLl9yZXN1bHQsZS5tc2cuX21lc3NhZ2UpKTpvLmRlZmF1bHQud2FybmluZyhcIkRldGFjaGVkIFJlc3BvbnNlXCIsZS50eXBlLGUubXNnKX07cmV0dXJuIHQuc2VuZFJlcXVlc3Q9ZnVuY3Rpb24oZSxpKXtlPVMoKSh7X2lkOlwiX3JlcXVlc3RfXCIrdC5yZXF1ZXN0SUR9LGUpLHQucmVxdWVzdElEKz0xO3ZhciBhPXtpZDplLl9pZCx0aW1lb3V0Q291bnRlcjowLHN0YWxsZWRBdDpEYXRlLm5vdygpLG1lc3NhZ2U6ZSxjYWxsYmFjazppfTt0LnJlcXVlc3RzLnB1c2goYSksdC5hZGRFdmVudExpc3RlbmVyKGUuX2lkLG4pLHQuc2VuZE1lc3NhZ2UoZSxmdW5jdGlvbihlKXt2YXIgbj10aGlzLGk9dC5yZXF1ZXN0cy5maW5kSW5kZXgoZnVuY3Rpb24oZSl7cmV0dXJuIGUuaWQ9PT1uLmlkfSk7aT49MCYmKG49dC5yZXF1ZXN0cy5zcGxpY2UoaSwxKVswXSksbiYmdC5kaXNwYXRjaGVyLmV2ZW50TGlzdGVuZXJzW2UudHlwZV0/KGRlbGV0ZSB0LmRpc3BhdGNoZXIuZXZlbnRMaXN0ZW5lcnNbZS50eXBlXSxlLnJlYXNvbj1cIk5PVF9DT05ORUNURURcIixuLmNhbGxiYWNrJiZuLmNhbGxiYWNrKGUucmVhc29uLGUpKTpvLmRlZmF1bHQud2FybmluZyhcImhhbmRsZVNlbmRFcnJvclwiLG4pfS5iaW5kKGEpKX0sdC5jaGVja1JlcXVlc3RUaW1lb3V0PWZ1bmN0aW9uKCl7Zm9yKHZhciBlPU1hdGguY2VpbChPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU0lHTkFMX1JFUVVFU1RfVElNRU9VVFwiKS9PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU0lHTkFMX1JFUVVFU1RfV0FUQ0hfSU5URVJWQUxcIikpLG49dC5yZXF1ZXN0cy5sZW5ndGgtMTtuPj0wO24tLSl7dmFyIGk9dC5yZXF1ZXN0c1tuXTtpLnRpbWVvdXRDb3VudGVyPj1lPyh0LnJlcXVlc3RzLnNwbGljZShuLDEpLG8uZGVmYXVsdC5lcnJvcihcIlJlcXVlc3QgVGltZW91dFwiLGkudGltZW91dENvdW50ZXIsaS5tZXNzYWdlKSxpLmNhbGxiYWNrJiZpLmNhbGxiYWNrKFwiVElNRU9VVFwiKSk6aS50aW1lb3V0Q291bnRlcisrfX0sY2xlYXJJbnRlcnZhbCh0LnJlcXVlc3RUaW1lciksdC5yZXF1ZXN0VGltZXI9c2V0SW50ZXJ2YWwodC5jaGVja1JlcXVlc3RUaW1lb3V0LE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJTSUdOQUxfUkVRVUVTVF9XQVRDSF9JTlRFUlZBTFwiKSksdC5zZW5kUmVwb3J0PWZ1bmN0aW9uKGUpe3Quc2VuZE1lc3NhZ2UoZSxmdW5jdGlvbigpe30pfSx0fSxhdD1mdW5jdGlvbihlLHQpe3ZhciBuPXtjb25uZWN0OmZ1bmN0aW9uKCl7dC5ob3N0PWUsbi5zaWduYWw9aXQodCksbi5vbj1uLnNpZ25hbC5vbixuLmRpc3BhdGNoRXZlbnQ9bi5zaWduYWwuZGlzcGF0Y2hFdmVudCxuLnNpZ25hbC5vbihcIm9ub3BlblwiLGZ1bmN0aW9uKGUpe24uc2lnbmFsLm9uRXZlbnQ9ZnVuY3Rpb24oZSl7bi5kaXNwYXRjaEV2ZW50KHAoe3R5cGU6ZS5ldmVudCxtc2c6ZX0pKX0sbi5kaXNwYXRjaEV2ZW50KHAoe3R5cGU6XCJjb25uZWN0XCIsbXNnOmV9KSl9KSxuLnNpZ25hbC5vbihcIm9uRXJyb3JcIixmdW5jdGlvbihlKXt2YXIgdD1lLm1zZztvbkVycm9yKHQuY29kZSxcImVycm9yXCIpfSl9LGdldExhc3RNc2dUaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIG4uc2lnbmFsJiZuLnNpZ25hbC5sYXN0TXNnVGltZX0sZ2V0U2VuZEJ5dGVzOmZ1bmN0aW9uKCl7cmV0dXJuIG4uc2lnbmFsLmdldFNlbmRCeXRlcygpfSxnZXRSZWN2Qnl0ZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbi5zaWduYWwuZ2V0UmVjdkJ5dGVzKCl9LGdldER1cmF0aW9uOmZ1bmN0aW9uKCl7cmV0dXJuIG4uc2lnbmFsLmdldER1cmF0aW9uKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXtuLnNpZ25hbC5kaXNjb25uZWN0KCl9LGNsb3NlOmZ1bmN0aW9uKCl7bi5zaWduYWwuY2xvc2UoKX0sZ2V0VVJMOmZ1bmN0aW9uKCl7cmV0dXJuIG4uc2lnbmFsLmdldFVSTCgpfSxyZWNvbm5lY3Q6ZnVuY3Rpb24oKXtuLnNpZ25hbC5yZWNvbm5lY3QoKX0sY29ubmVjdE5leHQ6ZnVuY3Rpb24oKXtuLnNpZ25hbC5jb25uZWN0TmV4dCgpfSxyZXBsYWNlSG9zdDpmdW5jdGlvbihlKXtuLnNpZ25hbC5yZXBsYWNlSG9zdChlKX0sZW1pdFNpbXBsZU1lc3NhZ2U6ZnVuY3Rpb24oZSx0KXtuLnNpZ25hbC5zZW5kU2lnbmFsQ29tbWFuZChlLHQpfSxlbWl0UmVxdWVzdDpmdW5jdGlvbihlLHQpe24uc2lnbmFsLnNlbmRSZXF1ZXN0KGUsdCl9LGVtaXRSZXBvcnQ6ZnVuY3Rpb24oZSl7bi5zaWduYWwuc2VuZFJlcG9ydChlKX19O3JldHVybiBuLmNvbm5lY3QoKSxufSxydD1mdW5jdGlvbihlLHQpe3ZhciBuPSExLGk9MCxhPXtjb21tYW5kOlwiY29udmVyZ2VBbGxvY2F0ZUVkZ2VcIixzaWQ6ZS5zaWQsYXBwSWQ6ZS5hcHBJZCx0b2tlbjplLnRva2VuLHVpZDplLnVpZCxjbmFtZTplLmNuYW1lLHRzOk1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpLHZlcnNpb246ci5WRVJTSU9OLHNlcTowLHJlcXVlc3RJZDoxfTtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUFJPWFlfQ1NcIikubWFwKGZ1bmN0aW9uKGMpe3ZhciBkPShuZXcgRGF0ZSkuZ2V0VGltZSgpO290KFwiaHR0cHM6Ly9cIitjK1wiL2FwaS92MVwiLGEsZnVuY3Rpb24oYSx1KXtpZihhKXJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gUmVxdWVzdCBwcm94eSBzZXJ2ZXIgZmFpbGVkOiBcIixhKSxpKysscy5iLnJlcXVlc3RQcm94eUFwcENlbnRlcihlLnNpZCx7bHRzOmQsc3VjYzohMSxBUEFkZHI6Yyx3b3JrZXJNYW5hZ2VyTGlzdDpudWxsLGVjOkpTT04uc3RyaW5naWZ5KGEpLHJlc3BvbnNlOkpTT04uc3RyaW5naWZ5KHtlcnI6YSxyZXM6dX0pfSksdm9pZChpPj1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUFJPWFlfQ1NcIikubGVuZ3RoJiZ0JiZ0KFwiR2V0IHByb3h5IHNlcnZlciBmYWlsZWQ6IHJlcXVlc3QgYWxsIGZhaWxlZFwiKSk7aWYoIW4paWYoKHU9SlNPTi5wYXJzZSh1KSkuanNvbl9ib2R5KXt2YXIgbD1KU09OLnBhcnNlKHUuanNvbl9ib2R5KTtpZihvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gQXBwIHJldHVybjpcIixsLnNlcnZlcnMpLDIwMCE9PWwuY29kZSl7YT1cIkdldCBwcm94eSBzZXJ2ZXIgZmFpbGVkOiByZXNwb25zZSBjb2RlIFtcIitsLmNvZGUrXCJdLCByZWFzb24gWyBcIitsLnJlYXNvbitcIl1cIjtvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gXCIrYSkscy5iLnJlcXVlc3RQcm94eUFwcENlbnRlcihlLnNpZCx7bHRzOmQsc3VjYzohMSxBUEFkZHI6Yyx3b3JrZXJNYW5hZ2VyTGlzdDpudWxsLGVjOmEscmVzcG9uc2U6SlNPTi5zdHJpbmdpZnkoe2VycjphLHJlczp1fSl9KX1lbHNle249ITA7dmFyIHA9Y3QobC5zZXJ2ZXJzKTtzLmIucmVxdWVzdFByb3h5QXBwQ2VudGVyKGUuc2lkLHtsdHM6ZCxzdWNjOiEwLEFQQWRkcjpjLHdvcmtlck1hbmFnZXJMaXN0OkpTT04uc3RyaW5naWZ5KHApLGVjOm51bGwscmVzcG9uc2U6SlNPTi5zdHJpbmdpZnkoe3Jlczp1fSl9KSx0JiZ0KG51bGwscCl9fWVsc2Ugby5kZWZhdWx0LmRlYnVnKFwiW1wiK2UuY2xpZW50SWQrXCJdIEdldCBwcm94eSBzZXJ2ZXIgZmFpbGVkOiBubyBqc29uX2JvZHlcIikscy5iLnJlcXVlc3RQcm94eUFwcENlbnRlcihlLnNpZCx7bHRzOmQsc3VjYzohMSxBUEFkZHI6Yyx3b3JrZXJNYW5hZ2VyTGlzdDpudWxsLGVjOlwiR2V0IHByb3h5IHNlcnZlciBmYWlsZWQ6IG5vIGpzb25fYm9keVwiLHJlc3BvbnNlOkpTT04uc3RyaW5naWZ5KHtyZXM6dX0pfSl9KX0pfSxvdD1mdW5jdGlvbihlLHQsbil7dmFyIGk9e3NlcnZpY2VfbmFtZTpcIndlYnJ0Y19wcm94eVwiLGpzb25fYm9keTpKU09OLnN0cmluZ2lmeSh0KX07T2JqZWN0KG50LnBvc3QpKGUsaSxmdW5jdGlvbihlKXtuJiZuKG51bGwsZSl9LGZ1bmN0aW9uKGUpe24mJm4oZSl9LHtcIlgtUGFja2V0LVNlcnZpY2UtVHlwZVwiOjAsXCJYLVBhY2tldC1VUklcIjo2MX0pfSxzdD1mdW5jdGlvbihlLHQsbil7dmFyIGk9ITEsYT0wLHI9e2NvbW1hbmQ6XCJyZXF1ZXN0XCIsZ2F0ZXdheVR5cGU6XCJodHRwXCIsYXBwSWQ6ZS5hcHBJZCxjbmFtZTplLmNuYW1lLHVpZDplLnVpZCtcIlwiLHNka1ZlcnNpb246XCIyLjMuMVwiLHNpZDplLnNpZCxzZXE6MSx0czorbmV3IERhdGUscmVxdWVzdElkOjMsY2xpZW50UmVxdWVzdDp7YXBwSWQ6ZS5hcHBJZCxjbmFtZTplLmNuYW1lLHVpZDplLnVpZCtcIlwiLHNpZDplLnNpZH19O3QubWFwKGZ1bmN0aW9uKGMpe3ZhciBkPShuZXcgRGF0ZSkuZ2V0VGltZSgpOyFmdW5jdGlvbihlLHQsbil7T2JqZWN0KG50LnBvc3QpKGUsdCxmdW5jdGlvbihlKXtuJiZuKG51bGwsZSl9LGZ1bmN0aW9uKGUpe24mJm4oZSl9KX0oXCJodHRwczovL1wiK2MrXCI6NDAwMC92Mi9tYWNoaW5lXCIscixmdW5jdGlvbihyLHUpe2lmKHIpcmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBSZXF1ZXN0IHdvcmtlciBtYW5hZ2VyIGZhaWxlZDogXCIsciksYSsrLHMuYi5yZXF1ZXN0UHJveHlXb3JrZXJNYW5hZ2VyKGUuc2lkLHtsdHM6ZCxzdWNjOiExLHdvcmtlck1hbmFnZXJBZGRyOmMsZWM6SlNPTi5zdHJpbmdpZnkocikscmVzcG9uc2U6SlNPTi5zdHJpbmdpZnkoe3Jlczp1fSl9KSx2b2lkKGE+PXQubGVuZ3RoJiZuJiZuKFwicmVxdWVldCB3b3JrZXIgbWFuYWdlciBzZXJ2ZXIgZmFpbGVkOiByZXF1ZXN0IGZhaWxlZFwiKSk7aWYoIWkpe2lmKCEodT1KU09OLnBhcnNlKHUpKS5zZXJ2ZXJSZXNwb25zZSlyZXR1cm4gbiYmbihcInJlcXVlZXQgd29ya2VyIG1hbmFnZXIgc2VydmVyIGZhaWxlZDogc2VydmVyUmVzcG9uc2UgaXMgdW5kZWZpbmVkXCIpO2k9ITAscy5iLnJlcXVlc3RQcm94eVdvcmtlck1hbmFnZXIoZS5zaWQse2x0czpkLHN1Y2M6ITAsd29ya2VyTWFuYWdlckFkZHI6YyxlYzpKU09OLnN0cmluZ2lmeShyKSxyZXNwb25zZTpKU09OLnN0cmluZ2lmeSh7cmVzOnV9KX0pLG4mJm4obnVsbCx7YWRkcmVzczpjLHNlcnZlclJlc3BvbnNlOnUuc2VydmVyUmVzcG9uc2V9KX19KX0pfSxjdD1mdW5jdGlvbihlKXtpZighZXx8W11pbnN0YW5jZW9mIEFycmF5PT0hMSlyZXR1cm5bXTt2YXIgdD1bXTtyZXR1cm4gZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuO2UuYWRkcmVzcyYmZS50Y3A/KGUuYWRkcmVzcy5tYXRjaCgvXltcXC5cXDpcXGRdKyQvKT9uPVwiXCIuY29uY2F0KGUuYWRkcmVzcy5yZXBsYWNlKC9bXlxcZF0vZyxcIi1cIiksXCIuZWRnZS5hZ29yYS5pb1wiKTooby5kZWZhdWx0LmluZm8oXCJbXCIram9pbkluZm8uY2xpZW50SWQrXCJdIFwiK1wiQ2Fubm90IHJlY29nbml6ZWQgYXMgSVAgYWRkcmVzcyBcIi5jb25jYXQoZS5hZGRyZXNzLFwiLiBVc2VkIEFzIEhvc3QgaW5zdGVhZFwiKSksbj1cIlwiLmNvbmNhdChlLmFkZHJlc3MsXCI6XCIpLmNvbmNhdChlLnRjcCkpLHQucHVzaChuKSk6by5kZWZhdWx0LmVycm9yKFwiW1wiK2pvaW5JbmZvLmNsaWVudElkK1wiXSBJbnZhbGlkIGFkZHJlc3MgZm9ybWF0IFwiLGUpfSksdH0sZHQ9ZnVuY3Rpb24oZSx0KXt2YXIgbj1TKCkoe30sZSksaT1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiQ0RTX0FQXCIpLGE9W10sbz0hMTsoaT1pLm1hcChmdW5jdGlvbihlKXtyZXR1cm4gbi5wcm94eVNlcnZlcj9cImh0dHBzOi8vXCIuY29uY2F0KG4ucHJveHlTZXJ2ZXIsXCIvYXAvP3VybD1cIikuY29uY2F0KGUrXCIvYXBpL3YxXCIpOlwiaHR0cHM6Ly9cIi5jb25jYXQoZSxcIi9hcGkvdjE/YWN0aW9uPWNvbmZpZ1wiKX0pKS5tYXAoZnVuY3Rpb24oZSl7IWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT17ZmxhZzo2NCxjaXBoZXJfbWV0aG9kOjAsdGltZW91dDoxZTMsZmVhdHVyZXM6dH07T2JqZWN0KG50LnBvc3QpKGUsaSxmdW5jdGlvbihlKXt0cnl7dmFyIHQ9SlNPTi5wYXJzZShlKTtuJiZuKG51bGwsdCl9Y2F0Y2goZSl7biYmbihlKX1uJiZuKG51bGwsZSl9LGZ1bmN0aW9uKGUpe24mJm4oZSl9LHtcIlgtUGFja2V0LVNlcnZpY2UtVHlwZVwiOjAsXCJYLVBhY2tldC1VUklcIjo1NH0pfShlLG4sZnVuY3Rpb24oZSxuKXtvfHwoZT8oYS5wdXNoKGUpLGEubGVuZ3RoPj1pLmxlbmd0aCYmdCYmdChcIkFMTF9SRVFVRVNUX0ZBSUxFRFwiKSk6KG89ITAsdCYmdChudWxsLG4pKSl9KX0pfSx1dD17fSxsdD17fSxwdD1mdW5jdGlvbihlLHQsbixpKXt2YXIgYT0obmV3IERhdGUpLmdldFRpbWUoKSxyPXQsYz1cIlwiO3QubXVsdGlJUCYmdC5tdWx0aUlQLmdhdGV3YXlfaXAmJihjPXt2b2NzX2lwOlt0Lm11bHRpSVAudW5pX2xic19pcF0sdm9zX2lwOlt0Lm11bHRpSVAuZ2F0ZXdheV9pcF19KTt2YXIgZD17b3BpZDoxMzMsZmxhZzo0MDk2LHRzOituZXcgRGF0ZSxrZXk6dC50b2tlbixjbmFtZTp0LmNuYW1lLHNpZDp0LnNpZCxkZXRhaWw6ezY6dC5zdHJpbmdVaWR9LHVpZDp0LnVpZHx8MH07YyYmKGQuZGV0YWlsWzVdPUpTT04uc3RyaW5naWZ5KGMpKSxPYmplY3QobnQucG9zdCkoZStcIlwiLmNvbmNhdCgtMT09PWUuaW5kZXhPZihcIj9cIik/XCI/XCI6XCImXCIsXCJhY3Rpb249d3J0Y19nYXRld2F5XCIpLGQsZnVuY3Rpb24oYyl7dHJ5e3ZhciBkPUpTT04ucGFyc2UoYyk7ZC5yZXMmJihkPWQucmVzKTt2YXIgdT1kLmNvZGV9Y2F0Y2goZSl7dmFyIGw9XCJyZXF1ZXN0Q2hvb3NlU2VydmVyIGZhaWxlZCB3aXRoIHVuZXhwZWN0ZWQgYm9keSBcIitjO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIrci5jbGllbnRJZCtcIl1cIixsKSxpKGwpfWlmKHUpe3ZhciBwPUlbZC5jb2RlXXx8dTtyZXR1cm4gcy5iLmpvaW5DaG9vc2VTZXJ2ZXIodC5zaWQse2x0czphLHN1Y2M6ITEsY3NBZGRyOmUsc2VydmVyTGlzdDpudWxsLGVjOnB9KSxpKFwiR2V0IHNlcnZlciBub2RlIGZhaWxlZCBbXCIrcCtcIl1cIixlLHApfXZhciBmPVtdLG09W1wiLmFnb3JhLmlvXCIsXCIuYWdvcmFpby5jblwiXSxnPTA7aWYoZS5pbmRleE9mKG1bMV0pPi0xJiYoZz0xKSxkLmFkZHJlc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0O2UuaXAmJmUucG9ydD8oZS5pcC5tYXRjaCgvXltcXC5cXDpcXGRdKyQvKT90PVwiXCIuY29uY2F0KGUuaXAucmVwbGFjZSgvW15cXGRdL2csXCItXCIpLFwiLmVkZ2VcIikuY29uY2F0KG1bZysrJW0ubGVuZ3RoXSxcIjpcIikuY29uY2F0KGUucG9ydCk6KG8uZGVmYXVsdC5pbmZvKFwiW1wiK3IuY2xpZW50SWQrXCJdIFwiK1wiQ2Fubm90IHJlY29nbml6ZWQgYXMgSVAgYWRkcmVzcyBcIi5jb25jYXQoZS5pcCxcIi4gVXNlZCBBcyBIb3N0IGluc3RlYWRcIikpLHQ9XCJcIi5jb25jYXQoZS5pcCxcIjpcIikuY29uY2F0KGUucG9ydCkpLGYucHVzaCh0KSk6by5kZWZhdWx0LmVycm9yKFwiW1wiK3IuY2xpZW50SWQrXCJdIEludmFsaWQgYWRkcmVzcyBmb3JtYXQgXCIsZSl9KSwhZi5sZW5ndGgpe28uZGVmYXVsdC5lcnJvcihcIltcIityLmNsaWVudElkK1wiXSBFbXB0eSBBZGRyZXNzIHJlc3BvbnNlXCIsZCk7cD1cIkVNUFRZX0FERFJFU1NfUkVTUE9OU0VcIjtyZXR1cm4gcy5iLmpvaW5DaG9vc2VTZXJ2ZXIodC5zaWQse2x0czphLHN1Y2M6ITEsY3NBZGRyOmUsc2VydmVyTGlzdDpudWxsLGVjOnB9KSxpKFwiR2V0IHNlcnZlciBub2RlIGZhaWxlZCBbXCIrcCtcIl1cIixlLHApfXZhciB2PXtnYXRld2F5X2FkZHI6Zix1aWQ6ZC51aWQsY2lkOmQuY2lkLHZpZDpkLmRldGFpbCYmZC5kZXRhaWxbOF0scmVzOmQsdW5pX2xic19pcDpkLmRldGFpbH07cmV0dXJuIG4odixlKX0sZnVuY3Rpb24oZSxuKXtcInRpbWVvdXRcIj09PWUudHlwZT8ocy5iLmpvaW5DaG9vc2VTZXJ2ZXIodC5zaWQse2x0czphLHN1Y2M6ITEsY3NBZGRyOm4sc2VydmVyTGlzdDpudWxsLGVjOlwidGltZW91dFwifSksaShcIkNvbm5lY3QgY2hvb3NlIHNlcnZlciB0aW1lb3V0XCIsbikpOnMuYi5qb2luQ2hvb3NlU2VydmVyKHQuc2lkLHtsdHM6YSxzdWNjOiExLGNzQWRkcjpuLHNlcnZlckxpc3Q6bnVsbCxlYzpcInNlcnZlcl93cm9uZ1wifSl9LHtcIlgtUGFja2V0LVNlcnZpY2UtVHlwZVwiOjAsXCJYLVBhY2tldC1VUklcIjo2OX0pfSxmdD1mdW5jdGlvbihlLHQsbil7dmFyIGk9ITEsYT1udWxsLGM9MSxkPTEsdT1udWxsLGw9ZS5jbGllbnRJZCxwPWZ1bmN0aW9uIHQoZCxwKXtpZighaSl7dmFyIGY9ITEsZz0hMSx2PVtdLGg9bS5nZXRCcm93c2VySW5mbygpfHx7fTtkdCh7ZGV2aWNlOmgubmFtZSxzeXN0ZW06aC5vcyx2ZW5kb3I6ZS5hcHBJZCx2ZXJzaW9uOnIuVkVSU0lPTixjbmFtZTplLmNuYW1lLHNpZDplLnNpZCxzZXNzaW9uX2lkOk9iamVjdChzLmEpKCksZGV0YWlsOlwiXCIscHJveHlTZXJ2ZXI6ZH0sZnVuY3Rpb24odCxuKXtnPSEwO3RyeXt2YXIgaT1PYmplY3Qua2V5cyhuLnRlc3RfdGFncylbMF0sYT1KU09OLnBhcnNlKG4udGVzdF90YWdzW2ldKTt1PWFbMV19Y2F0Y2goZSl7dT1udWxsfXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zaWQse25hbWU6XCJfY29uZmlnLWRpc3RyaWJ1dGUtcmVxdWVzdFwiLG9wdGlvbnM6e2Vycjp0LHJlczpufX0pKCksbHRbbF0hPT1SdC5ESVNDT05ORUNURUQmJmx0W2xdIT09UnQuRElTQ09OTkVDVElORz9mJiZwJiZwKHYsdSk6by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBSZXF1ZXN0IGNvbmZpZyBzdWNjZXNzIHdoZW4gY29ubmVjdGlvbiBzdGF0ZSBpcyBcIikuY29uY2F0KGx0W2xdKSl9KSxmdW5jdGlvbihlLHQsbil7Zm9yKHZhciBpPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGE9ITEsYz0hMCxkPWZ1bmN0aW9uKG4scil7aWYoYSlzLmIuam9pbkNob29zZVNlcnZlcihlLnNpZCx7bHRzOmksc3VjYzohMCxjc0FkZHI6cixzZXJ2ZXJMaXN0Om4uZ2F0ZXdheV9hZGRyLGNpZDpuLmNpZCtcIlwiLHVpZDpuLnVpZCtcIlwiLGVjOm51bGx9LCExKTtlbHNle2lmKGNsZWFyVGltZW91dChnKSxhPSEwLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBHZXQgZ2F0ZXdheSBhZGRyZXNzOlwiLG4uZ2F0ZXdheV9hZGRyKSxlLnByb3h5U2VydmVyKXtmb3IodmFyIGM9bi5nYXRld2F5X2FkZHIsZD0wO2Q8Yy5sZW5ndGg7ZCsrKXt2YXIgdT1jW2RdLnNwbGl0KFwiOlwiKTtuLmdhdGV3YXlfYWRkcltkXT1lLnByb3h5U2VydmVyK1wiL3dzLz9oPVwiK3VbMF0rXCImcD1cIit1WzFdfW8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBHZXQgZ2F0ZXdheSBhZGRyZXNzOlwiLG4uZ2F0ZXdheV9hZGRyKX10KG4pLHMuYi5qb2luQ2hvb3NlU2VydmVyKGUuc2lkLHtsdHM6aSxzdWNjOiEwLGNzQWRkcjpyLHNlcnZlckxpc3Q6bi5nYXRld2F5X2FkZHIsY2lkOm4uY2lkK1wiXCIsdWlkOm4udWlkK1wiXCIsZWM6bnVsbH0sITApfX0sdT1mdW5jdGlvbih0LGksYSl7YyYmKG8uZGVmYXVsdC5lcnJvcihcIltcIitlLmNsaWVudElkK1wiXVwiLHQsaSxhKSxhJiYtMT09PWIuaW5kZXhPZihhKSYmKGM9ITEsbihhKSkpfSxsPU9iamVjdChyLmdldFBhcmFtZXRlcikoXCJXRUJDU19ET01BSU5cIikscD0wO3A8bC5sZW5ndGg7KytwKXt2YXIgZjtpZihcInN0cmluZ1wiPT10eXBlb2YgbFtwXSl7dmFyIG09bFtwXTtmPWUucHJveHlTZXJ2ZXI/XCJodHRwczovL1wiLmNvbmNhdChlLnByb3h5U2VydmVyLFwiL2FwLz91cmw9XCIpLmNvbmNhdChtK1wiL2FwaS92MVwiKTpcImh0dHBzOi8vXCIuY29uY2F0KG0sXCIvYXBpL3YxXCIpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBcIitcIkNvbm5lY3QgdG8gY2hvb3NlX3NlcnZlcjogXCIuY29uY2F0KGYpKSxwdChmLGUsZCx1KX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIitlLmNsaWVudElkK1wiXSBJbnZhbGlkIEhvc3RcIixsW3BdKX12YXIgZz1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7aWYoIWEpZm9yKHZhciB0PU9iamVjdChyLmdldFBhcmFtZXRlcikoXCJXRUJDU19ET01BSU5fQkFDS1VQX0xJU1RcIiksbj0wO248dC5sZW5ndGg7KytuKWlmKFwic3RyaW5nXCI9PXR5cGVvZiB0W25dKXt2YXIgaT10W25dO2Y9ZS5wcm94eVNlcnZlcj9cImh0dHBzOi8vXCIuY29uY2F0KGUucHJveHlTZXJ2ZXIsXCIvYXAvP3VybD1cIikuY29uY2F0KGkrXCIvYXBpL3YxXCIpOlwiaHR0cHM6Ly9cIi5jb25jYXQoaSxcIi9hcGkvdjFcIiksby5kZWZhdWx0LmRlYnVnKFwiW1wiK2UuY2xpZW50SWQrXCJdIFwiK1wiQ29ubmVjdCB0byBiYWNrdXBfY2hvb3NlX3NlcnZlcjogXCIuY29uY2F0KGYpKSxwdChmLGUsZCx1KX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIitlLmNsaWVudElkK1wiXSBJbnZhbGlkIEhvc3RcIix0W25dKX0sMWUzKTtzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7IWEmJmMmJm4oKX0sT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIldFQkNTX0JBQ0tVUF9DT05ORUNUX1RJTUVPVVRcIikpfShlLGZ1bmN0aW9uKHQpe2k9ITAsZj0hMCx2PXQsY2xlYXJUaW1lb3V0KGEpLGx0W2xdIT09UnQuRElTQ09OTkVDVEVEJiZsdFtsXSE9PVJ0LkRJU0NPTk5FQ1RJTkc/ZyYmcCYmcCh2LHUpOm8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gUmVxdWVzdCBnYXRld2F5IGxpc3Qgc3VjY2VzcyB3aGVuIGNvbm5lY3Rpb24gc3RhdGUgaXMgXCIpLmNvbmNhdChsdFtsXSkpfSxmdW5jdGlvbihpKXtyZXR1cm4gaT8oby5kZWZhdWx0LmluZm8oXCJbXCIrZS5jbGllbnRJZCtcIl0gSm9pbiBmYWlsZWQ6IFwiK2kpLHZvaWQobiYmbihpKSkpOmx0W2xdPT09UnQuRElTQ09OTkVDVEVEfHxsdFtsXT09PVJ0LkRJU0NPTk5FQ1RJTkc/KG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gUmVxdWVzdCBnYXRld2F5IGxpc3QgZmFsaWVkIHdoZW4gY29ubmVjdGlvbiBzdGF0ZSBpcyBcIikuY29uY2F0KGx0W2xdKSksdm9pZChuJiZuKFwiT1BFUkFUSU9OX0FCT1JUXCIpKSk6KG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBSZXF1ZXN0IGdhdGV3YXkgbGlzdCB3aWxsIGJlIHJlc3RhcnQgaW4gXCIrYytcInNcIiksYT1zZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dChkLHApfSwxZTMqYyksdXRbbF09YSx2b2lkKGM9Yz49MzYwMD8zNjAwOjIqYykpfSl9fTtlLnVzZVByb3h5U2VydmVyP2Z1bmN0aW9uIG4oKXshZnVuY3Rpb24oZSx0KXtydChlLGZ1bmN0aW9uKG4saSl7aWYobilyZXR1cm4gdCYmdChuKTtvLmRlZmF1bHQuZGVidWcoXCJbXCIrZS5jbGllbnRJZCtcIl0gZ2V0UHJveHlTZXJ2ZXJMaXN0OiBcIixpKSxzdChlLGksdCl9KX0oZSxmdW5jdGlvbihpLHIpe2lmKGkpcmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXVwiLGkpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIitlLmNsaWVudElkK1wiXSBSZXF1ZXN0IHByb3h5IHdpbGwgYmUgcmVzdGFydCBpbiBcIitkK1wic1wiKSxhPXNldFRpbWVvdXQoZnVuY3Rpb24oKXtuKCl9LDFlMypkKSx1dFtsXT1hLHZvaWQoZD1kPj0zNjAwPzM2MDA6MipkKTtjbGVhclRpbWVvdXQoYSk7dmFyIGM9ci5hZGRyZXNzO2UucHJveHlTZXJ2ZXI9YyxlLnR1cm5TZXJ2ZXI9e21vZGU6XCJtYW51YWxcIix1cmw6ci5hZGRyZXNzLHRjcHBvcnQ6ci5zZXJ2ZXJSZXNwb25zZS50Y3Bwb3J0fHxcIjM0MzNcIix1ZHBwb3J0OnIuc2VydmVyUmVzcG9uc2UudWRwcG9ydHx8XCIzNDc4XCIsdXNlcm5hbWU6ci5zZXJ2ZXJSZXNwb25zZS51c2VybmFtZXx8XCJ0ZXN0XCIsY3JlZGVudGlhbDpyLnNlcnZlclJlc3BvbnNlLnBhc3N3b3JkfHxcIjExMTExMVwiLGZvcmNldHVybjohMH0sZS50dXJuU2VydmVyLnRjcHBvcnQrPVwiXCIsZS50dXJuU2VydmVyLnVkcHBvcnQrPVwiXCIscy5iLnNldFByb3h5U2VydmVyKGMpLG8uZGVmYXVsdC5zZXRQcm94eVNlcnZlcihjKSxwKGMsdCl9KX0oKTpwKG51bGwsdCl9LG10PWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBhPURhdGUubm93KCk7aT1pfHx0LnN0cmluZ1VpZDt2YXIgcj17c2lkOnQuc2lkLG9waWQ6MTAsYXBwaWQ6dC5hcHBJZCxzdHJpbmdfdWlkOml9O3JldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihjLGQpe09iamVjdChudC5wb3N0KShlK1wiXCIuY29uY2F0KC0xPT09ZS5pbmRleE9mKFwiP1wiKT9cIj9cIjpcIiZcIixcImFjdGlvbj1zdHJpbmd1aWRcIikscixmdW5jdGlvbih1KXt0cnl7dmFyIGw9SlNPTi5wYXJzZSh1KSxwPWwuY29kZX1jYXRjaChjKXt2YXIgZj1cInJlcXVlc3RVc2VyQWNjb3VudCBmYWlsZWQgd2l0aCB1bmV4cGVjdGVkIGJvZHkgXCIrdTtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiK3QuY2xpZW50SWQrXCJdXCIsZiksZCh7cmV0cnlhYmxlOiEwLGluZm86Zix1cmw6ZX0pLG4mJm4uZGlzcGF0Y2hFdmVudCh7dHlwZTpcImVycm9yXCIscmVhc29uOlwiVVNFUl9BQ0NPVU5UX0JPRFlfTk9UX0pTT05cIn0pLHZvaWQgcy5iLnJlcVVzZXJBY2NvdW50KHIuc2lkLHtsdHM6YSxzdWNjZXNzOiExLHNlcnZlckFkZHJlc3M6ZSxzdHJpbmdVaWQ6aSx1aWQ6bnVsbCxleHRlbmQ6dSxlcnJvckNvZGU6XCJVU0VSX0FDQ09VTlRfQk9EWV9OT1RfSlNPTlwifSl9aWYocCl7dmFyIG09VFtsLmNvZGUlMWU0XXx8XCJSRVFfQUNDT1VOVF9FUlJfXCIuY29uY2F0KHApO3JldHVybiBuJiZuLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJlcnJvclwiLHJlYXNvbjptfSkscy5iLnJlcVVzZXJBY2NvdW50KHIuc2lkLHtsdHM6YSxzdWNjZXNzOiExLHNlcnZlckFkZHJlc3M6ZSxzdHJpbmdVaWQ6aSx1aWQ6bnVsbCxlcnJvckNvZGU6bSxleHRlbmQ6cn0pLGQoe3JldHJ5YWJsZTohMSxpbmZvOmY9XCJHZXQgU3RyaW5nIFVpZCBGYWlsZWQgW1wiK20rXCJdXCIsdXJsOmUsZXJyb3I6bX0pfXZhciBnPWwudWlkO2lmKCEoZz4wJiZnPE1hdGgucG93KDIsMzIpKSl7by5kZWZhdWx0LmVycm9yKFwiW1wiK3QuY2xpZW50SWQrXCJdIFwiK1wiSW52YWxpZCBVaW50IFVpZCBcIi5jb25jYXQoaSxcIiA9PiBcIikuY29uY2F0KGcpLGwpO209XCJJTlZBTElEX1VJTlRfVUlEX1wiLmNvbmNhdChnKTtyZXR1cm4gbiYmbi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiZXJyb3JcIixyZWFzb246bX0pLHMuYi5yZXFVc2VyQWNjb3VudChyLnNpZCx7bHRzOmEsc3VjY2VzczohMSxzZXJ2ZXJBZGRyZXNzOmUsc3RyaW5nVWlkOmksdWlkOm51bGwsZXJyb3JDb2RlOm0sZXh0ZW5kOnJ9KSxkKHtyZXRyeWFibGU6ITAsZXJyb3I6bSxpbmZvOlwiR2V0IFN0cmluZyBVaWQgZmFpbGVkIFtcIittK1wiXVwiLHVybDplfSl9Yyh7dWlkOmcsdXJsOmV9KSxzLmIucmVxVXNlckFjY291bnQoci5zaWQse2x0czphLHN1Y2Nlc3M6ITAsc2VydmVyQWRkcmVzczplLHN0cmluZ1VpZDppLHVpZDpnLGVycm9yQ29kZTpudWxsLGV4dGVuZDpyfSl9LGZ1bmN0aW9uKGUsdCl7aWYoXCJ0aW1lb3V0XCI9PT1lLnR5cGUpe3ZhciBvPVwiVVNFUl9BQ0NPVU5UX1RJTUVPVVRcIjtuJiZuLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJlcnJvclwiLHJlYXNvbjpvfSkscy5iLnJlcVVzZXJBY2NvdW50KHIuc2lkLHtsdHM6YSxzdWNjZXNzOiExLHNlcnZlckFkZHJlc3M6dCxzdHJpbmdVaWQ6aSx1aWQ6bnVsbCxlcnJvckNvZGU6byxleHRlbmQ6cn0pLGQoe3JldHJ5YWJsZTohMCxpbmZvOm8sdXJsOnR9KX1lbHNle3ZhciBjPVwiVVNFUl9BQ0NPVU5UX1NFUlZFUl9XUk9OR19cIi5jb25jYXQoZS50eXBlKTtuJiZuLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJlcnJvclwiLHJlYXNvbjpjfSkscy5iLnJlcVVzZXJBY2NvdW50KHIuc2lkLHtsdHM6YSxzdWNjZXNzOiExLHNlcnZlckFkZHJlc3M6dCxzdHJpbmdVaWQ6aSx1aWQ6bnVsbCxlcnJvckNvZGU6YyxleHRlbmQ6cn0pLGQoe3JldHJ5YWJsZTohMCxpbmZvOmMsdXJsOnR9KX19LHtcIlgtUGFja2V0LVNlcnZpY2UtVHlwZVwiOjAsXCJYLVBhY2tldC1VUklcIjo3Mn0pfSl9LGd0PWZ1bmN0aW9uKGUsdCxuKXtEYXRlLm5vdygpO3ZhciBhLHM9T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkFDQ09VTlRfUkVHSVNURVJcIiksYz0hMSxkPU9iamVjdChyLmdldFBhcmFtZXRlcikoXCJBQ0NPVU5UX1JFR0lTVEVSX1JFVFJZX1RJTUVPVVRcIiksdT1udWxsLGw9bnVsbCxwPW5ldyBQcm9taXNlKGZ1bmN0aW9uKCl7dmFyIHA9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gcChmLG0pe3ZhciBnLHYsaDtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKHApe2Zvcig7Oylzd2l0Y2gocC5wcmV2PXAubmV4dCl7Y2FzZSAwOnU9ZixsPW0sYT0wO2Nhc2UgMzppZighKGE8T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkFDQ09VTlRfUkVHSVNURVJfUkVUUllfQ09VTlRfTUFYXCIpKSl7cC5uZXh0PTMzO2JyZWFrfWlmKCFjKXtwLm5leHQ9NjticmVha31yZXR1cm4gcC5hYnJ1cHQoXCJyZXR1cm5cIik7Y2FzZSA2OnJldHVybiBnPXNbYSVzLmxlbmd0aF0sdj1lLnByb3h5U2VydmVyP1wiaHR0cHM6Ly9cIi5jb25jYXQoZS5wcm94eVNlcnZlcixcIi9hcC8/dXJsPVwiKS5jb25jYXQoc1tpXStcIi9hcGkvdjFcIik6XCJodHRwczovL1wiLmNvbmNhdChnLFwiL2FwaS92MVwiKSxwLnByZXY9OCxwLmRlbGVnYXRlWWllbGQoY2UuYS5tYXJrKGZ1bmN0aW9uIGkoKXt2YXIgYTtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKGkpe2Zvcig7Oylzd2l0Y2goaS5wcmV2PWkubmV4dCl7Y2FzZSAwOnJldHVybiBpLm5leHQ9MixtdCh2LGUsdCxuKTtjYXNlIDI6aWYoYT1pLnNlbnQsIWMpe2kubmV4dD01O2JyZWFrfXJldHVybiBpLmFicnVwdChcInJldHVyblwiLHt2OnZvaWQgMH0pO2Nhc2UgNTpjPSEwLHNldFRpbWVvdXQoZnVuY3Rpb24oKXtvLmRlZmF1bHQuZGVidWcoXCJHZXQgVXNlckFjY291bnQgU3VjY2Vzc2Z1bGx5XCIsYSksdShhKX0sMCk7Y2FzZSA3OmNhc2VcImVuZFwiOnJldHVybiBpLnN0b3AoKX19LGksdGhpcyl9KSgpLFwidDBcIiwxMCk7Y2FzZSAxMDppZihoPXAudDAsXCJvYmplY3RcIiE9PUhlKCkoaCkpe3AubmV4dD0xMzticmVha31yZXR1cm4gcC5hYnJ1cHQoXCJyZXR1cm5cIixoLnYpO2Nhc2UgMTM6cC5uZXh0PTMwO2JyZWFrO2Nhc2UgMTU6aWYocC5wcmV2PTE1LHAudDE9cC5jYXRjaCg4KSwhYyl7cC5uZXh0PTE5O2JyZWFrfXJldHVybiBwLmFicnVwdChcInJldHVyblwiKTtjYXNlIDE5OmlmKCFwLnQxLnJldHJ5YWJsZSl7cC5uZXh0PTI3O2JyZWFrfXJldHVybihkPU1hdGguY2VpbChkKk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJBQ0NPVU5UX1JFR0lTVEVSX1JFVFJZX1JBVElPXCIpKSk+T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkFDQ09VTlRfUkVHSVNURVJfUkVUUllfVElNRU9VVF9NQVhcIikmJihkPU9iamVjdChyLmdldFBhcmFtZXRlcikoXCJBQ0NPVU5UX1JFR0lTVEVSX1JFVFJZX1RJTUVPVVRfTUFYXCIpKSxvLmRlZmF1bHQuZXJyb3IoXCJcIi5jb25jYXQocC50MS5pbmZvLFwiIFwiKS5jb25jYXQocC50MS51cmwsXCIgV2lsbCBGZXRjaCBVc2VyIEFjY291bnQgaW4gXCIpLmNvbmNhdChkLzFlMyxcIiBzZWNvbmRzXCIpKSxwLm5leHQ9MjUsbmV3IFByb21pc2UoZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLGQpfSk7Y2FzZSAyNTpwLm5leHQ9MzA7YnJlYWs7Y2FzZSAyNzpvLmRlZmF1bHQuZXJyb3IoXCJHZXQgVXNlckFjY291bnQgRXJyb3I6IFwiLmNvbmNhdChwLnQxLmluZm8sXCIgXCIpLmNvbmNhdChwLnQxLnVybCkscC50MS5lcnJvciksYz0hMCxsKHAudDEpO2Nhc2UgMzA6YSsrLHAubmV4dD0zO2JyZWFrO2Nhc2UgMzM6Y2FzZVwiZW5kXCI6cmV0dXJuIHAuc3RvcCgpfX0scCx0aGlzLFtbOCwxNV1dKX0pKTtyZXR1cm4gZnVuY3Rpb24oZSx0KXtyZXR1cm4gcC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpKTtyZXR1cm4gcC5jYW5jZWw9ZnVuY3Rpb24oKXtjfHwoYz0hMCxsKHtpbmZvOlwiUmVxdWVzdCBDYW5jZWxsZWRcIixyZXRyeWFibGU6ITF9KSl9LHAuaXNGaW5pc2hlZD1mdW5jdGlvbigpe3JldHVybiBjfSxwfSx2dD17RVJSX05PX1ZPQ1NfQVZBSUxBQkxFOlwidHJ5TmV4dFwiLEVSUl9OT19WT1NfQVZBSUxBQkxFOlwidHJ5TmV4dFwiLEVSUl9KT0lOX0NIQU5ORUxfVElNRU9VVDpcInRyeU5leHRcIixXQVJOX1JFUEVBVF9KT0lOOlwicXVpdFwiLEVSUl9KT0lOX0JZX01VTFRJX0lQOlwicmVjb3ZlclwiLFdBUk5fTE9PS1VQX0NIQU5ORUxfVElNRU9VVDpcInRyeU5leHRcIixXQVJOX09QRU5fQ0hBTk5FTF9USU1FT1VUOlwidHJ5TmV4dFwiLEVSUl9WT01fU0VSVklDRV9VTkFWQUlMQUJMRTpcInRyeU5leHRcIixFUlJfVE9PX01BTllfVVNFUlM6XCJ0cnlOZXh0XCIsRVJSX01BU1RFUl9WT0NTX1VOQVZBSUxBQkxFOlwidHJ5TmV4dFwiLEVSUl9JTlRFUk5BTF9FUlJPUjpcInRyeU5leHRcIixLX1NFUlZJQ0VfTk9UX1JFQURZOlwicmVjb3ZlclwiLG5vdGlmaWNhdGlvbl90ZXN0X3JlY292ZXI6XCJyZWNvdmVyXCIsbm90aWZpY2F0aW9uX3Rlc3RfdHJ5TmV4dDpcInRyeU5leHRcIixub3RpZmljYXRpb25fdGVzdF9yZXRyeTpcInJldHJ5XCJ9LGh0PXtnb29nQWN0dWFsRW5jQml0cmF0ZTpcIkFfYWViXCIsZ29vZ0F2YWlsYWJsZVNlbmRCYW5kd2lkdGg6XCJBX2FzYlwiLGdvb2dSZXRyYW5zbWl0Qml0cmF0ZTpcIkFfcmJcIixnb29nQXZhaWxhYmxlUmVjZWl2ZUJhbmR3aWR0aDpcIkFfYXJiXCIsZ29vZ1RhcmdldEVuY0JpdHJhdGU6XCJBX3RlYlwiLGdvb2dCdWNrZXREZWxheTpcIkFfYmRcIixnb29nVHJhbnNtaXRCaXRyYXRlOlwiQV90YlwiLGdvb2dDb2RlY05hbWU6XCJBX2NuXCIsYnl0ZXNTZW50OlwiYnl0ZXNTZW50XCIscGFja2V0c0xvc3Q6XCJwYWNrZXRzTG9zdFwiLHBhY2tldHNTZW50OlwicGFja2V0c1NlbnRcIixnb29nQWRhcHRhdGlvbkNoYW5nZXM6XCJBX2FjXCIsZ29vZ0F2Z0VuY29kZU1zOlwiQV9hZW1cIixnb29nRW5jb2RlVXNhZ2VQZXJjZW50OlwiQV9ldXBcIixnb29nRmlyc1JlY2VpdmVkOlwiQV9mclwiLGdvb2dGcmFtZUhlaWdodElucHV0OlwiQV9maGlcIixnb29nRnJhbWVIZWlnaHRTZW50OlwiQV9maHNcIixnb29nRnJhbWVSYXRlSW5wdXQ6XCJBX2ZyaVwiLGdvb2dGcmFtZVJhdGVTZW50OlwiQV9mcnNcIixnb29nRnJhbWVXaWR0aElucHV0OlwiQV9md2lcIixnb29nRnJhbWVXaWR0aFNlbnQ6XCJBX2Z3c1wiLGdvb2dOYWNrc1JlY2VpdmVkOlwiQV9uclwiLGdvb2dQbGlzUmVjZWl2ZWQ6XCJBX3ByXCIsZ29vZ1J0dDpcIkFfcnR0XCIsYWVjRGl2ZXJnZW50RmlsdGVyRnJhY3Rpb246XCJBX2FkZmZcIixhdWRpb0lucHV0TGV2ZWw6XCJBX2FpbFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zczpcIkFfZWNybFwiLGdvb2dFY2hvQ2FuY2VsbGF0aW9uUmV0dXJuTG9zc0VuaGFuY2VtZW50OlwiQV9lY3JsZVwiLGdvb2dSZXNpZHVhbEVjaG9MaWtlbGlob29kOlwiQV9yZWxcIixnb29nUmVzaWR1YWxFY2hvTGlrZWxpaG9vZFJlY2VudE1heDpcIkFfcmVscm1cIixnb29nVGFyZ2V0RGVsYXlNczpcIkFfdGRtXCIsYnl0ZXNSZWNlaXZlZDpcImJ5dGVzUmVjZWl2ZWRcIixwYWNrZXRzUmVjZWl2ZWQ6XCJwYWNrZXRzUmVjZWl2ZWRcIixnb29nRGVjb2RlTXM6XCJBX2RtXCIsZ29vZ01heERlY29kZU1zOlwiQV9tZG1cIixnb29nUmVuZGVyRGVsYXlNczpcIkFfcmRtXCIsZ29vZ0ZyYW1lV2lkdGhSZWNlaXZlZDpcIkFfZndyXCIsZ29vZ0ZyYW1lSGVpZ2h0UmVjZWl2ZWQ6XCJBX2ZoclwiLGdvb2dGcmFtZVJhdGVSZWNlaXZlZDpcIkFfZnJyXCIsZ29vZ0ZyYW1lUmF0ZURlY29kZWQ6XCJBX2ZyZFwiLGdvb2dGcmFtZVJhdGVPdXRwdXQ6XCJBX2Zyb1wiLGdvb2dKaXR0ZXJCdWZmZXJNczpcIkFfamJtXCIsZ29vZ0N1cnJlbnREZWxheU1zOlwiQV9jZG1cIixnb29nTWluUGxheW91dERlbGF5TXM6XCJBX21wZG1cIixnb29nTmFja3NTZW50OlwiQV9uc1wiLGdvb2dQbGlzU2VudDpcIkFfcHNcIixnb29nRmlyc1NlbnQ6XCJBX2ZzXCIsYXVkaW9PdXRwdXRMZXZlbDpcIkFfYW9sXCIsZ29vZ0FjY2VsZXJhdGVSYXRlOlwiQV9hclwiLGdvb2dEZWNvZGluZ0NORzpcIkFfZGNuZ1wiLGdvb2dEZWNvZGluZ0NUTjpcIkFfZGN0blwiLGdvb2dEZWNvZGluZ0NUU0c6XCJBX2RjdHNnXCIsZ29vZ0RlY29kaW5nTm9ybWFsOlwiQV9kblwiLGdvb2dEZWNvZGluZ1BMQzpcIkFfZHBsY1wiLGdvb2dEZWNvZGluZ1BMQ0NORzpcIkFfZHBsY2NuZ1wiLGdvb2dFeHBhbmRSYXRlOlwiQV9lclwiLGdvb2dKaXR0ZXJSZWNlaXZlZDpcIkFfanJcIixnb29nUHJlZW1wdGl2ZUV4cGFuZFJhdGU6XCJBX3BlclwiLGdvb2dQcmVmZXJyZWRKaXR0ZXJCdWZmZXJNczpcIkFfcGpibVwiLGdvb2dTZWNvbmRhcnlEZWNvZGVkUmF0ZTpcIkFfc2RyXCIsZ29vZ1NwZWVjaEV4cGFuZFJhdGU6XCJBX3NlclwiLHVwbGlua19mcmFjdGlvbl9sb3N0OlwiQl91ZmxcIix1cGxpbmtfY3VtdWxhdGl2ZV9sb3N0OlwiQl91Y2xcIix1cGxpbmtfYXZhaWxhYmxlX2JhbmR3aWR0aDpcIkJfdWFiXCIscGVyaW9kX2ZpcjpcIkJfZmlyXCIsYWNjZXNzX2RlbGF5OlwiQl9hY2RcIix1cGxpbmtfbmV0d29ya19xdWFsaXR5OlwiQl91bnFcIixkb3dubGlua19uZXR3b3JrX3F1YWxpdHk6XCJCX2RucVwiLHB1Yl9hdWRpb19sb3N0X3JhdGlvXzQwMG1zOlwiQl9wYWxyNFwiLHB1Yl92aWRlb19sb3N0X3JhdGlvXzQwMG1zOlwiQl9wdmxyNFwiLGUyZV9kZWxheTpcIkJfZWRcIixhdWRpb19kZWxheTpcIkJfYWRcIix2aWRlb19kZWxheTpcIkJfdmRcIixzdHJlYW1fdHlwZTpcIkJfc3RcIixlMmVfYXVkaW9fbG9zdF9yYXRpb180MDBtczpcIkJfZWFscjRcIixlMmVfdmlkZW9fbG9zdF9yYXRpb180MDBtczpcIkJfZXZscjRcIixkb3dubGlua19lc3RpbWF0ZV9iYW5kd2lkdGg6XCJCX2RlYlwifSxTdD17fTtmb3IodmFyIF90IGluIGh0KXt2YXIgRXQ9aHRbX3RdO1N0W0V0XSYmY29uc29sZS5lcnJvcihcIktleSBDb25mbGljdDogXCIuY29uY2F0KEV0LFwiOiBcIikuY29uY2F0KGh0W0V0XSxcInwgXCIpLmNvbmNhdChfdCkpLFN0W0V0XT1fdH12YXIgSXQ9ZnVuY3Rpb24oZSl7cmV0dXJuIGh0W2VdfHxlfSx5dD1mdW5jdGlvbihlKXtyZXR1cm4gU3RbZV18fGV9O3ZhciBUdD1mdW5jdGlvbiB0KG4pe3ZhciBpPSExLGE9ZnVuY3Rpb24oZSl7cmV0dXJue190eXBlOlwiY29udHJvbFwiLF9tZXNzYWdlOmV9fSxkPWZ1bmN0aW9uKGUsdCl7dmFyIG49e307cmV0dXJuIE9iamVjdC5rZXlzKHQpLmZvckVhY2goZnVuY3Rpb24oZSl7T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlNUQVRTX0ZJTFRFUlwiKVtlXXx8KG5bSXQoZSldPXRbZV0pfSkse190eXBlOlwic3Vic2NyaWJlX3JlbGF0ZWRfc3RhdHNcIixfbWVzc2FnZTp7c3RyZWFtX3R5cGU6XCJoaWdoXCIsc3RyZWFtX2lkOmUsc3RhdHM6bn19fSxnPWZ1bmN0aW9uKGUpe3JldHVybntfdHlwZTpcInB1Ymxpc2hcIixfbWVzc2FnZTplfX0sdj1mdW5jdGlvbihlLHQpe3ZhciBuPXt9O3JldHVybiBPYmplY3Qua2V5cyh0KS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09iamVjdChyLmdldFBhcmFtZXRlcikoXCJTVEFUU19GSUxURVJcIilbZV18fChuW0l0KGUpXT10W2VdKX0pLHtfdHlwZTpcInN1YnNjcmliZV9zdGF0c1wiLF9tZXNzYWdlOntzdHJlYW1faWQ6ZSxzdGF0czpufX19LGg9dC5ESVNDT05ORUNURUQsXz10LkNPTk5FQ1RJTkcsRT10LkNPTk5FQ1RFRCxJPXQuRElTQ09OTkVDVElORyxUPWgsYj1jKG4pO09iamVjdC5kZWZpbmVQcm9wZXJ0eShiLFwic3RhdGVcIix7c2V0OmZ1bmN0aW9uKGUpe3ZhciBuPVQ7VD1lLGZ1bmN0aW9uKGUsdCl7bHRbZV09dH0oYi5jbGllbnRJZCxlKSxuIT09ZSYmYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY29ubmVjdGlvbi1zdGF0ZS1jaGFuZ2VcIixwcmV2U3RhdGU6dC5jb25uZXRpb25TdGF0ZU1hcFtuXSxjdXJTdGF0ZTp0LmNvbm5ldGlvblN0YXRlTWFwW2VdfSl9LGdldDpmdW5jdGlvbigpe3JldHVybiBUfX0pLGIuc29ja2V0PXZvaWQgMCxiLnN0YXRlPWgsYi5tb2RlPW4ubW9kZSxiLnJvbGU9bi5yb2xlLGIuY29kZWM9bi5jb2RlYyxiLmNvbmZpZz17fSxiLnRpbWVycz17fSxiLnRpbWVyX2NvdW50ZXI9e30sYi5sb2NhbFN0cmVhbXM9e30sYi5yZW1vdGVTdHJlYW1zPXt9LGIucmVtb3RlTXV0ZVN0YXRlPXt9LGIuYXR0ZW1wcz0xLGIucDJwX2F0dGVtcHM9MSxiLmF1ZGlvTGV2ZWw9e30sYi5hY3RpdmVTcGVha2VyPXZvaWQgMCxiLnJlY29ubmVjdE1vZGU9XCJyZXRyeVwiLGIucmVqb2luQXR0ZW1wdD0wLGIuaGFzQ2hhbmdlQkdQQWRkcmVzcz0hMSxiLnRyYWZmaWNfc3RhdHM9e30sYi5jbGllbnRJZD1uLmNsaWVudElkLGIucGluZ3BvbmdDb3VudGVyPTAsYi5oYXNJbnZva2VMZWF2ZT0hMSxiLnAycHM9bmV3IE1hcCxiLmxpdmVTdHJlYW1zPW5ldyBNYXAsYi5pbmplY3RMaXZlU3RyZWFtcz1uZXcgTWFwLGIucmVtb3RlU3RyZWFtc0luQ2hhbm5lbD1uZXcgU2V0LGZ1bmN0aW9uKGUpe3ZhciB0PXR0O2UubWFrZVJlcXVlc3Q9ZnVuY3Rpb24obixpLGEpe2lmKHZvaWQgMD09PWUuc29ja2V0KXJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIE5vIHNvY2tldCBhdmFpbGFibGVcIikpLHZvaWQgdChhLFYuSU5WQUxJRF9PUEVSQVRJT04pO3RyeXtlLnNvY2tldC5lbWl0UmVxdWVzdChuLGZ1bmN0aW9uKGUsdCl7dmFyIG47XCJzdWNjZXNzXCI9PT1lP1wiZnVuY3Rpb25cIj09dHlwZW9mIGkmJmkodCk6XCJmdW5jdGlvblwiPT10eXBlb2YgYSYmKG49dCYmdC5lcnJvcl9jb2RlJiZ5W3QuZXJyb3JfY29kZV0/eVt0LmVycm9yX2NvZGVdOnQmJnQuZXJyb3Jfc3RyP3QuZXJyb3Jfc3RyOnQmJnQuZXJyb3JfY29kZT9cIlVOS05PV19FUlJPUl9cIi5jb25jYXQodC5lcnJvcl9jb2RlKTplLGEobix0KSl9KX1jYXRjaChpKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFNvY2tldCBlbWl0IG1lc3NhZ2UgZmFpbGVkIFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkobikpKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFwiKSxpKSx0KGEsVi5TT0NLRVRfRVJST1IpfX0sZS5tYWtlUmVwb3J0PWZ1bmN0aW9uKHQpe3ZvaWQgMD09PWUuc29ja2V0JiZvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIE5vIHNvY2tldCBhdmFpbGFibGVcIikpO3RyeXtlLnNvY2tldC5lbWl0UmVwb3J0KHQpfWNhdGNoKG4pe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gU29ja2V0IGVtaXQgcmVwb3J0IGZhaWxlZCBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHQpKSl9fX0oYiksYi5pbkNoYW5uZWxJbmZvPXtqb2luQXQ6bnVsbCxkdXJhdGlvbjowfSxiLl9zZW5kTWVzc2FnZT1mdW5jdGlvbihlLHQpe3N3aXRjaChlKXtjYXNlXCJTdWJzY3JpYmVTdGF0c1wiOnNlbmRNZXNzYWdlKHYuYXBwbHkodm9pZCAwLGV0KCkodCkpKX19O3ZhciBSPXR0O2IucDJwQ291bnRlcj1PYmplY3QobmUucmFuZG9tKSgxZTUpLGIuZ2VuZXJhdGVQMlBJZD1mdW5jdGlvbigpe3JldHVybisrYi5wMnBDb3VudGVyfSxiLmF1ZGlvVm9sdW1lSW5kaWNhdGlvbj17ZW5hYmxlZDohMSxzb3J0ZWRBdWRpb1ZvbHVtZXM6W10sc21vb3RoOjMsaW50ZXJ2YWw6MmUzfSxiLnJlbW90ZVZpZGVvU3RyZWFtVHlwZXM9e1JFTU9URV9WSURFT19TVFJFQU1fSElHSDowLFJFTU9URV9WSURFT19TVFJFQU1fTE9XOjEsUkVNT1RFX1ZJREVPX1NUUkVBTV9NRURJVU06Mn0sYi5zdHJlYW1GYWxsYmFja1R5cGVzPXtTVFJFQU1fRkFMTEJBQ0tfT1BUSU9OX0RJU0FCTEVEOjAsU1RSRUFNX0ZBTExCQUNLX09QVElPTl9WSURFT19TVFJFQU1fTE9XOjEsU1RSRUFNX0ZBTExCQUNLX09QVElPTl9BVURJT19PTkxZOjJ9LGIuY29uZmlnUHVibGlzaGVyPWZ1bmN0aW9uKGUpe2IuY29uZmlnPWV9LGIuZ2V0R2F0ZXdheUluZm89ZnVuY3Rpb24oZSx0KXtiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcImdhdGV3YXlfaW5mb1wifSxlLHQpfSxiLnNldENsaWVudFJvbGU9ZnVuY3Rpb24oZSx0KXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHNldENsaWVudFJvbGUgdG8gXCIpLmNvbmNhdChlKSk7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShiLmpvaW5JbmZvLnNpZCx7bmFtZTpcIl9zZXRDbGllbnRSb2xlXCIsY2FsbGJhY2s6dH0pO2IubWFrZVJlcXVlc3Qoe190eXBlOlwic2V0X2NsaWVudF9yb2xlXCIsX21lc3NhZ2U6e3JvbGU6ZX19LGZ1bmN0aW9uKCl7Yi5yb2xlPWUsYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2xpZW50LXJvbGUtY2hhbmdlZFwiLHJvbGU6ZX0pLG4mJm4obnVsbCx7cm9sZTplfSl9LGZ1bmN0aW9uKHQsaSl7aWYoaSYmaS5jb2RlJiYodD14W2kuY29kZV18fFwiVU5LTk9XX0VSUk9SX1wiK2kuY29kZSksXCJFUlJfQUxSRUFEWV9JTl9VU0VcIj09PXQpcmV0dXJuIG4mJm4obnVsbCk7by5kZWZhdWx0LmVycm9yKFwic2V0IENsaWVudCByb2xlIGVycm9yIHRvIFwiK2UrXCI6IFwiK3QpLG4mJm4odCl9KX0sYi5qb2luPWZ1bmN0aW9uKGUsdCxpLGEpe2UudXNlUHJveHlTZXJ2ZXImJihiLmhhc0NoYW5nZUJHUEFkZHJlc3M9ITApO3ZhciBjPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQ9ZS51aWQ7aWYoYi5pbkNoYW5uZWxJbmZvLmpvaW5BdCYmKGIuaW5DaGFubmVsSW5mby5kdXJhdGlvbis9Yy1iLmluQ2hhbm5lbEluZm8uam9pbkF0KSxiLmluQ2hhbm5lbEluZm8uam9pbkF0PWMsYi5zdGF0ZSE9PV8pcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gR2F0ZXdheUNsaWVudC5qb2luIEZhaWxlZDogc3RhdGUgXCIpLGIuc3RhdGUpLGEmJmEoVi5JTlZBTElEX09QRVJBVElPTiksdm9pZCBzLmIuam9pbkdhdGV3YXkoZS5zaWQse2x0czpjLHN1Y2M6ITEsZWM6Vi5JTlZBTElEX09QRVJBVElPTixhZGRyOm51bGx9KTtpZihudWxsIT1kJiZwYXJzZUludChkKSE9PWQpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW5wdXQgdWlkIGlzIGludmFsaWRcIikpLGIuc3RhdGU9aCxhJiZhKFYuSU5WQUxJRF9QQVJBTUVURVIpLHZvaWQgcy5iLmpvaW5HYXRld2F5KGUuc2lkLHtsdHM6YyxzdWNjOiExLGVjOlYuSU5WQUxJRF9QQVJBTUVURVIsYWRkcjpudWxsfSk7dmFyIHU9YnQucmVnaXN0ZXIoYix7dWlkOmQsY25hbWU6ZSYmZS5jbmFtZX0pO2lmKHUpcmV0dXJuIGIuc3RhdGU9aCxhJiZhKHUpLHZvaWQgcy5iLmpvaW5HYXRld2F5KGUuc2lkLHtsdHM6YyxzdWNjOiExLGVjOnUsYWRkcjpudWxsfSk7Yi5qb2luSW5mbz1TKCkoe30sZSksYi51aWQ9ZCxiLmtleT10LGIucGluZ3BvbmdDb3VudGVyPTAsTihlLGZ1bmN0aW9uKHQpe3ZhciBkLHUsbCxmO2Iuc3RhdGU9RSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIENvbm5lY3RlZCB0byBnYXRld2F5IHNlcnZlclwiKSksY2xlYXJJbnRlcnZhbChiLnBpbmdUaW1lciksYi5waW5nVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZT1PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUElOR19QT05HX1RJTUVfT1VUXCIpO2lmKCsrYi5waW5ncG9uZ0NvdW50ZXI+PWUpe3ZhciB0PURhdGUubm93KCk7Yi5zb2NrZXQmJm8uZGVmYXVsdC53YXJuaW5nKFwiUElOR1BPTkcgVGltZW91dC4gTGFzdCBTb2NrZXQgTWVzc2FnZTogXCIuY29uY2F0KHQtYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKSxcIm1zXCIpKSxiLnNvY2tldCYmYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKSYmdC1iLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpPk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJXRUJTT0NLRVRfVElNRU9VVF9NSU5cIikmJihiLnBpbmdwb25nQ291bnRlcj0wLGIuc29ja2V0LmNsb3NlKCksYi5zb2NrZXQuZGlzcGF0Y2hFdmVudChwKHt0eXBlOlwiZGlzY29ubmVjdFwiLGV2ZW50Onttc2c6XCJQSU5HX1BPTkdfVElNRV9PVVRcIn19KSkpfXZhciBuPURhdGUubm93KCk7Yi5tYWtlUmVxdWVzdCh7X3R5cGU6XCJwaW5nXCJ9LGZ1bmN0aW9uKCl7Yi5waW5ncG9uZ0NvdW50ZXI9MDt2YXIgZT1EYXRlLm5vdygpLW47c2V0VGltZW91dChmdW5jdGlvbigpe09iamVjdChyLmdldFBhcmFtZXRlcikoXCJSRVBPUlRfU1RBVFNcIikmJmIubWFrZVJlcXVlc3Qoe190eXBlOlwicGluZ19iYWNrXCIsX21lc3NhZ2U6e3Bpbmdwb25nRWxhcHNlOmV9fSl9LDFlMyl9LGZ1bmN0aW9uKGUsdCl7XCJUSU1FT1VUXCIhPT1lJiYoby5kZWZhdWx0LmVycm9yKFwiUGluZyBFcnJvciBcIi5jb25jYXQoZSxcIiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KHQpKSksdCYmdC5lcnJvcl9jb2RlJiZiLnNvY2tldCYmYi5zb2NrZXQuc2lnbmFsJiZiLnNvY2tldC5zaWduYWwuY29ubmVjdGlvbiYmYi5zb2NrZXQuc2lnbmFsLmNvbm5lY3Rpb24ucmVhZHlTdGF0ZT09PVdlYlNvY2tldC5PUEVOJiYoby5kZWZhdWx0LmluZm8oXCJEaXNjb25uZWN0aW5nIHdlYnNvY2tldCBjb25uZWN0aW9uXCIpLGIuc29ja2V0LnNpZ25hbC5jb25uZWN0aW9uLmNsb3NlKCkpKX0pfSwzZTMpLGIubWFrZVJlcXVlc3QoKGQ9e3JvbGU6Yi5yb2xlfSx1PWQucm9sZSxsPVMoKSh7fSxiLmpvaW5JbmZvLmFwUmVzcG9uc2UpLGY9e3Nlc3Npb25faWQ6Yi5qb2luSW5mby5zaWQsYXBwX2lkOm4uYXBwSWQsY2hhbm5lbF9rZXk6Yi5rZXksY2hhbm5lbF9uYW1lOmIuam9pbkluZm8uY25hbWUsc2RrX3ZlcnNpb246ci5WRVJTSU9OLGJyb3dzZXI6bmF2aWdhdG9yLnVzZXJBZ2VudCxwcm9jZXNzX2lkOk9iamVjdChzLmEpKCksbW9kZTpiLm1vZGUsY29kZWM6Yi5jb2RlYyxyb2xlOnUsaGFzX2NoYW5nZWRfZ2F0ZXdheTpPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiRk9SQ0VfQ0hBTkdFRF9HQVRFV0FZX0ZMQUdcIil8fGIuaGFzQ2hhbmdlQkdQQWRkcmVzcyxhcF9yZXNwb25zZTpsLGV4dGVuZDpPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiSk9JTl9FWFRFTkRcIiksZGV0YWlsczp7fX0sYi5qb2luSW5mby5oYXNPd25Qcm9wZXJ0eShcInN0cmluZ1VpZFwiKSYmKGYuc3RyaW5nX3VpZD1iLmpvaW5JbmZvLnN0cmluZ1VpZCksYi5qb2luSW5mby5hZXNtb2RlJiZiLmpvaW5JbmZvLmFlc3Bhc3N3b3JkJiYoZi5hZXNfbW9kZT1iLmpvaW5JbmZvLmFlc21vZGUsZi5hZXNfc2VjcmV0PWIuam9pbkluZm8uYWVzcGFzc3dvcmQpLGIuc29ja2V0JiZiLnNvY2tldC5zaWduYWwmJmIuc29ja2V0LnNpZ25hbCYmKGwuYWRkcmVzc2VzW2Iuc29ja2V0LnNpZ25hbC5ob3N0SW5kZXhdJiYoZi5hcF9yZXNwb25zZS50aWNrZXQ9bC5hZGRyZXNzZXNbYi5zb2NrZXQuc2lnbmFsLmhvc3RJbmRleF0udGlja2V0LGRlbGV0ZSBsLmFkZHJlc3NlcyksYi5qb2luSW5mby50dXJuU2VydmVyJiZcImF1dG9cIj09PWIuam9pbkluZm8udHVyblNlcnZlci5tb2RlJiZiLnNvY2tldC5zaWduYWwudHVybkNvbmZpZyYmKGIuam9pbkluZm8udHVyblNlcnZlci51cmw9Yi5zb2NrZXQuc2lnbmFsLnR1cm5Db25maWcudXJsLGIuc29ja2V0LnNpZ25hbC50dXJuQ29uZmlnLnRjcHBvcnQmJihiLmpvaW5JbmZvLnR1cm5TZXJ2ZXIudGNwcG9ydD1cIlwiK2Iuc29ja2V0LnNpZ25hbC50dXJuQ29uZmlnLnRjcHBvcnQpLGIuc29ja2V0LnNpZ25hbC50dXJuQ29uZmlnLnVkcHBvcnQmJihiLmpvaW5JbmZvLnR1cm5TZXJ2ZXIudWRwcG9ydD1cIlwiK2Iuc29ja2V0LnNpZ25hbC50dXJuQ29uZmlnLnVkcHBvcnQpKSxvLmRlZmF1bHQuZGVidWcoXCJUdXJuIGNvbmZpZ1wiLGIuam9pbkluZm8udHVyblNlcnZlcikpLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImpvaW4tbWVzc2FnZS1ob29rXCIsam9pbk1lc3NhZ2U6Zn0sITApLHtfdHlwZTpcImpvaW5cIixfbWVzc2FnZTpmfSksZnVuY3Rpb24odCl7aWYocy5iLmpvaW5HYXRld2F5KGUuc2lkLHtsdHM6YyxzdWNjOiEwLGVjOm51bGwsdmlkOmUudmlkLGFkZHI6Yi5zb2NrZXQuZ2V0VVJMKCl9KSxiLnJlam9pbkF0dGVtcHQ9MCxpJiZpKHQudWlkKSxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJqb2luXCJ9KSxiLmxlYXZlT25Db25uZWN0ZWQpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDYWxsaW5nIExlYXZlKCkgb25jZSBqb2luZWRcIikpO3ZhciBuPWIubGVhdmVPbkNvbm5lY3RlZDtiLmxlYXZlT25Db25uZWN0ZWQ9bnVsbCxiLmxlYXZlKG4ub25TdWNjZXNzLG4ub25GYWlsdXJlKX19LGZ1bmN0aW9uKHQsbil7aWYoby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVc2VyIGpvaW4gZmFpbGVkIFtcIikuY29uY2F0KHQsXCJdXCIpKSxcIkVSUl9KT0lOX0JZX01VTFRJX0lQXCI9PT10KXJldHVybiBiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJvbk11bHRpSVBcIixvcHRpb246bi5vcHRpb259KTtpZih2dFt0XSYmYi5yZWpvaW5BdHRlbXB0PDQpe2lmKGIuX2RvV2l0aEFjdGlvbih2dFt0XSxpLGEpLGIubGVhdmVPbkNvbm5lY3RlZCl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDYWxsaW5nIExlYXZlKCkgb25jZSBqb2luZWQ6IEpvaW4gRmFpbGVkXCIpKTt2YXIgcj1iLmxlYXZlT25Db25uZWN0ZWQ7Yi5sZWF2ZU9uQ29ubmVjdGVkPW51bGwsci5vbkZhaWx1cmUoVi5KT0lOX0NIQU5ORUxfRkFJTEVEKX19ZWxzZSBhJiZhKHQpO3MuYi5qb2luR2F0ZXdheShlLnNpZCx7bHRzOmMsc3VjYzohMSxlYzp0LGFkZHI6Yi5zb2NrZXQuZ2V0VVJMKCl9KX0pfSxmdW5jdGlvbih0KXtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgam9pbiBmYWlsZWQgW1wiKS5jb25jYXQodCxcIl1cIikpLGEmJmEodCkscy5iLmpvaW5HYXRld2F5KGUuc2lkLHtsdHM6YyxzdWNjOiExLGVjOnQsYWRkcjpiLnNvY2tldC5nZXRVUkwoKX0pfSksY2xlYXJJbnRlcnZhbChiLnRpbWVycy50cmFmZmljU3RhdHMpLGIudGltZXJzLnRyYWZmaWNTdGF0cz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2IubWFrZVJlcXVlc3Qoe190eXBlOlwidHJhZmZpY19zdGF0c1wifSxmdW5jdGlvbihlKXt2YXIgdD17fTtmb3IodmFyIG4gaW4gZSl0W3l0KG4pXT1lW25dO2lmKHQucGVlcl9kZWxheSYmdC5wZWVyX2RlbGF5Lmxlbmd0aCl7dmFyIGk9W107dC5wZWVyX2RlbGF5LmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciBuIGluIGUpdFt5dChuKV09ZVtuXTtpLnB1c2godCl9KSx0LnBlZXJfZGVsYXk9aX1iLnRyYWZmaWNfc3RhdHM9dDt2YXIgYT1iLmpvaW5JbmZvLnN0cmluZ1VpZCxyPWIubG9jYWxTdHJlYW1zW2RdfHxiLmxvY2FsU3RyZWFtc1thXTtyJiYoci50cmFmZmljX3N0YXRzPXthY2Nlc3NfZGVsYXk6dC5hY2Nlc3NfZGVsYXl9KSx0LnBlZXJfZGVsYXkmJnQucGVlcl9kZWxheS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWIucmVtb3RlU3RyZWFtc1tlLnBlZXJfdWlkXTtuJiYobi50cmFmZmljX3N0YXRzPXthY2Nlc3NfZGVsYXk6dC5hY2Nlc3NfZGVsYXksZTJlX2RlbGF5OmUuZTJlX2RlbGF5LGF1ZGlvX2RlbGF5OmUuYXVkaW9fZGVsYXksdmlkZW9fZGVsYXk6ZS52aWRlb19kZWxheX0pfSksYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiYWZ0ZXItZ2V0VHJhZmZpY1N0YXRzXCIsdHJhZmZpY1N0YXRzOnR9KX0pfSwzZTMpLHRoaXMucmVtb3RlTXV0ZVN0YXRlPXt9LGIucmVzZXRBdWRpb1ZvbHVtZUluZGljYXRpb24oKX0sYi5sZWF2ZT1mdW5jdGlvbihlLHQpe3N3aXRjaChiLnN0YXRlKXtjYXNlIGg6cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ2xpZW50IEFscmVhZHkgaW4gRElTQ09OTkVDVEVEIHN0YXR1c1wiKSksdm9pZCBSKGUpO2Nhc2UgSTpyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDbGllbnQgQWxyZWFkeSBpbiBESVNDT05ORUNUSU5HIHN0YXR1c1wiKSksdm9pZCBSKHQsVi5JTlZBTElEX09QRVJBVElPTik7Y2FzZSBfOmlmKGIubGVhdmVPbkNvbm5lY3RlZClyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDbGllbnQubGVhdmUoKSBhbHJlYWR5IGNhbGxlZFwiKSksdm9pZCBSKHQsVi5JTlZBTElEX09QRVJBVElPTik7aWYoMT09Yi5yZWNvbm5lY3RpbmdDUylyZXR1cm47cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ2xpZW50IGNvbm5lY3RpbmcuIFdhaXRpbmcgZm9yIENsaWVudCBGdWxseSBDb25uZWN0ZWQoQW5kIGxlYXZlKVwiKSksdm9pZChiLmxlYXZlT25Db25uZWN0ZWQ9e29uU3VjY2VzczplLG9uRmFpbHVyZTp0fSl9dmFyIG49YnQudW5yZWdpc3RlcihiKTtpZihuKW8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gXCIpLG4pO2Vsc2V7Zm9yKHZhciBpIGluIGIuc3RhdGU9SSxiLmNoYW5uZWxNZWRpYUNvbmZpZyYmKGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyJiZiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5kaXNwb3NlKCksYi5jaGFubmVsTWVkaWFDb25maWcsYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXI9bnVsbCksY2xlYXJJbnRlcnZhbChiLnBpbmdUaW1lciksYi50aW1lcnMpYi50aW1lcnMuaGFzT3duUHJvcGVydHkoaSkmJmNsZWFySW50ZXJ2YWwoYi50aW1lcnNbaV0pO2Zvcih2YXIgaSBpbiBiLmluQ2hhbm5lbEluZm8uam9pbkF0JiYoYi5pbkNoYW5uZWxJbmZvLmR1cmF0aW9uKz1EYXRlLm5vdygpLWIuaW5DaGFubmVsSW5mby5qb2luQXQsYi5pbkNoYW5uZWxJbmZvLmpvaW5BdD1udWxsKSxiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcImxlYXZlXCJ9LGZ1bmN0aW9uKHQpe2Iuc29ja2V0LmNsb3NlKCksYi5zb2NrZXQ9dm9pZCAwLG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBMZWF2ZSBjaGFubmVsIHN1Y2Nlc3NcIikpLGIuc3RhdGU9aCxlJiZlKHQpfSxmdW5jdGlvbihlKXtcIlRJTUVPVVRcIiE9PWUmJihvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIExlYXZlIENoYW5uZWwgRmFpbGVkXCIpLGUpLGIuc3RhdGU9RSx0JiZ0KGUpKX0pLGIubG9jYWxTdHJlYW1zKWlmKGIubG9jYWxTdHJlYW1zLmhhc093blByb3BlcnR5KGkpKXt2YXIgYT1iLmxvY2FsU3RyZWFtc1tpXTtkZWxldGUgYi5sb2NhbFN0cmVhbXNbaV0sdm9pZCAwIT09YS5wYyYmKGEucGMuY2xvc2UoKSxhLnBjPXZvaWQgMCl9RCgpfX0sYi5wdWJsaXNoPWZ1bmN0aW9uKGUsdCxuLGkpe3ZhciBjPShuZXcgRGF0ZSkuZ2V0VGltZSgpLGQ9ITE7aWYoZS5wdWJsaXNoTFRTPWMsXCJvYmplY3RcIiE9PUhlKCkoZSl8fG51bGw9PT1lKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEludmFsaWQgbG9jYWwgc3RyZWFtXCIpKSxpJiZpKFYuSU5WQUxJRF9MT0NBTF9TVFJFQU0pLHZvaWQgcy5iLnB1Ymxpc2goYi5qb2luSW5mby5zaWQse2x0czpjLHN1Y2M6ITEsYXVkaW9OYW1lOmUuaGFzQXVkaW8oKSYmZS5hdWRpb05hbWUsdmlkZW9OYW1lOmUuaGFzVmlkZW8oKSYmZS52aWRlb05hbWUsc2NyZWVuTmFtZTplLmhhc1NjcmVlbigpJiZlLnNjcmVlbk5hbWUsZWM6Vi5JTlZBTElEX0xPQ0FMX1NUUkVBTX0pO2lmKCFlLnN0cmVhbSYmdm9pZCAwPT09ZS51cmwpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCBsb2NhbCBtZWRpYSBzdHJlYW1cIikpLGkmJmkoVi5JTlZBTElEX0xPQ0FMX1NUUkVBTSksdm9pZCBzLmIucHVibGlzaChiLmpvaW5JbmZvLnNpZCx7bHRzOmMsc3VjYzohMSxhdWRpb05hbWU6ZS5oYXNBdWRpbygpJiZlLmF1ZGlvTmFtZSx2aWRlb05hbWU6ZS5oYXNWaWRlbygpJiZlLnZpZGVvTmFtZSxzY3JlZW5OYW1lOmUuaGFzU2NyZWVuKCkmJmUuc2NyZWVuTmFtZSxlYzpWLklOVkFMSURfTE9DQUxfU1RSRUFNfSk7aWYoYi5zdGF0ZSE9PUUpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVXNlciBpcyBub3QgaW4gdGhlIHNlc3Npb25cIikpLGkmJmkoVi5JTlZBTElEX09QRVJBVElPTiksdm9pZCBzLmIucHVibGlzaChiLmpvaW5JbmZvLnNpZCx7bHRzOmMsc3VjYzohMSxhdWRpb05hbWU6ZS5oYXNBdWRpbygpJiZlLmF1ZGlvTmFtZSx2aWRlb05hbWU6ZS5oYXNWaWRlbygpJiZlLnZpZGVvTmFtZSxzY3JlZW5OYW1lOmUuaGFzU2NyZWVuKCkmJmUuc2NyZWVuTmFtZSxlYzpWLklOVkFMSURfT1BFUkFUSU9OfSk7dmFyIHU9ZS5nZXRBdHRyaWJ1dGVzKCl8fHt9O2lmKGUubG9jYWwmJnZvaWQgMD09PWIubG9jYWxTdHJlYW1zW2UuZ2V0SWQoKV0mJihlLmhhc0F1ZGlvKCl8fGUuaGFzVmlkZW8oKXx8ZS5oYXNTY3JlZW4oKSkpe3ZhciBwPWIuZ2VuZXJhdGVQMlBJZCgpO2lmKGIucDJwcy5zZXQocCxlKSxlLnAycElkPXAsdm9pZCAwIT09ZS51cmwpdyhnKHtzdGF0ZTpcInVybFwiLGF1ZGlvOmUuaGFzQXVkaW8oKSx2aWRlbzplLmhhc1ZpZGVvKCksYXR0cmlidXRlczplLmdldEF0dHJpYnV0ZXMoKX0sZS51cmwpLGZ1bmN0aW9uKHQsbil7XCJzdWNjZXNzXCI9PT10PyhlLmdldFVzZXJJZCgpIT09biYmZS5zZXRVc2VySWQobiksYi5sb2NhbFN0cmVhbXNbbl09ZSxlLm9uQ2xvc2U9ZnVuY3Rpb24oKXtiLnVucHVibGlzaChlKX0pOm8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUHVibGlzaCBsb2NhbCBzdHJlYW0gZmFpbGVkXCIpLHQpfSk7ZWxzZXtiLmxvY2FsU3RyZWFtc1tlLmdldElkKCldPWUsZS5jb25uZWN0aW9uU3BlYz17Y2FsbGJhY2s6ZnVuY3Rpb24odSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTRFAgZXhjaGFuZ2UgaW4gcHVibGlzaCA6IHNlbmQgb2ZmZXIgLS0gIFwiKSxKU09OLnBhcnNlKHUpKSxiLm1ha2VSZXF1ZXN0KGcoe3N0YXRlOlwib2ZmZXJcIixzdHJlYW1fdHlwZToxPT10LnN0cmVhbVR5cGU/XCJsb3dcIjpcImhpZ2hcIixwMnBfaWQ6cCxzZHA6dSxhdWRpbzplLmF1ZGlvfHxlLnNjcmVlbkF1ZGlvLHZpZGVvOmUuc2NyZWVufHxlLnZpZGVvLHNjcmVlbjplLnNjcmVlbixhdHRyaWJ1dGVzOmUuZ2V0QXR0cmlidXRlcygpLGR0eDplLkRUWCxocTplLmhpZ2hRdWFsaXR5LGxxOmUubG93UXVhbGl0eSxzdGVyZW86ZS5zdGVyZW8sc3BlZWNoOmUuc3BlZWNoLGNvZGVjOmIuY29kZWMsZXh0ZW5kOk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJQVUJfRVhURU5EXCIpfSksZnVuY3Rpb24odCl7ZS5nZXRVc2VySWQoKSE9PXQudWlkJiZlLnNldFVzZXJJZCh0LnVpZCksby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIExvY2FsIHN0cmVhbSBwdWJsaXNoZWQgd2l0aCB1aWRcIiksdC51aWQpLGUub25DbG9zZT1mdW5jdGlvbigpe2IudW5wdWJsaXNoKGUpfSxlLl9vbkF1ZGlvVW5tdXRlPWZ1bmN0aW9uKCl7Yi5tYWtlUmVwb3J0KGEoe2FjdGlvbjpcInVubXV0ZV9sb2NhbF9hdWRpb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSl9LGUuX29uVmlkZW9Vbm11dGU9ZnVuY3Rpb24oKXtiLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwidW5tdXRlX2xvY2FsX3ZpZGVvXCIsc3RyZWFtX2lkOmUuZ2V0SWQoKX0pKX0sZS5fb25BdWRpb011dGU9ZnVuY3Rpb24oKXtiLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwibXV0ZV9sb2NhbF9hdWRpb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSl9LGUuX29uVmlkZW9NdXRlPWZ1bmN0aW9uKCl7Yi5tYWtlUmVwb3J0KGEoe2FjdGlvbjpcIm11dGVfbG9jYWxfdmlkZW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSkpfSxlLmdldElkKCk9PT1lLmdldFVzZXJJZCgpJiYoZS5pc0F1ZGlvT24oKXx8ZS5oYXNBdWRpbygpJiYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBsb2NhbCBzdHJlYW0gYXVkaW8gbXV0ZVwiKSksZS5fb25BdWRpb011dGUoKSksZS5pc1ZpZGVvT24oKXx8KGUuaGFzVmlkZW8oKXx8ZS5oYXNTY3JlZW4oKSkmJihvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIGxvY2FsIHN0cmVhbSB2aWRlbyBtdXRlXCIpKSxlLl9vblZpZGVvTXV0ZSgpKSksZS5wYy5vbmljZWNvbm5lY3Rpb25zdGF0ZWNoYW5nZT1mdW5jdGlvbih0KXtpZihcImZhaWxlZFwiPT09dCl7aWYobnVsbCE9Yi50aW1lcnNbZS5nZXRJZCgpXSYmKGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpXSksY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCldK1wiX1JlbGF0ZWRTdGF0c1wiKSksby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBQdWJsaXNoZXIgY29ubmVjdGlvbiBpcyBsb3N0IC0tIHN0cmVhbUlkOiBcIikuY29uY2F0KGUuZ2V0SWQoKSxcIiwgcDJwSWQ6IFwiKS5jb25jYXQocCkpLGIucDJwcy5kZWxldGUocCksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBwdWJsaXNoIHAycCBmYWlsZWQ6IFwiKSxiLnAycHMpLCFkKXJldHVybiBkPSEwLHMuYi5wdWJsaXNoKGIuam9pbkluZm8uc2lkLHtsdHM6YyxzdWNjOiExLGF1ZGlvTmFtZTplLmhhc0F1ZGlvKCkmJmUuYXVkaW9OYW1lLHZpZGVvTmFtZTplLmhhc1ZpZGVvKCkmJmUudmlkZW9OYW1lLHNjcmVlbk5hbWU6ZS5oYXNTY3JlZW4oKSYmZS5zY3JlZW5OYW1lLGVjOlYuUEVFUkNPTk5FQ1RJT05fRkFJTEVEfSksYi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJwdWJQMlBMb3N0XCIsc3RyZWFtOmV9KSksaSYmaShWLlBFRVJDT05ORUNUSU9OX0ZBSUxFRCk7Yi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJwdWJQMlBMb3N0XCIsc3RyZWFtOmV9KSl9ZWxzZSBpZihcImNvbm5lY3RlZFwiPT09dCYmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcHVibGlzaCBwMnAgY29ubmVjdGVkOiBcIiksYi5wMnBzKSxlLl9pc0F1ZGlvTXV0ZWQoKT9iLm1ha2VSZXBvcnQoYSh7YWN0aW9uOlwibXV0ZV9sb2NhbF9hdWRpb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSk6Yi5tYWtlUmVwb3J0KGEoe2FjdGlvbjpcInVubXV0ZV9sb2NhbF9hdWRpb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSksZS5faXNWaWRlb011dGVkKCk/Yi5tYWtlUmVwb3J0KGEoe2FjdGlvbjpcIm11dGVfbG9jYWxfdmlkZW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSkpOmIubWFrZVJlcG9ydChhKHthY3Rpb246XCJ1bm11dGVfbG9jYWxfdmlkZW9cIixzdHJlYW1faWQ6ZS5nZXRJZCgpfSkpLCFkKSlyZXR1cm4gZD0hMCxzLmIucHVibGlzaChiLmpvaW5JbmZvLnNpZCx7bHRzOmMsc3VjYzohMCxhdWRpb05hbWU6ZS5oYXNBdWRpbygpJiZlLmF1ZGlvTmFtZSx2aWRlb05hbWU6ZS5oYXNWaWRlbygpJiZlLnZpZGVvTmFtZSxzY3JlZW5OYW1lOmUuaGFzU2NyZWVuKCkmJmUuc2NyZWVuTmFtZSxlYzpudWxsfSksbiYmbigpfSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFNEUCBleGNoYW5nZSBpbiBwdWJsaXNoIDogcmVjZWl2ZSBhbnN3ZXIgLS0gIFwiKSxKU09OLnBhcnNlKHQuc2RwKSksZS5wYy5wcm9jZXNzU2lnbmFsaW5nTWVzc2FnZSh0LnNkcCl9LGZ1bmN0aW9uKHQsbil7by5kZWZhdWx0LmVycm9yKFwiUHVibGlzaCBGYWlsZWQ6IFwiLmNvbmNhdCh0KSkscy5iLnB1Ymxpc2goYi5qb2luSW5mby5zaWQse2x0czpjLHN1Y2M6ITAsYXVkaW9OYW1lOmUuaGFzQXVkaW8oKSYmZS5hdWRpb05hbWUsdmlkZW9OYW1lOmUuaGFzVmlkZW8oKSYmZS52aWRlb05hbWUsc2NyZWVuTmFtZTplLmhhc1NjcmVlbigpJiZlLnNjcmVlbk5hbWUsZWM6dH0pLFwiVElNRU9VVFwiIT10JiYoYi5wcm9jZXNzUHVibGlzaEZhaWx1cmUoZSksaSYmaSh0KSl9KX0sYXVkaW86ZS5oYXNBdWRpbygpLHZpZGVvOmUuaGFzVmlkZW8oKSxzY3JlZW46ZS5oYXNTY3JlZW4oKSxpc1N1YnNjcmliZXI6ITEsc3R1blNlcnZlclVybDpiLnN0dW5TZXJ2ZXJVcmwsdHVyblNlcnZlcjpiLmpvaW5JbmZvLnR1cm5TZXJ2ZXIsbWF4QXVkaW9CVzp1Lm1heEF1ZGlvQlcsbWluVmlkZW9CVzp1Lm1pblZpZGVvQlcsbWF4VmlkZW9CVzp1Lm1heFZpZGVvQlcsbW9kZTpiLm1vZGUsY29kZWM6Yi5jb2RlYyxpc1ZpZGVvTXV0ZTplLnVzZXJNdXRlVmlkZW98fGUucGVlck11dGVWaWRlbyxpc0F1ZGlvTXV0ZTplLnVzZXJNdXRlQXVkaW98fGUucGVlck11dGVBdWRpbyxtYXhGcmFtZVJhdGU6ZS5hdHRyaWJ1dGVzLm1heEZyYW1lUmF0ZSxjbGllbnRJZDpiLmNsaWVudElkfSxlLnBjPWVlKGUuY29ubmVjdGlvblNwZWMpLGUucGMuYWRkU3RyZWFtKGUuc3RyZWFtKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFBlZXJDb25uZWN0aW9uIGFkZCBzdHJlYW0gOlwiKSxlLnN0cmVhbSksZS5wYy5vbm5lZ290aWF0aW9ubmVlZGVkPWZ1bmN0aW9uKG4pe3ZhciBpPXtzdGF0ZTpcIm5lZ290aWF0aW9uXCIsc3RyZWFtX3R5cGU6MT09PXQuc3RyZWFtVHlwZT9cImxvd1wiOlwiaGlnaFwiLHAycF9pZDpwLHNkcDpufTtiLm1ha2VSZXF1ZXN0KGcoaSksZnVuY3Rpb24odCl7by5kZWZhdWx0LmRlYnVnKFwiTmVnb3RhdGluZyBTdHJlYW0gXCIuY29uY2F0KGUuZ2V0SWQoKSkpLGUucGMucHJvY2Vzc1NpZ25hbGluZ01lc3NhZ2UodC5zZHApfSxmdW5jdGlvbihlLHQpe28uZGVmYXVsdC5lcnJvcihcIk5lZ290aWF0aW9uIGZhaWxlZCBcIi5jb25jYXQoZSksdCxpKX0pfSxjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKV0pLGIudGltZXJzW2UuZ2V0SWQoKV09c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtpZihPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUkVQT1JUX1NUQVRTXCIpKXt2YXIgdD0wO2UmJmUucGMmJmUucGMuZ2V0U3RhdHMmJmUucGMuZ2V0U3RhdHNSYXRlKGZ1bmN0aW9uKG4pe24uZm9yRWFjaChmdW5jdGlvbihuKXtpZihuJiZuLmlkJiYhL19yZWN2JC8udGVzdChuLmlkKSYmIS9edGltZSQvLnRlc3Qobi5pZCkmJmUuZ2V0VXNlcklkKCkpaWYoLTE9PT1uLmlkLmluZGV4T2YoXCJvdXRib3VuZF9ydHBcIikmJi0xPT09bi5pZC5pbmRleE9mKFwiT3V0Ym91bmRSVFBcIil8fFwidmlkZW9cIiE9PW4ubWVkaWFUeXBlfHwobi5nb29nRnJhbWVXaWR0aFNlbnQ9ZS52aWRlb1dpZHRoK1wiXCIsbi5nb29nRnJhbWVIZWlnaHRTZW50PWUudmlkZW9IZWlnaHQrXCJcIiksZS5nZXRJZCgpPT1lLmdldFVzZXJJZCgpKXt2YXIgaT0yMDAqdDt0Kyssc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPWIuc29ja2V0JiZiLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpJiZEYXRlLm5vdygpLWIuc29ja2V0LmdldExhc3RNc2dUaW1lKCk7ZT5PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUkVQT1JUX1NUQVRTX1RJTUVPVVRcIik/by5kZWZhdWx0LmRlYnVnKFwiUHVibGlzaFN0YXRzIHJlcG9ydCBibG9ja2VkIGJ5IFJFUE9SVF9TVEFUU19USU1FT1VUIFwiLmNvbmNhdChlKSk6Yi5tYWtlUmVwb3J0KGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdChyLmdldFBhcmFtZXRlcikoXCJTVEFUU19GSUxURVJcIilbbl18fCh0W0l0KG4pXT1lW25dKX0pLHtfdHlwZTpcInB1Ymxpc2hfc3RhdHNcIixfbWVzc2FnZTp7c3RyZWFtX3R5cGU6XCJoaWdoXCIsc3RhdHM6dH19fShuKSl9LGkpfWVsc2V7aT0yMDAqdDt0Kyssc2V0VGltZW91dChmdW5jdGlvbigpe3ZhciBlPWIuc29ja2V0JiZiLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpJiZEYXRlLm5vdygpLWIuc29ja2V0LmdldExhc3RNc2dUaW1lKCk7ZT5PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUkVQT1JUX1NUQVRTX1RJTUVPVVRcIik/by5kZWZhdWx0LmRlYnVnKFwiUHVibGlzaFN0YXRzTG93IHJlcG9ydCBibG9ja2VkIGJ5IFJFUE9SVF9TVEFUU19USU1FT1VUIFwiLmNvbmNhdChlKSk6Yi5tYWtlUmVwb3J0KGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdChyLmdldFBhcmFtZXRlcikoXCJTVEFUU19GSUxURVJcIilbbl18fCh0W0l0KG4pXT1lW25dKX0pLHtfdHlwZTpcInB1Ymxpc2hfc3RhdHNcIixfbWVzc2FnZTp7c3RyZWFtX3R5cGU6XCJsb3dcIixzdGF0czp0fX19KG4pKX0saSl9fSl9KX19LDNlMyk7dmFyIGY9ZnVuY3Rpb24oKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiUkVQT1JUX1NUQVRTXCIpJiZlJiZlLnBjJiZlLnBjLmdldFZpZGVvUmVsYXRlZFN0YXRzJiZlLnBjLmdldFZpZGVvUmVsYXRlZFN0YXRzKGZ1bmN0aW9uKHQpe3ZhciBuLGksYT1iLnNvY2tldCYmYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKSYmRGF0ZS5ub3coKS1iLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpO2E+T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU19USU1FT1VUXCIpP28uZGVmYXVsdC5kZWJ1ZyhcIlB1Ymxpc2hSZWxhdGVkU3RhdHMgcmVwb3J0IGJsb2NrZWQgYnkgUkVQT1JUX1NUQVRTX1RJTUVPVVQgXCIuY29uY2F0KGEpKTplLmdldElkKCk9PT1lLmdldFVzZXJJZCgpP2IubWFrZVJlcG9ydCgobj10LGk9e30sT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbihlKXtPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU1RBVFNfRklMVEVSXCIpW2VdfHwoaVtJdChlKV09bltlXSl9KSx7X3R5cGU6XCJwdWJsaXNoX3JlbGF0ZWRfc3RhdHNcIixfbWVzc2FnZTp7c3RyZWFtX3R5cGU6XCJoaWdoXCIsc3RhdHM6aX19KSk6Yi5tYWtlUmVwb3J0KGZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiBPYmplY3Qua2V5cyhlKS5mb3JFYWNoKGZ1bmN0aW9uKG4pe09iamVjdChyLmdldFBhcmFtZXRlcikoXCJTVEFUU19GSUxURVJcIilbbl18fCh0W0l0KG4pXT1lW25dKX0pLHtfdHlwZTpcInB1Ymxpc2hfcmVsYXRlZF9zdGF0c1wiLF9tZXNzYWdlOntzdHJlYW1fdHlwZTpcImxvd1wiLHN0YXRzOnR9fX0odCkpfSl9O2YoKSxjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKStcIl9SZWxhdGVkU3RhdHNcIl0pLGIudGltZXJzW2UuZ2V0SWQoKStcIl9SZWxhdGVkU3RhdHNcIl09c2V0SW50ZXJ2YWwoZiwxZTMpfX19LGIudW5wdWJsaXNoPWZ1bmN0aW9uKGUsdCxuLGkpe2lmKFwib2JqZWN0XCIhPT1IZSgpKGUpfHxudWxsPT09ZSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIGxvY2FsIHN0cmVhbVwiKSksdm9pZCBSKGksVi5JTlZBTElEX0xPQ0FMX1NUUkVBTSk7aWYoYi5zdGF0ZSE9PUUpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVXNlciBub3QgaW4gdGhlIHNlc3Npb25cIikpLHZvaWQgUihpLFYuSU5WQUxJRF9PUEVSQVRJT04pO2lmKG51bGwhPWIudGltZXJzW2UuZ2V0SWQoKV0mJihjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKV0pLGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpK1wiX1JlbGF0ZWRTdGF0c1wiXSkpLHZvaWQgMCE9PWIuc29ja2V0KWlmKGUubG9jYWwmJnZvaWQgMCE9PWIubG9jYWxTdHJlYW1zW2UuZ2V0SWQoKV0pe2RlbGV0ZSBiLmxvY2FsU3RyZWFtc1tlLmdldElkKCldO3ZhciBhPXtzdHJlYW1faWQ6ZS5nZXRVc2VySWQoKSxzdHJlYW1fdHlwZToxPT09dC5zdHJlYW1UeXBlP1wibG93XCI6XCJoaWdoXCJ9O2IubWFrZVJlcXVlc3Qoe190eXBlOlwidW5wdWJsaXNoXCIsX21lc3NhZ2U6YX0pLChlLmhhc0F1ZGlvKCl8fGUuaGFzVmlkZW8oKXx8ZS5oYXNTY3JlZW4oKSkmJnZvaWQgMD09PWUudXJsJiZ2b2lkIDAhPT1lLnBjJiYoZS5wYy5jbG9zZSgpLGUucGM9dm9pZCAwKSxlLm9uQ2xvc2U9dm9pZCAwLGUuX29uQXVkaW9NdXRlPXZvaWQgMCxlLl9vbkF1ZGlvVW51dGU9dm9pZCAwLGUuX29uVmlkZW9NdXRlPXZvaWQgMCxlLl9vblZpZGVvVW5tdXRlPXZvaWQgMCxiLnAycHMuZGVsZXRlKGUucDJwSWQpLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbS11bnB1Ymxpc2hlZFwiLHN0cmVhbTplLG9wdGlvbnM6dH0pLG4mJm4oKX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSW52YWxpZCBsb2NhbCBzdHJlYW1cIikpLFIoaSxWLklOVkFMSURfTE9DQUxfU1RSRUFNKTtlbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVXNlciBub3QgaW4gdGhlIHNlc3Npb25cIikpLFIoaSxWLklOVkFMSURfT1BFUkFUSU9OKX0sYi5zdWJzY3JpYmU9ZnVuY3Rpb24oZSx0LG4pe3ZhciBpPShuZXcgRGF0ZSkuZ2V0VGltZSgpO2Uuc3Vic2NyaWJlTFRTPWk7dmFyIGM9ITE7aWYoby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEdhdGV3YXljbGllbnQgXCIpLmNvbmNhdChiLnVpZCxcIiBTdWJzY3JpYmUgXCIpLmNvbmNhdChlLmdldElkKCksXCI6IFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZS5zdWJzY3JpYmVPcHRpb25zKSkpLFwib2JqZWN0XCIhPT1IZSgpKGUpfHxudWxsPT09ZSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIHJlbW90ZSBzdHJlYW1cIikpLG4mJm4oVi5JTlZBTElEX1JFTU9URV9TVFJFQU0pLHZvaWQgcy5iLnN1YnNjcmliZShiLmpvaW5JbmZvLnNpZCx7bHRzOmksc3VjYzohMSx2aWRlbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyxhdWRpbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyxwZWVyaWQ6ZS5nZXRJZCgpLGVjOlYuSU5WQUxJRF9SRU1PVEVfU1RSRUFNfSk7aWYoYi5zdGF0ZSE9PUUmJihvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgaXMgbm90IGluIHRoZSBzZXNzaW9uXCIpKSwhYykpcmV0dXJuIGM9ITAscy5iLnN1YnNjcmliZShiLmpvaW5JbmZvLnNpZCx7bHRzOmksc3VjYzohMSx2aWRlbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyxhdWRpbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyxwZWVyaWQ6ZS5nZXRJZCgpLGVjOlYuSU5WQUxJRF9PUEVSQVRJT059KSxuJiZuKFYuSU5WQUxJRF9PUEVSQVRJT04pO2lmKCFlLmxvY2FsJiZiLnJlbW90ZVN0cmVhbXMuaGFzT3duUHJvcGVydHkoZS5nZXRJZCgpKSlpZihlLmhhc0F1ZGlvKCl8fGUuaGFzVmlkZW8oKXx8ZS5oYXNTY3JlZW4oKSl7dmFyIHA9Yi5nZW5lcmF0ZVAyUElkKCk7Yi5wMnBzLnNldChwLGUpLGUucDJwSWQ9cCxlLnBjPWVlKHtjYWxsYmFjazpmdW5jdGlvbih0KXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFNEUCBleGNoYW5nZSBpbiBzdWJzY3JpYmUgOiBzZW5kIG9mZmVyIC0tICBcIiksSlNPTi5wYXJzZSh0KSk7dmFyIGE9e3N0cmVhbV9pZDplLmdldElkKCksYXVkaW86IWUuc3Vic2NyaWJlT3B0aW9uc3x8ZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHZpZGVvOiFlLnN1YnNjcmliZU9wdGlvbnN8fGUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyxjb2RlYzpiLmNvZGVjLHAycF9pZDpwLHNkcDp0LHRjYzpPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiU1VCU0NSSUJFX1RDQ1wiKSxleHRlbmQ6T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlNVQl9FWFRFTkRcIil9O2IubWFrZVJlcXVlc3Qoe190eXBlOlwic3Vic2NyaWJlXCIsX21lc3NhZ2U6YX0sZnVuY3Rpb24odCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTRFAgZXhjaGFuZ2UgaW4gc3Vic2NyaWJlIDogcmVjZWl2ZSBhbnN3ZXIgLS0gIFwiKSxKU09OLnBhcnNlKHQuc2RwKSksZS5wYy5wcm9jZXNzU2lnbmFsaW5nTWVzc2FnZSh0LnNkcCl9LGZ1bmN0aW9uKHQsYSl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTdWJzY3JpYmUgcmVtb3RlIHN0cmVhbSBGYWlsZWQ6IFwiKS5jb25jYXQodCxcIiwgY2xvc2luZyBzdHJlYW0gXCIpLGUuZ2V0SWQoKSxhKSxzLmIuc3Vic2NyaWJlKGIuam9pbkluZm8uc2lkLHtsdHM6aSxzdWNjOiExLHZpZGVvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLnZpZGVvLGF1ZGlvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHBlZXJpZDplLmdldElkKCksZWM6dH0pLFwiVElNRU9VVFwiIT10JiYoYi5wcm9jZXNzU3Vic2NyaWJlRmFpbHVyZShlKSxuJiZuKHQpKX0pfSxub3AycDohMCxhdWRpbzohMCx2aWRlbzohMCxzY3JlZW46ZS5oYXNTY3JlZW4oKSxpc1N1YnNjcmliZXI6ITAsc3R1blNlcnZlclVybDpiLnN0dW5TZXJ2ZXJVcmwsdHVyblNlcnZlcjpiLmpvaW5JbmZvLnR1cm5TZXJ2ZXIsaXNWaWRlb011dGU6ZS51c2VyTXV0ZVZpZGVvLGlzQXVkaW9NdXRlOmUudXNlck11dGVBdWRpbyx1aWQ6ZS5nZXRJZCgpLGNsaWVudElkOmIuY2xpZW50SWR9KSxlLnBjLm9uYWRkc3RyZWFtPWZ1bmN0aW9uKHQsbil7aWYoZS5fb25BdWRpb1VubXV0ZT1mdW5jdGlvbigpe2IubWFrZVJlcG9ydChhKHthY3Rpb246XCJ1bm11dGVfcmVtb3RlX2F1ZGlvXCIsc3RyZWFtX2lkOmUuZ2V0SWQoKX0pLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30pfSxlLl9vbkF1ZGlvTXV0ZT1mdW5jdGlvbigpe2IubWFrZVJlcG9ydChhKHthY3Rpb246XCJtdXRlX3JlbW90ZV9hdWRpb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KX0sZS5fb25WaWRlb1VubXV0ZT1mdW5jdGlvbigpe2IubWFrZVJlcG9ydChhKHthY3Rpb246XCJ1bm11dGVfcmVtb3RlX3ZpZGVvXCIsc3RyZWFtX2lkOmUuZ2V0SWQoKX0pLGZ1bmN0aW9uKCl7fSxmdW5jdGlvbigpe30pfSxlLl9vblZpZGVvTXV0ZT1mdW5jdGlvbigpe2IubWFrZVJlcG9ydChhKHthY3Rpb246XCJtdXRlX3JlbW90ZV92aWRlb1wiLHN0cmVhbV9pZDplLmdldElkKCl9KSxmdW5jdGlvbigpe30sZnVuY3Rpb24oKXt9KX0sXCJvbnRyYWNrXCI9PT1uJiZcInZpZGVvXCI9PT10LnRyYWNrLmtpbmR8fFwib25hZGRzdHJlYW1cIj09PW4pe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZW1vdGUgc3RyZWFtIHN1YnNjcmliZWQgd2l0aCB1aWQgXCIpLGUuZ2V0SWQoKSk7dmFyIGk9Yi5yZW1vdGVTdHJlYW1zW2UuZ2V0SWQoKV07aWYoYi5yZW1vdGVTdHJlYW1zW2UuZ2V0SWQoKV0uc3RyZWFtPVwib25hZGRzdHJlYW1cIj09PW4/dC5zdHJlYW06dC5zdHJlYW1zWzBdLGIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldLmhhc1ZpZGVvKCkpe2lmKE9iamVjdChtLmlzRmlyZUZveCkoKXx8T2JqZWN0KG0uaXNTYWZhcmkpKCkpe3ZhciByPWIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldLnN0cmVhbTtPYmplY3QobmUudnNSZXNIYWNrKShyLGZ1bmN0aW9uKHQsbil7ZS52aWRlb1dpZHRoPXQsZS52aWRlb0hlaWdodD1ufSxmdW5jdGlvbihlKXtyZXR1cm4gby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHZzUmVzSGFjayBmYWlsZWQ6IFwiKStlKX0pfX1lbHNle3ZhciBzPWIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldO3MucGVlck11dGVWaWRlbz0hMCxiLl9hZGp1c3RQQ011dGVTdGF0dXMocyl9aSYmaS5pc1BsYXlpbmcoKSYmaS5lbGVtZW50SUQmJihvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFJlbG9hZCBQbGF5ZXIgXCIpLmNvbmNhdChpLmVsZW1lbnRJRCxcIiBTdHJlYW1JZCBcIikuY29uY2F0KGkuZ2V0SWQoKSkpLGUuYXVkaW9PdXRwdXQ9aS5hdWRpb091dHB1dCxpLnN0b3AoKSxlLnBsYXkoaS5lbGVtZW50SUQsaS5wbGF5T3B0aW9ucykpLGRlbGV0ZSBlLmF1ZGlvTGV2ZWxIZWxwZXI7dmFyIGM9dSh7dHlwZTpcInN0cmVhbS1zdWJzY3JpYmVkXCIsc3RyZWFtOmIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldfSk7Yi5kaXNwYXRjaEV2ZW50KGMpfX0sY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCldKSxiLnRpbWVyc1tlLmdldElkKCldPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU1wiKSl7dmFyIHQ9MDtlJiZlLnBjJiZlLnBjLmdldFN0YXRzJiZlLnBjLmdldFN0YXRzUmF0ZShmdW5jdGlvbihuKXtuLmZvckVhY2goZnVuY3Rpb24obil7aWYobiYmbi5pZCl7aWYoL19zZW5kJC8udGVzdChuLmlkKXx8L150aW1lJC8udGVzdChuLmlkKXx8L15id2Vmb3J2aWRlbyQvLnRlc3Qobi5pZCkpcmV0dXJuOy0xPT09bi5pZC5pbmRleE9mKFwiaW5ib3VuZF9ydHBcIikmJi0xPT09bi5pZC5pbmRleE9mKFwiaW5ib3VuZC1ydHBcIil8fFwidmlkZW9cIiE9PW4ubWVkaWFUeXBlfHwobi5nb29nRnJhbWVXaWR0aFJlY2VpdmVkPWUudmlkZW9XaWR0aCtcIlwiLG4uZ29vZ0ZyYW1lSGVpZ2h0UmVjZWl2ZWQ9ZS52aWRlb0hlaWdodCtcIlwiKTt2YXIgaT0yMDAqdDt0Kys7dmFyIGE9ZS5nZXRJZCgpO3NldFRpbWVvdXQoZnVuY3Rpb24oKXt2YXIgZT1iLnNvY2tldCYmYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKSYmRGF0ZS5ub3coKS1iLnNvY2tldC5nZXRMYXN0TXNnVGltZSgpO2U+T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU19USU1FT1VUXCIpP28uZGVmYXVsdC5kZWJ1ZyhcIlN1YnNjcmliZVN0YXRzIHJlcG9ydCBibG9ja2VkIGJ5IFJFUE9SVF9TVEFUU19USU1FT1VUIFwiLmNvbmNhdChlKSk6Yi5tYWtlUmVwb3J0KHYoYSxuKSl9LGkpfWVsc2U7fSl9KX19LDNlMyksY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCkrXCJfUmVsYXRlZFN0YXRzXCJdKSxiLnRpbWVyc1tlLmdldElkKCkrXCJfUmVsYXRlZFN0YXRzXCJdPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlJFUE9SVF9TVEFUU1wiKSYmZSYmZS5wYyl7dmFyIHQ9Yi5zb2NrZXQmJmIuc29ja2V0LmdldExhc3RNc2dUaW1lKCkmJkRhdGUubm93KCktYi5zb2NrZXQuZ2V0TGFzdE1zZ1RpbWUoKTtpZih0Pk9iamVjdChyLmdldFBhcmFtZXRlcikoXCJSRVBPUlRfU1RBVFNfVElNRU9VVFwiKSlyZXR1cm4gdm9pZCBvLmRlZmF1bHQuZGVidWcoXCJTdWJzY3JpYmVSZWxhdGVkU3RhdHMgcmVwb3J0IGJsb2NrZWQgYnkgUkVQT1JUX1NUQVRTX1RJTUVPVVQgXCIuY29uY2F0KHQpKTtlLnBjLmdldFZpZGVvUmVsYXRlZFN0YXRzJiZlLnBjLmdldFZpZGVvUmVsYXRlZFN0YXRzKGZ1bmN0aW9uKHQpe2IubWFrZVJlcG9ydChkKGUuZ2V0SWQoKSx0KSl9KSxlLnBjLmdldEF1ZGlvUmVsYXRlZFN0YXRzJiZlLnBjLmdldEF1ZGlvUmVsYXRlZFN0YXRzKGZ1bmN0aW9uKHQpe2IubWFrZVJlcG9ydChkKGUuZ2V0SWQoKSx0KSl9KX19LDFlMyksYi5hdWRpb0xldmVsW2UuZ2V0SWQoKV09MCxjbGVhckludGVydmFsKGIudGltZXJzW2UuZ2V0SWQoKStcImF1ZGlvXCJdKSxiLnRpbWVyc1tlLmdldElkKCkrXCJhdWRpb1wiXT1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2IuaGFzTGlzdGVuZXJzKFwiYWN0aXZlLXNwZWFrZXJcIikmJmUmJmUucGMmJlwiZXN0YWJsaXNoZWRcIj09PWUucGMuc3RhdGUmJmUucGMuZ2V0U3RhdHMmJmUucGMuZ2V0U3RhdHMoZnVuY3Rpb24odCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKFwiYXVkaW9cIj09PXQubWVkaWFUeXBlKXtpZih0LmF1ZGlvT3V0cHV0TGV2ZWw+NWUzKWZvcih2YXIgbiBpbiBiLmF1ZGlvTGV2ZWxbZS5nZXRJZCgpXTwyMCYmKGIuYXVkaW9MZXZlbFtlLmdldElkKCldKz0xKSxiLmF1ZGlvTGV2ZWwpbiE9PVwiXCIrZS5nZXRJZCgpJiZiLmF1ZGlvTGV2ZWxbbl0+MCYmKGIuYXVkaW9MZXZlbFtuXS09MSk7dmFyIGk9T2JqZWN0LmtleXMoYi5hdWRpb0xldmVsKS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIuYXVkaW9MZXZlbFt0XS1iLmF1ZGlvTGV2ZWxbZV19KTtpZihiLmFjdGl2ZVNwZWFrZXIhPT1pWzBdKXt2YXIgYT1sKHt0eXBlOlwiYWN0aXZlLXNwZWFrZXJcIix1aWQ6aVswXX0pO2IuZGlzcGF0Y2hFdmVudChhKSxiLmFjdGl2ZVNwZWFrZXI9aVswXSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVwZGF0ZSBhY3RpdmUgc3BlYWtlcjogXCIpLmNvbmNhdChiLmFjdGl2ZVNwZWFrZXIpKX19fSl9LDUwKX0sNTApLGUucGMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oYSl7aWYoXCJmYWlsZWRcIj09PWEpbnVsbCE9Yi50aW1lcnNbZS5nZXRJZCgpXSYmKGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpXSksY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCldK1wiYXVkaW9cIikpLG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU3Vic2NyaWJlciBjb25uZWN0aW9uIGlzIGxvc3QgLS0gc3RyZWFtSWQ6IFwiKS5jb25jYXQoZS5nZXRJZCgpLFwiLCBwMnBJZDogXCIpLmNvbmNhdChwKSksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzdWJzY3JpYmUgcDJwIGZhaWxlZDogXCIpLGIucDJwcyksY3x8KGM9ITAsbiYmbihWLlBFRVJDT05ORUNUSU9OX0ZBSUxFRCkscy5iLnN1YnNjcmliZShiLmpvaW5JbmZvLnNpZCx7bHRzOmksc3VjYzohMSx2aWRlbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyxhdWRpbzplLnN1YnNjcmliZU9wdGlvbnMmJmUuc3Vic2NyaWJlT3B0aW9ucy5hdWRpbyxwZWVyaWQ6ZS5nZXRJZCgpLGVjOlYuUEVFUkNPTk5FQ1RJT05fRkFJTEVEfSkpLGIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldJiZiLnAycHMuaGFzKHApJiYoYi5wMnBzLmRlbGV0ZShwKSxiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcInN1YlAyUExvc3RcIixzdHJlYW06ZX0pKSk7ZWxzZSBpZihcImNvbm5lY3RlZFwiPT09YSYmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc3Vic2NyaWJlIHAycCBjb25uZWN0ZWQ6IFwiKSxiLnAycHMpLCFjKSl7Yz0hMCxzLmIuc3Vic2NyaWJlKGIuam9pbkluZm8uc2lkLHtsdHM6aSxzdWNjOiEwLHZpZGVvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLnZpZGVvLGF1ZGlvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHBlZXJpZDplLmdldElkKCksZWM6bnVsbH0pLGIuX2FkanVzdFBDTXV0ZVN0YXR1cyhlKTt2YXIgcj0hMSxkPXNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5wYz9lLnBjLmdldFN0YXRzKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbih0KXstMSE9PXQuaWQuaW5kZXhPZihcInJlY3ZcIikmJlwiYXVkaW9cIj09PXQubWVkaWFUeXBlJiYocGFyc2VJbnQodC5nb29nRGVjb2RpbmdOb3JtYWwpPjB8fHBhcnNlSW50KHQuYXVkaW9PdXRwdXRMZXZlbCk+MCkmJihyfHwocj0hMCxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJmaXJzdC1hdWRpby1mcmFtZS1kZWNvZGVcIixzdHJlYW06ZX0pLGNsZWFySW50ZXJ2YWwoZCkscy5iLnJlcG9ydEFwaUludm9rZShiLmpvaW5JbmZvLnNpZCx7bmFtZTpcImZpcnN0QXVkaW9EZWNvZGVcIn0pKG51bGwse2VsYXBzZTpEYXRlLm5vdygpLWUuc3Vic2NyaWJlTFRTfSkpKX0pfSwxMDApOmNsZWFySW50ZXJ2YWwoZCl9LDEwMCksdT0hMSxmPXNldEludGVydmFsKGZ1bmN0aW9uKCl7ZS5wYz9lLnBjLmdldFN0YXRzKGZ1bmN0aW9uKHQpe3QuZm9yRWFjaChmdW5jdGlvbih0KXstMT09PXQuaWQuaW5kZXhPZihcInJlY3ZcIikmJi0xPT09dC5pZC5pbmRleE9mKFwiaW5ib3VuZF9ydHBcIikmJi0xPT09dC5pZC5pbmRleE9mKFwiaW5ib3VuZC1ydHBcIikmJi0xPT09dC5pZC5pbmRleE9mKFwiSW5ib3VuZFJUUFwiKXx8XCJ2aWRlb1wiPT09dC5tZWRpYVR5cGUmJih0LmZyYW1lc0RlY29kZWQ+MHx8dC5nb29nRnJhbWVzRGVjb2RlZD4wKSYmKHV8fCh1PSEwLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImZpcnN0LXZpZGVvLWZyYW1lLWRlY29kZVwiLHN0cmVhbTplfSksY2xlYXJJbnRlcnZhbChmKSxlLmZpcnN0RnJhbWVUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpLWUuc3Vic2NyaWJlTFRTLHMuYi5maXJzdFJlbW90ZUZyYW1lKGIuam9pbkluZm8uc2lkLHtsdHM6KG5ldyBEYXRlKS5nZXRUaW1lKCkscGVlcmlkOmUuZ2V0SWQoKSxzdWNjOiEwLHdpZHRoOit0Lmdvb2dGcmFtZVdpZHRoUmVjZWl2ZWQsaGVpZ2h0Oit0Lmdvb2dGcmFtZUhlaWdodFJlY2VpdmVkfSkpKX0pfSwxMDApOmNsZWFySW50ZXJ2YWwoZil9LDEwMCk7cmV0dXJuIGUuc2lkPWIuam9pbkluZm8uc2lkLHQmJnQoKX19fWVsc2Ugby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIHJlbW90ZSBzdHJlYW1cIikpLGN8fChjPSEwLG4mJm4oVi5JTlZBTElEX1JFTU9URV9TVFJFQU0pLHMuYi5zdWJzY3JpYmUoYi5qb2luSW5mby5zaWQse2x0czppLHN1Y2M6ITEsdmlkZW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMudmlkZW8sYXVkaW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMuYXVkaW8scGVlcmlkOmUuZ2V0SWQoKSxlYzpWLklOVkFMSURfUkVNT1RFX1NUUkVBTX0pKTtlbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gTm8gc3VjaCByZW1vdGUgc3RyZWFtXCIpKSxjfHwoYz0hMCxuJiZuKFYuTk9fU1VDSF9SRU1PVEVfU1RSRUFNKSxzLmIuc3Vic2NyaWJlKGIuam9pbkluZm8uc2lkLHtsdHM6aSxzdWNjOiExLHZpZGVvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLnZpZGVvLGF1ZGlvOmUuc3Vic2NyaWJlT3B0aW9ucyYmZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHBlZXJpZDplLmdldElkKCksZWM6Vi5OT19TVUNIX1JFTU9URV9TVFJFQU19KSl9LGIuc3Vic2NyaWJlQ2hhbmdlPWZ1bmN0aW9uKGUsdCxuKXt2YXIgaT1EYXRlLm5vdygpO28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBHYXRld2F5Y2xpZW50IFwiKS5jb25jYXQoYi51aWQsXCIgU3Vic2NyaWJlQ2hhbmdlIFwiKS5jb25jYXQoZS5nZXRJZCgpLFwiOiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGUuc3Vic2NyaWJlT3B0aW9ucykpKSxiLl9hZGp1c3RQQ011dGVTdGF0dXMoZSk7dmFyIGE9e3N0cmVhbV9pZDplLmdldElkKCksYXVkaW86ZS5zdWJzY3JpYmVPcHRpb25zLmF1ZGlvLHZpZGVvOmUuc3Vic2NyaWJlT3B0aW9ucy52aWRlb307Yi5tYWtlUmVxdWVzdCh7X3R5cGU6XCJzdWJzY3JpYmVfY2hhbmdlXCIsX21lc3NhZ2U6YX0sZnVuY3Rpb24obil7dmFyIGE9dSh7dHlwZTpcInN0cmVhbS1zdWJzY3JpYmUtY2hhbmdlZFwiLHN0cmVhbTpiLnJlbW90ZVN0cmVhbXNbZS5nZXRJZCgpXX0pO3MuYi5zdWJzY3JpYmUoYi5qb2luSW5mby5zaWQse2x0czppLHN1Y2M6ITAsdmlkZW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMudmlkZW8sYXVkaW86ZS5zdWJzY3JpYmVPcHRpb25zJiZlLnN1YnNjcmliZU9wdGlvbnMuYXVkaW8scGVlcmlkOmUuZ2V0SWQoKSxlYzpudWxsfSksYi5kaXNwYXRjaEV2ZW50KGEpLHQmJnQoKX0sZnVuY3Rpb24odCxpKXtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFN1YnNjcmliZSBDaGFuZ2UgRmFpbGVkIFwiKS5jb25jYXQoZS5nZXRJZCgpKSx0LGkpLG4mJm4odCxpKX0pfSxiLnByb2Nlc3NQdWJsaXNoRmFpbHVyZT1mdW5jdGlvbihlKXtlLnB1Ymxpc2hMVFM9bnVsbCxlLnAycElkJiZiLnAycHMuZ2V0KGUucDJwSWQpPT09ZSYmYi5wMnBzLmRlbGV0ZShlLnAycElkKSxiLmxvY2FsU3RyZWFtc1tlLmdldFVzZXJJZCgpXT09PWUmJmRlbGV0ZSBiLmxvY2FsU3RyZWFtc1tlLmdldFVzZXJJZCgpXSxiLmxvY2FsU3RyZWFtc1tlLmdldElkKCldPT09ZSYmZGVsZXRlIGIubG9jYWxTdHJlYW1zW2UuZ2V0SWQoKV0sZS5wYyYmKGUucGMucHJvY2Vzc1NpZ25hbGluZ01lc3NhZ2U9ZnVuY3Rpb24oKXt9LGUucGMub25pY2Vjb25uZWN0aW9uc3RhdGVjaGFuZ2U9ZnVuY3Rpb24oKXt9LGUucGMuY2xvc2UoKSxkZWxldGUgZS5wYyksZGVsZXRlIGUub25DbG9zZSxkZWxldGUgZS5fb25BdWRpb1VubXV0ZSxkZWxldGUgZS5fb25WaWRlb1VubXV0ZSxkZWxldGUgZS5fb25BdWRpb011dGUsZGVsZXRlIGUuX29uVmlkZW9NdXRlLGRlbGV0ZSBlLl9vbkF1ZGlvVW5tdXRlfSxiLnByb2Nlc3NTdWJzY3JpYmVGYWlsdXJlPWZ1bmN0aW9uKGUpe2UucDJwSWQmJmIucDJwcy5nZXQoZS5wMnBJZCk9PT1lJiZiLnAycHMuZGVsZXRlKGUucDJwSWQpLGIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldPT09ZSYmZGVsZXRlIGIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldLGIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldPT09ZSYmZGVsZXRlIGIucmVtb3RlU3RyZWFtc1tlLmdldElkKCldLGUucGMmJihlLnBjLm9uYWRkc3RyZWFtPWZ1bmN0aW9uKCl7fSxlLnBjLnByb2Nlc3NTaWduYWxpbmdNZXNzYWdlPWZ1bmN0aW9uKCl7fSxlLnBjLm9uaWNlY29ubmVjdGlvbnN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7fSxlLnBjLmNsb3NlKCksZGVsZXRlIGUucGMpLGRlbGV0ZSBlLm9uQ2xvc2UsZGVsZXRlIGUuX29uQXVkaW9Vbm11dGUsZGVsZXRlIGUuX29uVmlkZW9Vbm11dGUsZGVsZXRlIGUuX29uQXVkaW9NdXRlLGRlbGV0ZSBlLl9vblZpZGVvTXV0ZSxkZWxldGUgZS5fb25BdWRpb1VubXV0ZX0sYi5fYWRqdXN0UENNdXRlU3RhdHVzPWZ1bmN0aW9uKGUpeyFlLmxvY2FsJiZlLnBjJiZlLnBjLnBlZXJDb25uZWN0aW9uLmdldFJlY2VpdmVycyYmZS5wYy5wZWVyQ29ubmVjdGlvbi5nZXRSZWNlaXZlcnMoKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe2lmKHQmJnQudHJhY2smJlwiYXVkaW9cIj09PXQudHJhY2sua2luZCl7dmFyIG49IWUudXNlck11dGVBdWRpbyYmIWUucGVlck11dGVBdWRpbztlLnN1YnNjcmliZU9wdGlvbnMmJiFlLnN1YnNjcmliZU9wdGlvbnMuYXVkaW8mJihuPSExKSx0LnRyYWNrLmVuYWJsZWQ9ISFufWVsc2UgaWYodCYmdC50cmFjayYmXCJ2aWRlb1wiPT09dC50cmFjay5raW5kKXt2YXIgaT0hZS51c2VyTXV0ZVZpZGVvJiYhZS5wZWVyTXV0ZVZpZGVvO2Uuc3Vic2NyaWJlT3B0aW9ucyYmIWUuc3Vic2NyaWJlT3B0aW9ucy52aWRlbyYmKGk9ITEpLHQudHJhY2suZW5hYmxlZD0hIWl9fSl9LGIudW5zdWJzY3JpYmU9ZnVuY3Rpb24oZSx0LG4pe2lmKFwib2JqZWN0XCIhPT1IZSgpKGUpfHxudWxsPT09ZSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIHJlbW90ZSBzdHJlYW1cIikpLHZvaWQgUihuLFYuSU5WQUxJRF9SRU1PVEVfU1RSRUFNKTtpZihiLnN0YXRlIT09RSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVc2VyIGlzIG5vdCBpbiB0aGUgc2Vzc2lvblwiKSksdm9pZCBSKG4sVi5JTlZBTElEX09QRVJBVElPTik7aWYobnVsbCE9Yi50aW1lcnNbZS5nZXRJZCgpXSYmKGNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZS5nZXRJZCgpXSksY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLmdldElkKCldK1wiYXVkaW9cIikpLG51bGwhPWIuYXVkaW9MZXZlbFtlLmdldElkKCldJiZkZWxldGUgYi5hdWRpb0xldmVsW2UuZ2V0SWQoKV0sbnVsbCE9Yi50aW1lcl9jb3VudGVyW2UuZ2V0SWQoKV0mJmRlbGV0ZSBiLnRpbWVyX2NvdW50ZXJbZS5nZXRJZCgpXSxiLnJlbW90ZVN0cmVhbXMuaGFzT3duUHJvcGVydHkoZS5nZXRJZCgpKSl7aWYoIWIuc29ja2V0KXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgaXMgbm90IGluIHRoZSBzZXNzaW9uXCIpKSx2b2lkIFIobixWLklOVkFMSURfT1BFUkFUSU9OKTtpZihlLmxvY2FsKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEludmFsaWQgcmVtb3RlIHN0cmVhbVwiKSksdm9pZCBSKG4sVi5JTlZBTElEX1JFTU9URV9TVFJFQU0pO2UuY2xvc2UoKTt2YXIgaT17c3RyZWFtX2lkOmUuZ2V0SWQoKX07Yi5tYWtlUmVxdWVzdCh7X3R5cGU6XCJ1bnN1YnNjcmliZVwiLF9tZXNzYWdlOml9KSx2b2lkIDAhPT1lLnBjJiYoZS5wYy5jbG9zZSgpLGUucGM9dm9pZCAwKSxlLm9uQ2xvc2U9dm9pZCAwLGUuX29uQXVkaW9NdXRlPXZvaWQgMCxlLl9vbkF1ZGlvVW51dGU9dm9pZCAwLGUuX29uVmlkZW9NdXRlPXZvaWQgMCxlLl9vblZpZGVvVW5tdXRlPXZvaWQgMCxkZWxldGUgZS5zdWJzY3JpYmVPcHRpb25zLGIucDJwcy5kZWxldGUoZS5wMnBJZCksby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVuc3Vic2NyaWJlIHN0cmVhbSBzdWNjZXNzXCIpKSx0JiZ0KCl9ZWxzZSBSKG4sVi5OT19TVUNIX1JFTU9URV9TVFJFQU0pfSxiLnNldFJlbW90ZVZpZGVvU3RyZWFtVHlwZT1mdW5jdGlvbihlLHQpe2lmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU3dpdGNoaW5nIHJlbW90ZSB2aWRlbyBzdHJlYW0gXCIpLmNvbmNhdChlLmdldElkKCksXCIgdG8gXCIpLmNvbmNhdCh0KSksXCJvYmplY3RcIj09PUhlKCkoZSkmJm51bGwhPT1lKWlmKGIuc3RhdGU9PT1FKXtpZighZS5sb2NhbCl7c3dpdGNoKHQpe2Nhc2UgYi5yZW1vdGVWaWRlb1N0cmVhbVR5cGVzLlJFTU9URV9WSURFT19TVFJFQU1fSElHSDpjYXNlIGIucmVtb3RlVmlkZW9TdHJlYW1UeXBlcy5SRU1PVEVfVklERU9fU1RSRUFNX0xPVzpjYXNlIGIucmVtb3RlVmlkZW9TdHJlYW1UeXBlcy5SRU1PVEVfVklERU9fU1RSRUFNX01FRElVTTpicmVhaztkZWZhdWx0OnJldHVybn12YXIgbj17c3RyZWFtX2lkOmUuZ2V0SWQoKSxzdHJlYW1fdHlwZTp0fTtiLm1ha2VSZXF1ZXN0KHtfdHlwZTpcInN3aXRjaF92aWRlb19zdHJlYW1cIixfbWVzc2FnZTpufSxmdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIlN3aXRjaFZpZGVvU3RyZWFtIFN1Y2Nlc3MgXCIuY29uY2F0KG4uc3RyZWFtX2lkLFwiIFwiKS5jb25jYXQobi5zdHJlYW1fdHlwZSkpfSxmdW5jdGlvbihlLHQpe28uZGVmYXVsdC5lcnJvcihcIlN3aXRjaFZpZGVvU3RyZWFtIEVycm9yIFwiLmNvbmNhdChlLFwiIFwiKS5jb25jYXQobi5zdHJlYW1faWQsXCIgXCIpLmNvbmNhdChuLnN0cmVhbV90eXBlKSx0KX0pfX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVXNlciBpcyBub3QgaW4gdGhlIHNlc3Npb25cIikpO2Vsc2Ugby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIHJlbW90ZSBzdHJlYW1cIikpfSxiLnJlbmV3VG9rZW49ZnVuY3Rpb24oZSx0LG4pe2U/Yi5rZXk/Yi5zdGF0ZSE9PUU/KG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gQ2xpZW50IGlzIG5vdCBjb25uZWN0ZWQuIFRyeWluZyB0byByZWpvaW5cIikpLGIua2V5PWUsYi5yZWpvaW4oKSx0JiZ0KCkpOihvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHJlbmV3VG9rZW4gZnJvbSBcIikuY29uY2F0KGIua2V5LFwiIHRvIFwiKS5jb25jYXQoZSkpLGIubWFrZVJlcXVlc3Qoe190eXBlOlwicmVuZXdfdG9rZW5cIixfbWVzc2FnZTp7dG9rZW46ZX19LHQsbikpOihvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIENsaWVudCBpcyBwcmV2aW91c2x5IGpvaW5lZCB3aXRob3V0IHRva2VuXCIpKSxuJiZuKFYuSU5WQUxJRF9QQVJBTUVURVIpKTooby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBJbnZhbGlkIFRva2VuIFwiKS5jb25jYXQoZSkpLG4mJm4oVi5JTlZBTElEX1BBUkFNRVRFUikpfSxiLnNldFN0cmVhbUZhbGxiYWNrT3B0aW9uPWZ1bmN0aW9uKGUsdCl7aWYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTZXQgc3RyZWFtIGZhbGxiYWNrIG9wdGlvbiBcIikuY29uY2F0KGUuZ2V0SWQoKSxcIiB0byBcIikuY29uY2F0KHQpKSxcIm9iamVjdFwiPT09SGUoKShlKSYmbnVsbCE9PWUpaWYoYi5zdGF0ZT09PUUpe2lmKCFlLmxvY2FsKXtzd2l0Y2godCl7Y2FzZSBiLnN0cmVhbUZhbGxiYWNrVHlwZXMuU1RSRUFNX0ZBTExCQUNLX09QVElPTl9ESVNBQkxFRDpjYXNlIGIuc3RyZWFtRmFsbGJhY2tUeXBlcy5TVFJFQU1fRkFMTEJBQ0tfT1BUSU9OX1ZJREVPX1NUUkVBTV9MT1c6Y2FzZSBiLnN0cmVhbUZhbGxiYWNrVHlwZXMuU1RSRUFNX0ZBTExCQUNLX09QVElPTl9BVURJT19PTkxZOmJyZWFrO2RlZmF1bHQ6cmV0dXJufXZhciBuPXtzdHJlYW1faWQ6ZS5nZXRJZCgpLGZhbGxiYWNrX3R5cGU6dH07Yi5tYWtlUmVxdWVzdCh7X3R5cGU6XCJzZXRfZmFsbGJhY2tfb3B0aW9uXCIsX21lc3NhZ2U6bn0sZnVuY3Rpb24oKXtvLmRlZmF1bHQuZGVidWcoXCJTZXRTdHJlYW1GYWxsYmFja09wdGlvbiBzdWNjZXNzIFwiLmNvbmNhdChuLnN0cmVhbV9pZCxcIiBcIikuY29uY2F0KHQpKX0sZnVuY3Rpb24oZSxpKXtvLmRlZmF1bHQuZXJyb3IoXCJGYWlsZWQgdG8gU2V0U3RyZWFtRmFsbGJhY2tPcHRpb24gXCIuY29uY2F0KG4uc3RyZWFtX2lkLFwiIFwiKS5jb25jYXQodCxcIiBcIikuY29uY2F0KGUpLGkpfSl9fWVsc2Ugby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBVc2VyIGlzIG5vdCBpbiB0aGUgc2Vzc2lvblwiKSk7ZWxzZSBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEludmFsaWQgcmVtb3RlIHN0cmVhbVwiKSl9LGIuZW5hYmxlQXVkaW9Wb2x1bWVJbmRpY2F0b3I9ZnVuY3Rpb24oZSx0KXtiLmF1ZGlvVm9sdW1lSW5kaWNhdGlvbi5lbmFibGVkPSEwLGIuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uLmludGVydmFsPWUsYi5hdWRpb1ZvbHVtZUluZGljYXRpb24uc21vb3RoPXQsYi5yZXNldEF1ZGlvVm9sdW1lSW5kaWNhdGlvbigpfSxiLnJlc2V0QXVkaW9Wb2x1bWVJbmRpY2F0aW9uPWZ1bmN0aW9uKCl7aWYoY2xlYXJJbnRlcnZhbChiLnRpbWVycy5hdWRpb1ZvbHVtZUluZGljYXRpb24pLGNsZWFySW50ZXJ2YWwoYi50aW1lcnMuYXVkaW9Wb2x1bWVTYW1wbGluZyksYi5hdWRpb1ZvbHVtZUluZGljYXRpb24uZW5hYmxlZCYmYi5hdWRpb1ZvbHVtZUluZGljYXRpb24uaW50ZXJ2YWwpe3ZhciBlPU1hdGguZmxvb3IoMWUzKmIuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uLnNtb290aC8xMDApO2NsZWFySW50ZXJ2YWwoYi50aW1lcnMuYXVkaW9Wb2x1bWVTYW1wbGluZyksYi50aW1lcnMuYXVkaW9Wb2x1bWVTYW1wbGluZz1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2IuYXVkaW9Wb2x1bWVTYW1wbGluZ3x8KGIuYXVkaW9Wb2x1bWVTYW1wbGluZz17fSk7dmFyIHQ9e307Zm9yKHZhciBuIGluIGIucmVtb3RlU3RyZWFtcyl7dmFyIGk9Yi5yZW1vdGVTdHJlYW1zW25dO2lmKGkuc3RyZWFtJiZpLmhhc0F1ZGlvKCkpe3ZhciBhPWkuZ2V0QXVkaW9MZXZlbCgpO2E+MCYmYTwxJiYoYSo9MTAwKTt2YXIgcj1iLmF1ZGlvVm9sdW1lU2FtcGxpbmdbbl18fFtdO2ZvcihyLnB1c2goYSk7ci5sZW5ndGg+ZTspci5zaGlmdCgpO3Rbbl09cn19Yi5hdWRpb1ZvbHVtZVNhbXBsaW5nPXR9LDEwMCksY2xlYXJJbnRlcnZhbChiLnRpbWVycy5hdWRpb1ZvbHVtZUluZGljYXRpb24pLGIudGltZXJzLmF1ZGlvVm9sdW1lSW5kaWNhdGlvbj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2lmKGIuc29ja2V0JiZiLnNvY2tldC5zaWduYWwmJmIuc29ja2V0LnNpZ25hbC5jb25uZWN0aW9uJiZiLnNvY2tldC5zaWduYWwuY29ubmVjdGlvbi5yZWFkeVN0YXRlPT09V2ViU29ja2V0Lk9QRU4pe3ZhciBlPVtdO2Zvcih2YXIgdCBpbiBiLnJlbW90ZVN0cmVhbXMpaWYoYi5hdWRpb1ZvbHVtZVNhbXBsaW5nJiZiLmF1ZGlvVm9sdW1lU2FtcGxpbmdbdF0pe3ZhciBuPWIuYXVkaW9Wb2x1bWVTYW1wbGluZ1t0XSxpPTA7bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe2krPWV9KTt2YXIgYT17dWlkOnQsbGV2ZWw6TWF0aC5mbG9vcihpL24ubGVuZ3RoKX07YS5sZXZlbCYmZS5wdXNoKGEpfXZhciByPWUuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLmxldmVsLXQubGV2ZWx9KTtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHZvbHVtZS1pbmRpY2F0b3IgXCIpLEpTT04uc3RyaW5naWZ5KHIpKSxiLmF1ZGlvVm9sdW1lSW5kaWNhdGlvbi5zb3J0ZWRBdWRpb1ZvbHVtZXM9cjt2YXIgcz1sKHt0eXBlOlwidm9sdW1lLWluZGljYXRvclwiLGF0dHI6cn0pO2IuZGlzcGF0Y2hFdmVudChzKX19LGIuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uLmludGVydmFsKX19LGIuY2xvc2VHYXRld2F5PWZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBjbG9zZSBnYXRld2F5XCIpKSxiLnN0YXRlPWgsYi5zb2NrZXQuY2xvc2UoKSxPKCl9LGIuc3RhcnRDaGFubmVsTWVkaWFSZWxheT1mdW5jdGlvbigpe3ZhciBlPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIGUodCl7dmFyIG4saSxhLHI7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZighYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIpe2UubmV4dD0yO2JyZWFrfXRocm93IG5ldyBLZS5DaGFubmVsTWVkaWFFcnJvcihcIlJFTEFZX0FMUkVBRFlfU1RBUlRcIixcIlwiLEtlLkNIQU5ORUxfTUVESUFfUkVMQVlfRVJST1IuUkVMQVlfQUxSRUFEWV9TVEFSVCk7Y2FzZSAyOnJldHVybiBuPWZ1bmN0aW9uKGUpe2IuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNoYW5uZWwtbWVkaWEtcmVsYXktZXZlbnRcIixjb2RlOmV9KX0saT1mdW5jdGlvbihlLHQsbil7ZT09PUtlLkNIQU5ORUxfTUVESUFfUkVMQVlfU1RBVEUuUkVMQVlfU1RBVEVfRkFJTFVSRSYmdD09PUtlLkNIQU5ORUxfTUVESUFfUkVMQVlfRVJST1IuU0VSVkVSX0NPTk5FQ1RJT05fTE9TVCYmKGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyLmRpc3Bvc2UoKSxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcj1udWxsKSxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjaGFubmVsLW1lZGlhLXJlbGF5LXN0YXRlXCIsc3RhdGU6ZSxjb2RlOnQsZGF0YTpufSl9LGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyPW5ldyB6ZS5hKGIuam9pbkluZm8sYi5jbGllbnRJZCksYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIub24oXCJldmVudFwiLG4pLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyLm9uKFwic3RhdGVcIixpKSxlLnByZXY9NyxlLm5leHQ9MTAsYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXIuc3RhcnRDaGFubmVsTWVkaWFSZWxheSh0KTtjYXNlIDEwOmUubmV4dD0yMjticmVhaztjYXNlIDEyOnRocm93IGUucHJldj0xMixlLnQwPWUuY2F0Y2goNyksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzdGFydENoYW5uZWxNZWRpYVJlbGF5IGV4Y2VwdGlvbjogXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlLnQwKSkpLGE9S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURS5SRUxBWV9TVEFURV9GQUlMVVJFLHI9XCJcIixyPWUudDAgaW5zdGFuY2VvZiBLZS5DaGFubmVsTWVkaWFFcnJvcj9cIlNldFNvdXJjZUNoYW5uZWxTdGF0dXNcIj09PWUudDAuZGF0YXx8ZS50MC5kYXRhJiZlLnQwLmRhdGEuc2VydmVyUmVzcG9uc2UmJlwiU2V0U291cmNlQ2hhbm5lbFwiPT09ZS50MC5kYXRhLnNlcnZlclJlc3BvbnNlLmNvbW1hbmQ/XCJGQUlMRURfSk9JTl9TUkNcIjpcIlNldERlc3RDaGFubmVsU3RhdHVzXCI9PT1lLnQwLmRhdGF8fGUudDAuZGF0YSYmZS50MC5kYXRhLnNlcnZlclJlc3BvbnNlJiZcIlNldERlc3RDaGFubmVsXCI9PT1lLnQwLmRhdGEuc2VydmVyUmVzcG9uc2UuY29tbWFuZD9cIkZBSUxFRF9KT0lOX0RFU1RcIjplLnQwLmRhdGEmJmUudDAuZGF0YS5zZXJ2ZXJSZXNwb25zZSYmXCJTdGFydFBhY2tldFRyYW5zZmVyXCI9PT1lLnQwLmRhdGEuc2VydmVyUmVzcG9uc2UuY29tbWFuZD9cIkZBSUxFRF9QQUNLRVRfU0VOVF9UT19ERVNUXCI6ZS50MC5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5SRVFVRVNUX1RJTUVPVVR8fGUudDAubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuV0FJVF9TVEFUVVNfVElNRU9VVD9cIlNFUlZFUl9OT19SRVNQT05TRVwiOmUudDAubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuUkVRVUVTVF9GQUlMRUR8fGUudDAubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuV0FJVF9TVEFUVVNfRVJST1I/XCJTRVJWRVJfRVJST1JfUkVTUE9OU0VcIjplLnQwLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLkFQX1JFUVVFU1RfVElNRU9VVD9cIk5PX1JFU09VUkNFX0FWQUlMQUJMRVwiOmUudDAubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuV1NfQUJPUlR8fGUudDAubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuQVBfUkVRVUVTVF9BQk9SVD9cIk9QRVJBVElPTl9BQk9SVFwiOlwiSU5URVJOQUxfRVJST1JcIjpcIklOVEVSTkFMX0VSUk9SXCIsYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2hhbm5lbC1tZWRpYS1yZWxheS1zdGF0ZVwiLHN0YXRlOmEsY29kZTpLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SW3JdfSksYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXImJihiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5kaXNwb3NlKCksYi5jaGFubmVsTWVkaWFDb25maWc9bnVsbCxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcj1udWxsKSxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjaGFubmVsLW1lZGlhLXJlbGF5LXN0YXRlXCIsc3RhdGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURS5SRUxBWV9TVEFURV9JRExFfSksbmV3IEtlLkNoYW5uZWxNZWRpYUVycm9yKHIsbnVsbCxLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SW3JdKTtjYXNlIDIyOmIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNoYW5uZWwtbWVkaWEtcmVsYXktc3RhdGVcIixzdGF0ZTpLZS5DSEFOTkVMX01FRElBX1JFTEFZX1NUQVRFLlJFTEFZX1NUQVRFX1JVTk5JTkcsY29kZTpLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SLlJFTEFZX09LfSksYi5jaGFubmVsTWVkaWFDb25maWc9dDtjYXNlIDI0OmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUsdGhpcyxbWzcsMTJdXSl9KSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCksYi51cGRhdGVDaGFubmVsTWVkaWFSZWxheT1mdW5jdGlvbigpe3ZhciB0PXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHQobil7dmFyIGksYTtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyKXt0Lm5leHQ9MjticmVha310aHJvdyBuZXcgS2UuQ2hhbm5lbE1lZGlhRXJyb3IoXCJSRUxBWV9OT1RfU1RBUlRcIixudWxsLEtlLkNIQU5ORUxfTUVESUFfUkVMQVlfRVJST1IuUkVMQVlfTk9UX1NUQVJUKTtjYXNlIDI6cmV0dXJuIHQucHJldj0yLHQubmV4dD01LGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyLnVwZGF0ZUNoYW5uZWxNZWRpYVJlbGF5KG4pO2Nhc2UgNTp0Lm5leHQ9MTg7YnJlYWs7Y2FzZSA3OnRocm93IHQucHJldj03LHQudDA9dC5jYXRjaCgyKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHVwZGF0ZUNoYW5uZWxNZWRpYVJlbGF5IGV4Y2VwdGlvbjogXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlKSkpLGk9S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURS5SRUxBWV9TVEFURV9GQUlMVVJFLGE9XCJcIixhPWUgaW5zdGFuY2VvZiBLZS5DaGFubmVsTWVkaWFFcnJvcj9lLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLlJFUVVFU1RfVElNRU9VVHx8ZS5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5XQUlUX1NUQVRVU19USU1FT1VUP1wiU0VSVkVSX05PX1JFU1BPTlNFXCI6ZS5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5SRVFVRVNUX0ZBSUxFRHx8ZS5tZXNzYWdlPT09S2UuQ0hBTk5FTF9NRURJQV9FUlJPUi5XQUlUX1NUQVRVU19FUlJPUj9cIlNFUlZFUl9FUlJPUl9SRVNQT05TRVwiOmUubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuV1NfQUJPUlR8fGUubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuQVBfUkVRVUVTVF9BQk9SVD9cIk9QRVJBVElPTl9BQk9SVFwiOlwiSU5URVJOQUxfRVJST1JcIjpcIklOVEVSTkFMX0VSUk9SXCIsYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2hhbm5lbC1tZWRpYS1yZWxheS1ldmVudFwiLGNvZGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9FVkVOVC5QQUNLRVRfVVBEQVRFX0RFU1RfQ0hBTk5FTF9SRUZVU0VEfSksYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiY2hhbm5lbC1tZWRpYS1yZWxheS1zdGF0ZVwiLHN0YXRlOmksY29kZTpLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SW2FdfSksYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXImJihiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5kaXNwb3NlKCksYi5jaGFubmVsTWVkaWFDb25maWc9bnVsbCxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcj1udWxsKSxiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjaGFubmVsLW1lZGlhLXJlbGF5LXN0YXRlXCIsc3RhdGU6S2UuQ0hBTk5FTF9NRURJQV9SRUxBWV9TVEFURS5SRUxBWV9TVEFURV9JRExFfSksbmV3IEtlLkNoYW5uZWxNZWRpYUVycm9yKGEsbnVsbCxLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SW2FdKTtjYXNlIDE4OmIuY2hhbm5lbE1lZGlhQ29uZmlnPW47Y2FzZSAxOTpjYXNlXCJlbmRcIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMsW1syLDddXSl9KSk7cmV0dXJuIGZ1bmN0aW9uKGUpe3JldHVybiB0LmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCksYi5zdG9wQ2hhbm5lbE1lZGlhUmVsYXk9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gdCgpe3ZhciBuLGk7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDppZihiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcil7dC5uZXh0PTI7YnJlYWt9dGhyb3cgbmV3IEtlLkNoYW5uZWxNZWRpYUVycm9yKFwiUkVMQVlfTk9UX1NUQVJUXCIsbnVsbCxLZS5DSEFOTkVMX01FRElBX1JFTEFZX0VSUk9SLlJFTEFZX05PVF9TVEFSVCk7Y2FzZSAyOnJldHVybiB0LnByZXY9Mix0Lm5leHQ9NSxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlci5zdG9wQ2hhbm5lbE1lZGlhUmVsYXkoKTtjYXNlIDU6dC5uZXh0PTE3O2JyZWFrO2Nhc2UgNzp0aHJvdyB0LnByZXY9Nyx0LnQwPXQuY2F0Y2goMiksby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzdG9wQ2hhbm5lbE1lZGlhUmVsYXkgZXhjZXB0aW9uOiBcIikuY29uY2F0KEpTT04uc3RyaW5naWZ5KGUpKSksbj1LZS5DSEFOTkVMX01FRElBX1JFTEFZX1NUQVRFLlJFTEFZX1NUQVRFX0ZBSUxVUkUsaT1cIlwiLGk9ZSBpbnN0YW5jZW9mIEtlLkNoYW5uZWxNZWRpYUVycm9yP2UubWVzc2FnZT09PUtlLkNIQU5ORUxfTUVESUFfRVJST1IuUkVRVUVTVF9USU1FT1VUfHxlLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLldBSVRfU1RBVFVTX1RJTUVPVVQ/XCJTRVJWRVJfTk9fUkVTUE9OU0VcIjplLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLlJFUVVFU1RfRkFJTEVEfHxlLm1lc3NhZ2U9PT1LZS5DSEFOTkVMX01FRElBX0VSUk9SLldBSVRfU1RBVFVTX0VSUk9SP1wiU0VSVkVSX0VSUk9SX1JFU1BPTlNFXCI6XCJJTlRFUk5BTF9FUlJPUlwiOlwiSU5URVJOQUxfRVJST1JcIixiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJjaGFubmVsLW1lZGlhLXJlbGF5LXN0YXRlXCIsc3RhdGU6bixjb2RlOktlLkNIQU5ORUxfTUVESUFfUkVMQVlfRVJST1JbaV19KSxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlciYmKGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyLmRpc3Bvc2UoKSxiLmNoYW5uZWxNZWRpYUNvbmZpZz1udWxsLGIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyPW51bGwpLGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNoYW5uZWwtbWVkaWEtcmVsYXktc3RhdGVcIixzdGF0ZTpLZS5DSEFOTkVMX01FRElBX1JFTEFZX1NUQVRFLlJFTEFZX1NUQVRFX0lETEV9KSxuZXcgS2UuQ2hhbm5lbE1lZGlhRXJyb3IoaSxudWxsLEtlLkNIQU5ORUxfTUVESUFfUkVMQVlfRVJST1JbaV0pO2Nhc2UgMTc6Yi5jaGFubmVsTWVkaWFDb25maWc9bnVsbCxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcj1udWxsO2Nhc2UgMTk6Y2FzZVwiZW5kXCI6cmV0dXJuIHQuc3RvcCgpfX0sdCx0aGlzLFtbMiw3XV0pfSkpO3ZhciBBPWZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZWNvbm5lY3QgZ2F0ZXdheVwiKSksYi5zdGF0ZT1oLGIuc29ja2V0LmNsb3NlKCksTygpLGIucmVjb25uZWN0TW9kZT1cInJlY292ZXJcIixiLnN0YXRlPV8sQygpfTtiLnJlY292ZXI9QTt2YXIgTz1mdW5jdGlvbigpe2Zvcih2YXIgZSBpbiBiLmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJiZWZvcmUtY2xlYXItY29ubmVjdGlvblwifSksYi50aW1lcnMpYi50aW1lcnMuaGFzT3duUHJvcGVydHkoZSkmJmNsZWFySW50ZXJ2YWwoYi50aW1lcnNbZV0pO2Zvcih2YXIgZSBpbiBiLnJlbW90ZVN0cmVhbXMpaWYoYi5yZW1vdGVTdHJlYW1zLmhhc093blByb3BlcnR5KGUpKXt2YXIgdD1iLnJlbW90ZVN0cmVhbXNbZV0sbj1sKHt0eXBlOlwic3RyZWFtLXJlbW92ZWRcIix1aWQ6dC5nZXRJZCgpLHN0cmVhbTp0fSk7Yi5kaXNwYXRjaEV2ZW50KG4pfWIucDJwcy5jbGVhcigpLEQoKSxrKCksY2xlYXJJbnRlcnZhbChiLnBpbmdUaW1lcil9O2IucmVqb2luPWZ1bmN0aW9uKCl7Yi5zb2NrZXQmJihjbGVhckludGVydmFsKGIucGluZ1RpbWVyKSxiLnNvY2tldC5jbG9zZSgpLGIuc29ja2V0PXZvaWQgMCksYi5zdGF0ZT1fLEMoKX07dmFyIEM9ZnVuY3Rpb24oZSx0KXtiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcInJlam9pbi1zdGFydFwifSkpLGU9ZXx8ZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFVzZXIgXCIpLmNvbmNhdChlLFwiIGlzIHJlLWpvaW5lZCB0byBcIikuY29uY2F0KGIuam9pbkluZm8uY25hbWUpKSxiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcInJlam9pblwifSkpLGIuY2hhbm5lbE1lZGlhQ29uZmlnJiZiLnN0YXJ0Q2hhbm5lbE1lZGlhUmVsYXkoYi5jaGFubmVsTWVkaWFDb25maWcpLnRoZW4oZnVuY3Rpb24oKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHJlc3RhcnRDaGFubmVsTWVkaWFSZWxheSBzdWNjZXNzXCIpKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcmVzdGFydENoYW5uZWxNZWRpYVJlbGF5IGZhaWxlZDogXCIpLmNvbmNhdChKU09OLnN0cmluZ2lmeShlKSkpfSksYi5saXZlU3RyZWFtcyYmYi5saXZlU3RyZWFtcy5zaXplJiZiLmxpdmVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSx0KXtlJiZiLnNldExpdmVUcmFuc2NvZGluZyhiLnRyYW5zY29kaW5nKSxiLnN0YXJ0TGl2ZVN0cmVhbWluZyh0LGUpfSksYi5pbmplY3RMaXZlU3RyZWFtcyYmYi5pbmplY3RMaXZlU3RyZWFtcy5zaXplJiZiLmluamVjdExpdmVTdHJlYW1zLmZvckVhY2goZnVuY3Rpb24oZSx0KXtiLmFkZEluamVjdFN0cmVhbVVybCh0LGUpfSl9LHQ9dHx8ZnVuY3Rpb24oZSl7by5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZS1qb2luIHRvIGNoYW5uZWwgZmFpbGVkIFwiKSxlKSxiLmRpc3BhdGNoRXZlbnQodSh7dHlwZTpcImVycm9yXCIscmVhc29uOmV9KSl9LGIua2V5PygrK2IucmVqb2luQXR0ZW1wdCxiLmpvaW4oYi5qb2luSW5mbyxiLmtleSxlLHQpKTpvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIENvbm5lY3Rpb24gcmVjb3ZlciBmYWlsZWQgW0ludmFsaWQgY2hhbm5lbCBrZXldXCIpKX0sTj1mdW5jdGlvbihlLHQsbil7aWYoYi5vbkNvbm5lY3Q9dCxiLnNvY2tldCl7aWYoYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwicmVjb25uZWN0XCJ9KSxcInJldHJ5XCI9PT1iLnJlY29ubmVjdE1vZGUpby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZXRyeSBjdXJyZW50IGdhdGV3YXlcIikpLGIuc29ja2V0LnJlY29ubmVjdCgpO2Vsc2UgaWYoXCJ0cnlOZXh0XCI9PT1iLnJlY29ubmVjdE1vZGUpby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBUcnkgbmV4dCBnYXRld2F5XCIpKSxiLnNvY2tldC5jb25uZWN0TmV4dCgpO2Vsc2UgaWYoXCJyZWNvdmVyXCI9PT1iLnJlY29ubmVjdE1vZGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmVjb3ZlciBnYXRld2F5XCIpKSxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFRyeSB0byByZWNvbm5lY3QgY2hvb3NlIHNlcnZlciBhbmQgZ2V0IGdhdGV3YXkgbGlzdCBhZ2FpbiBcIikpLGIucmVjb25uZWN0aW5nQ1M9ITA7dmFyIGE9Yi5qb2luSW5mbyYmYi5qb2luSW5mby5zaWQ7ZnQoYi5qb2luSW5mbyxmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHNlc3Npb246ICBcIikuY29uY2F0KGEsXCIgZ2V0IGdhdGV3YXkgbGlzdCBzdWNjZXNzXCIpKSxiLmpvaW5JbmZvLmFwUmVzcG9uc2U9ZS5yZXMsYi5yZWNvbm5lY3RpbmdDUz9iLnNvY2tldC5yZXBsYWNlSG9zdChlLmdhdGV3YXlfYWRkcik6by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBzZXNzaW9uOiAgXCIpLmNvbmNhdChhLFwiIGFscmVhZHkgbGVhdmVcIikpfSl9fWVsc2UgYz1lLmdhdGV3YXlBZGRyLGIuc29ja2V0PWF0KGMse3NpZDpiLmpvaW5JbmZvLnNpZCxjbGllbnRJZDpiLmNsaWVudElkfSksYi5zb2NrZXQub24oXCJzdGFydC1jb25uZWN0aW9uXCIsZnVuY3Rpb24oZSl7Yi50aWNrZXQ9ZSYmZS5tc2cmJmUubXNnLnRpY2tldH0pLGIuc29ja2V0Lm9uKFwib25fdXBsaW5rX3N0YXRzXCIsZnVuY3Rpb24oZSl7dmFyIHQ9e307Zm9yKHZhciBuIGluIGUpdFt5dChuKV09ZVtuXTtpZihiLk91dGdvaW5nQXZhaWxhYmxlQmFuZHdpZHRoPXQudXBsaW5rX2F2YWlsYWJsZV9iYW5kd2lkdGgsYi5sb2NhbFN0cmVhbXNbYi51aWRdKXt2YXIgaT1iLmxvY2FsU3RyZWFtc1tiLnVpZF0udXBsaW5rU3RhdHM7aSYmaS5wZXJpb2RfZmlyPT09dC5wZXJpb2RfZmlyfHxvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdOiBQZXJpb2QgZmlyIGNoYW5nZSB0bzogXCIpLmNvbmNhdCh0LnBlcmlvZF9maXIpKSxiLmxvY2FsU3RyZWFtc1tiLnVpZF0udXBsaW5rU3RhdHM9dH19KSxiLnNvY2tldC5vbihcImNvbm5lY3RcIixmdW5jdGlvbigpe2IuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNvbm5lY3RlZFwifSksYi5hdHRlbXBzPTEsYi5vbkNvbm5lY3QoKX0pLGIuc29ja2V0Lm9uKFwicmVjb3ZlclwiLGZ1bmN0aW9uKCl7Yi5zdGF0ZT1fLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gVHJ5IHRvIHJlY29ubmVjdCBjaG9vc2Ugc2VydmVyIGFuZCBnZXQgZ2F0ZXdheSBsaXN0IGFnYWluIFwiKSksYi5yZWNvbm5lY3RpbmdDUz0hMCxiLmxlYXZlT25Db25uZWN0ZWQ9bnVsbDt2YXIgZT1iLmpvaW5JbmZvJiZiLmpvaW5JbmZvLnNpZDtmdChiLmpvaW5JbmZvLGZ1bmN0aW9uKHQpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc2Vzc2lvbjogIFwiKS5jb25jYXQoZSxcIiBnZXQgZ2F0ZXdheSBsaXN0IHN1Y2Nlc3NcIikpLGIucmVjb25uZWN0aW5nQ1M/Yi5zb2NrZXQucmVwbGFjZUhvc3QodC5nYXRld2F5X2FkZHIpOm8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc2Vzc2lvbjogIFwiKS5jb25jYXQoZSxcIiBhbHJlYWR5IGxlYXZlXCIpKX0pfSksYi5zb2NrZXQub24oXCJkaXNjb25uZWN0XCIsZnVuY3Rpb24oZSl7aWYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZWNlaXZlIGRpc2Nvbm5lY3QgbWVzc2FnZVwiKSksYi5zdGF0ZSE9PWgpe2Iuc3RhdGU9aDt2YXIgdD11KHt0eXBlOlwiZXJyb3JcIixyZWFzb246Vi5TT0NLRVRfRElTQ09OTkVDVEVEfSk7aWYoYi5kaXNwYXRjaEV2ZW50KHQpLDA9PT1iLnAycHMuc2l6ZT9iLnJlY29ubmVjdE1vZGU9XCJ0cnlOZXh0XCI6Yi5yZWNvbm5lY3RNb2RlPVwicmV0cnlcIixPKCksYi5jaGFubmVsTWVkaWFSZWxheUNvbnRyb2xsZXImJmIuY2hhbm5lbE1lZGlhUmVsYXlDb250cm9sbGVyLmRpc3Bvc2UoKSxiLmNoYW5uZWxNZWRpYVJlbGF5Q29udHJvbGxlcj1udWxsLDEhPWkpe3ZhciBuLGE9KG49Yi5hdHRlbXBzLDFlMypNYXRoLm1pbigzMCxNYXRoLnBvdygyLG4pLTEpKTtpZihvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIERpc2Nvbm5lY3QgZnJvbSBzZXJ2ZXIgW1wiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoZSksXCJdLCBhdHRlbXB0IHRvIHJlY292ZXIgWyNcIikuY29uY2F0KGIuYXR0ZW1wcyxcIl0gYWZ0ZXIgXCIpLmNvbmNhdChhLzFlMyxcIiBzZWNvbmRzXCIpKSxiLmhhc0ludm9rZUxlYXZlKXJldHVybiBvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIE5vIHJlY29ubmVjdGlvbiBiZWNhc2UgY2xpZW50LmxlYXZlIGhhcyBiZWVuIGludm9rZWRcIikpLHZvaWQoYi5oYXNJbnZva2VMZWF2ZT0hMSk7c2V0VGltZW91dChmdW5jdGlvbigpe2IuYXR0ZW1wcysrLGIuc3RhdGU9XyxiLmluQ2hhbm5lbEluZm8mJkRhdGUubm93KCktYi5pbkNoYW5uZWxJbmZvLmpvaW5BdD5PYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiVElDS0VUX1JFTkVXX1RJTUVPVVRcIik/KG8uZGVmYXVsdC5kZWJ1ZyhcIlJlY292ZXJpbmcgdG8gcmVuZXcgdGlja2V0XCIpLEEoKSk6QygpfSxhKX19fSksYi5zb2NrZXQub24oXCJvbl9hZGRfYXVkaW9fc3RyZWFtXCIsZnVuY3Rpb24oZSl7aWYoby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIE5ld2x5IGFkZGVkIGF1ZGlvIHN0cmVhbSB3aXRoIHVpZCBcIikuY29uY2F0KGUudWlkKSksYi5qb2luSW5mby5zdHJpbmdVaWQmJlwic3RyaW5nXCIhPXR5cGVvZiBlLnVpZCYmby5kZWZhdWx0LmVycm9yKFwiU3RyaW5nVUlEIGlzIE1peGVkIHdpdGggVWludFVJRFwiKSxiLnJlbW90ZVN0cmVhbXNJbkNoYW5uZWwuaGFzKGUudWlkKXx8Yi5yZW1vdGVTdHJlYW1zSW5DaGFubmVsLmFkZChlLnVpZCksdm9pZCAwPT09Yi5yZW1vdGVTdHJlYW1zW2UudWlkXSl7dmFyIHQ9WWUoe3N0cmVhbUlEOmUudWlkLGxvY2FsOiExLGF1ZGlvOmUuYXVkaW8sdmlkZW86ZS52aWRlb30pO3QucGVlck11dGVWaWRlbz0hMCxiLnJlbW90ZVN0cmVhbXNbZS51aWRdPXQ7dmFyIG49dSh7dHlwZTpcInN0cmVhbS1hZGRlZFwiLHN0cmVhbTp0fSk7Yi5kaXNwYXRjaEV2ZW50KG4pO3ZhciBpPWIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXTtpZihpJiZpLmF1ZGlvKXtuPWwoe3R5cGU6XCJtdXRlLWF1ZGlvXCIsdWlkOmUudWlkfSk7Yi5kaXNwYXRjaEV2ZW50KG4pfWlmKGkmJmkudmlkZW8pe249bCh7dHlwZTpcIm11dGUtdmlkZW9cIix1aWQ6ZS51aWR9KTtiLmRpc3BhdGNoRXZlbnQobil9fX0pLGIuc29ja2V0Lm9uKFwib25fdXBkYXRlX3N0cmVhbVwiLGZ1bmN0aW9uKGUpe3ZhciB0PWIucmVtb3RlU3RyZWFtc1tlLnVpZF07aWYoYi5qb2luSW5mby5zdHJpbmdVaWQmJlwic3RyaW5nXCIhPXR5cGVvZiBlLnVpZCYmby5kZWZhdWx0LmVycm9yKFwiU3RyaW5nVUlEIGlzIE1peGVkIHdpdGggVWludFVJRFwiKSx0KXt0LmF1ZGlvPWUuYXVkaW8sdC52aWRlbz1lLnZpZGVvLHQuc2NyZWVuPWUuc2NyZWVuLHQucGMmJmIuX2FkanVzdFBDTXV0ZVN0YXR1cyh0KTt2YXIgbj11KHt0eXBlOlwic3RyZWFtLXVwZGF0ZWRcIixzdHJlYW06dH0pO2IuZGlzcGF0Y2hFdmVudChuKX1lbHNlIG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gSWdub3Jpbmcgb25VcGRhdGVTdHJlYW0gZXZlbnQgYmVmb3JlIG9uQWRkU3RyZWFtIGZvciB1aWQgXCIpLmNvbmNhdChlLnVpZCkpfSksYi5zb2NrZXQub24oXCJvbl9hZGRfdmlkZW9fc3RyZWFtXCIsZnVuY3Rpb24oZSl7aWYoby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIE5ld2x5IGFkZGVkIHJlbW90ZSBzdHJlYW0gd2l0aCB1aWQgXCIpLmNvbmNhdChlLnVpZCxcIi5cIikpLGIuam9pbkluZm8uc3RyaW5nVWlkJiZcInN0cmluZ1wiIT10eXBlb2YgZS51aWQmJm8uZGVmYXVsdC5lcnJvcihcIlN0cmluZ1VJRCBpcyBNaXhlZCB3aXRoIFVpbnRVSURcIiksYi5yZW1vdGVTdHJlYW1zSW5DaGFubmVsLmhhcyhlLnVpZCl8fGIucmVtb3RlU3RyZWFtc0luQ2hhbm5lbC5hZGQoZS51aWQpLHZvaWQgMD09PWIucmVtb3RlU3RyZWFtc1tlLnVpZF0pe3ZhciB0PVllKHtzdHJlYW1JRDplLnVpZCxsb2NhbDohMSxhdWRpbzplLmF1ZGlvLHZpZGVvOmUudmlkZW99KTtiLnJlbW90ZVN0cmVhbXNbZS51aWRdPXQ7dmFyIG49dSh7dHlwZTpcInN0cmVhbS1hZGRlZFwiLHN0cmVhbTp0fSk7Yi5kaXNwYXRjaEV2ZW50KG4pO3ZhciBpPWIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXTtpZihpJiZpLmF1ZGlvKXtuPWwoe3R5cGU6XCJtdXRlLWF1ZGlvXCIsdWlkOmUudWlkfSk7Yi5kaXNwYXRjaEV2ZW50KG4pfWlmKGkmJmkudmlkZW8pe249bCh7dHlwZTpcIm11dGUtdmlkZW9cIix1aWQ6ZS51aWR9KTtiLmRpc3BhdGNoRXZlbnQobil9fWVsc2V7dmFyIGE9Yi5yZW1vdGVTdHJlYW1zW2UudWlkXTtpZih2b2lkIDAhPT1hLnN0cmVhbSl7aWYoKHQ9Yi5yZW1vdGVTdHJlYW1zW2UudWlkXSkudmlkZW89ITAsdC5wZWVyTXV0ZVZpZGVvPSExLHQucGMmJmIuX2FkanVzdFBDTXV0ZVN0YXR1cyh0KSxvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gU3RyZWFtIGNoYW5nZWQ6IGVuYWJsZSB2aWRlbyBcIikuY29uY2F0KGUudWlkKSksdC5pc1BsYXlpbmcoKSl7dmFyIHI9dC5wbGF5ZXIuZWxlbWVudElEO3Quc3RvcCgpLHQucGxheShyLHQucGxheU9wdGlvbnMpfX1lbHNlIGlmKGEucDJwSWQpYi5yZW1vdGVTdHJlYW1zW2UudWlkXS52aWRlbz0hMDtlbHNle3Q9WWUoe3N0cmVhbUlEOmUudWlkLGxvY2FsOiExLGF1ZGlvOiEwLHZpZGVvOiEwfSk7Yi5yZW1vdGVTdHJlYW1zW2UudWlkXT10LG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBTdHJlYW0gY2hhbmdlZDogbW9kaWZ5IHZpZGVvIFwiKS5jb25jYXQoZS51aWQpKX19fSksYi5zb2NrZXQub24oXCJvbl9yZW1vdmVfc3RyZWFtXCIsZnVuY3Rpb24oZSl7Yi5yZW1vdGVTdHJlYW1zSW5DaGFubmVsLmhhcyhlLnVpZCkmJmIucmVtb3RlU3RyZWFtc0luQ2hhbm5lbC5kZWxldGUoZS51aWQpO3ZhciB0PWIucmVtb3RlU3RyZWFtc1tlLnVpZF07aWYodCl7ZGVsZXRlIGIucmVtb3RlU3RyZWFtc1tlLnVpZF0sZGVsZXRlIGIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXTt2YXIgbj11KHt0eXBlOlwic3RyZWFtLXJlbW92ZWRcIixzdHJlYW06dH0pO2IuZGlzcGF0Y2hFdmVudChuKSx0LmNsb3NlKCksdm9pZCAwIT09dC5wYyYmKHQucGMuY2xvc2UoKSx0LnBjPXZvaWQgMCxiLnAycHMuZGVsZXRlKHQucDJwSWQpKX1lbHNlIG8uZGVmYXVsdC5lcnJvcihcIkVSUk9SIHN0cmVhbSBcIixlLnVpZCxcIiBub3QgZm91bmQgb25SZW1vdmVTdHJlYW0gXCIsZSl9KSxiLnNvY2tldC5vbihcIm9uX3B1Ymxpc2hfc3RyZWFtXCIsZnVuY3Rpb24oZSl7dmFyIHQ9Yi5sb2NhbFN0cmVhbXNbZS51aWRdLG49dSh7dHlwZTpcInN0cmVhbVB1Ymxpc2hlZFwiLHN0cmVhbTp0fSk7Yi5kaXNwYXRjaEV2ZW50KG4pfSksYi5zb2NrZXQub24oXCJtdXRlX2F1ZGlvXCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHJjdiBwZWVyIG11dGUgYXVkaW86IFwiKS5jb25jYXQoZS51aWQpKSxiLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF09Yi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdfHx7YXVkaW86ITEsdmlkZW86ITF9LGIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXS5hdWRpbz0hMDt2YXIgdD1sKHt0eXBlOlwibXV0ZS1hdWRpb1wiLHVpZDplLnVpZH0pLG49Yi5yZW1vdGVTdHJlYW1zW2UudWlkXTtuPyhuLnBlZXJNdXRlQXVkaW89ITAsbi5wYyYmYi5fYWRqdXN0UENNdXRlU3RhdHVzKG4pLGIuZGlzcGF0Y2hFdmVudCh0KSk6by5kZWZhdWx0LmRlYnVnKFwiSWdub3JpbmcgZXZlbnQgXCIuY29uY2F0KGUudHlwZSksZSl9KSxiLnNvY2tldC5vbihcInVubXV0ZV9hdWRpb1wiLGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSByY3YgcGVlciB1bm11dGUgYXVkaW86IFwiKS5jb25jYXQoZS51aWQpKSxiLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF09Yi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdfHx7YXVkaW86ITEsdmlkZW86ITF9LGIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXS5hdWRpbz0hMTt2YXIgdD1sKHt0eXBlOlwidW5tdXRlLWF1ZGlvXCIsdWlkOmUudWlkfSksbj1iLnJlbW90ZVN0cmVhbXNbZS51aWRdO24/KG4ucGVlck11dGVBdWRpbz0hMSxuLnBjJiZiLl9hZGp1c3RQQ011dGVTdGF0dXMobiksYi5kaXNwYXRjaEV2ZW50KHQpKTpvLmRlZmF1bHQuZGVidWcoXCJJZ25vcmluZyBldmVudCBcIi5jb25jYXQoZS50eXBlKSxlKX0pLGIuc29ja2V0Lm9uKFwibXV0ZV92aWRlb1wiLGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSByY3YgcGVlciBtdXRlIHZpZGVvOiBcIikuY29uY2F0KGUudWlkKSksYi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdPWIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXXx8e2F1ZGlvOiExLHZpZGVvOiExfSxiLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF0udmlkZW89ITA7dmFyIHQ9bCh7dHlwZTpcIm11dGUtdmlkZW9cIix1aWQ6ZS51aWR9KSxuPWIucmVtb3RlU3RyZWFtc1tlLnVpZF07bj8obi5wZWVyTXV0ZVZpZGVvPSEwLG4ucGMmJmIuX2FkanVzdFBDTXV0ZVN0YXR1cyhuKSxiLmRpc3BhdGNoRXZlbnQodCkpOm8uZGVmYXVsdC5kZWJ1ZyhcIklnbm9yaW5nIGV2ZW50IFwiLmNvbmNhdChlLnR5cGUpLGUpfSksYi5zb2NrZXQub24oXCJ1bm11dGVfdmlkZW9cIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcmN2IHBlZXIgdW5tdXRlIHZpZGVvOiBcIikuY29uY2F0KGUudWlkKSksYi5yZW1vdGVNdXRlU3RhdGVbZS51aWRdPWIucmVtb3RlTXV0ZVN0YXRlW2UudWlkXXx8e2F1ZGlvOiExLHZpZGVvOiExfSxiLnJlbW90ZU11dGVTdGF0ZVtlLnVpZF0udmlkZW89ITE7dmFyIHQ9bCh7dHlwZTpcInVubXV0ZS12aWRlb1wiLHVpZDplLnVpZH0pLG49Yi5yZW1vdGVTdHJlYW1zW2UudWlkXTtuPyhuLnBlZXJNdXRlVmlkZW89ITEsbi5wYyYmYi5fYWRqdXN0UENNdXRlU3RhdHVzKG4pLGIuZGlzcGF0Y2hFdmVudCh0KSk6by5kZWZhdWx0LmRlYnVnKFwiSWdub3JpbmcgZXZlbnQgXCIuY29uY2F0KGUudHlwZSksZSl9KSxiLnNvY2tldC5vbihcIm9uX2NyeXB0X2Vycm9yXCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHN0cmVhbSBjcnlwdCBlcnJvclwiKSk7dmFyIHQ9bCh7dHlwZTpcImNyeXB0LWVycm9yXCIsY3J5cHRUeXBlOmUuY3J5cHRfdHlwZX0pO2IuZGlzcGF0Y2hFdmVudCh0KX0pLGIuc29ja2V0Lm9uKFwib25fdXNlcl9iYW5uZWRcIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gdXNlciBiYW5uZWQgdWlkOiBcIikuY29uY2F0KGUudWlkLFwiIGVycm9yOiBcIikuY29uY2F0KGUuZXJyb3JfY29kZSkpO3ZhciB0PWwoe3R5cGU6XCJjbGllbnQtYmFubmVkXCIsdWlkOmUudWlkLGF0dHI6ZS5lcnJvcl9jb2RlfSk7Yi5kaXNwYXRjaEV2ZW50KHQpLGk9ITB9KSxiLnNvY2tldC5vbihcIm9uX3N0cmVhbV9mYWxsYmFja191cGRhdGVcIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gc3RyZWFtIGZhbGxiYWNrIHBlZXJJZDogXCIpLmNvbmNhdChlLnN0cmVhbV9pZCxcIiB0eXBlOiBcIikuY29uY2F0KGUuc3RyZWFtX3R5cGUpKTt2YXIgdD1sKHt0eXBlOlwic3RyZWFtLWZhbGxiYWNrXCIsdWlkOmUuc3RyZWFtX2lkLHN0cmVhbTplLnN0cmVhbV9pZCxhdHRyOmUuc3RyZWFtX3R5cGV9KTtiLmRpc3BhdGNoRXZlbnQodCl9KSxiLnNvY2tldC5vbihcInN0cmVhbV9yZWNvdmVyXCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHN0cmVhbSByZWNvdmVyIHVpZDogXCIpLmNvbmNhdChlLmlkLFwiIHBlZXJJZDogXCIpLmNvbmNhdChlLnBlZXJpZCxcIiB0eXBlOiBcIikuY29uY2F0KGUudHlwZSkpO3ZhciB0PWwoe3R5cGU6XCJzdHJlYW0tcmVjb3ZlclwiLHVpZDplLmlkLHN0cmVhbTplLnBlZXJpZCxhdHRyOmUudHlwZX0pO2IuZGlzcGF0Y2hFdmVudCh0KX0pLGIuc29ja2V0Lm9uKFwib25fcDJwX2xvc3RcIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIHAycGxvc3Q6IFwiKSxlLFwicDJwczpcIixiLnAycHMpO3ZhciB0LG49XCJEVExTIGZhaWxlZFwiOyh0PWIubG9jYWxTdHJlYW1zW2UudWlkXXx8Yi5yZW1vdGVTdHJlYW1zW2UudWlkXSk/KHQucGMmJnQucGMub2ZmZXJDYW5kaWRhdGVzJiYwPT09dC5wYy5vZmZlckNhbmRpZGF0ZXMubGVuZ3RoJiYobj1cIk5PX0NBTkRJREFURVNfSU5fT0ZGRVJcIiksXCJwdWJsaXNoXCI9PT1lLmV2ZW50JiZzLmIucHVibGlzaChiLmpvaW5JbmZvLnNpZCx7bHRzOnQucHVibGlzaExUUyxzdWNjOiExLGF1ZGlvTmFtZTp0Lmhhc0F1ZGlvKCkmJnQuYXVkaW9OYW1lLHZpZGVvTmFtZTp0Lmhhc1ZpZGVvKCkmJnQudmlkZW9OYW1lLHNjcmVlbk5hbWU6dC5oYXNTY3JlZW4oKSYmdC5zY3JlZW5OYW1lLGVjOm59KSxcInN1YnNjcmliZVwiPT09ZS5ldmVudCYmcy5iLnN1YnNjcmliZShiLmpvaW5JbmZvLnNpZCx7bHRzOnQuc3Vic2NyaWJlTFRTLHN1Y2M6ITEsdmlkZW86dC5zdWJzY3JpYmVPcHRpb25zJiZ0LnN1YnNjcmliZU9wdGlvbnMudmlkZW8sYXVkaW86dC5zdWJzY3JpYmVPcHRpb25zJiZ0LnN1YnNjcmliZU9wdGlvbnMuYXVkaW8scGVlcmlkOmUudWlkK1wiXCIsZWM6bn0pKTpvLmRlZmF1bHQud2FybmluZyhcIlAyUExvc3QgU3RyZWFtIE5vdCBmb3VuZFwiLGUpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcDJwbG9zdDpcIiksZS5wMnBpZCksKHQ9Yi5wMnBzLmdldChlLnAycGlkKSkmJihiLnAycHMuZGVsZXRlKGUucDJwaWQpLHQubG9jYWw/Yi5kaXNwYXRjaEV2ZW50KGwoe3R5cGU6XCJwdWJQMlBMb3N0XCIsc3RyZWFtOnQsYXR0cjpufSkpOmIucmVtb3RlU3RyZWFtc1t0LmdldElkKCldJiZiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcInN1YlAyUExvc3RcIixzdHJlYW06dCxhdHRyOm59KSkpfSksYi5zb2NrZXQub24oXCJvbl90b2tlbl9wcml2aWxlZ2Vfd2lsbF9leHBpcmVcIixmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIFJlY2VpdmVkIE1lc3NhZ2Ugb25Ub2tlblByaXZpbGVnZVdpbGxFeHBpcmVcIikpLGIuZGlzcGF0Y2hFdmVudChsKHt0eXBlOlwib25Ub2tlblByaXZpbGVnZVdpbGxFeHBpcmVcIn0pKX0pLGIuc29ja2V0Lm9uKFwib25fdG9rZW5fcHJpdmlsZWdlX2RpZF9leHBpcmVcIixmdW5jdGlvbigpe28uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBSZWNlaXZlZCBNZXNzYWdlIG9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmUsIHBsZWFzZSBnZXQgbmV3IHRva2VuIGFuZCBqb2luIGFnYWluXCIpKSxiLmNsb3NlR2F0ZXdheSgpLGIuZGlzcGF0Y2hFdmVudChsKHt0eXBlOlwib25Ub2tlblByaXZpbGVnZURpZEV4cGlyZVwifSkpfSksYi5zb2NrZXQub24oXCJlbmFibGVfbG9jYWxfdmlkZW9cIixmdW5jdGlvbihlKXtiLmRpc3BhdGNoRXZlbnQobCh7dHlwZTpcImVuYWJsZS1sb2NhbC12aWRlb1wiLHVpZDplLnVpZH0pKX0pLGIuc29ja2V0Lm9uKFwiZGlzYWJsZV9sb2NhbF92aWRlb1wiLGZ1bmN0aW9uKGUpe2IuZGlzcGF0Y2hFdmVudChsKHt0eXBlOlwiZGlzYWJsZS1sb2NhbC12aWRlb1wiLHVpZDplLnVpZH0pKX0pLGIuX2RvV2l0aEFjdGlvbj1mdW5jdGlvbihlLHQsbil7XCJ0cnlOZXh0XCI9PT1lP2Z1bmN0aW9uKGUsdCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBDb25uZWN0IG5leHQgZ2F0ZXdheVwiKSksYi5zdGF0ZT1oLGIuc29ja2V0LmNsb3NlKCksTygpLGIucmVjb25uZWN0TW9kZT1cInRyeU5leHRcIixDKGUsdCl9KHQsbik6XCJyZXRyeVwiPT09ZT9mdW5jdGlvbihlLHQpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmVjb25uZWN0IGdhdGV3YXlcIikpLGIuc3RhdGU9aCxiLnNvY2tldC5jbG9zZSgpLE8oKSxiLnJlY29ubmVjdE1vZGU9XCJyZXRyeVwiLEMoZSx0KX0odCxuKTpcInF1aXRcIj09PWU/KG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gcXVpdCBnYXRld2F5XCIpKSxiLnN0YXRlPWgsYi5zb2NrZXQuY2xvc2UoKSxPKCkpOlwicmVjb3ZlclwiPT09ZSYmQSgpfSxiLnNvY2tldC5vbihcIm9uX25vdGlmaWNhdGlvblwiLGZ1bmN0aW9uKGUpe2lmKG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gUmVjZWl2ZSBub3RpZmljYXRpb246IFwiKSxlKSxcIkVSUl9KT0lOX0JZX01VTFRJX0lQXCI9PT15W2UuY29kZV0pcmV0dXJuIGIuZGlzcGF0Y2hFdmVudCh7dHlwZTpcIm9uTXVsdGlJUFwiLG9wdGlvbjplLm9wdGlvbn0pO2UuZGV0YWlsP2IuX2RvV2l0aEFjdGlvbih2dFt5W2UuY29kZV1dKTplLmFjdGlvbiYmYi5fZG9XaXRoQWN0aW9uKGUuYWN0aW9uKX0pLGIuc29ja2V0Lm9uKFwib25fdXNlcl9vZmZsaW5lXCIsZnVuY3Rpb24oZSl7dmFyIHQ9bCh7dHlwZTpcInBlZXItbGVhdmVcIix1aWQ6ZS51aWR9KTtpZihiLnJlbW90ZVN0cmVhbXNJbkNoYW5uZWwuaGFzKGUudWlkKSYmYi5yZW1vdGVTdHJlYW1zSW5DaGFubmVsLmRlbGV0ZShlLnVpZCksYi5yZW1vdGVTdHJlYW1zLmhhc093blByb3BlcnR5KGUudWlkKSYmKHQuc3RyZWFtPWIucmVtb3RlU3RyZWFtc1tlLnVpZF0pLHQucmVhc29uPWUucmVhc29uLGIuZGlzcGF0Y2hFdmVudCh0KSxiLnJlbW90ZVN0cmVhbXMuaGFzT3duUHJvcGVydHkoZS51aWQpKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQoYi5jbGllbnRJZCxcIl0gY2xvc2luZyBzdHJlYW0gb24gcGVlciBsZWF2ZVwiKSxlLnVpZCk7dmFyIG49Yi5yZW1vdGVTdHJlYW1zW2UudWlkXTtuLmNsb3NlKCksZGVsZXRlIGIucmVtb3RlU3RyZWFtc1tlLnVpZF0sdm9pZCAwIT09bi5wYyYmKG4ucGMuY2xvc2UoKSxuLnBjPXZvaWQgMCxiLnAycHMuZGVsZXRlKG4ucDJwSWQpKX1iLnRpbWVycy5oYXNPd25Qcm9wZXJ0eShlLnVpZCkmJihjbGVhckludGVydmFsKGIudGltZXJzW2UudWlkXSksY2xlYXJJbnRlcnZhbChiLnRpbWVyc1tlLnVpZF0rXCJfUmVsYXRlZFN0YXRzXCIpLGRlbGV0ZSBiLnRpbWVyc1tlLnVpZF0pLG51bGwhPWIuYXVkaW9MZXZlbFtlLnVpZF0mJmRlbGV0ZSBiLmF1ZGlvTGV2ZWxbZS51aWRdLG51bGwhPWIudGltZXJfY291bnRlcltlLnVpZF0mJmRlbGV0ZSBiLnRpbWVyX2NvdW50ZXJbZS51aWRdfSksYi5zb2NrZXQub24oXCJvblVwbGlua1N0YXRzXCIsZnVuY3Rpb24oZSl7fSksYi5zb2NrZXQub24oXCJsaXZlU3RyZWFtaW5nU3RhcnRlZFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWYoe3R5cGU6XCJsaXZlU3RyZWFtaW5nU3RhcnRlZFwiLHVybDplLnVybH0pO2IuZGlzcGF0Y2hFdmVudCh0KX0pLGIuc29ja2V0Lm9uKFwibGl2ZVN0cmVhbWluZ0ZhaWxlZFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWYoe3R5cGU6XCJsaXZlU3RyZWFtaW5nRmFpbGVkXCIsdXJsOmUudXJsfSk7Yi5kaXNwYXRjaEV2ZW50KHQpfSksYi5zb2NrZXQub24oXCJsaXZlU3RyZWFtaW5nU3RvcHBlZFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWYoe3R5cGU6XCJsaXZlU3RyZWFtaW5nU3RvcHBlZFwiLHVybDplLnVybH0pO2IuZGlzcGF0Y2hFdmVudCh0KX0pLGIuc29ja2V0Lm9uKFwibGl2ZVRyYW5zY29kaW5nVXBkYXRlZFwiLGZ1bmN0aW9uKGUpe3ZhciB0PWYoe3R5cGU6XCJsaXZlVHJhbnNjb2RpbmdVcGRhdGVkXCIscmVhc29uOmUucmVhc29ufSk7Yi5kaXNwYXRjaEV2ZW50KHQpfSksYi5zb2NrZXQub24oXCJzdHJlYW1JbmplY3RlZFN0YXR1c1wiLGZ1bmN0aW9uKGUpe3ZhciB0PWYoe3R5cGU6XCJzdHJlYW1JbmplY3RlZFN0YXR1c1wiLHVybDplLnVybCx1aWQ6ZS51aWQsc3RhdHVzOmUuc3RhdHVzfSk7Yi5kaXNwYXRjaEV2ZW50KHQpfSksYi5zb2NrZXQub24oXCJvbl91c2VyX29ubGluZVwiLGZ1bmN0aW9uKGUpe2Iuam9pbkluZm8uc3RyaW5nVWlkJiZcInN0cmluZ1wiIT10eXBlb2YgZS51aWQmJm8uZGVmYXVsdC5lcnJvcihcIlN0cmluZ1VJRCBpcyBNaXhlZCB3aXRoIFVpbnRVSURcIiksYi5kaXNwYXRjaEV2ZW50KHt0eXBlOlwicGVlci1vbmxpbmVcIix1aWQ6ZS51aWR9KX0pO3ZhciBjfSx3PWZ1bmN0aW9uKGUsdCl7aWYodm9pZCAwIT09Yi5zb2NrZXQpdHJ5e2Iuc29ja2V0LmVtaXRTaW1wbGVNZXNzYWdlKGUsZnVuY3Rpb24oZSxuKXt0JiZ0KGUsbil9KX1jYXRjaChlKXtvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGIuY2xpZW50SWQsXCJdIEVycm9yIGluIHNlbmRTaW1wbGVTZHAgW1wiKS5jb25jYXQoZSxcIl1cIikpfWVsc2Ugby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChiLmNsaWVudElkLFwiXSBFcnJvciBpbiBzZW5kU2ltcGxlU2RwIFtzb2NrZXQgbm90IHJlYWR5XVwiKSl9LGs9ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gYi5sb2NhbFN0cmVhbXMpaWYodm9pZCAwIT09Yi5sb2NhbFN0cmVhbXNbZV0pe3ZhciB0PWIubG9jYWxTdHJlYW1zW2VdO2RlbGV0ZSBiLmxvY2FsU3RyZWFtc1tlXSx2b2lkIDAhPT10LnBjJiYodC5wYy5jbG9zZSgpLHQucGM9dm9pZCAwKX19LEQ9ZnVuY3Rpb24oKXtmb3IodmFyIGUgaW4gYi5yZW1vdGVTdHJlYW1zSW5DaGFubmVsLmNsZWFyKCksYi5yZW1vdGVTdHJlYW1zKWlmKGIucmVtb3RlU3RyZWFtcy5oYXNPd25Qcm9wZXJ0eShlKSl7dmFyIHQ9Yi5yZW1vdGVTdHJlYW1zW2VdO3QuaXNQbGF5aW5nKCkmJnQuc3RvcCgpLHQuY2xvc2UoKSxkZWxldGUgYi5yZW1vdGVTdHJlYW1zW2VdLHZvaWQgMCE9PXQucGMmJih0LnBjLmNsb3NlKCksdC5wYz12b2lkIDApfX07cmV0dXJuIGJ9LGJ0PXtfZ2F0ZXdheUNsaWVudHM6e30scmVnaXN0ZXI6ZnVuY3Rpb24oZSx0KXtpZighdC51aWQpe3ZhciBuPVwiTk9fVUlEX1BST1ZJREVEXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gXCIpLG4sdCksbn1pZih0LmNuYW1lKXtpZih0aGlzLl9nYXRld2F5Q2xpZW50c1t0LmNuYW1lXSYmdGhpcy5fZ2F0ZXdheUNsaWVudHNbdC5jbmFtZV1bdC51aWRdJiZ0aGlzLl9nYXRld2F5Q2xpZW50c1t0LmNuYW1lXVt0LnVpZF0hPT1lKXtuPVwiVUlEX0NPTkZMSUNUXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gXCIpLG4sdCksbn1yZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSByZWdpc3RlciBjbGllbnQgQ2hhbm5lbFwiKSx0LmNuYW1lLFwiVWlkXCIsdC51aWQpLHRoaXMuX2dhdGV3YXlDbGllbnRzW3QuY25hbWVdfHwodGhpcy5fZ2F0ZXdheUNsaWVudHNbdC5jbmFtZV09e30pLHRoaXMuX2dhdGV3YXlDbGllbnRzW3QuY25hbWVdW3QudWlkXT1lLG51bGx9dmFyIG49XCJOT19DSEFOTkVMX1BST1ZJREVEXCI7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gXCIpLG4sdCksbn0sdW5yZWdpc3RlcjpmdW5jdGlvbihlKXt2YXIgdD1lJiZlLnVpZCxuPWUuam9pbkluZm8mJmUuam9pbkluZm8uY25hbWU7aWYoIXR8fCFuKXt2YXIgaT1cIklOVkFMSURfR0FURVdBWUNMSUVOVFwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIFwiKSxpKSxpfWlmKHRoaXMuX2dhdGV3YXlDbGllbnRzW25dJiZ0aGlzLl9nYXRld2F5Q2xpZW50c1tuXVt0XSl7aWYodGhpcy5fZ2F0ZXdheUNsaWVudHNbbl1bdF0hPT1lKXtpPVwiR0FURVdBWUNMSUVOVF9VSURfQ09ORkxJQ1RcIjtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSBcIiksaSksaX1yZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdChlLmNsaWVudElkLFwiXSB1bnJlZ2lzdGVyIGNsaWVudCBcIiksZS51aWQpLGRlbGV0ZSB0aGlzLl9nYXRld2F5Q2xpZW50c1tuXVt0XSxudWxsfXZhciBpPVwiR0FURVdFQVlfQ0xJRU5UX1VOUkVHSVNURVJFRFwiO28uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gXCIpLGkpfX07VHQuRElTQ09OTkVDVEVEPTAsVHQuQ09OTkVDVElORz0xLFR0LkNPTk5FQ1RFRD0yLFR0LkRJU0NPTk5FQ1RJTkc9MyxUdC5jb25uZXRpb25TdGF0ZU1hcD17MDpcIkRJU0NPTk5FQ1RFRFwiLDE6XCJDT05ORUNUSU5HXCIsMjpcIkNPTk5FQ1RFRFwiLDM6XCJESVNDT05ORUNUSU5HXCJ9O3ZhciBSdD1UdCxBdD1mdW5jdGlvbihlKXt2YXIgdDtzd2l0Y2goZSl7Y2FzZVwiMTIwcFwiOmNhc2VcIjEyMHBfMVwiOnQ9W1wiMTIwcF8xXCIsXCIxMjBwXzFcIixcIjEyMHBfMVwiXTticmVhaztjYXNlXCIxMjBwXzNcIjp0PVtcIjEyMHBfM1wiLFwiMTIwcF8zXCIsXCIxMjBwXzNcIl07YnJlYWs7Y2FzZVwiMTgwcFwiOmNhc2VcIjE4MHBfMVwiOnQ9W1wiOTBwXzFcIixcIjkwcF8xXCIsXCIxODBwXzFcIl07YnJlYWs7Y2FzZVwiMTgwcF8zXCI6dD1bXCIxMjBwXzNcIixcIjEyMHBfM1wiLFwiMTgwcF8zXCJdO2JyZWFrO2Nhc2VcIjE4MHBfNFwiOnQ9W1wiMTIwcF8xXCIsXCIxMjBwXzFcIixcIjE4MHBfNFwiXTticmVhaztjYXNlXCIyNDBwXCI6Y2FzZVwiMjQwcF8xXCI6dD1bXCIxMjBwXzFcIixcIjEyMHBfMVwiLFwiMjQwcF8xXCJdO2JyZWFrO2Nhc2VcIjI0MHBfM1wiOnQ9W1wiMTIwcF8zXCIsXCIxMjBwXzNcIixcIjI0MHBfM1wiXTticmVhaztjYXNlXCIyNDBwXzRcIjp0PVtcIjEyMHBfNFwiLFwiMTIwcF80XCIsXCIyNDBwXzRcIl07YnJlYWs7Y2FzZVwiMzYwcFwiOmNhc2VcIjM2MHBfMVwiOmNhc2VcIjM2MHBfNFwiOmNhc2VcIjM2MHBfOVwiOmNhc2VcIjM2MHBfMTBcIjpjYXNlXCIzNjBwXzExXCI6dD1bXCI5MHBfMVwiLFwiOTBwXzFcIixcIjM2MHBfMVwiXTticmVhaztjYXNlXCIzNjBwXzNcIjpjYXNlXCIzNjBwXzZcIjp0PVtcIjEyMHBfM1wiLFwiMTIwcF8zXCIsXCIzNjBwXzNcIl07YnJlYWs7Y2FzZVwiMzYwcF83XCI6Y2FzZVwiMzYwcF84XCI6dD1bXCIxMjBwXzFcIixcIjEyMHBfMVwiLFwiMzYwcF83XCJdO2JyZWFrO2Nhc2VcIjQ4MHBcIjpjYXNlXCI0ODBwXzFcIjpjYXNlXCI0ODBwXzJcIjpjYXNlXCI0ODBwXzRcIjpjYXNlXCI0ODBwXzEwXCI6dD1bXCIxMjBwXzFcIixcIjEyMHBfMVwiLFwiNDgwcF8xXCJdO2JyZWFrO2Nhc2VcIjQ4MHBfM1wiOmNhc2VcIjQ4MHBfNlwiOnQ9W1wiMTIwcF8zXCIsXCIxMjBwXzNcIixcIjQ4MHBfM1wiXTticmVhaztjYXNlXCI0ODBwXzhcIjpjYXNlXCI0ODBwXzlcIjp0PVtcIjEyMHBfNFwiLFwiMTIwcF80XCIsXCI0ODBwXzhcIl07YnJlYWs7Y2FzZVwiNzIwcFwiOmNhc2VcIjcyMHBfMVwiOmNhc2VcIjcyMHBfMlwiOmNhc2VcIjcyMHBfM1wiOnQ9W1wiOTBwXzFcIixcIjkwcF8xXCIsXCI3MjBwXzFcIl07YnJlYWs7Y2FzZVwiNzIwcF81XCI6Y2FzZVwiNzIwcF82XCI6dD1bXCIxMjBwXzFcIixcIjEyMHBfMVwiLFwiNzIwcF81XCJdO2JyZWFrO2Nhc2VcIjEwODBwXCI6Y2FzZVwiMTA4MHBfMVwiOmNhc2VcIjEwODBwXzJcIjpjYXNlXCIxMDgwcF8zXCI6Y2FzZVwiMTA4MHBfNVwiOnQ9W1wiOTBwXzFcIixcIjkwcF8xXCIsXCIxMDgwcF8xXCJdO2JyZWFrO2Nhc2VcIjE0NDBwXCI6Y2FzZVwiMTQ0MHBfMVwiOmNhc2VcIjE0NDBwXzJcIjp0PVtcIjkwcF8xXCIsXCI5MHBfMVwiLFwiMTQ0MHBfMVwiXTticmVhaztjYXNlXCI0a1wiOmNhc2VcIjRrXzFcIjpjYXNlXCI0a18zXCI6dD1bXCI5MHBfMVwiLFwiOTBwXzFcIixcIjRrXzFcIl07YnJlYWs7ZGVmYXVsdDp0PVtcIjEyMHBfMVwiLFwiMTIwcF8xXCIsXCIzNjBwXzdcIl19cmV0dXJuIE9iamVjdChtLmlzT3BlcmEpKCk/W2UsMTUsNTBdOk9iamVjdChtLmlzRmlyZUZveCkoKT9bdFsxXSwxNSwxMDBdOk9iamVjdChtLmlzU2FmYXJpKSgpP1t0WzJdLDE1LDUwXTpbdFswXSwxNSw1MF19LE90PXsxMDAxOlwiRlJBTUVSQVRFX0lOUFVUX1RPT19MT1dcIiwxMDAyOlwiRlJBTUVSQVRFX1NFTlRfVE9PX0xPV1wiLDEwMDM6XCJTRU5EX1ZJREVPX0JJVFJBVEVfVE9PX0xPV1wiLDEwMDU6XCJSRUNWX1ZJREVPX0RFQ09ERV9GQUlMRURcIiwyMDAxOlwiQVVESU9fSU5QVVRfTEVWRUxfVE9PX0xPV1wiLDIwMDI6XCJBVURJT19PVVRQVVRfTEVWRUxfVE9PX0xPV1wiLDIwMDM6XCJTRU5EX0FVRElPX0JJVFJBVEVfVE9PX0xPV1wiLDIwMDU6XCJSRUNWX0FVRElPX0RFQ09ERV9GQUlMRURcIiwzMDAxOlwiRlJBTUVSQVRFX0lOUFVUX1RPT19MT1dfUkVDT1ZFUlwiLDMwMDI6XCJGUkFNRVJBVEVfU0VOVF9UT09fTE9XX1JFQ09WRVJcIiwzMDAzOlwiU0VORF9WSURFT19CSVRSQVRFX1RPT19MT1dfUkVDT1ZFUlwiLDMwMDU6XCJSRUNWX1ZJREVPX0RFQ09ERV9GQUlMRURfUkVDT1ZFUlwiLDQwMDE6XCJBVURJT19JTlBVVF9MRVZFTF9UT09fTE9XX1JFQ09WRVJcIiw0MDAyOlwiQVVESU9fT1VUUFVUX0xFVkVMX1RPT19MT1dfUkVDT1ZFUlwiLDQwMDM6XCJTRU5EX0FVRElPX0JJVFJBVEVfVE9PX0xPV19SRUNPVkVSXCIsNDAwNTpcIlJFQ1ZfQVVESU9fREVDT0RFX0ZBSUxFRF9SRUNPVkVSXCJ9LEN0PXtGcmFtZXJhdGVJbnB1dDoxMDAxLEZyYW1lcmF0ZVNlbnQ6MTAwMixTZW5kVmlkZW9CaXRyYXRlOjEwMDMsVmlkZW9EZWNvZGU6MTAwNSxBdWRpb0ludHB1dExldmVsOjIwMDEsQXVkaW9PdXRwdXRMZXZlbDoyMDAyLFNlbmRBdWRpb0JpdHJhdGU6MjAwMyxBdWRpb0RlY29kZToyMDA1fSxOdD1mdW5jdGlvbihlKXt2YXIgdD17cmVtb3RlU3RyZWFtU3RvcmFnZTp7fSxsb2NhbFN0cmVhbVN0b3JhZ2U6e319O3JldHVybiB0LmdhdGV3YXlDbGllbnQ9ZSx0LmNoZWNrQXVkaW9PdXRwdXRMZXZlbD1mdW5jdGlvbihlKXtyZXR1cm4hKGUmJnBhcnNlSW50KGUuYXVkaW9SZWN2Qnl0ZXNEZWx0YSk+MCYmcGFyc2VJbnQoZS5hdWRpb0RlY29kaW5nTm9ybWFsRGVsdGEpPjAmJjA9PT1wYXJzZUludChlLmF1ZGlvT3V0cHV0TGV2ZWwpKX0sdC5jaGVja0F1ZGlvSW50cHV0TGV2ZWw9ZnVuY3Rpb24oZSl7cmV0dXJuIWV8fDAhPT1wYXJzZUludChlLmF1ZGlvSW5wdXRMZXZlbCl9LHQuY2hlY2tGcmFtZXJhdGVJbnB1dD1mdW5jdGlvbihlLHQpe2lmKCFlfHwhdC5hdHRyaWJ1dGVzKXJldHVybiEwO3ZhciBuPXBhcnNlSW50KHQuYXR0cmlidXRlcy5tYXhGcmFtZVJhdGUpLGk9cGFyc2VJbnQoZS5nb29nRnJhbWVSYXRlSW5wdXQpO3JldHVybiFufHwhaXx8IShuPjEwJiZpPDV8fG48MTAmJm4+PTUmJmk8PTEpfSx0LmNoZWNrRnJhbWVyYXRlU2VudD1mdW5jdGlvbihlKXtyZXR1cm4hKGUmJnBhcnNlSW50KGUuZ29vZ0ZyYW1lUmF0ZUlucHV0KT41JiZwYXJzZUludChlLmdvb2dGcmFtZVJhdGVTZW50KTw9MSl9LHQuY2hlY2tTZW5kVmlkZW9CaXRyYXRlPWZ1bmN0aW9uKGUpe3JldHVybiFlfHwwIT09cGFyc2VJbnQoZS52aWRlb1NlbmRCeXRlc0RlbHRhKX0sdC5jaGVja1NlbmRBdWRpb0JpdHJhdGU9ZnVuY3Rpb24oZSl7cmV0dXJuIWV8fDAhPT1wYXJzZUludChlLmF1ZGlvU2VuZEJ5dGVzRGVsdGEpfSx0LmNoZWNrVmlkZW9EZWNvZGU9ZnVuY3Rpb24oZSl7cmV0dXJuIWV8fDA9PT1wYXJzZUludChlLnZpZGVvUmVjdkJ5dGVzRGVsdGEpfHwwIT09cGFyc2VJbnQoZS5nb29nRnJhbWVSYXRlRGVjb2RlZCl9LHQuY2hlY2tBdWRpb0RlY29kZT1mdW5jdGlvbihlKXtyZXR1cm4hZXx8MD09PXBhcnNlSW50KGUuYXVkaW9SZWN2Qnl0ZXNEZWx0YSl8fDAhPT1wYXJzZUludChlLmF1ZGlvRGVjb2RpbmdOb3JtYWxEZWx0YSl9LHQucmVjb3JkPWZ1bmN0aW9uKGUsbixpLGEscil7aVtlXXx8KGlbZV09e2lzUHJldk5vcm1hbDohMCxyZWNvcmQ6W119KTt2YXIgbz1pW2VdLHM9dFtcImNoZWNrXCIrZV0obixyKTtpZihvLnJlY29yZC5wdXNoKHMpLG8ucmVjb3JkLmxlbmd0aD49NSl7by5pc0N1ck5vcm1hbD0tMSE9PW8ucmVjb3JkLmluZGV4T2YoITApO3ZhciBjPUN0W2VdO28uaXNQcmV2Tm9ybWFsJiYhby5pc0N1ck5vcm1hbCYmdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJleGNlcHRpb25cIixjb2RlOmMsbXNnOk90W2NdLHVpZDphfSksIW8uaXNQcmV2Tm9ybWFsJiZvLmlzQ3VyTm9ybWFsJiZ0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImV4Y2VwdGlvblwiLGNvZGU6YysyZTMsbXNnOk90W2MrMmUzXSx1aWQ6YX0pLG8uaXNQcmV2Tm9ybWFsPW8uaXNDdXJOb3JtYWwsby5yZWNvcmQ9W119fSx0LnNldExvY2FsU3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e307T2JqZWN0LmtleXMoZSkubWFwKGZ1bmN0aW9uKGkpe3ZhciBhPWVbaV0scj10LmdhdGV3YXlDbGllbnQubG9jYWxTdHJlYW1zW3BhcnNlSW50KGkpXSxvPXQubG9jYWxTdHJlYW1TdG9yYWdlW2ldfHx7fTtyJiZyLmhhc1ZpZGVvKCkmJih0LnJlY29yZChcIlNlbmRWaWRlb0JpdHJhdGVcIixhLnZpZGVvU3RhdHMsbyxpKSx0LnJlY29yZChcIkZyYW1lcmF0ZUlucHV0XCIsYS52aWRlb1N0YXRzLG8saSxyKSx0LnJlY29yZChcIkZyYW1lcmF0ZVNlbnRcIixhLnZpZGVvU3RhdHMsbyxpKSksciYmci5oYXNBdWRpbygpJiYodC5yZWNvcmQoXCJBdWRpb0ludHB1dExldmVsXCIsYS5hdWRpb1N0YXRzLG8saSksdC5yZWNvcmQoXCJTZW5kQXVkaW9CaXRyYXRlXCIsYS5hdWRpb1N0YXRzLG8saSkpLG5baV09b30pLHQubG9jYWxTdHJlYW1TdG9yYWdlPW59LHQuc2V0UmVtb3RlU3RhdHM9ZnVuY3Rpb24obil7dmFyIGk9e307T2JqZWN0LmtleXMobikubWFwKGZ1bmN0aW9uKGEpe3ZhciByPW5bYV0sbz1lLnJlbW90ZVN0cmVhbXNbYV0scz10LnJlbW90ZVN0cmVhbVN0b3JhZ2VbYV18fHt9O28mJm8uaGFzVmlkZW8oKSYmby5pc1BsYXlpbmcoKSYmdC5yZWNvcmQoXCJWaWRlb0RlY29kZVwiLHIudmlkZW9TdGF0cyxzLGEpLG8mJm8uaGFzQXVkaW8oKSYmby5pc1BsYXlpbmcoKSYmKHQucmVjb3JkKFwiQXVkaW9PdXRwdXRMZXZlbFwiLHIuYXVkaW9TdGF0cyxzLGEpLHQucmVjb3JkKFwiQXVkaW9EZWNvZGVcIixyLmF1ZGlvU3RhdHMscyxhKSksaVthXT1zfSksdC5yZW1vdGVTdHJlYW1TdG9yYWdlPWl9LHR9LHd0PW5ldyBmdW5jdGlvbigpe3ZhciBlPWMoKTtyZXR1cm4gZS5zdGF0ZXM9e1VOSU5JVDpcIlVOSU5JVFwiLElOSVRJTkc6XCJJTklUSU5HXCIsSU5JVEVEOlwiSU5JVEVEXCJ9LGUuc3RhdGU9ZS5zdGF0ZXMuVU5JTklULGUudHlwZT1udWxsLGUubGFzdENvbm5lY3RlZEF0PW51bGwsZS5sYXN0RGlzY29ubmVjdGVkQXQ9bnVsbCxlLmxhc3RUeXBlQ2hhbmdlZEF0PW51bGwsZS5uZXR3b3JrQ2hhbmdlVGltZXI9bnVsbCxlLl9pbml0PWZ1bmN0aW9uKHQsbil7aWYoZS5zdGF0ZT1lLnN0YXRlcy5JTklUSU5HLG5hdmlnYXRvci5jb25uZWN0aW9uJiZuYXZpZ2F0b3IuY29ubmVjdGlvbi5hZGRFdmVudExpc3RlbmVyKXt2YXIgaT1lLl9nZXROZXR3b3JrSW5mbygpO2UudHlwZT1pJiZpLnR5cGUsZS5zdGF0ZT1lLnN0YXRlcy5JTklURUQsdCYmdCgpfWVsc2UgZS5zdGF0ZT1lLnN0YXRlcy5VTklOSVQsbiYmbihcIkRPX05PVF9TVVBQT1JUXCIpfSxlLl9nZXROZXR3b3JrSW5mbz1mdW5jdGlvbigpe3JldHVybiBuYXZpZ2F0b3IuY29ubmVjdGlvbn0sZS5fcmVsb2FkTmV0d29ya0luZm89ZnVuY3Rpb24oKXt2YXIgdD1lLl9nZXROZXR3b3JrSW5mbygpLG49dCYmdC50eXBlfHxcIlVOU1VQUE9SVEVEXCIsaT1EYXRlLm5vdygpO2lmKG4hPT1lLnR5cGUpe2UubGFzdFR5cGVDaGFuZ2VkQXQ9aSxcIm5vbmVcIj09bj9lLmxhc3REaXNjb25uZWN0ZWRBdD1pOlwibm9uZVwiPT1lLnR5cGUmJihlLmxhc3RDb25uZWN0ZWRBdD1pKSxlLnR5cGU9bjt2YXIgYT17dHlwZTpcIm5ldHdvcmtUeXBlQ2hhbmdlZFwiLG5ldHdvcmtUeXBlOm59O2UuZGlzcGF0Y2hFdmVudChhKX19LGUuZ2V0U3RhdHM9ZnVuY3Rpb24odCxuKXt2YXIgaT17fSxhPWUuX2dldE5ldHdvcmtJbmZvKCk7YSYmKGkuTmV0d29ya1R5cGU9YS50eXBlfHxcIlVOU1VQUE9SVEVEXCIpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0KGkpfSwwKX0sZS5faW5pdChmdW5jdGlvbigpe25hdmlnYXRvci5jb25uZWN0aW9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIixmdW5jdGlvbigpe2UuX3JlbG9hZE5ldHdvcmtJbmZvKCl9KSxlLm5ldHdvcmtDaGFuZ2VUaW1lcj1zZXRJbnRlcnZhbChmdW5jdGlvbigpe2UuX3JlbG9hZE5ldHdvcmtJbmZvKCl9LDVlMyl9LGZ1bmN0aW9uKGUpe30pLGV9LGt0PVwiRElTQ09OTkVDVElOR1wiLER0PVwiRElTQ09OTkVDVEVEXCIsTHQ9XCJDT05ORUNURURcIixNdD1cIklOSVRcIixQdD1bXSx4dD0oc2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXtEYXRlLm5vdygpO1B0LmZvckVhY2goZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUucmVxdWVzdHMubGVuZ3RoLTE7dD49MDt0LS0pe3ZhciBuPWUucmVxdWVzdHNbdF07bi50aW1lb3V0Q250Kyssbi50aW1lb3V0Q250Pj0xNSYmKGUucmVxdWVzdHMuc3BsaWNlKHQsMSksbi5wcm9taXNlcy5yZWplY3Qoe3JlYXNvbjpcIlRJTUVPVVRcIixjb2RlOjQ5OX0pKX19KX0sMWUzKSwxKSxWdD0xLFV0PTEsanQ9ZnVuY3Rpb24oKXt2YXIgZT11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiBlKHQpe3ZhciBuLGksYSxzLGMsZCx1O3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6cmV0dXJuIG49dC51aWQsaT10LnVybCxhPXQuc2VydmljZU5hbWUscz10LnNpZCxjPXQuYXBwSWQsZD10LmNuYW1lLHU9dC50aW1lb3V0LGUuYWJydXB0KFwicmV0dXJuXCIsbmV3IFByb21pc2UoZnVuY3Rpb24oZSx0KXt2YXIgbD0hMSxwPW5ldyBYTUxIdHRwUmVxdWVzdDtwLm9wZW4oXCJQT1NUXCIsaSwhMCkscC5zZXRSZXF1ZXN0SGVhZGVyKFwiQ29udGVudC1UeXBlXCIsXCJhcHBsaWNhdGlvbi9qc29uOyBjaGFyc2V0PXV0Zi04XCIpLHAuc2V0UmVxdWVzdEhlYWRlcihcIlgtUGFja2V0LVNlcnZpY2UtVHlwZVwiLFwiMFwiKSxwLnNldFJlcXVlc3RIZWFkZXIoXCJYLVBhY2tldC1VUklcIixcIjYxXCIpLHAub25sb2FkPWZ1bmN0aW9uKCl7aWYoIWwpe3ZhciBuPW51bGwsaT1udWxsO3RyeXtuPUpTT04ucGFyc2UocC5yZXNwb25zZVRleHQpfWNhdGNoKGUpe3ZhciBhPVwiSW52YWxpZCB0ZXh0IFwiLmNvbmNhdChwLnJlc3BvbnNlVGV4dCk7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihhKSxsPSEwLHQoYSl9aWYobi5jb2RlKXt2YXIgcj1cIkFQX0VSUl9cIi5jb25jYXQobi5jb2RlKTtyZXR1cm4gby5kZWZhdWx0LmVycm9yKHIsbiksbD0hMCx0KHIpfXRyeXtpPUpTT04ucGFyc2Uobi5qc29uX2JvZHl8fG4uanNvbil9Y2F0Y2goZSl7dmFyIHM9XCJJbnZhbGlkIGpzb25fYm9keSBcIi5jb25jYXQocC5yZXNwb25zZVRleHQpO3JldHVybiBvLmRlZmF1bHQuZXJyb3IocyksbD0hMCx0KHMpfWlmKDIwMCE9PWkuY29kZSl7dmFyIGM9XCJBUFBDRU5URVJfQ09ERV9cIi5jb25jYXQoaS5jb2RlKTtyZXR1cm4gby5kZWZhdWx0LmVycm9yKGMsaSksbD0hMCx0KGMpfWlmKCEoaS5zZXJ2ZXJzJiZpLnNlcnZlcnMubGVuZ3RoPjApKXtyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiQVBQQ0VOVEVSX0VNUFRZX1NFUlZFUlwiLGkpLGw9ITAsdChcIkFQUENFTlRFUl9FTVBUWV9TRVJWRVJcIil9cmV0dXJuIGw9ITAsZShpKX19LHAub25lcnJvcj1mdW5jdGlvbihlKXt2YXIgbj1cIkFQX1JFVUVTVF9cIi5jb25jYXQoZS50eXBlKTtvLmRlZmF1bHQuZXJyb3IobixpLGUpLGx8fChsPSEwLHQobikpfSxwLm9udGltZW91dD1mdW5jdGlvbihlKXtvLmRlZmF1bHQuZXJyb3IoXCJBUF9SRVVFU1RfVElNRU9VVFwiLGksZSksbHx8KGw9ITAsdChcIkFQX1JFVUVTVF9USU1FT1VUXCIpKX0sdSYmKHAudGltZW91dD11KSxwLnNlbmQoSlNPTi5zdHJpbmdpZnkoe3NlcnZpY2VfbmFtZTphLGpzb25fYm9keTpKU09OLnN0cmluZ2lmeSh7Y29tbWFuZDpcImNvbnZlcmdlQWxsb2NhdGVFZGdlXCIsc2lkOnMsdWlkOm4rXCJcIixhcHBJZDpjLHRzOk1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpLHNlcTp4dCsrLGNuYW1lOmQsdmVyc2lvbjpyLlZFUlNJT04scmVxdWVzdElkOlZ0Kyt9KX0pKX0pKTtjYXNlIDI6Y2FzZVwiZW5kXCI6cmV0dXJuIGUuc3RvcCgpfX0sZSx0aGlzKX0pKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSxGdD1mdW5jdGlvbigpe3ZhciBlPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIGUodCl7dmFyIG4saSxhLHMsYyxkLHUsbCxwLGYsbSxnO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6bj10LnNlcnZpY2VOYW1lLGk9dC5zaWQsYT10LmFwcElkLHM9dC5jbmFtZSxjPXQudWlkLGQ9bnVsbCxlLnQwPWNlLmEua2V5cyhPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiVUFQX0FQXCIpKTtjYXNlIDM6aWYoKGUudDE9ZS50MCgpKS5kb25lKXtlLm5leHQ9MzQ7YnJlYWt9cmV0dXJuIHU9ZS50MS52YWx1ZSxsPVwiaHR0cHM6Ly9cIi5jb25jYXQoT2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIlVBUF9BUFwiKVt1XSxcIi9hcGkvdjE/YWN0aW9uPXVhcFwiKSxwPXZvaWQgMCxlLnByZXY9NyxlLm5leHQ9MTAsanQoe3VpZDpjLHVybDpsLGFwcElkOmEsc2lkOmksc2VydmljZU5hbWU6bixjbmFtZTpzLHRpbWVvdXQ6T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkhUVFBfQ09OTkVDVF9USU1FT1VUXCIpfSk7Y2FzZSAxMDpwPWUuc2VudCxlLm5leHQ9MTg7YnJlYWs7Y2FzZSAxMzpyZXR1cm4gZS5wcmV2PTEzLGUudDI9ZS5jYXRjaCg3KSxvLmRlZmF1bHQuZXJyb3IoZS50MiksZD1lLnQyLGUuYWJydXB0KFwiY29udGludWVcIiwzKTtjYXNlIDE4OmY9Y2UuYS5tYXJrKGZ1bmN0aW9uIGUodCl7dmFyIGksYSxyO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24oZSl7Zm9yKDs7KXN3aXRjaChlLnByZXY9ZS5uZXh0KXtjYXNlIDA6aWYoaT1wLnNlcnZlcnNbdF0sYT1cIndzczovL1wiLmNvbmNhdChpLmFkZHJlc3MucmVwbGFjZSgvXFwuL2csXCItXCIpLFwiLmVkZ2UuXCIpLmNvbmNhdCh0JTI9PTA/XCJhZ29yYS5pb1wiOlwiYWdvcmFpby5jblwiLFwiOlwiKS5jb25jYXQoaS53c3MsXCI/c2VydmljZU5hbWU9XCIpLmNvbmNhdChlbmNvZGVVUklDb21wb25lbnQobikpLGkud3NzKXtlLm5leHQ9NTticmVha31yZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiSW52YWxpZCBzZXJ2ZXIgcmVzcG9uc2VcIixpKSxlLmFicnVwdChcInJldHVyblwiLFwiY29udGludWVcIik7Y2FzZSA1OnJldHVybiBlLnByZXY9NSxlLm5leHQ9OCxuZXcgUHJvbWlzZShmdW5jdGlvbihlLHQpe3ZhciBuPW5ldyBXZWJTb2NrZXQoYSksaT0hMTtuLmFkZEV2ZW50TGlzdGVuZXIoXCJvcGVuXCIsZnVuY3Rpb24oKXtpfHwoaT0hMCxlKG4pKX0pLG4uYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsZnVuY3Rpb24oZSl7aXx8KGk9ITAsdChlKSl9KX0pO2Nhc2UgODpyZXR1cm4ocj1lLnNlbnQpLndvcmtlclRva2VuPXAud29ya2VyVG9rZW4sZS5hYnJ1cHQoXCJyZXR1cm5cIix7djpyfSk7Y2FzZSAxMzplLnByZXY9MTMsZS50MD1lLmNhdGNoKDUpLG8uZGVmYXVsdC5lcnJvcihlLnQwKSxkPWUudDA7Y2FzZSAxNzpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLHRoaXMsW1s1LDEzXV0pfSksbT0wO2Nhc2UgMjA6aWYoIShtPHAuc2VydmVycy5sZW5ndGgpKXtlLm5leHQ9MzI7YnJlYWt9cmV0dXJuIGUuZGVsZWdhdGVZaWVsZChmKG0pLFwidDNcIiwyMik7Y2FzZSAyMjpnPWUudDMsZS50ND1nLGUubmV4dD1cImNvbnRpbnVlXCI9PT1lLnQ0PzI2OjI3O2JyZWFrO2Nhc2UgMjY6cmV0dXJuIGUuYWJydXB0KFwiY29udGludWVcIiwyOSk7Y2FzZSAyNzppZihcIm9iamVjdFwiIT09SGUoKShnKSl7ZS5uZXh0PTI5O2JyZWFrfXJldHVybiBlLmFicnVwdChcInJldHVyblwiLGcudik7Y2FzZSAyOTptKyssZS5uZXh0PTIwO2JyZWFrO2Nhc2UgMzI6ZS5uZXh0PTM7YnJlYWs7Y2FzZSAzNDp0aHJvdyBkO2Nhc2UgMzU6Y2FzZVwiZW5kXCI6cmV0dXJuIGUuc3RvcCgpfX0sZSx0aGlzLFtbNywxM11dKX0pKTtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIGUuYXBwbHkodGhpcyxhcmd1bWVudHMpfX0oKSxCdD17fSxIdD1mdW5jdGlvbihlKXtyZXR1cm4gQnRbZV0/KEJ0W2VdKz0xLEJ0W2VdKTooQnRbZV09MSxCdFtlXSl9LFd0PXt9LEd0PWZ1bmN0aW9uKGUpe3JldHVybiBXdFtlXT8oV3RbZV0rPTEsV3RbZV0pOihXdFtlXT0xLFd0W2VdKX0scXQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5hcHBJZCxuPWUuY25hbWUsaT1lLnVpZCxhPWUuc2lkLHM9YygpO3JldHVybiBzLnN0YXR1cz1NdCxzLnBpbmdwb25nVGltZXI9bnVsbCxzLmNvbm5lY3Rpb249bnVsbCxzLnJlcXVlc3RzPVtdLHMuYXBwSWQ9dCxzLmNuYW1lPW4scy51aWQ9aSxzLnNpZD1hLHMuY29ubmVjdGlvbj1udWxsLHMuY29ubmVjdGlvbklkPVV0Kysscy5jb25uZWN0PWZ1bmN0aW9uKCl7dmFyIGU9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gZSh0KXt2YXIgbjtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKG49dC53c0NsaWVudCxzLnN0YXR1cz09PU10KXtlLm5leHQ9NDticmVha31yZXR1cm4gby5kZWZhdWx0LmRlYnVnKFwiSWdub3JlZCBVYXBDb25uZWN0aW9uLmNvbm5lY3Q6IFwiLmNvbmNhdChzLnN0YXR1cykpLGUuYWJydXB0KFwicmV0dXJuXCIpO2Nhc2UgNDpzLmNvbm5lY3Rpb249bixzLnN0YXR1cz1MdCxzLl9mbHVzaCgpLHMuc3RhcnRQaW5ncG9uZygpLG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsb3NlXCIsZnVuY3Rpb24oZSl7aWYoY29uc29sZS5sb2coXCJXZWJvc2tjZXQgY2xvc2VkXCIsZSksbj09PXMuY29ubmVjdGlvbil7dmFyIHQ9e3R5cGU6XCJjbG9zZVwiLGV2dDplfTtzLmRpc3BhdGNoRXZlbnQodCl9fSksbi5hZGRFdmVudExpc3RlbmVyKFwibWVzc2FnZVwiLGZ1bmN0aW9uKGUpe2lmKGUuZGF0YSl7dmFyIHQ9bnVsbDt0cnl7dD1KU09OLnBhcnNlKGUuZGF0YSl9Y2F0Y2goZSl7cmV0dXJuIHZvaWQgby5kZWZhdWx0LmVycm9yKFwiSW52YWxpZCBkYXRhIGZyb20gd29ya2VyIG1hbmFnZXJcIix0KX1pZih0LnJlcXVlc3RJZClmb3IodmFyIG49cy5yZXF1ZXN0cy5sZW5ndGgtMTtuPj0wO24tLSl7dmFyIGk9cy5yZXF1ZXN0c1tuXTtpZihpLnJlcURhdGEucmVxdWVzdElkPT09dC5yZXF1ZXN0SWQpe3MucmVxdWVzdHMuc3BsaWNlKG4sMSksdC5jb2RlPDQwMCYmdC5jb2RlPj0yMDA/aS5wcm9taXNlcy5yZXNvbHZlKHQpOmkucHJvbWlzZXMucmVqZWN0KHQpO2JyZWFrfX1lbHNlIHQudHlwZT1cIm5vdGlmaWNhdGlvblwiLHMuZGlzcGF0Y2hFdmVudCh0KX19KTtjYXNlIDEwOmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUsdGhpcyl9KSk7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBlLmFwcGx5KHRoaXMsYXJndW1lbnRzKX19KCkscy5kaXNjb25uZWN0PXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIGUoKXt2YXIgdDtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmZvcih0IGluIHMuc3RhdHVzPWt0LGNsZWFySW50ZXJ2YWwocy5waW5ncG9uZ1RpbWVyKSxzLnBpbmdwb25nVGltZXI9bnVsbCxzLnJlcXVlc3RzKXMucmVxdWVzdHNbdF0ucHJvbWlzZXMucmVqZWN0KFwiRElTQ09OTkVDVEVEXCIpO3JldHVybiBzLnJlcXVlc3RzPVtdLG51bGwscy5jb25uZWN0aW9uJiYocy5jb25uZWN0aW9uLmNsb3NlKCkscy5jb25uZWN0aW9uPW51bGwpLHMuc3RhdHVzPUR0LGUuYWJydXB0KFwicmV0dXJuXCIsbnVsbCk7Y2FzZSA5OmNhc2VcImVuZFwiOnJldHVybiBlLnN0b3AoKX19LGUsdGhpcyl9KSkscy5yZXF1ZXN0PWZ1bmN0aW9uKCl7dmFyIGU9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gZSh0KXt2YXIgbixpLGEsYztyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKGUpe2Zvcig7Oylzd2l0Y2goZS5wcmV2PWUubmV4dCl7Y2FzZSAwOmlmKG49UygpKHtjb21tYW5kOlwicmVxdWVzdFwiLHNka1ZlcnNpb246ci5WRVJTSU9OLHNlcTpHdChzLnNpZCksYXBwSWQ6cy5hcHBJZCxjbmFtZTpzLmNuYW1lLHVpZDpcIlwiK3MudWlkLHNpZDpzLnNpZCxyZXF1ZXN0SWQ6SHQocy5zaWQpLHRzOk1hdGguZmxvb3IoRGF0ZS5ub3coKS8xZTMpfSx0KSxcIklOSVRcIiE9PXMuc3RhdHVzKXtlLm5leHQ9NTticmVha31yZXR1cm4gZS5hYnJ1cHQoXCJyZXR1cm5cIixuZXcgUHJvbWlzZShmdW5jdGlvbihlLHQpe3ZhciBpPXtyZXFEYXRhOm4sc3RhbGxlZFRzOkRhdGUubm93KCksdGltZW91dENudDowLHByb21pc2VzOntyZXNvbHZlOmUscmVqZWN0OnR9fTtzLnJlcXVlc3RzLnB1c2goaSl9KSk7Y2FzZSA1OmlmKHMuY29ubmVjdGlvbil7ZS5uZXh0PTExO2JyZWFrfXRocm93IGk9XCJOT19XRUJTT0NLRVRfQ09OTkVDVElPTlwiLG8uZGVmYXVsdC5lcnJvcihpKSxuZXcgRXJyb3IoaSk7Y2FzZSAxMTppZihzLnN0YXR1cyE9PWt0fHx0LmNsaWVudFJlcXVlc3QmJlwiRGVzdHJveVdvcmtlclwiPT09dC5jbGllbnRSZXF1ZXN0LmNvbW1hbmQpe2UubmV4dD0xNzticmVha310aHJvdyBhPVwiV0VCU09DS0VUX0RJU0NPTk5FQ1RJTkdcIixvLmRlZmF1bHQuZXJyb3IoYSksbmV3IEVycm9yKGEpO2Nhc2UgMTc6aWYoXCJESVNDT05ORUNURURcIiE9PXMuc3RhdHVzKXtlLm5leHQ9MjM7YnJlYWt9dGhyb3cgYz1cIldFQlNPQ0tFVF9ESVNDT05ORUNURURcIixvLmRlZmF1bHQuZXJyb3IoYyksbmV3IEVycm9yKGMpO2Nhc2UgMjM6cmV0dXJuIGUuYWJydXB0KFwicmV0dXJuXCIsbmV3IFByb21pc2UoZnVuY3Rpb24oZSx0KXt2YXIgaT17cmVxRGF0YTpuLHN0YWxsZWRUczpEYXRlLm5vdygpLHRpbWVvdXRDbnQ6MCxwcm9taXNlczp7cmVzb2x2ZTplLHJlamVjdDp0fX07cy5yZXF1ZXN0cy5wdXNoKGkpLHMuX2ZsdXNoKCl9KSk7Y2FzZSAyNDpjYXNlXCJlbmRcIjpyZXR1cm4gZS5zdG9wKCl9fSxlLHRoaXMpfSkpO3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gZS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9fSgpLHMuX2ZsdXNoPWZ1bmN0aW9uKCl7cy5jb25uZWN0aW9uJiZzLnN0YXR1cz09PUx0JiZzLnJlcXVlc3RzLmZvckVhY2goZnVuY3Rpb24oZSl7ZS5zZW50VHN8fChlLnNlbnRUcz1EYXRlLm5vdygpLGUucmVxRGF0YS5jbGllbnRSZXF1ZXN0JiYoZS5yZXFEYXRhLmNsaWVudFJlcXVlc3Qud29ya2VyVG9rZW49cy5jb25uZWN0aW9uLndvcmtlclRva2VuKSxzLmNvbm5lY3Rpb24uc2VuZChKU09OLnN0cmluZ2lmeShlLnJlcURhdGEpKSl9KX0scy5zdGFydFBpbmdwb25nPWZ1bmN0aW9uKCl7Y2xlYXJJbnRlcnZhbChzLnBpbmdwb25nVGltZXIpLHMucGluZ3BvbmdUaW1lcj1zZXRJbnRlcnZhbCh1ZSgpKGNlLmEubWFyayhmdW5jdGlvbiBlKCl7cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbihlKXtmb3IoOzspc3dpdGNoKGUucHJldj1lLm5leHQpe2Nhc2UgMDppZihzLnN0YXR1cyE9PUx0fHwhcy5jb25uZWN0aW9ufHwxIT09cy5jb25uZWN0aW9uLnJlYWR5U3RhdGUpe2UubmV4dD05O2JyZWFrfXJldHVybiBlLnByZXY9MSxlLm5leHQ9NCxzLnJlcXVlc3Qoe2NvbW1hbmQ6XCJwaW5nXCJ9KTtjYXNlIDQ6ZS5uZXh0PTk7YnJlYWs7Y2FzZSA2OmUucHJldj02LGUudDA9ZS5jYXRjaCgxKSxjb25zb2xlLmVycm9yKFwicGluZ3BvbmdcIixlLnQwKTtjYXNlIDk6Y2FzZVwiZW5kXCI6cmV0dXJuIGUuc3RvcCgpfX0sZSx0aGlzLFtbMSw2XV0pfSkpLDZlMyl9LHMuX2ZsdXNoKCkscy5zdGFydFBpbmdwb25nKCksUHQucHVzaChzKSxzfSxZdD1mdW5jdGlvbihlKXtlLmRpc2Nvbm5lY3QoKTt2YXIgdD1QdC5maW5kKGZ1bmN0aW9uKHQpe3JldHVybiBlLmNvbm5lY3Rpb25JZD09PXQuY29ubmVjdGlvbklkfSk7UHQuc3BsaWNlKHQsMSl9LEp0PWZ1bmN0aW9uKGUpe3JldHVyblwibnVtYmVyXCI9PXR5cGVvZiBlJiYwPD1lJiZlPD00Mjk0OTY3Mjk1fTt2YXIgS3Q9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtpZihPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiTElWRVNUUkVBTUlOR19BTElHTlwiKSlzd2l0Y2goZSl7Y2FzZSAyMDA6dD1SO2JyZWFrO2Nhc2UgNDUxOnQ9QTticmVhaztjYXNlIDQ1Mzp0PU87YnJlYWs7Y2FzZSA0NzA6dD1QO2JyZWFrO2Nhc2UgNDk5OnQ9QzticmVhaztkZWZhdWx0OnQ9Tn1yZXR1cm4gdH0senQ9ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtpZihPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiTElWRVNUUkVBTUlOR19BTElHTlwiKSlzd2l0Y2goZSl7Y2FzZSAyMDA6dD13O2JyZWFrO2Nhc2UgNDA0OmNhc2UgNDUyOnQ9azticmVhaztjYXNlIDQ1Mzp0PUQ7YnJlYWs7Y2FzZSA0OTk6dD1MO2JyZWFrO2RlZmF1bHQ6dD1NfXJldHVybiB0fSxYdD1mdW5jdGlvbihlKXt2YXIgdD17a2V5OnZvaWQgMCxoaWdoU3RyZWFtOm51bGwsbG93U3RyZWFtOm51bGwsbG93U3RyZWFtUGFyYW1ldGVyOm51bGwsaXNEdWFsU3RyZWFtOiExLGhpZ2hTdHJlYW1TdGF0ZToyLGxvd1N0cmVhbVN0YXRlOjIscHJveHlTZXJ2ZXI6bnVsbH07dC50dXJuU2VydmVyPXttb2RlOlwiYXV0b1wiLHVzZXJuYW1lOlwidGVzdFwiLGNyZWRlbnRpYWw6XCIxMTExMTFcIixmb3JjZXR1cm46T2JqZWN0KHIuZ2V0UGFyYW1ldGVyKShcIkZPUkNFX1RVUk5cIil9LHQudXNlUHJveHlTZXJ2ZXI9ITEsdC5tb2RlPWUubW9kZSx0LmNvZGVjPWUuY29kZWMsdC5jbGllbnRJZD1PYmplY3QobmUuZ2VuZXJhdGVTZXNzaW9uSWQpKCkuc2xpY2UoMCw1KSx0LnVpbnRVaWQ9bnVsbDtlPVMoKSh7fSxlKTtyZXR1cm4gdC5hZXNwYXNzd29yZD1udWxsLHQuYWVzbW9kZT1cIm5vbmVcIix0Lmhhc1B1Ymxpc2hlZD0hMSx0LmdldFNlc3Npb25JZD1mdW5jdGlvbigpe3JldHVybiBlLnNlc3Npb25JZH0sdC5zdGFydENoYW5uZWxNZWRpYVJlbGF5PWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm4gaSYmaShlKTtpJiZpKCl9LG5hbWU6XCJDbGllbnQuc3RhcnRDaGFubmVsTWVkaWFSZWxheVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYoIShuIGluc3RhbmNlb2YgS2UuQ2hhbm5lbE1lZGlhUmVsYXlDb25maWd1cmF0aW9uKSl0aHJvd1wiQ29uZmlncmF0aW9uIHNob3VsZCBiZSBpbnN0YW5jZSBvZiBbQ2hhbm5lbE1lZGlhUmVsYXlDb25maWd1cmF0aW9uXVwiO3ZhciByPW4uZ2V0U3JjQ2hhbm5lbE1lZGlhSW5mbygpLG89bi5nZXREZXN0Q2hhbm5lbE1lZGlhSW5mb3MoKTtpZihPYmplY3QocmUuaXNFbXB0eSkocikpdGhyb3dcInNyY0NoYW5uZWxNZWRpYUluZm8gc2hvdWxkIG5vdCBiZSBlbXB0eVwiO2lmKE9iamVjdChyZS5pc0VtcHR5KShvKXx8MD09PW8ubGVuZ3RoKXRocm93XCJkZXN0Q2hhbm5lbE1lZGlhSW5mb3Mgc2hvdWxkIG5vdCBiZSBlbXB0eVwiO2lmKCFPYmplY3QobmUuaXMzMlVpbnQpKHIudWlkKSl0aHJvd1wiSW52YWxpZCB1aWQgaW4gc3JjQ2hhbm5lbE1lZGlhSW5mb1wiO2lmKCFPYmplY3QocmUuaXNWYWxpZENoYW5uZWxOYW1lKShyLmNoYW5uZWxOYW1lKSl0aHJvd1wiSW52YWxpZCBjaGFubmVsTmFtZSBpbiBzcmNDaGFubmVsTWVkaWFJbmZvXCI7aWYoci50b2tlbiYmIU9iamVjdChyZS5pc1ZhbGlkVG9rZW4pKHIudG9rZW4pKXRocm93XCJJbnZhbGlkIHRva2VuIGluIHNyY0NoYW5uZWxNZWRpYUluZm9cIjtpZihvLmZvckVhY2goZnVuY3Rpb24oZSl7aWYoIU9iamVjdChuZS5pczMyVWludCkoZS51aWQpKXRocm93XCJJbnZhbGlkIHVpZCBpbiBkZXN0Q2hhbm5lbE1lZGlhSW5mb1wiO2lmKCFPYmplY3QocmUuaXNWYWxpZENoYW5uZWxOYW1lKShlLmNoYW5uZWxOYW1lKSl0aHJvd1wiSW52YWxpZCBjaGFubmVsTmFtZSBpbiBkZXN0Q2hhbm5lbE1lZGlhSW5mb1wiO2lmKGUudG9rZW4mJiFPYmplY3QocmUuaXNWYWxpZFRva2VuKShlLnRva2VuKSl0aHJvd1wiSW52YWxpZCB0b2tlbiBpbiBkZXN0Q2hhbm5lbE1lZGlhSW5mb1wifSksdC5nYXRld2F5Q2xpZW50LnN0YXRlIT09UnQuQ09OTkVDVEVEKXRocm93XCJzdGFydENoYW5uZWxNZWRpYVJlbGF5IHNob3VsZCBiZSB1c2VkIGFmdGVyIGpvaW5cIjt0LmdhdGV3YXlDbGllbnQuc3RhcnRDaGFubmVsTWVkaWFSZWxheShuKS50aGVuKGZ1bmN0aW9uKCl7YSYmYSgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YSYmYShlKX0pfSx0LnVwZGF0ZUNoYW5uZWxNZWRpYVJlbGF5PWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSl7aWYoZSlyZXR1cm4gaSYmaShlKTtpJiZpKCl9LG5hbWU6XCJDbGllbnQudXBkYXRlQ2hhbm5lbE1lZGlhUmVsYXlcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKCEobiBpbnN0YW5jZW9mIEtlLkNoYW5uZWxNZWRpYVJlbGF5Q29uZmlndXJhdGlvbikpdGhyb3dcIkNvbmZpZ3JhdGlvbiBzaG91bGQgYmUgaW5zdGFuY2Ugb2YgW0NoYW5uZWxNZWRpYVJlbGF5Q29uZmlndXJhdGlvbl1cIjt2YXIgcj1uLmdldFNyY0NoYW5uZWxNZWRpYUluZm8oKSxvPW4uZ2V0RGVzdENoYW5uZWxNZWRpYUluZm9zKCk7aWYoT2JqZWN0KHJlLmlzRW1wdHkpKHIpKXRocm93XCJzcmNDaGFubmVsTWVkaWFJbmZvIHNob3VsZCBub3QgYmUgZW1wdHlcIjtpZihPYmplY3QocmUuaXNFbXB0eSkobyl8fDA9PT1vLmxlbmd0aCl0aHJvd1wiZGVzdENoYW5uZWxNZWRpYUluZm9zIHNob3VsZCBub3QgYmUgZW1wdHlcIjtpZighT2JqZWN0KG5lLmlzMzJVaW50KShyLnVpZCkpdGhyb3dcIkludmFsaWQgdWlkIGluIHNyY0NoYW5uZWxNZWRpYUluZm9cIjtpZighT2JqZWN0KHJlLmlzVmFsaWRDaGFubmVsTmFtZSkoci5jaGFubmVsTmFtZSkpdGhyb3dcIkludmFsaWQgY2hhbm5lbE5hbWUgaW4gc3JjQ2hhbm5lbE1lZGlhSW5mb1wiO2lmKHIudG9rZW4mJiFPYmplY3QocmUuaXNWYWxpZFRva2VuKShyLnRva2VuKSl0aHJvd1wiSW52YWxpZCB0b2tlbiBpbiBzcmNDaGFubmVsTWVkaWFJbmZvXCI7aWYoby5mb3JFYWNoKGZ1bmN0aW9uKGUpe2lmKCFPYmplY3QobmUuaXMzMlVpbnQpKGUudWlkKSl0aHJvd1wiSW52YWxpZCB1aWQgaW4gZGVzdENoYW5uZWxNZWRpYUluZm9cIjtpZighT2JqZWN0KHJlLmlzVmFsaWRDaGFubmVsTmFtZSkoZS5jaGFubmVsTmFtZSkpdGhyb3dcIkludmFsaWQgY2hhbm5lbE5hbWUgaW4gZGVzdENoYW5uZWxNZWRpYUluZm9cIjtpZihlLnRva2VuJiYhT2JqZWN0KHJlLmlzVmFsaWRUb2tlbikoZS50b2tlbikpdGhyb3dcIkludmFsaWQgdG9rZW4gaW4gZGVzdENoYW5uZWxNZWRpYUluZm9cIn0pLHQuZ2F0ZXdheUNsaWVudC5zdGF0ZSE9PVJ0LkNPTk5FQ1RFRCl0aHJvd1widXBkYXRlQ2hhbm5lbE1lZGlhUmVsYXkgc2hvdWxkIGJlIHVzZWQgYWZ0ZXIgam9pblwiO3QuZ2F0ZXdheUNsaWVudC51cGRhdGVDaGFubmVsTWVkaWFSZWxheShuKS50aGVuKGZ1bmN0aW9uKCl7YSYmYSgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YSYmYShlKX0pfSx0LnN0b3BDaGFubmVsTWVkaWFSZWxheT1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlKXtpZihlKXJldHVybiBuJiZuKGUpO24mJm4oKX0sbmFtZTpcIkNsaWVudC5zdG9wQ2hhbm5lbE1lZGlhUmVsYXlcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3QuZ2F0ZXdheUNsaWVudC5zdG9wQ2hhbm5lbE1lZGlhUmVsYXkoKS50aGVuKGZ1bmN0aW9uKCl7aSYmaSgpfSkuY2F0Y2goZnVuY3Rpb24oZSl7aSYmaShlKX0pfSx0LmdldENvbm5lY3Rpb25TdGF0ZT1mdW5jdGlvbigpe3ZhciBuPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuZ2V0Q29ubmVjdGlvblN0YXRlXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSxpPVJ0LmNvbm5ldGlvblN0YXRlTWFwW3QuZ2F0ZXdheUNsaWVudC5zdGF0ZV07cmV0dXJuIG4oKSxpfSx0LnNldENsaWVudFJvbGU9ZnVuY3Rpb24obixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazppLG5hbWU6XCJDbGllbnQuc2V0Q2xpZW50Um9sZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYoT2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShuLFwic2V0Q2xpZW50Um9sZVwiLFtcImhvc3RcIixcImF1ZGllbmNlXCJdKSxcInJ0Y1wiPT09dC5tb2RlKXt2YXIgcj1cIlJUQyBtb2RlIGNhbiBub3QgdXNlIHNldENsaWVudFJvbGVcIjtyZXR1cm4gby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFwiKS5jb25jYXQocikpLGEmJmEocil9dC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuc3RhdGU9PT1SdC5DT05ORUNURUQ/KFwiYXVkaWVuY2VcIj09PW4mJigwPT09dGhpcy5oaWdoU3RyZWFtU3RhdGU/dGhpcy5fdW5wdWJsaXNoKHRoaXMuaGlnaFN0cmVhbSxmdW5jdGlvbigpe2EmJmEobnVsbCx7cm9sZTpufSl9LGZ1bmN0aW9uKGUpe2EmJmEoZSl9KTp0LmdhdGV3YXlDbGllbnQuc2V0Q2xpZW50Um9sZShcImF1ZGllbmNlXCIsYSkpLFwiaG9zdFwiPT09biYmdC5nYXRld2F5Q2xpZW50LnNldENsaWVudFJvbGUoXCJob3N0XCIsYSkpOih0LmdhdGV3YXlDbGllbnQucm9sZT1uLGEmJmEobnVsbCx7cm9sZTpufSkpfSx0LmdldEdhdGV3YXlJbmZvPWZ1bmN0aW9uKGUpe2lmKHQuZ2F0ZXdheUNsaWVudC5zdGF0ZSE9PVJ0LkNPTk5FQ1RFRCl7dmFyIG49XCJDbGllbnQgaXMgbm90IGluIGNvbm5lY3RlZCBzdGF0ZVwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFwiKS5jb25jYXQobikpLHZvaWQgZShuKX10LmdhdGV3YXlDbGllbnQuZ2V0R2F0ZXdheUluZm8oZnVuY3Rpb24odCl7ZShudWxsLHQpfSxlKX0sdC5yZW5ld1Rva2VuPWZ1bmN0aW9uKG4saSxhKXt2YXIgcj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIkZhaWxlZCB0byByZW5ldyB0b2tlbiBcIi5jb25jYXQoZSksdCksYSYmYShlKTtpJiZpKHQpfSxuYW1lOlwiQ2xpZW50LnJlbmV3VG9rZW5cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKCFPYmplY3QocmUuaXNWYWxpZFRva2VuKShuKSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkIHRva2VuOiBUb2tlbiBpcyBvZiB0aGUgc3RyaW5nIHR5cGUgLkxlbmd0aCBvZiB0aGUgc3RyaW5nOiBbMSwyNTVdLiBBU0NJSSBjaGFyYWN0ZXJzIG9ubHkuXCIpO3JldHVybiB0LmdhdGV3YXlDbGllbnQ/dC5rZXk/KHQua2V5PW4sdm9pZCB0LmdhdGV3YXlDbGllbnQucmVuZXdUb2tlbihuLGZ1bmN0aW9uKGUpe3JldHVybiByKG51bGwsZSl9LHIpKTooby5kZWZhdWx0LmVycm9yKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSByZW5ld1Rva2VuIHNob3VsZCBub3QgYmUgY2FsbGVkIGJlZm9yZSB1c2VyIGpvaW5cIikpLHIoVi5JTlZBTElEX09QRVJBVElPTikpOihvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIHJlbmV3VG9rZW4gRmFpbGVkLiBHYXRld2F5Q2xpZW50IG5vdCBFeGlzdFwiKSkscihWLklOVkFMSURfT1BFUkFUSU9OKSl9LHQuc2V0TG93U3RyZWFtUGFyYW1ldGVyPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc2V0TG93U3RyZWFtUGFyYW1ldGVyXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkobixcInBhcmFtXCIpO3ZhciBhPW4ud2lkdGgscj1uLmhlaWdodCxjPW4uZnJhbWVyYXRlLGQ9bi5iaXRyYXRlO09iamVjdChyZS5pc0VtcHR5KShhKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGEsXCJ3aWR0aFwiKSxPYmplY3QocmUuaXNFbXB0eSkocil8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShyLFwiaGVpZ2h0XCIpLE9iamVjdChyZS5pc0VtcHR5KShjKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGMsXCJmcmFtZXJhdGVcIiksT2JqZWN0KHJlLmlzRW1wdHkpKGQpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZCxcImJpdHJhdGVcIiwxLDFlNyksKCFhJiZyfHxhJiYhcikmJm8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBUaGUgd2lkdGggYW5kIGhlaWdodCBwYXJhbWV0ZXJzIHRha2UgZWZmZWN0IG9ubHkgd2hlbiBib3RoIGFyZSBzZXRcIikpLHQubG93U3RyZWFtUGFyYW1ldGVyPW4saSgpfSx0LmluaXQ9ZnVuY3Rpb24obixpLGEpe3ZhciByPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gYSYmYShlKTtpJiZpKHQpfSxuYW1lOlwiQ2xpZW50LmluaXRcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShuKSxPYmplY3QobS5pc0Nocm9tZUtlcm5lbCkoKSYmT2JqZWN0KG0uZ2V0Q2hyb21lS2VybmVsVmVyc2lvbikoKTw9NDg/YT9yKFYuQkFEX0VOVklST05NRU5UKTpPYmplY3QobmUucG9wQmFuVGlwKSgpOihvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gSW5pdGlhbGl6aW5nIEFnb3JhUlRDIGNsaWVudCwgYXBwSWQ6IFwiKS5jb25jYXQobixcIi5cIikpLGUuYXBwSWQ9bixlLnNlc3Npb25JZD1PYmplY3QobmUuZ2VuZXJhdGVTZXNzaW9uSWQpKCkscigpKX0sdC5zZXRUdXJuU2VydmVyPWZ1bmN0aW9uKG4pe3ZhciBpPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc2V0VHVyblNlcnZlclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYodC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuc3RhdGUhPT1SdC5ESVNDT05ORUNURUQpdGhyb3cgbmV3IEVycm9yKFwiU2V0IHR1cm4gc2VydmVyIGJlZm9yZSBqb2luIGNoYW5uZWxcIik7aWYodC51c2VQcm94eVNlcnZlcil0aHJvdyBuZXcgRXJyb3IoXCJZb3UgaGF2ZSBhbHJlYWR5IHNldCB0aGUgcHJveHlcIik7T2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKG4sXCJ0dXJuU2VydmVyXCIpO3ZhciBhPW4udHVyblNlcnZlclVSTCxyPW4udXNlcm5hbWUsYz1uLnBhc3N3b3JkLGQ9bi51ZHBwb3J0LHU9bi5mb3JjZXR1cm4sbD1uLnRjcHBvcnQ7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGEsXCJ0dXJuU2VydmVyVVJMXCIpLE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShyLFwidXNlcm5hbWVcIiksT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGMsXCJwYXNzd29yZFwiKSxPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykoZCxcInVkcHBvcnRcIiksT2JqZWN0KHJlLmlzRW1wdHkpKHUpfHxPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKHUsXCJmb3JjZXR1cm5cIiksdC50dXJuU2VydmVyLm1vZGU9XCJtYW51YWxcIix0LnR1cm5TZXJ2ZXIudXJsPWEsdC50dXJuU2VydmVyLnVkcHBvcnQ9ZCx0LnR1cm5TZXJ2ZXIudXNlcm5hbWU9cix0LnR1cm5TZXJ2ZXIuY3JlZGVudGlhbD1jLHQudHVyblNlcnZlci5mb3JjZXR1cm49dXx8ITEsT2JqZWN0KHJlLmlzRW1wdHkpKGwpfHwoT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGwsXCJ0Y3Bwb3J0XCIpLHQudHVyblNlcnZlci50Y3Bwb3J0PWwsby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFNldCB0dXJuc2VydmVyIHRjcHVybC4gXCIpLmNvbmNhdCh0LnR1cm5TZXJ2ZXIudXJsLFwiOlwiKS5jb25jYXQodC50dXJuU2VydmVyLnRjcHBvcnQpKSksby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFNldCB0dXJuc2VydmVyIHVkcHVybC4gXCIpLmNvbmNhdCh0LnR1cm5TZXJ2ZXIudXJsLFwiOlwiKS5jb25jYXQodC50dXJuU2VydmVyLnVkcHBvcnQsXCIsdXNlcm5hbWU6IFwiKS5jb25jYXQodC50dXJuU2VydmVyLnVlcm5hbWUsXCIscGFzc3dvcmQ6IFwiKS5jb25jYXQodC50dXJuU2VydmVyLmNyZWRlbnRpYWwpKSxpKCl9LHQuc2V0UHJveHlTZXJ2ZXI9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zZXRQcm94eVNlcnZlclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYodC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuc3RhdGUhPT1SdC5ESVNDT05ORUNURUQpdGhyb3cgbmV3IEVycm9yKFwiU2V0IHByb3h5IHNlcnZlciBiZWZvcmUgam9pbiBjaGFubmVsXCIpO2lmKCFuKXRocm93IG5ldyBFcnJvcihcIkRvIG5vdCBzZXQgdGhlIHByb3h5U2VydmVyIHBhcmFtZXRlciBhcyBlbXB0eVwiKTtpZih0LnVzZVByb3h5U2VydmVyKXRocm93IG5ldyBFcnJvcihcIllvdSBoYXZlIGFscmVhZHkgc2V0IHRoZSBwcm94eVwiKTtPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobixcInByb3h5U2VydmVyXCIpLHQucHJveHlTZXJ2ZXI9bixzLmIuc2V0UHJveHlTZXJ2ZXIobiksby5kZWZhdWx0LnNldFByb3h5U2VydmVyKG4pLGkoKX0sdC5zdGFydFByb3h5U2VydmVyPWZ1bmN0aW9uKCl7dmFyIG49cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zdGFydFByb3h5U2VydmVyXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZih0LmdhdGV3YXlDbGllbnQmJnQuZ2F0ZXdheUNsaWVudC5zdGF0ZSE9PVJ0LkRJU0NPTk5FQ1RFRCl0aHJvdyBuZXcgRXJyb3IoXCJTdGFydCBwcm94eSBzZXJ2ZXIgYmVmb3JlIGpvaW4gY2hhbm5lbFwiKTtpZih0LnByb3h5U2VydmVyfHx0LnR1cm5TZXJ2ZXIudXJsKXRocm93IG5ldyBFcnJvcihcIllvdSBoYXZlIGFscmVhZHkgc2V0IHRoZSBwcm94eVwiKTt0LnVzZVByb3h5U2VydmVyPSEwLG4oKX0sdC5zdG9wUHJveHlTZXJ2ZXI9ZnVuY3Rpb24oKXt2YXIgbj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LnN0b3BQcm94eVNlcnZlclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYodC5nYXRld2F5Q2xpZW50JiZ0LmdhdGV3YXlDbGllbnQuc3RhdGUhPT1SdC5ESVNDT05ORUNURUQpdGhyb3cgbmV3IEVycm9yKFwiU3RvcCBwcm94eSBzZXJ2ZXIgYWZ0ZXIgbGVhdmUgY2hhbm5lbFwiKTtzLmIuc2V0UHJveHlTZXJ2ZXIoKSxvLmRlZmF1bHQuc2V0UHJveHlTZXJ2ZXIoKSx0LnR1cm5TZXJ2ZXI9e30sdC5wcm94eVNlcnZlcj1udWxsLHQudXNlUHJveHlTZXJ2ZXI9ITEsbigpfSx0LnNldEVuY3J5cHRpb25TZWNyZXQ9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zZXRFbmNyeXB0aW9uU2VjcmV0XCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobixcInBhc3N3b3JkXCIpLHQuYWVzcGFzc3dvcmQ9bixpKCl9LHQuc2V0RW5jcnlwdGlvbk1vZGU9ZnVuY3Rpb24obil7dmFyIGk9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zZXRFbmNyeXB0aW9uTW9kZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYoT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJlbmNyeXB0aW9uTW9kZVwiKSwtMT09PSRlLmluZGV4T2YobikpdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIGVuY3J5cHRpb25Nb2RlOiBlbmNyeXB0aW9uTW9kZSBzaG91bGQgYmUgXCJhZXMtMTI4LXh0c1wiIHwgXCJhZXMtMjU2LXh0c1wiIHwgXCJhZXMtMTI4LWVjYlwiJyk7dC5hZXNtb2RlPW4saSgpfSx0LmNvbmZpZ1B1Ymxpc2hlcj1mdW5jdGlvbihuKXt2YXIgaT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LmNvbmZpZ1B1Ymxpc2hlclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKG4sXCJjb25maWdcIik7dmFyIGE9bi53aWR0aCxyPW4uaGVpZ2h0LG89bi5mcmFtZXJhdGUsYz1uLmJpdHJhdGUsZD1uLnB1Ymxpc2hlclVybDtPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYSxcIndpZHRoXCIpLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShyLFwiaGVpZ2h0XCIpLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShvLFwiZnJhbWVyYXRlXCIpLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShjLFwiYml0cmF0ZVwiLDEsMWU3KSxkJiZPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykoZCxcInB1Ymxpc2hlclVybFwiKSx0LmdhdGV3YXlDbGllbnQuY29uZmlnUHVibGlzaGVyKG4pLGkoKX0sdC5lbmFibGVEdWFsU3RyZWFtPWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBpJiZpKGUpO24mJm4odCl9LG5hbWU6XCJDbGllbnQuZW5hYmxlRHVhbFN0cmVhbVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7cmV0dXJuXCJpT1NcIj09PU9iamVjdChtLmdldEJyb3dzZXJPUykoKT8ocy5iLnN0cmVhbVN3aXRjaChlLnNlc3Npb25JZCx7bHRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGlzZHVhbDohMCxzdWNjOiExfSksYShWLklPU19OT1RfU1VQUE9SVCkpOk9iamVjdChtLmlzV2VDaGF0QnJvd3NlcikoKT8ocy5iLnN0cmVhbVN3aXRjaChlLnNlc3Npb25JZCx7bHRzOihuZXcgRGF0ZSkuZ2V0VGltZSgpLGlzZHVhbDohMCxzdWNjOiExfSksYShWLldFQ0hBVF9OT1RfU1VQUE9SVCkpOihzLmIuc3RyZWFtU3dpdGNoKGUuc2Vzc2lvbklkLHtsdHM6KG5ldyBEYXRlKS5nZXRUaW1lKCksaXNkdWFsOiEwLHN1Y2M6ITB9KSx0LmlzRHVhbFN0cmVhbT0hMCx0LmhpZ2hTdHJlYW0mJih0LmhpZ2hTdHJlYW0uaXNEdWFsU3RyZWFtPSEwKSx2b2lkKDA9PT10LmhpZ2hTdHJlYW1TdGF0ZT90Ll9wdWJsaXNoTG93U3RyZWFtKGZ1bmN0aW9uKGUpe3JldHVybiBhKG51bGwsZSl9LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXVwiKSxlKSxhKFYuRU5BQkxFX0RVQUxTVFJFQU1fRkFJTEVEKX0pOjE9PT10LmhpZ2hTdHJlYW1TdGF0ZT9hKFYuU1RJTExfT05fUFVCTElTSElORyk6YShudWxsKSkpfSx0LmRpc2FibGVEdWFsU3RyZWFtPWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBpJiZpKGUpO24mJm4odCl9LG5hbWU6XCJDbGllbnQuZGlzYWJsZUR1YWxTdHJlYW1cIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO3MuYi5zdHJlYW1Td2l0Y2goZS5zZXNzaW9uSWQse2x0czoobmV3IERhdGUpLmdldFRpbWUoKSxpc2R1YWw6ITEsc3VjYzohMH0pLHQuaXNEdWFsU3RyZWFtPSExLHQuaGlnaFN0cmVhbSYmKHQuaGlnaFN0cmVhbS5pc0R1YWxTdHJlYW09ITEpLDA9PT10LmhpZ2hTdHJlYW1TdGF0ZT90Ll91bnB1Ymxpc2hMb3dTdHJlYW0oZnVuY3Rpb24oKXt0LmhpZ2hTdHJlYW0ubG93U3RyZWFtPW51bGwsYSgpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl1cIiksZSksYShWLkRJU0FCTEVfRFVBTFNUUkVBTV9GQUlMRUQpfSk6MT09PXQuaGlnaFN0cmVhbVN0YXRlP2EoVi5TVElMTF9PTl9QVUJMSVNISU5HKTphKCl9LHQuX2NyZWF0ZUxvd1N0cmVhbT1mdW5jdGlvbihlLG4pe2lmKHQuaGlnaFN0cmVhbSYmdC5oaWdoU3RyZWFtLnN0cmVhbSl7dmFyIGk9UygpKHt9LHQuaGlnaFN0cmVhbS5wYXJhbXMpO2lmKGkuc3RyZWFtSUQrPTEsaS5hdWRpbz0hMSxpLnZpZGVvKXt2YXIgYT10LmhpZ2hTdHJlYW0uc3RyZWFtLmdldFZpZGVvVHJhY2tzKClbMF07YT9hZS5nZXRWaWRlb0NhbWVyYUlkQnlMYWJlbChhLmxhYmVsLGZ1bmN0aW9uKGEpe2kuY2FtZXJhSWQ9YTt2YXIgcz1uZXcgWWUoaSk7aWYocy5pc0xvd1N0cmVhbT0hMCxzLnN0cmVhbUlkPXQuaGlnaFN0cmVhbS5nZXRJZCgpKzEsdC5sb3dTdHJlYW1QYXJhbWV0ZXIpe3ZhciBjPVMoKSh7fSx0Lmxvd1N0cmVhbVBhcmFtZXRlcik7aWYoIWMud2lkdGh8fCFjLmhlaWdodCl7dmFyIGQ9QXQodC5oaWdoU3RyZWFtLnByb2ZpbGUpLHU9ci5TVVBQT1JUX1JFU09MVVRJT05fTElTVFtkWzBdXTtjLndpZHRoPXVbMF0sYy5oZWlnaHQ9dVsxXX1pZihjLmZyYW1lcmF0ZT1jLmZyYW1lcmF0ZXx8NSxjLmJpdHJhdGU9Yy5iaXRyYXRlfHw1MCxPYmplY3QobS5pc1NhZmFyaSkoKXx8T2JqZWN0KG0uaXNPcGVyYSkoKSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBTaGltbWluZyBsb3dTdHJlYW1QYXJhbWV0ZXJcIikpO3U9ci5TVVBQT1JUX1JFU09MVVRJT05fTElTVFt0LmhpZ2hTdHJlYW0ucHJvZmlsZV07Yy53aWR0aD11WzBdLGMuaGVpZ2h0PXVbMV19cy5zZXRWaWRlb1Byb2ZpbGVDdXN0b21QbHVzKGMpfWVsc2Ugcy5zZXRWaWRlb1Byb2ZpbGVDdXN0b20oQXQodC5oaWdoU3RyZWFtLnByb2ZpbGUpKTtzLmluaXQoZnVuY3Rpb24oKXt0LmhpZ2hTdHJlYW0ubG93U3RyZWFtPXMsdC5oaWdoU3RyZWFtLnVzZXJNdXRlVmlkZW8mJnMubXV0ZVZpZGVvKCksZSYmZShzKX0sbil9LG4pOm4mJm4oVi5ISUdIX1NUUkVBTV9OT1RfVklERU9fVFJBQ0UpfWVsc2UgbiYmbihWLkhJR0hfU1RSRUFNX05PVF9WSURFT19UUkFDRSl9ZWxzZSBuJiZuKFYuSElHSF9TVFJFQU1fTk9UX1ZJREVPX1RSQUNFKX0sdC5fZ2V0TG93U3RyZWFtPWZ1bmN0aW9uKGUsbil7dC5sb3dTdHJlYW0/ZSh0Lmxvd1N0cmVhbSk6dC5fY3JlYXRlTG93U3RyZWFtKGZ1bmN0aW9uKG4pe3QubG93U3RyZWFtPW4sZSh0Lmxvd1N0cmVhbSl9LG4pfSx0Ll9wdWJsaXNoTG93U3RyZWFtPWZ1bmN0aW9uKGUsbil7cmV0dXJuIDIhPT10Lmxvd1N0cmVhbVN0YXRlP24mJm4oVi5MT1dfU1RSRUFNX0FMUkVBRFlfUFVCTElTSEVEKTp0LmhpZ2hTdHJlYW0mJnQuaGlnaFN0cmVhbS5oYXNTY3JlZW4oKT9uJiZuKFYuU0hBUklOR19TQ1JFRU5fTk9UX1NVUFBPUlQpOnZvaWQgdC5fZ2V0TG93U3RyZWFtKGZ1bmN0aW9uKGkpe3QubG93U3RyZWFtU3RhdGU9MSx0LmdhdGV3YXlDbGllbnQucHVibGlzaChpLHtzdHJlYW1UeXBlOjF9LGZ1bmN0aW9uKCl7dC5sb3dTdHJlYW1TdGF0ZT0wLGUmJmUoKX0sZnVuY3Rpb24oZSl7MT09PXQubG93U3RyZWFtU3RhdGUmJih0Lmxvd1N0cmVhbVN0YXRlPTIpLG8uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gcHVibGlzaCBsb3cgc3RyZWFtIGZhaWxlZFwiKSksbiYmbihlKX0pfSxuKX0sdC5fdW5wdWJsaXNoTG93U3RyZWFtPWZ1bmN0aW9uKGUsbil7aWYoMCE9PXQubG93U3RyZWFtU3RhdGUpcmV0dXJuIG4mJm4oVi5MT1dfU1RSRUFNX05PVF9ZRVRfUFVCTElTSEVEKTt0Lmxvd1N0cmVhbSYmKHQuZ2F0ZXdheUNsaWVudC51bnB1Ymxpc2godC5sb3dTdHJlYW0se3N0cmVhbVR5cGU6MX0sZnVuY3Rpb24oKXt9LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gdW5wdWJsaXNoIGxvdyBzdHJlYW0gZmFpbGVkXCIpKSxuJiZuKGUpfSksdC5sb3dTdHJlYW0uY2xvc2UoKSx0Lmxvd1N0cmVhbT1udWxsLHQubG93U3RyZWFtU3RhdGU9MixlJiZlKCkpfSx0LmpvaW49ZnVuY3Rpb24obixpLGEscixjKXt2YXIgZD1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGMmJmMoZSk7ciYmcih0KX0sbmFtZTpcIkNsaWVudC5qb2luXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTtpZihuJiYhT2JqZWN0KHJlLmlzVmFsaWRUb2tlbikobikpcmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBQYXJhbSBjaGFubmVsS2V5IHNob3VsZCBiZSBzdHJpbmdcIikpLGQoVi5JTlZBTElEX1BBUkFNRVRFUik7aWYoIU9iamVjdChyZS5pc1ZhbGlkQ2hhbm5lbE5hbWUpKGkpKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJJbnZhbGlkIENoYW5uZWwgTmFtZSBcIi5jb25jYXQoaSkpLG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBUaGUgbGVuZ3RoIG11c3QgYmUgd2l0aGluIDY0IGJ5dGVzLiBUaGUgc3VwcG9ydGVkIGNoYXJhY3RlcnM6IGEteixBLVosMC05LHNwYWNlLCEsICMsICQsICUsICYsICgsICksICssIC0sIDosIDssIDwsID0sIC4sID4sID8sIEAsIFssIF0sIF4sIF8sICB7LCB9LCB8LCB+LCAsXCIpKSxkKFYuSU5WQUxJRF9QQVJBTUVURVIpO2lmKFwic3RyaW5nXCI9PXR5cGVvZiBpJiZcIlwiPT09aSlyZXR1cm4gby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFBhcmFtIGNoYW5uZWwgc2hvdWxkIG5vdCBiZSBlbXB0eVwiKSksZChWLklOVkFMSURfUEFSQU1FVEVSKTtpZihhJiYhT2JqZWN0KG5lLmlzMzJVaW50KShhKSYmIU9iamVjdChyZS5pc1ZhbGlkU3RyaW5nKShhLDEsMjU1KSlyZXR1cm4gby5kZWZhdWx0LmVycm9yKFwiSW52YWxpZCBVSUQgXCIuY29uY2F0KGEsXCIgXCIpLmNvbmNhdChIZSgpKGEpKSksby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFtTdHJpbmcgdWlkXSBMZW5ndGggb2YgdGhlIHN0cmluZzogWzEsMjU1XS4gQVNDSUkgY2hhcmFjdGVycyBvbmx5LiBbTnVtYmVyIHVpZF0gVGhlIHZhbHVlIHJhbmdlIGlzIFswLDEwMDAwXVwiKSksZChWLklOVkFMSURfUEFSQU1FVEVSKTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmMD09YS5sZW5ndGgpcmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBTdHJpbmcgdWlkIHNob3VsZCBub3QgYmUgZW1wdHlcIikpLGQoVi5JTlZBTElEX1BBUkFNRVRFUik7aWYoXCJzdHJpbmdcIj09dHlwZW9mIGEmJmEubGVuZ3RoPjI1NilyZXR1cm4gby5kZWZhdWx0Lndhcm5pbmcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIExlbmd0aCBvZiBzdHJpbmcgdWlkIHNob3VsZCBiZSBsZXNzIHRoYW4gMjU1XCIpKSxkKFYuSU5WQUxJRF9QQVJBTUVURVIpO3QuaGlnaFN0cmVhbT1udWxsLHQubG93U3RyZWFtPW51bGwsdC5sb3dTdHJlYW1QYXJhbWV0ZXI9bnVsbCx0LmlzRHVhbFN0cmVhbT0hMSx0LmhpZ2hTdHJlYW1TdGF0ZT0yLHQubG93U3RyZWFtU3RhdGU9Mjt2YXIgdT17Y2xpZW50SWQ6dC5jbGllbnRJZCxhcHBJZDplLmFwcElkLHNpZDplLnNlc3Npb25JZCxjbmFtZTppLHVpZDphLHR1cm5TZXJ2ZXI6dC50dXJuU2VydmVyLHByb3h5U2VydmVyOnQucHJveHlTZXJ2ZXIsdG9rZW46bnx8ZS5hcHBJZCx1c2VQcm94eVNlcnZlcjp0LnVzZVByb3h5U2VydmVyfTtpZihcInN0cmluZ1wiPT10eXBlb2YgYSYmKHUuc3RyaW5nVWlkPWEsdC51aW50VWlkPyh1LnVpZD10LnVpbnRVaWQsZGVsZXRlIHQudWludFVpZCk6dS51aWQ9MCksdC5hZXNwYXNzd29yZCYmXCJub25lXCIhPT10LmFlc21vZGUmJlMoKSh1LHthZXNwYXNzd29yZDp0LmFlc3Bhc3N3b3JkLGFlc21vZGU6dC5hZXNtb2RlfSkscy5iLnNlc3Npb25Jbml0KGUuc2Vzc2lvbklkLHtsdHM6KG5ldyBEYXRlKS5nZXRUaW1lKCksY25hbWU6aSxhcHBpZDplLmFwcElkLG1vZGU6ZS5tb2RlLHN1Y2M6ITB9KSx0Lm9uU3VjY2Vzcz1mdW5jdGlvbihlKXt0LnJ0Y1N0YXRzQ29sbGVjdG9yLnN0YXJ0TmV0d29ya1F1YWxpdHlUaW1lcigpLHQub25TdWNjZXNzPW51bGwsZChudWxsLGUpfSx0Lm9uRmFpbHVyZT1mdW5jdGlvbihlKXtyZXR1cm4gZChlKX0sdC5jaGFubmVsPWksdC5nYXRld2F5Q2xpZW50LnN0YXRlIT09UnQuRElTQ09OTkVDVEVEKXJldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIENsaWVudCBhbHJlYWR5IGluIGNvbm5lY3RpbmcvY29ubmVjdGVkIHN0YXRlXCIpKSxkKFYuSU5WQUxJRF9PUEVSQVRJT04pLHZvaWQgcy5iLmpvaW5HYXRld2F5KGUuc2Vzc2lvbklkLHtsdHM6RGF0ZS5ub3coKSxzdWNjOiExLGVjOlYuSU5WQUxJRF9PUEVSQVRJT04sYWRkcjpudWxsfSk7dC5nYXRld2F5Q2xpZW50LnN0YXRlPVJ0LkNPTk5FQ1RJTkc7dmFyIGw9ZnVuY3Rpb24oYSxyKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gSm9pbmluZyBjaGFubmVsOiBcIikuY29uY2F0KGkpKSx0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcImNvbmZpZy1kaXN0cmlidXRlXCIsY29uZmlnOnIsam9pbkluZm86dX0pLHQua2V5PW58fGUuYXBwSWQsdS5jaWQ9YS5jaWQsdS51aWR8fCh1LnVpZD1hLnVpZCksdS52aWQ9YS52aWQsdS5jbGllbnRJZD10LmNsaWVudElkLHUuYXBSZXNwb25zZT1hLnJlcyxhLnVuaV9sYnNfaXAmJmEudW5pX2xic19pcFsxXSYmKHUudW5pX2xic19pcD1hLnVuaV9sYnNfaXBbMV0pLHUuZ2F0ZXdheUFkZHI9YS5nYXRld2F5X2FkZHIsdC5qb2luSW5mbz11LHQuZ2F0ZXdheUNsaWVudC5qb2luKHUsdC5rZXksZnVuY3Rpb24oZSl7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIEpvaW4gY2hhbm5lbCBcIikuY29uY2F0KGksXCIgc3VjY2Vzcywgam9pbiB3aXRoIHVpZDogXCIpLmNvbmNhdChlLFwiLlwiKSksdC5vblN1Y2Nlc3M9bnVsbCx0LnJ0Y1N0YXRzQ29sbGVjdG9yLnN0YXJ0TmV0d29ya1F1YWxpdHlUaW1lcigpLGQobnVsbCxlKX0sZnVuY3Rpb24oZSl7cmV0dXJuIGQoZSl9KX07dS5zdHJpbmdVaWQmJiF1LnVpZD8odC51c2VyQWNjb3VudFJlcSYmIXQudXNlckFjY291bnRSZXEuaXNGaW5pc2hlZCgpJiZ0LnVzZXJBY2NvdW50UmVxLmNhbmNlbCgpLHQudXNlckFjY291bnRSZXE9Z3QodSx0LmdhdGV3YXlDbGllbnQpLHQudXNlckFjY291bnRSZXEudGhlbihmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJnZXRVc2VyQWNjb3VudCBTdWNjZXNzIFwiLmNvbmNhdChlLnVybCxcIiBcIikuY29uY2F0KHUuc3RyaW5nVWlkLFwiID0+IFwiKS5jb25jYXQoZS51aWQpKSx1LnVpZD1lLnVpZCxmdCh1LGwsZnVuY3Rpb24oZSl7cmV0dXJuIGQoZSl9KX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5lcnJvcihcImdldFVzZXJBY2NvdW50IHJlamVjdGVkXCIsZSksZChlKX0pKTpmdCh1LGwsZnVuY3Rpb24oZSl7cmV0dXJuIGQoZSl9KX0sdC5yZW5ld0NoYW5uZWxLZXk9ZnVuY3Rpb24obixpLGEpe3ZhciByPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse2NhbGxiYWNrOmZ1bmN0aW9uKGUsdCl7aWYoZSlyZXR1cm4gYSYmYShlKTtpJiZpKHQpfSxuYW1lOlwiQ2xpZW50LnJlbmV3Q2hhbm5lbEtleVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKG4sXCJrZXlcIiwxLDIwNDcpLHZvaWQgMD09PXQua2V5PyhvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIHJlbmV3Q2hhbm5lbEtleSBzaG91bGQgbm90IGJlIGNhbGxlZCBiZWZvcmUgdXNlciBqb2luXCIpKSxyKFYuSU5WQUxJRF9PUEVSQVRJT04pKToodC5rZXk9bix0LmdhdGV3YXlDbGllbnQuam9pbkluZm8udG9rZW49bix0LmdhdGV3YXlDbGllbnQua2V5PW4sdC5nYXRld2F5Q2xpZW50LnJlY292ZXIoKSxyKCkpfSx0LmxlYXZlPWZ1bmN0aW9uKG4saSl7dC5nYXRld2F5Q2xpZW50Lmhhc0ludm9rZUxlYXZlPSEwO3ZhciBhPSExLGM9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSxhKXtpZihlKXJldHVybiBpJiZpKGUpO3ZhciByO3QuZ2F0ZXdheUNsaWVudC5yZWNvbm5lY3RpbmdDUz0hMSxjbGVhclRpbWVvdXQoKHI9dC5jbGllbnRJZCx1dFtyXSkpLHQuX3JlbmV3U2Vzc2lvbigpLHQucnRjU3RhdHNDb2xsZWN0b3IuY2xlYXJOZXR3b3JrUXVhbGl0eVRpbWVyKCksbiYmbihhKX0sbmFtZTpcIkNsaWVudC5sZWF2ZVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIExlYXZpbmcgY2hhbm5lbFwiKSksdC51c2VyQWNjb3VudFJlcSYmIXQudXNlckFjY291bnRSZXEuaXNGaW5pc2hlZCgpJiYodC51c2VyQWNjb3VudFJlcS5jYW5jZWwoKSx0LmdhdGV3YXlDbGllbnQuc3RhdGU9PT1SdC5DT05ORUNUSU5HJiYodC5nYXRld2F5Q2xpZW50LnN0YXRlPVJ0LkRJU0NPTk5FQ1RFRCkpLHQuZ2F0ZXdheUNsaWVudC5sZWF2ZShmdW5jdGlvbihlKXthPSEwLGMobnVsbCxlKX0sYyksc2V0VGltZW91dChmdW5jdGlvbigpe2F8fCh0LmdhdGV3YXlDbGllbnQuc29ja2V0JiYodC5nYXRld2F5Q2xpZW50LnNvY2tldC5jbG9zZSgpLHQuZ2F0ZXdheUNsaWVudC5zb2NrZXQ9bnVsbCksdC5nYXRld2F5Q2xpZW50LnN0YXRlPVJ0LkRJU0NPTk5FQ1RFRCxjKG51bGwsXCJMRUFWRV9NU0dfVElNRU9VVFwiKSl9LE9iamVjdChyLmdldFBhcmFtZXRlcikoXCJMRUFWRV9NU0dfVElNRU9VVFwiKSl9LHQuX3JlbmV3U2Vzc2lvbj1mdW5jdGlvbigpe3ZhciBuPU9iamVjdChuZS5nZW5lcmF0ZVNlc3Npb25JZCkoKTtpZihvLmRlZmF1bHQuZGVidWcoXCJyZW5ld1Nlc3Npb24gXCIuY29uY2F0KGUuc2Vzc2lvbklkLFwiID0+IFwiKS5jb25jYXQobikpLGUuc2Vzc2lvbklkPW4sdC5qb2luSW5mbyYmKHQuam9pbkluZm8uc2lkPW4pLHQuZ2F0ZXdheUNsaWVudCYmKHQuZ2F0ZXdheUNsaWVudC5qb2luSW5mbyYmKHQuZ2F0ZXdheUNsaWVudC5qb2luSW5mby5zaWQ9biksdC5nYXRld2F5Q2xpZW50LmxvY2FsU3RyZWFtcykpZm9yKHZhciBpIGluIHQuZ2F0ZXdheUNsaWVudC5sb2NhbFN0cmVhbXMpe3ZhciBhPXQuZ2F0ZXdheUNsaWVudC5sb2NhbFN0cmVhbXNbaV07YSYmKGEuc2lkPW4pfX0sdC5fcHVibGlzaD1mdW5jdGlvbihuLGksYSxzKXtpZigyIT09dC5oaWdoU3RyZWFtU3RhdGUpcmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBDYW4ndCBwdWJsaXNoIHN0cmVhbSB3aGVuIHN0cmVhbSBhbHJlYWR5IHB1Ymxpc2ggXCIpLmNvbmNhdChuLmdldElkKCkpKSxhJiZhKFYuU1RSRUFNX0FMUkVBRFlfUFVCTElTSEVEKTtpZihcImF1dG9cIj09PXQudHVyblNlcnZlci5tb2RlJiZPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiRk9SQ0VfVFVSTlwiKSYmIU9iamVjdChyLmdldFBhcmFtZXRlcikoXCJUVVJOX0VOQUJMRV9UQ1BcIikmJiFPYmplY3Qoci5nZXRQYXJhbWV0ZXIpKFwiVFVSTl9FTkFCTEVfVURQXCIpKXRocm93IG5ldyBFcnJvcihcImZvcmNlIFRVUk4gV2l0aCBObyBUVVJOIENvbmZpZ3VyYXRpb25cIik7by5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFB1Ymxpc2hpbmcgc3RyZWFtLCB1aWQgXCIpLmNvbmNhdChuLmdldElkKCkpKSx0LmhpZ2hTdHJlYW09bix0LmhpZ2hTdHJlYW1TdGF0ZT0xLHQuaGlnaFN0cmVhbS5zdHJlYW1JZD10LmpvaW5JbmZvLnN0cmluZ1VpZHx8dC5qb2luSW5mby51aWQsdC5oYXNQdWJsaXNoZWQ9ITE7dmFyIGM9ZnVuY3Rpb24obixpLGEpe3QuZ2F0ZXdheUNsaWVudC5wdWJsaXNoKG4se3N0cmVhbVR5cGU6MH0sZnVuY3Rpb24oKXtuLnNpZD1lLnNlc3Npb25JZCx0LmhpZ2hTdHJlYW1TdGF0ZT0wLG8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBQdWJsaXNoIHN1Y2Nlc3MsIHVpZDogXCIpLmNvbmNhdChuLmdldElkKCkpKSx0LmhpZ2hTdHJlYW0mJih0LmhpZ2hTdHJlYW0uaXNEdWFsU3RyZWFtPXQuaXNEdWFsU3RyZWFtKSx0LmlzRHVhbFN0cmVhbT90Ll9wdWJsaXNoTG93U3RyZWFtKGZ1bmN0aW9uKCl7aSYmaSgpfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQud2FybmluZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gXCIpLGUpLEZlLnJlcGxhY2VXaXRoQ2FudmFzVHJhY2sobiksaSYmaSgpfSk6KEZlLnJlcGxhY2VXaXRoQ2FudmFzVHJhY2sobiksaSYmaSgpKX0sYSl9O1wiYXVkaWVuY2VcIiE9PXQuZ2F0ZXdheUNsaWVudC5yb2xlfHxcImxpdmVcIiE9PXQubW9kZXx8cz9jKG4saSxhKTp0LmdhdGV3YXlDbGllbnQuc2V0Q2xpZW50Um9sZShcImhvc3RcIixmdW5jdGlvbihlKXtpZihlKXJldHVybiBhJiZhKGUpO2MobixpLGEpfSl9LHQuX3VucHVibGlzaD1mdW5jdGlvbihlLG4saSxhKXtpZigwIT09dC5oaWdoU3RyZWFtU3RhdGUpcmV0dXJuIG8uZGVmYXVsdC53YXJuaW5nKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBDYW4ndCB1bnB1Ymxpc2ggc3RyZWFtIHdoZW4gc3RyZWFtIG5vdCBwdWJsaXNoXCIpKSxpJiZpKFYuU1RSRUFNX05PVF9ZRVRfUFVCTElTSEVEKTtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gVW5wdWJsaXNoIHN0cmVhbSwgdWlkIFwiKS5jb25jYXQoZS5nZXRJZCgpKSk7dmFyIHI9ZnVuY3Rpb24oZSxuLGkpe3QuaXNEdWFsU3RyZWFtJiZ0Lmxvd1N0cmVhbSYmdC5fdW5wdWJsaXNoTG93U3RyZWFtKG51bGwsaSksdC5nYXRld2F5Q2xpZW50LnVucHVibGlzaChlLHtzdHJlYW1UeXBlOjB9LGZ1bmN0aW9uKCl7dC5oaWdoU3RyZWFtU3RhdGU9MixvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gVW5wdWJsaXNoIHN0cmVhbSBzdWNjZXNzLCB1aWQ6IFwiKS5jb25jYXQoZS5nZXRJZCgpKSksbiYmbigpfSxmdW5jdGlvbihuKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gVW5wdWJsaXNoIHN0cmVhbSBmYWlsLCB1aWQ6IFwiKS5jb25jYXQoZS5nZXRJZCgpKSksaSYmaShuKX0pfTtcImhvc3RcIiE9PXQuZ2F0ZXdheUNsaWVudC5yb2xlfHxcImxpdmVcIiE9PXQubW9kZXx8YT9yKGUsbixpKTp0LmdhdGV3YXlDbGllbnQuc2V0Q2xpZW50Um9sZShcImF1ZGllbmNlXCIsZnVuY3Rpb24odCl7aWYodClyZXR1cm4gaSYmaSh0KTtyKGUsbixpKX0pfSx0LnB1Ymxpc2g9ZnVuY3Rpb24obixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlLG4pe2lmKGUpcmV0dXJuIDE9PT10LmhpZ2hTdHJlYW1TdGF0ZSYmKHQuaGlnaFN0cmVhbVN0YXRlPTIpLGkmJmkoZSl9LG5hbWU6XCJDbGllbnQucHVibGlzaFwiLHRhZzpcInRyYWNlclwiLG9wdGlvbnM6e3N0cmVhbTpcInRvbyBsb25nIHRvIHNob3dcIixvbkZhaWx1cmU6ISFpfX0pOzI9PT10LmhpZ2hTdHJlYW1TdGF0ZT9uLl9oYXNWaWRlb1RyYWNrcygpfHxuLl9oYXNBdWRpb1RyYWNrcygpP3QuX3B1Ymxpc2gobixmdW5jdGlvbihlKXtyZXR1cm4gYShudWxsLGUpfSxmdW5jdGlvbihlKXtyZXR1cm4gYShlKX0pOmEoVi5OT19UUkFDS19JTl9TVFJFQU0pOmEoVi5TVFJFQU1fQUxSRUFEWV9QVUJMSVNIRUQpfSx0LnVucHVibGlzaD1mdW5jdGlvbihuLGksYSl7dmFyIHI9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7Y2FsbGJhY2s6ZnVuY3Rpb24oZSx0KXtpZihlKXJldHVybiBpJiZpKGUpO2EmJmEodCl9LG5hbWU6XCJDbGllbnQudW5wdWJsaXNoXCIsdGFnOlwidHJhY2VyXCIsb3B0aW9uczp7c3RyZWFtOlwidG9vIGxvbmcgdG8gc2hvd1wiLG9uRmFpbHVyZTohIWl9fSk7MD09PXQuaGlnaFN0cmVhbVN0YXRlP3QuX3VucHVibGlzaChuLGZ1bmN0aW9uKGUpe3JldHVybiByKG51bGwsZSl9LGZ1bmN0aW9uKGUpe3JldHVybiByKGUpfSk6cihWLlNUUkVBTV9OT1RfWUVUX1BVQkxJU0hFRCl9LHQuc3Vic2NyaWJlPWZ1bmN0aW9uKG4saSxhKXt2YXIgcj1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGEmJmEoZSl9LG5hbWU6XCJDbGllbnQuc3Vic2NyaWJlXCIsdGFnOlwidHJhY2VyXCIsb3B0aW9uczp7c3RyZWFtOlwidG9vIGxvbmcgdG8gc2hvd1wiLG9wdGlvbnM6aSxvbkZhaWx1cmU6ISFhfX0pO1wiZnVuY3Rpb25cIj09dHlwZW9mIGkmJihhPWksaT1udWxsKSxPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkobixcInN0cmVhbVwiKSxPYmplY3QocmUuaXNFbXB0eSkoaSl8fChPYmplY3QocmUuY2hlY2tWYWxpZE9iamVjdCkoaSxcIm9wdGlvbnNcIiksT2JqZWN0KHJlLmlzRW1wdHkpKGkudmlkZW8pfHxPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKGkudmlkZW8sXCJvcHRpb25zLnZpZGVvXCIpLE9iamVjdChyZS5pc0VtcHR5KShpLmF1ZGlvKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShpLmF1ZGlvLFwib3B0aW9ucy5hdWRpb1wiKSk7dmFyIGM9e3ZpZGVvOiEwLGF1ZGlvOiEwfTtpZighT2JqZWN0KHJlLmlzRW1wdHkpKGkpKXtpZihPYmplY3QobS5pc1NhZmFyaSkoKSYmKCFpLnZpZGVvfHwhaS5hdWRpbykpe3ZhciBkPVwiU0FGQVJJX05PVF9TVVBQT1JURURfRk9SX1RSQUNLX1NVQlNDUklQVElPTlwiO3JldHVybiBvLmRlZmF1bHQuZXJyb3IoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFwiKSxkKSx2b2lkIHIoZCl9aWYoIU9iamVjdChyZS5pc0VtcHR5KShpLnZpZGVvKSYmIU9iamVjdChyZS5pc1ZhbGlkQm9vbGVhbikoaS52aWRlbyl8fCFPYmplY3QocmUuaXNFbXB0eSkoaS5hdWRpbykmJiFPYmplY3QocmUuaXNWYWxpZEJvb2xlYW4pKGkuYXVkaW8pfHwhMT09PWkuYXVkaW8mJiExPT09aS52aWRlbyl7ZD1cIklOVkFMSURfUEFSQU1FVEVSIFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShpKSk7cmV0dXJuIG8uZGVmYXVsdC5lcnJvcihcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gXCIpLGQpLHZvaWQgcihkKX19bi5zdWJzY3JpYmVPcHRpb25zPyhTKCkobi5zdWJzY3JpYmVPcHRpb25zLGMsaSksdC5nYXRld2F5Q2xpZW50LnN1YnNjcmliZUNoYW5nZShuLGZ1bmN0aW9uKGUpe3JldHVybiByKG51bGwsZSl9LHIpKToobi5zdWJzY3JpYmVPcHRpb25zPVMoKSh7fSxjLGkpLHQuZ2F0ZXdheUNsaWVudC5zdWJzY3JpYmUobixmdW5jdGlvbihlKXtyZXR1cm4gcihudWxsLGUpfSxyKSl9LHQudW5zdWJzY3JpYmU9ZnVuY3Rpb24obixpKXt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKGUuc2Vzc2lvbklkLHtjYWxsYmFjazpmdW5jdGlvbihlLHQpe2lmKGUpcmV0dXJuIGkmJmkoZSl9LG5hbWU6XCJDbGllbnQudW5zdWJzY3JpYmVcIix0YWc6XCJ0cmFjZXJcIixvcHRpb25zOntzdHJlYW06XCJ0b28gbG9uZyB0byBzaG93XCIsb25GYWlsdXJlOiEhaX19KTtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gVW5zdWJzY3JpYmUgc3RyZWFtLCB1aWQ6IFwiKS5jb25jYXQobi5nZXRJZCgpKSksdC5nYXRld2F5Q2xpZW50LnVuc3Vic2NyaWJlKG4sZnVuY3Rpb24oZSl7cmV0dXJuIGEobnVsbCxlKX0sYSl9LHQuc2V0UmVtb3RlVmlkZW9TdHJlYW1UeXBlPWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zZXRSZW1vdGVWaWRlb1N0cmVhbVR5cGVcIix0YWc6XCJ0cmFjZXJcIixvcHRpb25zOntzdHJlYW06XCJ0b28gbG9uZyB0byBzaG93XCIsc3RyZWFtVHlwZTppfX0pO09iamVjdChyZS5jaGVja1ZhbGlkRW51bSkoaSxcInN0cmVhbVR5cGVcIixbMCwxXSksdC5nYXRld2F5Q2xpZW50LnNldFJlbW90ZVZpZGVvU3RyZWFtVHlwZShuLGkpLGEoKX0sdC5zZXRTdHJlYW1GYWxsYmFja09wdGlvbj1mdW5jdGlvbihuLGkpe3ZhciBhPXMuYi5yZXBvcnRBcGlJbnZva2UoZS5zZXNzaW9uSWQse25hbWU6XCJDbGllbnQuc2V0U3RyZWFtRmFsbGJhY2tPcHRpb25cIix0YWc6XCJ0cmFjZXJcIixvcHRpb25zOntzdHJlYW06XCJ0b28gbG9uZyB0byBzaG93XCIsZmFsbGJhY2tUeXBlOml9fSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShpLFwiZmFsbGJhY2tUeXBlXCIsWzAsMSwyXSksdC5nYXRld2F5Q2xpZW50LnNldFN0cmVhbUZhbGxiYWNrT3B0aW9uKG4saSksYSgpfSx0LmVuYWJsZUF1ZGlvVm9sdW1lSW5kaWNhdG9yPWZ1bmN0aW9uKG4saSl7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5lbmFibGVBdWRpb1ZvbHVtZUluZGljYXRvclwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7bj1ufHwyZTMsaT1pfHwzLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShpLFwic21vb3RoXCIsMSwxMDApLE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShuLFwiaW50ZXJ2YWxcIiw1MCwxZTUpLHQuYXVkaW9Wb2x1bWVJbmRpY2F0aW9uPXQuYXVkaW9Wb2x1bWVJbmRpY2F0aW9ufHx7ZW5hYmxlZDohMH0sdC5hdWRpb1ZvbHVtZUluZGljYXRpb24uaW50ZXJ2YWw9bix0LmF1ZGlvVm9sdW1lSW5kaWNhdGlvbi5zbW9vdGg9aSx0LmF1ZGlvVm9sdW1lSW5kaWNhdGlvbj17aW50ZXJ2YWw6bixzbW9vdGg6aX0sby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIGVuYWJsZUF1ZGlvVm9sdW1lSW5kaWNhdG9yIGludGVydmFsIFwiKS5jb25jYXQobixcIiBzbW9vdGggXCIpLmNvbmNhdChpKSksdC5nYXRld2F5Q2xpZW50LmVuYWJsZUF1ZGlvVm9sdW1lSW5kaWNhdG9yKG4saSksYSgpfSx0LmdldE5ldHdvcmtTdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiBvLmRlZmF1bHQuZGVwcmVjYXRlKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBjbGllbnQuZ2V0TmV0d29ya1N0YXRzIGlzIGRlcHJlY2F0ZWQuIFVzZSBjbGllbnQuZ2V0VHJhbnNwb3J0U3RhdHMgaW5zdGVhZC5cIikpLHd0LmdldFN0YXRzKGUsbil9LHQuZ2V0U3lzdGVtU3RhdHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdi5nZXRTdGF0cyhlLHQpfSx0LmdldFJlY29yZGluZ0RldmljZXM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYWUuZ2V0UmVjb3JkaW5nRGV2aWNlcyhlLHQpfSx0LmdldFBsYXlvdXREZXZpY2VzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGFlLmdldFBsYXlvdXREZXZpY2VzKGUsdCl9LHQuZ2V0Q2FtZXJhcz1mdW5jdGlvbihlLHQpe3JldHVybiBhZS5nZXRDYW1lcmFzKGUsdCl9LHQuZ2V0UmVtb3RlQXVkaW9TdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLmdldFJlbW90ZUF1ZGlvU3RhdHMoZSxuKX0sdC5nZXRMb2NhbEF1ZGlvU3RhdHM9ZnVuY3Rpb24oZSxuKXtyZXR1cm4gdC5ydGNTdGF0c0NvbGxlY3Rvci5nZXRMb2NhbEF1ZGlvU3RhdHMoZSxuKX0sdC5nZXRSZW1vdGVWaWRlb1N0YXRzPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucnRjU3RhdHNDb2xsZWN0b3IuZ2V0UmVtb3RlVmlkZW9TdGF0cyhlLG4pfSx0LmdldExvY2FsVmlkZW9TdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLmdldExvY2FsVmlkZW9TdGF0cyhlLG4pfSx0Ll9nZXRSZW1vdGVWaWRlb1F1YWxpdHlTdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLmdldFJlbW90ZVZpZGVvUXVhbGl0eVN0YXRzKGUsbil9LHQuX2dldFJlbW90ZUF1ZGlvUXVhbGl0eVN0YXRzPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucnRjU3RhdHNDb2xsZWN0b3IuZ2V0UmVtb3RlQXVkaW9RdWFsaXR5U3RhdHMoZSxuKX0sdC5nZXRUcmFuc3BvcnRTdGF0cz1mdW5jdGlvbihlLG4pe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLmdldFRyYW5zcG9ydFN0YXRzKGZ1bmN0aW9uKHQpe3JldHVybiB3dC5nZXRTdGF0cyhmdW5jdGlvbihuKXt2YXIgaT1TKCkoe30sdCxuKTtlJiZlKGkpfSxuKX0sbil9LHQuZ2V0U2Vzc2lvblN0YXRzPWZ1bmN0aW9uKGUsbil7cmV0dXJuIHQucnRjU3RhdHNDb2xsZWN0b3IuZ2V0U2Vzc2lvblN0YXRzKGUsbil9LHQub25OZXR3b3JrUXVhbGl0eT1mdW5jdGlvbigpe3JldHVybiB0LnJ0Y1N0YXRzQ29sbGVjdG9yLm9uTmV0d29ya1F1YWxpdHkob25TdWNjZXNzLG9uRmFpbHVyZSl9LGUuY2xpZW50SWQ9dC5jbGllbnRJZCx0LmdhdGV3YXlDbGllbnQ9UnQoZSksdC5saXN0ZW5lckxvZ2dlclRpbWVyPW51bGwsdC5saXN0ZW5lckxvZ2dlckNhY2hlPVtdLHQub249ZnVuY3Rpb24oZSxuKXt0LmdhdGV3YXlDbGllbnQub24oZSxuKSx0Lmxpc3RlbmVyTG9nZ2VyQ2FjaGUucHVzaChcIlwiLmNvbmNhdChlKS5jb25jYXQobi5uYW1lP1wiOlwiK24ubmFtZTpcIlwiKSksdC5saXN0ZW5lckxvZ2dlclRpbWVyP2NsZWFyVGltZW91dCh0Lmxpc3RlbmVyTG9nZ2VyVGltZXIpOm8uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBBZGRpbmcgZXZlbnQgaGFuZGxlciBvbiBcIikuY29uY2F0KGUpKSx0Lmxpc3RlbmVyTG9nZ2VyVGltZXI9c2V0VGltZW91dChmdW5jdGlvbigpe3QubGlzdGVuZXJMb2dnZXJDYWNoZS5sZW5ndGgmJih0Lmxpc3RlbmVyTG9nZ2VyVGltZXI9bnVsbCxvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gQWRkZWQgZXZlbnQgaGFuZGxlciBvbiBcIikuY29uY2F0KHQubGlzdGVuZXJMb2dnZXJDYWNoZS5qb2luKFwiLCBcIikpKSx0Lmxpc3RlbmVyTG9nZ2VyQ2FjaGU9W10pfSwwKX0sdC5vZmY9ZnVuY3Rpb24oZSxuKXtvLmRlZmF1bHQuaW5mbyhcInJlbW92ZSBldmVudCBoYW5kbGVyIGZyb20gW1wiLmNvbmNhdChlLFwiXVwiKSksdC5nYXRld2F5Q2xpZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoZSxuKX0sdC5ydGNTdGF0c0NvbGxlY3Rvcj1mdW5jdGlvbihlKXt2YXIgdD1jKCk7cmV0dXJuIHQuZ2F0ZXdheUNsaWVudD1lLHQuZXhjZXB0aW9uTW9uaXRvcj1uZXcgTnQoZSksdC5sb2NhbFN0YXRzPXt9LHQucmVtb3RlU3RhdHM9e30sdC5zZXNzaW9uPXtzZW5kQnl0ZXM6MCxyZWN2Qnl0ZXM6MCxXU1NlbmRCeXRlczowLFdTU2VuZEJ5dGVzRGVsdGE6MCxXU1JlY3ZCeXRlczowLFdTUmVjdkJ5dGVzRGVsdGE6MCxIVFRQU2VuZEJ5dGVzOjAsSFRUUFNlbmRCeXRlc0RlbHRhOjAsSFRUUFJlY3ZCeXRlczowLEhUVFBSZWN2Qnl0ZXNEZWx0YTowfSx0LmdldFJlbW90ZUF1ZGlvU3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQucmVtb3RlU3RhdHMpe3ZhciBhPXt9LHI9dC5yZW1vdGVTdGF0c1tpXTtpZShhLFwiRW5kMkVuZERlbGF5XCIsci5wZWVyX2RlbGF5JiZyLnBlZXJfZGVsYXkuYXVkaW9fZGVsYXkpLGllKGEsXCJUcmFuc3BvcnREZWxheVwiLHIucGVlcl9kZWxheSYmci5wZWVyX2RlbGF5LmUyZV9kZWxheSksaWUoYSxcIlBhY2tldExvc3NSYXRlXCIsci5wZWVyX2RlbGF5JiZyLnBlZXJfZGVsYXkuZTJlX2F1ZGlvX2xvc3RfcmF0aW9fNDAwbXMpLGllKGEsXCJSZWN2TGV2ZWxcIixyLmF1ZGlvU3RhdHMmJnIuYXVkaW9TdGF0cy5hdWRpb091dHB1dExldmVsKSxpZShhLFwiUmVjdkJpdHJhdGVcIixyLmF1ZGlvUmVjdkJpdHJhdGUpLGllKGEsXCJDb2RlY1R5cGVcIixyLmF1ZGlvU3RhdHMmJnIuYXVkaW9TdGF0cy5nb29nQ29kZWNOYW1lKSxpZShhLFwiTXV0ZVN0YXRlXCIsci5hdWRpb0Rpc2FibGVkKSxpZShhLFwiVG90YWxGcmVlemVUaW1lXCIsci5hdWRpb1N0YXRzJiZyLmF1ZGlvU3RhdHMuYXVkaW9Ub3RhbEZyZWV6ZVRpbWUpLGllKGEsXCJUb3RhbFBsYXlEdXJhdGlvblwiLHIuYXVkaW9TdGF0cyYmci5hdWRpb1N0YXRzLmF1ZGlvVG90YWxQbGF5RHVyYXRpb24pLG5baV09YX1lJiZlKG4pfSx0LmdldExvY2FsQXVkaW9TdGF0cz1mdW5jdGlvbihlKXt2YXIgbj17fTtmb3IodmFyIGkgaW4gdC5sb2NhbFN0YXRzKXt2YXIgYT17fSxyPXQubG9jYWxTdGF0c1tpXTtpZShhLFwiUmVjb3JkaW5nTGV2ZWxcIixyLmF1ZGlvU3RhdHMmJnIuYXVkaW9TdGF0cy5hdWRpb0lucHV0TGV2ZWwpLGllKGEsXCJTZW5kTGV2ZWxcIixyLmF1ZGlvU3RhdHMmJnIuYXVkaW9TdGF0cy50b3RhbEF1ZGlvRW5lcmd5KSxpZShhLFwiU2FtcGxpbmdSYXRlXCIsci5hdWRpb1N0YXRzJiZyLmF1ZGlvU3RhdHMudG90YWxTYW1wbGVzRHVyYXRpb24pLGllKGEsXCJTZW5kQml0cmF0ZVwiLHIuYXVkaW9TZW5kQml0cmF0ZSksaWUoYSxcIkNvZGVjVHlwZVwiLHIuYXVkaW9TdGF0cyYmci5hdWRpb1N0YXRzLmdvb2dDb2RlY05hbWUpLGllKGEsXCJNdXRlU3RhdGVcIixyLmF1ZGlvRGlzYWJsZWQpO3ZhciBvPXQuZ2F0ZXdheUNsaWVudC5sb2NhbFN0cmVhbXNbaV07byYmby5pc1BsYXlpbmcoKSYmaWUoYSxcIk11dGVTdGF0ZVwiLG8udXNlck11dGVBdWRpbz9cIjFcIjpcIjBcIiksbltpXT1hfWUmJmUobil9LHQuZ2V0UmVtb3RlVmlkZW9TdGF0cz1mdW5jdGlvbihlKXt2YXIgbj17fTtmb3IodmFyIGkgaW4gdC5yZW1vdGVTdGF0cyl7dmFyIGE9e30scj10LnJlbW90ZVN0YXRzW2ldO2llKGEsXCJFbmQyRW5kRGVsYXlcIixyLnBlZXJfZGVsYXkmJnIucGVlcl9kZWxheS52aWRlb19kZWxheSksaWUoYSxcIlRyYW5zcG9ydERlbGF5XCIsci5wZWVyX2RlbGF5JiZyLnBlZXJfZGVsYXkuZTJlX2RlbGF5KSxpZShhLFwiUGFja2V0TG9zc1JhdGVcIixyLnBlZXJfZGVsYXkmJnIucGVlcl9kZWxheS5lMmVfdmlkZW9fbG9zdF9yYXRpb180MDBtcyksaWUoYSxcIlJlY3ZCaXRyYXRlXCIsci52aWRlb1JlY3ZCaXRyYXRlKSxpZShhLFwiUmVjdlJlc29sdXRpb25XaWR0aFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZVdpZHRoUmVjZWl2ZWQpLGllKGEsXCJSZWN2UmVzb2x1dGlvbkhlaWdodFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZUhlaWdodFJlY2VpdmVkKSxpZShhLFwiUmVuZGVyUmVzb2x1dGlvbldpZHRoXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMucmVuZGVyUmVtb3RlV2lkdGgpLGllKGEsXCJSZW5kZXJSZXNvbHV0aW9uSGVpZ2h0XCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMucmVuZGVyUmVtb3RlSGVpZ2h0KSxpZShhLFwiUmVuZGVyRnJhbWVSYXRlXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lUmF0ZU91dHB1dCksaWUoYSxcIk11dGVTdGF0ZVwiLHIudmlkZW9EaXNhYmxlZCksaWUoYSxcIlRvdGFsRnJlZXplVGltZVwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLnZpZGVvVG90YWxGcmVlemVUaW1lKSxpZShhLFwiVG90YWxQbGF5RHVyYXRpb25cIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy52aWRlb1RvdGFsUGxheUR1cmF0aW9uKSxuW2ldPWF9ZSYmZShuKX0sdC5nZXRMb2NhbFZpZGVvU3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQubG9jYWxTdGF0cyl7dmFyIGE9e30scj10LmxvY2FsU3RhdHNbaV07aWUoYSxcIlRhcmdldFNlbmRCaXRyYXRlXCIsci52aWRlb1RhcmdldFNlbmRCaXRyYXRlKSxpZShhLFwiU2VuZEZyYW1lUmF0ZVwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZVJhdGVTZW50KSxpZShhLFwiU2VuZEJpdHJhdGVcIixyLnZpZGVvU2VuZEJpdHJhdGUpLGllKGEsXCJTZW5kUmVzb2x1dGlvbldpZHRoXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lV2lkdGhTZW50KSxpZShhLFwiU2VuZFJlc29sdXRpb25IZWlnaHRcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nRnJhbWVIZWlnaHRTZW50KSxpZShhLFwiQ2FwdHVyZVJlc29sdXRpb25XaWR0aFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZVdpZHRoSW5wdXQpLGllKGEsXCJDYXB0dXJlUmVzb2x1dGlvbkhlaWdodFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZUhlaWdodElucHV0KSxpZShhLFwiRW5jb2RlRGVsYXlcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nQXZnRW5jb2RlTXMpLGllKGEsXCJNdXRlU3RhdGVcIixyLnZpZGVvRGlzYWJsZWQpLGllKGEsXCJUb3RhbEZyZWV6ZVRpbWVcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy52aWRlb1RvdGFsRnJlZXplVGltZSksaWUoYSxcIlRvdGFsRHVyYXRpb25cIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy52aWRlb1RvdGFsUGxheUR1cmF0aW9uKSxpZShhLFwiQ2FwdHVyZUZyYW1lUmF0ZVwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLmdvb2dGcmFtZVJhdGVTZW50KSxyLnZpZGVvU3RhdHMmJiFyLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lV2lkdGhJbnB1dCYmaWUoYSxcIkNhcHR1cmVSZXNvbHV0aW9uV2lkdGhcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5yZW5kZXJMb2NhbFdpZHRoKSxyLnZpZGVvU3RhdHMmJiFyLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lSGVpZ2h0SW5wdXQmJmllKGEsXCJDYXB0dXJlUmVzb2x1dGlvbkhlaWdodFwiLHIudmlkZW9TdGF0cyYmci52aWRlb1N0YXRzLnJlbmRlckxvY2FsSGVpZ2h0KSxuW2ldPWEsZSYmZShuKX19LHQuZ2V0UmVtb3RlVmlkZW9RdWFsaXR5U3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e307Zm9yKHZhciBpIGluIHQucmVtb3RlU3RhdHMpe3ZhciBhPXt9LHI9dC5yZW1vdGVTdGF0c1tpXTtpZShhLFwidmlkZW9SZWNlaXZlRGVsYXlcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy5nb29nQ3VycmVudERlbGF5TXMpLGllKGEsXCJWaWRlb0ZyZWV6ZVJhdGVcIixyLnZpZGVvU3RhdHMmJnIudmlkZW9TdGF0cy52aWRlb0ZyZWV6ZVJhdGUpLGllKGEsXCJGaXJzdEZyYW1lVGltZVwiLHIuZmlyc3RGcmFtZVRpbWUpLG5baV09YX1lJiZlKG4pfSx0LmdldFJlbW90ZUF1ZGlvUXVhbGl0eVN0YXRzPWZ1bmN0aW9uKGUpe3ZhciBuPXt9O2Zvcih2YXIgaSBpbiB0LnJlbW90ZVN0YXRzKXt2YXIgYT17fSxyPXQucmVtb3RlU3RhdHNbaV07aWUoYSxcImF1ZGlvUmVjZWl2ZURlbGF5XCIsci5hdWRpb1N0YXRzJiZyLmF1ZGlvU3RhdHMuZ29vZ0N1cnJlbnREZWxheU1zKSxpZShhLFwiQXVkaW9GcmVlemVSYXRlXCIsci52aWRlb1N0YXRzJiZyLnZpZGVvU3RhdHMudmlkZW9GcmVlemVSYXRlKSxuW2ldPWF9ZSYmZShuKX0sdC5nZXRUcmFuc3BvcnRTdGF0cz1mdW5jdGlvbihlKXt2YXIgbj17fSxpPXt9LGE9dC5nYXRld2F5Q2xpZW50LnRyYWZmaWNfc3RhdHMscj1hLnBlZXJfZGVsYXk7aWYoaWUobixcIk91dGdvaW5nQXZhaWxhYmxlQmFuZHdpZHRoXCIsdC5nYXRld2F5Q2xpZW50Lk91dGdvaW5nQXZhaWxhYmxlQmFuZHdpZHRoLzFlMyksaWUobixcIlJUVFwiLGEmJmEuYWNjZXNzX2RlbGF5KSxyKXt2YXIgbz0hMCxzPSExLGM9dm9pZCAwO3RyeXtmb3IodmFyIGQsdT1yW1N5bWJvbC5pdGVyYXRvcl0oKTshKG89KGQ9dS5uZXh0KCkpLmRvbmUpO289ITApe3ZhciBsPWQudmFsdWU7bC5kb3dubGlua19lc3RpbWF0ZV9iYW5kd2lkdGgmJihpW2wucGVlcl91aWRdPWwuZG93bmxpbmtfZXN0aW1hdGVfYmFuZHdpZHRoLzFlMytcIlwiKX19Y2F0Y2goZSl7cz0hMCxjPWV9ZmluYWxseXt0cnl7b3x8bnVsbD09dS5yZXR1cm58fHUucmV0dXJuKCl9ZmluYWxseXtpZihzKXRocm93IGN9fX1uLkluY29taW5nQXZhaWxhYmxlQmFuZHdpZHRoPWksZSYmZShuKX0sdC5nZXRTZXNzaW9uU3RhdHM9ZnVuY3Rpb24oZSl7dmFyIG49e30saT10LmdhdGV3YXlDbGllbnQudHJhZmZpY19zdGF0cyxhPXQuZ2F0ZXdheUNsaWVudC5zb2NrZXQscj0wLG89MDtmb3IodmFyIHMgaW4gdC5yZW1vdGVTdGF0cykoYz10LnJlbW90ZVN0YXRzW3NdKSYmYy52aWRlb1N0YXRzJiZjLnZpZGVvU3RhdHMudmlkZW9SZWN2Qnl0ZXNEZWx0YSYmKG8rPXBhcnNlSW50KGMudmlkZW9TdGF0cy52aWRlb1JlY3ZCeXRlc0RlbHRhKSksYyYmYy5hdWRpb1N0YXRzJiZjLmF1ZGlvU3RhdHMuYXVkaW9SZWN2Qnl0ZXNEZWx0YSYmKG8rPXBhcnNlSW50KGMuYXVkaW9TdGF0cy5hdWRpb1JlY3ZCeXRlc0RlbHRhKSk7Zm9yKHZhciBzIGluIHQubG9jYWxTdGF0cyl7dmFyIGM7KGM9dC5sb2NhbFN0YXRzW3NdKSYmYy52aWRlb1N0YXRzJiZjLnZpZGVvU3RhdHMudmlkZW9TZW5kQnl0ZXNEZWx0YSYmKHIrPXBhcnNlSW50KGMudmlkZW9TdGF0cy52aWRlb1NlbmRCeXRlc0RlbHRhKSksYyYmYy5hdWRpb1N0YXRzJiZjLmF1ZGlvU3RhdHMuYXVkaW9TZW5kQnl0ZXNEZWx0YSYmKHIrPXBhcnNlSW50KGMuYXVkaW9TdGF0cy5hdWRpb1NlbmRCeXRlc0RlbHRhKSl9dmFyIGQ9cit0LnNlc3Npb24uV1NTZW5kQnl0ZXNEZWx0YSt0LnNlc3Npb24uSFRUUFNlbmRCeXRlc0RlbHRhLHU9byt0LnNlc3Npb24uV1NSZWN2Qnl0ZXNEZWx0YSt0LnNlc3Npb24uSFRUUFJlY3ZCeXRlc0RlbHRhLGw9dC5zZXNzaW9uLnNlbmRCeXRlcytPYmplY3QobnQuZ2V0SFRUUFNlbmRCeXRlcykoKSxwPXQuc2Vzc2lvbi5yZWN2Qnl0ZXMrT2JqZWN0KG50LmdldEhUVFBSZWN2Qnl0ZXMpKCk7dC5nYXRld2F5Q2xpZW50LnNvY2tldCYmdC5nYXRld2F5Q2xpZW50LnNvY2tldC5zdGF0ZT09PXQuZ2F0ZXdheUNsaWVudC5DT05ORUNURUQmJihsKz1hLmdldFNlbmRCeXRlcygpLHArPWEuZ2V0UmVjdkJ5dGVzKCkpO3ZhciBmPTE7aS5wZWVyX2RlbGF5JiYoZj1pLnBlZXJfZGVsYXkubGVuZ3RoLGYrPTEpLGllKG4sXCJEdXJhdGlvblwiLGEuZ2V0RHVyYXRpb24oKSksaWUobixcIlVzZXJDb3VudFwiLGYpLGllKG4sXCJTZW5kQnl0ZXNcIixsKSxpZShuLFwiUmVjdkJ5dGVzXCIscCksaWUobixcIlNlbmRCaXRyYXRlXCIsOCpkLzFlMyksaWUobixcIlJlY3ZCaXRyYXRlXCIsOCp1LzFlMyksZSYmZShuKX0sdC5pc0xvY2FsVmlkZW9GcmVlemU9ZnVuY3Rpb24oZSx0KXt2YXIgbj0wLGk9MDtpZighZXx8IXQpcmV0dXJuITE7aWYoT2JqZWN0KG0uaXNDaHJvbWUpKCl8fE9iamVjdChtLmlzT3BlcmEpKCkpbj1lLmdvb2dGcmFtZVJhdGVJbnB1dCxpPWUuZ29vZ0ZyYW1lUmF0ZVNlbnQ7ZWxzZSBpZihPYmplY3QobS5pc1NhZmFyaSkoKSluPXBhcnNlSW50KGUuZnJhbWVyYXRlTWVhbiksaT1wYXJzZUludChlLmZyYW1lc0VuY29kZWQpLXBhcnNlSW50KHQuZnJhbWVzRW5jb2RlZCk7ZWxzZXtpZighT2JqZWN0KG0uaXNGaXJlRm94KSgpKXJldHVybiExO249cGFyc2VJbnQoZS5mcmFtZXJhdGVNZWFuKSxpPXBhcnNlSW50KGUuZnJhbWVzRW5jb2RlZCktcGFyc2VJbnQodC5mcmFtZXNFbmNvZGVkKX1yZXR1cm4gbj41JiZpPDN9LHQuaXNSZW1vdGVWaWRlb0ZyZWV6ZT1mdW5jdGlvbihlLHQpe3ZhciBuPTAsaT0wO2lmKCFlfHwhdClyZXR1cm4hMTtpZihPYmplY3QobS5pc0Nocm9tZSkoKXx8T2JqZWN0KG0uaXNPcGVyYSkoKSluPWUuZ29vZ0ZyYW1lUmF0ZVJlY2VpdmVkLGk9ZS5nb29nRnJhbWVSYXRlRGVjb2RlZDtlbHNlIGlmKE9iamVjdChtLmlzU2FmYXJpKSgpKW49ZS5mcmFtZXJhdGVNZWFuLGk9cGFyc2VJbnQoZS5mcmFtZXNEZWNvZGVkKS1wYXJzZUludCh0LmZyYW1lc0RlY29kZWQpO2Vsc2V7aWYoIU9iamVjdChtLmlzRmlyZUZveCkoKSlyZXR1cm4hMTtuPXBhcnNlSW50KGUuZnJhbWVzUmVjZWl2ZWQpLXBhcnNlSW50KHQuZnJhbWVzUmVjZWl2ZWQpLGk9cGFyc2VJbnQoZS5mcmFtZXNEZWNvZGVkKS1wYXJzZUludCh0LmZyYW1lc0RlY29kZWQpfXJldHVybiBuPjUmJm48MTAmJmk8M3x8bj4xMCYmbjwyMCYmaTw0fHxuPjIwJiZpPDV9LHQuaXNBdWRpb0ZyZWV6ZT1mdW5jdGlvbihlKXtpZihPYmplY3QobS5pc0Nocm9tZSkoKSYmZSl7aWYoZS5nb29nRGVjb2RpbmdQTEMmJmUuZ29vZ0RlY29kaW5nUExDQ05HJiZlLmdvb2dEZWNvZGluZ0NUTilyZXR1cm4ocGFyc2VJbnQoZS5nb29nRGVjb2RpbmdQTEMpK3BhcnNlSW50KGUuZ29vZ0RlY29kaW5nUExDQ05HKSkvcGFyc2VJbnQoZS5nb29nRGVjb2RpbmdDVE4pPi4yfWVsc2UgaWYoKE9iamVjdChtLmlzU2FmYXJpKSgpfHxPYmplY3QobS5pc0ZpcmVGb3gpKCkpJiZlLnBhY2tldHNMb3N0JiZlLnBhY2tldHNSZWNlaXZlZClyZXR1cm4gcGFyc2VJbnQoZS5wYWNrZXRzTG9zdCkvKHBhcnNlSW50KGUucGFja2V0c0xvc3QpK3BhcnNlSW50KGUucGFja2V0c1JlY2VpdmVkKSk+LjI7cmV0dXJuITF9LHQuaXNBdWRpb0RlY29kZUZhaWxlZD1mdW5jdGlvbihlKXtyZXR1cm4hISgoT2JqZWN0KG0uaXNDaHJvbWUpKCl8fE9iamVjdChtLmlzT3BlcmEpKCkpJiZlJiZwYXJzZUludChlLmJ5dGVzUmVjZWl2ZWQpPjAmJjA9PT1wYXJzZUludChlLmdvb2dEZWNvZGluZ05vcm1hbCkpfSx0LnN0YXJ0TmV0d29ya1F1YWxpdHlUaW1lcj1mdW5jdGlvbigpe3QuY2xlYXJOZXR3b3JrUXVhbGl0eVRpbWVyKCksdC5uZXR3b3JrUXVhbGl0eVRpbWVyPXNldEludGVydmFsKGZ1bmN0aW9uKCl7aWYodC5nYXRld2F5Q2xpZW50LnN0YXRlIT09UnQuQ09OTkVDVEVEKXQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwibmV0d29yay1xdWFsaXR5XCIsdXBsaW5rTmV0d29ya1F1YWxpdHk6MCxkb3dubGlua05ldHdvcmtRdWFsaXR5OjB9KTtlbHNle3ZhciBlPXQuZ2F0ZXdheUNsaWVudC50cmFmZmljX3N0YXRzO3QuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwibmV0d29yay1xdWFsaXR5XCIsdXBsaW5rTmV0d29ya1F1YWxpdHk6dC5uZXR3b3JrUXVhbGl0eVRyYW5zKGUudXBsaW5rX25ldHdvcmtfcXVhbGl0eSksZG93bmxpbmtOZXR3b3JrUXVhbGl0eTp0Lm5ldHdvcmtRdWFsaXR5VHJhbnMoZS5kb3dubGlua19uZXR3b3JrX3F1YWxpdHkpfSl9fSwyZTMpfSx0LmNsZWFyTmV0d29ya1F1YWxpdHlUaW1lcj1mdW5jdGlvbigpe3QubmV0d29ya1F1YWxpdHlUaW1lciYmY2xlYXJJbnRlcnZhbCh0Lm5ldHdvcmtRdWFsaXR5VGltZXIpfSx0Lm5ldHdvcmtRdWFsaXR5VHJhbnM9ZnVuY3Rpb24oZSl7cmV0dXJuIGU+PTAmJmU8LjE3PzE6ZT49LjE3JiZlPC4zNj8yOmU+PS4zNiYmZTwuNTk/MzplPj0uNTkmJmU8PTE/NDplPjE/NTowfSx0LmdldFN0YXRzVGltZXI9c2V0SW50ZXJ2YWwoZnVuY3Rpb24oKXt2YXIgZT10LmdhdGV3YXlDbGllbnQudHJhZmZpY19zdGF0cyxuPURhdGUubm93KCk7dC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJfdGVzdEV4Y2VwdGlvblwifSksT2JqZWN0LmtleXModC5sb2NhbFN0YXRzKS5sZW5ndGgmJnQuZXhjZXB0aW9uTW9uaXRvci5zZXRMb2NhbFN0YXRzKHQubG9jYWxTdGF0cyksT2JqZWN0LmtleXModC5yZW1vdGVTdGF0cykubGVuZ3RoJiZ0LmV4Y2VwdGlvbk1vbml0b3Iuc2V0UmVtb3RlU3RhdHModC5yZW1vdGVTdGF0cyk7dmFyIGk9e307T2JqZWN0LmtleXModC5nYXRld2F5Q2xpZW50LnJlbW90ZVN0cmVhbXMpLmZvckVhY2goZnVuY3Rpb24oYSl7dmFyIHI9dC5nYXRld2F5Q2xpZW50LnJlbW90ZVN0cmVhbXNbYV0sbz10LnJlbW90ZVN0YXRzW2FdLHM9e2lkOmEsdXBkYXRlZEF0Om59O2lbYV09cyxzLmZpcnN0RnJhbWVUaW1lPXIuZmlyc3RGcmFtZVRpbWUsbz8ocy5hdWRpb1RvdGFsUGxheUR1cmF0aW9uPW8uYXVkaW9Ub3RhbFBsYXlEdXJhdGlvbisxLHMuYXVkaW9Ub3RhbEZyZWV6ZVRpbWU9by5hdWRpb1RvdGFsRnJlZXplVGltZSxzLmlzQXVkaW9GcmVlemU9ITEscy5pc0F1ZGlvRGVjb2RlRmFpbGVkPSExLHMudmlkZW9Ub3RhbFBsYXlEdXJhdGlvbj1vLnZpZGVvVG90YWxQbGF5RHVyYXRpb24rMSxzLnZpZGVvVG90YWxGcmVlemVUaW1lPW8udmlkZW9Ub3RhbEZyZWV6ZVRpbWUscy5pc1ZpZGVvRnJlZXplPSExKToocy5hdWRpb1RvdGFsUGxheUR1cmF0aW9uPTEscy5hdWRpb1RvdGFsRnJlZXplVGltZT0wLHMudmlkZW9Ub3RhbFBsYXlEdXJhdGlvbj0xLHMudmlkZW9Ub3RhbEZyZWV6ZVRpbWU9MCk7dmFyIGM9ZSYmZS5wZWVyX2RlbGF5JiZlLnBlZXJfZGVsYXkuZmluZChmdW5jdGlvbihlKXtyZXR1cm4gZS5wZWVyX3VpZD09YX0pO2MmJihzLnBlZXJfZGVsYXk9YyksciYmKHIuaXNQbGF5aW5nKCkmJihzLmF1ZGlvRGlzYWJsZWQ9ci51c2VyTXV0ZUF1ZGlvfHxyLnBlZXJNdXRlQXVkaW8/XCIxXCI6XCIwXCIscy52aWRlb0Rpc2FibGVkPXIudXNlck11dGVWaWRlb3x8ci5wZWVyTXV0ZVZpZGVvP1wiMVwiOlwiMFwiKSxvJiZvLnBlZXJfZGVsYXkmJmMmJm8ucGVlcl9kZWxheS5zdHJlYW1fdHlwZSE9PWMuc3RyZWFtX3R5cGUmJnQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwic3RyZWFtVHlwZUNoYW5nZVwiLHVpZDphLHN0cmVhbVR5cGU6Yy5zdHJlYW1fdHlwZX0pLHIucGMmJlwiZXN0YWJsaXNoZWRcIj09ci5wYy5zdGF0ZSYmci5wYy5nZXRTdGF0cyhmdW5jdGlvbihlKXtpZihzLnBjU3RhdHM9ZSxzLmF1ZGlvU3RhdHM9ZS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9cIj09ZS5tZWRpYVR5cGUmJihlLmlkLmluZGV4T2YoXCJfcmVjdlwiKT4tMXx8ZS5pZC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJpbmJvdW5kXCIpPi0xKX0pLHMudmlkZW9TdGF0cz1lLmZpbmQoZnVuY3Rpb24oZSl7cmV0dXJuXCJ2aWRlb1wiPT1lLm1lZGlhVHlwZSYmKGUuaWQuaW5kZXhPZihcIl9yZWN2XCIpPi0xfHxlLmlkLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihcImluYm91bmRcIik+LTEpfSksbyYmby5hdWRpb1N0YXRzJiZzLmF1ZGlvU3RhdHMpe3ZhciBuPXBhcnNlSW50KHMuYXVkaW9TdGF0cy5ieXRlc1JlY2VpdmVkKS1wYXJzZUludChvLmF1ZGlvU3RhdHMuYnl0ZXNSZWNlaXZlZCksaT1wYXJzZUludChzLmF1ZGlvU3RhdHMuZ29vZ0RlY29kaW5nTm9ybWFsKS1wYXJzZUludChvLmF1ZGlvU3RhdHMuZ29vZ0RlY29kaW5nTm9ybWFsKTtpZihzLmF1ZGlvU3RhdHMuYXVkaW9SZWN2Qnl0ZXNEZWx0YT1uLHMuYXVkaW9TdGF0cy5hdWRpb0RlY29kaW5nTm9ybWFsRGVsdGE9aSx0LnNlc3Npb24ucmVjdkJ5dGVzKz1uLGlzRmluaXRlKG4pJiZzLmF1ZGlvU3RhdHMudGltZXN0YW1wKXt2YXIgYT1zLmF1ZGlvU3RhdHMudGltZXN0YW1wLmdldFRpbWUoKS1vLmF1ZGlvU3RhdHMudGltZXN0YW1wLmdldFRpbWUoKTtzLmF1ZGlvUmVjdkJpdHJhdGU9TWF0aC5mbG9vcig4Km4vYSl9dC5pc0F1ZGlvRnJlZXplKHMuYXVkaW9TdGF0cykmJnMuYXVkaW9Ub3RhbFBsYXlEdXJhdGlvbj4xMCYmKHMuYXVkaW9Ub3RhbEZyZWV6ZVRpbWUrKyxzLmlzQXVkaW9GcmVlemU9ITApLHQuaXNBdWRpb0RlY29kZUZhaWxlZChzLmF1ZGlvU3RhdHMpJiZzLmF1ZGlvVG90YWxQbGF5RHVyYXRpb24+MTAmJihzLmlzQXVkaW9EZWNvZGVGYWlsZWQ9ITApLHMuYXVkaW9TdGF0cy5hdWRpb1RvdGFsRnJlZXplVGltZT1zLmF1ZGlvVG90YWxGcmVlemVUaW1lLHMuYXVkaW9TdGF0cy5hdWRpb1RvdGFsUGxheUR1cmF0aW9uPXMuYXVkaW9Ub3RhbFBsYXlEdXJhdGlvbixzLmF1ZGlvU3RhdHMuYXVkaW9GcmVlemVSYXRlPU1hdGguY2VpbCgxMDAqcy5hdWRpb1RvdGFsRnJlZXplVGltZS9zLmF1ZGlvVG90YWxQbGF5RHVyYXRpb24pfWlmKG8mJm8udmlkZW9TdGF0cyYmcy52aWRlb1N0YXRzKXt2YXIgYz1wYXJzZUludChzLnZpZGVvU3RhdHMuYnl0ZXNSZWNlaXZlZCktcGFyc2VJbnQoby52aWRlb1N0YXRzLmJ5dGVzUmVjZWl2ZWQpO3MudmlkZW9TdGF0cy52aWRlb1JlY3ZCeXRlc0RlbHRhPWMsdC5zZXNzaW9uLnJlY3ZCeXRlcys9Yyxpc0Zpbml0ZShjKSYmcy52aWRlb1N0YXRzLnRpbWVzdGFtcCYmKGE9cy52aWRlb1N0YXRzLnRpbWVzdGFtcC5nZXRUaW1lKCktby52aWRlb1N0YXRzLnRpbWVzdGFtcC5nZXRUaW1lKCkscy52aWRlb1JlY3ZCaXRyYXRlPU1hdGguZmxvb3IoOCpjL2EpKSx0LmlzUmVtb3RlVmlkZW9GcmVlemUocy52aWRlb1N0YXRzLG8udmlkZW9TdGF0cykmJihzLnZpZGVvVG90YWxGcmVlemVUaW1lKysscy5pc1ZpZGVvRnJlZXplPSEwKSxzLnZpZGVvU3RhdHMudmlkZW9Ub3RhbEZyZWV6ZVRpbWU9cy52aWRlb1RvdGFsRnJlZXplVGltZSxzLnZpZGVvU3RhdHMudmlkZW9Ub3RhbFBsYXlEdXJhdGlvbj1zLnZpZGVvVG90YWxQbGF5RHVyYXRpb24scy52aWRlb1N0YXRzLnZpZGVvRnJlZXplUmF0ZT1NYXRoLmNlaWwoMTAwKnMudmlkZW9Ub3RhbEZyZWV6ZVRpbWUvcy52aWRlb1RvdGFsUGxheUR1cmF0aW9uKSxyLnBsYXllciYmci5wbGF5ZXIudmlkZW8mJnIucGxheWVyLnZpZGVvLnZpZGVvV2lkdGgmJnIucGxheWVyLnZpZGVvLnZpZGVvSGVpZ2h0PyhzLnZpZGVvU3RhdHMucmVuZGVyUmVtb3RlV2lkdGg9ci5wbGF5ZXIudmlkZW8udmlkZW9XaWR0aCxzLnZpZGVvU3RhdHMucmVuZGVyUmVtb3RlSGVpZ2h0PXIucGxheWVyLnZpZGVvLnZpZGVvSGVpZ2h0KToocy52aWRlb1N0YXRzLnJlbmRlclJlbW90ZVdpZHRoPXIudmlkZW9XaWR0aHx8cy52aWRlb1N0YXRzLmdvb2dGcmFtZVdpZHRoUmVjZWl2ZWQscy52aWRlb1N0YXRzLnJlbmRlclJlbW90ZUhlaWdodD1yLnZpZGVvSGVpZ2h0fHxzLnZpZGVvU3RhdHMuZ29vZ0ZyYW1lSGVpZ2h0UmVjZWl2ZWQpfX0pKX0pLHQucmVtb3RlU3RhdHM9aTt2YXIgYT17fTtpZihPYmplY3Qua2V5cyh0LmdhdGV3YXlDbGllbnQubG9jYWxTdHJlYW1zKS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBpPXQuZ2F0ZXdheUNsaWVudC5sb2NhbFN0cmVhbXNbZV0scj10LmxvY2FsU3RhdHNbZV0sbz17aWQ6ZSx1cGRhdGVkQXQ6bn07YVtlXT1vLHI/KG8udmlkZW9Ub3RhbFBsYXlEdXJhdGlvbj1yLnZpZGVvVG90YWxQbGF5RHVyYXRpb24rMSxvLnZpZGVvVG90YWxGcmVlemVUaW1lPXIudmlkZW9Ub3RhbEZyZWV6ZVRpbWUsby5pc1ZpZGVvRnJlZXplPSExKTooby52aWRlb1RvdGFsUGxheUR1cmF0aW9uPTEsby52aWRlb1RvdGFsRnJlZXplVGltZT0wKSxpJiYoaS5pc1BsYXlpbmcoKSYmKG8uYXVkaW9EaXNhYmxlZD1pLnVzZXJNdXRlQXVkaW8/XCIxXCI6XCIwXCIsby52aWRlb0Rpc2FibGVkPWkudXNlck11dGVWaWRlbz9cIjFcIjpcIjBcIiksaS52aWRlbyYmaS5hdHRyaWJ1dGVzLm1heFZpZGVvQlc/by52aWRlb1RhcmdldFNlbmRCaXRyYXRlPWkuYXR0cmlidXRlcy5tYXhWaWRlb0JXOmkudmlkZW8mJmkuc2NyZWVuQXR0cmlidXRlcyYmKG8udmlkZW9UYXJnZXRTZW5kQml0cmF0ZT1pLnNjcmVlbkF0dHJpYnV0ZXMubWF4VmlkZW9CVyksaS5wYyYmXCJlc3RhYmxpc2hlZFwiPT1pLnBjLnN0YXRlJiZpLnBjLmdldFN0YXRzKGZ1bmN0aW9uKGUpe2lmKG8ucGNTdGF0cz1lLnJldmVyc2UoKSxvLmF1ZGlvU3RhdHM9ZS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwiYXVkaW9cIj09ZS5tZWRpYVR5cGUmJihlLmlkLmluZGV4T2YoXCJfc2VuZFwiKT4tMXx8ZS5pZC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJvdXRib3VuZFwiKT4tMSl9KSxvLnZpZGVvU3RhdHM9ZS5maW5kKGZ1bmN0aW9uKGUpe3JldHVyblwidmlkZW9cIj09ZS5tZWRpYVR5cGUmJihlLmlkLmluZGV4T2YoXCJfc2VuZFwiKT4tMXx8ZS5pZC50b0xvd2VyQ2FzZSgpLmluZGV4T2YoXCJvdXRib3VuZFwiKT4tMSl9KSxvLmF1ZGlvU3RhdHMmJnImJnIuYXVkaW9TdGF0cyl7dmFyIG49cGFyc2VJbnQoby5hdWRpb1N0YXRzLmJ5dGVzU2VudCktcGFyc2VJbnQoci5hdWRpb1N0YXRzLmJ5dGVzU2VudCk7aWYoby5hdWRpb1N0YXRzLmF1ZGlvU2VuZEJ5dGVzRGVsdGE9bix0LnNlc3Npb24uc2VuZEJ5dGVzKz1uLGlzRmluaXRlKG4pJiZvLmF1ZGlvU3RhdHMudGltZXN0YW1wKXt2YXIgYT1vLmF1ZGlvU3RhdHMudGltZXN0YW1wLmdldFRpbWUoKS1yLmF1ZGlvU3RhdHMudGltZXN0YW1wLmdldFRpbWUoKTtvLmF1ZGlvU2VuZEJpdHJhdGU9TWF0aC5mbG9vcig4Km4vYSl9fWlmKG8udmlkZW9TdGF0cyYmciYmci52aWRlb1N0YXRzKXt2YXIgcz1wYXJzZUludChvLnZpZGVvU3RhdHMuYnl0ZXNTZW50KS1wYXJzZUludChyLnZpZGVvU3RhdHMuYnl0ZXNTZW50KTtvLnZpZGVvU3RhdHMudmlkZW9TZW5kQnl0ZXNEZWx0YT1zLHQuc2Vzc2lvbi5zZW5kQnl0ZXMrPXMsaXNGaW5pdGUocykmJm8udmlkZW9TdGF0cy50aW1lc3RhbXAmJihhPW8udmlkZW9TdGF0cy50aW1lc3RhbXAuZ2V0VGltZSgpLXIudmlkZW9TdGF0cy50aW1lc3RhbXAuZ2V0VGltZSgpLG8udmlkZW9TZW5kQml0cmF0ZT1NYXRoLmZsb29yKDgqcy9hKSksdC5pc0xvY2FsVmlkZW9GcmVlemUoby52aWRlb1N0YXRzLHIudmlkZW9TdGF0cykmJihvLnZpZGVvVG90YWxGcmVlemVUaW1lKyssby5pc1ZpZGVvRnJlZXplPSEwKSxvLnZpZGVvU3RhdHMudmlkZW9Ub3RhbEZyZWV6ZVRpbWU9by52aWRlb1RvdGFsRnJlZXplVGltZSxvLnZpZGVvU3RhdHMudmlkZW9Ub3RhbFBsYXlEdXJhdGlvbj1vLnZpZGVvVG90YWxQbGF5RHVyYXRpb24sby52aWRlb1N0YXRzLnZpZGVvRnJlZXplUmF0ZT1NYXRoLmNlaWwoMTAwKm8udmlkZW9Ub3RhbEZyZWV6ZVRpbWUvby52aWRlb1RvdGFsUGxheUR1cmF0aW9uKSxvLnZpZGVvU3RhdHMucmVuZGVyTG9jYWxXaWR0aD1pLnZpZGVvV2lkdGh8fG8udmlkZW9TdGF0cy5nb29nRnJhbWVXaWR0aFNlbnQsby52aWRlb1N0YXRzLnJlbmRlckxvY2FsSGVpZ2h0PWkudmlkZW9IZWlnaHR8fG8udmlkZW9TdGF0cy5nb29nRnJhbWVIZWlnaHRTZW50fX0pKX0pLHQubG9jYWxTdGF0cz1hLHQuc2Vzc2lvbi5IVFRQU2VuZEJ5dGVzRGVsdGE9T2JqZWN0KG50LmdldEhUVFBTZW5kQnl0ZXMpKCktdC5zZXNzaW9uLkhUVFBTZW5kQnl0ZXMsdC5zZXNzaW9uLkhUVFBTZW5kQnl0ZXM9T2JqZWN0KG50LmdldEhUVFBTZW5kQnl0ZXMpKCksdC5zZXNzaW9uLkhUVFBSZWN2Qnl0ZXNEZWx0YT1PYmplY3QobnQuZ2V0SFRUUFJlY3ZCeXRlcykoKS10LnNlc3Npb24uSFRUUFJlY3ZCeXRlcyx0LnNlc3Npb24uSFRUUFJlY3ZCeXRlcz1PYmplY3QobnQuZ2V0SFRUUFJlY3ZCeXRlcykoKSx0LmdhdGV3YXlDbGllbnQuc29ja2V0JiZ0LmdhdGV3YXlDbGllbnQuc29ja2V0LnN0YXRlPT09dC5nYXRld2F5Q2xpZW50LkNPTk5FQ1RFRCl7dmFyIHI9dC5nYXRld2F5Q2xpZW50LnNvY2tldDt0LnNlc3Npb24uV1NTZW5kQnl0ZXNEZWx0YT1yLmdldFNlbmRCeXRlcygpLXQuc2Vzc2lvbi5XU1NlbmRCeXRlcyx0LnNlc3Npb24uV1NTZW5kQnl0ZXM9ci5nZXRTZW5kQnl0ZXMoKSx0LnNlc3Npb24uV1NSZWN2Qnl0ZXNEZWx0YT1yLmdldFJlY3ZCeXRlcygpLXQuc2Vzc2lvbi5XU1JlY3ZCeXRlcyx0LnNlc3Npb24uV1NSZWN2Qnl0ZXM9ci5nZXRSZWN2Qnl0ZXMoKX19LDFlMyksdC5nYXRld2F5Q2xpZW50Lm9uKFwiam9pblwiLGZ1bmN0aW9uKCl7dC5zZXNzaW9uPXtzZW5kQnl0ZXM6MCxyZWN2Qnl0ZXM6MCxXU1NlbmRCeXRlczowLFdTU2VuZEJ5dGVzRGVsdGE6MCxXU1JlY3ZCeXRlczowLFdTUmVjdkJ5dGVzRGVsdGE6MCxIVFRQU2VuZEJ5dGVzOjAsSFRUUFNlbmRCeXRlc0RlbHRhOjAsSFRUUFJlY3ZCeXRlczowLEhUVFBSZWN2Qnl0ZXNEZWx0YTowfX0pLHR9KHQuZ2F0ZXdheUNsaWVudCksdC5jb25maWdEaXN0cmlidXRNYW5hZ2VyPWZ1bmN0aW9uKGUpe3ZhciB0PXt9O3JldHVybiB0LmNsaWVudD1lLHQuY2xpZW50LmdhdGV3YXlDbGllbnQmJnQuY2xpZW50LmdhdGV3YXlDbGllbnQub24oXCJjb25maWctZGlzdHJpYnV0ZVwiLGZ1bmN0aW9uKG4pe3ZhciBpPW4uam9pbkluZm8sYT1uLmNvbmZpZztpZihhKXtPYmplY3QocmUuaXNFbXB0eSkoYS51cGxvYWRMb2cpfHwoT2JqZWN0KHIuc2V0UGFyYW1ldGVyKShcIlVQTE9BRF9MT0dcIixhLnVwbG9hZExvZykscy5iLnJlcG9ydEFwaUludm9rZShpLnNpZCx7bmFtZTpcIl9jb25maWdEaXN0cmlidXRlXCIsb3B0aW9uczp7ZmVhdHVyZTpcInVwbG9hZExvZ1wiLHZhbHVlOmEudXBsb2FkTG9nfX0pKCkpLE9iamVjdChyZS5pc0VtcHR5KShhLmR1YWxTdHJlYW0pfHwoZS5pc0R1YWxTdHJlYW09YS5kdWFsU3RyZWFtLHMuYi5yZXBvcnRBcGlJbnZva2UoaS5zaWQse25hbWU6XCJfY29uZmlnRGlzdHJpYnV0ZVwiLG9wdGlvbnM6e2ZlYXR1cmU6XCJkdWFsU3RyZWFtXCIsdmFsdWU6YS5kdWFsU3RyZWFtfX0pKCkpLE9iamVjdChyZS5pc0VtcHR5KShhLnN0cmVhbUZhbGxiYWNrT3B0aW9uKXx8dC5jbGllbnQuZ2F0ZXdheUNsaWVudCYmdC5jbGllbnQuZ2F0ZXdheUNsaWVudC5vbihcInN0cmVhbS1zdWJzY3JpYmVkXCIsZnVuY3Rpb24oZSl7dmFyIG49ZS5zdHJlYW07bj8odC5jbGllbnQuZ2F0ZXdheUNsaWVudC5zZXRTdHJlYW1GYWxsYmFja09wdGlvbihuLGEuc3RyZWFtRmFsbGJhY2tPcHRpb24pLHMuYi5yZXBvcnRBcGlJbnZva2UoaS5zaWQse25hbWU6XCJfY29uZmlnRGlzdHJpYnV0ZVwiLG9wdGlvbnM6e2ZlYXR1cmU6XCJzdHJlYW1GYWxsYmFja09wdGlvblwiLHZhbHVlOmEuc3RyZWFtRmFsbGJhY2tPcHRpb24sc3RyZWFtSWQ6bi5nZXRJZCgpfX0pKCkpOnMuYi5yZXBvcnRBcGlJbnZva2UoaS5zaWQse25hbWU6XCJfY29uZmlnRGlzdHJpYnV0ZVwiLG9wdGlvbnM6e2ZlYXR1cmU6XCJzdHJlYW1GYWxsYmFja09wdGlvblwiLHZhbHVlOmEuc3RyZWFtRmFsbGJhY2tPcHRpb24sc3RyZWFtSWQ6bi5nZXRJZCgpLGVycjpcImludmFsaWQgc3RyZWFtXCJ9fSkoKX0pO3RyeXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KGUuY2xpZW50SWQsXCJdIHNldFBhcmFtZXRlciBpbiBkaXN0cmlidXRpb246IFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoYSkpKSxPYmplY3Qua2V5cyhhKS5tYXAoZnVuY3Rpb24oZSl7cmV0dXJuIE9iamVjdChyLnNldFBhcmFtZXRlcikoZSxhW2VdKX0pfWNhdGNoKHQpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQoZS5jbGllbnRJZCxcIl0gc2V0UGFyYW1ldGVyIGluIGRpc3RyaWJ1dGlvbiBmYWlsZWQ6IFwiKS5jb25jYXQoSlNPTi5zdHJpbmdpZnkoYSkpKX19fSksdH0odCksZnVuY3Rpb24oZSx0KXt2YXIgbj1hcmd1bWVudHM7ZS5saXZlU3RyZWFtaW5nPWMoKSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnM9e2luamVjdF9zdHJlYW1pbmc6bnVsbCxtaXhfc3RyZWFtaW5nOm51bGwscmF3X3N0cmVhbWluZzpudWxsfSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvblR5cGVzPXtpbmplY3Rfc3RyZWFtaW5nOlwicHVsbFwiLG1peF9zdHJlYW1pbmc6XCJwdXNoXCIscmF3X3N0cmVhbWluZzpcInB1c2hcIn0sZS5saXZlU3RyZWFtaW5nLnB1c2hTdGF0ZXM9e30sZS5saXZlU3RyZWFtaW5nLnB1bGxTdGF0ZXM9e30sZS5nYXRld2F5Q2xpZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJqb2luXCIsZnVuY3Rpb24odCl7ZS5saXZlU3RyZWFtaW5nLnJlc3VtZVN0YXRlcyhcInB1bGxcIil9KSxlLmdhdGV3YXlDbGllbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN0cmVhbS11bnB1Ymxpc2hlZFwiLGZ1bmN0aW9uKHQpe2lmKHQub3B0aW9ucyYmMD09PXQub3B0aW9ucy5zdHJlYW1UeXBlKWZvcih2YXIgbiBpbiBlLmxpdmVTdHJlYW1pbmcucHVzaFN0YXRlcyl7dmFyIGk9ZS5saXZlU3RyZWFtaW5nLnB1c2hTdGF0ZXNbbl07aS51cmwmJmUuX3N0b3BMaXZlU3RyZWFtaW5nKGkudXJsLGkudHJhbnNjb2RpbmdFbmFibGVkLCEwKX19KSxlLmdhdGV3YXlDbGllbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN0cmVhbS1wdWJsaXNoZWRcIixmdW5jdGlvbih0KXtlLmxpdmVTdHJlYW1pbmcucmVzdW1lU3RhdGVzKFwicHVzaFwiKX0pLGUubGl2ZVN0cmVhbWluZy5jb25uZWN0PShtPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIG4oaSl7dmFyIGEscjtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKG4pe2Zvcig7Oylzd2l0Y2gobi5wcmV2PW4ubmV4dCl7Y2FzZSAwOmlmKGUuam9pbkluZm8mJmUuam9pbkluZm8udWlkJiZwYXJzZUludChlLmpvaW5JbmZvLnZpZCwxMCkpe24ubmV4dD0zO2JyZWFrfXRocm93IG5ldyBFcnJvcihcIkNMSUVOVF9OT1RfSk9JTkVEXCIpO2Nhc2UgMzpyZXR1cm4gYT1uZXcgcXQoe2FwcElkOnQuYXBwSWQsY25hbWU6ZS5jaGFubmVsLHNpZDp0LnNlc3Npb25JZCx1aWQ6ZS5qb2luSW5mby51aWR9KSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnNbaV09YSxuLm5leHQ9NyxGdCh7YXBwSWQ6dC5hcHBJZCxjbmFtZTplLmNoYW5uZWwsc2VydmljZU5hbWU6aSxzaWQ6dC5zZXNzaW9uSWQsdWlkOmUuam9pbkluZm8udWlkfSk7Y2FzZSA3OnJldHVybiByPW4uc2VudCxuLm5leHQ9MTAsYS5jb25uZWN0KHt3c0NsaWVudDpyfSk7Y2FzZSAxMDpyZXR1cm4gYS5vbihcIm5vdGlmaWNhdGlvblwiLGZ1bmN0aW9uKHQpe2lmKHQuc2VydmljZU5hbWU9aSxlLmxpdmVTdHJlYW1pbmcuZGlzcGF0Y2hFdmVudCh0KSw1MDM9PT10LmNvZGUpO2Vsc2Ugc3dpdGNoKHQuc2VydmljZU5hbWUpe2Nhc2VcImluamVjdF9zdHJlYW1pbmdcIjp2YXIgbj17cmVhc29uOnQmJnQucmVhc29uLHN0YXR1czpLdCh0JiZ0LmNvZGUpLHR5cGU6XCJzdHJlYW1JbmplY3RlZFN0YXR1c1wiLHVpZDp0JiZ0LnNlcnZlclN0YXR1cyYmdC5zZXJ2ZXJTdGF0dXMuaW5qZWN0X3VpZCx1cmw6dCYmdC5zZXJ2ZXJTdGF0dXMmJnQuc2VydmVyU3RhdHVzLnVybH07ZS5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQobik7YnJlYWs7Y2FzZVwicmF3X3N0cmVhbWluZ1wiOmNhc2VcIm1peF9zdHJlYW1pbmdcIjp2YXIgYT17cmVhc29uOnQmJnQucmVhc29uLHN0YXR1czp0JiZ0LmNvZGUsdHlwZTp0JiYyMDA9PT10LmNvZGU/XCJsaXZlU3RyZWFtaW5nU3RhcnRlZFwiOlwibGl2ZVN0cmVhbWluZ0ZhaWxlZFwiLHVpZDp0JiZ0LnNlcnZlclN0YXR1cyYmdC51aWQsdXJsOnQmJnQuc2VydmVyU3RhdHVzJiZ0LnNlcnZlclN0YXR1cy51cmx9O2UuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGEpfX0pLGEub24oXCJjbG9zZVwiLGZ1bmN0aW9uKHQpe1l0KGEpLG8uZGVmYXVsdC5kZWJ1ZyhcIlJlY29ubmVjdCBcIi5jb25jYXQoaSkpLGUubGl2ZVN0cmVhbWluZy5jb25uZWN0KGkpLmNhdGNoKGZ1bmN0aW9uKHQpe2UubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uc1tpXT1udWxsLGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwiXCIuY29uY2F0KGkucmVwbGFjZShcIl9cIixcIi1cIiksXCItZGlzY29ubmVjdGVkXCIpfSl9KX0pLG8uZGVmYXVsdC5kZWJ1ZyhcIlwiLmNvbmNhdChpLFwiIGNvbm5lY3RlZFwiKSksbi5hYnJ1cHQoXCJyZXR1cm5cIixhKTtjYXNlIDE0OmNhc2VcImVuZFwiOnJldHVybiBuLnN0b3AoKX19LG4sdGhpcyl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIG0uYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5saXZlU3RyZWFtaW5nLmRpc2Nvbm5lY3Q9KGY9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gdChuKXt2YXIgaSxhO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6dC50MD1jZS5hLmtleXMoZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zKTtjYXNlIDE6aWYoKHQudDE9dC50MCgpKS5kb25lKXt0Lm5leHQ9MTM7YnJlYWt9aWYoaT10LnQxLnZhbHVlLCFlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMuaGFzT3duUHJvcGVydHkoaSkpe3QubmV4dD0xMTticmVha31pZighKGE9ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zW2ldKXx8biYmbiE9PWkpe3QubmV4dD0xMTticmVha31yZXR1cm4gby5kZWZhdWx0LmluZm8oXCJEaXNjb25uZWN0aW5nIGxpdmVTdHJlYW1pbmcgXCIuY29uY2F0KGkpKSx0Lm5leHQ9OSxhLmRpc2Nvbm5lY3QoKTtjYXNlIDk6dC5zZW50LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uc1tpXT1udWxsO2Nhc2UgMTE6dC5uZXh0PTE7YnJlYWs7Y2FzZSAxMzpjYXNlXCJlbmRcIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMpfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBmLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pLGUubGl2ZVN0cmVhbWluZy5yZXN1bWVTdGF0ZXM9KHA9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gdChuKXt2YXIgaSxhLHIscyxjLGQsdSxsO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6dC50MD1jZS5hLmtleXMoZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zKTtjYXNlIDE6aWYoKHQudDE9dC50MCgpKS5kb25lKXt0Lm5leHQ9ODticmVha31pZihpPXQudDEudmFsdWUsIW58fGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uVHlwZXNbaV09PT1uKXt0Lm5leHQ9NTticmVha31yZXR1cm4gdC5hYnJ1cHQoXCJjb250aW51ZVwiLDEpO2Nhc2UgNTplLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMuaGFzT3duUHJvcGVydHkoaSkmJihhPWUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9uc1tpXSkmJihvLmRlZmF1bHQuaW5mbyhcIkxpdmVTdHJlYW1pbmcgY2xvc2luZyBjb25uZWN0aW9uIFwiLmNvbmNhdChpKSksYS5kaXNjb25uZWN0KCksZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zW2ldPW51bGwpLHQubmV4dD0xO2JyZWFrO2Nhc2UgODp0LnQyPWNlLmEua2V5cyhlLmxpdmVTdHJlYW1pbmcucHVzaFN0YXRlcyk7Y2FzZSA5OmlmKCh0LnQzPXQudDIoKSkuZG9uZSl7dC5uZXh0PTM3O2JyZWFrfWlmKHI9dC50My52YWx1ZSwhbnx8XCJwdXNoXCI9PT1uKXt0Lm5leHQ9MTM7YnJlYWt9cmV0dXJuIHQuYWJydXB0KFwiY29udGludWVcIiw5KTtjYXNlIDEzOmlmKCFlLmxpdmVTdHJlYW1pbmcucHVzaFN0YXRlcy5oYXNPd25Qcm9wZXJ0eShyKSl7dC5uZXh0PTM1O2JyZWFrfWlmKHM9ZS5saXZlU3RyZWFtaW5nLnB1c2hTdGF0ZXNbcl0sXCJhdWRpZW5jZVwiIT09ZS5nYXRld2F5Q2xpZW50LnJvbGUpe3QubmV4dD0xOTticmVha31vLmRlZmF1bHQud2FybmluZyhcIkNhbm5vdCByZXN1bWUgTGl2ZVN0cmVhbWluZyBpbiBhdWRpZW5jZSBtb2RlLiBcIi5jb25jYXQocy51cmwpLHMpLHQubmV4dD0zNTticmVhaztjYXNlIDE5OmlmKCFzKXt0Lm5leHQ9MzU7YnJlYWt9cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIlJlc3VtaW5nIExpdmVTdHJlYW1pbmcgXCIuY29uY2F0KHMudXJsKSxzKSx0LnByZXY9MjEsdC5uZXh0PTI0LGUuX3N0YXJ0TGl2ZVN0cmVhbWluZyhzLnVybCxzLnRyYW5zY29kaW5nRW5hYmxlZCk7Y2FzZSAyNDpjPXQuc2VudCxvLmRlZmF1bHQuZGVidWcoXCJSZXN1bWVkIExpdmVTdHJlYW1pbmcgXCIuY29uY2F0KHMudXJsLFwiOiBcIikuY29uY2F0KGMucmVhc29uKSksdC5uZXh0PTM1O2JyZWFrO2Nhc2UgMjg6aWYodC5wcmV2PTI4LHQudDQ9dC5jYXRjaCgyMSksNDU0IT09dC50NC5jb2RlKXt0Lm5leHQ9MzQ7YnJlYWt9by5kZWZhdWx0LmRlYnVnKFwiUmVzdW1lZCBMaXZlU3RyZWFtaW5nIFwiLmNvbmNhdChzLnVybCxcIjogXCIpLmNvbmNhdCh0LnQ0LnJlYXNvbikpLHQubmV4dD0zNTticmVhaztjYXNlIDM0OnRocm93IHQudDQ7Y2FzZSAzNTp0Lm5leHQ9OTticmVhaztjYXNlIDM3OnQudDU9Y2UuYS5rZXlzKGUubGl2ZVN0cmVhbWluZy5wdWxsU3RhdGVzKTtjYXNlIDM4OmlmKCh0LnQ2PXQudDUoKSkuZG9uZSl7dC5uZXh0PTYyO2JyZWFrfWlmKGQ9dC50Ni52YWx1ZSwhbnx8XCJwdWxsXCI9PT1uKXt0Lm5leHQ9NDI7YnJlYWt9cmV0dXJuIHQuYWJydXB0KFwiY29udGludWVcIiwzOCk7Y2FzZSA0MjppZighZS5saXZlU3RyZWFtaW5nLnB1bGxTdGF0ZXMuaGFzT3duUHJvcGVydHkoZCkpe3QubmV4dD02MDticmVha31pZih1PWUubGl2ZVN0cmVhbWluZy5wdWxsU3RhdGVzW2RdLFwiYXVkaWVuY2VcIiE9PWUuZ2F0ZXdheUNsaWVudC5yb2xlKXt0Lm5leHQ9NDg7YnJlYWt9by5kZWZhdWx0Lndhcm5pbmcoXCJDYW5ub3QgcmVzdW1lIGFkZEluamVjdFN0cmVhbVVybCBpbiBhdWRpZW5jZSBtb2RlLiBcIi5jb25jYXQodS51cmwpLHUpLHQubmV4dD02MDticmVhaztjYXNlIDQ4OmlmKCF1KXt0Lm5leHQ9NjA7YnJlYWt9cmV0dXJuIG8uZGVmYXVsdC5kZWJ1ZyhcIlJlc3VtaW5nIExpdmVTdHJlYW1pbmcgcHVsbFN0cmVhbSBcIi5jb25jYXQodS51cmwpLHUpLHQucHJldj01MCx0Lm5leHQ9NTMsZS5fYWRkSW5qZWN0U3RyZWFtVXJsKHUudXJsLHUudHJhbnNjb2RpbmdDb25maWcpO2Nhc2UgNTM6bD10LnNlbnQsby5kZWZhdWx0LmRlYnVnKFwiUmVzdW1lZCBMaXZlU3RyZWFtaW5nIHB1bGxTdHJlYW0gXCIuY29uY2F0KHUudXJsLFwiOiBcIikuY29uY2F0KGwucmVhc29uKSksdC5uZXh0PTYwO2JyZWFrO2Nhc2UgNTc6dC5wcmV2PTU3LHQudDc9dC5jYXRjaCg1MCksNDUxPT09dC50Ny5jb2RlJiZvLmRlZmF1bHQuZGVidWcoXCJSZXN1bWVkIExpdmVTdHJlYW1pbmcgcHVsbFN0cmVhbSBcIi5jb25jYXQodS51cmwsXCI6IFwiKS5jb25jYXQodC50Ny5yZWFzb24pKTtjYXNlIDYwOnQubmV4dD0zODticmVhaztjYXNlIDYyOmNhc2VcImVuZFwiOnJldHVybiB0LnN0b3AoKX19LHQsdGhpcyxbWzIxLDI4XSxbNTAsNTddXSl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIHAuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5saXZlU3RyZWFtaW5nLnN0YXJ0T3B0aW9ucz17YXV0b0Rlc3Ryb3lUaW1lOjMwfSxlLmxpdmVTdHJlYW1pbmcudHJhbnNjb2RpbmdDb25maWc9e2F1ZGlvQml0cmF0ZTo0OCxhdWRpb0NoYW5uZWxzOjEsYXVkaW9TYW1wbGVSYXRlOjQ4ZTMsYmFja2dyb3VuZENvbG9yOjAsaGVpZ2h0OjM2MCxpbWFnZXM6W10sbG93TGF0ZW5jeTohMSxtZXRhZGF0YTpcIlwiLHVzZXJDb25maWdFeHRyYUluZm86XCJcIix1c2VyQ29uZmlnczpbXSx2aWRlb0JpdHJhdGU6NDAwLHZpZGVvQ29kZWNQcm9maWxlOjEwMCx2aWRlb0NvZGVjVHlwZToxLHZpZGVvRnJhbWVyYXRlOjE1LHZpZGVvR29wOjMwLHdpZHRoOjY0MH0sZS5zdGFydExpdmVTdHJlYW1pbmc9ZnVuY3Rpb24obixpKXtPYmplY3QocmUuaXNFbXB0eSkoaSl8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoaSxcInRyYW5zY29kaW5nRW5hYmxlZFwiKSxPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobixcInVybFwiLDEsMTAyNCk7dmFyIGE9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5zdGFydExpdmVTdHJlYW1pbmdcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pO2lmKGUuZ2F0ZXdheUNsaWVudCYmXCJhdWRpZW5jZVwiPT09ZS5nYXRld2F5Q2xpZW50LnJvbGUpe3ZhciByPXtjb2RlOjQwMyxyZWFzb246XCJBVURJRU5DRV9TVFJFQU1JTkdfRk9SQklEREVOXCJ9O3Rocm93IGEocikscn12YXIgbz1lLl9zdGFydExpdmVTdHJlYW1pbmcobixpKTtyZXR1cm4gby50aGVuKGZ1bmN0aW9uKGUpe2EobnVsbCxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe2EoZSl9KSxvfSxlLl9zdGFydExpdmVTdHJlYW1pbmc9KGw9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gbihpLGEpe3ZhciByLHMsYyxkO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24obil7Zm9yKDs7KXN3aXRjaChuLnByZXY9bi5uZXh0KXtjYXNlIDA6cmV0dXJuIHI9UygpKHthbGxvY2F0ZTohMCxjbGllbnRSZXF1ZXN0Ontjb21tYW5kOlwiUHVibGlzaFN0cmVhbVwifSxjb21tYW5kOlwicmVxdWVzdFwifSksby5kZWZhdWx0LmRlYnVnKFwic3RhcnRMaXZlU3RyZWFtaW5nIFwiLmNvbmNhdChpLFwiLCBcIikuY29uY2F0KGEpKSxTKCkoci5jbGllbnRSZXF1ZXN0LGUubGl2ZVN0cmVhbWluZy5zdGFydE9wdGlvbnMse3RzOkRhdGUubm93KCksdXJsOmksdmlkOnBhcnNlSW50KGUuam9pbkluZm8udmlkLDEwKX0pLHM9bnVsbCxhPyhlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMubWl4X3N0cmVhbWluZ3x8ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3QoXCJtaXhfc3RyZWFtaW5nXCIpLHIuY2xpZW50UmVxdWVzdC50cmFuc2NvZGluZ0NvbmZpZz1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGUubGl2ZVN0cmVhbWluZy50cmFuc2NvZGluZ0NvbmZpZykpLHM9ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLm1peF9zdHJlYW1pbmcpOihcInZwOFwiPT09dC5jb2RlYyYmby5kZWZhdWx0Lndhcm5pbmcoXCJWUDggaXMgbm90IHN1cHBvcnRlZCBieSByYXdfc3RyZWFtaW5nLiBTdWJzY3JpYmVyIHNpZGUgd2lsbCBzdWZmZXJcIiksXCJydGNcIj09PXQubW9kZSYmby5kZWZhdWx0Lndhcm5pbmcoXCJSVEMgbW9kZSBpcyBub3Qgc3VwcG9ydGVkIGJ5IHJhd19zdHJlYW1pbmcuIFN1YnNjcmliZXIgc2lkZSB3aWxsIHN1ZmZlclwiKSxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMucmF3X3N0cmVhbWluZ3x8ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3QoXCJyYXdfc3RyZWFtaW5nXCIpLHM9ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zLnJhd19zdHJlYW1pbmcpLGM9bnVsbCxkPXt9LG4ucHJldj03LG4ubmV4dD0xMCxzLnJlcXVlc3Qocik7Y2FzZSAxMDpjPW4uc2VudCxkLnR5cGU9XCJsaXZlU3RyZWFtaW5nU3RhcnRlZFwiLGQucmVhc29uPWMmJmMucmVhc29uLGQuc3RhdHVzPWMmJmMuY29kZSxkLnVybD1jJiZjLnNlcnZlclJlc3BvbnNlJiZjLnNlcnZlclJlc3BvbnNlLnVybCxlLmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChkKSxuLm5leHQ9MjY7YnJlYWs7Y2FzZSAxODp0aHJvdyBuLnByZXY9MTgsbi50MD1uLmNhdGNoKDcpLGQudHlwZT1cImxpdmVTdHJlYW1pbmdGYWlsZWRcIixkLnJlYXNvbj1uLnQwJiZuLnQwLnJlYXNvbixkLnN0YXR1cz1uLnQwJiZuLnQwLmNvZGUsZC51cmw9bi50MCYmbi50MC5zZXJ2ZXJSZXNwb25zZSYmbi50MC5zZXJ2ZXJSZXNwb25zZS51cmwsZS5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoZCksbi50MDtjYXNlIDI2OnJldHVybiBlLmxpdmVTdHJlYW1pbmcucHVzaFN0YXRlc1tpXT17dHJhbnNjb2RpbmdFbmFibGVkOmEsdXJsOml9LG4uYWJydXB0KFwicmV0dXJuXCIsYyk7Y2FzZSAyODpjYXNlXCJlbmRcIjpyZXR1cm4gbi5zdG9wKCl9fSxuLHRoaXMsW1s3LDE4XV0pfSkpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGwuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5zZXRMaXZlVHJhbnNjb2Rpbmc9ZnVuY3Rpb24obixpKXtvLmRlZmF1bHQuZGVidWcoXCJzZXRMaXZlVHJhbnNjb2Rpbmc6IFwiLmNvbmNhdChKU09OLnN0cmluZ2lmeShuKSkpLE9iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KShuLFwidHJhbnNjb2RpbmdcIik7dmFyIGE9bixyPWEud2lkdGgsYz1hLmhlaWdodCxkPWEudmlkZW9CaXRyYXRlLHU9YS52aWRlb0ZyYW1lcmF0ZSxsPWEubG93TGF0ZW5jeSxwPWEuYXVkaW9TYW1wbGVSYXRlLGY9YS5hdWRpb0JpdHJhdGUsbT1hLmF1ZGlvQ2hhbm5lbHMsZz1hLnZpZGVvR29wLHY9YS5pbWFnZXMsaD1hLnZpZGVvQ29kZWNQcm9maWxlLFM9YS51c2VyQ291bnQsXz1hLmJhY2tncm91bmRDb2xvcixFPWEudHJhbnNjb2RpbmdVc2VycztpZihFfHwoRT1uLnVzZXJDb25maWdzKSxPYmplY3QocmUuaXNFbXB0eSkocil8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShyLFwid2lkdGhcIiksT2JqZWN0KHJlLmlzRW1wdHkpKGMpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYyxcImhlaWdodFwiKSxPYmplY3QocmUuaXNFbXB0eSkoZCl8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShkLFwidmlkZW9CaXRyYXRlXCIsMSwxZTYpLE9iamVjdChyZS5pc0VtcHR5KSh1KXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKHUsXCJ2aWRlb0ZyYW1lcmF0ZVwiKSxPYmplY3QocmUuaXNFbXB0eSkobCl8fE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikobCxcImxvd0xhdGVuY3lcIiksT2JqZWN0KHJlLmlzRW1wdHkpKHApfHxPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKHAsXCJhdWRpb1NhbXBsZVJhdGVcIixbMzJlMyw0NDEwMCw0OGUzXSksT2JqZWN0KHJlLmlzRW1wdHkpKGYpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZixcImF1ZGlvQml0cmF0ZVwiLDEsMTI4KSxPYmplY3QocmUuaXNFbXB0eSkobSl8fE9iamVjdChyZS5jaGVja1ZhbGlkRW51bSkobSxcImF1ZGlvQ2hhbm5lbHNcIixbMSwyLDMsNCw1XSksT2JqZWN0KHJlLmlzRW1wdHkpKGcpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZyxcInZpZGVvR29wXCIpLE9iamVjdChyZS5pc0VtcHR5KShoKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKShoLFwidmlkZW9Db2RlY1Byb2ZpbGVcIixbNjYsNzcsMTAwXSksT2JqZWN0KHJlLmlzRW1wdHkpKFMpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoUyxcInVzZXJDb3VudFwiLDAsMTcpLE9iamVjdChyZS5pc0VtcHR5KShfKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKF8sXCJiYWNrZ3JvdW5kQ29sb3JcIiwwLDE2Nzc3MjE1KSwhT2JqZWN0KHJlLmlzRW1wdHkpKEUpKXtpZighT2JqZWN0KHJlLmlzQXJyYXkpKEUpKXRocm93IG5ldyBFcnJvcihcIlt0cmFuc2NvZGluZ1VzZXJzXTogdHJhbnNjb2RpbmdVc2VycyBzaG91bGQgYmUgQXJyYXlcIik7aWYoRS5sZW5ndGg+MTcpdGhyb3cgbmV3IEVycm9yKFwiVGhlIGxlbmd0aCBvZiB0cmFuc2NvZGluZ1VzZXJzIGNhbm5vdCBncmVhdGVyIHRoYW4gMTdcIik7RS5tYXAoZnVuY3Rpb24oZSx0KXtpZighT2JqZWN0KHJlLmlzRW1wdHkpKGUudWlkKSYmIUp0KGUudWlkKSYmIU9iamVjdChyZS5pc1ZhbGlkU3RyaW5nKShlLnVpZCwxLDI1NSkpdGhyb3cgbmV3IEVycm9yKFwiW1N0cmluZyB1aWRdIExlbmd0aCBvZiB0aGUgc3RyaW5nOiBbMSwyNTVdLiBBU0NJSSBjaGFyYWN0ZXJzIG9ubHkuIFtOdW1iZXIgdWlkXSBUaGUgdmFsdWUgcmFuZ2UgaXMgWzAsMTAwMDBdXCIpO2lmKE9iamVjdChyZS5pc0VtcHR5KShlLngpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS54LFwidHJhbnNjb2RpbmdVc2VyW1wiLmNvbmNhdCh0LFwiXS54XCIpLDAsMWU0KSxPYmplY3QocmUuaXNFbXB0eSkoZS55KXx8T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUueSxcInRyYW5zY29kaW5nVXNlcltcIi5jb25jYXQodCxcIl0ueVwiKSwwLDFlNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUud2lkdGgpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS53aWR0aCxcInRyYW5zY29kaW5nVXNlcltcIi5jb25jYXQodCxcIl0ud2lkdGhcIiksMCwxZTQpLE9iamVjdChyZS5pc0VtcHR5KShlLmhlaWdodCl8fE9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShlLmhlaWdodCxcInRyYW5zY29kaW5nVXNlcltcIi5jb25jYXQodCxcIl0uaGVpZ2h0XCIpLDAsMWU0KSxPYmplY3QocmUuaXNFbXB0eSkoZS56T3JkZXIpfHxPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS56T3JkZXIsXCJ0cmFuc2NvZGluZ1VzZXJbXCIuY29uY2F0KHQsXCJdLnpPcmRlclwiKSwwLDEwMCksIShPYmplY3QocmUuaXNFbXB0eSkoZS5hbHBoYSl8fE9iamVjdChyZS5pc051bWJlcikoZS5hbHBoYSkmJmUuYWxwaGE8PTEmJmUuYWxwaGE+PTApKXRocm93IG5ldyBFcnJvcihcInRyYW5zY29kaW5nVXNlclske2luZGV4fV0uYWxwaGE6IFRoZSB2YWx1ZSByYW5nZSBpcyBbMCwgMV1cIil9KX1pZighT2JqZWN0KHJlLmlzRW1wdHkpKHYpKXtpZighT2JqZWN0KHJlLmlzQXJyYXkpKHYpKXRocm93IG5ldyBFcnJvcihcIltpbWFnZXNdOiBpbWFnZXMgc2hvdWxkIGJlIEFycmF5XCIpO3YubWFwKGZ1bmN0aW9uKGUsdCl7aWYoT2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGUudXJsLFwiaW1hZ2VzW1wiLmNvbmNhdCh0LFwiXS51cmxcIiksMSwxMDI0KSxPYmplY3QocmUuaXNFbXB0eSkoZS54KT9lLng9MDpPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS54LFwiaW1hZ2VzW1wiLmNvbmNhdCh0LFwiXS54XCIpLDAsMWU0KSxPYmplY3QocmUuaXNFbXB0eSkoZS55KT9lLnk9MDpPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS55LFwiaW1hZ2VzW1wiLmNvbmNhdCh0LFwiXS55XCIpLDAsMWU0KSxPYmplY3QocmUuaXNFbXB0eSkoZS53aWR0aCk/ZS53aWR0aD0xNjA6T2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGUud2lkdGgsXCJpbWFnZXNbXCIuY29uY2F0KHQsXCJdLndpZHRoXCIpLDAsMWU0KSxPYmplY3QocmUuaXNFbXB0eSkoZS5oZWlnaHQpP2UuaGVpZ2h0PTE2MDpPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoZS5oZWlnaHQsXCJpbWFnZXNbXCIuY29uY2F0KHQsXCJdLmhlaWdodFwiKSwwLDFlNCksT2JqZWN0KHJlLmlzRW1wdHkpKGUuek9yZGVyKT9lLnpPcmRlcj0wOk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShlLnpPcmRlcixcImltYWdlc1tcIi5jb25jYXQodCxcIl0uek9yZGVyXCIpLDAsMTAwKSxPYmplY3QocmUuaXNFbXB0eSkoZS5hbHBoYSkpZS5hbHBoYT0xO2Vsc2UgaWYoIShPYmplY3QocmUuaXNOdW1iZXIpKGUuYWxwaGEpJiZlLmFscGhhPD0xJiZlLmFscGhhPj0wKSl0aHJvdyBuZXcgRXJyb3IoXCJpbWFnZVske2luZGV4fV0uYWxwaGE6IFRoZSB2YWx1ZSByYW5nZSBpcyBbMCwgMV1cIil9KX12YXIgST1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LnNldExpdmVUcmFuc2NvZGluZ1wiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7aWYoKG49SlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShuKSkpLnRyYW5zY29kaW5nVXNlcnMmJihuLnVzZXJDb25maWdzPW4udHJhbnNjb2RpbmdVc2VycyxkZWxldGUgbi50cmFuc2NvZGluZ1VzZXJzKSxlLmpvaW5JbmZvLnN0cmluZ1VpZCYmbi51c2VyQ29uZmlncyYmbi51c2VyQ29uZmlncy5sZW5ndGgpe3ZhciB5PVtdO24udXNlckNvbmZpZ3MuZm9yRWFjaChmdW5jdGlvbih0KXt5LnB1c2goZ3QoZS5qb2luSW5mbyxlLmdhdGV3YXlDbGllbnQsdC51aWQpLnRoZW4oZnVuY3Rpb24oZSl7dC51aWQ9ZS51aWR9KSl9KTt2YXIgVD1Qcm9taXNlLmFsbCh5KS50aGVuKGZ1bmN0aW9uKCl7cmV0dXJuIGUuX3NldExpdmVUcmFuc2NvZGluZyhuLGkpfSk7cmV0dXJuIFQudGhlbihmdW5jdGlvbihlKXtJKG51bGwsZSl9KS5jYXRjaChmdW5jdGlvbihlKXtJKGUpfSksVH12YXIgYj1lLl9zZXRMaXZlVHJhbnNjb2RpbmcobixpKTtyZXR1cm4gYi50aGVuKGZ1bmN0aW9uKGUpe0kobnVsbCxlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe0koZSl9KSxifSxlLl9zZXRMaXZlVHJhbnNjb2Rpbmc9KHU9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gdChuLGkpe3ZhciBhLHIsbztyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKHQpe2Zvcig7Oylzd2l0Y2godC5wcmV2PXQubmV4dCl7Y2FzZSAwOmlmKGUubGl2ZVN0cmVhbWluZy50cmFuc2NvZGluZ0NvbmZpZz1TKCkoZS5saXZlU3RyZWFtaW5nLnRyYW5zY29kaW5nQ29uZmlnLG4pLFwiYm9vbGVhblwiIT10eXBlb2YgaSYmKGk9ISFlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMubWl4X3N0cmVhbWluZyksYT1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHthbGxvY2F0ZTohMSxjbGllbnRSZXF1ZXN0Ontjb21tYW5kOlwiVXBkYXRlVHJhbnNjb2RpbmdcIix0cmFuc2NvZGluZ0NvbmZpZzplLmxpdmVTdHJlYW1pbmcudHJhbnNjb2RpbmdDb25maWd9LGNvbW1hbmQ6XCJyZXF1ZXN0XCJ9KSkscj17fSwhaSl7dC5uZXh0PTE2O2JyZWFrfXJldHVybiBlLmxpdmVTdHJlYW1pbmcuY29ubmVjdGlvbnMubWl4X3N0cmVhbWluZ3x8ZS5saXZlU3RyZWFtaW5nLmNvbm5lY3QoXCJtaXhfc3RyZWFtaW5nXCIpLHQubmV4dD04LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucy5taXhfc3RyZWFtaW5nLnJlcXVlc3QoYSk7Y2FzZSA4OnJldHVybiBvPXQuc2VudCxyLnR5cGU9XCJsaXZlVHJhbnNjb2RpbmdVcGRhdGVkXCIsci5yZWFzb249by5yZWFzb24sci5zdGF0dXM9by5jb2RlLGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHIpLHQuYWJydXB0KFwicmV0dXJuXCIsbyk7Y2FzZSAxNjpyZXR1cm4gdC5hYnJ1cHQoXCJyZXR1cm5cIix7Y29kZToyMDAscmVhc29uOlwic3VjY2Vzc1wifSk7Y2FzZSAxNzpjYXNlXCJlbmRcIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMpfSkpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHUuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5zdG9wTGl2ZVN0cmVhbWluZz1mdW5jdGlvbihuLGkpe09iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShuLFwidXJsXCIsMSwxMDI0KTt2YXIgYT1zLmIucmVwb3J0QXBpSW52b2tlKHQuc2Vzc2lvbklkLHtuYW1lOlwiQ2xpZW50LnN0b3BMaXZlU3RyZWFtaW5nXCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KSxyPWUuX3N0b3BMaXZlU3RyZWFtaW5nKG4saSk7cmV0dXJuIHIudGhlbihmdW5jdGlvbihlKXthKG51bGwsZSl9KS5jYXRjaChmdW5jdGlvbihlKXthKGUpfSkscn0sZS5fc3RvcExpdmVTdHJlYW1pbmc9KGQ9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gdChuLGksYSl7dmFyIHIsbyxzLGMsZCx1O3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24odCl7Zm9yKDs7KXN3aXRjaCh0LnByZXY9dC5uZXh0KXtjYXNlIDA6cmV0dXJuIHI9bnVsbCxvPWUubGl2ZVN0cmVhbWluZy5wdXNoU3RhdGVzW25dLHI9bz9vLnRyYW5zY29kaW5nRW5hYmxlZD9cIm1peF9zdHJlYW1pbmdcIjpcInJhd19zdHJlYW1pbmdcIjppP1wibWl4X3N0cmVhbWluZ1wiOlwicmF3X3N0cmVhbWluZ1wiLHM9e2FsbG9jYXRlOiExLGNsaWVudFJlcXVlc3Q6e2NvbW1hbmQ6XCJVbnB1Ymxpc2hTdHJlYW1cIix1cmw6bn0sY29tbWFuZDpcInJlcXVlc3RcIn0sZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zW3JdfHxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdChyKSxjPW51bGwsdC5wcmV2PTYsdC5uZXh0PTksZS5saXZlU3RyZWFtaW5nLmNvbm5lY3Rpb25zW3JdLnJlcXVlc3Qocyk7Y2FzZSA5OmM9dC5zZW50LChkPXt9KS50eXBlPVwibGl2ZVN0cmVhbWluZ1N0b3BwZWRcIixkLnJlYXNvbj1jJiZjLnJlYXNvbixkLnN0YXR1cz1jJiZjLmNvZGUsZC51cmw9YyYmYy5zZXJ2ZXJSZXNwb25zZSYmYy5zZXJ2ZXJSZXNwb25zZS51cmwsZS5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoZCksdC5uZXh0PTI3O2JyZWFrO2Nhc2UgMTg6dGhyb3cgdC5wcmV2PTE4LHQudDA9dC5jYXRjaCg2KSwodT17fSkudHlwZT1cImxpdmVTdHJlYW1pbmdTdG9wcGVkXCIsdS5yZWFzb249dC50MCYmdC50MC5yZWFzb24sdS5zdGF0dXM9dC50MCYmdC50MC5jb2RlLHUudXJsPXQudDAmJnQudDAuc2VydmVyUmVzcG9uc2UmJnQudDAuc2VydmVyUmVzcG9uc2UudXJsLGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHUpLHQudDA7Y2FzZSAyNzpyZXR1cm4gYXx8ZGVsZXRlIGUubGl2ZVN0cmVhbWluZy5wdXNoU3RhdGVzW25dLHQuYWJydXB0KFwicmV0dXJuXCIsYyk7Y2FzZSAyOTpjYXNlXCJlbmRcIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMsW1s2LDE4XV0pfSkpLGZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZC5hcHBseSh0aGlzLGFyZ3VtZW50cyl9KSxlLmxpdmVTdHJlYW1pbmcuaW5qZWN0U3RyZWFtVHJhbnNjb2RpbmdDb25maWc9e2F1dG9EZXN0cm95VGltZTozMCxhdWRpb0JpdHJhdGU6NDgsYXVkaW9DaGFubmVsczoxLGF1ZGlvU2FtcGxlUmF0ZTo0NDEwMCxoZWlnaHQ6MCx2aWRlb0JpdHJhdGU6NDAwLHZpZGVvRnJhbWVyYXRlOjE1LHZpZGVvR29wOjMwLHdpZHRoOjB9LGUuYWRkSW5qZWN0U3RyZWFtVXJsPWZ1bmN0aW9uKGksYSl7T2JqZWN0KHJlLmNoZWNrVmFsaWRTdHJpbmcpKGksXCJ1cmxcIiwxLDEwMjQpLE9iamVjdChyZS5jaGVja1ZhbGlkT2JqZWN0KShhLFwiY29uZmlnXCIpLCFPYmplY3QocmUuaXNFbXB0eSkoYSYmYS53aWR0aCkmJk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShhLndpZHRoLFwiY29uZmlnLndpZHRoXCIsMCwxZTQpLCFPYmplY3QocmUuaXNFbXB0eSkoYSYmYS5oZWlnaHQpJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYS5oZWlnaHQsXCJjb25maWcuaGVpZ2h0XCIsMCwxZTQpLCFPYmplY3QocmUuaXNFbXB0eSkoYSYmYS52aWRlb0dvcCkmJk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShhLnZpZGVvR29wLFwiY29uZmlnLnZpZGVvR29wXCIsMSwxZTQpLCFPYmplY3QocmUuaXNFbXB0eSkoYSYmYS52aWRlb0ZyYW1lcmF0ZSkmJk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShhLnZpZGVvRnJhbWVyYXRlLFwiY29uZmlnLnZpZGVvRnJhbWVyYXRlXCIsMSwxZTQpLCFPYmplY3QocmUuaXNFbXB0eSkoYSYmYS52aWRlb0JpdHJhdGUpJiZPYmplY3QocmUuY2hlY2tWYWxpZE51bWJlcikoYS52aWRlb0JpdHJhdGUsXCJjb25maWcudmlkZW9CaXRyYXRlXCIsMSwxZTQpLCFPYmplY3QocmUuaXNFbXB0eSkoYSYmYS5hdWRpb1NhbXBsZVJhdGUpJiZPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKGEuYXVkaW9TYW1wbGVSYXRlLFwiY29uZmlnLmF1ZGlvU2FtcGxlUmF0ZVwiLFszMmUzLDQ0MTAwLDQ4ZTNdKSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEuYXVkaW9CaXRyYXRlKSYmT2JqZWN0KHJlLmNoZWNrVmFsaWROdW1iZXIpKGEuYXVkaW9CaXRyYXRlLFwiY29uZmlnLmF1ZGlvQml0cmF0ZVwiLDEsMWU0KSwhT2JqZWN0KHJlLmlzRW1wdHkpKGEmJmEuYXVkaW9DaGFubmVscykmJk9iamVjdChyZS5jaGVja1ZhbGlkTnVtYmVyKShhLmF1ZGlvQ2hhbm5lbHMsXCJjb25maWcuYXVkaW9DaGFubmVsc1wiLDEsMik7dmFyIHI9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5hZGRJbmplY3RTdHJlYW1VcmxcIixvcHRpb25zOm4sdGFnOlwidHJhY2VyXCJ9KTtpZihcImF1ZGllbmNlXCI9PT1lLmdhdGV3YXlDbGllbnQucm9sZSl7dmFyIG89e2NvZGU6NDAzLHJlYXNvbjpcIkFVRElFTkNFX0lOSkVDVElOR19GT1JCSURERU5cIn07dGhyb3cgcihvKSxvfXZhciBjPWUuX2FkZEluamVjdFN0cmVhbVVybChpLGEpO3JldHVybiBjLnRoZW4oZnVuY3Rpb24oZSl7cihudWxsLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7cihlKX0pLGN9LGUuX2FkZEluamVjdFN0cmVhbVVybD0ocj11ZSgpKGNlLmEubWFyayhmdW5jdGlvbiBuKGksYSl7dmFyIHIsbyxzLGMsZDtyZXR1cm4gY2UuYS53cmFwKGZ1bmN0aW9uKG4pe2Zvcig7Oylzd2l0Y2gobi5wcmV2PW4ubmV4dCl7Y2FzZSAwOnJldHVybiByPVMoKSh7fSxlLmxpdmVTdHJlYW1pbmcuaW5qZWN0U3RyZWFtVHJhbnNjb2RpbmdDb25maWcsYSksbz17YWxsb2NhdGU6ITAsY2xpZW50UmVxdWVzdDp7Y25hbWU6ZS5jaGFubmVsLGNvbW1hbmQ6XCJJbmplY3RTdHJlYW1cIixzaWQ6dC5zZXNzaW9uSWQsdHJhbnNjb2RpbmdDb25maWc6cix0czpEYXRlLm5vdygpLHVybDppLHZpZDpwYXJzZUludChlLmpvaW5JbmZvLnZpZCwxMCl9LGNvbW1hbmQ6XCJyZXF1ZXN0XCJ9LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucy5pbmplY3Rfc3RyZWFtaW5nfHxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdChcImluamVjdF9zdHJlYW1pbmdcIikscz1udWxsLG4ucHJldj00LG4ubmV4dD03LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucy5pbmplY3Rfc3RyZWFtaW5nLnJlcXVlc3Qobyk7Y2FzZSA3OnM9bi5zZW50LGM9e3JlYXNvbjpzJiZzLnJlYXNvbixzdGF0dXM6S3QocyYmcy5jb2RlKSx0eXBlOlwic3RyZWFtSW5qZWN0ZWRTdGF0dXNcIix1aWQ6cyYmcy5zZXJ2ZXJSZXNwb25zZSYmcy5zZXJ2ZXJSZXNwb25zZS5pbmplY3RfdWlkLHVybDpzJiZzLnNlcnZlclJlc3BvbnNlJiZzLnNlcnZlclJlc3BvbnNlLnVybH0sZS5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoYyksbi5uZXh0PTE3O2JyZWFrO2Nhc2UgMTI6dGhyb3cgbi5wcmV2PTEyLG4udDA9bi5jYXRjaCg0KSxkPXtyZWFzb246bi50MCYmbi50MC5yZWFzb24sc3RhdHVzOkt0KG4udDAmJm4udDAuY29kZSksdHlwZTpcInN0cmVhbUluamVjdGVkU3RhdHVzXCIsdWlkOm4udDAmJm4udDAuc2VydmVyUmVzcG9uc2UmJm4udDAuc2VydmVyUmVzcG9uc2UuaW5qZWN0X3VpZCx1cmw6bi50MCYmbi50MC5zZXJ2ZXJSZXNwb25zZSYmbi50MC5zZXJ2ZXJSZXNwb25zZS51cmx9LGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGQpLG4udDA7Y2FzZSAxNzpyZXR1cm4gZS5saXZlU3RyZWFtaW5nLnB1bGxTdGF0ZXNbaV09e3RyYW5zY29kaW5nQ29uZmlnOnIsdXJsOml9LG4uYWJydXB0KFwicmV0dXJuXCIscyk7Y2FzZSAxOTpjYXNlXCJlbmRcIjpyZXR1cm4gbi5zdG9wKCl9fSxuLHRoaXMsW1s0LDEyXV0pfSkpLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHIuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5yZW1vdmVJbmplY3RTdHJlYW1Vcmw9KGE9dWUoKShjZS5hLm1hcmsoZnVuY3Rpb24gbihpKXt2YXIgYSxyLG89YXJndW1lbnRzO3JldHVybiBjZS5hLndyYXAoZnVuY3Rpb24obil7Zm9yKDs7KXN3aXRjaChuLnByZXY9bi5uZXh0KXtjYXNlIDA6cmV0dXJuIE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShpLFwidXJsXCIsMSwyNTUpLGE9cy5iLnJlcG9ydEFwaUludm9rZSh0LnNlc3Npb25JZCx7bmFtZTpcIkNsaWVudC5yZW1vdmVJbmplY3RTdHJlYW1VcmxcIixvcHRpb25zOm8sdGFnOlwidHJhY2VyXCJ9KSwocj1lLl9yZW1vdmVJbmplY3RTdHJlYW1VcmwoaSkpLnRoZW4oZnVuY3Rpb24oZSl7YShudWxsLGUpfSkuY2F0Y2goZnVuY3Rpb24oZSl7YShlKX0pLG4uYWJydXB0KFwicmV0dXJuXCIscik7Y2FzZSA1OmNhc2VcImVuZFwiOnJldHVybiBuLnN0b3AoKX19LG4sdGhpcyl9KSksZnVuY3Rpb24oZSl7cmV0dXJuIGEuYXBwbHkodGhpcyxhcmd1bWVudHMpfSksZS5fcmVtb3ZlSW5qZWN0U3RyZWFtVXJsPShpPXVlKCkoY2UuYS5tYXJrKGZ1bmN0aW9uIHQobil7dmFyIGksYSxyLG87cmV0dXJuIGNlLmEud3JhcChmdW5jdGlvbih0KXtmb3IoOzspc3dpdGNoKHQucHJldj10Lm5leHQpe2Nhc2UgMDpyZXR1cm4gaT17YWxsb2NhdGU6ITEsY2xpZW50UmVxdWVzdDp7Y29tbWFuZDpcIlVuaW5qZWN0U3RyZWFtXCIsdXJsOm59LGNvbW1hbmQ6XCJyZXF1ZXN0XCJ9LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucy5pbmplY3Rfc3RyZWFtaW5nfHxlLmxpdmVTdHJlYW1pbmcuY29ubmVjdChcImluamVjdF9zdHJlYW1pbmdcIiksYT1udWxsLHQucHJldj0zLHQubmV4dD02LGUubGl2ZVN0cmVhbWluZy5jb25uZWN0aW9ucy5pbmplY3Rfc3RyZWFtaW5nLnJlcXVlc3QoaSk7Y2FzZSA2OmE9dC5zZW50LHI9e3JlYXNvbjphJiZhLnJlYXNvbixzdGF0dXM6enQoYSYmYS5jb2RlKSx0eXBlOlwic3RyZWFtSW5qZWN0ZWRTdGF0dXNcIix1aWQ6YSYmYS5zZXJ2ZXJSZXNwb25zZSYmYS5zZXJ2ZXJSZXNwb25zZS5pbmplY3RfdWlkLHVybDphJiZhLnNlcnZlclJlc3BvbnNlJiZhLnNlcnZlclJlc3BvbnNlLnVybH0sZS5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQociksdC5uZXh0PTE2O2JyZWFrO2Nhc2UgMTE6dGhyb3cgdC5wcmV2PTExLHQudDA9dC5jYXRjaCgzKSxvPXtyZWFzb246dC50MCYmdC50MC5yZWFzb24sc3RhdHVzOnp0KHQudDAmJnQudDAuY29kZSksdHlwZTpcInN0cmVhbUluamVjdGVkU3RhdHVzXCIsdWlkOnQudDAmJnQudDAuc2VydmVyUmVzcG9uc2UmJnQudDAuc2VydmVyUmVzcG9uc2UuaW5qZWN0X3VpZCx1cmw6dC50MCYmdC50MC5zZXJ2ZXJSZXNwb25zZSYmdC50MC5zZXJ2ZXJSZXNwb25zZS51cmx9LGUuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KG8pLHQudDA7Y2FzZSAxNjpyZXR1cm4gZGVsZXRlIGUubGl2ZVN0cmVhbWluZy5wdWxsU3RhdGVzW25dLHQuYWJydXB0KFwicmV0dXJuXCIsYSk7Y2FzZSAxODpjYXNlXCJlbmRcIjpyZXR1cm4gdC5zdG9wKCl9fSx0LHRoaXMsW1szLDExXV0pfSkpLGZ1bmN0aW9uKGUpe3JldHVybiBpLmFwcGx5KHRoaXMsYXJndW1lbnRzKX0pO3ZhciBpO3ZhciBhO3ZhciByO3ZhciBkO3ZhciB1O3ZhciBsO3ZhciBwO3ZhciBmO3ZhciBtfSh0LGUpLE9iamVjdChyZS5pc0VtcHR5KShlLnR1cm5TZXJ2ZXIpfHx0LnNldFR1cm5TZXJ2ZXIoZS50dXJuU2VydmVyKSxPYmplY3QocmUuaXNFbXB0eSkoZS5wcm94eVNlcnZlcil8fHQuc2V0UHJveHlTZXJ2ZXIoZS5wcm94eVNlcnZlciksXCJsaXZlXCI9PT10Lm1vZGUmJih0LmdhdGV3YXlDbGllbnQucm9sZT1cImF1ZGllbmNlXCIpLFwicnRjXCI9PT10Lm1vZGUmJih0LmdhdGV3YXlDbGllbnQucm9sZT1cImhvc3RcIiksdC5nYXRld2F5Q2xpZW50Lm9uKFwib25NdWx0aUlQXCIsZnVuY3Rpb24oZSl7dC5nYXRld2F5Q2xpZW50LmNsb3NlR2F0ZXdheSgpLHQuZ2F0ZXdheUNsaWVudC5zb2NrZXQ9dm9pZCAwLHQuZ2F0ZXdheUNsaWVudC5oYXNDaGFuZ2VCR1BBZGRyZXNzPSEwLHQuam9pbkluZm8ubXVsdGlJUD1lLm9wdGlvbix0LmdhdGV3YXlDbGllbnQuc3RhdGU9UnQuQ09OTkVDVElORzt2YXIgbj1mdW5jdGlvbihlKXtvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gSm9pbmluZyBjaGFubmVsOiBcIikuY29uY2F0KHQuY2hhbm5lbCkpLHQuam9pbkluZm8uY2lkPWUuY2lkLHQuam9pbkluZm8udWlkfHwodC5qb2luSW5mby51aWQ9ZS51aWQpLHQuam9pbkluZm8udW5pX2xic19pcD1lLnVuaV9sYnNfaXAsdC5qb2luSW5mby5nYXRld2F5QWRkcj1lLmdhdGV3YXlfYWRkcix0Lm9uU3VjY2Vzcz90LmdhdGV3YXlDbGllbnQuam9pbih0LmpvaW5JbmZvLHQua2V5LGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5pbmZvKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBKb2luIGNoYW5uZWwgXCIpLmNvbmNhdCh0LmNoYW5uZWwsXCIgc3VjY2Vzc1wiKSk7dmFyIG49dC5vblN1Y2Nlc3M7dC5vblN1Y2Nlc3M9bnVsbCx0Lm9uRmFpbHVyZT1udWxsLG4oZSl9LHQub25GYWlsdXJlKToodC5nYXRld2F5Q2xpZW50LmpvaW5JbmZvPVMoKSh7fSx0LmpvaW5JbmZvKSx0LmdhdGV3YXlDbGllbnQucmVqb2luKCkpfTt0LmpvaW5JbmZvLnN0cmluZ1VpZCYmIXQuam9pbkluZm8udWlkPyh0LnVzZXJBY2NvdW50UmVxJiYhdC51c2VyQWNjb3VudFJlcS5pc0ZpbmlzaGVkKCkmJnQudXNlckFjY291bnRSZXEuY2FuY2VsKCksdC51c2VyQWNjb3VudFJlcT1ndChqb2luSW5mbyx0LmdhdGV3YXlDbGllbnQpLHQudXNlckFjY291bnRSZXEudGhlbihmdW5jdGlvbihlKXtvLmRlZmF1bHQuZXJyb3IoXCJnZXRVc2VyQWNjb3VudCBTdWNjZXNzIFwiLmNvbmNhdChlLnVybCxcIiBcIikuY29uY2F0KGpvaW5JbmZvLnN0cmluZ1VpZCxcIiA9PiBcIikuY29uY2F0KGUudWlkKSksdC5qb2luSW5mby51aWQ9ZS51aWQsZnQodC5qb2luSW5mbyxuLHQub25GYWlsdXJlKX0pLmNhdGNoKGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5lcnJvcihcImdldFVzZXJBY2NvdW50IHJlamVjdGVkXCIsZSksdC5vbkZhaWx1cmUoZSl9KSk6ZnQodC5qb2luSW5mbyxuLHQub25GYWlsdXJlKX0pLHQuZ2F0ZXdheUNsaWVudC5vbihcInJlam9pbi1zdGFydFwiLGZ1bmN0aW9uKCl7dC5fcmVuZXdTZXNzaW9uKCkscy5iLnNlc3Npb25Jbml0KGUuc2Vzc2lvbklkLHtsdHM6KG5ldyBEYXRlKS5nZXRUaW1lKCksZXh0ZW5kOntyZWpvaW46ITB9LGNuYW1lOnQuY2hhbm5lbCxhcHBpZDplLmFwcElkLG1vZGU6ZS5tb2RlLHN1Y2M6ITB9KX0pLHQuZ2F0ZXdheUNsaWVudC5vbihcInJlY292ZXJcIixmdW5jdGlvbigpe3QuX3JlbmV3U2Vzc2lvbigpLGNvbnNvbGUubG9nKFwicmVjb3ZlclwiLGUuc2Vzc2lvbklkKSxzLmIuc2Vzc2lvbkluaXQoZS5zZXNzaW9uSWQse2x0czoobmV3IERhdGUpLmdldFRpbWUoKSxleHRlbmQ6e3JlY292ZXI6ITB9LGNuYW1lOnQuY2hhbm5lbCxhcHBpZDplLmFwcElkLG1vZGU6ZS5tb2RlLHN1Y2M6ITB9KX0pLHQuZ2F0ZXdheUNsaWVudC5vbihcInJlam9pblwiLGZ1bmN0aW9uKCl7dmFyIGU9dC5oaWdoU3RyZWFtU3RhdGU7aWYoby5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBDbGllbnQgbG9jYWwgc3RyZWFtIHByZVN0YXRlOiBcIikuY29uY2F0KGUpKSx0Lm9uU3VjY2Vzcyl7dmFyIG49dC5vblN1Y2Nlc3M7dC5vblN1Y2Nlc3M9bnVsbCx0Lm9uRmFpbHVyZT1udWxsLG4oKX0hdC5oaWdoU3RyZWFtfHwwIT09ZSYmMSE9PWV8fChvLmRlZmF1bHQuaW5mbyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gcHVibGlzaCBhZnRlciByZWpvaW5cIikpLHQuaGlnaFN0cmVhbVN0YXRlPTIsdC5sb3dTdHJlYW1TdGF0ZT0yLHQucHVibGlzaCh0LmhpZ2hTdHJlYW0sZnVuY3Rpb24oZSl7ZSYmby5kZWZhdWx0LmluZm8oXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFwiKSxlKX0pKX0pLHQuZ2F0ZXdheUNsaWVudC5vbihcInN0cmVhbVB1Ymxpc2hlZFwiLGZ1bmN0aW9uKGUpe3QuaGFzUHVibGlzaGVkfHwodC5oYXNQdWJsaXNoZWQ9ITAsdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQodSh7dHlwZTpcInN0cmVhbS1wdWJsaXNoZWRcIixzdHJlYW06ZS5zdHJlYW19KSkpfSksdC5nYXRld2F5Q2xpZW50Lm9uKFwicHViUDJQTG9zdFwiLGZ1bmN0aW9uKGUpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gU3RhcnQgcmVjb25uZWN0IGxvY2FsIHBlZXJDb25uZWN0aW9uOiBcIikuY29uY2F0KHQuaGlnaFN0cmVhbS5nZXRJZCgpKSksdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdHJlYW0tcmVjb25uZWN0LXN0YXJ0XCIsdWlkOnQuaGlnaFN0cmVhbS5nZXRJZCgpfSksMT09PXQuaGlnaFN0cmVhbVN0YXRlJiYodC5oaWdoU3RyZWFtU3RhdGU9MCx0Lmxvd1N0cmVhbVN0YXRlPTApLHQuX3VucHVibGlzaCh0LmhpZ2hTdHJlYW0sZnVuY3Rpb24oKXt0Ll9wdWJsaXNoKHQuaGlnaFN0cmVhbSxmdW5jdGlvbigpe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gUmVjb25uZWN0IGxvY2FsIHBlZXJDb25uZWN0aW9uIHN1Y2Nlc3M6IFwiKS5jb25jYXQodC5oaWdoU3RyZWFtLmdldElkKCkpKSx0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbS1yZWNvbm5lY3QtZW5kXCIsdWlkOnQuaGlnaFN0cmVhbS5nZXRJZCgpLHN1Y2Nlc3M6ITAscmVhc29uOlwiXCJ9KX0sZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBSZWNvbm5lY3QgbG9jYWwgcGVlckNvbm5lY3Rpb24gZmFpbGVkOiBcIikuY29uY2F0KGUpKSx0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbS1yZWNvbm5lY3QtZW5kXCIsdWlkOnQuaGlnaFN0cmVhbS5nZXRJZCgpLHN1Y2Nlc3M6ITEscmVhc29uOmV9KX0sITApfSxmdW5jdGlvbihlKXtvLmRlZmF1bHQuZGVidWcoXCJbXCIuY29uY2F0KHQuY2xpZW50SWQsXCJdIFJlY29ubmVjdCBsb2NhbCBwZWVyQ29ubmVjdGlvbiBmYWlsZWQ6IFwiKS5jb25jYXQoZSkpLHQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwic3RyZWFtLXJlY29ubmVjdC1lbmRcIix1aWQ6dC5oaWdoU3RyZWFtLmdldElkKCksc3VjY2VzczohMSxyZWFzb246ZX0pfSwhMCl9KSx0LmdhdGV3YXlDbGllbnQub24oXCJzdWJQMlBMb3N0XCIsZnVuY3Rpb24oZSl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBTdGFydCByZWNvbm5lY3QgcmVtb3RlIHBlZXJDb25uZWN0aW9uOiBcIikuY29uY2F0KGUuc3RyZWFtLmdldElkKCksXCIgXCIpLmNvbmNhdChlLnN0cmVhbS5zdWJzY3JpYmVPcHRpb25zKSksdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoe3R5cGU6XCJzdHJlYW0tcmVjb25uZWN0LXN0YXJ0XCIsdWlkOmUuc3RyZWFtLmdldElkKCl9KTt2YXIgbj1lLnN0cmVhbS5zdWJzY3JpYmVPcHRpb25zO2NvbnNvbGUubG9nKFwiUmUtc3Vic2NyaWJlIHN0cmVhbVwiLG4sZS5zdHJlYW0pLHQuZ2F0ZXdheUNsaWVudC51bnN1YnNjcmliZShlLnN0cmVhbSxmdW5jdGlvbigpe2Uuc3RyZWFtLnN1YnNjcmliZU9wdGlvbnM9bix0LmdhdGV3YXlDbGllbnQuc3Vic2NyaWJlKGUuc3RyZWFtLGZ1bmN0aW9uKCl7by5kZWZhdWx0LmRlYnVnKFwiW1wiLmNvbmNhdCh0LmNsaWVudElkLFwiXSBSZWNvbm5lY3QgcmVtb3RlIHBlZXJDb25uZWN0aW9uIHN1Y2Nlc3M6IFwiKS5jb25jYXQoZS5zdHJlYW0uZ2V0SWQoKSkpLHQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KHt0eXBlOlwic3RyZWFtLXJlY29ubmVjdC1lbmRcIix1aWQ6ZS5zdHJlYW0uZ2V0SWQoKSxzdWNjZXNzOiExLHJlYXNvbjpcIlwifSl9LGZ1bmN0aW9uKG4pe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gUmVjb25uZWN0IHJlbW90ZSBwZWVyQ29ubmVjdGlvbiBmYWlsZWQ6IFwiKSxuKSx0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbS1yZWNvbm5lY3QtZW5kXCIsdWlkOmUuc3RyZWFtLmdldElkKCksc3VjY2VzczohMSxyZWFzb246bn0pfSl9LGZ1bmN0aW9uKG4pe28uZGVmYXVsdC5kZWJ1ZyhcIltcIi5jb25jYXQodC5jbGllbnRJZCxcIl0gUmVjb25uZWN0IHJlbW90ZSBwZWVyQ29ubmVjdGlvbiBmYWlsZWQ6IFwiKSxuKSx0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudCh7dHlwZTpcInN0cmVhbS1yZWNvbm5lY3QtZW5kXCIsdWlkOmUuc3RyZWFtLmdldElkKCksc3VjY2VzczohMSxyZWFzb246bn0pfSl9KSx3dC5vbihcIm5ldHdvcmtUeXBlQ2hhbmdlZFwiLGZ1bmN0aW9uKGUpe3QuZ2F0ZXdheUNsaWVudCYmdC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoZSk7dmFyIG49UygpKHt9LGUse3R5cGU6XCJuZXR3b3JrLXR5cGUtY2hhbmdlZFwifSk7dC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQobil9KSxhZS5vbihcInJlY29yZGluZ0RldmljZUNoYW5nZWRcIixmdW5jdGlvbihlKXt0LmdhdGV3YXlDbGllbnQmJnQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGUpO3ZhciBuPVMoKSh7fSxlLHt0eXBlOlwicmVjb3JkaW5nLWRldmljZS1jaGFuZ2VkXCJ9KTt0LmdhdGV3YXlDbGllbnQuZGlzcGF0Y2hFdmVudChuKX0pLGFlLm9uKFwicGxheW91dERldmljZUNoYW5nZWRcIixmdW5jdGlvbihlKXt0LmdhdGV3YXlDbGllbnQmJnQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGUpO3ZhciBuPVMoKSh7fSxlLHt0eXBlOlwicGxheW91dC1kZXZpY2UtY2hhbmdlZFwifSk7dC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQobil9KSxhZS5vbihcImNhbWVyYUNoYW5nZWRcIixmdW5jdGlvbihlKXt0LmdhdGV3YXlDbGllbnQmJnQuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KGUpO3ZhciBuPVMoKSh7fSxlLHt0eXBlOlwiY2FtZXJhLWNoYW5nZWRcIn0pO3QuZ2F0ZXdheUNsaWVudC5kaXNwYXRjaEV2ZW50KG4pfSksdC5nYXRld2F5Q2xpZW50Lm9uKFwic3RyZWFtVHlwZUNoYW5nZVwiLGZ1bmN0aW9uKG4pe3ZhciBpPVMoKSh7fSxuLHt0eXBlOlwic3RyZWFtLXR5cGUtY2hhbmdlZFwifSk7dC5nYXRld2F5Q2xpZW50LmRpc3BhdGNoRXZlbnQoaSkscy5iLnJlcG9ydEFwaUludm9rZShlLnNlc3Npb25JZCx7bmFtZTpcInN0cmVhbVR5cGVDaGFuZ2VcIn0pKG51bGwsSlNPTi5zdHJpbmdpZnkobikpfSksdH0sUXQ9e3dpZHRoOjY0MCxoZWlnaHQ6MzYwLHZpZGVvQml0cmF0ZTo0MDAsdmlkZW9GcmFtZXJhdGU6MTUsbG93TGF0ZW5jeTohMSxhdWRpb1NhbXBsZVJhdGU6NDhlMyxhdWRpb0JpdHJhdGU6NDgsYXVkaW9DaGFubmVsczoxLHZpZGVvR29wOjMwLHZpZGVvQ29kZWNQcm9maWxlOjEwMCx1c2VyQ291bnQ6MCx1c2VyQ29uZmlnRXh0cmFJbmZvOnt9LGJhY2tncm91bmRDb2xvcjowLHRyYW5zY29kaW5nVXNlcnM6W119LCR0PWFlLmdldERldmljZXMsWnQ9WCxlbj1KU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHIuU1VQUE9SVF9SRVNPTFVUSU9OX0xJU1QpKTtuLmRlZmF1bHQ9e1RyYW5zY29kaW5nVXNlcjp7dWlkOjAseDowLHk6MCx3aWR0aDowLGhlaWdodDowLHpPcmRlcjowLGFscGhhOjF9LExpdmVUcmFuc2NvZGluZzpRdCxjcmVhdGVDbGllbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9cy5iLnJlcG9ydEFwaUludm9rZShudWxsLHtuYW1lOlwiY3JlYXRlQ2xpZW50XCIsb3B0aW9uczphcmd1bWVudHMsdGFnOlwidHJhY2VyXCJ9KTsoZT1TKCkoe30sZXx8e30pKS5jb2RlY3x8KGUuY29kZWM9ZnVuY3Rpb24oZSl7c3dpdGNoKGUpe2Nhc2VcImgyNjRfaW50ZXJvcFwiOnJldHVyblwiaDI2NFwiO2RlZmF1bHQ6cmV0dXJuXCJ2cDhcIn19KGUubW9kZSkpO3ZhciBuPWZ1bmN0aW9uKGUpe3JldHVybi0xPT09WGUuaW5kZXhPZihlLm1vZGUpP1YuSU5WQUxJRF9DTElFTlRfTU9ERTotMT09PVFlLmluZGV4T2YoZS5jb2RlYyk/Vi5JTlZBTElEX0NMSUVOVF9DT0RFQzpcImgyNjRfaW50ZXJvcFwiPT1lLm1vZGUmJlwiaDI2NFwiIT09ZS5jb2RlYyYmVi5DTElFTlRfTU9ERV9DT0RFQ19NSVNNQVRDSH0oZSk7aWYobil0aHJvdyBvLmRlZmF1bHQuZXJyb3IoXCJJbnZhbGlkIHBhcmFtZXRlciBzZXR0aW5nIE1PREU6IFwiLmNvbmNhdChlLm1vZGUsXCIgQ09ERUM6IFwiKS5jb25jYXQoZS5jb2RlYyxcIiBFUlJPUiBcIikuY29uY2F0KG4pKSx0KG4pLG5ldyBFcnJvcihuKTtyZXR1cm4gby5kZWZhdWx0LmluZm8oXCJDcmVhdGluZyBjbGllbnQsIE1PREU6IFwiLmNvbmNhdChlLm1vZGUsXCIgQ09ERUM6IFwiKS5jb25jYXQoZS5jb2RlYykpLGZ1bmN0aW9uKGUpe3N3aXRjaChlLm1vZGUpe2Nhc2VcImludGVyb3BcIjpjYXNlXCJoMjY0X2ludGVyb3BcIjplLm1vZGU9XCJsaXZlXCI7YnJlYWs7Y2FzZVwid2ViLW9ubHlcIjplLm1vZGU9XCJydGNcIn19KGUpLHQobnVsbCxlKSxYdChlKX0sY3JlYXRlU3RyZWFtOmZ1bmN0aW9uKGUpe3ZhciB0PXMuYi5yZXBvcnRBcGlJbnZva2UobnVsbCx7bmFtZTpcImNyZWF0ZVN0cmVhbVwiLG9wdGlvbnM6YXJndW1lbnRzLHRhZzpcInRyYWNlclwifSk7T2JqZWN0KHJlLmNoZWNrVmFsaWRPYmplY3QpKGUsXCJTdHJlYW1TcGVjXCIpO3ZhciBuPWUuc3RyZWFtSUQsaT1lLmF1ZGlvLGE9ZS52aWRlbyxyPWUuc2NyZWVuLGM9ZS5zY3JlZW5BdWRpbyxkPShlLmF1ZGlvU291cmNlLGUudmlkZW9Tb3VyY2UsZS5jYW1lcmFJZCksdT1lLmZhY2luZ01vZGUsbD1lLm1pY3JvcGhvbmVJZCxwPWUubWlycm9yLGY9ZS5leHRlbnNpb25JZCxtPWUubWVkaWFTb3VyY2UsZz1lLmF1ZGlvUHJvY2Vzc2luZztpZighT2JqZWN0KHJlLmlzRW1wdHkpKG4pJiYhT2JqZWN0KG5lLmlzMzJVaW50KShuKSYmIU9iamVjdChyZS5pc1ZhbGlkU3RyaW5nKShuLDEsMjU1KSl0aHJvdyBuZXcgRXJyb3IoXCJbU3RyaW5nIHN0cmVhbUlEXSBMZW5ndGggb2YgdGhlIHN0cmluZzogWzEsMjU1XS4gQVNDSUkgY2hhcmFjdGVycyBvbmx5LiBbTnVtYmVyIHN0cmVhbUlEXSBUaGUgdmFsdWUgcmFuZ2UgaXMgVWludDMyXCIpO2lmKE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoaSxcImF1ZGlvXCIpLE9iamVjdChyZS5jaGVja1ZhbGlkQm9vbGVhbikoYSxcInZpZGVvXCIpLE9iamVjdChyZS5pc0VtcHR5KShyKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShyLFwic2NyZWVuXCIpLE9iamVjdChyZS5pc0VtcHR5KShjKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShjLFwic2NyZWVuQXVkaW9cIiksT2JqZWN0KHJlLmlzRW1wdHkpKGQpfHxPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykoZCxcImNhbWVyYUlkXCIsMCwyNTUsITEpLE9iamVjdChyZS5pc0VtcHR5KSh1KXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRFbnVtKSh1LFwiZmFjaW5nTW9kZVwiLFtcInVzZXJcIixcImVudmlyb25tZW50XCIsXCJsZWZ0XCIsXCJyaWdodFwiXSksT2JqZWN0KHJlLmlzRW1wdHkpKGwpfHxPYmplY3QocmUuY2hlY2tWYWxpZFN0cmluZykobCxcIm1pY3JvcGhvbmVJZFwiLDAsMjU1LCExKSxPYmplY3QocmUuaXNFbXB0eSkoZil8fE9iamVjdChyZS5jaGVja1ZhbGlkU3RyaW5nKShmLFwiZXh0ZW5zaW9uSWRcIiksT2JqZWN0KHJlLmlzRW1wdHkpKG0pfHxPYmplY3QocmUuY2hlY2tWYWxpZEVudW0pKG0sXCJtZWRpYVNvdXJjZVwiLFtcInNjcmVlblwiLFwiYXBwbGljYXRpb25cIixcIndpbmRvd1wiXSksT2JqZWN0KHJlLmlzRW1wdHkpKHApfHxPYmplY3QocmUuY2hlY2tWYWxpZEJvb2xlYW4pKHAsXCJtaXJyb3JcIiksIU9iamVjdChyZS5pc0VtcHR5KShnKSl7dmFyIHY9Zy5BR0MsaD1nLkFFQyxTPWcuQU5TO09iamVjdChyZS5pc0VtcHR5KSh2KXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKSh2LFwiQUdDXCIpLE9iamVjdChyZS5pc0VtcHR5KShoKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShoLFwiQUVDXCIpLE9iamVjdChyZS5pc0VtcHR5KShTKXx8T2JqZWN0KHJlLmNoZWNrVmFsaWRCb29sZWFuKShTLFwiQU5TXCIpfW8uZGVmYXVsdC5kZWJ1ZyhcIkNyZWF0ZSBzdHJlYW1cIiksITA9PT1jJiYhMD09PWkmJm8uZGVmYXVsdC53YXJuaW5nKFwiRG8gbm90IHNldCBib3RoICdzY3JlZW5BdWRpbycgYW5kICdhdWRpbycgdG8gdHJ1ZSBhdCB0aGUgc2FtZSB0aW1lXCIpO3ZhciBfPVllKGUpO3JldHVybiB0KCksX30sTG9nZ2VyOm8uZGVmYXVsdCxyZXBvcnQ6cy5iLGdldERldmljZXM6JHQsZ2V0U2NyZWVuU291cmNlczpadCxnZXRQYXJhbWV0ZXI6ci5nZXRQYXJhbWV0ZXIsc2V0UGFyYW1ldGVyOnIuc2V0UGFyYW1ldGVyLGNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzOmZ1bmN0aW9uKCl7dmFyIGU9cy5iLnJlcG9ydEFwaUludm9rZShudWxsLHtuYW1lOlwiY2hlY2tTeXN0ZW1SZXF1aXJlbWVudHNcIixvcHRpb25zOmFyZ3VtZW50cyx0YWc6XCJ0cmFjZXJcIn0pLHQ9d2luZG93LlJUQ1BlZXJDb25uZWN0aW9ufHx3aW5kb3cubW96UlRDUGVlckNvbm5lY3Rpb258fHdpbmRvdy53ZWJraXRSVENQZWVyQ29ubmVjdGlvbixuPW5hdmlnYXRvci5nZXRVc2VyTWVkaWF8fG5hdmlnYXRvci53ZWJraXRHZXRVc2VyTWVkaWF8fG5hdmlnYXRvci5tc0dldFVzZXJNZWRpYXx8bmF2aWdhdG9yLm1vekdldFVzZXJNZWRpYXx8bmF2aWdhdG9yLm1lZGlhRGV2aWNlcyYmbmF2aWdhdG9yLm1lZGlhRGV2aWNlcy5nZXRVc2VyTWVkaWEsaT13aW5kb3cuV2ViU29ja2V0LGE9ISF0JiYhIW4mJiEhaSxyPSExO28uZGVmYXVsdC5kZWJ1ZyhtLmdldEJyb3dzZXJJbmZvKCksXCJpc0FQSVN1cHBvcnQ6XCIrYSksbS5pc0Nocm9tZSgpJiZtLmdldEJyb3dzZXJWZXJzaW9uKCk+PTU4JiZcImlPU1wiIT09bS5nZXRCcm93c2VyT1MoKSYmKHI9ITApLG0uaXNGaXJlRm94KCkmJm0uZ2V0QnJvd3NlclZlcnNpb24oKT49NTYmJihyPSEwKSxtLmlzT3BlcmEoKSYmbS5nZXRCcm93c2VyVmVyc2lvbigpPj00NSYmKHI9ITApLG0uaXNTYWZhcmkoKSYmbS5nZXRCcm93c2VyVmVyc2lvbigpPj0xMSYmKHI9ITApLG0uaXNFZGdlKCkmJihyPSEwKSwobS5pc1dlQ2hhdEJyb3dzZXIoKXx8bS5pc1FRQnJvd3NlcigpKSYmXCJpT1NcIiE9PW0uZ2V0QnJvd3Nlck9TKCkmJihyPSEwKSxtLmlzU3VwcG9ydGVkUEMoKXx8bS5pc1N1cHBvcnRlZE1vYmlsZSgpfHwocj0hMSk7dmFyIGM9YSYmcjtyZXR1cm4gZShudWxsLGMpLGN9LGdldFN1cHBvcnRlZENvZGVjOkplLmdldFN1cHBvcnRlZENvZGVjLENoYW5uZWxNZWRpYVJlbGF5Q29uZmlndXJhdGlvbjpLZS5DaGFubmVsTWVkaWFSZWxheUNvbmZpZ3VyYXRpb24sVkVSU0lPTjpyLlZFUlNJT04sQlVJTEQ6ci5CVUlMRCxQUk9GSUxFX1RBQkxFOmVuLEFVRElPX1NBTVBMRV9SQVRFXzMyMDAwOjMyZTMsQVVESU9fU0FNUExFX1JBVEVfNDQxMDA6NDQxMDAsQVVESU9fU0FNUExFX1JBVEVfNDgwMDA6NDhlMyxWSURFT19DT0RFQ19QUk9GSUxFX0JBU0VMSU5FOjY2LFZJREVPX0NPREVDX1BST0ZJTEVfTUFJTjo3NyxWSURFT19DT0RFQ19QUk9GSUxFX0hJR0g6MTAwLFJFTU9URV9WSURFT19TVFJFQU1fSElHSDowLFJFTU9URV9WSURFT19TVFJFQU1fTE9XOjEsUkVNT1RFX1ZJREVPX1NUUkVBTV9NRURJVU06Mn19XSkuZGVmYXVsdH0pOyIsIi8qIVxuICogalF1ZXJ5IEphdmFTY3JpcHQgTGlicmFyeSB2My40LjFcbiAqIGh0dHBzOi8vanF1ZXJ5LmNvbS9cbiAqXG4gKiBJbmNsdWRlcyBTaXp6bGUuanNcbiAqIGh0dHBzOi8vc2l6emxlanMuY29tL1xuICpcbiAqIENvcHlyaWdodCBKUyBGb3VuZGF0aW9uIGFuZCBvdGhlciBjb250cmlidXRvcnNcbiAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICogaHR0cHM6Ly9qcXVlcnkub3JnL2xpY2Vuc2VcbiAqXG4gKiBEYXRlOiAyMDE5LTA1LTAxVDIxOjA0WlxuICovXG4oIGZ1bmN0aW9uKCBnbG9iYWwsIGZhY3RvcnkgKSB7XG5cblx0XCJ1c2Ugc3RyaWN0XCI7XG5cblx0aWYgKCB0eXBlb2YgbW9kdWxlID09PSBcIm9iamVjdFwiICYmIHR5cGVvZiBtb2R1bGUuZXhwb3J0cyA9PT0gXCJvYmplY3RcIiApIHtcblxuXHRcdC8vIEZvciBDb21tb25KUyBhbmQgQ29tbW9uSlMtbGlrZSBlbnZpcm9ubWVudHMgd2hlcmUgYSBwcm9wZXIgYHdpbmRvd2Bcblx0XHQvLyBpcyBwcmVzZW50LCBleGVjdXRlIHRoZSBmYWN0b3J5IGFuZCBnZXQgalF1ZXJ5LlxuXHRcdC8vIEZvciBlbnZpcm9ubWVudHMgdGhhdCBkbyBub3QgaGF2ZSBhIGB3aW5kb3dgIHdpdGggYSBgZG9jdW1lbnRgXG5cdFx0Ly8gKHN1Y2ggYXMgTm9kZS5qcyksIGV4cG9zZSBhIGZhY3RvcnkgYXMgbW9kdWxlLmV4cG9ydHMuXG5cdFx0Ly8gVGhpcyBhY2NlbnR1YXRlcyB0aGUgbmVlZCBmb3IgdGhlIGNyZWF0aW9uIG9mIGEgcmVhbCBgd2luZG93YC5cblx0XHQvLyBlLmcuIHZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpKHdpbmRvdyk7XG5cdFx0Ly8gU2VlIHRpY2tldCAjMTQ1NDkgZm9yIG1vcmUgaW5mby5cblx0XHRtb2R1bGUuZXhwb3J0cyA9IGdsb2JhbC5kb2N1bWVudCA/XG5cdFx0XHRmYWN0b3J5KCBnbG9iYWwsIHRydWUgKSA6XG5cdFx0XHRmdW5jdGlvbiggdyApIHtcblx0XHRcdFx0aWYgKCAhdy5kb2N1bWVudCApIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoIFwialF1ZXJ5IHJlcXVpcmVzIGEgd2luZG93IHdpdGggYSBkb2N1bWVudFwiICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0cmV0dXJuIGZhY3RvcnkoIHcgKTtcblx0XHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0ZmFjdG9yeSggZ2xvYmFsICk7XG5cdH1cblxuLy8gUGFzcyB0aGlzIGlmIHdpbmRvdyBpcyBub3QgZGVmaW5lZCB5ZXRcbn0gKSggdHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiA/IHdpbmRvdyA6IHRoaXMsIGZ1bmN0aW9uKCB3aW5kb3csIG5vR2xvYmFsICkge1xuXG4vLyBFZGdlIDw9IDEyIC0gMTMrLCBGaXJlZm94IDw9MTggLSA0NSssIElFIDEwIC0gMTEsIFNhZmFyaSA1LjEgLSA5KywgaU9TIDYgLSA5LjFcbi8vIHRocm93IGV4Y2VwdGlvbnMgd2hlbiBub24tc3RyaWN0IGNvZGUgKGUuZy4sIEFTUC5ORVQgNC41KSBhY2Nlc3NlcyBzdHJpY3QgbW9kZVxuLy8gYXJndW1lbnRzLmNhbGxlZS5jYWxsZXIgKHRyYWMtMTMzMzUpLiBCdXQgYXMgb2YgalF1ZXJ5IDMuMCAoMjAxNiksIHN0cmljdCBtb2RlIHNob3VsZCBiZSBjb21tb25cbi8vIGVub3VnaCB0aGF0IGFsbCBzdWNoIGF0dGVtcHRzIGFyZSBndWFyZGVkIGluIGEgdHJ5IGJsb2NrLlxuXCJ1c2Ugc3RyaWN0XCI7XG5cbnZhciBhcnIgPSBbXTtcblxudmFyIGRvY3VtZW50ID0gd2luZG93LmRvY3VtZW50O1xuXG52YXIgZ2V0UHJvdG8gPSBPYmplY3QuZ2V0UHJvdG90eXBlT2Y7XG5cbnZhciBzbGljZSA9IGFyci5zbGljZTtcblxudmFyIGNvbmNhdCA9IGFyci5jb25jYXQ7XG5cbnZhciBwdXNoID0gYXJyLnB1c2g7XG5cbnZhciBpbmRleE9mID0gYXJyLmluZGV4T2Y7XG5cbnZhciBjbGFzczJ0eXBlID0ge307XG5cbnZhciB0b1N0cmluZyA9IGNsYXNzMnR5cGUudG9TdHJpbmc7XG5cbnZhciBoYXNPd24gPSBjbGFzczJ0eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgZm5Ub1N0cmluZyA9IGhhc093bi50b1N0cmluZztcblxudmFyIE9iamVjdEZ1bmN0aW9uU3RyaW5nID0gZm5Ub1N0cmluZy5jYWxsKCBPYmplY3QgKTtcblxudmFyIHN1cHBvcnQgPSB7fTtcblxudmFyIGlzRnVuY3Rpb24gPSBmdW5jdGlvbiBpc0Z1bmN0aW9uKCBvYmogKSB7XG5cbiAgICAgIC8vIFN1cHBvcnQ6IENocm9tZSA8PTU3LCBGaXJlZm94IDw9NTJcbiAgICAgIC8vIEluIHNvbWUgYnJvd3NlcnMsIHR5cGVvZiByZXR1cm5zIFwiZnVuY3Rpb25cIiBmb3IgSFRNTCA8b2JqZWN0PiBlbGVtZW50c1xuICAgICAgLy8gKGkuZS4sIGB0eXBlb2YgZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJvYmplY3RcIiApID09PSBcImZ1bmN0aW9uXCJgKS5cbiAgICAgIC8vIFdlIGRvbid0IHdhbnQgdG8gY2xhc3NpZnkgKmFueSogRE9NIG5vZGUgYXMgYSBmdW5jdGlvbi5cbiAgICAgIHJldHVybiB0eXBlb2Ygb2JqID09PSBcImZ1bmN0aW9uXCIgJiYgdHlwZW9mIG9iai5ub2RlVHlwZSAhPT0gXCJudW1iZXJcIjtcbiAgfTtcblxuXG52YXIgaXNXaW5kb3cgPSBmdW5jdGlvbiBpc1dpbmRvdyggb2JqICkge1xuXHRcdHJldHVybiBvYmogIT0gbnVsbCAmJiBvYmogPT09IG9iai53aW5kb3c7XG5cdH07XG5cblxuXG5cblx0dmFyIHByZXNlcnZlZFNjcmlwdEF0dHJpYnV0ZXMgPSB7XG5cdFx0dHlwZTogdHJ1ZSxcblx0XHRzcmM6IHRydWUsXG5cdFx0bm9uY2U6IHRydWUsXG5cdFx0bm9Nb2R1bGU6IHRydWVcblx0fTtcblxuXHRmdW5jdGlvbiBET01FdmFsKCBjb2RlLCBub2RlLCBkb2MgKSB7XG5cdFx0ZG9jID0gZG9jIHx8IGRvY3VtZW50O1xuXG5cdFx0dmFyIGksIHZhbCxcblx0XHRcdHNjcmlwdCA9IGRvYy5jcmVhdGVFbGVtZW50KCBcInNjcmlwdFwiICk7XG5cblx0XHRzY3JpcHQudGV4dCA9IGNvZGU7XG5cdFx0aWYgKCBub2RlICkge1xuXHRcdFx0Zm9yICggaSBpbiBwcmVzZXJ2ZWRTY3JpcHRBdHRyaWJ1dGVzICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggNjQrLCBFZGdlIDE4K1xuXHRcdFx0XHQvLyBTb21lIGJyb3dzZXJzIGRvbid0IHN1cHBvcnQgdGhlIFwibm9uY2VcIiBwcm9wZXJ0eSBvbiBzY3JpcHRzLlxuXHRcdFx0XHQvLyBPbiB0aGUgb3RoZXIgaGFuZCwganVzdCB1c2luZyBgZ2V0QXR0cmlidXRlYCBpcyBub3QgZW5vdWdoIGFzXG5cdFx0XHRcdC8vIHRoZSBgbm9uY2VgIGF0dHJpYnV0ZSBpcyByZXNldCB0byBhbiBlbXB0eSBzdHJpbmcgd2hlbmV2ZXIgaXRcblx0XHRcdFx0Ly8gYmVjb21lcyBicm93c2luZy1jb250ZXh0IGNvbm5lY3RlZC5cblx0XHRcdFx0Ly8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS93aGF0d2cvaHRtbC9pc3N1ZXMvMjM2OVxuXHRcdFx0XHQvLyBTZWUgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy8jbm9uY2UtYXR0cmlidXRlc1xuXHRcdFx0XHQvLyBUaGUgYG5vZGUuZ2V0QXR0cmlidXRlYCBjaGVjayB3YXMgYWRkZWQgZm9yIHRoZSBzYWtlIG9mXG5cdFx0XHRcdC8vIGBqUXVlcnkuZ2xvYmFsRXZhbGAgc28gdGhhdCBpdCBjYW4gZmFrZSBhIG5vbmNlLWNvbnRhaW5pbmcgbm9kZVxuXHRcdFx0XHQvLyB2aWEgYW4gb2JqZWN0LlxuXHRcdFx0XHR2YWwgPSBub2RlWyBpIF0gfHwgbm9kZS5nZXRBdHRyaWJ1dGUgJiYgbm9kZS5nZXRBdHRyaWJ1dGUoIGkgKTtcblx0XHRcdFx0aWYgKCB2YWwgKSB7XG5cdFx0XHRcdFx0c2NyaXB0LnNldEF0dHJpYnV0ZSggaSwgdmFsICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZG9jLmhlYWQuYXBwZW5kQ2hpbGQoIHNjcmlwdCApLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIHNjcmlwdCApO1xuXHR9XG5cblxuZnVuY3Rpb24gdG9UeXBlKCBvYmogKSB7XG5cdGlmICggb2JqID09IG51bGwgKSB7XG5cdFx0cmV0dXJuIG9iaiArIFwiXCI7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9Mi4zIG9ubHkgKGZ1bmN0aW9uaXNoIFJlZ0V4cClcblx0cmV0dXJuIHR5cGVvZiBvYmogPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIG9iaiA9PT0gXCJmdW5jdGlvblwiID9cblx0XHRjbGFzczJ0eXBlWyB0b1N0cmluZy5jYWxsKCBvYmogKSBdIHx8IFwib2JqZWN0XCIgOlxuXHRcdHR5cGVvZiBvYmo7XG59XG4vKiBnbG9iYWwgU3ltYm9sICovXG4vLyBEZWZpbmluZyB0aGlzIGdsb2JhbCBpbiAuZXNsaW50cmMuanNvbiB3b3VsZCBjcmVhdGUgYSBkYW5nZXIgb2YgdXNpbmcgdGhlIGdsb2JhbFxuLy8gdW5ndWFyZGVkIGluIGFub3RoZXIgcGxhY2UsIGl0IHNlZW1zIHNhZmVyIHRvIGRlZmluZSBnbG9iYWwgb25seSBmb3IgdGhpcyBtb2R1bGVcblxuXG5cbnZhclxuXHR2ZXJzaW9uID0gXCIzLjQuMVwiLFxuXG5cdC8vIERlZmluZSBhIGxvY2FsIGNvcHkgb2YgalF1ZXJ5XG5cdGpRdWVyeSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCApIHtcblxuXHRcdC8vIFRoZSBqUXVlcnkgb2JqZWN0IGlzIGFjdHVhbGx5IGp1c3QgdGhlIGluaXQgY29uc3RydWN0b3IgJ2VuaGFuY2VkJ1xuXHRcdC8vIE5lZWQgaW5pdCBpZiBqUXVlcnkgaXMgY2FsbGVkIChqdXN0IGFsbG93IGVycm9yIHRvIGJlIHRocm93biBpZiBub3QgaW5jbHVkZWQpXG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuZm4uaW5pdCggc2VsZWN0b3IsIGNvbnRleHQgKTtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHlcblx0Ly8gTWFrZSBzdXJlIHdlIHRyaW0gQk9NIGFuZCBOQlNQXG5cdHJ0cmltID0gL15bXFxzXFx1RkVGRlxceEEwXSt8W1xcc1xcdUZFRkZcXHhBMF0rJC9nO1xuXG5qUXVlcnkuZm4gPSBqUXVlcnkucHJvdG90eXBlID0ge1xuXG5cdC8vIFRoZSBjdXJyZW50IHZlcnNpb24gb2YgalF1ZXJ5IGJlaW5nIHVzZWRcblx0anF1ZXJ5OiB2ZXJzaW9uLFxuXG5cdGNvbnN0cnVjdG9yOiBqUXVlcnksXG5cblx0Ly8gVGhlIGRlZmF1bHQgbGVuZ3RoIG9mIGEgalF1ZXJ5IG9iamVjdCBpcyAwXG5cdGxlbmd0aDogMCxcblxuXHR0b0FycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHR9LFxuXG5cdC8vIEdldCB0aGUgTnRoIGVsZW1lbnQgaW4gdGhlIG1hdGNoZWQgZWxlbWVudCBzZXQgT1Jcblx0Ly8gR2V0IHRoZSB3aG9sZSBtYXRjaGVkIGVsZW1lbnQgc2V0IGFzIGEgY2xlYW4gYXJyYXlcblx0Z2V0OiBmdW5jdGlvbiggbnVtICkge1xuXG5cdFx0Ly8gUmV0dXJuIGFsbCB0aGUgZWxlbWVudHMgaW4gYSBjbGVhbiBhcnJheVxuXHRcdGlmICggbnVtID09IG51bGwgKSB7XG5cdFx0XHRyZXR1cm4gc2xpY2UuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiBqdXN0IHRoZSBvbmUgZWxlbWVudCBmcm9tIHRoZSBzZXRcblx0XHRyZXR1cm4gbnVtIDwgMCA/IHRoaXNbIG51bSArIHRoaXMubGVuZ3RoIF0gOiB0aGlzWyBudW0gXTtcblx0fSxcblxuXHQvLyBUYWtlIGFuIGFycmF5IG9mIGVsZW1lbnRzIGFuZCBwdXNoIGl0IG9udG8gdGhlIHN0YWNrXG5cdC8vIChyZXR1cm5pbmcgdGhlIG5ldyBtYXRjaGVkIGVsZW1lbnQgc2V0KVxuXHRwdXNoU3RhY2s6IGZ1bmN0aW9uKCBlbGVtcyApIHtcblxuXHRcdC8vIEJ1aWxkIGEgbmV3IGpRdWVyeSBtYXRjaGVkIGVsZW1lbnQgc2V0XG5cdFx0dmFyIHJldCA9IGpRdWVyeS5tZXJnZSggdGhpcy5jb25zdHJ1Y3RvcigpLCBlbGVtcyApO1xuXG5cdFx0Ly8gQWRkIHRoZSBvbGQgb2JqZWN0IG9udG8gdGhlIHN0YWNrIChhcyBhIHJlZmVyZW5jZSlcblx0XHRyZXQucHJldk9iamVjdCA9IHRoaXM7XG5cblx0XHQvLyBSZXR1cm4gdGhlIG5ld2x5LWZvcm1lZCBlbGVtZW50IHNldFxuXHRcdHJldHVybiByZXQ7XG5cdH0sXG5cblx0Ly8gRXhlY3V0ZSBhIGNhbGxiYWNrIGZvciBldmVyeSBlbGVtZW50IGluIHRoZSBtYXRjaGVkIHNldC5cblx0ZWFjaDogZnVuY3Rpb24oIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZWFjaCggdGhpcywgY2FsbGJhY2sgKTtcblx0fSxcblxuXHRtYXA6IGZ1bmN0aW9uKCBjYWxsYmFjayApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeS5tYXAoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuIGNhbGxiYWNrLmNhbGwoIGVsZW0sIGksIGVsZW0gKTtcblx0XHR9ICkgKTtcblx0fSxcblxuXHRzbGljZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCBzbGljZS5hcHBseSggdGhpcywgYXJndW1lbnRzICkgKTtcblx0fSxcblxuXHRmaXJzdDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMuZXEoIDAgKTtcblx0fSxcblxuXHRsYXN0OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5lcSggLTEgKTtcblx0fSxcblxuXHRlcTogZnVuY3Rpb24oIGkgKSB7XG5cdFx0dmFyIGxlbiA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0aiA9ICtpICsgKCBpIDwgMCA/IGxlbiA6IDAgKTtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGogPj0gMCAmJiBqIDwgbGVuID8gWyB0aGlzWyBqIF0gXSA6IFtdICk7XG5cdH0sXG5cblx0ZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5wcmV2T2JqZWN0IHx8IHRoaXMuY29uc3RydWN0b3IoKTtcblx0fSxcblxuXHQvLyBGb3IgaW50ZXJuYWwgdXNlIG9ubHkuXG5cdC8vIEJlaGF2ZXMgbGlrZSBhbiBBcnJheSdzIG1ldGhvZCwgbm90IGxpa2UgYSBqUXVlcnkgbWV0aG9kLlxuXHRwdXNoOiBwdXNoLFxuXHRzb3J0OiBhcnIuc29ydCxcblx0c3BsaWNlOiBhcnIuc3BsaWNlXG59O1xuXG5qUXVlcnkuZXh0ZW5kID0galF1ZXJ5LmZuLmV4dGVuZCA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgb3B0aW9ucywgbmFtZSwgc3JjLCBjb3B5LCBjb3B5SXNBcnJheSwgY2xvbmUsXG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyAwIF0gfHwge30sXG5cdFx0aSA9IDEsXG5cdFx0bGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aCxcblx0XHRkZWVwID0gZmFsc2U7XG5cblx0Ly8gSGFuZGxlIGEgZGVlcCBjb3B5IHNpdHVhdGlvblxuXHRpZiAoIHR5cGVvZiB0YXJnZXQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGRlZXAgPSB0YXJnZXQ7XG5cblx0XHQvLyBTa2lwIHRoZSBib29sZWFuIGFuZCB0aGUgdGFyZ2V0XG5cdFx0dGFyZ2V0ID0gYXJndW1lbnRzWyBpIF0gfHwge307XG5cdFx0aSsrO1xuXHR9XG5cblx0Ly8gSGFuZGxlIGNhc2Ugd2hlbiB0YXJnZXQgaXMgYSBzdHJpbmcgb3Igc29tZXRoaW5nIChwb3NzaWJsZSBpbiBkZWVwIGNvcHkpXG5cdGlmICggdHlwZW9mIHRhcmdldCAhPT0gXCJvYmplY3RcIiAmJiAhaXNGdW5jdGlvbiggdGFyZ2V0ICkgKSB7XG5cdFx0dGFyZ2V0ID0ge307XG5cdH1cblxuXHQvLyBFeHRlbmQgalF1ZXJ5IGl0c2VsZiBpZiBvbmx5IG9uZSBhcmd1bWVudCBpcyBwYXNzZWRcblx0aWYgKCBpID09PSBsZW5ndGggKSB7XG5cdFx0dGFyZ2V0ID0gdGhpcztcblx0XHRpLS07XG5cdH1cblxuXHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblxuXHRcdC8vIE9ubHkgZGVhbCB3aXRoIG5vbi1udWxsL3VuZGVmaW5lZCB2YWx1ZXNcblx0XHRpZiAoICggb3B0aW9ucyA9IGFyZ3VtZW50c1sgaSBdICkgIT0gbnVsbCApIHtcblxuXHRcdFx0Ly8gRXh0ZW5kIHRoZSBiYXNlIG9iamVjdFxuXHRcdFx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdFx0XHRjb3B5ID0gb3B0aW9uc1sgbmFtZSBdO1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgT2JqZWN0LnByb3RvdHlwZSBwb2xsdXRpb25cblx0XHRcdFx0Ly8gUHJldmVudCBuZXZlci1lbmRpbmcgbG9vcFxuXHRcdFx0XHRpZiAoIG5hbWUgPT09IFwiX19wcm90b19fXCIgfHwgdGFyZ2V0ID09PSBjb3B5ICkge1xuXHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gUmVjdXJzZSBpZiB3ZSdyZSBtZXJnaW5nIHBsYWluIG9iamVjdHMgb3IgYXJyYXlzXG5cdFx0XHRcdGlmICggZGVlcCAmJiBjb3B5ICYmICggalF1ZXJ5LmlzUGxhaW5PYmplY3QoIGNvcHkgKSB8fFxuXHRcdFx0XHRcdCggY29weUlzQXJyYXkgPSBBcnJheS5pc0FycmF5KCBjb3B5ICkgKSApICkge1xuXHRcdFx0XHRcdHNyYyA9IHRhcmdldFsgbmFtZSBdO1xuXG5cdFx0XHRcdFx0Ly8gRW5zdXJlIHByb3BlciB0eXBlIGZvciB0aGUgc291cmNlIHZhbHVlXG5cdFx0XHRcdFx0aWYgKCBjb3B5SXNBcnJheSAmJiAhQXJyYXkuaXNBcnJheSggc3JjICkgKSB7XG5cdFx0XHRcdFx0XHRjbG9uZSA9IFtdO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoICFjb3B5SXNBcnJheSAmJiAhalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHNyYyApICkge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSB7fTtcblx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0Y2xvbmUgPSBzcmM7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGNvcHlJc0FycmF5ID0gZmFsc2U7XG5cblx0XHRcdFx0XHQvLyBOZXZlciBtb3ZlIG9yaWdpbmFsIG9iamVjdHMsIGNsb25lIHRoZW1cblx0XHRcdFx0XHR0YXJnZXRbIG5hbWUgXSA9IGpRdWVyeS5leHRlbmQoIGRlZXAsIGNsb25lLCBjb3B5ICk7XG5cblx0XHRcdFx0Ly8gRG9uJ3QgYnJpbmcgaW4gdW5kZWZpbmVkIHZhbHVlc1xuXHRcdFx0XHR9IGVsc2UgaWYgKCBjb3B5ICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0dGFyZ2V0WyBuYW1lIF0gPSBjb3B5O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gUmV0dXJuIHRoZSBtb2RpZmllZCBvYmplY3Rcblx0cmV0dXJuIHRhcmdldDtcbn07XG5cbmpRdWVyeS5leHRlbmQoIHtcblxuXHQvLyBVbmlxdWUgZm9yIGVhY2ggY29weSBvZiBqUXVlcnkgb24gdGhlIHBhZ2Vcblx0ZXhwYW5kbzogXCJqUXVlcnlcIiArICggdmVyc2lvbiArIE1hdGgucmFuZG9tKCkgKS5yZXBsYWNlKCAvXFxEL2csIFwiXCIgKSxcblxuXHQvLyBBc3N1bWUgalF1ZXJ5IGlzIHJlYWR5IHdpdGhvdXQgdGhlIHJlYWR5IG1vZHVsZVxuXHRpc1JlYWR5OiB0cnVlLFxuXG5cdGVycm9yOiBmdW5jdGlvbiggbXNnICkge1xuXHRcdHRocm93IG5ldyBFcnJvciggbXNnICk7XG5cdH0sXG5cblx0bm9vcDogZnVuY3Rpb24oKSB7fSxcblxuXHRpc1BsYWluT2JqZWN0OiBmdW5jdGlvbiggb2JqICkge1xuXHRcdHZhciBwcm90bywgQ3RvcjtcblxuXHRcdC8vIERldGVjdCBvYnZpb3VzIG5lZ2F0aXZlc1xuXHRcdC8vIFVzZSB0b1N0cmluZyBpbnN0ZWFkIG9mIGpRdWVyeS50eXBlIHRvIGNhdGNoIGhvc3Qgb2JqZWN0c1xuXHRcdGlmICggIW9iaiB8fCB0b1N0cmluZy5jYWxsKCBvYmogKSAhPT0gXCJbb2JqZWN0IE9iamVjdF1cIiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRwcm90byA9IGdldFByb3RvKCBvYmogKTtcblxuXHRcdC8vIE9iamVjdHMgd2l0aCBubyBwcm90b3R5cGUgKGUuZy4sIGBPYmplY3QuY3JlYXRlKCBudWxsIClgKSBhcmUgcGxhaW5cblx0XHRpZiAoICFwcm90byApIHtcblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblxuXHRcdC8vIE9iamVjdHMgd2l0aCBwcm90b3R5cGUgYXJlIHBsYWluIGlmZiB0aGV5IHdlcmUgY29uc3RydWN0ZWQgYnkgYSBnbG9iYWwgT2JqZWN0IGZ1bmN0aW9uXG5cdFx0Q3RvciA9IGhhc093bi5jYWxsKCBwcm90bywgXCJjb25zdHJ1Y3RvclwiICkgJiYgcHJvdG8uY29uc3RydWN0b3I7XG5cdFx0cmV0dXJuIHR5cGVvZiBDdG9yID09PSBcImZ1bmN0aW9uXCIgJiYgZm5Ub1N0cmluZy5jYWxsKCBDdG9yICkgPT09IE9iamVjdEZ1bmN0aW9uU3RyaW5nO1xuXHR9LFxuXG5cdGlzRW1wdHlPYmplY3Q6IGZ1bmN0aW9uKCBvYmogKSB7XG5cdFx0dmFyIG5hbWU7XG5cblx0XHRmb3IgKCBuYW1lIGluIG9iaiApIHtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cdFx0cmV0dXJuIHRydWU7XG5cdH0sXG5cblx0Ly8gRXZhbHVhdGVzIGEgc2NyaXB0IGluIGEgZ2xvYmFsIGNvbnRleHRcblx0Z2xvYmFsRXZhbDogZnVuY3Rpb24oIGNvZGUsIG9wdGlvbnMgKSB7XG5cdFx0RE9NRXZhbCggY29kZSwgeyBub25jZTogb3B0aW9ucyAmJiBvcHRpb25zLm5vbmNlIH0gKTtcblx0fSxcblxuXHRlYWNoOiBmdW5jdGlvbiggb2JqLCBjYWxsYmFjayApIHtcblx0XHR2YXIgbGVuZ3RoLCBpID0gMDtcblxuXHRcdGlmICggaXNBcnJheUxpa2UoIG9iaiApICkge1xuXHRcdFx0bGVuZ3RoID0gb2JqLmxlbmd0aDtcblx0XHRcdGZvciAoIDsgaSA8IGxlbmd0aDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGNhbGxiYWNrLmNhbGwoIG9ialsgaSBdLCBpLCBvYmpbIGkgXSApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0gZWxzZSB7XG5cdFx0XHRmb3IgKCBpIGluIG9iaiApIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjay5jYWxsKCBvYmpbIGkgXSwgaSwgb2JqWyBpIF0gKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gb2JqO1xuXHR9LFxuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjAgb25seVxuXHR0cmltOiBmdW5jdGlvbiggdGV4dCApIHtcblx0XHRyZXR1cm4gdGV4dCA9PSBudWxsID9cblx0XHRcdFwiXCIgOlxuXHRcdFx0KCB0ZXh0ICsgXCJcIiApLnJlcGxhY2UoIHJ0cmltLCBcIlwiICk7XG5cdH0sXG5cblx0Ly8gcmVzdWx0cyBpcyBmb3IgaW50ZXJuYWwgdXNhZ2Ugb25seVxuXHRtYWtlQXJyYXk6IGZ1bmN0aW9uKCBhcnIsIHJlc3VsdHMgKSB7XG5cdFx0dmFyIHJldCA9IHJlc3VsdHMgfHwgW107XG5cblx0XHRpZiAoIGFyciAhPSBudWxsICkge1xuXHRcdFx0aWYgKCBpc0FycmF5TGlrZSggT2JqZWN0KCBhcnIgKSApICkge1xuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHJldCxcblx0XHRcdFx0XHR0eXBlb2YgYXJyID09PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRbIGFyciBdIDogYXJyXG5cdFx0XHRcdCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRwdXNoLmNhbGwoIHJldCwgYXJyICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJldDtcblx0fSxcblxuXHRpbkFycmF5OiBmdW5jdGlvbiggZWxlbSwgYXJyLCBpICkge1xuXHRcdHJldHVybiBhcnIgPT0gbnVsbCA/IC0xIDogaW5kZXhPZi5jYWxsKCBhcnIsIGVsZW0sIGkgKTtcblx0fSxcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRtZXJnZTogZnVuY3Rpb24oIGZpcnN0LCBzZWNvbmQgKSB7XG5cdFx0dmFyIGxlbiA9ICtzZWNvbmQubGVuZ3RoLFxuXHRcdFx0aiA9IDAsXG5cdFx0XHRpID0gZmlyc3QubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRmaXJzdFsgaSsrIF0gPSBzZWNvbmRbIGogXTtcblx0XHR9XG5cblx0XHRmaXJzdC5sZW5ndGggPSBpO1xuXG5cdFx0cmV0dXJuIGZpcnN0O1xuXHR9LFxuXG5cdGdyZXA6IGZ1bmN0aW9uKCBlbGVtcywgY2FsbGJhY2ssIGludmVydCApIHtcblx0XHR2YXIgY2FsbGJhY2tJbnZlcnNlLFxuXHRcdFx0bWF0Y2hlcyA9IFtdLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsZW5ndGggPSBlbGVtcy5sZW5ndGgsXG5cdFx0XHRjYWxsYmFja0V4cGVjdCA9ICFpbnZlcnQ7XG5cblx0XHQvLyBHbyB0aHJvdWdoIHRoZSBhcnJheSwgb25seSBzYXZpbmcgdGhlIGl0ZW1zXG5cdFx0Ly8gdGhhdCBwYXNzIHRoZSB2YWxpZGF0b3IgZnVuY3Rpb25cblx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkrKyApIHtcblx0XHRcdGNhbGxiYWNrSW52ZXJzZSA9ICFjYWxsYmFjayggZWxlbXNbIGkgXSwgaSApO1xuXHRcdFx0aWYgKCBjYWxsYmFja0ludmVyc2UgIT09IGNhbGxiYWNrRXhwZWN0ICkge1xuXHRcdFx0XHRtYXRjaGVzLnB1c2goIGVsZW1zWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbWF0Y2hlcztcblx0fSxcblxuXHQvLyBhcmcgaXMgZm9yIGludGVybmFsIHVzYWdlIG9ubHlcblx0bWFwOiBmdW5jdGlvbiggZWxlbXMsIGNhbGxiYWNrLCBhcmcgKSB7XG5cdFx0dmFyIGxlbmd0aCwgdmFsdWUsXG5cdFx0XHRpID0gMCxcblx0XHRcdHJldCA9IFtdO1xuXG5cdFx0Ly8gR28gdGhyb3VnaCB0aGUgYXJyYXksIHRyYW5zbGF0aW5nIGVhY2ggb2YgdGhlIGl0ZW1zIHRvIHRoZWlyIG5ldyB2YWx1ZXNcblx0XHRpZiAoIGlzQXJyYXlMaWtlKCBlbGVtcyApICkge1xuXHRcdFx0bGVuZ3RoID0gZWxlbXMubGVuZ3RoO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRcdHZhbHVlID0gY2FsbGJhY2soIGVsZW1zWyBpIF0sIGksIGFyZyApO1xuXG5cdFx0XHRcdGlmICggdmFsdWUgIT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXQucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0Ly8gR28gdGhyb3VnaCBldmVyeSBrZXkgb24gdGhlIG9iamVjdCxcblx0XHR9IGVsc2Uge1xuXHRcdFx0Zm9yICggaSBpbiBlbGVtcyApIHtcblx0XHRcdFx0dmFsdWUgPSBjYWxsYmFjayggZWxlbXNbIGkgXSwgaSwgYXJnICk7XG5cblx0XHRcdFx0aWYgKCB2YWx1ZSAhPSBudWxsICkge1xuXHRcdFx0XHRcdHJldC5wdXNoKCB2YWx1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gRmxhdHRlbiBhbnkgbmVzdGVkIGFycmF5c1xuXHRcdHJldHVybiBjb25jYXQuYXBwbHkoIFtdLCByZXQgKTtcblx0fSxcblxuXHQvLyBBIGdsb2JhbCBHVUlEIGNvdW50ZXIgZm9yIG9iamVjdHNcblx0Z3VpZDogMSxcblxuXHQvLyBqUXVlcnkuc3VwcG9ydCBpcyBub3QgdXNlZCBpbiBDb3JlIGJ1dCBvdGhlciBwcm9qZWN0cyBhdHRhY2ggdGhlaXJcblx0Ly8gcHJvcGVydGllcyB0byBpdCBzbyBpdCBuZWVkcyB0byBleGlzdC5cblx0c3VwcG9ydDogc3VwcG9ydFxufSApO1xuXG5pZiAoIHR5cGVvZiBTeW1ib2wgPT09IFwiZnVuY3Rpb25cIiApIHtcblx0alF1ZXJ5LmZuWyBTeW1ib2wuaXRlcmF0b3IgXSA9IGFyclsgU3ltYm9sLml0ZXJhdG9yIF07XG59XG5cbi8vIFBvcHVsYXRlIHRoZSBjbGFzczJ0eXBlIG1hcFxualF1ZXJ5LmVhY2goIFwiQm9vbGVhbiBOdW1iZXIgU3RyaW5nIEZ1bmN0aW9uIEFycmF5IERhdGUgUmVnRXhwIE9iamVjdCBFcnJvciBTeW1ib2xcIi5zcGxpdCggXCIgXCIgKSxcbmZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHRjbGFzczJ0eXBlWyBcIltvYmplY3QgXCIgKyBuYW1lICsgXCJdXCIgXSA9IG5hbWUudG9Mb3dlckNhc2UoKTtcbn0gKTtcblxuZnVuY3Rpb24gaXNBcnJheUxpa2UoIG9iaiApIHtcblxuXHQvLyBTdXBwb3J0OiByZWFsIGlPUyA4LjIgb25seSAobm90IHJlcHJvZHVjaWJsZSBpbiBzaW11bGF0b3IpXG5cdC8vIGBpbmAgY2hlY2sgdXNlZCB0byBwcmV2ZW50IEpJVCBlcnJvciAoZ2gtMjE0NSlcblx0Ly8gaGFzT3duIGlzbid0IHVzZWQgaGVyZSBkdWUgdG8gZmFsc2UgbmVnYXRpdmVzXG5cdC8vIHJlZ2FyZGluZyBOb2RlbGlzdCBsZW5ndGggaW4gSUVcblx0dmFyIGxlbmd0aCA9ICEhb2JqICYmIFwibGVuZ3RoXCIgaW4gb2JqICYmIG9iai5sZW5ndGgsXG5cdFx0dHlwZSA9IHRvVHlwZSggb2JqICk7XG5cblx0aWYgKCBpc0Z1bmN0aW9uKCBvYmogKSB8fCBpc1dpbmRvdyggb2JqICkgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0cmV0dXJuIHR5cGUgPT09IFwiYXJyYXlcIiB8fCBsZW5ndGggPT09IDAgfHxcblx0XHR0eXBlb2YgbGVuZ3RoID09PSBcIm51bWJlclwiICYmIGxlbmd0aCA+IDAgJiYgKCBsZW5ndGggLSAxICkgaW4gb2JqO1xufVxudmFyIFNpenpsZSA9XG4vKiFcbiAqIFNpenpsZSBDU1MgU2VsZWN0b3IgRW5naW5lIHYyLjMuNFxuICogaHR0cHM6Ly9zaXp6bGVqcy5jb20vXG4gKlxuICogQ29weXJpZ2h0IEpTIEZvdW5kYXRpb24gYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICogUmVsZWFzZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlXG4gKiBodHRwczovL2pzLmZvdW5kYXRpb24vXG4gKlxuICogRGF0ZTogMjAxOS0wNC0wOFxuICovXG4oZnVuY3Rpb24oIHdpbmRvdyApIHtcblxudmFyIGksXG5cdHN1cHBvcnQsXG5cdEV4cHIsXG5cdGdldFRleHQsXG5cdGlzWE1MLFxuXHR0b2tlbml6ZSxcblx0Y29tcGlsZSxcblx0c2VsZWN0LFxuXHRvdXRlcm1vc3RDb250ZXh0LFxuXHRzb3J0SW5wdXQsXG5cdGhhc0R1cGxpY2F0ZSxcblxuXHQvLyBMb2NhbCBkb2N1bWVudCB2YXJzXG5cdHNldERvY3VtZW50LFxuXHRkb2N1bWVudCxcblx0ZG9jRWxlbSxcblx0ZG9jdW1lbnRJc0hUTUwsXG5cdHJidWdneVFTQSxcblx0cmJ1Z2d5TWF0Y2hlcyxcblx0bWF0Y2hlcyxcblx0Y29udGFpbnMsXG5cblx0Ly8gSW5zdGFuY2Utc3BlY2lmaWMgZGF0YVxuXHRleHBhbmRvID0gXCJzaXp6bGVcIiArIDEgKiBuZXcgRGF0ZSgpLFxuXHRwcmVmZXJyZWREb2MgPSB3aW5kb3cuZG9jdW1lbnQsXG5cdGRpcnJ1bnMgPSAwLFxuXHRkb25lID0gMCxcblx0Y2xhc3NDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHRva2VuQ2FjaGUgPSBjcmVhdGVDYWNoZSgpLFxuXHRjb21waWxlckNhY2hlID0gY3JlYXRlQ2FjaGUoKSxcblx0bm9ubmF0aXZlU2VsZWN0b3JDYWNoZSA9IGNyZWF0ZUNhY2hlKCksXG5cdHNvcnRPcmRlciA9IGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdGlmICggYSA9PT0gYiApIHtcblx0XHRcdGhhc0R1cGxpY2F0ZSA9IHRydWU7XG5cdFx0fVxuXHRcdHJldHVybiAwO1xuXHR9LFxuXG5cdC8vIEluc3RhbmNlIG1ldGhvZHNcblx0aGFzT3duID0gKHt9KS5oYXNPd25Qcm9wZXJ0eSxcblx0YXJyID0gW10sXG5cdHBvcCA9IGFyci5wb3AsXG5cdHB1c2hfbmF0aXZlID0gYXJyLnB1c2gsXG5cdHB1c2ggPSBhcnIucHVzaCxcblx0c2xpY2UgPSBhcnIuc2xpY2UsXG5cdC8vIFVzZSBhIHN0cmlwcGVkLWRvd24gaW5kZXhPZiBhcyBpdCdzIGZhc3RlciB0aGFuIG5hdGl2ZVxuXHQvLyBodHRwczovL2pzcGVyZi5jb20vdGhvci1pbmRleG9mLXZzLWZvci81XG5cdGluZGV4T2YgPSBmdW5jdGlvbiggbGlzdCwgZWxlbSApIHtcblx0XHR2YXIgaSA9IDAsXG5cdFx0XHRsZW4gPSBsaXN0Lmxlbmd0aDtcblx0XHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRcdGlmICggbGlzdFtpXSA9PT0gZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGk7XG5cdFx0XHR9XG5cdFx0fVxuXHRcdHJldHVybiAtMTtcblx0fSxcblxuXHRib29sZWFucyA9IFwiY2hlY2tlZHxzZWxlY3RlZHxhc3luY3xhdXRvZm9jdXN8YXV0b3BsYXl8Y29udHJvbHN8ZGVmZXJ8ZGlzYWJsZWR8aGlkZGVufGlzbWFwfGxvb3B8bXVsdGlwbGV8b3BlbnxyZWFkb25seXxyZXF1aXJlZHxzY29wZWRcIixcblxuXHQvLyBSZWd1bGFyIGV4cHJlc3Npb25zXG5cblx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvY3NzMy1zZWxlY3RvcnMvI3doaXRlc3BhY2Vcblx0d2hpdGVzcGFjZSA9IFwiW1xcXFx4MjBcXFxcdFxcXFxyXFxcXG5cXFxcZl1cIixcblxuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjdmFsdWUtZGVmLWlkZW50aWZpZXJcblx0aWRlbnRpZmllciA9IFwiKD86XFxcXFxcXFwufFtcXFxcdy1dfFteXFwwLVxcXFx4YTBdKStcIixcblxuXHQvLyBBdHRyaWJ1dGUgc2VsZWN0b3JzOiBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2F0dHJpYnV0ZS1zZWxlY3RvcnNcblx0YXR0cmlidXRlcyA9IFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooXCIgKyBpZGVudGlmaWVyICsgXCIpKD86XCIgKyB3aGl0ZXNwYWNlICtcblx0XHQvLyBPcGVyYXRvciAoY2FwdHVyZSAyKVxuXHRcdFwiKihbKl4kfCF+XT89KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0Ly8gXCJBdHRyaWJ1dGUgdmFsdWVzIG11c3QgYmUgQ1NTIGlkZW50aWZpZXJzIFtjYXB0dXJlIDVdIG9yIHN0cmluZ3MgW2NhcHR1cmUgMyBvciBjYXB0dXJlIDRdXCJcblx0XHRcIiooPzonKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcJ10pKiknfFxcXCIoKD86XFxcXFxcXFwufFteXFxcXFxcXFxcXFwiXSkqKVxcXCJ8KFwiICsgaWRlbnRpZmllciArIFwiKSl8KVwiICsgd2hpdGVzcGFjZSArXG5cdFx0XCIqXFxcXF1cIixcblxuXHRwc2V1ZG9zID0gXCI6KFwiICsgaWRlbnRpZmllciArIFwiKSg/OlxcXFwoKFwiICtcblx0XHQvLyBUbyByZWR1Y2UgdGhlIG51bWJlciBvZiBzZWxlY3RvcnMgbmVlZGluZyB0b2tlbml6ZSBpbiB0aGUgcHJlRmlsdGVyLCBwcmVmZXIgYXJndW1lbnRzOlxuXHRcdC8vIDEuIHF1b3RlZCAoY2FwdHVyZSAzOyBjYXB0dXJlIDQgb3IgY2FwdHVyZSA1KVxuXHRcdFwiKCcoKD86XFxcXFxcXFwufFteXFxcXFxcXFwnXSkqKSd8XFxcIigoPzpcXFxcXFxcXC58W15cXFxcXFxcXFxcXCJdKSopXFxcIil8XCIgK1xuXHRcdC8vIDIuIHNpbXBsZSAoY2FwdHVyZSA2KVxuXHRcdFwiKCg/OlxcXFxcXFxcLnxbXlxcXFxcXFxcKClbXFxcXF1dfFwiICsgYXR0cmlidXRlcyArIFwiKSopfFwiICtcblx0XHQvLyAzLiBhbnl0aGluZyBlbHNlIChjYXB0dXJlIDIpXG5cdFx0XCIuKlwiICtcblx0XHRcIilcXFxcKXwpXCIsXG5cblx0Ly8gTGVhZGluZyBhbmQgbm9uLWVzY2FwZWQgdHJhaWxpbmcgd2hpdGVzcGFjZSwgY2FwdHVyaW5nIHNvbWUgbm9uLXdoaXRlc3BhY2UgY2hhcmFjdGVycyBwcmVjZWRpbmcgdGhlIGxhdHRlclxuXHRyd2hpdGVzcGFjZSA9IG5ldyBSZWdFeHAoIHdoaXRlc3BhY2UgKyBcIitcIiwgXCJnXCIgKSxcblx0cnRyaW0gPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIit8KCg/Ol58W15cXFxcXFxcXF0pKD86XFxcXFxcXFwuKSopXCIgKyB3aGl0ZXNwYWNlICsgXCIrJFwiLCBcImdcIiApLFxuXG5cdHJjb21tYSA9IG5ldyBSZWdFeHAoIFwiXlwiICsgd2hpdGVzcGFjZSArIFwiKixcIiArIHdoaXRlc3BhY2UgKyBcIipcIiApLFxuXHRyY29tYmluYXRvcnMgPSBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIiooWz4rfl18XCIgKyB3aGl0ZXNwYWNlICsgXCIpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXCIgKSxcblx0cmRlc2NlbmQgPSBuZXcgUmVnRXhwKCB3aGl0ZXNwYWNlICsgXCJ8PlwiICksXG5cblx0cnBzZXVkbyA9IG5ldyBSZWdFeHAoIHBzZXVkb3MgKSxcblx0cmlkZW50aWZpZXIgPSBuZXcgUmVnRXhwKCBcIl5cIiArIGlkZW50aWZpZXIgKyBcIiRcIiApLFxuXG5cdG1hdGNoRXhwciA9IHtcblx0XHRcIklEXCI6IG5ldyBSZWdFeHAoIFwiXiMoXCIgKyBpZGVudGlmaWVyICsgXCIpXCIgKSxcblx0XHRcIkNMQVNTXCI6IG5ldyBSZWdFeHAoIFwiXlxcXFwuKFwiICsgaWRlbnRpZmllciArIFwiKVwiICksXG5cdFx0XCJUQUdcIjogbmV3IFJlZ0V4cCggXCJeKFwiICsgaWRlbnRpZmllciArIFwifFsqXSlcIiApLFxuXHRcdFwiQVRUUlwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIGF0dHJpYnV0ZXMgKSxcblx0XHRcIlBTRVVET1wiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHBzZXVkb3MgKSxcblx0XHRcIkNISUxEXCI6IG5ldyBSZWdFeHAoIFwiXjoob25seXxmaXJzdHxsYXN0fG50aHxudGgtbGFzdCktKGNoaWxkfG9mLXR5cGUpKD86XFxcXChcIiArIHdoaXRlc3BhY2UgK1xuXHRcdFx0XCIqKGV2ZW58b2RkfCgoWystXXwpKFxcXFxkKilufClcIiArIHdoaXRlc3BhY2UgKyBcIiooPzooWystXXwpXCIgKyB3aGl0ZXNwYWNlICtcblx0XHRcdFwiKihcXFxcZCspfCkpXCIgKyB3aGl0ZXNwYWNlICsgXCIqXFxcXCl8KVwiLCBcImlcIiApLFxuXHRcdFwiYm9vbFwiOiBuZXcgUmVnRXhwKCBcIl4oPzpcIiArIGJvb2xlYW5zICsgXCIpJFwiLCBcImlcIiApLFxuXHRcdC8vIEZvciB1c2UgaW4gbGlicmFyaWVzIGltcGxlbWVudGluZyAuaXMoKVxuXHRcdC8vIFdlIHVzZSB0aGlzIGZvciBQT1MgbWF0Y2hpbmcgaW4gYHNlbGVjdGBcblx0XHRcIm5lZWRzQ29udGV4dFwiOiBuZXcgUmVnRXhwKCBcIl5cIiArIHdoaXRlc3BhY2UgKyBcIipbPit+XXw6KGV2ZW58b2RkfGVxfGd0fGx0fG50aHxmaXJzdHxsYXN0KSg/OlxcXFwoXCIgK1xuXHRcdFx0d2hpdGVzcGFjZSArIFwiKigoPzotXFxcXGQpP1xcXFxkKilcIiArIHdoaXRlc3BhY2UgKyBcIipcXFxcKXwpKD89W14tXXwkKVwiLCBcImlcIiApXG5cdH0sXG5cblx0cmh0bWwgPSAvSFRNTCQvaSxcblx0cmlucHV0cyA9IC9eKD86aW5wdXR8c2VsZWN0fHRleHRhcmVhfGJ1dHRvbikkL2ksXG5cdHJoZWFkZXIgPSAvXmhcXGQkL2ksXG5cblx0cm5hdGl2ZSA9IC9eW157XStcXHtcXHMqXFxbbmF0aXZlIFxcdy8sXG5cblx0Ly8gRWFzaWx5LXBhcnNlYWJsZS9yZXRyaWV2YWJsZSBJRCBvciBUQUcgb3IgQ0xBU1Mgc2VsZWN0b3JzXG5cdHJxdWlja0V4cHIgPSAvXig/OiMoW1xcdy1dKyl8KFxcdyspfFxcLihbXFx3LV0rKSkkLyxcblxuXHRyc2libGluZyA9IC9bK35dLyxcblxuXHQvLyBDU1MgZXNjYXBlc1xuXHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9DU1MyMS9zeW5kYXRhLmh0bWwjZXNjYXBlZC1jaGFyYWN0ZXJzXG5cdHJ1bmVzY2FwZSA9IG5ldyBSZWdFeHAoIFwiXFxcXFxcXFwoW1xcXFxkYS1mXXsxLDZ9XCIgKyB3aGl0ZXNwYWNlICsgXCI/fChcIiArIHdoaXRlc3BhY2UgKyBcIil8LilcIiwgXCJpZ1wiICksXG5cdGZ1bmVzY2FwZSA9IGZ1bmN0aW9uKCBfLCBlc2NhcGVkLCBlc2NhcGVkV2hpdGVzcGFjZSApIHtcblx0XHR2YXIgaGlnaCA9IFwiMHhcIiArIGVzY2FwZWQgLSAweDEwMDAwO1xuXHRcdC8vIE5hTiBtZWFucyBub24tY29kZXBvaW50XG5cdFx0Ly8gU3VwcG9ydDogRmlyZWZveDwyNFxuXHRcdC8vIFdvcmthcm91bmQgZXJyb25lb3VzIG51bWVyaWMgaW50ZXJwcmV0YXRpb24gb2YgK1wiMHhcIlxuXHRcdHJldHVybiBoaWdoICE9PSBoaWdoIHx8IGVzY2FwZWRXaGl0ZXNwYWNlID9cblx0XHRcdGVzY2FwZWQgOlxuXHRcdFx0aGlnaCA8IDAgP1xuXHRcdFx0XHQvLyBCTVAgY29kZXBvaW50XG5cdFx0XHRcdFN0cmluZy5mcm9tQ2hhckNvZGUoIGhpZ2ggKyAweDEwMDAwICkgOlxuXHRcdFx0XHQvLyBTdXBwbGVtZW50YWwgUGxhbmUgY29kZXBvaW50IChzdXJyb2dhdGUgcGFpcilcblx0XHRcdFx0U3RyaW5nLmZyb21DaGFyQ29kZSggaGlnaCA+PiAxMCB8IDB4RDgwMCwgaGlnaCAmIDB4M0ZGIHwgMHhEQzAwICk7XG5cdH0sXG5cblx0Ly8gQ1NTIHN0cmluZy9pZGVudGlmaWVyIHNlcmlhbGl6YXRpb25cblx0Ly8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNjb21tb24tc2VyaWFsaXppbmctaWRpb21zXG5cdHJjc3Nlc2NhcGUgPSAvKFtcXDAtXFx4MWZcXHg3Zl18Xi0/XFxkKXxeLSR8W15cXDAtXFx4MWZcXHg3Zi1cXHVGRkZGXFx3LV0vZyxcblx0ZmNzc2VzY2FwZSA9IGZ1bmN0aW9uKCBjaCwgYXNDb2RlUG9pbnQgKSB7XG5cdFx0aWYgKCBhc0NvZGVQb2ludCApIHtcblxuXHRcdFx0Ly8gVSswMDAwIE5VTEwgYmVjb21lcyBVK0ZGRkQgUkVQTEFDRU1FTlQgQ0hBUkFDVEVSXG5cdFx0XHRpZiAoIGNoID09PSBcIlxcMFwiICkge1xuXHRcdFx0XHRyZXR1cm4gXCJcXHVGRkZEXCI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnRyb2wgY2hhcmFjdGVycyBhbmQgKGRlcGVuZGVudCB1cG9uIHBvc2l0aW9uKSBudW1iZXJzIGdldCBlc2NhcGVkIGFzIGNvZGUgcG9pbnRzXG5cdFx0XHRyZXR1cm4gY2guc2xpY2UoIDAsIC0xICkgKyBcIlxcXFxcIiArIGNoLmNoYXJDb2RlQXQoIGNoLmxlbmd0aCAtIDEgKS50b1N0cmluZyggMTYgKSArIFwiIFwiO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyIHBvdGVudGlhbGx5LXNwZWNpYWwgQVNDSUkgY2hhcmFjdGVycyBnZXQgYmFja3NsYXNoLWVzY2FwZWRcblx0XHRyZXR1cm4gXCJcXFxcXCIgKyBjaDtcblx0fSxcblxuXHQvLyBVc2VkIGZvciBpZnJhbWVzXG5cdC8vIFNlZSBzZXREb2N1bWVudCgpXG5cdC8vIFJlbW92aW5nIHRoZSBmdW5jdGlvbiB3cmFwcGVyIGNhdXNlcyBhIFwiUGVybWlzc2lvbiBEZW5pZWRcIlxuXHQvLyBlcnJvciBpbiBJRVxuXHR1bmxvYWRIYW5kbGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0c2V0RG9jdW1lbnQoKTtcblx0fSxcblxuXHRpbkRpc2FibGVkRmllbGRzZXQgPSBhZGRDb21iaW5hdG9yKFxuXHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IHRydWUgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImZpZWxkc2V0XCI7XG5cdFx0fSxcblx0XHR7IGRpcjogXCJwYXJlbnROb2RlXCIsIG5leHQ6IFwibGVnZW5kXCIgfVxuXHQpO1xuXG4vLyBPcHRpbWl6ZSBmb3IgcHVzaC5hcHBseSggXywgTm9kZUxpc3QgKVxudHJ5IHtcblx0cHVzaC5hcHBseShcblx0XHQoYXJyID0gc2xpY2UuY2FsbCggcHJlZmVycmVkRG9jLmNoaWxkTm9kZXMgKSksXG5cdFx0cHJlZmVycmVkRG9jLmNoaWxkTm9kZXNcblx0KTtcblx0Ly8gU3VwcG9ydDogQW5kcm9pZDw0LjBcblx0Ly8gRGV0ZWN0IHNpbGVudGx5IGZhaWxpbmcgcHVzaC5hcHBseVxuXHRhcnJbIHByZWZlcnJlZERvYy5jaGlsZE5vZGVzLmxlbmd0aCBdLm5vZGVUeXBlO1xufSBjYXRjaCAoIGUgKSB7XG5cdHB1c2ggPSB7IGFwcGx5OiBhcnIubGVuZ3RoID9cblxuXHRcdC8vIExldmVyYWdlIHNsaWNlIGlmIHBvc3NpYmxlXG5cdFx0ZnVuY3Rpb24oIHRhcmdldCwgZWxzICkge1xuXHRcdFx0cHVzaF9uYXRpdmUuYXBwbHkoIHRhcmdldCwgc2xpY2UuY2FsbChlbHMpICk7XG5cdFx0fSA6XG5cblx0XHQvLyBTdXBwb3J0OiBJRTw5XG5cdFx0Ly8gT3RoZXJ3aXNlIGFwcGVuZCBkaXJlY3RseVxuXHRcdGZ1bmN0aW9uKCB0YXJnZXQsIGVscyApIHtcblx0XHRcdHZhciBqID0gdGFyZ2V0Lmxlbmd0aCxcblx0XHRcdFx0aSA9IDA7XG5cdFx0XHQvLyBDYW4ndCB0cnVzdCBOb2RlTGlzdC5sZW5ndGhcblx0XHRcdHdoaWxlICggKHRhcmdldFtqKytdID0gZWxzW2krK10pICkge31cblx0XHRcdHRhcmdldC5sZW5ndGggPSBqIC0gMTtcblx0XHR9XG5cdH07XG59XG5cbmZ1bmN0aW9uIFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKSB7XG5cdHZhciBtLCBpLCBlbGVtLCBuaWQsIG1hdGNoLCBncm91cHMsIG5ld1NlbGVjdG9yLFxuXHRcdG5ld0NvbnRleHQgPSBjb250ZXh0ICYmIGNvbnRleHQub3duZXJEb2N1bWVudCxcblxuXHRcdC8vIG5vZGVUeXBlIGRlZmF1bHRzIHRvIDksIHNpbmNlIGNvbnRleHQgZGVmYXVsdHMgdG8gZG9jdW1lbnRcblx0XHRub2RlVHlwZSA9IGNvbnRleHQgPyBjb250ZXh0Lm5vZGVUeXBlIDogOTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBSZXR1cm4gZWFybHkgZnJvbSBjYWxscyB3aXRoIGludmFsaWQgc2VsZWN0b3Igb3IgY29udGV4dFxuXHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiB8fCAhc2VsZWN0b3IgfHxcblx0XHRub2RlVHlwZSAhPT0gMSAmJiBub2RlVHlwZSAhPT0gOSAmJiBub2RlVHlwZSAhPT0gMTEgKSB7XG5cblx0XHRyZXR1cm4gcmVzdWx0cztcblx0fVxuXG5cdC8vIFRyeSB0byBzaG9ydGN1dCBmaW5kIG9wZXJhdGlvbnMgKGFzIG9wcG9zZWQgdG8gZmlsdGVycykgaW4gSFRNTCBkb2N1bWVudHNcblx0aWYgKCAhc2VlZCApIHtcblxuXHRcdGlmICggKCBjb250ZXh0ID8gY29udGV4dC5vd25lckRvY3VtZW50IHx8IGNvbnRleHQgOiBwcmVmZXJyZWREb2MgKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHRcdH1cblx0XHRjb250ZXh0ID0gY29udGV4dCB8fCBkb2N1bWVudDtcblxuXHRcdGlmICggZG9jdW1lbnRJc0hUTUwgKSB7XG5cblx0XHRcdC8vIElmIHRoZSBzZWxlY3RvciBpcyBzdWZmaWNpZW50bHkgc2ltcGxlLCB0cnkgdXNpbmcgYSBcImdldCpCeSpcIiBET00gbWV0aG9kXG5cdFx0XHQvLyAoZXhjZXB0aW5nIERvY3VtZW50RnJhZ21lbnQgY29udGV4dCwgd2hlcmUgdGhlIG1ldGhvZHMgZG9uJ3QgZXhpc3QpXG5cdFx0XHRpZiAoIG5vZGVUeXBlICE9PSAxMSAmJiAobWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICkpICkge1xuXG5cdFx0XHRcdC8vIElEIHNlbGVjdG9yXG5cdFx0XHRcdGlmICggKG0gPSBtYXRjaFsxXSkgKSB7XG5cblx0XHRcdFx0XHQvLyBEb2N1bWVudCBjb250ZXh0XG5cdFx0XHRcdFx0aWYgKCBub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRcdGlmICggKGVsZW0gPSBjb250ZXh0LmdldEVsZW1lbnRCeUlkKCBtICkpICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHRcdC8vIFRPRE86IGlkZW50aWZ5IHZlcnNpb25zXG5cdFx0XHRcdFx0XHRcdC8vIGdldEVsZW1lbnRCeUlkIGNhbiBtYXRjaCBlbGVtZW50cyBieSBuYW1lIGluc3RlYWQgb2YgSURcblx0XHRcdFx0XHRcdFx0aWYgKCBlbGVtLmlkID09PSBtICkge1xuXHRcdFx0XHRcdFx0XHRcdHJlc3VsdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEVsZW1lbnQgY29udGV4dFxuXHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFLCBPcGVyYSwgV2Via2l0XG5cdFx0XHRcdFx0XHQvLyBUT0RPOiBpZGVudGlmeSB2ZXJzaW9uc1xuXHRcdFx0XHRcdFx0Ly8gZ2V0RWxlbWVudEJ5SWQgY2FuIG1hdGNoIGVsZW1lbnRzIGJ5IG5hbWUgaW5zdGVhZCBvZiBJRFxuXHRcdFx0XHRcdFx0aWYgKCBuZXdDb250ZXh0ICYmIChlbGVtID0gbmV3Q29udGV4dC5nZXRFbGVtZW50QnlJZCggbSApKSAmJlxuXHRcdFx0XHRcdFx0XHRjb250YWlucyggY29udGV4dCwgZWxlbSApICYmXG5cdFx0XHRcdFx0XHRcdGVsZW0uaWQgPT09IG0gKSB7XG5cblx0XHRcdFx0XHRcdFx0cmVzdWx0cy5wdXNoKCBlbGVtICk7XG5cdFx0XHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBUeXBlIHNlbGVjdG9yXG5cdFx0XHRcdH0gZWxzZSBpZiAoIG1hdGNoWzJdICkge1xuXHRcdFx0XHRcdHB1c2guYXBwbHkoIHJlc3VsdHMsIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHNlbGVjdG9yICkgKTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblxuXHRcdFx0XHQvLyBDbGFzcyBzZWxlY3RvclxuXHRcdFx0XHR9IGVsc2UgaWYgKCAobSA9IG1hdGNoWzNdKSAmJiBzdXBwb3J0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgJiZcblx0XHRcdFx0XHRjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUgKSB7XG5cblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLCBjb250ZXh0LmdldEVsZW1lbnRzQnlDbGFzc05hbWUoIG0gKSApO1xuXHRcdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRha2UgYWR2YW50YWdlIG9mIHF1ZXJ5U2VsZWN0b3JBbGxcblx0XHRcdGlmICggc3VwcG9ydC5xc2EgJiZcblx0XHRcdFx0IW5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXSAmJlxuXHRcdFx0XHQoIXJidWdneVFTQSB8fCAhcmJ1Z2d5UVNBLnRlc3QoIHNlbGVjdG9yICkpICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgOCBvbmx5XG5cdFx0XHRcdC8vIEV4Y2x1ZGUgb2JqZWN0IGVsZW1lbnRzXG5cdFx0XHRcdChub2RlVHlwZSAhPT0gMSB8fCBjb250ZXh0Lm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgIT09IFwib2JqZWN0XCIpICkge1xuXG5cdFx0XHRcdG5ld1NlbGVjdG9yID0gc2VsZWN0b3I7XG5cdFx0XHRcdG5ld0NvbnRleHQgPSBjb250ZXh0O1xuXG5cdFx0XHRcdC8vIHFTQSBjb25zaWRlcnMgZWxlbWVudHMgb3V0c2lkZSBhIHNjb3Bpbmcgcm9vdCB3aGVuIGV2YWx1YXRpbmcgY2hpbGQgb3Jcblx0XHRcdFx0Ly8gZGVzY2VuZGFudCBjb21iaW5hdG9ycywgd2hpY2ggaXMgbm90IHdoYXQgd2Ugd2FudC5cblx0XHRcdFx0Ly8gSW4gc3VjaCBjYXNlcywgd2Ugd29yayBhcm91bmQgdGhlIGJlaGF2aW9yIGJ5IHByZWZpeGluZyBldmVyeSBzZWxlY3RvciBpbiB0aGVcblx0XHRcdFx0Ly8gbGlzdCB3aXRoIGFuIElEIHNlbGVjdG9yIHJlZmVyZW5jaW5nIHRoZSBzY29wZSBjb250ZXh0LlxuXHRcdFx0XHQvLyBUaGFua3MgdG8gQW5kcmV3IER1cG9udCBmb3IgdGhpcyB0ZWNobmlxdWUuXG5cdFx0XHRcdGlmICggbm9kZVR5cGUgPT09IDEgJiYgcmRlc2NlbmQudGVzdCggc2VsZWN0b3IgKSApIHtcblxuXHRcdFx0XHRcdC8vIENhcHR1cmUgdGhlIGNvbnRleHQgSUQsIHNldHRpbmcgaXQgZmlyc3QgaWYgbmVjZXNzYXJ5XG5cdFx0XHRcdFx0aWYgKCAobmlkID0gY29udGV4dC5nZXRBdHRyaWJ1dGUoIFwiaWRcIiApKSApIHtcblx0XHRcdFx0XHRcdG5pZCA9IG5pZC5yZXBsYWNlKCByY3NzZXNjYXBlLCBmY3NzZXNjYXBlICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdGNvbnRleHQuc2V0QXR0cmlidXRlKCBcImlkXCIsIChuaWQgPSBleHBhbmRvKSApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIFByZWZpeCBldmVyeSBzZWxlY3RvciBpbiB0aGUgbGlzdFxuXHRcdFx0XHRcdGdyb3VwcyA9IHRva2VuaXplKCBzZWxlY3RvciApO1xuXHRcdFx0XHRcdGkgPSBncm91cHMubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0Z3JvdXBzW2ldID0gXCIjXCIgKyBuaWQgKyBcIiBcIiArIHRvU2VsZWN0b3IoIGdyb3Vwc1tpXSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRuZXdTZWxlY3RvciA9IGdyb3Vwcy5qb2luKCBcIixcIiApO1xuXG5cdFx0XHRcdFx0Ly8gRXhwYW5kIGNvbnRleHQgZm9yIHNpYmxpbmcgc2VsZWN0b3JzXG5cdFx0XHRcdFx0bmV3Q29udGV4dCA9IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8XG5cdFx0XHRcdFx0XHRjb250ZXh0O1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRwdXNoLmFwcGx5KCByZXN1bHRzLFxuXHRcdFx0XHRcdFx0bmV3Q29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCBuZXdTZWxlY3RvciApXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHRcdFx0fSBjYXRjaCAoIHFzYUVycm9yICkge1xuXHRcdFx0XHRcdG5vbm5hdGl2ZVNlbGVjdG9yQ2FjaGUoIHNlbGVjdG9yLCB0cnVlICk7XG5cdFx0XHRcdH0gZmluYWxseSB7XG5cdFx0XHRcdFx0aWYgKCBuaWQgPT09IGV4cGFuZG8gKSB7XG5cdFx0XHRcdFx0XHRjb250ZXh0LnJlbW92ZUF0dHJpYnV0ZSggXCJpZFwiICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWxsIG90aGVyc1xuXHRyZXR1cm4gc2VsZWN0KCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICksIGNvbnRleHQsIHJlc3VsdHMsIHNlZWQgKTtcbn1cblxuLyoqXG4gKiBDcmVhdGUga2V5LXZhbHVlIGNhY2hlcyBvZiBsaW1pdGVkIHNpemVcbiAqIEByZXR1cm5zIHtmdW5jdGlvbihzdHJpbmcsIG9iamVjdCl9IFJldHVybnMgdGhlIE9iamVjdCBkYXRhIGFmdGVyIHN0b3JpbmcgaXQgb24gaXRzZWxmIHdpdGhcbiAqXHRwcm9wZXJ0eSBuYW1lIHRoZSAoc3BhY2Utc3VmZml4ZWQpIHN0cmluZyBhbmQgKGlmIHRoZSBjYWNoZSBpcyBsYXJnZXIgdGhhbiBFeHByLmNhY2hlTGVuZ3RoKVxuICpcdGRlbGV0aW5nIHRoZSBvbGRlc3QgZW50cnlcbiAqL1xuZnVuY3Rpb24gY3JlYXRlQ2FjaGUoKSB7XG5cdHZhciBrZXlzID0gW107XG5cblx0ZnVuY3Rpb24gY2FjaGUoIGtleSwgdmFsdWUgKSB7XG5cdFx0Ly8gVXNlIChrZXkgKyBcIiBcIikgdG8gYXZvaWQgY29sbGlzaW9uIHdpdGggbmF0aXZlIHByb3RvdHlwZSBwcm9wZXJ0aWVzIChzZWUgSXNzdWUgIzE1Nylcblx0XHRpZiAoIGtleXMucHVzaCgga2V5ICsgXCIgXCIgKSA+IEV4cHIuY2FjaGVMZW5ndGggKSB7XG5cdFx0XHQvLyBPbmx5IGtlZXAgdGhlIG1vc3QgcmVjZW50IGVudHJpZXNcblx0XHRcdGRlbGV0ZSBjYWNoZVsga2V5cy5zaGlmdCgpIF07XG5cdFx0fVxuXHRcdHJldHVybiAoY2FjaGVbIGtleSArIFwiIFwiIF0gPSB2YWx1ZSk7XG5cdH1cblx0cmV0dXJuIGNhY2hlO1xufVxuXG4vKipcbiAqIE1hcmsgYSBmdW5jdGlvbiBmb3Igc3BlY2lhbCB1c2UgYnkgU2l6emxlXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBUaGUgZnVuY3Rpb24gdG8gbWFya1xuICovXG5mdW5jdGlvbiBtYXJrRnVuY3Rpb24oIGZuICkge1xuXHRmblsgZXhwYW5kbyBdID0gdHJ1ZTtcblx0cmV0dXJuIGZuO1xufVxuXG4vKipcbiAqIFN1cHBvcnQgdGVzdGluZyB1c2luZyBhbiBlbGVtZW50XG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBQYXNzZWQgdGhlIGNyZWF0ZWQgZWxlbWVudCBhbmQgcmV0dXJucyBhIGJvb2xlYW4gcmVzdWx0XG4gKi9cbmZ1bmN0aW9uIGFzc2VydCggZm4gKSB7XG5cdHZhciBlbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKTtcblxuXHR0cnkge1xuXHRcdHJldHVybiAhIWZuKCBlbCApO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9IGZpbmFsbHkge1xuXHRcdC8vIFJlbW92ZSBmcm9tIGl0cyBwYXJlbnQgYnkgZGVmYXVsdFxuXHRcdGlmICggZWwucGFyZW50Tm9kZSApIHtcblx0XHRcdGVsLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQoIGVsICk7XG5cdFx0fVxuXHRcdC8vIHJlbGVhc2UgbWVtb3J5IGluIElFXG5cdFx0ZWwgPSBudWxsO1xuXHR9XG59XG5cbi8qKlxuICogQWRkcyB0aGUgc2FtZSBoYW5kbGVyIGZvciBhbGwgb2YgdGhlIHNwZWNpZmllZCBhdHRyc1xuICogQHBhcmFtIHtTdHJpbmd9IGF0dHJzIFBpcGUtc2VwYXJhdGVkIGxpc3Qgb2YgYXR0cmlidXRlc1xuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciBUaGUgbWV0aG9kIHRoYXQgd2lsbCBiZSBhcHBsaWVkXG4gKi9cbmZ1bmN0aW9uIGFkZEhhbmRsZSggYXR0cnMsIGhhbmRsZXIgKSB7XG5cdHZhciBhcnIgPSBhdHRycy5zcGxpdChcInxcIiksXG5cdFx0aSA9IGFyci5sZW5ndGg7XG5cblx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0RXhwci5hdHRySGFuZGxlWyBhcnJbaV0gXSA9IGhhbmRsZXI7XG5cdH1cbn1cblxuLyoqXG4gKiBDaGVja3MgZG9jdW1lbnQgb3JkZXIgb2YgdHdvIHNpYmxpbmdzXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGFcbiAqIEBwYXJhbSB7RWxlbWVudH0gYlxuICogQHJldHVybnMge051bWJlcn0gUmV0dXJucyBsZXNzIHRoYW4gMCBpZiBhIHByZWNlZGVzIGIsIGdyZWF0ZXIgdGhhbiAwIGlmIGEgZm9sbG93cyBiXG4gKi9cbmZ1bmN0aW9uIHNpYmxpbmdDaGVjayggYSwgYiApIHtcblx0dmFyIGN1ciA9IGIgJiYgYSxcblx0XHRkaWZmID0gY3VyICYmIGEubm9kZVR5cGUgPT09IDEgJiYgYi5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0YS5zb3VyY2VJbmRleCAtIGIuc291cmNlSW5kZXg7XG5cblx0Ly8gVXNlIElFIHNvdXJjZUluZGV4IGlmIGF2YWlsYWJsZSBvbiBib3RoIG5vZGVzXG5cdGlmICggZGlmZiApIHtcblx0XHRyZXR1cm4gZGlmZjtcblx0fVxuXG5cdC8vIENoZWNrIGlmIGIgZm9sbG93cyBhXG5cdGlmICggY3VyICkge1xuXHRcdHdoaWxlICggKGN1ciA9IGN1ci5uZXh0U2libGluZykgKSB7XG5cdFx0XHRpZiAoIGN1ciA9PT0gYiApIHtcblx0XHRcdFx0cmV0dXJuIC0xO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBhID8gMSA6IC0xO1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgaW5wdXQgdHlwZXNcbiAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZUlucHV0UHNldWRvKCB0eXBlICkge1xuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0cmV0dXJuIG5hbWUgPT09IFwiaW5wdXRcIiAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciBidXR0b25zXG4gKiBAcGFyYW0ge1N0cmluZ30gdHlwZVxuICovXG5mdW5jdGlvbiBjcmVhdGVCdXR0b25Qc2V1ZG8oIHR5cGUgKSB7XG5cdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHR2YXIgbmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRyZXR1cm4gKG5hbWUgPT09IFwiaW5wdXRcIiB8fCBuYW1lID09PSBcImJ1dHRvblwiKSAmJiBlbGVtLnR5cGUgPT09IHR5cGU7XG5cdH07XG59XG5cbi8qKlxuICogUmV0dXJucyBhIGZ1bmN0aW9uIHRvIHVzZSBpbiBwc2V1ZG9zIGZvciA6ZW5hYmxlZC86ZGlzYWJsZWRcbiAqIEBwYXJhbSB7Qm9vbGVhbn0gZGlzYWJsZWQgdHJ1ZSBmb3IgOmRpc2FibGVkOyBmYWxzZSBmb3IgOmVuYWJsZWRcbiAqL1xuZnVuY3Rpb24gY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIGRpc2FibGVkICkge1xuXG5cdC8vIEtub3duIDpkaXNhYmxlZCBmYWxzZSBwb3NpdGl2ZXM6IGZpZWxkc2V0W2Rpc2FibGVkXSA+IGxlZ2VuZDpudGgtb2YtdHlwZShuKzIpIDpjYW4tZGlzYWJsZVxuXHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHQvLyBPbmx5IGNlcnRhaW4gZWxlbWVudHMgY2FuIG1hdGNoIDplbmFibGVkIG9yIDpkaXNhYmxlZFxuXHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL3NjcmlwdGluZy5odG1sI3NlbGVjdG9yLWVuYWJsZWRcblx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zY3JpcHRpbmcuaHRtbCNzZWxlY3Rvci1kaXNhYmxlZFxuXHRcdGlmICggXCJmb3JtXCIgaW4gZWxlbSApIHtcblxuXHRcdFx0Ly8gQ2hlY2sgZm9yIGluaGVyaXRlZCBkaXNhYmxlZG5lc3Mgb24gcmVsZXZhbnQgbm9uLWRpc2FibGVkIGVsZW1lbnRzOlxuXHRcdFx0Ly8gKiBsaXN0ZWQgZm9ybS1hc3NvY2lhdGVkIGVsZW1lbnRzIGluIGEgZGlzYWJsZWQgZmllbGRzZXRcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjYXRlZ29yeS1saXN0ZWRcblx0XHRcdC8vICAgaHR0cHM6Ly9odG1sLnNwZWMud2hhdHdnLm9yZy9tdWx0aXBhZ2UvZm9ybXMuaHRtbCNjb25jZXB0LWZlLWRpc2FibGVkXG5cdFx0XHQvLyAqIG9wdGlvbiBlbGVtZW50cyBpbiBhIGRpc2FibGVkIG9wdGdyb3VwXG5cdFx0XHQvLyAgIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvbXVsdGlwYWdlL2Zvcm1zLmh0bWwjY29uY2VwdC1vcHRpb24tZGlzYWJsZWRcblx0XHRcdC8vIEFsbCBzdWNoIGVsZW1lbnRzIGhhdmUgYSBcImZvcm1cIiBwcm9wZXJ0eS5cblx0XHRcdGlmICggZWxlbS5wYXJlbnROb2RlICYmIGVsZW0uZGlzYWJsZWQgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdC8vIE9wdGlvbiBlbGVtZW50cyBkZWZlciB0byBhIHBhcmVudCBvcHRncm91cCBpZiBwcmVzZW50XG5cdFx0XHRcdGlmICggXCJsYWJlbFwiIGluIGVsZW0gKSB7XG5cdFx0XHRcdFx0aWYgKCBcImxhYmVsXCIgaW4gZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIGVsZW0ucGFyZW50Tm9kZS5kaXNhYmxlZCA9PT0gZGlzYWJsZWQ7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLmRpc2FibGVkID09PSBkaXNhYmxlZDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA2IC0gMTFcblx0XHRcdFx0Ly8gVXNlIHRoZSBpc0Rpc2FibGVkIHNob3J0Y3V0IHByb3BlcnR5IHRvIGNoZWNrIGZvciBkaXNhYmxlZCBmaWVsZHNldCBhbmNlc3RvcnNcblx0XHRcdFx0cmV0dXJuIGVsZW0uaXNEaXNhYmxlZCA9PT0gZGlzYWJsZWQgfHxcblxuXHRcdFx0XHRcdC8vIFdoZXJlIHRoZXJlIGlzIG5vIGlzRGlzYWJsZWQsIGNoZWNrIG1hbnVhbGx5XG5cdFx0XHRcdFx0LyoganNoaW50IC1XMDE4ICovXG5cdFx0XHRcdFx0ZWxlbS5pc0Rpc2FibGVkICE9PSAhZGlzYWJsZWQgJiZcblx0XHRcdFx0XHRcdGluRGlzYWJsZWRGaWVsZHNldCggZWxlbSApID09PSBkaXNhYmxlZDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXG5cdFx0Ly8gVHJ5IHRvIHdpbm5vdyBvdXQgZWxlbWVudHMgdGhhdCBjYW4ndCBiZSBkaXNhYmxlZCBiZWZvcmUgdHJ1c3RpbmcgdGhlIGRpc2FibGVkIHByb3BlcnR5LlxuXHRcdC8vIFNvbWUgdmljdGltcyBnZXQgY2F1Z2h0IGluIG91ciBuZXQgKGxhYmVsLCBsZWdlbmQsIG1lbnUsIHRyYWNrKSwgYnV0IGl0IHNob3VsZG4ndFxuXHRcdC8vIGV2ZW4gZXhpc3Qgb24gdGhlbSwgbGV0IGFsb25lIGhhdmUgYSBib29sZWFuIHZhbHVlLlxuXHRcdH0gZWxzZSBpZiAoIFwibGFiZWxcIiBpbiBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZGlzYWJsZWQgPT09IGRpc2FibGVkO1xuXHRcdH1cblxuXHRcdC8vIFJlbWFpbmluZyBlbGVtZW50cyBhcmUgbmVpdGhlciA6ZW5hYmxlZCBub3IgOmRpc2FibGVkXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9O1xufVxuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiB0byB1c2UgaW4gcHNldWRvcyBmb3IgcG9zaXRpb25hbHNcbiAqIEBwYXJhbSB7RnVuY3Rpb259IGZuXG4gKi9cbmZ1bmN0aW9uIGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oIGZuICkge1xuXHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBhcmd1bWVudCApIHtcblx0XHRhcmd1bWVudCA9ICthcmd1bWVudDtcblx0XHRyZXR1cm4gbWFya0Z1bmN0aW9uKGZ1bmN0aW9uKCBzZWVkLCBtYXRjaGVzICkge1xuXHRcdFx0dmFyIGosXG5cdFx0XHRcdG1hdGNoSW5kZXhlcyA9IGZuKCBbXSwgc2VlZC5sZW5ndGgsIGFyZ3VtZW50ICksXG5cdFx0XHRcdGkgPSBtYXRjaEluZGV4ZXMubGVuZ3RoO1xuXG5cdFx0XHQvLyBNYXRjaCBlbGVtZW50cyBmb3VuZCBhdCB0aGUgc3BlY2lmaWVkIGluZGV4ZXNcblx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRpZiAoIHNlZWRbIChqID0gbWF0Y2hJbmRleGVzW2ldKSBdICkge1xuXHRcdFx0XHRcdHNlZWRbal0gPSAhKG1hdGNoZXNbal0gPSBzZWVkW2pdKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn1cblxuLyoqXG4gKiBDaGVja3MgYSBub2RlIGZvciB2YWxpZGl0eSBhcyBhIFNpenpsZSBjb250ZXh0XG4gKiBAcGFyYW0ge0VsZW1lbnR8T2JqZWN0PX0gY29udGV4dFxuICogQHJldHVybnMge0VsZW1lbnR8T2JqZWN0fEJvb2xlYW59IFRoZSBpbnB1dCBub2RlIGlmIGFjY2VwdGFibGUsIG90aGVyd2lzZSBhIGZhbHN5IHZhbHVlXG4gKi9cbmZ1bmN0aW9uIHRlc3RDb250ZXh0KCBjb250ZXh0ICkge1xuXHRyZXR1cm4gY29udGV4dCAmJiB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb250ZXh0O1xufVxuXG4vLyBFeHBvc2Ugc3VwcG9ydCB2YXJzIGZvciBjb252ZW5pZW5jZVxuc3VwcG9ydCA9IFNpenpsZS5zdXBwb3J0ID0ge307XG5cbi8qKlxuICogRGV0ZWN0cyBYTUwgbm9kZXNcbiAqIEBwYXJhbSB7RWxlbWVudHxPYmplY3R9IGVsZW0gQW4gZWxlbWVudCBvciBhIGRvY3VtZW50XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn0gVHJ1ZSBpZmYgZWxlbSBpcyBhIG5vbi1IVE1MIFhNTCBub2RlXG4gKi9cbmlzWE1MID0gU2l6emxlLmlzWE1MID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHZhciBuYW1lc3BhY2UgPSBlbGVtLm5hbWVzcGFjZVVSSSxcblx0XHRkb2NFbGVtID0gKGVsZW0ub3duZXJEb2N1bWVudCB8fCBlbGVtKS5kb2N1bWVudEVsZW1lbnQ7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD04XG5cdC8vIEFzc3VtZSBIVE1MIHdoZW4gZG9jdW1lbnRFbGVtZW50IGRvZXNuJ3QgeWV0IGV4aXN0LCBzdWNoIGFzIGluc2lkZSBsb2FkaW5nIGlmcmFtZXNcblx0Ly8gaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzQ4MzNcblx0cmV0dXJuICFyaHRtbC50ZXN0KCBuYW1lc3BhY2UgfHwgZG9jRWxlbSAmJiBkb2NFbGVtLm5vZGVOYW1lIHx8IFwiSFRNTFwiICk7XG59O1xuXG4vKipcbiAqIFNldHMgZG9jdW1lbnQtcmVsYXRlZCB2YXJpYWJsZXMgb25jZSBiYXNlZCBvbiB0aGUgY3VycmVudCBkb2N1bWVudFxuICogQHBhcmFtIHtFbGVtZW50fE9iamVjdH0gW2RvY10gQW4gZWxlbWVudCBvciBkb2N1bWVudCBvYmplY3QgdG8gdXNlIHRvIHNldCB0aGUgZG9jdW1lbnRcbiAqIEByZXR1cm5zIHtPYmplY3R9IFJldHVybnMgdGhlIGN1cnJlbnQgZG9jdW1lbnRcbiAqL1xuc2V0RG9jdW1lbnQgPSBTaXp6bGUuc2V0RG9jdW1lbnQgPSBmdW5jdGlvbiggbm9kZSApIHtcblx0dmFyIGhhc0NvbXBhcmUsIHN1YldpbmRvdyxcblx0XHRkb2MgPSBub2RlID8gbm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUgOiBwcmVmZXJyZWREb2M7XG5cblx0Ly8gUmV0dXJuIGVhcmx5IGlmIGRvYyBpcyBpbnZhbGlkIG9yIGFscmVhZHkgc2VsZWN0ZWRcblx0aWYgKCBkb2MgPT09IGRvY3VtZW50IHx8IGRvYy5ub2RlVHlwZSAhPT0gOSB8fCAhZG9jLmRvY3VtZW50RWxlbWVudCApIHtcblx0XHRyZXR1cm4gZG9jdW1lbnQ7XG5cdH1cblxuXHQvLyBVcGRhdGUgZ2xvYmFsIHZhcmlhYmxlc1xuXHRkb2N1bWVudCA9IGRvYztcblx0ZG9jRWxlbSA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcblx0ZG9jdW1lbnRJc0hUTUwgPSAhaXNYTUwoIGRvY3VtZW50ICk7XG5cblx0Ly8gU3VwcG9ydDogSUUgOS0xMSwgRWRnZVxuXHQvLyBBY2Nlc3NpbmcgaWZyYW1lIGRvY3VtZW50cyBhZnRlciB1bmxvYWQgdGhyb3dzIFwicGVybWlzc2lvbiBkZW5pZWRcIiBlcnJvcnMgKGpRdWVyeSAjMTM5MzYpXG5cdGlmICggcHJlZmVycmVkRG9jICE9PSBkb2N1bWVudCAmJlxuXHRcdChzdWJXaW5kb3cgPSBkb2N1bWVudC5kZWZhdWx0VmlldykgJiYgc3ViV2luZG93LnRvcCAhPT0gc3ViV2luZG93ICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgMTEsIEVkZ2Vcblx0XHRpZiAoIHN1YldpbmRvdy5hZGRFdmVudExpc3RlbmVyICkge1xuXHRcdFx0c3ViV2luZG93LmFkZEV2ZW50TGlzdGVuZXIoIFwidW5sb2FkXCIsIHVubG9hZEhhbmRsZXIsIGZhbHNlICk7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA5IC0gMTAgb25seVxuXHRcdH0gZWxzZSBpZiAoIHN1YldpbmRvdy5hdHRhY2hFdmVudCApIHtcblx0XHRcdHN1YldpbmRvdy5hdHRhY2hFdmVudCggXCJvbnVubG9hZFwiLCB1bmxvYWRIYW5kbGVyICk7XG5cdFx0fVxuXHR9XG5cblx0LyogQXR0cmlidXRlc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cblx0Ly8gU3VwcG9ydDogSUU8OFxuXHQvLyBWZXJpZnkgdGhhdCBnZXRBdHRyaWJ1dGUgcmVhbGx5IHJldHVybnMgYXR0cmlidXRlcyBhbmQgbm90IHByb3BlcnRpZXNcblx0Ly8gKGV4Y2VwdGluZyBJRTggYm9vbGVhbnMpXG5cdHN1cHBvcnQuYXR0cmlidXRlcyA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZWwuY2xhc3NOYW1lID0gXCJpXCI7XG5cdFx0cmV0dXJuICFlbC5nZXRBdHRyaWJ1dGUoXCJjbGFzc05hbWVcIik7XG5cdH0pO1xuXG5cdC8qIGdldEVsZW1lbnQocylCeSpcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIENoZWNrIGlmIGdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSByZXR1cm5zIG9ubHkgZWxlbWVudHNcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5VGFnTmFtZSA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0ZWwuYXBwZW5kQ2hpbGQoIGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIikgKTtcblx0XHRyZXR1cm4gIWVsLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKS5sZW5ndGg7XG5cdH0pO1xuXG5cdC8vIFN1cHBvcnQ6IElFPDlcblx0c3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lID0gcm5hdGl2ZS50ZXN0KCBkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICk7XG5cblx0Ly8gU3VwcG9ydDogSUU8MTBcblx0Ly8gQ2hlY2sgaWYgZ2V0RWxlbWVudEJ5SWQgcmV0dXJucyBlbGVtZW50cyBieSBuYW1lXG5cdC8vIFRoZSBicm9rZW4gZ2V0RWxlbWVudEJ5SWQgbWV0aG9kcyBkb24ndCBwaWNrIHVwIHByb2dyYW1tYXRpY2FsbHktc2V0IG5hbWVzLFxuXHQvLyBzbyB1c2UgYSByb3VuZGFib3V0IGdldEVsZW1lbnRzQnlOYW1lIHRlc3Rcblx0c3VwcG9ydC5nZXRCeUlkID0gYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmlkID0gZXhwYW5kbztcblx0XHRyZXR1cm4gIWRvY3VtZW50LmdldEVsZW1lbnRzQnlOYW1lIHx8ICFkb2N1bWVudC5nZXRFbGVtZW50c0J5TmFtZSggZXhwYW5kbyApLmxlbmd0aDtcblx0fSk7XG5cblx0Ly8gSUQgZmlsdGVyIGFuZCBmaW5kXG5cdGlmICggc3VwcG9ydC5nZXRCeUlkICkge1xuXHRcdEV4cHIuZmlsdGVyW1wiSURcIl0gPSBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKFwiaWRcIikgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblx0XHRFeHByLmZpbmRbXCJJRFwiXSA9IGZ1bmN0aW9uKCBpZCwgY29udGV4dCApIHtcblx0XHRcdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQgIT09IFwidW5kZWZpbmVkXCIgJiYgZG9jdW1lbnRJc0hUTUwgKSB7XG5cdFx0XHRcdHZhciBlbGVtID0gY29udGV4dC5nZXRFbGVtZW50QnlJZCggaWQgKTtcblx0XHRcdFx0cmV0dXJuIGVsZW0gPyBbIGVsZW0gXSA6IFtdO1xuXHRcdFx0fVxuXHRcdH07XG5cdH0gZWxzZSB7XG5cdFx0RXhwci5maWx0ZXJbXCJJRFwiXSA9ICBmdW5jdGlvbiggaWQgKSB7XG5cdFx0XHR2YXIgYXR0cklkID0gaWQucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIG5vZGUgPSB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGVOb2RlICE9PSBcInVuZGVmaW5lZFwiICYmXG5cdFx0XHRcdFx0ZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdHJldHVybiBub2RlICYmIG5vZGUudmFsdWUgPT09IGF0dHJJZDtcblx0XHRcdH07XG5cdFx0fTtcblxuXHRcdC8vIFN1cHBvcnQ6IElFIDYgLSA3IG9ubHlcblx0XHQvLyBnZXRFbGVtZW50QnlJZCBpcyBub3QgcmVsaWFibGUgYXMgYSBmaW5kIHNob3J0Y3V0XG5cdFx0RXhwci5maW5kW1wiSURcIl0gPSBmdW5jdGlvbiggaWQsIGNvbnRleHQgKSB7XG5cdFx0XHRpZiAoIHR5cGVvZiBjb250ZXh0LmdldEVsZW1lbnRCeUlkICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0XHR2YXIgbm9kZSwgaSwgZWxlbXMsXG5cdFx0XHRcdFx0ZWxlbSA9IGNvbnRleHQuZ2V0RWxlbWVudEJ5SWQoIGlkICk7XG5cblx0XHRcdFx0aWYgKCBlbGVtICkge1xuXG5cdFx0XHRcdFx0Ly8gVmVyaWZ5IHRoZSBpZCBhdHRyaWJ1dGVcblx0XHRcdFx0XHRub2RlID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdFx0aWYgKCBub2RlICYmIG5vZGUudmFsdWUgPT09IGlkICkge1xuXHRcdFx0XHRcdFx0cmV0dXJuIFsgZWxlbSBdO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8vIEZhbGwgYmFjayBvbiBnZXRFbGVtZW50c0J5TmFtZVxuXHRcdFx0XHRcdGVsZW1zID0gY29udGV4dC5nZXRFbGVtZW50c0J5TmFtZSggaWQgKTtcblx0XHRcdFx0XHRpID0gMDtcblx0XHRcdFx0XHR3aGlsZSAoIChlbGVtID0gZWxlbXNbaSsrXSkgKSB7XG5cdFx0XHRcdFx0XHRub2RlID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKFwiaWRcIik7XG5cdFx0XHRcdFx0XHRpZiAoIG5vZGUgJiYgbm9kZS52YWx1ZSA9PT0gaWQgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBbIGVsZW0gXTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gW107XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxuXG5cdC8vIFRhZ1xuXHRFeHByLmZpbmRbXCJUQUdcIl0gPSBzdXBwb3J0LmdldEVsZW1lbnRzQnlUYWdOYW1lID9cblx0XHRmdW5jdGlvbiggdGFnLCBjb250ZXh0ICkge1xuXHRcdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoIHRhZyApO1xuXG5cdFx0XHQvLyBEb2N1bWVudEZyYWdtZW50IG5vZGVzIGRvbid0IGhhdmUgZ0VCVE5cblx0XHRcdH0gZWxzZSBpZiAoIHN1cHBvcnQucXNhICkge1xuXHRcdFx0XHRyZXR1cm4gY29udGV4dC5xdWVyeVNlbGVjdG9yQWxsKCB0YWcgKTtcblx0XHRcdH1cblx0XHR9IDpcblxuXHRcdGZ1bmN0aW9uKCB0YWcsIGNvbnRleHQgKSB7XG5cdFx0XHR2YXIgZWxlbSxcblx0XHRcdFx0dG1wID0gW10sXG5cdFx0XHRcdGkgPSAwLFxuXHRcdFx0XHQvLyBCeSBoYXBweSBjb2luY2lkZW5jZSwgYSAoYnJva2VuKSBnRUJUTiBhcHBlYXJzIG9uIERvY3VtZW50RnJhZ21lbnQgbm9kZXMgdG9vXG5cdFx0XHRcdHJlc3VsdHMgPSBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKCB0YWcgKTtcblxuXHRcdFx0Ly8gRmlsdGVyIG91dCBwb3NzaWJsZSBjb21tZW50c1xuXHRcdFx0aWYgKCB0YWcgPT09IFwiKlwiICkge1xuXHRcdFx0XHR3aGlsZSAoIChlbGVtID0gcmVzdWx0c1tpKytdKSApIHtcblx0XHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0XHRcdFx0XHR0bXAucHVzaCggZWxlbSApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB0bXA7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gcmVzdWx0cztcblx0XHR9O1xuXG5cdC8vIENsYXNzXG5cdEV4cHIuZmluZFtcIkNMQVNTXCJdID0gc3VwcG9ydC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICYmIGZ1bmN0aW9uKCBjbGFzc05hbWUsIGNvbnRleHQgKSB7XG5cdFx0aWYgKCB0eXBlb2YgY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lICE9PSBcInVuZGVmaW5lZFwiICYmIGRvY3VtZW50SXNIVE1MICkge1xuXHRcdFx0cmV0dXJuIGNvbnRleHQuZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSggY2xhc3NOYW1lICk7XG5cdFx0fVxuXHR9O1xuXG5cdC8qIFFTQS9tYXRjaGVzU2VsZWN0b3Jcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIFFTQSBhbmQgbWF0Y2hlc1NlbGVjdG9yIHN1cHBvcnRcblxuXHQvLyBtYXRjaGVzU2VsZWN0b3IoOmFjdGl2ZSkgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKElFOS9PcGVyYSAxMS41KVxuXHRyYnVnZ3lNYXRjaGVzID0gW107XG5cblx0Ly8gcVNhKDpmb2N1cykgcmVwb3J0cyBmYWxzZSB3aGVuIHRydWUgKENocm9tZSAyMSlcblx0Ly8gV2UgYWxsb3cgdGhpcyBiZWNhdXNlIG9mIGEgYnVnIGluIElFOC85IHRoYXQgdGhyb3dzIGFuIGVycm9yXG5cdC8vIHdoZW5ldmVyIGBkb2N1bWVudC5hY3RpdmVFbGVtZW50YCBpcyBhY2Nlc3NlZCBvbiBhbiBpZnJhbWVcblx0Ly8gU28sIHdlIGFsbG93IDpmb2N1cyB0byBwYXNzIHRocm91Z2ggUVNBIGFsbCB0aGUgdGltZSB0byBhdm9pZCB0aGUgSUUgZXJyb3Jcblx0Ly8gU2VlIGh0dHBzOi8vYnVncy5qcXVlcnkuY29tL3RpY2tldC8xMzM3OFxuXHRyYnVnZ3lRU0EgPSBbXTtcblxuXHRpZiAoIChzdXBwb3J0LnFzYSA9IHJuYXRpdmUudGVzdCggZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCApKSApIHtcblx0XHQvLyBCdWlsZCBRU0EgcmVnZXhcblx0XHQvLyBSZWdleCBzdHJhdGVneSBhZG9wdGVkIGZyb20gRGllZ28gUGVyaW5pXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRcdC8vIFNlbGVjdCBpcyBzZXQgdG8gZW1wdHkgc3RyaW5nIG9uIHB1cnBvc2Vcblx0XHRcdC8vIFRoaXMgaXMgdG8gdGVzdCBJRSdzIHRyZWF0bWVudCBvZiBub3QgZXhwbGljaXRseVxuXHRcdFx0Ly8gc2V0dGluZyBhIGJvb2xlYW4gY29udGVudCBhdHRyaWJ1dGUsXG5cdFx0XHQvLyBzaW5jZSBpdHMgcHJlc2VuY2Ugc2hvdWxkIGJlIGVub3VnaFxuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLmpxdWVyeS5jb20vdGlja2V0LzEyMzU5XG5cdFx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmlubmVySFRNTCA9IFwiPGEgaWQ9J1wiICsgZXhwYW5kbyArIFwiJz48L2E+XCIgK1xuXHRcdFx0XHRcIjxzZWxlY3QgaWQ9J1wiICsgZXhwYW5kbyArIFwiLVxcclxcXFwnIG1zYWxsb3djYXB0dXJlPScnPlwiICtcblx0XHRcdFx0XCI8b3B0aW9uIHNlbGVjdGVkPScnPjwvb3B0aW9uPjwvc2VsZWN0PlwiO1xuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRTgsIE9wZXJhIDExLTEyLjE2XG5cdFx0XHQvLyBOb3RoaW5nIHNob3VsZCBiZSBzZWxlY3RlZCB3aGVuIGVtcHR5IHN0cmluZ3MgZm9sbG93IF49IG9yICQ9IG9yICo9XG5cdFx0XHQvLyBUaGUgdGVzdCBhdHRyaWJ1dGUgbXVzdCBiZSB1bmtub3duIGluIE9wZXJhIGJ1dCBcInNhZmVcIiBmb3IgV2luUlRcblx0XHRcdC8vIGh0dHBzOi8vbXNkbi5taWNyb3NvZnQuY29tL2VuLXVzL2xpYnJhcnkvaWUvaGg0NjUzODguYXNweCNhdHRyaWJ1dGVfc2VjdGlvblxuXHRcdFx0aWYgKCBlbC5xdWVyeVNlbGVjdG9yQWxsKFwiW21zYWxsb3djYXB0dXJlXj0nJ11cIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaCggXCJbKl4kXT1cIiArIHdoaXRlc3BhY2UgKyBcIiooPzonJ3xcXFwiXFxcIilcIiApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRThcblx0XHRcdC8vIEJvb2xlYW4gYXR0cmlidXRlcyBhbmQgXCJ2YWx1ZVwiIGFyZSBub3QgdHJlYXRlZCBjb3JyZWN0bHlcblx0XHRcdGlmICggIWVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbc2VsZWN0ZWRdXCIpLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goIFwiXFxcXFtcIiArIHdoaXRlc3BhY2UgKyBcIiooPzp2YWx1ZXxcIiArIGJvb2xlYW5zICsgXCIpXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogQ2hyb21lPDI5LCBBbmRyb2lkPDQuNCwgU2FmYXJpPDcuMCssIGlPUzw3LjArLCBQaGFudG9tSlM8MS45LjgrXG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKCBcIltpZH49XCIgKyBleHBhbmRvICsgXCItXVwiICkubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIn49XCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBXZWJraXQvT3BlcmEgLSA6Y2hlY2tlZCBzaG91bGQgcmV0dXJuIHNlbGVjdGVkIG9wdGlvbiBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoICFlbC5xdWVyeVNlbGVjdG9yQWxsKFwiOmNoZWNrZWRcIikubGVuZ3RoICkge1xuXHRcdFx0XHRyYnVnZ3lRU0EucHVzaChcIjpjaGVja2VkXCIpO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgOCssIGlPUyA4K1xuXHRcdFx0Ly8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNjg1MVxuXHRcdFx0Ly8gSW4tcGFnZSBgc2VsZWN0b3IjaWQgc2libGluZy1jb21iaW5hdG9yIHNlbGVjdG9yYCBmYWlsc1xuXHRcdFx0aWYgKCAhZWwucXVlcnlTZWxlY3RvckFsbCggXCJhI1wiICsgZXhwYW5kbyArIFwiKypcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIuIy4rWyt+XVwiKTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdFx0XHRlbC5pbm5lckhUTUwgPSBcIjxhIGhyZWY9JycgZGlzYWJsZWQ9J2Rpc2FibGVkJz48L2E+XCIgK1xuXHRcdFx0XHRcIjxzZWxlY3QgZGlzYWJsZWQ9J2Rpc2FibGVkJz48b3B0aW9uLz48L3NlbGVjdD5cIjtcblxuXHRcdFx0Ly8gU3VwcG9ydDogV2luZG93cyA4IE5hdGl2ZSBBcHBzXG5cdFx0XHQvLyBUaGUgdHlwZSBhbmQgbmFtZSBhdHRyaWJ1dGVzIGFyZSByZXN0cmljdGVkIGR1cmluZyAuaW5uZXJIVE1MIGFzc2lnbm1lbnRcblx0XHRcdHZhciBpbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbnB1dFwiKTtcblx0XHRcdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwiaGlkZGVuXCIgKTtcblx0XHRcdGVsLmFwcGVuZENoaWxkKCBpbnB1dCApLnNldEF0dHJpYnV0ZSggXCJuYW1lXCIsIFwiRFwiICk7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IElFOFxuXHRcdFx0Ly8gRW5mb3JjZSBjYXNlLXNlbnNpdGl2aXR5IG9mIG5hbWUgYXR0cmlidXRlXG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCJbbmFtZT1kXVwiKS5sZW5ndGggKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIm5hbWVcIiArIHdoaXRlc3BhY2UgKyBcIipbKl4kfCF+XT89XCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gRkYgMy41IC0gOmVuYWJsZWQvOmRpc2FibGVkIGFuZCBoaWRkZW4gZWxlbWVudHMgKGhpZGRlbiBlbGVtZW50cyBhcmUgc3RpbGwgZW5hYmxlZClcblx0XHRcdC8vIElFOCB0aHJvd3MgZXJyb3IgaGVyZSBhbmQgd2lsbCBub3Qgc2VlIGxhdGVyIHRlc3RzXG5cdFx0XHRpZiAoIGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCI6ZW5hYmxlZFwiKS5sZW5ndGggIT09IDIgKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3VwcG9ydDogSUU5LTExK1xuXHRcdFx0Ly8gSUUncyA6ZGlzYWJsZWQgc2VsZWN0b3IgZG9lcyBub3QgcGljayB1cCB0aGUgY2hpbGRyZW4gb2YgZGlzYWJsZWQgZmllbGRzZXRzXG5cdFx0XHRkb2NFbGVtLmFwcGVuZENoaWxkKCBlbCApLmRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdGlmICggZWwucXVlcnlTZWxlY3RvckFsbChcIjpkaXNhYmxlZFwiKS5sZW5ndGggIT09IDIgKSB7XG5cdFx0XHRcdHJidWdneVFTQS5wdXNoKCBcIjplbmFibGVkXCIsIFwiOmRpc2FibGVkXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT3BlcmEgMTAtMTEgZG9lcyBub3QgdGhyb3cgb24gcG9zdC1jb21tYSBpbnZhbGlkIHBzZXVkb3Ncblx0XHRcdGVsLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqLDp4XCIpO1xuXHRcdFx0cmJ1Z2d5UVNBLnB1c2goXCIsLio6XCIpO1xuXHRcdH0pO1xuXHR9XG5cblx0aWYgKCAoc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgPSBybmF0aXZlLnRlc3QoIChtYXRjaGVzID0gZG9jRWxlbS5tYXRjaGVzIHx8XG5cdFx0ZG9jRWxlbS53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHxcblx0XHRkb2NFbGVtLm1vek1hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ub01hdGNoZXNTZWxlY3RvciB8fFxuXHRcdGRvY0VsZW0ubXNNYXRjaGVzU2VsZWN0b3IpICkpICkge1xuXG5cdFx0YXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0XHRcdC8vIENoZWNrIHRvIHNlZSBpZiBpdCdzIHBvc3NpYmxlIHRvIGRvIG1hdGNoZXNTZWxlY3RvclxuXHRcdFx0Ly8gb24gYSBkaXNjb25uZWN0ZWQgbm9kZSAoSUUgOSlcblx0XHRcdHN1cHBvcnQuZGlzY29ubmVjdGVkTWF0Y2ggPSBtYXRjaGVzLmNhbGwoIGVsLCBcIipcIiApO1xuXG5cdFx0XHQvLyBUaGlzIHNob3VsZCBmYWlsIHdpdGggYW4gZXhjZXB0aW9uXG5cdFx0XHQvLyBHZWNrbyBkb2VzIG5vdCBlcnJvciwgcmV0dXJucyBmYWxzZSBpbnN0ZWFkXG5cdFx0XHRtYXRjaGVzLmNhbGwoIGVsLCBcIltzIT0nJ106eFwiICk7XG5cdFx0XHRyYnVnZ3lNYXRjaGVzLnB1c2goIFwiIT1cIiwgcHNldWRvcyApO1xuXHRcdH0pO1xuXHR9XG5cblx0cmJ1Z2d5UVNBID0gcmJ1Z2d5UVNBLmxlbmd0aCAmJiBuZXcgUmVnRXhwKCByYnVnZ3lRU0Euam9pbihcInxcIikgKTtcblx0cmJ1Z2d5TWF0Y2hlcyA9IHJidWdneU1hdGNoZXMubGVuZ3RoICYmIG5ldyBSZWdFeHAoIHJidWdneU1hdGNoZXMuam9pbihcInxcIikgKTtcblxuXHQvKiBDb250YWluc1xuXHQtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tICovXG5cdGhhc0NvbXBhcmUgPSBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29tcGFyZURvY3VtZW50UG9zaXRpb24gKTtcblxuXHQvLyBFbGVtZW50IGNvbnRhaW5zIGFub3RoZXJcblx0Ly8gUHVycG9zZWZ1bGx5IHNlbGYtZXhjbHVzaXZlXG5cdC8vIEFzIGluLCBhbiBlbGVtZW50IGRvZXMgbm90IGNvbnRhaW4gaXRzZWxmXG5cdGNvbnRhaW5zID0gaGFzQ29tcGFyZSB8fCBybmF0aXZlLnRlc3QoIGRvY0VsZW0uY29udGFpbnMgKSA/XG5cdFx0ZnVuY3Rpb24oIGEsIGIgKSB7XG5cdFx0XHR2YXIgYWRvd24gPSBhLm5vZGVUeXBlID09PSA5ID8gYS5kb2N1bWVudEVsZW1lbnQgOiBhLFxuXHRcdFx0XHRidXAgPSBiICYmIGIucGFyZW50Tm9kZTtcblx0XHRcdHJldHVybiBhID09PSBidXAgfHwgISEoIGJ1cCAmJiBidXAubm9kZVR5cGUgPT09IDEgJiYgKFxuXHRcdFx0XHRhZG93bi5jb250YWlucyA/XG5cdFx0XHRcdFx0YWRvd24uY29udGFpbnMoIGJ1cCApIDpcblx0XHRcdFx0XHRhLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uICYmIGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGJ1cCApICYgMTZcblx0XHRcdCkpO1xuXHRcdH0gOlxuXHRcdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdFx0aWYgKCBiICkge1xuXHRcdFx0XHR3aGlsZSAoIChiID0gYi5wYXJlbnROb2RlKSApIHtcblx0XHRcdFx0XHRpZiAoIGIgPT09IGEgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9O1xuXG5cdC8qIFNvcnRpbmdcblx0LS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqL1xuXG5cdC8vIERvY3VtZW50IG9yZGVyIHNvcnRpbmdcblx0c29ydE9yZGVyID0gaGFzQ29tcGFyZSA/XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXG5cdFx0Ly8gRmxhZyBmb3IgZHVwbGljYXRlIHJlbW92YWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0Ly8gU29ydCBvbiBtZXRob2QgZXhpc3RlbmNlIGlmIG9ubHkgb25lIGlucHV0IGhhcyBjb21wYXJlRG9jdW1lbnRQb3NpdGlvblxuXHRcdHZhciBjb21wYXJlID0gIWEuY29tcGFyZURvY3VtZW50UG9zaXRpb24gLSAhYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbjtcblx0XHRpZiAoIGNvbXBhcmUgKSB7XG5cdFx0XHRyZXR1cm4gY29tcGFyZTtcblx0XHR9XG5cblx0XHQvLyBDYWxjdWxhdGUgcG9zaXRpb24gaWYgYm90aCBpbnB1dHMgYmVsb25nIHRvIHRoZSBzYW1lIGRvY3VtZW50XG5cdFx0Y29tcGFyZSA9ICggYS5vd25lckRvY3VtZW50IHx8IGEgKSA9PT0gKCBiLm93bmVyRG9jdW1lbnQgfHwgYiApID9cblx0XHRcdGEuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGIgKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSB3ZSBrbm93IHRoZXkgYXJlIGRpc2Nvbm5lY3RlZFxuXHRcdFx0MTtcblxuXHRcdC8vIERpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdGlmICggY29tcGFyZSAmIDEgfHxcblx0XHRcdCghc3VwcG9ydC5zb3J0RGV0YWNoZWQgJiYgYi5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiggYSApID09PSBjb21wYXJlKSApIHtcblxuXHRcdFx0Ly8gQ2hvb3NlIHRoZSBmaXJzdCBlbGVtZW50IHRoYXQgaXMgcmVsYXRlZCB0byBvdXIgcHJlZmVycmVkIGRvY3VtZW50XG5cdFx0XHRpZiAoIGEgPT09IGRvY3VtZW50IHx8IGEub3duZXJEb2N1bWVudCA9PT0gcHJlZmVycmVkRG9jICYmIGNvbnRhaW5zKHByZWZlcnJlZERvYywgYSkgKSB7XG5cdFx0XHRcdHJldHVybiAtMTtcblx0XHRcdH1cblx0XHRcdGlmICggYiA9PT0gZG9jdW1lbnQgfHwgYi5vd25lckRvY3VtZW50ID09PSBwcmVmZXJyZWREb2MgJiYgY29udGFpbnMocHJlZmVycmVkRG9jLCBiKSApIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1haW50YWluIG9yaWdpbmFsIG9yZGVyXG5cdFx0XHRyZXR1cm4gc29ydElucHV0ID9cblx0XHRcdFx0KCBpbmRleE9mKCBzb3J0SW5wdXQsIGEgKSAtIGluZGV4T2YoIHNvcnRJbnB1dCwgYiApICkgOlxuXHRcdFx0XHQwO1xuXHRcdH1cblxuXHRcdHJldHVybiBjb21wYXJlICYgNCA/IC0xIDogMTtcblx0fSA6XG5cdGZ1bmN0aW9uKCBhLCBiICkge1xuXHRcdC8vIEV4aXQgZWFybHkgaWYgdGhlIG5vZGVzIGFyZSBpZGVudGljYWxcblx0XHRpZiAoIGEgPT09IGIgKSB7XG5cdFx0XHRoYXNEdXBsaWNhdGUgPSB0cnVlO1xuXHRcdFx0cmV0dXJuIDA7XG5cdFx0fVxuXG5cdFx0dmFyIGN1cixcblx0XHRcdGkgPSAwLFxuXHRcdFx0YXVwID0gYS5wYXJlbnROb2RlLFxuXHRcdFx0YnVwID0gYi5wYXJlbnROb2RlLFxuXHRcdFx0YXAgPSBbIGEgXSxcblx0XHRcdGJwID0gWyBiIF07XG5cblx0XHQvLyBQYXJlbnRsZXNzIG5vZGVzIGFyZSBlaXRoZXIgZG9jdW1lbnRzIG9yIGRpc2Nvbm5lY3RlZFxuXHRcdGlmICggIWF1cCB8fCAhYnVwICkge1xuXHRcdFx0cmV0dXJuIGEgPT09IGRvY3VtZW50ID8gLTEgOlxuXHRcdFx0XHRiID09PSBkb2N1bWVudCA/IDEgOlxuXHRcdFx0XHRhdXAgPyAtMSA6XG5cdFx0XHRcdGJ1cCA/IDEgOlxuXHRcdFx0XHRzb3J0SW5wdXQgP1xuXHRcdFx0XHQoIGluZGV4T2YoIHNvcnRJbnB1dCwgYSApIC0gaW5kZXhPZiggc29ydElucHV0LCBiICkgKSA6XG5cdFx0XHRcdDA7XG5cblx0XHQvLyBJZiB0aGUgbm9kZXMgYXJlIHNpYmxpbmdzLCB3ZSBjYW4gZG8gYSBxdWljayBjaGVja1xuXHRcdH0gZWxzZSBpZiAoIGF1cCA9PT0gYnVwICkge1xuXHRcdFx0cmV0dXJuIHNpYmxpbmdDaGVjayggYSwgYiApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSB3ZSBuZWVkIGZ1bGwgbGlzdHMgb2YgdGhlaXIgYW5jZXN0b3JzIGZvciBjb21wYXJpc29uXG5cdFx0Y3VyID0gYTtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRhcC51bnNoaWZ0KCBjdXIgKTtcblx0XHR9XG5cdFx0Y3VyID0gYjtcblx0XHR3aGlsZSAoIChjdXIgPSBjdXIucGFyZW50Tm9kZSkgKSB7XG5cdFx0XHRicC51bnNoaWZ0KCBjdXIgKTtcblx0XHR9XG5cblx0XHQvLyBXYWxrIGRvd24gdGhlIHRyZWUgbG9va2luZyBmb3IgYSBkaXNjcmVwYW5jeVxuXHRcdHdoaWxlICggYXBbaV0gPT09IGJwW2ldICkge1xuXHRcdFx0aSsrO1xuXHRcdH1cblxuXHRcdHJldHVybiBpID9cblx0XHRcdC8vIERvIGEgc2libGluZyBjaGVjayBpZiB0aGUgbm9kZXMgaGF2ZSBhIGNvbW1vbiBhbmNlc3RvclxuXHRcdFx0c2libGluZ0NoZWNrKCBhcFtpXSwgYnBbaV0gKSA6XG5cblx0XHRcdC8vIE90aGVyd2lzZSBub2RlcyBpbiBvdXIgZG9jdW1lbnQgc29ydCBmaXJzdFxuXHRcdFx0YXBbaV0gPT09IHByZWZlcnJlZERvYyA/IC0xIDpcblx0XHRcdGJwW2ldID09PSBwcmVmZXJyZWREb2MgPyAxIDpcblx0XHRcdDA7XG5cdH07XG5cblx0cmV0dXJuIGRvY3VtZW50O1xufTtcblxuU2l6emxlLm1hdGNoZXMgPSBmdW5jdGlvbiggZXhwciwgZWxlbWVudHMgKSB7XG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIG51bGwsIG51bGwsIGVsZW1lbnRzICk7XG59O1xuXG5TaXp6bGUubWF0Y2hlc1NlbGVjdG9yID0gZnVuY3Rpb24oIGVsZW0sIGV4cHIgKSB7XG5cdC8vIFNldCBkb2N1bWVudCB2YXJzIGlmIG5lZWRlZFxuXHRpZiAoICggZWxlbS5vd25lckRvY3VtZW50IHx8IGVsZW0gKSAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0c2V0RG9jdW1lbnQoIGVsZW0gKTtcblx0fVxuXG5cdGlmICggc3VwcG9ydC5tYXRjaGVzU2VsZWN0b3IgJiYgZG9jdW1lbnRJc0hUTUwgJiZcblx0XHQhbm9ubmF0aXZlU2VsZWN0b3JDYWNoZVsgZXhwciArIFwiIFwiIF0gJiZcblx0XHQoICFyYnVnZ3lNYXRjaGVzIHx8ICFyYnVnZ3lNYXRjaGVzLnRlc3QoIGV4cHIgKSApICYmXG5cdFx0KCAhcmJ1Z2d5UVNBICAgICB8fCAhcmJ1Z2d5UVNBLnRlc3QoIGV4cHIgKSApICkge1xuXG5cdFx0dHJ5IHtcblx0XHRcdHZhciByZXQgPSBtYXRjaGVzLmNhbGwoIGVsZW0sIGV4cHIgKTtcblxuXHRcdFx0Ly8gSUUgOSdzIG1hdGNoZXNTZWxlY3RvciByZXR1cm5zIGZhbHNlIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuXHRcdFx0aWYgKCByZXQgfHwgc3VwcG9ydC5kaXNjb25uZWN0ZWRNYXRjaCB8fFxuXHRcdFx0XHRcdC8vIEFzIHdlbGwsIGRpc2Nvbm5lY3RlZCBub2RlcyBhcmUgc2FpZCB0byBiZSBpbiBhIGRvY3VtZW50XG5cdFx0XHRcdFx0Ly8gZnJhZ21lbnQgaW4gSUUgOVxuXHRcdFx0XHRcdGVsZW0uZG9jdW1lbnQgJiYgZWxlbS5kb2N1bWVudC5ub2RlVHlwZSAhPT0gMTEgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cdFx0fSBjYXRjaCAoZSkge1xuXHRcdFx0bm9ubmF0aXZlU2VsZWN0b3JDYWNoZSggZXhwciwgdHJ1ZSApO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBTaXp6bGUoIGV4cHIsIGRvY3VtZW50LCBudWxsLCBbIGVsZW0gXSApLmxlbmd0aCA+IDA7XG59O1xuXG5TaXp6bGUuY29udGFpbnMgPSBmdW5jdGlvbiggY29udGV4dCwgZWxlbSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggY29udGV4dCApO1xuXHR9XG5cdHJldHVybiBjb250YWlucyggY29udGV4dCwgZWxlbSApO1xufTtcblxuU2l6emxlLmF0dHIgPSBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0Ly8gU2V0IGRvY3VtZW50IHZhcnMgaWYgbmVlZGVkXG5cdGlmICggKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZWxlbSApICE9PSBkb2N1bWVudCApIHtcblx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHR9XG5cblx0dmFyIGZuID0gRXhwci5hdHRySGFuZGxlWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSxcblx0XHQvLyBEb24ndCBnZXQgZm9vbGVkIGJ5IE9iamVjdC5wcm90b3R5cGUgcHJvcGVydGllcyAoalF1ZXJ5ICMxMzgwNylcblx0XHR2YWwgPSBmbiAmJiBoYXNPd24uY2FsbCggRXhwci5hdHRySGFuZGxlLCBuYW1lLnRvTG93ZXJDYXNlKCkgKSA/XG5cdFx0XHRmbiggZWxlbSwgbmFtZSwgIWRvY3VtZW50SXNIVE1MICkgOlxuXHRcdFx0dW5kZWZpbmVkO1xuXG5cdHJldHVybiB2YWwgIT09IHVuZGVmaW5lZCA/XG5cdFx0dmFsIDpcblx0XHRzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWRvY3VtZW50SXNIVE1MID9cblx0XHRcdGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lICkgOlxuXHRcdFx0KHZhbCA9IGVsZW0uZ2V0QXR0cmlidXRlTm9kZShuYW1lKSkgJiYgdmFsLnNwZWNpZmllZCA/XG5cdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG59O1xuXG5TaXp6bGUuZXNjYXBlID0gZnVuY3Rpb24oIHNlbCApIHtcblx0cmV0dXJuIChzZWwgKyBcIlwiKS5yZXBsYWNlKCByY3NzZXNjYXBlLCBmY3NzZXNjYXBlICk7XG59O1xuXG5TaXp6bGUuZXJyb3IgPSBmdW5jdGlvbiggbXNnICkge1xuXHR0aHJvdyBuZXcgRXJyb3IoIFwiU3ludGF4IGVycm9yLCB1bnJlY29nbml6ZWQgZXhwcmVzc2lvbjogXCIgKyBtc2cgKTtcbn07XG5cbi8qKlxuICogRG9jdW1lbnQgc29ydGluZyBhbmQgcmVtb3ZpbmcgZHVwbGljYXRlc1xuICogQHBhcmFtIHtBcnJheUxpa2V9IHJlc3VsdHNcbiAqL1xuU2l6emxlLnVuaXF1ZVNvcnQgPSBmdW5jdGlvbiggcmVzdWx0cyApIHtcblx0dmFyIGVsZW0sXG5cdFx0ZHVwbGljYXRlcyA9IFtdLFxuXHRcdGogPSAwLFxuXHRcdGkgPSAwO1xuXG5cdC8vIFVubGVzcyB3ZSAqa25vdyogd2UgY2FuIGRldGVjdCBkdXBsaWNhdGVzLCBhc3N1bWUgdGhlaXIgcHJlc2VuY2Vcblx0aGFzRHVwbGljYXRlID0gIXN1cHBvcnQuZGV0ZWN0RHVwbGljYXRlcztcblx0c29ydElucHV0ID0gIXN1cHBvcnQuc29ydFN0YWJsZSAmJiByZXN1bHRzLnNsaWNlKCAwICk7XG5cdHJlc3VsdHMuc29ydCggc29ydE9yZGVyICk7XG5cblx0aWYgKCBoYXNEdXBsaWNhdGUgKSB7XG5cdFx0d2hpbGUgKCAoZWxlbSA9IHJlc3VsdHNbaSsrXSkgKSB7XG5cdFx0XHRpZiAoIGVsZW0gPT09IHJlc3VsdHNbIGkgXSApIHtcblx0XHRcdFx0aiA9IGR1cGxpY2F0ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdH1cblx0XHR3aGlsZSAoIGotLSApIHtcblx0XHRcdHJlc3VsdHMuc3BsaWNlKCBkdXBsaWNhdGVzWyBqIF0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDbGVhciBpbnB1dCBhZnRlciBzb3J0aW5nIHRvIHJlbGVhc2Ugb2JqZWN0c1xuXHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2pxdWVyeS9zaXp6bGUvcHVsbC8yMjVcblx0c29ydElucHV0ID0gbnVsbDtcblxuXHRyZXR1cm4gcmVzdWx0cztcbn07XG5cbi8qKlxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cmlldmluZyB0aGUgdGV4dCB2YWx1ZSBvZiBhbiBhcnJheSBvZiBET00gbm9kZXNcbiAqIEBwYXJhbSB7QXJyYXl8RWxlbWVudH0gZWxlbVxuICovXG5nZXRUZXh0ID0gU2l6emxlLmdldFRleHQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0dmFyIG5vZGUsXG5cdFx0cmV0ID0gXCJcIixcblx0XHRpID0gMCxcblx0XHRub2RlVHlwZSA9IGVsZW0ubm9kZVR5cGU7XG5cblx0aWYgKCAhbm9kZVR5cGUgKSB7XG5cdFx0Ly8gSWYgbm8gbm9kZVR5cGUsIHRoaXMgaXMgZXhwZWN0ZWQgdG8gYmUgYW4gYXJyYXlcblx0XHR3aGlsZSAoIChub2RlID0gZWxlbVtpKytdKSApIHtcblx0XHRcdC8vIERvIG5vdCB0cmF2ZXJzZSBjb21tZW50IG5vZGVzXG5cdFx0XHRyZXQgKz0gZ2V0VGV4dCggbm9kZSApO1xuXHRcdH1cblx0fSBlbHNlIGlmICggbm9kZVR5cGUgPT09IDEgfHwgbm9kZVR5cGUgPT09IDkgfHwgbm9kZVR5cGUgPT09IDExICkge1xuXHRcdC8vIFVzZSB0ZXh0Q29udGVudCBmb3IgZWxlbWVudHNcblx0XHQvLyBpbm5lclRleHQgdXNhZ2UgcmVtb3ZlZCBmb3IgY29uc2lzdGVuY3kgb2YgbmV3IGxpbmVzIChqUXVlcnkgIzExMTUzKVxuXHRcdGlmICggdHlwZW9mIGVsZW0udGV4dENvbnRlbnQgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS50ZXh0Q29udGVudDtcblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gVHJhdmVyc2UgaXRzIGNoaWxkcmVuXG5cdFx0XHRmb3IgKCBlbGVtID0gZWxlbS5maXJzdENoaWxkOyBlbGVtOyBlbGVtID0gZWxlbS5uZXh0U2libGluZyApIHtcblx0XHRcdFx0cmV0ICs9IGdldFRleHQoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9XG5cdH0gZWxzZSBpZiAoIG5vZGVUeXBlID09PSAzIHx8IG5vZGVUeXBlID09PSA0ICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVWYWx1ZTtcblx0fVxuXHQvLyBEbyBub3QgaW5jbHVkZSBjb21tZW50IG9yIHByb2Nlc3NpbmcgaW5zdHJ1Y3Rpb24gbm9kZXNcblxuXHRyZXR1cm4gcmV0O1xufTtcblxuRXhwciA9IFNpenpsZS5zZWxlY3RvcnMgPSB7XG5cblx0Ly8gQ2FuIGJlIGFkanVzdGVkIGJ5IHRoZSB1c2VyXG5cdGNhY2hlTGVuZ3RoOiA1MCxcblxuXHRjcmVhdGVQc2V1ZG86IG1hcmtGdW5jdGlvbixcblxuXHRtYXRjaDogbWF0Y2hFeHByLFxuXG5cdGF0dHJIYW5kbGU6IHt9LFxuXG5cdGZpbmQ6IHt9LFxuXG5cdHJlbGF0aXZlOiB7XG5cdFx0XCI+XCI6IHsgZGlyOiBcInBhcmVudE5vZGVcIiwgZmlyc3Q6IHRydWUgfSxcblx0XHRcIiBcIjogeyBkaXI6IFwicGFyZW50Tm9kZVwiIH0sXG5cdFx0XCIrXCI6IHsgZGlyOiBcInByZXZpb3VzU2libGluZ1wiLCBmaXJzdDogdHJ1ZSB9LFxuXHRcdFwiflwiOiB7IGRpcjogXCJwcmV2aW91c1NpYmxpbmdcIiB9XG5cdH0sXG5cblx0cHJlRmlsdGVyOiB7XG5cdFx0XCJBVFRSXCI6IGZ1bmN0aW9uKCBtYXRjaCApIHtcblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0ucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0Ly8gTW92ZSB0aGUgZ2l2ZW4gdmFsdWUgdG8gbWF0Y2hbM10gd2hldGhlciBxdW90ZWQgb3IgdW5xdW90ZWRcblx0XHRcdG1hdGNoWzNdID0gKCBtYXRjaFszXSB8fCBtYXRjaFs0XSB8fCBtYXRjaFs1XSB8fCBcIlwiICkucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsyXSA9PT0gXCJ+PVwiICkge1xuXHRcdFx0XHRtYXRjaFszXSA9IFwiIFwiICsgbWF0Y2hbM10gKyBcIiBcIjtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCA0ICk7XG5cdFx0fSxcblxuXHRcdFwiQ0hJTERcIjogZnVuY3Rpb24oIG1hdGNoICkge1xuXHRcdFx0LyogbWF0Y2hlcyBmcm9tIG1hdGNoRXhwcltcIkNISUxEXCJdXG5cdFx0XHRcdDEgdHlwZSAob25seXxudGh8Li4uKVxuXHRcdFx0XHQyIHdoYXQgKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdDMgYXJndW1lbnQgKGV2ZW58b2RkfFxcZCp8XFxkKm4oWystXVxcZCspP3wuLi4pXG5cdFx0XHRcdDQgeG4tY29tcG9uZW50IG9mIHhuK3kgYXJndW1lbnQgKFsrLV0/XFxkKm58KVxuXHRcdFx0XHQ1IHNpZ24gb2YgeG4tY29tcG9uZW50XG5cdFx0XHRcdDYgeCBvZiB4bi1jb21wb25lbnRcblx0XHRcdFx0NyBzaWduIG9mIHktY29tcG9uZW50XG5cdFx0XHRcdDggeSBvZiB5LWNvbXBvbmVudFxuXHRcdFx0Ki9cblx0XHRcdG1hdGNoWzFdID0gbWF0Y2hbMV0udG9Mb3dlckNhc2UoKTtcblxuXHRcdFx0aWYgKCBtYXRjaFsxXS5zbGljZSggMCwgMyApID09PSBcIm50aFwiICkge1xuXHRcdFx0XHQvLyBudGgtKiByZXF1aXJlcyBhcmd1bWVudFxuXHRcdFx0XHRpZiAoICFtYXRjaFszXSApIHtcblx0XHRcdFx0XHRTaXp6bGUuZXJyb3IoIG1hdGNoWzBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBudW1lcmljIHggYW5kIHkgcGFyYW1ldGVycyBmb3IgRXhwci5maWx0ZXIuQ0hJTERcblx0XHRcdFx0Ly8gcmVtZW1iZXIgdGhhdCBmYWxzZS90cnVlIGNhc3QgcmVzcGVjdGl2ZWx5IHRvIDAvMVxuXHRcdFx0XHRtYXRjaFs0XSA9ICsoIG1hdGNoWzRdID8gbWF0Y2hbNV0gKyAobWF0Y2hbNl0gfHwgMSkgOiAyICogKCBtYXRjaFszXSA9PT0gXCJldmVuXCIgfHwgbWF0Y2hbM10gPT09IFwib2RkXCIgKSApO1xuXHRcdFx0XHRtYXRjaFs1XSA9ICsoICggbWF0Y2hbN10gKyBtYXRjaFs4XSApIHx8IG1hdGNoWzNdID09PSBcIm9kZFwiICk7XG5cblx0XHRcdC8vIG90aGVyIHR5cGVzIHByb2hpYml0IGFyZ3VtZW50c1xuXHRcdFx0fSBlbHNlIGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdFNpenpsZS5lcnJvciggbWF0Y2hbMF0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG1hdGNoO1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggbWF0Y2ggKSB7XG5cdFx0XHR2YXIgZXhjZXNzLFxuXHRcdFx0XHR1bnF1b3RlZCA9ICFtYXRjaFs2XSAmJiBtYXRjaFsyXTtcblxuXHRcdFx0aWYgKCBtYXRjaEV4cHJbXCJDSElMRFwiXS50ZXN0KCBtYXRjaFswXSApICkge1xuXHRcdFx0XHRyZXR1cm4gbnVsbDtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQWNjZXB0IHF1b3RlZCBhcmd1bWVudHMgYXMtaXNcblx0XHRcdGlmICggbWF0Y2hbM10gKSB7XG5cdFx0XHRcdG1hdGNoWzJdID0gbWF0Y2hbNF0gfHwgbWF0Y2hbNV0gfHwgXCJcIjtcblxuXHRcdFx0Ly8gU3RyaXAgZXhjZXNzIGNoYXJhY3RlcnMgZnJvbSB1bnF1b3RlZCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHVucXVvdGVkICYmIHJwc2V1ZG8udGVzdCggdW5xdW90ZWQgKSAmJlxuXHRcdFx0XHQvLyBHZXQgZXhjZXNzIGZyb20gdG9rZW5pemUgKHJlY3Vyc2l2ZWx5KVxuXHRcdFx0XHQoZXhjZXNzID0gdG9rZW5pemUoIHVucXVvdGVkLCB0cnVlICkpICYmXG5cdFx0XHRcdC8vIGFkdmFuY2UgdG8gdGhlIG5leHQgY2xvc2luZyBwYXJlbnRoZXNpc1xuXHRcdFx0XHQoZXhjZXNzID0gdW5xdW90ZWQuaW5kZXhPZiggXCIpXCIsIHVucXVvdGVkLmxlbmd0aCAtIGV4Y2VzcyApIC0gdW5xdW90ZWQubGVuZ3RoKSApIHtcblxuXHRcdFx0XHQvLyBleGNlc3MgaXMgYSBuZWdhdGl2ZSBpbmRleFxuXHRcdFx0XHRtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwLCBleGNlc3MgKTtcblx0XHRcdFx0bWF0Y2hbMl0gPSB1bnF1b3RlZC5zbGljZSggMCwgZXhjZXNzICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldHVybiBvbmx5IGNhcHR1cmVzIG5lZWRlZCBieSB0aGUgcHNldWRvIGZpbHRlciBtZXRob2QgKHR5cGUgYW5kIGFyZ3VtZW50KVxuXHRcdFx0cmV0dXJuIG1hdGNoLnNsaWNlKCAwLCAzICk7XG5cdFx0fVxuXHR9LFxuXG5cdGZpbHRlcjoge1xuXG5cdFx0XCJUQUdcIjogZnVuY3Rpb24oIG5vZGVOYW1lU2VsZWN0b3IgKSB7XG5cdFx0XHR2YXIgbm9kZU5hbWUgPSBub2RlTmFtZVNlbGVjdG9yLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICkudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiBub2RlTmFtZVNlbGVjdG9yID09PSBcIipcIiA/XG5cdFx0XHRcdGZ1bmN0aW9uKCkgeyByZXR1cm4gdHJ1ZTsgfSA6XG5cdFx0XHRcdGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lICYmIGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbm9kZU5hbWU7XG5cdFx0XHRcdH07XG5cdFx0fSxcblxuXHRcdFwiQ0xBU1NcIjogZnVuY3Rpb24oIGNsYXNzTmFtZSApIHtcblx0XHRcdHZhciBwYXR0ZXJuID0gY2xhc3NDYWNoZVsgY2xhc3NOYW1lICsgXCIgXCIgXTtcblxuXHRcdFx0cmV0dXJuIHBhdHRlcm4gfHxcblx0XHRcdFx0KHBhdHRlcm4gPSBuZXcgUmVnRXhwKCBcIihefFwiICsgd2hpdGVzcGFjZSArIFwiKVwiICsgY2xhc3NOYW1lICsgXCIoXCIgKyB3aGl0ZXNwYWNlICsgXCJ8JClcIiApKSAmJlxuXHRcdFx0XHRjbGFzc0NhY2hlKCBjbGFzc05hbWUsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHRcdHJldHVybiBwYXR0ZXJuLnRlc3QoIHR5cGVvZiBlbGVtLmNsYXNzTmFtZSA9PT0gXCJzdHJpbmdcIiAmJiBlbGVtLmNsYXNzTmFtZSB8fCB0eXBlb2YgZWxlbS5nZXRBdHRyaWJ1dGUgIT09IFwidW5kZWZpbmVkXCIgJiYgZWxlbS5nZXRBdHRyaWJ1dGUoXCJjbGFzc1wiKSB8fCBcIlwiICk7XG5cdFx0XHRcdH0pO1xuXHRcdH0sXG5cblx0XHRcIkFUVFJcIjogZnVuY3Rpb24oIG5hbWUsIG9wZXJhdG9yLCBjaGVjayApIHtcblx0XHRcdHJldHVybiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdFx0dmFyIHJlc3VsdCA9IFNpenpsZS5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHRcdFx0aWYgKCByZXN1bHQgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRyZXR1cm4gb3BlcmF0b3IgPT09IFwiIT1cIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoICFvcGVyYXRvciApIHtcblx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJlc3VsdCArPSBcIlwiO1xuXG5cdFx0XHRcdHJldHVybiBvcGVyYXRvciA9PT0gXCI9XCIgPyByZXN1bHQgPT09IGNoZWNrIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIhPVwiID8gcmVzdWx0ICE9PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiXj1cIiA/IGNoZWNrICYmIHJlc3VsdC5pbmRleE9mKCBjaGVjayApID09PSAwIDpcblx0XHRcdFx0XHRvcGVyYXRvciA9PT0gXCIqPVwiID8gY2hlY2sgJiYgcmVzdWx0LmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwiJD1cIiA/IGNoZWNrICYmIHJlc3VsdC5zbGljZSggLWNoZWNrLmxlbmd0aCApID09PSBjaGVjayA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifj1cIiA/ICggXCIgXCIgKyByZXN1bHQucmVwbGFjZSggcndoaXRlc3BhY2UsIFwiIFwiICkgKyBcIiBcIiApLmluZGV4T2YoIGNoZWNrICkgPiAtMSA6XG5cdFx0XHRcdFx0b3BlcmF0b3IgPT09IFwifD1cIiA/IHJlc3VsdCA9PT0gY2hlY2sgfHwgcmVzdWx0LnNsaWNlKCAwLCBjaGVjay5sZW5ndGggKyAxICkgPT09IGNoZWNrICsgXCItXCIgOlxuXHRcdFx0XHRcdGZhbHNlO1xuXHRcdFx0fTtcblx0XHR9LFxuXG5cdFx0XCJDSElMRFwiOiBmdW5jdGlvbiggdHlwZSwgd2hhdCwgYXJndW1lbnQsIGZpcnN0LCBsYXN0ICkge1xuXHRcdFx0dmFyIHNpbXBsZSA9IHR5cGUuc2xpY2UoIDAsIDMgKSAhPT0gXCJudGhcIixcblx0XHRcdFx0Zm9yd2FyZCA9IHR5cGUuc2xpY2UoIC00ICkgIT09IFwibGFzdFwiLFxuXHRcdFx0XHRvZlR5cGUgPSB3aGF0ID09PSBcIm9mLXR5cGVcIjtcblxuXHRcdFx0cmV0dXJuIGZpcnN0ID09PSAxICYmIGxhc3QgPT09IDAgP1xuXG5cdFx0XHRcdC8vIFNob3J0Y3V0IGZvciA6bnRoLSoobilcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0cmV0dXJuICEhZWxlbS5wYXJlbnROb2RlO1xuXHRcdFx0XHR9IDpcblxuXHRcdFx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBjYWNoZSwgdW5pcXVlQ2FjaGUsIG91dGVyQ2FjaGUsIG5vZGUsIG5vZGVJbmRleCwgc3RhcnQsXG5cdFx0XHRcdFx0XHRkaXIgPSBzaW1wbGUgIT09IGZvcndhcmQgPyBcIm5leHRTaWJsaW5nXCIgOiBcInByZXZpb3VzU2libGluZ1wiLFxuXHRcdFx0XHRcdFx0cGFyZW50ID0gZWxlbS5wYXJlbnROb2RlLFxuXHRcdFx0XHRcdFx0bmFtZSA9IG9mVHlwZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCksXG5cdFx0XHRcdFx0XHR1c2VDYWNoZSA9ICF4bWwgJiYgIW9mVHlwZSxcblx0XHRcdFx0XHRcdGRpZmYgPSBmYWxzZTtcblxuXHRcdFx0XHRcdGlmICggcGFyZW50ICkge1xuXG5cdFx0XHRcdFx0XHQvLyA6KGZpcnN0fGxhc3R8b25seSktKGNoaWxkfG9mLXR5cGUpXG5cdFx0XHRcdFx0XHRpZiAoIHNpbXBsZSApIHtcblx0XHRcdFx0XHRcdFx0d2hpbGUgKCBkaXIgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bm9kZSA9IGVsZW07XG5cdFx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9IG5vZGVbIGRpciBdKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggb2ZUeXBlID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBuYW1lIDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0bm9kZS5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdC8vIFJldmVyc2UgZGlyZWN0aW9uIGZvciA6b25seS0qIChpZiB3ZSBoYXZlbid0IHlldCBkb25lIHNvKVxuXHRcdFx0XHRcdFx0XHRcdHN0YXJ0ID0gZGlyID0gdHlwZSA9PT0gXCJvbmx5XCIgJiYgIXN0YXJ0ICYmIFwibmV4dFNpYmxpbmdcIjtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c3RhcnQgPSBbIGZvcndhcmQgPyBwYXJlbnQuZmlyc3RDaGlsZCA6IHBhcmVudC5sYXN0Q2hpbGQgXTtcblxuXHRcdFx0XHRcdFx0Ly8gbm9uLXhtbCA6bnRoLWNoaWxkKC4uLikgc3RvcmVzIGNhY2hlIGRhdGEgb24gYHBhcmVudGBcblx0XHRcdFx0XHRcdGlmICggZm9yd2FyZCAmJiB1c2VDYWNoZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBTZWVrIGBlbGVtYCBmcm9tIGEgcHJldmlvdXNseS1jYWNoZWQgaW5kZXhcblxuXHRcdFx0XHRcdFx0XHQvLyAuLi5pbiBhIGd6aXAtZnJpZW5kbHkgd2F5XG5cdFx0XHRcdFx0XHRcdG5vZGUgPSBwYXJlbnQ7XG5cdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0Y2FjaGUgPSB1bmlxdWVDYWNoZVsgdHlwZSBdIHx8IFtdO1xuXHRcdFx0XHRcdFx0XHRub2RlSW5kZXggPSBjYWNoZVsgMCBdID09PSBkaXJydW5zICYmIGNhY2hlWyAxIF07XG5cdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXggJiYgY2FjaGVbIDIgXTtcblx0XHRcdFx0XHRcdFx0bm9kZSA9IG5vZGVJbmRleCAmJiBwYXJlbnQuY2hpbGROb2Rlc1sgbm9kZUluZGV4IF07XG5cblx0XHRcdFx0XHRcdFx0d2hpbGUgKCAobm9kZSA9ICsrbm9kZUluZGV4ICYmIG5vZGUgJiYgbm9kZVsgZGlyIF0gfHxcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEZhbGxiYWNrIHRvIHNlZWtpbmcgYGVsZW1gIGZyb20gdGhlIHN0YXJ0XG5cdFx0XHRcdFx0XHRcdFx0KGRpZmYgPSBub2RlSW5kZXggPSAwKSB8fCBzdGFydC5wb3AoKSkgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBXaGVuIGZvdW5kLCBjYWNoZSBpbmRleGVzIG9uIGBwYXJlbnRgIGFuZCBicmVha1xuXHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZS5ub2RlVHlwZSA9PT0gMSAmJiArK2RpZmYgJiYgbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIG5vZGVJbmRleCwgZGlmZiBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdC8vIFVzZSBwcmV2aW91c2x5LWNhY2hlZCBlbGVtZW50IGluZGV4IGlmIGF2YWlsYWJsZVxuXHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIC4uLmluIGEgZ3ppcC1mcmllbmRseSB3YXlcblx0XHRcdFx0XHRcdFx0XHRub2RlID0gZWxlbTtcblx0XHRcdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gbm9kZVsgZXhwYW5kbyBdIHx8IChub2RlWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8OSBvbmx5XG5cdFx0XHRcdFx0XHRcdFx0Ly8gRGVmZW5kIGFnYWluc3QgY2xvbmVkIGF0dHJvcGVydGllcyAoalF1ZXJ5IGdoLTE3MDkpXG5cdFx0XHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRcdChvdXRlckNhY2hlWyBub2RlLnVuaXF1ZUlEIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdFx0XHRjYWNoZSA9IHVuaXF1ZUNhY2hlWyB0eXBlIF0gfHwgW107XG5cdFx0XHRcdFx0XHRcdFx0bm9kZUluZGV4ID0gY2FjaGVbIDAgXSA9PT0gZGlycnVucyAmJiBjYWNoZVsgMSBdO1xuXHRcdFx0XHRcdFx0XHRcdGRpZmYgPSBub2RlSW5kZXg7XG5cdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHQvLyB4bWwgOm50aC1jaGlsZCguLi4pXG5cdFx0XHRcdFx0XHRcdC8vIG9yIDpudGgtbGFzdC1jaGlsZCguLi4pIG9yIDpudGgoLWxhc3QpPy1vZi10eXBlKC4uLilcblx0XHRcdFx0XHRcdFx0aWYgKCBkaWZmID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBVc2UgdGhlIHNhbWUgbG9vcCBhcyBhYm92ZSB0byBzZWVrIGBlbGVtYCBmcm9tIHRoZSBzdGFydFxuXHRcdFx0XHRcdFx0XHRcdHdoaWxlICggKG5vZGUgPSArK25vZGVJbmRleCAmJiBub2RlICYmIG5vZGVbIGRpciBdIHx8XG5cdFx0XHRcdFx0XHRcdFx0XHQoZGlmZiA9IG5vZGVJbmRleCA9IDApIHx8IHN0YXJ0LnBvcCgpKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKCAoIG9mVHlwZSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gbmFtZSA6XG5cdFx0XHRcdFx0XHRcdFx0XHRcdG5vZGUubm9kZVR5cGUgPT09IDEgKSAmJlxuXHRcdFx0XHRcdFx0XHRcdFx0XHQrK2RpZmYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQ2FjaGUgdGhlIGluZGV4IG9mIGVhY2ggZW5jb3VudGVyZWQgZWxlbWVudFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIHVzZUNhY2hlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG91dGVyQ2FjaGUgPSBub2RlWyBleHBhbmRvIF0gfHwgKG5vZGVbIGV4cGFuZG8gXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZlbmQgYWdhaW5zdCBjbG9uZWQgYXR0cm9wZXJ0aWVzIChqUXVlcnkgZ2gtMTcwOSlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR1bmlxdWVDYWNoZSA9IG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSB8fFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0KG91dGVyQ2FjaGVbIG5vZGUudW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyB0eXBlIF0gPSBbIGRpcnJ1bnMsIGRpZmYgXTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggbm9kZSA9PT0gZWxlbSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSB0aGUgb2Zmc2V0LCB0aGVuIGNoZWNrIGFnYWluc3QgY3ljbGUgc2l6ZVxuXHRcdFx0XHRcdFx0ZGlmZiAtPSBsYXN0O1xuXHRcdFx0XHRcdFx0cmV0dXJuIGRpZmYgPT09IGZpcnN0IHx8ICggZGlmZiAlIGZpcnN0ID09PSAwICYmIGRpZmYgLyBmaXJzdCA+PSAwICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9O1xuXHRcdH0sXG5cblx0XHRcIlBTRVVET1wiOiBmdW5jdGlvbiggcHNldWRvLCBhcmd1bWVudCApIHtcblx0XHRcdC8vIHBzZXVkby1jbGFzcyBuYW1lcyBhcmUgY2FzZS1pbnNlbnNpdGl2ZVxuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvc2VsZWN0b3JzLyNwc2V1ZG8tY2xhc3Nlc1xuXHRcdFx0Ly8gUHJpb3JpdGl6ZSBieSBjYXNlIHNlbnNpdGl2aXR5IGluIGNhc2UgY3VzdG9tIHBzZXVkb3MgYXJlIGFkZGVkIHdpdGggdXBwZXJjYXNlIGxldHRlcnNcblx0XHRcdC8vIFJlbWVtYmVyIHRoYXQgc2V0RmlsdGVycyBpbmhlcml0cyBmcm9tIHBzZXVkb3Ncblx0XHRcdHZhciBhcmdzLFxuXHRcdFx0XHRmbiA9IEV4cHIucHNldWRvc1sgcHNldWRvIF0gfHwgRXhwci5zZXRGaWx0ZXJzWyBwc2V1ZG8udG9Mb3dlckNhc2UoKSBdIHx8XG5cdFx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIHBzZXVkbzogXCIgKyBwc2V1ZG8gKTtcblxuXHRcdFx0Ly8gVGhlIHVzZXIgbWF5IHVzZSBjcmVhdGVQc2V1ZG8gdG8gaW5kaWNhdGUgdGhhdFxuXHRcdFx0Ly8gYXJndW1lbnRzIGFyZSBuZWVkZWQgdG8gY3JlYXRlIHRoZSBmaWx0ZXIgZnVuY3Rpb25cblx0XHRcdC8vIGp1c3QgYXMgU2l6emxlIGRvZXNcblx0XHRcdGlmICggZm5bIGV4cGFuZG8gXSApIHtcblx0XHRcdFx0cmV0dXJuIGZuKCBhcmd1bWVudCApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBCdXQgbWFpbnRhaW4gc3VwcG9ydCBmb3Igb2xkIHNpZ25hdHVyZXNcblx0XHRcdGlmICggZm4ubGVuZ3RoID4gMSApIHtcblx0XHRcdFx0YXJncyA9IFsgcHNldWRvLCBwc2V1ZG8sIFwiXCIsIGFyZ3VtZW50IF07XG5cdFx0XHRcdHJldHVybiBFeHByLnNldEZpbHRlcnMuaGFzT3duUHJvcGVydHkoIHBzZXVkby50b0xvd2VyQ2FzZSgpICkgP1xuXHRcdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcyApIHtcblx0XHRcdFx0XHRcdHZhciBpZHgsXG5cdFx0XHRcdFx0XHRcdG1hdGNoZWQgPSBmbiggc2VlZCwgYXJndW1lbnQgKSxcblx0XHRcdFx0XHRcdFx0aSA9IG1hdGNoZWQubGVuZ3RoO1xuXHRcdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdFx0XHRcdGlkeCA9IGluZGV4T2YoIHNlZWQsIG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdFx0c2VlZFsgaWR4IF0gPSAhKCBtYXRjaGVzWyBpZHggXSA9IG1hdGNoZWRbaV0gKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KSA6XG5cdFx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZm4oIGVsZW0sIDAsIGFyZ3MgKTtcblx0XHRcdFx0XHR9O1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gZm47XG5cdFx0fVxuXHR9LFxuXG5cdHBzZXVkb3M6IHtcblx0XHQvLyBQb3RlbnRpYWxseSBjb21wbGV4IHBzZXVkb3Ncblx0XHRcIm5vdFwiOiBtYXJrRnVuY3Rpb24oZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdFx0Ly8gVHJpbSB0aGUgc2VsZWN0b3IgcGFzc2VkIHRvIGNvbXBpbGVcblx0XHRcdC8vIHRvIGF2b2lkIHRyZWF0aW5nIGxlYWRpbmcgYW5kIHRyYWlsaW5nXG5cdFx0XHQvLyBzcGFjZXMgYXMgY29tYmluYXRvcnNcblx0XHRcdHZhciBpbnB1dCA9IFtdLFxuXHRcdFx0XHRyZXN1bHRzID0gW10sXG5cdFx0XHRcdG1hdGNoZXIgPSBjb21waWxlKCBzZWxlY3Rvci5yZXBsYWNlKCBydHJpbSwgXCIkMVwiICkgKTtcblxuXHRcdFx0cmV0dXJuIG1hdGNoZXJbIGV4cGFuZG8gXSA/XG5cdFx0XHRcdG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgbWF0Y2hlcywgY29udGV4dCwgeG1sICkge1xuXHRcdFx0XHRcdHZhciBlbGVtLFxuXHRcdFx0XHRcdFx0dW5tYXRjaGVkID0gbWF0Y2hlciggc2VlZCwgbnVsbCwgeG1sLCBbXSApLFxuXHRcdFx0XHRcdFx0aSA9IHNlZWQubGVuZ3RoO1xuXG5cdFx0XHRcdFx0Ly8gTWF0Y2ggZWxlbWVudHMgdW5tYXRjaGVkIGJ5IGBtYXRjaGVyYFxuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRcdFx0XHRcdHNlZWRbaV0gPSAhKG1hdGNoZXNbaV0gPSBlbGVtKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0pIDpcblx0XHRcdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdFx0XHRpbnB1dFswXSA9IGVsZW07XG5cdFx0XHRcdFx0bWF0Y2hlciggaW5wdXQsIG51bGwsIHhtbCwgcmVzdWx0cyApO1xuXHRcdFx0XHRcdC8vIERvbid0IGtlZXAgdGhlIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRcdFx0aW5wdXRbMF0gPSBudWxsO1xuXHRcdFx0XHRcdHJldHVybiAhcmVzdWx0cy5wb3AoKTtcblx0XHRcdFx0fTtcblx0XHR9KSxcblxuXHRcdFwiaGFzXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiBTaXp6bGUoIHNlbGVjdG9yLCBlbGVtICkubGVuZ3RoID4gMDtcblx0XHRcdH07XG5cdFx0fSksXG5cblx0XHRcImNvbnRhaW5zXCI6IG1hcmtGdW5jdGlvbihmdW5jdGlvbiggdGV4dCApIHtcblx0XHRcdHRleHQgPSB0ZXh0LnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICk7XG5cdFx0XHRyZXR1cm4gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRcdHJldHVybiAoIGVsZW0udGV4dENvbnRlbnQgfHwgZ2V0VGV4dCggZWxlbSApICkuaW5kZXhPZiggdGV4dCApID4gLTE7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gXCJXaGV0aGVyIGFuIGVsZW1lbnQgaXMgcmVwcmVzZW50ZWQgYnkgYSA6bGFuZygpIHNlbGVjdG9yXG5cdFx0Ly8gaXMgYmFzZWQgc29sZWx5IG9uIHRoZSBlbGVtZW50J3MgbGFuZ3VhZ2UgdmFsdWVcblx0XHQvLyBiZWluZyBlcXVhbCB0byB0aGUgaWRlbnRpZmllciBDLFxuXHRcdC8vIG9yIGJlZ2lubmluZyB3aXRoIHRoZSBpZGVudGlmaWVyIEMgaW1tZWRpYXRlbHkgZm9sbG93ZWQgYnkgXCItXCIuXG5cdFx0Ly8gVGhlIG1hdGNoaW5nIG9mIEMgYWdhaW5zdCB0aGUgZWxlbWVudCdzIGxhbmd1YWdlIHZhbHVlIGlzIHBlcmZvcm1lZCBjYXNlLWluc2Vuc2l0aXZlbHkuXG5cdFx0Ly8gVGhlIGlkZW50aWZpZXIgQyBkb2VzIG5vdCBoYXZlIHRvIGJlIGEgdmFsaWQgbGFuZ3VhZ2UgbmFtZS5cIlxuXHRcdC8vIGh0dHA6Ly93d3cudzMub3JnL1RSL3NlbGVjdG9ycy8jbGFuZy1wc2V1ZG9cblx0XHRcImxhbmdcIjogbWFya0Z1bmN0aW9uKCBmdW5jdGlvbiggbGFuZyApIHtcblx0XHRcdC8vIGxhbmcgdmFsdWUgbXVzdCBiZSBhIHZhbGlkIGlkZW50aWZpZXJcblx0XHRcdGlmICggIXJpZGVudGlmaWVyLnRlc3QobGFuZyB8fCBcIlwiKSApIHtcblx0XHRcdFx0U2l6emxlLmVycm9yKCBcInVuc3VwcG9ydGVkIGxhbmc6IFwiICsgbGFuZyApO1xuXHRcdFx0fVxuXHRcdFx0bGFuZyA9IGxhbmcucmVwbGFjZSggcnVuZXNjYXBlLCBmdW5lc2NhcGUgKS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0cmV0dXJuIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgZWxlbUxhbmc7XG5cdFx0XHRcdGRvIHtcblx0XHRcdFx0XHRpZiAoIChlbGVtTGFuZyA9IGRvY3VtZW50SXNIVE1MID9cblx0XHRcdFx0XHRcdGVsZW0ubGFuZyA6XG5cdFx0XHRcdFx0XHRlbGVtLmdldEF0dHJpYnV0ZShcInhtbDpsYW5nXCIpIHx8IGVsZW0uZ2V0QXR0cmlidXRlKFwibGFuZ1wiKSkgKSB7XG5cblx0XHRcdFx0XHRcdGVsZW1MYW5nID0gZWxlbUxhbmcudG9Mb3dlckNhc2UoKTtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtTGFuZyA9PT0gbGFuZyB8fCBlbGVtTGFuZy5pbmRleE9mKCBsYW5nICsgXCItXCIgKSA9PT0gMDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gd2hpbGUgKCAoZWxlbSA9IGVsZW0ucGFyZW50Tm9kZSkgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9O1xuXHRcdH0pLFxuXG5cdFx0Ly8gTWlzY2VsbGFuZW91c1xuXHRcdFwidGFyZ2V0XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIGhhc2ggPSB3aW5kb3cubG9jYXRpb24gJiYgd2luZG93LmxvY2F0aW9uLmhhc2g7XG5cdFx0XHRyZXR1cm4gaGFzaCAmJiBoYXNoLnNsaWNlKCAxICkgPT09IGVsZW0uaWQ7XG5cdFx0fSxcblxuXHRcdFwicm9vdFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBkb2NFbGVtO1xuXHRcdH0sXG5cblx0XHRcImZvY3VzXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0gPT09IGRvY3VtZW50LmFjdGl2ZUVsZW1lbnQgJiYgKCFkb2N1bWVudC5oYXNGb2N1cyB8fCBkb2N1bWVudC5oYXNGb2N1cygpKSAmJiAhIShlbGVtLnR5cGUgfHwgZWxlbS5ocmVmIHx8IH5lbGVtLnRhYkluZGV4KTtcblx0XHR9LFxuXG5cdFx0Ly8gQm9vbGVhbiBwcm9wZXJ0aWVzXG5cdFx0XCJlbmFibGVkXCI6IGNyZWF0ZURpc2FibGVkUHNldWRvKCBmYWxzZSApLFxuXHRcdFwiZGlzYWJsZWRcIjogY3JlYXRlRGlzYWJsZWRQc2V1ZG8oIHRydWUgKSxcblxuXHRcdFwiY2hlY2tlZFwiOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdC8vIEluIENTUzMsIDpjaGVja2VkIHNob3VsZCByZXR1cm4gYm90aCBjaGVja2VkIGFuZCBzZWxlY3RlZCBlbGVtZW50c1xuXHRcdFx0Ly8gaHR0cDovL3d3dy53My5vcmcvVFIvMjAxMS9SRUMtY3NzMy1zZWxlY3RvcnMtMjAxMTA5MjkvI2NoZWNrZWRcblx0XHRcdHZhciBub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKTtcblx0XHRcdHJldHVybiAobm9kZU5hbWUgPT09IFwiaW5wdXRcIiAmJiAhIWVsZW0uY2hlY2tlZCkgfHwgKG5vZGVOYW1lID09PSBcIm9wdGlvblwiICYmICEhZWxlbS5zZWxlY3RlZCk7XG5cdFx0fSxcblxuXHRcdFwic2VsZWN0ZWRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBBY2Nlc3NpbmcgdGhpcyBwcm9wZXJ0eSBtYWtlcyBzZWxlY3RlZC1ieS1kZWZhdWx0XG5cdFx0XHQvLyBvcHRpb25zIGluIFNhZmFyaSB3b3JrIHByb3Blcmx5XG5cdFx0XHRpZiAoIGVsZW0ucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0ZWxlbS5wYXJlbnROb2RlLnNlbGVjdGVkSW5kZXg7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBlbGVtLnNlbGVjdGVkID09PSB0cnVlO1xuXHRcdH0sXG5cblx0XHQvLyBDb250ZW50c1xuXHRcdFwiZW1wdHlcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHQvLyBodHRwOi8vd3d3LnczLm9yZy9UUi9zZWxlY3RvcnMvI2VtcHR5LXBzZXVkb1xuXHRcdFx0Ly8gOmVtcHR5IGlzIG5lZ2F0ZWQgYnkgZWxlbWVudCAoMSkgb3IgY29udGVudCBub2RlcyAodGV4dDogMzsgY2RhdGE6IDQ7IGVudGl0eSByZWY6IDUpLFxuXHRcdFx0Ly8gICBidXQgbm90IGJ5IG90aGVycyAoY29tbWVudDogODsgcHJvY2Vzc2luZyBpbnN0cnVjdGlvbjogNzsgZXRjLilcblx0XHRcdC8vIG5vZGVUeXBlIDwgNiB3b3JrcyBiZWNhdXNlIGF0dHJpYnV0ZXMgKDIpIGRvIG5vdCBhcHBlYXIgYXMgY2hpbGRyZW5cblx0XHRcdGZvciAoIGVsZW0gPSBlbGVtLmZpcnN0Q2hpbGQ7IGVsZW07IGVsZW0gPSBlbGVtLm5leHRTaWJsaW5nICkge1xuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPCA2ICkge1xuXHRcdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0fSxcblxuXHRcdFwicGFyZW50XCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICFFeHByLnBzZXVkb3NbXCJlbXB0eVwiXSggZWxlbSApO1xuXHRcdH0sXG5cblx0XHQvLyBFbGVtZW50L2lucHV0IHR5cGVzXG5cdFx0XCJoZWFkZXJcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmhlYWRlci50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiaW5wdXRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRyZXR1cm4gcmlucHV0cy50ZXN0KCBlbGVtLm5vZGVOYW1lICk7XG5cdFx0fSxcblxuXHRcdFwiYnV0dG9uXCI6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0dmFyIG5hbWUgPSBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCk7XG5cdFx0XHRyZXR1cm4gbmFtZSA9PT0gXCJpbnB1dFwiICYmIGVsZW0udHlwZSA9PT0gXCJidXR0b25cIiB8fCBuYW1lID09PSBcImJ1dHRvblwiO1xuXHRcdH0sXG5cblx0XHRcInRleHRcIjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgYXR0cjtcblx0XHRcdHJldHVybiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwiaW5wdXRcIiAmJlxuXHRcdFx0XHRlbGVtLnR5cGUgPT09IFwidGV4dFwiICYmXG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUU8OFxuXHRcdFx0XHQvLyBOZXcgSFRNTDUgYXR0cmlidXRlIHZhbHVlcyAoZS5nLiwgXCJzZWFyY2hcIikgYXBwZWFyIHdpdGggZWxlbS50eXBlID09PSBcInRleHRcIlxuXHRcdFx0XHQoIChhdHRyID0gZWxlbS5nZXRBdHRyaWJ1dGUoXCJ0eXBlXCIpKSA9PSBudWxsIHx8IGF0dHIudG9Mb3dlckNhc2UoKSA9PT0gXCJ0ZXh0XCIgKTtcblx0XHR9LFxuXG5cdFx0Ly8gUG9zaXRpb24taW4tY29sbGVjdGlvblxuXHRcdFwiZmlyc3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbigpIHtcblx0XHRcdHJldHVybiBbIDAgXTtcblx0XHR9KSxcblxuXHRcdFwibGFzdFwiOiBjcmVhdGVQb3NpdGlvbmFsUHNldWRvKGZ1bmN0aW9uKCBtYXRjaEluZGV4ZXMsIGxlbmd0aCApIHtcblx0XHRcdHJldHVybiBbIGxlbmd0aCAtIDEgXTtcblx0XHR9KSxcblxuXHRcdFwiZXFcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0cmV0dXJuIFsgYXJndW1lbnQgPCAwID8gYXJndW1lbnQgKyBsZW5ndGggOiBhcmd1bWVudCBdO1xuXHRcdH0pLFxuXG5cdFx0XCJldmVuXCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoICkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuZ3RoOyBpICs9IDIgKSB7XG5cdFx0XHRcdG1hdGNoSW5kZXhlcy5wdXNoKCBpICk7XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gbWF0Y2hJbmRleGVzO1xuXHRcdH0pLFxuXG5cdFx0XCJvZGRcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGggKSB7XG5cdFx0XHR2YXIgaSA9IDE7XG5cdFx0XHRmb3IgKCA7IGkgPCBsZW5ndGg7IGkgKz0gMiApIHtcblx0XHRcdFx0bWF0Y2hJbmRleGVzLnB1c2goIGkgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiBtYXRjaEluZGV4ZXM7XG5cdFx0fSksXG5cblx0XHRcImx0XCI6IGNyZWF0ZVBvc2l0aW9uYWxQc2V1ZG8oZnVuY3Rpb24oIG1hdGNoSW5kZXhlcywgbGVuZ3RoLCBhcmd1bWVudCApIHtcblx0XHRcdHZhciBpID0gYXJndW1lbnQgPCAwID9cblx0XHRcdFx0YXJndW1lbnQgKyBsZW5ndGggOlxuXHRcdFx0XHRhcmd1bWVudCA+IGxlbmd0aCA/XG5cdFx0XHRcdFx0bGVuZ3RoIDpcblx0XHRcdFx0XHRhcmd1bWVudDtcblx0XHRcdGZvciAoIDsgLS1pID49IDA7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KSxcblxuXHRcdFwiZ3RcIjogY3JlYXRlUG9zaXRpb25hbFBzZXVkbyhmdW5jdGlvbiggbWF0Y2hJbmRleGVzLCBsZW5ndGgsIGFyZ3VtZW50ICkge1xuXHRcdFx0dmFyIGkgPSBhcmd1bWVudCA8IDAgPyBhcmd1bWVudCArIGxlbmd0aCA6IGFyZ3VtZW50O1xuXHRcdFx0Zm9yICggOyArK2kgPCBsZW5ndGg7ICkge1xuXHRcdFx0XHRtYXRjaEluZGV4ZXMucHVzaCggaSApO1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG1hdGNoSW5kZXhlcztcblx0XHR9KVxuXHR9XG59O1xuXG5FeHByLnBzZXVkb3NbXCJudGhcIl0gPSBFeHByLnBzZXVkb3NbXCJlcVwiXTtcblxuLy8gQWRkIGJ1dHRvbi9pbnB1dCB0eXBlIHBzZXVkb3NcbmZvciAoIGkgaW4geyByYWRpbzogdHJ1ZSwgY2hlY2tib3g6IHRydWUsIGZpbGU6IHRydWUsIHBhc3N3b3JkOiB0cnVlLCBpbWFnZTogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUlucHV0UHNldWRvKCBpICk7XG59XG5mb3IgKCBpIGluIHsgc3VibWl0OiB0cnVlLCByZXNldDogdHJ1ZSB9ICkge1xuXHRFeHByLnBzZXVkb3NbIGkgXSA9IGNyZWF0ZUJ1dHRvblBzZXVkbyggaSApO1xufVxuXG4vLyBFYXN5IEFQSSBmb3IgY3JlYXRpbmcgbmV3IHNldEZpbHRlcnNcbmZ1bmN0aW9uIHNldEZpbHRlcnMoKSB7fVxuc2V0RmlsdGVycy5wcm90b3R5cGUgPSBFeHByLmZpbHRlcnMgPSBFeHByLnBzZXVkb3M7XG5FeHByLnNldEZpbHRlcnMgPSBuZXcgc2V0RmlsdGVycygpO1xuXG50b2tlbml6ZSA9IFNpenpsZS50b2tlbml6ZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgcGFyc2VPbmx5ICkge1xuXHR2YXIgbWF0Y2hlZCwgbWF0Y2gsIHRva2VucywgdHlwZSxcblx0XHRzb0ZhciwgZ3JvdXBzLCBwcmVGaWx0ZXJzLFxuXHRcdGNhY2hlZCA9IHRva2VuQ2FjaGVbIHNlbGVjdG9yICsgXCIgXCIgXTtcblxuXHRpZiAoIGNhY2hlZCApIHtcblx0XHRyZXR1cm4gcGFyc2VPbmx5ID8gMCA6IGNhY2hlZC5zbGljZSggMCApO1xuXHR9XG5cblx0c29GYXIgPSBzZWxlY3Rvcjtcblx0Z3JvdXBzID0gW107XG5cdHByZUZpbHRlcnMgPSBFeHByLnByZUZpbHRlcjtcblxuXHR3aGlsZSAoIHNvRmFyICkge1xuXG5cdFx0Ly8gQ29tbWEgYW5kIGZpcnN0IHJ1blxuXHRcdGlmICggIW1hdGNoZWQgfHwgKG1hdGNoID0gcmNvbW1hLmV4ZWMoIHNvRmFyICkpICkge1xuXHRcdFx0aWYgKCBtYXRjaCApIHtcblx0XHRcdFx0Ly8gRG9uJ3QgY29uc3VtZSB0cmFpbGluZyBjb21tYXMgYXMgdmFsaWRcblx0XHRcdFx0c29GYXIgPSBzb0Zhci5zbGljZSggbWF0Y2hbMF0ubGVuZ3RoICkgfHwgc29GYXI7XG5cdFx0XHR9XG5cdFx0XHRncm91cHMucHVzaCggKHRva2VucyA9IFtdKSApO1xuXHRcdH1cblxuXHRcdG1hdGNoZWQgPSBmYWxzZTtcblxuXHRcdC8vIENvbWJpbmF0b3JzXG5cdFx0aWYgKCAobWF0Y2ggPSByY29tYmluYXRvcnMuZXhlYyggc29GYXIgKSkgKSB7XG5cdFx0XHRtYXRjaGVkID0gbWF0Y2guc2hpZnQoKTtcblx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0dmFsdWU6IG1hdGNoZWQsXG5cdFx0XHRcdC8vIENhc3QgZGVzY2VuZGFudCBjb21iaW5hdG9ycyB0byBzcGFjZVxuXHRcdFx0XHR0eXBlOiBtYXRjaFswXS5yZXBsYWNlKCBydHJpbSwgXCIgXCIgKVxuXHRcdFx0fSk7XG5cdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdH1cblxuXHRcdC8vIEZpbHRlcnNcblx0XHRmb3IgKCB0eXBlIGluIEV4cHIuZmlsdGVyICkge1xuXHRcdFx0aWYgKCAobWF0Y2ggPSBtYXRjaEV4cHJbIHR5cGUgXS5leGVjKCBzb0ZhciApKSAmJiAoIXByZUZpbHRlcnNbIHR5cGUgXSB8fFxuXHRcdFx0XHQobWF0Y2ggPSBwcmVGaWx0ZXJzWyB0eXBlIF0oIG1hdGNoICkpKSApIHtcblx0XHRcdFx0bWF0Y2hlZCA9IG1hdGNoLnNoaWZ0KCk7XG5cdFx0XHRcdHRva2Vucy5wdXNoKHtcblx0XHRcdFx0XHR2YWx1ZTogbWF0Y2hlZCxcblx0XHRcdFx0XHR0eXBlOiB0eXBlLFxuXHRcdFx0XHRcdG1hdGNoZXM6IG1hdGNoXG5cdFx0XHRcdH0pO1xuXHRcdFx0XHRzb0ZhciA9IHNvRmFyLnNsaWNlKCBtYXRjaGVkLmxlbmd0aCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggIW1hdGNoZWQgKSB7XG5cdFx0XHRicmVhaztcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIGxlbmd0aCBvZiB0aGUgaW52YWxpZCBleGNlc3Ncblx0Ly8gaWYgd2UncmUganVzdCBwYXJzaW5nXG5cdC8vIE90aGVyd2lzZSwgdGhyb3cgYW4gZXJyb3Igb3IgcmV0dXJuIHRva2Vuc1xuXHRyZXR1cm4gcGFyc2VPbmx5ID9cblx0XHRzb0Zhci5sZW5ndGggOlxuXHRcdHNvRmFyID9cblx0XHRcdFNpenpsZS5lcnJvciggc2VsZWN0b3IgKSA6XG5cdFx0XHQvLyBDYWNoZSB0aGUgdG9rZW5zXG5cdFx0XHR0b2tlbkNhY2hlKCBzZWxlY3RvciwgZ3JvdXBzICkuc2xpY2UoIDAgKTtcbn07XG5cbmZ1bmN0aW9uIHRvU2VsZWN0b3IoIHRva2VucyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IHRva2Vucy5sZW5ndGgsXG5cdFx0c2VsZWN0b3IgPSBcIlwiO1xuXHRmb3IgKCA7IGkgPCBsZW47IGkrKyApIHtcblx0XHRzZWxlY3RvciArPSB0b2tlbnNbaV0udmFsdWU7XG5cdH1cblx0cmV0dXJuIHNlbGVjdG9yO1xufVxuXG5mdW5jdGlvbiBhZGRDb21iaW5hdG9yKCBtYXRjaGVyLCBjb21iaW5hdG9yLCBiYXNlICkge1xuXHR2YXIgZGlyID0gY29tYmluYXRvci5kaXIsXG5cdFx0c2tpcCA9IGNvbWJpbmF0b3IubmV4dCxcblx0XHRrZXkgPSBza2lwIHx8IGRpcixcblx0XHRjaGVja05vbkVsZW1lbnRzID0gYmFzZSAmJiBrZXkgPT09IFwicGFyZW50Tm9kZVwiLFxuXHRcdGRvbmVOYW1lID0gZG9uZSsrO1xuXG5cdHJldHVybiBjb21iaW5hdG9yLmZpcnN0ID9cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGNsb3Nlc3QgYW5jZXN0b3IvcHJlY2VkaW5nIGVsZW1lbnRcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0d2hpbGUgKCAoZWxlbSA9IGVsZW1bIGRpciBdKSApIHtcblx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSA6XG5cblx0XHQvLyBDaGVjayBhZ2FpbnN0IGFsbCBhbmNlc3Rvci9wcmVjZWRpbmcgZWxlbWVudHNcblx0XHRmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIG9sZENhY2hlLCB1bmlxdWVDYWNoZSwgb3V0ZXJDYWNoZSxcblx0XHRcdFx0bmV3Q2FjaGUgPSBbIGRpcnJ1bnMsIGRvbmVOYW1lIF07XG5cblx0XHRcdC8vIFdlIGNhbid0IHNldCBhcmJpdHJhcnkgZGF0YSBvbiBYTUwgbm9kZXMsIHNvIHRoZXkgZG9uJ3QgYmVuZWZpdCBmcm9tIGNvbWJpbmF0b3IgY2FjaGluZ1xuXHRcdFx0aWYgKCB4bWwgKSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZXIoIGVsZW0sIGNvbnRleHQsIHhtbCApICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHdoaWxlICggKGVsZW0gPSBlbGVtWyBkaXIgXSkgKSB7XG5cdFx0XHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGNoZWNrTm9uRWxlbWVudHMgKSB7XG5cdFx0XHRcdFx0XHRvdXRlckNhY2hlID0gZWxlbVsgZXhwYW5kbyBdIHx8IChlbGVtWyBleHBhbmRvIF0gPSB7fSk7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw5IG9ubHlcblx0XHRcdFx0XHRcdC8vIERlZmVuZCBhZ2FpbnN0IGNsb25lZCBhdHRyb3BlcnRpZXMgKGpRdWVyeSBnaC0xNzA5KVxuXHRcdFx0XHRcdFx0dW5pcXVlQ2FjaGUgPSBvdXRlckNhY2hlWyBlbGVtLnVuaXF1ZUlEIF0gfHwgKG91dGVyQ2FjaGVbIGVsZW0udW5pcXVlSUQgXSA9IHt9KTtcblxuXHRcdFx0XHRcdFx0aWYgKCBza2lwICYmIHNraXAgPT09IGVsZW0ubm9kZU5hbWUudG9Mb3dlckNhc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0ZWxlbSA9IGVsZW1bIGRpciBdIHx8IGVsZW07XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCAob2xkQ2FjaGUgPSB1bmlxdWVDYWNoZVsga2V5IF0pICYmXG5cdFx0XHRcdFx0XHRcdG9sZENhY2hlWyAwIF0gPT09IGRpcnJ1bnMgJiYgb2xkQ2FjaGVbIDEgXSA9PT0gZG9uZU5hbWUgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQXNzaWduIHRvIG5ld0NhY2hlIHNvIHJlc3VsdHMgYmFjay1wcm9wYWdhdGUgdG8gcHJldmlvdXMgZWxlbWVudHNcblx0XHRcdFx0XHRcdFx0cmV0dXJuIChuZXdDYWNoZVsgMiBdID0gb2xkQ2FjaGVbIDIgXSk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXVzZSBuZXdjYWNoZSBzbyByZXN1bHRzIGJhY2stcHJvcGFnYXRlIHRvIHByZXZpb3VzIGVsZW1lbnRzXG5cdFx0XHRcdFx0XHRcdHVuaXF1ZUNhY2hlWyBrZXkgXSA9IG5ld0NhY2hlO1xuXG5cdFx0XHRcdFx0XHRcdC8vIEEgbWF0Y2ggbWVhbnMgd2UncmUgZG9uZTsgYSBmYWlsIG1lYW5zIHdlIGhhdmUgdG8ga2VlcCBjaGVja2luZ1xuXHRcdFx0XHRcdFx0XHRpZiAoIChuZXdDYWNoZVsgMiBdID0gbWF0Y2hlciggZWxlbSwgY29udGV4dCwgeG1sICkpICkge1xuXHRcdFx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fTtcbn1cblxuZnVuY3Rpb24gZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICkge1xuXHRyZXR1cm4gbWF0Y2hlcnMubGVuZ3RoID4gMSA/XG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbnRleHQsIHhtbCApIHtcblx0XHRcdHZhciBpID0gbWF0Y2hlcnMubGVuZ3RoO1xuXHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRcdGlmICggIW1hdGNoZXJzW2ldKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0gOlxuXHRcdG1hdGNoZXJzWzBdO1xufVxuXG5mdW5jdGlvbiBtdWx0aXBsZUNvbnRleHRzKCBzZWxlY3RvciwgY29udGV4dHMsIHJlc3VsdHMgKSB7XG5cdHZhciBpID0gMCxcblx0XHRsZW4gPSBjb250ZXh0cy5sZW5ndGg7XG5cdGZvciAoIDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFNpenpsZSggc2VsZWN0b3IsIGNvbnRleHRzW2ldLCByZXN1bHRzICk7XG5cdH1cblx0cmV0dXJuIHJlc3VsdHM7XG59XG5cbmZ1bmN0aW9uIGNvbmRlbnNlKCB1bm1hdGNoZWQsIG1hcCwgZmlsdGVyLCBjb250ZXh0LCB4bWwgKSB7XG5cdHZhciBlbGVtLFxuXHRcdG5ld1VubWF0Y2hlZCA9IFtdLFxuXHRcdGkgPSAwLFxuXHRcdGxlbiA9IHVubWF0Y2hlZC5sZW5ndGgsXG5cdFx0bWFwcGVkID0gbWFwICE9IG51bGw7XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAoZWxlbSA9IHVubWF0Y2hlZFtpXSkgKSB7XG5cdFx0XHRpZiAoICFmaWx0ZXIgfHwgZmlsdGVyKCBlbGVtLCBjb250ZXh0LCB4bWwgKSApIHtcblx0XHRcdFx0bmV3VW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0aWYgKCBtYXBwZWQgKSB7XG5cdFx0XHRcdFx0bWFwLnB1c2goIGkgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBuZXdVbm1hdGNoZWQ7XG59XG5cbmZ1bmN0aW9uIHNldE1hdGNoZXIoIHByZUZpbHRlciwgc2VsZWN0b3IsIG1hdGNoZXIsIHBvc3RGaWx0ZXIsIHBvc3RGaW5kZXIsIHBvc3RTZWxlY3RvciApIHtcblx0aWYgKCBwb3N0RmlsdGVyICYmICFwb3N0RmlsdGVyWyBleHBhbmRvIF0gKSB7XG5cdFx0cG9zdEZpbHRlciA9IHNldE1hdGNoZXIoIHBvc3RGaWx0ZXIgKTtcblx0fVxuXHRpZiAoIHBvc3RGaW5kZXIgJiYgIXBvc3RGaW5kZXJbIGV4cGFuZG8gXSApIHtcblx0XHRwb3N0RmluZGVyID0gc2V0TWF0Y2hlciggcG9zdEZpbmRlciwgcG9zdFNlbGVjdG9yICk7XG5cdH1cblx0cmV0dXJuIG1hcmtGdW5jdGlvbihmdW5jdGlvbiggc2VlZCwgcmVzdWx0cywgY29udGV4dCwgeG1sICkge1xuXHRcdHZhciB0ZW1wLCBpLCBlbGVtLFxuXHRcdFx0cHJlTWFwID0gW10sXG5cdFx0XHRwb3N0TWFwID0gW10sXG5cdFx0XHRwcmVleGlzdGluZyA9IHJlc3VsdHMubGVuZ3RoLFxuXG5cdFx0XHQvLyBHZXQgaW5pdGlhbCBlbGVtZW50cyBmcm9tIHNlZWQgb3IgY29udGV4dFxuXHRcdFx0ZWxlbXMgPSBzZWVkIHx8IG11bHRpcGxlQ29udGV4dHMoIHNlbGVjdG9yIHx8IFwiKlwiLCBjb250ZXh0Lm5vZGVUeXBlID8gWyBjb250ZXh0IF0gOiBjb250ZXh0LCBbXSApLFxuXG5cdFx0XHQvLyBQcmVmaWx0ZXIgdG8gZ2V0IG1hdGNoZXIgaW5wdXQsIHByZXNlcnZpbmcgYSBtYXAgZm9yIHNlZWQtcmVzdWx0cyBzeW5jaHJvbml6YXRpb25cblx0XHRcdG1hdGNoZXJJbiA9IHByZUZpbHRlciAmJiAoIHNlZWQgfHwgIXNlbGVjdG9yICkgP1xuXHRcdFx0XHRjb25kZW5zZSggZWxlbXMsIHByZU1hcCwgcHJlRmlsdGVyLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdGVsZW1zLFxuXG5cdFx0XHRtYXRjaGVyT3V0ID0gbWF0Y2hlciA/XG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgYSBwb3N0RmluZGVyLCBvciBmaWx0ZXJlZCBzZWVkLCBvciBub24tc2VlZCBwb3N0RmlsdGVyIG9yIHByZWV4aXN0aW5nIHJlc3VsdHMsXG5cdFx0XHRcdHBvc3RGaW5kZXIgfHwgKCBzZWVkID8gcHJlRmlsdGVyIDogcHJlZXhpc3RpbmcgfHwgcG9zdEZpbHRlciApID9cblxuXHRcdFx0XHRcdC8vIC4uLmludGVybWVkaWF0ZSBwcm9jZXNzaW5nIGlzIG5lY2Vzc2FyeVxuXHRcdFx0XHRcdFtdIDpcblxuXHRcdFx0XHRcdC8vIC4uLm90aGVyd2lzZSB1c2UgcmVzdWx0cyBkaXJlY3RseVxuXHRcdFx0XHRcdHJlc3VsdHMgOlxuXHRcdFx0XHRtYXRjaGVySW47XG5cblx0XHQvLyBGaW5kIHByaW1hcnkgbWF0Y2hlc1xuXHRcdGlmICggbWF0Y2hlciApIHtcblx0XHRcdG1hdGNoZXIoIG1hdGNoZXJJbiwgbWF0Y2hlck91dCwgY29udGV4dCwgeG1sICk7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgcG9zdEZpbHRlclxuXHRcdGlmICggcG9zdEZpbHRlciApIHtcblx0XHRcdHRlbXAgPSBjb25kZW5zZSggbWF0Y2hlck91dCwgcG9zdE1hcCApO1xuXHRcdFx0cG9zdEZpbHRlciggdGVtcCwgW10sIGNvbnRleHQsIHhtbCApO1xuXG5cdFx0XHQvLyBVbi1tYXRjaCBmYWlsaW5nIGVsZW1lbnRzIGJ5IG1vdmluZyB0aGVtIGJhY2sgdG8gbWF0Y2hlckluXG5cdFx0XHRpID0gdGVtcC5sZW5ndGg7XG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0aWYgKCAoZWxlbSA9IHRlbXBbaV0pICkge1xuXHRcdFx0XHRcdG1hdGNoZXJPdXRbIHBvc3RNYXBbaV0gXSA9ICEobWF0Y2hlckluWyBwb3N0TWFwW2ldIF0gPSBlbGVtKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdGlmICggc2VlZCApIHtcblx0XHRcdGlmICggcG9zdEZpbmRlciB8fCBwcmVGaWx0ZXIgKSB7XG5cdFx0XHRcdGlmICggcG9zdEZpbmRlciApIHtcblx0XHRcdFx0XHQvLyBHZXQgdGhlIGZpbmFsIG1hdGNoZXJPdXQgYnkgY29uZGVuc2luZyB0aGlzIGludGVybWVkaWF0ZSBpbnRvIHBvc3RGaW5kZXIgY29udGV4dHNcblx0XHRcdFx0XHR0ZW1wID0gW107XG5cdFx0XHRcdFx0aSA9IG1hdGNoZXJPdXQubGVuZ3RoO1xuXHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoZWxlbSA9IG1hdGNoZXJPdXRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIG1hdGNoZXJJbiBzaW5jZSBlbGVtIGlzIG5vdCB5ZXQgYSBmaW5hbCBtYXRjaFxuXHRcdFx0XHRcdFx0XHR0ZW1wLnB1c2goIChtYXRjaGVySW5baV0gPSBlbGVtKSApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRwb3N0RmluZGVyKCBudWxsLCAobWF0Y2hlck91dCA9IFtdKSwgdGVtcCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBNb3ZlIG1hdGNoZWQgZWxlbWVudHMgZnJvbSBzZWVkIHRvIHJlc3VsdHMgdG8ga2VlcCB0aGVtIHN5bmNocm9uaXplZFxuXHRcdFx0XHRpID0gbWF0Y2hlck91dC5sZW5ndGg7XG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdGlmICggKGVsZW0gPSBtYXRjaGVyT3V0W2ldKSAmJlxuXHRcdFx0XHRcdFx0KHRlbXAgPSBwb3N0RmluZGVyID8gaW5kZXhPZiggc2VlZCwgZWxlbSApIDogcHJlTWFwW2ldKSA+IC0xICkge1xuXG5cdFx0XHRcdFx0XHRzZWVkW3RlbXBdID0gIShyZXN1bHRzW3RlbXBdID0gZWxlbSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHQvLyBBZGQgZWxlbWVudHMgdG8gcmVzdWx0cywgdGhyb3VnaCBwb3N0RmluZGVyIGlmIGRlZmluZWRcblx0XHR9IGVsc2Uge1xuXHRcdFx0bWF0Y2hlck91dCA9IGNvbmRlbnNlKFxuXHRcdFx0XHRtYXRjaGVyT3V0ID09PSByZXN1bHRzID9cblx0XHRcdFx0XHRtYXRjaGVyT3V0LnNwbGljZSggcHJlZXhpc3RpbmcsIG1hdGNoZXJPdXQubGVuZ3RoICkgOlxuXHRcdFx0XHRcdG1hdGNoZXJPdXRcblx0XHRcdCk7XG5cdFx0XHRpZiAoIHBvc3RGaW5kZXIgKSB7XG5cdFx0XHRcdHBvc3RGaW5kZXIoIG51bGwsIHJlc3VsdHMsIG1hdGNoZXJPdXQsIHhtbCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgbWF0Y2hlck91dCApO1xuXHRcdFx0fVxuXHRcdH1cblx0fSk7XG59XG5cbmZ1bmN0aW9uIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMgKSB7XG5cdHZhciBjaGVja0NvbnRleHQsIG1hdGNoZXIsIGosXG5cdFx0bGVuID0gdG9rZW5zLmxlbmd0aCxcblx0XHRsZWFkaW5nUmVsYXRpdmUgPSBFeHByLnJlbGF0aXZlWyB0b2tlbnNbMF0udHlwZSBdLFxuXHRcdGltcGxpY2l0UmVsYXRpdmUgPSBsZWFkaW5nUmVsYXRpdmUgfHwgRXhwci5yZWxhdGl2ZVtcIiBcIl0sXG5cdFx0aSA9IGxlYWRpbmdSZWxhdGl2ZSA/IDEgOiAwLFxuXG5cdFx0Ly8gVGhlIGZvdW5kYXRpb25hbCBtYXRjaGVyIGVuc3VyZXMgdGhhdCBlbGVtZW50cyBhcmUgcmVhY2hhYmxlIGZyb20gdG9wLWxldmVsIGNvbnRleHQocylcblx0XHRtYXRjaENvbnRleHQgPSBhZGRDb21iaW5hdG9yKCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBlbGVtID09PSBjaGVja0NvbnRleHQ7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoQW55Q29udGV4dCA9IGFkZENvbWJpbmF0b3IoIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGluZGV4T2YoIGNoZWNrQ29udGV4dCwgZWxlbSApID4gLTE7XG5cdFx0fSwgaW1wbGljaXRSZWxhdGl2ZSwgdHJ1ZSApLFxuXHRcdG1hdGNoZXJzID0gWyBmdW5jdGlvbiggZWxlbSwgY29udGV4dCwgeG1sICkge1xuXHRcdFx0dmFyIHJldCA9ICggIWxlYWRpbmdSZWxhdGl2ZSAmJiAoIHhtbCB8fCBjb250ZXh0ICE9PSBvdXRlcm1vc3RDb250ZXh0ICkgKSB8fCAoXG5cdFx0XHRcdChjaGVja0NvbnRleHQgPSBjb250ZXh0KS5ub2RlVHlwZSA/XG5cdFx0XHRcdFx0bWF0Y2hDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSA6XG5cdFx0XHRcdFx0bWF0Y2hBbnlDb250ZXh0KCBlbGVtLCBjb250ZXh0LCB4bWwgKSApO1xuXHRcdFx0Ly8gQXZvaWQgaGFuZ2luZyBvbnRvIGVsZW1lbnQgKGlzc3VlICMyOTkpXG5cdFx0XHRjaGVja0NvbnRleHQgPSBudWxsO1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9IF07XG5cblx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0aWYgKCAobWF0Y2hlciA9IEV4cHIucmVsYXRpdmVbIHRva2Vuc1tpXS50eXBlIF0pICkge1xuXHRcdFx0bWF0Y2hlcnMgPSBbIGFkZENvbWJpbmF0b3IoZWxlbWVudE1hdGNoZXIoIG1hdGNoZXJzICksIG1hdGNoZXIpIF07XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1hdGNoZXIgPSBFeHByLmZpbHRlclsgdG9rZW5zW2ldLnR5cGUgXS5hcHBseSggbnVsbCwgdG9rZW5zW2ldLm1hdGNoZXMgKTtcblxuXHRcdFx0Ly8gUmV0dXJuIHNwZWNpYWwgdXBvbiBzZWVpbmcgYSBwb3NpdGlvbmFsIG1hdGNoZXJcblx0XHRcdGlmICggbWF0Y2hlclsgZXhwYW5kbyBdICkge1xuXHRcdFx0XHQvLyBGaW5kIHRoZSBuZXh0IHJlbGF0aXZlIG9wZXJhdG9yIChpZiBhbnkpIGZvciBwcm9wZXIgaGFuZGxpbmdcblx0XHRcdFx0aiA9ICsraTtcblx0XHRcdFx0Zm9yICggOyBqIDwgbGVuOyBqKysgKSB7XG5cdFx0XHRcdFx0aWYgKCBFeHByLnJlbGF0aXZlWyB0b2tlbnNbal0udHlwZSBdICkge1xuXHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiBzZXRNYXRjaGVyKFxuXHRcdFx0XHRcdGkgPiAxICYmIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApLFxuXHRcdFx0XHRcdGkgPiAxICYmIHRvU2VsZWN0b3IoXG5cdFx0XHRcdFx0XHQvLyBJZiB0aGUgcHJlY2VkaW5nIHRva2VuIHdhcyBhIGRlc2NlbmRhbnQgY29tYmluYXRvciwgaW5zZXJ0IGFuIGltcGxpY2l0IGFueS1lbGVtZW50IGAqYFxuXHRcdFx0XHRcdFx0dG9rZW5zLnNsaWNlKCAwLCBpIC0gMSApLmNvbmNhdCh7IHZhbHVlOiB0b2tlbnNbIGkgLSAyIF0udHlwZSA9PT0gXCIgXCIgPyBcIipcIiA6IFwiXCIgfSlcblx0XHRcdFx0XHQpLnJlcGxhY2UoIHJ0cmltLCBcIiQxXCIgKSxcblx0XHRcdFx0XHRtYXRjaGVyLFxuXHRcdFx0XHRcdGkgPCBqICYmIG1hdGNoZXJGcm9tVG9rZW5zKCB0b2tlbnMuc2xpY2UoIGksIGogKSApLFxuXHRcdFx0XHRcdGogPCBsZW4gJiYgbWF0Y2hlckZyb21Ub2tlbnMoICh0b2tlbnMgPSB0b2tlbnMuc2xpY2UoIGogKSkgKSxcblx0XHRcdFx0XHRqIDwgbGVuICYmIHRvU2VsZWN0b3IoIHRva2VucyApXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVycy5wdXNoKCBtYXRjaGVyICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW1lbnRNYXRjaGVyKCBtYXRjaGVycyApO1xufVxuXG5mdW5jdGlvbiBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSB7XG5cdHZhciBieVNldCA9IHNldE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0YnlFbGVtZW50ID0gZWxlbWVudE1hdGNoZXJzLmxlbmd0aCA+IDAsXG5cdFx0c3VwZXJNYXRjaGVyID0gZnVuY3Rpb24oIHNlZWQsIGNvbnRleHQsIHhtbCwgcmVzdWx0cywgb3V0ZXJtb3N0ICkge1xuXHRcdFx0dmFyIGVsZW0sIGosIG1hdGNoZXIsXG5cdFx0XHRcdG1hdGNoZWRDb3VudCA9IDAsXG5cdFx0XHRcdGkgPSBcIjBcIixcblx0XHRcdFx0dW5tYXRjaGVkID0gc2VlZCAmJiBbXSxcblx0XHRcdFx0c2V0TWF0Y2hlZCA9IFtdLFxuXHRcdFx0XHRjb250ZXh0QmFja3VwID0gb3V0ZXJtb3N0Q29udGV4dCxcblx0XHRcdFx0Ly8gV2UgbXVzdCBhbHdheXMgaGF2ZSBlaXRoZXIgc2VlZCBlbGVtZW50cyBvciBvdXRlcm1vc3QgY29udGV4dFxuXHRcdFx0XHRlbGVtcyA9IHNlZWQgfHwgYnlFbGVtZW50ICYmIEV4cHIuZmluZFtcIlRBR1wiXSggXCIqXCIsIG91dGVybW9zdCApLFxuXHRcdFx0XHQvLyBVc2UgaW50ZWdlciBkaXJydW5zIGlmZiB0aGlzIGlzIHRoZSBvdXRlcm1vc3QgbWF0Y2hlclxuXHRcdFx0XHRkaXJydW5zVW5pcXVlID0gKGRpcnJ1bnMgKz0gY29udGV4dEJhY2t1cCA9PSBudWxsID8gMSA6IE1hdGgucmFuZG9tKCkgfHwgMC4xKSxcblx0XHRcdFx0bGVuID0gZWxlbXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0b3V0ZXJtb3N0Q29udGV4dCA9IGNvbnRleHQgPT09IGRvY3VtZW50IHx8IGNvbnRleHQgfHwgb3V0ZXJtb3N0O1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgZWxlbWVudHMgcGFzc2luZyBlbGVtZW50TWF0Y2hlcnMgZGlyZWN0bHkgdG8gcmVzdWx0c1xuXHRcdFx0Ly8gU3VwcG9ydDogSUU8OSwgU2FmYXJpXG5cdFx0XHQvLyBUb2xlcmF0ZSBOb2RlTGlzdCBwcm9wZXJ0aWVzIChJRTogXCJsZW5ndGhcIjsgU2FmYXJpOiA8bnVtYmVyPikgbWF0Y2hpbmcgZWxlbWVudHMgYnkgaWRcblx0XHRcdGZvciAoIDsgaSAhPT0gbGVuICYmIChlbGVtID0gZWxlbXNbaV0pICE9IG51bGw7IGkrKyApIHtcblx0XHRcdFx0aWYgKCBieUVsZW1lbnQgJiYgZWxlbSApIHtcblx0XHRcdFx0XHRqID0gMDtcblx0XHRcdFx0XHRpZiAoICFjb250ZXh0ICYmIGVsZW0ub3duZXJEb2N1bWVudCAhPT0gZG9jdW1lbnQgKSB7XG5cdFx0XHRcdFx0XHRzZXREb2N1bWVudCggZWxlbSApO1xuXHRcdFx0XHRcdFx0eG1sID0gIWRvY3VtZW50SXNIVE1MO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHR3aGlsZSAoIChtYXRjaGVyID0gZWxlbWVudE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVyKCBlbGVtLCBjb250ZXh0IHx8IGRvY3VtZW50LCB4bWwpICkge1xuXHRcdFx0XHRcdFx0XHRyZXN1bHRzLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggb3V0ZXJtb3N0ICkge1xuXHRcdFx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gVHJhY2sgdW5tYXRjaGVkIGVsZW1lbnRzIGZvciBzZXQgZmlsdGVyc1xuXHRcdFx0XHRpZiAoIGJ5U2V0ICkge1xuXHRcdFx0XHRcdC8vIFRoZXkgd2lsbCBoYXZlIGdvbmUgdGhyb3VnaCBhbGwgcG9zc2libGUgbWF0Y2hlcnNcblx0XHRcdFx0XHRpZiAoIChlbGVtID0gIW1hdGNoZXIgJiYgZWxlbSkgKSB7XG5cdFx0XHRcdFx0XHRtYXRjaGVkQ291bnQtLTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBMZW5ndGhlbiB0aGUgYXJyYXkgZm9yIGV2ZXJ5IGVsZW1lbnQsIG1hdGNoZWQgb3Igbm90XG5cdFx0XHRcdFx0aWYgKCBzZWVkICkge1xuXHRcdFx0XHRcdFx0dW5tYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gYGlgIGlzIG5vdyB0aGUgY291bnQgb2YgZWxlbWVudHMgdmlzaXRlZCBhYm92ZSwgYW5kIGFkZGluZyBpdCB0byBgbWF0Y2hlZENvdW50YFxuXHRcdFx0Ly8gbWFrZXMgdGhlIGxhdHRlciBub25uZWdhdGl2ZS5cblx0XHRcdG1hdGNoZWRDb3VudCArPSBpO1xuXG5cdFx0XHQvLyBBcHBseSBzZXQgZmlsdGVycyB0byB1bm1hdGNoZWQgZWxlbWVudHNcblx0XHRcdC8vIE5PVEU6IFRoaXMgY2FuIGJlIHNraXBwZWQgaWYgdGhlcmUgYXJlIG5vIHVubWF0Y2hlZCBlbGVtZW50cyAoaS5lLiwgYG1hdGNoZWRDb3VudGBcblx0XHRcdC8vIGVxdWFscyBgaWApLCB1bmxlc3Mgd2UgZGlkbid0IHZpc2l0IF9hbnlfIGVsZW1lbnRzIGluIHRoZSBhYm92ZSBsb29wIGJlY2F1c2Ugd2UgaGF2ZVxuXHRcdFx0Ly8gbm8gZWxlbWVudCBtYXRjaGVycyBhbmQgbm8gc2VlZC5cblx0XHRcdC8vIEluY3JlbWVudGluZyBhbiBpbml0aWFsbHktc3RyaW5nIFwiMFwiIGBpYCBhbGxvd3MgYGlgIHRvIHJlbWFpbiBhIHN0cmluZyBvbmx5IGluIHRoYXRcblx0XHRcdC8vIGNhc2UsIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgXCIwMFwiIGBtYXRjaGVkQ291bnRgIHRoYXQgZGlmZmVycyBmcm9tIGBpYCBidXQgaXMgYWxzb1xuXHRcdFx0Ly8gbnVtZXJpY2FsbHkgemVyby5cblx0XHRcdGlmICggYnlTZXQgJiYgaSAhPT0gbWF0Y2hlZENvdW50ICkge1xuXHRcdFx0XHRqID0gMDtcblx0XHRcdFx0d2hpbGUgKCAobWF0Y2hlciA9IHNldE1hdGNoZXJzW2orK10pICkge1xuXHRcdFx0XHRcdG1hdGNoZXIoIHVubWF0Y2hlZCwgc2V0TWF0Y2hlZCwgY29udGV4dCwgeG1sICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRpZiAoIHNlZWQgKSB7XG5cdFx0XHRcdFx0Ly8gUmVpbnRlZ3JhdGUgZWxlbWVudCBtYXRjaGVzIHRvIGVsaW1pbmF0ZSB0aGUgbmVlZCBmb3Igc29ydGluZ1xuXHRcdFx0XHRcdGlmICggbWF0Y2hlZENvdW50ID4gMCApIHtcblx0XHRcdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoICEodW5tYXRjaGVkW2ldIHx8IHNldE1hdGNoZWRbaV0pICkge1xuXHRcdFx0XHRcdFx0XHRcdHNldE1hdGNoZWRbaV0gPSBwb3AuY2FsbCggcmVzdWx0cyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gRGlzY2FyZCBpbmRleCBwbGFjZWhvbGRlciB2YWx1ZXMgdG8gZ2V0IG9ubHkgYWN0dWFsIG1hdGNoZXNcblx0XHRcdFx0XHRzZXRNYXRjaGVkID0gY29uZGVuc2UoIHNldE1hdGNoZWQgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFkZCBtYXRjaGVzIHRvIHJlc3VsdHNcblx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2V0TWF0Y2hlZCApO1xuXG5cdFx0XHRcdC8vIFNlZWRsZXNzIHNldCBtYXRjaGVzIHN1Y2NlZWRpbmcgbXVsdGlwbGUgc3VjY2Vzc2Z1bCBtYXRjaGVycyBzdGlwdWxhdGUgc29ydGluZ1xuXHRcdFx0XHRpZiAoIG91dGVybW9zdCAmJiAhc2VlZCAmJiBzZXRNYXRjaGVkLmxlbmd0aCA+IDAgJiZcblx0XHRcdFx0XHQoIG1hdGNoZWRDb3VudCArIHNldE1hdGNoZXJzLmxlbmd0aCApID4gMSApIHtcblxuXHRcdFx0XHRcdFNpenpsZS51bmlxdWVTb3J0KCByZXN1bHRzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gT3ZlcnJpZGUgbWFuaXB1bGF0aW9uIG9mIGdsb2JhbHMgYnkgbmVzdGVkIG1hdGNoZXJzXG5cdFx0XHRpZiAoIG91dGVybW9zdCApIHtcblx0XHRcdFx0ZGlycnVucyA9IGRpcnJ1bnNVbmlxdWU7XG5cdFx0XHRcdG91dGVybW9zdENvbnRleHQgPSBjb250ZXh0QmFja3VwO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXR1cm4gdW5tYXRjaGVkO1xuXHRcdH07XG5cblx0cmV0dXJuIGJ5U2V0ID9cblx0XHRtYXJrRnVuY3Rpb24oIHN1cGVyTWF0Y2hlciApIDpcblx0XHRzdXBlck1hdGNoZXI7XG59XG5cbmNvbXBpbGUgPSBTaXp6bGUuY29tcGlsZSA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgbWF0Y2ggLyogSW50ZXJuYWwgVXNlIE9ubHkgKi8gKSB7XG5cdHZhciBpLFxuXHRcdHNldE1hdGNoZXJzID0gW10sXG5cdFx0ZWxlbWVudE1hdGNoZXJzID0gW10sXG5cdFx0Y2FjaGVkID0gY29tcGlsZXJDYWNoZVsgc2VsZWN0b3IgKyBcIiBcIiBdO1xuXG5cdGlmICggIWNhY2hlZCApIHtcblx0XHQvLyBHZW5lcmF0ZSBhIGZ1bmN0aW9uIG9mIHJlY3Vyc2l2ZSBmdW5jdGlvbnMgdGhhdCBjYW4gYmUgdXNlZCB0byBjaGVjayBlYWNoIGVsZW1lbnRcblx0XHRpZiAoICFtYXRjaCApIHtcblx0XHRcdG1hdGNoID0gdG9rZW5pemUoIHNlbGVjdG9yICk7XG5cdFx0fVxuXHRcdGkgPSBtYXRjaC5sZW5ndGg7XG5cdFx0d2hpbGUgKCBpLS0gKSB7XG5cdFx0XHRjYWNoZWQgPSBtYXRjaGVyRnJvbVRva2VucyggbWF0Y2hbaV0gKTtcblx0XHRcdGlmICggY2FjaGVkWyBleHBhbmRvIF0gKSB7XG5cdFx0XHRcdHNldE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbWVudE1hdGNoZXJzLnB1c2goIGNhY2hlZCApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIENhY2hlIHRoZSBjb21waWxlZCBmdW5jdGlvblxuXHRcdGNhY2hlZCA9IGNvbXBpbGVyQ2FjaGUoIHNlbGVjdG9yLCBtYXRjaGVyRnJvbUdyb3VwTWF0Y2hlcnMoIGVsZW1lbnRNYXRjaGVycywgc2V0TWF0Y2hlcnMgKSApO1xuXG5cdFx0Ly8gU2F2ZSBzZWxlY3RvciBhbmQgdG9rZW5pemF0aW9uXG5cdFx0Y2FjaGVkLnNlbGVjdG9yID0gc2VsZWN0b3I7XG5cdH1cblx0cmV0dXJuIGNhY2hlZDtcbn07XG5cbi8qKlxuICogQSBsb3ctbGV2ZWwgc2VsZWN0aW9uIGZ1bmN0aW9uIHRoYXQgd29ya3Mgd2l0aCBTaXp6bGUncyBjb21waWxlZFxuICogIHNlbGVjdG9yIGZ1bmN0aW9uc1xuICogQHBhcmFtIHtTdHJpbmd8RnVuY3Rpb259IHNlbGVjdG9yIEEgc2VsZWN0b3Igb3IgYSBwcmUtY29tcGlsZWRcbiAqICBzZWxlY3RvciBmdW5jdGlvbiBidWlsdCB3aXRoIFNpenpsZS5jb21waWxlXG4gKiBAcGFyYW0ge0VsZW1lbnR9IGNvbnRleHRcbiAqIEBwYXJhbSB7QXJyYXl9IFtyZXN1bHRzXVxuICogQHBhcmFtIHtBcnJheX0gW3NlZWRdIEEgc2V0IG9mIGVsZW1lbnRzIHRvIG1hdGNoIGFnYWluc3RcbiAqL1xuc2VsZWN0ID0gU2l6emxlLnNlbGVjdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcmVzdWx0cywgc2VlZCApIHtcblx0dmFyIGksIHRva2VucywgdG9rZW4sIHR5cGUsIGZpbmQsXG5cdFx0Y29tcGlsZWQgPSB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiAmJiBzZWxlY3Rvcixcblx0XHRtYXRjaCA9ICFzZWVkICYmIHRva2VuaXplKCAoc2VsZWN0b3IgPSBjb21waWxlZC5zZWxlY3RvciB8fCBzZWxlY3RvcikgKTtcblxuXHRyZXN1bHRzID0gcmVzdWx0cyB8fCBbXTtcblxuXHQvLyBUcnkgdG8gbWluaW1pemUgb3BlcmF0aW9ucyBpZiB0aGVyZSBpcyBvbmx5IG9uZSBzZWxlY3RvciBpbiB0aGUgbGlzdCBhbmQgbm8gc2VlZFxuXHQvLyAodGhlIGxhdHRlciBvZiB3aGljaCBndWFyYW50ZWVzIHVzIGNvbnRleHQpXG5cdGlmICggbWF0Y2gubGVuZ3RoID09PSAxICkge1xuXG5cdFx0Ly8gUmVkdWNlIGNvbnRleHQgaWYgdGhlIGxlYWRpbmcgY29tcG91bmQgc2VsZWN0b3IgaXMgYW4gSURcblx0XHR0b2tlbnMgPSBtYXRjaFswXSA9IG1hdGNoWzBdLnNsaWNlKCAwICk7XG5cdFx0aWYgKCB0b2tlbnMubGVuZ3RoID4gMiAmJiAodG9rZW4gPSB0b2tlbnNbMF0pLnR5cGUgPT09IFwiSURcIiAmJlxuXHRcdFx0XHRjb250ZXh0Lm5vZGVUeXBlID09PSA5ICYmIGRvY3VtZW50SXNIVE1MICYmIEV4cHIucmVsYXRpdmVbIHRva2Vuc1sxXS50eXBlIF0gKSB7XG5cblx0XHRcdGNvbnRleHQgPSAoIEV4cHIuZmluZFtcIklEXCJdKCB0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UocnVuZXNjYXBlLCBmdW5lc2NhcGUpLCBjb250ZXh0ICkgfHwgW10gKVswXTtcblx0XHRcdGlmICggIWNvbnRleHQgKSB7XG5cdFx0XHRcdHJldHVybiByZXN1bHRzO1xuXG5cdFx0XHQvLyBQcmVjb21waWxlZCBtYXRjaGVycyB3aWxsIHN0aWxsIHZlcmlmeSBhbmNlc3RyeSwgc28gc3RlcCB1cCBhIGxldmVsXG5cdFx0XHR9IGVsc2UgaWYgKCBjb21waWxlZCApIHtcblx0XHRcdFx0Y29udGV4dCA9IGNvbnRleHQucGFyZW50Tm9kZTtcblx0XHRcdH1cblxuXHRcdFx0c2VsZWN0b3IgPSBzZWxlY3Rvci5zbGljZSggdG9rZW5zLnNoaWZ0KCkudmFsdWUubGVuZ3RoICk7XG5cdFx0fVxuXG5cdFx0Ly8gRmV0Y2ggYSBzZWVkIHNldCBmb3IgcmlnaHQtdG8tbGVmdCBtYXRjaGluZ1xuXHRcdGkgPSBtYXRjaEV4cHJbXCJuZWVkc0NvbnRleHRcIl0udGVzdCggc2VsZWN0b3IgKSA/IDAgOiB0b2tlbnMubGVuZ3RoO1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0dG9rZW4gPSB0b2tlbnNbaV07XG5cblx0XHRcdC8vIEFib3J0IGlmIHdlIGhpdCBhIGNvbWJpbmF0b3Jcblx0XHRcdGlmICggRXhwci5yZWxhdGl2ZVsgKHR5cGUgPSB0b2tlbi50eXBlKSBdICkge1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHRcdGlmICggKGZpbmQgPSBFeHByLmZpbmRbIHR5cGUgXSkgKSB7XG5cdFx0XHRcdC8vIFNlYXJjaCwgZXhwYW5kaW5nIGNvbnRleHQgZm9yIGxlYWRpbmcgc2libGluZyBjb21iaW5hdG9yc1xuXHRcdFx0XHRpZiAoIChzZWVkID0gZmluZChcblx0XHRcdFx0XHR0b2tlbi5tYXRjaGVzWzBdLnJlcGxhY2UoIHJ1bmVzY2FwZSwgZnVuZXNjYXBlICksXG5cdFx0XHRcdFx0cnNpYmxpbmcudGVzdCggdG9rZW5zWzBdLnR5cGUgKSAmJiB0ZXN0Q29udGV4dCggY29udGV4dC5wYXJlbnROb2RlICkgfHwgY29udGV4dFxuXHRcdFx0XHQpKSApIHtcblxuXHRcdFx0XHRcdC8vIElmIHNlZWQgaXMgZW1wdHkgb3Igbm8gdG9rZW5zIHJlbWFpbiwgd2UgY2FuIHJldHVybiBlYXJseVxuXHRcdFx0XHRcdHRva2Vucy5zcGxpY2UoIGksIDEgKTtcblx0XHRcdFx0XHRzZWxlY3RvciA9IHNlZWQubGVuZ3RoICYmIHRvU2VsZWN0b3IoIHRva2VucyApO1xuXHRcdFx0XHRcdGlmICggIXNlbGVjdG9yICkge1xuXHRcdFx0XHRcdFx0cHVzaC5hcHBseSggcmVzdWx0cywgc2VlZCApO1xuXHRcdFx0XHRcdFx0cmV0dXJuIHJlc3VsdHM7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBDb21waWxlIGFuZCBleGVjdXRlIGEgZmlsdGVyaW5nIGZ1bmN0aW9uIGlmIG9uZSBpcyBub3QgcHJvdmlkZWRcblx0Ly8gUHJvdmlkZSBgbWF0Y2hgIHRvIGF2b2lkIHJldG9rZW5pemF0aW9uIGlmIHdlIG1vZGlmaWVkIHRoZSBzZWxlY3RvciBhYm92ZVxuXHQoIGNvbXBpbGVkIHx8IGNvbXBpbGUoIHNlbGVjdG9yLCBtYXRjaCApICkoXG5cdFx0c2VlZCxcblx0XHRjb250ZXh0LFxuXHRcdCFkb2N1bWVudElzSFRNTCxcblx0XHRyZXN1bHRzLFxuXHRcdCFjb250ZXh0IHx8IHJzaWJsaW5nLnRlc3QoIHNlbGVjdG9yICkgJiYgdGVzdENvbnRleHQoIGNvbnRleHQucGFyZW50Tm9kZSApIHx8IGNvbnRleHRcblx0KTtcblx0cmV0dXJuIHJlc3VsdHM7XG59O1xuXG4vLyBPbmUtdGltZSBhc3NpZ25tZW50c1xuXG4vLyBTb3J0IHN0YWJpbGl0eVxuc3VwcG9ydC5zb3J0U3RhYmxlID0gZXhwYW5kby5zcGxpdChcIlwiKS5zb3J0KCBzb3J0T3JkZXIgKS5qb2luKFwiXCIpID09PSBleHBhbmRvO1xuXG4vLyBTdXBwb3J0OiBDaHJvbWUgMTQtMzUrXG4vLyBBbHdheXMgYXNzdW1lIGR1cGxpY2F0ZXMgaWYgdGhleSBhcmVuJ3QgcGFzc2VkIHRvIHRoZSBjb21wYXJpc29uIGZ1bmN0aW9uXG5zdXBwb3J0LmRldGVjdER1cGxpY2F0ZXMgPSAhIWhhc0R1cGxpY2F0ZTtcblxuLy8gSW5pdGlhbGl6ZSBhZ2FpbnN0IHRoZSBkZWZhdWx0IGRvY3VtZW50XG5zZXREb2N1bWVudCgpO1xuXG4vLyBTdXBwb3J0OiBXZWJraXQ8NTM3LjMyIC0gU2FmYXJpIDYuMC4zL0Nocm9tZSAyNSAoZml4ZWQgaW4gQ2hyb21lIDI3KVxuLy8gRGV0YWNoZWQgbm9kZXMgY29uZm91bmRpbmdseSBmb2xsb3cgKmVhY2ggb3RoZXIqXG5zdXBwb3J0LnNvcnREZXRhY2hlZCA9IGFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdC8vIFNob3VsZCByZXR1cm4gMSwgYnV0IHJldHVybnMgNCAoZm9sbG93aW5nKVxuXHRyZXR1cm4gZWwuY29tcGFyZURvY3VtZW50UG9zaXRpb24oIGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmaWVsZHNldFwiKSApICYgMTtcbn0pO1xuXG4vLyBTdXBwb3J0OiBJRTw4XG4vLyBQcmV2ZW50IGF0dHJpYnV0ZS9wcm9wZXJ0eSBcImludGVycG9sYXRpb25cIlxuLy8gaHR0cHM6Ly9tc2RuLm1pY3Jvc29mdC5jb20vZW4tdXMvbGlicmFyeS9tczUzNjQyOSUyOFZTLjg1JTI5LmFzcHhcbmlmICggIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdGVsLmlubmVySFRNTCA9IFwiPGEgaHJlZj0nIyc+PC9hPlwiO1xuXHRyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpID09PSBcIiNcIiA7XG59KSApIHtcblx0YWRkSGFuZGxlKCBcInR5cGV8aHJlZnxoZWlnaHR8d2lkdGhcIiwgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdGlmICggIWlzWE1MICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBuYW1lLCBuYW1lLnRvTG93ZXJDYXNlKCkgPT09IFwidHlwZVwiID8gMSA6IDIgKTtcblx0XHR9XG5cdH0pO1xufVxuXG4vLyBTdXBwb3J0OiBJRTw5XG4vLyBVc2UgZGVmYXVsdFZhbHVlIGluIHBsYWNlIG9mIGdldEF0dHJpYnV0ZShcInZhbHVlXCIpXG5pZiAoICFzdXBwb3J0LmF0dHJpYnV0ZXMgfHwgIWFzc2VydChmdW5jdGlvbiggZWwgKSB7XG5cdGVsLmlubmVySFRNTCA9IFwiPGlucHV0Lz5cIjtcblx0ZWwuZmlyc3RDaGlsZC5zZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiwgXCJcIiApO1xuXHRyZXR1cm4gZWwuZmlyc3RDaGlsZC5nZXRBdHRyaWJ1dGUoIFwidmFsdWVcIiApID09PSBcIlwiO1xufSkgKSB7XG5cdGFkZEhhbmRsZSggXCJ2YWx1ZVwiLCBmdW5jdGlvbiggZWxlbSwgbmFtZSwgaXNYTUwgKSB7XG5cdFx0aWYgKCAhaXNYTUwgJiYgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpID09PSBcImlucHV0XCIgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbS5kZWZhdWx0VmFsdWU7XG5cdFx0fVxuXHR9KTtcbn1cblxuLy8gU3VwcG9ydDogSUU8OVxuLy8gVXNlIGdldEF0dHJpYnV0ZU5vZGUgdG8gZmV0Y2ggYm9vbGVhbnMgd2hlbiBnZXRBdHRyaWJ1dGUgbGllc1xuaWYgKCAhYXNzZXJ0KGZ1bmN0aW9uKCBlbCApIHtcblx0cmV0dXJuIGVsLmdldEF0dHJpYnV0ZShcImRpc2FibGVkXCIpID09IG51bGw7XG59KSApIHtcblx0YWRkSGFuZGxlKCBib29sZWFucywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIGlzWE1MICkge1xuXHRcdHZhciB2YWw7XG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cdFx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdID09PSB0cnVlID8gbmFtZS50b0xvd2VyQ2FzZSgpIDpcblx0XHRcdFx0XHQodmFsID0gZWxlbS5nZXRBdHRyaWJ1dGVOb2RlKCBuYW1lICkpICYmIHZhbC5zcGVjaWZpZWQgP1xuXHRcdFx0XHRcdHZhbC52YWx1ZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0fVxuXHR9KTtcbn1cblxucmV0dXJuIFNpenpsZTtcblxufSkoIHdpbmRvdyApO1xuXG5cblxualF1ZXJ5LmZpbmQgPSBTaXp6bGU7XG5qUXVlcnkuZXhwciA9IFNpenpsZS5zZWxlY3RvcnM7XG5cbi8vIERlcHJlY2F0ZWRcbmpRdWVyeS5leHByWyBcIjpcIiBdID0galF1ZXJ5LmV4cHIucHNldWRvcztcbmpRdWVyeS51bmlxdWVTb3J0ID0galF1ZXJ5LnVuaXF1ZSA9IFNpenpsZS51bmlxdWVTb3J0O1xualF1ZXJ5LnRleHQgPSBTaXp6bGUuZ2V0VGV4dDtcbmpRdWVyeS5pc1hNTERvYyA9IFNpenpsZS5pc1hNTDtcbmpRdWVyeS5jb250YWlucyA9IFNpenpsZS5jb250YWlucztcbmpRdWVyeS5lc2NhcGVTZWxlY3RvciA9IFNpenpsZS5lc2NhcGU7XG5cblxuXG5cbnZhciBkaXIgPSBmdW5jdGlvbiggZWxlbSwgZGlyLCB1bnRpbCApIHtcblx0dmFyIG1hdGNoZWQgPSBbXSxcblx0XHR0cnVuY2F0ZSA9IHVudGlsICE9PSB1bmRlZmluZWQ7XG5cblx0d2hpbGUgKCAoIGVsZW0gPSBlbGVtWyBkaXIgXSApICYmIGVsZW0ubm9kZVR5cGUgIT09IDkgKSB7XG5cdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0aWYgKCB0cnVuY2F0ZSAmJiBqUXVlcnkoIGVsZW0gKS5pcyggdW50aWwgKSApIHtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0XHRtYXRjaGVkLnB1c2goIGVsZW0gKTtcblx0XHR9XG5cdH1cblx0cmV0dXJuIG1hdGNoZWQ7XG59O1xuXG5cbnZhciBzaWJsaW5ncyA9IGZ1bmN0aW9uKCBuLCBlbGVtICkge1xuXHR2YXIgbWF0Y2hlZCA9IFtdO1xuXG5cdGZvciAoIDsgbjsgbiA9IG4ubmV4dFNpYmxpbmcgKSB7XG5cdFx0aWYgKCBuLm5vZGVUeXBlID09PSAxICYmIG4gIT09IGVsZW0gKSB7XG5cdFx0XHRtYXRjaGVkLnB1c2goIG4gKTtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gbWF0Y2hlZDtcbn07XG5cblxudmFyIHJuZWVkc0NvbnRleHQgPSBqUXVlcnkuZXhwci5tYXRjaC5uZWVkc0NvbnRleHQ7XG5cblxuXG5mdW5jdGlvbiBub2RlTmFtZSggZWxlbSwgbmFtZSApIHtcblxuICByZXR1cm4gZWxlbS5ub2RlTmFtZSAmJiBlbGVtLm5vZGVOYW1lLnRvTG93ZXJDYXNlKCkgPT09IG5hbWUudG9Mb3dlckNhc2UoKTtcblxufTtcbnZhciByc2luZ2xlVGFnID0gKCAvXjwoW2Etel1bXlxcL1xcMD46XFx4MjBcXHRcXHJcXG5cXGZdKilbXFx4MjBcXHRcXHJcXG5cXGZdKlxcLz8+KD86PFxcL1xcMT58KSQvaSApO1xuXG5cblxuLy8gSW1wbGVtZW50IHRoZSBpZGVudGljYWwgZnVuY3Rpb25hbGl0eSBmb3IgZmlsdGVyIGFuZCBub3RcbmZ1bmN0aW9uIHdpbm5vdyggZWxlbWVudHMsIHF1YWxpZmllciwgbm90ICkge1xuXHRpZiAoIGlzRnVuY3Rpb24oIHF1YWxpZmllciApICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtLCBpICkge1xuXHRcdFx0cmV0dXJuICEhcXVhbGlmaWVyLmNhbGwoIGVsZW0sIGksIGVsZW0gKSAhPT0gbm90O1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIFNpbmdsZSBlbGVtZW50XG5cdGlmICggcXVhbGlmaWVyLm5vZGVUeXBlICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggZWxlbSA9PT0gcXVhbGlmaWVyICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBBcnJheWxpa2Ugb2YgZWxlbWVudHMgKGpRdWVyeSwgYXJndW1lbnRzLCBBcnJheSlcblx0aWYgKCB0eXBlb2YgcXVhbGlmaWVyICE9PSBcInN0cmluZ1wiICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ3JlcCggZWxlbWVudHMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuICggaW5kZXhPZi5jYWxsKCBxdWFsaWZpZXIsIGVsZW0gKSA+IC0xICkgIT09IG5vdDtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBGaWx0ZXJlZCBkaXJlY3RseSBmb3IgYm90aCBzaW1wbGUgYW5kIGNvbXBsZXggc2VsZWN0b3JzXG5cdHJldHVybiBqUXVlcnkuZmlsdGVyKCBxdWFsaWZpZXIsIGVsZW1lbnRzLCBub3QgKTtcbn1cblxualF1ZXJ5LmZpbHRlciA9IGZ1bmN0aW9uKCBleHByLCBlbGVtcywgbm90ICkge1xuXHR2YXIgZWxlbSA9IGVsZW1zWyAwIF07XG5cblx0aWYgKCBub3QgKSB7XG5cdFx0ZXhwciA9IFwiOm5vdChcIiArIGV4cHIgKyBcIilcIjtcblx0fVxuXG5cdGlmICggZWxlbXMubGVuZ3RoID09PSAxICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZWxlbSwgZXhwciApID8gWyBlbGVtIF0gOiBbXTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnkuZmluZC5tYXRjaGVzKCBleHByLCBqUXVlcnkuZ3JlcCggZWxlbXMsIGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBlbGVtLm5vZGVUeXBlID09PSAxO1xuXHR9ICkgKTtcbn07XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZmluZDogZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBpLCByZXQsXG5cdFx0XHRsZW4gPSB0aGlzLmxlbmd0aCxcblx0XHRcdHNlbGYgPSB0aGlzO1xuXG5cdFx0aWYgKCB0eXBlb2Ygc2VsZWN0b3IgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIGpRdWVyeSggc2VsZWN0b3IgKS5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0XHRcdGlmICggalF1ZXJ5LmNvbnRhaW5zKCBzZWxmWyBpIF0sIHRoaXMgKSApIHtcblx0XHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSApICk7XG5cdFx0fVxuXG5cdFx0cmV0ID0gdGhpcy5wdXNoU3RhY2soIFtdICk7XG5cblx0XHRmb3IgKCBpID0gMDsgaSA8IGxlbjsgaSsrICkge1xuXHRcdFx0alF1ZXJ5LmZpbmQoIHNlbGVjdG9yLCBzZWxmWyBpIF0sIHJldCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBsZW4gPiAxID8galF1ZXJ5LnVuaXF1ZVNvcnQoIHJldCApIDogcmV0O1xuXHR9LFxuXHRmaWx0ZXI6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIHdpbm5vdyggdGhpcywgc2VsZWN0b3IgfHwgW10sIGZhbHNlICkgKTtcblx0fSxcblx0bm90OiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCB3aW5ub3coIHRoaXMsIHNlbGVjdG9yIHx8IFtdLCB0cnVlICkgKTtcblx0fSxcblx0aXM6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gISF3aW5ub3coXG5cdFx0XHR0aGlzLFxuXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGEgcG9zaXRpb25hbC9yZWxhdGl2ZSBzZWxlY3RvciwgY2hlY2sgbWVtYmVyc2hpcCBpbiB0aGUgcmV0dXJuZWQgc2V0XG5cdFx0XHQvLyBzbyAkKFwicDpmaXJzdFwiKS5pcyhcInA6bGFzdFwiKSB3b24ndCByZXR1cm4gdHJ1ZSBmb3IgYSBkb2Mgd2l0aCB0d28gXCJwXCIuXG5cdFx0XHR0eXBlb2Ygc2VsZWN0b3IgPT09IFwic3RyaW5nXCIgJiYgcm5lZWRzQ29udGV4dC50ZXN0KCBzZWxlY3RvciApID9cblx0XHRcdFx0alF1ZXJ5KCBzZWxlY3RvciApIDpcblx0XHRcdFx0c2VsZWN0b3IgfHwgW10sXG5cdFx0XHRmYWxzZVxuXHRcdCkubGVuZ3RoO1xuXHR9XG59ICk7XG5cblxuLy8gSW5pdGlhbGl6ZSBhIGpRdWVyeSBvYmplY3RcblxuXG4vLyBBIGNlbnRyYWwgcmVmZXJlbmNlIHRvIHRoZSByb290IGpRdWVyeShkb2N1bWVudClcbnZhciByb290alF1ZXJ5LFxuXG5cdC8vIEEgc2ltcGxlIHdheSB0byBjaGVjayBmb3IgSFRNTCBzdHJpbmdzXG5cdC8vIFByaW9yaXRpemUgI2lkIG92ZXIgPHRhZz4gdG8gYXZvaWQgWFNTIHZpYSBsb2NhdGlvbi5oYXNoICgjOTUyMSlcblx0Ly8gU3RyaWN0IEhUTUwgcmVjb2duaXRpb24gKCMxMTI5MDogbXVzdCBzdGFydCB3aXRoIDwpXG5cdC8vIFNob3J0Y3V0IHNpbXBsZSAjaWQgY2FzZSBmb3Igc3BlZWRcblx0cnF1aWNrRXhwciA9IC9eKD86XFxzKig8W1xcd1xcV10rPilbXj5dKnwjKFtcXHctXSspKSQvLFxuXG5cdGluaXQgPSBqUXVlcnkuZm4uaW5pdCA9IGZ1bmN0aW9uKCBzZWxlY3RvciwgY29udGV4dCwgcm9vdCApIHtcblx0XHR2YXIgbWF0Y2gsIGVsZW07XG5cblx0XHQvLyBIQU5ETEU6ICQoXCJcIiksICQobnVsbCksICQodW5kZWZpbmVkKSwgJChmYWxzZSlcblx0XHRpZiAoICFzZWxlY3RvciApIHtcblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblxuXHRcdC8vIE1ldGhvZCBpbml0KCkgYWNjZXB0cyBhbiBhbHRlcm5hdGUgcm9vdGpRdWVyeVxuXHRcdC8vIHNvIG1pZ3JhdGUgY2FuIHN1cHBvcnQgalF1ZXJ5LnN1YiAoZ2gtMjEwMSlcblx0XHRyb290ID0gcm9vdCB8fCByb290alF1ZXJ5O1xuXG5cdFx0Ly8gSGFuZGxlIEhUTUwgc3RyaW5nc1xuXHRcdGlmICggdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0aWYgKCBzZWxlY3RvclsgMCBdID09PSBcIjxcIiAmJlxuXHRcdFx0XHRzZWxlY3Rvclsgc2VsZWN0b3IubGVuZ3RoIC0gMSBdID09PSBcIj5cIiAmJlxuXHRcdFx0XHRzZWxlY3Rvci5sZW5ndGggPj0gMyApIHtcblxuXHRcdFx0XHQvLyBBc3N1bWUgdGhhdCBzdHJpbmdzIHRoYXQgc3RhcnQgYW5kIGVuZCB3aXRoIDw+IGFyZSBIVE1MIGFuZCBza2lwIHRoZSByZWdleCBjaGVja1xuXHRcdFx0XHRtYXRjaCA9IFsgbnVsbCwgc2VsZWN0b3IsIG51bGwgXTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0bWF0Y2ggPSBycXVpY2tFeHByLmV4ZWMoIHNlbGVjdG9yICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE1hdGNoIGh0bWwgb3IgbWFrZSBzdXJlIG5vIGNvbnRleHQgaXMgc3BlY2lmaWVkIGZvciAjaWRcblx0XHRcdGlmICggbWF0Y2ggJiYgKCBtYXRjaFsgMSBdIHx8ICFjb250ZXh0ICkgKSB7XG5cblx0XHRcdFx0Ly8gSEFORExFOiAkKGh0bWwpIC0+ICQoYXJyYXkpXG5cdFx0XHRcdGlmICggbWF0Y2hbIDEgXSApIHtcblx0XHRcdFx0XHRjb250ZXh0ID0gY29udGV4dCBpbnN0YW5jZW9mIGpRdWVyeSA/IGNvbnRleHRbIDAgXSA6IGNvbnRleHQ7XG5cblx0XHRcdFx0XHQvLyBPcHRpb24gdG8gcnVuIHNjcmlwdHMgaXMgdHJ1ZSBmb3IgYmFjay1jb21wYXRcblx0XHRcdFx0XHQvLyBJbnRlbnRpb25hbGx5IGxldCB0aGUgZXJyb3IgYmUgdGhyb3duIGlmIHBhcnNlSFRNTCBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRcdGpRdWVyeS5tZXJnZSggdGhpcywgalF1ZXJ5LnBhcnNlSFRNTChcblx0XHRcdFx0XHRcdG1hdGNoWyAxIF0sXG5cdFx0XHRcdFx0XHRjb250ZXh0ICYmIGNvbnRleHQubm9kZVR5cGUgPyBjb250ZXh0Lm93bmVyRG9jdW1lbnQgfHwgY29udGV4dCA6IGRvY3VtZW50LFxuXHRcdFx0XHRcdFx0dHJ1ZVxuXHRcdFx0XHRcdCkgKTtcblxuXHRcdFx0XHRcdC8vIEhBTkRMRTogJChodG1sLCBwcm9wcylcblx0XHRcdFx0XHRpZiAoIHJzaW5nbGVUYWcudGVzdCggbWF0Y2hbIDEgXSApICYmIGpRdWVyeS5pc1BsYWluT2JqZWN0KCBjb250ZXh0ICkgKSB7XG5cdFx0XHRcdFx0XHRmb3IgKCBtYXRjaCBpbiBjb250ZXh0ICkge1xuXG5cdFx0XHRcdFx0XHRcdC8vIFByb3BlcnRpZXMgb2YgY29udGV4dCBhcmUgY2FsbGVkIGFzIG1ldGhvZHMgaWYgcG9zc2libGVcblx0XHRcdFx0XHRcdFx0aWYgKCBpc0Z1bmN0aW9uKCB0aGlzWyBtYXRjaCBdICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpc1sgbWF0Y2ggXSggY29udGV4dFsgbWF0Y2ggXSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBvdGhlcndpc2Ugc2V0IGFzIGF0dHJpYnV0ZXNcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLmF0dHIoIG1hdGNoLCBjb250ZXh0WyBtYXRjaCBdICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblxuXHRcdFx0XHQvLyBIQU5ETEU6ICQoI2lkKVxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggbWF0Y2hbIDIgXSApO1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJbmplY3QgdGhlIGVsZW1lbnQgZGlyZWN0bHkgaW50byB0aGUgalF1ZXJ5IG9iamVjdFxuXHRcdFx0XHRcdFx0dGhpc1sgMCBdID0gZWxlbTtcblx0XHRcdFx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSEFORExFOiAkKGV4cHIsICQoLi4uKSlcblx0XHRcdH0gZWxzZSBpZiAoICFjb250ZXh0IHx8IGNvbnRleHQuanF1ZXJ5ICkge1xuXHRcdFx0XHRyZXR1cm4gKCBjb250ZXh0IHx8IHJvb3QgKS5maW5kKCBzZWxlY3RvciApO1xuXG5cdFx0XHQvLyBIQU5ETEU6ICQoZXhwciwgY29udGV4dClcblx0XHRcdC8vICh3aGljaCBpcyBqdXN0IGVxdWl2YWxlbnQgdG86ICQoY29udGV4dCkuZmluZChleHByKVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIHRoaXMuY29uc3RydWN0b3IoIGNvbnRleHQgKS5maW5kKCBzZWxlY3RvciApO1xuXHRcdFx0fVxuXG5cdFx0Ly8gSEFORExFOiAkKERPTUVsZW1lbnQpXG5cdFx0fSBlbHNlIGlmICggc2VsZWN0b3Iubm9kZVR5cGUgKSB7XG5cdFx0XHR0aGlzWyAwIF0gPSBzZWxlY3Rvcjtcblx0XHRcdHRoaXMubGVuZ3RoID0gMTtcblx0XHRcdHJldHVybiB0aGlzO1xuXG5cdFx0Ly8gSEFORExFOiAkKGZ1bmN0aW9uKVxuXHRcdC8vIFNob3J0Y3V0IGZvciBkb2N1bWVudCByZWFkeVxuXHRcdH0gZWxzZSBpZiAoIGlzRnVuY3Rpb24oIHNlbGVjdG9yICkgKSB7XG5cdFx0XHRyZXR1cm4gcm9vdC5yZWFkeSAhPT0gdW5kZWZpbmVkID9cblx0XHRcdFx0cm9vdC5yZWFkeSggc2VsZWN0b3IgKSA6XG5cblx0XHRcdFx0Ly8gRXhlY3V0ZSBpbW1lZGlhdGVseSBpZiByZWFkeSBpcyBub3QgcHJlc2VudFxuXHRcdFx0XHRzZWxlY3RvciggalF1ZXJ5ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpRdWVyeS5tYWtlQXJyYXkoIHNlbGVjdG9yLCB0aGlzICk7XG5cdH07XG5cbi8vIEdpdmUgdGhlIGluaXQgZnVuY3Rpb24gdGhlIGpRdWVyeSBwcm90b3R5cGUgZm9yIGxhdGVyIGluc3RhbnRpYXRpb25cbmluaXQucHJvdG90eXBlID0galF1ZXJ5LmZuO1xuXG4vLyBJbml0aWFsaXplIGNlbnRyYWwgcmVmZXJlbmNlXG5yb290alF1ZXJ5ID0galF1ZXJ5KCBkb2N1bWVudCApO1xuXG5cbnZhciBycGFyZW50c3ByZXYgPSAvXig/OnBhcmVudHN8cHJldig/OlVudGlsfEFsbCkpLyxcblxuXHQvLyBNZXRob2RzIGd1YXJhbnRlZWQgdG8gcHJvZHVjZSBhIHVuaXF1ZSBzZXQgd2hlbiBzdGFydGluZyBmcm9tIGEgdW5pcXVlIHNldFxuXHRndWFyYW50ZWVkVW5pcXVlID0ge1xuXHRcdGNoaWxkcmVuOiB0cnVlLFxuXHRcdGNvbnRlbnRzOiB0cnVlLFxuXHRcdG5leHQ6IHRydWUsXG5cdFx0cHJldjogdHJ1ZVxuXHR9O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGhhczogZnVuY3Rpb24oIHRhcmdldCApIHtcblx0XHR2YXIgdGFyZ2V0cyA9IGpRdWVyeSggdGFyZ2V0LCB0aGlzICksXG5cdFx0XHRsID0gdGFyZ2V0cy5sZW5ndGg7XG5cblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGkgPSAwO1xuXHRcdFx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRpZiAoIGpRdWVyeS5jb250YWlucyggdGhpcywgdGFyZ2V0c1sgaSBdICkgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9ICk7XG5cdH0sXG5cblx0Y2xvc2VzdDogZnVuY3Rpb24oIHNlbGVjdG9ycywgY29udGV4dCApIHtcblx0XHR2YXIgY3VyLFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gdGhpcy5sZW5ndGgsXG5cdFx0XHRtYXRjaGVkID0gW10sXG5cdFx0XHR0YXJnZXRzID0gdHlwZW9mIHNlbGVjdG9ycyAhPT0gXCJzdHJpbmdcIiAmJiBqUXVlcnkoIHNlbGVjdG9ycyApO1xuXG5cdFx0Ly8gUG9zaXRpb25hbCBzZWxlY3RvcnMgbmV2ZXIgbWF0Y2gsIHNpbmNlIHRoZXJlJ3Mgbm8gX3NlbGVjdGlvbl8gY29udGV4dFxuXHRcdGlmICggIXJuZWVkc0NvbnRleHQudGVzdCggc2VsZWN0b3JzICkgKSB7XG5cdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdGZvciAoIGN1ciA9IHRoaXNbIGkgXTsgY3VyICYmIGN1ciAhPT0gY29udGV4dDsgY3VyID0gY3VyLnBhcmVudE5vZGUgKSB7XG5cblx0XHRcdFx0XHQvLyBBbHdheXMgc2tpcCBkb2N1bWVudCBmcmFnbWVudHNcblx0XHRcdFx0XHRpZiAoIGN1ci5ub2RlVHlwZSA8IDExICYmICggdGFyZ2V0cyA/XG5cdFx0XHRcdFx0XHR0YXJnZXRzLmluZGV4KCBjdXIgKSA+IC0xIDpcblxuXHRcdFx0XHRcdFx0Ly8gRG9uJ3QgcGFzcyBub24tZWxlbWVudHMgdG8gU2l6emxlXG5cdFx0XHRcdFx0XHRjdXIubm9kZVR5cGUgPT09IDEgJiZcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmZpbmQubWF0Y2hlc1NlbGVjdG9yKCBjdXIsIHNlbGVjdG9ycyApICkgKSB7XG5cblx0XHRcdFx0XHRcdG1hdGNoZWQucHVzaCggY3VyICk7XG5cdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcy5wdXNoU3RhY2soIG1hdGNoZWQubGVuZ3RoID4gMSA/IGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICkgOiBtYXRjaGVkICk7XG5cdH0sXG5cblx0Ly8gRGV0ZXJtaW5lIHRoZSBwb3NpdGlvbiBvZiBhbiBlbGVtZW50IHdpdGhpbiB0aGUgc2V0XG5cdGluZGV4OiBmdW5jdGlvbiggZWxlbSApIHtcblxuXHRcdC8vIE5vIGFyZ3VtZW50LCByZXR1cm4gaW5kZXggaW4gcGFyZW50XG5cdFx0aWYgKCAhZWxlbSApIHtcblx0XHRcdHJldHVybiAoIHRoaXNbIDAgXSAmJiB0aGlzWyAwIF0ucGFyZW50Tm9kZSApID8gdGhpcy5maXJzdCgpLnByZXZBbGwoKS5sZW5ndGggOiAtMTtcblx0XHR9XG5cblx0XHQvLyBJbmRleCBpbiBzZWxlY3RvclxuXHRcdGlmICggdHlwZW9mIGVsZW0gPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRyZXR1cm4gaW5kZXhPZi5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdGhpc1sgMCBdICk7XG5cdFx0fVxuXG5cdFx0Ly8gTG9jYXRlIHRoZSBwb3NpdGlvbiBvZiB0aGUgZGVzaXJlZCBlbGVtZW50XG5cdFx0cmV0dXJuIGluZGV4T2YuY2FsbCggdGhpcyxcblxuXHRcdFx0Ly8gSWYgaXQgcmVjZWl2ZXMgYSBqUXVlcnkgb2JqZWN0LCB0aGUgZmlyc3QgZWxlbWVudCBpcyB1c2VkXG5cdFx0XHRlbGVtLmpxdWVyeSA/IGVsZW1bIDAgXSA6IGVsZW1cblx0XHQpO1xuXHR9LFxuXG5cdGFkZDogZnVuY3Rpb24oIHNlbGVjdG9yLCBjb250ZXh0ICkge1xuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayhcblx0XHRcdGpRdWVyeS51bmlxdWVTb3J0KFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIHRoaXMuZ2V0KCksIGpRdWVyeSggc2VsZWN0b3IsIGNvbnRleHQgKSApXG5cdFx0XHQpXG5cdFx0KTtcblx0fSxcblxuXHRhZGRCYWNrOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHRoaXMuYWRkKCBzZWxlY3RvciA9PSBudWxsID9cblx0XHRcdHRoaXMucHJldk9iamVjdCA6IHRoaXMucHJldk9iamVjdC5maWx0ZXIoIHNlbGVjdG9yIClcblx0XHQpO1xuXHR9XG59ICk7XG5cbmZ1bmN0aW9uIHNpYmxpbmcoIGN1ciwgZGlyICkge1xuXHR3aGlsZSAoICggY3VyID0gY3VyWyBkaXIgXSApICYmIGN1ci5ub2RlVHlwZSAhPT0gMSApIHt9XG5cdHJldHVybiBjdXI7XG59XG5cbmpRdWVyeS5lYWNoKCB7XG5cdHBhcmVudDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRyZXR1cm4gcGFyZW50ICYmIHBhcmVudC5ub2RlVHlwZSAhPT0gMTEgPyBwYXJlbnQgOiBudWxsO1xuXHR9LFxuXHRwYXJlbnRzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiApO1xuXHR9LFxuXHRwYXJlbnRzVW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcInBhcmVudE5vZGVcIiwgdW50aWwgKTtcblx0fSxcblx0bmV4dDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmcoIGVsZW0sIFwibmV4dFNpYmxpbmdcIiApO1xuXHR9LFxuXHRwcmV2OiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZyggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0QWxsOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIgKTtcblx0fSxcblx0cHJldkFsbDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIGRpciggZWxlbSwgXCJwcmV2aW91c1NpYmxpbmdcIiApO1xuXHR9LFxuXHRuZXh0VW50aWw6IGZ1bmN0aW9uKCBlbGVtLCBpLCB1bnRpbCApIHtcblx0XHRyZXR1cm4gZGlyKCBlbGVtLCBcIm5leHRTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHByZXZVbnRpbDogZnVuY3Rpb24oIGVsZW0sIGksIHVudGlsICkge1xuXHRcdHJldHVybiBkaXIoIGVsZW0sIFwicHJldmlvdXNTaWJsaW5nXCIsIHVudGlsICk7XG5cdH0sXG5cdHNpYmxpbmdzOiBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRyZXR1cm4gc2libGluZ3MoICggZWxlbS5wYXJlbnROb2RlIHx8IHt9ICkuZmlyc3RDaGlsZCwgZWxlbSApO1xuXHR9LFxuXHRjaGlsZHJlbjogZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0cmV0dXJuIHNpYmxpbmdzKCBlbGVtLmZpcnN0Q2hpbGQgKTtcblx0fSxcblx0Y29udGVudHM6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdGlmICggdHlwZW9mIGVsZW0uY29udGVudERvY3VtZW50ICE9PSBcInVuZGVmaW5lZFwiICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uY29udGVudERvY3VtZW50O1xuXHRcdH1cblxuXHRcdC8vIFN1cHBvcnQ6IElFIDkgLSAxMSBvbmx5LCBpT1MgNyBvbmx5LCBBbmRyb2lkIEJyb3dzZXIgPD00LjMgb25seVxuXHRcdC8vIFRyZWF0IHRoZSB0ZW1wbGF0ZSBlbGVtZW50IGFzIGEgcmVndWxhciBvbmUgaW4gYnJvd3NlcnMgdGhhdFxuXHRcdC8vIGRvbid0IHN1cHBvcnQgaXQuXG5cdFx0aWYgKCBub2RlTmFtZSggZWxlbSwgXCJ0ZW1wbGF0ZVwiICkgKSB7XG5cdFx0XHRlbGVtID0gZWxlbS5jb250ZW50IHx8IGVsZW07XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIGVsZW0uY2hpbGROb2RlcyApO1xuXHR9XG59LCBmdW5jdGlvbiggbmFtZSwgZm4gKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHVudGlsLCBzZWxlY3RvciApIHtcblx0XHR2YXIgbWF0Y2hlZCA9IGpRdWVyeS5tYXAoIHRoaXMsIGZuLCB1bnRpbCApO1xuXG5cdFx0aWYgKCBuYW1lLnNsaWNlKCAtNSApICE9PSBcIlVudGlsXCIgKSB7XG5cdFx0XHRzZWxlY3RvciA9IHVudGlsO1xuXHRcdH1cblxuXHRcdGlmICggc2VsZWN0b3IgJiYgdHlwZW9mIHNlbGVjdG9yID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0bWF0Y2hlZCA9IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCBtYXRjaGVkICk7XG5cdFx0fVxuXG5cdFx0aWYgKCB0aGlzLmxlbmd0aCA+IDEgKSB7XG5cblx0XHRcdC8vIFJlbW92ZSBkdXBsaWNhdGVzXG5cdFx0XHRpZiAoICFndWFyYW50ZWVkVW5pcXVlWyBuYW1lIF0gKSB7XG5cdFx0XHRcdGpRdWVyeS51bmlxdWVTb3J0KCBtYXRjaGVkICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFJldmVyc2Ugb3JkZXIgZm9yIHBhcmVudHMqIGFuZCBwcmV2LWRlcml2YXRpdmVzXG5cdFx0XHRpZiAoIHJwYXJlbnRzcHJldi50ZXN0KCBuYW1lICkgKSB7XG5cdFx0XHRcdG1hdGNoZWQucmV2ZXJzZSgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLnB1c2hTdGFjayggbWF0Y2hlZCApO1xuXHR9O1xufSApO1xudmFyIHJub3RodG1sd2hpdGUgPSAoIC9bXlxceDIwXFx0XFxyXFxuXFxmXSsvZyApO1xuXG5cblxuLy8gQ29udmVydCBTdHJpbmctZm9ybWF0dGVkIG9wdGlvbnMgaW50byBPYmplY3QtZm9ybWF0dGVkIG9uZXNcbmZ1bmN0aW9uIGNyZWF0ZU9wdGlvbnMoIG9wdGlvbnMgKSB7XG5cdHZhciBvYmplY3QgPSB7fTtcblx0alF1ZXJ5LmVhY2goIG9wdGlvbnMubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXSwgZnVuY3Rpb24oIF8sIGZsYWcgKSB7XG5cdFx0b2JqZWN0WyBmbGFnIF0gPSB0cnVlO1xuXHR9ICk7XG5cdHJldHVybiBvYmplY3Q7XG59XG5cbi8qXG4gKiBDcmVhdGUgYSBjYWxsYmFjayBsaXN0IHVzaW5nIHRoZSBmb2xsb3dpbmcgcGFyYW1ldGVyczpcbiAqXG4gKlx0b3B0aW9uczogYW4gb3B0aW9uYWwgbGlzdCBvZiBzcGFjZS1zZXBhcmF0ZWQgb3B0aW9ucyB0aGF0IHdpbGwgY2hhbmdlIGhvd1xuICpcdFx0XHR0aGUgY2FsbGJhY2sgbGlzdCBiZWhhdmVzIG9yIGEgbW9yZSB0cmFkaXRpb25hbCBvcHRpb24gb2JqZWN0XG4gKlxuICogQnkgZGVmYXVsdCBhIGNhbGxiYWNrIGxpc3Qgd2lsbCBhY3QgbGlrZSBhbiBldmVudCBjYWxsYmFjayBsaXN0IGFuZCBjYW4gYmVcbiAqIFwiZmlyZWRcIiBtdWx0aXBsZSB0aW1lcy5cbiAqXG4gKiBQb3NzaWJsZSBvcHRpb25zOlxuICpcbiAqXHRvbmNlOlx0XHRcdHdpbGwgZW5zdXJlIHRoZSBjYWxsYmFjayBsaXN0IGNhbiBvbmx5IGJlIGZpcmVkIG9uY2UgKGxpa2UgYSBEZWZlcnJlZClcbiAqXG4gKlx0bWVtb3J5Olx0XHRcdHdpbGwga2VlcCB0cmFjayBvZiBwcmV2aW91cyB2YWx1ZXMgYW5kIHdpbGwgY2FsbCBhbnkgY2FsbGJhY2sgYWRkZWRcbiAqXHRcdFx0XHRcdGFmdGVyIHRoZSBsaXN0IGhhcyBiZWVuIGZpcmVkIHJpZ2h0IGF3YXkgd2l0aCB0aGUgbGF0ZXN0IFwibWVtb3JpemVkXCJcbiAqXHRcdFx0XHRcdHZhbHVlcyAobGlrZSBhIERlZmVycmVkKVxuICpcbiAqXHR1bmlxdWU6XHRcdFx0d2lsbCBlbnN1cmUgYSBjYWxsYmFjayBjYW4gb25seSBiZSBhZGRlZCBvbmNlIChubyBkdXBsaWNhdGUgaW4gdGhlIGxpc3QpXG4gKlxuICpcdHN0b3BPbkZhbHNlOlx0aW50ZXJydXB0IGNhbGxpbmdzIHdoZW4gYSBjYWxsYmFjayByZXR1cm5zIGZhbHNlXG4gKlxuICovXG5qUXVlcnkuQ2FsbGJhY2tzID0gZnVuY3Rpb24oIG9wdGlvbnMgKSB7XG5cblx0Ly8gQ29udmVydCBvcHRpb25zIGZyb20gU3RyaW5nLWZvcm1hdHRlZCB0byBPYmplY3QtZm9ybWF0dGVkIGlmIG5lZWRlZFxuXHQvLyAod2UgY2hlY2sgaW4gY2FjaGUgZmlyc3QpXG5cdG9wdGlvbnMgPSB0eXBlb2Ygb3B0aW9ucyA9PT0gXCJzdHJpbmdcIiA/XG5cdFx0Y3JlYXRlT3B0aW9ucyggb3B0aW9ucyApIDpcblx0XHRqUXVlcnkuZXh0ZW5kKCB7fSwgb3B0aW9ucyApO1xuXG5cdHZhciAvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCBpcyBjdXJyZW50bHkgZmlyaW5nXG5cdFx0ZmlyaW5nLFxuXG5cdFx0Ly8gTGFzdCBmaXJlIHZhbHVlIGZvciBub24tZm9yZ2V0dGFibGUgbGlzdHNcblx0XHRtZW1vcnksXG5cblx0XHQvLyBGbGFnIHRvIGtub3cgaWYgbGlzdCB3YXMgYWxyZWFkeSBmaXJlZFxuXHRcdGZpcmVkLFxuXG5cdFx0Ly8gRmxhZyB0byBwcmV2ZW50IGZpcmluZ1xuXHRcdGxvY2tlZCxcblxuXHRcdC8vIEFjdHVhbCBjYWxsYmFjayBsaXN0XG5cdFx0bGlzdCA9IFtdLFxuXG5cdFx0Ly8gUXVldWUgb2YgZXhlY3V0aW9uIGRhdGEgZm9yIHJlcGVhdGFibGUgbGlzdHNcblx0XHRxdWV1ZSA9IFtdLFxuXG5cdFx0Ly8gSW5kZXggb2YgY3VycmVudGx5IGZpcmluZyBjYWxsYmFjayAobW9kaWZpZWQgYnkgYWRkL3JlbW92ZSBhcyBuZWVkZWQpXG5cdFx0ZmlyaW5nSW5kZXggPSAtMSxcblxuXHRcdC8vIEZpcmUgY2FsbGJhY2tzXG5cdFx0ZmlyZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBFbmZvcmNlIHNpbmdsZS1maXJpbmdcblx0XHRcdGxvY2tlZCA9IGxvY2tlZCB8fCBvcHRpb25zLm9uY2U7XG5cblx0XHRcdC8vIEV4ZWN1dGUgY2FsbGJhY2tzIGZvciBhbGwgcGVuZGluZyBleGVjdXRpb25zLFxuXHRcdFx0Ly8gcmVzcGVjdGluZyBmaXJpbmdJbmRleCBvdmVycmlkZXMgYW5kIHJ1bnRpbWUgY2hhbmdlc1xuXHRcdFx0ZmlyZWQgPSBmaXJpbmcgPSB0cnVlO1xuXHRcdFx0Zm9yICggOyBxdWV1ZS5sZW5ndGg7IGZpcmluZ0luZGV4ID0gLTEgKSB7XG5cdFx0XHRcdG1lbW9yeSA9IHF1ZXVlLnNoaWZ0KCk7XG5cdFx0XHRcdHdoaWxlICggKytmaXJpbmdJbmRleCA8IGxpc3QubGVuZ3RoICkge1xuXG5cdFx0XHRcdFx0Ly8gUnVuIGNhbGxiYWNrIGFuZCBjaGVjayBmb3IgZWFybHkgdGVybWluYXRpb25cblx0XHRcdFx0XHRpZiAoIGxpc3RbIGZpcmluZ0luZGV4IF0uYXBwbHkoIG1lbW9yeVsgMCBdLCBtZW1vcnlbIDEgXSApID09PSBmYWxzZSAmJlxuXHRcdFx0XHRcdFx0b3B0aW9ucy5zdG9wT25GYWxzZSApIHtcblxuXHRcdFx0XHRcdFx0Ly8gSnVtcCB0byBlbmQgYW5kIGZvcmdldCB0aGUgZGF0YSBzbyAuYWRkIGRvZXNuJ3QgcmUtZmlyZVxuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aDtcblx0XHRcdFx0XHRcdG1lbW9yeSA9IGZhbHNlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3JnZXQgdGhlIGRhdGEgaWYgd2UncmUgZG9uZSB3aXRoIGl0XG5cdFx0XHRpZiAoICFvcHRpb25zLm1lbW9yeSApIHtcblx0XHRcdFx0bWVtb3J5ID0gZmFsc2U7XG5cdFx0XHR9XG5cblx0XHRcdGZpcmluZyA9IGZhbHNlO1xuXG5cdFx0XHQvLyBDbGVhbiB1cCBpZiB3ZSdyZSBkb25lIGZpcmluZyBmb3IgZ29vZFxuXHRcdFx0aWYgKCBsb2NrZWQgKSB7XG5cblx0XHRcdFx0Ly8gS2VlcCBhbiBlbXB0eSBsaXN0IGlmIHdlIGhhdmUgZGF0YSBmb3IgZnV0dXJlIGFkZCBjYWxsc1xuXHRcdFx0XHRpZiAoIG1lbW9yeSApIHtcblx0XHRcdFx0XHRsaXN0ID0gW107XG5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCB0aGlzIG9iamVjdCBpcyBzcGVudFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGxpc3QgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSxcblxuXHRcdC8vIEFjdHVhbCBDYWxsYmFja3Mgb2JqZWN0XG5cdFx0c2VsZiA9IHtcblxuXHRcdFx0Ly8gQWRkIGEgY2FsbGJhY2sgb3IgYSBjb2xsZWN0aW9uIG9mIGNhbGxiYWNrcyB0byB0aGUgbGlzdFxuXHRcdFx0YWRkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgaGF2ZSBtZW1vcnkgZnJvbSBhIHBhc3QgcnVuLCB3ZSBzaG91bGQgZmlyZSBhZnRlciBhZGRpbmdcblx0XHRcdFx0XHRpZiAoIG1lbW9yeSAmJiAhZmlyaW5nICkge1xuXHRcdFx0XHRcdFx0ZmlyaW5nSW5kZXggPSBsaXN0Lmxlbmd0aCAtIDE7XG5cdFx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBtZW1vcnkgKTtcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQoIGZ1bmN0aW9uIGFkZCggYXJncyApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCBhcmdzLCBmdW5jdGlvbiggXywgYXJnICkge1xuXHRcdFx0XHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24oIGFyZyApICkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggIW9wdGlvbnMudW5pcXVlIHx8ICFzZWxmLmhhcyggYXJnICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRsaXN0LnB1c2goIGFyZyApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggYXJnICYmIGFyZy5sZW5ndGggJiYgdG9UeXBlKCBhcmcgKSAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0XHRcdFx0XHRcdC8vIEluc3BlY3QgcmVjdXJzaXZlbHlcblx0XHRcdFx0XHRcdFx0XHRhZGQoIGFyZyApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0fSApKCBhcmd1bWVudHMgKTtcblxuXHRcdFx0XHRcdGlmICggbWVtb3J5ICYmICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gUmVtb3ZlIGEgY2FsbGJhY2sgZnJvbSB0aGUgbGlzdFxuXHRcdFx0cmVtb3ZlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0alF1ZXJ5LmVhY2goIGFyZ3VtZW50cywgZnVuY3Rpb24oIF8sIGFyZyApIHtcblx0XHRcdFx0XHR2YXIgaW5kZXg7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGluZGV4ID0galF1ZXJ5LmluQXJyYXkoIGFyZywgbGlzdCwgaW5kZXggKSApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRsaXN0LnNwbGljZSggaW5kZXgsIDEgKTtcblxuXHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGZpcmluZyBpbmRleGVzXG5cdFx0XHRcdFx0XHRpZiAoIGluZGV4IDw9IGZpcmluZ0luZGV4ICkge1xuXHRcdFx0XHRcdFx0XHRmaXJpbmdJbmRleC0tO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSApO1xuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIENoZWNrIGlmIGEgZ2l2ZW4gY2FsbGJhY2sgaXMgaW4gdGhlIGxpc3QuXG5cdFx0XHQvLyBJZiBubyBhcmd1bWVudCBpcyBnaXZlbiwgcmV0dXJuIHdoZXRoZXIgb3Igbm90IGxpc3QgaGFzIGNhbGxiYWNrcyBhdHRhY2hlZC5cblx0XHRcdGhhczogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRyZXR1cm4gZm4gP1xuXHRcdFx0XHRcdGpRdWVyeS5pbkFycmF5KCBmbiwgbGlzdCApID4gLTEgOlxuXHRcdFx0XHRcdGxpc3QubGVuZ3RoID4gMDtcblx0XHRcdH0sXG5cblx0XHRcdC8vIFJlbW92ZSBhbGwgY2FsbGJhY2tzIGZyb20gdGhlIGxpc3Rcblx0XHRcdGVtcHR5OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBsaXN0ICkge1xuXHRcdFx0XHRcdGxpc3QgPSBbXTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cblx0XHRcdC8vIERpc2FibGUgLmZpcmUgYW5kIC5hZGRcblx0XHRcdC8vIEFib3J0IGFueSBjdXJyZW50L3BlbmRpbmcgZXhlY3V0aW9uc1xuXHRcdFx0Ly8gQ2xlYXIgYWxsIGNhbGxiYWNrcyBhbmQgdmFsdWVzXG5cdFx0XHRkaXNhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0bG9ja2VkID0gcXVldWUgPSBbXTtcblx0XHRcdFx0bGlzdCA9IG1lbW9yeSA9IFwiXCI7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblx0XHRcdGRpc2FibGVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICFsaXN0O1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gRGlzYWJsZSAuZmlyZVxuXHRcdFx0Ly8gQWxzbyBkaXNhYmxlIC5hZGQgdW5sZXNzIHdlIGhhdmUgbWVtb3J5IChzaW5jZSBpdCB3b3VsZCBoYXZlIG5vIGVmZmVjdClcblx0XHRcdC8vIEFib3J0IGFueSBwZW5kaW5nIGV4ZWN1dGlvbnNcblx0XHRcdGxvY2s6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRsb2NrZWQgPSBxdWV1ZSA9IFtdO1xuXHRcdFx0XHRpZiAoICFtZW1vcnkgJiYgIWZpcmluZyApIHtcblx0XHRcdFx0XHRsaXN0ID0gbWVtb3J5ID0gXCJcIjtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdH0sXG5cdFx0XHRsb2NrZWQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRyZXR1cm4gISFsb2NrZWQ7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBDYWxsIGFsbCBjYWxsYmFja3Mgd2l0aCB0aGUgZ2l2ZW4gY29udGV4dCBhbmQgYXJndW1lbnRzXG5cdFx0XHRmaXJlV2l0aDogZnVuY3Rpb24oIGNvbnRleHQsIGFyZ3MgKSB7XG5cdFx0XHRcdGlmICggIWxvY2tlZCApIHtcblx0XHRcdFx0XHRhcmdzID0gYXJncyB8fCBbXTtcblx0XHRcdFx0XHRhcmdzID0gWyBjb250ZXh0LCBhcmdzLnNsaWNlID8gYXJncy5zbGljZSgpIDogYXJncyBdO1xuXHRcdFx0XHRcdHF1ZXVlLnB1c2goIGFyZ3MgKTtcblx0XHRcdFx0XHRpZiAoICFmaXJpbmcgKSB7XG5cdFx0XHRcdFx0XHRmaXJlKCk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fSxcblxuXHRcdFx0Ly8gQ2FsbCBhbGwgdGhlIGNhbGxiYWNrcyB3aXRoIHRoZSBnaXZlbiBhcmd1bWVudHNcblx0XHRcdGZpcmU6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRzZWxmLmZpcmVXaXRoKCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBUbyBrbm93IGlmIHRoZSBjYWxsYmFja3MgaGF2ZSBhbHJlYWR5IGJlZW4gY2FsbGVkIGF0IGxlYXN0IG9uY2Vcblx0XHRcdGZpcmVkOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuICEhZmlyZWQ7XG5cdFx0XHR9XG5cdFx0fTtcblxuXHRyZXR1cm4gc2VsZjtcbn07XG5cblxuZnVuY3Rpb24gSWRlbnRpdHkoIHYgKSB7XG5cdHJldHVybiB2O1xufVxuZnVuY3Rpb24gVGhyb3dlciggZXggKSB7XG5cdHRocm93IGV4O1xufVxuXG5mdW5jdGlvbiBhZG9wdFZhbHVlKCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0LCBub1ZhbHVlICkge1xuXHR2YXIgbWV0aG9kO1xuXG5cdHRyeSB7XG5cblx0XHQvLyBDaGVjayBmb3IgcHJvbWlzZSBhc3BlY3QgZmlyc3QgdG8gcHJpdmlsZWdlIHN5bmNocm9ub3VzIGJlaGF2aW9yXG5cdFx0aWYgKCB2YWx1ZSAmJiBpc0Z1bmN0aW9uKCAoIG1ldGhvZCA9IHZhbHVlLnByb21pc2UgKSApICkge1xuXHRcdFx0bWV0aG9kLmNhbGwoIHZhbHVlICkuZG9uZSggcmVzb2x2ZSApLmZhaWwoIHJlamVjdCApO1xuXG5cdFx0Ly8gT3RoZXIgdGhlbmFibGVzXG5cdFx0fSBlbHNlIGlmICggdmFsdWUgJiYgaXNGdW5jdGlvbiggKCBtZXRob2QgPSB2YWx1ZS50aGVuICkgKSApIHtcblx0XHRcdG1ldGhvZC5jYWxsKCB2YWx1ZSwgcmVzb2x2ZSwgcmVqZWN0ICk7XG5cblx0XHQvLyBPdGhlciBub24tdGhlbmFibGVzXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gQ29udHJvbCBgcmVzb2x2ZWAgYXJndW1lbnRzIGJ5IGxldHRpbmcgQXJyYXkjc2xpY2UgY2FzdCBib29sZWFuIGBub1ZhbHVlYCB0byBpbnRlZ2VyOlxuXHRcdFx0Ly8gKiBmYWxzZTogWyB2YWx1ZSBdLnNsaWNlKCAwICkgPT4gcmVzb2x2ZSggdmFsdWUgKVxuXHRcdFx0Ly8gKiB0cnVlOiBbIHZhbHVlIF0uc2xpY2UoIDEgKSA9PiByZXNvbHZlKClcblx0XHRcdHJlc29sdmUuYXBwbHkoIHVuZGVmaW5lZCwgWyB2YWx1ZSBdLnNsaWNlKCBub1ZhbHVlICkgKTtcblx0XHR9XG5cblx0Ly8gRm9yIFByb21pc2VzL0ErLCBjb252ZXJ0IGV4Y2VwdGlvbnMgaW50byByZWplY3Rpb25zXG5cdC8vIFNpbmNlIGpRdWVyeS53aGVuIGRvZXNuJ3QgdW53cmFwIHRoZW5hYmxlcywgd2UgY2FuIHNraXAgdGhlIGV4dHJhIGNoZWNrcyBhcHBlYXJpbmcgaW5cblx0Ly8gRGVmZXJyZWQjdGhlbiB0byBjb25kaXRpb25hbGx5IHN1cHByZXNzIHJlamVjdGlvbi5cblx0fSBjYXRjaCAoIHZhbHVlICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgb25seVxuXHRcdC8vIFN0cmljdCBtb2RlIGZ1bmN0aW9ucyBpbnZva2VkIHdpdGhvdXQgLmNhbGwvLmFwcGx5IGdldCBnbG9iYWwtb2JqZWN0IGNvbnRleHRcblx0XHRyZWplY3QuYXBwbHkoIHVuZGVmaW5lZCwgWyB2YWx1ZSBdICk7XG5cdH1cbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdERlZmVycmVkOiBmdW5jdGlvbiggZnVuYyApIHtcblx0XHR2YXIgdHVwbGVzID0gW1xuXG5cdFx0XHRcdC8vIGFjdGlvbiwgYWRkIGxpc3RlbmVyLCBjYWxsYmFja3MsXG5cdFx0XHRcdC8vIC4uLiAudGhlbiBoYW5kbGVycywgYXJndW1lbnQgaW5kZXgsIFtmaW5hbCBzdGF0ZV1cblx0XHRcdFx0WyBcIm5vdGlmeVwiLCBcInByb2dyZXNzXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwibWVtb3J5XCIgKSxcblx0XHRcdFx0XHRqUXVlcnkuQ2FsbGJhY2tzKCBcIm1lbW9yeVwiICksIDIgXSxcblx0XHRcdFx0WyBcInJlc29sdmVcIiwgXCJkb25lXCIsIGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXHRcdFx0XHRcdGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLCAwLCBcInJlc29sdmVkXCIgXSxcblx0XHRcdFx0WyBcInJlamVjdFwiLCBcImZhaWxcIiwgalF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksXG5cdFx0XHRcdFx0alF1ZXJ5LkNhbGxiYWNrcyggXCJvbmNlIG1lbW9yeVwiICksIDEsIFwicmVqZWN0ZWRcIiBdXG5cdFx0XHRdLFxuXHRcdFx0c3RhdGUgPSBcInBlbmRpbmdcIixcblx0XHRcdHByb21pc2UgPSB7XG5cdFx0XHRcdHN0YXRlOiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRyZXR1cm4gc3RhdGU7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdGFsd2F5czogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQuZG9uZSggYXJndW1lbnRzICkuZmFpbCggYXJndW1lbnRzICk7XG5cdFx0XHRcdFx0cmV0dXJuIHRoaXM7XG5cdFx0XHRcdH0sXG5cdFx0XHRcdFwiY2F0Y2hcIjogZnVuY3Rpb24oIGZuICkge1xuXHRcdFx0XHRcdHJldHVybiBwcm9taXNlLnRoZW4oIG51bGwsIGZuICk7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gS2VlcCBwaXBlIGZvciBiYWNrLWNvbXBhdFxuXHRcdFx0XHRwaXBlOiBmdW5jdGlvbiggLyogZm5Eb25lLCBmbkZhaWwsIGZuUHJvZ3Jlc3MgKi8gKSB7XG5cdFx0XHRcdFx0dmFyIGZucyA9IGFyZ3VtZW50cztcblxuXHRcdFx0XHRcdHJldHVybiBqUXVlcnkuRGVmZXJyZWQoIGZ1bmN0aW9uKCBuZXdEZWZlciApIHtcblx0XHRcdFx0XHRcdGpRdWVyeS5lYWNoKCB0dXBsZXMsIGZ1bmN0aW9uKCBpLCB0dXBsZSApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBNYXAgdHVwbGVzIChwcm9ncmVzcywgZG9uZSwgZmFpbCkgdG8gYXJndW1lbnRzIChkb25lLCBmYWlsLCBwcm9ncmVzcylcblx0XHRcdFx0XHRcdFx0dmFyIGZuID0gaXNGdW5jdGlvbiggZm5zWyB0dXBsZVsgNCBdIF0gKSAmJiBmbnNbIHR1cGxlWyA0IF0gXTtcblxuXHRcdFx0XHRcdFx0XHQvLyBkZWZlcnJlZC5wcm9ncmVzcyhmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5ub3RpZnkgfSlcblx0XHRcdFx0XHRcdFx0Ly8gZGVmZXJyZWQuZG9uZShmdW5jdGlvbigpIHsgYmluZCB0byBuZXdEZWZlciBvciBuZXdEZWZlci5yZXNvbHZlIH0pXG5cdFx0XHRcdFx0XHRcdC8vIGRlZmVycmVkLmZhaWwoZnVuY3Rpb24oKSB7IGJpbmQgdG8gbmV3RGVmZXIgb3IgbmV3RGVmZXIucmVqZWN0IH0pXG5cdFx0XHRcdFx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMSBdIF0oIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCA9IGZuICYmIGZuLmFwcGx5KCB0aGlzLCBhcmd1bWVudHMgKTtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHJldHVybmVkICYmIGlzRnVuY3Rpb24oIHJldHVybmVkLnByb21pc2UgKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnByb21pc2UoKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQucHJvZ3Jlc3MoIG5ld0RlZmVyLm5vdGlmeSApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdC5kb25lKCBuZXdEZWZlci5yZXNvbHZlIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmZhaWwoIG5ld0RlZmVyLnJlamVjdCApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXdEZWZlclsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGZuID8gWyByZXR1cm5lZCBdIDogYXJndW1lbnRzXG5cdFx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdFx0Zm5zID0gbnVsbDtcblx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXHRcdFx0XHR0aGVuOiBmdW5jdGlvbiggb25GdWxmaWxsZWQsIG9uUmVqZWN0ZWQsIG9uUHJvZ3Jlc3MgKSB7XG5cdFx0XHRcdFx0dmFyIG1heERlcHRoID0gMDtcblx0XHRcdFx0XHRmdW5jdGlvbiByZXNvbHZlKCBkZXB0aCwgZGVmZXJyZWQsIGhhbmRsZXIsIHNwZWNpYWwgKSB7XG5cdFx0XHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdFx0XHRcdFx0XHRhcmdzID0gYXJndW1lbnRzLFxuXHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3cgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHZhciByZXR1cm5lZCwgdGhlbjtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMy4zLjNcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU5XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZ25vcmUgZG91YmxlLXJlc29sdXRpb24gYXR0ZW1wdHNcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggPCBtYXhEZXB0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCA9IGhhbmRsZXIuYXBwbHkoIHRoYXQsIGFyZ3MgKTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuMVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gaHR0cHM6Ly9wcm9taXNlc2FwbHVzLmNvbS8jcG9pbnQtNDhcblx0XHRcdFx0XHRcdFx0XHRcdGlmICggcmV0dXJuZWQgPT09IGRlZmVycmVkLnByb21pc2UoKSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhyb3cgbmV3IFR5cGVFcnJvciggXCJUaGVuYWJsZSBzZWxmLXJlc29sdXRpb25cIiApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBQcm9taXNlcy9BKyBzZWN0aW9ucyAyLjMuMy4xLCAzLjVcblx0XHRcdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU0XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC03NVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmV0cmlldmUgYHRoZW5gIG9ubHkgb25jZVxuXHRcdFx0XHRcdFx0XHRcdFx0dGhlbiA9IHJldHVybmVkICYmXG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogUHJvbWlzZXMvQSsgc2VjdGlvbiAyLjMuNFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02NFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IGNoZWNrIG9iamVjdHMgYW5kIGZ1bmN0aW9ucyBmb3IgdGhlbmFiaWxpdHlcblx0XHRcdFx0XHRcdFx0XHRcdFx0KCB0eXBlb2YgcmV0dXJuZWQgPT09IFwib2JqZWN0XCIgfHxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0eXBlb2YgcmV0dXJuZWQgPT09IFwiZnVuY3Rpb25cIiApICYmXG5cdFx0XHRcdFx0XHRcdFx0XHRcdHJldHVybmVkLnRoZW47XG5cblx0XHRcdFx0XHRcdFx0XHRcdC8vIEhhbmRsZSBhIHJldHVybmVkIHRoZW5hYmxlXG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGlzRnVuY3Rpb24oIHRoZW4gKSApIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBTcGVjaWFsIHByb2Nlc3NvcnMgKG5vdGlmeSkganVzdCB3YWl0IGZvciByZXNvbHV0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggc3BlY2lhbCApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGVuLmNhbGwoXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXR1cm5lZCxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgSWRlbnRpdHksIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgVGhyb3dlciwgc3BlY2lhbCApXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBOb3JtYWwgcHJvY2Vzc29ycyAocmVzb2x2ZSkgYWxzbyBob29rIGludG8gcHJvZ3Jlc3Ncblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIC4uLmFuZCBkaXNyZWdhcmQgb2xkZXIgcmVzb2x1dGlvbiB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRtYXhEZXB0aCsrO1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhlbi5jYWxsKFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0cmV0dXJuZWQsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIElkZW50aXR5LCBzcGVjaWFsICksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRyZXNvbHZlKCBtYXhEZXB0aCwgZGVmZXJyZWQsIFRocm93ZXIsIHNwZWNpYWwgKSxcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHJlc29sdmUoIG1heERlcHRoLCBkZWZlcnJlZCwgSWRlbnRpdHksXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGggKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSGFuZGxlIGFsbCBvdGhlciByZXR1cm5lZCB2YWx1ZXNcblx0XHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gT25seSBzdWJzdGl0dXRlIGhhbmRsZXJzIHBhc3Mgb24gY29udGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmQgbXVsdGlwbGUgdmFsdWVzIChub24tc3BlYyBiZWhhdmlvcilcblx0XHRcdFx0XHRcdFx0XHRcdFx0aWYgKCBoYW5kbGVyICE9PSBJZGVudGl0eSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGF0ID0gdW5kZWZpbmVkO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGFyZ3MgPSBbIHJldHVybmVkIF07XG5cdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBQcm9jZXNzIHRoZSB2YWx1ZShzKVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBEZWZhdWx0IHByb2Nlc3MgaXMgcmVzb2x2ZVxuXHRcdFx0XHRcdFx0XHRcdFx0XHQoIHNwZWNpYWwgfHwgZGVmZXJyZWQucmVzb2x2ZVdpdGggKSggdGhhdCwgYXJncyApO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IG5vcm1hbCBwcm9jZXNzb3JzIChyZXNvbHZlKSBjYXRjaCBhbmQgcmVqZWN0IGV4Y2VwdGlvbnNcblx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzID0gc3BlY2lhbCA/XG5cdFx0XHRcdFx0XHRcdFx0XHRtaWdodFRocm93IDpcblx0XHRcdFx0XHRcdFx0XHRcdGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdG1pZ2h0VGhyb3coKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSBjYXRjaCAoIGUgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5EZWZlcnJlZC5leGNlcHRpb25Ib29rICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2soIGUsXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdHByb2Nlc3Muc3RhY2tUcmFjZSApO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy40LjFcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBodHRwczovL3Byb21pc2VzYXBsdXMuY29tLyNwb2ludC02MVxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIElnbm9yZSBwb3N0LXJlc29sdXRpb24gZXhjZXB0aW9uc1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggZGVwdGggKyAxID49IG1heERlcHRoICkge1xuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBPbmx5IHN1YnN0aXR1dGUgaGFuZGxlcnMgcGFzcyBvbiBjb250ZXh0XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBhbmQgbXVsdGlwbGUgdmFsdWVzIChub24tc3BlYyBiZWhhdmlvcilcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGlmICggaGFuZGxlciAhPT0gVGhyb3dlciApIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0dGhhdCA9IHVuZGVmaW5lZDtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXJncyA9IFsgZSBdO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCB0aGF0LCBhcmdzICk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9O1xuXG5cdFx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IFByb21pc2VzL0ErIHNlY3Rpb24gMi4zLjMuMy4xXG5cdFx0XHRcdFx0XHRcdC8vIGh0dHBzOi8vcHJvbWlzZXNhcGx1cy5jb20vI3BvaW50LTU3XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlc29sdmUgcHJvbWlzZXMgaW1tZWRpYXRlbHkgdG8gZG9kZ2UgZmFsc2UgcmVqZWN0aW9uIGZyb21cblx0XHRcdFx0XHRcdFx0Ly8gc3Vic2VxdWVudCBlcnJvcnNcblx0XHRcdFx0XHRcdFx0aWYgKCBkZXB0aCApIHtcblx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzKCk7XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDYWxsIGFuIG9wdGlvbmFsIGhvb2sgdG8gcmVjb3JkIHRoZSBzdGFjaywgaW4gY2FzZSBvZiBleGNlcHRpb25cblx0XHRcdFx0XHRcdFx0XHQvLyBzaW5jZSBpdCdzIG90aGVyd2lzZSBsb3N0IHdoZW4gZXhlY3V0aW9uIGdvZXMgYXN5bmNcblx0XHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5EZWZlcnJlZC5nZXRTdGFja0hvb2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRwcm9jZXNzLnN0YWNrVHJhY2UgPSBqUXVlcnkuRGVmZXJyZWQuZ2V0U3RhY2tIb29rKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdHdpbmRvdy5zZXRUaW1lb3V0KCBwcm9jZXNzICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH07XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0cmV0dXJuIGpRdWVyeS5EZWZlcnJlZCggZnVuY3Rpb24oIG5ld0RlZmVyICkge1xuXG5cdFx0XHRcdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uUHJvZ3Jlc3MgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvblByb2dyZXNzIDpcblx0XHRcdFx0XHRcdFx0XHRcdElkZW50aXR5LFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLm5vdGlmeVdpdGhcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblxuXHRcdFx0XHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmFkZCggLi4uIClcblx0XHRcdFx0XHRcdHR1cGxlc1sgMSBdWyAzIF0uYWRkKFxuXHRcdFx0XHRcdFx0XHRyZXNvbHZlKFxuXHRcdFx0XHRcdFx0XHRcdDAsXG5cdFx0XHRcdFx0XHRcdFx0bmV3RGVmZXIsXG5cdFx0XHRcdFx0XHRcdFx0aXNGdW5jdGlvbiggb25GdWxmaWxsZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvbkZ1bGZpbGxlZCA6XG5cdFx0XHRcdFx0XHRcdFx0XHRJZGVudGl0eVxuXHRcdFx0XHRcdFx0XHQpXG5cdFx0XHRcdFx0XHQpO1xuXG5cdFx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5hZGQoIC4uLiApXG5cdFx0XHRcdFx0XHR0dXBsZXNbIDIgXVsgMyBdLmFkZChcblx0XHRcdFx0XHRcdFx0cmVzb2x2ZShcblx0XHRcdFx0XHRcdFx0XHQwLFxuXHRcdFx0XHRcdFx0XHRcdG5ld0RlZmVyLFxuXHRcdFx0XHRcdFx0XHRcdGlzRnVuY3Rpb24oIG9uUmVqZWN0ZWQgKSA/XG5cdFx0XHRcdFx0XHRcdFx0XHRvblJlamVjdGVkIDpcblx0XHRcdFx0XHRcdFx0XHRcdFRocm93ZXJcblx0XHRcdFx0XHRcdFx0KVxuXHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHR9ICkucHJvbWlzZSgpO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIEdldCBhIHByb21pc2UgZm9yIHRoaXMgZGVmZXJyZWRcblx0XHRcdFx0Ly8gSWYgb2JqIGlzIHByb3ZpZGVkLCB0aGUgcHJvbWlzZSBhc3BlY3QgaXMgYWRkZWQgdG8gdGhlIG9iamVjdFxuXHRcdFx0XHRwcm9taXNlOiBmdW5jdGlvbiggb2JqICkge1xuXHRcdFx0XHRcdHJldHVybiBvYmogIT0gbnVsbCA/IGpRdWVyeS5leHRlbmQoIG9iaiwgcHJvbWlzZSApIDogcHJvbWlzZTtcblx0XHRcdFx0fVxuXHRcdFx0fSxcblx0XHRcdGRlZmVycmVkID0ge307XG5cblx0XHQvLyBBZGQgbGlzdC1zcGVjaWZpYyBtZXRob2RzXG5cdFx0alF1ZXJ5LmVhY2goIHR1cGxlcywgZnVuY3Rpb24oIGksIHR1cGxlICkge1xuXHRcdFx0dmFyIGxpc3QgPSB0dXBsZVsgMiBdLFxuXHRcdFx0XHRzdGF0ZVN0cmluZyA9IHR1cGxlWyA1IF07XG5cblx0XHRcdC8vIHByb21pc2UucHJvZ3Jlc3MgPSBsaXN0LmFkZFxuXHRcdFx0Ly8gcHJvbWlzZS5kb25lID0gbGlzdC5hZGRcblx0XHRcdC8vIHByb21pc2UuZmFpbCA9IGxpc3QuYWRkXG5cdFx0XHRwcm9taXNlWyB0dXBsZVsgMSBdIF0gPSBsaXN0LmFkZDtcblxuXHRcdFx0Ly8gSGFuZGxlIHN0YXRlXG5cdFx0XHRpZiAoIHN0YXRlU3RyaW5nICkge1xuXHRcdFx0XHRsaXN0LmFkZChcblx0XHRcdFx0XHRmdW5jdGlvbigpIHtcblxuXHRcdFx0XHRcdFx0Ly8gc3RhdGUgPSBcInJlc29sdmVkXCIgKGkuZS4sIGZ1bGZpbGxlZClcblx0XHRcdFx0XHRcdC8vIHN0YXRlID0gXCJyZWplY3RlZFwiXG5cdFx0XHRcdFx0XHRzdGF0ZSA9IHN0YXRlU3RyaW5nO1xuXHRcdFx0XHRcdH0sXG5cblx0XHRcdFx0XHQvLyByZWplY3RlZF9jYWxsYmFja3MuZGlzYWJsZVxuXHRcdFx0XHRcdC8vIGZ1bGZpbGxlZF9jYWxsYmFja3MuZGlzYWJsZVxuXHRcdFx0XHRcdHR1cGxlc1sgMyAtIGkgXVsgMiBdLmRpc2FibGUsXG5cblx0XHRcdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5kaXNhYmxlXG5cdFx0XHRcdFx0Ly8gZnVsZmlsbGVkX2hhbmRsZXJzLmRpc2FibGVcblx0XHRcdFx0XHR0dXBsZXNbIDMgLSBpIF1bIDMgXS5kaXNhYmxlLFxuXG5cdFx0XHRcdFx0Ly8gcHJvZ3Jlc3NfY2FsbGJhY2tzLmxvY2tcblx0XHRcdFx0XHR0dXBsZXNbIDAgXVsgMiBdLmxvY2ssXG5cblx0XHRcdFx0XHQvLyBwcm9ncmVzc19oYW5kbGVycy5sb2NrXG5cdFx0XHRcdFx0dHVwbGVzWyAwIF1bIDMgXS5sb2NrXG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIHByb2dyZXNzX2hhbmRsZXJzLmZpcmVcblx0XHRcdC8vIGZ1bGZpbGxlZF9oYW5kbGVycy5maXJlXG5cdFx0XHQvLyByZWplY3RlZF9oYW5kbGVycy5maXJlXG5cdFx0XHRsaXN0LmFkZCggdHVwbGVbIDMgXS5maXJlICk7XG5cblx0XHRcdC8vIGRlZmVycmVkLm5vdGlmeSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5ub3RpZnlXaXRoKC4uLikgfVxuXHRcdFx0Ly8gZGVmZXJyZWQucmVzb2x2ZSA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZXNvbHZlV2l0aCguLi4pIH1cblx0XHRcdC8vIGRlZmVycmVkLnJlamVjdCA9IGZ1bmN0aW9uKCkgeyBkZWZlcnJlZC5yZWplY3RXaXRoKC4uLikgfVxuXHRcdFx0ZGVmZXJyZWRbIHR1cGxlWyAwIF0gXSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRkZWZlcnJlZFsgdHVwbGVbIDAgXSArIFwiV2l0aFwiIF0oIHRoaXMgPT09IGRlZmVycmVkID8gdW5kZWZpbmVkIDogdGhpcywgYXJndW1lbnRzICk7XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fTtcblxuXHRcdFx0Ly8gZGVmZXJyZWQubm90aWZ5V2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdC8vIGRlZmVycmVkLnJlc29sdmVXaXRoID0gbGlzdC5maXJlV2l0aFxuXHRcdFx0Ly8gZGVmZXJyZWQucmVqZWN0V2l0aCA9IGxpc3QuZmlyZVdpdGhcblx0XHRcdGRlZmVycmVkWyB0dXBsZVsgMCBdICsgXCJXaXRoXCIgXSA9IGxpc3QuZmlyZVdpdGg7XG5cdFx0fSApO1xuXG5cdFx0Ly8gTWFrZSB0aGUgZGVmZXJyZWQgYSBwcm9taXNlXG5cdFx0cHJvbWlzZS5wcm9taXNlKCBkZWZlcnJlZCApO1xuXG5cdFx0Ly8gQ2FsbCBnaXZlbiBmdW5jIGlmIGFueVxuXHRcdGlmICggZnVuYyApIHtcblx0XHRcdGZ1bmMuY2FsbCggZGVmZXJyZWQsIGRlZmVycmVkICk7XG5cdFx0fVxuXG5cdFx0Ly8gQWxsIGRvbmUhXG5cdFx0cmV0dXJuIGRlZmVycmVkO1xuXHR9LFxuXG5cdC8vIERlZmVycmVkIGhlbHBlclxuXHR3aGVuOiBmdW5jdGlvbiggc2luZ2xlVmFsdWUgKSB7XG5cdFx0dmFyXG5cblx0XHRcdC8vIGNvdW50IG9mIHVuY29tcGxldGVkIHN1Ym9yZGluYXRlc1xuXHRcdFx0cmVtYWluaW5nID0gYXJndW1lbnRzLmxlbmd0aCxcblxuXHRcdFx0Ly8gY291bnQgb2YgdW5wcm9jZXNzZWQgYXJndW1lbnRzXG5cdFx0XHRpID0gcmVtYWluaW5nLFxuXG5cdFx0XHQvLyBzdWJvcmRpbmF0ZSBmdWxmaWxsbWVudCBkYXRhXG5cdFx0XHRyZXNvbHZlQ29udGV4dHMgPSBBcnJheSggaSApLFxuXHRcdFx0cmVzb2x2ZVZhbHVlcyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApLFxuXG5cdFx0XHQvLyB0aGUgbWFzdGVyIERlZmVycmVkXG5cdFx0XHRtYXN0ZXIgPSBqUXVlcnkuRGVmZXJyZWQoKSxcblxuXHRcdFx0Ly8gc3Vib3JkaW5hdGUgY2FsbGJhY2sgZmFjdG9yeVxuXHRcdFx0dXBkYXRlRnVuYyA9IGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0XHRyZXR1cm4gZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0XHRcdHJlc29sdmVDb250ZXh0c1sgaSBdID0gdGhpcztcblx0XHRcdFx0XHRyZXNvbHZlVmFsdWVzWyBpIF0gPSBhcmd1bWVudHMubGVuZ3RoID4gMSA/IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApIDogdmFsdWU7XG5cdFx0XHRcdFx0aWYgKCAhKCAtLXJlbWFpbmluZyApICkge1xuXHRcdFx0XHRcdFx0bWFzdGVyLnJlc29sdmVXaXRoKCByZXNvbHZlQ29udGV4dHMsIHJlc29sdmVWYWx1ZXMgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH07XG5cdFx0XHR9O1xuXG5cdFx0Ly8gU2luZ2xlLSBhbmQgZW1wdHkgYXJndW1lbnRzIGFyZSBhZG9wdGVkIGxpa2UgUHJvbWlzZS5yZXNvbHZlXG5cdFx0aWYgKCByZW1haW5pbmcgPD0gMSApIHtcblx0XHRcdGFkb3B0VmFsdWUoIHNpbmdsZVZhbHVlLCBtYXN0ZXIuZG9uZSggdXBkYXRlRnVuYyggaSApICkucmVzb2x2ZSwgbWFzdGVyLnJlamVjdCxcblx0XHRcdFx0IXJlbWFpbmluZyApO1xuXG5cdFx0XHQvLyBVc2UgLnRoZW4oKSB0byB1bndyYXAgc2Vjb25kYXJ5IHRoZW5hYmxlcyAoY2YuIGdoLTMwMDApXG5cdFx0XHRpZiAoIG1hc3Rlci5zdGF0ZSgpID09PSBcInBlbmRpbmdcIiB8fFxuXHRcdFx0XHRpc0Z1bmN0aW9uKCByZXNvbHZlVmFsdWVzWyBpIF0gJiYgcmVzb2x2ZVZhbHVlc1sgaSBdLnRoZW4gKSApIHtcblxuXHRcdFx0XHRyZXR1cm4gbWFzdGVyLnRoZW4oKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBNdWx0aXBsZSBhcmd1bWVudHMgYXJlIGFnZ3JlZ2F0ZWQgbGlrZSBQcm9taXNlLmFsbCBhcnJheSBlbGVtZW50c1xuXHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0YWRvcHRWYWx1ZSggcmVzb2x2ZVZhbHVlc1sgaSBdLCB1cGRhdGVGdW5jKCBpICksIG1hc3Rlci5yZWplY3QgKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gbWFzdGVyLnByb21pc2UoKTtcblx0fVxufSApO1xuXG5cbi8vIFRoZXNlIHVzdWFsbHkgaW5kaWNhdGUgYSBwcm9ncmFtbWVyIG1pc3Rha2UgZHVyaW5nIGRldmVsb3BtZW50LFxuLy8gd2FybiBhYm91dCB0aGVtIEFTQVAgcmF0aGVyIHRoYW4gc3dhbGxvd2luZyB0aGVtIGJ5IGRlZmF1bHQuXG52YXIgcmVycm9yTmFtZXMgPSAvXihFdmFsfEludGVybmFsfFJhbmdlfFJlZmVyZW5jZXxTeW50YXh8VHlwZXxVUkkpRXJyb3IkLztcblxualF1ZXJ5LkRlZmVycmVkLmV4Y2VwdGlvbkhvb2sgPSBmdW5jdGlvbiggZXJyb3IsIHN0YWNrICkge1xuXG5cdC8vIFN1cHBvcnQ6IElFIDggLSA5IG9ubHlcblx0Ly8gQ29uc29sZSBleGlzdHMgd2hlbiBkZXYgdG9vbHMgYXJlIG9wZW4sIHdoaWNoIGNhbiBoYXBwZW4gYXQgYW55IHRpbWVcblx0aWYgKCB3aW5kb3cuY29uc29sZSAmJiB3aW5kb3cuY29uc29sZS53YXJuICYmIGVycm9yICYmIHJlcnJvck5hbWVzLnRlc3QoIGVycm9yLm5hbWUgKSApIHtcblx0XHR3aW5kb3cuY29uc29sZS53YXJuKCBcImpRdWVyeS5EZWZlcnJlZCBleGNlcHRpb246IFwiICsgZXJyb3IubWVzc2FnZSwgZXJyb3Iuc3RhY2ssIHN0YWNrICk7XG5cdH1cbn07XG5cblxuXG5cbmpRdWVyeS5yZWFkeUV4Y2VwdGlvbiA9IGZ1bmN0aW9uKCBlcnJvciApIHtcblx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdHRocm93IGVycm9yO1xuXHR9ICk7XG59O1xuXG5cblxuXG4vLyBUaGUgZGVmZXJyZWQgdXNlZCBvbiBET00gcmVhZHlcbnZhciByZWFkeUxpc3QgPSBqUXVlcnkuRGVmZXJyZWQoKTtcblxualF1ZXJ5LmZuLnJlYWR5ID0gZnVuY3Rpb24oIGZuICkge1xuXG5cdHJlYWR5TGlzdFxuXHRcdC50aGVuKCBmbiApXG5cblx0XHQvLyBXcmFwIGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiBpbiBhIGZ1bmN0aW9uIHNvIHRoYXQgdGhlIGxvb2t1cFxuXHRcdC8vIGhhcHBlbnMgYXQgdGhlIHRpbWUgb2YgZXJyb3IgaGFuZGxpbmcgaW5zdGVhZCBvZiBjYWxsYmFja1xuXHRcdC8vIHJlZ2lzdHJhdGlvbi5cblx0XHQuY2F0Y2goIGZ1bmN0aW9uKCBlcnJvciApIHtcblx0XHRcdGpRdWVyeS5yZWFkeUV4Y2VwdGlvbiggZXJyb3IgKTtcblx0XHR9ICk7XG5cblx0cmV0dXJuIHRoaXM7XG59O1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gSXMgdGhlIERPTSByZWFkeSB0byBiZSB1c2VkPyBTZXQgdG8gdHJ1ZSBvbmNlIGl0IG9jY3Vycy5cblx0aXNSZWFkeTogZmFsc2UsXG5cblx0Ly8gQSBjb3VudGVyIHRvIHRyYWNrIGhvdyBtYW55IGl0ZW1zIHRvIHdhaXQgZm9yIGJlZm9yZVxuXHQvLyB0aGUgcmVhZHkgZXZlbnQgZmlyZXMuIFNlZSAjNjc4MVxuXHRyZWFkeVdhaXQ6IDEsXG5cblx0Ly8gSGFuZGxlIHdoZW4gdGhlIERPTSBpcyByZWFkeVxuXHRyZWFkeTogZnVuY3Rpb24oIHdhaXQgKSB7XG5cblx0XHQvLyBBYm9ydCBpZiB0aGVyZSBhcmUgcGVuZGluZyBob2xkcyBvciB3ZSdyZSBhbHJlYWR5IHJlYWR5XG5cdFx0aWYgKCB3YWl0ID09PSB0cnVlID8gLS1qUXVlcnkucmVhZHlXYWl0IDogalF1ZXJ5LmlzUmVhZHkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gUmVtZW1iZXIgdGhhdCB0aGUgRE9NIGlzIHJlYWR5XG5cdFx0alF1ZXJ5LmlzUmVhZHkgPSB0cnVlO1xuXG5cdFx0Ly8gSWYgYSBub3JtYWwgRE9NIFJlYWR5IGV2ZW50IGZpcmVkLCBkZWNyZW1lbnQsIGFuZCB3YWl0IGlmIG5lZWQgYmVcblx0XHRpZiAoIHdhaXQgIT09IHRydWUgJiYgLS1qUXVlcnkucmVhZHlXYWl0ID4gMCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBJZiB0aGVyZSBhcmUgZnVuY3Rpb25zIGJvdW5kLCB0byBleGVjdXRlXG5cdFx0cmVhZHlMaXN0LnJlc29sdmVXaXRoKCBkb2N1bWVudCwgWyBqUXVlcnkgXSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5yZWFkeS50aGVuID0gcmVhZHlMaXN0LnRoZW47XG5cbi8vIFRoZSByZWFkeSBldmVudCBoYW5kbGVyIGFuZCBzZWxmIGNsZWFudXAgbWV0aG9kXG5mdW5jdGlvbiBjb21wbGV0ZWQoKSB7XG5cdGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblx0d2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoIFwibG9hZFwiLCBjb21wbGV0ZWQgKTtcblx0alF1ZXJ5LnJlYWR5KCk7XG59XG5cbi8vIENhdGNoIGNhc2VzIHdoZXJlICQoZG9jdW1lbnQpLnJlYWR5KCkgaXMgY2FsbGVkXG4vLyBhZnRlciB0aGUgYnJvd3NlciBldmVudCBoYXMgYWxyZWFkeSBvY2N1cnJlZC5cbi8vIFN1cHBvcnQ6IElFIDw9OSAtIDEwIG9ubHlcbi8vIE9sZGVyIElFIHNvbWV0aW1lcyBzaWduYWxzIFwiaW50ZXJhY3RpdmVcIiB0b28gc29vblxuaWYgKCBkb2N1bWVudC5yZWFkeVN0YXRlID09PSBcImNvbXBsZXRlXCIgfHxcblx0KCBkb2N1bWVudC5yZWFkeVN0YXRlICE9PSBcImxvYWRpbmdcIiAmJiAhZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmRvU2Nyb2xsICkgKSB7XG5cblx0Ly8gSGFuZGxlIGl0IGFzeW5jaHJvbm91c2x5IHRvIGFsbG93IHNjcmlwdHMgdGhlIG9wcG9ydHVuaXR5IHRvIGRlbGF5IHJlYWR5XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBqUXVlcnkucmVhZHkgKTtcblxufSBlbHNlIHtcblxuXHQvLyBVc2UgdGhlIGhhbmR5IGV2ZW50IGNhbGxiYWNrXG5cdGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoIFwiRE9NQ29udGVudExvYWRlZFwiLCBjb21wbGV0ZWQgKTtcblxuXHQvLyBBIGZhbGxiYWNrIHRvIHdpbmRvdy5vbmxvYWQsIHRoYXQgd2lsbCBhbHdheXMgd29ya1xuXHR3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lciggXCJsb2FkXCIsIGNvbXBsZXRlZCApO1xufVxuXG5cblxuXG4vLyBNdWx0aWZ1bmN0aW9uYWwgbWV0aG9kIHRvIGdldCBhbmQgc2V0IHZhbHVlcyBvZiBhIGNvbGxlY3Rpb25cbi8vIFRoZSB2YWx1ZS9zIGNhbiBvcHRpb25hbGx5IGJlIGV4ZWN1dGVkIGlmIGl0J3MgYSBmdW5jdGlvblxudmFyIGFjY2VzcyA9IGZ1bmN0aW9uKCBlbGVtcywgZm4sIGtleSwgdmFsdWUsIGNoYWluYWJsZSwgZW1wdHlHZXQsIHJhdyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGxlbiA9IGVsZW1zLmxlbmd0aCxcblx0XHRidWxrID0ga2V5ID09IG51bGw7XG5cblx0Ly8gU2V0cyBtYW55IHZhbHVlc1xuXHRpZiAoIHRvVHlwZSgga2V5ICkgPT09IFwib2JqZWN0XCIgKSB7XG5cdFx0Y2hhaW5hYmxlID0gdHJ1ZTtcblx0XHRmb3IgKCBpIGluIGtleSApIHtcblx0XHRcdGFjY2VzcyggZWxlbXMsIGZuLCBpLCBrZXlbIGkgXSwgdHJ1ZSwgZW1wdHlHZXQsIHJhdyApO1xuXHRcdH1cblxuXHQvLyBTZXRzIG9uZSB2YWx1ZVxuXHR9IGVsc2UgaWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdGNoYWluYWJsZSA9IHRydWU7XG5cblx0XHRpZiAoICFpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmF3ID0gdHJ1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGJ1bGsgKSB7XG5cblx0XHRcdC8vIEJ1bGsgb3BlcmF0aW9ucyBydW4gYWdhaW5zdCB0aGUgZW50aXJlIHNldFxuXHRcdFx0aWYgKCByYXcgKSB7XG5cdFx0XHRcdGZuLmNhbGwoIGVsZW1zLCB2YWx1ZSApO1xuXHRcdFx0XHRmbiA9IG51bGw7XG5cblx0XHRcdC8vIC4uLmV4Y2VwdCB3aGVuIGV4ZWN1dGluZyBmdW5jdGlvbiB2YWx1ZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGJ1bGsgPSBmbjtcblx0XHRcdFx0Zm4gPSBmdW5jdGlvbiggZWxlbSwga2V5LCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gYnVsay5jYWxsKCBqUXVlcnkoIGVsZW0gKSwgdmFsdWUgKTtcblx0XHRcdFx0fTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdGZuKFxuXHRcdFx0XHRcdGVsZW1zWyBpIF0sIGtleSwgcmF3ID9cblx0XHRcdFx0XHR2YWx1ZSA6XG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggZWxlbXNbIGkgXSwgaSwgZm4oIGVsZW1zWyBpIF0sIGtleSApIClcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoIGNoYWluYWJsZSApIHtcblx0XHRyZXR1cm4gZWxlbXM7XG5cdH1cblxuXHQvLyBHZXRzXG5cdGlmICggYnVsayApIHtcblx0XHRyZXR1cm4gZm4uY2FsbCggZWxlbXMgKTtcblx0fVxuXG5cdHJldHVybiBsZW4gPyBmbiggZWxlbXNbIDAgXSwga2V5ICkgOiBlbXB0eUdldDtcbn07XG5cblxuLy8gTWF0Y2hlcyBkYXNoZWQgc3RyaW5nIGZvciBjYW1lbGl6aW5nXG52YXIgcm1zUHJlZml4ID0gL14tbXMtLyxcblx0cmRhc2hBbHBoYSA9IC8tKFthLXpdKS9nO1xuXG4vLyBVc2VkIGJ5IGNhbWVsQ2FzZSBhcyBjYWxsYmFjayB0byByZXBsYWNlKClcbmZ1bmN0aW9uIGZjYW1lbENhc2UoIGFsbCwgbGV0dGVyICkge1xuXHRyZXR1cm4gbGV0dGVyLnRvVXBwZXJDYXNlKCk7XG59XG5cbi8vIENvbnZlcnQgZGFzaGVkIHRvIGNhbWVsQ2FzZTsgdXNlZCBieSB0aGUgY3NzIGFuZCBkYXRhIG1vZHVsZXNcbi8vIFN1cHBvcnQ6IElFIDw9OSAtIDExLCBFZGdlIDEyIC0gMTVcbi8vIE1pY3Jvc29mdCBmb3Jnb3QgdG8gaHVtcCB0aGVpciB2ZW5kb3IgcHJlZml4ICgjOTU3MilcbmZ1bmN0aW9uIGNhbWVsQ2FzZSggc3RyaW5nICkge1xuXHRyZXR1cm4gc3RyaW5nLnJlcGxhY2UoIHJtc1ByZWZpeCwgXCJtcy1cIiApLnJlcGxhY2UoIHJkYXNoQWxwaGEsIGZjYW1lbENhc2UgKTtcbn1cbnZhciBhY2NlcHREYXRhID0gZnVuY3Rpb24oIG93bmVyICkge1xuXG5cdC8vIEFjY2VwdHMgb25seTpcblx0Ly8gIC0gTm9kZVxuXHQvLyAgICAtIE5vZGUuRUxFTUVOVF9OT0RFXG5cdC8vICAgIC0gTm9kZS5ET0NVTUVOVF9OT0RFXG5cdC8vICAtIE9iamVjdFxuXHQvLyAgICAtIEFueVxuXHRyZXR1cm4gb3duZXIubm9kZVR5cGUgPT09IDEgfHwgb3duZXIubm9kZVR5cGUgPT09IDkgfHwgISggK293bmVyLm5vZGVUeXBlICk7XG59O1xuXG5cblxuXG5mdW5jdGlvbiBEYXRhKCkge1xuXHR0aGlzLmV4cGFuZG8gPSBqUXVlcnkuZXhwYW5kbyArIERhdGEudWlkKys7XG59XG5cbkRhdGEudWlkID0gMTtcblxuRGF0YS5wcm90b3R5cGUgPSB7XG5cblx0Y2FjaGU6IGZ1bmN0aW9uKCBvd25lciApIHtcblxuXHRcdC8vIENoZWNrIGlmIHRoZSBvd25lciBvYmplY3QgYWxyZWFkeSBoYXMgYSBjYWNoZVxuXHRcdHZhciB2YWx1ZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdC8vIElmIG5vdCwgY3JlYXRlIG9uZVxuXHRcdGlmICggIXZhbHVlICkge1xuXHRcdFx0dmFsdWUgPSB7fTtcblxuXHRcdFx0Ly8gV2UgY2FuIGFjY2VwdCBkYXRhIGZvciBub24tZWxlbWVudCBub2RlcyBpbiBtb2Rlcm4gYnJvd3NlcnMsXG5cdFx0XHQvLyBidXQgd2Ugc2hvdWxkIG5vdCwgc2VlICM4MzM1LlxuXHRcdFx0Ly8gQWx3YXlzIHJldHVybiBhbiBlbXB0eSBvYmplY3QuXG5cdFx0XHRpZiAoIGFjY2VwdERhdGEoIG93bmVyICkgKSB7XG5cblx0XHRcdFx0Ly8gSWYgaXQgaXMgYSBub2RlIHVubGlrZWx5IHRvIGJlIHN0cmluZ2lmeS1lZCBvciBsb29wZWQgb3ZlclxuXHRcdFx0XHQvLyB1c2UgcGxhaW4gYXNzaWdubWVudFxuXHRcdFx0XHRpZiAoIG93bmVyLm5vZGVUeXBlICkge1xuXHRcdFx0XHRcdG93bmVyWyB0aGlzLmV4cGFuZG8gXSA9IHZhbHVlO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBzZWN1cmUgaXQgaW4gYSBub24tZW51bWVyYWJsZSBwcm9wZXJ0eVxuXHRcdFx0XHQvLyBjb25maWd1cmFibGUgbXVzdCBiZSB0cnVlIHRvIGFsbG93IHRoZSBwcm9wZXJ0eSB0byBiZVxuXHRcdFx0XHQvLyBkZWxldGVkIHdoZW4gZGF0YSBpcyByZW1vdmVkXG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KCBvd25lciwgdGhpcy5leHBhbmRvLCB7XG5cdFx0XHRcdFx0XHR2YWx1ZTogdmFsdWUsXG5cdFx0XHRcdFx0XHRjb25maWd1cmFibGU6IHRydWVcblx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdmFsdWU7XG5cdH0sXG5cdHNldDogZnVuY3Rpb24oIG93bmVyLCBkYXRhLCB2YWx1ZSApIHtcblx0XHR2YXIgcHJvcCxcblx0XHRcdGNhY2hlID0gdGhpcy5jYWNoZSggb3duZXIgKTtcblxuXHRcdC8vIEhhbmRsZTogWyBvd25lciwga2V5LCB2YWx1ZSBdIGFyZ3Ncblx0XHQvLyBBbHdheXMgdXNlIGNhbWVsQ2FzZSBrZXkgKGdoLTIyNTcpXG5cdFx0aWYgKCB0eXBlb2YgZGF0YSA9PT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGNhY2hlWyBjYW1lbENhc2UoIGRhdGEgKSBdID0gdmFsdWU7XG5cblx0XHQvLyBIYW5kbGU6IFsgb3duZXIsIHsgcHJvcGVydGllcyB9IF0gYXJnc1xuXHRcdH0gZWxzZSB7XG5cblx0XHRcdC8vIENvcHkgdGhlIHByb3BlcnRpZXMgb25lLWJ5LW9uZSB0byB0aGUgY2FjaGUgb2JqZWN0XG5cdFx0XHRmb3IgKCBwcm9wIGluIGRhdGEgKSB7XG5cdFx0XHRcdGNhY2hlWyBjYW1lbENhc2UoIHByb3AgKSBdID0gZGF0YVsgcHJvcCBdO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRyZXR1cm4gY2FjaGU7XG5cdH0sXG5cdGdldDogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0cmV0dXJuIGtleSA9PT0gdW5kZWZpbmVkID9cblx0XHRcdHRoaXMuY2FjaGUoIG93bmVyICkgOlxuXG5cdFx0XHQvLyBBbHdheXMgdXNlIGNhbWVsQ2FzZSBrZXkgKGdoLTIyNTcpXG5cdFx0XHRvd25lclsgdGhpcy5leHBhbmRvIF0gJiYgb3duZXJbIHRoaXMuZXhwYW5kbyBdWyBjYW1lbENhc2UoIGtleSApIF07XG5cdH0sXG5cdGFjY2VzczogZnVuY3Rpb24oIG93bmVyLCBrZXksIHZhbHVlICkge1xuXG5cdFx0Ly8gSW4gY2FzZXMgd2hlcmUgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBObyBrZXkgd2FzIHNwZWNpZmllZFxuXHRcdC8vICAgMi4gQSBzdHJpbmcga2V5IHdhcyBzcGVjaWZpZWQsIGJ1dCBubyB2YWx1ZSBwcm92aWRlZFxuXHRcdC8vXG5cdFx0Ly8gVGFrZSB0aGUgXCJyZWFkXCIgcGF0aCBhbmQgYWxsb3cgdGhlIGdldCBtZXRob2QgdG8gZGV0ZXJtaW5lXG5cdFx0Ly8gd2hpY2ggdmFsdWUgdG8gcmV0dXJuLCByZXNwZWN0aXZlbHkgZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBUaGUgZW50aXJlIGNhY2hlIG9iamVjdFxuXHRcdC8vICAgMi4gVGhlIGRhdGEgc3RvcmVkIGF0IHRoZSBrZXlcblx0XHQvL1xuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHxcblx0XHRcdFx0KCAoIGtleSAmJiB0eXBlb2Yga2V5ID09PSBcInN0cmluZ1wiICkgJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApICkge1xuXG5cdFx0XHRyZXR1cm4gdGhpcy5nZXQoIG93bmVyLCBrZXkgKTtcblx0XHR9XG5cblx0XHQvLyBXaGVuIHRoZSBrZXkgaXMgbm90IGEgc3RyaW5nLCBvciBib3RoIGEga2V5IGFuZCB2YWx1ZVxuXHRcdC8vIGFyZSBzcGVjaWZpZWQsIHNldCBvciBleHRlbmQgKGV4aXN0aW5nIG9iamVjdHMpIHdpdGggZWl0aGVyOlxuXHRcdC8vXG5cdFx0Ly8gICAxLiBBbiBvYmplY3Qgb2YgcHJvcGVydGllc1xuXHRcdC8vICAgMi4gQSBrZXkgYW5kIHZhbHVlXG5cdFx0Ly9cblx0XHR0aGlzLnNldCggb3duZXIsIGtleSwgdmFsdWUgKTtcblxuXHRcdC8vIFNpbmNlIHRoZSBcInNldFwiIHBhdGggY2FuIGhhdmUgdHdvIHBvc3NpYmxlIGVudHJ5IHBvaW50c1xuXHRcdC8vIHJldHVybiB0aGUgZXhwZWN0ZWQgZGF0YSBiYXNlZCBvbiB3aGljaCBwYXRoIHdhcyB0YWtlblsqXVxuXHRcdHJldHVybiB2YWx1ZSAhPT0gdW5kZWZpbmVkID8gdmFsdWUgOiBrZXk7XG5cdH0sXG5cdHJlbW92ZTogZnVuY3Rpb24oIG93bmVyLCBrZXkgKSB7XG5cdFx0dmFyIGksXG5cdFx0XHRjYWNoZSA9IG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblxuXHRcdGlmICggY2FjaGUgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIGtleSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHQvLyBTdXBwb3J0IGFycmF5IG9yIHNwYWNlIHNlcGFyYXRlZCBzdHJpbmcgb2Yga2V5c1xuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCBrZXkgKSApIHtcblxuXHRcdFx0XHQvLyBJZiBrZXkgaXMgYW4gYXJyYXkgb2Yga2V5cy4uLlxuXHRcdFx0XHQvLyBXZSBhbHdheXMgc2V0IGNhbWVsQ2FzZSBrZXlzLCBzbyByZW1vdmUgdGhhdC5cblx0XHRcdFx0a2V5ID0ga2V5Lm1hcCggY2FtZWxDYXNlICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRrZXkgPSBjYW1lbENhc2UoIGtleSApO1xuXG5cdFx0XHRcdC8vIElmIGEga2V5IHdpdGggdGhlIHNwYWNlcyBleGlzdHMsIHVzZSBpdC5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlLCBjcmVhdGUgYW4gYXJyYXkgYnkgbWF0Y2hpbmcgbm9uLXdoaXRlc3BhY2Vcblx0XHRcdFx0a2V5ID0ga2V5IGluIGNhY2hlID9cblx0XHRcdFx0XHRbIGtleSBdIDpcblx0XHRcdFx0XHQoIGtleS5tYXRjaCggcm5vdGh0bWx3aGl0ZSApIHx8IFtdICk7XG5cdFx0XHR9XG5cblx0XHRcdGkgPSBrZXkubGVuZ3RoO1xuXG5cdFx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdFx0ZGVsZXRlIGNhY2hlWyBrZXlbIGkgXSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSB0aGUgZXhwYW5kbyBpZiB0aGVyZSdzIG5vIG1vcmUgZGF0YVxuXHRcdGlmICgga2V5ID09PSB1bmRlZmluZWQgfHwgalF1ZXJ5LmlzRW1wdHlPYmplY3QoIGNhY2hlICkgKSB7XG5cblx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PTM1IC0gNDVcblx0XHRcdC8vIFdlYmtpdCAmIEJsaW5rIHBlcmZvcm1hbmNlIHN1ZmZlcnMgd2hlbiBkZWxldGluZyBwcm9wZXJ0aWVzXG5cdFx0XHQvLyBmcm9tIERPTSBub2Rlcywgc28gc2V0IHRvIHVuZGVmaW5lZCBpbnN0ZWFkXG5cdFx0XHQvLyBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD0zNzg2MDcgKGJ1ZyByZXN0cmljdGVkKVxuXHRcdFx0aWYgKCBvd25lci5ub2RlVHlwZSApIHtcblx0XHRcdFx0b3duZXJbIHRoaXMuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZGVsZXRlIG93bmVyWyB0aGlzLmV4cGFuZG8gXTtcblx0XHRcdH1cblx0XHR9XG5cdH0sXG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBvd25lciApIHtcblx0XHR2YXIgY2FjaGUgPSBvd25lclsgdGhpcy5leHBhbmRvIF07XG5cdFx0cmV0dXJuIGNhY2hlICE9PSB1bmRlZmluZWQgJiYgIWpRdWVyeS5pc0VtcHR5T2JqZWN0KCBjYWNoZSApO1xuXHR9XG59O1xudmFyIGRhdGFQcml2ID0gbmV3IERhdGEoKTtcblxudmFyIGRhdGFVc2VyID0gbmV3IERhdGEoKTtcblxuXG5cbi8vXHRJbXBsZW1lbnRhdGlvbiBTdW1tYXJ5XG4vL1xuLy9cdDEuIEVuZm9yY2UgQVBJIHN1cmZhY2UgYW5kIHNlbWFudGljIGNvbXBhdGliaWxpdHkgd2l0aCAxLjkueCBicmFuY2hcbi8vXHQyLiBJbXByb3ZlIHRoZSBtb2R1bGUncyBtYWludGFpbmFiaWxpdHkgYnkgcmVkdWNpbmcgdGhlIHN0b3JhZ2Vcbi8vXHRcdHBhdGhzIHRvIGEgc2luZ2xlIG1lY2hhbmlzbS5cbi8vXHQzLiBVc2UgdGhlIHNhbWUgc2luZ2xlIG1lY2hhbmlzbSB0byBzdXBwb3J0IFwicHJpdmF0ZVwiIGFuZCBcInVzZXJcIiBkYXRhLlxuLy9cdDQuIF9OZXZlcl8gZXhwb3NlIFwicHJpdmF0ZVwiIGRhdGEgdG8gdXNlciBjb2RlIChUT0RPOiBEcm9wIF9kYXRhLCBfcmVtb3ZlRGF0YSlcbi8vXHQ1LiBBdm9pZCBleHBvc2luZyBpbXBsZW1lbnRhdGlvbiBkZXRhaWxzIG9uIHVzZXIgb2JqZWN0cyAoZWcuIGV4cGFuZG8gcHJvcGVydGllcylcbi8vXHQ2LiBQcm92aWRlIGEgY2xlYXIgcGF0aCBmb3IgaW1wbGVtZW50YXRpb24gdXBncmFkZSB0byBXZWFrTWFwIGluIDIwMTRcblxudmFyIHJicmFjZSA9IC9eKD86XFx7W1xcd1xcV10qXFx9fFxcW1tcXHdcXFddKlxcXSkkLyxcblx0cm11bHRpRGFzaCA9IC9bQS1aXS9nO1xuXG5mdW5jdGlvbiBnZXREYXRhKCBkYXRhICkge1xuXHRpZiAoIGRhdGEgPT09IFwidHJ1ZVwiICkge1xuXHRcdHJldHVybiB0cnVlO1xuXHR9XG5cblx0aWYgKCBkYXRhID09PSBcImZhbHNlXCIgKSB7XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0aWYgKCBkYXRhID09PSBcIm51bGxcIiApIHtcblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8vIE9ubHkgY29udmVydCB0byBhIG51bWJlciBpZiBpdCBkb2Vzbid0IGNoYW5nZSB0aGUgc3RyaW5nXG5cdGlmICggZGF0YSA9PT0gK2RhdGEgKyBcIlwiICkge1xuXHRcdHJldHVybiArZGF0YTtcblx0fVxuXG5cdGlmICggcmJyYWNlLnRlc3QoIGRhdGEgKSApIHtcblx0XHRyZXR1cm4gSlNPTi5wYXJzZSggZGF0YSApO1xuXHR9XG5cblx0cmV0dXJuIGRhdGE7XG59XG5cbmZ1bmN0aW9uIGRhdGFBdHRyKCBlbGVtLCBrZXksIGRhdGEgKSB7XG5cdHZhciBuYW1lO1xuXG5cdC8vIElmIG5vdGhpbmcgd2FzIGZvdW5kIGludGVybmFsbHksIHRyeSB0byBmZXRjaCBhbnlcblx0Ly8gZGF0YSBmcm9tIHRoZSBIVE1MNSBkYXRhLSogYXR0cmlidXRlXG5cdGlmICggZGF0YSA9PT0gdW5kZWZpbmVkICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cdFx0bmFtZSA9IFwiZGF0YS1cIiArIGtleS5yZXBsYWNlKCBybXVsdGlEYXNoLCBcIi0kJlwiICkudG9Mb3dlckNhc2UoKTtcblx0XHRkYXRhID0gZWxlbS5nZXRBdHRyaWJ1dGUoIG5hbWUgKTtcblxuXHRcdGlmICggdHlwZW9mIGRhdGEgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHR0cnkge1xuXHRcdFx0XHRkYXRhID0gZ2V0RGF0YSggZGF0YSApO1xuXHRcdFx0fSBjYXRjaCAoIGUgKSB7fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgd2Ugc2V0IHRoZSBkYXRhIHNvIGl0IGlzbid0IGNoYW5nZWQgbGF0ZXJcblx0XHRcdGRhdGFVc2VyLnNldCggZWxlbSwga2V5LCBkYXRhICk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBkYXRhO1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdGhhc0RhdGE6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdHJldHVybiBkYXRhVXNlci5oYXNEYXRhKCBlbGVtICkgfHwgZGF0YVByaXYuaGFzRGF0YSggZWxlbSApO1xuXHR9LFxuXG5cdGRhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuXHRcdHJldHVybiBkYXRhVXNlci5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRyZW1vdmVEYXRhOiBmdW5jdGlvbiggZWxlbSwgbmFtZSApIHtcblx0XHRkYXRhVXNlci5yZW1vdmUoIGVsZW0sIG5hbWUgKTtcblx0fSxcblxuXHQvLyBUT0RPOiBOb3cgdGhhdCBhbGwgY2FsbHMgdG8gX2RhdGEgYW5kIF9yZW1vdmVEYXRhIGhhdmUgYmVlbiByZXBsYWNlZFxuXHQvLyB3aXRoIGRpcmVjdCBjYWxscyB0byBkYXRhUHJpdiBtZXRob2RzLCB0aGVzZSBjYW4gYmUgZGVwcmVjYXRlZC5cblx0X2RhdGE6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBkYXRhICkge1xuXHRcdHJldHVybiBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIG5hbWUsIGRhdGEgKTtcblx0fSxcblxuXHRfcmVtb3ZlRGF0YTogZnVuY3Rpb24oIGVsZW0sIG5hbWUgKSB7XG5cdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBuYW1lICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRkYXRhOiBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcblx0XHR2YXIgaSwgbmFtZSwgZGF0YSxcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF0sXG5cdFx0XHRhdHRycyA9IGVsZW0gJiYgZWxlbS5hdHRyaWJ1dGVzO1xuXG5cdFx0Ly8gR2V0cyBhbGwgdmFsdWVzXG5cdFx0aWYgKCBrZXkgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdGlmICggdGhpcy5sZW5ndGggKSB7XG5cdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0gKTtcblxuXHRcdFx0XHRpZiAoIGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgIWRhdGFQcml2LmdldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiApICkge1xuXHRcdFx0XHRcdGkgPSBhdHRycy5sZW5ndGg7XG5cdFx0XHRcdFx0d2hpbGUgKCBpLS0gKSB7XG5cblx0XHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDExIG9ubHlcblx0XHRcdFx0XHRcdC8vIFRoZSBhdHRycyBlbGVtZW50cyBjYW4gYmUgbnVsbCAoIzE0ODk0KVxuXHRcdFx0XHRcdFx0aWYgKCBhdHRyc1sgaSBdICkge1xuXHRcdFx0XHRcdFx0XHRuYW1lID0gYXR0cnNbIGkgXS5uYW1lO1xuXHRcdFx0XHRcdFx0XHRpZiAoIG5hbWUuaW5kZXhPZiggXCJkYXRhLVwiICkgPT09IDAgKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmFtZSA9IGNhbWVsQ2FzZSggbmFtZS5zbGljZSggNSApICk7XG5cdFx0XHRcdFx0XHRcdFx0ZGF0YUF0dHIoIGVsZW0sIG5hbWUsIGRhdGFbIG5hbWUgXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGRhdGFQcml2LnNldCggZWxlbSwgXCJoYXNEYXRhQXR0cnNcIiwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiBkYXRhO1xuXHRcdH1cblxuXHRcdC8vIFNldHMgbXVsdGlwbGUgdmFsdWVzXG5cdFx0aWYgKCB0eXBlb2Yga2V5ID09PSBcIm9iamVjdFwiICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFVc2VyLnNldCggdGhpcywga2V5ICk7XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdFx0dmFyIGRhdGE7XG5cblx0XHRcdC8vIFRoZSBjYWxsaW5nIGpRdWVyeSBvYmplY3QgKGVsZW1lbnQgbWF0Y2hlcykgaXMgbm90IGVtcHR5XG5cdFx0XHQvLyAoYW5kIHRoZXJlZm9yZSBoYXMgYW4gZWxlbWVudCBhcHBlYXJzIGF0IHRoaXNbIDAgXSkgYW5kIHRoZVxuXHRcdFx0Ly8gYHZhbHVlYCBwYXJhbWV0ZXIgd2FzIG5vdCB1bmRlZmluZWQuIEFuIGVtcHR5IGpRdWVyeSBvYmplY3Rcblx0XHRcdC8vIHdpbGwgcmVzdWx0IGluIGB1bmRlZmluZWRgIGZvciBlbGVtID0gdGhpc1sgMCBdIHdoaWNoIHdpbGxcblx0XHRcdC8vIHRocm93IGFuIGV4Y2VwdGlvbiBpZiBhbiBhdHRlbXB0IHRvIHJlYWQgYSBkYXRhIGNhY2hlIGlzIG1hZGUuXG5cdFx0XHRpZiAoIGVsZW0gJiYgdmFsdWUgPT09IHVuZGVmaW5lZCApIHtcblxuXHRcdFx0XHQvLyBBdHRlbXB0IHRvIGdldCBkYXRhIGZyb20gdGhlIGNhY2hlXG5cdFx0XHRcdC8vIFRoZSBrZXkgd2lsbCBhbHdheXMgYmUgY2FtZWxDYXNlZCBpbiBEYXRhXG5cdFx0XHRcdGRhdGEgPSBkYXRhVXNlci5nZXQoIGVsZW0sIGtleSApO1xuXHRcdFx0XHRpZiAoIGRhdGEgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRyZXR1cm4gZGF0YTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEF0dGVtcHQgdG8gXCJkaXNjb3ZlclwiIHRoZSBkYXRhIGluXG5cdFx0XHRcdC8vIEhUTUw1IGN1c3RvbSBkYXRhLSogYXR0cnNcblx0XHRcdFx0ZGF0YSA9IGRhdGFBdHRyKCBlbGVtLCBrZXkgKTtcblx0XHRcdFx0aWYgKCBkYXRhICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGRhdGE7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBXZSB0cmllZCByZWFsbHkgaGFyZCwgYnV0IHRoZSBkYXRhIGRvZXNuJ3QgZXhpc3QuXG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU2V0IHRoZSBkYXRhLi4uXG5cdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdC8vIFdlIGFsd2F5cyBzdG9yZSB0aGUgY2FtZWxDYXNlZCBrZXlcblx0XHRcdFx0ZGF0YVVzZXIuc2V0KCB0aGlzLCBrZXksIHZhbHVlICk7XG5cdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxLCBudWxsLCB0cnVlICk7XG5cdH0sXG5cblx0cmVtb3ZlRGF0YTogZnVuY3Rpb24oIGtleSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGRhdGFVc2VyLnJlbW92ZSggdGhpcywga2V5ICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cblxualF1ZXJ5LmV4dGVuZCgge1xuXHRxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUsIGRhdGEgKSB7XG5cdFx0dmFyIHF1ZXVlO1xuXG5cdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0dHlwZSA9ICggdHlwZSB8fCBcImZ4XCIgKSArIFwicXVldWVcIjtcblx0XHRcdHF1ZXVlID0gZGF0YVByaXYuZ2V0KCBlbGVtLCB0eXBlICk7XG5cblx0XHRcdC8vIFNwZWVkIHVwIGRlcXVldWUgYnkgZ2V0dGluZyBvdXQgcXVpY2tseSBpZiB0aGlzIGlzIGp1c3QgYSBsb29rdXBcblx0XHRcdGlmICggZGF0YSApIHtcblx0XHRcdFx0aWYgKCAhcXVldWUgfHwgQXJyYXkuaXNBcnJheSggZGF0YSApICkge1xuXHRcdFx0XHRcdHF1ZXVlID0gZGF0YVByaXYuYWNjZXNzKCBlbGVtLCB0eXBlLCBqUXVlcnkubWFrZUFycmF5KCBkYXRhICkgKTtcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRxdWV1ZS5wdXNoKCBkYXRhICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdHJldHVybiBxdWV1ZSB8fCBbXTtcblx0XHR9XG5cdH0sXG5cblx0ZGVxdWV1ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXG5cdFx0dmFyIHF1ZXVlID0galF1ZXJ5LnF1ZXVlKCBlbGVtLCB0eXBlICksXG5cdFx0XHRzdGFydExlbmd0aCA9IHF1ZXVlLmxlbmd0aCxcblx0XHRcdGZuID0gcXVldWUuc2hpZnQoKSxcblx0XHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCB0eXBlICksXG5cdFx0XHRuZXh0ID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGpRdWVyeS5kZXF1ZXVlKCBlbGVtLCB0eXBlICk7XG5cdFx0XHR9O1xuXG5cdFx0Ly8gSWYgdGhlIGZ4IHF1ZXVlIGlzIGRlcXVldWVkLCBhbHdheXMgcmVtb3ZlIHRoZSBwcm9ncmVzcyBzZW50aW5lbFxuXHRcdGlmICggZm4gPT09IFwiaW5wcm9ncmVzc1wiICkge1xuXHRcdFx0Zm4gPSBxdWV1ZS5zaGlmdCgpO1xuXHRcdFx0c3RhcnRMZW5ndGgtLTtcblx0XHR9XG5cblx0XHRpZiAoIGZuICkge1xuXG5cdFx0XHQvLyBBZGQgYSBwcm9ncmVzcyBzZW50aW5lbCB0byBwcmV2ZW50IHRoZSBmeCBxdWV1ZSBmcm9tIGJlaW5nXG5cdFx0XHQvLyBhdXRvbWF0aWNhbGx5IGRlcXVldWVkXG5cdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiApIHtcblx0XHRcdFx0cXVldWUudW5zaGlmdCggXCJpbnByb2dyZXNzXCIgKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gQ2xlYXIgdXAgdGhlIGxhc3QgcXVldWUgc3RvcCBmdW5jdGlvblxuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRmbi5jYWxsKCBlbGVtLCBuZXh0LCBob29rcyApO1xuXHRcdH1cblxuXHRcdGlmICggIXN0YXJ0TGVuZ3RoICYmIGhvb2tzICkge1xuXHRcdFx0aG9va3MuZW1wdHkuZmlyZSgpO1xuXHRcdH1cblx0fSxcblxuXHQvLyBOb3QgcHVibGljIC0gZ2VuZXJhdGUgYSBxdWV1ZUhvb2tzIG9iamVjdCwgb3IgcmV0dXJuIHRoZSBjdXJyZW50IG9uZVxuXHRfcXVldWVIb29rczogZnVuY3Rpb24oIGVsZW0sIHR5cGUgKSB7XG5cdFx0dmFyIGtleSA9IHR5cGUgKyBcInF1ZXVlSG9va3NcIjtcblx0XHRyZXR1cm4gZGF0YVByaXYuZ2V0KCBlbGVtLCBrZXkgKSB8fCBkYXRhUHJpdi5hY2Nlc3MoIGVsZW0sIGtleSwge1xuXHRcdFx0ZW1wdHk6IGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLmFkZCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdGRhdGFQcml2LnJlbW92ZSggZWxlbSwgWyB0eXBlICsgXCJxdWV1ZVwiLCBrZXkgXSApO1xuXHRcdFx0fSApXG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0cXVldWU6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBzZXR0ZXIgPSAyO1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGRhdGEgPSB0eXBlO1xuXHRcdFx0dHlwZSA9IFwiZnhcIjtcblx0XHRcdHNldHRlci0tO1xuXHRcdH1cblxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCA8IHNldHRlciApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucXVldWUoIHRoaXNbIDAgXSwgdHlwZSApO1xuXHRcdH1cblxuXHRcdHJldHVybiBkYXRhID09PSB1bmRlZmluZWQgP1xuXHRcdFx0dGhpcyA6XG5cdFx0XHR0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgcXVldWUgPSBqUXVlcnkucXVldWUoIHRoaXMsIHR5cGUsIGRhdGEgKTtcblxuXHRcdFx0XHQvLyBFbnN1cmUgYSBob29rcyBmb3IgdGhpcyBxdWV1ZVxuXHRcdFx0XHRqUXVlcnkuX3F1ZXVlSG9va3MoIHRoaXMsIHR5cGUgKTtcblxuXHRcdFx0XHRpZiAoIHR5cGUgPT09IFwiZnhcIiAmJiBxdWV1ZVsgMCBdICE9PSBcImlucHJvZ3Jlc3NcIiApIHtcblx0XHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdH0sXG5cdGRlcXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIHR5cGUgKTtcblx0XHR9ICk7XG5cdH0sXG5cdGNsZWFyUXVldWU6IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdHJldHVybiB0aGlzLnF1ZXVlKCB0eXBlIHx8IFwiZnhcIiwgW10gKTtcblx0fSxcblxuXHQvLyBHZXQgYSBwcm9taXNlIHJlc29sdmVkIHdoZW4gcXVldWVzIG9mIGEgY2VydGFpbiB0eXBlXG5cdC8vIGFyZSBlbXB0aWVkIChmeCBpcyB0aGUgdHlwZSBieSBkZWZhdWx0KVxuXHRwcm9taXNlOiBmdW5jdGlvbiggdHlwZSwgb2JqICkge1xuXHRcdHZhciB0bXAsXG5cdFx0XHRjb3VudCA9IDEsXG5cdFx0XHRkZWZlciA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0ZWxlbWVudHMgPSB0aGlzLFxuXHRcdFx0aSA9IHRoaXMubGVuZ3RoLFxuXHRcdFx0cmVzb2x2ZSA9IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRpZiAoICEoIC0tY291bnQgKSApIHtcblx0XHRcdFx0XHRkZWZlci5yZXNvbHZlV2l0aCggZWxlbWVudHMsIFsgZWxlbWVudHMgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0aWYgKCB0eXBlb2YgdHlwZSAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdG9iaiA9IHR5cGU7XG5cdFx0XHR0eXBlID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHR0eXBlID0gdHlwZSB8fCBcImZ4XCI7XG5cblx0XHR3aGlsZSAoIGktLSApIHtcblx0XHRcdHRtcCA9IGRhdGFQcml2LmdldCggZWxlbWVudHNbIGkgXSwgdHlwZSArIFwicXVldWVIb29rc1wiICk7XG5cdFx0XHRpZiAoIHRtcCAmJiB0bXAuZW1wdHkgKSB7XG5cdFx0XHRcdGNvdW50Kys7XG5cdFx0XHRcdHRtcC5lbXB0eS5hZGQoIHJlc29sdmUgKTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmVzb2x2ZSgpO1xuXHRcdHJldHVybiBkZWZlci5wcm9taXNlKCBvYmogKTtcblx0fVxufSApO1xudmFyIHBudW0gPSAoIC9bKy1dPyg/OlxcZCpcXC58KVxcZCsoPzpbZUVdWystXT9cXGQrfCkvICkuc291cmNlO1xuXG52YXIgcmNzc051bSA9IG5ldyBSZWdFeHAoIFwiXig/OihbKy1dKT18KShcIiArIHBudW0gKyBcIikoW2EteiVdKikkXCIsIFwiaVwiICk7XG5cblxudmFyIGNzc0V4cGFuZCA9IFsgXCJUb3BcIiwgXCJSaWdodFwiLCBcIkJvdHRvbVwiLCBcIkxlZnRcIiBdO1xuXG52YXIgZG9jdW1lbnRFbGVtZW50ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuXG5cblxuXHR2YXIgaXNBdHRhY2hlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5jb250YWlucyggZWxlbS5vd25lckRvY3VtZW50LCBlbGVtICk7XG5cdFx0fSxcblx0XHRjb21wb3NlZCA9IHsgY29tcG9zZWQ6IHRydWUgfTtcblxuXHQvLyBTdXBwb3J0OiBJRSA5IC0gMTErLCBFZGdlIDEyIC0gMTgrLCBpT1MgMTAuMCAtIDEwLjIgb25seVxuXHQvLyBDaGVjayBhdHRhY2htZW50IGFjcm9zcyBzaGFkb3cgRE9NIGJvdW5kYXJpZXMgd2hlbiBwb3NzaWJsZSAoZ2gtMzUwNClcblx0Ly8gU3VwcG9ydDogaU9TIDEwLjAtMTAuMiBvbmx5XG5cdC8vIEVhcmx5IGlPUyAxMCB2ZXJzaW9ucyBzdXBwb3J0IGBhdHRhY2hTaGFkb3dgIGJ1dCBub3QgYGdldFJvb3ROb2RlYCxcblx0Ly8gbGVhZGluZyB0byBlcnJvcnMuIFdlIG5lZWQgdG8gY2hlY2sgZm9yIGBnZXRSb290Tm9kZWAuXG5cdGlmICggZG9jdW1lbnRFbGVtZW50LmdldFJvb3ROb2RlICkge1xuXHRcdGlzQXR0YWNoZWQgPSBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuY29udGFpbnMoIGVsZW0ub3duZXJEb2N1bWVudCwgZWxlbSApIHx8XG5cdFx0XHRcdGVsZW0uZ2V0Um9vdE5vZGUoIGNvbXBvc2VkICkgPT09IGVsZW0ub3duZXJEb2N1bWVudDtcblx0XHR9O1xuXHR9XG52YXIgaXNIaWRkZW5XaXRoaW5UcmVlID0gZnVuY3Rpb24oIGVsZW0sIGVsICkge1xuXG5cdFx0Ly8gaXNIaWRkZW5XaXRoaW5UcmVlIG1pZ2h0IGJlIGNhbGxlZCBmcm9tIGpRdWVyeSNmaWx0ZXIgZnVuY3Rpb247XG5cdFx0Ly8gaW4gdGhhdCBjYXNlLCBlbGVtZW50IHdpbGwgYmUgc2Vjb25kIGFyZ3VtZW50XG5cdFx0ZWxlbSA9IGVsIHx8IGVsZW07XG5cblx0XHQvLyBJbmxpbmUgc3R5bGUgdHJ1bXBzIGFsbFxuXHRcdHJldHVybiBlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwibm9uZVwiIHx8XG5cdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPT09IFwiXCIgJiZcblxuXHRcdFx0Ly8gT3RoZXJ3aXNlLCBjaGVjayBjb21wdXRlZCBzdHlsZVxuXHRcdFx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTQzIC0gNDVcblx0XHRcdC8vIERpc2Nvbm5lY3RlZCBlbGVtZW50cyBjYW4gaGF2ZSBjb21wdXRlZCBkaXNwbGF5OiBub25lLCBzbyBmaXJzdCBjb25maXJtIHRoYXQgZWxlbSBpc1xuXHRcdFx0Ly8gaW4gdGhlIGRvY3VtZW50LlxuXHRcdFx0aXNBdHRhY2hlZCggZWxlbSApICYmXG5cblx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgPT09IFwibm9uZVwiO1xuXHR9O1xuXG52YXIgc3dhcCA9IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBjYWxsYmFjaywgYXJncyApIHtcblx0dmFyIHJldCwgbmFtZSxcblx0XHRvbGQgPSB7fTtcblxuXHQvLyBSZW1lbWJlciB0aGUgb2xkIHZhbHVlcywgYW5kIGluc2VydCB0aGUgbmV3IG9uZXNcblx0Zm9yICggbmFtZSBpbiBvcHRpb25zICkge1xuXHRcdG9sZFsgbmFtZSBdID0gZWxlbS5zdHlsZVsgbmFtZSBdO1xuXHRcdGVsZW0uc3R5bGVbIG5hbWUgXSA9IG9wdGlvbnNbIG5hbWUgXTtcblx0fVxuXG5cdHJldCA9IGNhbGxiYWNrLmFwcGx5KCBlbGVtLCBhcmdzIHx8IFtdICk7XG5cblx0Ly8gUmV2ZXJ0IHRoZSBvbGQgdmFsdWVzXG5cdGZvciAoIG5hbWUgaW4gb3B0aW9ucyApIHtcblx0XHRlbGVtLnN0eWxlWyBuYW1lIF0gPSBvbGRbIG5hbWUgXTtcblx0fVxuXG5cdHJldHVybiByZXQ7XG59O1xuXG5cblxuXG5mdW5jdGlvbiBhZGp1c3RDU1MoIGVsZW0sIHByb3AsIHZhbHVlUGFydHMsIHR3ZWVuICkge1xuXHR2YXIgYWRqdXN0ZWQsIHNjYWxlLFxuXHRcdG1heEl0ZXJhdGlvbnMgPSAyMCxcblx0XHRjdXJyZW50VmFsdWUgPSB0d2VlbiA/XG5cdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuLmN1cigpO1xuXHRcdFx0fSA6XG5cdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0cmV0dXJuIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AsIFwiXCIgKTtcblx0XHRcdH0sXG5cdFx0aW5pdGlhbCA9IGN1cnJlbnRWYWx1ZSgpLFxuXHRcdHVuaXQgPSB2YWx1ZVBhcnRzICYmIHZhbHVlUGFydHNbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKSxcblxuXHRcdC8vIFN0YXJ0aW5nIHZhbHVlIGNvbXB1dGF0aW9uIGlzIHJlcXVpcmVkIGZvciBwb3RlbnRpYWwgdW5pdCBtaXNtYXRjaGVzXG5cdFx0aW5pdGlhbEluVW5pdCA9IGVsZW0ubm9kZVR5cGUgJiZcblx0XHRcdCggalF1ZXJ5LmNzc051bWJlclsgcHJvcCBdIHx8IHVuaXQgIT09IFwicHhcIiAmJiAraW5pdGlhbCApICYmXG5cdFx0XHRyY3NzTnVtLmV4ZWMoIGpRdWVyeS5jc3MoIGVsZW0sIHByb3AgKSApO1xuXG5cdGlmICggaW5pdGlhbEluVW5pdCAmJiBpbml0aWFsSW5Vbml0WyAzIF0gIT09IHVuaXQgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDw9NTRcblx0XHQvLyBIYWx2ZSB0aGUgaXRlcmF0aW9uIHRhcmdldCB2YWx1ZSB0byBwcmV2ZW50IGludGVyZmVyZW5jZSBmcm9tIENTUyB1cHBlciBib3VuZHMgKGdoLTIxNDQpXG5cdFx0aW5pdGlhbCA9IGluaXRpYWwgLyAyO1xuXG5cdFx0Ly8gVHJ1c3QgdW5pdHMgcmVwb3J0ZWQgYnkgalF1ZXJ5LmNzc1xuXHRcdHVuaXQgPSB1bml0IHx8IGluaXRpYWxJblVuaXRbIDMgXTtcblxuXHRcdC8vIEl0ZXJhdGl2ZWx5IGFwcHJveGltYXRlIGZyb20gYSBub256ZXJvIHN0YXJ0aW5nIHBvaW50XG5cdFx0aW5pdGlhbEluVW5pdCA9ICtpbml0aWFsIHx8IDE7XG5cblx0XHR3aGlsZSAoIG1heEl0ZXJhdGlvbnMtLSApIHtcblxuXHRcdFx0Ly8gRXZhbHVhdGUgYW5kIHVwZGF0ZSBvdXIgYmVzdCBndWVzcyAoZG91YmxpbmcgZ3Vlc3NlcyB0aGF0IHplcm8gb3V0KS5cblx0XHRcdC8vIEZpbmlzaCBpZiB0aGUgc2NhbGUgZXF1YWxzIG9yIGNyb3NzZXMgMSAobWFraW5nIHRoZSBvbGQqbmV3IHByb2R1Y3Qgbm9uLXBvc2l0aXZlKS5cblx0XHRcdGpRdWVyeS5zdHlsZSggZWxlbSwgcHJvcCwgaW5pdGlhbEluVW5pdCArIHVuaXQgKTtcblx0XHRcdGlmICggKCAxIC0gc2NhbGUgKSAqICggMSAtICggc2NhbGUgPSBjdXJyZW50VmFsdWUoKSAvIGluaXRpYWwgfHwgMC41ICkgKSA8PSAwICkge1xuXHRcdFx0XHRtYXhJdGVyYXRpb25zID0gMDtcblx0XHRcdH1cblx0XHRcdGluaXRpYWxJblVuaXQgPSBpbml0aWFsSW5Vbml0IC8gc2NhbGU7XG5cblx0XHR9XG5cblx0XHRpbml0aWFsSW5Vbml0ID0gaW5pdGlhbEluVW5pdCAqIDI7XG5cdFx0alF1ZXJ5LnN0eWxlKCBlbGVtLCBwcm9wLCBpbml0aWFsSW5Vbml0ICsgdW5pdCApO1xuXG5cdFx0Ly8gTWFrZSBzdXJlIHdlIHVwZGF0ZSB0aGUgdHdlZW4gcHJvcGVydGllcyBsYXRlciBvblxuXHRcdHZhbHVlUGFydHMgPSB2YWx1ZVBhcnRzIHx8IFtdO1xuXHR9XG5cblx0aWYgKCB2YWx1ZVBhcnRzICkge1xuXHRcdGluaXRpYWxJblVuaXQgPSAraW5pdGlhbEluVW5pdCB8fCAraW5pdGlhbCB8fCAwO1xuXG5cdFx0Ly8gQXBwbHkgcmVsYXRpdmUgb2Zmc2V0ICgrPS8tPSkgaWYgc3BlY2lmaWVkXG5cdFx0YWRqdXN0ZWQgPSB2YWx1ZVBhcnRzWyAxIF0gP1xuXHRcdFx0aW5pdGlhbEluVW5pdCArICggdmFsdWVQYXJ0c1sgMSBdICsgMSApICogdmFsdWVQYXJ0c1sgMiBdIDpcblx0XHRcdCt2YWx1ZVBhcnRzWyAyIF07XG5cdFx0aWYgKCB0d2VlbiApIHtcblx0XHRcdHR3ZWVuLnVuaXQgPSB1bml0O1xuXHRcdFx0dHdlZW4uc3RhcnQgPSBpbml0aWFsSW5Vbml0O1xuXHRcdFx0dHdlZW4uZW5kID0gYWRqdXN0ZWQ7XG5cdFx0fVxuXHR9XG5cdHJldHVybiBhZGp1c3RlZDtcbn1cblxuXG52YXIgZGVmYXVsdERpc3BsYXlNYXAgPSB7fTtcblxuZnVuY3Rpb24gZ2V0RGVmYXVsdERpc3BsYXkoIGVsZW0gKSB7XG5cdHZhciB0ZW1wLFxuXHRcdGRvYyA9IGVsZW0ub3duZXJEb2N1bWVudCxcblx0XHRub2RlTmFtZSA9IGVsZW0ubm9kZU5hbWUsXG5cdFx0ZGlzcGxheSA9IGRlZmF1bHREaXNwbGF5TWFwWyBub2RlTmFtZSBdO1xuXG5cdGlmICggZGlzcGxheSApIHtcblx0XHRyZXR1cm4gZGlzcGxheTtcblx0fVxuXG5cdHRlbXAgPSBkb2MuYm9keS5hcHBlbmRDaGlsZCggZG9jLmNyZWF0ZUVsZW1lbnQoIG5vZGVOYW1lICkgKTtcblx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIHRlbXAsIFwiZGlzcGxheVwiICk7XG5cblx0dGVtcC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCB0ZW1wICk7XG5cblx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRkaXNwbGF5ID0gXCJibG9ja1wiO1xuXHR9XG5cdGRlZmF1bHREaXNwbGF5TWFwWyBub2RlTmFtZSBdID0gZGlzcGxheTtcblxuXHRyZXR1cm4gZGlzcGxheTtcbn1cblxuZnVuY3Rpb24gc2hvd0hpZGUoIGVsZW1lbnRzLCBzaG93ICkge1xuXHR2YXIgZGlzcGxheSwgZWxlbSxcblx0XHR2YWx1ZXMgPSBbXSxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gZWxlbWVudHMubGVuZ3RoO1xuXG5cdC8vIERldGVybWluZSBuZXcgZGlzcGxheSB2YWx1ZSBmb3IgZWxlbWVudHMgdGhhdCBuZWVkIHRvIGNoYW5nZVxuXHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGVsZW0gPSBlbGVtZW50c1sgaW5kZXggXTtcblx0XHRpZiAoICFlbGVtLnN0eWxlICkge1xuXHRcdFx0Y29udGludWU7XG5cdFx0fVxuXG5cdFx0ZGlzcGxheSA9IGVsZW0uc3R5bGUuZGlzcGxheTtcblx0XHRpZiAoIHNob3cgKSB7XG5cblx0XHRcdC8vIFNpbmNlIHdlIGZvcmNlIHZpc2liaWxpdHkgdXBvbiBjYXNjYWRlLWhpZGRlbiBlbGVtZW50cywgYW4gaW1tZWRpYXRlIChhbmQgc2xvdylcblx0XHRcdC8vIGNoZWNrIGlzIHJlcXVpcmVkIGluIHRoaXMgZmlyc3QgbG9vcCB1bmxlc3Mgd2UgaGF2ZSBhIG5vbmVtcHR5IGRpc3BsYXkgdmFsdWUgKGVpdGhlclxuXHRcdFx0Ly8gaW5saW5lIG9yIGFib3V0LXRvLWJlLXJlc3RvcmVkKVxuXHRcdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gZGF0YVByaXYuZ2V0KCBlbGVtLCBcImRpc3BsYXlcIiApIHx8IG51bGw7XG5cdFx0XHRcdGlmICggIXZhbHVlc1sgaW5kZXggXSApIHtcblx0XHRcdFx0XHRlbGVtLnN0eWxlLmRpc3BsYXkgPSBcIlwiO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0XHRpZiAoIGVsZW0uc3R5bGUuZGlzcGxheSA9PT0gXCJcIiAmJiBpc0hpZGRlbldpdGhpblRyZWUoIGVsZW0gKSApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gZ2V0RGVmYXVsdERpc3BsYXkoIGVsZW0gKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0aWYgKCBkaXNwbGF5ICE9PSBcIm5vbmVcIiApIHtcblx0XHRcdFx0dmFsdWVzWyBpbmRleCBdID0gXCJub25lXCI7XG5cblx0XHRcdFx0Ly8gUmVtZW1iZXIgd2hhdCB3ZSdyZSBvdmVyd3JpdGluZ1xuXHRcdFx0XHRkYXRhUHJpdi5zZXQoIGVsZW0sIFwiZGlzcGxheVwiLCBkaXNwbGF5ICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gU2V0IHRoZSBkaXNwbGF5IG9mIHRoZSBlbGVtZW50cyBpbiBhIHNlY29uZCBsb29wIHRvIGF2b2lkIGNvbnN0YW50IHJlZmxvd1xuXHRmb3IgKCBpbmRleCA9IDA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdGlmICggdmFsdWVzWyBpbmRleCBdICE9IG51bGwgKSB7XG5cdFx0XHRlbGVtZW50c1sgaW5kZXggXS5zdHlsZS5kaXNwbGF5ID0gdmFsdWVzWyBpbmRleCBdO1xuXHRcdH1cblx0fVxuXG5cdHJldHVybiBlbGVtZW50cztcbn1cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRzaG93OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gc2hvd0hpZGUoIHRoaXMsIHRydWUgKTtcblx0fSxcblx0aGlkZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHNob3dIaWRlKCB0aGlzICk7XG5cdH0sXG5cdHRvZ2dsZTogZnVuY3Rpb24oIHN0YXRlICkge1xuXHRcdGlmICggdHlwZW9mIHN0YXRlID09PSBcImJvb2xlYW5cIiApIHtcblx0XHRcdHJldHVybiBzdGF0ZSA/IHRoaXMuc2hvdygpIDogdGhpcy5oaWRlKCk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGlzSGlkZGVuV2l0aGluVHJlZSggdGhpcyApICkge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5zaG93KCk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRqUXVlcnkoIHRoaXMgKS5oaWRlKCk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9XG59ICk7XG52YXIgcmNoZWNrYWJsZVR5cGUgPSAoIC9eKD86Y2hlY2tib3h8cmFkaW8pJC9pICk7XG5cbnZhciBydGFnTmFtZSA9ICggLzwoW2Etel1bXlxcL1xcMD5cXHgyMFxcdFxcclxcblxcZl0qKS9pICk7XG5cbnZhciByc2NyaXB0VHlwZSA9ICggL14kfF5tb2R1bGUkfFxcLyg/OmphdmF8ZWNtYSlzY3JpcHQvaSApO1xuXG5cblxuLy8gV2UgaGF2ZSB0byBjbG9zZSB0aGVzZSB0YWdzIHRvIHN1cHBvcnQgWEhUTUwgKCMxMzIwMClcbnZhciB3cmFwTWFwID0ge1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG5cdG9wdGlvbjogWyAxLCBcIjxzZWxlY3QgbXVsdGlwbGU9J211bHRpcGxlJz5cIiwgXCI8L3NlbGVjdD5cIiBdLFxuXG5cdC8vIFhIVE1MIHBhcnNlcnMgZG8gbm90IG1hZ2ljYWxseSBpbnNlcnQgZWxlbWVudHMgaW4gdGhlXG5cdC8vIHNhbWUgd2F5IHRoYXQgdGFnIHNvdXAgcGFyc2VycyBkby4gU28gd2UgY2Fubm90IHNob3J0ZW5cblx0Ly8gdGhpcyBieSBvbWl0dGluZyA8dGJvZHk+IG9yIG90aGVyIHJlcXVpcmVkIGVsZW1lbnRzLlxuXHR0aGVhZDogWyAxLCBcIjx0YWJsZT5cIiwgXCI8L3RhYmxlPlwiIF0sXG5cdGNvbDogWyAyLCBcIjx0YWJsZT48Y29sZ3JvdXA+XCIsIFwiPC9jb2xncm91cD48L3RhYmxlPlwiIF0sXG5cdHRyOiBbIDIsIFwiPHRhYmxlPjx0Ym9keT5cIiwgXCI8L3Rib2R5PjwvdGFibGU+XCIgXSxcblx0dGQ6IFsgMywgXCI8dGFibGU+PHRib2R5Pjx0cj5cIiwgXCI8L3RyPjwvdGJvZHk+PC90YWJsZT5cIiBdLFxuXG5cdF9kZWZhdWx0OiBbIDAsIFwiXCIsIFwiXCIgXVxufTtcblxuLy8gU3VwcG9ydDogSUUgPD05IG9ubHlcbndyYXBNYXAub3B0Z3JvdXAgPSB3cmFwTWFwLm9wdGlvbjtcblxud3JhcE1hcC50Ym9keSA9IHdyYXBNYXAudGZvb3QgPSB3cmFwTWFwLmNvbGdyb3VwID0gd3JhcE1hcC5jYXB0aW9uID0gd3JhcE1hcC50aGVhZDtcbndyYXBNYXAudGggPSB3cmFwTWFwLnRkO1xuXG5cbmZ1bmN0aW9uIGdldEFsbCggY29udGV4dCwgdGFnICkge1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0Ly8gVXNlIHR5cGVvZiB0byBhdm9pZCB6ZXJvLWFyZ3VtZW50IG1ldGhvZCBpbnZvY2F0aW9uIG9uIGhvc3Qgb2JqZWN0cyAoIzE1MTUxKVxuXHR2YXIgcmV0O1xuXG5cdGlmICggdHlwZW9mIGNvbnRleHQuZ2V0RWxlbWVudHNCeVRhZ05hbWUgIT09IFwidW5kZWZpbmVkXCIgKSB7XG5cdFx0cmV0ID0gY29udGV4dC5nZXRFbGVtZW50c0J5VGFnTmFtZSggdGFnIHx8IFwiKlwiICk7XG5cblx0fSBlbHNlIGlmICggdHlwZW9mIGNvbnRleHQucXVlcnlTZWxlY3RvckFsbCAhPT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRyZXQgPSBjb250ZXh0LnF1ZXJ5U2VsZWN0b3JBbGwoIHRhZyB8fCBcIipcIiApO1xuXG5cdH0gZWxzZSB7XG5cdFx0cmV0ID0gW107XG5cdH1cblxuXHRpZiAoIHRhZyA9PT0gdW5kZWZpbmVkIHx8IHRhZyAmJiBub2RlTmFtZSggY29udGV4dCwgdGFnICkgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5tZXJnZSggWyBjb250ZXh0IF0sIHJldCApO1xuXHR9XG5cblx0cmV0dXJuIHJldDtcbn1cblxuXG4vLyBNYXJrIHNjcmlwdHMgYXMgaGF2aW5nIGFscmVhZHkgYmVlbiBldmFsdWF0ZWRcbmZ1bmN0aW9uIHNldEdsb2JhbEV2YWwoIGVsZW1zLCByZWZFbGVtZW50cyApIHtcblx0dmFyIGkgPSAwLFxuXHRcdGwgPSBlbGVtcy5sZW5ndGg7XG5cblx0Zm9yICggOyBpIDwgbDsgaSsrICkge1xuXHRcdGRhdGFQcml2LnNldChcblx0XHRcdGVsZW1zWyBpIF0sXG5cdFx0XHRcImdsb2JhbEV2YWxcIixcblx0XHRcdCFyZWZFbGVtZW50cyB8fCBkYXRhUHJpdi5nZXQoIHJlZkVsZW1lbnRzWyBpIF0sIFwiZ2xvYmFsRXZhbFwiIClcblx0XHQpO1xuXHR9XG59XG5cblxudmFyIHJodG1sID0gLzx8JiM/XFx3KzsvO1xuXG5mdW5jdGlvbiBidWlsZEZyYWdtZW50KCBlbGVtcywgY29udGV4dCwgc2NyaXB0cywgc2VsZWN0aW9uLCBpZ25vcmVkICkge1xuXHR2YXIgZWxlbSwgdG1wLCB0YWcsIHdyYXAsIGF0dGFjaGVkLCBqLFxuXHRcdGZyYWdtZW50ID0gY29udGV4dC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG5cdFx0bm9kZXMgPSBbXSxcblx0XHRpID0gMCxcblx0XHRsID0gZWxlbXMubGVuZ3RoO1xuXG5cdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRlbGVtID0gZWxlbXNbIGkgXTtcblxuXHRcdGlmICggZWxlbSB8fCBlbGVtID09PSAwICkge1xuXG5cdFx0XHQvLyBBZGQgbm9kZXMgZGlyZWN0bHlcblx0XHRcdGlmICggdG9UeXBlKCBlbGVtICkgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHRcdC8vIHB1c2guYXBwbHkoXywgYXJyYXlsaWtlKSB0aHJvd3Mgb24gYW5jaWVudCBXZWJLaXRcblx0XHRcdFx0alF1ZXJ5Lm1lcmdlKCBub2RlcywgZWxlbS5ub2RlVHlwZSA/IFsgZWxlbSBdIDogZWxlbSApO1xuXG5cdFx0XHQvLyBDb252ZXJ0IG5vbi1odG1sIGludG8gYSB0ZXh0IG5vZGVcblx0XHRcdH0gZWxzZSBpZiAoICFyaHRtbC50ZXN0KCBlbGVtICkgKSB7XG5cdFx0XHRcdG5vZGVzLnB1c2goIGNvbnRleHQuY3JlYXRlVGV4dE5vZGUoIGVsZW0gKSApO1xuXG5cdFx0XHQvLyBDb252ZXJ0IGh0bWwgaW50byBET00gbm9kZXNcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHRtcCA9IHRtcCB8fCBmcmFnbWVudC5hcHBlbmRDaGlsZCggY29udGV4dC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkgKTtcblxuXHRcdFx0XHQvLyBEZXNlcmlhbGl6ZSBhIHN0YW5kYXJkIHJlcHJlc2VudGF0aW9uXG5cdFx0XHRcdHRhZyA9ICggcnRhZ05hbWUuZXhlYyggZWxlbSApIHx8IFsgXCJcIiwgXCJcIiBdIClbIDEgXS50b0xvd2VyQ2FzZSgpO1xuXHRcdFx0XHR3cmFwID0gd3JhcE1hcFsgdGFnIF0gfHwgd3JhcE1hcC5fZGVmYXVsdDtcblx0XHRcdFx0dG1wLmlubmVySFRNTCA9IHdyYXBbIDEgXSArIGpRdWVyeS5odG1sUHJlZmlsdGVyKCBlbGVtICkgKyB3cmFwWyAyIF07XG5cblx0XHRcdFx0Ly8gRGVzY2VuZCB0aHJvdWdoIHdyYXBwZXJzIHRvIHRoZSByaWdodCBjb250ZW50XG5cdFx0XHRcdGogPSB3cmFwWyAwIF07XG5cdFx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRcdHRtcCA9IHRtcC5sYXN0Q2hpbGQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4wIG9ubHksIFBoYW50b21KUyAxIG9ubHlcblx0XHRcdFx0Ly8gcHVzaC5hcHBseShfLCBhcnJheWxpa2UpIHRocm93cyBvbiBhbmNpZW50IFdlYktpdFxuXHRcdFx0XHRqUXVlcnkubWVyZ2UoIG5vZGVzLCB0bXAuY2hpbGROb2RlcyApO1xuXG5cdFx0XHRcdC8vIFJlbWVtYmVyIHRoZSB0b3AtbGV2ZWwgY29udGFpbmVyXG5cdFx0XHRcdHRtcCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cblx0XHRcdFx0Ly8gRW5zdXJlIHRoZSBjcmVhdGVkIG5vZGVzIGFyZSBvcnBoYW5lZCAoIzEyMzkyKVxuXHRcdFx0XHR0bXAudGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdC8vIFJlbW92ZSB3cmFwcGVyIGZyb20gZnJhZ21lbnRcblx0ZnJhZ21lbnQudGV4dENvbnRlbnQgPSBcIlwiO1xuXG5cdGkgPSAwO1xuXHR3aGlsZSAoICggZWxlbSA9IG5vZGVzWyBpKysgXSApICkge1xuXG5cdFx0Ly8gU2tpcCBlbGVtZW50cyBhbHJlYWR5IGluIHRoZSBjb250ZXh0IGNvbGxlY3Rpb24gKHRyYWMtNDA4Nylcblx0XHRpZiAoIHNlbGVjdGlvbiAmJiBqUXVlcnkuaW5BcnJheSggZWxlbSwgc2VsZWN0aW9uICkgPiAtMSApIHtcblx0XHRcdGlmICggaWdub3JlZCApIHtcblx0XHRcdFx0aWdub3JlZC5wdXNoKCBlbGVtICk7XG5cdFx0XHR9XG5cdFx0XHRjb250aW51ZTtcblx0XHR9XG5cblx0XHRhdHRhY2hlZCA9IGlzQXR0YWNoZWQoIGVsZW0gKTtcblxuXHRcdC8vIEFwcGVuZCB0byBmcmFnbWVudFxuXHRcdHRtcCA9IGdldEFsbCggZnJhZ21lbnQuYXBwZW5kQ2hpbGQoIGVsZW0gKSwgXCJzY3JpcHRcIiApO1xuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGlmICggYXR0YWNoZWQgKSB7XG5cdFx0XHRzZXRHbG9iYWxFdmFsKCB0bXAgKTtcblx0XHR9XG5cblx0XHQvLyBDYXB0dXJlIGV4ZWN1dGFibGVzXG5cdFx0aWYgKCBzY3JpcHRzICkge1xuXHRcdFx0aiA9IDA7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRtcFsgaisrIF0gKSApIHtcblx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBlbGVtLnR5cGUgfHwgXCJcIiApICkge1xuXHRcdFx0XHRcdHNjcmlwdHMucHVzaCggZWxlbSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGZyYWdtZW50O1xufVxuXG5cbiggZnVuY3Rpb24oKSB7XG5cdHZhciBmcmFnbWVudCA9IGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSxcblx0XHRkaXYgPSBmcmFnbWVudC5hcHBlbmRDaGlsZCggZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJkaXZcIiApICksXG5cdFx0aW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDQuMCAtIDQuMyBvbmx5XG5cdC8vIENoZWNrIHN0YXRlIGxvc3QgaWYgdGhlIG5hbWUgaXMgc2V0ICgjMTEyMTcpXG5cdC8vIFN1cHBvcnQ6IFdpbmRvd3MgV2ViIEFwcHMgKFdXQSlcblx0Ly8gYG5hbWVgIGFuZCBgdHlwZWAgbXVzdCB1c2UgLnNldEF0dHJpYnV0ZSBmb3IgV1dBICgjMTQ5MDEpXG5cdGlucHV0LnNldEF0dHJpYnV0ZSggXCJ0eXBlXCIsIFwicmFkaW9cIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwiY2hlY2tlZFwiLCBcImNoZWNrZWRcIiApO1xuXHRpbnB1dC5zZXRBdHRyaWJ1dGUoIFwibmFtZVwiLCBcInRcIiApO1xuXG5cdGRpdi5hcHBlbmRDaGlsZCggaW5wdXQgKTtcblxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIG9ubHlcblx0Ly8gT2xkZXIgV2ViS2l0IGRvZXNuJ3QgY2xvbmUgY2hlY2tlZCBzdGF0ZSBjb3JyZWN0bHkgaW4gZnJhZ21lbnRzXG5cdHN1cHBvcnQuY2hlY2tDbG9uZSA9IGRpdi5jbG9uZU5vZGUoIHRydWUgKS5jbG9uZU5vZGUoIHRydWUgKS5sYXN0Q2hpbGQuY2hlY2tlZDtcblxuXHQvLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcblx0Ly8gTWFrZSBzdXJlIHRleHRhcmVhIChhbmQgY2hlY2tib3gpIGRlZmF1bHRWYWx1ZSBpcyBwcm9wZXJseSBjbG9uZWRcblx0ZGl2LmlubmVySFRNTCA9IFwiPHRleHRhcmVhPng8L3RleHRhcmVhPlwiO1xuXHRzdXBwb3J0Lm5vQ2xvbmVDaGVja2VkID0gISFkaXYuY2xvbmVOb2RlKCB0cnVlICkubGFzdENoaWxkLmRlZmF1bHRWYWx1ZTtcbn0gKSgpO1xuXG5cbnZhclxuXHRya2V5RXZlbnQgPSAvXmtleS8sXG5cdHJtb3VzZUV2ZW50ID0gL14oPzptb3VzZXxwb2ludGVyfGNvbnRleHRtZW51fGRyYWd8ZHJvcCl8Y2xpY2svLFxuXHRydHlwZW5hbWVzcGFjZSA9IC9eKFteLl0qKSg/OlxcLiguKyl8KS87XG5cbmZ1bmN0aW9uIHJldHVyblRydWUoKSB7XG5cdHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZXR1cm5GYWxzZSgpIHtcblx0cmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTdXBwb3J0OiBJRSA8PTkgLSAxMStcbi8vIGZvY3VzKCkgYW5kIGJsdXIoKSBhcmUgYXN5bmNocm9ub3VzLCBleGNlcHQgd2hlbiB0aGV5IGFyZSBuby1vcC5cbi8vIFNvIGV4cGVjdCBmb2N1cyB0byBiZSBzeW5jaHJvbm91cyB3aGVuIHRoZSBlbGVtZW50IGlzIGFscmVhZHkgYWN0aXZlLFxuLy8gYW5kIGJsdXIgdG8gYmUgc3luY2hyb25vdXMgd2hlbiB0aGUgZWxlbWVudCBpcyBub3QgYWxyZWFkeSBhY3RpdmUuXG4vLyAoZm9jdXMgYW5kIGJsdXIgYXJlIGFsd2F5cyBzeW5jaHJvbm91cyBpbiBvdGhlciBzdXBwb3J0ZWQgYnJvd3NlcnMsXG4vLyB0aGlzIGp1c3QgZGVmaW5lcyB3aGVuIHdlIGNhbiBjb3VudCBvbiBpdCkuXG5mdW5jdGlvbiBleHBlY3RTeW5jKCBlbGVtLCB0eXBlICkge1xuXHRyZXR1cm4gKCBlbGVtID09PSBzYWZlQWN0aXZlRWxlbWVudCgpICkgPT09ICggdHlwZSA9PT0gXCJmb2N1c1wiICk7XG59XG5cbi8vIFN1cHBvcnQ6IElFIDw9OSBvbmx5XG4vLyBBY2Nlc3NpbmcgZG9jdW1lbnQuYWN0aXZlRWxlbWVudCBjYW4gdGhyb3cgdW5leHBlY3RlZGx5XG4vLyBodHRwczovL2J1Z3MuanF1ZXJ5LmNvbS90aWNrZXQvMTMzOTNcbmZ1bmN0aW9uIHNhZmVBY3RpdmVFbGVtZW50KCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBkb2N1bWVudC5hY3RpdmVFbGVtZW50O1xuXHR9IGNhdGNoICggZXJyICkgeyB9XG59XG5cbmZ1bmN0aW9uIG9uKCBlbGVtLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCBvbmUgKSB7XG5cdHZhciBvcmlnRm4sIHR5cGU7XG5cblx0Ly8gVHlwZXMgY2FuIGJlIGEgbWFwIG9mIHR5cGVzL2hhbmRsZXJzXG5cdGlmICggdHlwZW9mIHR5cGVzID09PSBcIm9iamVjdFwiICkge1xuXG5cdFx0Ly8gKCB0eXBlcy1PYmplY3QsIHNlbGVjdG9yLCBkYXRhIClcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciAhPT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcy1PYmplY3QsIGRhdGEgKVxuXHRcdFx0ZGF0YSA9IGRhdGEgfHwgc2VsZWN0b3I7XG5cdFx0XHRzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0Zm9yICggdHlwZSBpbiB0eXBlcyApIHtcblx0XHRcdG9uKCBlbGVtLCB0eXBlLCBzZWxlY3RvciwgZGF0YSwgdHlwZXNbIHR5cGUgXSwgb25lICk7XG5cdFx0fVxuXHRcdHJldHVybiBlbGVtO1xuXHR9XG5cblx0aWYgKCBkYXRhID09IG51bGwgJiYgZm4gPT0gbnVsbCApIHtcblxuXHRcdC8vICggdHlwZXMsIGZuIClcblx0XHRmbiA9IHNlbGVjdG9yO1xuXHRcdGRhdGEgPSBzZWxlY3RvciA9IHVuZGVmaW5lZDtcblx0fSBlbHNlIGlmICggZm4gPT0gbnVsbCApIHtcblx0XHRpZiAoIHR5cGVvZiBzZWxlY3RvciA9PT0gXCJzdHJpbmdcIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgc2VsZWN0b3IsIGZuIClcblx0XHRcdGZuID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gKCB0eXBlcywgZGF0YSwgZm4gKVxuXHRcdFx0Zm4gPSBkYXRhO1xuXHRcdFx0ZGF0YSA9IHNlbGVjdG9yO1xuXHRcdFx0c2VsZWN0b3IgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXHR9XG5cdGlmICggZm4gPT09IGZhbHNlICkge1xuXHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdH0gZWxzZSBpZiAoICFmbiApIHtcblx0XHRyZXR1cm4gZWxlbTtcblx0fVxuXG5cdGlmICggb25lID09PSAxICkge1xuXHRcdG9yaWdGbiA9IGZuO1xuXHRcdGZuID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuXG5cdFx0XHQvLyBDYW4gdXNlIGFuIGVtcHR5IHNldCwgc2luY2UgZXZlbnQgY29udGFpbnMgdGhlIGluZm9cblx0XHRcdGpRdWVyeSgpLm9mZiggZXZlbnQgKTtcblx0XHRcdHJldHVybiBvcmlnRm4uYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdH07XG5cblx0XHQvLyBVc2Ugc2FtZSBndWlkIHNvIGNhbGxlciBjYW4gcmVtb3ZlIHVzaW5nIG9yaWdGblxuXHRcdGZuLmd1aWQgPSBvcmlnRm4uZ3VpZCB8fCAoIG9yaWdGbi5ndWlkID0galF1ZXJ5Lmd1aWQrKyApO1xuXHR9XG5cdHJldHVybiBlbGVtLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdGpRdWVyeS5ldmVudC5hZGQoIHRoaXMsIHR5cGVzLCBmbiwgZGF0YSwgc2VsZWN0b3IgKTtcblx0fSApO1xufVxuXG4vKlxuICogSGVscGVyIGZ1bmN0aW9ucyBmb3IgbWFuYWdpbmcgZXZlbnRzIC0tIG5vdCBwYXJ0IG9mIHRoZSBwdWJsaWMgaW50ZXJmYWNlLlxuICogUHJvcHMgdG8gRGVhbiBFZHdhcmRzJyBhZGRFdmVudCBsaWJyYXJ5IGZvciBtYW55IG9mIHRoZSBpZGVhcy5cbiAqL1xualF1ZXJ5LmV2ZW50ID0ge1xuXG5cdGdsb2JhbDoge30sXG5cblx0YWRkOiBmdW5jdGlvbiggZWxlbSwgdHlwZXMsIGhhbmRsZXIsIGRhdGEsIHNlbGVjdG9yICkge1xuXG5cdFx0dmFyIGhhbmRsZU9iakluLCBldmVudEhhbmRsZSwgdG1wLFxuXHRcdFx0ZXZlbnRzLCB0LCBoYW5kbGVPYmosXG5cdFx0XHRzcGVjaWFsLCBoYW5kbGVycywgdHlwZSwgbmFtZXNwYWNlcywgb3JpZ1R5cGUsXG5cdFx0XHRlbGVtRGF0YSA9IGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0Ly8gRG9uJ3QgYXR0YWNoIGV2ZW50cyB0byBub0RhdGEgb3IgdGV4dC9jb21tZW50IG5vZGVzIChidXQgYWxsb3cgcGxhaW4gb2JqZWN0cylcblx0XHRpZiAoICFlbGVtRGF0YSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBDYWxsZXIgY2FuIHBhc3MgaW4gYW4gb2JqZWN0IG9mIGN1c3RvbSBkYXRhIGluIGxpZXUgb2YgdGhlIGhhbmRsZXJcblx0XHRpZiAoIGhhbmRsZXIuaGFuZGxlciApIHtcblx0XHRcdGhhbmRsZU9iakluID0gaGFuZGxlcjtcblx0XHRcdGhhbmRsZXIgPSBoYW5kbGVPYmpJbi5oYW5kbGVyO1xuXHRcdFx0c2VsZWN0b3IgPSBoYW5kbGVPYmpJbi5zZWxlY3Rvcjtcblx0XHR9XG5cblx0XHQvLyBFbnN1cmUgdGhhdCBpbnZhbGlkIHNlbGVjdG9ycyB0aHJvdyBleGNlcHRpb25zIGF0IGF0dGFjaCB0aW1lXG5cdFx0Ly8gRXZhbHVhdGUgYWdhaW5zdCBkb2N1bWVudEVsZW1lbnQgaW4gY2FzZSBlbGVtIGlzIGEgbm9uLWVsZW1lbnQgbm9kZSAoZS5nLiwgZG9jdW1lbnQpXG5cdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdGpRdWVyeS5maW5kLm1hdGNoZXNTZWxlY3RvciggZG9jdW1lbnRFbGVtZW50LCBzZWxlY3RvciApO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHRoZSBoYW5kbGVyIGhhcyBhIHVuaXF1ZSBJRCwgdXNlZCB0byBmaW5kL3JlbW92ZSBpdCBsYXRlclxuXHRcdGlmICggIWhhbmRsZXIuZ3VpZCApIHtcblx0XHRcdGhhbmRsZXIuZ3VpZCA9IGpRdWVyeS5ndWlkKys7XG5cdFx0fVxuXG5cdFx0Ly8gSW5pdCB0aGUgZWxlbWVudCdzIGV2ZW50IHN0cnVjdHVyZSBhbmQgbWFpbiBoYW5kbGVyLCBpZiB0aGlzIGlzIHRoZSBmaXJzdFxuXHRcdGlmICggISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRldmVudHMgPSBlbGVtRGF0YS5ldmVudHMgPSB7fTtcblx0XHR9XG5cdFx0aWYgKCAhKCBldmVudEhhbmRsZSA9IGVsZW1EYXRhLmhhbmRsZSApICkge1xuXHRcdFx0ZXZlbnRIYW5kbGUgPSBlbGVtRGF0YS5oYW5kbGUgPSBmdW5jdGlvbiggZSApIHtcblxuXHRcdFx0XHQvLyBEaXNjYXJkIHRoZSBzZWNvbmQgZXZlbnQgb2YgYSBqUXVlcnkuZXZlbnQudHJpZ2dlcigpIGFuZFxuXHRcdFx0XHQvLyB3aGVuIGFuIGV2ZW50IGlzIGNhbGxlZCBhZnRlciBhIHBhZ2UgaGFzIHVubG9hZGVkXG5cdFx0XHRcdHJldHVybiB0eXBlb2YgalF1ZXJ5ICE9PSBcInVuZGVmaW5lZFwiICYmIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgIT09IGUudHlwZSA/XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LmRpc3BhdGNoLmFwcGx5KCBlbGVtLCBhcmd1bWVudHMgKSA6IHVuZGVmaW5lZDtcblx0XHRcdH07XG5cdFx0fVxuXG5cdFx0Ly8gSGFuZGxlIG11bHRpcGxlIGV2ZW50cyBzZXBhcmF0ZWQgYnkgYSBzcGFjZVxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBUaGVyZSAqbXVzdCogYmUgYSB0eXBlLCBubyBhdHRhY2hpbmcgbmFtZXNwYWNlLW9ubHkgaGFuZGxlcnNcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBldmVudCBjaGFuZ2VzIGl0cyB0eXBlLCB1c2UgdGhlIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMgZm9yIHRoZSBjaGFuZ2VkIHR5cGVcblx0XHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXG5cdFx0XHQvLyBJZiBzZWxlY3RvciBkZWZpbmVkLCBkZXRlcm1pbmUgc3BlY2lhbCBldmVudCBhcGkgdHlwZSwgb3RoZXJ3aXNlIGdpdmVuIHR5cGVcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblxuXHRcdFx0Ly8gVXBkYXRlIHNwZWNpYWwgYmFzZWQgb24gbmV3bHkgcmVzZXQgdHlwZVxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge307XG5cblx0XHRcdC8vIGhhbmRsZU9iaiBpcyBwYXNzZWQgdG8gYWxsIGV2ZW50IGhhbmRsZXJzXG5cdFx0XHRoYW5kbGVPYmogPSBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdG9yaWdUeXBlOiBvcmlnVHlwZSxcblx0XHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdFx0aGFuZGxlcjogaGFuZGxlcixcblx0XHRcdFx0Z3VpZDogaGFuZGxlci5ndWlkLFxuXHRcdFx0XHRzZWxlY3Rvcjogc2VsZWN0b3IsXG5cdFx0XHRcdG5lZWRzQ29udGV4dDogc2VsZWN0b3IgJiYgalF1ZXJ5LmV4cHIubWF0Y2gubmVlZHNDb250ZXh0LnRlc3QoIHNlbGVjdG9yICksXG5cdFx0XHRcdG5hbWVzcGFjZTogbmFtZXNwYWNlcy5qb2luKCBcIi5cIiApXG5cdFx0XHR9LCBoYW5kbGVPYmpJbiApO1xuXG5cdFx0XHQvLyBJbml0IHRoZSBldmVudCBoYW5kbGVyIHF1ZXVlIGlmIHdlJ3JlIHRoZSBmaXJzdFxuXHRcdFx0aWYgKCAhKCBoYW5kbGVycyA9IGV2ZW50c1sgdHlwZSBdICkgKSB7XG5cdFx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gPSBbXTtcblx0XHRcdFx0aGFuZGxlcnMuZGVsZWdhdGVDb3VudCA9IDA7XG5cblx0XHRcdFx0Ly8gT25seSB1c2UgYWRkRXZlbnRMaXN0ZW5lciBpZiB0aGUgc3BlY2lhbCBldmVudHMgaGFuZGxlciByZXR1cm5zIGZhbHNlXG5cdFx0XHRcdGlmICggIXNwZWNpYWwuc2V0dXAgfHxcblx0XHRcdFx0XHRzcGVjaWFsLnNldHVwLmNhbGwoIGVsZW0sIGRhdGEsIG5hbWVzcGFjZXMsIGV2ZW50SGFuZGxlICkgPT09IGZhbHNlICkge1xuXG5cdFx0XHRcdFx0aWYgKCBlbGVtLmFkZEV2ZW50TGlzdGVuZXIgKSB7XG5cdFx0XHRcdFx0XHRlbGVtLmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIGV2ZW50SGFuZGxlICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGlmICggc3BlY2lhbC5hZGQgKSB7XG5cdFx0XHRcdHNwZWNpYWwuYWRkLmNhbGwoIGVsZW0sIGhhbmRsZU9iaiApO1xuXG5cdFx0XHRcdGlmICggIWhhbmRsZU9iai5oYW5kbGVyLmd1aWQgKSB7XG5cdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIuZ3VpZCA9IGhhbmRsZXIuZ3VpZDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgdG8gdGhlIGVsZW1lbnQncyBoYW5kbGVyIGxpc3QsIGRlbGVnYXRlcyBpbiBmcm9udFxuXHRcdFx0aWYgKCBzZWxlY3RvciApIHtcblx0XHRcdFx0aGFuZGxlcnMuc3BsaWNlKCBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50KyssIDAsIGhhbmRsZU9iaiApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0aGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIEtlZXAgdHJhY2sgb2Ygd2hpY2ggZXZlbnRzIGhhdmUgZXZlciBiZWVuIHVzZWQsIGZvciBldmVudCBvcHRpbWl6YXRpb25cblx0XHRcdGpRdWVyeS5ldmVudC5nbG9iYWxbIHR5cGUgXSA9IHRydWU7XG5cdFx0fVxuXG5cdH0sXG5cblx0Ly8gRGV0YWNoIGFuIGV2ZW50IG9yIHNldCBvZiBldmVudHMgZnJvbSBhbiBlbGVtZW50XG5cdHJlbW92ZTogZnVuY3Rpb24oIGVsZW0sIHR5cGVzLCBoYW5kbGVyLCBzZWxlY3RvciwgbWFwcGVkVHlwZXMgKSB7XG5cblx0XHR2YXIgaiwgb3JpZ0NvdW50LCB0bXAsXG5cdFx0XHRldmVudHMsIHQsIGhhbmRsZU9iaixcblx0XHRcdHNwZWNpYWwsIGhhbmRsZXJzLCB0eXBlLCBuYW1lc3BhY2VzLCBvcmlnVHlwZSxcblx0XHRcdGVsZW1EYXRhID0gZGF0YVByaXYuaGFzRGF0YSggZWxlbSApICYmIGRhdGFQcml2LmdldCggZWxlbSApO1xuXG5cdFx0aWYgKCAhZWxlbURhdGEgfHwgISggZXZlbnRzID0gZWxlbURhdGEuZXZlbnRzICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gT25jZSBmb3IgZWFjaCB0eXBlLm5hbWVzcGFjZSBpbiB0eXBlczsgdHlwZSBtYXkgYmUgb21pdHRlZFxuXHRcdHR5cGVzID0gKCB0eXBlcyB8fCBcIlwiICkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblx0XHR0ID0gdHlwZXMubGVuZ3RoO1xuXHRcdHdoaWxlICggdC0tICkge1xuXHRcdFx0dG1wID0gcnR5cGVuYW1lc3BhY2UuZXhlYyggdHlwZXNbIHQgXSApIHx8IFtdO1xuXHRcdFx0dHlwZSA9IG9yaWdUeXBlID0gdG1wWyAxIF07XG5cdFx0XHRuYW1lc3BhY2VzID0gKCB0bXBbIDIgXSB8fCBcIlwiICkuc3BsaXQoIFwiLlwiICkuc29ydCgpO1xuXG5cdFx0XHQvLyBVbmJpbmQgYWxsIGV2ZW50cyAob24gdGhpcyBuYW1lc3BhY2UsIGlmIHByb3ZpZGVkKSBmb3IgdGhlIGVsZW1lbnRcblx0XHRcdGlmICggIXR5cGUgKSB7XG5cdFx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC5yZW1vdmUoIGVsZW0sIHR5cGUgKyB0eXBlc1sgdCBdLCBoYW5kbGVyLCBzZWxlY3RvciwgdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0fVxuXG5cdFx0XHRzcGVjaWFsID0galF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSB8fCB7fTtcblx0XHRcdHR5cGUgPSAoIHNlbGVjdG9yID8gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgOiBzcGVjaWFsLmJpbmRUeXBlICkgfHwgdHlwZTtcblx0XHRcdGhhbmRsZXJzID0gZXZlbnRzWyB0eXBlIF0gfHwgW107XG5cdFx0XHR0bXAgPSB0bXBbIDIgXSAmJlxuXHRcdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKCBcIlxcXFwuKD86LipcXFxcLnwpXCIgKSArIFwiKFxcXFwufCQpXCIgKTtcblxuXHRcdFx0Ly8gUmVtb3ZlIG1hdGNoaW5nIGV2ZW50c1xuXHRcdFx0b3JpZ0NvdW50ID0gaiA9IGhhbmRsZXJzLmxlbmd0aDtcblx0XHRcdHdoaWxlICggai0tICkge1xuXHRcdFx0XHRoYW5kbGVPYmogPSBoYW5kbGVyc1sgaiBdO1xuXG5cdFx0XHRcdGlmICggKCBtYXBwZWRUeXBlcyB8fCBvcmlnVHlwZSA9PT0gaGFuZGxlT2JqLm9yaWdUeXBlICkgJiZcblx0XHRcdFx0XHQoICFoYW5kbGVyIHx8IGhhbmRsZXIuZ3VpZCA9PT0gaGFuZGxlT2JqLmd1aWQgKSAmJlxuXHRcdFx0XHRcdCggIXRtcCB8fCB0bXAudGVzdCggaGFuZGxlT2JqLm5hbWVzcGFjZSApICkgJiZcblx0XHRcdFx0XHQoICFzZWxlY3RvciB8fCBzZWxlY3RvciA9PT0gaGFuZGxlT2JqLnNlbGVjdG9yIHx8XG5cdFx0XHRcdFx0XHRzZWxlY3RvciA9PT0gXCIqKlwiICYmIGhhbmRsZU9iai5zZWxlY3RvciApICkge1xuXHRcdFx0XHRcdGhhbmRsZXJzLnNwbGljZSggaiwgMSApO1xuXG5cdFx0XHRcdFx0aWYgKCBoYW5kbGVPYmouc2VsZWN0b3IgKSB7XG5cdFx0XHRcdFx0XHRoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LS07XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggc3BlY2lhbC5yZW1vdmUgKSB7XG5cdFx0XHRcdFx0XHRzcGVjaWFsLnJlbW92ZS5jYWxsKCBlbGVtLCBoYW5kbGVPYmogKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVtb3ZlIGdlbmVyaWMgZXZlbnQgaGFuZGxlciBpZiB3ZSByZW1vdmVkIHNvbWV0aGluZyBhbmQgbm8gbW9yZSBoYW5kbGVycyBleGlzdFxuXHRcdFx0Ly8gKGF2b2lkcyBwb3RlbnRpYWwgZm9yIGVuZGxlc3MgcmVjdXJzaW9uIGR1cmluZyByZW1vdmFsIG9mIHNwZWNpYWwgZXZlbnQgaGFuZGxlcnMpXG5cdFx0XHRpZiAoIG9yaWdDb3VudCAmJiAhaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0XHRpZiAoICFzcGVjaWFsLnRlYXJkb3duIHx8XG5cdFx0XHRcdFx0c3BlY2lhbC50ZWFyZG93bi5jYWxsKCBlbGVtLCBuYW1lc3BhY2VzLCBlbGVtRGF0YS5oYW5kbGUgKSA9PT0gZmFsc2UgKSB7XG5cblx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGVsZW1EYXRhLmhhbmRsZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0ZGVsZXRlIGV2ZW50c1sgdHlwZSBdO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFJlbW92ZSBkYXRhIGFuZCB0aGUgZXhwYW5kbyBpZiBpdCdzIG5vIGxvbmdlciB1c2VkXG5cdFx0aWYgKCBqUXVlcnkuaXNFbXB0eU9iamVjdCggZXZlbnRzICkgKSB7XG5cdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGVsZW0sIFwiaGFuZGxlIGV2ZW50c1wiICk7XG5cdFx0fVxuXHR9LFxuXG5cdGRpc3BhdGNoOiBmdW5jdGlvbiggbmF0aXZlRXZlbnQgKSB7XG5cblx0XHQvLyBNYWtlIGEgd3JpdGFibGUgalF1ZXJ5LkV2ZW50IGZyb20gdGhlIG5hdGl2ZSBldmVudCBvYmplY3Rcblx0XHR2YXIgZXZlbnQgPSBqUXVlcnkuZXZlbnQuZml4KCBuYXRpdmVFdmVudCApO1xuXG5cdFx0dmFyIGksIGosIHJldCwgbWF0Y2hlZCwgaGFuZGxlT2JqLCBoYW5kbGVyUXVldWUsXG5cdFx0XHRhcmdzID0gbmV3IEFycmF5KCBhcmd1bWVudHMubGVuZ3RoICksXG5cdFx0XHRoYW5kbGVycyA9ICggZGF0YVByaXYuZ2V0KCB0aGlzLCBcImV2ZW50c1wiICkgfHwge30gKVsgZXZlbnQudHlwZSBdIHx8IFtdLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsWyBldmVudC50eXBlIF0gfHwge307XG5cblx0XHQvLyBVc2UgdGhlIGZpeC1lZCBqUXVlcnkuRXZlbnQgcmF0aGVyIHRoYW4gdGhlIChyZWFkLW9ubHkpIG5hdGl2ZSBldmVudFxuXHRcdGFyZ3NbIDAgXSA9IGV2ZW50O1xuXG5cdFx0Zm9yICggaSA9IDE7IGkgPCBhcmd1bWVudHMubGVuZ3RoOyBpKysgKSB7XG5cdFx0XHRhcmdzWyBpIF0gPSBhcmd1bWVudHNbIGkgXTtcblx0XHR9XG5cblx0XHRldmVudC5kZWxlZ2F0ZVRhcmdldCA9IHRoaXM7XG5cblx0XHQvLyBDYWxsIHRoZSBwcmVEaXNwYXRjaCBob29rIGZvciB0aGUgbWFwcGVkIHR5cGUsIGFuZCBsZXQgaXQgYmFpbCBpZiBkZXNpcmVkXG5cdFx0aWYgKCBzcGVjaWFsLnByZURpc3BhdGNoICYmIHNwZWNpYWwucHJlRGlzcGF0Y2guY2FsbCggdGhpcywgZXZlbnQgKSA9PT0gZmFsc2UgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRGV0ZXJtaW5lIGhhbmRsZXJzXG5cdFx0aGFuZGxlclF1ZXVlID0galF1ZXJ5LmV2ZW50LmhhbmRsZXJzLmNhbGwoIHRoaXMsIGV2ZW50LCBoYW5kbGVycyApO1xuXG5cdFx0Ly8gUnVuIGRlbGVnYXRlcyBmaXJzdDsgdGhleSBtYXkgd2FudCB0byBzdG9wIHByb3BhZ2F0aW9uIGJlbmVhdGggdXNcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoICggbWF0Y2hlZCA9IGhhbmRsZXJRdWV1ZVsgaSsrIF0gKSAmJiAhZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdGV2ZW50LmN1cnJlbnRUYXJnZXQgPSBtYXRjaGVkLmVsZW07XG5cblx0XHRcdGogPSAwO1xuXHRcdFx0d2hpbGUgKCAoIGhhbmRsZU9iaiA9IG1hdGNoZWQuaGFuZGxlcnNbIGorKyBdICkgJiZcblx0XHRcdFx0IWV2ZW50LmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGV2ZW50IGlzIG5hbWVzcGFjZWQsIHRoZW4gZWFjaCBoYW5kbGVyIGlzIG9ubHkgaW52b2tlZCBpZiBpdCBpc1xuXHRcdFx0XHQvLyBzcGVjaWFsbHkgdW5pdmVyc2FsIG9yIGl0cyBuYW1lc3BhY2VzIGFyZSBhIHN1cGVyc2V0IG9mIHRoZSBldmVudCdzLlxuXHRcdFx0XHRpZiAoICFldmVudC5ybmFtZXNwYWNlIHx8IGhhbmRsZU9iai5uYW1lc3BhY2UgPT09IGZhbHNlIHx8XG5cdFx0XHRcdFx0ZXZlbnQucm5hbWVzcGFjZS50ZXN0KCBoYW5kbGVPYmoubmFtZXNwYWNlICkgKSB7XG5cblx0XHRcdFx0XHRldmVudC5oYW5kbGVPYmogPSBoYW5kbGVPYmo7XG5cdFx0XHRcdFx0ZXZlbnQuZGF0YSA9IGhhbmRsZU9iai5kYXRhO1xuXG5cdFx0XHRcdFx0cmV0ID0gKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyBoYW5kbGVPYmoub3JpZ1R5cGUgXSB8fCB7fSApLmhhbmRsZSB8fFxuXHRcdFx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXIgKS5hcHBseSggbWF0Y2hlZC5lbGVtLCBhcmdzICk7XG5cblx0XHRcdFx0XHRpZiAoIHJldCAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0aWYgKCAoIGV2ZW50LnJlc3VsdCA9IHJldCApID09PSBmYWxzZSApIHtcblx0XHRcdFx0XHRcdFx0ZXZlbnQucHJldmVudERlZmF1bHQoKTtcblx0XHRcdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQ2FsbCB0aGUgcG9zdERpc3BhdGNoIGhvb2sgZm9yIHRoZSBtYXBwZWQgdHlwZVxuXHRcdGlmICggc3BlY2lhbC5wb3N0RGlzcGF0Y2ggKSB7XG5cdFx0XHRzcGVjaWFsLnBvc3REaXNwYXRjaC5jYWxsKCB0aGlzLCBldmVudCApO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0aGFuZGxlcnM6IGZ1bmN0aW9uKCBldmVudCwgaGFuZGxlcnMgKSB7XG5cdFx0dmFyIGksIGhhbmRsZU9iaiwgc2VsLCBtYXRjaGVkSGFuZGxlcnMsIG1hdGNoZWRTZWxlY3RvcnMsXG5cdFx0XHRoYW5kbGVyUXVldWUgPSBbXSxcblx0XHRcdGRlbGVnYXRlQ291bnQgPSBoYW5kbGVycy5kZWxlZ2F0ZUNvdW50LFxuXHRcdFx0Y3VyID0gZXZlbnQudGFyZ2V0O1xuXG5cdFx0Ly8gRmluZCBkZWxlZ2F0ZSBoYW5kbGVyc1xuXHRcdGlmICggZGVsZWdhdGVDb3VudCAmJlxuXG5cdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTlcblx0XHRcdC8vIEJsYWNrLWhvbGUgU1ZHIDx1c2U+IGluc3RhbmNlIHRyZWVzICh0cmFjLTEzMTgwKVxuXHRcdFx0Y3VyLm5vZGVUeXBlICYmXG5cblx0XHRcdC8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00MlxuXHRcdFx0Ly8gU3VwcHJlc3Mgc3BlYy12aW9sYXRpbmcgY2xpY2tzIGluZGljYXRpbmcgYSBub24tcHJpbWFyeSBwb2ludGVyIGJ1dHRvbiAodHJhYy0zODYxKVxuXHRcdFx0Ly8gaHR0cHM6Ly93d3cudzMub3JnL1RSL0RPTS1MZXZlbC0zLUV2ZW50cy8jZXZlbnQtdHlwZS1jbGlja1xuXHRcdFx0Ly8gU3VwcG9ydDogSUUgMTEgb25seVxuXHRcdFx0Ly8gLi4uYnV0IG5vdCBhcnJvdyBrZXkgXCJjbGlja3NcIiBvZiByYWRpbyBpbnB1dHMsIHdoaWNoIGNhbiBoYXZlIGBidXR0b25gIC0xIChnaC0yMzQzKVxuXHRcdFx0ISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGV2ZW50LmJ1dHRvbiA+PSAxICkgKSB7XG5cblx0XHRcdGZvciAoIDsgY3VyICE9PSB0aGlzOyBjdXIgPSBjdXIucGFyZW50Tm9kZSB8fCB0aGlzICkge1xuXG5cdFx0XHRcdC8vIERvbid0IGNoZWNrIG5vbi1lbGVtZW50cyAoIzEzMjA4KVxuXHRcdFx0XHQvLyBEb24ndCBwcm9jZXNzIGNsaWNrcyBvbiBkaXNhYmxlZCBlbGVtZW50cyAoIzY5MTEsICM4MTY1LCAjMTEzODIsICMxMTc2NClcblx0XHRcdFx0aWYgKCBjdXIubm9kZVR5cGUgPT09IDEgJiYgISggZXZlbnQudHlwZSA9PT0gXCJjbGlja1wiICYmIGN1ci5kaXNhYmxlZCA9PT0gdHJ1ZSApICkge1xuXHRcdFx0XHRcdG1hdGNoZWRIYW5kbGVycyA9IFtdO1xuXHRcdFx0XHRcdG1hdGNoZWRTZWxlY3RvcnMgPSB7fTtcblx0XHRcdFx0XHRmb3IgKCBpID0gMDsgaSA8IGRlbGVnYXRlQ291bnQ7IGkrKyApIHtcblx0XHRcdFx0XHRcdGhhbmRsZU9iaiA9IGhhbmRsZXJzWyBpIF07XG5cblx0XHRcdFx0XHRcdC8vIERvbid0IGNvbmZsaWN0IHdpdGggT2JqZWN0LnByb3RvdHlwZSBwcm9wZXJ0aWVzICgjMTMyMDMpXG5cdFx0XHRcdFx0XHRzZWwgPSBoYW5kbGVPYmouc2VsZWN0b3IgKyBcIiBcIjtcblxuXHRcdFx0XHRcdFx0aWYgKCBtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkU2VsZWN0b3JzWyBzZWwgXSA9IGhhbmRsZU9iai5uZWVkc0NvbnRleHQgP1xuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeSggc2VsLCB0aGlzICkuaW5kZXgoIGN1ciApID4gLTEgOlxuXHRcdFx0XHRcdFx0XHRcdGpRdWVyeS5maW5kKCBzZWwsIHRoaXMsIG51bGwsIFsgY3VyIF0gKS5sZW5ndGg7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRpZiAoIG1hdGNoZWRTZWxlY3RvcnNbIHNlbCBdICkge1xuXHRcdFx0XHRcdFx0XHRtYXRjaGVkSGFuZGxlcnMucHVzaCggaGFuZGxlT2JqICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdGlmICggbWF0Y2hlZEhhbmRsZXJzLmxlbmd0aCApIHtcblx0XHRcdFx0XHRcdGhhbmRsZXJRdWV1ZS5wdXNoKCB7IGVsZW06IGN1ciwgaGFuZGxlcnM6IG1hdGNoZWRIYW5kbGVycyB9ICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHRoZSByZW1haW5pbmcgKGRpcmVjdGx5LWJvdW5kKSBoYW5kbGVyc1xuXHRcdGN1ciA9IHRoaXM7XG5cdFx0aWYgKCBkZWxlZ2F0ZUNvdW50IDwgaGFuZGxlcnMubGVuZ3RoICkge1xuXHRcdFx0aGFuZGxlclF1ZXVlLnB1c2goIHsgZWxlbTogY3VyLCBoYW5kbGVyczogaGFuZGxlcnMuc2xpY2UoIGRlbGVnYXRlQ291bnQgKSB9ICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGhhbmRsZXJRdWV1ZTtcblx0fSxcblxuXHRhZGRQcm9wOiBmdW5jdGlvbiggbmFtZSwgaG9vayApIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoIGpRdWVyeS5FdmVudC5wcm90b3R5cGUsIG5hbWUsIHtcblx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRjb25maWd1cmFibGU6IHRydWUsXG5cblx0XHRcdGdldDogaXNGdW5jdGlvbiggaG9vayApID9cblx0XHRcdFx0ZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0XHRcdFx0XHRcdHJldHVybiBob29rKCB0aGlzLm9yaWdpbmFsRXZlbnQgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gOlxuXHRcdFx0XHRmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRpZiAoIHRoaXMub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHRoaXMub3JpZ2luYWxFdmVudFsgbmFtZSBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eSggdGhpcywgbmFtZSwge1xuXHRcdFx0XHRcdGVudW1lcmFibGU6IHRydWUsXG5cdFx0XHRcdFx0Y29uZmlndXJhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHdyaXRhYmxlOiB0cnVlLFxuXHRcdFx0XHRcdHZhbHVlOiB2YWx1ZVxuXHRcdFx0XHR9ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGZpeDogZnVuY3Rpb24oIG9yaWdpbmFsRXZlbnQgKSB7XG5cdFx0cmV0dXJuIG9yaWdpbmFsRXZlbnRbIGpRdWVyeS5leHBhbmRvIF0gP1xuXHRcdFx0b3JpZ2luYWxFdmVudCA6XG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCBvcmlnaW5hbEV2ZW50ICk7XG5cdH0sXG5cblx0c3BlY2lhbDoge1xuXHRcdGxvYWQ6IHtcblxuXHRcdFx0Ly8gUHJldmVudCB0cmlnZ2VyZWQgaW1hZ2UubG9hZCBldmVudHMgZnJvbSBidWJibGluZyB0byB3aW5kb3cubG9hZFxuXHRcdFx0bm9CdWJibGU6IHRydWVcblx0XHR9LFxuXHRcdGNsaWNrOiB7XG5cblx0XHRcdC8vIFV0aWxpemUgbmF0aXZlIGV2ZW50IHRvIGVuc3VyZSBjb3JyZWN0IHN0YXRlIGZvciBjaGVja2FibGUgaW5wdXRzXG5cdFx0XHRzZXR1cDogZnVuY3Rpb24oIGRhdGEgKSB7XG5cblx0XHRcdFx0Ly8gRm9yIG11dHVhbCBjb21wcmVzc2liaWxpdHkgd2l0aCBfZGVmYXVsdCwgcmVwbGFjZSBgdGhpc2AgYWNjZXNzIHdpdGggYSBsb2NhbCB2YXIuXG5cdFx0XHRcdC8vIGB8fCBkYXRhYCBpcyBkZWFkIGNvZGUgbWVhbnQgb25seSB0byBwcmVzZXJ2ZSB0aGUgdmFyaWFibGUgdGhyb3VnaCBtaW5pZmljYXRpb24uXG5cdFx0XHRcdHZhciBlbCA9IHRoaXMgfHwgZGF0YTtcblxuXHRcdFx0XHQvLyBDbGFpbSB0aGUgZmlyc3QgaGFuZGxlclxuXHRcdFx0XHRpZiAoIHJjaGVja2FibGVUeXBlLnRlc3QoIGVsLnR5cGUgKSAmJlxuXHRcdFx0XHRcdGVsLmNsaWNrICYmIG5vZGVOYW1lKCBlbCwgXCJpbnB1dFwiICkgKSB7XG5cblx0XHRcdFx0XHQvLyBkYXRhUHJpdi5zZXQoIGVsLCBcImNsaWNrXCIsIC4uLiApXG5cdFx0XHRcdFx0bGV2ZXJhZ2VOYXRpdmUoIGVsLCBcImNsaWNrXCIsIHJldHVyblRydWUgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJldHVybiBmYWxzZSB0byBhbGxvdyBub3JtYWwgcHJvY2Vzc2luZyBpbiB0aGUgY2FsbGVyXG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH0sXG5cdFx0XHR0cmlnZ2VyOiBmdW5jdGlvbiggZGF0YSApIHtcblxuXHRcdFx0XHQvLyBGb3IgbXV0dWFsIGNvbXByZXNzaWJpbGl0eSB3aXRoIF9kZWZhdWx0LCByZXBsYWNlIGB0aGlzYCBhY2Nlc3Mgd2l0aCBhIGxvY2FsIHZhci5cblx0XHRcdFx0Ly8gYHx8IGRhdGFgIGlzIGRlYWQgY29kZSBtZWFudCBvbmx5IHRvIHByZXNlcnZlIHRoZSB2YXJpYWJsZSB0aHJvdWdoIG1pbmlmaWNhdGlvbi5cblx0XHRcdFx0dmFyIGVsID0gdGhpcyB8fCBkYXRhO1xuXG5cdFx0XHRcdC8vIEZvcmNlIHNldHVwIGJlZm9yZSB0cmlnZ2VyaW5nIGEgY2xpY2tcblx0XHRcdFx0aWYgKCByY2hlY2thYmxlVHlwZS50ZXN0KCBlbC50eXBlICkgJiZcblx0XHRcdFx0XHRlbC5jbGljayAmJiBub2RlTmFtZSggZWwsIFwiaW5wdXRcIiApICkge1xuXG5cdFx0XHRcdFx0bGV2ZXJhZ2VOYXRpdmUoIGVsLCBcImNsaWNrXCIgKTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFJldHVybiBub24tZmFsc2UgdG8gYWxsb3cgbm9ybWFsIGV2ZW50LXBhdGggcHJvcGFnYXRpb25cblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9LFxuXG5cdFx0XHQvLyBGb3IgY3Jvc3MtYnJvd3NlciBjb25zaXN0ZW5jeSwgc3VwcHJlc3MgbmF0aXZlIC5jbGljaygpIG9uIGxpbmtzXG5cdFx0XHQvLyBBbHNvIHByZXZlbnQgaXQgaWYgd2UncmUgY3VycmVudGx5IGluc2lkZSBhIGxldmVyYWdlZCBuYXRpdmUtZXZlbnQgc3RhY2tcblx0XHRcdF9kZWZhdWx0OiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHRcdHZhciB0YXJnZXQgPSBldmVudC50YXJnZXQ7XG5cdFx0XHRcdHJldHVybiByY2hlY2thYmxlVHlwZS50ZXN0KCB0YXJnZXQudHlwZSApICYmXG5cdFx0XHRcdFx0dGFyZ2V0LmNsaWNrICYmIG5vZGVOYW1lKCB0YXJnZXQsIFwiaW5wdXRcIiApICYmXG5cdFx0XHRcdFx0ZGF0YVByaXYuZ2V0KCB0YXJnZXQsIFwiY2xpY2tcIiApIHx8XG5cdFx0XHRcdFx0bm9kZU5hbWUoIHRhcmdldCwgXCJhXCIgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0YmVmb3JldW5sb2FkOiB7XG5cdFx0XHRwb3N0RGlzcGF0Y2g6IGZ1bmN0aW9uKCBldmVudCApIHtcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDIwK1xuXHRcdFx0XHQvLyBGaXJlZm94IGRvZXNuJ3QgYWxlcnQgaWYgdGhlIHJldHVyblZhbHVlIGZpZWxkIGlzIG5vdCBzZXQuXG5cdFx0XHRcdGlmICggZXZlbnQucmVzdWx0ICE9PSB1bmRlZmluZWQgJiYgZXZlbnQub3JpZ2luYWxFdmVudCApIHtcblx0XHRcdFx0XHRldmVudC5vcmlnaW5hbEV2ZW50LnJldHVyblZhbHVlID0gZXZlbnQucmVzdWx0O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59O1xuXG4vLyBFbnN1cmUgdGhlIHByZXNlbmNlIG9mIGFuIGV2ZW50IGxpc3RlbmVyIHRoYXQgaGFuZGxlcyBtYW51YWxseS10cmlnZ2VyZWRcbi8vIHN5bnRoZXRpYyBldmVudHMgYnkgaW50ZXJydXB0aW5nIHByb2dyZXNzIHVudGlsIHJlaW52b2tlZCBpbiByZXNwb25zZSB0b1xuLy8gKm5hdGl2ZSogZXZlbnRzIHRoYXQgaXQgZmlyZXMgZGlyZWN0bHksIGVuc3VyaW5nIHRoYXQgc3RhdGUgY2hhbmdlcyBoYXZlXG4vLyBhbHJlYWR5IG9jY3VycmVkIGJlZm9yZSBvdGhlciBsaXN0ZW5lcnMgYXJlIGludm9rZWQuXG5mdW5jdGlvbiBsZXZlcmFnZU5hdGl2ZSggZWwsIHR5cGUsIGV4cGVjdFN5bmMgKSB7XG5cblx0Ly8gTWlzc2luZyBleHBlY3RTeW5jIGluZGljYXRlcyBhIHRyaWdnZXIgY2FsbCwgd2hpY2ggbXVzdCBmb3JjZSBzZXR1cCB0aHJvdWdoIGpRdWVyeS5ldmVudC5hZGRcblx0aWYgKCAhZXhwZWN0U3luYyApIHtcblx0XHRpZiAoIGRhdGFQcml2LmdldCggZWwsIHR5cGUgKSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LmFkZCggZWwsIHR5cGUsIHJldHVyblRydWUgKTtcblx0XHR9XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gUmVnaXN0ZXIgdGhlIGNvbnRyb2xsZXIgYXMgYSBzcGVjaWFsIHVuaXZlcnNhbCBoYW5kbGVyIGZvciBhbGwgZXZlbnQgbmFtZXNwYWNlc1xuXHRkYXRhUHJpdi5zZXQoIGVsLCB0eXBlLCBmYWxzZSApO1xuXHRqUXVlcnkuZXZlbnQuYWRkKCBlbCwgdHlwZSwge1xuXHRcdG5hbWVzcGFjZTogZmFsc2UsXG5cdFx0aGFuZGxlcjogZnVuY3Rpb24oIGV2ZW50ICkge1xuXHRcdFx0dmFyIG5vdEFzeW5jLCByZXN1bHQsXG5cdFx0XHRcdHNhdmVkID0gZGF0YVByaXYuZ2V0KCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdGlmICggKCBldmVudC5pc1RyaWdnZXIgJiAxICkgJiYgdGhpc1sgdHlwZSBdICkge1xuXG5cdFx0XHRcdC8vIEludGVycnVwdCBwcm9jZXNzaW5nIG9mIHRoZSBvdXRlciBzeW50aGV0aWMgLnRyaWdnZXIoKWVkIGV2ZW50XG5cdFx0XHRcdC8vIFNhdmVkIGRhdGEgc2hvdWxkIGJlIGZhbHNlIGluIHN1Y2ggY2FzZXMsIGJ1dCBtaWdodCBiZSBhIGxlZnRvdmVyIGNhcHR1cmUgb2JqZWN0XG5cdFx0XHRcdC8vIGZyb20gYW4gYXN5bmMgbmF0aXZlIGhhbmRsZXIgKGdoLTQzNTApXG5cdFx0XHRcdGlmICggIXNhdmVkLmxlbmd0aCApIHtcblxuXHRcdFx0XHRcdC8vIFN0b3JlIGFyZ3VtZW50cyBmb3IgdXNlIHdoZW4gaGFuZGxpbmcgdGhlIGlubmVyIG5hdGl2ZSBldmVudFxuXHRcdFx0XHRcdC8vIFRoZXJlIHdpbGwgYWx3YXlzIGJlIGF0IGxlYXN0IG9uZSBhcmd1bWVudCAoYW4gZXZlbnQgb2JqZWN0KSwgc28gdGhpcyBhcnJheVxuXHRcdFx0XHRcdC8vIHdpbGwgbm90IGJlIGNvbmZ1c2VkIHdpdGggYSBsZWZ0b3ZlciBjYXB0dXJlIG9iamVjdC5cblx0XHRcdFx0XHRzYXZlZCA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRcdGRhdGFQcml2LnNldCggdGhpcywgdHlwZSwgc2F2ZWQgKTtcblxuXHRcdFx0XHRcdC8vIFRyaWdnZXIgdGhlIG5hdGl2ZSBldmVudCBhbmQgY2FwdHVyZSBpdHMgcmVzdWx0XG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTErXG5cdFx0XHRcdFx0Ly8gZm9jdXMoKSBhbmQgYmx1cigpIGFyZSBhc3luY2hyb25vdXNcblx0XHRcdFx0XHRub3RBc3luYyA9IGV4cGVjdFN5bmMoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0XHR0aGlzWyB0eXBlIF0oKTtcblx0XHRcdFx0XHRyZXN1bHQgPSBkYXRhUHJpdi5nZXQoIHRoaXMsIHR5cGUgKTtcblx0XHRcdFx0XHRpZiAoIHNhdmVkICE9PSByZXN1bHQgfHwgbm90QXN5bmMgKSB7XG5cdFx0XHRcdFx0XHRkYXRhUHJpdi5zZXQoIHRoaXMsIHR5cGUsIGZhbHNlICk7XG5cdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdHJlc3VsdCA9IHt9O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRpZiAoIHNhdmVkICE9PSByZXN1bHQgKSB7XG5cblx0XHRcdFx0XHRcdC8vIENhbmNlbCB0aGUgb3V0ZXIgc3ludGhldGljIGV2ZW50XG5cdFx0XHRcdFx0XHRldmVudC5zdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKTtcblx0XHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdFx0XHRyZXR1cm4gcmVzdWx0LnZhbHVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBJZiB0aGlzIGlzIGFuIGlubmVyIHN5bnRoZXRpYyBldmVudCBmb3IgYW4gZXZlbnQgd2l0aCBhIGJ1YmJsaW5nIHN1cnJvZ2F0ZVxuXHRcdFx0XHQvLyAoZm9jdXMgb3IgYmx1ciksIGFzc3VtZSB0aGF0IHRoZSBzdXJyb2dhdGUgYWxyZWFkeSBwcm9wYWdhdGVkIGZyb20gdHJpZ2dlcmluZyB0aGVcblx0XHRcdFx0Ly8gbmF0aXZlIGV2ZW50IGFuZCBwcmV2ZW50IHRoYXQgZnJvbSBoYXBwZW5pbmcgYWdhaW4gaGVyZS5cblx0XHRcdFx0Ly8gVGhpcyB0ZWNobmljYWxseSBnZXRzIHRoZSBvcmRlcmluZyB3cm9uZyB3LnIudC4gdG8gYC50cmlnZ2VyKClgIChpbiB3aGljaCB0aGVcblx0XHRcdFx0Ly8gYnViYmxpbmcgc3Vycm9nYXRlIHByb3BhZ2F0ZXMgKmFmdGVyKiB0aGUgbm9uLWJ1YmJsaW5nIGJhc2UpLCBidXQgdGhhdCBzZWVtc1xuXHRcdFx0XHQvLyBsZXNzIGJhZCB0aGFuIGR1cGxpY2F0aW9uLlxuXHRcdFx0XHR9IGVsc2UgaWYgKCAoIGpRdWVyeS5ldmVudC5zcGVjaWFsWyB0eXBlIF0gfHwge30gKS5kZWxlZ2F0ZVR5cGUgKSB7XG5cdFx0XHRcdFx0ZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhpcyBpcyBhIG5hdGl2ZSBldmVudCB0cmlnZ2VyZWQgYWJvdmUsIGV2ZXJ5dGhpbmcgaXMgbm93IGluIG9yZGVyXG5cdFx0XHQvLyBGaXJlIGFuIGlubmVyIHN5bnRoZXRpYyBldmVudCB3aXRoIHRoZSBvcmlnaW5hbCBhcmd1bWVudHNcblx0XHRcdH0gZWxzZSBpZiAoIHNhdmVkLmxlbmd0aCApIHtcblxuXHRcdFx0XHQvLyAuLi5hbmQgY2FwdHVyZSB0aGUgcmVzdWx0XG5cdFx0XHRcdGRhdGFQcml2LnNldCggdGhpcywgdHlwZSwge1xuXHRcdFx0XHRcdHZhbHVlOiBqUXVlcnkuZXZlbnQudHJpZ2dlcihcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTErXG5cdFx0XHRcdFx0XHQvLyBFeHRlbmQgd2l0aCB0aGUgcHJvdG90eXBlIHRvIHJlc2V0IHRoZSBhYm92ZSBzdG9wSW1tZWRpYXRlUHJvcGFnYXRpb24oKVxuXHRcdFx0XHRcdFx0alF1ZXJ5LmV4dGVuZCggc2F2ZWRbIDAgXSwgalF1ZXJ5LkV2ZW50LnByb3RvdHlwZSApLFxuXHRcdFx0XHRcdFx0c2F2ZWQuc2xpY2UoIDEgKSxcblx0XHRcdFx0XHRcdHRoaXNcblx0XHRcdFx0XHQpXG5cdFx0XHRcdH0gKTtcblxuXHRcdFx0XHQvLyBBYm9ydCBoYW5kbGluZyBvZiB0aGUgbmF0aXZlIGV2ZW50XG5cdFx0XHRcdGV2ZW50LnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpO1xuXHRcdFx0fVxuXHRcdH1cblx0fSApO1xufVxuXG5qUXVlcnkucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbiggZWxlbSwgdHlwZSwgaGFuZGxlICkge1xuXG5cdC8vIFRoaXMgXCJpZlwiIGlzIG5lZWRlZCBmb3IgcGxhaW4gb2JqZWN0c1xuXHRpZiAoIGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciApIHtcblx0XHRlbGVtLnJlbW92ZUV2ZW50TGlzdGVuZXIoIHR5cGUsIGhhbmRsZSApO1xuXHR9XG59O1xuXG5qUXVlcnkuRXZlbnQgPSBmdW5jdGlvbiggc3JjLCBwcm9wcyApIHtcblxuXHQvLyBBbGxvdyBpbnN0YW50aWF0aW9uIHdpdGhvdXQgdGhlICduZXcnIGtleXdvcmRcblx0aWYgKCAhKCB0aGlzIGluc3RhbmNlb2YgalF1ZXJ5LkV2ZW50ICkgKSB7XG5cdFx0cmV0dXJuIG5ldyBqUXVlcnkuRXZlbnQoIHNyYywgcHJvcHMgKTtcblx0fVxuXG5cdC8vIEV2ZW50IG9iamVjdFxuXHRpZiAoIHNyYyAmJiBzcmMudHlwZSApIHtcblx0XHR0aGlzLm9yaWdpbmFsRXZlbnQgPSBzcmM7XG5cdFx0dGhpcy50eXBlID0gc3JjLnR5cGU7XG5cblx0XHQvLyBFdmVudHMgYnViYmxpbmcgdXAgdGhlIGRvY3VtZW50IG1heSBoYXZlIGJlZW4gbWFya2VkIGFzIHByZXZlbnRlZFxuXHRcdC8vIGJ5IGEgaGFuZGxlciBsb3dlciBkb3duIHRoZSB0cmVlOyByZWZsZWN0IHRoZSBjb3JyZWN0IHZhbHVlLlxuXHRcdHRoaXMuaXNEZWZhdWx0UHJldmVudGVkID0gc3JjLmRlZmF1bHRQcmV2ZW50ZWQgfHxcblx0XHRcdFx0c3JjLmRlZmF1bHRQcmV2ZW50ZWQgPT09IHVuZGVmaW5lZCAmJlxuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD0yLjMgb25seVxuXHRcdFx0XHRzcmMucmV0dXJuVmFsdWUgPT09IGZhbHNlID9cblx0XHRcdHJldHVyblRydWUgOlxuXHRcdFx0cmV0dXJuRmFsc2U7XG5cblx0XHQvLyBDcmVhdGUgdGFyZ2V0IHByb3BlcnRpZXNcblx0XHQvLyBTdXBwb3J0OiBTYWZhcmkgPD02IC0gNyBvbmx5XG5cdFx0Ly8gVGFyZ2V0IHNob3VsZCBub3QgYmUgYSB0ZXh0IG5vZGUgKCM1MDQsICMxMzE0Mylcblx0XHR0aGlzLnRhcmdldCA9ICggc3JjLnRhcmdldCAmJiBzcmMudGFyZ2V0Lm5vZGVUeXBlID09PSAzICkgP1xuXHRcdFx0c3JjLnRhcmdldC5wYXJlbnROb2RlIDpcblx0XHRcdHNyYy50YXJnZXQ7XG5cblx0XHR0aGlzLmN1cnJlbnRUYXJnZXQgPSBzcmMuY3VycmVudFRhcmdldDtcblx0XHR0aGlzLnJlbGF0ZWRUYXJnZXQgPSBzcmMucmVsYXRlZFRhcmdldDtcblxuXHQvLyBFdmVudCB0eXBlXG5cdH0gZWxzZSB7XG5cdFx0dGhpcy50eXBlID0gc3JjO1xuXHR9XG5cblx0Ly8gUHV0IGV4cGxpY2l0bHkgcHJvdmlkZWQgcHJvcGVydGllcyBvbnRvIHRoZSBldmVudCBvYmplY3Rcblx0aWYgKCBwcm9wcyApIHtcblx0XHRqUXVlcnkuZXh0ZW5kKCB0aGlzLCBwcm9wcyApO1xuXHR9XG5cblx0Ly8gQ3JlYXRlIGEgdGltZXN0YW1wIGlmIGluY29taW5nIGV2ZW50IGRvZXNuJ3QgaGF2ZSBvbmVcblx0dGhpcy50aW1lU3RhbXAgPSBzcmMgJiYgc3JjLnRpbWVTdGFtcCB8fCBEYXRlLm5vdygpO1xuXG5cdC8vIE1hcmsgaXQgYXMgZml4ZWRcblx0dGhpc1sgalF1ZXJ5LmV4cGFuZG8gXSA9IHRydWU7XG59O1xuXG4vLyBqUXVlcnkuRXZlbnQgaXMgYmFzZWQgb24gRE9NMyBFdmVudHMgYXMgc3BlY2lmaWVkIGJ5IHRoZSBFQ01BU2NyaXB0IExhbmd1YWdlIEJpbmRpbmdcbi8vIGh0dHBzOi8vd3d3LnczLm9yZy9UUi8yMDAzL1dELURPTS1MZXZlbC0zLUV2ZW50cy0yMDAzMDMzMS9lY21hLXNjcmlwdC1iaW5kaW5nLmh0bWxcbmpRdWVyeS5FdmVudC5wcm90b3R5cGUgPSB7XG5cdGNvbnN0cnVjdG9yOiBqUXVlcnkuRXZlbnQsXG5cdGlzRGVmYXVsdFByZXZlbnRlZDogcmV0dXJuRmFsc2UsXG5cdGlzUHJvcGFnYXRpb25TdG9wcGVkOiByZXR1cm5GYWxzZSxcblx0aXNJbW1lZGlhdGVQcm9wYWdhdGlvblN0b3BwZWQ6IHJldHVybkZhbHNlLFxuXHRpc1NpbXVsYXRlZDogZmFsc2UsXG5cblx0cHJldmVudERlZmF1bHQ6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBlID0gdGhpcy5vcmlnaW5hbEV2ZW50O1xuXG5cdFx0dGhpcy5pc0RlZmF1bHRQcmV2ZW50ZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5wcmV2ZW50RGVmYXVsdCgpO1xuXHRcdH1cblx0fSxcblx0c3RvcFByb3BhZ2F0aW9uOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgZSA9IHRoaXMub3JpZ2luYWxFdmVudDtcblxuXHRcdHRoaXMuaXNQcm9wYWdhdGlvblN0b3BwZWQgPSByZXR1cm5UcnVlO1xuXG5cdFx0aWYgKCBlICYmICF0aGlzLmlzU2ltdWxhdGVkICkge1xuXHRcdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHR9XG5cdH0sXG5cdHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGUgPSB0aGlzLm9yaWdpbmFsRXZlbnQ7XG5cblx0XHR0aGlzLmlzSW1tZWRpYXRlUHJvcGFnYXRpb25TdG9wcGVkID0gcmV0dXJuVHJ1ZTtcblxuXHRcdGlmICggZSAmJiAhdGhpcy5pc1NpbXVsYXRlZCApIHtcblx0XHRcdGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG5cdFx0fVxuXG5cdFx0dGhpcy5zdG9wUHJvcGFnYXRpb24oKTtcblx0fVxufTtcblxuLy8gSW5jbHVkZXMgYWxsIGNvbW1vbiBldmVudCBwcm9wcyBpbmNsdWRpbmcgS2V5RXZlbnQgYW5kIE1vdXNlRXZlbnQgc3BlY2lmaWMgcHJvcHNcbmpRdWVyeS5lYWNoKCB7XG5cdGFsdEtleTogdHJ1ZSxcblx0YnViYmxlczogdHJ1ZSxcblx0Y2FuY2VsYWJsZTogdHJ1ZSxcblx0Y2hhbmdlZFRvdWNoZXM6IHRydWUsXG5cdGN0cmxLZXk6IHRydWUsXG5cdGRldGFpbDogdHJ1ZSxcblx0ZXZlbnRQaGFzZTogdHJ1ZSxcblx0bWV0YUtleTogdHJ1ZSxcblx0cGFnZVg6IHRydWUsXG5cdHBhZ2VZOiB0cnVlLFxuXHRzaGlmdEtleTogdHJ1ZSxcblx0dmlldzogdHJ1ZSxcblx0XCJjaGFyXCI6IHRydWUsXG5cdGNvZGU6IHRydWUsXG5cdGNoYXJDb2RlOiB0cnVlLFxuXHRrZXk6IHRydWUsXG5cdGtleUNvZGU6IHRydWUsXG5cdGJ1dHRvbjogdHJ1ZSxcblx0YnV0dG9uczogdHJ1ZSxcblx0Y2xpZW50WDogdHJ1ZSxcblx0Y2xpZW50WTogdHJ1ZSxcblx0b2Zmc2V0WDogdHJ1ZSxcblx0b2Zmc2V0WTogdHJ1ZSxcblx0cG9pbnRlcklkOiB0cnVlLFxuXHRwb2ludGVyVHlwZTogdHJ1ZSxcblx0c2NyZWVuWDogdHJ1ZSxcblx0c2NyZWVuWTogdHJ1ZSxcblx0dGFyZ2V0VG91Y2hlczogdHJ1ZSxcblx0dG9FbGVtZW50OiB0cnVlLFxuXHR0b3VjaGVzOiB0cnVlLFxuXG5cdHdoaWNoOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0dmFyIGJ1dHRvbiA9IGV2ZW50LmJ1dHRvbjtcblxuXHRcdC8vIEFkZCB3aGljaCBmb3Iga2V5IGV2ZW50c1xuXHRcdGlmICggZXZlbnQud2hpY2ggPT0gbnVsbCAmJiBya2V5RXZlbnQudGVzdCggZXZlbnQudHlwZSApICkge1xuXHRcdFx0cmV0dXJuIGV2ZW50LmNoYXJDb2RlICE9IG51bGwgPyBldmVudC5jaGFyQ29kZSA6IGV2ZW50LmtleUNvZGU7XG5cdFx0fVxuXG5cdFx0Ly8gQWRkIHdoaWNoIGZvciBjbGljazogMSA9PT0gbGVmdDsgMiA9PT0gbWlkZGxlOyAzID09PSByaWdodFxuXHRcdGlmICggIWV2ZW50LndoaWNoICYmIGJ1dHRvbiAhPT0gdW5kZWZpbmVkICYmIHJtb3VzZUV2ZW50LnRlc3QoIGV2ZW50LnR5cGUgKSApIHtcblx0XHRcdGlmICggYnV0dG9uICYgMSApIHtcblx0XHRcdFx0cmV0dXJuIDE7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggYnV0dG9uICYgMiApIHtcblx0XHRcdFx0cmV0dXJuIDM7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggYnV0dG9uICYgNCApIHtcblx0XHRcdFx0cmV0dXJuIDI7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybiAwO1xuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC53aGljaDtcblx0fVxufSwgalF1ZXJ5LmV2ZW50LmFkZFByb3AgKTtcblxualF1ZXJ5LmVhY2goIHsgZm9jdXM6IFwiZm9jdXNpblwiLCBibHVyOiBcImZvY3Vzb3V0XCIgfSwgZnVuY3Rpb24oIHR5cGUsIGRlbGVnYXRlVHlwZSApIHtcblx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIHR5cGUgXSA9IHtcblxuXHRcdC8vIFV0aWxpemUgbmF0aXZlIGV2ZW50IGlmIHBvc3NpYmxlIHNvIGJsdXIvZm9jdXMgc2VxdWVuY2UgaXMgY29ycmVjdFxuXHRcdHNldHVwOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gQ2xhaW0gdGhlIGZpcnN0IGhhbmRsZXJcblx0XHRcdC8vIGRhdGFQcml2LnNldCggdGhpcywgXCJmb2N1c1wiLCAuLi4gKVxuXHRcdFx0Ly8gZGF0YVByaXYuc2V0KCB0aGlzLCBcImJsdXJcIiwgLi4uIClcblx0XHRcdGxldmVyYWdlTmF0aXZlKCB0aGlzLCB0eXBlLCBleHBlY3RTeW5jICk7XG5cblx0XHRcdC8vIFJldHVybiBmYWxzZSB0byBhbGxvdyBub3JtYWwgcHJvY2Vzc2luZyBpbiB0aGUgY2FsbGVyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblx0XHR0cmlnZ2VyOiBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRm9yY2Ugc2V0dXAgYmVmb3JlIHRyaWdnZXJcblx0XHRcdGxldmVyYWdlTmF0aXZlKCB0aGlzLCB0eXBlICk7XG5cblx0XHRcdC8vIFJldHVybiBub24tZmFsc2UgdG8gYWxsb3cgbm9ybWFsIGV2ZW50LXBhdGggcHJvcGFnYXRpb25cblx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH0sXG5cblx0XHRkZWxlZ2F0ZVR5cGU6IGRlbGVnYXRlVHlwZVxuXHR9O1xufSApO1xuXG4vLyBDcmVhdGUgbW91c2VlbnRlci9sZWF2ZSBldmVudHMgdXNpbmcgbW91c2VvdmVyL291dCBhbmQgZXZlbnQtdGltZSBjaGVja3Ncbi8vIHNvIHRoYXQgZXZlbnQgZGVsZWdhdGlvbiB3b3JrcyBpbiBqUXVlcnkuXG4vLyBEbyB0aGUgc2FtZSBmb3IgcG9pbnRlcmVudGVyL3BvaW50ZXJsZWF2ZSBhbmQgcG9pbnRlcm92ZXIvcG9pbnRlcm91dFxuLy9cbi8vIFN1cHBvcnQ6IFNhZmFyaSA3IG9ubHlcbi8vIFNhZmFyaSBzZW5kcyBtb3VzZWVudGVyIHRvbyBvZnRlbjsgc2VlOlxuLy8gaHR0cHM6Ly9idWdzLmNocm9taXVtLm9yZy9wL2Nocm9taXVtL2lzc3Vlcy9kZXRhaWw/aWQ9NDcwMjU4XG4vLyBmb3IgdGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBidWcgKGl0IGV4aXN0ZWQgaW4gb2xkZXIgQ2hyb21lIHZlcnNpb25zIGFzIHdlbGwpLlxualF1ZXJ5LmVhY2goIHtcblx0bW91c2VlbnRlcjogXCJtb3VzZW92ZXJcIixcblx0bW91c2VsZWF2ZTogXCJtb3VzZW91dFwiLFxuXHRwb2ludGVyZW50ZXI6IFwicG9pbnRlcm92ZXJcIixcblx0cG9pbnRlcmxlYXZlOiBcInBvaW50ZXJvdXRcIlxufSwgZnVuY3Rpb24oIG9yaWcsIGZpeCApIHtcblx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIG9yaWcgXSA9IHtcblx0XHRkZWxlZ2F0ZVR5cGU6IGZpeCxcblx0XHRiaW5kVHlwZTogZml4LFxuXG5cdFx0aGFuZGxlOiBmdW5jdGlvbiggZXZlbnQgKSB7XG5cdFx0XHR2YXIgcmV0LFxuXHRcdFx0XHR0YXJnZXQgPSB0aGlzLFxuXHRcdFx0XHRyZWxhdGVkID0gZXZlbnQucmVsYXRlZFRhcmdldCxcblx0XHRcdFx0aGFuZGxlT2JqID0gZXZlbnQuaGFuZGxlT2JqO1xuXG5cdFx0XHQvLyBGb3IgbW91c2VlbnRlci9sZWF2ZSBjYWxsIHRoZSBoYW5kbGVyIGlmIHJlbGF0ZWQgaXMgb3V0c2lkZSB0aGUgdGFyZ2V0LlxuXHRcdFx0Ly8gTkI6IE5vIHJlbGF0ZWRUYXJnZXQgaWYgdGhlIG1vdXNlIGxlZnQvZW50ZXJlZCB0aGUgYnJvd3NlciB3aW5kb3dcblx0XHRcdGlmICggIXJlbGF0ZWQgfHwgKCByZWxhdGVkICE9PSB0YXJnZXQgJiYgIWpRdWVyeS5jb250YWlucyggdGFyZ2V0LCByZWxhdGVkICkgKSApIHtcblx0XHRcdFx0ZXZlbnQudHlwZSA9IGhhbmRsZU9iai5vcmlnVHlwZTtcblx0XHRcdFx0cmV0ID0gaGFuZGxlT2JqLmhhbmRsZXIuYXBwbHkoIHRoaXMsIGFyZ3VtZW50cyApO1xuXHRcdFx0XHRldmVudC50eXBlID0gZml4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cdH07XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblxuXHRvbjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuICk7XG5cdH0sXG5cdG9uZTogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIG9uKCB0aGlzLCB0eXBlcywgc2VsZWN0b3IsIGRhdGEsIGZuLCAxICk7XG5cdH0sXG5cdG9mZjogZnVuY3Rpb24oIHR5cGVzLCBzZWxlY3RvciwgZm4gKSB7XG5cdFx0dmFyIGhhbmRsZU9iaiwgdHlwZTtcblx0XHRpZiAoIHR5cGVzICYmIHR5cGVzLnByZXZlbnREZWZhdWx0ICYmIHR5cGVzLmhhbmRsZU9iaiApIHtcblxuXHRcdFx0Ly8gKCBldmVudCApICBkaXNwYXRjaGVkIGpRdWVyeS5FdmVudFxuXHRcdFx0aGFuZGxlT2JqID0gdHlwZXMuaGFuZGxlT2JqO1xuXHRcdFx0alF1ZXJ5KCB0eXBlcy5kZWxlZ2F0ZVRhcmdldCApLm9mZihcblx0XHRcdFx0aGFuZGxlT2JqLm5hbWVzcGFjZSA/XG5cdFx0XHRcdFx0aGFuZGxlT2JqLm9yaWdUeXBlICsgXCIuXCIgKyBoYW5kbGVPYmoubmFtZXNwYWNlIDpcblx0XHRcdFx0XHRoYW5kbGVPYmoub3JpZ1R5cGUsXG5cdFx0XHRcdGhhbmRsZU9iai5zZWxlY3Rvcixcblx0XHRcdFx0aGFuZGxlT2JqLmhhbmRsZXJcblx0XHRcdCk7XG5cdFx0XHRyZXR1cm4gdGhpcztcblx0XHR9XG5cdFx0aWYgKCB0eXBlb2YgdHlwZXMgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHRcdC8vICggdHlwZXMtb2JqZWN0IFssIHNlbGVjdG9yXSApXG5cdFx0XHRmb3IgKCB0eXBlIGluIHR5cGVzICkge1xuXHRcdFx0XHR0aGlzLm9mZiggdHlwZSwgc2VsZWN0b3IsIHR5cGVzWyB0eXBlIF0gKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiB0aGlzO1xuXHRcdH1cblx0XHRpZiAoIHNlbGVjdG9yID09PSBmYWxzZSB8fCB0eXBlb2Ygc2VsZWN0b3IgPT09IFwiZnVuY3Rpb25cIiApIHtcblxuXHRcdFx0Ly8gKCB0eXBlcyBbLCBmbl0gKVxuXHRcdFx0Zm4gPSBzZWxlY3Rvcjtcblx0XHRcdHNlbGVjdG9yID0gdW5kZWZpbmVkO1xuXHRcdH1cblx0XHRpZiAoIGZuID09PSBmYWxzZSApIHtcblx0XHRcdGZuID0gcmV0dXJuRmFsc2U7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggdGhpcywgdHlwZXMsIGZuLCBzZWxlY3RvciApO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5cbnZhclxuXG5cdC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cblxuXHQvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL2VzbGludC9lc2xpbnQvaXNzdWVzLzMyMjlcblx0cnhodG1sVGFnID0gLzwoPyFhcmVhfGJyfGNvbHxlbWJlZHxocnxpbWd8aW5wdXR8bGlua3xtZXRhfHBhcmFtKSgoW2Etel1bXlxcL1xcMD5cXHgyMFxcdFxcclxcblxcZl0qKVtePl0qKVxcLz4vZ2ksXG5cblx0LyogZXNsaW50LWVuYWJsZSAqL1xuXG5cdC8vIFN1cHBvcnQ6IElFIDw9MTAgLSAxMSwgRWRnZSAxMiAtIDEzIG9ubHlcblx0Ly8gSW4gSUUvRWRnZSB1c2luZyByZWdleCBncm91cHMgaGVyZSBjYXVzZXMgc2V2ZXJlIHNsb3dkb3ducy5cblx0Ly8gU2VlIGh0dHBzOi8vY29ubmVjdC5taWNyb3NvZnQuY29tL0lFL2ZlZWRiYWNrL2RldGFpbHMvMTczNjUxMi9cblx0cm5vSW5uZXJodG1sID0gLzxzY3JpcHR8PHN0eWxlfDxsaW5rL2ksXG5cblx0Ly8gY2hlY2tlZD1cImNoZWNrZWRcIiBvciBjaGVja2VkXG5cdHJjaGVja2VkID0gL2NoZWNrZWRcXHMqKD86W149XXw9XFxzKi5jaGVja2VkLikvaSxcblx0cmNsZWFuU2NyaXB0ID0gL15cXHMqPCEoPzpcXFtDREFUQVxcW3wtLSl8KD86XFxdXFxdfC0tKT5cXHMqJC9nO1xuXG4vLyBQcmVmZXIgYSB0Ym9keSBvdmVyIGl0cyBwYXJlbnQgdGFibGUgZm9yIGNvbnRhaW5pbmcgbmV3IHJvd3NcbmZ1bmN0aW9uIG1hbmlwdWxhdGlvblRhcmdldCggZWxlbSwgY29udGVudCApIHtcblx0aWYgKCBub2RlTmFtZSggZWxlbSwgXCJ0YWJsZVwiICkgJiZcblx0XHRub2RlTmFtZSggY29udGVudC5ub2RlVHlwZSAhPT0gMTEgPyBjb250ZW50IDogY29udGVudC5maXJzdENoaWxkLCBcInRyXCIgKSApIHtcblxuXHRcdHJldHVybiBqUXVlcnkoIGVsZW0gKS5jaGlsZHJlbiggXCJ0Ym9keVwiIClbIDAgXSB8fCBlbGVtO1xuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbi8vIFJlcGxhY2UvcmVzdG9yZSB0aGUgdHlwZSBhdHRyaWJ1dGUgb2Ygc2NyaXB0IGVsZW1lbnRzIGZvciBzYWZlIERPTSBtYW5pcHVsYXRpb25cbmZ1bmN0aW9uIGRpc2FibGVTY3JpcHQoIGVsZW0gKSB7XG5cdGVsZW0udHlwZSA9ICggZWxlbS5nZXRBdHRyaWJ1dGUoIFwidHlwZVwiICkgIT09IG51bGwgKSArIFwiL1wiICsgZWxlbS50eXBlO1xuXHRyZXR1cm4gZWxlbTtcbn1cbmZ1bmN0aW9uIHJlc3RvcmVTY3JpcHQoIGVsZW0gKSB7XG5cdGlmICggKCBlbGVtLnR5cGUgfHwgXCJcIiApLnNsaWNlKCAwLCA1ICkgPT09IFwidHJ1ZS9cIiApIHtcblx0XHRlbGVtLnR5cGUgPSBlbGVtLnR5cGUuc2xpY2UoIDUgKTtcblx0fSBlbHNlIHtcblx0XHRlbGVtLnJlbW92ZUF0dHJpYnV0ZSggXCJ0eXBlXCIgKTtcblx0fVxuXG5cdHJldHVybiBlbGVtO1xufVxuXG5mdW5jdGlvbiBjbG9uZUNvcHlFdmVudCggc3JjLCBkZXN0ICkge1xuXHR2YXIgaSwgbCwgdHlwZSwgcGRhdGFPbGQsIHBkYXRhQ3VyLCB1ZGF0YU9sZCwgdWRhdGFDdXIsIGV2ZW50cztcblxuXHRpZiAoIGRlc3Qubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0Ly8gMS4gQ29weSBwcml2YXRlIGRhdGE6IGV2ZW50cywgaGFuZGxlcnMsIGV0Yy5cblx0aWYgKCBkYXRhUHJpdi5oYXNEYXRhKCBzcmMgKSApIHtcblx0XHRwZGF0YU9sZCA9IGRhdGFQcml2LmFjY2Vzcyggc3JjICk7XG5cdFx0cGRhdGFDdXIgPSBkYXRhUHJpdi5zZXQoIGRlc3QsIHBkYXRhT2xkICk7XG5cdFx0ZXZlbnRzID0gcGRhdGFPbGQuZXZlbnRzO1xuXG5cdFx0aWYgKCBldmVudHMgKSB7XG5cdFx0XHRkZWxldGUgcGRhdGFDdXIuaGFuZGxlO1xuXHRcdFx0cGRhdGFDdXIuZXZlbnRzID0ge307XG5cblx0XHRcdGZvciAoIHR5cGUgaW4gZXZlbnRzICkge1xuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IGV2ZW50c1sgdHlwZSBdLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQuYWRkKCBkZXN0LCB0eXBlLCBldmVudHNbIHR5cGUgXVsgaSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyAyLiBDb3B5IHVzZXIgZGF0YVxuXHRpZiAoIGRhdGFVc2VyLmhhc0RhdGEoIHNyYyApICkge1xuXHRcdHVkYXRhT2xkID0gZGF0YVVzZXIuYWNjZXNzKCBzcmMgKTtcblx0XHR1ZGF0YUN1ciA9IGpRdWVyeS5leHRlbmQoIHt9LCB1ZGF0YU9sZCApO1xuXG5cdFx0ZGF0YVVzZXIuc2V0KCBkZXN0LCB1ZGF0YUN1ciApO1xuXHR9XG59XG5cbi8vIEZpeCBJRSBidWdzLCBzZWUgc3VwcG9ydCB0ZXN0c1xuZnVuY3Rpb24gZml4SW5wdXQoIHNyYywgZGVzdCApIHtcblx0dmFyIG5vZGVOYW1lID0gZGVzdC5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdC8vIEZhaWxzIHRvIHBlcnNpc3QgdGhlIGNoZWNrZWQgc3RhdGUgb2YgYSBjbG9uZWQgY2hlY2tib3ggb3IgcmFkaW8gYnV0dG9uLlxuXHRpZiAoIG5vZGVOYW1lID09PSBcImlucHV0XCIgJiYgcmNoZWNrYWJsZVR5cGUudGVzdCggc3JjLnR5cGUgKSApIHtcblx0XHRkZXN0LmNoZWNrZWQgPSBzcmMuY2hlY2tlZDtcblxuXHQvLyBGYWlscyB0byByZXR1cm4gdGhlIHNlbGVjdGVkIG9wdGlvbiB0byB0aGUgZGVmYXVsdCBzZWxlY3RlZCBzdGF0ZSB3aGVuIGNsb25pbmcgb3B0aW9uc1xuXHR9IGVsc2UgaWYgKCBub2RlTmFtZSA9PT0gXCJpbnB1dFwiIHx8IG5vZGVOYW1lID09PSBcInRleHRhcmVhXCIgKSB7XG5cdFx0ZGVzdC5kZWZhdWx0VmFsdWUgPSBzcmMuZGVmYXVsdFZhbHVlO1xuXHR9XG59XG5cbmZ1bmN0aW9uIGRvbU1hbmlwKCBjb2xsZWN0aW9uLCBhcmdzLCBjYWxsYmFjaywgaWdub3JlZCApIHtcblxuXHQvLyBGbGF0dGVuIGFueSBuZXN0ZWQgYXJyYXlzXG5cdGFyZ3MgPSBjb25jYXQuYXBwbHkoIFtdLCBhcmdzICk7XG5cblx0dmFyIGZyYWdtZW50LCBmaXJzdCwgc2NyaXB0cywgaGFzU2NyaXB0cywgbm9kZSwgZG9jLFxuXHRcdGkgPSAwLFxuXHRcdGwgPSBjb2xsZWN0aW9uLmxlbmd0aCxcblx0XHRpTm9DbG9uZSA9IGwgLSAxLFxuXHRcdHZhbHVlID0gYXJnc1sgMCBdLFxuXHRcdHZhbHVlSXNGdW5jdGlvbiA9IGlzRnVuY3Rpb24oIHZhbHVlICk7XG5cblx0Ly8gV2UgY2FuJ3QgY2xvbmVOb2RlIGZyYWdtZW50cyB0aGF0IGNvbnRhaW4gY2hlY2tlZCwgaW4gV2ViS2l0XG5cdGlmICggdmFsdWVJc0Z1bmN0aW9uIHx8XG5cdFx0XHQoIGwgPiAxICYmIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJlxuXHRcdFx0XHQhc3VwcG9ydC5jaGVja0Nsb25lICYmIHJjaGVja2VkLnRlc3QoIHZhbHVlICkgKSApIHtcblx0XHRyZXR1cm4gY29sbGVjdGlvbi5lYWNoKCBmdW5jdGlvbiggaW5kZXggKSB7XG5cdFx0XHR2YXIgc2VsZiA9IGNvbGxlY3Rpb24uZXEoIGluZGV4ICk7XG5cdFx0XHRpZiAoIHZhbHVlSXNGdW5jdGlvbiApIHtcblx0XHRcdFx0YXJnc1sgMCBdID0gdmFsdWUuY2FsbCggdGhpcywgaW5kZXgsIHNlbGYuaHRtbCgpICk7XG5cdFx0XHR9XG5cdFx0XHRkb21NYW5pcCggc2VsZiwgYXJncywgY2FsbGJhY2ssIGlnbm9yZWQgKTtcblx0XHR9ICk7XG5cdH1cblxuXHRpZiAoIGwgKSB7XG5cdFx0ZnJhZ21lbnQgPSBidWlsZEZyYWdtZW50KCBhcmdzLCBjb2xsZWN0aW9uWyAwIF0ub3duZXJEb2N1bWVudCwgZmFsc2UsIGNvbGxlY3Rpb24sIGlnbm9yZWQgKTtcblx0XHRmaXJzdCA9IGZyYWdtZW50LmZpcnN0Q2hpbGQ7XG5cblx0XHRpZiAoIGZyYWdtZW50LmNoaWxkTm9kZXMubGVuZ3RoID09PSAxICkge1xuXHRcdFx0ZnJhZ21lbnQgPSBmaXJzdDtcblx0XHR9XG5cblx0XHQvLyBSZXF1aXJlIGVpdGhlciBuZXcgY29udGVudCBvciBhbiBpbnRlcmVzdCBpbiBpZ25vcmVkIGVsZW1lbnRzIHRvIGludm9rZSB0aGUgY2FsbGJhY2tcblx0XHRpZiAoIGZpcnN0IHx8IGlnbm9yZWQgKSB7XG5cdFx0XHRzY3JpcHRzID0galF1ZXJ5Lm1hcCggZ2V0QWxsKCBmcmFnbWVudCwgXCJzY3JpcHRcIiApLCBkaXNhYmxlU2NyaXB0ICk7XG5cdFx0XHRoYXNTY3JpcHRzID0gc2NyaXB0cy5sZW5ndGg7XG5cblx0XHRcdC8vIFVzZSB0aGUgb3JpZ2luYWwgZnJhZ21lbnQgZm9yIHRoZSBsYXN0IGl0ZW1cblx0XHRcdC8vIGluc3RlYWQgb2YgdGhlIGZpcnN0IGJlY2F1c2UgaXQgY2FuIGVuZCB1cFxuXHRcdFx0Ly8gYmVpbmcgZW1wdGllZCBpbmNvcnJlY3RseSBpbiBjZXJ0YWluIHNpdHVhdGlvbnMgKCM4MDcwKS5cblx0XHRcdGZvciAoIDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0bm9kZSA9IGZyYWdtZW50O1xuXG5cdFx0XHRcdGlmICggaSAhPT0gaU5vQ2xvbmUgKSB7XG5cdFx0XHRcdFx0bm9kZSA9IGpRdWVyeS5jbG9uZSggbm9kZSwgdHJ1ZSwgdHJ1ZSApO1xuXG5cdFx0XHRcdFx0Ly8gS2VlcCByZWZlcmVuY2VzIHRvIGNsb25lZCBzY3JpcHRzIGZvciBsYXRlciByZXN0b3JhdGlvblxuXHRcdFx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblxuXHRcdFx0XHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHRcdFx0XHQvLyBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRcdFx0XHRqUXVlcnkubWVyZ2UoIHNjcmlwdHMsIGdldEFsbCggbm9kZSwgXCJzY3JpcHRcIiApICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cblx0XHRcdFx0Y2FsbGJhY2suY2FsbCggY29sbGVjdGlvblsgaSBdLCBub2RlLCBpICk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaGFzU2NyaXB0cyApIHtcblx0XHRcdFx0ZG9jID0gc2NyaXB0c1sgc2NyaXB0cy5sZW5ndGggLSAxIF0ub3duZXJEb2N1bWVudDtcblxuXHRcdFx0XHQvLyBSZWVuYWJsZSBzY3JpcHRzXG5cdFx0XHRcdGpRdWVyeS5tYXAoIHNjcmlwdHMsIHJlc3RvcmVTY3JpcHQgKTtcblxuXHRcdFx0XHQvLyBFdmFsdWF0ZSBleGVjdXRhYmxlIHNjcmlwdHMgb24gZmlyc3QgZG9jdW1lbnQgaW5zZXJ0aW9uXG5cdFx0XHRcdGZvciAoIGkgPSAwOyBpIDwgaGFzU2NyaXB0czsgaSsrICkge1xuXHRcdFx0XHRcdG5vZGUgPSBzY3JpcHRzWyBpIF07XG5cdFx0XHRcdFx0aWYgKCByc2NyaXB0VHlwZS50ZXN0KCBub2RlLnR5cGUgfHwgXCJcIiApICYmXG5cdFx0XHRcdFx0XHQhZGF0YVByaXYuYWNjZXNzKCBub2RlLCBcImdsb2JhbEV2YWxcIiApICYmXG5cdFx0XHRcdFx0XHRqUXVlcnkuY29udGFpbnMoIGRvYywgbm9kZSApICkge1xuXG5cdFx0XHRcdFx0XHRpZiAoIG5vZGUuc3JjICYmICggbm9kZS50eXBlIHx8IFwiXCIgKS50b0xvd2VyQ2FzZSgpICAhPT0gXCJtb2R1bGVcIiApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBPcHRpb25hbCBBSkFYIGRlcGVuZGVuY3ksIGJ1dCB3b24ndCBydW4gc2NyaXB0cyBpZiBub3QgcHJlc2VudFxuXHRcdFx0XHRcdFx0XHRpZiAoIGpRdWVyeS5fZXZhbFVybCAmJiAhbm9kZS5ub01vZHVsZSApIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkuX2V2YWxVcmwoIG5vZGUuc3JjLCB7XG5cdFx0XHRcdFx0XHRcdFx0XHRub25jZTogbm9kZS5ub25jZSB8fCBub2RlLmdldEF0dHJpYnV0ZSggXCJub25jZVwiIClcblx0XHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdERPTUV2YWwoIG5vZGUudGV4dENvbnRlbnQucmVwbGFjZSggcmNsZWFuU2NyaXB0LCBcIlwiICksIG5vZGUsIGRvYyApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiBjb2xsZWN0aW9uO1xufVxuXG5mdW5jdGlvbiByZW1vdmUoIGVsZW0sIHNlbGVjdG9yLCBrZWVwRGF0YSApIHtcblx0dmFyIG5vZGUsXG5cdFx0bm9kZXMgPSBzZWxlY3RvciA/IGpRdWVyeS5maWx0ZXIoIHNlbGVjdG9yLCBlbGVtICkgOiBlbGVtLFxuXHRcdGkgPSAwO1xuXG5cdGZvciAoIDsgKCBub2RlID0gbm9kZXNbIGkgXSApICE9IG51bGw7IGkrKyApIHtcblx0XHRpZiAoICFrZWVwRGF0YSAmJiBub2RlLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBub2RlICkgKTtcblx0XHR9XG5cblx0XHRpZiAoIG5vZGUucGFyZW50Tm9kZSApIHtcblx0XHRcdGlmICgga2VlcERhdGEgJiYgaXNBdHRhY2hlZCggbm9kZSApICkge1xuXHRcdFx0XHRzZXRHbG9iYWxFdmFsKCBnZXRBbGwoIG5vZGUsIFwic2NyaXB0XCIgKSApO1xuXHRcdFx0fVxuXHRcdFx0bm9kZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKCBub2RlICk7XG5cdFx0fVxuXHR9XG5cblx0cmV0dXJuIGVsZW07XG59XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0aHRtbFByZWZpbHRlcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0cmV0dXJuIGh0bWwucmVwbGFjZSggcnhodG1sVGFnLCBcIjwkMT48LyQyPlwiICk7XG5cdH0sXG5cblx0Y2xvbmU6IGZ1bmN0aW9uKCBlbGVtLCBkYXRhQW5kRXZlbnRzLCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHR2YXIgaSwgbCwgc3JjRWxlbWVudHMsIGRlc3RFbGVtZW50cyxcblx0XHRcdGNsb25lID0gZWxlbS5jbG9uZU5vZGUoIHRydWUgKSxcblx0XHRcdGluUGFnZSA9IGlzQXR0YWNoZWQoIGVsZW0gKTtcblxuXHRcdC8vIEZpeCBJRSBjbG9uaW5nIGlzc3Vlc1xuXHRcdGlmICggIXN1cHBvcnQubm9DbG9uZUNoZWNrZWQgJiYgKCBlbGVtLm5vZGVUeXBlID09PSAxIHx8IGVsZW0ubm9kZVR5cGUgPT09IDExICkgJiZcblx0XHRcdFx0IWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXG5cdFx0XHQvLyBXZSBlc2NoZXcgU2l6emxlIGhlcmUgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM6IGh0dHBzOi8vanNwZXJmLmNvbS9nZXRhbGwtdnMtc2l6emxlLzJcblx0XHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUgKTtcblx0XHRcdHNyY0VsZW1lbnRzID0gZ2V0QWxsKCBlbGVtICk7XG5cblx0XHRcdGZvciAoIGkgPSAwLCBsID0gc3JjRWxlbWVudHMubGVuZ3RoOyBpIDwgbDsgaSsrICkge1xuXHRcdFx0XHRmaXhJbnB1dCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb3B5IHRoZSBldmVudHMgZnJvbSB0aGUgb3JpZ2luYWwgdG8gdGhlIGNsb25lXG5cdFx0aWYgKCBkYXRhQW5kRXZlbnRzICkge1xuXHRcdFx0aWYgKCBkZWVwRGF0YUFuZEV2ZW50cyApIHtcblx0XHRcdFx0c3JjRWxlbWVudHMgPSBzcmNFbGVtZW50cyB8fCBnZXRBbGwoIGVsZW0gKTtcblx0XHRcdFx0ZGVzdEVsZW1lbnRzID0gZGVzdEVsZW1lbnRzIHx8IGdldEFsbCggY2xvbmUgKTtcblxuXHRcdFx0XHRmb3IgKCBpID0gMCwgbCA9IHNyY0VsZW1lbnRzLmxlbmd0aDsgaSA8IGw7IGkrKyApIHtcblx0XHRcdFx0XHRjbG9uZUNvcHlFdmVudCggc3JjRWxlbWVudHNbIGkgXSwgZGVzdEVsZW1lbnRzWyBpIF0gKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Y2xvbmVDb3B5RXZlbnQoIGVsZW0sIGNsb25lICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUHJlc2VydmUgc2NyaXB0IGV2YWx1YXRpb24gaGlzdG9yeVxuXHRcdGRlc3RFbGVtZW50cyA9IGdldEFsbCggY2xvbmUsIFwic2NyaXB0XCIgKTtcblx0XHRpZiAoIGRlc3RFbGVtZW50cy5sZW5ndGggPiAwICkge1xuXHRcdFx0c2V0R2xvYmFsRXZhbCggZGVzdEVsZW1lbnRzLCAhaW5QYWdlICYmIGdldEFsbCggZWxlbSwgXCJzY3JpcHRcIiApICk7XG5cdFx0fVxuXG5cdFx0Ly8gUmV0dXJuIHRoZSBjbG9uZWQgc2V0XG5cdFx0cmV0dXJuIGNsb25lO1xuXHR9LFxuXG5cdGNsZWFuRGF0YTogZnVuY3Rpb24oIGVsZW1zICkge1xuXHRcdHZhciBkYXRhLCBlbGVtLCB0eXBlLFxuXHRcdFx0c3BlY2lhbCA9IGpRdWVyeS5ldmVudC5zcGVjaWFsLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7ICggZWxlbSA9IGVsZW1zWyBpIF0gKSAhPT0gdW5kZWZpbmVkOyBpKysgKSB7XG5cdFx0XHRpZiAoIGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblx0XHRcdFx0aWYgKCAoIGRhdGEgPSBlbGVtWyBkYXRhUHJpdi5leHBhbmRvIF0gKSApIHtcblx0XHRcdFx0XHRpZiAoIGRhdGEuZXZlbnRzICkge1xuXHRcdFx0XHRcdFx0Zm9yICggdHlwZSBpbiBkYXRhLmV2ZW50cyApIHtcblx0XHRcdFx0XHRcdFx0aWYgKCBzcGVjaWFsWyB0eXBlIF0gKSB7XG5cdFx0XHRcdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnJlbW92ZSggZWxlbSwgdHlwZSApO1xuXG5cdFx0XHRcdFx0XHRcdC8vIFRoaXMgaXMgYSBzaG9ydGN1dCB0byBhdm9pZCBqUXVlcnkuZXZlbnQucmVtb3ZlJ3Mgb3ZlcmhlYWRcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRqUXVlcnkucmVtb3ZlRXZlbnQoIGVsZW0sIHR5cGUsIGRhdGEuaGFuZGxlICk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBDaHJvbWUgPD0zNSAtIDQ1K1xuXHRcdFx0XHRcdC8vIEFzc2lnbiB1bmRlZmluZWQgaW5zdGVhZCBvZiB1c2luZyBkZWxldGUsIHNlZSBEYXRhI3JlbW92ZVxuXHRcdFx0XHRcdGVsZW1bIGRhdGFQcml2LmV4cGFuZG8gXSA9IHVuZGVmaW5lZDtcblx0XHRcdFx0fVxuXHRcdFx0XHRpZiAoIGVsZW1bIGRhdGFVc2VyLmV4cGFuZG8gXSApIHtcblxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PTM1IC0gNDUrXG5cdFx0XHRcdFx0Ly8gQXNzaWduIHVuZGVmaW5lZCBpbnN0ZWFkIG9mIHVzaW5nIGRlbGV0ZSwgc2VlIERhdGEjcmVtb3ZlXG5cdFx0XHRcdFx0ZWxlbVsgZGF0YVVzZXIuZXhwYW5kbyBdID0gdW5kZWZpbmVkO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0ZGV0YWNoOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0cmV0dXJuIHJlbW92ZSggdGhpcywgc2VsZWN0b3IsIHRydWUgKTtcblx0fSxcblxuXHRyZW1vdmU6IGZ1bmN0aW9uKCBzZWxlY3RvciApIHtcblx0XHRyZXR1cm4gcmVtb3ZlKCB0aGlzLCBzZWxlY3RvciApO1xuXHR9LFxuXG5cdHRleHQ6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRyZXR1cm4gYWNjZXNzKCB0aGlzLCBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/XG5cdFx0XHRcdGpRdWVyeS50ZXh0KCB0aGlzICkgOlxuXHRcdFx0XHR0aGlzLmVtcHR5KCkuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0aWYgKCB0aGlzLm5vZGVUeXBlID09PSAxIHx8IHRoaXMubm9kZVR5cGUgPT09IDExIHx8IHRoaXMubm9kZVR5cGUgPT09IDkgKSB7XG5cdFx0XHRcdFx0XHR0aGlzLnRleHRDb250ZW50ID0gdmFsdWU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9ICk7XG5cdFx0fSwgbnVsbCwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fSxcblxuXHRhcHBlbmQ6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5ub2RlVHlwZSA9PT0gMSB8fCB0aGlzLm5vZGVUeXBlID09PSAxMSB8fCB0aGlzLm5vZGVUeXBlID09PSA5ICkge1xuXHRcdFx0XHR2YXIgdGFyZ2V0ID0gbWFuaXB1bGF0aW9uVGFyZ2V0KCB0aGlzLCBlbGVtICk7XG5cdFx0XHRcdHRhcmdldC5hcHBlbmRDaGlsZCggZWxlbSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRwcmVwZW5kOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgPT09IDEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gMTEgfHwgdGhpcy5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0dmFyIHRhcmdldCA9IG1hbmlwdWxhdGlvblRhcmdldCggdGhpcywgZWxlbSApO1xuXHRcdFx0XHR0YXJnZXQuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0YXJnZXQuZmlyc3RDaGlsZCApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRiZWZvcmU6IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBkb21NYW5pcCggdGhpcywgYXJndW1lbnRzLCBmdW5jdGlvbiggZWxlbSApIHtcblx0XHRcdGlmICggdGhpcy5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR0aGlzLnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKCBlbGVtLCB0aGlzICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGFmdGVyOiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHRpZiAoIHRoaXMucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0dGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZSggZWxlbSwgdGhpcy5uZXh0U2libGluZyApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblxuXHRlbXB0eTogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGVsZW0sXG5cdFx0XHRpID0gMDtcblxuXHRcdGZvciAoIDsgKCBlbGVtID0gdGhpc1sgaSBdICkgIT0gbnVsbDsgaSsrICkge1xuXHRcdFx0aWYgKCBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXG5cdFx0XHRcdC8vIFByZXZlbnQgbWVtb3J5IGxlYWtzXG5cdFx0XHRcdGpRdWVyeS5jbGVhbkRhdGEoIGdldEFsbCggZWxlbSwgZmFsc2UgKSApO1xuXG5cdFx0XHRcdC8vIFJlbW92ZSBhbnkgcmVtYWluaW5nIG5vZGVzXG5cdFx0XHRcdGVsZW0udGV4dENvbnRlbnQgPSBcIlwiO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdGNsb25lOiBmdW5jdGlvbiggZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKSB7XG5cdFx0ZGF0YUFuZEV2ZW50cyA9IGRhdGFBbmRFdmVudHMgPT0gbnVsbCA/IGZhbHNlIDogZGF0YUFuZEV2ZW50cztcblx0XHRkZWVwRGF0YUFuZEV2ZW50cyA9IGRlZXBEYXRhQW5kRXZlbnRzID09IG51bGwgPyBkYXRhQW5kRXZlbnRzIDogZGVlcERhdGFBbmRFdmVudHM7XG5cblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXHRcdFx0cmV0dXJuIGpRdWVyeS5jbG9uZSggdGhpcywgZGF0YUFuZEV2ZW50cywgZGVlcERhdGFBbmRFdmVudHMgKTtcblx0XHR9ICk7XG5cdH0sXG5cblx0aHRtbDogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdHZhciBlbGVtID0gdGhpc1sgMCBdIHx8IHt9LFxuXHRcdFx0XHRpID0gMCxcblx0XHRcdFx0bCA9IHRoaXMubGVuZ3RoO1xuXG5cdFx0XHRpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgJiYgZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0cmV0dXJuIGVsZW0uaW5uZXJIVE1MO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZWUgaWYgd2UgY2FuIHRha2UgYSBzaG9ydGN1dCBhbmQganVzdCB1c2UgaW5uZXJIVE1MXG5cdFx0XHRpZiAoIHR5cGVvZiB2YWx1ZSA9PT0gXCJzdHJpbmdcIiAmJiAhcm5vSW5uZXJodG1sLnRlc3QoIHZhbHVlICkgJiZcblx0XHRcdFx0IXdyYXBNYXBbICggcnRhZ05hbWUuZXhlYyggdmFsdWUgKSB8fCBbIFwiXCIsIFwiXCIgXSApWyAxIF0udG9Mb3dlckNhc2UoKSBdICkge1xuXG5cdFx0XHRcdHZhbHVlID0galF1ZXJ5Lmh0bWxQcmVmaWx0ZXIoIHZhbHVlICk7XG5cblx0XHRcdFx0dHJ5IHtcblx0XHRcdFx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHRcdFx0XHRlbGVtID0gdGhpc1sgaSBdIHx8IHt9O1xuXG5cdFx0XHRcdFx0XHQvLyBSZW1vdmUgZWxlbWVudCBub2RlcyBhbmQgcHJldmVudCBtZW1vcnkgbGVha3Ncblx0XHRcdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSApIHtcblx0XHRcdFx0XHRcdFx0alF1ZXJ5LmNsZWFuRGF0YSggZ2V0QWxsKCBlbGVtLCBmYWxzZSApICk7XG5cdFx0XHRcdFx0XHRcdGVsZW0uaW5uZXJIVE1MID0gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZWxlbSA9IDA7XG5cblx0XHRcdFx0Ly8gSWYgdXNpbmcgaW5uZXJIVE1MIHRocm93cyBhbiBleGNlcHRpb24sIHVzZSB0aGUgZmFsbGJhY2sgbWV0aG9kXG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge31cblx0XHRcdH1cblxuXHRcdFx0aWYgKCBlbGVtICkge1xuXHRcdFx0XHR0aGlzLmVtcHR5KCkuYXBwZW5kKCB2YWx1ZSApO1xuXHRcdFx0fVxuXHRcdH0sIG51bGwsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoICk7XG5cdH0sXG5cblx0cmVwbGFjZVdpdGg6IGZ1bmN0aW9uKCkge1xuXHRcdHZhciBpZ25vcmVkID0gW107XG5cblx0XHQvLyBNYWtlIHRoZSBjaGFuZ2VzLCByZXBsYWNpbmcgZWFjaCBub24taWdub3JlZCBjb250ZXh0IGVsZW1lbnQgd2l0aCB0aGUgbmV3IGNvbnRlbnRcblx0XHRyZXR1cm4gZG9tTWFuaXAoIHRoaXMsIGFyZ3VtZW50cywgZnVuY3Rpb24oIGVsZW0gKSB7XG5cdFx0XHR2YXIgcGFyZW50ID0gdGhpcy5wYXJlbnROb2RlO1xuXG5cdFx0XHRpZiAoIGpRdWVyeS5pbkFycmF5KCB0aGlzLCBpZ25vcmVkICkgPCAwICkge1xuXHRcdFx0XHRqUXVlcnkuY2xlYW5EYXRhKCBnZXRBbGwoIHRoaXMgKSApO1xuXHRcdFx0XHRpZiAoIHBhcmVudCApIHtcblx0XHRcdFx0XHRwYXJlbnQucmVwbGFjZUNoaWxkKCBlbGVtLCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdC8vIEZvcmNlIGNhbGxiYWNrIGludm9jYXRpb25cblx0XHR9LCBpZ25vcmVkICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIHtcblx0YXBwZW5kVG86IFwiYXBwZW5kXCIsXG5cdHByZXBlbmRUbzogXCJwcmVwZW5kXCIsXG5cdGluc2VydEJlZm9yZTogXCJiZWZvcmVcIixcblx0aW5zZXJ0QWZ0ZXI6IFwiYWZ0ZXJcIixcblx0cmVwbGFjZUFsbDogXCJyZXBsYWNlV2l0aFwiXG59LCBmdW5jdGlvbiggbmFtZSwgb3JpZ2luYWwgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNlbGVjdG9yICkge1xuXHRcdHZhciBlbGVtcyxcblx0XHRcdHJldCA9IFtdLFxuXHRcdFx0aW5zZXJ0ID0galF1ZXJ5KCBzZWxlY3RvciApLFxuXHRcdFx0bGFzdCA9IGluc2VydC5sZW5ndGggLSAxLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRmb3IgKCA7IGkgPD0gbGFzdDsgaSsrICkge1xuXHRcdFx0ZWxlbXMgPSBpID09PSBsYXN0ID8gdGhpcyA6IHRoaXMuY2xvbmUoIHRydWUgKTtcblx0XHRcdGpRdWVyeSggaW5zZXJ0WyBpIF0gKVsgb3JpZ2luYWwgXSggZWxlbXMgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA8PTQuMCBvbmx5LCBQaGFudG9tSlMgMSBvbmx5XG5cdFx0XHQvLyAuZ2V0KCkgYmVjYXVzZSBwdXNoLmFwcGx5KF8sIGFycmF5bGlrZSkgdGhyb3dzIG9uIGFuY2llbnQgV2ViS2l0XG5cdFx0XHRwdXNoLmFwcGx5KCByZXQsIGVsZW1zLmdldCgpICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMucHVzaFN0YWNrKCByZXQgKTtcblx0fTtcbn0gKTtcbnZhciBybnVtbm9ucHggPSBuZXcgUmVnRXhwKCBcIl4oXCIgKyBwbnVtICsgXCIpKD8hcHgpW2EteiVdKyRcIiwgXCJpXCIgKTtcblxudmFyIGdldFN0eWxlcyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5LCBGaXJlZm94IDw9MzAgKCMxNTA5OCwgIzE0MTUwKVxuXHRcdC8vIElFIHRocm93cyBvbiBlbGVtZW50cyBjcmVhdGVkIGluIHBvcHVwc1xuXHRcdC8vIEZGIG1lYW53aGlsZSB0aHJvd3Mgb24gZnJhbWUgZWxlbWVudHMgdGhyb3VnaCBcImRlZmF1bHRWaWV3LmdldENvbXB1dGVkU3R5bGVcIlxuXHRcdHZhciB2aWV3ID0gZWxlbS5vd25lckRvY3VtZW50LmRlZmF1bHRWaWV3O1xuXG5cdFx0aWYgKCAhdmlldyB8fCAhdmlldy5vcGVuZXIgKSB7XG5cdFx0XHR2aWV3ID0gd2luZG93O1xuXHRcdH1cblxuXHRcdHJldHVybiB2aWV3LmdldENvbXB1dGVkU3R5bGUoIGVsZW0gKTtcblx0fTtcblxudmFyIHJib3hTdHlsZSA9IG5ldyBSZWdFeHAoIGNzc0V4cGFuZC5qb2luKCBcInxcIiApLCBcImlcIiApO1xuXG5cblxuKCBmdW5jdGlvbigpIHtcblxuXHQvLyBFeGVjdXRpbmcgYm90aCBwaXhlbFBvc2l0aW9uICYgYm94U2l6aW5nUmVsaWFibGUgdGVzdHMgcmVxdWlyZSBvbmx5IG9uZSBsYXlvdXRcblx0Ly8gc28gdGhleSdyZSBleGVjdXRlZCBhdCB0aGUgc2FtZSB0aW1lIHRvIHNhdmUgdGhlIHNlY29uZCBjb21wdXRhdGlvbi5cblx0ZnVuY3Rpb24gY29tcHV0ZVN0eWxlVGVzdHMoKSB7XG5cblx0XHQvLyBUaGlzIGlzIGEgc2luZ2xldG9uLCB3ZSBuZWVkIHRvIGV4ZWN1dGUgaXQgb25seSBvbmNlXG5cdFx0aWYgKCAhZGl2ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGNvbnRhaW5lci5zdHlsZS5jc3NUZXh0ID0gXCJwb3NpdGlvbjphYnNvbHV0ZTtsZWZ0Oi0xMTExMXB4O3dpZHRoOjYwcHg7XCIgK1xuXHRcdFx0XCJtYXJnaW4tdG9wOjFweDtwYWRkaW5nOjA7Ym9yZGVyOjBcIjtcblx0XHRkaXYuc3R5bGUuY3NzVGV4dCA9XG5cdFx0XHRcInBvc2l0aW9uOnJlbGF0aXZlO2Rpc3BsYXk6YmxvY2s7Ym94LXNpemluZzpib3JkZXItYm94O292ZXJmbG93OnNjcm9sbDtcIiArXG5cdFx0XHRcIm1hcmdpbjphdXRvO2JvcmRlcjoxcHg7cGFkZGluZzoxcHg7XCIgK1xuXHRcdFx0XCJ3aWR0aDo2MCU7dG9wOjElXCI7XG5cdFx0ZG9jdW1lbnRFbGVtZW50LmFwcGVuZENoaWxkKCBjb250YWluZXIgKS5hcHBlbmRDaGlsZCggZGl2ICk7XG5cblx0XHR2YXIgZGl2U3R5bGUgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSggZGl2ICk7XG5cdFx0cGl4ZWxQb3NpdGlvblZhbCA9IGRpdlN0eWxlLnRvcCAhPT0gXCIxJVwiO1xuXG5cdFx0Ly8gU3VwcG9ydDogQW5kcm9pZCA0LjAgLSA0LjMgb25seSwgRmlyZWZveCA8PTMgLSA0NFxuXHRcdHJlbGlhYmxlTWFyZ2luTGVmdFZhbCA9IHJvdW5kUGl4ZWxNZWFzdXJlcyggZGl2U3R5bGUubWFyZ2luTGVmdCApID09PSAxMjtcblxuXHRcdC8vIFN1cHBvcnQ6IEFuZHJvaWQgNC4wIC0gNC4zIG9ubHksIFNhZmFyaSA8PTkuMSAtIDEwLjEsIGlPUyA8PTcuMCAtIDkuM1xuXHRcdC8vIFNvbWUgc3R5bGVzIGNvbWUgYmFjayB3aXRoIHBlcmNlbnRhZ2UgdmFsdWVzLCBldmVuIHRob3VnaCB0aGV5IHNob3VsZG4ndFxuXHRcdGRpdi5zdHlsZS5yaWdodCA9IFwiNjAlXCI7XG5cdFx0cGl4ZWxCb3hTdHlsZXNWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLnJpZ2h0ICkgPT09IDM2O1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSAtIDExIG9ubHlcblx0XHQvLyBEZXRlY3QgbWlzcmVwb3J0aW5nIG9mIGNvbnRlbnQgZGltZW5zaW9ucyBmb3IgYm94LXNpemluZzpib3JkZXItYm94IGVsZW1lbnRzXG5cdFx0Ym94U2l6aW5nUmVsaWFibGVWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdlN0eWxlLndpZHRoICkgPT09IDM2O1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgOSBvbmx5XG5cdFx0Ly8gRGV0ZWN0IG92ZXJmbG93OnNjcm9sbCBzY3Jld2luZXNzIChnaC0zNjk5KVxuXHRcdC8vIFN1cHBvcnQ6IENocm9tZSA8PTY0XG5cdFx0Ly8gRG9uJ3QgZ2V0IHRyaWNrZWQgd2hlbiB6b29tIGFmZmVjdHMgb2Zmc2V0V2lkdGggKGdoLTQwMjkpXG5cdFx0ZGl2LnN0eWxlLnBvc2l0aW9uID0gXCJhYnNvbHV0ZVwiO1xuXHRcdHNjcm9sbGJveFNpemVWYWwgPSByb3VuZFBpeGVsTWVhc3VyZXMoIGRpdi5vZmZzZXRXaWR0aCAvIDMgKSA9PT0gMTI7XG5cblx0XHRkb2N1bWVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoIGNvbnRhaW5lciApO1xuXG5cdFx0Ly8gTnVsbGlmeSB0aGUgZGl2IHNvIGl0IHdvdWxkbid0IGJlIHN0b3JlZCBpbiB0aGUgbWVtb3J5IGFuZFxuXHRcdC8vIGl0IHdpbGwgYWxzbyBiZSBhIHNpZ24gdGhhdCBjaGVja3MgYWxyZWFkeSBwZXJmb3JtZWRcblx0XHRkaXYgPSBudWxsO1xuXHR9XG5cblx0ZnVuY3Rpb24gcm91bmRQaXhlbE1lYXN1cmVzKCBtZWFzdXJlICkge1xuXHRcdHJldHVybiBNYXRoLnJvdW5kKCBwYXJzZUZsb2F0KCBtZWFzdXJlICkgKTtcblx0fVxuXG5cdHZhciBwaXhlbFBvc2l0aW9uVmFsLCBib3hTaXppbmdSZWxpYWJsZVZhbCwgc2Nyb2xsYm94U2l6ZVZhbCwgcGl4ZWxCb3hTdHlsZXNWYWwsXG5cdFx0cmVsaWFibGVNYXJnaW5MZWZ0VmFsLFxuXHRcdGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiZGl2XCIgKSxcblx0XHRkaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICk7XG5cblx0Ly8gRmluaXNoIGVhcmx5IGluIGxpbWl0ZWQgKG5vbi1icm93c2VyKSBlbnZpcm9ubWVudHNcblx0aWYgKCAhZGl2LnN0eWxlICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0Ly8gU3R5bGUgb2YgY2xvbmVkIGVsZW1lbnQgYWZmZWN0cyBzb3VyY2UgZWxlbWVudCBjbG9uZWQgKCM4OTA4KVxuXHRkaXYuc3R5bGUuYmFja2dyb3VuZENsaXAgPSBcImNvbnRlbnQtYm94XCI7XG5cdGRpdi5jbG9uZU5vZGUoIHRydWUgKS5zdHlsZS5iYWNrZ3JvdW5kQ2xpcCA9IFwiXCI7XG5cdHN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlID0gZGl2LnN0eWxlLmJhY2tncm91bmRDbGlwID09PSBcImNvbnRlbnQtYm94XCI7XG5cblx0alF1ZXJ5LmV4dGVuZCggc3VwcG9ydCwge1xuXHRcdGJveFNpemluZ1JlbGlhYmxlOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gYm94U2l6aW5nUmVsaWFibGVWYWw7XG5cdFx0fSxcblx0XHRwaXhlbEJveFN0eWxlczogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHBpeGVsQm94U3R5bGVzVmFsO1xuXHRcdH0sXG5cdFx0cGl4ZWxQb3NpdGlvbjogZnVuY3Rpb24oKSB7XG5cdFx0XHRjb21wdXRlU3R5bGVUZXN0cygpO1xuXHRcdFx0cmV0dXJuIHBpeGVsUG9zaXRpb25WYWw7XG5cdFx0fSxcblx0XHRyZWxpYWJsZU1hcmdpbkxlZnQ6IGZ1bmN0aW9uKCkge1xuXHRcdFx0Y29tcHV0ZVN0eWxlVGVzdHMoKTtcblx0XHRcdHJldHVybiByZWxpYWJsZU1hcmdpbkxlZnRWYWw7XG5cdFx0fSxcblx0XHRzY3JvbGxib3hTaXplOiBmdW5jdGlvbigpIHtcblx0XHRcdGNvbXB1dGVTdHlsZVRlc3RzKCk7XG5cdFx0XHRyZXR1cm4gc2Nyb2xsYm94U2l6ZVZhbDtcblx0XHR9XG5cdH0gKTtcbn0gKSgpO1xuXG5cbmZ1bmN0aW9uIGN1ckNTUyggZWxlbSwgbmFtZSwgY29tcHV0ZWQgKSB7XG5cdHZhciB3aWR0aCwgbWluV2lkdGgsIG1heFdpZHRoLCByZXQsXG5cblx0XHQvLyBTdXBwb3J0OiBGaXJlZm94IDUxK1xuXHRcdC8vIFJldHJpZXZpbmcgc3R5bGUgYmVmb3JlIGNvbXB1dGVkIHNvbWVob3dcblx0XHQvLyBmaXhlcyBhbiBpc3N1ZSB3aXRoIGdldHRpbmcgd3JvbmcgdmFsdWVzXG5cdFx0Ly8gb24gZGV0YWNoZWQgZWxlbWVudHNcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGU7XG5cblx0Y29tcHV0ZWQgPSBjb21wdXRlZCB8fCBnZXRTdHlsZXMoIGVsZW0gKTtcblxuXHQvLyBnZXRQcm9wZXJ0eVZhbHVlIGlzIG5lZWRlZCBmb3I6XG5cdC8vICAgLmNzcygnZmlsdGVyJykgKElFIDkgb25seSwgIzEyNTM3KVxuXHQvLyAgIC5jc3MoJy0tY3VzdG9tUHJvcGVydHkpICgjMzE0NClcblx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRyZXQgPSBjb21wdXRlZC5nZXRQcm9wZXJ0eVZhbHVlKCBuYW1lICkgfHwgY29tcHV0ZWRbIG5hbWUgXTtcblxuXHRcdGlmICggcmV0ID09PSBcIlwiICYmICFpc0F0dGFjaGVkKCBlbGVtICkgKSB7XG5cdFx0XHRyZXQgPSBqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUgKTtcblx0XHR9XG5cblx0XHQvLyBBIHRyaWJ1dGUgdG8gdGhlIFwiYXdlc29tZSBoYWNrIGJ5IERlYW4gRWR3YXJkc1wiXG5cdFx0Ly8gQW5kcm9pZCBCcm93c2VyIHJldHVybnMgcGVyY2VudGFnZSBmb3Igc29tZSB2YWx1ZXMsXG5cdFx0Ly8gYnV0IHdpZHRoIHNlZW1zIHRvIGJlIHJlbGlhYmx5IHBpeGVscy5cblx0XHQvLyBUaGlzIGlzIGFnYWluc3QgdGhlIENTU09NIGRyYWZ0IHNwZWM6XG5cdFx0Ly8gaHR0cHM6Ly9kcmFmdHMuY3Nzd2cub3JnL2Nzc29tLyNyZXNvbHZlZC12YWx1ZXNcblx0XHRpZiAoICFzdXBwb3J0LnBpeGVsQm94U3R5bGVzKCkgJiYgcm51bW5vbnB4LnRlc3QoIHJldCApICYmIHJib3hTdHlsZS50ZXN0KCBuYW1lICkgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBvcmlnaW5hbCB2YWx1ZXNcblx0XHRcdHdpZHRoID0gc3R5bGUud2lkdGg7XG5cdFx0XHRtaW5XaWR0aCA9IHN0eWxlLm1pbldpZHRoO1xuXHRcdFx0bWF4V2lkdGggPSBzdHlsZS5tYXhXaWR0aDtcblxuXHRcdFx0Ly8gUHV0IGluIHRoZSBuZXcgdmFsdWVzIHRvIGdldCBhIGNvbXB1dGVkIHZhbHVlIG91dFxuXHRcdFx0c3R5bGUubWluV2lkdGggPSBzdHlsZS5tYXhXaWR0aCA9IHN0eWxlLndpZHRoID0gcmV0O1xuXHRcdFx0cmV0ID0gY29tcHV0ZWQud2lkdGg7XG5cblx0XHRcdC8vIFJldmVydCB0aGUgY2hhbmdlZCB2YWx1ZXNcblx0XHRcdHN0eWxlLndpZHRoID0gd2lkdGg7XG5cdFx0XHRzdHlsZS5taW5XaWR0aCA9IG1pbldpZHRoO1xuXHRcdFx0c3R5bGUubWF4V2lkdGggPSBtYXhXaWR0aDtcblx0XHR9XG5cdH1cblxuXHRyZXR1cm4gcmV0ICE9PSB1bmRlZmluZWQgP1xuXG5cdFx0Ly8gU3VwcG9ydDogSUUgPD05IC0gMTEgb25seVxuXHRcdC8vIElFIHJldHVybnMgekluZGV4IHZhbHVlIGFzIGFuIGludGVnZXIuXG5cdFx0cmV0ICsgXCJcIiA6XG5cdFx0cmV0O1xufVxuXG5cbmZ1bmN0aW9uIGFkZEdldEhvb2tJZiggY29uZGl0aW9uRm4sIGhvb2tGbiApIHtcblxuXHQvLyBEZWZpbmUgdGhlIGhvb2ssIHdlJ2xsIGNoZWNrIG9uIHRoZSBmaXJzdCBydW4gaWYgaXQncyByZWFsbHkgbmVlZGVkLlxuXHRyZXR1cm4ge1xuXHRcdGdldDogZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIGNvbmRpdGlvbkZuKCkgKSB7XG5cblx0XHRcdFx0Ly8gSG9vayBub3QgbmVlZGVkIChvciBpdCdzIG5vdCBwb3NzaWJsZSB0byB1c2UgaXQgZHVlXG5cdFx0XHRcdC8vIHRvIG1pc3NpbmcgZGVwZW5kZW5jeSksIHJlbW92ZSBpdC5cblx0XHRcdFx0ZGVsZXRlIHRoaXMuZ2V0O1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEhvb2sgbmVlZGVkOyByZWRlZmluZSBpdCBzbyB0aGF0IHRoZSBzdXBwb3J0IHRlc3QgaXMgbm90IGV4ZWN1dGVkIGFnYWluLlxuXHRcdFx0cmV0dXJuICggdGhpcy5nZXQgPSBob29rRm4gKS5hcHBseSggdGhpcywgYXJndW1lbnRzICk7XG5cdFx0fVxuXHR9O1xufVxuXG5cbnZhciBjc3NQcmVmaXhlcyA9IFsgXCJXZWJraXRcIiwgXCJNb3pcIiwgXCJtc1wiIF0sXG5cdGVtcHR5U3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImRpdlwiICkuc3R5bGUsXG5cdHZlbmRvclByb3BzID0ge307XG5cbi8vIFJldHVybiBhIHZlbmRvci1wcmVmaXhlZCBwcm9wZXJ0eSBvciB1bmRlZmluZWRcbmZ1bmN0aW9uIHZlbmRvclByb3BOYW1lKCBuYW1lICkge1xuXG5cdC8vIENoZWNrIGZvciB2ZW5kb3IgcHJlZml4ZWQgbmFtZXNcblx0dmFyIGNhcE5hbWUgPSBuYW1lWyAwIF0udG9VcHBlckNhc2UoKSArIG5hbWUuc2xpY2UoIDEgKSxcblx0XHRpID0gY3NzUHJlZml4ZXMubGVuZ3RoO1xuXG5cdHdoaWxlICggaS0tICkge1xuXHRcdG5hbWUgPSBjc3NQcmVmaXhlc1sgaSBdICsgY2FwTmFtZTtcblx0XHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRcdHJldHVybiBuYW1lO1xuXHRcdH1cblx0fVxufVxuXG4vLyBSZXR1cm4gYSBwb3RlbnRpYWxseS1tYXBwZWQgalF1ZXJ5LmNzc1Byb3BzIG9yIHZlbmRvciBwcmVmaXhlZCBwcm9wZXJ0eVxuZnVuY3Rpb24gZmluYWxQcm9wTmFtZSggbmFtZSApIHtcblx0dmFyIGZpbmFsID0galF1ZXJ5LmNzc1Byb3BzWyBuYW1lIF0gfHwgdmVuZG9yUHJvcHNbIG5hbWUgXTtcblxuXHRpZiAoIGZpbmFsICkge1xuXHRcdHJldHVybiBmaW5hbDtcblx0fVxuXHRpZiAoIG5hbWUgaW4gZW1wdHlTdHlsZSApIHtcblx0XHRyZXR1cm4gbmFtZTtcblx0fVxuXHRyZXR1cm4gdmVuZG9yUHJvcHNbIG5hbWUgXSA9IHZlbmRvclByb3BOYW1lKCBuYW1lICkgfHwgbmFtZTtcbn1cblxuXG52YXJcblxuXHQvLyBTd2FwcGFibGUgaWYgZGlzcGxheSBpcyBub25lIG9yIHN0YXJ0cyB3aXRoIHRhYmxlXG5cdC8vIGV4Y2VwdCBcInRhYmxlXCIsIFwidGFibGUtY2VsbFwiLCBvciBcInRhYmxlLWNhcHRpb25cIlxuXHQvLyBTZWUgaGVyZSBmb3IgZGlzcGxheSB2YWx1ZXM6IGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvQ1NTL2Rpc3BsYXlcblx0cmRpc3BsYXlzd2FwID0gL14obm9uZXx0YWJsZSg/IS1jW2VhXSkuKykvLFxuXHRyY3VzdG9tUHJvcCA9IC9eLS0vLFxuXHRjc3NTaG93ID0geyBwb3NpdGlvbjogXCJhYnNvbHV0ZVwiLCB2aXNpYmlsaXR5OiBcImhpZGRlblwiLCBkaXNwbGF5OiBcImJsb2NrXCIgfSxcblx0Y3NzTm9ybWFsVHJhbnNmb3JtID0ge1xuXHRcdGxldHRlclNwYWNpbmc6IFwiMFwiLFxuXHRcdGZvbnRXZWlnaHQ6IFwiNDAwXCJcblx0fTtcblxuZnVuY3Rpb24gc2V0UG9zaXRpdmVOdW1iZXIoIGVsZW0sIHZhbHVlLCBzdWJ0cmFjdCApIHtcblxuXHQvLyBBbnkgcmVsYXRpdmUgKCsvLSkgdmFsdWVzIGhhdmUgYWxyZWFkeSBiZWVuXG5cdC8vIG5vcm1hbGl6ZWQgYXQgdGhpcyBwb2ludFxuXHR2YXIgbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKTtcblx0cmV0dXJuIG1hdGNoZXMgP1xuXG5cdFx0Ly8gR3VhcmQgYWdhaW5zdCB1bmRlZmluZWQgXCJzdWJ0cmFjdFwiLCBlLmcuLCB3aGVuIHVzZWQgYXMgaW4gY3NzSG9va3Ncblx0XHRNYXRoLm1heCggMCwgbWF0Y2hlc1sgMiBdIC0gKCBzdWJ0cmFjdCB8fCAwICkgKSArICggbWF0Y2hlc1sgMyBdIHx8IFwicHhcIiApIDpcblx0XHR2YWx1ZTtcbn1cblxuZnVuY3Rpb24gYm94TW9kZWxBZGp1c3RtZW50KCBlbGVtLCBkaW1lbnNpb24sIGJveCwgaXNCb3JkZXJCb3gsIHN0eWxlcywgY29tcHV0ZWRWYWwgKSB7XG5cdHZhciBpID0gZGltZW5zaW9uID09PSBcIndpZHRoXCIgPyAxIDogMCxcblx0XHRleHRyYSA9IDAsXG5cdFx0ZGVsdGEgPSAwO1xuXG5cdC8vIEFkanVzdG1lbnQgbWF5IG5vdCBiZSBuZWNlc3Nhcnlcblx0aWYgKCBib3ggPT09ICggaXNCb3JkZXJCb3ggPyBcImJvcmRlclwiIDogXCJjb250ZW50XCIgKSApIHtcblx0XHRyZXR1cm4gMDtcblx0fVxuXG5cdGZvciAoIDsgaSA8IDQ7IGkgKz0gMiApIHtcblxuXHRcdC8vIEJvdGggYm94IG1vZGVscyBleGNsdWRlIG1hcmdpblxuXHRcdGlmICggYm94ID09PSBcIm1hcmdpblwiICkge1xuXHRcdFx0ZGVsdGEgKz0galF1ZXJ5LmNzcyggZWxlbSwgYm94ICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdH1cblxuXHRcdC8vIElmIHdlIGdldCBoZXJlIHdpdGggYSBjb250ZW50LWJveCwgd2UncmUgc2Vla2luZyBcInBhZGRpbmdcIiBvciBcImJvcmRlclwiIG9yIFwibWFyZ2luXCJcblx0XHRpZiAoICFpc0JvcmRlckJveCApIHtcblxuXHRcdFx0Ly8gQWRkIHBhZGRpbmdcblx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXG5cdFx0XHQvLyBGb3IgXCJib3JkZXJcIiBvciBcIm1hcmdpblwiLCBhZGQgYm9yZGVyXG5cdFx0XHRpZiAoIGJveCAhPT0gXCJwYWRkaW5nXCIgKSB7XG5cdFx0XHRcdGRlbHRhICs9IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cblx0XHRcdC8vIEJ1dCBzdGlsbCBrZWVwIHRyYWNrIG9mIGl0IG90aGVyd2lzZVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZXh0cmEgKz0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3JkZXJcIiArIGNzc0V4cGFuZFsgaSBdICsgXCJXaWR0aFwiLCB0cnVlLCBzdHlsZXMgKTtcblx0XHRcdH1cblxuXHRcdC8vIElmIHdlIGdldCBoZXJlIHdpdGggYSBib3JkZXItYm94IChjb250ZW50ICsgcGFkZGluZyArIGJvcmRlciksIHdlJ3JlIHNlZWtpbmcgXCJjb250ZW50XCIgb3Jcblx0XHQvLyBcInBhZGRpbmdcIiBvciBcIm1hcmdpblwiXG5cdFx0fSBlbHNlIHtcblxuXHRcdFx0Ly8gRm9yIFwiY29udGVudFwiLCBzdWJ0cmFjdCBwYWRkaW5nXG5cdFx0XHRpZiAoIGJveCA9PT0gXCJjb250ZW50XCIgKSB7XG5cdFx0XHRcdGRlbHRhIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwicGFkZGluZ1wiICsgY3NzRXhwYW5kWyBpIF0sIHRydWUsIHN0eWxlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBGb3IgXCJjb250ZW50XCIgb3IgXCJwYWRkaW5nXCIsIHN1YnRyYWN0IGJvcmRlclxuXHRcdFx0aWYgKCBib3ggIT09IFwibWFyZ2luXCIgKSB7XG5cdFx0XHRcdGRlbHRhIC09IGpRdWVyeS5jc3MoIGVsZW0sIFwiYm9yZGVyXCIgKyBjc3NFeHBhbmRbIGkgXSArIFwiV2lkdGhcIiwgdHJ1ZSwgc3R5bGVzICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQWNjb3VudCBmb3IgcG9zaXRpdmUgY29udGVudC1ib3ggc2Nyb2xsIGd1dHRlciB3aGVuIHJlcXVlc3RlZCBieSBwcm92aWRpbmcgY29tcHV0ZWRWYWxcblx0aWYgKCAhaXNCb3JkZXJCb3ggJiYgY29tcHV0ZWRWYWwgPj0gMCApIHtcblxuXHRcdC8vIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBpcyBhIHJvdW5kZWQgc3VtIG9mIGNvbnRlbnQsIHBhZGRpbmcsIHNjcm9sbCBndXR0ZXIsIGFuZCBib3JkZXJcblx0XHQvLyBBc3N1bWluZyBpbnRlZ2VyIHNjcm9sbCBndXR0ZXIsIHN1YnRyYWN0IHRoZSByZXN0IGFuZCByb3VuZCBkb3duXG5cdFx0ZGVsdGEgKz0gTWF0aC5tYXgoIDAsIE1hdGguY2VpbChcblx0XHRcdGVsZW1bIFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICkgXSAtXG5cdFx0XHRjb21wdXRlZFZhbCAtXG5cdFx0XHRkZWx0YSAtXG5cdFx0XHRleHRyYSAtXG5cdFx0XHQwLjVcblxuXHRcdC8vIElmIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBpcyB1bmtub3duLCB0aGVuIHdlIGNhbid0IGRldGVybWluZSBjb250ZW50LWJveCBzY3JvbGwgZ3V0dGVyXG5cdFx0Ly8gVXNlIGFuIGV4cGxpY2l0IHplcm8gdG8gYXZvaWQgTmFOIChnaC0zOTY0KVxuXHRcdCkgKSB8fCAwO1xuXHR9XG5cblx0cmV0dXJuIGRlbHRhO1xufVxuXG5mdW5jdGlvbiBnZXRXaWR0aE9ySGVpZ2h0KCBlbGVtLCBkaW1lbnNpb24sIGV4dHJhICkge1xuXG5cdC8vIFN0YXJ0IHdpdGggY29tcHV0ZWQgc3R5bGVcblx0dmFyIHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLFxuXG5cdFx0Ly8gVG8gYXZvaWQgZm9yY2luZyBhIHJlZmxvdywgb25seSBmZXRjaCBib3hTaXppbmcgaWYgd2UgbmVlZCBpdCAoZ2gtNDMyMikuXG5cdFx0Ly8gRmFrZSBjb250ZW50LWJveCB1bnRpbCB3ZSBrbm93IGl0J3MgbmVlZGVkIHRvIGtub3cgdGhlIHRydWUgdmFsdWUuXG5cdFx0Ym94U2l6aW5nTmVlZGVkID0gIXN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSB8fCBleHRyYSxcblx0XHRpc0JvcmRlckJveCA9IGJveFNpemluZ05lZWRlZCAmJlxuXHRcdFx0alF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIixcblx0XHR2YWx1ZUlzQm9yZGVyQm94ID0gaXNCb3JkZXJCb3gsXG5cblx0XHR2YWwgPSBjdXJDU1MoIGVsZW0sIGRpbWVuc2lvbiwgc3R5bGVzICksXG5cdFx0b2Zmc2V0UHJvcCA9IFwib2Zmc2V0XCIgKyBkaW1lbnNpb25bIDAgXS50b1VwcGVyQ2FzZSgpICsgZGltZW5zaW9uLnNsaWNlKCAxICk7XG5cblx0Ly8gU3VwcG9ydDogRmlyZWZveCA8PTU0XG5cdC8vIFJldHVybiBhIGNvbmZvdW5kaW5nIG5vbi1waXhlbCB2YWx1ZSBvciBmZWlnbiBpZ25vcmFuY2UsIGFzIGFwcHJvcHJpYXRlLlxuXHRpZiAoIHJudW1ub25weC50ZXN0KCB2YWwgKSApIHtcblx0XHRpZiAoICFleHRyYSApIHtcblx0XHRcdHJldHVybiB2YWw7XG5cdFx0fVxuXHRcdHZhbCA9IFwiYXV0b1wiO1xuXHR9XG5cblxuXHQvLyBGYWxsIGJhY2sgdG8gb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IHdoZW4gdmFsdWUgaXMgXCJhdXRvXCJcblx0Ly8gVGhpcyBoYXBwZW5zIGZvciBpbmxpbmUgZWxlbWVudHMgd2l0aCBubyBleHBsaWNpdCBzZXR0aW5nIChnaC0zNTcxKVxuXHQvLyBTdXBwb3J0OiBBbmRyb2lkIDw9NC4xIC0gNC4zIG9ubHlcblx0Ly8gQWxzbyB1c2Ugb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGZvciBtaXNyZXBvcnRlZCBpbmxpbmUgZGltZW5zaW9ucyAoZ2gtMzYwMilcblx0Ly8gU3VwcG9ydDogSUUgOS0xMSBvbmx5XG5cdC8vIEFsc28gdXNlIG9mZnNldFdpZHRoL29mZnNldEhlaWdodCBmb3Igd2hlbiBib3ggc2l6aW5nIGlzIHVucmVsaWFibGVcblx0Ly8gV2UgdXNlIGdldENsaWVudFJlY3RzKCkgdG8gY2hlY2sgZm9yIGhpZGRlbi9kaXNjb25uZWN0ZWQuXG5cdC8vIEluIHRob3NlIGNhc2VzLCB0aGUgY29tcHV0ZWQgdmFsdWUgY2FuIGJlIHRydXN0ZWQgdG8gYmUgYm9yZGVyLWJveFxuXHRpZiAoICggIXN1cHBvcnQuYm94U2l6aW5nUmVsaWFibGUoKSAmJiBpc0JvcmRlckJveCB8fFxuXHRcdHZhbCA9PT0gXCJhdXRvXCIgfHxcblx0XHQhcGFyc2VGbG9hdCggdmFsICkgJiYgalF1ZXJ5LmNzcyggZWxlbSwgXCJkaXNwbGF5XCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJpbmxpbmVcIiApICYmXG5cdFx0ZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCApIHtcblxuXHRcdGlzQm9yZGVyQm94ID0galF1ZXJ5LmNzcyggZWxlbSwgXCJib3hTaXppbmdcIiwgZmFsc2UsIHN0eWxlcyApID09PSBcImJvcmRlci1ib3hcIjtcblxuXHRcdC8vIFdoZXJlIGF2YWlsYWJsZSwgb2Zmc2V0V2lkdGgvb2Zmc2V0SGVpZ2h0IGFwcHJveGltYXRlIGJvcmRlciBib3ggZGltZW5zaW9ucy5cblx0XHQvLyBXaGVyZSBub3QgYXZhaWxhYmxlIChlLmcuLCBTVkcpLCBhc3N1bWUgdW5yZWxpYWJsZSBib3gtc2l6aW5nIGFuZCBpbnRlcnByZXQgdGhlXG5cdFx0Ly8gcmV0cmlldmVkIHZhbHVlIGFzIGEgY29udGVudCBib3ggZGltZW5zaW9uLlxuXHRcdHZhbHVlSXNCb3JkZXJCb3ggPSBvZmZzZXRQcm9wIGluIGVsZW07XG5cdFx0aWYgKCB2YWx1ZUlzQm9yZGVyQm94ICkge1xuXHRcdFx0dmFsID0gZWxlbVsgb2Zmc2V0UHJvcCBdO1xuXHRcdH1cblx0fVxuXG5cdC8vIE5vcm1hbGl6ZSBcIlwiIGFuZCBhdXRvXG5cdHZhbCA9IHBhcnNlRmxvYXQoIHZhbCApIHx8IDA7XG5cblx0Ly8gQWRqdXN0IGZvciB0aGUgZWxlbWVudCdzIGJveCBtb2RlbFxuXHRyZXR1cm4gKCB2YWwgK1xuXHRcdGJveE1vZGVsQWRqdXN0bWVudChcblx0XHRcdGVsZW0sXG5cdFx0XHRkaW1lbnNpb24sXG5cdFx0XHRleHRyYSB8fCAoIGlzQm9yZGVyQm94ID8gXCJib3JkZXJcIiA6IFwiY29udGVudFwiICksXG5cdFx0XHR2YWx1ZUlzQm9yZGVyQm94LFxuXHRcdFx0c3R5bGVzLFxuXG5cdFx0XHQvLyBQcm92aWRlIHRoZSBjdXJyZW50IGNvbXB1dGVkIHNpemUgdG8gcmVxdWVzdCBzY3JvbGwgZ3V0dGVyIGNhbGN1bGF0aW9uIChnaC0zNTg5KVxuXHRcdFx0dmFsXG5cdFx0KVxuXHQpICsgXCJweFwiO1xufVxuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cblx0Ly8gQWRkIGluIHN0eWxlIHByb3BlcnR5IGhvb2tzIGZvciBvdmVycmlkaW5nIHRoZSBkZWZhdWx0XG5cdC8vIGJlaGF2aW9yIG9mIGdldHRpbmcgYW5kIHNldHRpbmcgYSBzdHlsZSBwcm9wZXJ0eVxuXHRjc3NIb29rczoge1xuXHRcdG9wYWNpdHk6IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdFx0Ly8gV2Ugc2hvdWxkIGFsd2F5cyBnZXQgYSBudW1iZXIgYmFjayBmcm9tIG9wYWNpdHlcblx0XHRcdFx0XHR2YXIgcmV0ID0gY3VyQ1NTKCBlbGVtLCBcIm9wYWNpdHlcIiApO1xuXHRcdFx0XHRcdHJldHVybiByZXQgPT09IFwiXCIgPyBcIjFcIiA6IHJldDtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fSxcblxuXHQvLyBEb24ndCBhdXRvbWF0aWNhbGx5IGFkZCBcInB4XCIgdG8gdGhlc2UgcG9zc2libHktdW5pdGxlc3MgcHJvcGVydGllc1xuXHRjc3NOdW1iZXI6IHtcblx0XHRcImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50XCI6IHRydWUsXG5cdFx0XCJjb2x1bW5Db3VudFwiOiB0cnVlLFxuXHRcdFwiZmlsbE9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcImZsZXhHcm93XCI6IHRydWUsXG5cdFx0XCJmbGV4U2hyaW5rXCI6IHRydWUsXG5cdFx0XCJmb250V2VpZ2h0XCI6IHRydWUsXG5cdFx0XCJncmlkQXJlYVwiOiB0cnVlLFxuXHRcdFwiZ3JpZENvbHVtblwiOiB0cnVlLFxuXHRcdFwiZ3JpZENvbHVtbkVuZFwiOiB0cnVlLFxuXHRcdFwiZ3JpZENvbHVtblN0YXJ0XCI6IHRydWUsXG5cdFx0XCJncmlkUm93XCI6IHRydWUsXG5cdFx0XCJncmlkUm93RW5kXCI6IHRydWUsXG5cdFx0XCJncmlkUm93U3RhcnRcIjogdHJ1ZSxcblx0XHRcImxpbmVIZWlnaHRcIjogdHJ1ZSxcblx0XHRcIm9wYWNpdHlcIjogdHJ1ZSxcblx0XHRcIm9yZGVyXCI6IHRydWUsXG5cdFx0XCJvcnBoYW5zXCI6IHRydWUsXG5cdFx0XCJ3aWRvd3NcIjogdHJ1ZSxcblx0XHRcInpJbmRleFwiOiB0cnVlLFxuXHRcdFwiem9vbVwiOiB0cnVlXG5cdH0sXG5cblx0Ly8gQWRkIGluIHByb3BlcnRpZXMgd2hvc2UgbmFtZXMgeW91IHdpc2ggdG8gZml4IGJlZm9yZVxuXHQvLyBzZXR0aW5nIG9yIGdldHRpbmcgdGhlIHZhbHVlXG5cdGNzc1Byb3BzOiB7fSxcblxuXHQvLyBHZXQgYW5kIHNldCB0aGUgc3R5bGUgcHJvcGVydHkgb24gYSBET00gTm9kZVxuXHRzdHlsZTogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlLCBleHRyYSApIHtcblxuXHRcdC8vIERvbid0IHNldCBzdHlsZXMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggIWVsZW0gfHwgZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4IHx8ICFlbGVtLnN0eWxlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZVxuXHRcdHZhciByZXQsIHR5cGUsIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBjYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdGlzQ3VzdG9tUHJvcCA9IHJjdXN0b21Qcm9wLnRlc3QoIG5hbWUgKSxcblx0XHRcdHN0eWxlID0gZWxlbS5zdHlsZTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZS4gV2UgZG9uJ3Rcblx0XHQvLyB3YW50IHRvIHF1ZXJ5IHRoZSB2YWx1ZSBpZiBpdCBpcyBhIENTUyBjdXN0b20gcHJvcGVydHlcblx0XHQvLyBzaW5jZSB0aGV5IGFyZSB1c2VyLWRlZmluZWQuXG5cdFx0aWYgKCAhaXNDdXN0b21Qcm9wICkge1xuXHRcdFx0bmFtZSA9IGZpbmFsUHJvcE5hbWUoIG9yaWdOYW1lICk7XG5cdFx0fVxuXG5cdFx0Ly8gR2V0cyBob29rIGZvciB0aGUgcHJlZml4ZWQgdmVyc2lvbiwgdGhlbiB1bnByZWZpeGVkIHZlcnNpb25cblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIHNldHRpbmcgYSB2YWx1ZVxuXHRcdGlmICggdmFsdWUgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHR5cGUgPSB0eXBlb2YgdmFsdWU7XG5cblx0XHRcdC8vIENvbnZlcnQgXCIrPVwiIG9yIFwiLT1cIiB0byByZWxhdGl2ZSBudW1iZXJzICgjNzM0NSlcblx0XHRcdGlmICggdHlwZSA9PT0gXCJzdHJpbmdcIiAmJiAoIHJldCA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmIHJldFsgMSBdICkge1xuXHRcdFx0XHR2YWx1ZSA9IGFkanVzdENTUyggZWxlbSwgbmFtZSwgcmV0ICk7XG5cblx0XHRcdFx0Ly8gRml4ZXMgYnVnICM5MjM3XG5cdFx0XHRcdHR5cGUgPSBcIm51bWJlclwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBNYWtlIHN1cmUgdGhhdCBudWxsIGFuZCBOYU4gdmFsdWVzIGFyZW4ndCBzZXQgKCM3MTE2KVxuXHRcdFx0aWYgKCB2YWx1ZSA9PSBudWxsIHx8IHZhbHVlICE9PSB2YWx1ZSApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIG51bWJlciB3YXMgcGFzc2VkIGluLCBhZGQgdGhlIHVuaXQgKGV4Y2VwdCBmb3IgY2VydGFpbiBDU1MgcHJvcGVydGllcylcblx0XHRcdC8vIFRoZSBpc0N1c3RvbVByb3AgY2hlY2sgY2FuIGJlIHJlbW92ZWQgaW4galF1ZXJ5IDQuMCB3aGVuIHdlIG9ubHkgYXV0by1hcHBlbmRcblx0XHRcdC8vIFwicHhcIiB0byBhIGZldyBoYXJkY29kZWQgdmFsdWVzLlxuXHRcdFx0aWYgKCB0eXBlID09PSBcIm51bWJlclwiICYmICFpc0N1c3RvbVByb3AgKSB7XG5cdFx0XHRcdHZhbHVlICs9IHJldCAmJiByZXRbIDMgXSB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIG9yaWdOYW1lIF0gPyBcIlwiIDogXCJweFwiICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIGJhY2tncm91bmQtKiBwcm9wcyBhZmZlY3Qgb3JpZ2luYWwgY2xvbmUncyB2YWx1ZXNcblx0XHRcdGlmICggIXN1cHBvcnQuY2xlYXJDbG9uZVN0eWxlICYmIHZhbHVlID09PSBcIlwiICYmIG5hbWUuaW5kZXhPZiggXCJiYWNrZ3JvdW5kXCIgKSA9PT0gMCApIHtcblx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IFwiaW5oZXJpdFwiO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkLCB1c2UgdGhhdCB2YWx1ZSwgb3RoZXJ3aXNlIGp1c3Qgc2V0IHRoZSBzcGVjaWZpZWQgdmFsdWVcblx0XHRcdGlmICggIWhvb2tzIHx8ICEoIFwic2V0XCIgaW4gaG9va3MgKSB8fFxuXHRcdFx0XHQoIHZhbHVlID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgZXh0cmEgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cblx0XHRcdFx0aWYgKCBpc0N1c3RvbVByb3AgKSB7XG5cdFx0XHRcdFx0c3R5bGUuc2V0UHJvcGVydHkoIG5hbWUsIHZhbHVlICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0c3R5bGVbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHR9IGVsc2Uge1xuXG5cdFx0XHQvLyBJZiBhIGhvb2sgd2FzIHByb3ZpZGVkIGdldCB0aGUgbm9uLWNvbXB1dGVkIHZhbHVlIGZyb20gdGhlcmVcblx0XHRcdGlmICggaG9va3MgJiYgXCJnZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgZmFsc2UsIGV4dHJhICkgKSAhPT0gdW5kZWZpbmVkICkge1xuXG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE90aGVyd2lzZSBqdXN0IGdldCB0aGUgdmFsdWUgZnJvbSB0aGUgc3R5bGUgb2JqZWN0XG5cdFx0XHRyZXR1cm4gc3R5bGVbIG5hbWUgXTtcblx0XHR9XG5cdH0sXG5cblx0Y3NzOiBmdW5jdGlvbiggZWxlbSwgbmFtZSwgZXh0cmEsIHN0eWxlcyApIHtcblx0XHR2YXIgdmFsLCBudW0sIGhvb2tzLFxuXHRcdFx0b3JpZ05hbWUgPSBjYW1lbENhc2UoIG5hbWUgKSxcblx0XHRcdGlzQ3VzdG9tUHJvcCA9IHJjdXN0b21Qcm9wLnRlc3QoIG5hbWUgKTtcblxuXHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHdlJ3JlIHdvcmtpbmcgd2l0aCB0aGUgcmlnaHQgbmFtZS4gV2UgZG9uJ3Rcblx0XHQvLyB3YW50IHRvIG1vZGlmeSB0aGUgdmFsdWUgaWYgaXQgaXMgYSBDU1MgY3VzdG9tIHByb3BlcnR5XG5cdFx0Ly8gc2luY2UgdGhleSBhcmUgdXNlci1kZWZpbmVkLlxuXHRcdGlmICggIWlzQ3VzdG9tUHJvcCApIHtcblx0XHRcdG5hbWUgPSBmaW5hbFByb3BOYW1lKCBvcmlnTmFtZSApO1xuXHRcdH1cblxuXHRcdC8vIFRyeSBwcmVmaXhlZCBuYW1lIGZvbGxvd2VkIGJ5IHRoZSB1bnByZWZpeGVkIG5hbWVcblx0XHRob29rcyA9IGpRdWVyeS5jc3NIb29rc1sgbmFtZSBdIHx8IGpRdWVyeS5jc3NIb29rc1sgb3JpZ05hbWUgXTtcblxuXHRcdC8vIElmIGEgaG9vayB3YXMgcHJvdmlkZWQgZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBmcm9tIHRoZXJlXG5cdFx0aWYgKCBob29rcyAmJiBcImdldFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsID0gaG9va3MuZ2V0KCBlbGVtLCB0cnVlLCBleHRyYSApO1xuXHRcdH1cblxuXHRcdC8vIE90aGVyd2lzZSwgaWYgYSB3YXkgdG8gZ2V0IHRoZSBjb21wdXRlZCB2YWx1ZSBleGlzdHMsIHVzZSB0aGF0XG5cdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdHZhbCA9IGN1ckNTUyggZWxlbSwgbmFtZSwgc3R5bGVzICk7XG5cdFx0fVxuXG5cdFx0Ly8gQ29udmVydCBcIm5vcm1hbFwiIHRvIGNvbXB1dGVkIHZhbHVlXG5cdFx0aWYgKCB2YWwgPT09IFwibm9ybWFsXCIgJiYgbmFtZSBpbiBjc3NOb3JtYWxUcmFuc2Zvcm0gKSB7XG5cdFx0XHR2YWwgPSBjc3NOb3JtYWxUcmFuc2Zvcm1bIG5hbWUgXTtcblx0XHR9XG5cblx0XHQvLyBNYWtlIG51bWVyaWMgaWYgZm9yY2VkIG9yIGEgcXVhbGlmaWVyIHdhcyBwcm92aWRlZCBhbmQgdmFsIGxvb2tzIG51bWVyaWNcblx0XHRpZiAoIGV4dHJhID09PSBcIlwiIHx8IGV4dHJhICkge1xuXHRcdFx0bnVtID0gcGFyc2VGbG9hdCggdmFsICk7XG5cdFx0XHRyZXR1cm4gZXh0cmEgPT09IHRydWUgfHwgaXNGaW5pdGUoIG51bSApID8gbnVtIHx8IDAgOiB2YWw7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHZhbDtcblx0fVxufSApO1xuXG5qUXVlcnkuZWFjaCggWyBcImhlaWdodFwiLCBcIndpZHRoXCIgXSwgZnVuY3Rpb24oIGksIGRpbWVuc2lvbiApIHtcblx0alF1ZXJ5LmNzc0hvb2tzWyBkaW1lbnNpb24gXSA9IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtLCBjb21wdXRlZCwgZXh0cmEgKSB7XG5cdFx0XHRpZiAoIGNvbXB1dGVkICkge1xuXG5cdFx0XHRcdC8vIENlcnRhaW4gZWxlbWVudHMgY2FuIGhhdmUgZGltZW5zaW9uIGluZm8gaWYgd2UgaW52aXNpYmx5IHNob3cgdGhlbVxuXHRcdFx0XHQvLyBidXQgaXQgbXVzdCBoYXZlIGEgY3VycmVudCBkaXNwbGF5IHN0eWxlIHRoYXQgd291bGQgYmVuZWZpdFxuXHRcdFx0XHRyZXR1cm4gcmRpc3BsYXlzd2FwLnRlc3QoIGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICkgKSAmJlxuXG5cdFx0XHRcdFx0Ly8gU3VwcG9ydDogU2FmYXJpIDgrXG5cdFx0XHRcdFx0Ly8gVGFibGUgY29sdW1ucyBpbiBTYWZhcmkgaGF2ZSBub24temVybyBvZmZzZXRXaWR0aCAmIHplcm9cblx0XHRcdFx0XHQvLyBnZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCB1bmxlc3MgZGlzcGxheSBpcyBjaGFuZ2VkLlxuXHRcdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHRcdFx0XHRcdC8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGEgZGlzY29ubmVjdGVkIG5vZGVcblx0XHRcdFx0XHQvLyBpbiBJRSB0aHJvd3MgYW4gZXJyb3IuXG5cdFx0XHRcdFx0KCAhZWxlbS5nZXRDbGllbnRSZWN0cygpLmxlbmd0aCB8fCAhZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCApID9cblx0XHRcdFx0XHRcdHN3YXAoIGVsZW0sIGNzc1Nob3csIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gZ2V0V2lkdGhPckhlaWdodCggZWxlbSwgZGltZW5zaW9uLCBleHRyYSApO1xuXHRcdFx0XHRcdFx0fSApIDpcblx0XHRcdFx0XHRcdGdldFdpZHRoT3JIZWlnaHQoIGVsZW0sIGRpbWVuc2lvbiwgZXh0cmEgKTtcblx0XHRcdH1cblx0XHR9LFxuXG5cdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUsIGV4dHJhICkge1xuXHRcdFx0dmFyIG1hdGNoZXMsXG5cdFx0XHRcdHN0eWxlcyA9IGdldFN0eWxlcyggZWxlbSApLFxuXG5cdFx0XHRcdC8vIE9ubHkgcmVhZCBzdHlsZXMucG9zaXRpb24gaWYgdGhlIHRlc3QgaGFzIGEgY2hhbmNlIHRvIGZhaWxcblx0XHRcdFx0Ly8gdG8gYXZvaWQgZm9yY2luZyBhIHJlZmxvdy5cblx0XHRcdFx0c2Nyb2xsYm94U2l6ZUJ1Z2d5ID0gIXN1cHBvcnQuc2Nyb2xsYm94U2l6ZSgpICYmXG5cdFx0XHRcdFx0c3R5bGVzLnBvc2l0aW9uID09PSBcImFic29sdXRlXCIsXG5cblx0XHRcdFx0Ly8gVG8gYXZvaWQgZm9yY2luZyBhIHJlZmxvdywgb25seSBmZXRjaCBib3hTaXppbmcgaWYgd2UgbmVlZCBpdCAoZ2gtMzk5MSlcblx0XHRcdFx0Ym94U2l6aW5nTmVlZGVkID0gc2Nyb2xsYm94U2l6ZUJ1Z2d5IHx8IGV4dHJhLFxuXHRcdFx0XHRpc0JvcmRlckJveCA9IGJveFNpemluZ05lZWRlZCAmJlxuXHRcdFx0XHRcdGpRdWVyeS5jc3MoIGVsZW0sIFwiYm94U2l6aW5nXCIsIGZhbHNlLCBzdHlsZXMgKSA9PT0gXCJib3JkZXItYm94XCIsXG5cdFx0XHRcdHN1YnRyYWN0ID0gZXh0cmEgP1xuXHRcdFx0XHRcdGJveE1vZGVsQWRqdXN0bWVudChcblx0XHRcdFx0XHRcdGVsZW0sXG5cdFx0XHRcdFx0XHRkaW1lbnNpb24sXG5cdFx0XHRcdFx0XHRleHRyYSxcblx0XHRcdFx0XHRcdGlzQm9yZGVyQm94LFxuXHRcdFx0XHRcdFx0c3R5bGVzXG5cdFx0XHRcdFx0KSA6XG5cdFx0XHRcdFx0MDtcblxuXHRcdFx0Ly8gQWNjb3VudCBmb3IgdW5yZWxpYWJsZSBib3JkZXItYm94IGRpbWVuc2lvbnMgYnkgY29tcGFyaW5nIG9mZnNldCogdG8gY29tcHV0ZWQgYW5kXG5cdFx0XHQvLyBmYWtpbmcgYSBjb250ZW50LWJveCB0byBnZXQgYm9yZGVyIGFuZCBwYWRkaW5nIChnaC0zNjk5KVxuXHRcdFx0aWYgKCBpc0JvcmRlckJveCAmJiBzY3JvbGxib3hTaXplQnVnZ3kgKSB7XG5cdFx0XHRcdHN1YnRyYWN0IC09IE1hdGguY2VpbChcblx0XHRcdFx0XHRlbGVtWyBcIm9mZnNldFwiICsgZGltZW5zaW9uWyAwIF0udG9VcHBlckNhc2UoKSArIGRpbWVuc2lvbi5zbGljZSggMSApIF0gLVxuXHRcdFx0XHRcdHBhcnNlRmxvYXQoIHN0eWxlc1sgZGltZW5zaW9uIF0gKSAtXG5cdFx0XHRcdFx0Ym94TW9kZWxBZGp1c3RtZW50KCBlbGVtLCBkaW1lbnNpb24sIFwiYm9yZGVyXCIsIGZhbHNlLCBzdHlsZXMgKSAtXG5cdFx0XHRcdFx0MC41XG5cdFx0XHRcdCk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbnZlcnQgdG8gcGl4ZWxzIGlmIHZhbHVlIGFkanVzdG1lbnQgaXMgbmVlZGVkXG5cdFx0XHRpZiAoIHN1YnRyYWN0ICYmICggbWF0Y2hlcyA9IHJjc3NOdW0uZXhlYyggdmFsdWUgKSApICYmXG5cdFx0XHRcdCggbWF0Y2hlc1sgMyBdIHx8IFwicHhcIiApICE9PSBcInB4XCIgKSB7XG5cblx0XHRcdFx0ZWxlbS5zdHlsZVsgZGltZW5zaW9uIF0gPSB2YWx1ZTtcblx0XHRcdFx0dmFsdWUgPSBqUXVlcnkuY3NzKCBlbGVtLCBkaW1lbnNpb24gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHNldFBvc2l0aXZlTnVtYmVyKCBlbGVtLCB2YWx1ZSwgc3VidHJhY3QgKTtcblx0XHR9XG5cdH07XG59ICk7XG5cbmpRdWVyeS5jc3NIb29rcy5tYXJnaW5MZWZ0ID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnJlbGlhYmxlTWFyZ2luTGVmdCxcblx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdGlmICggY29tcHV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4gKCBwYXJzZUZsb2F0KCBjdXJDU1MoIGVsZW0sIFwibWFyZ2luTGVmdFwiICkgKSB8fFxuXHRcdFx0XHRlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQgLVxuXHRcdFx0XHRcdHN3YXAoIGVsZW0sIHsgbWFyZ2luTGVmdDogMCB9LCBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdHJldHVybiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLmxlZnQ7XG5cdFx0XHRcdFx0fSApXG5cdFx0XHRcdCkgKyBcInB4XCI7XG5cdFx0fVxuXHR9XG4pO1xuXG4vLyBUaGVzZSBob29rcyBhcmUgdXNlZCBieSBhbmltYXRlIHRvIGV4cGFuZCBwcm9wZXJ0aWVzXG5qUXVlcnkuZWFjaCgge1xuXHRtYXJnaW46IFwiXCIsXG5cdHBhZGRpbmc6IFwiXCIsXG5cdGJvcmRlcjogXCJXaWR0aFwiXG59LCBmdW5jdGlvbiggcHJlZml4LCBzdWZmaXggKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJlZml4ICsgc3VmZml4IF0gPSB7XG5cdFx0ZXhwYW5kOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0XHR2YXIgaSA9IDAsXG5cdFx0XHRcdGV4cGFuZGVkID0ge30sXG5cblx0XHRcdFx0Ly8gQXNzdW1lcyBhIHNpbmdsZSBudW1iZXIgaWYgbm90IGEgc3RyaW5nXG5cdFx0XHRcdHBhcnRzID0gdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiID8gdmFsdWUuc3BsaXQoIFwiIFwiICkgOiBbIHZhbHVlIF07XG5cblx0XHRcdGZvciAoIDsgaSA8IDQ7IGkrKyApIHtcblx0XHRcdFx0ZXhwYW5kZWRbIHByZWZpeCArIGNzc0V4cGFuZFsgaSBdICsgc3VmZml4IF0gPVxuXHRcdFx0XHRcdHBhcnRzWyBpIF0gfHwgcGFydHNbIGkgLSAyIF0gfHwgcGFydHNbIDAgXTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIGV4cGFuZGVkO1xuXHRcdH1cblx0fTtcblxuXHRpZiAoIHByZWZpeCAhPT0gXCJtYXJnaW5cIiApIHtcblx0XHRqUXVlcnkuY3NzSG9va3NbIHByZWZpeCArIHN1ZmZpeCBdLnNldCA9IHNldFBvc2l0aXZlTnVtYmVyO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0Y3NzOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0dmFyIHN0eWxlcywgbGVuLFxuXHRcdFx0XHRtYXAgPSB7fSxcblx0XHRcdFx0aSA9IDA7XG5cblx0XHRcdGlmICggQXJyYXkuaXNBcnJheSggbmFtZSApICkge1xuXHRcdFx0XHRzdHlsZXMgPSBnZXRTdHlsZXMoIGVsZW0gKTtcblx0XHRcdFx0bGVuID0gbmFtZS5sZW5ndGg7XG5cblx0XHRcdFx0Zm9yICggOyBpIDwgbGVuOyBpKysgKSB7XG5cdFx0XHRcdFx0bWFwWyBuYW1lWyBpIF0gXSA9IGpRdWVyeS5jc3MoIGVsZW0sIG5hbWVbIGkgXSwgZmFsc2UsIHN0eWxlcyApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0cmV0dXJuIG1hcDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHZhbHVlICE9PSB1bmRlZmluZWQgP1xuXHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIG5hbWUsIHZhbHVlICkgOlxuXHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCBuYW1lICk7XG5cdFx0fSwgbmFtZSwgdmFsdWUsIGFyZ3VtZW50cy5sZW5ndGggPiAxICk7XG5cdH1cbn0gKTtcblxuXG5mdW5jdGlvbiBUd2VlbiggZWxlbSwgb3B0aW9ucywgcHJvcCwgZW5kLCBlYXNpbmcgKSB7XG5cdHJldHVybiBuZXcgVHdlZW4ucHJvdG90eXBlLmluaXQoIGVsZW0sIG9wdGlvbnMsIHByb3AsIGVuZCwgZWFzaW5nICk7XG59XG5qUXVlcnkuVHdlZW4gPSBUd2VlbjtcblxuVHdlZW4ucHJvdG90eXBlID0ge1xuXHRjb25zdHJ1Y3RvcjogVHdlZW4sXG5cdGluaXQ6IGZ1bmN0aW9uKCBlbGVtLCBvcHRpb25zLCBwcm9wLCBlbmQsIGVhc2luZywgdW5pdCApIHtcblx0XHR0aGlzLmVsZW0gPSBlbGVtO1xuXHRcdHRoaXMucHJvcCA9IHByb3A7XG5cdFx0dGhpcy5lYXNpbmcgPSBlYXNpbmcgfHwgalF1ZXJ5LmVhc2luZy5fZGVmYXVsdDtcblx0XHR0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuXHRcdHRoaXMuc3RhcnQgPSB0aGlzLm5vdyA9IHRoaXMuY3VyKCk7XG5cdFx0dGhpcy5lbmQgPSBlbmQ7XG5cdFx0dGhpcy51bml0ID0gdW5pdCB8fCAoIGpRdWVyeS5jc3NOdW1iZXJbIHByb3AgXSA/IFwiXCIgOiBcInB4XCIgKTtcblx0fSxcblx0Y3VyOiBmdW5jdGlvbigpIHtcblx0XHR2YXIgaG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0cmV0dXJuIGhvb2tzICYmIGhvb2tzLmdldCA/XG5cdFx0XHRob29rcy5nZXQoIHRoaXMgKSA6XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuZ2V0KCB0aGlzICk7XG5cdH0sXG5cdHJ1bjogZnVuY3Rpb24oIHBlcmNlbnQgKSB7XG5cdFx0dmFyIGVhc2VkLFxuXHRcdFx0aG9va3MgPSBUd2Vlbi5wcm9wSG9va3NbIHRoaXMucHJvcCBdO1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0galF1ZXJ5LmVhc2luZ1sgdGhpcy5lYXNpbmcgXShcblx0XHRcdFx0cGVyY2VudCwgdGhpcy5vcHRpb25zLmR1cmF0aW9uICogcGVyY2VudCwgMCwgMSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uXG5cdFx0XHQpO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGlzLnBvcyA9IGVhc2VkID0gcGVyY2VudDtcblx0XHR9XG5cdFx0dGhpcy5ub3cgPSAoIHRoaXMuZW5kIC0gdGhpcy5zdGFydCApICogZWFzZWQgKyB0aGlzLnN0YXJ0O1xuXG5cdFx0aWYgKCB0aGlzLm9wdGlvbnMuc3RlcCApIHtcblx0XHRcdHRoaXMub3B0aW9ucy5zdGVwLmNhbGwoIHRoaXMuZWxlbSwgdGhpcy5ub3csIHRoaXMgKTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnNldCApIHtcblx0XHRcdGhvb2tzLnNldCggdGhpcyApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRUd2Vlbi5wcm9wSG9va3MuX2RlZmF1bHQuc2V0KCB0aGlzICk7XG5cdFx0fVxuXHRcdHJldHVybiB0aGlzO1xuXHR9XG59O1xuXG5Ud2Vlbi5wcm90b3R5cGUuaW5pdC5wcm90b3R5cGUgPSBUd2Vlbi5wcm90b3R5cGU7XG5cblR3ZWVuLnByb3BIb29rcyA9IHtcblx0X2RlZmF1bHQ6IHtcblx0XHRnZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRcdHZhciByZXN1bHQ7XG5cblx0XHRcdC8vIFVzZSBhIHByb3BlcnR5IG9uIHRoZSBlbGVtZW50IGRpcmVjdGx5IHdoZW4gaXQgaXMgbm90IGEgRE9NIGVsZW1lbnQsXG5cdFx0XHQvLyBvciB3aGVuIHRoZXJlIGlzIG5vIG1hdGNoaW5nIHN0eWxlIHByb3BlcnR5IHRoYXQgZXhpc3RzLlxuXHRcdFx0aWYgKCB0d2Vlbi5lbGVtLm5vZGVUeXBlICE9PSAxIHx8XG5cdFx0XHRcdHR3ZWVuLmVsZW1bIHR3ZWVuLnByb3AgXSAhPSBudWxsICYmIHR3ZWVuLmVsZW0uc3R5bGVbIHR3ZWVuLnByb3AgXSA9PSBudWxsICkge1xuXHRcdFx0XHRyZXR1cm4gdHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQYXNzaW5nIGFuIGVtcHR5IHN0cmluZyBhcyBhIDNyZCBwYXJhbWV0ZXIgdG8gLmNzcyB3aWxsIGF1dG9tYXRpY2FsbHlcblx0XHRcdC8vIGF0dGVtcHQgYSBwYXJzZUZsb2F0IGFuZCBmYWxsYmFjayB0byBhIHN0cmluZyBpZiB0aGUgcGFyc2UgZmFpbHMuXG5cdFx0XHQvLyBTaW1wbGUgdmFsdWVzIHN1Y2ggYXMgXCIxMHB4XCIgYXJlIHBhcnNlZCB0byBGbG9hdDtcblx0XHRcdC8vIGNvbXBsZXggdmFsdWVzIHN1Y2ggYXMgXCJyb3RhdGUoMXJhZClcIiBhcmUgcmV0dXJuZWQgYXMtaXMuXG5cdFx0XHRyZXN1bHQgPSBqUXVlcnkuY3NzKCB0d2Vlbi5lbGVtLCB0d2Vlbi5wcm9wLCBcIlwiICk7XG5cblx0XHRcdC8vIEVtcHR5IHN0cmluZ3MsIG51bGwsIHVuZGVmaW5lZCBhbmQgXCJhdXRvXCIgYXJlIGNvbnZlcnRlZCB0byAwLlxuXHRcdFx0cmV0dXJuICFyZXN1bHQgfHwgcmVzdWx0ID09PSBcImF1dG9cIiA/IDAgOiByZXN1bHQ7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblxuXHRcdFx0Ly8gVXNlIHN0ZXAgaG9vayBmb3IgYmFjayBjb21wYXQuXG5cdFx0XHQvLyBVc2UgY3NzSG9vayBpZiBpdHMgdGhlcmUuXG5cdFx0XHQvLyBVc2UgLnN0eWxlIGlmIGF2YWlsYWJsZSBhbmQgdXNlIHBsYWluIHByb3BlcnRpZXMgd2hlcmUgYXZhaWxhYmxlLlxuXHRcdFx0aWYgKCBqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdICkge1xuXHRcdFx0XHRqUXVlcnkuZnguc3RlcFsgdHdlZW4ucHJvcCBdKCB0d2VlbiApO1xuXHRcdFx0fSBlbHNlIGlmICggdHdlZW4uZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoXG5cdFx0XHRcdFx0alF1ZXJ5LmNzc0hvb2tzWyB0d2Vlbi5wcm9wIF0gfHxcblx0XHRcdFx0XHR0d2Vlbi5lbGVtLnN0eWxlWyBmaW5hbFByb3BOYW1lKCB0d2Vlbi5wcm9wICkgXSAhPSBudWxsICkgKSB7XG5cdFx0XHRcdGpRdWVyeS5zdHlsZSggdHdlZW4uZWxlbSwgdHdlZW4ucHJvcCwgdHdlZW4ubm93ICsgdHdlZW4udW5pdCApO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufTtcblxuLy8gU3VwcG9ydDogSUUgPD05IG9ubHlcbi8vIFBhbmljIGJhc2VkIGFwcHJvYWNoIHRvIHNldHRpbmcgdGhpbmdzIG9uIGRpc2Nvbm5lY3RlZCBub2Rlc1xuVHdlZW4ucHJvcEhvb2tzLnNjcm9sbFRvcCA9IFR3ZWVuLnByb3BIb29rcy5zY3JvbGxMZWZ0ID0ge1xuXHRzZXQ6IGZ1bmN0aW9uKCB0d2VlbiApIHtcblx0XHRpZiAoIHR3ZWVuLmVsZW0ubm9kZVR5cGUgJiYgdHdlZW4uZWxlbS5wYXJlbnROb2RlICkge1xuXHRcdFx0dHdlZW4uZWxlbVsgdHdlZW4ucHJvcCBdID0gdHdlZW4ubm93O1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmVhc2luZyA9IHtcblx0bGluZWFyOiBmdW5jdGlvbiggcCApIHtcblx0XHRyZXR1cm4gcDtcblx0fSxcblx0c3dpbmc6IGZ1bmN0aW9uKCBwICkge1xuXHRcdHJldHVybiAwLjUgLSBNYXRoLmNvcyggcCAqIE1hdGguUEkgKSAvIDI7XG5cdH0sXG5cdF9kZWZhdWx0OiBcInN3aW5nXCJcbn07XG5cbmpRdWVyeS5meCA9IFR3ZWVuLnByb3RvdHlwZS5pbml0O1xuXG4vLyBCYWNrIGNvbXBhdCA8MS44IGV4dGVuc2lvbiBwb2ludFxualF1ZXJ5LmZ4LnN0ZXAgPSB7fTtcblxuXG5cblxudmFyXG5cdGZ4Tm93LCBpblByb2dyZXNzLFxuXHRyZnh0eXBlcyA9IC9eKD86dG9nZ2xlfHNob3d8aGlkZSkkLyxcblx0cnJ1biA9IC9xdWV1ZUhvb2tzJC87XG5cbmZ1bmN0aW9uIHNjaGVkdWxlKCkge1xuXHRpZiAoIGluUHJvZ3Jlc3MgKSB7XG5cdFx0aWYgKCBkb2N1bWVudC5oaWRkZW4gPT09IGZhbHNlICYmIHdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWUgKSB7XG5cdFx0XHR3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKCBzY2hlZHVsZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR3aW5kb3cuc2V0VGltZW91dCggc2NoZWR1bGUsIGpRdWVyeS5meC5pbnRlcnZhbCApO1xuXHRcdH1cblxuXHRcdGpRdWVyeS5meC50aWNrKCk7XG5cdH1cbn1cblxuLy8gQW5pbWF0aW9ucyBjcmVhdGVkIHN5bmNocm9ub3VzbHkgd2lsbCBydW4gc3luY2hyb25vdXNseVxuZnVuY3Rpb24gY3JlYXRlRnhOb3coKSB7XG5cdHdpbmRvdy5zZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcblx0XHRmeE5vdyA9IHVuZGVmaW5lZDtcblx0fSApO1xuXHRyZXR1cm4gKCBmeE5vdyA9IERhdGUubm93KCkgKTtcbn1cblxuLy8gR2VuZXJhdGUgcGFyYW1ldGVycyB0byBjcmVhdGUgYSBzdGFuZGFyZCBhbmltYXRpb25cbmZ1bmN0aW9uIGdlbkZ4KCB0eXBlLCBpbmNsdWRlV2lkdGggKSB7XG5cdHZhciB3aGljaCxcblx0XHRpID0gMCxcblx0XHRhdHRycyA9IHsgaGVpZ2h0OiB0eXBlIH07XG5cblx0Ly8gSWYgd2UgaW5jbHVkZSB3aWR0aCwgc3RlcCB2YWx1ZSBpcyAxIHRvIGRvIGFsbCBjc3NFeHBhbmQgdmFsdWVzLFxuXHQvLyBvdGhlcndpc2Ugc3RlcCB2YWx1ZSBpcyAyIHRvIHNraXAgb3ZlciBMZWZ0IGFuZCBSaWdodFxuXHRpbmNsdWRlV2lkdGggPSBpbmNsdWRlV2lkdGggPyAxIDogMDtcblx0Zm9yICggOyBpIDwgNDsgaSArPSAyIC0gaW5jbHVkZVdpZHRoICkge1xuXHRcdHdoaWNoID0gY3NzRXhwYW5kWyBpIF07XG5cdFx0YXR0cnNbIFwibWFyZ2luXCIgKyB3aGljaCBdID0gYXR0cnNbIFwicGFkZGluZ1wiICsgd2hpY2ggXSA9IHR5cGU7XG5cdH1cblxuXHRpZiAoIGluY2x1ZGVXaWR0aCApIHtcblx0XHRhdHRycy5vcGFjaXR5ID0gYXR0cnMud2lkdGggPSB0eXBlO1xuXHR9XG5cblx0cmV0dXJuIGF0dHJzO1xufVxuXG5mdW5jdGlvbiBjcmVhdGVUd2VlbiggdmFsdWUsIHByb3AsIGFuaW1hdGlvbiApIHtcblx0dmFyIHR3ZWVuLFxuXHRcdGNvbGxlY3Rpb24gPSAoIEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdIHx8IFtdICkuY29uY2F0KCBBbmltYXRpb24udHdlZW5lcnNbIFwiKlwiIF0gKSxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gY29sbGVjdGlvbi5sZW5ndGg7XG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0aWYgKCAoIHR3ZWVuID0gY29sbGVjdGlvblsgaW5kZXggXS5jYWxsKCBhbmltYXRpb24sIHByb3AsIHZhbHVlICkgKSApIHtcblxuXHRcdFx0Ly8gV2UncmUgZG9uZSB3aXRoIHRoaXMgcHJvcGVydHlcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9XG5cdH1cbn1cblxuZnVuY3Rpb24gZGVmYXVsdFByZWZpbHRlciggZWxlbSwgcHJvcHMsIG9wdHMgKSB7XG5cdHZhciBwcm9wLCB2YWx1ZSwgdG9nZ2xlLCBob29rcywgb2xkZmlyZSwgcHJvcFR3ZWVuLCByZXN0b3JlRGlzcGxheSwgZGlzcGxheSxcblx0XHRpc0JveCA9IFwid2lkdGhcIiBpbiBwcm9wcyB8fCBcImhlaWdodFwiIGluIHByb3BzLFxuXHRcdGFuaW0gPSB0aGlzLFxuXHRcdG9yaWcgPSB7fSxcblx0XHRzdHlsZSA9IGVsZW0uc3R5bGUsXG5cdFx0aGlkZGVuID0gZWxlbS5ub2RlVHlwZSAmJiBpc0hpZGRlbldpdGhpblRyZWUoIGVsZW0gKSxcblx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJmeHNob3dcIiApO1xuXG5cdC8vIFF1ZXVlLXNraXBwaW5nIGFuaW1hdGlvbnMgaGlqYWNrIHRoZSBmeCBob29rc1xuXHRpZiAoICFvcHRzLnF1ZXVlICkge1xuXHRcdGhvb2tzID0galF1ZXJ5Ll9xdWV1ZUhvb2tzKCBlbGVtLCBcImZ4XCIgKTtcblx0XHRpZiAoIGhvb2tzLnVucXVldWVkID09IG51bGwgKSB7XG5cdFx0XHRob29rcy51bnF1ZXVlZCA9IDA7XG5cdFx0XHRvbGRmaXJlID0gaG9va3MuZW1wdHkuZmlyZTtcblx0XHRcdGhvb2tzLmVtcHR5LmZpcmUgPSBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCAhaG9va3MudW5xdWV1ZWQgKSB7XG5cdFx0XHRcdFx0b2xkZmlyZSgpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdH1cblx0XHRob29rcy51bnF1ZXVlZCsrO1xuXG5cdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBFbnN1cmUgdGhlIGNvbXBsZXRlIGhhbmRsZXIgaXMgY2FsbGVkIGJlZm9yZSB0aGlzIGNvbXBsZXRlc1xuXHRcdFx0YW5pbS5hbHdheXMoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRob29rcy51bnF1ZXVlZC0tO1xuXHRcdFx0XHRpZiAoICFqUXVlcnkucXVldWUoIGVsZW0sIFwiZnhcIiApLmxlbmd0aCApIHtcblx0XHRcdFx0XHRob29rcy5lbXB0eS5maXJlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0gKTtcblx0XHR9ICk7XG5cdH1cblxuXHQvLyBEZXRlY3Qgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0Zm9yICggcHJvcCBpbiBwcm9wcyApIHtcblx0XHR2YWx1ZSA9IHByb3BzWyBwcm9wIF07XG5cdFx0aWYgKCByZnh0eXBlcy50ZXN0KCB2YWx1ZSApICkge1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBwcm9wIF07XG5cdFx0XHR0b2dnbGUgPSB0b2dnbGUgfHwgdmFsdWUgPT09IFwidG9nZ2xlXCI7XG5cdFx0XHRpZiAoIHZhbHVlID09PSAoIGhpZGRlbiA/IFwiaGlkZVwiIDogXCJzaG93XCIgKSApIHtcblxuXHRcdFx0XHQvLyBQcmV0ZW5kIHRvIGJlIGhpZGRlbiBpZiB0aGlzIGlzIGEgXCJzaG93XCIgYW5kXG5cdFx0XHRcdC8vIHRoZXJlIGlzIHN0aWxsIGRhdGEgZnJvbSBhIHN0b3BwZWQgc2hvdy9oaWRlXG5cdFx0XHRcdGlmICggdmFsdWUgPT09IFwic2hvd1wiICYmIGRhdGFTaG93ICYmIGRhdGFTaG93WyBwcm9wIF0gIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHRoaWRkZW4gPSB0cnVlO1xuXG5cdFx0XHRcdC8vIElnbm9yZSBhbGwgb3RoZXIgbm8tb3Agc2hvdy9oaWRlIGRhdGFcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0b3JpZ1sgcHJvcCBdID0gZGF0YVNob3cgJiYgZGF0YVNob3dbIHByb3AgXSB8fCBqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBCYWlsIG91dCBpZiB0aGlzIGlzIGEgbm8tb3AgbGlrZSAuaGlkZSgpLmhpZGUoKVxuXHRwcm9wVHdlZW4gPSAhalF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3BzICk7XG5cdGlmICggIXByb3BUd2VlbiAmJiBqUXVlcnkuaXNFbXB0eU9iamVjdCggb3JpZyApICkge1xuXHRcdHJldHVybjtcblx0fVxuXG5cdC8vIFJlc3RyaWN0IFwib3ZlcmZsb3dcIiBhbmQgXCJkaXNwbGF5XCIgc3R5bGVzIGR1cmluZyBib3ggYW5pbWF0aW9uc1xuXHRpZiAoIGlzQm94ICYmIGVsZW0ubm9kZVR5cGUgPT09IDEgKSB7XG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgLSAxMSwgRWRnZSAxMiAtIDE1XG5cdFx0Ly8gUmVjb3JkIGFsbCAzIG92ZXJmbG93IGF0dHJpYnV0ZXMgYmVjYXVzZSBJRSBkb2VzIG5vdCBpbmZlciB0aGUgc2hvcnRoYW5kXG5cdFx0Ly8gZnJvbSBpZGVudGljYWxseS12YWx1ZWQgb3ZlcmZsb3dYIGFuZCBvdmVyZmxvd1kgYW5kIEVkZ2UganVzdCBtaXJyb3JzXG5cdFx0Ly8gdGhlIG92ZXJmbG93WCB2YWx1ZSB0aGVyZS5cblx0XHRvcHRzLm92ZXJmbG93ID0gWyBzdHlsZS5vdmVyZmxvdywgc3R5bGUub3ZlcmZsb3dYLCBzdHlsZS5vdmVyZmxvd1kgXTtcblxuXHRcdC8vIElkZW50aWZ5IGEgZGlzcGxheSB0eXBlLCBwcmVmZXJyaW5nIG9sZCBzaG93L2hpZGUgZGF0YSBvdmVyIHRoZSBDU1MgY2FzY2FkZVxuXHRcdHJlc3RvcmVEaXNwbGF5ID0gZGF0YVNob3cgJiYgZGF0YVNob3cuZGlzcGxheTtcblx0XHRpZiAoIHJlc3RvcmVEaXNwbGF5ID09IG51bGwgKSB7XG5cdFx0XHRyZXN0b3JlRGlzcGxheSA9IGRhdGFQcml2LmdldCggZWxlbSwgXCJkaXNwbGF5XCIgKTtcblx0XHR9XG5cdFx0ZGlzcGxheSA9IGpRdWVyeS5jc3MoIGVsZW0sIFwiZGlzcGxheVwiICk7XG5cdFx0aWYgKCBkaXNwbGF5ID09PSBcIm5vbmVcIiApIHtcblx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgKSB7XG5cdFx0XHRcdGRpc3BsYXkgPSByZXN0b3JlRGlzcGxheTtcblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gR2V0IG5vbmVtcHR5IHZhbHVlKHMpIGJ5IHRlbXBvcmFyaWx5IGZvcmNpbmcgdmlzaWJpbGl0eVxuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0sIHRydWUgKTtcblx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBlbGVtLnN0eWxlLmRpc3BsYXkgfHwgcmVzdG9yZURpc3BsYXk7XG5cdFx0XHRcdGRpc3BsYXkgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImRpc3BsYXlcIiApO1xuXHRcdFx0XHRzaG93SGlkZSggWyBlbGVtIF0gKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBbmltYXRlIGlubGluZSBlbGVtZW50cyBhcyBpbmxpbmUtYmxvY2tcblx0XHRpZiAoIGRpc3BsYXkgPT09IFwiaW5saW5lXCIgfHwgZGlzcGxheSA9PT0gXCJpbmxpbmUtYmxvY2tcIiAmJiByZXN0b3JlRGlzcGxheSAhPSBudWxsICkge1xuXHRcdFx0aWYgKCBqUXVlcnkuY3NzKCBlbGVtLCBcImZsb2F0XCIgKSA9PT0gXCJub25lXCIgKSB7XG5cblx0XHRcdFx0Ly8gUmVzdG9yZSB0aGUgb3JpZ2luYWwgZGlzcGxheSB2YWx1ZSBhdCB0aGUgZW5kIG9mIHB1cmUgc2hvdy9oaWRlIGFuaW1hdGlvbnNcblx0XHRcdFx0aWYgKCAhcHJvcFR3ZWVuICkge1xuXHRcdFx0XHRcdGFuaW0uZG9uZSggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRzdHlsZS5kaXNwbGF5ID0gcmVzdG9yZURpc3BsYXk7XG5cdFx0XHRcdFx0fSApO1xuXHRcdFx0XHRcdGlmICggcmVzdG9yZURpc3BsYXkgPT0gbnVsbCApIHtcblx0XHRcdFx0XHRcdGRpc3BsYXkgPSBzdHlsZS5kaXNwbGF5O1xuXHRcdFx0XHRcdFx0cmVzdG9yZURpc3BsYXkgPSBkaXNwbGF5ID09PSBcIm5vbmVcIiA/IFwiXCIgOiBkaXNwbGF5O1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0XHRzdHlsZS5kaXNwbGF5ID0gXCJpbmxpbmUtYmxvY2tcIjtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHRpZiAoIG9wdHMub3ZlcmZsb3cgKSB7XG5cdFx0c3R5bGUub3ZlcmZsb3cgPSBcImhpZGRlblwiO1xuXHRcdGFuaW0uYWx3YXlzKCBmdW5jdGlvbigpIHtcblx0XHRcdHN0eWxlLm92ZXJmbG93ID0gb3B0cy5vdmVyZmxvd1sgMCBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dYID0gb3B0cy5vdmVyZmxvd1sgMSBdO1xuXHRcdFx0c3R5bGUub3ZlcmZsb3dZID0gb3B0cy5vdmVyZmxvd1sgMiBdO1xuXHRcdH0gKTtcblx0fVxuXG5cdC8vIEltcGxlbWVudCBzaG93L2hpZGUgYW5pbWF0aW9uc1xuXHRwcm9wVHdlZW4gPSBmYWxzZTtcblx0Zm9yICggcHJvcCBpbiBvcmlnICkge1xuXG5cdFx0Ly8gR2VuZXJhbCBzaG93L2hpZGUgc2V0dXAgZm9yIHRoaXMgZWxlbWVudCBhbmltYXRpb25cblx0XHRpZiAoICFwcm9wVHdlZW4gKSB7XG5cdFx0XHRpZiAoIGRhdGFTaG93ICkge1xuXHRcdFx0XHRpZiAoIFwiaGlkZGVuXCIgaW4gZGF0YVNob3cgKSB7XG5cdFx0XHRcdFx0aGlkZGVuID0gZGF0YVNob3cuaGlkZGVuO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkYXRhU2hvdyA9IGRhdGFQcml2LmFjY2VzcyggZWxlbSwgXCJmeHNob3dcIiwgeyBkaXNwbGF5OiByZXN0b3JlRGlzcGxheSB9ICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFN0b3JlIGhpZGRlbi92aXNpYmxlIGZvciB0b2dnbGUgc28gYC5zdG9wKCkudG9nZ2xlKClgIFwicmV2ZXJzZXNcIlxuXHRcdFx0aWYgKCB0b2dnbGUgKSB7XG5cdFx0XHRcdGRhdGFTaG93LmhpZGRlbiA9ICFoaWRkZW47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNob3cgZWxlbWVudHMgYmVmb3JlIGFuaW1hdGluZyB0aGVtXG5cdFx0XHRpZiAoIGhpZGRlbiApIHtcblx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdLCB0cnVlICk7XG5cdFx0XHR9XG5cblx0XHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLWxvb3AtZnVuYyAqL1xuXG5cdFx0XHRhbmltLmRvbmUoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvKiBlc2xpbnQtZW5hYmxlIG5vLWxvb3AtZnVuYyAqL1xuXG5cdFx0XHRcdC8vIFRoZSBmaW5hbCBzdGVwIG9mIGEgXCJoaWRlXCIgYW5pbWF0aW9uIGlzIGFjdHVhbGx5IGhpZGluZyB0aGUgZWxlbWVudFxuXHRcdFx0XHRpZiAoICFoaWRkZW4gKSB7XG5cdFx0XHRcdFx0c2hvd0hpZGUoIFsgZWxlbSBdICk7XG5cdFx0XHRcdH1cblx0XHRcdFx0ZGF0YVByaXYucmVtb3ZlKCBlbGVtLCBcImZ4c2hvd1wiICk7XG5cdFx0XHRcdGZvciAoIHByb3AgaW4gb3JpZyApIHtcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHByb3AsIG9yaWdbIHByb3AgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0Ly8gUGVyLXByb3BlcnR5IHNldHVwXG5cdFx0cHJvcFR3ZWVuID0gY3JlYXRlVHdlZW4oIGhpZGRlbiA/IGRhdGFTaG93WyBwcm9wIF0gOiAwLCBwcm9wLCBhbmltICk7XG5cdFx0aWYgKCAhKCBwcm9wIGluIGRhdGFTaG93ICkgKSB7XG5cdFx0XHRkYXRhU2hvd1sgcHJvcCBdID0gcHJvcFR3ZWVuLnN0YXJ0O1xuXHRcdFx0aWYgKCBoaWRkZW4gKSB7XG5cdFx0XHRcdHByb3BUd2Vlbi5lbmQgPSBwcm9wVHdlZW4uc3RhcnQ7XG5cdFx0XHRcdHByb3BUd2Vlbi5zdGFydCA9IDA7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59XG5cbmZ1bmN0aW9uIHByb3BGaWx0ZXIoIHByb3BzLCBzcGVjaWFsRWFzaW5nICkge1xuXHR2YXIgaW5kZXgsIG5hbWUsIGVhc2luZywgdmFsdWUsIGhvb2tzO1xuXG5cdC8vIGNhbWVsQ2FzZSwgc3BlY2lhbEVhc2luZyBhbmQgZXhwYW5kIGNzc0hvb2sgcGFzc1xuXHRmb3IgKCBpbmRleCBpbiBwcm9wcyApIHtcblx0XHRuYW1lID0gY2FtZWxDYXNlKCBpbmRleCApO1xuXHRcdGVhc2luZyA9IHNwZWNpYWxFYXNpbmdbIG5hbWUgXTtcblx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdO1xuXHRcdGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRcdGVhc2luZyA9IHZhbHVlWyAxIF07XG5cdFx0XHR2YWx1ZSA9IHByb3BzWyBpbmRleCBdID0gdmFsdWVbIDAgXTtcblx0XHR9XG5cblx0XHRpZiAoIGluZGV4ICE9PSBuYW1lICkge1xuXHRcdFx0cHJvcHNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0ZGVsZXRlIHByb3BzWyBpbmRleCBdO1xuXHRcdH1cblxuXHRcdGhvb2tzID0galF1ZXJ5LmNzc0hvb2tzWyBuYW1lIF07XG5cdFx0aWYgKCBob29rcyAmJiBcImV4cGFuZFwiIGluIGhvb2tzICkge1xuXHRcdFx0dmFsdWUgPSBob29rcy5leHBhbmQoIHZhbHVlICk7XG5cdFx0XHRkZWxldGUgcHJvcHNbIG5hbWUgXTtcblxuXHRcdFx0Ly8gTm90IHF1aXRlICQuZXh0ZW5kLCB0aGlzIHdvbid0IG92ZXJ3cml0ZSBleGlzdGluZyBrZXlzLlxuXHRcdFx0Ly8gUmV1c2luZyAnaW5kZXgnIGJlY2F1c2Ugd2UgaGF2ZSB0aGUgY29ycmVjdCBcIm5hbWVcIlxuXHRcdFx0Zm9yICggaW5kZXggaW4gdmFsdWUgKSB7XG5cdFx0XHRcdGlmICggISggaW5kZXggaW4gcHJvcHMgKSApIHtcblx0XHRcdFx0XHRwcm9wc1sgaW5kZXggXSA9IHZhbHVlWyBpbmRleCBdO1xuXHRcdFx0XHRcdHNwZWNpYWxFYXNpbmdbIGluZGV4IF0gPSBlYXNpbmc7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0c3BlY2lhbEVhc2luZ1sgbmFtZSBdID0gZWFzaW5nO1xuXHRcdH1cblx0fVxufVxuXG5mdW5jdGlvbiBBbmltYXRpb24oIGVsZW0sIHByb3BlcnRpZXMsIG9wdGlvbnMgKSB7XG5cdHZhciByZXN1bHQsXG5cdFx0c3RvcHBlZCxcblx0XHRpbmRleCA9IDAsXG5cdFx0bGVuZ3RoID0gQW5pbWF0aW9uLnByZWZpbHRlcnMubGVuZ3RoLFxuXHRcdGRlZmVycmVkID0galF1ZXJ5LkRlZmVycmVkKCkuYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gRG9uJ3QgbWF0Y2ggZWxlbSBpbiB0aGUgOmFuaW1hdGVkIHNlbGVjdG9yXG5cdFx0XHRkZWxldGUgdGljay5lbGVtO1xuXHRcdH0gKSxcblx0XHR0aWNrID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRpZiAoIHN0b3BwZWQgKSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHRcdHZhciBjdXJyZW50VGltZSA9IGZ4Tm93IHx8IGNyZWF0ZUZ4Tm93KCksXG5cdFx0XHRcdHJlbWFpbmluZyA9IE1hdGgubWF4KCAwLCBhbmltYXRpb24uc3RhcnRUaW1lICsgYW5pbWF0aW9uLmR1cmF0aW9uIC0gY3VycmVudFRpbWUgKSxcblxuXHRcdFx0XHQvLyBTdXBwb3J0OiBBbmRyb2lkIDIuMyBvbmx5XG5cdFx0XHRcdC8vIEFyY2hhaWMgY3Jhc2ggYnVnIHdvbid0IGFsbG93IHVzIHRvIHVzZSBgMSAtICggMC41IHx8IDAgKWAgKCMxMjQ5Nylcblx0XHRcdFx0dGVtcCA9IHJlbWFpbmluZyAvIGFuaW1hdGlvbi5kdXJhdGlvbiB8fCAwLFxuXHRcdFx0XHRwZXJjZW50ID0gMSAtIHRlbXAsXG5cdFx0XHRcdGluZGV4ID0gMCxcblx0XHRcdFx0bGVuZ3RoID0gYW5pbWF0aW9uLnR3ZWVucy5sZW5ndGg7XG5cblx0XHRcdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCBwZXJjZW50ICk7XG5cdFx0XHR9XG5cblx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCBwZXJjZW50LCByZW1haW5pbmcgXSApO1xuXG5cdFx0XHQvLyBJZiB0aGVyZSdzIG1vcmUgdG8gZG8sIHlpZWxkXG5cdFx0XHRpZiAoIHBlcmNlbnQgPCAxICYmIGxlbmd0aCApIHtcblx0XHRcdFx0cmV0dXJuIHJlbWFpbmluZztcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgdGhpcyB3YXMgYW4gZW1wdHkgYW5pbWF0aW9uLCBzeW50aGVzaXplIGEgZmluYWwgcHJvZ3Jlc3Mgbm90aWZpY2F0aW9uXG5cdFx0XHRpZiAoICFsZW5ndGggKSB7XG5cdFx0XHRcdGRlZmVycmVkLm5vdGlmeVdpdGgoIGVsZW0sIFsgYW5pbWF0aW9uLCAxLCAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gUmVzb2x2ZSB0aGUgYW5pbWF0aW9uIGFuZCByZXBvcnQgaXRzIGNvbmNsdXNpb25cblx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiBdICk7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fSxcblx0XHRhbmltYXRpb24gPSBkZWZlcnJlZC5wcm9taXNlKCB7XG5cdFx0XHRlbGVtOiBlbGVtLFxuXHRcdFx0cHJvcHM6IGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wZXJ0aWVzICksXG5cdFx0XHRvcHRzOiBqUXVlcnkuZXh0ZW5kKCB0cnVlLCB7XG5cdFx0XHRcdHNwZWNpYWxFYXNpbmc6IHt9LFxuXHRcdFx0XHRlYXNpbmc6IGpRdWVyeS5lYXNpbmcuX2RlZmF1bHRcblx0XHRcdH0sIG9wdGlvbnMgKSxcblx0XHRcdG9yaWdpbmFsUHJvcGVydGllczogcHJvcGVydGllcyxcblx0XHRcdG9yaWdpbmFsT3B0aW9uczogb3B0aW9ucyxcblx0XHRcdHN0YXJ0VGltZTogZnhOb3cgfHwgY3JlYXRlRnhOb3coKSxcblx0XHRcdGR1cmF0aW9uOiBvcHRpb25zLmR1cmF0aW9uLFxuXHRcdFx0dHdlZW5zOiBbXSxcblx0XHRcdGNyZWF0ZVR3ZWVuOiBmdW5jdGlvbiggcHJvcCwgZW5kICkge1xuXHRcdFx0XHR2YXIgdHdlZW4gPSBqUXVlcnkuVHdlZW4oIGVsZW0sIGFuaW1hdGlvbi5vcHRzLCBwcm9wLCBlbmQsXG5cdFx0XHRcdFx0XHRhbmltYXRpb24ub3B0cy5zcGVjaWFsRWFzaW5nWyBwcm9wIF0gfHwgYW5pbWF0aW9uLm9wdHMuZWFzaW5nICk7XG5cdFx0XHRcdGFuaW1hdGlvbi50d2VlbnMucHVzaCggdHdlZW4gKTtcblx0XHRcdFx0cmV0dXJuIHR3ZWVuO1xuXHRcdFx0fSxcblx0XHRcdHN0b3A6IGZ1bmN0aW9uKCBnb3RvRW5kICkge1xuXHRcdFx0XHR2YXIgaW5kZXggPSAwLFxuXG5cdFx0XHRcdFx0Ly8gSWYgd2UgYXJlIGdvaW5nIHRvIHRoZSBlbmQsIHdlIHdhbnQgdG8gcnVuIGFsbCB0aGUgdHdlZW5zXG5cdFx0XHRcdFx0Ly8gb3RoZXJ3aXNlIHdlIHNraXAgdGhpcyBwYXJ0XG5cdFx0XHRcdFx0bGVuZ3RoID0gZ290b0VuZCA/IGFuaW1hdGlvbi50d2VlbnMubGVuZ3RoIDogMDtcblx0XHRcdFx0aWYgKCBzdG9wcGVkICkge1xuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHN0b3BwZWQgPSB0cnVlO1xuXHRcdFx0XHRmb3IgKCA7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCsrICkge1xuXHRcdFx0XHRcdGFuaW1hdGlvbi50d2VlbnNbIGluZGV4IF0ucnVuKCAxICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBSZXNvbHZlIHdoZW4gd2UgcGxheWVkIHRoZSBsYXN0IGZyYW1lOyBvdGhlcndpc2UsIHJlamVjdFxuXHRcdFx0XHRpZiAoIGdvdG9FbmQgKSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQubm90aWZ5V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIDEsIDAgXSApO1xuXHRcdFx0XHRcdGRlZmVycmVkLnJlc29sdmVXaXRoKCBlbGVtLCBbIGFuaW1hdGlvbiwgZ290b0VuZCBdICk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0ZGVmZXJyZWQucmVqZWN0V2l0aCggZWxlbSwgWyBhbmltYXRpb24sIGdvdG9FbmQgXSApO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0fVxuXHRcdH0gKSxcblx0XHRwcm9wcyA9IGFuaW1hdGlvbi5wcm9wcztcblxuXHRwcm9wRmlsdGVyKCBwcm9wcywgYW5pbWF0aW9uLm9wdHMuc3BlY2lhbEVhc2luZyApO1xuXG5cdGZvciAoIDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0cmVzdWx0ID0gQW5pbWF0aW9uLnByZWZpbHRlcnNbIGluZGV4IF0uY2FsbCggYW5pbWF0aW9uLCBlbGVtLCBwcm9wcywgYW5pbWF0aW9uLm9wdHMgKTtcblx0XHRpZiAoIHJlc3VsdCApIHtcblx0XHRcdGlmICggaXNGdW5jdGlvbiggcmVzdWx0LnN0b3AgKSApIHtcblx0XHRcdFx0alF1ZXJ5Ll9xdWV1ZUhvb2tzKCBhbmltYXRpb24uZWxlbSwgYW5pbWF0aW9uLm9wdHMucXVldWUgKS5zdG9wID1cblx0XHRcdFx0XHRyZXN1bHQuc3RvcC5iaW5kKCByZXN1bHQgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXN1bHQ7XG5cdFx0fVxuXHR9XG5cblx0alF1ZXJ5Lm1hcCggcHJvcHMsIGNyZWF0ZVR3ZWVuLCBhbmltYXRpb24gKTtcblxuXHRpZiAoIGlzRnVuY3Rpb24oIGFuaW1hdGlvbi5vcHRzLnN0YXJ0ICkgKSB7XG5cdFx0YW5pbWF0aW9uLm9wdHMuc3RhcnQuY2FsbCggZWxlbSwgYW5pbWF0aW9uICk7XG5cdH1cblxuXHQvLyBBdHRhY2ggY2FsbGJhY2tzIGZyb20gb3B0aW9uc1xuXHRhbmltYXRpb25cblx0XHQucHJvZ3Jlc3MoIGFuaW1hdGlvbi5vcHRzLnByb2dyZXNzIClcblx0XHQuZG9uZSggYW5pbWF0aW9uLm9wdHMuZG9uZSwgYW5pbWF0aW9uLm9wdHMuY29tcGxldGUgKVxuXHRcdC5mYWlsKCBhbmltYXRpb24ub3B0cy5mYWlsIClcblx0XHQuYWx3YXlzKCBhbmltYXRpb24ub3B0cy5hbHdheXMgKTtcblxuXHRqUXVlcnkuZngudGltZXIoXG5cdFx0alF1ZXJ5LmV4dGVuZCggdGljaywge1xuXHRcdFx0ZWxlbTogZWxlbSxcblx0XHRcdGFuaW06IGFuaW1hdGlvbixcblx0XHRcdHF1ZXVlOiBhbmltYXRpb24ub3B0cy5xdWV1ZVxuXHRcdH0gKVxuXHQpO1xuXG5cdHJldHVybiBhbmltYXRpb247XG59XG5cbmpRdWVyeS5BbmltYXRpb24gPSBqUXVlcnkuZXh0ZW5kKCBBbmltYXRpb24sIHtcblxuXHR0d2VlbmVyczoge1xuXHRcdFwiKlwiOiBbIGZ1bmN0aW9uKCBwcm9wLCB2YWx1ZSApIHtcblx0XHRcdHZhciB0d2VlbiA9IHRoaXMuY3JlYXRlVHdlZW4oIHByb3AsIHZhbHVlICk7XG5cdFx0XHRhZGp1c3RDU1MoIHR3ZWVuLmVsZW0sIHByb3AsIHJjc3NOdW0uZXhlYyggdmFsdWUgKSwgdHdlZW4gKTtcblx0XHRcdHJldHVybiB0d2Vlbjtcblx0XHR9IF1cblx0fSxcblxuXHR0d2VlbmVyOiBmdW5jdGlvbiggcHJvcHMsIGNhbGxiYWNrICkge1xuXHRcdGlmICggaXNGdW5jdGlvbiggcHJvcHMgKSApIHtcblx0XHRcdGNhbGxiYWNrID0gcHJvcHM7XG5cdFx0XHRwcm9wcyA9IFsgXCIqXCIgXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cHJvcHMgPSBwcm9wcy5tYXRjaCggcm5vdGh0bWx3aGl0ZSApO1xuXHRcdH1cblxuXHRcdHZhciBwcm9wLFxuXHRcdFx0aW5kZXggPSAwLFxuXHRcdFx0bGVuZ3RoID0gcHJvcHMubGVuZ3RoO1xuXG5cdFx0Zm9yICggOyBpbmRleCA8IGxlbmd0aDsgaW5kZXgrKyApIHtcblx0XHRcdHByb3AgPSBwcm9wc1sgaW5kZXggXTtcblx0XHRcdEFuaW1hdGlvbi50d2VlbmVyc1sgcHJvcCBdID0gQW5pbWF0aW9uLnR3ZWVuZXJzWyBwcm9wIF0gfHwgW107XG5cdFx0XHRBbmltYXRpb24udHdlZW5lcnNbIHByb3AgXS51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH1cblx0fSxcblxuXHRwcmVmaWx0ZXJzOiBbIGRlZmF1bHRQcmVmaWx0ZXIgXSxcblxuXHRwcmVmaWx0ZXI6IGZ1bmN0aW9uKCBjYWxsYmFjaywgcHJlcGVuZCApIHtcblx0XHRpZiAoIHByZXBlbmQgKSB7XG5cdFx0XHRBbmltYXRpb24ucHJlZmlsdGVycy51bnNoaWZ0KCBjYWxsYmFjayApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRBbmltYXRpb24ucHJlZmlsdGVycy5wdXNoKCBjYWxsYmFjayApO1xuXHRcdH1cblx0fVxufSApO1xuXG5qUXVlcnkuc3BlZWQgPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgZm4gKSB7XG5cdHZhciBvcHQgPSBzcGVlZCAmJiB0eXBlb2Ygc3BlZWQgPT09IFwib2JqZWN0XCIgPyBqUXVlcnkuZXh0ZW5kKCB7fSwgc3BlZWQgKSA6IHtcblx0XHRjb21wbGV0ZTogZm4gfHwgIWZuICYmIGVhc2luZyB8fFxuXHRcdFx0aXNGdW5jdGlvbiggc3BlZWQgKSAmJiBzcGVlZCxcblx0XHRkdXJhdGlvbjogc3BlZWQsXG5cdFx0ZWFzaW5nOiBmbiAmJiBlYXNpbmcgfHwgZWFzaW5nICYmICFpc0Z1bmN0aW9uKCBlYXNpbmcgKSAmJiBlYXNpbmdcblx0fTtcblxuXHQvLyBHbyB0byB0aGUgZW5kIHN0YXRlIGlmIGZ4IGFyZSBvZmZcblx0aWYgKCBqUXVlcnkuZngub2ZmICkge1xuXHRcdG9wdC5kdXJhdGlvbiA9IDA7XG5cblx0fSBlbHNlIHtcblx0XHRpZiAoIHR5cGVvZiBvcHQuZHVyYXRpb24gIT09IFwibnVtYmVyXCIgKSB7XG5cdFx0XHRpZiAoIG9wdC5kdXJhdGlvbiBpbiBqUXVlcnkuZnguc3BlZWRzICkge1xuXHRcdFx0XHRvcHQuZHVyYXRpb24gPSBqUXVlcnkuZnguc3BlZWRzWyBvcHQuZHVyYXRpb24gXTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0b3B0LmR1cmF0aW9uID0galF1ZXJ5LmZ4LnNwZWVkcy5fZGVmYXVsdDtcblx0XHRcdH1cblx0XHR9XG5cdH1cblxuXHQvLyBOb3JtYWxpemUgb3B0LnF1ZXVlIC0gdHJ1ZS91bmRlZmluZWQvbnVsbCAtPiBcImZ4XCJcblx0aWYgKCBvcHQucXVldWUgPT0gbnVsbCB8fCBvcHQucXVldWUgPT09IHRydWUgKSB7XG5cdFx0b3B0LnF1ZXVlID0gXCJmeFwiO1xuXHR9XG5cblx0Ly8gUXVldWVpbmdcblx0b3B0Lm9sZCA9IG9wdC5jb21wbGV0ZTtcblxuXHRvcHQuY29tcGxldGUgPSBmdW5jdGlvbigpIHtcblx0XHRpZiAoIGlzRnVuY3Rpb24oIG9wdC5vbGQgKSApIHtcblx0XHRcdG9wdC5vbGQuY2FsbCggdGhpcyApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0LnF1ZXVlICkge1xuXHRcdFx0alF1ZXJ5LmRlcXVldWUoIHRoaXMsIG9wdC5xdWV1ZSApO1xuXHRcdH1cblx0fTtcblxuXHRyZXR1cm4gb3B0O1xufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRmYWRlVG86IGZ1bmN0aW9uKCBzcGVlZCwgdG8sIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cblx0XHQvLyBTaG93IGFueSBoaWRkZW4gZWxlbWVudHMgYWZ0ZXIgc2V0dGluZyBvcGFjaXR5IHRvIDBcblx0XHRyZXR1cm4gdGhpcy5maWx0ZXIoIGlzSGlkZGVuV2l0aGluVHJlZSApLmNzcyggXCJvcGFjaXR5XCIsIDAgKS5zaG93KClcblxuXHRcdFx0Ly8gQW5pbWF0ZSB0byB0aGUgdmFsdWUgc3BlY2lmaWVkXG5cdFx0XHQuZW5kKCkuYW5pbWF0ZSggeyBvcGFjaXR5OiB0byB9LCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9LFxuXHRhbmltYXRlOiBmdW5jdGlvbiggcHJvcCwgc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0dmFyIGVtcHR5ID0galF1ZXJ5LmlzRW1wdHlPYmplY3QoIHByb3AgKSxcblx0XHRcdG9wdGFsbCA9IGpRdWVyeS5zcGVlZCggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSxcblx0XHRcdGRvQW5pbWF0aW9uID0gZnVuY3Rpb24oKSB7XG5cblx0XHRcdFx0Ly8gT3BlcmF0ZSBvbiBhIGNvcHkgb2YgcHJvcCBzbyBwZXItcHJvcGVydHkgZWFzaW5nIHdvbid0IGJlIGxvc3Rcblx0XHRcdFx0dmFyIGFuaW0gPSBBbmltYXRpb24oIHRoaXMsIGpRdWVyeS5leHRlbmQoIHt9LCBwcm9wICksIG9wdGFsbCApO1xuXG5cdFx0XHRcdC8vIEVtcHR5IGFuaW1hdGlvbnMsIG9yIGZpbmlzaGluZyByZXNvbHZlcyBpbW1lZGlhdGVseVxuXHRcdFx0XHRpZiAoIGVtcHR5IHx8IGRhdGFQcml2LmdldCggdGhpcywgXCJmaW5pc2hcIiApICkge1xuXHRcdFx0XHRcdGFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXHRcdFx0ZG9BbmltYXRpb24uZmluaXNoID0gZG9BbmltYXRpb247XG5cblx0XHRyZXR1cm4gZW1wdHkgfHwgb3B0YWxsLnF1ZXVlID09PSBmYWxzZSA/XG5cdFx0XHR0aGlzLmVhY2goIGRvQW5pbWF0aW9uICkgOlxuXHRcdFx0dGhpcy5xdWV1ZSggb3B0YWxsLnF1ZXVlLCBkb0FuaW1hdGlvbiApO1xuXHR9LFxuXHRzdG9wOiBmdW5jdGlvbiggdHlwZSwgY2xlYXJRdWV1ZSwgZ290b0VuZCApIHtcblx0XHR2YXIgc3RvcFF1ZXVlID0gZnVuY3Rpb24oIGhvb2tzICkge1xuXHRcdFx0dmFyIHN0b3AgPSBob29rcy5zdG9wO1xuXHRcdFx0ZGVsZXRlIGhvb2tzLnN0b3A7XG5cdFx0XHRzdG9wKCBnb3RvRW5kICk7XG5cdFx0fTtcblxuXHRcdGlmICggdHlwZW9mIHR5cGUgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRnb3RvRW5kID0gY2xlYXJRdWV1ZTtcblx0XHRcdGNsZWFyUXVldWUgPSB0eXBlO1xuXHRcdFx0dHlwZSA9IHVuZGVmaW5lZDtcblx0XHR9XG5cdFx0aWYgKCBjbGVhclF1ZXVlICYmIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dGhpcy5xdWV1ZSggdHlwZSB8fCBcImZ4XCIsIFtdICk7XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHR2YXIgZGVxdWV1ZSA9IHRydWUsXG5cdFx0XHRcdGluZGV4ID0gdHlwZSAhPSBudWxsICYmIHR5cGUgKyBcInF1ZXVlSG9va3NcIixcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0ZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApO1xuXG5cdFx0XHRpZiAoIGluZGV4ICkge1xuXHRcdFx0XHRpZiAoIGRhdGFbIGluZGV4IF0gJiYgZGF0YVsgaW5kZXggXS5zdG9wICkge1xuXHRcdFx0XHRcdHN0b3BRdWV1ZSggZGF0YVsgaW5kZXggXSApO1xuXHRcdFx0XHR9XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRmb3IgKCBpbmRleCBpbiBkYXRhICkge1xuXHRcdFx0XHRcdGlmICggZGF0YVsgaW5kZXggXSAmJiBkYXRhWyBpbmRleCBdLnN0b3AgJiYgcnJ1bi50ZXN0KCBpbmRleCApICkge1xuXHRcdFx0XHRcdFx0c3RvcFF1ZXVlKCBkYXRhWyBpbmRleCBdICk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cblx0XHRcdGZvciAoIGluZGV4ID0gdGltZXJzLmxlbmd0aDsgaW5kZXgtLTsgKSB7XG5cdFx0XHRcdGlmICggdGltZXJzWyBpbmRleCBdLmVsZW0gPT09IHRoaXMgJiZcblx0XHRcdFx0XHQoIHR5cGUgPT0gbnVsbCB8fCB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSApIHtcblxuXHRcdFx0XHRcdHRpbWVyc1sgaW5kZXggXS5hbmltLnN0b3AoIGdvdG9FbmQgKTtcblx0XHRcdFx0XHRkZXF1ZXVlID0gZmFsc2U7XG5cdFx0XHRcdFx0dGltZXJzLnNwbGljZSggaW5kZXgsIDEgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTdGFydCB0aGUgbmV4dCBpbiB0aGUgcXVldWUgaWYgdGhlIGxhc3Qgc3RlcCB3YXNuJ3QgZm9yY2VkLlxuXHRcdFx0Ly8gVGltZXJzIGN1cnJlbnRseSB3aWxsIGNhbGwgdGhlaXIgY29tcGxldGUgY2FsbGJhY2tzLCB3aGljaFxuXHRcdFx0Ly8gd2lsbCBkZXF1ZXVlIGJ1dCBvbmx5IGlmIHRoZXkgd2VyZSBnb3RvRW5kLlxuXHRcdFx0aWYgKCBkZXF1ZXVlIHx8ICFnb3RvRW5kICkge1xuXHRcdFx0XHRqUXVlcnkuZGVxdWV1ZSggdGhpcywgdHlwZSApO1xuXHRcdFx0fVxuXHRcdH0gKTtcblx0fSxcblx0ZmluaXNoOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRpZiAoIHR5cGUgIT09IGZhbHNlICkge1xuXHRcdFx0dHlwZSA9IHR5cGUgfHwgXCJmeFwiO1xuXHRcdH1cblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBpbmRleCxcblx0XHRcdFx0ZGF0YSA9IGRhdGFQcml2LmdldCggdGhpcyApLFxuXHRcdFx0XHRxdWV1ZSA9IGRhdGFbIHR5cGUgKyBcInF1ZXVlXCIgXSxcblx0XHRcdFx0aG9va3MgPSBkYXRhWyB0eXBlICsgXCJxdWV1ZUhvb2tzXCIgXSxcblx0XHRcdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycyxcblx0XHRcdFx0bGVuZ3RoID0gcXVldWUgPyBxdWV1ZS5sZW5ndGggOiAwO1xuXG5cdFx0XHQvLyBFbmFibGUgZmluaXNoaW5nIGZsYWcgb24gcHJpdmF0ZSBkYXRhXG5cdFx0XHRkYXRhLmZpbmlzaCA9IHRydWU7XG5cblx0XHRcdC8vIEVtcHR5IHRoZSBxdWV1ZSBmaXJzdFxuXHRcdFx0alF1ZXJ5LnF1ZXVlKCB0aGlzLCB0eXBlLCBbXSApO1xuXG5cdFx0XHRpZiAoIGhvb2tzICYmIGhvb2tzLnN0b3AgKSB7XG5cdFx0XHRcdGhvb2tzLnN0b3AuY2FsbCggdGhpcywgdHJ1ZSApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBMb29rIGZvciBhbnkgYWN0aXZlIGFuaW1hdGlvbnMsIGFuZCBmaW5pc2ggdGhlbVxuXHRcdFx0Zm9yICggaW5kZXggPSB0aW1lcnMubGVuZ3RoOyBpbmRleC0tOyApIHtcblx0XHRcdFx0aWYgKCB0aW1lcnNbIGluZGV4IF0uZWxlbSA9PT0gdGhpcyAmJiB0aW1lcnNbIGluZGV4IF0ucXVldWUgPT09IHR5cGUgKSB7XG5cdFx0XHRcdFx0dGltZXJzWyBpbmRleCBdLmFuaW0uc3RvcCggdHJ1ZSApO1xuXHRcdFx0XHRcdHRpbWVycy5zcGxpY2UoIGluZGV4LCAxICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gTG9vayBmb3IgYW55IGFuaW1hdGlvbnMgaW4gdGhlIG9sZCBxdWV1ZSBhbmQgZmluaXNoIHRoZW1cblx0XHRcdGZvciAoIGluZGV4ID0gMDsgaW5kZXggPCBsZW5ndGg7IGluZGV4KysgKSB7XG5cdFx0XHRcdGlmICggcXVldWVbIGluZGV4IF0gJiYgcXVldWVbIGluZGV4IF0uZmluaXNoICkge1xuXHRcdFx0XHRcdHF1ZXVlWyBpbmRleCBdLmZpbmlzaC5jYWxsKCB0aGlzICk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0Ly8gVHVybiBvZmYgZmluaXNoaW5nIGZsYWdcblx0XHRcdGRlbGV0ZSBkYXRhLmZpbmlzaDtcblx0XHR9ICk7XG5cdH1cbn0gKTtcblxualF1ZXJ5LmVhY2goIFsgXCJ0b2dnbGVcIiwgXCJzaG93XCIsIFwiaGlkZVwiIF0sIGZ1bmN0aW9uKCBpLCBuYW1lICkge1xuXHR2YXIgY3NzRm4gPSBqUXVlcnkuZm5bIG5hbWUgXTtcblx0alF1ZXJ5LmZuWyBuYW1lIF0gPSBmdW5jdGlvbiggc3BlZWQsIGVhc2luZywgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIHNwZWVkID09IG51bGwgfHwgdHlwZW9mIHNwZWVkID09PSBcImJvb2xlYW5cIiA/XG5cdFx0XHRjc3NGbi5hcHBseSggdGhpcywgYXJndW1lbnRzICkgOlxuXHRcdFx0dGhpcy5hbmltYXRlKCBnZW5GeCggbmFtZSwgdHJ1ZSApLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSApO1xuXG4vLyBHZW5lcmF0ZSBzaG9ydGN1dHMgZm9yIGN1c3RvbSBhbmltYXRpb25zXG5qUXVlcnkuZWFjaCgge1xuXHRzbGlkZURvd246IGdlbkZ4KCBcInNob3dcIiApLFxuXHRzbGlkZVVwOiBnZW5GeCggXCJoaWRlXCIgKSxcblx0c2xpZGVUb2dnbGU6IGdlbkZ4KCBcInRvZ2dsZVwiICksXG5cdGZhZGVJbjogeyBvcGFjaXR5OiBcInNob3dcIiB9LFxuXHRmYWRlT3V0OiB7IG9wYWNpdHk6IFwiaGlkZVwiIH0sXG5cdGZhZGVUb2dnbGU6IHsgb3BhY2l0eTogXCJ0b2dnbGVcIiB9XG59LCBmdW5jdGlvbiggbmFtZSwgcHJvcHMgKSB7XG5cdGpRdWVyeS5mblsgbmFtZSBdID0gZnVuY3Rpb24oIHNwZWVkLCBlYXNpbmcsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiB0aGlzLmFuaW1hdGUoIHByb3BzLCBzcGVlZCwgZWFzaW5nLCBjYWxsYmFjayApO1xuXHR9O1xufSApO1xuXG5qUXVlcnkudGltZXJzID0gW107XG5qUXVlcnkuZngudGljayA9IGZ1bmN0aW9uKCkge1xuXHR2YXIgdGltZXIsXG5cdFx0aSA9IDAsXG5cdFx0dGltZXJzID0galF1ZXJ5LnRpbWVycztcblxuXHRmeE5vdyA9IERhdGUubm93KCk7XG5cblx0Zm9yICggOyBpIDwgdGltZXJzLmxlbmd0aDsgaSsrICkge1xuXHRcdHRpbWVyID0gdGltZXJzWyBpIF07XG5cblx0XHQvLyBSdW4gdGhlIHRpbWVyIGFuZCBzYWZlbHkgcmVtb3ZlIGl0IHdoZW4gZG9uZSAoYWxsb3dpbmcgZm9yIGV4dGVybmFsIHJlbW92YWwpXG5cdFx0aWYgKCAhdGltZXIoKSAmJiB0aW1lcnNbIGkgXSA9PT0gdGltZXIgKSB7XG5cdFx0XHR0aW1lcnMuc3BsaWNlKCBpLS0sIDEgKTtcblx0XHR9XG5cdH1cblxuXHRpZiAoICF0aW1lcnMubGVuZ3RoICkge1xuXHRcdGpRdWVyeS5meC5zdG9wKCk7XG5cdH1cblx0ZnhOb3cgPSB1bmRlZmluZWQ7XG59O1xuXG5qUXVlcnkuZngudGltZXIgPSBmdW5jdGlvbiggdGltZXIgKSB7XG5cdGpRdWVyeS50aW1lcnMucHVzaCggdGltZXIgKTtcblx0alF1ZXJ5LmZ4LnN0YXJ0KCk7XG59O1xuXG5qUXVlcnkuZnguaW50ZXJ2YWwgPSAxMztcbmpRdWVyeS5meC5zdGFydCA9IGZ1bmN0aW9uKCkge1xuXHRpZiAoIGluUHJvZ3Jlc3MgKSB7XG5cdFx0cmV0dXJuO1xuXHR9XG5cblx0aW5Qcm9ncmVzcyA9IHRydWU7XG5cdHNjaGVkdWxlKCk7XG59O1xuXG5qUXVlcnkuZnguc3RvcCA9IGZ1bmN0aW9uKCkge1xuXHRpblByb2dyZXNzID0gbnVsbDtcbn07XG5cbmpRdWVyeS5meC5zcGVlZHMgPSB7XG5cdHNsb3c6IDYwMCxcblx0ZmFzdDogMjAwLFxuXG5cdC8vIERlZmF1bHQgc3BlZWRcblx0X2RlZmF1bHQ6IDQwMFxufTtcblxuXG4vLyBCYXNlZCBvZmYgb2YgdGhlIHBsdWdpbiBieSBDbGludCBIZWxmZXJzLCB3aXRoIHBlcm1pc3Npb24uXG4vLyBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxMDAzMjQwMTQ3NDcvaHR0cDovL2JsaW5kc2lnbmFscy5jb20vaW5kZXgucGhwLzIwMDkvMDcvanF1ZXJ5LWRlbGF5L1xualF1ZXJ5LmZuLmRlbGF5ID0gZnVuY3Rpb24oIHRpbWUsIHR5cGUgKSB7XG5cdHRpbWUgPSBqUXVlcnkuZnggPyBqUXVlcnkuZnguc3BlZWRzWyB0aW1lIF0gfHwgdGltZSA6IHRpbWU7XG5cdHR5cGUgPSB0eXBlIHx8IFwiZnhcIjtcblxuXHRyZXR1cm4gdGhpcy5xdWV1ZSggdHlwZSwgZnVuY3Rpb24oIG5leHQsIGhvb2tzICkge1xuXHRcdHZhciB0aW1lb3V0ID0gd2luZG93LnNldFRpbWVvdXQoIG5leHQsIHRpbWUgKTtcblx0XHRob29rcy5zdG9wID0gZnVuY3Rpb24oKSB7XG5cdFx0XHR3aW5kb3cuY2xlYXJUaW1lb3V0KCB0aW1lb3V0ICk7XG5cdFx0fTtcblx0fSApO1xufTtcblxuXG4oIGZ1bmN0aW9uKCkge1xuXHR2YXIgaW5wdXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcImlucHV0XCIgKSxcblx0XHRzZWxlY3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcInNlbGVjdFwiICksXG5cdFx0b3B0ID0gc2VsZWN0LmFwcGVuZENoaWxkKCBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCBcIm9wdGlvblwiICkgKTtcblxuXHRpbnB1dC50eXBlID0gXCJjaGVja2JveFwiO1xuXG5cdC8vIFN1cHBvcnQ6IEFuZHJvaWQgPD00LjMgb25seVxuXHQvLyBEZWZhdWx0IHZhbHVlIGZvciBhIGNoZWNrYm94IHNob3VsZCBiZSBcIm9uXCJcblx0c3VwcG9ydC5jaGVja09uID0gaW5wdXQudmFsdWUgIT09IFwiXCI7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIE11c3QgYWNjZXNzIHNlbGVjdGVkSW5kZXggdG8gbWFrZSBkZWZhdWx0IG9wdGlvbnMgc2VsZWN0XG5cdHN1cHBvcnQub3B0U2VsZWN0ZWQgPSBvcHQuc2VsZWN0ZWQ7XG5cblx0Ly8gU3VwcG9ydDogSUUgPD0xMSBvbmx5XG5cdC8vIEFuIGlucHV0IGxvc2VzIGl0cyB2YWx1ZSBhZnRlciBiZWNvbWluZyBhIHJhZGlvXG5cdGlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJpbnB1dFwiICk7XG5cdGlucHV0LnZhbHVlID0gXCJ0XCI7XG5cdGlucHV0LnR5cGUgPSBcInJhZGlvXCI7XG5cdHN1cHBvcnQucmFkaW9WYWx1ZSA9IGlucHV0LnZhbHVlID09PSBcInRcIjtcbn0gKSgpO1xuXG5cbnZhciBib29sSG9vayxcblx0YXR0ckhhbmRsZSA9IGpRdWVyeS5leHByLmF0dHJIYW5kbGU7XG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGpRdWVyeS5hdHRyLCBuYW1lLCB2YWx1ZSwgYXJndW1lbnRzLmxlbmd0aCA+IDEgKTtcblx0fSxcblxuXHRyZW1vdmVBdHRyOiBmdW5jdGlvbiggbmFtZSApIHtcblx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbigpIHtcblx0XHRcdGpRdWVyeS5yZW1vdmVBdHRyKCB0aGlzLCBuYW1lICk7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0YXR0cjogZnVuY3Rpb24oIGVsZW0sIG5hbWUsIHZhbHVlICkge1xuXHRcdHZhciByZXQsIGhvb2tzLFxuXHRcdFx0blR5cGUgPSBlbGVtLm5vZGVUeXBlO1xuXG5cdFx0Ly8gRG9uJ3QgZ2V0L3NldCBhdHRyaWJ1dGVzIG9uIHRleHQsIGNvbW1lbnQgYW5kIGF0dHJpYnV0ZSBub2Rlc1xuXHRcdGlmICggblR5cGUgPT09IDMgfHwgblR5cGUgPT09IDggfHwgblR5cGUgPT09IDIgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gRmFsbGJhY2sgdG8gcHJvcCB3aGVuIGF0dHJpYnV0ZXMgYXJlIG5vdCBzdXBwb3J0ZWRcblx0XHRpZiAoIHR5cGVvZiBlbGVtLmdldEF0dHJpYnV0ZSA9PT0gXCJ1bmRlZmluZWRcIiApIHtcblx0XHRcdHJldHVybiBqUXVlcnkucHJvcCggZWxlbSwgbmFtZSwgdmFsdWUgKTtcblx0XHR9XG5cblx0XHQvLyBBdHRyaWJ1dGUgaG9va3MgYXJlIGRldGVybWluZWQgYnkgdGhlIGxvd2VyY2FzZSB2ZXJzaW9uXG5cdFx0Ly8gR3JhYiBuZWNlc3NhcnkgaG9vayBpZiBvbmUgaXMgZGVmaW5lZFxuXHRcdGlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXHRcdFx0aG9va3MgPSBqUXVlcnkuYXR0ckhvb2tzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fFxuXHRcdFx0XHQoIGpRdWVyeS5leHByLm1hdGNoLmJvb2wudGVzdCggbmFtZSApID8gYm9vbEhvb2sgOiB1bmRlZmluZWQgKTtcblx0XHR9XG5cblx0XHRpZiAoIHZhbHVlICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRpZiAoIHZhbHVlID09PSBudWxsICkge1xuXHRcdFx0XHRqUXVlcnkucmVtb3ZlQXR0ciggZWxlbSwgbmFtZSApO1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGlmICggaG9va3MgJiYgXCJzZXRcIiBpbiBob29rcyAmJlxuXHRcdFx0XHQoIHJldCA9IGhvb2tzLnNldCggZWxlbSwgdmFsdWUsIG5hbWUgKSApICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBuYW1lLCB2YWx1ZSArIFwiXCIgKTtcblx0XHRcdHJldHVybiB2YWx1ZTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cblx0XHRyZXQgPSBqUXVlcnkuZmluZC5hdHRyKCBlbGVtLCBuYW1lICk7XG5cblx0XHQvLyBOb24tZXhpc3RlbnQgYXR0cmlidXRlcyByZXR1cm4gbnVsbCwgd2Ugbm9ybWFsaXplIHRvIHVuZGVmaW5lZFxuXHRcdHJldHVybiByZXQgPT0gbnVsbCA/IHVuZGVmaW5lZCA6IHJldDtcblx0fSxcblxuXHRhdHRySG9va3M6IHtcblx0XHR0eXBlOiB7XG5cdFx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHRcdFx0aWYgKCAhc3VwcG9ydC5yYWRpb1ZhbHVlICYmIHZhbHVlID09PSBcInJhZGlvXCIgJiZcblx0XHRcdFx0XHRub2RlTmFtZSggZWxlbSwgXCJpbnB1dFwiICkgKSB7XG5cdFx0XHRcdFx0dmFyIHZhbCA9IGVsZW0udmFsdWU7XG5cdFx0XHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIFwidHlwZVwiLCB2YWx1ZSApO1xuXHRcdFx0XHRcdGlmICggdmFsICkge1xuXHRcdFx0XHRcdFx0ZWxlbS52YWx1ZSA9IHZhbDtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0cmV0dXJuIHZhbHVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHJlbW92ZUF0dHI6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSApIHtcblx0XHR2YXIgbmFtZSxcblx0XHRcdGkgPSAwLFxuXG5cdFx0XHQvLyBBdHRyaWJ1dGUgbmFtZXMgY2FuIGNvbnRhaW4gbm9uLUhUTUwgd2hpdGVzcGFjZSBjaGFyYWN0ZXJzXG5cdFx0XHQvLyBodHRwczovL2h0bWwuc3BlYy53aGF0d2cub3JnL211bHRpcGFnZS9zeW50YXguaHRtbCNhdHRyaWJ1dGVzLTJcblx0XHRcdGF0dHJOYW1lcyA9IHZhbHVlICYmIHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICk7XG5cblx0XHRpZiAoIGF0dHJOYW1lcyAmJiBlbGVtLm5vZGVUeXBlID09PSAxICkge1xuXHRcdFx0d2hpbGUgKCAoIG5hbWUgPSBhdHRyTmFtZXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGVsZW0ucmVtb3ZlQXR0cmlidXRlKCBuYW1lICk7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG59ICk7XG5cbi8vIEhvb2tzIGZvciBib29sZWFuIGF0dHJpYnV0ZXNcbmJvb2xIb29rID0ge1xuXHRzZXQ6IGZ1bmN0aW9uKCBlbGVtLCB2YWx1ZSwgbmFtZSApIHtcblx0XHRpZiAoIHZhbHVlID09PSBmYWxzZSApIHtcblxuXHRcdFx0Ly8gUmVtb3ZlIGJvb2xlYW4gYXR0cmlidXRlcyB3aGVuIHNldCB0byBmYWxzZVxuXHRcdFx0alF1ZXJ5LnJlbW92ZUF0dHIoIGVsZW0sIG5hbWUgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0ZWxlbS5zZXRBdHRyaWJ1dGUoIG5hbWUsIG5hbWUgKTtcblx0XHR9XG5cdFx0cmV0dXJuIG5hbWU7XG5cdH1cbn07XG5cbmpRdWVyeS5lYWNoKCBqUXVlcnkuZXhwci5tYXRjaC5ib29sLnNvdXJjZS5tYXRjaCggL1xcdysvZyApLCBmdW5jdGlvbiggaSwgbmFtZSApIHtcblx0dmFyIGdldHRlciA9IGF0dHJIYW5kbGVbIG5hbWUgXSB8fCBqUXVlcnkuZmluZC5hdHRyO1xuXG5cdGF0dHJIYW5kbGVbIG5hbWUgXSA9IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCBpc1hNTCApIHtcblx0XHR2YXIgcmV0LCBoYW5kbGUsXG5cdFx0XHRsb3dlcmNhc2VOYW1lID0gbmFtZS50b0xvd2VyQ2FzZSgpO1xuXG5cdFx0aWYgKCAhaXNYTUwgKSB7XG5cblx0XHRcdC8vIEF2b2lkIGFuIGluZmluaXRlIGxvb3AgYnkgdGVtcG9yYXJpbHkgcmVtb3ZpbmcgdGhpcyBmdW5jdGlvbiBmcm9tIHRoZSBnZXR0ZXJcblx0XHRcdGhhbmRsZSA9IGF0dHJIYW5kbGVbIGxvd2VyY2FzZU5hbWUgXTtcblx0XHRcdGF0dHJIYW5kbGVbIGxvd2VyY2FzZU5hbWUgXSA9IHJldDtcblx0XHRcdHJldCA9IGdldHRlciggZWxlbSwgbmFtZSwgaXNYTUwgKSAhPSBudWxsID9cblx0XHRcdFx0bG93ZXJjYXNlTmFtZSA6XG5cdFx0XHRcdG51bGw7XG5cdFx0XHRhdHRySGFuZGxlWyBsb3dlcmNhc2VOYW1lIF0gPSBoYW5kbGU7XG5cdFx0fVxuXHRcdHJldHVybiByZXQ7XG5cdH07XG59ICk7XG5cblxuXG5cbnZhciByZm9jdXNhYmxlID0gL14oPzppbnB1dHxzZWxlY3R8dGV4dGFyZWF8YnV0dG9uKSQvaSxcblx0cmNsaWNrYWJsZSA9IC9eKD86YXxhcmVhKSQvaTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRwcm9wOiBmdW5jdGlvbiggbmFtZSwgdmFsdWUgKSB7XG5cdFx0cmV0dXJuIGFjY2VzcyggdGhpcywgalF1ZXJ5LnByb3AsIG5hbWUsIHZhbHVlLCBhcmd1bWVudHMubGVuZ3RoID4gMSApO1xuXHR9LFxuXG5cdHJlbW92ZVByb3A6IGZ1bmN0aW9uKCBuYW1lICkge1xuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0ZGVsZXRlIHRoaXNbIGpRdWVyeS5wcm9wRml4WyBuYW1lIF0gfHwgbmFtZSBdO1xuXHRcdH0gKTtcblx0fVxufSApO1xuXG5qUXVlcnkuZXh0ZW5kKCB7XG5cdHByb3A6IGZ1bmN0aW9uKCBlbGVtLCBuYW1lLCB2YWx1ZSApIHtcblx0XHR2YXIgcmV0LCBob29rcyxcblx0XHRcdG5UeXBlID0gZWxlbS5ub2RlVHlwZTtcblxuXHRcdC8vIERvbid0IGdldC9zZXQgcHJvcGVydGllcyBvbiB0ZXh0LCBjb21tZW50IGFuZCBhdHRyaWJ1dGUgbm9kZXNcblx0XHRpZiAoIG5UeXBlID09PSAzIHx8IG5UeXBlID09PSA4IHx8IG5UeXBlID09PSAyICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICggblR5cGUgIT09IDEgfHwgIWpRdWVyeS5pc1hNTERvYyggZWxlbSApICkge1xuXG5cdFx0XHQvLyBGaXggbmFtZSBhbmQgYXR0YWNoIGhvb2tzXG5cdFx0XHRuYW1lID0galF1ZXJ5LnByb3BGaXhbIG5hbWUgXSB8fCBuYW1lO1xuXHRcdFx0aG9va3MgPSBqUXVlcnkucHJvcEhvb2tzWyBuYW1lIF07XG5cdFx0fVxuXG5cdFx0aWYgKCB2YWx1ZSAhPT0gdW5kZWZpbmVkICkge1xuXHRcdFx0aWYgKCBob29rcyAmJiBcInNldFwiIGluIGhvb2tzICYmXG5cdFx0XHRcdCggcmV0ID0gaG9va3Muc2V0KCBlbGVtLCB2YWx1ZSwgbmFtZSApICkgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHJldDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuICggZWxlbVsgbmFtZSBdID0gdmFsdWUgKTtcblx0XHR9XG5cblx0XHRpZiAoIGhvb2tzICYmIFwiZ2V0XCIgaW4gaG9va3MgJiYgKCByZXQgPSBob29rcy5nZXQoIGVsZW0sIG5hbWUgKSApICE9PSBudWxsICkge1xuXHRcdFx0cmV0dXJuIHJldDtcblx0XHR9XG5cblx0XHRyZXR1cm4gZWxlbVsgbmFtZSBdO1xuXHR9LFxuXG5cdHByb3BIb29rczoge1xuXHRcdHRhYkluZGV4OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDw9OSAtIDExIG9ubHlcblx0XHRcdFx0Ly8gZWxlbS50YWJJbmRleCBkb2Vzbid0IGFsd2F5cyByZXR1cm4gdGhlXG5cdFx0XHRcdC8vIGNvcnJlY3QgdmFsdWUgd2hlbiBpdCBoYXNuJ3QgYmVlbiBleHBsaWNpdGx5IHNldFxuXHRcdFx0XHQvLyBodHRwczovL3dlYi5hcmNoaXZlLm9yZy93ZWIvMjAxNDExMTYyMzMzNDcvaHR0cDovL2ZsdWlkcHJvamVjdC5vcmcvYmxvZy8yMDA4LzAxLzA5L2dldHRpbmctc2V0dGluZy1hbmQtcmVtb3ZpbmctdGFiaW5kZXgtdmFsdWVzLXdpdGgtamF2YXNjcmlwdC9cblx0XHRcdFx0Ly8gVXNlIHByb3BlciBhdHRyaWJ1dGUgcmV0cmlldmFsKCMxMjA3Milcblx0XHRcdFx0dmFyIHRhYmluZGV4ID0galF1ZXJ5LmZpbmQuYXR0ciggZWxlbSwgXCJ0YWJpbmRleFwiICk7XG5cblx0XHRcdFx0aWYgKCB0YWJpbmRleCApIHtcblx0XHRcdFx0XHRyZXR1cm4gcGFyc2VJbnQoIHRhYmluZGV4LCAxMCApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKFxuXHRcdFx0XHRcdHJmb2N1c2FibGUudGVzdCggZWxlbS5ub2RlTmFtZSApIHx8XG5cdFx0XHRcdFx0cmNsaWNrYWJsZS50ZXN0KCBlbGVtLm5vZGVOYW1lICkgJiZcblx0XHRcdFx0XHRlbGVtLmhyZWZcblx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0cmV0dXJuIDA7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gLTE7XG5cdFx0XHR9XG5cdFx0fVxuXHR9LFxuXG5cdHByb3BGaXg6IHtcblx0XHRcImZvclwiOiBcImh0bWxGb3JcIixcblx0XHRcImNsYXNzXCI6IFwiY2xhc3NOYW1lXCJcblx0fVxufSApO1xuXG4vLyBTdXBwb3J0OiBJRSA8PTExIG9ubHlcbi8vIEFjY2Vzc2luZyB0aGUgc2VsZWN0ZWRJbmRleCBwcm9wZXJ0eVxuLy8gZm9yY2VzIHRoZSBicm93c2VyIHRvIHJlc3BlY3Qgc2V0dGluZyBzZWxlY3RlZFxuLy8gb24gdGhlIG9wdGlvblxuLy8gVGhlIGdldHRlciBlbnN1cmVzIGEgZGVmYXVsdCBvcHRpb24gaXMgc2VsZWN0ZWRcbi8vIHdoZW4gaW4gYW4gb3B0Z3JvdXBcbi8vIGVzbGludCBydWxlIFwibm8tdW51c2VkLWV4cHJlc3Npb25zXCIgaXMgZGlzYWJsZWQgZm9yIHRoaXMgY29kZVxuLy8gc2luY2UgaXQgY29uc2lkZXJzIHN1Y2ggYWNjZXNzaW9ucyBub29wXG5pZiAoICFzdXBwb3J0Lm9wdFNlbGVjdGVkICkge1xuXHRqUXVlcnkucHJvcEhvb2tzLnNlbGVjdGVkID0ge1xuXHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdC8qIGVzbGludCBuby11bnVzZWQtZXhwcmVzc2lvbnM6IFwib2ZmXCIgKi9cblxuXHRcdFx0dmFyIHBhcmVudCA9IGVsZW0ucGFyZW50Tm9kZTtcblx0XHRcdGlmICggcGFyZW50ICYmIHBhcmVudC5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIG51bGw7XG5cdFx0fSxcblx0XHRzZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXG5cdFx0XHQvKiBlc2xpbnQgbm8tdW51c2VkLWV4cHJlc3Npb25zOiBcIm9mZlwiICovXG5cblx0XHRcdHZhciBwYXJlbnQgPSBlbGVtLnBhcmVudE5vZGU7XG5cdFx0XHRpZiAoIHBhcmVudCApIHtcblx0XHRcdFx0cGFyZW50LnNlbGVjdGVkSW5kZXg7XG5cblx0XHRcdFx0aWYgKCBwYXJlbnQucGFyZW50Tm9kZSApIHtcblx0XHRcdFx0XHRwYXJlbnQucGFyZW50Tm9kZS5zZWxlY3RlZEluZGV4O1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXHR9O1xufVxuXG5qUXVlcnkuZWFjaCggW1xuXHRcInRhYkluZGV4XCIsXG5cdFwicmVhZE9ubHlcIixcblx0XCJtYXhMZW5ndGhcIixcblx0XCJjZWxsU3BhY2luZ1wiLFxuXHRcImNlbGxQYWRkaW5nXCIsXG5cdFwicm93U3BhblwiLFxuXHRcImNvbFNwYW5cIixcblx0XCJ1c2VNYXBcIixcblx0XCJmcmFtZUJvcmRlclwiLFxuXHRcImNvbnRlbnRFZGl0YWJsZVwiXG5dLCBmdW5jdGlvbigpIHtcblx0alF1ZXJ5LnByb3BGaXhbIHRoaXMudG9Mb3dlckNhc2UoKSBdID0gdGhpcztcbn0gKTtcblxuXG5cblxuXHQvLyBTdHJpcCBhbmQgY29sbGFwc2Ugd2hpdGVzcGFjZSBhY2NvcmRpbmcgdG8gSFRNTCBzcGVjXG5cdC8vIGh0dHBzOi8vaW5mcmEuc3BlYy53aGF0d2cub3JnLyNzdHJpcC1hbmQtY29sbGFwc2UtYXNjaWktd2hpdGVzcGFjZVxuXHRmdW5jdGlvbiBzdHJpcEFuZENvbGxhcHNlKCB2YWx1ZSApIHtcblx0XHR2YXIgdG9rZW5zID0gdmFsdWUubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbXTtcblx0XHRyZXR1cm4gdG9rZW5zLmpvaW4oIFwiIFwiICk7XG5cdH1cblxuXG5mdW5jdGlvbiBnZXRDbGFzcyggZWxlbSApIHtcblx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlICYmIGVsZW0uZ2V0QXR0cmlidXRlKCBcImNsYXNzXCIgKSB8fCBcIlwiO1xufVxuXG5mdW5jdGlvbiBjbGFzc2VzVG9BcnJheSggdmFsdWUgKSB7XG5cdGlmICggQXJyYXkuaXNBcnJheSggdmFsdWUgKSApIHtcblx0XHRyZXR1cm4gdmFsdWU7XG5cdH1cblx0aWYgKCB0eXBlb2YgdmFsdWUgPT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIHZhbHVlLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cdH1cblx0cmV0dXJuIFtdO1xufVxuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdGFkZENsYXNzOiBmdW5jdGlvbiggdmFsdWUgKSB7XG5cdFx0dmFyIGNsYXNzZXMsIGVsZW0sIGN1ciwgY3VyVmFsdWUsIGNsYXp6LCBqLCBmaW5hbFZhbHVlLFxuXHRcdFx0aSA9IDA7XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaiApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkuYWRkQ2xhc3MoIHZhbHVlLmNhbGwoIHRoaXMsIGosIGdldENsYXNzKCB0aGlzICkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdGNsYXNzZXMgPSBjbGFzc2VzVG9BcnJheSggdmFsdWUgKTtcblxuXHRcdGlmICggY2xhc3Nlcy5sZW5ndGggKSB7XG5cdFx0XHR3aGlsZSAoICggZWxlbSA9IHRoaXNbIGkrKyBdICkgKSB7XG5cdFx0XHRcdGN1clZhbHVlID0gZ2V0Q2xhc3MoIGVsZW0gKTtcblx0XHRcdFx0Y3VyID0gZWxlbS5ub2RlVHlwZSA9PT0gMSAmJiAoIFwiIFwiICsgc3RyaXBBbmRDb2xsYXBzZSggY3VyVmFsdWUgKSArIFwiIFwiICk7XG5cblx0XHRcdFx0aWYgKCBjdXIgKSB7XG5cdFx0XHRcdFx0aiA9IDA7XG5cdFx0XHRcdFx0d2hpbGUgKCAoIGNsYXp6ID0gY2xhc3Nlc1sgaisrIF0gKSApIHtcblx0XHRcdFx0XHRcdGlmICggY3VyLmluZGV4T2YoIFwiIFwiICsgY2xhenogKyBcIiBcIiApIDwgMCApIHtcblx0XHRcdFx0XHRcdFx0Y3VyICs9IGNsYXp6ICsgXCIgXCI7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRmaW5hbFZhbHVlID0gc3RyaXBBbmRDb2xsYXBzZSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIGZpbmFsVmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHRyZW1vdmVDbGFzczogZnVuY3Rpb24oIHZhbHVlICkge1xuXHRcdHZhciBjbGFzc2VzLCBlbGVtLCBjdXIsIGN1clZhbHVlLCBjbGF6eiwgaiwgZmluYWxWYWx1ZSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCB2YWx1ZSApICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGogKSB7XG5cdFx0XHRcdGpRdWVyeSggdGhpcyApLnJlbW92ZUNsYXNzKCB2YWx1ZS5jYWxsKCB0aGlzLCBqLCBnZXRDbGFzcyggdGhpcyApICkgKTtcblx0XHRcdH0gKTtcblx0XHR9XG5cblx0XHRpZiAoICFhcmd1bWVudHMubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIHRoaXMuYXR0ciggXCJjbGFzc1wiLCBcIlwiICk7XG5cdFx0fVxuXG5cdFx0Y2xhc3NlcyA9IGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0aWYgKCBjbGFzc2VzLmxlbmd0aCApIHtcblx0XHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdFx0Y3VyVmFsdWUgPSBnZXRDbGFzcyggZWxlbSApO1xuXG5cdFx0XHRcdC8vIFRoaXMgZXhwcmVzc2lvbiBpcyBoZXJlIGZvciBiZXR0ZXIgY29tcHJlc3NpYmlsaXR5IChzZWUgYWRkQ2xhc3MpXG5cdFx0XHRcdGN1ciA9IGVsZW0ubm9kZVR5cGUgPT09IDEgJiYgKCBcIiBcIiArIHN0cmlwQW5kQ29sbGFwc2UoIGN1clZhbHVlICkgKyBcIiBcIiApO1xuXG5cdFx0XHRcdGlmICggY3VyICkge1xuXHRcdFx0XHRcdGogPSAwO1xuXHRcdFx0XHRcdHdoaWxlICggKCBjbGF6eiA9IGNsYXNzZXNbIGorKyBdICkgKSB7XG5cblx0XHRcdFx0XHRcdC8vIFJlbW92ZSAqYWxsKiBpbnN0YW5jZXNcblx0XHRcdFx0XHRcdHdoaWxlICggY3VyLmluZGV4T2YoIFwiIFwiICsgY2xhenogKyBcIiBcIiApID4gLTEgKSB7XG5cdFx0XHRcdFx0XHRcdGN1ciA9IGN1ci5yZXBsYWNlKCBcIiBcIiArIGNsYXp6ICsgXCIgXCIsIFwiIFwiICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gT25seSBhc3NpZ24gaWYgZGlmZmVyZW50IHRvIGF2b2lkIHVubmVlZGVkIHJlbmRlcmluZy5cblx0XHRcdFx0XHRmaW5hbFZhbHVlID0gc3RyaXBBbmRDb2xsYXBzZSggY3VyICk7XG5cdFx0XHRcdFx0aWYgKCBjdXJWYWx1ZSAhPT0gZmluYWxWYWx1ZSApIHtcblx0XHRcdFx0XHRcdGVsZW0uc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsIGZpbmFsVmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gdGhpcztcblx0fSxcblxuXHR0b2dnbGVDbGFzczogZnVuY3Rpb24oIHZhbHVlLCBzdGF0ZVZhbCApIHtcblx0XHR2YXIgdHlwZSA9IHR5cGVvZiB2YWx1ZSxcblx0XHRcdGlzVmFsaWRWYWx1ZSA9IHR5cGUgPT09IFwic3RyaW5nXCIgfHwgQXJyYXkuaXNBcnJheSggdmFsdWUgKTtcblxuXHRcdGlmICggdHlwZW9mIHN0YXRlVmFsID09PSBcImJvb2xlYW5cIiAmJiBpc1ZhbGlkVmFsdWUgKSB7XG5cdFx0XHRyZXR1cm4gc3RhdGVWYWwgPyB0aGlzLmFkZENsYXNzKCB2YWx1ZSApIDogdGhpcy5yZW1vdmVDbGFzcyggdmFsdWUgKTtcblx0XHR9XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIHZhbHVlICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkudG9nZ2xlQ2xhc3MoXG5cdFx0XHRcdFx0dmFsdWUuY2FsbCggdGhpcywgaSwgZ2V0Q2xhc3MoIHRoaXMgKSwgc3RhdGVWYWwgKSxcblx0XHRcdFx0XHRzdGF0ZVZhbFxuXHRcdFx0XHQpO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIGNsYXNzTmFtZSwgaSwgc2VsZiwgY2xhc3NOYW1lcztcblxuXHRcdFx0aWYgKCBpc1ZhbGlkVmFsdWUgKSB7XG5cblx0XHRcdFx0Ly8gVG9nZ2xlIGluZGl2aWR1YWwgY2xhc3MgbmFtZXNcblx0XHRcdFx0aSA9IDA7XG5cdFx0XHRcdHNlbGYgPSBqUXVlcnkoIHRoaXMgKTtcblx0XHRcdFx0Y2xhc3NOYW1lcyA9IGNsYXNzZXNUb0FycmF5KCB2YWx1ZSApO1xuXG5cdFx0XHRcdHdoaWxlICggKCBjbGFzc05hbWUgPSBjbGFzc05hbWVzWyBpKysgXSApICkge1xuXG5cdFx0XHRcdFx0Ly8gQ2hlY2sgZWFjaCBjbGFzc05hbWUgZ2l2ZW4sIHNwYWNlIHNlcGFyYXRlZCBsaXN0XG5cdFx0XHRcdFx0aWYgKCBzZWxmLmhhc0NsYXNzKCBjbGFzc05hbWUgKSApIHtcblx0XHRcdFx0XHRcdHNlbGYucmVtb3ZlQ2xhc3MoIGNsYXNzTmFtZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRzZWxmLmFkZENsYXNzKCBjbGFzc05hbWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0Ly8gVG9nZ2xlIHdob2xlIGNsYXNzIG5hbWVcblx0XHRcdH0gZWxzZSBpZiAoIHZhbHVlID09PSB1bmRlZmluZWQgfHwgdHlwZSA9PT0gXCJib29sZWFuXCIgKSB7XG5cdFx0XHRcdGNsYXNzTmFtZSA9IGdldENsYXNzKCB0aGlzICk7XG5cdFx0XHRcdGlmICggY2xhc3NOYW1lICkge1xuXG5cdFx0XHRcdFx0Ly8gU3RvcmUgY2xhc3NOYW1lIGlmIHNldFxuXHRcdFx0XHRcdGRhdGFQcml2LnNldCggdGhpcywgXCJfX2NsYXNzTmFtZV9fXCIsIGNsYXNzTmFtZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSWYgdGhlIGVsZW1lbnQgaGFzIGEgY2xhc3MgbmFtZSBvciBpZiB3ZSdyZSBwYXNzZWQgYGZhbHNlYCxcblx0XHRcdFx0Ly8gdGhlbiByZW1vdmUgdGhlIHdob2xlIGNsYXNzbmFtZSAoaWYgdGhlcmUgd2FzIG9uZSwgdGhlIGFib3ZlIHNhdmVkIGl0KS5cblx0XHRcdFx0Ly8gT3RoZXJ3aXNlIGJyaW5nIGJhY2sgd2hhdGV2ZXIgd2FzIHByZXZpb3VzbHkgc2F2ZWQgKGlmIGFueXRoaW5nKSxcblx0XHRcdFx0Ly8gZmFsbGluZyBiYWNrIHRvIHRoZSBlbXB0eSBzdHJpbmcgaWYgbm90aGluZyB3YXMgc3RvcmVkLlxuXHRcdFx0XHRpZiAoIHRoaXMuc2V0QXR0cmlidXRlICkge1xuXHRcdFx0XHRcdHRoaXMuc2V0QXR0cmlidXRlKCBcImNsYXNzXCIsXG5cdFx0XHRcdFx0XHRjbGFzc05hbWUgfHwgdmFsdWUgPT09IGZhbHNlID9cblx0XHRcdFx0XHRcdFwiXCIgOlxuXHRcdFx0XHRcdFx0ZGF0YVByaXYuZ2V0KCB0aGlzLCBcIl9fY2xhc3NOYW1lX19cIiApIHx8IFwiXCJcblx0XHRcdFx0XHQpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdGhhc0NsYXNzOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dmFyIGNsYXNzTmFtZSwgZWxlbSxcblx0XHRcdGkgPSAwO1xuXG5cdFx0Y2xhc3NOYW1lID0gXCIgXCIgKyBzZWxlY3RvciArIFwiIFwiO1xuXHRcdHdoaWxlICggKCBlbGVtID0gdGhpc1sgaSsrIF0gKSApIHtcblx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMSAmJlxuXHRcdFx0XHQoIFwiIFwiICsgc3RyaXBBbmRDb2xsYXBzZSggZ2V0Q2xhc3MoIGVsZW0gKSApICsgXCIgXCIgKS5pbmRleE9mKCBjbGFzc05hbWUgKSA+IC0xICkge1xuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxufSApO1xuXG5cblxuXG52YXIgcnJldHVybiA9IC9cXHIvZztcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHR2YWw6IGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHR2YXIgaG9va3MsIHJldCwgdmFsdWVJc0Z1bmN0aW9uLFxuXHRcdFx0ZWxlbSA9IHRoaXNbIDAgXTtcblxuXHRcdGlmICggIWFyZ3VtZW50cy5sZW5ndGggKSB7XG5cdFx0XHRpZiAoIGVsZW0gKSB7XG5cdFx0XHRcdGhvb2tzID0galF1ZXJ5LnZhbEhvb2tzWyBlbGVtLnR5cGUgXSB8fFxuXHRcdFx0XHRcdGpRdWVyeS52YWxIb29rc1sgZWxlbS5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdFx0aWYgKCBob29rcyAmJlxuXHRcdFx0XHRcdFwiZ2V0XCIgaW4gaG9va3MgJiZcblx0XHRcdFx0XHQoIHJldCA9IGhvb2tzLmdldCggZWxlbSwgXCJ2YWx1ZVwiICkgKSAhPT0gdW5kZWZpbmVkXG5cdFx0XHRcdCkge1xuXHRcdFx0XHRcdHJldHVybiByZXQ7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXQgPSBlbGVtLnZhbHVlO1xuXG5cdFx0XHRcdC8vIEhhbmRsZSBtb3N0IGNvbW1vbiBzdHJpbmcgY2FzZXNcblx0XHRcdFx0aWYgKCB0eXBlb2YgcmV0ID09PSBcInN0cmluZ1wiICkge1xuXHRcdFx0XHRcdHJldHVybiByZXQucmVwbGFjZSggcnJldHVybiwgXCJcIiApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gSGFuZGxlIGNhc2VzIHdoZXJlIHZhbHVlIGlzIG51bGwvdW5kZWYgb3IgbnVtYmVyXG5cdFx0XHRcdHJldHVybiByZXQgPT0gbnVsbCA/IFwiXCIgOiByZXQ7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR2YWx1ZUlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uKCB2YWx1ZSApO1xuXG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oIGkgKSB7XG5cdFx0XHR2YXIgdmFsO1xuXG5cdFx0XHRpZiAoIHRoaXMubm9kZVR5cGUgIT09IDEgKSB7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB2YWx1ZUlzRnVuY3Rpb24gKSB7XG5cdFx0XHRcdHZhbCA9IHZhbHVlLmNhbGwoIHRoaXMsIGksIGpRdWVyeSggdGhpcyApLnZhbCgpICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR2YWwgPSB2YWx1ZTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVHJlYXQgbnVsbC91bmRlZmluZWQgYXMgXCJcIjsgY29udmVydCBudW1iZXJzIHRvIHN0cmluZ1xuXHRcdFx0aWYgKCB2YWwgPT0gbnVsbCApIHtcblx0XHRcdFx0dmFsID0gXCJcIjtcblxuXHRcdFx0fSBlbHNlIGlmICggdHlwZW9mIHZhbCA9PT0gXCJudW1iZXJcIiApIHtcblx0XHRcdFx0dmFsICs9IFwiXCI7XG5cblx0XHRcdH0gZWxzZSBpZiAoIEFycmF5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHR2YWwgPSBqUXVlcnkubWFwKCB2YWwsIGZ1bmN0aW9uKCB2YWx1ZSApIHtcblx0XHRcdFx0XHRyZXR1cm4gdmFsdWUgPT0gbnVsbCA/IFwiXCIgOiB2YWx1ZSArIFwiXCI7XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0aG9va3MgPSBqUXVlcnkudmFsSG9va3NbIHRoaXMudHlwZSBdIHx8IGpRdWVyeS52YWxIb29rc1sgdGhpcy5ub2RlTmFtZS50b0xvd2VyQ2FzZSgpIF07XG5cblx0XHRcdC8vIElmIHNldCByZXR1cm5zIHVuZGVmaW5lZCwgZmFsbCBiYWNrIHRvIG5vcm1hbCBzZXR0aW5nXG5cdFx0XHRpZiAoICFob29rcyB8fCAhKCBcInNldFwiIGluIGhvb2tzICkgfHwgaG9va3Muc2V0KCB0aGlzLCB2YWwsIFwidmFsdWVcIiApID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdHRoaXMudmFsdWUgPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5leHRlbmQoIHtcblx0dmFsSG9va3M6IHtcblx0XHRvcHRpb246IHtcblx0XHRcdGdldDogZnVuY3Rpb24oIGVsZW0gKSB7XG5cblx0XHRcdFx0dmFyIHZhbCA9IGpRdWVyeS5maW5kLmF0dHIoIGVsZW0sIFwidmFsdWVcIiApO1xuXHRcdFx0XHRyZXR1cm4gdmFsICE9IG51bGwgP1xuXHRcdFx0XHRcdHZhbCA6XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTEwIC0gMTEgb25seVxuXHRcdFx0XHRcdC8vIG9wdGlvbi50ZXh0IHRocm93cyBleGNlcHRpb25zICgjMTQ2ODYsICMxNDg1OClcblx0XHRcdFx0XHQvLyBTdHJpcCBhbmQgY29sbGFwc2Ugd2hpdGVzcGFjZVxuXHRcdFx0XHRcdC8vIGh0dHBzOi8vaHRtbC5zcGVjLndoYXR3Zy5vcmcvI3N0cmlwLWFuZC1jb2xsYXBzZS13aGl0ZXNwYWNlXG5cdFx0XHRcdFx0c3RyaXBBbmRDb2xsYXBzZSggalF1ZXJ5LnRleHQoIGVsZW0gKSApO1xuXHRcdFx0fVxuXHRcdH0sXG5cdFx0c2VsZWN0OiB7XG5cdFx0XHRnZXQ6IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0XHR2YXIgdmFsdWUsIG9wdGlvbiwgaSxcblx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdGluZGV4ID0gZWxlbS5zZWxlY3RlZEluZGV4LFxuXHRcdFx0XHRcdG9uZSA9IGVsZW0udHlwZSA9PT0gXCJzZWxlY3Qtb25lXCIsXG5cdFx0XHRcdFx0dmFsdWVzID0gb25lID8gbnVsbCA6IFtdLFxuXHRcdFx0XHRcdG1heCA9IG9uZSA/IGluZGV4ICsgMSA6IG9wdGlvbnMubGVuZ3RoO1xuXG5cdFx0XHRcdGlmICggaW5kZXggPCAwICkge1xuXHRcdFx0XHRcdGkgPSBtYXg7XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRpID0gb25lID8gaW5kZXggOiAwO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gTG9vcCB0aHJvdWdoIGFsbCB0aGUgc2VsZWN0ZWQgb3B0aW9uc1xuXHRcdFx0XHRmb3IgKCA7IGkgPCBtYXg7IGkrKyApIHtcblx0XHRcdFx0XHRvcHRpb24gPSBvcHRpb25zWyBpIF07XG5cblx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdC8vIElFOC05IGRvZXNuJ3QgdXBkYXRlIHNlbGVjdGVkIGFmdGVyIGZvcm0gcmVzZXQgKCMyNTUxKVxuXHRcdFx0XHRcdGlmICggKCBvcHRpb24uc2VsZWN0ZWQgfHwgaSA9PT0gaW5kZXggKSAmJlxuXG5cdFx0XHRcdFx0XHRcdC8vIERvbid0IHJldHVybiBvcHRpb25zIHRoYXQgYXJlIGRpc2FibGVkIG9yIGluIGEgZGlzYWJsZWQgb3B0Z3JvdXBcblx0XHRcdFx0XHRcdFx0IW9wdGlvbi5kaXNhYmxlZCAmJlxuXHRcdFx0XHRcdFx0XHQoICFvcHRpb24ucGFyZW50Tm9kZS5kaXNhYmxlZCB8fFxuXHRcdFx0XHRcdFx0XHRcdCFub2RlTmFtZSggb3B0aW9uLnBhcmVudE5vZGUsIFwib3B0Z3JvdXBcIiApICkgKSB7XG5cblx0XHRcdFx0XHRcdC8vIEdldCB0aGUgc3BlY2lmaWMgdmFsdWUgZm9yIHRoZSBvcHRpb25cblx0XHRcdFx0XHRcdHZhbHVlID0galF1ZXJ5KCBvcHRpb24gKS52YWwoKTtcblxuXHRcdFx0XHRcdFx0Ly8gV2UgZG9uJ3QgbmVlZCBhbiBhcnJheSBmb3Igb25lIHNlbGVjdHNcblx0XHRcdFx0XHRcdGlmICggb25lICkge1xuXHRcdFx0XHRcdFx0XHRyZXR1cm4gdmFsdWU7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdC8vIE11bHRpLVNlbGVjdHMgcmV0dXJuIGFuIGFycmF5XG5cdFx0XHRcdFx0XHR2YWx1ZXMucHVzaCggdmFsdWUgKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fSxcblxuXHRcdFx0c2V0OiBmdW5jdGlvbiggZWxlbSwgdmFsdWUgKSB7XG5cdFx0XHRcdHZhciBvcHRpb25TZXQsIG9wdGlvbixcblx0XHRcdFx0XHRvcHRpb25zID0gZWxlbS5vcHRpb25zLFxuXHRcdFx0XHRcdHZhbHVlcyA9IGpRdWVyeS5tYWtlQXJyYXkoIHZhbHVlICksXG5cdFx0XHRcdFx0aSA9IG9wdGlvbnMubGVuZ3RoO1xuXG5cdFx0XHRcdHdoaWxlICggaS0tICkge1xuXHRcdFx0XHRcdG9wdGlvbiA9IG9wdGlvbnNbIGkgXTtcblxuXHRcdFx0XHRcdC8qIGVzbGludC1kaXNhYmxlIG5vLWNvbmQtYXNzaWduICovXG5cblx0XHRcdFx0XHRpZiAoIG9wdGlvbi5zZWxlY3RlZCA9XG5cdFx0XHRcdFx0XHRqUXVlcnkuaW5BcnJheSggalF1ZXJ5LnZhbEhvb2tzLm9wdGlvbi5nZXQoIG9wdGlvbiApLCB2YWx1ZXMgKSA+IC0xXG5cdFx0XHRcdFx0KSB7XG5cdFx0XHRcdFx0XHRvcHRpb25TZXQgPSB0cnVlO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdC8qIGVzbGludC1lbmFibGUgbm8tY29uZC1hc3NpZ24gKi9cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEZvcmNlIGJyb3dzZXJzIHRvIGJlaGF2ZSBjb25zaXN0ZW50bHkgd2hlbiBub24tbWF0Y2hpbmcgdmFsdWUgaXMgc2V0XG5cdFx0XHRcdGlmICggIW9wdGlvblNldCApIHtcblx0XHRcdFx0XHRlbGVtLnNlbGVjdGVkSW5kZXggPSAtMTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gdmFsdWVzO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxufSApO1xuXG4vLyBSYWRpb3MgYW5kIGNoZWNrYm94ZXMgZ2V0dGVyL3NldHRlclxualF1ZXJ5LmVhY2goIFsgXCJyYWRpb1wiLCBcImNoZWNrYm94XCIgXSwgZnVuY3Rpb24oKSB7XG5cdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdID0ge1xuXHRcdHNldDogZnVuY3Rpb24oIGVsZW0sIHZhbHVlICkge1xuXHRcdFx0aWYgKCBBcnJheS5pc0FycmF5KCB2YWx1ZSApICkge1xuXHRcdFx0XHRyZXR1cm4gKCBlbGVtLmNoZWNrZWQgPSBqUXVlcnkuaW5BcnJheSggalF1ZXJ5KCBlbGVtICkudmFsKCksIHZhbHVlICkgPiAtMSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblx0aWYgKCAhc3VwcG9ydC5jaGVja09uICkge1xuXHRcdGpRdWVyeS52YWxIb29rc1sgdGhpcyBdLmdldCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRcdFx0cmV0dXJuIGVsZW0uZ2V0QXR0cmlidXRlKCBcInZhbHVlXCIgKSA9PT0gbnVsbCA/IFwib25cIiA6IGVsZW0udmFsdWU7XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG4vLyBSZXR1cm4galF1ZXJ5IGZvciBhdHRyaWJ1dGVzLW9ubHkgaW5jbHVzaW9uXG5cblxuc3VwcG9ydC5mb2N1c2luID0gXCJvbmZvY3VzaW5cIiBpbiB3aW5kb3c7XG5cblxudmFyIHJmb2N1c01vcnBoID0gL14oPzpmb2N1c2luZm9jdXN8Zm9jdXNvdXRibHVyKSQvLFxuXHRzdG9wUHJvcGFnYXRpb25DYWxsYmFjayA9IGZ1bmN0aW9uKCBlICkge1xuXHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdH07XG5cbmpRdWVyeS5leHRlbmQoIGpRdWVyeS5ldmVudCwge1xuXG5cdHRyaWdnZXI6IGZ1bmN0aW9uKCBldmVudCwgZGF0YSwgZWxlbSwgb25seUhhbmRsZXJzICkge1xuXG5cdFx0dmFyIGksIGN1ciwgdG1wLCBidWJibGVUeXBlLCBvbnR5cGUsIGhhbmRsZSwgc3BlY2lhbCwgbGFzdEVsZW1lbnQsXG5cdFx0XHRldmVudFBhdGggPSBbIGVsZW0gfHwgZG9jdW1lbnQgXSxcblx0XHRcdHR5cGUgPSBoYXNPd24uY2FsbCggZXZlbnQsIFwidHlwZVwiICkgPyBldmVudC50eXBlIDogZXZlbnQsXG5cdFx0XHRuYW1lc3BhY2VzID0gaGFzT3duLmNhbGwoIGV2ZW50LCBcIm5hbWVzcGFjZVwiICkgPyBldmVudC5uYW1lc3BhY2Uuc3BsaXQoIFwiLlwiICkgOiBbXTtcblxuXHRcdGN1ciA9IGxhc3RFbGVtZW50ID0gdG1wID0gZWxlbSA9IGVsZW0gfHwgZG9jdW1lbnQ7XG5cblx0XHQvLyBEb24ndCBkbyBldmVudHMgb24gdGV4dCBhbmQgY29tbWVudCBub2Rlc1xuXHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gMyB8fCBlbGVtLm5vZGVUeXBlID09PSA4ICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIGZvY3VzL2JsdXIgbW9ycGhzIHRvIGZvY3VzaW4vb3V0OyBlbnN1cmUgd2UncmUgbm90IGZpcmluZyB0aGVtIHJpZ2h0IG5vd1xuXHRcdGlmICggcmZvY3VzTW9ycGgudGVzdCggdHlwZSArIGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgKSApIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIHR5cGUuaW5kZXhPZiggXCIuXCIgKSA+IC0xICkge1xuXG5cdFx0XHQvLyBOYW1lc3BhY2VkIHRyaWdnZXI7IGNyZWF0ZSBhIHJlZ2V4cCB0byBtYXRjaCBldmVudCB0eXBlIGluIGhhbmRsZSgpXG5cdFx0XHRuYW1lc3BhY2VzID0gdHlwZS5zcGxpdCggXCIuXCIgKTtcblx0XHRcdHR5cGUgPSBuYW1lc3BhY2VzLnNoaWZ0KCk7XG5cdFx0XHRuYW1lc3BhY2VzLnNvcnQoKTtcblx0XHR9XG5cdFx0b250eXBlID0gdHlwZS5pbmRleE9mKCBcIjpcIiApIDwgMCAmJiBcIm9uXCIgKyB0eXBlO1xuXG5cdFx0Ly8gQ2FsbGVyIGNhbiBwYXNzIGluIGEgalF1ZXJ5LkV2ZW50IG9iamVjdCwgT2JqZWN0LCBvciBqdXN0IGFuIGV2ZW50IHR5cGUgc3RyaW5nXG5cdFx0ZXZlbnQgPSBldmVudFsgalF1ZXJ5LmV4cGFuZG8gXSA/XG5cdFx0XHRldmVudCA6XG5cdFx0XHRuZXcgalF1ZXJ5LkV2ZW50KCB0eXBlLCB0eXBlb2YgZXZlbnQgPT09IFwib2JqZWN0XCIgJiYgZXZlbnQgKTtcblxuXHRcdC8vIFRyaWdnZXIgYml0bWFzazogJiAxIGZvciBuYXRpdmUgaGFuZGxlcnM7ICYgMiBmb3IgalF1ZXJ5IChhbHdheXMgdHJ1ZSlcblx0XHRldmVudC5pc1RyaWdnZXIgPSBvbmx5SGFuZGxlcnMgPyAyIDogMztcblx0XHRldmVudC5uYW1lc3BhY2UgPSBuYW1lc3BhY2VzLmpvaW4oIFwiLlwiICk7XG5cdFx0ZXZlbnQucm5hbWVzcGFjZSA9IGV2ZW50Lm5hbWVzcGFjZSA/XG5cdFx0XHRuZXcgUmVnRXhwKCBcIihefFxcXFwuKVwiICsgbmFtZXNwYWNlcy5qb2luKCBcIlxcXFwuKD86LipcXFxcLnwpXCIgKSArIFwiKFxcXFwufCQpXCIgKSA6XG5cdFx0XHRudWxsO1xuXG5cdFx0Ly8gQ2xlYW4gdXAgdGhlIGV2ZW50IGluIGNhc2UgaXQgaXMgYmVpbmcgcmV1c2VkXG5cdFx0ZXZlbnQucmVzdWx0ID0gdW5kZWZpbmVkO1xuXHRcdGlmICggIWV2ZW50LnRhcmdldCApIHtcblx0XHRcdGV2ZW50LnRhcmdldCA9IGVsZW07XG5cdFx0fVxuXG5cdFx0Ly8gQ2xvbmUgYW55IGluY29taW5nIGRhdGEgYW5kIHByZXBlbmQgdGhlIGV2ZW50LCBjcmVhdGluZyB0aGUgaGFuZGxlciBhcmcgbGlzdFxuXHRcdGRhdGEgPSBkYXRhID09IG51bGwgP1xuXHRcdFx0WyBldmVudCBdIDpcblx0XHRcdGpRdWVyeS5tYWtlQXJyYXkoIGRhdGEsIFsgZXZlbnQgXSApO1xuXG5cdFx0Ly8gQWxsb3cgc3BlY2lhbCBldmVudHMgdG8gZHJhdyBvdXRzaWRlIHRoZSBsaW5lc1xuXHRcdHNwZWNpYWwgPSBqUXVlcnkuZXZlbnQuc3BlY2lhbFsgdHlwZSBdIHx8IHt9O1xuXHRcdGlmICggIW9ubHlIYW5kbGVycyAmJiBzcGVjaWFsLnRyaWdnZXIgJiYgc3BlY2lhbC50cmlnZ2VyLmFwcGx5KCBlbGVtLCBkYXRhICkgPT09IGZhbHNlICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIERldGVybWluZSBldmVudCBwcm9wYWdhdGlvbiBwYXRoIGluIGFkdmFuY2UsIHBlciBXM0MgZXZlbnRzIHNwZWMgKCM5OTUxKVxuXHRcdC8vIEJ1YmJsZSB1cCB0byBkb2N1bWVudCwgdGhlbiB0byB3aW5kb3c7IHdhdGNoIGZvciBhIGdsb2JhbCBvd25lckRvY3VtZW50IHZhciAoIzk3MjQpXG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFzcGVjaWFsLm5vQnViYmxlICYmICFpc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRidWJibGVUeXBlID0gc3BlY2lhbC5kZWxlZ2F0ZVR5cGUgfHwgdHlwZTtcblx0XHRcdGlmICggIXJmb2N1c01vcnBoLnRlc3QoIGJ1YmJsZVR5cGUgKyB0eXBlICkgKSB7XG5cdFx0XHRcdGN1ciA9IGN1ci5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXHRcdFx0Zm9yICggOyBjdXI7IGN1ciA9IGN1ci5wYXJlbnROb2RlICkge1xuXHRcdFx0XHRldmVudFBhdGgucHVzaCggY3VyICk7XG5cdFx0XHRcdHRtcCA9IGN1cjtcblx0XHRcdH1cblxuXHRcdFx0Ly8gT25seSBhZGQgd2luZG93IGlmIHdlIGdvdCB0byBkb2N1bWVudCAoZS5nLiwgbm90IHBsYWluIG9iaiBvciBkZXRhY2hlZCBET00pXG5cdFx0XHRpZiAoIHRtcCA9PT0gKCBlbGVtLm93bmVyRG9jdW1lbnQgfHwgZG9jdW1lbnQgKSApIHtcblx0XHRcdFx0ZXZlbnRQYXRoLnB1c2goIHRtcC5kZWZhdWx0VmlldyB8fCB0bXAucGFyZW50V2luZG93IHx8IHdpbmRvdyApO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIEZpcmUgaGFuZGxlcnMgb24gdGhlIGV2ZW50IHBhdGhcblx0XHRpID0gMDtcblx0XHR3aGlsZSAoICggY3VyID0gZXZlbnRQYXRoWyBpKysgXSApICYmICFldmVudC5pc1Byb3BhZ2F0aW9uU3RvcHBlZCgpICkge1xuXHRcdFx0bGFzdEVsZW1lbnQgPSBjdXI7XG5cdFx0XHRldmVudC50eXBlID0gaSA+IDEgP1xuXHRcdFx0XHRidWJibGVUeXBlIDpcblx0XHRcdFx0c3BlY2lhbC5iaW5kVHlwZSB8fCB0eXBlO1xuXG5cdFx0XHQvLyBqUXVlcnkgaGFuZGxlclxuXHRcdFx0aGFuZGxlID0gKCBkYXRhUHJpdi5nZXQoIGN1ciwgXCJldmVudHNcIiApIHx8IHt9IClbIGV2ZW50LnR5cGUgXSAmJlxuXHRcdFx0XHRkYXRhUHJpdi5nZXQoIGN1ciwgXCJoYW5kbGVcIiApO1xuXHRcdFx0aWYgKCBoYW5kbGUgKSB7XG5cdFx0XHRcdGhhbmRsZS5hcHBseSggY3VyLCBkYXRhICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIE5hdGl2ZSBoYW5kbGVyXG5cdFx0XHRoYW5kbGUgPSBvbnR5cGUgJiYgY3VyWyBvbnR5cGUgXTtcblx0XHRcdGlmICggaGFuZGxlICYmIGhhbmRsZS5hcHBseSAmJiBhY2NlcHREYXRhKCBjdXIgKSApIHtcblx0XHRcdFx0ZXZlbnQucmVzdWx0ID0gaGFuZGxlLmFwcGx5KCBjdXIsIGRhdGEgKTtcblx0XHRcdFx0aWYgKCBldmVudC5yZXN1bHQgPT09IGZhbHNlICkge1xuXHRcdFx0XHRcdGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0ZXZlbnQudHlwZSA9IHR5cGU7XG5cblx0XHQvLyBJZiBub2JvZHkgcHJldmVudGVkIHRoZSBkZWZhdWx0IGFjdGlvbiwgZG8gaXQgbm93XG5cdFx0aWYgKCAhb25seUhhbmRsZXJzICYmICFldmVudC5pc0RlZmF1bHRQcmV2ZW50ZWQoKSApIHtcblxuXHRcdFx0aWYgKCAoICFzcGVjaWFsLl9kZWZhdWx0IHx8XG5cdFx0XHRcdHNwZWNpYWwuX2RlZmF1bHQuYXBwbHkoIGV2ZW50UGF0aC5wb3AoKSwgZGF0YSApID09PSBmYWxzZSApICYmXG5cdFx0XHRcdGFjY2VwdERhdGEoIGVsZW0gKSApIHtcblxuXHRcdFx0XHQvLyBDYWxsIGEgbmF0aXZlIERPTSBtZXRob2Qgb24gdGhlIHRhcmdldCB3aXRoIHRoZSBzYW1lIG5hbWUgYXMgdGhlIGV2ZW50LlxuXHRcdFx0XHQvLyBEb24ndCBkbyBkZWZhdWx0IGFjdGlvbnMgb24gd2luZG93LCB0aGF0J3Mgd2hlcmUgZ2xvYmFsIHZhcmlhYmxlcyBiZSAoIzYxNzApXG5cdFx0XHRcdGlmICggb250eXBlICYmIGlzRnVuY3Rpb24oIGVsZW1bIHR5cGUgXSApICYmICFpc1dpbmRvdyggZWxlbSApICkge1xuXG5cdFx0XHRcdFx0Ly8gRG9uJ3QgcmUtdHJpZ2dlciBhbiBvbkZPTyBldmVudCB3aGVuIHdlIGNhbGwgaXRzIEZPTygpIG1ldGhvZFxuXHRcdFx0XHRcdHRtcCA9IGVsZW1bIG9udHlwZSBdO1xuXG5cdFx0XHRcdFx0aWYgKCB0bXAgKSB7XG5cdFx0XHRcdFx0XHRlbGVtWyBvbnR5cGUgXSA9IG51bGw7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0Ly8gUHJldmVudCByZS10cmlnZ2VyaW5nIG9mIHRoZSBzYW1lIGV2ZW50LCBzaW5jZSB3ZSBhbHJlYWR5IGJ1YmJsZWQgaXQgYWJvdmVcblx0XHRcdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlcmVkID0gdHlwZTtcblxuXHRcdFx0XHRcdGlmICggZXZlbnQuaXNQcm9wYWdhdGlvblN0b3BwZWQoKSApIHtcblx0XHRcdFx0XHRcdGxhc3RFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoIHR5cGUsIHN0b3BQcm9wYWdhdGlvbkNhbGxiYWNrICk7XG5cdFx0XHRcdFx0fVxuXG5cdFx0XHRcdFx0ZWxlbVsgdHlwZSBdKCk7XG5cblx0XHRcdFx0XHRpZiAoIGV2ZW50LmlzUHJvcGFnYXRpb25TdG9wcGVkKCkgKSB7XG5cdFx0XHRcdFx0XHRsYXN0RWxlbWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCB0eXBlLCBzdG9wUHJvcGFnYXRpb25DYWxsYmFjayApO1xuXHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyZWQgPSB1bmRlZmluZWQ7XG5cblx0XHRcdFx0XHRpZiAoIHRtcCApIHtcblx0XHRcdFx0XHRcdGVsZW1bIG9udHlwZSBdID0gdG1wO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHJldHVybiBldmVudC5yZXN1bHQ7XG5cdH0sXG5cblx0Ly8gUGlnZ3liYWNrIG9uIGEgZG9ub3IgZXZlbnQgdG8gc2ltdWxhdGUgYSBkaWZmZXJlbnQgb25lXG5cdC8vIFVzZWQgb25seSBmb3IgYGZvY3VzKGluIHwgb3V0KWAgZXZlbnRzXG5cdHNpbXVsYXRlOiBmdW5jdGlvbiggdHlwZSwgZWxlbSwgZXZlbnQgKSB7XG5cdFx0dmFyIGUgPSBqUXVlcnkuZXh0ZW5kKFxuXHRcdFx0bmV3IGpRdWVyeS5FdmVudCgpLFxuXHRcdFx0ZXZlbnQsXG5cdFx0XHR7XG5cdFx0XHRcdHR5cGU6IHR5cGUsXG5cdFx0XHRcdGlzU2ltdWxhdGVkOiB0cnVlXG5cdFx0XHR9XG5cdFx0KTtcblxuXHRcdGpRdWVyeS5ldmVudC50cmlnZ2VyKCBlLCBudWxsLCBlbGVtICk7XG5cdH1cblxufSApO1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cblx0dHJpZ2dlcjogZnVuY3Rpb24oIHR5cGUsIGRhdGEgKSB7XG5cdFx0cmV0dXJuIHRoaXMuZWFjaCggZnVuY3Rpb24oKSB7XG5cdFx0XHRqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgdGhpcyApO1xuXHRcdH0gKTtcblx0fSxcblx0dHJpZ2dlckhhbmRsZXI6IGZ1bmN0aW9uKCB0eXBlLCBkYXRhICkge1xuXHRcdHZhciBlbGVtID0gdGhpc1sgMCBdO1xuXHRcdGlmICggZWxlbSApIHtcblx0XHRcdHJldHVybiBqUXVlcnkuZXZlbnQudHJpZ2dlciggdHlwZSwgZGF0YSwgZWxlbSwgdHJ1ZSApO1xuXHRcdH1cblx0fVxufSApO1xuXG5cbi8vIFN1cHBvcnQ6IEZpcmVmb3ggPD00NFxuLy8gRmlyZWZveCBkb2Vzbid0IGhhdmUgZm9jdXMoaW4gfCBvdXQpIGV2ZW50c1xuLy8gUmVsYXRlZCB0aWNrZXQgLSBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02ODc3ODdcbi8vXG4vLyBTdXBwb3J0OiBDaHJvbWUgPD00OCAtIDQ5LCBTYWZhcmkgPD05LjAgLSA5LjFcbi8vIGZvY3VzKGluIHwgb3V0KSBldmVudHMgZmlyZSBhZnRlciBmb2N1cyAmIGJsdXIgZXZlbnRzLFxuLy8gd2hpY2ggaXMgc3BlYyB2aW9sYXRpb24gLSBodHRwOi8vd3d3LnczLm9yZy9UUi9ET00tTGV2ZWwtMy1FdmVudHMvI2V2ZW50cy1mb2N1c2V2ZW50LWV2ZW50LW9yZGVyXG4vLyBSZWxhdGVkIHRpY2tldCAtIGh0dHBzOi8vYnVncy5jaHJvbWl1bS5vcmcvcC9jaHJvbWl1bS9pc3N1ZXMvZGV0YWlsP2lkPTQ0OTg1N1xuaWYgKCAhc3VwcG9ydC5mb2N1c2luICkge1xuXHRqUXVlcnkuZWFjaCggeyBmb2N1czogXCJmb2N1c2luXCIsIGJsdXI6IFwiZm9jdXNvdXRcIiB9LCBmdW5jdGlvbiggb3JpZywgZml4ICkge1xuXG5cdFx0Ly8gQXR0YWNoIGEgc2luZ2xlIGNhcHR1cmluZyBoYW5kbGVyIG9uIHRoZSBkb2N1bWVudCB3aGlsZSBzb21lb25lIHdhbnRzIGZvY3VzaW4vZm9jdXNvdXRcblx0XHR2YXIgaGFuZGxlciA9IGZ1bmN0aW9uKCBldmVudCApIHtcblx0XHRcdGpRdWVyeS5ldmVudC5zaW11bGF0ZSggZml4LCBldmVudC50YXJnZXQsIGpRdWVyeS5ldmVudC5maXgoIGV2ZW50ICkgKTtcblx0XHR9O1xuXG5cdFx0alF1ZXJ5LmV2ZW50LnNwZWNpYWxbIGZpeCBdID0ge1xuXHRcdFx0c2V0dXA6IGZ1bmN0aW9uKCkge1xuXHRcdFx0XHR2YXIgZG9jID0gdGhpcy5vd25lckRvY3VtZW50IHx8IHRoaXMsXG5cdFx0XHRcdFx0YXR0YWNoZXMgPSBkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4ICk7XG5cblx0XHRcdFx0aWYgKCAhYXR0YWNoZXMgKSB7XG5cdFx0XHRcdFx0ZG9jLmFkZEV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4LCAoIGF0dGFjaGVzIHx8IDAgKSArIDEgKTtcblx0XHRcdH0sXG5cdFx0XHR0ZWFyZG93bjogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdHZhciBkb2MgPSB0aGlzLm93bmVyRG9jdW1lbnQgfHwgdGhpcyxcblx0XHRcdFx0XHRhdHRhY2hlcyA9IGRhdGFQcml2LmFjY2VzcyggZG9jLCBmaXggKSAtIDE7XG5cblx0XHRcdFx0aWYgKCAhYXR0YWNoZXMgKSB7XG5cdFx0XHRcdFx0ZG9jLnJlbW92ZUV2ZW50TGlzdGVuZXIoIG9yaWcsIGhhbmRsZXIsIHRydWUgKTtcblx0XHRcdFx0XHRkYXRhUHJpdi5yZW1vdmUoIGRvYywgZml4ICk7XG5cblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRkYXRhUHJpdi5hY2Nlc3MoIGRvYywgZml4LCBhdHRhY2hlcyApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fSApO1xufVxudmFyIGxvY2F0aW9uID0gd2luZG93LmxvY2F0aW9uO1xuXG52YXIgbm9uY2UgPSBEYXRlLm5vdygpO1xuXG52YXIgcnF1ZXJ5ID0gKCAvXFw/LyApO1xuXG5cblxuLy8gQ3Jvc3MtYnJvd3NlciB4bWwgcGFyc2luZ1xualF1ZXJ5LnBhcnNlWE1MID0gZnVuY3Rpb24oIGRhdGEgKSB7XG5cdHZhciB4bWw7XG5cdGlmICggIWRhdGEgfHwgdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIG51bGw7XG5cdH1cblxuXHQvLyBTdXBwb3J0OiBJRSA5IC0gMTEgb25seVxuXHQvLyBJRSB0aHJvd3Mgb24gcGFyc2VGcm9tU3RyaW5nIHdpdGggaW52YWxpZCBpbnB1dC5cblx0dHJ5IHtcblx0XHR4bWwgPSAoIG5ldyB3aW5kb3cuRE9NUGFyc2VyKCkgKS5wYXJzZUZyb21TdHJpbmcoIGRhdGEsIFwidGV4dC94bWxcIiApO1xuXHR9IGNhdGNoICggZSApIHtcblx0XHR4bWwgPSB1bmRlZmluZWQ7XG5cdH1cblxuXHRpZiAoICF4bWwgfHwgeG1sLmdldEVsZW1lbnRzQnlUYWdOYW1lKCBcInBhcnNlcmVycm9yXCIgKS5sZW5ndGggKSB7XG5cdFx0alF1ZXJ5LmVycm9yKCBcIkludmFsaWQgWE1MOiBcIiArIGRhdGEgKTtcblx0fVxuXHRyZXR1cm4geG1sO1xufTtcblxuXG52YXJcblx0cmJyYWNrZXQgPSAvXFxbXFxdJC8sXG5cdHJDUkxGID0gL1xccj9cXG4vZyxcblx0cnN1Ym1pdHRlclR5cGVzID0gL14oPzpzdWJtaXR8YnV0dG9ufGltYWdlfHJlc2V0fGZpbGUpJC9pLFxuXHRyc3VibWl0dGFibGUgPSAvXig/OmlucHV0fHNlbGVjdHx0ZXh0YXJlYXxrZXlnZW4pL2k7XG5cbmZ1bmN0aW9uIGJ1aWxkUGFyYW1zKCBwcmVmaXgsIG9iaiwgdHJhZGl0aW9uYWwsIGFkZCApIHtcblx0dmFyIG5hbWU7XG5cblx0aWYgKCBBcnJheS5pc0FycmF5KCBvYmogKSApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSBhcnJheSBpdGVtLlxuXHRcdGpRdWVyeS5lYWNoKCBvYmosIGZ1bmN0aW9uKCBpLCB2ICkge1xuXHRcdFx0aWYgKCB0cmFkaXRpb25hbCB8fCByYnJhY2tldC50ZXN0KCBwcmVmaXggKSApIHtcblxuXHRcdFx0XHQvLyBUcmVhdCBlYWNoIGFycmF5IGl0ZW0gYXMgYSBzY2FsYXIuXG5cdFx0XHRcdGFkZCggcHJlZml4LCB2ICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cblx0XHRcdFx0Ly8gSXRlbSBpcyBub24tc2NhbGFyIChhcnJheSBvciBvYmplY3QpLCBlbmNvZGUgaXRzIG51bWVyaWMgaW5kZXguXG5cdFx0XHRcdGJ1aWxkUGFyYW1zKFxuXHRcdFx0XHRcdHByZWZpeCArIFwiW1wiICsgKCB0eXBlb2YgdiA9PT0gXCJvYmplY3RcIiAmJiB2ICE9IG51bGwgPyBpIDogXCJcIiApICsgXCJdXCIsXG5cdFx0XHRcdFx0dixcblx0XHRcdFx0XHR0cmFkaXRpb25hbCxcblx0XHRcdFx0XHRhZGRcblx0XHRcdFx0KTtcblx0XHRcdH1cblx0XHR9ICk7XG5cblx0fSBlbHNlIGlmICggIXRyYWRpdGlvbmFsICYmIHRvVHlwZSggb2JqICkgPT09IFwib2JqZWN0XCIgKSB7XG5cblx0XHQvLyBTZXJpYWxpemUgb2JqZWN0IGl0ZW0uXG5cdFx0Zm9yICggbmFtZSBpbiBvYmogKSB7XG5cdFx0XHRidWlsZFBhcmFtcyggcHJlZml4ICsgXCJbXCIgKyBuYW1lICsgXCJdXCIsIG9ialsgbmFtZSBdLCB0cmFkaXRpb25hbCwgYWRkICk7XG5cdFx0fVxuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBTZXJpYWxpemUgc2NhbGFyIGl0ZW0uXG5cdFx0YWRkKCBwcmVmaXgsIG9iaiApO1xuXHR9XG59XG5cbi8vIFNlcmlhbGl6ZSBhbiBhcnJheSBvZiBmb3JtIGVsZW1lbnRzIG9yIGEgc2V0IG9mXG4vLyBrZXkvdmFsdWVzIGludG8gYSBxdWVyeSBzdHJpbmdcbmpRdWVyeS5wYXJhbSA9IGZ1bmN0aW9uKCBhLCB0cmFkaXRpb25hbCApIHtcblx0dmFyIHByZWZpeCxcblx0XHRzID0gW10sXG5cdFx0YWRkID0gZnVuY3Rpb24oIGtleSwgdmFsdWVPckZ1bmN0aW9uICkge1xuXG5cdFx0XHQvLyBJZiB2YWx1ZSBpcyBhIGZ1bmN0aW9uLCBpbnZva2UgaXQgYW5kIHVzZSBpdHMgcmV0dXJuIHZhbHVlXG5cdFx0XHR2YXIgdmFsdWUgPSBpc0Z1bmN0aW9uKCB2YWx1ZU9yRnVuY3Rpb24gKSA/XG5cdFx0XHRcdHZhbHVlT3JGdW5jdGlvbigpIDpcblx0XHRcdFx0dmFsdWVPckZ1bmN0aW9uO1xuXG5cdFx0XHRzWyBzLmxlbmd0aCBdID0gZW5jb2RlVVJJQ29tcG9uZW50KCBrZXkgKSArIFwiPVwiICtcblx0XHRcdFx0ZW5jb2RlVVJJQ29tcG9uZW50KCB2YWx1ZSA9PSBudWxsID8gXCJcIiA6IHZhbHVlICk7XG5cdFx0fTtcblxuXHRpZiAoIGEgPT0gbnVsbCApIHtcblx0XHRyZXR1cm4gXCJcIjtcblx0fVxuXG5cdC8vIElmIGFuIGFycmF5IHdhcyBwYXNzZWQgaW4sIGFzc3VtZSB0aGF0IGl0IGlzIGFuIGFycmF5IG9mIGZvcm0gZWxlbWVudHMuXG5cdGlmICggQXJyYXkuaXNBcnJheSggYSApIHx8ICggYS5qcXVlcnkgJiYgIWpRdWVyeS5pc1BsYWluT2JqZWN0KCBhICkgKSApIHtcblxuXHRcdC8vIFNlcmlhbGl6ZSB0aGUgZm9ybSBlbGVtZW50c1xuXHRcdGpRdWVyeS5lYWNoKCBhLCBmdW5jdGlvbigpIHtcblx0XHRcdGFkZCggdGhpcy5uYW1lLCB0aGlzLnZhbHVlICk7XG5cdFx0fSApO1xuXG5cdH0gZWxzZSB7XG5cblx0XHQvLyBJZiB0cmFkaXRpb25hbCwgZW5jb2RlIHRoZSBcIm9sZFwiIHdheSAodGhlIHdheSAxLjMuMiBvciBvbGRlclxuXHRcdC8vIGRpZCBpdCksIG90aGVyd2lzZSBlbmNvZGUgcGFyYW1zIHJlY3Vyc2l2ZWx5LlxuXHRcdGZvciAoIHByZWZpeCBpbiBhICkge1xuXHRcdFx0YnVpbGRQYXJhbXMoIHByZWZpeCwgYVsgcHJlZml4IF0sIHRyYWRpdGlvbmFsLCBhZGQgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBSZXR1cm4gdGhlIHJlc3VsdGluZyBzZXJpYWxpemF0aW9uXG5cdHJldHVybiBzLmpvaW4oIFwiJlwiICk7XG59O1xuXG5qUXVlcnkuZm4uZXh0ZW5kKCB7XG5cdHNlcmlhbGl6ZTogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5wYXJhbSggdGhpcy5zZXJpYWxpemVBcnJheSgpICk7XG5cdH0sXG5cdHNlcmlhbGl6ZUFycmF5OiBmdW5jdGlvbigpIHtcblx0XHRyZXR1cm4gdGhpcy5tYXAoIGZ1bmN0aW9uKCkge1xuXG5cdFx0XHQvLyBDYW4gYWRkIHByb3BIb29rIGZvciBcImVsZW1lbnRzXCIgdG8gZmlsdGVyIG9yIGFkZCBmb3JtIGVsZW1lbnRzXG5cdFx0XHR2YXIgZWxlbWVudHMgPSBqUXVlcnkucHJvcCggdGhpcywgXCJlbGVtZW50c1wiICk7XG5cdFx0XHRyZXR1cm4gZWxlbWVudHMgPyBqUXVlcnkubWFrZUFycmF5KCBlbGVtZW50cyApIDogdGhpcztcblx0XHR9IClcblx0XHQuZmlsdGVyKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciB0eXBlID0gdGhpcy50eXBlO1xuXG5cdFx0XHQvLyBVc2UgLmlzKCBcIjpkaXNhYmxlZFwiICkgc28gdGhhdCBmaWVsZHNldFtkaXNhYmxlZF0gd29ya3Ncblx0XHRcdHJldHVybiB0aGlzLm5hbWUgJiYgIWpRdWVyeSggdGhpcyApLmlzKCBcIjpkaXNhYmxlZFwiICkgJiZcblx0XHRcdFx0cnN1Ym1pdHRhYmxlLnRlc3QoIHRoaXMubm9kZU5hbWUgKSAmJiAhcnN1Ym1pdHRlclR5cGVzLnRlc3QoIHR5cGUgKSAmJlxuXHRcdFx0XHQoIHRoaXMuY2hlY2tlZCB8fCAhcmNoZWNrYWJsZVR5cGUudGVzdCggdHlwZSApICk7XG5cdFx0fSApXG5cdFx0Lm1hcCggZnVuY3Rpb24oIGksIGVsZW0gKSB7XG5cdFx0XHR2YXIgdmFsID0galF1ZXJ5KCB0aGlzICkudmFsKCk7XG5cblx0XHRcdGlmICggdmFsID09IG51bGwgKSB7XG5cdFx0XHRcdHJldHVybiBudWxsO1xuXHRcdFx0fVxuXG5cdFx0XHRpZiAoIEFycmF5LmlzQXJyYXkoIHZhbCApICkge1xuXHRcdFx0XHRyZXR1cm4galF1ZXJ5Lm1hcCggdmFsLCBmdW5jdGlvbiggdmFsICkge1xuXHRcdFx0XHRcdHJldHVybiB7IG5hbWU6IGVsZW0ubmFtZSwgdmFsdWU6IHZhbC5yZXBsYWNlKCByQ1JMRiwgXCJcXHJcXG5cIiApIH07XG5cdFx0XHRcdH0gKTtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIHsgbmFtZTogZWxlbS5uYW1lLCB2YWx1ZTogdmFsLnJlcGxhY2UoIHJDUkxGLCBcIlxcclxcblwiICkgfTtcblx0XHR9ICkuZ2V0KCk7XG5cdH1cbn0gKTtcblxuXG52YXJcblx0cjIwID0gLyUyMC9nLFxuXHRyaGFzaCA9IC8jLiokLyxcblx0cmFudGlDYWNoZSA9IC8oWz8mXSlfPVteJl0qLyxcblx0cmhlYWRlcnMgPSAvXiguKj8pOlsgXFx0XSooW15cXHJcXG5dKikkL21nLFxuXG5cdC8vICM3NjUzLCAjODEyNSwgIzgxNTI6IGxvY2FsIHByb3RvY29sIGRldGVjdGlvblxuXHRybG9jYWxQcm90b2NvbCA9IC9eKD86YWJvdXR8YXBwfGFwcC1zdG9yYWdlfC4rLWV4dGVuc2lvbnxmaWxlfHJlc3x3aWRnZXQpOiQvLFxuXHRybm9Db250ZW50ID0gL14oPzpHRVR8SEVBRCkkLyxcblx0cnByb3RvY29sID0gL15cXC9cXC8vLFxuXG5cdC8qIFByZWZpbHRlcnNcblx0ICogMSkgVGhleSBhcmUgdXNlZnVsIHRvIGludHJvZHVjZSBjdXN0b20gZGF0YVR5cGVzIChzZWUgYWpheC9qc29ucC5qcyBmb3IgYW4gZXhhbXBsZSlcblx0ICogMikgVGhlc2UgYXJlIGNhbGxlZDpcblx0ICogICAgLSBCRUZPUkUgYXNraW5nIGZvciBhIHRyYW5zcG9ydFxuXHQgKiAgICAtIEFGVEVSIHBhcmFtIHNlcmlhbGl6YXRpb24gKHMuZGF0YSBpcyBhIHN0cmluZyBpZiBzLnByb2Nlc3NEYXRhIGlzIHRydWUpXG5cdCAqIDMpIGtleSBpcyB0aGUgZGF0YVR5cGVcblx0ICogNCkgdGhlIGNhdGNoYWxsIHN5bWJvbCBcIipcIiBjYW4gYmUgdXNlZFxuXHQgKiA1KSBleGVjdXRpb24gd2lsbCBzdGFydCB3aXRoIHRyYW5zcG9ydCBkYXRhVHlwZSBhbmQgVEhFTiBjb250aW51ZSBkb3duIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0cHJlZmlsdGVycyA9IHt9LFxuXG5cdC8qIFRyYW5zcG9ydHMgYmluZGluZ3Ncblx0ICogMSkga2V5IGlzIHRoZSBkYXRhVHlwZVxuXHQgKiAyKSB0aGUgY2F0Y2hhbGwgc3ltYm9sIFwiKlwiIGNhbiBiZSB1c2VkXG5cdCAqIDMpIHNlbGVjdGlvbiB3aWxsIHN0YXJ0IHdpdGggdHJhbnNwb3J0IGRhdGFUeXBlIGFuZCBUSEVOIGdvIHRvIFwiKlwiIGlmIG5lZWRlZFxuXHQgKi9cblx0dHJhbnNwb3J0cyA9IHt9LFxuXG5cdC8vIEF2b2lkIGNvbW1lbnQtcHJvbG9nIGNoYXIgc2VxdWVuY2UgKCMxMDA5OCk7IG11c3QgYXBwZWFzZSBsaW50IGFuZCBldmFkZSBjb21wcmVzc2lvblxuXHRhbGxUeXBlcyA9IFwiKi9cIi5jb25jYXQoIFwiKlwiICksXG5cblx0Ly8gQW5jaG9yIHRhZyBmb3IgcGFyc2luZyB0aGUgZG9jdW1lbnQgb3JpZ2luXG5cdG9yaWdpbkFuY2hvciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoIFwiYVwiICk7XG5cdG9yaWdpbkFuY2hvci5ocmVmID0gbG9jYXRpb24uaHJlZjtcblxuLy8gQmFzZSBcImNvbnN0cnVjdG9yXCIgZm9yIGpRdWVyeS5hamF4UHJlZmlsdGVyIGFuZCBqUXVlcnkuYWpheFRyYW5zcG9ydFxuZnVuY3Rpb24gYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBzdHJ1Y3R1cmUgKSB7XG5cblx0Ly8gZGF0YVR5cGVFeHByZXNzaW9uIGlzIG9wdGlvbmFsIGFuZCBkZWZhdWx0cyB0byBcIipcIlxuXHRyZXR1cm4gZnVuY3Rpb24oIGRhdGFUeXBlRXhwcmVzc2lvbiwgZnVuYyApIHtcblxuXHRcdGlmICggdHlwZW9mIGRhdGFUeXBlRXhwcmVzc2lvbiAhPT0gXCJzdHJpbmdcIiApIHtcblx0XHRcdGZ1bmMgPSBkYXRhVHlwZUV4cHJlc3Npb247XG5cdFx0XHRkYXRhVHlwZUV4cHJlc3Npb24gPSBcIipcIjtcblx0XHR9XG5cblx0XHR2YXIgZGF0YVR5cGUsXG5cdFx0XHRpID0gMCxcblx0XHRcdGRhdGFUeXBlcyA9IGRhdGFUeXBlRXhwcmVzc2lvbi50b0xvd2VyQ2FzZSgpLm1hdGNoKCBybm90aHRtbHdoaXRlICkgfHwgW107XG5cblx0XHRpZiAoIGlzRnVuY3Rpb24oIGZ1bmMgKSApIHtcblxuXHRcdFx0Ly8gRm9yIGVhY2ggZGF0YVR5cGUgaW4gdGhlIGRhdGFUeXBlRXhwcmVzc2lvblxuXHRcdFx0d2hpbGUgKCAoIGRhdGFUeXBlID0gZGF0YVR5cGVzWyBpKysgXSApICkge1xuXG5cdFx0XHRcdC8vIFByZXBlbmQgaWYgcmVxdWVzdGVkXG5cdFx0XHRcdGlmICggZGF0YVR5cGVbIDAgXSA9PT0gXCIrXCIgKSB7XG5cdFx0XHRcdFx0ZGF0YVR5cGUgPSBkYXRhVHlwZS5zbGljZSggMSApIHx8IFwiKlwiO1xuXHRcdFx0XHRcdCggc3RydWN0dXJlWyBkYXRhVHlwZSBdID0gc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdICkudW5zaGlmdCggZnVuYyApO1xuXG5cdFx0XHRcdC8vIE90aGVyd2lzZSBhcHBlbmRcblx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHQoIHN0cnVjdHVyZVsgZGF0YVR5cGUgXSA9IHN0cnVjdHVyZVsgZGF0YVR5cGUgXSB8fCBbXSApLnB1c2goIGZ1bmMgKTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fTtcbn1cblxuLy8gQmFzZSBpbnNwZWN0aW9uIGZ1bmN0aW9uIGZvciBwcmVmaWx0ZXJzIGFuZCB0cmFuc3BvcnRzXG5mdW5jdGlvbiBpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggc3RydWN0dXJlLCBvcHRpb25zLCBvcmlnaW5hbE9wdGlvbnMsIGpxWEhSICkge1xuXG5cdHZhciBpbnNwZWN0ZWQgPSB7fSxcblx0XHRzZWVraW5nVHJhbnNwb3J0ID0gKCBzdHJ1Y3R1cmUgPT09IHRyYW5zcG9ydHMgKTtcblxuXHRmdW5jdGlvbiBpbnNwZWN0KCBkYXRhVHlwZSApIHtcblx0XHR2YXIgc2VsZWN0ZWQ7XG5cdFx0aW5zcGVjdGVkWyBkYXRhVHlwZSBdID0gdHJ1ZTtcblx0XHRqUXVlcnkuZWFjaCggc3RydWN0dXJlWyBkYXRhVHlwZSBdIHx8IFtdLCBmdW5jdGlvbiggXywgcHJlZmlsdGVyT3JGYWN0b3J5ICkge1xuXHRcdFx0dmFyIGRhdGFUeXBlT3JUcmFuc3BvcnQgPSBwcmVmaWx0ZXJPckZhY3RvcnkoIG9wdGlvbnMsIG9yaWdpbmFsT3B0aW9ucywganFYSFIgKTtcblx0XHRcdGlmICggdHlwZW9mIGRhdGFUeXBlT3JUcmFuc3BvcnQgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0IXNlZWtpbmdUcmFuc3BvcnQgJiYgIWluc3BlY3RlZFsgZGF0YVR5cGVPclRyYW5zcG9ydCBdICkge1xuXG5cdFx0XHRcdG9wdGlvbnMuZGF0YVR5cGVzLnVuc2hpZnQoIGRhdGFUeXBlT3JUcmFuc3BvcnQgKTtcblx0XHRcdFx0aW5zcGVjdCggZGF0YVR5cGVPclRyYW5zcG9ydCApO1xuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9IGVsc2UgaWYgKCBzZWVraW5nVHJhbnNwb3J0ICkge1xuXHRcdFx0XHRyZXR1cm4gISggc2VsZWN0ZWQgPSBkYXRhVHlwZU9yVHJhbnNwb3J0ICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHRcdHJldHVybiBzZWxlY3RlZDtcblx0fVxuXG5cdHJldHVybiBpbnNwZWN0KCBvcHRpb25zLmRhdGFUeXBlc1sgMCBdICkgfHwgIWluc3BlY3RlZFsgXCIqXCIgXSAmJiBpbnNwZWN0KCBcIipcIiApO1xufVxuXG4vLyBBIHNwZWNpYWwgZXh0ZW5kIGZvciBhamF4IG9wdGlvbnNcbi8vIHRoYXQgdGFrZXMgXCJmbGF0XCIgb3B0aW9ucyAobm90IHRvIGJlIGRlZXAgZXh0ZW5kZWQpXG4vLyBGaXhlcyAjOTg4N1xuZnVuY3Rpb24gYWpheEV4dGVuZCggdGFyZ2V0LCBzcmMgKSB7XG5cdHZhciBrZXksIGRlZXAsXG5cdFx0ZmxhdE9wdGlvbnMgPSBqUXVlcnkuYWpheFNldHRpbmdzLmZsYXRPcHRpb25zIHx8IHt9O1xuXG5cdGZvciAoIGtleSBpbiBzcmMgKSB7XG5cdFx0aWYgKCBzcmNbIGtleSBdICE9PSB1bmRlZmluZWQgKSB7XG5cdFx0XHQoIGZsYXRPcHRpb25zWyBrZXkgXSA/IHRhcmdldCA6ICggZGVlcCB8fCAoIGRlZXAgPSB7fSApICkgKVsga2V5IF0gPSBzcmNbIGtleSBdO1xuXHRcdH1cblx0fVxuXHRpZiAoIGRlZXAgKSB7XG5cdFx0alF1ZXJ5LmV4dGVuZCggdHJ1ZSwgdGFyZ2V0LCBkZWVwICk7XG5cdH1cblxuXHRyZXR1cm4gdGFyZ2V0O1xufVxuXG4vKiBIYW5kbGVzIHJlc3BvbnNlcyB0byBhbiBhamF4IHJlcXVlc3Q6XG4gKiAtIGZpbmRzIHRoZSByaWdodCBkYXRhVHlwZSAobWVkaWF0ZXMgYmV0d2VlbiBjb250ZW50LXR5cGUgYW5kIGV4cGVjdGVkIGRhdGFUeXBlKVxuICogLSByZXR1cm5zIHRoZSBjb3JyZXNwb25kaW5nIHJlc3BvbnNlXG4gKi9cbmZ1bmN0aW9uIGFqYXhIYW5kbGVSZXNwb25zZXMoIHMsIGpxWEhSLCByZXNwb25zZXMgKSB7XG5cblx0dmFyIGN0LCB0eXBlLCBmaW5hbERhdGFUeXBlLCBmaXJzdERhdGFUeXBlLFxuXHRcdGNvbnRlbnRzID0gcy5jb250ZW50cyxcblx0XHRkYXRhVHlwZXMgPSBzLmRhdGFUeXBlcztcblxuXHQvLyBSZW1vdmUgYXV0byBkYXRhVHlwZSBhbmQgZ2V0IGNvbnRlbnQtdHlwZSBpbiB0aGUgcHJvY2Vzc1xuXHR3aGlsZSAoIGRhdGFUeXBlc1sgMCBdID09PSBcIipcIiApIHtcblx0XHRkYXRhVHlwZXMuc2hpZnQoKTtcblx0XHRpZiAoIGN0ID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRjdCA9IHMubWltZVR5cGUgfHwganFYSFIuZ2V0UmVzcG9uc2VIZWFkZXIoIFwiQ29udGVudC1UeXBlXCIgKTtcblx0XHR9XG5cdH1cblxuXHQvLyBDaGVjayBpZiB3ZSdyZSBkZWFsaW5nIHdpdGggYSBrbm93biBjb250ZW50LXR5cGVcblx0aWYgKCBjdCApIHtcblx0XHRmb3IgKCB0eXBlIGluIGNvbnRlbnRzICkge1xuXHRcdFx0aWYgKCBjb250ZW50c1sgdHlwZSBdICYmIGNvbnRlbnRzWyB0eXBlIF0udGVzdCggY3QgKSApIHtcblx0XHRcdFx0ZGF0YVR5cGVzLnVuc2hpZnQoIHR5cGUgKTtcblx0XHRcdFx0YnJlYWs7XG5cdFx0XHR9XG5cdFx0fVxuXHR9XG5cblx0Ly8gQ2hlY2sgdG8gc2VlIGlmIHdlIGhhdmUgYSByZXNwb25zZSBmb3IgdGhlIGV4cGVjdGVkIGRhdGFUeXBlXG5cdGlmICggZGF0YVR5cGVzWyAwIF0gaW4gcmVzcG9uc2VzICkge1xuXHRcdGZpbmFsRGF0YVR5cGUgPSBkYXRhVHlwZXNbIDAgXTtcblx0fSBlbHNlIHtcblxuXHRcdC8vIFRyeSBjb252ZXJ0aWJsZSBkYXRhVHlwZXNcblx0XHRmb3IgKCB0eXBlIGluIHJlc3BvbnNlcyApIHtcblx0XHRcdGlmICggIWRhdGFUeXBlc1sgMCBdIHx8IHMuY29udmVydGVyc1sgdHlwZSArIFwiIFwiICsgZGF0YVR5cGVzWyAwIF0gXSApIHtcblx0XHRcdFx0ZmluYWxEYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCAhZmlyc3REYXRhVHlwZSApIHtcblx0XHRcdFx0Zmlyc3REYXRhVHlwZSA9IHR5cGU7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gT3IganVzdCB1c2UgZmlyc3Qgb25lXG5cdFx0ZmluYWxEYXRhVHlwZSA9IGZpbmFsRGF0YVR5cGUgfHwgZmlyc3REYXRhVHlwZTtcblx0fVxuXG5cdC8vIElmIHdlIGZvdW5kIGEgZGF0YVR5cGVcblx0Ly8gV2UgYWRkIHRoZSBkYXRhVHlwZSB0byB0aGUgbGlzdCBpZiBuZWVkZWRcblx0Ly8gYW5kIHJldHVybiB0aGUgY29ycmVzcG9uZGluZyByZXNwb25zZVxuXHRpZiAoIGZpbmFsRGF0YVR5cGUgKSB7XG5cdFx0aWYgKCBmaW5hbERhdGFUeXBlICE9PSBkYXRhVHlwZXNbIDAgXSApIHtcblx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCBmaW5hbERhdGFUeXBlICk7XG5cdFx0fVxuXHRcdHJldHVybiByZXNwb25zZXNbIGZpbmFsRGF0YVR5cGUgXTtcblx0fVxufVxuXG4vKiBDaGFpbiBjb252ZXJzaW9ucyBnaXZlbiB0aGUgcmVxdWVzdCBhbmQgdGhlIG9yaWdpbmFsIHJlc3BvbnNlXG4gKiBBbHNvIHNldHMgdGhlIHJlc3BvbnNlWFhYIGZpZWxkcyBvbiB0aGUganFYSFIgaW5zdGFuY2VcbiAqL1xuZnVuY3Rpb24gYWpheENvbnZlcnQoIHMsIHJlc3BvbnNlLCBqcVhIUiwgaXNTdWNjZXNzICkge1xuXHR2YXIgY29udjIsIGN1cnJlbnQsIGNvbnYsIHRtcCwgcHJldixcblx0XHRjb252ZXJ0ZXJzID0ge30sXG5cblx0XHQvLyBXb3JrIHdpdGggYSBjb3B5IG9mIGRhdGFUeXBlcyBpbiBjYXNlIHdlIG5lZWQgdG8gbW9kaWZ5IGl0IGZvciBjb252ZXJzaW9uXG5cdFx0ZGF0YVR5cGVzID0gcy5kYXRhVHlwZXMuc2xpY2UoKTtcblxuXHQvLyBDcmVhdGUgY29udmVydGVycyBtYXAgd2l0aCBsb3dlcmNhc2VkIGtleXNcblx0aWYgKCBkYXRhVHlwZXNbIDEgXSApIHtcblx0XHRmb3IgKCBjb252IGluIHMuY29udmVydGVycyApIHtcblx0XHRcdGNvbnZlcnRlcnNbIGNvbnYudG9Mb3dlckNhc2UoKSBdID0gcy5jb252ZXJ0ZXJzWyBjb252IF07XG5cdFx0fVxuXHR9XG5cblx0Y3VycmVudCA9IGRhdGFUeXBlcy5zaGlmdCgpO1xuXG5cdC8vIENvbnZlcnQgdG8gZWFjaCBzZXF1ZW50aWFsIGRhdGFUeXBlXG5cdHdoaWxlICggY3VycmVudCApIHtcblxuXHRcdGlmICggcy5yZXNwb25zZUZpZWxkc1sgY3VycmVudCBdICkge1xuXHRcdFx0anFYSFJbIHMucmVzcG9uc2VGaWVsZHNbIGN1cnJlbnQgXSBdID0gcmVzcG9uc2U7XG5cdFx0fVxuXG5cdFx0Ly8gQXBwbHkgdGhlIGRhdGFGaWx0ZXIgaWYgcHJvdmlkZWRcblx0XHRpZiAoICFwcmV2ICYmIGlzU3VjY2VzcyAmJiBzLmRhdGFGaWx0ZXIgKSB7XG5cdFx0XHRyZXNwb25zZSA9IHMuZGF0YUZpbHRlciggcmVzcG9uc2UsIHMuZGF0YVR5cGUgKTtcblx0XHR9XG5cblx0XHRwcmV2ID0gY3VycmVudDtcblx0XHRjdXJyZW50ID0gZGF0YVR5cGVzLnNoaWZ0KCk7XG5cblx0XHRpZiAoIGN1cnJlbnQgKSB7XG5cblx0XHRcdC8vIFRoZXJlJ3Mgb25seSB3b3JrIHRvIGRvIGlmIGN1cnJlbnQgZGF0YVR5cGUgaXMgbm9uLWF1dG9cblx0XHRcdGlmICggY3VycmVudCA9PT0gXCIqXCIgKSB7XG5cblx0XHRcdFx0Y3VycmVudCA9IHByZXY7XG5cblx0XHRcdC8vIENvbnZlcnQgcmVzcG9uc2UgaWYgcHJldiBkYXRhVHlwZSBpcyBub24tYXV0byBhbmQgZGlmZmVycyBmcm9tIGN1cnJlbnRcblx0XHRcdH0gZWxzZSBpZiAoIHByZXYgIT09IFwiKlwiICYmIHByZXYgIT09IGN1cnJlbnQgKSB7XG5cblx0XHRcdFx0Ly8gU2VlayBhIGRpcmVjdCBjb252ZXJ0ZXJcblx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIGN1cnJlbnQgXSB8fCBjb252ZXJ0ZXJzWyBcIiogXCIgKyBjdXJyZW50IF07XG5cblx0XHRcdFx0Ly8gSWYgbm9uZSBmb3VuZCwgc2VlayBhIHBhaXJcblx0XHRcdFx0aWYgKCAhY29udiApIHtcblx0XHRcdFx0XHRmb3IgKCBjb252MiBpbiBjb252ZXJ0ZXJzICkge1xuXG5cdFx0XHRcdFx0XHQvLyBJZiBjb252MiBvdXRwdXRzIGN1cnJlbnRcblx0XHRcdFx0XHRcdHRtcCA9IGNvbnYyLnNwbGl0KCBcIiBcIiApO1xuXHRcdFx0XHRcdFx0aWYgKCB0bXBbIDEgXSA9PT0gY3VycmVudCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBJZiBwcmV2IGNhbiBiZSBjb252ZXJ0ZWQgdG8gYWNjZXB0ZWQgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIHByZXYgKyBcIiBcIiArIHRtcFsgMCBdIF0gfHxcblx0XHRcdFx0XHRcdFx0XHRjb252ZXJ0ZXJzWyBcIiogXCIgKyB0bXBbIDAgXSBdO1xuXHRcdFx0XHRcdFx0XHRpZiAoIGNvbnYgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBDb25kZW5zZSBlcXVpdmFsZW5jZSBjb252ZXJ0ZXJzXG5cdFx0XHRcdFx0XHRcdFx0aWYgKCBjb252ID09PSB0cnVlICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29udiA9IGNvbnZlcnRlcnNbIGNvbnYyIF07XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBPdGhlcndpc2UsIGluc2VydCB0aGUgaW50ZXJtZWRpYXRlIGRhdGFUeXBlXG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmICggY29udmVydGVyc1sgY29udjIgXSAhPT0gdHJ1ZSApIHtcblx0XHRcdFx0XHRcdFx0XHRcdGN1cnJlbnQgPSB0bXBbIDAgXTtcblx0XHRcdFx0XHRcdFx0XHRcdGRhdGFUeXBlcy51bnNoaWZ0KCB0bXBbIDEgXSApO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRicmVhaztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIEFwcGx5IGNvbnZlcnRlciAoaWYgbm90IGFuIGVxdWl2YWxlbmNlKVxuXHRcdFx0XHRpZiAoIGNvbnYgIT09IHRydWUgKSB7XG5cblx0XHRcdFx0XHQvLyBVbmxlc3MgZXJyb3JzIGFyZSBhbGxvd2VkIHRvIGJ1YmJsZSwgY2F0Y2ggYW5kIHJldHVybiB0aGVtXG5cdFx0XHRcdFx0aWYgKCBjb252ICYmIHMudGhyb3dzICkge1xuXHRcdFx0XHRcdFx0cmVzcG9uc2UgPSBjb252KCByZXNwb25zZSApO1xuXHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHR0cnkge1xuXHRcdFx0XHRcdFx0XHRyZXNwb25zZSA9IGNvbnYoIHJlc3BvbnNlICk7XG5cdFx0XHRcdFx0XHR9IGNhdGNoICggZSApIHtcblx0XHRcdFx0XHRcdFx0cmV0dXJuIHtcblx0XHRcdFx0XHRcdFx0XHRzdGF0ZTogXCJwYXJzZXJlcnJvclwiLFxuXHRcdFx0XHRcdFx0XHRcdGVycm9yOiBjb252ID8gZSA6IFwiTm8gY29udmVyc2lvbiBmcm9tIFwiICsgcHJldiArIFwiIHRvIFwiICsgY3VycmVudFxuXHRcdFx0XHRcdFx0XHR9O1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdHJldHVybiB7IHN0YXRlOiBcInN1Y2Nlc3NcIiwgZGF0YTogcmVzcG9uc2UgfTtcbn1cblxualF1ZXJ5LmV4dGVuZCgge1xuXG5cdC8vIENvdW50ZXIgZm9yIGhvbGRpbmcgdGhlIG51bWJlciBvZiBhY3RpdmUgcXVlcmllc1xuXHRhY3RpdmU6IDAsXG5cblx0Ly8gTGFzdC1Nb2RpZmllZCBoZWFkZXIgY2FjaGUgZm9yIG5leHQgcmVxdWVzdFxuXHRsYXN0TW9kaWZpZWQ6IHt9LFxuXHRldGFnOiB7fSxcblxuXHRhamF4U2V0dGluZ3M6IHtcblx0XHR1cmw6IGxvY2F0aW9uLmhyZWYsXG5cdFx0dHlwZTogXCJHRVRcIixcblx0XHRpc0xvY2FsOiBybG9jYWxQcm90b2NvbC50ZXN0KCBsb2NhdGlvbi5wcm90b2NvbCApLFxuXHRcdGdsb2JhbDogdHJ1ZSxcblx0XHRwcm9jZXNzRGF0YTogdHJ1ZSxcblx0XHRhc3luYzogdHJ1ZSxcblx0XHRjb250ZW50VHlwZTogXCJhcHBsaWNhdGlvbi94LXd3dy1mb3JtLXVybGVuY29kZWQ7IGNoYXJzZXQ9VVRGLThcIixcblxuXHRcdC8qXG5cdFx0dGltZW91dDogMCxcblx0XHRkYXRhOiBudWxsLFxuXHRcdGRhdGFUeXBlOiBudWxsLFxuXHRcdHVzZXJuYW1lOiBudWxsLFxuXHRcdHBhc3N3b3JkOiBudWxsLFxuXHRcdGNhY2hlOiBudWxsLFxuXHRcdHRocm93czogZmFsc2UsXG5cdFx0dHJhZGl0aW9uYWw6IGZhbHNlLFxuXHRcdGhlYWRlcnM6IHt9LFxuXHRcdCovXG5cblx0XHRhY2NlcHRzOiB7XG5cdFx0XHRcIipcIjogYWxsVHlwZXMsXG5cdFx0XHR0ZXh0OiBcInRleHQvcGxhaW5cIixcblx0XHRcdGh0bWw6IFwidGV4dC9odG1sXCIsXG5cdFx0XHR4bWw6IFwiYXBwbGljYXRpb24veG1sLCB0ZXh0L3htbFwiLFxuXHRcdFx0anNvbjogXCJhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L2phdmFzY3JpcHRcIlxuXHRcdH0sXG5cblx0XHRjb250ZW50czoge1xuXHRcdFx0eG1sOiAvXFxieG1sXFxiLyxcblx0XHRcdGh0bWw6IC9cXGJodG1sLyxcblx0XHRcdGpzb246IC9cXGJqc29uXFxiL1xuXHRcdH0sXG5cblx0XHRyZXNwb25zZUZpZWxkczoge1xuXHRcdFx0eG1sOiBcInJlc3BvbnNlWE1MXCIsXG5cdFx0XHR0ZXh0OiBcInJlc3BvbnNlVGV4dFwiLFxuXHRcdFx0anNvbjogXCJyZXNwb25zZUpTT05cIlxuXHRcdH0sXG5cblx0XHQvLyBEYXRhIGNvbnZlcnRlcnNcblx0XHQvLyBLZXlzIHNlcGFyYXRlIHNvdXJjZSAob3IgY2F0Y2hhbGwgXCIqXCIpIGFuZCBkZXN0aW5hdGlvbiB0eXBlcyB3aXRoIGEgc2luZ2xlIHNwYWNlXG5cdFx0Y29udmVydGVyczoge1xuXG5cdFx0XHQvLyBDb252ZXJ0IGFueXRoaW5nIHRvIHRleHRcblx0XHRcdFwiKiB0ZXh0XCI6IFN0cmluZyxcblxuXHRcdFx0Ly8gVGV4dCB0byBodG1sICh0cnVlID0gbm8gdHJhbnNmb3JtYXRpb24pXG5cdFx0XHRcInRleHQgaHRtbFwiOiB0cnVlLFxuXG5cdFx0XHQvLyBFdmFsdWF0ZSB0ZXh0IGFzIGEganNvbiBleHByZXNzaW9uXG5cdFx0XHRcInRleHQganNvblwiOiBKU09OLnBhcnNlLFxuXG5cdFx0XHQvLyBQYXJzZSB0ZXh0IGFzIHhtbFxuXHRcdFx0XCJ0ZXh0IHhtbFwiOiBqUXVlcnkucGFyc2VYTUxcblx0XHR9LFxuXG5cdFx0Ly8gRm9yIG9wdGlvbnMgdGhhdCBzaG91bGRuJ3QgYmUgZGVlcCBleHRlbmRlZDpcblx0XHQvLyB5b3UgY2FuIGFkZCB5b3VyIG93biBjdXN0b20gb3B0aW9ucyBoZXJlIGlmXG5cdFx0Ly8gYW5kIHdoZW4geW91IGNyZWF0ZSBvbmUgdGhhdCBzaG91bGRuJ3QgYmVcblx0XHQvLyBkZWVwIGV4dGVuZGVkIChzZWUgYWpheEV4dGVuZClcblx0XHRmbGF0T3B0aW9uczoge1xuXHRcdFx0dXJsOiB0cnVlLFxuXHRcdFx0Y29udGV4dDogdHJ1ZVxuXHRcdH1cblx0fSxcblxuXHQvLyBDcmVhdGVzIGEgZnVsbCBmbGVkZ2VkIHNldHRpbmdzIG9iamVjdCBpbnRvIHRhcmdldFxuXHQvLyB3aXRoIGJvdGggYWpheFNldHRpbmdzIGFuZCBzZXR0aW5ncyBmaWVsZHMuXG5cdC8vIElmIHRhcmdldCBpcyBvbWl0dGVkLCB3cml0ZXMgaW50byBhamF4U2V0dGluZ3MuXG5cdGFqYXhTZXR1cDogZnVuY3Rpb24oIHRhcmdldCwgc2V0dGluZ3MgKSB7XG5cdFx0cmV0dXJuIHNldHRpbmdzID9cblxuXHRcdFx0Ly8gQnVpbGRpbmcgYSBzZXR0aW5ncyBvYmplY3Rcblx0XHRcdGFqYXhFeHRlbmQoIGFqYXhFeHRlbmQoIHRhcmdldCwgalF1ZXJ5LmFqYXhTZXR0aW5ncyApLCBzZXR0aW5ncyApIDpcblxuXHRcdFx0Ly8gRXh0ZW5kaW5nIGFqYXhTZXR0aW5nc1xuXHRcdFx0YWpheEV4dGVuZCggalF1ZXJ5LmFqYXhTZXR0aW5ncywgdGFyZ2V0ICk7XG5cdH0sXG5cblx0YWpheFByZWZpbHRlcjogYWRkVG9QcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCBwcmVmaWx0ZXJzICksXG5cdGFqYXhUcmFuc3BvcnQ6IGFkZFRvUHJlZmlsdGVyc09yVHJhbnNwb3J0cyggdHJhbnNwb3J0cyApLFxuXG5cdC8vIE1haW4gbWV0aG9kXG5cdGFqYXg6IGZ1bmN0aW9uKCB1cmwsIG9wdGlvbnMgKSB7XG5cblx0XHQvLyBJZiB1cmwgaXMgYW4gb2JqZWN0LCBzaW11bGF0ZSBwcmUtMS41IHNpZ25hdHVyZVxuXHRcdGlmICggdHlwZW9mIHVybCA9PT0gXCJvYmplY3RcIiApIHtcblx0XHRcdG9wdGlvbnMgPSB1cmw7XG5cdFx0XHR1cmwgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gRm9yY2Ugb3B0aW9ucyB0byBiZSBhbiBvYmplY3Rcblx0XHRvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuXHRcdHZhciB0cmFuc3BvcnQsXG5cblx0XHRcdC8vIFVSTCB3aXRob3V0IGFudGktY2FjaGUgcGFyYW1cblx0XHRcdGNhY2hlVVJMLFxuXG5cdFx0XHQvLyBSZXNwb25zZSBoZWFkZXJzXG5cdFx0XHRyZXNwb25zZUhlYWRlcnNTdHJpbmcsXG5cdFx0XHRyZXNwb25zZUhlYWRlcnMsXG5cblx0XHRcdC8vIHRpbWVvdXQgaGFuZGxlXG5cdFx0XHR0aW1lb3V0VGltZXIsXG5cblx0XHRcdC8vIFVybCBjbGVhbnVwIHZhclxuXHRcdFx0dXJsQW5jaG9yLFxuXG5cdFx0XHQvLyBSZXF1ZXN0IHN0YXRlIChiZWNvbWVzIGZhbHNlIHVwb24gc2VuZCBhbmQgdHJ1ZSB1cG9uIGNvbXBsZXRpb24pXG5cdFx0XHRjb21wbGV0ZWQsXG5cblx0XHRcdC8vIFRvIGtub3cgaWYgZ2xvYmFsIGV2ZW50cyBhcmUgdG8gYmUgZGlzcGF0Y2hlZFxuXHRcdFx0ZmlyZUdsb2JhbHMsXG5cblx0XHRcdC8vIExvb3AgdmFyaWFibGVcblx0XHRcdGksXG5cblx0XHRcdC8vIHVuY2FjaGVkIHBhcnQgb2YgdGhlIHVybFxuXHRcdFx0dW5jYWNoZWQsXG5cblx0XHRcdC8vIENyZWF0ZSB0aGUgZmluYWwgb3B0aW9ucyBvYmplY3Rcblx0XHRcdHMgPSBqUXVlcnkuYWpheFNldHVwKCB7fSwgb3B0aW9ucyApLFxuXG5cdFx0XHQvLyBDYWxsYmFja3MgY29udGV4dFxuXHRcdFx0Y2FsbGJhY2tDb250ZXh0ID0gcy5jb250ZXh0IHx8IHMsXG5cblx0XHRcdC8vIENvbnRleHQgZm9yIGdsb2JhbCBldmVudHMgaXMgY2FsbGJhY2tDb250ZXh0IGlmIGl0IGlzIGEgRE9NIG5vZGUgb3IgalF1ZXJ5IGNvbGxlY3Rpb25cblx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dCA9IHMuY29udGV4dCAmJlxuXHRcdFx0XHQoIGNhbGxiYWNrQ29udGV4dC5ub2RlVHlwZSB8fCBjYWxsYmFja0NvbnRleHQuanF1ZXJ5ICkgP1xuXHRcdFx0XHRcdGpRdWVyeSggY2FsbGJhY2tDb250ZXh0ICkgOlxuXHRcdFx0XHRcdGpRdWVyeS5ldmVudCxcblxuXHRcdFx0Ly8gRGVmZXJyZWRzXG5cdFx0XHRkZWZlcnJlZCA9IGpRdWVyeS5EZWZlcnJlZCgpLFxuXHRcdFx0Y29tcGxldGVEZWZlcnJlZCA9IGpRdWVyeS5DYWxsYmFja3MoIFwib25jZSBtZW1vcnlcIiApLFxuXG5cdFx0XHQvLyBTdGF0dXMtZGVwZW5kZW50IGNhbGxiYWNrc1xuXHRcdFx0c3RhdHVzQ29kZSA9IHMuc3RhdHVzQ29kZSB8fCB7fSxcblxuXHRcdFx0Ly8gSGVhZGVycyAodGhleSBhcmUgc2VudCBhbGwgYXQgb25jZSlcblx0XHRcdHJlcXVlc3RIZWFkZXJzID0ge30sXG5cdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzID0ge30sXG5cblx0XHRcdC8vIERlZmF1bHQgYWJvcnQgbWVzc2FnZVxuXHRcdFx0c3RyQWJvcnQgPSBcImNhbmNlbGVkXCIsXG5cblx0XHRcdC8vIEZha2UgeGhyXG5cdFx0XHRqcVhIUiA9IHtcblx0XHRcdFx0cmVhZHlTdGF0ZTogMCxcblxuXHRcdFx0XHQvLyBCdWlsZHMgaGVhZGVycyBoYXNodGFibGUgaWYgbmVlZGVkXG5cdFx0XHRcdGdldFJlc3BvbnNlSGVhZGVyOiBmdW5jdGlvbigga2V5ICkge1xuXHRcdFx0XHRcdHZhciBtYXRjaDtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0XHRcdGlmICggIXJlc3BvbnNlSGVhZGVycyApIHtcblx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzID0ge307XG5cdFx0XHRcdFx0XHRcdHdoaWxlICggKCBtYXRjaCA9IHJoZWFkZXJzLmV4ZWMoIHJlc3BvbnNlSGVhZGVyc1N0cmluZyApICkgKSB7XG5cdFx0XHRcdFx0XHRcdFx0cmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgKyBcIiBcIiBdID1cblx0XHRcdFx0XHRcdFx0XHRcdCggcmVzcG9uc2VIZWFkZXJzWyBtYXRjaFsgMSBdLnRvTG93ZXJDYXNlKCkgKyBcIiBcIiBdIHx8IFtdIClcblx0XHRcdFx0XHRcdFx0XHRcdFx0LmNvbmNhdCggbWF0Y2hbIDIgXSApO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRtYXRjaCA9IHJlc3BvbnNlSGVhZGVyc1sga2V5LnRvTG93ZXJDYXNlKCkgKyBcIiBcIiBdO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gbWF0Y2ggPT0gbnVsbCA/IG51bGwgOiBtYXRjaC5qb2luKCBcIiwgXCIgKTtcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBSYXcgc3RyaW5nXG5cdFx0XHRcdGdldEFsbFJlc3BvbnNlSGVhZGVyczogZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGNvbXBsZXRlZCA/IHJlc3BvbnNlSGVhZGVyc1N0cmluZyA6IG51bGw7XG5cdFx0XHRcdH0sXG5cblx0XHRcdFx0Ly8gQ2FjaGVzIHRoZSBoZWFkZXJcblx0XHRcdFx0c2V0UmVxdWVzdEhlYWRlcjogZnVuY3Rpb24oIG5hbWUsIHZhbHVlICkge1xuXHRcdFx0XHRcdGlmICggY29tcGxldGVkID09IG51bGwgKSB7XG5cdFx0XHRcdFx0XHRuYW1lID0gcmVxdWVzdEhlYWRlcnNOYW1lc1sgbmFtZS50b0xvd2VyQ2FzZSgpIF0gPVxuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0SGVhZGVyc05hbWVzWyBuYW1lLnRvTG93ZXJDYXNlKCkgXSB8fCBuYW1lO1xuXHRcdFx0XHRcdFx0cmVxdWVzdEhlYWRlcnNbIG5hbWUgXSA9IHZhbHVlO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fSxcblxuXHRcdFx0XHQvLyBPdmVycmlkZXMgcmVzcG9uc2UgY29udGVudC10eXBlIGhlYWRlclxuXHRcdFx0XHRvdmVycmlkZU1pbWVUeXBlOiBmdW5jdGlvbiggdHlwZSApIHtcblx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCA9PSBudWxsICkge1xuXHRcdFx0XHRcdFx0cy5taW1lVHlwZSA9IHR5cGU7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIFN0YXR1cy1kZXBlbmRlbnQgY2FsbGJhY2tzXG5cdFx0XHRcdHN0YXR1c0NvZGU6IGZ1bmN0aW9uKCBtYXAgKSB7XG5cdFx0XHRcdFx0dmFyIGNvZGU7XG5cdFx0XHRcdFx0aWYgKCBtYXAgKSB7XG5cdFx0XHRcdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblxuXHRcdFx0XHRcdFx0XHQvLyBFeGVjdXRlIHRoZSBhcHByb3ByaWF0ZSBjYWxsYmFja3Ncblx0XHRcdFx0XHRcdFx0anFYSFIuYWx3YXlzKCBtYXBbIGpxWEhSLnN0YXR1cyBdICk7XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXG5cdFx0XHRcdFx0XHRcdC8vIExhenktYWRkIHRoZSBuZXcgY2FsbGJhY2tzIGluIGEgd2F5IHRoYXQgcHJlc2VydmVzIG9sZCBvbmVzXG5cdFx0XHRcdFx0XHRcdGZvciAoIGNvZGUgaW4gbWFwICkge1xuXHRcdFx0XHRcdFx0XHRcdHN0YXR1c0NvZGVbIGNvZGUgXSA9IFsgc3RhdHVzQ29kZVsgY29kZSBdLCBtYXBbIGNvZGUgXSBdO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdHJldHVybiB0aGlzO1xuXHRcdFx0XHR9LFxuXG5cdFx0XHRcdC8vIENhbmNlbCB0aGUgcmVxdWVzdFxuXHRcdFx0XHRhYm9ydDogZnVuY3Rpb24oIHN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0dmFyIGZpbmFsVGV4dCA9IHN0YXR1c1RleHQgfHwgc3RyQWJvcnQ7XG5cdFx0XHRcdFx0aWYgKCB0cmFuc3BvcnQgKSB7XG5cdFx0XHRcdFx0XHR0cmFuc3BvcnQuYWJvcnQoIGZpbmFsVGV4dCApO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkb25lKCAwLCBmaW5hbFRleHQgKTtcblx0XHRcdFx0XHRyZXR1cm4gdGhpcztcblx0XHRcdFx0fVxuXHRcdFx0fTtcblxuXHRcdC8vIEF0dGFjaCBkZWZlcnJlZHNcblx0XHRkZWZlcnJlZC5wcm9taXNlKCBqcVhIUiApO1xuXG5cdFx0Ly8gQWRkIHByb3RvY29sIGlmIG5vdCBwcm92aWRlZCAocHJlZmlsdGVycyBtaWdodCBleHBlY3QgaXQpXG5cdFx0Ly8gSGFuZGxlIGZhbHN5IHVybCBpbiB0aGUgc2V0dGluZ3Mgb2JqZWN0ICgjMTAwOTM6IGNvbnNpc3RlbmN5IHdpdGggb2xkIHNpZ25hdHVyZSlcblx0XHQvLyBXZSBhbHNvIHVzZSB0aGUgdXJsIHBhcmFtZXRlciBpZiBhdmFpbGFibGVcblx0XHRzLnVybCA9ICggKCB1cmwgfHwgcy51cmwgfHwgbG9jYXRpb24uaHJlZiApICsgXCJcIiApXG5cdFx0XHQucmVwbGFjZSggcnByb3RvY29sLCBsb2NhdGlvbi5wcm90b2NvbCArIFwiLy9cIiApO1xuXG5cdFx0Ly8gQWxpYXMgbWV0aG9kIG9wdGlvbiB0byB0eXBlIGFzIHBlciB0aWNrZXQgIzEyMDA0XG5cdFx0cy50eXBlID0gb3B0aW9ucy5tZXRob2QgfHwgb3B0aW9ucy50eXBlIHx8IHMubWV0aG9kIHx8IHMudHlwZTtcblxuXHRcdC8vIEV4dHJhY3QgZGF0YVR5cGVzIGxpc3Rcblx0XHRzLmRhdGFUeXBlcyA9ICggcy5kYXRhVHlwZSB8fCBcIipcIiApLnRvTG93ZXJDYXNlKCkubWF0Y2goIHJub3RodG1sd2hpdGUgKSB8fCBbIFwiXCIgXTtcblxuXHRcdC8vIEEgY3Jvc3MtZG9tYWluIHJlcXVlc3QgaXMgaW4gb3JkZXIgd2hlbiB0aGUgb3JpZ2luIGRvZXNuJ3QgbWF0Y2ggdGhlIGN1cnJlbnQgb3JpZ2luLlxuXHRcdGlmICggcy5jcm9zc0RvbWFpbiA9PSBudWxsICkge1xuXHRcdFx0dXJsQW5jaG9yID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCggXCJhXCIgKTtcblxuXHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEsIEVkZ2UgMTIgLSAxNVxuXHRcdFx0Ly8gSUUgdGhyb3dzIGV4Y2VwdGlvbiBvbiBhY2Nlc3NpbmcgdGhlIGhyZWYgcHJvcGVydHkgaWYgdXJsIGlzIG1hbGZvcm1lZCxcblx0XHRcdC8vIGUuZy4gaHR0cDovL2V4YW1wbGUuY29tOjgweC9cblx0XHRcdHRyeSB7XG5cdFx0XHRcdHVybEFuY2hvci5ocmVmID0gcy51cmw7XG5cblx0XHRcdFx0Ly8gU3VwcG9ydDogSUUgPD04IC0gMTEgb25seVxuXHRcdFx0XHQvLyBBbmNob3IncyBob3N0IHByb3BlcnR5IGlzbid0IGNvcnJlY3RseSBzZXQgd2hlbiBzLnVybCBpcyByZWxhdGl2ZVxuXHRcdFx0XHR1cmxBbmNob3IuaHJlZiA9IHVybEFuY2hvci5ocmVmO1xuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gb3JpZ2luQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgb3JpZ2luQW5jaG9yLmhvc3QgIT09XG5cdFx0XHRcdFx0dXJsQW5jaG9yLnByb3RvY29sICsgXCIvL1wiICsgdXJsQW5jaG9yLmhvc3Q7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBJZiB0aGVyZSBpcyBhbiBlcnJvciBwYXJzaW5nIHRoZSBVUkwsIGFzc3VtZSBpdCBpcyBjcm9zc0RvbWFpbixcblx0XHRcdFx0Ly8gaXQgY2FuIGJlIHJlamVjdGVkIGJ5IHRoZSB0cmFuc3BvcnQgaWYgaXQgaXMgaW52YWxpZFxuXHRcdFx0XHRzLmNyb3NzRG9tYWluID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDb252ZXJ0IGRhdGEgaWYgbm90IGFscmVhZHkgYSBzdHJpbmdcblx0XHRpZiAoIHMuZGF0YSAmJiBzLnByb2Nlc3NEYXRhICYmIHR5cGVvZiBzLmRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0XHRzLmRhdGEgPSBqUXVlcnkucGFyYW0oIHMuZGF0YSwgcy50cmFkaXRpb25hbCApO1xuXHRcdH1cblxuXHRcdC8vIEFwcGx5IHByZWZpbHRlcnNcblx0XHRpbnNwZWN0UHJlZmlsdGVyc09yVHJhbnNwb3J0cyggcHJlZmlsdGVycywgcywgb3B0aW9ucywganFYSFIgKTtcblxuXHRcdC8vIElmIHJlcXVlc3Qgd2FzIGFib3J0ZWQgaW5zaWRlIGEgcHJlZmlsdGVyLCBzdG9wIHRoZXJlXG5cdFx0aWYgKCBjb21wbGV0ZWQgKSB7XG5cdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0fVxuXG5cdFx0Ly8gV2UgY2FuIGZpcmUgZ2xvYmFsIGV2ZW50cyBhcyBvZiBub3cgaWYgYXNrZWQgdG9cblx0XHQvLyBEb24ndCBmaXJlIGV2ZW50cyBpZiBqUXVlcnkuZXZlbnQgaXMgdW5kZWZpbmVkIGluIGFuIEFNRC11c2FnZSBzY2VuYXJpbyAoIzE1MTE4KVxuXHRcdGZpcmVHbG9iYWxzID0galF1ZXJ5LmV2ZW50ICYmIHMuZ2xvYmFsO1xuXG5cdFx0Ly8gV2F0Y2ggZm9yIGEgbmV3IHNldCBvZiByZXF1ZXN0c1xuXHRcdGlmICggZmlyZUdsb2JhbHMgJiYgalF1ZXJ5LmFjdGl2ZSsrID09PSAwICkge1xuXHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0YXJ0XCIgKTtcblx0XHR9XG5cblx0XHQvLyBVcHBlcmNhc2UgdGhlIHR5cGVcblx0XHRzLnR5cGUgPSBzLnR5cGUudG9VcHBlckNhc2UoKTtcblxuXHRcdC8vIERldGVybWluZSBpZiByZXF1ZXN0IGhhcyBjb250ZW50XG5cdFx0cy5oYXNDb250ZW50ID0gIXJub0NvbnRlbnQudGVzdCggcy50eXBlICk7XG5cblx0XHQvLyBTYXZlIHRoZSBVUkwgaW4gY2FzZSB3ZSdyZSB0b3lpbmcgd2l0aCB0aGUgSWYtTW9kaWZpZWQtU2luY2Vcblx0XHQvLyBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIgbGF0ZXIgb25cblx0XHQvLyBSZW1vdmUgaGFzaCB0byBzaW1wbGlmeSB1cmwgbWFuaXB1bGF0aW9uXG5cdFx0Y2FjaGVVUkwgPSBzLnVybC5yZXBsYWNlKCByaGFzaCwgXCJcIiApO1xuXG5cdFx0Ly8gTW9yZSBvcHRpb25zIGhhbmRsaW5nIGZvciByZXF1ZXN0cyB3aXRoIG5vIGNvbnRlbnRcblx0XHRpZiAoICFzLmhhc0NvbnRlbnQgKSB7XG5cblx0XHRcdC8vIFJlbWVtYmVyIHRoZSBoYXNoIHNvIHdlIGNhbiBwdXQgaXQgYmFja1xuXHRcdFx0dW5jYWNoZWQgPSBzLnVybC5zbGljZSggY2FjaGVVUkwubGVuZ3RoICk7XG5cblx0XHRcdC8vIElmIGRhdGEgaXMgYXZhaWxhYmxlIGFuZCBzaG91bGQgYmUgcHJvY2Vzc2VkLCBhcHBlbmQgZGF0YSB0byB1cmxcblx0XHRcdGlmICggcy5kYXRhICYmICggcy5wcm9jZXNzRGF0YSB8fCB0eXBlb2Ygcy5kYXRhID09PSBcInN0cmluZ1wiICkgKSB7XG5cdFx0XHRcdGNhY2hlVVJMICs9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmRhdGE7XG5cblx0XHRcdFx0Ly8gIzk2ODI6IHJlbW92ZSBkYXRhIHNvIHRoYXQgaXQncyBub3QgdXNlZCBpbiBhbiBldmVudHVhbCByZXRyeVxuXHRcdFx0XHRkZWxldGUgcy5kYXRhO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBBZGQgb3IgdXBkYXRlIGFudGktY2FjaGUgcGFyYW0gaWYgbmVlZGVkXG5cdFx0XHRpZiAoIHMuY2FjaGUgPT09IGZhbHNlICkge1xuXHRcdFx0XHRjYWNoZVVSTCA9IGNhY2hlVVJMLnJlcGxhY2UoIHJhbnRpQ2FjaGUsIFwiJDFcIiApO1xuXHRcdFx0XHR1bmNhY2hlZCA9ICggcnF1ZXJ5LnRlc3QoIGNhY2hlVVJMICkgPyBcIiZcIiA6IFwiP1wiICkgKyBcIl89XCIgKyAoIG5vbmNlKysgKSArIHVuY2FjaGVkO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBQdXQgaGFzaCBhbmQgYW50aS1jYWNoZSBvbiB0aGUgVVJMIHRoYXQgd2lsbCBiZSByZXF1ZXN0ZWQgKGdoLTE3MzIpXG5cdFx0XHRzLnVybCA9IGNhY2hlVVJMICsgdW5jYWNoZWQ7XG5cblx0XHQvLyBDaGFuZ2UgJyUyMCcgdG8gJysnIGlmIHRoaXMgaXMgZW5jb2RlZCBmb3JtIGJvZHkgY29udGVudCAoZ2gtMjY1OClcblx0XHR9IGVsc2UgaWYgKCBzLmRhdGEgJiYgcy5wcm9jZXNzRGF0YSAmJlxuXHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKS5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgKSB7XG5cdFx0XHRzLmRhdGEgPSBzLmRhdGEucmVwbGFjZSggcjIwLCBcIitcIiApO1xuXHRcdH1cblxuXHRcdC8vIFNldCB0aGUgSWYtTW9kaWZpZWQtU2luY2UgYW5kL29yIElmLU5vbmUtTWF0Y2ggaGVhZGVyLCBpZiBpbiBpZk1vZGlmaWVkIG1vZGUuXG5cdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRpZiAoIGpRdWVyeS5sYXN0TW9kaWZpZWRbIGNhY2hlVVJMIF0gKSB7XG5cdFx0XHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoIFwiSWYtTW9kaWZpZWQtU2luY2VcIiwgalF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSApO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSApIHtcblx0XHRcdFx0anFYSFIuc2V0UmVxdWVzdEhlYWRlciggXCJJZi1Ob25lLU1hdGNoXCIsIGpRdWVyeS5ldGFnWyBjYWNoZVVSTCBdICk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBjb3JyZWN0IGhlYWRlciwgaWYgZGF0YSBpcyBiZWluZyBzZW50XG5cdFx0aWYgKCBzLmRhdGEgJiYgcy5oYXNDb250ZW50ICYmIHMuY29udGVudFR5cGUgIT09IGZhbHNlIHx8IG9wdGlvbnMuY29udGVudFR5cGUgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBcIkNvbnRlbnQtVHlwZVwiLCBzLmNvbnRlbnRUeXBlICk7XG5cdFx0fVxuXG5cdFx0Ly8gU2V0IHRoZSBBY2NlcHRzIGhlYWRlciBmb3IgdGhlIHNlcnZlciwgZGVwZW5kaW5nIG9uIHRoZSBkYXRhVHlwZVxuXHRcdGpxWEhSLnNldFJlcXVlc3RIZWFkZXIoXG5cdFx0XHRcIkFjY2VwdFwiLFxuXHRcdFx0cy5kYXRhVHlwZXNbIDAgXSAmJiBzLmFjY2VwdHNbIHMuZGF0YVR5cGVzWyAwIF0gXSA/XG5cdFx0XHRcdHMuYWNjZXB0c1sgcy5kYXRhVHlwZXNbIDAgXSBdICtcblx0XHRcdFx0XHQoIHMuZGF0YVR5cGVzWyAwIF0gIT09IFwiKlwiID8gXCIsIFwiICsgYWxsVHlwZXMgKyBcIjsgcT0wLjAxXCIgOiBcIlwiICkgOlxuXHRcdFx0XHRzLmFjY2VwdHNbIFwiKlwiIF1cblx0XHQpO1xuXG5cdFx0Ly8gQ2hlY2sgZm9yIGhlYWRlcnMgb3B0aW9uXG5cdFx0Zm9yICggaSBpbiBzLmhlYWRlcnMgKSB7XG5cdFx0XHRqcVhIUi5zZXRSZXF1ZXN0SGVhZGVyKCBpLCBzLmhlYWRlcnNbIGkgXSApO1xuXHRcdH1cblxuXHRcdC8vIEFsbG93IGN1c3RvbSBoZWFkZXJzL21pbWV0eXBlcyBhbmQgZWFybHkgYWJvcnRcblx0XHRpZiAoIHMuYmVmb3JlU2VuZCAmJlxuXHRcdFx0KCBzLmJlZm9yZVNlbmQuY2FsbCggY2FsbGJhY2tDb250ZXh0LCBqcVhIUiwgcyApID09PSBmYWxzZSB8fCBjb21wbGV0ZWQgKSApIHtcblxuXHRcdFx0Ly8gQWJvcnQgaWYgbm90IGRvbmUgYWxyZWFkeSBhbmQgcmV0dXJuXG5cdFx0XHRyZXR1cm4ganFYSFIuYWJvcnQoKTtcblx0XHR9XG5cblx0XHQvLyBBYm9ydGluZyBpcyBubyBsb25nZXIgYSBjYW5jZWxsYXRpb25cblx0XHRzdHJBYm9ydCA9IFwiYWJvcnRcIjtcblxuXHRcdC8vIEluc3RhbGwgY2FsbGJhY2tzIG9uIGRlZmVycmVkc1xuXHRcdGNvbXBsZXRlRGVmZXJyZWQuYWRkKCBzLmNvbXBsZXRlICk7XG5cdFx0anFYSFIuZG9uZSggcy5zdWNjZXNzICk7XG5cdFx0anFYSFIuZmFpbCggcy5lcnJvciApO1xuXG5cdFx0Ly8gR2V0IHRyYW5zcG9ydFxuXHRcdHRyYW5zcG9ydCA9IGluc3BlY3RQcmVmaWx0ZXJzT3JUcmFuc3BvcnRzKCB0cmFuc3BvcnRzLCBzLCBvcHRpb25zLCBqcVhIUiApO1xuXG5cdFx0Ly8gSWYgbm8gdHJhbnNwb3J0LCB3ZSBhdXRvLWFib3J0XG5cdFx0aWYgKCAhdHJhbnNwb3J0ICkge1xuXHRcdFx0ZG9uZSggLTEsIFwiTm8gVHJhbnNwb3J0XCIgKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IDE7XG5cblx0XHRcdC8vIFNlbmQgZ2xvYmFsIGV2ZW50XG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4U2VuZFwiLCBbIGpxWEhSLCBzIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gSWYgcmVxdWVzdCB3YXMgYWJvcnRlZCBpbnNpZGUgYWpheFNlbmQsIHN0b3AgdGhlcmVcblx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRyZXR1cm4ganFYSFI7XG5cdFx0XHR9XG5cblx0XHRcdC8vIFRpbWVvdXRcblx0XHRcdGlmICggcy5hc3luYyAmJiBzLnRpbWVvdXQgPiAwICkge1xuXHRcdFx0XHR0aW1lb3V0VGltZXIgPSB3aW5kb3cuc2V0VGltZW91dCggZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0anFYSFIuYWJvcnQoIFwidGltZW91dFwiICk7XG5cdFx0XHRcdH0sIHMudGltZW91dCApO1xuXHRcdFx0fVxuXG5cdFx0XHR0cnkge1xuXHRcdFx0XHRjb21wbGV0ZWQgPSBmYWxzZTtcblx0XHRcdFx0dHJhbnNwb3J0LnNlbmQoIHJlcXVlc3RIZWFkZXJzLCBkb25lICk7XG5cdFx0XHR9IGNhdGNoICggZSApIHtcblxuXHRcdFx0XHQvLyBSZXRocm93IHBvc3QtY29tcGxldGlvbiBleGNlcHRpb25zXG5cdFx0XHRcdGlmICggY29tcGxldGVkICkge1xuXHRcdFx0XHRcdHRocm93IGU7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBQcm9wYWdhdGUgb3RoZXJzIGFzIHJlc3VsdHNcblx0XHRcdFx0ZG9uZSggLTEsIGUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBDYWxsYmFjayBmb3Igd2hlbiBldmVyeXRoaW5nIGlzIGRvbmVcblx0XHRmdW5jdGlvbiBkb25lKCBzdGF0dXMsIG5hdGl2ZVN0YXR1c1RleHQsIHJlc3BvbnNlcywgaGVhZGVycyApIHtcblx0XHRcdHZhciBpc1N1Y2Nlc3MsIHN1Y2Nlc3MsIGVycm9yLCByZXNwb25zZSwgbW9kaWZpZWQsXG5cdFx0XHRcdHN0YXR1c1RleHQgPSBuYXRpdmVTdGF0dXNUZXh0O1xuXG5cdFx0XHQvLyBJZ25vcmUgcmVwZWF0IGludm9jYXRpb25zXG5cdFx0XHRpZiAoIGNvbXBsZXRlZCApIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRjb21wbGV0ZWQgPSB0cnVlO1xuXG5cdFx0XHQvLyBDbGVhciB0aW1lb3V0IGlmIGl0IGV4aXN0c1xuXHRcdFx0aWYgKCB0aW1lb3V0VGltZXIgKSB7XG5cdFx0XHRcdHdpbmRvdy5jbGVhclRpbWVvdXQoIHRpbWVvdXRUaW1lciApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBEZXJlZmVyZW5jZSB0cmFuc3BvcnQgZm9yIGVhcmx5IGdhcmJhZ2UgY29sbGVjdGlvblxuXHRcdFx0Ly8gKG5vIG1hdHRlciBob3cgbG9uZyB0aGUganFYSFIgb2JqZWN0IHdpbGwgYmUgdXNlZClcblx0XHRcdHRyYW5zcG9ydCA9IHVuZGVmaW5lZDtcblxuXHRcdFx0Ly8gQ2FjaGUgcmVzcG9uc2UgaGVhZGVyc1xuXHRcdFx0cmVzcG9uc2VIZWFkZXJzU3RyaW5nID0gaGVhZGVycyB8fCBcIlwiO1xuXG5cdFx0XHQvLyBTZXQgcmVhZHlTdGF0ZVxuXHRcdFx0anFYSFIucmVhZHlTdGF0ZSA9IHN0YXR1cyA+IDAgPyA0IDogMDtcblxuXHRcdFx0Ly8gRGV0ZXJtaW5lIGlmIHN1Y2Nlc3NmdWxcblx0XHRcdGlzU3VjY2VzcyA9IHN0YXR1cyA+PSAyMDAgJiYgc3RhdHVzIDwgMzAwIHx8IHN0YXR1cyA9PT0gMzA0O1xuXG5cdFx0XHQvLyBHZXQgcmVzcG9uc2UgZGF0YVxuXHRcdFx0aWYgKCByZXNwb25zZXMgKSB7XG5cdFx0XHRcdHJlc3BvbnNlID0gYWpheEhhbmRsZVJlc3BvbnNlcyggcywganFYSFIsIHJlc3BvbnNlcyApO1xuXHRcdFx0fVxuXG5cdFx0XHQvLyBDb252ZXJ0IG5vIG1hdHRlciB3aGF0ICh0aGF0IHdheSByZXNwb25zZVhYWCBmaWVsZHMgYXJlIGFsd2F5cyBzZXQpXG5cdFx0XHRyZXNwb25zZSA9IGFqYXhDb252ZXJ0KCBzLCByZXNwb25zZSwganFYSFIsIGlzU3VjY2VzcyApO1xuXG5cdFx0XHQvLyBJZiBzdWNjZXNzZnVsLCBoYW5kbGUgdHlwZSBjaGFpbmluZ1xuXHRcdFx0aWYgKCBpc1N1Y2Nlc3MgKSB7XG5cblx0XHRcdFx0Ly8gU2V0IHRoZSBJZi1Nb2RpZmllZC1TaW5jZSBhbmQvb3IgSWYtTm9uZS1NYXRjaCBoZWFkZXIsIGlmIGluIGlmTW9kaWZpZWQgbW9kZS5cblx0XHRcdFx0aWYgKCBzLmlmTW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0bW9kaWZpZWQgPSBqcVhIUi5nZXRSZXNwb25zZUhlYWRlciggXCJMYXN0LU1vZGlmaWVkXCIgKTtcblx0XHRcdFx0XHRpZiAoIG1vZGlmaWVkICkge1xuXHRcdFx0XHRcdFx0alF1ZXJ5Lmxhc3RNb2RpZmllZFsgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRtb2RpZmllZCA9IGpxWEhSLmdldFJlc3BvbnNlSGVhZGVyKCBcImV0YWdcIiApO1xuXHRcdFx0XHRcdGlmICggbW9kaWZpZWQgKSB7XG5cdFx0XHRcdFx0XHRqUXVlcnkuZXRhZ1sgY2FjaGVVUkwgXSA9IG1vZGlmaWVkO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIGlmIG5vIGNvbnRlbnRcblx0XHRcdFx0aWYgKCBzdGF0dXMgPT09IDIwNCB8fCBzLnR5cGUgPT09IFwiSEVBRFwiICkge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSBcIm5vY29udGVudFwiO1xuXG5cdFx0XHRcdC8vIGlmIG5vdCBtb2RpZmllZFxuXHRcdFx0XHR9IGVsc2UgaWYgKCBzdGF0dXMgPT09IDMwNCApIHtcblx0XHRcdFx0XHRzdGF0dXNUZXh0ID0gXCJub3Rtb2RpZmllZFwiO1xuXG5cdFx0XHRcdC8vIElmIHdlIGhhdmUgZGF0YSwgbGV0J3MgY29udmVydCBpdFxuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdHN0YXR1c1RleHQgPSByZXNwb25zZS5zdGF0ZTtcblx0XHRcdFx0XHRzdWNjZXNzID0gcmVzcG9uc2UuZGF0YTtcblx0XHRcdFx0XHRlcnJvciA9IHJlc3BvbnNlLmVycm9yO1xuXHRcdFx0XHRcdGlzU3VjY2VzcyA9ICFlcnJvcjtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblxuXHRcdFx0XHQvLyBFeHRyYWN0IGVycm9yIGZyb20gc3RhdHVzVGV4dCBhbmQgbm9ybWFsaXplIGZvciBub24tYWJvcnRzXG5cdFx0XHRcdGVycm9yID0gc3RhdHVzVGV4dDtcblx0XHRcdFx0aWYgKCBzdGF0dXMgfHwgIXN0YXR1c1RleHQgKSB7XG5cdFx0XHRcdFx0c3RhdHVzVGV4dCA9IFwiZXJyb3JcIjtcblx0XHRcdFx0XHRpZiAoIHN0YXR1cyA8IDAgKSB7XG5cdFx0XHRcdFx0XHRzdGF0dXMgPSAwO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fVxuXG5cdFx0XHQvLyBTZXQgZGF0YSBmb3IgdGhlIGZha2UgeGhyIG9iamVjdFxuXHRcdFx0anFYSFIuc3RhdHVzID0gc3RhdHVzO1xuXHRcdFx0anFYSFIuc3RhdHVzVGV4dCA9ICggbmF0aXZlU3RhdHVzVGV4dCB8fCBzdGF0dXNUZXh0ICkgKyBcIlwiO1xuXG5cdFx0XHQvLyBTdWNjZXNzL0Vycm9yXG5cdFx0XHRpZiAoIGlzU3VjY2VzcyApIHtcblx0XHRcdFx0ZGVmZXJyZWQucmVzb2x2ZVdpdGgoIGNhbGxiYWNrQ29udGV4dCwgWyBzdWNjZXNzLCBzdGF0dXNUZXh0LCBqcVhIUiBdICk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRkZWZlcnJlZC5yZWplY3RXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQsIGVycm9yIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gU3RhdHVzLWRlcGVuZGVudCBjYWxsYmFja3Ncblx0XHRcdGpxWEhSLnN0YXR1c0NvZGUoIHN0YXR1c0NvZGUgKTtcblx0XHRcdHN0YXR1c0NvZGUgPSB1bmRlZmluZWQ7XG5cblx0XHRcdGlmICggZmlyZUdsb2JhbHMgKSB7XG5cdFx0XHRcdGdsb2JhbEV2ZW50Q29udGV4dC50cmlnZ2VyKCBpc1N1Y2Nlc3MgPyBcImFqYXhTdWNjZXNzXCIgOiBcImFqYXhFcnJvclwiLFxuXHRcdFx0XHRcdFsganFYSFIsIHMsIGlzU3VjY2VzcyA/IHN1Y2Nlc3MgOiBlcnJvciBdICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENvbXBsZXRlXG5cdFx0XHRjb21wbGV0ZURlZmVycmVkLmZpcmVXaXRoKCBjYWxsYmFja0NvbnRleHQsIFsganFYSFIsIHN0YXR1c1RleHQgXSApO1xuXG5cdFx0XHRpZiAoIGZpcmVHbG9iYWxzICkge1xuXHRcdFx0XHRnbG9iYWxFdmVudENvbnRleHQudHJpZ2dlciggXCJhamF4Q29tcGxldGVcIiwgWyBqcVhIUiwgcyBdICk7XG5cblx0XHRcdFx0Ly8gSGFuZGxlIHRoZSBnbG9iYWwgQUpBWCBjb3VudGVyXG5cdFx0XHRcdGlmICggISggLS1qUXVlcnkuYWN0aXZlICkgKSB7XG5cdFx0XHRcdFx0alF1ZXJ5LmV2ZW50LnRyaWdnZXIoIFwiYWpheFN0b3BcIiApO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGpxWEhSO1xuXHR9LFxuXG5cdGdldEpTT046IGZ1bmN0aW9uKCB1cmwsIGRhdGEsIGNhbGxiYWNrICkge1xuXHRcdHJldHVybiBqUXVlcnkuZ2V0KCB1cmwsIGRhdGEsIGNhbGxiYWNrLCBcImpzb25cIiApO1xuXHR9LFxuXG5cdGdldFNjcmlwdDogZnVuY3Rpb24oIHVybCwgY2FsbGJhY2sgKSB7XG5cdFx0cmV0dXJuIGpRdWVyeS5nZXQoIHVybCwgdW5kZWZpbmVkLCBjYWxsYmFjaywgXCJzY3JpcHRcIiApO1xuXHR9XG59ICk7XG5cbmpRdWVyeS5lYWNoKCBbIFwiZ2V0XCIsIFwicG9zdFwiIF0sIGZ1bmN0aW9uKCBpLCBtZXRob2QgKSB7XG5cdGpRdWVyeVsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdXJsLCBkYXRhLCBjYWxsYmFjaywgdHlwZSApIHtcblxuXHRcdC8vIFNoaWZ0IGFyZ3VtZW50cyBpZiBkYXRhIGFyZ3VtZW50IHdhcyBvbWl0dGVkXG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBkYXRhICkgKSB7XG5cdFx0XHR0eXBlID0gdHlwZSB8fCBjYWxsYmFjaztcblx0XHRcdGNhbGxiYWNrID0gZGF0YTtcblx0XHRcdGRhdGEgPSB1bmRlZmluZWQ7XG5cdFx0fVxuXG5cdFx0Ly8gVGhlIHVybCBjYW4gYmUgYW4gb3B0aW9ucyBvYmplY3QgKHdoaWNoIHRoZW4gbXVzdCBoYXZlIC51cmwpXG5cdFx0cmV0dXJuIGpRdWVyeS5hamF4KCBqUXVlcnkuZXh0ZW5kKCB7XG5cdFx0XHR1cmw6IHVybCxcblx0XHRcdHR5cGU6IG1ldGhvZCxcblx0XHRcdGRhdGFUeXBlOiB0eXBlLFxuXHRcdFx0ZGF0YTogZGF0YSxcblx0XHRcdHN1Y2Nlc3M6IGNhbGxiYWNrXG5cdFx0fSwgalF1ZXJ5LmlzUGxhaW5PYmplY3QoIHVybCApICYmIHVybCApICk7XG5cdH07XG59ICk7XG5cblxualF1ZXJ5Ll9ldmFsVXJsID0gZnVuY3Rpb24oIHVybCwgb3B0aW9ucyApIHtcblx0cmV0dXJuIGpRdWVyeS5hamF4KCB7XG5cdFx0dXJsOiB1cmwsXG5cblx0XHQvLyBNYWtlIHRoaXMgZXhwbGljaXQsIHNpbmNlIHVzZXIgY2FuIG92ZXJyaWRlIHRoaXMgdGhyb3VnaCBhamF4U2V0dXAgKCMxMTI2NClcblx0XHR0eXBlOiBcIkdFVFwiLFxuXHRcdGRhdGFUeXBlOiBcInNjcmlwdFwiLFxuXHRcdGNhY2hlOiB0cnVlLFxuXHRcdGFzeW5jOiBmYWxzZSxcblx0XHRnbG9iYWw6IGZhbHNlLFxuXG5cdFx0Ly8gT25seSBldmFsdWF0ZSB0aGUgcmVzcG9uc2UgaWYgaXQgaXMgc3VjY2Vzc2Z1bCAoZ2gtNDEyNilcblx0XHQvLyBkYXRhRmlsdGVyIGlzIG5vdCBpbnZva2VkIGZvciBmYWlsdXJlIHJlc3BvbnNlcywgc28gdXNpbmcgaXQgaW5zdGVhZFxuXHRcdC8vIG9mIHRoZSBkZWZhdWx0IGNvbnZlcnRlciBpcyBrbHVkZ3kgYnV0IGl0IHdvcmtzLlxuXHRcdGNvbnZlcnRlcnM6IHtcblx0XHRcdFwidGV4dCBzY3JpcHRcIjogZnVuY3Rpb24oKSB7fVxuXHRcdH0sXG5cdFx0ZGF0YUZpbHRlcjogZnVuY3Rpb24oIHJlc3BvbnNlICkge1xuXHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIHJlc3BvbnNlLCBvcHRpb25zICk7XG5cdFx0fVxuXHR9ICk7XG59O1xuXG5cbmpRdWVyeS5mbi5leHRlbmQoIHtcblx0d3JhcEFsbDogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0dmFyIHdyYXA7XG5cblx0XHRpZiAoIHRoaXNbIDAgXSApIHtcblx0XHRcdGlmICggaXNGdW5jdGlvbiggaHRtbCApICkge1xuXHRcdFx0XHRodG1sID0gaHRtbC5jYWxsKCB0aGlzWyAwIF0gKTtcblx0XHRcdH1cblxuXHRcdFx0Ly8gVGhlIGVsZW1lbnRzIHRvIHdyYXAgdGhlIHRhcmdldCBhcm91bmRcblx0XHRcdHdyYXAgPSBqUXVlcnkoIGh0bWwsIHRoaXNbIDAgXS5vd25lckRvY3VtZW50ICkuZXEoIDAgKS5jbG9uZSggdHJ1ZSApO1xuXG5cdFx0XHRpZiAoIHRoaXNbIDAgXS5wYXJlbnROb2RlICkge1xuXHRcdFx0XHR3cmFwLmluc2VydEJlZm9yZSggdGhpc1sgMCBdICk7XG5cdFx0XHR9XG5cblx0XHRcdHdyYXAubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdFx0dmFyIGVsZW0gPSB0aGlzO1xuXG5cdFx0XHRcdHdoaWxlICggZWxlbS5maXJzdEVsZW1lbnRDaGlsZCApIHtcblx0XHRcdFx0XHRlbGVtID0gZWxlbS5maXJzdEVsZW1lbnRDaGlsZDtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiBlbGVtO1xuXHRcdFx0fSApLmFwcGVuZCggdGhpcyApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzO1xuXHR9LFxuXG5cdHdyYXBJbm5lcjogZnVuY3Rpb24oIGh0bWwgKSB7XG5cdFx0aWYgKCBpc0Z1bmN0aW9uKCBodG1sICkgKSB7XG5cdFx0XHRyZXR1cm4gdGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcElubmVyKCBodG1sLmNhbGwoIHRoaXMsIGkgKSApO1xuXHRcdFx0fSApO1xuXHRcdH1cblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0dmFyIHNlbGYgPSBqUXVlcnkoIHRoaXMgKSxcblx0XHRcdFx0Y29udGVudHMgPSBzZWxmLmNvbnRlbnRzKCk7XG5cblx0XHRcdGlmICggY29udGVudHMubGVuZ3RoICkge1xuXHRcdFx0XHRjb250ZW50cy53cmFwQWxsKCBodG1sICk7XG5cblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHNlbGYuYXBwZW5kKCBodG1sICk7XG5cdFx0XHR9XG5cdFx0fSApO1xuXHR9LFxuXG5cdHdyYXA6IGZ1bmN0aW9uKCBodG1sICkge1xuXHRcdHZhciBodG1sSXNGdW5jdGlvbiA9IGlzRnVuY3Rpb24oIGh0bWwgKTtcblxuXHRcdHJldHVybiB0aGlzLmVhY2goIGZ1bmN0aW9uKCBpICkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkud3JhcEFsbCggaHRtbElzRnVuY3Rpb24gPyBodG1sLmNhbGwoIHRoaXMsIGkgKSA6IGh0bWwgKTtcblx0XHR9ICk7XG5cdH0sXG5cblx0dW53cmFwOiBmdW5jdGlvbiggc2VsZWN0b3IgKSB7XG5cdFx0dGhpcy5wYXJlbnQoIHNlbGVjdG9yICkubm90KCBcImJvZHlcIiApLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0alF1ZXJ5KCB0aGlzICkucmVwbGFjZVdpdGgoIHRoaXMuY2hpbGROb2RlcyApO1xuXHRcdH0gKTtcblx0XHRyZXR1cm4gdGhpcztcblx0fVxufSApO1xuXG5cbmpRdWVyeS5leHByLnBzZXVkb3MuaGlkZGVuID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiAhalF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlKCBlbGVtICk7XG59O1xualF1ZXJ5LmV4cHIucHNldWRvcy52aXNpYmxlID0gZnVuY3Rpb24oIGVsZW0gKSB7XG5cdHJldHVybiAhISggZWxlbS5vZmZzZXRXaWR0aCB8fCBlbGVtLm9mZnNldEhlaWdodCB8fCBlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICk7XG59O1xuXG5cblxuXG5qUXVlcnkuYWpheFNldHRpbmdzLnhociA9IGZ1bmN0aW9uKCkge1xuXHR0cnkge1xuXHRcdHJldHVybiBuZXcgd2luZG93LlhNTEh0dHBSZXF1ZXN0KCk7XG5cdH0gY2F0Y2ggKCBlICkge31cbn07XG5cbnZhciB4aHJTdWNjZXNzU3RhdHVzID0ge1xuXG5cdFx0Ly8gRmlsZSBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyBjb2RlIDAsIGFzc3VtZSAyMDBcblx0XHQwOiAyMDAsXG5cblx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdC8vICMxNDUwOiBzb21ldGltZXMgSUUgcmV0dXJucyAxMjIzIHdoZW4gaXQgc2hvdWxkIGJlIDIwNFxuXHRcdDEyMjM6IDIwNFxuXHR9LFxuXHR4aHJTdXBwb3J0ZWQgPSBqUXVlcnkuYWpheFNldHRpbmdzLnhocigpO1xuXG5zdXBwb3J0LmNvcnMgPSAhIXhoclN1cHBvcnRlZCAmJiAoIFwid2l0aENyZWRlbnRpYWxzXCIgaW4geGhyU3VwcG9ydGVkICk7XG5zdXBwb3J0LmFqYXggPSB4aHJTdXBwb3J0ZWQgPSAhIXhoclN1cHBvcnRlZDtcblxualF1ZXJ5LmFqYXhUcmFuc3BvcnQoIGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXHR2YXIgY2FsbGJhY2ssIGVycm9yQ2FsbGJhY2s7XG5cblx0Ly8gQ3Jvc3MgZG9tYWluIG9ubHkgYWxsb3dlZCBpZiBzdXBwb3J0ZWQgdGhyb3VnaCBYTUxIdHRwUmVxdWVzdFxuXHRpZiAoIHN1cHBvcnQuY29ycyB8fCB4aHJTdXBwb3J0ZWQgJiYgIW9wdGlvbnMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cmV0dXJuIHtcblx0XHRcdHNlbmQ6IGZ1bmN0aW9uKCBoZWFkZXJzLCBjb21wbGV0ZSApIHtcblx0XHRcdFx0dmFyIGksXG5cdFx0XHRcdFx0eGhyID0gb3B0aW9ucy54aHIoKTtcblxuXHRcdFx0XHR4aHIub3Blbihcblx0XHRcdFx0XHRvcHRpb25zLnR5cGUsXG5cdFx0XHRcdFx0b3B0aW9ucy51cmwsXG5cdFx0XHRcdFx0b3B0aW9ucy5hc3luYyxcblx0XHRcdFx0XHRvcHRpb25zLnVzZXJuYW1lLFxuXHRcdFx0XHRcdG9wdGlvbnMucGFzc3dvcmRcblx0XHRcdFx0KTtcblxuXHRcdFx0XHQvLyBBcHBseSBjdXN0b20gZmllbGRzIGlmIHByb3ZpZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy54aHJGaWVsZHMgKSB7XG5cdFx0XHRcdFx0Zm9yICggaSBpbiBvcHRpb25zLnhockZpZWxkcyApIHtcblx0XHRcdFx0XHRcdHhoclsgaSBdID0gb3B0aW9ucy54aHJGaWVsZHNbIGkgXTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBPdmVycmlkZSBtaW1lIHR5cGUgaWYgbmVlZGVkXG5cdFx0XHRcdGlmICggb3B0aW9ucy5taW1lVHlwZSAmJiB4aHIub3ZlcnJpZGVNaW1lVHlwZSApIHtcblx0XHRcdFx0XHR4aHIub3ZlcnJpZGVNaW1lVHlwZSggb3B0aW9ucy5taW1lVHlwZSApO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gWC1SZXF1ZXN0ZWQtV2l0aCBoZWFkZXJcblx0XHRcdFx0Ly8gRm9yIGNyb3NzLWRvbWFpbiByZXF1ZXN0cywgc2VlaW5nIGFzIGNvbmRpdGlvbnMgZm9yIGEgcHJlZmxpZ2h0IGFyZVxuXHRcdFx0XHQvLyBha2luIHRvIGEgamlnc2F3IHB1enpsZSwgd2Ugc2ltcGx5IG5ldmVyIHNldCBpdCB0byBiZSBzdXJlLlxuXHRcdFx0XHQvLyAoaXQgY2FuIGFsd2F5cyBiZSBzZXQgb24gYSBwZXItcmVxdWVzdCBiYXNpcyBvciBldmVuIHVzaW5nIGFqYXhTZXR1cClcblx0XHRcdFx0Ly8gRm9yIHNhbWUtZG9tYWluIHJlcXVlc3RzLCB3b24ndCBjaGFuZ2UgaGVhZGVyIGlmIGFscmVhZHkgcHJvdmlkZWQuXG5cdFx0XHRcdGlmICggIW9wdGlvbnMuY3Jvc3NEb21haW4gJiYgIWhlYWRlcnNbIFwiWC1SZXF1ZXN0ZWQtV2l0aFwiIF0gKSB7XG5cdFx0XHRcdFx0aGVhZGVyc1sgXCJYLVJlcXVlc3RlZC1XaXRoXCIgXSA9IFwiWE1MSHR0cFJlcXVlc3RcIjtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIFNldCBoZWFkZXJzXG5cdFx0XHRcdGZvciAoIGkgaW4gaGVhZGVycyApIHtcblx0XHRcdFx0XHR4aHIuc2V0UmVxdWVzdEhlYWRlciggaSwgaGVhZGVyc1sgaSBdICk7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBDYWxsYmFja1xuXHRcdFx0XHRjYWxsYmFjayA9IGZ1bmN0aW9uKCB0eXBlICkge1xuXHRcdFx0XHRcdHJldHVybiBmdW5jdGlvbigpIHtcblx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdGNhbGxiYWNrID0gZXJyb3JDYWxsYmFjayA9IHhoci5vbmxvYWQgPVxuXHRcdFx0XHRcdFx0XHRcdHhoci5vbmVycm9yID0geGhyLm9uYWJvcnQgPSB4aHIub250aW1lb3V0ID1cblx0XHRcdFx0XHRcdFx0XHRcdHhoci5vbnJlYWR5c3RhdGVjaGFuZ2UgPSBudWxsO1xuXG5cdFx0XHRcdFx0XHRcdGlmICggdHlwZSA9PT0gXCJhYm9ydFwiICkge1xuXHRcdFx0XHRcdFx0XHRcdHhoci5hYm9ydCgpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKCB0eXBlID09PSBcImVycm9yXCIgKSB7XG5cblx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdC8vIE9uIGEgbWFudWFsIG5hdGl2ZSBhYm9ydCwgSUU5IHRocm93c1xuXHRcdFx0XHRcdFx0XHRcdC8vIGVycm9ycyBvbiBhbnkgcHJvcGVydHkgYWNjZXNzIHRoYXQgaXMgbm90IHJlYWR5U3RhdGVcblx0XHRcdFx0XHRcdFx0XHRpZiAoIHR5cGVvZiB4aHIuc3RhdHVzICE9PSBcIm51bWJlclwiICkge1xuXHRcdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIDAsIFwiZXJyb3JcIiApO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb21wbGV0ZShcblxuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBGaWxlOiBwcm90b2NvbCBhbHdheXMgeWllbGRzIHN0YXR1cyAwOyBzZWUgIzg2MDUsICMxNDIwN1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzLFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR4aHIuc3RhdHVzVGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0KTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0Y29tcGxldGUoXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHJTdWNjZXNzU3RhdHVzWyB4aHIuc3RhdHVzIF0gfHwgeGhyLnN0YXR1cyxcblx0XHRcdFx0XHRcdFx0XHRcdHhoci5zdGF0dXNUZXh0LFxuXG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBTdXBwb3J0OiBJRSA8PTkgb25seVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gSUU5IGhhcyBubyBYSFIyIGJ1dCB0aHJvd3Mgb24gYmluYXJ5ICh0cmFjLTExNDI2KVxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gRm9yIFhIUjIgbm9uLXRleHQsIGxldCB0aGUgY2FsbGVyIGhhbmRsZSBpdCAoZ2gtMjQ5OClcblx0XHRcdFx0XHRcdFx0XHRcdCggeGhyLnJlc3BvbnNlVHlwZSB8fCBcInRleHRcIiApICE9PSBcInRleHRcIiAgfHxcblx0XHRcdFx0XHRcdFx0XHRcdHR5cGVvZiB4aHIucmVzcG9uc2VUZXh0ICE9PSBcInN0cmluZ1wiID9cblx0XHRcdFx0XHRcdFx0XHRcdFx0eyBiaW5hcnk6IHhoci5yZXNwb25zZSB9IDpcblx0XHRcdFx0XHRcdFx0XHRcdFx0eyB0ZXh0OiB4aHIucmVzcG9uc2VUZXh0IH0sXG5cdFx0XHRcdFx0XHRcdFx0XHR4aHIuZ2V0QWxsUmVzcG9uc2VIZWFkZXJzKClcblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fTtcblxuXHRcdFx0XHQvLyBMaXN0ZW4gdG8gZXZlbnRzXG5cdFx0XHRcdHhoci5vbmxvYWQgPSBjYWxsYmFjaygpO1xuXHRcdFx0XHRlcnJvckNhbGxiYWNrID0geGhyLm9uZXJyb3IgPSB4aHIub250aW1lb3V0ID0gY2FsbGJhY2soIFwiZXJyb3JcIiApO1xuXG5cdFx0XHRcdC8vIFN1cHBvcnQ6IElFIDkgb25seVxuXHRcdFx0XHQvLyBVc2Ugb25yZWFkeXN0YXRlY2hhbmdlIHRvIHJlcGxhY2Ugb25hYm9ydFxuXHRcdFx0XHQvLyB0byBoYW5kbGUgdW5jYXVnaHQgYWJvcnRzXG5cdFx0XHRcdGlmICggeGhyLm9uYWJvcnQgIT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0XHR4aHIub25hYm9ydCA9IGVycm9yQ2FsbGJhY2s7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0eGhyLm9ucmVhZHlzdGF0ZWNoYW5nZSA9IGZ1bmN0aW9uKCkge1xuXG5cdFx0XHRcdFx0XHQvLyBDaGVjayByZWFkeVN0YXRlIGJlZm9yZSB0aW1lb3V0IGFzIGl0IGNoYW5nZXNcblx0XHRcdFx0XHRcdGlmICggeGhyLnJlYWR5U3RhdGUgPT09IDQgKSB7XG5cblx0XHRcdFx0XHRcdFx0Ly8gQWxsb3cgb25lcnJvciB0byBiZSBjYWxsZWQgZmlyc3QsXG5cdFx0XHRcdFx0XHRcdC8vIGJ1dCB0aGF0IHdpbGwgbm90IGhhbmRsZSBhIG5hdGl2ZSBhYm9ydFxuXHRcdFx0XHRcdFx0XHQvLyBBbHNvLCBzYXZlIGVycm9yQ2FsbGJhY2sgdG8gYSB2YXJpYWJsZVxuXHRcdFx0XHRcdFx0XHQvLyBhcyB4aHIub25lcnJvciBjYW5ub3QgYmUgYWNjZXNzZWRcblx0XHRcdFx0XHRcdFx0d2luZG93LnNldFRpbWVvdXQoIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICggY2FsbGJhY2sgKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRlcnJvckNhbGxiYWNrKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9ICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdC8vIENyZWF0ZSB0aGUgYWJvcnQgY2FsbGJhY2tcblx0XHRcdFx0Y2FsbGJhY2sgPSBjYWxsYmFjayggXCJhYm9ydFwiICk7XG5cblx0XHRcdFx0dHJ5IHtcblxuXHRcdFx0XHRcdC8vIERvIHNlbmQgdGhlIHJlcXVlc3QgKHRoaXMgbWF5IHJhaXNlIGFuIGV4Y2VwdGlvbilcblx0XHRcdFx0XHR4aHIuc2VuZCggb3B0aW9ucy5oYXNDb250ZW50ICYmIG9wdGlvbnMuZGF0YSB8fCBudWxsICk7XG5cdFx0XHRcdH0gY2F0Y2ggKCBlICkge1xuXG5cdFx0XHRcdFx0Ly8gIzE0NjgzOiBPbmx5IHJldGhyb3cgaWYgdGhpcyBoYXNuJ3QgYmVlbiBub3RpZmllZCBhcyBhbiBlcnJvciB5ZXRcblx0XHRcdFx0XHRpZiAoIGNhbGxiYWNrICkge1xuXHRcdFx0XHRcdFx0dGhyb3cgZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0sXG5cblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG4vLyBQcmV2ZW50IGF1dG8tZXhlY3V0aW9uIG9mIHNjcmlwdHMgd2hlbiBubyBleHBsaWNpdCBkYXRhVHlwZSB3YXMgcHJvdmlkZWQgKFNlZSBnaC0yNDMyKVxualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIGZ1bmN0aW9uKCBzICkge1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy5jb250ZW50cy5zY3JpcHQgPSBmYWxzZTtcblx0fVxufSApO1xuXG4vLyBJbnN0YWxsIHNjcmlwdCBkYXRhVHlwZVxualF1ZXJ5LmFqYXhTZXR1cCgge1xuXHRhY2NlcHRzOiB7XG5cdFx0c2NyaXB0OiBcInRleHQvamF2YXNjcmlwdCwgYXBwbGljYXRpb24vamF2YXNjcmlwdCwgXCIgK1xuXHRcdFx0XCJhcHBsaWNhdGlvbi9lY21hc2NyaXB0LCBhcHBsaWNhdGlvbi94LWVjbWFzY3JpcHRcIlxuXHR9LFxuXHRjb250ZW50czoge1xuXHRcdHNjcmlwdDogL1xcYig/OmphdmF8ZWNtYSlzY3JpcHRcXGIvXG5cdH0sXG5cdGNvbnZlcnRlcnM6IHtcblx0XHRcInRleHQgc2NyaXB0XCI6IGZ1bmN0aW9uKCB0ZXh0ICkge1xuXHRcdFx0alF1ZXJ5Lmdsb2JhbEV2YWwoIHRleHQgKTtcblx0XHRcdHJldHVybiB0ZXh0O1xuXHRcdH1cblx0fVxufSApO1xuXG4vLyBIYW5kbGUgY2FjaGUncyBzcGVjaWFsIGNhc2UgYW5kIGNyb3NzRG9tYWluXG5qUXVlcnkuYWpheFByZWZpbHRlciggXCJzY3JpcHRcIiwgZnVuY3Rpb24oIHMgKSB7XG5cdGlmICggcy5jYWNoZSA9PT0gdW5kZWZpbmVkICkge1xuXHRcdHMuY2FjaGUgPSBmYWxzZTtcblx0fVxuXHRpZiAoIHMuY3Jvc3NEb21haW4gKSB7XG5cdFx0cy50eXBlID0gXCJHRVRcIjtcblx0fVxufSApO1xuXG4vLyBCaW5kIHNjcmlwdCB0YWcgaGFjayB0cmFuc3BvcnRcbmpRdWVyeS5hamF4VHJhbnNwb3J0KCBcInNjcmlwdFwiLCBmdW5jdGlvbiggcyApIHtcblxuXHQvLyBUaGlzIHRyYW5zcG9ydCBvbmx5IGRlYWxzIHdpdGggY3Jvc3MgZG9tYWluIG9yIGZvcmNlZC1ieS1hdHRycyByZXF1ZXN0c1xuXHRpZiAoIHMuY3Jvc3NEb21haW4gfHwgcy5zY3JpcHRBdHRycyApIHtcblx0XHR2YXIgc2NyaXB0LCBjYWxsYmFjaztcblx0XHRyZXR1cm4ge1xuXHRcdFx0c2VuZDogZnVuY3Rpb24oIF8sIGNvbXBsZXRlICkge1xuXHRcdFx0XHRzY3JpcHQgPSBqUXVlcnkoIFwiPHNjcmlwdD5cIiApXG5cdFx0XHRcdFx0LmF0dHIoIHMuc2NyaXB0QXR0cnMgfHwge30gKVxuXHRcdFx0XHRcdC5wcm9wKCB7IGNoYXJzZXQ6IHMuc2NyaXB0Q2hhcnNldCwgc3JjOiBzLnVybCB9IClcblx0XHRcdFx0XHQub24oIFwibG9hZCBlcnJvclwiLCBjYWxsYmFjayA9IGZ1bmN0aW9uKCBldnQgKSB7XG5cdFx0XHRcdFx0XHRzY3JpcHQucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRjYWxsYmFjayA9IG51bGw7XG5cdFx0XHRcdFx0XHRpZiAoIGV2dCApIHtcblx0XHRcdFx0XHRcdFx0Y29tcGxldGUoIGV2dC50eXBlID09PSBcImVycm9yXCIgPyA0MDQgOiAyMDAsIGV2dC50eXBlICk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fSApO1xuXG5cdFx0XHRcdC8vIFVzZSBuYXRpdmUgRE9NIG1hbmlwdWxhdGlvbiB0byBhdm9pZCBvdXIgZG9tTWFuaXAgQUpBWCB0cmlja2VyeVxuXHRcdFx0XHRkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKCBzY3JpcHRbIDAgXSApO1xuXHRcdFx0fSxcblx0XHRcdGFib3J0OiBmdW5jdGlvbigpIHtcblx0XHRcdFx0aWYgKCBjYWxsYmFjayApIHtcblx0XHRcdFx0XHRjYWxsYmFjaygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fTtcblx0fVxufSApO1xuXG5cblxuXG52YXIgb2xkQ2FsbGJhY2tzID0gW10sXG5cdHJqc29ucCA9IC8oPSlcXD8oPz0mfCQpfFxcP1xcPy87XG5cbi8vIERlZmF1bHQganNvbnAgc2V0dGluZ3NcbmpRdWVyeS5hamF4U2V0dXAoIHtcblx0anNvbnA6IFwiY2FsbGJhY2tcIixcblx0anNvbnBDYWxsYmFjazogZnVuY3Rpb24oKSB7XG5cdFx0dmFyIGNhbGxiYWNrID0gb2xkQ2FsbGJhY2tzLnBvcCgpIHx8ICggalF1ZXJ5LmV4cGFuZG8gKyBcIl9cIiArICggbm9uY2UrKyApICk7XG5cdFx0dGhpc1sgY2FsbGJhY2sgXSA9IHRydWU7XG5cdFx0cmV0dXJuIGNhbGxiYWNrO1xuXHR9XG59ICk7XG5cbi8vIERldGVjdCwgbm9ybWFsaXplIG9wdGlvbnMgYW5kIGluc3RhbGwgY2FsbGJhY2tzIGZvciBqc29ucCByZXF1ZXN0c1xualF1ZXJ5LmFqYXhQcmVmaWx0ZXIoIFwianNvbiBqc29ucFwiLCBmdW5jdGlvbiggcywgb3JpZ2luYWxTZXR0aW5ncywganFYSFIgKSB7XG5cblx0dmFyIGNhbGxiYWNrTmFtZSwgb3ZlcndyaXR0ZW4sIHJlc3BvbnNlQ29udGFpbmVyLFxuXHRcdGpzb25Qcm9wID0gcy5qc29ucCAhPT0gZmFsc2UgJiYgKCByanNvbnAudGVzdCggcy51cmwgKSA/XG5cdFx0XHRcInVybFwiIDpcblx0XHRcdHR5cGVvZiBzLmRhdGEgPT09IFwic3RyaW5nXCIgJiZcblx0XHRcdFx0KCBzLmNvbnRlbnRUeXBlIHx8IFwiXCIgKVxuXHRcdFx0XHRcdC5pbmRleE9mKCBcImFwcGxpY2F0aW9uL3gtd3d3LWZvcm0tdXJsZW5jb2RlZFwiICkgPT09IDAgJiZcblx0XHRcdFx0cmpzb25wLnRlc3QoIHMuZGF0YSApICYmIFwiZGF0YVwiXG5cdFx0KTtcblxuXHQvLyBIYW5kbGUgaWZmIHRoZSBleHBlY3RlZCBkYXRhIHR5cGUgaXMgXCJqc29ucFwiIG9yIHdlIGhhdmUgYSBwYXJhbWV0ZXIgdG8gc2V0XG5cdGlmICgganNvblByb3AgfHwgcy5kYXRhVHlwZXNbIDAgXSA9PT0gXCJqc29ucFwiICkge1xuXG5cdFx0Ly8gR2V0IGNhbGxiYWNrIG5hbWUsIHJlbWVtYmVyaW5nIHByZWV4aXN0aW5nIHZhbHVlIGFzc29jaWF0ZWQgd2l0aCBpdFxuXHRcdGNhbGxiYWNrTmFtZSA9IHMuanNvbnBDYWxsYmFjayA9IGlzRnVuY3Rpb24oIHMuanNvbnBDYWxsYmFjayApID9cblx0XHRcdHMuanNvbnBDYWxsYmFjaygpIDpcblx0XHRcdHMuanNvbnBDYWxsYmFjaztcblxuXHRcdC8vIEluc2VydCBjYWxsYmFjayBpbnRvIHVybCBvciBmb3JtIGRhdGFcblx0XHRpZiAoIGpzb25Qcm9wICkge1xuXHRcdFx0c1sganNvblByb3AgXSA9IHNbIGpzb25Qcm9wIF0ucmVwbGFjZSggcmpzb25wLCBcIiQxXCIgKyBjYWxsYmFja05hbWUgKTtcblx0XHR9IGVsc2UgaWYgKCBzLmpzb25wICE9PSBmYWxzZSApIHtcblx0XHRcdHMudXJsICs9ICggcnF1ZXJ5LnRlc3QoIHMudXJsICkgPyBcIiZcIiA6IFwiP1wiICkgKyBzLmpzb25wICsgXCI9XCIgKyBjYWxsYmFja05hbWU7XG5cdFx0fVxuXG5cdFx0Ly8gVXNlIGRhdGEgY29udmVydGVyIHRvIHJldHJpZXZlIGpzb24gYWZ0ZXIgc2NyaXB0IGV4ZWN1dGlvblxuXHRcdHMuY29udmVydGVyc1sgXCJzY3JpcHQganNvblwiIF0gPSBmdW5jdGlvbigpIHtcblx0XHRcdGlmICggIXJlc3BvbnNlQ29udGFpbmVyICkge1xuXHRcdFx0XHRqUXVlcnkuZXJyb3IoIGNhbGxiYWNrTmFtZSArIFwiIHdhcyBub3QgY2FsbGVkXCIgKTtcblx0XHRcdH1cblx0XHRcdHJldHVybiByZXNwb25zZUNvbnRhaW5lclsgMCBdO1xuXHRcdH07XG5cblx0XHQvLyBGb3JjZSBqc29uIGRhdGFUeXBlXG5cdFx0cy5kYXRhVHlwZXNbIDAgXSA9IFwianNvblwiO1xuXG5cdFx0Ly8gSW5zdGFsbCBjYWxsYmFja1xuXHRcdG92ZXJ3cml0dGVuID0gd2luZG93WyBjYWxsYmFja05hbWUgXTtcblx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gZnVuY3Rpb24oKSB7XG5cdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IGFyZ3VtZW50cztcblx0XHR9O1xuXG5cdFx0Ly8gQ2xlYW4tdXAgZnVuY3Rpb24gKGZpcmVzIGFmdGVyIGNvbnZlcnRlcnMpXG5cdFx0anFYSFIuYWx3YXlzKCBmdW5jdGlvbigpIHtcblxuXHRcdFx0Ly8gSWYgcHJldmlvdXMgdmFsdWUgZGlkbid0IGV4aXN0IC0gcmVtb3ZlIGl0XG5cdFx0XHRpZiAoIG92ZXJ3cml0dGVuID09PSB1bmRlZmluZWQgKSB7XG5cdFx0XHRcdGpRdWVyeSggd2luZG93ICkucmVtb3ZlUHJvcCggY2FsbGJhY2tOYW1lICk7XG5cblx0XHRcdC8vIE90aGVyd2lzZSByZXN0b3JlIHByZWV4aXN0aW5nIHZhbHVlXG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR3aW5kb3dbIGNhbGxiYWNrTmFtZSBdID0gb3ZlcndyaXR0ZW47XG5cdFx0XHR9XG5cblx0XHRcdC8vIFNhdmUgYmFjayBhcyBmcmVlXG5cdFx0XHRpZiAoIHNbIGNhbGxiYWNrTmFtZSBdICkge1xuXG5cdFx0XHRcdC8vIE1ha2Ugc3VyZSB0aGF0IHJlLXVzaW5nIHRoZSBvcHRpb25zIGRvZXNuJ3Qgc2NyZXcgdGhpbmdzIGFyb3VuZFxuXHRcdFx0XHRzLmpzb25wQ2FsbGJhY2sgPSBvcmlnaW5hbFNldHRpbmdzLmpzb25wQ2FsbGJhY2s7XG5cblx0XHRcdFx0Ly8gU2F2ZSB0aGUgY2FsbGJhY2sgbmFtZSBmb3IgZnV0dXJlIHVzZVxuXHRcdFx0XHRvbGRDYWxsYmFja3MucHVzaCggY2FsbGJhY2tOYW1lICk7XG5cdFx0XHR9XG5cblx0XHRcdC8vIENhbGwgaWYgaXQgd2FzIGEgZnVuY3Rpb24gYW5kIHdlIGhhdmUgYSByZXNwb25zZVxuXHRcdFx0aWYgKCByZXNwb25zZUNvbnRhaW5lciAmJiBpc0Z1bmN0aW9uKCBvdmVyd3JpdHRlbiApICkge1xuXHRcdFx0XHRvdmVyd3JpdHRlbiggcmVzcG9uc2VDb250YWluZXJbIDAgXSApO1xuXHRcdFx0fVxuXG5cdFx0XHRyZXNwb25zZUNvbnRhaW5lciA9IG92ZXJ3cml0dGVuID0gdW5kZWZpbmVkO1xuXHRcdH0gKTtcblxuXHRcdC8vIERlbGVnYXRlIHRvIHNjcmlwdFxuXHRcdHJldHVybiBcInNjcmlwdFwiO1xuXHR9XG59ICk7XG5cblxuXG5cbi8vIFN1cHBvcnQ6IFNhZmFyaSA4IG9ubHlcbi8vIEluIFNhZmFyaSA4IGRvY3VtZW50cyBjcmVhdGVkIHZpYSBkb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnRcbi8vIGNvbGxhcHNlIHNpYmxpbmcgZm9ybXM6IHRoZSBzZWNvbmQgb25lIGJlY29tZXMgYSBjaGlsZCBvZiB0aGUgZmlyc3Qgb25lLlxuLy8gQmVjYXVzZSBvZiB0aGF0LCB0aGlzIHNlY3VyaXR5IG1lYXN1cmUgaGFzIHRvIGJlIGRpc2FibGVkIGluIFNhZmFyaSA4LlxuLy8gaHR0cHM6Ly9idWdzLndlYmtpdC5vcmcvc2hvd19idWcuY2dpP2lkPTEzNzMzN1xuc3VwcG9ydC5jcmVhdGVIVE1MRG9jdW1lbnQgPSAoIGZ1bmN0aW9uKCkge1xuXHR2YXIgYm9keSA9IGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudCggXCJcIiApLmJvZHk7XG5cdGJvZHkuaW5uZXJIVE1MID0gXCI8Zm9ybT48L2Zvcm0+PGZvcm0+PC9mb3JtPlwiO1xuXHRyZXR1cm4gYm9keS5jaGlsZE5vZGVzLmxlbmd0aCA9PT0gMjtcbn0gKSgpO1xuXG5cbi8vIEFyZ3VtZW50IFwiZGF0YVwiIHNob3VsZCBiZSBzdHJpbmcgb2YgaHRtbFxuLy8gY29udGV4dCAob3B0aW9uYWwpOiBJZiBzcGVjaWZpZWQsIHRoZSBmcmFnbWVudCB3aWxsIGJlIGNyZWF0ZWQgaW4gdGhpcyBjb250ZXh0LFxuLy8gZGVmYXVsdHMgdG8gZG9jdW1lbnRcbi8vIGtlZXBTY3JpcHRzIChvcHRpb25hbCk6IElmIHRydWUsIHdpbGwgaW5jbHVkZSBzY3JpcHRzIHBhc3NlZCBpbiB0aGUgaHRtbCBzdHJpbmdcbmpRdWVyeS5wYXJzZUhUTUwgPSBmdW5jdGlvbiggZGF0YSwgY29udGV4dCwga2VlcFNjcmlwdHMgKSB7XG5cdGlmICggdHlwZW9mIGRhdGEgIT09IFwic3RyaW5nXCIgKSB7XG5cdFx0cmV0dXJuIFtdO1xuXHR9XG5cdGlmICggdHlwZW9mIGNvbnRleHQgPT09IFwiYm9vbGVhblwiICkge1xuXHRcdGtlZXBTY3JpcHRzID0gY29udGV4dDtcblx0XHRjb250ZXh0ID0gZmFsc2U7XG5cdH1cblxuXHR2YXIgYmFzZSwgcGFyc2VkLCBzY3JpcHRzO1xuXG5cdGlmICggIWNvbnRleHQgKSB7XG5cblx0XHQvLyBTdG9wIHNjcmlwdHMgb3IgaW5saW5lIGV2ZW50IGhhbmRsZXJzIGZyb20gYmVpbmcgZXhlY3V0ZWQgaW1tZWRpYXRlbHlcblx0XHQvLyBieSB1c2luZyBkb2N1bWVudC5pbXBsZW1lbnRhdGlvblxuXHRcdGlmICggc3VwcG9ydC5jcmVhdGVIVE1MRG9jdW1lbnQgKSB7XG5cdFx0XHRjb250ZXh0ID0gZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KCBcIlwiICk7XG5cblx0XHRcdC8vIFNldCB0aGUgYmFzZSBocmVmIGZvciB0aGUgY3JlYXRlZCBkb2N1bWVudFxuXHRcdFx0Ly8gc28gYW55IHBhcnNlZCBlbGVtZW50cyB3aXRoIFVSTHNcblx0XHRcdC8vIGFyZSBiYXNlZCBvbiB0aGUgZG9jdW1lbnQncyBVUkwgKGdoLTI5NjUpXG5cdFx0XHRiYXNlID0gY29udGV4dC5jcmVhdGVFbGVtZW50KCBcImJhc2VcIiApO1xuXHRcdFx0YmFzZS5ocmVmID0gZG9jdW1lbnQubG9jYXRpb24uaHJlZjtcblx0XHRcdGNvbnRleHQuaGVhZC5hcHBlbmRDaGlsZCggYmFzZSApO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRjb250ZXh0ID0gZG9jdW1lbnQ7XG5cdFx0fVxuXHR9XG5cblx0cGFyc2VkID0gcnNpbmdsZVRhZy5leGVjKCBkYXRhICk7XG5cdHNjcmlwdHMgPSAha2VlcFNjcmlwdHMgJiYgW107XG5cblx0Ly8gU2luZ2xlIHRhZ1xuXHRpZiAoIHBhcnNlZCApIHtcblx0XHRyZXR1cm4gWyBjb250ZXh0LmNyZWF0ZUVsZW1lbnQoIHBhcnNlZFsgMSBdICkgXTtcblx0fVxuXG5cdHBhcnNlZCA9IGJ1aWxkRnJhZ21lbnQoIFsgZGF0YSBdLCBjb250ZXh0LCBzY3JpcHRzICk7XG5cblx0aWYgKCBzY3JpcHRzICYmIHNjcmlwdHMubGVuZ3RoICkge1xuXHRcdGpRdWVyeSggc2NyaXB0cyApLnJlbW92ZSgpO1xuXHR9XG5cblx0cmV0dXJuIGpRdWVyeS5tZXJnZSggW10sIHBhcnNlZC5jaGlsZE5vZGVzICk7XG59O1xuXG5cbi8qKlxuICogTG9hZCBhIHVybCBpbnRvIGEgcGFnZVxuICovXG5qUXVlcnkuZm4ubG9hZCA9IGZ1bmN0aW9uKCB1cmwsIHBhcmFtcywgY2FsbGJhY2sgKSB7XG5cdHZhciBzZWxlY3RvciwgdHlwZSwgcmVzcG9uc2UsXG5cdFx0c2VsZiA9IHRoaXMsXG5cdFx0b2ZmID0gdXJsLmluZGV4T2YoIFwiIFwiICk7XG5cblx0aWYgKCBvZmYgPiAtMSApIHtcblx0XHRzZWxlY3RvciA9IHN0cmlwQW5kQ29sbGFwc2UoIHVybC5zbGljZSggb2ZmICkgKTtcblx0XHR1cmwgPSB1cmwuc2xpY2UoIDAsIG9mZiApO1xuXHR9XG5cblx0Ly8gSWYgaXQncyBhIGZ1bmN0aW9uXG5cdGlmICggaXNGdW5jdGlvbiggcGFyYW1zICkgKSB7XG5cblx0XHQvLyBXZSBhc3N1bWUgdGhhdCBpdCdzIHRoZSBjYWxsYmFja1xuXHRcdGNhbGxiYWNrID0gcGFyYW1zO1xuXHRcdHBhcmFtcyA9IHVuZGVmaW5lZDtcblxuXHQvLyBPdGhlcndpc2UsIGJ1aWxkIGEgcGFyYW0gc3RyaW5nXG5cdH0gZWxzZSBpZiAoIHBhcmFtcyAmJiB0eXBlb2YgcGFyYW1zID09PSBcIm9iamVjdFwiICkge1xuXHRcdHR5cGUgPSBcIlBPU1RcIjtcblx0fVxuXG5cdC8vIElmIHdlIGhhdmUgZWxlbWVudHMgdG8gbW9kaWZ5LCBtYWtlIHRoZSByZXF1ZXN0XG5cdGlmICggc2VsZi5sZW5ndGggPiAwICkge1xuXHRcdGpRdWVyeS5hamF4KCB7XG5cdFx0XHR1cmw6IHVybCxcblxuXHRcdFx0Ly8gSWYgXCJ0eXBlXCIgdmFyaWFibGUgaXMgdW5kZWZpbmVkLCB0aGVuIFwiR0VUXCIgbWV0aG9kIHdpbGwgYmUgdXNlZC5cblx0XHRcdC8vIE1ha2UgdmFsdWUgb2YgdGhpcyBmaWVsZCBleHBsaWNpdCBzaW5jZVxuXHRcdFx0Ly8gdXNlciBjYW4gb3ZlcnJpZGUgaXQgdGhyb3VnaCBhamF4U2V0dXAgbWV0aG9kXG5cdFx0XHR0eXBlOiB0eXBlIHx8IFwiR0VUXCIsXG5cdFx0XHRkYXRhVHlwZTogXCJodG1sXCIsXG5cdFx0XHRkYXRhOiBwYXJhbXNcblx0XHR9ICkuZG9uZSggZnVuY3Rpb24oIHJlc3BvbnNlVGV4dCApIHtcblxuXHRcdFx0Ly8gU2F2ZSByZXNwb25zZSBmb3IgdXNlIGluIGNvbXBsZXRlIGNhbGxiYWNrXG5cdFx0XHRyZXNwb25zZSA9IGFyZ3VtZW50cztcblxuXHRcdFx0c2VsZi5odG1sKCBzZWxlY3RvciA/XG5cblx0XHRcdFx0Ly8gSWYgYSBzZWxlY3RvciB3YXMgc3BlY2lmaWVkLCBsb2NhdGUgdGhlIHJpZ2h0IGVsZW1lbnRzIGluIGEgZHVtbXkgZGl2XG5cdFx0XHRcdC8vIEV4Y2x1ZGUgc2NyaXB0cyB0byBhdm9pZCBJRSAnUGVybWlzc2lvbiBEZW5pZWQnIGVycm9yc1xuXHRcdFx0XHRqUXVlcnkoIFwiPGRpdj5cIiApLmFwcGVuZCggalF1ZXJ5LnBhcnNlSFRNTCggcmVzcG9uc2VUZXh0ICkgKS5maW5kKCBzZWxlY3RvciApIDpcblxuXHRcdFx0XHQvLyBPdGhlcndpc2UgdXNlIHRoZSBmdWxsIHJlc3VsdFxuXHRcdFx0XHRyZXNwb25zZVRleHQgKTtcblxuXHRcdC8vIElmIHRoZSByZXF1ZXN0IHN1Y2NlZWRzLCB0aGlzIGZ1bmN0aW9uIGdldHMgXCJkYXRhXCIsIFwic3RhdHVzXCIsIFwianFYSFJcIlxuXHRcdC8vIGJ1dCB0aGV5IGFyZSBpZ25vcmVkIGJlY2F1c2UgcmVzcG9uc2Ugd2FzIHNldCBhYm92ZS5cblx0XHQvLyBJZiBpdCBmYWlscywgdGhpcyBmdW5jdGlvbiBnZXRzIFwianFYSFJcIiwgXCJzdGF0dXNcIiwgXCJlcnJvclwiXG5cdFx0fSApLmFsd2F5cyggY2FsbGJhY2sgJiYgZnVuY3Rpb24oIGpxWEhSLCBzdGF0dXMgKSB7XG5cdFx0XHRzZWxmLmVhY2goIGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRjYWxsYmFjay5hcHBseSggdGhpcywgcmVzcG9uc2UgfHwgWyBqcVhIUi5yZXNwb25zZVRleHQsIHN0YXR1cywganFYSFIgXSApO1xuXHRcdFx0fSApO1xuXHRcdH0gKTtcblx0fVxuXG5cdHJldHVybiB0aGlzO1xufTtcblxuXG5cblxuLy8gQXR0YWNoIGEgYnVuY2ggb2YgZnVuY3Rpb25zIGZvciBoYW5kbGluZyBjb21tb24gQUpBWCBldmVudHNcbmpRdWVyeS5lYWNoKCBbXG5cdFwiYWpheFN0YXJ0XCIsXG5cdFwiYWpheFN0b3BcIixcblx0XCJhamF4Q29tcGxldGVcIixcblx0XCJhamF4RXJyb3JcIixcblx0XCJhamF4U3VjY2Vzc1wiLFxuXHRcImFqYXhTZW5kXCJcbl0sIGZ1bmN0aW9uKCBpLCB0eXBlICkge1xuXHRqUXVlcnkuZm5bIHR5cGUgXSA9IGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gdGhpcy5vbiggdHlwZSwgZm4gKTtcblx0fTtcbn0gKTtcblxuXG5cblxualF1ZXJ5LmV4cHIucHNldWRvcy5hbmltYXRlZCA9IGZ1bmN0aW9uKCBlbGVtICkge1xuXHRyZXR1cm4galF1ZXJ5LmdyZXAoIGpRdWVyeS50aW1lcnMsIGZ1bmN0aW9uKCBmbiApIHtcblx0XHRyZXR1cm4gZWxlbSA9PT0gZm4uZWxlbTtcblx0fSApLmxlbmd0aDtcbn07XG5cblxuXG5cbmpRdWVyeS5vZmZzZXQgPSB7XG5cdHNldE9mZnNldDogZnVuY3Rpb24oIGVsZW0sIG9wdGlvbnMsIGkgKSB7XG5cdFx0dmFyIGN1clBvc2l0aW9uLCBjdXJMZWZ0LCBjdXJDU1NUb3AsIGN1clRvcCwgY3VyT2Zmc2V0LCBjdXJDU1NMZWZ0LCBjYWxjdWxhdGVQb3NpdGlvbixcblx0XHRcdHBvc2l0aW9uID0galF1ZXJ5LmNzcyggZWxlbSwgXCJwb3NpdGlvblwiICksXG5cdFx0XHRjdXJFbGVtID0galF1ZXJ5KCBlbGVtICksXG5cdFx0XHRwcm9wcyA9IHt9O1xuXG5cdFx0Ly8gU2V0IHBvc2l0aW9uIGZpcnN0LCBpbi1jYXNlIHRvcC9sZWZ0IGFyZSBzZXQgZXZlbiBvbiBzdGF0aWMgZWxlbVxuXHRcdGlmICggcG9zaXRpb24gPT09IFwic3RhdGljXCIgKSB7XG5cdFx0XHRlbGVtLnN0eWxlLnBvc2l0aW9uID0gXCJyZWxhdGl2ZVwiO1xuXHRcdH1cblxuXHRcdGN1ck9mZnNldCA9IGN1ckVsZW0ub2Zmc2V0KCk7XG5cdFx0Y3VyQ1NTVG9wID0galF1ZXJ5LmNzcyggZWxlbSwgXCJ0b3BcIiApO1xuXHRcdGN1ckNTU0xlZnQgPSBqUXVlcnkuY3NzKCBlbGVtLCBcImxlZnRcIiApO1xuXHRcdGNhbGN1bGF0ZVBvc2l0aW9uID0gKCBwb3NpdGlvbiA9PT0gXCJhYnNvbHV0ZVwiIHx8IHBvc2l0aW9uID09PSBcImZpeGVkXCIgKSAmJlxuXHRcdFx0KCBjdXJDU1NUb3AgKyBjdXJDU1NMZWZ0ICkuaW5kZXhPZiggXCJhdXRvXCIgKSA+IC0xO1xuXG5cdFx0Ly8gTmVlZCB0byBiZSBhYmxlIHRvIGNhbGN1bGF0ZSBwb3NpdGlvbiBpZiBlaXRoZXJcblx0XHQvLyB0b3Agb3IgbGVmdCBpcyBhdXRvIGFuZCBwb3NpdGlvbiBpcyBlaXRoZXIgYWJzb2x1dGUgb3IgZml4ZWRcblx0XHRpZiAoIGNhbGN1bGF0ZVBvc2l0aW9uICkge1xuXHRcdFx0Y3VyUG9zaXRpb24gPSBjdXJFbGVtLnBvc2l0aW9uKCk7XG5cdFx0XHRjdXJUb3AgPSBjdXJQb3NpdGlvbi50b3A7XG5cdFx0XHRjdXJMZWZ0ID0gY3VyUG9zaXRpb24ubGVmdDtcblxuXHRcdH0gZWxzZSB7XG5cdFx0XHRjdXJUb3AgPSBwYXJzZUZsb2F0KCBjdXJDU1NUb3AgKSB8fCAwO1xuXHRcdFx0Y3VyTGVmdCA9IHBhcnNlRmxvYXQoIGN1ckNTU0xlZnQgKSB8fCAwO1xuXHRcdH1cblxuXHRcdGlmICggaXNGdW5jdGlvbiggb3B0aW9ucyApICkge1xuXG5cdFx0XHQvLyBVc2UgalF1ZXJ5LmV4dGVuZCBoZXJlIHRvIGFsbG93IG1vZGlmaWNhdGlvbiBvZiBjb29yZGluYXRlcyBhcmd1bWVudCAoZ2gtMTg0OClcblx0XHRcdG9wdGlvbnMgPSBvcHRpb25zLmNhbGwoIGVsZW0sIGksIGpRdWVyeS5leHRlbmQoIHt9LCBjdXJPZmZzZXQgKSApO1xuXHRcdH1cblxuXHRcdGlmICggb3B0aW9ucy50b3AgIT0gbnVsbCApIHtcblx0XHRcdHByb3BzLnRvcCA9ICggb3B0aW9ucy50b3AgLSBjdXJPZmZzZXQudG9wICkgKyBjdXJUb3A7XG5cdFx0fVxuXHRcdGlmICggb3B0aW9ucy5sZWZ0ICE9IG51bGwgKSB7XG5cdFx0XHRwcm9wcy5sZWZ0ID0gKCBvcHRpb25zLmxlZnQgLSBjdXJPZmZzZXQubGVmdCApICsgY3VyTGVmdDtcblx0XHR9XG5cblx0XHRpZiAoIFwidXNpbmdcIiBpbiBvcHRpb25zICkge1xuXHRcdFx0b3B0aW9ucy51c2luZy5jYWxsKCBlbGVtLCBwcm9wcyApO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdGN1ckVsZW0uY3NzKCBwcm9wcyApO1xuXHRcdH1cblx0fVxufTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdC8vIG9mZnNldCgpIHJlbGF0ZXMgYW4gZWxlbWVudCdzIGJvcmRlciBib3ggdG8gdGhlIGRvY3VtZW50IG9yaWdpblxuXHRvZmZzZXQ6IGZ1bmN0aW9uKCBvcHRpb25zICkge1xuXG5cdFx0Ly8gUHJlc2VydmUgY2hhaW5pbmcgZm9yIHNldHRlclxuXHRcdGlmICggYXJndW1lbnRzLmxlbmd0aCApIHtcblx0XHRcdHJldHVybiBvcHRpb25zID09PSB1bmRlZmluZWQgP1xuXHRcdFx0XHR0aGlzIDpcblx0XHRcdFx0dGhpcy5lYWNoKCBmdW5jdGlvbiggaSApIHtcblx0XHRcdFx0XHRqUXVlcnkub2Zmc2V0LnNldE9mZnNldCggdGhpcywgb3B0aW9ucywgaSApO1xuXHRcdFx0XHR9ICk7XG5cdFx0fVxuXG5cdFx0dmFyIHJlY3QsIHdpbixcblx0XHRcdGVsZW0gPSB0aGlzWyAwIF07XG5cblx0XHRpZiAoICFlbGVtICkge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdC8vIFJldHVybiB6ZXJvcyBmb3IgZGlzY29ubmVjdGVkIGFuZCBoaWRkZW4gKGRpc3BsYXk6IG5vbmUpIGVsZW1lbnRzIChnaC0yMzEwKVxuXHRcdC8vIFN1cHBvcnQ6IElFIDw9MTEgb25seVxuXHRcdC8vIFJ1bm5pbmcgZ2V0Qm91bmRpbmdDbGllbnRSZWN0IG9uIGFcblx0XHQvLyBkaXNjb25uZWN0ZWQgbm9kZSBpbiBJRSB0aHJvd3MgYW4gZXJyb3Jcblx0XHRpZiAoICFlbGVtLmdldENsaWVudFJlY3RzKCkubGVuZ3RoICkge1xuXHRcdFx0cmV0dXJuIHsgdG9wOiAwLCBsZWZ0OiAwIH07XG5cdFx0fVxuXG5cdFx0Ly8gR2V0IGRvY3VtZW50LXJlbGF0aXZlIHBvc2l0aW9uIGJ5IGFkZGluZyB2aWV3cG9ydCBzY3JvbGwgdG8gdmlld3BvcnQtcmVsYXRpdmUgZ0JDUlxuXHRcdHJlY3QgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXHRcdHdpbiA9IGVsZW0ub3duZXJEb2N1bWVudC5kZWZhdWx0Vmlldztcblx0XHRyZXR1cm4ge1xuXHRcdFx0dG9wOiByZWN0LnRvcCArIHdpbi5wYWdlWU9mZnNldCxcblx0XHRcdGxlZnQ6IHJlY3QubGVmdCArIHdpbi5wYWdlWE9mZnNldFxuXHRcdH07XG5cdH0sXG5cblx0Ly8gcG9zaXRpb24oKSByZWxhdGVzIGFuIGVsZW1lbnQncyBtYXJnaW4gYm94IHRvIGl0cyBvZmZzZXQgcGFyZW50J3MgcGFkZGluZyBib3hcblx0Ly8gVGhpcyBjb3JyZXNwb25kcyB0byB0aGUgYmVoYXZpb3Igb2YgQ1NTIGFic29sdXRlIHBvc2l0aW9uaW5nXG5cdHBvc2l0aW9uOiBmdW5jdGlvbigpIHtcblx0XHRpZiAoICF0aGlzWyAwIF0gKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dmFyIG9mZnNldFBhcmVudCwgb2Zmc2V0LCBkb2MsXG5cdFx0XHRlbGVtID0gdGhpc1sgMCBdLFxuXHRcdFx0cGFyZW50T2Zmc2V0ID0geyB0b3A6IDAsIGxlZnQ6IDAgfTtcblxuXHRcdC8vIHBvc2l0aW9uOmZpeGVkIGVsZW1lbnRzIGFyZSBvZmZzZXQgZnJvbSB0aGUgdmlld3BvcnQsIHdoaWNoIGl0c2VsZiBhbHdheXMgaGFzIHplcm8gb2Zmc2V0XG5cdFx0aWYgKCBqUXVlcnkuY3NzKCBlbGVtLCBcInBvc2l0aW9uXCIgKSA9PT0gXCJmaXhlZFwiICkge1xuXG5cdFx0XHQvLyBBc3N1bWUgcG9zaXRpb246Zml4ZWQgaW1wbGllcyBhdmFpbGFiaWxpdHkgb2YgZ2V0Qm91bmRpbmdDbGllbnRSZWN0XG5cdFx0XHRvZmZzZXQgPSBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG5cdFx0fSBlbHNlIHtcblx0XHRcdG9mZnNldCA9IHRoaXMub2Zmc2V0KCk7XG5cblx0XHRcdC8vIEFjY291bnQgZm9yIHRoZSAqcmVhbCogb2Zmc2V0IHBhcmVudCwgd2hpY2ggY2FuIGJlIHRoZSBkb2N1bWVudCBvciBpdHMgcm9vdCBlbGVtZW50XG5cdFx0XHQvLyB3aGVuIGEgc3RhdGljYWxseSBwb3NpdGlvbmVkIGVsZW1lbnQgaXMgaWRlbnRpZmllZFxuXHRcdFx0ZG9jID0gZWxlbS5vd25lckRvY3VtZW50O1xuXHRcdFx0b2Zmc2V0UGFyZW50ID0gZWxlbS5vZmZzZXRQYXJlbnQgfHwgZG9jLmRvY3VtZW50RWxlbWVudDtcblx0XHRcdHdoaWxlICggb2Zmc2V0UGFyZW50ICYmXG5cdFx0XHRcdCggb2Zmc2V0UGFyZW50ID09PSBkb2MuYm9keSB8fCBvZmZzZXRQYXJlbnQgPT09IGRvYy5kb2N1bWVudEVsZW1lbnQgKSAmJlxuXHRcdFx0XHRqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwicG9zaXRpb25cIiApID09PSBcInN0YXRpY1wiICkge1xuXG5cdFx0XHRcdG9mZnNldFBhcmVudCA9IG9mZnNldFBhcmVudC5wYXJlbnROb2RlO1xuXHRcdFx0fVxuXHRcdFx0aWYgKCBvZmZzZXRQYXJlbnQgJiYgb2Zmc2V0UGFyZW50ICE9PSBlbGVtICYmIG9mZnNldFBhcmVudC5ub2RlVHlwZSA9PT0gMSApIHtcblxuXHRcdFx0XHQvLyBJbmNvcnBvcmF0ZSBib3JkZXJzIGludG8gaXRzIG9mZnNldCwgc2luY2UgdGhleSBhcmUgb3V0c2lkZSBpdHMgY29udGVudCBvcmlnaW5cblx0XHRcdFx0cGFyZW50T2Zmc2V0ID0galF1ZXJ5KCBvZmZzZXRQYXJlbnQgKS5vZmZzZXQoKTtcblx0XHRcdFx0cGFyZW50T2Zmc2V0LnRvcCArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwiYm9yZGVyVG9wV2lkdGhcIiwgdHJ1ZSApO1xuXHRcdFx0XHRwYXJlbnRPZmZzZXQubGVmdCArPSBqUXVlcnkuY3NzKCBvZmZzZXRQYXJlbnQsIFwiYm9yZGVyTGVmdFdpZHRoXCIsIHRydWUgKTtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBTdWJ0cmFjdCBwYXJlbnQgb2Zmc2V0cyBhbmQgZWxlbWVudCBtYXJnaW5zXG5cdFx0cmV0dXJuIHtcblx0XHRcdHRvcDogb2Zmc2V0LnRvcCAtIHBhcmVudE9mZnNldC50b3AgLSBqUXVlcnkuY3NzKCBlbGVtLCBcIm1hcmdpblRvcFwiLCB0cnVlICksXG5cdFx0XHRsZWZ0OiBvZmZzZXQubGVmdCAtIHBhcmVudE9mZnNldC5sZWZ0IC0galF1ZXJ5LmNzcyggZWxlbSwgXCJtYXJnaW5MZWZ0XCIsIHRydWUgKVxuXHRcdH07XG5cdH0sXG5cblx0Ly8gVGhpcyBtZXRob2Qgd2lsbCByZXR1cm4gZG9jdW1lbnRFbGVtZW50IGluIHRoZSBmb2xsb3dpbmcgY2FzZXM6XG5cdC8vIDEpIEZvciB0aGUgZWxlbWVudCBpbnNpZGUgdGhlIGlmcmFtZSB3aXRob3V0IG9mZnNldFBhcmVudCwgdGhpcyBtZXRob2Qgd2lsbCByZXR1cm5cblx0Ly8gICAgZG9jdW1lbnRFbGVtZW50IG9mIHRoZSBwYXJlbnQgd2luZG93XG5cdC8vIDIpIEZvciB0aGUgaGlkZGVuIG9yIGRldGFjaGVkIGVsZW1lbnRcblx0Ly8gMykgRm9yIGJvZHkgb3IgaHRtbCBlbGVtZW50LCBpLmUuIGluIGNhc2Ugb2YgdGhlIGh0bWwgbm9kZSAtIGl0IHdpbGwgcmV0dXJuIGl0c2VsZlxuXHQvL1xuXHQvLyBidXQgdGhvc2UgZXhjZXB0aW9ucyB3ZXJlIG5ldmVyIHByZXNlbnRlZCBhcyBhIHJlYWwgbGlmZSB1c2UtY2FzZXNcblx0Ly8gYW5kIG1pZ2h0IGJlIGNvbnNpZGVyZWQgYXMgbW9yZSBwcmVmZXJhYmxlIHJlc3VsdHMuXG5cdC8vXG5cdC8vIFRoaXMgbG9naWMsIGhvd2V2ZXIsIGlzIG5vdCBndWFyYW50ZWVkIGFuZCBjYW4gY2hhbmdlIGF0IGFueSBwb2ludCBpbiB0aGUgZnV0dXJlXG5cdG9mZnNldFBhcmVudDogZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuIHRoaXMubWFwKCBmdW5jdGlvbigpIHtcblx0XHRcdHZhciBvZmZzZXRQYXJlbnQgPSB0aGlzLm9mZnNldFBhcmVudDtcblxuXHRcdFx0d2hpbGUgKCBvZmZzZXRQYXJlbnQgJiYgalF1ZXJ5LmNzcyggb2Zmc2V0UGFyZW50LCBcInBvc2l0aW9uXCIgKSA9PT0gXCJzdGF0aWNcIiApIHtcblx0XHRcdFx0b2Zmc2V0UGFyZW50ID0gb2Zmc2V0UGFyZW50Lm9mZnNldFBhcmVudDtcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuIG9mZnNldFBhcmVudCB8fCBkb2N1bWVudEVsZW1lbnQ7XG5cdFx0fSApO1xuXHR9XG59ICk7XG5cbi8vIENyZWF0ZSBzY3JvbGxMZWZ0IGFuZCBzY3JvbGxUb3AgbWV0aG9kc1xualF1ZXJ5LmVhY2goIHsgc2Nyb2xsTGVmdDogXCJwYWdlWE9mZnNldFwiLCBzY3JvbGxUb3A6IFwicGFnZVlPZmZzZXRcIiB9LCBmdW5jdGlvbiggbWV0aG9kLCBwcm9wICkge1xuXHR2YXIgdG9wID0gXCJwYWdlWU9mZnNldFwiID09PSBwcm9wO1xuXG5cdGpRdWVyeS5mblsgbWV0aG9kIF0gPSBmdW5jdGlvbiggdmFsICkge1xuXHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCBtZXRob2QsIHZhbCApIHtcblxuXHRcdFx0Ly8gQ29hbGVzY2UgZG9jdW1lbnRzIGFuZCB3aW5kb3dzXG5cdFx0XHR2YXIgd2luO1xuXHRcdFx0aWYgKCBpc1dpbmRvdyggZWxlbSApICkge1xuXHRcdFx0XHR3aW4gPSBlbGVtO1xuXHRcdFx0fSBlbHNlIGlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0d2luID0gZWxlbS5kZWZhdWx0Vmlldztcblx0XHRcdH1cblxuXHRcdFx0aWYgKCB2YWwgPT09IHVuZGVmaW5lZCApIHtcblx0XHRcdFx0cmV0dXJuIHdpbiA/IHdpblsgcHJvcCBdIDogZWxlbVsgbWV0aG9kIF07XG5cdFx0XHR9XG5cblx0XHRcdGlmICggd2luICkge1xuXHRcdFx0XHR3aW4uc2Nyb2xsVG8oXG5cdFx0XHRcdFx0IXRvcCA/IHZhbCA6IHdpbi5wYWdlWE9mZnNldCxcblx0XHRcdFx0XHR0b3AgPyB2YWwgOiB3aW4ucGFnZVlPZmZzZXRcblx0XHRcdFx0KTtcblxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0ZWxlbVsgbWV0aG9kIF0gPSB2YWw7XG5cdFx0XHR9XG5cdFx0fSwgbWV0aG9kLCB2YWwsIGFyZ3VtZW50cy5sZW5ndGggKTtcblx0fTtcbn0gKTtcblxuLy8gU3VwcG9ydDogU2FmYXJpIDw9NyAtIDkuMSwgQ2hyb21lIDw9MzcgLSA0OVxuLy8gQWRkIHRoZSB0b3AvbGVmdCBjc3NIb29rcyB1c2luZyBqUXVlcnkuZm4ucG9zaXRpb25cbi8vIFdlYmtpdCBidWc6IGh0dHBzOi8vYnVncy53ZWJraXQub3JnL3Nob3dfYnVnLmNnaT9pZD0yOTA4NFxuLy8gQmxpbmsgYnVnOiBodHRwczovL2J1Z3MuY2hyb21pdW0ub3JnL3AvY2hyb21pdW0vaXNzdWVzL2RldGFpbD9pZD01ODkzNDdcbi8vIGdldENvbXB1dGVkU3R5bGUgcmV0dXJucyBwZXJjZW50IHdoZW4gc3BlY2lmaWVkIGZvciB0b3AvbGVmdC9ib3R0b20vcmlnaHQ7XG4vLyByYXRoZXIgdGhhbiBtYWtlIHRoZSBjc3MgbW9kdWxlIGRlcGVuZCBvbiB0aGUgb2Zmc2V0IG1vZHVsZSwganVzdCBjaGVjayBmb3IgaXQgaGVyZVxualF1ZXJ5LmVhY2goIFsgXCJ0b3BcIiwgXCJsZWZ0XCIgXSwgZnVuY3Rpb24oIGksIHByb3AgKSB7XG5cdGpRdWVyeS5jc3NIb29rc1sgcHJvcCBdID0gYWRkR2V0SG9va0lmKCBzdXBwb3J0LnBpeGVsUG9zaXRpb24sXG5cdFx0ZnVuY3Rpb24oIGVsZW0sIGNvbXB1dGVkICkge1xuXHRcdFx0aWYgKCBjb21wdXRlZCApIHtcblx0XHRcdFx0Y29tcHV0ZWQgPSBjdXJDU1MoIGVsZW0sIHByb3AgKTtcblxuXHRcdFx0XHQvLyBJZiBjdXJDU1MgcmV0dXJucyBwZXJjZW50YWdlLCBmYWxsYmFjayB0byBvZmZzZXRcblx0XHRcdFx0cmV0dXJuIHJudW1ub25weC50ZXN0KCBjb21wdXRlZCApID9cblx0XHRcdFx0XHRqUXVlcnkoIGVsZW0gKS5wb3NpdGlvbigpWyBwcm9wIF0gKyBcInB4XCIgOlxuXHRcdFx0XHRcdGNvbXB1dGVkO1xuXHRcdFx0fVxuXHRcdH1cblx0KTtcbn0gKTtcblxuXG4vLyBDcmVhdGUgaW5uZXJIZWlnaHQsIGlubmVyV2lkdGgsIGhlaWdodCwgd2lkdGgsIG91dGVySGVpZ2h0IGFuZCBvdXRlcldpZHRoIG1ldGhvZHNcbmpRdWVyeS5lYWNoKCB7IEhlaWdodDogXCJoZWlnaHRcIiwgV2lkdGg6IFwid2lkdGhcIiB9LCBmdW5jdGlvbiggbmFtZSwgdHlwZSApIHtcblx0alF1ZXJ5LmVhY2goIHsgcGFkZGluZzogXCJpbm5lclwiICsgbmFtZSwgY29udGVudDogdHlwZSwgXCJcIjogXCJvdXRlclwiICsgbmFtZSB9LFxuXHRcdGZ1bmN0aW9uKCBkZWZhdWx0RXh0cmEsIGZ1bmNOYW1lICkge1xuXG5cdFx0Ly8gTWFyZ2luIGlzIG9ubHkgZm9yIG91dGVySGVpZ2h0LCBvdXRlcldpZHRoXG5cdFx0alF1ZXJ5LmZuWyBmdW5jTmFtZSBdID0gZnVuY3Rpb24oIG1hcmdpbiwgdmFsdWUgKSB7XG5cdFx0XHR2YXIgY2hhaW5hYmxlID0gYXJndW1lbnRzLmxlbmd0aCAmJiAoIGRlZmF1bHRFeHRyYSB8fCB0eXBlb2YgbWFyZ2luICE9PSBcImJvb2xlYW5cIiApLFxuXHRcdFx0XHRleHRyYSA9IGRlZmF1bHRFeHRyYSB8fCAoIG1hcmdpbiA9PT0gdHJ1ZSB8fCB2YWx1ZSA9PT0gdHJ1ZSA/IFwibWFyZ2luXCIgOiBcImJvcmRlclwiICk7XG5cblx0XHRcdHJldHVybiBhY2Nlc3MoIHRoaXMsIGZ1bmN0aW9uKCBlbGVtLCB0eXBlLCB2YWx1ZSApIHtcblx0XHRcdFx0dmFyIGRvYztcblxuXHRcdFx0XHRpZiAoIGlzV2luZG93KCBlbGVtICkgKSB7XG5cblx0XHRcdFx0XHQvLyAkKCB3aW5kb3cgKS5vdXRlcldpZHRoL0hlaWdodCByZXR1cm4gdy9oIGluY2x1ZGluZyBzY3JvbGxiYXJzIChnaC0xNzI5KVxuXHRcdFx0XHRcdHJldHVybiBmdW5jTmFtZS5pbmRleE9mKCBcIm91dGVyXCIgKSA9PT0gMCA/XG5cdFx0XHRcdFx0XHRlbGVtWyBcImlubmVyXCIgKyBuYW1lIF0gOlxuXHRcdFx0XHRcdFx0ZWxlbS5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnRbIFwiY2xpZW50XCIgKyBuYW1lIF07XG5cdFx0XHRcdH1cblxuXHRcdFx0XHQvLyBHZXQgZG9jdW1lbnQgd2lkdGggb3IgaGVpZ2h0XG5cdFx0XHRcdGlmICggZWxlbS5ub2RlVHlwZSA9PT0gOSApIHtcblx0XHRcdFx0XHRkb2MgPSBlbGVtLmRvY3VtZW50RWxlbWVudDtcblxuXHRcdFx0XHRcdC8vIEVpdGhlciBzY3JvbGxbV2lkdGgvSGVpZ2h0XSBvciBvZmZzZXRbV2lkdGgvSGVpZ2h0XSBvciBjbGllbnRbV2lkdGgvSGVpZ2h0XSxcblx0XHRcdFx0XHQvLyB3aGljaGV2ZXIgaXMgZ3JlYXRlc3Rcblx0XHRcdFx0XHRyZXR1cm4gTWF0aC5tYXgoXG5cdFx0XHRcdFx0XHRlbGVtLmJvZHlbIFwic2Nyb2xsXCIgKyBuYW1lIF0sIGRvY1sgXCJzY3JvbGxcIiArIG5hbWUgXSxcblx0XHRcdFx0XHRcdGVsZW0uYm9keVsgXCJvZmZzZXRcIiArIG5hbWUgXSwgZG9jWyBcIm9mZnNldFwiICsgbmFtZSBdLFxuXHRcdFx0XHRcdFx0ZG9jWyBcImNsaWVudFwiICsgbmFtZSBdXG5cdFx0XHRcdFx0KTtcblx0XHRcdFx0fVxuXG5cdFx0XHRcdHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID9cblxuXHRcdFx0XHRcdC8vIEdldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnQsIHJlcXVlc3RpbmcgYnV0IG5vdCBmb3JjaW5nIHBhcnNlRmxvYXRcblx0XHRcdFx0XHRqUXVlcnkuY3NzKCBlbGVtLCB0eXBlLCBleHRyYSApIDpcblxuXHRcdFx0XHRcdC8vIFNldCB3aWR0aCBvciBoZWlnaHQgb24gdGhlIGVsZW1lbnRcblx0XHRcdFx0XHRqUXVlcnkuc3R5bGUoIGVsZW0sIHR5cGUsIHZhbHVlLCBleHRyYSApO1xuXHRcdFx0fSwgdHlwZSwgY2hhaW5hYmxlID8gbWFyZ2luIDogdW5kZWZpbmVkLCBjaGFpbmFibGUgKTtcblx0XHR9O1xuXHR9ICk7XG59ICk7XG5cblxualF1ZXJ5LmVhY2goICggXCJibHVyIGZvY3VzIGZvY3VzaW4gZm9jdXNvdXQgcmVzaXplIHNjcm9sbCBjbGljayBkYmxjbGljayBcIiArXG5cdFwibW91c2Vkb3duIG1vdXNldXAgbW91c2Vtb3ZlIG1vdXNlb3ZlciBtb3VzZW91dCBtb3VzZWVudGVyIG1vdXNlbGVhdmUgXCIgK1xuXHRcImNoYW5nZSBzZWxlY3Qgc3VibWl0IGtleWRvd24ga2V5cHJlc3Mga2V5dXAgY29udGV4dG1lbnVcIiApLnNwbGl0KCBcIiBcIiApLFxuXHRmdW5jdGlvbiggaSwgbmFtZSApIHtcblxuXHQvLyBIYW5kbGUgZXZlbnQgYmluZGluZ1xuXHRqUXVlcnkuZm5bIG5hbWUgXSA9IGZ1bmN0aW9uKCBkYXRhLCBmbiApIHtcblx0XHRyZXR1cm4gYXJndW1lbnRzLmxlbmd0aCA+IDAgP1xuXHRcdFx0dGhpcy5vbiggbmFtZSwgbnVsbCwgZGF0YSwgZm4gKSA6XG5cdFx0XHR0aGlzLnRyaWdnZXIoIG5hbWUgKTtcblx0fTtcbn0gKTtcblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXHRob3ZlcjogZnVuY3Rpb24oIGZuT3ZlciwgZm5PdXQgKSB7XG5cdFx0cmV0dXJuIHRoaXMubW91c2VlbnRlciggZm5PdmVyICkubW91c2VsZWF2ZSggZm5PdXQgfHwgZm5PdmVyICk7XG5cdH1cbn0gKTtcblxuXG5cblxualF1ZXJ5LmZuLmV4dGVuZCgge1xuXG5cdGJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBudWxsLCBkYXRhLCBmbiApO1xuXHR9LFxuXHR1bmJpbmQ6IGZ1bmN0aW9uKCB0eXBlcywgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub2ZmKCB0eXBlcywgbnVsbCwgZm4gKTtcblx0fSxcblxuXHRkZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZGF0YSwgZm4gKSB7XG5cdFx0cmV0dXJuIHRoaXMub24oIHR5cGVzLCBzZWxlY3RvciwgZGF0YSwgZm4gKTtcblx0fSxcblx0dW5kZWxlZ2F0ZTogZnVuY3Rpb24oIHNlbGVjdG9yLCB0eXBlcywgZm4gKSB7XG5cblx0XHQvLyAoIG5hbWVzcGFjZSApIG9yICggc2VsZWN0b3IsIHR5cGVzIFssIGZuXSApXG5cdFx0cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPT09IDEgP1xuXHRcdFx0dGhpcy5vZmYoIHNlbGVjdG9yLCBcIioqXCIgKSA6XG5cdFx0XHR0aGlzLm9mZiggdHlwZXMsIHNlbGVjdG9yIHx8IFwiKipcIiwgZm4gKTtcblx0fVxufSApO1xuXG4vLyBCaW5kIGEgZnVuY3Rpb24gdG8gYSBjb250ZXh0LCBvcHRpb25hbGx5IHBhcnRpYWxseSBhcHBseWluZyBhbnlcbi8vIGFyZ3VtZW50cy5cbi8vIGpRdWVyeS5wcm94eSBpcyBkZXByZWNhdGVkIHRvIHByb21vdGUgc3RhbmRhcmRzIChzcGVjaWZpY2FsbHkgRnVuY3Rpb24jYmluZClcbi8vIEhvd2V2ZXIsIGl0IGlzIG5vdCBzbGF0ZWQgZm9yIHJlbW92YWwgYW55IHRpbWUgc29vblxualF1ZXJ5LnByb3h5ID0gZnVuY3Rpb24oIGZuLCBjb250ZXh0ICkge1xuXHR2YXIgdG1wLCBhcmdzLCBwcm94eTtcblxuXHRpZiAoIHR5cGVvZiBjb250ZXh0ID09PSBcInN0cmluZ1wiICkge1xuXHRcdHRtcCA9IGZuWyBjb250ZXh0IF07XG5cdFx0Y29udGV4dCA9IGZuO1xuXHRcdGZuID0gdG1wO1xuXHR9XG5cblx0Ly8gUXVpY2sgY2hlY2sgdG8gZGV0ZXJtaW5lIGlmIHRhcmdldCBpcyBjYWxsYWJsZSwgaW4gdGhlIHNwZWNcblx0Ly8gdGhpcyB0aHJvd3MgYSBUeXBlRXJyb3IsIGJ1dCB3ZSB3aWxsIGp1c3QgcmV0dXJuIHVuZGVmaW5lZC5cblx0aWYgKCAhaXNGdW5jdGlvbiggZm4gKSApIHtcblx0XHRyZXR1cm4gdW5kZWZpbmVkO1xuXHR9XG5cblx0Ly8gU2ltdWxhdGVkIGJpbmRcblx0YXJncyA9IHNsaWNlLmNhbGwoIGFyZ3VtZW50cywgMiApO1xuXHRwcm94eSA9IGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBmbi5hcHBseSggY29udGV4dCB8fCB0aGlzLCBhcmdzLmNvbmNhdCggc2xpY2UuY2FsbCggYXJndW1lbnRzICkgKSApO1xuXHR9O1xuXG5cdC8vIFNldCB0aGUgZ3VpZCBvZiB1bmlxdWUgaGFuZGxlciB0byB0aGUgc2FtZSBvZiBvcmlnaW5hbCBoYW5kbGVyLCBzbyBpdCBjYW4gYmUgcmVtb3ZlZFxuXHRwcm94eS5ndWlkID0gZm4uZ3VpZCA9IGZuLmd1aWQgfHwgalF1ZXJ5Lmd1aWQrKztcblxuXHRyZXR1cm4gcHJveHk7XG59O1xuXG5qUXVlcnkuaG9sZFJlYWR5ID0gZnVuY3Rpb24oIGhvbGQgKSB7XG5cdGlmICggaG9sZCApIHtcblx0XHRqUXVlcnkucmVhZHlXYWl0Kys7XG5cdH0gZWxzZSB7XG5cdFx0alF1ZXJ5LnJlYWR5KCB0cnVlICk7XG5cdH1cbn07XG5qUXVlcnkuaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5qUXVlcnkucGFyc2VKU09OID0gSlNPTi5wYXJzZTtcbmpRdWVyeS5ub2RlTmFtZSA9IG5vZGVOYW1lO1xualF1ZXJ5LmlzRnVuY3Rpb24gPSBpc0Z1bmN0aW9uO1xualF1ZXJ5LmlzV2luZG93ID0gaXNXaW5kb3c7XG5qUXVlcnkuY2FtZWxDYXNlID0gY2FtZWxDYXNlO1xualF1ZXJ5LnR5cGUgPSB0b1R5cGU7XG5cbmpRdWVyeS5ub3cgPSBEYXRlLm5vdztcblxualF1ZXJ5LmlzTnVtZXJpYyA9IGZ1bmN0aW9uKCBvYmogKSB7XG5cblx0Ly8gQXMgb2YgalF1ZXJ5IDMuMCwgaXNOdW1lcmljIGlzIGxpbWl0ZWQgdG9cblx0Ly8gc3RyaW5ncyBhbmQgbnVtYmVycyAocHJpbWl0aXZlcyBvciBvYmplY3RzKVxuXHQvLyB0aGF0IGNhbiBiZSBjb2VyY2VkIHRvIGZpbml0ZSBudW1iZXJzIChnaC0yNjYyKVxuXHR2YXIgdHlwZSA9IGpRdWVyeS50eXBlKCBvYmogKTtcblx0cmV0dXJuICggdHlwZSA9PT0gXCJudW1iZXJcIiB8fCB0eXBlID09PSBcInN0cmluZ1wiICkgJiZcblxuXHRcdC8vIHBhcnNlRmxvYXQgTmFOcyBudW1lcmljLWNhc3QgZmFsc2UgcG9zaXRpdmVzIChcIlwiKVxuXHRcdC8vIC4uLmJ1dCBtaXNpbnRlcnByZXRzIGxlYWRpbmctbnVtYmVyIHN0cmluZ3MsIHBhcnRpY3VsYXJseSBoZXggbGl0ZXJhbHMgKFwiMHguLi5cIilcblx0XHQvLyBzdWJ0cmFjdGlvbiBmb3JjZXMgaW5maW5pdGllcyB0byBOYU5cblx0XHQhaXNOYU4oIG9iaiAtIHBhcnNlRmxvYXQoIG9iaiApICk7XG59O1xuXG5cblxuXG4vLyBSZWdpc3RlciBhcyBhIG5hbWVkIEFNRCBtb2R1bGUsIHNpbmNlIGpRdWVyeSBjYW4gYmUgY29uY2F0ZW5hdGVkIHdpdGggb3RoZXJcbi8vIGZpbGVzIHRoYXQgbWF5IHVzZSBkZWZpbmUsIGJ1dCBub3QgdmlhIGEgcHJvcGVyIGNvbmNhdGVuYXRpb24gc2NyaXB0IHRoYXRcbi8vIHVuZGVyc3RhbmRzIGFub255bW91cyBBTUQgbW9kdWxlcy4gQSBuYW1lZCBBTUQgaXMgc2FmZXN0IGFuZCBtb3N0IHJvYnVzdFxuLy8gd2F5IHRvIHJlZ2lzdGVyLiBMb3dlcmNhc2UganF1ZXJ5IGlzIHVzZWQgYmVjYXVzZSBBTUQgbW9kdWxlIG5hbWVzIGFyZVxuLy8gZGVyaXZlZCBmcm9tIGZpbGUgbmFtZXMsIGFuZCBqUXVlcnkgaXMgbm9ybWFsbHkgZGVsaXZlcmVkIGluIGEgbG93ZXJjYXNlXG4vLyBmaWxlIG5hbWUuIERvIHRoaXMgYWZ0ZXIgY3JlYXRpbmcgdGhlIGdsb2JhbCBzbyB0aGF0IGlmIGFuIEFNRCBtb2R1bGUgd2FudHNcbi8vIHRvIGNhbGwgbm9Db25mbGljdCB0byBoaWRlIHRoaXMgdmVyc2lvbiBvZiBqUXVlcnksIGl0IHdpbGwgd29yay5cblxuLy8gTm90ZSB0aGF0IGZvciBtYXhpbXVtIHBvcnRhYmlsaXR5LCBsaWJyYXJpZXMgdGhhdCBhcmUgbm90IGpRdWVyeSBzaG91bGRcbi8vIGRlY2xhcmUgdGhlbXNlbHZlcyBhcyBhbm9ueW1vdXMgbW9kdWxlcywgYW5kIGF2b2lkIHNldHRpbmcgYSBnbG9iYWwgaWYgYW5cbi8vIEFNRCBsb2FkZXIgaXMgcHJlc2VudC4galF1ZXJ5IGlzIGEgc3BlY2lhbCBjYXNlLiBGb3IgbW9yZSBpbmZvcm1hdGlvbiwgc2VlXG4vLyBodHRwczovL2dpdGh1Yi5jb20vanJidXJrZS9yZXF1aXJlanMvd2lraS9VcGRhdGluZy1leGlzdGluZy1saWJyYXJpZXMjd2lraS1hbm9uXG5cbmlmICggdHlwZW9mIGRlZmluZSA9PT0gXCJmdW5jdGlvblwiICYmIGRlZmluZS5hbWQgKSB7XG5cdGRlZmluZSggXCJqcXVlcnlcIiwgW10sIGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiBqUXVlcnk7XG5cdH0gKTtcbn1cblxuXG5cblxudmFyXG5cblx0Ly8gTWFwIG92ZXIgalF1ZXJ5IGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG5cdF9qUXVlcnkgPSB3aW5kb3cualF1ZXJ5LFxuXG5cdC8vIE1hcCBvdmVyIHRoZSAkIGluIGNhc2Ugb2Ygb3ZlcndyaXRlXG5cdF8kID0gd2luZG93LiQ7XG5cbmpRdWVyeS5ub0NvbmZsaWN0ID0gZnVuY3Rpb24oIGRlZXAgKSB7XG5cdGlmICggd2luZG93LiQgPT09IGpRdWVyeSApIHtcblx0XHR3aW5kb3cuJCA9IF8kO1xuXHR9XG5cblx0aWYgKCBkZWVwICYmIHdpbmRvdy5qUXVlcnkgPT09IGpRdWVyeSApIHtcblx0XHR3aW5kb3cualF1ZXJ5ID0gX2pRdWVyeTtcblx0fVxuXG5cdHJldHVybiBqUXVlcnk7XG59O1xuXG4vLyBFeHBvc2UgalF1ZXJ5IGFuZCAkIGlkZW50aWZpZXJzLCBldmVuIGluIEFNRFxuLy8gKCM3MTAyI2NvbW1lbnQ6MTAsIGh0dHBzOi8vZ2l0aHViLmNvbS9qcXVlcnkvanF1ZXJ5L3B1bGwvNTU3KVxuLy8gYW5kIENvbW1vbkpTIGZvciBicm93c2VyIGVtdWxhdG9ycyAoIzEzNTY2KVxuaWYgKCAhbm9HbG9iYWwgKSB7XG5cdHdpbmRvdy5qUXVlcnkgPSB3aW5kb3cuJCA9IGpRdWVyeTtcbn1cblxuXG5cblxucmV0dXJuIGpRdWVyeTtcbn0gKTtcbiIsIi8qIVxuICogTWF0ZXJpYWxpemUgdjEuMC4wIChodHRwOi8vbWF0ZXJpYWxpemVjc3MuY29tKVxuICogQ29weXJpZ2h0IDIwMTQtMjAxNyBNYXRlcmlhbGl6ZVxuICogTUlUIExpY2Vuc2UgKGh0dHBzOi8vcmF3LmdpdGh1YnVzZXJjb250ZW50LmNvbS9Eb2dmYWxvL21hdGVyaWFsaXplL21hc3Rlci9MSUNFTlNFKVxuICovXG52YXIgX2dldCA9IGZ1bmN0aW9uIGdldChvYmplY3QsIHByb3BlcnR5LCByZWNlaXZlcikgeyBpZiAob2JqZWN0ID09PSBudWxsKSBvYmplY3QgPSBGdW5jdGlvbi5wcm90b3R5cGU7IHZhciBkZXNjID0gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvYmplY3QsIHByb3BlcnR5KTsgaWYgKGRlc2MgPT09IHVuZGVmaW5lZCkgeyB2YXIgcGFyZW50ID0gT2JqZWN0LmdldFByb3RvdHlwZU9mKG9iamVjdCk7IGlmIChwYXJlbnQgPT09IG51bGwpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSBlbHNlIHsgcmV0dXJuIGdldChwYXJlbnQsIHByb3BlcnR5LCByZWNlaXZlcik7IH0gfSBlbHNlIGlmIChcInZhbHVlXCIgaW4gZGVzYykgeyByZXR1cm4gZGVzYy52YWx1ZTsgfSBlbHNlIHsgdmFyIGdldHRlciA9IGRlc2MuZ2V0OyBpZiAoZ2V0dGVyID09PSB1bmRlZmluZWQpIHsgcmV0dXJuIHVuZGVmaW5lZDsgfSByZXR1cm4gZ2V0dGVyLmNhbGwocmVjZWl2ZXIpOyB9IH07XG5cbnZhciBfY3JlYXRlQ2xhc3MgPSBmdW5jdGlvbiAoKSB7IGZ1bmN0aW9uIGRlZmluZVByb3BlcnRpZXModGFyZ2V0LCBwcm9wcykgeyBmb3IgKHZhciBpID0gMDsgaSA8IHByb3BzLmxlbmd0aDsgaSsrKSB7IHZhciBkZXNjcmlwdG9yID0gcHJvcHNbaV07IGRlc2NyaXB0b3IuZW51bWVyYWJsZSA9IGRlc2NyaXB0b3IuZW51bWVyYWJsZSB8fCBmYWxzZTsgZGVzY3JpcHRvci5jb25maWd1cmFibGUgPSB0cnVlOyBpZiAoXCJ2YWx1ZVwiIGluIGRlc2NyaXB0b3IpIGRlc2NyaXB0b3Iud3JpdGFibGUgPSB0cnVlOyBPYmplY3QuZGVmaW5lUHJvcGVydHkodGFyZ2V0LCBkZXNjcmlwdG9yLmtleSwgZGVzY3JpcHRvcik7IH0gfSByZXR1cm4gZnVuY3Rpb24gKENvbnN0cnVjdG9yLCBwcm90b1Byb3BzLCBzdGF0aWNQcm9wcykgeyBpZiAocHJvdG9Qcm9wcykgZGVmaW5lUHJvcGVydGllcyhDb25zdHJ1Y3Rvci5wcm90b3R5cGUsIHByb3RvUHJvcHMpOyBpZiAoc3RhdGljUHJvcHMpIGRlZmluZVByb3BlcnRpZXMoQ29uc3RydWN0b3IsIHN0YXRpY1Byb3BzKTsgcmV0dXJuIENvbnN0cnVjdG9yOyB9OyB9KCk7XG5cbmZ1bmN0aW9uIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHNlbGYsIGNhbGwpIHsgaWYgKCFzZWxmKSB7IHRocm93IG5ldyBSZWZlcmVuY2VFcnJvcihcInRoaXMgaGFzbid0IGJlZW4gaW5pdGlhbGlzZWQgLSBzdXBlcigpIGhhc24ndCBiZWVuIGNhbGxlZFwiKTsgfSByZXR1cm4gY2FsbCAmJiAodHlwZW9mIGNhbGwgPT09IFwib2JqZWN0XCIgfHwgdHlwZW9mIGNhbGwgPT09IFwiZnVuY3Rpb25cIikgPyBjYWxsIDogc2VsZjsgfVxuXG5mdW5jdGlvbiBfaW5oZXJpdHMoc3ViQ2xhc3MsIHN1cGVyQ2xhc3MpIHsgaWYgKHR5cGVvZiBzdXBlckNsYXNzICE9PSBcImZ1bmN0aW9uXCIgJiYgc3VwZXJDbGFzcyAhPT0gbnVsbCkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiU3VwZXIgZXhwcmVzc2lvbiBtdXN0IGVpdGhlciBiZSBudWxsIG9yIGEgZnVuY3Rpb24sIG5vdCBcIiArIHR5cGVvZiBzdXBlckNsYXNzKTsgfSBzdWJDbGFzcy5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKHN1cGVyQ2xhc3MgJiYgc3VwZXJDbGFzcy5wcm90b3R5cGUsIHsgY29uc3RydWN0b3I6IHsgdmFsdWU6IHN1YkNsYXNzLCBlbnVtZXJhYmxlOiBmYWxzZSwgd3JpdGFibGU6IHRydWUsIGNvbmZpZ3VyYWJsZTogdHJ1ZSB9IH0pOyBpZiAoc3VwZXJDbGFzcykgT2JqZWN0LnNldFByb3RvdHlwZU9mID8gT2JqZWN0LnNldFByb3RvdHlwZU9mKHN1YkNsYXNzLCBzdXBlckNsYXNzKSA6IHN1YkNsYXNzLl9fcHJvdG9fXyA9IHN1cGVyQ2xhc3M7IH1cblxuZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyohIGNhc2gtZG9tIDEuMy41LCBodHRwczovL2dpdGh1Yi5jb20va2Vud2hlZWxlci9jYXNoIEBsaWNlbnNlIE1JVCAqL1xuKGZ1bmN0aW9uIChmYWN0b3J5KSB7XG4gIHdpbmRvdy5jYXNoID0gZmFjdG9yeSgpO1xufSkoZnVuY3Rpb24gKCkge1xuICB2YXIgZG9jID0gZG9jdW1lbnQsXG4gICAgICB3aW4gPSB3aW5kb3csXG4gICAgICBBcnJheVByb3RvID0gQXJyYXkucHJvdG90eXBlLFxuICAgICAgc2xpY2UgPSBBcnJheVByb3RvLnNsaWNlLFxuICAgICAgZmlsdGVyID0gQXJyYXlQcm90by5maWx0ZXIsXG4gICAgICBwdXNoID0gQXJyYXlQcm90by5wdXNoO1xuXG4gIHZhciBub29wID0gZnVuY3Rpb24gKCkge30sXG4gICAgICBpc0Z1bmN0aW9uID0gZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAvLyBAc2VlIGh0dHBzOi8vY3JidWcuY29tLzU2ODQ0OFxuICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gdHlwZW9mIG5vb3AgJiYgaXRlbS5jYWxsO1xuICB9LFxuICAgICAgaXNTdHJpbmcgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgIHJldHVybiB0eXBlb2YgaXRlbSA9PT0gdHlwZW9mIFwiXCI7XG4gIH07XG5cbiAgdmFyIGlkTWF0Y2ggPSAvXiNbXFx3LV0qJC8sXG4gICAgICBjbGFzc01hdGNoID0gL15cXC5bXFx3LV0qJC8sXG4gICAgICBodG1sTWF0Y2ggPSAvPC4rPi8sXG4gICAgICBzaW5nbGV0ID0gL15cXHcrJC87XG5cbiAgZnVuY3Rpb24gZmluZChzZWxlY3RvciwgY29udGV4dCkge1xuICAgIGNvbnRleHQgPSBjb250ZXh0IHx8IGRvYztcbiAgICB2YXIgZWxlbXMgPSBjbGFzc01hdGNoLnRlc3Qoc2VsZWN0b3IpID8gY29udGV4dC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKHNlbGVjdG9yLnNsaWNlKDEpKSA6IHNpbmdsZXQudGVzdChzZWxlY3RvcikgPyBjb250ZXh0LmdldEVsZW1lbnRzQnlUYWdOYW1lKHNlbGVjdG9yKSA6IGNvbnRleHQucXVlcnlTZWxlY3RvckFsbChzZWxlY3Rvcik7XG4gICAgcmV0dXJuIGVsZW1zO1xuICB9XG5cbiAgdmFyIGZyYWc7XG4gIGZ1bmN0aW9uIHBhcnNlSFRNTChzdHIpIHtcbiAgICBpZiAoIWZyYWcpIHtcbiAgICAgIGZyYWcgPSBkb2MuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KG51bGwpO1xuICAgICAgdmFyIGJhc2UgPSBmcmFnLmNyZWF0ZUVsZW1lbnQoXCJiYXNlXCIpO1xuICAgICAgYmFzZS5ocmVmID0gZG9jLmxvY2F0aW9uLmhyZWY7XG4gICAgICBmcmFnLmhlYWQuYXBwZW5kQ2hpbGQoYmFzZSk7XG4gICAgfVxuXG4gICAgZnJhZy5ib2R5LmlubmVySFRNTCA9IHN0cjtcblxuICAgIHJldHVybiBmcmFnLmJvZHkuY2hpbGROb2RlcztcbiAgfVxuXG4gIGZ1bmN0aW9uIG9uUmVhZHkoZm4pIHtcbiAgICBpZiAoZG9jLnJlYWR5U3RhdGUgIT09IFwibG9hZGluZ1wiKSB7XG4gICAgICBmbigpO1xuICAgIH0gZWxzZSB7XG4gICAgICBkb2MuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZm4pO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIEluaXQoc2VsZWN0b3IsIGNvbnRleHQpIHtcbiAgICBpZiAoIXNlbGVjdG9yKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBJZiBhbHJlYWR5IGEgY2FzaCBjb2xsZWN0aW9uLCBkb24ndCBkbyBhbnkgZnVydGhlciBwcm9jZXNzaW5nXG4gICAgaWYgKHNlbGVjdG9yLmNhc2ggJiYgc2VsZWN0b3IgIT09IHdpbikge1xuICAgICAgcmV0dXJuIHNlbGVjdG9yO1xuICAgIH1cblxuICAgIHZhciBlbGVtcyA9IHNlbGVjdG9yLFxuICAgICAgICBpID0gMCxcbiAgICAgICAgbGVuZ3RoO1xuXG4gICAgaWYgKGlzU3RyaW5nKHNlbGVjdG9yKSkge1xuICAgICAgZWxlbXMgPSBpZE1hdGNoLnRlc3Qoc2VsZWN0b3IpID9cbiAgICAgIC8vIElmIGFuIElEIHVzZSB0aGUgZmFzdGVyIGdldEVsZW1lbnRCeUlkIGNoZWNrXG4gICAgICBkb2MuZ2V0RWxlbWVudEJ5SWQoc2VsZWN0b3Iuc2xpY2UoMSkpIDogaHRtbE1hdGNoLnRlc3Qoc2VsZWN0b3IpID9cbiAgICAgIC8vIElmIEhUTUwsIHBhcnNlIGl0IGludG8gcmVhbCBlbGVtZW50c1xuICAgICAgcGFyc2VIVE1MKHNlbGVjdG9yKSA6XG4gICAgICAvLyBlbHNlIHVzZSBgZmluZGBcbiAgICAgIGZpbmQoc2VsZWN0b3IsIGNvbnRleHQpO1xuXG4gICAgICAvLyBJZiBmdW5jdGlvbiwgdXNlIGFzIHNob3J0Y3V0IGZvciBET00gcmVhZHlcbiAgICB9IGVsc2UgaWYgKGlzRnVuY3Rpb24oc2VsZWN0b3IpKSB7XG4gICAgICBvblJlYWR5KHNlbGVjdG9yKTtyZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBpZiAoIWVsZW1zKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBJZiBhIHNpbmdsZSBET00gZWxlbWVudCBpcyBwYXNzZWQgaW4gb3IgcmVjZWl2ZWQgdmlhIElELCByZXR1cm4gdGhlIHNpbmdsZSBlbGVtZW50XG4gICAgaWYgKGVsZW1zLm5vZGVUeXBlIHx8IGVsZW1zID09PSB3aW4pIHtcbiAgICAgIHRoaXNbMF0gPSBlbGVtcztcbiAgICAgIHRoaXMubGVuZ3RoID0gMTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gVHJlYXQgbGlrZSBhbiBhcnJheSBhbmQgbG9vcCB0aHJvdWdoIGVhY2ggaXRlbS5cbiAgICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoID0gZWxlbXMubGVuZ3RoO1xuICAgICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICB0aGlzW2ldID0gZWxlbXNbaV07XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICBmdW5jdGlvbiBjYXNoKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgcmV0dXJuIG5ldyBJbml0KHNlbGVjdG9yLCBjb250ZXh0KTtcbiAgfVxuXG4gIHZhciBmbiA9IGNhc2guZm4gPSBjYXNoLnByb3RvdHlwZSA9IEluaXQucHJvdG90eXBlID0geyAvLyBqc2hpbnQgaWdub3JlOmxpbmVcbiAgICBjYXNoOiB0cnVlLFxuICAgIGxlbmd0aDogMCxcbiAgICBwdXNoOiBwdXNoLFxuICAgIHNwbGljZTogQXJyYXlQcm90by5zcGxpY2UsXG4gICAgbWFwOiBBcnJheVByb3RvLm1hcCxcbiAgICBpbml0OiBJbml0XG4gIH07XG5cbiAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGZuLCBcImNvbnN0cnVjdG9yXCIsIHsgdmFsdWU6IGNhc2ggfSk7XG5cbiAgY2FzaC5wYXJzZUhUTUwgPSBwYXJzZUhUTUw7XG4gIGNhc2gubm9vcCA9IG5vb3A7XG4gIGNhc2guaXNGdW5jdGlvbiA9IGlzRnVuY3Rpb247XG4gIGNhc2guaXNTdHJpbmcgPSBpc1N0cmluZztcblxuICBjYXNoLmV4dGVuZCA9IGZuLmV4dGVuZCA9IGZ1bmN0aW9uICh0YXJnZXQpIHtcbiAgICB0YXJnZXQgPSB0YXJnZXQgfHwge307XG5cbiAgICB2YXIgYXJncyA9IHNsaWNlLmNhbGwoYXJndW1lbnRzKSxcbiAgICAgICAgbGVuZ3RoID0gYXJncy5sZW5ndGgsXG4gICAgICAgIGkgPSAxO1xuXG4gICAgaWYgKGFyZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICB0YXJnZXQgPSB0aGlzO1xuICAgICAgaSA9IDA7XG4gICAgfVxuXG4gICAgZm9yICg7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgaWYgKCFhcmdzW2ldKSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgICAgZm9yICh2YXIga2V5IGluIGFyZ3NbaV0pIHtcbiAgICAgICAgaWYgKGFyZ3NbaV0uaGFzT3duUHJvcGVydHkoa2V5KSkge1xuICAgICAgICAgIHRhcmdldFtrZXldID0gYXJnc1tpXVtrZXldO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIHRhcmdldDtcbiAgfTtcblxuICBmdW5jdGlvbiBlYWNoKGNvbGxlY3Rpb24sIGNhbGxiYWNrKSB7XG4gICAgdmFyIGwgPSBjb2xsZWN0aW9uLmxlbmd0aCxcbiAgICAgICAgaSA9IDA7XG5cbiAgICBmb3IgKDsgaSA8IGw7IGkrKykge1xuICAgICAgaWYgKGNhbGxiYWNrLmNhbGwoY29sbGVjdGlvbltpXSwgY29sbGVjdGlvbltpXSwgaSwgY29sbGVjdGlvbikgPT09IGZhbHNlKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIG1hdGNoZXMoZWwsIHNlbGVjdG9yKSB7XG4gICAgdmFyIG0gPSBlbCAmJiAoZWwubWF0Y2hlcyB8fCBlbC53ZWJraXRNYXRjaGVzU2VsZWN0b3IgfHwgZWwubW96TWF0Y2hlc1NlbGVjdG9yIHx8IGVsLm1zTWF0Y2hlc1NlbGVjdG9yIHx8IGVsLm9NYXRjaGVzU2VsZWN0b3IpO1xuICAgIHJldHVybiAhIW0gJiYgbS5jYWxsKGVsLCBzZWxlY3Rvcik7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRDb21wYXJlRnVuY3Rpb24oc2VsZWN0b3IpIHtcbiAgICByZXR1cm4gKFxuICAgICAgLyogVXNlIGJyb3dzZXIncyBgbWF0Y2hlc2AgZnVuY3Rpb24gaWYgc3RyaW5nICovXG4gICAgICBpc1N0cmluZyhzZWxlY3RvcikgPyBtYXRjaGVzIDpcbiAgICAgIC8qIE1hdGNoIGEgY2FzaCBlbGVtZW50ICovXG4gICAgICBzZWxlY3Rvci5jYXNoID8gZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiBzZWxlY3Rvci5pcyhlbCk7XG4gICAgICB9IDpcbiAgICAgIC8qIERpcmVjdCBjb21wYXJpc29uICovXG4gICAgICBmdW5jdGlvbiAoZWwsIHNlbGVjdG9yKSB7XG4gICAgICAgIHJldHVybiBlbCA9PT0gc2VsZWN0b3I7XG4gICAgICB9XG4gICAgKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHVuaXF1ZShjb2xsZWN0aW9uKSB7XG4gICAgcmV0dXJuIGNhc2goc2xpY2UuY2FsbChjb2xsZWN0aW9uKS5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0sIGluZGV4LCBzZWxmKSB7XG4gICAgICByZXR1cm4gc2VsZi5pbmRleE9mKGl0ZW0pID09PSBpbmRleDtcbiAgICB9KSk7XG4gIH1cblxuICBjYXNoLmV4dGVuZCh7XG4gICAgbWVyZ2U6IGZ1bmN0aW9uIChmaXJzdCwgc2Vjb25kKSB7XG4gICAgICB2YXIgbGVuID0gK3NlY29uZC5sZW5ndGgsXG4gICAgICAgICAgaSA9IGZpcnN0Lmxlbmd0aCxcbiAgICAgICAgICBqID0gMDtcblxuICAgICAgZm9yICg7IGogPCBsZW47IGkrKywgaisrKSB7XG4gICAgICAgIGZpcnN0W2ldID0gc2Vjb25kW2pdO1xuICAgICAgfVxuXG4gICAgICBmaXJzdC5sZW5ndGggPSBpO1xuICAgICAgcmV0dXJuIGZpcnN0O1xuICAgIH0sXG5cbiAgICBlYWNoOiBlYWNoLFxuICAgIG1hdGNoZXM6IG1hdGNoZXMsXG4gICAgdW5pcXVlOiB1bmlxdWUsXG4gICAgaXNBcnJheTogQXJyYXkuaXNBcnJheSxcbiAgICBpc051bWVyaWM6IGZ1bmN0aW9uIChuKSB7XG4gICAgICByZXR1cm4gIWlzTmFOKHBhcnNlRmxvYXQobikpICYmIGlzRmluaXRlKG4pO1xuICAgIH1cblxuICB9KTtcblxuICB2YXIgdWlkID0gY2FzaC51aWQgPSBcIl9jYXNoXCIgKyBEYXRlLm5vdygpO1xuXG4gIGZ1bmN0aW9uIGdldERhdGFDYWNoZShub2RlKSB7XG4gICAgcmV0dXJuIG5vZGVbdWlkXSA9IG5vZGVbdWlkXSB8fCB7fTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNldERhdGEobm9kZSwga2V5LCB2YWx1ZSkge1xuICAgIHJldHVybiBnZXREYXRhQ2FjaGUobm9kZSlba2V5XSA9IHZhbHVlO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0RGF0YShub2RlLCBrZXkpIHtcbiAgICB2YXIgYyA9IGdldERhdGFDYWNoZShub2RlKTtcbiAgICBpZiAoY1trZXldID09PSB1bmRlZmluZWQpIHtcbiAgICAgIGNba2V5XSA9IG5vZGUuZGF0YXNldCA/IG5vZGUuZGF0YXNldFtrZXldIDogY2FzaChub2RlKS5hdHRyKFwiZGF0YS1cIiArIGtleSk7XG4gICAgfVxuICAgIHJldHVybiBjW2tleV07XG4gIH1cblxuICBmdW5jdGlvbiByZW1vdmVEYXRhKG5vZGUsIGtleSkge1xuICAgIHZhciBjID0gZ2V0RGF0YUNhY2hlKG5vZGUpO1xuICAgIGlmIChjKSB7XG4gICAgICBkZWxldGUgY1trZXldO1xuICAgIH0gZWxzZSBpZiAobm9kZS5kYXRhc2V0KSB7XG4gICAgICBkZWxldGUgbm9kZS5kYXRhc2V0W2tleV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNhc2gobm9kZSkucmVtb3ZlQXR0cihcImRhdGEtXCIgKyBuYW1lKTtcbiAgICB9XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIGRhdGE6IGZ1bmN0aW9uIChuYW1lLCB2YWx1ZSkge1xuICAgICAgaWYgKGlzU3RyaW5nKG5hbWUpKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZSA9PT0gdW5kZWZpbmVkID8gZ2V0RGF0YSh0aGlzWzBdLCBuYW1lKSA6IHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgIHJldHVybiBzZXREYXRhKHYsIG5hbWUsIHZhbHVlKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIGZvciAodmFyIGtleSBpbiBuYW1lKSB7XG4gICAgICAgIHRoaXMuZGF0YShrZXksIG5hbWVba2V5XSk7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICByZW1vdmVEYXRhOiBmdW5jdGlvbiAoa2V5KSB7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiByZW1vdmVEYXRhKHYsIGtleSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgdmFyIG5vdFdoaXRlTWF0Y2ggPSAvXFxTKy9nO1xuXG4gIGZ1bmN0aW9uIGdldENsYXNzZXMoYykge1xuICAgIHJldHVybiBpc1N0cmluZyhjKSAmJiBjLm1hdGNoKG5vdFdoaXRlTWF0Y2gpO1xuICB9XG5cbiAgZnVuY3Rpb24gaGFzQ2xhc3ModiwgYykge1xuICAgIHJldHVybiB2LmNsYXNzTGlzdCA/IHYuY2xhc3NMaXN0LmNvbnRhaW5zKGMpIDogbmV3IFJlZ0V4cChcIihefCApXCIgKyBjICsgXCIoIHwkKVwiLCBcImdpXCIpLnRlc3Qodi5jbGFzc05hbWUpO1xuICB9XG5cbiAgZnVuY3Rpb24gYWRkQ2xhc3ModiwgYywgc3BhY2VkTmFtZSkge1xuICAgIGlmICh2LmNsYXNzTGlzdCkge1xuICAgICAgdi5jbGFzc0xpc3QuYWRkKGMpO1xuICAgIH0gZWxzZSBpZiAoc3BhY2VkTmFtZS5pbmRleE9mKFwiIFwiICsgYyArIFwiIFwiKSkge1xuICAgICAgdi5jbGFzc05hbWUgKz0gXCIgXCIgKyBjO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKHYsIGMpIHtcbiAgICBpZiAodi5jbGFzc0xpc3QpIHtcbiAgICAgIHYuY2xhc3NMaXN0LnJlbW92ZShjKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdi5jbGFzc05hbWUgPSB2LmNsYXNzTmFtZS5yZXBsYWNlKGMsIFwiXCIpO1xuICAgIH1cbiAgfVxuXG4gIGZuLmV4dGVuZCh7XG4gICAgYWRkQ2xhc3M6IGZ1bmN0aW9uIChjKSB7XG4gICAgICB2YXIgY2xhc3NlcyA9IGdldENsYXNzZXMoYyk7XG5cbiAgICAgIHJldHVybiBjbGFzc2VzID8gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHZhciBzcGFjZWROYW1lID0gXCIgXCIgKyB2LmNsYXNzTmFtZSArIFwiIFwiO1xuICAgICAgICBlYWNoKGNsYXNzZXMsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgYWRkQ2xhc3ModiwgYywgc3BhY2VkTmFtZSk7XG4gICAgICAgIH0pO1xuICAgICAgfSkgOiB0aGlzO1xuICAgIH0sXG5cbiAgICBhdHRyOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgIGlmICghbmFtZSkge1xuICAgICAgICByZXR1cm4gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICBpZiAoaXNTdHJpbmcobmFtZSkpIHtcbiAgICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICByZXR1cm4gdGhpc1swXSA/IHRoaXNbMF0uZ2V0QXR0cmlidXRlID8gdGhpc1swXS5nZXRBdHRyaWJ1dGUobmFtZSkgOiB0aGlzWzBdW25hbWVdIDogdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgIGlmICh2LnNldEF0dHJpYnV0ZSkge1xuICAgICAgICAgICAgdi5zZXRBdHRyaWJ1dGUobmFtZSwgdmFsdWUpO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2W25hbWVdID0gdmFsdWU7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIga2V5IGluIG5hbWUpIHtcbiAgICAgICAgdGhpcy5hdHRyKGtleSwgbmFtZVtrZXldKTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGhhc0NsYXNzOiBmdW5jdGlvbiAoYykge1xuICAgICAgdmFyIGNoZWNrID0gZmFsc2UsXG4gICAgICAgICAgY2xhc3NlcyA9IGdldENsYXNzZXMoYyk7XG4gICAgICBpZiAoY2xhc3NlcyAmJiBjbGFzc2VzLmxlbmd0aCkge1xuICAgICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBjaGVjayA9IGhhc0NsYXNzKHYsIGNsYXNzZXNbMF0pO1xuICAgICAgICAgIHJldHVybiAhY2hlY2s7XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGNoZWNrO1xuICAgIH0sXG5cbiAgICBwcm9wOiBmdW5jdGlvbiAobmFtZSwgdmFsdWUpIHtcbiAgICAgIGlmIChpc1N0cmluZyhuYW1lKSkge1xuICAgICAgICByZXR1cm4gdmFsdWUgPT09IHVuZGVmaW5lZCA/IHRoaXNbMF1bbmFtZV0gOiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICB2W25hbWVdID0gdmFsdWU7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBmb3IgKHZhciBrZXkgaW4gbmFtZSkge1xuICAgICAgICB0aGlzLnByb3Aoa2V5LCBuYW1lW2tleV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgcmVtb3ZlQXR0cjogZnVuY3Rpb24gKG5hbWUpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKHYucmVtb3ZlQXR0cmlidXRlKSB7XG4gICAgICAgICAgdi5yZW1vdmVBdHRyaWJ1dGUobmFtZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHZbbmFtZV07XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICByZW1vdmVDbGFzczogZnVuY3Rpb24gKGMpIHtcbiAgICAgIGlmICghYXJndW1lbnRzLmxlbmd0aCkge1xuICAgICAgICByZXR1cm4gdGhpcy5hdHRyKFwiY2xhc3NcIiwgXCJcIik7XG4gICAgICB9XG4gICAgICB2YXIgY2xhc3NlcyA9IGdldENsYXNzZXMoYyk7XG4gICAgICByZXR1cm4gY2xhc3NlcyA/IHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICBlYWNoKGNsYXNzZXMsIGZ1bmN0aW9uIChjKSB7XG4gICAgICAgICAgcmVtb3ZlQ2xhc3ModiwgYyk7XG4gICAgICAgIH0pO1xuICAgICAgfSkgOiB0aGlzO1xuICAgIH0sXG5cbiAgICByZW1vdmVQcm9wOiBmdW5jdGlvbiAobmFtZSkge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICBkZWxldGUgdltuYW1lXTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICB0b2dnbGVDbGFzczogZnVuY3Rpb24gKGMsIHN0YXRlKSB7XG4gICAgICBpZiAoc3RhdGUgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gdGhpc1tzdGF0ZSA/IFwiYWRkQ2xhc3NcIiA6IFwicmVtb3ZlQ2xhc3NcIl0oYyk7XG4gICAgICB9XG4gICAgICB2YXIgY2xhc3NlcyA9IGdldENsYXNzZXMoYyk7XG4gICAgICByZXR1cm4gY2xhc3NlcyA/IHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICB2YXIgc3BhY2VkTmFtZSA9IFwiIFwiICsgdi5jbGFzc05hbWUgKyBcIiBcIjtcbiAgICAgICAgZWFjaChjbGFzc2VzLCBmdW5jdGlvbiAoYykge1xuICAgICAgICAgIGlmIChoYXNDbGFzcyh2LCBjKSkge1xuICAgICAgICAgICAgcmVtb3ZlQ2xhc3ModiwgYyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGFkZENsYXNzKHYsIGMsIHNwYWNlZE5hbWUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KSA6IHRoaXM7XG4gICAgfSB9KTtcblxuICBmbi5leHRlbmQoe1xuICAgIGFkZDogZnVuY3Rpb24gKHNlbGVjdG9yLCBjb250ZXh0KSB7XG4gICAgICByZXR1cm4gdW5pcXVlKGNhc2gubWVyZ2UodGhpcywgY2FzaChzZWxlY3RvciwgY29udGV4dCkpKTtcbiAgICB9LFxuXG4gICAgZWFjaDogZnVuY3Rpb24gKGNhbGxiYWNrKSB7XG4gICAgICBlYWNoKHRoaXMsIGNhbGxiYWNrKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBlcTogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICByZXR1cm4gY2FzaCh0aGlzLmdldChpbmRleCkpO1xuICAgIH0sXG5cbiAgICBmaWx0ZXI6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbXBhcmF0b3IgPSBpc0Z1bmN0aW9uKHNlbGVjdG9yKSA/IHNlbGVjdG9yIDogZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKTtcblxuICAgICAgcmV0dXJuIGNhc2goZmlsdGVyLmNhbGwodGhpcywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgcmV0dXJuIGNvbXBhcmF0b3IoZSwgc2VsZWN0b3IpO1xuICAgICAgfSkpO1xuICAgIH0sXG5cbiAgICBmaXJzdDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXEoMCk7XG4gICAgfSxcblxuICAgIGdldDogZnVuY3Rpb24gKGluZGV4KSB7XG4gICAgICBpZiAoaW5kZXggPT09IHVuZGVmaW5lZCkge1xuICAgICAgICByZXR1cm4gc2xpY2UuY2FsbCh0aGlzKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBpbmRleCA8IDAgPyB0aGlzW2luZGV4ICsgdGhpcy5sZW5ndGhdIDogdGhpc1tpbmRleF07XG4gICAgfSxcblxuICAgIGluZGV4OiBmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgdmFyIGNoaWxkID0gZWxlbSA/IGNhc2goZWxlbSlbMF0gOiB0aGlzWzBdLFxuICAgICAgICAgIGNvbGxlY3Rpb24gPSBlbGVtID8gdGhpcyA6IGNhc2goY2hpbGQpLnBhcmVudCgpLmNoaWxkcmVuKCk7XG4gICAgICByZXR1cm4gc2xpY2UuY2FsbChjb2xsZWN0aW9uKS5pbmRleE9mKGNoaWxkKTtcbiAgICB9LFxuXG4gICAgbGFzdDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXMuZXEoLTEpO1xuICAgIH1cblxuICB9KTtcblxuICB2YXIgY2FtZWxDYXNlID0gZnVuY3Rpb24gKCkge1xuICAgIHZhciBjYW1lbFJlZ2V4ID0gLyg/Ol5cXHd8W0EtWl18XFxiXFx3KS9nLFxuICAgICAgICB3aGl0ZVNwYWNlID0gL1tcXHMtX10rL2c7XG4gICAgcmV0dXJuIGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgIHJldHVybiBzdHIucmVwbGFjZShjYW1lbFJlZ2V4LCBmdW5jdGlvbiAobGV0dGVyLCBpbmRleCkge1xuICAgICAgICByZXR1cm4gbGV0dGVyW2luZGV4ID09PSAwID8gXCJ0b0xvd2VyQ2FzZVwiIDogXCJ0b1VwcGVyQ2FzZVwiXSgpO1xuICAgICAgfSkucmVwbGFjZSh3aGl0ZVNwYWNlLCBcIlwiKTtcbiAgICB9O1xuICB9KCk7XG5cbiAgdmFyIGdldFByZWZpeGVkUHJvcCA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgY2FjaGUgPSB7fSxcbiAgICAgICAgZG9jID0gZG9jdW1lbnQsXG4gICAgICAgIGRpdiA9IGRvYy5jcmVhdGVFbGVtZW50KFwiZGl2XCIpLFxuICAgICAgICBzdHlsZSA9IGRpdi5zdHlsZTtcblxuICAgIHJldHVybiBmdW5jdGlvbiAocHJvcCkge1xuICAgICAgcHJvcCA9IGNhbWVsQ2FzZShwcm9wKTtcbiAgICAgIGlmIChjYWNoZVtwcm9wXSkge1xuICAgICAgICByZXR1cm4gY2FjaGVbcHJvcF07XG4gICAgICB9XG5cbiAgICAgIHZhciB1Y1Byb3AgPSBwcm9wLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgcHJvcC5zbGljZSgxKSxcbiAgICAgICAgICBwcmVmaXhlcyA9IFtcIndlYmtpdFwiLCBcIm1velwiLCBcIm1zXCIsIFwib1wiXSxcbiAgICAgICAgICBwcm9wcyA9IChwcm9wICsgXCIgXCIgKyBwcmVmaXhlcy5qb2luKHVjUHJvcCArIFwiIFwiKSArIHVjUHJvcCkuc3BsaXQoXCIgXCIpO1xuXG4gICAgICBlYWNoKHByb3BzLCBmdW5jdGlvbiAocCkge1xuICAgICAgICBpZiAocCBpbiBzdHlsZSkge1xuICAgICAgICAgIGNhY2hlW3BdID0gcHJvcCA9IGNhY2hlW3Byb3BdID0gcDtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gY2FjaGVbcHJvcF07XG4gICAgfTtcbiAgfSgpO1xuXG4gIGNhc2gucHJlZml4ZWRQcm9wID0gZ2V0UHJlZml4ZWRQcm9wO1xuICBjYXNoLmNhbWVsQ2FzZSA9IGNhbWVsQ2FzZTtcblxuICBmbi5leHRlbmQoe1xuICAgIGNzczogZnVuY3Rpb24gKHByb3AsIHZhbHVlKSB7XG4gICAgICBpZiAoaXNTdHJpbmcocHJvcCkpIHtcbiAgICAgICAgcHJvcCA9IGdldFByZWZpeGVkUHJvcChwcm9wKTtcbiAgICAgICAgcmV0dXJuIGFyZ3VtZW50cy5sZW5ndGggPiAxID8gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcmV0dXJuIHYuc3R5bGVbcHJvcF0gPSB2YWx1ZTtcbiAgICAgICAgfSkgOiB3aW4uZ2V0Q29tcHV0ZWRTdHlsZSh0aGlzWzBdKVtwcm9wXTtcbiAgICAgIH1cblxuICAgICAgZm9yICh2YXIga2V5IGluIHByb3ApIHtcbiAgICAgICAgdGhpcy5jc3Moa2V5LCBwcm9wW2tleV0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgfSk7XG5cbiAgZnVuY3Rpb24gY29tcHV0ZShlbCwgcHJvcCkge1xuICAgIHJldHVybiBwYXJzZUludCh3aW4uZ2V0Q29tcHV0ZWRTdHlsZShlbFswXSwgbnVsbClbcHJvcF0sIDEwKSB8fCAwO1xuICB9XG5cbiAgZWFjaChbXCJXaWR0aFwiLCBcIkhlaWdodFwiXSwgZnVuY3Rpb24gKHYpIHtcbiAgICB2YXIgbG93ZXIgPSB2LnRvTG93ZXJDYXNlKCk7XG5cbiAgICBmbltsb3dlcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gdGhpc1swXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVtsb3dlcl07XG4gICAgfTtcblxuICAgIGZuW1wiaW5uZXJcIiArIHZdID0gZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIHRoaXNbMF1bXCJjbGllbnRcIiArIHZdO1xuICAgIH07XG5cbiAgICBmbltcIm91dGVyXCIgKyB2XSA9IGZ1bmN0aW9uIChtYXJnaW5zKSB7XG4gICAgICByZXR1cm4gdGhpc1swXVtcIm9mZnNldFwiICsgdl0gKyAobWFyZ2lucyA/IGNvbXB1dGUodGhpcywgXCJtYXJnaW5cIiArICh2ID09PSBcIldpZHRoXCIgPyBcIkxlZnRcIiA6IFwiVG9wXCIpKSArIGNvbXB1dGUodGhpcywgXCJtYXJnaW5cIiArICh2ID09PSBcIldpZHRoXCIgPyBcIlJpZ2h0XCIgOiBcIkJvdHRvbVwiKSkgOiAwKTtcbiAgICB9O1xuICB9KTtcblxuICBmdW5jdGlvbiByZWdpc3RlckV2ZW50KG5vZGUsIGV2ZW50TmFtZSwgY2FsbGJhY2spIHtcbiAgICB2YXIgZXZlbnRDYWNoZSA9IGdldERhdGEobm9kZSwgXCJfY2FzaEV2ZW50c1wiKSB8fCBzZXREYXRhKG5vZGUsIFwiX2Nhc2hFdmVudHNcIiwge30pO1xuICAgIGV2ZW50Q2FjaGVbZXZlbnROYW1lXSA9IGV2ZW50Q2FjaGVbZXZlbnROYW1lXSB8fCBbXTtcbiAgICBldmVudENhY2hlW2V2ZW50TmFtZV0ucHVzaChjYWxsYmFjayk7XG4gICAgbm9kZS5hZGRFdmVudExpc3RlbmVyKGV2ZW50TmFtZSwgY2FsbGJhY2spO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVtb3ZlRXZlbnQobm9kZSwgZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgIHZhciBldmVudHMgPSBnZXREYXRhKG5vZGUsIFwiX2Nhc2hFdmVudHNcIiksXG4gICAgICAgIGV2ZW50Q2FjaGUgPSBldmVudHMgJiYgZXZlbnRzW2V2ZW50TmFtZV0sXG4gICAgICAgIGluZGV4O1xuXG4gICAgaWYgKCFldmVudENhY2hlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGNhbGxiYWNrKSB7XG4gICAgICBub2RlLnJlbW92ZUV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBjYWxsYmFjayk7XG4gICAgICBpbmRleCA9IGV2ZW50Q2FjaGUuaW5kZXhPZihjYWxsYmFjayk7XG4gICAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBldmVudENhY2hlLnNwbGljZShpbmRleCwgMSk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGVhY2goZXZlbnRDYWNoZSwgZnVuY3Rpb24gKGV2ZW50KSB7XG4gICAgICAgIG5vZGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihldmVudE5hbWUsIGV2ZW50KTtcbiAgICAgIH0pO1xuICAgICAgZXZlbnRDYWNoZSA9IFtdO1xuICAgIH1cbiAgfVxuXG4gIGZuLmV4dGVuZCh7XG4gICAgb2ZmOiBmdW5jdGlvbiAoZXZlbnROYW1lLCBjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gcmVtb3ZlRXZlbnQodiwgZXZlbnROYW1lLCBjYWxsYmFjayk7XG4gICAgICB9KTtcbiAgICB9LFxuXG4gICAgb246IGZ1bmN0aW9uIChldmVudE5hbWUsIGRlbGVnYXRlLCBjYWxsYmFjaywgcnVuT25jZSkge1xuICAgICAgLy8ganNoaW50IGlnbm9yZTpsaW5lXG4gICAgICB2YXIgb3JpZ2luYWxDYWxsYmFjaztcbiAgICAgIGlmICghaXNTdHJpbmcoZXZlbnROYW1lKSkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gZXZlbnROYW1lKSB7XG4gICAgICAgICAgdGhpcy5vbihrZXksIGRlbGVnYXRlLCBldmVudE5hbWVba2V5XSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc0Z1bmN0aW9uKGRlbGVnYXRlKSkge1xuICAgICAgICBjYWxsYmFjayA9IGRlbGVnYXRlO1xuICAgICAgICBkZWxlZ2F0ZSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIGlmIChldmVudE5hbWUgPT09IFwicmVhZHlcIikge1xuICAgICAgICBvblJlYWR5KGNhbGxiYWNrKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG5cbiAgICAgIGlmIChkZWxlZ2F0ZSkge1xuICAgICAgICBvcmlnaW5hbENhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIGNhbGxiYWNrID0gZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICB2YXIgdCA9IGUudGFyZ2V0O1xuICAgICAgICAgIHdoaWxlICghbWF0Y2hlcyh0LCBkZWxlZ2F0ZSkpIHtcbiAgICAgICAgICAgIGlmICh0ID09PSB0aGlzIHx8IHQgPT09IG51bGwpIHtcbiAgICAgICAgICAgICAgcmV0dXJuIHQgPSBmYWxzZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdCA9IHQucGFyZW50Tm9kZTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAodCkge1xuICAgICAgICAgICAgb3JpZ2luYWxDYWxsYmFjay5jYWxsKHQsIGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICB2YXIgZmluYWxDYWxsYmFjayA9IGNhbGxiYWNrO1xuICAgICAgICBpZiAocnVuT25jZSkge1xuICAgICAgICAgIGZpbmFsQ2FsbGJhY2sgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjYWxsYmFjay5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgcmVtb3ZlRXZlbnQodiwgZXZlbnROYW1lLCBmaW5hbENhbGxiYWNrKTtcbiAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIHJlZ2lzdGVyRXZlbnQodiwgZXZlbnROYW1lLCBmaW5hbENhbGxiYWNrKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBvbmU6IGZ1bmN0aW9uIChldmVudE5hbWUsIGRlbGVnYXRlLCBjYWxsYmFjaykge1xuICAgICAgcmV0dXJuIHRoaXMub24oZXZlbnROYW1lLCBkZWxlZ2F0ZSwgY2FsbGJhY2ssIHRydWUpO1xuICAgIH0sXG5cbiAgICByZWFkeTogb25SZWFkeSxcblxuICAgIC8qKlxuICAgICAqIE1vZGlmaWVkXG4gICAgICogVHJpZ2dlcnMgYnJvd3NlciBldmVudFxuICAgICAqIEBwYXJhbSBTdHJpbmcgZXZlbnROYW1lXG4gICAgICogQHBhcmFtIE9iamVjdCBkYXRhIC0gQWRkIHByb3BlcnRpZXMgdG8gZXZlbnQgb2JqZWN0XG4gICAgICovXG4gICAgdHJpZ2dlcjogZnVuY3Rpb24gKGV2ZW50TmFtZSwgZGF0YSkge1xuICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50KSB7XG4gICAgICAgIHZhciBldnQgPSBkb2N1bWVudC5jcmVhdGVFdmVudCgnSFRNTEV2ZW50cycpO1xuICAgICAgICBldnQuaW5pdEV2ZW50KGV2ZW50TmFtZSwgdHJ1ZSwgZmFsc2UpO1xuICAgICAgICBldnQgPSB0aGlzLmV4dGVuZChldnQsIGRhdGEpO1xuICAgICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgICAgcmV0dXJuIHYuZGlzcGF0Y2hFdmVudChldnQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgfSk7XG5cbiAgZnVuY3Rpb24gZW5jb2RlKG5hbWUsIHZhbHVlKSB7XG4gICAgcmV0dXJuIFwiJlwiICsgZW5jb2RlVVJJQ29tcG9uZW50KG5hbWUpICsgXCI9XCIgKyBlbmNvZGVVUklDb21wb25lbnQodmFsdWUpLnJlcGxhY2UoLyUyMC9nLCBcIitcIik7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRTZWxlY3RNdWx0aXBsZV8oZWwpIHtcbiAgICB2YXIgdmFsdWVzID0gW107XG4gICAgZWFjaChlbC5vcHRpb25zLCBmdW5jdGlvbiAobykge1xuICAgICAgaWYgKG8uc2VsZWN0ZWQpIHtcbiAgICAgICAgdmFsdWVzLnB1c2goby52YWx1ZSk7XG4gICAgICB9XG4gICAgfSk7XG4gICAgcmV0dXJuIHZhbHVlcy5sZW5ndGggPyB2YWx1ZXMgOiBudWxsO1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0U2VsZWN0U2luZ2xlXyhlbCkge1xuICAgIHZhciBzZWxlY3RlZEluZGV4ID0gZWwuc2VsZWN0ZWRJbmRleDtcbiAgICByZXR1cm4gc2VsZWN0ZWRJbmRleCA+PSAwID8gZWwub3B0aW9uc1tzZWxlY3RlZEluZGV4XS52YWx1ZSA6IG51bGw7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRWYWx1ZShlbCkge1xuICAgIHZhciB0eXBlID0gZWwudHlwZTtcbiAgICBpZiAoIXR5cGUpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICBzd2l0Y2ggKHR5cGUudG9Mb3dlckNhc2UoKSkge1xuICAgICAgY2FzZSBcInNlbGVjdC1vbmVcIjpcbiAgICAgICAgcmV0dXJuIGdldFNlbGVjdFNpbmdsZV8oZWwpO1xuICAgICAgY2FzZSBcInNlbGVjdC1tdWx0aXBsZVwiOlxuICAgICAgICByZXR1cm4gZ2V0U2VsZWN0TXVsdGlwbGVfKGVsKTtcbiAgICAgIGNhc2UgXCJyYWRpb1wiOlxuICAgICAgICByZXR1cm4gZWwuY2hlY2tlZCA/IGVsLnZhbHVlIDogbnVsbDtcbiAgICAgIGNhc2UgXCJjaGVja2JveFwiOlxuICAgICAgICByZXR1cm4gZWwuY2hlY2tlZCA/IGVsLnZhbHVlIDogbnVsbDtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBlbC52YWx1ZSA/IGVsLnZhbHVlIDogbnVsbDtcbiAgICB9XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIHNlcmlhbGl6ZTogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHF1ZXJ5ID0gXCJcIjtcblxuICAgICAgZWFjaCh0aGlzWzBdLmVsZW1lbnRzIHx8IHRoaXMsIGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBpZiAoZWwuZGlzYWJsZWQgfHwgZWwudGFnTmFtZSA9PT0gXCJGSUVMRFNFVFwiKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuYW1lID0gZWwubmFtZTtcbiAgICAgICAgc3dpdGNoIChlbC50eXBlLnRvTG93ZXJDYXNlKCkpIHtcbiAgICAgICAgICBjYXNlIFwiZmlsZVwiOlxuICAgICAgICAgIGNhc2UgXCJyZXNldFwiOlxuICAgICAgICAgIGNhc2UgXCJzdWJtaXRcIjpcbiAgICAgICAgICBjYXNlIFwiYnV0dG9uXCI6XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBjYXNlIFwic2VsZWN0LW11bHRpcGxlXCI6XG4gICAgICAgICAgICB2YXIgdmFsdWVzID0gZ2V0VmFsdWUoZWwpO1xuICAgICAgICAgICAgaWYgKHZhbHVlcyAhPT0gbnVsbCkge1xuICAgICAgICAgICAgICBlYWNoKHZhbHVlcywgZnVuY3Rpb24gKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkgKz0gZW5jb2RlKG5hbWUsIHZhbHVlKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgdmFyIHZhbHVlID0gZ2V0VmFsdWUoZWwpO1xuICAgICAgICAgICAgaWYgKHZhbHVlICE9PSBudWxsKSB7XG4gICAgICAgICAgICAgIHF1ZXJ5ICs9IGVuY29kZShuYW1lLCB2YWx1ZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gcXVlcnkuc3Vic3RyKDEpO1xuICAgIH0sXG5cbiAgICB2YWw6IGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIGdldFZhbHVlKHRoaXNbMF0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB2LnZhbHVlID0gdmFsdWU7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgZnVuY3Rpb24gaW5zZXJ0RWxlbWVudChlbCwgY2hpbGQsIHByZXBlbmQpIHtcbiAgICBpZiAocHJlcGVuZCkge1xuICAgICAgdmFyIGZpcnN0ID0gZWwuY2hpbGROb2Rlc1swXTtcbiAgICAgIGVsLmluc2VydEJlZm9yZShjaGlsZCwgZmlyc3QpO1xuICAgIH0gZWxzZSB7XG4gICAgICBlbC5hcHBlbmRDaGlsZChjaGlsZCk7XG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gaW5zZXJ0Q29udGVudChwYXJlbnQsIGNoaWxkLCBwcmVwZW5kKSB7XG4gICAgdmFyIHN0ciA9IGlzU3RyaW5nKGNoaWxkKTtcblxuICAgIGlmICghc3RyICYmIGNoaWxkLmxlbmd0aCkge1xuICAgICAgZWFjaChjaGlsZCwgZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIGluc2VydENvbnRlbnQocGFyZW50LCB2LCBwcmVwZW5kKTtcbiAgICAgIH0pO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGVhY2gocGFyZW50LCBzdHIgPyBmdW5jdGlvbiAodikge1xuICAgICAgcmV0dXJuIHYuaW5zZXJ0QWRqYWNlbnRIVE1MKHByZXBlbmQgPyBcImFmdGVyYmVnaW5cIiA6IFwiYmVmb3JlZW5kXCIsIGNoaWxkKTtcbiAgICB9IDogZnVuY3Rpb24gKHYsIGkpIHtcbiAgICAgIHJldHVybiBpbnNlcnRFbGVtZW50KHYsIGkgPT09IDAgPyBjaGlsZCA6IGNoaWxkLmNsb25lTm9kZSh0cnVlKSwgcHJlcGVuZCk7XG4gICAgfSk7XG4gIH1cblxuICBmbi5leHRlbmQoe1xuICAgIGFmdGVyOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGNhc2goc2VsZWN0b3IpLmluc2VydEFmdGVyKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGFwcGVuZDogZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgIGluc2VydENvbnRlbnQodGhpcywgY29udGVudCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgYXBwZW5kVG86IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgIGluc2VydENvbnRlbnQoY2FzaChwYXJlbnQpLCB0aGlzKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBiZWZvcmU6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgY2FzaChzZWxlY3RvcikuaW5zZXJ0QmVmb3JlKHRoaXMpO1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfSxcblxuICAgIGNsb25lOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2FzaCh0aGlzLm1hcChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdi5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgICB9KSk7XG4gICAgfSxcblxuICAgIGVtcHR5OiBmdW5jdGlvbiAoKSB7XG4gICAgICB0aGlzLmh0bWwoXCJcIik7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuXG4gICAgaHRtbDogZnVuY3Rpb24gKGNvbnRlbnQpIHtcbiAgICAgIGlmIChjb250ZW50ID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXNbMF0uaW5uZXJIVE1MO1xuICAgICAgfVxuICAgICAgdmFyIHNvdXJjZSA9IGNvbnRlbnQubm9kZVR5cGUgPyBjb250ZW50WzBdLm91dGVySFRNTCA6IGNvbnRlbnQ7XG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICh2KSB7XG4gICAgICAgIHJldHVybiB2LmlubmVySFRNTCA9IHNvdXJjZTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBpbnNlcnRBZnRlcjogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgICBjYXNoKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZSxcbiAgICAgICAgICAgIHNpYmxpbmcgPSBlbC5uZXh0U2libGluZztcbiAgICAgICAgX3RoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICAgIHBhcmVudC5pbnNlcnRCZWZvcmUoaSA9PT0gMCA/IHYgOiB2LmNsb25lTm9kZSh0cnVlKSwgc2libGluZyk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBpbnNlcnRCZWZvcmU6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIF90aGlzMiA9IHRoaXM7XG4gICAgICBjYXNoKHNlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkge1xuICAgICAgICB2YXIgcGFyZW50ID0gZWwucGFyZW50Tm9kZTtcbiAgICAgICAgX3RoaXMyLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgICBwYXJlbnQuaW5zZXJ0QmVmb3JlKGkgPT09IDAgPyB2IDogdi5jbG9uZU5vZGUodHJ1ZSksIGVsKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBwcmVwZW5kOiBmdW5jdGlvbiAoY29udGVudCkge1xuICAgICAgaW5zZXJ0Q29udGVudCh0aGlzLCBjb250ZW50LCB0cnVlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICBwcmVwZW5kVG86IGZ1bmN0aW9uIChwYXJlbnQpIHtcbiAgICAgIGluc2VydENvbnRlbnQoY2FzaChwYXJlbnQpLCB0aGlzLCB0cnVlKTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG5cbiAgICByZW1vdmU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiB0aGlzLmVhY2goZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgaWYgKCEhdi5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgcmV0dXJuIHYucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh2KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHRleHQ6IGZ1bmN0aW9uIChjb250ZW50KSB7XG4gICAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgIHJldHVybiB0aGlzWzBdLnRleHRDb250ZW50O1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMuZWFjaChmdW5jdGlvbiAodikge1xuICAgICAgICByZXR1cm4gdi50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgdmFyIGRvY0VsID0gZG9jLmRvY3VtZW50RWxlbWVudDtcblxuICBmbi5leHRlbmQoe1xuICAgIHBvc2l0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgZWwgPSB0aGlzWzBdO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVmdDogZWwub2Zmc2V0TGVmdCxcbiAgICAgICAgdG9wOiBlbC5vZmZzZXRUb3BcbiAgICAgIH07XG4gICAgfSxcblxuICAgIG9mZnNldDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlY3QgPSB0aGlzWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgdG9wOiByZWN0LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsLmNsaWVudFRvcCxcbiAgICAgICAgbGVmdDogcmVjdC5sZWZ0ICsgd2luLnBhZ2VYT2Zmc2V0IC0gZG9jRWwuY2xpZW50TGVmdFxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgb2Zmc2V0UGFyZW50OiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gY2FzaCh0aGlzWzBdLm9mZnNldFBhcmVudCk7XG4gICAgfVxuXG4gIH0pO1xuXG4gIGZuLmV4dGVuZCh7XG4gICAgY2hpbGRyZW46IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIGVsZW1zID0gW107XG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHB1c2guYXBwbHkoZWxlbXMsIGVsLmNoaWxkcmVuKTtcbiAgICAgIH0pO1xuICAgICAgZWxlbXMgPSB1bmlxdWUoZWxlbXMpO1xuXG4gICAgICByZXR1cm4gIXNlbGVjdG9yID8gZWxlbXMgOiBlbGVtcy5maWx0ZXIoZnVuY3Rpb24gKHYpIHtcbiAgICAgICAgcmV0dXJuIG1hdGNoZXModiwgc2VsZWN0b3IpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNsb3Nlc3Q6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgaWYgKCFzZWxlY3RvciB8fCB0aGlzLmxlbmd0aCA8IDEpIHtcbiAgICAgICAgcmV0dXJuIGNhc2goKTtcbiAgICAgIH1cbiAgICAgIGlmICh0aGlzLmlzKHNlbGVjdG9yKSkge1xuICAgICAgICByZXR1cm4gdGhpcy5maWx0ZXIoc2VsZWN0b3IpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRoaXMucGFyZW50KCkuY2xvc2VzdChzZWxlY3Rvcik7XG4gICAgfSxcblxuICAgIGlzOiBmdW5jdGlvbiAoc2VsZWN0b3IpIHtcbiAgICAgIGlmICghc2VsZWN0b3IpIHtcbiAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuXG4gICAgICB2YXIgbWF0Y2ggPSBmYWxzZSxcbiAgICAgICAgICBjb21wYXJhdG9yID0gZ2V0Q29tcGFyZUZ1bmN0aW9uKHNlbGVjdG9yKTtcblxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBtYXRjaCA9IGNvbXBhcmF0b3IoZWwsIHNlbGVjdG9yKTtcbiAgICAgICAgcmV0dXJuICFtYXRjaDtcbiAgICAgIH0pO1xuXG4gICAgICByZXR1cm4gbWF0Y2g7XG4gICAgfSxcblxuICAgIGZpbmQ6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgaWYgKCFzZWxlY3RvciB8fCBzZWxlY3Rvci5ub2RlVHlwZSkge1xuICAgICAgICByZXR1cm4gY2FzaChzZWxlY3RvciAmJiB0aGlzLmhhcyhzZWxlY3RvcikubGVuZ3RoID8gc2VsZWN0b3IgOiBudWxsKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGVsZW1zID0gW107XG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHB1c2guYXBwbHkoZWxlbXMsIGZpbmQoc2VsZWN0b3IsIGVsKSk7XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHVuaXF1ZShlbGVtcyk7XG4gICAgfSxcblxuICAgIGhhczogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICB2YXIgY29tcGFyYXRvciA9IGlzU3RyaW5nKHNlbGVjdG9yKSA/IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICByZXR1cm4gZmluZChzZWxlY3RvciwgZWwpLmxlbmd0aCAhPT0gMDtcbiAgICAgIH0gOiBmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgcmV0dXJuIGVsLmNvbnRhaW5zKHNlbGVjdG9yKTtcbiAgICAgIH07XG5cbiAgICAgIHJldHVybiB0aGlzLmZpbHRlcihjb21wYXJhdG9yKTtcbiAgICB9LFxuXG4gICAgbmV4dDogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNhc2godGhpc1swXS5uZXh0RWxlbWVudFNpYmxpbmcpO1xuICAgIH0sXG5cbiAgICBub3Q6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgaWYgKCFzZWxlY3Rvcikge1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgdmFyIGNvbXBhcmF0b3IgPSBnZXRDb21wYXJlRnVuY3Rpb24oc2VsZWN0b3IpO1xuXG4gICAgICByZXR1cm4gdGhpcy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIHJldHVybiAhY29tcGFyYXRvcihlbCwgc2VsZWN0b3IpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIHBhcmVudDogZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gICAgICB0aGlzLmVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcbiAgICAgICAgaWYgKGl0ZW0gJiYgaXRlbS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgcmVzdWx0LnB1c2goaXRlbS5wYXJlbnROb2RlKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB1bmlxdWUocmVzdWx0KTtcbiAgICB9LFxuXG4gICAgcGFyZW50czogZnVuY3Rpb24gKHNlbGVjdG9yKSB7XG4gICAgICB2YXIgbGFzdCxcbiAgICAgICAgICByZXN1bHQgPSBbXTtcblxuICAgICAgdGhpcy5lYWNoKGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgIGxhc3QgPSBpdGVtO1xuXG4gICAgICAgIHdoaWxlIChsYXN0ICYmIGxhc3QucGFyZW50Tm9kZSAmJiBsYXN0ICE9PSBkb2MuYm9keS5wYXJlbnROb2RlKSB7XG4gICAgICAgICAgbGFzdCA9IGxhc3QucGFyZW50Tm9kZTtcblxuICAgICAgICAgIGlmICghc2VsZWN0b3IgfHwgc2VsZWN0b3IgJiYgbWF0Y2hlcyhsYXN0LCBzZWxlY3RvcikpIHtcbiAgICAgICAgICAgIHJlc3VsdC5wdXNoKGxhc3QpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiB1bmlxdWUocmVzdWx0KTtcbiAgICB9LFxuXG4gICAgcHJldjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIGNhc2godGhpc1swXS5wcmV2aW91c0VsZW1lbnRTaWJsaW5nKTtcbiAgICB9LFxuXG4gICAgc2libGluZ3M6IGZ1bmN0aW9uIChzZWxlY3Rvcikge1xuICAgICAgdmFyIGNvbGxlY3Rpb24gPSB0aGlzLnBhcmVudCgpLmNoaWxkcmVuKHNlbGVjdG9yKSxcbiAgICAgICAgICBlbCA9IHRoaXNbMF07XG5cbiAgICAgIHJldHVybiBjb2xsZWN0aW9uLmZpbHRlcihmdW5jdGlvbiAoaSkge1xuICAgICAgICByZXR1cm4gaSAhPT0gZWw7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgfSk7XG5cbiAgcmV0dXJuIGNhc2g7XG59KTtcbjtcbnZhciBDb21wb25lbnQgPSBmdW5jdGlvbiAoKSB7XG4gIC8qKlxuICAgKiBHZW5lcmljIGNvbnN0cnVjdG9yIGZvciBhbGwgY29tcG9uZW50c1xuICAgKiBAY29uc3RydWN0b3JcbiAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgKi9cbiAgZnVuY3Rpb24gQ29tcG9uZW50KGNsYXNzRGVmLCBlbCwgb3B0aW9ucykge1xuICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBDb21wb25lbnQpO1xuXG4gICAgLy8gRGlzcGxheSBlcnJvciBpZiBlbCBpcyB2YWxpZCBIVE1MIEVsZW1lbnRcbiAgICBpZiAoIShlbCBpbnN0YW5jZW9mIEVsZW1lbnQpKSB7XG4gICAgICBjb25zb2xlLmVycm9yKEVycm9yKGVsICsgJyBpcyBub3QgYW4gSFRNTCBFbGVtZW50JykpO1xuICAgIH1cblxuICAgIC8vIElmIGV4aXN0cywgZGVzdHJveSBhbmQgcmVpbml0aWFsaXplIGluIGNoaWxkXG4gICAgdmFyIGlucyA9IGNsYXNzRGVmLmdldEluc3RhbmNlKGVsKTtcbiAgICBpZiAoISFpbnMpIHtcbiAgICAgIGlucy5kZXN0cm95KCk7XG4gICAgfVxuXG4gICAgdGhpcy5lbCA9IGVsO1xuICAgIHRoaXMuJGVsID0gY2FzaChlbCk7XG4gIH1cblxuICAvKipcbiAgICogSW5pdGlhbGl6ZXMgY29tcG9uZW50c1xuICAgKiBAcGFyYW0ge2NsYXNzfSBjbGFzc0RlZlxuICAgKiBAcGFyYW0ge0VsZW1lbnQgfCBOb2RlTGlzdCB8IGpRdWVyeX0gZWxzXG4gICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAqL1xuXG5cbiAgX2NyZWF0ZUNsYXNzKENvbXBvbmVudCwgbnVsbCwgW3tcbiAgICBrZXk6IFwiaW5pdFwiLFxuICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGNsYXNzRGVmLCBlbHMsIG9wdGlvbnMpIHtcbiAgICAgIHZhciBpbnN0YW5jZXMgPSBudWxsO1xuICAgICAgaWYgKGVscyBpbnN0YW5jZW9mIEVsZW1lbnQpIHtcbiAgICAgICAgaW5zdGFuY2VzID0gbmV3IGNsYXNzRGVmKGVscywgb3B0aW9ucyk7XG4gICAgICB9IGVsc2UgaWYgKCEhZWxzICYmIChlbHMuanF1ZXJ5IHx8IGVscy5jYXNoIHx8IGVscyBpbnN0YW5jZW9mIE5vZGVMaXN0KSkge1xuICAgICAgICB2YXIgaW5zdGFuY2VzQXJyID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgaW5zdGFuY2VzQXJyLnB1c2gobmV3IGNsYXNzRGVmKGVsc1tpXSwgb3B0aW9ucykpO1xuICAgICAgICB9XG4gICAgICAgIGluc3RhbmNlcyA9IGluc3RhbmNlc0FycjtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGluc3RhbmNlcztcbiAgICB9XG4gIH1dKTtcblxuICByZXR1cm4gQ29tcG9uZW50O1xufSgpO1xuXG47IC8vIFJlcXVpcmVkIGZvciBNZXRlb3IgcGFja2FnZSwgdGhlIHVzZSBvZiB3aW5kb3cgcHJldmVudHMgZXhwb3J0IGJ5IE1ldGVvclxuKGZ1bmN0aW9uICh3aW5kb3cpIHtcbiAgaWYgKHdpbmRvdy5QYWNrYWdlKSB7XG4gICAgTSA9IHt9O1xuICB9IGVsc2Uge1xuICAgIHdpbmRvdy5NID0ge307XG4gIH1cblxuICAvLyBDaGVjayBmb3IgalF1ZXJ5XG4gIE0ualF1ZXJ5TG9hZGVkID0gISF3aW5kb3cualF1ZXJ5O1xufSkod2luZG93KTtcblxuLy8gQU1EXG5pZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKSB7XG4gIGRlZmluZSgnTScsIFtdLCBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIE07XG4gIH0pO1xuXG4gIC8vIENvbW1vbiBKU1xufSBlbHNlIGlmICh0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgJiYgIWV4cG9ydHMubm9kZVR5cGUpIHtcbiAgaWYgKHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmICFtb2R1bGUubm9kZVR5cGUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBNO1xuICB9XG4gIGV4cG9ydHMuZGVmYXVsdCA9IE07XG59XG5cbk0udmVyc2lvbiA9ICcxLjAuMCc7XG5cbk0ua2V5cyA9IHtcbiAgVEFCOiA5LFxuICBFTlRFUjogMTMsXG4gIEVTQzogMjcsXG4gIEFSUk9XX1VQOiAzOCxcbiAgQVJST1dfRE9XTjogNDBcbn07XG5cbi8qKlxuICogVGFiUHJlc3MgS2V5ZG93biBoYW5kbGVyXG4gKi9cbk0udGFiUHJlc3NlZCA9IGZhbHNlO1xuTS5rZXlEb3duID0gZmFsc2U7XG52YXIgZG9jSGFuZGxlS2V5ZG93biA9IGZ1bmN0aW9uIChlKSB7XG4gIE0ua2V5RG93biA9IHRydWU7XG4gIGlmIChlLndoaWNoID09PSBNLmtleXMuVEFCIHx8IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19ET1dOIHx8IGUud2hpY2ggPT09IE0ua2V5cy5BUlJPV19VUCkge1xuICAgIE0udGFiUHJlc3NlZCA9IHRydWU7XG4gIH1cbn07XG52YXIgZG9jSGFuZGxlS2V5dXAgPSBmdW5jdGlvbiAoZSkge1xuICBNLmtleURvd24gPSBmYWxzZTtcbiAgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5UQUIgfHwgZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX0RPV04gfHwgZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX1VQKSB7XG4gICAgTS50YWJQcmVzc2VkID0gZmFsc2U7XG4gIH1cbn07XG52YXIgZG9jSGFuZGxlRm9jdXMgPSBmdW5jdGlvbiAoZSkge1xuICBpZiAoTS5rZXlEb3duKSB7XG4gICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKCdrZXlib2FyZC1mb2N1c2VkJyk7XG4gIH1cbn07XG52YXIgZG9jSGFuZGxlQmx1ciA9IGZ1bmN0aW9uIChlKSB7XG4gIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnJlbW92ZSgna2V5Ym9hcmQtZm9jdXNlZCcpO1xufTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBkb2NIYW5kbGVLZXlkb3duLCB0cnVlKTtcbmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgZG9jSGFuZGxlS2V5dXAsIHRydWUpO1xuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCBkb2NIYW5kbGVGb2N1cywgdHJ1ZSk7XG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdibHVyJywgZG9jSGFuZGxlQmx1ciwgdHJ1ZSk7XG5cbi8qKlxuICogSW5pdGlhbGl6ZSBqUXVlcnkgd3JhcHBlciBmb3IgcGx1Z2luXG4gKiBAcGFyYW0ge0NsYXNzfSBwbHVnaW4gIGphdmFzY3JpcHQgY2xhc3NcbiAqIEBwYXJhbSB7c3RyaW5nfSBwbHVnaW5OYW1lICBqUXVlcnkgcGx1Z2luIG5hbWVcbiAqIEBwYXJhbSB7c3RyaW5nfSBjbGFzc1JlZiAgQ2xhc3MgcmVmZXJlbmNlIG5hbWVcbiAqL1xuTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlciA9IGZ1bmN0aW9uIChwbHVnaW4sIHBsdWdpbk5hbWUsIGNsYXNzUmVmKSB7XG4gIGpRdWVyeS5mbltwbHVnaW5OYW1lXSA9IGZ1bmN0aW9uIChtZXRob2RPck9wdGlvbnMpIHtcbiAgICAvLyBDYWxsIHBsdWdpbiBtZXRob2QgaWYgdmFsaWQgbWV0aG9kIG5hbWUgaXMgcGFzc2VkIGluXG4gICAgaWYgKHBsdWdpbi5wcm90b3R5cGVbbWV0aG9kT3JPcHRpb25zXSkge1xuICAgICAgdmFyIHBhcmFtcyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywgMSk7XG5cbiAgICAgIC8vIEdldHRlciBtZXRob2RzXG4gICAgICBpZiAobWV0aG9kT3JPcHRpb25zLnNsaWNlKDAsIDMpID09PSAnZ2V0Jykge1xuICAgICAgICB2YXIgaW5zdGFuY2UgPSB0aGlzLmZpcnN0KClbMF1bY2xhc3NSZWZdO1xuICAgICAgICByZXR1cm4gaW5zdGFuY2VbbWV0aG9kT3JPcHRpb25zXS5hcHBseShpbnN0YW5jZSwgcGFyYW1zKTtcbiAgICAgIH1cblxuICAgICAgLy8gVm9pZCBtZXRob2RzXG4gICAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIGluc3RhbmNlID0gdGhpc1tjbGFzc1JlZl07XG4gICAgICAgIGluc3RhbmNlW21ldGhvZE9yT3B0aW9uc10uYXBwbHkoaW5zdGFuY2UsIHBhcmFtcyk7XG4gICAgICB9KTtcblxuICAgICAgLy8gSW5pdGlhbGl6ZSBwbHVnaW4gaWYgb3B0aW9ucyBvciBubyBhcmd1bWVudCBpcyBwYXNzZWQgaW5cbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBtZXRob2RPck9wdGlvbnMgPT09ICdvYmplY3QnIHx8ICFtZXRob2RPck9wdGlvbnMpIHtcbiAgICAgIHBsdWdpbi5pbml0KHRoaXMsIGFyZ3VtZW50c1swXSk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICAvLyBSZXR1cm4gZXJyb3IgaWYgYW4gdW5yZWNvZ25pemVkICBtZXRob2QgbmFtZSBpcyBwYXNzZWQgaW5cbiAgICBqUXVlcnkuZXJyb3IoXCJNZXRob2QgXCIgKyBtZXRob2RPck9wdGlvbnMgKyBcIiBkb2VzIG5vdCBleGlzdCBvbiBqUXVlcnkuXCIgKyBwbHVnaW5OYW1lKTtcbiAgfTtcbn07XG5cbi8qKlxuICogQXV0b21hdGljYWxseSBpbml0aWFsaXplIGNvbXBvbmVudHNcbiAqIEBwYXJhbSB7RWxlbWVudH0gY29udGV4dCAgRE9NIEVsZW1lbnQgdG8gc2VhcmNoIHdpdGhpbiBmb3IgY29tcG9uZW50c1xuICovXG5NLkF1dG9Jbml0ID0gZnVuY3Rpb24gKGNvbnRleHQpIHtcbiAgLy8gVXNlIGRvY3VtZW50LmJvZHkgaWYgbm8gY29udGV4dCBpcyBnaXZlblxuICB2YXIgcm9vdCA9ICEhY29udGV4dCA/IGNvbnRleHQgOiBkb2N1bWVudC5ib2R5O1xuXG4gIHZhciByZWdpc3RyeSA9IHtcbiAgICBBdXRvY29tcGxldGU6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmF1dG9jb21wbGV0ZTpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIENhcm91c2VsOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jYXJvdXNlbDpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIENoaXBzOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jaGlwczpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIENvbGxhcHNpYmxlOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5jb2xsYXBzaWJsZTpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIERhdGVwaWNrZXI6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmRhdGVwaWNrZXI6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBEcm9wZG93bjogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuZHJvcGRvd24tdHJpZ2dlcjpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIE1hdGVyaWFsYm94OiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5tYXRlcmlhbGJveGVkOm5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgTW9kYWw6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLm1vZGFsOm5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgUGFyYWxsYXg6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnBhcmFsbGF4Om5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgUHVzaHBpbjogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcucHVzaHBpbjpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIFNjcm9sbFNweTogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcuc2Nyb2xsc3B5Om5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgRm9ybVNlbGVjdDogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCdzZWxlY3Q6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBTaWRlbmF2OiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy5zaWRlbmF2Om5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgVGFiczogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcudGFiczpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIFRhcFRhcmdldDogcm9vdC5xdWVyeVNlbGVjdG9yQWxsKCcudGFwLXRhcmdldDpub3QoLm5vLWF1dG9pbml0KScpLFxuICAgIFRpbWVwaWNrZXI6IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLnRpbWVwaWNrZXI6bm90KC5uby1hdXRvaW5pdCknKSxcbiAgICBUb29sdGlwOiByb290LnF1ZXJ5U2VsZWN0b3JBbGwoJy50b29sdGlwcGVkOm5vdCgubm8tYXV0b2luaXQpJyksXG4gICAgRmxvYXRpbmdBY3Rpb25CdXR0b246IHJvb3QucXVlcnlTZWxlY3RvckFsbCgnLmZpeGVkLWFjdGlvbi1idG46bm90KC5uby1hdXRvaW5pdCknKVxuICB9O1xuXG4gIGZvciAodmFyIHBsdWdpbk5hbWUgaW4gcmVnaXN0cnkpIHtcbiAgICB2YXIgcGx1Z2luID0gTVtwbHVnaW5OYW1lXTtcbiAgICBwbHVnaW4uaW5pdChyZWdpc3RyeVtwbHVnaW5OYW1lXSk7XG4gIH1cbn07XG5cbi8qKlxuICogR2VuZXJhdGUgYXBwcm94aW1hdGVkIHNlbGVjdG9yIHN0cmluZyBmb3IgYSBqUXVlcnkgb2JqZWN0XG4gKiBAcGFyYW0ge2pRdWVyeX0gb2JqICBqUXVlcnkgb2JqZWN0IHRvIGJlIHBhcnNlZFxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuTS5vYmplY3RTZWxlY3RvclN0cmluZyA9IGZ1bmN0aW9uIChvYmopIHtcbiAgdmFyIHRhZ1N0ciA9IG9iai5wcm9wKCd0YWdOYW1lJykgfHwgJyc7XG4gIHZhciBpZFN0ciA9IG9iai5hdHRyKCdpZCcpIHx8ICcnO1xuICB2YXIgY2xhc3NTdHIgPSBvYmouYXR0cignY2xhc3MnKSB8fCAnJztcbiAgcmV0dXJuICh0YWdTdHIgKyBpZFN0ciArIGNsYXNzU3RyKS5yZXBsYWNlKC9cXHMvZywgJycpO1xufTtcblxuLy8gVW5pcXVlIFJhbmRvbSBJRFxuTS5ndWlkID0gZnVuY3Rpb24gKCkge1xuICBmdW5jdGlvbiBzNCgpIHtcbiAgICByZXR1cm4gTWF0aC5mbG9vcigoMSArIE1hdGgucmFuZG9tKCkpICogMHgxMDAwMCkudG9TdHJpbmcoMTYpLnN1YnN0cmluZygxKTtcbiAgfVxuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBzNCgpICsgczQoKSArICctJyArIHM0KCkgKyAnLScgKyBzNCgpICsgJy0nICsgczQoKSArICctJyArIHM0KCkgKyBzNCgpICsgczQoKTtcbiAgfTtcbn0oKTtcblxuLyoqXG4gKiBFc2NhcGVzIGhhc2ggZnJvbSBzcGVjaWFsIGNoYXJhY3RlcnNcbiAqIEBwYXJhbSB7c3RyaW5nfSBoYXNoICBTdHJpbmcgcmV0dXJuZWQgZnJvbSB0aGlzLmhhc2hcbiAqIEByZXR1cm5zIHtzdHJpbmd9XG4gKi9cbk0uZXNjYXBlSGFzaCA9IGZ1bmN0aW9uIChoYXNoKSB7XG4gIHJldHVybiBoYXNoLnJlcGxhY2UoLyg6fFxcLnxcXFt8XFxdfCx8PXxcXC8pL2csICdcXFxcJDEnKTtcbn07XG5cbk0uZWxlbWVudE9yUGFyZW50SXNGaXhlZCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIHZhciAkZWxlbWVudCA9ICQoZWxlbWVudCk7XG4gIHZhciAkY2hlY2tFbGVtZW50cyA9ICRlbGVtZW50LmFkZCgkZWxlbWVudC5wYXJlbnRzKCkpO1xuICB2YXIgaXNGaXhlZCA9IGZhbHNlO1xuICAkY2hlY2tFbGVtZW50cy5lYWNoKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoJCh0aGlzKS5jc3MoJ3Bvc2l0aW9uJykgPT09ICdmaXhlZCcpIHtcbiAgICAgIGlzRml4ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBpc0ZpeGVkO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFZGdlc1xuICogQHByb3BlcnR5IHtCb29sZWFufSB0b3AgIElmIHRoZSB0b3AgZWRnZSB3YXMgZXhjZWVkZWRcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gcmlnaHQgIElmIHRoZSByaWdodCBlZGdlIHdhcyBleGNlZWRlZFxuICogQHByb3BlcnR5IHtCb29sZWFufSBib3R0b20gIElmIHRoZSBib3R0b20gZWRnZSB3YXMgZXhjZWVkZWRcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gbGVmdCAgSWYgdGhlIGxlZnQgZWRnZSB3YXMgZXhjZWVkZWRcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEJvdW5kaW5nXG4gKiBAcHJvcGVydHkge051bWJlcn0gbGVmdCAgbGVmdCBvZmZzZXQgY29vcmRpbmF0ZVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHRvcCAgdG9wIG9mZnNldCBjb29yZGluYXRlXG4gKiBAcHJvcGVydHkge051bWJlcn0gd2lkdGhcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBoZWlnaHRcbiAqL1xuXG4vKipcbiAqIEVzY2FwZXMgaGFzaCBmcm9tIHNwZWNpYWwgY2hhcmFjdGVyc1xuICogQHBhcmFtIHtFbGVtZW50fSBjb250YWluZXIgIENvbnRhaW5lciBlbGVtZW50IHRoYXQgYWN0cyBhcyB0aGUgYm91bmRhcnlcbiAqIEBwYXJhbSB7Qm91bmRpbmd9IGJvdW5kaW5nICBlbGVtZW50IGJvdW5kaW5nIHRoYXQgaXMgYmVpbmcgY2hlY2tlZFxuICogQHBhcmFtIHtOdW1iZXJ9IG9mZnNldCAgb2Zmc2V0IGZyb20gZWRnZSB0aGF0IGNvdW50cyBhcyBleGNlZWRpbmdcbiAqIEByZXR1cm5zIHtFZGdlc31cbiAqL1xuTS5jaGVja1dpdGhpbkNvbnRhaW5lciA9IGZ1bmN0aW9uIChjb250YWluZXIsIGJvdW5kaW5nLCBvZmZzZXQpIHtcbiAgdmFyIGVkZ2VzID0ge1xuICAgIHRvcDogZmFsc2UsXG4gICAgcmlnaHQ6IGZhbHNlLFxuICAgIGJvdHRvbTogZmFsc2UsXG4gICAgbGVmdDogZmFsc2VcbiAgfTtcblxuICB2YXIgY29udGFpbmVyUmVjdCA9IGNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgLy8gSWYgYm9keSBlbGVtZW50IGlzIHNtYWxsZXIgdGhhbiB2aWV3cG9ydCwgdXNlIHZpZXdwb3J0IGhlaWdodCBpbnN0ZWFkLlxuICB2YXIgY29udGFpbmVyQm90dG9tID0gY29udGFpbmVyID09PSBkb2N1bWVudC5ib2R5ID8gTWF0aC5tYXgoY29udGFpbmVyUmVjdC5ib3R0b20sIHdpbmRvdy5pbm5lckhlaWdodCkgOiBjb250YWluZXJSZWN0LmJvdHRvbTtcblxuICB2YXIgc2Nyb2xsTGVmdCA9IGNvbnRhaW5lci5zY3JvbGxMZWZ0O1xuICB2YXIgc2Nyb2xsVG9wID0gY29udGFpbmVyLnNjcm9sbFRvcDtcblxuICB2YXIgc2Nyb2xsZWRYID0gYm91bmRpbmcubGVmdCAtIHNjcm9sbExlZnQ7XG4gIHZhciBzY3JvbGxlZFkgPSBib3VuZGluZy50b3AgLSBzY3JvbGxUb3A7XG5cbiAgLy8gQ2hlY2sgZm9yIGNvbnRhaW5lciBhbmQgdmlld3BvcnQgZm9yIGVhY2ggZWRnZVxuICBpZiAoc2Nyb2xsZWRYIDwgY29udGFpbmVyUmVjdC5sZWZ0ICsgb2Zmc2V0IHx8IHNjcm9sbGVkWCA8IG9mZnNldCkge1xuICAgIGVkZ2VzLmxlZnQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHNjcm9sbGVkWCArIGJvdW5kaW5nLndpZHRoID4gY29udGFpbmVyUmVjdC5yaWdodCAtIG9mZnNldCB8fCBzY3JvbGxlZFggKyBib3VuZGluZy53aWR0aCA+IHdpbmRvdy5pbm5lcldpZHRoIC0gb2Zmc2V0KSB7XG4gICAgZWRnZXMucmlnaHQgPSB0cnVlO1xuICB9XG5cbiAgaWYgKHNjcm9sbGVkWSA8IGNvbnRhaW5lclJlY3QudG9wICsgb2Zmc2V0IHx8IHNjcm9sbGVkWSA8IG9mZnNldCkge1xuICAgIGVkZ2VzLnRvcCA9IHRydWU7XG4gIH1cblxuICBpZiAoc2Nyb2xsZWRZICsgYm91bmRpbmcuaGVpZ2h0ID4gY29udGFpbmVyQm90dG9tIC0gb2Zmc2V0IHx8IHNjcm9sbGVkWSArIGJvdW5kaW5nLmhlaWdodCA+IHdpbmRvdy5pbm5lckhlaWdodCAtIG9mZnNldCkge1xuICAgIGVkZ2VzLmJvdHRvbSA9IHRydWU7XG4gIH1cblxuICByZXR1cm4gZWRnZXM7XG59O1xuXG5NLmNoZWNrUG9zc2libGVBbGlnbm1lbnRzID0gZnVuY3Rpb24gKGVsLCBjb250YWluZXIsIGJvdW5kaW5nLCBvZmZzZXQpIHtcbiAgdmFyIGNhbkFsaWduID0ge1xuICAgIHRvcDogdHJ1ZSxcbiAgICByaWdodDogdHJ1ZSxcbiAgICBib3R0b206IHRydWUsXG4gICAgbGVmdDogdHJ1ZSxcbiAgICBzcGFjZU9uVG9wOiBudWxsLFxuICAgIHNwYWNlT25SaWdodDogbnVsbCxcbiAgICBzcGFjZU9uQm90dG9tOiBudWxsLFxuICAgIHNwYWNlT25MZWZ0OiBudWxsXG4gIH07XG5cbiAgdmFyIGNvbnRhaW5lckFsbG93c092ZXJmbG93ID0gZ2V0Q29tcHV0ZWRTdHlsZShjb250YWluZXIpLm92ZXJmbG93ID09PSAndmlzaWJsZSc7XG4gIHZhciBjb250YWluZXJSZWN0ID0gY29udGFpbmVyLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICB2YXIgY29udGFpbmVySGVpZ2h0ID0gTWF0aC5taW4oY29udGFpbmVyUmVjdC5oZWlnaHQsIHdpbmRvdy5pbm5lckhlaWdodCk7XG4gIHZhciBjb250YWluZXJXaWR0aCA9IE1hdGgubWluKGNvbnRhaW5lclJlY3Qud2lkdGgsIHdpbmRvdy5pbm5lcldpZHRoKTtcbiAgdmFyIGVsT2Zmc2V0UmVjdCA9IGVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuXG4gIHZhciBzY3JvbGxMZWZ0ID0gY29udGFpbmVyLnNjcm9sbExlZnQ7XG4gIHZhciBzY3JvbGxUb3AgPSBjb250YWluZXIuc2Nyb2xsVG9wO1xuXG4gIHZhciBzY3JvbGxlZFggPSBib3VuZGluZy5sZWZ0IC0gc2Nyb2xsTGVmdDtcbiAgdmFyIHNjcm9sbGVkWVRvcEVkZ2UgPSBib3VuZGluZy50b3AgLSBzY3JvbGxUb3A7XG4gIHZhciBzY3JvbGxlZFlCb3R0b21FZGdlID0gYm91bmRpbmcudG9wICsgZWxPZmZzZXRSZWN0LmhlaWdodCAtIHNjcm9sbFRvcDtcblxuICAvLyBDaGVjayBmb3IgY29udGFpbmVyIGFuZCB2aWV3cG9ydCBmb3IgbGVmdFxuICBjYW5BbGlnbi5zcGFjZU9uUmlnaHQgPSAhY29udGFpbmVyQWxsb3dzT3ZlcmZsb3cgPyBjb250YWluZXJXaWR0aCAtIChzY3JvbGxlZFggKyBib3VuZGluZy53aWR0aCkgOiB3aW5kb3cuaW5uZXJXaWR0aCAtIChlbE9mZnNldFJlY3QubGVmdCArIGJvdW5kaW5nLndpZHRoKTtcbiAgaWYgKGNhbkFsaWduLnNwYWNlT25SaWdodCA8IDApIHtcbiAgICBjYW5BbGlnbi5sZWZ0ID0gZmFsc2U7XG4gIH1cblxuICAvLyBDaGVjayBmb3IgY29udGFpbmVyIGFuZCB2aWV3cG9ydCBmb3IgUmlnaHRcbiAgY2FuQWxpZ24uc3BhY2VPbkxlZnQgPSAhY29udGFpbmVyQWxsb3dzT3ZlcmZsb3cgPyBzY3JvbGxlZFggLSBib3VuZGluZy53aWR0aCArIGVsT2Zmc2V0UmVjdC53aWR0aCA6IGVsT2Zmc2V0UmVjdC5yaWdodCAtIGJvdW5kaW5nLndpZHRoO1xuICBpZiAoY2FuQWxpZ24uc3BhY2VPbkxlZnQgPCAwKSB7XG4gICAgY2FuQWxpZ24ucmlnaHQgPSBmYWxzZTtcbiAgfVxuXG4gIC8vIENoZWNrIGZvciBjb250YWluZXIgYW5kIHZpZXdwb3J0IGZvciBUb3BcbiAgY2FuQWxpZ24uc3BhY2VPbkJvdHRvbSA9ICFjb250YWluZXJBbGxvd3NPdmVyZmxvdyA/IGNvbnRhaW5lckhlaWdodCAtIChzY3JvbGxlZFlUb3BFZGdlICsgYm91bmRpbmcuaGVpZ2h0ICsgb2Zmc2V0KSA6IHdpbmRvdy5pbm5lckhlaWdodCAtIChlbE9mZnNldFJlY3QudG9wICsgYm91bmRpbmcuaGVpZ2h0ICsgb2Zmc2V0KTtcbiAgaWYgKGNhbkFsaWduLnNwYWNlT25Cb3R0b20gPCAwKSB7XG4gICAgY2FuQWxpZ24udG9wID0gZmFsc2U7XG4gIH1cblxuICAvLyBDaGVjayBmb3IgY29udGFpbmVyIGFuZCB2aWV3cG9ydCBmb3IgQm90dG9tXG4gIGNhbkFsaWduLnNwYWNlT25Ub3AgPSAhY29udGFpbmVyQWxsb3dzT3ZlcmZsb3cgPyBzY3JvbGxlZFlCb3R0b21FZGdlIC0gKGJvdW5kaW5nLmhlaWdodCAtIG9mZnNldCkgOiBlbE9mZnNldFJlY3QuYm90dG9tIC0gKGJvdW5kaW5nLmhlaWdodCArIG9mZnNldCk7XG4gIGlmIChjYW5BbGlnbi5zcGFjZU9uVG9wIDwgMCkge1xuICAgIGNhbkFsaWduLmJvdHRvbSA9IGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIGNhbkFsaWduO1xufTtcblxuTS5nZXRPdmVyZmxvd1BhcmVudCA9IGZ1bmN0aW9uIChlbGVtZW50KSB7XG4gIGlmIChlbGVtZW50ID09IG51bGwpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGlmIChlbGVtZW50ID09PSBkb2N1bWVudC5ib2R5IHx8IGdldENvbXB1dGVkU3R5bGUoZWxlbWVudCkub3ZlcmZsb3cgIT09ICd2aXNpYmxlJykge1xuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgcmV0dXJuIE0uZ2V0T3ZlcmZsb3dQYXJlbnQoZWxlbWVudC5wYXJlbnRFbGVtZW50KTtcbn07XG5cbi8qKlxuICogR2V0cyBpZCBvZiBjb21wb25lbnQgZnJvbSBhIHRyaWdnZXJcbiAqIEBwYXJhbSB7RWxlbWVudH0gdHJpZ2dlciAgdHJpZ2dlclxuICogQHJldHVybnMge3N0cmluZ31cbiAqL1xuTS5nZXRJZEZyb21UcmlnZ2VyID0gZnVuY3Rpb24gKHRyaWdnZXIpIHtcbiAgdmFyIGlkID0gdHJpZ2dlci5nZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0Jyk7XG4gIGlmICghaWQpIHtcbiAgICBpZCA9IHRyaWdnZXIuZ2V0QXR0cmlidXRlKCdocmVmJyk7XG4gICAgaWYgKGlkKSB7XG4gICAgICBpZCA9IGlkLnNsaWNlKDEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZCA9ICcnO1xuICAgIH1cbiAgfVxuICByZXR1cm4gaWQ7XG59O1xuXG4vKipcbiAqIE11bHRpIGJyb3dzZXIgc3VwcG9ydCBmb3IgZG9jdW1lbnQgc2Nyb2xsIHRvcFxuICogQHJldHVybnMge051bWJlcn1cbiAqL1xuTS5nZXREb2N1bWVudFNjcm9sbFRvcCA9IGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIHdpbmRvdy5wYWdlWU9mZnNldCB8fCBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuc2Nyb2xsVG9wIHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsVG9wIHx8IDA7XG59O1xuXG4vKipcbiAqIE11bHRpIGJyb3dzZXIgc3VwcG9ydCBmb3IgZG9jdW1lbnQgc2Nyb2xsIGxlZnRcbiAqIEByZXR1cm5zIHtOdW1iZXJ9XG4gKi9cbk0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0ID0gZnVuY3Rpb24gKCkge1xuICByZXR1cm4gd2luZG93LnBhZ2VYT2Zmc2V0IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zY3JvbGxMZWZ0IHx8IGRvY3VtZW50LmJvZHkuc2Nyb2xsTGVmdCB8fCAwO1xufTtcblxuLyoqXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBFZGdlc1xuICogQHByb3BlcnR5IHtCb29sZWFufSB0b3AgIElmIHRoZSB0b3AgZWRnZSB3YXMgZXhjZWVkZWRcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gcmlnaHQgIElmIHRoZSByaWdodCBlZGdlIHdhcyBleGNlZWRlZFxuICogQHByb3BlcnR5IHtCb29sZWFufSBib3R0b20gIElmIHRoZSBib3R0b20gZWRnZSB3YXMgZXhjZWVkZWRcbiAqIEBwcm9wZXJ0eSB7Qm9vbGVhbn0gbGVmdCAgSWYgdGhlIGxlZnQgZWRnZSB3YXMgZXhjZWVkZWRcbiAqL1xuXG4vKipcbiAqIEB0eXBlZGVmIHtPYmplY3R9IEJvdW5kaW5nXG4gKiBAcHJvcGVydHkge051bWJlcn0gbGVmdCAgbGVmdCBvZmZzZXQgY29vcmRpbmF0ZVxuICogQHByb3BlcnR5IHtOdW1iZXJ9IHRvcCAgdG9wIG9mZnNldCBjb29yZGluYXRlXG4gKiBAcHJvcGVydHkge051bWJlcn0gd2lkdGhcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBoZWlnaHRcbiAqL1xuXG4vKipcbiAqIEdldCB0aW1lIGluIG1zXG4gKiBAbGljZW5zZSBodHRwczovL3Jhdy5naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL21hc3Rlci9MSUNFTlNFXG4gKiBAdHlwZSB7ZnVuY3Rpb259XG4gKiBAcmV0dXJuIHtudW1iZXJ9XG4gKi9cbnZhciBnZXRUaW1lID0gRGF0ZS5ub3cgfHwgZnVuY3Rpb24gKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG59O1xuXG4vKipcbiAqIFJldHVybnMgYSBmdW5jdGlvbiwgdGhhdCwgd2hlbiBpbnZva2VkLCB3aWxsIG9ubHkgYmUgdHJpZ2dlcmVkIGF0IG1vc3Qgb25jZVxuICogZHVyaW5nIGEgZ2l2ZW4gd2luZG93IG9mIHRpbWUuIE5vcm1hbGx5LCB0aGUgdGhyb3R0bGVkIGZ1bmN0aW9uIHdpbGwgcnVuXG4gKiBhcyBtdWNoIGFzIGl0IGNhbiwgd2l0aG91dCBldmVyIGdvaW5nIG1vcmUgdGhhbiBvbmNlIHBlciBgd2FpdGAgZHVyYXRpb247XG4gKiBidXQgaWYgeW91J2QgbGlrZSB0byBkaXNhYmxlIHRoZSBleGVjdXRpb24gb24gdGhlIGxlYWRpbmcgZWRnZSwgcGFzc1xuICogYHtsZWFkaW5nOiBmYWxzZX1gLiBUbyBkaXNhYmxlIGV4ZWN1dGlvbiBvbiB0aGUgdHJhaWxpbmcgZWRnZSwgZGl0dG8uXG4gKiBAbGljZW5zZSBodHRwczovL3Jhdy5naXRodWIuY29tL2phc2hrZW5hcy91bmRlcnNjb3JlL21hc3Rlci9MSUNFTlNFXG4gKiBAcGFyYW0ge2Z1bmN0aW9ufSBmdW5jXG4gKiBAcGFyYW0ge251bWJlcn0gd2FpdFxuICogQHBhcmFtIHtPYmplY3Q9fSBvcHRpb25zXG4gKiBAcmV0dXJucyB7RnVuY3Rpb259XG4gKi9cbk0udGhyb3R0bGUgPSBmdW5jdGlvbiAoZnVuYywgd2FpdCwgb3B0aW9ucykge1xuICB2YXIgY29udGV4dCA9IHZvaWQgMCxcbiAgICAgIGFyZ3MgPSB2b2lkIDAsXG4gICAgICByZXN1bHQgPSB2b2lkIDA7XG4gIHZhciB0aW1lb3V0ID0gbnVsbDtcbiAgdmFyIHByZXZpb3VzID0gMDtcbiAgb3B0aW9ucyB8fCAob3B0aW9ucyA9IHt9KTtcbiAgdmFyIGxhdGVyID0gZnVuY3Rpb24gKCkge1xuICAgIHByZXZpb3VzID0gb3B0aW9ucy5sZWFkaW5nID09PSBmYWxzZSA/IDAgOiBnZXRUaW1lKCk7XG4gICAgdGltZW91dCA9IG51bGw7XG4gICAgcmVzdWx0ID0gZnVuYy5hcHBseShjb250ZXh0LCBhcmdzKTtcbiAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gIH07XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5vdyA9IGdldFRpbWUoKTtcbiAgICBpZiAoIXByZXZpb3VzICYmIG9wdGlvbnMubGVhZGluZyA9PT0gZmFsc2UpIHByZXZpb3VzID0gbm93O1xuICAgIHZhciByZW1haW5pbmcgPSB3YWl0IC0gKG5vdyAtIHByZXZpb3VzKTtcbiAgICBjb250ZXh0ID0gdGhpcztcbiAgICBhcmdzID0gYXJndW1lbnRzO1xuICAgIGlmIChyZW1haW5pbmcgPD0gMCkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xuICAgICAgdGltZW91dCA9IG51bGw7XG4gICAgICBwcmV2aW91cyA9IG5vdztcbiAgICAgIHJlc3VsdCA9IGZ1bmMuYXBwbHkoY29udGV4dCwgYXJncyk7XG4gICAgICBjb250ZXh0ID0gYXJncyA9IG51bGw7XG4gICAgfSBlbHNlIGlmICghdGltZW91dCAmJiBvcHRpb25zLnRyYWlsaW5nICE9PSBmYWxzZSkge1xuICAgICAgdGltZW91dCA9IHNldFRpbWVvdXQobGF0ZXIsIHJlbWFpbmluZyk7XG4gICAgfVxuICAgIHJldHVybiByZXN1bHQ7XG4gIH07XG59O1xuOyAvKlxuICB2Mi4yLjBcbiAgMjAxNyBKdWxpYW4gR2FybmllclxuICBSZWxlYXNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAgKi9cbnZhciAkanNjb21wID0geyBzY29wZToge30gfTskanNjb21wLmRlZmluZVByb3BlcnR5ID0gXCJmdW5jdGlvblwiID09IHR5cGVvZiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSA6IGZ1bmN0aW9uIChlLCByLCBwKSB7XG4gIGlmIChwLmdldCB8fCBwLnNldCkgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkVTMyBkb2VzIG5vdCBzdXBwb3J0IGdldHRlcnMgYW5kIHNldHRlcnMuXCIpO2UgIT0gQXJyYXkucHJvdG90eXBlICYmIGUgIT0gT2JqZWN0LnByb3RvdHlwZSAmJiAoZVtyXSA9IHAudmFsdWUpO1xufTskanNjb21wLmdldEdsb2JhbCA9IGZ1bmN0aW9uIChlKSB7XG4gIHJldHVybiBcInVuZGVmaW5lZFwiICE9IHR5cGVvZiB3aW5kb3cgJiYgd2luZG93ID09PSBlID8gZSA6IFwidW5kZWZpbmVkXCIgIT0gdHlwZW9mIGdsb2JhbCAmJiBudWxsICE9IGdsb2JhbCA/IGdsb2JhbCA6IGU7XG59OyRqc2NvbXAuZ2xvYmFsID0gJGpzY29tcC5nZXRHbG9iYWwodGhpcyk7JGpzY29tcC5TWU1CT0xfUFJFRklYID0gXCJqc2NvbXBfc3ltYm9sX1wiO1xuJGpzY29tcC5pbml0U3ltYm9sID0gZnVuY3Rpb24gKCkge1xuICAkanNjb21wLmluaXRTeW1ib2wgPSBmdW5jdGlvbiAoKSB7fTskanNjb21wLmdsb2JhbC5TeW1ib2wgfHwgKCRqc2NvbXAuZ2xvYmFsLlN5bWJvbCA9ICRqc2NvbXAuU3ltYm9sKTtcbn07JGpzY29tcC5zeW1ib2xDb3VudGVyXyA9IDA7JGpzY29tcC5TeW1ib2wgPSBmdW5jdGlvbiAoZSkge1xuICByZXR1cm4gJGpzY29tcC5TWU1CT0xfUFJFRklYICsgKGUgfHwgXCJcIikgKyAkanNjb21wLnN5bWJvbENvdW50ZXJfKys7XG59O1xuJGpzY29tcC5pbml0U3ltYm9sSXRlcmF0b3IgPSBmdW5jdGlvbiAoKSB7XG4gICRqc2NvbXAuaW5pdFN5bWJvbCgpO3ZhciBlID0gJGpzY29tcC5nbG9iYWwuU3ltYm9sLml0ZXJhdG9yO2UgfHwgKGUgPSAkanNjb21wLmdsb2JhbC5TeW1ib2wuaXRlcmF0b3IgPSAkanNjb21wLmdsb2JhbC5TeW1ib2woXCJpdGVyYXRvclwiKSk7XCJmdW5jdGlvblwiICE9IHR5cGVvZiBBcnJheS5wcm90b3R5cGVbZV0gJiYgJGpzY29tcC5kZWZpbmVQcm9wZXJ0eShBcnJheS5wcm90b3R5cGUsIGUsIHsgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwLCB2YWx1ZTogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuICRqc2NvbXAuYXJyYXlJdGVyYXRvcih0aGlzKTtcbiAgICB9IH0pOyRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yID0gZnVuY3Rpb24gKCkge307XG59OyRqc2NvbXAuYXJyYXlJdGVyYXRvciA9IGZ1bmN0aW9uIChlKSB7XG4gIHZhciByID0gMDtyZXR1cm4gJGpzY29tcC5pdGVyYXRvclByb3RvdHlwZShmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIHIgPCBlLmxlbmd0aCA/IHsgZG9uZTogITEsIHZhbHVlOiBlW3IrK10gfSA6IHsgZG9uZTogITAgfTtcbiAgfSk7XG59O1xuJGpzY29tcC5pdGVyYXRvclByb3RvdHlwZSA9IGZ1bmN0aW9uIChlKSB7XG4gICRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yKCk7ZSA9IHsgbmV4dDogZSB9O2VbJGpzY29tcC5nbG9iYWwuU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gdGhpcztcbiAgfTtyZXR1cm4gZTtcbn07JGpzY29tcC5hcnJheSA9ICRqc2NvbXAuYXJyYXkgfHwge307JGpzY29tcC5pdGVyYXRvckZyb21BcnJheSA9IGZ1bmN0aW9uIChlLCByKSB7XG4gICRqc2NvbXAuaW5pdFN5bWJvbEl0ZXJhdG9yKCk7ZSBpbnN0YW5jZW9mIFN0cmluZyAmJiAoZSArPSBcIlwiKTt2YXIgcCA9IDAsXG4gICAgICBtID0geyBuZXh0OiBmdW5jdGlvbiAoKSB7XG4gICAgICBpZiAocCA8IGUubGVuZ3RoKSB7XG4gICAgICAgIHZhciB1ID0gcCsrO3JldHVybiB7IHZhbHVlOiByKHUsIGVbdV0pLCBkb25lOiAhMSB9O1xuICAgICAgfW0ubmV4dCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIHsgZG9uZTogITAsIHZhbHVlOiB2b2lkIDAgfTtcbiAgICAgIH07cmV0dXJuIG0ubmV4dCgpO1xuICAgIH0gfTttW1N5bWJvbC5pdGVyYXRvcl0gPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIG07XG4gIH07cmV0dXJuIG07XG59O1xuJGpzY29tcC5wb2x5ZmlsbCA9IGZ1bmN0aW9uIChlLCByLCBwLCBtKSB7XG4gIGlmIChyKSB7XG4gICAgcCA9ICRqc2NvbXAuZ2xvYmFsO2UgPSBlLnNwbGl0KFwiLlwiKTtmb3IgKG0gPSAwOyBtIDwgZS5sZW5ndGggLSAxOyBtKyspIHtcbiAgICAgIHZhciB1ID0gZVttXTt1IGluIHAgfHwgKHBbdV0gPSB7fSk7cCA9IHBbdV07XG4gICAgfWUgPSBlW2UubGVuZ3RoIC0gMV07bSA9IHBbZV07ciA9IHIobSk7ciAhPSBtICYmIG51bGwgIT0gciAmJiAkanNjb21wLmRlZmluZVByb3BlcnR5KHAsIGUsIHsgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwLCB2YWx1ZTogciB9KTtcbiAgfVxufTskanNjb21wLnBvbHlmaWxsKFwiQXJyYXkucHJvdG90eXBlLmtleXNcIiwgZnVuY3Rpb24gKGUpIHtcbiAgcmV0dXJuIGUgPyBlIDogZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiAkanNjb21wLml0ZXJhdG9yRnJvbUFycmF5KHRoaXMsIGZ1bmN0aW9uIChlKSB7XG4gICAgICByZXR1cm4gZTtcbiAgICB9KTtcbiAgfTtcbn0sIFwiZXM2LWltcGxcIiwgXCJlczNcIik7dmFyICRqc2NvbXAkdGhpcyA9IHRoaXM7XG4oZnVuY3Rpb24gKHIpIHtcbiAgTS5hbmltZSA9IHIoKTtcbn0pKGZ1bmN0aW9uICgpIHtcbiAgZnVuY3Rpb24gZShhKSB7XG4gICAgaWYgKCFoLmNvbChhKSkgdHJ5IHtcbiAgICAgIHJldHVybiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGEpO1xuICAgIH0gY2F0Y2ggKGMpIHt9XG4gIH1mdW5jdGlvbiByKGEsIGMpIHtcbiAgICBmb3IgKHZhciBkID0gYS5sZW5ndGgsIGIgPSAyIDw9IGFyZ3VtZW50cy5sZW5ndGggPyBhcmd1bWVudHNbMV0gOiB2b2lkIDAsIGYgPSBbXSwgbiA9IDA7IG4gPCBkOyBuKyspIHtcbiAgICAgIGlmIChuIGluIGEpIHtcbiAgICAgICAgdmFyIGsgPSBhW25dO2MuY2FsbChiLCBrLCBuLCBhKSAmJiBmLnB1c2goayk7XG4gICAgICB9XG4gICAgfXJldHVybiBmO1xuICB9ZnVuY3Rpb24gcChhKSB7XG4gICAgcmV0dXJuIGEucmVkdWNlKGZ1bmN0aW9uIChhLCBkKSB7XG4gICAgICByZXR1cm4gYS5jb25jYXQoaC5hcnIoZCkgPyBwKGQpIDogZCk7XG4gICAgfSwgW10pO1xuICB9ZnVuY3Rpb24gbShhKSB7XG4gICAgaWYgKGguYXJyKGEpKSByZXR1cm4gYTtcbiAgICBoLnN0cihhKSAmJiAoYSA9IGUoYSkgfHwgYSk7cmV0dXJuIGEgaW5zdGFuY2VvZiBOb2RlTGlzdCB8fCBhIGluc3RhbmNlb2YgSFRNTENvbGxlY3Rpb24gPyBbXS5zbGljZS5jYWxsKGEpIDogW2FdO1xuICB9ZnVuY3Rpb24gdShhLCBjKSB7XG4gICAgcmV0dXJuIGEuc29tZShmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGEgPT09IGM7XG4gICAgfSk7XG4gIH1mdW5jdGlvbiBDKGEpIHtcbiAgICB2YXIgYyA9IHt9LFxuICAgICAgICBkO2ZvciAoZCBpbiBhKSB7XG4gICAgICBjW2RdID0gYVtkXTtcbiAgICB9cmV0dXJuIGM7XG4gIH1mdW5jdGlvbiBEKGEsIGMpIHtcbiAgICB2YXIgZCA9IEMoYSksXG4gICAgICAgIGI7Zm9yIChiIGluIGEpIHtcbiAgICAgIGRbYl0gPSBjLmhhc093blByb3BlcnR5KGIpID8gY1tiXSA6IGFbYl07XG4gICAgfXJldHVybiBkO1xuICB9ZnVuY3Rpb24geihhLCBjKSB7XG4gICAgdmFyIGQgPSBDKGEpLFxuICAgICAgICBiO2ZvciAoYiBpbiBjKSB7XG4gICAgICBkW2JdID0gaC51bmQoYVtiXSkgPyBjW2JdIDogYVtiXTtcbiAgICB9cmV0dXJuIGQ7XG4gIH1mdW5jdGlvbiBUKGEpIHtcbiAgICBhID0gYS5yZXBsYWNlKC9eIz8oW2EtZlxcZF0pKFthLWZcXGRdKShbYS1mXFxkXSkkL2ksIGZ1bmN0aW9uIChhLCBjLCBkLCBrKSB7XG4gICAgICByZXR1cm4gYyArIGMgKyBkICsgZCArIGsgKyBrO1xuICAgIH0pO3ZhciBjID0gL14jPyhbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pKFthLWZcXGRdezJ9KSQvaS5leGVjKGEpO1xuICAgIGEgPSBwYXJzZUludChjWzFdLCAxNik7dmFyIGQgPSBwYXJzZUludChjWzJdLCAxNiksXG4gICAgICAgIGMgPSBwYXJzZUludChjWzNdLCAxNik7cmV0dXJuIFwicmdiYShcIiArIGEgKyBcIixcIiArIGQgKyBcIixcIiArIGMgKyBcIiwxKVwiO1xuICB9ZnVuY3Rpb24gVShhKSB7XG4gICAgZnVuY3Rpb24gYyhhLCBjLCBiKSB7XG4gICAgICAwID4gYiAmJiAoYiArPSAxKTsxIDwgYiAmJiAtLWI7cmV0dXJuIGIgPCAxIC8gNiA/IGEgKyA2ICogKGMgLSBhKSAqIGIgOiAuNSA+IGIgPyBjIDogYiA8IDIgLyAzID8gYSArIChjIC0gYSkgKiAoMiAvIDMgLSBiKSAqIDYgOiBhO1xuICAgIH12YXIgZCA9IC9oc2xcXCgoXFxkKyksXFxzKihbXFxkLl0rKSUsXFxzKihbXFxkLl0rKSVcXCkvZy5leGVjKGEpIHx8IC9oc2xhXFwoKFxcZCspLFxccyooW1xcZC5dKyklLFxccyooW1xcZC5dKyklLFxccyooW1xcZC5dKylcXCkvZy5leGVjKGEpO2EgPSBwYXJzZUludChkWzFdKSAvIDM2MDt2YXIgYiA9IHBhcnNlSW50KGRbMl0pIC8gMTAwLFxuICAgICAgICBmID0gcGFyc2VJbnQoZFszXSkgLyAxMDAsXG4gICAgICAgIGQgPSBkWzRdIHx8IDE7aWYgKDAgPT0gYikgZiA9IGIgPSBhID0gZjtlbHNlIHtcbiAgICAgIHZhciBuID0gLjUgPiBmID8gZiAqICgxICsgYikgOiBmICsgYiAtIGYgKiBiLFxuICAgICAgICAgIGsgPSAyICogZiAtIG4sXG4gICAgICAgICAgZiA9IGMoaywgbiwgYSArIDEgLyAzKSxcbiAgICAgICAgICBiID0gYyhrLCBuLCBhKTthID0gYyhrLCBuLCBhIC0gMSAvIDMpO1xuICAgIH1yZXR1cm4gXCJyZ2JhKFwiICsgMjU1ICogZiArIFwiLFwiICsgMjU1ICogYiArIFwiLFwiICsgMjU1ICogYSArIFwiLFwiICsgZCArIFwiKVwiO1xuICB9ZnVuY3Rpb24geShhKSB7XG4gICAgaWYgKGEgPSAvKFtcXCtcXC1dP1swLTkjXFwuXSspKCV8cHh8cHR8ZW18cmVtfGlufGNtfG1tfGV4fGNofHBjfHZ3fHZofHZtaW58dm1heHxkZWd8cmFkfHR1cm4pPyQvLmV4ZWMoYSkpIHJldHVybiBhWzJdO1xuICB9ZnVuY3Rpb24gVihhKSB7XG4gICAgaWYgKC0xIDwgYS5pbmRleE9mKFwidHJhbnNsYXRlXCIpIHx8IFwicGVyc3BlY3RpdmVcIiA9PT0gYSkgcmV0dXJuIFwicHhcIjtpZiAoLTEgPCBhLmluZGV4T2YoXCJyb3RhdGVcIikgfHwgLTEgPCBhLmluZGV4T2YoXCJza2V3XCIpKSByZXR1cm4gXCJkZWdcIjtcbiAgfWZ1bmN0aW9uIEkoYSwgYykge1xuICAgIHJldHVybiBoLmZuYyhhKSA/IGEoYy50YXJnZXQsIGMuaWQsIGMudG90YWwpIDogYTtcbiAgfWZ1bmN0aW9uIEUoYSwgYykge1xuICAgIGlmIChjIGluIGEuc3R5bGUpIHJldHVybiBnZXRDb21wdXRlZFN0eWxlKGEpLmdldFByb3BlcnR5VmFsdWUoYy5yZXBsYWNlKC8oW2Etel0pKFtBLVpdKS9nLCBcIiQxLSQyXCIpLnRvTG93ZXJDYXNlKCkpIHx8IFwiMFwiO1xuICB9ZnVuY3Rpb24gSihhLCBjKSB7XG4gICAgaWYgKGguZG9tKGEpICYmIHUoVywgYykpIHJldHVybiBcInRyYW5zZm9ybVwiO2lmIChoLmRvbShhKSAmJiAoYS5nZXRBdHRyaWJ1dGUoYykgfHwgaC5zdmcoYSkgJiYgYVtjXSkpIHJldHVybiBcImF0dHJpYnV0ZVwiO2lmIChoLmRvbShhKSAmJiBcInRyYW5zZm9ybVwiICE9PSBjICYmIEUoYSwgYykpIHJldHVybiBcImNzc1wiO2lmIChudWxsICE9IGFbY10pIHJldHVybiBcIm9iamVjdFwiO1xuICB9ZnVuY3Rpb24gWChhLCBjKSB7XG4gICAgdmFyIGQgPSBWKGMpLFxuICAgICAgICBkID0gLTEgPCBjLmluZGV4T2YoXCJzY2FsZVwiKSA/IDEgOiAwICsgZDthID0gYS5zdHlsZS50cmFuc2Zvcm07aWYgKCFhKSByZXR1cm4gZDtmb3IgKHZhciBiID0gW10sIGYgPSBbXSwgbiA9IFtdLCBrID0gLyhcXHcrKVxcKCguKz8pXFwpL2c7IGIgPSBrLmV4ZWMoYSk7KSB7XG4gICAgICBmLnB1c2goYlsxXSksIG4ucHVzaChiWzJdKTtcbiAgICB9YSA9IHIobiwgZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiBmW2JdID09PSBjO1xuICAgIH0pO3JldHVybiBhLmxlbmd0aCA/IGFbMF0gOiBkO1xuICB9ZnVuY3Rpb24gSyhhLCBjKSB7XG4gICAgc3dpdGNoIChKKGEsIGMpKSB7Y2FzZSBcInRyYW5zZm9ybVwiOlxuICAgICAgICByZXR1cm4gWChhLCBjKTtjYXNlIFwiY3NzXCI6XG4gICAgICAgIHJldHVybiBFKGEsIGMpO2Nhc2UgXCJhdHRyaWJ1dGVcIjpcbiAgICAgICAgcmV0dXJuIGEuZ2V0QXR0cmlidXRlKGMpO31yZXR1cm4gYVtjXSB8fCAwO1xuICB9ZnVuY3Rpb24gTChhLCBjKSB7XG4gICAgdmFyIGQgPSAvXihcXCo9fFxcKz18LT0pLy5leGVjKGEpO2lmICghZCkgcmV0dXJuIGE7dmFyIGIgPSB5KGEpIHx8IDA7YyA9IHBhcnNlRmxvYXQoYyk7YSA9IHBhcnNlRmxvYXQoYS5yZXBsYWNlKGRbMF0sIFwiXCIpKTtzd2l0Y2ggKGRbMF1bMF0pIHtjYXNlIFwiK1wiOlxuICAgICAgICByZXR1cm4gYyArIGEgKyBiO2Nhc2UgXCItXCI6XG4gICAgICAgIHJldHVybiBjIC0gYSArIGI7Y2FzZSBcIipcIjpcbiAgICAgICAgcmV0dXJuIGMgKiBhICsgYjt9XG4gIH1mdW5jdGlvbiBGKGEsIGMpIHtcbiAgICByZXR1cm4gTWF0aC5zcXJ0KE1hdGgucG93KGMueCAtIGEueCwgMikgKyBNYXRoLnBvdyhjLnkgLSBhLnksIDIpKTtcbiAgfWZ1bmN0aW9uIE0oYSkge1xuICAgIGEgPSBhLnBvaW50cztmb3IgKHZhciBjID0gMCwgZCwgYiA9IDA7IGIgPCBhLm51bWJlck9mSXRlbXM7IGIrKykge1xuICAgICAgdmFyIGYgPSBhLmdldEl0ZW0oYik7MCA8IGIgJiYgKGMgKz0gRihkLCBmKSk7ZCA9IGY7XG4gICAgfXJldHVybiBjO1xuICB9ZnVuY3Rpb24gTihhKSB7XG4gICAgaWYgKGEuZ2V0VG90YWxMZW5ndGgpIHJldHVybiBhLmdldFRvdGFsTGVuZ3RoKCk7c3dpdGNoIChhLnRhZ05hbWUudG9Mb3dlckNhc2UoKSkge2Nhc2UgXCJjaXJjbGVcIjpcbiAgICAgICAgcmV0dXJuIDIgKiBNYXRoLlBJICogYS5nZXRBdHRyaWJ1dGUoXCJyXCIpO2Nhc2UgXCJyZWN0XCI6XG4gICAgICAgIHJldHVybiAyICogYS5nZXRBdHRyaWJ1dGUoXCJ3aWR0aFwiKSArIDIgKiBhLmdldEF0dHJpYnV0ZShcImhlaWdodFwiKTtjYXNlIFwibGluZVwiOlxuICAgICAgICByZXR1cm4gRih7IHg6IGEuZ2V0QXR0cmlidXRlKFwieDFcIiksIHk6IGEuZ2V0QXR0cmlidXRlKFwieTFcIikgfSwgeyB4OiBhLmdldEF0dHJpYnV0ZShcIngyXCIpLCB5OiBhLmdldEF0dHJpYnV0ZShcInkyXCIpIH0pO2Nhc2UgXCJwb2x5bGluZVwiOlxuICAgICAgICByZXR1cm4gTShhKTtjYXNlIFwicG9seWdvblwiOlxuICAgICAgICB2YXIgYyA9IGEucG9pbnRzO3JldHVybiBNKGEpICsgRihjLmdldEl0ZW0oYy5udW1iZXJPZkl0ZW1zIC0gMSksIGMuZ2V0SXRlbSgwKSk7fVxuICB9ZnVuY3Rpb24gWShhLCBjKSB7XG4gICAgZnVuY3Rpb24gZChiKSB7XG4gICAgICBiID0gdm9pZCAwID09PSBiID8gMCA6IGI7cmV0dXJuIGEuZWwuZ2V0UG9pbnRBdExlbmd0aCgxIDw9IGMgKyBiID8gYyArIGIgOiAwKTtcbiAgICB9dmFyIGIgPSBkKCksXG4gICAgICAgIGYgPSBkKC0xKSxcbiAgICAgICAgbiA9IGQoMSk7c3dpdGNoIChhLnByb3BlcnR5KSB7Y2FzZSBcInhcIjpcbiAgICAgICAgcmV0dXJuIGIueDtjYXNlIFwieVwiOlxuICAgICAgICByZXR1cm4gYi55O1xuICAgICAgY2FzZSBcImFuZ2xlXCI6XG4gICAgICAgIHJldHVybiAxODAgKiBNYXRoLmF0YW4yKG4ueSAtIGYueSwgbi54IC0gZi54KSAvIE1hdGguUEk7fVxuICB9ZnVuY3Rpb24gTyhhLCBjKSB7XG4gICAgdmFyIGQgPSAvLT9cXGQqXFwuP1xcZCsvZyxcbiAgICAgICAgYjtiID0gaC5wdGgoYSkgPyBhLnRvdGFsTGVuZ3RoIDogYTtpZiAoaC5jb2woYikpIHtcbiAgICAgIGlmIChoLnJnYihiKSkge1xuICAgICAgICB2YXIgZiA9IC9yZ2JcXCgoXFxkKyxcXHMqW1xcZF0rLFxccypbXFxkXSspXFwpL2cuZXhlYyhiKTtiID0gZiA/IFwicmdiYShcIiArIGZbMV0gKyBcIiwxKVwiIDogYjtcbiAgICAgIH0gZWxzZSBiID0gaC5oZXgoYikgPyBUKGIpIDogaC5oc2woYikgPyBVKGIpIDogdm9pZCAwO1xuICAgIH0gZWxzZSBmID0gKGYgPSB5KGIpKSA/IGIuc3Vic3RyKDAsIGIubGVuZ3RoIC0gZi5sZW5ndGgpIDogYiwgYiA9IGMgJiYgIS9cXHMvZy50ZXN0KGIpID8gZiArIGMgOiBmO2IgKz0gXCJcIjtyZXR1cm4geyBvcmlnaW5hbDogYiwgbnVtYmVyczogYi5tYXRjaChkKSA/IGIubWF0Y2goZCkubWFwKE51bWJlcikgOiBbMF0sIHN0cmluZ3M6IGguc3RyKGEpIHx8IGMgPyBiLnNwbGl0KGQpIDogW10gfTtcbiAgfWZ1bmN0aW9uIFAoYSkge1xuICAgIGEgPSBhID8gcChoLmFycihhKSA/IGEubWFwKG0pIDogbShhKSkgOiBbXTtyZXR1cm4gcihhLCBmdW5jdGlvbiAoYSwgZCwgYikge1xuICAgICAgcmV0dXJuIGIuaW5kZXhPZihhKSA9PT0gZDtcbiAgICB9KTtcbiAgfWZ1bmN0aW9uIFooYSkge1xuICAgIHZhciBjID0gUChhKTtyZXR1cm4gYy5tYXAoZnVuY3Rpb24gKGEsIGIpIHtcbiAgICAgIHJldHVybiB7IHRhcmdldDogYSwgaWQ6IGIsIHRvdGFsOiBjLmxlbmd0aCB9O1xuICAgIH0pO1xuICB9ZnVuY3Rpb24gYWEoYSwgYykge1xuICAgIHZhciBkID0gQyhjKTtpZiAoaC5hcnIoYSkpIHtcbiAgICAgIHZhciBiID0gYS5sZW5ndGg7MiAhPT0gYiB8fCBoLm9iaihhWzBdKSA/IGguZm5jKGMuZHVyYXRpb24pIHx8IChkLmR1cmF0aW9uID0gYy5kdXJhdGlvbiAvIGIpIDogYSA9IHsgdmFsdWU6IGEgfTtcbiAgICB9cmV0dXJuIG0oYSkubWFwKGZ1bmN0aW9uIChhLCBiKSB7XG4gICAgICBiID0gYiA/IDAgOiBjLmRlbGF5O2EgPSBoLm9iaihhKSAmJiAhaC5wdGgoYSkgPyBhIDogeyB2YWx1ZTogYSB9O2gudW5kKGEuZGVsYXkpICYmIChhLmRlbGF5ID0gYik7cmV0dXJuIGE7XG4gICAgfSkubWFwKGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4geihhLCBkKTtcbiAgICB9KTtcbiAgfWZ1bmN0aW9uIGJhKGEsIGMpIHtcbiAgICB2YXIgZCA9IHt9LFxuICAgICAgICBiO2ZvciAoYiBpbiBhKSB7XG4gICAgICB2YXIgZiA9IEkoYVtiXSwgYyk7aC5hcnIoZikgJiYgKGYgPSBmLm1hcChmdW5jdGlvbiAoYSkge1xuICAgICAgICByZXR1cm4gSShhLCBjKTtcbiAgICAgIH0pLCAxID09PSBmLmxlbmd0aCAmJiAoZiA9IGZbMF0pKTtkW2JdID0gZjtcbiAgICB9ZC5kdXJhdGlvbiA9IHBhcnNlRmxvYXQoZC5kdXJhdGlvbik7ZC5kZWxheSA9IHBhcnNlRmxvYXQoZC5kZWxheSk7cmV0dXJuIGQ7XG4gIH1mdW5jdGlvbiBjYShhKSB7XG4gICAgcmV0dXJuIGguYXJyKGEpID8gQS5hcHBseSh0aGlzLCBhKSA6IFFbYV07XG4gIH1mdW5jdGlvbiBkYShhLCBjKSB7XG4gICAgdmFyIGQ7cmV0dXJuIGEudHdlZW5zLm1hcChmdW5jdGlvbiAoYikge1xuICAgICAgYiA9IGJhKGIsIGMpO3ZhciBmID0gYi52YWx1ZSxcbiAgICAgICAgICBlID0gSyhjLnRhcmdldCwgYS5uYW1lKSxcbiAgICAgICAgICBrID0gZCA/IGQudG8ub3JpZ2luYWwgOiBlLFxuICAgICAgICAgIGsgPSBoLmFycihmKSA/IGZbMF0gOiBrLFxuICAgICAgICAgIHcgPSBMKGguYXJyKGYpID8gZlsxXSA6IGYsIGspLFxuICAgICAgICAgIGUgPSB5KHcpIHx8IHkoaykgfHwgeShlKTtiLmZyb20gPSBPKGssIGUpO2IudG8gPSBPKHcsIGUpO2Iuc3RhcnQgPSBkID8gZC5lbmQgOiBhLm9mZnNldDtiLmVuZCA9IGIuc3RhcnQgKyBiLmRlbGF5ICsgYi5kdXJhdGlvbjtiLmVhc2luZyA9IGNhKGIuZWFzaW5nKTtiLmVsYXN0aWNpdHkgPSAoMUUzIC0gTWF0aC5taW4oTWF0aC5tYXgoYi5lbGFzdGljaXR5LCAxKSwgOTk5KSkgLyAxRTM7Yi5pc1BhdGggPSBoLnB0aChmKTtiLmlzQ29sb3IgPSBoLmNvbChiLmZyb20ub3JpZ2luYWwpO2IuaXNDb2xvciAmJiAoYi5yb3VuZCA9IDEpO3JldHVybiBkID0gYjtcbiAgICB9KTtcbiAgfWZ1bmN0aW9uIGVhKGEsIGMpIHtcbiAgICByZXR1cm4gcihwKGEubWFwKGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gYy5tYXAoZnVuY3Rpb24gKGIpIHtcbiAgICAgICAgdmFyIGMgPSBKKGEudGFyZ2V0LCBiLm5hbWUpO2lmIChjKSB7XG4gICAgICAgICAgdmFyIGQgPSBkYShiLCBhKTtiID0geyB0eXBlOiBjLCBwcm9wZXJ0eTogYi5uYW1lLCBhbmltYXRhYmxlOiBhLCB0d2VlbnM6IGQsIGR1cmF0aW9uOiBkW2QubGVuZ3RoIC0gMV0uZW5kLCBkZWxheTogZFswXS5kZWxheSB9O1xuICAgICAgICB9IGVsc2UgYiA9IHZvaWQgMDtyZXR1cm4gYjtcbiAgICAgIH0pO1xuICAgIH0pKSwgZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiAhaC51bmQoYSk7XG4gICAgfSk7XG4gIH1mdW5jdGlvbiBSKGEsIGMsIGQsIGIpIHtcbiAgICB2YXIgZiA9IFwiZGVsYXlcIiA9PT0gYTtyZXR1cm4gYy5sZW5ndGggPyAoZiA/IE1hdGgubWluIDogTWF0aC5tYXgpLmFwcGx5KE1hdGgsIGMubWFwKGZ1bmN0aW9uIChiKSB7XG4gICAgICByZXR1cm4gYlthXTtcbiAgICB9KSkgOiBmID8gYi5kZWxheSA6IGQub2Zmc2V0ICsgYi5kZWxheSArIGIuZHVyYXRpb247XG4gIH1mdW5jdGlvbiBmYShhKSB7XG4gICAgdmFyIGMgPSBEKGdhLCBhKSxcbiAgICAgICAgZCA9IEQoUywgYSksXG4gICAgICAgIGIgPSBaKGEudGFyZ2V0cyksXG4gICAgICAgIGYgPSBbXSxcbiAgICAgICAgZSA9IHooYywgZCksXG4gICAgICAgIGs7Zm9yIChrIGluIGEpIHtcbiAgICAgIGUuaGFzT3duUHJvcGVydHkoaykgfHwgXCJ0YXJnZXRzXCIgPT09IGsgfHwgZi5wdXNoKHsgbmFtZTogaywgb2Zmc2V0OiBlLm9mZnNldCwgdHdlZW5zOiBhYShhW2tdLCBkKSB9KTtcbiAgICB9YSA9IGVhKGIsIGYpO3JldHVybiB6KGMsIHsgY2hpbGRyZW46IFtdLCBhbmltYXRhYmxlczogYiwgYW5pbWF0aW9uczogYSwgZHVyYXRpb246IFIoXCJkdXJhdGlvblwiLCBhLCBjLCBkKSwgZGVsYXk6IFIoXCJkZWxheVwiLCBhLCBjLCBkKSB9KTtcbiAgfWZ1bmN0aW9uIHEoYSkge1xuICAgIGZ1bmN0aW9uIGMoKSB7XG4gICAgICByZXR1cm4gd2luZG93LlByb21pc2UgJiYgbmV3IFByb21pc2UoZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcmV0dXJuIHAgPSBhO1xuICAgICAgfSk7XG4gICAgfWZ1bmN0aW9uIGQoYSkge1xuICAgICAgcmV0dXJuIGcucmV2ZXJzZWQgPyBnLmR1cmF0aW9uIC0gYSA6IGE7XG4gICAgfWZ1bmN0aW9uIGIoYSkge1xuICAgICAgZm9yICh2YXIgYiA9IDAsIGMgPSB7fSwgZCA9IGcuYW5pbWF0aW9ucywgZiA9IGQubGVuZ3RoOyBiIDwgZjspIHtcbiAgICAgICAgdmFyIGUgPSBkW2JdLFxuICAgICAgICAgICAgayA9IGUuYW5pbWF0YWJsZSxcbiAgICAgICAgICAgIGggPSBlLnR3ZWVucyxcbiAgICAgICAgICAgIG4gPSBoLmxlbmd0aCAtIDEsXG4gICAgICAgICAgICBsID0gaFtuXTtuICYmIChsID0gcihoLCBmdW5jdGlvbiAoYikge1xuICAgICAgICAgIHJldHVybiBhIDwgYi5lbmQ7XG4gICAgICAgIH0pWzBdIHx8IGwpO2ZvciAodmFyIGggPSBNYXRoLm1pbihNYXRoLm1heChhIC0gbC5zdGFydCAtIGwuZGVsYXksIDApLCBsLmR1cmF0aW9uKSAvIGwuZHVyYXRpb24sIHcgPSBpc05hTihoKSA/IDEgOiBsLmVhc2luZyhoLCBsLmVsYXN0aWNpdHkpLCBoID0gbC50by5zdHJpbmdzLCBwID0gbC5yb3VuZCwgbiA9IFtdLCBtID0gdm9pZCAwLCBtID0gbC50by5udW1iZXJzLmxlbmd0aCwgdCA9IDA7IHQgPCBtOyB0KyspIHtcbiAgICAgICAgICB2YXIgeCA9IHZvaWQgMCxcbiAgICAgICAgICAgICAgeCA9IGwudG8ubnVtYmVyc1t0XSxcbiAgICAgICAgICAgICAgcSA9IGwuZnJvbS5udW1iZXJzW3RdLFxuICAgICAgICAgICAgICB4ID0gbC5pc1BhdGggPyBZKGwudmFsdWUsIHcgKiB4KSA6IHEgKyB3ICogKHggLSBxKTtwICYmIChsLmlzQ29sb3IgJiYgMiA8IHQgfHwgKHggPSBNYXRoLnJvdW5kKHggKiBwKSAvIHApKTtuLnB1c2goeCk7XG4gICAgICAgIH1pZiAobCA9IGgubGVuZ3RoKSBmb3IgKG0gPSBoWzBdLCB3ID0gMDsgdyA8IGw7IHcrKykge1xuICAgICAgICAgIHAgPSBoW3cgKyAxXSwgdCA9IG5bd10sIGlzTmFOKHQpIHx8IChtID0gcCA/IG0gKyAodCArIHApIDogbSArICh0ICsgXCIgXCIpKTtcbiAgICAgICAgfSBlbHNlIG0gPSBuWzBdO2hhW2UudHlwZV0oay50YXJnZXQsIGUucHJvcGVydHksIG0sIGMsIGsuaWQpO2UuY3VycmVudFZhbHVlID0gbTtiKys7XG4gICAgICB9aWYgKGIgPSBPYmplY3Qua2V5cyhjKS5sZW5ndGgpIGZvciAoZCA9IDA7IGQgPCBiOyBkKyspIHtcbiAgICAgICAgSCB8fCAoSCA9IEUoZG9jdW1lbnQuYm9keSwgXCJ0cmFuc2Zvcm1cIikgPyBcInRyYW5zZm9ybVwiIDogXCItd2Via2l0LXRyYW5zZm9ybVwiKSwgZy5hbmltYXRhYmxlc1tkXS50YXJnZXQuc3R5bGVbSF0gPSBjW2RdLmpvaW4oXCIgXCIpO1xuICAgICAgfWcuY3VycmVudFRpbWUgPSBhO2cucHJvZ3Jlc3MgPSBhIC8gZy5kdXJhdGlvbiAqIDEwMDtcbiAgICB9ZnVuY3Rpb24gZihhKSB7XG4gICAgICBpZiAoZ1thXSkgZ1thXShnKTtcbiAgICB9ZnVuY3Rpb24gZSgpIHtcbiAgICAgIGcucmVtYWluaW5nICYmICEwICE9PSBnLnJlbWFpbmluZyAmJiBnLnJlbWFpbmluZy0tO1xuICAgIH1mdW5jdGlvbiBrKGEpIHtcbiAgICAgIHZhciBrID0gZy5kdXJhdGlvbixcbiAgICAgICAgICBuID0gZy5vZmZzZXQsXG4gICAgICAgICAgdyA9IG4gKyBnLmRlbGF5LFxuICAgICAgICAgIHIgPSBnLmN1cnJlbnRUaW1lLFxuICAgICAgICAgIHggPSBnLnJldmVyc2VkLFxuICAgICAgICAgIHEgPSBkKGEpO2lmIChnLmNoaWxkcmVuLmxlbmd0aCkge1xuICAgICAgICB2YXIgdSA9IGcuY2hpbGRyZW4sXG4gICAgICAgICAgICB2ID0gdS5sZW5ndGg7XG4gICAgICAgIGlmIChxID49IGcuY3VycmVudFRpbWUpIGZvciAodmFyIEcgPSAwOyBHIDwgdjsgRysrKSB7XG4gICAgICAgICAgdVtHXS5zZWVrKHEpO1xuICAgICAgICB9IGVsc2UgZm9yICg7IHYtLTspIHtcbiAgICAgICAgICB1W3ZdLnNlZWsocSk7XG4gICAgICAgIH1cbiAgICAgIH1pZiAocSA+PSB3IHx8ICFrKSBnLmJlZ2FuIHx8IChnLmJlZ2FuID0gITAsIGYoXCJiZWdpblwiKSksIGYoXCJydW5cIik7aWYgKHEgPiBuICYmIHEgPCBrKSBiKHEpO2Vsc2UgaWYgKHEgPD0gbiAmJiAwICE9PSByICYmIChiKDApLCB4ICYmIGUoKSksIHEgPj0gayAmJiByICE9PSBrIHx8ICFrKSBiKGspLCB4IHx8IGUoKTtmKFwidXBkYXRlXCIpO2EgPj0gayAmJiAoZy5yZW1haW5pbmcgPyAodCA9IGgsIFwiYWx0ZXJuYXRlXCIgPT09IGcuZGlyZWN0aW9uICYmIChnLnJldmVyc2VkID0gIWcucmV2ZXJzZWQpKSA6IChnLnBhdXNlKCksIGcuY29tcGxldGVkIHx8IChnLmNvbXBsZXRlZCA9ICEwLCBmKFwiY29tcGxldGVcIiksIFwiUHJvbWlzZVwiIGluIHdpbmRvdyAmJiAocCgpLCBtID0gYygpKSkpLCBsID0gMCk7XG4gICAgfWEgPSB2b2lkIDAgPT09IGEgPyB7fSA6IGE7dmFyIGgsXG4gICAgICAgIHQsXG4gICAgICAgIGwgPSAwLFxuICAgICAgICBwID0gbnVsbCxcbiAgICAgICAgbSA9IGMoKSxcbiAgICAgICAgZyA9IGZhKGEpO2cucmVzZXQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgYSA9IGcuZGlyZWN0aW9uLFxuICAgICAgICAgIGMgPSBnLmxvb3A7Zy5jdXJyZW50VGltZSA9IDA7Zy5wcm9ncmVzcyA9IDA7Zy5wYXVzZWQgPSAhMDtnLmJlZ2FuID0gITE7Zy5jb21wbGV0ZWQgPSAhMTtnLnJldmVyc2VkID0gXCJyZXZlcnNlXCIgPT09IGE7Zy5yZW1haW5pbmcgPSBcImFsdGVybmF0ZVwiID09PSBhICYmIDEgPT09IGMgPyAyIDogYztiKDApO2ZvciAoYSA9IGcuY2hpbGRyZW4ubGVuZ3RoOyBhLS07KSB7XG4gICAgICAgIGcuY2hpbGRyZW5bYV0ucmVzZXQoKTtcbiAgICAgIH1cbiAgICB9O2cudGljayA9IGZ1bmN0aW9uIChhKSB7XG4gICAgICBoID0gYTt0IHx8ICh0ID0gaCk7aygobCArIGggLSB0KSAqIHEuc3BlZWQpO1xuICAgIH07Zy5zZWVrID0gZnVuY3Rpb24gKGEpIHtcbiAgICAgIGsoZChhKSk7XG4gICAgfTtnLnBhdXNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGEgPSB2LmluZGV4T2YoZyk7LTEgPCBhICYmIHYuc3BsaWNlKGEsIDEpO2cucGF1c2VkID0gITA7XG4gICAgfTtnLnBsYXkgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBnLnBhdXNlZCAmJiAoZy5wYXVzZWQgPSAhMSwgdCA9IDAsIGwgPSBkKGcuY3VycmVudFRpbWUpLCB2LnB1c2goZyksIEIgfHwgaWEoKSk7XG4gICAgfTtnLnJldmVyc2UgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBnLnJldmVyc2VkID0gIWcucmV2ZXJzZWQ7dCA9IDA7bCA9IGQoZy5jdXJyZW50VGltZSk7XG4gICAgfTtnLnJlc3RhcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICBnLnBhdXNlKCk7XG4gICAgICBnLnJlc2V0KCk7Zy5wbGF5KCk7XG4gICAgfTtnLmZpbmlzaGVkID0gbTtnLnJlc2V0KCk7Zy5hdXRvcGxheSAmJiBnLnBsYXkoKTtyZXR1cm4gZztcbiAgfXZhciBnYSA9IHsgdXBkYXRlOiB2b2lkIDAsIGJlZ2luOiB2b2lkIDAsIHJ1bjogdm9pZCAwLCBjb21wbGV0ZTogdm9pZCAwLCBsb29wOiAxLCBkaXJlY3Rpb246IFwibm9ybWFsXCIsIGF1dG9wbGF5OiAhMCwgb2Zmc2V0OiAwIH0sXG4gICAgICBTID0geyBkdXJhdGlvbjogMUUzLCBkZWxheTogMCwgZWFzaW5nOiBcImVhc2VPdXRFbGFzdGljXCIsIGVsYXN0aWNpdHk6IDUwMCwgcm91bmQ6IDAgfSxcbiAgICAgIFcgPSBcInRyYW5zbGF0ZVggdHJhbnNsYXRlWSB0cmFuc2xhdGVaIHJvdGF0ZSByb3RhdGVYIHJvdGF0ZVkgcm90YXRlWiBzY2FsZSBzY2FsZVggc2NhbGVZIHNjYWxlWiBza2V3WCBza2V3WSBwZXJzcGVjdGl2ZVwiLnNwbGl0KFwiIFwiKSxcbiAgICAgIEgsXG4gICAgICBoID0geyBhcnI6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gQXJyYXkuaXNBcnJheShhKTtcbiAgICB9LCBvYmo6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gLTEgPCBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYSkuaW5kZXhPZihcIk9iamVjdFwiKTtcbiAgICB9LFxuICAgIHB0aDogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBoLm9iaihhKSAmJiBhLmhhc093blByb3BlcnR5KFwidG90YWxMZW5ndGhcIik7XG4gICAgfSwgc3ZnOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGEgaW5zdGFuY2VvZiBTVkdFbGVtZW50O1xuICAgIH0sIGRvbTogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBhLm5vZGVUeXBlIHx8IGguc3ZnKGEpO1xuICAgIH0sIHN0cjogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiBcInN0cmluZ1wiID09PSB0eXBlb2YgYTtcbiAgICB9LCBmbmM6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gXCJmdW5jdGlvblwiID09PSB0eXBlb2YgYTtcbiAgICB9LCB1bmQ6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gXCJ1bmRlZmluZWRcIiA9PT0gdHlwZW9mIGE7XG4gICAgfSwgaGV4OiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuICgvKF4jWzAtOUEtRl17Nn0kKXwoXiNbMC05QS1GXXszfSQpL2kudGVzdChhKVxuICAgICAgKTtcbiAgICB9LCByZ2I6IGZ1bmN0aW9uIChhKSB7XG4gICAgICByZXR1cm4gKC9ecmdiLy50ZXN0KGEpXG4gICAgICApO1xuICAgIH0sIGhzbDogZnVuY3Rpb24gKGEpIHtcbiAgICAgIHJldHVybiAoL15oc2wvLnRlc3QoYSlcbiAgICAgICk7XG4gICAgfSwgY29sOiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIGguaGV4KGEpIHx8IGgucmdiKGEpIHx8IGguaHNsKGEpO1xuICAgIH0gfSxcbiAgICAgIEEgPSBmdW5jdGlvbiAoKSB7XG4gICAgZnVuY3Rpb24gYShhLCBkLCBiKSB7XG4gICAgICByZXR1cm4gKCgoMSAtIDMgKiBiICsgMyAqIGQpICogYSArICgzICogYiAtIDYgKiBkKSkgKiBhICsgMyAqIGQpICogYTtcbiAgICB9cmV0dXJuIGZ1bmN0aW9uIChjLCBkLCBiLCBmKSB7XG4gICAgICBpZiAoMCA8PSBjICYmIDEgPj0gYyAmJiAwIDw9IGIgJiYgMSA+PSBiKSB7XG4gICAgICAgIHZhciBlID0gbmV3IEZsb2F0MzJBcnJheSgxMSk7aWYgKGMgIT09IGQgfHwgYiAhPT0gZikgZm9yICh2YXIgayA9IDA7IDExID4gazsgKytrKSB7XG4gICAgICAgICAgZVtrXSA9IGEoLjEgKiBrLCBjLCBiKTtcbiAgICAgICAgfXJldHVybiBmdW5jdGlvbiAoaykge1xuICAgICAgICAgIGlmIChjID09PSBkICYmIGIgPT09IGYpIHJldHVybiBrO2lmICgwID09PSBrKSByZXR1cm4gMDtpZiAoMSA9PT0gaykgcmV0dXJuIDE7Zm9yICh2YXIgaCA9IDAsIGwgPSAxOyAxMCAhPT0gbCAmJiBlW2xdIDw9IGs7ICsrbCkge1xuICAgICAgICAgICAgaCArPSAuMTtcbiAgICAgICAgICB9LS1sO3ZhciBsID0gaCArIChrIC0gZVtsXSkgLyAoZVtsICsgMV0gLSBlW2xdKSAqIC4xLFxuICAgICAgICAgICAgICBuID0gMyAqICgxIC0gMyAqIGIgKyAzICogYykgKiBsICogbCArIDIgKiAoMyAqIGIgLSA2ICogYykgKiBsICsgMyAqIGM7aWYgKC4wMDEgPD0gbikge1xuICAgICAgICAgICAgZm9yIChoID0gMDsgNCA+IGg7ICsraCkge1xuICAgICAgICAgICAgICBuID0gMyAqICgxIC0gMyAqIGIgKyAzICogYykgKiBsICogbCArIDIgKiAoMyAqIGIgLSA2ICogYykgKiBsICsgMyAqIGM7aWYgKDAgPT09IG4pIGJyZWFrO3ZhciBtID0gYShsLCBjLCBiKSAtIGssXG4gICAgICAgICAgICAgICAgICBsID0gbCAtIG0gLyBuO1xuICAgICAgICAgICAgfWsgPSBsO1xuICAgICAgICAgIH0gZWxzZSBpZiAoMCA9PT0gbikgayA9IGw7ZWxzZSB7XG4gICAgICAgICAgICB2YXIgbCA9IGgsXG4gICAgICAgICAgICAgICAgaCA9IGggKyAuMSxcbiAgICAgICAgICAgICAgICBnID0gMDtkbyB7XG4gICAgICAgICAgICAgIG0gPSBsICsgKGggLSBsKSAvIDIsIG4gPSBhKG0sIGMsIGIpIC0gaywgMCA8IG4gPyBoID0gbSA6IGwgPSBtO1xuICAgICAgICAgICAgfSB3aGlsZSAoMWUtNyA8IE1hdGguYWJzKG4pICYmIDEwID4gKytnKTtrID0gbTtcbiAgICAgICAgICB9cmV0dXJuIGEoaywgZCwgZik7XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfTtcbiAgfSgpLFxuICAgICAgUSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBhKGEsIGIpIHtcbiAgICAgIHJldHVybiAwID09PSBhIHx8IDEgPT09IGEgPyBhIDogLU1hdGgucG93KDIsIDEwICogKGEgLSAxKSkgKiBNYXRoLnNpbigyICogKGEgLSAxIC0gYiAvICgyICogTWF0aC5QSSkgKiBNYXRoLmFzaW4oMSkpICogTWF0aC5QSSAvIGIpO1xuICAgIH12YXIgYyA9IFwiUXVhZCBDdWJpYyBRdWFydCBRdWludCBTaW5lIEV4cG8gQ2lyYyBCYWNrIEVsYXN0aWNcIi5zcGxpdChcIiBcIiksXG4gICAgICAgIGQgPSB7IEluOiBbWy41NSwgLjA4NSwgLjY4LCAuNTNdLCBbLjU1LCAuMDU1LCAuNjc1LCAuMTldLCBbLjg5NSwgLjAzLCAuNjg1LCAuMjJdLCBbLjc1NSwgLjA1LCAuODU1LCAuMDZdLCBbLjQ3LCAwLCAuNzQ1LCAuNzE1XSwgWy45NSwgLjA1LCAuNzk1LCAuMDM1XSwgWy42LCAuMDQsIC45OCwgLjMzNV0sIFsuNiwgLS4yOCwgLjczNSwgLjA0NV0sIGFdLCBPdXQ6IFtbLjI1LCAuNDYsIC40NSwgLjk0XSwgWy4yMTUsIC42MSwgLjM1NSwgMV0sIFsuMTY1LCAuODQsIC40NCwgMV0sIFsuMjMsIDEsIC4zMiwgMV0sIFsuMzksIC41NzUsIC41NjUsIDFdLCBbLjE5LCAxLCAuMjIsIDFdLCBbLjA3NSwgLjgyLCAuMTY1LCAxXSwgWy4xNzUsIC44ODUsIC4zMiwgMS4yNzVdLCBmdW5jdGlvbiAoYiwgYykge1xuICAgICAgICByZXR1cm4gMSAtIGEoMSAtIGIsIGMpO1xuICAgICAgfV0sIEluT3V0OiBbWy40NTUsIC4wMywgLjUxNSwgLjk1NV0sIFsuNjQ1LCAuMDQ1LCAuMzU1LCAxXSwgWy43NywgMCwgLjE3NSwgMV0sIFsuODYsIDAsIC4wNywgMV0sIFsuNDQ1LCAuMDUsIC41NSwgLjk1XSwgWzEsIDAsIDAsIDFdLCBbLjc4NSwgLjEzNSwgLjE1LCAuODZdLCBbLjY4LCAtLjU1LCAuMjY1LCAxLjU1XSwgZnVuY3Rpb24gKGIsIGMpIHtcbiAgICAgICAgcmV0dXJuIC41ID4gYiA/IGEoMiAqIGIsIGMpIC8gMiA6IDEgLSBhKC0yICogYiArIDIsIGMpIC8gMjtcbiAgICAgIH1dIH0sXG4gICAgICAgIGIgPSB7IGxpbmVhcjogQSguMjUsIC4yNSwgLjc1LCAuNzUpIH0sXG4gICAgICAgIGYgPSB7fSxcbiAgICAgICAgZTtmb3IgKGUgaW4gZCkge1xuICAgICAgZi50eXBlID0gZSwgZFtmLnR5cGVdLmZvckVhY2goZnVuY3Rpb24gKGEpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBmKSB7XG4gICAgICAgICAgYltcImVhc2VcIiArIGEudHlwZSArIGNbZl1dID0gaC5mbmMoZCkgPyBkIDogQS5hcHBseSgkanNjb21wJHRoaXMsIGQpO1xuICAgICAgICB9O1xuICAgICAgfShmKSksIGYgPSB7IHR5cGU6IGYudHlwZSB9O1xuICAgIH1yZXR1cm4gYjtcbiAgfSgpLFxuICAgICAgaGEgPSB7IGNzczogZnVuY3Rpb24gKGEsIGMsIGQpIHtcbiAgICAgIHJldHVybiBhLnN0eWxlW2NdID0gZDtcbiAgICB9LCBhdHRyaWJ1dGU6IGZ1bmN0aW9uIChhLCBjLCBkKSB7XG4gICAgICByZXR1cm4gYS5zZXRBdHRyaWJ1dGUoYywgZCk7XG4gICAgfSwgb2JqZWN0OiBmdW5jdGlvbiAoYSwgYywgZCkge1xuICAgICAgcmV0dXJuIGFbY10gPSBkO1xuICAgIH0sIHRyYW5zZm9ybTogZnVuY3Rpb24gKGEsIGMsIGQsIGIsIGYpIHtcbiAgICAgIGJbZl0gfHwgKGJbZl0gPSBbXSk7YltmXS5wdXNoKGMgKyBcIihcIiArIGQgKyBcIilcIik7XG4gICAgfSB9LFxuICAgICAgdiA9IFtdLFxuICAgICAgQiA9IDAsXG4gICAgICBpYSA9IGZ1bmN0aW9uICgpIHtcbiAgICBmdW5jdGlvbiBhKCkge1xuICAgICAgQiA9IHJlcXVlc3RBbmltYXRpb25GcmFtZShjKTtcbiAgICB9ZnVuY3Rpb24gYyhjKSB7XG4gICAgICB2YXIgYiA9IHYubGVuZ3RoO2lmIChiKSB7XG4gICAgICAgIGZvciAodmFyIGQgPSAwOyBkIDwgYjspIHtcbiAgICAgICAgICB2W2RdICYmIHZbZF0udGljayhjKSwgZCsrO1xuICAgICAgICB9YSgpO1xuICAgICAgfSBlbHNlIGNhbmNlbEFuaW1hdGlvbkZyYW1lKEIpLCBCID0gMDtcbiAgICB9cmV0dXJuIGE7XG4gIH0oKTtxLnZlcnNpb24gPSBcIjIuMi4wXCI7cS5zcGVlZCA9IDE7cS5ydW5uaW5nID0gdjtxLnJlbW92ZSA9IGZ1bmN0aW9uIChhKSB7XG4gICAgYSA9IFAoYSk7Zm9yICh2YXIgYyA9IHYubGVuZ3RoOyBjLS07KSB7XG4gICAgICBmb3IgKHZhciBkID0gdltjXSwgYiA9IGQuYW5pbWF0aW9ucywgZiA9IGIubGVuZ3RoOyBmLS07KSB7XG4gICAgICAgIHUoYSwgYltmXS5hbmltYXRhYmxlLnRhcmdldCkgJiYgKGIuc3BsaWNlKGYsIDEpLCBiLmxlbmd0aCB8fCBkLnBhdXNlKCkpO1xuICAgICAgfVxuICAgIH1cbiAgfTtxLmdldFZhbHVlID0gSztxLnBhdGggPSBmdW5jdGlvbiAoYSwgYykge1xuICAgIHZhciBkID0gaC5zdHIoYSkgPyBlKGEpWzBdIDogYSxcbiAgICAgICAgYiA9IGMgfHwgMTAwO3JldHVybiBmdW5jdGlvbiAoYSkge1xuICAgICAgcmV0dXJuIHsgZWw6IGQsIHByb3BlcnR5OiBhLCB0b3RhbExlbmd0aDogTihkKSAqIChiIC8gMTAwKSB9O1xuICAgIH07XG4gIH07cS5zZXREYXNob2Zmc2V0ID0gZnVuY3Rpb24gKGEpIHtcbiAgICB2YXIgYyA9IE4oYSk7YS5zZXRBdHRyaWJ1dGUoXCJzdHJva2UtZGFzaGFycmF5XCIsIGMpO3JldHVybiBjO1xuICB9O3EuYmV6aWVyID0gQTtxLmVhc2luZ3MgPSBRO3EudGltZWxpbmUgPSBmdW5jdGlvbiAoYSkge1xuICAgIHZhciBjID0gcShhKTtjLnBhdXNlKCk7Yy5kdXJhdGlvbiA9IDA7Yy5hZGQgPSBmdW5jdGlvbiAoZCkge1xuICAgICAgYy5jaGlsZHJlbi5mb3JFYWNoKGZ1bmN0aW9uIChhKSB7XG4gICAgICAgIGEuYmVnYW4gPSAhMDthLmNvbXBsZXRlZCA9ICEwO1xuICAgICAgfSk7bShkKS5mb3JFYWNoKGZ1bmN0aW9uIChiKSB7XG4gICAgICAgIHZhciBkID0geihiLCBEKFMsIGEgfHwge30pKTtkLnRhcmdldHMgPSBkLnRhcmdldHMgfHwgYS50YXJnZXRzO2IgPSBjLmR1cmF0aW9uO3ZhciBlID0gZC5vZmZzZXQ7ZC5hdXRvcGxheSA9ICExO2QuZGlyZWN0aW9uID0gYy5kaXJlY3Rpb247ZC5vZmZzZXQgPSBoLnVuZChlKSA/IGIgOiBMKGUsIGIpO2MuYmVnYW4gPSAhMDtjLmNvbXBsZXRlZCA9ICEwO2Muc2VlayhkLm9mZnNldCk7ZCA9IHEoZCk7ZC5iZWdhbiA9ICEwO2QuY29tcGxldGVkID0gITA7ZC5kdXJhdGlvbiA+IGIgJiYgKGMuZHVyYXRpb24gPSBkLmR1cmF0aW9uKTtjLmNoaWxkcmVuLnB1c2goZCk7XG4gICAgICB9KTtjLnNlZWsoMCk7Yy5yZXNldCgpO2MuYXV0b3BsYXkgJiYgYy5yZXN0YXJ0KCk7cmV0dXJuIGM7XG4gICAgfTtyZXR1cm4gYztcbiAgfTtxLnJhbmRvbSA9IGZ1bmN0aW9uIChhLCBjKSB7XG4gICAgcmV0dXJuIE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIChjIC0gYSArIDEpKSArIGE7XG4gIH07cmV0dXJuIHE7XG59KTtcbjsoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgYWNjb3JkaW9uOiB0cnVlLFxuICAgIG9uT3BlblN0YXJ0OiB1bmRlZmluZWQsXG4gICAgb25PcGVuRW5kOiB1bmRlZmluZWQsXG4gICAgb25DbG9zZVN0YXJ0OiB1bmRlZmluZWQsXG4gICAgb25DbG9zZUVuZDogdW5kZWZpbmVkLFxuICAgIGluRHVyYXRpb246IDMwMCxcbiAgICBvdXREdXJhdGlvbjogMzAwXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgQ29sbGFwc2libGUgPSBmdW5jdGlvbiAoX0NvbXBvbmVudCkge1xuICAgIF9pbmhlcml0cyhDb2xsYXBzaWJsZSwgX0NvbXBvbmVudCk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgQ29sbGFwc2libGUgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDb2xsYXBzaWJsZShlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIENvbGxhcHNpYmxlKTtcblxuICAgICAgdmFyIF90aGlzMyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDb2xsYXBzaWJsZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENvbGxhcHNpYmxlKSkuY2FsbCh0aGlzLCBDb2xsYXBzaWJsZSwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXMzLmVsLk1fQ29sbGFwc2libGUgPSBfdGhpczM7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIGNvbGxhcHNpYmxlXG4gICAgICAgKiBAbWVtYmVyIENvbGxhcHNpYmxlI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbYWNjb3JkaW9uPWZhbHNlXSAtIFR5cGUgb2YgdGhlIGNvbGxhcHNpYmxlXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlblN0YXJ0IC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGJlZm9yZSBjb2xsYXBzaWJsZSBpcyBvcGVuZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuRW5kIC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGFmdGVyIGNvbGxhcHNpYmxlIGlzIG9wZW5lZFxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlU3RhcnQgLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgYmVmb3JlIGNvbGxhcHNpYmxlIGlzIGNsb3NlZFxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlRW5kIC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGFmdGVyIGNvbGxhcHNpYmxlIGlzIGNsb3NlZFxuICAgICAgICogQHByb3Age051bWJlcn0gaW5EdXJhdGlvbiAtIFRyYW5zaXRpb24gaW4gZHVyYXRpb24gaW4gbWlsbGlzZWNvbmRzLlxuICAgICAgICogQHByb3Age051bWJlcn0gb3V0RHVyYXRpb24gLSBUcmFuc2l0aW9uIGR1cmF0aW9uIGluIG1pbGxpc2Vjb25kcy5cbiAgICAgICAqL1xuICAgICAgX3RoaXMzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQ29sbGFwc2libGUuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAvLyBTZXR1cCB0YWIgaW5kaWNlc1xuICAgICAgX3RoaXMzLiRoZWFkZXJzID0gX3RoaXMzLiRlbC5jaGlsZHJlbignbGknKS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWhlYWRlcicpO1xuICAgICAgX3RoaXMzLiRoZWFkZXJzLmF0dHIoJ3RhYmluZGV4JywgMCk7XG5cbiAgICAgIF90aGlzMy5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG5cbiAgICAgIC8vIE9wZW4gZmlyc3QgYWN0aXZlXG4gICAgICB2YXIgJGFjdGl2ZUJvZGllcyA9IF90aGlzMy4kZWwuY2hpbGRyZW4oJ2xpLmFjdGl2ZScpLmNoaWxkcmVuKCcuY29sbGFwc2libGUtYm9keScpO1xuICAgICAgaWYgKF90aGlzMy5vcHRpb25zLmFjY29yZGlvbikge1xuICAgICAgICAvLyBIYW5kbGUgQWNjb3JkaW9uXG4gICAgICAgICRhY3RpdmVCb2RpZXMuZmlyc3QoKS5jc3MoJ2Rpc3BsYXknLCAnYmxvY2snKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEhhbmRsZSBFeHBhbmRhYmxlc1xuICAgICAgICAkYWN0aXZlQm9kaWVzLmNzcygnZGlzcGxheScsICdibG9jaycpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIF90aGlzMztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoQ29sbGFwc2libGUsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuZWwuTV9Db2xsYXBzaWJsZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHZhciBfdGhpczQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ29sbGFwc2libGVLZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVDb2xsYXBzaWJsZUtleWRvd24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuJGhlYWRlcnMuZWFjaChmdW5jdGlvbiAoaGVhZGVyKSB7XG4gICAgICAgICAgaGVhZGVyLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBfdGhpczQuX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93bkJvdW5kKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB2YXIgX3RoaXM1ID0gdGhpcztcblxuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ29sbGFwc2libGVDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy4kaGVhZGVycy5lYWNoKGZ1bmN0aW9uIChoZWFkZXIpIHtcbiAgICAgICAgICBoZWFkZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIF90aGlzNS5faGFuZGxlQ29sbGFwc2libGVLZXlkb3duQm91bmQpO1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgQ29sbGFwc2libGUgQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDb2xsYXBzaWJsZUNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNvbGxhcHNpYmxlQ2xpY2soZSkge1xuICAgICAgICB2YXIgJGhlYWRlciA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jb2xsYXBzaWJsZS1oZWFkZXInKTtcbiAgICAgICAgaWYgKGUudGFyZ2V0ICYmICRoZWFkZXIubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyICRjb2xsYXBzaWJsZSA9ICRoZWFkZXIuY2xvc2VzdCgnLmNvbGxhcHNpYmxlJyk7XG4gICAgICAgICAgaWYgKCRjb2xsYXBzaWJsZVswXSA9PT0gdGhpcy5lbCkge1xuICAgICAgICAgICAgdmFyICRjb2xsYXBzaWJsZUxpID0gJGhlYWRlci5jbG9zZXN0KCdsaScpO1xuICAgICAgICAgICAgdmFyICRjb2xsYXBzaWJsZUxpcyA9ICRjb2xsYXBzaWJsZS5jaGlsZHJlbignbGknKTtcbiAgICAgICAgICAgIHZhciBpc0FjdGl2ZSA9ICRjb2xsYXBzaWJsZUxpWzBdLmNsYXNzTGlzdC5jb250YWlucygnYWN0aXZlJyk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkY29sbGFwc2libGVMaXMuaW5kZXgoJGNvbGxhcHNpYmxlTGkpO1xuXG4gICAgICAgICAgICBpZiAoaXNBY3RpdmUpIHtcbiAgICAgICAgICAgICAgdGhpcy5jbG9zZShpbmRleCk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLm9wZW4oaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDb2xsYXBzaWJsZSBLZXlkb3duXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ29sbGFwc2libGVLZXlkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNvbGxhcHNpYmxlS2V5ZG93bihlKSB7XG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDEzKSB7XG4gICAgICAgICAgdGhpcy5faGFuZGxlQ29sbGFwc2libGVDbGlja0JvdW5kKGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQW5pbWF0ZSBpbiBjb2xsYXBzaWJsZSBzbGlkZVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gMHRoIGluZGV4IG9mIHNsaWRlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUluXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbihpbmRleCkge1xuICAgICAgICB2YXIgX3RoaXM2ID0gdGhpcztcblxuICAgICAgICB2YXIgJGNvbGxhcHNpYmxlTGkgPSB0aGlzLiRlbC5jaGlsZHJlbignbGknKS5lcShpbmRleCk7XG4gICAgICAgIGlmICgkY29sbGFwc2libGVMaS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgJGJvZHkgPSAkY29sbGFwc2libGVMaS5jaGlsZHJlbignLmNvbGxhcHNpYmxlLWJvZHknKTtcblxuICAgICAgICAgIGFuaW0ucmVtb3ZlKCRib2R5WzBdKTtcbiAgICAgICAgICAkYm9keS5jc3Moe1xuICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJyxcbiAgICAgICAgICAgIG92ZXJmbG93OiAnaGlkZGVuJyxcbiAgICAgICAgICAgIGhlaWdodDogMCxcbiAgICAgICAgICAgIHBhZGRpbmdUb3A6ICcnLFxuICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogJydcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHZhciBwVG9wID0gJGJvZHkuY3NzKCdwYWRkaW5nLXRvcCcpO1xuICAgICAgICAgIHZhciBwQm90dG9tID0gJGJvZHkuY3NzKCdwYWRkaW5nLWJvdHRvbScpO1xuICAgICAgICAgIHZhciBmaW5hbEhlaWdodCA9ICRib2R5WzBdLnNjcm9sbEhlaWdodDtcbiAgICAgICAgICAkYm9keS5jc3Moe1xuICAgICAgICAgICAgcGFkZGluZ1RvcDogMCxcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IDBcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgdGFyZ2V0czogJGJvZHlbMF0sXG4gICAgICAgICAgICBoZWlnaHQ6IGZpbmFsSGVpZ2h0LFxuICAgICAgICAgICAgcGFkZGluZ1RvcDogcFRvcCxcbiAgICAgICAgICAgIHBhZGRpbmdCb3R0b206IHBCb3R0b20sXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRDdWJpYycsXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgICAgICAgJGJvZHkuY3NzKHtcbiAgICAgICAgICAgICAgICBvdmVyZmxvdzogJycsXG4gICAgICAgICAgICAgICAgcGFkZGluZ1RvcDogJycsXG4gICAgICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogJycsXG4gICAgICAgICAgICAgICAgaGVpZ2h0OiAnJ1xuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAvLyBvbk9wZW5FbmQgY2FsbGJhY2tcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczYub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBfdGhpczYub3B0aW9ucy5vbk9wZW5FbmQuY2FsbChfdGhpczYsICRjb2xsYXBzaWJsZUxpWzBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQW5pbWF0ZSBvdXQgY29sbGFwc2libGUgc2xpZGVcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleCAtIDB0aCBpbmRleCBvZiBzbGlkZSB0byBvcGVuXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZU91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0KGluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpczcgPSB0aGlzO1xuXG4gICAgICAgIHZhciAkY29sbGFwc2libGVMaSA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KTtcbiAgICAgICAgaWYgKCRjb2xsYXBzaWJsZUxpLmxlbmd0aCkge1xuICAgICAgICAgIHZhciAkYm9keSA9ICRjb2xsYXBzaWJsZUxpLmNoaWxkcmVuKCcuY29sbGFwc2libGUtYm9keScpO1xuICAgICAgICAgIGFuaW0ucmVtb3ZlKCRib2R5WzBdKTtcbiAgICAgICAgICAkYm9keS5jc3MoJ292ZXJmbG93JywgJ2hpZGRlbicpO1xuICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgdGFyZ2V0czogJGJvZHlbMF0sXG4gICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICBwYWRkaW5nVG9wOiAwLFxuICAgICAgICAgICAgcGFkZGluZ0JvdHRvbTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRDdWJpYycsXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAkYm9keS5jc3Moe1xuICAgICAgICAgICAgICAgIGhlaWdodDogJycsXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLFxuICAgICAgICAgICAgICAgIHBhZGRpbmc6ICcnLFxuICAgICAgICAgICAgICAgIGRpc3BsYXk6ICcnXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIC8vIG9uQ2xvc2VFbmQgY2FsbGJhY2tcbiAgICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczcub3B0aW9ucy5vbkNsb3NlRW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgX3RoaXM3Lm9wdGlvbnMub25DbG9zZUVuZC5jYWxsKF90aGlzNywgJGNvbGxhcHNpYmxlTGlbMF0pO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIENvbGxhcHNpYmxlXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gaW5kZXggLSAwdGggaW5kZXggb2Ygc2xpZGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKGluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpczggPSB0aGlzO1xuXG4gICAgICAgIHZhciAkY29sbGFwc2libGVMaSA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KTtcbiAgICAgICAgaWYgKCRjb2xsYXBzaWJsZUxpLmxlbmd0aCAmJiAhJGNvbGxhcHNpYmxlTGlbMF0uY2xhc3NMaXN0LmNvbnRhaW5zKCdhY3RpdmUnKSkge1xuICAgICAgICAgIC8vIG9uT3BlblN0YXJ0IGNhbGxiYWNrXG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsICRjb2xsYXBzaWJsZUxpWzBdKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBIYW5kbGUgYWNjb3JkaW9uIGJlaGF2aW9yXG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hY2NvcmRpb24pIHtcbiAgICAgICAgICAgIHZhciAkY29sbGFwc2libGVMaXMgPSB0aGlzLiRlbC5jaGlsZHJlbignbGknKTtcbiAgICAgICAgICAgIHZhciAkYWN0aXZlTGlzID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpLmFjdGl2ZScpO1xuICAgICAgICAgICAgJGFjdGl2ZUxpcy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkY29sbGFwc2libGVMaXMuaW5kZXgoJChlbCkpO1xuICAgICAgICAgICAgICBfdGhpczguY2xvc2UoaW5kZXgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gQW5pbWF0ZSBpblxuICAgICAgICAgICRjb2xsYXBzaWJsZUxpWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgIHRoaXMuX2FuaW1hdGVJbihpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDbG9zZSBDb2xsYXBzaWJsZVxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IC0gMHRoIGluZGV4IG9mIHNsaWRlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbG9zZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKGluZGV4KSB7XG4gICAgICAgIHZhciAkY29sbGFwc2libGVMaSA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaScpLmVxKGluZGV4KTtcbiAgICAgICAgaWYgKCRjb2xsYXBzaWJsZUxpLmxlbmd0aCAmJiAkY29sbGFwc2libGVMaVswXS5jbGFzc0xpc3QuY29udGFpbnMoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgLy8gb25DbG9zZVN0YXJ0IGNhbGxiYWNrXG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0LmNhbGwodGhpcywgJGNvbGxhcHNpYmxlTGlbMF0pO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEFuaW1hdGUgb3V0XG4gICAgICAgICAgJGNvbGxhcHNpYmxlTGlbMF0uY2xhc3NMaXN0LnJlbW92ZSgnYWN0aXZlJyk7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0ZU91dChpbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoQ29sbGFwc2libGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDb2xsYXBzaWJsZSksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0NvbGxhcHNpYmxlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENvbGxhcHNpYmxlO1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5Db2xsYXBzaWJsZSA9IENvbGxhcHNpYmxlO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoQ29sbGFwc2libGUsICdjb2xsYXBzaWJsZScsICdNX0NvbGxhcHNpYmxlJyk7XG4gIH1cbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBhbGlnbm1lbnQ6ICdsZWZ0JyxcbiAgICBhdXRvRm9jdXM6IHRydWUsXG4gICAgY29uc3RyYWluV2lkdGg6IHRydWUsXG4gICAgY29udGFpbmVyOiBudWxsLFxuICAgIGNvdmVyVHJpZ2dlcjogdHJ1ZSxcbiAgICBjbG9zZU9uQ2xpY2s6IHRydWUsXG4gICAgaG92ZXI6IGZhbHNlLFxuICAgIGluRHVyYXRpb246IDE1MCxcbiAgICBvdXREdXJhdGlvbjogMjUwLFxuICAgIG9uT3BlblN0YXJ0OiBudWxsLFxuICAgIG9uT3BlbkVuZDogbnVsbCxcbiAgICBvbkNsb3NlU3RhcnQ6IG51bGwsXG4gICAgb25DbG9zZUVuZDogbnVsbCxcbiAgICBvbkl0ZW1DbGljazogbnVsbFxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICovXG5cbiAgdmFyIERyb3Bkb3duID0gZnVuY3Rpb24gKF9Db21wb25lbnQyKSB7XG4gICAgX2luaGVyaXRzKERyb3Bkb3duLCBfQ29tcG9uZW50Mik7XG5cbiAgICBmdW5jdGlvbiBEcm9wZG93bihlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIERyb3Bkb3duKTtcblxuICAgICAgdmFyIF90aGlzOSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChEcm9wZG93bi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKERyb3Bkb3duKSkuY2FsbCh0aGlzLCBEcm9wZG93biwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM5LmVsLk1fRHJvcGRvd24gPSBfdGhpczk7XG4gICAgICBEcm9wZG93bi5fZHJvcGRvd25zLnB1c2goX3RoaXM5KTtcblxuICAgICAgX3RoaXM5LmlkID0gTS5nZXRJZEZyb21UcmlnZ2VyKGVsKTtcbiAgICAgIF90aGlzOS5kcm9wZG93bkVsID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoX3RoaXM5LmlkKTtcbiAgICAgIF90aGlzOS4kZHJvcGRvd25FbCA9ICQoX3RoaXM5LmRyb3Bkb3duRWwpO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBkcm9wZG93blxuICAgICAgICogQG1lbWJlciBEcm9wZG93biNvcHRpb25zXG4gICAgICAgKiBAcHJvcCB7U3RyaW5nfSBbYWxpZ25tZW50PSdsZWZ0J10gLSBFZGdlIHdoaWNoIHRoZSBkcm9wZG93biBpcyBhbGlnbmVkIHRvXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2F1dG9Gb2N1cz10cnVlXSAtIEF1dG9tYXRpY2FsbHkgZm9jdXMgZHJvcGRvd24gZWwgZm9yIGtleWJvYXJkXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2NvbnN0cmFpbldpZHRoPXRydWVdIC0gQ29uc3RyYWluIHdpZHRoIHRvIHdpZHRoIG9mIHRoZSBidXR0b25cbiAgICAgICAqIEBwcm9wIHtFbGVtZW50fSBjb250YWluZXIgLSBDb250YWluZXIgZWxlbWVudCB0byBhdHRhY2ggZHJvcGRvd24gdG8gKG9wdGlvbmFsKVxuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtjb3ZlclRyaWdnZXI9dHJ1ZV0gLSBQbGFjZSBkcm9wZG93biBvdmVyIHRyaWdnZXJcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbY2xvc2VPbkNsaWNrPXRydWVdIC0gQ2xvc2Ugb24gY2xpY2sgb2YgZHJvcGRvd24gaXRlbVxuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtob3Zlcj1mYWxzZV0gLSBPcGVuIGRyb3Bkb3duIG9uIGhvdmVyXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaW5EdXJhdGlvbj0xNTBdIC0gRHVyYXRpb24gb2Ygb3BlbiBhbmltYXRpb24gaW4gbXNcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtvdXREdXJhdGlvbj0yNTBdIC0gRHVyYXRpb24gb2YgY2xvc2UgYW5pbWF0aW9uIGluIG1zXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlblN0YXJ0IC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gZHJvcGRvd24gc3RhcnRzIG9wZW5pbmdcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuRW5kIC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gZHJvcGRvd24gZmluaXNoZXMgb3BlbmluZ1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlU3RhcnQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBkcm9wZG93biBzdGFydHMgY2xvc2luZ1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlRW5kIC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gZHJvcGRvd24gZmluaXNoZXMgY2xvc2luZ1xuICAgICAgICovXG4gICAgICBfdGhpczkub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBEcm9wZG93bi5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIG9wZW4vY2xvc2Ugc3RhdGUgb2YgZHJvcGRvd25cbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICBfdGhpczkuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIGlmIGRyb3Bkb3duIGNvbnRlbnQgaXMgc2Nyb2xsYWJsZVxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIF90aGlzOS5pc1Njcm9sbGFibGUgPSBmYWxzZTtcblxuICAgICAgLyoqXG4gICAgICAgKiBEZXNjcmliZXMgaWYgdG91Y2ggbW92aW5nIG9uIGRyb3Bkb3duIGNvbnRlbnRcbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICBfdGhpczkuaXNUb3VjaE1vdmluZyA9IGZhbHNlO1xuXG4gICAgICBfdGhpczkuZm9jdXNlZEluZGV4ID0gLTE7XG4gICAgICBfdGhpczkuZmlsdGVyUXVlcnkgPSBbXTtcblxuICAgICAgLy8gTW92ZSBkcm9wZG93bi1jb250ZW50IGFmdGVyIGRyb3Bkb3duLXRyaWdnZXJcbiAgICAgIGlmICghIV90aGlzOS5vcHRpb25zLmNvbnRhaW5lcikge1xuICAgICAgICAkKF90aGlzOS5vcHRpb25zLmNvbnRhaW5lcikuYXBwZW5kKF90aGlzOS5kcm9wZG93bkVsKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzOS4kZWwuYWZ0ZXIoX3RoaXM5LmRyb3Bkb3duRWwpO1xuICAgICAgfVxuXG4gICAgICBfdGhpczkuX21ha2VEcm9wZG93bkZvY3VzYWJsZSgpO1xuICAgICAgX3RoaXM5Ll9yZXNldEZpbHRlclF1ZXJ5Qm91bmQgPSBfdGhpczkuX3Jlc2V0RmlsdGVyUXVlcnkuYmluZChfdGhpczkpO1xuICAgICAgX3RoaXM5Ll9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQgPSBfdGhpczkuX2hhbmRsZURvY3VtZW50Q2xpY2suYmluZChfdGhpczkpO1xuICAgICAgX3RoaXM5Ll9oYW5kbGVEb2N1bWVudFRvdWNobW92ZUJvdW5kID0gX3RoaXM5Ll9oYW5kbGVEb2N1bWVudFRvdWNobW92ZS5iaW5kKF90aGlzOSk7XG4gICAgICBfdGhpczkuX2hhbmRsZURyb3Bkb3duQ2xpY2tCb3VuZCA9IF90aGlzOS5faGFuZGxlRHJvcGRvd25DbGljay5iaW5kKF90aGlzOSk7XG4gICAgICBfdGhpczkuX2hhbmRsZURyb3Bkb3duS2V5ZG93bkJvdW5kID0gX3RoaXM5Ll9oYW5kbGVEcm9wZG93bktleWRvd24uYmluZChfdGhpczkpO1xuICAgICAgX3RoaXM5Ll9oYW5kbGVUcmlnZ2VyS2V5ZG93bkJvdW5kID0gX3RoaXM5Ll9oYW5kbGVUcmlnZ2VyS2V5ZG93bi5iaW5kKF90aGlzOSk7XG4gICAgICBfdGhpczkuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzOTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoRHJvcGRvd24sIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZXNldERyb3Bkb3duU3R5bGVzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgRHJvcGRvd24uX2Ryb3Bkb3ducy5zcGxpY2UoRHJvcGRvd24uX2Ryb3Bkb3ducy5pbmRleE9mKHRoaXMpLCAxKTtcbiAgICAgICAgdGhpcy5lbC5NX0Ryb3Bkb3duID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgLy8gVHJpZ2dlciBrZXlkb3duIGhhbmRsZXJcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlVHJpZ2dlcktleWRvd25Cb3VuZCk7XG5cbiAgICAgICAgLy8gSXRlbSBjbGljayBoYW5kbGVyXG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURyb3Bkb3duQ2xpY2tCb3VuZCk7XG5cbiAgICAgICAgLy8gSG92ZXIgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ob3Zlcikge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZU1vdXNlRW50ZXJCb3VuZCA9IHRoaXMuX2hhbmRsZU1vdXNlRW50ZXIuYmluZCh0aGlzKTtcbiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQpO1xuICAgICAgICAgIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCA9IHRoaXMuX2hhbmRsZU1vdXNlTGVhdmUuYmluZCh0aGlzKTtcbiAgICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQpO1xuICAgICAgICAgIHRoaXMuZHJvcGRvd25FbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTtcblxuICAgICAgICAgIC8vIENsaWNrIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5faGFuZGxlQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsaWNrQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVUcmlnZ2VyS2V5ZG93bkJvdW5kKTtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRHJvcGRvd25DbGlja0JvdW5kKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmhvdmVyKSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQpO1xuICAgICAgICAgIHRoaXMuZHJvcGRvd25FbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwVGVtcG9yYXJ5RXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFRlbXBvcmFyeUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIC8vIFVzZSBjYXB0dXJlIHBoYXNlIGV2ZW50IGhhbmRsZXIgdG8gcHJldmVudCBjbGlja1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kLCB0cnVlKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRUb3VjaG1vdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRHJvcGRvd25LZXlkb3duQm91bmQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlVGVtcG9yYXJ5RXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVUZW1wb3JhcnlFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICAvLyBVc2UgY2FwdHVyZSBwaGFzZSBldmVudCBoYW5kbGVyIHRvIHByZXZlbnQgY2xpY2tcbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50VG91Y2htb3ZlQm91bmQpO1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZURyb3Bkb3duS2V5ZG93bkJvdW5kKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNsaWNrKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU1vdXNlRW50ZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTW91c2VFbnRlcigpIHtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVNb3VzZUxlYXZlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1vdXNlTGVhdmUoZSkge1xuICAgICAgICB2YXIgdG9FbCA9IGUudG9FbGVtZW50IHx8IGUucmVsYXRlZFRhcmdldDtcbiAgICAgICAgdmFyIGxlYXZlVG9Ecm9wZG93bkNvbnRlbnQgPSAhISQodG9FbCkuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGg7XG4gICAgICAgIHZhciBsZWF2ZVRvQWN0aXZlRHJvcGRvd25UcmlnZ2VyID0gZmFsc2U7XG5cbiAgICAgICAgdmFyICRjbG9zZXN0VHJpZ2dlciA9ICQodG9FbCkuY2xvc2VzdCgnLmRyb3Bkb3duLXRyaWdnZXInKTtcbiAgICAgICAgaWYgKCRjbG9zZXN0VHJpZ2dlci5sZW5ndGggJiYgISEkY2xvc2VzdFRyaWdnZXJbMF0uTV9Ecm9wZG93biAmJiAkY2xvc2VzdFRyaWdnZXJbMF0uTV9Ecm9wZG93bi5pc09wZW4pIHtcbiAgICAgICAgICBsZWF2ZVRvQWN0aXZlRHJvcGRvd25UcmlnZ2VyID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENsb3NlIGhvdmVyIGRyb3Bkb3duIGlmIG1vdXNlIGRpZCBub3QgbGVhdmUgdG8gZWl0aGVyIGFjdGl2ZSBkcm9wZG93bi10cmlnZ2VyIG9yIGRyb3Bkb3duLWNvbnRlbnRcbiAgICAgICAgaWYgKCFsZWF2ZVRvQWN0aXZlRHJvcGRvd25UcmlnZ2VyICYmICFsZWF2ZVRvRHJvcGRvd25Db250ZW50KSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVEb2N1bWVudENsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50Q2xpY2soZSkge1xuICAgICAgICB2YXIgX3RoaXMxMCA9IHRoaXM7XG5cbiAgICAgICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5jbG9zZU9uQ2xpY2sgJiYgJHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpLmxlbmd0aCAmJiAhdGhpcy5pc1RvdWNoTW92aW5nKSB7XG4gICAgICAgICAgLy8gaXNUb3VjaE1vdmluZyB0byBjaGVjayBpZiBzY3JvbGxpbmcgb24gbW9iaWxlLlxuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMxMC5jbG9zZSgpO1xuICAgICAgICAgIH0sIDApO1xuICAgICAgICB9IGVsc2UgaWYgKCR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLXRyaWdnZXInKS5sZW5ndGggfHwgISR0YXJnZXQuY2xvc2VzdCgnLmRyb3Bkb3duLWNvbnRlbnQnKS5sZW5ndGgpIHtcbiAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzMTAuY2xvc2UoKTtcbiAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmlzVG91Y2hNb3ZpbmcgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVRyaWdnZXJLZXlkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRyaWdnZXJLZXlkb3duKGUpIHtcbiAgICAgICAgLy8gQVJST1cgRE9XTiBPUiBFTlRFUiBXSEVOIFNFTEVDVCBJUyBDTE9TRUQgLSBvcGVuIERyb3Bkb3duXG4gICAgICAgIGlmICgoZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX0RPV04gfHwgZS53aGljaCA9PT0gTS5rZXlzLkVOVEVSKSAmJiAhdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgRG9jdW1lbnQgVG91Y2htb3ZlXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRG9jdW1lbnRUb3VjaG1vdmVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRG9jdW1lbnRUb3VjaG1vdmUoZSkge1xuICAgICAgICB2YXIgJHRhcmdldCA9ICQoZS50YXJnZXQpO1xuICAgICAgICBpZiAoJHRhcmdldC5jbG9zZXN0KCcuZHJvcGRvd24tY29udGVudCcpLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuaXNUb3VjaE1vdmluZyA9IHRydWU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgRHJvcGRvd24gQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVEcm9wZG93bkNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURyb3Bkb3duQ2xpY2soZSkge1xuICAgICAgICAvLyBvbkl0ZW1DbGljayBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkl0ZW1DbGljayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHZhciBpdGVtRWwgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCdsaScpWzBdO1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkl0ZW1DbGljay5jYWxsKHRoaXMsIGl0ZW1FbCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgRHJvcGRvd24gS2V5ZG93blxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURyb3Bkb3duS2V5ZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEcm9wZG93bktleWRvd24oZSkge1xuICAgICAgICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLlRBQikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICAgICAgICAvLyBOYXZpZ2F0ZSBkb3duIGRyb3Bkb3duIGxpc3RcbiAgICAgICAgfSBlbHNlIGlmICgoZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX0RPV04gfHwgZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX1VQKSAmJiB0aGlzLmlzT3Blbikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB2YXIgZGlyZWN0aW9uID0gZS53aGljaCA9PT0gTS5rZXlzLkFSUk9XX0RPV04gPyAxIDogLTE7XG4gICAgICAgICAgdmFyIG5ld0ZvY3VzZWRJbmRleCA9IHRoaXMuZm9jdXNlZEluZGV4O1xuICAgICAgICAgIHZhciBmb3VuZE5ld0luZGV4ID0gZmFsc2U7XG4gICAgICAgICAgZG8ge1xuICAgICAgICAgICAgbmV3Rm9jdXNlZEluZGV4ID0gbmV3Rm9jdXNlZEluZGV4ICsgZGlyZWN0aW9uO1xuXG4gICAgICAgICAgICBpZiAoISF0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bbmV3Rm9jdXNlZEluZGV4XSAmJiB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bbmV3Rm9jdXNlZEluZGV4XS50YWJJbmRleCAhPT0gLTEpIHtcbiAgICAgICAgICAgICAgZm91bmROZXdJbmRleCA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gd2hpbGUgKG5ld0ZvY3VzZWRJbmRleCA8IHRoaXMuZHJvcGRvd25FbC5jaGlsZHJlbi5sZW5ndGggJiYgbmV3Rm9jdXNlZEluZGV4ID49IDApO1xuXG4gICAgICAgICAgaWYgKGZvdW5kTmV3SW5kZXgpIHtcbiAgICAgICAgICAgIHRoaXMuZm9jdXNlZEluZGV4ID0gbmV3Rm9jdXNlZEluZGV4O1xuICAgICAgICAgICAgdGhpcy5fZm9jdXNGb2N1c2VkSXRlbSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIEVOVEVSIHNlbGVjdHMgY2hvaWNlIG9uIGZvY3VzZWQgaXRlbVxuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5FTlRFUiAmJiB0aGlzLmlzT3Blbikge1xuICAgICAgICAgIC8vIFNlYXJjaCBmb3IgPGE+IGFuZCA8YnV0dG9uPlxuICAgICAgICAgIHZhciBmb2N1c2VkRWxlbWVudCA9IHRoaXMuZHJvcGRvd25FbC5jaGlsZHJlblt0aGlzLmZvY3VzZWRJbmRleF07XG4gICAgICAgICAgdmFyICRhY3RpdmF0YWJsZUVsZW1lbnQgPSAkKGZvY3VzZWRFbGVtZW50KS5maW5kKCdhLCBidXR0b24nKS5maXJzdCgpO1xuXG4gICAgICAgICAgLy8gQ2xpY2sgYSBvciBidXR0b24gdGFnIGlmIGV4aXN0cywgb3RoZXJ3aXNlIGNsaWNrIGxpIHRhZ1xuICAgICAgICAgIGlmICghISRhY3RpdmF0YWJsZUVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICAkYWN0aXZhdGFibGVFbGVtZW50WzBdLmNsaWNrKCk7XG4gICAgICAgICAgfSBlbHNlIGlmICghIWZvY3VzZWRFbGVtZW50KSB7XG4gICAgICAgICAgICBmb2N1c2VkRWxlbWVudC5jbGljaygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENsb3NlIGRyb3Bkb3duIG9uIEVTQ1xuICAgICAgICB9IGVsc2UgaWYgKGUud2hpY2ggPT09IE0ua2V5cy5FU0MgJiYgdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ0FTRSBXSEVOIFVTRVIgVFlQRSBMRVRURVJTXG4gICAgICAgIHZhciBsZXR0ZXIgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGUud2hpY2gpLnRvTG93ZXJDYXNlKCksXG4gICAgICAgICAgICBub25MZXR0ZXJzID0gWzksIDEzLCAyNywgMzgsIDQwXTtcbiAgICAgICAgaWYgKGxldHRlciAmJiBub25MZXR0ZXJzLmluZGV4T2YoZS53aGljaCkgPT09IC0xKSB7XG4gICAgICAgICAgdGhpcy5maWx0ZXJRdWVyeS5wdXNoKGxldHRlcik7XG5cbiAgICAgICAgICB2YXIgc3RyaW5nID0gdGhpcy5maWx0ZXJRdWVyeS5qb2luKCcnKSxcbiAgICAgICAgICAgICAgbmV3T3B0aW9uRWwgPSAkKHRoaXMuZHJvcGRvd25FbCkuZmluZCgnbGknKS5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gJChlbCkudGV4dCgpLnRvTG93ZXJDYXNlKCkuaW5kZXhPZihzdHJpbmcpID09PSAwO1xuICAgICAgICAgIH0pWzBdO1xuXG4gICAgICAgICAgaWYgKG5ld09wdGlvbkVsKSB7XG4gICAgICAgICAgICB0aGlzLmZvY3VzZWRJbmRleCA9ICQobmV3T3B0aW9uRWwpLmluZGV4KCk7XG4gICAgICAgICAgICB0aGlzLl9mb2N1c0ZvY3VzZWRJdGVtKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5maWx0ZXJUaW1lb3V0ID0gc2V0VGltZW91dCh0aGlzLl9yZXNldEZpbHRlclF1ZXJ5Qm91bmQsIDEwMDApO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGRyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVzZXRGaWx0ZXJRdWVyeVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldEZpbHRlclF1ZXJ5KCkge1xuICAgICAgICB0aGlzLmZpbHRlclF1ZXJ5ID0gW107XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZXNldERyb3Bkb3duU3R5bGVzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3Jlc2V0RHJvcGRvd25TdHlsZXMoKSB7XG4gICAgICAgIHRoaXMuJGRyb3Bkb3duRWwuY3NzKHtcbiAgICAgICAgICBkaXNwbGF5OiAnJyxcbiAgICAgICAgICB3aWR0aDogJycsXG4gICAgICAgICAgaGVpZ2h0OiAnJyxcbiAgICAgICAgICBsZWZ0OiAnJyxcbiAgICAgICAgICB0b3A6ICcnLFxuICAgICAgICAgICd0cmFuc2Zvcm0tb3JpZ2luJzogJycsXG4gICAgICAgICAgdHJhbnNmb3JtOiAnJyxcbiAgICAgICAgICBvcGFjaXR5OiAnJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX21ha2VEcm9wZG93bkZvY3VzYWJsZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9tYWtlRHJvcGRvd25Gb2N1c2FibGUoKSB7XG4gICAgICAgIC8vIE5lZWRlZCBmb3IgYXJyb3cga2V5IG5hdmlnYXRpb25cbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnRhYkluZGV4ID0gMDtcblxuICAgICAgICAvLyBPbmx5IHNldCB0YWJpbmRleCBpZiBpdCBoYXNuJ3QgYmVlbiBzZXQgYnkgdXNlclxuICAgICAgICAkKHRoaXMuZHJvcGRvd25FbCkuY2hpbGRyZW4oKS5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIGlmICghZWwuZ2V0QXR0cmlidXRlKCd0YWJpbmRleCcpKSB7XG4gICAgICAgICAgICBlbC5zZXRBdHRyaWJ1dGUoJ3RhYmluZGV4JywgMCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2ZvY3VzRm9jdXNlZEl0ZW1cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZm9jdXNGb2N1c2VkSXRlbSgpIHtcbiAgICAgICAgaWYgKHRoaXMuZm9jdXNlZEluZGV4ID49IDAgJiYgdGhpcy5mb2N1c2VkSW5kZXggPCB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW4ubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpIHtcbiAgICAgICAgICB0aGlzLmRyb3Bkb3duRWwuY2hpbGRyZW5bdGhpcy5mb2N1c2VkSW5kZXhdLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2dldERyb3Bkb3duUG9zaXRpb25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZ2V0RHJvcGRvd25Qb3NpdGlvbigpIHtcbiAgICAgICAgdmFyIG9mZnNldFBhcmVudEJSZWN0ID0gdGhpcy5lbC5vZmZzZXRQYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICAgIHZhciB0cmlnZ2VyQlJlY3QgPSB0aGlzLmVsLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xuICAgICAgICB2YXIgZHJvcGRvd25CUmVjdCA9IHRoaXMuZHJvcGRvd25FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcblxuICAgICAgICB2YXIgaWRlYWxIZWlnaHQgPSBkcm9wZG93bkJSZWN0LmhlaWdodDtcbiAgICAgICAgdmFyIGlkZWFsV2lkdGggPSBkcm9wZG93bkJSZWN0LndpZHRoO1xuICAgICAgICB2YXIgaWRlYWxYUG9zID0gdHJpZ2dlckJSZWN0LmxlZnQgLSBkcm9wZG93bkJSZWN0LmxlZnQ7XG4gICAgICAgIHZhciBpZGVhbFlQb3MgPSB0cmlnZ2VyQlJlY3QudG9wIC0gZHJvcGRvd25CUmVjdC50b3A7XG5cbiAgICAgICAgdmFyIGRyb3Bkb3duQm91bmRzID0ge1xuICAgICAgICAgIGxlZnQ6IGlkZWFsWFBvcyxcbiAgICAgICAgICB0b3A6IGlkZWFsWVBvcyxcbiAgICAgICAgICBoZWlnaHQ6IGlkZWFsSGVpZ2h0LFxuICAgICAgICAgIHdpZHRoOiBpZGVhbFdpZHRoXG4gICAgICAgIH07XG5cbiAgICAgICAgLy8gQ291bnRhaW5lciBoZXJlIHdpbGwgYmUgY2xvc2VzdCBhbmNlc3RvciB3aXRoIG92ZXJmbG93OiBoaWRkZW5cbiAgICAgICAgdmFyIGNsb3Nlc3RPdmVyZmxvd1BhcmVudCA9ICEhdGhpcy5kcm9wZG93bkVsLm9mZnNldFBhcmVudCA/IHRoaXMuZHJvcGRvd25FbC5vZmZzZXRQYXJlbnQgOiB0aGlzLmRyb3Bkb3duRWwucGFyZW50Tm9kZTtcblxuICAgICAgICB2YXIgYWxpZ25tZW50cyA9IE0uY2hlY2tQb3NzaWJsZUFsaWdubWVudHModGhpcy5lbCwgY2xvc2VzdE92ZXJmbG93UGFyZW50LCBkcm9wZG93bkJvdW5kcywgdGhpcy5vcHRpb25zLmNvdmVyVHJpZ2dlciA/IDAgOiB0cmlnZ2VyQlJlY3QuaGVpZ2h0KTtcblxuICAgICAgICB2YXIgdmVydGljYWxBbGlnbm1lbnQgPSAndG9wJztcbiAgICAgICAgdmFyIGhvcml6b250YWxBbGlnbm1lbnQgPSB0aGlzLm9wdGlvbnMuYWxpZ25tZW50O1xuICAgICAgICBpZGVhbFlQb3MgKz0gdGhpcy5vcHRpb25zLmNvdmVyVHJpZ2dlciA/IDAgOiB0cmlnZ2VyQlJlY3QuaGVpZ2h0O1xuXG4gICAgICAgIC8vIFJlc2V0IGlzU2Nyb2xsYWJsZVxuICAgICAgICB0aGlzLmlzU2Nyb2xsYWJsZSA9IGZhbHNlO1xuXG4gICAgICAgIGlmICghYWxpZ25tZW50cy50b3ApIHtcbiAgICAgICAgICBpZiAoYWxpZ25tZW50cy5ib3R0b20pIHtcbiAgICAgICAgICAgIHZlcnRpY2FsQWxpZ25tZW50ID0gJ2JvdHRvbSc7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuaXNTY3JvbGxhYmxlID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoaWNoIHNpZGUgaGFzIG1vc3Qgc3BhY2UgYW5kIGN1dG9mZiBhdCBjb3JyZWN0IGhlaWdodFxuICAgICAgICAgICAgaWYgKGFsaWdubWVudHMuc3BhY2VPblRvcCA+IGFsaWdubWVudHMuc3BhY2VPbkJvdHRvbSkge1xuICAgICAgICAgICAgICB2ZXJ0aWNhbEFsaWdubWVudCA9ICdib3R0b20nO1xuICAgICAgICAgICAgICBpZGVhbEhlaWdodCArPSBhbGlnbm1lbnRzLnNwYWNlT25Ub3A7XG4gICAgICAgICAgICAgIGlkZWFsWVBvcyAtPSBhbGlnbm1lbnRzLnNwYWNlT25Ub3A7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBpZGVhbEhlaWdodCArPSBhbGlnbm1lbnRzLnNwYWNlT25Cb3R0b207XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgcHJlZmVycmVkIGhvcml6b250YWwgYWxpZ25tZW50IGlzIHBvc3NpYmxlXG4gICAgICAgIGlmICghYWxpZ25tZW50c1tob3Jpem9udGFsQWxpZ25tZW50XSkge1xuICAgICAgICAgIHZhciBvcHBvc2l0ZUFsaWdubWVudCA9IGhvcml6b250YWxBbGlnbm1lbnQgPT09ICdsZWZ0JyA/ICdyaWdodCcgOiAnbGVmdCc7XG4gICAgICAgICAgaWYgKGFsaWdubWVudHNbb3Bwb3NpdGVBbGlnbm1lbnRdKSB7XG4gICAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50ID0gb3Bwb3NpdGVBbGlnbm1lbnQ7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIC8vIERldGVybWluZSB3aGljaCBzaWRlIGhhcyBtb3N0IHNwYWNlIGFuZCBjdXRvZmYgYXQgY29ycmVjdCBoZWlnaHRcbiAgICAgICAgICAgIGlmIChhbGlnbm1lbnRzLnNwYWNlT25MZWZ0ID4gYWxpZ25tZW50cy5zcGFjZU9uUmlnaHQpIHtcbiAgICAgICAgICAgICAgaG9yaXpvbnRhbEFsaWdubWVudCA9ICdyaWdodCc7XG4gICAgICAgICAgICAgIGlkZWFsV2lkdGggKz0gYWxpZ25tZW50cy5zcGFjZU9uTGVmdDtcbiAgICAgICAgICAgICAgaWRlYWxYUG9zIC09IGFsaWdubWVudHMuc3BhY2VPbkxlZnQ7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICBob3Jpem9udGFsQWxpZ25tZW50ID0gJ2xlZnQnO1xuICAgICAgICAgICAgICBpZGVhbFdpZHRoICs9IGFsaWdubWVudHMuc3BhY2VPblJpZ2h0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2ZXJ0aWNhbEFsaWdubWVudCA9PT0gJ2JvdHRvbScpIHtcbiAgICAgICAgICBpZGVhbFlQb3MgPSBpZGVhbFlQb3MgLSBkcm9wZG93bkJSZWN0LmhlaWdodCArICh0aGlzLm9wdGlvbnMuY292ZXJUcmlnZ2VyID8gdHJpZ2dlckJSZWN0LmhlaWdodCA6IDApO1xuICAgICAgICB9XG4gICAgICAgIGlmIChob3Jpem9udGFsQWxpZ25tZW50ID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgaWRlYWxYUG9zID0gaWRlYWxYUG9zIC0gZHJvcGRvd25CUmVjdC53aWR0aCArIHRyaWdnZXJCUmVjdC53aWR0aDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IGlkZWFsWFBvcyxcbiAgICAgICAgICB5OiBpZGVhbFlQb3MsXG4gICAgICAgICAgdmVydGljYWxBbGlnbm1lbnQ6IHZlcnRpY2FsQWxpZ25tZW50LFxuICAgICAgICAgIGhvcml6b250YWxBbGlnbm1lbnQ6IGhvcml6b250YWxBbGlnbm1lbnQsXG4gICAgICAgICAgaGVpZ2h0OiBpZGVhbEhlaWdodCxcbiAgICAgICAgICB3aWR0aDogaWRlYWxXaWR0aFxuICAgICAgICB9O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgaW4gZHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluKCkge1xuICAgICAgICB2YXIgX3RoaXMxMSA9IHRoaXM7XG5cbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5kcm9wZG93bkVsKTtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5kcm9wZG93bkVsLFxuICAgICAgICAgIG9wYWNpdHk6IHtcbiAgICAgICAgICAgIHZhbHVlOiBbMCwgMV0sXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjYWxlWDogWzAuMywgMV0sXG4gICAgICAgICAgc2NhbGVZOiBbMC4zLCAxXSxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1aW50JyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgICAgIGlmIChfdGhpczExLm9wdGlvbnMuYXV0b0ZvY3VzKSB7XG4gICAgICAgICAgICAgIF90aGlzMTEuZHJvcGRvd25FbC5mb2N1cygpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBvbk9wZW5FbmQgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMxMS5vcHRpb25zLm9uT3BlbkVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczExLm9wdGlvbnMub25PcGVuRW5kLmNhbGwoX3RoaXMxMSwgX3RoaXMxMS5lbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIG91dCBkcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVPdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU91dCgpIHtcbiAgICAgICAgdmFyIF90aGlzMTIgPSB0aGlzO1xuXG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZHJvcGRvd25FbCk7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuZHJvcGRvd25FbCxcbiAgICAgICAgICBvcGFjaXR5OiB7XG4gICAgICAgICAgICB2YWx1ZTogMCxcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWludCdcbiAgICAgICAgICB9LFxuICAgICAgICAgIHNjYWxlWDogMC4zLFxuICAgICAgICAgIHNjYWxlWTogMC4zLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1aW50JyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKGFuaW0pIHtcbiAgICAgICAgICAgIF90aGlzMTIuX3Jlc2V0RHJvcGRvd25TdHlsZXMoKTtcblxuICAgICAgICAgICAgLy8gb25DbG9zZUVuZCBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczEyLm9wdGlvbnMub25DbG9zZUVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczEyLm9wdGlvbnMub25DbG9zZUVuZC5jYWxsKF90aGlzMTIsIF90aGlzMTIuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUGxhY2UgZHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9wbGFjZURyb3Bkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3BsYWNlRHJvcGRvd24oKSB7XG4gICAgICAgIC8vIFNldCB3aWR0aCBiZWZvcmUgY2FsY3VsYXRpbmcgcG9zaXRpb25JbmZvXG4gICAgICAgIHZhciBpZGVhbFdpZHRoID0gdGhpcy5vcHRpb25zLmNvbnN0cmFpbldpZHRoID8gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aCA6IHRoaXMuZHJvcGRvd25FbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLndpZHRoID0gaWRlYWxXaWR0aCArICdweCc7XG5cbiAgICAgICAgdmFyIHBvc2l0aW9uSW5mbyA9IHRoaXMuX2dldERyb3Bkb3duUG9zaXRpb24oKTtcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLmxlZnQgPSBwb3NpdGlvbkluZm8ueCArICdweCc7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS50b3AgPSBwb3NpdGlvbkluZm8ueSArICdweCc7XG4gICAgICAgIHRoaXMuZHJvcGRvd25FbC5zdHlsZS5oZWlnaHQgPSBwb3NpdGlvbkluZm8uaGVpZ2h0ICsgJ3B4JztcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLndpZHRoID0gcG9zaXRpb25JbmZvLndpZHRoICsgJ3B4JztcbiAgICAgICAgdGhpcy5kcm9wZG93bkVsLnN0eWxlLnRyYW5zZm9ybU9yaWdpbiA9IChwb3NpdGlvbkluZm8uaG9yaXpvbnRhbEFsaWdubWVudCA9PT0gJ2xlZnQnID8gJzAnIDogJzEwMCUnKSArIFwiIFwiICsgKHBvc2l0aW9uSW5mby52ZXJ0aWNhbEFsaWdubWVudCA9PT0gJ3RvcCcgPyAnMCcgOiAnMTAwJScpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIE9wZW4gRHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuXG4gICAgICAgIC8vIG9uT3BlblN0YXJ0IGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uT3BlblN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uT3BlblN0YXJ0LmNhbGwodGhpcywgdGhpcy5lbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNldCBzdHlsZXNcbiAgICAgICAgdGhpcy5fcmVzZXREcm9wZG93blN0eWxlcygpO1xuICAgICAgICB0aGlzLmRyb3Bkb3duRWwuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG5cbiAgICAgICAgdGhpcy5fcGxhY2VEcm9wZG93bigpO1xuICAgICAgICB0aGlzLl9hbmltYXRlSW4oKTtcbiAgICAgICAgdGhpcy5fc2V0dXBUZW1wb3JhcnlFdmVudEhhbmRsZXJzKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2xvc2UgRHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5mb2N1c2VkSW5kZXggPSAtMTtcblxuICAgICAgICAvLyBvbkNsb3NlU3RhcnQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYW5pbWF0ZU91dCgpO1xuICAgICAgICB0aGlzLl9yZW1vdmVUZW1wb3JhcnlFdmVudEhhbmRsZXJzKCk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvRm9jdXMpIHtcbiAgICAgICAgICB0aGlzLmVsLmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZWNhbGN1bGF0ZSBkaW1lbnNpb25zXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZWNhbGN1bGF0ZURpbWVuc2lvbnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZWNhbGN1bGF0ZURpbWVuc2lvbnMoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHRoaXMuJGRyb3Bkb3duRWwuY3NzKHtcbiAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgIGhlaWdodDogJycsXG4gICAgICAgICAgICBsZWZ0OiAnJyxcbiAgICAgICAgICAgIHRvcDogJycsXG4gICAgICAgICAgICAndHJhbnNmb3JtLW9yaWdpbic6ICcnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGhpcy5fcGxhY2VEcm9wZG93bigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KERyb3Bkb3duLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRHJvcGRvd24pLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Ecm9wZG93bjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBEcm9wZG93bjtcbiAgfShDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBEcm9wZG93blxuICAgKi9cblxuXG4gIERyb3Bkb3duLl9kcm9wZG93bnMgPSBbXTtcblxuICBNLkRyb3Bkb3duID0gRHJvcGRvd247XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihEcm9wZG93biwgJ2Ryb3Bkb3duJywgJ01fRHJvcGRvd24nKTtcbiAgfVxufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIG9wYWNpdHk6IDAuNSxcbiAgICBpbkR1cmF0aW9uOiAyNTAsXG4gICAgb3V0RHVyYXRpb246IDI1MCxcbiAgICBvbk9wZW5TdGFydDogbnVsbCxcbiAgICBvbk9wZW5FbmQ6IG51bGwsXG4gICAgb25DbG9zZVN0YXJ0OiBudWxsLFxuICAgIG9uQ2xvc2VFbmQ6IG51bGwsXG4gICAgcHJldmVudFNjcm9sbGluZzogdHJ1ZSxcbiAgICBkaXNtaXNzaWJsZTogdHJ1ZSxcbiAgICBzdGFydGluZ1RvcDogJzQlJyxcbiAgICBlbmRpbmdUb3A6ICcxMCUnXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgTW9kYWwgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDMpIHtcbiAgICBfaW5oZXJpdHMoTW9kYWwsIF9Db21wb25lbnQzKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBNb2RhbCBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXlcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBNb2RhbChlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIE1vZGFsKTtcblxuICAgICAgdmFyIF90aGlzMTMgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoTW9kYWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihNb2RhbCkpLmNhbGwodGhpcywgTW9kYWwsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzMTMuZWwuTV9Nb2RhbCA9IF90aGlzMTM7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIG1vZGFsXG4gICAgICAgKiBAbWVtYmVyIE1vZGFsI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtvcGFjaXR5PTAuNV0gLSBPcGFjaXR5IG9mIHRoZSBtb2RhbCBvdmVybGF5XG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaW5EdXJhdGlvbj0yNTBdIC0gTGVuZ3RoIGluIG1zIG9mIGVudGVyIHRyYW5zaXRpb25cbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtvdXREdXJhdGlvbj0yNTBdIC0gTGVuZ3RoIGluIG1zIG9mIGV4aXQgdHJhbnNpdGlvblxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgbW9kYWwgaXMgb3BlbmVkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBtb2RhbCBpcyBvcGVuZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGJlZm9yZSBtb2RhbCBpcyBjbG9zZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZUVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBtb2RhbCBpcyBjbG9zZWRcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBbZGlzbWlzc2libGU9dHJ1ZV0gLSBBbGxvdyBtb2RhbCB0byBiZSBkaXNtaXNzZWQgYnkga2V5Ym9hcmQgb3Igb3ZlcmxheSBjbGlja1xuICAgICAgICogQHByb3Age1N0cmluZ30gW3N0YXJ0aW5nVG9wPSc0JSddIC0gc3RhcnRpbmdUb3BcbiAgICAgICAqIEBwcm9wIHtTdHJpbmd9IFtlbmRpbmdUb3A9JzEwJSddIC0gZW5kaW5nVG9wXG4gICAgICAgKi9cbiAgICAgIF90aGlzMTMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBNb2RhbC5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8qKlxuICAgICAgICogRGVzY3JpYmVzIG9wZW4vY2xvc2Ugc3RhdGUgb2YgbW9kYWxcbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICBfdGhpczEzLmlzT3BlbiA9IGZhbHNlO1xuXG4gICAgICBfdGhpczEzLmlkID0gX3RoaXMxMy4kZWwuYXR0cignaWQnKTtcbiAgICAgIF90aGlzMTMuX29wZW5pbmdUcmlnZ2VyID0gdW5kZWZpbmVkO1xuICAgICAgX3RoaXMxMy4kb3ZlcmxheSA9ICQoJzxkaXYgY2xhc3M9XCJtb2RhbC1vdmVybGF5XCI+PC9kaXY+Jyk7XG4gICAgICBfdGhpczEzLmVsLnRhYkluZGV4ID0gMDtcbiAgICAgIF90aGlzMTMuX250aE1vZGFsT3BlbmVkID0gMDtcblxuICAgICAgTW9kYWwuX2NvdW50Kys7XG4gICAgICBfdGhpczEzLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczEzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhNb2RhbCwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIE1vZGFsLl9jb3VudC0tO1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuICAgICAgICB0aGlzLiRvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmVsLk1fTW9kYWwgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZU92ZXJsYXlDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVNb2RhbENsb3NlQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZU1vZGFsQ2xvc2VDbGljay5iaW5kKHRoaXMpO1xuXG4gICAgICAgIGlmIChNb2RhbC5fY291bnQgPT09IDEpIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVHJpZ2dlckNsaWNrKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLiRvdmVybGF5WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTW9kYWxDbG9zZUNsaWNrQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgaWYgKE1vZGFsLl9jb3VudCA9PT0gMCkge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUcmlnZ2VyQ2xpY2spO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuJG92ZXJsYXlbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVNb2RhbENsb3NlQ2xpY2tCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFRyaWdnZXIgQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVUcmlnZ2VyQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlVHJpZ2dlckNsaWNrKGUpIHtcbiAgICAgICAgdmFyICR0cmlnZ2VyID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLm1vZGFsLXRyaWdnZXInKTtcbiAgICAgICAgaWYgKCR0cmlnZ2VyLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBtb2RhbElkID0gTS5nZXRJZEZyb21UcmlnZ2VyKCR0cmlnZ2VyWzBdKTtcbiAgICAgICAgICB2YXIgbW9kYWxJbnN0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKG1vZGFsSWQpLk1fTW9kYWw7XG4gICAgICAgICAgaWYgKG1vZGFsSW5zdGFuY2UpIHtcbiAgICAgICAgICAgIG1vZGFsSW5zdGFuY2Uub3BlbigkdHJpZ2dlcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBPdmVybGF5IENsaWNrXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlT3ZlcmxheUNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU92ZXJsYXlDbGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBNb2RhbCBDbG9zZSBDbGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU1vZGFsQ2xvc2VDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVNb2RhbENsb3NlQ2xpY2soZSkge1xuICAgICAgICB2YXIgJGNsb3NlVHJpZ2dlciA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5tb2RhbC1jbG9zZScpO1xuICAgICAgICBpZiAoJGNsb3NlVHJpZ2dlci5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgS2V5ZG93blxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUtleWRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlS2V5ZG93bihlKSB7XG4gICAgICAgIC8vIEVTQyBrZXlcbiAgICAgICAgaWYgKGUua2V5Q29kZSA9PT0gMjcgJiYgdGhpcy5vcHRpb25zLmRpc21pc3NpYmxlKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIEZvY3VzXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRm9jdXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRm9jdXMoZSkge1xuICAgICAgICAvLyBPbmx5IHRyYXAgZm9jdXMgaWYgdGhpcyBtb2RhbCBpcyB0aGUgbGFzdCBtb2RlbCBvcGVuZWQgKHByZXZlbnRzIGxvb3BzIGluIG5lc3RlZCBtb2RhbHMpLlxuICAgICAgICBpZiAoIXRoaXMuZWwuY29udGFpbnMoZS50YXJnZXQpICYmIHRoaXMuX250aE1vZGFsT3BlbmVkID09PSBNb2RhbC5fbW9kYWxzT3Blbikge1xuICAgICAgICAgIHRoaXMuZWwuZm9jdXMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgaW4gbW9kYWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluKCkge1xuICAgICAgICB2YXIgX3RoaXMxNCA9IHRoaXM7XG5cbiAgICAgICAgLy8gU2V0IGluaXRpYWwgc3R5bGVzXG4gICAgICAgICQuZXh0ZW5kKHRoaXMuZWwuc3R5bGUsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSk7XG4gICAgICAgICQuZXh0ZW5kKHRoaXMuJG92ZXJsYXlbMF0uc3R5bGUsIHtcbiAgICAgICAgICBkaXNwbGF5OiAnYmxvY2snLFxuICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQW5pbWF0ZSBvdmVybGF5XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuJG92ZXJsYXlbMF0sXG4gICAgICAgICAgb3BhY2l0eTogdGhpcy5vcHRpb25zLm9wYWNpdHksXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBEZWZpbmUgbW9kYWwgYW5pbWF0aW9uIG9wdGlvbnNcbiAgICAgICAgdmFyIGVudGVyQW5pbU9wdGlvbnMgPSB7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJyxcbiAgICAgICAgICAvLyBIYW5kbGUgbW9kYWwgb25PcGVuRW5kIGNhbGxiYWNrXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMxNC5vcHRpb25zLm9uT3BlbkVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczE0Lm9wdGlvbnMub25PcGVuRW5kLmNhbGwoX3RoaXMxNCwgX3RoaXMxNC5lbCwgX3RoaXMxNC5fb3BlbmluZ1RyaWdnZXIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBCb3R0b20gc2hlZXQgYW5pbWF0aW9uXG4gICAgICAgIGlmICh0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucygnYm90dG9tLXNoZWV0JykpIHtcbiAgICAgICAgICAkLmV4dGVuZChlbnRlckFuaW1PcHRpb25zLCB7XG4gICAgICAgICAgICBib3R0b206IDAsXG4gICAgICAgICAgICBvcGFjaXR5OiAxXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5pbShlbnRlckFuaW1PcHRpb25zKTtcblxuICAgICAgICAgIC8vIE5vcm1hbCBtb2RhbCBhbmltYXRpb25cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAkLmV4dGVuZChlbnRlckFuaW1PcHRpb25zLCB7XG4gICAgICAgICAgICB0b3A6IFt0aGlzLm9wdGlvbnMuc3RhcnRpbmdUb3AsIHRoaXMub3B0aW9ucy5lbmRpbmdUb3BdLFxuICAgICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICAgIHNjYWxlWDogWzAuOCwgMV0sXG4gICAgICAgICAgICBzY2FsZVk6IFswLjgsIDFdXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgYW5pbShlbnRlckFuaW1PcHRpb25zKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgb3V0IG1vZGFsXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZU91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0KCkge1xuICAgICAgICB2YXIgX3RoaXMxNSA9IHRoaXM7XG5cbiAgICAgICAgLy8gQW5pbWF0ZSBvdmVybGF5XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuJG92ZXJsYXlbMF0sXG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFydCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gRGVmaW5lIG1vZGFsIGFuaW1hdGlvbiBvcHRpb25zXG4gICAgICAgIHZhciBleGl0QW5pbU9wdGlvbnMgPSB7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYycsXG4gICAgICAgICAgLy8gSGFuZGxlIG1vZGFsIHJlYWR5IGNhbGxiYWNrXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIF90aGlzMTUuZWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgIF90aGlzMTUuJG92ZXJsYXkucmVtb3ZlKCk7XG5cbiAgICAgICAgICAgIC8vIENhbGwgb25DbG9zZUVuZCBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczE1Lm9wdGlvbnMub25DbG9zZUVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczE1Lm9wdGlvbnMub25DbG9zZUVuZC5jYWxsKF90aGlzMTUsIF90aGlzMTUuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBCb3R0b20gc2hlZXQgYW5pbWF0aW9uXG4gICAgICAgIGlmICh0aGlzLmVsLmNsYXNzTGlzdC5jb250YWlucygnYm90dG9tLXNoZWV0JykpIHtcbiAgICAgICAgICAkLmV4dGVuZChleGl0QW5pbU9wdGlvbnMsIHtcbiAgICAgICAgICAgIGJvdHRvbTogJy0xMDAlJyxcbiAgICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbmltKGV4aXRBbmltT3B0aW9ucyk7XG5cbiAgICAgICAgICAvLyBOb3JtYWwgbW9kYWwgYW5pbWF0aW9uXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJC5leHRlbmQoZXhpdEFuaW1PcHRpb25zLCB7XG4gICAgICAgICAgICB0b3A6IFt0aGlzLm9wdGlvbnMuZW5kaW5nVG9wLCB0aGlzLm9wdGlvbnMuc3RhcnRpbmdUb3BdLFxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIHNjYWxlWDogMC44LFxuICAgICAgICAgICAgc2NhbGVZOiAwLjhcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBhbmltKGV4aXRBbmltT3B0aW9ucyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIE1vZGFsXG4gICAgICAgKiBAcGFyYW0ge2Nhc2h9IFskdHJpZ2dlcl1cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCR0cmlnZ2VyKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgTW9kYWwuX21vZGFsc09wZW4rKztcbiAgICAgICAgdGhpcy5fbnRoTW9kYWxPcGVuZWQgPSBNb2RhbC5fbW9kYWxzT3BlbjtcblxuICAgICAgICAvLyBTZXQgWi1JbmRleCBiYXNlZCBvbiBudW1iZXIgb2YgY3VycmVudGx5IG9wZW4gbW9kYWxzXG4gICAgICAgIHRoaXMuJG92ZXJsYXlbMF0uc3R5bGUuekluZGV4ID0gMTAwMCArIE1vZGFsLl9tb2RhbHNPcGVuICogMjtcbiAgICAgICAgdGhpcy5lbC5zdHlsZS56SW5kZXggPSAxMDAwICsgTW9kYWwuX21vZGFsc09wZW4gKiAyICsgMTtcblxuICAgICAgICAvLyBTZXQgb3BlbmluZyB0cmlnZ2VyLCB1bmRlZmluZWQgaW5kaWNhdGVzIG1vZGFsIHdhcyBvcGVuZWQgYnkgamF2YXNjcmlwdFxuICAgICAgICB0aGlzLl9vcGVuaW5nVHJpZ2dlciA9ICEhJHRyaWdnZXIgPyAkdHJpZ2dlclswXSA6IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBvbk9wZW5TdGFydCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwsIHRoaXMuX29wZW5pbmdUcmlnZ2VyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucHJldmVudFNjcm9sbGluZykge1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnb3BlbicpO1xuICAgICAgICB0aGlzLmVsLmluc2VydEFkamFjZW50RWxlbWVudCgnYWZ0ZXJlbmQnLCB0aGlzLiRvdmVybGF5WzBdKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmRpc21pc3NpYmxlKSB7XG4gICAgICAgICAgdGhpcy5faGFuZGxlS2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlS2V5ZG93bi5iaW5kKHRoaXMpO1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQgPSB0aGlzLl9oYW5kbGVGb2N1cy5iaW5kKHRoaXMpO1xuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duQm91bmQpO1xuICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy4kb3ZlcmxheVswXSk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGVJbigpO1xuXG4gICAgICAgIC8vIEZvY3VzIG1vZGFsXG4gICAgICAgIHRoaXMuZWwuZm9jdXMoKTtcblxuICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDbG9zZSBNb2RhbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIE1vZGFsLl9tb2RhbHNPcGVuLS07XG4gICAgICAgIHRoaXMuX250aE1vZGFsT3BlbmVkID0gMDtcblxuICAgICAgICAvLyBDYWxsIG9uQ2xvc2VTdGFydCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0LmNhbGwodGhpcywgdGhpcy5lbCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5yZW1vdmUoJ29wZW4nKTtcblxuICAgICAgICAvLyBFbmFibGUgYm9keSBzY3JvbGxpbmcgb25seSBpZiB0aGVyZSBhcmUgbm8gbW9yZSBtb2RhbHMgb3Blbi5cbiAgICAgICAgaWYgKE1vZGFsLl9tb2RhbHNPcGVuID09PSAwKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxvdyA9ICcnO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5kaXNtaXNzaWJsZSkge1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVLZXlkb3duQm91bmQpO1xuICAgICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCwgdHJ1ZSk7XG4gICAgICAgIH1cblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy4kb3ZlcmxheVswXSk7XG4gICAgICAgIHRoaXMuX2FuaW1hdGVPdXQoKTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KE1vZGFsLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTW9kYWwpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Nb2RhbDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBNb2RhbDtcbiAgfShDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBNb2RhbFxuICAgKi9cblxuXG4gIE1vZGFsLl9tb2RhbHNPcGVuID0gMDtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgTW9kYWxcbiAgICovXG4gIE1vZGFsLl9jb3VudCA9IDA7XG5cbiAgTS5Nb2RhbCA9IE1vZGFsO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoTW9kYWwsICdtb2RhbCcsICdNX01vZGFsJyk7XG4gIH1cbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBpbkR1cmF0aW9uOiAyNzUsXG4gICAgb3V0RHVyYXRpb246IDIwMCxcbiAgICBvbk9wZW5TdGFydDogbnVsbCxcbiAgICBvbk9wZW5FbmQ6IG51bGwsXG4gICAgb25DbG9zZVN0YXJ0OiBudWxsLFxuICAgIG9uQ2xvc2VFbmQ6IG51bGxcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBNYXRlcmlhbGJveCA9IGZ1bmN0aW9uIChfQ29tcG9uZW50NCkge1xuICAgIF9pbmhlcml0cyhNYXRlcmlhbGJveCwgX0NvbXBvbmVudDQpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IE1hdGVyaWFsYm94IGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gTWF0ZXJpYWxib3goZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBNYXRlcmlhbGJveCk7XG5cbiAgICAgIHZhciBfdGhpczE2ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKE1hdGVyaWFsYm94Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWF0ZXJpYWxib3gpKS5jYWxsKHRoaXMsIE1hdGVyaWFsYm94LCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczE2LmVsLk1fTWF0ZXJpYWxib3ggPSBfdGhpczE2O1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbFxuICAgICAgICogQG1lbWJlciBNYXRlcmlhbGJveCNvcHRpb25zXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaW5EdXJhdGlvbj0yNzVdIC0gTGVuZ3RoIGluIG1zIG9mIGVudGVyIHRyYW5zaXRpb25cbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtvdXREdXJhdGlvbj0yMDBdIC0gTGVuZ3RoIGluIG1zIG9mIGV4aXQgdHJhbnNpdGlvblxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW5TdGFydCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBiZWZvcmUgbWF0ZXJpYWxib3ggaXMgb3BlbmVkXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlbkVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBtYXRlcmlhbGJveCBpcyBvcGVuZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZVN0YXJ0IC0gQ2FsbGJhY2sgZnVuY3Rpb24gY2FsbGVkIGJlZm9yZSBtYXRlcmlhbGJveCBpcyBjbG9zZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZUVuZCAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCBhZnRlciBtYXRlcmlhbGJveCBpcyBjbG9zZWRcbiAgICAgICAqL1xuICAgICAgX3RoaXMxNi5vcHRpb25zID0gJC5leHRlbmQoe30sIE1hdGVyaWFsYm94LmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXMxNi5vdmVybGF5QWN0aXZlID0gZmFsc2U7XG4gICAgICBfdGhpczE2LmRvbmVBbmltYXRpbmcgPSB0cnVlO1xuICAgICAgX3RoaXMxNi5wbGFjZWhvbGRlciA9ICQoJzxkaXY+PC9kaXY+JykuYWRkQ2xhc3MoJ21hdGVyaWFsLXBsYWNlaG9sZGVyJyk7XG4gICAgICBfdGhpczE2Lm9yaWdpbmFsV2lkdGggPSAwO1xuICAgICAgX3RoaXMxNi5vcmlnaW5hbEhlaWdodCA9IDA7XG4gICAgICBfdGhpczE2Lm9yaWdpbklubGluZVN0eWxlcyA9IF90aGlzMTYuJGVsLmF0dHIoJ3N0eWxlJyk7XG4gICAgICBfdGhpczE2LmNhcHRpb24gPSBfdGhpczE2LmVsLmdldEF0dHJpYnV0ZSgnZGF0YS1jYXB0aW9uJykgfHwgJyc7XG5cbiAgICAgIC8vIFdyYXBcbiAgICAgIF90aGlzMTYuJGVsLmJlZm9yZShfdGhpczE2LnBsYWNlaG9sZGVyKTtcbiAgICAgIF90aGlzMTYucGxhY2Vob2xkZXIuYXBwZW5kKF90aGlzMTYuJGVsKTtcblxuICAgICAgX3RoaXMxNi5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICByZXR1cm4gX3RoaXMxNjtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoTWF0ZXJpYWxib3gsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuZWwuTV9NYXRlcmlhbGJveCA9IHVuZGVmaW5lZDtcblxuICAgICAgICAvLyBVbndyYXAgaW1hZ2VcbiAgICAgICAgJCh0aGlzLnBsYWNlaG9sZGVyKS5hZnRlcih0aGlzLmVsKS5yZW1vdmUoKTtcblxuICAgICAgICB0aGlzLiRlbC5yZW1vdmVBdHRyKCdzdHlsZScpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlTWF0ZXJpYWxib3hDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlTWF0ZXJpYWxib3hDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlTWF0ZXJpYWxib3hDbGlja0JvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVNYXRlcmlhbGJveENsaWNrQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBNYXRlcmlhbGJveCBDbGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU1hdGVyaWFsYm94Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlTWF0ZXJpYWxib3hDbGljayhlKSB7XG4gICAgICAgIC8vIElmIGFscmVhZHkgbW9kYWwsIHJldHVybiB0byBvcmlnaW5hbFxuICAgICAgICBpZiAodGhpcy5kb25lQW5pbWF0aW5nID09PSBmYWxzZSB8fCB0aGlzLm92ZXJsYXlBY3RpdmUgJiYgdGhpcy5kb25lQW5pbWF0aW5nKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFdpbmRvdyBTY3JvbGxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVXaW5kb3dTY3JvbGxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93U2Nyb2xsKCkge1xuICAgICAgICBpZiAodGhpcy5vdmVybGF5QWN0aXZlKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFdpbmRvdyBSZXNpemVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgICAgICBpZiAodGhpcy5vdmVybGF5QWN0aXZlKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFdpbmRvdyBSZXNpemVcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVXaW5kb3dFc2NhcGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93RXNjYXBlKGUpIHtcbiAgICAgICAgLy8gRVNDIGtleVxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAyNyAmJiB0aGlzLmRvbmVBbmltYXRpbmcgJiYgdGhpcy5vdmVybGF5QWN0aXZlKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRmluZCBhbmNlc3RvcnMgd2l0aCBvdmVyZmxvdzogaGlkZGVuOyBhbmQgbWFrZSB2aXNpYmxlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfbWFrZUFuY2VzdG9yc092ZXJmbG93VmlzaWJsZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9tYWtlQW5jZXN0b3JzT3ZlcmZsb3dWaXNpYmxlKCkge1xuICAgICAgICB0aGlzLmFuY2VzdG9yc0NoYW5nZWQgPSAkKCk7XG4gICAgICAgIHZhciBhbmNlc3RvciA9IHRoaXMucGxhY2Vob2xkZXJbMF0ucGFyZW50Tm9kZTtcbiAgICAgICAgd2hpbGUgKGFuY2VzdG9yICE9PSBudWxsICYmICEkKGFuY2VzdG9yKS5pcyhkb2N1bWVudCkpIHtcbiAgICAgICAgICB2YXIgY3VyciA9ICQoYW5jZXN0b3IpO1xuICAgICAgICAgIGlmIChjdXJyLmNzcygnb3ZlcmZsb3cnKSAhPT0gJ3Zpc2libGUnKSB7XG4gICAgICAgICAgICBjdXJyLmNzcygnb3ZlcmZsb3cnLCAndmlzaWJsZScpO1xuICAgICAgICAgICAgaWYgKHRoaXMuYW5jZXN0b3JzQ2hhbmdlZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAgIHRoaXMuYW5jZXN0b3JzQ2hhbmdlZCA9IGN1cnI7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICB0aGlzLmFuY2VzdG9yc0NoYW5nZWQgPSB0aGlzLmFuY2VzdG9yc0NoYW5nZWQuYWRkKGN1cnIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBhbmNlc3RvciA9IGFuY2VzdG9yLnBhcmVudE5vZGU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlIGltYWdlIGluXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUltYWdlSW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUltYWdlSW4oKSB7XG4gICAgICAgIHZhciBfdGhpczE3ID0gdGhpcztcblxuICAgICAgICB2YXIgYW5pbU9wdGlvbnMgPSB7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCxcbiAgICAgICAgICBoZWlnaHQ6IFt0aGlzLm9yaWdpbmFsSGVpZ2h0LCB0aGlzLm5ld0hlaWdodF0sXG4gICAgICAgICAgd2lkdGg6IFt0aGlzLm9yaWdpbmFsV2lkdGgsIHRoaXMubmV3V2lkdGhdLFxuICAgICAgICAgIGxlZnQ6IE0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0KCkgKyB0aGlzLndpbmRvd1dpZHRoIC8gMiAtIHRoaXMucGxhY2Vob2xkZXIub2Zmc2V0KCkubGVmdCAtIHRoaXMubmV3V2lkdGggLyAyLFxuICAgICAgICAgIHRvcDogTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpICsgdGhpcy53aW5kb3dIZWlnaHQgLyAyIC0gdGhpcy5wbGFjZWhvbGRlci5vZmZzZXQoKS50b3AgLSB0aGlzLm5ld0hlaWdodCAvIDIsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMxNy5kb25lQW5pbWF0aW5nID0gdHJ1ZTtcblxuICAgICAgICAgICAgLy8gb25PcGVuRW5kIGNhbGxiYWNrXG4gICAgICAgICAgICBpZiAodHlwZW9mIF90aGlzMTcub3B0aW9ucy5vbk9wZW5FbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMxNy5vcHRpb25zLm9uT3BlbkVuZC5jYWxsKF90aGlzMTcsIF90aGlzMTcuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICAvLyBPdmVycmlkZSBtYXgtd2lkdGggb3IgbWF4LWhlaWdodCBpZiBuZWVkZWRcbiAgICAgICAgdGhpcy5tYXhXaWR0aCA9IHRoaXMuJGVsLmNzcygnbWF4LXdpZHRoJyk7XG4gICAgICAgIHRoaXMubWF4SGVpZ2h0ID0gdGhpcy4kZWwuY3NzKCdtYXgtaGVpZ2h0Jyk7XG4gICAgICAgIGlmICh0aGlzLm1heFdpZHRoICE9PSAnbm9uZScpIHtcbiAgICAgICAgICBhbmltT3B0aW9ucy5tYXhXaWR0aCA9IHRoaXMubmV3V2lkdGg7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMubWF4SGVpZ2h0ICE9PSAnbm9uZScpIHtcbiAgICAgICAgICBhbmltT3B0aW9ucy5tYXhIZWlnaHQgPSB0aGlzLm5ld0hlaWdodDtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW0oYW5pbU9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgaW1hZ2Ugb3V0XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZUltYWdlT3V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbWFnZU91dCgpIHtcbiAgICAgICAgdmFyIF90aGlzMTggPSB0aGlzO1xuXG4gICAgICAgIHZhciBhbmltT3B0aW9ucyA9IHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLmVsLFxuICAgICAgICAgIHdpZHRoOiB0aGlzLm9yaWdpbmFsV2lkdGgsXG4gICAgICAgICAgaGVpZ2h0OiB0aGlzLm9yaWdpbmFsSGVpZ2h0LFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczE4LnBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgICAgIGhlaWdodDogJycsXG4gICAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgICAgcG9zaXRpb246ICcnLFxuICAgICAgICAgICAgICB0b3A6ICcnLFxuICAgICAgICAgICAgICBsZWZ0OiAnJ1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFJldmVydCB0byB3aWR0aCBvciBoZWlnaHQgYXR0cmlidXRlXG4gICAgICAgICAgICBpZiAoX3RoaXMxOC5hdHRyV2lkdGgpIHtcbiAgICAgICAgICAgICAgX3RoaXMxOC4kZWwuYXR0cignd2lkdGgnLCBfdGhpczE4LmF0dHJXaWR0aCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoX3RoaXMxOC5hdHRySGVpZ2h0KSB7XG4gICAgICAgICAgICAgIF90aGlzMTguJGVsLmF0dHIoJ2hlaWdodCcsIF90aGlzMTguYXR0ckhlaWdodCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIF90aGlzMTguJGVsLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICBfdGhpczE4Lm9yaWdpbklubGluZVN0eWxlcyAmJiBfdGhpczE4LiRlbC5hdHRyKCdzdHlsZScsIF90aGlzMTgub3JpZ2luSW5saW5lU3R5bGVzKTtcblxuICAgICAgICAgICAgLy8gUmVtb3ZlIGNsYXNzXG4gICAgICAgICAgICBfdGhpczE4LiRlbC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICBfdGhpczE4LmRvbmVBbmltYXRpbmcgPSB0cnVlO1xuXG4gICAgICAgICAgICAvLyBSZW1vdmUgb3ZlcmZsb3cgb3ZlcnJpZGVzIG9uIGFuY2VzdG9yc1xuICAgICAgICAgICAgaWYgKF90aGlzMTguYW5jZXN0b3JzQ2hhbmdlZC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgX3RoaXMxOC5hbmNlc3RvcnNDaGFuZ2VkLmNzcygnb3ZlcmZsb3cnLCAnJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIG9uQ2xvc2VFbmQgY2FsbGJhY2tcbiAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMxOC5vcHRpb25zLm9uQ2xvc2VFbmQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgX3RoaXMxOC5vcHRpb25zLm9uQ2xvc2VFbmQuY2FsbChfdGhpczE4LCBfdGhpczE4LmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgYW5pbShhbmltT3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVXBkYXRlIG9wZW4gYW5kIGNsb3NlIHZhcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl91cGRhdGVWYXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVZhcnMoKSB7XG4gICAgICAgIHRoaXMud2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdGhpcy53aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHRoaXMuY2FwdGlvbiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWNhcHRpb24nKSB8fCAnJztcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIE1hdGVyaWFsYm94XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJvcGVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gb3BlbigpIHtcbiAgICAgICAgdmFyIF90aGlzMTkgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVZhcnMoKTtcbiAgICAgICAgdGhpcy5vcmlnaW5hbFdpZHRoID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS53aWR0aDtcbiAgICAgICAgdGhpcy5vcmlnaW5hbEhlaWdodCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkuaGVpZ2h0O1xuXG4gICAgICAgIC8vIFNldCBzdGF0ZXNcbiAgICAgICAgdGhpcy5kb25lQW5pbWF0aW5nID0gZmFsc2U7XG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy5vdmVybGF5QWN0aXZlID0gdHJ1ZTtcblxuICAgICAgICAvLyBvbk9wZW5TdGFydCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW5TdGFydC5jYWxsKHRoaXMsIHRoaXMuZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IHBvc2l0aW9uaW5nIGZvciBwbGFjZWhvbGRlclxuICAgICAgICB0aGlzLnBsYWNlaG9sZGVyLmNzcyh7XG4gICAgICAgICAgd2lkdGg6IHRoaXMucGxhY2Vob2xkZXJbMF0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGggKyAncHgnLFxuICAgICAgICAgIGhlaWdodDogdGhpcy5wbGFjZWhvbGRlclswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5oZWlnaHQgKyAncHgnLFxuICAgICAgICAgIHBvc2l0aW9uOiAncmVsYXRpdmUnLFxuICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICBsZWZ0OiAwXG4gICAgICAgIH0pO1xuXG4gICAgICAgIHRoaXMuX21ha2VBbmNlc3RvcnNPdmVyZmxvd1Zpc2libGUoKTtcblxuICAgICAgICAvLyBTZXQgY3NzIG9uIG9yaWdpblxuICAgICAgICB0aGlzLiRlbC5jc3Moe1xuICAgICAgICAgIHBvc2l0aW9uOiAnYWJzb2x1dGUnLFxuICAgICAgICAgICd6LWluZGV4JzogMTAwMCxcbiAgICAgICAgICAnd2lsbC1jaGFuZ2UnOiAnbGVmdCwgdG9wLCB3aWR0aCwgaGVpZ2h0J1xuICAgICAgICB9KTtcblxuICAgICAgICAvLyBDaGFuZ2UgZnJvbSB3aWR0aCBvciBoZWlnaHQgYXR0cmlidXRlIHRvIGNzc1xuICAgICAgICB0aGlzLmF0dHJXaWR0aCA9IHRoaXMuJGVsLmF0dHIoJ3dpZHRoJyk7XG4gICAgICAgIHRoaXMuYXR0ckhlaWdodCA9IHRoaXMuJGVsLmF0dHIoJ2hlaWdodCcpO1xuICAgICAgICBpZiAodGhpcy5hdHRyV2lkdGgpIHtcbiAgICAgICAgICB0aGlzLiRlbC5jc3MoJ3dpZHRoJywgdGhpcy5hdHRyV2lkdGggKyAncHgnKTtcbiAgICAgICAgICB0aGlzLiRlbC5yZW1vdmVBdHRyKCd3aWR0aCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLmF0dHJIZWlnaHQpIHtcbiAgICAgICAgICB0aGlzLiRlbC5jc3MoJ3dpZHRoJywgdGhpcy5hdHRySGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQXR0cignaGVpZ2h0Jyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBZGQgb3ZlcmxheVxuICAgICAgICB0aGlzLiRvdmVybGF5ID0gJCgnPGRpdiBpZD1cIm1hdGVyaWFsYm94LW92ZXJsYXlcIj48L2Rpdj4nKS5jc3Moe1xuICAgICAgICAgIG9wYWNpdHk6IDBcbiAgICAgICAgfSkub25lKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMxOS5kb25lQW5pbWF0aW5nKSB7XG4gICAgICAgICAgICBfdGhpczE5LmNsb3NlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBQdXQgYmVmb3JlIGluIG9yaWdpbiBpbWFnZSB0byBwcmVzZXJ2ZSB6LWluZGV4IGxheWVyaW5nLlxuICAgICAgICB0aGlzLiRlbC5iZWZvcmUodGhpcy4kb3ZlcmxheSk7XG5cbiAgICAgICAgLy8gU2V0IGRpbWVuc2lvbnMgaWYgbmVlZGVkXG4gICAgICAgIHZhciBvdmVybGF5T2Zmc2V0ID0gdGhpcy4kb3ZlcmxheVswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdGhpcy4kb3ZlcmxheS5jc3Moe1xuICAgICAgICAgIHdpZHRoOiB0aGlzLndpbmRvd1dpZHRoICsgJ3B4JyxcbiAgICAgICAgICBoZWlnaHQ6IHRoaXMud2luZG93SGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICBsZWZ0OiAtMSAqIG92ZXJsYXlPZmZzZXQubGVmdCArICdweCcsXG4gICAgICAgICAgdG9wOiAtMSAqIG92ZXJsYXlPZmZzZXQudG9wICsgJ3B4J1xuICAgICAgICB9KTtcblxuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy4kb3ZlcmxheVswXSk7XG5cbiAgICAgICAgLy8gQW5pbWF0ZSBPdmVybGF5XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuJG92ZXJsYXlbMF0sXG4gICAgICAgICAgb3BhY2l0eTogMSxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEFkZCBhbmQgYW5pbWF0ZSBjYXB0aW9uIGlmIGl0IGV4aXN0c1xuICAgICAgICBpZiAodGhpcy5jYXB0aW9uICE9PSAnJykge1xuICAgICAgICAgIGlmICh0aGlzLiRwaG90b2NhcHRpb24pIHtcbiAgICAgICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJHBob3RvQ2FwdGlvblswXSk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHRoaXMuJHBob3RvQ2FwdGlvbiA9ICQoJzxkaXYgY2xhc3M9XCJtYXRlcmlhbGJveC1jYXB0aW9uXCI+PC9kaXY+Jyk7XG4gICAgICAgICAgdGhpcy4kcGhvdG9DYXB0aW9uLnRleHQodGhpcy5jYXB0aW9uKTtcbiAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKHRoaXMuJHBob3RvQ2FwdGlvbik7XG4gICAgICAgICAgdGhpcy4kcGhvdG9DYXB0aW9uLmNzcyh7IGRpc3BsYXk6ICdpbmxpbmUnIH0pO1xuXG4gICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICB0YXJnZXRzOiB0aGlzLiRwaG90b0NhcHRpb25bMF0sXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNpemUgSW1hZ2VcbiAgICAgICAgdmFyIHJhdGlvID0gMDtcbiAgICAgICAgdmFyIHdpZHRoUGVyY2VudCA9IHRoaXMub3JpZ2luYWxXaWR0aCAvIHRoaXMud2luZG93V2lkdGg7XG4gICAgICAgIHZhciBoZWlnaHRQZXJjZW50ID0gdGhpcy5vcmlnaW5hbEhlaWdodCAvIHRoaXMud2luZG93SGVpZ2h0O1xuICAgICAgICB0aGlzLm5ld1dpZHRoID0gMDtcbiAgICAgICAgdGhpcy5uZXdIZWlnaHQgPSAwO1xuXG4gICAgICAgIGlmICh3aWR0aFBlcmNlbnQgPiBoZWlnaHRQZXJjZW50KSB7XG4gICAgICAgICAgcmF0aW8gPSB0aGlzLm9yaWdpbmFsSGVpZ2h0IC8gdGhpcy5vcmlnaW5hbFdpZHRoO1xuICAgICAgICAgIHRoaXMubmV3V2lkdGggPSB0aGlzLndpbmRvd1dpZHRoICogMC45O1xuICAgICAgICAgIHRoaXMubmV3SGVpZ2h0ID0gdGhpcy53aW5kb3dXaWR0aCAqIDAuOSAqIHJhdGlvO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJhdGlvID0gdGhpcy5vcmlnaW5hbFdpZHRoIC8gdGhpcy5vcmlnaW5hbEhlaWdodDtcbiAgICAgICAgICB0aGlzLm5ld1dpZHRoID0gdGhpcy53aW5kb3dIZWlnaHQgKiAwLjkgKiByYXRpbztcbiAgICAgICAgICB0aGlzLm5ld0hlaWdodCA9IHRoaXMud2luZG93SGVpZ2h0ICogMC45O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYW5pbWF0ZUltYWdlSW4oKTtcblxuICAgICAgICAvLyBIYW5kbGUgRXhpdCB0cmlnZ2Vyc1xuICAgICAgICB0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGxCb3VuZCA9IHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCA9IHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVXaW5kb3dFc2NhcGVCb3VuZCA9IHRoaXMuX2hhbmRsZVdpbmRvd0VzY2FwZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCB0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGxCb3VuZCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZVdpbmRvd0VzY2FwZUJvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDbG9zZSBNYXRlcmlhbGJveFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdmFyIF90aGlzMjAgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZVZhcnMoKTtcbiAgICAgICAgdGhpcy5kb25lQW5pbWF0aW5nID0gZmFsc2U7XG5cbiAgICAgICAgLy8gb25DbG9zZVN0YXJ0IGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2xvc2VTdGFydCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZWwpO1xuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLiRvdmVybGF5WzBdKTtcblxuICAgICAgICBpZiAodGhpcy5jYXB0aW9uICE9PSAnJykge1xuICAgICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuJHBob3RvQ2FwdGlvblswXSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBkaXNhYmxlIGV4aXQgaGFuZGxlcnNcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kKTtcbiAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5faGFuZGxlV2luZG93RXNjYXBlQm91bmQpO1xuXG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuJG92ZXJsYXlbMF0sXG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXMyMC5vdmVybGF5QWN0aXZlID0gZmFsc2U7XG4gICAgICAgICAgICBfdGhpczIwLiRvdmVybGF5LnJlbW92ZSgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5fYW5pbWF0ZUltYWdlT3V0KCk7XG5cbiAgICAgICAgLy8gUmVtb3ZlIENhcHRpb24gKyByZXNldCBjc3Mgc2V0dGluZ3Mgb24gaW1hZ2VcbiAgICAgICAgaWYgKHRoaXMuY2FwdGlvbiAhPT0gJycpIHtcbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuJHBob3RvQ2FwdGlvblswXSxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnLFxuICAgICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgX3RoaXMyMC4kcGhvdG9DYXB0aW9uLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KE1hdGVyaWFsYm94Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoTWF0ZXJpYWxib3gpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9NYXRlcmlhbGJveDtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBNYXRlcmlhbGJveDtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uTWF0ZXJpYWxib3ggPSBNYXRlcmlhbGJveDtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKE1hdGVyaWFsYm94LCAnbWF0ZXJpYWxib3gnLCAnTV9NYXRlcmlhbGJveCcpO1xuICB9XG59KShjYXNoLCBNLmFuaW1lKTtcbjsoZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgcmVzcG9uc2l2ZVRocmVzaG9sZDogMCAvLyBicmVha3BvaW50IGZvciBzd2lwZWFibGVcbiAgfTtcblxuICB2YXIgUGFyYWxsYXggPSBmdW5jdGlvbiAoX0NvbXBvbmVudDUpIHtcbiAgICBfaW5oZXJpdHMoUGFyYWxsYXgsIF9Db21wb25lbnQ1KTtcblxuICAgIGZ1bmN0aW9uIFBhcmFsbGF4KGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUGFyYWxsYXgpO1xuXG4gICAgICB2YXIgX3RoaXMyMSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQYXJhbGxheC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFBhcmFsbGF4KSkuY2FsbCh0aGlzLCBQYXJhbGxheCwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXMyMS5lbC5NX1BhcmFsbGF4ID0gX3RoaXMyMTtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgUGFyYWxsYXhcbiAgICAgICAqIEBtZW1iZXIgUGFyYWxsYXgjb3B0aW9uc1xuICAgICAgICogQHByb3Age051bWJlcn0gcmVzcG9uc2l2ZVRocmVzaG9sZFxuICAgICAgICovXG4gICAgICBfdGhpczIxLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgUGFyYWxsYXguZGVmYXVsdHMsIG9wdGlvbnMpO1xuICAgICAgX3RoaXMyMS5fZW5hYmxlZCA9IHdpbmRvdy5pbm5lcldpZHRoID4gX3RoaXMyMS5vcHRpb25zLnJlc3BvbnNpdmVUaHJlc2hvbGQ7XG5cbiAgICAgIF90aGlzMjEuJGltZyA9IF90aGlzMjEuJGVsLmZpbmQoJ2ltZycpLmZpcnN0KCk7XG4gICAgICBfdGhpczIxLiRpbWcuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICAgIHZhciBlbCA9IHRoaXM7XG4gICAgICAgIGlmIChlbC5jb21wbGV0ZSkgJChlbCkudHJpZ2dlcignbG9hZCcpO1xuICAgICAgfSk7XG5cbiAgICAgIF90aGlzMjEuX3VwZGF0ZVBhcmFsbGF4KCk7XG4gICAgICBfdGhpczIxLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIF90aGlzMjEuX3NldHVwU3R5bGVzKCk7XG5cbiAgICAgIFBhcmFsbGF4Ll9wYXJhbGxheGVzLnB1c2goX3RoaXMyMSk7XG4gICAgICByZXR1cm4gX3RoaXMyMTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoUGFyYWxsYXgsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBQYXJhbGxheC5fcGFyYWxsYXhlcy5zcGxpY2UoUGFyYWxsYXguX3BhcmFsbGF4ZXMuaW5kZXhPZih0aGlzKSwgMSk7XG4gICAgICAgIHRoaXMuJGltZ1swXS5zdHlsZS50cmFuc2Zvcm0gPSAnJztcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuXG4gICAgICAgIHRoaXMuJGVsWzBdLk1fUGFyYWxsYXggPSB1bmRlZmluZWQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVJbWFnZUxvYWRCb3VuZCA9IHRoaXMuX2hhbmRsZUltYWdlTG9hZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLiRpbWdbMF0uYWRkRXZlbnRMaXN0ZW5lcignbG9hZCcsIHRoaXMuX2hhbmRsZUltYWdlTG9hZEJvdW5kKTtcblxuICAgICAgICBpZiAoUGFyYWxsYXguX3BhcmFsbGF4ZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgUGFyYWxsYXguX2hhbmRsZVNjcm9sbFRocm90dGxlZCA9IE0udGhyb3R0bGUoUGFyYWxsYXguX2hhbmRsZVNjcm9sbCwgNSk7XG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIFBhcmFsbGF4Ll9oYW5kbGVTY3JvbGxUaHJvdHRsZWQpO1xuXG4gICAgICAgICAgUGFyYWxsYXguX2hhbmRsZVdpbmRvd1Jlc2l6ZVRocm90dGxlZCA9IE0udGhyb3R0bGUoUGFyYWxsYXguX2hhbmRsZVdpbmRvd1Jlc2l6ZSwgNSk7XG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIFBhcmFsbGF4Ll9oYW5kbGVXaW5kb3dSZXNpemVUaHJvdHRsZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuJGltZ1swXS5yZW1vdmVFdmVudExpc3RlbmVyKCdsb2FkJywgdGhpcy5faGFuZGxlSW1hZ2VMb2FkQm91bmQpO1xuXG4gICAgICAgIGlmIChQYXJhbGxheC5fcGFyYWxsYXhlcy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgUGFyYWxsYXguX2hhbmRsZVNjcm9sbFRocm90dGxlZCk7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIFBhcmFsbGF4Ll9oYW5kbGVXaW5kb3dSZXNpemVUaHJvdHRsZWQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cFN0eWxlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFN0eWxlcygpIHtcbiAgICAgICAgdGhpcy4kaW1nWzBdLnN0eWxlLm9wYWNpdHkgPSAxO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW1hZ2VMb2FkXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUltYWdlTG9hZCgpIHtcbiAgICAgICAgdGhpcy5fdXBkYXRlUGFyYWxsYXgoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3VwZGF0ZVBhcmFsbGF4XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVBhcmFsbGF4KCkge1xuICAgICAgICB2YXIgY29udGFpbmVySGVpZ2h0ID0gdGhpcy4kZWwuaGVpZ2h0KCkgPiAwID8gdGhpcy5lbC5wYXJlbnROb2RlLm9mZnNldEhlaWdodCA6IDUwMDtcbiAgICAgICAgdmFyIGltZ0hlaWdodCA9IHRoaXMuJGltZ1swXS5vZmZzZXRIZWlnaHQ7XG4gICAgICAgIHZhciBwYXJhbGxheERpc3QgPSBpbWdIZWlnaHQgLSBjb250YWluZXJIZWlnaHQ7XG4gICAgICAgIHZhciBib3R0b20gPSB0aGlzLiRlbC5vZmZzZXQoKS50b3AgKyBjb250YWluZXJIZWlnaHQ7XG4gICAgICAgIHZhciB0b3AgPSB0aGlzLiRlbC5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBzY3JvbGxUb3AgPSBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCk7XG4gICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHZhciB3aW5kb3dCb3R0b20gPSBzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQ7XG4gICAgICAgIHZhciBwZXJjZW50U2Nyb2xsZWQgPSAod2luZG93Qm90dG9tIC0gdG9wKSAvIChjb250YWluZXJIZWlnaHQgKyB3aW5kb3dIZWlnaHQpO1xuICAgICAgICB2YXIgcGFyYWxsYXggPSBwYXJhbGxheERpc3QgKiBwZXJjZW50U2Nyb2xsZWQ7XG5cbiAgICAgICAgaWYgKCF0aGlzLl9lbmFibGVkKSB7XG4gICAgICAgICAgdGhpcy4kaW1nWzBdLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuICAgICAgICB9IGVsc2UgaWYgKGJvdHRvbSA+IHNjcm9sbFRvcCAmJiB0b3AgPCBzY3JvbGxUb3AgKyB3aW5kb3dIZWlnaHQpIHtcbiAgICAgICAgICB0aGlzLiRpbWdbMF0uc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGUzRCgtNTAlLCBcIiArIHBhcmFsbGF4ICsgXCJweCwgMClcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChQYXJhbGxheC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFBhcmFsbGF4KSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fUGFyYWxsYXg7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVTY3JvbGxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlU2Nyb2xsKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBhcmFsbGF4Ll9wYXJhbGxheGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBhcmFsbGF4SW5zdGFuY2UgPSBQYXJhbGxheC5fcGFyYWxsYXhlc1tpXTtcbiAgICAgICAgICBwYXJhbGxheEluc3RhbmNlLl91cGRhdGVQYXJhbGxheC5jYWxsKHBhcmFsbGF4SW5zdGFuY2UpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFBhcmFsbGF4Ll9wYXJhbGxheGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHBhcmFsbGF4SW5zdGFuY2UgPSBQYXJhbGxheC5fcGFyYWxsYXhlc1tpXTtcbiAgICAgICAgICBwYXJhbGxheEluc3RhbmNlLl9lbmFibGVkID0gd2luZG93LmlubmVyV2lkdGggPiBwYXJhbGxheEluc3RhbmNlLm9wdGlvbnMucmVzcG9uc2l2ZVRocmVzaG9sZDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFBhcmFsbGF4O1xuICB9KENvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFBhcmFsbGF4XG4gICAqL1xuXG5cbiAgUGFyYWxsYXguX3BhcmFsbGF4ZXMgPSBbXTtcblxuICBNLlBhcmFsbGF4ID0gUGFyYWxsYXg7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihQYXJhbGxheCwgJ3BhcmFsbGF4JywgJ01fUGFyYWxsYXgnKTtcbiAgfVxufSkoY2FzaCk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgb25TaG93OiBudWxsLFxuICAgIHN3aXBlYWJsZTogZmFsc2UsXG4gICAgcmVzcG9uc2l2ZVRocmVzaG9sZDogSW5maW5pdHkgLy8gYnJlYWtwb2ludCBmb3Igc3dpcGVhYmxlXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgVGFicyA9IGZ1bmN0aW9uIChfQ29tcG9uZW50Nikge1xuICAgIF9pbmhlcml0cyhUYWJzLCBfQ29tcG9uZW50Nik7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgVGFicyBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIFRhYnMoZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYWJzKTtcblxuICAgICAgdmFyIF90aGlzMjIgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoVGFicy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRhYnMpKS5jYWxsKHRoaXMsIFRhYnMsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzMjIuZWwuTV9UYWJzID0gX3RoaXMyMjtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgVGFic1xuICAgICAgICogQG1lbWJlciBUYWJzI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGR1cmF0aW9uXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uU2hvd1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IHN3aXBlYWJsZVxuICAgICAgICogQHByb3Age051bWJlcn0gcmVzcG9uc2l2ZVRocmVzaG9sZFxuICAgICAgICovXG4gICAgICBfdGhpczIyLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVGFicy5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIFNldHVwXG4gICAgICBfdGhpczIyLiR0YWJMaW5rcyA9IF90aGlzMjIuJGVsLmNoaWxkcmVuKCdsaS50YWInKS5jaGlsZHJlbignYScpO1xuICAgICAgX3RoaXMyMi5pbmRleCA9IDA7XG4gICAgICBfdGhpczIyLl9zZXR1cEFjdGl2ZVRhYkxpbmsoKTtcblxuICAgICAgLy8gU2V0dXAgdGFicyBjb250ZW50XG4gICAgICBpZiAoX3RoaXMyMi5vcHRpb25zLnN3aXBlYWJsZSkge1xuICAgICAgICBfdGhpczIyLl9zZXR1cFN3aXBlYWJsZVRhYnMoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIF90aGlzMjIuX3NldHVwTm9ybWFsVGFicygpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCB0YWJzIGluZGljYXRvciBhZnRlciBjb250ZW50IHRvIGVuc3VyZSBhY2N1cmF0ZSB3aWR0aHNcbiAgICAgIF90aGlzMjIuX3NldFRhYnNBbmRUYWJXaWR0aCgpO1xuICAgICAgX3RoaXMyMi5fY3JlYXRlSW5kaWNhdG9yKCk7XG5cbiAgICAgIF90aGlzMjIuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzMjI7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFRhYnMsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuX2luZGljYXRvci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuX2luZGljYXRvcik7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zd2lwZWFibGUpIHtcbiAgICAgICAgICB0aGlzLl90ZWFyZG93blN3aXBlYWJsZVRhYnMoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl90ZWFyZG93bk5vcm1hbFRhYnMoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuJGVsWzBdLk1fVGFicyA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kID0gdGhpcy5faGFuZGxlV2luZG93UmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5faGFuZGxlVGFiQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZVRhYkNsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUYWJDbGlja0JvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVXaW5kb3dSZXNpemVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUYWJDbGlja0JvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgd2luZG93IFJlc2l6ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVdpbmRvd1Jlc2l6ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVXaW5kb3dSZXNpemUoKSB7XG4gICAgICAgIHRoaXMuX3NldFRhYnNBbmRUYWJXaWR0aCgpO1xuXG4gICAgICAgIGlmICh0aGlzLnRhYldpZHRoICE9PSAwICYmIHRoaXMudGFic1dpZHRoICE9PSAwKSB7XG4gICAgICAgICAgdGhpcy5faW5kaWNhdG9yLnN0eWxlLmxlZnQgPSB0aGlzLl9jYWxjTGVmdFBvcyh0aGlzLiRhY3RpdmVUYWJMaW5rKSArICdweCc7XG4gICAgICAgICAgdGhpcy5faW5kaWNhdG9yLnN0eWxlLnJpZ2h0ID0gdGhpcy5fY2FsY1JpZ2h0UG9zKHRoaXMuJGFjdGl2ZVRhYkxpbmspICsgJ3B4JztcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSB0YWIgY2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVUYWJDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVUYWJDbGljayhlKSB7XG4gICAgICAgIHZhciBfdGhpczIzID0gdGhpcztcblxuICAgICAgICB2YXIgdGFiID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGkudGFiJyk7XG4gICAgICAgIHZhciB0YWJMaW5rID0gJChlLnRhcmdldCkuY2xvc2VzdCgnYScpO1xuXG4gICAgICAgIC8vIEhhbmRsZSBjbGljayBvbiB0YWIgbGluayBvbmx5XG4gICAgICAgIGlmICghdGFiTGluay5sZW5ndGggfHwgIXRhYkxpbmsucGFyZW50KCkuaGFzQ2xhc3MoJ3RhYicpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRhYi5oYXNDbGFzcygnZGlzYWJsZWQnKSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBY3QgYXMgcmVndWxhciBsaW5rIGlmIHRhcmdldCBhdHRyaWJ1dGUgaXMgc3BlY2lmaWVkLlxuICAgICAgICBpZiAoISF0YWJMaW5rLmF0dHIoJ3RhcmdldCcpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFrZSB0aGUgb2xkIHRhYiBpbmFjdGl2ZS5cbiAgICAgICAgdGhpcy4kYWN0aXZlVGFiTGluay5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHZhciAkb2xkQ29udGVudCA9IHRoaXMuJGNvbnRlbnQ7XG5cbiAgICAgICAgLy8gVXBkYXRlIHRoZSB2YXJpYWJsZXMgd2l0aCB0aGUgbmV3IGxpbmsgYW5kIGNvbnRlbnRcbiAgICAgICAgdGhpcy4kYWN0aXZlVGFiTGluayA9IHRhYkxpbms7XG4gICAgICAgIHRoaXMuJGNvbnRlbnQgPSAkKE0uZXNjYXBlSGFzaCh0YWJMaW5rWzBdLmhhc2gpKTtcbiAgICAgICAgdGhpcy4kdGFiTGlua3MgPSB0aGlzLiRlbC5jaGlsZHJlbignbGkudGFiJykuY2hpbGRyZW4oJ2EnKTtcblxuICAgICAgICAvLyBNYWtlIHRoZSB0YWIgYWN0aXZlLlxuICAgICAgICB0aGlzLiRhY3RpdmVUYWJMaW5rLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdmFyIHByZXZJbmRleCA9IHRoaXMuaW5kZXg7XG4gICAgICAgIHRoaXMuaW5kZXggPSBNYXRoLm1heCh0aGlzLiR0YWJMaW5rcy5pbmRleCh0YWJMaW5rKSwgMCk7XG5cbiAgICAgICAgLy8gU3dhcCBjb250ZW50XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc3dpcGVhYmxlKSB7XG4gICAgICAgICAgaWYgKHRoaXMuX3RhYnNDYXJvdXNlbCkge1xuICAgICAgICAgICAgdGhpcy5fdGFic0Nhcm91c2VsLnNldCh0aGlzLmluZGV4LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGlmICh0eXBlb2YgX3RoaXMyMy5vcHRpb25zLm9uU2hvdyA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgIF90aGlzMjMub3B0aW9ucy5vblNob3cuY2FsbChfdGhpczIzLCBfdGhpczIzLiRjb250ZW50WzBdKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGlmICh0aGlzLiRjb250ZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy4kY29udGVudFswXS5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcbiAgICAgICAgICAgIHRoaXMuJGNvbnRlbnQuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25TaG93ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblNob3cuY2FsbCh0aGlzLCB0aGlzLiRjb250ZW50WzBdKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKCRvbGRDb250ZW50Lmxlbmd0aCAmJiAhJG9sZENvbnRlbnQuaXModGhpcy4kY29udGVudCkpIHtcbiAgICAgICAgICAgICAgJG9sZENvbnRlbnRbMF0uc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICAgICAgJG9sZENvbnRlbnQucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSB3aWR0aHMgYWZ0ZXIgY29udGVudCBpcyBzd2FwcGVkIChzY3JvbGxiYXIgYnVnZml4KVxuICAgICAgICB0aGlzLl9zZXRUYWJzQW5kVGFiV2lkdGgoKTtcblxuICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yXG4gICAgICAgIHRoaXMuX2FuaW1hdGVJbmRpY2F0b3IocHJldkluZGV4KTtcblxuICAgICAgICAvLyBQcmV2ZW50IHRoZSBhbmNob3IncyBkZWZhdWx0IGNsaWNrIGFjdGlvblxuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2VuZXJhdGUgZWxlbWVudHMgZm9yIHRhYiBpbmRpY2F0b3IuXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY3JlYXRlSW5kaWNhdG9yXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUluZGljYXRvcigpIHtcbiAgICAgICAgdmFyIF90aGlzMjQgPSB0aGlzO1xuXG4gICAgICAgIHZhciBpbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdsaScpO1xuICAgICAgICBpbmRpY2F0b3IuY2xhc3NMaXN0LmFkZCgnaW5kaWNhdG9yJyk7XG5cbiAgICAgICAgdGhpcy5lbC5hcHBlbmRDaGlsZChpbmRpY2F0b3IpO1xuICAgICAgICB0aGlzLl9pbmRpY2F0b3IgPSBpbmRpY2F0b3I7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXMyNC5faW5kaWNhdG9yLnN0eWxlLmxlZnQgPSBfdGhpczI0Ll9jYWxjTGVmdFBvcyhfdGhpczI0LiRhY3RpdmVUYWJMaW5rKSArICdweCc7XG4gICAgICAgICAgX3RoaXMyNC5faW5kaWNhdG9yLnN0eWxlLnJpZ2h0ID0gX3RoaXMyNC5fY2FsY1JpZ2h0UG9zKF90aGlzMjQuJGFjdGl2ZVRhYkxpbmspICsgJ3B4JztcbiAgICAgICAgfSwgMCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgZmlyc3QgYWN0aXZlIHRhYiBsaW5rLlxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwQWN0aXZlVGFiTGlua1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEFjdGl2ZVRhYkxpbmsoKSB7XG4gICAgICAgIC8vIElmIHRoZSBsb2NhdGlvbi5oYXNoIG1hdGNoZXMgb25lIG9mIHRoZSBsaW5rcywgdXNlIHRoYXQgYXMgdGhlIGFjdGl2ZSB0YWIuXG4gICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmsgPSAkKHRoaXMuJHRhYkxpbmtzLmZpbHRlcignW2hyZWY9XCInICsgbG9jYXRpb24uaGFzaCArICdcIl0nKSk7XG5cbiAgICAgICAgLy8gSWYgbm8gbWF0Y2ggaXMgZm91bmQsIHVzZSB0aGUgZmlyc3QgbGluayBvciBhbnkgd2l0aCBjbGFzcyAnYWN0aXZlJyBhcyB0aGUgaW5pdGlhbCBhY3RpdmUgdGFiLlxuICAgICAgICBpZiAodGhpcy4kYWN0aXZlVGFiTGluay5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICB0aGlzLiRhY3RpdmVUYWJMaW5rID0gdGhpcy4kZWwuY2hpbGRyZW4oJ2xpLnRhYicpLmNoaWxkcmVuKCdhLmFjdGl2ZScpLmZpcnN0KCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuJGFjdGl2ZVRhYkxpbmsubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgdGhpcy4kYWN0aXZlVGFiTGluayA9IHRoaXMuJGVsLmNoaWxkcmVuKCdsaS50YWInKS5jaGlsZHJlbignYScpLmZpcnN0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiR0YWJMaW5rcy5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIHRoaXMuJGFjdGl2ZVRhYkxpbmtbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG5cbiAgICAgICAgdGhpcy5pbmRleCA9IE1hdGgubWF4KHRoaXMuJHRhYkxpbmtzLmluZGV4KHRoaXMuJGFjdGl2ZVRhYkxpbmspLCAwKTtcblxuICAgICAgICBpZiAodGhpcy4kYWN0aXZlVGFiTGluay5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLiRjb250ZW50ID0gJChNLmVzY2FwZUhhc2godGhpcy4kYWN0aXZlVGFiTGlua1swXS5oYXNoKSk7XG4gICAgICAgICAgdGhpcy4kY29udGVudC5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBzd2lwZWFibGUgdGFic1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwU3dpcGVhYmxlVGFic1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFN3aXBlYWJsZVRhYnMoKSB7XG4gICAgICAgIHZhciBfdGhpczI1ID0gdGhpcztcblxuICAgICAgICAvLyBDaGFuZ2Ugc3dpcGVhYmxlIGFjY29yZGluZyB0byByZXNwb25zaXZlIHRocmVzaG9sZFxuICAgICAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiB0aGlzLm9wdGlvbnMucmVzcG9uc2l2ZVRocmVzaG9sZCkge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5zd2lwZWFibGUgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciAkdGFic0NvbnRlbnQgPSAkKCk7XG4gICAgICAgIHRoaXMuJHRhYkxpbmtzLmVhY2goZnVuY3Rpb24gKGxpbmspIHtcbiAgICAgICAgICB2YXIgJGN1cnJDb250ZW50ID0gJChNLmVzY2FwZUhhc2gobGluay5oYXNoKSk7XG4gICAgICAgICAgJGN1cnJDb250ZW50LmFkZENsYXNzKCdjYXJvdXNlbC1pdGVtJyk7XG4gICAgICAgICAgJHRhYnNDb250ZW50ID0gJHRhYnNDb250ZW50LmFkZCgkY3VyckNvbnRlbnQpO1xuICAgICAgICB9KTtcblxuICAgICAgICB2YXIgJHRhYnNXcmFwcGVyID0gJCgnPGRpdiBjbGFzcz1cInRhYnMtY29udGVudCBjYXJvdXNlbCBjYXJvdXNlbC1zbGlkZXJcIj48L2Rpdj4nKTtcbiAgICAgICAgJHRhYnNDb250ZW50LmZpcnN0KCkuYmVmb3JlKCR0YWJzV3JhcHBlcik7XG4gICAgICAgICR0YWJzV3JhcHBlci5hcHBlbmQoJHRhYnNDb250ZW50KTtcbiAgICAgICAgJHRhYnNDb250ZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnJztcblxuICAgICAgICAvLyBLZWVwIGFjdGl2ZSB0YWIgaW5kZXggdG8gc2V0IGluaXRpYWwgY2Fyb3VzZWwgc2xpZGVcbiAgICAgICAgdmFyIGFjdGl2ZVRhYkluZGV4ID0gdGhpcy4kYWN0aXZlVGFiTGluay5jbG9zZXN0KCcudGFiJykuaW5kZXgoKTtcblxuICAgICAgICB0aGlzLl90YWJzQ2Fyb3VzZWwgPSBNLkNhcm91c2VsLmluaXQoJHRhYnNXcmFwcGVyWzBdLCB7XG4gICAgICAgICAgZnVsbFdpZHRoOiB0cnVlLFxuICAgICAgICAgIG5vV3JhcDogdHJ1ZSxcbiAgICAgICAgICBvbkN5Y2xlVG86IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICB2YXIgcHJldkluZGV4ID0gX3RoaXMyNS5pbmRleDtcbiAgICAgICAgICAgIF90aGlzMjUuaW5kZXggPSAkKGl0ZW0pLmluZGV4KCk7XG4gICAgICAgICAgICBfdGhpczI1LiRhY3RpdmVUYWJMaW5rLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIF90aGlzMjUuJGFjdGl2ZVRhYkxpbmsgPSBfdGhpczI1LiR0YWJMaW5rcy5lcShfdGhpczI1LmluZGV4KTtcbiAgICAgICAgICAgIF90aGlzMjUuJGFjdGl2ZVRhYkxpbmsuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgX3RoaXMyNS5fYW5pbWF0ZUluZGljYXRvcihwcmV2SW5kZXgpO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczI1Lm9wdGlvbnMub25TaG93ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIF90aGlzMjUub3B0aW9ucy5vblNob3cuY2FsbChfdGhpczI1LCBfdGhpczI1LiRjb250ZW50WzBdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIC8vIFNldCBpbml0aWFsIGNhcm91c2VsIHNsaWRlIHRvIGFjdGl2ZSB0YWJcbiAgICAgICAgdGhpcy5fdGFic0Nhcm91c2VsLnNldChhY3RpdmVUYWJJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gbm9ybWFsIHRhYnMuXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdGVhcmRvd25Td2lwZWFibGVUYWJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3RlYXJkb3duU3dpcGVhYmxlVGFicygpIHtcbiAgICAgICAgdmFyICR0YWJzV3JhcHBlciA9IHRoaXMuX3RhYnNDYXJvdXNlbC4kZWw7XG4gICAgICAgIHRoaXMuX3RhYnNDYXJvdXNlbC5kZXN0cm95KCk7XG5cbiAgICAgICAgLy8gVW53cmFwXG4gICAgICAgICR0YWJzV3JhcHBlci5hZnRlcigkdGFic1dyYXBwZXIuY2hpbGRyZW4oKSk7XG4gICAgICAgICR0YWJzV3JhcHBlci5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBub3JtYWwgdGFicy5cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cE5vcm1hbFRhYnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBOb3JtYWxUYWJzKCkge1xuICAgICAgICAvLyBIaWRlIFRhYnMgQ29udGVudFxuICAgICAgICB0aGlzLiR0YWJMaW5rcy5ub3QodGhpcy4kYWN0aXZlVGFiTGluaykuZWFjaChmdW5jdGlvbiAobGluaykge1xuICAgICAgICAgIGlmICghIWxpbmsuaGFzaCkge1xuICAgICAgICAgICAgdmFyICRjdXJyQ29udGVudCA9ICQoTS5lc2NhcGVIYXNoKGxpbmsuaGFzaCkpO1xuICAgICAgICAgICAgaWYgKCRjdXJyQ29udGVudC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgJGN1cnJDb250ZW50WzBdLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBub3JtYWwgdGFicy5cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl90ZWFyZG93bk5vcm1hbFRhYnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdGVhcmRvd25Ob3JtYWxUYWJzKCkge1xuICAgICAgICAvLyBzaG93IFRhYnMgQ29udGVudFxuICAgICAgICB0aGlzLiR0YWJMaW5rcy5lYWNoKGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgaWYgKCEhbGluay5oYXNoKSB7XG4gICAgICAgICAgICB2YXIgJGN1cnJDb250ZW50ID0gJChNLmVzY2FwZUhhc2gobGluay5oYXNoKSk7XG4gICAgICAgICAgICBpZiAoJGN1cnJDb250ZW50Lmxlbmd0aCkge1xuICAgICAgICAgICAgICAkY3VyckNvbnRlbnRbMF0uc3R5bGUuZGlzcGxheSA9ICcnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogc2V0IHRhYnMgYW5kIHRhYiB3aWR0aFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldFRhYnNBbmRUYWJXaWR0aFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRUYWJzQW5kVGFiV2lkdGgoKSB7XG4gICAgICAgIHRoaXMudGFic1dpZHRoID0gdGhpcy4kZWwud2lkdGgoKTtcbiAgICAgICAgdGhpcy50YWJXaWR0aCA9IE1hdGgubWF4KHRoaXMudGFic1dpZHRoLCB0aGlzLmVsLnNjcm9sbFdpZHRoKSAvIHRoaXMuJHRhYkxpbmtzLmxlbmd0aDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBGaW5kcyByaWdodCBhdHRyaWJ1dGUgZm9yIGluZGljYXRvciBiYXNlZCBvbiBhY3RpdmUgdGFiLlxuICAgICAgICogQHBhcmFtIHtjYXNofSBlbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2NhbGNSaWdodFBvc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jYWxjUmlnaHRQb3MoZWwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguY2VpbCh0aGlzLnRhYnNXaWR0aCAtIGVsLnBvc2l0aW9uKCkubGVmdCAtIGVsWzBdLmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpLndpZHRoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBGaW5kcyBsZWZ0IGF0dHJpYnV0ZSBmb3IgaW5kaWNhdG9yIGJhc2VkIG9uIGFjdGl2ZSB0YWIuXG4gICAgICAgKiBAcGFyYW0ge2Nhc2h9IGVsXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY2FsY0xlZnRQb3NcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2FsY0xlZnRQb3MoZWwpIHtcbiAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoZWwucG9zaXRpb24oKS5sZWZ0KTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXBkYXRlVGFiSW5kaWNhdG9yXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlVGFiSW5kaWNhdG9yKCkge1xuICAgICAgICB0aGlzLl9zZXRUYWJzQW5kVGFiV2lkdGgoKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZUluZGljYXRvcih0aGlzLmluZGV4KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBBbmltYXRlcyBJbmRpY2F0b3IgdG8gYWN0aXZlIHRhYi5cbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBwcmV2SW5kZXhcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5kaWNhdG9yXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVJbmRpY2F0b3IocHJldkluZGV4KSB7XG4gICAgICAgIHZhciBsZWZ0RGVsYXkgPSAwLFxuICAgICAgICAgICAgcmlnaHREZWxheSA9IDA7XG5cbiAgICAgICAgaWYgKHRoaXMuaW5kZXggLSBwcmV2SW5kZXggPj0gMCkge1xuICAgICAgICAgIGxlZnREZWxheSA9IDkwO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHJpZ2h0RGVsYXkgPSA5MDtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFuaW1hdGVcbiAgICAgICAgdmFyIGFuaW1PcHRpb25zID0ge1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuX2luZGljYXRvcixcbiAgICAgICAgICBsZWZ0OiB7XG4gICAgICAgICAgICB2YWx1ZTogdGhpcy5fY2FsY0xlZnRQb3ModGhpcy4kYWN0aXZlVGFiTGluayksXG4gICAgICAgICAgICBkZWxheTogbGVmdERlbGF5XG4gICAgICAgICAgfSxcbiAgICAgICAgICByaWdodDoge1xuICAgICAgICAgICAgdmFsdWU6IHRoaXMuX2NhbGNSaWdodFBvcyh0aGlzLiRhY3RpdmVUYWJMaW5rKSxcbiAgICAgICAgICAgIGRlbGF5OiByaWdodERlbGF5XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9O1xuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLl9pbmRpY2F0b3IpO1xuICAgICAgICBhbmltKGFuaW1PcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZWxlY3QgdGFiLlxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHRhYklkXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZWxlY3RcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3QodGFiSWQpIHtcbiAgICAgICAgdmFyIHRhYiA9IHRoaXMuJHRhYkxpbmtzLmZpbHRlcignW2hyZWY9XCIjJyArIHRhYklkICsgJ1wiXScpO1xuICAgICAgICBpZiAodGFiLmxlbmd0aCkge1xuICAgICAgICAgIHRhYi50cmlnZ2VyKCdjbGljaycpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KFRhYnMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUYWJzKSwgXCJpbml0XCIsIHRoaXMpLmNhbGwodGhpcywgdGhpcywgZWxzLCBvcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgSW5zdGFuY2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdldEluc3RhbmNlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fVGFicztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUYWJzO1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5UYWJzID0gVGFicztcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFRhYnMsICd0YWJzJywgJ01fVGFicycpO1xuICB9XG59KShjYXNoLCBNLmFuaW1lKTtcbjsoZnVuY3Rpb24gKCQsIGFuaW0pIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgZXhpdERlbGF5OiAyMDAsXG4gICAgZW50ZXJEZWxheTogMCxcbiAgICBodG1sOiBudWxsLFxuICAgIG1hcmdpbjogNSxcbiAgICBpbkR1cmF0aW9uOiAyNTAsXG4gICAgb3V0RHVyYXRpb246IDIwMCxcbiAgICBwb3NpdGlvbjogJ2JvdHRvbScsXG4gICAgdHJhbnNpdGlvbk1vdmVtZW50OiAxMFxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIFRvb2x0aXAgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDcpIHtcbiAgICBfaW5oZXJpdHMoVG9vbHRpcCwgX0NvbXBvbmVudDcpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IFRvb2x0aXAgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUb29sdGlwKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVG9vbHRpcCk7XG5cbiAgICAgIHZhciBfdGhpczI2ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFRvb2x0aXAuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUb29sdGlwKSkuY2FsbCh0aGlzLCBUb29sdGlwLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczI2LmVsLk1fVG9vbHRpcCA9IF90aGlzMjY7XG4gICAgICBfdGhpczI2Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVG9vbHRpcC5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzMjYuaXNPcGVuID0gZmFsc2U7XG4gICAgICBfdGhpczI2LmlzSG92ZXJlZCA9IGZhbHNlO1xuICAgICAgX3RoaXMyNi5pc0ZvY3VzZWQgPSBmYWxzZTtcbiAgICAgIF90aGlzMjYuX2FwcGVuZFRvb2x0aXBFbCgpO1xuICAgICAgX3RoaXMyNi5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICByZXR1cm4gX3RoaXMyNjtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVG9vbHRpcCwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgICQodGhpcy50b29sdGlwRWwpLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuZWwuTV9Ub29sdGlwID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYXBwZW5kVG9vbHRpcEVsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FwcGVuZFRvb2x0aXBFbCgpIHtcbiAgICAgICAgdmFyIHRvb2x0aXBFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0b29sdGlwRWwuY2xhc3NMaXN0LmFkZCgnbWF0ZXJpYWwtdG9vbHRpcCcpO1xuICAgICAgICB0aGlzLnRvb2x0aXBFbCA9IHRvb2x0aXBFbDtcblxuICAgICAgICB2YXIgdG9vbHRpcENvbnRlbnRFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0b29sdGlwQ29udGVudEVsLmNsYXNzTGlzdC5hZGQoJ3Rvb2x0aXAtY29udGVudCcpO1xuICAgICAgICB0b29sdGlwQ29udGVudEVsLmlubmVySFRNTCA9IHRoaXMub3B0aW9ucy5odG1sO1xuICAgICAgICB0b29sdGlwRWwuYXBwZW5kQ2hpbGQodG9vbHRpcENvbnRlbnRFbCk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQodG9vbHRpcEVsKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3VwZGF0ZVRvb2x0aXBDb250ZW50XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZVRvb2x0aXBDb250ZW50KCkge1xuICAgICAgICB0aGlzLnRvb2x0aXBFbC5xdWVyeVNlbGVjdG9yKCcudG9vbHRpcC1jb250ZW50JykuaW5uZXJIVE1MID0gdGhpcy5vcHRpb25zLmh0bWw7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQgPSB0aGlzLl9oYW5kbGVNb3VzZUVudGVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZU1vdXNlTGVhdmVCb3VuZCA9IHRoaXMuX2hhbmRsZU1vdXNlTGVhdmUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCA9IHRoaXMuX2hhbmRsZUZvY3VzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUJsdXJCb3VuZCA9IHRoaXMuX2hhbmRsZUJsdXIuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlTW91c2VFbnRlckJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlTW91c2VMZWF2ZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUZvY3VzQm91bmQsIHRydWUpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVCbHVyQm91bmQsIHRydWUpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCB0aGlzLl9oYW5kbGVNb3VzZUVudGVyQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9oYW5kbGVNb3VzZUxlYXZlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgdGhpcy5faGFuZGxlRm9jdXNCb3VuZCwgdHJ1ZSk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZUJsdXJCb3VuZCwgdHJ1ZSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKGlzTWFudWFsKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICBpc01hbnVhbCA9IGlzTWFudWFsID09PSB1bmRlZmluZWQgPyB0cnVlIDogdW5kZWZpbmVkOyAvLyBEZWZhdWx0IHZhbHVlIHRydWVcbiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAvLyBVcGRhdGUgdG9vbHRpcCBjb250ZW50IHdpdGggSFRNTCBhdHRyaWJ1dGUgb3B0aW9uc1xuICAgICAgICB0aGlzLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgdGhpcy5vcHRpb25zLCB0aGlzLl9nZXRBdHRyaWJ1dGVPcHRpb25zKCkpO1xuICAgICAgICB0aGlzLl91cGRhdGVUb29sdGlwQ29udGVudCgpO1xuICAgICAgICB0aGlzLl9zZXRFbnRlckRlbGF5VGltZW91dChpc01hbnVhbCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzSG92ZXJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9zZXRFeGl0RGVsYXlUaW1lb3V0KCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlIHRpbWVvdXQgd2hpY2ggZGVsYXlzIHdoZW4gdGhlIHRvb2x0aXAgY2xvc2VzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0RXhpdERlbGF5VGltZW91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRFeGl0RGVsYXlUaW1lb3V0KCkge1xuICAgICAgICB2YXIgX3RoaXMyNyA9IHRoaXM7XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2V4aXREZWxheVRpbWVvdXQpO1xuXG4gICAgICAgIHRoaXMuX2V4aXREZWxheVRpbWVvdXQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBpZiAoX3RoaXMyNy5pc0hvdmVyZWQgfHwgX3RoaXMyNy5pc0ZvY3VzZWQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBfdGhpczI3Ll9hbmltYXRlT3V0KCk7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5leGl0RGVsYXkpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZSB0aW1lb3V0IHdoaWNoIGRlbGF5cyB3aGVuIHRoZSB0b2FzdCBjbG9zZXNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRFbnRlckRlbGF5VGltZW91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRFbnRlckRlbGF5VGltZW91dChpc01hbnVhbCkge1xuICAgICAgICB2YXIgX3RoaXMyOCA9IHRoaXM7XG5cbiAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX2VudGVyRGVsYXlUaW1lb3V0KTtcblxuICAgICAgICB0aGlzLl9lbnRlckRlbGF5VGltZW91dCA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmICghX3RoaXMyOC5pc0hvdmVyZWQgJiYgIV90aGlzMjguaXNGb2N1c2VkICYmICFpc01hbnVhbCkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIF90aGlzMjguX2FuaW1hdGVJbigpO1xuICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZW50ZXJEZWxheSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9wb3NpdGlvblRvb2x0aXBcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcG9zaXRpb25Ub29sdGlwKCkge1xuICAgICAgICB2YXIgb3JpZ2luID0gdGhpcy5lbCxcbiAgICAgICAgICAgIHRvb2x0aXAgPSB0aGlzLnRvb2x0aXBFbCxcbiAgICAgICAgICAgIG9yaWdpbkhlaWdodCA9IG9yaWdpbi5vZmZzZXRIZWlnaHQsXG4gICAgICAgICAgICBvcmlnaW5XaWR0aCA9IG9yaWdpbi5vZmZzZXRXaWR0aCxcbiAgICAgICAgICAgIHRvb2x0aXBIZWlnaHQgPSB0b29sdGlwLm9mZnNldEhlaWdodCxcbiAgICAgICAgICAgIHRvb2x0aXBXaWR0aCA9IHRvb2x0aXAub2Zmc2V0V2lkdGgsXG4gICAgICAgICAgICBuZXdDb29yZGluYXRlcyA9IHZvaWQgMCxcbiAgICAgICAgICAgIG1hcmdpbiA9IHRoaXMub3B0aW9ucy5tYXJnaW4sXG4gICAgICAgICAgICB0YXJnZXRUb3AgPSB2b2lkIDAsXG4gICAgICAgICAgICB0YXJnZXRMZWZ0ID0gdm9pZCAwO1xuXG4gICAgICAgIHRoaXMueE1vdmVtZW50ID0gMCwgdGhpcy55TW92ZW1lbnQgPSAwO1xuXG4gICAgICAgIHRhcmdldFRvcCA9IG9yaWdpbi5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgKyBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCk7XG4gICAgICAgIHRhcmdldExlZnQgPSBvcmlnaW4uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkubGVmdCArIE0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0KCk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wb3NpdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgICAgICB0YXJnZXRUb3AgKz0gLXRvb2x0aXBIZWlnaHQgLSBtYXJnaW47XG4gICAgICAgICAgdGFyZ2V0TGVmdCArPSBvcmlnaW5XaWR0aCAvIDIgLSB0b29sdGlwV2lkdGggLyAyO1xuICAgICAgICAgIHRoaXMueU1vdmVtZW50ID0gLXRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7XG4gICAgICAgIH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLnBvc2l0aW9uID09PSAncmlnaHQnKSB7XG4gICAgICAgICAgdGFyZ2V0VG9wICs9IG9yaWdpbkhlaWdodCAvIDIgLSB0b29sdGlwSGVpZ2h0IC8gMjtcbiAgICAgICAgICB0YXJnZXRMZWZ0ICs9IG9yaWdpbldpZHRoICsgbWFyZ2luO1xuICAgICAgICAgIHRoaXMueE1vdmVtZW50ID0gdGhpcy5vcHRpb25zLnRyYW5zaXRpb25Nb3ZlbWVudDtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMucG9zaXRpb24gPT09ICdsZWZ0Jykge1xuICAgICAgICAgIHRhcmdldFRvcCArPSBvcmlnaW5IZWlnaHQgLyAyIC0gdG9vbHRpcEhlaWdodCAvIDI7XG4gICAgICAgICAgdGFyZ2V0TGVmdCArPSAtdG9vbHRpcFdpZHRoIC0gbWFyZ2luO1xuICAgICAgICAgIHRoaXMueE1vdmVtZW50ID0gLXRoaXMub3B0aW9ucy50cmFuc2l0aW9uTW92ZW1lbnQ7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0VG9wICs9IG9yaWdpbkhlaWdodCArIG1hcmdpbjtcbiAgICAgICAgICB0YXJnZXRMZWZ0ICs9IG9yaWdpbldpZHRoIC8gMiAtIHRvb2x0aXBXaWR0aCAvIDI7XG4gICAgICAgICAgdGhpcy55TW92ZW1lbnQgPSB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbk1vdmVtZW50O1xuICAgICAgICB9XG5cbiAgICAgICAgbmV3Q29vcmRpbmF0ZXMgPSB0aGlzLl9yZXBvc2l0aW9uV2l0aGluU2NyZWVuKHRhcmdldExlZnQsIHRhcmdldFRvcCwgdG9vbHRpcFdpZHRoLCB0b29sdGlwSGVpZ2h0KTtcbiAgICAgICAgJCh0b29sdGlwKS5jc3Moe1xuICAgICAgICAgIHRvcDogbmV3Q29vcmRpbmF0ZXMueSArICdweCcsXG4gICAgICAgICAgbGVmdDogbmV3Q29vcmRpbmF0ZXMueCArICdweCdcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZXBvc2l0aW9uV2l0aGluU2NyZWVuXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlcG9zaXRpb25XaXRoaW5TY3JlZW4oeCwgeSwgd2lkdGgsIGhlaWdodCkge1xuICAgICAgICB2YXIgc2Nyb2xsTGVmdCA9IE0uZ2V0RG9jdW1lbnRTY3JvbGxMZWZ0KCk7XG4gICAgICAgIHZhciBzY3JvbGxUb3AgPSBNLmdldERvY3VtZW50U2Nyb2xsVG9wKCk7XG4gICAgICAgIHZhciBuZXdYID0geCAtIHNjcm9sbExlZnQ7XG4gICAgICAgIHZhciBuZXdZID0geSAtIHNjcm9sbFRvcDtcblxuICAgICAgICB2YXIgYm91bmRpbmcgPSB7XG4gICAgICAgICAgbGVmdDogbmV3WCxcbiAgICAgICAgICB0b3A6IG5ld1ksXG4gICAgICAgICAgd2lkdGg6IHdpZHRoLFxuICAgICAgICAgIGhlaWdodDogaGVpZ2h0XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIG9mZnNldCA9IHRoaXMub3B0aW9ucy5tYXJnaW4gKyB0aGlzLm9wdGlvbnMudHJhbnNpdGlvbk1vdmVtZW50O1xuICAgICAgICB2YXIgZWRnZXMgPSBNLmNoZWNrV2l0aGluQ29udGFpbmVyKGRvY3VtZW50LmJvZHksIGJvdW5kaW5nLCBvZmZzZXQpO1xuXG4gICAgICAgIGlmIChlZGdlcy5sZWZ0KSB7XG4gICAgICAgICAgbmV3WCA9IG9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChlZGdlcy5yaWdodCkge1xuICAgICAgICAgIG5ld1ggLT0gbmV3WCArIHdpZHRoIC0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZWRnZXMudG9wKSB7XG4gICAgICAgICAgbmV3WSA9IG9mZnNldDtcbiAgICAgICAgfSBlbHNlIGlmIChlZGdlcy5ib3R0b20pIHtcbiAgICAgICAgICBuZXdZIC09IG5ld1kgKyBoZWlnaHQgLSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHg6IG5ld1ggKyBzY3JvbGxMZWZ0LFxuICAgICAgICAgIHk6IG5ld1kgKyBzY3JvbGxUb3BcbiAgICAgICAgfTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVJblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW4oKSB7XG4gICAgICAgIHRoaXMuX3Bvc2l0aW9uVG9vbHRpcCgpO1xuICAgICAgICB0aGlzLnRvb2x0aXBFbC5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnO1xuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLnRvb2x0aXBFbCk7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMudG9vbHRpcEVsLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgdHJhbnNsYXRlWDogdGhpcy54TW92ZW1lbnQsXG4gICAgICAgICAgdHJhbnNsYXRlWTogdGhpcy55TW92ZW1lbnQsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYydcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlT3V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVPdXQoKSB7XG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMudG9vbHRpcEVsKTtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy50b29sdGlwRWwsXG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgIHRyYW5zbGF0ZVk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0Q3ViaWMnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlTW91c2VFbnRlclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVNb3VzZUVudGVyKCkge1xuICAgICAgICB0aGlzLmlzSG92ZXJlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuaXNGb2N1c2VkID0gZmFsc2U7IC8vIEFsbG93cyBjbG9zZSBvZiB0b29sdGlwIHdoZW4gb3BlbmVkIGJ5IGZvY3VzLlxuICAgICAgICB0aGlzLm9wZW4oZmFsc2UpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlTW91c2VMZWF2ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVNb3VzZUxlYXZlKCkge1xuICAgICAgICB0aGlzLmlzSG92ZXJlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlOyAvLyBBbGxvd3MgY2xvc2Ugb2YgdG9vbHRpcCB3aGVuIG9wZW5lZCBieSBmb2N1cy5cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRm9jdXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRm9jdXMoKSB7XG4gICAgICAgIGlmIChNLnRhYlByZXNzZWQpIHtcbiAgICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy5vcGVuKGZhbHNlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQmx1clwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVCbHVyKCkge1xuICAgICAgICB0aGlzLmlzRm9jdXNlZCA9IGZhbHNlO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9nZXRBdHRyaWJ1dGVPcHRpb25zXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldEF0dHJpYnV0ZU9wdGlvbnMoKSB7XG4gICAgICAgIHZhciBhdHRyaWJ1dGVPcHRpb25zID0ge307XG4gICAgICAgIHZhciB0b29sdGlwVGV4dE9wdGlvbiA9IHRoaXMuZWwuZ2V0QXR0cmlidXRlKCdkYXRhLXRvb2x0aXAnKTtcbiAgICAgICAgdmFyIHBvc2l0aW9uT3B0aW9uID0gdGhpcy5lbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtcG9zaXRpb24nKTtcblxuICAgICAgICBpZiAodG9vbHRpcFRleHRPcHRpb24pIHtcbiAgICAgICAgICBhdHRyaWJ1dGVPcHRpb25zLmh0bWwgPSB0b29sdGlwVGV4dE9wdGlvbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChwb3NpdGlvbk9wdGlvbikge1xuICAgICAgICAgIGF0dHJpYnV0ZU9wdGlvbnMucG9zaXRpb24gPSBwb3NpdGlvbk9wdGlvbjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYXR0cmlidXRlT3B0aW9ucztcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoVG9vbHRpcC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRvb2x0aXApLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Ub29sdGlwO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRvb2x0aXA7XG4gIH0oQ29tcG9uZW50KTtcblxuICBNLlRvb2x0aXAgPSBUb29sdGlwO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoVG9vbHRpcCwgJ3Rvb2x0aXAnLCAnTV9Ub29sdGlwJyk7XG4gIH1cbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyAvKiFcbiAgKiBXYXZlcyB2MC42LjRcbiAgKiBodHRwOi8vZmlhbi5teS5pZC9XYXZlc1xuICAqXG4gICogQ29weXJpZ2h0IDIwMTQgQWxmaWFuYSBFLiBTaWJ1ZWEgYW5kIG90aGVyIGNvbnRyaWJ1dG9yc1xuICAqIFJlbGVhc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZVxuICAqIGh0dHBzOi8vZ2l0aHViLmNvbS9maWFucy9XYXZlcy9ibG9iL21hc3Rlci9MSUNFTlNFXG4gICovXG5cbjsoZnVuY3Rpb24gKHdpbmRvdykge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIFdhdmVzID0gV2F2ZXMgfHwge307XG4gIHZhciAkJCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwuYmluZChkb2N1bWVudCk7XG5cbiAgLy8gRmluZCBleGFjdCBwb3NpdGlvbiBvZiBlbGVtZW50XG4gIGZ1bmN0aW9uIGlzV2luZG93KG9iaikge1xuICAgIHJldHVybiBvYmogIT09IG51bGwgJiYgb2JqID09PSBvYmoud2luZG93O1xuICB9XG5cbiAgZnVuY3Rpb24gZ2V0V2luZG93KGVsZW0pIHtcbiAgICByZXR1cm4gaXNXaW5kb3coZWxlbSkgPyBlbGVtIDogZWxlbS5ub2RlVHlwZSA9PT0gOSAmJiBlbGVtLmRlZmF1bHRWaWV3O1xuICB9XG5cbiAgZnVuY3Rpb24gb2Zmc2V0KGVsZW0pIHtcbiAgICB2YXIgZG9jRWxlbSxcbiAgICAgICAgd2luLFxuICAgICAgICBib3ggPSB7IHRvcDogMCwgbGVmdDogMCB9LFxuICAgICAgICBkb2MgPSBlbGVtICYmIGVsZW0ub3duZXJEb2N1bWVudDtcblxuICAgIGRvY0VsZW0gPSBkb2MuZG9jdW1lbnRFbGVtZW50O1xuXG4gICAgaWYgKHR5cGVvZiBlbGVtLmdldEJvdW5kaW5nQ2xpZW50UmVjdCAhPT0gdHlwZW9mIHVuZGVmaW5lZCkge1xuICAgICAgYm94ID0gZWxlbS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICB9XG4gICAgd2luID0gZ2V0V2luZG93KGRvYyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHRvcDogYm94LnRvcCArIHdpbi5wYWdlWU9mZnNldCAtIGRvY0VsZW0uY2xpZW50VG9wLFxuICAgICAgbGVmdDogYm94LmxlZnQgKyB3aW4ucGFnZVhPZmZzZXQgLSBkb2NFbGVtLmNsaWVudExlZnRcbiAgICB9O1xuICB9XG5cbiAgZnVuY3Rpb24gY29udmVydFN0eWxlKG9iaikge1xuICAgIHZhciBzdHlsZSA9ICcnO1xuXG4gICAgZm9yICh2YXIgYSBpbiBvYmopIHtcbiAgICAgIGlmIChvYmouaGFzT3duUHJvcGVydHkoYSkpIHtcbiAgICAgICAgc3R5bGUgKz0gYSArICc6JyArIG9ialthXSArICc7JztcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gc3R5bGU7XG4gIH1cblxuICB2YXIgRWZmZWN0ID0ge1xuXG4gICAgLy8gRWZmZWN0IGRlbGF5XG4gICAgZHVyYXRpb246IDc1MCxcblxuICAgIHNob3c6IGZ1bmN0aW9uIChlLCBlbGVtZW50KSB7XG5cbiAgICAgIC8vIERpc2FibGUgcmlnaHQgY2xpY2tcbiAgICAgIGlmIChlLmJ1dHRvbiA9PT0gMikge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciBlbCA9IGVsZW1lbnQgfHwgdGhpcztcblxuICAgICAgLy8gQ3JlYXRlIHJpcHBsZVxuICAgICAgdmFyIHJpcHBsZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgcmlwcGxlLmNsYXNzTmFtZSA9ICd3YXZlcy1yaXBwbGUnO1xuICAgICAgZWwuYXBwZW5kQ2hpbGQocmlwcGxlKTtcblxuICAgICAgLy8gR2V0IGNsaWNrIGNvb3JkaW5hdGUgYW5kIGVsZW1lbnQgd2l0ZGhcbiAgICAgIHZhciBwb3MgPSBvZmZzZXQoZWwpO1xuICAgICAgdmFyIHJlbGF0aXZlWSA9IGUucGFnZVkgLSBwb3MudG9wO1xuICAgICAgdmFyIHJlbGF0aXZlWCA9IGUucGFnZVggLSBwb3MubGVmdDtcbiAgICAgIHZhciBzY2FsZSA9ICdzY2FsZSgnICsgZWwuY2xpZW50V2lkdGggLyAxMDAgKiAxMCArICcpJztcblxuICAgICAgLy8gU3VwcG9ydCBmb3IgdG91Y2ggZGV2aWNlc1xuICAgICAgaWYgKCd0b3VjaGVzJyBpbiBlKSB7XG4gICAgICAgIHJlbGF0aXZlWSA9IGUudG91Y2hlc1swXS5wYWdlWSAtIHBvcy50b3A7XG4gICAgICAgIHJlbGF0aXZlWCA9IGUudG91Y2hlc1swXS5wYWdlWCAtIHBvcy5sZWZ0O1xuICAgICAgfVxuXG4gICAgICAvLyBBdHRhY2ggZGF0YSB0byBlbGVtZW50XG4gICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnLCBEYXRlLm5vdygpKTtcbiAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnLCBzY2FsZSk7XG4gICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdkYXRhLXgnLCByZWxhdGl2ZVgpO1xuICAgICAgcmlwcGxlLnNldEF0dHJpYnV0ZSgnZGF0YS15JywgcmVsYXRpdmVZKTtcblxuICAgICAgLy8gU2V0IHJpcHBsZSBwb3NpdGlvblxuICAgICAgdmFyIHJpcHBsZVN0eWxlID0ge1xuICAgICAgICAndG9wJzogcmVsYXRpdmVZICsgJ3B4JyxcbiAgICAgICAgJ2xlZnQnOiByZWxhdGl2ZVggKyAncHgnXG4gICAgICB9O1xuXG4gICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZSArICcgd2F2ZXMtbm90cmFuc2l0aW9uJztcbiAgICAgIHJpcHBsZS5zZXRBdHRyaWJ1dGUoJ3N0eWxlJywgY29udmVydFN0eWxlKHJpcHBsZVN0eWxlKSk7XG4gICAgICByaXBwbGUuY2xhc3NOYW1lID0gcmlwcGxlLmNsYXNzTmFtZS5yZXBsYWNlKCd3YXZlcy1ub3RyYW5zaXRpb24nLCAnJyk7XG5cbiAgICAgIC8vIFNjYWxlIHRoZSByaXBwbGVcbiAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgcmlwcGxlU3R5bGVbJy1tcy10cmFuc2Zvcm0nXSA9IHNjYWxlO1xuICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zZm9ybSddID0gc2NhbGU7XG4gICAgICByaXBwbGVTdHlsZS50cmFuc2Zvcm0gPSBzY2FsZTtcbiAgICAgIHJpcHBsZVN0eWxlLm9wYWNpdHkgPSAnMSc7XG5cbiAgICAgIHJpcHBsZVN0eWxlWyctd2Via2l0LXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICByaXBwbGVTdHlsZVsnLW1vei10cmFuc2l0aW9uLWR1cmF0aW9uJ10gPSBFZmZlY3QuZHVyYXRpb24gKyAnbXMnO1xuICAgICAgcmlwcGxlU3R5bGVbJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nXSA9IEVmZmVjdC5kdXJhdGlvbiArICdtcyc7XG4gICAgICByaXBwbGVTdHlsZVsndHJhbnNpdGlvbi1kdXJhdGlvbiddID0gRWZmZWN0LmR1cmF0aW9uICsgJ21zJztcblxuICAgICAgcmlwcGxlU3R5bGVbJy13ZWJraXQtdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgIHJpcHBsZVN0eWxlWyctbW96LXRyYW5zaXRpb24tdGltaW5nLWZ1bmN0aW9uJ10gPSAnY3ViaWMtYmV6aWVyKDAuMjUwLCAwLjQ2MCwgMC40NTAsIDAuOTQwKSc7XG4gICAgICByaXBwbGVTdHlsZVsnLW8tdHJhbnNpdGlvbi10aW1pbmctZnVuY3Rpb24nXSA9ICdjdWJpYy1iZXppZXIoMC4yNTAsIDAuNDYwLCAwLjQ1MCwgMC45NDApJztcbiAgICAgIHJpcHBsZVN0eWxlWyd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbiddID0gJ2N1YmljLWJlemllcigwLjI1MCwgMC40NjAsIDAuNDUwLCAwLjk0MCknO1xuXG4gICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShyaXBwbGVTdHlsZSkpO1xuICAgIH0sXG5cbiAgICBoaWRlOiBmdW5jdGlvbiAoZSkge1xuICAgICAgVG91Y2hIYW5kbGVyLnRvdWNodXAoZSk7XG5cbiAgICAgIHZhciBlbCA9IHRoaXM7XG4gICAgICB2YXIgd2lkdGggPSBlbC5jbGllbnRXaWR0aCAqIDEuNDtcblxuICAgICAgLy8gR2V0IGZpcnN0IHJpcHBsZVxuICAgICAgdmFyIHJpcHBsZSA9IG51bGw7XG4gICAgICB2YXIgcmlwcGxlcyA9IGVsLmdldEVsZW1lbnRzQnlDbGFzc05hbWUoJ3dhdmVzLXJpcHBsZScpO1xuICAgICAgaWYgKHJpcHBsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICByaXBwbGUgPSByaXBwbGVzW3JpcHBsZXMubGVuZ3RoIC0gMV07XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHZhciByZWxhdGl2ZVggPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXgnKTtcbiAgICAgIHZhciByZWxhdGl2ZVkgPSByaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLXknKTtcbiAgICAgIHZhciBzY2FsZSA9IHJpcHBsZS5nZXRBdHRyaWJ1dGUoJ2RhdGEtc2NhbGUnKTtcblxuICAgICAgLy8gR2V0IGRlbGF5IGJlZXR3ZWVuIG1vdXNlZG93biBhbmQgbW91c2UgbGVhdmVcbiAgICAgIHZhciBkaWZmID0gRGF0ZS5ub3coKSAtIE51bWJlcihyaXBwbGUuZ2V0QXR0cmlidXRlKCdkYXRhLWhvbGQnKSk7XG4gICAgICB2YXIgZGVsYXkgPSAzNTAgLSBkaWZmO1xuXG4gICAgICBpZiAoZGVsYXkgPCAwKSB7XG4gICAgICAgIGRlbGF5ID0gMDtcbiAgICAgIH1cblxuICAgICAgLy8gRmFkZSBvdXQgcmlwcGxlIGFmdGVyIGRlbGF5XG4gICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgdmFyIHN0eWxlID0ge1xuICAgICAgICAgICd0b3AnOiByZWxhdGl2ZVkgKyAncHgnLFxuICAgICAgICAgICdsZWZ0JzogcmVsYXRpdmVYICsgJ3B4JyxcbiAgICAgICAgICAnb3BhY2l0eSc6ICcwJyxcblxuICAgICAgICAgIC8vIER1cmF0aW9uXG4gICAgICAgICAgJy13ZWJraXQtdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgJy1tb3otdHJhbnNpdGlvbi1kdXJhdGlvbic6IEVmZmVjdC5kdXJhdGlvbiArICdtcycsXG4gICAgICAgICAgJy1vLXRyYW5zaXRpb24tZHVyYXRpb24nOiBFZmZlY3QuZHVyYXRpb24gKyAnbXMnLFxuICAgICAgICAgICd0cmFuc2l0aW9uLWR1cmF0aW9uJzogRWZmZWN0LmR1cmF0aW9uICsgJ21zJyxcbiAgICAgICAgICAnLXdlYmtpdC10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAnLW1vei10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAnLW1zLXRyYW5zZm9ybSc6IHNjYWxlLFxuICAgICAgICAgICctby10cmFuc2Zvcm0nOiBzY2FsZSxcbiAgICAgICAgICAndHJhbnNmb3JtJzogc2NhbGVcbiAgICAgICAgfTtcblxuICAgICAgICByaXBwbGUuc2V0QXR0cmlidXRlKCdzdHlsZScsIGNvbnZlcnRTdHlsZShzdHlsZSkpO1xuXG4gICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICBlbC5yZW1vdmVDaGlsZChyaXBwbGUpO1xuICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0sIEVmZmVjdC5kdXJhdGlvbik7XG4gICAgICB9LCBkZWxheSk7XG4gICAgfSxcblxuICAgIC8vIExpdHRsZSBoYWNrIHRvIG1ha2UgPGlucHV0PiBjYW4gcGVyZm9ybSB3YXZlcyBlZmZlY3RcbiAgICB3cmFwSW5wdXQ6IGZ1bmN0aW9uIChlbGVtZW50cykge1xuICAgICAgZm9yICh2YXIgYSA9IDA7IGEgPCBlbGVtZW50cy5sZW5ndGg7IGErKykge1xuICAgICAgICB2YXIgZWwgPSBlbGVtZW50c1thXTtcblxuICAgICAgICBpZiAoZWwudGFnTmFtZS50b0xvd2VyQ2FzZSgpID09PSAnaW5wdXQnKSB7XG4gICAgICAgICAgdmFyIHBhcmVudCA9IGVsLnBhcmVudE5vZGU7XG5cbiAgICAgICAgICAvLyBJZiBpbnB1dCBhbHJlYWR5IGhhdmUgcGFyZW50IGp1c3QgcGFzcyB0aHJvdWdoXG4gICAgICAgICAgaWYgKHBhcmVudC50YWdOYW1lLnRvTG93ZXJDYXNlKCkgPT09ICdpJyAmJiBwYXJlbnQuY2xhc3NOYW1lLmluZGV4T2YoJ3dhdmVzLWVmZmVjdCcpICE9PSAtMSkge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gUHV0IGVsZW1lbnQgY2xhc3MgYW5kIHN0eWxlIHRvIHRoZSBzcGVjaWZpZWQgcGFyZW50XG4gICAgICAgICAgdmFyIHdyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpJyk7XG4gICAgICAgICAgd3JhcHBlci5jbGFzc05hbWUgPSBlbC5jbGFzc05hbWUgKyAnIHdhdmVzLWlucHV0LXdyYXBwZXInO1xuXG4gICAgICAgICAgdmFyIGVsZW1lbnRTdHlsZSA9IGVsLmdldEF0dHJpYnV0ZSgnc3R5bGUnKTtcblxuICAgICAgICAgIGlmICghZWxlbWVudFN0eWxlKSB7XG4gICAgICAgICAgICBlbGVtZW50U3R5bGUgPSAnJztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB3cmFwcGVyLnNldEF0dHJpYnV0ZSgnc3R5bGUnLCBlbGVtZW50U3R5bGUpO1xuXG4gICAgICAgICAgZWwuY2xhc3NOYW1lID0gJ3dhdmVzLWJ1dHRvbi1pbnB1dCc7XG4gICAgICAgICAgZWwucmVtb3ZlQXR0cmlidXRlKCdzdHlsZScpO1xuXG4gICAgICAgICAgLy8gUHV0IGVsZW1lbnQgYXMgY2hpbGRcbiAgICAgICAgICBwYXJlbnQucmVwbGFjZUNoaWxkKHdyYXBwZXIsIGVsKTtcbiAgICAgICAgICB3cmFwcGVyLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgfTtcblxuICAvKipcbiAgICogRGlzYWJsZSBtb3VzZWRvd24gZXZlbnQgZm9yIDUwMG1zIGR1cmluZyBhbmQgYWZ0ZXIgdG91Y2hcbiAgICovXG4gIHZhciBUb3VjaEhhbmRsZXIgPSB7XG4gICAgLyogdXNlcyBhbiBpbnRlZ2VyIHJhdGhlciB0aGFuIGJvb2wgc28gdGhlcmUncyBubyBpc3N1ZXMgd2l0aFxuICAgICAqIG5lZWRpbmcgdG8gY2xlYXIgdGltZW91dHMgaWYgYW5vdGhlciB0b3VjaCBldmVudCBvY2N1cnJlZFxuICAgICAqIHdpdGhpbiB0aGUgNTAwbXMuIENhbm5vdCBtb3VzZXVwIGJldHdlZW4gdG91Y2hzdGFydCBhbmRcbiAgICAgKiB0b3VjaGVuZCwgbm9yIGluIHRoZSA1MDBtcyBhZnRlciB0b3VjaGVuZC4gKi9cbiAgICB0b3VjaGVzOiAwLFxuICAgIGFsbG93RXZlbnQ6IGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgYWxsb3cgPSB0cnVlO1xuXG4gICAgICBpZiAoZS50eXBlID09PSAndG91Y2hzdGFydCcpIHtcbiAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgKz0gMTsgLy9wdXNoXG4gICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ3RvdWNoZW5kJyB8fCBlLnR5cGUgPT09ICd0b3VjaGNhbmNlbCcpIHtcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgaWYgKFRvdWNoSGFuZGxlci50b3VjaGVzID4gMCkge1xuICAgICAgICAgICAgVG91Y2hIYW5kbGVyLnRvdWNoZXMgLT0gMTsgLy9wb3AgYWZ0ZXIgNTAwbXNcbiAgICAgICAgICB9XG4gICAgICAgIH0sIDUwMCk7XG4gICAgICB9IGVsc2UgaWYgKGUudHlwZSA9PT0gJ21vdXNlZG93bicgJiYgVG91Y2hIYW5kbGVyLnRvdWNoZXMgPiAwKSB7XG4gICAgICAgIGFsbG93ID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBhbGxvdztcbiAgICB9LFxuICAgIHRvdWNodXA6IGZ1bmN0aW9uIChlKSB7XG4gICAgICBUb3VjaEhhbmRsZXIuYWxsb3dFdmVudChlKTtcbiAgICB9XG4gIH07XG5cbiAgLyoqXG4gICAqIERlbGVnYXRlZCBjbGljayBoYW5kbGVyIGZvciAud2F2ZXMtZWZmZWN0IGVsZW1lbnQuXG4gICAqIHJldHVybnMgbnVsbCB3aGVuIC53YXZlcy1lZmZlY3QgZWxlbWVudCBub3QgaW4gXCJjbGljayB0cmVlXCJcbiAgICovXG4gIGZ1bmN0aW9uIGdldFdhdmVzRWZmZWN0RWxlbWVudChlKSB7XG4gICAgaWYgKFRvdWNoSGFuZGxlci5hbGxvd0V2ZW50KGUpID09PSBmYWxzZSkge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgdmFyIGVsZW1lbnQgPSBudWxsO1xuICAgIHZhciB0YXJnZXQgPSBlLnRhcmdldCB8fCBlLnNyY0VsZW1lbnQ7XG5cbiAgICB3aGlsZSAodGFyZ2V0LnBhcmVudE5vZGUgIT09IG51bGwpIHtcbiAgICAgIGlmICghKHRhcmdldCBpbnN0YW5jZW9mIFNWR0VsZW1lbnQpICYmIHRhcmdldC5jbGFzc05hbWUuaW5kZXhPZignd2F2ZXMtZWZmZWN0JykgIT09IC0xKSB7XG4gICAgICAgIGVsZW1lbnQgPSB0YXJnZXQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgdGFyZ2V0ID0gdGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgfVxuICAgIHJldHVybiBlbGVtZW50O1xuICB9XG5cbiAgLyoqXG4gICAqIEJ1YmJsZSB0aGUgY2xpY2sgYW5kIHNob3cgZWZmZWN0IGlmIC53YXZlcy1lZmZlY3QgZWxlbSB3YXMgZm91bmRcbiAgICovXG4gIGZ1bmN0aW9uIHNob3dFZmZlY3QoZSkge1xuICAgIHZhciBlbGVtZW50ID0gZ2V0V2F2ZXNFZmZlY3RFbGVtZW50KGUpO1xuXG4gICAgaWYgKGVsZW1lbnQgIT09IG51bGwpIHtcbiAgICAgIEVmZmVjdC5zaG93KGUsIGVsZW1lbnQpO1xuXG4gICAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XG4gICAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgIH1cblxuICAgICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgRWZmZWN0LmhpZGUsIGZhbHNlKTtcbiAgICAgIGVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIEVmZmVjdC5oaWRlLCBmYWxzZSk7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCBFZmZlY3QuaGlkZSwgZmFsc2UpO1xuICAgIH1cbiAgfVxuXG4gIFdhdmVzLmRpc3BsYXlFZmZlY3QgPSBmdW5jdGlvbiAob3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gICAgaWYgKCdkdXJhdGlvbicgaW4gb3B0aW9ucykge1xuICAgICAgRWZmZWN0LmR1cmF0aW9uID0gb3B0aW9ucy5kdXJhdGlvbjtcbiAgICB9XG5cbiAgICAvL1dyYXAgaW5wdXQgaW5zaWRlIDxpPiB0YWdcbiAgICBFZmZlY3Qud3JhcElucHV0KCQkKCcud2F2ZXMtZWZmZWN0JykpO1xuXG4gICAgaWYgKCdvbnRvdWNoc3RhcnQnIGluIHdpbmRvdykge1xuICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0Jywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgc2hvd0VmZmVjdCwgZmFsc2UpO1xuICB9O1xuXG4gIC8qKlxuICAgKiBBdHRhY2ggV2F2ZXMgdG8gYW4gaW5wdXQgZWxlbWVudCAob3IgYW55IGVsZW1lbnQgd2hpY2ggZG9lc24ndFxuICAgKiBidWJibGUgbW91c2V1cC9tb3VzZWRvd24gZXZlbnRzKS5cbiAgICogICBJbnRlbmRlZCB0byBiZSB1c2VkIHdpdGggZHluYW1pY2FsbHkgbG9hZGVkIGZvcm1zL2lucHV0cywgb3JcbiAgICogd2hlcmUgdGhlIHVzZXIgZG9lc24ndCB3YW50IGEgZGVsZWdhdGVkIGNsaWNrIGhhbmRsZXIuXG4gICAqL1xuICBXYXZlcy5hdHRhY2ggPSBmdW5jdGlvbiAoZWxlbWVudCkge1xuICAgIC8vRlVUVVJFOiBhdXRvbWF0aWNhbGx5IGFkZCB3YXZlcyBjbGFzc2VzIGFuZCBhbGxvdyB1c2Vyc1xuICAgIC8vIHRvIHNwZWNpZnkgdGhlbSB3aXRoIGFuIG9wdGlvbnMgcGFyYW0/IEVnLiBsaWdodC9jbGFzc2ljL2J1dHRvblxuICAgIGlmIChlbGVtZW50LnRhZ05hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2lucHV0Jykge1xuICAgICAgRWZmZWN0LndyYXBJbnB1dChbZWxlbWVudF0pO1xuICAgICAgZWxlbWVudCA9IGVsZW1lbnQucGFyZW50Tm9kZTtcbiAgICB9XG5cbiAgICBpZiAoJ29udG91Y2hzdGFydCcgaW4gd2luZG93KSB7XG4gICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoc3RhcnQnLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gICAgfVxuXG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBzaG93RWZmZWN0LCBmYWxzZSk7XG4gIH07XG5cbiAgd2luZG93LldhdmVzID0gV2F2ZXM7XG5cbiAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignRE9NQ29udGVudExvYWRlZCcsIGZ1bmN0aW9uICgpIHtcbiAgICBXYXZlcy5kaXNwbGF5RWZmZWN0KCk7XG4gIH0sIGZhbHNlKTtcbn0pKHdpbmRvdyk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGh0bWw6ICcnLFxuICAgIGRpc3BsYXlMZW5ndGg6IDQwMDAsXG4gICAgaW5EdXJhdGlvbjogMzAwLFxuICAgIG91dER1cmF0aW9uOiAzNzUsXG4gICAgY2xhc3NlczogJycsXG4gICAgY29tcGxldGVDYWxsYmFjazogbnVsbCxcbiAgICBhY3RpdmF0aW9uUGVyY2VudDogMC44XG4gIH07XG5cbiAgdmFyIFRvYXN0ID0gZnVuY3Rpb24gKCkge1xuICAgIGZ1bmN0aW9uIFRvYXN0KG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUb2FzdCk7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIHRvYXN0XG4gICAgICAgKiBAbWVtYmVyIFRvYXN0I29wdGlvbnNcbiAgICAgICAqL1xuICAgICAgdGhpcy5vcHRpb25zID0gJC5leHRlbmQoe30sIFRvYXN0LmRlZmF1bHRzLCBvcHRpb25zKTtcbiAgICAgIHRoaXMubWVzc2FnZSA9IHRoaXMub3B0aW9ucy5odG1sO1xuXG4gICAgICAvKipcbiAgICAgICAqIERlc2NyaWJlcyBjdXJyZW50IHBhbiBzdGF0ZSB0b2FzdFxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIHRoaXMucGFubmluZyA9IGZhbHNlO1xuXG4gICAgICAvKipcbiAgICAgICAqIFRpbWUgcmVtYWluaW5nIHVudGlsIHRvYXN0IGlzIHJlbW92ZWRcbiAgICAgICAqL1xuICAgICAgdGhpcy50aW1lUmVtYWluaW5nID0gdGhpcy5vcHRpb25zLmRpc3BsYXlMZW5ndGg7XG5cbiAgICAgIGlmIChUb2FzdC5fdG9hc3RzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBUb2FzdC5fY3JlYXRlQ29udGFpbmVyKCk7XG4gICAgICB9XG5cbiAgICAgIC8vIENyZWF0ZSBuZXcgdG9hc3RcbiAgICAgIFRvYXN0Ll90b2FzdHMucHVzaCh0aGlzKTtcbiAgICAgIHZhciB0b2FzdEVsZW1lbnQgPSB0aGlzLl9jcmVhdGVUb2FzdCgpO1xuICAgICAgdG9hc3RFbGVtZW50Lk1fVG9hc3QgPSB0aGlzO1xuICAgICAgdGhpcy5lbCA9IHRvYXN0RWxlbWVudDtcbiAgICAgIHRoaXMuJGVsID0gJCh0b2FzdEVsZW1lbnQpO1xuICAgICAgdGhpcy5fYW5pbWF0ZUluKCk7XG4gICAgICB0aGlzLl9zZXRUaW1lcigpO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhUb2FzdCwgW3tcbiAgICAgIGtleTogXCJfY3JlYXRlVG9hc3RcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIENyZWF0ZSB0b2FzdCBhbmQgYXBwZW5kIGl0IHRvIHRvYXN0IGNvbnRhaW5lclxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZVRvYXN0KCkge1xuICAgICAgICB2YXIgdG9hc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgdG9hc3QuY2xhc3NMaXN0LmFkZCgndG9hc3QnKTtcblxuICAgICAgICAvLyBBZGQgY3VzdG9tIGNsYXNzZXMgb250byB0b2FzdFxuICAgICAgICBpZiAoISF0aGlzLm9wdGlvbnMuY2xhc3Nlcy5sZW5ndGgpIHtcbiAgICAgICAgICAkKHRvYXN0KS5hZGRDbGFzcyh0aGlzLm9wdGlvbnMuY2xhc3Nlcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgY29udGVudFxuICAgICAgICBpZiAodHlwZW9mIEhUTUxFbGVtZW50ID09PSAnb2JqZWN0JyA/IHRoaXMubWVzc2FnZSBpbnN0YW5jZW9mIEhUTUxFbGVtZW50IDogdGhpcy5tZXNzYWdlICYmIHR5cGVvZiB0aGlzLm1lc3NhZ2UgPT09ICdvYmplY3QnICYmIHRoaXMubWVzc2FnZSAhPT0gbnVsbCAmJiB0aGlzLm1lc3NhZ2Uubm9kZVR5cGUgPT09IDEgJiYgdHlwZW9mIHRoaXMubWVzc2FnZS5ub2RlTmFtZSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0b2FzdC5hcHBlbmRDaGlsZCh0aGlzLm1lc3NhZ2UpO1xuXG4gICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaXMgalF1ZXJ5IG9iamVjdFxuICAgICAgICB9IGVsc2UgaWYgKCEhdGhpcy5tZXNzYWdlLmpxdWVyeSkge1xuICAgICAgICAgICQodG9hc3QpLmFwcGVuZCh0aGlzLm1lc3NhZ2VbMF0pO1xuXG4gICAgICAgICAgLy8gSW5zZXJ0IGFzIGh0bWw7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdG9hc3QuaW5uZXJIVE1MID0gdGhpcy5tZXNzYWdlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQXBwZW5kIHRvYXNmdFxuICAgICAgICBUb2FzdC5fY29udGFpbmVyLmFwcGVuZENoaWxkKHRvYXN0KTtcbiAgICAgICAgcmV0dXJuIHRvYXN0O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgaW4gdG9hc3RcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluKCkge1xuICAgICAgICAvLyBBbmltYXRlIHRvYXN0IGluXG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsXG4gICAgICAgICAgdG9wOiAwLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRDdWJpYydcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3JlYXRlIHNldEludGVydmFsIHdoaWNoIGF1dG9tYXRpY2FsbHkgcmVtb3ZlcyB0b2FzdCB3aGVuIHRpbWVSZW1haW5pbmcgPj0gMFxuICAgICAgICogaGFzIGJlZW4gcmVhY2hlZFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldFRpbWVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFRpbWVyKCkge1xuICAgICAgICB2YXIgX3RoaXMyOSA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMudGltZVJlbWFpbmluZyAhPT0gSW5maW5pdHkpIHtcbiAgICAgICAgICB0aGlzLmNvdW50ZXJJbnRlcnZhbCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIC8vIElmIHRvYXN0IGlzIG5vdCBiZWluZyBkcmFnZ2VkLCBkZWNyZWFzZSBpdHMgdGltZSByZW1haW5pbmdcbiAgICAgICAgICAgIGlmICghX3RoaXMyOS5wYW5uaW5nKSB7XG4gICAgICAgICAgICAgIF90aGlzMjkudGltZVJlbWFpbmluZyAtPSAyMDtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQW5pbWF0ZSB0b2FzdCBvdXRcbiAgICAgICAgICAgIGlmIChfdGhpczI5LnRpbWVSZW1haW5pbmcgPD0gMCkge1xuICAgICAgICAgICAgICBfdGhpczI5LmRpc21pc3MoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LCAyMCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBEaXNtaXNzIHRvYXN0IHdpdGggYW5pbWF0aW9uXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkaXNtaXNzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzbWlzcygpIHtcbiAgICAgICAgdmFyIF90aGlzMzAgPSB0aGlzO1xuXG4gICAgICAgIHdpbmRvdy5jbGVhckludGVydmFsKHRoaXMuY291bnRlckludGVydmFsKTtcbiAgICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IHRoaXMuZWwub2Zmc2V0V2lkdGggKiB0aGlzLm9wdGlvbnMuYWN0aXZhdGlvblBlcmNlbnQ7XG5cbiAgICAgICAgaWYgKHRoaXMud2FzU3dpcGVkKSB7XG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS50cmFuc2l0aW9uID0gJ3RyYW5zZm9ybSAuMDVzLCBvcGFjaXR5IC4wNXMnO1xuICAgICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gXCJ0cmFuc2xhdGVYKFwiICsgYWN0aXZhdGlvbkRpc3RhbmNlICsgXCJweClcIjtcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLm9wYWNpdHkgPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy5lbCxcbiAgICAgICAgICBvcGFjaXR5OiAwLFxuICAgICAgICAgIG1hcmdpblRvcDogLTQwLFxuICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMub3V0RHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEV4cG8nLFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAvLyBDYWxsIHRoZSBvcHRpb25hbCBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczMwLm9wdGlvbnMuY29tcGxldGVDYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczMwLm9wdGlvbnMuY29tcGxldGVDYWxsYmFjaygpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gUmVtb3ZlIHRvYXN0IGZyb20gRE9NXG4gICAgICAgICAgICBfdGhpczMwLiRlbC5yZW1vdmUoKTtcbiAgICAgICAgICAgIFRvYXN0Ll90b2FzdHMuc3BsaWNlKFRvYXN0Ll90b2FzdHMuaW5kZXhPZihfdGhpczMwKSwgMSk7XG4gICAgICAgICAgICBpZiAoVG9hc3QuX3RvYXN0cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgVG9hc3QuX3JlbW92ZUNvbnRhaW5lcigpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ2V0SW5zdGFuY2UoZWwpIHtcbiAgICAgICAgdmFyIGRvbUVsZW0gPSAhIWVsLmpxdWVyeSA/IGVsWzBdIDogZWw7XG4gICAgICAgIHJldHVybiBkb21FbGVtLk1fVG9hc3Q7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQXBwZW5kIHRvYXN0IGNvbnRhaW5lciBhbmQgYWRkIGV2ZW50IGhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY3JlYXRlQ29udGFpbmVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NyZWF0ZUNvbnRhaW5lcigpIHtcbiAgICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICBjb250YWluZXIuc2V0QXR0cmlidXRlKCdpZCcsICd0b2FzdC1jb250YWluZXInKTtcblxuICAgICAgICAvLyBBZGQgZXZlbnQgaGFuZGxlclxuICAgICAgICBjb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIFRvYXN0Ll9vbkRyYWdTdGFydCk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCBUb2FzdC5fb25EcmFnTW92ZSk7XG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIFRvYXN0Ll9vbkRyYWdFbmQpO1xuXG4gICAgICAgIGNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCBUb2FzdC5fb25EcmFnU3RhcnQpO1xuICAgICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBUb2FzdC5fb25EcmFnTW92ZSk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBUb2FzdC5fb25EcmFnRW5kKTtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGNvbnRhaW5lcik7XG4gICAgICAgIFRvYXN0Ll9jb250YWluZXIgPSBjb250YWluZXI7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIHRvYXN0IGNvbnRhaW5lciBhbmQgZXZlbnQgaGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVDb250YWluZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlQ29udGFpbmVyKCkge1xuICAgICAgICAvLyBBZGQgZXZlbnQgaGFuZGxlclxuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBUb2FzdC5fb25EcmFnTW92ZSk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBUb2FzdC5fb25EcmFnRW5kKTtcblxuICAgICAgICAkKFRvYXN0Ll9jb250YWluZXIpLnJlbW92ZSgpO1xuICAgICAgICBUb2FzdC5fY29udGFpbmVyID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBCZWdpbiBkcmFnIGhhbmRsZXJcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9vbkRyYWdTdGFydFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9vbkRyYWdTdGFydChlKSB7XG4gICAgICAgIGlmIChlLnRhcmdldCAmJiAkKGUudGFyZ2V0KS5jbG9zZXN0KCcudG9hc3QnKS5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgJHRvYXN0ID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLnRvYXN0Jyk7XG4gICAgICAgICAgdmFyIHRvYXN0ID0gJHRvYXN0WzBdLk1fVG9hc3Q7XG4gICAgICAgICAgdG9hc3QucGFubmluZyA9IHRydWU7XG4gICAgICAgICAgVG9hc3QuX2RyYWdnZWRUb2FzdCA9IHRvYXN0O1xuICAgICAgICAgIHRvYXN0LmVsLmNsYXNzTGlzdC5hZGQoJ3Bhbm5pbmcnKTtcbiAgICAgICAgICB0b2FzdC5lbC5zdHlsZS50cmFuc2l0aW9uID0gJyc7XG4gICAgICAgICAgdG9hc3Quc3RhcnRpbmdYUG9zID0gVG9hc3QuX3hQb3MoZSk7XG4gICAgICAgICAgdG9hc3QudGltZSA9IERhdGUubm93KCk7XG4gICAgICAgICAgdG9hc3QueFBvcyA9IFRvYXN0Ll94UG9zKGUpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogRHJhZyBtb3ZlIGhhbmRsZXJcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9vbkRyYWdNb3ZlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRHJhZ01vdmUoZSkge1xuICAgICAgICBpZiAoISFUb2FzdC5fZHJhZ2dlZFRvYXN0KSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHZhciB0b2FzdCA9IFRvYXN0Ll9kcmFnZ2VkVG9hc3Q7XG4gICAgICAgICAgdG9hc3QuZGVsdGFYID0gTWF0aC5hYnModG9hc3QueFBvcyAtIFRvYXN0Ll94UG9zKGUpKTtcbiAgICAgICAgICB0b2FzdC54UG9zID0gVG9hc3QuX3hQb3MoZSk7XG4gICAgICAgICAgdG9hc3QudmVsb2NpdHlYID0gdG9hc3QuZGVsdGFYIC8gKERhdGUubm93KCkgLSB0b2FzdC50aW1lKTtcbiAgICAgICAgICB0b2FzdC50aW1lID0gRGF0ZS5ub3coKTtcblxuICAgICAgICAgIHZhciB0b3RhbERlbHRhWCA9IHRvYXN0LnhQb3MgLSB0b2FzdC5zdGFydGluZ1hQb3M7XG4gICAgICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IHRvYXN0LmVsLm9mZnNldFdpZHRoICogdG9hc3Qub3B0aW9ucy5hY3RpdmF0aW9uUGVyY2VudDtcbiAgICAgICAgICB0b2FzdC5lbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoXCIgKyB0b3RhbERlbHRhWCArIFwicHgpXCI7XG4gICAgICAgICAgdG9hc3QuZWwuc3R5bGUub3BhY2l0eSA9IDEgLSBNYXRoLmFicyh0b3RhbERlbHRhWCAvIGFjdGl2YXRpb25EaXN0YW5jZSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBFbmQgZHJhZyBoYW5kbGVyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfb25EcmFnRW5kXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX29uRHJhZ0VuZCgpIHtcbiAgICAgICAgaWYgKCEhVG9hc3QuX2RyYWdnZWRUb2FzdCkge1xuICAgICAgICAgIHZhciB0b2FzdCA9IFRvYXN0Ll9kcmFnZ2VkVG9hc3Q7XG4gICAgICAgICAgdG9hc3QucGFubmluZyA9IGZhbHNlO1xuICAgICAgICAgIHRvYXN0LmVsLmNsYXNzTGlzdC5yZW1vdmUoJ3Bhbm5pbmcnKTtcblxuICAgICAgICAgIHZhciB0b3RhbERlbHRhWCA9IHRvYXN0LnhQb3MgLSB0b2FzdC5zdGFydGluZ1hQb3M7XG4gICAgICAgICAgdmFyIGFjdGl2YXRpb25EaXN0YW5jZSA9IHRvYXN0LmVsLm9mZnNldFdpZHRoICogdG9hc3Qub3B0aW9ucy5hY3RpdmF0aW9uUGVyY2VudDtcbiAgICAgICAgICB2YXIgc2hvdWxkQmVEaXNtaXNzZWQgPSBNYXRoLmFicyh0b3RhbERlbHRhWCkgPiBhY3RpdmF0aW9uRGlzdGFuY2UgfHwgdG9hc3QudmVsb2NpdHlYID4gMTtcblxuICAgICAgICAgIC8vIFJlbW92ZSB0b2FzdFxuICAgICAgICAgIGlmIChzaG91bGRCZURpc21pc3NlZCkge1xuICAgICAgICAgICAgdG9hc3Qud2FzU3dpcGVkID0gdHJ1ZTtcbiAgICAgICAgICAgIHRvYXN0LmRpc21pc3MoKTtcblxuICAgICAgICAgICAgLy8gQW5pbWF0ZSB0b2FzdCBiYWNrIHRvIG9yaWdpbmFsIHBvc2l0aW9uXG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRvYXN0LmVsLnN0eWxlLnRyYW5zaXRpb24gPSAndHJhbnNmb3JtIC4ycywgb3BhY2l0eSAuMnMnO1xuICAgICAgICAgICAgdG9hc3QuZWwuc3R5bGUudHJhbnNmb3JtID0gJyc7XG4gICAgICAgICAgICB0b2FzdC5lbC5zdHlsZS5vcGFjaXR5ID0gJyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIFRvYXN0Ll9kcmFnZ2VkVG9hc3QgPSBudWxsO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IHggcG9zaXRpb24gb2YgbW91c2Ugb3IgdG91Y2ggZXZlbnRcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl94UG9zXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3hQb3MoZSkge1xuICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgfVxuICAgICAgICAvLyBtb3VzZSBldmVudFxuICAgICAgICByZXR1cm4gZS5jbGllbnRYO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBhbGwgdG9hc3RzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkaXNtaXNzQWxsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGlzbWlzc0FsbCgpIHtcbiAgICAgICAgZm9yICh2YXIgdG9hc3RJbmRleCBpbiBUb2FzdC5fdG9hc3RzKSB7XG4gICAgICAgICAgVG9hc3QuX3RvYXN0c1t0b2FzdEluZGV4XS5kaXNtaXNzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBUb2FzdDtcbiAgfSgpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBUb2FzdFxuICAgKiBAdHlwZSB7QXJyYXkuPFRvYXN0Pn1cbiAgICovXG5cblxuICBUb2FzdC5fdG9hc3RzID0gW107XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFRvYXN0XG4gICAqL1xuICBUb2FzdC5fY29udGFpbmVyID0gbnVsbDtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgVG9hc3RcbiAgICogQHR5cGUge1RvYXN0fVxuICAgKi9cbiAgVG9hc3QuX2RyYWdnZWRUb2FzdCA9IG51bGw7XG5cbiAgTS5Ub2FzdCA9IFRvYXN0O1xuICBNLnRvYXN0ID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcbiAgICByZXR1cm4gbmV3IFRvYXN0KG9wdGlvbnMpO1xuICB9O1xufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGVkZ2U6ICdsZWZ0JyxcbiAgICBkcmFnZ2FibGU6IHRydWUsXG4gICAgaW5EdXJhdGlvbjogMjUwLFxuICAgIG91dER1cmF0aW9uOiAyMDAsXG4gICAgb25PcGVuU3RhcnQ6IG51bGwsXG4gICAgb25PcGVuRW5kOiBudWxsLFxuICAgIG9uQ2xvc2VTdGFydDogbnVsbCxcbiAgICBvbkNsb3NlRW5kOiBudWxsLFxuICAgIHByZXZlbnRTY3JvbGxpbmc6IHRydWVcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqL1xuXG4gIHZhciBTaWRlbmF2ID0gZnVuY3Rpb24gKF9Db21wb25lbnQ4KSB7XG4gICAgX2luaGVyaXRzKFNpZGVuYXYsIF9Db21wb25lbnQ4KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBTaWRlbmF2IGluc3RhbmNlIGFuZCBzZXQgdXAgb3ZlcmxheVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIFNpZGVuYXYoZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTaWRlbmF2KTtcblxuICAgICAgdmFyIF90aGlzMzEgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2lkZW5hdi5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNpZGVuYXYpKS5jYWxsKHRoaXMsIFNpZGVuYXYsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzMzEuZWwuTV9TaWRlbmF2ID0gX3RoaXMzMTtcbiAgICAgIF90aGlzMzEuaWQgPSBfdGhpczMxLiRlbC5hdHRyKCdpZCcpO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBTaWRlbmF2XG4gICAgICAgKiBAbWVtYmVyIFNpZGVuYXYjb3B0aW9uc1xuICAgICAgICogQHByb3Age1N0cmluZ30gW2VkZ2U9J2xlZnQnXSAtIFNpZGUgb2Ygc2NyZWVuIG9uIHdoaWNoIFNpZGVuYXYgYXBwZWFyc1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtkcmFnZ2FibGU9dHJ1ZV0gLSBBbGxvdyBzd2lwZSBnZXN0dXJlcyB0byBvcGVuL2Nsb3NlIFNpZGVuYXZcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtpbkR1cmF0aW9uPTI1MF0gLSBMZW5ndGggaW4gbXMgb2YgZW50ZXIgdHJhbnNpdGlvblxuICAgICAgICogQHByb3Age051bWJlcn0gW291dER1cmF0aW9uPTIwMF0gLSBMZW5ndGggaW4gbXMgb2YgZXhpdCB0cmFuc2l0aW9uXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uT3BlblN0YXJ0IC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gc2lkZW5hdiBzdGFydHMgZW50ZXJpbmdcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25PcGVuRW5kIC0gRnVuY3Rpb24gY2FsbGVkIHdoZW4gc2lkZW5hdiBmaW5pc2hlcyBlbnRlcmluZ1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkNsb3NlU3RhcnQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBzaWRlbmF2IHN0YXJ0cyBleGl0aW5nXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ2xvc2VFbmQgLSBGdW5jdGlvbiBjYWxsZWQgd2hlbiBzaWRlbmF2IGZpbmlzaGVzIGV4aXRpbmdcbiAgICAgICAqL1xuICAgICAgX3RoaXMzMS5vcHRpb25zID0gJC5leHRlbmQoe30sIFNpZGVuYXYuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICAvKipcbiAgICAgICAqIERlc2NyaWJlcyBvcGVuL2Nsb3NlIHN0YXRlIG9mIFNpZGVuYXZcbiAgICAgICAqIEB0eXBlIHtCb29sZWFufVxuICAgICAgICovXG4gICAgICBfdGhpczMxLmlzT3BlbiA9IGZhbHNlO1xuXG4gICAgICAvKipcbiAgICAgICAqIERlc2NyaWJlcyBpZiBTaWRlbmF2IGlzIGZpeGVkXG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgX3RoaXMzMS5pc0ZpeGVkID0gX3RoaXMzMS5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3NpZGVuYXYtZml4ZWQnKTtcblxuICAgICAgLyoqXG4gICAgICAgKiBEZXNjcmliZXMgaWYgU2lkZW5hdiBpcyBiZWluZyBkcmFnZ2VlZFxuICAgICAgICogQHR5cGUge0Jvb2xlYW59XG4gICAgICAgKi9cbiAgICAgIF90aGlzMzEuaXNEcmFnZ2VkID0gZmFsc2U7XG5cbiAgICAgIC8vIFdpbmRvdyBzaXplIHZhcmlhYmxlcyBmb3Igd2luZG93IHJlc2l6ZSBjaGVja3NcbiAgICAgIF90aGlzMzEubGFzdFdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICBfdGhpczMxLmxhc3RXaW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICAgIF90aGlzMzEuX2NyZWF0ZU92ZXJsYXkoKTtcbiAgICAgIF90aGlzMzEuX2NyZWF0ZURyYWdUYXJnZXQoKTtcbiAgICAgIF90aGlzMzEuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgX3RoaXMzMS5fc2V0dXBDbGFzc2VzKCk7XG4gICAgICBfdGhpczMxLl9zZXR1cEZpeGVkKCk7XG5cbiAgICAgIFNpZGVuYXYuX3NpZGVuYXZzLnB1c2goX3RoaXMzMSk7XG4gICAgICByZXR1cm4gX3RoaXMzMTtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoU2lkZW5hdiwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5fZW5hYmxlQm9keVNjcm9sbGluZygpO1xuICAgICAgICB0aGlzLl9vdmVybGF5LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodGhpcy5fb3ZlcmxheSk7XG4gICAgICAgIHRoaXMuZHJhZ1RhcmdldC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuZHJhZ1RhcmdldCk7XG4gICAgICAgIHRoaXMuZWwuTV9TaWRlbmF2ID0gdW5kZWZpbmVkO1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnRyYW5zZm9ybSA9ICcnO1xuXG4gICAgICAgIHZhciBpbmRleCA9IFNpZGVuYXYuX3NpZGVuYXZzLmluZGV4T2YodGhpcyk7XG4gICAgICAgIGlmIChpbmRleCA+PSAwKSB7XG4gICAgICAgICAgU2lkZW5hdi5fc2lkZW5hdnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfY3JlYXRlT3ZlcmxheVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVPdmVybGF5KCkge1xuICAgICAgICB2YXIgb3ZlcmxheSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB0aGlzLl9jbG9zZUJvdW5kID0gdGhpcy5jbG9zZS5iaW5kKHRoaXMpO1xuICAgICAgICBvdmVybGF5LmNsYXNzTGlzdC5hZGQoJ3NpZGVuYXYtb3ZlcmxheScpO1xuXG4gICAgICAgIG92ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9jbG9zZUJvdW5kKTtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG92ZXJsYXkpO1xuICAgICAgICB0aGlzLl9vdmVybGF5ID0gb3ZlcmxheTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGlmIChTaWRlbmF2Ll9zaWRlbmF2cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlVHJpZ2dlckNsaWNrKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX2hhbmRsZURyYWdUYXJnZXREcmFnQm91bmQgPSB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0RHJhZy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0UmVsZWFzZUJvdW5kID0gdGhpcy5faGFuZGxlRHJhZ1RhcmdldFJlbGVhc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xvc2VEcmFnQm91bmQgPSB0aGlzLl9oYW5kbGVDbG9zZURyYWcuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlQm91bmQgPSB0aGlzLl9oYW5kbGVDbG9zZVJlbGVhc2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xvc2VUcmlnZ2VyQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNsb3NlVHJpZ2dlckNsaWNrLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5kcmFnVGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZURyYWdUYXJnZXREcmFnQm91bmQpO1xuICAgICAgICB0aGlzLmRyYWdUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEcmFnVGFyZ2V0UmVsZWFzZUJvdW5kKTtcbiAgICAgICAgdGhpcy5fb3ZlcmxheS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVDbG9zZURyYWdCb3VuZCk7XG4gICAgICAgIHRoaXMuX292ZXJsYXkuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDbG9zZVJlbGVhc2VCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2xvc2VEcmFnQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlQ2xvc2VSZWxlYXNlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xvc2VUcmlnZ2VyQ2xpY2tCb3VuZCk7XG5cbiAgICAgICAgLy8gQWRkIHJlc2l6ZSBmb3Igc2lkZSBuYXYgZml4ZWRcbiAgICAgICAgaWYgKHRoaXMuaXNGaXhlZCkge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kID0gdGhpcy5faGFuZGxlV2luZG93UmVzaXplLmJpbmQodGhpcyk7XG4gICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBpZiAoU2lkZW5hdi5fc2lkZW5hdnMubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVRyaWdnZXJDbGljayk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRyYWdUYXJnZXQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlRHJhZ1RhcmdldERyYWdCb3VuZCk7XG4gICAgICAgIHRoaXMuZHJhZ1RhcmdldC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZURyYWdUYXJnZXRSZWxlYXNlQm91bmQpO1xuICAgICAgICB0aGlzLl9vdmVybGF5LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZUNsb3NlRHJhZ0JvdW5kKTtcbiAgICAgICAgdGhpcy5fb3ZlcmxheS5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZUNsb3NlUmVsZWFzZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVDbG9zZURyYWdCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDbG9zZVJlbGVhc2VCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbG9zZVRyaWdnZXJDbGlja0JvdW5kKTtcblxuICAgICAgICAvLyBSZW1vdmUgcmVzaXplIGZvciBzaWRlIG5hdiBmaXhlZFxuICAgICAgICBpZiAodGhpcy5pc0ZpeGVkKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVdpbmRvd1Jlc2l6ZUJvdW5kKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBUcmlnZ2VyIENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlVHJpZ2dlckNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVRyaWdnZXJDbGljayhlKSB7XG4gICAgICAgIHZhciAkdHJpZ2dlciA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5zaWRlbmF2LXRyaWdnZXInKTtcbiAgICAgICAgaWYgKGUudGFyZ2V0ICYmICR0cmlnZ2VyLmxlbmd0aCkge1xuICAgICAgICAgIHZhciBzaWRlbmF2SWQgPSBNLmdldElkRnJvbVRyaWdnZXIoJHRyaWdnZXJbMF0pO1xuXG4gICAgICAgICAgdmFyIHNpZGVuYXZJbnN0YW5jZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNpZGVuYXZJZCkuTV9TaWRlbmF2O1xuICAgICAgICAgIGlmIChzaWRlbmF2SW5zdGFuY2UpIHtcbiAgICAgICAgICAgIHNpZGVuYXZJbnN0YW5jZS5vcGVuKCR0cmlnZ2VyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IHZhcmlhYmxlcyBuZWVkZWQgYXQgdGhlIGJlZ2dpbmluZyBvZiBkcmFnXG4gICAgICAgKiBhbmQgc3RvcCBhbnkgY3VycmVudCB0cmFuc2l0aW9uLlxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3N0YXJ0RHJhZ1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zdGFydERyYWcoZSkge1xuICAgICAgICB2YXIgY2xpZW50WCA9IGUudGFyZ2V0VG91Y2hlc1swXS5jbGllbnRYO1xuICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgIHRoaXMuX3N0YXJ0aW5nWHBvcyA9IGNsaWVudFg7XG4gICAgICAgIHRoaXMuX3hQb3MgPSB0aGlzLl9zdGFydGluZ1hwb3M7XG4gICAgICAgIHRoaXMuX3RpbWUgPSBEYXRlLm5vdygpO1xuICAgICAgICB0aGlzLl93aWR0aCA9IHRoaXMuZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkud2lkdGg7XG4gICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XG4gICAgICAgIHRoaXMuX2luaXRpYWxTY3JvbGxUb3AgPSB0aGlzLmlzT3BlbiA/IHRoaXMuZWwuc2Nyb2xsVG9wIDogTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpO1xuICAgICAgICB0aGlzLl92ZXJ0aWNhbGx5U2Nyb2xsaW5nID0gZmFsc2U7XG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZWwpO1xuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLl9vdmVybGF5KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgdmFyaWFibGVzIG5lZWRlZCBhdCBlYWNoIGRyYWcgbW92ZSB1cGRhdGUgdGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2RyYWdNb3ZlVXBkYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2RyYWdNb3ZlVXBkYXRlKGUpIHtcbiAgICAgICAgdmFyIGNsaWVudFggPSBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WDtcbiAgICAgICAgdmFyIGN1cnJlbnRTY3JvbGxUb3AgPSB0aGlzLmlzT3BlbiA/IHRoaXMuZWwuc2Nyb2xsVG9wIDogTS5nZXREb2N1bWVudFNjcm9sbFRvcCgpO1xuICAgICAgICB0aGlzLmRlbHRhWCA9IE1hdGguYWJzKHRoaXMuX3hQb3MgLSBjbGllbnRYKTtcbiAgICAgICAgdGhpcy5feFBvcyA9IGNsaWVudFg7XG4gICAgICAgIHRoaXMudmVsb2NpdHlYID0gdGhpcy5kZWx0YVggLyAoRGF0ZS5ub3coKSAtIHRoaXMuX3RpbWUpO1xuICAgICAgICB0aGlzLl90aW1lID0gRGF0ZS5ub3coKTtcbiAgICAgICAgaWYgKHRoaXMuX2luaXRpYWxTY3JvbGxUb3AgIT09IGN1cnJlbnRTY3JvbGxUb3ApIHtcbiAgICAgICAgICB0aGlzLl92ZXJ0aWNhbGx5U2Nyb2xsaW5nID0gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZXMgRHJhZ2dpbmcgb2YgU2lkZW5hdlxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURyYWdUYXJnZXREcmFnXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURyYWdUYXJnZXREcmFnKGUpIHtcbiAgICAgICAgLy8gQ2hlY2sgaWYgZHJhZ2dhYmxlXG4gICAgICAgIGlmICghdGhpcy5vcHRpb25zLmRyYWdnYWJsZSB8fCB0aGlzLl9pc0N1cnJlbnRseUZpeGVkKCkgfHwgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZykge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIG5vdCBiZWluZyBkcmFnZ2VkLCBzZXQgaW5pdGlhbCBkcmFnIHN0YXJ0IHZhcmlhYmxlc1xuICAgICAgICBpZiAoIXRoaXMuaXNEcmFnZ2VkKSB7XG4gICAgICAgICAgdGhpcy5fc3RhcnREcmFnKGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUnVuIHRvdWNobW92ZSB1cGRhdGVzXG4gICAgICAgIHRoaXMuX2RyYWdNb3ZlVXBkYXRlKGUpO1xuXG4gICAgICAgIC8vIENhbGN1bGF0ZSByYXcgZGVsdGFYXG4gICAgICAgIHZhciB0b3RhbERlbHRhWCA9IHRoaXMuX3hQb3MgLSB0aGlzLl9zdGFydGluZ1hwb3M7XG5cbiAgICAgICAgLy8gZHJhZ0RpcmVjdGlvbiBpcyB0aGUgYXR0ZW1wdGVkIHVzZXIgZHJhZyBkaXJlY3Rpb25cbiAgICAgICAgdmFyIGRyYWdEaXJlY3Rpb24gPSB0b3RhbERlbHRhWCA+IDAgPyAncmlnaHQnIDogJ2xlZnQnO1xuXG4gICAgICAgIC8vIERvbid0IGFsbG93IHRvdGFsRGVsdGFYIHRvIGV4Y2VlZCBTaWRlbmF2IHdpZHRoIG9yIGJlIGRyYWdnZWQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvblxuICAgICAgICB0b3RhbERlbHRhWCA9IE1hdGgubWluKHRoaXMuX3dpZHRoLCBNYXRoLmFicyh0b3RhbERlbHRhWCkpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgPT09IGRyYWdEaXJlY3Rpb24pIHtcbiAgICAgICAgICB0b3RhbERlbHRhWCA9IDA7XG4gICAgICAgIH1cblxuICAgICAgICAvKipcbiAgICAgICAgICogdHJhbnNmb3JtWCBpcyB0aGUgZHJhZyBkaXNwbGFjZW1lbnRcbiAgICAgICAgICogdHJhbnNmb3JtUHJlZml4IGlzIHRoZSBpbml0aWFsIHRyYW5zZm9ybSBwbGFjZW1lbnRcbiAgICAgICAgICogSW52ZXJ0IHZhbHVlcyBpZiBTaWRlbmF2IGlzIHJpZ2h0IGVkZ2VcbiAgICAgICAgICovXG4gICAgICAgIHZhciB0cmFuc2Zvcm1YID0gdG90YWxEZWx0YVg7XG4gICAgICAgIHZhciB0cmFuc2Zvcm1QcmVmaXggPSAndHJhbnNsYXRlWCgtMTAwJSknO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICB0cmFuc2Zvcm1QcmVmaXggPSAndHJhbnNsYXRlWCgxMDAlKSc7XG4gICAgICAgICAgdHJhbnNmb3JtWCA9IC10cmFuc2Zvcm1YO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRlIG9wZW4vY2xvc2UgcGVyY2VudGFnZSBvZiBzaWRlbmF2LCB3aXRoIG9wZW4gPSAxIGFuZCBjbG9zZSA9IDBcbiAgICAgICAgdGhpcy5wZXJjZW50T3BlbiA9IE1hdGgubWluKDEsIHRvdGFsRGVsdGFYIC8gdGhpcy5fd2lkdGgpO1xuXG4gICAgICAgIC8vIFNldCB0cmFuc2Zvcm0gYW5kIG9wYWNpdHkgc3R5bGVzXG4gICAgICAgIHRoaXMuZWwuc3R5bGUudHJhbnNmb3JtID0gdHJhbnNmb3JtUHJlZml4ICsgXCIgdHJhbnNsYXRlWChcIiArIHRyYW5zZm9ybVggKyBcInB4KVwiO1xuICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLm9wYWNpdHkgPSB0aGlzLnBlcmNlbnRPcGVuO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBEcmFnIFRhcmdldCBSZWxlYXNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRHJhZ1RhcmdldFJlbGVhc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRHJhZ1RhcmdldFJlbGVhc2UoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhZ2dlZCkge1xuICAgICAgICAgIGlmICh0aGlzLnBlcmNlbnRPcGVuID4gMC4yKSB7XG4gICAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZU91dCgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHRoaXMuaXNEcmFnZ2VkID0gZmFsc2U7XG4gICAgICAgICAgdGhpcy5fdmVydGljYWxseVNjcm9sbGluZyA9IGZhbHNlO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENsb3NlIERyYWdcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDbG9zZURyYWdcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2xvc2VEcmFnKGUpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgLy8gQ2hlY2sgaWYgZHJhZ2dhYmxlXG4gICAgICAgICAgaWYgKCF0aGlzLm9wdGlvbnMuZHJhZ2dhYmxlIHx8IHRoaXMuX2lzQ3VycmVudGx5Rml4ZWQoKSB8fCB0aGlzLl92ZXJ0aWNhbGx5U2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gSWYgbm90IGJlaW5nIGRyYWdnZWQsIHNldCBpbml0aWFsIGRyYWcgc3RhcnQgdmFyaWFibGVzXG4gICAgICAgICAgaWYgKCF0aGlzLmlzRHJhZ2dlZCkge1xuICAgICAgICAgICAgdGhpcy5fc3RhcnREcmFnKGUpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFJ1biB0b3VjaG1vdmUgdXBkYXRlc1xuICAgICAgICAgIHRoaXMuX2RyYWdNb3ZlVXBkYXRlKGUpO1xuXG4gICAgICAgICAgLy8gQ2FsY3VsYXRlIHJhdyBkZWx0YVhcbiAgICAgICAgICB2YXIgdG90YWxEZWx0YVggPSB0aGlzLl94UG9zIC0gdGhpcy5fc3RhcnRpbmdYcG9zO1xuXG4gICAgICAgICAgLy8gZHJhZ0RpcmVjdGlvbiBpcyB0aGUgYXR0ZW1wdGVkIHVzZXIgZHJhZyBkaXJlY3Rpb25cbiAgICAgICAgICB2YXIgZHJhZ0RpcmVjdGlvbiA9IHRvdGFsRGVsdGFYID4gMCA/ICdyaWdodCcgOiAnbGVmdCc7XG5cbiAgICAgICAgICAvLyBEb24ndCBhbGxvdyB0b3RhbERlbHRhWCB0byBleGNlZWQgU2lkZW5hdiB3aWR0aCBvciBiZSBkcmFnZ2VkIGluIHRoZSBvcHBvc2l0ZSBkaXJlY3Rpb25cbiAgICAgICAgICB0b3RhbERlbHRhWCA9IE1hdGgubWluKHRoaXMuX3dpZHRoLCBNYXRoLmFicyh0b3RhbERlbHRhWCkpO1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWRnZSAhPT0gZHJhZ0RpcmVjdGlvbikge1xuICAgICAgICAgICAgdG90YWxEZWx0YVggPSAwO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciB0cmFuc2Zvcm1YID0gLXRvdGFsRGVsdGFYO1xuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ3JpZ2h0Jykge1xuICAgICAgICAgICAgdHJhbnNmb3JtWCA9IC10cmFuc2Zvcm1YO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIENhbGN1bGF0ZSBvcGVuL2Nsb3NlIHBlcmNlbnRhZ2Ugb2Ygc2lkZW5hdiwgd2l0aCBvcGVuID0gMSBhbmQgY2xvc2UgPSAwXG4gICAgICAgICAgdGhpcy5wZXJjZW50T3BlbiA9IE1hdGgubWluKDEsIDEgLSB0b3RhbERlbHRhWCAvIHRoaXMuX3dpZHRoKTtcblxuICAgICAgICAgIC8vIFNldCB0cmFuc2Zvcm0gYW5kIG9wYWNpdHkgc3R5bGVzXG4gICAgICAgICAgdGhpcy5lbC5zdHlsZS50cmFuc2Zvcm0gPSBcInRyYW5zbGF0ZVgoXCIgKyB0cmFuc2Zvcm1YICsgXCJweClcIjtcbiAgICAgICAgICB0aGlzLl9vdmVybGF5LnN0eWxlLm9wYWNpdHkgPSB0aGlzLnBlcmNlbnRPcGVuO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENsb3NlIFJlbGVhc2VcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDbG9zZVJlbGVhc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2xvc2VSZWxlYXNlKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4gJiYgdGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICBpZiAodGhpcy5wZXJjZW50T3BlbiA+IDAuOCkge1xuICAgICAgICAgICAgdGhpcy5fYW5pbWF0ZUluKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLmlzRHJhZ2dlZCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuX3ZlcnRpY2FsbHlTY3JvbGxpbmcgPSBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZXMgY2xvc2luZyBvZiBTaWRlbmF2IHdoZW4gZWxlbWVudCB3aXRoIGNsYXNzIC5zaWRlbmF2LWNsb3NlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2xvc2VUcmlnZ2VyQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2xvc2VUcmlnZ2VyQ2xpY2soZSkge1xuICAgICAgICB2YXIgJGNsb3NlVHJpZ2dlciA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5zaWRlbmF2LWNsb3NlJyk7XG4gICAgICAgIGlmICgkY2xvc2VUcmlnZ2VyLmxlbmd0aCAmJiAhdGhpcy5faXNDdXJyZW50bHlGaXhlZCgpKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFdpbmRvdyBSZXNpemVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVXaW5kb3dSZXNpemVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlV2luZG93UmVzaXplKCkge1xuICAgICAgICAvLyBPbmx5IGhhbmRsZSBob3Jpem9udGFsIHJlc2l6ZXNcbiAgICAgICAgaWYgKHRoaXMubGFzdFdpbmRvd1dpZHRoICE9PSB3aW5kb3cuaW5uZXJXaWR0aCkge1xuICAgICAgICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA+IDk5Mikge1xuICAgICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxhc3RXaW5kb3dXaWR0aCA9IHdpbmRvdy5pbm5lcldpZHRoO1xuICAgICAgICB0aGlzLmxhc3RXaW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cENsYXNzZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBDbGFzc2VzKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmVkZ2UgPT09ICdyaWdodCcpIHtcbiAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3JpZ2h0LWFsaWduZWQnKTtcbiAgICAgICAgICB0aGlzLmRyYWdUYXJnZXQuY2xhc3NMaXN0LmFkZCgncmlnaHQtYWxpZ25lZCcpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVDbGFzc2VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUNsYXNzZXMoKSB7XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgncmlnaHQtYWxpZ25lZCcpO1xuICAgICAgICB0aGlzLmRyYWdUYXJnZXQuY2xhc3NMaXN0LnJlbW92ZSgncmlnaHQtYWxpZ25lZCcpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBGaXhlZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEZpeGVkKCkge1xuICAgICAgICBpZiAodGhpcy5faXNDdXJyZW50bHlGaXhlZCgpKSB7XG4gICAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2lzQ3VycmVudGx5Rml4ZWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNDdXJyZW50bHlGaXhlZCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuaXNGaXhlZCAmJiB3aW5kb3cuaW5uZXJXaWR0aCA+IDk5MjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2NyZWF0ZURyYWdUYXJnZXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY3JlYXRlRHJhZ1RhcmdldCgpIHtcbiAgICAgICAgdmFyIGRyYWdUYXJnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgZHJhZ1RhcmdldC5jbGFzc0xpc3QuYWRkKCdkcmFnLXRhcmdldCcpO1xuICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRyYWdUYXJnZXQpO1xuICAgICAgICB0aGlzLmRyYWdUYXJnZXQgPSBkcmFnVGFyZ2V0O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcHJldmVudEJvZHlTY3JvbGxpbmdcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcHJldmVudEJvZHlTY3JvbGxpbmcoKSB7XG4gICAgICAgIHZhciBib2R5ID0gZG9jdW1lbnQuYm9keTtcbiAgICAgICAgYm9keS5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfZW5hYmxlQm9keVNjcm9sbGluZ1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9lbmFibGVCb2R5U2Nyb2xsaW5nKCkge1xuICAgICAgICB2YXIgYm9keSA9IGRvY3VtZW50LmJvZHk7XG4gICAgICAgIGJvZHkuc3R5bGUub3ZlcmZsb3cgPSAnJztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib3BlblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3BlbiA9PT0gdHJ1ZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcblxuICAgICAgICAvLyBSdW4gb25PcGVuU3RhcnQgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuU3RhcnQuY2FsbCh0aGlzLCB0aGlzLmVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEhhbmRsZSBmaXhlZCBTaWRlbmF2XG4gICAgICAgIGlmICh0aGlzLl9pc0N1cnJlbnRseUZpeGVkKCkpIHtcbiAgICAgICAgICBhbmltLnJlbW92ZSh0aGlzLmVsKTtcbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuZWwsXG4gICAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLl9lbmFibGVCb2R5U2Nyb2xsaW5nKCk7XG4gICAgICAgICAgdGhpcy5fb3ZlcmxheS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xuXG4gICAgICAgICAgLy8gSGFuZGxlIG5vbi1maXhlZCBTaWRlbmF2XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5wcmV2ZW50U2Nyb2xsaW5nKSB7XG4gICAgICAgICAgICB0aGlzLl9wcmV2ZW50Qm9keVNjcm9sbGluZygpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnZWQgfHwgdGhpcy5wZXJjZW50T3BlbiAhPSAxKSB7XG4gICAgICAgICAgICB0aGlzLl9hbmltYXRlSW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuID09PSBmYWxzZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG5cbiAgICAgICAgLy8gUnVuIG9uQ2xvc2VTdGFydCBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25DbG9zZVN0YXJ0LmNhbGwodGhpcywgdGhpcy5lbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgZml4ZWQgU2lkZW5hdlxuICAgICAgICBpZiAodGhpcy5faXNDdXJyZW50bHlGaXhlZCgpKSB7XG4gICAgICAgICAgdmFyIHRyYW5zZm9ybVggPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gJy0xMDUlJyA6ICcxMDUlJztcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRyYW5zZm9ybSA9IFwidHJhbnNsYXRlWChcIiArIHRyYW5zZm9ybVggKyBcIilcIjtcblxuICAgICAgICAgIC8vIEhhbmRsZSBub24tZml4ZWQgU2lkZW5hdlxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX2VuYWJsZUJvZHlTY3JvbGxpbmcoKTtcblxuICAgICAgICAgIGlmICghdGhpcy5pc0RyYWdnZWQgfHwgdGhpcy5wZXJjZW50T3BlbiAhPSAwKSB7XG4gICAgICAgICAgICB0aGlzLl9hbmltYXRlT3V0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX292ZXJsYXkuc3R5bGUuZGlzcGxheSA9ICdub25lJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVJblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlSW4oKSB7XG4gICAgICAgIHRoaXMuX2FuaW1hdGVTaWRlbmF2SW4oKTtcbiAgICAgICAgdGhpcy5fYW5pbWF0ZU92ZXJsYXlJbigpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZVNpZGVuYXZJblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlU2lkZW5hdkluKCkge1xuICAgICAgICB2YXIgX3RoaXMzMiA9IHRoaXM7XG5cbiAgICAgICAgdmFyIHNsaWRlT3V0UGVyY2VudCA9IHRoaXMub3B0aW9ucy5lZGdlID09PSAnbGVmdCcgPyAtMSA6IDE7XG4gICAgICAgIGlmICh0aGlzLmlzRHJhZ2dlZCkge1xuICAgICAgICAgIHNsaWRlT3V0UGVyY2VudCA9IHRoaXMub3B0aW9ucy5lZGdlID09PSAnbGVmdCcgPyBzbGlkZU91dFBlcmNlbnQgKyB0aGlzLnBlcmNlbnRPcGVuIDogc2xpZGVPdXRQZXJjZW50IC0gdGhpcy5wZXJjZW50T3BlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZWwpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLmVsLFxuICAgICAgICAgIHRyYW5zbGF0ZVg6IFtzbGlkZU91dFBlcmNlbnQgKiAxMDAgKyBcIiVcIiwgMF0sXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5pbkR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gUnVuIG9uT3BlbkVuZCBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczMyLm9wdGlvbnMub25PcGVuRW5kID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgIF90aGlzMzIub3B0aW9ucy5vbk9wZW5FbmQuY2FsbChfdGhpczMyLCBfdGhpczMyLmVsKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZU92ZXJsYXlJblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3ZlcmxheUluKCkge1xuICAgICAgICB2YXIgc3RhcnQgPSAwO1xuICAgICAgICBpZiAodGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICBzdGFydCA9IHRoaXMucGVyY2VudE9wZW47XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgJCh0aGlzLl9vdmVybGF5KS5jc3Moe1xuICAgICAgICAgICAgZGlzcGxheTogJ2Jsb2NrJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgYW5pbS5yZW1vdmUodGhpcy5fb3ZlcmxheSk7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IHRoaXMuX292ZXJsYXksXG4gICAgICAgICAgb3BhY2l0eTogW3N0YXJ0LCAxXSxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmluRHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZU91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3V0KCkge1xuICAgICAgICB0aGlzLl9hbmltYXRlU2lkZW5hdk91dCgpO1xuICAgICAgICB0aGlzLl9hbmltYXRlT3ZlcmxheU91dCgpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZVNpZGVuYXZPdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZVNpZGVuYXZPdXQoKSB7XG4gICAgICAgIHZhciBfdGhpczMzID0gdGhpcztcblxuICAgICAgICB2YXIgZW5kUGVyY2VudCA9IHRoaXMub3B0aW9ucy5lZGdlID09PSAnbGVmdCcgPyAtMSA6IDE7XG4gICAgICAgIHZhciBzbGlkZU91dFBlcmNlbnQgPSAwO1xuICAgICAgICBpZiAodGhpcy5pc0RyYWdnZWQpIHtcbiAgICAgICAgICBzbGlkZU91dFBlcmNlbnQgPSB0aGlzLm9wdGlvbnMuZWRnZSA9PT0gJ2xlZnQnID8gZW5kUGVyY2VudCArIHRoaXMucGVyY2VudE9wZW4gOiBlbmRQZXJjZW50IC0gdGhpcy5wZXJjZW50T3BlbjtcbiAgICAgICAgfVxuXG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuZWwpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLmVsLFxuICAgICAgICAgIHRyYW5zbGF0ZVg6IFtzbGlkZU91dFBlcmNlbnQgKiAxMDAgKyBcIiVcIiwgZW5kUGVyY2VudCAqIDEwNSArIFwiJVwiXSxcbiAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLm91dER1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gUnVuIG9uT3BlbkVuZCBjYWxsYmFja1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczMzLm9wdGlvbnMub25DbG9zZUVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczMzLm9wdGlvbnMub25DbG9zZUVuZC5jYWxsKF90aGlzMzMsIF90aGlzMzMuZWwpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlT3ZlcmxheU91dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hbmltYXRlT3ZlcmxheU91dCgpIHtcbiAgICAgICAgdmFyIF90aGlzMzQgPSB0aGlzO1xuXG4gICAgICAgIGFuaW0ucmVtb3ZlKHRoaXMuX292ZXJsYXkpO1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiB0aGlzLl9vdmVybGF5LFxuICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgZHVyYXRpb246IHRoaXMub3B0aW9ucy5vdXREdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgY29tcGxldGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICQoX3RoaXMzNC5fb3ZlcmxheSkuY3NzKCdkaXNwbGF5JywgJ25vbmUnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChTaWRlbmF2Ll9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2lkZW5hdiksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1NpZGVuYXY7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2lkZW5hdjtcbiAgfShDb21wb25lbnQpO1xuXG4gIC8qKlxuICAgKiBAc3RhdGljXG4gICAqIEBtZW1iZXJvZiBTaWRlbmF2XG4gICAqIEB0eXBlIHtBcnJheS48U2lkZW5hdj59XG4gICAqL1xuXG5cbiAgU2lkZW5hdi5fc2lkZW5hdnMgPSBbXTtcblxuICBNLlNpZGVuYXYgPSBTaWRlbmF2O1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoU2lkZW5hdiwgJ3NpZGVuYXYnLCAnTV9TaWRlbmF2Jyk7XG4gIH1cbn0pKGNhc2gsIE0uYW5pbWUpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICB0aHJvdHRsZTogMTAwLFxuICAgIHNjcm9sbE9mZnNldDogMjAwLCAvLyBvZmZzZXQgLSAyMDAgYWxsb3dzIGVsZW1lbnRzIG5lYXIgYm90dG9tIG9mIHBhZ2UgdG8gc2Nyb2xsXG4gICAgYWN0aXZlQ2xhc3M6ICdhY3RpdmUnLFxuICAgIGdldEFjdGl2ZUVsZW1lbnQ6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgcmV0dXJuICdhW2hyZWY9XCIjJyArIGlkICsgJ1wiXSc7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIFNjcm9sbFNweSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50OSkge1xuICAgIF9pbmhlcml0cyhTY3JvbGxTcHksIF9Db21wb25lbnQ5KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBTY3JvbGxTcHkgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBTY3JvbGxTcHkoZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBTY3JvbGxTcHkpO1xuXG4gICAgICB2YXIgX3RoaXMzNSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChTY3JvbGxTcHkuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTY3JvbGxTcHkpKS5jYWxsKHRoaXMsIFNjcm9sbFNweSwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXMzNS5lbC5NX1Njcm9sbFNweSA9IF90aGlzMzU7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIG1vZGFsXG4gICAgICAgKiBAbWVtYmVyIE1vZGFsI29wdGlvbnNcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFt0aHJvdHRsZT0xMDBdIC0gVGhyb3R0bGUgb2Ygc2Nyb2xsIGhhbmRsZXJcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IFtzY3JvbGxPZmZzZXQ9MjAwXSAtIE9mZnNldCBmb3IgY2VudGVyaW5nIGVsZW1lbnQgd2hlbiBzY3JvbGxlZCB0b1xuICAgICAgICogQHByb3Age1N0cmluZ30gW2FjdGl2ZUNsYXNzPSdhY3RpdmUnXSAtIENsYXNzIGFwcGxpZWQgdG8gYWN0aXZlIGVsZW1lbnRzXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IFtnZXRBY3RpdmVFbGVtZW50XSAtIFVzZWQgdG8gZmluZCBhY3RpdmUgZWxlbWVudFxuICAgICAgICovXG4gICAgICBfdGhpczM1Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgU2Nyb2xsU3B5LmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLy8gc2V0dXBcbiAgICAgIFNjcm9sbFNweS5fZWxlbWVudHMucHVzaChfdGhpczM1KTtcbiAgICAgIFNjcm9sbFNweS5fY291bnQrKztcbiAgICAgIFNjcm9sbFNweS5faW5jcmVtZW50Kys7XG4gICAgICBfdGhpczM1LnRpY2tJZCA9IC0xO1xuICAgICAgX3RoaXMzNS5pZCA9IFNjcm9sbFNweS5faW5jcmVtZW50O1xuICAgICAgX3RoaXMzNS5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICBfdGhpczM1Ll9oYW5kbGVXaW5kb3dTY3JvbGwoKTtcbiAgICAgIHJldHVybiBfdGhpczM1O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhTY3JvbGxTcHksIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICBTY3JvbGxTcHkuX2VsZW1lbnRzLnNwbGljZShTY3JvbGxTcHkuX2VsZW1lbnRzLmluZGV4T2YodGhpcyksIDEpO1xuICAgICAgICBTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3LnNwbGljZShTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3LmluZGV4T2YodGhpcyksIDEpO1xuICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cy5zcGxpY2UoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMuaW5kZXhPZih0aGlzLiRlbCksIDEpO1xuICAgICAgICBTY3JvbGxTcHkuX2NvdW50LS07XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudCh0aGlzLiRlbC5hdHRyKCdpZCcpKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcbiAgICAgICAgdGhpcy5lbC5NX1Njcm9sbFNweSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHZhciB0aHJvdHRsZWRSZXNpemUgPSBNLnRocm90dGxlKHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbCwgMjAwKTtcbiAgICAgICAgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQgPSB0aHJvdHRsZWRSZXNpemUuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsQm91bmQgPSB0aGlzLl9oYW5kbGVXaW5kb3dTY3JvbGwuYmluZCh0aGlzKTtcbiAgICAgICAgaWYgKFNjcm9sbFNweS5fY291bnQgPT09IDEpIHtcbiAgICAgICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5faGFuZGxlV2luZG93U2Nyb2xsQm91bmQpO1xuICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCk7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVRyaWdnZXJDbGljayk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGlmIChTY3JvbGxTcHkuX2NvdW50ID09PSAwKSB7XG4gICAgICAgICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIHRoaXMuX2hhbmRsZVdpbmRvd1Njcm9sbEJvdW5kKTtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQpO1xuICAgICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUcmlnZ2VyQ2xpY2spO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFRyaWdnZXIgQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVUcmlnZ2VyQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlVHJpZ2dlckNsaWNrKGUpIHtcbiAgICAgICAgdmFyICR0cmlnZ2VyID0gJChlLnRhcmdldCk7XG4gICAgICAgIGZvciAodmFyIGkgPSBTY3JvbGxTcHkuX2VsZW1lbnRzLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbHNweSA9IFNjcm9sbFNweS5fZWxlbWVudHNbaV07XG4gICAgICAgICAgaWYgKCR0cmlnZ2VyLmlzKCdhW2hyZWY9XCIjJyArIHNjcm9sbHNweS4kZWwuYXR0cignaWQnKSArICdcIl0nKSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgdmFyIG9mZnNldCA9IHNjcm9sbHNweS4kZWwub2Zmc2V0KCkudG9wICsgMTtcblxuICAgICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICAgIHRhcmdldHM6IFtkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsIGRvY3VtZW50LmJvZHldLFxuICAgICAgICAgICAgICBzY3JvbGxUb3A6IG9mZnNldCAtIHNjcm9sbHNweS5vcHRpb25zLnNjcm9sbE9mZnNldCxcbiAgICAgICAgICAgICAgZHVyYXRpb246IDQwMCxcbiAgICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dEN1YmljJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgV2luZG93IFNjcm9sbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVdpbmRvd1Njcm9sbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVXaW5kb3dTY3JvbGwoKSB7XG4gICAgICAgIC8vIHVuaXF1ZSB0aWNrIGlkXG4gICAgICAgIFNjcm9sbFNweS5fdGlja3MrKztcblxuICAgICAgICAvLyB2aWV3cG9ydCByZWN0YW5nbGVcbiAgICAgICAgdmFyIHRvcCA9IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKSxcbiAgICAgICAgICAgIGxlZnQgPSBNLmdldERvY3VtZW50U2Nyb2xsTGVmdCgpLFxuICAgICAgICAgICAgcmlnaHQgPSBsZWZ0ICsgd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgICAgICBib3R0b20gPSB0b3AgKyB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICAgICAgLy8gZGV0ZXJtaW5lIHdoaWNoIGVsZW1lbnRzIGFyZSBpbiB2aWV3XG4gICAgICAgIHZhciBpbnRlcnNlY3Rpb25zID0gU2Nyb2xsU3B5Ll9maW5kRWxlbWVudHModG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBpbnRlcnNlY3Rpb25zLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIHNjcm9sbHNweSA9IGludGVyc2VjdGlvbnNbaV07XG4gICAgICAgICAgdmFyIGxhc3RUaWNrID0gc2Nyb2xsc3B5LnRpY2tJZDtcbiAgICAgICAgICBpZiAobGFzdFRpY2sgPCAwKSB7XG4gICAgICAgICAgICAvLyBlbnRlcmVkIGludG8gdmlld1xuICAgICAgICAgICAgc2Nyb2xsc3B5Ll9lbnRlcigpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIHVwZGF0ZSB0aWNrIGlkXG4gICAgICAgICAgc2Nyb2xsc3B5LnRpY2tJZCA9IFNjcm9sbFNweS5fdGlja3M7XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBfaSA9IDA7IF9pIDwgU2Nyb2xsU3B5Ll9lbGVtZW50c0luVmlldy5sZW5ndGg7IF9pKyspIHtcbiAgICAgICAgICB2YXIgX3Njcm9sbHNweSA9IFNjcm9sbFNweS5fZWxlbWVudHNJblZpZXdbX2ldO1xuICAgICAgICAgIHZhciBfbGFzdFRpY2sgPSBfc2Nyb2xsc3B5LnRpY2tJZDtcbiAgICAgICAgICBpZiAoX2xhc3RUaWNrID49IDAgJiYgX2xhc3RUaWNrICE9PSBTY3JvbGxTcHkuX3RpY2tzKSB7XG4gICAgICAgICAgICAvLyBleGl0ZWQgZnJvbSB2aWV3XG4gICAgICAgICAgICBfc2Nyb2xsc3B5Ll9leGl0KCk7XG4gICAgICAgICAgICBfc2Nyb2xsc3B5LnRpY2tJZCA9IC0xO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHJlbWVtYmVyIGVsZW1lbnRzIGluIHZpZXcgZm9yIG5leHQgdGlja1xuICAgICAgICBTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3ID0gaW50ZXJzZWN0aW9ucztcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBGaW5kIGVsZW1lbnRzIHRoYXQgYXJlIHdpdGhpbiB0aGUgYm91bmRhcnlcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSB0b3BcbiAgICAgICAqIEBwYXJhbSB7bnVtYmVyfSByaWdodFxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGJvdHRvbVxuICAgICAgICogQHBhcmFtIHtudW1iZXJ9IGxlZnRcbiAgICAgICAqIEByZXR1cm4ge0FycmF5LjxTY3JvbGxTcHk+fSAgIEEgY29sbGVjdGlvbiBvZiBlbGVtZW50c1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2VudGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2VudGVyKCkge1xuICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cyA9IFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLmZpbHRlcihmdW5jdGlvbiAodmFsdWUpIHtcbiAgICAgICAgICByZXR1cm4gdmFsdWUuaGVpZ2h0KCkgIT0gMDtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdKSB7XG4gICAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXS5hdHRyKCdpZCcpKSkucmVtb3ZlQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcbiAgICAgICAgICBpZiAoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF1bMF0uTV9TY3JvbGxTcHkgJiYgdGhpcy5pZCA8IFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdWzBdLk1fU2Nyb2xsU3B5LmlkKSB7XG4gICAgICAgICAgICBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cy51bnNoaWZ0KHRoaXMuJGVsKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMucHVzaCh0aGlzLiRlbCk7XG4gICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzLnB1c2godGhpcy4kZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgJCh0aGlzLm9wdGlvbnMuZ2V0QWN0aXZlRWxlbWVudChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXS5hdHRyKCdpZCcpKSkuYWRkQ2xhc3ModGhpcy5vcHRpb25zLmFjdGl2ZUNsYXNzKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2V4aXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfZXhpdCgpIHtcbiAgICAgICAgdmFyIF90aGlzMzYgPSB0aGlzO1xuXG4gICAgICAgIFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzID0gU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMuZmlsdGVyKGZ1bmN0aW9uICh2YWx1ZSkge1xuICAgICAgICAgIHJldHVybiB2YWx1ZS5oZWlnaHQoKSAhPSAwO1xuICAgICAgICB9KTtcblxuICAgICAgICBpZiAoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF0pIHtcbiAgICAgICAgICAkKHRoaXMub3B0aW9ucy5nZXRBY3RpdmVFbGVtZW50KFNjcm9sbFNweS5fdmlzaWJsZUVsZW1lbnRzWzBdLmF0dHIoJ2lkJykpKS5yZW1vdmVDbGFzcyh0aGlzLm9wdGlvbnMuYWN0aXZlQ2xhc3MpO1xuXG4gICAgICAgICAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMgPSBTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50cy5maWx0ZXIoZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICByZXR1cm4gZWwuYXR0cignaWQnKSAhPSBfdGhpczM2LiRlbC5hdHRyKCdpZCcpO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIGlmIChTY3JvbGxTcHkuX3Zpc2libGVFbGVtZW50c1swXSkge1xuICAgICAgICAgICAgLy8gQ2hlY2sgaWYgZW1wdHlcbiAgICAgICAgICAgICQodGhpcy5vcHRpb25zLmdldEFjdGl2ZUVsZW1lbnQoU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHNbMF0uYXR0cignaWQnKSkpLmFkZENsYXNzKHRoaXMub3B0aW9ucy5hY3RpdmVDbGFzcyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KFNjcm9sbFNweS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFNjcm9sbFNweSksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1Njcm9sbFNweTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2ZpbmRFbGVtZW50c1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9maW5kRWxlbWVudHModG9wLCByaWdodCwgYm90dG9tLCBsZWZ0KSB7XG4gICAgICAgIHZhciBoaXRzID0gW107XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgU2Nyb2xsU3B5Ll9lbGVtZW50cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBzY3JvbGxzcHkgPSBTY3JvbGxTcHkuX2VsZW1lbnRzW2ldO1xuICAgICAgICAgIHZhciBjdXJyVG9wID0gdG9wICsgc2Nyb2xsc3B5Lm9wdGlvbnMuc2Nyb2xsT2Zmc2V0IHx8IDIwMDtcblxuICAgICAgICAgIGlmIChzY3JvbGxzcHkuJGVsLmhlaWdodCgpID4gMCkge1xuICAgICAgICAgICAgdmFyIGVsVG9wID0gc2Nyb2xsc3B5LiRlbC5vZmZzZXQoKS50b3AsXG4gICAgICAgICAgICAgICAgZWxMZWZ0ID0gc2Nyb2xsc3B5LiRlbC5vZmZzZXQoKS5sZWZ0LFxuICAgICAgICAgICAgICAgIGVsUmlnaHQgPSBlbExlZnQgKyBzY3JvbGxzcHkuJGVsLndpZHRoKCksXG4gICAgICAgICAgICAgICAgZWxCb3R0b20gPSBlbFRvcCArIHNjcm9sbHNweS4kZWwuaGVpZ2h0KCk7XG5cbiAgICAgICAgICAgIHZhciBpc0ludGVyc2VjdCA9ICEoZWxMZWZ0ID4gcmlnaHQgfHwgZWxSaWdodCA8IGxlZnQgfHwgZWxUb3AgPiBib3R0b20gfHwgZWxCb3R0b20gPCBjdXJyVG9wKTtcblxuICAgICAgICAgICAgaWYgKGlzSW50ZXJzZWN0KSB7XG4gICAgICAgICAgICAgIGhpdHMucHVzaChzY3JvbGxzcHkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gaGl0cztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBTY3JvbGxTcHk7XG4gIH0oQ29tcG9uZW50KTtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgU2Nyb2xsU3B5XG4gICAqIEB0eXBlIHtBcnJheS48U2Nyb2xsU3B5Pn1cbiAgICovXG5cblxuICBTY3JvbGxTcHkuX2VsZW1lbnRzID0gW107XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFNjcm9sbFNweVxuICAgKiBAdHlwZSB7QXJyYXkuPFNjcm9sbFNweT59XG4gICAqL1xuICBTY3JvbGxTcHkuX2VsZW1lbnRzSW5WaWV3ID0gW107XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFNjcm9sbFNweVxuICAgKiBAdHlwZSB7QXJyYXkuPGNhc2g+fVxuICAgKi9cbiAgU2Nyb2xsU3B5Ll92aXNpYmxlRWxlbWVudHMgPSBbXTtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgU2Nyb2xsU3B5XG4gICAqL1xuICBTY3JvbGxTcHkuX2NvdW50ID0gMDtcblxuICAvKipcbiAgICogQHN0YXRpY1xuICAgKiBAbWVtYmVyb2YgU2Nyb2xsU3B5XG4gICAqL1xuICBTY3JvbGxTcHkuX2luY3JlbWVudCA9IDA7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFNjcm9sbFNweVxuICAgKi9cbiAgU2Nyb2xsU3B5Ll90aWNrcyA9IDA7XG5cbiAgTS5TY3JvbGxTcHkgPSBTY3JvbGxTcHk7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihTY3JvbGxTcHksICdzY3JvbGxTcHknLCAnTV9TY3JvbGxTcHknKTtcbiAgfVxufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGRhdGE6IHt9LCAvLyBBdXRvY29tcGxldGUgZGF0YSBzZXRcbiAgICBsaW1pdDogSW5maW5pdHksIC8vIExpbWl0IG9mIHJlc3VsdHMgdGhlIGF1dG9jb21wbGV0ZSBzaG93c1xuICAgIG9uQXV0b2NvbXBsZXRlOiBudWxsLCAvLyBDYWxsYmFjayBmb3Igd2hlbiBhdXRvY29tcGxldGVkXG4gICAgbWluTGVuZ3RoOiAxLCAvLyBNaW4gY2hhcmFjdGVycyBiZWZvcmUgYXV0b2NvbXBsZXRlIHN0YXJ0c1xuICAgIHNvcnRGdW5jdGlvbjogZnVuY3Rpb24gKGEsIGIsIGlucHV0U3RyaW5nKSB7XG4gICAgICAvLyBTb3J0IGZ1bmN0aW9uIGZvciBzb3J0aW5nIGF1dG9jb21wbGV0ZSByZXN1bHRzXG4gICAgICByZXR1cm4gYS5pbmRleE9mKGlucHV0U3RyaW5nKSAtIGIuaW5kZXhPZihpbnB1dFN0cmluZyk7XG4gICAgfVxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIEF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTApIHtcbiAgICBfaW5oZXJpdHMoQXV0b2NvbXBsZXRlLCBfQ29tcG9uZW50MTApO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IEF1dG9jb21wbGV0ZSBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIEF1dG9jb21wbGV0ZShlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dG9jb21wbGV0ZSk7XG5cbiAgICAgIHZhciBfdGhpczM3ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEF1dG9jb21wbGV0ZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEF1dG9jb21wbGV0ZSkpLmNhbGwodGhpcywgQXV0b2NvbXBsZXRlLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczM3LmVsLk1fQXV0b2NvbXBsZXRlID0gX3RoaXMzNztcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgYXV0b2NvbXBsZXRlXG4gICAgICAgKiBAbWVtYmVyIEF1dG9jb21wbGV0ZSNvcHRpb25zXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBkdXJhdGlvblxuICAgICAgICogQHByb3Age051bWJlcn0gZGlzdFxuICAgICAgICogQHByb3Age251bWJlcn0gc2hpZnRcbiAgICAgICAqIEBwcm9wIHtudW1iZXJ9IHBhZGRpbmdcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBmdWxsV2lkdGhcbiAgICAgICAqIEBwcm9wIHtCb29sZWFufSBpbmRpY2F0b3JzXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gbm9XcmFwXG4gICAgICAgKiBAcHJvcCB7RnVuY3Rpb259IG9uQ3ljbGVUb1xuICAgICAgICovXG4gICAgICBfdGhpczM3Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgQXV0b2NvbXBsZXRlLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLy8gU2V0dXBcbiAgICAgIF90aGlzMzcuaXNPcGVuID0gZmFsc2U7XG4gICAgICBfdGhpczM3LmNvdW50ID0gMDtcbiAgICAgIF90aGlzMzcuYWN0aXZlSW5kZXggPSAtMTtcbiAgICAgIF90aGlzMzcub2xkVmFsO1xuICAgICAgX3RoaXMzNy4kaW5wdXRGaWVsZCA9IF90aGlzMzcuJGVsLmNsb3Nlc3QoJy5pbnB1dC1maWVsZCcpO1xuICAgICAgX3RoaXMzNy4kYWN0aXZlID0gJCgpO1xuICAgICAgX3RoaXMzNy5fbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICBfdGhpczM3Ll9zZXR1cERyb3Bkb3duKCk7XG5cbiAgICAgIF90aGlzMzcuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzMzc7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEF1dG9jb21wbGV0ZSwgW3tcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBUZWFyZG93biBjb21wb25lbnRcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3koKSB7XG4gICAgICAgIHRoaXMuX3JlbW92ZUV2ZW50SGFuZGxlcnMoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRHJvcGRvd24oKTtcbiAgICAgICAgdGhpcy5lbC5NX0F1dG9jb21wbGV0ZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0Qmx1ckJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRCbHVyLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c0JvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRLZXl1cEFuZEZvY3VzLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydEJvdW5kID0gdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmRCb3VuZCA9IHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNldXBBbmRUb3VjaGVuZC5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZUlucHV0Qmx1ckJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydEJvdW5kKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNldXBBbmRUb3VjaGVuZEJvdW5kKTtcblxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnRCb3VuZCk7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmRCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignYmx1cicsIHRoaXMuX2hhbmRsZUlucHV0Qmx1ckJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1c0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ29udGFpbmVyTW91c2Vkb3duQW5kVG91Y2hzdGFydEJvdW5kKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNldXBBbmRUb3VjaGVuZEJvdW5kKTtcblxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnRCb3VuZCk7XG4gICAgICAgICAgdGhpcy5jb250YWluZXIucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmRCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBkcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRHJvcGRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBEcm9wZG93bigpIHtcbiAgICAgICAgdmFyIF90aGlzMzggPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgdGhpcy5jb250YWluZXIuaWQgPSBcImF1dG9jb21wbGV0ZS1vcHRpb25zLVwiICsgTS5ndWlkKCk7XG4gICAgICAgICQodGhpcy5jb250YWluZXIpLmFkZENsYXNzKCdhdXRvY29tcGxldGUtY29udGVudCBkcm9wZG93bi1jb250ZW50Jyk7XG4gICAgICAgIHRoaXMuJGlucHV0RmllbGQuYXBwZW5kKHRoaXMuY29udGFpbmVyKTtcbiAgICAgICAgdGhpcy5lbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdGFyZ2V0JywgdGhpcy5jb250YWluZXIuaWQpO1xuXG4gICAgICAgIHRoaXMuZHJvcGRvd24gPSBNLkRyb3Bkb3duLmluaXQodGhpcy5lbCwge1xuICAgICAgICAgIGF1dG9Gb2N1czogZmFsc2UsXG4gICAgICAgICAgY2xvc2VPbkNsaWNrOiBmYWxzZSxcbiAgICAgICAgICBjb3ZlclRyaWdnZXI6IGZhbHNlLFxuICAgICAgICAgIG9uSXRlbUNsaWNrOiBmdW5jdGlvbiAoaXRlbUVsKSB7XG4gICAgICAgICAgICBfdGhpczM4LnNlbGVjdE9wdGlvbigkKGl0ZW1FbCkpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2tldGNoeSByZW1vdmFsIG9mIGRyb3Bkb3duIGNsaWNrIGhhbmRsZXJcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuZHJvcGRvd24uX2hhbmRsZUNsaWNrQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBkcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZURyb3Bkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZURyb3Bkb3duKCkge1xuICAgICAgICB0aGlzLmNvbnRhaW5lci5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHRoaXMuY29udGFpbmVyKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW5wdXQgQmx1clxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0Qmx1clwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEJsdXIoKSB7XG4gICAgICAgIGlmICghdGhpcy5fbW91c2Vkb3duKSB7XG4gICAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICAgIHRoaXMuX3Jlc2V0QXV0b2NvbXBsZXRlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW5wdXQgS2V5dXAgYW5kIEZvY3VzXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRLZXl1cEFuZEZvY3VzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0S2V5dXBBbmRGb2N1cyhlKSB7XG4gICAgICAgIGlmIChlLnR5cGUgPT09ICdrZXl1cCcpIHtcbiAgICAgICAgICBBdXRvY29tcGxldGUuX2tleWRvd24gPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuY291bnQgPSAwO1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5lbC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuXG4gICAgICAgIC8vIERvbid0IGNhcHR1cmUgZW50ZXIgb3IgYXJyb3cga2V5IHVzYWdlLlxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMyB8fCBlLmtleUNvZGUgPT09IDM4IHx8IGUua2V5Q29kZSA9PT0gNDApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBpZiB0aGUgaW5wdXQgaXNuJ3QgZW1wdHlcbiAgICAgICAgLy8gQ2hlY2sgaWYgZm9jdXMgdHJpZ2dlcmVkIGJ5IHRhYlxuICAgICAgICBpZiAodGhpcy5vbGRWYWwgIT09IHZhbCAmJiAoTS50YWJQcmVzc2VkIHx8IGUudHlwZSAhPT0gJ2ZvY3VzJykpIHtcbiAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFVwZGF0ZSBvbGRWYWxcbiAgICAgICAgdGhpcy5vbGRWYWwgPSB2YWw7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIElucHV0IEtleWRvd25cbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dEtleWRvd25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRLZXlkb3duKGUpIHtcbiAgICAgICAgQXV0b2NvbXBsZXRlLl9rZXlkb3duID0gdHJ1ZTtcblxuICAgICAgICAvLyBBcnJvdyBrZXlzIGFuZCBlbnRlciBrZXkgdXNhZ2VcbiAgICAgICAgdmFyIGtleUNvZGUgPSBlLmtleUNvZGUsXG4gICAgICAgICAgICBsaUVsZW1lbnQgPSB2b2lkIDAsXG4gICAgICAgICAgICBudW1JdGVtcyA9ICQodGhpcy5jb250YWluZXIpLmNoaWxkcmVuKCdsaScpLmxlbmd0aDtcblxuICAgICAgICAvLyBzZWxlY3QgZWxlbWVudCBvbiBFbnRlclxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gTS5rZXlzLkVOVEVSICYmIHRoaXMuYWN0aXZlSW5kZXggPj0gMCkge1xuICAgICAgICAgIGxpRWxlbWVudCA9ICQodGhpcy5jb250YWluZXIpLmNoaWxkcmVuKCdsaScpLmVxKHRoaXMuYWN0aXZlSW5kZXgpO1xuICAgICAgICAgIGlmIChsaUVsZW1lbnQubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihsaUVsZW1lbnQpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDYXB0dXJlIHVwIGFuZCBkb3duIGtleVxuICAgICAgICBpZiAoa2V5Q29kZSA9PT0gTS5rZXlzLkFSUk9XX1VQIHx8IGtleUNvZGUgPT09IE0ua2V5cy5BUlJPV19ET1dOKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgaWYgKGtleUNvZGUgPT09IE0ua2V5cy5BUlJPV19VUCAmJiB0aGlzLmFjdGl2ZUluZGV4ID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hY3RpdmVJbmRleC0tO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChrZXlDb2RlID09PSBNLmtleXMuQVJST1dfRE9XTiAmJiB0aGlzLmFjdGl2ZUluZGV4IDwgbnVtSXRlbXMgLSAxKSB7XG4gICAgICAgICAgICB0aGlzLmFjdGl2ZUluZGV4Kys7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdGhpcy4kYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICBpZiAodGhpcy5hY3RpdmVJbmRleCA+PSAwKSB7XG4gICAgICAgICAgICB0aGlzLiRhY3RpdmUgPSAkKHRoaXMuY29udGFpbmVyKS5jaGlsZHJlbignbGknKS5lcSh0aGlzLmFjdGl2ZUluZGV4KTtcbiAgICAgICAgICAgIHRoaXMuJGFjdGl2ZS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIElucHV0IENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dENsaWNrKGUpIHtcbiAgICAgICAgdGhpcy5vcGVuKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENvbnRhaW5lciBNb3VzZWRvd24gYW5kIFRvdWNoc3RhcnRcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDb250YWluZXJNb3VzZWRvd25BbmRUb3VjaHN0YXJ0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNvbnRhaW5lck1vdXNlZG93bkFuZFRvdWNoc3RhcnQoZSkge1xuICAgICAgICB0aGlzLl9tb3VzZWRvd24gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDb250YWluZXIgTW91c2V1cCBhbmQgVG91Y2hlbmRcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDb250YWluZXJNb3VzZXVwQW5kVG91Y2hlbmRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ29udGFpbmVyTW91c2V1cEFuZFRvdWNoZW5kKGUpIHtcbiAgICAgICAgdGhpcy5fbW91c2Vkb3duID0gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGlnaGxpZ2h0IHBhcnRpYWwgbWF0Y2hcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oaWdobGlnaHRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGlnaGxpZ2h0KHN0cmluZywgJGVsKSB7XG4gICAgICAgIHZhciBpbWcgPSAkZWwuZmluZCgnaW1nJyk7XG4gICAgICAgIHZhciBtYXRjaFN0YXJ0ID0gJGVsLnRleHQoKS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJycgKyBzdHJpbmcudG9Mb3dlckNhc2UoKSArICcnKSxcbiAgICAgICAgICAgIG1hdGNoRW5kID0gbWF0Y2hTdGFydCArIHN0cmluZy5sZW5ndGggLSAxLFxuICAgICAgICAgICAgYmVmb3JlTWF0Y2ggPSAkZWwudGV4dCgpLnNsaWNlKDAsIG1hdGNoU3RhcnQpLFxuICAgICAgICAgICAgbWF0Y2hUZXh0ID0gJGVsLnRleHQoKS5zbGljZShtYXRjaFN0YXJ0LCBtYXRjaEVuZCArIDEpLFxuICAgICAgICAgICAgYWZ0ZXJNYXRjaCA9ICRlbC50ZXh0KCkuc2xpY2UobWF0Y2hFbmQgKyAxKTtcbiAgICAgICAgJGVsLmh0bWwoXCI8c3Bhbj5cIiArIGJlZm9yZU1hdGNoICsgXCI8c3BhbiBjbGFzcz0naGlnaGxpZ2h0Jz5cIiArIG1hdGNoVGV4dCArIFwiPC9zcGFuPlwiICsgYWZ0ZXJNYXRjaCArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgaWYgKGltZy5sZW5ndGgpIHtcbiAgICAgICAgICAkZWwucHJlcGVuZChpbWcpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVzZXQgY3VycmVudCBlbGVtZW50IHBvc2l0aW9uXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVzZXRDdXJyZW50RWxlbWVudFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZXNldEN1cnJlbnRFbGVtZW50KCkge1xuICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gLTE7XG4gICAgICAgIHRoaXMuJGFjdGl2ZS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVzZXQgYXV0b2NvbXBsZXRlIGVsZW1lbnRzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVzZXRBdXRvY29tcGxldGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzZXRBdXRvY29tcGxldGUoKSB7XG4gICAgICAgICQodGhpcy5jb250YWluZXIpLmVtcHR5KCk7XG4gICAgICAgIHRoaXMuX3Jlc2V0Q3VycmVudEVsZW1lbnQoKTtcbiAgICAgICAgdGhpcy5vbGRWYWwgPSBudWxsO1xuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICB0aGlzLl9tb3VzZWRvd24gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZWxlY3QgYXV0b2NvbXBsZXRlIG9wdGlvblxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbCAgQXV0b2NvbXBsZXRlIG9wdGlvbiBsaXN0IGl0ZW0gZWxlbWVudFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2VsZWN0T3B0aW9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2VsZWN0T3B0aW9uKGVsKSB7XG4gICAgICAgIHZhciB0ZXh0ID0gZWwudGV4dCgpLnRyaW0oKTtcbiAgICAgICAgdGhpcy5lbC52YWx1ZSA9IHRleHQ7XG4gICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB0aGlzLl9yZXNldEF1dG9jb21wbGV0ZSgpO1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG5cbiAgICAgICAgLy8gSGFuZGxlIG9uQXV0b2NvbXBsZXRlIGNhbGxiYWNrLlxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkF1dG9jb21wbGV0ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkF1dG9jb21wbGV0ZS5jYWxsKHRoaXMsIHRleHQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVuZGVyIGRyb3Bkb3duIGNvbnRlbnRcbiAgICAgICAqIEBwYXJhbSB7T2JqZWN0fSBkYXRhICBkYXRhIHNldFxuICAgICAgICogQHBhcmFtIHtTdHJpbmd9IHZhbCAgY3VycmVudCBpbnB1dCB2YWx1ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbmRlckRyb3Bkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckRyb3Bkb3duKGRhdGEsIHZhbCkge1xuICAgICAgICB2YXIgX3RoaXMzOSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRBdXRvY29tcGxldGUoKTtcblxuICAgICAgICB2YXIgbWF0Y2hpbmdEYXRhID0gW107XG5cbiAgICAgICAgLy8gR2F0aGVyIGFsbCBtYXRjaGluZyBkYXRhXG4gICAgICAgIGZvciAodmFyIGtleSBpbiBkYXRhKSB7XG4gICAgICAgICAgaWYgKGRhdGEuaGFzT3duUHJvcGVydHkoa2V5KSAmJiBrZXkudG9Mb3dlckNhc2UoKS5pbmRleE9mKHZhbCkgIT09IC0xKSB7XG4gICAgICAgICAgICAvLyBCcmVhayBpZiBwYXN0IGxpbWl0XG4gICAgICAgICAgICBpZiAodGhpcy5jb3VudCA+PSB0aGlzLm9wdGlvbnMubGltaXQpIHtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHZhciBlbnRyeSA9IHtcbiAgICAgICAgICAgICAgZGF0YTogZGF0YVtrZXldLFxuICAgICAgICAgICAgICBrZXk6IGtleVxuICAgICAgICAgICAgfTtcbiAgICAgICAgICAgIG1hdGNoaW5nRGF0YS5wdXNoKGVudHJ5KTtcblxuICAgICAgICAgICAgdGhpcy5jb3VudCsrO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNvcnRcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zb3J0RnVuY3Rpb24pIHtcbiAgICAgICAgICB2YXIgc29ydEZ1bmN0aW9uQm91bmQgPSBmdW5jdGlvbiAoYSwgYikge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzMzkub3B0aW9ucy5zb3J0RnVuY3Rpb24oYS5rZXkudG9Mb3dlckNhc2UoKSwgYi5rZXkudG9Mb3dlckNhc2UoKSwgdmFsLnRvTG93ZXJDYXNlKCkpO1xuICAgICAgICAgIH07XG4gICAgICAgICAgbWF0Y2hpbmdEYXRhLnNvcnQoc29ydEZ1bmN0aW9uQm91bmQpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUmVuZGVyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF0Y2hpbmdEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgdmFyIF9lbnRyeSA9IG1hdGNoaW5nRGF0YVtpXTtcbiAgICAgICAgICB2YXIgJGF1dG9jb21wbGV0ZU9wdGlvbiA9ICQoJzxsaT48L2xpPicpO1xuICAgICAgICAgIGlmICghIV9lbnRyeS5kYXRhKSB7XG4gICAgICAgICAgICAkYXV0b2NvbXBsZXRlT3B0aW9uLmFwcGVuZChcIjxpbWcgc3JjPVxcXCJcIiArIF9lbnRyeS5kYXRhICsgXCJcXFwiIGNsYXNzPVxcXCJyaWdodCBjaXJjbGVcXFwiPjxzcGFuPlwiICsgX2VudHJ5LmtleSArIFwiPC9zcGFuPlwiKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJGF1dG9jb21wbGV0ZU9wdGlvbi5hcHBlbmQoJzxzcGFuPicgKyBfZW50cnkua2V5ICsgJzwvc3Bhbj4nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAkKHRoaXMuY29udGFpbmVyKS5hcHBlbmQoJGF1dG9jb21wbGV0ZU9wdGlvbik7XG4gICAgICAgICAgdGhpcy5faGlnaGxpZ2h0KHZhbCwgJGF1dG9jb21wbGV0ZU9wdGlvbik7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIEF1dG9jb21wbGV0ZSBEcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib3BlblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIHZhciB2YWwgPSB0aGlzLmVsLnZhbHVlLnRvTG93ZXJDYXNlKCk7XG5cbiAgICAgICAgdGhpcy5fcmVzZXRBdXRvY29tcGxldGUoKTtcblxuICAgICAgICBpZiAodmFsLmxlbmd0aCA+PSB0aGlzLm9wdGlvbnMubWluTGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgICAgIHRoaXMuX3JlbmRlckRyb3Bkb3duKHRoaXMub3B0aW9ucy5kYXRhLCB2YWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gT3BlbiBkcm9wZG93blxuICAgICAgICBpZiAoIXRoaXMuZHJvcGRvd24uaXNPcGVuKSB7XG4gICAgICAgICAgdGhpcy5kcm9wZG93bi5vcGVuKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gUmVjYWxjdWxhdGUgZHJvcGRvd24gd2hlbiBpdHMgYWxyZWFkeSBvcGVuXG4gICAgICAgICAgdGhpcy5kcm9wZG93bi5yZWNhbGN1bGF0ZURpbWVuc2lvbnMoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENsb3NlIEF1dG9jb21wbGV0ZSBEcm9wZG93blxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgdGhpcy5kcm9wZG93bi5jbG9zZSgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZSBEYXRhXG4gICAgICAgKiBAcGFyYW0ge09iamVjdH0gZGF0YVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwidXBkYXRlRGF0YVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHVwZGF0ZURhdGEoZGF0YSkge1xuICAgICAgICB2YXIgdmFsID0gdGhpcy5lbC52YWx1ZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICB0aGlzLm9wdGlvbnMuZGF0YSA9IGRhdGE7XG5cbiAgICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgdGhpcy5fcmVuZGVyRHJvcGRvd24oZGF0YSwgdmFsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChBdXRvY29tcGxldGUuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihBdXRvY29tcGxldGUpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9BdXRvY29tcGxldGU7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQXV0b2NvbXBsZXRlO1xuICB9KENvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIEF1dG9jb21wbGV0ZVxuICAgKi9cblxuXG4gIEF1dG9jb21wbGV0ZS5fa2V5ZG93biA9IGZhbHNlO1xuXG4gIE0uQXV0b2NvbXBsZXRlID0gQXV0b2NvbXBsZXRlO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoQXV0b2NvbXBsZXRlLCAnYXV0b2NvbXBsZXRlJywgJ01fQXV0b2NvbXBsZXRlJyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAvLyBGdW5jdGlvbiB0byB1cGRhdGUgbGFiZWxzIG9mIHRleHQgZmllbGRzXG4gIE0udXBkYXRlVGV4dEZpZWxkcyA9IGZ1bmN0aW9uICgpIHtcbiAgICB2YXIgaW5wdXRfc2VsZWN0b3IgPSAnaW5wdXRbdHlwZT10ZXh0XSwgaW5wdXRbdHlwZT1wYXNzd29yZF0sIGlucHV0W3R5cGU9ZW1haWxdLCBpbnB1dFt0eXBlPXVybF0sIGlucHV0W3R5cGU9dGVsXSwgaW5wdXRbdHlwZT1udW1iZXJdLCBpbnB1dFt0eXBlPXNlYXJjaF0sIGlucHV0W3R5cGU9ZGF0ZV0sIGlucHV0W3R5cGU9dGltZV0sIHRleHRhcmVhJztcbiAgICAkKGlucHV0X3NlbGVjdG9yKS5lYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkge1xuICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgIGlmIChlbGVtZW50LnZhbHVlLmxlbmd0aCA+IDAgfHwgJChlbGVtZW50KS5pcygnOmZvY3VzJykgfHwgZWxlbWVudC5hdXRvZm9jdXMgfHwgJHRoaXMuYXR0cigncGxhY2Vob2xkZXInKSAhPT0gbnVsbCkge1xuICAgICAgICAkdGhpcy5zaWJsaW5ncygnbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9IGVsc2UgaWYgKGVsZW1lbnQudmFsaWRpdHkpIHtcbiAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xhYmVsJykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScsIGVsZW1lbnQudmFsaWRpdHkuYmFkSW5wdXQgPT09IHRydWUpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgJHRoaXMuc2libGluZ3MoJ2xhYmVsJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfVxuICAgIH0pO1xuICB9O1xuXG4gIE0udmFsaWRhdGVfZmllbGQgPSBmdW5jdGlvbiAob2JqZWN0KSB7XG4gICAgdmFyIGhhc0xlbmd0aCA9IG9iamVjdC5hdHRyKCdkYXRhLWxlbmd0aCcpICE9PSBudWxsO1xuICAgIHZhciBsZW5BdHRyID0gcGFyc2VJbnQob2JqZWN0LmF0dHIoJ2RhdGEtbGVuZ3RoJykpO1xuICAgIHZhciBsZW4gPSBvYmplY3RbMF0udmFsdWUubGVuZ3RoO1xuXG4gICAgaWYgKGxlbiA9PT0gMCAmJiBvYmplY3RbMF0udmFsaWRpdHkuYmFkSW5wdXQgPT09IGZhbHNlICYmICFvYmplY3QuaXMoJzpyZXF1aXJlZCcpKSB7XG4gICAgICBpZiAob2JqZWN0Lmhhc0NsYXNzKCd2YWxpZGF0ZScpKSB7XG4gICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygndmFsaWQnKTtcbiAgICAgICAgb2JqZWN0LnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChvYmplY3QuaGFzQ2xhc3MoJ3ZhbGlkYXRlJykpIHtcbiAgICAgICAgLy8gQ2hlY2sgZm9yIGNoYXJhY3RlciBjb3VudGVyIGF0dHJpYnV0ZXNcbiAgICAgICAgaWYgKG9iamVjdC5pcygnOnZhbGlkJykgJiYgaGFzTGVuZ3RoICYmIGxlbiA8PSBsZW5BdHRyIHx8IG9iamVjdC5pcygnOnZhbGlkJykgJiYgIWhhc0xlbmd0aCkge1xuICAgICAgICAgIG9iamVjdC5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICAgIG9iamVjdC5hZGRDbGFzcygndmFsaWQnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBvYmplY3QucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgb2JqZWN0LmFkZENsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH07XG5cbiAgTS50ZXh0YXJlYUF1dG9SZXNpemUgPSBmdW5jdGlvbiAoJHRleHRhcmVhKSB7XG4gICAgLy8gV3JhcCBpZiBuYXRpdmUgZWxlbWVudFxuICAgIGlmICgkdGV4dGFyZWEgaW5zdGFuY2VvZiBFbGVtZW50KSB7XG4gICAgICAkdGV4dGFyZWEgPSAkKCR0ZXh0YXJlYSk7XG4gICAgfVxuXG4gICAgaWYgKCEkdGV4dGFyZWEubGVuZ3RoKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdObyB0ZXh0YXJlYSBlbGVtZW50IGZvdW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgLy8gVGV4dGFyZWEgQXV0byBSZXNpemVcbiAgICB2YXIgaGlkZGVuRGl2ID0gJCgnLmhpZGRlbmRpdicpLmZpcnN0KCk7XG4gICAgaWYgKCFoaWRkZW5EaXYubGVuZ3RoKSB7XG4gICAgICBoaWRkZW5EaXYgPSAkKCc8ZGl2IGNsYXNzPVwiaGlkZGVuZGl2IGNvbW1vblwiPjwvZGl2PicpO1xuICAgICAgJCgnYm9keScpLmFwcGVuZChoaWRkZW5EaXYpO1xuICAgIH1cblxuICAgIC8vIFNldCBmb250IHByb3BlcnRpZXMgb2YgaGlkZGVuRGl2XG4gICAgdmFyIGZvbnRGYW1pbHkgPSAkdGV4dGFyZWEuY3NzKCdmb250LWZhbWlseScpO1xuICAgIHZhciBmb250U2l6ZSA9ICR0ZXh0YXJlYS5jc3MoJ2ZvbnQtc2l6ZScpO1xuICAgIHZhciBsaW5lSGVpZ2h0ID0gJHRleHRhcmVhLmNzcygnbGluZS1oZWlnaHQnKTtcblxuICAgIC8vIEZpcmVmb3ggY2FuJ3QgaGFuZGxlIHBhZGRpbmcgc2hvcnRoYW5kLlxuICAgIHZhciBwYWRkaW5nVG9wID0gJHRleHRhcmVhLmNzcygncGFkZGluZy10b3AnKTtcbiAgICB2YXIgcGFkZGluZ1JpZ2h0ID0gJHRleHRhcmVhLmNzcygncGFkZGluZy1yaWdodCcpO1xuICAgIHZhciBwYWRkaW5nQm90dG9tID0gJHRleHRhcmVhLmNzcygncGFkZGluZy1ib3R0b20nKTtcbiAgICB2YXIgcGFkZGluZ0xlZnQgPSAkdGV4dGFyZWEuY3NzKCdwYWRkaW5nLWxlZnQnKTtcblxuICAgIGlmIChmb250U2l6ZSkge1xuICAgICAgaGlkZGVuRGl2LmNzcygnZm9udC1zaXplJywgZm9udFNpemUpO1xuICAgIH1cbiAgICBpZiAoZm9udEZhbWlseSkge1xuICAgICAgaGlkZGVuRGl2LmNzcygnZm9udC1mYW1pbHknLCBmb250RmFtaWx5KTtcbiAgICB9XG4gICAgaWYgKGxpbmVIZWlnaHQpIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ2xpbmUtaGVpZ2h0JywgbGluZUhlaWdodCk7XG4gICAgfVxuICAgIGlmIChwYWRkaW5nVG9wKSB7XG4gICAgICBoaWRkZW5EaXYuY3NzKCdwYWRkaW5nLXRvcCcsIHBhZGRpbmdUb3ApO1xuICAgIH1cbiAgICBpZiAocGFkZGluZ1JpZ2h0KSB7XG4gICAgICBoaWRkZW5EaXYuY3NzKCdwYWRkaW5nLXJpZ2h0JywgcGFkZGluZ1JpZ2h0KTtcbiAgICB9XG4gICAgaWYgKHBhZGRpbmdCb3R0b20pIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ3BhZGRpbmctYm90dG9tJywgcGFkZGluZ0JvdHRvbSk7XG4gICAgfVxuICAgIGlmIChwYWRkaW5nTGVmdCkge1xuICAgICAgaGlkZGVuRGl2LmNzcygncGFkZGluZy1sZWZ0JywgcGFkZGluZ0xlZnQpO1xuICAgIH1cblxuICAgIC8vIFNldCBvcmlnaW5hbC1oZWlnaHQsIGlmIG5vbmVcbiAgICBpZiAoISR0ZXh0YXJlYS5kYXRhKCdvcmlnaW5hbC1oZWlnaHQnKSkge1xuICAgICAgJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcsICR0ZXh0YXJlYS5oZWlnaHQoKSk7XG4gICAgfVxuXG4gICAgaWYgKCR0ZXh0YXJlYS5hdHRyKCd3cmFwJykgPT09ICdvZmYnKSB7XG4gICAgICBoaWRkZW5EaXYuY3NzKCdvdmVyZmxvdy13cmFwJywgJ25vcm1hbCcpLmNzcygnd2hpdGUtc3BhY2UnLCAncHJlJyk7XG4gICAgfVxuXG4gICAgaGlkZGVuRGl2LnRleHQoJHRleHRhcmVhWzBdLnZhbHVlICsgJ1xcbicpO1xuICAgIHZhciBjb250ZW50ID0gaGlkZGVuRGl2Lmh0bWwoKS5yZXBsYWNlKC9cXG4vZywgJzxicj4nKTtcbiAgICBoaWRkZW5EaXYuaHRtbChjb250ZW50KTtcblxuICAgIC8vIFdoZW4gdGV4dGFyZWEgaXMgaGlkZGVuLCB3aWR0aCBnb2VzIGNyYXp5LlxuICAgIC8vIEFwcHJveGltYXRlIHdpdGggaGFsZiBvZiB3aW5kb3cgc2l6ZVxuXG4gICAgaWYgKCR0ZXh0YXJlYVswXS5vZmZzZXRXaWR0aCA+IDAgJiYgJHRleHRhcmVhWzBdLm9mZnNldEhlaWdodCA+IDApIHtcbiAgICAgIGhpZGRlbkRpdi5jc3MoJ3dpZHRoJywgJHRleHRhcmVhLndpZHRoKCkgKyAncHgnKTtcbiAgICB9IGVsc2Uge1xuICAgICAgaGlkZGVuRGl2LmNzcygnd2lkdGgnLCB3aW5kb3cuaW5uZXJXaWR0aCAvIDIgKyAncHgnKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBSZXNpemUgaWYgdGhlIG5ldyBoZWlnaHQgaXMgZ3JlYXRlciB0aGFuIHRoZVxuICAgICAqIG9yaWdpbmFsIGhlaWdodCBvZiB0aGUgdGV4dGFyZWFcbiAgICAgKi9cbiAgICBpZiAoJHRleHRhcmVhLmRhdGEoJ29yaWdpbmFsLWhlaWdodCcpIDw9IGhpZGRlbkRpdi5pbm5lckhlaWdodCgpKSB7XG4gICAgICAkdGV4dGFyZWEuY3NzKCdoZWlnaHQnLCBoaWRkZW5EaXYuaW5uZXJIZWlnaHQoKSArICdweCcpO1xuICAgIH0gZWxzZSBpZiAoJHRleHRhcmVhWzBdLnZhbHVlLmxlbmd0aCA8ICR0ZXh0YXJlYS5kYXRhKCdwcmV2aW91cy1sZW5ndGgnKSkge1xuICAgICAgLyoqXG4gICAgICAgKiBJbiBjYXNlIHRoZSBuZXcgaGVpZ2h0IGlzIGxlc3MgdGhhbiBvcmlnaW5hbCBoZWlnaHQsIGl0XG4gICAgICAgKiBtZWFucyB0aGUgdGV4dGFyZWEgaGFzIGxlc3MgdGV4dCB0aGFuIGJlZm9yZVxuICAgICAgICogU28gd2Ugc2V0IHRoZSBoZWlnaHQgdG8gdGhlIG9yaWdpbmFsIG9uZVxuICAgICAgICovXG4gICAgICAkdGV4dGFyZWEuY3NzKCdoZWlnaHQnLCAkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JykgKyAncHgnKTtcbiAgICB9XG4gICAgJHRleHRhcmVhLmRhdGEoJ3ByZXZpb3VzLWxlbmd0aCcsICR0ZXh0YXJlYVswXS52YWx1ZS5sZW5ndGgpO1xuICB9O1xuXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBUZXh0IGJhc2VkIGlucHV0c1xuICAgIHZhciBpbnB1dF9zZWxlY3RvciA9ICdpbnB1dFt0eXBlPXRleHRdLCBpbnB1dFt0eXBlPXBhc3N3b3JkXSwgaW5wdXRbdHlwZT1lbWFpbF0sIGlucHV0W3R5cGU9dXJsXSwgaW5wdXRbdHlwZT10ZWxdLCBpbnB1dFt0eXBlPW51bWJlcl0sIGlucHV0W3R5cGU9c2VhcmNoXSwgaW5wdXRbdHlwZT1kYXRlXSwgaW5wdXRbdHlwZT10aW1lXSwgdGV4dGFyZWEnO1xuXG4gICAgLy8gQWRkIGFjdGl2ZSBpZiBmb3JtIGF1dG8gY29tcGxldGVcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgaW5wdXRfc2VsZWN0b3IsIGZ1bmN0aW9uICgpIHtcbiAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCAhPT0gMCB8fCAkKHRoaXMpLmF0dHIoJ3BsYWNlaG9sZGVyJykgIT09IG51bGwpIHtcbiAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwnKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9XG4gICAgICBNLnZhbGlkYXRlX2ZpZWxkKCQodGhpcykpO1xuICAgIH0pO1xuXG4gICAgLy8gQWRkIGFjdGl2ZSBpZiBpbnB1dCBlbGVtZW50IGhhcyBiZWVuIHByZS1wb3B1bGF0ZWQgb24gZG9jdW1lbnQgcmVhZHlcbiAgICAkKGRvY3VtZW50KS5yZWFkeShmdW5jdGlvbiAoKSB7XG4gICAgICBNLnVwZGF0ZVRleHRGaWVsZHMoKTtcbiAgICB9KTtcblxuICAgIC8vIEhUTUwgRE9NIEZPUk0gUkVTRVQgaGFuZGxpbmdcbiAgICAkKGRvY3VtZW50KS5vbigncmVzZXQnLCBmdW5jdGlvbiAoZSkge1xuICAgICAgdmFyIGZvcm1SZXNldCA9ICQoZS50YXJnZXQpO1xuICAgICAgaWYgKGZvcm1SZXNldC5pcygnZm9ybScpKSB7XG4gICAgICAgIGZvcm1SZXNldC5maW5kKGlucHV0X3NlbGVjdG9yKS5yZW1vdmVDbGFzcygndmFsaWQnKS5yZW1vdmVDbGFzcygnaW52YWxpZCcpO1xuICAgICAgICBmb3JtUmVzZXQuZmluZChpbnB1dF9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoZSkge1xuICAgICAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCkge1xuICAgICAgICAgICAgJCh0aGlzKS5zaWJsaW5ncygnbGFiZWwnKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcblxuICAgICAgICAvLyBSZXNldCBzZWxlY3QgKGFmdGVyIG5hdGl2ZSByZXNldClcbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgZm9ybVJlc2V0LmZpbmQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgLy8gY2hlY2sgaWYgaW5pdGlhbGl6ZWRcbiAgICAgICAgICAgIGlmICh0aGlzLk1fRm9ybVNlbGVjdCkge1xuICAgICAgICAgICAgICAkKHRoaXMpLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9LCAwKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIEFkZCBhY3RpdmUgd2hlbiBlbGVtZW50IGhhcyBmb2N1c1xuICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgKi9cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIGZ1bmN0aW9uIChlKSB7XG4gICAgICBpZiAoJChlLnRhcmdldCkuaXMoaW5wdXRfc2VsZWN0b3IpKSB7XG4gICAgICAgICQoZS50YXJnZXQpLnNpYmxpbmdzKCdsYWJlbCwgLnByZWZpeCcpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgIH1cbiAgICB9LCB0cnVlKTtcblxuICAgIC8qKlxuICAgICAqIFJlbW92ZSBhY3RpdmUgd2hlbiBlbGVtZW50IGlzIGJsdXJyZWRcbiAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICovXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGZ1bmN0aW9uIChlKSB7XG4gICAgICB2YXIgJGlucHV0RWxlbWVudCA9ICQoZS50YXJnZXQpO1xuICAgICAgaWYgKCRpbnB1dEVsZW1lbnQuaXMoaW5wdXRfc2VsZWN0b3IpKSB7XG4gICAgICAgIHZhciBzZWxlY3RvciA9ICcucHJlZml4JztcblxuICAgICAgICBpZiAoJGlucHV0RWxlbWVudFswXS52YWx1ZS5sZW5ndGggPT09IDAgJiYgJGlucHV0RWxlbWVudFswXS52YWxpZGl0eS5iYWRJbnB1dCAhPT0gdHJ1ZSAmJiAkaW5wdXRFbGVtZW50LmF0dHIoJ3BsYWNlaG9sZGVyJykgPT09IG51bGwpIHtcbiAgICAgICAgICBzZWxlY3RvciArPSAnLCBsYWJlbCc7XG4gICAgICAgIH1cbiAgICAgICAgJGlucHV0RWxlbWVudC5zaWJsaW5ncyhzZWxlY3RvcikucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICBNLnZhbGlkYXRlX2ZpZWxkKCRpbnB1dEVsZW1lbnQpO1xuICAgICAgfVxuICAgIH0sIHRydWUpO1xuXG4gICAgLy8gUmFkaW8gYW5kIENoZWNrYm94IGZvY3VzIGNsYXNzXG4gICAgdmFyIHJhZGlvX2NoZWNrYm94ID0gJ2lucHV0W3R5cGU9cmFkaW9dLCBpbnB1dFt0eXBlPWNoZWNrYm94XSc7XG4gICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgcmFkaW9fY2hlY2tib3gsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAvLyBUQUIsIGNoZWNrIGlmIHRhYmJpbmcgdG8gcmFkaW8gb3IgY2hlY2tib3guXG4gICAgICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLlRBQikge1xuICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCd0YWJiZWQnKTtcbiAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKTtcbiAgICAgICAgJHRoaXMub25lKCdibHVyJywgZnVuY3Rpb24gKGUpIHtcbiAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCd0YWJiZWQnKTtcbiAgICAgICAgfSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHZhciB0ZXh0X2FyZWFfc2VsZWN0b3IgPSAnLm1hdGVyaWFsaXplLXRleHRhcmVhJztcbiAgICAkKHRleHRfYXJlYV9zZWxlY3RvcikuZWFjaChmdW5jdGlvbiAoKSB7XG4gICAgICB2YXIgJHRleHRhcmVhID0gJCh0aGlzKTtcbiAgICAgIC8qKlxuICAgICAgICogUmVzaXplIHRleHRhcmVhIG9uIGRvY3VtZW50IGxvYWQgYWZ0ZXIgc3RvcmluZ1xuICAgICAgICogdGhlIG9yaWdpbmFsIGhlaWdodCBhbmQgdGhlIG9yaWdpbmFsIGxlbmd0aFxuICAgICAgICovXG4gICAgICAkdGV4dGFyZWEuZGF0YSgnb3JpZ2luYWwtaGVpZ2h0JywgJHRleHRhcmVhLmhlaWdodCgpKTtcbiAgICAgICR0ZXh0YXJlYS5kYXRhKCdwcmV2aW91cy1sZW5ndGgnLCB0aGlzLnZhbHVlLmxlbmd0aCk7XG4gICAgICBNLnRleHRhcmVhQXV0b1Jlc2l6ZSgkdGV4dGFyZWEpO1xuICAgIH0pO1xuXG4gICAgJChkb2N1bWVudCkub24oJ2tleXVwJywgdGV4dF9hcmVhX3NlbGVjdG9yLCBmdW5jdGlvbiAoKSB7XG4gICAgICBNLnRleHRhcmVhQXV0b1Jlc2l6ZSgkKHRoaXMpKTtcbiAgICB9KTtcbiAgICAkKGRvY3VtZW50KS5vbigna2V5ZG93bicsIHRleHRfYXJlYV9zZWxlY3RvciwgZnVuY3Rpb24gKCkge1xuICAgICAgTS50ZXh0YXJlYUF1dG9SZXNpemUoJCh0aGlzKSk7XG4gICAgfSk7XG5cbiAgICAvLyBGaWxlIElucHV0IFBhdGhcbiAgICAkKGRvY3VtZW50KS5vbignY2hhbmdlJywgJy5maWxlLWZpZWxkIGlucHV0W3R5cGU9XCJmaWxlXCJdJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyIGZpbGVfZmllbGQgPSAkKHRoaXMpLmNsb3Nlc3QoJy5maWxlLWZpZWxkJyk7XG4gICAgICB2YXIgcGF0aF9pbnB1dCA9IGZpbGVfZmllbGQuZmluZCgnaW5wdXQuZmlsZS1wYXRoJyk7XG4gICAgICB2YXIgZmlsZXMgPSAkKHRoaXMpWzBdLmZpbGVzO1xuICAgICAgdmFyIGZpbGVfbmFtZXMgPSBbXTtcbiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZmlsZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgZmlsZV9uYW1lcy5wdXNoKGZpbGVzW2ldLm5hbWUpO1xuICAgICAgfVxuICAgICAgcGF0aF9pbnB1dFswXS52YWx1ZSA9IGZpbGVfbmFtZXMuam9pbignLCAnKTtcbiAgICAgIHBhdGhfaW5wdXQudHJpZ2dlcignY2hhbmdlJyk7XG4gICAgfSk7XG4gIH0pOyAvLyBFbmQgb2YgJChkb2N1bWVudCkucmVhZHlcbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBpbmRpY2F0b3JzOiB0cnVlLFxuICAgIGhlaWdodDogNDAwLFxuICAgIGR1cmF0aW9uOiA1MDAsXG4gICAgaW50ZXJ2YWw6IDYwMDBcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBTbGlkZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDExKSB7XG4gICAgX2luaGVyaXRzKFNsaWRlciwgX0NvbXBvbmVudDExKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBTbGlkZXIgaW5zdGFuY2UgYW5kIHNldCB1cCBvdmVybGF5XG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gU2xpZGVyKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgU2xpZGVyKTtcblxuICAgICAgdmFyIF90aGlzNDAgPSBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybih0aGlzLCAoU2xpZGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoU2xpZGVyKSkuY2FsbCh0aGlzLCBTbGlkZXIsIGVsLCBvcHRpb25zKSk7XG5cbiAgICAgIF90aGlzNDAuZWwuTV9TbGlkZXIgPSBfdGhpczQwO1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbFxuICAgICAgICogQG1lbWJlciBTbGlkZXIjb3B0aW9uc1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtpbmRpY2F0b3JzPXRydWVdIC0gU2hvdyBpbmRpY2F0b3JzXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaGVpZ2h0PTQwMF0gLSBoZWlnaHQgb2Ygc2xpZGVyXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbZHVyYXRpb249NTAwXSAtIExlbmd0aCBpbiBtcyBvZiBzbGlkZSB0cmFuc2l0aW9uXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBbaW50ZXJ2YWw9NjAwMF0gLSBMZW5ndGggaW4gbXMgb2Ygc2xpZGUgaW50ZXJ2YWxcbiAgICAgICAqL1xuICAgICAgX3RoaXM0MC5vcHRpb25zID0gJC5leHRlbmQoe30sIFNsaWRlci5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIC8vIHNldHVwXG4gICAgICBfdGhpczQwLiRzbGlkZXIgPSBfdGhpczQwLiRlbC5maW5kKCcuc2xpZGVzJyk7XG4gICAgICBfdGhpczQwLiRzbGlkZXMgPSBfdGhpczQwLiRzbGlkZXIuY2hpbGRyZW4oJ2xpJyk7XG4gICAgICBfdGhpczQwLmFjdGl2ZUluZGV4ID0gX3RoaXM0MC4kc2xpZGVzLmZpbHRlcihmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICByZXR1cm4gJChpdGVtKS5oYXNDbGFzcygnYWN0aXZlJyk7XG4gICAgICB9KS5maXJzdCgpLmluZGV4KCk7XG4gICAgICBpZiAoX3RoaXM0MC5hY3RpdmVJbmRleCAhPSAtMSkge1xuICAgICAgICBfdGhpczQwLiRhY3RpdmUgPSBfdGhpczQwLiRzbGlkZXMuZXEoX3RoaXM0MC5hY3RpdmVJbmRleCk7XG4gICAgICB9XG5cbiAgICAgIF90aGlzNDAuX3NldFNsaWRlckhlaWdodCgpO1xuXG4gICAgICAvLyBTZXQgaW5pdGlhbCBwb3NpdGlvbnMgb2YgY2FwdGlvbnNcbiAgICAgIF90aGlzNDAuJHNsaWRlcy5maW5kKCcuY2FwdGlvbicpLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgIF90aGlzNDAuX2FuaW1hdGVDYXB0aW9uSW4oZWwsIDApO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIE1vdmUgaW1nIHNyYyBpbnRvIGJhY2tncm91bmQtaW1hZ2VcbiAgICAgIF90aGlzNDAuJHNsaWRlcy5maW5kKCdpbWcnKS5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICB2YXIgcGxhY2Vob2xkZXJCYXNlNjQgPSAnZGF0YTppbWFnZS9naWY7YmFzZTY0LFIwbEdPRGxoQVFBQkFJQUJBUC8vL3dBQUFDSDVCQUVLQUFFQUxBQUFBQUFCQUFFQUFBSUNUQUVBT3c9PSc7XG4gICAgICAgIGlmICgkKGVsKS5hdHRyKCdzcmMnKSAhPT0gcGxhY2Vob2xkZXJCYXNlNjQpIHtcbiAgICAgICAgICAkKGVsKS5jc3MoJ2JhY2tncm91bmQtaW1hZ2UnLCAndXJsKFwiJyArICQoZWwpLmF0dHIoJ3NyYycpICsgJ1wiKScpO1xuICAgICAgICAgICQoZWwpLmF0dHIoJ3NyYycsIHBsYWNlaG9sZGVyQmFzZTY0KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIF90aGlzNDAuX3NldHVwSW5kaWNhdG9ycygpO1xuXG4gICAgICAvLyBTaG93IGFjdGl2ZSBzbGlkZVxuICAgICAgaWYgKF90aGlzNDAuJGFjdGl2ZSkge1xuICAgICAgICBfdGhpczQwLiRhY3RpdmUuY3NzKCdkaXNwbGF5JywgJ2Jsb2NrJyk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpczQwLiRzbGlkZXMuZmlyc3QoKS5hZGRDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6IF90aGlzNDAuJHNsaWRlcy5maXJzdCgpWzBdLFxuICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgZHVyYXRpb246IF90aGlzNDAub3B0aW9ucy5kdXJhdGlvbixcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgfSk7XG5cbiAgICAgICAgX3RoaXM0MC5hY3RpdmVJbmRleCA9IDA7XG4gICAgICAgIF90aGlzNDAuJGFjdGl2ZSA9IF90aGlzNDAuJHNsaWRlcy5lcShfdGhpczQwLmFjdGl2ZUluZGV4KTtcblxuICAgICAgICAvLyBVcGRhdGUgaW5kaWNhdG9yc1xuICAgICAgICBpZiAoX3RoaXM0MC5vcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgICBfdGhpczQwLiRpbmRpY2F0b3JzLmVxKF90aGlzNDAuYWN0aXZlSW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBBZGp1c3QgaGVpZ2h0IHRvIGN1cnJlbnQgc2xpZGVcbiAgICAgIF90aGlzNDAuJGFjdGl2ZS5maW5kKCdpbWcnKS5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICBhbmltKHtcbiAgICAgICAgICB0YXJnZXRzOiBfdGhpczQwLiRhY3RpdmUuZmluZCgnLmNhcHRpb24nKVswXSxcbiAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgIHRyYW5zbGF0ZVg6IDAsXG4gICAgICAgICAgdHJhbnNsYXRlWTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogX3RoaXM0MC5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJ1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuXG4gICAgICBfdGhpczQwLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcblxuICAgICAgLy8gYXV0byBzY3JvbGxcbiAgICAgIF90aGlzNDAuc3RhcnQoKTtcbiAgICAgIHJldHVybiBfdGhpczQwO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhTbGlkZXIsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLnBhdXNlKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUluZGljYXRvcnMoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLk1fU2xpZGVyID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdmFyIF90aGlzNDEgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2hhbmRsZUludGVydmFsQm91bmQgPSB0aGlzLl9oYW5kbGVJbnRlcnZhbC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlSW5kaWNhdG9yQ2xpY2suYmluZCh0aGlzKTtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgICB0aGlzLiRpbmRpY2F0b3JzLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBlbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIF90aGlzNDEuX2hhbmRsZUluZGljYXRvckNsaWNrQm91bmQpO1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB2YXIgX3RoaXM0MiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczQyLl9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBpbmRpY2F0b3IgY2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbmRpY2F0b3JDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbmRpY2F0b3JDbGljayhlKSB7XG4gICAgICAgIHZhciBjdXJySW5kZXggPSAkKGUudGFyZ2V0KS5pbmRleCgpO1xuICAgICAgICB0aGlzLnNldChjdXJySW5kZXgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBJbnRlcnZhbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUludGVydmFsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUludGVydmFsKCkge1xuICAgICAgICB2YXIgbmV3QWN0aXZlSW5kZXggPSB0aGlzLiRzbGlkZXIuZmluZCgnLmFjdGl2ZScpLmluZGV4KCk7XG4gICAgICAgIGlmICh0aGlzLiRzbGlkZXMubGVuZ3RoID09PSBuZXdBY3RpdmVJbmRleCArIDEpIG5ld0FjdGl2ZUluZGV4ID0gMDtcbiAgICAgICAgLy8gbG9vcCB0byBzdGFydFxuICAgICAgICBlbHNlIG5ld0FjdGl2ZUluZGV4ICs9IDE7XG5cbiAgICAgICAgdGhpcy5zZXQobmV3QWN0aXZlSW5kZXgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFuaW1hdGUgaW4gY2FwdGlvblxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBjYXB0aW9uXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gZHVyYXRpb25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlQ2FwdGlvbkluXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FuaW1hdGVDYXB0aW9uSW4oY2FwdGlvbiwgZHVyYXRpb24pIHtcbiAgICAgICAgdmFyIGFuaW1PcHRpb25zID0ge1xuICAgICAgICAgIHRhcmdldHM6IGNhcHRpb24sXG4gICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogZHVyYXRpb24sXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCQoY2FwdGlvbikuaGFzQ2xhc3MoJ2NlbnRlci1hbGlnbicpKSB7XG4gICAgICAgICAgYW5pbU9wdGlvbnMudHJhbnNsYXRlWSA9IC0xMDA7XG4gICAgICAgIH0gZWxzZSBpZiAoJChjYXB0aW9uKS5oYXNDbGFzcygncmlnaHQtYWxpZ24nKSkge1xuICAgICAgICAgIGFuaW1PcHRpb25zLnRyYW5zbGF0ZVggPSAxMDA7XG4gICAgICAgIH0gZWxzZSBpZiAoJChjYXB0aW9uKS5oYXNDbGFzcygnbGVmdC1hbGlnbicpKSB7XG4gICAgICAgICAgYW5pbU9wdGlvbnMudHJhbnNsYXRlWCA9IC0xMDA7XG4gICAgICAgIH1cblxuICAgICAgICBhbmltKGFuaW1PcHRpb25zKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXQgaGVpZ2h0IG9mIHNsaWRlclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldFNsaWRlckhlaWdodFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRTbGlkZXJIZWlnaHQoKSB7XG4gICAgICAgIC8vIElmIGZ1bGxzY3JlZW4sIGRvIG5vdGhpbmdcbiAgICAgICAgaWYgKCF0aGlzLiRlbC5oYXNDbGFzcygnZnVsbHNjcmVlbicpKSB7XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5pbmRpY2F0b3JzKSB7XG4gICAgICAgICAgICAvLyBBZGQgaGVpZ2h0IGlmIGluZGljYXRvcnMgYXJlIHByZXNlbnRcbiAgICAgICAgICAgIHRoaXMuJGVsLmNzcygnaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodCArIDQwICsgJ3B4Jyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmNzcygnaGVpZ2h0JywgdGhpcy5vcHRpb25zLmhlaWdodCArICdweCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLiRzbGlkZXIuY3NzKCdoZWlnaHQnLCB0aGlzLm9wdGlvbnMuaGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBpbmRpY2F0b3JzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBJbmRpY2F0b3JzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwSW5kaWNhdG9ycygpIHtcbiAgICAgICAgdmFyIF90aGlzNDMgPSB0aGlzO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuaW5kaWNhdG9ycykge1xuICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMgPSAkKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKTtcbiAgICAgICAgICB0aGlzLiRzbGlkZXMuZWFjaChmdW5jdGlvbiAoZWwsIGluZGV4KSB7XG4gICAgICAgICAgICB2YXIgJGluZGljYXRvciA9ICQoJzxsaSBjbGFzcz1cImluZGljYXRvci1pdGVtXCI+PC9saT4nKTtcbiAgICAgICAgICAgIF90aGlzNDMuJGluZGljYXRvcnMuYXBwZW5kKCRpbmRpY2F0b3JbMF0pO1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0aGlzLiRpbmRpY2F0b3JzWzBdKTtcbiAgICAgICAgICB0aGlzLiRpbmRpY2F0b3JzID0gdGhpcy4kaW5kaWNhdG9ycy5jaGlsZHJlbignbGkuaW5kaWNhdG9yLWl0ZW0nKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBpbmRpY2F0b3JzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlSW5kaWNhdG9yc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVJbmRpY2F0b3JzKCkge1xuICAgICAgICB0aGlzLiRlbC5maW5kKCd1bC5pbmRpY2F0b3JzJykucmVtb3ZlKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3ljbGUgdG8gbnRoIGl0ZW1cbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBpbmRleFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0KGluZGV4KSB7XG4gICAgICAgIHZhciBfdGhpczQ0ID0gdGhpcztcblxuICAgICAgICAvLyBXcmFwIGFyb3VuZCBpbmRpY2VzLlxuICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy4kc2xpZGVzLmxlbmd0aCkgaW5kZXggPSAwO2Vsc2UgaWYgKGluZGV4IDwgMCkgaW5kZXggPSB0aGlzLiRzbGlkZXMubGVuZ3RoIC0gMTtcblxuICAgICAgICAvLyBPbmx5IGRvIGlmIGluZGV4IGNoYW5nZXNcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlSW5kZXggIT0gaW5kZXgpIHtcbiAgICAgICAgICB0aGlzLiRhY3RpdmUgPSB0aGlzLiRzbGlkZXMuZXEodGhpcy5hY3RpdmVJbmRleCk7XG4gICAgICAgICAgdmFyICRjYXB0aW9uID0gdGhpcy4kYWN0aXZlLmZpbmQoJy5jYXB0aW9uJyk7XG4gICAgICAgICAgdGhpcy4kYWN0aXZlLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy4kYWN0aXZlWzBdLFxuICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICBjb21wbGV0ZTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBfdGhpczQ0LiRzbGlkZXMubm90KCcuYWN0aXZlJykuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgICAgICAgIHRhcmdldHM6IGVsLFxuICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMCxcbiAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZVg6IDAsXG4gICAgICAgICAgICAgICAgICB0cmFuc2xhdGVZOiAwLFxuICAgICAgICAgICAgICAgICAgZHVyYXRpb246IDAsXG4gICAgICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCdcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLl9hbmltYXRlQ2FwdGlvbkluKCRjYXB0aW9uWzBdLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pO1xuXG4gICAgICAgICAgLy8gVXBkYXRlIGluZGljYXRvcnNcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmluZGljYXRvcnMpIHtcbiAgICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZXEodGhpcy5hY3RpdmVJbmRleCkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5lcShpbmRleCkuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgdGFyZ2V0czogdGhpcy4kc2xpZGVzLmVxKGluZGV4KVswXSxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBkdXJhdGlvbjogdGhpcy5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBhbmltKHtcbiAgICAgICAgICAgIHRhcmdldHM6IHRoaXMuJHNsaWRlcy5lcShpbmRleCkuZmluZCgnLmNhcHRpb24nKVswXSxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICB0cmFuc2xhdGVYOiAwLFxuICAgICAgICAgICAgdHJhbnNsYXRlWTogMCxcbiAgICAgICAgICAgIGR1cmF0aW9uOiB0aGlzLm9wdGlvbnMuZHVyYXRpb24sXG4gICAgICAgICAgICBkZWxheTogdGhpcy5vcHRpb25zLmR1cmF0aW9uLFxuICAgICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1YWQnXG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICB0aGlzLiRzbGlkZXMuZXEoaW5kZXgpLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICB0aGlzLmFjdGl2ZUluZGV4ID0gaW5kZXg7XG5cbiAgICAgICAgICAvLyBSZXNldCBpbnRlcnZhbFxuICAgICAgICAgIHRoaXMuc3RhcnQoKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFBhdXNlIHNsaWRlciBpbnRlcnZhbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicGF1c2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwYXVzZSgpIHtcbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmludGVydmFsKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTdGFydCBzbGlkZXIgaW50ZXJ2YWxcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInN0YXJ0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQoKSB7XG4gICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XG4gICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLl9oYW5kbGVJbnRlcnZhbEJvdW5kLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gKyB0aGlzLm9wdGlvbnMuaW50ZXJ2YWwpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIE1vdmUgdG8gbmV4dCBzbGlkZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwibmV4dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5leHQoKSB7XG4gICAgICAgIHZhciBuZXdJbmRleCA9IHRoaXMuYWN0aXZlSW5kZXggKyAxO1xuXG4gICAgICAgIC8vIFdyYXAgYXJvdW5kIGluZGljZXMuXG4gICAgICAgIGlmIChuZXdJbmRleCA+PSB0aGlzLiRzbGlkZXMubGVuZ3RoKSBuZXdJbmRleCA9IDA7ZWxzZSBpZiAobmV3SW5kZXggPCAwKSBuZXdJbmRleCA9IHRoaXMuJHNsaWRlcy5sZW5ndGggLSAxO1xuXG4gICAgICAgIHRoaXMuc2V0KG5ld0luZGV4KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBNb3ZlIHRvIHByZXZpb3VzIHNsaWRlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJwcmV2XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcHJldigpIHtcbiAgICAgICAgdmFyIG5ld0luZGV4ID0gdGhpcy5hY3RpdmVJbmRleCAtIDE7XG5cbiAgICAgICAgLy8gV3JhcCBhcm91bmQgaW5kaWNlcy5cbiAgICAgICAgaWYgKG5ld0luZGV4ID49IHRoaXMuJHNsaWRlcy5sZW5ndGgpIG5ld0luZGV4ID0gMDtlbHNlIGlmIChuZXdJbmRleCA8IDApIG5ld0luZGV4ID0gdGhpcy4kc2xpZGVzLmxlbmd0aCAtIDE7XG5cbiAgICAgICAgdGhpcy5zZXQobmV3SW5kZXgpO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChTbGlkZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihTbGlkZXIpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9TbGlkZXI7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gU2xpZGVyO1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5TbGlkZXIgPSBTbGlkZXI7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihTbGlkZXIsICdzbGlkZXInLCAnTV9TbGlkZXInKTtcbiAgfVxufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICQoZG9jdW1lbnQpLm9uKCdjbGljaycsICcuY2FyZCcsIGZ1bmN0aW9uIChlKSB7XG4gICAgaWYgKCQodGhpcykuY2hpbGRyZW4oJy5jYXJkLXJldmVhbCcpLmxlbmd0aCkge1xuICAgICAgdmFyICRjYXJkID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNhcmQnKTtcbiAgICAgIGlmICgkY2FyZC5kYXRhKCdpbml0aWFsT3ZlcmZsb3cnKSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICRjYXJkLmRhdGEoJ2luaXRpYWxPdmVyZmxvdycsICRjYXJkLmNzcygnb3ZlcmZsb3cnKSA9PT0gdW5kZWZpbmVkID8gJycgOiAkY2FyZC5jc3MoJ292ZXJmbG93JykpO1xuICAgICAgfVxuICAgICAgdmFyICRjYXJkUmV2ZWFsID0gJCh0aGlzKS5maW5kKCcuY2FyZC1yZXZlYWwnKTtcbiAgICAgIGlmICgkKGUudGFyZ2V0KS5pcygkKCcuY2FyZC1yZXZlYWwgLmNhcmQtdGl0bGUnKSkgfHwgJChlLnRhcmdldCkuaXMoJCgnLmNhcmQtcmV2ZWFsIC5jYXJkLXRpdGxlIGknKSkpIHtcbiAgICAgICAgLy8gTWFrZSBSZXZlYWwgYW5pbWF0ZSBkb3duIGFuZCBkaXNwbGF5IG5vbmVcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogJGNhcmRSZXZlYWxbMF0sXG4gICAgICAgICAgdHJhbnNsYXRlWTogMCxcbiAgICAgICAgICBkdXJhdGlvbjogMjI1LFxuICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnLFxuICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoYW5pbSkge1xuICAgICAgICAgICAgdmFyIGVsID0gYW5pbS5hbmltYXRhYmxlc1swXS50YXJnZXQ7XG4gICAgICAgICAgICAkKGVsKS5jc3MoeyBkaXNwbGF5OiAnbm9uZScgfSk7XG4gICAgICAgICAgICAkY2FyZC5jc3MoJ292ZXJmbG93JywgJGNhcmQuZGF0YSgnaW5pdGlhbE92ZXJmbG93JykpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2UgaWYgKCQoZS50YXJnZXQpLmlzKCQoJy5jYXJkIC5hY3RpdmF0b3InKSkgfHwgJChlLnRhcmdldCkuaXMoJCgnLmNhcmQgLmFjdGl2YXRvciBpJykpKSB7XG4gICAgICAgICRjYXJkLmNzcygnb3ZlcmZsb3cnLCAnaGlkZGVuJyk7XG4gICAgICAgICRjYXJkUmV2ZWFsLmNzcyh7IGRpc3BsYXk6ICdibG9jaycgfSk7XG4gICAgICAgIGFuaW0oe1xuICAgICAgICAgIHRhcmdldHM6ICRjYXJkUmV2ZWFsWzBdLFxuICAgICAgICAgIHRyYW5zbGF0ZVk6ICctMTAwJScsXG4gICAgICAgICAgZHVyYXRpb246IDMwMCxcbiAgICAgICAgICBlYXNpbmc6ICdlYXNlSW5PdXRRdWFkJ1xuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xufSkoY2FzaCwgTS5hbmltZSk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGRhdGE6IFtdLFxuICAgIHBsYWNlaG9sZGVyOiAnJyxcbiAgICBzZWNvbmRhcnlQbGFjZWhvbGRlcjogJycsXG4gICAgYXV0b2NvbXBsZXRlT3B0aW9uczoge30sXG4gICAgbGltaXQ6IEluZmluaXR5LFxuICAgIG9uQ2hpcEFkZDogbnVsbCxcbiAgICBvbkNoaXBTZWxlY3Q6IG51bGwsXG4gICAgb25DaGlwRGVsZXRlOiBudWxsXG4gIH07XG5cbiAgLyoqXG4gICAqIEB0eXBlZGVmIHtPYmplY3R9IGNoaXBcbiAgICogQHByb3BlcnR5IHtTdHJpbmd9IHRhZyAgY2hpcCB0YWcgc3RyaW5nXG4gICAqIEBwcm9wZXJ0eSB7U3RyaW5nfSBbaW1hZ2VdICBjaGlwIGF2YXRhciBpbWFnZSBzdHJpbmdcbiAgICovXG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgQ2hpcHMgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDEyKSB7XG4gICAgX2luaGVyaXRzKENoaXBzLCBfQ29tcG9uZW50MTIpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IENoaXBzIGluc3RhbmNlIGFuZCBzZXQgdXAgb3ZlcmxheVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIENoaXBzKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2hpcHMpO1xuXG4gICAgICB2YXIgX3RoaXM0NSA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDaGlwcy5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENoaXBzKSkuY2FsbCh0aGlzLCBDaGlwcywgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM0NS5lbC5NX0NoaXBzID0gX3RoaXM0NTtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgbW9kYWxcbiAgICAgICAqIEBtZW1iZXIgQ2hpcHMjb3B0aW9uc1xuICAgICAgICogQHByb3Age0FycmF5fSBkYXRhXG4gICAgICAgKiBAcHJvcCB7U3RyaW5nfSBwbGFjZWhvbGRlclxuICAgICAgICogQHByb3Age1N0cmluZ30gc2Vjb25kYXJ5UGxhY2Vob2xkZXJcbiAgICAgICAqIEBwcm9wIHtPYmplY3R9IGF1dG9jb21wbGV0ZU9wdGlvbnNcbiAgICAgICAqL1xuICAgICAgX3RoaXM0NS5vcHRpb25zID0gJC5leHRlbmQoe30sIENoaXBzLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXM0NS4kZWwuYWRkQ2xhc3MoJ2NoaXBzIGlucHV0LWZpZWxkJyk7XG4gICAgICBfdGhpczQ1LmNoaXBzRGF0YSA9IFtdO1xuICAgICAgX3RoaXM0NS4kY2hpcHMgPSAkKCk7XG4gICAgICBfdGhpczQ1Ll9zZXR1cElucHV0KCk7XG4gICAgICBfdGhpczQ1Lmhhc0F1dG9jb21wbGV0ZSA9IE9iamVjdC5rZXlzKF90aGlzNDUub3B0aW9ucy5hdXRvY29tcGxldGVPcHRpb25zKS5sZW5ndGggPiAwO1xuXG4gICAgICAvLyBTZXQgaW5wdXQgaWRcbiAgICAgIGlmICghX3RoaXM0NS4kaW5wdXQuYXR0cignaWQnKSkge1xuICAgICAgICBfdGhpczQ1LiRpbnB1dC5hdHRyKCdpZCcsIE0uZ3VpZCgpKTtcbiAgICAgIH1cblxuICAgICAgLy8gUmVuZGVyIGluaXRpYWwgY2hpcHNcbiAgICAgIGlmIChfdGhpczQ1Lm9wdGlvbnMuZGF0YS5sZW5ndGgpIHtcbiAgICAgICAgX3RoaXM0NS5jaGlwc0RhdGEgPSBfdGhpczQ1Lm9wdGlvbnMuZGF0YTtcbiAgICAgICAgX3RoaXM0NS5fcmVuZGVyQ2hpcHMoX3RoaXM0NS5jaGlwc0RhdGEpO1xuICAgICAgfVxuXG4gICAgICAvLyBTZXR1cCBhdXRvY29tcGxldGUgaWYgbmVlZGVkXG4gICAgICBpZiAoX3RoaXM0NS5oYXNBdXRvY29tcGxldGUpIHtcbiAgICAgICAgX3RoaXM0NS5fc2V0dXBBdXRvY29tcGxldGUoKTtcbiAgICAgIH1cblxuICAgICAgX3RoaXM0NS5fc2V0UGxhY2Vob2xkZXIoKTtcbiAgICAgIF90aGlzNDUuX3NldHVwTGFiZWwoKTtcbiAgICAgIF90aGlzNDUuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzNDU7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENoaXBzLCBbe1xuICAgICAga2V5OiBcImdldERhdGFcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBDaGlwcyBEYXRhXG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXREYXRhKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5jaGlwc0RhdGE7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZXN0cm95XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLiRjaGlwcy5yZW1vdmUoKTtcbiAgICAgICAgdGhpcy5lbC5NX0NoaXBzID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2hpcENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVDaGlwQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRGb2N1c0JvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRGb2N1cy5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dEJsdXJCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0Qmx1ci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDaGlwQ2xpY2tCb3VuZCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBDaGlwcy5faGFuZGxlQ2hpcHNLZXlkb3duKTtcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5dXAnLCBDaGlwcy5faGFuZGxlQ2hpcHNLZXl1cCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIENoaXBzLl9oYW5kbGVDaGlwc0JsdXIsIHRydWUpO1xuICAgICAgICB0aGlzLiRpbnB1dFswXS5hZGRFdmVudExpc3RlbmVyKCdmb2N1cycsIHRoaXMuX2hhbmRsZUlucHV0Rm9jdXNCb3VuZCk7XG4gICAgICAgIHRoaXMuJGlucHV0WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVJbnB1dEJsdXJCb3VuZCk7XG4gICAgICAgIHRoaXMuJGlucHV0WzBdLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd25Cb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2hpcENsaWNrQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgQ2hpcHMuX2hhbmRsZUNoaXBzS2V5ZG93bik7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleXVwJywgQ2hpcHMuX2hhbmRsZUNoaXBzS2V5dXApO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCBDaGlwcy5faGFuZGxlQ2hpcHNCbHVyLCB0cnVlKTtcbiAgICAgICAgdGhpcy4kaW5wdXRbMF0ucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVJbnB1dEZvY3VzQm91bmQpO1xuICAgICAgICB0aGlzLiRpbnB1dFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCdibHVyJywgdGhpcy5faGFuZGxlSW5wdXRCbHVyQm91bmQpO1xuICAgICAgICB0aGlzLiRpbnB1dFswXS5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDaGlwIENsaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2hpcENsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNoaXBDbGljayhlKSB7XG4gICAgICAgIHZhciAkY2hpcCA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jaGlwJyk7XG4gICAgICAgIHZhciBjbGlja2VkQ2xvc2UgPSAkKGUudGFyZ2V0KS5pcygnLmNsb3NlJyk7XG4gICAgICAgIGlmICgkY2hpcC5sZW5ndGgpIHtcbiAgICAgICAgICB2YXIgaW5kZXggPSAkY2hpcC5pbmRleCgpO1xuICAgICAgICAgIGlmIChjbGlja2VkQ2xvc2UpIHtcbiAgICAgICAgICAgIC8vIGRlbGV0ZSBjaGlwXG4gICAgICAgICAgICB0aGlzLmRlbGV0ZUNoaXAoaW5kZXgpO1xuICAgICAgICAgICAgdGhpcy4kaW5wdXRbMF0uZm9jdXMoKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gc2VsZWN0IGNoaXBcbiAgICAgICAgICAgIHRoaXMuc2VsZWN0Q2hpcChpbmRleCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gRGVmYXVsdCBoYW5kbGUgY2xpY2sgdG8gZm9jdXMgb24gaW5wdXRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiRpbnB1dFswXS5mb2N1cygpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENoaXBzIEtleWRvd25cbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dEZvY3VzXCIsXG5cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW5wdXQgRm9jdXNcbiAgICAgICAqL1xuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEZvY3VzKCkge1xuICAgICAgICB0aGlzLiRlbC5hZGRDbGFzcygnZm9jdXMnKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW5wdXQgQmx1clxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0Qmx1clwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEJsdXIoKSB7XG4gICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdmb2N1cycpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBJbnB1dCBLZXlkb3duXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRLZXlkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUlucHV0S2V5ZG93bihlKSB7XG4gICAgICAgIENoaXBzLl9rZXlkb3duID0gdHJ1ZTtcblxuICAgICAgICAvLyBlbnRlclxuICAgICAgICBpZiAoZS5rZXlDb2RlID09PSAxMykge1xuICAgICAgICAgIC8vIE92ZXJyaWRlIGVudGVyIGlmIGF1dG9jb21wbGV0aW5nLlxuICAgICAgICAgIGlmICh0aGlzLmhhc0F1dG9jb21wbGV0ZSAmJiB0aGlzLmF1dG9jb21wbGV0ZSAmJiB0aGlzLmF1dG9jb21wbGV0ZS5pc09wZW4pIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5hZGRDaGlwKHtcbiAgICAgICAgICAgIHRhZzogdGhpcy4kaW5wdXRbMF0udmFsdWVcbiAgICAgICAgICB9KTtcbiAgICAgICAgICB0aGlzLiRpbnB1dFswXS52YWx1ZSA9ICcnO1xuXG4gICAgICAgICAgLy8gZGVsZXRlIG9yIGxlZnRcbiAgICAgICAgfSBlbHNlIGlmICgoZS5rZXlDb2RlID09PSA4IHx8IGUua2V5Q29kZSA9PT0gMzcpICYmIHRoaXMuJGlucHV0WzBdLnZhbHVlID09PSAnJyAmJiB0aGlzLmNoaXBzRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgdGhpcy5zZWxlY3RDaGlwKHRoaXMuY2hpcHNEYXRhLmxlbmd0aCAtIDEpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVuZGVyIENoaXBcbiAgICAgICAqIEBwYXJhbSB7Y2hpcH0gY2hpcFxuICAgICAgICogQHJldHVybiB7RWxlbWVudH1cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW5kZXJDaGlwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckNoaXAoY2hpcCkge1xuICAgICAgICBpZiAoIWNoaXAudGFnKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIHJlbmRlcmVkQ2hpcCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuICAgICAgICB2YXIgY2xvc2VJY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaScpO1xuICAgICAgICByZW5kZXJlZENoaXAuY2xhc3NMaXN0LmFkZCgnY2hpcCcpO1xuICAgICAgICByZW5kZXJlZENoaXAudGV4dENvbnRlbnQgPSBjaGlwLnRhZztcbiAgICAgICAgcmVuZGVyZWRDaGlwLnNldEF0dHJpYnV0ZSgndGFiaW5kZXgnLCAwKTtcbiAgICAgICAgJChjbG9zZUljb24pLmFkZENsYXNzKCdtYXRlcmlhbC1pY29ucyBjbG9zZScpO1xuICAgICAgICBjbG9zZUljb24udGV4dENvbnRlbnQgPSAnY2xvc2UnO1xuXG4gICAgICAgIC8vIGF0dGFjaCBpbWFnZSBpZiBuZWVkZWRcbiAgICAgICAgaWYgKGNoaXAuaW1hZ2UpIHtcbiAgICAgICAgICB2YXIgaW1nID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW1nJyk7XG4gICAgICAgICAgaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgY2hpcC5pbWFnZSk7XG4gICAgICAgICAgcmVuZGVyZWRDaGlwLmluc2VydEJlZm9yZShpbWcsIHJlbmRlcmVkQ2hpcC5maXJzdENoaWxkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJlbmRlcmVkQ2hpcC5hcHBlbmRDaGlsZChjbG9zZUljb24pO1xuICAgICAgICByZXR1cm4gcmVuZGVyZWRDaGlwO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbmRlciBDaGlwc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbmRlckNoaXBzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbmRlckNoaXBzKCkge1xuICAgICAgICB0aGlzLiRjaGlwcy5yZW1vdmUoKTtcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0aGlzLmNoaXBzRGF0YS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgIHZhciBjaGlwRWwgPSB0aGlzLl9yZW5kZXJDaGlwKHRoaXMuY2hpcHNEYXRhW2ldKTtcbiAgICAgICAgICB0aGlzLiRlbC5hcHBlbmQoY2hpcEVsKTtcbiAgICAgICAgICB0aGlzLiRjaGlwcy5hZGQoY2hpcEVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vdmUgaW5wdXQgdG8gZW5kXG4gICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0aGlzLiRpbnB1dFswXSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgQXV0b2NvbXBsZXRlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBBdXRvY29tcGxldGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBBdXRvY29tcGxldGUoKSB7XG4gICAgICAgIHZhciBfdGhpczQ2ID0gdGhpcztcblxuICAgICAgICB0aGlzLm9wdGlvbnMuYXV0b2NvbXBsZXRlT3B0aW9ucy5vbkF1dG9jb21wbGV0ZSA9IGZ1bmN0aW9uICh2YWwpIHtcbiAgICAgICAgICBfdGhpczQ2LmFkZENoaXAoe1xuICAgICAgICAgICAgdGFnOiB2YWxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBfdGhpczQ2LiRpbnB1dFswXS52YWx1ZSA9ICcnO1xuICAgICAgICAgIF90aGlzNDYuJGlucHV0WzBdLmZvY3VzKCk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5hdXRvY29tcGxldGUgPSBNLkF1dG9jb21wbGV0ZS5pbml0KHRoaXMuJGlucHV0WzBdLCB0aGlzLm9wdGlvbnMuYXV0b2NvbXBsZXRlT3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgSW5wdXRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cElucHV0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwSW5wdXQoKSB7XG4gICAgICAgIHRoaXMuJGlucHV0ID0gdGhpcy4kZWwuZmluZCgnaW5wdXQnKTtcbiAgICAgICAgaWYgKCF0aGlzLiRpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLiRpbnB1dCA9ICQoJzxpbnB1dD48L2lucHV0PicpO1xuICAgICAgICAgIHRoaXMuJGVsLmFwcGVuZCh0aGlzLiRpbnB1dCk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRpbnB1dC5hZGRDbGFzcygnaW5wdXQnKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBMYWJlbFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwTGFiZWxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBMYWJlbCgpIHtcbiAgICAgICAgdGhpcy4kbGFiZWwgPSB0aGlzLiRlbC5maW5kKCdsYWJlbCcpO1xuICAgICAgICBpZiAodGhpcy4kbGFiZWwubGVuZ3RoKSB7XG4gICAgICAgICAgdGhpcy4kbGFiZWwuc2V0QXR0cmlidXRlKCdmb3InLCB0aGlzLiRpbnB1dC5hdHRyKCdpZCcpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldCBwbGFjZWhvbGRlclxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldFBsYWNlaG9sZGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFBsYWNlaG9sZGVyKCkge1xuICAgICAgICBpZiAodGhpcy5jaGlwc0RhdGEgIT09IHVuZGVmaW5lZCAmJiAhdGhpcy5jaGlwc0RhdGEubGVuZ3RoICYmIHRoaXMub3B0aW9ucy5wbGFjZWhvbGRlcikge1xuICAgICAgICAgICQodGhpcy4kaW5wdXQpLnByb3AoJ3BsYWNlaG9sZGVyJywgdGhpcy5vcHRpb25zLnBsYWNlaG9sZGVyKTtcbiAgICAgICAgfSBlbHNlIGlmICgodGhpcy5jaGlwc0RhdGEgPT09IHVuZGVmaW5lZCB8fCAhIXRoaXMuY2hpcHNEYXRhLmxlbmd0aCkgJiYgdGhpcy5vcHRpb25zLnNlY29uZGFyeVBsYWNlaG9sZGVyKSB7XG4gICAgICAgICAgJCh0aGlzLiRpbnB1dCkucHJvcCgncGxhY2Vob2xkZXInLCB0aGlzLm9wdGlvbnMuc2Vjb25kYXJ5UGxhY2Vob2xkZXIpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2hlY2sgaWYgY2hpcCBpcyB2YWxpZFxuICAgICAgICogQHBhcmFtIHtjaGlwfSBjaGlwXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaXNWYWxpZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc1ZhbGlkKGNoaXApIHtcbiAgICAgICAgaWYgKGNoaXAuaGFzT3duUHJvcGVydHkoJ3RhZycpICYmIGNoaXAudGFnICE9PSAnJykge1xuICAgICAgICAgIHZhciBleGlzdHMgPSBmYWxzZTtcbiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuY2hpcHNEYXRhLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodGhpcy5jaGlwc0RhdGFbaV0udGFnID09PSBjaGlwLnRhZykge1xuICAgICAgICAgICAgICBleGlzdHMgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuICFleGlzdHM7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQWRkIGNoaXBcbiAgICAgICAqIEBwYXJhbSB7Y2hpcH0gY2hpcFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiYWRkQ2hpcFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGFkZENoaXAoY2hpcCkge1xuICAgICAgICBpZiAoIXRoaXMuX2lzVmFsaWQoY2hpcCkgfHwgdGhpcy5jaGlwc0RhdGEubGVuZ3RoID49IHRoaXMub3B0aW9ucy5saW1pdCkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByZW5kZXJlZENoaXAgPSB0aGlzLl9yZW5kZXJDaGlwKGNoaXApO1xuICAgICAgICB0aGlzLiRjaGlwcy5hZGQocmVuZGVyZWRDaGlwKTtcbiAgICAgICAgdGhpcy5jaGlwc0RhdGEucHVzaChjaGlwKTtcbiAgICAgICAgJCh0aGlzLiRpbnB1dCkuYmVmb3JlKHJlbmRlcmVkQ2hpcCk7XG4gICAgICAgIHRoaXMuX3NldFBsYWNlaG9sZGVyKCk7XG5cbiAgICAgICAgLy8gZmlyZSBjaGlwQWRkIGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uQ2hpcEFkZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNoaXBBZGQuY2FsbCh0aGlzLCB0aGlzLiRlbCwgcmVuZGVyZWRDaGlwKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIERlbGV0ZSBjaGlwXG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gY2hpcFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVsZXRlQ2hpcFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlbGV0ZUNoaXAoY2hpcEluZGV4KSB7XG4gICAgICAgIHZhciAkY2hpcCA9IHRoaXMuJGNoaXBzLmVxKGNoaXBJbmRleCk7XG4gICAgICAgIHRoaXMuJGNoaXBzLmVxKGNoaXBJbmRleCkucmVtb3ZlKCk7XG4gICAgICAgIHRoaXMuJGNoaXBzID0gdGhpcy4kY2hpcHMuZmlsdGVyKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIHJldHVybiAkKGVsKS5pbmRleCgpID49IDA7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmNoaXBzRGF0YS5zcGxpY2UoY2hpcEluZGV4LCAxKTtcbiAgICAgICAgdGhpcy5fc2V0UGxhY2Vob2xkZXIoKTtcblxuICAgICAgICAvLyBmaXJlIGNoaXBEZWxldGUgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DaGlwRGVsZXRlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2hpcERlbGV0ZS5jYWxsKHRoaXMsIHRoaXMuJGVsLCAkY2hpcFswXSk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZWxlY3QgY2hpcFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IGNoaXBcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInNlbGVjdENoaXBcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZWxlY3RDaGlwKGNoaXBJbmRleCkge1xuICAgICAgICB2YXIgJGNoaXAgPSB0aGlzLiRjaGlwcy5lcShjaGlwSW5kZXgpO1xuICAgICAgICB0aGlzLl9zZWxlY3RlZENoaXAgPSAkY2hpcDtcbiAgICAgICAgJGNoaXBbMF0uZm9jdXMoKTtcblxuICAgICAgICAvLyBmaXJlIGNoaXBTZWxlY3QgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DaGlwU2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2hpcFNlbGVjdC5jYWxsKHRoaXMsIHRoaXMuJGVsLCAkY2hpcFswXSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoQ2hpcHMuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDaGlwcyksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0NoaXBzO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2hpcHNLZXlkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNoaXBzS2V5ZG93bihlKSB7XG4gICAgICAgIENoaXBzLl9rZXlkb3duID0gdHJ1ZTtcblxuICAgICAgICB2YXIgJGNoaXBzID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNoaXBzJyk7XG4gICAgICAgIHZhciBjaGlwc0tleWRvd24gPSBlLnRhcmdldCAmJiAkY2hpcHMubGVuZ3RoO1xuXG4gICAgICAgIC8vIERvbid0IGhhbmRsZSBrZXlkb3duIGlucHV0cyBvbiBpbnB1dCBhbmQgdGV4dGFyZWFcbiAgICAgICAgaWYgKCQoZS50YXJnZXQpLmlzKCdpbnB1dCwgdGV4dGFyZWEnKSB8fCAhY2hpcHNLZXlkb3duKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGN1cnJDaGlwcyA9ICRjaGlwc1swXS5NX0NoaXBzO1xuXG4gICAgICAgIC8vIGJhY2tzcGFjZSBhbmQgZGVsZXRlXG4gICAgICAgIGlmIChlLmtleUNvZGUgPT09IDggfHwgZS5rZXlDb2RlID09PSA0Nikge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgIHZhciBzZWxlY3RJbmRleCA9IGN1cnJDaGlwcy5jaGlwc0RhdGEubGVuZ3RoO1xuICAgICAgICAgIGlmIChjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcCkge1xuICAgICAgICAgICAgdmFyIGluZGV4ID0gY3VyckNoaXBzLl9zZWxlY3RlZENoaXAuaW5kZXgoKTtcbiAgICAgICAgICAgIGN1cnJDaGlwcy5kZWxldGVDaGlwKGluZGV4KTtcbiAgICAgICAgICAgIGN1cnJDaGlwcy5fc2VsZWN0ZWRDaGlwID0gbnVsbDtcblxuICAgICAgICAgICAgLy8gTWFrZSBzdXJlIHNlbGVjdEluZGV4IGRvZXNuJ3QgZ28gbmVnYXRpdmVcbiAgICAgICAgICAgIHNlbGVjdEluZGV4ID0gTWF0aC5tYXgoaW5kZXggLSAxLCAwKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoY3VyckNoaXBzLmNoaXBzRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgIGN1cnJDaGlwcy5zZWxlY3RDaGlwKHNlbGVjdEluZGV4KTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBsZWZ0IGFycm93IGtleVxuICAgICAgICB9IGVsc2UgaWYgKGUua2V5Q29kZSA9PT0gMzcpIHtcbiAgICAgICAgICBpZiAoY3VyckNoaXBzLl9zZWxlY3RlZENoaXApIHtcbiAgICAgICAgICAgIHZhciBfc2VsZWN0SW5kZXggPSBjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcC5pbmRleCgpIC0gMTtcbiAgICAgICAgICAgIGlmIChfc2VsZWN0SW5kZXggPCAwKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGN1cnJDaGlwcy5zZWxlY3RDaGlwKF9zZWxlY3RJbmRleCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gcmlnaHQgYXJyb3cga2V5XG4gICAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSAzOSkge1xuICAgICAgICAgIGlmIChjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcCkge1xuICAgICAgICAgICAgdmFyIF9zZWxlY3RJbmRleDIgPSBjdXJyQ2hpcHMuX3NlbGVjdGVkQ2hpcC5pbmRleCgpICsgMTtcblxuICAgICAgICAgICAgaWYgKF9zZWxlY3RJbmRleDIgPj0gY3VyckNoaXBzLmNoaXBzRGF0YS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgY3VyckNoaXBzLiRpbnB1dFswXS5mb2N1cygpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgY3VyckNoaXBzLnNlbGVjdENoaXAoX3NlbGVjdEluZGV4Mik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENoaXBzIEtleXVwXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2hpcHNLZXl1cFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDaGlwc0tleXVwKGUpIHtcbiAgICAgICAgQ2hpcHMuX2tleWRvd24gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgQ2hpcHMgQmx1clxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNoaXBzQmx1clwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDaGlwc0JsdXIoZSkge1xuICAgICAgICBpZiAoIUNoaXBzLl9rZXlkb3duKSB7XG4gICAgICAgICAgdmFyICRjaGlwcyA9ICQoZS50YXJnZXQpLmNsb3Nlc3QoJy5jaGlwcycpO1xuICAgICAgICAgIHZhciBjdXJyQ2hpcHMgPSAkY2hpcHNbMF0uTV9DaGlwcztcblxuICAgICAgICAgIGN1cnJDaGlwcy5fc2VsZWN0ZWRDaGlwID0gbnVsbDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENoaXBzO1xuICB9KENvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIENoaXBzXG4gICAqL1xuXG5cbiAgQ2hpcHMuX2tleWRvd24gPSBmYWxzZTtcblxuICBNLkNoaXBzID0gQ2hpcHM7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihDaGlwcywgJ2NoaXBzJywgJ01fQ2hpcHMnKTtcbiAgfVxuXG4gICQoZG9jdW1lbnQpLnJlYWR5KGZ1bmN0aW9uICgpIHtcbiAgICAvLyBIYW5kbGUgcmVtb3ZhbCBvZiBzdGF0aWMgY2hpcHMuXG4gICAgJChkb2N1bWVudC5ib2R5KS5vbignY2xpY2snLCAnLmNoaXAgLmNsb3NlJywgZnVuY3Rpb24gKCkge1xuICAgICAgdmFyICRjaGlwcyA9ICQodGhpcykuY2xvc2VzdCgnLmNoaXBzJyk7XG4gICAgICBpZiAoJGNoaXBzLmxlbmd0aCAmJiAkY2hpcHNbMF0uTV9DaGlwcykge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoJy5jaGlwJykucmVtb3ZlKCk7XG4gICAgfSk7XG4gIH0pO1xufSkoY2FzaCk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIHRvcDogMCxcbiAgICBib3R0b206IEluZmluaXR5LFxuICAgIG9mZnNldDogMCxcbiAgICBvblBvc2l0aW9uQ2hhbmdlOiBudWxsXG4gIH07XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgUHVzaHBpbiA9IGZ1bmN0aW9uIChfQ29tcG9uZW50MTMpIHtcbiAgICBfaW5oZXJpdHMoUHVzaHBpbiwgX0NvbXBvbmVudDEzKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBQdXNocGluIGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gUHVzaHBpbihlbCwgb3B0aW9ucykge1xuICAgICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFB1c2hwaW4pO1xuXG4gICAgICB2YXIgX3RoaXM0NyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChQdXNocGluLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHVzaHBpbikpLmNhbGwodGhpcywgUHVzaHBpbiwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM0Ny5lbC5NX1B1c2hwaW4gPSBfdGhpczQ3O1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBtb2RhbFxuICAgICAgICogQG1lbWJlciBQdXNocGluI29wdGlvbnNcbiAgICAgICAqL1xuICAgICAgX3RoaXM0Ny5vcHRpb25zID0gJC5leHRlbmQoe30sIFB1c2hwaW4uZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICBfdGhpczQ3Lm9yaWdpbmFsT2Zmc2V0ID0gX3RoaXM0Ny5lbC5vZmZzZXRUb3A7XG4gICAgICBQdXNocGluLl9wdXNocGlucy5wdXNoKF90aGlzNDcpO1xuICAgICAgX3RoaXM0Ny5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICBfdGhpczQ3Ll91cGRhdGVQb3NpdGlvbigpO1xuICAgICAgcmV0dXJuIF90aGlzNDc7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKFB1c2hwaW4sIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLmVsLnN0eWxlLnRvcCA9IG51bGw7XG4gICAgICAgIHRoaXMuX3JlbW92ZVBpbkNsYXNzZXMoKTtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuXG4gICAgICAgIC8vIFJlbW92ZSBwdXNocGluIEluc3RcbiAgICAgICAgdmFyIGluZGV4ID0gUHVzaHBpbi5fcHVzaHBpbnMuaW5kZXhPZih0aGlzKTtcbiAgICAgICAgUHVzaHBpbi5fcHVzaHBpbnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIFB1c2hwaW4uX3VwZGF0ZUVsZW1lbnRzKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZUV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgUHVzaHBpbi5fdXBkYXRlRWxlbWVudHMpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdXBkYXRlUG9zaXRpb25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlUG9zaXRpb24oKSB7XG4gICAgICAgIHZhciBzY3JvbGxlZCA9IE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKSArIHRoaXMub3B0aW9ucy5vZmZzZXQ7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50b3AgPD0gc2Nyb2xsZWQgJiYgdGhpcy5vcHRpb25zLmJvdHRvbSA+PSBzY3JvbGxlZCAmJiAhdGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bpbm5lZCcpKSB7XG4gICAgICAgICAgdGhpcy5fcmVtb3ZlUGluQ2xhc3NlcygpO1xuICAgICAgICAgIHRoaXMuZWwuc3R5bGUudG9wID0gdGhpcy5vcHRpb25zLm9mZnNldCArIFwicHhcIjtcbiAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Bpbm5lZCcpO1xuXG4gICAgICAgICAgLy8gb25Qb3NpdGlvbkNoYW5nZSBjYWxsYmFja1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uUG9zaXRpb25DaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblBvc2l0aW9uQ2hhbmdlLmNhbGwodGhpcywgJ3Bpbm5lZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBwaW4tdG9wICh3aGVuIHNjcm9sbGVkIHBvc2l0aW9uIGlzIGFib3ZlIHRvcClcbiAgICAgICAgaWYgKHNjcm9sbGVkIDwgdGhpcy5vcHRpb25zLnRvcCAmJiAhdGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bpbi10b3AnKSkge1xuICAgICAgICAgIHRoaXMuX3JlbW92ZVBpbkNsYXNzZXMoKTtcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRvcCA9IDA7XG4gICAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QuYWRkKCdwaW4tdG9wJyk7XG5cbiAgICAgICAgICAvLyBvblBvc2l0aW9uQ2hhbmdlIGNhbGxiYWNrXG4gICAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25Qb3NpdGlvbkNoYW5nZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5vcHRpb25zLm9uUG9zaXRpb25DaGFuZ2UuY2FsbCh0aGlzLCAncGluLXRvcCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBwaW4tYm90dG9tICh3aGVuIHNjcm9sbGVkIHBvc2l0aW9uIGlzIGJlbG93IGJvdHRvbSlcbiAgICAgICAgaWYgKHNjcm9sbGVkID4gdGhpcy5vcHRpb25zLmJvdHRvbSAmJiAhdGhpcy5lbC5jbGFzc0xpc3QuY29udGFpbnMoJ3Bpbi1ib3R0b20nKSkge1xuICAgICAgICAgIHRoaXMuX3JlbW92ZVBpbkNsYXNzZXMoKTtcbiAgICAgICAgICB0aGlzLmVsLmNsYXNzTGlzdC5hZGQoJ3Bpbi1ib3R0b20nKTtcbiAgICAgICAgICB0aGlzLmVsLnN0eWxlLnRvcCA9IHRoaXMub3B0aW9ucy5ib3R0b20gLSB0aGlzLm9yaWdpbmFsT2Zmc2V0ICsgXCJweFwiO1xuXG4gICAgICAgICAgLy8gb25Qb3NpdGlvbkNoYW5nZSBjYWxsYmFja1xuICAgICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uUG9zaXRpb25DaGFuZ2UgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIHRoaXMub3B0aW9ucy5vblBvc2l0aW9uQ2hhbmdlLmNhbGwodGhpcywgJ3Bpbi1ib3R0b20nKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3JlbW92ZVBpbkNsYXNzZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlUGluQ2xhc3NlcygpIHtcbiAgICAgICAgLy8gSUUgMTEgYnVnIChjYW4ndCByZW1vdmUgbXVsdGlwbGUgY2xhc3NlcyBpbiBvbmUgbGluZSlcbiAgICAgICAgdGhpcy5lbC5jbGFzc0xpc3QucmVtb3ZlKCdwaW4tdG9wJyk7XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgncGlubmVkJyk7XG4gICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LnJlbW92ZSgncGluLWJvdHRvbScpO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChQdXNocGluLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoUHVzaHBpbiksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1B1c2hwaW47XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl91cGRhdGVFbGVtZW50c1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVFbGVtZW50cygpIHtcbiAgICAgICAgZm9yICh2YXIgZWxJbmRleCBpbiBQdXNocGluLl9wdXNocGlucykge1xuICAgICAgICAgIHZhciBwSW5zdGFuY2UgPSBQdXNocGluLl9wdXNocGluc1tlbEluZGV4XTtcbiAgICAgICAgICBwSW5zdGFuY2UuX3VwZGF0ZVBvc2l0aW9uKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBQdXNocGluO1xuICB9KENvbXBvbmVudCk7XG5cbiAgLyoqXG4gICAqIEBzdGF0aWNcbiAgICogQG1lbWJlcm9mIFB1c2hwaW5cbiAgICovXG5cblxuICBQdXNocGluLl9wdXNocGlucyA9IFtdO1xuXG4gIE0uUHVzaHBpbiA9IFB1c2hwaW47XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihQdXNocGluLCAncHVzaHBpbicsICdNX1B1c2hwaW4nKTtcbiAgfVxufSkoY2FzaCk7XG47KGZ1bmN0aW9uICgkLCBhbmltKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGRpcmVjdGlvbjogJ3RvcCcsXG4gICAgaG92ZXJFbmFibGVkOiB0cnVlLFxuICAgIHRvb2xiYXJFbmFibGVkOiBmYWxzZVxuICB9O1xuXG4gICQuZm4ucmV2ZXJzZSA9IFtdLnJldmVyc2U7XG5cbiAgLyoqXG4gICAqIEBjbGFzc1xuICAgKlxuICAgKi9cblxuICB2YXIgRmxvYXRpbmdBY3Rpb25CdXR0b24gPSBmdW5jdGlvbiAoX0NvbXBvbmVudDE0KSB7XG4gICAgX2luaGVyaXRzKEZsb2F0aW5nQWN0aW9uQnV0dG9uLCBfQ29tcG9uZW50MTQpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IEZsb2F0aW5nQWN0aW9uQnV0dG9uIGluc3RhbmNlXG4gICAgICogQGNvbnN0cnVjdG9yXG4gICAgICogQHBhcmFtIHtFbGVtZW50fSBlbFxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBvcHRpb25zXG4gICAgICovXG4gICAgZnVuY3Rpb24gRmxvYXRpbmdBY3Rpb25CdXR0b24oZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBGbG9hdGluZ0FjdGlvbkJ1dHRvbik7XG5cbiAgICAgIHZhciBfdGhpczQ4ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZsb2F0aW5nQWN0aW9uQnV0dG9uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmxvYXRpbmdBY3Rpb25CdXR0b24pKS5jYWxsKHRoaXMsIEZsb2F0aW5nQWN0aW9uQnV0dG9uLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczQ4LmVsLk1fRmxvYXRpbmdBY3Rpb25CdXR0b24gPSBfdGhpczQ4O1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBmYWJcbiAgICAgICAqIEBtZW1iZXIgRmxvYXRpbmdBY3Rpb25CdXR0b24jb3B0aW9uc1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFtkaXJlY3Rpb25dIC0gRGlyZWN0aW9uIGZhYiBtZW51IG9wZW5zXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gW2hvdmVyRW5hYmxlZD10cnVlXSAtIEVuYWJsZSBob3ZlciB2cyBjbGlja1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IFt0b29sYmFyRW5hYmxlZD1mYWxzZV0gLSBFbmFibGUgdG9vbGJhciB0cmFuc2l0aW9uXG4gICAgICAgKi9cbiAgICAgIF90aGlzNDgub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBGbG9hdGluZ0FjdGlvbkJ1dHRvbi5kZWZhdWx0cywgb3B0aW9ucyk7XG5cbiAgICAgIF90aGlzNDguaXNPcGVuID0gZmFsc2U7XG4gICAgICBfdGhpczQ4LiRhbmNob3IgPSBfdGhpczQ4LiRlbC5jaGlsZHJlbignYScpLmZpcnN0KCk7XG4gICAgICBfdGhpczQ4LiRtZW51ID0gX3RoaXM0OC4kZWwuY2hpbGRyZW4oJ3VsJykuZmlyc3QoKTtcbiAgICAgIF90aGlzNDguJGZsb2F0aW5nQnRucyA9IF90aGlzNDguJGVsLmZpbmQoJ3VsIC5idG4tZmxvYXRpbmcnKTtcbiAgICAgIF90aGlzNDguJGZsb2F0aW5nQnRuc1JldmVyc2UgPSBfdGhpczQ4LiRlbC5maW5kKCd1bCAuYnRuLWZsb2F0aW5nJykucmV2ZXJzZSgpO1xuICAgICAgX3RoaXM0OC5vZmZzZXRZID0gMDtcbiAgICAgIF90aGlzNDgub2Zmc2V0WCA9IDA7XG5cbiAgICAgIF90aGlzNDguJGVsLmFkZENsYXNzKFwiZGlyZWN0aW9uLVwiICsgX3RoaXM0OC5vcHRpb25zLmRpcmVjdGlvbik7XG4gICAgICBpZiAoX3RoaXM0OC5vcHRpb25zLmRpcmVjdGlvbiA9PT0gJ3RvcCcpIHtcbiAgICAgICAgX3RoaXM0OC5vZmZzZXRZID0gNDA7XG4gICAgICB9IGVsc2UgaWYgKF90aGlzNDgub3B0aW9ucy5kaXJlY3Rpb24gPT09ICdyaWdodCcpIHtcbiAgICAgICAgX3RoaXM0OC5vZmZzZXRYID0gLTQwO1xuICAgICAgfSBlbHNlIGlmIChfdGhpczQ4Lm9wdGlvbnMuZGlyZWN0aW9uID09PSAnYm90dG9tJykge1xuICAgICAgICBfdGhpczQ4Lm9mZnNldFkgPSAtNDA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfdGhpczQ4Lm9mZnNldFggPSA0MDtcbiAgICAgIH1cbiAgICAgIF90aGlzNDguX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzNDg7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEZsb2F0aW5nQWN0aW9uQnV0dG9uLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLk1fRmxvYXRpbmdBY3Rpb25CdXR0b24gPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLl9oYW5kbGVGQUJDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlRkFCQ2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlT3BlbkJvdW5kID0gdGhpcy5vcGVuLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNsb3NlQm91bmQgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5ob3ZlckVuYWJsZWQgJiYgIXRoaXMub3B0aW9ucy50b29sYmFyRW5hYmxlZCkge1xuICAgICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsIHRoaXMuX2hhbmRsZU9wZW5Cb3VuZCk7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlQ2xvc2VCb3VuZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUZBQkNsaWNrQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmhvdmVyRW5hYmxlZCAmJiAhdGhpcy5vcHRpb25zLnRvb2xiYXJFbmFibGVkKSB7XG4gICAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgdGhpcy5faGFuZGxlT3BlbkJvdW5kKTtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCB0aGlzLl9oYW5kbGVDbG9zZUJvdW5kKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRkFCQ2xpY2tCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgRkFCIENsaWNrXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRkFCQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRkFCQ2xpY2soKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBEb2N1bWVudCBDbGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURvY3VtZW50Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRG9jdW1lbnRDbGljayhlKSB7XG4gICAgICAgIGlmICghJChlLnRhcmdldCkuY2xvc2VzdCh0aGlzLiRtZW51KS5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIEZBQlxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib3BlblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9vbGJhckVuYWJsZWQpIHtcbiAgICAgICAgICB0aGlzLl9hbmltYXRlSW5Ub29sYmFyKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0ZUluRkFCKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc09wZW4gPSB0cnVlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENsb3NlIEZBQlxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudG9vbGJhckVuYWJsZWQpIHtcbiAgICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcignc2Nyb2xsJywgdGhpcy5faGFuZGxlQ2xvc2VCb3VuZCwgdHJ1ZSk7XG4gICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7XG4gICAgICAgICAgdGhpcy5fYW5pbWF0ZU91dFRvb2xiYXIoKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLl9hbmltYXRlT3V0RkFCKCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDbGFzc2ljIEZBQiBNZW51IG9wZW5cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hbmltYXRlSW5GQUJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluRkFCKCkge1xuICAgICAgICB2YXIgX3RoaXM0OSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXG4gICAgICAgIHZhciB0aW1lID0gMDtcbiAgICAgICAgdGhpcy4kZmxvYXRpbmdCdG5zUmV2ZXJzZS5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgdGFyZ2V0czogZWwsXG4gICAgICAgICAgICBvcGFjaXR5OiAxLFxuICAgICAgICAgICAgc2NhbGU6IFswLjQsIDFdLFxuICAgICAgICAgICAgdHJhbnNsYXRlWTogW190aGlzNDkub2Zmc2V0WSwgMF0sXG4gICAgICAgICAgICB0cmFuc2xhdGVYOiBbX3RoaXM0OS5vZmZzZXRYLCAwXSxcbiAgICAgICAgICAgIGR1cmF0aW9uOiAyNzUsXG4gICAgICAgICAgICBkZWxheTogdGltZSxcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VJbk91dFF1YWQnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgdGltZSArPSA0MDtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2xhc3NpYyBGQUIgTWVudSBjbG9zZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVPdXRGQUJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU91dEZBQigpIHtcbiAgICAgICAgdmFyIF90aGlzNTAgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuJGZsb2F0aW5nQnRuc1JldmVyc2UuZWFjaChmdW5jdGlvbiAoZWwpIHtcbiAgICAgICAgICBhbmltLnJlbW92ZShlbCk7XG4gICAgICAgICAgYW5pbSh7XG4gICAgICAgICAgICB0YXJnZXRzOiBlbCxcbiAgICAgICAgICAgIG9wYWNpdHk6IDAsXG4gICAgICAgICAgICBzY2FsZTogMC40LFxuICAgICAgICAgICAgdHJhbnNsYXRlWTogX3RoaXM1MC5vZmZzZXRZLFxuICAgICAgICAgICAgdHJhbnNsYXRlWDogX3RoaXM1MC5vZmZzZXRYLFxuICAgICAgICAgICAgZHVyYXRpb246IDE3NSxcbiAgICAgICAgICAgIGVhc2luZzogJ2Vhc2VPdXRRdWFkJyxcbiAgICAgICAgICAgIGNvbXBsZXRlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIF90aGlzNTAuJGVsLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVG9vbGJhciB0cmFuc2l0aW9uIE1lbnUgb3BlblxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FuaW1hdGVJblRvb2xiYXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZUluVG9vbGJhcigpIHtcbiAgICAgICAgdmFyIF90aGlzNTEgPSB0aGlzO1xuXG4gICAgICAgIHZhciBzY2FsZUZhY3RvciA9IHZvaWQgMDtcbiAgICAgICAgdmFyIHdpbmRvd1dpZHRoID0gd2luZG93LmlubmVyV2lkdGg7XG4gICAgICAgIHZhciB3aW5kb3dIZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG4gICAgICAgIHZhciBidG5SZWN0ID0gdGhpcy5lbC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIGJhY2tkcm9wID0gJCgnPGRpdiBjbGFzcz1cImZhYi1iYWNrZHJvcFwiPjwvZGl2PicpO1xuICAgICAgICB2YXIgZmFiQ29sb3IgPSB0aGlzLiRhbmNob3IuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG4gICAgICAgIHRoaXMuJGFuY2hvci5hcHBlbmQoYmFja2Ryb3ApO1xuXG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IGJ0blJlY3QubGVmdCAtIHdpbmRvd1dpZHRoIC8gMiArIGJ0blJlY3Qud2lkdGggLyAyO1xuICAgICAgICB0aGlzLm9mZnNldFkgPSB3aW5kb3dIZWlnaHQgLSBidG5SZWN0LmJvdHRvbTtcbiAgICAgICAgc2NhbGVGYWN0b3IgPSB3aW5kb3dXaWR0aCAvIGJhY2tkcm9wWzBdLmNsaWVudFdpZHRoO1xuICAgICAgICB0aGlzLmJ0bkJvdHRvbSA9IGJ0blJlY3QuYm90dG9tO1xuICAgICAgICB0aGlzLmJ0bkxlZnQgPSBidG5SZWN0LmxlZnQ7XG4gICAgICAgIHRoaXMuYnRuV2lkdGggPSBidG5SZWN0LndpZHRoO1xuXG4gICAgICAgIC8vIFNldCBpbml0aWFsIHN0YXRlXG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgdGhpcy4kZWwuY3NzKHtcbiAgICAgICAgICAndGV4dC1hbGlnbic6ICdjZW50ZXInLFxuICAgICAgICAgIHdpZHRoOiAnMTAwJScsXG4gICAgICAgICAgYm90dG9tOiAwLFxuICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlWCgnICsgdGhpcy5vZmZzZXRYICsgJ3B4KScsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJ25vbmUnXG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLiRhbmNob3IuY3NzKHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGVZKCcgKyAtdGhpcy5vZmZzZXRZICsgJ3B4KScsXG4gICAgICAgICAgdHJhbnNpdGlvbjogJ25vbmUnXG4gICAgICAgIH0pO1xuICAgICAgICBiYWNrZHJvcC5jc3Moe1xuICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogZmFiQ29sb3JcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgX3RoaXM1MS4kZWwuY3NzKHtcbiAgICAgICAgICAgIHRyYW5zZm9ybTogJycsXG4gICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycyBjdWJpYy1iZXppZXIoMC41NTAsIDAuMDg1LCAwLjY4MCwgMC41MzApLCBiYWNrZ3JvdW5kLWNvbG9yIDBzIGxpbmVhciAuMnMnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgX3RoaXM1MS4kYW5jaG9yLmNzcyh7XG4gICAgICAgICAgICBvdmVyZmxvdzogJ3Zpc2libGUnLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiAnJyxcbiAgICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczUxLiRlbC5jc3Moe1xuICAgICAgICAgICAgICBvdmVyZmxvdzogJ2hpZGRlbicsXG4gICAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogZmFiQ29sb3JcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgYmFja2Ryb3AuY3NzKHtcbiAgICAgICAgICAgICAgdHJhbnNmb3JtOiAnc2NhbGUoJyArIHNjYWxlRmFjdG9yICsgJyknLFxuICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycyBjdWJpYy1iZXppZXIoMC41NTAsIDAuMDU1LCAwLjY3NSwgMC4xOTApJ1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBfdGhpczUxLiRtZW51LmNoaWxkcmVuKCdsaScpLmNoaWxkcmVuKCdhJykuY3NzKHtcbiAgICAgICAgICAgICAgb3BhY2l0eTogMVxuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIFNjcm9sbCB0byBjbG9zZS5cbiAgICAgICAgICAgIF90aGlzNTEuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCA9IF90aGlzNTEuX2hhbmRsZURvY3VtZW50Q2xpY2suYmluZChfdGhpczUxKTtcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBfdGhpczUxLl9oYW5kbGVDbG9zZUJvdW5kLCB0cnVlKTtcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczUxLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQsIHRydWUpO1xuICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgIH0sIDApO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFRvb2xiYXIgdHJhbnNpdGlvbiBNZW51IGNsb3NlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYW5pbWF0ZU91dFRvb2xiYXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYW5pbWF0ZU91dFRvb2xiYXIoKSB7XG4gICAgICAgIHZhciBfdGhpczUyID0gdGhpcztcblxuICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdmFyIGJhY2tkcm9wID0gdGhpcy4kZWwuZmluZCgnLmZhYi1iYWNrZHJvcCcpO1xuICAgICAgICB2YXIgZmFiQ29sb3IgPSB0aGlzLiRhbmNob3IuY3NzKCdiYWNrZ3JvdW5kLWNvbG9yJyk7XG5cbiAgICAgICAgdGhpcy5vZmZzZXRYID0gdGhpcy5idG5MZWZ0IC0gd2luZG93V2lkdGggLyAyICsgdGhpcy5idG5XaWR0aCAvIDI7XG4gICAgICAgIHRoaXMub2Zmc2V0WSA9IHdpbmRvd0hlaWdodCAtIHRoaXMuYnRuQm90dG9tO1xuXG4gICAgICAgIC8vIEhpZGUgYmFja2Ryb3BcbiAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICB0aGlzLiRlbC5jc3Moe1xuICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICB0cmFuc2l0aW9uOiAnbm9uZSdcbiAgICAgICAgfSk7XG4gICAgICAgIHRoaXMuJGFuY2hvci5jc3Moe1xuICAgICAgICAgIHRyYW5zaXRpb246ICdub25lJ1xuICAgICAgICB9KTtcbiAgICAgICAgYmFja2Ryb3AuY3NzKHtcbiAgICAgICAgICB0cmFuc2Zvcm06ICdzY2FsZSgwKScsXG4gICAgICAgICAgJ2JhY2tncm91bmQtY29sb3InOiBmYWJDb2xvclxuICAgICAgICB9KTtcbiAgICAgICAgdGhpcy4kbWVudS5jaGlsZHJlbignbGknKS5jaGlsZHJlbignYScpLmNzcyh7XG4gICAgICAgICAgb3BhY2l0eTogJydcbiAgICAgICAgfSk7XG5cbiAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgYmFja2Ryb3AucmVtb3ZlKCk7XG5cbiAgICAgICAgICAvLyBTZXQgaW5pdGlhbCBzdGF0ZS5cbiAgICAgICAgICBfdGhpczUyLiRlbC5jc3Moe1xuICAgICAgICAgICAgJ3RleHQtYWxpZ24nOiAnJyxcbiAgICAgICAgICAgIHdpZHRoOiAnJyxcbiAgICAgICAgICAgIGJvdHRvbTogJycsXG4gICAgICAgICAgICBsZWZ0OiAnJyxcbiAgICAgICAgICAgIG92ZXJmbG93OiAnJyxcbiAgICAgICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogJycsXG4gICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgnICsgLV90aGlzNTIub2Zmc2V0WCArICdweCwwLDApJ1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIF90aGlzNTIuJGFuY2hvci5jc3Moe1xuICAgICAgICAgICAgb3ZlcmZsb3c6ICcnLFxuICAgICAgICAgICAgdHJhbnNmb3JtOiAndHJhbnNsYXRlM2QoMCwnICsgX3RoaXM1Mi5vZmZzZXRZICsgJ3B4LDApJ1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczUyLiRlbC5jc3Moe1xuICAgICAgICAgICAgICB0cmFuc2Zvcm06ICd0cmFuc2xhdGUzZCgwLDAsMCknLFxuICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAndHJhbnNmb3JtIC4ycydcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RoaXM1Mi4kYW5jaG9yLmNzcyh7XG4gICAgICAgICAgICAgIHRyYW5zZm9ybTogJ3RyYW5zbGF0ZTNkKDAsMCwwKScsXG4gICAgICAgICAgICAgIHRyYW5zaXRpb246ICd0cmFuc2Zvcm0gLjJzIGN1YmljLWJlemllcigwLjU1MCwgMC4wNTUsIDAuNjc1LCAwLjE5MCknXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9LCAyMCk7XG4gICAgICAgIH0sIDIwMCk7XG4gICAgICB9XG4gICAgfV0sIFt7XG4gICAgICBrZXk6IFwiaW5pdFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGluaXQoZWxzLCBvcHRpb25zKSB7XG4gICAgICAgIHJldHVybiBfZ2V0KEZsb2F0aW5nQWN0aW9uQnV0dG9uLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRmxvYXRpbmdBY3Rpb25CdXR0b24pLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9GbG9hdGluZ0FjdGlvbkJ1dHRvbjtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZGVmYXVsdHNcIixcbiAgICAgIGdldDogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gX2RlZmF1bHRzO1xuICAgICAgfVxuICAgIH1dKTtcblxuICAgIHJldHVybiBGbG9hdGluZ0FjdGlvbkJ1dHRvbjtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uRmxvYXRpbmdBY3Rpb25CdXR0b24gPSBGbG9hdGluZ0FjdGlvbkJ1dHRvbjtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKEZsb2F0aW5nQWN0aW9uQnV0dG9uLCAnZmxvYXRpbmdBY3Rpb25CdXR0b24nLCAnTV9GbG9hdGluZ0FjdGlvbkJ1dHRvbicpO1xuICB9XG59KShjYXNoLCBNLmFuaW1lKTtcbjsoZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7XG4gICAgLy8gQ2xvc2Ugd2hlbiBkYXRlIGlzIHNlbGVjdGVkXG4gICAgYXV0b0Nsb3NlOiBmYWxzZSxcblxuICAgIC8vIHRoZSBkZWZhdWx0IG91dHB1dCBmb3JtYXQgZm9yIHRoZSBpbnB1dCBmaWVsZCB2YWx1ZVxuICAgIGZvcm1hdDogJ21tbSBkZCwgeXl5eScsXG5cbiAgICAvLyBVc2VkIHRvIGNyZWF0ZSBkYXRlIG9iamVjdCBmcm9tIGN1cnJlbnQgaW5wdXQgc3RyaW5nXG4gICAgcGFyc2U6IG51bGwsXG5cbiAgICAvLyBUaGUgaW5pdGlhbCBkYXRlIHRvIHZpZXcgd2hlbiBmaXJzdCBvcGVuZWRcbiAgICBkZWZhdWx0RGF0ZTogbnVsbCxcblxuICAgIC8vIE1ha2UgdGhlIGBkZWZhdWx0RGF0ZWAgdGhlIGluaXRpYWwgc2VsZWN0ZWQgdmFsdWVcbiAgICBzZXREZWZhdWx0RGF0ZTogZmFsc2UsXG5cbiAgICBkaXNhYmxlV2Vla2VuZHM6IGZhbHNlLFxuXG4gICAgZGlzYWJsZURheUZuOiBudWxsLFxuXG4gICAgLy8gRmlyc3QgZGF5IG9mIHdlZWsgKDA6IFN1bmRheSwgMTogTW9uZGF5IGV0YylcbiAgICBmaXJzdERheTogMCxcblxuICAgIC8vIFRoZSBlYXJsaWVzdCBkYXRlIHRoYXQgY2FuIGJlIHNlbGVjdGVkXG4gICAgbWluRGF0ZTogbnVsbCxcbiAgICAvLyBUaGVsYXRlc3QgZGF0ZSB0aGF0IGNhbiBiZSBzZWxlY3RlZFxuICAgIG1heERhdGU6IG51bGwsXG5cbiAgICAvLyBOdW1iZXIgb2YgeWVhcnMgZWl0aGVyIHNpZGUsIG9yIGFycmF5IG9mIHVwcGVyL2xvd2VyIHJhbmdlXG4gICAgeWVhclJhbmdlOiAxMCxcblxuICAgIC8vIHVzZWQgaW50ZXJuYWxseSAoZG9uJ3QgY29uZmlnIG91dHNpZGUpXG4gICAgbWluWWVhcjogMCxcbiAgICBtYXhZZWFyOiA5OTk5LFxuICAgIG1pbk1vbnRoOiB1bmRlZmluZWQsXG4gICAgbWF4TW9udGg6IHVuZGVmaW5lZCxcblxuICAgIHN0YXJ0UmFuZ2U6IG51bGwsXG4gICAgZW5kUmFuZ2U6IG51bGwsXG5cbiAgICBpc1JUTDogZmFsc2UsXG5cbiAgICAvLyBSZW5kZXIgdGhlIG1vbnRoIGFmdGVyIHllYXIgaW4gdGhlIGNhbGVuZGFyIHRpdGxlXG4gICAgc2hvd01vbnRoQWZ0ZXJZZWFyOiBmYWxzZSxcblxuICAgIC8vIFJlbmRlciBkYXlzIG9mIHRoZSBjYWxlbmRhciBncmlkIHRoYXQgZmFsbCBpbiB0aGUgbmV4dCBvciBwcmV2aW91cyBtb250aFxuICAgIHNob3dEYXlzSW5OZXh0QW5kUHJldmlvdXNNb250aHM6IGZhbHNlLFxuXG4gICAgLy8gU3BlY2lmeSBhIERPTSBlbGVtZW50IHRvIHJlbmRlciB0aGUgY2FsZW5kYXIgaW5cbiAgICBjb250YWluZXI6IG51bGwsXG5cbiAgICAvLyBTaG93IGNsZWFyIGJ1dHRvblxuICAgIHNob3dDbGVhckJ0bjogZmFsc2UsXG5cbiAgICAvLyBpbnRlcm5hdGlvbmFsaXphdGlvblxuICAgIGkxOG46IHtcbiAgICAgIGNhbmNlbDogJ0NhbmNlbCcsXG4gICAgICBjbGVhcjogJ0NsZWFyJyxcbiAgICAgIGRvbmU6ICdPaycsXG4gICAgICBwcmV2aW91c01vbnRoOiAn4oC5JyxcbiAgICAgIG5leHRNb250aDogJ+KAuicsXG4gICAgICBtb250aHM6IFsnSmFudWFyeScsICdGZWJydWFyeScsICdNYXJjaCcsICdBcHJpbCcsICdNYXknLCAnSnVuZScsICdKdWx5JywgJ0F1Z3VzdCcsICdTZXB0ZW1iZXInLCAnT2N0b2JlcicsICdOb3ZlbWJlcicsICdEZWNlbWJlciddLFxuICAgICAgbW9udGhzU2hvcnQ6IFsnSmFuJywgJ0ZlYicsICdNYXInLCAnQXByJywgJ01heScsICdKdW4nLCAnSnVsJywgJ0F1ZycsICdTZXAnLCAnT2N0JywgJ05vdicsICdEZWMnXSxcbiAgICAgIHdlZWtkYXlzOiBbJ1N1bmRheScsICdNb25kYXknLCAnVHVlc2RheScsICdXZWRuZXNkYXknLCAnVGh1cnNkYXknLCAnRnJpZGF5JywgJ1NhdHVyZGF5J10sXG4gICAgICB3ZWVrZGF5c1Nob3J0OiBbJ1N1bicsICdNb24nLCAnVHVlJywgJ1dlZCcsICdUaHUnLCAnRnJpJywgJ1NhdCddLFxuICAgICAgd2Vla2RheXNBYmJyZXY6IFsnUycsICdNJywgJ1QnLCAnVycsICdUJywgJ0YnLCAnUyddXG4gICAgfSxcblxuICAgIC8vIGV2ZW50cyBhcnJheVxuICAgIGV2ZW50czogW10sXG5cbiAgICAvLyBjYWxsYmFjayBmdW5jdGlvblxuICAgIG9uU2VsZWN0OiBudWxsLFxuICAgIG9uT3BlbjogbnVsbCxcbiAgICBvbkNsb3NlOiBudWxsLFxuICAgIG9uRHJhdzogbnVsbFxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIERhdGVwaWNrZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDE1KSB7XG4gICAgX2luaGVyaXRzKERhdGVwaWNrZXIsIF9Db21wb25lbnQxNSk7XG5cbiAgICAvKipcbiAgICAgKiBDb25zdHJ1Y3QgRGF0ZXBpY2tlciBpbnN0YW5jZSBhbmQgc2V0IHVwIG92ZXJsYXlcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBEYXRlcGlja2VyKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGF0ZXBpY2tlcik7XG5cbiAgICAgIHZhciBfdGhpczUzID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKERhdGVwaWNrZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihEYXRlcGlja2VyKSkuY2FsbCh0aGlzLCBEYXRlcGlja2VyLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczUzLmVsLk1fRGF0ZXBpY2tlciA9IF90aGlzNTM7XG5cbiAgICAgIF90aGlzNTMub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBEYXRlcGlja2VyLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLy8gbWFrZSBzdXJlIGkxOG4gZGVmYXVsdHMgYXJlIG5vdCBsb3N0IHdoZW4gb25seSBmZXcgaTE4biBvcHRpb24gcHJvcGVydGllcyBhcmUgcGFzc2VkXG4gICAgICBpZiAoISFvcHRpb25zICYmIG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2kxOG4nKSAmJiB0eXBlb2Ygb3B0aW9ucy5pMThuID09PSAnb2JqZWN0Jykge1xuICAgICAgICBfdGhpczUzLm9wdGlvbnMuaTE4biA9ICQuZXh0ZW5kKHt9LCBEYXRlcGlja2VyLmRlZmF1bHRzLmkxOG4sIG9wdGlvbnMuaTE4bik7XG4gICAgICB9XG5cbiAgICAgIC8vIFJlbW92ZSB0aW1lIGNvbXBvbmVudCBmcm9tIG1pbkRhdGUgYW5kIG1heERhdGUgb3B0aW9uc1xuICAgICAgaWYgKF90aGlzNTMub3B0aW9ucy5taW5EYXRlKSBfdGhpczUzLm9wdGlvbnMubWluRGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIGlmIChfdGhpczUzLm9wdGlvbnMubWF4RGF0ZSkgX3RoaXM1My5vcHRpb25zLm1heERhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG5cbiAgICAgIF90aGlzNTMuaWQgPSBNLmd1aWQoKTtcblxuICAgICAgX3RoaXM1My5fc2V0dXBWYXJpYWJsZXMoKTtcbiAgICAgIF90aGlzNTMuX2luc2VydEhUTUxJbnRvRE9NKCk7XG4gICAgICBfdGhpczUzLl9zZXR1cE1vZGFsKCk7XG5cbiAgICAgIF90aGlzNTMuX3NldHVwRXZlbnRIYW5kbGVycygpO1xuXG4gICAgICBpZiAoIV90aGlzNTMub3B0aW9ucy5kZWZhdWx0RGF0ZSkge1xuICAgICAgICBfdGhpczUzLm9wdGlvbnMuZGVmYXVsdERhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKF90aGlzNTMuZWwudmFsdWUpKTtcbiAgICAgIH1cblxuICAgICAgdmFyIGRlZkRhdGUgPSBfdGhpczUzLm9wdGlvbnMuZGVmYXVsdERhdGU7XG4gICAgICBpZiAoRGF0ZXBpY2tlci5faXNEYXRlKGRlZkRhdGUpKSB7XG4gICAgICAgIGlmIChfdGhpczUzLm9wdGlvbnMuc2V0RGVmYXVsdERhdGUpIHtcbiAgICAgICAgICBfdGhpczUzLnNldERhdGUoZGVmRGF0ZSwgdHJ1ZSk7XG4gICAgICAgICAgX3RoaXM1My5zZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgX3RoaXM1My5nb3RvRGF0ZShkZWZEYXRlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3RoaXM1My5nb3RvRGF0ZShuZXcgRGF0ZSgpKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBEZXNjcmliZXMgb3Blbi9jbG9zZSBzdGF0ZSBvZiBkYXRlcGlja2VyXG4gICAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cbiAgICAgICAqL1xuICAgICAgX3RoaXM1My5pc09wZW4gPSBmYWxzZTtcbiAgICAgIHJldHVybiBfdGhpczUzO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhEYXRlcGlja2VyLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLm1vZGFsLmRlc3Ryb3koKTtcbiAgICAgICAgJCh0aGlzLm1vZGFsRWwpLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmRlc3Ryb3lTZWxlY3RzKCk7XG4gICAgICAgIHRoaXMuZWwuTV9EYXRlcGlja2VyID0gdW5kZWZpbmVkO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZXN0cm95U2VsZWN0c1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGRlc3Ryb3lTZWxlY3RzKCkge1xuICAgICAgICB2YXIgb2xkWWVhclNlbGVjdCA9IHRoaXMuY2FsZW5kYXJFbC5xdWVyeVNlbGVjdG9yKCcub3JpZy1zZWxlY3QteWVhcicpO1xuICAgICAgICBpZiAob2xkWWVhclNlbGVjdCkge1xuICAgICAgICAgIE0uRm9ybVNlbGVjdC5nZXRJbnN0YW5jZShvbGRZZWFyU2VsZWN0KS5kZXN0cm95KCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG9sZE1vbnRoU2VsZWN0ID0gdGhpcy5jYWxlbmRhckVsLnF1ZXJ5U2VsZWN0b3IoJy5vcmlnLXNlbGVjdC1tb250aCcpO1xuICAgICAgICBpZiAob2xkTW9udGhTZWxlY3QpIHtcbiAgICAgICAgICBNLkZvcm1TZWxlY3QuZ2V0SW5zdGFuY2Uob2xkTW9udGhTZWxlY3QpLmRlc3Ryb3koKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaW5zZXJ0SFRNTEludG9ET01cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaW5zZXJ0SFRNTEludG9ET00oKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hvd0NsZWFyQnRuKSB7XG4gICAgICAgICAgJCh0aGlzLmNsZWFyQnRuKS5jc3MoeyB2aXNpYmlsaXR5OiAnJyB9KTtcbiAgICAgICAgICB0aGlzLmNsZWFyQnRuLmlubmVySFRNTCA9IHRoaXMub3B0aW9ucy5pMThuLmNsZWFyO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kb25lQnRuLmlubmVySFRNTCA9IHRoaXMub3B0aW9ucy5pMThuLmRvbmU7XG4gICAgICAgIHRoaXMuY2FuY2VsQnRuLmlubmVySFRNTCA9IHRoaXMub3B0aW9ucy5pMThuLmNhbmNlbDtcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLmNvbnRhaW5lcikge1xuICAgICAgICAgIHRoaXMuJG1vZGFsRWwuYXBwZW5kVG8odGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy4kbW9kYWxFbC5pbnNlcnRCZWZvcmUodGhpcy5lbCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwTW9kYWxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBNb2RhbCgpIHtcbiAgICAgICAgdmFyIF90aGlzNTQgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMubW9kYWxFbC5pZCA9ICdtb2RhbC0nICsgdGhpcy5pZDtcbiAgICAgICAgdGhpcy5tb2RhbCA9IE0uTW9kYWwuaW5pdCh0aGlzLm1vZGFsRWwsIHtcbiAgICAgICAgICBvbkNsb3NlRW5kOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBfdGhpczU0LmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInRvU3RyaW5nXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdG9TdHJpbmcoZm9ybWF0KSB7XG4gICAgICAgIHZhciBfdGhpczU1ID0gdGhpcztcblxuICAgICAgICBmb3JtYXQgPSBmb3JtYXQgfHwgdGhpcy5vcHRpb25zLmZvcm1hdDtcbiAgICAgICAgaWYgKCFEYXRlcGlja2VyLl9pc0RhdGUodGhpcy5kYXRlKSkge1xuICAgICAgICAgIHJldHVybiAnJztcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBmb3JtYXRBcnJheSA9IGZvcm1hdC5zcGxpdCgvKGR7MSw0fXxtezEsNH18eXs0fXx5eXwhLikvZyk7XG4gICAgICAgIHZhciBmb3JtYXR0ZWREYXRlID0gZm9ybWF0QXJyYXkubWFwKGZ1bmN0aW9uIChsYWJlbCkge1xuICAgICAgICAgIGlmIChfdGhpczU1LmZvcm1hdHNbbGFiZWxdKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM1NS5mb3JtYXRzW2xhYmVsXSgpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHJldHVybiBsYWJlbDtcbiAgICAgICAgfSkuam9pbignJyk7XG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWREYXRlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXREYXRlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0RGF0ZShkYXRlLCBwcmV2ZW50T25TZWxlY3QpIHtcbiAgICAgICAgaWYgKCFkYXRlKSB7XG4gICAgICAgICAgdGhpcy5kYXRlID0gbnVsbDtcbiAgICAgICAgICB0aGlzLl9yZW5kZXJEYXRlRGlzcGxheSgpO1xuICAgICAgICAgIHJldHVybiB0aGlzLmRyYXcoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodHlwZW9mIGRhdGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgZGF0ZSA9IG5ldyBEYXRlKERhdGUucGFyc2UoZGF0ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmICghRGF0ZXBpY2tlci5faXNEYXRlKGRhdGUpKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG1pbiA9IHRoaXMub3B0aW9ucy5taW5EYXRlLFxuICAgICAgICAgICAgbWF4ID0gdGhpcy5vcHRpb25zLm1heERhdGU7XG5cbiAgICAgICAgaWYgKERhdGVwaWNrZXIuX2lzRGF0ZShtaW4pICYmIGRhdGUgPCBtaW4pIHtcbiAgICAgICAgICBkYXRlID0gbWluO1xuICAgICAgICB9IGVsc2UgaWYgKERhdGVwaWNrZXIuX2lzRGF0ZShtYXgpICYmIGRhdGUgPiBtYXgpIHtcbiAgICAgICAgICBkYXRlID0gbWF4O1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kYXRlID0gbmV3IERhdGUoZGF0ZS5nZXRUaW1lKCkpO1xuXG4gICAgICAgIHRoaXMuX3JlbmRlckRhdGVEaXNwbGF5KCk7XG5cbiAgICAgICAgRGF0ZXBpY2tlci5fc2V0VG9TdGFydE9mRGF5KHRoaXMuZGF0ZSk7XG4gICAgICAgIHRoaXMuZ290b0RhdGUodGhpcy5kYXRlKTtcblxuICAgICAgICBpZiAoIXByZXZlbnRPblNlbGVjdCAmJiB0eXBlb2YgdGhpcy5vcHRpb25zLm9uU2VsZWN0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uU2VsZWN0LmNhbGwodGhpcywgdGhpcy5kYXRlKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXRJbnB1dFZhbHVlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2V0SW5wdXRWYWx1ZSgpIHtcbiAgICAgICAgdGhpcy5lbC52YWx1ZSA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICAgICAgdGhpcy4kZWwudHJpZ2dlcignY2hhbmdlJywgeyBmaXJlZEJ5OiB0aGlzIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVuZGVyRGF0ZURpc3BsYXlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVuZGVyRGF0ZURpc3BsYXkoKSB7XG4gICAgICAgIHZhciBkaXNwbGF5RGF0ZSA9IERhdGVwaWNrZXIuX2lzRGF0ZSh0aGlzLmRhdGUpID8gdGhpcy5kYXRlIDogbmV3IERhdGUoKTtcbiAgICAgICAgdmFyIGkxOG4gPSB0aGlzLm9wdGlvbnMuaTE4bjtcbiAgICAgICAgdmFyIGRheSA9IGkxOG4ud2Vla2RheXNTaG9ydFtkaXNwbGF5RGF0ZS5nZXREYXkoKV07XG4gICAgICAgIHZhciBtb250aCA9IGkxOG4ubW9udGhzU2hvcnRbZGlzcGxheURhdGUuZ2V0TW9udGgoKV07XG4gICAgICAgIHZhciBkYXRlID0gZGlzcGxheURhdGUuZ2V0RGF0ZSgpO1xuICAgICAgICB0aGlzLnllYXJUZXh0RWwuaW5uZXJIVE1MID0gZGlzcGxheURhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgdGhpcy5kYXRlVGV4dEVsLmlubmVySFRNTCA9IGRheSArIFwiLCBcIiArIG1vbnRoICsgXCIgXCIgKyBkYXRlO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIGNoYW5nZSB2aWV3IHRvIGEgc3BlY2lmaWMgZGF0ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ290b0RhdGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnb3RvRGF0ZShkYXRlKSB7XG4gICAgICAgIHZhciBuZXdDYWxlbmRhciA9IHRydWU7XG5cbiAgICAgICAgaWYgKCFEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jYWxlbmRhcnMpIHtcbiAgICAgICAgICB2YXIgZmlyc3RWaXNpYmxlRGF0ZSA9IG5ldyBEYXRlKHRoaXMuY2FsZW5kYXJzWzBdLnllYXIsIHRoaXMuY2FsZW5kYXJzWzBdLm1vbnRoLCAxKSxcbiAgICAgICAgICAgICAgbGFzdFZpc2libGVEYXRlID0gbmV3IERhdGUodGhpcy5jYWxlbmRhcnNbdGhpcy5jYWxlbmRhcnMubGVuZ3RoIC0gMV0ueWVhciwgdGhpcy5jYWxlbmRhcnNbdGhpcy5jYWxlbmRhcnMubGVuZ3RoIC0gMV0ubW9udGgsIDEpLFxuICAgICAgICAgICAgICB2aXNpYmxlRGF0ZSA9IGRhdGUuZ2V0VGltZSgpO1xuICAgICAgICAgIC8vIGdldCB0aGUgZW5kIG9mIHRoZSBtb250aFxuICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZS5zZXRNb250aChsYXN0VmlzaWJsZURhdGUuZ2V0TW9udGgoKSArIDEpO1xuICAgICAgICAgIGxhc3RWaXNpYmxlRGF0ZS5zZXREYXRlKGxhc3RWaXNpYmxlRGF0ZS5nZXREYXRlKCkgLSAxKTtcbiAgICAgICAgICBuZXdDYWxlbmRhciA9IHZpc2libGVEYXRlIDwgZmlyc3RWaXNpYmxlRGF0ZS5nZXRUaW1lKCkgfHwgbGFzdFZpc2libGVEYXRlLmdldFRpbWUoKSA8IHZpc2libGVEYXRlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG5ld0NhbGVuZGFyKSB7XG4gICAgICAgICAgdGhpcy5jYWxlbmRhcnMgPSBbe1xuICAgICAgICAgICAgbW9udGg6IGRhdGUuZ2V0TW9udGgoKSxcbiAgICAgICAgICAgIHllYXI6IGRhdGUuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgIH1dO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiYWRqdXN0Q2FsZW5kYXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gYWRqdXN0Q2FsZW5kYXJzKCkge1xuICAgICAgICB0aGlzLmNhbGVuZGFyc1swXSA9IHRoaXMuYWRqdXN0Q2FsZW5kYXIodGhpcy5jYWxlbmRhcnNbMF0pO1xuICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiYWRqdXN0Q2FsZW5kYXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBhZGp1c3RDYWxlbmRhcihjYWxlbmRhcikge1xuICAgICAgICBpZiAoY2FsZW5kYXIubW9udGggPCAwKSB7XG4gICAgICAgICAgY2FsZW5kYXIueWVhciAtPSBNYXRoLmNlaWwoTWF0aC5hYnMoY2FsZW5kYXIubW9udGgpIC8gMTIpO1xuICAgICAgICAgIGNhbGVuZGFyLm1vbnRoICs9IDEyO1xuICAgICAgICB9XG4gICAgICAgIGlmIChjYWxlbmRhci5tb250aCA+IDExKSB7XG4gICAgICAgICAgY2FsZW5kYXIueWVhciArPSBNYXRoLmZsb29yKE1hdGguYWJzKGNhbGVuZGFyLm1vbnRoKSAvIDEyKTtcbiAgICAgICAgICBjYWxlbmRhci5tb250aCAtPSAxMjtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY2FsZW5kYXI7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIm5leHRNb250aFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG5leHRNb250aCgpIHtcbiAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGgrKztcbiAgICAgICAgdGhpcy5hZGp1c3RDYWxlbmRhcnMoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicHJldk1vbnRoXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcHJldk1vbnRoKCkge1xuICAgICAgICB0aGlzLmNhbGVuZGFyc1swXS5tb250aC0tO1xuICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZW5kZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXIoeWVhciwgbW9udGgsIHJhbmRJZCkge1xuICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIG5vdyA9IG5ldyBEYXRlKCksXG4gICAgICAgICAgICBkYXlzID0gRGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeWVhciwgbW9udGgpLFxuICAgICAgICAgICAgYmVmb3JlID0gbmV3IERhdGUoeWVhciwgbW9udGgsIDEpLmdldERheSgpLFxuICAgICAgICAgICAgZGF0YSA9IFtdLFxuICAgICAgICAgICAgcm93ID0gW107XG4gICAgICAgIERhdGVwaWNrZXIuX3NldFRvU3RhcnRPZkRheShub3cpO1xuICAgICAgICBpZiAob3B0cy5maXJzdERheSA+IDApIHtcbiAgICAgICAgICBiZWZvcmUgLT0gb3B0cy5maXJzdERheTtcbiAgICAgICAgICBpZiAoYmVmb3JlIDwgMCkge1xuICAgICAgICAgICAgYmVmb3JlICs9IDc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHZhciBwcmV2aW91c01vbnRoID0gbW9udGggPT09IDAgPyAxMSA6IG1vbnRoIC0gMSxcbiAgICAgICAgICAgIG5leHRNb250aCA9IG1vbnRoID09PSAxMSA/IDAgOiBtb250aCArIDEsXG4gICAgICAgICAgICB5ZWFyT2ZQcmV2aW91c01vbnRoID0gbW9udGggPT09IDAgPyB5ZWFyIC0gMSA6IHllYXIsXG4gICAgICAgICAgICB5ZWFyT2ZOZXh0TW9udGggPSBtb250aCA9PT0gMTEgPyB5ZWFyICsgMSA6IHllYXIsXG4gICAgICAgICAgICBkYXlzSW5QcmV2aW91c01vbnRoID0gRGF0ZXBpY2tlci5fZ2V0RGF5c0luTW9udGgoeWVhck9mUHJldmlvdXNNb250aCwgcHJldmlvdXNNb250aCk7XG4gICAgICAgIHZhciBjZWxscyA9IGRheXMgKyBiZWZvcmUsXG4gICAgICAgICAgICBhZnRlciA9IGNlbGxzO1xuICAgICAgICB3aGlsZSAoYWZ0ZXIgPiA3KSB7XG4gICAgICAgICAgYWZ0ZXIgLT0gNztcbiAgICAgICAgfVxuICAgICAgICBjZWxscyArPSA3IC0gYWZ0ZXI7XG4gICAgICAgIHZhciBpc1dlZWtTZWxlY3RlZCA9IGZhbHNlO1xuICAgICAgICBmb3IgKHZhciBpID0gMCwgciA9IDA7IGkgPCBjZWxsczsgaSsrKSB7XG4gICAgICAgICAgdmFyIGRheSA9IG5ldyBEYXRlKHllYXIsIG1vbnRoLCAxICsgKGkgLSBiZWZvcmUpKSxcbiAgICAgICAgICAgICAgaXNTZWxlY3RlZCA9IERhdGVwaWNrZXIuX2lzRGF0ZSh0aGlzLmRhdGUpID8gRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKGRheSwgdGhpcy5kYXRlKSA6IGZhbHNlLFxuICAgICAgICAgICAgICBpc1RvZGF5ID0gRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKGRheSwgbm93KSxcbiAgICAgICAgICAgICAgaGFzRXZlbnQgPSBvcHRzLmV2ZW50cy5pbmRleE9mKGRheS50b0RhdGVTdHJpbmcoKSkgIT09IC0xID8gdHJ1ZSA6IGZhbHNlLFxuICAgICAgICAgICAgICBpc0VtcHR5ID0gaSA8IGJlZm9yZSB8fCBpID49IGRheXMgKyBiZWZvcmUsXG4gICAgICAgICAgICAgIGRheU51bWJlciA9IDEgKyAoaSAtIGJlZm9yZSksXG4gICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbW9udGgsXG4gICAgICAgICAgICAgIHllYXJOdW1iZXIgPSB5ZWFyLFxuICAgICAgICAgICAgICBpc1N0YXJ0UmFuZ2UgPSBvcHRzLnN0YXJ0UmFuZ2UgJiYgRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKG9wdHMuc3RhcnRSYW5nZSwgZGF5KSxcbiAgICAgICAgICAgICAgaXNFbmRSYW5nZSA9IG9wdHMuZW5kUmFuZ2UgJiYgRGF0ZXBpY2tlci5fY29tcGFyZURhdGVzKG9wdHMuZW5kUmFuZ2UsIGRheSksXG4gICAgICAgICAgICAgIGlzSW5SYW5nZSA9IG9wdHMuc3RhcnRSYW5nZSAmJiBvcHRzLmVuZFJhbmdlICYmIG9wdHMuc3RhcnRSYW5nZSA8IGRheSAmJiBkYXkgPCBvcHRzLmVuZFJhbmdlLFxuICAgICAgICAgICAgICBpc0Rpc2FibGVkID0gb3B0cy5taW5EYXRlICYmIGRheSA8IG9wdHMubWluRGF0ZSB8fCBvcHRzLm1heERhdGUgJiYgZGF5ID4gb3B0cy5tYXhEYXRlIHx8IG9wdHMuZGlzYWJsZVdlZWtlbmRzICYmIERhdGVwaWNrZXIuX2lzV2Vla2VuZChkYXkpIHx8IG9wdHMuZGlzYWJsZURheUZuICYmIG9wdHMuZGlzYWJsZURheUZuKGRheSk7XG5cbiAgICAgICAgICBpZiAoaXNFbXB0eSkge1xuICAgICAgICAgICAgaWYgKGkgPCBiZWZvcmUpIHtcbiAgICAgICAgICAgICAgZGF5TnVtYmVyID0gZGF5c0luUHJldmlvdXNNb250aCArIGRheU51bWJlcjtcbiAgICAgICAgICAgICAgbW9udGhOdW1iZXIgPSBwcmV2aW91c01vbnRoO1xuICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhck9mUHJldmlvdXNNb250aDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgIGRheU51bWJlciA9IGRheU51bWJlciAtIGRheXM7XG4gICAgICAgICAgICAgIG1vbnRoTnVtYmVyID0gbmV4dE1vbnRoO1xuICAgICAgICAgICAgICB5ZWFyTnVtYmVyID0geWVhck9mTmV4dE1vbnRoO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciBkYXlDb25maWcgPSB7XG4gICAgICAgICAgICBkYXk6IGRheU51bWJlcixcbiAgICAgICAgICAgIG1vbnRoOiBtb250aE51bWJlcixcbiAgICAgICAgICAgIHllYXI6IHllYXJOdW1iZXIsXG4gICAgICAgICAgICBoYXNFdmVudDogaGFzRXZlbnQsXG4gICAgICAgICAgICBpc1NlbGVjdGVkOiBpc1NlbGVjdGVkLFxuICAgICAgICAgICAgaXNUb2RheTogaXNUb2RheSxcbiAgICAgICAgICAgIGlzRGlzYWJsZWQ6IGlzRGlzYWJsZWQsXG4gICAgICAgICAgICBpc0VtcHR5OiBpc0VtcHR5LFxuICAgICAgICAgICAgaXNTdGFydFJhbmdlOiBpc1N0YXJ0UmFuZ2UsXG4gICAgICAgICAgICBpc0VuZFJhbmdlOiBpc0VuZFJhbmdlLFxuICAgICAgICAgICAgaXNJblJhbmdlOiBpc0luUmFuZ2UsXG4gICAgICAgICAgICBzaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzOiBvcHRzLnNob3dEYXlzSW5OZXh0QW5kUHJldmlvdXNNb250aHNcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgcm93LnB1c2godGhpcy5yZW5kZXJEYXkoZGF5Q29uZmlnKSk7XG5cbiAgICAgICAgICBpZiAoKytyID09PSA3KSB7XG4gICAgICAgICAgICBkYXRhLnB1c2godGhpcy5yZW5kZXJSb3cocm93LCBvcHRzLmlzUlRMLCBpc1dlZWtTZWxlY3RlZCkpO1xuICAgICAgICAgICAgcm93ID0gW107XG4gICAgICAgICAgICByID0gMDtcbiAgICAgICAgICAgIGlzV2Vla1NlbGVjdGVkID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0aGlzLnJlbmRlclRhYmxlKG9wdHMsIGRhdGEsIHJhbmRJZCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlckRheVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckRheShvcHRzKSB7XG4gICAgICAgIHZhciBhcnIgPSBbXTtcbiAgICAgICAgdmFyIGFyaWFTZWxlY3RlZCA9ICdmYWxzZSc7XG4gICAgICAgIGlmIChvcHRzLmlzRW1wdHkpIHtcbiAgICAgICAgICBpZiAob3B0cy5zaG93RGF5c0luTmV4dEFuZFByZXZpb3VzTW9udGhzKSB7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtb3V0c2lkZS1jdXJyZW50LW1vbnRoJyk7XG4gICAgICAgICAgICBhcnIucHVzaCgnaXMtc2VsZWN0aW9uLWRpc2FibGVkJyk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHJldHVybiAnPHRkIGNsYXNzPVwiaXMtZW1wdHlcIj48L3RkPic7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzRGlzYWJsZWQpIHtcbiAgICAgICAgICBhcnIucHVzaCgnaXMtZGlzYWJsZWQnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChvcHRzLmlzVG9kYXkpIHtcbiAgICAgICAgICBhcnIucHVzaCgnaXMtdG9kYXknKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc1NlbGVjdGVkKSB7XG4gICAgICAgICAgYXJyLnB1c2goJ2lzLXNlbGVjdGVkJyk7XG4gICAgICAgICAgYXJpYVNlbGVjdGVkID0gJ3RydWUnO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmhhc0V2ZW50KSB7XG4gICAgICAgICAgYXJyLnB1c2goJ2hhcy1ldmVudCcpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLmlzSW5SYW5nZSkge1xuICAgICAgICAgIGFyci5wdXNoKCdpcy1pbnJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKG9wdHMuaXNTdGFydFJhbmdlKSB7XG4gICAgICAgICAgYXJyLnB1c2goJ2lzLXN0YXJ0cmFuZ2UnKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAob3B0cy5pc0VuZFJhbmdlKSB7XG4gICAgICAgICAgYXJyLnB1c2goJ2lzLWVuZHJhbmdlJyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIFwiPHRkIGRhdGEtZGF5PVxcXCJcIiArIG9wdHMuZGF5ICsgXCJcXFwiIGNsYXNzPVxcXCJcIiArIGFyci5qb2luKCcgJykgKyBcIlxcXCIgYXJpYS1zZWxlY3RlZD1cXFwiXCIgKyBhcmlhU2VsZWN0ZWQgKyBcIlxcXCI+XCIgKyAoXCI8YnV0dG9uIGNsYXNzPVxcXCJkYXRlcGlja2VyLWRheS1idXR0b25cXFwiIHR5cGU9XFxcImJ1dHRvblxcXCIgZGF0YS15ZWFyPVxcXCJcIiArIG9wdHMueWVhciArIFwiXFxcIiBkYXRhLW1vbnRoPVxcXCJcIiArIG9wdHMubW9udGggKyBcIlxcXCIgZGF0YS1kYXk9XFxcIlwiICsgb3B0cy5kYXkgKyBcIlxcXCI+XCIgKyBvcHRzLmRheSArIFwiPC9idXR0b24+XCIpICsgJzwvdGQ+JztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVuZGVyUm93XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyUm93KGRheXMsIGlzUlRMLCBpc1Jvd1NlbGVjdGVkKSB7XG4gICAgICAgIHJldHVybiAnPHRyIGNsYXNzPVwiZGF0ZXBpY2tlci1yb3cnICsgKGlzUm93U2VsZWN0ZWQgPyAnIGlzLXNlbGVjdGVkJyA6ICcnKSArICdcIj4nICsgKGlzUlRMID8gZGF5cy5yZXZlcnNlKCkgOiBkYXlzKS5qb2luKCcnKSArICc8L3RyPic7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlclRhYmxlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGFibGUob3B0cywgZGF0YSwgcmFuZElkKSB7XG4gICAgICAgIHJldHVybiAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItdGFibGUtd3JhcHBlclwiPjx0YWJsZSBjZWxscGFkZGluZz1cIjBcIiBjZWxsc3BhY2luZz1cIjBcIiBjbGFzcz1cImRhdGVwaWNrZXItdGFibGVcIiByb2xlPVwiZ3JpZFwiIGFyaWEtbGFiZWxsZWRieT1cIicgKyByYW5kSWQgKyAnXCI+JyArIHRoaXMucmVuZGVySGVhZChvcHRzKSArIHRoaXMucmVuZGVyQm9keShkYXRhKSArICc8L3RhYmxlPjwvZGl2Pic7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlckhlYWRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiByZW5kZXJIZWFkKG9wdHMpIHtcbiAgICAgICAgdmFyIGkgPSB2b2lkIDAsXG4gICAgICAgICAgICBhcnIgPSBbXTtcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IDc7IGkrKykge1xuICAgICAgICAgIGFyci5wdXNoKFwiPHRoIHNjb3BlPVxcXCJjb2xcXFwiPjxhYmJyIHRpdGxlPVxcXCJcIiArIHRoaXMucmVuZGVyRGF5TmFtZShvcHRzLCBpKSArIFwiXFxcIj5cIiArIHRoaXMucmVuZGVyRGF5TmFtZShvcHRzLCBpLCB0cnVlKSArIFwiPC9hYmJyPjwvdGg+XCIpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAnPHRoZWFkPjx0cj4nICsgKG9wdHMuaXNSVEwgPyBhcnIucmV2ZXJzZSgpIDogYXJyKS5qb2luKCcnKSArICc8L3RyPjwvdGhlYWQ+JztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVuZGVyQm9keVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckJvZHkocm93cykge1xuICAgICAgICByZXR1cm4gJzx0Ym9keT4nICsgcm93cy5qb2luKCcnKSArICc8L3Rib2R5Pic7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInJlbmRlclRpdGxlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVuZGVyVGl0bGUoaW5zdGFuY2UsIGMsIHllYXIsIG1vbnRoLCByZWZZZWFyLCByYW5kSWQpIHtcbiAgICAgICAgdmFyIGkgPSB2b2lkIDAsXG4gICAgICAgICAgICBqID0gdm9pZCAwLFxuICAgICAgICAgICAgYXJyID0gdm9pZCAwLFxuICAgICAgICAgICAgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIGlzTWluWWVhciA9IHllYXIgPT09IG9wdHMubWluWWVhcixcbiAgICAgICAgICAgIGlzTWF4WWVhciA9IHllYXIgPT09IG9wdHMubWF4WWVhcixcbiAgICAgICAgICAgIGh0bWwgPSAnPGRpdiBpZD1cIicgKyByYW5kSWQgKyAnXCIgY2xhc3M9XCJkYXRlcGlja2VyLWNvbnRyb2xzXCIgcm9sZT1cImhlYWRpbmdcIiBhcmlhLWxpdmU9XCJhc3NlcnRpdmVcIj4nLFxuICAgICAgICAgICAgbW9udGhIdG1sID0gdm9pZCAwLFxuICAgICAgICAgICAgeWVhckh0bWwgPSB2b2lkIDAsXG4gICAgICAgICAgICBwcmV2ID0gdHJ1ZSxcbiAgICAgICAgICAgIG5leHQgPSB0cnVlO1xuXG4gICAgICAgIGZvciAoYXJyID0gW10sIGkgPSAwOyBpIDwgMTI7IGkrKykge1xuICAgICAgICAgIGFyci5wdXNoKCc8b3B0aW9uIHZhbHVlPVwiJyArICh5ZWFyID09PSByZWZZZWFyID8gaSAtIGMgOiAxMiArIGkgLSBjKSArICdcIicgKyAoaSA9PT0gbW9udGggPyAnIHNlbGVjdGVkPVwic2VsZWN0ZWRcIicgOiAnJykgKyAoaXNNaW5ZZWFyICYmIGkgPCBvcHRzLm1pbk1vbnRoIHx8IGlzTWF4WWVhciAmJiBpID4gb3B0cy5tYXhNb250aCA/ICdkaXNhYmxlZD1cImRpc2FibGVkXCInIDogJycpICsgJz4nICsgb3B0cy5pMThuLm1vbnRoc1tpXSArICc8L29wdGlvbj4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIG1vbnRoSHRtbCA9ICc8c2VsZWN0IGNsYXNzPVwiZGF0ZXBpY2tlci1zZWxlY3Qgb3JpZy1zZWxlY3QtbW9udGhcIiB0YWJpbmRleD1cIi0xXCI+JyArIGFyci5qb2luKCcnKSArICc8L3NlbGVjdD4nO1xuXG4gICAgICAgIGlmICgkLmlzQXJyYXkob3B0cy55ZWFyUmFuZ2UpKSB7XG4gICAgICAgICAgaSA9IG9wdHMueWVhclJhbmdlWzBdO1xuICAgICAgICAgIGogPSBvcHRzLnllYXJSYW5nZVsxXSArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgaSA9IHllYXIgLSBvcHRzLnllYXJSYW5nZTtcbiAgICAgICAgICBqID0gMSArIHllYXIgKyBvcHRzLnllYXJSYW5nZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoYXJyID0gW107IGkgPCBqICYmIGkgPD0gb3B0cy5tYXhZZWFyOyBpKyspIHtcbiAgICAgICAgICBpZiAoaSA+PSBvcHRzLm1pblllYXIpIHtcbiAgICAgICAgICAgIGFyci5wdXNoKFwiPG9wdGlvbiB2YWx1ZT1cXFwiXCIgKyBpICsgXCJcXFwiIFwiICsgKGkgPT09IHllYXIgPyAnc2VsZWN0ZWQ9XCJzZWxlY3RlZFwiJyA6ICcnKSArIFwiPlwiICsgaSArIFwiPC9vcHRpb24+XCIpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHllYXJIdG1sID0gXCI8c2VsZWN0IGNsYXNzPVxcXCJkYXRlcGlja2VyLXNlbGVjdCBvcmlnLXNlbGVjdC15ZWFyXFxcIiB0YWJpbmRleD1cXFwiLTFcXFwiPlwiICsgYXJyLmpvaW4oJycpICsgXCI8L3NlbGVjdD5cIjtcblxuICAgICAgICB2YXIgbGVmdEFycm93ID0gJzxzdmcgZmlsbD1cIiMwMDAwMDBcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNMTUuNDEgMTYuMDlsLTQuNTgtNC41OSA0LjU4LTQuNTlMMTQgNS41bC02IDYgNiA2elwiLz48cGF0aCBkPVwiTTAtLjVoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48L3N2Zz4nO1xuICAgICAgICBodG1sICs9IFwiPGJ1dHRvbiBjbGFzcz1cXFwibW9udGgtcHJldlwiICsgKHByZXYgPyAnJyA6ICcgaXMtZGlzYWJsZWQnKSArIFwiXFxcIiB0eXBlPVxcXCJidXR0b25cXFwiPlwiICsgbGVmdEFycm93ICsgXCI8L2J1dHRvbj5cIjtcblxuICAgICAgICBodG1sICs9ICc8ZGl2IGNsYXNzPVwic2VsZWN0cy1jb250YWluZXJcIj4nO1xuICAgICAgICBpZiAob3B0cy5zaG93TW9udGhBZnRlclllYXIpIHtcbiAgICAgICAgICBodG1sICs9IHllYXJIdG1sICsgbW9udGhIdG1sO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGh0bWwgKz0gbW9udGhIdG1sICsgeWVhckh0bWw7XG4gICAgICAgIH1cbiAgICAgICAgaHRtbCArPSAnPC9kaXY+JztcblxuICAgICAgICBpZiAoaXNNaW5ZZWFyICYmIChtb250aCA9PT0gMCB8fCBvcHRzLm1pbk1vbnRoID49IG1vbnRoKSkge1xuICAgICAgICAgIHByZXYgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChpc01heFllYXIgJiYgKG1vbnRoID09PSAxMSB8fCBvcHRzLm1heE1vbnRoIDw9IG1vbnRoKSkge1xuICAgICAgICAgIG5leHQgPSBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciByaWdodEFycm93ID0gJzxzdmcgZmlsbD1cIiMwMDAwMDBcIiBoZWlnaHQ9XCIyNFwiIHZpZXdCb3g9XCIwIDAgMjQgMjRcIiB3aWR0aD1cIjI0XCIgeG1sbnM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiPjxwYXRoIGQ9XCJNOC41OSAxNi4zNGw0LjU4LTQuNTktNC41OC00LjU5TDEwIDUuNzVsNiA2LTYgNnpcIi8+PHBhdGggZD1cIk0wLS4yNWgyNHYyNEgwelwiIGZpbGw9XCJub25lXCIvPjwvc3ZnPic7XG4gICAgICAgIGh0bWwgKz0gXCI8YnV0dG9uIGNsYXNzPVxcXCJtb250aC1uZXh0XCIgKyAobmV4dCA/ICcnIDogJyBpcy1kaXNhYmxlZCcpICsgXCJcXFwiIHR5cGU9XFxcImJ1dHRvblxcXCI+XCIgKyByaWdodEFycm93ICsgXCI8L2J1dHRvbj5cIjtcblxuICAgICAgICByZXR1cm4gaHRtbCArPSAnPC9kaXY+JztcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiByZWZyZXNoIHRoZSBIVE1MXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkcmF3XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZHJhdyhmb3JjZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuICYmICFmb3JjZSkge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICB2YXIgb3B0cyA9IHRoaXMub3B0aW9ucyxcbiAgICAgICAgICAgIG1pblllYXIgPSBvcHRzLm1pblllYXIsXG4gICAgICAgICAgICBtYXhZZWFyID0gb3B0cy5tYXhZZWFyLFxuICAgICAgICAgICAgbWluTW9udGggPSBvcHRzLm1pbk1vbnRoLFxuICAgICAgICAgICAgbWF4TW9udGggPSBvcHRzLm1heE1vbnRoLFxuICAgICAgICAgICAgaHRtbCA9ICcnLFxuICAgICAgICAgICAgcmFuZElkID0gdm9pZCAwO1xuXG4gICAgICAgIGlmICh0aGlzLl95IDw9IG1pblllYXIpIHtcbiAgICAgICAgICB0aGlzLl95ID0gbWluWWVhcjtcbiAgICAgICAgICBpZiAoIWlzTmFOKG1pbk1vbnRoKSAmJiB0aGlzLl9tIDwgbWluTW9udGgpIHtcbiAgICAgICAgICAgIHRoaXMuX20gPSBtaW5Nb250aDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuX3kgPj0gbWF4WWVhcikge1xuICAgICAgICAgIHRoaXMuX3kgPSBtYXhZZWFyO1xuICAgICAgICAgIGlmICghaXNOYU4obWF4TW9udGgpICYmIHRoaXMuX20gPiBtYXhNb250aCkge1xuICAgICAgICAgICAgdGhpcy5fbSA9IG1heE1vbnRoO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJhbmRJZCA9ICdkYXRlcGlja2VyLXRpdGxlLScgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5yZXBsYWNlKC9bXmEtel0rL2csICcnKS5zdWJzdHIoMCwgMik7XG5cbiAgICAgICAgZm9yICh2YXIgYyA9IDA7IGMgPCAxOyBjKyspIHtcbiAgICAgICAgICB0aGlzLl9yZW5kZXJEYXRlRGlzcGxheSgpO1xuICAgICAgICAgIGh0bWwgKz0gdGhpcy5yZW5kZXJUaXRsZSh0aGlzLCBjLCB0aGlzLmNhbGVuZGFyc1tjXS55ZWFyLCB0aGlzLmNhbGVuZGFyc1tjXS5tb250aCwgdGhpcy5jYWxlbmRhcnNbMF0ueWVhciwgcmFuZElkKSArIHRoaXMucmVuZGVyKHRoaXMuY2FsZW5kYXJzW2NdLnllYXIsIHRoaXMuY2FsZW5kYXJzW2NdLm1vbnRoLCByYW5kSWQpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5kZXN0cm95U2VsZWN0cygpO1xuXG4gICAgICAgIHRoaXMuY2FsZW5kYXJFbC5pbm5lckhUTUwgPSBodG1sO1xuXG4gICAgICAgIC8vIEluaXQgTWF0ZXJpYWxpemUgU2VsZWN0XG4gICAgICAgIHZhciB5ZWFyU2VsZWN0ID0gdGhpcy5jYWxlbmRhckVsLnF1ZXJ5U2VsZWN0b3IoJy5vcmlnLXNlbGVjdC15ZWFyJyk7XG4gICAgICAgIHZhciBtb250aFNlbGVjdCA9IHRoaXMuY2FsZW5kYXJFbC5xdWVyeVNlbGVjdG9yKCcub3JpZy1zZWxlY3QtbW9udGgnKTtcbiAgICAgICAgTS5Gb3JtU2VsZWN0LmluaXQoeWVhclNlbGVjdCwge1xuICAgICAgICAgIGNsYXNzZXM6ICdzZWxlY3QteWVhcicsXG4gICAgICAgICAgZHJvcGRvd25PcHRpb25zOiB7IGNvbnRhaW5lcjogZG9jdW1lbnQuYm9keSwgY29uc3RyYWluV2lkdGg6IGZhbHNlIH1cbiAgICAgICAgfSk7XG4gICAgICAgIE0uRm9ybVNlbGVjdC5pbml0KG1vbnRoU2VsZWN0LCB7XG4gICAgICAgICAgY2xhc3NlczogJ3NlbGVjdC1tb250aCcsXG4gICAgICAgICAgZHJvcGRvd25PcHRpb25zOiB7IGNvbnRhaW5lcjogZG9jdW1lbnQuYm9keSwgY29uc3RyYWluV2lkdGg6IGZhbHNlIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gQWRkIGNoYW5nZSBoYW5kbGVycyBmb3Igc2VsZWN0XG4gICAgICAgIHllYXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlWWVhckNoYW5nZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgbW9udGhTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlTW9udGhDaGFuZ2UuYmluZCh0aGlzKSk7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25EcmF3ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uRHJhdyh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dEtleWRvd24uYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZUJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRDaGFuZ2UuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9maW5pc2hTZWxlY3Rpb25Cb3VuZCA9IHRoaXMuX2ZpbmlzaFNlbGVjdGlvbi5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVNb250aENoYW5nZSA9IHRoaXMuX2hhbmRsZU1vbnRoQ2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2Nsb3NlQm91bmQgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG5cbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCB0aGlzLl9oYW5kbGVJbnB1dENoYW5nZUJvdW5kKTtcbiAgICAgICAgdGhpcy5jYWxlbmRhckVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2FsZW5kYXJDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5kb25lQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5fZmluaXNoU2VsZWN0aW9uQm91bmQpO1xuICAgICAgICB0aGlzLmNhbmNlbEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2Nsb3NlQm91bmQpO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuc2hvd0NsZWFyQnRuKSB7XG4gICAgICAgICAgdGhpcy5faGFuZGxlQ2xlYXJDbGlja0JvdW5kID0gdGhpcy5faGFuZGxlQ2xlYXJDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICAgIHRoaXMuY2xlYXJCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDbGVhckNsaWNrQm91bmQpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cFZhcmlhYmxlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFZhcmlhYmxlcygpIHtcbiAgICAgICAgdmFyIF90aGlzNTYgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuJG1vZGFsRWwgPSAkKERhdGVwaWNrZXIuX3RlbXBsYXRlKTtcbiAgICAgICAgdGhpcy5tb2RhbEVsID0gdGhpcy4kbW9kYWxFbFswXTtcblxuICAgICAgICB0aGlzLmNhbGVuZGFyRWwgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItY2FsZW5kYXInKTtcblxuICAgICAgICB0aGlzLnllYXJUZXh0RWwgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnllYXItdGV4dCcpO1xuICAgICAgICB0aGlzLmRhdGVUZXh0RWwgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGUtdGV4dCcpO1xuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnNob3dDbGVhckJ0bikge1xuICAgICAgICAgIHRoaXMuY2xlYXJCdG4gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItY2xlYXInKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRvbmVCdG4gPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLmRhdGVwaWNrZXItZG9uZScpO1xuICAgICAgICB0aGlzLmNhbmNlbEJ0biA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcuZGF0ZXBpY2tlci1jYW5jZWwnKTtcblxuICAgICAgICB0aGlzLmZvcm1hdHMgPSB7XG4gICAgICAgICAgZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNTYuZGF0ZS5nZXREYXRlKCk7XG4gICAgICAgICAgfSxcbiAgICAgICAgICBkZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGQgPSBfdGhpczU2LmRhdGUuZ2V0RGF0ZSgpO1xuICAgICAgICAgICAgcmV0dXJuIChkIDwgMTAgPyAnMCcgOiAnJykgKyBkO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGRkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM1Ni5vcHRpb25zLmkxOG4ud2Vla2RheXNTaG9ydFtfdGhpczU2LmRhdGUuZ2V0RGF5KCldO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgZGRkZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNTYub3B0aW9ucy5pMThuLndlZWtkYXlzW190aGlzNTYuZGF0ZS5nZXREYXkoKV07XG4gICAgICAgICAgfSxcbiAgICAgICAgICBtOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM1Ni5kYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbW06IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBtID0gX3RoaXM1Ni5kYXRlLmdldE1vbnRoKCkgKyAxO1xuICAgICAgICAgICAgcmV0dXJuIChtIDwgMTAgPyAnMCcgOiAnJykgKyBtO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbW1tOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gX3RoaXM1Ni5vcHRpb25zLmkxOG4ubW9udGhzU2hvcnRbX3RoaXM1Ni5kYXRlLmdldE1vbnRoKCldO1xuICAgICAgICAgIH0sXG4gICAgICAgICAgbW1tbTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIF90aGlzNTYub3B0aW9ucy5pMThuLm1vbnRoc1tfdGhpczU2LmRhdGUuZ2V0TW9udGgoKV07XG4gICAgICAgICAgfSxcbiAgICAgICAgICB5eTogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICgnJyArIF90aGlzNTYuZGF0ZS5nZXRGdWxsWWVhcigpKS5zbGljZSgyKTtcbiAgICAgICAgICB9LFxuICAgICAgICAgIHl5eXk6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBfdGhpczU2LmRhdGUuZ2V0RnVsbFllYXIoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZUlucHV0Q2hhbmdlQm91bmQpO1xuICAgICAgICB0aGlzLmNhbGVuZGFyRWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVDYWxlbmRhckNsaWNrQm91bmQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dENsaWNrKCkge1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0S2V5ZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEtleWRvd24oZSkge1xuICAgICAgICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLkVOVEVSKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDYWxlbmRhckNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNhbGVuZGFyQ2xpY2soZSkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyICR0YXJnZXQgPSAkKGUudGFyZ2V0KTtcbiAgICAgICAgaWYgKCEkdGFyZ2V0Lmhhc0NsYXNzKCdpcy1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgaWYgKCR0YXJnZXQuaGFzQ2xhc3MoJ2RhdGVwaWNrZXItZGF5LWJ1dHRvbicpICYmICEkdGFyZ2V0Lmhhc0NsYXNzKCdpcy1lbXB0eScpICYmICEkdGFyZ2V0LnBhcmVudCgpLmhhc0NsYXNzKCdpcy1kaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICB0aGlzLnNldERhdGUobmV3IERhdGUoZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLXllYXInKSwgZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkYXRhLW1vbnRoJyksIGUudGFyZ2V0LmdldEF0dHJpYnV0ZSgnZGF0YS1kYXknKSkpO1xuICAgICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5hdXRvQ2xvc2UpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZmluaXNoU2VsZWN0aW9uKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmICgkdGFyZ2V0LmNsb3Nlc3QoJy5tb250aC1wcmV2JykubGVuZ3RoKSB7XG4gICAgICAgICAgICB0aGlzLnByZXZNb250aCgpO1xuICAgICAgICAgIH0gZWxzZSBpZiAoJHRhcmdldC5jbG9zZXN0KCcubW9udGgtbmV4dCcpLmxlbmd0aCkge1xuICAgICAgICAgICAgdGhpcy5uZXh0TW9udGgoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNsZWFyQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2xlYXJDbGljaygpIHtcbiAgICAgICAgdGhpcy5kYXRlID0gbnVsbDtcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU1vbnRoQ2hhbmdlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU1vbnRoQ2hhbmdlKGUpIHtcbiAgICAgICAgdGhpcy5nb3RvTW9udGgoZS50YXJnZXQudmFsdWUpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlWWVhckNoYW5nZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVZZWFyQ2hhbmdlKGUpIHtcbiAgICAgICAgdGhpcy5nb3RvWWVhcihlLnRhcmdldC52YWx1ZSk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogY2hhbmdlIHZpZXcgdG8gYSBzcGVjaWZpYyBtb250aCAoemVyby1pbmRleCwgZS5nLiAwOiBKYW51YXJ5KVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ290b01vbnRoXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ290b01vbnRoKG1vbnRoKSB7XG4gICAgICAgIGlmICghaXNOYU4obW9udGgpKSB7XG4gICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ubW9udGggPSBwYXJzZUludChtb250aCwgMTApO1xuICAgICAgICAgIHRoaXMuYWRqdXN0Q2FsZW5kYXJzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBjaGFuZ2UgdmlldyB0byBhIHNwZWNpZmljIGZ1bGwgeWVhciAoZS5nLiBcIjIwMTJcIilcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImdvdG9ZZWFyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZ290b1llYXIoeWVhcikge1xuICAgICAgICBpZiAoIWlzTmFOKHllYXIpKSB7XG4gICAgICAgICAgdGhpcy5jYWxlbmRhcnNbMF0ueWVhciA9IHBhcnNlSW50KHllYXIsIDEwKTtcbiAgICAgICAgICB0aGlzLmFkanVzdENhbGVuZGFycygpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVJbnB1dENoYW5nZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dENoYW5nZShlKSB7XG4gICAgICAgIHZhciBkYXRlID0gdm9pZCAwO1xuXG4gICAgICAgIC8vIFByZXZlbnQgY2hhbmdlIGV2ZW50IGZyb20gYmVpbmcgZmlyZWQgd2hlbiB0cmlnZ2VyZWQgYnkgdGhlIHBsdWdpblxuICAgICAgICBpZiAoZS5maXJlZEJ5ID09PSB0aGlzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMucGFyc2UpIHtcbiAgICAgICAgICBkYXRlID0gdGhpcy5vcHRpb25zLnBhcnNlKHRoaXMuZWwudmFsdWUsIHRoaXMub3B0aW9ucy5mb3JtYXQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGUgPSBuZXcgRGF0ZShEYXRlLnBhcnNlKHRoaXMuZWwudmFsdWUpKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIHtcbiAgICAgICAgICB0aGlzLnNldERhdGUoZGF0ZSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwicmVuZGVyRGF5TmFtZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHJlbmRlckRheU5hbWUob3B0cywgZGF5LCBhYmJyKSB7XG4gICAgICAgIGRheSArPSBvcHRzLmZpcnN0RGF5O1xuICAgICAgICB3aGlsZSAoZGF5ID49IDcpIHtcbiAgICAgICAgICBkYXkgLT0gNztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gYWJiciA/IG9wdHMuaTE4bi53ZWVrZGF5c0FiYnJldltkYXldIDogb3B0cy5pMThuLndlZWtkYXlzW2RheV07XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IGlucHV0IHZhbHVlIHRvIHRoZSBzZWxlY3RlZCBkYXRlIGFuZCBjbG9zZSBEYXRlcGlja2VyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfZmluaXNoU2VsZWN0aW9uXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2ZpbmlzaFNlbGVjdGlvbigpIHtcbiAgICAgICAgdGhpcy5zZXRJbnB1dFZhbHVlKCk7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIERhdGVwaWNrZXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm9wZW5cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBvcGVuKCkge1xuICAgICAgICBpZiAodGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7XG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uT3BlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbk9wZW4uY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLmRyYXcoKTtcbiAgICAgICAgdGhpcy5tb2RhbC5vcGVuKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENsb3NlIERhdGVwaWNrZXJcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImNsb3NlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xvc2UoKSB7XG4gICAgICAgIGlmICghdGhpcy5pc09wZW4pIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlO1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbkNsb3NlID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ2xvc2UuY2FsbCh0aGlzKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLm1vZGFsLmNsb3NlKCk7XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChEYXRlcGlja2VyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoRGF0ZXBpY2tlciksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9pc0RhdGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaXNEYXRlKG9iaikge1xuICAgICAgICByZXR1cm4gKC9EYXRlLy50ZXN0KE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSAmJiAhaXNOYU4ob2JqLmdldFRpbWUoKSlcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2lzV2Vla2VuZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc1dlZWtlbmQoZGF0ZSkge1xuICAgICAgICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgICAgICAgcmV0dXJuIGRheSA9PT0gMCB8fCBkYXkgPT09IDY7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRUb1N0YXJ0T2ZEYXlcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0VG9TdGFydE9mRGF5KGRhdGUpIHtcbiAgICAgICAgaWYgKERhdGVwaWNrZXIuX2lzRGF0ZShkYXRlKSkgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2dldERheXNJbk1vbnRoXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2dldERheXNJbk1vbnRoKHllYXIsIG1vbnRoKSB7XG4gICAgICAgIHJldHVybiBbMzEsIERhdGVwaWNrZXIuX2lzTGVhcFllYXIoeWVhcikgPyAyOSA6IDI4LCAzMSwgMzAsIDMxLCAzMCwgMzEsIDMxLCAzMCwgMzEsIDMwLCAzMV1bbW9udGhdO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaXNMZWFwWWVhclwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9pc0xlYXBZZWFyKHllYXIpIHtcbiAgICAgICAgLy8gc29sdXRpb24gYnkgTWF0dGkgVmlya2t1bmVuOiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vYS80ODgxOTUxXG4gICAgICAgIHJldHVybiB5ZWFyICUgNCA9PT0gMCAmJiB5ZWFyICUgMTAwICE9PSAwIHx8IHllYXIgJSA0MDAgPT09IDA7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jb21wYXJlRGF0ZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY29tcGFyZURhdGVzKGEsIGIpIHtcbiAgICAgICAgLy8gd2VhayBkYXRlIGNvbXBhcmlzb24gKHVzZSBzZXRUb1N0YXJ0T2ZEYXkoZGF0ZSkgdG8gZW5zdXJlIGNvcnJlY3QgcmVzdWx0KVxuICAgICAgICByZXR1cm4gYS5nZXRUaW1lKCkgPT09IGIuZ2V0VGltZSgpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0VG9TdGFydE9mRGF5XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFRvU3RhcnRPZkRheShkYXRlKSB7XG4gICAgICAgIGlmIChEYXRlcGlja2VyLl9pc0RhdGUoZGF0ZSkpIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0RhdGVwaWNrZXI7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gRGF0ZXBpY2tlcjtcbiAgfShDb21wb25lbnQpO1xuXG4gIERhdGVwaWNrZXIuX3RlbXBsYXRlID0gWyc8ZGl2IGNsYXNzPSBcIm1vZGFsIGRhdGVwaWNrZXItbW9kYWxcIj4nLCAnPGRpdiBjbGFzcz1cIm1vZGFsLWNvbnRlbnQgZGF0ZXBpY2tlci1jb250YWluZXJcIj4nLCAnPGRpdiBjbGFzcz1cImRhdGVwaWNrZXItZGF0ZS1kaXNwbGF5XCI+JywgJzxzcGFuIGNsYXNzPVwieWVhci10ZXh0XCI+PC9zcGFuPicsICc8c3BhbiBjbGFzcz1cImRhdGUtdGV4dFwiPjwvc3Bhbj4nLCAnPC9kaXY+JywgJzxkaXYgY2xhc3M9XCJkYXRlcGlja2VyLWNhbGVuZGFyLWNvbnRhaW5lclwiPicsICc8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci1jYWxlbmRhclwiPjwvZGl2PicsICc8ZGl2IGNsYXNzPVwiZGF0ZXBpY2tlci1mb290ZXJcIj4nLCAnPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IGRhdGVwaWNrZXItY2xlYXIgd2F2ZXMtZWZmZWN0XCIgc3R5bGU9XCJ2aXNpYmlsaXR5OiBoaWRkZW47XCIgdHlwZT1cImJ1dHRvblwiPjwvYnV0dG9uPicsICc8ZGl2IGNsYXNzPVwiY29uZmlybWF0aW9uLWJ0bnNcIj4nLCAnPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IGRhdGVwaWNrZXItY2FuY2VsIHdhdmVzLWVmZmVjdFwiIHR5cGU9XCJidXR0b25cIj48L2J1dHRvbj4nLCAnPGJ1dHRvbiBjbGFzcz1cImJ0bi1mbGF0IGRhdGVwaWNrZXItZG9uZSB3YXZlcy1lZmZlY3RcIiB0eXBlPVwiYnV0dG9uXCI+PC9idXR0b24+JywgJzwvZGl2PicsICc8L2Rpdj4nLCAnPC9kaXY+JywgJzwvZGl2PicsICc8L2Rpdj4nXS5qb2luKCcnKTtcblxuICBNLkRhdGVwaWNrZXIgPSBEYXRlcGlja2VyO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoRGF0ZXBpY2tlciwgJ2RhdGVwaWNrZXInLCAnTV9EYXRlcGlja2VyJyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBkaWFsUmFkaXVzOiAxMzUsXG4gICAgb3V0ZXJSYWRpdXM6IDEwNSxcbiAgICBpbm5lclJhZGl1czogNzAsXG4gICAgdGlja1JhZGl1czogMjAsXG4gICAgZHVyYXRpb246IDM1MCxcbiAgICBjb250YWluZXI6IG51bGwsXG4gICAgZGVmYXVsdFRpbWU6ICdub3cnLCAvLyBkZWZhdWx0IHRpbWUsICdub3cnIG9yICcxMzoxNCcgZS5nLlxuICAgIGZyb21Ob3c6IDAsIC8vIE1pbGxpc2Vjb25kIG9mZnNldCBmcm9tIHRoZSBkZWZhdWx0VGltZVxuICAgIHNob3dDbGVhckJ0bjogZmFsc2UsXG5cbiAgICAvLyBpbnRlcm5hdGlvbmFsaXphdGlvblxuICAgIGkxOG46IHtcbiAgICAgIGNhbmNlbDogJ0NhbmNlbCcsXG4gICAgICBjbGVhcjogJ0NsZWFyJyxcbiAgICAgIGRvbmU6ICdPaydcbiAgICB9LFxuXG4gICAgYXV0b0Nsb3NlOiBmYWxzZSwgLy8gYXV0byBjbG9zZSB3aGVuIG1pbnV0ZSBpcyBzZWxlY3RlZFxuICAgIHR3ZWx2ZUhvdXI6IHRydWUsIC8vIGNoYW5nZSB0byAxMiBob3VyIEFNL1BNIGNsb2NrIGZyb20gMjQgaG91clxuICAgIHZpYnJhdGU6IHRydWUsIC8vIHZpYnJhdGUgdGhlIGRldmljZSB3aGVuIGRyYWdnaW5nIGNsb2NrIGhhbmRcblxuICAgIC8vIENhbGxiYWNrc1xuICAgIG9uT3BlblN0YXJ0OiBudWxsLFxuICAgIG9uT3BlbkVuZDogbnVsbCxcbiAgICBvbkNsb3NlU3RhcnQ6IG51bGwsXG4gICAgb25DbG9zZUVuZDogbnVsbCxcbiAgICBvblNlbGVjdDogbnVsbFxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIFRpbWVwaWNrZXIgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDE2KSB7XG4gICAgX2luaGVyaXRzKFRpbWVwaWNrZXIsIF9Db21wb25lbnQxNik7XG5cbiAgICBmdW5jdGlvbiBUaW1lcGlja2VyKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgVGltZXBpY2tlcik7XG5cbiAgICAgIHZhciBfdGhpczU3ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKFRpbWVwaWNrZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUaW1lcGlja2VyKSkuY2FsbCh0aGlzLCBUaW1lcGlja2VyLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczU3LmVsLk1fVGltZXBpY2tlciA9IF90aGlzNTc7XG5cbiAgICAgIF90aGlzNTcub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBUaW1lcGlja2VyLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXM1Ny5pZCA9IE0uZ3VpZCgpO1xuICAgICAgX3RoaXM1Ny5faW5zZXJ0SFRNTEludG9ET00oKTtcbiAgICAgIF90aGlzNTcuX3NldHVwTW9kYWwoKTtcbiAgICAgIF90aGlzNTcuX3NldHVwVmFyaWFibGVzKCk7XG4gICAgICBfdGhpczU3Ll9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcblxuICAgICAgX3RoaXM1Ny5fY2xvY2tTZXR1cCgpO1xuICAgICAgX3RoaXM1Ny5fcGlja2VyU2V0dXAoKTtcbiAgICAgIHJldHVybiBfdGhpczU3O1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhUaW1lcGlja2VyLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLm1vZGFsLmRlc3Ryb3koKTtcbiAgICAgICAgJCh0aGlzLm1vZGFsRWwpLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmVsLk1fVGltZXBpY2tlciA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0S2V5ZG93bkJvdW5kID0gdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUlucHV0Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlQ2xvY2tDbGlja1N0YXJ0Qm91bmQgPSB0aGlzLl9oYW5kbGVDbG9ja0NsaWNrU3RhcnQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmVCb3VuZCA9IHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRCb3VuZCA9IHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tFbmQuYmluZCh0aGlzKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgICB0aGlzLnBsYXRlLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMuX2hhbmRsZUNsb2NrQ2xpY2tTdGFydEJvdW5kKTtcbiAgICAgICAgdGhpcy5wbGF0ZS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlQ2xvY2tDbGlja1N0YXJ0Qm91bmQpO1xuXG4gICAgICAgICQodGhpcy5zcGFuSG91cnMpLm9uKCdjbGljaycsIHRoaXMuc2hvd1ZpZXcuYmluZCh0aGlzLCAnaG91cnMnKSk7XG4gICAgICAgICQodGhpcy5zcGFuTWludXRlcykub24oJ2NsaWNrJywgdGhpcy5zaG93Vmlldy5iaW5kKHRoaXMsICdtaW51dGVzJykpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlSW5wdXRDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlSW5wdXRLZXlkb3duQm91bmQpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5wdXRDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dENsaWNrKCkge1xuICAgICAgICB0aGlzLm9wZW4oKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0S2V5ZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVJbnB1dEtleWRvd24oZSkge1xuICAgICAgICBpZiAoZS53aGljaCA9PT0gTS5rZXlzLkVOVEVSKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVDbG9ja0NsaWNrU3RhcnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlQ2xvY2tDbGlja1N0YXJ0KGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgY2xvY2tQbGF0ZUJSID0gdGhpcy5wbGF0ZS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtcbiAgICAgICAgdmFyIG9mZnNldCA9IHsgeDogY2xvY2tQbGF0ZUJSLmxlZnQsIHk6IGNsb2NrUGxhdGVCUi50b3AgfTtcblxuICAgICAgICB0aGlzLngwID0gb2Zmc2V0LnggKyB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cztcbiAgICAgICAgdGhpcy55MCA9IG9mZnNldC55ICsgdGhpcy5vcHRpb25zLmRpYWxSYWRpdXM7XG4gICAgICAgIHRoaXMubW92ZWQgPSBmYWxzZTtcbiAgICAgICAgdmFyIGNsaWNrUG9zID0gVGltZXBpY2tlci5fUG9zKGUpO1xuICAgICAgICB0aGlzLmR4ID0gY2xpY2tQb3MueCAtIHRoaXMueDA7XG4gICAgICAgIHRoaXMuZHkgPSBjbGlja1Bvcy55IC0gdGhpcy55MDtcblxuICAgICAgICAvLyBTZXQgY2xvY2sgaGFuZHNcbiAgICAgICAgdGhpcy5zZXRIYW5kKHRoaXMuZHgsIHRoaXMuZHksIGZhbHNlKTtcblxuICAgICAgICAvLyBNb3VzZW1vdmUgb24gZG9jdW1lbnRcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja01vdmVCb3VuZCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQpO1xuXG4gICAgICAgIC8vIE1vdXNldXAgb24gZG9jdW1lbnRcbiAgICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRCb3VuZCk7XG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgY2xpY2tQb3MgPSBUaW1lcGlja2VyLl9Qb3MoZSk7XG4gICAgICAgIHZhciB4ID0gY2xpY2tQb3MueCAtIHRoaXMueDA7XG4gICAgICAgIHZhciB5ID0gY2xpY2tQb3MueSAtIHRoaXMueTA7XG4gICAgICAgIHRoaXMubW92ZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLnNldEhhbmQoeCwgeSwgZmFsc2UsIHRydWUpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlRG9jdW1lbnRDbGlja0VuZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVEb2N1bWVudENsaWNrRW5kKGUpIHtcbiAgICAgICAgdmFyIF90aGlzNTggPSB0aGlzO1xuXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tFbmRCb3VuZCk7XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0VuZEJvdW5kKTtcbiAgICAgICAgdmFyIGNsaWNrUG9zID0gVGltZXBpY2tlci5fUG9zKGUpO1xuICAgICAgICB2YXIgeCA9IGNsaWNrUG9zLnggLSB0aGlzLngwO1xuICAgICAgICB2YXIgeSA9IGNsaWNrUG9zLnkgLSB0aGlzLnkwO1xuICAgICAgICBpZiAodGhpcy5tb3ZlZCAmJiB4ID09PSB0aGlzLmR4ICYmIHkgPT09IHRoaXMuZHkpIHtcbiAgICAgICAgICB0aGlzLnNldEhhbmQoeCwgeSk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodGhpcy5jdXJyZW50VmlldyA9PT0gJ2hvdXJzJykge1xuICAgICAgICAgIHRoaXMuc2hvd1ZpZXcoJ21pbnV0ZXMnLCB0aGlzLm9wdGlvbnMuZHVyYXRpb24gLyAyKTtcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLm9wdGlvbnMuYXV0b0Nsb3NlKSB7XG4gICAgICAgICAgJCh0aGlzLm1pbnV0ZXNWaWV3KS5hZGRDbGFzcygndGltZXBpY2tlci1kaWFsLW91dCcpO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgX3RoaXM1OC5kb25lKCk7XG4gICAgICAgICAgfSwgdGhpcy5vcHRpb25zLmR1cmF0aW9uIC8gMik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vblNlbGVjdCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vblNlbGVjdC5jYWxsKHRoaXMsIHRoaXMuaG91cnMsIHRoaXMubWludXRlcyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBVbmJpbmQgbW91c2Vtb3ZlIGV2ZW50XG4gICAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlbW92ZScsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tNb3ZlQm91bmQpO1xuICAgICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrTW92ZUJvdW5kKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2luc2VydEhUTUxJbnRvRE9NXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2luc2VydEhUTUxJbnRvRE9NKCkge1xuICAgICAgICB0aGlzLiRtb2RhbEVsID0gJChUaW1lcGlja2VyLl90ZW1wbGF0ZSk7XG4gICAgICAgIHRoaXMubW9kYWxFbCA9IHRoaXMuJG1vZGFsRWxbMF07XG4gICAgICAgIHRoaXMubW9kYWxFbC5pZCA9ICdtb2RhbC0nICsgdGhpcy5pZDtcblxuICAgICAgICAvLyBBcHBlbmQgcG9wb3ZlciB0byBpbnB1dCBieSBkZWZhdWx0XG4gICAgICAgIHZhciBjb250YWluZXJFbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLmNvbnRhaW5lcik7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuY29udGFpbmVyICYmICEhY29udGFpbmVyRWwpIHtcbiAgICAgICAgICB0aGlzLiRtb2RhbEVsLmFwcGVuZFRvKGNvbnRhaW5lckVsKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLiRtb2RhbEVsLmluc2VydEJlZm9yZSh0aGlzLmVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBNb2RhbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cE1vZGFsKCkge1xuICAgICAgICB2YXIgX3RoaXM1OSA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5tb2RhbCA9IE0uTW9kYWwuaW5pdCh0aGlzLm1vZGFsRWwsIHtcbiAgICAgICAgICBvbk9wZW5TdGFydDogdGhpcy5vcHRpb25zLm9uT3BlblN0YXJ0LFxuICAgICAgICAgIG9uT3BlbkVuZDogdGhpcy5vcHRpb25zLm9uT3BlbkVuZCxcbiAgICAgICAgICBvbkNsb3NlU3RhcnQ6IHRoaXMub3B0aW9ucy5vbkNsb3NlU3RhcnQsXG4gICAgICAgICAgb25DbG9zZUVuZDogZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBfdGhpczU5Lm9wdGlvbnMub25DbG9zZUVuZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICBfdGhpczU5Lm9wdGlvbnMub25DbG9zZUVuZC5jYWxsKF90aGlzNTkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgX3RoaXM1OS5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBWYXJpYWJsZXNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBWYXJpYWJsZXMoKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFZpZXcgPSAnaG91cnMnO1xuICAgICAgICB0aGlzLnZpYnJhdGUgPSBuYXZpZ2F0b3IudmlicmF0ZSA/ICd2aWJyYXRlJyA6IG5hdmlnYXRvci53ZWJraXRWaWJyYXRlID8gJ3dlYmtpdFZpYnJhdGUnIDogbnVsbDtcblxuICAgICAgICB0aGlzLl9jYW52YXMgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItY2FudmFzJyk7XG4gICAgICAgIHRoaXMucGxhdGUgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItcGxhdGUnKTtcblxuICAgICAgICB0aGlzLmhvdXJzVmlldyA9IHRoaXMubW9kYWxFbC5xdWVyeVNlbGVjdG9yKCcudGltZXBpY2tlci1ob3VycycpO1xuICAgICAgICB0aGlzLm1pbnV0ZXNWaWV3ID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLW1pbnV0ZXMnKTtcbiAgICAgICAgdGhpcy5zcGFuSG91cnMgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItc3Bhbi1ob3VycycpO1xuICAgICAgICB0aGlzLnNwYW5NaW51dGVzID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLXNwYW4tbWludXRlcycpO1xuICAgICAgICB0aGlzLnNwYW5BbVBtID0gdGhpcy5tb2RhbEVsLnF1ZXJ5U2VsZWN0b3IoJy50aW1lcGlja2VyLXNwYW4tYW0tcG0nKTtcbiAgICAgICAgdGhpcy5mb290ZXIgPSB0aGlzLm1vZGFsRWwucXVlcnlTZWxlY3RvcignLnRpbWVwaWNrZXItZm9vdGVyJyk7XG4gICAgICAgIHRoaXMuYW1PclBtID0gJ1BNJztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3BpY2tlclNldHVwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3BpY2tlclNldHVwKCkge1xuICAgICAgICB2YXIgJGNsZWFyQnRuID0gJChcIjxidXR0b24gY2xhc3M9XFxcImJ0bi1mbGF0IHRpbWVwaWNrZXItY2xlYXIgd2F2ZXMtZWZmZWN0XFxcIiBzdHlsZT1cXFwidmlzaWJpbGl0eTogaGlkZGVuO1xcXCIgdHlwZT1cXFwiYnV0dG9uXFxcIiB0YWJpbmRleD1cXFwiXCIgKyAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIgPyAnMycgOiAnMScpICsgXCJcXFwiPlwiICsgdGhpcy5vcHRpb25zLmkxOG4uY2xlYXIgKyBcIjwvYnV0dG9uPlwiKS5hcHBlbmRUbyh0aGlzLmZvb3Rlcikub24oJ2NsaWNrJywgdGhpcy5jbGVhci5iaW5kKHRoaXMpKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5zaG93Q2xlYXJCdG4pIHtcbiAgICAgICAgICAkY2xlYXJCdG4uY3NzKHsgdmlzaWJpbGl0eTogJycgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY29uZmlybWF0aW9uQnRuc0NvbnRhaW5lciA9ICQoJzxkaXYgY2xhc3M9XCJjb25maXJtYXRpb24tYnRuc1wiPjwvZGl2PicpO1xuICAgICAgICAkKCc8YnV0dG9uIGNsYXNzPVwiYnRuLWZsYXQgdGltZXBpY2tlci1jbG9zZSB3YXZlcy1lZmZlY3RcIiB0eXBlPVwiYnV0dG9uXCIgdGFiaW5kZXg9XCInICsgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyID8gJzMnIDogJzEnKSArICdcIj4nICsgdGhpcy5vcHRpb25zLmkxOG4uY2FuY2VsICsgJzwvYnV0dG9uPicpLmFwcGVuZFRvKGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIpLm9uKCdjbGljaycsIHRoaXMuY2xvc2UuYmluZCh0aGlzKSk7XG4gICAgICAgICQoJzxidXR0b24gY2xhc3M9XCJidG4tZmxhdCB0aW1lcGlja2VyLWNsb3NlIHdhdmVzLWVmZmVjdFwiIHR5cGU9XCJidXR0b25cIiB0YWJpbmRleD1cIicgKyAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIgPyAnMycgOiAnMScpICsgJ1wiPicgKyB0aGlzLm9wdGlvbnMuaTE4bi5kb25lICsgJzwvYnV0dG9uPicpLmFwcGVuZFRvKGNvbmZpcm1hdGlvbkJ0bnNDb250YWluZXIpLm9uKCdjbGljaycsIHRoaXMuZG9uZS5iaW5kKHRoaXMpKTtcbiAgICAgICAgY29uZmlybWF0aW9uQnRuc0NvbnRhaW5lci5hcHBlbmRUbyh0aGlzLmZvb3Rlcik7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jbG9ja1NldHVwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2Nsb2NrU2V0dXAoKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuICAgICAgICAgIHRoaXMuJGFtQnRuID0gJCgnPGRpdiBjbGFzcz1cImFtLWJ0blwiPkFNPC9kaXY+Jyk7XG4gICAgICAgICAgdGhpcy4kcG1CdG4gPSAkKCc8ZGl2IGNsYXNzPVwicG0tYnRuXCI+UE08L2Rpdj4nKTtcbiAgICAgICAgICB0aGlzLiRhbUJ0bi5vbignY2xpY2snLCB0aGlzLl9oYW5kbGVBbVBtQ2xpY2suYmluZCh0aGlzKSkuYXBwZW5kVG8odGhpcy5zcGFuQW1QbSk7XG4gICAgICAgICAgdGhpcy4kcG1CdG4ub24oJ2NsaWNrJywgdGhpcy5faGFuZGxlQW1QbUNsaWNrLmJpbmQodGhpcykpLmFwcGVuZFRvKHRoaXMuc3BhbkFtUG0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fYnVpbGRIb3Vyc1ZpZXcoKTtcbiAgICAgICAgdGhpcy5fYnVpbGRNaW51dGVzVmlldygpO1xuICAgICAgICB0aGlzLl9idWlsZFNWR0Nsb2NrKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9idWlsZFNWR0Nsb2NrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2J1aWxkU1ZHQ2xvY2soKSB7XG4gICAgICAgIC8vIERyYXcgY2xvY2sgaGFuZHMgYW5kIG90aGVyc1xuICAgICAgICB2YXIgZGlhbFJhZGl1cyA9IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzO1xuICAgICAgICB2YXIgdGlja1JhZGl1cyA9IHRoaXMub3B0aW9ucy50aWNrUmFkaXVzO1xuICAgICAgICB2YXIgZGlhbWV0ZXIgPSBkaWFsUmFkaXVzICogMjtcblxuICAgICAgICB2YXIgc3ZnID0gVGltZXBpY2tlci5fY3JlYXRlU1ZHRWwoJ3N2ZycpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCdjbGFzcycsICd0aW1lcGlja2VyLXN2ZycpO1xuICAgICAgICBzdmcuc2V0QXR0cmlidXRlKCd3aWR0aCcsIGRpYW1ldGVyKTtcbiAgICAgICAgc3ZnLnNldEF0dHJpYnV0ZSgnaGVpZ2h0JywgZGlhbWV0ZXIpO1xuICAgICAgICB2YXIgZyA9IFRpbWVwaWNrZXIuX2NyZWF0ZVNWR0VsKCdnJyk7XG4gICAgICAgIGcuc2V0QXR0cmlidXRlKCd0cmFuc2Zvcm0nLCAndHJhbnNsYXRlKCcgKyBkaWFsUmFkaXVzICsgJywnICsgZGlhbFJhZGl1cyArICcpJyk7XG4gICAgICAgIHZhciBiZWFyaW5nID0gVGltZXBpY2tlci5fY3JlYXRlU1ZHRWwoJ2NpcmNsZScpO1xuICAgICAgICBiZWFyaW5nLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGltZXBpY2tlci1jYW52YXMtYmVhcmluZycpO1xuICAgICAgICBiZWFyaW5nLnNldEF0dHJpYnV0ZSgnY3gnLCAwKTtcbiAgICAgICAgYmVhcmluZy5zZXRBdHRyaWJ1dGUoJ2N5JywgMCk7XG4gICAgICAgIGJlYXJpbmcuc2V0QXR0cmlidXRlKCdyJywgNCk7XG4gICAgICAgIHZhciBoYW5kID0gVGltZXBpY2tlci5fY3JlYXRlU1ZHRWwoJ2xpbmUnKTtcbiAgICAgICAgaGFuZC5zZXRBdHRyaWJ1dGUoJ3gxJywgMCk7XG4gICAgICAgIGhhbmQuc2V0QXR0cmlidXRlKCd5MScsIDApO1xuICAgICAgICB2YXIgYmcgPSBUaW1lcGlja2VyLl9jcmVhdGVTVkdFbCgnY2lyY2xlJyk7XG4gICAgICAgIGJnLnNldEF0dHJpYnV0ZSgnY2xhc3MnLCAndGltZXBpY2tlci1jYW52YXMtYmcnKTtcbiAgICAgICAgYmcuc2V0QXR0cmlidXRlKCdyJywgdGlja1JhZGl1cyk7XG4gICAgICAgIGcuYXBwZW5kQ2hpbGQoaGFuZCk7XG4gICAgICAgIGcuYXBwZW5kQ2hpbGQoYmcpO1xuICAgICAgICBnLmFwcGVuZENoaWxkKGJlYXJpbmcpO1xuICAgICAgICBzdmcuYXBwZW5kQ2hpbGQoZyk7XG4gICAgICAgIHRoaXMuX2NhbnZhcy5hcHBlbmRDaGlsZChzdmcpO1xuXG4gICAgICAgIHRoaXMuaGFuZCA9IGhhbmQ7XG4gICAgICAgIHRoaXMuYmcgPSBiZztcbiAgICAgICAgdGhpcy5iZWFyaW5nID0gYmVhcmluZztcbiAgICAgICAgdGhpcy5nID0gZztcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2J1aWxkSG91cnNWaWV3XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2J1aWxkSG91cnNWaWV3KCkge1xuICAgICAgICB2YXIgJHRpY2sgPSAkKCc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci10aWNrXCI+PC9kaXY+Jyk7XG4gICAgICAgIC8vIEhvdXJzIHZpZXdcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyKSB7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDE7IGkgPCAxMzsgaSArPSAxKSB7XG4gICAgICAgICAgICB2YXIgdGljayA9ICR0aWNrLmNsb25lKCk7XG4gICAgICAgICAgICB2YXIgcmFkaWFuID0gaSAvIDYgKiBNYXRoLlBJO1xuICAgICAgICAgICAgdmFyIHJhZGl1cyA9IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cztcbiAgICAgICAgICAgIHRpY2suY3NzKHtcbiAgICAgICAgICAgICAgbGVmdDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgKyBNYXRoLnNpbihyYWRpYW4pICogcmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMgKyAncHgnLFxuICAgICAgICAgICAgICB0b3A6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzIC0gTWF0aC5jb3MocmFkaWFuKSAqIHJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzICsgJ3B4J1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB0aWNrLmh0bWwoaSA9PT0gMCA/ICcwMCcgOiBpKTtcbiAgICAgICAgICAgIHRoaXMuaG91cnNWaWV3LmFwcGVuZENoaWxkKHRpY2tbMF0pO1xuICAgICAgICAgICAgLy8gdGljay5vbihtb3VzZWRvd25FdmVudCwgbW91c2Vkb3duKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZm9yICh2YXIgX2kyID0gMDsgX2kyIDwgMjQ7IF9pMiArPSAxKSB7XG4gICAgICAgICAgICB2YXIgX3RpY2sgPSAkdGljay5jbG9uZSgpO1xuICAgICAgICAgICAgdmFyIF9yYWRpYW4gPSBfaTIgLyA2ICogTWF0aC5QSTtcbiAgICAgICAgICAgIHZhciBpbm5lciA9IF9pMiA+IDAgJiYgX2kyIDwgMTM7XG4gICAgICAgICAgICB2YXIgX3JhZGl1cyA9IGlubmVyID8gdGhpcy5vcHRpb25zLmlubmVyUmFkaXVzIDogdGhpcy5vcHRpb25zLm91dGVyUmFkaXVzO1xuICAgICAgICAgICAgX3RpY2suY3NzKHtcbiAgICAgICAgICAgICAgbGVmdDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgKyBNYXRoLnNpbihfcmFkaWFuKSAqIF9yYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCcsXG4gICAgICAgICAgICAgIHRvcDogdGhpcy5vcHRpb25zLmRpYWxSYWRpdXMgLSBNYXRoLmNvcyhfcmFkaWFuKSAqIF9yYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCdcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgX3RpY2suaHRtbChfaTIgPT09IDAgPyAnMDAnIDogX2kyKTtcbiAgICAgICAgICAgIHRoaXMuaG91cnNWaWV3LmFwcGVuZENoaWxkKF90aWNrWzBdKTtcbiAgICAgICAgICAgIC8vIHRpY2sub24obW91c2Vkb3duRXZlbnQsIG1vdXNlZG93bik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9idWlsZE1pbnV0ZXNWaWV3XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2J1aWxkTWludXRlc1ZpZXcoKSB7XG4gICAgICAgIHZhciAkdGljayA9ICQoJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLXRpY2tcIj48L2Rpdj4nKTtcbiAgICAgICAgLy8gTWludXRlcyB2aWV3XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjA7IGkgKz0gNSkge1xuICAgICAgICAgIHZhciB0aWNrID0gJHRpY2suY2xvbmUoKTtcbiAgICAgICAgICB2YXIgcmFkaWFuID0gaSAvIDMwICogTWF0aC5QSTtcbiAgICAgICAgICB0aWNrLmNzcyh7XG4gICAgICAgICAgICBsZWZ0OiB0aGlzLm9wdGlvbnMuZGlhbFJhZGl1cyArIE1hdGguc2luKHJhZGlhbikgKiB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXMgLSB0aGlzLm9wdGlvbnMudGlja1JhZGl1cyArICdweCcsXG4gICAgICAgICAgICB0b3A6IHRoaXMub3B0aW9ucy5kaWFsUmFkaXVzIC0gTWF0aC5jb3MocmFkaWFuKSAqIHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cyAtIHRoaXMub3B0aW9ucy50aWNrUmFkaXVzICsgJ3B4J1xuICAgICAgICAgIH0pO1xuICAgICAgICAgIHRpY2suaHRtbChUaW1lcGlja2VyLl9hZGRMZWFkaW5nWmVybyhpKSk7XG4gICAgICAgICAgdGhpcy5taW51dGVzVmlldy5hcHBlbmRDaGlsZCh0aWNrWzBdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQW1QbUNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUFtUG1DbGljayhlKSB7XG4gICAgICAgIHZhciAkYnRuQ2xpY2tlZCA9ICQoZS50YXJnZXQpO1xuICAgICAgICB0aGlzLmFtT3JQbSA9ICRidG5DbGlja2VkLmhhc0NsYXNzKCdhbS1idG4nKSA/ICdBTScgOiAnUE0nO1xuICAgICAgICB0aGlzLl91cGRhdGVBbVBtVmlldygpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdXBkYXRlQW1QbVZpZXdcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfdXBkYXRlQW1QbVZpZXcoKSB7XG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMudHdlbHZlSG91cikge1xuICAgICAgICAgIHRoaXMuJGFtQnRuLnRvZ2dsZUNsYXNzKCd0ZXh0LXByaW1hcnknLCB0aGlzLmFtT3JQbSA9PT0gJ0FNJyk7XG4gICAgICAgICAgdGhpcy4kcG1CdG4udG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsIHRoaXMuYW1PclBtID09PSAnUE0nKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdXBkYXRlVGltZUZyb21JbnB1dFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF91cGRhdGVUaW1lRnJvbUlucHV0KCkge1xuICAgICAgICAvLyBHZXQgdGhlIHRpbWVcbiAgICAgICAgdmFyIHZhbHVlID0gKCh0aGlzLmVsLnZhbHVlIHx8IHRoaXMub3B0aW9ucy5kZWZhdWx0VGltZSB8fCAnJykgKyAnJykuc3BsaXQoJzonKTtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyICYmICEodHlwZW9mIHZhbHVlWzFdID09PSAndW5kZWZpbmVkJykpIHtcbiAgICAgICAgICBpZiAodmFsdWVbMV0udG9VcHBlckNhc2UoKS5pbmRleE9mKCdBTScpID4gMCkge1xuICAgICAgICAgICAgdGhpcy5hbU9yUG0gPSAnQU0nO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLmFtT3JQbSA9ICdQTSc7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlWzFdID0gdmFsdWVbMV0ucmVwbGFjZSgnQU0nLCAnJykucmVwbGFjZSgnUE0nLCAnJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHZhbHVlWzBdID09PSAnbm93Jykge1xuICAgICAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgrbmV3IERhdGUoKSArIHRoaXMub3B0aW9ucy5mcm9tTm93KTtcbiAgICAgICAgICB2YWx1ZSA9IFtub3cuZ2V0SG91cnMoKSwgbm93LmdldE1pbnV0ZXMoKV07XG4gICAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyKSB7XG4gICAgICAgICAgICB0aGlzLmFtT3JQbSA9IHZhbHVlWzBdID49IDEyICYmIHZhbHVlWzBdIDwgMjQgPyAnUE0nIDogJ0FNJztcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5ob3VycyA9ICt2YWx1ZVswXSB8fCAwO1xuICAgICAgICB0aGlzLm1pbnV0ZXMgPSArdmFsdWVbMV0gfHwgMDtcbiAgICAgICAgdGhpcy5zcGFuSG91cnMuaW5uZXJIVE1MID0gdGhpcy5ob3VycztcbiAgICAgICAgdGhpcy5zcGFuTWludXRlcy5pbm5lckhUTUwgPSBUaW1lcGlja2VyLl9hZGRMZWFkaW5nWmVybyh0aGlzLm1pbnV0ZXMpO1xuXG4gICAgICAgIHRoaXMuX3VwZGF0ZUFtUG1WaWV3KCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcInNob3dWaWV3XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gc2hvd1ZpZXcodmlldywgZGVsYXkpIHtcbiAgICAgICAgaWYgKHZpZXcgPT09ICdtaW51dGVzJyAmJiAkKHRoaXMuaG91cnNWaWV3KS5jc3MoJ3Zpc2liaWxpdHknKSA9PT0gJ3Zpc2libGUnKSB7XG4gICAgICAgICAgLy8gcmFpc2VDYWxsYmFjayh0aGlzLm9wdGlvbnMuYmVmb3JlSG91clNlbGVjdCk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGlzSG91cnMgPSB2aWV3ID09PSAnaG91cnMnLFxuICAgICAgICAgICAgbmV4dFZpZXcgPSBpc0hvdXJzID8gdGhpcy5ob3Vyc1ZpZXcgOiB0aGlzLm1pbnV0ZXNWaWV3LFxuICAgICAgICAgICAgaGlkZVZpZXcgPSBpc0hvdXJzID8gdGhpcy5taW51dGVzVmlldyA6IHRoaXMuaG91cnNWaWV3O1xuICAgICAgICB0aGlzLmN1cnJlbnRWaWV3ID0gdmlldztcblxuICAgICAgICAkKHRoaXMuc3BhbkhvdXJzKS50b2dnbGVDbGFzcygndGV4dC1wcmltYXJ5JywgaXNIb3Vycyk7XG4gICAgICAgICQodGhpcy5zcGFuTWludXRlcykudG9nZ2xlQ2xhc3MoJ3RleHQtcHJpbWFyeScsICFpc0hvdXJzKTtcblxuICAgICAgICAvLyBUcmFuc2l0aW9uIHZpZXdcbiAgICAgICAgaGlkZVZpZXcuY2xhc3NMaXN0LmFkZCgndGltZXBpY2tlci1kaWFsLW91dCcpO1xuICAgICAgICAkKG5leHRWaWV3KS5jc3MoJ3Zpc2liaWxpdHknLCAndmlzaWJsZScpLnJlbW92ZUNsYXNzKCd0aW1lcGlja2VyLWRpYWwtb3V0Jyk7XG5cbiAgICAgICAgLy8gUmVzZXQgY2xvY2sgaGFuZFxuICAgICAgICB0aGlzLnJlc2V0Q2xvY2soZGVsYXkpO1xuXG4gICAgICAgIC8vIEFmdGVyIHRyYW5zaXRpb25zIGVuZGVkXG4gICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRvZ2dsZVZpZXdUaW1lcik7XG4gICAgICAgIHRoaXMudG9nZ2xlVmlld1RpbWVyID0gc2V0VGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJChoaWRlVmlldykuY3NzKCd2aXNpYmlsaXR5JywgJ2hpZGRlbicpO1xuICAgICAgICB9LCB0aGlzLm9wdGlvbnMuZHVyYXRpb24pO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJyZXNldENsb2NrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gcmVzZXRDbG9jayhkZWxheSkge1xuICAgICAgICB2YXIgdmlldyA9IHRoaXMuY3VycmVudFZpZXcsXG4gICAgICAgICAgICB2YWx1ZSA9IHRoaXNbdmlld10sXG4gICAgICAgICAgICBpc0hvdXJzID0gdmlldyA9PT0gJ2hvdXJzJyxcbiAgICAgICAgICAgIHVuaXQgPSBNYXRoLlBJIC8gKGlzSG91cnMgPyA2IDogMzApLFxuICAgICAgICAgICAgcmFkaWFuID0gdmFsdWUgKiB1bml0LFxuICAgICAgICAgICAgcmFkaXVzID0gaXNIb3VycyAmJiB2YWx1ZSA+IDAgJiYgdmFsdWUgPCAxMyA/IHRoaXMub3B0aW9ucy5pbm5lclJhZGl1cyA6IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cyxcbiAgICAgICAgICAgIHggPSBNYXRoLnNpbihyYWRpYW4pICogcmFkaXVzLFxuICAgICAgICAgICAgeSA9IC1NYXRoLmNvcyhyYWRpYW4pICogcmFkaXVzLFxuICAgICAgICAgICAgc2VsZiA9IHRoaXM7XG5cbiAgICAgICAgaWYgKGRlbGF5KSB7XG4gICAgICAgICAgJCh0aGlzLmNhbnZhcykuYWRkQ2xhc3MoJ3RpbWVwaWNrZXItY2FudmFzLW91dCcpO1xuICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgJChzZWxmLmNhbnZhcykucmVtb3ZlQ2xhc3MoJ3RpbWVwaWNrZXItY2FudmFzLW91dCcpO1xuICAgICAgICAgICAgc2VsZi5zZXRIYW5kKHgsIHkpO1xuICAgICAgICAgIH0sIGRlbGF5KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aGlzLnNldEhhbmQoeCwgeSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwic2V0SGFuZFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIHNldEhhbmQoeCwgeSwgcm91bmRCeTUpIHtcbiAgICAgICAgdmFyIF90aGlzNjAgPSB0aGlzO1xuXG4gICAgICAgIHZhciByYWRpYW4gPSBNYXRoLmF0YW4yKHgsIC15KSxcbiAgICAgICAgICAgIGlzSG91cnMgPSB0aGlzLmN1cnJlbnRWaWV3ID09PSAnaG91cnMnLFxuICAgICAgICAgICAgdW5pdCA9IE1hdGguUEkgLyAoaXNIb3VycyB8fCByb3VuZEJ5NSA/IDYgOiAzMCksXG4gICAgICAgICAgICB6ID0gTWF0aC5zcXJ0KHggKiB4ICsgeSAqIHkpLFxuICAgICAgICAgICAgaW5uZXIgPSBpc0hvdXJzICYmIHogPCAodGhpcy5vcHRpb25zLm91dGVyUmFkaXVzICsgdGhpcy5vcHRpb25zLmlubmVyUmFkaXVzKSAvIDIsXG4gICAgICAgICAgICByYWRpdXMgPSBpbm5lciA/IHRoaXMub3B0aW9ucy5pbm5lclJhZGl1cyA6IHRoaXMub3B0aW9ucy5vdXRlclJhZGl1cztcblxuICAgICAgICBpZiAodGhpcy5vcHRpb25zLnR3ZWx2ZUhvdXIpIHtcbiAgICAgICAgICByYWRpdXMgPSB0aGlzLm9wdGlvbnMub3V0ZXJSYWRpdXM7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSYWRpYW4gc2hvdWxkIGluIHJhbmdlIFswLCAyUEldXG4gICAgICAgIGlmIChyYWRpYW4gPCAwKSB7XG4gICAgICAgICAgcmFkaWFuID0gTWF0aC5QSSAqIDIgKyByYWRpYW47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBHZXQgdGhlIHJvdW5kIHZhbHVlXG4gICAgICAgIHZhciB2YWx1ZSA9IE1hdGgucm91bmQocmFkaWFuIC8gdW5pdCk7XG5cbiAgICAgICAgLy8gR2V0IHRoZSByb3VuZCByYWRpYW5cbiAgICAgICAgcmFkaWFuID0gdmFsdWUgKiB1bml0O1xuXG4gICAgICAgIC8vIENvcnJlY3QgdGhlIGhvdXJzIG9yIG1pbnV0ZXNcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy50d2VsdmVIb3VyKSB7XG4gICAgICAgICAgaWYgKGlzSG91cnMpIHtcbiAgICAgICAgICAgIGlmICh2YWx1ZSA9PT0gMCkgdmFsdWUgPSAxMjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJvdW5kQnk1KSB2YWx1ZSAqPSA1O1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSA2MCkgdmFsdWUgPSAwO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBpZiAoaXNIb3Vycykge1xuICAgICAgICAgICAgaWYgKHZhbHVlID09PSAxMikge1xuICAgICAgICAgICAgICB2YWx1ZSA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSA9IGlubmVyID8gdmFsdWUgPT09IDAgPyAxMiA6IHZhbHVlIDogdmFsdWUgPT09IDAgPyAwIDogdmFsdWUgKyAxMjtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgaWYgKHJvdW5kQnk1KSB7XG4gICAgICAgICAgICAgIHZhbHVlICo9IDU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAodmFsdWUgPT09IDYwKSB7XG4gICAgICAgICAgICAgIHZhbHVlID0gMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBPbmNlIGhvdXJzIG9yIG1pbnV0ZXMgY2hhbmdlZCwgdmlicmF0ZSB0aGUgZGV2aWNlXG4gICAgICAgIGlmICh0aGlzW3RoaXMuY3VycmVudFZpZXddICE9PSB2YWx1ZSkge1xuICAgICAgICAgIGlmICh0aGlzLnZpYnJhdGUgJiYgdGhpcy5vcHRpb25zLnZpYnJhdGUpIHtcbiAgICAgICAgICAgIC8vIERvIG5vdCB2aWJyYXRlIHRvbyBmcmVxdWVudGx5XG4gICAgICAgICAgICBpZiAoIXRoaXMudmlicmF0ZVRpbWVyKSB7XG4gICAgICAgICAgICAgIG5hdmlnYXRvclt0aGlzLnZpYnJhdGVdKDEwKTtcbiAgICAgICAgICAgICAgdGhpcy52aWJyYXRlVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICBfdGhpczYwLnZpYnJhdGVUaW1lciA9IG51bGw7XG4gICAgICAgICAgICAgIH0sIDEwMCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgdGhpc1t0aGlzLmN1cnJlbnRWaWV3XSA9IHZhbHVlO1xuICAgICAgICBpZiAoaXNIb3Vycykge1xuICAgICAgICAgIHRoaXNbJ3NwYW5Ib3VycyddLmlubmVySFRNTCA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXNbJ3NwYW5NaW51dGVzJ10uaW5uZXJIVE1MID0gVGltZXBpY2tlci5fYWRkTGVhZGluZ1plcm8odmFsdWUpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gU2V0IGNsb2NrIGhhbmQgYW5kIG90aGVycycgcG9zaXRpb25cbiAgICAgICAgdmFyIGN4MSA9IE1hdGguc2luKHJhZGlhbikgKiAocmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMpLFxuICAgICAgICAgICAgY3kxID0gLU1hdGguY29zKHJhZGlhbikgKiAocmFkaXVzIC0gdGhpcy5vcHRpb25zLnRpY2tSYWRpdXMpLFxuICAgICAgICAgICAgY3gyID0gTWF0aC5zaW4ocmFkaWFuKSAqIHJhZGl1cyxcbiAgICAgICAgICAgIGN5MiA9IC1NYXRoLmNvcyhyYWRpYW4pICogcmFkaXVzO1xuICAgICAgICB0aGlzLmhhbmQuc2V0QXR0cmlidXRlKCd4MicsIGN4MSk7XG4gICAgICAgIHRoaXMuaGFuZC5zZXRBdHRyaWJ1dGUoJ3kyJywgY3kxKTtcbiAgICAgICAgdGhpcy5iZy5zZXRBdHRyaWJ1dGUoJ2N4JywgY3gyKTtcbiAgICAgICAgdGhpcy5iZy5zZXRBdHRyaWJ1dGUoJ2N5JywgY3kyKTtcbiAgICAgIH1cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib3BlblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy5fdXBkYXRlVGltZUZyb21JbnB1dCgpO1xuICAgICAgICB0aGlzLnNob3dWaWV3KCdob3VycycpO1xuXG4gICAgICAgIHRoaXMubW9kYWwub3BlbigpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJjbG9zZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGNsb3NlKCkge1xuICAgICAgICBpZiAoIXRoaXMuaXNPcGVuKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTtcbiAgICAgICAgdGhpcy5tb2RhbC5jbG9zZSgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEZpbmlzaCB0aW1lcGlja2VyIHNlbGVjdGlvbi5cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcImRvbmVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkb25lKGUsIGNsZWFyVmFsdWUpIHtcbiAgICAgICAgLy8gU2V0IGlucHV0IHZhbHVlXG4gICAgICAgIHZhciBsYXN0ID0gdGhpcy5lbC52YWx1ZTtcbiAgICAgICAgdmFyIHZhbHVlID0gY2xlYXJWYWx1ZSA/ICcnIDogVGltZXBpY2tlci5fYWRkTGVhZGluZ1plcm8odGhpcy5ob3VycykgKyAnOicgKyBUaW1lcGlja2VyLl9hZGRMZWFkaW5nWmVybyh0aGlzLm1pbnV0ZXMpO1xuICAgICAgICB0aGlzLnRpbWUgPSB2YWx1ZTtcbiAgICAgICAgaWYgKCFjbGVhclZhbHVlICYmIHRoaXMub3B0aW9ucy50d2VsdmVIb3VyKSB7XG4gICAgICAgICAgdmFsdWUgPSB2YWx1ZSArIFwiIFwiICsgdGhpcy5hbU9yUG07XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbC52YWx1ZSA9IHZhbHVlO1xuXG4gICAgICAgIC8vIFRyaWdnZXIgY2hhbmdlIGV2ZW50XG4gICAgICAgIGlmICh2YWx1ZSAhPT0gbGFzdCkge1xuICAgICAgICAgIHRoaXMuJGVsLnRyaWdnZXIoJ2NoYW5nZScpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgICB0aGlzLmVsLmZvY3VzKCk7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImNsZWFyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gY2xlYXIoKSB7XG4gICAgICAgIHRoaXMuZG9uZShudWxsLCB0cnVlKTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoVGltZXBpY2tlci5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFRpbWVwaWNrZXIpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYWRkTGVhZGluZ1plcm9cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWRkTGVhZGluZ1plcm8obnVtKSB7XG4gICAgICAgIHJldHVybiAobnVtIDwgMTAgPyAnMCcgOiAnJykgKyBudW07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jcmVhdGVTVkdFbFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9jcmVhdGVTVkdFbChuYW1lKSB7XG4gICAgICAgIHZhciBzdmdOUyA9ICdodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Zyc7XG4gICAgICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoc3ZnTlMsIG5hbWUpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEB0eXBlZGVmIHtPYmplY3R9IFBvaW50XG4gICAgICAgKiBAcHJvcGVydHkge251bWJlcn0geCBUaGUgWCBDb29yZGluYXRlXG4gICAgICAgKiBAcHJvcGVydHkge251bWJlcn0geSBUaGUgWSBDb29yZGluYXRlXG4gICAgICAgKi9cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgeCBwb3NpdGlvbiBvZiBtb3VzZSBvciB0b3VjaCBldmVudFxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICogQHJldHVybiB7UG9pbnR9IHggYW5kIHkgbG9jYXRpb25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9Qb3NcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfUG9zKGUpIHtcbiAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICByZXR1cm4geyB4OiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WCwgeTogZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFkgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBtb3VzZSBldmVudFxuICAgICAgICByZXR1cm4geyB4OiBlLmNsaWVudFgsIHk6IGUuY2xpZW50WSB9O1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9UaW1lcGlja2VyO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFRpbWVwaWNrZXI7XG4gIH0oQ29tcG9uZW50KTtcblxuICBUaW1lcGlja2VyLl90ZW1wbGF0ZSA9IFsnPGRpdiBjbGFzcz0gXCJtb2RhbCB0aW1lcGlja2VyLW1vZGFsXCI+JywgJzxkaXYgY2xhc3M9XCJtb2RhbC1jb250ZW50IHRpbWVwaWNrZXItY29udGFpbmVyXCI+JywgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWRpZ2l0YWwtZGlzcGxheVwiPicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci10ZXh0LWNvbnRhaW5lclwiPicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1kaXNwbGF5LWNvbHVtblwiPicsICc8c3BhbiBjbGFzcz1cInRpbWVwaWNrZXItc3Bhbi1ob3VycyB0ZXh0LXByaW1hcnlcIj48L3NwYW4+JywgJzonLCAnPHNwYW4gY2xhc3M9XCJ0aW1lcGlja2VyLXNwYW4tbWludXRlc1wiPjwvc3Bhbj4nLCAnPC9kaXY+JywgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWRpc3BsYXktY29sdW1uIHRpbWVwaWNrZXItZGlzcGxheS1hbS1wbVwiPicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1zcGFuLWFtLXBtXCI+PC9kaXY+JywgJzwvZGl2PicsICc8L2Rpdj4nLCAnPC9kaXY+JywgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWFuYWxvZy1kaXNwbGF5XCI+JywgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLXBsYXRlXCI+JywgJzxkaXYgY2xhc3M9XCJ0aW1lcGlja2VyLWNhbnZhc1wiPjwvZGl2PicsICc8ZGl2IGNsYXNzPVwidGltZXBpY2tlci1kaWFsIHRpbWVwaWNrZXItaG91cnNcIj48L2Rpdj4nLCAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItZGlhbCB0aW1lcGlja2VyLW1pbnV0ZXMgdGltZXBpY2tlci1kaWFsLW91dFwiPjwvZGl2PicsICc8L2Rpdj4nLCAnPGRpdiBjbGFzcz1cInRpbWVwaWNrZXItZm9vdGVyXCI+PC9kaXY+JywgJzwvZGl2PicsICc8L2Rpdj4nLCAnPC9kaXY+J10uam9pbignJyk7XG5cbiAgTS5UaW1lcGlja2VyID0gVGltZXBpY2tlcjtcblxuICBpZiAoTS5qUXVlcnlMb2FkZWQpIHtcbiAgICBNLmluaXRpYWxpemVKcXVlcnlXcmFwcGVyKFRpbWVwaWNrZXIsICd0aW1lcGlja2VyJywgJ01fVGltZXBpY2tlcicpO1xuICB9XG59KShjYXNoKTtcbjsoZnVuY3Rpb24gKCQpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIHZhciBfZGVmYXVsdHMgPSB7fTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBDaGFyYWN0ZXJDb3VudGVyID0gZnVuY3Rpb24gKF9Db21wb25lbnQxNykge1xuICAgIF9pbmhlcml0cyhDaGFyYWN0ZXJDb3VudGVyLCBfQ29tcG9uZW50MTcpO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IENoYXJhY3RlckNvdW50ZXIgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBDaGFyYWN0ZXJDb3VudGVyKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2hhcmFjdGVyQ291bnRlcik7XG5cbiAgICAgIHZhciBfdGhpczYxID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKENoYXJhY3RlckNvdW50ZXIuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDaGFyYWN0ZXJDb3VudGVyKSkuY2FsbCh0aGlzLCBDaGFyYWN0ZXJDb3VudGVyLCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBfdGhpczYxLmVsLk1fQ2hhcmFjdGVyQ291bnRlciA9IF90aGlzNjE7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIGNoYXJhY3RlciBjb3VudGVyXG4gICAgICAgKi9cbiAgICAgIF90aGlzNjEub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBDaGFyYWN0ZXJDb3VudGVyLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXM2MS5pc0ludmFsaWQgPSBmYWxzZTtcbiAgICAgIF90aGlzNjEuaXNWYWxpZExlbmd0aCA9IGZhbHNlO1xuICAgICAgX3RoaXM2MS5fc2V0dXBDb3VudGVyKCk7XG4gICAgICBfdGhpczYxLl9zZXR1cEV2ZW50SGFuZGxlcnMoKTtcbiAgICAgIHJldHVybiBfdGhpczYxO1xuICAgIH1cblxuICAgIF9jcmVhdGVDbGFzcyhDaGFyYWN0ZXJDb3VudGVyLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLkNoYXJhY3RlckNvdW50ZXIgPSB1bmRlZmluZWQ7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNvdW50ZXIoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVVwZGF0ZUNvdW50ZXJCb3VuZCA9IHRoaXMudXBkYXRlQ291bnRlci5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVVcGRhdGVDb3VudGVyQm91bmQsIHRydWUpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5faGFuZGxlVXBkYXRlQ291bnRlckJvdW5kLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignZm9jdXMnLCB0aGlzLl9oYW5kbGVVcGRhdGVDb3VudGVyQm91bmQsIHRydWUpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5faGFuZGxlVXBkYXRlQ291bnRlckJvdW5kLCB0cnVlKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBjb3VudGVyIGVsZW1lbnRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cENvdW50ZXJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBDb3VudGVyKCkge1xuICAgICAgICB0aGlzLmNvdW50ZXJFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcbiAgICAgICAgJCh0aGlzLmNvdW50ZXJFbCkuYWRkQ2xhc3MoJ2NoYXJhY3Rlci1jb3VudGVyJykuY3NzKHtcbiAgICAgICAgICBmbG9hdDogJ3JpZ2h0JyxcbiAgICAgICAgICAnZm9udC1zaXplJzogJzEycHgnLFxuICAgICAgICAgIGhlaWdodDogMVxuICAgICAgICB9KTtcblxuICAgICAgICB0aGlzLiRlbC5wYXJlbnQoKS5hcHBlbmQodGhpcy5jb3VudGVyRWwpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFJlbW92ZSBjb3VudGVyIGVsZW1lbnRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVDb3VudGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUNvdW50ZXIoKSB7XG4gICAgICAgICQodGhpcy5jb3VudGVyRWwpLnJlbW92ZSgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFVwZGF0ZSBjb3VudGVyXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJ1cGRhdGVDb3VudGVyXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gdXBkYXRlQ291bnRlcigpIHtcbiAgICAgICAgdmFyIG1heExlbmd0aCA9ICt0aGlzLiRlbC5hdHRyKCdkYXRhLWxlbmd0aCcpLFxuICAgICAgICAgICAgYWN0dWFsTGVuZ3RoID0gdGhpcy5lbC52YWx1ZS5sZW5ndGg7XG4gICAgICAgIHRoaXMuaXNWYWxpZExlbmd0aCA9IGFjdHVhbExlbmd0aCA8PSBtYXhMZW5ndGg7XG4gICAgICAgIHZhciBjb3VudGVyU3RyaW5nID0gYWN0dWFsTGVuZ3RoO1xuXG4gICAgICAgIGlmIChtYXhMZW5ndGgpIHtcbiAgICAgICAgICBjb3VudGVyU3RyaW5nICs9ICcvJyArIG1heExlbmd0aDtcbiAgICAgICAgICB0aGlzLl92YWxpZGF0ZUlucHV0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAkKHRoaXMuY291bnRlckVsKS5odG1sKGNvdW50ZXJTdHJpbmcpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFkZCB2YWxpZGF0aW9uIGNsYXNzZXNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl92YWxpZGF0ZUlucHV0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3ZhbGlkYXRlSW5wdXQoKSB7XG4gICAgICAgIGlmICh0aGlzLmlzVmFsaWRMZW5ndGggJiYgdGhpcy5pc0ludmFsaWQpIHtcbiAgICAgICAgICB0aGlzLmlzSW52YWxpZCA9IGZhbHNlO1xuICAgICAgICAgIHRoaXMuJGVsLnJlbW92ZUNsYXNzKCdpbnZhbGlkJyk7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMuaXNWYWxpZExlbmd0aCAmJiAhdGhpcy5pc0ludmFsaWQpIHtcbiAgICAgICAgICB0aGlzLmlzSW52YWxpZCA9IHRydWU7XG4gICAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ3ZhbGlkJyk7XG4gICAgICAgICAgdGhpcy4kZWwuYWRkQ2xhc3MoJ2ludmFsaWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChDaGFyYWN0ZXJDb3VudGVyLl9fcHJvdG9fXyB8fCBPYmplY3QuZ2V0UHJvdG90eXBlT2YoQ2hhcmFjdGVyQ291bnRlciksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0NoYXJhY3RlckNvdW50ZXI7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gQ2hhcmFjdGVyQ291bnRlcjtcbiAgfShDb21wb25lbnQpO1xuXG4gIE0uQ2hhcmFjdGVyQ291bnRlciA9IENoYXJhY3RlckNvdW50ZXI7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihDaGFyYWN0ZXJDb3VudGVyLCAnY2hhcmFjdGVyQ291bnRlcicsICdNX0NoYXJhY3RlckNvdW50ZXInKTtcbiAgfVxufSkoY2FzaCk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGR1cmF0aW9uOiAyMDAsIC8vIG1zXG4gICAgZGlzdDogLTEwMCwgLy8gem9vbSBzY2FsZSBUT0RPOiBtYWtlIHRoaXMgbW9yZSBpbnR1aXRpdmUgYXMgYW4gb3B0aW9uXG4gICAgc2hpZnQ6IDAsIC8vIHNwYWNpbmcgZm9yIGNlbnRlciBpbWFnZVxuICAgIHBhZGRpbmc6IDAsIC8vIFBhZGRpbmcgYmV0d2VlbiBub24gY2VudGVyIGl0ZW1zXG4gICAgbnVtVmlzaWJsZTogNSwgLy8gTnVtYmVyIG9mIHZpc2libGUgaXRlbXMgaW4gY2Fyb3VzZWxcbiAgICBmdWxsV2lkdGg6IGZhbHNlLCAvLyBDaGFuZ2UgdG8gZnVsbCB3aWR0aCBzdHlsZXNcbiAgICBpbmRpY2F0b3JzOiBmYWxzZSwgLy8gVG9nZ2xlIGluZGljYXRvcnNcbiAgICBub1dyYXA6IGZhbHNlLCAvLyBEb24ndCB3cmFwIGFyb3VuZCBhbmQgY3ljbGUgdGhyb3VnaCBpdGVtcy5cbiAgICBvbkN5Y2xlVG86IG51bGwgLy8gQ2FsbGJhY2sgZm9yIHdoZW4gYSBuZXcgc2xpZGUgaXMgY3ljbGVkIHRvLlxuICB9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIENhcm91c2VsID0gZnVuY3Rpb24gKF9Db21wb25lbnQxOCkge1xuICAgIF9pbmhlcml0cyhDYXJvdXNlbCwgX0NvbXBvbmVudDE4KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBDYXJvdXNlbCBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIENhcm91c2VsKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgQ2Fyb3VzZWwpO1xuXG4gICAgICB2YXIgX3RoaXM2MiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChDYXJvdXNlbC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKENhcm91c2VsKSkuY2FsbCh0aGlzLCBDYXJvdXNlbCwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM2Mi5lbC5NX0Nhcm91c2VsID0gX3RoaXM2MjtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgY2Fyb3VzZWxcbiAgICAgICAqIEBtZW1iZXIgQ2Fyb3VzZWwjb3B0aW9uc1xuICAgICAgICogQHByb3Age051bWJlcn0gZHVyYXRpb25cbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IGRpc3RcbiAgICAgICAqIEBwcm9wIHtOdW1iZXJ9IHNoaWZ0XG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBwYWRkaW5nXG4gICAgICAgKiBAcHJvcCB7TnVtYmVyfSBudW1WaXNpYmxlXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gZnVsbFdpZHRoXG4gICAgICAgKiBAcHJvcCB7Qm9vbGVhbn0gaW5kaWNhdG9yc1xuICAgICAgICogQHByb3Age0Jvb2xlYW59IG5vV3JhcFxuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbkN5Y2xlVG9cbiAgICAgICAqL1xuICAgICAgX3RoaXM2Mi5vcHRpb25zID0gJC5leHRlbmQoe30sIENhcm91c2VsLmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgLy8gU2V0dXBcbiAgICAgIF90aGlzNjIuaGFzTXVsdGlwbGVTbGlkZXMgPSBfdGhpczYyLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmxlbmd0aCA+IDE7XG4gICAgICBfdGhpczYyLnNob3dJbmRpY2F0b3JzID0gX3RoaXM2Mi5vcHRpb25zLmluZGljYXRvcnMgJiYgX3RoaXM2Mi5oYXNNdWx0aXBsZVNsaWRlcztcbiAgICAgIF90aGlzNjIubm9XcmFwID0gX3RoaXM2Mi5vcHRpb25zLm5vV3JhcCB8fCAhX3RoaXM2Mi5oYXNNdWx0aXBsZVNsaWRlcztcbiAgICAgIF90aGlzNjIucHJlc3NlZCA9IGZhbHNlO1xuICAgICAgX3RoaXM2Mi5kcmFnZ2VkID0gZmFsc2U7XG4gICAgICBfdGhpczYyLm9mZnNldCA9IF90aGlzNjIudGFyZ2V0ID0gMDtcbiAgICAgIF90aGlzNjIuaW1hZ2VzID0gW107XG4gICAgICBfdGhpczYyLml0ZW1XaWR0aCA9IF90aGlzNjIuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKS5pbm5lcldpZHRoKCk7XG4gICAgICBfdGhpczYyLml0ZW1IZWlnaHQgPSBfdGhpczYyLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmZpcnN0KCkuaW5uZXJIZWlnaHQoKTtcbiAgICAgIF90aGlzNjIuZGltID0gX3RoaXM2Mi5pdGVtV2lkdGggKiAyICsgX3RoaXM2Mi5vcHRpb25zLnBhZGRpbmcgfHwgMTsgLy8gTWFrZSBzdXJlIGRpbSBpcyBub24gemVybyBmb3IgZGl2aXNpb25zLlxuICAgICAgX3RoaXM2Mi5fYXV0b1Njcm9sbEJvdW5kID0gX3RoaXM2Mi5fYXV0b1Njcm9sbC5iaW5kKF90aGlzNjIpO1xuICAgICAgX3RoaXM2Mi5fdHJhY2tCb3VuZCA9IF90aGlzNjIuX3RyYWNrLmJpbmQoX3RoaXM2Mik7XG5cbiAgICAgIC8vIEZ1bGwgV2lkdGggY2Fyb3VzZWwgc2V0dXBcbiAgICAgIGlmIChfdGhpczYyLm9wdGlvbnMuZnVsbFdpZHRoKSB7XG4gICAgICAgIF90aGlzNjIub3B0aW9ucy5kaXN0ID0gMDtcbiAgICAgICAgX3RoaXM2Mi5fc2V0Q2Fyb3VzZWxIZWlnaHQoKTtcblxuICAgICAgICAvLyBPZmZzZXQgZml4ZWQgaXRlbXMgd2hlbiBpbmRpY2F0b3JzLlxuICAgICAgICBpZiAoX3RoaXM2Mi5zaG93SW5kaWNhdG9ycykge1xuICAgICAgICAgIF90aGlzNjIuJGVsLmZpbmQoJy5jYXJvdXNlbC1maXhlZC1pdGVtJykuYWRkQ2xhc3MoJ3dpdGgtaW5kaWNhdG9ycycpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEl0ZXJhdGUgdGhyb3VnaCBzbGlkZXNcbiAgICAgIF90aGlzNjIuJGluZGljYXRvcnMgPSAkKCc8dWwgY2xhc3M9XCJpbmRpY2F0b3JzXCI+PC91bD4nKTtcbiAgICAgIF90aGlzNjIuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICAgICAgX3RoaXM2Mi5pbWFnZXMucHVzaChlbCk7XG4gICAgICAgIGlmIChfdGhpczYyLnNob3dJbmRpY2F0b3JzKSB7XG4gICAgICAgICAgdmFyICRpbmRpY2F0b3IgPSAkKCc8bGkgY2xhc3M9XCJpbmRpY2F0b3ItaXRlbVwiPjwvbGk+Jyk7XG5cbiAgICAgICAgICAvLyBBZGQgYWN0aXZlIHRvIGZpcnN0IGJ5IGRlZmF1bHQuXG4gICAgICAgICAgaWYgKGkgPT09IDApIHtcbiAgICAgICAgICAgICRpbmRpY2F0b3JbMF0uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgX3RoaXM2Mi4kaW5kaWNhdG9ycy5hcHBlbmQoJGluZGljYXRvcik7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgaWYgKF90aGlzNjIuc2hvd0luZGljYXRvcnMpIHtcbiAgICAgICAgX3RoaXM2Mi4kZWwuYXBwZW5kKF90aGlzNjIuJGluZGljYXRvcnMpO1xuICAgICAgfVxuICAgICAgX3RoaXM2Mi5jb3VudCA9IF90aGlzNjIuaW1hZ2VzLmxlbmd0aDtcblxuICAgICAgLy8gQ2FwIG51bVZpc2libGUgYXQgY291bnRcbiAgICAgIF90aGlzNjIub3B0aW9ucy5udW1WaXNpYmxlID0gTWF0aC5taW4oX3RoaXM2Mi5jb3VudCwgX3RoaXM2Mi5vcHRpb25zLm51bVZpc2libGUpO1xuXG4gICAgICAvLyBTZXR1cCBjcm9zcyBicm93c2VyIHN0cmluZ1xuICAgICAgX3RoaXM2Mi54Zm9ybSA9ICd0cmFuc2Zvcm0nO1xuICAgICAgWyd3ZWJraXQnLCAnTW96JywgJ08nLCAnbXMnXS5ldmVyeShmdW5jdGlvbiAocHJlZml4KSB7XG4gICAgICAgIHZhciBlID0gcHJlZml4ICsgJ1RyYW5zZm9ybSc7XG4gICAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuYm9keS5zdHlsZVtlXSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgICBfdGhpczYyLnhmb3JtID0gZTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9KTtcblxuICAgICAgX3RoaXM2Mi5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICBfdGhpczYyLl9zY3JvbGwoX3RoaXM2Mi5vZmZzZXQpO1xuICAgICAgcmV0dXJuIF90aGlzNjI7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKENhcm91c2VsLCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLk1fQ2Fyb3VzZWwgPSB1bmRlZmluZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cEV2ZW50SGFuZGxlcnNcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0dXBFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB2YXIgX3RoaXM2MyA9IHRoaXM7XG5cbiAgICAgICAgdGhpcy5faGFuZGxlQ2Fyb3VzZWxUYXBCb3VuZCA9IHRoaXMuX2hhbmRsZUNhcm91c2VsVGFwLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcm91c2VsRHJhZ0JvdW5kID0gdGhpcy5faGFuZGxlQ2Fyb3VzZWxEcmFnLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZUJvdW5kID0gdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZUNhcm91c2VsQ2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZUNhcm91c2VsQ2xpY2suYmluZCh0aGlzKTtcblxuICAgICAgICBpZiAodHlwZW9mIHdpbmRvdy5vbnRvdWNoc3RhcnQgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaHN0YXJ0JywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxUYXBCb3VuZCk7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaG1vdmUnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbERyYWdCb3VuZCk7XG4gICAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZUJvdW5kKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxUYXBCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxEcmFnQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNhcm91c2VsQ2xpY2tCb3VuZCk7XG5cbiAgICAgICAgaWYgKHRoaXMuc2hvd0luZGljYXRvcnMgJiYgdGhpcy4kaW5kaWNhdG9ycykge1xuICAgICAgICAgIHRoaXMuX2hhbmRsZUluZGljYXRvckNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbmRpY2F0b3JDbGljay5iaW5kKHRoaXMpO1xuICAgICAgICAgIHRoaXMuJGluZGljYXRvcnMuZmluZCgnLmluZGljYXRvci1pdGVtJykuZWFjaChmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM2My5faGFuZGxlSW5kaWNhdG9yQ2xpY2tCb3VuZCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBSZXNpemVcbiAgICAgICAgdmFyIHRocm90dGxlZFJlc2l6ZSA9IE0udGhyb3R0bGUodGhpcy5faGFuZGxlUmVzaXplLCAyMDApO1xuICAgICAgICB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCA9IHRocm90dGxlZFJlc2l6ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB2YXIgX3RoaXM2NCA9IHRoaXM7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB3aW5kb3cub250b3VjaHN0YXJ0ICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZUNhcm91c2VsVGFwQm91bmQpO1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxEcmFnQm91bmQpO1xuICAgICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFJlbGVhc2VCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVDYXJvdXNlbFRhcEJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVDYXJvdXNlbERyYWdCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuX2hhbmRsZUNhcm91c2VsUmVsZWFzZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxSZWxlYXNlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2Fyb3VzZWxDbGlja0JvdW5kKTtcblxuICAgICAgICBpZiAodGhpcy5zaG93SW5kaWNhdG9ycyAmJiB0aGlzLiRpbmRpY2F0b3JzKSB7XG4gICAgICAgICAgdGhpcy4kaW5kaWNhdG9ycy5maW5kKCcuaW5kaWNhdG9yLWl0ZW0nKS5lYWNoKGZ1bmN0aW9uIChlbCwgaSkge1xuICAgICAgICAgICAgZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCBfdGhpczY0Ll9oYW5kbGVJbmRpY2F0b3JDbGlja0JvdW5kKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKCdyZXNpemUnLCB0aGlzLl9oYW5kbGVUaHJvdHRsZWRSZXNpemVCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENhcm91c2VsIFRhcFxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNhcm91c2VsVGFwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNhcm91c2VsVGFwKGUpIHtcbiAgICAgICAgLy8gRml4ZXMgZmlyZWZveCBkcmFnZ2FibGUgaW1hZ2UgYnVnXG4gICAgICAgIGlmIChlLnR5cGUgPT09ICdtb3VzZWRvd24nICYmICQoZS50YXJnZXQpLmlzKCdpbWcnKSkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByZXNzZWQgPSB0cnVlO1xuICAgICAgICB0aGlzLmRyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy52ZXJ0aWNhbERyYWdnZWQgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5yZWZlcmVuY2UgPSB0aGlzLl94cG9zKGUpO1xuICAgICAgICB0aGlzLnJlZmVyZW5jZVkgPSB0aGlzLl95cG9zKGUpO1xuXG4gICAgICAgIHRoaXMudmVsb2NpdHkgPSB0aGlzLmFtcGxpdHVkZSA9IDA7XG4gICAgICAgIHRoaXMuZnJhbWUgPSB0aGlzLm9mZnNldDtcbiAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBEYXRlLm5vdygpO1xuICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGlja2VyKTtcbiAgICAgICAgdGhpcy50aWNrZXIgPSBzZXRJbnRlcnZhbCh0aGlzLl90cmFja0JvdW5kLCAxMDApO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBDYXJvdXNlbCBEcmFnXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2Fyb3VzZWxEcmFnXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZUNhcm91c2VsRHJhZyhlKSB7XG4gICAgICAgIHZhciB4ID0gdm9pZCAwLFxuICAgICAgICAgICAgeSA9IHZvaWQgMCxcbiAgICAgICAgICAgIGRlbHRhID0gdm9pZCAwLFxuICAgICAgICAgICAgZGVsdGFZID0gdm9pZCAwO1xuICAgICAgICBpZiAodGhpcy5wcmVzc2VkKSB7XG4gICAgICAgICAgeCA9IHRoaXMuX3hwb3MoZSk7XG4gICAgICAgICAgeSA9IHRoaXMuX3lwb3MoZSk7XG4gICAgICAgICAgZGVsdGEgPSB0aGlzLnJlZmVyZW5jZSAtIHg7XG4gICAgICAgICAgZGVsdGFZID0gTWF0aC5hYnModGhpcy5yZWZlcmVuY2VZIC0geSk7XG4gICAgICAgICAgaWYgKGRlbHRhWSA8IDMwICYmICF0aGlzLnZlcnRpY2FsRHJhZ2dlZCkge1xuICAgICAgICAgICAgLy8gSWYgdmVydGljYWwgc2Nyb2xsaW5nIGRvbid0IGFsbG93IGRyYWdnaW5nLlxuICAgICAgICAgICAgaWYgKGRlbHRhID4gMiB8fCBkZWx0YSA8IC0yKSB7XG4gICAgICAgICAgICAgIHRoaXMuZHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgICAgIHRoaXMucmVmZXJlbmNlID0geDtcbiAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsKHRoaXMub2Zmc2V0ICsgZGVsdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0gZWxzZSBpZiAodGhpcy5kcmFnZ2VkKSB7XG4gICAgICAgICAgICAvLyBJZiBkcmFnZ2luZyBkb24ndCBhbGxvdyB2ZXJ0aWNhbCBzY3JvbGwuXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBWZXJ0aWNhbCBzY3JvbGxpbmcuXG4gICAgICAgICAgICB0aGlzLnZlcnRpY2FsRHJhZ2dlZCA9IHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuZHJhZ2dlZCkge1xuICAgICAgICAgIC8vIElmIGRyYWdnaW5nIGRvbid0IGFsbG93IHZlcnRpY2FsIHNjcm9sbC5cbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgQ2Fyb3VzZWwgUmVsZWFzZVxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUNhcm91c2VsUmVsZWFzZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYXJvdXNlbFJlbGVhc2UoZSkge1xuICAgICAgICBpZiAodGhpcy5wcmVzc2VkKSB7XG4gICAgICAgICAgdGhpcy5wcmVzc2VkID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLnRpY2tlcik7XG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5vZmZzZXQ7XG4gICAgICAgIGlmICh0aGlzLnZlbG9jaXR5ID4gMTAgfHwgdGhpcy52ZWxvY2l0eSA8IC0xMCkge1xuICAgICAgICAgIHRoaXMuYW1wbGl0dWRlID0gMC45ICogdGhpcy52ZWxvY2l0eTtcbiAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMub2Zmc2V0ICsgdGhpcy5hbXBsaXR1ZGU7XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy50YXJnZXQgPSBNYXRoLnJvdW5kKHRoaXMudGFyZ2V0IC8gdGhpcy5kaW0pICogdGhpcy5kaW07XG5cbiAgICAgICAgLy8gTm8gd3JhcCBvZiBpdGVtcy5cbiAgICAgICAgaWYgKHRoaXMubm9XcmFwKSB7XG4gICAgICAgICAgaWYgKHRoaXMudGFyZ2V0ID49IHRoaXMuZGltICogKHRoaXMuY291bnQgLSAxKSkge1xuICAgICAgICAgICAgdGhpcy50YXJnZXQgPSB0aGlzLmRpbSAqICh0aGlzLmNvdW50IC0gMSk7XG4gICAgICAgICAgfSBlbHNlIGlmICh0aGlzLnRhcmdldCA8IDApIHtcbiAgICAgICAgICAgIHRoaXMudGFyZ2V0ID0gMDtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5hbXBsaXR1ZGUgPSB0aGlzLnRhcmdldCAtIHRoaXMub2Zmc2V0O1xuICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLl9hdXRvU2Nyb2xsQm91bmQpO1xuXG4gICAgICAgIGlmICh0aGlzLmRyYWdnZWQpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIENhcm91c2VsIENMaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlQ2Fyb3VzZWxDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVDYXJvdXNlbENsaWNrKGUpIHtcbiAgICAgICAgLy8gRGlzYWJsZSBjbGlja3MgaWYgY2Fyb3VzZWwgd2FzIGRyYWdnZWQuXG4gICAgICAgIGlmICh0aGlzLmRyYWdnZWQpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH0gZWxzZSBpZiAoIXRoaXMub3B0aW9ucy5mdWxsV2lkdGgpIHtcbiAgICAgICAgICB2YXIgY2xpY2tlZEluZGV4ID0gJChlLnRhcmdldCkuY2xvc2VzdCgnLmNhcm91c2VsLWl0ZW0nKS5pbmRleCgpO1xuICAgICAgICAgIHZhciBkaWZmID0gdGhpcy5fd3JhcCh0aGlzLmNlbnRlcikgLSBjbGlja2VkSW5kZXg7XG5cbiAgICAgICAgICAvLyBEaXNhYmxlIGNsaWNrcyBpZiBjYXJvdXNlbCB3YXMgc2hpZnRlZCBieSBjbGlja1xuICAgICAgICAgIGlmIChkaWZmICE9PSAwKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB0aGlzLl9jeWNsZVRvKGNsaWNrZWRJbmRleCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgSW5kaWNhdG9yIENMaWNrXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlSW5kaWNhdG9yQ2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5kaWNhdG9yQ2xpY2soZSkge1xuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgIHZhciBpbmRpY2F0b3IgPSAkKGUudGFyZ2V0KS5jbG9zZXN0KCcuaW5kaWNhdG9yLWl0ZW0nKTtcbiAgICAgICAgaWYgKGluZGljYXRvci5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLl9jeWNsZVRvKGluZGljYXRvci5pbmRleCgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBUaHJvdHRsZSBSZXNpemVcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVSZXNpemVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlUmVzaXplKGUpIHtcbiAgICAgICAgaWYgKHRoaXMub3B0aW9ucy5mdWxsV2lkdGgpIHtcbiAgICAgICAgICB0aGlzLml0ZW1XaWR0aCA9IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKS5pbm5lcldpZHRoKCk7XG4gICAgICAgICAgdGhpcy5pbWFnZUhlaWdodCA9IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtLmFjdGl2ZScpLmhlaWdodCgpO1xuICAgICAgICAgIHRoaXMuZGltID0gdGhpcy5pdGVtV2lkdGggKiAyICsgdGhpcy5vcHRpb25zLnBhZGRpbmc7XG4gICAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmNlbnRlciAqIDIgKiB0aGlzLml0ZW1XaWR0aDtcbiAgICAgICAgICB0aGlzLnRhcmdldCA9IHRoaXMub2Zmc2V0O1xuICAgICAgICAgIHRoaXMuX3NldENhcm91c2VsSGVpZ2h0KHRydWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRoaXMuX3Njcm9sbCgpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IGNhcm91c2VsIGhlaWdodCBiYXNlZCBvbiBmaXJzdCBzbGlkZVxuICAgICAgICogQHBhcmFtIHtCb29sZWFtfSBpbWFnZU9ubHkgLSB0cnVlIGZvciBpbWFnZSBzbGlkZXNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRDYXJvdXNlbEhlaWdodFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXRDYXJvdXNlbEhlaWdodChpbWFnZU9ubHkpIHtcbiAgICAgICAgdmFyIF90aGlzNjUgPSB0aGlzO1xuXG4gICAgICAgIHZhciBmaXJzdFNsaWRlID0gdGhpcy4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0uYWN0aXZlJykubGVuZ3RoID8gdGhpcy4kZWwuZmluZCgnLmNhcm91c2VsLWl0ZW0uYWN0aXZlJykuZmlyc3QoKSA6IHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykuZmlyc3QoKTtcbiAgICAgICAgdmFyIGZpcnN0SW1hZ2UgPSBmaXJzdFNsaWRlLmZpbmQoJ2ltZycpLmZpcnN0KCk7XG4gICAgICAgIGlmIChmaXJzdEltYWdlLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChmaXJzdEltYWdlWzBdLmNvbXBsZXRlKSB7XG4gICAgICAgICAgICAvLyBJZiBpbWFnZSB3b24ndCB0cmlnZ2VyIHRoZSBsb2FkIGV2ZW50XG4gICAgICAgICAgICB2YXIgaW1hZ2VIZWlnaHQgPSBmaXJzdEltYWdlLmhlaWdodCgpO1xuICAgICAgICAgICAgaWYgKGltYWdlSGVpZ2h0ID4gMCkge1xuICAgICAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIGltYWdlSGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAvLyBJZiBpbWFnZSBzdGlsbCBoYXMgbm8gaGVpZ2h0LCB1c2UgdGhlIG5hdHVyYWwgZGltZW5zaW9ucyB0byBjYWxjdWxhdGVcbiAgICAgICAgICAgICAgdmFyIG5hdHVyYWxXaWR0aCA9IGZpcnN0SW1hZ2VbMF0ubmF0dXJhbFdpZHRoO1xuICAgICAgICAgICAgICB2YXIgbmF0dXJhbEhlaWdodCA9IGZpcnN0SW1hZ2VbMF0ubmF0dXJhbEhlaWdodDtcbiAgICAgICAgICAgICAgdmFyIGFkanVzdGVkSGVpZ2h0ID0gdGhpcy4kZWwud2lkdGgoKSAvIG5hdHVyYWxXaWR0aCAqIG5hdHVyYWxIZWlnaHQ7XG4gICAgICAgICAgICAgIHRoaXMuJGVsLmNzcygnaGVpZ2h0JywgYWRqdXN0ZWRIZWlnaHQgKyAncHgnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgLy8gR2V0IGhlaWdodCB3aGVuIGltYWdlIGlzIGxvYWRlZCBub3JtYWxseVxuICAgICAgICAgICAgZmlyc3RJbWFnZS5vbmUoJ2xvYWQnLCBmdW5jdGlvbiAoZWwsIGkpIHtcbiAgICAgICAgICAgICAgX3RoaXM2NS4kZWwuY3NzKCdoZWlnaHQnLCBlbC5vZmZzZXRIZWlnaHQgKyAncHgnKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmICghaW1hZ2VPbmx5KSB7XG4gICAgICAgICAgdmFyIHNsaWRlSGVpZ2h0ID0gZmlyc3RTbGlkZS5oZWlnaHQoKTtcbiAgICAgICAgICB0aGlzLiRlbC5jc3MoJ2hlaWdodCcsIHNsaWRlSGVpZ2h0ICsgJ3B4Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBHZXQgeCBwb3NpdGlvbiBmcm9tIGV2ZW50XG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfeHBvc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF94cG9zKGUpIHtcbiAgICAgICAgLy8gdG91Y2ggZXZlbnRcbiAgICAgICAgaWYgKGUudGFyZ2V0VG91Y2hlcyAmJiBlLnRhcmdldFRvdWNoZXMubGVuZ3RoID49IDEpIHtcbiAgICAgICAgICByZXR1cm4gZS50YXJnZXRUb3VjaGVzWzBdLmNsaWVudFg7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBtb3VzZSBldmVudFxuICAgICAgICByZXR1cm4gZS5jbGllbnRYO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCB5IHBvc2l0aW9uIGZyb20gZXZlbnRcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl95cG9zXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3lwb3MoZSkge1xuICAgICAgICAvLyB0b3VjaCBldmVudFxuICAgICAgICBpZiAoZS50YXJnZXRUb3VjaGVzICYmIGUudGFyZ2V0VG91Y2hlcy5sZW5ndGggPj0gMSkge1xuICAgICAgICAgIHJldHVybiBlLnRhcmdldFRvdWNoZXNbMF0uY2xpZW50WTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG1vdXNlIGV2ZW50XG4gICAgICAgIHJldHVybiBlLmNsaWVudFk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogV3JhcCBpbmRleFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl93cmFwXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3dyYXAoeCkge1xuICAgICAgICByZXR1cm4geCA+PSB0aGlzLmNvdW50ID8geCAlIHRoaXMuY291bnQgOiB4IDwgMCA/IHRoaXMuX3dyYXAodGhpcy5jb3VudCArIHggJSB0aGlzLmNvdW50KSA6IHg7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogVHJhY2tzIHNjcm9sbGluZyBpbmZvcm1hdGlvblxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3RyYWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3RyYWNrKCkge1xuICAgICAgICB2YXIgbm93ID0gdm9pZCAwLFxuICAgICAgICAgICAgZWxhcHNlZCA9IHZvaWQgMCxcbiAgICAgICAgICAgIGRlbHRhID0gdm9pZCAwLFxuICAgICAgICAgICAgdiA9IHZvaWQgMDtcblxuICAgICAgICBub3cgPSBEYXRlLm5vdygpO1xuICAgICAgICBlbGFwc2VkID0gbm93IC0gdGhpcy50aW1lc3RhbXA7XG4gICAgICAgIHRoaXMudGltZXN0YW1wID0gbm93O1xuICAgICAgICBkZWx0YSA9IHRoaXMub2Zmc2V0IC0gdGhpcy5mcmFtZTtcbiAgICAgICAgdGhpcy5mcmFtZSA9IHRoaXMub2Zmc2V0O1xuXG4gICAgICAgIHYgPSAxMDAwICogZGVsdGEgLyAoMSArIGVsYXBzZWQpO1xuICAgICAgICB0aGlzLnZlbG9jaXR5ID0gMC44ICogdiArIDAuMiAqIHRoaXMudmVsb2NpdHk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQXV0byBzY3JvbGxzIHRvIG5lYXJlc3QgY2Fyb3VzZWwgaXRlbS5cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hdXRvU2Nyb2xsXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2F1dG9TY3JvbGwoKSB7XG4gICAgICAgIHZhciBlbGFwc2VkID0gdm9pZCAwLFxuICAgICAgICAgICAgZGVsdGEgPSB2b2lkIDA7XG5cbiAgICAgICAgaWYgKHRoaXMuYW1wbGl0dWRlKSB7XG4gICAgICAgICAgZWxhcHNlZCA9IERhdGUubm93KCkgLSB0aGlzLnRpbWVzdGFtcDtcbiAgICAgICAgICBkZWx0YSA9IHRoaXMuYW1wbGl0dWRlICogTWF0aC5leHAoLWVsYXBzZWQgLyB0aGlzLm9wdGlvbnMuZHVyYXRpb24pO1xuICAgICAgICAgIGlmIChkZWx0YSA+IDIgfHwgZGVsdGEgPCAtMikge1xuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsKHRoaXMudGFyZ2V0IC0gZGVsdGEpO1xuICAgICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2F1dG9TY3JvbGxCb3VuZCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbCh0aGlzLnRhcmdldCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2Nyb2xsIHRvIHRhcmdldFxuICAgICAgICogQHBhcmFtIHtOdW1iZXJ9IHhcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zY3JvbGxcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2Nyb2xsKHgpIHtcbiAgICAgICAgdmFyIF90aGlzNjYgPSB0aGlzO1xuXG4gICAgICAgIC8vIFRyYWNrIHNjcm9sbGluZyBzdGF0ZVxuICAgICAgICBpZiAoIXRoaXMuJGVsLmhhc0NsYXNzKCdzY3JvbGxpbmcnKSkge1xuICAgICAgICAgIHRoaXMuZWwuY2xhc3NMaXN0LmFkZCgnc2Nyb2xsaW5nJyk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRoaXMuc2Nyb2xsaW5nVGltZW91dCAhPSBudWxsKSB7XG4gICAgICAgICAgd2luZG93LmNsZWFyVGltZW91dCh0aGlzLnNjcm9sbGluZ1RpbWVvdXQpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuc2Nyb2xsaW5nVGltZW91dCA9IHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICBfdGhpczY2LiRlbC5yZW1vdmVDbGFzcygnc2Nyb2xsaW5nJyk7XG4gICAgICAgIH0sIHRoaXMub3B0aW9ucy5kdXJhdGlvbik7XG5cbiAgICAgICAgLy8gU3RhcnQgYWN0dWFsIHNjcm9sbFxuICAgICAgICB2YXIgaSA9IHZvaWQgMCxcbiAgICAgICAgICAgIGhhbGYgPSB2b2lkIDAsXG4gICAgICAgICAgICBkZWx0YSA9IHZvaWQgMCxcbiAgICAgICAgICAgIGRpciA9IHZvaWQgMCxcbiAgICAgICAgICAgIHR3ZWVuID0gdm9pZCAwLFxuICAgICAgICAgICAgZWwgPSB2b2lkIDAsXG4gICAgICAgICAgICBhbGlnbm1lbnQgPSB2b2lkIDAsXG4gICAgICAgICAgICB6VHJhbnNsYXRpb24gPSB2b2lkIDAsXG4gICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IHZvaWQgMCxcbiAgICAgICAgICAgIGNlbnRlclR3ZWVuZWRPcGFjaXR5ID0gdm9pZCAwO1xuICAgICAgICB2YXIgbGFzdENlbnRlciA9IHRoaXMuY2VudGVyO1xuICAgICAgICB2YXIgbnVtVmlzaWJsZU9mZnNldCA9IDEgLyB0aGlzLm9wdGlvbnMubnVtVmlzaWJsZTtcblxuICAgICAgICB0aGlzLm9mZnNldCA9IHR5cGVvZiB4ID09PSAnbnVtYmVyJyA/IHggOiB0aGlzLm9mZnNldDtcbiAgICAgICAgdGhpcy5jZW50ZXIgPSBNYXRoLmZsb29yKCh0aGlzLm9mZnNldCArIHRoaXMuZGltIC8gMikgLyB0aGlzLmRpbSk7XG4gICAgICAgIGRlbHRhID0gdGhpcy5vZmZzZXQgLSB0aGlzLmNlbnRlciAqIHRoaXMuZGltO1xuICAgICAgICBkaXIgPSBkZWx0YSA8IDAgPyAxIDogLTE7XG4gICAgICAgIHR3ZWVuID0gLWRpciAqIGRlbHRhICogMiAvIHRoaXMuZGltO1xuICAgICAgICBoYWxmID0gdGhpcy5jb3VudCA+PiAxO1xuXG4gICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZnVsbFdpZHRoKSB7XG4gICAgICAgICAgYWxpZ25tZW50ID0gJ3RyYW5zbGF0ZVgoMCknO1xuICAgICAgICAgIGNlbnRlclR3ZWVuZWRPcGFjaXR5ID0gMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBhbGlnbm1lbnQgPSAndHJhbnNsYXRlWCgnICsgKHRoaXMuZWwuY2xpZW50V2lkdGggLSB0aGlzLml0ZW1XaWR0aCkgLyAyICsgJ3B4KSAnO1xuICAgICAgICAgIGFsaWdubWVudCArPSAndHJhbnNsYXRlWSgnICsgKHRoaXMuZWwuY2xpZW50SGVpZ2h0IC0gdGhpcy5pdGVtSGVpZ2h0KSAvIDIgKyAncHgpJztcbiAgICAgICAgICBjZW50ZXJUd2VlbmVkT3BhY2l0eSA9IDEgLSBudW1WaXNpYmxlT2Zmc2V0ICogdHdlZW47XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgaW5kaWNhdG9yIGFjdGl2ZVxuICAgICAgICBpZiAodGhpcy5zaG93SW5kaWNhdG9ycykge1xuICAgICAgICAgIHZhciBkaWZmID0gdGhpcy5jZW50ZXIgJSB0aGlzLmNvdW50O1xuICAgICAgICAgIHZhciBhY3RpdmVJbmRpY2F0b3IgPSB0aGlzLiRpbmRpY2F0b3JzLmZpbmQoJy5pbmRpY2F0b3ItaXRlbS5hY3RpdmUnKTtcbiAgICAgICAgICBpZiAoYWN0aXZlSW5kaWNhdG9yLmluZGV4KCkgIT09IGRpZmYpIHtcbiAgICAgICAgICAgIGFjdGl2ZUluZGljYXRvci5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XG4gICAgICAgICAgICB0aGlzLiRpbmRpY2F0b3JzLmZpbmQoJy5pbmRpY2F0b3ItaXRlbScpLmVxKGRpZmYpWzBdLmNsYXNzTGlzdC5hZGQoJ2FjdGl2ZScpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIGNlbnRlclxuICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuXG4gICAgICAgIGlmICghdGhpcy5ub1dyYXAgfHwgdGhpcy5jZW50ZXIgPj0gMCAmJiB0aGlzLmNlbnRlciA8IHRoaXMuY291bnQpIHtcbiAgICAgICAgICBlbCA9IHRoaXMuaW1hZ2VzW3RoaXMuX3dyYXAodGhpcy5jZW50ZXIpXTtcblxuICAgICAgICAgIC8vIEFkZCBhY3RpdmUgY2xhc3MgdG8gY2VudGVyIGl0ZW0uXG4gICAgICAgICAgaWYgKCEkKGVsKS5oYXNDbGFzcygnYWN0aXZlJykpIHtcbiAgICAgICAgICAgIHRoaXMuJGVsLmZpbmQoJy5jYXJvdXNlbC1pdGVtJykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgICAgICAgZWwuY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciB0cmFuc2Zvcm1TdHJpbmcgPSBhbGlnbm1lbnQgKyBcIiB0cmFuc2xhdGVYKFwiICsgLWRlbHRhIC8gMiArIFwicHgpIHRyYW5zbGF0ZVgoXCIgKyBkaXIgKiB0aGlzLm9wdGlvbnMuc2hpZnQgKiB0d2VlbiAqIGkgKyBcInB4KSB0cmFuc2xhdGVaKFwiICsgdGhpcy5vcHRpb25zLmRpc3QgKiB0d2VlbiArIFwicHgpXCI7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlSXRlbVN0eWxlKGVsLCBjZW50ZXJUd2VlbmVkT3BhY2l0eSwgMCwgdHJhbnNmb3JtU3RyaW5nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAoaSA9IDE7IGkgPD0gaGFsZjsgKytpKSB7XG4gICAgICAgICAgLy8gcmlnaHQgc2lkZVxuICAgICAgICAgIGlmICh0aGlzLm9wdGlvbnMuZnVsbFdpZHRoKSB7XG4gICAgICAgICAgICB6VHJhbnNsYXRpb24gPSB0aGlzLm9wdGlvbnMuZGlzdDtcbiAgICAgICAgICAgIHR3ZWVuZWRPcGFjaXR5ID0gaSA9PT0gaGFsZiAmJiBkZWx0YSA8IDAgPyAxIC0gdHdlZW4gOiAxO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB6VHJhbnNsYXRpb24gPSB0aGlzLm9wdGlvbnMuZGlzdCAqIChpICogMiArIHR3ZWVuICogZGlyKTtcbiAgICAgICAgICAgIHR3ZWVuZWRPcGFjaXR5ID0gMSAtIG51bVZpc2libGVPZmZzZXQgKiAoaSAqIDIgKyB0d2VlbiAqIGRpcik7XG4gICAgICAgICAgfVxuICAgICAgICAgIC8vIERvbid0IHNob3cgd3JhcHBlZCBpdGVtcy5cbiAgICAgICAgICBpZiAoIXRoaXMubm9XcmFwIHx8IHRoaXMuY2VudGVyICsgaSA8IHRoaXMuY291bnQpIHtcbiAgICAgICAgICAgIGVsID0gdGhpcy5pbWFnZXNbdGhpcy5fd3JhcCh0aGlzLmNlbnRlciArIGkpXTtcbiAgICAgICAgICAgIHZhciBfdHJhbnNmb3JtU3RyaW5nID0gYWxpZ25tZW50ICsgXCIgdHJhbnNsYXRlWChcIiArICh0aGlzLm9wdGlvbnMuc2hpZnQgKyAodGhpcy5kaW0gKiBpIC0gZGVsdGEpIC8gMikgKyBcInB4KSB0cmFuc2xhdGVaKFwiICsgelRyYW5zbGF0aW9uICsgXCJweClcIjtcbiAgICAgICAgICAgIHRoaXMuX3VwZGF0ZUl0ZW1TdHlsZShlbCwgdHdlZW5lZE9wYWNpdHksIC1pLCBfdHJhbnNmb3JtU3RyaW5nKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICAvLyBsZWZ0IHNpZGVcbiAgICAgICAgICBpZiAodGhpcy5vcHRpb25zLmZ1bGxXaWR0aCkge1xuICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gdGhpcy5vcHRpb25zLmRpc3Q7XG4gICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IGkgPT09IGhhbGYgJiYgZGVsdGEgPiAwID8gMSAtIHR3ZWVuIDogMTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgelRyYW5zbGF0aW9uID0gdGhpcy5vcHRpb25zLmRpc3QgKiAoaSAqIDIgLSB0d2VlbiAqIGRpcik7XG4gICAgICAgICAgICB0d2VlbmVkT3BhY2l0eSA9IDEgLSBudW1WaXNpYmxlT2Zmc2V0ICogKGkgKiAyIC0gdHdlZW4gKiBkaXIpO1xuICAgICAgICAgIH1cbiAgICAgICAgICAvLyBEb24ndCBzaG93IHdyYXBwZWQgaXRlbXMuXG4gICAgICAgICAgaWYgKCF0aGlzLm5vV3JhcCB8fCB0aGlzLmNlbnRlciAtIGkgPj0gMCkge1xuICAgICAgICAgICAgZWwgPSB0aGlzLmltYWdlc1t0aGlzLl93cmFwKHRoaXMuY2VudGVyIC0gaSldO1xuICAgICAgICAgICAgdmFyIF90cmFuc2Zvcm1TdHJpbmcyID0gYWxpZ25tZW50ICsgXCIgdHJhbnNsYXRlWChcIiArICgtdGhpcy5vcHRpb25zLnNoaWZ0ICsgKC10aGlzLmRpbSAqIGkgLSBkZWx0YSkgLyAyKSArIFwicHgpIHRyYW5zbGF0ZVooXCIgKyB6VHJhbnNsYXRpb24gKyBcInB4KVwiO1xuICAgICAgICAgICAgdGhpcy5fdXBkYXRlSXRlbVN0eWxlKGVsLCB0d2VlbmVkT3BhY2l0eSwgLWksIF90cmFuc2Zvcm1TdHJpbmcyKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICAvLyBjZW50ZXJcbiAgICAgICAgLy8gRG9uJ3Qgc2hvdyB3cmFwcGVkIGl0ZW1zLlxuICAgICAgICBpZiAoIXRoaXMubm9XcmFwIHx8IHRoaXMuY2VudGVyID49IDAgJiYgdGhpcy5jZW50ZXIgPCB0aGlzLmNvdW50KSB7XG4gICAgICAgICAgZWwgPSB0aGlzLmltYWdlc1t0aGlzLl93cmFwKHRoaXMuY2VudGVyKV07XG4gICAgICAgICAgdmFyIF90cmFuc2Zvcm1TdHJpbmczID0gYWxpZ25tZW50ICsgXCIgdHJhbnNsYXRlWChcIiArIC1kZWx0YSAvIDIgKyBcInB4KSB0cmFuc2xhdGVYKFwiICsgZGlyICogdGhpcy5vcHRpb25zLnNoaWZ0ICogdHdlZW4gKyBcInB4KSB0cmFuc2xhdGVaKFwiICsgdGhpcy5vcHRpb25zLmRpc3QgKiB0d2VlbiArIFwicHgpXCI7XG4gICAgICAgICAgdGhpcy5fdXBkYXRlSXRlbVN0eWxlKGVsLCBjZW50ZXJUd2VlbmVkT3BhY2l0eSwgMCwgX3RyYW5zZm9ybVN0cmluZzMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gb25DeWNsZVRvIGNhbGxiYWNrXG4gICAgICAgIHZhciAkY3Vyckl0ZW0gPSB0aGlzLiRlbC5maW5kKCcuY2Fyb3VzZWwtaXRlbScpLmVxKHRoaXMuX3dyYXAodGhpcy5jZW50ZXIpKTtcbiAgICAgICAgaWYgKGxhc3RDZW50ZXIgIT09IHRoaXMuY2VudGVyICYmIHR5cGVvZiB0aGlzLm9wdGlvbnMub25DeWNsZVRvID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uQ3ljbGVUby5jYWxsKHRoaXMsICRjdXJySXRlbVswXSwgdGhpcy5kcmFnZ2VkKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIE9uZSB0aW1lIGNhbGxiYWNrXG4gICAgICAgIGlmICh0eXBlb2YgdGhpcy5vbmVUaW1lQ2FsbGJhY2sgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9uZVRpbWVDYWxsYmFjay5jYWxsKHRoaXMsICRjdXJySXRlbVswXSwgdGhpcy5kcmFnZ2VkKTtcbiAgICAgICAgICB0aGlzLm9uZVRpbWVDYWxsYmFjayA9IG51bGw7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDeWNsZSB0byB0YXJnZXRcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBvcGFjaXR5XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gekluZGV4XG4gICAgICAgKiBAcGFyYW0ge1N0cmluZ30gdHJhbnNmb3JtXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfdXBkYXRlSXRlbVN0eWxlXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3VwZGF0ZUl0ZW1TdHlsZShlbCwgb3BhY2l0eSwgekluZGV4LCB0cmFuc2Zvcm0pIHtcbiAgICAgICAgZWwuc3R5bGVbdGhpcy54Zm9ybV0gPSB0cmFuc2Zvcm07XG4gICAgICAgIGVsLnN0eWxlLnpJbmRleCA9IHpJbmRleDtcbiAgICAgICAgZWwuc3R5bGUub3BhY2l0eSA9IG9wYWNpdHk7XG4gICAgICAgIGVsLnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZSc7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3ljbGUgdG8gdGFyZ2V0XG4gICAgICAgKiBAcGFyYW0ge051bWJlcn0gblxuICAgICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jeWNsZVRvXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2N5Y2xlVG8obiwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIGRpZmYgPSB0aGlzLmNlbnRlciAlIHRoaXMuY291bnQgLSBuO1xuXG4gICAgICAgIC8vIEFjY291bnQgZm9yIHdyYXBhcm91bmQuXG4gICAgICAgIGlmICghdGhpcy5ub1dyYXApIHtcbiAgICAgICAgICBpZiAoZGlmZiA8IDApIHtcbiAgICAgICAgICAgIGlmIChNYXRoLmFicyhkaWZmICsgdGhpcy5jb3VudCkgPCBNYXRoLmFicyhkaWZmKSkge1xuICAgICAgICAgICAgICBkaWZmICs9IHRoaXMuY291bnQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSBlbHNlIGlmIChkaWZmID4gMCkge1xuICAgICAgICAgICAgaWYgKE1hdGguYWJzKGRpZmYgLSB0aGlzLmNvdW50KSA8IGRpZmYpIHtcbiAgICAgICAgICAgICAgZGlmZiAtPSB0aGlzLmNvdW50O1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudGFyZ2V0ID0gdGhpcy5kaW0gKiBNYXRoLnJvdW5kKHRoaXMub2Zmc2V0IC8gdGhpcy5kaW0pO1xuICAgICAgICAvLyBOZXh0XG4gICAgICAgIGlmIChkaWZmIDwgMCkge1xuICAgICAgICAgIHRoaXMudGFyZ2V0ICs9IHRoaXMuZGltICogTWF0aC5hYnMoZGlmZik7XG5cbiAgICAgICAgICAvLyBQcmV2XG4gICAgICAgIH0gZWxzZSBpZiAoZGlmZiA+IDApIHtcbiAgICAgICAgICB0aGlzLnRhcmdldCAtPSB0aGlzLmRpbSAqIGRpZmY7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTZXQgb25lIHRpbWUgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiBjYWxsYmFjayA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub25lVGltZUNhbGxiYWNrID0gY2FsbGJhY2s7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBTY3JvbGxcbiAgICAgICAgaWYgKHRoaXMub2Zmc2V0ICE9PSB0aGlzLnRhcmdldCkge1xuICAgICAgICAgIHRoaXMuYW1wbGl0dWRlID0gdGhpcy50YXJnZXQgLSB0aGlzLm9mZnNldDtcbiAgICAgICAgICB0aGlzLnRpbWVzdGFtcCA9IERhdGUubm93KCk7XG4gICAgICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKHRoaXMuX2F1dG9TY3JvbGxCb3VuZCk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDeWNsZSB0byBuZXh0IGl0ZW1cbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbbl1cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIm5leHRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBuZXh0KG4pIHtcbiAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCB8fCBpc05hTihuKSkge1xuICAgICAgICAgIG4gPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jZW50ZXIgKyBuO1xuICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy5jb3VudCB8fCBpbmRleCA8IDApIHtcbiAgICAgICAgICBpZiAodGhpcy5ub1dyYXApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbmRleCA9IHRoaXMuX3dyYXAoaW5kZXgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2N5Y2xlVG8oaW5kZXgpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEN5Y2xlIHRvIHByZXZpb3VzIGl0ZW1cbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbbl1cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcInByZXZcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBwcmV2KG4pIHtcbiAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCB8fCBpc05hTihuKSkge1xuICAgICAgICAgIG4gPSAxO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIGluZGV4ID0gdGhpcy5jZW50ZXIgLSBuO1xuICAgICAgICBpZiAoaW5kZXggPj0gdGhpcy5jb3VudCB8fCBpbmRleCA8IDApIHtcbiAgICAgICAgICBpZiAodGhpcy5ub1dyYXApIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpbmRleCA9IHRoaXMuX3dyYXAoaW5kZXgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy5fY3ljbGVUbyhpbmRleCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ3ljbGUgdG8gbnRoIGl0ZW1cbiAgICAgICAqIEBwYXJhbSB7TnVtYmVyfSBbbl1cbiAgICAgICAqIEBwYXJhbSB7RnVuY3Rpb259IGNhbGxiYWNrXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJzZXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBzZXQobiwgY2FsbGJhY2spIHtcbiAgICAgICAgaWYgKG4gPT09IHVuZGVmaW5lZCB8fCBpc05hTihuKSkge1xuICAgICAgICAgIG4gPSAwO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKG4gPiB0aGlzLmNvdW50IHx8IG4gPCAwKSB7XG4gICAgICAgICAgaWYgKHRoaXMubm9XcmFwKSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbiA9IHRoaXMuX3dyYXAobik7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9jeWNsZVRvKG4sIGNhbGxiYWNrKTtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoQ2Fyb3VzZWwuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihDYXJvdXNlbCksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX0Nhcm91c2VsO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIENhcm91c2VsO1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5DYXJvdXNlbCA9IENhcm91c2VsO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoQ2Fyb3VzZWwsICdjYXJvdXNlbCcsICdNX0Nhcm91c2VsJyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHtcbiAgICBvbk9wZW46IHVuZGVmaW5lZCxcbiAgICBvbkNsb3NlOiB1bmRlZmluZWRcbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBUYXBUYXJnZXQgPSBmdW5jdGlvbiAoX0NvbXBvbmVudDE5KSB7XG4gICAgX2luaGVyaXRzKFRhcFRhcmdldCwgX0NvbXBvbmVudDE5KTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBUYXBUYXJnZXQgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBUYXBUYXJnZXQoZWwsIG9wdGlvbnMpIHtcbiAgICAgIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBUYXBUYXJnZXQpO1xuXG4gICAgICB2YXIgX3RoaXM2NyA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChUYXBUYXJnZXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUYXBUYXJnZXQpKS5jYWxsKHRoaXMsIFRhcFRhcmdldCwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM2Ny5lbC5NX1RhcFRhcmdldCA9IF90aGlzNjc7XG5cbiAgICAgIC8qKlxuICAgICAgICogT3B0aW9ucyBmb3IgdGhlIHNlbGVjdFxuICAgICAgICogQG1lbWJlciBUYXBUYXJnZXQjb3B0aW9uc1xuICAgICAgICogQHByb3Age0Z1bmN0aW9ufSBvbk9wZW4gLSBDYWxsYmFjayBmdW5jdGlvbiBjYWxsZWQgd2hlbiBmZWF0dXJlIGRpc2NvdmVyeSBpcyBvcGVuZWRcbiAgICAgICAqIEBwcm9wIHtGdW5jdGlvbn0gb25DbG9zZSAtIENhbGxiYWNrIGZ1bmN0aW9uIGNhbGxlZCB3aGVuIGZlYXR1cmUgZGlzY292ZXJ5IGlzIGNsb3NlZFxuICAgICAgICovXG4gICAgICBfdGhpczY3Lm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgVGFwVGFyZ2V0LmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXM2Ny5pc09wZW4gPSBmYWxzZTtcblxuICAgICAgLy8gc2V0dXBcbiAgICAgIF90aGlzNjcuJG9yaWdpbiA9ICQoJyMnICsgX3RoaXM2Ny4kZWwuYXR0cignZGF0YS10YXJnZXQnKSk7XG4gICAgICBfdGhpczY3Ll9zZXR1cCgpO1xuXG4gICAgICBfdGhpczY3Ll9jYWxjdWxhdGVQb3NpdGlvbmluZygpO1xuICAgICAgX3RoaXM2Ny5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICByZXR1cm4gX3RoaXM2NztcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoVGFwVGFyZ2V0LCBbe1xuICAgICAga2V5OiBcImRlc3Ryb3lcIixcblxuXG4gICAgICAvKipcbiAgICAgICAqIFRlYXJkb3duIGNvbXBvbmVudFxuICAgICAgICovXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gZGVzdHJveSgpIHtcbiAgICAgICAgdGhpcy5fcmVtb3ZlRXZlbnRIYW5kbGVycygpO1xuICAgICAgICB0aGlzLmVsLlRhcFRhcmdldCA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2suYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5faGFuZGxlVGFyZ2V0Q2xpY2tCb3VuZCA9IHRoaXMuX2hhbmRsZVRhcmdldENsaWNrLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZU9yaWdpbkNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVPcmlnaW5DbGljay5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUYXJnZXRDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5vcmlnaW5FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU9yaWdpbkNsaWNrQm91bmQpO1xuXG4gICAgICAgIC8vIFJlc2l6ZVxuICAgICAgICB2YXIgdGhyb3R0bGVkUmVzaXplID0gTS50aHJvdHRsZSh0aGlzLl9oYW5kbGVSZXNpemUsIDIwMCk7XG4gICAgICAgIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kID0gdGhyb3R0bGVkUmVzaXplLmJpbmQodGhpcyk7XG5cbiAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIHRoaXMuX2hhbmRsZVRocm90dGxlZFJlc2l6ZUJvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVUYXJnZXRDbGlja0JvdW5kKTtcbiAgICAgICAgdGhpcy5vcmlnaW5FbC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZU9yaWdpbkNsaWNrQm91bmQpO1xuICAgICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigncmVzaXplJywgdGhpcy5faGFuZGxlVGhyb3R0bGVkUmVzaXplQm91bmQpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBUYXJnZXQgQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVUYXJnZXRDbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVUYXJnZXRDbGljayhlKSB7XG4gICAgICAgIHRoaXMub3BlbigpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBPcmlnaW4gQ2xpY2tcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVPcmlnaW5DbGlja1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVPcmlnaW5DbGljayhlKSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgUmVzaXplXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlUmVzaXplXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJlc2l6ZShlKSB7XG4gICAgICAgIHRoaXMuX2NhbGN1bGF0ZVBvc2l0aW9uaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFJlc2l6ZVxuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZURvY3VtZW50Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlRG9jdW1lbnRDbGljayhlKSB7XG4gICAgICAgIGlmICghJChlLnRhcmdldCkuY2xvc2VzdCgnLnRhcC10YXJnZXQtd3JhcHBlcicpLmxlbmd0aCkge1xuICAgICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIFRhcCBUYXJnZXRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cFwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cCgpIHtcbiAgICAgICAgLy8gQ3JlYXRpbmcgdGFwIHRhcmdldFxuICAgICAgICB0aGlzLndyYXBwZXIgPSB0aGlzLiRlbC5wYXJlbnQoKVswXTtcbiAgICAgICAgdGhpcy53YXZlRWwgPSAkKHRoaXMud3JhcHBlcikuZmluZCgnLnRhcC10YXJnZXQtd2F2ZScpWzBdO1xuICAgICAgICB0aGlzLm9yaWdpbkVsID0gJCh0aGlzLndyYXBwZXIpLmZpbmQoJy50YXAtdGFyZ2V0LW9yaWdpbicpWzBdO1xuICAgICAgICB0aGlzLmNvbnRlbnRFbCA9IHRoaXMuJGVsLmZpbmQoJy50YXAtdGFyZ2V0LWNvbnRlbnQnKVswXTtcblxuICAgICAgICAvLyBDcmVhdGluZyB3cmFwcGVyXG4gICAgICAgIGlmICghJCh0aGlzLndyYXBwZXIpLmhhc0NsYXNzKCcudGFwLXRhcmdldC13cmFwcGVyJykpIHtcbiAgICAgICAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLndyYXBwZXIuY2xhc3NMaXN0LmFkZCgndGFwLXRhcmdldC13cmFwcGVyJyk7XG4gICAgICAgICAgdGhpcy4kZWwuYmVmb3JlKCQodGhpcy53cmFwcGVyKSk7XG4gICAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZCh0aGlzLmVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0aW5nIGNvbnRlbnRcbiAgICAgICAgaWYgKCF0aGlzLmNvbnRlbnRFbCkge1xuICAgICAgICAgIHRoaXMuY29udGVudEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gICAgICAgICAgdGhpcy5jb250ZW50RWwuY2xhc3NMaXN0LmFkZCgndGFwLXRhcmdldC1jb250ZW50Jyk7XG4gICAgICAgICAgdGhpcy4kZWwuYXBwZW5kKHRoaXMuY29udGVudEVsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENyZWF0aW5nIGZvcmVncm91bmQgd2F2ZVxuICAgICAgICBpZiAoIXRoaXMud2F2ZUVsKSB7XG4gICAgICAgICAgdGhpcy53YXZlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgICB0aGlzLndhdmVFbC5jbGFzc0xpc3QuYWRkKCd0YXAtdGFyZ2V0LXdhdmUnKTtcblxuICAgICAgICAgIC8vIENyZWF0aW5nIG9yaWdpblxuICAgICAgICAgIGlmICghdGhpcy5vcmlnaW5FbCkge1xuICAgICAgICAgICAgdGhpcy5vcmlnaW5FbCA9IHRoaXMuJG9yaWdpbi5jbG9uZSh0cnVlLCB0cnVlKTtcbiAgICAgICAgICAgIHRoaXMub3JpZ2luRWwuYWRkQ2xhc3MoJ3RhcC10YXJnZXQtb3JpZ2luJyk7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbkVsLnJlbW92ZUF0dHIoJ2lkJyk7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbkVsLnJlbW92ZUF0dHIoJ3N0eWxlJyk7XG4gICAgICAgICAgICB0aGlzLm9yaWdpbkVsID0gdGhpcy5vcmlnaW5FbFswXTtcbiAgICAgICAgICAgIHRoaXMud2F2ZUVsLmFwcGVuZCh0aGlzLm9yaWdpbkVsKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICB0aGlzLndyYXBwZXIuYXBwZW5kKHRoaXMud2F2ZUVsKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIENhbGN1bGF0ZSBwb3NpdGlvbmluZ1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2NhbGN1bGF0ZVBvc2l0aW9uaW5nXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2NhbGN1bGF0ZVBvc2l0aW9uaW5nKCkge1xuICAgICAgICAvLyBFbGVtZW50IG9yIHBhcmVudCBpcyBmaXhlZCBwb3NpdGlvbj9cbiAgICAgICAgdmFyIGlzRml4ZWQgPSB0aGlzLiRvcmlnaW4uY3NzKCdwb3NpdGlvbicpID09PSAnZml4ZWQnO1xuICAgICAgICBpZiAoIWlzRml4ZWQpIHtcbiAgICAgICAgICB2YXIgcGFyZW50cyA9IHRoaXMuJG9yaWdpbi5wYXJlbnRzKCk7XG4gICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwYXJlbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpc0ZpeGVkID0gJChwYXJlbnRzW2ldKS5jc3MoJ3Bvc2l0aW9uJykgPT0gJ2ZpeGVkJztcbiAgICAgICAgICAgIGlmIChpc0ZpeGVkKSB7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENhbGN1bGF0aW5nIG9yaWdpblxuICAgICAgICB2YXIgb3JpZ2luV2lkdGggPSB0aGlzLiRvcmlnaW4ub3V0ZXJXaWR0aCgpO1xuICAgICAgICB2YXIgb3JpZ2luSGVpZ2h0ID0gdGhpcy4kb3JpZ2luLm91dGVySGVpZ2h0KCk7XG4gICAgICAgIHZhciBvcmlnaW5Ub3AgPSBpc0ZpeGVkID8gdGhpcy4kb3JpZ2luLm9mZnNldCgpLnRvcCAtIE0uZ2V0RG9jdW1lbnRTY3JvbGxUb3AoKSA6IHRoaXMuJG9yaWdpbi5vZmZzZXQoKS50b3A7XG4gICAgICAgIHZhciBvcmlnaW5MZWZ0ID0gaXNGaXhlZCA/IHRoaXMuJG9yaWdpbi5vZmZzZXQoKS5sZWZ0IC0gTS5nZXREb2N1bWVudFNjcm9sbExlZnQoKSA6IHRoaXMuJG9yaWdpbi5vZmZzZXQoKS5sZWZ0O1xuXG4gICAgICAgIC8vIENhbGN1bGF0aW5nIHNjcmVlblxuICAgICAgICB2YXIgd2luZG93V2lkdGggPSB3aW5kb3cuaW5uZXJXaWR0aDtcbiAgICAgICAgdmFyIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcbiAgICAgICAgdmFyIGNlbnRlclggPSB3aW5kb3dXaWR0aCAvIDI7XG4gICAgICAgIHZhciBjZW50ZXJZID0gd2luZG93SGVpZ2h0IC8gMjtcbiAgICAgICAgdmFyIGlzTGVmdCA9IG9yaWdpbkxlZnQgPD0gY2VudGVyWDtcbiAgICAgICAgdmFyIGlzUmlnaHQgPSBvcmlnaW5MZWZ0ID4gY2VudGVyWDtcbiAgICAgICAgdmFyIGlzVG9wID0gb3JpZ2luVG9wIDw9IGNlbnRlclk7XG4gICAgICAgIHZhciBpc0JvdHRvbSA9IG9yaWdpblRvcCA+IGNlbnRlclk7XG4gICAgICAgIHZhciBpc0NlbnRlclggPSBvcmlnaW5MZWZ0ID49IHdpbmRvd1dpZHRoICogMC4yNSAmJiBvcmlnaW5MZWZ0IDw9IHdpbmRvd1dpZHRoICogMC43NTtcblxuICAgICAgICAvLyBDYWxjdWxhdGluZyB0YXAgdGFyZ2V0XG4gICAgICAgIHZhciB0YXBUYXJnZXRXaWR0aCA9IHRoaXMuJGVsLm91dGVyV2lkdGgoKTtcbiAgICAgICAgdmFyIHRhcFRhcmdldEhlaWdodCA9IHRoaXMuJGVsLm91dGVySGVpZ2h0KCk7XG4gICAgICAgIHZhciB0YXBUYXJnZXRUb3AgPSBvcmlnaW5Ub3AgKyBvcmlnaW5IZWlnaHQgLyAyIC0gdGFwVGFyZ2V0SGVpZ2h0IC8gMjtcbiAgICAgICAgdmFyIHRhcFRhcmdldExlZnQgPSBvcmlnaW5MZWZ0ICsgb3JpZ2luV2lkdGggLyAyIC0gdGFwVGFyZ2V0V2lkdGggLyAyO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0UG9zaXRpb24gPSBpc0ZpeGVkID8gJ2ZpeGVkJyA6ICdhYnNvbHV0ZSc7XG5cbiAgICAgICAgLy8gQ2FsY3VsYXRpbmcgY29udGVudFxuICAgICAgICB2YXIgdGFwVGFyZ2V0VGV4dFdpZHRoID0gaXNDZW50ZXJYID8gdGFwVGFyZ2V0V2lkdGggOiB0YXBUYXJnZXRXaWR0aCAvIDIgKyBvcmlnaW5XaWR0aDtcbiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRIZWlnaHQgPSB0YXBUYXJnZXRIZWlnaHQgLyAyO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0VGV4dFRvcCA9IGlzVG9wID8gdGFwVGFyZ2V0SGVpZ2h0IC8gMiA6IDA7XG4gICAgICAgIHZhciB0YXBUYXJnZXRUZXh0Qm90dG9tID0gMDtcbiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRMZWZ0ID0gaXNMZWZ0ICYmICFpc0NlbnRlclggPyB0YXBUYXJnZXRXaWR0aCAvIDIgLSBvcmlnaW5XaWR0aCA6IDA7XG4gICAgICAgIHZhciB0YXBUYXJnZXRUZXh0UmlnaHQgPSAwO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0VGV4dFBhZGRpbmcgPSBvcmlnaW5XaWR0aDtcbiAgICAgICAgdmFyIHRhcFRhcmdldFRleHRBbGlnbiA9IGlzQm90dG9tID8gJ2JvdHRvbScgOiAndG9wJztcblxuICAgICAgICAvLyBDYWxjdWxhdGluZyB3YXZlXG4gICAgICAgIHZhciB0YXBUYXJnZXRXYXZlV2lkdGggPSBvcmlnaW5XaWR0aCA+IG9yaWdpbkhlaWdodCA/IG9yaWdpbldpZHRoICogMiA6IG9yaWdpbldpZHRoICogMjtcbiAgICAgICAgdmFyIHRhcFRhcmdldFdhdmVIZWlnaHQgPSB0YXBUYXJnZXRXYXZlV2lkdGg7XG4gICAgICAgIHZhciB0YXBUYXJnZXRXYXZlVG9wID0gdGFwVGFyZ2V0SGVpZ2h0IC8gMiAtIHRhcFRhcmdldFdhdmVIZWlnaHQgLyAyO1xuICAgICAgICB2YXIgdGFwVGFyZ2V0V2F2ZUxlZnQgPSB0YXBUYXJnZXRXaWR0aCAvIDIgLSB0YXBUYXJnZXRXYXZlV2lkdGggLyAyO1xuXG4gICAgICAgIC8vIFNldHRpbmcgdGFwIHRhcmdldFxuICAgICAgICB2YXIgdGFwVGFyZ2V0V3JhcHBlckNzc09iaiA9IHt9O1xuICAgICAgICB0YXBUYXJnZXRXcmFwcGVyQ3NzT2JqLnRvcCA9IGlzVG9wID8gdGFwVGFyZ2V0VG9wICsgJ3B4JyA6ICcnO1xuICAgICAgICB0YXBUYXJnZXRXcmFwcGVyQ3NzT2JqLnJpZ2h0ID0gaXNSaWdodCA/IHdpbmRvd1dpZHRoIC0gdGFwVGFyZ2V0TGVmdCAtIHRhcFRhcmdldFdpZHRoICsgJ3B4JyA6ICcnO1xuICAgICAgICB0YXBUYXJnZXRXcmFwcGVyQ3NzT2JqLmJvdHRvbSA9IGlzQm90dG9tID8gd2luZG93SGVpZ2h0IC0gdGFwVGFyZ2V0VG9wIC0gdGFwVGFyZ2V0SGVpZ2h0ICsgJ3B4JyA6ICcnO1xuICAgICAgICB0YXBUYXJnZXRXcmFwcGVyQ3NzT2JqLmxlZnQgPSBpc0xlZnQgPyB0YXBUYXJnZXRMZWZ0ICsgJ3B4JyA6ICcnO1xuICAgICAgICB0YXBUYXJnZXRXcmFwcGVyQ3NzT2JqLnBvc2l0aW9uID0gdGFwVGFyZ2V0UG9zaXRpb247XG4gICAgICAgICQodGhpcy53cmFwcGVyKS5jc3ModGFwVGFyZ2V0V3JhcHBlckNzc09iaik7XG5cbiAgICAgICAgLy8gU2V0dGluZyBjb250ZW50XG4gICAgICAgICQodGhpcy5jb250ZW50RWwpLmNzcyh7XG4gICAgICAgICAgd2lkdGg6IHRhcFRhcmdldFRleHRXaWR0aCArICdweCcsXG4gICAgICAgICAgaGVpZ2h0OiB0YXBUYXJnZXRUZXh0SGVpZ2h0ICsgJ3B4JyxcbiAgICAgICAgICB0b3A6IHRhcFRhcmdldFRleHRUb3AgKyAncHgnLFxuICAgICAgICAgIHJpZ2h0OiB0YXBUYXJnZXRUZXh0UmlnaHQgKyAncHgnLFxuICAgICAgICAgIGJvdHRvbTogdGFwVGFyZ2V0VGV4dEJvdHRvbSArICdweCcsXG4gICAgICAgICAgbGVmdDogdGFwVGFyZ2V0VGV4dExlZnQgKyAncHgnLFxuICAgICAgICAgIHBhZGRpbmc6IHRhcFRhcmdldFRleHRQYWRkaW5nICsgJ3B4JyxcbiAgICAgICAgICB2ZXJ0aWNhbEFsaWduOiB0YXBUYXJnZXRUZXh0QWxpZ25cbiAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gU2V0dGluZyB3YXZlXG4gICAgICAgICQodGhpcy53YXZlRWwpLmNzcyh7XG4gICAgICAgICAgdG9wOiB0YXBUYXJnZXRXYXZlVG9wICsgJ3B4JyxcbiAgICAgICAgICBsZWZ0OiB0YXBUYXJnZXRXYXZlTGVmdCArICdweCcsXG4gICAgICAgICAgd2lkdGg6IHRhcFRhcmdldFdhdmVXaWR0aCArICdweCcsXG4gICAgICAgICAgaGVpZ2h0OiB0YXBUYXJnZXRXYXZlSGVpZ2h0ICsgJ3B4J1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBPcGVuIFRhcFRhcmdldFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwib3BlblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIG9wZW4oKSB7XG4gICAgICAgIGlmICh0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9uT3BlbiBjYWxsYmFja1xuICAgICAgICBpZiAodHlwZW9mIHRoaXMub3B0aW9ucy5vbk9wZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICB0aGlzLm9wdGlvbnMub25PcGVuLmNhbGwodGhpcywgdGhpcy4kb3JpZ2luWzBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTtcbiAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ29wZW4nKTtcblxuICAgICAgICBkb2N1bWVudC5ib2R5LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlRG9jdW1lbnRDbGlja0JvdW5kLCB0cnVlKTtcbiAgICAgICAgZG9jdW1lbnQuYm9keS5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogQ2xvc2UgVGFwIFRhcmdldFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiY2xvc2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBjbG9zZSgpIHtcbiAgICAgICAgaWYgKCF0aGlzLmlzT3Blbikge1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIG9uQ2xvc2UgY2FsbGJhY2tcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25DbG9zZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgIHRoaXMub3B0aW9ucy5vbkNsb3NlLmNhbGwodGhpcywgdGhpcy4kb3JpZ2luWzBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaXNPcGVuID0gZmFsc2U7XG4gICAgICAgIHRoaXMud3JhcHBlci5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuJyk7XG5cbiAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvY3VtZW50Q2xpY2tCb3VuZCwgdHJ1ZSk7XG4gICAgICAgIGRvY3VtZW50LmJvZHkucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVEb2N1bWVudENsaWNrQm91bmQpO1xuICAgICAgfVxuICAgIH1dLCBbe1xuICAgICAga2V5OiBcImluaXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBpbml0KGVscywgb3B0aW9ucykge1xuICAgICAgICByZXR1cm4gX2dldChUYXBUYXJnZXQuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihUYXBUYXJnZXQpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9UYXBUYXJnZXQ7XG4gICAgICB9XG4gICAgfSwge1xuICAgICAga2V5OiBcImRlZmF1bHRzXCIsXG4gICAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIF9kZWZhdWx0cztcbiAgICAgIH1cbiAgICB9XSk7XG5cbiAgICByZXR1cm4gVGFwVGFyZ2V0O1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5UYXBUYXJnZXQgPSBUYXBUYXJnZXQ7XG5cbiAgaWYgKE0ualF1ZXJ5TG9hZGVkKSB7XG4gICAgTS5pbml0aWFsaXplSnF1ZXJ5V3JhcHBlcihUYXBUYXJnZXQsICd0YXBUYXJnZXQnLCAnTV9UYXBUYXJnZXQnKTtcbiAgfVxufSkoY2FzaCk7XG47KGZ1bmN0aW9uICgkKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICB2YXIgX2RlZmF1bHRzID0ge1xuICAgIGNsYXNzZXM6ICcnLFxuICAgIGRyb3Bkb3duT3B0aW9uczoge31cbiAgfTtcblxuICAvKipcbiAgICogQGNsYXNzXG4gICAqXG4gICAqL1xuXG4gIHZhciBGb3JtU2VsZWN0ID0gZnVuY3Rpb24gKF9Db21wb25lbnQyMCkge1xuICAgIF9pbmhlcml0cyhGb3JtU2VsZWN0LCBfQ29tcG9uZW50MjApO1xuXG4gICAgLyoqXG4gICAgICogQ29uc3RydWN0IEZvcm1TZWxlY3QgaW5zdGFuY2VcbiAgICAgKiBAY29uc3RydWN0b3JcbiAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IGVsXG4gICAgICogQHBhcmFtIHtPYmplY3R9IG9wdGlvbnNcbiAgICAgKi9cbiAgICBmdW5jdGlvbiBGb3JtU2VsZWN0KGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRm9ybVNlbGVjdCk7XG5cbiAgICAgIC8vIERvbid0IGluaXQgaWYgYnJvd3NlciBkZWZhdWx0IHZlcnNpb25cbiAgICAgIHZhciBfdGhpczY4ID0gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgKEZvcm1TZWxlY3QuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihGb3JtU2VsZWN0KSkuY2FsbCh0aGlzLCBGb3JtU2VsZWN0LCBlbCwgb3B0aW9ucykpO1xuXG4gICAgICBpZiAoX3RoaXM2OC4kZWwuaGFzQ2xhc3MoJ2Jyb3dzZXItZGVmYXVsdCcpKSB7XG4gICAgICAgIHJldHVybiBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybihfdGhpczY4KTtcbiAgICAgIH1cblxuICAgICAgX3RoaXM2OC5lbC5NX0Zvcm1TZWxlY3QgPSBfdGhpczY4O1xuXG4gICAgICAvKipcbiAgICAgICAqIE9wdGlvbnMgZm9yIHRoZSBzZWxlY3RcbiAgICAgICAqIEBtZW1iZXIgRm9ybVNlbGVjdCNvcHRpb25zXG4gICAgICAgKi9cbiAgICAgIF90aGlzNjgub3B0aW9ucyA9ICQuZXh0ZW5kKHt9LCBGb3JtU2VsZWN0LmRlZmF1bHRzLCBvcHRpb25zKTtcblxuICAgICAgX3RoaXM2OC5pc011bHRpcGxlID0gX3RoaXM2OC4kZWwucHJvcCgnbXVsdGlwbGUnKTtcblxuICAgICAgLy8gU2V0dXBcbiAgICAgIF90aGlzNjguZWwudGFiSW5kZXggPSAtMTtcbiAgICAgIF90aGlzNjguX2tleXNTZWxlY3RlZCA9IHt9O1xuICAgICAgX3RoaXM2OC5fdmFsdWVEaWN0ID0ge307IC8vIE1hcHMga2V5IHRvIG9yaWdpbmFsIGFuZCBnZW5lcmF0ZWQgb3B0aW9uIGVsZW1lbnQuXG4gICAgICBfdGhpczY4Ll9zZXR1cERyb3Bkb3duKCk7XG5cbiAgICAgIF90aGlzNjguX3NldHVwRXZlbnRIYW5kbGVycygpO1xuICAgICAgcmV0dXJuIF90aGlzNjg7XG4gICAgfVxuXG4gICAgX2NyZWF0ZUNsYXNzKEZvcm1TZWxlY3QsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZURyb3Bkb3duKCk7XG4gICAgICAgIHRoaXMuZWwuTV9Gb3JtU2VsZWN0ID0gdW5kZWZpbmVkO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRXZlbnRIYW5kbGVycygpIHtcbiAgICAgICAgdmFyIF90aGlzNjkgPSB0aGlzO1xuXG4gICAgICAgIHRoaXMuX2hhbmRsZVNlbGVjdENoYW5nZUJvdW5kID0gdGhpcy5faGFuZGxlU2VsZWN0Q2hhbmdlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZU9wdGlvbkNsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVPcHRpb25DbGljay5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVJbnB1dENsaWNrQm91bmQgPSB0aGlzLl9oYW5kbGVJbnB1dENsaWNrLmJpbmQodGhpcyk7XG5cbiAgICAgICAgJCh0aGlzLmRyb3Bkb3duT3B0aW9ucykuZmluZCgnbGk6bm90KC5vcHRncm91cCknKS5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIGVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM2OS5faGFuZGxlT3B0aW9uQ2xpY2tCb3VuZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZVNlbGVjdENoYW5nZUJvdW5kKTtcbiAgICAgICAgdGhpcy5pbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIEV2ZW50IEhhbmRsZXJzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVFdmVudEhhbmRsZXJzKCkge1xuICAgICAgICB2YXIgX3RoaXM3MCA9IHRoaXM7XG5cbiAgICAgICAgJCh0aGlzLmRyb3Bkb3duT3B0aW9ucykuZmluZCgnbGk6bm90KC5vcHRncm91cCknKS5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIGVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgX3RoaXM3MC5faGFuZGxlT3B0aW9uQ2xpY2tCb3VuZCk7XG4gICAgICAgIH0pO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIHRoaXMuX2hhbmRsZVNlbGVjdENoYW5nZUJvdW5kKTtcbiAgICAgICAgdGhpcy5pbnB1dC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUlucHV0Q2xpY2tCb3VuZCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIFNlbGVjdCBDaGFuZ2VcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVTZWxlY3RDaGFuZ2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlU2VsZWN0Q2hhbmdlKGUpIHtcbiAgICAgICAgdGhpcy5fc2V0VmFsdWVUb0lucHV0KCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogSGFuZGxlIE9wdGlvbiBDbGlja1xuICAgICAgICogQHBhcmFtIHtFdmVudH0gZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZU9wdGlvbkNsaWNrXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZU9wdGlvbkNsaWNrKGUpIHtcbiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICB2YXIgb3B0aW9uID0gJChlLnRhcmdldCkuY2xvc2VzdCgnbGknKVswXTtcbiAgICAgICAgdmFyIGtleSA9IG9wdGlvbi5pZDtcbiAgICAgICAgaWYgKCEkKG9wdGlvbikuaGFzQ2xhc3MoJ2Rpc2FibGVkJykgJiYgISQob3B0aW9uKS5oYXNDbGFzcygnb3B0Z3JvdXAnKSAmJiBrZXkubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIHNlbGVjdGVkID0gdHJ1ZTtcblxuICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIC8vIERlc2VsZWN0IHBsYWNlaG9sZGVyIG9wdGlvbiBpZiBzdGlsbCBzZWxlY3RlZC5cbiAgICAgICAgICAgIHZhciBwbGFjZWhvbGRlck9wdGlvbiA9ICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJ2xpLmRpc2FibGVkLnNlbGVjdGVkJyk7XG4gICAgICAgICAgICBpZiAocGxhY2Vob2xkZXJPcHRpb24ubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHBsYWNlaG9sZGVyT3B0aW9uLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgICAgICBwbGFjZWhvbGRlck9wdGlvbi5maW5kKCdpbnB1dFt0eXBlPVwiY2hlY2tib3hcIl0nKS5wcm9wKCdjaGVja2VkJywgZmFsc2UpO1xuICAgICAgICAgICAgICB0aGlzLl90b2dnbGVFbnRyeUZyb21BcnJheShwbGFjZWhvbGRlck9wdGlvblswXS5pZCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBzZWxlY3RlZCA9IHRoaXMuX3RvZ2dsZUVudHJ5RnJvbUFycmF5KGtleSk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmZpbmQoJ2xpJykucmVtb3ZlQ2xhc3MoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgICAkKG9wdGlvbikudG9nZ2xlQ2xhc3MoJ3NlbGVjdGVkJywgc2VsZWN0ZWQpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIC8vIFNldCBzZWxlY3RlZCBvbiBvcmlnaW5hbCBzZWxlY3Qgb3B0aW9uXG4gICAgICAgICAgLy8gT25seSB0cmlnZ2VyIGlmIHNlbGVjdGVkIHN0YXRlIGNoYW5nZWRcbiAgICAgICAgICB2YXIgcHJldlNlbGVjdGVkID0gJCh0aGlzLl92YWx1ZURpY3Rba2V5XS5lbCkucHJvcCgnc2VsZWN0ZWQnKTtcbiAgICAgICAgICBpZiAocHJldlNlbGVjdGVkICE9PSBzZWxlY3RlZCkge1xuICAgICAgICAgICAgJCh0aGlzLl92YWx1ZURpY3Rba2V5XS5lbCkucHJvcCgnc2VsZWN0ZWQnLCBzZWxlY3RlZCk7XG4gICAgICAgICAgICB0aGlzLiRlbC50cmlnZ2VyKCdjaGFuZ2UnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBJbnB1dCBDbGlja1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZUlucHV0Q2xpY2tcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlSW5wdXRDbGljaygpIHtcbiAgICAgICAgaWYgKHRoaXMuZHJvcGRvd24gJiYgdGhpcy5kcm9wZG93bi5pc09wZW4pIHtcbiAgICAgICAgICB0aGlzLl9zZXRWYWx1ZVRvSW5wdXQoKTtcbiAgICAgICAgICB0aGlzLl9zZXRTZWxlY3RlZFN0YXRlcygpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0dXAgZHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXR1cERyb3Bkb3duXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldHVwRHJvcGRvd24oKSB7XG4gICAgICAgIHZhciBfdGhpczcxID0gdGhpcztcblxuICAgICAgICB0aGlzLndyYXBwZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgICAgICAgJCh0aGlzLndyYXBwZXIpLmFkZENsYXNzKCdzZWxlY3Qtd3JhcHBlciAnICsgdGhpcy5vcHRpb25zLmNsYXNzZXMpO1xuICAgICAgICB0aGlzLiRlbC5iZWZvcmUoJCh0aGlzLndyYXBwZXIpKTtcbiAgICAgICAgdGhpcy53cmFwcGVyLmFwcGVuZENoaWxkKHRoaXMuZWwpO1xuXG4gICAgICAgIGlmICh0aGlzLmVsLmRpc2FibGVkKSB7XG4gICAgICAgICAgdGhpcy53cmFwcGVyLmNsYXNzTGlzdC5hZGQoJ2Rpc2FibGVkJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDcmVhdGUgZHJvcGRvd25cbiAgICAgICAgdGhpcy4kc2VsZWN0T3B0aW9ucyA9IHRoaXMuJGVsLmNoaWxkcmVuKCdvcHRpb24sIG9wdGdyb3VwJyk7XG4gICAgICAgIHRoaXMuZHJvcGRvd25PcHRpb25zID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndWwnKTtcbiAgICAgICAgdGhpcy5kcm9wZG93bk9wdGlvbnMuaWQgPSBcInNlbGVjdC1vcHRpb25zLVwiICsgTS5ndWlkKCk7XG4gICAgICAgICQodGhpcy5kcm9wZG93bk9wdGlvbnMpLmFkZENsYXNzKCdkcm9wZG93bi1jb250ZW50IHNlbGVjdC1kcm9wZG93biAnICsgKHRoaXMuaXNNdWx0aXBsZSA/ICdtdWx0aXBsZS1zZWxlY3QtZHJvcGRvd24nIDogJycpKTtcblxuICAgICAgICAvLyBDcmVhdGUgZHJvcGRvd24gc3RydWN0dXJlLlxuICAgICAgICBpZiAodGhpcy4kc2VsZWN0T3B0aW9ucy5sZW5ndGgpIHtcbiAgICAgICAgICB0aGlzLiRzZWxlY3RPcHRpb25zLmVhY2goZnVuY3Rpb24gKGVsKSB7XG4gICAgICAgICAgICBpZiAoJChlbCkuaXMoJ29wdGlvbicpKSB7XG4gICAgICAgICAgICAgIC8vIERpcmVjdCBkZXNjZW5kYW50IG9wdGlvbi5cbiAgICAgICAgICAgICAgdmFyIG9wdGlvbkVsID0gdm9pZCAwO1xuICAgICAgICAgICAgICBpZiAoX3RoaXM3MS5pc011bHRpcGxlKSB7XG4gICAgICAgICAgICAgICAgb3B0aW9uRWwgPSBfdGhpczcxLl9hcHBlbmRPcHRpb25XaXRoSWNvbihfdGhpczcxLiRlbCwgZWwsICdtdWx0aXBsZScpO1xuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIG9wdGlvbkVsID0gX3RoaXM3MS5fYXBwZW5kT3B0aW9uV2l0aEljb24oX3RoaXM3MS4kZWwsIGVsKTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIF90aGlzNzEuX2FkZE9wdGlvblRvVmFsdWVEaWN0KGVsLCBvcHRpb25FbCk7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCQoZWwpLmlzKCdvcHRncm91cCcpKSB7XG4gICAgICAgICAgICAgIC8vIE9wdGdyb3VwLlxuICAgICAgICAgICAgICB2YXIgc2VsZWN0T3B0aW9ucyA9ICQoZWwpLmNoaWxkcmVuKCdvcHRpb24nKTtcbiAgICAgICAgICAgICAgJChfdGhpczcxLmRyb3Bkb3duT3B0aW9ucykuYXBwZW5kKCQoJzxsaSBjbGFzcz1cIm9wdGdyb3VwXCI+PHNwYW4+JyArIGVsLmdldEF0dHJpYnV0ZSgnbGFiZWwnKSArICc8L3NwYW4+PC9saT4nKVswXSk7XG5cbiAgICAgICAgICAgICAgc2VsZWN0T3B0aW9ucy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgICAgIHZhciBvcHRpb25FbCA9IF90aGlzNzEuX2FwcGVuZE9wdGlvbldpdGhJY29uKF90aGlzNzEuJGVsLCBlbCwgJ29wdGdyb3VwLW9wdGlvbicpO1xuICAgICAgICAgICAgICAgIF90aGlzNzEuX2FkZE9wdGlvblRvVmFsdWVEaWN0KGVsLCBvcHRpb25FbCk7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgdGhpcy4kZWwuYWZ0ZXIodGhpcy5kcm9wZG93bk9wdGlvbnMpO1xuXG4gICAgICAgIC8vIEFkZCBpbnB1dCBkcm9wZG93blxuICAgICAgICB0aGlzLmlucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTtcbiAgICAgICAgJCh0aGlzLmlucHV0KS5hZGRDbGFzcygnc2VsZWN0LWRyb3Bkb3duIGRyb3Bkb3duLXRyaWdnZXInKTtcbiAgICAgICAgdGhpcy5pbnB1dC5zZXRBdHRyaWJ1dGUoJ3R5cGUnLCAndGV4dCcpO1xuICAgICAgICB0aGlzLmlucHV0LnNldEF0dHJpYnV0ZSgncmVhZG9ubHknLCAndHJ1ZScpO1xuICAgICAgICB0aGlzLmlucHV0LnNldEF0dHJpYnV0ZSgnZGF0YS10YXJnZXQnLCB0aGlzLmRyb3Bkb3duT3B0aW9ucy5pZCk7XG4gICAgICAgIGlmICh0aGlzLmVsLmRpc2FibGVkKSB7XG4gICAgICAgICAgJCh0aGlzLmlucHV0KS5wcm9wKCdkaXNhYmxlZCcsICd0cnVlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLiRlbC5iZWZvcmUodGhpcy5pbnB1dCk7XG4gICAgICAgIHRoaXMuX3NldFZhbHVlVG9JbnB1dCgpO1xuXG4gICAgICAgIC8vIEFkZCBjYXJldFxuICAgICAgICB2YXIgZHJvcGRvd25JY29uID0gJCgnPHN2ZyBjbGFzcz1cImNhcmV0XCIgaGVpZ2h0PVwiMjRcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgd2lkdGg9XCIyNFwiIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIj48cGF0aCBkPVwiTTcgMTBsNSA1IDUtNXpcIi8+PHBhdGggZD1cIk0wIDBoMjR2MjRIMHpcIiBmaWxsPVwibm9uZVwiLz48L3N2Zz4nKTtcbiAgICAgICAgdGhpcy4kZWwuYmVmb3JlKGRyb3Bkb3duSWNvblswXSk7XG5cbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBkcm9wZG93blxuICAgICAgICBpZiAoIXRoaXMuZWwuZGlzYWJsZWQpIHtcbiAgICAgICAgICB2YXIgZHJvcGRvd25PcHRpb25zID0gJC5leHRlbmQoe30sIHRoaXMub3B0aW9ucy5kcm9wZG93bk9wdGlvbnMpO1xuXG4gICAgICAgICAgLy8gQWRkIGNhbGxiYWNrIGZvciBjZW50ZXJpbmcgc2VsZWN0ZWQgb3B0aW9uIHdoZW4gZHJvcGRvd24gY29udGVudCBpcyBzY3JvbGxhYmxlXG4gICAgICAgICAgZHJvcGRvd25PcHRpb25zLm9uT3BlbkVuZCA9IGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgICAgdmFyIHNlbGVjdGVkT3B0aW9uID0gJChfdGhpczcxLmRyb3Bkb3duT3B0aW9ucykuZmluZCgnLnNlbGVjdGVkJykuZmlyc3QoKTtcblxuICAgICAgICAgICAgaWYgKHNlbGVjdGVkT3B0aW9uLmxlbmd0aCkge1xuICAgICAgICAgICAgICAvLyBGb2N1cyBzZWxlY3RlZCBvcHRpb24gaW4gZHJvcGRvd25cbiAgICAgICAgICAgICAgTS5rZXlEb3duID0gdHJ1ZTtcbiAgICAgICAgICAgICAgX3RoaXM3MS5kcm9wZG93bi5mb2N1c2VkSW5kZXggPSBzZWxlY3RlZE9wdGlvbi5pbmRleCgpO1xuICAgICAgICAgICAgICBfdGhpczcxLmRyb3Bkb3duLl9mb2N1c0ZvY3VzZWRJdGVtKCk7XG4gICAgICAgICAgICAgIE0ua2V5RG93biA9IGZhbHNlO1xuXG4gICAgICAgICAgICAgIC8vIEhhbmRsZSBzY3JvbGxpbmcgdG8gc2VsZWN0ZWQgb3B0aW9uXG4gICAgICAgICAgICAgIGlmIChfdGhpczcxLmRyb3Bkb3duLmlzU2Nyb2xsYWJsZSkge1xuICAgICAgICAgICAgICAgIHZhciBzY3JvbGxPZmZzZXQgPSBzZWxlY3RlZE9wdGlvblswXS5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3AgLSBfdGhpczcxLmRyb3Bkb3duT3B0aW9ucy5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7IC8vIHNjcm9sbCB0byBzZWxlY3RlZCBvcHRpb25cbiAgICAgICAgICAgICAgICBzY3JvbGxPZmZzZXQgLT0gX3RoaXM3MS5kcm9wZG93bk9wdGlvbnMuY2xpZW50SGVpZ2h0IC8gMjsgLy8gY2VudGVyIGluIGRyb3Bkb3duXG4gICAgICAgICAgICAgICAgX3RoaXM3MS5kcm9wZG93bk9wdGlvbnMuc2Nyb2xsVG9wID0gc2Nyb2xsT2Zmc2V0O1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfTtcblxuICAgICAgICAgIGlmICh0aGlzLmlzTXVsdGlwbGUpIHtcbiAgICAgICAgICAgIGRyb3Bkb3duT3B0aW9ucy5jbG9zZU9uQ2xpY2sgPSBmYWxzZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgdGhpcy5kcm9wZG93biA9IE0uRHJvcGRvd24uaW5pdCh0aGlzLmlucHV0LCBkcm9wZG93bk9wdGlvbnMpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQWRkIGluaXRpYWwgc2VsZWN0aW9uc1xuICAgICAgICB0aGlzLl9zZXRTZWxlY3RlZFN0YXRlcygpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEFkZCBvcHRpb24gdG8gdmFsdWUgZGljdFxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBlbCAgb3JpZ2luYWwgb3B0aW9uIGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gb3B0aW9uRWwgIGdlbmVyYXRlZCBvcHRpb24gZWxlbWVudFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2FkZE9wdGlvblRvVmFsdWVEaWN0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2FkZE9wdGlvblRvVmFsdWVEaWN0KGVsLCBvcHRpb25FbCkge1xuICAgICAgICB2YXIgaW5kZXggPSBPYmplY3Qua2V5cyh0aGlzLl92YWx1ZURpY3QpLmxlbmd0aDtcbiAgICAgICAgdmFyIGtleSA9IHRoaXMuZHJvcGRvd25PcHRpb25zLmlkICsgaW5kZXg7XG4gICAgICAgIHZhciBvYmogPSB7fTtcbiAgICAgICAgb3B0aW9uRWwuaWQgPSBrZXk7XG5cbiAgICAgICAgb2JqLmVsID0gZWw7XG4gICAgICAgIG9iai5vcHRpb25FbCA9IG9wdGlvbkVsO1xuICAgICAgICB0aGlzLl92YWx1ZURpY3Rba2V5XSA9IG9iajtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgZHJvcGRvd25cbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVEcm9wZG93blwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9yZW1vdmVEcm9wZG93bigpIHtcbiAgICAgICAgJCh0aGlzLndyYXBwZXIpLmZpbmQoJy5jYXJldCcpLnJlbW92ZSgpO1xuICAgICAgICAkKHRoaXMuaW5wdXQpLnJlbW92ZSgpO1xuICAgICAgICAkKHRoaXMuZHJvcGRvd25PcHRpb25zKS5yZW1vdmUoKTtcbiAgICAgICAgJCh0aGlzLndyYXBwZXIpLmJlZm9yZSh0aGlzLiRlbCk7XG4gICAgICAgICQodGhpcy53cmFwcGVyKS5yZW1vdmUoKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBkcm9wZG93blxuICAgICAgICogQHBhcmFtIHtFbGVtZW50fSBzZWxlY3QgIHNlbGVjdCBlbGVtZW50XG4gICAgICAgKiBAcGFyYW0ge0VsZW1lbnR9IG9wdGlvbiAgb3B0aW9uIGVsZW1lbnQgZnJvbSBzZWxlY3RcbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSB0eXBlXG4gICAgICAgKiBAcmV0dXJuIHtFbGVtZW50fSAgb3B0aW9uIGVsZW1lbnQgYWRkZWRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9hcHBlbmRPcHRpb25XaXRoSWNvblwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9hcHBlbmRPcHRpb25XaXRoSWNvbihzZWxlY3QsIG9wdGlvbiwgdHlwZSkge1xuICAgICAgICAvLyBBZGQgZGlzYWJsZWQgYXR0ciBpZiBkaXNhYmxlZFxuICAgICAgICB2YXIgZGlzYWJsZWRDbGFzcyA9IG9wdGlvbi5kaXNhYmxlZCA/ICdkaXNhYmxlZCAnIDogJyc7XG4gICAgICAgIHZhciBvcHRncm91cENsYXNzID0gdHlwZSA9PT0gJ29wdGdyb3VwLW9wdGlvbicgPyAnb3B0Z3JvdXAtb3B0aW9uICcgOiAnJztcbiAgICAgICAgdmFyIG11bHRpcGxlQ2hlY2tib3ggPSB0aGlzLmlzTXVsdGlwbGUgPyBcIjxsYWJlbD48aW5wdXQgdHlwZT1cXFwiY2hlY2tib3hcXFwiXCIgKyBkaXNhYmxlZENsYXNzICsgXCJcXFwiLz48c3Bhbj5cIiArIG9wdGlvbi5pbm5lckhUTUwgKyBcIjwvc3Bhbj48L2xhYmVsPlwiIDogb3B0aW9uLmlubmVySFRNTDtcbiAgICAgICAgdmFyIGxpRWwgPSAkKCc8bGk+PC9saT4nKTtcbiAgICAgICAgdmFyIHNwYW5FbCA9ICQoJzxzcGFuPjwvc3Bhbj4nKTtcbiAgICAgICAgc3BhbkVsLmh0bWwobXVsdGlwbGVDaGVja2JveCk7XG4gICAgICAgIGxpRWwuYWRkQ2xhc3MoZGlzYWJsZWRDbGFzcyArIFwiIFwiICsgb3B0Z3JvdXBDbGFzcyk7XG4gICAgICAgIGxpRWwuYXBwZW5kKHNwYW5FbCk7XG5cbiAgICAgICAgLy8gYWRkIGljb25zXG4gICAgICAgIHZhciBpY29uVXJsID0gb3B0aW9uLmdldEF0dHJpYnV0ZSgnZGF0YS1pY29uJyk7XG4gICAgICAgIGlmICghIWljb25VcmwpIHtcbiAgICAgICAgICB2YXIgaW1nRWwgPSAkKFwiPGltZyBhbHQ9XFxcIlxcXCIgc3JjPVxcXCJcIiArIGljb25VcmwgKyBcIlxcXCI+XCIpO1xuICAgICAgICAgIGxpRWwucHJlcGVuZChpbWdFbCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBDaGVjayBmb3IgbXVsdGlwbGUgdHlwZS5cbiAgICAgICAgJCh0aGlzLmRyb3Bkb3duT3B0aW9ucykuYXBwZW5kKGxpRWxbMF0pO1xuICAgICAgICByZXR1cm4gbGlFbFswXTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBUb2dnbGUgZW50cnkgZnJvbSBvcHRpb25cbiAgICAgICAqIEBwYXJhbSB7U3RyaW5nfSBrZXkgIE9wdGlvbiBrZXlcbiAgICAgICAqIEByZXR1cm4ge0Jvb2xlYW59ICBpZiBlbnRyeSB3YXMgYWRkZWQgb3IgcmVtb3ZlZFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3RvZ2dsZUVudHJ5RnJvbUFycmF5XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3RvZ2dsZUVudHJ5RnJvbUFycmF5KGtleSkge1xuICAgICAgICB2YXIgbm90QWRkZWQgPSAhdGhpcy5fa2V5c1NlbGVjdGVkLmhhc093blByb3BlcnR5KGtleSk7XG4gICAgICAgIHZhciAkb3B0aW9uTGkgPSAkKHRoaXMuX3ZhbHVlRGljdFtrZXldLm9wdGlvbkVsKTtcblxuICAgICAgICBpZiAobm90QWRkZWQpIHtcbiAgICAgICAgICB0aGlzLl9rZXlzU2VsZWN0ZWRba2V5XSA9IHRydWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgZGVsZXRlIHRoaXMuX2tleXNTZWxlY3RlZFtrZXldO1xuICAgICAgICB9XG5cbiAgICAgICAgJG9wdGlvbkxpLnRvZ2dsZUNsYXNzKCdzZWxlY3RlZCcsIG5vdEFkZGVkKTtcblxuICAgICAgICAvLyBTZXQgY2hlY2tib3ggY2hlY2tlZCB2YWx1ZVxuICAgICAgICAkb3B0aW9uTGkuZmluZCgnaW5wdXRbdHlwZT1cImNoZWNrYm94XCJdJykucHJvcCgnY2hlY2tlZCcsIG5vdEFkZGVkKTtcblxuICAgICAgICAvLyB1c2Ugbm90QWRkZWQgaW5zdGVhZCBvZiB0cnVlICh0byBkZXRlY3QgaWYgdGhlIG9wdGlvbiBpcyBzZWxlY3RlZCBvciBub3QpXG4gICAgICAgICRvcHRpb25MaS5wcm9wKCdzZWxlY3RlZCcsIG5vdEFkZGVkKTtcblxuICAgICAgICByZXR1cm4gbm90QWRkZWQ7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IHRleHQgdmFsdWUgdG8gaW5wdXRcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zZXRWYWx1ZVRvSW5wdXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2V0VmFsdWVUb0lucHV0KCkge1xuICAgICAgICB2YXIgdmFsdWVzID0gW107XG4gICAgICAgIHZhciBvcHRpb25zID0gdGhpcy4kZWwuZmluZCgnb3B0aW9uJyk7XG5cbiAgICAgICAgb3B0aW9ucy5lYWNoKGZ1bmN0aW9uIChlbCkge1xuICAgICAgICAgIGlmICgkKGVsKS5wcm9wKCdzZWxlY3RlZCcpKSB7XG4gICAgICAgICAgICB2YXIgdGV4dCA9ICQoZWwpLnRleHQoKTtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKHRleHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKCF2YWx1ZXMubGVuZ3RoKSB7XG4gICAgICAgICAgdmFyIGZpcnN0RGlzYWJsZWQgPSB0aGlzLiRlbC5maW5kKCdvcHRpb246ZGlzYWJsZWQnKS5lcSgwKTtcbiAgICAgICAgICBpZiAoZmlyc3REaXNhYmxlZC5sZW5ndGggJiYgZmlyc3REaXNhYmxlZFswXS52YWx1ZSA9PT0gJycpIHtcbiAgICAgICAgICAgIHZhbHVlcy5wdXNoKGZpcnN0RGlzYWJsZWQudGV4dCgpKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmlucHV0LnZhbHVlID0gdmFsdWVzLmpvaW4oJywgJyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogU2V0IHNlbGVjdGVkIHN0YXRlIG9mIGRyb3Bkb3duIHRvIG1hdGNoIGFjdHVhbCBzZWxlY3QgZWxlbWVudFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldFNlbGVjdGVkU3RhdGVzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3NldFNlbGVjdGVkU3RhdGVzKCkge1xuICAgICAgICB0aGlzLl9rZXlzU2VsZWN0ZWQgPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBrZXkgaW4gdGhpcy5fdmFsdWVEaWN0KSB7XG4gICAgICAgICAgdmFyIG9wdGlvbiA9IHRoaXMuX3ZhbHVlRGljdFtrZXldO1xuICAgICAgICAgIHZhciBvcHRpb25Jc1NlbGVjdGVkID0gJChvcHRpb24uZWwpLnByb3AoJ3NlbGVjdGVkJyk7XG4gICAgICAgICAgJChvcHRpb24ub3B0aW9uRWwpLmZpbmQoJ2lucHV0W3R5cGU9XCJjaGVja2JveFwiXScpLnByb3AoJ2NoZWNrZWQnLCBvcHRpb25Jc1NlbGVjdGVkKTtcbiAgICAgICAgICBpZiAob3B0aW9uSXNTZWxlY3RlZCkge1xuICAgICAgICAgICAgdGhpcy5fYWN0aXZhdGVPcHRpb24oJCh0aGlzLmRyb3Bkb3duT3B0aW9ucyksICQob3B0aW9uLm9wdGlvbkVsKSk7XG4gICAgICAgICAgICB0aGlzLl9rZXlzU2VsZWN0ZWRba2V5XSA9IHRydWU7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICQob3B0aW9uLm9wdGlvbkVsKS5yZW1vdmVDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBNYWtlIG9wdGlvbiBhcyBzZWxlY3RlZCBhbmQgc2Nyb2xsIHRvIHNlbGVjdGVkIHBvc2l0aW9uXG4gICAgICAgKiBAcGFyYW0ge2pRdWVyeX0gY29sbGVjdGlvbiAgU2VsZWN0IG9wdGlvbnMgalF1ZXJ5IGVsZW1lbnRcbiAgICAgICAqIEBwYXJhbSB7RWxlbWVudH0gbmV3T3B0aW9uICBlbGVtZW50IG9mIHRoZSBuZXcgb3B0aW9uXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfYWN0aXZhdGVPcHRpb25cIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfYWN0aXZhdGVPcHRpb24oY29sbGVjdGlvbiwgbmV3T3B0aW9uKSB7XG4gICAgICAgIGlmIChuZXdPcHRpb24pIHtcbiAgICAgICAgICBpZiAoIXRoaXMuaXNNdWx0aXBsZSkge1xuICAgICAgICAgICAgY29sbGVjdGlvbi5maW5kKCdsaS5zZWxlY3RlZCcpLnJlbW92ZUNsYXNzKCdzZWxlY3RlZCcpO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YXIgb3B0aW9uID0gJChuZXdPcHRpb24pO1xuICAgICAgICAgIG9wdGlvbi5hZGRDbGFzcygnc2VsZWN0ZWQnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBTZWxlY3RlZCBWYWx1ZXNcbiAgICAgICAqIEByZXR1cm4ge0FycmF5fSAgQXJyYXkgb2Ygc2VsZWN0ZWQgdmFsdWVzXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRTZWxlY3RlZFZhbHVlc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldFNlbGVjdGVkVmFsdWVzKCkge1xuICAgICAgICB2YXIgc2VsZWN0ZWRWYWx1ZXMgPSBbXTtcbiAgICAgICAgZm9yICh2YXIga2V5IGluIHRoaXMuX2tleXNTZWxlY3RlZCkge1xuICAgICAgICAgIHNlbGVjdGVkVmFsdWVzLnB1c2godGhpcy5fdmFsdWVEaWN0W2tleV0uZWwudmFsdWUpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzZWxlY3RlZFZhbHVlcztcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoRm9ybVNlbGVjdC5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKEZvcm1TZWxlY3QpLCBcImluaXRcIiwgdGhpcykuY2FsbCh0aGlzLCB0aGlzLCBlbHMsIG9wdGlvbnMpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEdldCBJbnN0YW5jZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiZ2V0SW5zdGFuY2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJbnN0YW5jZShlbCkge1xuICAgICAgICB2YXIgZG9tRWxlbSA9ICEhZWwuanF1ZXJ5ID8gZWxbMF0gOiBlbDtcbiAgICAgICAgcmV0dXJuIGRvbUVsZW0uTV9Gb3JtU2VsZWN0O1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIEZvcm1TZWxlY3Q7XG4gIH0oQ29tcG9uZW50KTtcblxuICBNLkZvcm1TZWxlY3QgPSBGb3JtU2VsZWN0O1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoRm9ybVNlbGVjdCwgJ2Zvcm1TZWxlY3QnLCAnTV9Gb3JtU2VsZWN0Jyk7XG4gIH1cbn0pKGNhc2gpO1xuOyhmdW5jdGlvbiAoJCwgYW5pbSkge1xuICAndXNlIHN0cmljdCc7XG5cbiAgdmFyIF9kZWZhdWx0cyA9IHt9O1xuXG4gIC8qKlxuICAgKiBAY2xhc3NcbiAgICpcbiAgICovXG5cbiAgdmFyIFJhbmdlID0gZnVuY3Rpb24gKF9Db21wb25lbnQyMSkge1xuICAgIF9pbmhlcml0cyhSYW5nZSwgX0NvbXBvbmVudDIxKTtcblxuICAgIC8qKlxuICAgICAqIENvbnN0cnVjdCBSYW5nZSBpbnN0YW5jZVxuICAgICAqIEBjb25zdHJ1Y3RvclxuICAgICAqIEBwYXJhbSB7RWxlbWVudH0gZWxcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gb3B0aW9uc1xuICAgICAqL1xuICAgIGZ1bmN0aW9uIFJhbmdlKGVsLCBvcHRpb25zKSB7XG4gICAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUmFuZ2UpO1xuXG4gICAgICB2YXIgX3RoaXM3MiA9IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIChSYW5nZS5fX3Byb3RvX18gfHwgT2JqZWN0LmdldFByb3RvdHlwZU9mKFJhbmdlKSkuY2FsbCh0aGlzLCBSYW5nZSwgZWwsIG9wdGlvbnMpKTtcblxuICAgICAgX3RoaXM3Mi5lbC5NX1JhbmdlID0gX3RoaXM3MjtcblxuICAgICAgLyoqXG4gICAgICAgKiBPcHRpb25zIGZvciB0aGUgcmFuZ2VcbiAgICAgICAqIEBtZW1iZXIgUmFuZ2Ujb3B0aW9uc1xuICAgICAgICovXG4gICAgICBfdGhpczcyLm9wdGlvbnMgPSAkLmV4dGVuZCh7fSwgUmFuZ2UuZGVmYXVsdHMsIG9wdGlvbnMpO1xuXG4gICAgICBfdGhpczcyLl9tb3VzZWRvd24gPSBmYWxzZTtcblxuICAgICAgLy8gU2V0dXBcbiAgICAgIF90aGlzNzIuX3NldHVwVGh1bWIoKTtcblxuICAgICAgX3RoaXM3Mi5fc2V0dXBFdmVudEhhbmRsZXJzKCk7XG4gICAgICByZXR1cm4gX3RoaXM3MjtcbiAgICB9XG5cbiAgICBfY3JlYXRlQ2xhc3MoUmFuZ2UsIFt7XG4gICAgICBrZXk6IFwiZGVzdHJveVwiLFxuXG5cbiAgICAgIC8qKlxuICAgICAgICogVGVhcmRvd24gY29tcG9uZW50XG4gICAgICAgKi9cbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBkZXN0cm95KCkge1xuICAgICAgICB0aGlzLl9yZW1vdmVFdmVudEhhbmRsZXJzKCk7XG4gICAgICAgIHRoaXMuX3JlbW92ZVRodW1iKCk7XG4gICAgICAgIHRoaXMuZWwuTV9SYW5nZSA9IHVuZGVmaW5lZDtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBTZXR1cCBFdmVudCBIYW5kbGVyc1xuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX3NldHVwRXZlbnRIYW5kbGVyc1wiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cEV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuX2hhbmRsZVJhbmdlQ2hhbmdlQm91bmQgPSB0aGlzLl9oYW5kbGVSYW5nZUNoYW5nZS5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnRCb3VuZCA9IHRoaXMuX2hhbmRsZVJhbmdlTW91c2Vkb3duVG91Y2hzdGFydC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlQm91bmQgPSB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlLmJpbmQodGhpcyk7XG4gICAgICAgIHRoaXMuX2hhbmRsZVJhbmdlTW91c2V1cFRvdWNoZW5kQm91bmQgPSB0aGlzLl9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZC5iaW5kKHRoaXMpO1xuICAgICAgICB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCA9IHRoaXMuX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlUmFuZ2VDaGFuZ2VCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnRCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZVJhbmdlTW91c2Vkb3duVG91Y2hzdGFydEJvdW5kKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmRCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZEJvdW5kKTtcblxuICAgICAgICB0aGlzLmVsLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hsZWF2ZScsIHRoaXMuX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZUJvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBSZW1vdmUgRXZlbnQgSGFuZGxlcnNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9yZW1vdmVFdmVudEhhbmRsZXJzXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX3JlbW92ZUV2ZW50SGFuZGxlcnMoKSB7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgdGhpcy5faGFuZGxlUmFuZ2VDaGFuZ2VCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnRCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZVJhbmdlTW91c2Vkb3duVG91Y2hzdGFydEJvdW5kKTtcblxuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2lucHV0JywgdGhpcy5faGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZUJvdW5kKTtcbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLl9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlQm91bmQpO1xuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuX2hhbmRsZVJhbmdlSW5wdXRNb3VzZW1vdmVUb3VjaG1vdmVCb3VuZCk7XG5cbiAgICAgICAgdGhpcy5lbC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlUmFuZ2VNb3VzZXVwVG91Y2hlbmRCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLl9oYW5kbGVSYW5nZU1vdXNldXBUb3VjaGVuZEJvdW5kKTtcblxuICAgICAgICB0aGlzLmVsLnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2JsdXInLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcignbW91c2VvdXQnLCB0aGlzLl9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmVCb3VuZCk7XG4gICAgICAgIHRoaXMuZWwucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hsZWF2ZScsIHRoaXMuX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZUJvdW5kKTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgUmFuZ2UgQ2hhbmdlXG4gICAgICAgKiBAcGFyYW0ge0V2ZW50fSBlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlUmFuZ2VDaGFuZ2VcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlUmFuZ2VDaGFuZ2UoKSB7XG4gICAgICAgICQodGhpcy52YWx1ZSkuaHRtbCh0aGlzLiRlbC52YWwoKSk7XG5cbiAgICAgICAgaWYgKCEkKHRoaXMudGh1bWIpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgIHRoaXMuX3Nob3dSYW5nZUJ1YmJsZSgpO1xuICAgICAgICB9XG5cbiAgICAgICAgdmFyIG9mZnNldExlZnQgPSB0aGlzLl9jYWxjUmFuZ2VPZmZzZXQoKTtcbiAgICAgICAgJCh0aGlzLnRodW1iKS5hZGRDbGFzcygnYWN0aXZlJykuY3NzKCdsZWZ0Jywgb2Zmc2V0TGVmdCArICdweCcpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBSYW5nZSBNb3VzZWRvd24gYW5kIFRvdWNoc3RhcnRcbiAgICAgICAqIEBwYXJhbSB7RXZlbnR9IGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9oYW5kbGVSYW5nZU1vdXNlZG93blRvdWNoc3RhcnRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfaGFuZGxlUmFuZ2VNb3VzZWRvd25Ub3VjaHN0YXJ0KGUpIHtcbiAgICAgICAgLy8gU2V0IGluZGljYXRvciB2YWx1ZVxuICAgICAgICAkKHRoaXMudmFsdWUpLmh0bWwodGhpcy4kZWwudmFsKCkpO1xuXG4gICAgICAgIHRoaXMuX21vdXNlZG93biA9IHRydWU7XG4gICAgICAgIHRoaXMuJGVsLmFkZENsYXNzKCdhY3RpdmUnKTtcblxuICAgICAgICBpZiAoISQodGhpcy50aHVtYikuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgdGhpcy5fc2hvd1JhbmdlQnViYmxlKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZS50eXBlICE9PSAnaW5wdXQnKSB7XG4gICAgICAgICAgdmFyIG9mZnNldExlZnQgPSB0aGlzLl9jYWxjUmFuZ2VPZmZzZXQoKTtcbiAgICAgICAgICAkKHRoaXMudGh1bWIpLmFkZENsYXNzKCdhY3RpdmUnKS5jc3MoJ2xlZnQnLCBvZmZzZXRMZWZ0ICsgJ3B4Jyk7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBIYW5kbGUgUmFuZ2UgSW5wdXQsIE1vdXNlbW92ZSBhbmQgVG91Y2htb3ZlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfaGFuZGxlUmFuZ2VJbnB1dE1vdXNlbW92ZVRvdWNobW92ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSYW5nZUlucHV0TW91c2Vtb3ZlVG91Y2htb3ZlKCkge1xuICAgICAgICBpZiAodGhpcy5fbW91c2Vkb3duKSB7XG4gICAgICAgICAgaWYgKCEkKHRoaXMudGh1bWIpLmhhc0NsYXNzKCdhY3RpdmUnKSkge1xuICAgICAgICAgICAgdGhpcy5fc2hvd1JhbmdlQnViYmxlKCk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgdmFyIG9mZnNldExlZnQgPSB0aGlzLl9jYWxjUmFuZ2VPZmZzZXQoKTtcbiAgICAgICAgICAkKHRoaXMudGh1bWIpLmFkZENsYXNzKCdhY3RpdmUnKS5jc3MoJ2xlZnQnLCBvZmZzZXRMZWZ0ICsgJ3B4Jyk7XG4gICAgICAgICAgJCh0aGlzLnZhbHVlKS5odG1sKHRoaXMuJGVsLnZhbCgpKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBSYW5nZSBNb3VzZXVwIGFuZCBUb3VjaGVuZFxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVJhbmdlTW91c2V1cFRvdWNoZW5kXCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gX2hhbmRsZVJhbmdlTW91c2V1cFRvdWNoZW5kKCkge1xuICAgICAgICB0aGlzLl9tb3VzZWRvd24gPSBmYWxzZTtcbiAgICAgICAgdGhpcy4kZWwucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIEhhbmRsZSBSYW5nZSBCbHVyLCBNb3VzZW91dCBhbmQgVG91Y2hsZWF2ZVxuICAgICAgICovXG5cbiAgICB9LCB7XG4gICAgICBrZXk6IFwiX2hhbmRsZVJhbmdlQmx1ck1vdXNlb3V0VG91Y2hsZWF2ZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9oYW5kbGVSYW5nZUJsdXJNb3VzZW91dFRvdWNobGVhdmUoKSB7XG4gICAgICAgIGlmICghdGhpcy5fbW91c2Vkb3duKSB7XG4gICAgICAgICAgdmFyIHBhZGRpbmdMZWZ0ID0gcGFyc2VJbnQodGhpcy4kZWwuY3NzKCdwYWRkaW5nLWxlZnQnKSk7XG4gICAgICAgICAgdmFyIG1hcmdpbkxlZnQgPSA3ICsgcGFkZGluZ0xlZnQgKyAncHgnO1xuXG4gICAgICAgICAgaWYgKCQodGhpcy50aHVtYikuaGFzQ2xhc3MoJ2FjdGl2ZScpKSB7XG4gICAgICAgICAgICBhbmltLnJlbW92ZSh0aGlzLnRodW1iKTtcbiAgICAgICAgICAgIGFuaW0oe1xuICAgICAgICAgICAgICB0YXJnZXRzOiB0aGlzLnRodW1iLFxuICAgICAgICAgICAgICBoZWlnaHQ6IDAsXG4gICAgICAgICAgICAgIHdpZHRoOiAwLFxuICAgICAgICAgICAgICB0b3A6IDEwLFxuICAgICAgICAgICAgICBlYXNpbmc6ICdlYXNlT3V0UXVhZCcsXG4gICAgICAgICAgICAgIG1hcmdpbkxlZnQ6IG1hcmdpbkxlZnQsXG4gICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDBcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgICAkKHRoaXMudGh1bWIpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvKipcbiAgICAgICAqIFNldHVwIGRyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfc2V0dXBUaHVtYlwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIF9zZXR1cFRodW1iKCkge1xuICAgICAgICB0aGlzLnRodW1iID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICB0aGlzLnZhbHVlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xuICAgICAgICAkKHRoaXMudGh1bWIpLmFkZENsYXNzKCd0aHVtYicpO1xuICAgICAgICAkKHRoaXMudmFsdWUpLmFkZENsYXNzKCd2YWx1ZScpO1xuICAgICAgICAkKHRoaXMudGh1bWIpLmFwcGVuZCh0aGlzLnZhbHVlKTtcbiAgICAgICAgdGhpcy4kZWwuYWZ0ZXIodGhpcy50aHVtYik7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogUmVtb3ZlIGRyb3Bkb3duXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJfcmVtb3ZlVGh1bWJcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVtb3ZlVGh1bWIoKSB7XG4gICAgICAgICQodGhpcy50aHVtYikucmVtb3ZlKCk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogbW9ycGggdGh1bWIgaW50byBidWJibGVcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9zaG93UmFuZ2VCdWJibGVcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfc2hvd1JhbmdlQnViYmxlKCkge1xuICAgICAgICB2YXIgcGFkZGluZ0xlZnQgPSBwYXJzZUludCgkKHRoaXMudGh1bWIpLnBhcmVudCgpLmNzcygncGFkZGluZy1sZWZ0JykpO1xuICAgICAgICB2YXIgbWFyZ2luTGVmdCA9IC03ICsgcGFkZGluZ0xlZnQgKyAncHgnOyAvLyBUT0RPOiBmaXggbWFnaWMgbnVtYmVyP1xuICAgICAgICBhbmltLnJlbW92ZSh0aGlzLnRodW1iKTtcbiAgICAgICAgYW5pbSh7XG4gICAgICAgICAgdGFyZ2V0czogdGhpcy50aHVtYixcbiAgICAgICAgICBoZWlnaHQ6IDMwLFxuICAgICAgICAgIHdpZHRoOiAzMCxcbiAgICAgICAgICB0b3A6IC0zMCxcbiAgICAgICAgICBtYXJnaW5MZWZ0OiBtYXJnaW5MZWZ0LFxuICAgICAgICAgIGR1cmF0aW9uOiAzMDAsXG4gICAgICAgICAgZWFzaW5nOiAnZWFzZU91dFF1aW50J1xuICAgICAgICB9KTtcbiAgICAgIH1cblxuICAgICAgLyoqXG4gICAgICAgKiBDYWxjdWxhdGUgdGhlIG9mZnNldCBvZiB0aGUgdGh1bWJcbiAgICAgICAqIEByZXR1cm4ge051bWJlcn0gIG9mZnNldCBpbiBwaXhlbHNcbiAgICAgICAqL1xuXG4gICAgfSwge1xuICAgICAga2V5OiBcIl9jYWxjUmFuZ2VPZmZzZXRcIixcbiAgICAgIHZhbHVlOiBmdW5jdGlvbiBfY2FsY1JhbmdlT2Zmc2V0KCkge1xuICAgICAgICB2YXIgd2lkdGggPSB0aGlzLiRlbC53aWR0aCgpIC0gMTU7XG4gICAgICAgIHZhciBtYXggPSBwYXJzZUZsb2F0KHRoaXMuJGVsLmF0dHIoJ21heCcpKSB8fCAxMDA7IC8vIFJhbmdlIGRlZmF1bHQgbWF4XG4gICAgICAgIHZhciBtaW4gPSBwYXJzZUZsb2F0KHRoaXMuJGVsLmF0dHIoJ21pbicpKSB8fCAwOyAvLyBSYW5nZSBkZWZhdWx0IG1pblxuICAgICAgICB2YXIgcGVyY2VudCA9IChwYXJzZUZsb2F0KHRoaXMuJGVsLnZhbCgpKSAtIG1pbikgLyAobWF4IC0gbWluKTtcbiAgICAgICAgcmV0dXJuIHBlcmNlbnQgKiB3aWR0aDtcbiAgICAgIH1cbiAgICB9XSwgW3tcbiAgICAgIGtleTogXCJpbml0XCIsXG4gICAgICB2YWx1ZTogZnVuY3Rpb24gaW5pdChlbHMsIG9wdGlvbnMpIHtcbiAgICAgICAgcmV0dXJuIF9nZXQoUmFuZ2UuX19wcm90b19fIHx8IE9iamVjdC5nZXRQcm90b3R5cGVPZihSYW5nZSksIFwiaW5pdFwiLCB0aGlzKS5jYWxsKHRoaXMsIHRoaXMsIGVscywgb3B0aW9ucyk7XG4gICAgICB9XG5cbiAgICAgIC8qKlxuICAgICAgICogR2V0IEluc3RhbmNlXG4gICAgICAgKi9cblxuICAgIH0sIHtcbiAgICAgIGtleTogXCJnZXRJbnN0YW5jZVwiLFxuICAgICAgdmFsdWU6IGZ1bmN0aW9uIGdldEluc3RhbmNlKGVsKSB7XG4gICAgICAgIHZhciBkb21FbGVtID0gISFlbC5qcXVlcnkgPyBlbFswXSA6IGVsO1xuICAgICAgICByZXR1cm4gZG9tRWxlbS5NX1JhbmdlO1xuICAgICAgfVxuICAgIH0sIHtcbiAgICAgIGtleTogXCJkZWZhdWx0c1wiLFxuICAgICAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBfZGVmYXVsdHM7XG4gICAgICB9XG4gICAgfV0pO1xuXG4gICAgcmV0dXJuIFJhbmdlO1xuICB9KENvbXBvbmVudCk7XG5cbiAgTS5SYW5nZSA9IFJhbmdlO1xuXG4gIGlmIChNLmpRdWVyeUxvYWRlZCkge1xuICAgIE0uaW5pdGlhbGl6ZUpxdWVyeVdyYXBwZXIoUmFuZ2UsICdyYW5nZScsICdNX1JhbmdlJyk7XG4gIH1cblxuICBSYW5nZS5pbml0KCQoJ2lucHV0W3R5cGU9cmFuZ2VdJykpO1xufSkoY2FzaCwgTS5hbmltZSk7XG4iLCJpbXBvcnQgQWdvcmFSVEMgZnJvbSAnYWdvcmEtcnRjLXNkayc7XG5pbXBvcnQge1RvYXN0LCBhZGRWaWV3LCByZW1vdmVWaWV3LCBpc0ZpcmVmb3gsIGlzQ29tcGF0aWJsZUNocm9tZX0gZnJvbSAnLi9jb21tb24nO1xuXG5jb25zb2xlLmxvZyhcImFnb3JhIHNkayB2ZXJzaW9uOiBcIiArIEFnb3JhUlRDLlZFUlNJT04gKyBcIiBjb21wYXRpYmxlOiBcIiArIEFnb3JhUlRDLmNoZWNrU3lzdGVtUmVxdWlyZW1lbnRzKCkpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSVENDbGllbnQge1xuICBjb25zdHJ1Y3RvciAoKSB7XG4gICAgdGhpcy5fY2xpZW50ID0gbnVsbDtcbiAgICB0aGlzLl9qb2luZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9wdWJsaXNoZWQgPSBmYWxzZTtcbiAgICB0aGlzLl9sb2NhbFN0cmVhbSA9IG51bGw7XG4gICAgdGhpcy5fcmVtb3RlU3RyZWFtcyA9IFtdO1xuICAgIHRoaXMuX3BhcmFtcyA9IHt9O1xuXG4gICAgdGhpcy5fc2hvd1Byb2ZpbGUgPSBmYWxzZTtcbiAgfVxuXG4gIGhhbmRsZUV2ZW50cygpIHtcbiAgICB0aGlzLl9jbGllbnQub24oXCJlcnJvclwiLCAoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZyhlcnIpXG4gICAgfSlcbiAgICAvLyBPY2N1cnMgd2hlbiB0aGUgcGVlciB1c2VyIGxlYXZlcyB0aGUgY2hhbm5lbDsgZm9yIGV4YW1wbGUsIHRoZSBwZWVyIHVzZXIgY2FsbHMgQ2xpZW50LmxlYXZlLlxuICAgIHRoaXMuX2NsaWVudC5vbihcInBlZXItbGVhdmVcIiwgKGV2dCkgPT4ge1xuICAgICAgY29uc3QgaWQgPSBldnQudWlkO1xuICAgICAgaWYgKGlkICE9IHRoaXMuX3BhcmFtcy51aWQpIHtcbiAgICAgICAgcmVtb3ZlVmlldyhpZCk7XG4gICAgICB9XG4gICAgICBUb2FzdC5ub3RpY2UoXCJwZWVyIGxlYXZlXCIpXG4gICAgICBjb25zb2xlLmxvZygncGVlci1sZWF2ZScsIGlkKTtcbiAgICB9KVxuICAgIC8vIE9jY3VycyB3aGVuIHRoZSBsb2NhbCBzdHJlYW0gaXMgX3B1Ymxpc2hlZC5cbiAgICB0aGlzLl9jbGllbnQub24oXCJzdHJlYW0tcHVibGlzaGVkXCIsIChldnQpID0+IHtcbiAgICAgIFRvYXN0Lm5vdGljZShcInN0cmVhbSBwdWJsaXNoZWQgc3VjY2Vzc1wiKVxuICAgICAgY29uc29sZS5sb2coXCJzdHJlYW0tcHVibGlzaGVkXCIpO1xuICAgIH0pXG4gICAgLy8gT2NjdXJzIHdoZW4gdGhlIHJlbW90ZSBzdHJlYW0gaXMgYWRkZWQuXG4gICAgdGhpcy5fY2xpZW50Lm9uKFwic3RyZWFtLWFkZGVkXCIsIChldnQpID0+IHsgIFxuICAgICAgY29uc3QgcmVtb3RlU3RyZWFtID0gZXZ0LnN0cmVhbTtcbiAgICAgIGNvbnN0IGlkID0gcmVtb3RlU3RyZWFtLmdldElkKCk7XG4gICAgICBUb2FzdC5pbmZvKFwic3RyZWFtLWFkZGVkIHVpZDogXCIgKyBpZClcbiAgICAgIGlmIChpZCAhPT0gdGhpcy5fcGFyYW1zLnVpZCkge1xuICAgICAgICB0aGlzLl9jbGllbnQuc3Vic2NyaWJlKHJlbW90ZVN0cmVhbSwgKGVycikgPT4ge1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwic3RyZWFtIHN1YnNjcmliZSBmYWlsZWRcIiwgZXJyKTtcbiAgICAgICAgfSlcbiAgICAgIH1cbiAgICAgIGNvbnNvbGUubG9nKCdzdHJlYW0tYWRkZWQgcmVtb3RlLXVpZDogJywgaWQpO1xuICAgIH0pO1xuICAgIC8vIE9jY3VycyB3aGVuIGEgdXNlciBzdWJzY3JpYmVzIHRvIGEgcmVtb3RlIHN0cmVhbS5cbiAgICB0aGlzLl9jbGllbnQub24oXCJzdHJlYW0tc3Vic2NyaWJlZFwiLCAoZXZ0KSA9PiB7XG4gICAgICBjb25zdCByZW1vdGVTdHJlYW0gPSBldnQuc3RyZWFtO1xuICAgICAgY29uc3QgaWQgPSByZW1vdGVTdHJlYW0uZ2V0SWQoKTtcbiAgICAgIHRoaXMuX3JlbW90ZVN0cmVhbXMucHVzaChyZW1vdGVTdHJlYW0pO1xuICAgICAgYWRkVmlldyhpZCwgdGhpcy5fc2hvd1Byb2ZpbGUpO1xuICAgICAgcmVtb3RlU3RyZWFtLnBsYXkoXCJyZW1vdGVfdmlkZW9fXCIgKyBpZCwge2ZpdDogXCJjb3ZlclwifSk7XG4gICAgICBUb2FzdC5pbmZvKCdzdHJlYW0tc3Vic2NyaWJlZCByZW1vdGUtdWlkOiAnICsgaWQpO1xuICAgICAgY29uc29sZS5sb2coJ3N0cmVhbS1zdWJzY3JpYmVkIHJlbW90ZS11aWQ6ICcsIGlkKTtcbiAgICB9KVxuICAgIC8vIE9jY3VycyB3aGVuIHRoZSByZW1vdGUgc3RyZWFtIGlzIHJlbW92ZWQ7IGZvciBleGFtcGxlLCBhIHBlZXIgdXNlciBjYWxscyBDbGllbnQudW5wdWJsaXNoLlxuICAgIHRoaXMuX2NsaWVudC5vbihcInN0cmVhbS1yZW1vdmVkXCIsIChldnQpID0+IHtcbiAgICAgIGNvbnN0IHJlbW90ZVN0cmVhbSA9IGV2dC5zdHJlYW07XG4gICAgICBjb25zdCBpZCA9IHJlbW90ZVN0cmVhbS5nZXRJZCgpO1xuICAgICAgVG9hc3QuaW5mbyhcInN0cmVhbS1yZW1vdmVkIHVpZDogXCIgKyBpZCk7XG4gICAgICByZW1vdGVTdHJlYW0uc3RvcCgpO1xuICAgICAgdGhpcy5fcmVtb3RlU3RyZWFtcyA9IHRoaXMuX3JlbW90ZVN0cmVhbXMuZmlsdGVyKChzdHJlYW0pID0+IHtcbiAgICAgICAgcmV0dXJuIHN0cmVhbS5nZXRJZCgpICE9PSBpZFxuICAgICAgfSk7XG4gICAgICByZW1vdmVWaWV3KGlkKTtcbiAgICAgIGNvbnNvbGUubG9nKCdzdHJlYW0tcmVtb3ZlZCByZW1vdGUtdWlkOiAnLCBpZCk7XG4gICAgfSlcbiAgICB0aGlzLl9jbGllbnQub24oXCJvblRva2VuUHJpdmlsZWdlV2lsbEV4cGlyZVwiLCAoKSA9PiB7XG4gICAgICAvLyBBZnRlciByZXF1ZXN0aW5nIGEgbmV3IHRva2VuXG4gICAgICAvLyB0aGlzLl9jbGllbnQucmVuZXdUb2tlbih0b2tlbik7XG4gICAgICBUb2FzdC5pbmZvKFwib25Ub2tlblByaXZpbGVnZVdpbGxFeHBpcmVcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIm9uVG9rZW5Qcml2aWxlZ2VXaWxsRXhwaXJlXCIpO1xuICAgIH0pO1xuICAgIHRoaXMuX2NsaWVudC5vbihcIm9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmVcIiwgKCkgPT4ge1xuICAgICAgLy8gQWZ0ZXIgcmVxdWVzdGluZyBhIG5ldyB0b2tlblxuICAgICAgLy8gY2xpZW50LnJlbmV3VG9rZW4odG9rZW4pO1xuICAgICAgVG9hc3QuaW5mbyhcIm9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmVcIik7XG4gICAgICBjb25zb2xlLmxvZyhcIm9uVG9rZW5Qcml2aWxlZ2VEaWRFeHBpcmVcIik7XG4gICAgfSlcbiAgfVxuXG4gIGpvaW4gKGRhdGEpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4geyAgICBcbiAgICAgIGlmICh0aGlzLl9qb2luZWQpIHtcbiAgICAgICAgVG9hc3QuZXJyb3IoXCJZb3VyIGFscmVhZHkgam9pbmVkXCIpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgXG4gICAgICAvKipcbiAgICAgICAqIEEgY2xhc3MgZGVmaW5pbmcgdGhlIHByb3BlcnRpZXMgb2YgdGhlIGNvbmZpZyBwYXJhbWV0ZXIgaW4gdGhlIGNyZWF0ZUNsaWVudCBtZXRob2QuXG4gICAgICAgKiBOb3RlOlxuICAgICAgICogICAgRW5zdXJlIHRoYXQgeW91IGRvIG5vdCBsZWF2ZSBtb2RlIGFuZCBjb2RlYyBhcyBlbXB0eS5cbiAgICAgICAqICAgIEVuc3VyZSB0aGF0IHlvdSBzZXQgdGhlc2UgcHJvcGVydGllcyBiZWZvcmUgY2FsbGluZyBDbGllbnQuam9pbi5cbiAgICAgICAqICBZb3UgY291bGQgZmluZCBtb3JlIGRldGFpbCBoZXJlLiBodHRwczovL2RvY3MuYWdvcmEuaW8vZW4vVmlkZW8vQVBJJTIwUmVmZXJlbmNlL3dlYi9pbnRlcmZhY2VzL2Fnb3JhcnRjLmNsaWVudGNvbmZpZy5odG1sXG4gICAgICAqKi9cbiAgICAgIHRoaXMuX2NsaWVudCA9IEFnb3JhUlRDLmNyZWF0ZUNsaWVudCh7bW9kZTogZGF0YS5tb2RlLCBjb2RlYzogZGF0YS5jb2RlY30pO1xuICAgIFxuICAgICAgdGhpcy5fcGFyYW1zID0gZGF0YTtcbiAgICBcbiAgICAgIC8vIGhhbmRsZSBBZ29yYVJUQyBjbGllbnQgZXZlbnRcbiAgICAgIHRoaXMuaGFuZGxlRXZlbnRzKCk7XG4gICAgXG4gICAgICAvLyBpbml0IGNsaWVudFxuICAgICAgdGhpcy5fY2xpZW50LmluaXQoZGF0YS5hcHBJRCwgKCkgPT4ge1xuICAgICAgICBjb25zb2xlLmxvZyhcImluaXQgc3VjY2Vzc1wiKTtcbiAgICBcbiAgICAgICAgLyoqXG4gICAgICAgICAqIEpvaW5zIGFuIEFnb3JhUlRDIENoYW5uZWxcbiAgICAgICAgICogVGhpcyBtZXRob2Qgam9pbnMgYW4gQWdvcmFSVEMgY2hhbm5lbC5cbiAgICAgICAgICogUGFyYW1ldGVyc1xuICAgICAgICAgKiB0b2tlbk9yS2V5OiBzdHJpbmcgfCBudWxsXG4gICAgICAgICAqICAgIExvdyBzZWN1cml0eSByZXF1aXJlbWVudHM6IFBhc3MgbnVsbCBhcyB0aGUgcGFyYW1ldGVyIHZhbHVlLlxuICAgICAgICAgKiAgICBIaWdoIHNlY3VyaXR5IHJlcXVpcmVtZW50czogUGFzcyB0aGUgc3RyaW5nIG9mIHRoZSBUb2tlbiBvciBDaGFubmVsIEtleSBhcyB0aGUgcGFyYW1ldGVyIHZhbHVlLiBTZWUgVXNlIFNlY3VyaXR5IEtleXMgZm9yIGRldGFpbHMuXG4gICAgICAgICAqICBjaGFubmVsOiBzdHJpbmdcbiAgICAgICAgICogICAgQSBzdHJpbmcgdGhhdCBwcm92aWRlcyBhIHVuaXF1ZSBjaGFubmVsIG5hbWUgZm9yIHRoZSBBZ29yYSBzZXNzaW9uLiBUaGUgbGVuZ3RoIG11c3QgYmUgd2l0aGluIDY0IGJ5dGVzLiBTdXBwb3J0ZWQgY2hhcmFjdGVyIHNjb3BlczpcbiAgICAgICAgICogICAgMjYgbG93ZXJjYXNlIEVuZ2xpc2ggbGV0dGVycyBhLXpcbiAgICAgICAgICogICAgMjYgdXBwZXJjYXNlIEVuZ2xpc2ggbGV0dGVycyBBLVpcbiAgICAgICAgICogICAgMTAgbnVtYmVycyAwLTlcbiAgICAgICAgICogICAgU3BhY2VcbiAgICAgICAgICogICAgXCIhXCIsIFwiI1wiLCBcIiRcIiwgXCIlXCIsIFwiJlwiLCBcIihcIiwgXCIpXCIsIFwiK1wiLCBcIi1cIiwgXCI6XCIsIFwiO1wiLCBcIjxcIiwgXCI9XCIsIFwiLlwiLCBcIj5cIiwgXCI/XCIsIFwiQFwiLCBcIltcIiwgXCJdXCIsIFwiXlwiLCBcIl9cIiwgXCJ7XCIsIFwifVwiLCBcInxcIiwgXCJ+XCIsIFwiLFwiXG4gICAgICAgICAqICB1aWQ6IG51bWJlciB8IG51bGxcbiAgICAgICAgICogICAgVGhlIHVzZXIgSUQsIGFuIGludGVnZXIuIEVuc3VyZSB0aGlzIElEIGlzIHVuaXF1ZS4gSWYgeW91IHNldCB0aGUgdWlkIHRvIG51bGwsIHRoZSBzZXJ2ZXIgYXNzaWducyBvbmUgYW5kIHJldHVybnMgaXQgaW4gdGhlIG9uU3VjY2VzcyBjYWxsYmFjay5cbiAgICAgICAgICogICBOb3RlOlxuICAgICAgICAgKiAgICAgIEFsbCB1c2VycyBpbiB0aGUgc2FtZSBjaGFubmVsIHNob3VsZCBoYXZlIHRoZSBzYW1lIHR5cGUgKG51bWJlcikgb2YgdWlkLlxuICAgICAgICAgKiAgICAgIElmIHlvdSB1c2UgYSBudW1iZXIgYXMgdGhlIHVzZXIgSUQsIGl0IHNob3VsZCBiZSBhIDMyLWJpdCB1bnNpZ25lZCBpbnRlZ2VyIHdpdGggYSB2YWx1ZSByYW5naW5nIGZyb20gMCB0byAoMjMyLTEpLlxuICAgICAgICAqKi9cbiAgICAgICAgdGhpcy5fY2xpZW50LmpvaW4oZGF0YS50b2tlbiA/IGRhdGEudG9rZW4gOiBudWxsLCBkYXRhLmNoYW5uZWwsIGRhdGEudWlkID8gK2RhdGEudWlkIDogbnVsbCwgKHVpZCkgPT4ge1xuICAgICAgICAgIHRoaXMuX3BhcmFtcy51aWQgPSB1aWQ7XG4gICAgICAgICAgVG9hc3Qubm90aWNlKFwiam9pbiBjaGFubmVsOiBcIiArIGRhdGEuY2hhbm5lbCArIFwiIHN1Y2Nlc3MsIHVpZDogXCIgKyB1aWQpO1xuICAgICAgICAgIGNvbnNvbGUubG9nKFwiam9pbiBjaGFubmVsOiBcIiArIGRhdGEuY2hhbm5lbCArIFwiIHN1Y2Nlc3MsIHVpZDogXCIgKyB1aWQpO1xuICAgICAgICAgIHRoaXMuX2pvaW5lZCA9IHRydWU7XG4gICAgXG4gICAgICAgICAgLy8gc3RhcnQgc3RyZWFtIGludGVydmFsIHN0YXRzXG4gICAgICAgICAgLy8gaWYgeW91IGRvbid0IG5lZWQgc2hvdyBzdHJlYW0gcHJvZmlsZSB5b3UgY2FuIGNvbW1lbnQgdGhpc1xuICAgICAgICAgIGlmICghdGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLl91cGRhdGVWaWRlb0luZm8oKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgLy8gY3JlYXRlIGxvY2FsIHN0cmVhbVxuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtID0gQWdvcmFSVEMuY3JlYXRlU3RyZWFtKHtcbiAgICAgICAgICAgIHN0cmVhbUlEOiB0aGlzLl9wYXJhbXMudWlkLFxuICAgICAgICAgICAgYXVkaW86IHRydWUsXG4gICAgICAgICAgICB2aWRlbzogdHJ1ZSxcbiAgICAgICAgICAgIHNjcmVlbjogZmFsc2UsXG4gICAgICAgICAgICBtaWNyb3Bob25lSWQ6IGRhdGEubWljcm9waG9uZUlkLFxuICAgICAgICAgICAgY2FtZXJhSWQ6IGRhdGEuY2FtZXJhSWRcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLm9uKFwicGxheWVyLXN0YXR1cy1jaGFuZ2VcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJwbGF5ZXIgc3RhdHVzIGNoYW5nZVwiLCBldnQpO1xuICAgICAgICAgIH0pXG5cbiAgICAgICAgICBpZiAoZGF0YS5jYW1lcmFSZXNvbHV0aW9uICYmIGRhdGEuY2FtZXJhUmVzb2x1dGlvbiAhPSAnZGVmYXVsdCcpIHtcbiAgICAgICAgICAgIC8vIHNldCBsb2NhbCB2aWRlbyByZXNvbHV0aW9uXG4gICAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbS5zZXRWaWRlb1Byb2ZpbGUoZGF0YS5jYW1lcmFSZXNvbHV0aW9uKTtcbiAgICAgICAgICB9XG4gICAgXG4gICAgICAgICAgLy8gaW5pdCBsb2NhbCBzdHJlYW1cbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbS5pbml0KCgpID0+IHtcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiaW5pdCBsb2NhbCBzdHJlYW0gc3VjY2Vzc1wiKTtcbiAgICAgICAgICAgIC8vIHBsYXkgc3RyZWFtIHdpdGggaHRtbCBlbGVtZW50IGlkIFwibG9jYWxfc3RyZWFtXCJcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLnBsYXkoXCJsb2NhbF9zdHJlYW1cIiwge2ZpdDogXCJjb3ZlclwifSk7XG4gICAgXG4gICAgICAgICAgICAvLyBydW4gY2FsbGJhY2tcbiAgICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgICB9LCAoZXJyKSA9PiAge1xuICAgICAgICAgICAgVG9hc3QuZXJyb3IoXCJzdHJlYW0gaW5pdCBmYWlsZWQsIHBsZWFzZSBvcGVuIGNvbnNvbGUgc2VlIG1vcmUgZGV0YWlsXCIpO1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImluaXQgbG9jYWwgc3RyZWFtIGZhaWxlZCBcIiwgZXJyKTtcbiAgICAgICAgICB9KVxuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBUb2FzdC5lcnJvcihcImNsaWVudCBqb2luIGZhaWxlZCwgcGxlYXNlIG9wZW4gY29uc29sZSBzZWUgbW9yZSBkZXRhaWxcIik7XG4gICAgICAgICAgY29uc29sZS5lcnJvcihcImNsaWVudCBqb2luIGZhaWxlZFwiLCBlcnIpO1xuICAgICAgICB9KVxuICAgICAgfSwgKGVycikgPT4ge1xuICAgICAgICBUb2FzdC5lcnJvcihcImNsaWVudCBpbml0IGZhaWxlZCwgcGxlYXNlIG9wZW4gY29uc29sZSBzZWUgbW9yZSBkZXRhaWxcIik7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cblxuICBqb2luU2NyZWVuU2hhcmluZyAoZGF0YSkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7ICAgIFxuICAgICAgaWYgKHRoaXMuX2pvaW5lZCkge1xuICAgICAgICBUb2FzdC5lcnJvcihcIllvdXIgYWxyZWFkeSBqb2luZWRcIik7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cbiAgICBcbiAgICAgIC8qKlxuICAgICAgICogQSBjbGFzcyBkZWZpbmluZyB0aGUgcHJvcGVydGllcyBvZiB0aGUgY29uZmlnIHBhcmFtZXRlciBpbiB0aGUgY3JlYXRlQ2xpZW50IG1ldGhvZC5cbiAgICAgICAqIE5vdGU6XG4gICAgICAgKiAgICBFbnN1cmUgdGhhdCB5b3UgZG8gbm90IGxlYXZlIG1vZGUgYW5kIGNvZGVjIGFzIGVtcHR5LlxuICAgICAgICogICAgRW5zdXJlIHRoYXQgeW91IHNldCB0aGVzZSBwcm9wZXJ0aWVzIGJlZm9yZSBjYWxsaW5nIENsaWVudC5qb2luLlxuICAgICAgICogIFlvdSBjb3VsZCBmaW5kIG1vcmUgZGV0YWlsIGhlcmUuIGh0dHBzOi8vZG9jcy5hZ29yYS5pby9lbi9WaWRlby9BUEklMjBSZWZlcmVuY2Uvd2ViL2ludGVyZmFjZXMvYWdvcmFydGMuY2xpZW50Y29uZmlnLmh0bWxcbiAgICAgICoqL1xuICAgICAgdGhpcy5fY2xpZW50ID0gQWdvcmFSVEMuY3JlYXRlQ2xpZW50KHttb2RlOiBkYXRhLm1vZGUsIGNvZGVjOiBkYXRhLmNvZGVjfSk7XG4gICAgXG4gICAgICB0aGlzLl9wYXJhbXMgPSBkYXRhO1xuICAgIFxuICAgICAgLy8gaGFuZGxlIEFnb3JhUlRDIGNsaWVudCBldmVudFxuICAgICAgdGhpcy5oYW5kbGVFdmVudHMoKTtcbiAgICBcbiAgICAgIC8vIGluaXQgY2xpZW50XG4gICAgICB0aGlzLl9jbGllbnQuaW5pdChkYXRhLmFwcElELCAoKSA9PiB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiaW5pdCBzdWNjZXNzXCIpO1xuICAgIFxuICAgICAgICAvKipcbiAgICAgICAgICogSm9pbnMgYW4gQWdvcmFSVEMgQ2hhbm5lbFxuICAgICAgICAgKiBUaGlzIG1ldGhvZCBqb2lucyBhbiBBZ29yYVJUQyBjaGFubmVsLlxuICAgICAgICAgKiBQYXJhbWV0ZXJzXG4gICAgICAgICAqIHRva2VuT3JLZXk6IHN0cmluZyB8IG51bGxcbiAgICAgICAgICogICAgTG93IHNlY3VyaXR5IHJlcXVpcmVtZW50czogUGFzcyBudWxsIGFzIHRoZSBwYXJhbWV0ZXIgdmFsdWUuXG4gICAgICAgICAqICAgIEhpZ2ggc2VjdXJpdHkgcmVxdWlyZW1lbnRzOiBQYXNzIHRoZSBzdHJpbmcgb2YgdGhlIFRva2VuIG9yIENoYW5uZWwgS2V5IGFzIHRoZSBwYXJhbWV0ZXIgdmFsdWUuIFNlZSBVc2UgU2VjdXJpdHkgS2V5cyBmb3IgZGV0YWlscy5cbiAgICAgICAgICogIGNoYW5uZWw6IHN0cmluZ1xuICAgICAgICAgKiAgICBBIHN0cmluZyB0aGF0IHByb3ZpZGVzIGEgdW5pcXVlIGNoYW5uZWwgbmFtZSBmb3IgdGhlIEFnb3JhIHNlc3Npb24uIFRoZSBsZW5ndGggbXVzdCBiZSB3aXRoaW4gNjQgYnl0ZXMuIFN1cHBvcnRlZCBjaGFyYWN0ZXIgc2NvcGVzOlxuICAgICAgICAgKiAgICAyNiBsb3dlcmNhc2UgRW5nbGlzaCBsZXR0ZXJzIGEtelxuICAgICAgICAgKiAgICAyNiB1cHBlcmNhc2UgRW5nbGlzaCBsZXR0ZXJzIEEtWlxuICAgICAgICAgKiAgICAxMCBudW1iZXJzIDAtOVxuICAgICAgICAgKiAgICBTcGFjZVxuICAgICAgICAgKiAgICBcIiFcIiwgXCIjXCIsIFwiJFwiLCBcIiVcIiwgXCImXCIsIFwiKFwiLCBcIilcIiwgXCIrXCIsIFwiLVwiLCBcIjpcIiwgXCI7XCIsIFwiPFwiLCBcIj1cIiwgXCIuXCIsIFwiPlwiLCBcIj9cIiwgXCJAXCIsIFwiW1wiLCBcIl1cIiwgXCJeXCIsIFwiX1wiLCBcIntcIiwgXCJ9XCIsIFwifFwiLCBcIn5cIiwgXCIsXCJcbiAgICAgICAgICogIHVpZDogbnVtYmVyIHwgbnVsbFxuICAgICAgICAgKiAgICBUaGUgdXNlciBJRCwgYW4gaW50ZWdlci4gRW5zdXJlIHRoaXMgSUQgaXMgdW5pcXVlLiBJZiB5b3Ugc2V0IHRoZSB1aWQgdG8gbnVsbCwgdGhlIHNlcnZlciBhc3NpZ25zIG9uZSBhbmQgcmV0dXJucyBpdCBpbiB0aGUgb25TdWNjZXNzIGNhbGxiYWNrLlxuICAgICAgICAgKiAgIE5vdGU6XG4gICAgICAgICAqICAgICAgQWxsIHVzZXJzIGluIHRoZSBzYW1lIGNoYW5uZWwgc2hvdWxkIGhhdmUgdGhlIHNhbWUgdHlwZSAobnVtYmVyKSBvZiB1aWQuXG4gICAgICAgICAqICAgICAgSWYgeW91IHVzZSBhIG51bWJlciBhcyB0aGUgdXNlciBJRCwgaXQgc2hvdWxkIGJlIGEgMzItYml0IHVuc2lnbmVkIGludGVnZXIgd2l0aCBhIHZhbHVlIHJhbmdpbmcgZnJvbSAwIHRvICgyMzItMSkuXG4gICAgICAgICoqL1xuICAgICAgICB0aGlzLl9jbGllbnQuam9pbihkYXRhLnRva2VuID8gZGF0YS50b2tlbiA6IG51bGwsIGRhdGEuY2hhbm5lbCwgZGF0YS51aWQgPyArZGF0YS51aWQgOiBudWxsLCAodWlkKSA9PiB7XG4gICAgICAgICAgdGhpcy5fcGFyYW1zLnVpZCA9IHVpZDtcbiAgICAgICAgICBUb2FzdC5ub3RpY2UoXCJqb2luIGNoYW5uZWwgd2hpbGUgc2NyZWVuc2hhcmluZzogXCIgKyBkYXRhLmNoYW5uZWwgKyBcIiBzdWNjZXNzLCB1aWQ6IFwiICsgdWlkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhcImpvaW4gY2hhbm5lbCB3aGlsZSBzY3JlZW5zaGFyaW5nOiBcIiArIGRhdGEuY2hhbm5lbCArIFwiIHN1Y2Nlc3MsIHVpZDogXCIgKyB1aWQpO1xuICAgICAgICAgIHRoaXMuX2pvaW5lZCA9IHRydWU7XG4gICAgXG4gICAgICAgICAgLy8gc3RhcnQgc3RyZWFtIGludGVydmFsIHN0YXRzXG4gICAgICAgICAgLy8gaWYgeW91IGRvbid0IG5lZWQgc2hvdyBzdHJlYW0gcHJvZmlsZSB5b3UgY2FuIGNvbW1lbnQgdGhpc1xuICAgICAgICAgIGlmICghdGhpcy5faW50ZXJ2YWwpIHtcbiAgICAgICAgICAgIHRoaXMuX2ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuICAgICAgICAgICAgICB0aGlzLl91cGRhdGVWaWRlb0luZm8oKTtcbiAgICAgICAgICAgIH0sIDApO1xuICAgICAgICAgIH1cbiAgICAgICAgICAgICAgXG4gICAgICAgICAgLy8gY3JlYXRlIGxvY2FsIHN0cmVhbVxuICAgICAgICAgIGNvbnN0IHN0cmVhbVNwZWMgPSB7XG4gICAgICAgICAgICBzdHJlYW1JRDogdGhpcy5fcGFyYW1zLnVpZCxcbiAgICAgICAgICAgIGF1ZGlvOiBmYWxzZSxcbiAgICAgICAgICAgIHZpZGVvOiBmYWxzZSxcbiAgICAgICAgICAgIHNjcmVlbjogdHJ1ZSxcbiAgICAgICAgICAgIG1pY3JvcGhvbmVJZDogZGF0YS5taWNyb3Bob25lSWQsXG4gICAgICAgICAgICBjYW1lcmFJZDogZGF0YS5jYW1lcmFJZCxcbiAgICAgICAgICAgIHNjcmVlbkF1ZGlvOiBkYXRhLnNjcmVlbkF1ZGlvXG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIFxuICAgICAgICAgIC8vIFlvdXIgZmlyZWZveCBuZWVkIHVzZSBzdXBwb3J0IG1lZGlhU291cmNlIGF0IGxlYXN0XG4gICAgICAgICAgaWYgKGlzRmlyZWZveCgpKSB7XG4gICAgICAgICAgICBzdHJlYW1TcGVjLm1lZGlhU291cmNlID0gJ3dpbmRvdyc7XG4gICAgICAgICAgfSBlbHNlIGlmICghaXNDb21wYXRpYmxlQ2hyb21lKCkpIHtcbiAgICAgICAgICAgIC8vIGJlZm9yZSBjaHJvbWUgNzIgbmVlZCBpbnN0YWxsIGNocm9tZSBleHRlbnNpb25zXG4gICAgICAgICAgICAvLyBZb3UgY2FuIGRvd25sb2FkIHNjcmVlbiBzaGFyZSBwbHVnaW4gaGVyZSBodHRwczovL2Nocm9tZS5nb29nbGUuY29tL3dlYnN0b3JlL2RldGFpbC9hZ29yYS13ZWItc2NyZWVuc2hhcmluZy9taW5sbHBtaGRncG5kbmtvbWNvY2NmZWtmZWdubGlrZ1xuICAgICAgICAgICAgc3RyZWFtU3BlYy5leHRlbnNpb25JZCA9ICdtaW5sbHBtaGRncG5kbmtvbWNvY2NmZWtmZWdubGlrZyc7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIFRvYXN0Lm5vdGljZShcInRlc3RcIik7XG5cbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbSA9IEFnb3JhUlRDLmNyZWF0ZVN0cmVhbShzdHJlYW1TcGVjKTtcblxuICAgICAgICAgIC8vIFRvYXN0Lm5vdGljZShcIl9sb2NhbFN0cmVhbVwiKTtcbiAgICAgICAgICAvLyBUb2FzdC5ub3RpY2UoX2xvY2FsU3RyZWFtKTtcblxuICAgICAgICAgIC8vIHNldCBzY3JlZW4gc2hhcmluZyB2aWRlbyByZXNvbHV0aW9uXG4gICAgICAgICAgaWYgKGRhdGEuc2NyZWVuU2hhcmVSZXNvbHV0aW9uICE9ICdkZWZhdWx0Jykge1xuICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW0uc2V0U2NyZWVuUHJvZmlsZShkYXRhLnNjcmVlblNoYXJlUmVzb2x1dGlvbik7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhcInNldCBzY3JlZW4gcHJvZmlsZVwiLCBkYXRhLnNjcmVlblNoYXJlUmVzb2x1dGlvbik7XG4gICAgICAgICAgfVxuICAgICAgIFxuICAgICAgICAgIC8vIE9jY3VycyB3aGVuIHNkayBlbWl0IGVycm9yIFxuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLm9uKFwiZXJyb3JcIiwgKGV2dCkgPT4ge1xuICAgICAgICAgICAgVG9hc3QuZXJyb3IoXCJlcnJvclwiLCBKU09OLnN0cmluZ2lmeShbZXZ0XSkpXG4gICAgICAgICAgfSlcblxuICAgICAgICAgIC8vIE9jY3VycyB3aGVuIGEgeW91IHN0b3Agc2NyZWVuIHNoYXJpbmdcbiAgICAgICAgICB0aGlzLl9sb2NhbFN0cmVhbS5vbihcInN0b3BTY3JlZW5TaGFyaW5nXCIsIChldnQpID0+IHtcbiAgICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLnN0b3AoKTtcbiAgICAgICAgICAgIHRoaXMuX3Nob3dQcm9maWxlID0gZmFsc2U7XG4gICAgICAgICAgICBUb2FzdC5ub3RpY2UoXCJzdG9wIHNjcmVlbiBzaGFyaW5nXCIpXG4gICAgICAgICAgfSlcbiAgICBcbiAgICAgICAgICAvLyBpbml0IGxvY2FsIHN0cmVhbVxuICAgICAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLmluaXQoKCkgPT4ge1xuICAgICAgICAgICAgY29uc29sZS5sb2coXCJpbml0IGxvY2FsIHN0cmVhbSBzdWNjZXNzXCIpO1xuICAgICAgICAgICAgLy8gcGxheSBzdHJlYW0gd2l0aCBodG1sIGVsZW1lbnQgaWQgXCJsb2NhbF9zdHJlYW1cIlxuICAgICAgICAgICAgdGhpcy5fbG9jYWxTdHJlYW0ucGxheShcImxvY2FsX3N0cmVhbVwiLCB7Zml0OiBcImNvdmVyXCJ9KVxuICAgIFxuICAgICAgICAgICAgLy8gcnVuIGNhbGxiYWNrXG4gICAgICAgICAgICByZXNvbHZlKCk7XG4gICAgICAgICAgfSwgKGVycikgPT4gIHtcbiAgICAgICAgICAgIFRvYXN0LmVycm9yKFwic3RyZWFtIGluaXQgZmFpbGVkLCBwbGVhc2Ugb3BlbiBjb25zb2xlIHNlZSBtb3JlIGRldGFpbFwiKVxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihcImluaXQgbG9jYWwgc3RyZWFtIGZhaWxlZCBcIiwgZXJyKTtcbiAgICAgICAgICAgIGlmIChpc0ZpcmVmb3goKSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gc3RhcnQgc2NyZWVuIHNoYXJpbmcsIG1heWJlIGZpcmVmb3ggbm90IHN1cHBvcnQgbWVkaWFTb3VyY2UsIHBsZWFzZSB1cGdyYWRlIHlvdXIgZmlyZWZveCB0byBsYXRlc3QgdmVyc2lvbicpXG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghaXNDb21wYXRpYmxlQ2hyb21lKCkpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIHN0YXJ0IHNjcmVlbiBzaGFyaW5nLCBtYXliZSBjaHJvbWUgZXh0ZW5zaW9uIHdhcyBub3QgaW5zdGFsbGVkIHByb3Blcmx5LCB5b3UgY2FuIGdldCBpdCBmcm9tIGh0dHBzOi8vY2hyb21lLmdvb2dsZS5jb20vd2Vic3RvcmUvZGV0YWlsL21pbmxscG1oZGdwbmRua29tY29jY2Zla2ZlZ25saWtnJyk7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KVxuICAgICAgICB9LCBmdW5jdGlvbihlcnIpIHtcbiAgICAgICAgICBUb2FzdC5lcnJvcihcImNsaWVudCBqb2luIGZhaWxlZCwgcGxlYXNlIG9wZW4gY29uc29sZSBzZWUgbW9yZSBkZXRhaWxcIilcbiAgICAgICAgICBjb25zb2xlLmVycm9yKFwiY2xpZW50IGpvaW4gZmFpbGVkXCIsIGVycilcbiAgICAgICAgfSlcbiAgICAgIH0sIChlcnIpID0+IHtcbiAgICAgICAgVG9hc3QuZXJyb3IoXCJjbGllbnQgaW5pdCBmYWlsZWQsIHBsZWFzZSBvcGVuIGNvbnNvbGUgc2VlIG1vcmUgZGV0YWlsXCIpXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKTtcbiAgICAgIH0pO1xuICAgIH0pXG4gIH1cblxuICBwdWJsaXNoICgpIHtcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xuICAgICAgVG9hc3QuZXJyb3IoXCJQbGVhc2UgSm9pbiBGaXJzdFwiKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKHRoaXMuX3B1Ymxpc2hlZCkge1xuICAgICAgVG9hc3QuZXJyb3IoXCJZb3VyIGFscmVhZHkgcHVibGlzaGVkXCIpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBvbGRTdGF0ZSA9IHRoaXMuX3B1Ymxpc2hlZDtcbiAgXG4gICAgLy8gcHVibGlzaCBsb2NhbFN0cmVhbVxuICAgIHRoaXMuX2NsaWVudC5wdWJsaXNoKHRoaXMuX2xvY2FsU3RyZWFtLCAoZXJyKSA9PiB7XG4gICAgICB0aGlzLl9wdWJsaXNoZWQgPSBvbGRTdGF0ZTtcbiAgICAgIGNvbnNvbGUubG9nKFwicHVibGlzaCBmYWlsZWRcIik7XG4gICAgICBUb2FzdC5lcnJvcihcInB1Ymxpc2ggZmFpbGVkXCIpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0pXG4gICAgVG9hc3QuaW5mbyhcInB1Ymxpc2hcIik7XG4gICAgdGhpcy5fcHVibGlzaGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHVucHVibGlzaCAoKSB7XG4gICAgaWYgKCF0aGlzLl9jbGllbnQpIHtcbiAgICAgIFRvYXN0LmVycm9yKFwiUGxlYXNlIEpvaW4gRmlyc3RcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy5fcHVibGlzaGVkKSB7XG4gICAgICBUb2FzdC5lcnJvcihcIllvdXIgZGlkbid0IHB1Ymxpc2hcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IG9sZFN0YXRlID0gdGhpcy5fcHVibGlzaGVkO1xuICAgIHRoaXMuX2NsaWVudC51bnB1Ymxpc2godGhpcy5fbG9jYWxTdHJlYW0sIChlcnIpID0+IHtcbiAgICAgIHRoaXMuX3B1Ymxpc2hlZCA9IG9sZFN0YXRlO1xuICAgICAgY29uc29sZS5sb2coXCJ1bnB1Ymxpc2ggZmFpbGVkXCIpO1xuICAgICAgVG9hc3QuZXJyb3IoXCJ1bnB1Ymxpc2ggZmFpbGVkXCIpXG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG4gICAgVG9hc3QuaW5mbyhcInVucHVibGlzaFwiKTtcbiAgICB0aGlzLl9wdWJsaXNoZWQgPSBmYWxzZTtcbiAgfVxuXG4gIGxlYXZlICgpIHtcbiAgICBpZiAoIXRoaXMuX2NsaWVudCkge1xuICAgICAgVG9hc3QuZXJyb3IoXCJQbGVhc2UgSm9pbiBGaXJzdCFcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICghdGhpcy5fam9pbmVkKSB7XG4gICAgICBUb2FzdC5lcnJvcihcIllvdSBhcmUgbm90IGluIGNoYW5uZWxcIik7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIC8vIGxlYXZlIGNoYW5uZWxcbiAgICB0aGlzLl9jbGllbnQubGVhdmUoKCkgPT4ge1xuICAgICAgLy8gY2xvc2Ugc3RyZWFtXG4gICAgICB0aGlzLl9sb2NhbFN0cmVhbS5jbG9zZSgpO1xuXG4gICAgICAkKFwiI2xvY2FsX3ZpZGVvX2luZm9cIikuYWRkQ2xhc3MoXCJoaWRlXCIpO1xuICAgICAgLy8gc3RvcCBzdHJlYW1cbiAgICAgIHRoaXMuX2xvY2FsU3RyZWFtLnN0b3AoKTtcbiAgICAgIHdoaWxlICh0aGlzLl9yZW1vdGVTdHJlYW1zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgY29uc3Qgc3RyZWFtID0gdGhpcy5fcmVtb3RlU3RyZWFtcy5zaGlmdCgpO1xuICAgICAgICBjb25zdCBpZCA9IHN0cmVhbS5nZXRJZCgpXG4gICAgICAgIHN0cmVhbS5zdG9wKCk7XG4gICAgICAgIHJlbW92ZVZpZXcoaWQpO1xuICAgICAgfVxuICAgICAgdGhpcy5fbG9jYWxTdHJlYW0gPSBudWxsO1xuICAgICAgdGhpcy5fcmVtb3RlU3RyZWFtcyA9IFtdO1xuICAgICAgdGhpcy5fY2xpZW50ID0gbnVsbDtcbiAgICAgIGNvbnNvbGUubG9nKFwiY2xpZW50IGxlYXZlcyBjaGFubmVsIHN1Y2Nlc3NcIik7XG4gICAgICB0aGlzLl9wdWJsaXNoZWQgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2pvaW5lZCA9IGZhbHNlO1xuICAgICAgVG9hc3Qubm90aWNlKFwibGVhdmUgc3VjY2Vzc1wiKVxuICAgIH0sIChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKFwiY2hhbm5lbCBsZWF2ZSBmYWlsZWRcIik7XG4gICAgICBUb2FzdC5lcnJvcihcImxlYXZlIHN1Y2Nlc3NcIik7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSlcbiAgfVxuXG4gIF9nZXRMb3N0UmF0ZSAobG9zdFBhY2tldHMsIGFycml2ZWRQYWNrZXRzKSB7XG4gICAgbGV0IGxvc3QgPSBsb3N0UGFja2V0cyA/ICtsb3N0UGFja2V0cyA6IDA7XG4gICAgbGV0IGFycml2ZWQgPSBhcnJpdmVkUGFja2V0cyA/ICthcnJpdmVkUGFja2V0cyA6IDA7XG4gICAgaWYgKGFycml2ZWQgPT0gMCkgcmV0dXJuIDA7XG4gICAgY29uc3QgcmVzdWx0ID0gKGxvc3QgLyAobG9zdCArIGFycml2ZWQpKS50b0ZpeGVkKDIpICogMTAwXG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfVxuXG4gIF91cGRhdGVWaWRlb0luZm8gKCkge1xuICAgIHRoaXMuX2xvY2FsU3RyZWFtICYmIHRoaXMuX2xvY2FsU3RyZWFtLmdldFN0YXRzKChzdGF0cykgPT4ge1xuICAgICAgY29uc3QgbG9jYWxTdHJlYW1Qcm9maWxlID0gW1xuICAgICAgICBbJ1VpZDogJywgdGhpcy5fbG9jYWxTdHJlYW0uZ2V0SWQoKV0uam9pbignJyksXG4gICAgICAgIFsnU0ROIGFjY2VzcyBkZWxheTogJywgc3RhdHMuYWNjZXNzRGVsYXksICdtcyddLmpvaW4oJycpLFxuICAgICAgICBbJ1ZpZGVvIHNlbmQ6ICcsIHN0YXRzLnZpZGVvU2VuZEZyYW1lUmF0ZSwgJ2ZwcyAnLCBzdGF0cy52aWRlb1NlbmRSZXNvbHV0aW9uV2lkdGggKyAneCcgKyBzdGF0cy52aWRlb1NlbmRSZXNvbHV0aW9uSGVpZ2h0XS5qb2luKCcnKSxcbiAgICAgIF0uam9pbignPGJyLz4nKTtcbiAgICAgICQoXCIjbG9jYWxfdmlkZW9faW5mb1wiKVswXS5pbm5lckhUTUwgPSBsb2NhbFN0cmVhbVByb2ZpbGU7XG4gICAgfSlcblxuICAgIGlmICh0aGlzLl9yZW1vdGVTdHJlYW1zLmxlbmd0aCA+IDApIHtcbiAgICAgIGZvciAobGV0IHJlbW90ZVN0cmVhbSBvZiB0aGlzLl9yZW1vdGVTdHJlYW1zKSB7XG4gICAgICAgIHJlbW90ZVN0cmVhbS5nZXRTdGF0cygoc3RhdHMpID0+IHtcbiAgICAgICAgICBjb25zdCByZW1vdGVTdHJlYW1Qcm9maWxlID0gW1xuICAgICAgICAgICAgWydVaWQ6ICcsIHJlbW90ZVN0cmVhbS5nZXRJZCgpXS5qb2luKCcnKSxcbiAgICAgICAgICAgIFsnU0ROIGFjY2VzcyBkZWxheTogJywgc3RhdHMuYWNjZXNzRGVsYXksICdtcyddLmpvaW4oJycpLFxuICAgICAgICAgICAgWydFbmQgdG8gZW5kIGRlbGF5OiAnLCBzdGF0cy5lbmRUb0VuZERlbGF5LCAnbXMnXS5qb2luKCcnKSxcbiAgICAgICAgICAgIFsnVmlkZW8gcmVjdjogJywgc3RhdHMudmlkZW9SZWNlaXZlRnJhbWVSYXRlLCAnZnBzICcsIHN0YXRzLnZpZGVvUmVjZWl2ZVJlc29sdXRpb25XaWR0aCArICd4JyArIHN0YXRzLnZpZGVvUmVjZWl2ZVJlc29sdXRpb25IZWlnaHRdLmpvaW4oJycpLFxuICAgICAgICAgIF0uam9pbignPGJyLz4nKTtcbiAgICAgICAgICBpZiAoJChcIiNyZW1vdGVfdmlkZW9faW5mb19cIityZW1vdGVTdHJlYW0uZ2V0SWQoKSlbMF0pIHtcbiAgICAgICAgICAgICQoXCIjcmVtb3RlX3ZpZGVvX2luZm9fXCIrcmVtb3RlU3RyZWFtLmdldElkKCkpWzBdLmlubmVySFRNTCA9IHJlbW90ZVN0cmVhbVByb2ZpbGU7XG4gICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIHNldE5ldHdvcmtRdWFsaXR5QW5kU3RyZWFtU3RhdHMgKGVuYWJsZSkge1xuICAgIHRoaXMuX3Nob3dQcm9maWxlID0gZW5hYmxlO1xuICAgIHRoaXMuX3Nob3dQcm9maWxlID8gJChcIi52aWRlby1wcm9maWxlXCIpLnJlbW92ZUNsYXNzKFwiaGlkZVwiKSA6ICQoXCIudmlkZW8tcHJvZmlsZVwiKS5hZGRDbGFzcyhcImhpZGVcIilcbiAgfVxufVxuXG4iLCIvKiFcbiAqIFVBUGFyc2VyLmpzIHYwLjcuMjBcbiAqIExpZ2h0d2VpZ2h0IEphdmFTY3JpcHQtYmFzZWQgVXNlci1BZ2VudCBzdHJpbmcgcGFyc2VyXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZmFpc2FsbWFuL3VhLXBhcnNlci1qc1xuICpcbiAqIENvcHlyaWdodCDCqSAyMDEyLTIwMTkgRmFpc2FsIFNhbG1hbiA8ZkBmYWlzYWxtYW4uY29tPlxuICogTGljZW5zZWQgdW5kZXIgTUlUIExpY2Vuc2VcbiAqL1xuXG4oZnVuY3Rpb24gKHdpbmRvdywgdW5kZWZpbmVkKSB7XG5cbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICAvLy8vLy8vLy8vLy8vL1xuICAgIC8vIENvbnN0YW50c1xuICAgIC8vLy8vLy8vLy8vLy9cblxuXG4gICAgdmFyIExJQlZFUlNJT04gID0gJzAuNy4yMCcsXG4gICAgICAgIEVNUFRZICAgICAgID0gJycsXG4gICAgICAgIFVOS05PV04gICAgID0gJz8nLFxuICAgICAgICBGVU5DX1RZUEUgICA9ICdmdW5jdGlvbicsXG4gICAgICAgIFVOREVGX1RZUEUgID0gJ3VuZGVmaW5lZCcsXG4gICAgICAgIE9CSl9UWVBFICAgID0gJ29iamVjdCcsXG4gICAgICAgIFNUUl9UWVBFICAgID0gJ3N0cmluZycsXG4gICAgICAgIE1BSk9SICAgICAgID0gJ21ham9yJywgLy8gZGVwcmVjYXRlZFxuICAgICAgICBNT0RFTCAgICAgICA9ICdtb2RlbCcsXG4gICAgICAgIE5BTUUgICAgICAgID0gJ25hbWUnLFxuICAgICAgICBUWVBFICAgICAgICA9ICd0eXBlJyxcbiAgICAgICAgVkVORE9SICAgICAgPSAndmVuZG9yJyxcbiAgICAgICAgVkVSU0lPTiAgICAgPSAndmVyc2lvbicsXG4gICAgICAgIEFSQ0hJVEVDVFVSRT0gJ2FyY2hpdGVjdHVyZScsXG4gICAgICAgIENPTlNPTEUgICAgID0gJ2NvbnNvbGUnLFxuICAgICAgICBNT0JJTEUgICAgICA9ICdtb2JpbGUnLFxuICAgICAgICBUQUJMRVQgICAgICA9ICd0YWJsZXQnLFxuICAgICAgICBTTUFSVFRWICAgICA9ICdzbWFydHR2JyxcbiAgICAgICAgV0VBUkFCTEUgICAgPSAnd2VhcmFibGUnLFxuICAgICAgICBFTUJFRERFRCAgICA9ICdlbWJlZGRlZCc7XG5cblxuICAgIC8vLy8vLy8vLy8vXG4gICAgLy8gSGVscGVyXG4gICAgLy8vLy8vLy8vL1xuXG5cbiAgICB2YXIgdXRpbCA9IHtcbiAgICAgICAgZXh0ZW5kIDogZnVuY3Rpb24gKHJlZ2V4ZXMsIGV4dGVuc2lvbnMpIHtcbiAgICAgICAgICAgIHZhciBtZXJnZWRSZWdleGVzID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBpIGluIHJlZ2V4ZXMpIHtcbiAgICAgICAgICAgICAgICBpZiAoZXh0ZW5zaW9uc1tpXSAmJiBleHRlbnNpb25zW2ldLmxlbmd0aCAlIDIgPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgbWVyZ2VkUmVnZXhlc1tpXSA9IGV4dGVuc2lvbnNbaV0uY29uY2F0KHJlZ2V4ZXNbaV0pO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIG1lcmdlZFJlZ2V4ZXNbaV0gPSByZWdleGVzW2ldO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBtZXJnZWRSZWdleGVzO1xuICAgICAgICB9LFxuICAgICAgICBoYXMgOiBmdW5jdGlvbiAoc3RyMSwgc3RyMikge1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3RyMSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgcmV0dXJuIHN0cjIudG9Mb3dlckNhc2UoKS5pbmRleE9mKHN0cjEudG9Mb3dlckNhc2UoKSkgIT09IC0xO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBsb3dlcml6ZSA6IGZ1bmN0aW9uIChzdHIpIHtcbiAgICAgICAgICAgIHJldHVybiBzdHIudG9Mb3dlckNhc2UoKTtcbiAgICAgICAgfSxcbiAgICAgICAgbWFqb3IgOiBmdW5jdGlvbiAodmVyc2lvbikge1xuICAgICAgICAgICAgcmV0dXJuIHR5cGVvZih2ZXJzaW9uKSA9PT0gU1RSX1RZUEUgPyB2ZXJzaW9uLnJlcGxhY2UoL1teXFxkXFwuXS9nLCcnKS5zcGxpdChcIi5cIilbMF0gOiB1bmRlZmluZWQ7XG4gICAgICAgIH0sXG4gICAgICAgIHRyaW0gOiBmdW5jdGlvbiAoc3RyKSB7XG4gICAgICAgICAgcmV0dXJuIHN0ci5yZXBsYWNlKC9eW1xcc1xcdUZFRkZcXHhBMF0rfFtcXHNcXHVGRUZGXFx4QTBdKyQvZywgJycpO1xuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gTWFwIGhlbHBlclxuICAgIC8vLy8vLy8vLy8vLy8vXG5cblxuICAgIHZhciBtYXBwZXIgPSB7XG5cbiAgICAgICAgcmd4IDogZnVuY3Rpb24gKHVhLCBhcnJheXMpIHtcblxuICAgICAgICAgICAgdmFyIGkgPSAwLCBqLCBrLCBwLCBxLCBtYXRjaGVzLCBtYXRjaDtcblxuICAgICAgICAgICAgLy8gbG9vcCB0aHJvdWdoIGFsbCByZWdleGVzIG1hcHNcbiAgICAgICAgICAgIHdoaWxlIChpIDwgYXJyYXlzLmxlbmd0aCAmJiAhbWF0Y2hlcykge1xuXG4gICAgICAgICAgICAgICAgdmFyIHJlZ2V4ID0gYXJyYXlzW2ldLCAgICAgICAvLyBldmVuIHNlcXVlbmNlICgwLDIsNCwuLilcbiAgICAgICAgICAgICAgICAgICAgcHJvcHMgPSBhcnJheXNbaSArIDFdOyAgIC8vIG9kZCBzZXF1ZW5jZSAoMSwzLDUsLi4pXG4gICAgICAgICAgICAgICAgaiA9IGsgPSAwO1xuXG4gICAgICAgICAgICAgICAgLy8gdHJ5IG1hdGNoaW5nIHVhc3RyaW5nIHdpdGggcmVnZXhlc1xuICAgICAgICAgICAgICAgIHdoaWxlIChqIDwgcmVnZXgubGVuZ3RoICYmICFtYXRjaGVzKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcyA9IHJlZ2V4W2orK10uZXhlYyh1YSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCEhbWF0Y2hlcykge1xuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChwID0gMDsgcCA8IHByb3BzLmxlbmd0aDsgcCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2ggPSBtYXRjaGVzWysra107XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcSA9IHByb3BzW3BdO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGNoZWNrIGlmIGdpdmVuIHByb3BlcnR5IGlzIGFjdHVhbGx5IGFycmF5XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBxID09PSBPQkpfVFlQRSAmJiBxLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHEubGVuZ3RoID09IDIpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcVsxXSA9PSBGVU5DX1RZUEUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBhc3NpZ24gbW9kaWZpZWQgbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gcVsxXS5jYWxsKHRoaXMsIG1hdGNoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYXNzaWduIGdpdmVuIHZhbHVlLCBpZ25vcmUgcmVnZXggbWF0Y2hcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzW3FbMF1dID0gcVsxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChxLmxlbmd0aCA9PSAzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBjaGVjayB3aGV0aGVyIGZ1bmN0aW9uIG9yIHJlZ2V4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHFbMV0gPT09IEZVTkNfVFlQRSAmJiAhKHFbMV0uZXhlYyAmJiBxWzFdLnRlc3QpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2FsbCBmdW5jdGlvbiAodXN1YWxseSBzdHJpbmcgbWFwcGVyKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNbcVswXV0gPSBtYXRjaCA/IHFbMV0uY2FsbCh0aGlzLCBtYXRjaCwgcVsyXSkgOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIHNhbml0aXplIG1hdGNoIHVzaW5nIGdpdmVuIHJlZ2V4XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1txWzBdXSA9IG1hdGNoID8gbWF0Y2gucmVwbGFjZShxWzFdLCBxWzJdKSA6IHVuZGVmaW5lZDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChxLmxlbmd0aCA9PSA0KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1txWzBdXSA9IG1hdGNoID8gcVszXS5jYWxsKHRoaXMsIG1hdGNoLnJlcGxhY2UocVsxXSwgcVsyXSkpIDogdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1txXSA9IG1hdGNoID8gbWF0Y2ggOiB1bmRlZmluZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGkgKz0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSxcblxuICAgICAgICBzdHIgOiBmdW5jdGlvbiAoc3RyLCBtYXApIHtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSBpbiBtYXApIHtcbiAgICAgICAgICAgICAgICAvLyBjaGVjayBpZiBhcnJheVxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgbWFwW2ldID09PSBPQkpfVFlQRSAmJiBtYXBbaV0ubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1hcFtpXS5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHV0aWwuaGFzKG1hcFtpXVtqXSwgc3RyKSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoaSA9PT0gVU5LTk9XTikgPyB1bmRlZmluZWQgOiBpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh1dGlsLmhhcyhtYXBbaV0sIHN0cikpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChpID09PSBVTktOT1dOKSA/IHVuZGVmaW5lZCA6IGk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIHN0cjtcbiAgICAgICAgfVxuICAgIH07XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vL1xuICAgIC8vIFN0cmluZyBtYXBcbiAgICAvLy8vLy8vLy8vLy8vL1xuXG5cbiAgICB2YXIgbWFwcyA9IHtcblxuICAgICAgICBicm93c2VyIDoge1xuICAgICAgICAgICAgb2xkc2FmYXJpIDoge1xuICAgICAgICAgICAgICAgIHZlcnNpb24gOiB7XG4gICAgICAgICAgICAgICAgICAgICcxLjAnICAgOiAnLzgnLFxuICAgICAgICAgICAgICAgICAgICAnMS4yJyAgIDogJy8xJyxcbiAgICAgICAgICAgICAgICAgICAgJzEuMycgICA6ICcvMycsXG4gICAgICAgICAgICAgICAgICAgICcyLjAnICAgOiAnLzQxMicsXG4gICAgICAgICAgICAgICAgICAgICcyLjAuMicgOiAnLzQxNicsXG4gICAgICAgICAgICAgICAgICAgICcyLjAuMycgOiAnLzQxNycsXG4gICAgICAgICAgICAgICAgICAgICcyLjAuNCcgOiAnLzQxOScsXG4gICAgICAgICAgICAgICAgICAgICc/JyAgICAgOiAnLydcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgZGV2aWNlIDoge1xuICAgICAgICAgICAgYW1hem9uIDoge1xuICAgICAgICAgICAgICAgIG1vZGVsIDoge1xuICAgICAgICAgICAgICAgICAgICAnRmlyZSBQaG9uZScgOiBbJ1NEJywgJ0tGJ11cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgc3ByaW50IDoge1xuICAgICAgICAgICAgICAgIG1vZGVsIDoge1xuICAgICAgICAgICAgICAgICAgICAnRXZvIFNoaWZ0IDRHJyA6ICc3MzczS1QnXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICB2ZW5kb3IgOiB7XG4gICAgICAgICAgICAgICAgICAgICdIVEMnICAgICAgIDogJ0FQQScsXG4gICAgICAgICAgICAgICAgICAgICdTcHJpbnQnICAgIDogJ1NwcmludCdcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG5cbiAgICAgICAgb3MgOiB7XG4gICAgICAgICAgICB3aW5kb3dzIDoge1xuICAgICAgICAgICAgICAgIHZlcnNpb24gOiB7XG4gICAgICAgICAgICAgICAgICAgICdNRScgICAgICAgIDogJzQuOTAnLFxuICAgICAgICAgICAgICAgICAgICAnTlQgMy4xMScgICA6ICdOVDMuNTEnLFxuICAgICAgICAgICAgICAgICAgICAnTlQgNC4wJyAgICA6ICdOVDQuMCcsXG4gICAgICAgICAgICAgICAgICAgICcyMDAwJyAgICAgIDogJ05UIDUuMCcsXG4gICAgICAgICAgICAgICAgICAgICdYUCcgICAgICAgIDogWydOVCA1LjEnLCAnTlQgNS4yJ10sXG4gICAgICAgICAgICAgICAgICAgICdWaXN0YScgICAgIDogJ05UIDYuMCcsXG4gICAgICAgICAgICAgICAgICAgICc3JyAgICAgICAgIDogJ05UIDYuMScsXG4gICAgICAgICAgICAgICAgICAgICc4JyAgICAgICAgIDogJ05UIDYuMicsXG4gICAgICAgICAgICAgICAgICAgICc4LjEnICAgICAgIDogJ05UIDYuMycsXG4gICAgICAgICAgICAgICAgICAgICcxMCcgICAgICAgIDogWydOVCA2LjQnLCAnTlQgMTAuMCddLFxuICAgICAgICAgICAgICAgICAgICAnUlQnICAgICAgICA6ICdBUk0nXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuXG4gICAgLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBSZWdleCBtYXBcbiAgICAvLy8vLy8vLy8vLy8vXG5cblxuICAgIHZhciByZWdleGVzID0ge1xuXG4gICAgICAgIGJyb3dzZXIgOiBbW1xuXG4gICAgICAgICAgICAvLyBQcmVzdG8gYmFzZWRcbiAgICAgICAgICAgIC8ob3BlcmFcXHNtaW5pKVxcLyhbXFx3XFwuLV0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIE1pbmlcbiAgICAgICAgICAgIC8ob3BlcmFcXHNbbW9iaWxldGFiXSspLit2ZXJzaW9uXFwvKFtcXHdcXC4tXSspL2ksICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIE1vYmkvVGFibGV0XG4gICAgICAgICAgICAvKG9wZXJhKS4rdmVyc2lvblxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhID4gOS44MFxuICAgICAgICAgICAgLyhvcGVyYSlbXFwvXFxzXSsoW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgPCA5LjgwXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhvcGlvcylbXFwvXFxzXSsoW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgbWluaSBvbiBpcGhvbmUgPj0gOC4wXG4gICAgICAgICAgICBdLCBbW05BTUUsICdPcGVyYSBNaW5pJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC9cXHMob3ByKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE9wZXJhIFdlYmtpdFxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnT3BlcmEnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLy8gTWl4ZWRcbiAgICAgICAgICAgIC8oa2luZGxlKVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2luZGxlXG4gICAgICAgICAgICAvKGx1bmFzY2FwZXxtYXh0aG9ufG5ldGZyb250fGphc21pbmV8YmxhemVyKVtcXC9cXHNdPyhbXFx3XFwuXSopL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEx1bmFzY2FwZS9NYXh0aG9uL05ldGZyb250L0phc21pbmUvQmxhemVyXG5cbiAgICAgICAgICAgIC8vIFRyaWRlbnQgYmFzZWRcbiAgICAgICAgICAgIC8oYXZhbnRcXHN8aWVtb2JpbGV8c2xpbXxiYWlkdSkoPzpicm93c2VyKT9bXFwvXFxzXT8oW1xcd1xcLl0qKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBdmFudC9JRU1vYmlsZS9TbGltQnJvd3Nlci9CYWlkdVxuICAgICAgICAgICAgLyg/Om1zfFxcKCkoaWUpXFxzKFtcXHdcXC5dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSW50ZXJuZXQgRXhwbG9yZXJcblxuICAgICAgICAgICAgLy8gV2Via2l0L0tIVE1MIGJhc2VkXG4gICAgICAgICAgICAvKHJla29ucSlcXC8oW1xcd1xcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJla29ucVxuICAgICAgICAgICAgLyhjaHJvbWl1bXxmbG9ja3xyb2NrbWVsdHxtaWRvcml8ZXBpcGhhbnl8c2lsa3xza3lmaXJlfG92aWJyb3dzZXJ8Ym9sdHxpcm9ufHZpdmFsZGl8aXJpZGl1bXxwaGFudG9tanN8Ym93c2VyfHF1YXJrfHF1cHppbGxhfGZhbGtvbilcXC8oW1xcd1xcLi1dKykvaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWl1bS9GbG9jay9Sb2NrTWVsdC9NaWRvcmkvRXBpcGhhbnkvU2lsay9Ta3lmaXJlL0JvbHQvSXJvbi9JcmlkaXVtL1BoYW50b21KUy9Cb3dzZXIvUXVwWmlsbGEvRmFsa29uXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhrb25xdWVyb3IpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLb25xdWVyb3JcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0tvbnF1ZXJvciddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKHRyaWRlbnQpLitydls6XFxzXShbXFx3XFwuXSspLitsaWtlXFxzZ2Vja28vaSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJRTExXG4gICAgICAgICAgICBdLCBbW05BTUUsICdJRSddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKGVkZ2V8ZWRnaW9zfGVkZ2F8ZWRnKVxcLygoXFxkKyk/W1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaWNyb3NvZnQgRWRnZVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnRWRnZSddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKHlhYnJvd3NlcilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFlhbmRleFxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnWWFuZGV4J10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8ocHVmZmluKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUHVmZmluXG4gICAgICAgICAgICBdLCBbW05BTUUsICdQdWZmaW4nXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhmb2N1cylcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IEZvY3VzXG4gICAgICAgICAgICBdLCBbW05BTUUsICdGaXJlZm94IEZvY3VzJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8ob3B0KVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3BlcmEgVG91Y2hcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ09wZXJhIFRvdWNoJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oKD86W1xcc1xcL10pdWM/XFxzP2Jyb3dzZXJ8KD86anVjLispdWN3ZWIpW1xcL1xcc10/KFtcXHdcXC5dKykvaSAgICAgICAgIC8vIFVDQnJvd3NlclxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnVUNCcm93c2VyJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oY29tb2RvX2RyYWdvbilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29tb2RvIERyYWdvblxuICAgICAgICAgICAgXSwgW1tOQU1FLCAvXy9nLCAnICddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKHdpbmRvd3N3ZWNoYXQgcWJjb3JlKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlQ2hhdCBEZXNrdG9wIGZvciBXaW5kb3dzIEJ1aWx0LWluIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ1dlQ2hhdChXaW4pIERlc2t0b3AnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhtaWNyb21lc3NlbmdlcilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZUNoYXRcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ1dlQ2hhdCddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKGJyYXZlKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQnJhdmUgYnJvd3NlclxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnQnJhdmUnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhxcWJyb3dzZXJsaXRlKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBRUUJyb3dzZXJMaXRlXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhRUSlcXC8oW1xcZFxcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBRUSwgYWthIFNob3VRXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgL20/KHFxYnJvd3NlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUVFCcm93c2VyXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhCSURVQnJvd3NlcilbXFwvXFxzXT8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmFpZHUgQnJvd3NlclxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oMjM0NUV4cGxvcmVyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIDIzNDUgQnJvd3NlclxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8oTWV0YVNyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNvdUdvdUJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtOQU1FXSwgW1xuXG4gICAgICAgICAgICAvKExCQlJPV1NFUikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGllQmFvIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtOQU1FXSwgW1xuXG4gICAgICAgICAgICAveGlhb21pXFwvbWl1aWJyb3dzZXJcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNSVVJIEJyb3dzZXJcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ01JVUkgQnJvd3NlciddXSwgW1xuXG4gICAgICAgICAgICAvO2ZiYXZcXC8oW1xcd1xcLl0rKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZhY2Vib29rIEFwcCBmb3IgaU9TICYgQW5kcm9pZFxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnRmFjZWJvb2snXV0sIFtcblxuICAgICAgICAgICAgL3NhZmFyaVxccyhsaW5lKVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGluZSBBcHAgZm9yIGlPU1xuICAgICAgICAgICAgL2FuZHJvaWQuKyhsaW5lKVxcLyhbXFx3XFwuXSspXFwvaWFiL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTGluZSBBcHAgZm9yIEFuZHJvaWRcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvaGVhZGxlc3NjaHJvbWUoPzpcXC8oW1xcd1xcLl0rKXxcXHMpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUgSGVhZGxlc3NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0Nocm9tZSBIZWFkbGVzcyddXSwgW1xuXG4gICAgICAgICAgICAvXFxzd3ZcXCkuKyhjaHJvbWUpXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lIFdlYlZpZXdcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgLyguKykvLCAnJDEgV2ViVmlldyddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKCg/Om9jdWx1c3xzYW1zdW5nKWJyb3dzZXIpXFwvKFtcXHdcXC5dKykvaVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAvKC4rKD86Z3x1cykpKC4rKS8sICckMSAkMiddLCBWRVJTSU9OXSwgWyAgICAgICAgICAgICAgICAvLyBPY3VsdXMgLyBTYW1zdW5nIEJyb3dzZXJcblxuICAgICAgICAgICAgL2FuZHJvaWQuK3ZlcnNpb25cXC8oW1xcd1xcLl0rKVxccysoPzptb2JpbGVcXHM/c2FmYXJpfHNhZmFyaSkqL2kgICAgICAgIC8vIEFuZHJvaWQgQnJvd3NlclxuICAgICAgICAgICAgXSwgW1ZFUlNJT04sIFtOQU1FLCAnQW5kcm9pZCBCcm93c2VyJ11dLCBbXG5cbiAgICAgICAgICAgIC8oc2FpbGZpc2hicm93c2VyKVxcLyhbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2FpbGZpc2ggQnJvd3NlclxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnU2FpbGZpc2ggQnJvd3NlciddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKGNocm9tZXxvbW5pd2VifGFyb3JhfFt0aXplbm9rYV17NX1cXHM/YnJvd3NlcilcXC92PyhbXFx3XFwuXSspL2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2hyb21lL09tbmlXZWIvQXJvcmEvVGl6ZW4vTm9raWFcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvKGRvbGZpbilcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIERvbHBoaW5cbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0RvbHBoaW4nXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLygoPzphbmRyb2lkLispY3Jtb3xjcmlvcylcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWUgZm9yIEFuZHJvaWQvaU9TXG4gICAgICAgICAgICBdLCBbW05BTUUsICdDaHJvbWUnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhjb2FzdClcXC8oW1xcd1xcLl0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPcGVyYSBDb2FzdFxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnT3BlcmEgQ29hc3QnXSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgL2Z4aW9zXFwvKFtcXHdcXC4tXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlZm94IGZvciBpT1NcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBbTkFNRSwgJ0ZpcmVmb3gnXV0sIFtcblxuICAgICAgICAgICAgL3ZlcnNpb25cXC8oW1xcd1xcLl0rKS4rP21vYmlsZVxcL1xcdytcXHMoc2FmYXJpKS9pICAgICAgICAgICAgICAgICAgICAgICAvLyBNb2JpbGUgU2FmYXJpXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdNb2JpbGUgU2FmYXJpJ11dLCBbXG5cbiAgICAgICAgICAgIC92ZXJzaW9uXFwvKFtcXHdcXC5dKykuKz8obW9iaWxlXFxzP3NhZmFyaXxzYWZhcmkpL2kgICAgICAgICAgICAgICAgICAgIC8vIFNhZmFyaSAmIFNhZmFyaSBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBOQU1FXSwgW1xuXG4gICAgICAgICAgICAvd2Via2l0Lis/KGdzYSlcXC8oW1xcd1xcLl0rKS4rPyhtb2JpbGVcXHM/c2FmYXJpfHNhZmFyaSkoXFwvW1xcd1xcLl0rKS9pICAvLyBHb29nbGUgU2VhcmNoIEFwcGxpYW5jZSBvbiBpT1NcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0dTQSddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvd2Via2l0Lis/KG1vYmlsZVxccz9zYWZhcml8c2FmYXJpKShcXC9bXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAvLyBTYWZhcmkgPCAzLjBcbiAgICAgICAgICAgIF0sIFtOQU1FLCBbVkVSU0lPTiwgbWFwcGVyLnN0ciwgbWFwcy5icm93c2VyLm9sZHNhZmFyaS52ZXJzaW9uXV0sIFtcblxuICAgICAgICAgICAgLyh3ZWJraXR8a2h0bWwpXFwvKFtcXHdcXC5dKykvaVxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8vIEdlY2tvIGJhc2VkXG4gICAgICAgICAgICAvKG5hdmlnYXRvcnxuZXRzY2FwZSlcXC8oW1xcd1xcLi1dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5ldHNjYXBlXG4gICAgICAgICAgICBdLCBbW05BTUUsICdOZXRzY2FwZSddLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgLyhzd2lmdGZveCkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2lmdGZveFxuICAgICAgICAgICAgLyhpY2VkcmFnb258aWNld2Vhc2VsfGNhbWlub3xjaGltZXJhfGZlbm5lY3xtYWVtb1xcc2Jyb3dzZXJ8bWluaW1vfGNvbmtlcm9yKVtcXC9cXHNdPyhbXFx3XFwuXFwrXSspL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEljZURyYWdvbi9JY2V3ZWFzZWwvQ2FtaW5vL0NoaW1lcmEvRmVubmVjL01hZW1vL01pbmltby9Db25rZXJvclxuICAgICAgICAgICAgLyhmaXJlZm94fHNlYW1vbmtleXxrLW1lbGVvbnxpY2VjYXR8aWNlYXBlfGZpcmViaXJkfHBob2VuaXh8cGFsZW1vb258YmFzaWxpc2t8d2F0ZXJmb3gpXFwvKFtcXHdcXC4tXSspJC9pLFxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcmVmb3gvU2VhTW9ua2V5L0stTWVsZW9uL0ljZUNhdC9JY2VBcGUvRmlyZWJpcmQvUGhvZW5peFxuICAgICAgICAgICAgLyhtb3ppbGxhKVxcLyhbXFx3XFwuXSspLitydlxcOi4rZ2Vja29cXC9cXGQrL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ppbGxhXG5cbiAgICAgICAgICAgIC8vIE90aGVyXG4gICAgICAgICAgICAvKHBvbGFyaXN8bHlueHxkaWxsb3xpY2FifGRvcmlzfGFtYXlhfHczbXxuZXRzdXJmfHNsZWlwbmlyKVtcXC9cXHNdPyhbXFx3XFwuXSspL2ksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBvbGFyaXMvTHlueC9EaWxsby9pQ2FiL0RvcmlzL0FtYXlhL3czbS9OZXRTdXJmL1NsZWlwbmlyXG4gICAgICAgICAgICAvKGxpbmtzKVxcc1xcKChbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMaW5rc1xuICAgICAgICAgICAgLyhnb2Jyb3dzZXIpXFwvPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb0Jyb3dzZXJcbiAgICAgICAgICAgIC8oaWNlXFxzP2Jyb3dzZXIpXFwvdj8oW1xcd1xcLl9dKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIElDRSBCcm93c2VyXG4gICAgICAgICAgICAvKG1vc2FpYylbXFwvXFxzXShbXFx3XFwuXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3NhaWNcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXVxuICAgICAgICBdLFxuXG4gICAgICAgIGNwdSA6IFtbXG5cbiAgICAgICAgICAgIC8oPzooYW1kfHgoPzooPzo4Nnw2NClbXy1dKT98d293fHdpbik2NClbO1xcKV0vaSAgICAgICAgICAgICAgICAgICAgIC8vIEFNRDY0XG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ2FtZDY0J11dLCBbXG5cbiAgICAgICAgICAgIC8oaWEzMig/PTspKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSUEzMiAocXVpY2t0aW1lKVxuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsIHV0aWwubG93ZXJpemVdXSwgW1xuXG4gICAgICAgICAgICAvKCg/OmlbMzQ2XXx4KTg2KVs7XFwpXS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJQTMyXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ2lhMzInXV0sIFtcblxuICAgICAgICAgICAgLy8gUG9ja2V0UEMgbWlzdGFrZW5seSBpZGVudGlmaWVkIGFzIFBvd2VyUENcbiAgICAgICAgICAgIC93aW5kb3dzXFxzKGNlfG1vYmlsZSk7XFxzcHBjOy9pXG4gICAgICAgICAgICBdLCBbW0FSQ0hJVEVDVFVSRSwgJ2FybSddXSwgW1xuXG4gICAgICAgICAgICAvKCg/OnBwY3xwb3dlcnBjKSg/OjY0KT8pKD86XFxzbWFjfDt8XFwpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUG93ZXJQQ1xuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsIC9vd2VyLywgJycsIHV0aWwubG93ZXJpemVdXSwgW1xuXG4gICAgICAgICAgICAvKHN1bjRcXHcpWztcXCldL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU1BBUkNcbiAgICAgICAgICAgIF0sIFtbQVJDSElURUNUVVJFLCAnc3BhcmMnXV0sIFtcblxuICAgICAgICAgICAgLygoPzphdnIzMnxpYTY0KD89OykpfDY4ayg/PVxcKSl8YXJtKD86NjR8KD89dlxcZCtbO2xdKSl8KD89YXRtZWxcXHMpYXZyfCg/OmlyaXh8bWlwc3xzcGFyYykoPzo2NCk/KD89Oyl8cGEtcmlzYykvaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBJQTY0LCA2OEssIEFSTS82NCwgQVZSLzMyLCBJUklYLzY0LCBNSVBTLzY0LCBTUEFSQy82NCwgUEEtUklTQ1xuICAgICAgICAgICAgXSwgW1tBUkNISVRFQ1RVUkUsIHV0aWwubG93ZXJpemVdXVxuICAgICAgICBdLFxuXG4gICAgICAgIGRldmljZSA6IFtbXG5cbiAgICAgICAgICAgIC9cXCgoaXBhZHxwbGF5Ym9vayk7W1xcd1xcc1xcKSw7LV0rKHJpbXxhcHBsZSkvaSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlQYWQvUGxheUJvb2tcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgVkVORE9SLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FwcGxlY29yZW1lZGlhXFwvW1xcd1xcLl0rIFxcKChpcGFkKS8gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaVBhZFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQXBwbGUnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC8oYXBwbGVcXHN7MCwxfXR2KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFwcGxlIFRWXG4gICAgICAgICAgICBdLCBbW01PREVMLCAnQXBwbGUgVFYnXSwgW1ZFTkRPUiwgJ0FwcGxlJ11dLCBbXG5cbiAgICAgICAgICAgIC8oYXJjaG9zKVxccyhnYW1lcGFkMj8pL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFyY2hvc1xuICAgICAgICAgICAgLyhocCkuKyh0b3VjaHBhZCkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIUCBUb3VjaFBhZFxuICAgICAgICAgICAgLyhocCkuKyh0YWJsZXQpL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIUCBUYWJsZXRcbiAgICAgICAgICAgIC8oa2luZGxlKVxcLyhbXFx3XFwuXSspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS2luZGxlXG4gICAgICAgICAgICAvXFxzKG5vb2spW1xcd1xcc10rYnVpbGRcXC8oXFx3KykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9va1xuICAgICAgICAgICAgLyhkZWxsKVxccyhzdHJlYVtrcHJcXHNcXGRdKltcXGRrb10pL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRGVsbCBTdHJlYWtcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgLyhrZltBLXpdKylcXHNidWlsZFxcLy4rc2lsa1xcLy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBLaW5kbGUgRmlyZSBIRFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQW1hem9uJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhzZHxrZilbMDM0OWhpam9yc3R1d10rXFxzYnVpbGRcXC8uK3NpbGtcXC8vaSAgICAgICAgICAgICAgICAgICAgICAgICAvLyBGaXJlIFBob25lXG4gICAgICAgICAgICBdLCBbW01PREVMLCBtYXBwZXIuc3RyLCBtYXBzLmRldmljZS5hbWF6b24ubW9kZWxdLCBbVkVORE9SLCAnQW1hem9uJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL2FuZHJvaWQuK2FmdChbYm1zXSlcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZSBUVlxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQW1hem9uJ10sIFtUWVBFLCBTTUFSVFRWXV0sIFtcblxuICAgICAgICAgICAgL1xcKChpcFtob25lZHxcXHNcXHcqXSspOy4rKGFwcGxlKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpUG9kL2lQaG9uZVxuICAgICAgICAgICAgXSwgW01PREVMLCBWRU5ET1IsIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgL1xcKChpcFtob25lZHxcXHNcXHcqXSspOy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpUG9kL2lQaG9uZVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQXBwbGUnXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8oYmxhY2tiZXJyeSlbXFxzLV0/KFxcdyspL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBCbGFja0JlcnJ5XG4gICAgICAgICAgICAvKGJsYWNrYmVycnl8YmVucXxwYWxtKD89XFwtKXxzb255ZXJpY3Nzb258YWNlcnxhc3VzfGRlbGx8bWVpenV8bW90b3JvbGF8cG9seXRyb24pW1xcc18tXT8oW1xcdy1dKikvaSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmVuUS9QYWxtL1NvbnktRXJpY3Nzb24vQWNlci9Bc3VzL0RlbGwvTWVpenUvTW90b3JvbGEvUG9seXRyb25cbiAgICAgICAgICAgIC8oaHApXFxzKFtcXHdcXHNdK1xcdykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhQIGlQQVFcbiAgICAgICAgICAgIC8oYXN1cyktPyhcXHcrKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFzdXNcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9cXChiYjEwO1xccyhcXHcrKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2tCZXJyeSAxMFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnQmxhY2tCZXJyeSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN1cyBUYWJsZXRzXG4gICAgICAgICAgICAvYW5kcm9pZC4rKHRyYW5zZm9bcHJpbWVcXHNdezQsMTB9XFxzXFx3K3xlZWVwY3xzbGlkZXJcXHNcXHcrfG5leHVzIDd8cGFkZm9uZXxwMDBjKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBc3VzJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvKHNvbnkpXFxzKHRhYmxldFxcc1twc10pXFxzYnVpbGRcXC8vaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29ueVxuICAgICAgICAgICAgLyhzb255KT8oPzpzZ3AuKylcXHNidWlsZFxcLy9pXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ1NvbnknXSwgW01PREVMLCAnWHBlcmlhIFRhYmxldCddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9hbmRyb2lkLitcXHMoW2MtZ11cXGR7NH18c29bLWxdXFx3KykoPz1cXHNidWlsZFxcL3xcXCkuK2Nocm9tZVxcLyg/IVsxLTZdezAsMX1cXGRcXC4pKS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTb255J10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvXFxzKG91eWEpXFxzL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT3V5YVxuICAgICAgICAgICAgLyhuaW50ZW5kbylcXHMoW3dpZHMzdV0rKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTmludGVuZG9cbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgQ09OU09MRV1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKHNoaWVsZClcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBOdmlkaWFcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ052aWRpYSddLCBbVFlQRSwgQ09OU09MRV1dLCBbXG5cbiAgICAgICAgICAgIC8ocGxheXN0YXRpb25cXHNbMzRwb3J0YWJsZXZpXSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFBsYXlzdGF0aW9uXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTb255J10sIFtUWVBFLCBDT05TT0xFXV0sIFtcblxuICAgICAgICAgICAgLyhzcHJpbnRcXHMoXFx3KykpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNwcmludCBQaG9uZXNcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCBtYXBwZXIuc3RyLCBtYXBzLmRldmljZS5zcHJpbnQudmVuZG9yXSwgW01PREVMLCBtYXBwZXIuc3RyLCBtYXBzLmRldmljZS5zcHJpbnQubW9kZWxdLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLyhodGMpWztfXFxzLV0rKFtcXHdcXHNdKyg/PVxcKXxcXHNidWlsZCl8XFx3KykvaSwgICAgICAgICAgICAgICAgICAgICAgICAvLyBIVENcbiAgICAgICAgICAgIC8oenRlKS0oXFx3KikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFpURVxuICAgICAgICAgICAgLyhhbGNhdGVsfGdlZWtzcGhvbmV8bmV4aWFufHBhbmFzb25pY3woPz07XFxzKXNvbnkpW19cXHMtXT8oW1xcdy1dKikvaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBBbGNhdGVsL0dlZWtzUGhvbmUvTmV4aWFuL1BhbmFzb25pYy9Tb255XG4gICAgICAgICAgICBdLCBbVkVORE9SLCBbTU9ERUwsIC9fL2csICcgJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvKG5leHVzXFxzOSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIVEMgTmV4dXMgOVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnSFRDJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvZFxcL2h1YXdlaShbXFx3XFxzLV0rKVs7XFwpXS9pLFxuICAgICAgICAgICAgLyhuZXh1c1xcczZwKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSHVhd2VpXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdIdWF3ZWknXSwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC8obWljcm9zb2Z0KTtcXHMobHVtaWFbXFxzXFx3XSspL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWljcm9zb2Z0IEx1bWlhXG4gICAgICAgICAgICBdLCBbVkVORE9SLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbXG5cbiAgICAgICAgICAgIC9bXFxzXFwoO10oeGJveCg/Olxcc29uZSk/KVtcXHNcXCk7XS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNaWNyb3NvZnQgWGJveFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTWljcm9zb2Z0J10sIFtUWVBFLCBDT05TT0xFXV0sIFtcbiAgICAgICAgICAgIC8oa2luXFwuW29uZXR3XXszfSkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pY3Jvc29mdCBLaW5cbiAgICAgICAgICAgIF0sIFtbTU9ERUwsIC9cXC4vZywgJyAnXSwgW1ZFTkRPUiwgJ01pY3Jvc29mdCddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3Rvcm9sYVxuICAgICAgICAgICAgL1xccyhtaWxlc3RvbmV8ZHJvaWQoPzpbMi00eF18XFxzKD86YmlvbmljfHgyfHByb3xyYXpyKSk/Oj8oXFxzNGcpPylbXFx3XFxzXStidWlsZFxcLy9pLFxuICAgICAgICAgICAgL21vdFtcXHMtXT8oXFx3KikvaSxcbiAgICAgICAgICAgIC8oWFRcXGR7Myw0fSkgYnVpbGRcXC8vaSxcbiAgICAgICAgICAgIC8obmV4dXNcXHM2KS9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdNb3Rvcm9sYSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9hbmRyb2lkLitcXHMobXo2MFxcZHx4b29tW1xcczJdezAsMn0pXFxzYnVpbGRcXC8vaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTW90b3JvbGEnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9oYmJ0dlxcL1xcZCtcXC5cXGQrXFwuXFxkK1xccytcXChbXFx3XFxzXSo7XFxzKihcXHdbXjtdKik7KFteO10qKS9pICAgICAgICAgICAgLy8gSGJiVFYgZGV2aWNlc1xuICAgICAgICAgICAgXSwgW1tWRU5ET1IsIHV0aWwudHJpbV0sIFtNT0RFTCwgdXRpbC50cmltXSwgW1RZUEUsIFNNQVJUVFZdXSwgW1xuXG4gICAgICAgICAgICAvaGJidHYuK21hcGxlOyhcXGQrKS9pXG4gICAgICAgICAgICBdLCBbW01PREVMLCAvXi8sICdTbWFydFRWJ10sIFtWRU5ET1IsICdTYW1zdW5nJ10sIFtUWVBFLCBTTUFSVFRWXV0sIFtcblxuICAgICAgICAgICAgL1xcKGR0dltcXCk7XS4rKGFxdW9zKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFNoYXJwXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTaGFycCddLCBbVFlQRSwgU01BUlRUVl1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLisoKHNjaC1pWzg5XTBcXGR8c2h3LW0zODBzfGd0LXBcXGR7NH18Z3QtblxcZCt8c2doLXQ4WzU2XTl8bmV4dXMgMTApKS9pLFxuICAgICAgICAgICAgLygoU00tVFxcdyspKS9pXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ1NhbXN1bmcnXSwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgWyAgICAgICAgICAgICAgICAgIC8vIFNhbXN1bmdcbiAgICAgICAgICAgIC9zbWFydC10di4rKHNhbXN1bmcpL2lcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIFtUWVBFLCBTTUFSVFRWXSwgTU9ERUxdLCBbXG4gICAgICAgICAgICAvKChzW2NncF1oLVxcdyt8Z3QtXFx3K3xnYWxheHlcXHNuZXh1c3xzbS1cXHdbXFx3XFxkXSspKS9pLFxuICAgICAgICAgICAgLyhzYW1bc3VuZ10qKVtcXHMtXSooXFx3Ky0/W1xcdy1dKikvaSxcbiAgICAgICAgICAgIC9zZWMtKChzZ2hcXHcrKSkvaVxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdTYW1zdW5nJ10sIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL3NpZS0oXFx3KikvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2llbWVuc1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnU2llbWVucyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLyhtYWVtb3xub2tpYSkuKihuOTAwfGx1bWlhXFxzXFxkKykvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5va2lhXG4gICAgICAgICAgICAvKG5va2lhKVtcXHNfLV0/KFtcXHctXSopL2lcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnTm9raWEnXSwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZFt4XFxkXFwuXFxzO10rXFxzKFthYl1bMS03XVxcLT9bMDE3OGFdXFxkXFxkPykvaSAgICAgICAgICAgICAgICAgICAvLyBBY2VyXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBY2VyJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rKFt2bF1rXFwtP1xcZHszfSlcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExHIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTEcnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG4gICAgICAgICAgICAvYW5kcm9pZFxcczNcXC5bXFxzXFx3Oy1dezEwfShsZz8pLShbMDZjdjldezMsNH0pL2kgICAgICAgICAgICAgICAgICAgICAvLyBMRyBUYWJsZXRcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnTEcnXSwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuICAgICAgICAgICAgLyhsZykgbmV0Y2FzdFxcLnR2L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTEcgU21hcnRUVlxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBTTUFSVFRWXV0sIFtcbiAgICAgICAgICAgIC8obmV4dXNcXHNbNDVdKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIExHXG4gICAgICAgICAgICAvbGdbZTtcXHNcXC8tXSsoXFx3KikvaSxcbiAgICAgICAgICAgIC9hbmRyb2lkLitsZyhcXC0/W1xcZFxcd10rKVxccytidWlsZC9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdMRyddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgLyhsZW5vdm8pXFxzPyhzKD86NTAwMHw2MDAwKSg/OltcXHctXSspfHRhYig/OltcXHNcXHddKykpL2kgICAgICAgICAgICAgLy8gTGVub3ZvIHRhYmxldHNcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9hbmRyb2lkLisoaWRlYXRhYlthLXowLTlcXC1cXHNdKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBMZW5vdm9cbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0xlbm92byddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC8obGVub3ZvKVtfXFxzLV0/KFtcXHctXSspL2lcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2xpbnV4Oy4rKChqb2xsYSkpOy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBKb2xsYVxuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvKChwZWJibGUpKWFwcFxcL1tcXGRcXC5dK1xccy9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQZWJibGVcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgV0VBUkFCTEVdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rO1xccyhvcHBvKVxccz8oW1xcd1xcc10rKVxcc2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gT1BQT1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvY3JrZXkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBDaHJvbWVjYXN0XG4gICAgICAgICAgICBdLCBbW01PREVMLCAnQ2hyb21lY2FzdCddLCBbVkVORE9SLCAnR29vZ2xlJ11dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKGdsYXNzKVxcc1xcZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR29vZ2xlIEdsYXNzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdHb29nbGUnXSwgW1RZUEUsIFdFQVJBQkxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuKztcXHMocGl4ZWwgYylbXFxzKV0vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEdvb2dsZSBQaXhlbCBDXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdHb29nbGUnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKHBpeGVsKCBbMjNdKT8oIHhsKT8pW1xccyldL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBHb29nbGUgUGl4ZWxcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0dvb2dsZSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuKztcXHMoXFx3KylcXHMrYnVpbGRcXC9obVxcMS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFhpYW9taSBIb25nbWkgJ251bWVyaWMnIG1vZGVsc1xuICAgICAgICAgICAgL2FuZHJvaWQuKyhobVtcXHNcXC1fXSpub3RlP1tcXHNfXSooPzpcXGRcXHcpPylcXHMrYnVpbGQvaSwgICAgICAgICAgICAgICAvLyBYaWFvbWkgSG9uZ21pXG4gICAgICAgICAgICAvYW5kcm9pZC4rKG1pW1xcc1xcLV9dKig/OmFcXGR8b25lfG9uZVtcXHNfXXBsdXN8bm90ZSBsdGUpP1tcXHNfXSooPzpcXGQ/XFx3PylbXFxzX10qKD86cGx1cyk/KVxccytidWlsZC9pLCAgICBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWGlhb21pIE1pXG4gICAgICAgICAgICAvYW5kcm9pZC4rKHJlZG1pW1xcc1xcLV9dKig/Om5vdGUpPyg/OltcXHNfXSpbXFx3XFxzXSspKVxccytidWlsZC9pICAgICAgIC8vIFJlZG1pIFBob25lc1xuICAgICAgICAgICAgXSwgW1tNT0RFTCwgL18vZywgJyAnXSwgW1ZFTkRPUiwgJ1hpYW9taSddLCBbVFlQRSwgTU9CSUxFXV0sIFtcbiAgICAgICAgICAgIC9hbmRyb2lkLisobWlbXFxzXFwtX10qKD86cGFkKSg/OltcXHNfXSpbXFx3XFxzXSspKVxccytidWlsZC9pICAgICAgICAgICAgLy8gTWkgUGFkIHRhYmxldHNcbiAgICAgICAgICAgIF0sW1tNT0RFTCwgL18vZywgJyAnXSwgW1ZFTkRPUiwgJ1hpYW9taSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKG1bMS01XVxcc25vdGUpXFxzYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWVpenVcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ01laXp1J10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuICAgICAgICAgICAgLyhteiktKFtcXHctXXsyLH0pL2lcbiAgICAgICAgICAgIF0sIFtbVkVORE9SLCAnTWVpenUnXSwgTU9ERUwsIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rYTAwMCgxKVxccytidWlsZC9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBPbmVQbHVzXG4gICAgICAgICAgICAvYW5kcm9pZC4rb25lcGx1c1xccyhhXFxkezR9KVxccytidWlsZC9pXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdPbmVQbHVzJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKihSQ1RbXFxkXFx3XSspXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUkNBIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1JDQSddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXFxzXSsoVmVudWVbXFxkXFxzXXsyLDd9KVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgIC8vIERlbGwgVmVudWUgVGFibGV0c1xuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRGVsbCddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooUVtUfE1dW1xcZFxcd10rKVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFZlcml6b24gVGFibGV0XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdWZXJpem9uJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKyhCYXJuZXNbJlxcc10rTm9ibGVcXHMrfEJOW1JUXSkoVj8uKilcXHMrYnVpbGQvaSAgICAgLy8gQmFybmVzICYgTm9ibGUgVGFibGV0XG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ0Jhcm5lcyAmIE5vYmxlJ10sIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccysoVE1cXGR7M30uKlxcYilcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJhcm5lcyAmIE5vYmxlIFRhYmxldFxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnTnVWaXNpb24nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLis7XFxzKGs4OClcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBaVEUgSyBTZXJpZXMgVGFibGV0XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdaVEUnXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKGdlblxcZHszfSlcXHMrYnVpbGQuKjQ5aC9pICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFN3aXNzIEdFTiBNb2JpbGVcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ1N3aXNzJ10sIFtUWVBFLCBNT0JJTEVdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKih6dXJcXGR7M30pXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTd2lzcyBaVVIgVGFibGV0XG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdTd2lzcyddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooKFpla2kpP1RCLipcXGIpXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgLy8gWmVraSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdaZWtpJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvKGFuZHJvaWQpLitbO1xcL11cXHMrKFtZUl1cXGR7Mn0pXFxzK2J1aWxkL2ksXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKyhEcmFnb25bXFwtXFxzXStUb3VjaFxccyt8RFQpKFxcd3s1fSlcXHNidWlsZC9pICAgICAgICAvLyBEcmFnb24gVG91Y2ggVGFibGV0XG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ0RyYWdvbiBUb3VjaCddLCBNT0RFTCwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKE5TLT9cXHd7MCw5fSlcXHNidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEluc2lnbmlhIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0luc2lnbmlhJ10sIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKigoTlh8TmV4dCktP1xcd3swLDl9KVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAvLyBOZXh0Qm9vayBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdOZXh0Qm9vayddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooWHRyZW1lXFxfKT8oVigxWzA0NV18MlswMTVdfDMwfDQwfDYwfDdbMDVdfDkwKSlcXHMrYnVpbGQvaVxuICAgICAgICAgICAgXSwgW1tWRU5ET1IsICdWb2ljZSddLCBNT0RFTCwgW1RZUEUsIE1PQklMRV1dLCBbICAgICAgICAgICAgICAgICAgICAvLyBWb2ljZSBYdHJlbWUgUGhvbmVzXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKExWVEVMXFwtKT8oVjFbMTJdKVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgLy8gTHZUZWwgUGhvbmVzXG4gICAgICAgICAgICBdLCBbW1ZFTkRPUiwgJ0x2VGVsJ10sIE1PREVMLCBbVFlQRSwgTU9CSUxFXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuKztcXHMoUEgtMSlcXHMvaVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnRXNzZW50aWFsJ10sIFtUWVBFLCBNT0JJTEVdXSwgWyAgICAgICAgICAgICAgICAvLyBFc3NlbnRpYWwgUEgtMVxuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKihWKDEwME1EfDcwME5BfDcwMTF8OTE3RykuKlxcYilcXHMrYnVpbGQvaSAgICAgICAgICAvLyBFbnZpemVuIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ0Vudml6ZW4nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLitbO1xcL11cXHMqKExlW1xcc1xcLV0rUGFuKVtcXHNcXC1dKyhcXHd7MSw5fSlcXHMrYnVpbGQvaSAgICAgICAgICAvLyBMZSBQYW4gVGFibGV0c1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvYW5kcm9pZC4rWztcXC9dXFxzKihUcmlvW1xcc1xcLV0qLiopXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgLy8gTWFjaFNwZWVkIFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtNT0RFTCwgW1ZFTkRPUiwgJ01hY2hTcGVlZCddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccyooVHJpbml0eSlbXFwtXFxzXSooVFxcZHszfSlcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAvLyBUcmluaXR5IFRhYmxldHNcbiAgICAgICAgICAgIF0sIFtWRU5ET1IsIE1PREVMLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuK1s7XFwvXVxccypUVV8oMTQ5MSlcXHMrYnVpbGQvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBSb3RvciBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdSb3RvciddLCBbVFlQRSwgVEFCTEVUXV0sIFtcblxuICAgICAgICAgICAgL2FuZHJvaWQuKyhLUyguKykpXFxzK2J1aWxkL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW1hem9uIEtpbmRsZSBUYWJsZXRzXG4gICAgICAgICAgICBdLCBbTU9ERUwsIFtWRU5ET1IsICdBbWF6b24nXSwgW1RZUEUsIFRBQkxFVF1dLCBbXG5cbiAgICAgICAgICAgIC9hbmRyb2lkLisoR2lnYXNldClbXFxzXFwtXSsoUVxcd3sxLDl9KVxccytidWlsZC9pICAgICAgICAgICAgICAgICAgICAgIC8vIEdpZ2FzZXQgVGFibGV0c1xuICAgICAgICAgICAgXSwgW1ZFTkRPUiwgTU9ERUwsIFtUWVBFLCBUQUJMRVRdXSwgW1xuXG4gICAgICAgICAgICAvXFxzKHRhYmxldHx0YWIpWztcXC9dL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVW5pZGVudGlmaWFibGUgVGFibGV0XG4gICAgICAgICAgICAvXFxzKG1vYmlsZSkoPzpbO1xcL118XFxzc2FmYXJpKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFVuaWRlbnRpZmlhYmxlIE1vYmlsZVxuICAgICAgICAgICAgXSwgW1tUWVBFLCB1dGlsLmxvd2VyaXplXSwgVkVORE9SLCBNT0RFTF0sIFtcblxuICAgICAgICAgICAgL1tcXHNcXC9cXChdKHNtYXJ0LT90dilbO1xcKV0vaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU21hcnRUVlxuICAgICAgICAgICAgXSwgW1tUWVBFLCBTTUFSVFRWXV0sIFtcblxuICAgICAgICAgICAgLyhhbmRyb2lkW1xcd1xcLlxcc1xcLV17MCw5fSk7LitidWlsZC9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2VuZXJpYyBBbmRyb2lkIERldmljZVxuICAgICAgICAgICAgXSwgW01PREVMLCBbVkVORE9SLCAnR2VuZXJpYyddXVxuICAgICAgICBdLFxuXG4gICAgICAgIGVuZ2luZSA6IFtbXG5cbiAgICAgICAgICAgIC93aW5kb3dzLitcXHNlZGdlXFwvKFtcXHdcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEVkZ2VIVE1MXG4gICAgICAgICAgICBdLCBbVkVSU0lPTiwgW05BTUUsICdFZGdlSFRNTCddXSwgW1xuXG4gICAgICAgICAgICAvd2Via2l0XFwvNTM3XFwuMzYuK2Nocm9tZVxcLyg/ITI3KS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsaW5rXG4gICAgICAgICAgICBdLCBbW05BTUUsICdCbGluayddXSwgW1xuXG4gICAgICAgICAgICAvKHByZXN0bylcXC8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFByZXN0b1xuICAgICAgICAgICAgLyh3ZWJraXR8dHJpZGVudHxuZXRmcm9udHxuZXRzdXJmfGFtYXlhfGx5bnh8dzNtfGdvYW5uYSlcXC8oW1xcd1xcLl0rKS9pLCAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdlYktpdC9UcmlkZW50L05ldEZyb250L05ldFN1cmYvQW1heWEvTHlueC93M20vR29hbm5hXG4gICAgICAgICAgICAvKGtodG1sfHRhc21hbnxsaW5rcylbXFwvXFxzXVxcKD8oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gS0hUTUwvVGFzbWFuL0xpbmtzXG4gICAgICAgICAgICAvKGljYWIpW1xcL1xcc10oWzIzXVxcLltcXGRcXC5dKykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gaUNhYlxuICAgICAgICAgICAgXSwgW05BTUUsIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC9ydlxcOihbXFx3XFwuXXsxLDl9KS4rKGdlY2tvKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR2Vja29cbiAgICAgICAgICAgIF0sIFtWRVJTSU9OLCBOQU1FXVxuICAgICAgICBdLFxuXG4gICAgICAgIG9zIDogW1tcblxuICAgICAgICAgICAgLy8gV2luZG93cyBiYXNlZFxuICAgICAgICAgICAgL21pY3Jvc29mdFxccyh3aW5kb3dzKVxccyh2aXN0YXx4cCkvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFdpbmRvd3MgKGlUdW5lcylcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSwgW1xuICAgICAgICAgICAgLyh3aW5kb3dzKVxcc250XFxzNlxcLjI7XFxzKGFybSkvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gV2luZG93cyBSVFxuICAgICAgICAgICAgLyh3aW5kb3dzXFxzcGhvbmUoPzpcXHNvcykqKVtcXHNcXC9dPyhbXFxkXFwuXFxzXFx3XSopL2ksICAgICAgICAgICAgICAgICAgIC8vIFdpbmRvd3MgUGhvbmVcbiAgICAgICAgICAgIC8od2luZG93c1xcc21vYmlsZXx3aW5kb3dzKVtcXHNcXC9dPyhbbnRjZVxcZFxcLlxcc10rXFx3KS9pXG4gICAgICAgICAgICBdLCBbTkFNRSwgW1ZFUlNJT04sIG1hcHBlci5zdHIsIG1hcHMub3Mud2luZG93cy52ZXJzaW9uXV0sIFtcbiAgICAgICAgICAgIC8od2luKD89M3w5fG4pfHdpblxcczl4XFxzKShbbnRcXGRcXC5dKykvaVxuICAgICAgICAgICAgXSwgW1tOQU1FLCAnV2luZG93cyddLCBbVkVSU0lPTiwgbWFwcGVyLnN0ciwgbWFwcy5vcy53aW5kb3dzLnZlcnNpb25dXSwgW1xuXG4gICAgICAgICAgICAvLyBNb2JpbGUvRW1iZWRkZWQgT1NcbiAgICAgICAgICAgIC9cXCgoYmIpKDEwKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrQmVycnkgMTBcbiAgICAgICAgICAgIF0sIFtbTkFNRSwgJ0JsYWNrQmVycnknXSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8oYmxhY2tiZXJyeSlcXHcqXFwvPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrYmVycnlcbiAgICAgICAgICAgIC8odGl6ZW4pW1xcL1xcc10oW1xcd1xcLl0rKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRpemVuXG4gICAgICAgICAgICAvKGFuZHJvaWR8d2Vib3N8cGFsbVxcc29zfHFueHxiYWRhfHJpbVxcc3RhYmxldFxcc29zfG1lZWdvfHNhaWxmaXNofGNvbnRpa2kpW1xcL1xccy1dPyhbXFx3XFwuXSopL2lcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQW5kcm9pZC9XZWJPUy9QYWxtL1FOWC9CYWRhL1JJTS9NZWVHby9Db250aWtpL1NhaWxmaXNoIE9TXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcbiAgICAgICAgICAgIC8oc3ltYmlhblxccz9vc3xzeW1ib3N8czYwKD89OykpW1xcL1xccy1dPyhbXFx3XFwuXSopL2kgICAgICAgICAgICAgICAgICAvLyBTeW1iaWFuXG4gICAgICAgICAgICBdLCBbW05BTUUsICdTeW1iaWFuJ10sIFZFUlNJT05dLCBbXG4gICAgICAgICAgICAvXFwoKHNlcmllczQwKTsvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTZXJpZXMgNDBcbiAgICAgICAgICAgIF0sIFtOQU1FXSwgW1xuICAgICAgICAgICAgL21vemlsbGEuK1xcKG1vYmlsZTsuK2dlY2tvLitmaXJlZm94L2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmlyZWZveCBPU1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnRmlyZWZveCBPUyddLCBWRVJTSU9OXSwgW1xuXG4gICAgICAgICAgICAvLyBDb25zb2xlXG4gICAgICAgICAgICAvKG5pbnRlbmRvfHBsYXlzdGF0aW9uKVxccyhbd2lkczM0cG9ydGFibGV2dV0rKS9pLCAgICAgICAgICAgICAgICAgICAvLyBOaW50ZW5kby9QbGF5c3RhdGlvblxuXG4gICAgICAgICAgICAvLyBHTlUvTGludXggYmFzZWRcbiAgICAgICAgICAgIC8obWludClbXFwvXFxzXFwoXT8oXFx3KikvaSwgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1pbnRcbiAgICAgICAgICAgIC8obWFnZWlhfHZlY3RvcmxpbnV4KVs7XFxzXS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hZ2VpYS9WZWN0b3JMaW51eFxuICAgICAgICAgICAgLyhqb2xpfFtreGxuXT91YnVudHV8ZGViaWFufHN1c2V8b3BlbnN1c2V8Z2VudG9vfCg/PVxccylhcmNofHNsYWNrd2FyZXxmZWRvcmF8bWFuZHJpdmF8Y2VudG9zfHBjbGludXhvc3xyZWRoYXR8emVud2Fsa3xsaW5wdXMpW1xcL1xccy1dPyg/IWNocm9tKShbXFx3XFwuLV0qKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBKb2xpL1VidW50dS9EZWJpYW4vU1VTRS9HZW50b28vQXJjaC9TbGFja3dhcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmVkb3JhL01hbmRyaXZhL0NlbnRPUy9QQ0xpbnV4T1MvUmVkSGF0L1plbndhbGsvTGlucHVzXG4gICAgICAgICAgICAvKGh1cmR8bGludXgpXFxzPyhbXFx3XFwuXSopL2ksICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEh1cmQvTGludXhcbiAgICAgICAgICAgIC8oZ251KVxccz8oW1xcd1xcLl0qKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gR05VXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sIFtcblxuICAgICAgICAgICAgLyhjcm9zKVxcc1tcXHddK1xccyhbXFx3XFwuXStcXHcpL2kgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaHJvbWl1bSBPU1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnQ2hyb21pdW0gT1MnXSwgVkVSU0lPTl0sW1xuXG4gICAgICAgICAgICAvLyBTb2xhcmlzXG4gICAgICAgICAgICAvKHN1bm9zKVxccz8oW1xcd1xcLlxcZF0qKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTb2xhcmlzXG4gICAgICAgICAgICBdLCBbW05BTUUsICdTb2xhcmlzJ10sIFZFUlNJT05dLCBbXG5cbiAgICAgICAgICAgIC8vIEJTRCBiYXNlZFxuICAgICAgICAgICAgL1xccyhbZnJlbnRvcGMtXXswLDR9YnNkfGRyYWdvbmZseSlcXHM/KFtcXHdcXC5dKikvaSAgICAgICAgICAgICAgICAgICAgLy8gRnJlZUJTRC9OZXRCU0QvT3BlbkJTRC9QQy1CU0QvRHJhZ29uRmx5XG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl0sW1xuXG4gICAgICAgICAgICAvKGhhaWt1KVxccyhcXHcrKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gSGFpa3VcbiAgICAgICAgICAgIF0sIFtOQU1FLCBWRVJTSU9OXSxbXG5cbiAgICAgICAgICAgIC9jZm5ldHdvcmtcXC8uK2Rhcndpbi9pLFxuICAgICAgICAgICAgL2lwW2hvbmVhZF17Miw0fSg/Oi4qb3NcXHMoW1xcd10rKVxcc2xpa2VcXHNtYWN8O1xcc29wZXJhKS9pICAgICAgICAgICAgIC8vIGlPU1xuICAgICAgICAgICAgXSwgW1tWRVJTSU9OLCAvXy9nLCAnLiddLCBbTkFNRSwgJ2lPUyddXSwgW1xuXG4gICAgICAgICAgICAvKG1hY1xcc29zXFxzeClcXHM/KFtcXHdcXHNcXC5dKikvaSxcbiAgICAgICAgICAgIC8obWFjaW50b3NofG1hYyg/PV9wb3dlcnBjKVxccykvaSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hYyBPU1xuICAgICAgICAgICAgXSwgW1tOQU1FLCAnTWFjIE9TJ10sIFtWRVJTSU9OLCAvXy9nLCAnLiddXSwgW1xuXG4gICAgICAgICAgICAvLyBPdGhlclxuICAgICAgICAgICAgLygoPzpvcGVuKT9zb2xhcmlzKVtcXC9cXHMtXT8oW1xcd1xcLl0qKS9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU29sYXJpc1xuICAgICAgICAgICAgLyhhaXgpXFxzKChcXGQpKD89XFwufFxcKXxcXHMpW1xcd1xcLl0pKi9pLCAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQUlYXG4gICAgICAgICAgICAvKHBsYW5cXHM5fG1pbml4fGJlb3N8b3NcXC8yfGFtaWdhb3N8bW9ycGhvc3xyaXNjXFxzb3N8b3BlbnZtc3xmdWNoc2lhKS9pLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBQbGFuOS9NaW5peC9CZU9TL09TMi9BbWlnYU9TL01vcnBoT1MvUklTQ09TL09wZW5WTVMvRnVjaHNpYVxuICAgICAgICAgICAgLyh1bml4KVxccz8oW1xcd1xcLl0qKS9pICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVTklYXG4gICAgICAgICAgICBdLCBbTkFNRSwgVkVSU0lPTl1cbiAgICAgICAgXVxuICAgIH07XG5cblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gQ29uc3RydWN0b3JcbiAgICAvLy8vLy8vLy8vLy8vLy8vXG4gICAgdmFyIFVBUGFyc2VyID0gZnVuY3Rpb24gKHVhc3RyaW5nLCBleHRlbnNpb25zKSB7XG5cbiAgICAgICAgaWYgKHR5cGVvZiB1YXN0cmluZyA9PT0gJ29iamVjdCcpIHtcbiAgICAgICAgICAgIGV4dGVuc2lvbnMgPSB1YXN0cmluZztcbiAgICAgICAgICAgIHVhc3RyaW5nID0gdW5kZWZpbmVkO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIFVBUGFyc2VyKSkge1xuICAgICAgICAgICAgcmV0dXJuIG5ldyBVQVBhcnNlcih1YXN0cmluZywgZXh0ZW5zaW9ucykuZ2V0UmVzdWx0KCk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgdWEgPSB1YXN0cmluZyB8fCAoKHdpbmRvdyAmJiB3aW5kb3cubmF2aWdhdG9yICYmIHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KSA/IHdpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50IDogRU1QVFkpO1xuICAgICAgICB2YXIgcmd4bWFwID0gZXh0ZW5zaW9ucyA/IHV0aWwuZXh0ZW5kKHJlZ2V4ZXMsIGV4dGVuc2lvbnMpIDogcmVnZXhlcztcblxuICAgICAgICB0aGlzLmdldEJyb3dzZXIgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgYnJvd3NlciA9IHsgbmFtZTogdW5kZWZpbmVkLCB2ZXJzaW9uOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgIG1hcHBlci5yZ3guY2FsbChicm93c2VyLCB1YSwgcmd4bWFwLmJyb3dzZXIpO1xuICAgICAgICAgICAgYnJvd3Nlci5tYWpvciA9IHV0aWwubWFqb3IoYnJvd3Nlci52ZXJzaW9uKTsgLy8gZGVwcmVjYXRlZFxuICAgICAgICAgICAgcmV0dXJuIGJyb3dzZXI7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0Q1BVID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGNwdSA9IHsgYXJjaGl0ZWN0dXJlOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgIG1hcHBlci5yZ3guY2FsbChjcHUsIHVhLCByZ3htYXAuY3B1KTtcbiAgICAgICAgICAgIHJldHVybiBjcHU7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0RGV2aWNlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgdmFyIGRldmljZSA9IHsgdmVuZG9yOiB1bmRlZmluZWQsIG1vZGVsOiB1bmRlZmluZWQsIHR5cGU6IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgbWFwcGVyLnJneC5jYWxsKGRldmljZSwgdWEsIHJneG1hcC5kZXZpY2UpO1xuICAgICAgICAgICAgcmV0dXJuIGRldmljZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRFbmdpbmUgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICB2YXIgZW5naW5lID0geyBuYW1lOiB1bmRlZmluZWQsIHZlcnNpb246IHVuZGVmaW5lZCB9O1xuICAgICAgICAgICAgbWFwcGVyLnJneC5jYWxsKGVuZ2luZSwgdWEsIHJneG1hcC5lbmdpbmUpO1xuICAgICAgICAgICAgcmV0dXJuIGVuZ2luZTtcbiAgICAgICAgfTtcbiAgICAgICAgdGhpcy5nZXRPUyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHZhciBvcyA9IHsgbmFtZTogdW5kZWZpbmVkLCB2ZXJzaW9uOiB1bmRlZmluZWQgfTtcbiAgICAgICAgICAgIG1hcHBlci5yZ3guY2FsbChvcywgdWEsIHJneG1hcC5vcyk7XG4gICAgICAgICAgICByZXR1cm4gb3M7XG4gICAgICAgIH07XG4gICAgICAgIHRoaXMuZ2V0UmVzdWx0ID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICB1YSAgICAgIDogdGhpcy5nZXRVQSgpLFxuICAgICAgICAgICAgICAgIGJyb3dzZXIgOiB0aGlzLmdldEJyb3dzZXIoKSxcbiAgICAgICAgICAgICAgICBlbmdpbmUgIDogdGhpcy5nZXRFbmdpbmUoKSxcbiAgICAgICAgICAgICAgICBvcyAgICAgIDogdGhpcy5nZXRPUygpLFxuICAgICAgICAgICAgICAgIGRldmljZSAgOiB0aGlzLmdldERldmljZSgpLFxuICAgICAgICAgICAgICAgIGNwdSAgICAgOiB0aGlzLmdldENQVSgpXG4gICAgICAgICAgICB9O1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLmdldFVBID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIHVhO1xuICAgICAgICB9O1xuICAgICAgICB0aGlzLnNldFVBID0gZnVuY3Rpb24gKHVhc3RyaW5nKSB7XG4gICAgICAgICAgICB1YSA9IHVhc3RyaW5nO1xuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgICAgIH07XG4gICAgICAgIHJldHVybiB0aGlzO1xuICAgIH07XG5cbiAgICBVQVBhcnNlci5WRVJTSU9OID0gTElCVkVSU0lPTjtcbiAgICBVQVBhcnNlci5CUk9XU0VSID0ge1xuICAgICAgICBOQU1FICAgIDogTkFNRSxcbiAgICAgICAgTUFKT1IgICA6IE1BSk9SLCAvLyBkZXByZWNhdGVkXG4gICAgICAgIFZFUlNJT04gOiBWRVJTSU9OXG4gICAgfTtcbiAgICBVQVBhcnNlci5DUFUgPSB7XG4gICAgICAgIEFSQ0hJVEVDVFVSRSA6IEFSQ0hJVEVDVFVSRVxuICAgIH07XG4gICAgVUFQYXJzZXIuREVWSUNFID0ge1xuICAgICAgICBNT0RFTCAgIDogTU9ERUwsXG4gICAgICAgIFZFTkRPUiAgOiBWRU5ET1IsXG4gICAgICAgIFRZUEUgICAgOiBUWVBFLFxuICAgICAgICBDT05TT0xFIDogQ09OU09MRSxcbiAgICAgICAgTU9CSUxFICA6IE1PQklMRSxcbiAgICAgICAgU01BUlRUViA6IFNNQVJUVFYsXG4gICAgICAgIFRBQkxFVCAgOiBUQUJMRVQsXG4gICAgICAgIFdFQVJBQkxFOiBXRUFSQUJMRSxcbiAgICAgICAgRU1CRURERUQ6IEVNQkVEREVEXG4gICAgfTtcbiAgICBVQVBhcnNlci5FTkdJTkUgPSB7XG4gICAgICAgIE5BTUUgICAgOiBOQU1FLFxuICAgICAgICBWRVJTSU9OIDogVkVSU0lPTlxuICAgIH07XG4gICAgVUFQYXJzZXIuT1MgPSB7XG4gICAgICAgIE5BTUUgICAgOiBOQU1FLFxuICAgICAgICBWRVJTSU9OIDogVkVSU0lPTlxuICAgIH07XG5cbiAgICAvLy8vLy8vLy8vL1xuICAgIC8vIEV4cG9ydFxuICAgIC8vLy8vLy8vLy9cblxuXG4gICAgLy8gY2hlY2sganMgZW52aXJvbm1lbnRcbiAgICBpZiAodHlwZW9mKGV4cG9ydHMpICE9PSBVTkRFRl9UWVBFKSB7XG4gICAgICAgIC8vIG5vZGVqcyBlbnZcbiAgICAgICAgaWYgKHR5cGVvZiBtb2R1bGUgIT09IFVOREVGX1RZUEUgJiYgbW9kdWxlLmV4cG9ydHMpIHtcbiAgICAgICAgICAgIGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IFVBUGFyc2VyO1xuICAgICAgICB9XG4gICAgICAgIGV4cG9ydHMuVUFQYXJzZXIgPSBVQVBhcnNlcjtcbiAgICB9IGVsc2Uge1xuICAgICAgICAvLyByZXF1aXJlanMgZW52IChvcHRpb25hbClcbiAgICAgICAgaWYgKHR5cGVvZihkZWZpbmUpID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpIHtcbiAgICAgICAgICAgIGRlZmluZShmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIFVBUGFyc2VyO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAod2luZG93KSB7XG4gICAgICAgICAgICAvLyBicm93c2VyIGVudlxuICAgICAgICAgICAgd2luZG93LlVBUGFyc2VyID0gVUFQYXJzZXI7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBqUXVlcnkvWmVwdG8gc3BlY2lmaWMgKG9wdGlvbmFsKVxuICAgIC8vIE5vdGU6XG4gICAgLy8gICBJbiBBTUQgZW52IHRoZSBnbG9iYWwgc2NvcGUgc2hvdWxkIGJlIGtlcHQgY2xlYW4sIGJ1dCBqUXVlcnkgaXMgYW4gZXhjZXB0aW9uLlxuICAgIC8vICAgalF1ZXJ5IGFsd2F5cyBleHBvcnRzIHRvIGdsb2JhbCBzY29wZSwgdW5sZXNzIGpRdWVyeS5ub0NvbmZsaWN0KHRydWUpIGlzIHVzZWQsXG4gICAgLy8gICBhbmQgd2Ugc2hvdWxkIGNhdGNoIHRoYXQuXG4gICAgdmFyICQgPSB3aW5kb3cgJiYgKHdpbmRvdy5qUXVlcnkgfHwgd2luZG93LlplcHRvKTtcbiAgICBpZiAodHlwZW9mICQgIT09IFVOREVGX1RZUEUgJiYgISQudWEpIHtcbiAgICAgICAgdmFyIHBhcnNlciA9IG5ldyBVQVBhcnNlcigpO1xuICAgICAgICAkLnVhID0gcGFyc2VyLmdldFJlc3VsdCgpO1xuICAgICAgICAkLnVhLmdldCA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwYXJzZXIuZ2V0VUEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgJC51YS5zZXQgPSBmdW5jdGlvbiAodWFzdHJpbmcpIHtcbiAgICAgICAgICAgIHBhcnNlci5zZXRVQSh1YXN0cmluZyk7XG4gICAgICAgICAgICB2YXIgcmVzdWx0ID0gcGFyc2VyLmdldFJlc3VsdCgpO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiByZXN1bHQpIHtcbiAgICAgICAgICAgICAgICAkLnVhW3Byb3BdID0gcmVzdWx0W3Byb3BdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgIH1cblxufSkodHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgPyB3aW5kb3cgOiB0aGlzKTtcbiIsImltcG9ydCBSVENDbGllbnQgZnJvbSAnLi9ydGMtY2xpZW50JztcbmltcG9ydCB7Z2V0RGV2aWNlcywgc2VyaWFsaXplRm9ybURhdGEsIHZhbGlkYXRvciwgcmVzb2x1dGlvbnMsIHNjcmVlblNoYXJlUmVzb2x1dGlvbnN9IGZyb20gJy4vY29tbW9uJztcbmltcG9ydCBcIi4vYXNzZXRzL3N0eWxlLnNjc3NcIjtcbmltcG9ydCAqIGFzIE0gZnJvbSAnbWF0ZXJpYWxpemUtY3NzJztcbmltcG9ydCB7c2V0Rm9ybURhdGEsIHBhcnNlRnJvbVNlYXJjaH0gZnJvbSAnLi9zZWFyY2hQYXJhbSc7XG5cbmxldCBzY3JlZW5BdWRpbyA9IHRydWU7XG5cbiQoKCkgPT4geyAgXG4gIGdldERldmljZXMoZnVuY3Rpb24gKGRldmljZXMpIHtcbiAgICBkZXZpY2VzLmF1ZGlvcy5mb3JFYWNoKGZ1bmN0aW9uIChhdWRpbykge1xuICAgICAgJCgnPG9wdGlvbi8+Jywge1xuICAgICAgICB2YWx1ZTogYXVkaW8udmFsdWUsXG4gICAgICAgIHRleHQ6IGF1ZGlvLm5hbWUsXG4gICAgICB9KS5hcHBlbmRUbyhcIiNtaWNyb3Bob25lSWRcIik7XG4gICAgfSlcbiAgICBkZXZpY2VzLnZpZGVvcy5mb3JFYWNoKGZ1bmN0aW9uICh2aWRlbykge1xuICAgICAgJCgnPG9wdGlvbi8+Jywge1xuICAgICAgICB2YWx1ZTogdmlkZW8udmFsdWUsXG4gICAgICAgIHRleHQ6IHZpZGVvLm5hbWUsXG4gICAgICB9KS5hcHBlbmRUbyhcIiNjYW1lcmFJZFwiKTtcbiAgICB9KVxuICAgIHNjcmVlblNoYXJlUmVzb2x1dGlvbnMuZm9yRWFjaChmdW5jdGlvbiAocmVzb2x1dGlvbikge1xuICAgICAgJCgnPG9wdGlvbi8+Jywge1xuICAgICAgICB2YWx1ZTogcmVzb2x1dGlvbi52YWx1ZSxcbiAgICAgICAgdGV4dDogcmVzb2x1dGlvbi5uYW1lXG4gICAgICB9KS5hcHBlbmRUbyhcIiNzY3JlZW5TaGFyZVJlc29sdXRpb25cIik7XG4gICAgfSlcbiAgICByZXNvbHV0aW9ucy5mb3JFYWNoKGZ1bmN0aW9uIChyZXNvbHV0aW9uKSB7XG4gICAgICAkKCc8b3B0aW9uLz4nLCB7XG4gICAgICAgIHZhbHVlOiByZXNvbHV0aW9uLnZhbHVlLFxuICAgICAgICB0ZXh0OiByZXNvbHV0aW9uLm5hbWVcbiAgICAgIH0pLmFwcGVuZFRvKFwiI2NhbWVyYVJlc29sdXRpb25cIik7XG4gICAgfSlcbiAgICBNLkF1dG9Jbml0KCk7XG4gIH0pXG5cbiAgY29uc3QgZmllbGRzID0gWydhcHBJRCcsICdjaGFubmVsJ107XG5cbiAgbGV0IHJ0YyA9IG5ldyBSVENDbGllbnQoKTtcblxuICAkKFwiLmF1dG9wbGF5LWZhbGxiYWNrXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KClcbiAgICBjb25zdCBpZCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImlkXCIpLnNwbGl0KFwidmlkZW9fYXV0b3BsYXlfXCIpWzFdXG4gICAgY29uc29sZS5sb2coXCJhdXRvcGxheSBmYWxsYmFja1wiKVxuICAgIGlmIChpZCA9PT0gJ2xvY2FsJykge1xuICAgICAgcnRjLl9sb2NhbFN0cmVhbS5yZXN1bWUoKS50aGVuKCgpID0+IHtcbiAgICAgICAgVG9hc3Qubm90aWNlKFwibG9jYWwgcmVzdW1lXCIpXG4gICAgICAgICQoZS50YXJnZXQpLmFkZENsYXNzKFwiaGlkZVwiKVxuICAgICAgfSkuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBUb2FzdC5lcnJvcihcInJlc3VtZSBmYWlsZWQsIHBsZWFzZSBvcGVuIGNvbnNvbGUgc2VlIG1vcmUgZGV0YWlsc1wiKVxuICAgICAgICBjb25zb2xlLmVycm9yKGVycilcbiAgICAgIH0pXG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGNvbnN0IHJlbW90ZVN0cmVhbSA9IHJ0Yy5fcmVtb3RlU3RyZWFtcy5maW5kKChpdGVtKSA9PiBgJHtpdGVtLmdldElkKCl9YCA9PSBpZClcbiAgICBpZiAocmVtb3RlU3RyZWFtKSB7XG4gICAgICByZW1vdGVTdHJlYW0ucmVzdW1lKCkudGhlbigoKSA9PiB7XG4gICAgICAgIFRvYXN0Lm5vdGljZShcInJlbW90ZSByZXN1bWVcIilcbiAgICAgICAgJChlLnRhcmdldCkuYWRkQ2xhc3MoXCJoaWRlXCIpXG4gICAgICB9KS5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICAgIFRvYXN0LmVycm9yKFwicmVzdW1lIGZhaWxlZCwgcGxlYXNlIG9wZW4gY29uc29sZSBzZWUgbW9yZSBkZXRhaWxzXCIpXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKVxuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgJChcIiNzaG93X3Byb2ZpbGVcIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgcnRjLnNldE5ldHdvcmtRdWFsaXR5QW5kU3RyZWFtU3RhdHModGhpcy5jaGVja2VkKTtcbiAgfSlcblxuICAkKFwiI2pvaW5cIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZyhcImpvaW5cIilcbiAgICBjb25zdCBwYXJhbXMgPSBzZXJpYWxpemVGb3JtRGF0YSgpO1xuICAgIGlmICh2YWxpZGF0b3IocGFyYW1zLCBmaWVsZHMpKSB7XG4gICAgICBydGMuam9pbihwYXJhbXMpLnRoZW4oKCkgPT4ge1xuICAgICAgICBydGMucHVibGlzaCgpO1xuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgJChcIiNlbmFibGVfYXVkaW9cIikub24oXCJjaGFuZ2VcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgc2NyZWVuQXVkaW8gPSB0aGlzLmNoZWNrZWQ7XG4gIH0pO1xuICAkKFwiI2pvaW5TY3JlZW5TaGFyZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnNvbGUubG9nKFwiam9pblwiKVxuICAgIGNvbnN0IHBhcmFtcyA9IHNlcmlhbGl6ZUZvcm1EYXRhKCk7XG4gICAgaWYgKHZhbGlkYXRvcihwYXJhbXMsIGZpZWxkcykpIHtcbiAgICAgIHJ0Yy5qb2luU2NyZWVuU2hhcmluZyh7Li4ucGFyYW1zLCBzY3JlZW5BdWRpb30pLnRoZW4oKCkgPT4ge1xuICAgICAgICBydGMucHVibGlzaCgpO1xuICAgICAgfSlcbiAgICB9XG4gIH0pXG5cbiAgJChcIiNwdWJsaXNoXCIpLm9uKFwiY2xpY2tcIiwgZnVuY3Rpb24gKGUpIHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc29sZS5sb2coXCJzdGFydExpdmVTdHJlYW1pbmdcIilcbiAgICBjb25zdCBwYXJhbXMgPSBzZXJpYWxpemVGb3JtRGF0YSgpO1xuICAgIGlmICh2YWxpZGF0b3IocGFyYW1zLCBmaWVsZHMpKSB7XG4gICAgICBydGMucHVibGlzaCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgJChcIiN1bnB1Ymxpc2hcIikub24oXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zb2xlLmxvZyhcInN0b3BMaXZlU3RyZWFtaW5nXCIpXG4gICAgY29uc3QgcGFyYW1zID0gc2VyaWFsaXplRm9ybURhdGEoKTtcbiAgICBpZiAodmFsaWRhdG9yKHBhcmFtcywgZmllbGRzKSkge1xuICAgICAgcnRjLnVucHVibGlzaCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgJChcIiNsZWF2ZVwiKS5vbihcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnNvbGUubG9nKFwibGVhdmVcIilcbiAgICBjb25zdCBwYXJhbXMgPSBzZXJpYWxpemVGb3JtRGF0YSgpO1xuICAgIGlmICh2YWxpZGF0b3IocGFyYW1zLCBmaWVsZHMpKSB7XG4gICAgICBydGMubGVhdmUoKTtcbiAgICB9XG4gIH0pO1xufSkiLCJ2YXIgZztcblxuLy8gVGhpcyB3b3JrcyBpbiBub24tc3RyaWN0IG1vZGVcbmcgPSAoZnVuY3Rpb24oKSB7XG5cdHJldHVybiB0aGlzO1xufSkoKTtcblxudHJ5IHtcblx0Ly8gVGhpcyB3b3JrcyBpZiBldmFsIGlzIGFsbG93ZWQgKHNlZSBDU1ApXG5cdGcgPSBnIHx8IG5ldyBGdW5jdGlvbihcInJldHVybiB0aGlzXCIpKCk7XG59IGNhdGNoIChlKSB7XG5cdC8vIFRoaXMgd29ya3MgaWYgdGhlIHdpbmRvdyByZWZlcmVuY2UgaXMgYXZhaWxhYmxlXG5cdGlmICh0eXBlb2Ygd2luZG93ID09PSBcIm9iamVjdFwiKSBnID0gd2luZG93O1xufVxuXG4vLyBnIGNhbiBzdGlsbCBiZSB1bmRlZmluZWQsIGJ1dCBub3RoaW5nIHRvIGRvIGFib3V0IGl0Li4uXG4vLyBXZSByZXR1cm4gdW5kZWZpbmVkLCBpbnN0ZWFkIG9mIG5vdGhpbmcgaGVyZSwgc28gaXQnc1xuLy8gZWFzaWVyIHRvIGhhbmRsZSB0aGlzIGNhc2UuIGlmKCFnbG9iYWwpIHsgLi4ufVxuXG5tb2R1bGUuZXhwb3J0cyA9IGc7XG4iLCIvLyBleHRyYWN0ZWQgYnkgbWluaS1jc3MtZXh0cmFjdC1wbHVnaW4iLCJleHBvcnQgY29uc3QgcGFyc2VGcm9tU2VhcmNoID0gKCkgPT4ge1xuICBjb25zdCBzZWFyY2hTdHIgPSB3aW5kb3cubG9jYXRpb24uc2VhcmNoXG4gIGNvbnN0IHBhcmFtID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhzZWFyY2hTdHIpXG4gIGxldCBtYXAgPSB7fVxuICBmb3IgKGxldCBrZXkgb2YgcGFyYW0ua2V5cygpKSB7XG4gICAgbWFwW2tleV0gPSBwYXJhbS5nZXQoa2V5KVxuICB9XG4gIHJldHVybiBtYXBcbn1cblxuZXhwb3J0IGNvbnN0IHN0cmluZ2lmeSA9IChvYmopID0+IHtcbiAgY29uc3Qgc3RyID0gT2JqZWN0LmVudHJpZXMob2JqKS5yZWR1Y2UoKHByZSwgY3VyKSA9PiB7XG4gICAgcmV0dXJuIHByZSArIGAke2N1clswXX09JHtjdXJbMV19JmBcbiAgfSwgJz8nKVxuICByZXR1cm4gc3RyLnNsaWNlKDAsIC0xKVxufVxuXG5leHBvcnQgY29uc3Qgc2V0Rm9ybURhdGEgPSAob2JqKSA9PiB7XG4gIE9iamVjdC5rZXlzKG9iaikubWFwKGtleSA9PiB7XG4gICAgY29uc3QgdGFyZ2V0RG9tID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgW25hbWU9JHtrZXl9XWApXG4gICAgaWYgKHRhcmdldERvbSkge1xuICAgICAgdGFyZ2V0RG9tLnZhbHVlID0gb2JqW2tleV1cbiAgICB9XG4gIH0pXG59XG5cbmV4cG9ydCBjb25zdCByZXBsYWNlU2VhcmNoU3RyaW5nID0gKHNlYXJjaFN0cikgPT4ge1xuICBpZiAod2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKSB7XG4gICAgY29uc3QgbmV3VVJMID0gbmV3IFVSTCh3aW5kb3cubG9jYXRpb24uaHJlZik7XG4gICAgbmV3VVJMLnNlYXJjaCA9IHNlYXJjaFN0cjtcbiAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoeyBwYXRoOiBuZXdVUkwuaHJlZiB9LCBcIlwiLCBuZXdVUkwuaHJlZik7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS53YXJuKCdgaGlzdG9yeS5wdXNoU3RhdGVgIGlzIG5vdCBzdXBwb3J0ZWQnKVxuICB9XG59Il0sInNvdXJjZVJvb3QiOiIifQ==